System.register([],function(Ia,mb){return{execute:function(){function vb(g,c){return Array.isArray(g)?g.reduce(function(h,f){return vb(f,h)},c):"string"===typeof g?c.filter(function(h){return h.path()!==g&&h.name()!==g}):g instanceof RegExp?c.filter(function(h){return!g.test(h.path())&&!g.test(h.name())}):"function"===typeof g?c.filter(function(h){return!g(h)}):c}function Vb(g){g=$jscomp.makeIterator(g.split("?"));g.next();var c=g.next().value;g={};if(!c)return g;if(c=c.split("&"))for(var h=0;h<
c.length;h++){var f=c[h].split("="),m=f[0],n=!0;if(1<f.length)if(n=decodeURIComponent(f.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(a){"["===n[0]&&(n=n.slice(1,-1).split(","))}g[m]=n}return g}function Eb(g){return Object.keys(g).map(function(c){return c+"="+encodeURIComponent(String(g[c]))}).join("&")}function Jc(g){var c=g.replace(Le.pathDoubleSlashRe,"$1/");c=c.replace(Le.pathDotRe,"/");do g=c,c=g.replace(Le.pathDoubleDotRe,
"");while(c!=g);return c}function Bc(g,c){var h=g.match(Le.urlRe),f=c.match(Le.urlRe),m=!0;if(h&&!f||!h&&f)m=!1;if(h&&f){var n=h[1];var a=h[2];var d=f[1];var k=f[2];n!==d?m=!1:a!==k?m=!1:(g=h[3],c=f[3])}if(!m)throw Error("[relativePathBetween] incompatible paths: "+g+" vs. "+c);g=Le.withRelativePartsResolved(g);c=Le.withRelativePartsResolved(c);if(g==c)return"";h=Le._relativePathBetween_checkPathes(c,g);if(!h)throw Error("pathname differs in relativePathFrom "+g+" vs "+c);return h}function Uc(g,c){return Le.withRelativePartsResolved(g.replace(Le.slashEndRe,
"")+"/"+c.replace(Le.slashStartRe,""))}function tc(g){return g.startsWith("/")?g.replace(Le.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function oc(g){var c=[];for(g=Le.parent(g);g&&(c.unshift(g),g=Le.parent(g),"/"!==g););return c}function sc(g,c){if(!g)throw Error("lively.resource resource constructor: expects url but got "+g);if(g.isResource)return g;g=String(g);for(var h=0;h<Le.extensions.length;h++)if(Le.extensions[h].matches(g))return new Le.extensions[h].resourceClass(g,c);throw Error("Cannot find resource type for url "+
g);}function Tc(g,c,h){var f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return f=sc(g,h).asDirectory(),d.yield(f.ensureExistance(),2);case 2:n=d.forIn(c);case 3:if(null==(m=n.getNext())){d.jumpTo(5);break}if(!c.hasOwnProperty(m)){d.jumpTo(3);break}a=f.join(m);return"object"===typeof c[m]?d.yield(Tc(a,c[m],h),9):d.yield(a.write(c[m]),8);case 8:d.jumpTo(7);break;case 9:case 7:d.jumpTo(3);break;case 5:return d.return(f)}})}function Fd(g){var c=g.name;
Le.extensions=Le.extensions.filter(function(h){return h.name!==c}).concat(g)}function Rd(g){var c="string"===typeof g?g:g.name;Le.extensions=Le.extensions.filter(function(h){return h.name!==c})}function ee(g,c,h){h=h||0;var f=[];if(g<=c)for(0>=h&&(h=-h||1);g<=c;g+=h)f.push(g);else for(0<=h&&(h=-h||-1);g>=c;g+=h)f.push(g);return f}function Dc(g,c){for(var h=Array(g);0<g;)h[--g]=c;return h}function rd(g,c){for(var h=Array(g);0<g;)h[--g]=c(g);return h}function Ab(g,c,h){for(var f=[],m=0;m<g.length;m++){var n=
g[m];c.call(h,n)&&f.push(n)}return f}function qc(g,c,h,f){f=void 0===f?!1:f;if(g&&Jb.isArray(g)){for(var m=0,n=g.length-1;m<=n;){var a=m+Math.floor((n-m)/2),d=h?h(g[a]):g[a];if(d===c)return g[a];d>c?n=a-1:m=a+1}if(f){if(!g[m])return g[n];if(!g[n])return g[m];f=h?h(g[m]):g[m];h=h?h(g[n]):g[n];return 0>Math.abs(f-c)-Math.abs(h-c)?g[m]:g[n]}}}function Xc(g,c){var h;g.find(function(f,m){return h=c(f,m)});return h}function zc(g,c){return g.filter(function(h){return!!h[c]})}function ed(g,c,h){"string"===
typeof c&&(c=new RegExp(c,"i"));return Jb.filter(g,Jb.filter.test.bind(c))}function wd(g,c){return Jb.filter(g,function(h,f){return!!c[f]})}function xb(g,c,h){return Jb.filter(g,function(f,m){return!c.call(h,f,m)})}function hc(g,c){return Jb.filter(g,function(h){return!h[c]})}function Cc(g,c){return Jb.filter(g,function(h){return h!==c})}function ic(g,c){return Jb.filter(g,function(h){return-1===c.indexOf(h)})}function Qc(g,c){if(!g.length)return g;var h=[g[0]];if(c)for(c=1;c<g.length;c++){var f=
g[c];f!==h[h.length]&&h.push(f)}else for(c=1;c<g.length;c++)f=g[c],-1===h.indexOf(f)&&h.push(f);return h}function jb(g,c,h){for(var f=g.slice(),m=f.length;m--;)for(var n=g[m],a=m+1;a<f.length;a++)c.call(h,n,f[a])&&f.splice(a--,1);return f}function fb(g,c){for(var h={},f=[],m=0;m<g.length;m++){var n=g[m];h[n[c]]||(h[n[c]]=!0,f.push(n))}return f}function Ob(g){return Jb.filter(g,Boolean)}function Cb(g){for(var c=0,h=0,f=g.length;c<f;)g.hasOwnProperty(c)&&(g[h++]=g[c]),c++;for(;h++<f;)g.pop();return g}
function ob(g,c,h){return g.forEach(c,h)}function bc(){var g=Array.from(arguments),c=g.shift(),h="function"===typeof Jb.last(g)?g.pop():function(m){return m},f=[c].concat(g).map(function(m){return Array.from(m)});return c.map(function(m,n){return h(Jb.pluck(f,n),n)})}function Ma(g,c){if("number"===typeof c){if(0>=c)return g;c--}return g.reduce(function(h,f){return h.concat(Array.isArray(f)?Ma(f,c):[f])},[])}function Db(g,c,h){for(var f=[],m=0;m<g.length;m++)f.push.apply(f,c.call(h,g[m],m));return f}
function gb(g,c){return g.reduce(function(h,f){0<h.length&&h.push(c);h.push(f);return h},[])}function zb(g,c){return Jb.interpose(g,c)}function ec(g,c,h){return g.map(c,h)}function rc(g,c,h,f,m,n,a,d){return g.map(function(k){return k[c](h,f,m,n,a,d)})}function Qb(g,c){return g.map(function(h){return h[c]})}function Lb(g,c,h,f){return g.reduce(c,h,f)}function Kb(g,c,h,f){return g.reduceRight(c,h,f)}function za(g,c,h){return g.some(c,h)}function bb(g,c,h){return g.every(c,h)}function P(g,c){var h=
g.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++){if(g[f]&&c[f]&&g[f].equals&&c[f].equals)if(g[f].equals(c[f]))continue;else return!1;if(g[f]!=c[f])return!1}return!0}function X(g,c){var h=g.length;if(!c||h!==c.length)return!1;for(var f=0;f<h;f++)if(!Jb.objectEquals(g[f],c[f]))return!1;return!0}function ya(g,c){if(c)for(c=1;c<g.length;c++){if(g[c-1]<g[c])return!1}else for(c=1;c<g.length;c++)if(g[c-1]>g[c])return!1;return!0}function Ga(g,c){return g.sort(c)}function wa(g,c,h){return Jb.pluck(g.map(function(f,
m){return{value:f,criteria:c.call(h,f,m)}}).sort(function(f,m){f=f.criteria;m=m.criteria;return f<m?-1:f>m?1:0}),"value")}function ja(g,c){return Jb.sortBy(g,function(h){return h[c]})}function lb(g){return g.reverse()}function Ja(g){return g.slice().reverse()}function Xb(g,c,h){h=h||String;return g.map(function(f){return h(f).match(c)})}function Kc(g){return g[0]}function Hb(g){return g[g.length-1]}function Oc(g,c){return Jb.filter(Jb.uniq(g),function(h){return-1<c.indexOf(h)})}function qb(g,c){g=
g.slice();for(var h=0;h<c.length;h++){var f=c[h];-1===g.indexOf(f)&&g.push(f)}return g}function xd(g,c,h){g.splice(h,0,c)}function he(g,c){g.splice(c,1)}function xc(g,c){var h=g.indexOf(c);0<=h&&Jb.removeAt(g,h);return c}function rb(g,c){g.push.apply(g,c);return g}function Ld(g,c,h){g.splice.apply(g,[h,0].concat(c))}function sb(g,c){g.includes(c)||g.push(c)}function hb(g,c,h){g.splice(h,1,c)}function Ba(g){g.length=0;return g}function J(g,c){for(var h=0;h<g.length;h++)if(!c.includes(g[h]))return!1;
return!0}function ta(g,c,h,f){h=h||Jb.NullFunction;f=f||Jb.GLOBAL;c=c||function(m,n,a){n.call(f,m,a)};return g.reduceRight(function(m,n,a){return function(){c.call(f,m,n,a)}},h)()}function Ta(g,c,h,f,m,n){f=f||function(){};return g.clone().reverse().reduce(function(a,d,k){return function(){c.call(m||Jb.GLOBAL,d,k);n&&0!==k%n?a():a.delay(h)}},f)()}function tb(){var g=Array.from(arguments),c=g.shift(),h=c.length,f=!1;if(1===g.length){var m=g[0].progressBar;var n=g[0].iterator;var a=g[0].labelFunction;
var d=g[0].whenDone;var k=g[0].context}else m=g[0],n=g[1],a=g[2],d=g[3],k=g[4];k||(k="undefined"!==typeof window?window:global);a||(a=function(b){return b});m||(f=!0,m=(g=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?g.addProgressBar():{value:null,label:null,remove:function(){}});m.value=0;c.reduceRight(function(b,e,l){return function(){try{m.value=l/h,a&&(m.label=a.call(k,e,l)),n.call(k,e,l)}catch(p){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",
l,e,p,p.stack)}Jb.delay(b,0)}},function(){m.value=1;f&&function(){m.remove()}.delay(0);d&&d.call(k)})();return c}function Rb(g,c,h){0>c&&(c=g.length+c);0>h&&(h=g.length+h);var f=g[c];g[c]=g[h];g[h]=f;return g}function mc(g,c){c=c||1;return g.slice(c).concat(g.slice(0,c))}function Zb(g,c,h){return Jb.Group.fromArray(g,c,h)}function Rc(g,c){return Jb.groupBy(g,function(h){return h[c]})}function Sc(g,c,h){c=c||function(n){return n};var f=[],m=[];g.forEach(function(n,a){(c.call(h,n,a)?f:m).push(n)});
return[f,m]}function $d(g,c,h){function f(n,a){if(!a.length)return[n,[]];var d=a[0];a=a.slice(1);var k=n.concat([d]);if(c.call(h,k))return f(k,a);n=f(n,a);return[n[0],[d].concat(n[1])]}function m(n,a){if(!a.length)return n;a=f([],a);if(!a[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return m(n.concat([a[0]]),a[1])}return m([],g)}function r(g,c){c=c||1;return Jb.range(0,Math.ceil(g.length/c)-1).map(function(h){return g.slice(h*c,h*c+c)},
g)}function Ud(g,c){for(var h=g.map(function(a,d){return a[c[d]]}),f=c.slice(),m=g.length;m--;0<=m){var n=f[m]+1;if(g[m][n]){f[m]=n;break}else if(0===m){f=void 0;break}else f[m]=0}return[h,f]}function ke(g){for(var c=g.reduce(function(n,a){return n*a.length},1),h=g.map(function(n){return 0}),f=Array(c),m=0;m<c;m++)h=Jb.combinationsPick(g,h),f[m]=h[0],h=h[1];return f}function le(g,c){return g.slice(0,c)}function ie(g,c){return g.slice(c)}function yd(g,c,h){for(var f=0;f<g.length&&c.call(h,g[f],f);f++);
return g.slice(0,f)}function Wd(g,c,h){for(var f=0;f<g.length&&c.call(h,g[f],f);f++);return g.slice(f)}function De(g){for(var c=Jb.range(0,g.length-1),h=Array(g.length),f=0;f<g.length;f++){var m=c.splice(Math.round(Math.random()*(c.length-1)),1);h[m]=g[f]}return h}function Fe(g,c,h){c=c||function(m){return m};var f;g.reduce(function(m,n,a){a=c.call(h,n,a);if("number"!==typeof a||a<=m)return m;f=n;return a},-Infinity);return f}function md(g,c,h){c=c||function(f){return f};return Jb.max(g,function(f,
m){return-c.call(h,f,m)})}function tf(g){for(var c=0,h=0;h<g.length;h++)c+=g[h];return c}function lc(g,c){return g.reduce(function(h,f){return f===c?h+1:h},0)}function kd(g){return g.length}function ge(g,c){if("undefined"===typeof c||"number"===typeof c){var h=c||Math.ceil(Math.log(g.length)/Math.log(2)+1),f=Math.ceil(Math.round(g.length/h));return Jb.range(0,h-1).map(function(m){return g.slice(m*f,(m+1)*f)})}if(c instanceof Array)return g.reduce(function(m,n){if(n<c[1])return m[0].push(n),m;for(var a=
1;a<c.length;a++)if(n>=c[a]&&(!c[a+1]||n<=c[a+1]))return m[a].push(n),m;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},Jb.range(1,c.length).map(function(){return[]}))}function Ic(g){return[].concat(g)}function qe(g){return Jb.from(g)}function Oa(g,c,h){return g.forEach(c,h)}function Xa(g,c,h){return g.every(c,h)}function Sa(g,c,h){return g.some(c,h)}function O(g,c,h){return g.map(c,h)}function G(g,c,h){return Jb.filter(g,c,h)}function Ea(g,c,h,f){f&&(h=h.bind(f));
return g.reduce(h,c)}function N(g,c,h){function f(a,d){if(!n&&(a||d)){n=!0;try{h(a,m)}catch(k){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(k.stack||k))}}}var m=[],n=!1;return g.reduceRight(function(a,d,k){if(!n)return function(b,e){if(b)return f(b);0<k&&m.push(e);try{c(d,k,Jb.once(a))}catch(l){f(l)}}},function(a,d){m.push(d);f(a,!0)})()}function oa(g,c,h,f){function m(){for(;e<c.parallel&&b<g.length;)l[b++]()}function n(p,q){if(!(-1<d.indexOf(p)||(d.push(p),e--,k)))if(!q&&
d.length<g.length)m();else{k=!0;try{f&&f(q,a)}catch(u){console.error("Error in mapAsync - main callback invocation error:\n"+(u.stack||u))}}}"function"===typeof c&&(f=h,h=c,c=null);c=c||{};if(!g.length)return f&&f(null,[]);c.parallel||(c.parallel=Infinity);var a=[],d=[],k=!1,b=0,e=0,l=g.map(function(p,q){return function(){e++;try{h(p,q,Jb.once(function(u,w){a[q]=u||w;n(q,u)}))}catch(u){n(q,u)}}});return m()}function Ca(){return function(){}}function cb(){return function(g){return g}}function pb(){return function(){return null}}
function yb(){return function(){return!1}}function Yb(){return function(){return!0}}function cc(){return function(){throw Error("Not yet implemented");}}function Ec(g){var c=[],h;for(h in g)g.__lookupGetter__(h)||"function"!==typeof g[h]||c.push(h);return c}function od(g){var c=[],h;for(h in g)!g.__lookupGetter__(h)&&g.hasOwnProperty(h)&&"function"===typeof g[h]&&c.push(h);return c}function Dd(g){if(g.superclass)return[];var c=g.toString();g="";var h=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);
h?g=h[1]||h[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(g=c[1]);return g.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(f){return f.trim()}).filter(function(f){return!!f})}function ad(g){var c="";g.declaredClass?c+=g.declaredClass+">>":g.declaredObject&&(c+=g.declaredObject+".");return c+(g.methodName||g.displayName||g.name||"anonymous")}function Vd(g){g=String(g).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=
g.split(/\n|\r/),h,f=0;f<c.length;f++){var m=c[f].match(/^(\s+)[^\s]/);m&&(void 0===h||m[1].length<h.length)&&(h=m[1])}return h?g.replace(new RegExp("^"+h,"gm"),""):g}function Td(g){var c=Date.now();g();return Date.now()-c}function Gd(g,c){for(var h=Date.now(),f=0;f<c;f++)g();return(Date.now()-h)/c}function Cd(g,c){var h=Array.prototype.slice.call(arguments),f=h.shift();c=1E3*h.shift();return setTimeout(function(){return f.apply(f,h)},c)}function ve(g,c){var h,f,m,n,a,d,k=Lc.debounce(c,function(){a=
n=!1});return function(){h=this;f=arguments;m||(m=setTimeout(function(){m=null;a&&g.apply(h,f);k()},c));n?a=!0:d=g.apply(h,f);k();n=!0;return d}}function Ge(g,c,h){var f;return function(){var m=this,n=arguments;h&&!f&&c.apply(m,n);clearTimeout(f);f=setTimeout(function(){f=null;h||c.apply(m,n)},g)}}function ng(g,c,h){var f=Lc._throttledByName;return f[g]?f[g]:f[g]=Lc.throttle(function(){Lc.debounceNamed(g,c,function(){delete f[g]})();return h.apply(this,arguments)},c)}function Ag(g,c,h,f){var m=Lc._debouncedByName;
return m[g]?m[g]:m[g]=Lc.debounce(c,function(){delete m[g];return h.apply(this,arguments)},f)}function ag(g,c){var h=Lc._queues,f=h[g]||(h[g]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(m){f.tasks.push(m);f._workerActive||f.activateWorker()},pushAll:function(m){m.forEach(function(n){f.tasks.push(n)});f._workerActive||f.activateWorker()},pushNoActivate:function(m){f.tasks.push(m)},handleError:function(m){m&&console.error("Error in queue: "+m)},activateWorker:function(){function m(d){f.handleError(d);
f.activateWorker()}var n=f.tasks,a=f._workerActive;if(0===n.length)a&&(f._workerActive=!1,"function"===typeof f.drain&&f.drain()),delete h[g];else{a||(f._workerActive=!0);try{f.worker(n.shift(),m)}catch(d){m(d)}}}});return f}function Oe(g,c,h){function f(){b&&clearTimeout(b);d=!0;delete n[g]}function m(e){d||(f(),a.callbacks.forEach(function(l){try{l.apply(null,e)}catch(p){console.error("Error when invoking callbacks in queueUntil ["+g+"]:\n"+String(p.stack||p))}}))}var n=Lc._queueUntilCallbacks,
a=n[g];if(a)return a;var d=!1,k=!1;if(h)var b=setTimeout(function(){d||m([Error("timeout")])},h);a=n[g]={callbacks:[],cancel:function(){k=!0;f()},whenDone:function(e){a.callbacks.push(e);return a}};setTimeout(function(){if(!k)try{c(function(){m(arguments)})}catch(e){m([e])}},0);return a}function Yg(){var g=Array.prototype.slice,c=g.call(arguments),h=Lc._composeAsyncDefaultEndCallback,f=h,m,n,a=new Promise(function(d,k){m=d;n=k});return c.reverse().reduce(function(d,k,b){var e=!1;return function(){function l(){e=
!0;var u=g.call(arguments),w=u.shift();w?(f(w),n(w)):d.apply(null,u)}var p=g.call(arguments);if(f===h&&b===c.length-1){for(;p.length&&"function"!==typeof p[p.length-1];)p.pop();"function"===typeof p[p.length-1]&&(f=p.pop())}if("function"===typeof k)try{var q=k.apply(this,p.concat([l]));q&&"function"===typeof q.then&&"function"===typeof q.catch&&q.then(function(u){return l(null,u)}).catch(function(u){return l(u)})}catch(u){console.error("composeAsync: ",u.stack||u),e||(f(u),n(u))}else k&&"function"===
typeof k.then&&"function"===typeof k.catch?k.then(function(u){l(null,u)}).catch(function(u){l(u)}):(p=Error("Invalid argument to composeAsync: "+k),f(p),n(p));return a}},function(){var d=g.call(arguments);f.apply(null,[null].concat(d));m(d[0])})}function Dg(){return Array.prototype.slice.call(arguments).reverse().reduce(function(g,c){return function(){return g(c.apply(this,arguments))}},function(g){return g})}function fh(g){return function(){var c=Array.prototype.slice.call(arguments);c=[c[1],c[0]].concat(c.slice(2));
return g.apply(null,c)}}function yf(g){g=g||function(){};return function(){var c=Lc.arr.from(arguments);g.apply(null,[null].concat(c))}}function Jf(g,c,h){var f=Date.now(),m=50;h||(h=c,c=g,g=void 0);(function a(){if(c())return h();if(g){var d=Date.now()-f;d=g-d;if(0>=d)return h(Error("timeout"));d<m&&(m=d)}setTimeout(a,m)})()}function Zd(g,c,h){function f(a,d,k,b){if(n.length){var e=null;a=n.indexOf(a);-1<a&&n.splice(a,1);k?(n.length=0,e=Error("in waitForAll at"+("number"===typeof d?" "+d:"")+": \n"+
(k.stack||String(k)))):b&&(m[d]=b);n.length||setTimeout(function(){h(e,m)},0)}}h||(h=c,c=g,g=null);g=g||{};var m=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(a,d){try{a(function(){var k=Array.prototype.slice.call(arguments),b=k.shift();f(a,d,b,k)})}catch(k){f(a,d,k,null)}});g.timeout&&setTimeout(function(){if(n.length){var a=m.map(function(d,k){return null===d&&k}).filter(function(d){return"number"===typeof d}).join(", ");f(null,null,Error("waitForAll timed out, functions at "+
a+" not done"),null)}},g.timeout)}else h(null,m)}function Fh(g,c,h,f){function m(){return g.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);g=n.shift();m.isWrapper=!0;m.originalFunction=g;return m}function Fb(g,c){var h=function(){var f=Array.prototype.slice.call(arguments);f=c.isWrapper?f:[g.bind(this)].concat(f);return c.apply(this,f)};h.isWrapper=!0;h.originalFunction=g;return h}function uc(g){for(;g.originalFunction;)g=
g.originalFunction;return g}function td(g){var c=[];do c.push(g),g=g.originalFunction;while(g);return c}function ud(g,c,h){h.originalFunction=g[c];var f=g.hasOwnProperty(c);g[c]=function(){f?g[c]=h.originalFunction:delete g[c];return h.apply(this,arguments)};return g}function Pe(g){if(g){if("function"!==typeof g)throw Error("once() expecting a function");var c=!1,h;return function(){if(c)return h;c=!0;return h=g.apply(this,arguments)}}}function sf(){var g=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!g)return g=
!0,c.apply(this,arguments)}})}function Zg(g,c){var h=Array.prototype.slice.call(arguments),f=Lc._eitherNameRegistry;g=h.shift();var m=f[g]||(f[g]={wasCalled:!1,callsLeft:0});m.callsLeft++;return function(){m.callsLeft--;0>=m.callsLeft&&delete f[g];if(!m.wasCalled)return m.wasCalled=!0,c.apply(this,arguments)}}function rg(g){return eval(g)}function Wi(g){return Lc.evalJS("("+g.toString()+");")}function yl(g,c){return Lc.Closure.fromFunction(g,c).recreateFunc()}function Vk(g,c,h,f){var m=h||g.name;
if(!m)throw Error("Function that wants to be a script needs a name: "+this);h=Object.getPrototypeOf(c);var n={this:c};f&&(n=Lc.objectMerge([n,f]));h&&h[m]&&(n.$super=Lc.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[m].apply(c,arguments)}catch(a){return"undefined"!==typeof $world?$world.logError(a,"Error in $super call"):console.error("Error in $super call: "+a+"\n"+a.stack),null}},{obj:c,name:m}).recreateFunc());return Lc.addToObject(Lc.asScript(g,n),c,m)}function kl(g,c,h){g.displayName=
h;var f=c.attributeConnections?c.attributeConnections.filter(function(m){return"update"===m.getSourceAttrName()}):[];f&&f.forEach(function(m){m.disconnect()});c[h]=g;typeof c&&(g.declaredObject=Lc.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,h,{declaredObject:Lc.safeToString(c)});f&&f.forEach(function(m){m.connect()});return g}function rj(g,c){return Lc.Closure.fromFunction(g,c||{}).recreateFunc()}function Wk(g,
c,h){g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=h)}function sj(g){return g.hasLivelyClosure?g.livelyClosure.varMapping:g.isWrapper?g.originalFunction.varMapping:g.varMapping?g.varMapping:{}}function vk(g,c,h){g[c]=h;g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=h)}function bk(g){for(var c=[],h=g.prototype;h;)c=Object.keys(h).reduce(function(f,m){"function"===typeof h[m]&&-1===f.indexOf(m)&&f.push(m);return f},c),h=Object.getPrototypeOf(h);return c}function Nh(g){return Object.keys(g.prototype).filter(function(c){return"function"===
typeof g.prototype[c]})}function ck(g,c){var h=function(f){var m=Array.prototype.slice.call(arguments);m.shift();try{return f.apply(g,m)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",g,c,m,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};h.methodName="$logErrorsAdvice";h=Lc.wrap(g,h);h.originalFunction=g;h.methodName="$logErrorsWrapper";
return h}function cf(g,c){var h=function(f){var m=Array.prototype.slice.call(arguments);m.shift();try{var n=f.apply(g,m)}catch(a){throw console.warn("failed to load "+c+": "+a),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),a;}console.log("completed "+c);return n};h.methodName="$logCompletionAdvice::"+c;h=Lc.wrap(g,h);h.methodName="$logCompletionWrapper::"+c;h.originalFunction=g;return h}function ai(g,c){var h=function(m){var n=Array.prototype.slice.call(arguments);
n.shift();f=m.apply(g,n);c?console.warn("%s(%s) -> %s",Lc.qualifiedMethodName(g),n,f):console.log("%s(%s) -> %s",Lc.qualifiedMethodName(g),n,f);return f};h.methodName="$logCallsAdvice::"+Lc.qualifiedMethodName(g);var f=Lc.wrap(g,h);f.originalFunction=g;f.methodName="$logCallsWrapper::"+Lc.qualifiedMethodName(g);return f}function Xi(g,c){return Lc.wrap(g,function(h){var f=Array.prototype.slice.call(arguments);f.shift();c.push(f);f=h.apply(g,f);c.pop();return f})}function wk(){try{throw Error();}catch(g){return String(g.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,
"$1")}).join("\n")}}function Xl(g){if(g&&Array.isArray(g))return"["+g.map(Xl)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function Jj(g){return Array.isArray(g)}function Kj(g){return g&&1==g.nodeType}function On(g){return g instanceof Function}function Af(g){return"boolean"===typeof g}function Xk(g){return"string"===typeof g}function rm(g){return"number"===typeof g}function ej(g){return"undefined"===typeof g}function ll(g){return g instanceof
RegExp}function zl(g){return"object"===typeof g}function Dl(g){if(!g)return!0;switch(typeof g){case "string":case "number":case "boolean":return!0}return!1}function Cl(g){for(var c in g)if(g.hasOwnProperty(c))return!1;return!0}function Al(g,c){if(g===c)return!0;if(!g||!c)return g==c;if(Array.isArray(g))return zd.arrayDeepEquals(g,c);switch(g.constructor){case String:case Date:case Boolean:case Number:return g==c}if("function"===typeof g.isEqualNode)return g.isEqualNode(c);if("function"===typeof g.equals)return g.equals(c);
var h=[],f;for(f in g)if(h.push(f),"function"!==typeof g[f]&&!Al(g[f],c[f]))return!1;for(f in c)if(-1===h.indexOf(f)&&"function"!==typeof c[f]&&!Al(c[f],g[f]))return!1;return!0}function Wm(g){return g?Object.keys(g).map(function(c){return g[c]}):[]}function Bl(g,c){for(var h={},f=0;f<c.length;f++)h[c[f]]=g[c[f]];return h}function sm(g,c){g=g||{};g=zd.getOwnPropertyDescriptors(g);for(var h=0;h<c.length;h++)c[h]in g&&delete g[c[h]];return Object.defineProperties({},g)}function Ub(g,c,h,f){c=zd.functionFromString(c);
return zd.asScriptOf(c,g,h,f)}function Eh(g,c){for(var h=null,f=1;f<arguments.length;f++)if("string"===typeof arguments[f])h=arguments[f],g.categories||(g.categories={}),g.categories[h]||(g.categories[h]=[]),h=g.categories[h];else{c=arguments[f];for(var m in c){var n=c.__lookupGetter__(m),a=c.__lookupSetter__(m);n&&g.__defineGetter__(m,n);a&&g.__defineSetter__(m,a);n||a||(n=c[m],g[m]=n,h&&h.push(m),"function"===typeof n&&(n.displayName||(n.displayName=m),"undefined"!==typeof lively&&lively.Module&&
lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return g}function ha(g){if(zd.isPrimitive(g))return g;if(Array.isArray(g))return Array.prototype.slice.call(g);var c={},h;for(h in g)g.hasOwnProperty(h)&&(c[h]=g[h]);c.__proto__=g.__proto__;return c}function t(g,c,h){for(var f={},m=0;m<c.length;m++)c[m]in g&&(f[c[m]]=h?h(c[m],g[c[m]]):g[c[m]]);return f}function x(g,c,h){c=c||{};h=h||0;if(c.customPrinter){var f=c._ignoreSignal||(c._ignoreSignal={}),m=c.customPrinter(g,f,function(p){return x(p,
c,h+1)});if(m!==f)return m}if(!g)return zd.print(g);if("function"===typeof g)return c.printFunctionSource?String(g):"function"+(g.name?" "+g.name:"")+"("+zd.argumentNames(g).join(",")+") {/*...*/}";switch(g.constructor){case String:case Boolean:case RegExp:case Number:return zd.print(g)}if("function"===typeof g.serializeExpr)return g.serializeExpr();var n=g&&Array.isArray(g);f=n?"[":"{";m=n?"]":"}";if(c.maxDepth&&h>=c.maxDepth)return f+"/*...*/"+m;var a=[];if(n)a=g.map(function(p){return x(p,c,h+
1)});else for(var d=Object.keys(g).sort(function(p,q){var u="function"===typeof g[p];return u===("function"===typeof g[q])?p<q?-1:p>q?1:0:u?1:-1}),k=0;k<d.length;k++){if(k>(c.maxNumberOfKeys||Infinity)){d=d.length-k;a.push("..."+d+" hidden "+(1<d?"entries":"entry")+"...");break}var b=d[k];n&&x(g[b],c,h+1);var e=x(g[b],c,h+1);a.push((c.escapeKeys?JSON.stringify(b):b)+": "+e)}if(0===a.length)return f+m;d=a.join(", ");k=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||d.length>=c.minLengthForNewLine);
var l=zd.indent("",c.indent||"  ",h);b=zd.indent("",c.indent||"  ",h+1);e=k&&!n?"\n"+b:"";n=k&&!n?"\n"+l:"";k&&(d=a.join(","+(k?"\n"+b:"")));return f+e+d+n+m}function z(g){return 1<arguments.length?z(Array.prototype.slice.call(arguments)):Array.isArray(g[0])?Array.prototype.concat.apply([],g):g.reduce(function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f]);return c},{})}function v(g,c){if(!g)return c;if(!c)return g;if(Array.isArray(g)){if(!Array.isArray(c))return c;var h=g.map(function(f,m){return v(f,
c[m])});c.length>g.length&&(h=h.concat(c.slice(g.length)));return h}return"object"!==typeof g||"object"!==typeof c?c:Object.keys(g).concat(Object.keys(c)).reduce(function(f,m){f[m]=g[m]?c[m]?"object"!==typeof g[m]||"object"!==typeof c[m]?c[m]:v(g[m],c[m]):g[m]:c[m];return f},{})}function B(g,c){c=[];for(var h in g){var f=g[h],m=f.hasOwnProperty("before")?f.before:f.before=[];f=f.hasOwnProperty("after")?f.after:f.after=[];for(var n=m.length;n--;){var a=m[n],d=g[a];d?(d.hasOwnProperty("after")||(d.after=
[]),d.after.push(h)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized before "+a+" but that property cannot be found.")),m.splice(n,1))}for(m=f.length;m--;)n=f[m],g[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized after "+n+" but that property cannot be found.")),f.splice(m,1));c.push(h)}h=[];f=[];for(m=c.length+1;c.length;){if(m===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+
c.map(function(k){var b=g[k].before,e=g[k].after;if(!(b&&b.length||e&&e.length))return"";k+="\n";b&&b.length&&(k+="  - before "+b.join(",")+"\n");e&&e.length&&(k+="  - after "+e.join(",")+"\n");return k}).join(""));m=c.length;n=[];for(a=c.length;a--;)d=c[a],zd.isSubset(g[d].after,f)&&(c.splice(a,1),f.push(d),n.push(d));h.push(n)}return zd.flatten(h,1)}function E(g){return Object.create(g)}function H(g,c){for(var h=[];g;)g.hasOwnProperty(c)&&h.unshift(g[c]),g=Object.getPrototypeOf(g);return h}function T(g,
c){return zd.merge(zd.valuesInPropertyHierarchy(g,c))}function ia(g){if(!g||"object"!==typeof g||g instanceof RegExp)return g;var c=Array.isArray(g)?Array(g.length):{},h;for(h in g)g.hasOwnProperty(h)&&(c[h]=ia(g[h]));return c}function K(g){return null===g?"null":"undefined"===typeof g?"undefined":g.constructor.name}function R(g){function c(f,m,n,a){if(f.constructor.name===m){h+=n;if(f.length||Object.keys(f).length)h+="...";h+=a}}if(!zd.isMutableType(g))return zd.safeToString(g);if("Object"!==g.constructor.name&&
!Array.isArray(g)&&g.constructor.name)return g.constructor.name?g.constructor.name:Object.prototype.toString.call(g).split(" ")[1].split("]")[0];var h="";c(g,"Object","{","}");c(g,"Array","[","]");return h}function fa(g){return-1===["null","undefined","Boolean","Number","String"].indexOf(zd.typeStringOf(g))}function da(g){try{return(g?g.toString():String(g)).replace("\n","")}catch(c){return"<error printing object>"}}function Ha(g){switch(typeof g){case "string":return new String(g);case "boolean":return new Boolean(g);
case "number":return new Number(g);default:return g}}function Ra(g,c){c=void 0===c?"_":c;var h=1;do var f=c+"-"+h++;while(f in g);return f}function Za(){return pc.formatFromArray(Array.prototype.slice.call(arguments))}function Ya(g){function c(p,q){return""+p}function h(p,q){return p.toString()}function f(p,q){return pc.inspectObject(p)}var m=g.shift();m||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:h,i:h,f:function(p,q,u){return-1<u?p.toFixed(u):p.toString()},
o:f},a=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;m=function(p){for(var q=[],u=a.exec(p);u;u=a.exec(p)){var w=u[8]||u[5];w=w in n?n[w]:f;var y=u[3]?parseInt(u[3]):"."==u[4]?-1:0;q.push(p.substr(0,"%"==u[0][0]?u.index:u.index+1));q.push({appender:w,precision:y});p=p.substr(u.index+u[0].length)}p&&q.push(p.toString());return q}(m);for(var d="",k=0,b=0;b<m.length;++b){var e=m[b];if(e&&"object"===typeof e){var l=g[k++];d+=(e.appender||c)(l,d,e.precision)}else d+=""+e}return d}function Ib(g,
c,h){if(!h||0>=h)return g;for(var f="";0<h;)h--,f+=c;return pc.lines(g).map(function(m){return f+m}).join("\n")}function jc(g,c){c||(c="  ");return pc.min(g.match(new RegExp("^("+c+")*","gm")).map(function(h){return Math.floor(h.length/c.length)}))}function yc(g,c,h){c||(c="  ");h||(h=0);var f=pc.minIndent(g,c);if(f===h)return g;if(f<h)return pc.indent(g,c,h-f);var m=c.repeat(f-h);return pc.lines(g).map(function(n){return n.slice(m.length)}).join("\n")}function vc(g){return'"'+g.replace(/"/g,'\\"')+
'"'}function Gc(g){return pc.articles.articlize(g)}function cd(g){return pc.articles.find(g)}function sd(g){if(g&&Array.isArray(g))return"["+g.map(sd)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function Mb(g,c){c=c||0;return g.reduce(function(h,f){return h+(Array.isArray(f)?Mb(f,c+1):pc.indent(f+"\n","  ",c))},"")}function Sd(g,c,h){return h?" ".repeat(c)+g:g+" ".repeat(c)}function Se(g,c){function h(d){return n?
!1:a?!0:c&&Array.isArray(c.align)&&"right"===c.align[d]}var f=[],m=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,a=c&&"right"===c.align;g.forEach(function(d){d.forEach(function(k,b){void 0===f[b]&&(f[b]=0);f[b]=Math.max(f[b],String(k).length)})});return g.map(function(d){return d.map(function(k,b){k=String(k);return pc.pad(k,f[b]-k.length,h(b))}).join(m)}).join("\n")}function Hc(g,c,h,f){function m(a,d,k){n[d]=f.repeat(a)+c(k,a);k=h(k,a);var b=d+1;if(!k||!k.length)return b;var e=b,l=k.length-
1;k.forEach(function(p,q){b=m(a+1,b,p);p=l===q;var u=n[e].split(""),w=a*f.length+f.length;for(q=a*f.length+1;q<w;q++)u[q]="-";p&&(u[a*f.length]="\\");n[e]=u.join("");p||n.slice(e,b).forEach(function(y,A){y=y.split("");y[a*f.length]="|";n[e+A]=y.join("")});e=b});return b}var n=[];f=f||"  ";m(0,0,g);return n.join("\n")}function df(g){return g.split("")}function kg(g){return g.split(/\n\r?/)}function $e(g,c){var h=c?c.sep:"\n\n";return c&&c.keepEmptyLines?g.split("\n").concat("").reduce(function(f,m){var n=
f[0];f=f[1];/^\s*$/.test(f)===/^\s*$/.test(m)?f+="\n"+m:(f.length&&n.push(f),f=m);return[n,f]},[[],""])[0]:g.split(new RegExp(h+"+"))}function Ee(g){return pc.lines(g).compact()}function Nd(g,c){return g.split(c||/\s+/).filter(function(h){return!/^\s*$/.test(h)})}function Kf(g,c){c=c||{};var h=c.cellSplitter||/\s+/,f=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;g=pc.lines(g);for(var m=[],n=0;n<g.length;n++){var a=pc.tokens(g[n],h);c&&(a=a.map(function(d){if(d.match(f))return d;var k=
Number(d);if(!isNaN(k))return k;k=new Date(d);return isNaN(+k)?d.trim():k}));0<a.length&&m.push(a)}return m}function Sf(g){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=g;return c.textContent}function mf(g,c){return(g=g.trim().match(/([^?#]*)(#.*)?$/))?g[1].split(c||"&").inject({},function(h,f){if((f=f.split("="))[0]){var m=decodeURIComponent(f.shift());f=1<f.length?f.join("="):f[0];void 0!=f&&(f=decodeURIComponent(f));
m in h?(Array.isArray(h[m])||(h[m]=[h[m]]),h[m].push(f)):h[m]=f}return h}):{}}function xk(g){return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode("0x"+h)}))}function Yk(g){return decodeURIComponent(atob(g).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function qi(g){var c=g.match(pc.urlStartRe),h=(c=c?c[0]:null)?g.slice(c.length):g;do g=h,h=g.replace(pc.pathDoubleDotRe,"");while(h!=g);h=h.replace(pc.pathDoubleSlashRe,
"$1/");h=h.replace(pc.pathDotRe,"/");c&&(h=c+h);return h}function Jd(){return pc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(g,c){return"string"===typeof c?g.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):g}))}function Tf(){return pc.newUUIDTemplate.replace(pc.newUUIDRe,pc.newUUIDReplacer).toUpperCase()}function Gi(g,c){return"data:"+(c||"text/plain")+";base64,"+pc.base64EncodeUnicode(g)}function zi(g){var c=0,h=g.length;if(0==h)return c;for(var f=0;f<h;f++){var m=g.charCodeAt(f);
c=(c<<5)-c+m;c&=c}return c}function Xm(g){function c(k,b,e,l,p,q){b=a(a(b,k),a(l,q));return a(b<<p|b>>>32-p,e)}function h(k,b,e,l,p,q,u){return c(b&e|~b&l,k,b,p,q,u)}function f(k,b,e,l,p,q,u){return c(b&l|e&~l,k,b,p,q,u)}function m(k,b,e,l,p,q,u){return c(e^(b|~l),k,b,p,q,u)}function n(k,b){var e=k[0],l=k[1],p=k[2],q=k[3];e=h(e,l,p,q,b[0],7,-680876936);q=h(q,e,l,p,b[1],12,-389564586);p=h(p,q,e,l,b[2],17,606105819);l=h(l,p,q,e,b[3],22,-1044525330);e=h(e,l,p,q,b[4],7,-176418897);q=h(q,e,l,p,b[5],12,
1200080426);p=h(p,q,e,l,b[6],17,-1473231341);l=h(l,p,q,e,b[7],22,-45705983);e=h(e,l,p,q,b[8],7,1770035416);q=h(q,e,l,p,b[9],12,-1958414417);p=h(p,q,e,l,b[10],17,-42063);l=h(l,p,q,e,b[11],22,-1990404162);e=h(e,l,p,q,b[12],7,1804603682);q=h(q,e,l,p,b[13],12,-40341101);p=h(p,q,e,l,b[14],17,-1502002290);l=h(l,p,q,e,b[15],22,1236535329);e=f(e,l,p,q,b[1],5,-165796510);q=f(q,e,l,p,b[6],9,-1069501632);p=f(p,q,e,l,b[11],14,643717713);l=f(l,p,q,e,b[0],20,-373897302);e=f(e,l,p,q,b[5],5,-701558691);q=f(q,e,l,
p,b[10],9,38016083);p=f(p,q,e,l,b[15],14,-660478335);l=f(l,p,q,e,b[4],20,-405537848);e=f(e,l,p,q,b[9],5,568446438);q=f(q,e,l,p,b[14],9,-1019803690);p=f(p,q,e,l,b[3],14,-187363961);l=f(l,p,q,e,b[8],20,1163531501);e=f(e,l,p,q,b[13],5,-1444681467);q=f(q,e,l,p,b[2],9,-51403784);p=f(p,q,e,l,b[7],14,1735328473);l=f(l,p,q,e,b[12],20,-1926607734);e=c(l^p^q,e,l,b[5],4,-378558);q=c(e^l^p,q,e,b[8],11,-2022574463);p=c(q^e^l,p,q,b[11],16,1839030562);l=c(p^q^e,l,p,b[14],23,-35309556);e=c(l^p^q,e,l,b[1],4,-1530992060);
q=c(e^l^p,q,e,b[4],11,1272893353);p=c(q^e^l,p,q,b[7],16,-155497632);l=c(p^q^e,l,p,b[10],23,-1094730640);e=c(l^p^q,e,l,b[13],4,681279174);q=c(e^l^p,q,e,b[0],11,-358537222);p=c(q^e^l,p,q,b[3],16,-722521979);l=c(p^q^e,l,p,b[6],23,76029189);e=c(l^p^q,e,l,b[9],4,-640364487);q=c(e^l^p,q,e,b[12],11,-421815835);p=c(q^e^l,p,q,b[15],16,530742520);l=c(p^q^e,l,p,b[2],23,-995338651);e=m(e,l,p,q,b[0],6,-198630844);q=m(q,e,l,p,b[7],10,1126891415);p=m(p,q,e,l,b[14],15,-1416354905);l=m(l,p,q,e,b[5],21,-57434055);
e=m(e,l,p,q,b[12],6,1700485571);q=m(q,e,l,p,b[3],10,-1894986606);p=m(p,q,e,l,b[10],15,-1051523);l=m(l,p,q,e,b[1],21,-2054922799);e=m(e,l,p,q,b[8],6,1873313359);q=m(q,e,l,p,b[15],10,-30611744);p=m(p,q,e,l,b[6],15,-1560198380);l=m(l,p,q,e,b[13],21,1309151649);e=m(e,l,p,q,b[4],6,-145523070);q=m(q,e,l,p,b[11],10,-1120210379);p=m(p,q,e,l,b[2],15,718787259);l=m(l,p,q,e,b[9],21,-343485551);k[0]=a(e,k[0]);k[1]=a(l,k[1]);k[2]=a(p,k[2]);k[3]=a(q,k[3])}var a=function(k,b){var e=(k&65535)+(b&65535);return(k>>
16)+(b>>16)+(e>>16)<<16|e&65535},d="0123456789abcdef".split("");return function(k){for(var b=k.length,e=0;e<b;e++){for(var l=e,p=k[e],q="",u=0;4>u;u++)q+=d[p>>8*u+4&15]+d[p>>8*u&15];k[l]=q}return k.join("")}(function(k){var b=k.length,e=[1732584193,-271733879,-1732584194,271733878],l;for(l=64;l<=b;l+=64){var p,q=k.substring(l-64,l),u=[];for(p=0;64>p;p+=4)u[p>>2]=q.charCodeAt(p)+(q.charCodeAt(p+1)<<8)+(q.charCodeAt(p+2)<<16)+(q.charCodeAt(p+3)<<24);n(e,u)}k=k.substring(l-64);p=[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0];q=k.length;for(l=0;l<q;l++)p[l>>2]|=k.charCodeAt(l)<<(l%4<<3);p[l>>2]|=128<<(l%4<<3);if(55<l)for(n(e,p),l=16;l--;)p[l]=0;p[14]=8*b;n(e,p);return e}(g))}function Yl(g,c){var h=[];g.replace(c,function(f,m){h.push({match:f,start:m,end:m+f.length})});return h}function Qe(g,c,h){function f(a,d){if(d.constructor!==RegExp){if(0===a.indexOf(d))return{match:d,rest:a.slice(d.length)};for(var k=0;k<d.length;k++)if(d[k]!=a[k])return{match:null,pos:k};return{match:null}}return(d=pc.reMatches(a,d))&&
d.length&&0===d[0].start?{match:d[0].match,rest:a.slice(d[0].end)}:{match:null}}function m(a){var d=pc.reMatches(a,/__\//g),k=pc.reMatches(a,/\/__/g);if(d.length!==k.length)throw Error("pattern invalid: "+a+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(d)+"\nvs ends:\n"+JSON.stringify(k));var b=0;return d.reduce(function(e,l,p){var q=k[p];p=e.pop();l=l.start-b;q=q.end-b;var u;var w=u=3;p=[p.slice(0,l),p.slice(l+u,q-w),p.slice(q)];p[0].length&&(e.push(p[0]),b+=p[0].length);
try{p[1].length&&(e.push(new RegExp(p[1])),b+=p[1].length+3+3)}catch(y){throw Error("Cannot create pattern re from: "+pc.inspectObject(p));}p[2].length&&e.push(p[2]);return e},[a])}function n(a,d){d=m(d);a:{for(var k=a,b=0,e=0;e<d.length;e++){var l=d[e];k=f(k,l);if(!k.match){d={matched:!1,pos:b+(k.pos||0),pattern:l};break a}b+=k.match.length;k=k.rest}d=k.length?{matched:!1,pos:b}:{matched:!0}}if(d.matched)return d;d.error=a.slice(0,d.pos)+"<--UNMATCHED--\x3e"+a.slice(d.pos);return d}h=h||{};h.normalizeWhiteSpace&&
(g=g.replace(/\s+/g," "));h.ignoreIndent&&(g=g.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return g==c?{matched:!0}:n(g,c)}function Hi(g,c,h){g=g.slice(c);return"string"===typeof h?(g=g.indexOf(h),-1===g?null:g+c):h.constructor===RegExp?(c=pc.reMatches(g,h),c[0]?c[0].start:null):null}function ef(g,c,h){g=g.slice(0,c);return"string"===typeof h?(g=g.lastIndexOf(h),-1===g?null:g):h.constructor===RegExp?(g=pc.reMatches(g,h),pc.last(g)?pc.last(g).start:null):null}function sg(g){var c=pc.lineRanges(g);
return function(h){for(var f=0;f<c.length;f++){var m=c[f];if(h>=m[0]&&h<m[1])return f}return-1}}function Oh(g){return function(c){return pc.lineRanges(g)[c]}}function Zk(g){for(var c=0,h=pc.lines(g),f=[],m=0;m<h.length;m++)g=c+h[m].length+1,f.push([c,g]),c=g;return f}function Hs(g,c){var h=g.length;if(0===h)return-1;for(var f=0;;){var m=f+Math.floor((h-f)/2),n=$jscomp.makeIterator(g[m]),a=n.next().value;n=n.next().value;if(c<a){if(0===m)break;h=m}else if(c>n)f=m;else return m}return-1}function Is(g,
c,h){h=void 0===h?0:h;g=this.substring(h||0).search(c);return 0<=g?g+(h||0):g}function Rp(g,c,h){h=void 0===h?g.length:h;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));g=this.substring(0,h+1);h=-1;for(var f=0,m;null!=(m=c.exec(g));)h=m.index,c.lastIndex=++f;return h}function Pn(g,c){return"undefined"===typeof pc.JsDiff?"diff not supported":pc.JsDiff.convertChangesToXML(pc.JsDiff.diffWordsWithSpace(g,c))}function Qn(g){return""==g}function tm(g){g=g[0];return"A"===
g||"E"===g||"I"===g||"O"===g||"U"===g||"a"===g||"e"===g||"i"===g||"o"===g||"u"===g||!1}function Zl(g,c){var h=parseFloat(g);return isNaN(h)?g:h.toFixed(c)}function Sp(g){return g.length?g.charAt(0).toUpperCase()+g.slice(1):g}function Js(g){return g.split(" ").map(pc.capitalize).join("")}function Ks(g){var c=g.split("-"),h=c.length;if(1==h)return c[0];g="-"==g.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var f=1;f<h;f++)g+=c[f].charAt(0).toUpperCase()+c[f].substring(1);return g}
function Ls(g,c,h){c=c||30;h=void 0===h?"...":h;return g.length>c?g.slice(0,c-h.length)+h:String(g)}function iv(g,c,h){c=c||30;return g.length>c?(void 0===h?"...":h)+g.slice(-c):String(g)}function Ms(g){return g.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Rn(g){return g.slice(0,g.length-1)+String.fromCharCode(g.charCodeAt(g.length-1)+1)}function jv(g){return g.charCodeAt(0)-48}function kv(g,c){for(var h=[],f=0;f<g.length;f++){h[f]=[];for(var m=0;m<c.length;m++)h[f][m]=
0}for(f=0;f<g.length;f++)h[f][0]=0;for(f=1;f<g.length;f++)for(m=1;m<c.length;m++)h[f][m]=g[f-1]==c[m-1]?h[f-1][m-1]+1:0;for(var n=m=f=-1,a=0;a<g.length;a++)for(var d=0;d<c.length;d++){var k=h[a][d];f<k&&(f=k,m=a-k,n=d-k)}return{length:f,indexA:m,indexB:n,string:0<f?g.slice(m,m+f):""}}function lv(g,c){return"insert"===c.action?g.slice(0,c.start)+c.lines.join("\n")+g.slice(c.start):"remove"===c.action?g.slice(0,c.start)+g.slice(c.end):g}function mv(g,c){return c.reduce(function(h,f){return pc.applyChange(g,
f)},g)}function nv(g,c){if(0===g.length)return c.length;if(0===c.length)return g.length;var h;if(g.length>c.length){var f=g;g=c;c=f}var m=Array(g.length+1);for(f=0;f<=g.length;f++)m[f]=f;for(f=1;f<=c.length;f++){var n=f;for(h=1;h<=g.length;h++){var a=c[f-1]===g[h-1]?m[h-1]:Math.min(m[h-1]+1,Math.min(n+1,m[h]+1));m[h-1]=n;n=a}m[g.length]=n}return m[g.length]}function ov(g,c){g=g||0;return Math.round(Math.random()*((c||100)-g)+g)}function pv(g){return Math.floor(Math.random()*g)}function qv(g){if(1E3>
g)return String(Math.round(100*g)/100)+"B";g/=1024;return 1E3>g?String(Math.round(100*g)/100)+"KB":String(Math.round(g/1024*100)/100)+"MB"}function rv(g){return g.reduce(function(c,h){return c+h},0)/g.length}function sv(g,c,h){return(g-c)/h+c}function tv(g){var c=g.sort(function(h,f){return f-h});g=g.length;return 0===g%2?.5*(c[g/2-1]+c[g/2]):c[(g-1)/2]}function uv(g,c,h,f){f=f||0;if(c<h)var m=h;else m=c,c=h;return 0<=m-g+f&&0>=c-g-f}function vv(g,c,h){return Math.max(c,Math.min(h,g))}function wv(g){return g.sort(function(c,
h){return c-h})}function xv(g,c){c=c||"px";if((g=g.match(/([0-9\.]+)\s*(.*)/))&&g[1]){var h=parseFloat(g[1]);return uf.convertLength(h,g[2],c)}}function yv(g){if(!isFinite(g))return 0;for(var c=1,h=0;Math.round(g*c)/c!==g;)c*=10,h++;return h}function zv(g,c){c=1/c;return Math.round(g*c)/c}function Av(g,c,h,f){var m=uf.roundTo(g,h);return Math.abs(g-m)<c/2?m:f?g:m+(g-(g<m?m-c/2:m+c/2))*h/(h-c)}function Ns(g){return 180*g/Math.PI%360}function Os(g){return g/180*Math.PI}function Ps(g,c,h){c=void 0===
c?5:c;h=void 0===h?3E4:h;g=Math.min(h,c*Math.pow(2,g));return Math.min(h,c+Math.random()*(3*(g/2+Math.round(g/2*Math.random()))-c))}function Bv(g,c,h){return c+g*(h-c)}function Cv(g,c){var h=[],f;for(f in g)(g.__lookupGetter__(f)||"function"!==typeof g[f])&&(c?c(f,g):1)&&h.push(f);return h}function No(g,c){return Object.getOwnPropertyNames(g).reduce(function(h,f){(c?c(g,f):1)&&h.push(f);return h},[])}function Tp(g){var c=[],h;for(h in g)g.hasOwnProperty(h)&&(g.__lookupGetter__(h)||"function"!==g[h])&&
c.push(h);return c}function Qs(g,c,h){var f=[],m;for(m in g)if(g.hasOwnProperty(m)){var n=g[m];"function"!==n&&f.push(c.call(h||this,m,n))}return f}function Zq(g,c){for(var h in g)if(g[h]===c)return h}function Rs(g){var c=[],h;for(h in g)c.push(g[h]);return c}function Up(g){var c=[],h;for(h in g)g.hasOwnProperty(h)&&c.push(g[h]);return c}function Dv(g,c){for(var h in g)if(c(g,h))return!0;return!1}function $q(g,c){var h=[],f;for(f in g)(c?c(g,f):1)&&h.push(f);return h}function ar(g){return Object.keys(g).sort().join("").hashCode()}
function Vp(g,c,h){return $l.dateFormat(g,c,h)}function Ss(g,c){return c&&c instanceof Date&&c.getTime()===g.getTime()}function Ts(g,c,h){h=void 0===h?{}:h;if(!(c instanceof Date)||c<g)return"";if(c===g)return"now";var f="min",m="sec",n="hour",a="day",d=Math.round((c-g)/1E3);g=d%60;c=Math.floor(d/60)%60;var k=Math.floor(d/60/60)%24;d=Math.floor(d/60/60/24);var b=[];0<d&&(b.push(d),1<d&&(a+="s"),b.push(a));if(h.forceHours||0<k&&2>d)b.push(k),1<k&&(n+="s"),b.push(n);if(h.forceMinutes||0<c&&3>k&&0===
d)b.push(c),1<c&&(f+="s"),b.push(f);if(h.forceSeconds||0<g&&3>c&&0===k&&0===d)b.push(g),1<g&&(m+="s"),b.push(m);return b.join(" ")}function Uf(g){return"function"===typeof g?Uf.convertCallbackFun(g):Promise.resolve(g)}function my(g,c){return new Promise(function(h){return setTimeout(h,g,c)})}function ny(g,c){return new Promise(function(h,f){return setTimeout(f,g,c)})}function oy(g,c){return new Promise(function(h,f){var m=!1;setTimeout(function(){return!m&&(m=!0)&&f(Error("Promise timed out"))},g);
c.then(function(n){return!m&&(m=!0)&&h(n)},function(n){return!m&&(m=!0)&&f(n)})})}function py(g){var c=Date.now();return Promise.resolve(g).then(function(){return Date.now()-c})}function Us(g,c,h){"function"===typeof g&&(c=g,g=void 0);return new Promise(function(f,m){var n=!1,a=!1,d,k,b=setInterval(function(){if(n)clearInterval(b),delete wf.waitForClosures[b];else{try{k=c()}catch(e){d=e}if(k||d||a)return n=!0,clearInterval(b),delete wf.waitForClosures[b],d?m(d):a?"undefined"===typeof h?m(Error("timeout")):
f(h):f(k)}},10);wf.waitForClosures[b]=b;"number"===typeof g&&setTimeout(function(){return a=!0},g)})}function qy(){var g,c,h=new Promise(function(f,m){g=f;c=m});return{resolve:g,reject:c,promise:h}}function ry(g){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,m){c.push(function(n,a){return n?m(n):f(a)});g.apply(h,c)})}}function Vs(g){return function(){var c=Array.from(arguments),h=this;return new Promise(function(f,m){c.push(function(){var n=Array.from(arguments),
a=n.shift();return a?m(a):f(n)});g.apply(h,c)})}}function YB(g,c,h,f,m){var n=g.shift();if(n)try{Promise.resolve(n(c,h)).then(function(a){return YB(g,a,h,f,m)}).catch(function(a){m(a)})}catch(a){m(a)}else f(c)}function Ev(g){return new Promise(function(c,h){return wf._chainResolveNext(g.slice(),void 0,{},c,h)})}function Ws(g,c){return Promise.resolve(g).then(function(h){try{c()}catch(f){console.error("Error in promise finally: "+f.stack||f)}return h}).catch(function(h){try{c()}catch(f){console.error("Error in promise finally: "+
f.stack||f)}throw h;})}function sy(g,c){function h(){c--;try{var e=a++;g[e]().then(function(l){c++;m[e]=l;0===--d?k():f()}).catch(function(l){return b(l)})}catch(l){b(l)}}function f(){for(;!n&&0<d&&a<g.length&&0<c;)h()}c=void 0===c?Infinity:c;if(!g.length)return Promise.resolve([]);var m=[],n=null,a=0,d=g.length,k,b;return new Promise(function(e,l){k=function(){return e(m)};b=function(p){return l(n=p)};f()})}function Sg(g,c){if(g instanceof Sg)return g;if(!(this instanceof Sg))return new Sg(g,c);
this.setSplitter(c||".");this.fromPath(g)}function br(g){var c={},h;for(h in g)c[h]=g[h].slice();return c}function cr(g,c){var h={},f;for(f in g)if(!c.includes(f)){h[f]=[];for(var m=g[f],n=0;n<m.length;n++){var a=m[n];c.includes(a)||h[f].push(a)}}return h}function dr(g,c,h,f){h=void 0===h?[]:h;f=void 0===f?Infinity:f;if(!Array.isArray(g[c]))return[];for(var m=[],n={},a={},d=0;d<h.length;d++)a[h[d]]=!0;c=g[c].slice();d={};for(var k=c.length;k--;){var b=c[k];b in a?c.splice(k,1):d[b]=1}if(h)for(;0!==
c.length;)for(h=0;h<c.length;h++)if(b=c.shift(),!(b in n||b in a)&&(k=d[b]||0,!(k>f)&&(m.push(b),n[b]=!0,b=g[b])))for(var e=0;e<b.length;e++){var l=b[e];l in n||l in d||(d[l]=k+1,c.push(l))}return m}function Fv(g,c,h,f){f=void 0===f?Infinity:f;h&&(g=Wh.without(g,h));c=[c];h=0;for(var m={};c.length&&h++<f;){var n=c.shift();if(!m[n]){var a=g[n]||[];m[n]=a;c.push.apply(c,$jscomp.arrayFromIterable(a))}}return m}function Gv(g){var c={},h;for(h in g)for(var f=g[h],m=0;m<f.length;m++){var n=f[m];c[n]?c[n].push(h):
c[n]=[h]}return c}function Hv(g,c){c=[];var h={},f={},m={};for(e in g){h.hasOwnProperty(e)||(h[e]=!0,c.push(e));var n=g[e],a={};if(n){f[e]=[];n=$jscomp.makeIterator(n);for(var d=n.next();!d.done;d=n.next())if(d=d.value,!a.hasOwnProperty(d)&&e!==d){var k=m[d]||(m[d]=[]);k.includes(e)||k.push(e);a[d]=!0;f[e].push(d);h.hasOwnProperty(d)||(h[d]=!0,c.push(d))}}}for(g=[];c.length;){h=Infinity;var b=[];a=[];n=[];for(d=0;d<c.length;d++){var e=c[d];k=f[e]||[];k.length>h||(k.length!==h||k.some(function(l){return b.includes(l)})?
(h=k.length,b=[e],a=[d],n=(m[e]||[]).slice()):(b.push(e),a.push(d),n.push.apply(n,$jscomp.arrayFromIterable(m[e]||[]))))}for(d=a.length;d--;)e=c[a[d]],m[e]=[],c.splice(a[d],1);h=$jscomp.makeIterator(n);for(e=h.next();!e.done;e=h.next())e=e.value,f[e]=f[e].filter(function(l){return!b.includes(l)});g.push(b)}return g}function Xs(g,c,h,f,m,n){function a(b){-1<d.indexOf(b)||(f=g.call(n,f,b,k++),d=d.concat([b]),Wh.withoutAll(c[b]||[],d).forEach(function(e){return a(e)}))}var d=m||[],k=0;a(h);return f}
function Ys(g){g=void 0===g?10:g;for(var c={},h=Wh.range(1,g).map(String),f=0;f<h.length;f++){var m=Math.floor(Math.random()*g);c[h[f]]=Wh.shuffle(h).slice(0,m)}return c}function Iv(g){return Array.isArray(g)&&2<=g.length&&g[0]<=g[1]}function Zs(g){return g.sort(Tg.compare)}function er(g,c){return g[0]<c[0]?g[1]<c[0]?-3:g[1]===c[0]?-2:-1:g[0]===c[0]?g[1]===c[1]?0:g[1]<c[1]?-1:1:-1*er(c,g)}function Jv(g,c,h){switch(this.compare(g,c)){case -3:case 3:return null;case 0:return h&&h(g,c,g),g;case 2:case 1:var f=
g;g=c;c=f;case -2:case -1:return f=[g[0],Math.max(g[1],c[1])],h&&h(g,c,f),f;default:throw Error("Interval compare failed");}}function Kv(g,c){for(var h=[],f=g.length;0<f;){var m=g.shift();f--;for(var n=0;n<f;n++){var a=Tg.coalesce(m,g[n],c);a&&(m=a,g.splice(n,1),f--,n--)}h.push(m)}return this.sort(h)}function Lv(g,c,h){for(var f=[];0<g.length;){var m=g.shift(),n=c.map(function(a){a=Tg.compare(m,a);return-1===a||0===a||1===a});f.push(h(m,n[0]));f.push(m)}return f}function Wp(g,c,h,f,m,n){n=n||Tg.GLOBAL;
h=this.sort(h);for(var a,d=[];a=h.shift();)if(!(a[1]<g)){a[0]<g&&(a=Array.prototype.slice.call(a),a[0]=g);var k=c<a[0]?c:a[0];g<k&&d.push(f.call(n,[g,k],!0));c<a[1]&&(a=Array.prototype.slice.call(a),a[1]=c);if(a[0]===a[1]){var b;m&&(b=d.slice(-1)[0])&&m.call(n,b,a,b)}else d.push(f.call(n,a,!1));g=a[1];if(g>=c)break}g<c&&d.push(f.call(n,[g,c],!0));return d}function Xp(g,c,h){return Tg.intervalsInRangeDo(g,c,Tg.coalesceOverlapping(Array.prototype.slice.call(h)),function(f,m){return m?f:null}).filter(Boolean)}
function Oo(g,c){var h=0,f,m;return c.map(function(n){for(;m=g[h];)if(m[0]<n[0])h++;else break;if(m&&m[0]===n[0]){for(f=h;m=g[f];)if(m[1]<n[1])f++;else break;if(m&&m[1]===n[1])return Tg.range(h,f)}return[]})}function fr(g,c,h){h=h||0;h+c>g.length&&(h-=h+c-g.length);return{array:g,from:h,to:h+c}}function $s(g){return g.array.slice(g.from,g.to)}function at(g,c){return c<g.from||c>=g.to?null:c-g.from}function bt(g,c){return 0>c||c>g.to-g.from?null:g.from+c}function Mv(g,c){if(!(c in g.array))return null;
var h=0;c<g.from&&(h=-g.from+c);c>=g.to&&(h=c-g.to+1);return 0===h?g:ml.create(g.array,g.to-g.from,g.from+h)}function Nv(g,c,h){return(g=g[c])?g[h]:void 0}function Ov(g,c,h,f){(g=g[c])&&(g[h]=f);return f}function Pv(g,c){return g[c]}function gr(g,c,h){return g[c]=h}function ct(g,c){return g.reduce(function(h,f){h.push(f[c]);return h},[])}function hr(g,c,h){return g.map(function(f,m){return f[c]?f[c]=h[m]:void 0})}function dt(g,c,h){for(var f=Array(g);0<g;)f[--g]=tg.arrayWithN(c,h);return f}function Qv(g,
c,h,f){for(var m=Array(g),n=0;n<g;n++){m[n]=Array(c);for(var a=0;a<c;a++)m[n][a]=h.call(f||this,n,a)}return m}function et(g,c,h){g.forEach(function(f,m){f.forEach(function(n,a){c.call(h||this,n,m,a)})})}function ft(g,c,h){var f=Array(g.length);g.forEach(function(m,n){f[n]=Array(m.length);m.forEach(function(a,d){f[n][d]=c.call(h||this,a,n,d)})});return f}function ir(g){for(var c=g[0],h=Array(g.length-1),f=1;f<g.length;f++)for(var m=h[f-1]={},n=0;n<c.length;n++)m[c[n]]=g[f][n];return h}function gt(g,
c){Array.isArray(g)||(g=[g]);var h=[[]],f=h[0],m=g.reduce(function(n,a){return n.concat([Object.keys(a).reduce(function(d,k){var b=f.indexOf(k);-1===b&&(b=f.length,f.push(k));d[b]=a[k];return d},[])])},[]);c=1===arguments.length?null:c;m.forEach(function(n){for(var a=0;a<f.length;a++)n[a]||(n[a]=c)});return h.concat(m)}function ht(g,c,h,f,m){f=void 0===f?{i:0}:f;m=void 0===m?0:m;var n=f.i++;c(g,n,m);(h(g,n,m)||[]).forEach(function(a){return ht(a,c,h,f,m+1)})}function it(g,c,h,f,m){f=void 0===f?{i:0}:
f;m=void 0===m?0:m;var n=f.i++;(h(g,n,m)||[]).forEach(function(a){return it(a,c,h,f,m)});c(g,n,m)}function jr(g,c,h){if(c(g))return g;if((g=h(g))&&g.length)for(var f=0;f<g.length;f++){var m=jr(g[f],c,h);if(m)return m}}function jt(g,c,h){var f=[];c(g)&&f.push(g);return f.concat(Si.flatten((h(g)||[]).map(function(m){return jt(m,c,h)})))}function kt(g,c,h,f){f=void 0===f?0:f;return[c(g,f)].concat(Si.flatten((h(g)||[]).map(function(m){return kt(m,c,h,f+1)})))}function lt(g,c,h,f){f=void 0===f?0:f;var m=
(h(g)||[]).map(function(n){return lt(n,c,h,f+1)});return c(g,m,f)}function Sn(g){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],h=c.map(function(a){return a.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(a){if(!g[a.name])throw a="message implementation needs function "+a.name+"("+a.args.join(",")+
")",Error(a);});c=g.sendHeartbeat&&(g.heartbeatInterval||1E3);var f=g.hasOwnProperty("ignoreUnknownMessages")?g.ignoreUnknownMessages:!1,m={_outgoing:[],_inflight:[],_id:g.id||tj.newUUID(),_ignoreUnknownMessages:f,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:tj.OFFLINE,_runWhenOnlineCallbacks:function(){var a=m._whenOnlineCallbacks.slice();m._whenOnlineCallbacks=
[];a.forEach(function(d){try{d.call(null,null,m)}catch(k){console.error("error in _runWhenOnlineCallbacks: %s",k)}})},_ensureStatusWatcher:function(){m._statusWatcherProc||(m._statusWatcherProc=setInterval(function(){m.isOnline()&&m._whenOnlineCallbacks.length&&m._runWhenOnlineCallbacks();var a=m._status;m._status=m.isOnline()?tj.ONLINE:tj.OFFLINE;m._status!==tj.ONLINE&&m._statusWatcherProc&&m.reconnect();if(m._status!==a&&m.onStatusChange)m.onStatusChange()},20))},_addMissingData:function(a){if(!a.target)throw Error("Message needs target!");
if(!a.action)throw Error("Message needs action!");a.data||(a.data=null);a.messageId||(a.messageId=tj.newUUID());a.sender=m.id();a.messageIndex=m._messageCounter++;return a},_queueSend:function(a,d){if(d&&"function"!==typeof d)throw Error("Expecing a when send callback, got: "+d);m._outgoing.push([a,d])},_deliverMessageQueue:function(){function a(b){if(-1!==m._inflight.indexOf(b)){var e=b[0],l=b[1];l&&(m._messageResponseCallbacks[e.messageId]=l);g.send.call(m,e,function(p){tj.remove(m._inflight,b);
p&&d(p,b);m._deliverMessageQueue()})}}function d(b,e){var l=e[1];delete m._messageResponseCallbacks[e[0].messageId];console.error(b);l&&l(b)}if(g.allowConcurrentSends||!m._inflight.length){var k=m._outgoing.shift();k&&(m._inflight.push(k),m.isOnline()?a(k):m.whenOnline(function(){a(k)}),function(b){"number"===typeof g.sendTimeout&&setTimeout(function(){-1!==m._inflight.indexOf(b)&&(tj.remove(m._inflight,b),d(Error("Timeout sending message"),b),m._deliverMessageQueue())},g.sendTimeout)}(k),g.allowConcurrentSends&&
m._outgoing.length&&m._deliverMessageQueue())}},_startHeartbeatProcess:function(){m._startHeartbeatProcessProc||(m._startHeartbeatProcessProc=setTimeout(function(){g.sendHeartbeat.call(m,function(a,d){m._startHeartbeatProcessProc=null;m._startHeartbeatProcess()})},m._heartbeatInterval))},id:function(){return m._id},isOnline:function(){return g.isOnline.call(m)},heartbeatEnabled:function(){return"number"===typeof m._heartbeatInterval},listen:function(a){if(!m._listenInProgress)return m._listenInProgress=
!0,m._ensureStatusWatcher(),g.listen.call(m,function(d){m._listenInProgress=null;a&&a(d);m.heartbeatEnabled()&&m._startHeartbeatProcess()})},reconnect:function(){if(m._status!==tj.ONLINE)return m.listen(),m},send:function(a,d){m._addMissingData(a);m._queueSend(a,d);m._deliverMessageQueue();return a},sendTo:function(a,d,k,b){return m.send({target:a,action:d,data:k},b)},onMessage:function(a){m.emit("message",a);if(a.inResponseTo){var d=m._messageResponseCallbacks[a.inResponseTo];d&&!a.expectMoreResponses&&
delete m._messageResponseCallbacks[a.inResponseTo];d&&d(null,a)}else if(d=m._services[a.action])try{d.call(null,a,m)}catch(k){d=String(k.stack||k),console.error("Error invoking service: "+d),m.answer(a,{error:d})}else m._ignoreUnknownMessages||m.answer(a,{error:String(Error("messageNotUnderstood: "+a.action))})},answer:function(a,d,k,b){"function"===typeof k&&(b=k,k=!1);a={target:a.sender,action:a.action+"Result",inResponseTo:a.messageId,data:d};k&&(a.expectMoreResponses=!0);return m.send(a,b)},close:function(a){clearInterval(m._statusWatcherProc);
m._statusWatcherProc=null;g.close.call(m,function(d){m._status=tj.OFFLINE;a&&a(d)});return m},whenOnline:function(a){m._whenOnlineCallbacks.push(a);m.isOnline()&&m._runWhenOnlineCallbacks();return m},outgoingMessages:function(){return tj.pluck(m._inflight.concat(m._outgoing),0)},addServices:function(a){Object.assign(m._services,a);return m}};g.services&&m.addServices(g.services);tj.makeEmitter(m);for(var n in g)-1===h.indexOf(n)&&g.hasOwnProperty(n)&&(m[n]=g[n]);return m}function Rv(g,c,h){h||(h=
c,c=g,g=null);g=g||{};var f=g.args||[];g=ug.create(g);g.run.apply(g,[c].concat(f).concat(h));return g}function Sv(g){g=g||{};g.useMessenger=!0;var c=g.workerId||ug.newUUID(),h=ug.messengerCreate({sendTimeout:5E3,send:function(f,m){h.worker.postMessage(f);m()},listen:function(f){var m=h.worker=ug.isNodejs?ug.NodejsWorker.create(g):ug.BrowserWorker.create(g);m.on("message",function(n){h.onMessage(n)});m.on("ready",function(){ug.NodejsWorker.debug&&console.log("WORKER READY!!!")});m.on("close",function(){ug.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});m.once("ready",f)},close:function(f){return h.worker.ready?h.sendTo(c,"close",{},function(m,n){(m=m||n.data.error)&&console.error("Error in worker messenger close: "+m.stack||m);if(m)f(m);else{var a=!1;h.worker.once("close",function(){a=!0});ug.waitFor(1E3,function(){return!!a},f)}}):f(null)},isOnline:function(){return h.worker&&h.worker.ready}});Object.assign(h,{eval:function(f,m){h.sendTo(c,"remoteEval",{expr:f},function(n,a){m(n,a?a.data.result:null)})},run:function(){var f=
Array.prototype.slice.call(arguments),m=f.shift(),n=f.pop();if("function"!==typeof m)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return h.sendTo(c,"run",{func:String(m),args:f},function(a,d){n(a||d.data.error,d?d.data.result:null)})}});h.listen();return h}function Po(){if(!dd.isNode||dd.GLOBAL.lively||dd.GLOBAL.lively)if(dd.livelyLang._prevLivelyGlobal=dd.GLOBAL.lively,dd.GLOBAL.lively||(dd.GLOBAL.lively={}),dd.GLOBAL.lively.lang)for(var g in dd.livelyLang)dd.GLOBAL.lively.lang[g]=
dd.livelyLang[g];else dd.GLOBAL.lively.lang=dd.livelyLang}function yk(g){if(!g)return g;if(Array.isArray(g))return dd.createChain(dd.arr,g);if("Date"===g.constructor.name)return dd.createChain(dd.date,g);switch(typeof g){case "string":return dd.createChain(dd.string,g);case "object":return dd.createChain(dd.obj,g);case "function":return dd.createChain(dd.fun,g);case "number":return dd.createChain(dd.num,g)}throw Error("Chain for object "+g+" ("+g.constructor.name+") no supported");}function mt(){dd.isNode||
(dd.livelyLang._prevLivelyGlobal?delete dd.GLOBAL.lively.lang:delete dd.GLOBAL.lively);return dd.livelyLang}function nt(){Object.assign(dd.livelyLang,{worker:dd.worker,messenger:dd.messenger,events:dd.events,tree:dd.tree,grid:dd.grid,arrayProjection:dd.arrayProjection,interval:dd.interval,graph:dd.graph,date:dd.date,properties:dd.properties,obj:dd.obj,arr:dd.arr,fun:dd.fun,num:dd.num,string:dd.string,Closure:dd.Closure,promise:dd.promise,Path:dd.Path,Group:dd.Group});dd.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=dd.Path(g.target);c.isIn(dd.GLOBAL)||c.set(dd.GLOBAL,{},!0);var h=dd.Path(g.sources[0]);g.methods.forEach(function(f){dd.installProperty(h.concat([f]),c.concat([f]))});g.alias&&g.alias.forEach(function(f){dd.installProperty(h.concat([f[1]]),c.concat([f[0]]))})}else if("installObject"===g.action)c=dd.Path(g.target),g=dd.Path(g.source).get(dd.livelyLang),c.set(dd.GLOBAL,g,!0);else throw Error("Cannot deal with global setup action: "+g.action);})}function ot(){dd.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=dd.Path(g.target),h=dd.Path(g.source).get(dd.livelyLang),f=c.get(dd.GLOBAL);f&&(g.methods.filter(function(m){return h===f[m]}).forEach(function(m){delete f[m]}),g.alias&&g.alias.filter(function(m){return h===f[m]}).forEach(function(m){delete f[m[0]]}))}else if("installObject"===g.action)c=dd.Path(g.target),c.del(dd.GLOBAL);else throw Error("Cannot deal with global setup action: "+g.action);})}function ty(g,c){var h=void 0===g.useProxy?!0:g.useProxy,f=void 0===g.useCors?!0:g.useCors,
m=g.url,n=g.onLoad,a=g.headers,d=g.onProgress,k=new zf.XMLHttpRequest,b=zf.promise.deferred();k.open("PUT",m);h&&(Object.assign(a,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":m}),m=g.proxyDomain||zf.defaultOrigin());for(var e in a)k.setRequestHeader(e,a[e]);k.upload.addEventListener("progress",d);k.responseType="json";k.onload=function(){n(k.response);b.resolve(k)};f&&(k.withCredentials=!0);k.send(c);return b.promise}function kr(g,c,h){c=void 0===c?"infinity":c;var f,m,n,
a,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(g.dirList(c,h),2);case 2:f=w.yieldResult,m={},n=$jscomp.makeIterator(f),a=n.next();case 3:if(a.done){w.jumpTo(5);break}d=a.value;if(d.isDirectory()){k={};w.jumpTo(6);break}return w.yield(d.read(),7);case 7:k=w.yieldResult;case 6:b=k;e=d.asFile().relativePathFrom(g).split("/");l=m;p=$jscomp.makeIterator(e.slice(0,-1));for(q=p.next();!q.done;q=p.next())u=q.value,l[u]||(l[u]={}),
l=l[u];l[e[e.length-1]]=b;a=n.next();w.jumpTo(3);break;case 5:return w.return(m)}})}function Tv(g){var c,h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c=document.head,h=c.namespaceURI,f=Kg.newUUID(),m=document.createElementNS(h,"script"),m.setAttribute("type","module"),c.appendChild(m),m.innerText="import m from '"+g+"'; window['"+f+"'] = m;",m.setAttributeNS(null,"async",!0),a.yield(Kg.waitFor(3E4,function(){return window[f]}),2);n=a.yieldResult;
delete window[f];m.remove();return a.return(n)})}function Yp(g,c){var h=document.head,f=h.namespaceURI;return new Promise(function(m,n){var a=document.createElementNS(f,"script");a.setAttribute("type","text/ecmascript");h.appendChild(a);a.setAttributeNS(null,"id",g);"http://www.w3.org/2000/svg"===a.namespaceURI?a.setAttributeNS("http://www.w3.org/1999/xlink","href",g):a.setAttribute("src",g);a.onload=m;a.onerror=n;a.setAttributeNS(null,"async",!0)})}function pt(){var g,c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if("fetch"in
System.global&&"Headers"in System.global)return m.return(Promise.resolve());g=System.decanonicalize("lively.resources");if(System.get("@system-env").node){m.setCatchFinallyBlocks(5);c=System._nodeRequire("fetch-ponyfill");m.leaveTryBlock(3);break}return m.yield(System.import("fetch-ponyfill",g),4);case 4:c=m.yieldResult;m.jumpTo(3);break;case 5:return m.enterCatchBlock(),m.yield(System.normalize("fetch-ponyfill",g),7);case 7:return h=m.yieldResult.replace("file://",""),m.yield(System.import(h),8);
case 8:f=m.yieldResult,c=f.default;case 3:Object.assign(System.global,c()),m.jumpToEnd()}})}function Zp(g){return(g=g.match(fS))?{scheme:g[1],auth:g[2],host:g[3],port:g[4],path:g[5]}:null}function lr(g){var c="";g.scheme&&(c+=g.scheme+":");c+="//";g.auth&&(c+=g.auth+"@");g.host&&(c+=g.host);g.port&&(c+=":"+g.port);g.path&&(c+=g.path);return c}function Z(g){var c=g,h=Zp(g);if(h){if(!h.path)return g;c=h.path}g=dk.isAbsolute(c);c=c.split(/\/+/);for(var f,m=0,n=c.length-1;0<=n;n--)f=c[n],"."===f?c.splice(n,
1):".."===f?m++:0<m&&(""===f?(c.splice(n+1,m),m=0):(c.splice(n,2),m--));c=c.join("/");""===c&&(c=g?"/":".");return h?(h.path=c,lr(h)):c}function va(g,c){""===g&&(g=".");""===c&&(c=".");var h=Zp(c),f=Zp(g);f&&(g=f.path||"/");if(h&&!h.scheme)return f&&(h.scheme=f.scheme),lr(h);if(h||c.match(E6))return c;if(f&&!f.host&&!f.path)return f.host=c,lr(f);g="/"===c.charAt(0)?c:Z(g.replace(/\/+$/,"")+"/"+c);return f?(f.path=g,lr(f)):g}function ab(g){return g}function wb(g){return gc(g)?"$"+g:g}function Wb(g){return gc(g)?
g.slice(1):g}function gc(g){if(!g)return!1;var c=g.length;if(9>c||95!==g.charCodeAt(c-1)||95!==g.charCodeAt(c-2)||111!==g.charCodeAt(c-3)||116!==g.charCodeAt(c-4)||111!==g.charCodeAt(c-5)||114!==g.charCodeAt(c-6)||112!==g.charCodeAt(c-7)||95!==g.charCodeAt(c-8)||95!==g.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==g.charCodeAt(c))return!1;return!0}function Zc(g,c){return g===c?0:null===g?1:null===c?-1:g>c?1:-1}function be(){(this||$k)._array=[];(this||$k)._set=qt?new Map:Object.create(null)}
function pe(){(this||Ym)._array=[];(this||Ym)._sorted=!0;(this||Ym)._last={generatedLine:-1,generatedColumn:0}}function Te(g){g||(g={});(this||Ug)._file=Lj.getArg(g,"file",null);(this||Ug)._sourceRoot=Lj.getArg(g,"sourceRoot",null);(this||Ug)._skipValidation=Lj.getArg(g,"skipValidation",!1);(this||Ug)._sources=new ZB;(this||Ug)._names=new ZB;(this||Ug)._mappings=new F6;(this||Ug)._sourcesContents=null}function Bf(g,c,h,f,m,n){var a=Math.floor((c-g)/2)+g,d=m(h,f[a],!0);return 0===d?a:0<d?1<c-a?Bf(a,
c,h,f,m,n):n==$B.LEAST_UPPER_BOUND?c<f.length?c:-1:a:1<a-g?Bf(g,a,h,f,m,n):n==$B.LEAST_UPPER_BOUND?a:0>g?-1:g}function Gh(g,c,h){var f=g[c];g[c]=g[h];g[h]=f}function ri(g,c,h,f){if(h<f){var m=h-1;Gh(g,Math.round(h+Math.random()*(f-h)),f);for(var n=g[f],a=h;a<f;a++)0>=c(g[a],n)&&(m+=1,Gh(g,m,a));Gh(g,m+1,a);m+=1;ri(g,c,h,m-1);ri(g,c,m+1,f)}}function gf(g,c){var h=g;"string"===typeof g&&(h=nf.parseSourceMapInput(g));return null!=h.sections?new Hh(h,c):new Ki(h,c)}function Ki(g,c){var h=g;"string"===
typeof g&&(h=nf.parseSourceMapInput(g));g=nf.getArg(h,"version");var f=nf.getArg(h,"sources"),m=nf.getArg(h,"names",[]),n=nf.getArg(h,"sourceRoot",null),a=nf.getArg(h,"sourcesContent",null),d=nf.getArg(h,"mappings");h=nf.getArg(h,"file",null);if(g!=(this||je)._version)throw Error("Unsupported version: "+g);n&&(n=nf.normalize(n));f=f.map(String).map(nf.normalize).map(function(k){return n&&nf.isAbsolute(n)&&nf.isAbsolute(k)?nf.relative(n,k):k});(this||je)._names=Uv.fromArray(m.map(String),!0);(this||
je)._sources=Uv.fromArray(f,!0);(this||je)._absoluteSources=(this||je)._sources.toArray().map(function(k){return nf.computeSourceURL(n,k,c)});(this||je).sourceRoot=n;(this||je).sourcesContent=a;(this||je)._mappings=d;(this||je)._sourceMapURL=c;(this||je).file=h}function lj(){(this||je).generatedLine=0;(this||je).generatedColumn=0;(this||je).source=null;(this||je).originalLine=null;(this||je).originalColumn=null;(this||je).name=null}function Hh(g,c){var h=g;"string"===typeof g&&(h=nf.parseSourceMapInput(g));
g=nf.getArg(h,"version");h=nf.getArg(h,"sections");if(g!=(this||je)._version)throw Error("Unsupported version: "+g);(this||je)._sources=new Uv;(this||je)._names=new Uv;var f={line:-1,column:0};(this||je)._sections=h.map(function(m){if(m.url)throw Error("Support for url field in sections not implemented.");var n=nf.getArg(m,"offset"),a=nf.getArg(n,"line"),d=nf.getArg(n,"column");if(a<f.line||a===f.line&&d<f.column)throw Error("Section offsets must be ordered and non-overlapping.");f=n;return{generatedOffset:{generatedLine:a+
1,generatedColumn:d+1},consumer:new gf(nf.getArg(m,"map"),c)}})}function mj(g,c,h,f,m){(this||Ih).children=[];(this||Ih).sourceContents={};(this||Ih).line=null==g?null:g;(this||Ih).column=null==c?null:c;(this||Ih).source=null==h?null:h;(this||Ih).name=null==m?null:m;(this||Ih).$$$isSourceNode$$$=!0;null!=f&&this.add(f)}function Dj(g,c){c=void 0===c?{}:c;var h=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||{}},quotes:"double"},um.obj.dissoc(c&&
c.format||{},["indent"]));c=Object.assign({format:h,comment:!1},um.obj.dissoc(c,["format"]));return um.es.generate(g,c)}function Tn(g,c){for(var h=65536,f=0;f<c.length;f+=2){h+=c[f];if(h>g)return!1;h+=c[f+1];if(h>=g)return!0}}function El(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&G6.test(String.fromCharCode(g)):!1===c?!1:Tn(g,gS)}function vm(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&H6.test(String.fromCharCode(g)):!1===c?!1:Tn(g,
gS)||Tn(g,I6)}function al(g,c){return new bi(g,{beforeExpr:!0,binop:c})}function Ph(g,c){void 0===c&&(c={});c.keyword=g;return aC[g]=new bi(g,c)}function Vv(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function rt(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function hK(g,c){for(var h=1,f=0;;){Wv.lastIndex=f;var m=Wv.exec(g);if(m&&m.index<c)++h,f=m.index+m[0].length;else return new Xv(h,c-f)}}function J6(g){var c={},h;for(h in bC)c[h]=g&&cC.call(g,h)?g[h]:bC[h];"latest"===c.ecmaVersion?
c.ecmaVersion=1E8:null==c.ecmaVersion?(!hS&&"object"===typeof console&&console.warn&&(hS=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(iS(c.onToken)){var f=c.onToken;c.onToken=function(m){return f.push(m)}}iS(c.onComment)&&(c.onComment=K6(c,c.onComment));return c}function K6(g,c){return function(h,
f,m,n,a,d){h={type:h?"Block":"Line",value:f,start:m,end:n};g.locations&&(h.loc=new uy(this,a,d));g.ranges&&(h.range=[m,n]);c.push(h)}}function dC(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function jS(g,c,h,f){g.type=c;g.end=h;this.options.locations&&(g.loc.end=f);this.options.ranges&&(g.range[1]=h);return g}function eC(g){g=kS[g]={binary:rt(L6[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:rt("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:rt(M6[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function fC(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function lS(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function mS(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function N6(g){return mS(g)||gC(g)}function gC(g){return 48<=
g&&57>=g}function nS(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function oS(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function pS(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function iK(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function hC(g){return"string"===typeof g?function(c){return c===g}:g?g:function(){return!0}}function qS(g,c){c=Object.create(c||ue);for(var h in g)c[h]=
g[h];return c}function jK(g,c,h){h(g,c)}function st(g,c,h){}function kK(g,c){for(var h=65536,f=0;f<c.length;f+=2){h+=c[f];if(h>g)return!1;h+=c[f+1];if(h>=g)return!0}}function $p(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&O6.test(String.fromCharCode(g)):!1===c?!1:kK(g,rS)}function Yv(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&P6.test(String.fromCharCode(g)):!1===c?!1:kK(g,rS)||kK(g,Q6)}function Zm(g,c){return new ci(g,{beforeExpr:!0,
binop:c})}function Qh(g,c){void 0===c&&(c={});c.keyword=g;return lK[g]=new ci(g,c)}function mr(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function tt(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function vy(g,c){for(var h=1,f=0;;){ut.lastIndex=f;var m=ut.exec(g);if(m&&m.index<c)++h,f=m.index+m[0].length;else return new wy(h,c-f)}}function R6(g){var c={},h;for(h in iC)c[h]=g&&xy.call(g,h)?g[h]:iC[h];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!sS&&"object"===
typeof console&&console.warn&&(sS=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(tS(c.onToken)){var f=c.onToken;c.onToken=function(m){return f.push(m)}}tS(c.onComment)&&(c.onComment=S6(c,c.onComment));return c}function S6(g,c){return function(h,f,m,n,a,d){h={type:h?"Block":"Line",value:f,start:m,
end:n};g.locations&&(h.loc=new Zv(this,a,d));g.ranges&&(h.range=[m,n]);c.push(h)}}function jC(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function kC(g,c){var h=g.key;return!g.computed&&("Identifier"===h.type&&h.name===c||"Literal"===h.type&&h.value===c)}function uS(g){return"MemberExpression"===g.type&&"PrivateIdentifier"===g.property.type||"ChainExpression"===g.type&&uS(g.expression)}function vS(g,c,h,f){g.type=c;g.end=h;this.options.locations&&
(g.loc.end=f);this.options.ranges&&(g.range[1]=h);return g}function lC(g){g=wS[g]={binary:tt(T6[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:tt("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:tt(U6[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function mC(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function xS(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function yS(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function V6(g){return yS(g)||nC(g)}function nC(g){return 48<=
g&&57>=g}function zS(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function AS(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function BS(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function oC(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Qo(g){return"\u2716"===g.name}function CS(){}function W6(g){return 14>g&&8<g||32===g||160===g||mr(g)}function pC(g,c,h,f){var m=[];f=f||se.walk.make(se.custom.withMemberExpression);
Object.keys(se.walk.base).forEach(function(n){var a=f[n];f[n]=function(d,k,b){se.arr.pushIfNotIncluded(m,d);return a(d,k,b)}});f.Property=function(n,a,d){se.arr.pushIfNotIncluded(m,n);d(n.key,a,"Expression");d(n.value,a,"Expression")};f.LabeledStatement=function(n,a,d){n.label&&d(n.label,a,"Expression");d(n.body,a,"Statement")};se.walk.findNodeAround(g,c,h,f);return m}function mK(g,c){function h(m){return null===m?null:f[m.type](m,h)}var f=se.obj.extend({Program:function(m,n){return{start:m.start,
end:m.end,type:"Program",body:m.body.map(n),source:m.source,astIndex:m.astIndex}},FunctionDeclaration:function(m,n){return{start:m.start,end:m.end,type:"FunctionDeclaration",id:n(m.id),params:m.params.map(n),body:n(m.body),source:m.source,astIndex:m.astIndex}},BlockStatement:function(m,n){return{start:m.start,end:m.end,type:"BlockStatement",body:m.body.map(n),source:m.source,astIndex:m.astIndex}},ExpressionStatement:function(m,n){return{start:m.start,end:m.end,type:"ExpressionStatement",expression:n(m.expression),
source:m.source,astIndex:m.astIndex}},CallExpression:function(m,n){return{start:m.start,end:m.end,type:"CallExpression",callee:n(m.callee),arguments:m.arguments.map(n),source:m.source,astIndex:m.astIndex}},MemberExpression:function(m,n){return{start:m.start,end:m.end,type:"MemberExpression",object:n(m.object),property:n(m.property),computed:m.computed,source:m.source,astIndex:m.astIndex}},NewExpression:function(m,n){return{start:m.start,end:m.end,type:"NewExpression",callee:n(m.callee),arguments:m.arguments.map(n),
source:m.source,astIndex:m.astIndex}},VariableDeclaration:function(m,n){return{start:m.start,end:m.end,type:"VariableDeclaration",declarations:m.declarations.map(n),kind:m.kind,source:m.source,astIndex:m.astIndex}},VariableDeclarator:function(m,n){return{start:m.start,end:m.end,type:"VariableDeclarator",id:n(m.id),init:n(m.init),source:m.source,astIndex:m.astIndex}},FunctionExpression:function(m,n){return{start:m.start,end:m.end,type:"FunctionExpression",id:n(m.id),params:m.params.map(n),body:n(m.body),
source:m.source,astIndex:m.astIndex}},IfStatement:function(m,n){return{start:m.start,end:m.end,type:"IfStatement",test:n(m.test),consequent:n(m.consequent),alternate:n(m.alternate),source:m.source,astIndex:m.astIndex}},ConditionalExpression:function(m,n){return{start:m.start,end:m.end,type:"ConditionalExpression",test:n(m.test),consequent:n(m.consequent),alternate:n(m.alternate),source:m.source,astIndex:m.astIndex}},SwitchStatement:function(m,n){return{start:m.start,end:m.end,type:"SwitchStatement",
discriminant:n(m.discriminant),cases:m.cases.map(n),source:m.source,astIndex:m.astIndex}},SwitchCase:function(m,n){return{start:m.start,end:m.end,type:"SwitchCase",test:n(m.test),consequent:m.consequent.map(n),source:m.source,astIndex:m.astIndex}},BreakStatement:function(m,n){return{start:m.start,end:m.end,type:"BreakStatement",label:m.label,source:m.source,astIndex:m.astIndex}},ContinueStatement:function(m,n){return{start:m.start,end:m.end,type:"ContinueStatement",label:m.label,source:m.source,astIndex:m.astIndex}},
TryStatement:function(m,n){return{start:m.start,end:m.end,type:"TryStatement",block:n(m.block),handler:n(m.handler),finalizer:n(m.finalizer),guardedHandlers:m.guardedHandlers.map(n),source:m.source,astIndex:m.astIndex}},CatchClause:function(m,n){return{start:m.start,end:m.end,type:"CatchClause",param:n(m.param),guard:n(m.guard),body:n(m.body),source:m.source,astIndex:m.astIndex}},ThrowStatement:function(m,n){return{start:m.start,end:m.end,type:"ThrowStatement",argument:n(m.argument),source:m.source,
astIndex:m.astIndex}},ForStatement:function(m,n){return{start:m.start,end:m.end,type:"ForStatement",init:n(m.init),test:n(m.test),update:n(m.update),body:n(m.body),source:m.source,astIndex:m.astIndex}},ForInStatement:function(m,n){return{start:m.start,end:m.end,type:"ForInStatement",left:n(m.left),right:n(m.right),body:n(m.body),source:m.source,astIndex:m.astIndex}},WhileStatement:function(m,n){return{start:m.start,end:m.end,type:"WhileStatement",test:n(m.test),body:n(m.body),source:m.source,astIndex:m.astIndex}},
DoWhileStatement:function(m,n){return{start:m.start,end:m.end,type:"DoWhileStatement",test:n(m.test),body:n(m.body),source:m.source,astIndex:m.astIndex}},WithStatement:function(m,n){return{start:m.start,end:m.end,type:"WithStatement",object:n(m.object),body:n(m.body),source:m.source,astIndex:m.astIndex}},UnaryExpression:function(m,n){return{start:m.start,end:m.end,type:"UnaryExpression",argument:n(m.argument),operator:m.operator,prefix:m.prefix,source:m.source,astIndex:m.astIndex}},BinaryExpression:function(m,
n){return{start:m.start,end:m.end,type:"BinaryExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},LogicalExpression:function(m,n){return{start:m.start,end:m.end,type:"LogicalExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},AssignmentExpression:function(m,n){return{start:m.start,end:m.end,type:"AssignmentExpression",left:n(m.left),operator:m.operator,right:n(m.right),source:m.source,astIndex:m.astIndex}},
UpdateExpression:function(m,n){return{start:m.start,end:m.end,type:"UpdateExpression",argument:n(m.argument),operator:m.operator,prefix:m.prefix,source:m.source,astIndex:m.astIndex}},ReturnStatement:function(m,n){return{start:m.start,end:m.end,type:"ReturnStatement",argument:n(m.argument),source:m.source,astIndex:m.astIndex}},Identifier:function(m,n){return{start:m.start,end:m.end,type:"Identifier",name:m.name,source:m.source,astIndex:m.astIndex}},Literal:function(m,n){return{start:m.start,end:m.end,
type:"Literal",value:m.value,raw:m.raw,source:m.source,astIndex:m.astIndex}},ObjectExpression:function(m,n){return{start:m.start,end:m.end,type:"ObjectExpression",properties:m.properties.map(function(a){return{key:n(a.key),value:n(a.value),kind:a.kind}}),source:m.source,astIndex:m.astIndex}},ArrayExpression:function(m,n){return{start:m.start,end:m.end,type:"ArrayExpression",elements:m.elements.map(n),source:m.source,astIndex:m.astIndex}},SequenceExpression:function(m,n){return{start:m.start,end:m.end,
type:"SequenceExpression",expressions:m.expressions.map(n),source:m.source,astIndex:m.astIndex}},EmptyStatement:function(m,n){return{start:m.start,end:m.end,type:"EmptyStatement",source:m.source,astIndex:m.astIndex}},ThisExpression:function(m,n){return{start:m.start,end:m.end,type:"ThisExpression",source:m.source,astIndex:m.astIndex}},DebuggerStatement:function(m,n){return{start:m.start,end:m.end,type:"DebuggerStatement",source:m.source,astIndex:m.astIndex}},LabeledStatement:function(m,n){return{start:m.start,
end:m.end,type:"LabeledStatement",label:m.label,body:n(m.body),source:m.source,astIndex:m.astIndex}}},c||{});return h(g)}function nK(g,c,h){if(!c)return[];g=se.findNodesIncluding(g,c.start);var f=g.indexOf(c);g=g.slice(0,f);g=se.arr.detect(g.reverse(),function(m){return Array.isArray(m.body)}).body;if(!h)return se.arr.without(g,c);c=g.indexOf(c);return"before"===h?g.slice(0,c):g.slice(c+1)}function oK(g,c,h){g.astIndex||null!=h&&!h||se.addAstIndex(g);var f=null;se.withMozillaAstDo(g,null,function(m,
n,a){f||n.astIndex<c||(n.astIndex===c?f=n:m())});return f}function pK(g,c,h){h||(h=c,c=g,g=null);g||(g={});c.astIndex||se.addAstIndex(c);var f,m=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");se.withMozillaAstDo(c,
{},function(a,d,k,b){if(!(m||d.astIndex<h.astIndex)){if(d===h||d.astIndex===h.astIndex)if(m=!0,g.asPath)f=b;else{d=se.Path(b);do f=d.get(c),d=d.slice(0,d.size()-1);while(-1==n.indexOf(f.type)&&0<d.size())}!m&&a()}});return f}function yy(g){se.withMozillaAstDo(g,{index:0},function(c,h,f){c();h.astIndex=f.index++});return g}function qC(g,c){"string"===typeof g&&(c=g,g=vg.parse(g));c&&vg.AllNodesVisitor.run(g,function(h,f,m){return!h.source&&(h.source=c.slice(h.start,h.end))});return g}function nr(g,
c){c=void 0===c?{}:c;var h=vg.parse("("+g+")",c);vg.AllNodesVisitor.run(h,function(f,m,n){if(!f._positionFixed){f._positionFixed=!0;if(f.start||0===f.start)f.start+=-1,f.end+=-1;c.addSource&&!f.source&&(f.source=g.slice(f.start,f.end))}});return h.body[0].expression}function aq(g,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var h;"LabeledStatement"===c.type&&(h="$={"+g+"}");try{var f=vg.parse(h||g,c);h?f=null:c.addSource&&vg.addSource(f,g)}catch(n){var m=n}m&&void 0!==m.raisedAt?(h&&(m.pos-=3,m.raisedAt-=3,m.loc.column-=3),h=""+g.slice(m.raisedAt-20,m.raisedAt),h=h+"<-error->"+g.slice(m.raisedAt,m.raisedAt+20),c.verbose&&console.log("parse error: "+h),m.parseErrorSource=h):m&&c.verbose&&
console.log(""+m+m.stack);f||(f=vg.loose.parse(g,c),c.addSource&&vg.addSource(f,g),f.isFuzzy=!0,f.parseError=m);return f}function Ej(g,c){function h(l){l=m(f(l));a.allComments=l.comments}function f(l){n.forEach(function(p){var q=vg.arr.detect(vg.nodesAt(p.start,a).reverse(),function(u){return"BlockStatement"===u.type||"Program"===u.type});q||(q=a);q.comments||(q.comments=[]);q.comments.push(p);l.nodesWithComments.push(q)});return l}function m(l){l.nodesWithComments.forEach(function(p){vg.arr.clone(p.comments).reduce(function(q,
u){if(u.isBlock)return q.lastComment=null,q;if(!q.lastComment)return q.lastComment=u,q;var w=q.lastComment;if(vg.arr.detect(p.body,function(A){return A.start>=w.end&&A.end<=u.start}))return q.lastComment=u,q;var y=g.slice(w.end,u.start);if(/[\n\r][\n\r]+/.test(y))return q.lastComment=u,q;w.text+="\n"+u.text;w.end=u.end;vg.arr.remove(p.comments,u);vg.arr.remove(l.comments,u);return q},{lastComment:null})});return l}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(l,p,q,u,w,y){n.push({isBlock:l,text:p,node:null,
start:q,end:u,line:w,column:y})}}try{var a=vg.acorn.parse(g,c)}catch(l){if("undefined"!==typeof SyntaxError&&l instanceof SyntaxError&&l.loc){var d=g.split("\n"),k=l,b=k.loc;c=b.line;b=b.column;var e=k.pos;d=d[c-1];k="Syntax error at line "+c+" column "+b+" (index "+e+') "'+k.message+'"\nsource: '+d.slice(0,b)+"<--SyntaxError--\x3e"+d.slice(b);k=new SyntaxError(k);k.loc={line:c,column:b};k.pos=e;throw k;}throw l;}c.addSource&&vg.addSource(a,g);c.addAstIndex&&!a.hasOwnProperty("astIndex")&&vg.addAstIndex(a);
a&&n&&h({ast:a,comments:n,nodesWithComments:[]});return a}function rC(g){return ne.identifierRe.test(g)&&-1===g.indexOf("-")}function zy(g){return"this"===g?{type:"ThisExpression"}:{name:String(g),type:"Identifier"}}function sC(g){return{type:"Literal",value:g}}function Ay(g){return{type:"ExpressionStatement",expression:g}}function By(g){return{type:"ReturnStatement",argument:g}}function tC(){return{type:"EmptyStatement"}}function uC(g,c,h){return{left:g,right:h,operator:c,type:"BinaryExpression"}}
function Cy(g,c,h){for(var f=[],m=2;m<arguments.length;++m)f[m-2]=arguments[m];m=g.arrow;var n=g.id,a=g.expression,d=g.generator;c=void 0===c?[]:c;c=c.map(function(k){return"string"===typeof k?ne.id(k):k});return{type:(m?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?ne.id(n):n:void 0,params:c,body:a&&1===f.length?f[0]:{body:f,type:"BlockStatement"},expression:a||!1,generator:d||!1}}function $v(g,c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];"string"===typeof g&&(g=ne.id(g));
return{type:"CallExpression",callee:g,arguments:h}}function Dy(g,c,h){"string"===typeof g&&(g={name:g,type:"Identifier"});return{type:"VariableDeclaration",kind:h||"var",declarations:[{type:"VariableDeclarator",id:g,init:c}]}}function Ey(g,c,h){"string"===typeof g&&(g=ne.id(g));"string"===typeof c?(h||ne.isIdentifier(c)||(h=!0),c=h?ne.literal(c):ne.id(c)):"number"===typeof c?(c=ne.literal(c),h=!0):"Literal"===c.type&&(h=!0);return{type:"MemberExpression",computed:!!h,object:g,property:c}}function Fy(g,
c){for(var h=[],f=1;f<arguments.length;++f)h[f-1]=arguments[f];return h.reduce(function(m,n){return ne.member(m,n)},"object"===typeof g?g:ne.id(g))}function vC(g,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?ne.id(c):c:ne.id("undefined"),left:"string"===typeof g?ne.id(g):g}}function Gy(g){for(var c=[],h=0;h<arguments.length;++h)c[h-0]=arguments[h];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function Hy(g){for(var c=[],h=0;h<arguments.length;++h)c[h-
0]=arguments[h];return Object.assign(ne.block.apply(ne,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function Iy(g,c,h,f){for(var m=[],n=3;n<arguments.length;++n)m[n-3]=arguments[n];Array.isArray(h)||(m.unshift(h),h=null);return{block:ne.block(m),finalizer:h?ne.block(h):null,handler:{body:ne.block(c),param:ne.id(g),type:"CatchClause"},type:"TryStatement"}}function wC(g,c){return{type:"Property",key:g,computed:"Identifier"!==g.type,shorthand:!1,value:c}}function xC(g){for(var c=
[],h=0;h<g.length;h+=2){var f=g[h];"string"===typeof f&&(f=ne.id(f));c.push(ne.prop(f,g[h+1]))}return{properties:c,type:"ObjectExpression"}}function yC(g,c,h){c=void 0===c?ne.block():c;h=void 0===h?ne.block():h;return{consequent:c,alternate:h,test:g,type:"IfStatement"}}function zC(g,c,h){return{type:"ForInStatement",left:"string"===typeof g?ne.varDecl(g):g,right:"string"===typeof c?ne.id(c):c,body:h}}function AC(g,c,h){c=void 0===c?ne.id("undefined"):c;h=void 0===h?ne.id("undefined"):h;return{consequent:c,
alternate:h,test:g,type:"ConditionalExpression"}}function BC(g,c,h){return{operator:g,left:c,right:h,type:"LogicalExpression"}}function Jy(g){var c=new hd.ScopeVisitor,h=c.newScope(g,null);c.accept(g,h,[]);return h}function CC(g,c){return hd.withMozillaAstDo(g,[],function(h,f,m){f.start<=c&&c<=f.end&&(m.push(f),h());return m})}function DC(g,c){return hd.tree.filter(hd.scopes(g),function(h){h=h.node;var f=h.start,m=h.end;"FunctionDeclaration"===h.type&&(f=h.params.length?h.params[0].start:h.body.start,
m=h.body.end);return f<=c&&c<=m},function(h){return h.subScopes})}function EC(g,c){return hd.arr.last(hd.scopesAtIndex(g,c))}function FC(g,c){return hd.arr.filter(hd.nodesAt(g,c),function(h){return"Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type})}function GC(g){return hd.withMozillaAstDo(g,{root:g,result:[]},function(c,h,f){f.result.push(h);if(h!==f.root&&("Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type))return f;c();return f}).result}
function HC(g,c,h){h=void 0===h?[]:h;c&&g.node.id&&g.node.id.name&&h.push(g.node.id);hd.helpers.declIds(g.params,h);for(c=0;c<g.funcDecls.length;c++){var f=g.funcDecls[c].id;f&&h.push(f)}hd.helpers.varDeclIds(g,h);h.push.apply(h,$jscomp.arrayFromIterable(g.catches));for(c=0;c<g.classDecls.length;c++)(f=g.classDecls[c].id)&&h.push(f);h.push.apply(h,$jscomp.arrayFromIterable(g.importSpecifiers));return hd.arr.compact(h)}function IC(g,c){for(var h=[],f=$jscomp.makeIterator(hd.declarationsOfScope(g,!0)),
m=f.next();!m.done;m=f.next())h.push(m.value.name);c&&hd._findJsLintGlobalDeclarations("Program"===g.node.type?g.node:g.node.body,h);return h}function JC(g,c){c=void 0===c?[]:c;if(!g||!g.comments)return c;g=$jscomp.makeIterator(g.comments);for(var h=g.next();!h.done;h=g.next())if(h=h.value.text.trim(),h.startsWith("global")){h=$jscomp.makeIterator(h.replace(hd.globalDeclRe,"").split(","));for(var f=h.next();!f.done;f=h.next())c.push(f.value.trim())}return c}function Ky(g){return hd.FindToplevelFuncDeclVisitor.run(g)}
function DS(g,c){if(0==c.length)return[null,null];var h=$jscomp.makeIterator(c);c=h.next().value;h=$jscomp.arrayFromIterator(h);var f=c.decls||hd.declarationsWithIdsOfScope(c);c.decls=f;return f.find(function(m){m=$jscomp.makeIterator(m);m.next();return m.next().value.name==g})||DS(g,h)}function KC(g){function c(f,m){var n=[f].concat(m);f.refs.forEach(function(a){var d=$jscomp.makeIterator(hd.resolveReference(a.name,n)),k=d.next().value;d=d.next().value;h.set(a,{decl:k,declId:d,ref:a})});f.subScopes.forEach(function(a){return c(a,
n)})}if(g.referencesResolvedSafely)return g;var h=g.resolvedRefMap||(g.resolvedRefMap=new Map);c(g,[]);g.referencesResolvedSafely=!0;return g}function LC(g,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var h=c.next();!h.done;h=c.next()){h=h.value;var f=h.ref,m=f.end;if(f.start<=g&&g<=m)return h}}function Ly(g,c){function h(a){var d=hd._declaredVarNames(a,f);return hd.arr.filter(a.subScopes.map(h).reduce(function(k,b){return k.concat(b)},a.refs),function(k){return-1===d.indexOf(k.name)})}
c=c||{};c.withComments=!0;"string"===typeof g&&(g=hd.parse(g,c));g=hd.scopes(g);var f=!!c.jslintGlobalComment;c=hd._declaredVarNames(g,f);var m=g.refs.concat(hd.arr.flatten(g.subScopes.map(h))),n=hd.arr.withoutAll(m.map(function(a){return a.name}),c);return{scope:g,varDecls:g.varDecls,funcDecls:hd.arr.filter(g.funcDecls,function(a){return a.id}),classDecls:hd.arr.filter(g.classDecls,function(a){return a.id}),declaredNames:c,undeclaredNames:n,refs:m,thisRefs:g.thisRefs}}function MC(g,c){g=hd.topLevelDeclsAndRefs(g,
c);var h=g.declaredNames.concat(hd.knownGlobals);return hd.arr.filter(g.refs,function(f){return-1===h.indexOf(f.name)})}function NC(g,c,h,f){if(!c&&!g)throw Error("Need at least ast or code");c=c||hd.stringify(g);g=g&&g.loc?g:hd.parse(c,{locations:!0});return hd.withMozillaAstDo(g,[],function(m,n,a){h.every(function(d){return hd.num.between(d,n.loc.start.line,n.loc.end.line)})&&(hd.arr.pushIfNotIncluded(a,n),m());return a})}function My(g,c,h,f){h=void 0===h?!0:h;f=void 0===f?{refs:[],decls:[]}:f;
if("this"===c)return f.refs.push.apply(f.refs,$jscomp.arrayFromIterable(g.thisRefs)),f;var m=hd.__varDeclIdsFor(g,c);if(!h&&m.length)return f;h=$jscomp.makeIterator(g.refs);for(var n=h.next();!n.done;n=h.next())n=n.value,n.name===c&&f.refs.push(n);f.decls.push.apply(f.decls,$jscomp.arrayFromIterable(m));g=$jscomp.makeIterator(g.subScopes);for(m=g.next();!m.done;m=g.next())My(m.value,c,!1,f);return f}function OC(g,c,h){var f=null;hd.arr.detect(hd.scopesAtIndex(g,h).reverse(),function(m){m=hd.declarationsOfScope(m,
!0);var n=hd.arr.pluck(m,"name").indexOf(c);if(-1===n)return!1;f=m[n];return!0});return f}function PC(g,c){c="string"===typeof c?hd.parse(c):c;return hd.custom.findNodesIncluding(c,g)}function Ny(g,c,h){var f=hd.nodesAt(c.start,g).reverse().find(function(n){return hd.arr.include(hd._stmtTypes,n.type)});if(h&&h.asPath){c=new hd.BaseVisitor;var m;c.accept=hd.fun.wrap(c.accept,function(n,a,d,k){if(a===f)throw m=k,Error("stop search");return n(a,d,k)});try{c.accept(g,{},[])}catch(n){}return m}return f}
function QC(g){var c=[];g=g.node.body||[];for(var h=0;h<g.length;h++){var f=g[h];if("ImportDeclaration"===f.type)if(0===f.specifiers.length)c.push({local:null,imported:null,fromModule:f.source.value,node:f});else{var m=f.source?f.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(f.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:m,node:f}})))}}return c}function RC(g,c){(void 0===c?0:c)&&hd.resolveReferences(g);c=[];for(var h={},f=$jscomp.makeIterator(g.exportDecls),m=f.next();!m.done;h={$jscomp$loop$prop$node$2691:h.$jscomp$loop$prop$node$2691},m=f.next()){h.$jscomp$loop$prop$node$2691=m.value;var n=hd.statementOf(g.node,h.$jscomp$loop$prop$node$2691);if(n){var a=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:a,node:h.$jscomp$loop$prop$node$2691,
type:"all"}):"ExportDefaultDeclaration"===n.type?hd.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2691,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(m=g.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:h.$jscomp$loop$prop$node$2691,type:"id",decl:m.decl,declId:m.declId})):c.push({local:null,exported:"default",fromModule:null,node:h.$jscomp$loop$prop$node$2691,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(d){return function(k){if(a){var b=d.$jscomp$loop$prop$node$2691;var e=k.exported}else k.local&&(b=(e=g.resolvedRefMap.get(k.local))?e.decl:null,e=e?e.declId:null);return{local:!a&&
k.local?k.local.name:null,exported:k.exported?k.exported.name:null,imported:a&&k.local?k.local.name:null,fromModule:a||null,type:"id",node:d.$jscomp$loop$prop$node$2691,decl:b,declId:e}}}(h)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(d){return function(k){return{local:k.id?k.id.name:"default",exported:k.id?k.id.name:"default",type:n.declaration.kind,fromModule:null,node:d.$jscomp$loop$prop$node$2691,decl:k,declId:k.id}}}(h)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2691,decl:n.declaration,declId:n.declaration.id})}}return hd.arr.uniqBy(c,function(d,k){return d.local==k.local&&d.exported==k.exported&&d.fromModule==k.fromModule})}function aw(g){return(new wm.ObjectSpreadTransformer).accept(g,
{},[])}function SC(g,c){if(g.start===c.start&&g.end===c.end)return 0;if(g.end<=c.start)return-1;if(g.start>=c.end||g.start<=c.start&&g.end>=c.end)return 1;if(c.start<=g.start&&c.end>=g.end)return-1;throw Error("Comparing nodes");}function TC(g,c,h){h="object"===typeof h?h:{changes:[],source:h};var f=!1,m=h.changes.reduce(function(a,d){if(a.end<d.pos)return a;var k=d.pos<a.start;f=f||d.pos>=a.start&&d.pos<=a.end;if("add"===d.type)return{start:k?a.start+d.string.length:a.start,end:a.end+d.string.length};
if("del"===d.type)return{start:k?a.start-d.length:a.start,end:a.end-d.length};throw Error("Cannot deal with change "+Bd.obj.inspect(d));},{start:g.start,end:g.end}),n=h.source;g=c(g,n.slice(m.start,m.end),f);g="string"===typeof g?g:Array.isArray(g)?g.map(Bd._node2string).join("\n"+Bd._findIndentAt(n,m.start)):g=Bd._node2string(g);m=[{type:"del",pos:m.start,length:m.end-m.start},{type:"add",pos:m.start,string:g}];return{changes:h.changes.concat(m),source:Bd._applyChanges(m,n)}}function UC(g,c){g=g.sort(function(m,
n){return Bd._compareNodesForReplacement(m.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var h=0;h<g.length;h++){var f=g[h];c=Bd.replaceNode(f.target,f.replacementFunc,c)}return c}function VC(g,c,h,f){f="object"===typeof g?g:null;g="string"===typeof g?g:f.source||Bd._node2string(f);return Bd.replaceNode(c,h,g)}function ES(g,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(g.varDecls));g=$jscomp.makeIterator(g.subScopes);for(var h=g.next();!h.done;h=g.next())ES(h.value,
c);return c}function WC(g){var c="object"===typeof g?g:Bd.parse(g);g="string"===typeof g?g:c.source||Bd._node2string(c);c=Bd.scopes(c);var h=Bd.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(m,n,a){a&&(m=Bd.parse(n).body[0]);return m.declarations.map(function(d){return{type:"VariableDeclaration",kind:"var",declarations:[d]}})}});return Bd.replaceNodes(c,g)}function XC(g){var c="object"===typeof g?g:Bd.parse(g);
g="string"===typeof g?g:c.source||Bd._node2string(c);c=Bd.scopes(c);var h=Bd.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var f=h.next();!f.done;f=h.next())c.push({target:f.value,replacementFunc:function(m,n,a){a&&(m=Bd.parse(n).body[0]);n=[];m=$jscomp.makeIterator(m.declarations);for(a=m.next();!a.done;a=m.next()){var d=a.value;a={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:a,init:d.init}]});d=$jscomp.makeIterator(Bd.helpers.objPropertiesAsList(d.id,
[],!1));for(var k=d.next();!k.done;k=d.next())k=k.value.key,n.push(Bd.varDecl(k[k.length-2],Bd.memberChain.apply(Bd,[a.name].concat($jscomp.arrayFromIterable(k))),"var"))}return n}});return Bd.replaceNodes(c,g)}function YC(g,c){c=c||{};var h=Bd.parse(g,c),f=Bd.arr.last(h.body);if("ExpressionStatement"!==f.type)return c.asAST?h:g;h.body.splice(h.body.length-1,1,Bd.returnStmt(f.expression));return c.asAST?h:Bd.stringify(h)}function ZC(g,c){c=c||{};g=Bd.returnLastStatement(g,c);return c.asAST?Bd.program(Bd.funcExpr.apply(Bd,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(g.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+g+"\n}"}function $C(g,c){"string"===typeof g&&(g=Bd.parse(g));c=c||{};var h="Program"===g.type,f=c.startFuncNode||Bd.id("__start_execution");c=c.endFuncNode||Bd.id("__end_execution");var m=Bd.topLevelFuncDecls(g),n=g.body,a=[];m.forEach(function(d){var k=d.node;Bd.Path(d.path).set(g,Bd.exprStmt(k.id));a.push(k)});n.unshift(Bd.exprStmt(Bd.funcCall(f)));f=Bd.arr.last(n);"ExpressionStatement"===
f.type?(n.pop(),n.push(Bd.exprStmt(Bd.funcCall(c,Bd.id("null"),f.expression)))):"VariableDeclaration"===f.type&&"Identifier"===Bd.arr.last(f.declarations).id.type?n.push(Bd.exprStmt(Bd.funcCall(c,Bd.id("null"),Bd.arr.last(f.declarations).id))):n.push(Bd.exprStmt(Bd.funcCall(c,Bd.id("null"),Bd.id("undefined"))));a.push(Bd.tryStmt.apply(Bd,["err",[Bd.exprStmt(Bd.funcCall(c,Bd.id("err"),Bd.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return h?Bd.program.apply(Bd,$jscomp.arrayFromIterable(a)):
Bd.block.apply(Bd,$jscomp.arrayFromIterable(a))}function aD(g){if(!Bd.isProbablySingleExpressionRe.test(g)||30<g.split("\n").length)return g;try{var c=Bd.fuzzyParse(g);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(g="("+g.replace(/;\s*$/,"")+")")}catch(h){"undefined"!==typeof $world?$world.logError(h):console.error("Eval preprocess error: %s",h.stack||h)}return g}function bD(g,c){var h=af.statementOf(g,
c,{asPath:!0}).slice(0,-2);h=af.Path(h).get(g);return h.comments&&h.comments.length?af.chain(af.extractComments(g)).reversed().detect(function(f){return f.followingNode===c}).value():null}function cD(g,c){function h(q){return af.arr.detect(q.node.body,function(u){return u.start>q.comment.end})}function f(q){return{type:"unknown",comment:q.comment.text}}function m(q){q=af.Path(q.path.slice(0,-1)).get(e);return{name:q.id?q.id.name:"<error: no name for function>",args:af.arr.pluck(q.params,"name")}}
function n(q){for(var u=af.Path(q.path.slice(0,-2)).get(e),w=u.key?u.key.name:"<error: no name for method>",y=q.path.slice(),A="<error: no object found for method>";y.length&&"init"!==af.arr.last(y);)y.pop();y.length&&(A=af.Path(y.slice(0,-1).concat(["id","name"])).get(e));if(af.string.startsWith(A,"<error")){for(y=q.path.slice();y.length&&"right"!==af.arr.last(y);)y.pop();y.length&&(A=af.Path(y.slice(0,-1).concat(["left"])).get(e),A=l.slice(A.start,A.end))}af.string.startsWith(A,"<error")&&(y=q.path.slice(),
(q=(q=af.Path(y.slice(0,-6)).get(e))&&"CallExpression"===q.type&&q.arguments[0])&&(A=l.slice(q.start,q.end)));return{name:w,args:af.arr.pluck(u.value.params,"name"),objectName:A}}function a(q){q=af.Path(q.path.slice(0,-1)).get(e);if("FunctionExpression"!==q.type&&"FunctionDeclaration"!==q.type)return{};var u=af.statementOf(e,q);if("ExpressionStatement"!==u.type||"AssignmentExpression"!==u.expression.type)return{};var w=l.slice(u.expression.left.object.start,u.expression.left.object.end);return{name:l.slice(u.expression.left.property.start,
u.expression.left.property.end),objectName:w,args:af.arr.pluck(q.params,"name")}}function d(q){var u=q.path.slice(0,-3);var w=af.Path(u).get(e);if(w&&"Property"===w.type){var y=af.arr.pluck(w.value.callee.params,"name");var A=w.key?w.key.name:"<error: no name for method>"}A||(u=q.path.slice(0,-2),(w=af.Path(u).get(e))&&"Property"===w.type&&(y=af.arr.pluck(w.value.params,"name"),A=w.key?w.key.name:"<error: no name for method>"));A||(A="<error: no name for method>",y=[],u=q.path);w=af.arr.clone(u);
for(q="<error: no object found for method>";w.length&&"init"!==af.arr.last(w);)w.pop();w.length&&(q=af.Path(w.slice(0,-1).concat(["id","name"])).get(e));if(af.string.startsWith(q,"<error")){for(w=af.arr.clone(u);w.length&&"right"!==af.arr.last(w);)w.pop();w.length&&(q=af.Path(w.slice(0,-1).concat(["left"])).get(e),q=l.slice(q.start,q.end))}af.string.startsWith(q,"<error")&&(w=af.arr.clone(u),(u=(u=af.Path(w.slice(0,-4)).get(e))&&"CallExpression"===u.type&&u.arguments[0])&&(q=l.slice(u.start,u.end)));
return{name:A,args:y,objectName:q}}function k(q){return q&&"VariableDeclaration"===q.type&&1===q.declarations.length}function b(q){return"AssignmentExpression"!==q.type?!1:"ObjectExpression"===q.right.type?!0:"AssignmentExpression"===q.right.type?b(q.right):!1}var e="string"===typeof g?af.parse(g,{withComments:!0}):g,l=c||("string"===typeof g?g:af.stringify(g)),p=af.arr.sortBy(function(q){var u=[],w=new af.Visitor;w.accept=af.fun.wrap(w.accept,function(y,A,C,D){A.comments&&af.arr.pushAll(u,A.comments.map(function(L){return{path:D,
comment:L,node:A}}));return y(A,C,D)});w.accept(q,u,[]);return u}(e),function(q){return q.comment.start});return p.map(function(q,u){if(af.arr.equals(q.path.slice(-2),["value","body"]))return af.obj.merge([q,q.comment,{type:"method",comment:q.comment.text},n(q)]);var w=q.path.slice(-5);af.arr.removeAt(w,1);if(af.arr.equals(w,["properties","value","callee","body"]))return af.obj.merge([q,q.comment,{type:"method",comment:q.comment.text},d(q)]);if((w=af.Path(q.path.slice(0,-1)).get(e))&&"FunctionDeclaration"===
w.type)return af.obj.merge([q,q.comment,{type:"function",comment:q.comment.text},m(q)]);if(af.arr.equals(q.path.slice(-2),["right","body"]))return af.obj.merge([q,q.comment,{type:"method",comment:q.comment.text},a(q)]);w=h(q);return w?(u=p[u+1])&&u.comment.start<=w.start?af.obj.merge([q,q.comment,{followingNode:w},f(q)]):k(w)&&("ObjectExpression"===w.declarations[0].init.type||b(w.declarations[0].init))?af.obj.merge([q,q.comment,{followingNode:w},{type:"object",comment:q.comment.text},{name:w.declarations[0].id.name}]):
k(w)?af.obj.merge([q,q.comment,{followingNode:w},{type:"var",comment:q.comment.text},{name:w.declarations[0].id.name}]):af.obj.merge([q,q.comment,{followingNode:w},f(q)]):af.obj.merge([q,q.comment,{followingNode:w},f(q)])})}function dD(g,c){c=c||bg.obj.merge({hideOneLiners:!1},c);"string"===typeof g&&(g=bg.parse(g,{addSource:!0}));for(var h=[],f=$jscomp.makeIterator("Program"===g.type?g.body:g.body.body),m=f.next();!m.done;m=f.next()){m=m.value;m=bg.unwrapExport(m);var n=bg.functionWrapper(m,c)||
bg.varDefs(m)||bg.funcDef(m)||bg.es6ClassDef(m)||bg.someObjectExpressionCall(m);if(n){if(c.hideOneLiners)if(g.loc)n=bg.arr.filter(n,function(d){return!d.node.loc||d.node.loc.start.line!==d.node.loc.end.line});else if(g.source){m=[];n=$jscomp.makeIterator(n);for(var a=n.next();!a.done;a=n.next())a=a.value,(a.parent&&m.includes(a.parent)||(a.node.source||"").includes("\n"))&&m.push(a);n=m}h.push.apply(h,$jscomp.arrayFromIterable(n))}}return h}function qK(g){return bg.arr.flatmap(g,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?qK(bg.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?qK(c.elements):[]:[]})}function bw(g){return of.isValidIdentifierRe.test(g)}function or(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof cg.Global?cg.Global:"undefined"!==typeof self?self:function(){return this}()}function eD(g,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return g+"("+(c&&c[1]||"")+")"}function rK(g){return g===g||g===Array||g===Function||g===String||g===Boolean||g===Date||g===RegExp||g===Number||g===Promise?!0:g instanceof Function&&(void 0!==g.superclass||void 0!==g._superclass)}function fD(g,c){return g.map(function(h){return h[c]})}function gD(g){if(Symbol.keyFor(g))return'Symbol.for("'+Symbol.keyFor(g)+'")';if(cg.knownSymbols.get(g))return cg.knownSymbols.get(g);String(g).match(cg.symMatcher);return String(g)}function Oy(g){if(!g)return String(g);
if(Array.isArray(g))return"["+g.map(Oy).join(",")+"]";if("symbol"===typeof g)return cg.printSymbol(g);try{return String(g)}catch(c){throw Error("Cannot print object: "+c.stack);}}function Py(g,c){c=void 0===c?{}:c;var h=g.value,f=g.isPromise,m=g.promisedValue,n=g.promiseStatus;return g.isError||h instanceof Error?(c=String(h),(m=h.stack||"")&&h.message!==h.stack&&(m=String(m),0===m.indexOf(c)&&(m=m.slice(c.length)),c+="\n"+m),c):f?(g=cg.string.print(n),c="pending"===n?void 0:Py({value:m},c),"Promise({status: "+
g+", "+(void 0===h?"":"value: "+c)+"})"):h instanceof Promise?'Promise({status: "unknown"})':c.inspect?cg.printInspectEvalValue(h,c.inspectDepth||2):String(h)}function hD(g,c){var h="";return Promise.resolve().then(function(){var f=c.lastIndexOf(".");0<=f?(h=c.slice(f+1),c=c.slice(0,f)):(h=c,c='(typeof window === "undefined" ? global : window)');return g(c)}).then(function(f){return{evalResult:f,startLetters:h,code:c}})}function iD(g,c,h){g=jh.getObjectForCompletion(g,c).then(function(f){var m=f.evalResult;
f={completions:jh.descriptorsOfObjAndProtoProperties(m&&m.isEvalResult?m.value:m),startLetters:f.startLetters,code:f.code};m&&m.isPromise&&("fulfilled"===m.promiseStatus?f.promiseResolvedCompletions=jh.descriptorsOfObjAndProtoProperties(m.promisedValue):"rejected"===m.promiseStatus&&(f.promiseRejectedCompletions=jh.descriptorsOfObjAndProtoProperties(m.promisedValue)));return f});"function"===typeof h&&g.then(function(f){return h(null,f)}).catch(function(f){return h(f)});return g}function Qy(g,c,h){c||
(c={type:"Identifier",name:"__rec"});h=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:h&&h.exclude||[],includeDecls:null,excludeDecls:h&&h.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:h&&h.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:h&&h.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(m){return m}},h);c=g;if(h.ignoreUndeclaredExcept){var f=
$b.topLevelDeclsAndRefs(g);h.excludeRefs=$b.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeRefs);h.excludeDecls=$b.arr.withoutAll(f.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeDecls)}h.excludeRefs=h.excludeRefs.concat(h.captureObj.name);h.excludeDecls=h.excludeDecls.concat(h.captureObj.name);h.recordDefRanges&&$b.computeDefRanges(c,h);h.excludeRefs=h.excludeRefs.concat($b.additionalIgnoredRefs(g,h));h.excludeDecls=h.excludeDecls.concat($b.additionalIgnoredDecls(g,
h));c=$b.fixDefaultAsyncFunctionExportForRegeneratorBug(c,h);h.es6ExportFuncId&&(h.excludeRefs.push(h.es6ExportFuncId),h.excludeRefs.push(h.es6ImportFuncId),c=$b.es6ModuleTransforms(c,h));c=$b.replaceRefs(c,h);c=$b.replaceVarDecls(c,h);c=$b.clearEmptyExports(c,h);c=$b.replaceClassDecls(c,h);c=$b.splitExportDeclarations(c,h);c=$b.insertCapturesForExportDeclarations(c,h);c=$b.insertCapturesForImportDeclarations(c,h);c=$b.insertDeclarationsForExports(c,h);c=$b.putFunctionDeclsInFront(c,h);return c=$b.transformImportMeta(c,
h)}function jD(g,c,h){h=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},h);c=$b.Path("body.0.expression").get(g);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+$b.stringify(g).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+$b.stringify(g).slice(0,
300)+"...");c=$b.Path("arguments.1.body.body").get(c);var f=$b.arr.last(c);if("ReturnStatement"!==f.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+$b.stringify(g).slice(0,300)+"...");var m=f.argument.properties.find(function(n){return"setters"===n.key.name});if(!m)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+$b.stringify(g).slice(0,300)+
"...");f=f.argument.properties.find(function(n){return"execute"===n.key.name});if(!f)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+$b.stringify(g).slice(0,300)+"...");m.value.elements.forEach(function(n){n.params[0]=$b.assign(n.params[0],$b.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(a){if("ExpressionStatement"!==a.type||"AssignmentExpression"!==a.expression.type||"Identifier"!==a.expression.left.type||
$b.arr.include(h.exclude,a.expression.left.name))return a;var d=a.expression.left;a=h.declarationWrapper?$b.declarationWrapperCall(h.declarationWrapper,null,$b.literal(d.name),$b.literal("var"),a.expression,h.captureObj,h):a.expression;return $b.exprStmt($b.assign($b.member(h.captureObj,d),a))})});(m=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.captureObj.name}))||(m=f.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.captureObj.name}));m&&($b.arr.remove(f.value.body.body,m),$b.arr.pushAt(c,m,c.length-1));h.sourceAccessorName&&((m=f.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.sourceAccessorName}))||(m=f.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.sourceAccessorName})),m&&($b.arr.remove(f.value.body.body,
m),$b.arr.pushAt(c,m,c.length-1)));return g}function Ry(g,c){var h=$b.stringify(c.captureObj),f=0;g.body=g.body.reduce(function(m,n){var a=[n],d="",k=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var b=n.specifiers.map(function(e){return[e.local.name,e.exported.name]});d="import { "+b.map(function(e){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;return e===l?l:e+" as "+l}).join(",")+" } from "+n.source.raw+";\n";k="export { "+b.map(function(e){e=$jscomp.makeIterator(e);e.next();
return e.next().value}).join(",")+" };\n"}else n.declaration?(b=n.declaration.declarations||[],b=b.map(function(e){return[e.id.name,e.id.name]})):b=n.specifiers.map(function(e){return[e.exported.name,e.local.name]});k&&(a=[],d+=k);a=a.concat($b.parse(d+b.map(function(e){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;return h+"."+e+" = "+l+";\n"+(h+"."+l+" = "+l+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(f++,a=a.concat($b.parse("\n       import * as __captured"+f+"__ from "+
n.source.raw+";\n       Object.assign("+h+", __captured"+f+"__);\n      ")));return m.concat(a)},[]);return g}function sK(g){(this||vt).__wrapped__=g;(this||vt).__actions__=[];(this||vt).__dir__=1;(this||vt).__filtered__=!1;(this||vt).__iteratees__=[];(this||vt).__takeCount__=4294967295;(this||vt).__views__=[]}function tK(g,c){(this||Sy).__wrapped__=g;(this||Sy).__actions__=[];(this||Sy).__chain__=!!c;(this||Sy).__index__=0;(this||Sy).__values__=void 0}function uK(g){if(X6(g)&&!Y6(g)&&!(g instanceof
Z6)){if(g instanceof FS)return g;if($6.call(g,"__wrapped__"))return a7(g)}return new FS(g)}function GS(g,c,h,f,m,n,a,d,k,b){function e(){for(var A=arguments.length,C=Array(A),D=A;D--;)C[D]=arguments[D];if(u)var L=b7(e),I=c7(C,L);f&&(C=d7(C,f,m,u));n&&(C=e7(C,n,a,u));A-=I;if(u&&A<b)return D=f7(C,L),g7(g,c,GS,e.placeholder,h,C,D,d,k,b-A);D=p?h:this||kD;L=q?D[g]:g;A=C.length;d?C=h7(C,d):w&&1<A&&C.reverse();l&&k<A&&(C.length=k);(this||kD)&&(this||kD)!==i7&&(this||kD)instanceof e&&(L=y||HS(L));return L.apply(D,
C)}var l=c&128,p=c&1,q=c&2,u=c&24,w=c&512,y=q?void 0:HS(g);return e}function lD(g){return g&&g.__esModule?g:{default:g}}function IS(g){if(Array.isArray(g)){for(var c=0,h=Array(g.length);c<g.length;c++)h[c]=g[c];return h}return Array.from(g)}function cw(g,c){c=void 0===c?"__lvVarRecorder":c;$g.ensureJSXPlugin();"function"===typeof g&&(g=String(g));if(lively.FreezerRuntime)return g.split(c+".").join("");"string"===typeof g&&g.endsWith(";")&&(g=g.slice(0,-1));g="string"===typeof g?$g.parseFunction(g):
g;g=$g.ReplaceVisitor.run(g,function(h){return"MemberExpression"===h.type&&"Identifier"===h.object.type&&h.object.name===c?h.property:h});return $g.stringify(g)}function dw(g){if("undefined"===typeof $g.babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),g;$g.ensureJSXPlugin();$g.ensureOptionalCatchBinding();$g.ensureImportMeta();g=$g.babel.transform(g,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator",
"transform-async-to-generator","syntax-object-rest-spread","transform-object-rest-spread"],code:!0,ast:!1}).code;g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");g.startsWith("(function")&&g.endsWith(");")&&(g=g.slice(1,-2));return g}function pr(g,c){g=Cf.transform.transformSingleExpression(g);g=Cf.parse(g,{withComments:!0});c=Cf.processInlineCodeTransformOptions(g,c);var h=Cf.query.topLevelDeclsAndRefs(g),f=h.classDecls,m=h.funcDecls;h=h.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=
c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(m)).forEach(function(k){return k["x-lively-object-meta"]=Object.assign({},n,{start:k.start,end:k.end})});h.forEach(function(k){return k.declarations.forEach(function(b){return b["x-lively-object-meta"]=Object.assign({},n,{start:b.start,end:b.end})})});g=Cf.transform.objectSpreadTransform(g);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(f=Cf.getGlobal(),
c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?Cf.getGlobal():Cf.Path(c.topLevelVarRecorderName).get(f));if(c.topLevelVarRecorder){f=(c.dontTransform||[]).concat(["arguments"]);m=c.recordGlobals?null:Cf.arr.withoutAll(Object.keys(c.topLevelVarRecorder),f);h=Cf.id(c.varRecorderName||"__lvVarRecorder");if(c.declarationWrapperName||"function"===typeof c.declarationCallback){var a=c.declarationWrapperName||Cf.defaultDeclarationWrapperName;c.declarationWrapper=Cf.member(Cf.id(c.varRecorderName||
"__lvVarRecorder"),Cf.literal(a),!0);c.declarationCallback&&(c.topLevelVarRecorder[a]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)var d={currentModuleAccessor:c.currentModuleAccessor,classHolder:h,functionNode:Cf.member(h,Cf.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};g=Cf.capturing.rewriteToCaptureTopLevelVariables(g,h,{es6ImportFuncId:c.es6ImportFuncId,
es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:m,exclude:f,declarationWrapper:c.declarationWrapper||void 0,classToFunction:d,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(g=Cf.transform.wrapInStartEndCall(g,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));d=Cf.stringify(g);c.jsx&&(d=Cf.es5Transpilation(d));c.sourceURL&&(d+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return d}function wt(g,c){c=
void 0===c?{}:c;if(!c.topLevelVarRecorder)return g;if("function"===typeof c.declarationCallback||c.declarationWrapperName){var h=c.declarationWrapperName||Cf.defaultDeclarationWrapperName;c.declarationWrapper=Cf.member(Cf.id(c.varRecorderName),Cf.literal(h),!0);c.declarationCallback&&(c.topLevelVarRecorder[h]=c.declarationCallback)}g=Cf.parse(g);h=(c.dontTransform||[]).concat(["arguments"]);c.recordGlobals||Cf.arr.withoutAll(Object.keys(c.topLevelVarRecorder),h);c=Cf.capturing.rewriteToRegisterModuleToCaptureSetters(g,
Cf.id(c.varRecorderName||"__lvVarRecorder"),Object.assign({exclude:h},c));return Cf.stringify(c)}function Ty(g,c,h){"function"===typeof c&&2===arguments.length&&(h=c,c=null);var f=new Vf.EvalResult,m=!1,n=!1;c=Vf._normalizeEvalOptions(c);var a=Vf.promise.deferred(),d=c.topLevelVarRecorder||Vf.getGlobal(),k=g;c.wrapInStartEndCall&&(d[Vf.startEvalFunctionName]&&console.warn(f.addWarning("startEvalFunctionName "+Vf.startEvalFunctionName+" already exists in recorder!")),d[Vf.endEvalFunctionName]&&console.warn(f.addWarning("endEvalFunctionName "+
Vf.endEvalFunctionName+" already exists in recorder!")),d[Vf.startEvalFunctionName]=function(){if(m)console.warn(f.addWarning("onEvalStartCalled multiple times!"));else if(m=!0,"function"===typeof c.onStartEval)c.onStartEval()},d[Vf.endEvalFunctionName]=function(l,p){n?console.warn(f.addWarning("onEvalEndCalled multiple times!")):(n=!0,Vf.finishEval(l,p,f,c,d,a,h))});try{g=Vf.evalCodeTransform(g,c),c.header&&(g=c.header+g),c.footer&&(g+=c.footer),c.transpiler&&(g=c.transpiler(g,c.transpilerOptions))}catch(l){console.warn(f.addWarning("lively.vm evalCodeTransform not working: "+
l))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=g);var b=Vf._eval.call(c.context,g,c.topLevelVarRecorder,c.originalSource||k)}catch(l){var e=l}if(c.wrapInStartEndCall){if(e&&!n)d[Vf.endEvalFunctionName](e,void 0)}else Vf.finishEval(e,e||b,f,c,d,a,h);return c.sync?f:a.promise}function mD(g,c){c=Object.assign(c||{},{sync:!0});return Vf.runEval(g,c)}function nD(g){if(void 0===g){if("undefined"===typeof System)return null;g=System}var c=g.get("@lively-env");c||g.set("@lively-env",
g.newModule({options:{}}));c=c.options;if(!c)throw Error("@lively-env registered read-only");c.emitter||Object.assign(c,{emitter:g["__lively.notifications_emitter"]||(g["__lively.notifications_emitter"]=ew({},{maxListenerLimit:1E4})),notifications:g["__lively.notifications_notifications"]||(g["__lively.notifications_notifications"]=[])});return{emitter:c.emitter,notifications:c.notifications}}function Uy(g,c,h){nD(h).emitter.on(g,c);return c}function bq(g,c,h,f){c=void 0===c?{}:c;h=void 0===h?Date.now():
h;c=Object.assign({type:g,time:h},c);h=nD(f);f=h.emitter;h=h.notifications;f.emit(g,c);f.isLogging&&(g=c.type+" ".repeat(Math.max(0,32-c.type.length)),console.log(g+" "+x(c,{maxDepth:2})));f.isRecording&&(h.push(c),h.limit&&h.splice(0,h.length-h.limit));return c}function vK(g,c,h){nD(h).emitter.removeListener(g,c);return c}function xt(g,c,h){h=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},h);g.debug&&console.log("[lively.module] runEval: "+
c.slice(0,100).replace(/\n/mg," ")+"...");var f=h,m=f.format,n=f.targetModule;n=g.decanonicalize(n||"*scratch*",f.parentModule);h.targetModule=n;m&&((f=g.getConfig().meta[n])||(f={}),f[n]||(f[n]={}),f[n].format||(f[n].format=m,g.config(f)));m=g.get("@lively-env").moduleEnv(n);f=m.recorder;var a=m.recorderName,d=m.dontTransform,k=Vg.getEs6Transpiler(g,h,m),b="var _moduleExport = "+a+"._moduleExport,\n    _moduleImport = "+(a+"._moduleImport;\n");h=Object.assign({waitForPromise:!0,sync:!1,evalId:h.evalId||
m.nextEvalId(),sourceAccessorName:(h.hasOwnProperty("embedOriginalCode")?h.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},h,{header:b,recordGlobals:!0,dontTransform:d,varRecorderName:a,topLevelVarRecorder:f,sourceURL:h.sourceURL||h.targetModule,context:h.context||f,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:k,declarationWrapperName:m.varDefinitionCallbackName,currentModuleAccessor:Vg.funcCall(Vg.member(Vg.funcCall(Vg.member(Vg.member("__lvVarRecorder",
"System"),"get"),Vg.literal("@lively-env")),"moduleEnv"),Vg.literal(h.targetModule))});if(!h.sync&&!h.importsEnsured&&Vg.hasUnimportedImports(g,c,n))return Vg.ensureImportsAreImported(g,c,n).catch(function(e){return null}).then(function(e){return xt(g,e,Object.assign({},h,{importsEnsured:!0}))});if(!m.record()){if(!h.sync&&!h._moduleImported)return g.import(n).catch(function(e){return null}).then(function(){return xt(g,c,Object.assign({},h,{_moduleImported:!0}))});m.ensureRecord()}if(h.es6Transpile&&
h.transpiler instanceof Promise)if(h.sync||h._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),h.transpiler=null;else return h.transpiler.catch(function(e){return console.error(e)}).then(function(e){return xt(g,c,Object.assign({},h,{transpiler:e,_transpilerLoaded:!0}))});g.debug&&console.log("[lively.module] runEval in module "+n+" started");Vg.emit("lively.vm/doitrequest",{code:c,waitForPromise:h.waitForPromise,
targetModule:h.targetModule},Date.now(),g);g.get("@lively-env").evaluationStart(n);n=Vg.vmRunEval(c,h);return h.sync?Vg.evalEnd(g,c,h,n):Promise.resolve(n).then(function(e){return Vg.evalEnd(g,c,h,e)})}function fw(g,c){var h=c=Object.assign({format:"esm",System:null,targetModule:null},c),f=h.format,m=h.System;h=h.targetModule;m||"undefined"===typeof System||(m=System);return!m&&h?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):h&&["esm","es6","register"].includes(f)?
Yi.esmEval.runEval(m,g,c):Yi.globalEval.runEval(g,c)}function Vy(g,c){return Yi.globalEval.syncEval(g,c)}function wK(g){return we.withSuperclasses(g).slice(1)}function oD(g){var c=[];do c.push(g),g=g[we.superclassSymbol];while(g&&g.name);return c.map(function(h){return h.name}).join("->")}function pD(g){for(var c=[];g;)c.push(g),g=g[we.superclassSymbol];return c}function xK(g,c){do if(g===c)return!0;while(g=g[we.superclassSymbol]);return!1}function yK(g,c){if(g.constructor===c&&g.__proto__===c.prototype)return g;
g.constructor=c;g.__proto__=c.prototype;return g}function zK(g){return g&&"function"===typeof g}function AK(g){var c=we.RuntimeSourceDescriptor.for(g),h=c.ast;c=c.type;if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return we.Path("body.body").get(h).map(function(f){var m=f.static,n=f.kind;f=f.key;var a=f.value;f=f.name||a;a=we.isOverridden(g,f);var d=m?g:g.prototype;d="get"===n?d.__lookupGetter__(f):"set"===n?d.__lookupSetter__(f):d[f];return{static:m,name:f,value:d,kind:n,owner:g,
overridden:a}})}function BK(g){return we.runtimeNonStaticMembers(g).concat(we.runtimeNonStaticMembers(g))}function CK(g){var c=we.obj.getOwnPropertyDescriptors(g);return we.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(h){var f=c[h],m="function"===typeof f.value?"method":"get"in f?"get":"set"in f?"set":"unknown";return{static:!0,name:h,value:"method"===m?f.value:"get"===m?f.get:"set"===m?f.set:null,kind:m,owner:g}})}function DK(g){return we.arr.uniq(we.arr.flatmap(we.arr.without(we.withSuperclasses(g),
Object),function(c){return we.runtimeStaticClassMembers(c)}))}function qD(g){var c=xh.propertiesAndSettingsInHierarchyOf(g),h=c.properties;c=c.propertySettings;g[xh.propertiesAndSettingsCacheSym]={properties:h,order:xh.obj.sortKeysWithBeforeAndAfterConstraints(h),propertySettings:c,classHierarchy:xh.getClassHierarchy(g)};h&&"object"===typeof h?xh.prepareClassForProperties(g,c,h):console.warn("Class "+g.name+" indicates it has managed properties but its properties accessor ("+(xh.defaultPropertiesKey+
") does not return a valid property descriptor map"))}function gw(g,c){c!==g.constructor&&(g.constructor=c,bf.setPrototypeOf(g,c.prototype))}function rD(g,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var h=g&&g[bf.superclassSymbol];h&&h===c||(bf.ensureInitializeStub(c),g[bf.superclassSymbol]=c,bf.setPrototypeOf(g.prototype,c.prototype),c!==Object&&bf.setPrototypeOf(g,c));return c}function Sb(g,c,h,f,m,n,a){h=void 0===h?[]:h;f=void 0===f?[]:f;m=void 0===m?{}:m;var d=g.name,k=d&&m.hasOwnProperty(d)&&
m[d];m=k&&k[bf.superclassSymbol];k&&"function"===typeof k&&m||(k=g);bf.setSuperclass(k,c);bf.installMethods(k,h,f);k[bf.objMetaSymbol]=a;n&&(g=n.package(),a=k[bf.moduleMetaSymbol],m=Date.now(),k[bf.moduleMetaSymbol]={package:g?{name:g.name,version:g.version}:{},pathInPackage:g?n.pathInPackage():n.id,lastChange:a&&a.lastChange&&m<=a.lastChange?a.lastChange+1:m,lastSuperclassChange:0},c&&c.referencedAs&&(k.hasOwnProperty(bf.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(k[bf.moduleSubscribeToToplevelChangesSym]),
k[bf.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(b,e){if(b===c.referencedAs){b=e&&e[bf.moduleMetaSymbol];var l=k[bf.moduleMetaSymbol];if(b){if(b.lastChange===l.lastSuperclassChange)return;l.lastSuperclassChange=b.lastChange}bf.setSuperclass(k,e);bf.installMethods(k,h,f);bf.prepareClassForManagedPropertiesAfterCreation(k)}})));k.toString=function(){var b=String(this.prototype[bf.initializeSymbol]).match(bf.constructorArgMatcher),e=this[bf.superclassSymbol];
return"class "+this.name+" "+(e?"extends "+e.name:"")+" {\n  constructor"+((b?b[0]:"()")+" { /*...*/ }\n}")};bf.prepareClassForManagedPropertiesAfterCreation(k);return k}function sD(g){g=new bd.Color(g);return{red:g.red()/255,green:g.green()/255,blue:g.blue()/255,alpha:g.alpha()}}function EK(g){return function(c,h,f,m){null==f&&(f=g);null==m&&(m=f);null==h&&(h=oh.unit(c));var n=oh.unit(c);if(n===h)return c;var a=oh.unitLess(c);"px"!==oh.unit(f)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");
"px"!==oh.unit(m)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)a=oh.unitLess(c)*oh.unitLess(f);else if("rem"===n)a=oh.unitLess(c)*oh.unitLess(g);else if("ex"===n)a=oh.unitLess(c)*oh.unitLess(f)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):console.warn(n+" is an unknown or unsupported length unit; Returning original value."),c;f=a;if("px"!==h)if("em"===h)f=
a/oh.unitLess(m);else if("rem"===h)f=a/oh.unitLess(g);else if("ex"===h)f=a/oh.unitLess(m)/2;else return"ch"===h||"vw"===h||"vh"===h||"vmin"===h?console.warn(h+" units can't be reliably converted; Returning original value."):console.warn(h+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(f.toFixed(5))+h}}function tD(g){return Number(oh.parseCssLength(g,"px").slice(0,-2))}function zk(g,c,h,f){if("number"===typeof g){var m=g;g=c;c=f}else m=g.x,g=g.y,h=c.x-m,
c=c.y-g;return new ld.Rectangle(m,g,h,c)}function kh(g,c){return new ld.Point(g,c)}function Un(g){return g.constructor[Xh.classNameProp]||g.constructor.name}function qr(g){if(g&&g.constructor){var c=Xh.getClassName(g);if(c){if(g=g.constructor[Xh.moduleMetaInClassProp],"Object"!==c||g)return g&&(delete g.lastChange,delete g.lastSuperclassChange),{className:c,module:g}}else console.warn("Cannot serialize class info of anonymous class of instance "+g)}}function Ro(g){var c=g.module;if(c){var h=c.pathInPackage;
if(c.package&&c.package.name&&"no group"!==c.package.name){var f=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));h=Xh.string.joinPath(f,h)}f=System.get("@lively-env");if(c=f.moduleEnv(h)||f.moduleEnv(c.pathInPackage))return c.recorder[g.className];console.warn("Trying to deserialize instance of class "+g.className+" but the module "+h+" is not yet loaded")}return System.global[g.className]}function Vn(g,c,h){c=void 0===c?function(b){return b}:c;h=void 0===h?{}:h;var f=new gh.ExpressionSerializer,
m=h,n=h.isMorph?h.propertiesAndPropertySettings().order:[];n=n.length?n:gh.obj.keys(g);for(var a=$jscomp.makeIterator(n),d=a.next();!d.done;d=a.next()){d=d.value;var k=g[d];if("_env"===d||"env"===d||"__connections__"===d||"__refs__"===d)return;gh.obj.isString(k)&&f.isSerializedExpression(k)&&(k=f.deserializeExpr(k));["borderColor","borderWidth","borderStyle","borderRadius"].includes(d)&&(k=Vn(k,c));k&&k._id&&(k=c(Vn(k,c)));m[d]=k}g.submorphs&&(m.submorphs=g.submorphs.map(function(b){return Vn(b,c)}));
if(h)for(f=$jscomp.makeIterator(n.filter(function(b){return!!g[b]})),d=f.next();!d.done;d=f.next())n=d.value,h[n]=m[n];if(g.__refs__)for(h=$jscomp.makeIterator(g.__refs__),f=h.next();!f.done;f=h.next())n=$jscomp.makeIterator(f.value),f=n.next().value,n=n.next().value,gh.Path(f).set(m,gh.Path(n).get(m));if(g.__connections__)for(h=$jscomp.makeIterator(g.__connections__),f=h.next();!f.done;f=h.next())f=f.value,gh.connect(gh.Path(f.pathToSource).get(m),f.sourceAttrName,gh.Path(f.pathToTarget).get(m),
f.targetMethodName,Object.assign({},gh.obj.select(f,["garbageCollect","converterString","updaterString","varMapping"])));return m}function xm(g,c){var h=c=void 0===c?{}:c,f=void 0===h.keepFunctions?!0:h.keepFunctions,m=void 0===h.skipAttributes?[]:h.skipAttributes,n=void 0===h.keepConnections?!0:h.keepConnections,a=void 0===h.asExpression?!1:h.asExpression;c=void 0===h.root?!0:h.root;var d=void 0===h.path?"":h.path,k=void 0===h.skipUnchangedFromDefault?!1:h.skipUnchangedFromDefault,b=void 0===h.nestedExpressions?
{}:h.nestedExpressions,e=void 0===h.objToPath?new WeakMap:h.objToPath,l=void 0===h.objRefs?[]:h.objRefs;h=void 0===h.connections?[]:h.connections;var p={skipAttributes:m,skipUnchangedFromDefault:k,root:!1,keepFunctions:f,asExpression:a,nestedExpressions:b,connections:h,objRefs:l,objToPath:e,keepConnections:n};if(e.has(g))return l.push([d,e.get(g)]),null;e.set(g,d);a&&(f=!1);var q=new gh.ExpressionSerializer,u=function(Fa,F){try{if(F=F.__serialize__(),a){var Y=gh.string.newUUID();b[Y]=F;F=Y}else F=
F.__expr__?q.exprStringEncode(F):F}catch(Q){console.log("[export to JSON] failed converting "+Fa+" to serialized expression")}return F},w={};e.set(g,d);n&&g.attributeConnections&&h.push.apply(h,$jscomp.arrayFromIterable(g.attributeConnections));g.isText&&(w.textAndAttributes=g.textAndAttributes.map(function(Fa,F){return Fa&&Fa.isMorph?xm(Fa,Object.assign({},p,{path:d?d+".textAndAttributes."+F:"textAndAttributes."+F})):Fa}));g.submorphs&&0<g.submorphs.length&&(w.submorphs=g.submorphs.map(function(Fa,
F){return xm(Fa,Object.assign({},p,{path:d?d+".submorphs."+F:"submorphs."+F}))}).filter(Boolean));var y={};for(V in g.spec(k)){y.$jscomp$loop$prop$name$2697=V;k=g[y.$jscomp$loop$prop$name$2697];!k||"object"!==typeof k||Array.isArray(k)||k.isMorph||e.set(k,d?d+"."+y.$jscomp$loop$prop$name$2697:y.$jscomp$loop$prop$name$2697);if("submorphs"!==y.$jscomp$loop$prop$name$2697&&!m.includes(y.$jscomp$loop$prop$name$2697))if("metadata"===y.$jscomp$loop$prop$name$2697&&gh.Path("commit.__serialize__").get(k))w[y.$jscomp$loop$prop$name$2697]=
Object.assign({},k,{commit:u(y.$jscomp$loop$prop$name$2697+".commit",k.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(y.$jscomp$loop$prop$name$2697)){for(var A={},C=$jscomp.makeIterator(["top","left","right","bottom"]),D=C.next();!D.done;D=C.next()){D=D.value;var L=k[D];if(L&&L.__serialize__&&(L=L.__serialize__())&&L.__expr__)if(a){var I=gh.string.newUUID();b[I]=L;L=I}else L=q.exprStringEncode(L);A[D]=L}w[y.$jscomp$loop$prop$name$2697]=A}else if(k&&k.isMorph)w[y.$jscomp$loop$prop$name$2697]=
xm(k,Object.assign({},p,{path:d?d+"."+y.$jscomp$loop$prop$name$2697:y.$jscomp$loop$prop$name$2697}));else if(k&&k.__serialize__)w[y.$jscomp$loop$prop$name$2697]=u(y.$jscomp$loop$prop$name$2697,k);else if(Array.isArray(k))w[y.$jscomp$loop$prop$name$2697]=k.map(function(Fa){return function(F,Y){return F&&F.isMorph?xm(F,Object.assign({},p,{path:d?d+"."+Fa.$jscomp$loop$prop$name$2697+"."+Y:Fa.$jscomp$loop$prop$name$2697+"."+Y})):F&&F.__serialize__?u(Fa.$jscomp$loop$prop$name$2697+"."+Y,F):F}}(y));else{if(k&&
!gh.obj.isString(k)&&!gh.obj.isNumber(k)&&0<gh.properties.allOwnPropertiesOrFunctions(k).length)for(var S in k)k[S]&&k[S].isMorph&&(k[S]=xm(k[S],Object.assign({},p,{path:d?d+"."+y.$jscomp$loop$prop$name$2697+"."+S:y.$jscomp$loop$prop$name$2697+"."+S})));w[y.$jscomp$loop$prop$name$2697]=k}y={$jscomp$loop$prop$name$2697:y.$jscomp$loop$prop$name$2697}}g.isText&&delete w.textString;a||(w._id=g._id);f?(w.type=g.constructor,Object.keys(g).forEach(function(Fa){return"function"===typeof g[Fa]&&(w[Fa]=g[Fa])})):
(w.styleSheets&&(w.styleSheets=[]),w.type=gh.getSerializableClassMeta(g));if(n&&c){var V=[];S=$jscomp.makeIterator(h);for(f=S.next();!f.done;f=S.next())C=f=f.value,m=C.sourceAttrName,n=C.targetMethodName,A=C.targetObj,h=C.updaterString,y=C.converterString,k=C.garbageCollect,C=e.get(C.sourceObj),A=e.get(A),"string"===typeof C&&"string"===typeof A?V.push({pathToSource:C,pathToTarget:A,garbageCollect:k,updaterString:h,converterString:y,sourceAttrName:m,targetMethodName:n,varMapping:{properties:gh.properties}}):
console.log("skipping:",f);a||(w.__connections__=V)}if(a&&c){c="morph("+gh.obj.inspect(w)+")";var ba={"lively.morphic":["morph"]},ua;for(ua in b)c=c.replace('"'+ua+'"',b[ua].__expr__),Object.entries(b[ua].bindings||{}).forEach(function(Fa){var F=$jscomp.makeIterator(Fa);Fa=F.next().value;F=F.next().value;ba[Fa]=ba[Fa]?gh.arr.uniq([].concat($jscomp.arrayFromIterable(ba[Fa]),$jscomp.arrayFromIterable(F))):F});return{__expr__:c,bindings:ba}}c&&(w.__refs__=l);return w}function Mj(g,c,h,f,m){"function"!==
typeof h||"undefined"!==typeof f&&"object"!==typeof f||(m=f,f="call",m||(m={}),m.updater||(m.updater=function(k,b){return k(null,b)}));var n=g.getConnectionPoints&&g.getConnectionPoints()||g.connections,a=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&lively.Class.forName(n.connectionClassType)||Of.AttributeConnection;"function"===typeof m&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),
m={converter:m});n&&(m=Of.obj.merge(n,m));a=new a(g,c,h,f,m);var d=a.getExistingConnection();if(d)return d.resetSpec(),d.init(g,c,h,f,m),d;m=a.connect();if("function"===typeof g.onConnect)g.onConnect(c,h,f);n&&n.updateOnConnect&&a.update(g[c]);return m}function So(g,c,h,f){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f||(f="call");if(g.attributeConnections){for(var m=$jscomp.makeIterator(g.attributeConnections.slice()),n=m.next();!n.done;n=m.next())n=n.value,n.getSourceAttrName()==
c&&n.getTargetObj()===h&&n.getTargetMethodName()==f&&n.disconnect();if("function"===typeof g.onDisconnect)g.onDisconnect(c,h,f)}}function hw(g){for(var c;g.attributeConnections&&(c=g.attributeConnections[0]);)c.disconnect()}function cq(g,c,h,f,m){"function"!==typeof h||"undefined"!==typeof f&&"object"!==typeof f?m=m||{}:(m=f,f="call",m=m||{},m.updater||(m.updater=function(n,a){return n(null,a)}));m=m||{};m.removeAfterUpdate=!0;return Of.connect(g,c,h,f,m)}function Ak(g,c,h){var f=g.attributeConnections;
if(f){g=g[c];for(var m=0,n=f.length;m<n;m++){var a=f[m];a.getSourceAttrName()==c&&a.update(h,g)}}}function uD(g,c,h,f){if(null!=g[c])h[f](g[c]);else Of.connect(g,c,h,f,{removeAfterUpdate:!0})}function vD(g,c,h,f){for(var m={key:c.pop(),whenDefined:function(n){Of.callWhenNotNull(n,this.key,h,f)}};0<c.length;)m={key:c.pop(),next:m,whenDefined:function(n){Of.callWhenNotNull(n,this.key,this.next,"whenDefined")}};m.whenDefined(g)}function rr(g,c){var h=!1;c||"function"!==typeof g||(c=g,h=!0);if(h){g=Of.AttributeConnection.prototype;
g.isActive||(g.isActive=0);g.isActive++;try{var f=c()}finally{g.isActive--,0>=g.isActive&&delete g.isActive}}else{h=g.sourceObj;var m=g.sourceAttribute,n=g.targetObj,a=g.targetAttribute;g=n&&a?function(d){return d.getSourceAttrName()===m&&n===d.getTargetObj()&&a===d.getTargetMethodName()}:function(d){return d.getSourceAttrName()===m};(g=h.attributeConnections&&h.attributeConnections.filter(g))&&Of.arr.invoke(g,"activate");try{f=c()}finally{g&&Of.arr.invoke(g,"deactivate")}}return f}function wD(g){if(null==
g)return!0;g=typeof g;return"boolean"===g||"number"===g||"string"===g?!0:!1}function FK(g){var c={},h;for(h in g)c[h]=Me.referencesOfId(g,h);return c}function xD(g){return g&&g.__ref__}function GK(g,c){var h={};return Me.referencesOfId((h[g.id]=g.currentSnapshot,h),g.id,c)}function yD(g,c,h){g=g[c];c=[];for(var f in g.props){var m=g.props[f]||{},n=m.value;m=m.verbatim;Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Me.referencesInArray(n,h&&f))):!m&&n&&Me.isReference(n)&&c.push(h?{key:f,
id:n.id}:n.id)}if(g.hasOwnProperty("entries"))for(f=0;f<g.entries.length;f++)n=g.entries[f],Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Me.referencesInArray(n,h&&n))):n&&Me.isReference(n)&&c.push(h?{key:n,id:n.id}:n.id);return c}function JS(g,c){for(var h=[],f=0;f<g.length;f++){var m=g[f];Array.isArray(m)?h.push.apply(h,$jscomp.arrayFromIterable(JS(m,c?c+"["+f+"]":void 0))):m&&Me.isReference(m)&&h.push(c?{key:c+"["+f+"]",id:m.id}:m.id)}return h}function zD(g,c){return(g[c][Me.ClassHelper.classMetaForSerializationProp]||
{}).module||{}}function HK(g,c){return Me.referencesOfId(g,c).map(function(h){return h+":"+Me.classNameOfId(g,h)})}function AD(g,c){return(g[c][Me.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function IK(g,c,h,f){function m(u,w,y){if(!e)if(50<y)alert(""+k);else if(u===w)k.push(u),e=k.slice();else if(!b[u]){b[u]=!0;k.push(u);u=Me.referencesOfId(g,u);for(var A=0;A<u.length;A++)m(u[A],w,y+1);k.pop()}}f=void 0===f?{}:f;var n=void 0===f.showPath?!0:f.showPath,a=f.hasOwnProperty("showClassNames")?
f.showClassNames:!n,d=f.hasOwnProperty("showPropNames")?f.showPropNames:n;f=f.hasOwnProperty("hideId")?f.hideId:n;var k=[],b={},e;m(c,h,0);if(!e)return null;if(!a&&!d)return e;c=[];for(h=0;h<e.length-1;h++){var l=e[h],p=e[h+1],q=[];f||q.push(l);a&&q.push((g[l][Me.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");d&&(l=Me.referencesOfId(g,l,!0).find(function(u){return u.id===p})||{key:"????"},q.push(l.key));c.push(q.join(":"))}n&&(c="."+c.join("."));return c}function JK(g,c,h){h=
h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Me.Path(h).parts();var f=g[c];for(c=0;;){if(1E3<c++)throw"stop";var m=h.shift();if(!m)break;if(!f.props||!f.props[m])throw Error("Property "+m+" not found for ref "+JSON.stringify(f));f=f.props[m].value;if(!f)throw Error("Property "+m+" has no value");for(;Array.isArray(f);)f=f[h.shift()];if(!f||!f.__ref__)return f;f=g[f.id]}return f}function KK(g,c,h,f){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Me.Path(h).parts();g=g[c];c=
h.shift();if(!g.props||!g.props[c])throw Error("Property "+c+" not found for ref "+JSON.stringify(g));var m=(g.props[c]||{}).value;if(!m)throw Error("Property "+c+" has no value");if(h.length){var n=Me.Path(h).get(m);Me.Path(h).set(m,f(g,c,n))}else g.props[c].value=f(g,c,m)}function dq(g,c){var h=Me.arr.withoutAll(Object.keys(c),g),f=h.filter(function(n){if("AttributeConnection"===Me.classNameOfId(c,n))return c[n].props.garbageCollect.value}),m=Me.referenceGraph(Me.obj.dissoc(Object.assign({},c),
f));g.forEach(function(n){n=Me.graph.subgraphReachableBy(m,n);for(var a=h.length;a--;)h[a]in n&&h.splice(a,1)});h.forEach(function(n){return delete c[n]});return h}function BD(g){var c={},h;for(h in g){c.$jscomp$loop$prop$id$1008$2703=h;if("AttributeConnection"===Me.classNameOfId(g,c.$jscomp$loop$prop$id$1008$2703)){var f=g[c.$jscomp$loop$prop$id$1008$2703];if(!g[Me.Path("props.targetObj.value.id").get(f)]){if(f=g[Me.Path("props.sourceObj.value.id").get(f)])f.props.attributeConnections.value=f.props.attributeConnections.value.filter(function(m){return function(n){return n.id!=
m.$jscomp$loop$prop$id$1008$2703}}(c));delete g[c.$jscomp$loop$prop$id$1008$2703]}}c={$jscomp$loop$prop$id$1008$2703:c.$jscomp$loop$prop$id$1008$2703}}}function eq(g,c){c=void 0===c?Me.defaultExprSerializer:c;g.snapshot&&(g=g.snapshot);for(var h=[],f=0,m=Object.keys(g);f<m.length;f++){var n=g[m[f]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&h.push.apply(h,$jscomp.arrayFromIterable(n));else{var a=Me.ClassHelper.sourceModulesInObjRef(n);a&&a.length&&h.push.apply(h,$jscomp.arrayFromIterable(a.map(function(b){return(b.package&&
b.package.name||"")+"/"+b.pathInPackage})));if(n.props)for(var d in n.props){a=n.props[d].value;if("string"===typeof a){var k=c.requiredModulesOf__expr__(a);k&&h.push.apply(h,$jscomp.arrayFromIterable(k))}Me.obj.isArray(a)&&a.forEach(function(b){"string"===typeof b&&(b=c.requiredModulesOf__expr__(b))&&h.push.apply(h,$jscomp.arrayFromIterable(b))})}}}return h=Me.arr.uniq(h)}function LK(){throw Error("setTimeout has not been defined");}function MK(){throw Error("clearTimeout has not been defined");
}function KS(g){if(sr===setTimeout)return setTimeout(g,0);if((sr===LK||!sr)&&setTimeout)return sr=setTimeout,setTimeout(g,0);try{return sr(g,0)}catch(c){try{return sr.call(null,g,0)}catch(h){return sr.call(this||iw,g,0)}}}function j7(){jw&&yt&&(jw=!1,yt.length?fq=yt.concat(fq):CD=-1,fq.length&&LS())}function LS(){if(!jw){var g=KS(j7);jw=!0;for(var c=fq.length;c;){yt=fq;for(fq=[];++CD<c;)yt&&yt[CD].run();CD=-1;c=fq.length}yt=null;jw=!1;(function(h){if(tr===clearTimeout)return clearTimeout(h);if((tr===
MK||!tr)&&clearTimeout)return tr=clearTimeout,clearTimeout(h);try{tr(h)}catch(f){try{return tr.call(null,h)}catch(m){return tr.call(this||iw,h)}}})(g)}}function MS(g,c){(this||iw).fun=g;(this||iw).array=c}function gq(){}function DD(){if(NS)return OS;NS=!0;return OS={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function ED(){if(PS)return QS;PS=!0;var g=yh;return QS="object"===typeof g&&g.env&&g.env.NODE_DEBUG&&/\bsemver\b/i.test(g.env.NODE_DEBUG)?
function(c){for(var h=[],f=0;f<arguments.length;++f)h[f-0]=arguments[f];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(h)))}:function(){}}function kw(){if(RS)return To;RS=!0;var g=DD().MAX_SAFE_COMPONENT_LENGTH,c=ED();To=To={};var h=To.re=[],f=To.src=[],m=To.t={},n=0,a=function(d,k,b){var e=n++;c(e,k);m[d]=e;f[e]=k;h[e]=new RegExp(k,b?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*");a("NUMERICIDENTIFIERLOOSE","[0-9]+");a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");
a("MAINVERSION","("+f[m.NUMERICIDENTIFIER]+")\\.("+(f[m.NUMERICIDENTIFIER]+")\\.(")+(f[m.NUMERICIDENTIFIER]+")"));a("MAINVERSIONLOOSE","("+f[m.NUMERICIDENTIFIERLOOSE]+")\\.("+(f[m.NUMERICIDENTIFIERLOOSE]+")\\.(")+(f[m.NUMERICIDENTIFIERLOOSE]+")"));a("PRERELEASEIDENTIFIER","(?:"+f[m.NUMERICIDENTIFIER]+"|"+f[m.NONNUMERICIDENTIFIER]+")");a("PRERELEASEIDENTIFIERLOOSE","(?:"+f[m.NUMERICIDENTIFIERLOOSE]+"|"+f[m.NONNUMERICIDENTIFIER]+")");a("PRERELEASE","(?:-("+f[m.PRERELEASEIDENTIFIER]+"(?:\\."+f[m.PRERELEASEIDENTIFIER]+
")*))");a("PRERELEASELOOSE","(?:-?("+f[m.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+f[m.PRERELEASEIDENTIFIERLOOSE]+")*))");a("BUILDIDENTIFIER","[0-9A-Za-z-]+");a("BUILD","(?:\\+("+f[m.BUILDIDENTIFIER]+"(?:\\."+f[m.BUILDIDENTIFIER]+")*))");a("FULLPLAIN","v?"+f[m.MAINVERSION]+f[m.PRERELEASE]+"?"+f[m.BUILD]+"?");a("FULL","^"+f[m.FULLPLAIN]+"$");a("LOOSEPLAIN","[v=\\s]*"+f[m.MAINVERSIONLOOSE]+f[m.PRERELEASELOOSE]+"?"+f[m.BUILD]+"?");a("LOOSE","^"+f[m.LOOSEPLAIN]+"$");a("GTLT","((?:<|>)?=?)");a("XRANGEIDENTIFIERLOOSE",
f[m.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");a("XRANGEIDENTIFIER",f[m.NUMERICIDENTIFIER]+"|x|X|\\*");a("XRANGEPLAIN","[v=\\s]*("+f[m.XRANGEIDENTIFIER]+")(?:\\.("+(f[m.XRANGEIDENTIFIER]+")(?:\\.(")+(f[m.XRANGEIDENTIFIER]+")(?:")+(f[m.PRERELEASE]+")?"+f[m.BUILD]+"?)?)?"));a("XRANGEPLAINLOOSE","[v=\\s]*("+f[m.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(f[m.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+(f[m.XRANGEIDENTIFIERLOOSE]+")(?:")+(f[m.PRERELEASELOOSE]+")?"+f[m.BUILD]+"?)?)?"));a("XRANGE","^"+f[m.GTLT]+"\\s*"+f[m.XRANGEPLAIN]+
"$");a("XRANGELOOSE","^"+f[m.GTLT]+"\\s*"+f[m.XRANGEPLAINLOOSE]+"$");a("COERCE","(^|[^\\d])(\\d{1,"+g+"})(?:\\.(\\d{1,"+(g+"}))?(?:\\.(\\d{1,")+(g+"}))?(?:$|[^\\d])"));a("COERCERTL",f[m.COERCE],!0);a("LONETILDE","(?:~>?)");a("TILDETRIM","(\\s*)"+f[m.LONETILDE]+"\\s+",!0);To.tildeTrimReplace="$1~";a("TILDE","^"+f[m.LONETILDE]+f[m.XRANGEPLAIN]+"$");a("TILDELOOSE","^"+f[m.LONETILDE]+f[m.XRANGEPLAINLOOSE]+"$");a("LONECARET","(?:\\^)");a("CARETTRIM","(\\s*)"+f[m.LONECARET]+"\\s+",!0);To.caretTrimReplace=
"$1^";a("CARET","^"+f[m.LONECARET]+f[m.XRANGEPLAIN]+"$");a("CARETLOOSE","^"+f[m.LONECARET]+f[m.XRANGEPLAINLOOSE]+"$");a("COMPARATORLOOSE","^"+f[m.GTLT]+"\\s*("+f[m.LOOSEPLAIN]+")$|^$");a("COMPARATOR","^"+f[m.GTLT]+"\\s*("+f[m.FULLPLAIN]+")$|^$");a("COMPARATORTRIM","(\\s*)"+f[m.GTLT]+"\\s*("+f[m.LOOSEPLAIN]+"|"+f[m.XRANGEPLAIN]+")",!0);To.comparatorTrimReplace="$1$2$3";a("HYPHENRANGE","^\\s*("+f[m.XRANGEPLAIN]+")\\s+-\\s+("+(f[m.XRANGEPLAIN]+")\\s*$"));a("HYPHENRANGELOOSE","^\\s*("+f[m.XRANGEPLAINLOOSE]+
")\\s+-\\s+("+(f[m.XRANGEPLAINLOOSE]+")\\s*$"));a("STAR","(<|>)?=?\\s*\\*");a("GTE0","^\\s*>=\\s*0.0.0\\s*$");a("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return To}function FD(){if(SS)return TS;SS=!0;var g=["includePrerelease","loose","rtl"];return TS=function(c){return c?"object"!==typeof c?{loose:!0}:g.filter(function(h){return c[h]}).reduce(function(h,f){h[f]=!0;return h},{}):{}}}function NK(){if(US)return VS;US=!0;var g=/^[0-9]+$/,c=function(h,f){var m=g.test(h),n=g.test(f);m&&n&&(h=+h,f=+f);return h===
f?0:m&&!n?-1:n&&!m?1:h<f?-1:1};return VS={compareIdentifiers:c,rcompareIdentifiers:function(h,f){return c(f,h)}}}function Fl(){if(WS)return XS;WS=!0;var g=ED(),c=DD(),h=c.MAX_LENGTH,f=c.MAX_SAFE_INTEGER;c=kw();var m=c.re,n=c.t,a=FD(),d=NK().compareIdentifiers,k=function(b,e){e=a(e);if(b instanceof k){if(b.loose===!!e.loose&&b.includePrerelease===!!e.includePrerelease)return b;b=b.version}else if("string"!==typeof b)throw new TypeError("Invalid Version: "+b);if(b.length>h)throw new TypeError("version is longer than "+
h+" characters");g("SemVer",b,e);this.options=e;this.loose=!!e.loose;this.includePrerelease=!!e.includePrerelease;e=b.trim().match(e.loose?m[n.LOOSE]:m[n.FULL]);if(!e)throw new TypeError("Invalid Version: "+b);this.raw=b;this.major=+e[1];this.minor=+e[2];this.patch=+e[3];if(this.major>f||0>this.major)throw new TypeError("Invalid major version");if(this.minor>f||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>f||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=
e[4]?e[4].split(".").map(function(l){if(/^[0-9]+$/.test(l)){var p=+l;if(0<=p&&p<f)return p}return l}):[];this.build=e[5]?e[5].split("."):[];this.format()};k.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;this.prerelease.length&&(this.version+="-"+this.prerelease.join("."));return this.version};k.prototype.toString=function(){return this.version};k.prototype.compare=function(b){g("SemVer.compare",this.version,this.options,b);if(!(b instanceof k)){if("string"===typeof b&&
b===this.version)return 0;b=new k(b,this.options)}return b.version===this.version?0:this.compareMain(b)||this.comparePre(b)};k.prototype.compareMain=function(b){b instanceof k||(b=new k(b,this.options));return d(this.major,b.major)||d(this.minor,b.minor)||d(this.patch,b.patch)};k.prototype.comparePre=function(b){b instanceof k||(b=new k(b,this.options));if(this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;
var e=0;do{var l=this.prerelease[e],p=b.prerelease[e];g("prerelease compare",e,l,p);if(void 0===l&&void 0===p)return 0;if(void 0===p)return 1;if(void 0===l)return-1;if(l!==p)return d(l,p)}while(++e)};k.prototype.compareBuild=function(b){b instanceof k||(b=new k(b,this.options));var e=0;do{var l=this.build[e],p=b.build[e];g("prerelease compare",e,l,p);if(void 0===l&&void 0===p)return 0;if(void 0===p)return 1;if(void 0===l)return-1;if(l!==p)return d(l,p)}while(++e)};k.prototype.inc=function(b,e){switch(b){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",e);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",e);break;case "prepatch":this.prerelease.length=0;this.inc("patch",e);this.inc("pre",e);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",e);this.inc("pre",e);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(b=this.prerelease.length;0<=--b;)"number"===typeof this.prerelease[b]&&(this.prerelease[b]++,b=-2);-1===b&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw Error("invalid increment argument: "+
b);}this.format();this.raw=this.version;return this};return XS=k}function lw(){if(YS)return ZS;YS=!0;var g=DD().MAX_LENGTH,c=kw(),h=c.re,f=c.t,m=Fl(),n=FD();return ZS=function(a,d){d=n(d);if(a instanceof m)return a;if("string"!==typeof a||a.length>g||!(d.loose?h[f.LOOSE]:h[f.FULL]).test(a))return null;try{return new m(a,d)}catch(k){return null}}}function k7(){if($S)return aT;$S=!0;var g=lw();return aT=function(c,h){return(c=g(c,h))?c.version:null}}function l7(){if(bT)return cT;bT=!0;var g=Fl();return cT=
function(c,h,f,m){"string"===typeof f&&(m=f,f=void 0);try{return(new g(c,f)).inc(h,m).version}catch(n){return null}}}function Wn(){if(dT)return eT;dT=!0;var g=Fl();return eT=function(c,h,f){return(new g(c,f)).compare(new g(h,f))}}function OK(){if(fT)return gT;fT=!0;var g=Wn();return gT=function(c,h,f){return 0===g(c,h,f)}}function m7(){if(hT)return iT;hT=!0;var g=Fl();return iT=function(c,h){return(new g(c,h)).major}}function n7(){if(jT)return kT;jT=!0;var g=lw();return kT=function(c,h){return(c=
g(c,h))&&c.prerelease.length?c.prerelease:null}}function o7(){if(lT)return mT;lT=!0;var g=Wn();return mT=function(c,h,f){return g(h,c,f)}}function PK(){if(nT)return oT;nT=!0;var g=Fl();return oT=function(c,h,f){c=new g(c,f);h=new g(h,f);return c.compare(h)||c.compareBuild(h)}}function p7(){if(pT)return qT;pT=!0;var g=PK();return qT=function(c,h){return c.sort(function(f,m){return g(m,f,h)})}}function GD(){if(rT)return sT;rT=!0;var g=Wn();return sT=function(c,h,f){return 0<g(c,h,f)}}function QK(){if(tT)return uT;
tT=!0;var g=Wn();return uT=function(c,h,f){return 0>g(c,h,f)}}function RK(){if(vT)return wT;vT=!0;var g=Wn();return wT=function(c,h,f){return 0<=g(c,h,f)}}function xT(){if(yT)return zT;yT=!0;var g=Wn();return zT=function(c,h,f){return 0!==g(c,h,f)}}function SK(){if(AT)return BT;AT=!0;var g=Wn();return BT=function(c,h,f){return 0>=g(c,h,f)}}function CT(){if(DT)return ET;DT=!0;var g=OK(),c=xT(),h=GD(),f=RK(),m=QK(),n=SK();return ET=function(a,d,k,b){switch(d){case "===":return"object"===typeof a&&(a=
a.version),"object"===typeof k&&(k=k.version),a===k;case "!==":return"object"===typeof a&&(a=a.version),"object"===typeof k&&(k=k.version),a!==k;case "":case "=":case "==":return g(a,k,b);case "!=":return c(a,k,b);case ">":return h(a,k,b);case ">=":return f(a,k,b);case "<":return m(a,k,b);case "<=":return n(a,k,b);default:throw new TypeError("Invalid operator: "+d);}}}function q7(){if(FT)return GT;FT=!0;var g=Fl(),c=lw(),h=kw(),f=h.re,m=h.t;return GT=function(n,a){if(n instanceof g)return n;"number"===
typeof n&&(n=String(n));if("string"!==typeof n)return null;a=a||{};var d=null;if(a.rtl){for(var k;(k=f[m.COERCERTL].exec(n))&&(!d||d.index+d[0].length!==n.length);)d&&k.index+k[0].length===d.index+d[0].length||(d=k),f[m.COERCERTL].lastIndex=k.index+k[1].length+k[2].length;f[m.COERCERTL].lastIndex=-1}else d=n.match(f[m.COERCE]);return null===d?null:c(d[2]+"."+(d[3]||"0")+"."+(d[4]||"0"),a)}}function gi(g){var c=this;c instanceof gi||(c=new gi);c.tail=null;c.head=null;c.length=0;if(g&&"function"===
typeof g.forEach)g.forEach(function(m){c.push(m)});else if(0<arguments.length)for(var h=0,f=arguments.length;h<f;h++)c.push(arguments[h]);return c}function zt(g,c,h,f){if(!(this instanceof zt))return new zt(g,c,h,f);this.list=f;this.value=g;c?(c.next=this,this.prev=c):this.prev=null;h?(h.prev=this,this.next=h):this.next=null}function Xn(){if(HT)return TK;HT=!0;var g=function(I,S){var V=this;S=h(S);if(I instanceof g)return I.loose===!!S.loose&&I.includePrerelease===!!S.includePrerelease?I:new g(I.raw,
S);if(I instanceof f)return this.raw=I.value,this.set=[[I]],this.format(),this;this.options=S;this.loose=!!S.loose;this.includePrerelease=!!S.includePrerelease;this.raw=I;this.set=I.split(/\s*\|\|\s*/).map(function(ba){return V.parseRange(ba.trim())}).filter(function(ba){return ba.length});if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+I);if(1<this.set.length)if(I=this.set[0],this.set=this.set.filter(function(ba){return"<0.0.0-0"!==ba[0].value}),0===this.set.length)this.set=[I];
else if(1<this.set.length)for(I=$jscomp.makeIterator(this.set),S=I.next();!S.done;S=I.next())if(S=S.value,1===S.length&&""===S[0].value){this.set=[S];break}this.format()};g.prototype.format=function(){return this.range=this.set.map(function(I){return I.join(" ").trim()}).join("||").trim()};g.prototype.toString=function(){return this.range};g.prototype.parseRange=function(I){var S=this;I=I.trim();var V="parseRange:"+Object.keys(this.options).join(",")+":"+I,ba=c.get(V);if(ba)return ba;ba=this.options.loose;
I=I.replace(ba?d[k.HYPHENRANGELOOSE]:d[k.HYPHENRANGE],L(this.options.includePrerelease));m("hyphen replace",I);I=I.replace(d[k.COMPARATORTRIM],b);m("comparator trim",I,d[k.COMPARATORTRIM]);I=I.replace(d[k.TILDETRIM],e);I=I.replace(d[k.CARETTRIM],l);I=I.split(/\s+/).join(" ");var ua=ba?d[k.COMPARATORLOOSE]:d[k.COMPARATOR];ba=I.split(" ").map(function(F){var Y=F;F=S.options;m("comp",Y,F);Y=y(Y,F);m("caret",Y);Y=u(Y,F);m("tildes",Y);Y=C(Y,F);m("xrange",Y);m("replaceStars",Y,F);Y=Y.trim().replace(d[k.STAR],
"");m("stars",Y);return Y}).join(" ").split(/\s+/).map(function(F){var Y=S.options;m("replaceGTE0",F,Y);return F.trim().replace(d[Y.includePrerelease?k.GTE0PRE:k.GTE0],"")}).filter(this.options.loose?function(F){return!!F.match(ua)}:function(){return!0}).map(function(F){return new f(F,S.options)});I=new Map;ba=$jscomp.makeIterator(ba);for(var Fa=ba.next();!Fa.done;Fa=ba.next()){Fa=Fa.value;if("<0.0.0-0"===Fa.value)return[Fa];I.set(Fa.value,Fa)}1<I.size&&I.has("")&&I.delete("");I=[].concat($jscomp.arrayFromIterable(I.values()));
c.set(V,I);return I};g.prototype.intersects=function(I,S){if(!(I instanceof g))throw new TypeError("a Range is required");return this.set.some(function(V){return p(V,S)&&I.set.some(function(ba){return p(ba,S)&&V.every(function(ua){return ba.every(function(Fa){return ua.intersects(Fa,S)})})})})};g.prototype.test=function(I){if(!I)return!1;if("string"===typeof I)try{I=new n(I,this.options)}catch(F){return!1}for(var S=0;S<this.set.length;S++){a:{var V=this.set[S];for(var ba=I,ua=this.options,Fa=0;Fa<
V.length;Fa++)if(!V[Fa].test(ba)){V=!1;break a}if(ba.prerelease.length&&!ua.includePrerelease){for(ua=0;ua<V.length;ua++)if(m(V[ua].semver),V[ua].semver!==f.ANY&&0<V[ua].semver.prerelease.length&&(Fa=V[ua].semver,Fa.major===ba.major&&Fa.minor===ba.minor&&Fa.patch===ba.patch)){V=!0;break a}V=!1}else V=!0}if(V)return!0}return!1};TK=g;var c=new r7({max:1E3}),h=FD(),f=HD(),m=ED(),n=Fl(),a=kw(),d=a.re,k=a.t,b=a.comparatorTrimReplace,e=a.tildeTrimReplace,l=a.caretTrimReplace,p=function(I,S){var V=!0;I=
I.slice();for(var ba=I.pop();V&&I.length;)V=I.every(function(ua){return ba.intersects(ua,S)}),ba=I.pop();return V},q=function(I){return!I||"x"===I.toLowerCase()||"*"===I},u=function(I,S){return I.trim().split(/\s+/).map(function(V){return w(V,S)}).join(" ")},w=function(I,S){return I.replace(S.loose?d[k.TILDELOOSE]:d[k.TILDE],function(V,ba,ua,Fa,F){m("tilde",I,V,ba,ua,Fa,F);q(ba)?V="":q(ua)?V=">="+ba+".0.0 <"+(+ba+1)+".0.0-0":q(Fa)?V=">="+ba+"."+ua+".0 <"+ba+"."+(+ua+1)+".0-0":F?(m("replaceTilde pr",
F),V=">="+ba+"."+ua+"."+Fa+"-"+F+" <"+ba+"."+(+ua+1)+".0-0"):V=">="+ba+"."+ua+"."+Fa+" <"+ba+"."+(+ua+1)+".0-0";m("tilde return",V);return V})},y=function(I,S){return I.trim().split(/\s+/).map(function(V){return A(V,S)}).join(" ")},A=function(I,S){m("caret",I,S);var V=S.includePrerelease?"-0":"";return I.replace(S.loose?d[k.CARETLOOSE]:d[k.CARET],function(ba,ua,Fa,F,Y){m("caret",I,ba,ua,Fa,F,Y);q(ua)?ba="":q(Fa)?ba=">="+ua+".0.0"+V+" <"+(+ua+1)+".0.0-0":q(F)?ba="0"===ua?">="+ua+"."+Fa+".0"+V+" <"+
ua+"."+(+Fa+1)+".0-0":">="+ua+"."+Fa+".0"+V+" <"+(+ua+1)+".0.0-0":Y?(m("replaceCaret pr",Y),ba="0"===ua?"0"===Fa?">="+ua+"."+Fa+"."+F+"-"+Y+" <"+ua+"."+Fa+"."+(+F+1)+"-0":">="+ua+"."+Fa+"."+F+"-"+Y+" <"+ua+"."+(+Fa+1)+".0-0":">="+ua+"."+Fa+"."+F+"-"+Y+" <"+(+ua+1)+".0.0-0"):(m("no pr"),ba="0"===ua?"0"===Fa?">="+ua+"."+Fa+"."+F+V+" <"+ua+"."+Fa+"."+(+F+1)+"-0":">="+ua+"."+Fa+"."+F+V+" <"+ua+"."+(+Fa+1)+".0-0":">="+ua+"."+Fa+"."+F+" <"+(+ua+1)+".0.0-0");m("caret return",ba);return ba})},C=function(I,
S){m("replaceXRanges",I,S);return I.split(/\s+/).map(function(V){return D(V,S)}).join(" ")},D=function(I,S){I=I.trim();return I.replace(S.loose?d[k.XRANGELOOSE]:d[k.XRANGE],function(V,ba,ua,Fa,F,Y){m("xRange",I,V,ba,ua,Fa,F,Y);var Q=q(ua),W=Q||q(Fa);F=W||q(F);"="===ba&&F&&(ba="");Y=S.includePrerelease?"-0":"";Q?V=">"===ba||"<"===ba?"<0.0.0-0":"*":ba&&F?(W&&(Fa=0),F=0,">"===ba?(ba=">=",W?(ua=+ua+1,Fa=0):Fa=+Fa+1,F=0):"<="===ba&&(ba="<",W?ua=+ua+1:Fa=+Fa+1),"<"===ba&&(Y="-0"),V=ba+ua+"."+Fa+"."+F+Y):
W?V=">="+ua+".0.0"+Y+" <"+(+ua+1)+".0.0-0":F&&(V=">="+ua+"."+Fa+".0"+Y+" <"+ua+"."+(+Fa+1)+".0-0");m("xRange return",V);return V})},L=function(I){return function(S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la,db){V=q(ba)?"":q(ua)?">="+ba+".0.0"+(I?"-0":""):q(Fa)?">="+ba+"."+ua+".0"+(I?"-0":""):F?">="+V:">="+V+(I?"-0":"");Q=q(W)?"":q(ka)?"<"+(+W+1)+".0.0-0":q(ea)?"<"+W+"."+(+ka+1)+".0-0":la?"<="+W+"."+ka+"."+ea+"-"+la:I?"<"+W+"."+ka+"."+(+ea+1)+"-0":"<="+Q;return(V+" "+Q).trim()}};return TK}function HD(){if(IT)return UK;
IT=!0;var g=Symbol("SemVer ANY"),c=function(e,l){l=h(l);if(e instanceof c){if(e.loose===!!l.loose)return e;e=e.value}d("comparator",e,l);this.options=l;this.loose=!!l.loose;this.parse(e);this.value=this.semver===g?"":this.operator+this.semver.version;d("comp",this)};c.prototype.parse=function(e){var l=e.match(this.options.loose?m[n.COMPARATORLOOSE]:m[n.COMPARATOR]);if(!l)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==l[1]?l[1]:"";"="===this.operator&&(this.operator="");this.semver=
l[2]?new k(l[2],this.options.loose):g};c.prototype.toString=function(){return this.value};c.prototype.test=function(e){d("Comparator.test",e,this.options.loose);if(this.semver===g||e===g)return!0;if("string"===typeof e)try{e=new k(e,this.options)}catch(l){return!1}return a(e,this.operator,this.semver,this.options)};c.prototype.intersects=function(e,l){if(!(e instanceof c))throw new TypeError("a Comparator is required");l&&"object"===typeof l||(l={loose:!!l,includePrerelease:!1});if(""===this.operator)return""===
this.value?!0:(new b(e.value,l)).test(this.value);if(""===e.operator)return""===e.value?!0:(new b(this.value,l)).test(e.semver);var p=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),q=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),u=this.semver.version===e.semver.version,w=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),y=a(this.semver,"<",e.semver,l)&&(">="===this.operator||">"===this.operator)&&
("<="===e.operator||"<"===e.operator);e=a(this.semver,">",e.semver,l)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return p||q||u&&w||y||e};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return g}}});UK=c;var h=FD(),f=kw(),m=f.re,n=f.t,a=CT(),d=ED(),k=Fl(),b=Xn();return UK}function ID(){if(JT)return KT;JT=!0;var g=Xn();return KT=function(c,h,f){try{h=new g(h,f)}catch(m){return!1}return h.test(c)}}function s7(){if(LT)return MT;
LT=!0;var g=Fl(),c=Xn();return MT=function(h,f,m){var n=null,a=null,d=null;try{d=new c(f,m)}catch(k){return null}h.forEach(function(k){!d.test(k)||n&&-1!==a.compare(k)||(n=k,a=new g(n,m))});return n}}function t7(){if(NT)return OT;NT=!0;var g=Xn();return OT=function(c,h){try{return(new g(c,h)).range||"*"}catch(f){return null}}}function u7(){if(PT)return QT;PT=!0;var g=Xn();return QT=function(c,h,f){c=new g(c,f);h=new g(h,f);return c.intersects(h)}}function v7(){if(RT)return ST;RT=!0;var g=lw();return ST=
function(c,h){return(c=g(c.trim().replace(/^[=v]+/,""),h))?c.version:null}}function w7(){if(TT)return UT;TT=!0;var g=lw(),c=OK();return UT=function(h,f){if(c(h,f))return null;h=g(h);f=g(f);var m=h.prerelease.length||f.prerelease.length,n=m?"pre":"",a;for(a in h)if(("major"===a||"minor"===a||"patch"===a)&&h[a]!==f[a])return n+a;return m?"prerelease":""}}function x7(){if(VT)return WT;VT=!0;var g=Fl();return WT=function(c,h){return(new g(c,h)).minor}}function y7(){if(XT)return YT;XT=!0;var g=Fl();return YT=
function(c,h){return(new g(c,h)).patch}}function z7(){if(ZT)return $T;ZT=!0;var g=Wn();return $T=function(c,h){return g(c,h,!0)}}function A7(){if(aU)return bU;aU=!0;var g=PK();return bU=function(c,h){return c.sort(function(f,m){return g(f,m,h)})}}function B7(){if(cU)return dU;cU=!0;var g=Xn();return dU=function(c,h){return(new g(c,h)).set.map(function(f){return f.map(function(m){return m.value}).join(" ").trim().split(" ")})}}function C7(){if(eU)return fU;eU=!0;var g=Fl(),c=Xn();return fU=function(h,
f,m){var n=null,a=null,d=null;try{d=new c(f,m)}catch(k){return null}h.forEach(function(k){!d.test(k)||n&&1!==a.compare(k)||(n=k,a=new g(n,m))});return n}}function D7(){if(gU)return hU;gU=!0;var g=Fl(),c=Xn(),h=GD();return hU=function(f,m){f=new c(f,m);m=new g("0.0.0");if(f.test(m))return m;m=new g("0.0.0-0");if(f.test(m))return m;m=null;for(var n={},a=0;a<f.set.length;n={$jscomp$loop$prop$setMin$2705:n.$jscomp$loop$prop$setMin$2705},++a){var d=f.set[a];n.$jscomp$loop$prop$setMin$2705=null;d.forEach(function(k){return function(b){var e=
new g(b.semver.version);switch(b.operator){case ">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case "":case ">=":if(!k.$jscomp$loop$prop$setMin$2705||h(e,k.$jscomp$loop$prop$setMin$2705))k.$jscomp$loop$prop$setMin$2705=e;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+b.operator);}}}(n));!n.$jscomp$loop$prop$setMin$2705||m&&!h(m,n.$jscomp$loop$prop$setMin$2705)||(m=n.$jscomp$loop$prop$setMin$2705)}return m&&f.test(m)?m:null}}function VK(){if(iU)return jU;
iU=!0;var g=Fl(),c=HD(),h=c.ANY,f=Xn(),m=ID(),n=GD(),a=QK(),d=SK(),k=RK();return jU=function(b,e,l,p){b=new g(b,p);e=new f(e,p);switch(l){case ">":var q=n;l=d;var u=a;var w=">";var y=">=";break;case "<":q=a;l=k;u=n;w="<";y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(m(b,e,p))return!1;for(var A={},C=0;C<e.set.length;A={$jscomp$loop$prop$high$2707:A.$jscomp$loop$prop$high$2707,$jscomp$loop$prop$low$2708:A.$jscomp$loop$prop$low$2708},++C){var D=e.set[C];A.$jscomp$loop$prop$high$2707=
null;A.$jscomp$loop$prop$low$2708=null;D.forEach(function(L){return function(I){I.semver===h&&(I=new c(">=0.0.0"));L.$jscomp$loop$prop$high$2707=L.$jscomp$loop$prop$high$2707||I;L.$jscomp$loop$prop$low$2708=L.$jscomp$loop$prop$low$2708||I;q(I.semver,L.$jscomp$loop$prop$high$2707.semver,p)?L.$jscomp$loop$prop$high$2707=I:u(I.semver,L.$jscomp$loop$prop$low$2708.semver,p)&&(L.$jscomp$loop$prop$low$2708=I)}}(A));if(A.$jscomp$loop$prop$high$2707.operator===w||A.$jscomp$loop$prop$high$2707.operator===y||
(!A.$jscomp$loop$prop$low$2708.operator||A.$jscomp$loop$prop$low$2708.operator===w)&&l(b,A.$jscomp$loop$prop$low$2708.semver)||A.$jscomp$loop$prop$low$2708.operator===y&&u(b,A.$jscomp$loop$prop$low$2708.semver))return!1}return!0}}function E7(){if(kU)return lU;kU=!0;var g=VK();return lU=function(c,h,f){return g(c,h,">",f)}}function F7(){if(mU)return nU;mU=!0;var g=VK();return nU=function(c,h,f){return g(c,h,"<",f)}}function G7(){if(oU)return pU;oU=!0;var g=ID(),c=Wn();return pU=function(h,f,m){var n=
[],a=null,d=null;h=h.sort(function(e,l){return c(e,l,m)});for(var k=$jscomp.makeIterator(h),b=k.next();!b.done;b=k.next())b=b.value,g(b,f,m)?(d=b,a||(a=b)):(d&&n.push([a,d]),a=d=null);a&&n.push([a,null]);a=[];n=$jscomp.makeIterator(n);for(d=n.next();!d.done;d=n.next())k=$jscomp.makeIterator(d.value),d=k.next().value,k=k.next().value,d===k?a.push(d):k||d!==h[0]?k?d===h[0]?a.push("<="+k):a.push(d+" - "+k):a.push(">="+d):a.push("*");h=a.join(" || ");return h.length<("string"===typeof f.raw?f.raw:String(f)).length?
h:f}}function H7(){if(qU)return rU;qU=!0;var g=Xn(),c=HD(),h=c.ANY,f=ID(),m=Wn(),n=function(k,b,e){if(k===b)return!0;if(1===k.length&&k[0].semver===h){if(1===b.length&&b[0].semver===h)return!0;k=e.includePrerelease?[new c(">=0.0.0-0")]:[new c(">=0.0.0")]}if(1===b.length&&b[0].semver===h){if(e.includePrerelease)return!0;b=[new c(">=0.0.0")]}var l=new Set,p,q,u=$jscomp.makeIterator(k);for(k=u.next();!k.done;k=u.next())k=k.value,">"===k.operator||">="===k.operator?p=a(p,k,e):"<"===k.operator||"<="===
k.operator?q=d(q,k,e):l.add(k.semver);if(1<l.size)return null;if(p&&q){var w=m(p.semver,q.semver,e);if(0<w||0===w&&(">="!==p.operator||"<="!==q.operator))return null}for(k=$jscomp.makeIterator(l).next();!k.done;){w=k.value;if(p&&!f(w,String(p),e)||q&&!f(w,String(q),e))return null;p=$jscomp.makeIterator(b);for(k=p.next();!k.done;k=p.next())if(!f(w,String(k.value),e))return!1;return!0}l=q&&!e.includePrerelease&&q.semver.prerelease.length?q.semver:!1;u=p&&!e.includePrerelease&&p.semver.prerelease.length?
p.semver:!1;l&&1===l.prerelease.length&&"<"===q.operator&&0===l.prerelease[0]&&(l=!1);b=$jscomp.makeIterator(b);for(k=b.next();!k.done;k=b.next()){k=k.value;var y=y||">"===k.operator||">="===k.operator;var A=A||"<"===k.operator||"<="===k.operator;if(p)if(u&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===u.major&&k.semver.minor===u.minor&&k.semver.patch===u.patch&&(u=!1),">"===k.operator||">="===k.operator){var C=a(p,k,e);if(C===k&&C!==p)return!1}else if(">="===p.operator&&!f(p.semver,
String(k),e))return!1;if(q)if(l&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===l.major&&k.semver.minor===l.minor&&k.semver.patch===l.patch&&(l=!1),"<"===k.operator||"<="===k.operator){if(C=d(q,k,e),C===k&&C!==q)return!1}else if("<="===q.operator&&!f(q.semver,String(k),e))return!1;if(!k.operator&&(q||p)&&0!==w)return!1}return p&&A&&!q&&0!==w||q&&y&&!p&&0!==w||u||l?!1:!0},a=function(k,b,e){if(!k)return b;e=m(k.semver,b.semver,e);return 0<e?k:0>e?b:">"===b.operator&&">="===k.operator?
b:k},d=function(k,b,e){if(!k)return b;e=m(k.semver,b.semver,e);return 0>e?k:0<e?b:"<"===b.operator&&"<="===k.operator?b:k};return rU=function(k,b,e){e=void 0===e?{}:e;if(k===b)return!0;k=new g(k,e);b=new g(b,e);var l=!1;k=$jscomp.makeIterator(k.set);var p=k.next();a:for(;!p.done;p=k.next()){p=p.value;for(var q=$jscomp.makeIterator(b.set),u=q.next();!u.done;u=q.next())if(u=n(p,u.value,e),l=l||null!==u,u)continue a;if(l)return!1}return!0}}function Wy(g){g=Object.assign({plugins:Ue.allPlugins,reinitializeIds:!1,
skipMigrations:!0},g);if(g.reinitializeIds&&"function"!==typeof g.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return g}function mw(g,c){c=Ue.normalizeOptions(c);var h=c.objPool||new Ue.ObjectPool(c);c=">="+Ue.serializerVersion.replace(Ue.majorAndMinorVersionRe,"");g=h.snapshotObject(g);Ue.removeUnreachableObjects([g.id],g.snapshot);Ue.clearDanglingConnections(g.snapshot);g.requiredVersion=c;return g}function Xy(g,c){c=Ue.normalizeOptions(c);
var h=g.requiredVersion;h&&!Ue.semver.satisfies(Ue.serializerVersion,h)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(h+" but serializer has incompatible version ")+(Ue.serializerVersion+". Deserialization might fail...!"));return(c.objPool||new Ue.ObjectPool(c)).resolveFromSnapshotAndId(g)}function Yy(g,c,h){function f(){var d=Ue.deserialize(g,h);Ue.runMigrations(n,"objectConverter",g,m);return d}h=Ue.normalizeOptions(h);c.length&&(h.skipMigrations=!1);var m=h.objPool||
(h.objPool=new Ue.ObjectPool(h));c=Ue.normalizeMigrations(c);var n=c.after,a;Ue.runMigrations(c.before,"snapshotConverter",g,m);"function"===typeof h.onDeserializationStart&&(a=h.onDeserializationStart(g,h));return a instanceof Promise?a.then(f):f()}function Zy(g,c){return Ue.deserialize(Ue.serialize(g,c),c)}function $y(g){return g&&g.split(",").map(function(c){c=c.split(" ").filter(function(h){return""!=h}).join(" ");c.includes(" ")&&(c.startsWith("'")&&(c=c.slice(1)),c.endsWith("'")&&(c=c.slice(0,
-1)),c.startsWith('"')||(c='"'+c),c.endsWith('"')||(c+='"'));return c}).join(",")}function nw(g,c){c||(c="undefined"!==typeof document?document.location.search:"");c=(c=c.trim())&&"?"!==c?ah.parseQuery(c):{};g.endsWith(".json")?(c.file=g,delete c.name):(delete c.file,c.name=g);return"/worlds/load?"+ah.stringifyQuery(c)}function az(g){Object.assign(ah.nameToClassMapping,g)}function Zi(g,c){g=void 0===g?{}:g;c=void 0===c?{restore:!1}:c;var h=ah.nameToClassMapping.default;g.type&&("function"===typeof g.type&&
(h=g.type),"object"===typeof g.type?h=ah.locateClass(g.type):"string"===typeof g.type&&(h=ah.nameToClassMapping[g.type.toLowerCase()]||h));var f={};return c.restore?(new h((f[Symbol.for("lively-instance-restorer")]=!0,f))).initFromJSON(g):new h(g)}function bz(g){return("function"===typeof g?g[Symbol.for("__LivelyClassName__")]:"string"===typeof g?g.toLowerCase():"")+"_"+ah.string.newUUID().replace(/-/g,"_")}function I7(g){return"[object Array]"===J7.call(g)}function $m(g,c,h){(this||WK).type=Number(g);
(this||WK).vNode=c;(this||WK).patch=h}function sU(g,c){var h=g.vnode;h||(h=g.vnode=g.render(c));if(!(K7(h)||L7(h)||M7(h)))throw Error("thunk did not return a valid node");return h}function tU(g,c){var h;for(h in g){if(!(h in c)){var f=f||{};f[h]=void 0}var m=g[h],n=c[h];if(m!==n)if(uU(m)&&uU(n))if(vU(n)!==vU(m))f=f||{},f[h]=n;else if(N7(n))f=f||{},f[h]=n;else{if(m=tU(m,n))f=f||{},f[h]=m}else f=f||{},f[h]=n}for(var a in c)a in g||(f=f||{},f[a]=c[a]);return f}function vU(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);
if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function wU(g,c){var h={a:g};xU(g,c,h,0);return h}function xU(g,c,h,f){if(g!==c){var m=h[f],n=!1;if(JD(g)||JD(c))XK(g,c,h,f);else if(null==c)KD(g)||(YK(g,h,f),ZK(g,h,f),m=h[f]),m=Yn(m,new fj(fj.REMOVE,g,c));else if(At(c))if(At(g))if(g.tagName===c.tagName&&g.namespace===c.namespace&&g.key===c.key){var a=O7(g.properties,c.properties);a&&(m=Yn(m,new fj(fj.PROPS,g,a)));a=f;var d=g.children;c=c.children;var k=yU(c),b=k.keys,
e=k.free;if(e.length===c.length)c={children:c,moves:null};else{k=yU(d);var l=k.keys;if(k.free.length===d.length)c={children:c,moves:null};else{k=[];for(var p=0,q=e.length,u=0,w=0;w<d.length;w++){var y=d[w];y.key?b.hasOwnProperty(y.key)?(y=b[y.key],k.push(c[y])):(u++,k.push(null)):p<q?(y=e[p++],k.push(c[y])):(u++,k.push(null))}e=p>=e.length?c.length:e[p];for(p=0;p<c.length;p++)q=c[p],q.key?l.hasOwnProperty(q.key)||k.push(q):p>=e&&k.push(q);l=k.slice();e=0;p=[];q=[];for(y=0;y<c.length;){var A=c[y];
for(w=l[e];null===w&&l.length;)p.push(LD(l,e,null)),w=l[e];w&&w.key===A.key?(e++,y++):A.key?(w&&w.key?b[w.key]!==y+1?(p.push(LD(l,e,w.key)),(w=l[e])&&w.key===A.key?e++:q.push({key:A.key,to:y})):q.push({key:A.key,to:y}):q.push({key:A.key,to:y}),y++):w&&w.key&&p.push(LD(l,e,w.key))}for(;e<l.length;)w=l[e],p.push(LD(l,e,w&&w.key));c=p.length!==u||q.length?{children:k,moves:{removes:p,inserts:q}}:{children:k,moves:null}}}b=c.children;k=d.length;u=b.length;k=k>u?k:u;for(u=0;u<k;u++)l=d[u],e=b[u],a+=1,
l?xU(l,e,h,a):e&&(m=Yn(m,new fj(fj.INSERT,null,e))),At(l)&&l.count&&(a+=l.count);c.moves&&(m=Yn(m,new fj(fj.ORDER,g,c.moves)))}else m=Yn(m,new fj(fj.VNODE,g,c)),n=!0;else m=Yn(m,new fj(fj.VNODE,g,c)),n=!0;else zU(c)?zU(g)?g.text!==c.text&&(m=Yn(m,new fj(fj.VTEXT,g,c))):(m=Yn(m,new fj(fj.VTEXT,g,c)),n=!0):KD(c)&&(KD(g)||(n=!0),m=Yn(m,new fj(fj.WIDGET,g,c)));m&&(h[f]=m);n&&(YK(g,h,f),ZK(g,h,f))}}function ZK(g,c,h){if(KD(g))"function"===typeof g.destroy&&(c[h]=Yn(c[h],new fj(fj.REMOVE,g,null)));else if(At(g)&&
(g.hasWidgets||g.hasThunks)){g=g.children;for(var f=g.length,m=0;m<f;m++){var n=g[m];h+=1;ZK(n,c,h);At(n)&&n.count&&(h+=n.count)}}else JD(g)&&XK(g,null,c,h)}function XK(g,c,h,f){g=P7(g,c);g=wU(g.a,g.b);a:{for(m in g)if("a"!==m){var m=!0;break a}m=!1}m&&(h[f]=new fj(fj.THUNK,null,g))}function YK(g,c,h){if(At(g)){if(g.hooks){var f=c[h],m=fj.PROPS,n=g.hooks,a={},d;for(d in n)a[d]=void 0;c[h]=Yn(f,new fj(m,g,a))}if(g.descendantHooks||g.hasThunks)for(g=g.children,f=g.length,m=0;m<f;m++)n=g[m],h+=1,YK(n,
c,h),At(n)&&n.count&&(h+=n.count)}else JD(g)&&XK(g,null,c,h)}function LD(g,c,h){g.splice(c,1);return{from:c,key:h}}function yU(g){for(var c={},h=[],f=g.length,m=0;m<f;m++){var n=g[m];n.key?c[n.key]=m:h.push(m)}return{keys:c,free:h}}function Yn(g,c){return g?(Q7(g)?g.push(c):g=[g,c],g):c}function AU(g,c,h,f){if(f)if(f=f[c],BU(f))f.unhook&&f.unhook(g,c,h);else if("attributes"===c)for(var m in f)g.removeAttribute(m);else if("style"===c)for(var n in f)g.style[n]="";else g[c]="string"===typeof f?"":null}
function CU(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function DU(g,c){var h=c?c.document||EU:EU,f=c?c.warn:null;g=R7(g).a;if(S7(g))return g.init();if(T7(g))return h.createTextNode(g.text);if(!U7(g))return f&&f("Item is not a valid virtual dom node",g),null;h=null===g.namespace?h.createElement(g.tagName):h.createElementNS(g.namespace,g.tagName);V7(h,g.properties);g=g.children;for(f=0;f<g.length;f++){var m=
DU(g[f],c);m&&h.appendChild(m)}return h}function FU(g,c,h,f,m){f=f||{};if(g){GU(h,m,m)&&(f[m]=g);var n=c.children;if(n){g=g.childNodes;for(var a=0;a<c.children.length;a++){m+=1;var d=n[a]||W7,k=m+(d.count||0);GU(h,m,k)&&FU(g[a],d,h,f,m);m=k}}}return f}function GU(g,c,h){if(0===g.length)return!1;for(var f=0,m=g.length-1,n,a;f<=m;){n=(m+f)/2>>0;a=g[n];if(f===m)return a>=c&&a<=h;if(a<c)f=n+1;else if(a>h)m=n-1;else return!0}return!1}function X7(g,c){return g>c?1:-1}function HU(g,c){"function"===typeof c.destroy&&
Y7(c)&&c.destroy(g)}function IU(g,c,h){h=h||{};h.patch=h.patch&&h.patch!==IU?h.patch:Z7;h.render=h.render||$7;return h.patch(g,c,h)}function Z7(g,c,h){var f=[];for(m in c)"a"!==m&&f.push(Number(m));if(0===f.length)return g;var m=a8(g,c.a,f);var n=g.ownerDocument;h.document||n===b8||(h.document=n);for(n=0;n<f.length;n++){var a=f[n];var d=m[a],k=c[a],b=h;if(d)if(c8(k))for(var e=0;e<k.length;e++)a=JU(k[e],d,b),d===g&&(g=a);else a=JU(k,d,b),d===g&&(g=a)}return g}function $K(g,c,h,f,m){(this||Uo).tagName=
g;(this||Uo).properties=c||d8;(this||Uo).children=h||e8;(this||Uo).key=null!=f?String(f):void 0;(this||Uo).namespace="string"===typeof m?m:null;g=h&&h.length||0;f=0;var n=m=!1,a=!1,d;for(b in c)if(c.hasOwnProperty(b)){var k=c[b];f8(k)&&k.unhook&&(d||(d={}),d[b]=k)}for(c=0;c<g;c++){var b=h[c];g8(b)?(f+=b.count||0,!m&&b.hasWidgets&&(m=!0),!n&&b.hasThunks&&(n=!0),a||!b.hooks&&!b.descendantHooks||(a=!0)):!m&&h8(b)?"function"===typeof b.destroy&&(m=!0):!n&&i8(b)&&(n=!0)}(this||Uo).count=g+f;(this||Uo).hasWidgets=
m;(this||Uo).hasThunks=n;(this||Uo).hooks=d;(this||Uo).descendantHooks=a}function aL(g){(this||j8).text=String(g)}function MD(g){if(!(this instanceof MD))return new MD(g);this.value=g}function cz(g){if(!(this instanceof cz))return new cz(g);this.value=g}function KU(g,c,h,f){if("string"===typeof g)c.push(new LU(g));else if("number"===typeof g)c.push(new LU(String(g)));else if(MU(g))c.push(g);else if(NU(g))for(var m=0;m<g.length;m++)KU(g[m],c,h,f);else if(null!==g&&void 0!==g)throw c={tagName:h,properties:f},
h=Error(),h.type="virtual-hyperscript.unexpected.virtual-element",h.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+OU(g)+".\nThe parent vnode is:\n"+OU(c),h.foreignObject=g,h.parentVnode=c,h;}function MU(g){return k8(g)||l8(g)||m8(g)||n8(g)}function OU(g){try{return JSON.stringify(g,null,"    ")}catch(c){return String(g)}}function bL(g,c){if(3===g.nodeType)return new PU(g.nodeValue);if(1===g.nodeType||9===g.nodeType){var h="http://www.w3.org/1999/xhtml"!==
g.namespaceURI?g.namespaceURI:null,f=c&&g.getAttribute(c)?g.getAttribute(c):null,m=g.tagName;var n,a={};if(g.hasAttributes()){if(g.namespaceURI&&"http://www.w3.org/1999/xhtml"!==g.namespaceURI)var d=g.namespaceURI;for(var k=0;k<g.attributes.length;k++){if("style"==g.attributes[k].name){var b=g.style;var e={};for(n=0;n<b.length;++n){var l=b.item(n);e[l]=String(b[l]);-1<e[l].indexOf("url")&&(e[l]=e[l].replace(/"/g,""))}b="style";l=n=void 0}else d?(n=g.attributes[k],b=n.name,e=n.value,n=o8[n.name]||
"",l=void 0):(n=void 0,e=g.attributes[k],b=QU[e.name]?QU[e.name]:e.name,0===b.indexOf("data-")||0===b.indexOf("aria-")?(e=e.value,n=!0):e=e.value,l=n||!1,n=void 0);n?a[b]={namespace:n,value:e}:l?(a.attributes||(a.attributes={}),a.attributes[b]=e):a[b]=e}}d=[];for(k=0;k<g.childNodes.length;k++)d.push(bL(g.childNodes[k],c));return new p8(m,a,d,f,h)}return new PU("")}function dz(g){var c={};Lg.addFill(g,c);Lg.addTransform(g,c);Lg.addTransformOrigin(g,c);Lg.addDisplay(g,c);Lg.addExtentStyle(g,c);Lg.addBorder(g,
c);Lg.addBorderRadius(g,c);Lg.addShadowStyle(g,c);g.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*g.grayscale+"%)");g.blur&&(c.filter=(c.filter||"")+" blur("+g.blur+"px)");null!=g.opacity&&(c.opacity=g.opacity);g.draggable&&!g.isWorld&&(c["touch-action"]="none");return c}function ND(g){return g.renderOnGPU||g.dropShadow&&!g.dropShadow.fast||0<g.grayscale}function cL(g,c){var h=g.position,f=g.origin,m=g.scale,n=g.rotation,a=g.flipped,d=g.tilted,k=g.perspective,b=g.owner,e=h.x-f.x-(g._skipWrapping&&
b?b.borderWidthLeft:0);h=h.y-f.y-(g._skipWrapping&&b?b.borderWidthTop:0);if(g=Lg.canBePromotedToCompositionLayer(g))c.willChange="transform";b&&b.isText||g?c.transform="translate("+e+"px, "+h+"px)":(c.transform="",c.top=Math.round(h)+"px",c.left=Math.round(e)+"px");c.transform+=" rotate("+n.toFixed(5)+"rad) scale("+m.toFixed(5)+","+m.toFixed(5)+")";k&&(c.perspective=k+"px");a&&(c.transform+=" rotateY("+180*a+"deg)");d&&(c.transform+=" rotateX("+180*d+"deg)")}function ez(g,c){var h=g.width;g=g.height;
c.width=h||1;c.height=g||1;c.viewBox=[0,0,h||1,g||1].join(" ");return c}function ow(g){var c="";if(0<g.length){var h=g[0];var f=h.position;var m=f.y;f=f.x;c+="M "+f+" "+m+" "}for(var n=1;n<g.length-1;n++){var a=g[n],d=a.position,k=d.x;d=d.y;var b=a,e=b.controlPoints.previous;c=b.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+(m+h.controlPoints.next.y)+" "+(k+e.x)+" "+(d+e.y)+" "+k+" "+d+" "):c+("L "+k+" "+d+" ");h=a;f=k;m=d}0<g.length&&(a=g[g.length-1].position,n=a.x,a=a.y,g=g[g.length-1],k=g.controlPoints.previous,
c=g.isSmooth?c+("C "+(f+h.controlPoints.next.x)+" "+(m+h.controlPoints.next.y)+" "+(n+k.x)+" "+(a+k.y)+" "+n+" "+a):c+("L "+n+" "+a));return c}function fz(g,c){var h=g.id,f=g.vertices,m=g.fill,n=g.borderColor,a=g.borderWidth;f.length&&(c.d=Lg.getSvgVertices(f));Lg.addSvgBorderStyle(g,c);c["stroke-width"]=a.valueOf();c.fill=m?m.isGradient?"url(#gradient-fill"+h+")":m.toString():"transparent";c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+h+")":n.valueOf().toString();return c}function pw(g){var c=
g.reactsToPointer,h=g.nativeCursor,f=g.clipMode,m=ce.styleProps(g);g=g._animationQueue.maskedProps("css");"backgroundImage"in g&&delete m.background;"visible"!==f&&(m.overflow=f,m["-webkit-overflow-scrolling"]="touch",m["overflow-anchor"]="none");Object.assign(m,g);m.position="absolute";m["pointer-events"]=c?"auto":"none";m.cursor=h;return m}function dL(g,c){this.morph=g;this.type=c}function qw(g,c){c={animation:new ce.Animation(g),key:g.id,id:g.id,attributes:{},className:(g.hideScrollbars?g.styleClasses.concat("hiddenScrollbar"):
g.styleClasses).join(" "),draggable:!1,"morph-after-render-hook":new ce.MorphAfterRenderHook(g,c)};c.attributes["touch-action"]=ce.bowser.ios&&g.draggable&&!g.isWorld?"none":ce.bowser.ios&&"visible"!=g.clipMode&&!g.isWorld?"auto":"manipulation";return c}function OD(g){var c=new ce.SvgAnimation(g,"svg"),h={};ce.addSvgAttributes(g,h);Object.assign(h,g._animationQueue.maskedProps("svg"));return{animation:c,attributes:h}}function PD(g){var c=new ce.SvgAnimation(g,"path"),h={mask:0!==g.drawnProportion?
"url(#mask"+g.id+")":""};ce.addPathAttributes(g,h);Object.assign(h,g._animationQueue.maskedProps("path"));return{animation:c,attributes:h}}function QD(g,c,h){var f=h=h.valueOf(),m=f.bounds,n=f.focus,a=f.vector;f=f.stops;var d=c.x;c=c.y;g={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+g,gradientUnits:"userSpaceOnUse",r:"50%"}};a&&(g.attributes.gradientTransform="rotate("+ce.num.toDegrees(a.extent().theta())+", "+d/2+", "+c/2+")");n&&m&&(a=m.width,m=m.height,g.attributes.gradientTransform=
"matrix(\n"+a/d+", 0, 0, "+m/c+",\n"+(d/2-a/d*(d/2)+n.x*d-d/2)+",\n"+(c/2-m/c*(c/2)+n.y*c-c/2)+")");return ce.h(h.type,g,f.map(function(k){return ce.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*k.offset+"%","stop-opacity":k.color.a,"stop-color":k.color.withA(1).toString()}})}))}function RD(g,c){c=void 0===c?g.env.renderer:c;return ce.createNode(g.render(c),c.domEnvironment)}function SD(g,c){var h=c.renderMap.get(g),f=c.getNodeForMorph(g);if(f&&h){var m=c.render(g),n=ce.diff(h,
m);if(g=c.renderMap.get(g.owner))g=g.children[0].children,h=g.indexOf(h),g[h]=m,ce.patch(f,n)}}function TD(g,c){if(g.needsRerender()){var h=!1,f=c.domNode,m=c.renderMap.get(g)||f&&(h=!0)&&ce.parser(f)||c.render(g),n=c.render(g);h&&(m.key=n.key);h=ce.diff(m,n);f=f||(c.domNode=ce.createNode(m,c.domEnvironment));f.parentNode||ce.initDOMState(c,g);ce.patch(f,h);c.renderFixedMorphs(n.fixedMorphs,g)}}function UD(g,c,h){return(((1-3*h+3*c)*g+(3*h-6*c))*g+3*c)*g}function q8(g){return g}function ur(g){return He.obj.isFunction(g)?
g:He.Bezier.apply(He,$jscomp.arrayFromIterable(eval("(["+g.match(/\((.*)\)/)[1]+"])")))}function rw(g){var c=0,h=0;do c+=g.offsetTop||0,h+=g.offsetLeft||0,g=g.offsetParent;while(g);return{top:c,left:h}}function eL(){return System.get("@system-env").browser?lg.createDOMEnvironment_browser():lg.createDOMEnvironment_node()}function VD(){return lg._defaultEnv||(lg._defaultEnv=System.get("@system-env").browser?new lg.DomEnvironment(window,document,function(){}):lg.createDOMEnvironment())}function Vo(g,
c,h){g=void 0===g?"lively-css":g;h=void 0===h?document:h;var f=h.getElementById(g);return f?lg.setCSSDef(f,c,h):lg.addCSSDef(g,c,h)}function Bt(g,c,h,f){h=void 0===h?document:h;f=void 0===f?!0:f;var m=h.getElementById(g),n=!1;return m?f&&m.getAttribute("href")!==c?(m.setAttribute("href",c),m.onload=function(){return n=!0},lg.promise.waitFor(3E4,function(){return!!n&&m})):Promise.resolve():(m=document.createElement("link"),m.type="text/css",m.rel="stylesheet",m.setAttribute("id",g),m.setAttribute("href",
c),m.onload=function(){return n=!0},(h.head||h).appendChild(m),lg.promise.waitFor(3E4,function(){return!!n&&m}))}function WD(g,c){if("string"===typeof g)return g;if(!g||"object"!==typeof g)return null;switch(c){case "ios":return g.ios||g.mac;case "mac":return g.mac||g.ios;case "win":case "windows":case "windowsphone":return g.win||g.windows;case "linux":return g.linux||g.win||g.windows;case "chromeos":return g.chromeos||g.linux||g.win||g.windows;case "android":return g.android||g.linux||g.win||g.windows;
default:return g.linux||g.win||g.windows}}function XD(){fL=!0;for(var g,c,h=gz.length;h;){c=gz;gz=[];for(g=-1;++g<h;)c[g]();h=gz.length}fL=!1}function sw(g,c,h){var f=h[h.length-1];g===f.element&&(h.pop(),f=h[h.length-1]);h=f.element;f=f.index;Array.isArray(h)?h.push(g):f===c.length-2?(c=c.pop(),h[c]=g):c.push(g)}function Ai(){Ai.init.call(this)}function YD(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g);}function RU(g,c,
h,f){var m,n,a;if(YD(h),void 0===(n=g._events)?(n=g._events=Object.create(null),g._eventsCount=0):(void 0!==n.newListener&&(g.emit("newListener",c,h.listener?h.listener:h),n=g._events),a=n[c]),void 0===a)n[c]=h,++g._eventsCount;else if("function"==typeof a?a=n[c]=f?[h,a]:[a,h]:f?a.unshift(h):a.push(h),0<(m=void 0===g._maxListeners?Ai.defaultMaxListeners:g._maxListeners)&&a.length>m&&!a.warned)a.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),
h.name="MaxListenersExceededWarning",h.emitter=g,h.type=c,h.count=a.length,console&&console.warn&&console.warn(h);return g}function r8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function SU(g,c,h){g={fired:!1,wrapFn:void 0,target:g,type:c,listener:h};c=r8.bind(g);return c.listener=h,g.wrapFn=c,c}function TU(g,c,h){g=g._events;if(void 0===g)return[];c=g[c];if(void 0===
c)h=[];else if("function"==typeof c)h=h?[c.listener||c]:[c];else if(h)for(h=Array(c.length),g=0;g<h.length;++g)h[g]=c[g].listener||c[g];else h=UU(c,c.length);return h}function VU(g){var c=this._events;if(void 0!==c){g=c[g];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function UU(g,c){for(var h=Array(c),f=0;f<c;++f)h[f]=g[f];return h}function tw(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function vr(){this._store={}}function hz(g){this._store=new vr;if(g&&
Array.isArray(g))for(var c=0,h=g.length;c<h;c++)this.add(g[c])}function ek(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var h=[];var f=0;for(c=g.length;f<c;f++)h[f]=ek(g[f]);return h}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(f=new ArrayBuffer(g.byteLength),h=new Uint8Array(f),g=new Uint8Array(g),
h.set(g),g=f):(f=g.size,h=g.type,g="function"===typeof g.slice?g.slice(0,f,h):g.webkitSlice(0,f,h)),g;h=Object.getPrototypeOf(g);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&WU.call(h)==s8);if(!h)return g;h={};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c=ek(g[f]),"undefined"!==typeof c&&(h[f]=c));return h}function XU(g){var c=!1;return uw(function(h){if(c)throw Error("once called more than once");c=!0;g.apply(this,h)})}function YU(g){return uw(function(c){c=ek(c);
var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,m=new Promise(function(n,a){var d;try{var k=XU(function(b,e){b?a(b):n(e)});c.push(k);(d=g.apply(h,c))&&"function"===typeof d.then&&n(d)}catch(b){a(b)}});f&&m.then(function(n){f(null,n)},f);return m})}function t8(g,c,h){if(g.constructor.listeners("debug").length){for(var f=["api",g.name,c],m=0;m<h.length-1;m++)f.push(h[m]);g.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(a,d){var k=["api",g.name,c];k=k.concat(a?["error",
a]:["success",d]);g.constructor.emit("debug",k);n(a,d)}}}function Nj(g,c){return YU(uw(function(h){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var f=this;t8(f,g,h);return this.taskqueue.isReady?c.apply(this,h):new Promise(function(m,n){f.taskqueue.addTask(function(a){a?n(a):m(f[g].apply(f,h))})})}))}function iz(g,c){for(var h={},f=0,m=c.length;f<m;f++){var n=c[f];n in g&&(h[n]=g[n])}return h}function ZU(g){return g}
function u8(g){return[{ok:g}]}function $U(g,c,h){function f(){var q=[];e.forEach(function(u){u.docs.forEach(function(w){q.push({id:u.id,docs:[w]})})});h(null,{results:q})}function m(){if(!(p>=l.length)){var q=l.slice(p,Math.min(p+6,l.length));n(q,p);p+=q.length}}function n(q,u){q.forEach(function(w,y){var A=u+y;y=d.get(w);var C=iz(y[0],["atts_since","attachments"]);C.open_revs=y.map(function(L){return L.rev});C.open_revs=C.open_revs.filter(ZU);var D=ZU;0===C.open_revs.length&&(delete C.open_revs,
D=u8);["revs","attachments","binary","ajax","latest"].forEach(function(L){L in c&&(C[L]=c[L])});g.get(w,C,function(L,I){L=L?[{error:L}]:D(I);e[A]={id:w,docs:L};++b===k&&f();m()})})}var a=c.docs,d=new ym;a.forEach(function(q){d.has(q.id)?d.get(q.id).push(q):d.set(q.id,[q])});var k=d.size,b=0,e=Array(k),l=[];d.forEach(function(q,u){l.push(u)});var p=0;m()}function v8(g){jz&&addEventListener("storage",function(c){g.emit(c.key)})}function vw(){am.EventEmitter.call(this);this._listeners={};v8(this)}function an(g){if("undefined"!==
typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function w8(g){var c=0;g||(c=2E3);g=parseInt(g,10)||0;c=parseInt(c,10);c=c!==c||c<=g?(g||1)<<1:c+1;6E5<c&&(g=3E5,c=6E5);return~~((c-g)*Math.random()+g)}function gL(g,c){an("info","The above "+g+" is totally normal. "+c)}function Li(g,c,h){Error.call(this,h);this.status=g;this.name=c;this.message=h;this.error=!0}function lh(g,c){function h(f){for(var m in g)"function"!==typeof g[m]&&
(this[m]=g[m]);void 0!==f&&(this.reason=f)}h.prototype=Li.prototype;return new h(c)}function ww(g){if("object"!==typeof g){var c=g;g=aV;g.data=c}"error"in g&&"conflict"===g.error&&(g.name="conflict",g.status=409);"name"in g||(g.name=g.error||"unknown");"status"in g||(g.status=500);"message"in g||(g.message=g.message||g.reason);return g}function hL(g){var c={},h=g.filter&&"function"===typeof g.filter;c.query=g.query_params;return function(f){f.doc||(f.doc={});var m;if(m=h)try{m=!(0,g.filter)(f.doc,
c)}catch(a){m=lh(ZD,"Filter function threw: "+a.toString())}if("object"===typeof m)return m;if(m)return!1;if(!g.include_docs)delete f.doc;else if(!g.attachments)for(var n in f.doc._attachments)f.doc._attachments.hasOwnProperty(n)&&(f.doc._attachments[n].stub=!0);return!0}}function $D(g){for(var c=[],h=0,f=g.length;h<f;h++)c=c.concat(g[h]);return c}function bV(g){var c;g?"string"!==typeof g?c=lh(cV):/^_/.test(g)&&!/^_(design|local)/.test(g)&&(c=lh(x8)):c=lh(y8);if(c)throw c;}function Wo(g){return"boolean"===
typeof g._remote?g._remote:"function"===typeof g.type?(an("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===g.type()):!1}function iL(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function dV(g){return(g=iL(g))?g.join("/"):null}function eV(g){g=z8.exec(g);for(var c={},h=14;h--;){var f=fV[h],m=g[h]||"",n=-1!==["user","password"].indexOf(f);c[f]=n?decodeURIComponent(m):m}c.queryKey={};c[fV[12]].replace(A8,function(a,
d,k){d&&(c.queryKey[d]=k)});return c}function jL(g,c){var h=[],f=[],m;for(m in c)c.hasOwnProperty(m)&&(h.push(m),f.push(c[m]));h.push(g);return Function.apply(null,h).apply(null,f)}function aE(g,c,h){return new Promise(function(f,m){g.get(c,function(n,a){if(n){if(404!==n.status)return m(n);a={}}n=a._rev;a=h(a);if(!a)return f({updated:!1,rev:n});a._id=c;a._rev=n;f(B8(g,a,h))})})}function B8(g,c,h){return g.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;
return aE(g,c._id,h)})}function kL(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(m){if("TypeError"!==m.name)throw m;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),f=0;f<g.length;f+=1)h.append(g[f]);return h.getBlob(c.type)}}function lL(g,c){for(var h=g.length,f=new ArrayBuffer(h),m=new Uint8Array(f),n=0;n<h;n++)m[n]=g.charCodeAt(n);return kL([f],{type:c})}function mL(g,
c){return lL(atob(g),c)}function gV(g,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(m){var n=m.target.result||"";if(f)return c(n);m="";n=new Uint8Array(n);for(var a=n.byteLength,d=0;d<a;d++)m+=String.fromCharCode(n[d]);c(m)};f?h.readAsBinaryString(g):h.readAsArrayBuffer(g)}function hV(g,c){gV(g,function(h){c(h)})}function nL(g,c){hV(g,function(h){c(btoa(h))})}function C8(g,c){var h=new FileReader;h.onloadend=function(f){f=f.target.result||new ArrayBuffer(0);
c(f)};h.readAsArrayBuffer(g)}function D8(g,c,h){return g.webkitSlice?g.webkitSlice(c,h):g.slice(c,h)}function E8(g,c,h,f,m){if(0<h||f<c.size)c=D8(c,h,f);C8(c,function(n){g.append(n);m()})}function F8(g,c,h,f,m){if(0<h||f<c.length)c=c.substring(h,f);g.appendBinary(c);m()}function oL(g,c){function h(){G8(m)}function f(){var p=e.end(!0);p=btoa(p);c(p);e.destroy()}function m(){var p=b*d,q=p+d;b++;b<k?l(e,g,p,q,h):l(e,g,p,q,f)}var n="string"===typeof g,a=n?g.length:g.size,d=Math.min(32768,a),k=Math.ceil(a/
d),b=0,e=n?new bE:new bE.ArrayBuffer,l=n?F8:E8;m()}function iV(g,c){g=ek(g);if(!c)return jV.v4().replace(/-/g,"").toLowerCase();delete g._rev_tree;return bE.hash(JSON.stringify(g))}function Ct(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var m=f.length;h<m;h++)g.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(d!==f?d:a!==c?a<c:n<h)){var n=h;var a=c;var d=f}}return a+"-"+n}function Dt(g,c){g=g.slice();for(var h;h=g.pop();){var f=h.pos,
m=h.ids,n=m[2];h=c(0===n.length,f,m[0],h.ctx,m[1]);m=0;for(var a=n.length;m<a;m++)g.push({pos:f+1,ids:n[m],ctx:h})}}function H8(g,c){return g.pos-c.pos}function pL(g){var c=[];Dt(g,function(f,m,n,a,d){f&&c.push({rev:m+"-"+n,pos:m,opts:d})});c.sort(H8).reverse();g=0;for(var h=c.length;g<h;g++)delete c[g].pos;return c}function qL(g){var c=Ct(g);g=pL(g.rev_tree);for(var h=[],f=0,m=g.length;f<m;f++){var n=g[f];n.rev===c||n.opts.deleted||h.push(n.rev)}return h}function I8(g){var c=[];Dt(g.rev_tree,function(h,
f,m,n,a){"available"!==a.status||h||(c.push(f+"-"+m),a.status="missing")});return c}function kV(g){var c=[];g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[0],a=m[1];m=m[2];var d=0===m.length;h=h.history?h.history.slice():[];h.push({id:n,opts:a});d&&c.push({pos:f+1-h.length,ids:h});n=0;for(a=m.length;n<a;n++)g.push({pos:f+1,ids:m[n],history:h})}return c.reverse()}function J8(g,c){return g.pos-c.pos}function lV(g,c){for(var h,f,m=g.length;c<m;c++){var n=g[c];n=[n.id,n.opts,[]];f?(f[2].push(n),
f=n):h=f=n}return h}function K8(g,c){return g[0]<c[0]?-1:1}function mV(g,c){c=[{tree1:g,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),m=f.tree1;f=f.tree2;if(m[1].status||f[1].status)m[1].status="available"===m[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(m[2][0]){for(var a=!1,d=0;d<m[2].length;d++)m[2][d][0]===f[2][n][0]&&(c.push({tree1:m[2][d],tree2:f[2][n]}),a=!0);if(!a){h="new_branch";a=m[2];d=f[2][n];for(var k,b=a,e=d,l=K8,p=0,q=b.length;p<q;)k=
p+q>>>1,0>l(b[k],e)?p=k+1:q=k;a.splice(p,0,d)}}else h="new_leaf",m[2][0]=f[2][n]}return{conflicts:h,tree:g}}function nV(g,c,h){var f=[],m=!1,n=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var a=0,d=g.length;a<d;a++){var k=g[a];if(k.pos===c.pos&&k.ids[0]===c.ids[0])n=mV(k.ids,c.ids),f.push({pos:k.pos,ids:n.tree}),m=m||n.conflicts,n=!0;else if(!0!==h){var b=k.pos<c.pos?k:c,e=k.pos<c.pos?c:k,l=[],p=[];for(p.push({ids:b.ids,diff:e.pos-b.pos,parent:null,parentIdx:null});0<p.length;){var q=
p.pop();if(0===q.diff)q.ids[0]===e.ids[0]&&l.push(q);else for(var u=q.ids[2],w=0,y=u.length;w<y;w++)p.push({ids:u[w],diff:q.diff-1,parent:q.ids,parentIdx:w})}(l=l[0])?(n=mV(l.ids,e.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:b.pos,ids:b.ids}),m=m||n.conflicts,n=!0):f.push(k)}else f.push(k)}n||f.push(c);f.sort(J8);return{tree:f,conflicts:m||"internal_node"}}function L8(g,c){g=kV(g);for(var h,f,m=0,n=g.length;m<n;m++){var a=g[m],d=a.ids;if(d.length>c){h||(h={});var k=d.length-c;var b={pos:a.pos+
k,ids:lV(d,k)};for(var e=0;e<k;e++)h[a.pos+e+"-"+d[e].id]=!0}else b={pos:a.pos,ids:lV(d,0)};f=f?nV(f,b,!0).tree:[b]}h&&Dt(f,function(l,p,q){delete h[p+"-"+q]});return{tree:f,revs:h?Object.keys(h):[]}}function oV(g,c,h){g=nV(g,c);h=L8(g.tree,h);return{tree:h.tree,stemmedRevs:h.revs,conflicts:g.conflicts}}function M8(g){return g.ids}function hq(g,c){c||(c=Ct(g));c=c.substring(c.indexOf("-")+1);g=g.rev_tree.map(M8);for(var h;h=g.pop();){if(h[0]===c)return!!h[1].deleted;g=g.concat(h[2])}}function Et(g){return/^_local/.test(g)}
function N8(g,c){for(var h=c.rev_tree.slice(),f;f=h.pop();){var m=f.pos,n=f.ids,a=n[0],d=n[1];n=n[2];var k=0===n.length;f=f.history?f.history.slice():[];f.push({id:a,pos:m,opts:d});if(k)for(d=0,k=f.length;d<k;d++){var b=f[d];if(b.pos+"-"+b.id===g)return m+"-"+a}a=0;for(d=n.length;a<d;a++)h.push({pos:m+1,ids:n[a],history:f})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+g);}function kz(g,c,h){function f(){m.cancel()}am.EventEmitter.call(this);var m=this;this.db=g;c=c?ek(c):
{};var n=c.complete=XU(function(d,k){d?(k=m,0<("listenerCount"in k?k.listenerCount("error"):am.EventEmitter.listenerCount(k,"error"))&&m.emit("error",d)):m.emit("complete",k);m.removeAllListeners();g.removeListener("destroyed",f)});h&&(m.on("complete",function(d){h(null,d)}),m.on("error",h));g.once("destroyed",f);c.onChange=function(d,k,b){if(!m.isCancelled)try{m.emit("change",d,k,b)}catch(e){an("error",'Error in .on("change", function):',e)}};var a=new Promise(function(d,k){c.complete=function(b,
e){b?k(b):d(e)}});m.once("cancel",function(){g.removeListener("destroyed",f);c.complete(null,{status:"cancelled"})});this.then=a.then.bind(a);this["catch"]=a["catch"].bind(a);this.then(function(d){n(null,d)},n);g.taskqueue.isReady?m.validateChanges(c):g.taskqueue.addTask(function(d){d?c.complete(d):m.isCancelled?m.emit("cancel"):m.validateChanges(c)})}function O8(g,c,h){var f=[{rev:g._rev}];"all_docs"===h.style&&(f=pL(c.rev_tree).map(function(m){return{rev:m.rev}}));f={id:c.id,changes:f,doc:g};hq(c,
g._rev)&&(f.deleted=!0);h.conflicts&&(f.doc._conflicts=qL(c),f.doc._conflicts.length||delete f.doc._conflicts);return f}function rL(g,c){return function(h,f){h||f[0]&&f[0].error?(h=h||f[0],h.docId=c,g(h)):g(null,f.length?f[0]:f)}}function P8(g){for(var c=0;c<g.length;c++){var h=g[c];if(h._deleted)delete h._attachments;else if(h._attachments)for(var f=Object.keys(h._attachments),m=0;m<f.length;m++){var n=f[m];h._attachments[n]=iz(h._attachments[n],"data digest content_type length revpos stub".split(" "))}}}
function Q8(g,c){var h=g._id;var f=c._id;h=h<f?-1:h>f?1:0;if(0!==h)return h;g=g._revisions?g._revisions.start:0;c=c._revisions?c._revisions.start:0;return g<c?-1:g>c?1:0}function R8(g){var c={},h=[];Dt(g,function(f,m,n,a){m=m+"-"+n;f&&(c[m]=0);void 0!==a&&h.push({from:a,to:m});return m});h.reverse();h.forEach(function(f){c[f.from]=void 0===c[f.from]?1+c[f.to]:Math.min(c[f.from],1+c[f.to])});return c}function S8(g){var c="limit"in g?g.keys.slice(g.skip,g.limit+g.skip):0<g.skip?g.keys.slice(g.skip):
g.keys;g.keys=c;g.skip=0;delete g.limit;g.descending&&(c.reverse(),g.descending=!1)}function pV(g){var c=g._compactionQueue[0],h=c.opts,f=c.callback;g.get("_local/compaction").catch(function(){return!1}).then(function(m){m&&m.last_seq&&(h.last_seq=m.last_seq);g._compact(h,function(n,a){n?f(n):f(null,a);Xo(function(){g._compactionQueue.shift();g._compactionQueue.length&&pV(g)})})})}function $i(){am.EventEmitter.call(this);for(var g in $i.prototype)"function"===typeof this[g]&&(this[g]=this[g].bind(this))}
function lz(){this.failed=this.isReady=!1;this.queue=[]}function T8(g,c){var h=g.match(/([a-z-]*):\/\/(.*)/);if(h)return{name:/https?/.test(h[1])?h[1]+"://"+h[2]:h[2],adapter:h[1]};var f=hh.adapters,m=hh.preferredAdapters;h=hh.prefix;c=c.adapter;if(!c)for(var n=0;n<m.length;++n)if(c=m[n],"idb"===c&&"websql"in f&&jz&&localStorage["_pouch__websqldb_"+h+g])an("log",'PouchDB is downgrading "'+g+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;f=f[c];return{name:(f&&
"use_prefix"in f?f.use_prefix:1)?h+g:g,adapter:c}}function U8(g){function c(f){g.removeListener("closed",h);f||g.constructor.emit("destroyed",g.name)}function h(){g.removeListener("destroyed",c);g.constructor.emit("unref",g)}g.once("destroyed",c);g.once("closed",h);g.constructor.emit("ref",g)}function hh(g,c){if(!(this instanceof hh))return new hh(g,c);var h=this;c=c||{};g&&"object"===typeof g&&(c=g,g=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=ek(c);
h.auto_compaction=c.auto_compaction;h.prefix=hh.prefix;if("string"!==typeof g)throw Error("Missing/invalid DB name");var f=T8((c.prefix||"")+g,c);c.name=f.name;c.adapter=c.adapter||f.adapter;h.name=g;h._adapter=c.adapter;hh.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!hh.adapters[c.adapter]||!hh.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+c.adapter);$i.call(h);h.taskqueue=new lz;h.adapter=c.adapter;hh.adapters[c.adapter].call(h,c,function(m){if(m)return h.taskqueue.fail(m);
U8(h);h.emit("created",h);hh.emit("created",h.name);h.taskqueue.ready(h)})}function qV(g,c){for(var h=0,f=c.length;h<f&&(g=g[c[h]],g);h++);return g}function rV(g){for(var c=[],h="",f=0,m=g.length;f<m;f++){var n=g[f];"."===n?0<f&&"\\"===g[f-1]?h=h.substring(0,h.length-1)+".":(c.push(h),h=""):h+=n}c.push(h);return c}function V8(g){return g[Object.keys(g)[0]]}function mz(g){var c={};g.forEach(function(h){Object.keys(h).forEach(function(f){var m=h[f];"object"!==typeof m&&(m={$eq:m});if(-1<sV.indexOf(f))c[f]=
m instanceof Array?m.map(function(a){return mz([a])}):mz([m]);else{var n=c[f]=c[f]||{};Object.keys(m).forEach(function(a){var d=m[a];"$gt"===a||"$gte"===a?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?"$gte"===a?d>n.$gte&&(n.$gte=d):d>=n.$gte&&(delete n.$gte,n.$gt=d):"undefined"!==typeof n.$gt?"$gte"===a?d>n.$gt&&(delete n.$gt,n.$gte=d):d>n.$gt&&(n.$gt=d):n[a]=d):"$lt"===a||"$lte"===a?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===a?d<n.$lte&&(n.$lte=d):d<=n.$lte&&(delete n.$lte,
n.$lt=d):"undefined"!==typeof n.$lt?"$lte"===a?d<n.$lt&&(delete n.$lt,n.$lte=d):d<n.$lt&&(n.$lt=d):n[a]=d):"$ne"===a?"$ne"in n?n.$ne.push(d):n.$ne=[d]:"$eq"===a?(delete n.$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,n.$eq=d):n[a]=d})}})});return c}function tV(g){for(var c in g){if(Array.isArray(g))for(var h in g)g[h].$and&&(g[h]=mz(g[h].$and));var f=g[c];"object"===typeof f&&tV(f)}return g}function uV(g,c){for(var h in g){"$and"===h&&(c=!0);var f=g[h];"object"===typeof f&&(c=uV(f,c))}return c}
function W8(g){var c=ek(g);g=!1;uV(c,!1)&&(c=tV(c),"$and"in c&&(c=mz(c.$and)),g=!0);["$or","$nor"].forEach(function(a){a in c&&c[a].forEach(function(d){for(var k=Object.keys(d),b=0;b<k.length;b++){var e=k[b],l=d[e];if("object"!==typeof l||null===l)d[e]={$eq:l}}})});"$not"in c&&(c.$not=mz([c.$not]));for(var h=Object.keys(c),f=0;f<h.length;f++){var m=h[f],n=c[m];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!g&&(n.$ne=[n.$ne]);c[m]=n}return c}function Bk(g,c){if(g===c)return 0;g=Ft(g);c=Ft(c);
var h=sL(g),f=sL(c);if(0!==h-f)return h-f;switch(typeof g){case "number":return g-c;case "boolean":return g<c?-1:1;case "string":return g===c?0:g>c?1:-1}if(Array.isArray(g))a:{h=Math.min(g.length,c.length);for(f=0;f<h;f++){var m=Bk(g[f],c[f]);if(0!==m){g=m;break a}}g=g.length===c.length?0:g.length>c.length?1:-1}else a:{h=Object.keys(g);f=Object.keys(c);m=Math.min(h.length,f.length);for(var n=0;n<m;n++){var a=Bk(h[n],f[n]);if(0!==a){g=a;break a}a=Bk(g[h[n]],c[f[n]]);if(0!==a){g=a;break a}}g=h.length===
f.length?0:h.length>f.length?1:-1}return g}function Ft(g){switch(typeof g){case "undefined":return null;case "number":if(Infinity===g||-Infinity===g||isNaN(g))return null;break;case "object":var c=g;if(Array.isArray(g)){var h=g.length;g=Array(h);for(var f=0;f<h;f++)g[f]=Ft(c[f])}else{if(g instanceof Date)return g.toJSON();if(null!==g)for(h in g={},c)c.hasOwnProperty(h)&&(f=c[h],"undefined"!==typeof f&&(g[h]=Ft(f)))}}return g}function X8(g){if(null!==g)switch(typeof g){case "boolean":return g?1:0;
case "number":if(0===g)g="1";else{var c=g.toExponential().split(/e\+?/),h=parseInt(c[1],10);g=0>g;h=((g?-h:h)- -324).toString();for(var f="",m=3-h.length;f.length<m;)f+="0";h=(g?"0":"2")+(""+(f+h));c=Math.abs(parseFloat(c[0]));g&&(c=10-c);g=c.toFixed(20);g=g.replace(/\.?0+$/,"");g=h+=""+g}return g;case "string":return g.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(g);c=n?g:Object.keys(g);h=-1;f=c.length;m="";
if(n)for(;++h<f;)m+=Zn(c[h]);else for(;++h<f;)n=c[h],m+=Zn(n)+Zn(g[n]);return m}return""}function Zn(g){g=Ft(g);return sL(g)+""+X8(g)+"\x00"}function sL(g){var c=["boolean","number","string","object"].indexOf(typeof g);if(~c)return null===g?1:Array.isArray(g)?5:3>c?c+2:c+3;if(Array.isArray(g))return 5}function Y8(g){function c(h){return g.map(function(f){f=Object.keys(f)[0];f=rV(f);return qV(h,f)})}return function(h,f){var m=c(h.doc),n=c(f.doc);m=Bk(m,n);if(0!==m)return m;h=h.doc._id;f=f.doc._id;
return h<f?-1:h>f?1:0}}function Z8(g,c,h){g=g.filter(function(m){return xw(m.doc,c.selector,h)});if(c.sort){var f=Y8(c.sort);g=g.sort(f);"string"!==typeof c.sort[0]&&"desc"===V8(c.sort[0])&&(g=g.reverse())}if("limit"in c||"skip"in c)f=c.skip||0,g=g.slice(f,("limit"in c?c.limit:g.length)+f);return g}function xw(g,c,h){return h.every(function(f){var m=c[f],n=rV(f),a=qV(g,n);return-1<sV.indexOf(f)?$8(f,m,g):tL(m,g,n,a)})}function tL(g,c,h,f){return g?"object"===typeof g?Object.keys(g).every(function(m){var n=
g[m];if(!vV[m])throw Error('unknown operator "'+m+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return vV[m](c,n,h,f)}):g===f:!0}function $8(g,c,h){return"$or"===g?c.some(function(f){return xw(h,f,Object.keys(f))}):"$not"===g?!xw(h,c,Object.keys(c)):!c.find(function(f){return xw(h,f,Object.keys(f))})}function nz(g){return"undefined"!==typeof g&&null!==g}function Gt(g){return"undefined"!==typeof g}function wV(g,
c){return c.some(function(h){return g instanceof Array?-1<g.indexOf(h):g===h})}function a9(g,c){return c.every(function(h){return-1<g.indexOf(h)})}function b9(g,c){switch(c){case "null":return null===g;case "boolean":return"boolean"===typeof g;case "number":return"number"===typeof g;case "string":return"string"===typeof g;case "array":return g instanceof Array;case "object":return"[object Object]"==={}.toString.call(g)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");
}function c9(g,c){if(g.selector&&g.filter&&"_selector"!==g.filter)return c(Error('selector invalid for filter "'+("string"===typeof g.filter?g.filter:"function")+'"'));c()}function d9(g){g.view&&!g.filter&&(g.filter="_view");g.selector&&!g.filter&&(g.filter="_selector");g.filter&&"string"===typeof g.filter&&("_view"===g.filter?g.view=dV(g.view):g.filter=dV(g.filter))}function e9(g,c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!Wo(g.db)}function f9(g,c){var h=c.complete;if("_view"===
c.filter){if(!c.view||"string"!==typeof c.view){var f=lh(ZD,"`view` filter parameter not found or invalid.");return h(f)}var m=iL(c.view);g.db.get("_design/"+m[0],function(a,d){if(g.isCancelled)return h(null,{status:"cancelled"});if(a)return h(ww(a));a=d&&d.views&&d.views[m[1]]&&d.views[m[1]].map;if(!a)return h(lh($n,d.views?"missing json key: "+m[1]:"missing json key: views"));d=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',
"  var view = "+a+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");d=jL(d,{});c.filter=d;g.doChanges(c)})}else if(c.selector)c.filter=function(a){var d=c.selector;if("object"!==typeof d)throw Error("Selector error: expected a JSON object");d=W8(d);return(a=Z8([{doc:a}],{selector:d},Object.keys(d)))&&1===a.length},g.doChanges(c);else{var n=iL(c.filter);g.db.get("_design/"+n[0],function(a,d){if(g.isCancelled)return h(null,{status:"cancelled"});if(a)return h(ww(a));a=d&&d.filters&&
d.filters[n[1]];if(!a)return h(lh($n,d&&d.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=jL('"use strict";\nreturn '+a+";",{});g.doChanges(c)})}}function xV(g){return g.reduce(function(c,h){c[h]=!0;return c},{})}function yV(g){if(!/^\d+-/.test(g))return lh(zV);var c=g.indexOf("-"),h=g.substring(0,c);g=g.substring(c+1);return{prefix:parseInt(h,10),id:g}}function AV(g,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};g._deleted&&(f.deleted=!0);if(c){g._id||(g._id=
cE());var m=iV(g,h.deterministic_revs);if(g._rev){c=yV(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[m,f,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[m,f,[]]}],n=1}else{if(g._revisions){m=g._revisions;n=m.start-m.ids.length+1;m=m.ids;c=[m[0],f,[]];h=1;for(var a=m.length;h<a;h++)c=[m[h],{status:"missing"},[c]];g._rev_tree=[{pos:n,ids:c}];n=g._revisions.start;m=g._revisions.ids[0]}if(!g._rev_tree){c=yV(g._rev);if(c.error)return c;n=c.prefix;m=c.id;g._rev_tree=
[{pos:n,ids:[m,f,[]]}]}}bV(g._id);g._rev=n+"-"+m;f={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((n="_"===d[0])&&!g9[d])throw g=lh(BV,d),g.message=BV.message+": "+d,g;n&&!h9[d]?f.metadata[d.slice(1)]=g[d]:f.data[d]=g[d]}return f}function i9(g,c,h){try{var f=atob(g.data)}catch(m){f={error:lh(CV,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);g.length=f.length;g.data="blob"===c?lL(f,g.content_type):"base64"===c?btoa(f):f;oL(f,function(m){g.digest=
"md5-"+m;h()})}function j9(g,c,h){oL(g.data,function(f){g.digest="md5-"+f;g.length=g.data.size||g.data.length||0;"binary"===c?hV(g.data,function(m){g.data=m;h()}):"base64"===c?nL(g.data,function(m){g.data=m;h()}):h()})}function k9(g,c,h){if(g.stub)return h();"string"===typeof g.data?i9(g,c,h):j9(g,c,h)}function l9(g,c,h){function f(){m++;g.length===m&&(n?h(n):h())}if(!g.length)return h();var m=0,n;g.forEach(function(a){function d(l){n=l;b++;b===k.length&&f()}var k=a.data&&a.data._attachments?Object.keys(a.data._attachments):
[],b=0;if(!k.length)return f();for(var e in a.data._attachments)a.data._attachments.hasOwnProperty(e)&&k9(a.data._attachments[e],c,d)})}function m9(g,c,h,f,m,n,a,d,k){g=g||1E3;var b=d.new_edits,e=new ym,l=0,p=c.length;c.forEach(function(q,u){if(q._id&&Et(q._id))h[q._deleted?"_removeLocal":"_putLocal"](q,{ctx:m},function(y,A){n[u]=y||A;++l===p&&k&&k()});else{var w=q.metadata.id;e.has(w)?(p--,e.get(w).push([q,u])):e.set(w,[[q,u]])}});e.forEach(function(q,u){function w(){++A<q.length?y():++l===p&&k&&
k()}function y(){var C=q[A],D=C[0];C=C[1];if(f.has(u)){var L=g,I=f.get(u);b:{var S=D.metadata.rev;var V=I.rev_tree.slice();var ba=S.split("-");S=parseInt(ba[0],10);ba=ba[1];for(var ua;ua=V.pop();){if(ua.pos===S&&ua.ids[0]===ba){V=!0;break b}for(var Fa=ua.ids[2],F=0,Y=Fa.length;F<Y;F++)V.push({pos:ua.pos+1,ids:Fa[F]})}V=!1}V&&!b?(n[C]=D,w()):(ba=I.winningRev||Ct(I),V="deleted"in I?I.deleted:hq(I,ba),S="deleted"in D.metadata?D.metadata.deleted:hq(D.metadata),ua=/^1-/.test(D.metadata.rev),V&&!S&&b&&
ua&&(ua=D.data,ua._rev=ba,ua._id=D.metadata.id,D=AV(ua,b)),ba=oV(I.rev_tree,D.metadata.rev_tree[0],L),b&&(V&&S&&"new_leaf"!==ba.conflicts||!V&&"new_leaf"!==ba.conflicts||V&&!S&&"new_branch"===ba.conflicts)?(D=lh(yw),n[C]=D,w()):(L=D.metadata.rev,D.metadata.rev_tree=ba.tree,D.stemmedRevs=ba.stemmedRevs||[],I.rev_map&&(D.metadata.rev_map=I.rev_map),I=Ct(D.metadata),S=hq(D.metadata,I),V=V===S?0:V<S?-1:1,L=L===I?S:hq(D.metadata,L),a(D,I,S,L,!0,V,C,w)))}else I=oV([],D.metadata.rev_tree[0],g),D.metadata.rev_tree=
I.tree,D.stemmedRevs=I.stemmedRevs||[],I=Ct(D.metadata),L=hq(D.metadata,I),"was_delete"in d&&L?(n[C]=lh($n,"deleted"),w()):b&&"missing"===D.metadata.rev_tree[0].ids[1].status?(D=lh(yw),n[C]=D,w()):a(D,I,L,L,!1,L?0:1,C,w)}var A=0;y()})}function Yo(g){return function(c){var h="unknown_error";c.target&&c.target.error&&(h=c.target.error.name||c.target.error.message);g(lh(uL,h,c.type))}}function vL(g,c,h){try{var f=JSON.stringify(g)}catch(m){f=DV.stringify(g)}return{data:f,winningRev:c,deletedOrLocal:h?
"1":"0",seq:g.seq,id:g.id}}function Ht(g){if(!g)return null;var c=g.data;try{var h=JSON.parse(c)}catch(f){h=DV.parse(c)}h.winningRev=g.winningRev;h.deleted="1"===g.deletedOrLocal;h.seq=g.seq;return h}function dE(g){if(!g)return g;var c=g._doc_id_rev.lastIndexOf(":");g._id=g._doc_id_rev.substring(0,c-1);g._rev=g._doc_id_rev.substring(c+1);delete g._doc_id_rev;return g}function EV(g,c,h,f){h?g?"string"!==typeof g?f(g):f(mL(g,c)):f(kL([""],{type:c})):g?"string"!==typeof g?gV(g,function(m){f(btoa(m))}):
f(g):f("")}function FV(g,c,h,f){function m(d,k){var b=d._attachments[k];d=b.digest;h.objectStore("attach-store").get(d).onsuccess=function(e){b.body=e.target.result.body;++a===n.length&&f&&f()}}var n=Object.keys(g._attachments||{});if(!n.length)return f&&f();var a=0;n.forEach(function(d){c.attachments&&c.include_docs?m(g,d):(g._attachments[d].stub=!0,++a===n.length&&f&&f())})}function wL(g,c){return Promise.all(g.map(function(h){if(h.doc&&h.doc._attachments){var f=Object.keys(h.doc._attachments);
return Promise.all(f.map(function(m){var n=h.doc._attachments[m];if("body"in n){var a=n.body,d=n.content_type;return new Promise(function(k){EV(a,d,c,function(b){h.doc._attachments[m]=zw(iz(n,["digest","content_type"]),{data:b});k()})})}}))}}))}function GV(g,c,h){function f(){m.length&&m.forEach(function(b){d.index("digestSeq").count(IDBKeyRange.bound(b+"::",b+"::\uffff",!1,!1)).onsuccess=function(e){e.target.result||a.delete(b)}})}var m=[],n=h.objectStore("by-sequence"),a=h.objectStore("attach-store"),
d=h.objectStore("attach-seq-store"),k=g.length;g.forEach(function(b){n.index("_doc_id_rev").getKey(c+"::"+b).onsuccess=function(e){e=e.target.result;"number"!==typeof e?(k--,k||f()):(n.delete(e),d.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(l){if(l=l.target.result){var p=l.value.digestSeq.split("::")[0];m.push(p);d.delete(l.primaryKey);l.continue()}else k--,k||f()})}})}function ao(g,c,h){try{return{txn:g.transaction(c,h)}}catch(f){return{error:f}}}function n9(g,c,h,f,m,n){function a(){var ub=
ao(m,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),"readwrite");if(ub.error)return n(ub.error);L=ub.txn;L.onabort=Yo(n);L.ontimeout=Yo(n);L.oncomplete=l;I=L.objectStore("document-store");S=L.objectStore("by-sequence");V=L.objectStore("attach-store");ba=L.objectStore("attach-seq-store");ua=L.objectStore("meta-store");ua.get("meta-store").onsuccess=function(xa){F=xa.target.result;b()};q(function(xa){if(xa)return db=!0,n(xa);e()})}function d(){W=!0;b()}
function k(){m9(g.revs_limit,D,f,la,L,ea,u,h,d)}function b(){F&&W&&(F.docCount+=ka,ua.put(F))}function e(){function ub(Da){(Da=Ht(Da.target.result))&&la.set(Da.id,Da);++xa===D.length&&k()}if(D.length)for(var xa=0,na=0,Aa=D.length;na<Aa;na++){var Pa=D[na];Pa._id&&Et(Pa._id)?++xa===D.length&&k():I.get(Pa.metadata.id).onsuccess=ub}}function l(){db||(oz.notify(f._meta.name),n(null,ea))}function p(ub,xa){V.get(ub).onsuccess=function(na){na.target.result?xa():(na=lh(o9,"unknown stub attachment with digest "+
ub),na.status=412,xa(na))}}function q(ub){var xa=[];D.forEach(function(Pa){Pa.data&&Pa.data._attachments&&Object.keys(Pa.data._attachments).forEach(function(Da){Da=Pa.data._attachments[Da];Da.stub&&xa.push(Da.digest)})});if(!xa.length)return ub();var na=0,Aa;xa.forEach(function(Pa){p(Pa,function(Da){Da&&!Aa&&(Aa=Da);++na===xa.length&&ub(Aa)})})}function u(ub,xa,na,Aa,Pa,Da,M,U){ub.metadata.winningRev=xa;ub.metadata.deleted=na;var aa=ub.data;aa._id=ub.metadata.id;aa._rev=ub.metadata.rev;Aa&&(aa._deleted=
!0);if(aa._attachments&&Object.keys(aa._attachments).length)return y(ub,xa,na,Pa,M,U);ka+=Da;b();w(ub,xa,na,Pa,M,U)}function w(ub,xa,na,Aa,Pa,Da){function M(La){var ib=ub.stemmedRevs||[];Aa&&f.auto_compaction&&(ib=ib.concat(I8(ub.metadata)));ib&&ib.length&&GV(ib,ub.metadata.id,L);pa.seq=La.target.result;La=vL(pa,xa,na);I.put(La).onsuccess=U}function U(){ea[Pa]={ok:!0,id:pa.id,rev:pa.rev};la.set(ub.metadata.id,ub.metadata);A(ub,pa.seq,Da)}var aa=ub.data,pa=ub.metadata;aa._doc_id_rev=pa.id+"::"+pa.rev;
delete aa._id;delete aa._rev;var ma=S.put(aa);ma.onsuccess=M;ma.onerror=function(La){La.preventDefault();La.stopPropagation();S.index("_doc_id_rev").getKey(aa._doc_id_rev).onsuccess=function(ib){S.put(aa,ib.target.result).onsuccess=M}}}function y(ub,xa,na,Aa,Pa,Da){function M(){aa===pa.length&&w(ub,xa,na,Aa,Pa,Da)}function U(){aa++;M()}var aa=0,pa=Object.keys(ub.data._attachments);pa.forEach(function(ma){ma=ub.data._attachments[ma];if(ma.stub)aa++,M();else{var La=ma.data;delete ma.data;ma.revpos=
parseInt(xa,10);C(ma.digest,La,U)}})}function A(ub,xa,na){function Aa(){++Da===M.length&&na()}function Pa(aa){aa=ba.put({seq:xa,digestSeq:ub.data._attachments[aa].digest+"::"+xa});aa.onsuccess=Aa;aa.onerror=function(pa){pa.preventDefault();pa.stopPropagation();Aa()}}var Da=0,M=Object.keys(ub.data._attachments||{});if(!M.length)return na();for(var U=0;U<M.length;U++)Pa(M[U])}function C(ub,xa,na){V.count(ub).onsuccess=function(Aa){if(Aa.target.result)return na();V.put({digest:ub,body:xa}).onsuccess=
na}}var D=c.docs,L,I,S,V,ba,ua,Fa,F;c=0;for(var Y=D.length;c<Y;c++){var Q=D[c];Q._id&&Et(Q._id)||(Q=D[c]=AV(Q,h.new_edits,g),Q.error&&!Fa&&(Fa=Q))}if(Fa)return n(Fa);var W=!1,ka=0,ea=Array(D.length),la=new ym,db=!1;l9(D,f._meta.blobSupport?"blob":"base64",function(ub){if(ub)return n(ub);a()})}function HV(g,c,h,f,m){function n(p){e=p.target.result;b&&m(b,e,l)}function a(p){b=p.target.result;e&&m(b,e,l)}function d(){if(!b.length)return m();var p=b[b.length-1];if(c&&c.upper)try{var q=IDBKeyRange.bound(p,
c.upper,!0,c.upperOpen)}catch(u){if("DataError"===u.name&&0===u.code)return m()}else q=IDBKeyRange.lowerBound(p,!0);c=q;e=b=null;g.getAll(c,f).onsuccess=n;g.getAllKeys(c,f).onsuccess=a}function k(p){p=p.target.result;if(!p)return m();m([p.key],[p.value],p)}-1===f&&(f=1E3);var b,e;if("function"===typeof g.getAll&&"function"===typeof g.getAllKeys&&1<f&&!h){var l={"continue":d};g.getAll(c,f).onsuccess=n;g.getAllKeys(c,f).onsuccess=a}else h?g.openCursor(c,"prev").onsuccess=k:g.openCursor(c).onsuccess=
k}function p9(g,c,h){if("function"===typeof g.getAll)g.getAll(c).onsuccess=h;else{var f=[];g.openCursor(c).onsuccess=function(m){(m=m.target.result)?(f.push(m.value),m.continue()):h({target:{result:f}})}}}function q9(g,c,h){var f=Array(g.length),m=0;g.forEach(function(n,a){c.get(n).onsuccess=function(d){f[a]=d.target.result?d.target.result:{key:n,error:"not_found"};m++;m===g.length&&h(g,f,{})}})}function r9(g,c,h,f,m){try{if(g&&c)return m?IDBKeyRange.bound(c,g,!h,!1):IDBKeyRange.bound(g,c,!1,!h);
if(g)return m?IDBKeyRange.upperBound(g):IDBKeyRange.lowerBound(g);if(c)return m?IDBKeyRange.lowerBound(c,!h):IDBKeyRange.upperBound(c,!h);if(f)return IDBKeyRange.only(f)}catch(n){return{error:n}}return null}function s9(g,c,h){function f(V,ba){V.openCursor(null,"prev").onsuccess=function(ua){ua=ua.target.result;var Fa=void 0;ua&&ua.key&&(Fa=ua.key);return ba({target:{result:[Fa]}})}}function m(V,ba,ua){D.get(V.id+"::"+ua).onsuccess=function(Fa){ba.doc=dE(Fa.target.result)||{};g.conflicts&&(Fa=qL(V),
Fa.length&&(ba.doc._conflicts=Fa));FV(ba.doc,g,C)}}function n(V){for(var ba=0,ua=V.length;ba<ua&&L.length!==u;ba++){var Fa=V[ba];if(Fa.error&&p)L.push(Fa);else{var F=Ht(Fa);Fa=F.winningRev;var Y={id:F.id,key:F.id,value:{rev:Fa}};F.deleted?p&&(L.push(Y),Y.value.deleted=!0,Y.doc=null):0>=q--&&(L.push(Y),g.include_docs&&m(F,Y,Fa))}}}function a(V,ba,ua){ua&&(n(ba),L.length<u&&ua.continue())}function d(V){V=V.target.result;g.descending&&(V=V.reverse());n(V)}function k(){var V={total_rows:I,offset:g.skip,
rows:L};g.update_seq&&void 0!==S&&(V.update_seq=S);h(null,V)}var b="startkey"in g?g.startkey:!1,e="endkey"in g?g.endkey:!1,l="key"in g?g.key:!1,p="keys"in g?g.keys:!1,q=g.skip||0,u="number"===typeof g.limit?g.limit:-1,w=!1!==g.inclusive_end,y,A;if(!p&&(A=(y=r9(b,e,w,l,g.descending))&&y.error)&&("DataError"!==A.name||0!==A.code))return h(lh(uL,A.name,A.message));b=["document-store","by-sequence","meta-store"];g.attachments&&b.push("attach-store");c=ao(c,b,"readonly");if(c.error)return h(c.error);var C=
c.txn;C.oncomplete=function(){g.attachments?wL(L,g.binary).then(k):k()};C.onabort=Yo(h);c=C.objectStore("document-store");b=C.objectStore("by-sequence");e=C.objectStore("meta-store");var D=b.index("_doc_id_rev"),L=[],I,S;e.get("meta-store").onsuccess=function(V){I=V.target.result.docCount};g.update_seq&&f(b,function(V){V.target.result&&0<V.target.result.length&&(S=V.target.result[0])});if(!A&&0!==u){if(p)return q9(g.keys,c,a);if(-1===u)return p9(c,y,d);HV(c,y,g.descending,u+q,a)}}function t9(g){return(new Promise(function(c){var h=
kL([""]);h=g.objectStore("detect-blob-support").put(h,"key");h.onsuccess=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),m=navigator.userAgent.match(/Edge\//);c(m||!f||43<=parseInt(f[1],10))};h.onerror=g.onabort=function(f){f.preventDefault();f.stopPropagation();c(!1)}})).catch(function(){return!1})}function u9(g,c){g.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(h){c(h.target.result)}}function v9(g,c,h,f){try{g(c,h)}catch(m){f.emit("error",
m)}}function IV(){!xL&&yL.length&&(xL=!0,yL.shift()())}function w9(g,c,h){yL.push(function(){g(function(f,m){v9(c,f,m,h);xL=!1;Xo(function(){IV()})})});IV()}function x9(g,c,h,f){function m(C,D,L,I){if(L.seq!==D)return I();if(L.winningRev===C._rev)return I(L,C);A.get(C._id+"::"+L.winningRev).onsuccess=function(S){I(L,dE(S.target.result))}}function n(C,D,L){if(k&&!k.has(C._id))return L();var I=u.get(C._id);if(I)return m(C,D,I,L);y.get(C._id).onsuccess=function(S){I=Ht(S.target.result);u.set(C._id,I);
m(C,D,I,L)}}function a(){g.complete(null,{results:l,last_seq:b})}g=ek(g);if(g.continuous){var d=h+":"+cE();oz.addListener(h,d,c,g);oz.notify(h);return{cancel:function(){oz.removeListener(h,d)}}}var k=g.doc_ids&&new pz(g.doc_ids);g.since=g.since||0;var b=g.since,e="limit"in g?g.limit:-1;0===e&&(e=1);var l=[],p=0,q=hL(g),u=new ym;c=["document-store","by-sequence"];g.attachments&&c.push("attach-store");f=ao(f,c,"readonly");if(f.error)return g.complete(f.error);var w=f.txn;w.onabort=Yo(g.complete);w.oncomplete=
function(){!g.continuous&&g.attachments?wL(l).then(a):a()};f=w.objectStore("by-sequence");var y=w.objectStore("document-store");var A=f.index("_doc_id_rev");c=g.since&&!g.descending?IDBKeyRange.lowerBound(g.since,!0):null;HV(f,c,g.descending,e,function(C,D,L){function I(Fa,F){var Y=g.processChange(F,Fa,g);b=Y.seq=Fa.seq;Fa=q(Y);if("object"===typeof Fa)return Promise.reject(Fa);if(!Fa)return Promise.resolve();p++;g.return_docs&&l.push(Y);return g.attachments&&g.include_docs?new Promise(function(Q){FV(F,
g,w,function(){wL([Y],g.binary).then(function(){Q(Y)})})}):Promise.resolve(Y)}function S(){for(var Fa=[],F=0,Y=V.length;F<Y&&p!==e;F++){var Q=V[F];Q&&Fa.push(I(ba[F],Q))}Promise.all(Fa).then(function(W){for(var ka=0,ea=W.length;ka<ea;ka++)if(W[ka])g.onChange(W[ka])}).catch(g.complete);p!==e&&L.continue()}if(L&&C.length){var V=Array(C.length),ba=Array(C.length),ua=0;D.forEach(function(Fa,F){Fa=dE(Fa);n(Fa,C[F],function(Y,Q){ba[F]=Y;V[F]=Q;++ua===C.length&&S()})})}})}function JV(g,c){var h=this;w9(function(f){y9(h,
g,f)},c,h.constructor)}function y9(g,c,h){function f(p){var q=p.createObjectStore("document-store",{keyPath:"id"});p.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});p.createObjectStore("attach-store",{keyPath:"digest"});p.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});p.createObjectStore("detect-blob-support");q.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});p.createObjectStore("local-store",{keyPath:"_id"});p=p.createObjectStore("attach-seq-store",
{autoIncrement:!0});p.createIndex("seq","seq");p.createIndex("digestSeq","digestSeq",{unique:!0})}function m(p,q){var u=p.objectStore("document-store");u.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});u.openCursor().onsuccess=function(w){if(w=w.target.result){var y=w.value,A=hq(y);y.deletedOrLocal=A?"1":"0";u.put(y);w.continue()}else q()}}function n(p,q){var u=p.objectStore("local-store"),w=p.objectStore("document-store"),y=p.objectStore("by-sequence");w.openCursor().onsuccess=function(A){var C=
A.target.result;if(C){var D=C.value;A=D.id;var L=Et(A);D=Ct(D);if(L){var I=A+"::"+D;L=A+"::";D=A+"::~";A=y.index("_doc_id_rev");L=IDBKeyRange.bound(L,D,!1,!1);var S=A.openCursor(L);S.onsuccess=function(V){(S=V.target.result)?(V=S.value,V._doc_id_rev===I&&u.put(V),y.delete(S.primaryKey),S.continue()):(w.delete(C.primaryKey),C.continue())}}else C.continue()}else q&&q()}}function a(p){p=p.createObjectStore("attach-seq-store",{autoIncrement:!0});p.createIndex("seq","seq");p.createIndex("digestSeq","digestSeq",
{unique:!0})}function d(p,q){var u=p.objectStore("by-sequence"),w=p.objectStore("attach-store"),y=p.objectStore("attach-seq-store");w.count().onsuccess=function(A){if(!A.target.result)return q();u.openCursor().onsuccess=function(C){C=C.target.result;if(!C)return q();for(var D=C.value,L=C.primaryKey,I=Object.keys(D._attachments||{}),S={},V=0;V<I.length;V++)S[D._attachments[I[V]].digest]=!0;D=Object.keys(S);for(V=0;V<D.length;V++)y.put({seq:L,digestSeq:D[V]+"::"+L});C.continue()}}}function k(p){function q(y){return y.data?
Ht(y):(y.deleted="1"===y.deletedOrLocal,y)}var u=p.objectStore("by-sequence"),w=p.objectStore("document-store");w.openCursor().onsuccess=function(y){function A(){var L=vL(D,D.winningRev,D.deleted);w.put(L).onsuccess=function(){C.continue()}}var C=y.target.result;if(C){var D=q(C.value);D.winningRev=D.winningRev||Ct(D);if(D.seq)return A();(function(){var L=D.id+"::",I=D.id+"::\uffff",S=0;u.index("_doc_id_rev").openCursor(IDBKeyRange.bound(L,I)).onsuccess=function(V){V=V.target.result;if(!V)return D.seq=
S,A();var ba=V.primaryKey;ba>S&&(S=ba);V.continue()}})()}}}var b=c.name,e=null;g._meta=null;g._remote=!1;g.type=function(){return"idb"};g._id=YU(function(p){p(null,g._meta.instanceId)});g._bulkDocs=function(p,q,u){n9(c,p,q,g,e,u)};g._get=function(p,q,u){function w(){u(C,{doc:y,metadata:A,ctx:D})}var y,A,C,D=q.ctx;if(!D){var L=ao(e,["document-store","by-sequence","attach-store"],"readonly");if(L.error)return u(L.error);D=L.txn}D.objectStore("document-store").get(p).onsuccess=function(I){A=Ht(I.target.result);
if(!A)return C=lh($n,"missing"),w();if(q.rev)var S=q.latest?N8(q.rev,A):q.rev;else if(S=A.winningRev,hq(A))return C=lh($n,"deleted"),w();I=D.objectStore("by-sequence");S=A.id+"::"+S;I.index("_doc_id_rev").get(S).onsuccess=function(V){(y=V.target.result)&&(y=dE(y));if(!y)return C=lh($n,"missing"),w();w()}}};g._getAttachment=function(p,q,u,w,y){if(w.ctx)p=w.ctx;else{p=ao(e,["document-store","by-sequence","attach-store"],"readonly");if(p.error)return y(p.error);p=p.txn}q=u.digest;var A=u.content_type;
p.objectStore("attach-store").get(q).onsuccess=function(C){EV(C.target.result.body,A,w.binary,function(D){y(null,D)})}};g._info=function(p){var q,u,w=ao(e,["meta-store","by-sequence"],"readonly");if(w.error)return p(w.error);w=w.txn;w.objectStore("meta-store").get("meta-store").onsuccess=function(y){u=y.target.result.docCount};w.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(y){q=(y=y.target.result)?y.key:0};w.oncomplete=function(){p(null,{doc_count:u,update_seq:q,idb_attachment_format:g._meta.blobSupport?
"binary":"base64"})}};g._allDocs=function(p,q){s9(p,e,q)};g._changes=function(p){return x9(p,g,b,e)};g._close=function(p){e.close();Aw.delete(b);p()};g._getRevisionTree=function(p,q){var u=ao(e,["document-store"],"readonly");if(u.error)return q(u.error);u.txn.objectStore("document-store").get(p).onsuccess=function(w){(w=Ht(w.target.result))?q(null,w.rev_tree):q(lh($n))}};g._doCompaction=function(p,q,u){var w=ao(e,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(w.error)return u(w.error);
var y=w.txn;y.objectStore("document-store").get(p).onsuccess=function(A){A=Ht(A.target.result);Dt(A.rev_tree,function(L,I,S,V,ba){-1!==q.indexOf(I+"-"+S)&&(ba.status="missing")});GV(q,p,y);var C=A.winningRev,D=A.deleted;y.objectStore("document-store").put(vL(A,C,D))};y.onabort=Yo(u);y.oncomplete=function(){u()}};g._getLocal=function(p,q){var u=ao(e,["local-store"],"readonly");if(u.error)return q(u.error);p=u.txn.objectStore("local-store").get(p);p.onerror=Yo(q);p.onsuccess=function(w){(w=w.target.result)?
(delete w._doc_id_rev,q(null,w)):q(lh($n))}};g._putLocal=function(p,q,u){"function"===typeof q&&(u=q,q={});delete p._revisions;var w=p._rev,y=p._id;p._rev=w?"0-"+(parseInt(w.split("-")[1],10)+1):"0-1";var A=q.ctx,C;if(!A){A=ao(e,["local-store"],"readwrite");if(A.error)return u(A.error);A=A.txn;A.onerror=Yo(u);A.oncomplete=function(){C&&u(null,C)}}var D=A.objectStore("local-store");w?(y=D.get(y),y.onsuccess=function(L){(L=L.target.result)&&L._rev===w?D.put(p).onsuccess=function(){C={ok:!0,id:p._id,
rev:p._rev};q.ctx&&u(null,C)}:u(lh(yw))}):(y=D.add(p),y.onerror=function(L){u(lh(yw));L.preventDefault();L.stopPropagation()},y.onsuccess=function(){C={ok:!0,id:p._id,rev:p._rev};q.ctx&&u(null,C)})};g._removeLocal=function(p,q,u){"function"===typeof q&&(u=q,q={});var w=q.ctx;if(!w){w=ao(e,["local-store"],"readwrite");if(w.error)return u(w.error);w=w.txn;w.oncomplete=function(){y&&u(null,y)}}var y,A=p._id,C=w.objectStore("local-store");w=C.get(A);w.onerror=Yo(u);w.onsuccess=function(D){(D=D.target.result)&&
D._rev===p._rev?(C.delete(A),y={ok:!0,id:A,rev:"0-0"},q.ctx&&u(null,y)):u(lh($n))}};g._destroy=function(p,q){oz.removeAllListeners(b);(p=zL.get(b))&&p.result&&(p.result.close(),Aw.delete(b));p=indexedDB.deleteDatabase(b);p.onsuccess=function(){zL.delete(b);jz&&b in localStorage&&delete localStorage[b];q(null,{ok:!0})};p.onerror=Yo(q)};var l=Aw.get(b);if(l)return e=l.idb,g._meta=l.global,Xo(function(){h(null,g)});l=indexedDB.open(b,5);zL.set(b,l);l.onupgradeneeded=function(p){function q(){var C=y[A-
1];A++;C&&C(w,q)}var u=p.target.result;if(1>p.oldVersion)return f(u);var w=p.currentTarget.transaction;3>p.oldVersion&&u.createObjectStore("local-store",{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>p.oldVersion&&a(u);var y=[m,n,d,k],A=p.oldVersion;q()};l.onsuccess=function(p){function q(){"undefined"!==typeof D&&y&&(g._meta={name:b,instanceId:L,blobSupport:D},Aw.set(b,{idb:e,global:g._meta}),h(null,g))}function u(){if("undefined"!==typeof C&&"undefined"!==typeof A){var I=
b+"_id";I in A?L=A[I]:A[I]=L=cE();A.docCount=C;w.objectStore("meta-store").put(A)}}e=p.target.result;e.onversionchange=function(){e.close();Aw.delete(b)};e.onabort=function(I){an("error","Database has a global failure",I.target.error);e.close();Aw.delete(b)};var w=e.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),y=!1,A,C,D,L;w.objectStore("meta-store").get("meta-store").onsuccess=function(I){A=I.target.result||{id:"meta-store"};u()};u9(w,function(I){C=I;u()});AL||(AL=
t9(w));AL.then(function(I){D=I;q()});w.oncomplete=function(){y=!0;q()};w.onabort=Yo(h)};l.onerror=function(p){(p=p.target.error&&p.target.error.message)?-1!==p.indexOf("stored database is a higher version")&&(p=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):p="Failed to open indexedDB, are you in private browsing mode?";an("error",p);h(lh(uL,p))}}function z9(g,c){return new Promise(function(h,f){function m(){k++;g[b++]().then(a,
d)}function n(){if(++e===l)p?f(p):h();else for(;k<c&&b<l;)m()}function a(){k--;n()}function d(q){k--;p=p||q;n()}for(var k=0,b=0,e=0,l=g.length,p;k<c&&b<l;)m()})}function BL(g){var c=(g=g.doc||g.ok)&&g._attachments;c&&Object.keys(c).forEach(function(h){h=c[h];h.data=mL(h.data,h.content_type)})}function It(g){return/^_design/.test(g)?"_design/"+encodeURIComponent(g.slice(8)):/^_local/.test(g)?"_local/"+encodeURIComponent(g.slice(7)):encodeURIComponent(g)}function KV(g){return g._attachments&&Object.keys(g._attachments)?
Promise.all(Object.keys(g._attachments).map(function(c){var h=g._attachments[c];if(h.data&&"string"!==typeof h.data)return(new Promise(function(f){nL(h.data,f)})).then(function(f){h.data=f})})):Promise.resolve()}function A9(g,c){if(c.prefix){var h=eV(c.prefix).protocol;h="http"===h||"https"===h}else h=!1;h&&(g=c.name.substr(c.prefix.length),g=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(g));c=eV(g);if(c.user||c.password)c.auth={username:c.user,password:c.password};g=c.path.replace(/(^\/|\/$)/g,
"").split("/");c.db=g.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=g.join("/");return c}function fk(g,c){return eE(g,g.db+"/"+c)}function eE(g,c){return g.protocol+"://"+g.host+(g.port?":"+g.port:"")+"/"+g.path+(g.path?"/":"")+c}function fE(g){return"?"+Object.keys(g).map(function(c){return c+"="+encodeURIComponent(g[c])}).join("&")}function B9(g){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",h=-1!==c.indexOf("msie"),f=-1!==
c.indexOf("trident");c=-1!==c.indexOf("edge");g=!("method"in g)||"GET"===g.method;return(h||f||c)&&g}function CL(g,c){function h(l,p){return Nj(l,uw(function(q){m().then(function(){return p.apply(this,q)}).catch(function(u){q.pop()(u)})})).bind(a)}function f(l,p,q){var u={};p=p||{};p.headers=p.headers||new Bw;p.headers.get("Content-Type")||p.headers.set("Content-Type","application/json");p.headers.get("Accept")||p.headers.set("Accept","application/json");return b(l,p).then(function(w){u.ok=w.ok;u.status=
w.status;return w.json()}).then(function(w){u.data=w;if(!u.ok){u.data.status=u.status;w=ww(u.data);if(q)return q(w);throw w;}Array.isArray(u.data)&&(u.data=u.data.map(function(y){return y.error||y.missing?ww(y):y}));if(q)q(null,u.data);else return u})}function m(){if(g.skip_setup)return Promise.resolve();if(e)return e;e=f(k).catch(function(l){return l&&l.status&&404===l.status?(gL(404,"PouchDB is just detecting if the remote exists."),f(k,{method:"PUT"})):Promise.reject(l)}).catch(function(l){return l&&
l.status&&412===l.status?!0:Promise.reject(l)});e.catch(function(){e=null});return e}function n(l){return l.split("/").map(encodeURIComponent).join("/")}var a=this,d=A9(g.name,g),k=fk(d,"");g=ek(g);var b=function(l,p){p=p||{};p.headers=p.headers||new Bw;p.credentials="include";if(g.auth||d.auth){var q=g.auth||d.auth;q=btoa(unescape(encodeURIComponent(q.username+":"+q.password)));p.headers.set("Authorization","Basic "+q)}var u=g.headers||{};Object.keys(u).forEach(function(w){p.headers.append(w,u[w])});
B9(p)&&(l+=(-1===l.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(g.fetch||LV)(l,p)},e;Xo(function(){c(null,a)});a._remote=!0;a.type=function(){return"http"};a.id=h("id",function(l){b(eE(d,"")).then(function(p){return p.json()}).catch(function(){return{}}).then(function(p){p=p&&p.uuid?p.uuid+d.db:fk(d,"");l(null,p)})});a.compact=h("compact",function(l,p){"function"===typeof l&&(p=l,l={});l=ek(l);f(fk(d,"_compact"),{method:"POST"}).then(function(){function q(){a.info(function(u,w){w&&!w.compact_running?
p(null,{ok:!0}):setTimeout(q,l.interval||200)})}q()})});a.bulkGet=Nj("bulkGet",function(l,p){function q(C){var D={};l.revs&&(D.revs=!0);l.attachments&&(D.attachments=!0);l.latest&&(D.latest=!0);f(fk(d,"_bulk_get"+fE(D)),{method:"POST",body:JSON.stringify({docs:l.docs})}).then(function(L){l.attachments&&l.binary&&L.data.results.forEach(function(I){I.docs.forEach(BL)});C(null,L.data)}).catch(C)}function u(){function C(ba){return function(ua,Fa){I[ba]=Fa.results;++L===D&&p(null,{results:$D(I)})}}for(var D=
Math.ceil(l.docs.length/50),L=0,I=Array(D),S=0;S<D;S++){var V=iz(l,["revs","attachments","binary","latest"]);V.docs=l.docs.slice(50*S,Math.min(l.docs.length,50*(S+1)));$U(w,V,C(S))}}var w=this,y=eE(d,""),A=DL[y];"boolean"!==typeof A?q(function(C,D){C?(DL[y]=!1,gL(C.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),u()):(DL[y]=!0,p(null,D))}):A?q(p):u()});a._info=function(l){m().then(function(){return b(fk(d,""))}).then(function(p){return p.json()}).then(function(p){p.host=
fk(d,"");l(null,p)}).catch(l)};a.fetch=function(l,p){return m().then(function(){var q="/"===l.substring(0,1)?eE(d,l.substring(1)):fk(d,l);return b(q,p)})};a.get=h("get",function(l,p,q){function u(A){function C(I){var S=D[I];I=It(A._id)+"/"+n(I)+"?rev="+A._rev;return b(fk(d,I)).then(function(V){return"buffer"in V?V.buffer():V.blob()}).then(function(V){if(p.binary){var ba=Object.getOwnPropertyDescriptor(V.__proto__,"type");if(!ba||ba.set)V.type=S.content_type;return V}return new Promise(function(ua){nL(V,
ua)})}).then(function(V){delete S.stub;delete S.length;S.data=V})}var D=A._attachments,L=D&&Object.keys(D);if(D&&L.length)return L=L.map(function(I){return function(){return C(I)}}),z9(L,5)}function w(A){return Array.isArray(A)?Promise.all(A.map(function(C){if(C.ok)return u(C.ok)})):u(A)}"function"===typeof p&&(q=p,p={});p=ek(p);var y={};p.revs&&(y.revs=!0);p.revs_info&&(y.revs_info=!0);p.latest&&(y.latest=!0);p.open_revs&&("all"!==p.open_revs&&(p.open_revs=JSON.stringify(p.open_revs)),y.open_revs=
p.open_revs);p.rev&&(y.rev=p.rev);p.conflicts&&(y.conflicts=p.conflicts);p.update_seq&&(y.update_seq=p.update_seq);l=It(l);y=fk(d,l+fE(y));f(y).then(function(A){return Promise.resolve().then(function(){if(p.attachments)return w(A.data)}).then(function(){q(null,A.data)})}).catch(function(A){A.docId=l;q(A)})});a.remove=h("remove",function(l,p,q,u){"string"===typeof p?(l={_id:l,_rev:p},"function"===typeof q&&(u=q,q={})):"function"===typeof p?(u=p,q={}):(u=q,q=p);p=l._rev||q.rev;p=fk(d,It(l._id))+"?rev="+
p;f(p,{method:"DELETE"},u).catch(u)});a.getAttachment=h("getAttachment",function(l,p,q,u){"function"===typeof q&&(u=q,q={});q=q.rev?"?rev="+q.rev:"";l=fk(d,It(l))+"/"+n(p)+q;var w;b(l,{method:"GET"}).then(function(y){w=y.headers.get("content-type");if(y.ok)return"undefined"===typeof gE||gE.browser||"function"!==typeof y.buffer?y.blob():y.buffer();throw y;}).then(function(y){"undefined"===typeof gE||gE.browser||(y.type=w);u(null,y)}).catch(function(y){u(y)})});a.removeAttachment=h("removeAttachment",
function(l,p,q,u){l=fk(d,It(l)+"/"+n(p))+"?rev="+q;f(l,{method:"DELETE"},u).catch(u)});a.putAttachment=h("putAttachment",function(l,p,q,u,w,y){"function"===typeof w&&(y=w,w=u,u=q,q=null);l=It(l)+"/"+n(p);l=fk(d,l);q&&(l+="?rev="+q);if("string"===typeof u){try{var A=atob(u)}catch(C){return y(lh(CV,"Attachment is not a valid base64 string"))}u=A?lL(A,w):""}f(l,{headers:new Bw({"Content-Type":w}),method:"PUT",body:u},y).catch(y)});a._bulkDocs=function(l,p,q){l.new_edits=p.new_edits;m().then(function(){return Promise.all(l.docs.map(KV))}).then(function(){return f(fk(d,
"_bulk_docs"),{method:"POST",body:JSON.stringify(l)},q)}).catch(q)};a._put=function(l,p,q){m().then(function(){return KV(l)}).then(function(){return f(fk(d,It(l._id)),{method:"PUT",body:JSON.stringify(l)})}).then(function(u){q(null,u.data)}).catch(function(u){u.docId=l&&l._id;q(u)})};a.allDocs=h("allDocs",function(l,p){"function"===typeof l&&(p=l,l={});l=ek(l);var q={},u="GET";l.conflicts&&(q.conflicts=!0);l.update_seq&&(q.update_seq=!0);l.descending&&(q.descending=!0);l.include_docs&&(q.include_docs=
!0);l.attachments&&(q.attachments=!0);l.key&&(q.key=JSON.stringify(l.key));l.start_key&&(l.startkey=l.start_key);l.startkey&&(q.startkey=JSON.stringify(l.startkey));l.end_key&&(l.endkey=l.end_key);l.endkey&&(q.endkey=JSON.stringify(l.endkey));"undefined"!==typeof l.inclusive_end&&(q.inclusive_end=!!l.inclusive_end);"undefined"!==typeof l.limit&&(q.limit=l.limit);"undefined"!==typeof l.skip&&(q.skip=l.skip);q=fE(q);if("undefined"!==typeof l.keys){u="POST";var w={keys:l.keys}}f(fk(d,"_all_docs"+q),
{method:u,body:JSON.stringify(w)}).then(function(y){l.include_docs&&l.attachments&&l.binary&&y.data.rows.forEach(BL);p(null,y.data)}).catch(p)});a._changes=function(l){var p="batch_size"in l?l.batch_size:25;l=ek(l);!l.continuous||"heartbeat"in l||(l.heartbeat=1E4);var q="timeout"in l?l.timeout:3E4;"timeout"in l&&l.timeout&&5E3>q-l.timeout&&(q=l.timeout+5E3);"heartbeat"in l&&l.heartbeat&&5E3>q-l.heartbeat&&(q=l.heartbeat+5E3);var u={};"timeout"in l&&l.timeout&&(u.timeout=l.timeout);var w="undefined"!==
typeof l.limit?l.limit:!1,y=w;l.style&&(u.style=l.style);if(l.include_docs||l.filter&&"function"===typeof l.filter)u.include_docs=!0;l.attachments&&(u.attachments=!0);l.continuous&&(u.feed="longpoll");l.seq_interval&&(u.seq_interval=l.seq_interval);l.conflicts&&(u.conflicts=!0);l.descending&&(u.descending=!0);l.update_seq&&(u.update_seq=!0);"heartbeat"in l&&l.heartbeat&&(u.heartbeat=l.heartbeat);l.filter&&"string"===typeof l.filter&&(u.filter=l.filter);l.view&&"string"===typeof l.view&&(u.filter=
"_view",u.view=l.view);if(l.query_params&&"object"===typeof l.query_params)for(var A in l.query_params)l.query_params.hasOwnProperty(A)&&(u[A]=l.query_params[A]);var C="GET";if(l.doc_ids){u.filter="_doc_ids";C="POST";var D={doc_ids:l.doc_ids}}else l.selector&&(u.filter="_selector",C="POST",D={selector:l.selector});var L=new C9,I,S=function(ua,Fa){if(!l.aborted){u.since=ua;"object"===typeof u.since&&(u.since=JSON.stringify(u.since));l.descending?w&&(u.limit=y):u.limit=!w||y>p?p:y;var F=fk(d,"_changes"+
fE(u)),Y={signal:L.signal,method:C,body:JSON.stringify(D)};I=ua;l.aborted||m().then(function(){return f(F,Y,Fa)}).catch(Fa)}},V={results:[]},ba=function(ua,Fa){if(!l.aborted){var F=0;if(Fa&&Fa.results){F=Fa.results.length;V.last_seq=Fa.last_seq;var Y=null,Q=null;"number"===typeof Fa.pending&&(Y=Fa.pending);if("string"===typeof V.last_seq||"number"===typeof V.last_seq)Q=V.last_seq;Fa.results=Fa.results.filter(function(W){y--;var ka=hL(l)(W);ka&&(l.include_docs&&l.attachments&&l.binary&&BL(W),l.return_docs&&
V.results.push(W),l.onChange(W,Y,Q));return ka})}else if(ua){l.aborted=!0;l.complete(ua);return}Fa&&Fa.last_seq&&(I=Fa.last_seq);ua=w&&0>=y||Fa&&F<p||l.descending;(!l.continuous||w&&0>=y)&&ua?l.complete(null,V):Xo(function(){S(I,ba)})}};S(l.since||0,ba);return{cancel:function(){l.aborted=!0;L.abort()}}};a.revsDiff=h("revsDiff",function(l,p,q){"function"===typeof p&&(q=p);f(fk(d,"_revs_diff"),{method:"POST",body:JSON.stringify(l)},q).catch(q)});a._close=function(l){l()};a._destroy=function(l,p){f(fk(d,
""),{method:"DELETE"}).then(function(q){p(null,q)}).catch(function(q){404===q.status?p(null,{ok:!0}):p(q)})}}function Jt(g){this.status=400;this.name="query_parse_error";this.message=g;this.error=!0;try{Error.captureStackTrace(this,Jt)}catch(c){}}function hE(g){this.status=404;this.name="not_found";this.message=g;this.error=!0;try{Error.captureStackTrace(this,hE)}catch(c){}}function iE(g){this.status=500;this.name="invalid_value";this.message=g;this.error=!0;try{Error.captureStackTrace(this,iE)}catch(c){}}
function MV(g,c){c&&g.then(function(h){Xo(function(){c(null,h)})},function(h){Xo(function(){c(h)})});return g}function D9(g){return uw(function(c){var h=c.pop();c=g.apply(this,c);"function"===typeof h&&MV(c,h);return c})}function E9(g,c){return g.then(function(h){return c().then(function(){return h})},function(h){return c().then(function(){throw h;})})}function EL(g,c){return function(){var h=arguments,f=this;return g.add(function(){return c.apply(f,h)})}}function NV(g){g=new pz(g);var c=Array(g.size),
h=-1;g.forEach(function(f){c[++h]=f});return c}function FL(g){var c=Array(g.size),h=-1;g.forEach(function(f,m){c[++h]=m});return c}function OV(g){return new iE("builtin "+g+" function requires map values to be numbers or number arrays")}function GL(g){for(var c=0,h=0,f=g.length;h<f;h++){var m=g[h];if("number"!==typeof m)if(Array.isArray(m)){c="number"===typeof c?[c]:c;for(var n=0,a=m.length;n<a;n++){var d=m[n];if("number"!==typeof d)throw OV("_sum");"undefined"===typeof c[n]?c.push(d):c[n]+=d}}else throw OV("_sum");
else"number"===typeof c?c+=m:c[0]+=m}return c}function PV(g,c){return jL("return ("+g.replace(/;\s*$/,"")+");",{emit:c,sum:GL,log:F9,isArray:G9,toJSON:H9})}function qz(){this.promise=new Promise(function(g){g()})}function QV(g){if(!g)return"undefined";switch(typeof g){case "function":return g.toString();case "string":return g.toString();default:return JSON.stringify(g)}}function I9(g,c){return QV(g)+QV(c)+"undefined"}function RV(g,c,h,f,m,n){var a=I9(h,f);if(!m){var d=g._cachedViews=g._cachedViews||
{};if(d[a])return d[a]}var k=g.info().then(function(b){var e=b.db_name+"-mrview-"+(m?"temp":bE.hash(a));return aE(g,"_local/"+n,function(l){l.views=l.views||{};var p=c;-1===p.indexOf("/")&&(p=c+"/"+c);p=l.views[p]=l.views[p]||{};if(!p[e])return p[e]=!0,l}).then(function(){return g.registerDependentDatabase(e).then(function(l){l=l.db;l.auto_compaction=!0;var p={name:e,db:l,sourceDB:g,adapter:g.adapter,mapFun:h,reduceFun:f};return p.db.get("_local/lastSeq").catch(function(q){if(404!==q.status)throw q;
}).then(function(q){p.seq=q?q.seq:0;if(d)p.db.once("destroyed",function(){delete d[a]});return p})})})});d&&(d[a]=k);return k}function HL(g){return-1===g.indexOf("/")?[g,g]:g.split("/")}function J9(g){return 1===g.length&&/^1-/.test(g[0].rev)}function SV(g,c){try{g.emit("error",c)}catch(h){an("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),an("error",
c)}}function TV(g,c){var h=Object.keys(c._attachments);return Promise.all(h.map(function(f){return g.getAttachment(c._id,f,{rev:c._rev})}))}function K9(g,c,h){var f=Wo(c)&&!Wo(g),m=Object.keys(h._attachments);return f?g.get(h._id).then(function(n){return Promise.all(m.map(function(a){return n._attachments&&n._attachments[a]&&n._attachments[a].digest===h._attachments[a].digest?g.getAttachment(n._id,a):c.getAttachment(h._id,a)}))}).catch(function(n){if(404!==n.status)throw n;return TV(c,h)}):TV(c,h)}
function L9(g){var c=[];Object.keys(g).forEach(function(h){g[h].missing.forEach(function(f){c.push({id:h,rev:f})})});return{docs:c,revs:!0,latest:!0}}function M9(g,c,h,f){function m(d){return g.allDocs({keys:d,include_docs:!0,conflicts:!0}).then(function(k){if(f.cancelled)throw Error("cancelled");k.rows.forEach(function(b){var e;(e=b.deleted||!b.doc||!/^1-/.test(b.value.rev))||(e=b.doc,e=e._attachments&&0<Object.keys(e._attachments).length);e||(e=b.doc,e=e._conflicts&&0<e._conflicts.length);e||(b.doc._conflicts&&
delete b.doc._conflicts,n.push(b.doc),delete h[b.id])})})}h=ek(h);var n=[],a=!0;return Promise.resolve().then(function(){var d=Object.keys(h).filter(function(k){k=h[k].missing;return 1===k.length&&/^1-/.test(k[0])});if(0<d.length)return m(d)}).then(function(){var d=L9(h);if(d.docs.length)return g.bulkGet(d).then(function(k){if(f.cancelled)throw Error("cancelled");return Promise.all(k.results.map(function(b){return Promise.all(b.docs.map(function(e){var l=e.ok;e.error&&(a=!1);return l&&l._attachments?
K9(c,g,l).then(function(p){var q=Object.keys(l._attachments);p.forEach(function(u,w){w=l._attachments[q[w]];delete w.stub;delete w.length;w.data=u});return l}):l}))})).then(function(b){n=n.concat($D(b).filter(Boolean))})})}).then(function(){return{ok:a,docs:n}})}function IL(g,c,h,f,m){return g.get(c).catch(function(n){if(404===n.status)return"http"!==g.adapter&&"https"!==g.adapter||gL(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:f,_id:c,history:[],replicator:"pouchdb",
version:1};throw n;}).then(function(n){if(!m.cancelled&&n.last_seq!==h)return n.history=(n.history||[]).filter(function(a){return a.session_id!==f}),n.history.unshift({last_seq:h,session_id:f}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=f,n.last_seq=h,g.put(n).catch(function(a){if(409===a.status)return IL(g,c,h,f,m);throw a;})})}function rz(g,c,h,f,m){this.src=g;this.target=c;this.id=h;this.returnValue=f;this.opts=m||{}}function UV(g,c){var h=g[0],f=g.slice(1),
m=c[0],n=c.slice(1);return h&&0!==c.length?JL(h.session_id,c)?{last_seq:h.last_seq,history:g}:JL(m.session_id,f)?{last_seq:m.last_seq,history:n}:UV(f,n):{last_seq:0,history:[]}}function JL(g,c){var h=c[0],f=c.slice(1);return g&&0!==c.length?g===h.session_id?!0:JL(g,f):!1}function VV(g){return"number"===typeof g.status&&4===Math.floor(g.status/100)}function N9(g,c,h,f){if(!1===g.retry)c.emit("error",h),c.removeAllListeners();else{"function"!==typeof g.back_off_function&&(g.back_off_function=w8);c.emit("requestError",
h);if("active"===c.state||"pending"===c.state){c.emit("paused",h);c.state="stopped";var m=function(){g.current_back_off=0};c.once("paused",function(){c.removeListener("active",m)});c.once("active",m)}g.current_back_off=g.current_back_off||0;g.current_back_off=g.back_off_function(g.current_back_off);setTimeout(f,g.current_back_off)}}function O9(g){return Object.keys(g).sort(Bk).reduce(function(c,h){c[h]=g[h];return c},{})}function P9(g,c,h){var f=h.doc_ids?h.doc_ids.sort(Bk):"",m=h.filter?h.filter.toString():
"",n="",a="",d="";h.selector&&(d=JSON.stringify(h.selector));h.filter&&h.query_params&&(n=JSON.stringify(O9(h.query_params)));h.filter&&"_view"===h.filter&&(a=h.view.toString());return Promise.all([g.id(),c.id()]).then(function(k){var b=k[0]+k[1]+m+a+n+f+d;return new Promise(function(e){oL(b,e)})}).then(function(k){k=k.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+k})}function WV(g,c,h,f,m){function n(){return db?Promise.resolve():P9(g,c,h).then(function(Aa){la=Aa;db=new rz(g,c,la,f,!1===
h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===h.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function a(){ub=[];if(0!==I.docs.length){var Aa=I.docs;return c.bulkDocs({docs:Aa,new_edits:!1},{timeout:h.timeout}).then(function(Pa){if(f.cancelled)throw q(),Error("cancelled");var Da=Object.create(null);Pa.forEach(function(M){M.error&&
(Da[M.id]=M)});Pa=Object.keys(Da).length;m.doc_write_failures+=Pa;m.docs_written+=Aa.length-Pa;Aa.forEach(function(M){var U=Da[M._id];if(U)if(m.errors.push(U),M=(U.name||"").toLowerCase(),"unauthorized"===M||"forbidden"===M)f.emit("denied",ek(U));else throw U;else ub.push(M)})},function(Pa){m.doc_write_failures+=Aa.length;throw Pa;})}}function d(){if(I.error)throw Error("There was a problem getting docs.");m.last_seq=Fa=I.seq;var Aa=ek(m);ub.length&&(Aa.docs=ub,"number"===typeof I.pending&&(Aa.pending=
I.pending,delete I.pending),f.emit("change",Aa));V=!0;return db.writeCheckpoint(I.seq,xa).then(function(){V=!1;if(f.cancelled)throw q(),Error("cancelled");I=void 0;A()}).catch(function(Pa){D(Pa);throw Pa;})}function k(){var Aa={};I.changes.forEach(function(Pa){"_user/"!==Pa.id&&(Aa[Pa.id]=Pa.changes.map(function(Da){return Da.rev}))});return c.revsDiff(Aa).then(function(Pa){if(f.cancelled)throw q(),Error("cancelled");I.diffs=Pa})}function b(){return M9(g,c,I.diffs,f).then(function(Aa){I.error=!Aa.ok;
Aa.docs.forEach(function(Pa){delete I.diffs[Pa._id];m.docs_read++;I.docs.push(Pa)})})}function e(){f.cancelled||I||(0===L.length?l(!0):(I=L.shift(),k().then(b).then(a).then(d).then(e).catch(function(Aa){p("batch processing terminated with error",Aa)})))}function l(Aa){if(0===S.changes.length){if(0===L.length&&!I){if(F&&na.live||ba)f.state="pending",f.emit("paused");ba&&q()}}else if(Aa||ba||S.changes.length>=Y){L.push(S);S={seq:0,changes:[],docs:[]};if("pending"===f.state||"stopped"===f.state)f.state=
"active",f.emit("active");e()}}function p(Aa,Pa){ua||(Pa.message||(Pa.message=Aa),m.ok=!1,m.status="aborting",L=[],S={seq:0,changes:[],docs:[]},q(Pa))}function q(Aa){if(!ua){if(f.cancelled&&(m.status="cancelled",V))return;m.status=m.status||"complete";m.end_time=(new Date).toISOString();m.last_seq=Fa;ua=!0;if(Aa){Aa=lh(Aa);Aa.result=m;var Pa=(Aa.name||"").toLowerCase();"unauthorized"===Pa||"forbidden"===Pa?(f.emit("error",Aa),f.removeAllListeners()):N9(h,f,Aa,function(){WV(g,c,h,f)})}else f.emit("complete",
m),f.removeAllListeners()}}function u(Aa,Pa,Da){if(f.cancelled)return q();"number"===typeof Pa&&(S.pending=Pa);hL(h)(Aa)&&(S.seq=Aa.seq||Da,S.changes.push(Aa),Xo(function(){l(0===L.length&&na.live)}))}function w(Aa){W=!1;if(f.cancelled)return q();if(0<Aa.results.length)na.since=Aa.results[Aa.results.length-1].seq,A(),l(!0);else{var Pa=function(){F?(na.live=!0,A()):ba=!0;l(!0)};I||0!==Aa.results.length?Pa():(V=!0,db.writeCheckpoint(Aa.last_seq,xa).then(function(){V=!1;m.last_seq=Fa=Aa.last_seq;Pa()}).catch(D))}}
function y(Aa){W=!1;if(f.cancelled)return q();p("changes rejected",Aa)}function A(){function Aa(){Da.cancel()}function Pa(){f.removeListener("cancel",Aa)}if(!W&&!ba&&L.length<Q){W=!0;f._changes&&(f.removeListener("cancel",f._abortChanges),f._changes.cancel());f.once("cancel",Aa);var Da=g.changes(na).on("change",u);Da.then(Pa,Pa);Da.then(w).catch(y);h.retry&&(f._changes=Da,f._abortChanges=Aa)}}function C(){n().then(function(){if(f.cancelled)q();else return db.getCheckpoint().then(function(Aa){Fa=Aa;
na={since:Fa,limit:Y,batch_size:Y,style:"all_docs",doc_ids:ka,selector:ea,return_docs:!0};h.filter&&("string"!==typeof h.filter?na.include_docs=!0:na.filter=h.filter);"heartbeat"in h&&(na.heartbeat=h.heartbeat);"timeout"in h&&(na.timeout=h.timeout);h.query_params&&(na.query_params=h.query_params);h.view&&(na.view=h.view);A()})}).catch(function(Aa){p("getCheckpoint rejected with ",Aa)})}function D(Aa){V=!1;p("writeCheckpoint completed with error",Aa)}var L=[],I,S={seq:0,changes:[],docs:[]},V=!1,ba=
!1,ua=!1,Fa=0,F=h.continuous||h.live||!1,Y=h.batch_size||100,Q=h.batches_limit||10,W=!1,ka=h.doc_ids,ea=h.selector,la,db,ub=[],xa=cE();m=m||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var na={};f.ready(g,c);f.cancelled?q():(f._addedListeners||(f.once("cancel",q),"function"===typeof h.complete&&(f.once("error",h.complete),f.once("complete",function(Aa){h.complete(null,Aa)})),f._addedListeners=!0),"undefined"===typeof h.since?C():n().then(function(){V=
!0;return db.writeCheckpoint(h.since,xa)}).then(function(){V=!1;f.cancelled?q():(Fa=h.since,C())}).catch(D))}function jE(){am.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var g=this,c=new Promise(function(h,f){g.once("complete",h);g.once("error",f)});g.then=function(h,f){return c.then(h,f)};g.catch=function(h){return c.catch(h)};g.catch(function(){})}function kE(g,c){var h=c.PouchConstructor;return"string"===typeof g?new h(g,c):g}function KL(g,c,h,f){"function"===typeof h&&(f=h,
h={});"undefined"===typeof h&&(h={});if(h.doc_ids&&!Array.isArray(h.doc_ids))throw lh(ZD,"`doc_ids` filter parameter is not a list.");h.complete=f;h=ek(h);h.continuous=h.continuous||h.live;h.retry="retry"in h?h.retry:!1;h.PouchConstructor=h.PouchConstructor||this;f=new jE(h);g=kE(g,h);c=kE(c,h);WV(g,c,h,f);return f}function Q9(g,c,h,f){"function"===typeof h&&(f=h,h={});"undefined"===typeof h&&(h={});h=ek(h);h.PouchConstructor=h.PouchConstructor||this;g=kE(g,h);c=kE(c,h);return new LL(g,c,h,f)}function LL(g,
c,h,f){function m(D){u.emit("change",{direction:"pull",change:D})}function n(D){u.emit("change",{direction:"push",change:D})}function a(D){u.emit("denied",{direction:"push",doc:D})}function d(D){u.emit("denied",{direction:"pull",doc:D})}function k(){u.pushPaused=!0;u.pullPaused&&u.emit("paused")}function b(){u.pullPaused=!0;u.pushPaused&&u.emit("paused")}function e(){u.pushPaused=!1;u.pullPaused&&u.emit("active",{direction:"push"})}function l(){u.pullPaused=!1;u.pushPaused&&u.emit("active",{direction:"pull"})}
function p(D){return function(L,I){var S="denied"===L&&(I===d||I===a),V="paused"===L&&(I===b||I===k),ba="active"===L&&(I===l||I===e);if("change"===L&&(I===m||I===n)||S||V||ba)L in A||(A[L]={}),A[L][D]=!0,2===Object.keys(A[L]).length&&u.removeAllListeners(L)}}function q(D,L,I){if(-1==D.listeners(L).indexOf(I))D.on(L,I)}var u=this;this.canceled=!1;var w=h.push?zw({},h,h.push):h,y=h.pull?zw({},h,h.pull):h;this.push=KL(g,c,w);this.pull=KL(c,g,y);this.pullPaused=this.pushPaused=!0;var A={};h.live&&(this.push.on("complete",
u.pull.cancel.bind(u.pull)),this.pull.on("complete",u.push.cancel.bind(u.push)));this.on("newListener",function(D){"change"===D?(q(u.pull,"change",m),q(u.push,"change",n)):"denied"===D?(q(u.pull,"denied",d),q(u.push,"denied",a)):"active"===D?(q(u.pull,"active",l),q(u.push,"active",e)):"paused"===D&&(q(u.pull,"paused",b),q(u.push,"paused",k))});this.on("removeListener",function(D){"change"===D?(u.pull.removeListener("change",m),u.push.removeListener("change",n)):"denied"===D?(u.pull.removeListener("denied",
d),u.push.removeListener("denied",a)):"active"===D?(u.pull.removeListener("active",l),u.push.removeListener("active",e)):"paused"===D&&(u.pull.removeListener("paused",b),u.push.removeListener("paused",k))});this.pull.on("removeListener",p("pull"));this.push.on("removeListener",p("push"));var C=Promise.all([this.push,this.pull]).then(function(D){D={push:D[0],pull:D[1]};u.emit("complete",D);f&&f(null,D);u.removeAllListeners();return D},function(D){u.cancel();f?f(D):u.emit("error",D);u.removeAllListeners();
if(f)throw D;});this.then=function(D,L){return C.then(D,L)};this.catch=function(D){return C.catch(D)}}function wr(){this._store={}}function sz(g){this._store=new wr;if(g&&Array.isArray(g))for(var c=0,h=g.length;c<h;c++)this.add(g[c])}function R9(){Cw&&Kt&&(Cw=!1,Kt.length?xr=Kt.concat(xr):tz=-1,xr.length&&XV())}function XV(){if(!Cw){ML=!1;Cw=!0;for(var g=xr.length,c=setTimeout(R9);g;){Kt=xr;for(xr=[];Kt&&++tz<g;)Kt[tz].run();tz=-1;g=xr.length}Kt=null;tz=-1;Cw=!1;clearTimeout(c)}}function YV(g,c){this.fun=
g;this.array=c}function Mi(g,c,h){Error.call(this,h);this.status=g;this.name=c;this.message=h;this.error=!0}function Lt(g){return g.call.bind(g)}function uz(g,c){if("object"!=typeof g)return!1;try{return c(g),!0}catch(h){return!1}}function ZV(g){return bm&&zm?void 0!==bn(g):$V(g)||aW(g)||bW(g)||cW(g)||dW(g)||eW(g)||fW(g)||gW(g)||hW(g)||iW(g)||jW(g)}function $V(g){return bm&&zm?"Uint8Array"===bn(g):"[object Uint8Array]"===nj(g)||S9(g)&&void 0!==g.buffer}function aW(g){return bm&&zm?"Uint8ClampedArray"===
bn(g):"[object Uint8ClampedArray]"===nj(g)}function bW(g){return bm&&zm?"Uint16Array"===bn(g):"[object Uint16Array]"===nj(g)}function cW(g){return bm&&zm?"Uint32Array"===bn(g):"[object Uint32Array]"===nj(g)}function dW(g){return bm&&zm?"Int8Array"===bn(g):"[object Int8Array]"===nj(g)}function eW(g){return bm&&zm?"Int16Array"===bn(g):"[object Int16Array]"===nj(g)}function fW(g){return bm&&zm?"Int32Array"===bn(g):"[object Int32Array]"===nj(g)}function gW(g){return bm&&zm?"Float32Array"===bn(g):"[object Float32Array]"===
nj(g)}function hW(g){return bm&&zm?"Float64Array"===bn(g):"[object Float64Array]"===nj(g)}function iW(g){return bm&&zm?"BigInt64Array"===bn(g):"[object BigInt64Array]"===nj(g)}function jW(g){return bm&&zm?"BigUint64Array"===bn(g):"[object BigUint64Array]"===nj(g)}function lE(g){return"[object Map]"===nj(g)}function mE(g){return"[object Set]"===nj(g)}function nE(g){return"[object WeakMap]"===nj(g)}function NL(g){return"[object WeakSet]"===nj(g)}function oE(g){return"[object ArrayBuffer]"===nj(g)}function kW(g){return"undefined"!=
typeof ArrayBuffer&&(oE.working?oE(g):g instanceof ArrayBuffer)}function pE(g){return"[object DataView]"===nj(g)}function lW(g){return"undefined"!=typeof DataView&&(pE.working?pE(g):g instanceof DataView)}function qE(g){return"[object SharedArrayBuffer]"===nj(g)}function mW(g){return"undefined"!=typeof SharedArrayBuffer&&(qE.working?qE(g):g instanceof SharedArrayBuffer)}function nW(g){return uz(g,T9)}function oW(g){return uz(g,U9)}function pW(g){return uz(g,V9)}function qW(g){return rW&&uz(g,W9)}
function sW(g){return OL&&uz(g,X9)}function yr(g,c){var h={seen:[],stylize:Y9};return 3<=arguments.length&&(h.depth=arguments[2]),4<=arguments.length&&(h.colors=arguments[3]),PL(c)?h.showHidden=c:c&&Eg._extend(h,c),Mt(h.showHidden)&&(h.showHidden=!1),Mt(h.depth)&&(h.depth=2),Mt(h.colors)&&(h.colors=!1),Mt(h.customInspect)&&(h.customInspect=!0),h.colors&&(h.stylize=Z9),rE(h,g,h.depth)}function Z9(g,c){return(c=yr.styles[c])?"\u001b["+yr.colors[c][0]+"m"+g+"\u001b["+yr.colors[c][1]+"m":g}function Y9(g,
c){return g}function rE(g,c,h){if(g.customInspect&&c&&sE(c.inspect)&&c.inspect!==Eg.inspect&&(!c.constructor||c.constructor.prototype!==c)){var f=c.inspect(h,g);return tE(f)||(f=rE(g,f,h)),f}var m=function(b,e){if(Mt(e))return b.stylize("undefined","undefined");if(tE(e))return e="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",b.stylize(e,"string");if(tW(e))return b.stylize(""+e,"number");if(PL(e))return b.stylize(""+e,"boolean");if(null===e)return b.stylize("null",
"null")}(g,c);if(m)return m;m=Object.keys(c);var n=function(b){var e={};return b.forEach(function(l,p){e[l]=!0}),e}(m);if(g.showHidden&&(m=Object.getOwnPropertyNames(c)),vz(c)&&(0<=m.indexOf("message")||0<=m.indexOf("description")))return QL(c);if(0===m.length){if(sE(c))return g.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(wz(c))return g.stylize(RegExp.prototype.toString.call(c),"regexp");if(uE(c))return g.stylize(Date.prototype.toString.call(c),"date");if(vz(c))return QL(c)}var a=
"",d=!1,k=["{","}"];(uW(c)&&(d=!0,k=["[","]"]),sE(c))&&(a=" [Function"+(c.name?": "+c.name:"")+"]");return wz(c)&&(a=" "+RegExp.prototype.toString.call(c)),uE(c)&&(a=" "+Date.prototype.toUTCString.call(c)),vz(c)&&(a=" "+QL(c)),0!==m.length||d&&0!=c.length?0>h?wz(c)?g.stylize(RegExp.prototype.toString.call(c),"regexp"):g.stylize("[Object]","special"):(g.seen.push(c),f=d?function(b,e,l,p,q){for(var u=[],w=0,y=e.length;w<y;++w)Object.prototype.hasOwnProperty.call(e,String(w))?u.push(RL(b,e,l,p,String(w),
!0)):u.push("");return q.forEach(function(A){A.match(/^\d+$/)||u.push(RL(b,e,l,p,A,!0))}),u}(g,c,h,n,m):m.map(function(b){return RL(g,c,h,n,b,d)}),g.seen.pop(),function(b,e,l){var p=0;return 60<b.reduce(function(q,u){return p++,0<=u.indexOf("\n")&&p++,q+u.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===e?"":e+"\n ")+" "+b.join(",\n  ")+" "+l[1]:l[0]+e+" "+b.join(", ")+" "+l[1]}(f,a,k)):k[0]+a+k[1]}function QL(g){return"["+Error.prototype.toString.call(g)+"]"}function RL(g,c,h,f,m,n){var a,d,
k;if((k=Object.getOwnPropertyDescriptor(c,m)||{value:c[m]}).get?d=k.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):k.set&&(d=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(f,m)||(a="["+m+"]"),d||(0>g.seen.indexOf(k.value)?-1<(d=null===h?rE(g,k.value,null):rE(g,k.value,h-1)).indexOf("\n")&&(d=n?d.split("\n").map(function(b){return"  "+b}).join("\n").substr(2):"\n"+d.split("\n").map(function(b){return"   "+b}).join("\n")):d=g.stylize("[Circular]","special")),
Mt(a)){if(n&&m.match(/^\d+$/))return d;(a=JSON.stringify(""+m)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=g.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=g.stylize(a,"string"))}return a+": "+d}function uW(g){return Array.isArray(g)}function PL(g){return"boolean"==typeof g}function tW(g){return"number"==typeof g}function tE(g){return"string"==typeof g}function Mt(g){return void 0===g}function wz(g){return Dw(g)&&"[object RegExp]"===
Object.prototype.toString.call(g)}function Dw(g){return"object"==typeof g&&null!==g}function uE(g){return Dw(g)&&"[object Date]"===Object.prototype.toString.call(g)}function vz(g){return Dw(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function sE(g){return"function"==typeof g}function SL(g){return 10>g?"0"+g.toString(10):g.toString(10)}function $9(){var g=new Date,c=[SL(g.getHours()),SL(g.getMinutes()),SL(g.getSeconds())].join(":");return[g.getDate(),a$[g.getMonth()],
c].join(" ")}function b$(g,c){if(!g){var h=Error("Promise was rejected with a falsy value");h.reason=g;g=h}return c(g)}function vW(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");return-1===g&&(g=c),[g,g===c?0:4-g%4]}function c$(g,c,h){for(var f,m=[],n=c;n<h;n+=3)c=(g[n]<<16&16711680)+(g[n+1]<<8&65280)+(255&g[n+2]),m.push(Zo[(f=c)>>18&63]+Zo[f>>12&63]+Zo[f>>6&63]+Zo[63&f]);return m.join("")}function iq(g){if(2147483647<g)throw new RangeError('The value "'+
g+'" is invalid for option "size"');g=new Uint8Array(g);return Object.setPrototypeOf(g,de.prototype),g}function de(g,c,h){if("number"==typeof g){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return TL(g)}return wW(g,c,h)}function wW(g,c,h){if("string"==typeof g)return function(m,n){"string"==typeof n&&""!==n||(n="utf8");if(!de.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var a=0|xW(m,n),d=iq(a);m=d.write(m,n);m!==a&&(d=
d.slice(0,m));return d}(g,c);if(ArrayBuffer.isView(g))return UL(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(jq(g,ArrayBuffer)||g&&jq(g.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(jq(g,SharedArrayBuffer)||g&&jq(g.buffer,SharedArrayBuffer)))return d$(g,c,h);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
var f=g.valueOf&&g.valueOf();if(null!=f&&f!==g)return de.from(f,c,h);if(f=function(m){if(de.isBuffer(m)){var n=0|VL(m.length),a=iq(n);return 0===a.length||m.copy(a,0,0,n),a}if(void 0!==m.length)return(n="number"!=typeof m.length)||(n=m.length,n=n!=n),n?iq(0):UL(m);if("Buffer"===m.type&&Array.isArray(m.data))return UL(m.data)}(g))return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return de.from(g[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function yW(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function TL(g){return yW(g),iq(0>g?0:0|VL(g))}function UL(g){for(var c=0>g.length?0:0|VL(g.length),h=iq(c),f=0;f<c;f+=1)h[f]=255&g[f];return h}function d$(g,c,h){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
var f;return f=void 0===c&&void 0===h?new Uint8Array(g):void 0===h?new Uint8Array(g,c):new Uint8Array(g,c,h),Object.setPrototypeOf(f,de.prototype),f}function VL(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|g}function xW(g,c){if(de.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||jq(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof g);var h=g.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var m=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return WL(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return zW(g).length;default:if(m)return f?-1:WL(g).length;c=(""+c).toLowerCase();m=!0}}function e$(g,c,h){var f=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===h||h>this.length)&&
(h=this.length),0>=h)||(h>>>=0)<=(c>>>=0))return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;(!c||0>c)&&(c=0);(!h||0>h||h>g)&&(h=g);for(g="";c<h;++c)g+=f$[this[c]];return g;case "utf8":case "utf-8":return AW(this,c,h);case "ascii":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(127&this[c]);return g;case "latin1":case "binary":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return 0===c&&h===this.length?XL.fromByteArray(this):
XL.fromByteArray(this.slice(c,h));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(g=0;g<c.length;g+=2)h+=String.fromCharCode(c[g]+256*c[g+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();f=!0}}function Nt(g,c,h){var f=g[c];g[c]=g[h];g[h]=f}function BW(g,c,h,f,m){if(0===g.length)return-1;"string"==typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);var n=h=+h;if(n!=n&&(h=m?0:g.length-1),0>h&&(h=g.length+
h),h>=g.length){if(m)return-1;h=g.length-1}else if(0>h){if(!m)return-1;h=0}if("string"==typeof c&&(c=de.from(c,f)),de.isBuffer(c))return 0===c.length?-1:CW(g,c,h,f,m);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(g,c,h):Uint8Array.prototype.lastIndexOf.call(g,c,h):CW(g,[c],h,f,m);throw new TypeError("val must be string, number or Buffer");}function CW(g,c,h,f,m){function n(b,e){return 1===a?b[e]:b.readUInt16BE(e*a)}var a=1,
d=g.length,k=c.length;if(void 0!==f&&("ucs2"===(f=String(f).toLowerCase())||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>g.length||2>c.length)return-1;a=2;d/=2;k/=2;h/=2}if(m)for(f=-1;h<d;h++)if(n(g,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===k)return f*a}else-1!==f&&(h-=h-f),f=-1;else for(h+k>d&&(h=d-k);0<=h;h--){d=!0;for(f=0;f<k;f++)if(n(g,h+f)!==n(c,f)){d=!1;break}if(d)return h}return-1}function DW(g,c,h,f){for(var m=[],n=0;n<c.length;++n)m.push(255&c.charCodeAt(n));return vE(m,g,h,f)}
function AW(g,c,h){h=Math.min(g.length,h);for(var f=[];c<h;){var m,n,a=g[c],d=null,k=239<a?4:223<a?3:191<a?2:1;if(c+k<=h)switch(k){case 1:128>a&&(d=a);break;case 2:128==(192&(m=g[c+1]))&&127<(n=(31&a)<<6|63&m)&&(d=n);break;case 3:m=g[c+1];var b=g[c+2];128==(192&m)&&128==(192&b)&&2047<(n=(15&a)<<12|(63&m)<<6|63&b)&&(55296>n||57343<n)&&(d=n);break;case 4:m=g[c+1];b=g[c+2];var e=g[c+3];128==(192&m)&&128==(192&b)&&128==(192&e)&&65535<(n=(15&a)<<18|(63&m)<<12|(63&b)<<6|63&e)&&1114112>n&&(d=n)}null===d?
(d=65533,k=1):65535<d&&(d-=65536,f.push(d>>>10&1023|55296),d=56320|1023&d);f.push(d);c+=k}g=f.length;if(4096>=g)f=String.fromCharCode.apply(String,f);else{h="";for(m=0;m<g;)h+=String.fromCharCode.apply(String,f.slice(m,m+=4096));f=h}return f}function Ck(g,c,h){if(0!=g%1||0>g)throw new RangeError("offset is not uint");if(g+c>h)throw new RangeError("Trying to access beyond buffer length");}function cm(g,c,h,f,m,n){if(!de.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>m||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>g.length)throw new RangeError("Index out of range");}function EW(g,c,h,f,m,n){if(h+f>g.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function FW(g,c,h,f,m){return c=+c,h>>>=0,m||EW(g,0,h,4),Ew.write(g,c,h,f,23,4),h+4}function GW(g,c,h,f,m){return c=+c,h>>>=0,m||EW(g,0,h,8),Ew.write(g,c,h,f,52,8),h+8}function WL(g,c){var h;c=c||1/0;for(var f=g.length,m=null,n=[],a=0;a<
f;++a){if(55295<(h=g.charCodeAt(a))&&57344>h){if(!m){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}if(a+1===f){-1<(c-=3)&&n.push(239,191,189);continue}m=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);m=h;continue}h=65536+(m-55296<<10|h-56320)}else m&&-1<(c-=3)&&n.push(239,191,189);if(m=null,128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,63&h|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(1114112>h))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return n}function zW(g){return XL.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(g$,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(g))}function vE(g,c,h,f){for(var m=0;m<f&&!(m+h>=c.length||m>=g.length);++m)c[m+h]=g[m];return m}function jq(g,c){return g instanceof c||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===c.name}function HW(g,c){for(var h in g)c[h]=g[h]}function Ot(g,
c,h){return $o(g,c,h)}function xz(g){switch(this.encoding=function(c){var h=function(f){if(!f)return"utf8";for(var m;;)switch(f){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return f;default:if(m)return;f=(""+f).toLowerCase();m=!0}}(c);if("string"!=typeof h&&(YL.isEncoding===IW||!IW(c)))throw Error("Unknown encoding: "+c);return h||c}(g),this.encoding){case "utf16le":this.text=
h$;this.end=i$;g=4;break;case "utf8":this.fillLast=j$;g=4;break;case "base64":this.text=k$;this.end=l$;g=3;break;default:return this.write=m$,this.end=n$,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=YL.allocUnsafe(g)}function ZL(g){return 127>=g?0:6==g>>5?2:14==g>>4?3:30==g>>3?4:2==g>>6?-1:-2}function j$(g){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&g[0]))var h=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<g.length){if(128!=(192&g[1])){h=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<g.length&&128!=(192&g[2])){h=(this.lastNeed=2,"\ufffd");break a}}h=void 0}return void 0!==h?h:this.lastNeed<=g.length?(g.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,c,0,g.length),this.lastNeed-=g.length,void 0)}function h$(g,c){if(0==(g.length-c)%2){if(c=g.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=
g[g.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",c,g.length-1)}function i$(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function k$(g,c){var h=(g.length-c)%3;return 0===h?g.toString("base64",c):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",
c,g.length-h))}function l$(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function m$(g){return g.toString(this.encoding)}function n$(g){return g&&g.length?this.write(g):""}function cn(g,c,h){h||(h=Error);var f=function(m,n,a){return a.call(this,"string"==typeof c?c:c(m,n,a))||this};$jscomp.inherits(f,h);f.prototype.name=h.name;f.prototype.code=g;JW[g]=f}function KW(g,c){if(Array.isArray(g)){var h=g.length;return g=g.map(function(f){return String(f)}),
2<h?"one of "+c+" "+g.slice(0,h-1).join(", ")+", or "+g[h-1]:2===h?"one of "+c+" "+g[0]+" or "+g[1]:"of "+c+" "+g[0]}return"of "+c+" "+String(g)}function $L(g){try{if(!aM.localStorage)return!1}catch(c){return!1}g=aM.localStorage[g];return null!=g&&"true"===String(g).toLowerCase()}function LW(g,c){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(g,m).enumerable}));h.push.apply(h,f)}return h}
function o$(g,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(g,f.key,f)}}function MW(g,c){bM(g,c);wE(g)}function wE(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function bM(g,c){g.emit("error",c)}function p$(){}function zr(g,c,h){return c in g?Object.defineProperty(g,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):g[c]=h,g}function Ar(g,
c){return{value:g,done:c}}function q$(g){var c=g[Br];if(null!==c){var h=g[Pt].read();null!==h&&(g[Qt]=null,g[Br]=null,g[Rt]=null,c(Ar(h,!1)))}}function r$(g){NW.nextTick(q$,g)}function OW(){function g(xa,na,Aa){A=A||yz();xa=xa||{};"boolean"!=typeof Aa&&(Aa=na instanceof A);this.objectMode=!!xa.objectMode;Aa&&(this.objectMode=this.objectMode||!!xa.readableObjectMode);this.highWaterMark=Y(this,xa,"readableHighWaterMark",Aa);this.buffer=new F;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==xa.emitClose;this.autoDestroy=!!xa.autoDestroy;this.destroyed=!1;this.defaultEncoding=xa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;xa.encoding&&(ba||(ba=Fw.StringDecoder),this.decoder=new ba(xa.encoding),this.encoding=xa.encoding)}function c(xa){if(A=A||yz(),!(this instanceof
c))return new c(xa);this._readableState=new g(xa,this,this instanceof A);this.readable=!0;xa&&("function"==typeof xa.read&&(this._read=xa.read),"function"==typeof xa.destroy&&(this._destroy=xa.destroy));D.call(this)}function h(xa,na,Aa,Pa,Da){V("readableAddChunk",na);var M,U=xa._readableState;if(null===na)U.reading=!1,function(aa,pa){if(V("onEofChunk"),!pa.ended){if(pa.decoder){var ma=pa.decoder.end();ma&&ma.length&&(pa.buffer.push(ma),pa.length+=pa.objectMode?1:ma.length)}pa.ended=!0;pa.sync?n(aa):
(pa.needReadable=!1,pa.emittedReadable||(pa.emittedReadable=!0,a(aa)))}}(xa,U);else if(Da||(M=function(aa,pa){var ma;var La=pa;L.isBuffer(La)||La instanceof I||"string"==typeof pa||void 0===pa||aa.objectMode||(ma=new W("chunk",["string","Buffer","Uint8Array"],pa));return ma}(U,na)),M)db(xa,M);else if(U.objectMode||na&&0<na.length)if("string"==typeof na||U.objectMode||Object.getPrototypeOf(na)===L.prototype||(na=L.from(na)),Pa)U.endEmitted?db(xa,new la):f(xa,U,na,!0);else if(U.ended)db(xa,new ka);
else{if(U.destroyed)return!1;U.reading=!1;U.decoder&&!Aa?(na=U.decoder.write(na),U.objectMode||0!==na.length?f(xa,U,na,!1):d(xa,U)):f(xa,U,na,!1)}else Pa||(U.reading=!1,d(xa,U));return!U.ended&&(U.length<U.highWaterMark||0===U.length)}function f(xa,na,Aa,Pa){na.flowing&&0===na.length&&!na.sync?(na.awaitDrain=0,xa.emit("data",Aa)):(na.length+=na.objectMode?1:Aa.length,Pa?na.buffer.unshift(Aa):na.buffer.push(Aa),na.needReadable&&n(xa));d(xa,na)}function m(xa,na){if(0>=xa||0===na.length&&na.ended)xa=
0;else if(na.objectMode)xa=1;else if(xa!=xa)xa=na.flowing&&na.length?na.buffer.head.data.length:na.length;else{if(xa>na.highWaterMark){var Aa=xa;var Pa=(1073741824<=Aa?Aa=1073741824:(Aa--,Aa|=Aa>>>1,Aa|=Aa>>>2,Aa|=Aa>>>4,Aa|=Aa>>>8,Aa|=Aa>>>16,Aa++),Aa);na.highWaterMark=Pa}xa=xa<=na.length?xa:na.ended?na.length:(na.needReadable=!0,0)}return xa}function n(xa){var na=xa._readableState;V("emitReadable",na.needReadable,na.emittedReadable);na.needReadable=!1;na.emittedReadable||(V("emitReadable",na.flowing),
na.emittedReadable=!0,C.nextTick(a,xa))}function a(xa){var na=xa._readableState;V("emitReadable_",na.destroyed,na.length,na.ended);na.destroyed||!na.length&&!na.ended||(xa.emit("readable"),na.emittedReadable=!1);na.needReadable=!na.flowing&&!na.ended&&na.length<=na.highWaterMark;p(xa)}function d(xa,na){na.readingMore||(na.readingMore=!0,C.nextTick(k,xa,na))}function k(xa,na){for(;!na.reading&&!na.ended&&(na.length<na.highWaterMark||na.flowing&&0===na.length);){var Aa=na.length;if(V("maybeReadMore read 0"),
xa.read(0),Aa===na.length)break}na.readingMore=!1}function b(xa){var na=xa._readableState;na.readableListening=0<xa.listenerCount("readable");na.resumeScheduled&&!na.paused?na.flowing=!0:0<xa.listenerCount("data")&&xa.resume()}function e(xa){V("readable nexttick read 0");xa.read(0)}function l(xa,na){V("resume",na.reading);na.reading||xa.read(0);na.resumeScheduled=!1;xa.emit("resume");p(xa);na.flowing&&!na.reading&&xa.read(0)}function p(xa){var na=xa._readableState;for(V("flow",na.flowing);na.flowing&&
null!==xa.read(););}function q(xa,na){return 0===na.length?null:(na.objectMode?Aa=na.buffer.shift():!xa||xa>=na.length?(Aa=na.decoder?na.buffer.join(""):1===na.buffer.length?na.buffer.first():na.buffer.concat(na.length),na.buffer.clear()):Aa=na.buffer.consume(xa,na.decoder),Aa);var Aa}function u(xa){var na=xa._readableState;V("endReadable",na.endEmitted);na.endEmitted||(na.ended=!0,C.nextTick(w,na,xa))}function w(xa,na){if(V("endReadableNT",xa.endEmitted,xa.length),!xa.endEmitted&&0===xa.length&&
(xa.endEmitted=!0,na.readable=!1,na.emit("end"),xa.autoDestroy))xa=na._writableState,(!xa||xa.autoDestroy&&xa.finished)&&na.destroy()}function y(xa,na){for(var Aa=0,Pa=xa.length;Aa<Pa;Aa++)if(xa[Aa]===na)return Aa;return-1}if(PW)return cM;PW=!0;var A,C=yh;cM=c;c.ReadableState=g;ap.EventEmitter;var D=xE,L=Ng.Buffer,I=s$.Uint8Array||function(){},S=Eg;var V=S&&S.debuglog?S.debuglog("stream"):function(){};var ba,ua,Fa,F=t$;S=QW;var Y=RW.getHighWaterMark,Q=bo.codes,W=Q.ERR_INVALID_ARG_TYPE,ka=Q.ERR_STREAM_PUSH_AFTER_EOF,
ea=Q.ERR_METHOD_NOT_IMPLEMENTED,la=Q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Wg(c,D);var db=S.errorOrDestroy,ub=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(xa){this._readableState&&(this._readableState.destroyed=xa)}});c.prototype.destroy=S.destroy;c.prototype._undestroy=S.undestroy;c.prototype._destroy=function(xa,na){na(xa)};c.prototype.push=function(xa,
na){var Aa,Pa=this._readableState;return Pa.objectMode?Aa=!0:"string"==typeof xa&&((na=na||Pa.defaultEncoding)!==Pa.encoding&&(xa=L.from(xa,na),na=""),Aa=!0),h(this,xa,na,!1,Aa)};c.prototype.unshift=function(xa){return h(this,xa,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(xa){ba||(ba=Fw.StringDecoder);xa=new ba(xa);this._readableState.decoder=xa;this._readableState.encoding=this._readableState.decoder.encoding;for(var na=this._readableState.buffer.head,
Aa="";null!==na;)Aa+=xa.write(na.data),na=na.next;return this._readableState.buffer.clear(),""!==Aa&&this._readableState.buffer.push(Aa),this._readableState.length=Aa.length,this};return c.prototype.read=function(xa){V("read",xa);xa=parseInt(xa,10);var na=this._readableState,Aa=xa;if(0!==xa&&(na.emittedReadable=!1),0===xa&&na.needReadable&&((0!==na.highWaterMark?na.length>=na.highWaterMark:0<na.length)||na.ended))return V("read: emitReadable",na.length,na.ended),0===na.length&&na.ended?u(this):n(this),
null;if(0===(xa=m(xa,na))&&na.ended)return 0===na.length&&u(this),null;var Pa,Da=na.needReadable;return V("need readable",Da),(0===na.length||na.length-xa<na.highWaterMark)&&V("length less than watermark",Da=!0),na.ended||na.reading?V("reading or ended",!1):Da&&(V("do read"),na.reading=!0,na.sync=!0,0===na.length&&(na.needReadable=!0),this._read(na.highWaterMark),na.sync=!1,na.reading||(xa=m(Aa,na))),null===(Pa=0<xa?q(xa,na):null)?(na.needReadable=na.length<=na.highWaterMark,xa=0):(na.length-=xa,
na.awaitDrain=0),0===na.length&&(na.ended||(na.needReadable=!0),Aa!==xa&&na.ended&&u(this)),null!==Pa&&this.emit("data",Pa),Pa},c.prototype._read=function(xa){db(this,new ea("_read()"))},c.prototype.pipe=function(xa,na){function Aa(qa,ra){V("onunpipe");qa===ma&&ra&&!1===ra.hasUnpiped&&(ra.hasUnpiped=!0,V("cleanup"),xa.removeListener("close",U),xa.removeListener("finish",aa),xa.removeListener("drain",ib),xa.removeListener("error",M),xa.removeListener("unpipe",Aa),ma.removeListener("end",Pa),ma.removeListener("end",
pa),ma.removeListener("data",Da),ca=!0,!La.awaitDrain||xa._writableState&&!xa._writableState.needDrain||ib())}function Pa(){V("onend");xa.end()}function Da(qa){V("ondata");qa=xa.write(qa);V("dest.write",qa);!1===qa&&((1===La.pipesCount&&La.pipes===xa||1<La.pipesCount&&-1!==y(La.pipes,xa))&&!ca&&(V("false write response, pause",La.awaitDrain),La.awaitDrain++),ma.pause())}function M(qa){V("onerror",qa);pa();xa.removeListener("error",M);0===xa.listeners("error").length&&db(xa,qa)}function U(){xa.removeListener("finish",
aa);pa()}function aa(){V("onfinish");xa.removeListener("close",U);pa()}function pa(){V("unpipe");ma.unpipe(xa)}var ma=this,La=this._readableState;switch(La.pipesCount){case 0:La.pipes=xa;break;case 1:La.pipes=[La.pipes,xa];break;default:La.pipes.push(xa)}La.pipesCount+=1;V("pipe count=%d opts=%j",La.pipesCount,na);na=na&&!1===na.end||xa===C.stdout||xa===C.stderr?pa:Pa;La.endEmitted?C.nextTick(na):ma.once("end",na);xa.on("unpipe",Aa);var ib=function(qa){return function(){var ra=qa._readableState;V("pipeOnDrain",
ra.awaitDrain);ra.awaitDrain&&ra.awaitDrain--;0===ra.awaitDrain&&qa.listeners("data").length&&(ra.flowing=!0,p(qa))}}(ma);xa.on("drain",ib);var ca=!1;return ma.on("data",Da),function(qa,ra,Va){if("function"==typeof qa.prependListener)return qa.prependListener(ra,Va);qa._events&&qa._events[ra]?Array.isArray(qa._events[ra])?qa._events[ra].unshift(Va):qa._events[ra]=[Va,qa._events[ra]]:qa.on(ra,Va)}(xa,"error",M),xa.once("close",U),xa.once("finish",aa),xa.emit("pipe",ma),La.flowing||(V("pipe resume"),
ma.resume()),xa},c.prototype.unpipe=function(xa){var na=this._readableState,Aa={hasUnpiped:!1};if(0===na.pipesCount)return this;if(1===na.pipesCount)return xa&&xa!==na.pipes||(xa||(xa=na.pipes),na.pipes=null,na.pipesCount=0,na.flowing=!1,xa&&xa.emit("unpipe",this,Aa)),this;if(!xa){xa=na.pipes;Aa=na.pipesCount;na.pipes=null;na.pipesCount=0;na.flowing=!1;for(na=0;na<Aa;na++)xa[na].emit("unpipe",this,{hasUnpiped:!1});return this}var Pa=y(na.pipes,xa);return-1===Pa||(na.pipes.splice(Pa,1),--na.pipesCount,
1===na.pipesCount&&(na.pipes=na.pipes[0]),xa.emit("unpipe",this,Aa)),this},c.prototype.on=function(xa,na){na=D.prototype.on.call(this,xa,na);var Aa=this._readableState;return"data"===xa?(Aa.readableListening=0<this.listenerCount("readable"),!1!==Aa.flowing&&this.resume()):"readable"===xa&&(Aa.endEmitted||Aa.readableListening||(Aa.readableListening=Aa.needReadable=!0,Aa.flowing=!1,Aa.emittedReadable=!1,V("on readable",Aa.length,Aa.reading),Aa.length?n(this):Aa.reading||C.nextTick(e,this))),na},c.prototype.addListener=
c.prototype.on,c.prototype.removeListener=function(xa,na){na=D.prototype.removeListener.call(this,xa,na);return"readable"===xa&&C.nextTick(b,this),na},c.prototype.removeAllListeners=function(xa){var na=D.prototype.removeAllListeners.apply(this,arguments);return"readable"!==xa&&void 0!==xa||C.nextTick(b,this),na},c.prototype.resume=function(){var xa=this._readableState;xa.flowing||(V("resume"),xa.flowing=!xa.readableListening,xa.resumeScheduled||(xa.resumeScheduled=!0,C.nextTick(l,this,xa)));return xa.paused=
!1,this},c.prototype.pause=function(){return V("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(V("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(xa){var na=this,Aa=this._readableState,Pa=!1,Da;for(Da in xa.on("end",function(){if(V("wrapped end"),Aa.decoder&&!Aa.ended){var M=Aa.decoder.end();M&&M.length&&na.push(M)}na.push(null)}),xa.on("data",function(M){(V("wrapped data"),Aa.decoder&&
(M=Aa.decoder.write(M)),Aa.objectMode&&null==M)||(Aa.objectMode||M&&M.length)&&(na.push(M)||(Pa=!0,xa.pause()))}),xa)void 0===this[Da]&&"function"==typeof xa[Da]&&(this[Da]=function(M){return function(){return xa[M].apply(xa,arguments)}}(Da));for(Da=0;Da<ub.length;Da++)xa.on(ub[Da],this.emit.bind(this,ub[Da]));return this._read=function(M){V("wrapped _read",M);Pa&&(Pa=!1,xa.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===ua&&(ua=u$),ua(this)}),
Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(xa){this._readableState&&(this._readableState.flowing=xa)}}),c._fromList=q,Object.defineProperty(c.prototype,
"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(xa,na){return void 0===Fa&&(Fa=SW),Fa(c,xa,na)}),cM}function v$(){function g(Q){var W=this;this.entry=this.next=null;this.finish=function(){var ka=W.entry;for(W.entry=null;ka;){var ea=ka.callback;Q.pendingcb--;ea(void 0);ka=ka.next}Q.corkedRequestsFree.next=W;!0}}function c(){}function h(Q,W,ka){e=e||yz();Q=Q||{};"boolean"!=typeof ka&&(ka=W instanceof e);this.objectMode=
!!Q.objectMode;ka&&(this.objectMode=this.objectMode||!!Q.writableObjectMode);this.highWaterMark=C(this,Q,"writableHighWaterMark",ka);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==Q.decodeStrings;this.defaultEncoding=Q.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(ea){!function(la,db){var ub=la._writableState,xa=ub.sync,na=ub.writecb;if("function"!=typeof na)throw new S;
(function(Aa){Aa.writing=!1;Aa.writecb=null;Aa.length-=Aa.writelen;Aa.writelen=0}(ub),db)?!function(Aa,Pa,Da,M,U){--Pa.pendingcb;Da?(l.nextTick(U,M),l.nextTick(b,Aa,Pa),Aa._writableState.errorEmitted=!0,Y(Aa,M)):(U(M),Aa._writableState.errorEmitted=!0,Y(Aa,M),b(Aa,Pa))}(la,ub,xa,db,na):((db=d(ub)||la.destroyed)||ub.corked||ub.bufferProcessing||!ub.bufferedRequest||a(la,ub),xa?l.nextTick(n,la,ub,db,na):n(la,ub,db,na))}(W,ea)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=
null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==Q.emitClose;this.autoDestroy=!!Q.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(Q){var W=this instanceof(e=e||yz());if(!W&&!y.call(f,this))return new f(Q);this._writableState=new h(Q,this,W);this.writable=!0;Q&&("function"==typeof Q.write&&(this._write=Q.write),"function"==typeof Q.writev&&(this._writev=Q.writev),"function"==typeof Q.destroy&&(this._destroy=Q.destroy),"function"==
typeof Q.final&&(this._final=Q.final));q.call(this)}function m(Q,W,ka,ea,la,db,ub){W.writelen=ea;W.writecb=ub;W.writing=!0;W.sync=!0;W.destroyed?W.onwrite(new ba("write")):ka?Q._writev(la,W.onwrite):Q._write(la,db,W.onwrite);W.sync=!1}function n(Q,W,ka,ea){ka||(0===W.length&&W.needDrain&&(W.needDrain=!1,Q.emit("drain")),!0);W.pendingcb--;ea();b(Q,W)}function a(Q,W){W.bufferProcessing=!0;var ka=W.bufferedRequest;if(Q._writev&&ka&&ka.next){var ea=Array(W.bufferedRequestCount),la=W.corkedRequestsFree;
la.entry=ka;for(var db=0,ub=!0;ka;)ea[db]=ka,ka.isBuf||(ub=!1),ka=ka.next,db+=1;ea.allBuffers=ub;m(Q,W,!0,W.length,ea,"",la.finish);W.pendingcb++;W.lastBufferedRequest=null;la.next?(W.corkedRequestsFree=la.next,la.next=null):W.corkedRequestsFree=new g(W);W.bufferedRequestCount=0}else{for(;ka&&(ea=ka.chunk,m(Q,W,!1,W.objectMode?1:ea.length,ea,ka.encoding,ka.callback),ka=ka.next,W.bufferedRequestCount--,!W.writing););null===ka&&(W.lastBufferedRequest=null)}W.bufferedRequest=ka;W.bufferProcessing=!1}
function d(Q){return Q.ending&&0===Q.length&&null===Q.bufferedRequest&&!Q.finished&&!Q.writing}function k(Q,W){Q._final(function(ka){W.pendingcb--;ka&&Y(Q,ka);W.prefinished=!0;Q.emit("prefinish");b(Q,W)})}function b(Q,W){var ka=d(W),ea;if(ea=ka)W.prefinished||W.finalCalled||("function"!=typeof Q._final||W.destroyed?(W.prefinished=!0,Q.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,l.nextTick(k,Q,W))),ea=(!0,0===W.pendingcb&&(W.finished=!0,Q.emit("finish"),W.autoDestroy));ea&&(W=Q._readableState,
(!W||W.autoDestroy&&W.endEmitted)&&Q.destroy());return ka}if(TW)return dM;TW=!0;var e,l=yh;dM=f;f.WritableState=h;var p={deprecate:UW},q=xE,u=Ng.Buffer,w=w$.Uint8Array||function(){},y,A=QW,C=RW.getHighWaterMark,D=bo.codes,L=D.ERR_INVALID_ARG_TYPE,I=D.ERR_METHOD_NOT_IMPLEMENTED,S=D.ERR_MULTIPLE_CALLBACK,V=D.ERR_STREAM_CANNOT_PIPE,ba=D.ERR_STREAM_DESTROYED,ua=D.ERR_STREAM_NULL_VALUES,Fa=D.ERR_STREAM_WRITE_AFTER_END,F=D.ERR_UNKNOWN_ENCODING,Y=A.errorOrDestroy;return Wg(f,q),h.prototype.getBuffer=function(){for(var Q=
this.bufferedRequest,W=[];Q;)W.push(Q),Q=Q.next;return W},function(){try{Object.defineProperty(h.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Q){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(Q){return!!y.call(this,
Q)||this===f&&Q&&Q._writableState instanceof h}})):y=function(Q){return Q instanceof this},f.prototype.pipe=function(){Y(this,new V)},f.prototype.write=function(Q,W,ka){var ea,la=this._writableState,db=!1,ub=!la.objectMode&&(ea=Q,u.isBuffer(ea)||ea instanceof w);return ub&&!u.isBuffer(Q)&&(Q=u.from(Q)),"function"==typeof W&&(ka=W,W=null),ub?W="buffer":W||(W=la.defaultEncoding),"function"!=typeof ka&&(ka=c),la.ending?function(xa,na){var Aa=new Fa;Y(xa,Aa);l.nextTick(na,Aa)}(this,ka):(ub||function(xa,
na,Aa,Pa){var Da;return null===Aa?Da=new ua:"string"==typeof Aa||na.objectMode||(Da=new L("chunk",["string","Buffer"],Aa)),!Da||(Y(xa,Da),l.nextTick(Pa,Da),!1)}(this,la,Q,ka))&&(la.pendingcb++,db=function(xa,na,Aa,Pa,Da,M){if(!Aa){var U=Pa;na.objectMode||!1===na.decodeStrings||"string"!=typeof U||(U=u.from(U,Da));Pa!==U&&(Aa=!0,Da="buffer",Pa=U)}var aa=na.objectMode?1:Pa.length;na.length+=aa;(U=na.length<na.highWaterMark)||(na.needDrain=!0);na.writing||na.corked?(xa=na.lastBufferedRequest,na.lastBufferedRequest=
{chunk:Pa,encoding:Da,isBuf:Aa,callback:M,next:null},xa?xa.next=na.lastBufferedRequest:na.bufferedRequest=na.lastBufferedRequest,na.bufferedRequestCount+=1):m(xa,na,!1,aa,Pa,Da,M);return U}(this,la,ub,Q,W,ka)),db},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var Q=this._writableState;Q.corked&&(Q.corked--,Q.writing||Q.corked||Q.bufferProcessing||!Q.bufferedRequest||a(this,Q))},f.prototype.setDefaultEncoding=function(Q){if("string"==typeof Q&&(Q=Q.toLowerCase()),
!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((Q+"").toLowerCase())))throw new F(Q);return this._writableState.defaultEncoding=Q,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(Q,W,ka){ka(new I("_write()"))},
f.prototype._writev=null,f.prototype.end=function(Q,W,ka){var ea=this._writableState;"function"==typeof Q?(ka=Q,Q=null,W=null):"function"==typeof W&&(ka=W,W=null);null!=Q&&this.write(Q,W);ea.corked&&(ea.corked=1,this.uncork());ea.ending||(Q=ka,ea.ending=!0,b(this,ea),Q&&(ea.finished?l.nextTick(Q):this.once("finish",Q)),ea.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Q){this._writableState&&(this._writableState.destroyed=Q)}}),f.prototype.destroy=A.destroy,f.prototype._undestroy=A.undestroy,f.prototype._destroy=function(Q,W){W(Q)},dM}function yz(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&
(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if(VW)return eM;VW=!0;var f=yh,m=Object.keys||function(b){var e=[],l;for(l in b)e.push(l);return e};eM=g;var n=OW(),a=v$();Wg(g,n);m=m(a.prototype);for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,
"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&
(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),eM}function x$(){}function WW(g,c){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(g);c&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(g,m).enumerable}));h.push.apply(h,f)}return h}function y$(g,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(g,f.key,f)}}function XW(g,c){fM(g,c);yE(g)}
function yE(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function fM(g,c){g.emit("error",c)}function Cr(g,c,h){return c in g?Object.defineProperty(g,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):g[c]=h,g}function Dr(g,c){return{value:g,done:c}}function z$(g){var c=g[Er];if(null!==c){var h=g[St].read();null!==h&&(g[Tt]=null,g[Er]=null,g[Ut]=null,c(Dr(h,!1)))}}function A$(g){YW.nextTick(z$,g)}function B$(){function g(xa,na,
Aa){A=A||zE();xa=xa||{};"boolean"!=typeof Aa&&(Aa=na instanceof A);this.objectMode=!!xa.objectMode;Aa&&(this.objectMode=this.objectMode||!!xa.readableObjectMode);this.highWaterMark=Y(this,xa,"readableHighWaterMark",Aa);this.buffer=new F;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==xa.emitClose;this.autoDestroy=
!!xa.autoDestroy;this.destroyed=!1;this.defaultEncoding=xa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;xa.encoding&&(ba||(ba=Fw.StringDecoder),this.decoder=new ba(xa.encoding),this.encoding=xa.encoding)}function c(xa){if(A=A||zE(),!(this instanceof c))return new c(xa);this._readableState=new g(xa,this,this instanceof A);this.readable=!0;xa&&("function"==typeof xa.read&&(this._read=xa.read),"function"==typeof xa.destroy&&(this._destroy=xa.destroy));
D.call(this)}function h(xa,na,Aa,Pa,Da){V("readableAddChunk",na);var M,U=xa._readableState;if(null===na)U.reading=!1,function(aa,pa){if(V("onEofChunk"),!pa.ended){if(pa.decoder){var ma=pa.decoder.end();ma&&ma.length&&(pa.buffer.push(ma),pa.length+=pa.objectMode?1:ma.length)}pa.ended=!0;pa.sync?n(aa):(pa.needReadable=!1,pa.emittedReadable||(pa.emittedReadable=!0,a(aa)))}}(xa,U);else if(Da||(M=function(aa,pa){var ma;var La=pa;L.isBuffer(La)||La instanceof I||"string"==typeof pa||void 0===pa||aa.objectMode||
(ma=new W("chunk",["string","Buffer","Uint8Array"],pa));return ma}(U,na)),M)db(xa,M);else if(U.objectMode||na&&0<na.length)if("string"==typeof na||U.objectMode||Object.getPrototypeOf(na)===L.prototype||(na=L.from(na)),Pa)U.endEmitted?db(xa,new la):f(xa,U,na,!0);else if(U.ended)db(xa,new ka);else{if(U.destroyed)return!1;U.reading=!1;U.decoder&&!Aa?(na=U.decoder.write(na),U.objectMode||0!==na.length?f(xa,U,na,!1):d(xa,U)):f(xa,U,na,!1)}else Pa||(U.reading=!1,d(xa,U));return!U.ended&&(U.length<U.highWaterMark||
0===U.length)}function f(xa,na,Aa,Pa){na.flowing&&0===na.length&&!na.sync?(na.awaitDrain=0,xa.emit("data",Aa)):(na.length+=na.objectMode?1:Aa.length,Pa?na.buffer.unshift(Aa):na.buffer.push(Aa),na.needReadable&&n(xa));d(xa,na)}function m(xa,na){if(0>=xa||0===na.length&&na.ended)xa=0;else if(na.objectMode)xa=1;else if(xa!=xa)xa=na.flowing&&na.length?na.buffer.head.data.length:na.length;else{if(xa>na.highWaterMark){var Aa=xa;var Pa=(1073741824<=Aa?Aa=1073741824:(Aa--,Aa|=Aa>>>1,Aa|=Aa>>>2,Aa|=Aa>>>4,
Aa|=Aa>>>8,Aa|=Aa>>>16,Aa++),Aa);na.highWaterMark=Pa}xa=xa<=na.length?xa:na.ended?na.length:(na.needReadable=!0,0)}return xa}function n(xa){var na=xa._readableState;V("emitReadable",na.needReadable,na.emittedReadable);na.needReadable=!1;na.emittedReadable||(V("emitReadable",na.flowing),na.emittedReadable=!0,C.nextTick(a,xa))}function a(xa){var na=xa._readableState;V("emitReadable_",na.destroyed,na.length,na.ended);na.destroyed||!na.length&&!na.ended||(xa.emit("readable"),na.emittedReadable=!1);na.needReadable=
!na.flowing&&!na.ended&&na.length<=na.highWaterMark;p(xa)}function d(xa,na){na.readingMore||(na.readingMore=!0,C.nextTick(k,xa,na))}function k(xa,na){for(;!na.reading&&!na.ended&&(na.length<na.highWaterMark||na.flowing&&0===na.length);){var Aa=na.length;if(V("maybeReadMore read 0"),xa.read(0),Aa===na.length)break}na.readingMore=!1}function b(xa){var na=xa._readableState;na.readableListening=0<xa.listenerCount("readable");na.resumeScheduled&&!na.paused?na.flowing=!0:0<xa.listenerCount("data")&&xa.resume()}
function e(xa){V("readable nexttick read 0");xa.read(0)}function l(xa,na){V("resume",na.reading);na.reading||xa.read(0);na.resumeScheduled=!1;xa.emit("resume");p(xa);na.flowing&&!na.reading&&xa.read(0)}function p(xa){var na=xa._readableState;for(V("flow",na.flowing);na.flowing&&null!==xa.read(););}function q(xa,na){return 0===na.length?null:(na.objectMode?Aa=na.buffer.shift():!xa||xa>=na.length?(Aa=na.decoder?na.buffer.join(""):1===na.buffer.length?na.buffer.first():na.buffer.concat(na.length),na.buffer.clear()):
Aa=na.buffer.consume(xa,na.decoder),Aa);var Aa}function u(xa){var na=xa._readableState;V("endReadable",na.endEmitted);na.endEmitted||(na.ended=!0,C.nextTick(w,na,xa))}function w(xa,na){if(V("endReadableNT",xa.endEmitted,xa.length),!xa.endEmitted&&0===xa.length&&(xa.endEmitted=!0,na.readable=!1,na.emit("end"),xa.autoDestroy))xa=na._writableState,(!xa||xa.autoDestroy&&xa.finished)&&na.destroy()}function y(xa,na){for(var Aa=0,Pa=xa.length;Aa<Pa;Aa++)if(xa[Aa]===na)return Aa;return-1}if(ZW)return gM;
ZW=!0;var A,C=yh;gM=c;c.ReadableState=g;ap.EventEmitter;var D=xE,L=Ng.Buffer,I=C$.Uint8Array||function(){},S=Eg;var V=S&&S.debuglog?S.debuglog("stream"):function(){};var ba,ua,Fa,F=D$;S=$W;var Y=aX.getHighWaterMark,Q=bo.codes,W=Q.ERR_INVALID_ARG_TYPE,ka=Q.ERR_STREAM_PUSH_AFTER_EOF,ea=Q.ERR_METHOD_NOT_IMPLEMENTED,la=Q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Wg(c,D);var db=S.errorOrDestroy,ub=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==
this._readableState&&this._readableState.destroyed},set:function(xa){this._readableState&&(this._readableState.destroyed=xa)}});c.prototype.destroy=S.destroy;c.prototype._undestroy=S.undestroy;c.prototype._destroy=function(xa,na){na(xa)};c.prototype.push=function(xa,na){var Aa,Pa=this._readableState;return Pa.objectMode?Aa=!0:"string"==typeof xa&&((na=na||Pa.defaultEncoding)!==Pa.encoding&&(xa=L.from(xa,na),na=""),Aa=!0),h(this,xa,na,!1,Aa)};c.prototype.unshift=function(xa){return h(this,xa,null,
!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(xa){ba||(ba=Fw.StringDecoder);xa=new ba(xa);this._readableState.decoder=xa;this._readableState.encoding=this._readableState.decoder.encoding;for(var na=this._readableState.buffer.head,Aa="";null!==na;)Aa+=xa.write(na.data),na=na.next;return this._readableState.buffer.clear(),""!==Aa&&this._readableState.buffer.push(Aa),this._readableState.length=Aa.length,this};return c.prototype.read=
function(xa){V("read",xa);xa=parseInt(xa,10);var na=this._readableState,Aa=xa;if(0!==xa&&(na.emittedReadable=!1),0===xa&&na.needReadable&&((0!==na.highWaterMark?na.length>=na.highWaterMark:0<na.length)||na.ended))return V("read: emitReadable",na.length,na.ended),0===na.length&&na.ended?u(this):n(this),null;if(0===(xa=m(xa,na))&&na.ended)return 0===na.length&&u(this),null;var Pa,Da=na.needReadable;return V("need readable",Da),(0===na.length||na.length-xa<na.highWaterMark)&&V("length less than watermark",
Da=!0),na.ended||na.reading?V("reading or ended",!1):Da&&(V("do read"),na.reading=!0,na.sync=!0,0===na.length&&(na.needReadable=!0),this._read(na.highWaterMark),na.sync=!1,na.reading||(xa=m(Aa,na))),null===(Pa=0<xa?q(xa,na):null)?(na.needReadable=na.length<=na.highWaterMark,xa=0):(na.length-=xa,na.awaitDrain=0),0===na.length&&(na.ended||(na.needReadable=!0),Aa!==xa&&na.ended&&u(this)),null!==Pa&&this.emit("data",Pa),Pa},c.prototype._read=function(xa){db(this,new ea("_read()"))},c.prototype.pipe=function(xa,
na){function Aa(qa,ra){V("onunpipe");qa===ma&&ra&&!1===ra.hasUnpiped&&(ra.hasUnpiped=!0,V("cleanup"),xa.removeListener("close",U),xa.removeListener("finish",aa),xa.removeListener("drain",ib),xa.removeListener("error",M),xa.removeListener("unpipe",Aa),ma.removeListener("end",Pa),ma.removeListener("end",pa),ma.removeListener("data",Da),ca=!0,!La.awaitDrain||xa._writableState&&!xa._writableState.needDrain||ib())}function Pa(){V("onend");xa.end()}function Da(qa){V("ondata");qa=xa.write(qa);V("dest.write",
qa);!1===qa&&((1===La.pipesCount&&La.pipes===xa||1<La.pipesCount&&-1!==y(La.pipes,xa))&&!ca&&(V("false write response, pause",La.awaitDrain),La.awaitDrain++),ma.pause())}function M(qa){V("onerror",qa);pa();xa.removeListener("error",M);0===xa.listeners("error").length&&db(xa,qa)}function U(){xa.removeListener("finish",aa);pa()}function aa(){V("onfinish");xa.removeListener("close",U);pa()}function pa(){V("unpipe");ma.unpipe(xa)}var ma=this,La=this._readableState;switch(La.pipesCount){case 0:La.pipes=
xa;break;case 1:La.pipes=[La.pipes,xa];break;default:La.pipes.push(xa)}La.pipesCount+=1;V("pipe count=%d opts=%j",La.pipesCount,na);na=na&&!1===na.end||xa===C.stdout||xa===C.stderr?pa:Pa;La.endEmitted?C.nextTick(na):ma.once("end",na);xa.on("unpipe",Aa);var ib=function(qa){return function(){var ra=qa._readableState;V("pipeOnDrain",ra.awaitDrain);ra.awaitDrain&&ra.awaitDrain--;0===ra.awaitDrain&&qa.listeners("data").length&&(ra.flowing=!0,p(qa))}}(ma);xa.on("drain",ib);var ca=!1;return ma.on("data",
Da),function(qa,ra,Va){if("function"==typeof qa.prependListener)return qa.prependListener(ra,Va);qa._events&&qa._events[ra]?Array.isArray(qa._events[ra])?qa._events[ra].unshift(Va):qa._events[ra]=[Va,qa._events[ra]]:qa.on(ra,Va)}(xa,"error",M),xa.once("close",U),xa.once("finish",aa),xa.emit("pipe",ma),La.flowing||(V("pipe resume"),ma.resume()),xa},c.prototype.unpipe=function(xa){var na=this._readableState,Aa={hasUnpiped:!1};if(0===na.pipesCount)return this;if(1===na.pipesCount)return xa&&xa!==na.pipes||
(xa||(xa=na.pipes),na.pipes=null,na.pipesCount=0,na.flowing=!1,xa&&xa.emit("unpipe",this,Aa)),this;if(!xa){xa=na.pipes;Aa=na.pipesCount;na.pipes=null;na.pipesCount=0;na.flowing=!1;for(na=0;na<Aa;na++)xa[na].emit("unpipe",this,{hasUnpiped:!1});return this}var Pa=y(na.pipes,xa);return-1===Pa||(na.pipes.splice(Pa,1),--na.pipesCount,1===na.pipesCount&&(na.pipes=na.pipes[0]),xa.emit("unpipe",this,Aa)),this},c.prototype.on=function(xa,na){na=D.prototype.on.call(this,xa,na);var Aa=this._readableState;return"data"===
xa?(Aa.readableListening=0<this.listenerCount("readable"),!1!==Aa.flowing&&this.resume()):"readable"===xa&&(Aa.endEmitted||Aa.readableListening||(Aa.readableListening=Aa.needReadable=!0,Aa.flowing=!1,Aa.emittedReadable=!1,V("on readable",Aa.length,Aa.reading),Aa.length?n(this):Aa.reading||C.nextTick(e,this))),na},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(xa,na){na=D.prototype.removeListener.call(this,xa,na);return"readable"===xa&&C.nextTick(b,this),na},c.prototype.removeAllListeners=
function(xa){var na=D.prototype.removeAllListeners.apply(this,arguments);return"readable"!==xa&&void 0!==xa||C.nextTick(b,this),na},c.prototype.resume=function(){var xa=this._readableState;xa.flowing||(V("resume"),xa.flowing=!xa.readableListening,xa.resumeScheduled||(xa.resumeScheduled=!0,C.nextTick(l,this,xa)));return xa.paused=!1,this},c.prototype.pause=function(){return V("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(V("pause"),this._readableState.flowing=
!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(xa){var na=this,Aa=this._readableState,Pa=!1,Da;for(Da in xa.on("end",function(){if(V("wrapped end"),Aa.decoder&&!Aa.ended){var M=Aa.decoder.end();M&&M.length&&na.push(M)}na.push(null)}),xa.on("data",function(M){(V("wrapped data"),Aa.decoder&&(M=Aa.decoder.write(M)),Aa.objectMode&&null==M)||(Aa.objectMode||M&&M.length)&&(na.push(M)||(Pa=!0,xa.pause()))}),xa)void 0===this[Da]&&"function"==typeof xa[Da]&&(this[Da]=
function(M){return function(){return xa[M].apply(xa,arguments)}}(Da));for(Da=0;Da<ub.length;Da++)xa.on(ub[Da],this.emit.bind(this,ub[Da]));return this._read=function(M){V("wrapped _read",M);Pa&&(Pa=!1,xa.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===ua&&(ua=E$),ua(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",
{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(xa){this._readableState&&(this._readableState.flowing=xa)}}),c._fromList=q,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(xa,na){return void 0===Fa&&(Fa=SW),Fa(c,xa,na)}),
gM}function bX(){function g(Q){var W=this;this.entry=this.next=null;this.finish=function(){var ka=W.entry;for(W.entry=null;ka;){var ea=ka.callback;Q.pendingcb--;ea(void 0);ka=ka.next}Q.corkedRequestsFree.next=W;!0}}function c(){}function h(Q,W,ka){e=e||zE();Q=Q||{};"boolean"!=typeof ka&&(ka=W instanceof e);this.objectMode=!!Q.objectMode;ka&&(this.objectMode=this.objectMode||!!Q.writableObjectMode);this.highWaterMark=C(this,Q,"writableHighWaterMark",ka);this.destroyed=this.finished=this.ended=this.ending=
this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==Q.decodeStrings;this.defaultEncoding=Q.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(ea){!function(la,db){var ub=la._writableState,xa=ub.sync,na=ub.writecb;if("function"!=typeof na)throw new S;(function(Aa){Aa.writing=!1;Aa.writecb=null;Aa.length-=Aa.writelen;Aa.writelen=0}(ub),db)?!function(Aa,Pa,Da,M,U){--Pa.pendingcb;Da?(l.nextTick(U,M),l.nextTick(b,Aa,Pa),
Aa._writableState.errorEmitted=!0,Y(Aa,M)):(U(M),Aa._writableState.errorEmitted=!0,Y(Aa,M),b(Aa,Pa))}(la,ub,xa,db,na):((db=d(ub)||la.destroyed)||ub.corked||ub.bufferProcessing||!ub.bufferedRequest||a(la,ub),xa?l.nextTick(n,la,ub,db,na):n(la,ub,db,na))}(W,ea)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==Q.emitClose;this.autoDestroy=!!Q.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=
new g(this)}function f(Q){var W=this instanceof(e=e||zE());if(!W&&!y.call(f,this))return new f(Q);this._writableState=new h(Q,this,W);this.writable=!0;Q&&("function"==typeof Q.write&&(this._write=Q.write),"function"==typeof Q.writev&&(this._writev=Q.writev),"function"==typeof Q.destroy&&(this._destroy=Q.destroy),"function"==typeof Q.final&&(this._final=Q.final));q.call(this)}function m(Q,W,ka,ea,la,db,ub){W.writelen=ea;W.writecb=ub;W.writing=!0;W.sync=!0;W.destroyed?W.onwrite(new ba("write")):ka?
Q._writev(la,W.onwrite):Q._write(la,db,W.onwrite);W.sync=!1}function n(Q,W,ka,ea){ka||(0===W.length&&W.needDrain&&(W.needDrain=!1,Q.emit("drain")),!0);W.pendingcb--;ea();b(Q,W)}function a(Q,W){W.bufferProcessing=!0;var ka=W.bufferedRequest;if(Q._writev&&ka&&ka.next){var ea=Array(W.bufferedRequestCount),la=W.corkedRequestsFree;la.entry=ka;for(var db=0,ub=!0;ka;)ea[db]=ka,ka.isBuf||(ub=!1),ka=ka.next,db+=1;ea.allBuffers=ub;m(Q,W,!0,W.length,ea,"",la.finish);W.pendingcb++;W.lastBufferedRequest=null;
la.next?(W.corkedRequestsFree=la.next,la.next=null):W.corkedRequestsFree=new g(W);W.bufferedRequestCount=0}else{for(;ka&&(ea=ka.chunk,m(Q,W,!1,W.objectMode?1:ea.length,ea,ka.encoding,ka.callback),ka=ka.next,W.bufferedRequestCount--,!W.writing););null===ka&&(W.lastBufferedRequest=null)}W.bufferedRequest=ka;W.bufferProcessing=!1}function d(Q){return Q.ending&&0===Q.length&&null===Q.bufferedRequest&&!Q.finished&&!Q.writing}function k(Q,W){Q._final(function(ka){W.pendingcb--;ka&&Y(Q,ka);W.prefinished=
!0;Q.emit("prefinish");b(Q,W)})}function b(Q,W){var ka=d(W),ea;if(ea=ka)W.prefinished||W.finalCalled||("function"!=typeof Q._final||W.destroyed?(W.prefinished=!0,Q.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,l.nextTick(k,Q,W))),ea=(!0,0===W.pendingcb&&(W.finished=!0,Q.emit("finish"),W.autoDestroy));ea&&(W=Q._readableState,(!W||W.autoDestroy&&W.endEmitted)&&Q.destroy());return ka}if(cX)return hM;cX=!0;var e,l=yh;hM=f;f.WritableState=h;var p={deprecate:UW},q=xE,u=Ng.Buffer,w=F$.Uint8Array||function(){},
y,A=$W,C=aX.getHighWaterMark,D=bo.codes,L=D.ERR_INVALID_ARG_TYPE,I=D.ERR_METHOD_NOT_IMPLEMENTED,S=D.ERR_MULTIPLE_CALLBACK,V=D.ERR_STREAM_CANNOT_PIPE,ba=D.ERR_STREAM_DESTROYED,ua=D.ERR_STREAM_NULL_VALUES,Fa=D.ERR_STREAM_WRITE_AFTER_END,F=D.ERR_UNKNOWN_ENCODING,Y=A.errorOrDestroy;return Wg(f,q),h.prototype.getBuffer=function(){for(var Q=this.bufferedRequest,W=[];Q;)W.push(Q),Q=Q.next;return W},function(){try{Object.defineProperty(h.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},
"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Q){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(Q){return!!y.call(this,Q)||this===f&&Q&&Q._writableState instanceof h}})):y=function(Q){return Q instanceof this},f.prototype.pipe=function(){Y(this,new V)},f.prototype.write=function(Q,W,ka){var ea,
la=this._writableState,db=!1,ub=!la.objectMode&&(ea=Q,u.isBuffer(ea)||ea instanceof w);return ub&&!u.isBuffer(Q)&&(Q=u.from(Q)),"function"==typeof W&&(ka=W,W=null),ub?W="buffer":W||(W=la.defaultEncoding),"function"!=typeof ka&&(ka=c),la.ending?function(xa,na){var Aa=new Fa;Y(xa,Aa);l.nextTick(na,Aa)}(this,ka):(ub||function(xa,na,Aa,Pa){var Da;return null===Aa?Da=new ua:"string"==typeof Aa||na.objectMode||(Da=new L("chunk",["string","Buffer"],Aa)),!Da||(Y(xa,Da),l.nextTick(Pa,Da),!1)}(this,la,Q,ka))&&
(la.pendingcb++,db=function(xa,na,Aa,Pa,Da,M){if(!Aa){var U=Pa;na.objectMode||!1===na.decodeStrings||"string"!=typeof U||(U=u.from(U,Da));Pa!==U&&(Aa=!0,Da="buffer",Pa=U)}var aa=na.objectMode?1:Pa.length;na.length+=aa;(U=na.length<na.highWaterMark)||(na.needDrain=!0);na.writing||na.corked?(xa=na.lastBufferedRequest,na.lastBufferedRequest={chunk:Pa,encoding:Da,isBuf:Aa,callback:M,next:null},xa?xa.next=na.lastBufferedRequest:na.bufferedRequest=na.lastBufferedRequest,na.bufferedRequestCount+=1):m(xa,
na,!1,aa,Pa,Da,M);return U}(this,la,ub,Q,W,ka)),db},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var Q=this._writableState;Q.corked&&(Q.corked--,Q.writing||Q.corked||Q.bufferProcessing||!Q.bufferedRequest||a(this,Q))},f.prototype.setDefaultEncoding=function(Q){if("string"==typeof Q&&(Q=Q.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((Q+"").toLowerCase())))throw new F(Q);return this._writableState.defaultEncoding=
Q,this},Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(Q,W,ka){ka(new I("_write()"))},f.prototype._writev=null,f.prototype.end=function(Q,W,ka){var ea=this._writableState;"function"==typeof Q?(ka=Q,Q=null,W=null):"function"==typeof W&&(ka=W,W=null);
null!=Q&&this.write(Q,W);ea.corked&&(ea.corked=1,this.uncork());ea.ending||(Q=ka,ea.ending=!0,b(this,ea),Q&&(ea.finished?l.nextTick(Q):this.once("finish",Q)),ea.ended=!0,this.writable=!1);return this},Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Q){this._writableState&&(this._writableState.destroyed=
Q)}}),f.prototype.destroy=A.destroy,f.prototype._undestroy=A.undestroy,f.prototype._destroy=function(Q,W){W(Q)},hM}function zE(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if(dX)return iM;dX=!0;var f=yh,m=Object.keys||
function(b){var e=[],l;for(l in b)e.push(l);return e};iM=g;var n=B$(),a=bX();Wg(g,n);m=m(a.prototype);for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),iM}function G$(g,c){var h=this._transformState;h.transforming=!1;var f=
h.writecb;if(null===f)return this.emit("error",new H$);h.writechunk=null;h.writecb=null;null!=c&&this.push(c);f(g);g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function bp(g){if(!(this instanceof bp))return new bp(g);AE.call(this,g);this._transformState={afterTransform:G$.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"==
typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush));this.on("prefinish",I$)}function I$(){var g=this;"function"!=typeof this._flush||this._readableState.destroyed?eX(this,null,null):this._flush(function(c,h){eX(g,c,h)})}function eX(g,c,h){if(c)return g.emit("error",c);if(null!=h&&g.push(h),g._writableState.length)throw new J$;if(g._transformState.transforming)throw new K$;return g.push(null)}function zz(g){if(!(this instanceof zz))return new zz(g);
fX.call(this,g)}function gX(g){if(g)throw g;}function L$(g,c,h,f){f=function(a){var d=!1;return function(){d||(d=!0,a.apply(void 0,arguments))}}(f);var m=!1;g.on("close",function(){m=!0});void 0===jM&&(jM=kM);jM(g,{readable:c,writable:h},function(a){if(a)return f(a);m=!0;f()});var n=!1;return function(a){if(!m&&!n)return n=!0,g.setHeader&&"function"==typeof g.abort?g.abort():"function"==typeof g.destroy?g.destroy():(f(a||new M$("pipe")),void 0)}}function hX(g){g()}function N$(g,c){return g.pipe(c)}
function dn(){lM.call(this||mM)}function BE(){}function kq(g){iX.call(this);this._block=CE.allocUnsafe(g);this._blockSize=g;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=!1}function Gw(){jX.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function DE(g,c){return g<<c|g>>>32-c}function nl(g,c,h,f,m,n,a){return DE(g+(c&h|~c&f)+m+n|0,a)+c|0}function ol(g,c,h,f,m,n,a){return DE(g+(c&f|h&~f)+m+n|0,a)+c|0}function pl(g,c,h,f,m,n,a){return DE(g+(c^h^f)+
m+n|0,a)+c|0}function ql(g,c,h,f,m,n,a){return DE(g+(h^(c|~f))+m+n|0,a)+c|0}function Hw(){kX.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}function en(g,c){return g<<c|g>>>32-c}function lq(g,c){(this||aj)._block=lX.alloc(g);(this||aj)._finalSize=c;(this||aj)._blockSize=g;(this||aj)._len=0}function Iw(){this.init();(this||Og)._w=O$;mX.call(this||Og,64,56)}function Az(){this.init();(this||Bi)._w=P$;nX.call(this||Bi,64,56)}function Bz(){this.init();
(this||Ci)._w=Q$;oX.call(this||Ci,64,56)}function EE(){this.init();(this||Dk)._w=R$;S$.call(this||Dk,64,56)}function Jw(){this.init();(this||re)._w=T$;pX.call(this||re,128,112)}function Ek(g,c){return g>>>0<c>>>0?1:0}function FE(){this.init();(this||ki)._w=U$;V$.call(this||ki,128,112)}function Fk(g){qX.call(this||uj);(this||uj).hashMode="string"==typeof g;(this||uj).hashMode?(this||uj)[g]=(this||uj)._finalOrDigest:(this||uj).final=(this||uj)._finalOrDigest;(this||uj)._final&&((this||uj).__final=(this||
uj)._final,(this||uj)._final=null);(this||uj)._decoder=null;(this||uj)._encoding=null}function GE(g){rX.call(this,"digest");this._hash=g}function HE(g,c){sX.call(this,"digest");"string"==typeof c&&(c=Vt.from(c));this._alg=g;this._key=c;64<c.length?c=g(c):64>c.length&&(c=Vt.concat([c,W$],64));g=this._ipad=Vt.allocUnsafe(64);for(var h=this._opad=Vt.allocUnsafe(64),f=0;64>f;f++)g[f]=54^c[f],h[f]=92^c[f];this._hash=[g]}function Cz(g,c){tX.call(this,"digest");"string"==typeof c&&(c=Dz.from(c));var h="sha512"===
g||"sha384"===g?128:64;(this._alg=g,this._key=c,c.length>h)?c=("rmd160"===g?new nM:oM(g)).update(c).digest():c.length<h&&(c=Dz.concat([c,X$],h));for(var f=this._ipad=Dz.allocUnsafe(h),m=this._opad=Dz.allocUnsafe(h),n=0;n<h;n++)f[n]=54^c[n],m[n]=92^c[n];this._hash="rmd160"===g?new nM:oM(g);this._hash.update(f)}function uX(g,c){if("string"!=typeof g&&!Y$.isBuffer(g))throw new TypeError(c+" must be a buffer or string");}function vX(g,c,h){var f=function(k){function b(e){return Z$(k).update(e).digest()}
return"rmd160"===k||"ripemd160"===k?function(e){return(new $$).update(e).digest()}:"md5"===k?aaa:b}(g),m="sha512"===g||"sha384"===g?128:64;c.length>m?c=f(c):c.length<m&&(c=co.concat([c,baa],m));for(var n=co.allocUnsafe(m+IE[g]),a=co.allocUnsafe(m+IE[g]),d=0;d<m;d++)n[d]=54^c[d],a[d]=92^c[d];c=co.allocUnsafe(m+h+4);n.copy(c,0,0,m);(this||eo).ipad1=c;(this||eo).ipad2=n;(this||eo).opad=a;(this||eo).alg=g;(this||eo).blocksize=m;(this||eo).hash=f;(this||eo).size=IE[g]}function wX(g,c,h,f,m){return Ez.importKey("raw",
g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return Ez.deriveBits({name:"PBKDF2",salt:c,iterations:h,hash:{name:m}},n,f<<3)}).then(function(n){return Kw.from(n)})}function xX(g,c){if(!g)throw Error(c||"Assertion failed");}function Am(g){this.options=g;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function caa(){this.tmp=Array(2);this.keys=null}function fn(g){yX.call(this,g);var c=new caa;this._desState=c;this.deriveKeys(c,g.key)}
function daa(g){eaa.equal(g.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=g[c]}function faa(g,c){gaa.equal(c.length,24,"Invalid key length");var h=c.slice(0,8),f=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===g?[Fr.create({type:"encrypt",key:h}),Fr.create({type:"decrypt",key:f}),Fr.create({type:"encrypt",key:c})]:[Fr.create({type:"decrypt",key:c}),Fr.create({type:"encrypt",key:f}),Fr.create({type:"decrypt",key:h})]}function cp(g){zX.call(this,
g);this._edeState=new faa(this.type,this.options.key)}function JE(g){AX.call(this||KE);var c=g.mode.toLowerCase(),h=Fz[c];var f=g.decrypt?"decrypt":"encrypt";var m=g.key;Wt.isBuffer(m)||(m=Wt.from(m));"des-ede"!==c&&"des-ede-cbc"!==c||(m=Wt.concat([m,m.slice(0,8)]));g=g.iv;Wt.isBuffer(g)||(g=Wt.from(g));(this||KE)._des=h.create({key:m,iv:g,type:f})}function BX(g,c,h){var f=c.length,m=haa(c,g._cache);return g._cache=g._cache.slice(f),g._prev=Gz.concat([g._prev,h?c:m]),m}function iaa(g){return g._prev=
g._cipher.encryptBlock(g._prev),g._prev}function pM(g){LE.isBuffer(g)||(g=LE.from(g));for(var c=g.length/4|0,h=Array(c),f=0;f<c;f++)h[f]=g.readUInt32BE(4*f);return h}function qM(g){for(;0<g.length;g++)g[0]=0}function CX(g,c,h,f,m){var n=h[0],a=h[1],d=h[2];h=h[3];var k=g[0]^c[0],b=g[1]^c[1],e=g[2]^c[2];g=g[3]^c[3];for(var l=4,p=1;p<m;p++){var q=n[k>>>24]^a[b>>>16&255]^d[e>>>8&255]^h[255&g]^c[l++];var u=n[b>>>24]^a[e>>>16&255]^d[g>>>8&255]^h[255&k]^c[l++];var w=n[e>>>24]^a[g>>>16&255]^d[k>>>8&255]^
h[255&b]^c[l++];var y=n[g>>>24]^a[k>>>16&255]^d[b>>>8&255]^h[255&e]^c[l++];k=q;b=u;e=w;g=y}return q=(f[k>>>24]<<24|f[b>>>16&255]<<16|f[e>>>8&255]<<8|f[255&g])^c[l++],u=(f[b>>>24]<<24|f[e>>>16&255]<<16|f[g>>>8&255]<<8|f[255&k])^c[l++],w=(f[e>>>24]<<24|f[g>>>16&255]<<16|f[k>>>8&255]<<8|f[255&b])^c[l++],y=(f[g>>>24]<<24|f[k>>>16&255]<<16|f[b>>>8&255]<<8|f[255&e])^c[l++],[q>>>0,u>>>0,w>>>0,y>>>0]}function gn(g){(this||hn)._key=pM(g);this._reset()}function DX(g){var c=Lw.allocUnsafe(16);return c.writeUInt32BE(g[0]>>>
0,0),c.writeUInt32BE(g[1]>>>0,4),c.writeUInt32BE(g[2]>>>0,8),c.writeUInt32BE(g[3]>>>0,12),c}function Hz(g){(this||bl).h=g;(this||bl).state=Lw.alloc(16,0);(this||bl).cache=Lw.allocUnsafe(0)}function Gr(g,c,h,f){EX.call(this||Fg);var m=dm.alloc(4,0);(this||Fg)._cipher=new jaa.AES(c);var n=(this||Fg)._cipher.encryptBlock(m);(this||Fg)._ghash=new FX(n);c=this||Fg;m=h;if(12===m.length)c=(c._finID=dm.concat([m,dm.from([0,0,0,1])]),dm.concat([m,dm.from([0,0,0,2])]));else{h=new FX(n);n=m.length;var a=n%16;
h.update(m);a&&(a=16-a,h.update(dm.alloc(a,0)));h.update(dm.alloc(8,0));m=8*n;n=dm.alloc(8);n.writeUIntBE(m,0,8);h.update(n);c._finID=h.state;c=dm.from(c._finID);c=(kaa(c),c)}(this||Fg)._prev=dm.from(c);(this||Fg)._cache=dm.allocUnsafe(0);(this||Fg)._secCache=dm.allocUnsafe(0);(this||Fg)._decrypt=f;(this||Fg)._alen=0;(this||Fg)._len=0;(this||Fg)._mode=g;(this||Fg)._authTag=null;(this||Fg)._called=!1}function Iz(g,c,h,f){GX.call(this||fo);(this||fo)._cipher=new laa.AES(c);(this||fo)._prev=rM.from(h);
(this||fo)._cache=rM.allocUnsafe(0);(this||fo)._secCache=rM.allocUnsafe(0);(this||fo)._decrypt=f;(this||fo)._mode=g}function Jz(g,c,h){HX.call(this||li);(this||li)._cache=new ME;(this||li)._last=void 0;(this||li)._cipher=new maa.AES(c);(this||li)._prev=Mw.from(h);(this||li)._mode=g;(this||li)._autopadding=!0}function ME(){(this||li).cache=Mw.allocUnsafe(0)}function IX(g,c,h){g=JX[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=Mw.from(h)),"GCM"!==g.mode&&
h.length!==g.iv)throw new TypeError("invalid iv length "+h.length);if("string"==typeof c&&(c=Mw.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);return"stream"===g.type?new naa(g.module,c,h,!0):"auth"===g.type?new oaa(g.module,c,h,!0):new Jz(g.module,c,h)}function Kz(g,c,h){KX.call(this||Ni);(this||Ni)._cache=new NE;(this||Ni)._cipher=new paa.AES(c);(this||Ni)._prev=mq.from(h);(this||Ni)._mode=g;(this||Ni)._autopadding=!0}function NE(){(this||Ni).cache=mq.allocUnsafe(0)}
function LX(g,c,h){g=MX[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof c&&(c=mq.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+c.length);if("string"==typeof h&&(h=mq.from(h)),"GCM"!==g.mode&&h.length!==g.iv)throw new TypeError("invalid iv length "+h.length);return"stream"===g.type?new qaa(g.module,c,h):"auth"===g.type?new raa(g.module,c,h):new Kz(g.module,c,h)}function sM(g,c,h){if(g=g.toLowerCase(),Hr[g])return tM.createCipheriv(g,c,h);
if(nq[g])return new NX({key:c,iv:h,mode:g});throw new TypeError("invalid suite type");}function uM(g,c,h){if(g=g.toLowerCase(),Hr[g])return tM.createDecipheriv(g,c,h);if(nq[g])return new NX({key:c,iv:h,mode:g,decrypt:!0});throw new TypeError("invalid suite type");}function Ir(g){(this||OE).rand=g}function Jr(g){(this||OX).rand=g||new saa.Rand}function vM(g){if(null!==wM)var c=wM;else{c=[2];for(var h=1,f=3;1048576>f;f+=2){for(var m=Math.ceil(Math.sqrt(f)),n=0;n<h&&c[n]<=m&&0!=f%c[n];n++);h!==n&&c[n]<=
m||(c[h++]=f)}c=(wM=c,c)}for(h=0;h<c.length;h++)if(0===g.modn(c[h]))return 0===g.cmpn(c[h]);return!0}function xM(g){var c=rl.mont(g);return 0===yM.toRed(c).redPow(g.subn(1)).fromRed().cmpn(1)}function Lz(g,c){if(16>g)return new rl(2===c||5===c?[140,123]:[140,39]);var h,f;for(c=new rl(c);;){for(h=new rl(taa(Math.ceil(g/8)));h.bitLength()>g;)h.ishrn(1);if(h.isEven()&&h.iadd(uaa),h.testn(1)||h.iadd(yM),c.cmp(yM)){if(!c.cmp(vaa))for(;h.mod(waa).cmp(xaa);)h.iadd(PX)}else for(;h.mod(yaa).cmp(zaa);)h.iadd(PX);
if(vM(f=h.shrn(1))&&vM(h)&&xM(f)&&xM(h)&&QX.test(f)&&QX.test(h))return h}}function Aaa(g,c){return c=c||"utf8",dp.isBuffer(g)||(g=new dp(g,c)),(this||Rh)._pub=new jn(g),this||Rh}function Baa(g,c){return c=c||"utf8",dp.isBuffer(g)||(g=new dp(g,c)),(this||Rh)._priv=new jn(g),this||Rh}function go(g,c,h){this.setGenerator(c);(this||Rh).__prime=new jn(g);(this||Rh)._prime=jn.mont((this||Rh).__prime);(this||Rh)._primeLen=g.length;(this||Rh)._pub=void 0;(this||Rh)._priv=void 0;(this||Rh)._primeCode=void 0;
h?((this||Rh).setPublicKey=Aaa,(this||Rh).setPrivateKey=Baa):(this||Rh)._primeCode=8}function PE(g,c){g=new dp(g.toArray());return c?g.toString(c):g}function QE(g,c){var h=RX(c);var f=h.toRed(Kr.mont(c.modulus)).redPow(new Kr(c.publicExponent)).fromRed();h=h.invm(c.modulus);var m=c.modulus.byteLength();g=(Kr.mont(c.modulus),(new Kr(g)).mul(f).umod(c.modulus));var n=g.toRed(Kr.mont(c.prime1)),a=g.toRed(Kr.mont(c.prime2));f=c.coefficient;var d=c.prime1;g=c.prime2;n=n.redPow(c.exponent1);a=a.redPow(c.exponent2);
n=n.fromRed();a=a.fromRed();f=n.isub(a).imul(f).umod(d);return f.imul(g),a.iadd(f),new Caa(a.imul(h).umod(c.modulus).toArray(!1,m))}function RX(g){for(var c=g.modulus.byteLength(),h=new Kr(SX(c));0<=h.cmp(g.modulus)||!h.umod(g.prime1)||!h.umod(g.prime2);)h=new Kr(SX(c));return h}function TX(g){return 1===g.length?"0"+g:g}function UX(g){for(var c="",h=0;h<g.length;h++)c+=TX(g[h].toString(16));return c}function Xt(g,c){if(g instanceof Xt)return g;this._importDER(g,c)||(Daa(g.r&&g.s,"Signature without r or s"),
this.r=new RE(g.r,16),this.s=new RE(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}function Eaa(){this.place=0}function zM(g,c){var h=g[c.place++];if(!(128&h))return h;h&=15;for(var f=0,m=0,n=c.place;m<h;m++,n++)f<<=8,f|=g[n];return c.place=n,f}function VX(g){for(var c=0,h=g.length-1;!(g[c]||128&g[c+1])&&c<h;)c++;return 0===c?g:g.slice(c)}function AM(g,c){if(128>c)return g.push(c),void 0;var h=1+(Math.log(c)/Math.LN2>>>3);for(g.push(128|h);--h;)g.push(c>>>
(h<<3)&255);g.push(c)}function WX(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function XX(g){return 1===g.length?"0"+g:g}function YX(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}function SE(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=
this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function kn(){if(!(this instanceof kn))return new kn;ZX.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=Faa;this.W=Array(160)}function ho(){if(!(this instanceof ho))return new ho;$X.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,
1359893119,2600822924,528734635,1541459225];this.k=Gaa;this.W=Array(64)}function ep(){if(!(this instanceof ep))return new ep;aY.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function oq(){if(!(this instanceof oq))return new oq;bY.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function pq(){if(!(this instanceof pq))return new pq;cY.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,
812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function fp(){if(!(this instanceof fp))return new fp;dY.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}function eY(g,c,h,f){return 15>=g?c^h^f:31>=g?c&h|~c&f:47>=g?(c|~h)^f:63>=g?c&f|h&~f:c^(h|~f)}function Nw(g,c,h){if(!(this instanceof Nw))return new Nw(g,c,h);this.Hash=g;this.blockSize=g.blockSize/8;this.outSize=g.outSize/8;this.outer=
this.inner=null;this._init(Haa.toArray(c,h))}function qq(g){if(!(this instanceof qq))return new qq(g);this.hash=g.hash;this.predResist=!!g.predResist;this.outLen=this.hash.outSize;this.minEntropy=g.minEntropy||this.hash.hmacStrength;this.V=this.K=this.reseedInterval=this._reseed=null;var c=Yt.toArray(g.entropy,g.entropyEnc||"hex"),h=Yt.toArray(g.nonce,g.nonceEnc||"hex");g=Yt.toArray(g.pers,g.persEnc||"hex");fY(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");
this._init(c,h,g)}function io(g,c){this.type=g;this.p=new Zt(c.p,16);this.red=c.prime?Zt.red(c.prime):Zt.mont(this.p);this.zero=(new Zt(0)).toRed(this.red);this.one=(new Zt(1)).toRed(this.red);this.two=(new Zt(2)).toRed(this.red);this.n=c.n&&new Zt(c.n,16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;g=this.n&&this.p.div(this.n);!g||0<g.cmpn(100)?this.redN=null:(this._maxwellTrick=
!0,this.redN=this.n.toRed(this.red))}function ln(g,c){this.curve=g;this.type=c;this.precomputed=null}function mn(g){Ow.call(this,"short",g);this.a=(new vj(g.a,16)).toRed(this.red);this.b=(new vj(g.b,16)).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(g);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function Gk(g,c,h,f){Ow.BasePoint.call(this,g,"affine");null===c&&null===
h?(this.x=null,this.y=null,this.inf=!0):(this.x=new vj(c,16),this.y=new vj(h,16),f&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function cl(g,c,h,f){Ow.BasePoint.call(this,g,"jacobian");null===c&&null===h&&null===f?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vj(0)):(this.x=new vj(c,16),this.y=new vj(h,16),this.z=new vj(f,16));this.x.red||(this.x=this.x.toRed(this.curve.red));
this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function Pw(g){TE.call(this,"mont",g);this.a=(new Qw(g.a,16)).toRed(this.red);this.b=(new Qw(g.b,16)).toRed(this.red);this.i4=(new Qw(4)).toRed(this.red).redInvm();this.two=(new Qw(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Hk(g,c,h){TE.BasePoint.call(this,g,"projective");null===c&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):
(this.x=new Qw(c,16),this.z=new Qw(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function gp(g){this.extended=this.mOneA=(this.twisted=1!=(0|g.a))&&-1==(0|g.a);UE.call(this,"edwards",g);this.a=(new rq(g.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new rq(g.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new rq(g.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);Iaa(!this.twisted||0===this.c.fromRed().cmpn(1));
this.oneC=1==(0|g.c)}function Ti(g,c,h,f,m){UE.BasePoint.call(this,g,"projective");null===c&&null===h&&null===f?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new rq(c,16),this.y=new rq(h,16),this.z=f?new rq(f,16):this.curve.one,this.t=m&&new rq(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),
this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function gY(g){"short"===g.type?this.curve=new BM.short(g):"edwards"===g.type?this.curve=new BM.edwards(g):this.curve=new BM.mont(g);this.g=this.curve.g;this.n=this.curve.n;this.hash=g.hash;hY(this.g.validate(),"Invalid curve");hY(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function Lr(g,c){Object.defineProperty(CM,g,{configurable:!0,enumerable:!0,
get:function(){var h=new gY(c);return Object.defineProperty(CM,g,{configurable:!0,enumerable:!0,value:h}),h}})}function Ik(g,c){this.ec=g;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);c.pub&&this._importPublic(c.pub,c.pubEnc)}function nn(g){if(!(this instanceof nn))return new nn(g);"string"==typeof g&&(iY(DM.hasOwnProperty(g),"Unknown curve "+g),g=DM[g]);g instanceof DM.PresetCurve&&(g={curve:g});this.curve=g.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;
this.g=g.curve.g;this.g.precompute(g.curve.n.bitLength()+1);this.hash=g.hash||g.curve.hash}function gk(g,c){this.eddsa=g;this._secret=jY(c.secret);g.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=jY(c.pub)}function Mr(g,c){this.eddsa=g;"object"!=typeof c&&(c=Jaa(c));Array.isArray(c)&&(c={R:c.slice(0,g.encodingLength),S:c.slice(g.encodingLength)});Kaa(c.R&&c.S,"Signature without R or S");g.isPoint(c.R)&&(this._R=c.R);c.S instanceof Laa&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;
this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function em(g){if(Maa("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof em))return new em(g);this.curve=g=Naa[g].curve;this.g=g.g;this.g.precompute(g.n.bitLength()+1);this.pointClass=g.point().constructor;this.encodingLength=Math.ceil(g.n.bitLength()/8);this.hash=Oaa.sha512}function on(g){(this||hk)._reporterState={obj:null,path:[],options:g||{},errors:[]}}function Rw(g,c){(this||hk).path=g;this.rethrow(c)}function kY(){function g(n,
a){if(f.call(this||og,a),!m.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||og).base=n;(this||og).offset=0;(this||og).length=n.length}function c(n,a){if(Array.isArray(n))(this||og).length=0,(this||og).value=n.map(function(d){return d instanceof c||(d=new c(d,a)),(this||og).length+=d.length,d},this||og);else if("number"==typeof n){if(!(0<=n&&255>=n))return a.error("non-byte EncoderBuffer value");(this||og).value=n;(this||og).length=1}else if("string"==typeof n)(this||og).value=n,(this||
og).length=m.byteLength(n);else{if(!m.isBuffer(n))return a.error("Unsupported type: "+typeof n);(this||og).value=n;(this||og).length=n.length}}if(lY)return VE;lY=!0;var h=Wg,f=Mz().Reporter,m=Ng.Buffer;return h(g,f),VE.DecoderBuffer=g,g.prototype.save=function(){return{offset:(this||og).offset,reporter:f.prototype.save.call(this||og)}},g.prototype.restore=function(n){var a=new g((this||og).base);return a.offset=n.offset,a.length=(this||og).offset,(this||og).offset=n.offset,f.prototype.restore.call(this||
og,n.reporter),a},g.prototype.isEmpty=function(){return(this||og).offset===(this||og).length},g.prototype.readUInt8=function(n){return(this||og).offset+1<=(this||og).length?(this||og).base.readUInt8((this||og).offset++,!0):this.error(n||"DecoderBuffer overrun")},g.prototype.skip=function(n,a){if(!((this||og).offset+n<=(this||og).length))return this.error(a||"DecoderBuffer overrun");a=new g((this||og).base);return a._reporterState=(this||og)._reporterState,a.offset=(this||og).offset,a.length=(this||
og).offset+n,(this||og).offset+=n,a},g.prototype.raw=function(n){return(this||og).base.slice(n?n.offset:(this||og).offset,(this||og).length)},VE.EncoderBuffer=c,c.prototype.join=function(n,a){return n||(n=new m((this||og).length)),a||(a=0),0===(this||og).length||(Array.isArray((this||og).value)?(this||og).value.forEach(function(d){d.join(n,a);a+=d.length}):("number"==typeof(this||og).value?n[a]=(this||og).value:"string"==typeof(this||og).value?n.write((this||og).value,a):m.isBuffer((this||og).value)&&
(this||og).value.copy(n,a),a+=(this||og).length)),n},VE}function Mz(){if(mY)return EM;mY=!0;var g=EM;return g.Reporter=nY.Reporter,g.DecoderBuffer=kY().DecoderBuffer,g.EncoderBuffer=kY().EncoderBuffer,g.Node=function(){function c(b,e){var l={};(this||Lf)._baseState=l;l.enc=b;l.parent=e||null;l.children=null;l.tag=null;l.args=null;l.reverseArgs=null;l.choice=null;l.optional=!1;l.any=!1;l.obj=!1;l.use=null;l.useDecoder=null;l.key=null;l.default=null;l.explicit=null;l.implicit=null;l.contains=null;l.parent||
(l.children=[],this._wrap())}if(oY)return FM;oY=!0;var h=Mz().Reporter,f=Mz().EncoderBuffer,m=Mz().DecoderBuffer,n=pn,a="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),d="key obj use optional explicit implicit def choice any contains".split(" ").concat(a);FM=c;var k="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");
return c.prototype.clone=function(){var b=(this||Lf)._baseState,e={};k.forEach(function(p){e[p]=b[p]});var l=new (this||Lf).constructor(e.parent);return l._baseState=e,l},c.prototype._wrap=function(){var b=(this||Lf)._baseState;d.forEach(function(e){(this||Lf)[e]=function(){var l=new (this||Lf).constructor(this||Lf);return b.children.push(l),l[e].apply(l,arguments)}},this||Lf)},c.prototype._init=function(b){var e=(this||Lf)._baseState;n(null===e.parent);b.call(this||Lf);e.children=e.children.filter(function(l){return l._baseState.parent===
(this||Lf)},this||Lf);n.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(b){var e=(this||Lf)._baseState,l=b.filter(function(p){return p instanceof(this||Lf).constructor},this||Lf);b=b.filter(function(p){return!(p instanceof(this||Lf).constructor)},this||Lf);0!==l.length&&(n(null===e.children),e.children=l,l.forEach(function(p){p._baseState.parent=this||Lf},this||Lf));0!==b.length&&(n(null===e.args),e.args=b,e.reverseArgs=b.map(function(p){if("object"!=
typeof p||p.constructor!==Object)return p;var q={};return Object.keys(p).forEach(function(u){u==(0|u)&&(u|=0);q[p[u]]=u}),q}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(b){c.prototype[b]=function(){throw Error(b+" not implemented for encoding: "+(this||Lf)._baseState.enc);}}),a.forEach(function(b){c.prototype[b]=function(){var e=
(this||Lf)._baseState,l=Array.prototype.slice.call(arguments);return n(null===e.tag),e.tag=b,this._useArgs(l),this||Lf}}),c.prototype.use=function(b){n(b);var e=(this||Lf)._baseState;return n(null===e.use),e.use=b,this||Lf},c.prototype.optional=function(){return(this||Lf)._baseState.optional=!0,this||Lf},c.prototype.def=function(b){var e=(this||Lf)._baseState;return n(null===e.default),e.default=b,e.optional=!0,this||Lf},c.prototype.explicit=function(b){var e=(this||Lf)._baseState;return n(null===
e.explicit&&null===e.implicit),e.explicit=b,this||Lf},c.prototype.implicit=function(b){var e=(this||Lf)._baseState;return n(null===e.explicit&&null===e.implicit),e.implicit=b,this||Lf},c.prototype.obj=function(){var b=(this||Lf)._baseState,e=Array.prototype.slice.call(arguments);return b.obj=!0,0!==e.length&&this._useArgs(e),this||Lf},c.prototype.key=function(b){var e=(this||Lf)._baseState;return n(null===e.key),e.key=b,this||Lf},c.prototype.any=function(){return(this||Lf)._baseState.any=!0,this||
Lf},c.prototype.choice=function(b){var e=(this||Lf)._baseState;return n(null===e.choice),e.choice=b,this._useArgs(Object.keys(b).map(function(l){return b[l]})),this||Lf},c.prototype.contains=function(b){var e=(this||Lf)._baseState;return n(null===e.use),e.contains=b,this||Lf},c.prototype._decode=function(b,e){var l=(this||Lf)._baseState;if(null===l.parent)return b.wrapResult(l.children[0]._decode(b,e));var p,q=l.default,u=!0,w=null;if(null!==l.key&&(w=b.enterKey(l.key)),l.optional){var y=null;if(null!==
l.explicit?y=l.explicit:null!==l.implicit?y=l.implicit:null!==l.tag&&(y=l.tag),null!==y||l.any){if(u=this._peekTag(b,y,l.any),b.isError(u))return u}else{var A=b.save();try{null===l.choice?this._decodeGeneric(l.tag,b,e):this._decodeChoice(b,e),u=!0}catch(D){u=!1}b.restore(A)}}if(l.obj&&u&&(p=b.enterObject()),u){if(null!==l.explicit){y=this._decodeTag(b,l.explicit);if(b.isError(y))return y;b=y}y=b.offset;if(null===l.use&&null===l.choice){l.any&&(A=b.save());var C=this._decodeTag(b,null!==l.implicit?
l.implicit:l.tag,l.any);if(b.isError(C))return C;l.any?q=b.raw(A):b=C}if(e&&e.track&&null!==l.tag&&e.track(b.path(),y,b.length,"tagged"),e&&e.track&&null!==l.tag&&e.track(b.path(),b.offset,b.length,"content"),q=l.any?q:null===l.choice?this._decodeGeneric(l.tag,b,e):this._decodeChoice(b,e),b.isError(q))return q;(l.any||null!==l.choice||null===l.children||l.children.forEach(function(D){D._decode(b,e)}),!l.contains||"octstr"!==l.tag&&"bitstr"!==l.tag)||(q=new m(q),q=this._getUse(l.contains,b._reporterState.obj)._decode(q,
e))}return l.obj&&u&&(q=b.leaveObject(p)),null===l.key||null===q&&!0!==u?null!==w&&b.exitKey(w):b.leaveKey(w,l.key,q),q},c.prototype._decodeGeneric=function(b,e,l){var p=(this||Lf)._baseState;return"seq"===b||"set"===b?null:"seqof"===b||"setof"===b?this._decodeList(e,b,p.args[0],l):/str$/.test(b)?this._decodeStr(e,b,l):"objid"===b&&p.args?this._decodeObjid(e,p.args[0],p.args[1],l):"objid"===b?this._decodeObjid(e,null,null,l):"gentime"===b||"utctime"===b?this._decodeTime(e,b,l):"null_"===b?this._decodeNull(e,
l):"bool"===b?this._decodeBool(e,l):"objDesc"===b?this._decodeStr(e,b,l):"int"===b||"enum"===b?this._decodeInt(e,p.args&&p.args[0],l):null!==p.use?this._getUse(p.use,e._reporterState.obj)._decode(e,l):e.error("unknown tag: "+b)},c.prototype._getUse=function(b,e){var l=(this||Lf)._baseState;return l.useDecoder=this._use(b,e),n(null===l.useDecoder._baseState.parent),l.useDecoder=l.useDecoder._baseState.children[0],l.implicit!==l.useDecoder._baseState.implicit&&(l.useDecoder=l.useDecoder.clone(),l.useDecoder._baseState.implicit=
l.implicit),l.useDecoder},c.prototype._decodeChoice=function(b,e){var l=(this||Lf)._baseState,p=null,q=!1;return Object.keys(l.choice).some(function(u){var w=b.save(),y=l.choice[u];try{var A=y._decode(b,e);if(b.isError(A))return!1;p={type:u,value:A};q=!0}catch(C){return b.restore(w),!1}return!0},this||Lf),q?p:b.error("Choice not matched")},c.prototype._createEncoderBuffer=function(b){return new f(b,(this||Lf).reporter)},c.prototype._encode=function(b,e,l){var p=(this||Lf)._baseState;if(null===p.default||
p.default!==b)if(b=this._encodeValue(b,e,l),void 0!==b&&!this._skipDefault(b,e,l))return b},c.prototype._encodeValue=function(b,e,l){var p=(this||Lf)._baseState;if(null===p.parent)return p.children[0]._encode(b,e||new h);var q=null;if((this||Lf).reporter=e,p.optional&&void 0===b){if(null===p.default)return;b=p.default}var u=null,w=!1;if(p.any)q=this._createEncoderBuffer(b);else if(p.choice)q=this._encodeChoice(b,e);else if(p.contains)u=this._getUse(p.contains,l)._encode(b,e),w=!0;else if(p.children)u=
p.children.map(function(A){if("null_"===A._baseState.tag)return A._encode(null,e,b);if(null===A._baseState.key)return e.error("Child should have a key");var C=e.enterKey(A._baseState.key);if("object"!=typeof b)return e.error("Child expected, but input is not object");A=A._encode(b[A._baseState.key],e,b);return e.leaveKey(C),A},this||Lf).filter(function(A){return A}),u=this._createEncoderBuffer(u);else if("seqof"===p.tag||"setof"===p.tag){if(!p.args||1!==p.args.length)return e.error("Too many args for : "+
p.tag);if(!Array.isArray(b))return e.error("seqof/setof, but data is not Array");u=this.clone();u._baseState.implicit=null;u=this._createEncoderBuffer(b.map(function(A){return this._getUse((this||Lf)._baseState.args[0],b)._encode(A,e)},u))}else null!==p.use?q=this._getUse(p.use,l)._encode(b,e):(u=this._encodePrimitive(p.tag,b),w=!0);if(!p.any&&null===p.choice){l=null!==p.implicit?p.implicit:p.tag;var y=null===p.implicit?"universal":"context";null===l?null===p.use&&e.error("Tag could be omitted only for .use()"):
null===p.use&&(q=this._encodeComposite(l,w,y,u))}return null!==p.explicit&&(q=this._encodeComposite(p.explicit,!1,"context",q)),q},c.prototype._encodeChoice=function(b,e){var l=(this||Lf)._baseState,p=l.choice[b.type];return p||n(!1,b.type+" not found in "+JSON.stringify(Object.keys(l.choice))),p._encode(b.value,e)},c.prototype._encodePrimitive=function(b,e){var l=(this||Lf)._baseState;if(/str$/.test(b))return this._encodeStr(e,b);if("objid"===b&&l.args)return this._encodeObjid(e,l.reverseArgs[0],
l.args[1]);if("objid"===b)return this._encodeObjid(e,null,null);if("gentime"===b||"utctime"===b)return this._encodeTime(e,b);if("null_"===b)return this._encodeNull();if("int"===b||"enum"===b)return this._encodeInt(e,l.args&&l.reverseArgs[0]);if("bool"===b)return this._encodeBool(e);if("objDesc"===b)return this._encodeStr(e,b);throw Error("Unsupported tag: "+b);},c.prototype._isNumstr=function(b){return/^[0-9 ]*$/.test(b)},c.prototype._isPrintstr=function(b){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(b)},
FM}(),EM}function pY(){if(qY)return GM;qY=!0;var g=GM;return g._reverse=function(c){var h={};return Object.keys(c).forEach(function(f){(0|f)==f&&(f|=0);h[c[f]]=f}),h},g.der=function(){if(rY)return Nr;rY=!0;var c=pY();return Nr.tagClass={0:"universal",1:"application",2:"context",3:"private"},Nr.tagClassByName=c._reverse(Nr.tagClass),Nr.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",
17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},Nr.tagByName=c._reverse(Nr.tag),Nr}(),GM}function sY(){function g(b){(this||Or).enc="der";(this||Or).name=b.name;(this||Or).entity=b;(this||Or).tree=new c;(this||Or).tree._init(b.body)}function c(b){a.Node.call(this||Or,"der",b)}function h(b,e){var l=b.readUInt8(e);if(b.isError(l))return l;var p=k.tagClass[l>>6],q=0==(32&
l);if(31==(31&l)){var u=l;for(l=0;128==(128&u);){if(u=b.readUInt8(e),b.isError(u))return u;l<<=7;l|=127&u}}else l&=31;return{cls:p,primitive:q,tag:l,tagStr:k.tag[l]}}function f(b,e,l){var p=b.readUInt8(l);if(b.isError(p))return p;if(!e&&128===p)return null;if(0==(128&p))return p;e=127&p;if(4<e)return b.error("length octect is too long");for(var q=p=0;q<e;q++){p<<=8;var u=b.readUInt8(l);if(b.isError(u))return u;p|=u}return p}if(tY)return HM;tY=!0;var m=Wg,n=WE(),a=n.base,d=n.bignum,k=n.constants.der;
return HM=g,g.prototype.decode=function(b,e){return b instanceof a.DecoderBuffer||(b=new a.DecoderBuffer(b,e)),(this||Or).tree._decode(b,e)},m(c,a.Node),c.prototype._peekTag=function(b,e,l){if(b.isEmpty())return!1;var p=b.save(),q=h(b,'Failed to peek tag: "'+e+'"');return b.isError(q)?q:(b.restore(p),q.tag===e||q.tagStr===e||q.tagStr+"of"===e||l)},c.prototype._decodeTag=function(b,e,l){var p=h(b,'Failed to decode tag of "'+e+'"');if(b.isError(p))return p;var q=f(b,p.primitive,'Failed to get length of "'+
e+'"');if(b.isError(q))return q;if(!l&&p.tag!==e&&p.tagStr!==e&&p.tagStr+"of"!==e)return b.error('Failed to match tag: "'+e+'"');if(p.primitive||null!==q)return b.skip(q,'Failed to match body of: "'+e+'"');l=b.save();p=this._skipUntilEnd(b,'Failed to skip indefinite length body: "'+(this||Or).tag+'"');return b.isError(p)?p:(q=b.offset-l.offset,b.restore(l),b.skip(q,'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(b,e){for(;;){var l=h(b,e);if(b.isError(l))return l;var p,q=f(b,
l.primitive,e);if(b.isError(q))return q;if(p=l.primitive||null!==q?b.skip(q):this._skipUntilEnd(b,e),b.isError(p))return p;if("end"===l.tagStr)break}},c.prototype._decodeList=function(b,e,l,p){for(e=[];!b.isEmpty();){var q=this._peekTag(b,"end");if(b.isError(q))return q;var u=l.decode(b,"der",p);if(b.isError(u)&&q)break;e.push(u)}return e},c.prototype._decodeStr=function(b,e){if("bitstr"===e)return e=b.readUInt8(),b.isError(e)?e:{unused:e,data:b.raw()};if("bmpstr"===e){e=b.raw();if(1==e.length%2)return b.error("Decoding of string type: bmpstr length mismatch");
b="";for(var l=0;l<e.length/2;l++)b+=String.fromCharCode(e.readUInt16BE(2*l));return b}return"numstr"===e?(e=b.raw().toString("ascii"),this._isNumstr(e)?e:b.error("Decoding of string type: numstr unsupported characters")):"octstr"===e||"objDesc"===e?b.raw():"printstr"===e?(e=b.raw().toString("ascii"),this._isPrintstr(e)?e:b.error("Decoding of string type: printstr unsupported characters")):/str$/.test(e)?b.raw().toString():b.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=
function(b,e,l){for(var p=[],q=0;!b.isEmpty();){var u=b.readUInt8();q<<=7;q|=127&u;0==(128&u)&&(p.push(q),q=0)}128&u&&p.push(q);b=p[0]/40|0;q=p[0]%40;if(l=l?p:[b,q].concat(p.slice(1)),e)p=e[l.join(" ")],void 0===p&&(p=e[l.join(".")]),void 0!==p&&(l=p);return l},c.prototype._decodeTime=function(b,e){var l=b.raw().toString();if("gentime"===e){b=0|l.slice(0,4);e=0|l.slice(4,6);var p=0|l.slice(6,8),q=0|l.slice(8,10),u=0|l.slice(10,12);l=0|l.slice(12,14)}else{if("utctime"!==e)return b.error("Decoding "+
e+" time is not supported yet");b=0|l.slice(0,2);e=0|l.slice(2,4);p=0|l.slice(4,6);q=0|l.slice(6,8);u=0|l.slice(8,10);l=0|l.slice(10,12);b=70>b?2E3+b:1900+b}return Date.UTC(b,e-1,p,q,u,l,0)},c.prototype._decodeNull=function(b){return null},c.prototype._decodeBool=function(b){var e=b.readUInt8();return b.isError(e)?e:0!==e},c.prototype._decodeInt=function(b,e){b=b.raw();b=new d(b);return e&&(b=e[b.toString(10)]||b),b},c.prototype._use=function(b,e){return"function"==typeof b&&(b=b(e)),b._getDecoder("der").tree},
HM}function Paa(){if(uY)return IM;uY=!0;var g=IM;return g.der=sY(),g.pem=function(){function c(n){m.call(this||JM,n);(this||JM).enc="pem"}if(vY)return KM;vY=!0;var h=Wg,f=Ng.Buffer,m=sY();return h(c,m),KM=c,c.prototype.decode=function(n,a){n=n.toString().split(/[\r\n]+/g);for(var d=a.label.toUpperCase(),k=/^-----(BEGIN|END) ([^-]+)-----$/,b=-1,e=-1,l=0;l<n.length;l++){var p=n[l].match(k);if(null!==p&&p[2]===d){if(-1!==b){if("END"!==p[1])break;e=l;break}if("BEGIN"!==p[1])break;b=l}}if(-1===b||-1===
e)throw Error("PEM section not found for: "+d);n=n.slice(b+1,e).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new f(n,"base64");return m.prototype.decode.call(this||JM,n,a)},KM}(),IM}function wY(){function g(k){(this||ik).enc="der";(this||ik).name=k.name;(this||ik).entity=k;(this||ik).tree=new c;(this||ik).tree._init(k.body)}function c(k){a.Node.call(this||ik,"der",k)}function h(k){return 10>k?"0"+k:k}if(xY)return LM;xY=!0;var f=Wg,m=Ng.Buffer,n=WE(),a=n.base,d=n.constants.der;return LM=g,g.prototype.encode=
function(k,b){return(this||ik).tree._encode(k,b).join()},f(c,a.Node),c.prototype._encodeComposite=function(k,b,e,l){var p;a:{var q=k;k=(this||ik).reporter;"seqof"===q?q="seq":"setof"===q&&(q="set");if(d.tagByName.hasOwnProperty(q))q=d.tagByName[q];else if("number"!=typeof q||(0|q)!==q){e=k.error("Unknown tag: "+q);break a}31<=q?e=k.error("Multi-octet tag encoding unsupported"):(b||(q|=32),e=q|d.tagClassByName[e||"universal"]<<6)}if(128>l.length)return(p=new m(2))[0]=e,p[1]=l.length,this._createEncoderBuffer([p,
l]);k=1;for(b=l.length;256<=b;b>>=8)k++;(p=new m(2+k))[0]=e;p[1]=128|k;b=1+k;for(e=l.length;0<e;b--,e>>=8)p[b]=255&e;return this._createEncoderBuffer([p,l])},c.prototype._encodeStr=function(k,b){if("bitstr"===b)return this._createEncoderBuffer([0|k.unused,k.data]);if("bmpstr"===b){b=new m(2*k.length);for(var e=0;e<k.length;e++)b.writeUInt16BE(k.charCodeAt(e),2*e);return this._createEncoderBuffer(b)}return"numstr"===b?this._isNumstr(k)?this._createEncoderBuffer(k):(this||ik).reporter.error("Encoding of string type: numstr supports only digits and space"):
"printstr"===b?this._isPrintstr(k)?this._createEncoderBuffer(k):(this||ik).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(b)||"objDesc"===b?this._createEncoderBuffer(k):(this||ik).reporter.error("Encoding of string type: "+b+" unsupported")},c.prototype._encodeObjid=function(k,b,e){if("string"==typeof k){if(!b)return(this||
ik).reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(k))return(this||ik).reporter.error("objid not found in values map");k=b[k].split(/[\s\.]+/g);for(b=0;b<k.length;b++)k[b]|=0}else if(Array.isArray(k))for(k=k.slice(),b=0;b<k.length;b++)k[b]|=0;if(!Array.isArray(k))return(this||ik).reporter.error("objid() should be either array or string, got: "+JSON.stringify(k));if(!e){if(40<=k[1])return(this||ik).reporter.error("Second objid identifier OOB");k.splice(0,2,40*k[0]+
k[1])}var l=0;for(b=0;b<k.length;b++)for(e=k[b],l++;128<=e;e>>=7)l++;l=new m(l);var p=l.length-1;for(b=k.length-1;0<=b;b--)for(e=k[b],l[p--]=127&e;0<(e>>=7);)l[p--]=128|127&e;return this._createEncoderBuffer(l)},c.prototype._encodeTime=function(k,b){var e;k=new Date(k);return"gentime"===b?e=[h(k.getFullYear()),h(k.getUTCMonth()+1),h(k.getUTCDate()),h(k.getUTCHours()),h(k.getUTCMinutes()),h(k.getUTCSeconds()),"Z"].join(""):"utctime"===b?e=[h(k.getFullYear()%100),h(k.getUTCMonth()+1),h(k.getUTCDate()),
h(k.getUTCHours()),h(k.getUTCMinutes()),h(k.getUTCSeconds()),"Z"].join(""):(this||ik).reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(e,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(k,b){if("string"==typeof k){if(!b)return(this||ik).reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(k))return(this||ik).reporter.error("Values map doesn't contain: "+JSON.stringify(k));k=b[k]}"number"==
typeof k||m.isBuffer(k)||(b=k.toArray(),!k.sign&&128&b[0]&&b.unshift(0),k=new m(b));if(m.isBuffer(k)){var e=k.length;0===k.length&&e++;e=new m(e);return k.copy(e),0===k.length&&(e[0]=0),this._createEncoderBuffer(e)}if(128>k)return this._createEncoderBuffer(k);if(256>k)return this._createEncoderBuffer([0,k]);e=1;for(b=k;256<=b;b>>=8)e++;for(b=(e=Array(e)).length-1;0<=b;b--)e[b]=255&k,k>>=8;return 128&e[0]&&e.unshift(0),this._createEncoderBuffer(new m(e))},c.prototype._encodeBool=function(k){return this._createEncoderBuffer(k?
255:0)},c.prototype._use=function(k,b){return"function"==typeof k&&(k=k(b)),k._getEncoder("der").tree},c.prototype._skipDefault=function(k,b,e){var l=(this||ik)._baseState;if(null===l.default)return!1;k=k.join();if(void 0===l.defaultBuffer&&(l.defaultBuffer=this._encodeValue(l.default,b,e).join()),k.length!==l.defaultBuffer.length)return!1;for(b=0;b<k.length;b++)if(k[b]!==l.defaultBuffer[b])return!1;return!0},LM}function Qaa(){if(yY)return MM;yY=!0;var g=MM;return g.der=wY(),g.pem=function(){function c(m){f.call(this||
NM,m);(this||NM).enc="pem"}if(zY)return OM;zY=!0;var h=Wg,f=wY();return h(c,f),OM=c,c.prototype.encode=function(m,n){m=f.prototype.encode.call(this||NM,m).toString("base64");for(var a=["-----BEGIN "+n.label+"-----"],d=0;d<m.length;d+=64)a.push(m.slice(d,d+64));return a.push("-----END "+n.label+"-----"),a.join("\n")},OM}(),MM}function WE(){if(AY)return PM;AY=!0;var g=PM;return g.bignum=Oj,g.define=function(){function c(m,n){(this||Bm).name=m;(this||Bm).body=n;(this||Bm).decoders={};(this||Bm).encoders=
{}}if(BY)return QM;BY=!0;var h=WE(),f=Wg;return QM.define=function(m,n){return new c(m,n)},c.prototype._createNamed=function(m){try{var n=$t.runInThisContext("(function "+(this||Bm).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(a){n=function(d){this._initNamed(d)}}return f(n,m),n.prototype._initNamed=function(a){m.call(this||Bm,a)},new n(this||Bm)},c.prototype._getDecoder=function(m){return m=m||"der",(this||Bm).decoders.hasOwnProperty(m)||((this||Bm).decoders[m]=this._createNamed(h.decoders[m])),
(this||Bm).decoders[m]},c.prototype.decode=function(m,n,a){return this._getDecoder(n).decode(m,a)},c.prototype._getEncoder=function(m){return m=m||"der",(this||Bm).encoders.hasOwnProperty(m)||((this||Bm).encoders[m]=this._createNamed(h.encoders[m])),(this||Bm).encoders[m]},c.prototype.encode=function(m,n,a){return this._getEncoder(n).encode(m,a)},QM}().define,g.base=Mz(),g.constants=pY(),g.decoders=Paa(),g.encoders=Qaa(),PM}function Sw(g){var c;"object"!=typeof g||RM.isBuffer(g)||(c=g.passphrase,
g=g.key);"string"==typeof g&&(g=RM.from(g));var h=c;g=g.toString();var f=g.match(Raa);if(f){var m="aes"+f[1],n=XE.from(f[2],"hex");var a=XE.from(f[3].replace(/[\r\n]/g,""),"base64");f=Nz(h,n.slice(0,8),parseInt(f[1],10)).key;h=[];m=Cm.createDecipheriv(m,f,n);h.push(m.update(a));h.push(m.final());a=XE.concat(h)}else a=g.match(Saa),a=new XE(a[2].replace(/[\r\n]/g,""),"base64");g=g.match(Taa)[1];switch(g){case "CERTIFICATE":var d=fm.certificate.decode(a,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(d||
(d=fm.PublicKey.decode(a,"der")),c=d.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return fm.RSAPublicKey.decode(d.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return d.subjectPrivateKey=d.subjectPublicKey,{type:"ec",data:d};case "1.2.840.10040.4.1":return d.algorithm.params.pub_key=fm.DSAparam.decode(d.subjectPublicKey.data,"der"),{type:"dsa",data:d.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":h=fm.EncryptedPrivateKey.decode(a,"der"),
a=c,m=h.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(h.algorithm.decrypt.kde.kdeparams.iters.toString(),10),d=Uaa[h.algorithm.decrypt.cipher.algo.join(".")],g=h.algorithm.decrypt.cipher.iv,c=h.subjectPrivateKey,h=parseInt(d.split("-")[1],10)/8,a=Vaa.pbkdf2Sync(a,m,n,h,"sha1"),d=Waa.createDecipheriv(d,a,g),g=[],a=(g.push(d.update(c)),g.push(d.final()),RM.concat(g));case "PRIVATE KEY":switch(c=(d=fm.PrivateKey.decode(a,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return fm.RSAPrivateKey.decode(d.subjectPrivateKey,
"der");case "1.2.840.10045.2.1":return{curve:d.algorithm.curve,privateKey:fm.ECPrivateKey.decode(d.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return d.algorithm.params.priv_key=fm.DSAparam.decode(d.subjectPrivateKey,"der"),{type:"dsa",params:d.algorithm.params};default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return fm.RSAPublicKey.decode(a,"der");case "RSA PRIVATE KEY":return fm.RSAPrivateKey.decode(a,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:fm.DSAPrivateKey.decode(a,
"der")};case "EC PRIVATE KEY":return{curve:(a=fm.ECPrivateKey.decode(a,"der")).parameters.value,privateKey:a.privateKey};default:throw Error("unknown key type "+g);}}function CY(g,c,h,f){if((g=new sl(g.toArray())).length<c.byteLength()){var m=new sl(c.byteLength()-g.length);m.fill(0);g=sl.concat([m,g])}m=h.length;h=(h=SM(h,c)).mod(c);h=new sl(h.toArray());h.length<c.byteLength()&&(c=new sl(c.byteLength()-h.length),c.fill(0),h=sl.concat([c,h]));c=h;h=new sl(m);h.fill(1);m=new sl(m);return m.fill(0),
m=au(f,m).update(h).update(new sl([0])).update(g).update(c).digest(),h=au(f,m).update(h).digest(),{k:m=au(f,m).update(h).update(new sl([1])).update(g).update(c).digest(),v:au(f,m).update(h).digest()}}function SM(g,c){var h=new YE(g);g=(g.length<<3)-c.bitLength();return 0<g&&h.ishrn(g),h}function DY(g,c,h){var f;do{for(f=new sl(0);8*f.length<g.bitLength();)c.v=au(h,c.k).update(c.v).digest(),f=sl.concat([f,c.v]);f=SM(f,g);c.k=au(h,c.k).update(c.v).update(new sl([0])).digest();c.v=au(h,c.k).update(c.v).digest()}while(-1!==
f.cmp(g));return f}function EY(g,c){if(0>=g.cmpn(0))throw Error("invalid sig");if(g.cmp(c)>=c)throw Error("invalid sig");}function Oz(g){ZE.Writable.call(this||wj);g=bu[g];if(!g)throw Error("Unknown message digest");(this||wj)._hashType=g.hash;(this||wj)._hash=FY(g.hash);(this||wj)._tag=g.id;(this||wj)._signType=g.sign}function Pz(g){ZE.Writable.call(this||wj);g=bu[g];if(!g)throw Error("Unknown message digest");(this||wj)._hash=FY(g.hash);(this||wj)._tag=g.id;(this||wj)._signType=g.sign}function GY(g){return new Oz(g)}
function HY(g){return new Pz(g)}function cu(g){(this||jk).curveType=Dm[g];(this||jk).curveType||((this||jk).curveType={name:g});(this||jk).curve=new Xaa.ec((this||jk).curveType.name);(this||jk).keys=void 0}function TM(g,c,h){Array.isArray(g)||(g=g.toArray());g=new sq(g);h&&g.length<h&&(h=new sq(h-g.length),h.fill(0),g=sq.concat([h,g]));return c?g.toString(c):g}function IY(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function JY(g,
c){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>KY||0>g)throw new TypeError("offset must be a uint32");if(g>LY||g>c)throw new RangeError("offset out of range");}function MY(g,c,h){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>KY||0>g)throw new TypeError("size must be a uint32");if(g+c>h||g>LY)throw new RangeError("buffer too small");}function NY(g,c,h,f){return UM.browser?(h=new Uint8Array(g.buffer,c,h),VM.getRandomValues(h),f?(UM.nextTick(function(){f(null,
g)}),void 0):g):f?(OY(h,function(m,n){if(m)return f(m);n.copy(g,c);f(null,g)}),void 0):(OY(h).copy(g,c),g)}function Yaa(g){var c=[];g.replace(/[a-fA-F0-9]{2}/g,function(h){c.push(parseInt(h,16))});return c}function $E(g){return g&&g.__esModule?g:{default:g}}function PY(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(m){if("TypeError"!==m.name)throw m;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?
MozBlobBuilder:WebKitBlobBuilder),f=0;f<g.length;f+=1)h.append(g[f]);return h.getBlob(c.type)}}function QY(g){for(var c=g.length,h=new ArrayBuffer(c),f=new Uint8Array(h),m=0;m<c;m++)f[m]=g.charCodeAt(m);return h}function RY(g,c){return PY([QY(g)],{type:c})}function SY(g,c){var h=new FileReader,f="function"===typeof h.readAsBinaryString;h.onloadend=function(m){var n=m.target.result||"";if(f)return c(n);m="";n=new Uint8Array(n);for(var a=n.byteLength,d=0;d<a;d++)m+=String.fromCharCode(n[d]);c(m)};f?
h.readAsBinaryString(g):h.readAsArrayBuffer(g)}function TY(g,c){SY(g,function(h){c(h)})}function Zaa(g,c,h){return g.webkitSlice?g.webkitSlice(c,h):g.slice(c,h)}function $aa(g,c,h,f,m){if(0<h||f<c.size)c=Zaa(c,h,f);UY.readAsArrayBuffer(c,function(n){g.append(n);m()})}function aba(g,c,h,f,m){if(0<h||f<c.length)c=c.substring(h,f);g.appendBinary(c);m()}function aF(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function Qz(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var h=
[];var f=0;for(c=g.length;f<c;f++)h[f]=Qz(g[f]);return h}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(f=new ArrayBuffer(g.byteLength),h=new Uint8Array(f),g=new Uint8Array(g),h.set(g),g=f):(f=g.size,h=g.type,g="function"===typeof g.slice?g.slice(0,f,h):g.webkitSlice(0,f,h)),g;h=Object.getPrototypeOf(g);null===h?h=!0:(h=
h.constructor,h="function"==typeof h&&h instanceof h&&VY.call(h)==bba);if(!h)return g;h={};for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c=Qz(g[f]),"undefined"!==typeof c&&(h[f]=c));return h}function WY(g){var c=!1;return WM(function(h){if(c)throw Error("once called more than once");c=!0;g.apply(this,h)})}function XY(g){return WM(function(c){c=Qz(c);var h=this,f="function"===typeof c[c.length-1]?c.pop():!1,m=new Promise(function(n,a){var d;try{var k=WY(function(b,e){b?a(b):n(e)});c.push(k);
(d=g.apply(h,c))&&"function"===typeof d.then&&n(d)}catch(b){a(b)}});f&&m.then(function(n){f(null,n)},f);return m})}function cba(g,c,h){if(g.constructor.listeners("debug").length){for(var f=["api",g.name,c],m=0;m<h.length-1;m++)f.push(h[m]);g.constructor.emit("debug",f);var n=h[h.length-1];h[h.length-1]=function(a,d){var k=["api",g.name,c];k=k.concat(a?["error",a]:["success",d]);g.constructor.emit("debug",k);n(a,d)}}}function XM(g,c){for(var h={},f=0,m=c.length;f<m;f++){var n=c[f];n in g&&(h[n]=g[n])}return h}
function YY(g){return g}function dba(g){return[{ok:g}]}function eba(g){bF&&addEventListener("storage",function(c){g.emit(c.key)})}function Tw(){cF.call(this);this._listeners={};eba(this)}function YM(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function ZY(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function $Y(g,c,h){return new Promise(function(f,m){g.get(c,function(n,
a){if(n){if(404!==n.status)return m(n);a={}}n=a._rev;a=h(a);if(!a)return f({updated:!1,rev:n});a._id=c;a._rev=n;f(fba(g,a,h))})})}function fba(g,c,h){return g.put(c).then(function(f){return{updated:!0,rev:f.rev}},function(f){if(409!==f.status)throw f;return $Y(g,c._id,h)})}function aZ(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");-1===g&&(g=c);return[g,g===c?0:4-g%4]}function gba(g,c,h){for(var f=[],m=c;m<h;m+=3)c=(g[m]<<16&16711680)+(g[m+
1]<<8&65280)+(g[m+2]&255),f.push(hp[c>>18&63]+hp[c>>12&63]+hp[c>>6&63]+hp[c&63]);return f.join("")}function tq(g){if(g>ZM)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);Object.setPrototypeOf(g,Od.prototype);return g}function Od(g,c,h){if("number"===typeof g){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return $M(g)}return bZ(g,c,h)}function bZ(g,c,h){if("string"===typeof g){var f=c;if("string"!==
typeof f||""===f)f="utf8";if(!Od.isEncoding(f))throw new TypeError("Unknown encoding: "+f);c=cZ(g,f)|0;h=tq(c);g=h.write(g,f);g!==c&&(h=h.slice(0,g));return h}if(ArrayBuffer.isView(g))return ip(g,Uint8Array)?(g=new Uint8Array(g),g=dZ(g.buffer,g.byteOffset,g.byteLength)):g=aN(g),g;if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(ip(g,ArrayBuffer)||g&&ip(g.buffer,ArrayBuffer)||"undefined"!==
typeof SharedArrayBuffer&&(ip(g,SharedArrayBuffer)||g&&ip(g.buffer,SharedArrayBuffer)))return dZ(g,c,h);if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');f=g.valueOf&&g.valueOf();if(null!=f&&f!==g)return Od.from(f,c,h);if(f=hba(g))return f;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return Od.from(g[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function eZ(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function $M(g){eZ(g);return tq(0>g?0:bN(g)|0)}function aN(g){for(var c=0>g.length?0:bN(g.length)|0,h=tq(c),f=0;f<c;f+=1)h[f]=g[f]&255;return h}function dZ(g,c,h){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
g=void 0===c&&void 0===h?new Uint8Array(g):void 0===h?new Uint8Array(g,c):new Uint8Array(g,c,h);Object.setPrototypeOf(g,Od.prototype);return g}function hba(g){if(Od.isBuffer(g)){var c=bN(g.length)|0,h=tq(c);if(0===h.length)return h;g.copy(h,0,0,c);return h}if(void 0!==g.length)return(c="number"!==typeof g.length)||(c=g.length,c=c!==c),c?tq(0):aN(g);if("Buffer"===g.type&&Array.isArray(g.data))return aN(g.data)}function bN(g){if(g>=ZM)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
ZM.toString(16)+" bytes");return g|0}function cZ(g,c){if(Od.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||ip(g,ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var h=g.length,f=2<arguments.length&&!0===arguments[2];if(!f&&0===h)return 0;for(var m=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return cN(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
h;case "hex":return h>>>1;case "base64":return dF.toByteArray(fZ(g)).length;default:if(m)return f?-1:cN(g).length;c=(""+c).toLowerCase();m=!0}}function iba(g,c,h){var f=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===h||h>this.length)h=this.length;if(0>=h)return"";h>>>=0;c>>>=0;if(h<=c)return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;if(!c||0>c)c=0;if(!h||0>h||h>g)h=g;for(g="";c<h;++c)g+=jba[this[c]];return g;case "utf8":case "utf-8":return gZ(this,c,h);case "ascii":g=
"";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]&127);return g;case "latin1":case "binary":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return c=0===c&&h===this.length?dF.fromByteArray(this):dF.fromByteArray(this.slice(c,h)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(g=0;g<c.length-1;g+=2)h+=String.fromCharCode(c[g]+256*c[g+1]);return h;default:if(f)throw new TypeError("Unknown encoding: "+
g);g=(g+"").toLowerCase();f=!0}}function du(g,c,h){var f=g[c];g[c]=g[h];g[h]=f}function hZ(g,c,h,f,m){if(0===g.length)return-1;"string"===typeof h?(f=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);h=+h;h!==h&&(h=m?0:g.length-1);0>h&&(h=g.length+h);if(h>=g.length){if(m)return-1;h=g.length-1}else if(0>h)if(m)h=0;else return-1;"string"===typeof c&&(c=Od.from(c,f));if(Od.isBuffer(c))return 0===c.length?-1:iZ(g,c,h,f,m);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?
m?Uint8Array.prototype.indexOf.call(g,c,h):Uint8Array.prototype.lastIndexOf.call(g,c,h):iZ(g,[c],h,f,m);throw new TypeError("val must be string, number or Buffer");}function iZ(g,c,h,f,m){function n(b,e){return 1===a?b[e]:b.readUInt16BE(e*a)}var a=1,d=g.length,k=c.length;if(void 0!==f&&(f=String(f).toLowerCase(),"ucs2"===f||"ucs-2"===f||"utf16le"===f||"utf-16le"===f)){if(2>g.length||2>c.length)return-1;a=2;d/=2;k/=2;h/=2}if(m)for(f=-1;h<d;h++)if(n(g,h)===n(c,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===
k)return f*a}else-1!==f&&(h-=h-f),f=-1;else for(h+k>d&&(h=d-k);0<=h;h--){d=!0;for(f=0;f<k;f++)if(n(g,h+f)!==n(c,f)){d=!1;break}if(d)return h}return-1}function gZ(g,c,h){h=Math.min(g.length,h);for(var f=[];c<h;){var m=g[c],n=null,a=239<m?4:223<m?3:191<m?2:1;if(c+a<=h)switch(a){case 1:128>m&&(n=m);break;case 2:var d=g[c+1];128===(d&192)&&(m=(m&31)<<6|d&63,127<m&&(n=m));break;case 3:d=g[c+1];var k=g[c+2];128===(d&192)&&128===(k&192)&&(m=(m&15)<<12|(d&63)<<6|k&63,2047<m&&(55296>m||57343<m)&&(n=m));break;
case 4:d=g[c+1];k=g[c+2];var b=g[c+3];128===(d&192)&&128===(k&192)&&128===(b&192)&&(m=(m&15)<<18|(d&63)<<12|(k&63)<<6|b&63,65535<m&&1114112>m&&(n=m))}null===n?(n=65533,a=1):65535<n&&(n-=65536,f.push(n>>>10&1023|55296),n=56320|n&1023);f.push(n);c+=a}g=f.length;if(g<=jZ)f=String.fromCharCode.apply(String,f);else{h="";for(c=0;c<g;)h+=String.fromCharCode.apply(String,f.slice(c,c+=jZ));f=h}return f}function Jk(g,c,h){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+c>h)throw new RangeError("Trying to access beyond buffer length");
}function gm(g,c,h,f,m,n){if(!Od.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>m||c<n)throw new RangeError('"value" argument is out of bounds');if(h+f>g.length)throw new RangeError("Index out of range");}function kZ(g,c,h,f,m,n){if(h+f>g.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function lZ(g,c,h,f,m){c=+c;h>>>=0;m||kZ(g,c,h,4);Uw.write(g,c,h,f,23,4);return h+4}function mZ(g,c,h,f,m){c=+c;h>>>=0;m||kZ(g,
c,h,8);Uw.write(g,c,h,f,52,8);return h+8}function fZ(g){g=g.split("=")[0];g=g.trim().replace(kba,"");if(2>g.length)return"";for(;0!==g.length%4;)g+="=";return g}function cN(g,c){c=c||Infinity;for(var h,f=g.length,m=null,n=[],a=0;a<f;++a){h=g.charCodeAt(a);if(55295<h&&57344>h){if(!m){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}else if(a+1===f){-1<(c-=3)&&n.push(239,191,189);continue}m=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);m=h;continue}h=(m-55296<<10|h-56320)+65536}else m&&-1<
(c-=3)&&n.push(239,191,189);m=null;if(128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,h&63|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,h&63|128)}else if(1114112>h){if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw Error("Invalid code point");}return n}function eF(g,c,h,f){for(var m=0;m<f&&!(m+h>=c.length||m>=g.length);++m)c[m+h]=g[m];return m}function ip(g,c){return g instanceof c||null!=g&&null!=g.constructor&&
null!=g.constructor.name&&g.constructor.name===c.name}function Pr(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||uq).db=g;(this||uq)._ended=!1;(this||uq)._nexting=!1}function jo(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||kk).db=g;(this||kk)._operations=[];(this||kk)._written=!1}function gj(g){(this||Em).status="new";(this||Em).supports=
lba(g,{status:!0})}function nZ(g,c){var h={},f;for(f in c)if(mba.call(c,f)){var m=c[f];-1!==nba.indexOf(f)&&(m=g._serializeKey(m));h[f]=m}return h}function Vw(g,c){oZ.call(this||ko,g);(this||ko)._options=c;(this||ko)._iterator=null;(this||ko)._operations=[]}function eu(g){pZ.call(this||Kk,g.supports||{});oba.forEach(function(c){"function"!==typeof g[c]||(this||Kk).supports.additionalMethods[c]||((this||Kk).supports.additionalMethods[c]=!0)},this||Kk);(this||Kk)._db=g;(this||Kk)._operations=[];qZ(this||
Kk)}function pba(g){rZ.concat("iterator").forEach(function(c){g["_"+c]=function(){return(this||Kk)._db[c].apply((this||Kk)._db,arguments)}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){return(this||Kk)._db[c].apply((this||Kk)._db,arguments)}})}function qZ(g){rZ.forEach(function(c){g["_"+c]=function(){(this||Kk)._operations.push({method:c,args:arguments})}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){(this||Kk)._operations.push({method:c,
args:arguments})}});g._iterator=function(c){c=new sZ(g,c);(this||Kk)._operations.push({iterator:c});return c}}function tZ(){if(uZ)return vZ;uZ=!0;return vZ=ap.EventEmitter}function Ww(){function g(f,m,n){n||(n=Error);var a=function(d,k,b){return n.call(this,"string"===typeof m?m:m(d,k,b))||this};$jscomp.inherits(a,n);a.prototype.name=n.name;a.prototype.code=f;h[f]=a}function c(f,m){if(Array.isArray(f)){var n=f.length;f=f.map(function(a){return String(a)});return 2<n?"one of "+m+" "+f.slice(0,n-1).join(", ")+
", or "+f[n-1]:2===n?"one of "+m+" "+f[0]+" or "+f[1]:"of "+m+" "+f[0]}return"of "+m+" "+String(f)}if(wZ)return dN;wZ=!0;var h={};g("ERR_INVALID_OPT_VALUE",function(f,m){return'The value "'+m+'" is invalid for option "'+f+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(f,m,n){var a;if(a="string"===typeof m)a="not "===m.substr(0,4);a?(a="must not be",m=m.replace(/^not /,"")):a="must be";var d=void 0;if(void 0===d||d>f.length)d=f.length;" argument"===f.substring(d-9,d)?f="The "+f+" "+a+" "+c(m,"type"):
(d=void 0,"number"!==typeof d&&(d=0),d=d+1>f.length?!1:-1!==f.indexOf(".",d),f='The "'+f+'" '+(d?"property":"argument")+" "+a+" "+c(m,"type"));return f+(". Received type "+typeof n)},TypeError);g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK",
"Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);g("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");dN.codes=h;return dN}function eN(g){try{if(!fN.localStorage)return!1}catch(c){return!1}g=fN.localStorage[g];return null==g?!1:"true"===
String(g).toLowerCase()}function xZ(g,c){for(var h in g)c[h]=g[h]}function fu(g,c,h){return jp(g,c,h)}function qba(g){if(!g)return"utf8";for(var c;;)switch(g){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return g;default:if(c)return;g=(""+g).toLowerCase();c=!0}}function Rz(g){var c=qba(g);if("string"!==typeof c&&(gN.isEncoding===yZ||!yZ(g)))throw Error("Unknown encoding: "+
g);this.encoding=c||g;switch(this.encoding){case "utf16le":this.text=rba;this.end=sba;g=4;break;case "utf8":this.fillLast=tba;g=4;break;case "base64":this.text=uba;this.end=vba;g=3;break;default:this.write=wba;this.end=xba;return}this.lastTotal=this.lastNeed=0;this.lastChar=gN.allocUnsafe(g)}function hN(g){return 127>=g?0:6===g>>5?2:14===g>>4?3:30===g>>3?4:2===g>>6?-1:-2}function yba(g,c,h){var f=c.length-1;if(f<h)return 0;var m=hN(c[f]);if(0<=m)return 0<m&&(g.lastNeed=m-1),m;if(--f<h||-2===m)return 0;
m=hN(c[f]);if(0<=m)return 0<m&&(g.lastNeed=m-2),m;if(--f<h||-2===m)return 0;m=hN(c[f]);return 0<=m?(0<m&&(2===m?m=0:g.lastNeed=m-3),m):0}function tba(g){var c=this.lastTotal-this.lastNeed;a:if(128!==(g[0]&192)){this.lastNeed=0;var h="\ufffd"}else{if(1<this.lastNeed&&1<g.length){if(128!==(g[1]&192)){this.lastNeed=1;h="\ufffd";break a}if(2<this.lastNeed&&2<g.length&&128!==(g[2]&192)){this.lastNeed=2;h="\ufffd";break a}}h=void 0}if(void 0!==h)return h;if(this.lastNeed<=g.length)return g.copy(this.lastChar,
c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,c,0,g.length);this.lastNeed-=g.length}function rba(g,c){if(0===(g.length-c)%2){if(c=g.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=g[g.length-1];return g.toString("utf16le",c,g.length-1)}function sba(g){g=
g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function uba(g,c){var h=(g.length-c)%3;if(0===h)return g.toString("base64",c);this.lastNeed=3-h;this.lastTotal=3;1===h?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]);return g.toString("base64",c,g.length-h)}function vba(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function wba(g){return g.toString(this.encoding)}
function xba(g){return g&&g.length?this.write(g):""}function iN(){function g(m){var n=!1;return function(){if(!n){n=!0;for(var a=arguments.length,d=Array(a),k=0;k<a;k++)d[k]=arguments[k];m.apply(this,d)}}}function c(){}function h(m,n,a){if("function"===typeof n)return h(m,null,n);n||(n={});a=g(a||c);var d=n.readable||!1!==n.readable&&m.readable,k=n.writable||!1!==n.writable&&m.writable,b=function(){m.writable||l()},e=m._writableState&&m._writableState.finished,l=function(){k=!1;e=!0;d||a.call(m)},
p=m._readableState&&m._readableState.endEmitted,q=function(){d=!1;p=!0;k||a.call(m)},u=function(A){a.call(m,A)},w=function(){var A;if(d&&!p)return m._readableState&&m._readableState.ended||(A=new f),a.call(m,A);if(k&&!e)return m._writableState&&m._writableState.ended||(A=new f),a.call(m,A)},y=function(){m.req.on("finish",l)};if(m.setHeader&&"function"===typeof m.abort)if(m.on("complete",l),m.on("abort",w),m.req)y();else m.on("request",y);else k&&!m._writableState&&(m.on("end",b),m.on("close",b));
m.on("end",q);m.on("finish",l);if(!1!==n.error)m.on("error",u);m.on("close",w);return function(){m.removeListener("complete",l);m.removeListener("abort",w);m.removeListener("request",y);m.req&&m.req.removeListener("finish",l);m.removeListener("end",b);m.removeListener("close",b);m.removeListener("finish",l);m.removeListener("end",q);m.removeListener("error",u);m.removeListener("close",w)}}if(zZ)return AZ;zZ=!0;var f=Ww().codes.ERR_STREAM_PREMATURE_CLOSE;return AZ=h}function zba(){if(BZ)return CZ;
BZ=!0;return CZ=function(){throw Error("Readable.from is not available in the browser");}}function Aba(){function g(d,k){var b=Object.keys(d);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(d);k&&(e=e.filter(function(l){return Object.getOwnPropertyDescriptor(d,l).enumerable}));b.push.apply(b,e)}return b}function c(d){for(var k=1;k<arguments.length;k++){var b=null!=arguments[k]?arguments[k]:{};k%2?g(Object(b),!0).forEach(function(e){var l=b[e];e in d?Object.defineProperty(d,e,{value:l,
enumerable:!0,configurable:!0,writable:!0}):d[e]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):g(Object(b)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(b,e))})}return d}function h(d,k){for(var b=0;b<k.length;b++){var e=k[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(d,e.key,e)}}function f(d,k,b){k&&h(d.prototype,k);b&&h(d,b);return d}if(DZ)return EZ;DZ=!0;
var m=Ng.Buffer,n=FZ.inspect,a=n&&n.custom||"inspect";return EZ=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}f(d,[{key:"push",value:function(k){k={data:k,next:null};0<this.length?this.tail.next=k:this.head=k;this.tail=k;++this.length}},{key:"unshift",value:function(k){k={data:k,next:this.head};0===this.length&&(this.tail=k);this.head=k;++this.length}},{key:"shift",value:function(){if(0!==this.length){var k=
this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return k}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(k){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=k+b.data;return e}},{key:"concat",value:function(k){if(0===this.length)return m.alloc(0);k=m.allocUnsafe(k>>>0);for(var b=this.head,e=0;b;)m.prototype.copy.call(b.data,k,e),e+=b.data.length,b=b.next;return k}},{key:"consume",value:function(k,
b){k<this.head.data.length?(b=this.head.data.slice(0,k),this.head.data=this.head.data.slice(k)):b=k===this.head.data.length?this.shift():b?this._getString(k):this._getBuffer(k);return b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(k){var b=this.head,e=1,l=b.data;for(k-=l.length;b=b.next;){var p=b.data,q=k>p.length?p.length:k;l=q===p.length?l+p:l+p.slice(0,k);k-=q;if(0===k){q===p.length?(++e,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=p.slice(q));
break}++e}this.length-=e;return l}},{key:"_getBuffer",value:function(k){var b=m.allocUnsafe(k),e=this.head,l=1;e.data.copy(b);for(k-=e.data.length;e=e.next;){var p=e.data,q=k>p.length?p.length:k;p.copy(b,b.length-k,0,q);k-=q;if(0===k){q===p.length?(++l,this.head=e.next?e.next:this.tail=null):(this.head=e,e.data=p.slice(q));break}++l}this.length-=l;return b}},{key:a,value:function(k,b){return n(this,c({},b,{depth:0,customInspect:!1}))}}]);return d}()}function GZ(){function g(m,n){h(m,n);c(m)}function c(m){m._writableState&&
!m._writableState.emitClose||m._readableState&&!m._readableState.emitClose||m.emit("close")}function h(m,n){m.emit("error",n)}if(HZ)return IZ;HZ=!0;var f=yh;return IZ={destroy:function(m,n){var a=this,d=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||d)return n?n(m):m&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(h,this,m)):f.nextTick(h,this,m)),this;this._readableState&&(this._readableState.destroyed=
!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(m||null,function(k){!n&&k?a._writableState?a._writableState.errorEmitted?f.nextTick(c,a):(a._writableState.errorEmitted=!0,f.nextTick(g,a,k)):f.nextTick(g,a,k):n?(f.nextTick(c,a),n(k)):f.nextTick(c,a)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=
!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(m,n){var a=m._readableState,d=m._writableState;a&&a.autoDestroy||d&&d.autoDestroy?m.destroy(n):m.emit("error",n)}}}function JZ(){if(KZ)return LZ;KZ=!0;var g=Ww().codes.ERR_INVALID_OPT_VALUE;return LZ={getHighWaterMark:function(c,h,f,m){h=null!=h.highWaterMark?h.highWaterMark:
m?h[f]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new g(m?f:"highWaterMark",h);return Math.floor(h)}return c.objectMode?16:16384}}}function MZ(){function g(Q){var W=this;this.entry=this.next=null;this.finish=function(){var ka=W.entry;for(W.entry=null;ka;){var ea=ka.callback;Q.pendingcb--;ea(void 0);ka=ka.next}Q.corkedRequestsFree.next=W}}function c(){}function h(Q,W,ka){l=l||Xw();Q=Q||{};"boolean"!==typeof ka&&(ka=W instanceof l);this.objectMode=!!Q.objectMode;ka&&(this.objectMode=
this.objectMode||!!Q.writableObjectMode);this.highWaterMark=A(this,Q,"writableHighWaterMark",ka);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==Q.decodeStrings;this.defaultEncoding=Q.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(ea){var la=W._writableState,db=la.sync,ub=la.writecb;if("function"!==typeof ub)throw new I;la.writing=!1;la.writecb=null;la.length-=
la.writelen;la.writelen=0;ea?(--la.pendingcb,db?(e.nextTick(ub,ea),e.nextTick(b,W,la),W._writableState.errorEmitted=!0,F(W,ea)):(ub(ea),W._writableState.errorEmitted=!0,F(W,ea),b(W,la))):((ea=d(la)||W.destroyed)||la.corked||la.bufferProcessing||!la.bufferedRequest||a(W,la),db?e.nextTick(n,W,la,ea,ub):n(W,la,ea,ub))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==Q.emitClose;this.autoDestroy=
!!Q.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function f(Q){l=l||Xw();var W=this instanceof l;if(!W&&!Y.call(f,this))return new f(Q);this._writableState=new h(Q,this,W);this.writable=!0;Q&&("function"===typeof Q.write&&(this._write=Q.write),"function"===typeof Q.writev&&(this._writev=Q.writev),"function"===typeof Q.destroy&&(this._destroy=Q.destroy),"function"===typeof Q.final&&(this._final=Q.final));q.call(this)}function m(Q,W,ka,ea,la,db,ub){W.writelen=ea;W.writecb=
ub;W.writing=!0;W.sync=!0;if(W.destroyed)W.onwrite(new V("write"));else ka?Q._writev(la,W.onwrite):Q._write(la,db,W.onwrite);W.sync=!1}function n(Q,W,ka,ea){!ka&&0===W.length&&W.needDrain&&(W.needDrain=!1,Q.emit("drain"));W.pendingcb--;ea();b(Q,W)}function a(Q,W){W.bufferProcessing=!0;var ka=W.bufferedRequest;if(Q._writev&&ka&&ka.next){var ea=Array(W.bufferedRequestCount),la=W.corkedRequestsFree;la.entry=ka;for(var db=0,ub=!0;ka;)ea[db]=ka,ka.isBuf||(ub=!1),ka=ka.next,db+=1;ea.allBuffers=ub;m(Q,W,
!0,W.length,ea,"",la.finish);W.pendingcb++;W.lastBufferedRequest=null;la.next?(W.corkedRequestsFree=la.next,la.next=null):W.corkedRequestsFree=new g(W);W.bufferedRequestCount=0}else{for(;ka&&(ea=ka.chunk,m(Q,W,!1,W.objectMode?1:ea.length,ea,ka.encoding,ka.callback),ka=ka.next,W.bufferedRequestCount--,!W.writing););null===ka&&(W.lastBufferedRequest=null)}W.bufferedRequest=ka;W.bufferProcessing=!1}function d(Q){return Q.ending&&0===Q.length&&null===Q.bufferedRequest&&!Q.finished&&!Q.writing}function k(Q,
W){Q._final(function(ka){W.pendingcb--;ka&&F(Q,ka);W.prefinished=!0;Q.emit("prefinish");b(Q,W)})}function b(Q,W){var ka=d(W);ka&&(W.prefinished||W.finalCalled||("function"!==typeof Q._final||W.destroyed?(W.prefinished=!0,Q.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,e.nextTick(k,Q,W))),0===W.pendingcb&&(W.finished=!0,Q.emit("finish"),W.autoDestroy&&(W=Q._readableState,(!W||W.autoDestroy&&W.endEmitted)&&Q.destroy())));return ka}if(NZ)return jN;NZ=!0;var e=yh;jN=f;var l;f.WritableState=h;var p=
{deprecate:Bba},q=tZ(),u=Ng.Buffer,w=Cba.Uint8Array||function(){},y=GZ(),A=JZ().getHighWaterMark,C=Ww().codes,D=C.ERR_INVALID_ARG_TYPE,L=C.ERR_METHOD_NOT_IMPLEMENTED,I=C.ERR_MULTIPLE_CALLBACK,S=C.ERR_STREAM_CANNOT_PIPE,V=C.ERR_STREAM_DESTROYED,ba=C.ERR_STREAM_NULL_VALUES,ua=C.ERR_STREAM_WRITE_AFTER_END,Fa=C.ERR_UNKNOWN_ENCODING,F=y.errorOrDestroy;bj(f,q);h.prototype.getBuffer=function(){for(var Q=this.bufferedRequest,W=[];Q;)W.push(Q),Q=Q.next;return W};(function(){try{Object.defineProperty(h.prototype,
"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Q){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var Y=Function.prototype[Symbol.hasInstance];Object.defineProperty(f,Symbol.hasInstance,{value:function(Q){return Y.call(this,Q)?!0:this!==f?!1:Q&&Q._writableState instanceof h}})}else Y=function(Q){return Q instanceof this};
f.prototype.pipe=function(){F(this,new S)};f.prototype.write=function(Q,W,ka){var ea=this._writableState,la=!1,db;if(db=!ea.objectMode)db=Q,db=u.isBuffer(db)||db instanceof w;db&&!u.isBuffer(Q)&&(Q=u.from(Q));"function"===typeof W&&(ka=W,W=null);db?W="buffer":W||(W=ea.defaultEncoding);"function"!==typeof ka&&(ka=c);if(ea.ending)ea=ka,ka=new ua,F(this,ka),e.nextTick(ea,ka);else{var ub;if(!(ub=db)){ub=Q;var xa=ka,na;null===ub?na=new ba:"string"===typeof ub||ea.objectMode||(na=new D("chunk",["string",
"Buffer"],ub));na?(F(this,na),e.nextTick(xa,na),ub=!1):ub=!0}ub&&(ea.pendingcb++,la=db,la||(na=Q,ea.objectMode||!1===ea.decodeStrings||"string"!==typeof na||(na=u.from(na,W)),Q!==na&&(la=!0,W="buffer",Q=na)),db=ea.objectMode?1:Q.length,ea.length+=db,na=ea.length<ea.highWaterMark,na||(ea.needDrain=!0),ea.writing||ea.corked?(db=ea.lastBufferedRequest,ea.lastBufferedRequest={chunk:Q,encoding:W,isBuf:la,callback:ka,next:null},db?db.next=ea.lastBufferedRequest:ea.bufferedRequest=ea.lastBufferedRequest,
ea.bufferedRequestCount+=1):m(this,ea,!1,db,Q,W,ka),la=na)}return la};f.prototype.cork=function(){this._writableState.corked++};f.prototype.uncork=function(){var Q=this._writableState;Q.corked&&(Q.corked--,Q.writing||Q.corked||Q.bufferProcessing||!Q.bufferedRequest||a(this,Q))};f.prototype.setDefaultEncoding=function(Q){"string"===typeof Q&&(Q=Q.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((Q+"").toLowerCase())))throw new Fa(Q);this._writableState.defaultEncoding=
Q;return this};Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});f.prototype._write=function(Q,W,ka){ka(new L("_write()"))};f.prototype._writev=null;f.prototype.end=function(Q,W,ka){var ea=this._writableState;"function"===typeof Q?(ka=Q,W=Q=null):"function"===typeof W&&(ka=W,
W=null);null!==Q&&void 0!==Q&&this.write(Q,W);ea.corked&&(ea.corked=1,this.uncork());if(!ea.ending){Q=ka;ea.ending=!0;b(this,ea);if(Q)if(ea.finished)e.nextTick(Q);else this.once("finish",Q);ea.ended=!0;this.writable=!1}return this};Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(Q){this._writableState&&
(this._writableState.destroyed=Q)}});f.prototype.destroy=y.destroy;f.prototype._undestroy=y.undestroy;f.prototype._destroy=function(Q,W){W(Q)};return jN}function Xw(){function g(b){if(!(this instanceof g))return new g(b);n.call(this,b);a.call(this,b);this.allowHalfOpen=!0;b&&(!1===b.readable&&(this.readable=!1),!1===b.writable&&(this.writable=!1),!1===b.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||f.nextTick(h,this)}function h(b){b.end()}if(OZ)return kN;
OZ=!0;var f=yh,m=Object.keys||function(b){var e=[],l;for(l in b)e.push(l);return e};kN=g;var n=PZ(),a=MZ();bj(g,n);m=m(a.prototype);for(var d=0;d<m.length;d++){var k=m[d];g.prototype[k]||(g.prototype[k]=a.prototype[k])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}});return kN}function Dba(){function g(A,C,D){C in A?Object.defineProperty(A,
C,{value:D,enumerable:!0,configurable:!0,writable:!0}):A[C]=D;return A}function c(A,C){return{value:A,done:C}}function h(A){var C=A[k];if(null!==C){var D=A[u].read();null!==D&&(A[p]=null,A[k]=null,A[b]=null,C(c(D,!1)))}}function f(A){n.nextTick(h,A)}function m(A,C){return function(D,L){A.then(function(){if(C[l])D(c(void 0,!0));else C[q](D,L)},L)}}if(QZ)return RZ;QZ=!0;var n=yh,a,d=iN(),k=Symbol("lastResolve"),b=Symbol("lastReject"),e=Symbol("error"),l=Symbol("ended"),p=Symbol("lastPromise"),q=Symbol("handlePromise"),
u=Symbol("stream"),w=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((a={get stream(){return this[u]},next:function(){var A=this,C=this[e];if(null!==C)return Promise.reject(C);if(this[l])return Promise.resolve(c(void 0,!0));if(this[u].destroyed)return new Promise(function(D,L){n.nextTick(function(){A[e]?L(A[e]):D(c(void 0,!0))})});if(C=this[p])C=new Promise(m(C,this));else{C=this[u].read();if(null!==C)return Promise.resolve(c(C,!1));C=new Promise(this[q])}return this[p]=C}},g(a,Symbol.asyncIterator,
function(){return this}),g(a,"return",function(){var A=this;return new Promise(function(C,D){A[u].destroy(null,function(L){L?D(L):C(c(void 0,!0))})})}),a),w);return RZ=function(A){var C,D=Object.create(y,(C={},g(C,u,{value:A,writable:!0}),g(C,k,{value:null,writable:!0}),g(C,b,{value:null,writable:!0}),g(C,e,{value:null,writable:!0}),g(C,l,{value:A._readableState.endEmitted,writable:!0}),g(C,q,{value:function(L,I){var S=D[u].read();S?(D[p]=null,D[k]=null,D[b]=null,L(c(S,!1))):(D[k]=L,D[b]=I)},writable:!0}),
C));D[p]=null;d(A,function(L){if(L&&"ERR_STREAM_PREMATURE_CLOSE"!==L.code){var I=D[b];null!==I&&(D[p]=null,D[k]=null,D[b]=null,I(L));D[e]=L}else L=D[k],null!==L&&(D[p]=null,D[k]=null,D[b]=null,L(c(void 0,!0))),D[l]=!0});A.on("readable",f.bind(null,D));return D}}function PZ(){function g(Aa,Pa,Da){if("function"===typeof Aa.prependListener)return Aa.prependListener(Pa,Da);if(Aa._events&&Aa._events[Pa])Array.isArray(Aa._events[Pa])?Aa._events[Pa].unshift(Da):Aa._events[Pa]=[Da,Aa._events[Pa]];else Aa.on(Pa,
Da)}function c(Aa,Pa,Da){L=L||Xw();Aa=Aa||{};"boolean"!==typeof Da&&(Da=Pa instanceof L);this.objectMode=!!Aa.objectMode;Da&&(this.objectMode=this.objectMode||!!Aa.readableObjectMode);this.highWaterMark=F(this,Aa,"readableHighWaterMark",Da);this.buffer=new Fa;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==
Aa.emitClose;this.autoDestroy=!!Aa.autoDestroy;this.destroyed=!1;this.defaultEncoding=Aa.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;Aa.encoding&&(la||(la=lN.StringDecoder),this.decoder=new la(Aa.encoding),this.encoding=Aa.encoding)}function h(Aa){L=L||Xw();if(!(this instanceof h))return new h(Aa);this._readableState=new c(Aa,this,this instanceof L);this.readable=!0;Aa&&("function"===typeof Aa.read&&(this._read=Aa.read),"function"===typeof Aa.destroy&&
(this._destroy=Aa.destroy));I.call(this)}function f(Aa,Pa,Da,M,U){ua("readableAddChunk",Pa);var aa=Aa._readableState;if(null===Pa)aa.reading=!1,ua("onEofChunk"),aa.ended||(aa.decoder&&(Pa=aa.decoder.end())&&Pa.length&&(aa.buffer.push(Pa),aa.length+=aa.objectMode?1:Pa.length),aa.ended=!0,aa.sync?a(Aa):(aa.needReadable=!1,aa.emittedReadable||(aa.emittedReadable=!0,d(Aa))));else{if(!U){U=Pa;var pa;S.isBuffer(U)||U instanceof V||"string"===typeof U||void 0===U||aa.objectMode||(pa=new Q("chunk",["string",
"Buffer","Uint8Array"],U));var ma=pa}if(ma)xa(Aa,ma);else if(aa.objectMode||Pa&&0<Pa.length)if("string"===typeof Pa||aa.objectMode||Object.getPrototypeOf(Pa)===S.prototype||(Pa=S.from(Pa)),M)aa.endEmitted?xa(Aa,new ea):m(Aa,aa,Pa,!0);else if(aa.ended)xa(Aa,new W);else{if(aa.destroyed)return!1;aa.reading=!1;aa.decoder&&!Da?(Pa=aa.decoder.write(Pa),aa.objectMode||0!==Pa.length?m(Aa,aa,Pa,!1):k(Aa,aa)):m(Aa,aa,Pa,!1)}else M||(aa.reading=!1,k(Aa,aa))}return!aa.ended&&(aa.length<aa.highWaterMark||0===
aa.length)}function m(Aa,Pa,Da,M){Pa.flowing&&0===Pa.length&&!Pa.sync?(Pa.awaitDrain=0,Aa.emit("data",Da)):(Pa.length+=Pa.objectMode?1:Da.length,M?Pa.buffer.unshift(Da):Pa.buffer.push(Da),Pa.needReadable&&a(Aa));k(Aa,Pa)}function n(Aa,Pa){if(0>=Aa||0===Pa.length&&Pa.ended)return 0;if(Pa.objectMode)return 1;if(Aa!==Aa)return Pa.flowing&&Pa.length?Pa.buffer.head.data.length:Pa.length;if(Aa>Pa.highWaterMark){var Da=Aa;1073741824<=Da?Da=1073741824:(Da--,Da|=Da>>>1,Da|=Da>>>2,Da|=Da>>>4,Da|=Da>>>8,Da|=
Da>>>16,Da++);Pa.highWaterMark=Da}return Aa<=Pa.length?Aa:Pa.ended?Pa.length:(Pa.needReadable=!0,0)}function a(Aa){var Pa=Aa._readableState;ua("emitReadable",Pa.needReadable,Pa.emittedReadable);Pa.needReadable=!1;Pa.emittedReadable||(ua("emitReadable",Pa.flowing),Pa.emittedReadable=!0,D.nextTick(d,Aa))}function d(Aa){var Pa=Aa._readableState;ua("emitReadable_",Pa.destroyed,Pa.length,Pa.ended);Pa.destroyed||!Pa.length&&!Pa.ended||(Aa.emit("readable"),Pa.emittedReadable=!1);Pa.needReadable=!Pa.flowing&&
!Pa.ended&&Pa.length<=Pa.highWaterMark;u(Aa)}function k(Aa,Pa){Pa.readingMore||(Pa.readingMore=!0,D.nextTick(b,Aa,Pa))}function b(Aa,Pa){for(;!Pa.reading&&!Pa.ended&&(Pa.length<Pa.highWaterMark||Pa.flowing&&0===Pa.length);){var Da=Pa.length;ua("maybeReadMore read 0");Aa.read(0);if(Da===Pa.length)break}Pa.readingMore=!1}function e(Aa){return function(){var Pa=Aa._readableState;ua("pipeOnDrain",Pa.awaitDrain);Pa.awaitDrain&&Pa.awaitDrain--;0===Pa.awaitDrain&&Aa.listeners("data").length&&(Pa.flowing=
!0,u(Aa))}}function l(Aa){var Pa=Aa._readableState;Pa.readableListening=0<Aa.listenerCount("readable");Pa.resumeScheduled&&!Pa.paused?Pa.flowing=!0:0<Aa.listenerCount("data")&&Aa.resume()}function p(Aa){ua("readable nexttick read 0");Aa.read(0)}function q(Aa,Pa){ua("resume",Pa.reading);Pa.reading||Aa.read(0);Pa.resumeScheduled=!1;Aa.emit("resume");u(Aa);Pa.flowing&&!Pa.reading&&Aa.read(0)}function u(Aa){var Pa=Aa._readableState;for(ua("flow",Pa.flowing);Pa.flowing&&null!==Aa.read(););}function w(Aa,
Pa){if(0===Pa.length)return null;Pa.objectMode?Aa=Pa.buffer.shift():!Aa||Aa>=Pa.length?(Aa=Pa.decoder?Pa.buffer.join(""):1===Pa.buffer.length?Pa.buffer.first():Pa.buffer.concat(Pa.length),Pa.buffer.clear()):Aa=Pa.buffer.consume(Aa,Pa.decoder);return Aa}function y(Aa){var Pa=Aa._readableState;ua("endReadable",Pa.endEmitted);Pa.endEmitted||(Pa.ended=!0,D.nextTick(A,Pa,Aa))}function A(Aa,Pa){ua("endReadableNT",Aa.endEmitted,Aa.length);Aa.endEmitted||0!==Aa.length||(Aa.endEmitted=!0,Pa.readable=!1,Pa.emit("end"),
Aa.autoDestroy&&(Aa=Pa._writableState,(!Aa||Aa.autoDestroy&&Aa.finished)&&Pa.destroy()))}function C(Aa,Pa){for(var Da=0,M=Aa.length;Da<M;Da++)if(Aa[Da]===Pa)return Da;return-1}if(SZ)return mN;SZ=!0;var D=yh;mN=h;var L;h.ReadableState=c;var I=tZ(),S=Ng.Buffer,V=Eba.Uint8Array||function(){},ba=FZ;var ua=ba&&ba.debuglog?ba.debuglog("stream"):function(){};var Fa=Aba();ba=GZ();var F=JZ().getHighWaterMark,Y=Ww().codes,Q=Y.ERR_INVALID_ARG_TYPE,W=Y.ERR_STREAM_PUSH_AFTER_EOF,ka=Y.ERR_METHOD_NOT_IMPLEMENTED,
ea=Y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,la,db,ub;bj(h,I);var xa=ba.errorOrDestroy,na=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(Aa){this._readableState&&(this._readableState.destroyed=Aa)}});h.prototype.destroy=ba.destroy;h.prototype._undestroy=ba.undestroy;h.prototype._destroy=function(Aa,Pa){Pa(Aa)};h.prototype.push=function(Aa,Pa){var Da=
this._readableState;if(Da.objectMode)var M=!0;else"string"===typeof Aa&&(Pa=Pa||Da.defaultEncoding,Pa!==Da.encoding&&(Aa=S.from(Aa,Pa),Pa=""),M=!0);return f(this,Aa,Pa,!1,M)};h.prototype.unshift=function(Aa){return f(this,Aa,null,!0,!1)};h.prototype.isPaused=function(){return!1===this._readableState.flowing};h.prototype.setEncoding=function(Aa){la||(la=lN.StringDecoder);Aa=new la(Aa);this._readableState.decoder=Aa;this._readableState.encoding=this._readableState.decoder.encoding;for(var Pa=this._readableState.buffer.head,
Da="";null!==Pa;)Da+=Aa.write(Pa.data),Pa=Pa.next;this._readableState.buffer.clear();""!==Da&&this._readableState.buffer.push(Da);this._readableState.length=Da.length;return this};h.prototype.read=function(Aa){ua("read",Aa);Aa=parseInt(Aa,10);var Pa=this._readableState,Da=Aa;0!==Aa&&(Pa.emittedReadable=!1);if(0===Aa&&Pa.needReadable&&((0!==Pa.highWaterMark?Pa.length>=Pa.highWaterMark:0<Pa.length)||Pa.ended))return ua("read: emitReadable",Pa.length,Pa.ended),0===Pa.length&&Pa.ended?y(this):a(this),
null;Aa=n(Aa,Pa);if(0===Aa&&Pa.ended)return 0===Pa.length&&y(this),null;var M=Pa.needReadable;ua("need readable",M);if(0===Pa.length||Pa.length-Aa<Pa.highWaterMark)M=!0,ua("length less than watermark",M);Pa.ended||Pa.reading?ua("reading or ended",!1):M&&(ua("do read"),Pa.reading=!0,Pa.sync=!0,0===Pa.length&&(Pa.needReadable=!0),this._read(Pa.highWaterMark),Pa.sync=!1,Pa.reading||(Aa=n(Da,Pa)));M=0<Aa?w(Aa,Pa):null;null===M?(Pa.needReadable=Pa.length<=Pa.highWaterMark,Aa=0):(Pa.length-=Aa,Pa.awaitDrain=
0);0===Pa.length&&(Pa.ended||(Pa.needReadable=!0),Da!==Aa&&Pa.ended&&y(this));null!==M&&this.emit("data",M);return M};h.prototype._read=function(Aa){xa(this,new ka("_read()"))};h.prototype.pipe=function(Aa,Pa){function Da(Va,nb){ua("onunpipe");Va===ib&&nb&&!1===nb.hasUnpiped&&(nb.hasUnpiped=!0,ua("cleanup"),Aa.removeListener("close",pa),Aa.removeListener("finish",ma),Aa.removeListener("drain",qa),Aa.removeListener("error",aa),Aa.removeListener("unpipe",Da),ib.removeListener("end",M),ib.removeListener("end",
La),ib.removeListener("data",U),ra=!0,!ca.awaitDrain||Aa._writableState&&!Aa._writableState.needDrain||qa())}function M(){ua("onend");Aa.end()}function U(Va){ua("ondata");Va=Aa.write(Va);ua("dest.write",Va);!1===Va&&((1===ca.pipesCount&&ca.pipes===Aa||1<ca.pipesCount&&-1!==C(ca.pipes,Aa))&&!ra&&(ua("false write response, pause",ca.awaitDrain),ca.awaitDrain++),ib.pause())}function aa(Va){ua("onerror",Va);La();Aa.removeListener("error",aa);0===Aa.listeners("error").length&&xa(Aa,Va)}function pa(){Aa.removeListener("finish",
ma);La()}function ma(){ua("onfinish");Aa.removeListener("close",pa);La()}function La(){ua("unpipe");ib.unpipe(Aa)}var ib=this,ca=this._readableState;switch(ca.pipesCount){case 0:ca.pipes=Aa;break;case 1:ca.pipes=[ca.pipes,Aa];break;default:ca.pipes.push(Aa)}ca.pipesCount+=1;ua("pipe count=%d opts=%j",ca.pipesCount,Pa);Pa=Pa&&!1===Pa.end||Aa===D.stdout||Aa===D.stderr?La:M;if(ca.endEmitted)D.nextTick(Pa);else ib.once("end",Pa);Aa.on("unpipe",Da);var qa=e(ib);Aa.on("drain",qa);var ra=!1;ib.on("data",
U);g(Aa,"error",aa);Aa.once("close",pa);Aa.once("finish",ma);Aa.emit("pipe",ib);ca.flowing||(ua("pipe resume"),ib.resume());return Aa};h.prototype.unpipe=function(Aa){var Pa=this._readableState,Da={hasUnpiped:!1};if(0===Pa.pipesCount)return this;if(1===Pa.pipesCount){if(Aa&&Aa!==Pa.pipes)return this;Aa||(Aa=Pa.pipes);Pa.pipes=null;Pa.pipesCount=0;Pa.flowing=!1;Aa&&Aa.emit("unpipe",this,Da);return this}if(!Aa){Aa=Pa.pipes;Da=Pa.pipesCount;Pa.pipes=null;Pa.pipesCount=0;Pa.flowing=!1;for(Pa=0;Pa<Da;Pa++)Aa[Pa].emit("unpipe",
this,{hasUnpiped:!1});return this}var M=C(Pa.pipes,Aa);if(-1===M)return this;Pa.pipes.splice(M,1);--Pa.pipesCount;1===Pa.pipesCount&&(Pa.pipes=Pa.pipes[0]);Aa.emit("unpipe",this,Da);return this};h.prototype.on=function(Aa,Pa){Pa=I.prototype.on.call(this,Aa,Pa);var Da=this._readableState;"data"===Aa?(Da.readableListening=0<this.listenerCount("readable"),!1!==Da.flowing&&this.resume()):"readable"!==Aa||Da.endEmitted||Da.readableListening||(Da.readableListening=Da.needReadable=!0,Da.flowing=!1,Da.emittedReadable=
!1,ua("on readable",Da.length,Da.reading),Da.length?a(this):Da.reading||D.nextTick(p,this));return Pa};h.prototype.addListener=h.prototype.on;h.prototype.removeListener=function(Aa,Pa){Pa=I.prototype.removeListener.call(this,Aa,Pa);"readable"===Aa&&D.nextTick(l,this);return Pa};h.prototype.removeAllListeners=function(Aa){var Pa=I.prototype.removeAllListeners.apply(this,arguments);"readable"!==Aa&&void 0!==Aa||D.nextTick(l,this);return Pa};h.prototype.resume=function(){var Aa=this._readableState;Aa.flowing||
(ua("resume"),Aa.flowing=!Aa.readableListening,Aa.resumeScheduled||(Aa.resumeScheduled=!0,D.nextTick(q,this,Aa)));Aa.paused=!1;return this};h.prototype.pause=function(){ua("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(ua("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};h.prototype.wrap=function(Aa){var Pa=this,Da=this._readableState,M=!1;Aa.on("end",function(){ua("wrapped end");if(Da.decoder&&!Da.ended){var aa=
Da.decoder.end();aa&&aa.length&&Pa.push(aa)}Pa.push(null)});Aa.on("data",function(aa){ua("wrapped data");Da.decoder&&(aa=Da.decoder.write(aa));Da.objectMode&&(null===aa||void 0===aa)||!(Da.objectMode||aa&&aa.length)||Pa.push(aa)||(M=!0,Aa.pause())});for(var U in Aa)void 0===this[U]&&"function"===typeof Aa[U]&&(this[U]=function(aa){return function(){return Aa[aa].apply(Aa,arguments)}}(U));for(U=0;U<na.length;U++)Aa.on(na[U],this.emit.bind(this,na[U]));this._read=function(aa){ua("wrapped _read",aa);
M&&(M=!1,Aa.resume())};return this};"function"===typeof Symbol&&(h.prototype[Symbol.asyncIterator]=function(){void 0===db&&(db=Dba());return db(this)});Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(h.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},
set:function(Aa){this._readableState&&(this._readableState.flowing=Aa)}});h._fromList=w;Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(h.from=function(Aa,Pa){void 0===ub&&(ub=zba());return ub(h,Aa,Pa)});return mN}function TZ(){function g(e,l){var p=this._transformState;p.transforming=!1;var q=p.writecb;if(null===q)return this.emit("error",new a);p.writechunk=null;p.writecb=null;null!=l&&this.push(l);
q(e);e=this._readableState;e.reading=!1;(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);b.call(this,e);this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush));this.on("prefinish",
h)}function h(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(l,p){f(e,l,p)})}function f(e,l,p){if(l)return e.emit("error",l);null!=p&&e.push(p);if(e._writableState.length)throw new k;if(e._transformState.transforming)throw new d;return e.push(null)}if(UZ)return nN;UZ=!0;nN=c;var m=Ww().codes,n=m.ERR_METHOD_NOT_IMPLEMENTED,a=m.ERR_MULTIPLE_CALLBACK,d=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,k=m.ERR_TRANSFORM_WITH_LENGTH_0,b=Xw();bj(c,
b);c.prototype.push=function(e,l){this._transformState.needTransform=!1;return b.prototype.push.call(this,e,l)};c.prototype._transform=function(e,l,p){p(new n("_transform()"))};c.prototype._write=function(e,l,p){var q=this._transformState;q.writecb=p;q.writechunk=e;q.writeencoding=l;q.transforming||(e=this._readableState,(q.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark))};c.prototype._read=function(e){e=this._transformState;null===e.writechunk||e.transforming?
e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))};c.prototype._destroy=function(e,l){b.prototype._destroy.call(this,e,function(p){l(p)})};return nN}function Yw(g,c){if(!((this||lo)instanceof Yw))return new Yw(g,c);c=c||{};VZ.call(this||lo,Fba(c,{objectMode:!0}));(this||lo)._iterator=g;(this||lo)._options=c;this.on("end",(this||lo).destroy.bind(this||lo,null,null))}function WZ(g,c,h){c&&"string"!=typeof c&&(c=c.message||c.name);Gba(this||Pj,{type:g,
name:g,cause:"string"!=typeof c?c:h,message:c},"ewr")}function oN(g,c){Error.call(this||Pj);Error.captureStackTrace&&Error.captureStackTrace(this||Pj,(this||Pj).constructor);WZ.call(this||Pj,"CustomError",g,c)}function Hba(g,c,h){var f=function(m,n){WZ.call(this||Pj,c,m,n);"FilesystemError"==c&&((this||Pj).code=(this||Pj).cause.code,(this||Pj).path=(this||Pj).cause.path,(this||Pj).errno=(this||Pj).cause.errno,(this||Pj).message=(g.errno[(this||Pj).cause.errno]?g.errno[(this||Pj).cause.errno].description:
(this||Pj).cause.message)+((this||Pj).cause.path?" ["+(this||Pj).cause.path+"]":""));Error.call(this||Pj);Error.captureStackTrace&&Error.captureStackTrace(this||Pj,f)};f.prototype=h?new h:new oN;return f}function Sz(g){(this||Qj).db=(this||Qj)._levelup=g;(this||Qj).batch=g.db.batch();(this||Qj).ops=[];(this||Qj).length=0}function XZ(g,c){if(null==g)throw new TypeError("Cannot convert first argument to object");for(var h=Object(g),f=1;f<arguments.length;f++){var m=arguments[f];if(null!=m)for(var n=
Object.keys(Object(m)),a=0,d=n.length;a<d;a++){var k=n[a],b=Object.getOwnPropertyDescriptor(m,k);void 0!==b&&b.enumerable&&(h[k]=m[k])}}return h}function YZ(){function g(k){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(k)}function c(k){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(k)}
function h(k,b){return(h=Object.setPrototypeOf||function(e,l){return e.__proto__=l,e})(k,b)}function f(k,b,e){e||(e=Error);e=function(l){function p(q,u,w){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");!0;q=c(p).call(this,"string"==typeof b?b:b(q,u,w));if(!q||"object"!==g(q)&&"function"!=typeof q){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");q=this}return q.code=k,q}return!function(q,u){if("function"!=typeof u&&
null!==u)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(u&&u.prototype,{constructor:{value:q,writable:!0,configurable:!0}});u&&h(q,u)}(p,l),p}(e);d[k]=e}function m(k,b){if(Array.isArray(k)){var e=k.length;return k=k.map(function(l){return String(l)}),2<e?"one of ".concat(b," ").concat(k.slice(0,e-1).join(", "),", or ")+k[e-1]:2===e?"one of ".concat(b," ").concat(k[0]," or ").concat(k[1]):"of ".concat(b," ").concat(k[0])}return"of ".concat(b," ").concat(String(k))}
if(ZZ)return pN;ZZ=!0;var n,a,d={};return f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",function(k,b,e){var l;if(void 0===n&&(n=qN()),n("string"==typeof k,"'name' must be a string"),"string"==typeof b&&"not "===b.substr(0,4)?(l="must not be",b=b.replace(/^not /,"")):l="must be",function(q,u,w){return(void 0===w||w>q.length)&&(w=q.length),q.substring(w-u.length,w)===u}(k," argument"))k="The ".concat(k," ").concat(l," ").concat(m(b,"type"));else{var p=
function(q,u,w){return"number"!=typeof w&&(w=0),!(w+u.length>q.length)&&-1!==q.indexOf(u,w)}(k,".")?"property":"argument";k='The "'.concat(k,'" ').concat(p," ").concat(l," ").concat(m(b,"type"))}return k+=". Received type ".concat(g(e))},TypeError),f("ERR_INVALID_ARG_VALUE",function(k,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=Eg);var l=a.inspect(b);return 128<l.length&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(k,"' ").concat(e,". Received ").concat(l)},
TypeError),f("ERR_INVALID_RETURN_VALUE",function(k,b,e){var l;return l=e&&e.constructor&&e.constructor.name?"instance of ".concat(e.constructor.name):"type ".concat(g(e)),"Expected ".concat(k,' to be returned from the "').concat(b,'"')+" function but got ".concat(l,".")},TypeError),f("ERR_MISSING_ARGS",function(){for(var k=arguments.length,b=Array(k),e=0;e<k;e++)b[e]=arguments[e];void 0===n&&(n=qN());n(0<b.length,"At least one arg needs to be specified");k="The ";e=b.length;switch(b=b.map(function(l){return'"'.concat(l,
'"')}),e){case 1:k+="".concat(b[0]," argument");break;case 2:k+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:k+=b.slice(0,e-1).join(", "),k+=", and ".concat(b[e-1]," arguments")}return"".concat(k," must be specified")},TypeError),pN.codes=d,pN}function Iba(){function g(I,S){for(var V=0;V<S.length;V++){var ba=S[V];ba.enumerable=ba.enumerable||!1;ba.configurable=!0;"value"in ba&&(ba.writable=!0);Object.defineProperty(I,ba.key,ba)}}function c(I,S){return!S||"object"!==k(S)&&"function"!=
typeof S?h(I):S}function h(I){if(void 0===I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function f(I){var S="function"==typeof Map?new Map:void 0;return(f=function(V){function ba(){return n(V,arguments,d(this).constructor)}if(null===V||(ua=V,-1===Function.toString.call(ua).indexOf("[native code]")))return V;var ua;if("function"!=typeof V)throw new TypeError("Super expression must either be null or a function");if(void 0!==S){if(S.has(V))return S.get(V);
S.set(V,ba)}return ba.prototype=Object.create(V.prototype,{constructor:{value:ba,enumerable:!1,writable:!0,configurable:!0}}),a(ba,V)})(I)}function m(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(I){return!1}}function n(I,S,V){return(n=m()?Reflect.construct:function(ba,ua,Fa){var F=[null];F.push.apply(F,ua);ba=new (Function.bind.apply(ba,
F));return Fa&&a(ba,Fa.prototype),ba}).apply(null,arguments)}function a(I,S){return(a=Object.setPrototypeOf||function(V,ba){return V.__proto__=ba,V})(I,S)}function d(I){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(I)}function k(I){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(I)}
function b(I,S,V){return(void 0===V||V>I.length)&&(V=I.length),I.substring(V-S.length,V)===S}function e(I){var S=Object.keys(I),V=Object.create(Object.getPrototypeOf(I));return S.forEach(function(ba){V[ba]=I[ba]}),Object.defineProperty(V,"message",{value:I.message}),V}function l(I){return u(I,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function p(I,S,V){var ba="",ua="",Fa=0,F="",Y=!1,Q=l(I),W=Q.split("\n"),ka=l(S).split("\n"),
ea=0,la="";if("strictEqual"===V&&"object"===k(I)&&"object"===k(S)&&null!==I&&null!==S&&(V="strictEqualObject"),1===W.length&&1===ka.length&&W[0]!==ka[0]){var db=W[0].length+ka[0].length;if(10>=db){if(!("object"===k(I)&&null!==I||"object"===k(S)&&null!==S||0===I&&0===S))return"".concat(L[V],"\n\n")+"".concat(W[0]," !== ").concat(ka[0],"\n")}else if("strictEqualObject"!==V&&db<(q.stderr&&q.stderr.isTTY?q.stderr.columns:80)){for(;W[0][ea]===ka[0][ea];)ea++;2<ea&&(la="\n  ".concat(function(Aa,Pa){if(Pa=
Math.floor(Pa),0==Aa.length||0==Pa)return"";var Da=Aa.length*Pa;for(Pa=Math.floor(Math.log(Pa)/Math.log(2));Pa;)Aa+=Aa,Pa--;return Aa+Aa.substring(0,Da-Aa.length)}(" ",ea),"^"),ea=0)}}I=W[W.length-1];for(S=ka[ka.length-1];I===S&&(2>ea++?F="\n  ".concat(I).concat(F):ba=I,W.pop(),ka.pop(),0!==W.length&&0!==ka.length);)I=W[W.length-1],S=ka[ka.length-1];I=Math.max(W.length,ka.length);if(0===I){ba=Q.split("\n");if(30<ba.length)for(ba[26]="".concat(y,"...").concat(D);27<ba.length;)ba.pop();return"".concat(L.notIdentical,
"\n\n").concat(ba.join("\n"),"\n")}3<ea&&(F="\n".concat(y,"...").concat(D).concat(F),Y=!0);""!==ba&&(F="\n  ".concat(ba).concat(F),ba="");Q=0;V=L[V]+"\n".concat(A,"+ actual").concat(D," ").concat(C,"- expected").concat(D);S=" ".concat(y,"...").concat(D," Lines skipped");for(ea=0;ea<I;ea++){db=ea-Fa;if(W.length<ea+1)1<db&&2<ea&&(4<db?(ua+="\n".concat(y,"...").concat(D),Y=!0):3<db&&(ua+="\n  ".concat(ka[ea-2]),Q++),ua+="\n  ".concat(ka[ea-1]),Q++),Fa=ea,ba+="\n".concat(C,"-").concat(D," ").concat(ka[ea]),
Q++;else if(ka.length<ea+1)1<db&&2<ea&&(4<db?(ua+="\n".concat(y,"...").concat(D),Y=!0):3<db&&(ua+="\n  ".concat(W[ea-2]),Q++),ua+="\n  ".concat(W[ea-1]),Q++),Fa=ea,ua+="\n".concat(A,"+").concat(D," ").concat(W[ea]),Q++;else{var ub=ka[ea],xa=W[ea],na=xa!==ub&&(!b(xa,",")||xa.slice(0,-1)!==ub);na&&b(ub,",")&&ub.slice(0,-1)===xa&&(na=!1,xa+=",");na?(1<db&&2<ea&&(4<db?(ua+="\n".concat(y,"...").concat(D),Y=!0):3<db&&(ua+="\n  ".concat(W[ea-2]),Q++),ua+="\n  ".concat(W[ea-1]),Q++),Fa=ea,ua+="\n".concat(A,
"+").concat(D," ").concat(xa),ba+="\n".concat(C,"-").concat(D," ").concat(ub),Q+=2):(ua+=ba,ba="",1!==db&&0!==ea||(ua+="\n  ".concat(xa),Q++))}if(20<Q&&ea<I-2)return"".concat(V).concat(S,"\n").concat(ua,"\n").concat(y,"...").concat(D).concat(ba,"\n")+"".concat(y,"...").concat(D)}return"".concat(V).concat(Y?S:"","\n").concat(ua).concat(ba).concat(F).concat(la)}if($Z)return a_;$Z=!0;var q=yh,u=Eg.inspect,w=YZ().codes.ERR_INVALID_ARG_TYPE,y="",A="",C="",D="",L={deepStrictEqual:"Expected values to be strictly deep-equal:",
strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',
notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return a_=function(I){function S(ba){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==k(ba)||null===ba)throw new w("options","Object",ba);var ua=ba.message,Fa=ba.operator,F=ba.stackStartFn,Y=ba.actual;ba=ba.expected;var Q=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=ua)var W=c(this,d(S).call(this,String(ua)));else if(q.stderr&&
q.stderr.isTTY&&(q.stderr&&q.stderr.getColorDepth&&1!==q.stderr.getColorDepth()?(y="\u001b[34m",A="\u001b[32m",D="\u001b[39m",C="\u001b[31m"):(y="",A="",D="",C="")),"object"===k(Y)&&null!==Y&&"object"===k(ba)&&null!==ba&&"stack"in Y&&Y instanceof Error&&"stack"in ba&&ba instanceof Error&&(Y=e(Y),ba=e(ba)),"deepStrictEqual"===Fa||"strictEqual"===Fa)W=c(this,d(S).call(this,p(Y,ba,Fa)));else if("notDeepStrictEqual"===Fa||"notStrictEqual"===Fa){W=L[Fa];var ka=l(Y).split("\n");if("notStrictEqual"===Fa&&
"object"===k(Y)&&null!==Y&&(W=L.notStrictEqualObject),30<ka.length)for(ka[26]="".concat(y,"...").concat(D);27<ka.length;)ka.pop();W=1===ka.length?c(this,d(S).call(this,"".concat(W," ").concat(ka[0]))):c(this,d(S).call(this,"".concat(W,"\n\n").concat(ka.join("\n"),"\n")))}else{W=l(Y);ka="";var ea=L[Fa];"notDeepEqual"===Fa||"notEqual"===Fa?1024<(W="".concat(L[Fa],"\n\n").concat(W)).length&&(W="".concat(W.slice(0,1021),"...")):(ka="".concat(l(ba)),512<W.length&&(W="".concat(W.slice(0,509),"...")),512<
ka.length&&(ka="".concat(ka.slice(0,509),"...")),"deepEqual"===Fa||"equal"===Fa?W="".concat(ea,"\n\n").concat(W,"\n\nshould equal\n\n"):ka=" ".concat(Fa," ").concat(ka));W=c(this,d(S).call(this,"".concat(W).concat(ka)))}return Error.stackTraceLimit=Q,W.generatedMessage=!ua,Object.defineProperty(h(W),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),W.code="ERR_ASSERTION",W.actual=Y,W.expected=ba,W.operator=Fa,Error.captureStackTrace&&Error.captureStackTrace(h(W),
F),W.stack,W.name="AssertionError",c(W)}var V;return!function(ba,ua){if("function"!=typeof ua&&null!==ua)throw new TypeError("Super expression must either be null or a function");ba.prototype=Object.create(ua&&ua.prototype,{constructor:{value:ba,writable:!0,configurable:!0}});ua&&a(ba,ua)}(S,I),V=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:u.custom,value:function(ba,ua){return u(this,function(Fa){for(var F=1;F<arguments.length;F++){var Y=
null!=arguments[F]?arguments[F]:{},Q=Object.keys(Y);"function"==typeof Object.getOwnPropertySymbols&&(Q=Q.concat(Object.getOwnPropertySymbols(Y).filter(function(W){return Object.getOwnPropertyDescriptor(Y,W).enumerable})));Q.forEach(function(W){var ka=Y[W];W in Fa?Object.defineProperty(Fa,W,{value:ka,enumerable:!0,configurable:!0,writable:!0}):Fa[W]=ka})}return Fa}({},ua,{customInspect:!1,depth:0}))}}],g(S.prototype,V),S}(f(Error))}function b_(g,c){if(!(g=function(h){if(Array.isArray(h))return h}(g)||
function(h,f){var m=[],n=!0,a=!1,d=void 0;try{for(var k,b=h[Symbol.iterator]();!(n=(k=b.next()).done)&&(m.push(k.value),!f||m.length!==f);n=!0);}catch(e){a=!0,d=e}finally{try{n||null==b.return||b.return()}finally{if(a)throw d;}}return m}(g,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}function mo(g){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===
Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function rN(g){return g.call.bind(g)}function Jba(g){if(0===g.length||10<g.length)return!0;for(var c=0;c<g.length;c++){var h=g.charCodeAt(c);if(48>h||57<h)return!0}return 10===g.length&&g>=Math.pow(2,32)}function fF(g){return Object.keys(g).filter(Jba).concat(gF(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}function c_(g,c){if(g===c)return 0;for(var h=g.length,f=c.length,m=0,n=Math.min(h,f);m<n;++m)if(g[m]!==c[m]){h=g[m];f=c[m];break}return h<
f?-1:f<h?1:0}function qn(g,c,h,f){if(g===c)return 0!==g||!h||d_(g,c);if(h){if("object"!==mo(g))return"number"==typeof g&&sN(g)&&sN(c);if("object"!==mo(c)||null===g||null===c||Object.getPrototypeOf(g)!==Object.getPrototypeOf(c))return!1}else{if(null===g||"object"!==mo(g))return(null===c||"object"!==mo(c))&&g==c;if(null===c||"object"!==mo(c))return!1}var m=e_(g);if(m!==e_(c))return!1;if(Array.isArray(g)){if(g.length!==c.length)return!1;m=fF(g);var n=fF(c);return m.length===n.length&&Tz(g,c,h,f,1,m)}if("[object Object]"===
m&&(!hF(g)&&hF(c)||!iF(g)&&iF(c)))return!1;if(f_(g)){if(!f_(c)||Date.prototype.getTime.call(g)!==Date.prototype.getTime.call(c))return!1}else if(g_(g)){if(!g_(c)||(Kba?g.source!==c.source||g.flags!==c.flags:RegExp.prototype.toString.call(g)!==RegExp.prototype.toString.call(c)))return!1}else if(Lba(g)||g instanceof Error){if(g.message!==c.message||g.name!==c.name)return!1}else{if(Mba(g)){if(h||!Nba(g)&&!Oba(g)){if(!function(a,d){return a.byteLength===d.byteLength&&0===c_(new Uint8Array(a.buffer,a.byteOffset,
a.byteLength),new Uint8Array(d.buffer,d.byteOffset,d.byteLength))}(g,c))return!1}else if(!function(a,d){if(a.byteLength!==d.byteLength)return!1;for(var k=0;k<a.byteLength;k++)if(a[k]!==d[k])return!1;return!0}(g,c))return!1;m=fF(g);n=fF(c);return m.length===n.length&&Tz(g,c,h,f,0,m)}if(iF(g))return!(!iF(c)||g.size!==c.size)&&Tz(g,c,h,f,2);if(hF(g))return!(!hF(c)||g.size!==c.size)&&Tz(g,c,h,f,3);if(Pba(g)){if(g.byteLength!==c.byteLength||0!==c_(new Uint8Array(g),new Uint8Array(c)))return!1}else if(Qba(g)&&
!function(a,d){return h_(a)?h_(d)&&d_(Number.prototype.valueOf.call(a),Number.prototype.valueOf.call(d)):i_(a)?i_(d)&&String.prototype.valueOf.call(a)===String.prototype.valueOf.call(d):j_(a)?j_(d)&&Boolean.prototype.valueOf.call(a)===Boolean.prototype.valueOf.call(d):k_(a)?k_(d)&&BigInt.prototype.valueOf.call(a)===BigInt.prototype.valueOf.call(d):Rba(d)&&Symbol.prototype.valueOf.call(a)===Symbol.prototype.valueOf.call(d)}(g,c))return!1}return Tz(g,c,h,f,0)}function l_(g,c){return c.filter(function(h){return jF(g,
h)})}function Tz(g,c,h,f,m,n){if(5===arguments.length){n=Object.keys(g);var a=Object.keys(c);if(n.length!==a.length)return!1}for(var d=0;d<n.length;d++)if(!Uz(c,n[d]))return!1;if(h&&5===arguments.length)if(a=gF(g),0!==a.length){var k=0;for(d=0;d<a.length;d++){var b=a[d];if(jF(g,b)){if(!jF(c,b))return!1;n.push(b);k++}else if(jF(c,b))return!1}d=gF(c);if(a.length!==d.length&&l_(c,d).length!==k)return!1}else if(a=gF(c),0!==a.length&&0!==l_(c,a).length)return!1;if(0===n.length&&(0===m||1===m&&0===g.length||
0===g.size))return!0;if(void 0===f)f={val1:new Map,val2:new Map,position:0};else{a=f.val1.get(g);if(void 0!==a&&(k=f.val2.get(c),void 0!==k))return a===k;f.position++}f.val1.set(g,f.position);f.val2.set(c,f.position);a=Sba(g,c,h,n,f,m);return f.val1.delete(g),f.val2.delete(c),a}function m_(g,c,h,f){for(var m=kF(g),n=0;n<m.length;n++){var a=m[n];if(qn(c,a,h,f))return g.delete(a),!0}return!1}function n_(g){switch(mo(g)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":g=
+g;case "number":if(sN(g))return!1}return!0}function o_(g,c,h,f,m,n){for(var a=kF(g),d=0;d<a.length;d++){var k=a[d];if(qn(h,k,m,n)&&qn(f,c.get(k),m,n))return g.delete(k),!0}return!1}function Sba(g,c,h,f,m,n){var a=0;if(2===n){if(!function(d,k,b,e){for(var l=null,p=kF(d),q=0;q<p.length;q++){var u=p[q];if("object"===mo(u)&&null!==u)null===l&&(l=new Set),l.add(u);else if(!k.has(u)){if(b)return!1;var w=d,y=k,A=n_(u);if(null!=A?!A:!y.has(A)||w.has(A))return!1;null===l&&(l=new Set);l.add(u)}}if(null!==
l){k=kF(k);for(p=0;p<k.length;p++)if(q=k[p],"object"===mo(q)&&null!==q){if(!m_(l,q,b,e))return!1}else if(!b&&!d.has(q)&&!m_(l,q,b,e))return!1;return 0===l.size}return!0}(g,c,h,m))return!1}else if(3===n){if(!function(d,k,b,e){for(var l=null,p=p_(d),q=0;q<p.length;q++){var u=b_(p[q],2),w=u[0],y=u[1];if("object"===mo(w)&&null!==w)null===l&&(l=new Set),l.add(w);else if(u=k.get(w),void 0===u&&!k.has(w)||!qn(y,u,b,e)){if(b)return!1;u=d;var A=k,C=e,D=n_(w);if(null!=D)u=D;else{var L=A.get(D);u=!(void 0===
L&&!A.has(D)||!qn(y,L,!1,C))&&!u.has(D)&&qn(y,L,!1,C)}if(!u)return!1;null===l&&(l=new Set);l.add(w)}}if(null!==l){k=p_(k);for(p=0;p<k.length;p++)if(q=b_(k[p],2),q=(w=q[0],q[1]),"object"===mo(w)&&null!==w){if(!o_(l,d,w,q,b,e))return!1}else if(!(b||d.has(w)&&qn(d.get(w),q,!1,e)||o_(l,d,w,q,!1,e)))return!1;return 0===l.size}return!0}(g,c,h,m))return!1}else if(1===n)for(;a<g.length;a++){if(!Uz(g,a)){if(Uz(c,a))return!1;for(f=Object.keys(g);a<f.length;a++)if(n=f[a],!Uz(c,n)||!qn(g[n],c[n],h,m))return!1;
return f.length===Object.keys(c).length}if(!Uz(c,a)||!qn(g[a],c[a],h,m))return!1}for(a=0;a<f.length;a++)if(n=f[a],!qn(g[n],c[n],h,m))return!1;return!0}function qN(){function g(W){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ka){return typeof ka}:function(ka){return ka&&"function"==typeof Symbol&&ka.constructor===Symbol&&ka!==Symbol.prototype?"symbol":typeof ka})(W)}function c(){q=q_.isDeepEqual;u=q_.isDeepStrictEqual}function h(W){if(W.message instanceof Error)throw W.message;
throw new I(W);}function f(W,ka,ea,la){if(!ea){var db=!1;if(0===ka)db=!0,la="No value argument passed to `assert.ok()`";else if(la instanceof Error)throw la;W=new I({actual:ea,expected:!0,message:la,operator:"==",stackStartFn:W});throw W.generatedMessage=db,W;}}function m(){for(var W=arguments.length,ka=Array(W),ea=0;ea<W;ea++)ka[ea]=arguments[ea];f.apply(void 0,[m,ka.length].concat(ka))}function n(W,ka,ea,la){if("function"!=typeof ka){if(ba(ka))return ka.test(W);if(2===arguments.length)throw new A("expected",
["Function","RegExp"],ka);if("object"!==g(W)||null===W){var db=new I({actual:W,expected:ka,message:ea,operator:"deepStrictEqual",stackStartFn:la});throw db.operator=la.name,db;}var ub=Object.keys(ka);if(ka instanceof Error)ub.push("name","message");else if(0===ub.length)throw new C("error",ka,"may not be an empty object");return void 0===q&&c(),ub.forEach(function(xa){if(!("string"==typeof W[xa]&&ba(ka[xa])&&ka[xa].test(W[xa])||xa in W&&u(W[xa],ka[xa]))){if(!ea){xa=new Q(W,ub);var na=new Q(ka,ub,
W);xa=new I({actual:xa,expected:na,operator:"deepStrictEqual",stackStartFn:la});throw xa.actual=W,xa.expected=ka,xa.operator=la.name,xa;}h({actual:W,expected:ka,message:ea,operator:la.name,stackStartFn:la})}}),!0}return void 0!==ka.prototype&&W instanceof ka||!Error.isPrototypeOf(ka)&&!0===ka.call({},W)}function a(W){if("function"!=typeof W)throw new A("fn","Function",W);try{W()}catch(ka){return ka}return Y}function d(W){return V(W)||null!==W&&"object"===g(W)&&"function"==typeof W.then&&"function"==
typeof W.catch}function k(W){return Promise.resolve().then(function(){var ka;if("function"==typeof W){if(!d(ka=W()))throw new D("instance of Promise","promiseFn",ka);}else{if(!d(W))throw new A("promiseFn",["Function","Promise"],W);ka=W}return Promise.resolve().then(function(){return ka}).then(function(){return Y}).catch(function(ea){return ea})})}function b(W,ka,ea,la){if("string"==typeof ea){if(4===arguments.length)throw new A("error",["Object","Error","Function","RegExp"],ea);if("object"===g(ka)&&
null!==ka){if(ka.message===ea)throw new y("error/message",'The error message "'.concat(ka.message,'" is identical to the message.'));}else if(ka===ea)throw new y("error/message",'The error "'.concat(ka,'" is identical to the message.'));la=ea;ea=void 0}else if(null!=ea&&"object"!==g(ea)&&"function"!=typeof ea)throw new A("error",["Object","Error","Function","RegExp"],ea);if(ka===Y){var db="";ea&&ea.name&&(db+=" (".concat(ea.name,")"));db+=la?": ".concat(la):".";h({actual:void 0,expected:ea,operator:W.name,
message:"Missing expected ".concat("rejects"===W.name?"rejection":"exception").concat(db),stackStartFn:W})}if(ea&&!n(ka,ea,la,W))throw ka;}function e(W,ka,ea,la){if(ka!==Y){if("string"==typeof ea&&(la=ea,ea=void 0),!ea||n(ka,ea))la=la?": ".concat(la):".",h({actual:ka,expected:ea,operator:W.name,message:"Got unwanted ".concat("doesNotReject"===W.name?"rejection":"exception").concat(la,"\n")+'Actual message: "'.concat(ka&&ka.message,'"'),stackStartFn:W});throw ka;}}function l(){for(var W=arguments.length,
ka=Array(W),ea=0;ea<W;ea++)ka[ea]=arguments[ea];f.apply(void 0,[l,ka.length].concat(ka))}if(r_)return tN;r_=!0;var p=yh,q,u,w=YZ().codes,y=w.ERR_AMBIGUOUS_ARGUMENT,A=w.ERR_INVALID_ARG_TYPE,C=w.ERR_INVALID_ARG_VALUE,D=w.ERR_INVALID_RETURN_VALUE,L=w.ERR_MISSING_ARGS,I=Iba(),S=Eg.inspect;w=Eg.types;var V=w.isPromise,ba=w.isRegExp;w=Object.assign?Object.assign:Tba.assign;var ua=Object.is?Object.is:s_,Fa=!1,F=tN=m,Y={};F.fail=function xa(ka,ea,la,db,ub){var na=arguments.length;if(0===na)var Aa="Failed";
else 1===na?(la=ka,ka=void 0):(!1===Fa&&(Fa=!0,(p.emitWarning?p.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===na&&(db="!="));if(la instanceof Error)throw la;na={actual:ka,expected:ea,operator:void 0===db?"fail":db,stackStartFn:ub||xa};void 0!==la&&(na.message=la);na=new I(na);throw Aa&&(na.message=Aa,na.generatedMessage=!0),na;};F.AssertionError=
I;F.ok=m;F.equal=function ub(ea,la,db){if(2>arguments.length)throw new L("actual","expected");ea!=la&&h({actual:ea,expected:la,message:db,operator:"==",stackStartFn:ub})};F.notEqual=function xa(la,db,ub){if(2>arguments.length)throw new L("actual","expected");la==db&&h({actual:la,expected:db,message:ub,operator:"!=",stackStartFn:xa})};F.deepEqual=function na(db,ub,xa){if(2>arguments.length)throw new L("actual","expected");void 0===q&&c();q(db,ub)||h({actual:db,expected:ub,message:xa,operator:"deepEqual",
stackStartFn:na})};F.notDeepEqual=function Aa(ub,xa,na){if(2>arguments.length)throw new L("actual","expected");void 0===q&&c();q(ub,xa)&&h({actual:ub,expected:xa,message:na,operator:"notDeepEqual",stackStartFn:Aa})};F.deepStrictEqual=function Pa(xa,na,Aa){if(2>arguments.length)throw new L("actual","expected");void 0===q&&c();u(xa,na)||h({actual:xa,expected:na,message:Aa,operator:"deepStrictEqual",stackStartFn:Pa})};F.notDeepStrictEqual=function Da(na,Aa,Pa){if(2>arguments.length)throw new L("actual",
"expected");void 0===q&&c();u(na,Aa)&&h({actual:na,expected:Aa,message:Pa,operator:"notDeepStrictEqual",stackStartFn:Da})};F.strictEqual=function M(Aa,Pa,Da){if(2>arguments.length)throw new L("actual","expected");ua(Aa,Pa)||h({actual:Aa,expected:Pa,message:Da,operator:"strictEqual",stackStartFn:M})};F.notStrictEqual=function U(Pa,Da,M){if(2>arguments.length)throw new L("actual","expected");ua(Pa,Da)&&h({actual:Pa,expected:Da,message:M,operator:"notStrictEqual",stackStartFn:U})};var Q=function aa(Da,
M,U){var pa=this;if(!(this instanceof aa))throw new TypeError("Cannot call a class as a function");!0;M.forEach(function(ma){ma in Da&&(void 0!==U&&"string"==typeof U[ma]&&ba(Da[ma])&&Da[ma].test(U[ma])?pa[ma]=U[ma]:pa[ma]=Da[ma])})};return F.throws=function U(M){for(var aa=arguments.length,pa=Array(1<aa?aa-1:0),ma=1;ma<aa;ma++)pa[ma-1]=arguments[ma];b.apply(void 0,[U,a(M)].concat(pa))},F.rejects=function aa(U){for(var pa=arguments.length,ma=Array(1<pa?pa-1:0),La=1;La<pa;La++)ma[La-1]=arguments[La];
return k(U).then(function(ib){return b.apply(void 0,[aa,ib].concat(ma))})},F.doesNotThrow=function pa(aa){for(var ma=arguments.length,La=Array(1<ma?ma-1:0),ib=1;ib<ma;ib++)La[ib-1]=arguments[ib];e.apply(void 0,[pa,a(aa)].concat(La))},F.doesNotReject=function ma(pa){for(var La=arguments.length,ib=Array(1<La?La-1:0),ca=1;ca<La;ca++)ib[ca-1]=arguments[ca];return k(pa).then(function(qa){return e.apply(void 0,[ma,qa].concat(ib))})},F.ifError=function La(ma){if(null!=ma){var ib="ifError got unwanted exception: ";
"object"===g(ma)&&"string"==typeof ma.message?0===ma.message.length&&ma.constructor?ib+=ma.constructor.name:ib+=ma.message:ib+=S(ma);ib=new I({actual:ma,expected:null,operator:"ifError",message:ib,stackStartFn:La});ma=ma.stack;if("string"==typeof ma){ma=ma.split("\n");ma.shift();for(var ca=ib.stack.split("\n"),qa=0;qa<ma.length;qa++){var ra=ca.indexOf(ma[qa]);if(-1!==ra){ca=ca.slice(0,ra);break}}ib.stack="".concat(ca.join("\n"),"\n").concat(ma.join("\n"))}throw ib;}},F.strict=w(l,F,{equal:F.strictEqual,
deepEqual:F.deepStrictEqual,notEqual:F.notStrictEqual,notDeepEqual:F.notDeepStrictEqual}),F.strict.strict=F.strict,tN}function Oi(g,c,h){if(!((this||bh)instanceof Oi))return new Oi(g,c,h);var f=this||bh;lF.call(this||bh);this.setMaxListeners(Infinity);"function"===typeof c&&(h=c,c={});c=c||{};if(!g||"object"!==typeof g){g=new Uba("First argument must be an abstract-leveldown compliant store");if("function"===typeof h)return mF.nextTick(h,g);throw g;}Vba.strictEqual(typeof g.status,"string",".status required, old abstract-leveldown");
(this||bh).options=Zw(c);(this||bh)._db=g;(this||bh).db=new t_(g);this.open(h||function(m){m&&f.emit("error",m)});(this||bh).supports=Wba((this||bh).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||bh).supports.additionalMethods).forEach(function(m){null==(this||bh)[m]&&((this||bh)[m]=function(){return(this||bh).db[m].apply((this||bh).db,arguments)})},this||bh)}function Vz(g,c){if(!g._isOpening()&&!g.isOpen())return mF.nextTick(c,new u_("Database is not open")),
!0}function kp(g,c){return Object.hasOwnProperty.call(g,c)&&c}function Xba(g){return g}function nF(g){return g}function uN(g){return void 0===g||null===g||vN.isBuffer(g)}function Gl(g){if(!((this||vq)instanceof Gl))return new Gl(g);(this||vq).opts=g||{};(this||vq).encodings=wN}function Yba(g){return g.toString((this||Df).encoding)}function Zba(g){(this||Df).charReceived=g.length%2;(this||Df).charLength=(this||Df).charReceived?2:0}function $ba(g){(this||Df).charReceived=g.length%3;(this||Df).charLength=
(this||Df).charReceived?3:0}function v_(){function g(A,C,D){(this||ch).chunk=A;(this||ch).encoding=C;(this||ch).callback=D}function c(A,C){var D=$w();A=A||{};var L=A.highWaterMark,I=A.objectMode?16:16384;(this||ch).highWaterMark=L||0===L?L:I;(this||ch).objectMode=!!A.objectMode;C instanceof D&&((this||ch).objectMode=(this||ch).objectMode||!!A.writableObjectMode);(this||ch).highWaterMark=~~(this||ch).highWaterMark;(this||ch).needDrain=!1;(this||ch).ending=!1;(this||ch).ended=!1;(this||ch).finished=
!1;(this||ch).decodeStrings=!1!==A.decodeStrings;(this||ch).defaultEncoding=A.defaultEncoding||"utf8";(this||ch).length=0;(this||ch).writing=!1;(this||ch).corked=0;(this||ch).sync=!0;(this||ch).bufferProcessing=!1;(this||ch).onwrite=function(S){b(C,S)};(this||ch).writecb=null;(this||ch).writelen=0;(this||ch).buffer=[];(this||ch).pendingcb=0;(this||ch).prefinished=!1;(this||ch).errorEmitted=!1}function h(A){var C=$w();if(!((this||ch)instanceof h||(this||ch)instanceof C))return new h(A);(this||ch)._writableState=
new c(A,this||ch);(this||ch).writable=!0;y.call(this||ch)}function f(A,C,D){var L=Error("write after end");A.emit("error",L);q.nextTick(function(){D(L)})}function m(A,C,D,L){var I=!0;if(!(w.isBuffer(D)||w.isString(D)||w.isNullOrUndefined(D)||C.objectMode)){var S=new TypeError("Invalid non-string/buffer chunk");A.emit("error",S);q.nextTick(function(){L(S)});I=!1}return I}function n(A,C,D,L,I){var S=L;!C.objectMode&&!1!==C.decodeStrings&&w.isString(D)&&(D=new u(D,S));w.isBuffer(D)&&(L="buffer");S=C.objectMode?
1:D.length;C.length+=S;var V=C.length<C.highWaterMark;V||(C.needDrain=!0);C.writing||C.corked?C.buffer.push(new g(D,L,I)):a(A,C,!1,S,D,L,I);return V}function a(A,C,D,L,I,S,V){C.writelen=L;C.writecb=V;C.writing=!0;C.sync=!0;D?A._writev(I,C.onwrite):A._write(I,S,C.onwrite);C.sync=!1}function d(A,C,D,L,I){D?q.nextTick(function(){C.pendingcb--;I(L)}):(C.pendingcb--,I(L));A._writableState.errorEmitted=!0;A.emit("error",L)}function k(A){A.writing=!1;A.writecb=null;A.length-=A.writelen;A.writelen=0}function b(A,
C){var D=A._writableState,L=D.sync,I=D.writecb;k(D);if(C)d(A,D,L,C,I);else{var S=D.ending&&0===D.length&&!D.finished&&!D.writing;S||D.corked||D.bufferProcessing||!D.buffer.length||l(A,D);L?q.nextTick(function(){e(A,D,S,I)}):e(A,D,S,I)}}function e(A,C,D,L){!D&&0===C.length&&C.needDrain&&(C.needDrain=!1,A.emit("drain"));C.pendingcb--;L();p(A,C)}function l(A,C){C.bufferProcessing=!0;if(A._writev&&1<C.buffer.length){for(var D=[],L=0;L<C.buffer.length;L++)D.push(C.buffer[L].callback);C.pendingcb++;a(A,
C,!0,C.length,C.buffer,"",function(V){for(var ba=0;ba<D.length;ba++)C.pendingcb--,D[ba](V)});C.buffer=[]}else{for(L=0;L<C.buffer.length;L++){var I=C.buffer[L],S=I.chunk;a(A,C,!1,C.objectMode?1:S.length,S,I.encoding,I.callback);if(C.writing){L++;break}}L<C.buffer.length?C.buffer=C.buffer.slice(L):C.buffer.length=0}C.bufferProcessing=!1}function p(A,C){var D=C.ending&&0===C.length&&!C.finished&&!C.writing;D&&(0===C.pendingcb?(C.prefinished||(C.prefinished=!0,A.emit("prefinish")),C.finished=!0,A.emit("finish")):
C.prefinished||(C.prefinished=!0,A.emit("prefinish")));return D}if(w_)return xN;w_=!0;var q=yh;xN=h;var u=Ng.Buffer;h.WritableState=c;var w=Rj;w.inherits=bj;var y=gu;w.inherits(h,y);h.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};h.prototype.write=function(A,C,D){var L=(this||ch)._writableState,I=!1;w.isFunction(C)&&(D=C,C=null);w.isBuffer(A)?C="buffer":C||(C=L.defaultEncoding);w.isFunction(D)||(D=function(){});L.ended?f(this||ch,L,D):m(this||ch,L,A,D)&&(L.pendingcb++,
I=n(this||ch,L,A,C,D));return I};h.prototype.cork=function(){(this||ch)._writableState.corked++};h.prototype.uncork=function(){var A=(this||ch)._writableState;A.corked&&(A.corked--,A.writing||A.corked||A.finished||A.bufferProcessing||!A.buffer.length||l(this||ch,A))};h.prototype._write=function(A,C,D){D(Error("not implemented"))};h.prototype._writev=null;h.prototype.end=function(A,C,D){var L=(this||ch)._writableState;w.isFunction(A)?(D=A,C=A=null):w.isFunction(C)&&(D=C,C=null);w.isNullOrUndefined(A)||
this.write(A,C);L.corked&&(L.corked=1,this.uncork());if(!L.ending&&!L.finished){A=this||ch;L.ending=!0;p(A,L);if(D)if(L.finished)q.nextTick(D);else A.once("finish",D);L.ended=!0}};return xN}function $w(){function g(d){if(!((this||no)instanceof g))return new g(d);n.call(this||no,d);a.call(this||no,d);d&&!1===d.readable&&((this||no).readable=!1);d&&!1===d.writable&&((this||no).writable=!1);(this||no).allowHalfOpen=!0;d&&!1===d.allowHalfOpen&&((this||no).allowHalfOpen=!1);this.once("end",c)}function c(){(this||
no).allowHalfOpen||(this||no)._writableState.ended||h.nextTick((this||no).end.bind(this||no))}if(x_)return yN;x_=!0;var h=yh;yN=g;var f=Object.keys||function(d){var k=[],b;for(b in d)k.push(b);return k},m=Rj;m.inherits=bj;var n=y_(),a=v_();m.inherits(g,n);(function(d,k){for(var b=0,e=d.length;b<e;b++)k(d[b],b)})(f(a.prototype),function(d){g.prototype[d]||(g.prototype[d]=a.prototype[d])});return yN}function y_(){function g(I,S){var V=$w();I=I||{};var ba=I.highWaterMark,ua=I.objectMode?16:16384;(this||
We).highWaterMark=ba||0===ba?ba:ua;(this||We).highWaterMark=~~(this||We).highWaterMark;(this||We).buffer=[];(this||We).length=0;(this||We).pipes=null;(this||We).pipesCount=0;(this||We).flowing=null;(this||We).ended=!1;(this||We).endEmitted=!1;(this||We).reading=!1;(this||We).sync=!0;(this||We).needReadable=!1;(this||We).emittedReadable=!1;(this||We).readableListening=!1;(this||We).objectMode=!!I.objectMode;S instanceof V&&((this||We).objectMode=(this||We).objectMode||!!I.readableObjectMode);(this||
We).defaultEncoding=I.defaultEncoding||"utf8";(this||We).ranOut=!1;(this||We).awaitDrain=0;(this||We).readingMore=!1;(this||We).decoder=null;(this||We).encoding=null;I.encoding&&(D||(D=zN.StringDecoder),(this||We).decoder=new D(I.encoding),(this||We).encoding=I.encoding)}function c(I){$w();if(!((this||We)instanceof c))return new c(I);(this||We)._readableState=new g(I,this||We);(this||We).readable=!0;A.call(this||We)}function h(I,S,V,ba,ua){var Fa=V;var F=null;C.isBuffer(Fa)||C.isString(Fa)||C.isNullOrUndefined(Fa)||
S.objectMode||(F=new TypeError("Invalid non-string/buffer chunk"));(Fa=F)?I.emit("error",Fa):C.isNullOrUndefined(V)?(S.reading=!1,S.ended||(S.decoder&&!S.ended&&(V=S.decoder.end())&&V.length&&(S.buffer.push(V),S.length+=S.objectMode?1:V.length),S.ended=!0,m(I))):S.objectMode||V&&0<V.length?S.ended&&!ua?(V=Error("stream.push() after EOF"),I.emit("error",V)):S.endEmitted&&ua?(V=Error("stream.unshift() after end event"),I.emit("error",V)):(!S.decoder||ua||ba||(V=S.decoder.write(V)),ua||(S.reading=!1),
S.flowing&&0===S.length&&!S.sync?(I.emit("data",V),I.read(0)):(S.length+=S.objectMode?1:V.length,ua?S.buffer.unshift(V):S.buffer.push(V),S.needReadable&&m(I)),a(I,S)):ua||(S.reading=!1);return!S.ended&&(S.needReadable||S.length<S.highWaterMark||0===S.length)}function f(I,S){if(0===S.length&&S.ended)return 0;if(S.objectMode)return 0===I?0:1;if(isNaN(I)||C.isNull(I))return S.flowing&&S.buffer.length?S.buffer[0].length:S.length;if(0>=I)return 0;if(I>S.highWaterMark){var V=I;if(8388608<=V)V=8388608;else{V--;
for(var ba=1;32>ba;ba<<=1)V|=V>>ba;V++}S.highWaterMark=V}if(I>S.length){if(S.ended)return S.length;S.needReadable=!0;return 0}return I}function m(I){var S=I._readableState;S.needReadable=!1;S.emittedReadable||(L("emitReadable",S.flowing),S.emittedReadable=!0,S.sync?q.nextTick(function(){n(I)}):n(I))}function n(I){L("emit readable");I.emit("readable");b(I)}function a(I,S){S.readingMore||(S.readingMore=!0,q.nextTick(function(){for(var V=S.length;!S.reading&&!S.flowing&&!S.ended&&S.length<S.highWaterMark&&
(L("maybeReadMore read 0"),I.read(0),V!==S.length);)V=S.length;S.readingMore=!1}))}function d(I){return function(){var S=I._readableState;L("pipeOnDrain",S.awaitDrain);S.awaitDrain&&S.awaitDrain--;0===S.awaitDrain&&y.listenerCount(I,"data")&&(S.flowing=!0,b(I))}}function k(I,S){S.resumeScheduled||(S.resumeScheduled=!0,q.nextTick(function(){S.resumeScheduled=!1;I.emit("resume");b(I);S.flowing&&!S.reading&&I.read(0)}))}function b(I){var S=I._readableState;L("flow",S.flowing);if(S.flowing){do var V=
I.read();while(null!==V&&S.flowing)}}function e(I,S){var V=S.buffer,ba=S.length,ua=!!S.decoder;S=!!S.objectMode;if(0===V.length)return null;if(0===ba)ba=null;else if(S)ba=V.shift();else if(!I||I>=ba)ba=ua?V.join(""):w.concat(V,ba),V.length=0;else if(I<V[0].length)S=V[0],ba=S.slice(0,I),V[0]=S.slice(I);else if(I===V[0].length)ba=V.shift();else{ba=ua?"":new w(I);for(var Fa=0,F=0,Y=V.length;F<Y&&Fa<I;F++){S=V[0];var Q=Math.min(I-Fa,S.length);ua?ba+=S.slice(0,Q):S.copy(ba,Fa,0,Q);Q<S.length?V[0]=S.slice(Q):
V.shift();Fa+=Q}}return ba}function l(I){var S=I._readableState;if(0<S.length)throw Error("endReadable called on non-empty stream");S.endEmitted||(S.ended=!0,q.nextTick(function(){S.endEmitted||0!==S.length||(S.endEmitted=!0,I.readable=!1,I.emit("end"))}))}function p(I,S){for(var V=0,ba=I.length;V<ba;V++)S(I[V],V)}if(z_)return AN;z_=!0;var q=yh;AN=c;var u=aca,w=Ng.Buffer;c.ReadableState=g;var y=ap.EventEmitter;y.listenerCount||(y.listenerCount=function(I,S){return I.listeners(S).length});var A=gu,
C=Rj;C.inherits=bj;var D,L=bca;L=L&&L.debuglog?L.debuglog("stream"):function(){};C.inherits(c,A);c.prototype.push=function(I,S){var V=(this||We)._readableState;C.isString(I)&&!V.objectMode&&(S=S||V.defaultEncoding,S!==V.encoding&&(I=new w(I,S),S=""));return h(this||We,V,I,S,!1)};c.prototype.unshift=function(I){return h(this||We,(this||We)._readableState,I,"",!0)};c.prototype.setEncoding=function(I){D||(D=zN.StringDecoder);(this||We)._readableState.decoder=new D(I);(this||We)._readableState.encoding=
I;return this||We};c.prototype.read=function(I){L("read",I);var S=(this||We)._readableState,V=I;if(!C.isNumber(I)||0<I)S.emittedReadable=!1;if(0===I&&S.needReadable&&(S.length>=S.highWaterMark||S.ended))return L("read: emitReadable",S.length,S.ended),0===S.length&&S.ended?l(this||We):m(this||We),null;I=f(I,S);if(0===I&&S.ended)return 0===S.length&&l(this||We),null;var ba=S.needReadable;L("need readable",ba);if(0===S.length||S.length-I<S.highWaterMark)ba=!0,L("length less than watermark",ba);if(S.ended||
S.reading)ba=!1,L("reading or ended",ba);ba&&(L("do read"),S.reading=!0,S.sync=!0,0===S.length&&(S.needReadable=!0),this._read(S.highWaterMark),S.sync=!1);ba&&!S.reading&&(I=f(V,S));ba=0<I?e(I,S):null;C.isNull(ba)&&(S.needReadable=!0,I=0);S.length-=I;0!==S.length||S.ended||(S.needReadable=!0);V!==I&&S.ended&&0===S.length&&l(this||We);C.isNull(ba)||this.emit("data",ba);return ba};c.prototype._read=function(I){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(I,S){function V(db){L("onunpipe");
db===ka&&ua()}function ba(){L("onend");I.end()}function ua(){L("cleanup");I.removeListener("close",Y);I.removeListener("finish",Q);I.removeListener("drain",la);I.removeListener("error",F);I.removeListener("unpipe",V);ka.removeListener("end",ba);ka.removeListener("end",ua);ka.removeListener("data",Fa);!ea.awaitDrain||I._writableState&&!I._writableState.needDrain||la()}function Fa(db){L("ondata");!1===I.write(db)&&(L("false write response, pause",ka._readableState.awaitDrain),ka._readableState.awaitDrain++,
ka.pause())}function F(db){L("onerror",db);W();I.removeListener("error",F);0===y.listenerCount(I,"error")&&I.emit("error",db)}function Y(){I.removeListener("finish",Q);W()}function Q(){L("onfinish");I.removeListener("close",Y);W()}function W(){L("unpipe");ka.unpipe(I)}var ka=this||We,ea=(this||We)._readableState;switch(ea.pipesCount){case 0:ea.pipes=I;break;case 1:ea.pipes=[ea.pipes,I];break;default:ea.pipes.push(I)}ea.pipesCount+=1;L("pipe count=%d opts=%j",ea.pipesCount,S);S=S&&!1===S.end||I===
q.stdout||I===q.stderr?ua:ba;if(ea.endEmitted)q.nextTick(S);else ka.once("end",S);I.on("unpipe",V);var la=d(ka);I.on("drain",la);ka.on("data",Fa);if(I._events&&I._events.error)u(I._events.error)?I._events.error.unshift(F):I._events.error=[F,I._events.error];else I.on("error",F);I.once("close",Y);I.once("finish",Q);I.emit("pipe",ka);ea.flowing||(L("pipe resume"),ka.resume());return I};c.prototype.unpipe=function(I){var S=(this||We)._readableState;if(0===S.pipesCount)return this||We;if(1===S.pipesCount){if(I&&
I!==S.pipes)return this||We;I||(I=S.pipes);S.pipes=null;S.pipesCount=0;S.flowing=!1;I&&I.emit("unpipe",this||We);return this||We}if(!I){I=S.pipes;var V=S.pipesCount;S.pipes=null;S.pipesCount=0;S.flowing=!1;for(var ba=0;ba<V;ba++)I[ba].emit("unpipe",this||We);return this||We}a:{ba=S.pipes;V=0;for(var ua=ba.length;V<ua;V++)if(ba[V]===I){ba=V;break a}ba=-1}if(-1===ba)return this||We;S.pipes.splice(ba,1);--S.pipesCount;1===S.pipesCount&&(S.pipes=S.pipes[0]);I.emit("unpipe",this||We);return this||We};
c.prototype.on=function(I,S){S=A.prototype.on.call(this||We,I,S);"data"===I&&!1!==(this||We)._readableState.flowing&&this.resume();if("readable"===I&&(this||We).readable&&(I=(this||We)._readableState,!I.readableListening))if(I.readableListening=!0,I.emittedReadable=!1,I.needReadable=!0,I.reading)I.length&&m(this||We);else{var V=this||We;q.nextTick(function(){L("readable nexttick read 0");V.read(0)})}return S};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var I=(this||We)._readableState;
I.flowing||(L("resume"),I.flowing=!0,I.reading||(L("resume read 0"),this.read(0)),k(this||We,I));return this||We};c.prototype.pause=function(){L("call pause flowing=%j",(this||We)._readableState.flowing);!1!==(this||We)._readableState.flowing&&(L("pause"),(this||We)._readableState.flowing=!1,this.emit("pause"));return this||We};c.prototype.wrap=function(I){var S=(this||We)._readableState,V=!1,ba=this||We;I.on("end",function(){L("wrapped end");if(S.decoder&&!S.ended){var Fa=S.decoder.end();Fa&&Fa.length&&
ba.push(Fa)}ba.push(null)});I.on("data",function(Fa){L("wrapped data");S.decoder&&(Fa=S.decoder.write(Fa));Fa&&(S.objectMode||Fa.length)&&!ba.push(Fa)&&(V=!0,I.pause())});for(var ua in I)C.isFunction(I[ua])&&C.isUndefined((this||We)[ua])&&((this||We)[ua]=function(Fa){return function(){return I[Fa].apply(I,arguments)}}(ua));p(["error","close","destroy","pause","resume"],function(Fa){I.on(Fa,ba.emit.bind(ba,Fa))});ba._read=function(Fa){L("wrapped _read",Fa);V&&(V=!1,I.resume())};return ba};c._fromList=
e;return AN}function A_(){function g(n,a){(this||Lk).afterTransform=function(d,k){var b=a._transformState;b.transforming=!1;var e=b.writecb;e?(b.writechunk=null,b.writecb=null,m.isNullOrUndefined(k)||a.push(k),e&&e(d),d=a._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&a._read(d.highWaterMark),d=void 0):d=a.emit("error",Error("no writecb in Transform class"));return d};(this||Lk).needTransform=!1;(this||Lk).transforming=!1;(this||Lk).writecb=null;(this||Lk).writechunk=null}
function c(n){if(!((this||Lk)instanceof c))return new c(n);f.call(this||Lk,n);(this||Lk)._transformState=new g(n,this||Lk);var a=this||Lk;(this||Lk)._readableState.needReadable=!0;(this||Lk)._readableState.sync=!1;this.once("prefinish",function(){m.isFunction((this||Lk)._flush)?this._flush(function(d){h(a,d)}):h(a)})}function h(n,a){if(a)return n.emit("error",a);a=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(a.transforming)throw Error("calling transform done when still transforming");
return n.push(null)}if(B_)return BN;B_=!0;BN=c;var f=$w(),m=Rj;m.inherits=bj;m.inherits(c,f);c.prototype.push=function(n,a){(this||Lk)._transformState.needTransform=!1;return f.prototype.push.call(this||Lk,n,a)};c.prototype._transform=function(n,a,d){throw Error("not implemented");};c.prototype._write=function(n,a,d){var k=(this||Lk)._transformState;k.writecb=d;k.writechunk=n;k.writeencoding=a;k.transforming||(n=(this||Lk)._readableState,(k.needTransform||n.needReadable||n.length<n.highWaterMark)&&
this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||Lk)._transformState;m.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};return BN}function cca(){function g(f){if(!((this||C_)instanceof g))return new g(f);c.call(this||C_,f)}if(D_)return CN;D_=!0;CN=g;var c=A_(),h=Rj;h.inherits=bj;h.inherits(g,c);g.prototype._transform=function(f,m,n){n(null,f)};return CN}function Wz(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function dca(g){var c={},h;for(h in g)c[h]=g[h];return c}function eca(g,c,h){g.open(function(){});return{apply:function(f,m,n){m=m||{};for(var a=[],d=-1,k=f.length;++d<k;){var b=f[d],e=b,l=b.prefix;l&&l.options&&(e.keyEncoding=e.keyEncoding||l.options.keyEncoding,e.valueEncoding=e.valueEncoding||l.options.valueEncoding);e=b;l=b.prefix;l="function"===typeof l.prefix?l.prefix():l;e.prefix=l;a.push({key:c.encode([b.prefix,h.encodeKey(b.key,m,b)]),value:"del"!==
b.type&&h.encodeValue(b.value,m,b),type:b.type})}g.db.batch(a,m,n)},get:function(f,m,n,a){n.asBuffer=h.valueAsBuffer(n);return g.db.get(c.encode([m,h.encodeKey(f,n,void 0)]),n,function(d,k){d?a(d):a(null,h.decodeValue(k,n))})},createDecoder:function(f){return function(m,n){return{key:h.decodeKey(c.decode(m)[1],f),value:h.decodeValue(n,f)}}},isClosed:function(){return g.isClosed()},close:function(f){return g.close(f)},iterator:function(f){var m=dca(f||{}),n=f.prefix||[];fca.toLtgt(f,m,function(a){return c.encode([n,
h.encodeKey(a,m,{})])},c.lowerBound,c.upperBound);m.prefix=null;m.keyAsBuffer=m.valueAsBuffer=!1;"number"!==typeof m.limit&&(m.limit=-1);m.keyAsBuffer=c.buffer;m.valueAsBuffer=h.valueAsBuffer(m);return function(a){return{next:function(d){return a.next(d)},end:function(d){a.end(d)}}}(g.db.iterator(m))}}}function DN(){Error.call(this)}function Qr(g,c){if(!(this instanceof Qr))return new Qr(g,c);E_.call(this,{objectMode:!0,highWaterMark:g.highWaterMark});this._waiting=!1;this._options=g;this._makeData=
c}function ax(g){F_.call(this||wq,g);(this||wq)._destroyed=!1}function gca(g,c,h){h(null,g)}function EN(g){return function(c,h,f){"function"==typeof c&&(f=h,h=c,c={});"function"!=typeof h&&(h=gca);"function"!=typeof f&&(f=null);return g(c,h,f)}}function mi(g){this._capacity=G_(g);this._front=this._length=0;if(H_(g)){for(var c=g.length,h=0;h<c;++h)this[h]=g[h];this._length=c}}function G_(g){if("number"!==typeof g)if(H_(g))g=g.length;else return 16;g=Math.min(Math.max(16,g),1073741824);g=(g>>>0)-1;
g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;return(g|g>>16)+1}function FN(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var h=c.ids,f=h[2];c=c.pos;if(f.length){h=0;for(var m=f.length;h<m;h++)g.push({pos:c+1,ids:f[h]})}else if(f=!!h[1].deleted,h=h[0],!n||(d!==f?d:a!==c?a<c:n<h)){var n=h;var a=c;var d=f}}return a+"-"+n}function oF(g,c){g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[2];h=c(0===n.length,f,m[0],h.ctx,m[1]);m=0;for(var a=n.length;m<a;m++)g.push({pos:f+1,ids:n[m],ctx:h})}}function hca(g,
c){return g.pos-c.pos}function I_(g){var c=[];oF(g,function(f,m,n,a,d){f&&c.push({rev:m+"-"+n,pos:m,opts:d})});c.sort(hca).reverse();g=0;for(var h=c.length;g<h;g++)delete c[g].pos;return c}function J_(g){var c=[];g=g.slice();for(var h;h=g.pop();){var f=h.pos,m=h.ids,n=m[0],a=m[1];m=m[2];var d=0===m.length;h=h.history?h.history.slice():[];h.push({id:n,opts:a});d&&c.push({pos:f+1-h.length,ids:h});n=0;for(a=m.length;n<a;n++)g.push({pos:f+1,ids:m[n],history:h})}return c.reverse()}function ica(g,c){return g.pos-
c.pos}function K_(g,c){for(var h,f,m=g.length;c<m;c++){var n=g[c];n=[n.id,n.opts,[]];f?(f[2].push(n),f=n):h=f=n}return h}function jca(g,c){return g[0]<c[0]?-1:1}function L_(g,c){c=[{tree1:g,tree2:c}];for(var h=!1;0<c.length;){var f=c.pop(),m=f.tree1;f=f.tree2;if(m[1].status||f[1].status)m[1].status="available"===m[1].status||"available"===f[1].status?"available":"missing";for(var n=0;n<f[2].length;n++)if(m[2][0]){for(var a=!1,d=0;d<m[2].length;d++)m[2][d][0]===f[2][n][0]&&(c.push({tree1:m[2][d],tree2:f[2][n]}),
a=!0);if(!a){h="new_branch";a=m[2];d=f[2][n];for(var k,b=a,e=d,l=jca,p=0,q=b.length;p<q;)k=p+q>>>1,0>l(b[k],e)?p=k+1:q=k;a.splice(p,0,d)}}else h="new_leaf",m[2][0]=f[2][n]}return{conflicts:h,tree:g}}function M_(g,c,h){var f=[],m=!1,n=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var a=0,d=g.length;a<d;a++){var k=g[a];if(k.pos===c.pos&&k.ids[0]===c.ids[0])n=L_(k.ids,c.ids),f.push({pos:k.pos,ids:n.tree}),m=m||n.conflicts,n=!0;else if(!0!==h){var b=k.pos<c.pos?k:c,e=k.pos<c.pos?c:k,l=[],
p=[];for(p.push({ids:b.ids,diff:e.pos-b.pos,parent:null,parentIdx:null});0<p.length;){var q=p.pop();if(0===q.diff)q.ids[0]===e.ids[0]&&l.push(q);else for(var u=q.ids[2],w=0,y=u.length;w<y;w++)p.push({ids:u[w],diff:q.diff-1,parent:q.ids,parentIdx:w})}(l=l[0])?(n=L_(l.ids,e.ids),l.parent[2][l.parentIdx]=n.tree,f.push({pos:b.pos,ids:b.ids}),m=m||n.conflicts,n=!0):f.push(k)}else f.push(k)}n||f.push(c);f.sort(ica);return{tree:f,conflicts:m||"internal_node"}}function kca(g,c){g=J_(g);for(var h,f,m=0,n=
g.length;m<n;m++){var a=g[m],d=a.ids;if(d.length>c){h||(h={});var k=d.length-c;var b={pos:a.pos+k,ids:K_(d,k)};for(var e=0;e<k;e++)h[a.pos+e+"-"+d[e].id]=!0}else b={pos:a.pos,ids:K_(d,0)};f=f?M_(f,b,!0).tree:[b]}h&&oF(f,function(l,p,q){delete h[p+"-"+q]});return{tree:f,revs:h?Object.keys(h):[]}}function lca(g){return g.ids}function N_(g){return g.reduce(function(c,h){c[h]=!0;return c},{})}function O_(g){if(!/^\d+-/.test(g))return Fm.createError(Fm.INVALID_REV);var c=g.indexOf("-"),h=g.substring(0,
c);g=g.substring(c+1);return{prefix:parseInt(h,10),id:g}}function P_(g,c,h){h||(h={deterministic_revs:!0});var f={status:"available"};g._deleted&&(f.deleted=!0);if(c){g._id||(g._id=hu.uuid());var m=hu.rev(g,h.deterministic_revs);if(g._rev){c=O_(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[m,f,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[m,f,[]]}],n=1}else{if(g._revisions){m=g._revisions;n=m.start-m.ids.length+1;m=m.ids;c=[m[0],f,[]];h=1;for(var a=
m.length;h<a;h++)c=[m[h],{status:"missing"},[c]];g._rev_tree=[{pos:n,ids:c}];n=g._revisions.start;m=g._revisions.ids[0]}if(!g._rev_tree){c=O_(g._rev);if(c.error)return c;n=c.prefix;m=c.id;g._rev_tree=[{pos:n,ids:[m,f,[]]}]}}hu.invalidIdError(g._id);g._rev=n+"-"+m;f={metadata:{},data:{}};for(var d in g)if(Object.prototype.hasOwnProperty.call(g,d)){if((n="_"===d[0])&&!mca[d])throw g=Fm.createError(Fm.DOC_VALIDATION,d),g.message=Fm.DOC_VALIDATION.message+": "+d,g;n&&!nca[d]?f.metadata[d.slice(1)]=g[d]:
f.data[d]=g[d]}return f}function oca(g,c,h){try{var f=Xz.atob(g.data)}catch(m){f={error:Fm.createError(Fm.BAD_ARG,"Attachment is not a valid base64 string")}}if(f.error)return h(f.error);g.length=f.length;g.data="blob"===c?Xz.binaryStringToBlobOrBuffer(f,g.content_type):"base64"===c?Xz.btoa(f):f;Q_.binaryMd5(f,function(m){g.digest="md5-"+m;h()})}function pca(g,c,h){Q_.binaryMd5(g.data,function(f){g.digest="md5-"+f;g.length=g.data.size||g.data.length||0;"binary"===c?Xz.blobOrBufferToBinaryString(g.data,
function(m){g.data=m;h()}):"base64"===c?Xz.blobOrBufferToBase64(g.data,function(m){g.data=m;h()}):h()})}function qca(g,c,h){if(g.stub)return h();"string"===typeof g.data?oca(g,c,h):pca(g,c,h)}function R_(g,c,h,f,m,n,a,d){if(hm.revExists(c.rev_tree,h.metadata.rev)&&!d)return f[m]=h,n();var k=c.winningRev||hm.winningRev(c),b="deleted"in c?c.deleted:hm.isDeleted(c,k),e="deleted"in h.metadata?h.metadata.deleted:hm.isDeleted(h.metadata),l=/^1-/.test(h.metadata.rev);b&&!e&&d&&l&&(l=h.data,l._rev=k,l._id=
h.metadata.id,h=P_(l,d));g=hm.merge(c.rev_tree,h.metadata.rev_tree[0],g);if(d&&(b&&e&&"new_leaf"!==g.conflicts||!b&&"new_leaf"!==g.conflicts||b&&!e&&"new_branch"===g.conflicts))return h=Fm.createError(Fm.REV_CONFLICT),f[m]=h,n();f=h.metadata.rev;h.metadata.rev_tree=g.tree;h.stemmedRevs=g.stemmedRevs||[];c.rev_map&&(h.metadata.rev_map=c.rev_map);c=hm.winningRev(h.metadata);d=hm.isDeleted(h.metadata,c);b=b===d?0:b<d?-1:1;f=f===c?d:hm.isDeleted(h.metadata,f);a(h,c,d,f,!0,b,m,n)}function Yz(g){return g&&
"object"===typeof g&&"default"in g?g["default"]:g}function S_(g,c){g=new Uint8Array(g);return Zz.blob([g],{type:c})}function rca(g,c){Zz.readAsBinaryString(g,c)}function T_(g,c){c=c.prefix()[0];g=g._cache;var h=g.get(c);h||(h=new oo.Map,g.set(c,h));return h}function iu(){this._batch=[];this._cache=new oo.Map}function GN(g){return"winningRev"in g?g.winningRev:$z.winningRev(g)}function sca(g,c,h){var f=g.content_type;return new Promise(function(m,n){c.binaryStore.get(g.digest,function(a,d){if(a){if("NotFoundError"!==
a.name)return n(a);a=h.binary?Zz.binaryStringToBlobOrBuffer("",f):""}else a=h.binary?S_(d,f):d.toString("base64");delete g.stub;delete g.length;g.data=a;m()})})}function HN(g,c,h){var f=[];g.forEach(function(m){m.doc&&m.doc._attachments&&Object.keys(m.doc._attachments).forEach(function(n){n=m.doc._attachments[n];"data"in n||f.push(n)})});return Promise.all(f.map(function(m){return sca(m,c,h)}))}function IN(g){(this||ju).db=g;(this||ju)._ended=!1;(this||ju)._nexting=!1}function Rr(g){(this||hj)._db=
g;(this||hj)._operations=[];(this||hj)._written=!1}function Hl(g){if(!arguments.length||void 0===g)throw Error("constructor requires at least a location argument");if("string"!=typeof g)throw Error("constructor requires a location string argument");(this||Fj).location=g;(this||Fj).status="new"}function Gm(g,c,h,f,m,n){this._color=g;this.key=c;this.value=h;this.left=f;this.right=m;this._count=n}function lp(g){return new Gm(g._color,g.key,g.value,g.left,g.right,g._count)}function Sr(g,c){return new Gm(g,
c.key,c.value,c.left,c.right,c._count)}function ij(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function bx(g,c){this._compare=g;this.root=c}function JN(g,c){if(c.left){var h=JN(g,c.left);if(h)return h}if(h=g(c.key,c.value))return h;if(c.right)return JN(g,c.right)}function KN(g,c,h,f){if(0>=c(g,f.key)){if(f.left){var m=KN(g,c,h,f.left);if(m)return m}if(m=h(f.key,f.value))return m}if(f.right)return KN(g,c,h,f.right)}function LN(g,c,h,f,m){var n=h(g,m.key),a=h(c,m.key);if(0>=n&&
(m.left&&(n=LN(g,c,h,f,m.left))||0<a&&(n=f(m.key,m.value))))return n;if(0<a&&m.right)return LN(g,c,h,f,m.right)}function Hm(g,c){this.tree=g;this._stack=c}function U_(g,c){g.key=c.key;g.value=c.value;g.left=c.left;g.right=c.right;g._color=c._color;g._count=c._count}function tca(g,c){return g<c?-1:g>c?1:0}function V_(g,c){for(var h in g)c[h]=g[h]}function cx(g,c,h){return xq(g,c,h)}function uca(g){return 0<Im.compare(g,(this||Re)._end)}function vca(g){return 0<=Im.compare(g,(this||Re)._end)}function wca(g){return 0>
Im.compare(g,(this||Re)._end)}function xca(g){return 0>=Im.compare(g,(this||Re)._end)}function pF(g,c){W_.call(this||Re,g);(this||Re)._limit=c.limit;-1===(this||Re)._limit&&((this||Re)._limit=Infinity);g=g._store[g._location];(this||Re).keyAsBuffer=!1!==c.keyAsBuffer;(this||Re).valueAsBuffer=!1!==c.valueAsBuffer;(this||Re)._reverse=c.reverse;(this||Re)._options=c;(this||Re)._done=0;(this||Re)._reverse?((this||Re)._incr="prev",(this||Re)._start=Im.upperBound(c),(this||Re)._end=Im.lowerBound(c),"undefined"===
typeof(this||Re)._start?(this||Re)._tree=g.end:Im.upperBoundInclusive(c)?(this||Re)._tree=g.le((this||Re)._start):(this||Re)._tree=g.lt((this||Re)._start),(this||Re)._end&&(Im.lowerBoundInclusive(c)?(this||Re)._test=vca:(this||Re)._test=uca)):((this||Re)._incr="next",(this||Re)._start=Im.lowerBound(c),(this||Re)._end=Im.upperBound(c),"undefined"===typeof(this||Re)._start?(this||Re)._tree=g.begin:Im.lowerBoundInclusive(c)?(this||Re)._tree=g.ge((this||Re)._start):(this||Re)._tree=g.gt((this||Re)._start),
(this||Re)._end&&(Im.upperBoundInclusive(c)?(this||Re)._test=xca:(this||Re)._test=wca))}function im(g){if(!((this||Re)instanceof im))return new im(g);X_.call(this||Re,"string"===typeof g?g:"");(this||Re)._location=(this||Re).location?"$"+(this||Re).location:"_tree";(this||Re)._store=(this||Re).location?dx:this||Re;(this||Re)._store[(this||Re)._location]=(this||Re)._store[(this||Re)._location]||yca(Im.compare)}function Y_(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function MN(g,
c){g=zca.assign({db:Aca},g);Bca.call(this,g,c)}function NN(g){g&&(g.__serialize__=function(){return{__expr__:'({type: "'+g.type+'", name: "'+g.name+'", _id: "'+g._id+'"})'}});return g}function aA(g){var c,h,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(!g||Wf.obj.isEmpty(g))return k.return(!1);if(g&&g._rev)return k.return(g);c=g;h=c.type;f=c.name;m=c._id;k.setFinallyBlock(2);n=Object;a=n.assign;d=g;return k.yield(Wf.MorphicDB.default.fetchCommit(h,
f,m),4)}2!=k.nextAddress&&a.call(n,d,k.yieldResult);k.enterFinallyBlock();return k.return(g)})}function bA(g){return Object.values(g).filter(function(c){return 1==Wc.Path("props.isComponent.value").get(c)}).map(function(c){return c.props.name.value})}function qF(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:return g.label="loading System Elements",g.progress=0,g.status="core elements...",c.yield(Wc.resource("styleguide://System/buttons/light").read(),
2);case 2:return g.progress=.2,g.status="top bar...",c.yield(Wc.resource("styleguide://SystemIDE/lively top bar master").read(),3);case 3:return g.progress=.4,g.status="scene graph...",c.yield(Wc.resource("styleguide://SystemIDE/styling side bar master").read(),4);case 4:return g.progress=.6,g.status="styling palette...",c.yield(Wc.resource("styleguide://SystemIDE/scene graph side bar master").read(),5);case 5:return g.progress=.8,g.status="world loader...",c.yield(Wc.resource("styleguide://partial freezing/project browser").read(),
6);case 6:return g.progress=1,c.yield(Wc.promise.delay(500),0)}})}function rF(){Wc.localNamePromise=null}function ON(g){delete Wc.fetchedSnapshots[g]}function Tr(g,c,h,f){f=void 0===f?h.name:f;(g[c]=jm.fun.wrap(g[c],h)).hookFunc=h;h.hookName=f}function ku(g,c,h){for(var f=[],m=g[c];m;)f.push(m),m=m.originalFunction;m="string"===typeof h?f.find(function(n){return n.hookFunc&&n.hookFunc.hookName===h}):f.find(function(n){return n.hookFunc===h});if(!m)return!1;jm.arr.remove(f,m);g[c]=f.reduceRight(function(n,
a){return jm.fun.wrap(n,a.hookFunc||a)});return!0}function Ur(g,c,h){for(g=g[c];g;){if(g.hookFunc&&("string"===typeof h&&g.hookFunc.hookName===h||g.hookFunc===h))return!0;g=g.originalFunction}return!1}function cA(g){if(g.loads){var c=g.loads;return yq.arr.uniq(Object.keys(yq.loadedModules(g)).concat(Object.keys(c))).reduce(function(h,f){var m=c[f]?c[f].depMap:{};h[f]=Object.keys(m).map(function(n){var a=m[n];return"@empty"===a?a+"/"+n:a});return h},{})}return Object.keys(g._loader.moduleRecords).reduce(function(h,
f){h[f]=g._loader.moduleRecords[f].dependencies.filter(Boolean).map(function(m){return m.name});return h},{})}function dA(g,c,h,f,m){var n=g.get("@lively-env").pendingExportChanges;(g=tl.module(g,c).record())&&(h in g.exports||m)&&((n[c]||(n[c]={}))[h]=f)}function sF(g,c){var h=g.get("@lively-env").pendingExportChanges[c];h&&(tl.clearPendingModuleExportChanges(g,c),tl.updateModuleExports(g,c,h))}function eA(g,c,h,f,m){var n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:d.setCatchFinallyBlocks(2);
g.debug&&console.log("[module change] "+c+" "+h.slice(0,50).replace(/\n/g,"")+" "+f);if(!f||"es6"===f||"esm"===f||"register"===f||"defined"===f)return d.yield(Di.moduleSourceChangeEsm(g,c,h,m),8);if("global"!==f)throw Error("moduleSourceChange is not supported for module "+c+" with format "+f);return d.yield(Di.moduleSourceChangeGlobal(g,c,h,m),7);case 7:n=d.yieldResult;d.jumpTo(5);break;case 8:n=d.yieldResult;case 5:return Di.emit("lively.modules/modulechanged",{module:c,newSource:h,options:m},Date.now(),
g),d.return(n);case 2:throw a=d.enterCatchBlock(),Di.emit("lively.modules/modulechanged",{module:c,newSource:h,error:a,options:m},Date.now(),g),a;}})}function PN(g){return/\.js/i.test(g)}function QN(g){return Mk.isJsFile(g)?g.replace(/\/[^\/]*$/,""):g.replace(/\/$/,"")}function lu(g){return/^[^:\\]+:\/\//.test(g)}function tF(g){var c=g.match(/^([^:]+:\/\/)(.*)/);if(!c)return g;g=c[1];var h=c=c[2];do c=h,h=c.replace(/\/[^\/]+\/\.\./,"");while(h!=c);h=h.replace(/(^|[^:])[\/]+/g,"$1/");h=h.replace(/\/\.\//g,
"/");return g+h}function uF(g,c,h){h=void 0===h?!1:h;var f=oe.classHolder.PackageRegistry.ofSystem(g),m=f.allPackageURLs();g=h?c:oe.normalizePackageURL(g,c,m);return{pkg:f.findPackageWithURL(g),url:g,allPackageURLs:m,registry:f}}function vF(g,c,h){g=oe.lookupPackage(g,c,void 0===h?!1:h);c=g.url;h=g.registry;return g.pkg||h.addPackageAt(c,"devPackageDirs")}function fA(g,c,h){g=oe.lookupPackage(g,c,void 0===h?!1:h);if(h=g.pkg)return h;throw Error("[getPackage] package "+c+" (as "+g.url+") not found");
}function wF(g,c,h){return oe.getPackage(g,h).updateConfig(c)}function xF(g,c){return Promise.resolve(oe.ensurePackage(g,c)).then(function(h){return h.import()})}function yF(g,c){return(g=oe.lookupPackage(g,c).pkg)?g.remove():null}function zF(g,c,h){return oe.getPackage(g,c).reload(h)}function AF(g,c,h){return Promise.resolve(oe.ensurePackage(g,c)).then(function(f){return f.register(h)})}function BF(g){return oe.Package.allPackages(g).map(function(c){return c.asSpec()})}function zq(g,c){g="string"===
typeof g?Mc.parse(g):g;c.scope=Mc.query.resolveReferences(Mc.query.scopes(g));return Mc.ClassReplaceVisitor.run(g,c)}function CF(g,c,h){h=Il.ensureParent(g,c);var f=g.System._nodeRequire("module");c.startsWith(".")&&(c=Il.relative(g,c));return f._load(c,h)}function DF(g,c,h){h=Il.ensureParent(g,c);var f=g.System._nodeRequire("module");c.startsWith(".")&&(c=Il.relative(g,c));return f._resolveFilename(c,h)}function mu(g,c,h){var f=me.livelySystemEnv(g);c=g.decanonicalize(c,h);return f.loadedModules[c]||
(f.loadedModules[c]=new me.ModuleInterface(g,c))}function EF(g,c,h){h=void 0===h?!1:h;var f=me.livelySystemEnv(g);return(h?c:g.normalizeSync(c))in f.loadedModules}function FF(g,c,h){h=void 0===h?!1:h;var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){me.livelySystemEnv(g);f=h?c:g.normalizeSync(c);if(me.isModuleLoaded(g,f,!0))return a.return(!0);m=me.Package.forModuleId(g,f);return m&&"no group"!==m.name?a.yield(m.hasResource(f),3):(n=g.resource(f).exists(),
a.jumpTo(2))}2!=a.nextAddress&&(n=a.yieldResult);return a.return(n)})}function RN(){return Pd.exceptions}function SN(g){return Pd.exceptions=g}function TN(g,c,h,f,m){c=String(c);g=f.sourceAccessorName;var n=f.recorder,a=f.recorderName,d=f.dontTransform,k=f.varDefinitionCallbackName,b=void 0===f.embedOriginalCode?!0:f.embedOriginalCode;g=b?g:void 0;f={topLevelVarRecorder:n,varRecorderName:a,sourceAccessorName:g,dontTransform:d,jsx:h.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,
declarationWrapperName:k,evalId:f.nextEvalId(),classTransform:Pd.classToFunctionTransform,currentModuleAccessor:Pd.funcCall(Pd.member(Pd.funcCall(Pd.member(Pd.member("__lvVarRecorder","System"),"get"),Pd.literal("@lively-env")),"moduleEnv"),Pd.literal(h))};n=m?'console.log("[lively.modules] executing module '+h+'");\n':"";d="";"System.global"===a?delete f.declarationWrapperName:(n+='SystemJS.get("@lively-env").evaluationStart("'+h+'");\nvar '+(a+' = SystemJS.get("@lively-env").moduleEnv("'+h+'").recorder;\n')+
(b?"\nvar "+g+" = "+JSON.stringify(c)+";\n":""),d+='\nSystemJS.get("@lively-env").evaluationEnd("'+h+'");');try{var e=n+Pd.evalCodeTransform(c,f)+d;m&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=e);return{source:e,options:f}}catch(l){return console.error("Error in prepareCodeForCustomCompile of "+h+" "+l.stack),{source:c,options:f}}}function UN(g,c,h,f,m,n){c=String(c);g=Object.assign({},m,{classTransform:Pd.classToFunctionTransform,topLevelVarRecorder:f.recorder,
varRecorderName:f.recorderName,dontTransform:f.dontTransform,recordGlobals:!0,declarationWrapperName:f.varDefinitionCallbackName,currentModuleAccessor:Pd.funcCall(Pd.member(Pd.funcCall(Pd.member(Pd.member("__lvVarRecorder","System"),"get"),Pd.literal("@lively-env")),"moduleEnv"),Pd.literal(h))});try{var a=Pd.evalCodeTransformOfSystemRegisterSetters(c,g);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=a);return a}catch(d){return console.error("Error in prepareTranslatedCodeForSetterCapture",
d.stack),c}}function GF(g,c){return g.translate(c).then(function(h){var f=Pd.parse(h).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!f)throw Error("Cannot find register call in translated source of "+c.name);var m=f.expression;f=m.arguments[0].elements.map(function(n){return n.value});m=m.arguments[1];h=h.slice(m.start,m.end);h=eval('var __moduleName = "'+c.name+'";('+h+");\n//# sourceURL="+c.name+"\n");g.debug&&
"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=h);return{localDeps:f,declare:h}})}function HF(g,c){return g.translate(c).then(function(h){return{translated:h}})}function gA(g){Pd.isHookInstalled(g,"translate","lively_modules_translate_hook")||Pd.installHook(g,"translate",function(c,h){return Pd.customTranslate.call(g,c,h)},"lively_modules_translate_hook")}function IF(g){Pd.removeHook(g,"translate","lively_modules_translate_hook")}function JF(g){g.resource=
dg.resource;dg.isHookInstalled(g,"fetch",dg.fetchResource)&&dg.removeHook(g,"fetch","fetchResource");dg.installHook(g,"fetch",dg.fetchResource);dg.isHookInstalled(g,"resource","livelyProtocol")&&dg.removeHook(g,"fetch","livelyProtocol");dg.installHook(g,"resource",dg.livelyProtocol)}function VN(g){dg.removeHook(g,"fetch","fetchResource");dg.removeHook(g,"resource","livelyProtocol");delete g.resource}function KF(g){fd.isHookInstalled(g,"normalize","normalizeHook")||fd.installHook(g,"normalize",fd.normalizeHook,
"normalizeHook");fd.isHookInstalled(g,"decanonicalize","decanonicalizeHook")||fd.installHook(g,"decanonicalize",fd.decanonicalizeHook,"decanonicalizeHook");fd.isHookInstalled(g,"normalizeSync","decanonicalizeHook")||fd.installHook(g,"normalizeSync",fd.decanonicalizeHook,"decanonicalizeHook");fd.isHookInstalled(g,"newModule","newModule_volatile")||fd.installHook(g,"newModule",fd.newModule_volatile,"newModule_volatile");fd.isHookInstalled(g,"instantiate","instantiate_triggerOnLoadCallbacks")||fd.installHook(g,
"instantiate",fd.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");fd.isHookInstalled(g,"locate","locateHook")||fd.installHook(g,"locate",fd.locateHook,"locateHook")}function LF(g){fd.removeHook(g,"normalize","normalizeHook");fd.removeHook(g,"decanonicalize","decanonicalizeHook");fd.removeHook(g,"normalizeSync","decanonicalizeHook");fd.removeHook(g,"newModule","newModule_volatile");fd.removeHook(g,"instantiate","instantiate_triggerOnLoadCallbacks");fd.removeHook(g,"locate",
"locateHook")}function MF(g){return{moduleEnv:function(c){return fd.classHolder.module(g,c)},get itself(){return g.get(g.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){fd.classHolder.module(g,c).evaluationStart()},evaluationEnd:function(c){fd.classHolder.module(g,c).evaluationEnd()},dumpConfig:function(){return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths},
null,2)},get packageRegistry(){return g["__lively.modules__packageRegistry"]},set packageRegistry(c){g["__lively.modules__packageRegistry"]=c},packages:g["__lively.modules__packages"]||(g["__lively.modules__packages"]={}),loadedModules:g["__lively.modules__loadedModules"]||(g["__lively.modules__loadedModules"]={}),pendingExportChanges:g["__lively.modules__pendingExportChanges"]||(g["__lively.modules__pendingExportChanges"]={}),notifications:g["__lively.modules__notifications"]||(g["__lively.modules__notifications"]=
[]),notificationSubscribers:g["__lively.modules__notificationSubscribers"]||(g["__lively.modules__notificationSubscribers"]={}),options:g["__lively.modules__options"]||(g["__lively.modules__options"]=fd.obj.deepCopy(fd.defaultOptions)),onLoadCallbacks:g["__lively.modules__onLoadCallbacks"]||(g["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:g["__lively.modules__modulePackageMapCache"]}}function nu(g,c){return g&&"string"!==typeof g?g:fd.systems()[g]||(fd.systems()[g]=fd.makeSystem(c))}
function ou(g){g=g&&"string"!==typeof g?fd.nameOfSystem(g):g;delete fd.systems()[g]}function NF(g,c){g.trace=!0;c=c||{};var h=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!fd.urlQuery().noModuleCache;g.useModuleTranslationCache=h;g.set("@lively-env",g.newModule(fd.livelySystemEnv(g)));"undefined"!==typeof fd.WorkerGlobalScope&&g.set("@system-env",g.newModule(Object.assign({},g.get("@system-env"),{browser:!0,worker:!0,location:fd.location})));(h="undefined"!==typeof fd.process&&
fd.process.versions&&fd.process.versions.electron)&&g.set("@system-env",g.newModule(Object.assign({electron:h},g.get("@system-env"))));fd.wrapResource(g);fd.wrapModuleLoad(g);fd.wrapModuleResolution(g);h&&(h=["electron"].reduce(function(f,m){f[m]="@node/"+m;return f},{}),c.map=fd.obj.merge(h,c.map));fd.isNode&&(h="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(f,
m){f[m]="@node/"+m;return f},{}),c.map=fd.obj.merge(h,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==g.transpiler||(h=fd.GLOBAL.System,"lively.transpiler"===h.transpiler?(g.set("lively.transpiler",h.get("lively.transpiler")),g._loader.transpilerPromise=h._loader.transpilerPromise,g.config({transpiler:"lively.transpiler",babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)})):g.config({map:{"plugin-babel":h.map["plugin-babel"],
"systemjs-babel-build":h.map["systemjs-babel-build"]},transpiler:h.transpiler,babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)}));g.config(c);return g}function OF(g){g=fd.getSystem(g);return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,defaultExtension:g.defaultExtension,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths,bundles:g.bundles},null,2)}function PF(g,c,h){var f=g.decanonicalize(c);
if(g.get(f))try{h(fd.classHolder.module(g,f))}catch(m){console.error(m)}else g.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:h})}function QF(g){return g.get("@lively-env").loadedModules}function RF(g){var c=g.loads?Object.keys(g.loads):Object.keys(g._loader.moduleRecords);return fd.arr.uniq(c.concat(Object.keys(fd.loadedModules(g))))}function WN(g,c,h){return Promise.all(fd.obj.values(fd.loadedModules(g)).map(function(f){return f.search(c,h)})).then(function(f){return fd.arr.flatten(f,
1)})}function hA(g,c,h,f){c=void 0===c?{maxDepth:0,excludes:[]}:c;h=void 0===h?{}:h;f=void 0===f?0:f;var m,n,a,d,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:m=c;n=m.maxDepth;a=m.excludes;if(0<n&&f>n)return A.return(h);A.setCatchFinallyBlocks(2);d=JSON;k=d.parse;return A.yield(lk.resource(g).join("package.json").read(),4);case 4:b=k.call(d,A.yieldResult);e=b.name+"@"+b.version;if(h[e]||a.includes(b.name))return A.return(h);h[e]=Object.assign({url:g},
lk.obj.select(b,["name","version","dependencies","devDependencies","main"]));A.leaveTryBlock(3);break;case 2:return A.enterCatchBlock(),A.return(h);case 3:return A.setCatchFinallyBlocks(5),A.yield(lk.resource(g).join("node_modules").dirList(1),7);case 7:l=A.yieldResult;A.leaveTryBlock(6);break;case 5:return A.enterCatchBlock(),A.return(h);case 6:p=$jscomp.makeIterator(l),q=p.next();case 8:if(q.done){A.jumpTo(10);break}w=u=q.value;y=w.url;return A.yield(hA(y,c,h,f+1),11);case 11:h=A.yieldResult;q=
p.next();A.jumpTo(8);break;case 10:return A.return(h)}})}function SF(g,c){var h=Object.assign({},g.dependencies,{},g.devDependencies);return Object.keys(h).reduce(function(f,m){var n=h[m],a=lk.obj.values(c).find(function(k){var b=k.version;return k.name===m&&lively.modules.semver.satisfies(b,n)})||{},d=a.name;a=a.version;f[m]=d?d+"@"+a:void 0;return f},{})}function TF(g){function c(m,n){var a=m+"@"+n;if(a in f)return f[a];var d=h.find(function(b){var e=b.version;return b.name===m&&lively.modules.semver.satisfies(e,
n)})||{},k=d.name;d=d.version;return f[a]=k?k+"@"+d:void 0}var h=lk.obj.values(g),f={};return Object.keys(g).reduce(function(m,n){var a=g[n],d=Object.assign({},a.dependencies,{},a.devDependencies);m[n]=Object.keys(d).map(function(k){return c(k,d[k])}).filter(function(k){return!!k});return m},{})}function UF(g,c){Fc.defaultSystem=g;c&&(Fc.GLOBAL.System=g);return g}function VF(){Fc._wrapModuleResolution(Fc.defaultSystem)}function WF(){Fc._unwrapModuleResolution(Fc.defaultSystem)}function XF(){return Object.keys(Fc.requireMap())}
function iA(g){return Fc._module(Fc.defaultSystem,g)}function YF(g,c){return Fc._isModuleLoaded(Fc.defaultSystem,g,c)}function ZF(g,c){return Fc._doesModuleExist(Fc.defaultSystem,g,c)}function $F(){return Fc._printSystemConfig(Fc.defaultSystem)}function aG(g,c){return Fc._whenLoaded(Fc.defaultSystem,g,c)}function bG(g){return Fc._importPackage(Fc.defaultSystem,g)}function cG(g,c){return Fc._registerPackage(Fc.defaultSystem,g,c)}function dG(g){return Fc._removePackage(Fc.defaultSystem,g)}function eG(g,
c){return Fc._reloadPackage(Fc.defaultSystem,g,c)}function fG(){return Fc.getPackageSpecs(Fc.defaultSystem)}function gG(g,c){return Fc._getPackage(Fc.defaultSystem,g,void 0===c?!1:c)}function hG(g){return Fc.Package.forModuleId(Fc.defaultSystem,g)}function iG(g){return Fc._ensurePackage(Fc.defaultSystem,g)}function jG(g,c){return Fc._applyPackageConfig(Fc.defaultSystem,g,c)}function kG(g,c){return Fc._lookupPackage(Fc.defaultSystem,g,void 0===c?!1:c)}function lG(g,c,h){return Fc._moduleSourceChange(Fc.defaultSystem,
g,c,h)}function mG(){return Fc.computeRequireMap(Fc.defaultSystem)}function nG(g,c){return Fc._isHookInstalled(Fc.defaultSystem,g,c)}function oG(g,c){return Fc._installHook(Fc.defaultSystem,g,c)}function pG(g,c){return Fc._removeHook(Fc.defaultSystem,g,c)}function qG(){Fc._wrapModuleLoad(Fc.defaultSystem)}function rG(){Fc._unwrapModuleLoad(Fc.defaultSystem)}function XN(g){return g&&g.__ref__}function jA(g,c){return Xd.serialize(g,Xd.normalizeOptions(c))}function kA(g,c){c=void 0===c?{}:c;return Xd.deserializeWithMigrations(g,
c.migrations||Xd.migrations,Xd.normalizeOptions(c))}function YN(g){var c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=Xd,h=c.loadMorphFromSnapshot,f.yield(g.readJson(),2)):f.return(h.call(c,f.yieldResult))})}function ZN(g,c,h){g=void 0===g?Xd.MorphicEnv.default().world:g;var f,m,n,a,d,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:f=h||{};m=void 0===f.showIndicator?!0:f.showIndicator;n=void 0===
f.changeName?!0:f.changeName;a=void 0===f.changeBrowserURL?!0:f.changeBrowserURL;c||(d=Xd.resource(document.location.href),k=d.name(),c=d.join("../"+k.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&(c=Xd.resource(c));n&&(g.name=c.nameWithoutExt());a&&(b=encodeURI(h.pathForBrowserHistory||Xd.pathForBrowserHistory(c.path())),window.location.pathname!==b&&window.history.pushState({},"lively.next",b));if(!m){u.jumpTo(2);break}return u.yield(System.import("lively.components/loading-indicator.js"),
3);case 3:return l=u.yieldResult,p=l.LoadingIndicator,e=p.open("string"===typeof m?m:"Snapshotting..."),u.yield(e.whenRendered(),4);case 4:return u.yield(Xd.promise.delay(100),2);case 2:return u.setFinallyBlock(6),u.yield(Xd.createMorphSnapshot(g,h),8);case 8:return q=u.yieldResult,e.label="Uploading...",u.yield(e.whenRendered(),9);case 9:return u.return(c.writeJson(q));case 6:u.enterFinallyBlock(),e&&e.remove(),u.leaveFinallyBlock(0)}})}function sG(g,c){if(void 0===c||!c)return Xd.deserializeMorph(Xd.serializeMorph(g),
{migrations:Xd.migrations,reinitializeIds:!0});c=g.comments;g.comments=[];var h=[];g.attributeConnections&&(h=g.attributeConnections.filter(function(m){return m.targetObj.isCommentIndicator}),g.attributeConnections=g.attributeConnections.filter(function(m){return!(m.targetObj.isCommentIndicator||m.targetObj.isHalo)}));var f=Xd.serializeMorph(g);g.comments=c;g.attributeConnections&&(g.attributeConnections=g.attributeConnections.concat(h));return Xd.deserializeMorph(f,{migrations:Xd.migrations,reinitializeIds:!0})}
function pu(g,c){c=void 0===c?{}:c;var h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){switch(Fa.nextAddress){case 1:System.get("@system-env");h=c;f=void 0===h.addPreview?!1:h.addPreview;m=void 0===h.previewWidth?100:h.previewWidth;n=void 0===h.previewHeight?100:h.previewHeight;a=void 0===h.previewType?"png":h.previewType;d=void 0===h.testLoad?!0:h.testLoad;k=void 0===h.addPackages?!0:h.addPackages;b=void 0===h.ignoreMorphs?[]:h.ignoreMorphs;
e=void 0===h.frozenSnapshot?!1:h.frozenSnapshot;l=Xd.serializeMorph(g,{frozenSnapshot:e});if(!k){Fa.jumpTo(2);break}return Fa.yield(Xd.findRequiredPackagesOfSnapshot(l),3);case 3:p=Fa.yieldResult,q=p.packages,u=p.depMap,l.packages=q,w=Xd.findLocalComponents(l.snapshot),Object.values(q["local://lively-object-modules/"]||{}).forEach(function(F){Object.entries(F).forEach(function(Y){var Q=$jscomp.makeIterator(Y);Y=Q.next().value;Q=Q.next().value;if(!Y.endsWith(".json")){var W=Xd.ast.parse(Q),ka=[],ea=
Xd.Path("metadata.commit.name").get($world);Xd.ast.AllNodesVisitor.run(W,function(la,db){"Literal"===la.type&&"string"===typeof la.value&&(la.value.match(/^styleguide:\/\/\$world\/.+/)&&!w.includes(la.value.replace("styleguide://$world/",""))&&ka.push({target:la,replacementFunc:function(){return JSON.stringify(la.value.replace("$world",ea))}}),la.value.match(/^part:\/\/\$world\/.+/)&&!w.includes(la.value.replace("part://$world/",""))&&ka.push({target:la,replacementFunc:function(){return JSON.stringify(la.value.replace("$world",
ea))}}))});F[Y]=Xd.ast.transform.replaceNodes(ka,Q).source}})}),l.packageDepMap=u;case 2:if(!f){Fa.jumpTo(4);break}return Fa.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return y=Fa.yieldResult,A=y.renderMorphToDataURI,C=m||g.width,D=n||g.height,L=a||"png",Fa.setCatchFinallyBlocks(6),I=l,Fa.yield(A(g,{width:C,height:D,type:L,ignoreMorphs:[]}),8);case 8:I.preview=Fa.yieldResult;Fa.leaveTryBlock(4);break;case 6:return S=Fa.enterCatchBlock(),console.error("Error generating morph preview: "+
S),V=l,Fa.yield(A(Xd.morph({fill:g.fill,width:C,height:D}),{width:C,height:D,type:L,ignoreMorphs:b}),9);case 9:V.preview=Fa.yieldResult;case 4:l.preview||(l.preview="");if(!d){Fa.jumpTo(10);break}Fa.setCatchFinallyBlocks(11);return Fa.yield(Xd.loadMorphFromSnapshot(l,{highlightBuggyMorphs:!0,rootObject:g}),13);case 13:ba=Fa.yieldResult;if(!ba||!ba.isMorph)throw Error("reloading snapshot does not create a morph!");Fa.leaveTryBlock(10);break;case 11:throw ua=Fa.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+
ua.stack);case 10:return Fa.return(l)}})}function mp(g,c){return Xd.deserializeMorph(g,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:Xd.loadPackagesAndModulesOfSnapshot,migrations:Xd.migrations},c))}function Z_(g,c){var h,f,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:if(!g.isDirectory())return d=c,k=g.name(),b.yield(g.read(),9);h=c[g.name()]={};return b.yield(g.dirList(),4);case 4:f=b.yieldResult,m=$jscomp.makeIterator(f),
n=m.next();case 5:if(n.done)return b.return(c);a=n.value;return b.yield(Z_(a,h),6);case 6:n=m.next();b.jumpTo(5);break;case 9:return d[k]=b.yieldResult,b.return(c)}})}function $_(g,c){c=void 0===c?[]:c;var h=[];if(g.hasOwnProperty("package.json")){var f=c.slice(1).reduceRight(function(n,a){return n.join(a)},Xd.resource(c[0])).url;h.push({files:g,url:f,requiredPackages:g.requiredPackages})}for(var m in g)"object"===typeof g[m]&&h.push.apply(h,$jscomp.arrayFromIterable($_(g[m],c.concat(m))));return h}
function $N(g){var c=Xd.findPackagesInFileSpec(g.packages),h={};g=g.packageDepMap;if(!g)return c;c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=c.next())f=f.value,h[f.url]=f;return Xd.arr.flatten(Xd.graph.sortByReference(g)).map(function(m){return h[m]})}function lA(g){var c,h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:if(!g.packagesToRegister){C.jumpTo(2);break}c=$jscomp.makeIterator(g.packagesToRegister);h=c.next();
case 3:if(h.done){C.jumpTo(2);break}f=h.value;C.setCatchFinallyBlocks(6);return C.yield(Xd.registerPackage(f),8);case 8:C.leaveTryBlock(4);break;case 6:C.enterCatchBlock(),console.error("Failed to register package "+f);case 4:h=c.next();C.jumpTo(3);break;case 2:if(!g.packages){C.jumpTo(9);break}m=Xd.packagesOfSnapshot(g);n=$jscomp.makeIterator(m);a=n.next();case 10:if(a.done){C.jumpTo(9);break}k=d=a.value;b=k.files;e=k.url;if(p=(l=Xd.lookupPackage(e))&&l.pkg){q=p.version;u=JSON.parse(b["package.json"]);
w=u.version;try{if(w&&q&&Xd.semver.lte(w,q,!0)){console.log("[load morph] Package "+e+" is loaded in version "+q+(" which is newer than "+w+". Will NOT load older variant."));C.jumpTo(11);break}}catch(D){console.warn("Error in package version comparison: ",D)}}return C.yield(Xd.createFiles(e,b),13);case 13:return C.yield(Xd.ensurePackage(e),14);case 14:return p=C.yieldResult,C.yield(p.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return C.yield(System.import("lively.classes/object-classes.js"),
16);case 16:y=C.yieldResult,A=y.default,Xd.objectScriptingEnabled=!!A,Xd.objectScriptingEnabled&&A.withId(p.name);case 11:a=n.next();C.jumpTo(10);break;case 9:return C.yield(Promise.all(Xd.requiredModulesOfSnapshot(g).map(function(D){return(System.get(D)?null:System.import(D)).catch(function(L){return console.error("Error loading "+D,L)})})),0)}})}function tG(g){var c,h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la,db,ub,xa,na,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){switch(Pa.nextAddress){case 1:c=
{},h=g.snapshot,f=[],m={},n=!0,a={},d={},b=Pa.forIn(h);case 2:if(null==(k=b.getNext())){Pa.jumpTo(4);break}e=h[k]["lively.serializer-class-info"];if(!(e&&e.module&&e.module.package)){Pa.jumpTo(5);break}l=Xd.getPackage(e.module.package.name);if(!l.address.startsWith("local://")){Pa.jumpTo(5);break}return Pa.yield(System.import("lively.classes/object-classes.js"),7);case 7:return p=Pa.yieldResult,d.$jscomp$loop$prop$ObjectPackage$2716=p.default,Pa.yield(System.import("lively.classes/util.js"),8);case 8:return q=
Pa.yieldResult,u=q.withSuperclasses,Xd.objectScriptingEnabled=!!d.$jscomp$loop$prop$ObjectPackage$2716,w=d.$jscomp$loop$prop$ObjectPackage$2716.forSystemPackage(l),Pa.yield(w.ensureSubModule(e.module.pathInPackage),9);case 9:y=Pa.yieldResult,A=y.systemModule._recorder[e.className],C=u(A),C.forEach(function(Da){return function(M){(M=Da.$jscomp$loop$prop$ObjectPackage$2716.lookupPackageForClass(M))&&f.push(M.systemPackage)}}(d));case 5:if(D=h[k].props.metadata)if(L=void 0,D.value&&D.value.__ref__?(I=
h[D.value.id],I.props.externalPackages&&(L=I.props.externalPackages.value)):L=D.externalPackages,L)for(n=!0,S=0;S<L.length;S++)m[L[S]]=!0;d={$jscomp$loop$prop$ObjectPackage$2716:d.$jscomp$loop$prop$ObjectPackage$2716};Pa.jumpTo(2);break;case 4:n&&(g.packagesToRegister=Object.keys(m)),V=[],ba=$jscomp.makeIterator(f),ua=ba.next();case 10:if(ua.done)return f=[].concat($jscomp.arrayFromIterable(V),$jscomp.arrayFromIterable(f)),Pa.yield(Promise.all(f.map(function(Da){var M,U;return $jscomp.asyncExecutePromiseGeneratorProgram(function(aa){if(1==
aa.nextAddress)return M=Xd.resource(Da.address).asDirectory(),aa.yield(Xd.resourceToJSON(M,{}),2);U=aa.yieldResult;c[M.parent().url]||(c[M.parent().url]={});Object.assign(c[M.parent().url],U);a[Da.url]||(a[Da.url]=[]);aa.jumpToEnd()})})),17);Fa=ua.value;F=$jscomp.makeIterator(Fa.modules());Y=F.next();case 13:if(Y.done){ua=ba.next();Pa.jumpTo(10);break}Q=Y.value;if(Q.id.endsWith(".json")){Pa.jumpTo(14);break}W=$jscomp;ka=W.makeIterator;return Pa.yield(Q.imports(),16);case 16:for(ea=ka.call(W,Pa.yieldResult),
la=ea.next();!la.done;la=ea.next())if(ub=db=la.value,xa=ub.fromModule,na=Xd.module(xa).package())Aa=na.config,Aa.lively&&Aa.lively.isObjectPackage&&(V.push(na),a[Fa.url]?Xd.arr.pushIfNotIncluded(a[Fa.url],na.url):a[Fa.url]=[na.url]);case 14:Y=F.next();Pa.jumpTo(13);break;case 17:return Pa.return({packages:c,depMap:a})}})}function aO(g){return[]}function uG(g,c){c=void 0===c?{}:c;var h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return h=c.morphicDB||
fe.MorphicDB.default,a.yield(h.load("part","string"===typeof g?g:g.name,c,"string"===typeof g?void 0:g),2);case 2:f=a.yieldResult;if(!f.isWindow||!f.targetMorph){a.jumpTo(3);break}m=f.targetMorph;return a.yield(fe.ensureCommitInfo(f.metadata&&f.metadata.commit),4);case 4:(n=a.yieldResult)&&m.changeMetaData("commit",n,!0,!1);case 3:return a.return(f)}})}function bO(g,c,h,f,m,n){var a,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:w.setCatchFinallyBlocks(2);
if(g.isMorph){w.jumpTo(4);break}if("function"!==typeof g.beforePublish){w.jumpTo(5);break}return w.yield(g.beforePublish(c,g),5);case 4:a=[],g.withAllSubmorphsDo(function(y){"function"===typeof y.beforePublish&&a.push(y)}),d=$jscomp.makeIterator(a),k=d.next();case 8:if(k.done){w.jumpTo(5);break}b=k.value;return w.yield(b.beforePublish(),9);case 9:k=d.next();w.jumpTo(8);break;case 5:w.leaveTryBlock(3);break;case 2:e=w.enterCatchBlock(),l="Error in beforePublish of "+g+"\n"+e.stack,"function"===typeof g.world&&
g.world()?g.world().logError(Error(l)):console.error(l);case 3:return p=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},h),q=h.morphicDB||fe.MorphicDB.default,w.yield(q.snapshotAndCommit("part",c,g,p,f,m,n),12);case 12:return u=w.yieldResult,fe.emit("lively.partsbin/partpublished",u),w.return(u)}})}function mA(g,c){c=void 0===c?{}:c;var h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la,db,ub,xa,na,Aa,Pa,Da,M,U,aa,pa,ma,La,ib,ca,qa,ra,Va,nb,wc,nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){switch(ac.nextAddress){case 1:return h=
c,f=void 0===h.showPublishDialog?!0:h.showPublishDialog,m=void 0===h.notifications?!0:h.notifications,n=void 0===h.loadingIndicator?!0:h.loadingIndicator,a=void 0===h.preferWindow?!0:h.preferWindow,b=g,e=g.world()||g.env.world,l=g.name,p=[],q="",ac.yield(fe.ensureCommitInfo(fe.Path("metadata.commit").get(g)||fe.Path("metadata.commit").get(b)),2);case 2:u=ac.yieldResult;w=c.morphicDB||fe.MorphicDB.default;u||(u={type:"part",name:g.name,author:e.getCurrentUser(),tags:[],description:"no description"});
if(!f){u&&(y=u,l=y.name,p=y.tags,q=y.description);ac.jumpTo(3);break}A=e;C=A.openPrompt;return ac.yield(fe.loadPart("publish part dialog"),5);case 5:return ac.yield(C.call(A,ac.yieldResult,{part:g}),4);case 4:D=ac.yieldResult;L=D.db;I=D.commit;if(!I)return ac.return(null);L&&(c.morphicDB=w=L);S=I;l=S.name;p=S.tags;q=S.description;case 3:if(!n){ac.jumpTo(6);break}V=$world.execCommand("open loading indicator","saving "+l+"...");return ac.yield(fe.promise.delay(80),6);case 6:ac.setCatchFinallyBlocks(8,
9);ba="HEAD";ua=u?u.name:g.name;if(ua===l){Fa=u?u._id:void 0;ac.jumpTo(11);break}return ac.yield(w.exists("part",l),12);case 12:F=ac.yieldResult;Y=F.exists;Q=F.commitId;if(!Y){ac.jumpTo(13);break}return ac.yield(e.confirm('A part "'+l+'" already exists, overwrite?'),14);case 14:W=ac.yieldResult;if(!W)return ac.return(null);Fa=Q;case 13:b.name=l;case 11:return a&&!g.isWindow&&(ka=g.getWindow())&&ka.targetMorph===g&&(g=ka,k=ka.metadata,d=!0),ea={author:g.world().getCurrentUser(),message:"published",
tags:p,description:q},ac.yield(fe.savePart(g,l,c,ea,ba,Fa),15);case 15:la=ac.yieldResult;if(!d){ac.jumpTo(16);break}if(b.metadata)return ub=b.metadata,ac.yield(fe.ensureCommitInfo(ka.metadata.commit),20);db=b;return ac.yield(fe.ensureCommitInfo(ka.metadata.commit),19);case 19:db.metadata={commit:ac.yieldResult};ac.jumpTo(18);break;case 20:ub.commit=ac.yieldResult;case 18:ka.metadata=k;case 16:return m&&g.setStatusMessage("saved part "+l),ac.return(la);case 9:ac.enterFinallyBlock();V&&V.remove();ac.leaveFinallyBlock(0);
break;case 8:xa=ac.enterCatchBlock();na=$jscomp.makeIterator(xa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);na.next();na.next();Aa=na.next().value;Pa=na.next().value;if(!Aa||!Pa){ac.jumpTo(21);break}Da=$jscomp;M=Da.makeIterator;return ac.yield(w.log(Pa,1,!0),22);case 22:return U=M.call(Da,ac.yieldResult),pa=aa=U.next().value,ma=pa.author,La=ma.name,ib=pa.timestamp,ca='The current version of part "'+l+'" is not the most recent!\nA newer version by '+
(La+" was saved on ")+(fe.date.format(new Date(ib),"yyyy-mm-dd HH:MM")+". Overwrite?"),ac.yield(e.confirm(["Version Mismatch\n",{},ca,{fontWeight:"normal",fontSize:16}]),23);case 23:qa=ac.yieldResult;if(!qa)return ac.return(null);ra=fe.obj.dissoc(aa,["preview"]);b.changeMetaData("commit",ra,!0,!1);return ac.return(mA(b,Object.assign({},c,{morphicDB:w,showPublishDialog:!1})));case 21:Va=$jscomp.makeIterator(xa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||
[]);Va.next();Va.next();nb=Va.next().value;if(!nb){ac.jumpTo(24);break}wc="Part "+l+" no longer exist in the object database.\nDo you still want to publish it?";return ac.yield(e.confirm(wc),25);case 25:nc=ac.yieldResult;if(!nc)return ac.return(null);b.changeMetaData("commit",null,!0,!1);return ac.return(mA(b,Object.assign({},c,{morphicDB:w,showPublishDialog:!1})));case 24:throw console.error(xa),m&&e.logError("Error saving part: "+xa),xa;}})}function cO(g){g=void 0===g?{}:g;var c,h,f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==
d.nextAddress)return c=g.morphicDB||fe.MorphicDB.default,d.yield(c.latestCommits("part"),2);if(3!=d.nextAddress)return h=d.yieldResult,f=h.map(function(k){return{isListItem:!0,string:k.name,value:k}}),d.yield($world.filterableListPrompt("Select part to load",f,{fuzzy:!0}),3);m=d.yieldResult;n=$jscomp.makeIterator(m.selected);a=n.next().value;return d.return(a?fe.loadPart(a):null)})}function dO(g){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield($world.prompt("Enter part name to publish object under",
{input:g.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);c=h.yieldResult;if(!c)throw"canceled";return h.return(fe.saveObjectToPartsbinFolder(g,c,{previewWidth:g.width,previewHeight:g.height}))})}function eO(g,c,h){h=void 0===h?{}:h;var f,m,n,a,d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:h=Object.assign({preferWindow:!0},h);h.preferWindow&&(g=(f=g.getWindow())&&f.targetMorph===g?f:g);p.setCatchFinallyBlocks(2);
if(g.isMorph){p.jumpTo(4);break}if("function"!==typeof g.beforePublish){p.jumpTo(5);break}return p.yield(g.beforePublish(c,g),5);case 4:m=[],g.withAllSubmorphsDo(function(q){"function"===typeof q.beforePublish&&m.push(q)}),n=$jscomp.makeIterator(m),a=n.next();case 8:if(a.done){p.jumpTo(5);break}d=a.value;return p.yield(d.beforePublish(),9);case 9:a=n.next();p.jumpTo(8);break;case 5:p.leaveTryBlock(3);break;case 2:k=p.enterCatchBlock(),b="Error in beforePublish of "+g+"\n"+k.stack,"function"===typeof g.world&&
g.world()?g.world().logError(Error(b)):console.error(b);case 3:return p.yield(fe.resource(h.partsbinFolder).ensureExistance(),12);case 12:return e=fe.resource(h.partsbinFolder).join(c+".json"),p.yield(fe.createMorphSnapshot(g,h),13);case 13:return l=p.yieldResult,p.yield(e.write(JSON.stringify(l,null,2)),14);case 14:return p.return({partName:c,url:e.url})}})}function vG(g,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(fe.loadPart(g,c))})}function fO(g){return new fe.CommitEditor(g)}
function Cca(g,c){var h={};c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(f,m,n){m&&(h[m]=n)});return h}function Dca(g){g=String(g);if(!(100<g.length)&&(g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(g))){var c=parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return c*Eca;case "days":case "day":case "d":return c*nA;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*
c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}function wG(g,c,h){if(!(g<c))return g<1.5*c?Math.floor(g/c)+" "+h:Math.ceil(g/c)+" "+h+"s"}function Fca(g){var c=0,h;for(h in g)c=(c<<5)-c+g.charCodeAt(h),c|=0;return th.colors[Math.abs(c)%th.colors.length]}function gO(g){function c(){if(c.enabled){var f=+new Date;c.diff=
f-(h||f);c.prev=h;h=c.curr=f;var m=Array(arguments.length);for(f=0;f<m.length;f++)m[f]=arguments[f];m[0]=th.coerce(m[0]);"string"!==typeof m[0]&&m.unshift("%O");var n=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,function(a,d){if("%%"===a)return a;n++;d=th.formatters[d];"function"===typeof d&&(a=d.call(c,m[n]),m.splice(n,1),n--);return a});th.formatArgs.call(c,m);(c.log||th.log||console.log.bind(console)).apply(c,m)}}var h;c.namespace=g;c.enabled=th.enabled(g);c.useColors=th.useColors();c.color=Fca(g);c.destroy=
Gca;"function"===typeof th.init&&th.init(c);th.instances.push(c);return c}function Gca(){var g=th.instances.indexOf(this||Hca);return-1!==g?(th.instances.splice(g,1),!0):!1}function a0(){try{var g=ul.storage.debug}catch(c){}!g&&"undefined"!==typeof hO&&"env"in hO&&(g=hO.env.DEBUG);return g}function Jm(g){if(g){for(var c in Jm.prototype)g[c]=Jm.prototype[c];return g}}function iO(g,c){if(!g)return g;if(b0(g)){var h={_placeholder:!0,num:c.length};c.push(g);return h}if(jO(g)){h=Array(g.length);for(var f=
0;f<g.length;f++)h[f]=iO(g[f],c);return h}if("object"===typeof g&&!(g instanceof Date)){h={};for(f in g)h[f]=iO(g[f],c);return h}return g}function kO(g,c){if(!g)return g;if(g&&g._placeholder)return c[g.num];if(jO(g))for(var h=0;h<g.length;h++)g[h]=kO(g[h],c);else if("object"===typeof g)for(h in g)g[h]=kO(g[h],c);return g}function c0(){}function d0(g){var c=""+g.type;if(Pi.BINARY_EVENT===g.type||Pi.BINARY_ACK===g.type)c+=g.attachments+"-";g.nsp&&"/"!==g.nsp&&(c+=g.nsp+",");null!=g.id&&(c+=g.id);if(null!=
g.data){try{var h=JSON.stringify(g.data)}catch(f){h=!1}if(!1!==h)c+=h;else return Ica}lO("encoded %j as %s",g,c);return c}function Jca(g,c){mO.removeBlobs(g,function(h){var f=mO.deconstructPacket(h);h=d0(f.packet);f=f.buffers;f.unshift(h);c(f)})}function xG(){(this||dl).reconstructor=null}function nO(g){(this||dl).reconPack=g;(this||dl).buffers=[]}function yG(g){if(!g||"object"!==typeof g)return!1;if(Kca(g)){for(var c=0,h=g.length;c<h;c++)if(yG(g[c]))return!0;return!1}if("function"===typeof oO&&oO.isBuffer&&
oO.isBuffer(g)||"function"===typeof ArrayBuffer&&g instanceof ArrayBuffer||Lca&&g instanceof Blob||Mca&&g instanceof File)return!0;if(g.toJSON&&"function"===typeof g.toJSON&&1===arguments.length)return yG(g.toJSON(),!0);for(c in g)if(Object.prototype.hasOwnProperty.call(g,c)&&yG(g[c]))return!0;return!1}function Nca(){}function e0(g){return g.map(function(c){if(c.buffer instanceof ArrayBuffer){var h=c.buffer;if(c.byteLength!==h.byteLength){var f=new Uint8Array(c.byteLength);f.set(new Uint8Array(h,
c.byteOffset,c.byteLength));h=f.buffer}return h}return c})}function f0(g,c){c=c||{};var h=new ex;e0(g).forEach(function(f){h.append(f)});return c.type?h.getBlob(c.type):h.getBlob()}function g0(g,c){return new Blob(e0(g),c||{})}function h0(g){for(var c=[],h=0,f=g.length,m,n;h<f;)m=g.charCodeAt(h++),55296<=m&&56319>=m&&h<f?(n=g.charCodeAt(h++),56320==(n&64512)?c.push(((m&1023)<<10)+(n&1023)+65536):(c.push(m),h--)):c.push(m);return c}function i0(g,c){if(55296<=g&&57343>=g){if(c)throw Error("Lone surrogate U+"+
g.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function fx(){if(Vr>=zG)throw Error("Invalid byte index");var g=AG[Vr]&255;Vr++;if(128==(g&192))return g&63;throw Error("Invalid continuation byte");}function Oca(g){if(Vr>zG)throw Error("Invalid byte index");if(Vr==zG)return!1;var c=AG[Vr]&255;Vr++;if(0==(c&128))return c;if(192==(c&224)){var h=fx();c=(c&31)<<6|h;if(128<=c)return c;throw Error("Invalid continuation byte");}if(224==(c&240)){h=fx();var f=fx();c=(c&15)<<12|h<<6|
f;if(2048<=c)return i0(c,g)?c:65533;throw Error("Invalid continuation byte");}if(240==(c&248)&&(h=fx(),f=fx(),g=fx(),c=(c&7)<<18|h<<12|f<<6|g,65536<=c&&1114111>=c))return c;throw Error("Invalid UTF-8 detected");}function Pca(g,c,h){if(!c)return hi.encodeBase64Packet(g,h);var f=new FileReader;f.onload=function(){hi.encodePacket({type:g.type,data:f.result},c,!0,h)};return f.readAsArrayBuffer(g.data)}function pO(g,c,h){var f=Array(g.length);h=Qca(g.length,h);for(var m=function(a,d,k){c(d,function(b,
e){f[a]=e;k(b,f)})},n=0;n<g.length;n++)m(n,g[n],h)}function qO(g){var c="";do c=j0[g%64]+c,g=Math.floor(g/64);while(0<g);return c}function rO(){var g=qO(+new Date);return g!==k0?(l0=0,k0=g):g+"."+qO(l0++)}function np(g){(this||Jh).path=g.path;(this||Jh).hostname=g.hostname;(this||Jh).port=g.port;(this||Jh).secure=g.secure;(this||Jh).query=g.query;(this||Jh).timestampParam=g.timestampParam;(this||Jh).timestampRequests=g.timestampRequests;(this||Jh).readyState="";(this||Jh).agent=g.agent||!1;(this||
Jh).socket=g.socket;(this||Jh).enablesXDR=g.enablesXDR;(this||Jh).withCredentials=g.withCredentials;(this||Jh).pfx=g.pfx;(this||Jh).key=g.key;(this||Jh).passphrase=g.passphrase;(this||Jh).cert=g.cert;(this||Jh).ca=g.ca;(this||Jh).ciphers=g.ciphers;(this||Jh).rejectUnauthorized=g.rejectUnauthorized;(this||Jh).forceNode=g.forceNode;(this||Jh).isReactNative=g.isReactNative;(this||Jh).extraHeaders=g.extraHeaders;(this||Jh).localAddress=g.localAddress}function op(g){var c=g&&g.forceBase64;if(!Rca||c)(this||
di).supportsBinary=!1;m0.call(this||di,g)}function n0(){}function gx(g){o0.call(this||te,g);(this||te).requestTimeout=g.requestTimeout;(this||te).extraHeaders=g.extraHeaders;if("undefined"!==typeof location){var c="https:"===location.protocol,h=location.port;h||(h=c?443:80);(this||te).xd="undefined"!==typeof location&&g.hostname!==location.hostname||h!==g.port;(this||te).xs=g.secure!==c}}function mk(g){(this||te).method=g.method||"GET";(this||te).uri=g.uri;(this||te).xd=!!g.xd;(this||te).xs=!!g.xs;
(this||te).async=!1!==g.async;(this||te).data=void 0!==g.data?g.data:null;(this||te).agent=g.agent;(this||te).isBinary=g.isBinary;(this||te).supportsBinary=g.supportsBinary;(this||te).enablesXDR=g.enablesXDR;(this||te).withCredentials=g.withCredentials;(this||te).requestTimeout=g.requestTimeout;(this||te).pfx=g.pfx;(this||te).key=g.key;(this||te).passphrase=g.passphrase;(this||te).cert=g.cert;(this||te).ca=g.ca;(this||te).ciphers=g.ciphers;(this||te).rejectUnauthorized=g.rejectUnauthorized;(this||
te).extraHeaders=g.extraHeaders;this.create()}function p0(){for(var g in mk.requests)mk.requests.hasOwnProperty(g)&&mk.requests[g].abort()}function Sca(){}function hx(g){sO.call(this||Sh,g);(this||Sh).query=(this||Sh).query||{};BG||(BG=q0.___eio=q0.___eio||[]);(this||Sh).index=BG.length;var c=this||Sh;BG.push(function(h){c.onData(h)});(this||Sh).query.j=(this||Sh).index;"function"===typeof addEventListener&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=Sca)},!1)}function rn(g){g&&
g.forceBase64&&((this||Mf).supportsBinary=!1);(this||Mf).perMessageDeflate=g.perMessageDeflate;(this||Mf).usingBrowserWebSocket=CG&&!g.forceNode;(this||Mf).protocols=g.protocols;(this||Mf).usingBrowserWebSocket||(ix=r0);tO.call(this||Mf,g)}function Th(g,c){if(!((this||gd)instanceof Th))return new Th(g,c);c=c||{};g&&"object"===typeof g&&(c=g,g=null);g?(g=s0(g),c.hostname=g.host,c.secure="https"===g.protocol||"wss"===g.protocol,c.port=g.port,g.query&&(c.query=g.query)):c.host&&(c.hostname=s0(c.host).host);
(this||gd).secure=null!=c.secure?c.secure:"undefined"!==typeof location&&"https:"===location.protocol;c.hostname&&!c.port&&(c.port=(this||gd).secure?"443":"80");(this||gd).agent=c.agent||!1;(this||gd).hostname=c.hostname||("undefined"!==typeof location?location.hostname:"localhost");(this||gd).port=c.port||("undefined"!==typeof location&&location.port?location.port:(this||gd).secure?443:80);(this||gd).query=c.query||{};"string"===typeof(this||gd).query&&((this||gd).query=Tca.decode((this||gd).query));
(this||gd).upgrade=!1!==c.upgrade;(this||gd).path=(c.path||"/engine.io").replace(/\/$/,"")+"/";(this||gd).forceJSONP=!!c.forceJSONP;(this||gd).jsonp=!1!==c.jsonp;(this||gd).forceBase64=!!c.forceBase64;(this||gd).enablesXDR=!!c.enablesXDR;(this||gd).withCredentials=!1!==c.withCredentials;(this||gd).timestampParam=c.timestampParam||"t";(this||gd).timestampRequests=c.timestampRequests;(this||gd).transports=c.transports||["polling","websocket"];(this||gd).transportOptions=c.transportOptions||{};(this||
gd).readyState="";(this||gd).writeBuffer=[];(this||gd).prevBufferLen=0;(this||gd).policyPort=c.policyPort||843;(this||gd).rememberUpgrade=c.rememberUpgrade||!1;(this||gd).binaryType=null;(this||gd).onlyBinaryUpgrades=c.onlyBinaryUpgrades;(this||gd).perMessageDeflate=!1!==c.perMessageDeflate?c.perMessageDeflate||{}:!1;!0===(this||gd).perMessageDeflate&&((this||gd).perMessageDeflate={});(this||gd).perMessageDeflate&&null==(this||gd).perMessageDeflate.threshold&&((this||gd).perMessageDeflate.threshold=
1024);(this||gd).pfx=c.pfx||null;(this||gd).key=c.key||null;(this||gd).passphrase=c.passphrase||null;(this||gd).cert=c.cert||null;(this||gd).ca=c.ca||null;(this||gd).ciphers=c.ciphers||null;(this||gd).rejectUnauthorized=void 0===c.rejectUnauthorized?!0:c.rejectUnauthorized;(this||gd).forceNode=!!c.forceNode;(this||gd).isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();if("undefined"===typeof self||(this||gd).isReactNative)c.extraHeaders&&
0<Object.keys(c.extraHeaders).length&&((this||gd).extraHeaders=c.extraHeaders),c.localAddress&&((this||gd).localAddress=c.localAddress);(this||gd).id=null;(this||gd).upgrades=null;(this||gd).pingInterval=null;(this||gd).pingTimeout=null;(this||gd).pingIntervalTimer=null;(this||gd).pingTimeoutTimer=null;this.open()}function xj(g,c,h){(this||Ce).io=g;(this||Ce).nsp=c;(this||Ce).json=this||Ce;(this||Ce).ids=0;(this||Ce).acks={};(this||Ce).receiveBuffer=[];(this||Ce).sendBuffer=[];(this||Ce).connected=
!1;(this||Ce).disconnected=!0;(this||Ce).flags={};h&&h.query&&((this||Ce).query=h.query);(this||Ce).io.autoConnect&&this.open()}function jx(g){g=g||{};(this||Jl).ms=g.min||100;(this||Jl).max=g.max||1E4;(this||Jl).factor=g.factor||2;(this||Jl).jitter=0<g.jitter&&1>=g.jitter?g.jitter:0;(this||Jl).attempts=0}function ii(g,c){if(!((this||Ad)instanceof ii))return new ii(g,c);g&&"object"===typeof g&&(c=g,g=void 0);c=c||{};c.path=c.path||"/socket.io";(this||Ad).nsps={};(this||Ad).subs=[];(this||Ad).opts=
c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);(this||Ad).backoff=new Uca({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);(this||Ad).readyState="closed";(this||Ad).uri=g;(this||Ad).connecting=[];(this||
Ad).lastPing=null;(this||Ad).encoding=!1;(this||Ad).packetBuffer=[];g=c.parser||Vca;(this||Ad).encoder=new g.Encoder;(this||Ad).decoder=new g.Decoder;(this||Ad).autoConnect=!1!==c.autoConnect;(this||Ad).autoConnect&&this.open()}function t0(g,c){"object"===typeof g&&(c=g,g=void 0);c=c||{};g=Wca(g);var h=g.source,f=g.id,m=g.path;m=oA[f]&&m in oA[f].nsps;c.forceNew||c["force new connection"]||!1===c.multiplex||m?(u0("ignoring socket cache for %s",h),h=v0(h,c)):(oA[f]||(u0("new io instance for %s",h),
oA[f]=v0(h,c)),h=oA[f]);g.query&&!c.query&&(c.query=g.query);return h.socket(g.path,c)}function qu(g,c){c=void 0===c?{}:c;var h=c.l2lClient;if(!h)throw Error("lively.shell client side runCommand needs opts.l2lClient!");Hf.ClientCommand.installLively2LivelyServices(h);h=new Hf.ClientCommand(h);h.spawn(Object.assign({command:g},Hf.obj.dissoc(c,["l2lClient"])));return h}function pA(g){return Hf.dirCache[g.trackerId]?Hf.dirCache[g.trackerId]:Promise.resolve().then(function(){var c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(g.sendToAndWait(g.trackerId,"lively.shell.info",{}),2);c=m.yieldResult;h=c.data;f=h.defaultDirectory;return m.return(Hf.dirCache[g.trackerId]=f)})})}function qA(g){var c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(g.sendToAndWait(g.trackerId,"lively.shell.env",{}),2);c=m.yieldResult;h=c.data;f=h.env;return m.return(f)})}function DG(g,c){c=(c=void 0===c?{}:c)||{};var h=Hf.runCommand('cat "'+g+'"',c);return h.whenDone().then(function(){if(h.exitCode)throw Error("Read "+
g+" failed: "+h.stderr);return h.output})}function EG(g,c,h){!h&&c&&c.content&&(h=c,c=h.content);var f=Hf.runCommand('tee "'+g+'"',Object.assign({stdin:c||""},h));return f.whenDone().then(function(){if(f.exitCode)throw Error("Write "+g+" failed: "+f.stderr);return f})}function FG(g,c){c=void 0===c?{}:c;return zh._runCommand(g,Object.assign({l2lClient:zh.L2LClient.ensure(zh.defaultConnection)},c))}function rA(){return zh._defaultDirectory(zh.L2LClient.ensure(zh.defaultConnection))}function uO(){return zh._env(zh.L2LClient.ensure(zh.defaultConnection))}
function vO(g){function c(){0<f.length&&h.push(f);f=""}for(var h=[],f="",m="normal",n=0,a;a=g[n];n++)if("normal"===m&&/\s/.test(a))c();else{if('"'===a||"'"===a){if("normal"===m){m=a;continue}if(m===a){m="normal";continue}}"\\"===a&&m===g[n+1]&&(n++,a=g[n]);f+=a}c();return h}function wO(g,c,h){var f=h=void 0===h?{}:h,m=f.exclusions,n=void 0===f.fileTypes?[]:f.fileTypes,a=void 0===f.sizeLimit?"+1M":f.sizeLimit;h=void 0===f.charsBefore?80:f.charsBefore;f=void 0===f.charsAfter?80:f.charsAfter;m||(m=zh.defaultGrepExclusions);
m=(m=[m.length?"-iname "+m.map(JSON.stringify).join(" -o -iname "):"",a?"-size "+a:""].filter(Boolean).join(" -o "))?"\\( "+m+" \\) -prune -o":"";n=(n=n.length?"-iname "+n.map(JSON.stringify).join(" -o -iname "):"")?"-a \\( "+n+" \\)":"";a='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,"\\$1");g=zh.string.format(a,c,m,n,h,g,f);var d=zh.runCommand(g);d.whenDone().then(function(k){var b=k.exitCode;b&&1!==b||(d.results=k.stdout.split("\n").map(function(e){e=
e.match(/(.*):([0-9]+):(.*)/);if(!e)return null;var l=$jscomp.makeIterator(e);l.next();e=l.next().value;var p=l.next().value;l=l.next().value;return{filename:e,lineno:Number(p)-1,match:l}}).filter(Boolean))});return d}function GG(g,c){var h,f,m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return h=mh.fileInfoCommandString(g,c),f=mh.runCommand(h,c),d.yield(f.whenDone(),2);if(m=0!=f.exitCode?f.output:null)throw m;n=$jscomp.makeIterator(mh.parseDirectoryListFromLs(f.stdout,
c.rootDirectory||"."));a=n.next().value;return d.return(a)})}function xO(g,c){return mh.string.lines(g).map(function(h){return h.trim().length?(new mh.FileInfo(c)).readFromDirectoryListLine(h):null}).filter(Boolean)}function HG(g,c){var h,f,m,n,a,d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){h=Object.assign({findFilesGroup:"default-find-files-process"},c);f=h.findFilesGroup;m=h.rootDirectory;a=n=mh.findFilesProcesses[f]||(mh.findFilesProcesses[f]={promiseState:null,commands:[]});
d=a.commands;k=a.promiseState;k||(n.promiseState=k=mh.promise.deferred());b=mh.findFilesCommandString(g,c);d.forEach(function(p){return p.kill()});e=mh.runCommand(b,c);d.push(e);e.whenDone().then(function(){mh.arr.remove(d,e);if(d.some(function(q){return q.startTime>e.startTime}))console.log("[findFiles] command "+e+" exited but a newer findFiles command was started for group "+f+", discarding output");else{var p=0!=e.exitCode?e.output:null;p&&console.warn(p);p=p?[]:mh.parseDirectoryListFromLs(e.stdout,
m)||[];k.resolve(p);Object.assign(n,{promiseState:null,commands:[]})}}).catch(function(p){return console.error(p)});return l.return(k.promise)})}function yO(g){function c(h){return Array.prototype.concat.apply([h],h.children?h.children.map(c):[])}return c(g).map(function(h){var f=h.fullPath.replace(/^\//,"");return{fileName:f,path:f,rootDirectory:"./",isDirectory:h.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function IG(g,c,h){var f,
m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){f=g.isResource?g:Ve.resource(System.decanonicalize(g));m=f.nameWithoutExt();return n.return(Ve.loadWorldFromDB(m,void 0,c,h))})}function JG(g,c,h){var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c&&(Ve.reset(),c.name=null,c.metadata&&(c.metadata.commit={})),f=Ve.MorphicDB.default,a.yield(f.load("world",void 0,h,g),2);m=a.yieldResult;n="undefined"!==typeof document?document.location.search:
"";h=Object.assign({pathForBrowserHistory:Ve.pathForBrowserHistory(m.name,n)},h);return a.return(Ve.loadWorld(m,c,h))})}function KG(g,c,h,f){var m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return h&&(Ve.reset(),h.name=null,h.metadata&&(h.metadata.commit={})),m=Ve.MorphicDB.default,d.yield(m.load("world",g,f,void 0,c||void 0),2);n=d.yieldResult;a="undefined"!==typeof document?document.location.search:"";f=Object.assign({pathForBrowserHistory:Ve.pathForBrowserHistory(g,
a)},f);return d.return(Ve.loadWorld(n,h,f))})}function LG(g,c,h){h=void 0===h?{}:h;var f,m,n,a,d,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:f=h;m=f.env;n=f.root;a=void 0===f.verbose?!0:f.verbose;d=void 0===f.localconfig?!0:f.localconfig;k=void 0===f.l2l?!0:f.l2l;b=void 0===f.shell?!0:f.shell;e=void 0===f.worldLoadDialog?!1:f.worldLoadDialog;l=void 0===f.showUserFlap?"undefined"===typeof g.showsUserFlap?!0:g.showsUserFlap:f.showUserFlap;
m=m||(c?c.env:Ve.MorphicEnv.default());p=m.domEnv.document||document;q=p.getElementById("dom-loading-indicator");A.setCatchFinallyBlocks(2,3);if(!(u=k)){A.jumpTo(5);break}return A.yield(Ve.setupLively2Lively(g),6);case 6:u=A.yieldResult;case 5:w=u;if(!w||!b){A.jumpTo(7);break}return A.yield(Ve.setupLivelyShell({l2lClient:w}),7);case 7:a&&q&&(q.style.display="");if(!d){A.jumpTo(9);break}return A.yield(Ve.loadLocalConfig(),10);case 10:case 9:return A.yield(m.setWorld(g,n),11);case 11:e&&g.execCommand("load world");
h.pathForBrowserHistory&&window.history.pushState({},"lively.next",h.pathForBrowserHistory);g.showsUserFlap=l;if(c)c.onUnload();Ve.emit("world/loaded",g);return A.return(g);case 3:A.enterFinallyBlock();q&&(q.style.display="none");A.leaveFinallyBlock(0);break;case 2:y=A.enterCatchBlock();console.error("Error loading world: ",y);if(!c){A.jumpTo(12);break}return A.yield(m.setWorld(c),13);case 13:c.showError(y);case 12:throw y;}})}function kx(g,c){var h,f,m,n,a,d,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,
Fa,F,Y,Q,W,ka,ea,la,db,ub,xa,na,Aa,Pa,Da,M,U,aa,pa,ma,La,ib,ca,qa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){switch(ra.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),h=g.name,f=[],m="",ra.yield(Ve.ensureCommitInfo(Ve.Path("metadata.commit").get(g)),2);case 2:n=ra.yieldResult;a=c.morphicdb||Ve.MorphicDB.default;d="";k="db";if(!c.showSaveDialog){n&&(b=n,h=b.name,f=b.tags,m=b.description);
ra.jumpTo(3);break}return ra.yield(Ve.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return e=ra.yieldResult,ra.yield(g.openPrompt(e,{targetWorld:g}),5);case 5:if(l=ra.yieldResult,p=l.commit,q=l.db,u=l.mode,w=l.filePath,q&&(a=q),k=u,d=w,y=p||{},h=y.name,f=y.tags,m=y.description,!h)return ra.return(null);case 3:return A=$world.execCommand("open loading indicator","saving "+h+"..."),ra.yield(Ve.promise.delay(80),6);case 6:if("json"!=k){ra.jumpTo(7);break}C=Ve.resource(System.baseURL).join(d).withRelativePartsResolved();
return ra.yield(C.exists(),8);case 8:return ra.yieldResult?(A.visible=!1,ra.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},C.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):ra.yield(C.ensureExistance(),10);case 12:D=ra.yieldResult;if(!D)return A.remove(),ra.return();A.visible=!0;case 10:return g.changeMetaData("file",d,!1,!1),
ra.yield(Ve.createMorphSnapshot(g),13);case 13:return L=ra.yieldResult,ra.yield(C.writeJson(L),14);case 14:return I=JSON.stringify(L),S=d.replace(".json",".br.json"),V=Ve,ba=V.resource,ra.yield(Ve.defaultDirectory(Ve.ShellClientResource.defaultL2lClient),16);case 16:return ra.yield(ba.call(V,ra.yieldResult+"/..").join(S).withRelativePartsResolved().brotli(I),15);case 15:return Ve.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),A.remove(),g.setStatusMessage("saved world "+
h+" to file: "+C.url),ra.return();case 7:ra.setCatchFinallyBlocks(17,18);ua={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[A]};Fa="HEAD";F=n?n.name:g.name;if(!c.useExpectedCommit){ra.jumpTo(20);break}if(F===h||!c.confirmOverwrite){Y=n?n._id:void 0;ra.jumpTo(20);break}return ra.yield(a.exists("world",h),22);case 22:Q=ra.yieldResult;W=Q.exists;ka=Q.commitId;if(!W){ra.jumpTo(23);break}A.center=g.windowBounds().center();A.visible=!1;return ra.yield(g.confirm(["The world\n",{fontWeight:"normal"},
'"'+h+'"',{},"\nalready exists, overwrite?",{fontWeight:"normal"}],{hasFixedPosition:!0,width:350}),24);case 24:ea=ra.yieldResult;A.visible=!0;if(!ea)return ra.return(null);Y=ka;case 23:g.name=h;case 20:return la={author:g.getCurrentUser(),message:"world save",tags:f,description:m},ra.yield(a.snapshotAndCommit("world",h,g,ua,la,Fa,Y),25);case 25:return db=ra.yieldResult,window.history&&(ub=Ve.pathForBrowserHistory(h),window.history.pushState({},"lively.next",ub)),Ve.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),
g.setStatusMessage("saved world "+h),g.get("world-list")&&g.get("world-list").onWorldSaved(h),ra.return(db);case 18:ra.enterFinallyBlock();A.remove();ra.leaveFinallyBlock(0);break;case 17:xa=ra.enterCatchBlock();if(xa.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return ra.return(kx(g,Object.assign({},c,{morphicdb:a,useExpectedCommit:!1,showSaveDialog:!1})));na=$jscomp.makeIterator(xa.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||
[]);na.next();na.next();Aa=na.next().value;Pa=na.next().value;if(!Aa||!Pa){ra.jumpTo(26);break}Da=$jscomp;M=Da.makeIterator;return ra.yield(a.log(Pa,1,!0),27);case 27:U=M.call(Da,ra.yieldResult);aa=U.next().value;pa=!0;if(!c.confirmOverwrite){ra.jumpTo(28);break}ma=aa;La=ma.author;ib=La.name;ca=ma.timestamp;qa="The current version of world "+h+" is not the most recent!\nA newer version by "+(ib+" was saved on ")+(Ve.date.format(new Date(ca),"yyyy-mm-dd HH:MM")+". Overwrite?");return ra.yield(g.confirm(["Version Conflict\n",
null,qa,{fontSize:16,fontWeight:"normal"}],{width:600}),29);case 29:pa=ra.yieldResult;case 28:if(!pa)return ra.return(null);g.changeMetaData("commit",Ve.obj.dissoc(aa,["preview"]),!0,!1);return ra.return(kx(g,Object.assign({},c,{morphicdb:a,showSaveDialog:!1})));case 26:console.error(xa),g.logError("Error saving world: "+xa),ra.jumpTo(18)}})}function zO(g,c){var h=g.row;g=g.column;var f=c.row;c=c.column;return h<f?-2:h===f?g<c?-1:g===c?0:1:2}function pp(g,c){return 0>oj.comparePosition(g,c)}function lx(g,
c){return 0>=oj.comparePosition(g,c)}function qp(g,c){return 0===oj.comparePosition(g,c)}function mx(g,c){return oj.lessPosition(g,c)?g:c}function nx(g,c){return oj.lessPosition(g,c)?c:g}function AO(g,c){if(!g||!c)return g==c;var h=!0,f={},m;for(m in g)if(f[m]=!0,!c.hasOwnProperty(m)||g[m]!==c[m]){h=!1;break}if(h)for(var n in c)if(!(f[n]||g.hasOwnProperty(n)&&g[n]===c[n])){h=!1;break}return h}function MG(g,c,h,f,m){m=void 0===m?"":m;var n="string"!==typeof g,a="string"!==typeof h;if(n||a){var d=[];
n?d.push(g,c):d.push(g+m,c);a?d.push(h,f):d.push(h+m,f);return d}return!c&&!f||c==f?[g+m+h,c]:c&&f?wg.shallowEquals(c,f)?[g+m+h,c]:[g+m,c,h,f]:[g+m,c,h,f]}function NG(g,c){c=void 0===c?"":c;if(2>=g.length)return g;var h=[],f=$jscomp.makeIterator(g),m=f.next().value,n=f.next().value;for(f=2;f<g.length;f+=2)n=wg.concatAttributePair(m,n,g[f],g[f+1],c),2>=n.length?(m=n[0],n=n[1]):(h.push.apply(h,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),m=n.next().value,n=n.next().value);
h.push(m,n);return h}function OG(g,c){for(var h=0,f=0;f<g.length;f+=2){var m=g[f],n=h+("string"===typeof m?m.length:1);if(n<c)h=n;else{if(h===c)return[g.slice(0,f),g.slice(f)];if(n===c)return[g.slice(0,f+2),g.slice(f+2)];if("string"!==typeof m)throw Error("Assuming text is a string for splitting it, got "+m+" instead!");var a=g[f+1],d=c-h;n=[].concat($jscomp.arrayFromIterable(g.slice(0,f)),[m.slice(0,d),a]);g=m.length===d?g.slice(f+2):[m.slice(c-h),a].concat($jscomp.arrayFromIterable(g.slice(f+2)));
return[n,g]}}return[g,[]]}function PG(g,c){var h=g;g=0;for(var f=[],m=0;m<c.length;m++){var n=$jscomp.makeIterator(wg.splitTextAndAttributesAt(h,c[m]-g));h=n.next().value;n=n.next().value;f.push(h);for(var a=0;a<h.length;a+=2)g+="string"===typeof h[a]?h[a].length:1;h=n}f.push(h);return f}function QG(g,c,h){h=void 0===h?!1:h;if(!g.length||2===g.length&&""==g[0])return h?c:c.slice();if(!c.length||2===c.length&&""==c[0])return h?g:g.slice();g=h?g:g.slice();for(h=0;h<c.length;h+=2)g.push(c[h],c[h+1]);
return g}function RG(g,c,h){var f=c.start;c=c.end;if(wg.eqPosition(f,c))return null;wg.lessPosition(c,f)&&(c=$jscomp.makeIterator([c,f]),f=c.next().value,c=c.next().value);var m=f;f=m.row;var n=m.column;m=c;c=m.row;m=m.column;var a=g.getLine(f),d=a.textAndAttributes,k=0;n=$jscomp.makeIterator(wg.splitTextAndAttributesAt(d,n));g=n.next().value;n=n.next().value;d.length=0;wg.textAndAttributesDo(g,function(l,p){k+="string"===typeof l?l.length:1;d.push(l,p)});if(f===c){var b=$jscomp.makeIterator(wg.splitTextAndAttributesAt(n,
m-k));n=b.next().value;b=b.next().value}wg.textAndAttributesDo(n,function(l,p){return d.push(l,h(a,p))});f===c&&wg.textAndAttributesDo(b,function(l,p){return d.push(l,p)});a._textAttributes=null;a.textAndAttributes=wg.joinTextAttributes(d);if(f!==c){b={};for(f+=1;f<c;b={$jscomp$loop$prop$textAndAttributes$1598$2721:b.$jscomp$loop$prop$textAndAttributes$1598$2721},f++)a=a.nextLine(),b.$jscomp$loop$prop$textAndAttributes$1598$2721=a.textAndAttributes,g=b.$jscomp$loop$prop$textAndAttributes$1598$2721.slice(),
b.$jscomp$loop$prop$textAndAttributes$1598$2721.length=0,wg.textAndAttributesDo(g,function(l){return function(p,q){return l.$jscomp$loop$prop$textAndAttributes$1598$2721.push(p,h(a,q))}}(b)),a._textAttributes=null,a.textAndAttributes=wg.joinTextAttributes(b.$jscomp$loop$prop$textAndAttributes$1598$2721);a=a.nextLine();var e=a.textAndAttributes;f=$jscomp.makeIterator(wg.splitTextAndAttributesAt(e,m));b=f.next().value;f=f.next().value;e.length=0;wg.textAndAttributesDo(b,function(l,p){return e.push(l,
h(a,p))});wg.textAndAttributesDo(f,function(l,p){return e.push(l,p)});a._textAttributes=null;a.textAndAttributes=wg.joinTextAttributes(e)}}function SG(g,c){var h=g.column;g=g.row;var f=[],m=[];c=$jscomp.makeIterator(wg.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var a=0;a<n.length;a+=2){var d=n[a];d=h+("string"===typeof d?d.length:1);f.push({start:{row:g,column:h},end:{row:g,column:d}});m.push(n[a],n[a+1]);h=d}h=0;g++}return{ranges:f,textAndAttributes:m}}
function sA(g,c){c=void 0===c?"\n":c;if(!g.length)return[];for(var h=[],f=[],m=0;m<g.length;m+=2){var n=g[m],a=g[m+1];if("string"!==typeof n)f.push(n,a);else for(;n.length;){var d=n.indexOf(c);if(-1===d){f.push(n,a);break}0<d&&f.push(n.slice(0,d),a);h.push(f);n=n.slice(d+1);f=[]}}f.length?h.push(f):(f=$jscomp.makeIterator(g.slice(-2)),g=f.next().value,f=f.next().value,"string"===typeof g&&g.endsWith(c)&&h.push(["",f]));return h}function TG(g,c){c=void 0===c?g.textAndAttributesInRange(g.selection.range):
c;var h=new g.constructor(Object.assign({},g.defaultTextStyle,{width:g.width,textAndAttributes:c}));c=h.textRenderer.directRenderTextLayerFn(h);g=h.textRenderer.directRenderLineFn(h);c=c();var f=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;f&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=f.whiteSpace,c.style.overflowWrap=f.overflowWrap,c.style.wordBreak=f.wordBreak,c.style.minWidth=f.minWidth,c.parentNode.removeChild(c));h=$jscomp.makeIterator(h.document.lines);
for(f=h.next();!f.done;f=h.next())c.appendChild(g(f.value));return c.outerHTML}function Aq(g){return g?g.replace(/^\s+|\s+$/g,""):""}function BO(g,c){var h=g&&"string"===typeof g.type,f=h?g:c,m;for(m in g){var n=g[m];Array.isArray(n)?n.forEach(function(a){BO(a,f)}):n&&"object"===typeof n&&BO(n,f)}h&&Object.defineProperty(g,"parent",{configurable:!0,writable:!0,enumerable:!1,value:c||null});return g}function UG(g){(this||Xca).options=g||{}}function Sj(g){g=g||{};w0.call(this||Wr,g);(this||Wr).indentation=
g.indent}function ru(g){throw new RangeError(Yca[g]);}function x0(g,c){var h=g.split("@"),f="";1<h.length&&(f=h[0]+"@",g=h[1]);g=g.replace(Zca,".").split(".");h=[];for(var m=g.length;m--;)h[m]=c(g[m]);c=h.join(".");return f+c}function y0(g){for(var c=[],h=0,f=g.length;h<f;){var m=g.charCodeAt(h++);if(55296<=m&&56319>=m&&h<f){var n=g.charCodeAt(h++);56320==(64512&n)?c.push(((1023&m)<<10)+(1023&n)+65536):(c.push(m),h--)}else c.push(m)}return c}function sn(){this.href=this.path=this.pathname=this.query=
this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function tA(g,c,h){if(g&&rp.isObject(g)&&g instanceof sn)return g;var f=new sn;return f.parse(g,c,h),f}function sp(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g));}function z0(g,c){for(var h,f="",m=0,n=-1,a=0,d=0;d<=g.length;++d){if(d<g.length)h=g.charCodeAt(d);else{if(47===h)break;h=47}if(47===h){if(n!==d-1&&1!==a)if(n!==d-1&&2===a){if(2>f.length||2!==
m||46!==f.charCodeAt(f.length-1)||46!==f.charCodeAt(f.length-2))if(2<f.length){if(n=f.lastIndexOf("/"),n!==f.length-1){-1===n?(f="",m=0):m=(f=f.slice(0,n)).length-1-f.lastIndexOf("/");n=d;a=0;continue}}else if(2===f.length||1===f.length){f="";m=0;n=d;a=0;continue}c&&(0<f.length?f+="/..":f="..",m=2)}else 0<f.length?f+="/"+g.slice(n+1,d):f=g.slice(n+1,d),m=d-n-1;n=d;a=0}else 46===h&&-1!==a?++a:a=-1}return f}function CO(g,c){try{return decodeURIComponent(g.join(""))}catch(f){}if(1===g.length)return g;
c=c||1;var h=g.slice(0,c);g=g.slice(c);return Array.prototype.concat.call([],CO(h),CO(g))}function DO(){return Array.prototype.reduce.call(arguments,function(g,c){return $ca.resolve(g,c)})}function A0(g){return"\\"===ada.sep?g.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):g}function uA(g){return bda(g.replace(/\+/g,"%2B"))}function VG(g,c,h){cda.nextTick(function(){g(c,h)})}function ox(g,c){try{return JSON.parse(g.replace(/^\)\]\}'/,""))}catch(h){throw h.sourceMapData=c,h;}}function B0(g,c,h){c=uA(c);
try{return String(g(c))}catch(f){throw f.sourceMapData=h,f;}}function C0(g,c,h,f){try{var m=D0(g,c)}catch(n){return VG(f,n)}if(!m||m.map)return VG(f,null,m);g=uA(m.url);h(g,function(n,a){if(n)return n.sourceMapData=m,f(n);m.map=String(a);try{m.map=ox(m.map,m)}catch(d){return f(d)}f(null,m)})}function E0(g,c,h){g=D0(g,c);if(!g||g.map)return g;g.map=B0(h,g.url,g);g.map=ox(g.map,g);return g}function D0(g,c){c=A0(c);g=(g=g.match(dda))?g[1]||g[2]||"":null;if(!g)return null;var h=g.match(eda);if(h){var f=
h[1]||"text/plain",m=h[2]||"";h=h[3]||"";c={sourceMappingURL:g,url:null,sourcesRelativeTo:c,map:h};if(!fda.test(f)){var n=Error("Unuseful data uri mime type: "+f);n.sourceMapData=c;throw n;}try{if(";base64"===m)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=F0(h);else{var a=F0(h),d=a.length,k=new Uint8Array(d);for(g=0;g<d;g++)k[g]=a.charCodeAt(g);n=(new TextDecoder(gda,{fatal:!0})).decode(k)}else n=decodeURIComponent(h);c.map=ox(n,c)}catch(b){throw b.sourceMapData=c,b;}return c}n=
DO(c,g);return{sourceMappingURL:g,url:n,sourcesRelativeTo:n,map:null}}function G0(g,c,h,f,m){"function"===typeof f&&(m=f,f={});var n=g.sources?g.sources.length:0,a={sourcesResolved:[],sourcesContent:[]};if(0===n)VG(m,null,a);else{var d=function(){n--;0===n&&m(null,a)};H0(g,c,f,function(k,b,e){a.sourcesResolved[e]=k;"string"===typeof b?(a.sourcesContent[e]=b,VG(d,null)):(k=uA(k),h(k,function(l,p){a.sourcesContent[e]=l?l:String(p);d()}))})}}function I0(g,c,h,f){var m={sourcesResolved:[],sourcesContent:[]};
if(!g.sources||0===g.sources.length)return m;H0(g,c,f,function(n,a,d){m.sourcesResolved[d]=n;if(null!==h)if("string"===typeof a)m.sourcesContent[d]=a;else{n=uA(n);try{m.sourcesContent[d]=String(h(n))}catch(k){m.sourcesContent[d]=k}}});return m}function H0(g,c,h,f){h=h||{};c=A0(c);for(var m,n,a=0,d=g.sources.length;a<d;a++)m=null,"string"===typeof h.sourceRoot?m=h.sourceRoot:"string"===typeof g.sourceRoot&&!1!==h.sourceRoot&&(m=g.sourceRoot),m=null===m||""===m?DO(c,g.sources[a]):DO(c,m.replace(hda,
"/"),g.sources[a]),n=(g.sourcesContent||[])[a],f(m,n,a)}function Nk(g){J0.call(this||EO,g)}function WG(g){if(g&&g.isListItem&&"string"===typeof g.string)return g;if(!g||!g.isListItem)return{isListItem:!0,string:String(g),value:g};var c=g.string||g.label||"no item.string";g.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(h,f){return 0==f%2?String(h):""}).join(""):String(c):String(c);return g}function XG(g){var c=g.filePath,h=g.worldName,f=g.snapshot,m=g.commit,n=g.loadingIndicator,a=
g.progress,d=void 0===g.logError?function(ka){return console.log(ka)}:g.logError,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){switch(ka.nextAddress){case 1:return ka.setCatchFinallyBlocks(2),k=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),
a.opacity=0,a.hasFixedPosition=!0,a.openInWorld(),a.bottomCenter=n.topCenter,ka.yield(Ed.polyfills(),4);case 4:return b=$world.env,Ed.doBootstrap?ka.yield(Ed.bootstrapLivelySystem(n,a,k),8):ka.yield(Ed.fastPrepLivelySystem(n),7);case 7:ka.jumpTo(6);break;case 8:case 6:return n.label="Loading lively.2lively...",ka.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:Ed.askBeforeQuit&&window.addEventListener("beforeunload",function(ea){return ea.returnValue="Really?"},!0);if("dynamic"!=
k["lively.morphic"]||Ed.fastLoad){e=lively.morphic;ka.jumpTo(10);break}n.label="Loading lively.morphic...";return ka.yield(lively.modules.importPackage("lively.morphic"),11);case 11:e=ka.yieldResult,a.finishPackage({packageName:"lively.morphic",loaded:!0});case 10:n.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;Ed.unregisterExtension("part");Ed.registerExtension(Ed.partResourceExtension);Ed.unregisterExtension("styleguide");
Ed.registerExtension(Ed.styleguideResourceExtension);lively.FreezerRuntime=!1;l=document.location;window.worldLoadingIndicator=n;ka.setCatchFinallyBlocks(12);p={root:$world.env.renderer.rootNode,verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(f)return f.startsWith("http")||(f=Ed.resource(System.baseURL).join(f).url),ka.yield(lively.modules.module("lively.morphic/world.js").recorder,33);if(m)return ka.yield(e.World.loadFromCommit(m,void 0,Object.assign({},p,{browserURL:"/worlds/load?name="+m.name})),
15);if(h)return"__newWorld__"==h?Object.values(k).every(function(ea){return"frozen"==ea})||Ed.fastLoad?ka.yield(lively.modules.module("lively.ide/world.js").recorder,29):ka.yield(lively.modules.System.import("lively.ide/world.js"),27):ka.yield(e.World.loadFromDB(h,void 0,void 0,Object.assign({},p,{browserURL:"/worlds/load?name="+h.replace(/\.json($|\?)/,"")})),15);if(!c){ka.jumpTo(15);break}return ka.yield(e.World.loadFromResource(Ed.resource(System.baseURL).join(c),void 0,Object.assign({},p,{browserURL:"/worlds/load?file="+
c})),15);case 27:return w=ka.yieldResult,q=w.LivelyWorld,ka.yield(lively.modules.System.import("lively.morphic/world-loading.js"),28);case 28:y=ka.yieldResult;u=y.loadWorld;ka.jumpTo(26);break;case 29:return A=ka.yieldResult,q=A.LivelyWorld,ka.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,30);case 30:C=ka.yieldResult,u=C.loadWorld;case 26:return ka.yield(u(new q({openNewProjectPrompt:!0}),void 0,p),15);case 33:return S=ka.yieldResult,D=S.World,ka.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,
34);case 34:return V=ka.yieldResult,I=V.loadWorld,ka.yield(lively.modules.module("lively.morphic/serialization.js").recorder,35);case 35:return ba=ka.yieldResult,ua=L=ba.loadMorphFromSnapshot,ka.yield(Ed.resource(f).readJson(),37);case 37:return ka.yield(ua(ka.yieldResult),36);case 36:return Fa=ka.yieldResult,ka.yield(I(new D({showsUserFlap:!1,extent:$world.extent}),void 0,p),38);case 38:F=ka.yieldResult,F.addMorph(Fa),F.onWindowResize();case 15:ka.leaveTryBlock(13,2);break;case 12:Y=ka.enterCatchBlock(2),
window.__loadError__=Y;case 13:return a.finishPackage({packageName:"world",loaded:!0}),a.fadeIntoBack(),window.addEventListener("popstate",function(ea){document.location==l&&document.location.reload()}),Ed.worldLoaded=!0,ka.yield($world.whenReady(),39);case 39:return n.remove(),ka.yield(b.renderer.worldMorph.whenRendered(),40);case 40:"dynamic"!=k["lively.morphic"]||Ed.fastLoad||(b.renderer.clear(),b.fontMetric.uninstall(),b.eventDispatcher.uninstall());ka.leaveTryBlock(0);break;case 2:throw Q=ka.enterCatchBlock(),
Q.originalErr&&(Q=Q.originalErr),W=Q.message,Q.stack!==Q.message&&(W+=Q.stack.includes(Q.message)?Q.stack.replace(Q.message,"\n"):Q.stack),d(W),Q;}})}Ia({$:zk,G:pD,H:gw,J:zq,P:Sg,Z:Un,_:So,a4:vG,a5:kx,aW:jA,aX:lA,aY:tG,ad:Jd,at:mw,au:qF,ax:hw,b:kh,b0:dw,b1:cw,b2:Qy,b3:Ry,b4:eq,b6:Ro,b7:dq,b8:zD,b9:xD,bA:yk,bC:Tf,bF:Vy,bH:rr,bI:Pe,bK:aq,bR:function(g){g=void 0===g?document.body:g;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){tn.default().world||(c=window.$world=window.$$world=
new Bq({name:K0.name,extent:kh(window.innerWidth,window.innerHeight)}),tn.default().setWorldRenderedOn(c,g,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var f=Xy(K0,{reinitializeIds:function(m){return m}});if(f.isWorld)f.position=kh(0,0),f.isEmbedded=!0,tn.default().setWorldRenderedOn(f,g,window.prerenderNode),"elastic"===f.resizePolicy&&f.execCommand("resize to fit window");else try{g!=document.body?(new window.ResizeObserver(function(m){return f.execCommand("resize on client",
m[0])})).observe(g):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return f.execCommand("resize on client")},f.openInWorld(kh(0,0)),f.execCommand("resize on client",g)}catch(m){f.position=kh(0,0)}});h.jumpToEnd()})},ba:yD,bb:AD,bc:FG,bd:rA,be:iA,bw:Tc,c:Mj,d:Ak,i:Sb,j:pu,l:mp,m:Zi,n:uG,o:cq,p:Uf,r:sc,u:nw,v:Ej,w:bw,x:Dj,y:nr,z:fw});var Le=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Le.applyExclude=vb;Le.parseQuery=Vb;Le.stringifyQuery=Eb;Le.withRelativePartsResolved=
Jc;Le._relativePathBetween_checkPathes=function(g,c){g.startsWith("/")&&(g=g.slice(1));c.startsWith("/")&&(c=c.slice(1));g=g.split("/");c=c.split("/");for(var h=0;h<c.length&&g[h]&&g[h]==c[h];h++);return"../".repeat(Math.max(0,c.length-h-1))+g.splice(h,g.length).join("/")};Le.relativePathBetween=Bc;Le.join=Uc;Le.parent=tc;Le.parents=oc;Le.resource=sc;Le.createFiles=Tc;Le.registerExtension=Fd;Le.unregisterExtension=Rd;Le.applyExclude=vb;Le.applyExclude=vb;Le.parseQuery=Vb;Le.parseQuery=Vb;Le.stringifyQuery=
Eb;Le.stringifyQuery=Eb;Le.slashEndRe=/\/+$/;Le.slashStartRe=/^\/+/;Le.protocolRe=/^[a-z0-9-_\.]+:/;Le.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Le.slashslashRe=/^\/\/[^\/]+/;Le.pathDotRe=/\/\.\//g;Le.pathDoubleDotRe=/\/[^\/]+\/\.\./;Le.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Le.withRelativePartsResolved=Jc;Le.withRelativePartsResolved=Jc;Le.relativePathBetween=Bc;Le.relativePathBetween=Bc;Le.join=Uc;Le.join=Uc;Le.parent=tc;Le.parent=tc;Le.parents=oc;Le.parents=oc;var su=Le.extensions||[];Le.extensions=su;Le.extensions=
su;Le.extensions=su;Le.resource=sc;Le.resource=sc;Le.createFiles=Tc;Le.createFiles=Tc;Le.registerExtension=Fd;Le.registerExtension=Fd;Le.unregisterExtension=Rd;Le.unregisterExtension=Rd;var YG=/^file:\/\/\/[a-z]:\//i;Le.windowsURLPrefixRe=YG;Le.windowsURLPrefixRe=YG;Le.windowsURLPrefixRe=YG;var ZG=/^[a-z]:\//i;Le.windowsPathPrefixRe=ZG;Le.windowsPathPrefixRe=ZG;Le.windowsPathPrefixRe=ZG;var $G=/^[a-z]:\/$/i;Le.windowsRootPathRe=$G;Le.windowsRootPathRe=$G;Le.windowsRootPathRe=$G;var Yh=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");
Yh.nyi=function(g,c){throw Error(c+" for "+g.constructor.name+" not yet implemented");};Yh.resource=sc;Yh.parseQuery=Vb;Yh.withRelativePartsResolved=Jc;Yh.relativePathBetween=Bc;Yh.windowsPathPrefixRe=ZG;Yh.stringifyQuery=Eb;Yh.slashEndRe=/\/+$/;Yh.slashStartRe=/^\/+/;Yh.protocolRe=/^[a-z0-9-_\.]+:/;Yh.slashslashRe=/^\/\/[^\/]+/;var Ef=function(g,c){if(!g)throw Error("Cannot create resource without url");this.url=String(g);this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=
this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};Ef.fromProps=function(g){g=void 0===g?{}:g;return(new this(g.url)).assignProperties(g)};Ef.prototype.equals=function(g){if(!g||this.constructor!==g.constructor)return!1;var c=this.url;g=g.url;"/"===c[c.length-1]&&(c=c.slice(0,-1));"/"===g[g.length-1]&&(g=g.slice(0,-1));return c===g};Ef.prototype.toString=function(){return this.constructor.name+'("'+this.url+'")'};Ef.prototype.newResource=function(g){return Yh.resource(g,
this)};Ef.prototype.path=function(){var g=this.url.replace(Yh.protocolRe,"").replace(Yh.slashslashRe,"");return""===g?"/":g};Ef.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};Ef.prototype.name=function(){var g=this.path(),c=g.lastIndexOf("?");-1<c&&(g=g.slice(0,c));g.endsWith("/")&&(g=g.slice(0,-1));g=g.split("/");return decodeURIComponent(g[g.length-1])};Ef.prototype.ext=function(){var g=this.url;if(g.endsWith("/"))return"";g=$jscomp.makeIterator(g.match(/\.([^\/\.]+$)/)||
["",""]);g.next();return g.next().value.toLowerCase()};Ef.prototype.nameWithoutExt=function(){var g=this.name(),c=g.lastIndexOf(".");0<c&&(g=g.slice(0,c));return g};Ef.prototype.scheme=function(){return this.url.split(":")[0]};Ef.prototype.host=function(){var g=this.url.indexOf("://");if(-1===g)return null;g=this.url.slice(g+3);var c=g.indexOf("/");return g.slice(0,-1<c?c:g.length)};Ef.prototype.schemeAndHost=function(){return this.isRoot()?this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};
Ef.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(Yh.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};Ef.prototype.parents=function(){for(var g=[],c=this.parent();c;)g.unshift(c),c=c.parent();return g};Ef.prototype.isParentOf=function(g){var c=this;return g.schemeAndHost()===this.schemeAndHost()&&g.parents().some(function(h){return h.equals(c)})};Ef.prototype.query=function(){return Yh.parseQuery(this.url)};Ef.prototype.withQuery=function(g){var c=
Object.assign({},this.query(),{},g);g=$jscomp.makeIterator(this.url.split("?")).next().value;c=Yh.stringifyQuery(c);return this.newResource(g+"?"+c)};Ef.prototype.commonDirectory=function(g){if(g.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(g))return this;if(this.isRoot())return this.asDirectory();if(g.isRoot())return g.asDirectory();g=g.parents();for(var c=this.parents(),h=this.root(),f=0;f<c.length;f++){var m=c[f],n=g[f];if(!n||!m.equals(n))break;h=m}return h};
Ef.prototype.withRelativePartsResolved=function(){var g=this.path(),c=Yh.withRelativePartsResolved(g);if(c===g)return this;c.startsWith("/")&&(c=c.slice(1));c[1]===":".startsWith("/")?c=c.slice(1):":"===c[1]&&c.match(Yh.windowsPathPrefixRe)&&(c=c.slice(3));return this.newResource(this.root().url+c)};Ef.prototype.relativePathFrom=function(g){return Yh.relativePathBetween(g.url,this.url)};Ef.prototype.withPath=function(g){return(this.isRoot()?this:this.root()).join(g)};Ef.prototype.join=function(g){return this.newResource(this.url.replace(Yh.slashEndRe,
"")+"/"+g.replace(Yh.slashStartRe,""))};Ef.prototype.isRoot=function(){return"/"===this.path()};Ef.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(Yh.slashEndRe)};Ef.prototype.isDirectory=function(){return!this.isFile()};Ef.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(Yh.slashEndRe,"")+"/")};Ef.prototype.root=function(){if(this.isRoot())return this;var g=this.url.slice(0,-this.path().length);return this.newResource(g+"/")};
Ef.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(Yh.slashEndRe,"")):this};Ef.prototype.assignProperties=function(g){for(var c in g)if("url"!==c){var h=c;if("isLink"===c||"isDirectory"===c)h="_"+c;this[h]=g[c]}return this};Ef.prototype.ensureExistance=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return h.yield(c.exists(),2);case 2:return h.yieldResult?h.return(c):h.yield(c.parent().ensureExistance(),
3);case 3:return c.isFile()?h.yield(c.write(g||""),5):h.yield(c.mkdir(),5);case 5:return h.return(c)}})};Ef.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if(h.isFile()){n=g.isFile()?g:g.join(h.name());if(!c){k.jumpTo(8);break}return k.yield(n.parent().ensureExistance(),8)}if(!g.isDirectory())throw Error("Cannot copy a directory to a file!");return k.yield(h.dirList("infinity"),4);case 4:return f=
k.yieldResult,m=f.map(function(b){return g.join(b.relativePathFrom(h))}),k.yield(g.ensureExistance(),5);case 5:return k.yield(f.reduceRight(function(b,e,l){return function(){return Promise.resolve(e.isDirectory()&&m[l].ensureExistance()).then(b)}},function(){return Promise.resolve()})(),6);case 6:return k.yield(f.reduceRight(function(b,e,l){return function(){return Promise.resolve(e.isFile()&&e.copyTo(m[l],!1)).then(b)}},function(){return Promise.resolve()})(),3);case 8:return a=n,d=a.write,k.yield(h.read(),
11);case 11:return k.yield(d.call(a,k.yieldResult),3);case 3:return k.return(h)}})};Ef.prototype.rename=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(c.copyTo(g),2);c.remove();return h.return(g)})};Ef.prototype.beBinary=function(g){return this.setBinary(!0)};Ef.prototype.setBinary=function(g){this.binary=g;return this};Ef.prototype.read=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Yh.nyi(g,
"read");c.jumpToEnd()})};Ef.prototype.write=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Yh.nyi(g,"write");c.jumpToEnd()})};Ef.prototype.mkdir=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Yh.nyi(g,"mkdir");c.jumpToEnd()})};Ef.prototype.exists=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Yh.nyi(g,"exists");c.jumpToEnd()})};Ef.prototype.remove=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){Yh.nyi(g,
"remove");c.jumpToEnd()})};Ef.prototype.dirList=function(g,c){var h=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){Yh.nyi(h,"dirList");f.jumpToEnd()})};Ef.prototype.readProperties=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){Yh.nyi(c,"readProperties");h.jumpToEnd()})};Ef.prototype.writeJson=function(g,c){return this.write((void 0===c?0:c)?JSON.stringify(g,null,2):JSON.stringify(g))};Ef.prototype.readJson=function(g){var c=this,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==
m.nextAddress?(h=JSON,f=h.parse,m.yield(c.read(),2)):m.return(f.call(h,m.yieldResult))})};Ef.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};$jscomp.global.Object.defineProperties(Ef.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});Yh.Resource=Ef;Yh.default=Ef;var px=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");
px.evalJS=rg;px.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;var ji=function(g,c,h,f){this.originalFunc=g;this.varMapping=c||{};this.setFuncSource(h||g);this.setFuncProperties(g||f)};ji.fromFunction=function(g,c){return new this(g,c||{})};ji.fromSource=function(g,c){return new this(null,c||{},g)};ji.prototype.setFuncSource=function(g){return this.source=g="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?
lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(g):String(g)};ji.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};ji.prototype.hasFuncSource=function(){return this.source&&!0};ji.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};ji.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};ji.prototype.setFuncProperties=function(g){var c=this.getFuncProperties(),h;for(h in g)g.hasOwnProperty(h)&&
(c[h]=g[h])};ji.prototype.lookup=function(g){return this.varMapping[g]};ji.prototype.parameterNames=function(g){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(g).params||[]).map(function(c){return"Identifier"===c.type?c.name:c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(g=px.parameterRegex.exec(g))?(g[1]||g[2]||"").split(",").map(function(c){return c.trim()}):[]};ji.prototype.firstParameter=function(g){return this.parameterNames(g)[0]||
null};ji.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),this.originalFunc)};ji.prototype.recreateFuncFromSource=function(g,c){c=[];var h="$super"===this.firstParameter(g);for(f in this.varMapping)this.varMapping.hasOwnProperty(f)&&"this"!=f&&c.push("var "+f+" = this.varMapping."+f+";\n");var f="";0<c.length&&(f+=c.join("\n"));h&&(f+="(function superWrapperForClosure() { return ");f+="("+g+")";h&&(f+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");
try{var m=px.evalJS.call(this,f)||this.couldNotCreateFunc(f);this.addFuncProperties(m);return this.originalFunc=m}catch(n){throw g="Cannot create function "+n+" src: "+f,console.error(g),Error(g);}};ji.prototype.addFuncProperties=function(g){var c=this.getFuncProperties(),h;for(h in c)c.hasOwnProperty(h)&&(g[h]=c[h]);this.addClosureInformation(g)};ji.prototype.couldNotCreateFunc=function(g){var c="Could not recreate closure from source: \n"+g;console.error(c);return function(){throw Error(c);}};ji.prototype.asFunction=
function(){return this.recreateFunc()};ji.prototype.addClosureInformation=function(g){g.hasLivelyClosure=!0;g.livelyClosure=this;return g};$jscomp.global.Object.defineProperties(ji.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});Ia("X",ji);px.Closure=ji;px.default=ji;var Xr=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");Xr.groupBy=Zb;var el=function(){};el.fromArray=
function(g,c,h){for(var f=new Xr.Group,m=0,n=g.length;m<n;m++){var a=c.call(h,g[m],m);Xr.Group.prototype.hasOwnProperty(a)&&(a="_"+a);f[a]||(f[a]=[]);f[a].push(g[m])}return f};el.prototype.toArray=function(){return this.reduceGroups(function(g,c,h){return g.concat([h])},[])};el.prototype.forEach=function(g,c){var h=this;Object.keys(h).forEach(function(f){h[f].forEach(g.bind(c,f))});return h};el.prototype.forEachGroup=function(g,c){var h=this;Object.keys(h).forEach(function(f){g.call(c,f,h[f])});return h};
el.prototype.map=function(g,c){var h=new Xr.Group;this.forEachGroup(function(f,m){h[f]=m.map(g.bind(c,f))});return h};el.prototype.mapGroups=function(g,c){var h=new Xr.Group;this.forEachGroup(function(f,m){h[f]=g.call(c,f,m)});return h};el.prototype.keys=function(){return Object.keys(this)};el.prototype.reduceGroups=function(g,c,h){this.forEachGroup(function(f,m){c=g.call(h,c,f,m)});return c};el.prototype.count=function(){return this.reduceGroups(function(g,c,h){g[c]=h.length;return g},{})};$jscomp.global.Object.defineProperties(el,
{by:{configurable:!0,enumerable:!0,get:function(){return Xr.groupBy}}});Xr.Group=el;Xr.default=el;var Jb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");Jb.range=ee;Jb.withN=Dc;Jb.genN=rd;Jb.filter=Ab;Jb.binarySearchFor=qc;Jb.findAndGet=Xc;Jb.filterByKey=zc;Jb.grep=ed;Jb.mask=wd;Jb.reject=xb;Jb.rejectByKey=hc;Jb.without=Cc;Jb.withoutAll=ic;Jb.uniq=Qc;Jb.uniqBy=jb;Jb.uniqByKey=fb;Jb.compact=Ob;Jb.mutableCompact=Cb;Jb.forEach=ob;Jb.zip=bc;Jb.flatten=Ma;Jb.flatmap=Db;Jb.interpose=gb;Jb.delimWith=
zb;Jb.map=ec;Jb.invoke=rc;Jb.pluck=Qb;Jb.reduce=Lb;Jb.reduceRight=Kb;Jb.some=za;Jb.every=bb;Jb.equals=P;Jb.deepEquals=X;Jb.isSorted=ya;Jb.sort=Ga;Jb.sortBy=wa;Jb.sortByKey=ja;Jb.reverse=lb;Jb.reversed=Ja;Jb.reMatches=Xb;Jb.first=Kc;Jb.last=Hb;Jb.intersect=Oc;Jb.union=qb;Jb.pushAt=xd;Jb.removeAt=he;Jb.remove=xc;Jb.pushAll=rb;Jb.pushAllAt=Ld;Jb.pushIfNotIncluded=sb;Jb.replaceAt=hb;Jb.clear=Ba;Jb.isSubset=J;Jb.doAndContinue=ta;Jb.nestedDelay=Ta;Jb.forEachShowingProgress=tb;Jb.swap=Rb;Jb.rotate=mc;Jb.groupBy=
Zb;Jb.groupByKey=Rc;Jb.partition=Sc;Jb.batchify=$d;Jb.toTuples=r;Jb.combinationsPick=Ud;Jb.combinations=ke;Jb.take=le;Jb.drop=ie;Jb.takeWhile=yd;Jb.dropWhile=Wd;Jb.shuffle=De;Jb.max=Fe;Jb.min=md;Jb.sum=tf;Jb.count=lc;Jb.size=kd;Jb.histogram=ge;Jb.clone=Ic;Jb.toArray=qe;Jb.each=Oa;Jb.all=Xa;Jb.any=Sa;Jb.collect=O;Jb.findAll=G;Jb.inject=Ea;Jb.mapAsyncSeries=N;Jb.mapAsync=oa;Jb.objectEquals=Al;Jb.delay=Cd;Jb.once=Pe;Jb.NullFunction=pb;Jb.Group=el;Jb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==
typeof window?window:global;Jb.features={from:!!Array.from,filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};Jb.from=Jb.features.from?Array.from:function(g){if(!g)return[];if(Array.isArray(g))return g;if(g.toArray)return g.toArray();for(var c=g.length,h=Array(c);c--;)h[c]=g[c];return h};Jb.detect=Jb.features.find?function(g,c,h){return g.find(c,h)}:function(g,c,h){for(var f,m=0,n=g.length;m<n;m++)if(f=g[m],c.call(h,
f,m))return f};Jb.findIndex=Jb.features.findIndex?function(g,c,h){return g.findIndex(c,h)}:function(g,c,h){var f=-1;return g.find(function(m,n){f=n;return c.call(m,h)})?f:-1};Jb.isArray=Array.isArray;Jb.includes=Jb.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1!==g.indexOf(c)};Jb.include=Jb.includes;Jb.permutations=function(){function g(c,h){return c.length?Jb.flatmap(c,function(f,m){return g(c.slice(0,m).concat(c.slice(m+1)),h.concat([f]))}):[h]}return function(c){return g(c,
[])}}();Jb.features.from||(Array.from=Jb.from);Jb.features.filter||(Array.prototype.filter=function(g,c){return Jb.filter(this,g,c)});Jb.features.find||(Array.prototype.find=function(g,c){return Jb.detect(this,g,c)});Jb.features.findIndex||(Array.prototype.findIndex=function(g,c){return Jb.findIndex(this,g,c)});Jb.features.includes||(Array.prototype.includes=function(g){return Jb.includes(this,g)});var FO=Jb.from,GO=Jb.detect,HO=Jb.findIndex,IO=Jb.isArray,JO=Jb.includes,KO=Jb.include,LO=Jb.permutations;
Jb.range=ee;Jb.range=ee;Jb.from=FO;Jb.from=FO;Jb.withN=Dc;Jb.withN=Dc;Jb.genN=rd;Jb.genN=rd;Jb.filter=Ab;Jb.filter=Ab;Jb.detect=GO;Jb.detect=GO;Jb.binarySearchFor=qc;Jb.binarySearchFor=qc;Jb.findIndex=HO;Jb.findIndex=HO;Jb.findAndGet=Xc;Jb.findAndGet=Xc;Jb.filterByKey=zc;Jb.filterByKey=zc;Jb.grep=ed;Jb.grep=ed;Jb.mask=wd;Jb.mask=wd;Jb.reject=xb;Jb.reject=xb;Jb.rejectByKey=hc;Jb.rejectByKey=hc;Jb.without=Cc;Jb.without=Cc;Jb.withoutAll=ic;Jb.withoutAll=ic;Jb.uniq=Qc;Jb.uniq=Qc;Jb.uniqBy=jb;Jb.uniqBy=
jb;Jb.uniqByKey=fb;Jb.uniqByKey=fb;Jb.compact=Ob;Jb.compact=Ob;Jb.mutableCompact=Cb;Jb.mutableCompact=Cb;Jb.forEach=ob;Jb.forEach=ob;Jb.zip=bc;Jb.zip=bc;Jb.flatten=Ma;Jb.flatten=Ma;Jb.flatmap=Db;Jb.flatmap=Db;Jb.interpose=gb;Jb.interpose=gb;Jb.delimWith=zb;Jb.delimWith=zb;Jb.map=ec;Jb.map=ec;Jb.invoke=rc;Jb.invoke=rc;Jb.pluck=Qb;Jb.pluck=Qb;Jb.reduce=Lb;Jb.reduce=Lb;Jb.reduceRight=Kb;Jb.reduceRight=Kb;Jb.isArray=IO;Jb.isArray=IO;Jb.includes=JO;Jb.includes=JO;Jb.include=KO;Jb.include=KO;Jb.some=za;
Jb.some=za;Jb.every=bb;Jb.every=bb;Jb.equals=P;Jb.equals=P;Jb.deepEquals=X;Jb.deepEquals=X;Jb.isSorted=ya;Jb.isSorted=ya;Jb.sort=Ga;Jb.sort=Ga;Jb.sortBy=wa;Jb.sortBy=wa;Jb.sortByKey=ja;Jb.sortByKey=ja;Jb.reverse=lb;Jb.reverse=lb;Jb.reversed=Ja;Jb.reversed=Ja;Jb.reMatches=Xb;Jb.reMatches=Xb;Jb.first=Kc;Jb.first=Kc;Jb.last=Hb;Jb.last=Hb;Jb.intersect=Oc;Jb.intersect=Oc;Jb.union=qb;Jb.union=qb;Jb.pushAt=xd;Jb.pushAt=xd;Jb.removeAt=he;Jb.removeAt=he;Jb.remove=xc;Jb.remove=xc;Jb.pushAll=rb;Jb.pushAll=rb;
Jb.pushAllAt=Ld;Jb.pushAllAt=Ld;Jb.pushIfNotIncluded=sb;Jb.pushIfNotIncluded=sb;Jb.replaceAt=hb;Jb.replaceAt=hb;Jb.clear=Ba;Jb.clear=Ba;Jb.isSubset=J;Jb.isSubset=J;Jb.doAndContinue=ta;Jb.doAndContinue=ta;Jb.nestedDelay=Ta;Jb.nestedDelay=Ta;Jb.forEachShowingProgress=tb;Jb.forEachShowingProgress=tb;Jb.swap=Rb;Jb.swap=Rb;Jb.rotate=mc;Jb.rotate=mc;Jb.groupBy=Zb;Jb.groupBy=Zb;Jb.groupByKey=Rc;Jb.groupByKey=Rc;Jb.partition=Sc;Jb.partition=Sc;Jb.batchify=$d;Jb.batchify=$d;Jb.toTuples=r;Jb.toTuples=r;Jb.permutations=
LO;Jb.permutations=LO;Jb.combinationsPick=Ud;Jb.combinationsPick=Ud;Jb.combinations=ke;Jb.combinations=ke;Jb.take=le;Jb.take=le;Jb.drop=ie;Jb.drop=ie;Jb.takeWhile=yd;Jb.takeWhile=yd;Jb.dropWhile=Wd;Jb.dropWhile=Wd;Jb.shuffle=De;Jb.shuffle=De;Jb.max=Fe;Jb.max=Fe;Jb.min=md;Jb.min=md;Jb.sum=tf;Jb.sum=tf;Jb.count=lc;Jb.count=lc;Jb.size=kd;Jb.size=kd;Jb.histogram=ge;Jb.histogram=ge;Jb.clone=Ic;Jb.clone=Ic;Jb.toArray=qe;Jb.toArray=qe;Jb.each=Oa;Jb.each=Oa;Jb.all=Xa;Jb.all=Xa;Jb.any=Sa;Jb.any=Sa;Jb.collect=
O;Jb.collect=O;Jb.findAll=G;Jb.findAll=G;Jb.inject=Ea;Jb.inject=Ea;Jb.mapAsyncSeries=N;Jb.mapAsyncSeries=N;Jb.mapAsync=oa;Jb.mapAsync=oa;var Ne=Object.freeze({__proto__:null,range:ee,from:FO,withN:Dc,genN:rd,filter:Ab,detect:GO,binarySearchFor:qc,findIndex:HO,findAndGet:Xc,filterByKey:zc,grep:ed,mask:wd,reject:xb,rejectByKey:hc,without:Cc,withoutAll:ic,uniq:Qc,uniqBy:jb,uniqByKey:fb,compact:Ob,mutableCompact:Cb,forEach:ob,zip:bc,flatten:Ma,flatmap:Db,interpose:gb,delimWith:zb,map:ec,invoke:rc,pluck:Qb,
reduce:Lb,reduceRight:Kb,isArray:IO,includes:JO,include:KO,some:za,every:bb,equals:P,deepEquals:X,isSorted:ya,sort:Ga,sortBy:wa,sortByKey:ja,reverse:lb,reversed:Ja,reMatches:Xb,first:Kc,last:Hb,intersect:Oc,union:qb,pushAt:xd,removeAt:he,remove:xc,pushAll:rb,pushAllAt:Ld,pushIfNotIncluded:sb,replaceAt:hb,clear:Ba,isSubset:J,doAndContinue:ta,nestedDelay:Ta,forEachShowingProgress:tb,swap:Rb,rotate:mc,groupBy:Zb,groupByKey:Rc,partition:Sc,batchify:$d,toTuples:r,permutations:LO,combinationsPick:Ud,combinations:ke,
take:le,drop:ie,takeWhile:yd,dropWhile:Wd,shuffle:De,max:Fe,min:md,sum:tf,count:lc,size:kd,histogram:ge,clone:Ic,toArray:qe,each:Oa,all:Xa,any:Sa,collect:O,findAll:G,inject:Ea,mapAsyncSeries:N,mapAsync:oa});Ia("a",Ne);var Lc=lively.FreezerRuntime.recorderFor("lively.lang/function.js");Lc.Empty=Ca;Lc.K=cb;Lc.Null=pb;Lc.False=yb;Lc.True=Yb;Lc.notYetImplemented=cc;Lc.all=Ec;Lc.own=od;Lc.argumentNames=Dd;Lc.qualifiedMethodName=ad;Lc.extractBody=Vd;Lc.timeToRun=Td;Lc.timeToRunN=Gd;Lc.delay=Cd;Lc.throttle=
ve;Lc.debounce=Ge;Lc.throttleNamed=ng;Lc.debounceNamed=Ag;Lc.createQueue=ag;Lc.workerWithCallbackQueue=Oe;Lc._composeAsyncDefaultEndCallback=function(g,c){g&&console.error("lively.lang.composeAsync error",g)};Lc.composeAsync=Yg;Lc.compose=Dg;Lc.flip=fh;Lc.withNull=yf;Lc.waitFor=Jf;Lc.waitForAll=Zd;Lc.curry=Fh;Lc.wrap=Fb;Lc.getOriginal=uc;Lc.wrapperChain=td;Lc.replaceMethodForOneCall=ud;Lc.once=Pe;Lc.either=sf;Lc.eitherNamed=Zg;Lc.evalJS=rg;Lc.fromString=Wi;Lc.asScript=yl;Lc.asScriptOf=Vk;Lc.addToObject=
kl;Lc.binds=rj;Lc.setLocalVarValue=Wk;Lc.getVarMapping=sj;Lc.setProperty=vk;Lc.functionNames=bk;Lc.localFunctionNames=Nh;Lc.logErrors=ck;Lc.logCompletion=cf;Lc.logCalls=ai;Lc.traceCalls=Xi;Lc.webkitStack=wk;Lc.objectMerge=z;Lc.safeToString=da;Lc.Closure=ji;Lc.arr=Ne;Lc._throttledByName={};Lc._debouncedByName={};Lc._queues={};Lc._queueUntilCallbacks={};Lc._eitherNameRegistry={};Lc.Empty=Ca;Lc.Empty=Ca;Lc.K=cb;Lc.K=cb;Lc.Null=pb;Lc.Null=pb;Lc.False=yb;Lc.False=yb;Lc.True=Yb;Lc.True=Yb;Lc.notYetImplemented=
cc;Lc.notYetImplemented=cc;Lc.withNull=yf;Lc.withNull=yf;Lc.all=Ec;Lc.all=Ec;Lc.own=od;Lc.own=od;Lc.argumentNames=Dd;Lc.argumentNames=Dd;Lc.qualifiedMethodName=ad;Lc.qualifiedMethodName=ad;Lc.extractBody=Vd;Lc.extractBody=Vd;Lc.timeToRun=Td;Lc.timeToRun=Td;Lc.timeToRunN=Gd;Lc.timeToRunN=Gd;Lc.delay=Cd;Lc.delay=Cd;Lc.throttle=ve;Lc.throttle=ve;Lc.debounce=Ge;Lc.debounce=Ge;Lc.throttleNamed=ng;Lc.throttleNamed=ng;Lc.debounceNamed=Ag;Lc.debounceNamed=Ag;Lc.createQueue=ag;Lc.createQueue=ag;Lc.workerWithCallbackQueue=
Oe;Lc.workerWithCallbackQueue=Oe;Lc.composeAsync=Yg;Lc.composeAsync=Yg;Lc.compose=Dg;Lc.compose=Dg;Lc.waitFor=Jf;Lc.waitFor=Jf;Lc.waitForAll=Zd;Lc.waitForAll=Zd;Lc.flip=fh;Lc.flip=fh;Lc.curry=Fh;Lc.curry=Fh;Lc.wrap=Fb;Lc.wrap=Fb;Lc.binds=rj;Lc.binds=rj;Lc.getOriginal=uc;Lc.getOriginal=uc;Lc.wrapperChain=td;Lc.wrapperChain=td;Lc.replaceMethodForOneCall=ud;Lc.replaceMethodForOneCall=ud;Lc.once=Pe;Lc.once=Pe;Lc.either=sf;Lc.either=sf;Lc.eitherNamed=Zg;Lc.eitherNamed=Zg;Lc.evalJS=rg;Lc.evalJS=rg;Lc.fromString=
Wi;Lc.fromString=Wi;Lc.asScript=yl;Lc.asScript=yl;Lc.asScriptOf=Vk;Lc.asScriptOf=Vk;Lc.addToObject=kl;Lc.addToObject=kl;Lc.setLocalVarValue=Wk;Lc.setLocalVarValue=Wk;Lc.getVarMapping=sj;Lc.getVarMapping=sj;Lc.setProperty=vk;Lc.setProperty=vk;Lc.functionNames=bk;Lc.functionNames=bk;Lc.localFunctionNames=Nh;Lc.localFunctionNames=Nh;Lc.logErrors=ck;Lc.logErrors=ck;Lc.logCompletion=cf;Lc.logCompletion=cf;Lc.logCalls=ai;Lc.logCalls=ai;Lc.traceCalls=Xi;Lc.traceCalls=Xi;Lc.webkitStack=wk;Lc.webkitStack=
wk;var Tj=Object.freeze({__proto__:null,Empty:Ca,K:cb,Null:pb,False:yb,True:Yb,notYetImplemented:cc,withNull:yf,all:Ec,own:od,argumentNames:Dd,qualifiedMethodName:ad,extractBody:Vd,timeToRun:Td,timeToRunN:Gd,delay:Cd,throttle:ve,debounce:Ge,throttleNamed:ng,debounceNamed:Ag,createQueue:ag,workerWithCallbackQueue:Oe,composeAsync:Yg,compose:Dg,waitFor:Jf,waitForAll:Zd,flip:fh,curry:Fh,wrap:Fb,binds:rj,getOriginal:uc,wrapperChain:td,replaceMethodForOneCall:ud,once:Pe,either:sf,eitherNamed:Zg,evalJS:rg,
fromString:Wi,asScript:yl,asScriptOf:Vk,addToObject:kl,setLocalVarValue:Wk,getVarMapping:sj,setProperty:vk,functionNames:bk,localFunctionNames:Nh,logErrors:ck,logCompletion:cf,logCalls:ai,traceCalls:Xi,webkitStack:wk});Ia("f",Tj);var zd=lively.FreezerRuntime.recorderFor("lively.lang/object.js");zd.print=Xl;zd.indent=function(g,c,h){if(!h||0>=h)return g;for(;0<h;)h--,g=c+g;return g};zd.isArray=Jj;zd.isElement=Kj;zd.isFunction=On;zd.isBoolean=Af;zd.isString=Xk;zd.isNumber=rm;zd.isUndefined=ej;zd.isRegExp=
ll;zd.isObject=zl;zd.isPrimitive=Dl;zd.isEmpty=Cl;zd.equals=Al;zd.values=Wm;zd.select=Bl;zd.dissoc=sm;zd.addScript=Ub;zd.extend=Eh;zd.clone=ha;zd.extract=t;zd.inspect=x;zd.merge=z;zd.deepMerge=v;zd.sortKeysWithBeforeAndAfterConstraints=B;zd.inherit=E;zd.valuesInPropertyHierarchy=H;zd.mergePropertyInHierarchy=T;zd.deepCopy=ia;zd.typeStringOf=K;zd.shortPrintStringOf=R;zd.isMutableType=fa;zd.safeToString=da;zd.asObject=Ha;zd.newKeyIn=Ra;zd.functionFromString=Wi;zd.asScriptOf=Vk;zd.argumentNames=Dd;zd.arrayDeepEquals=
X;zd.isSubset=J;zd.flatten=Ma;zd.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(g){var c={},h;for(h in g)Object.prototype.hasOwnProperty.call(g,h)&&Object.defineProperty(c,h,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(g,h)});return c};zd.keys=Object.keys;var MO=zd.keys,NO=zd.getOwnPropertyDescriptors;zd.isArray=Jj;zd.isArray=Jj;zd.isElement=Kj;zd.isElement=Kj;zd.isFunction=On;zd.isFunction=
On;zd.isBoolean=Af;zd.isBoolean=Af;zd.isString=Xk;zd.isString=Xk;zd.isNumber=rm;zd.isNumber=rm;zd.isUndefined=ej;zd.isUndefined=ej;zd.isRegExp=ll;zd.isRegExp=ll;zd.isObject=zl;zd.isObject=zl;zd.isPrimitive=Dl;zd.isPrimitive=Dl;zd.isEmpty=Cl;zd.isEmpty=Cl;zd.equals=Al;zd.equals=Al;zd.keys=MO;zd.keys=MO;zd.values=Wm;zd.values=Wm;zd.select=Bl;zd.select=Bl;zd.dissoc=sm;zd.dissoc=sm;zd.addScript=Ub;zd.addScript=Ub;zd.extend=Eh;zd.extend=Eh;zd.clone=ha;zd.clone=ha;zd.extract=t;zd.extract=t;zd.inspect=x;
zd.inspect=x;zd.merge=z;zd.merge=z;zd.deepMerge=v;zd.deepMerge=v;zd.inherit=E;zd.inherit=E;zd.valuesInPropertyHierarchy=H;zd.valuesInPropertyHierarchy=H;zd.mergePropertyInHierarchy=T;zd.mergePropertyInHierarchy=T;zd.sortKeysWithBeforeAndAfterConstraints=B;zd.sortKeysWithBeforeAndAfterConstraints=B;zd.deepCopy=ia;zd.deepCopy=ia;zd.typeStringOf=K;zd.typeStringOf=K;zd.shortPrintStringOf=R;zd.shortPrintStringOf=R;zd.isMutableType=fa;zd.isMutableType=fa;zd.safeToString=da;zd.safeToString=da;zd.asObject=
Ha;zd.asObject=Ha;zd.newKeyIn=Ra;zd.newKeyIn=Ra;zd.getOwnPropertyDescriptors=NO;zd.getOwnPropertyDescriptors=NO;var ff=Object.freeze({__proto__:null,isArray:Jj,isElement:Kj,isFunction:On,isBoolean:Af,isString:Xk,isNumber:rm,isUndefined:ej,isRegExp:ll,isObject:zl,isPrimitive:Dl,isEmpty:Cl,equals:Al,keys:MO,values:Wm,select:Bl,dissoc:sm,addScript:Ub,extend:Eh,clone:ha,extract:t,inspect:x,merge:z,deepMerge:v,inherit:E,valuesInPropertyHierarchy:H,mergePropertyInHierarchy:T,sortKeysWithBeforeAndAfterConstraints:B,
deepCopy:ia,typeStringOf:K,shortPrintStringOf:R,isMutableType:fa,safeToString:da,asObject:Ha,newKeyIn:Ra,getOwnPropertyDescriptors:NO});Ia("Y",ff);var OO={};(function(){var g=[].slice;var c={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},
7:{_:"an"},8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},"\u00a3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},
g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{"\u00ed":{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},"\u00c1":{_:"an"},"\u00e1":{";":{_:"an"}},"\u00e0":{_:"an"},"\u00c4":{_:"an"},"\u0101":{_:"an"},
"\u00c5":{_:"an"},"\u00e6":{_:"an"},"\u00c6":{n:{_:"a"},_:"an"},D:{"\u00fa":{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},"\u00e9":{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},
_:"a"},_:"an"},"\u00c9":{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},
I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},"\u03c3":{_:"an"}},G:{h:{a:{e:{_:"an"},
i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},
a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},
i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\u00a3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},"\u0130":{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},
p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},
S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},
"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"}," ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},
R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\u00b2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},
S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\u00d7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},
c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},"\u00d3":{_:"an"},"\u00d6":{_:"an"},"\u00f6":{_:"an"},
"\u014c":{_:"an"},"\u014d":{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},
f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},
":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},
C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},
R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},"\u00e0":{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},
n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},
d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},
t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},"\u00fc":{_:"an"},"\u00dc":{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},_:"an"},Y:{p:{_:"an"}},"\u03b1":{_:"an"},"\u03b5":{_:"an"},"\u03c9":{_:"an"}};var h=function(f,m,n){null==m&&(m=c);null==n&&(n="a");if(null==f)return n;
var a=f.slice(0,1);m=m[a];return null!=a&&null!=m?h(f.slice(1),m,m._||n):n};OO={find:h,articlize:function(){var f=1<=arguments.length?g.call(arguments,0):[];var m;var n=[];var a=0;for(m=f.length;a<m;a++){var d=f[a];null!=d&&n.push(h(d)+" "+d)}return 1===f.length?n[0]:n}}}).call(OO);var ida=OO,pc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");pc.format=Za;pc.formatFromArray=Ya;pc.indent=Ib;pc.minIndent=jc;pc.changeIndent=yc;pc.quote=vc;pc.articlize=Gc;pc.findArticle=cd;pc.print=sd;pc.printNested=
Mb;pc.pad=Sd;pc.printTable=Se;pc.printTree=Hc;pc.toArray=df;pc.lines=kg;pc.paragraphs=$e;pc.nonEmptyLines=Ee;pc.tokens=Nd;pc.tableize=Kf;pc.unescapeCharacterEntities=Sf;pc.toQueryParams=mf;pc.base64EncodeUnicode=xk;pc.base64DecodeUnicode=Yk;pc.normalizePath=qi;pc.joinPath=Jd;pc.newUUID=Tf;pc.createDataURI=Gi;pc.hashCode=zi;pc.md5=Xm;pc.reMatches=Yl;pc.stringMatch=Qe;pc.peekRight=Hi;pc.peekLeft=ef;pc.lineIndexComputer=sg;pc.lineNumberToIndexesComputer=Oh;pc.lineRanges=Zk;pc.findLineWithIndexInLineRanges=
Hs;pc.regexIndexOf=Is;pc.regexLastIndexOf=Rp;pc.diff=Pn;pc.empty=Qn;pc.startsWithVowel=tm;pc.withDecimalPrecision=Zl;pc.capitalize=Sp;pc.camelCaseString=Js;pc.camelize=Ks;pc.truncate=Ls;pc.truncateLeft=iv;pc.regExpEscape=Ms;pc.succ=Rn;pc.digitValue=jv;pc.longestCommonSubstring=kv;pc.applyChange=lv;pc.applyChanges=mv;pc.levenshtein=nv;pc.inspectObject=x;pc.min=md;pc.last=Hb;pc.articles=ida;pc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,
endsWith:!!String.prototype.endsWith};pc.pathDotRe=/\/\.\//g;pc.pathDoubleDotRe=/\/[^\/]+\/\.\./;pc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;pc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;pc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";pc.newUUIDRe=/[xy]/g;pc.newUUIDReplacer=function(g){var c=16*Math.random()|0;return("x"==g?c:c&3|8).toString(16)};pc.includes=pc.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1<g.indexOf(c)};pc.include=pc.includes;pc.startsWith=pc.features.startsWith?
function(g,c){return g.startsWith(c)}:function(g,c){return 0===g.indexOf(c)};pc.endsWith=pc.features.endsWith?function(g,c){return g.endsWith(c)}:function(g,c){var h=g.length-c.length;return 0<=h&&g.lastIndexOf(c)===h};pc.times=pc.features.repeat?function(g,c){return g.repeat(c)}:function(g,c){return 1>c?"":Array(c+1).join(g)};var PO=pc.includes,QO=pc.include,RO=pc.startsWith,SO=pc.endsWith,TO=pc.times;pc.format=Za;pc.format=Za;pc.formatFromArray=Ya;pc.formatFromArray=Ya;pc.indent=Ib;pc.indent=Ib;
pc.minIndent=jc;pc.minIndent=jc;pc.changeIndent=yc;pc.changeIndent=yc;pc.quote=vc;pc.quote=vc;pc.articlize=Gc;pc.articlize=Gc;pc.findArticle=cd;pc.findArticle=cd;pc.print=sd;pc.print=sd;pc.printNested=Mb;pc.printNested=Mb;pc.pad=Sd;pc.pad=Sd;pc.printTable=Se;pc.printTable=Se;pc.printTree=Hc;pc.printTree=Hc;pc.toArray=df;pc.toArray=df;pc.lines=kg;pc.lines=kg;pc.paragraphs=$e;pc.paragraphs=$e;pc.nonEmptyLines=Ee;pc.nonEmptyLines=Ee;pc.tokens=Nd;pc.tokens=Nd;pc.tableize=Kf;pc.tableize=Kf;pc.unescapeCharacterEntities=
Sf;pc.unescapeCharacterEntities=Sf;pc.base64EncodeUnicode=xk;pc.base64EncodeUnicode=xk;pc.base64DecodeUnicode=Yk;pc.base64DecodeUnicode=Yk;pc.toQueryParams=mf;pc.toQueryParams=mf;pc.normalizePath=qi;pc.normalizePath=qi;pc.joinPath=Jd;pc.joinPath=Jd;pc.newUUID=Tf;pc.newUUID=Tf;pc.createDataURI=Gi;pc.createDataURI=Gi;pc.hashCode=zi;pc.hashCode=zi;pc.md5=Xm;pc.md5=Xm;pc.reMatches=Yl;pc.reMatches=Yl;pc.stringMatch=Qe;pc.stringMatch=Qe;pc.peekRight=Hi;pc.peekRight=Hi;pc.peekLeft=ef;pc.peekLeft=ef;pc.lineIndexComputer=
sg;pc.lineIndexComputer=sg;pc.lineNumberToIndexesComputer=Oh;pc.lineNumberToIndexesComputer=Oh;pc.findLineWithIndexInLineRanges=Hs;pc.findLineWithIndexInLineRanges=Hs;pc.regexIndexOf=Is;pc.regexIndexOf=Is;pc.regexLastIndexOf=Rp;pc.regexLastIndexOf=Rp;pc.lineRanges=Zk;pc.lineRanges=Zk;pc.diff=Pn;pc.diff=Pn;pc.empty=Qn;pc.empty=Qn;pc.includes=PO;pc.includes=PO;pc.include=QO;pc.include=QO;pc.startsWith=RO;pc.startsWith=RO;pc.startsWithVowel=tm;pc.startsWithVowel=tm;pc.endsWith=SO;pc.endsWith=SO;pc.withDecimalPrecision=
Zl;pc.withDecimalPrecision=Zl;pc.capitalize=Sp;pc.capitalize=Sp;pc.camelCaseString=Js;pc.camelCaseString=Js;pc.camelize=Ks;pc.camelize=Ks;pc.truncate=Ls;pc.truncate=Ls;pc.truncateLeft=iv;pc.truncateLeft=iv;pc.regExpEscape=Ms;pc.regExpEscape=Ms;pc.succ=Rn;pc.succ=Rn;pc.digitValue=jv;pc.digitValue=jv;pc.times=TO;pc.times=TO;pc.longestCommonSubstring=kv;pc.longestCommonSubstring=kv;pc.applyChange=lv;pc.applyChange=lv;pc.applyChanges=mv;pc.applyChanges=mv;pc.levenshtein=nv;pc.levenshtein=nv;var Bg=Object.freeze({__proto__:null,
format:Za,formatFromArray:Ya,indent:Ib,minIndent:jc,changeIndent:yc,quote:vc,articlize:Gc,findArticle:cd,print:sd,printNested:Mb,pad:Sd,printTable:Se,printTree:Hc,toArray:df,lines:kg,paragraphs:$e,nonEmptyLines:Ee,tokens:Nd,tableize:Kf,unescapeCharacterEntities:Sf,base64EncodeUnicode:xk,base64DecodeUnicode:Yk,toQueryParams:mf,normalizePath:qi,joinPath:Jd,newUUID:Tf,createDataURI:Gi,hashCode:zi,md5:Xm,reMatches:Yl,stringMatch:Qe,peekRight:Hi,peekLeft:ef,lineIndexComputer:sg,lineNumberToIndexesComputer:Oh,
findLineWithIndexInLineRanges:Hs,regexIndexOf:Is,regexLastIndexOf:Rp,lineRanges:Zk,diff:Pn,empty:Qn,includes:PO,include:QO,startsWith:RO,startsWithVowel:tm,endsWith:SO,withDecimalPrecision:Zl,capitalize:Sp,camelCaseString:Js,camelize:Ks,truncate:Ls,truncateLeft:iv,regExpEscape:Ms,succ:Rn,digitValue:jv,times:TO,longestCommonSubstring:kv,applyChange:lv,applyChanges:mv,levenshtein:nv});Ia("s",Bg);var uf=lively.FreezerRuntime.recorderFor("lively.lang/number.js");uf.random=ov;uf.randomSmallerInteger=pv;
uf.humanReadableByteSize=qv;uf.average=rv;uf.averageInc=sv;uf.median=tv;uf.between=uv;uf.clamp=vv;uf.sort=wv;uf.parseLength=xv;uf.precision=yv;uf.roundTo=zv;uf.detent=Av;uf.toDegrees=Ns;uf.toRadians=Os;uf.backoff=Ps;uf.interpolate=Bv;uf.normalRandom=function(g,c){var h,f=!1;return function(m,n){if(f)return f=!1,h*n+m;do{var a=2*Math.random()-1;var d=2*Math.random()-1;var k=a*a+d*d}while(1<=k||0==k);k=Math.sqrt(-2*Math.log(k)/k);h=d*k;f=!0;return m+n*a*k}}();uf.convertLength=function(){function g(c,
h){if("cm"===h)return c;if("mm"===h)return.1*c;if("in"===h)return 2.54*c;if("px"===h)return c*g(1/96,"in");if("pt"===h)return c*g(1/72,"in");if("pc"===h)return c*g(12,"pt")}return function n(h,f,m){return f===m?h:"cm"===m?g(h,f):"cm"===f?h/g(1,m):n(n(h,f,"cm"),"cm",m)}}();var UO=uf.normalRandom,VO=uf.convertLength;uf.random=ov;uf.random=ov;uf.normalRandom=UO;uf.normalRandom=UO;uf.randomSmallerInteger=pv;uf.randomSmallerInteger=pv;uf.humanReadableByteSize=qv;uf.humanReadableByteSize=qv;uf.average=
rv;uf.average=rv;uf.averageInc=sv;uf.averageInc=sv;uf.median=tv;uf.median=tv;uf.between=uv;uf.between=uv;uf.sort=wv;uf.sort=wv;uf.parseLength=xv;uf.parseLength=xv;uf.convertLength=VO;uf.convertLength=VO;uf.roundTo=zv;uf.roundTo=zv;uf.detent=Av;uf.detent=Av;uf.toDegrees=Ns;uf.toDegrees=Ns;uf.toRadians=Os;uf.toRadians=Os;uf.backoff=Ps;uf.backoff=Ps;uf.interpolate=Bv;uf.interpolate=Bv;uf.clamp=vv;uf.clamp=vv;uf.precision=yv;uf.precision=yv;var Gj=Object.freeze({__proto__:null,random:ov,normalRandom:UO,
randomSmallerInteger:pv,humanReadableByteSize:qv,average:rv,averageInc:sv,median:tv,between:uv,sort:wv,parseLength:xv,convertLength:VO,roundTo:zv,detent:Av,toDegrees:Ns,toRadians:Os,backoff:Ps,interpolate:Bv,clamp:vv,precision:yv});Ia("ac",Gj);var si=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");si.all=Cv;si.allOwnPropertiesOrFunctions=No;si.own=Tp;si.forEachOwn=Qs;si.nameFor=Zq;si.values=Rs;si.ownValues=Up;si.any=Dv;si.allProperties=$q;si.hash=ar;si.all=Cv;si.all=Cv;si.allOwnPropertiesOrFunctions=
No;si.allOwnPropertiesOrFunctions=No;si.own=Tp;si.own=Tp;si.forEachOwn=Qs;si.forEachOwn=Qs;si.nameFor=Zq;si.nameFor=Zq;si.values=Rs;si.values=Rs;si.ownValues=Up;si.ownValues=Up;si.any=Dv;si.any=Dv;si.allProperties=$q;si.allProperties=$q;si.hash=ar;si.hash=ar;var km=Object.freeze({__proto__:null,all:Cv,allOwnPropertiesOrFunctions:No,own:Tp,forEachOwn:Qs,nameFor:Zq,values:Rs,ownValues:Up,any:Dv,allProperties:$q,hash:ar});Ia("aw",km);var $l=lively.FreezerRuntime.recorderFor("lively.lang/date.js");$l.format=
Vp;$l.equals=Ss;$l.relativeTo=Ts;$l.dateFormat=function(){var g=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,f=/[^-+\dA-Z]/g,m=function(n,a){n=String(n);for(a=a||2;n.length<a;)n="0"+n;return n};return function(n,a,d){var k=g;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(a=n,n=void 0);
n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");a=String(k.masks[a]||a||k.masks.default);"UTC:"==a.slice(0,4)&&(a=a.slice(4),d=!0);var b=d?"getUTC":"get",e=n[b+"Date"](),l=n[b+"Day"](),p=n[b+"Month"](),q=n[b+"FullYear"](),u=n[b+"Hours"](),w=n[b+"Minutes"](),y=n[b+"Seconds"]();b=n[b+"Milliseconds"]();var A=d?0:n.getTimezoneOffset(),C={d:e,dd:m(e),ddd:k.i18n.dayNames[l],dddd:k.i18n.dayNames[l+7],m:p+1,mm:m(p+1),mmm:k.i18n.monthNames[p],mmmm:k.i18n.monthNames[p+12],yy:String(q).slice(2),
yyyy:q,h:u%12||12,hh:m(u%12||12),H:u,HH:m(u),M:w,MM:m(w),s:y,ss:m(y),l:m(b,3),L:m(99<b?Math.round(b/10):b),t:12>u?"a":"p",tt:12>u?"am":"pm",T:12>u?"A":"P",TT:12>u?"AM":"PM",Z:d?"UTC":(String(n).match(h)||[""]).pop().replace(f,""),o:(0<A?"-":"+")+m(100*Math.floor(Math.abs(A)/60)+Math.abs(A)%60,4),S:["th","st","nd","rd"][3<e%10?0:(10!=e%100-e%10)*e%10]};return a.replace(c,function(D){return D in C?C[D]:D.slice(1,D.length-1)})}}();g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",
longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};g.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
return g}();var WO=$l.dateFormat;$l.format=Vp;$l.format=Vp;$l.equals=Ss;$l.equals=Ss;$l.relativeTo=Ts;$l.relativeTo=Ts;$l.dateFormat=WO;$l.dateFormat=WO;var tp=Object.freeze({__proto__:null,format:Vp,equals:Ss,relativeTo:Ts,dateFormat:WO});Ia("a1",tp);var wf=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");wf.promise=Uf;wf.delay=my;wf.delayReject=ny;wf.timeout=oy;wf.timeToRun=py;wf.clearPendingWaitFors=function(){Object.kets(wf.waitForClosures).forEach(function(g){delete wf.waitForClosures[g];
clearInterval(g)})};wf.waitFor=Us;wf.deferred=qy;wf.convertCallbackFun=ry;wf.convertCallbackFunWithManyArgs=Vs;wf._chainResolveNext=YB;wf.chain=Ev;wf.promise_finally=Ws;wf.parallel=sy;wf.newUUID=Tf;wf.pushIfNotIncluded=sb;wf.removeAt=he;wf.waitForClosures={};Object.assign(wf.promise,{delay:wf.delay,delayReject:wf.delayReject,timeout:wf.timeout,waitFor:wf.waitFor,deferred:wf.deferred,convertCallbackFun:wf.convertCallbackFun,convertCallbackFunWithManyArgs:wf.convertCallbackFunWithManyArgs,chain:wf.chain,
finally:wf.promise_finally,parallel:wf.parallel});wf.promise=Uf;wf.promise=Uf;wf.delay=my;wf.delay=my;wf.delayReject=ny;wf.delayReject=ny;wf.timeout=oy;wf.timeout=oy;wf.timeToRun=py;wf.timeToRun=py;wf.waitFor=Us;wf.waitFor=Us;wf.deferred=qy;wf.deferred=qy;wf.convertCallbackFun=ry;wf.convertCallbackFun=ry;wf.convertCallbackFunWithManyArgs=Vs;wf.convertCallbackFunWithManyArgs=Vs;wf.chain=Ev;wf.chain=Ev;wf.finally=Ws;wf.promise_finally=Ws;wf.parallel=sy;wf.parallel=sy;wf.default=Uf;var up=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");
up.Path=Sg;up.inspect=x;Object.assign(up.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(g){"string"===typeof g&&""!==g&&g!==this.splitter?(this._parts=g.split(this.splitter),this._path=g):Array.isArray(g)?(this._parts=[].concat(g),this._path=g.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(g){g&&(this.splitter=g);return this},map:function(g){this._mapper=g;return this},parts:function(){return this._parts},size:function(){return this._parts.length},
slice:function(g,c){return up.Path(this.parts().slice(g,c))},normalizePath:function(){return this._path},isRoot:function(g){return 0===this._parts.length},isIn:function(g){return this.isRoot()?!0:(g=this.get(g,-1))&&g.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(g){return g&&g.isPathAccessor&&this.parts().equals(g.parts())},isParentPathOf:function(g){g=g&&g.isPathAccessor?g:up.Path(g);var c=this.parts();g=g.parts();for(var h=0;h<c.length;h++)if(c[h]!=g[h])return!1;return!0},
relativePathTo:function(g){g=up.Path(g);return this.isParentPathOf(g)?g.slice(this.size(),g.size()):void 0},del:function(g){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var h=this._parts[c];if(g.hasOwnProperty(h))g=g[h];else return!1}return delete g[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(g,c,h){if(this.isRoot())return h(null,null);for(var f=0;f<this._parts.length-1;f++){var m=this._parts[f];if(!g.hasOwnProperty(m)||"object"!==typeof g[m]&&"function"!==
typeof g[m])if(c)g=g[m]={};else return h(null,m);else g=g[m]}return h(g,this._parts[this._parts.length-1])},set:function(g,c,h){return this.withParentAndKeyDo(g,h,function(f,m){return f?f[m]=c:void 0})},defineProperty:function(g,c,h){return this.withParentAndKeyDo(g,h,function(f,m){return f?Object.defineProperty(f,m,c):void 0})},get:function(g,c){var h=this;return(c?this._parts.slice(0,c):this._parts).reduce(function(f,m){return f?h._mapper?h._mapper(m,f[m]):f[m]:f},g)},concat:function(g,c){return up.Path(this.parts().concat(up.Path(g,
c).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+up.inspect(this.parts())+")"},watch:function(g){if(g&&!this.isRoot()){var c=g.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],m="propertyWatcher$"+f,n=h&&h.hasOwnProperty(m),a=g.uninstall,d=g.haltWhenChanged,k=g.showStack,b=h.__lookupGetter__(f),e=h.__lookupSetter__(f);c&&f&&h&&(a?n&&(delete h[f],h[f]=h[m],delete h[m]):n||(b||e?console.log(h+'["'+f+'"] is a getter/setter, watching not support'):
(h[m]=h[f],h.__defineSetter__(f,function(l){var p=h[m];if(g.onSet)g.onSet(l,p);p=h+"."+f+" changed: "+p+" -> "+l;k&&(p+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));g.verbose&&console.log(p);if(d)debugger;return h[m]=l}),h.__defineGetter__(f,function(){if(g.onGet)g.onGet(h[m]);return h[m]}),console.log("Watcher for "+h+"."+f+" installed"))))}},debugFunctionWrapper:function(g){var c=g.target,h=this.get(c,-1),f=this.parts().slice(-1)[0],m=void 0===g.haltWhenChanged?!0:g.haltWhenChanged,
n=h&&f&&h[f],a=n&&n.isDebugFunctionWrapper;c&&f&&n&&h&&(g.uninstall?a&&(h[f]=h[f].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+h+"."+f)):a?console.log("debugFunctionWrapper for "+h+"."+f+" already installed"):(g=h[f]=n.wrap(function(d){var k=Array.from(arguments);if(m)debugger;return k.shift().apply(h,k)}),g.isDebugFunctionWrapper=!0,g.debugTargetFunction=n,console.log("debugFunctionWrapper for "+h+"."+f+" installed")))}});up.default=Sg;var Wh=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");
Wh.clone=br;Wh.without=cr;Wh.hull=dr;Wh.subgraphReachableBy=Fv;Wh.invert=Gv;Wh.sortByReference=Hv;Wh.reduce=Xs;Wh.random=Ys;Wh.range=ee;Wh.shuffle=De;Wh.withoutAll=ic;Wh.flatten=Ma;Wh.uniq=Qc;Wh.values=Wm;Wh.clone=br;Wh.clone=br;Wh.without=cr;Wh.without=cr;Wh.hull=dr;Wh.hull=dr;Wh.subgraphReachableBy=Fv;Wh.subgraphReachableBy=Fv;Wh.invert=Gv;Wh.invert=Gv;Wh.sortByReference=Hv;Wh.sortByReference=Hv;Wh.reduce=Xs;Wh.reduce=Xs;Wh.random=Ys;Wh.random=Ys;var Cq=Object.freeze({__proto__:null,clone:br,without:cr,
hull:dr,subgraphReachableBy:Fv,invert:Gv,sortByReference:Hv,reduce:Xs,random:Ys}),Tg=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");Tg.isInterval=Iv;Tg.sort=Zs;Tg.compare=er;Tg.coalesce=Jv;Tg.coalesceOverlapping=Kv;Tg.mergeOverlapping=Lv;Tg.intervalsInRangeDo=Wp;Tg.intervalsInbetween=Xp;Tg.mapToMatchingIndexes=Oo;Tg.benchmark=function(){function g(c,h,f){return c.name+" "+Tg.timeToRunN(function(){return c.apply(null,h,1E5)},f)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",g(Tg.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),g(Tg.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),g(Tg.mapToMatchingIndexes,[Tg.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};Tg.range=ee;Tg.timeToRunN=Gd;Tg.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;Tg.isInterval=Iv;Tg.isInterval=Iv;Tg.sort=Zs;Tg.sort=Zs;Tg.compare=er;Tg.compare=er;Tg.coalesce=Jv;Tg.coalesce=
Jv;Tg.coalesceOverlapping=Kv;Tg.coalesceOverlapping=Kv;Tg.mergeOverlapping=Lv;Tg.mergeOverlapping=Lv;Tg.intervalsInRangeDo=Wp;Tg.intervalsInRangeDo=Wp;Tg.intervalsInbetween=Xp;Tg.intervalsInbetween=Xp;Tg.mapToMatchingIndexes=Oo;Tg.mapToMatchingIndexes=Oo;var aH=Object.freeze({__proto__:null,isInterval:Iv,sort:Zs,compare:er,coalesce:Jv,coalesceOverlapping:Kv,mergeOverlapping:Lv,intervalsInRangeDo:Wp,intervalsInbetween:Xp,mapToMatchingIndexes:Oo}),ml=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
ml.create=fr;ml.toArray=$s;ml.originalToProjectedIndex=at;ml.projectedToOriginalIndex=bt;ml.transformToIncludeIndex=Mv;ml.create=fr;ml.create=fr;ml.toArray=$s;ml.toArray=$s;ml.originalToProjectedIndex=at;ml.originalToProjectedIndex=at;ml.projectedToOriginalIndex=bt;ml.projectedToOriginalIndex=bt;ml.transformToIncludeIndex=Mv;ml.transformToIncludeIndex=Mv;var bH=Object.freeze({__proto__:null,create:fr,toArray:$s,originalToProjectedIndex:at,projectedToOriginalIndex:bt,transformToIncludeIndex:Mv}),tg=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");tg.get=Nv;tg.set=Ov;tg.getRow=Pv;tg.setRow=gr;tg.getCol=ct;tg.setCol=hr;tg.create=dt;tg.mapCreate=Qv;tg.forEach=et;tg.map=ft;tg.toObjects=ir;tg.tableFromObjects=gt;tg.benchmark=function(){var g=[],c=tg.create(1E3,200,1);var h=tg.timeToRunN(function(){tg.forEach(c,function(m){})},10);g.push("forEach: "+h.toFixed(2)+"ms");h=tg.timeToRunN(function(){tg.map(c,function(m,n,a){return n+a+Math.round(100*Math.random())})},10);g.push("map: "+h.toFixed(2)+
"ms");var f=tg.create(1E3,2E3);h=tg.timeToRunN(function(){f=Array(1E3);for(var m=0;1E3>m;m++)f[m]=Array(2E3);tg.forEach(c,function(n,a,d){f[a][d]=a+d+Math.round(100*Math.random())})},10);g.push("map with forEach: "+h+"ms");g.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return g.join("\n")};tg.arrayWithN=Dc;tg.timeToRunN=Gd;tg.get=Nv;tg.get=Nv;tg.set=Ov;tg.set=Ov;tg.getRow=Pv;tg.getRow=Pv;tg.setRow=gr;tg.setRow=gr;tg.getCol=ct;tg.getCol=ct;tg.setCol=hr;tg.setCol=
hr;tg.create=dt;tg.create=dt;tg.mapCreate=Qv;tg.mapCreate=Qv;tg.forEach=et;tg.forEach=et;tg.map=ft;tg.map=ft;tg.toObjects=ir;tg.toObjects=ir;tg.tableFromObjects=gt;tg.tableFromObjects=gt;var qx=Object.freeze({__proto__:null,get:Nv,set:Ov,getRow:Pv,setRow:gr,getCol:ct,setCol:hr,create:dt,mapCreate:Qv,forEach:et,map:ft,toObjects:ir,tableFromObjects:gt}),Si=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");Si.prewalk=ht;Si.postwalk=it;Si.find=jr;Si.filter=jt;Si.map=kt;Si.mapTree=lt;Si.flatten=
Ma;Si.detect=Si.find;var XO=Si.detect;Si.prewalk=ht;Si.prewalk=ht;Si.postwalk=it;Si.postwalk=it;Si.find=jr;Si.find=jr;Si.detect=XO;Si.detect=XO;Si.filter=jt;Si.filter=jt;Si.map=kt;Si.map=kt;Si.mapTree=lt;Si.mapTree=lt;var Dq=Object.freeze({__proto__:null,prewalk:ht,postwalk:it,find:jr,detect:XO,filter:jt,map:kt,mapTree:lt});Ia("a0",Dq);var vp=lively.FreezerRuntime.recorderFor("lively.lang/events.js");vp.isNode="undefined"!==typeof vp.process&&vp.process.versions&&vp.process.versions.node;vp.makeEmitter=
vp.isNode?function(g,c){if(g.on&&g.removeListener)return g;var h="undefined"!==typeof System?System._nodeRequire("events"):vp.require("events");Object.assign(g,h.EventEmitter.prototype);h.EventEmitter.call(g);c&&c.maxListenerLimit&&g.setMaxListeners(c.maxListenerLimit);return g}:function(g){if(g.on&&g.removeListener)return g;g.listeners={};g.on=function(c,h){h&&(g.listeners[c]||(g.listeners[c]=[]),g.listeners[c].push(h))};g.once=function(c,h){function f(){g.removeListener(c,f);h.apply(this,arguments)}
if(h)g.on(c,f)};g.removeListener=function(c,h){g.listeners[c]&&(g.listeners[c]=g.listeners[c].filter(function(f){return f!==h}))};g.removeAllListeners=function(c){g.listeners[c]&&(g.listeners[c]=[])};g.emit=function(){var c=Array.prototype.slice.call(arguments),h=c.shift();(h=g.listeners[h])&&h.length&&h.forEach(function(f){try{f.apply(null,c)}catch(m){console.error("Error in event handler: %s",m.stack||String(m))}})};return g};var ew=vp.makeEmitter;vp.makeEmitter=ew;vp.makeEmitter=ew;var tu=Object.freeze({__proto__:null,
makeEmitter:ew}),tj=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");tj.create=Sn;tj.remove=xc;tj.pluck=Qb;tj.makeEmitter=ew;tj.newUUID=Tf;tj.OFFLINE="offline";tj.ONLINE="online";tj.CONNECTING="connecting";tj.create=Sn;tj.create=Sn;var cH=Object.freeze({__proto__:null,create:Sn}),ug=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");ug.fork=Rv;ug.create=Sv;ug.makeEmitter=ew;ug.newUUID=Tf;ug.waitFor=Jf;ug.messengerCreate=Sn;ug.Closure=ji;ug.isNodejs="undefined"!==typeof require&&
"undefined"!==typeof process;ug.WorkerSetup={loadDependenciesBrowser:function(g){importScripts.apply("undefined"!==typeof self?self:this,g.scriptsToLoad||[])},loadDependenciesNodejs:function(g){(global.lively||(global.lively={})).lang=require(require("path").join(g.libLocation,"index"))},initBrowserGlobals:function(g){remoteWorker.send=function(c){postMessage(c)};g="undefined"!==typeof self?self:this;g=g.Global=g;g.window=g;g.console=g.console||function(){var c={};["log","error","warn"].forEach(function(h){c[h]=
function(){for(var f=arguments[0],m=1;m<arguments.length;m++)f=f.replace("%s",arguments[m]);remoteWorker.send({type:h,message:["[",h.toUpperCase(),"] ",f].join("")})}});return c}()},initOnMessageHandler:function(g){function c(h){h=h.data.data?h.data:h;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(h);else"close"==h.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(g){remoteWorker.callStringifiedFunction=
function(c,h,f){try{var m=eval("("+c+")")}catch(d){f(Error("Cannot create function from string: "+d.stack||d));return}c=m.length===h.length+1;var n=lively.lang.fun.once(function(d,k){remoteWorker.isBusy=!1;f(d,k)});remoteWorker.isBusy=!0;c&&h.push(n);try{var a=m.apply(remoteWorker,h.concat([n]))}catch(d){n(d,null);return}c||n(null,a)};remoteWorker.httpRequest=function(c){if(c.url){var h=new XMLHttpRequest,f=c.method||"GET";h.onreadystatechange=function(){4===h.readyState&&c.done&&c.done(h)};h.open(f,
c.url);h.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(g){if(!g.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,h){try{var f=eval(c.data.expr)}catch(m){f=m.stack||m}h.answer(c,{result:String(f)})},run:function(c,h){var f=c.data.func,m=c.data.args;f?remoteWorker.callStringifiedFunction(f,m,function(n,a){h.answer(c,{error:n?String(n):null,result:a})}):h.answer(c,{error:"no funcString"})},close:function(c,h){h.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(c,h){remoteWorker.send(c);h()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};ug.BrowserWorker={create:function(g){g=g||{};if(!g.libLocation&&!g.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');g.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=
function(h){if("setup"!==h.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));h=h.data.options||{};initBrowserGlobals(h);loadDependenciesBrowser(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[ug.WorkerSetup.initBrowserGlobals,ug.WorkerSetup.loadDependenciesBrowser,ug.WorkerSetup.initOnMessageHandler,ug.WorkerSetup.initWorkerInterface,
ug.WorkerSetup.initWorkerMessenger].join("\n"));c="("+ug.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(h){try{var f=new Blob([h],{type:"text/javascript"})}catch(m){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,f=new BlobBuilder,f.append(h),f=f.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(f)}(c));(function(h,f){ug.makeEmitter(f);h.scriptsToLoad||(h.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return h.libLocation+
n}));var m=Object.keys(h).reduce(function(n,a){"function"!==typeof h[a]&&(n[a]=h[a]);return n},{});f.onmessage=function(n){void 0!==n.data.workerReady?(f.ready=!!n.data.workerReady,f.ready?f.emit("ready"):f.emit("close")):f.emit("message",n.data)};f.errors=[];f.onerror=function(n){console.error(n);f.errors.push(n);f.emit("error",n)};f.postMessage({action:"setup",options:m})})(g,c);return c}};ug.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(g){g=g||{};var c,h=ug.makeEmitter({ready:!1,
errors:[],postMessage:function(f){c?h.ready?c.send(f):h.emit("error",Error("nodejs worker process not ready or already closed")):h.emit("error",Error("nodejs worker process not yet created"))}});ug.NodejsWorker.startWorker(g,function(f,m){f?(h.ready=!1,h.emit("error",f)):(c=m,c.on("message",function(n){ug.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);h.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");h.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",
n);h.errors.push(n);h.emit("error",n)}),h.ready=!0,h.emit("ready"))});return h},workerSetupFunction:function(){var g=process;console.log("[WORKER] Starting init");g.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));g.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);g.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(g,c,h){var f=require("path"),m=require("os"),n=require("fs");m=f.join(m.tmpDir(),"lively-nodejs-workers/");var a=f.join(m,"nodejs-worker-init.js");ug.NodejsWorker.initCodeFileCreated?n.exists(a,function(d){d?h(null,a):ug.NodejsWorker.createWorkerCodeFile(g,a,c,h)}):ug.NodejsWorker.createWorkerCodeFile(g,a,c,h)},createWorkerCodeFile:function(g,c,h,f){g=require("path");var m=require("fs"),n=require("child_process").exec;n("mkdir -p "+g.dirname(c),
function(a,d,k){a?f(Error(["[WORKER PARENT] Could not create worker temp dir:",d,k].join("\n"))):m.writeFile(c,h,function(b){ug.NodejsWorker.debug&&console.log("worker code file %s created",c);ug.NodejsWorker.initCodeFileCreated=!0;f(b,c)})})},startWorker:function(g,c){var h=require("util"),f=require("child_process").fork,m=String(ug.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[ug.WorkerSetup.loadDependenciesNodejs,ug.WorkerSetup.initOnMessageHandler,ug.WorkerSetup.initWorkerInterface,
ug.WorkerSetup.initWorkerMessenger].join("\n"));h=h.format("(%s)();\n",m);ug.NodejsWorker.ensureInitCodeFile(g,h,function(n,a){if(n)return c(n);var d=f(a,{});ug.NodejsWorker.debug&&console.log("worker forked");d.on("message",function(k){"pong"===k.action?console.log("[WORKER pong] ",k):"log"===k.action&&console.log("[Message from WORKER] ",k.data)});d.once("message",function(k){ug.NodejsWorker.debug&&console.log("worker setup done");c(null,d,k)});d.on("close",function(){ug.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
d.send({action:"setup",data:{options:g}});global.WORKER=d})}};ug.fork=Rv;ug.fork=Rv;ug.create=Sv;ug.create=Sv;var dH=Object.freeze({__proto__:null,fork:Rv,create:Sv}),dd=lively.FreezerRuntime.recorderFor("lively.lang/index.js");dd.createLivelyLangObject=function(){return{chain:dd.chain,noConflict:dd.noConflict,installGlobals:dd.installGlobals,uninstallGlobals:dd.uninstallGlobals,globalInterfaceSpec:dd.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};dd.globalInstall=Po;dd.chain=
yk;dd.createChain=function(g,c){return Object.keys(g).reduce(function(h,f){h[f]=function(){var m=Array.prototype.slice.call(arguments);m=g[f].apply(null,[c].concat(m));return dd.chain(m)};return h},{value:function(){return c}})};dd.noConflict=mt;dd.installGlobals=nt;dd.installProperty=function(g,c){if(!g.isIn(dd.livelyLang))throw c=Error("property not provided by lively.lang: "+g),console.error(c.stack||c),c;g=g.get(dd.livelyLang);if("function"===typeof g&&"prototype"===c.slice(-2,-1).toString()){var h=
g;g=function(){var f=Array.prototype.slice.call(arguments);f.unshift(this);return h.apply(null,f)};g.toString=function(){return h.toString()}}c.set(dd.GLOBAL,g,!0)};dd.uninstallGlobals=ot;dd.string=Bg;dd.num=Gj;dd.fun=Tj;dd.Closure=ji;dd.arr=Ne;dd.obj=ff;dd.properties=km;dd.date=tp;dd.promise=Uf;dd.Path=Sg;dd.graph=Cq;dd.interval=aH;dd.arrayProjection=bH;dd.Group=el;dd.grid=qx;dd.tree=Dq;dd.events=tu;dd.messenger=cH;dd.worker=dH;dd.worker=dH;dd.worker=dH;dd.messenger=cH;dd.messenger=cH;dd.events=
tu;dd.events=tu;dd.tree=Dq;dd.tree=Dq;dd.grid=qx;dd.grid=qx;dd.arrayProjection=bH;dd.arrayProjection=bH;dd.interval=aH;dd.interval=aH;dd.graph=Cq;dd.graph=Cq;dd.date=tp;dd.date=tp;dd.properties=km;dd.properties=km;dd.obj=ff;dd.obj=ff;dd.arr=Ne;dd.arr=Ne;dd.fun=Tj;dd.fun=Tj;dd.num=Gj;dd.num=Gj;dd.string=Bg;dd.string=Bg;dd.Closure=ji;dd.Closure=ji;dd.promise=Uf;dd.promise=Uf;dd.Path=Sg;dd.Path=Sg;dd.Group=el;dd.Group=el;dd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;dd.isNode="undefined"!==typeof dd.process&&dd.process.env&&"function"===typeof dd.process.exit;dd.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var eH=dd.createLivelyLangObject();dd.livelyLang=eH;dd.livelyLang=eH;dd.livelyLang=eH;dd.globalInstall=
Po;dd.globalInstall=Po;dd.chain=yk;dd.chain=yk;dd.noConflict=mt;dd.noConflict=mt;dd.installGlobals=nt;dd.installGlobals=nt;dd.uninstallGlobals=ot;dd.uninstallGlobals=ot;var L0=Object.freeze({__proto__:null,worker:dH,messenger:cH,events:tu,tree:Dq,grid:qx,arrayProjection:bH,interval:aH,graph:Cq,date:tp,properties:km,obj:ff,arr:Ne,fun:Tj,num:Gj,string:Bg,Closure:ji,promise:Uf,Path:Sg,Group:el,livelyLang:eH,globalInstall:Po,chain:yk,noConflict:mt,installGlobals:nt,uninstallGlobals:ot}),zf=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");
zf.davNs=function(g){return(g=g.match(/\/([a-z]+?):multistatus/i))?g[1]:"d"};zf.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};zf.readPropertyNode=function(g,c){c=void 0===c?{}:c;var h=g.tagName.replace(/[^:]+:/,"");
h=zf.propertyNodeMap[h];g=g.textContent;switch(h){case "lastModified":case "created":g=new Date(g);break;case "size":g=Number(g)}c[h]=g;return c};zf.readXMLPropfindResult=function(g){var c=(new zf.DOMParser).parseFromString(g,"text/xml");g=zf.davNs(g);c=(new zf.XPathQuery("/"+g+":multistatus/"+g+":response")).findAll(c.documentElement);var h=new zf.XPathQuery(g+":href"),f=new zf.XPathQuery(g+":propstat/"+g+":prop");return c.map(function(m){var n=f.findFirst(m);n=Array.from(n.childNodes).reduce(function(a,
d){return zf.readPropertyNode(d,a)},{});m=h.findFirst(m);n.url=m.textContent||m.text;return n})};zf.defaultOrigin=function(){return System.baseURL||document.location.origin};zf.makeRequest=function(g,c,h,f,m){f=void 0===f?{}:f;m=g.url;var n=g.useCors,a=g.useProxy,d=g.headers;n="undefined"!==typeof n?n:!0;c={method:void 0===c?"GET":c};if("undefined"!==typeof a?a:1)Object.assign(f,{"cache-control":"no-cache","x-lively-proxy-request":m}),m=g.proxyDomain||zf.defaultOrigin();n&&(c.mode="cors");h&&(c.body=
h);c.redirect="follow";c.headers=Object.assign({},f,{},d);return fetch(m,c)};zf.upload=ty;zf.Resource=Ef;zf.applyExclude=vb;zf.promise=Uf;zf.num=Gj;var vA=function(g){this.expression=g;this.contextNode=null;this.xpe=new zf.XPathEvaluator};vA.prototype.establishContext=function(g){this.nsResolver||(g=g.ownerDocument?g.ownerDocument.documentElement:g.documentElement,g!==this.contextNode&&(this.contextNode=g,this.nsResolver=this.xpe.createNSResolver(g)))};vA.prototype.manualNSLookup=function(){this.nsResolver=
function(g){return zf.Namespace[g.toUpperCase()]||null};return this};vA.prototype.findAll=function(g,c){this.establishContext(g);g=this.xpe.evaluate(this.expression,g,this.nsResolver,zf.XPathResult.ANY_TYPE,null);for(var h=[],f;f=g.iterateNext();)h.push(f);return 0<h.length||void 0===c?h:c};vA.prototype.findFirst=function(g){this.establishContext(g);return this.xpe.evaluate(this.expression,g,this.nsResolver,zf.XPathResult.ANY_TYPE,null).iterateNext()};zf.XPathQuery=vA;zf.propertyNodeMap={getlastmodified:"lastModified",
creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};zf.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
zf.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof zf.process;zf.upload=ty;zf.upload=ty;var Uj=function(g,c){c=void 0===c?{}:c;g=zf.Resource.call(this,g,c)||this;g.onLoad=c.onLoad||function(){};g.onProgress=c.onProgress||function(){};g.useProxy=c.hasOwnProperty("useProxy")?c.useProxy:!1;g.proxyDomain=c.proxyDomain||void 0;g.useCors=c.hasOwnProperty("useCors")?c.useCors:!1;g.headers=c.headers||{};g.binary=g.isFile()?zf.binaryExtensions.includes(g.ext()):
!1;g.errorOnHTTPStatusCodes=c.hasOwnProperty("errorOnHTTPStatusCodes")?c.errorOnHTTPStatusCodes:!0;return g};$jscomp.inherits(Uj,zf.Resource);Uj.prototype.join=function(g){return Object.assign(zf.Resource.prototype.join.call(this,g),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};Uj.prototype.makeProxied=function(g){void 0!==g&&(this.proxyDomain=g);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};Uj.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};Uj.prototype.read=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(zf.makeRequest(g),2);c=h.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Cannot read "+g.url+": "+c.statusText+" "+c.status);if(!g.binary)return h.return(c.text());if("blob"===g.binary)return h.return(c.blob());if("function"===
typeof c.arrayBuffer)return h.return(c.arrayBuffer());if("function"===typeof c.buffer)return h.return(c.buffer());throw Error("Don't now how to read binary resource "+g+"'");})};Uj.prototype.write=function(g){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress){if(!c.isFile())throw Error("Cannot write a non-file: "+c.url);return f.yield(zf.upload(c,g),2)}h=f.yieldResult;if(!zf.num.between(h.status,200,300)&&c.errorOnHTTPStatusCodes)throw Error("Cannot write "+
c.url+": "+h.statusText+" "+h.status);return f.return(c)})};Uj.prototype.mkdir=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(g.isFile())throw Error("Cannot mkdir on a file: "+g.url);return h.yield(zf.makeRequest(g,"MKCOL"),2)}c=h.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+g.url+": "+c.statusText+" "+c.status);return h.return(g)})};Uj.prototype.exists=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==
h.nextAddress)return g.isRoot()?(c=!0,h.jumpTo(2)):h.yield(zf.makeRequest(g,"HEAD"),3);2!=h.nextAddress&&(c=!!h.yieldResult.ok);return h.return(c)})};Uj.prototype.remove=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(zf.makeRequest(g,"DELETE"),2):c.return(g)})};Uj.prototype._propfind=function(){var g=this,c,h,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(zf.makeRequest(g,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=m.nextAddress){c=m.yieldResult;if(!c.ok&&g.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+g.url+": "+c.statusText);return m.yield(c.text(),3)}h=m.yieldResult;f=g.root();return m.return(zf.readXMLPropfindResult(h).map(function(n){return f.join(n.url).assignProperties(n)}))})};Uj.prototype.dirList=function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;var h=this,f,m,n,a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if("number"!==
typeof g&&"infinity"!==g)throw Error("dirList \u2013 invalid depth argument: "+g);f=c;m=f.exclude;0>=g&&(g=1);return 1===g?k.yield(h._propfind(),5):k.yield(h.dirList(1,c),4)}if(5!=k.nextAddress)return n=k.yieldResult,a=n.filter(function(b){return b.isDirectory()}),k.return(Promise.all(a.map(function(b){return b.dirList("number"===typeof g?g-1:g,c)})).then(function(b){return b.reduce(function(e,l){return e.concat(l)},n)}));d=k.yieldResult;d.shift();m&&(d=zf.applyExclude(m,d));return k.return(d)})};
Uj.prototype.readProperties=function(g){var c=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(c._propfind(),2);h=f.yieldResult[0];return f.return(c.assignProperties(h))})};Uj.prototype.post=function(g){g=void 0===g?null:g;var c=this,h,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return"string"!==typeof g&&(g=JSON.stringify(g)),n.yield(zf.makeRequest(c,"POST",g,{}),2);case 2:return h=n.yieldResult,
n.setCatchFinallyBlocks(3),n.yield(h.text(),5);case 5:f=n.yieldResult;n.leaveTryBlock(4);break;case 3:n.enterCatchBlock();case 4:if(f&&"application/json"===h.headers.get("content-type"))try{m=JSON.parse(f)}catch(a){}if(!h.ok&&c.errorOnHTTPStatusCodes)throw Error("Error in POST "+c.url+": "+(f||h.statusText));return n.return(m||f)}})};Uj.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(h.isFile()&&(f=g.isFile()?g:g.join(h.name()),
zf.isNode)){if(f.isHTTPResource)return m.return(h._copyTo_file_nodejs_http(f,c));if(f.isNodeJSFileResource)return m.return(h._copyTo_file_nodejs_fs(f,c))}return m.return(zf.Resource.prototype.copyTo.call(h,g,c))})};Uj.prototype._copyFrom_file_nodejs_fs=function(g,c){c=void 0===c?!0:c;var h=this,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return c?a.yield(h.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return m=g._createReadStream(),m.on("error",
function(d){return f=d}),a.yield(zf.makeRequest(h,"PUT",m),4);n=a.yieldResult;if(f)throw f;if(!n.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+n.statusText+" "+n.status);return a.return(h)})};Uj.prototype._copyTo_file_nodejs_fs=function(g,c){c=void 0===c?!0:c;var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return c?n.yield(g.parent().ensureExistance(),2):n.jumpTo(2);if(4!=n.nextAddress)return n.yield(zf.makeRequest(h,"GET"),4);f=
n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+f.statusText+" "+f.status);return n.return(new Promise(function(a,d){return f.body.pipe(g._createWriteStream()).on("error",function(k){return m=k}).on("finish",function(){return m?d(m):a(h)})}))})};Uj.prototype._copyTo_file_nodejs_http=function(g,c){c=void 0===c?!0:c;var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:if(!c){n.jumpTo(2);break}return n.yield(g.parent().ensureExistance(),
2);case 2:return n.yield(zf.makeRequest(h,"GET"),4);case 4:f=n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+f.statusText+" "+f.status);return n.yield(zf.makeRequest(g,"PUT",f.body),5);case 5:m=n.yieldResult;if(!f.ok&&h.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+m.statusText+" "+m.status);n.jumpToEnd()}})};$jscomp.global.Object.defineProperties(Uj.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});zf.WebDAVResource=
Uj;var fH={name:"http-webdav-resource",matches:function(g){return g.startsWith("http:")||g.startsWith("https:")},resourceClass:zf.WebDAVResource};zf.resourceExtension=fH;zf.resourceExtension=fH;zf.resourceExtension=fH;zf.default=Uj;var po=System.get("@system-env").node?require("fs"):{},jda=po.readFile,kda=po.writeFile,lda=po.exists,mda=po.readdir,nda=po.mkdir,oda=po.rmdir,pda=po.unlink,qda=po.lstat,rda=po.rename,sda=po.createWriteStream,tda=po.createReadStream,Xe=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
Xe.wrapInPromise=function(g){return function(c){for(var h=[],f=0;f<arguments.length;++f)h[f-0]=arguments[f];return new Promise(function(m,n){return g.apply(null,h.concat(function(a,d){return a?n(a):m(d)}))})}};Xe.Resource=Ef;Xe.applyExclude=vb;Xe.windowsURLPrefixRe=YG;Xe.windowsRootPathRe=$G;Xe.createWriteStream=sda;Xe.createReadStream=tda;Xe.readFile=jda;Xe.writeFile=kda;Xe.exists=lda;Xe.mkdir=nda;Xe.rmdir=oda;Xe.unlink=pda;Xe.readdir=mda;Xe.lstat=qda;Xe.rename=rda;Xe.readFileP=Xe.wrapInPromise(Xe.readFile);
Xe.writeFileP=Xe.wrapInPromise(Xe.writeFile);Xe.existsP=function(g){return new Promise(function(c,h){return Xe.exists(g,function(f){return c(!!f)})})};Xe.readdirP=Xe.wrapInPromise(Xe.readdir);Xe.mkdirP=Xe.wrapInPromise(Xe.mkdir);Xe.rmdirP=Xe.wrapInPromise(Xe.rmdir);Xe.unlinkP=Xe.wrapInPromise(Xe.unlink);Xe.lstatP=Xe.wrapInPromise(Xe.lstat);Xe.renameP=Xe.wrapInPromise(Xe.rename);var Ok=function(){return Xe.Resource.apply(this,arguments)||this};$jscomp.inherits(Ok,Xe.Resource);Ok.prototype.path=function(){return this.url.replace("file://",
"")};Ok.prototype.stat=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(Xe.lstatP(g.path()))})};Ok.prototype.read=function(){var g=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){c=Xe.readFileP(g.path());return h.return(g.binary?c:c.then(String))})};Ok.prototype.write=function(g){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(c.isDirectory())throw Error("Cannot write into a directory: "+
c.path());return h.yield(Xe.writeFileP(c.path(),g),2)}return h.return(c)})};Ok.prototype.mkdir=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress){if(g.isFile())throw Error("Cannot mkdir on a file: "+g.path());return c.yield(Xe.mkdirP(g.path()),2)}return c.return(g)})};Ok.prototype.exists=function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.return(g.isRoot()?!0:Xe.existsP(g.path()))})};Ok.prototype.dirList=
function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;var h=this,f,m,n,a,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if("number"!==typeof g&&"infinity"!==g)throw Error("dirList \u2013 invalid depth argument: "+g);f=c;m=f.exclude;0>=g&&(g=1);if(1!==g){w.jumpTo(2);break}n=[];a=$jscomp;d=a.makeIterator;return w.yield(Xe.readdirP(h.path()),3);case 3:k=d.call(a,w.yieldResult),b=k.next();case 4:if(b.done){w.jumpTo(6);break}e=b.value;l=h.join(e);
return w.yield(l.stat(),7);case 7:p=w.yieldResult;l=p.isDirectory()?l.asDirectory():l;l._assignPropsFromStat(p);n.push(l);b=k.next();w.jumpTo(4);break;case 6:return m&&(n=Xe.applyExclude(m,n)),w.return(n);case 2:return w.yield(h.dirList(1,c),8);case 8:return q=w.yieldResult,u=q.filter(function(y){return y.isDirectory()}),w.return(Promise.all(u.map(function(y){return y.dirList("number"===typeof g?g-1:g,c)})).then(function(y){return y.reduce(function(A,C){return A.concat(C)},q)}))}})};Ok.prototype.isEmptyDirectory=
function(){var g=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(g.dirList(),2):c.return(0===c.yieldResult.length)})};Ok.prototype.rename=function(g){var c=this,h,f,m,n,a,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(!(g instanceof c.constructor))return w.return(Xe.Resource.prototype.rename.call(c,g));if(c.isFile()){g=g.asFile();Xe.renameP(c.path(),g.path());w.jumpTo(2);break}g=g.asDirectory();
return w.yield(g.ensureExistance(),3);case 3:return h=[],f=[],m=$jscomp,n=m.makeIterator,w.yield(c.dirList("infinity"),4);case 4:a=n.call(m,w.yieldResult);for(d=a.next();!d.done;d=a.next())k=d.value,k.isDirectory()?f.push(k):h.push(k);b=$jscomp.makeIterator(f);e=b.next();case 5:if(e.done){w.jumpTo(7);break}l=e.value;return w.yield(g.join(l.relativePathFrom(c)).ensureExistance(),6);case 6:e=b.next();w.jumpTo(5);break;case 7:p=$jscomp.makeIterator(h),q=p.next();case 9:if(q.done)return w.yield(c.remove(),
2);u=q.value;return w.yield(u.rename(g.join(u.relativePathFrom(c))),10);case 10:q=p.next();w.jumpTo(9);break;case 2:return w.return(g)}})};Ok.prototype.remove=function(){var g=this,c,h,f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(g.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return g.isDirectory()?(c=$jscomp,h=c.makeIterator,a.yield(g.dirList(),7)):a.yield(Xe.unlinkP(g.path()),3);case 7:f=h.call(c,a.yieldResult),m=f.next();
case 8:if(m.done)return a.yield(Xe.rmdirP(g.path()),3);n=m.value;return a.yield(n.remove(),9);case 9:m=f.next();a.jumpTo(8);break;case 3:return a.return(g)}})};Ok.prototype.readProperties=function(){var g=this,c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(c=g,h=c._assignPropsFromStat,f.yield(g.stat(),2)):f.return(h.call(c,f.yieldResult))})};Ok.prototype.copyTo=function(g,c){c=void 0===c?!0:c;var h=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return h.isFile()&&
(f=g.isFile()?g:g.join(h.name()),f.isHTTPResource)?m.return(f._copyFrom_file_nodejs_fs(h,c=!0)):m.return(Xe.Resource.prototype.copyTo.call(h,g,c))})};Ok.prototype._assignPropsFromStat=function(g){return this.assignProperties({lastModified:g.mtime,created:g.ctime,size:g.size,type:g.isDirectory()?"directory":"file",isLink:g.isSymbolicLink()})};Ok.prototype._createWriteStream=function(){return Xe.createWriteStream(this.path())};Ok.prototype._createReadStream=function(){return Xe.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(Ok.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Xe.NodeJSFileResource=Ok;var wA=function(g,c){"file:///"!==g.slice(0,8)&&"file://"===g.slice(0,7)&&(g="file:///"+g.slice(7));g.includes("\\")&&(g=g.replace(/\\/g,"/"));return Xe.NodeJSFileResource.call(this,g,c)||this};$jscomp.inherits(wA,Xe.NodeJSFileResource);wA.prototype.path=function(){return this.url.replace("file:///","")};wA.prototype.isRoot=function(){return!!this.path().match(Xe.windowsRootPathRe)};
wA.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var g=this.url.match(Xe.windowsURLPrefixRe);if(g)return this.newResource(g[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};Xe.NodeJSWindowsFileResource=wA;var gH={name:"nodejs-file-resource",matches:function(g){return g.startsWith("file:")},resourceClass:"undefined"!==typeof Xe.process&&"win32"===Xe.process.platform?Xe.NodeJSWindowsFileResource:Xe.NodeJSFileResource};Xe.resourceExtension=
gH;Xe.resourceExtension=gH;Xe.resourceExtension=gH;var cj=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");cj.applyExclude=function(g,c){return c?"string"===typeof c?!g.url.includes(c):"function"===typeof c?!c(g):c instanceof RegExp?!c.test(g.url):!0:!0};cj.Resource=Ef;cj.createFiles=Tc;cj.debug=!1;cj.slashRe=/\//g;var un=function(g,c){c=void 0===c?{}:c;if(!g||"string"!==typeof g)throw Error("LocalResourceInMemoryBackend needs name!");this.name=g;this._filespec=c};un.removeHost=
function(g){delete this.hosts[g]};un.ensure=function(g,c){var h=this;c=void 0===c?{}:c;var f=this.named(c.host);return Promise.resolve().then(function(){return g?cj.createFiles("local://"+f.name,g):null}).then(function(){return h})};un.named=function(g){g||(g="default");return this.hosts[g]||(this.hosts[g]=new this(g))};un.prototype.get=function(g){return this._filespec[g]};un.prototype.set=function(g,c){this._filespec[g]=c};un.prototype.write=function(g,c){var h=this._filespec[g];h||(h=this._filespec[g]=
{created:new Date});h.content=c;h.isDirectory=!1;h.lastModified=new Date};un.prototype.read=function(g){return(g=this._filespec[g])&&g.content?g.content:""};un.prototype.mkdir=function(g){var c=this._filespec[g];c&&c.isDirectory||(c||(c=this._filespec[g]={created:new Date}),c.content&&delete c.content,c.isDirectory=!0,c.lastModified=new Date)};un.prototype.partialFilespec=function(g,c){g=void 0===g?"/":g;c=void 0===c?Infinity:c;for(var h={},f=this.filespec,m=Object.keys(f),n=0;n<m.length;n++){var a=
m[n];if(a.startsWith(g)&&g!==a){var d=a.slice(g.length);(d.includes("/")?d.match(cj.slashRe).length+1:1)>c||(h[a]=f[a])}}return h};$jscomp.global.Object.defineProperties(un.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(g){this._filespec=g}}});$jscomp.global.Object.defineProperties(un,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});cj.LocalResourceInMemoryBackend=un;var qo=function(){return cj.Resource.apply(this,
arguments)||this};$jscomp.inherits(qo,cj.Resource);qo.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};qo.prototype.write=function(g){cj.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var c=this.localBackend.get(this.path());if(c&&c.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),g);return Promise.resolve(this)};
qo.prototype.mkdir=function(){cj.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var g=this.localBackend.get(this.path());if(g&&g.isDirectory)return Promise.resolve(this);if(g&&!g.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};qo.prototype.exists=function(){cj.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};qo.prototype.remove=function(){var g=this;cj.debug&&console.log("["+this+"] remove");var c=this.path();Object.keys(this.localBackend.filespec).forEach(function(h){return h.startsWith(c)&&delete g.localBackend.filespec[h]});return Promise.resolve(this)};qo.prototype.readProperties=function(){cj.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};qo.prototype.dirList=function(g,c){g=void 0===g?1:g;c=void 0===c?{}:c;cj.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(g,c);c=c.exclude;var h=this.path(),f=[],m=Object.keys(this.localBackend.filespec);"infinity"===g&&(g=Infinity);for(var n={},a=0;a<m.length;n={$jscomp$loop$prop$dirToChild$2688:n.$jscomp$loop$prop$dirToChild$2688},a++){var d=m[a];d.startsWith(h)&&h!==d&&(d=d.slice(h.length),(d.includes("/")?d.match(cj.slashRe).length+1:1)>g?(n.$jscomp$loop$prop$dirToChild$2688=this.join(d.split("/").slice(0,g).join("/")+"/"),
f.some(function(k){return function(b){return b.equals(k.$jscomp$loop$prop$dirToChild$2688)}}(n))||f.push(n.$jscomp$loop$prop$dirToChild$2688)):(d=this.join(d),c&&!cj.applyExclude(d,c)||f.push(d)))}return Promise.resolve(f)};$jscomp.global.Object.defineProperties(qo.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return cj.LocalResourceInMemoryBackend.named(this.host())}}});cj.LocalResource=qo;var hH={name:"local-resource",matches:function(g){return g.startsWith("local:")},resourceClass:cj.LocalResource};
cj.resourceExtension=hH;cj.resourceExtension=hH;cj.resourceExtension=hH;cj.default=qo;var Kg=lively.FreezerRuntime.recorderFor("lively.resources/index.js");Kg.createFileSpec=kr;Kg.importModuleViaNative=Tv;Kg.loadViaScript=Yp;Kg.ensureFetch=pt;Kg.default=Ef;Kg.Resource=Ef;Kg.unregisterExtension=Rd;Kg.registerExtension=Fd;Kg.parseQuery=Vb;Kg.extensions=su;Kg.createFiles=Tc;Kg.resource=sc;Kg.httpResourceExtension=fH;Kg.fileResourceExtension=gH;Kg.localResourceExtension=hH;Kg.newUUID=Tf;Kg.waitFor=Us;
Kg.registerExtension(Kg.localResourceExtension);Kg.registerExtension(Kg.httpResourceExtension);Kg.registerExtension(Kg.fileResourceExtension);Kg.createFileSpec=kr;Kg.createFileSpec=kr;Kg.importModuleViaNative=Tv;Kg.importModuleViaNative=Tv;Kg.loadViaScript=Yp;Kg.loadViaScript=Yp;Kg.ensureFetch=pt;Kg.ensureFetch=pt;Kg.registerExtension=Fd;Kg.registerExtension=Fd;Kg.unregisterExtension=Rd;Kg.unregisterExtension=Rd;Kg.parseQuery=Vb;Kg.parseQuery=Vb;Kg.extensions=su;Kg.extensions=su;Kg.createFiles=Tc;
Kg.createFiles=Tc;Kg.resource=sc;Kg.resource=sc;var uda=Object.freeze({__proto__:null,Resource:Ef,createFileSpec:kr,importModuleViaNative:Tv,loadViaScript:Yp,ensureFetch:pt,registerExtension:Fd,unregisterExtension:Rd,parseQuery:Vb,extensions:su,createFiles:Tc,resource:sc}),M0=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),Md=function(){};Md.prototype.accept=function(g,c,h){if(!g)throw Error("Undefined AST node in Visitor.accept:\n  "+h.join(".")+"\n  "+g);if(!g.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+
h.join(".")+"\n  "+JSON.stringify(g));switch(g.type){case "Node":return this.visitNode(g,c,h);case "SourceLocation":return this.visitSourceLocation(g,c,h);case "Position":return this.visitPosition(g,c,h);case "Program":return this.visitProgram(g,c,h);case "Function":return this.visitFunction(g,c,h);case "Statement":return this.visitStatement(g,c,h);case "Directive":return this.visitDirective(g,c,h);case "SwitchCase":return this.visitSwitchCase(g,c,h);case "CatchClause":return this.visitCatchClause(g,
c,h);case "VariableDeclarator":return this.visitVariableDeclarator(g,c,h);case "Expression":return this.visitExpression(g,c,h);case "Property":return this.visitProperty(g,c,h);case "Pattern":return this.visitPattern(g,c,h);case "Super":return this.visitSuper(g,c,h);case "SpreadElement":return this.visitSpreadElement(g,c,h);case "TemplateElement":return this.visitTemplateElement(g,c,h);case "Class":return this.visitClass(g,c,h);case "ClassBody":return this.visitClassBody(g,c,h);case "MethodDefinition":return this.visitMethodDefinition(g,
c,h);case "ModuleDeclaration":return this.visitModuleDeclaration(g,c,h);case "ModuleSpecifier":return this.visitModuleSpecifier(g,c,h);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(g,c,h);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(g,c,h);case "JSXSpreadChild":return this.visitJSXSpreadChild(g,c,h);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(g,c,h);case "JSXAttribute":return this.visitJSXAttribute(g,c,h);case "JSXText":return this.visitJSXText(g,
c,h);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(g,c,h);case "JSXClosingFragment":return this.visitJSXClosingFragment(g,c,h);case "Identifier":return this.visitIdentifier(g,c,h);case "Literal":return this.visitLiteral(g,c,h);case "ExpressionStatement":return this.visitExpressionStatement(g,c,h);case "BlockStatement":return this.visitBlockStatement(g,c,h);case "EmptyStatement":return this.visitEmptyStatement(g,c,h);case "DebuggerStatement":return this.visitDebuggerStatement(g,c,h);
case "WithStatement":return this.visitWithStatement(g,c,h);case "ReturnStatement":return this.visitReturnStatement(g,c,h);case "LabeledStatement":return this.visitLabeledStatement(g,c,h);case "BreakStatement":return this.visitBreakStatement(g,c,h);case "ContinueStatement":return this.visitContinueStatement(g,c,h);case "IfStatement":return this.visitIfStatement(g,c,h);case "SwitchStatement":return this.visitSwitchStatement(g,c,h);case "ThrowStatement":return this.visitThrowStatement(g,c,h);case "TryStatement":return this.visitTryStatement(g,
c,h);case "WhileStatement":return this.visitWhileStatement(g,c,h);case "DoWhileStatement":return this.visitDoWhileStatement(g,c,h);case "ForStatement":return this.visitForStatement(g,c,h);case "ForInStatement":return this.visitForInStatement(g,c,h);case "Declaration":return this.visitDeclaration(g,c,h);case "ThisExpression":return this.visitThisExpression(g,c,h);case "ArrayExpression":return this.visitArrayExpression(g,c,h);case "ObjectExpression":return this.visitObjectExpression(g,c,h);case "FunctionExpression":return this.visitFunctionExpression(g,
c,h);case "UnaryExpression":return this.visitUnaryExpression(g,c,h);case "UpdateExpression":return this.visitUpdateExpression(g,c,h);case "BinaryExpression":return this.visitBinaryExpression(g,c,h);case "AssignmentExpression":return this.visitAssignmentExpression(g,c,h);case "LogicalExpression":return this.visitLogicalExpression(g,c,h);case "MemberExpression":return this.visitMemberExpression(g,c,h);case "ConditionalExpression":return this.visitConditionalExpression(g,c,h);case "CallExpression":return this.visitCallExpression(g,
c,h);case "NewExpression":return this.visitNewExpression(g,c,h);case "SequenceExpression":return this.visitSequenceExpression(g,c,h);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(g,c,h);case "YieldExpression":return this.visitYieldExpression(g,c,h);case "TemplateLiteral":return this.visitTemplateLiteral(g,c,h);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(g,c,h);case "AssignmentProperty":return this.visitAssignmentProperty(g,c,h);case "ObjectPattern":return this.visitObjectPattern(g,
c,h);case "ArrayPattern":return this.visitArrayPattern(g,c,h);case "RestElement":return this.visitRestElement(g,c,h);case "AssignmentPattern":return this.visitAssignmentPattern(g,c,h);case "ClassExpression":return this.visitClassExpression(g,c,h);case "MetaProperty":return this.visitMetaProperty(g,c,h);case "ImportDeclaration":return this.visitImportDeclaration(g,c,h);case "ImportSpecifier":return this.visitImportSpecifier(g,c,h);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(g,
c,h);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(g,c,h);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(g,c,h);case "ExportSpecifier":return this.visitExportSpecifier(g,c,h);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(g,c,h);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(g,c,h);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(g,
c,h);case "ExportAllDeclaration":return this.visitExportAllDeclaration(g,c,h);case "AwaitExpression":return this.visitAwaitExpression(g,c,h);case "JSXMemberExpression":return this.visitJSXMemberExpression(g,c,h);case "JSXNamespacedName":return this.visitJSXNamespacedName(g,c,h);case "JSXOpeningElement":return this.visitJSXOpeningElement(g,c,h);case "JSXClosingElement":return this.visitJSXClosingElement(g,c,h);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(g,c,h);case "JSXElement":return this.visitJSXElement(g,
c,h);case "JSXFragment":return this.visitJSXFragment(g,c,h);case "ImportExpression":return this.visitImportExpression(g,c,h);case "RegExpLiteral":return this.visitRegExpLiteral(g,c,h);case "FunctionBody":return this.visitFunctionBody(g,c,h);case "FunctionDeclaration":return this.visitFunctionDeclaration(g,c,h);case "VariableDeclaration":return this.visitVariableDeclaration(g,c,h);case "ForOfStatement":return this.visitForOfStatement(g,c,h);case "ClassDeclaration":return this.visitClassDeclaration(g,
c,h);case "JSXIdentifier":return this.visitJSXIdentifier(g,c,h);case "BigIntLiteral":return this.visitBigIntLiteral(g,c,h)}throw Error("No visit function in AST visitor Visitor for:\n  "+h.join(".")+"\n  "+JSON.stringify(g));};Md.prototype.visitNode=function(g,c,h){return g};Md.prototype.visitSourceLocation=function(g,c,h){g.start=this.accept(g.start,c,h.concat(["start"]));g.end=this.accept(g.end,c,h.concat(["end"]));return g};Md.prototype.visitPosition=function(g,c,h){return g};Md.prototype.visitProgram=
function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Md.prototype.visitFunction=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitStatement=
function(g,c,h){return g};Md.prototype.visitDirective=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Md.prototype.visitSwitchCase=function(g,c,h){g.test&&(g.test=this.accept(g.test,c,h.concat(["test"])));for(var f=[],m=0;m<g.consequent.length;m++){var n=g.consequent[m];n=n?this.accept(n,c,h.concat(["consequent",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.consequent=f;return g};Md.prototype.visitCatchClause=function(g,c,h){g.param&&(g.param=this.accept(g.param,
c,h.concat(["param"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitVariableDeclarator=function(g,c,h){g.id=this.accept(g.id,c,h.concat(["id"]));g.init&&(g.init=this.accept(g.init,c,h.concat(["init"])));return g};Md.prototype.visitExpression=function(g,c,h){return g};Md.prototype.visitProperty=function(g,c,h){g.key=this.accept(g.key,c,h.concat(["key"]));g.value=this.accept(g.value,c,h.concat(["value"]));return g};Md.prototype.visitPattern=function(g,c,h){return g};
Md.prototype.visitSuper=function(g,c,h){return g};Md.prototype.visitSpreadElement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Md.prototype.visitTemplateElement=function(g,c,h){return g};Md.prototype.visitClass=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitClassBody=function(g,c,h){for(var f=
[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Md.prototype.visitMethodDefinition=function(g,c,h){g.key=this.accept(g.key,c,h.concat(["key"]));g.value=this.accept(g.value,c,h.concat(["value"]));return g};Md.prototype.visitModuleDeclaration=function(g,c,h){return g};Md.prototype.visitModuleSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Md.prototype.visitJSXEmptyExpression=
function(g,c,h){return g};Md.prototype.visitJSXExpressionContainer=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Md.prototype.visitJSXSpreadChild=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Md.prototype.visitJSXBoundaryElement=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));return g};Md.prototype.visitJSXAttribute=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));g.value&&(g.value=
this.accept(g.value,c,h.concat(["value"])));return g};Md.prototype.visitJSXText=function(g,c,h){return g};Md.prototype.visitJSXOpeningFragment=function(g,c,h){return g};Md.prototype.visitJSXClosingFragment=function(g,c,h){return g};Md.prototype.visitIdentifier=function(g,c,h){return g};Md.prototype.visitLiteral=function(g,c,h){return g};Md.prototype.visitExpressionStatement=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Md.prototype.visitBlockStatement=
function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Md.prototype.visitEmptyStatement=function(g,c,h){return g};Md.prototype.visitDebuggerStatement=function(g,c,h){return g};Md.prototype.visitWithStatement=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitReturnStatement=function(g,
c,h){g.argument&&(g.argument=this.accept(g.argument,c,h.concat(["argument"])));return g};Md.prototype.visitLabeledStatement=function(g,c,h){g.label=this.accept(g.label,c,h.concat(["label"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitBreakStatement=function(g,c,h){g.label&&(g.label=this.accept(g.label,c,h.concat(["label"])));return g};Md.prototype.visitContinueStatement=function(g,c,h){g.label&&(g.label=this.accept(g.label,c,h.concat(["label"])));return g};Md.prototype.visitIfStatement=
function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.consequent=this.accept(g.consequent,c,h.concat(["consequent"]));g.alternate&&(g.alternate=this.accept(g.alternate,c,h.concat(["alternate"])));return g};Md.prototype.visitSwitchStatement=function(g,c,h){g.discriminant=this.accept(g.discriminant,c,h.concat(["discriminant"]));for(var f=[],m=0;m<g.cases.length;m++){var n=g.cases[m];n=n?this.accept(n,c,h.concat(["cases",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.cases=f;return g};
Md.prototype.visitThrowStatement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Md.prototype.visitTryStatement=function(g,c,h){g.block=this.accept(g.block,c,h.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,h.concat(["handler"])));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,h.concat(["finalizer"])));return g};Md.prototype.visitWhileStatement=function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.body=this.accept(g.body,c,h.concat(["body"]));
return g};Md.prototype.visitDoWhileStatement=function(g,c,h){g.body=this.accept(g.body,c,h.concat(["body"]));g.test=this.accept(g.test,c,h.concat(["test"]));return g};Md.prototype.visitForStatement=function(g,c,h){g.init&&(g.init=this.accept(g.init,c,h.concat(["init"])));g.test&&(g.test=this.accept(g.test,c,h.concat(["test"])));g.update&&(g.update=this.accept(g.update,c,h.concat(["update"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitForInStatement=function(g,c,h){g.left=
this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitDeclaration=function(g,c,h){return g};Md.prototype.visitThisExpression=function(g,c,h){return g};Md.prototype.visitArrayExpression=function(g,c,h){if(g.elements){for(var f=[],m=0;m<g.elements.length;m++){var n=g.elements[m];n=n?this.accept(n,c,h.concat(["elements",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.elements=f}return g};
Md.prototype.visitObjectExpression=function(g,c,h){for(var f=[],m=0;m<g.properties.length;m++){var n=g.properties[m];n=n?this.accept(n,c,h.concat(["properties",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.properties=f;return g};Md.prototype.visitFunctionExpression=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=
this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitUnaryExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Md.prototype.visitUpdateExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Md.prototype.visitBinaryExpression=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Md.prototype.visitAssignmentExpression=function(g,
c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Md.prototype.visitLogicalExpression=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Md.prototype.visitMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.property=this.accept(g.property,c,h.concat(["property"]));return g};Md.prototype.visitConditionalExpression=function(g,
c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.alternate=this.accept(g.alternate,c,h.concat(["alternate"]));g.consequent=this.accept(g.consequent,c,h.concat(["consequent"]));return g};Md.prototype.visitCallExpression=function(g,c,h){g.callee=this.accept(g.callee,c,h.concat(["callee"]));for(var f=[],m=0;m<g.arguments.length;m++){var n=g.arguments[m];n=n?this.accept(n,c,h.concat(["arguments",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.arguments=f;return g};Md.prototype.visitNewExpression=
function(g,c,h){g.callee=this.accept(g.callee,c,h.concat(["callee"]));for(var f=[],m=0;m<g.arguments.length;m++){var n=g.arguments[m];n=n?this.accept(n,c,h.concat(["arguments",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.arguments=f;return g};Md.prototype.visitSequenceExpression=function(g,c,h){for(var f=[],m=0;m<g.expressions.length;m++){var n=g.expressions[m];n=n?this.accept(n,c,h.concat(["expressions",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.expressions=f;return g};Md.prototype.visitArrowFunctionExpression=
function(g,c,h){g.body=this.accept(g.body,c,h.concat(["body"]));g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;return g};Md.prototype.visitYieldExpression=function(g,c,h){g.argument&&(g.argument=this.accept(g.argument,c,h.concat(["argument"])));return g};Md.prototype.visitTemplateLiteral=function(g,c,h){for(var f=[],m=0;m<g.quasis.length;m++){var n=
g.quasis[m];n=n?this.accept(n,c,h.concat(["quasis",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.quasis=f;f=[];for(m=0;m<g.expressions.length;m++)n=(n=g.expressions[m])?this.accept(n,c,h.concat(["expressions",m])):n,Array.isArray(n)?f.push.apply(f,n):f.push(n);g.expressions=f;return g};Md.prototype.visitTaggedTemplateExpression=function(g,c,h){g.tag=this.accept(g.tag,c,h.concat(["tag"]));g.quasi=this.accept(g.quasi,c,h.concat(["quasi"]));return g};Md.prototype.visitAssignmentProperty=function(g,
c,h){g.value=this.accept(g.value,c,h.concat(["value"]));g.key=this.accept(g.key,c,h.concat(["key"]));return g};Md.prototype.visitObjectPattern=function(g,c,h){for(var f=[],m=0;m<g.properties.length;m++){var n=g.properties[m];n=n?this.accept(n,c,h.concat(["properties",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.properties=f;return g};Md.prototype.visitArrayPattern=function(g,c,h){if(g.elements){for(var f=[],m=0;m<g.elements.length;m++){var n=g.elements[m];n=n?this.accept(n,c,h.concat(["elements",
m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.elements=f}return g};Md.prototype.visitRestElement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Md.prototype.visitAssignmentPattern=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Md.prototype.visitClassExpression=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,
c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitMetaProperty=function(g,c,h){g.meta=this.accept(g.meta,c,h.concat(["meta"]));g.property=this.accept(g.property,c,h.concat(["property"]));return g};Md.prototype.visitImportDeclaration=function(g,c,h){for(var f=[],m=0;m<g.specifiers.length;m++){var n=g.specifiers[m];n=n?this.accept(n,c,h.concat(["specifiers",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.specifiers=f;g.source=this.accept(g.source,
c,h.concat(["source"]));return g};Md.prototype.visitImportSpecifier=function(g,c,h){g.imported=this.accept(g.imported,c,h.concat(["imported"]));g.local=this.accept(g.local,c,h.concat(["local"]));return g};Md.prototype.visitImportDefaultSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Md.prototype.visitImportNamespaceSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Md.prototype.visitExportNamedDeclaration=function(g,c,h){g.declaration&&
(g.declaration=this.accept(g.declaration,c,h.concat(["declaration"])));for(var f=[],m=0;m<g.specifiers.length;m++){var n=g.specifiers[m];n=n?this.accept(n,c,h.concat(["specifiers",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.specifiers=f;g.source&&(g.source=this.accept(g.source,c,h.concat(["source"])));return g};Md.prototype.visitExportSpecifier=function(g,c,h){g.exported=this.accept(g.exported,c,h.concat(["exported"]));g.local=this.accept(g.local,c,h.concat(["local"]));return g};Md.prototype.visitAnonymousDefaultExportedFunctionDeclaration=
function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitAnonymousDefaultExportedClassDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,
c,h.concat(["body"]));return g};Md.prototype.visitExportDefaultDeclaration=function(g,c,h){g.declaration=this.accept(g.declaration,c,h.concat(["declaration"]));return g};Md.prototype.visitExportAllDeclaration=function(g,c,h){g.source=this.accept(g.source,c,h.concat(["source"]));return g};Md.prototype.visitAwaitExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Md.prototype.visitJSXMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));
g.property=this.accept(g.property,c,h.concat(["property"]));return g};Md.prototype.visitJSXNamespacedName=function(g,c,h){g.namespace=this.accept(g.namespace,c,h.concat(["namespace"]));g.name=this.accept(g.name,c,h.concat(["name"]));return g};Md.prototype.visitJSXOpeningElement=function(g,c,h){for(var f=[],m=0;m<g.attributes.length;m++){var n=g.attributes[m];n=n?this.accept(n,c,h.concat(["attributes",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.attributes=f;g.name=this.accept(g.name,c,h.concat(["name"]));
return g};Md.prototype.visitJSXClosingElement=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));return g};Md.prototype.visitJSXSpreadAttribute=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Md.prototype.visitJSXElement=function(g,c,h){g.openingElement=this.accept(g.openingElement,c,h.concat(["openingElement"]));for(var f=[],m=0;m<g.children.length;m++){var n=g.children[m];n=n?this.accept(n,c,h.concat(["children",m])):n;Array.isArray(n)?f.push.apply(f,
n):f.push(n)}g.children=f;g.closingElement&&(g.closingElement=this.accept(g.closingElement,c,h.concat(["closingElement"])));return g};Md.prototype.visitJSXFragment=function(g,c,h){g.openingFragment=this.accept(g.openingFragment,c,h.concat(["openingFragment"]));for(var f=[],m=0;m<g.children.length;m++){var n=g.children[m];n=n?this.accept(n,c,h.concat(["children",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.children=f;g.closingFragment=this.accept(g.closingFragment,c,h.concat(["closingFragment"]));
return g};Md.prototype.visitImportExpression=function(g,c,h){g.source=this.accept(g.source,c,h.concat(["source"]));return g};Md.prototype.visitRegExpLiteral=function(g,c,h){return g};Md.prototype.visitFunctionBody=function(g,c,h){for(var f=[],m=0;m<g.body.length;m++){var n=g.body[m];n=n?this.accept(n,c,h.concat(["body",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.body=f;return g};Md.prototype.visitFunctionDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var f=
[],m=0;m<g.params.length;m++){var n=g.params[m];n=n?this.accept(n,c,h.concat(["params",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.params=f;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitVariableDeclaration=function(g,c,h){for(var f=[],m=0;m<g.declarations.length;m++){var n=g.declarations[m];n=n?this.accept(n,c,h.concat(["declarations",m])):n;Array.isArray(n)?f.push.apply(f,n):f.push(n)}g.declarations=f;return g};Md.prototype.visitForOfStatement=function(g,c,
h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitClassDeclaration=function(g,c,h){g.id=this.accept(g.id,c,h.concat(["id"]));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Md.prototype.visitJSXIdentifier=function(g,c,h){return g};Md.prototype.visitBigIntLiteral=function(g,c,h){return g};
Ia("bN",Md);M0.Visitor=Md;M0.default=Md;var Gg=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Gg.obj=ff;Gg.Path=Sg;Gg.Visitor=Md;var rx=function(){return Gg.Visitor.apply(this,arguments)||this};$jscomp.inherits(rx,Gg.Visitor);rx.prototype.accept=function(g,c,h){var f=h.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),m=[];h=Gg.Visitor.prototype.accept.call(this,g,{index:c.index,tree:m},h);c.tree.push({node:g,path:f,index:c.index++,children:m});return h};
Gg.PrinterVisitor=rx;var Ui=function(){return Gg.Visitor.apply(this,arguments)||this};$jscomp.inherits(Ui,Gg.Visitor);Ui.prototype.recordNotEqual=function(g,c,h,f){h.comparisons.errors.push({node1:g,node2:c,path:h.completePath,msg:f})};Ui.prototype.compareType=function(g,c,h){return this.compareField("type",g,c,h)};Ui.prototype.compareField=function(g,c,h,f){h=Gg.Path(f.completePath.join(".")).get(h);if(c&&h&&c[g]===h[g]||c&&"*"===c[g]||h&&"*"===h[g])return!0;var m=f.completePath.join(".")+"."+g;
this.recordNotEqual(c,h,f,c?h?m+" is not equal: "+c[g]+" vs. "+h[g]:"node2 not defined but node1 ("+m+") is: "+c[g]:"node1 on "+m+" not defined");return!1};Ui.prototype.accept=function(g,c,h,f){var m=Gg.Path(f.join(".")).get(c);if("*"!==g&&"*"!==m&&(h={completePath:f,comparisons:h.comparisons},this.compareType(g,c,h)))this["visit"+g.type](g,c,h,f)};Ui.prototype.visitFunction=function(g,c,h,f){g.generator&&this.compareField("generator",g,c,h);g.expression&&this.compareField("expression",g,c,h);return Gg.Visitor.prototype.visitFunction.call(this,
g,c,h,f)};Ui.prototype.visitSwitchStatement=function(g,c,h,f){g.lexical&&this.compareField("lexical",g,c,h);return Gg.Visitor.prototype.visitSwitchStatement.call(this,g,c,h,f)};Ui.prototype.visitForInStatement=function(g,c,h,f){g.each&&this.compareField("each",g,c,h);return Gg.Visitor.prototype.visitForInStatement.call(this,g,c,h,f)};Ui.prototype.visitFunctionDeclaration=function(g,c,h,f){g.generator&&this.compareField("generator",g,c,h);g.expression&&this.compareField("expression",g,c,h);return Gg.Visitor.prototype.visitFunctionDeclaration.call(this,
g,c,h,f)};Ui.prototype.visitVariableDeclaration=function(g,c,h,f){this.compareField("kind",g,c,h);return Gg.Visitor.prototype.visitVariableDeclaration.call(this,g,c,h,f)};Ui.prototype.visitUnaryExpression=function(g,c,h,f){this.compareField("operator",g,c,h);g.prefix&&this.compareField("prefix",g,c,h);return Gg.Visitor.prototype.visitUnaryExpression.call(this,g,c,h,f)};Ui.prototype.visitBinaryExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return Gg.Visitor.prototype.visitBinaryExpression.call(this,
g,c,h,f)};Ui.prototype.visitAssignmentExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return Gg.Visitor.prototype.visitAssignmentExpression.call(this,g,c,h,f)};Ui.prototype.visitUpdateExpression=function(g,c,h,f){this.compareField("operator",g,c,h);g.prefix&&this.compareField("prefix",g,c,h);return Gg.Visitor.prototype.visitUpdateExpression.call(this,g,c,h,f)};Ui.prototype.visitLogicalExpression=function(g,c,h,f){this.compareField("operator",g,c,h);return Gg.Visitor.prototype.visitLogicalExpression.call(this,
g,c,h,f)};Ui.prototype.visitMemberExpression=function(g,c,h,f){g.computed&&this.compareField("computed",g,c,h);return Gg.Visitor.prototype.visitMemberExpression.call(this,g,c,h,f)};Ui.prototype.visitComprehensionBlock=function(g,c,h,f){g.each&&this.compareField("each",g,c,h);return Gg.Visitor.prototype.visitComprehensionBlock.call(this,g,c,h,f)};Ui.prototype.visitIdentifier=function(g,c,h,f){this.compareField("name",g,c,h);return Gg.Visitor.prototype.visitIdentifier.call(this,g,c,h,f)};Ui.prototype.visitLiteral=
function(g,c,h,f){this.compareField("value",g,c,h);return Gg.Visitor.prototype.visitLiteral.call(this,g,c,h,f)};Ui.prototype.visitClassDeclaration=function(g,c,h,f){this.compareField("id",g,c,h);g.superClass&&this.compareField("superClass",g,c,h);this.compareField("body",g,c,h);return Gg.Visitor.prototype.visitClassDeclaration.call(this,g,c,h,f)};Ui.prototype.visitClassBody=function(g,c,h,f){this.compareField("body",g,c,h);return Gg.Visitor.prototype.visitClassBody.call(this,g,c,h,f)};Ui.prototype.visitMethodDefinition=
function(g,c,h,f){this.compareField("static",g,c,h);this.compareField("computed",g,c,h);this.compareField("kind",g,c,h);this.compareField("key",g,c,h);this.compareField("value",g,c,h);return Gg.Visitor.prototype.visitMethodDefinition.call(this,g,c,h,f)};Gg.ComparisonVisitor=Ui;var ni=function(){return Gg.Visitor.apply(this,arguments)||this};$jscomp.inherits(ni,Gg.Visitor);ni.prototype.newScope=function(g,c){g={node:g,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(g);return g};ni.prototype.visitVariableDeclaration=function(g,c,h){c.varDecls.push(g);c.varDeclPaths.push(h);return Gg.Visitor.prototype.visitVariableDeclaration.call(this,g,c,h)};ni.prototype.visitVariableDeclarator=function(g,c,h){g.init&&(g.init=this.accept(g.init,
c,h.concat(["init"])));return g};ni.prototype.visitFunction=function(g,c,h){var f=this,m=this.newScope(g,c);g.params.forEach(function(n,a){"AssignmentPattern"===n.type&&f.accept(n.right,m,h.concat("params",a,"right"))});m.params=Array.prototype.slice.call(g.params);return m};ni.prototype.visitFunctionDeclaration=function(g,c,h){var f=this.visitFunction(g,c,h);c.funcDecls.push(g);c.funcDeclPaths.push(h);var m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",
d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,f,h.concat(["loc"])));return g};ni.prototype.visitFunctionExpression=function(g,c,h){var f=this.visitFunction(g,c,h),m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,
f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,f,h.concat(["loc"])));return g};ni.prototype.visitArrowFunctionExpression=function(g,c,h){var f=this.visitFunction(g,c,h),m=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,a,d){a=m.accept(a,f,h.concat(["defaults",d]));Array.isArray(a)?n.push.apply(n,a):n.push(a);return n},[]));g.rest&&(g.rest=m.accept(g.rest,f,h.concat(["rest"])));g.body=m.accept(g.body,f,h.concat(["body"]));g.loc&&(g.loc=m.accept(g.loc,
f,h.concat(["loc"])));return g};ni.prototype.visitIdentifier=function(g,c,h){c.refs.push(g);return Gg.Visitor.prototype.visitIdentifier.call(this,g,c,h)};ni.prototype.visitMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.computed&&(g.property=this.accept(g.property,c,h.concat(["property"])));return g};ni.prototype.visitProperty=function(g,c,h){g.computed&&(g.key=this.accept(g.key,c,h.concat(["key"])));g.value=this.accept(g.value,c,h.concat(["value"]));return g};
ni.prototype.visitThisExpression=function(g,c,h){c.thisRefs.push(g);return Gg.Visitor.prototype.visitThisExpression.call(this,g,c,h)};ni.prototype.visitTryStatement=function(g,c,h){g.block=this.accept(g.block,c,h.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,h.concat(["handler"])),c.catches.push(g.handler.param));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,h.concat(["finalizer"])));return g};ni.prototype.visitLabeledStatement=function(g,c,h){g.body=this.accept(g.body,c,
h.concat(["body"]));return g};ni.prototype.visitClassDeclaration=function(g,c,h){c.classDecls.push(g);c.classDeclPaths.push(h);g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};ni.prototype.visitClassExpression=function(g,c,h){g.id&&(c.classExprs.push(g),c.classExprPaths.push(h));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));
return g};ni.prototype.visitMethodDefinition=function(g,c,h){g.value=this.accept(g.value,c,h.concat(["value"]));return g};ni.prototype.visitMetaProperty=function(g,c,h){return g};ni.prototype.visitBreakStatement=function(g,c,h){return g};ni.prototype.visitContinueStatement=function(g,c,h){return g};ni.prototype.visitImportSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(h);return g};ni.prototype.visitImportDefaultSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);
c.importSpecifierPaths.push(h);return g};ni.prototype.visitImportNamespaceSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(h);return g};ni.prototype.visitExportSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};ni.prototype.visitExportNamedDeclaration=function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);g.source||Gg.Visitor.prototype.visitExportNamedDeclaration.call(this,g,c,h);return g};ni.prototype.visitExportDefaultDeclaration=
function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);return Gg.Visitor.prototype.visitExportDefaultDeclaration.call(this,g,c,h)};ni.prototype.visitExportAllDeclaration=function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);return Gg.Visitor.prototype.visitExportAllDeclaration.call(this,g,c,h)};Gg.ScopeVisitor=ni;Gg.BaseVisitor=Md;Gg.Visitor=Md;Gg.PrinterVisitor=rx;Gg.PrinterVisitor=rx;Gg.ComparisonVisitor=Ui;Gg.ComparisonVisitor=Ui;Gg.ScopeVisitor=ni;Gg.ScopeVisitor=ni;var Nf=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,YO={};(function h(c){function f(C){var D={},L;for(L in C)if(C.hasOwnProperty(L)){var I=C[L];D[L]="object"===typeof I&&null!==I?f(I):I}return D}function m(C,D){var L;var I=C.length;for(L=0;I;){var S=I>>>1;var V=L+S;D(C[V])?I=S:(L=V+1,I-=S+1)}return L}function n(C,D){(this||Nf).parent=C;(this||Nf).key=D}function a(C,D,L,I){(this||Nf).node=C;(this||Nf).path=D;(this||Nf).wrap=L;(this||Nf).ref=I}function d(){}function k(C){return null==
C?!1:"object"===typeof C&&"string"===typeof C.type}function b(C,D){for(var L=C.length-1;0<=L;--L)if(C[L].node===D)return!0;return!1}function e(C,D){return(new d).traverse(C,D)}function l(C,D){var L=m(D,function(I){return I.range[0]>C.range[0]});C.extendedRange=[C.range[0],C.range[1]];L!==D.length&&(C.extendedRange[1]=D[L].range[0]);--L;0<=L&&(C.extendedRange[0]=D[L].range[1]);return C}var p={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var q={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var u={};var w={};var y={};var A={Break:u,Skip:w,Remove:y};n.prototype.replace=function(C){(this||Nf).parent[(this||Nf).key]=C};n.prototype.remove=function(){if(Array.isArray((this||Nf).parent))return(this||Nf).parent.splice((this||Nf).key,1),!0;this.replace(null);return!1};d.prototype.path=function(){function C(ua,Fa){if(Array.isArray(Fa))for(L=
0,I=Fa.length;L<I;++L)ua.push(Fa[L]);else ua.push(Fa)}var D,L,I;if(!(this||Nf).__current.path)return null;var S=[];var V=2;for(D=(this||Nf).__leavelist.length;V<D;++V){var ba=(this||Nf).__leavelist[V];C(S,ba.path)}C(S,(this||Nf).__current.path);return S};d.prototype.type=function(){return this.current().type||(this||Nf).__current.wrap};d.prototype.parents=function(){var C;var D=[];var L=1;for(C=(this||Nf).__leavelist.length;L<C;++L)D.push((this||Nf).__leavelist[L].node);return D};d.prototype.current=
function(){return(this||Nf).__current.node};d.prototype.__execute=function(C,D){var L=void 0;var I=(this||Nf).__current;(this||Nf).__current=D;(this||Nf).__state=null;C&&(L=C.call(this||Nf,D.node,(this||Nf).__leavelist[(this||Nf).__leavelist.length-1].node));(this||Nf).__current=I;return L};d.prototype.notify=function(C){(this||Nf).__state=C};d.prototype.skip=function(){this.notify(w)};d.prototype["break"]=function(){this.notify(u)};d.prototype.remove=function(){this.notify(y)};d.prototype.__initialize=
function(C,D){(this||Nf).visitor=D;(this||Nf).root=C;(this||Nf).__worklist=[];(this||Nf).__leavelist=[];(this||Nf).__current=null;(this||Nf).__state=null;(this||Nf).__fallback=null;"iteration"===D.fallback?(this||Nf).__fallback=Object.keys:"function"===typeof D.fallback&&((this||Nf).__fallback=D.fallback);(this||Nf).__keys=q;D.keys&&((this||Nf).__keys=Object.assign(Object.create((this||Nf).__keys),D.keys))};d.prototype.traverse=function(C,D){var L,I,S;this.__initialize(C,D);var V={};var ba=(this||
Nf).__worklist;var ua=(this||Nf).__leavelist;ba.push(new a(C,null,null,null));for(ua.push(new a(null,null,null,null));ba.length;)if(C=ba.pop(),C===V){C=ua.pop();var Fa=this.__execute(D.leave,C);if((this||Nf).__state===u||Fa===u)break}else if(C.node){Fa=this.__execute(D.enter,C);if((this||Nf).__state===u||Fa===u)break;ba.push(V);ua.push(C);if((this||Nf).__state!==w&&Fa!==w){Fa=C.node;var F=Fa.type||C.wrap;var Y=(this||Nf).__keys[F];if(!Y)if((this||Nf).__fallback)Y=this.__fallback(Fa);else throw Error("Unknown node type "+
F+".");for(L=Y.length;0<=--L;){var Q=Y[L];if(S=Fa[Q])if(Array.isArray(S))for(I=S.length;0<=--I;){if(S[I]&&!b(ua,S[I])){if(F!==p.ObjectExpression&&F!==p.ObjectPattern||"properties"!==Y[L])if(k(S[I]))C=new a(S[I],[Q,I],null,null);else continue;else C=new a(S[I],[Q,I],"Property",null);ba.push(C)}}else k(S)&&!b(ua,S)&&ba.push(new a(S,Q,null,null))}}}};d.prototype.replace=function(C,D){function L(ea){if(ea.ref.remove()){var la=ea.ref.key;var db=ea.ref.parent;for(ea=ua.length;ea--;){var ub=ua[ea];if(ub.ref&&
ub.ref.parent===db){if(ub.ref.key<la)break;--ub.ref.key}}}}var I,S,V;this.__initialize(C,D);var ba={};var ua=(this||Nf).__worklist;var Fa=(this||Nf).__leavelist;var F={root:C};var Y=new a(C,null,null,new n(F,"root"));ua.push(Y);for(Fa.push(Y);ua.length;)if(Y=ua.pop(),Y===ba){Y=Fa.pop();var Q=this.__execute(D.leave,Y);void 0!==Q&&Q!==u&&Q!==w&&Q!==y&&Y.ref.replace(Q);(this||Nf).__state!==y&&Q!==y||L(Y);if((this||Nf).__state===u||Q===u)break}else{Q=this.__execute(D.enter,Y);void 0!==Q&&Q!==u&&Q!==w&&
Q!==y&&(Y.ref.replace(Q),Y.node=Q);if((this||Nf).__state===y||Q===y)L(Y),Y.node=null;if((this||Nf).__state===u||Q===u)break;if(C=Y.node)if(ua.push(ba),Fa.push(Y),(this||Nf).__state!==w&&Q!==w){Q=C.type||Y.wrap;var W=(this||Nf).__keys[Q];if(!W)if((this||Nf).__fallback)W=this.__fallback(C);else throw Error("Unknown node type "+Q+".");for(I=W.length;0<=--I;){var ka=W[I];if(V=C[ka])if(Array.isArray(V))for(S=V.length;0<=--S;){if(V[S]){if(Q!==p.ObjectExpression&&Q!==p.ObjectPattern||"properties"!==W[I])if(k(V[S]))Y=
new a(V[S],[ka,S],null,new n(V,S));else continue;else Y=new a(V[S],[ka,S],"Property",new n(V,S));ua.push(Y)}}else k(V)&&ua.push(new a(V,ka,null,new n(C,ka)))}}}return F.root};c.Syntax=p;c.traverse=e;c.replace=function(C,D){return(new d).replace(C,D)};c.attachComments=function(C,D,L){var I=[],S;if(!C.range)throw Error("attachComments needs range information");if(!L.length){if(D.length){var V=0;for(S=D.length;V<S;V+=1)L=f(D[V]),L.extendedRange=[0,C.range[0]],I.push(L);C.leadingComments=I}return C}V=
0;for(S=D.length;V<S;V+=1)I.push(l(f(D[V]),L));var ba=0;e(C,{enter:function(ua){for(var Fa;ba<I.length;){Fa=I[ba];if(Fa.extendedRange[1]>ua.range[0])break;Fa.extendedRange[1]===ua.range[0]?(ua.leadingComments||(ua.leadingComments=[]),ua.leadingComments.push(Fa),I.splice(ba,1)):ba+=1}if(ba===I.length)return A.Break;if(I[ba].extendedRange[0]>ua.range[1])return A.Skip}});ba=0;e(C,{leave:function(ua){for(var Fa;ba<I.length;){Fa=I[ba];if(ua.range[1]<Fa.extendedRange[0])break;ua.range[1]===Fa.extendedRange[0]?
(ua.trailingComments||(ua.trailingComments=[]),ua.trailingComments.push(Fa),I.splice(ba,1)):ba+=1}if(ba===I.length)return A.Break;if(I[ba].extendedRange[0]>ua.range[1])return A.Skip}});return C};c.VisitorKeys=q;c.VisitorOption=A;c.Controller=d;c.cloneEnvironment=function(){return h({})};return c})(YO);var N0={};(function(){function c(f){if(null==f)return!1;switch(f.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(f){switch(f.type){case "IfStatement":return null!=f.alternate?f.alternate:f.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return f.body}return null}N0={isExpression:function(f){if(null==f)return!1;switch(f.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(f){if(null==f)return!1;switch(f.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(f){return c(f)||null!=f&&"FunctionDeclaration"===f.type},isProblematicIfStatement:function(f){if("IfStatement"!==f.type||null==f.alternate)return!1;f=f.consequent;do{if("IfStatement"===f.type&&null==f.alternate)return!0;f=h(f)}while(f);return!1},trailingStatement:h}})();var vda=N0,O0={};
(function(){function c(e){if(65535>=e)return String.fromCharCode(e);var l=String.fromCharCode(Math.floor((e-65536)/1024)+55296);e=String.fromCharCode((e-65536)%1024+56320);return l+e}var h;var f=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var m=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var a=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var d=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var k=Array(128);for(h=0;128>h;++h)k[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var b=Array(128);for(h=0;128>h;++h)b[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;O0={isDecimalDigit:function(e){return 48<=e&&57>=e},isHexDigit:function(e){return 48<=e&&57>=e||97<=e&&102>=e||65<=e&&70>=e},isOctalDigit:function(e){return 48<=e&&55>=e},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===
e||160===e||5760<=e&&0<=d.indexOf(e)},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStartES5:function(e){return 128>e?k[e]:f.test(c(e))},isIdentifierPartES5:function(e){return 128>e?b[e]:m.test(c(e))},isIdentifierStartES6:function(e){return 128>e?k[e]:n.test(c(e))},isIdentifierPartES6:function(e){return 128>e?b[e]:a.test(c(e))}}})();var P0=O0,Q0={};(function(){function c(k,b){return b||"yield"!==k?h(k,b):!1}function h(k,b){if(b)a:switch(k){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":b=
!0;break a;default:b=!1}if(b)return!0;switch(k.length){case 2:return"if"===k||"in"===k||"do"===k;case 3:return"var"===k||"for"===k||"new"===k||"try"===k;case 4:return"this"===k||"else"===k||"case"===k||"void"===k||"with"===k||"enum"===k;case 5:return"while"===k||"break"===k||"catch"===k||"throw"===k||"const"===k||"yield"===k||"class"===k||"super"===k;case 6:return"return"===k||"typeof"===k||"delete"===k||"switch"===k||"export"===k||"import"===k;case 7:return"default"===k||"finally"===k||"extends"===
k;case 8:return"function"===k||"continue"===k||"debugger"===k;case 10:return"instanceof"===k;default:return!1}}function f(k,b){return"null"===k||"true"===k||"false"===k||c(k,b)}function m(k,b){return"null"===k||"true"===k||"false"===k||h(k,b)}function n(k){var b;if(0===k.length)return!1;var e=k.charCodeAt(0);if(!d.isIdentifierStartES5(e))return!1;var l=1;for(b=k.length;l<b;++l)if(e=k.charCodeAt(l),!d.isIdentifierPartES5(e))return!1;return!0}function a(k){var b;if(0===k.length)return!1;var e=d.isIdentifierStartES6;
var l=0;for(b=k.length;l<b;++l){var p=k.charCodeAt(l);if(55296<=p&&56319>=p){++l;if(l>=b)return!1;var q=k.charCodeAt(l);if(!(56320<=q&&57343>=q))return!1;p=1024*(p-55296)+(q-56320)+65536}if(!e(p))return!1;e=d.isIdentifierPartES6}return!0}var d=P0;Q0={isKeywordES5:c,isKeywordES6:h,isReservedWordES5:f,isReservedWordES6:m,isRestrictedWord:function(k){return"eval"===k||"arguments"===k},isIdentifierNameES5:n,isIdentifierNameES6:a,isIdentifierES5:function(k,b){return n(k)&&!f(k,b)},isIdentifierES6:function(k,
b){return a(k)&&!m(k,b)}}})();var wda=Q0,xA={};xA.ast=vda;xA.code=P0;xA.keyword=wda;var dk={getArg:function(c,h,f){if(h in c)return c[h];if(3===arguments.length)return f;throw Error('"'+h+'" is a required argument.');}},fS=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,E6=/^data:.+,.+$/;dk.urlParse=Zp;dk.urlGenerate=lr;dk.normalize=Z;dk.join=va;dk.isAbsolute=function(c){return"/"===c.charAt(0)||fS.test(c)};dk.relative=function(c,h){""===c&&(c=".");c=c.replace(/\/$/,"");for(var f=
0;0!==h.indexOf(c+"/");){var m=c.lastIndexOf("/");if(0>m)return h;c=c.slice(0,m);if(c.match(/^([^\/]+:\/)?\/*$/))return h;++f}return Array(f+1).join("../")+h.substr(c.length+1)};var R0=!("__proto__"in Object.create(null));dk.toSetString=R0?ab:wb;dk.fromSetString=R0?ab:Wb;dk.compareByOriginalPositions=function(c,h,f){var m=Zc(c.source,h.source);if(0!==m)return m;m=c.originalLine-h.originalLine;if(0!==m)return m;m=c.originalColumn-h.originalColumn;if(0!==m||f)return m;m=c.generatedColumn-h.generatedColumn;
if(0!==m)return m;m=c.generatedLine-h.generatedLine;return 0!==m?m:Zc(c.name,h.name)};dk.compareByGeneratedPositionsDeflated=function(c,h,f){var m=c.generatedLine-h.generatedLine;if(0!==m)return m;m=c.generatedColumn-h.generatedColumn;if(0!==m||f)return m;m=Zc(c.source,h.source);if(0!==m)return m;m=c.originalLine-h.originalLine;if(0!==m)return m;m=c.originalColumn-h.originalColumn;return 0!==m?m:Zc(c.name,h.name)};dk.compareByGeneratedPositionsInflated=function(c,h){var f=c.generatedLine-h.generatedLine;
if(0!==f)return f;f=c.generatedColumn-h.generatedColumn;if(0!==f)return f;f=Zc(c.source,h.source);if(0!==f)return f;f=c.originalLine-h.originalLine;if(0!==f)return f;f=c.originalColumn-h.originalColumn;return 0!==f?f:Zc(c.name,h.name)};dk.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};dk.computeSourceURL=function(c,h,f){h=h||"";c&&("/"!==c[c.length-1]&&"/"!==h[0]&&(c+="/"),h=c+h);if(f){c=Zp(f);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(f=c.path.lastIndexOf("/"),
0<=f&&(c.path=c.path.substring(0,f+1)));h=va(lr(c),h)}return Z(h)};var iH={},S0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");iH.encode=function(c){if(0<=c&&c<S0.length)return S0[c];throw new TypeError("Must be between 0 and 63: "+c);};iH.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var sx={encode:function(c){var h="",f=0>c?(-c<<1)+1:c<<1;do c=f&31,f>>>=5,0<f&&(c|=32),h+=iH.encode(c);while(0<f);return h},
decode:function(c,h,f){var m=c.length,n=0,a=0;do{if(h>=m)throw Error("Expected more digits in base 64 VLQ value.");var d=iH.decode(c.charCodeAt(h++));if(-1===d)throw Error("Invalid base64 digit: "+c.charAt(h-1));var k=!!(d&32);d&=31;n+=d<<a;a+=5}while(k);c=n>>1;f.value=1===(n&1)?-c:c;f.rest=h}},$k="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ZO=dk,$O=Object.prototype.hasOwnProperty,qt="undefined"!==typeof Map;be.fromArray=function(c,h){for(var f=new be,m=0,n=c.length;m<
n;m++)f.add(c[m],h);return f};be.prototype.size=function(){return qt?(this||$k)._set.size:Object.getOwnPropertyNames((this||$k)._set).length};be.prototype.add=function(c,h){var f=qt?c:ZO.toSetString(c),m=qt?this.has(c):$O.call((this||$k)._set,f),n=(this||$k)._array.length;m&&!h||(this||$k)._array.push(c);m||(qt?(this||$k)._set.set(c,n):(this||$k)._set[f]=n)};be.prototype.has=function(c){if(qt)return(this||$k)._set.has(c);c=ZO.toSetString(c);return $O.call((this||$k)._set,c)};be.prototype.indexOf=
function(c){if(qt){var h=(this||$k)._set.get(c);if(0<=h)return h}else if(h=ZO.toSetString(c),$O.call((this||$k)._set,h))return(this||$k)._set[h];throw Error('"'+c+'" is not in the set.');};be.prototype.at=function(c){if(0<=c&&c<(this||$k)._array.length)return(this||$k)._array[c];throw Error("No element indexed by "+c);};be.prototype.toArray=function(){return(this||$k)._array.slice()};var Ym="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,T0=dk;pe.prototype.unsortedForEach=
function(c,h){(this||Ym)._array.forEach(c,h)};pe.prototype.add=function(c){var h=(this||Ym)._last,f=h.generatedLine,m=c.generatedLine,n=h.generatedColumn,a=c.generatedColumn;m>f||m==f&&a>=n||0>=T0.compareByGeneratedPositionsInflated(h,c)?(this||Ym)._last=c:(this||Ym)._sorted=!1;(this||Ym)._array.push(c)};pe.prototype.toArray=function(){(this||Ym)._sorted||((this||Ym)._array.sort(T0.compareByGeneratedPositionsInflated),(this||Ym)._sorted=!0);return(this||Ym)._array};var Ug="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Lj=dk,ZB=be,F6=pe;Te.prototype._version=3;Te.fromSourceMap=function(c){var h=c.sourceRoot,f=new Te({file:c.file,sourceRoot:h});c.eachMapping(function(m){var n={generated:{line:m.generatedLine,column:m.generatedColumn}};null!=m.source&&(n.source=m.source,null!=h&&(n.source=Lj.relative(h,n.source)),n.original={line:m.originalLine,column:m.originalColumn},null!=m.name&&(n.name=m.name));f.addMapping(n)});c.sources.forEach(function(m){var n=m;null!==h&&
(n=Lj.relative(h,m));f._sources.has(n)||f._sources.add(n);n=c.sourceContentFor(m);null!=n&&f.setSourceContent(m,n)});return f};Te.prototype.addMapping=function(c){var h=Lj.getArg(c,"generated"),f=Lj.getArg(c,"original",null),m=Lj.getArg(c,"source",null);c=Lj.getArg(c,"name",null);(this||Ug)._skipValidation||this._validateMapping(h,f,m,c);null!=m&&(m=String(m),(this||Ug)._sources.has(m)||(this||Ug)._sources.add(m));null!=c&&(c=String(c),(this||Ug)._names.has(c)||(this||Ug)._names.add(c));(this||Ug)._mappings.add({generatedLine:h.line,
generatedColumn:h.column,originalLine:null!=f&&f.line,originalColumn:null!=f&&f.column,source:m,name:c})};Te.prototype.setSourceContent=function(c,h){null!=(this||Ug)._sourceRoot&&(c=Lj.relative((this||Ug)._sourceRoot,c));null!=h?((this||Ug)._sourcesContents||((this||Ug)._sourcesContents=Object.create(null)),(this||Ug)._sourcesContents[Lj.toSetString(c)]=h):(this||Ug)._sourcesContents&&(delete (this||Ug)._sourcesContents[Lj.toSetString(c)],0===Object.keys((this||Ug)._sourcesContents).length&&((this||
Ug)._sourcesContents=null))};Te.prototype.applySourceMap=function(c,h,f){var m=h;if(null==h){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');m=c.file}var n=(this||Ug)._sourceRoot;null!=n&&(m=Lj.relative(n,m));var a=new ZB,d=new ZB;(this||Ug)._mappings.unsortedForEach(function(k){if(k.source===m&&null!=k.originalLine){var b=c.originalPositionFor({line:k.originalLine,column:k.originalColumn});
null!=b.source&&(k.source=b.source,null!=f&&(k.source=Lj.join(f,k.source)),null!=n&&(k.source=Lj.relative(n,k.source)),k.originalLine=b.line,k.originalColumn=b.column,null!=b.name&&(k.name=b.name))}b=k.source;null==b||a.has(b)||a.add(b);k=k.name;null==k||d.has(k)||d.add(k)},this||Ug);(this||Ug)._sources=a;(this||Ug)._names=d;c.sources.forEach(function(k){var b=c.sourceContentFor(k);null!=b&&(null!=f&&(k=Lj.join(f,k)),null!=n&&(k=Lj.relative(n,k)),this.setSourceContent(k,b))},this||Ug)};Te.prototype._validateMapping=
function(c,h,f,m){if(h&&"number"!==typeof h.line&&"number"!==typeof h.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!h&&!f&&!m||c&&"line"in c&&"column"in c&&h&&"line"in h&&"column"in h&&0<c.line&&0<=c.column&&0<h.line&&0<=h.column&&
f))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:f,original:h,name:m}));};Te.prototype._serializeMappings=function(){for(var c=0,h=1,f=0,m=0,n=0,a=0,d="",k,b,e,l=(this||Ug)._mappings.toArray(),p=0,q=l.length;p<q;p++){b=l[p];k="";if(b.generatedLine!==h)for(c=0;b.generatedLine!==h;)k+=";",h++;else if(0<p){if(!Lj.compareByGeneratedPositionsInflated(b,l[p-1]))continue;k+=","}k+=sx.encode(b.generatedColumn-c);c=b.generatedColumn;null!=b.source&&(e=(this||Ug)._sources.indexOf(b.source),
k+=sx.encode(e-a),a=e,k+=sx.encode(b.originalLine-1-m),m=b.originalLine-1,k+=sx.encode(b.originalColumn-f),f=b.originalColumn,null!=b.name&&(b=(this||Ug)._names.indexOf(b.name),k+=sx.encode(b-n),n=b));d+=k}return d};Te.prototype._generateSourcesContent=function(c,h){return c.map(function(f){if(!(this||Ug)._sourcesContents)return null;null!=h&&(f=Lj.relative(h,f));f=Lj.toSetString(f);return Object.prototype.hasOwnProperty.call((this||Ug)._sourcesContents,f)?(this||Ug)._sourcesContents[f]:null},this||
Ug)};Te.prototype.toJSON=function(){var c={version:(this||Ug)._version,sources:(this||Ug)._sources.toArray(),names:(this||Ug)._names.toArray(),mappings:this._serializeMappings()};null!=(this||Ug)._file&&(c.file=(this||Ug)._file);null!=(this||Ug)._sourceRoot&&(c.sourceRoot=(this||Ug)._sourceRoot);(this||Ug)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};Te.prototype.toString=function(){return JSON.stringify(this.toJSON())};var $B={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,h,f,m){if(0===h.length)return-1;c=Bf(-1,h.length,c,h,f,m||$B.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===f(h[c],h[c-1],!0);)--c;return c}},je="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nf=dk,aP=$B,Uv=be,yA=function(c,h){ri(c,h,0,c.length-1)};gf.fromSourceMap=function(c,h){return Ki.fromSourceMap(c,h)};gf.prototype._version=3;gf.prototype.__generatedMappings=null;Object.defineProperty(gf.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||je).__generatedMappings||this._parseMappings((this||je)._mappings,(this||je).sourceRoot);return(this||je).__generatedMappings}});gf.prototype.__originalMappings=null;Object.defineProperty(gf.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||je).__originalMappings||this._parseMappings((this||je)._mappings,(this||je).sourceRoot);return(this||je).__originalMappings}});gf.prototype._charIsMappingSeparator=function(c,
h){c=c.charAt(h);return";"===c||","===c};gf.prototype._parseMappings=function(c,h){throw Error("Subclasses must implement _parseMappings");};gf.GENERATED_ORDER=1;gf.ORIGINAL_ORDER=2;gf.GREATEST_LOWER_BOUND=1;gf.LEAST_UPPER_BOUND=2;gf.prototype.eachMapping=function(c,h,f){h=h||null;switch(f||gf.GENERATED_ORDER){case gf.GENERATED_ORDER:f=(this||je)._generatedMappings;break;case gf.ORIGINAL_ORDER:f=(this||je)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var m=(this||je).sourceRoot;
f.map(function(n){var a=null===n.source?null:(this||je)._sources.at(n.source);a=nf.computeSourceURL(m,a,(this||je)._sourceMapURL);return{source:a,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||je)._names.at(n.name)}},this||je).forEach(c,h)};gf.prototype.allGeneratedPositionsFor=function(c){var h=nf.getArg(c,"line"),f={source:nf.getArg(c,"source"),originalLine:h,originalColumn:nf.getArg(c,"column",
0)};f.source=this._findSourceIndex(f.source);if(0>f.source)return[];var m=[];f=this._findMapping(f,(this||je)._originalMappings,"originalLine","originalColumn",nf.compareByOriginalPositions,aP.LEAST_UPPER_BOUND);if(0<=f){var n=(this||je)._originalMappings[f];if(void 0===c.column)for(h=n.originalLine;n&&n.originalLine===h;)m.push({line:nf.getArg(n,"generatedLine",null),column:nf.getArg(n,"generatedColumn",null),lastColumn:nf.getArg(n,"lastGeneratedColumn",null)}),n=(this||je)._originalMappings[++f];
else for(c=n.originalColumn;n&&n.originalLine===h&&n.originalColumn==c;)m.push({line:nf.getArg(n,"generatedLine",null),column:nf.getArg(n,"generatedColumn",null),lastColumn:nf.getArg(n,"lastGeneratedColumn",null)}),n=(this||je)._originalMappings[++f]}return m};Ki.prototype=Object.create(gf.prototype);Ki.prototype.consumer=gf;Ki.prototype._findSourceIndex=function(c){var h=c;null!=(this||je).sourceRoot&&(h=nf.relative((this||je).sourceRoot,h));if((this||je)._sources.has(h))return(this||je)._sources.indexOf(h);
for(h=0;h<(this||je)._absoluteSources.length;++h)if((this||je)._absoluteSources[h]==c)return h;return-1};Ki.fromSourceMap=function(c,h){var f=Object.create(Ki.prototype),m=f._names=Uv.fromArray(c._names.toArray(),!0),n=f._sources=Uv.fromArray(c._sources.toArray(),!0);f.sourceRoot=c._sourceRoot;f.sourcesContent=c._generateSourcesContent(f._sources.toArray(),f.sourceRoot);f.file=c._file;f._sourceMapURL=h;f._absoluteSources=f._sources.toArray().map(function(p){return nf.computeSourceURL(f.sourceRoot,
p,h)});c=c._mappings.toArray().slice();for(var a=f.__generatedMappings=[],d=f.__originalMappings=[],k=0,b=c.length;k<b;k++){var e=c[k],l=new lj;l.generatedLine=e.generatedLine;l.generatedColumn=e.generatedColumn;e.source&&(l.source=n.indexOf(e.source),l.originalLine=e.originalLine,l.originalColumn=e.originalColumn,e.name&&(l.name=m.indexOf(e.name)),d.push(l));a.push(l)}yA(f.__originalMappings,nf.compareByOriginalPositions);return f};Ki.prototype._version=3;Object.defineProperty(Ki.prototype,"sources",
{get:function(){return(this||je)._absoluteSources.slice()}});Ki.prototype._parseMappings=function(c,h){h=1;for(var f=0,m=0,n=0,a=0,d=0,k=c.length,b=0,e={},l={},p=[],q=[],u,w,y,A,C;b<k;)if(";"===c.charAt(b))h++,b++,f=0;else if(","===c.charAt(b))b++;else{u=new lj;u.generatedLine=h;for(A=b;A<k&&!this._charIsMappingSeparator(c,A);A++);w=c.slice(b,A);if(y=e[w])b+=w.length;else{for(y=[];b<A;)sx.decode(c,b,l),C=l.value,b=l.rest,y.push(C);if(2===y.length)throw Error("Found a source, but no line and column");
if(3===y.length)throw Error("Found a source and line, but no column");e[w]=y}u.generatedColumn=f+y[0];f=u.generatedColumn;1<y.length&&(u.source=a+y[1],a+=y[1],u.originalLine=m+y[2],m=u.originalLine,u.originalLine+=1,u.originalColumn=n+y[3],n=u.originalColumn,4<y.length&&(u.name=d+y[4],d+=y[4]));q.push(u);"number"===typeof u.originalLine&&p.push(u)}yA(q,nf.compareByGeneratedPositionsDeflated);(this||je).__generatedMappings=q;yA(p,nf.compareByOriginalPositions);(this||je).__originalMappings=p};Ki.prototype._findMapping=
function(c,h,f,m,n,a){if(0>=c[f])throw new TypeError("Line must be greater than or equal to 1, got "+c[f]);if(0>c[m])throw new TypeError("Column must be greater than or equal to 0, got "+c[m]);return aP.search(c,h,n,a)};Ki.prototype.computeColumnSpans=function(){for(var c=0;c<(this||je)._generatedMappings.length;++c){var h=(this||je)._generatedMappings[c];if(c+1<(this||je)._generatedMappings.length){var f=(this||je)._generatedMappings[c+1];if(h.generatedLine===f.generatedLine){h.lastGeneratedColumn=
f.generatedColumn-1;continue}}h.lastGeneratedColumn=Infinity}};Ki.prototype.originalPositionFor=function(c){var h={generatedLine:nf.getArg(c,"line"),generatedColumn:nf.getArg(c,"column")};c=this._findMapping(h,(this||je)._generatedMappings,"generatedLine","generatedColumn",nf.compareByGeneratedPositionsDeflated,nf.getArg(c,"bias",gf.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||je)._generatedMappings[c],c.generatedLine===h.generatedLine)){h=nf.getArg(c,"source",null);null!==h&&(h=(this||je)._sources.at(h),
h=nf.computeSourceURL((this||je).sourceRoot,h,(this||je)._sourceMapURL));var f=nf.getArg(c,"name",null);null!==f&&(f=(this||je)._names.at(f));return{source:h,line:nf.getArg(c,"originalLine",null),column:nf.getArg(c,"originalColumn",null),name:f}}return{source:null,line:null,column:null,name:null}};Ki.prototype.hasContentsOfAllSources=function(){return(this||je).sourcesContent?(this||je).sourcesContent.length>=(this||je)._sources.size()&&!(this||je).sourcesContent.some(function(c){return null==c}):
!1};Ki.prototype.sourceContentFor=function(c,h){if(!(this||je).sourcesContent)return null;var f=this._findSourceIndex(c);if(0<=f)return(this||je).sourcesContent[f];null!=(this||je).sourceRoot&&(c=nf.relative((this||je).sourceRoot,c));var m;if(null!=(this||je).sourceRoot&&(m=nf.urlParse((this||je).sourceRoot))){f=c.replace(/^file:\/\//,"");if("file"==m.scheme&&(this||je)._sources.has(f))return(this||je).sourcesContent[(this||je)._sources.indexOf(f)];if((!m.path||"/"==m.path)&&(this||je)._sources.has("/"+
c))return(this||je).sourcesContent[(this||je)._sources.indexOf("/"+c)]}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};Ki.prototype.generatedPositionFor=function(c){var h=nf.getArg(c,"source");h=this._findSourceIndex(h);if(0>h)return{line:null,column:null,lastColumn:null};h={source:h,originalLine:nf.getArg(c,"line"),originalColumn:nf.getArg(c,"column")};c=this._findMapping(h,(this||je)._originalMappings,"originalLine","originalColumn",nf.compareByOriginalPositions,nf.getArg(c,"bias",
gf.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||je)._originalMappings[c],c.source===h.source)?{line:nf.getArg(c,"generatedLine",null),column:nf.getArg(c,"generatedColumn",null),lastColumn:nf.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};Hh.prototype=Object.create(gf.prototype);Hh.prototype.constructor=gf;Hh.prototype._version=3;Object.defineProperty(Hh.prototype,"sources",{get:function(){for(var c=[],h=0;h<(this||je)._sections.length;h++)for(var f=0;f<(this||je)._sections[h].consumer.sources.length;f++)c.push((this||
je)._sections[h].consumer.sources[f]);return c}});Hh.prototype.originalPositionFor=function(c){var h={generatedLine:nf.getArg(c,"line"),generatedColumn:nf.getArg(c,"column")},f=aP.search(h,(this||je)._sections,function(m,n){var a=m.generatedLine-n.generatedOffset.generatedLine;return a?a:m.generatedColumn-n.generatedOffset.generatedColumn});return(f=(this||je)._sections[f])?f.consumer.originalPositionFor({line:h.generatedLine-(f.generatedOffset.generatedLine-1),column:h.generatedColumn-(f.generatedOffset.generatedLine===
h.generatedLine?f.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};Hh.prototype.hasContentsOfAllSources=function(){return(this||je)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};Hh.prototype.sourceContentFor=function(c,h){for(var f=0;f<(this||je)._sections.length;f++){var m=(this||je)._sections[f].consumer.sourceContentFor(c,!0);if(m)return m}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};Hh.prototype.generatedPositionFor=
function(c){for(var h=0;h<(this||je)._sections.length;h++){var f=(this||je)._sections[h];if(-1!==f.consumer._findSourceIndex(nf.getArg(c,"source"))){var m=f.consumer.generatedPositionFor(c);if(m)return{line:m.line+(f.generatedOffset.generatedLine-1),column:m.column+(f.generatedOffset.generatedLine===m.line?f.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};Hh.prototype._parseMappings=function(c,h){(this||je).__generatedMappings=[];(this||je).__originalMappings=[];for(c=0;c<(this||
je)._sections.length;c++){h=(this||je)._sections[c];for(var f=h.consumer._generatedMappings,m=0;m<f.length;m++){var n=f[m],a=h.consumer._sources.at(n.source);a=nf.computeSourceURL(h.consumer.sourceRoot,a,(this||je)._sourceMapURL);(this||je)._sources.add(a);a=(this||je)._sources.indexOf(a);var d=null;n.name&&(d=h.consumer._names.at(n.name),(this||je)._names.add(d),d=(this||je)._names.indexOf(d));n={source:a,generatedLine:n.generatedLine+(h.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(h.generatedOffset.generatedLine===n.generatedLine?h.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:d};(this||je).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||je).__originalMappings.push(n)}}yA((this||je).__generatedMappings,nf.compareByGeneratedPositionsDeflated);yA((this||je).__originalMappings,nf.compareByOriginalPositions)};var Ih="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,jH=dk,
xda=/(\r?\n)/;mj.fromStringWithSourceMap=function(c,h,f){function m(p,q){if(null===p||void 0===p.source)n.add(q);else{var u=f?jH.join(f,p.source):p.source;n.add(new mj(p.originalLine,p.originalColumn,u,q,p.name))}}var n=new mj,a=c.split(xda),d=0,k=function(){var p=d<a.length?a[d++]:void 0,q=(d<a.length?a[d++]:void 0)||"";return p+q},b=1,e=0,l=null;h.eachMapping(function(p){if(null!==l)if(b<p.generatedLine)m(l,k()),b++,e=0;else{var q=a[d]||"",u=q.substr(0,p.generatedColumn-e);a[d]=q.substr(p.generatedColumn-
e);e=p.generatedColumn;m(l,u);l=p;return}for(;b<p.generatedLine;)n.add(k()),b++;e<p.generatedColumn&&(q=a[d]||"",n.add(q.substr(0,p.generatedColumn)),a[d]=q.substr(p.generatedColumn),e=p.generatedColumn);l=p},this||Ih);d<a.length&&(l&&m(l,k()),n.add(a.splice(d).join("")));h.sources.forEach(function(p){var q=h.sourceContentFor(p);null!=q&&(null!=f&&(p=jH.join(f,p)),n.setSourceContent(p,q))});return n};mj.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(h){this.add(h)},this||Ih);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||Ih).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Ih};mj.prototype.prepend=function(c){if(Array.isArray(c))for(var h=c.length-1;0<=h;h--)this.prepend(c[h]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||Ih).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Ih};mj.prototype.walk=function(c){for(var h,
f=0,m=(this||Ih).children.length;f<m;f++)h=(this||Ih).children[f],h.$$$isSourceNode$$$?h.walk(c):""!==h&&c(h,{source:(this||Ih).source,line:(this||Ih).line,column:(this||Ih).column,name:(this||Ih).name})};mj.prototype.join=function(c){var h,f=(this||Ih).children.length;if(0<f){var m=[];for(h=0;h<f-1;h++)m.push((this||Ih).children[h]),m.push(c);m.push((this||Ih).children[h]);(this||Ih).children=m}return this||Ih};mj.prototype.replaceRight=function(c,h){var f=(this||Ih).children[(this||Ih).children.length-
1];f.$$$isSourceNode$$$?f.replaceRight(c,h):"string"===typeof f?(this||Ih).children[(this||Ih).children.length-1]=f.replace(c,h):(this||Ih).children.push("".replace(c,h));return this||Ih};mj.prototype.setSourceContent=function(c,h){(this||Ih).sourceContents[jH.toSetString(c)]=h};mj.prototype.walkSourceContents=function(c){for(var h=0,f=(this||Ih).children.length;h<f;h++)(this||Ih).children[h].$$$isSourceNode$$$&&(this||Ih).children[h].walkSourceContents(c);var m=Object.keys((this||Ih).sourceContents);
h=0;for(f=m.length;h<f;h++)c(jH.fromSetString(m[h]),(this||Ih).sourceContents[m[h]])};mj.prototype.toString=function(){var c="";this.walk(function(h){c+=h});return c};mj.prototype.toStringWithSourceMap=function(c){var h="",f=1,m=0,n=new Te(c),a=!1,d=null,k=null,b=null,e=null;this.walk(function(l,p){h+=l;null!==p.source&&null!==p.line&&null!==p.column?(d===p.source&&k===p.line&&b===p.column&&e===p.name||n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:f,column:m},
name:p.name}),d=p.source,k=p.line,b=p.column,e=p.name,a=!0):a&&(n.addMapping({generated:{line:f,column:m}}),d=null,a=!1);for(var q=0,u=l.length;q<u;q++)10===l.charCodeAt(q)?(f++,m=0,q+1===u?(d=null,a=!1):a&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:f,column:m},name:p.name})):m++});this.walkSourceContents(function(l,p){n.setSourceContent(l,p)});return{code:h,map:n}};var nk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,vl=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(ca,
qa){var ra="";for(qa|=0;0<qa;qa>>>=1,ca+=ca)qa&1&&(ra+=ca);return ra}function f(ca){var qa=ca.length;return qa&&aa.code.isLineTerminator(ca.charCodeAt(qa-1))}function m(ca,qa){for(var ra in qa)qa.hasOwnProperty(ra)&&(ca[ra]=qa[ra]);return ca}function n(ca,qa){function ra(wc){return"object"===typeof wc&&wc instanceof Object&&!(wc instanceof RegExp)}var Va;for(Va in qa)if(qa.hasOwnProperty(Va)){var nb=qa[Va];ra(nb)?ra(ca[Va])?n(ca[Va],nb):ca[Va]=n({},nb):ca[Va]=nb}return ca}function a(ca,qa){return 8232===
(ca&-2)?(qa?"u":"\\u")+(8232===ca?"2028":"2029"):10===ca||13===ca?(qa?"":"\\")+(10===ca?"n":"r"):String.fromCharCode(ca)}function d(ca,qa){if(8===ca)return"\\b";if(12===ca)return"\\f";if(9===ca)return"\\t";var ra=ca.toString(16).toUpperCase();return F||255<ca?"\\u"+"0000".slice(ra.length)+ra:0!==ca||aa.code.isDecimalDigit(qa)?11===ca?"\\x0B":"\\x"+"00".slice(ra.length)+ra:"\\0"}function k(ca){if(92===ca)return"\\\\";if(10===ca)return"\\n";if(13===ca)return"\\r";if(8232===ca)return"\\u2028";if(8233===
ca)return"\\u2029";throw Error("Incorrectly classified character");}function b(ca){var qa,ra="";var Va=0;for(qa=ca.length;Va<qa;++Va){var nb=ca[Va];ra+=Array.isArray(nb)?b(nb):nb}return ra}function e(ca,qa){if(!Da)return Array.isArray(ca)?b(ca):ca;if(null==qa){if(ca instanceof ba)return ca;qa={}}return null==qa.loc?new ba(null,null,Da,ca,qa.name||null):new ba(qa.loc.start.line,qa.loc.start.column,!0===Da?qa.loc.source||null:Da,ca,qa.name||null)}function l(){return la?la:" "}function p(ca,qa){var ra=
e(ca).toString();if(0===ra.length)return[qa];var Va=e(qa).toString();if(0===Va.length)return[ca];ra=ra.charCodeAt(ra.length-1);Va=Va.charCodeAt(0);return(43===ra||45===ra)&&ra===Va||aa.code.isIdentifierPartES5(ra)&&aa.code.isIdentifierPartES5(Va)||47===ra&&105===Va?[ca,l(),qa]:aa.code.isWhiteSpace(ra)||aa.code.isLineTerminator(ra)||aa.code.isWhiteSpace(Va)||aa.code.isLineTerminator(Va)?[ca,qa]:[ca,la,qa]}function q(ca){var qa=ua;ua+=Fa;ca(ua);ua=qa}function u(ca,qa){if("Line"===ca.type){if(f(ca.value))return"//"+
ca.value;qa="//"+ca.value;U||(qa+="\n");return qa}if(Aa.format.indent.adjustMultilineComment&&/[\n\r]/.test(ca.value)){var ra,Va;ca=("/*"+ca.value+"*/").split(/\r\n|[\r\n]/);var nb=Number.MAX_VALUE;var wc=1;for(ra=ca.length;wc<ra;++wc){var nc=ca[wc];for(Va=0;Va<nc.length&&aa.code.isWhiteSpace(nc.charCodeAt(Va));)++Va;nb>Va&&(nb=Va)}"undefined"!==typeof qa?(nc=ua,"*"===ca[1][nb]&&(qa+=" "),ua=qa):(nb&1&&--nb,nc=ua);wc=1;for(ra=ca.length;wc<ra;++wc)qa=e([ua,ca[wc].slice(nb)]),ca[wc]=Da?qa.join(""):
qa;ua=nc;return ca.join("\n")}return"/*"+ca.value+"*/"}function w(ca,qa){var ra;if(ca.leadingComments&&0<ca.leadingComments.length){var Va=qa;if(U){var nb=ca.leadingComments[0];qa=[];var wc=nb.extendedRange;var nc=nb.range;var ac=M.substring(wc[0],nc[0]);var qd=(ac.match(/\n/g)||[]).length;0<qd?(qa.push(h("\n",qd)),qa.push([ua,u(nb)])):(qa.push(ac),qa.push(u(nb)));qd=nc;ac=1;for(ra=ca.leadingComments.length;ac<ra;ac++)nb=ca.leadingComments[ac],nc=nb.range,qd=M.substring(qd[1],nc[0]),qd=(qd.match(/\n/g)||
[]).length,qa.push(h("\n",qd)),qa.push([ua,u(nb)]),qd=nc;ac=M.substring(nc[1],wc[1]);qd=(ac.match(/\n/g)||[]).length;qa.push(h("\n",qd))}else for(nb=ca.leadingComments[0],qa=[],xa&&ca.type===pa.Program&&0===ca.body.length&&qa.push("\n"),qa.push(u(nb)),f(e(qa).toString())||qa.push("\n"),ac=1,ra=ca.leadingComments.length;ac<ra;++ac)nb=ca.leadingComments[ac],nb=[u(nb)],f(e(nb).toString())||nb.push("\n"),qa.push([ua,nb]);qa.push([ua,Va])}if(ca.trailingComments)if(U)nb=ca.trailingComments[0],wc=nb.extendedRange,
nc=nb.range,ac=M.substring(wc[0],nc[0]),qd=(ac.match(/\n/g)||[]).length,0<qd?(qa.push(h("\n",qd)),qa.push([ua,u(nb)])):(qa.push(ac),qa.push(u(nb)));else{Va=!f(e(qa).toString());ac=e([ua,qa,Fa]).toString();for(ra=ac.length-1;0<=ra&&!aa.code.isLineTerminator(ac.charCodeAt(ra));--ra);wc=h(" ",ac.length-1-ra);ac=0;for(ra=ca.trailingComments.length;ac<ra;++ac)nb=ca.trailingComments[ac],Va?(qa=0===ac?[qa,Fa]:[qa,wc],qa.push(u(nb,wc))):qa=[qa,[ua,u(nb)]],ac===ra-1||f(e(qa).toString())||(qa=[qa,"\n"])}return qa}
function y(ca,qa,ra){for(var Va=0;ca<qa;ca++)"\n"===M[ca]&&Va++;for(ca=1;ca<Va;ca++)ra.push(ea)}function A(ca,qa,ra){return qa<ra?["(",ca,")"]:ca}function C(ca){var qa;var ra=ca.split(/\r\n|\n/);ca=1;for(qa=ra.length;ca<qa;ca++)ra[ca]=ea+ua+ra[ca];return ra}function D(){}function L(ca){return e(ca.name,ca)}function I(ca,qa){return ca.async?"async"+(qa?l():la):""}function S(ca){return ca.generator&&!Aa.moz.starlessGenerator?"*"+la:""}function V(ca){var qa=ca.value,ra="";qa.async&&(ra+=I(qa,!ca.computed));
qa.generator&&(ra+=S(qa)?"*":"");return ra}var ba,ua,Fa,F,Y,Q,W,ka,ea,la,db,ub,xa,na,Aa,Pa,Da,M,U;var aa=xA;var pa=YO.Syntax;var ma={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var La={"||":ma.LogicalOR,"&&":ma.LogicalAND,"|":ma.BitwiseOR,
"^":ma.BitwiseXOR,"&":ma.BitwiseAND,"==":ma.Equality,"!=":ma.Equality,"===":ma.Equality,"!==":ma.Equality,is:ma.Equality,isnt:ma.Equality,"<":ma.Relational,">":ma.Relational,"<=":ma.Relational,">=":ma.Relational,"in":ma.Relational,"instanceof":ma.Relational,"<<":ma.BitwiseSHIFT,">>":ma.BitwiseSHIFT,">>>":ma.BitwiseSHIFT,"+":ma.Additive,"-":ma.Additive,"*":ma.Multiplicative,"%":ma.Multiplicative,"/":ma.Multiplicative,"**":ma.Exponentiation};D.prototype.maybeBlock=function(ca,qa){var ra,Va=this||nk;
var nb=!Aa.comment||!ca.leadingComments;if(ca.type===pa.BlockStatement&&nb)return[la,this.generateStatement(ca,qa)];if(ca.type===pa.EmptyStatement&&nb)return";";q(function(){ra=[ea,[ua,Va.generateStatement(ca,qa)]]});return ra};D.prototype.maybeBlockSuffix=function(ca,qa){var ra=f(e(qa).toString());return ca.type!==pa.BlockStatement||Aa.comment&&ca.leadingComments||ra?ra?[qa,ua]:[qa,ea,ua]:[qa,la]};D.prototype.generatePattern=function(ca,qa,ra){return ca.type===pa.Identifier?L(ca):this.generateExpression(ca,
qa,ra)};D.prototype.generateFunctionParams=function(ca){var qa;var ra=!1;if(ca.type!==pa.ArrowFunctionExpression||ca.rest||ca.defaults&&0!==ca.defaults.length||1!==ca.params.length||ca.params[0].type!==pa.Identifier){var Va=ca.type===pa.ArrowFunctionExpression?[I(ca,!1)]:[];Va.push("(");ca.defaults&&(ra=!0);var nb=0;for(qa=ca.params.length;nb<qa;++nb)ra&&ca.defaults[nb]?Va.push(this.generateAssignment(ca.params[nb],ca.defaults[nb],"=",ma.Assignment,7)):Va.push(this.generatePattern(ca.params[nb],ma.Assignment,
7)),nb+1<qa&&Va.push(","+la);ca.rest&&(ca.params.length&&Va.push(","+la),Va.push("..."),Va.push(L(ca.rest)));Va.push(")")}else Va=[I(ca,!0),L(ca.params[0])];return Va};D.prototype.generateFunctionBody=function(ca){var qa=this.generateFunctionParams(ca);ca.type===pa.ArrowFunctionExpression&&(qa.push(la),qa.push("=>"));ca.expression?(qa.push(la),ca=this.generateExpression(ca.body,ma.Assignment,7),"{"===ca.toString().charAt(0)&&(ca=["(",ca,")"]),qa.push(ca)):qa.push(this.maybeBlock(ca.body,9));return qa};
D.prototype.generateIterationForStatement=function(ca,qa,ra){var Va=["for"+(qa.await?l()+"await":"")+la+"("],nb=this||nk;q(function(){qa.left.type===pa.VariableDeclaration?q(function(){Va.push(qa.left.kind+l());Va.push(nb.generateStatement(qa.left.declarations[0],0))}):Va.push(nb.generateExpression(qa.left,ma.Call,7));Va=p(Va,ca);Va=[p(Va,nb.generateExpression(qa.right,ma.Assignment,7)),")"]});Va.push(this.maybeBlock(qa.body,ra));return Va};D.prototype.generatePropertyKey=function(ca,qa){var ra=[];
qa&&ra.push("[");ra.push(this.generateExpression(ca,ma.Assignment,7));qa&&ra.push("]");return ra};D.prototype.generateAssignment=function(ca,qa,ra,Va,nb){ma.Assignment<Va&&(nb|=1);return A([this.generateExpression(ca,ma.Call,nb),la+ra+la,this.generateExpression(qa,ma.Assignment,nb)],ma.Assignment,Va)};D.prototype.semicolon=function(ca){return!ub&&ca&32?"":";"};D.Statement={BlockStatement:function(ca,qa){var ra,Va,nb=["{",ea],wc=this||nk;q(function(){0===ca.body.length&&U&&(ra=ca.range,2<ra[1]-ra[0]&&
(Va=M.substring(ra[0]+1,ra[1]-1),"\n"===Va[0]&&(nb=["{"]),nb.push(Va)));var nc;var ac=1;qa&8&&(ac|=16);var qd=0;for(nc=ca.body.length;qd<nc;++qd){U&&(0===qd&&(ca.body[0].leadingComments&&(ra=ca.body[0].leadingComments[0].extendedRange,Va=M.substring(ra[0],ra[1]),"\n"===Va[0]&&(nb=["{"])),ca.body[0].leadingComments||y(ca.range[0],ca.body[0].range[0],nb)),0<qd&&(ca.body[qd-1].trailingComments||ca.body[qd].leadingComments||y(ca.body[qd-1].range[1],ca.body[qd].range[0],nb)));qd===nc-1&&(ac|=32);var id=
ca.body[qd].leadingComments&&U?wc.generateStatement(ca.body[qd],ac):[ua,wc.generateStatement(ca.body[qd],ac)];nb.push(id);f(e(id).toString())||(U&&qd<nc-1?ca.body[qd+1].leadingComments||nb.push(ea):nb.push(ea));U&&qd===nc-1&&(ca.body[qd].trailingComments||y(ca.body[qd].range[1],ca.range[1],nb))}});nb.push([ua,"}"]);return nb},BreakStatement:function(ca,qa){return ca.label?"break "+ca.label.name+this.semicolon(qa):"break"+this.semicolon(qa)},ContinueStatement:function(ca,qa){return ca.label?"continue "+
ca.label.name+this.semicolon(qa):"continue"+this.semicolon(qa)},ClassBody:function(ca,qa){var ra=["{",ea],Va=this||nk;q(function(nb){var wc;var nc=0;for(wc=ca.body.length;nc<wc;++nc)ra.push(nb),ra.push(Va.generateExpression(ca.body[nc],ma.Sequence,7)),nc+1<wc&&ra.push(ea)});f(e(ra).toString())||ra.push(ea);ra.push(ua);ra.push("}");return ra},ClassDeclaration:function(ca,qa){qa=["class"];ca.id&&(qa=p(qa,this.generateExpression(ca.id,ma.Sequence,7)));if(ca.superClass){var ra=p("extends",this.generateExpression(ca.superClass,
ma.Unary,7));qa=p(qa,ra)}qa.push(la);qa.push(this.generateStatement(ca.body,33));return qa},DirectiveStatement:function(ca,qa){if(Aa.raw&&ca.raw)return ca.raw+this.semicolon(qa);ca=ca.directive;var ra;var Va="double"===W?'"':"'";var nb=0;for(ra=ca.length;nb<ra;++nb){var wc=ca.charCodeAt(nb);if(39===wc){Va='"';break}else if(34===wc){Va="'";break}else 92===wc&&++nb}return Va+ca+Va+this.semicolon(qa)},DoWhileStatement:function(ca,qa){var ra=p("do",this.maybeBlock(ca.body,1));ra=this.maybeBlockSuffix(ca.body,
ra);return p(ra,["while"+la+"(",this.generateExpression(ca.test,ma.Sequence,7),")"+this.semicolon(qa)])},CatchClause:function(ca,qa){var ra,Va=this||nk;q(function(){if(ca.param){if(ra=["catch"+la+"(",Va.generateExpression(ca.param,ma.Sequence,7),")"],ca.guard){var nb=Va.generateExpression(ca.guard,ma.Sequence,7);ra.splice(2,0," if ",nb)}}else ra=["catch"]});ra.push(this.maybeBlock(ca.body,1));return ra},DebuggerStatement:function(ca,qa){return"debugger"+this.semicolon(qa)},EmptyStatement:function(ca,
qa){return";"},ExportDefaultDeclaration:function(ca,qa){var ra=["export"];var Va=qa&32?33:1;ra=p(ra,"default");return ra=D.Statement.hasOwnProperty(ca.declaration.type)?p(ra,this.generateStatement(ca.declaration,Va)):p(ra,this.generateExpression(ca.declaration,ma.Assignment,7)+this.semicolon(qa))},ExportNamedDeclaration:function(ca,qa){var ra=["export"],Va=this||nk;var nb=qa&32?33:1;if(ca.declaration)return p(ra,this.generateStatement(ca.declaration,nb));ca.specifiers&&(0===ca.specifiers.length?ra=
p(ra,"{"+la+"}"):ca.specifiers[0].type===pa.ExportBatchSpecifier?ra=p(ra,this.generateExpression(ca.specifiers[0],ma.Sequence,7)):(ra=p(ra,"{"),q(function(wc){var nc;ra.push(ea);var ac=0;for(nc=ca.specifiers.length;ac<nc;++ac)ra.push(wc),ra.push(Va.generateExpression(ca.specifiers[ac],ma.Sequence,7)),ac+1<nc&&ra.push(","+ea)}),f(e(ra).toString())||ra.push(ea),ra.push(ua+"}")),ca.source?ra=p(ra,["from"+la,this.generateExpression(ca.source,ma.Sequence,7),this.semicolon(qa)]):ra.push(this.semicolon(qa)));
return ra},ExportAllDeclaration:function(ca,qa){return["export"+la,"*"+la,"from"+la,this.generateExpression(ca.source,ma.Sequence,7),this.semicolon(qa)]},ExpressionStatement:function(ca,qa){function ra(ac){if("class"!==ac.slice(0,5))return!1;ac=ac.charCodeAt(5);return 123===ac||aa.code.isWhiteSpace(ac)||aa.code.isLineTerminator(ac)}function Va(ac){if("function"!==ac.slice(0,8))return!1;ac=ac.charCodeAt(8);return 40===ac||aa.code.isWhiteSpace(ac)||42===ac||aa.code.isLineTerminator(ac)}function nb(ac){var qd;
if("async"!==ac.slice(0,5)||!aa.code.isWhiteSpace(ac.charCodeAt(5)))return!1;var id=6;for(qd=ac.length;id<qd&&aa.code.isWhiteSpace(ac.charCodeAt(id));++id);if(id===qd||"function"!==ac.slice(id,id+8))return!1;ac=ac.charCodeAt(id+8);return 40===ac||aa.code.isWhiteSpace(ac)||42===ac||aa.code.isLineTerminator(ac)}var wc=[this.generateExpression(ca.expression,ma.Sequence,7)];var nc=e(wc).toString();123===nc.charCodeAt(0)||ra(nc)||Va(nc)||nb(nc)||na&&qa&16&&ca.expression.type===pa.Literal&&"string"===typeof ca.expression.value?
wc=["(",wc,")"+this.semicolon(qa)]:wc.push(this.semicolon(qa));return wc},ImportDeclaration:function(ca,qa){var ra=this||nk;if(0===ca.specifiers.length)return["import",la,this.generateExpression(ca.source,ma.Sequence,7),this.semicolon(qa)];var Va=["import"];var nb=0;ca.specifiers[nb].type===pa.ImportDefaultSpecifier&&(Va=p(Va,[this.generateExpression(ca.specifiers[nb],ma.Sequence,7)]),++nb);ca.specifiers[nb]&&(0!==nb&&Va.push(","),ca.specifiers[nb].type===pa.ImportNamespaceSpecifier?Va=p(Va,[la,this.generateExpression(ca.specifiers[nb],
ma.Sequence,7)]):(Va.push(la+"{"),1===ca.specifiers.length-nb?(Va.push(la),Va.push(this.generateExpression(ca.specifiers[nb],ma.Sequence,7)),Va.push(la+"}"+la)):(q(function(wc){var nc;Va.push(ea);var ac=nb;for(nc=ca.specifiers.length;ac<nc;++ac)Va.push(wc),Va.push(ra.generateExpression(ca.specifiers[ac],ma.Sequence,7)),ac+1<nc&&Va.push(","+ea)}),f(e(Va).toString())||Va.push(ea),Va.push(ua+"}"+la))));return Va=p(Va,["from"+la,this.generateExpression(ca.source,ma.Sequence,7),this.semicolon(qa)])},VariableDeclarator:function(ca,
qa){qa=qa&1?7:6;return ca.init?[this.generateExpression(ca.id,ma.Assignment,qa),la,"=",la,this.generateExpression(ca.init,ma.Assignment,qa)]:this.generatePattern(ca.id,ma.Assignment,qa)},VariableDeclaration:function(ca,qa){function ra(){wc=ca.declarations[0];Aa.comment&&wc.leadingComments?(ac.push("\n"),ac.push([ua,nc.generateStatement(wc,qd)])):(ac.push(l()),ac.push(nc.generateStatement(wc,qd)));Va=1;for(nb=ca.declarations.length;Va<nb;++Va)wc=ca.declarations[Va],Aa.comment&&wc.leadingComments?(ac.push(","+
ea),ac.push([ua,nc.generateStatement(wc,qd)])):(ac.push(","+la),ac.push(nc.generateStatement(wc,qd)))}var Va,nb,wc,nc=this||nk;var ac=[ca.kind];var qd=qa&1?1:0;1<ca.declarations.length?q(ra):ra();ac.push(this.semicolon(qa));return ac},ThrowStatement:function(ca,qa){return[p("throw",this.generateExpression(ca.argument,ma.Sequence,7)),this.semicolon(qa)]},TryStatement:function(ca,qa){var ra;qa=["try",this.maybeBlock(ca.block,1)];qa=this.maybeBlockSuffix(ca.block,qa);if(ca.handlers){var Va=0;for(ra=
ca.handlers.length;Va<ra;++Va)if(qa=p(qa,this.generateStatement(ca.handlers[Va],1)),ca.finalizer||Va+1!==ra)qa=this.maybeBlockSuffix(ca.handlers[Va].body,qa)}else{var nb=ca.guardedHandlers||[];Va=0;for(ra=nb.length;Va<ra;++Va)if(qa=p(qa,this.generateStatement(nb[Va],1)),ca.finalizer||Va+1!==ra)qa=this.maybeBlockSuffix(nb[Va].body,qa);if(ca.handler)if(Array.isArray(ca.handler))for(Va=0,ra=ca.handler.length;Va<ra;++Va){if(qa=p(qa,this.generateStatement(ca.handler[Va],1)),ca.finalizer||Va+1!==ra)qa=
this.maybeBlockSuffix(ca.handler[Va].body,qa)}else qa=p(qa,this.generateStatement(ca.handler,1)),ca.finalizer&&(qa=this.maybeBlockSuffix(ca.handler.body,qa))}ca.finalizer&&(qa=p(qa,["finally",this.maybeBlock(ca.finalizer,1)]));return qa},SwitchStatement:function(ca,qa){var ra,Va,nb=this||nk;q(function(){ra=["switch"+la+"(",nb.generateExpression(ca.discriminant,ma.Sequence,7),")"+la+"{"+ea]});if(ca.cases){var wc=1;var nc=0;for(Va=ca.cases.length;nc<Va;++nc)nc===Va-1&&(wc|=32),qa=[ua,this.generateStatement(ca.cases[nc],
wc)],ra.push(qa),f(e(qa).toString())||ra.push(ea)}ra.push([ua,"}"]);return ra},SwitchCase:function(ca,qa){var ra,Va,nb,wc,nc,ac=this||nk;q(function(){ra=ca.test?[p("case",ac.generateExpression(ca.test,ma.Sequence,7)),":"]:["default:"];nb=0;(wc=ca.consequent.length)&&ca.consequent[0].type===pa.BlockStatement&&(Va=ac.maybeBlock(ca.consequent[0],1),ra.push(Va),nb=1);nb===wc||f(e(ra).toString())||ra.push(ea);for(nc=1;nb<wc;++nb)nb===wc-1&&qa&32&&(nc|=32),Va=[ua,ac.generateStatement(ca.consequent[nb],
nc)],ra.push(Va),nb+1===wc||f(e(Va).toString())||ra.push(ea)});return ra},IfStatement:function(ca,qa){var ra=this||nk;q(function(){nb=["if"+la+"(",ra.generateExpression(ca.test,ma.Sequence,7),")"]});var Va=1;qa&32&&(Va|=32);if(ca.alternate){nb.push(this.maybeBlock(ca.consequent,1));var nb=this.maybeBlockSuffix(ca.consequent,nb);nb=ca.alternate.type===pa.IfStatement?p(nb,["else ",this.generateStatement(ca.alternate,Va)]):p(nb,p("else",this.maybeBlock(ca.alternate,Va)))}else nb.push(this.maybeBlock(ca.consequent,
Va));return nb},ForStatement:function(ca,qa){var ra,Va=this||nk;q(function(){ra=["for"+la+"("];ca.init?ca.init.type===pa.VariableDeclaration?ra.push(Va.generateStatement(ca.init,0)):(ra.push(Va.generateExpression(ca.init,ma.Sequence,6)),ra.push(";")):ra.push(";");ca.test&&(ra.push(la),ra.push(Va.generateExpression(ca.test,ma.Sequence,7)));ra.push(";");ca.update&&(ra.push(la),ra.push(Va.generateExpression(ca.update,ma.Sequence,7)));ra.push(")")});ra.push(this.maybeBlock(ca.body,qa&32?33:1));return ra},
ForInStatement:function(ca,qa){return this.generateIterationForStatement("in",ca,qa&32?33:1)},ForOfStatement:function(ca,qa){return this.generateIterationForStatement("of",ca,qa&32?33:1)},LabeledStatement:function(ca,qa){return[ca.label.name+":",this.maybeBlock(ca.body,qa&32?33:1)]},Program:function(ca,qa){var ra;var Va=ca.body.length;qa=[xa&&0<Va?"\n":""];var nb=17;for(ra=0;ra<Va;++ra){xa||ra!==Va-1||(nb|=32);U&&(0===ra&&(ca.body[0].leadingComments||y(ca.range[0],ca.body[ra].range[0],qa)),0<ra&&
(ca.body[ra-1].trailingComments||ca.body[ra].leadingComments||y(ca.body[ra-1].range[1],ca.body[ra].range[0],qa)));var wc=[ua,this.generateStatement(ca.body[ra],nb)];qa.push(wc);ra+1<Va&&!f(e(wc).toString())&&(U?ca.body[ra+1].leadingComments||qa.push(ea):qa.push(ea));U&&ra===Va-1&&(ca.body[ra].trailingComments||y(ca.body[ra].range[1],ca.range[1],qa))}return qa},FunctionDeclaration:function(ca,qa){return[I(ca,!0),"function",S(ca)||l(),ca.id?L(ca.id):"",this.generateFunctionBody(ca)]},ReturnStatement:function(ca,
qa){return ca.argument?[p("return",this.generateExpression(ca.argument,ma.Sequence,7)),this.semicolon(qa)]:["return"+this.semicolon(qa)]},WhileStatement:function(ca,qa){var ra,Va=this||nk;q(function(){ra=["while"+la+"(",Va.generateExpression(ca.test,ma.Sequence,7),")"]});ra.push(this.maybeBlock(ca.body,qa&32?33:1));return ra},WithStatement:function(ca,qa){var ra,Va=this||nk;q(function(){ra=["with"+la+"(",Va.generateExpression(ca.object,ma.Sequence,7),")"]});ra.push(this.maybeBlock(ca.body,qa&32?33:
1));return ra}};m(D.prototype,D.Statement);D.Expression={SequenceExpression:function(ca,qa,ra){var Va;ma.Sequence<qa&&(ra|=1);var nb=[];var wc=0;for(Va=ca.expressions.length;wc<Va;++wc)nb.push(this.generateExpression(ca.expressions[wc],ma.Assignment,ra)),wc+1<Va&&nb.push(","+la);return A(nb,ma.Sequence,qa)},AssignmentExpression:function(ca,qa,ra){return this.generateAssignment(ca.left,ca.right,ca.operator,qa,ra)},ArrowFunctionExpression:function(ca,qa,ra){return A(this.generateFunctionBody(ca),ma.ArrowFunction,
qa)},ConditionalExpression:function(ca,qa,ra){ma.Conditional<qa&&(ra|=1);return A([this.generateExpression(ca.test,ma.LogicalOR,ra),la+"?"+la,this.generateExpression(ca.consequent,ma.Assignment,ra),la+":"+la,this.generateExpression(ca.alternate,ma.Assignment,ra)],ma.Conditional,qa)},LogicalExpression:function(ca,qa,ra){return this.BinaryExpression(ca,qa,ra)},BinaryExpression:function(ca,qa,ra){var Va=La[ca.operator];var nb="**"===ca.operator?ma.Postfix:Va;var wc="**"===ca.operator?Va:Va+1;Va<qa&&
(ra|=1);nb=this.generateExpression(ca.left,nb,ra);var nc=nb.toString();nc=47===nc.charCodeAt(nc.length-1)&&aa.code.isIdentifierPartES5(ca.operator.charCodeAt(0))?[nb,l(),ca.operator]:p(nb,ca.operator);nb=this.generateExpression(ca.right,wc,ra);"/"===ca.operator&&"/"===nb.toString().charAt(0)||"<"===ca.operator.slice(-1)&&"!--"===nb.toString().slice(0,3)?(nc.push(l()),nc.push(nb)):nc=p(nc,nb);return"in"!==ca.operator||ra&1?A(nc,Va,qa):["(",nc,")"]},CallExpression:function(ca,qa,ra){var Va;var nb=[this.generateExpression(ca.callee,
ma.Call,3)];ca.optional&&nb.push("?.");nb.push("(");var wc=0;for(Va=ca.arguments.length;wc<Va;++wc)nb.push(this.generateExpression(ca.arguments[wc],ma.Assignment,7)),wc+1<Va&&nb.push(","+la);nb.push(")");return ra&2?A(nb,ma.Call,qa):["(",nb,")"]},ChainExpression:function(ca,qa,ra){ma.OptionalChaining<qa&&(ra|=2);ca=this.generateExpression(ca.expression,ma.OptionalChaining,ra);return A(ca,ma.OptionalChaining,qa)},NewExpression:function(ca,qa,ra){var Va=ca.arguments.length;var nb=p("new",this.generateExpression(ca.callee,
ma.New,ra&4&&!db&&0===Va?5:1));if(!(ra&4)||db||0<Va){nb.push("(");for(ra=0;ra<Va;++ra)nb.push(this.generateExpression(ca.arguments[ra],ma.Assignment,7)),ra+1<Va&&nb.push(","+la);nb.push(")")}return A(nb,ma.New,qa)},MemberExpression:function(ca,qa,ra){var Va=[this.generateExpression(ca.object,ma.Call,ra&2?3:1)];ca.computed?(ca.optional&&Va.push("?."),Va.push("["),Va.push(this.generateExpression(ca.property,ma.Sequence,ra&2?7:5)),Va.push("]")):(ca.optional||ca.object.type!==pa.Literal||"number"!==typeof ca.object.value||
(ra=e(Va).toString(),0>ra.indexOf(".")&&!/[eExX]/.test(ra)&&aa.code.isDecimalDigit(ra.charCodeAt(ra.length-1))&&!(2<=ra.length&&48===ra.charCodeAt(0))&&Va.push(" ")),Va.push(ca.optional?"?.":"."),Va.push(L(ca.property)));return A(Va,ma.Member,qa)},MetaProperty:function(ca,qa,ra){ra=[];ra.push("string"===typeof ca.meta?ca.meta:L(ca.meta));ra.push(".");ra.push("string"===typeof ca.property?ca.property:L(ca.property));return A(ra,ma.Member,qa)},UnaryExpression:function(ca,qa,ra){var Va=this.generateExpression(ca.argument,
ma.Unary,7);if(""===la)ra=p(ca.operator,Va);else if(ra=[ca.operator],2<ca.operator.length)ra=p(ra,Va);else{ca=e(ra).toString();var nb=ca.charCodeAt(ca.length-1);ca=Va.toString().charCodeAt(0);((43===nb||45===nb)&&nb===ca||aa.code.isIdentifierPartES5(nb)&&aa.code.isIdentifierPartES5(ca))&&ra.push(l());ra.push(Va)}return A(ra,ma.Unary,qa)},YieldExpression:function(ca,qa,ra){ra=ca.delegate?"yield*":"yield";ca.argument&&(ra=p(ra,this.generateExpression(ca.argument,ma.Yield,7)));return A(ra,ma.Yield,qa)},
AwaitExpression:function(ca,qa,ra){ca=p(ca.all?"await*":"await",this.generateExpression(ca.argument,ma.Await,7));return A(ca,ma.Await,qa)},UpdateExpression:function(ca,qa,ra){return ca.prefix?A([ca.operator,this.generateExpression(ca.argument,ma.Unary,7)],ma.Unary,qa):A([this.generateExpression(ca.argument,ma.Postfix,7),ca.operator],ma.Postfix,qa)},FunctionExpression:function(ca,qa,ra){qa=[I(ca,!0),"function"];ca.id?(qa.push(S(ca)||l()),qa.push(L(ca.id))):qa.push(S(ca)||la);qa.push(this.generateFunctionBody(ca));
return qa},ArrayPattern:function(ca,qa,ra){return this.ArrayExpression(ca,qa,ra,!0)},ArrayExpression:function(ca,qa,ra,Va){var nb=this||nk;if(!ca.elements.length)return"[]";var wc=Va?!1:1<ca.elements.length;var nc=["[",wc?ea:""];q(function(ac){var qd;var id=0;for(qd=ca.elements.length;id<qd;++id)ca.elements[id]?(nc.push(wc?ac:""),nc.push(nb.generateExpression(ca.elements[id],ma.Assignment,7))):(wc&&nc.push(ac),id+1===qd&&nc.push(",")),id+1<qd&&nc.push(","+(wc?ea:la))});wc&&!f(e(nc).toString())&&nc.push(ea);
nc.push(wc?ua:"");nc.push("]");return nc},RestElement:function(ca,qa,ra){return"..."+this.generatePattern(ca.argument)},ClassExpression:function(ca,qa,ra){qa=["class"];ca.id&&(qa=p(qa,this.generateExpression(ca.id,ma.Sequence,7)));ca.superClass&&(ra=p("extends",this.generateExpression(ca.superClass,ma.Unary,7)),qa=p(qa,ra));qa.push(la);qa.push(this.generateStatement(ca.body,33));return qa},MethodDefinition:function(ca,qa,ra){qa=ca["static"]?["static"+la]:[];ca="get"===ca.kind||"set"===ca.kind?[p(ca.kind,
this.generatePropertyKey(ca.key,ca.computed)),this.generateFunctionBody(ca.value)]:[V(ca),this.generatePropertyKey(ca.key,ca.computed),this.generateFunctionBody(ca.value)];return p(qa,ca)},Property:function(ca,qa,ra){return"get"===ca.kind||"set"===ca.kind?[ca.kind,l(),this.generatePropertyKey(ca.key,ca.computed),this.generateFunctionBody(ca.value)]:ca.shorthand?"AssignmentPattern"===ca.value.type?this.AssignmentPattern(ca.value,ma.Sequence,7):this.generatePropertyKey(ca.key,ca.computed):ca.method?
[V(ca),this.generatePropertyKey(ca.key,ca.computed),this.generateFunctionBody(ca.value)]:[this.generatePropertyKey(ca.key,ca.computed),":"+la,this.generateExpression(ca.value,ma.Assignment,7)]},ObjectExpression:function(ca,qa,ra){var Va,nb,wc=this||nk;if(!ca.properties.length)return"{}";var nc=1<ca.properties.length;q(function(){nb=wc.generateExpression(ca.properties[0],ma.Sequence,7)});if(!nc&&!/[\r\n]/g.test(e(nb).toString()))return["{",la,nb,la,"}"];q(function(ac){var qd;Va=["{",ea,ac,nb];if(nc){Va.push(","+
ea);var id=1;for(qd=ca.properties.length;id<qd;++id)Va.push(ac),Va.push(wc.generateExpression(ca.properties[id],ma.Sequence,7)),id+1<qd&&Va.push(","+ea)}});f(e(Va).toString())||Va.push(ea);Va.push(ua);Va.push("}");return Va},AssignmentPattern:function(ca,qa,ra){return this.generateAssignment(ca.left,ca.right,"=",qa,ra)},ObjectPattern:function(ca,qa,ra){var Va=this||nk;if(!ca.properties.length)return"{}";var nb=!1;if(1===ca.properties.length){var wc=ca.properties[0];wc.type===pa.Property&&wc.value.type!==
pa.Identifier&&(nb=!0)}else for(qa=0,ra=ca.properties.length;qa<ra;++qa)if(wc=ca.properties[qa],wc.type===pa.Property&&!wc.shorthand){nb=!0;break}var nc=["{",nb?ea:""];q(function(ac){var qd;var id=0;for(qd=ca.properties.length;id<qd;++id)nc.push(nb?ac:""),nc.push(Va.generateExpression(ca.properties[id],ma.Sequence,7)),id+1<qd&&nc.push(","+(nb?ea:la))});nb&&!f(e(nc).toString())&&nc.push(ea);nc.push(nb?ua:"");nc.push("}");return nc},ThisExpression:function(ca,qa,ra){return"this"},Super:function(ca,
qa,ra){return"super"},Identifier:function(ca,qa,ra){return L(ca)},ImportDefaultSpecifier:function(ca,qa,ra){return L(ca.id||ca.local)},ImportNamespaceSpecifier:function(ca,qa,ra){qa=["*"];(ca=ca.id||ca.local)&&qa.push(la+"as"+l()+L(ca));return qa},ImportSpecifier:function(ca,qa,ra){qa=ca.imported;ra=[qa.name];(ca=ca.local)&&ca.name!==qa.name&&ra.push(l()+"as"+l()+L(ca));return ra},ExportSpecifier:function(ca,qa,ra){qa=ca.local;ra=[qa.name];(ca=ca.exported)&&ca.name!==qa.name&&ra.push(l()+"as"+l()+
L(ca));return ra},Literal:function(ca,qa,ra){if(ca.hasOwnProperty("raw")&&Pa&&Aa.raw)try{var Va=Pa(ca.raw).body[0].expression;if(Va.type===pa.Literal&&Va.value===ca.value)return ca.raw}catch(id){}if(ca.regex)return"/"+ca.regex.pattern+"/"+ca.regex.flags;if(null===ca.value)return"null";if("string"===typeof ca.value){ca=ca.value;qa="";var nb=0,wc=0,nc;ra=0;for(Va=ca.length;ra<Va;++ra){var ac=ca.charCodeAt(ra);if(39===ac)++nb;else if(34===ac)++wc;else if(47===ac&&F)qa+="\\";else if(aa.code.isLineTerminator(ac)||
92===ac){qa+=k(ac);continue}else if(!aa.code.isIdentifierPartES5(ac)&&(F&&32>ac||!F&&!ka&&(32>ac||126<ac))){qa+=d(ac,ca.charCodeAt(ra+1));continue}qa+=String.fromCharCode(ac)}var qd=(nc=!("double"===W||"auto"===W&&wc<nb))?"'":'"';if(nc?nb:wc){ca=qa;qa=qd;ra=0;for(Va=ca.length;ra<Va;++ra){ac=ca.charCodeAt(ra);if(39===ac&&nc||34===ac&&!nc)qa+="\\";qa+=String.fromCharCode(ac)}ca=qa+qd}else ca=qd+qa+qd;return ca}if("number"===typeof ca.value){ca=ca.value;if(ca!==ca)throw Error("Numeric literal whose value is NaN");
if(0>ca||0===ca&&0>1/ca)throw Error("Numeric literal whose value is negative");if(ca===1/0)ca=F?"null":Y?"1e400":"1e+400";else{qa=""+ca;if(Y&&!(3>qa.length)){ra=qa.indexOf(".");F||48!==qa.charCodeAt(0)||1!==ra||(ra=0,qa=qa.slice(1));Va=qa;qa=qa.replace("e+","e");ac=0;0<(nb=Va.indexOf("e"))&&(ac=+Va.slice(nb+1),Va=Va.slice(0,nb));0<=ra&&(ac-=Va.length-ra-1,Va=+(Va.slice(0,ra)+Va.slice(ra+1))+"");for(nb=0;48===Va.charCodeAt(Va.length+nb-1);)--nb;0!==nb&&(ac-=nb,Va=Va.slice(0,nb));0!==ac&&(Va+="e"+ac);
(Va.length<qa.length||Q&&1E12<ca&&Math.floor(ca)===ca&&(Va="0x"+ca.toString(16)).length<qa.length)&&+Va===ca&&(qa=Va)}ca=qa}return ca}if("boolean"===typeof ca.value)return ca.value?"true":"false";ca=ca.value;qa=ca.toString();if(ca.source)if(ra=qa.match(/\/([^/]*)$/)){ra=ra[1];qa="";nc=wc=!1;Va=0;for(ac=ca.source.length;Va<ac;++Va)nb=ca.source.charCodeAt(Va),nc?(qa+=a(nb,nc),nc=!1):(wc?93===nb&&(wc=!1):47===nb?qa+="\\":91===nb&&(wc=!0),qa+=a(nb,nc),nc=92===nb);ca="/"+qa+"/"+ra}else ca=qa;else ca=qa;
return ca},GeneratorExpression:function(ca,qa,ra){return this.ComprehensionExpression(ca,qa,ra)},ComprehensionExpression:function(ca,qa,ra){var Va,nb,wc=this||nk;var nc=ca.type===pa.GeneratorExpression?["("]:["["];if(Aa.moz.comprehensionExpressionStartsWithAssignment){var ac=this.generateExpression(ca.body,ma.Assignment,7);nc.push(ac)}ca.blocks&&q(function(){Va=0;for(nb=ca.blocks.length;Va<nb;++Va)ac=wc.generateExpression(ca.blocks[Va],ma.Sequence,7),0<Va||Aa.moz.comprehensionExpressionStartsWithAssignment?
nc=p(nc,ac):nc.push(ac)});ca.filter&&(nc=p(nc,"if"+la),ac=this.generateExpression(ca.filter,ma.Sequence,7),nc=p(nc,["(",ac,")"]));Aa.moz.comprehensionExpressionStartsWithAssignment||(ac=this.generateExpression(ca.body,ma.Assignment,7),nc=p(nc,ac));nc.push(ca.type===pa.GeneratorExpression?")":"]");return nc},ComprehensionBlock:function(ca,qa,ra){qa=ca.left.type===pa.VariableDeclaration?[ca.left.kind,l(),this.generateStatement(ca.left.declarations[0],0)]:this.generateExpression(ca.left,ma.Call,7);qa=
p(qa,ca.of?"of":"in");qa=p(qa,this.generateExpression(ca.right,ma.Sequence,7));return["for"+la+"(",qa,")"]},SpreadElement:function(ca,qa,ra){return["...",this.generateExpression(ca.argument,ma.Assignment,7)]},TaggedTemplateExpression:function(ca,qa,ra){var Va=3;ra&2||(Va=1);ca=[this.generateExpression(ca.tag,ma.Call,Va),this.generateExpression(ca.quasi,ma.Primary,4)];return A(ca,ma.TaggedTemplate,qa)},TemplateElement:function(ca,qa,ra){return ca.value.raw},TemplateLiteral:function(ca,qa,ra){var Va;
qa=["`"];ra=0;for(Va=ca.quasis.length;ra<Va;++ra)qa.push(this.generateExpression(ca.quasis[ra],ma.Primary,7)),ra+1<Va&&(qa.push("${"+la),qa.push(this.generateExpression(ca.expressions[ra],ma.Sequence,7)),qa.push(la+"}"));qa.push("`");return qa},ModuleSpecifier:function(ca,qa,ra){return this.Literal(ca,qa,ra)},ImportExpression:function(ca,qa,ra){return A(["import(",this.generateExpression(ca.source,ma.Assignment,7),")"],ma.Call,qa)}};m(D.prototype,D.Expression);D.prototype.generateExpression=function(ca,
qa,ra){var Va=ca.type||pa.Property;if(Aa.verbatim&&ca.hasOwnProperty(Aa.verbatim))return Va=ca[Aa.verbatim],"string"===typeof Va?ra=A(C(Va),ma.Sequence,qa):(ra=C(Va.content),Va=null!=Va.precedence?Va.precedence:ma.Sequence,ra=A(ra,Va,qa)),e(ra,ca);qa=this[Va](ca,qa,ra);Aa.comment&&(qa=w(ca,qa));return e(qa,ca)};D.prototype.generateStatement=function(ca,qa){qa=this[ca.type](ca,qa);Aa.comment&&(qa=w(ca,qa));var ra=e(qa).toString();ca.type!==pa.Program||xa||""!==ea||"\n"!==ra.charAt(ra.length-1)||(qa=
Da?e(qa).replaceRight(/\s+$/,""):ra.replace(/\s+$/,""));return e(qa,ca)};var ib=c().format;vl.version="2.0.0";vl.generate=function(ca,qa){var ra=c();null!=qa?("string"===typeof qa.indent&&(ra.format.indent.style=qa.indent),"number"===typeof qa.base&&(ra.format.indent.base=qa.base),qa=n(ra,qa),Fa=qa.format.indent.style,ua="string"===typeof qa.base?qa.base:h(Fa,qa.format.indent.base)):(qa=ra,Fa=qa.format.indent.style,ua=h(Fa,qa.format.indent.base));F=qa.format.json;Y=qa.format.renumber;Q=F?!1:qa.format.hexadecimal;
W=F?"double":qa.format.quotes;ka=qa.format.escapeless;ea=qa.format.newline;la=qa.format.space;qa.format.compact&&(ea=la=Fa=ua="");db=qa.format.parentheses;ub=qa.format.semicolons;xa=qa.format.safeConcatenation;na=qa.directive;Pa=F?null:qa.parse;Da=qa.sourceMap;M=qa.sourceCode;U=qa.format.preserveBlankLines&&null!==M;Aa=qa;Da&&(ba=vl.browser?nk.sourceMap.SourceNode:mj);ra=new D;if(D.Statement.hasOwnProperty(ca.type))ca=ra.generateStatement(ca,1);else if(D.Expression.hasOwnProperty(ca.type))ca=ra.generateExpression(ca,
ma.Sequence,7);else throw Error("Unknown node type: "+ca.type);if(!Da)return ca={code:ca.toString(),map:null},qa.sourceMapWithCode?ca:ca.code;ca=ca.toStringWithSourceMap({file:qa.file,sourceRoot:qa.sourceMapRoot});qa.sourceContent&&ca.map.setSourceContent(qa.sourceMap,qa.sourceContent);return qa.sourceMapWithCode?ca:ca.map.toString()};vl.attachComments=YO.attachComments;vl.Precedence=n({},ma);vl.browser=!1;vl.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,
compact:!0,parentheses:!1,semicolons:!1};vl.FORMAT_DEFAULTS=ib})();var yda=Object.freeze({__proto__:null,"default":vl,FORMAT_DEFAULTS:vl.FORMAT_DEFAULTS,FORMAT_MINIFY:vl.FORMAT_MINIFY,Precedence:vl.Precedence,attachComments:vl.attachComments,browser:vl.browser,generate:vl.generate,version:vl.version}),um=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");um.stringify=Dj;um.obj=ff;um.escodegen=yda;um.es=um.escodegen.escodegen||um.escodegen;var tx=um.es;um.escodegen=tx;um.es=tx;um.default=
Dj;var bP={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},zda={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},Ada=/^in(stanceof)?$/,cP="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
U0="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
G6=new RegExp("["+cP+"]"),H6=new RegExp("["+cP+U0+"]");cP=U0=null;var gS=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,
2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,
3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],I6=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,
2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,
787719,239],bi=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},vn={beforeExpr:!0},Km={startsExpr:!0},aC={},Pb={num:new bi("num",Km),regexp:new bi("regexp",Km),string:new bi("string",Km),name:new bi("name",Km),eof:new bi("eof"),bracketL:new bi("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new bi("]"),braceL:new bi("{",{beforeExpr:!0,startsExpr:!0}),braceR:new bi("}"),parenL:new bi("(",{beforeExpr:!0,startsExpr:!0}),parenR:new bi(")"),comma:new bi(",",vn),semi:new bi(";",vn),colon:new bi(":",vn),dot:new bi("."),question:new bi("?",vn),questionDot:new bi("?."),arrow:new bi("=>",vn),template:new bi("template"),invalidTemplate:new bi("invalidTemplate"),ellipsis:new bi("...",vn),backQuote:new bi("`",Km),dollarBraceL:new bi("${",{beforeExpr:!0,startsExpr:!0}),eq:new bi("=",{beforeExpr:!0,
isAssign:!0}),assign:new bi("_=",{beforeExpr:!0,isAssign:!0}),incDec:new bi("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new bi("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:al("||",1),logicalAND:al("&&",2),bitwiseOR:al("|",3),bitwiseXOR:al("^",4),bitwiseAND:al("&",5),equality:al("==/!=/===/!==",6),relational:al("</>/<=/>=",7),bitShift:al("<</>>/>>>",8),plusMin:new bi("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:al("%",10),star:al("*",10),slash:al("/",10),starstar:new bi("**",
{beforeExpr:!0}),coalesce:al("??",1),_break:Ph("break"),_case:Ph("case",vn),_catch:Ph("catch"),_continue:Ph("continue"),_debugger:Ph("debugger"),_default:Ph("default",vn),_do:Ph("do",{isLoop:!0,beforeExpr:!0}),_else:Ph("else",vn),_finally:Ph("finally"),_for:Ph("for",{isLoop:!0}),_function:Ph("function",Km),_if:Ph("if"),_return:Ph("return",vn),_switch:Ph("switch"),_throw:Ph("throw",vn),_try:Ph("try"),_var:Ph("var"),_const:Ph("const"),_while:Ph("while",{isLoop:!0}),_with:Ph("with"),_new:Ph("new",{beforeExpr:!0,
startsExpr:!0}),_this:Ph("this",Km),_super:Ph("super",Km),_class:Ph("class",Km),_extends:Ph("extends",vn),_export:Ph("export"),_import:Ph("import",Km),_null:Ph("null",Km),_true:Ph("true",Km),_false:Ph("false",Km),_in:Ph("in",{beforeExpr:!0,binop:7}),_instanceof:Ph("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ph("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ph("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ph("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Lm=/\r\n?|\n|\u2028|\u2029/,
Wv=new RegExp(Lm.source,"g"),dP=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,wn=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,V0=Object.prototype,cC=V0.hasOwnProperty,Bda=V0.toString,iS=Array.isArray||function(c){return"[object Array]"===Bda.call(c)},Xv=function(c,h){this.line=c;this.column=h};Xv.prototype.offset=function(c){return new Xv(this.line,this.column+c)};var uy=function(c,h,f){this.start=h;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},bC={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},hS=!1,yj=function(c,h,f){this.options=c=J6(c);this.sourceFile=c.sourceFile;this.keywords=rt(zda[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var m="";!0!==c.allowReserved&&(m=bP[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(m+=" await"));this.reservedWords=rt(m);m=(m?m+" ":"")+bP.strict;this.reservedWordsStrict=rt(m);this.reservedWordsStrictBind=rt(m+" "+bP.strictBind);this.input=String(h);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Lm).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Pb.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},Yr={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};yj.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};Yr.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Yr.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};Yr.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};Yr.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};Yr.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Yr.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Yr.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};yj.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};yj.parse=function(c,h){return(new this(h,
c)).parse()};yj.parseExpressionAt=function(c,h,f){c=new this(f,c,h);c.nextToken();return c.parseExpression()};yj.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(yj.prototype,Yr);var Kl=yj.prototype,Cda=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Kl.strictDirective=function(c){for(;;){wn.lastIndex=c;c+=wn.exec(this.input)[0].length;var h=Cda.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){wn.lastIndex=c+h[0].length;c=wn.exec(this.input);h=c.index+
c[0].length;var f=this.input.charAt(h);return";"===f||"}"===f||Lm.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(h+1))}c+=h[0].length;wn.lastIndex=c;c+=wn.exec(this.input)[0].length;";"===this.input[c]&&c++}};Kl.eat=function(c){return this.type===c?(this.next(),!0):!1};Kl.isContextual=function(c){return this.type===Pb.name&&this.value===c&&!this.containsEsc};Kl.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Kl.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};Kl.canInsertSemicolon=function(){return this.type===Pb.eof||this.type===Pb.braceR||Lm.test(this.input.slice(this.lastTokEnd,this.start))};Kl.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Kl.semicolon=function(){this.eat(Pb.semi)||this.insertSemicolon()||this.unexpected()};Kl.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);h||this.next();return!0}};Kl.expect=function(c){this.eat(c)||this.unexpected()};Kl.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Kl.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Kl.checkExpressionErrors=function(c,h){if(!c)return!1;var f=c.shorthandAssign;
c=c.doubleProto;if(!h)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Kl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Kl.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var dh=yj.prototype;dh.parseTopLevel=function(c){var h={};c.body||(c.body=[]);for(;this.type!==Pb.eof;){var f=this.parseStatement(null,!0,h);c.body.push(f)}if(this.inModule)for(h=0,f=Object.keys(this.undefinedExports);h<f.length;h+=1){var m=f[h];this.raiseRecoverable(this.undefinedExports[m].start,"Export '"+m+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var eP={kind:"loop"},Dda={kind:"switch"};dh.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;wn.lastIndex=this.pos;var h=wn.exec(this.input);h=this.pos+h[0].length;var f=this.input.charCodeAt(h);if(91===f)return!0;if(c)return!1;if(123===f)return!0;if(El(f,!0)){for(c=h+1;vm(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(h,c);if(!Ada.test(c))return!0}return!1};dh.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
wn.lastIndex=this.pos;var c=wn.exec(this.input);c=this.pos+c[0].length;return!Lm.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!vm(this.input.charAt(c+8)))};dh.parseStatement=function(c,h,f){var m=this.type,n=this.startNode();if(this.isLet(c)){m=Pb._var;var a="let"}switch(m){case Pb._break:case Pb._continue:return this.parseBreakContinueStatement(n,m.keyword);case Pb._debugger:return this.parseDebuggerStatement(n);case Pb._do:return this.parseDoStatement(n);
case Pb._for:return this.parseForStatement(n);case Pb._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Pb._class:return c&&this.unexpected(),this.parseClass(n,!0);case Pb._if:return this.parseIfStatement(n);case Pb._return:return this.parseReturnStatement(n);case Pb._switch:return this.parseSwitchStatement(n);case Pb._throw:return this.parseThrowStatement(n);case Pb._try:return this.parseTryStatement(n);
case Pb._const:case Pb._var:return a=a||this.value,c&&"var"!==a&&this.unexpected(),this.parseVarStatement(n,a);case Pb._while:return this.parseWhileStatement(n);case Pb._with:return this.parseWithStatement(n);case Pb.braceL:return this.parseBlock(!0,n);case Pb.semi:return this.parseEmptyStatement(n);case Pb._export:case Pb._import:if(10<this.options.ecmaVersion&&m===Pb._import&&(wn.lastIndex=this.pos,c=wn.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return m===Pb._import?this.parseImport(n):this.parseExport(n,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;f=this.parseExpression();return m===Pb.name&&"Identifier"===
f.type&&this.eat(Pb.colon)?this.parseLabeledStatement(n,h,f,c):this.parseExpressionStatement(n,f)}};dh.parseBreakContinueStatement=function(c,h){var f="break"===h;this.next();this.eat(Pb.semi)||this.insertSemicolon()?c.label=null:this.type!==Pb.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var m=0;m<this.labels.length;++m){var n=this.labels[m];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(f||"loop"===n.kind))break;if(c.label&&f)break}}m===this.labels.length&&
this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};dh.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};dh.parseDoStatement=function(c){this.next();this.labels.push(eP);c.body=this.parseStatement("do");this.labels.pop();this.expect(Pb._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Pb.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};dh.parseForStatement=
function(c){this.next();var h=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(eP);this.enterScope(0);this.expect(Pb.parenL);if(this.type===Pb.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var f=this.isLet();if(this.type===Pb._var||this.type===Pb._const||f){var m=this.startNode();f=f?"let":this.value;this.next();this.parseVar(m,!0,f);this.finishNode(m,"VariableDeclaration");
if((this.type===Pb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===m.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Pb._in?-1<h&&this.unexpected(h):c.await=-1<h),this.parseForIn(c,m);-1<h&&this.unexpected(h);return this.parseFor(c,m)}m=new dC;f=this.parseExpression(!0,m);if(this.type===Pb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Pb._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(f,
!1,m),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(m,!0);-1<h&&this.unexpected(h);return this.parseFor(c,f)};dh.parseFunctionStatement=function(c,h,f){this.next();return this.parseFunction(c,zA|(f?0:fP),!1,h)};dh.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Pb._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};dh.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Pb.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};dh.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Pb.braceL);this.labels.push(Dda);this.enterScope(0);for(var h,f=!1;this.type!==Pb.braceR;)if(this.type===Pb._case||this.type===
Pb._default){var m=this.type===Pb._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();m?h.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),f=!0,h.test=null);this.expect(Pb.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};dh.parseThrowStatement=
function(c){this.next();Lm.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var Eda=[];dh.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Pb._catch){var h=this.startNode();this.next();if(this.eat(Pb.parenL)){h.param=this.parseBindingAtom();var f="Identifier"===h.param.type;this.enterScope(f?32:
0);this.checkLValPattern(h.param,f?4:2);this.expect(Pb.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,"CatchClause")}c.finalizer=this.eat(Pb._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};dh.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};dh.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(eP);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};dh.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};dh.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};dh.parseLabeledStatement=function(c,h,f,m){for(var n=0,a=this.labels;n<a.length;n+=1)a[n].name===h&&this.raise(f.start,"Label '"+h+"' is already declared");n=this.type.isLoop?"loop":this.type===Pb._switch?"switch":null;for(a=this.labels.length-1;0<=a;a--){var d=this.labels[a];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(m?-1===m.indexOf("label")?m+"label":m:"label");
this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};dh.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};dh.parseBlock=function(c,h,f){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(Pb.braceL);for(c&&this.enterScope(0);this.type!==Pb.braceR;){var m=this.parseStatement(null);h.body.push(m)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};
dh.parseFor=function(c,h){c.init=h;this.expect(Pb.semi);c.test=this.type===Pb.semi?null:this.parseExpression();this.expect(Pb.semi);c.update=this.type===Pb.parenR?null:this.parseExpression();this.expect(Pb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};dh.parseForIn=function(c,h){var f=this.type===Pb._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==
h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=f?this.parseExpression():this.parseMaybeAssign();this.expect(Pb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};dh.parseVar=function(c,h,f){c.declarations=[];for(c.kind=f;;){var m=this.startNode();this.parseVarId(m,f);this.eat(Pb.eq)?m.init=this.parseMaybeAssign(h):
"const"!==f||this.type===Pb._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===m.id.type||h&&(this.type===Pb._in||this.isContextual("of"))?m.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(m,"VariableDeclarator"));if(!this.eat(Pb.comma))break}return c};dh.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var zA=1,fP=2;dh.parseFunction=
function(c,h,f,m){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!m)this.type===Pb.star&&h&fP&&this.unexpected(),c.generator=this.eat(Pb.star);8<=this.options.ecmaVersion&&(c.async=!!m);h&zA&&(c.id=h&4&&this.type!==Pb.name?null:this.parseIdent(),!c.id||h&fP||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));m=this.yieldPos;var n=this.awaitPos,a=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));h&zA||(c.id=this.type===Pb.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,h&zA?"FunctionDeclaration":"FunctionExpression")};dh.parseFunctionParams=function(c){this.expect(Pb.parenL);c.params=this.parseBindingList(Pb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};dh.parseClass=function(c,h){this.next();var f=this.strict;
this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var m=this.startNode(),n=!1;m.body=[];for(this.expect(Pb.braceL);this.type!==Pb.braceR;){var a=this.parseClassElement(null!==c.superClass);a&&(m.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(n&&this.raise(a.start,"Duplicate constructor in the same class"),n=!0))}this.strict=f;this.next();c.body=this.finishNode(m,"ClassBody");return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};dh.parseClassElement=function(c){var h=
this;if(this.eat(Pb.semi))return null;var f=this.startNode(),m=function(k,b){void 0===b&&(b=!1);var e=h.start,l=h.startLoc;if(!h.eatContextual(k))return!1;if(!(h.type===Pb.parenL||b&&h.canInsertSemicolon()))return!0;f.key&&h.unexpected();f.computed=!1;f.key=h.startNodeAt(e,l);f.key.name=k;h.finishNode(f.key,"Identifier");return!1};f.kind="method";f.static=m("static");var n=this.eat(Pb.star),a=!1;n||(8<=this.options.ecmaVersion&&m("async",!0)?(a=!0,n=9<=this.options.ecmaVersion&&this.eat(Pb.star)):
m("get")?f.kind="get":m("set")&&(f.kind="set"));f.key||this.parsePropertyName(f);m=f.key;var d=!1;f.computed||f.static||!("Identifier"===m.type&&"constructor"===m.name||"Literal"===m.type&&"constructor"===m.value)?f.static&&"Identifier"===m.type&&"prototype"===m.name&&this.raise(m.start,"Classes may not have a static property named prototype"):("method"!==f.kind&&this.raise(m.start,"Constructor can't have get/set modifier"),n&&this.raise(m.start,"Constructor can't be a generator"),a&&this.raise(m.start,
"Constructor can't be an async method"),f.kind="constructor",d=c);this.parseClassMethod(f,n,a,d);"get"===f.kind&&0!==f.value.params.length&&this.raiseRecoverable(f.value.start,"getter should have no params");"set"===f.kind&&1!==f.value.params.length&&this.raiseRecoverable(f.value.start,"setter should have exactly one param");"set"===f.kind&&"RestElement"===f.value.params[0].type&&this.raiseRecoverable(f.value.params[0].start,"Setter cannot use rest params");return f};dh.parseClassMethod=function(c,
h,f,m){c.value=this.parseMethod(h,f,m);return this.finishNode(c,"MethodDefinition")};dh.parseClassId=function(c,h){this.type===Pb.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};dh.parseClassSuper=function(c){c.superClass=this.eat(Pb._extends)?this.parseExprSubscripts():null};dh.parseExport=function(c,h){this.next();if(this.eat(Pb.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Pb.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Pb._default)){this.checkExport(h,"default",this.lastTokStart);var f;this.type===Pb._function||(f=this.isAsyncFunction())?(h=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(h,zA|4,!1,f)):this.type===Pb._class?(f=this.startNode(),c.declaration=this.parseClass(f,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==
Pb.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(h=c.specifiers;f<h.length;f+=1){var m=h[f];this.checkUnreserved(m.local);this.checkLocalExport(m.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};dh.checkExport=function(c,h,f){c&&(cC.call(c,h)&&this.raiseRecoverable(f,"Duplicate export '"+h+"'"),c[h]=!0)};dh.checkPatternExport=function(c,h){var f=h.type;if("Identifier"===f)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===f)for(f=
0,h=h.properties;f<h.length;f+=1)this.checkPatternExport(c,h[f]);else if("ArrayPattern"===f)for(f=0,h=h.elements;f<h.length;f+=1){var m=h[f];m&&this.checkPatternExport(c,m)}else"Property"===f?this.checkPatternExport(c,h.value):"AssignmentPattern"===f?this.checkPatternExport(c,h.left):"RestElement"===f?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,h.expression)};dh.checkVariableExport=function(c,h){if(c)for(var f=0;f<h.length;f+=1)this.checkPatternExport(c,
h[f].id)};dh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};dh.parseExportSpecifiers=function(c){var h=[],f=!0;for(this.expect(Pb.braceL);!this.eat(Pb.braceR);){if(f)f=!1;else if(this.expect(Pb.comma),this.afterTrailingComma(Pb.braceR))break;var m=this.startNode();m.local=this.parseIdent(!0);m.exported=this.eatContextual("as")?this.parseIdent(!0):
m.local;this.checkExport(c,m.exported.name,m.exported.start);h.push(this.finishNode(m,"ExportSpecifier"))}return h};dh.parseImport=function(c){this.next();this.type===Pb.string?(c.specifiers=Eda,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Pb.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};dh.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===Pb.name){var f=
this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(Pb.comma))return c}if(this.type===Pb.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(Pb.braceL);!this.eat(Pb.braceR);){if(h)h=!1;else if(this.expect(Pb.comma),this.afterTrailingComma(Pb.braceR))break;f=this.startNode();
f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};dh.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};dh.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var ro=yj.prototype;ro.toAssignable=function(c,h,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";f&&this.checkPatternErrors(f,!0);f=0;for(var m=c.properties;f<m.length;f+=
1){var n=m[f];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,f);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};ro.toAssignableList=function(c,h){for(var f=c.length,m=0;m<f;m++){var n=c[m];n&&this.toAssignable(n,h)}f&&(f=c[f-1],6===this.options.ecmaVersion&&h&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};ro.parseSpread=function(c){var h=this.startNode();this.next();h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,
"SpreadElement")};ro.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Pb.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};ro.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Pb.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Pb.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Pb.braceL:return this.parseObj(!0)}return this.parseIdent()};
ro.parseBindingList=function(c,h,f){for(var m=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Pb.comma),h&&this.type===Pb.comma)m.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===Pb.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);m.push(h);this.type===Pb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a);m.push(a)}return m};
ro.parseBindingListItem=function(c){return c};ro.parseMaybeDefault=function(c,h,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Pb.eq))return f;c=this.startNodeAt(c,h);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};ro.checkLValSimple=function(c,h,f){void 0===h&&(h=0);var m=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(m?"Binding ":"Assigning to ")+c.name+
" in strict mode");m&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(cC.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":m&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return m&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,f);default:this.raise(c.start,(m?"Binding":"Assigning to")+" rvalue")}};ro.checkLValPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var m=0;for(c=c.properties;m<c.length;m+=1)this.checkLValInnerPattern(c[m],h,f);break;case "ArrayPattern":m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&this.checkLValInnerPattern(n,h,f)}break;default:this.checkLValSimple(c,h,f)}};ro.checkLValInnerPattern=
function(c,h,f){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,f);break;case "RestElement":this.checkLValPattern(c.argument,h,f);break;default:this.checkLValPattern(c,h,f)}};var ph=yj.prototype;ph.checkPropClash=function(c,h,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var m=c.key;switch(m.type){case "Identifier":var n=
m.name;break;case "Literal":n=String(m.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(f?0>f.doubleProto&&(f.doubleProto=m.start):this.raiseRecoverable(m.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(f=h[n])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(m.start,"Redefinition of property"):f=h[n]={init:!1,get:!1,set:!1},f[c]=!0)}};ph.parseExpression=function(c,h){var f=this.start,m=this.startLoc,
n=this.parseMaybeAssign(c,h);if(this.type===Pb.comma){f=this.startNodeAt(f,m);for(f.expressions=[n];this.eat(Pb.comma);)f.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(f,"SequenceExpression")}return n};ph.parseMaybeAssign=function(c,h,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var m=!1,n=-1,a=-1;h?(n=h.parenthesizedAssign,a=h.trailingComma,h.parenthesizedAssign=h.trailingComma=-1):(h=new dC,m=!0);var d=this.start,k=this.startLoc;
if(this.type===Pb.parenL||this.type===Pb.name)this.potentialArrowAt=this.start;var b=this.parseMaybeConditional(c,h);f&&(b=f.call(this,b,d,k));if(this.type.isAssign)return f=this.startNodeAt(d,k),f.operator=this.value,this.type===Pb.eq&&(b=this.toAssignable(b,!1,h)),m||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=b.start&&(h.shorthandAssign=-1),this.type===Pb.eq?this.checkLValPattern(b):this.checkLValSimple(b),f.left=b,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,
"AssignmentExpression");m&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<a&&(h.trailingComma=a);return b};ph.parseMaybeConditional=function(c,h){var f=this.start,m=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(Pb.question)?(h=this.startNodeAt(f,m),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(Pb.colon),h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};ph.parseExprOps=function(c,h){var f=this.start,
m=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===f&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,f,m,-1,c)};ph.parseExprOp=function(c,h,f,m,n){var a=this.type.binop;if(null!=a&&(!n||this.type!==Pb._in)&&a>m){var d=this.type===Pb.logicalOR||this.type===Pb.logicalAND,k=this.type===Pb.coalesce;k&&(a=Pb.logicalAND.binop);var b=this.value;this.next();var e=this.start,l=this.startLoc;a=this.parseExprOp(this.parseMaybeUnary(null,!1),e,l,a,n);c=this.buildBinary(h,
f,c,a,b,d||k);(d&&this.type===Pb.coalesce||k&&(this.type===Pb.logicalOR||this.type===Pb.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,f,m,n)}return c};ph.buildBinary=function(c,h,f,m,n,a){c=this.startNodeAt(c,h);c.left=f;c.operator=n;c.right=m;return this.finishNode(c,a?"LogicalExpression":"BinaryExpression")};ph.parseMaybeUnary=function(c,h){var f=this.start,m=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();h=!0}else if(this.type.prefix){n=this.startNode();var a=this.type===Pb.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);a?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):h=!0;n=this.finishNode(n,a?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(f,m),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!h&&this.eat(Pb.starstar)?this.buildBinary(f,m,n,this.parseMaybeUnary(null,!1),"**",!1):n};ph.parseExprSubscripts=function(c){var h=this.start,f=this.startLoc,m=this.parseExprAtom(c);if("ArrowFunctionExpression"===
m.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return m;h=this.parseSubscripts(m,h,f);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&(c.parenthesizedBind=-1));return h};ph.parseSubscripts=function(c,h,f,m){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,a=!1;;){var d=this.parseSubscript(c,
h,f,m,n,a);d.optional&&(a=!0);if(d===c||"ArrowFunctionExpression"===d.type)return a&&(c=this.startNodeAt(h,f),c.expression=d,d=this.finishNode(c,"ChainExpression")),d;c=d}};ph.parseSubscript=function(c,h,f,m,n,a){var d=11<=this.options.ecmaVersion,k=d&&this.eat(Pb.questionDot);m&&k&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var b=this.eat(Pb.bracketL);if(b||k&&this.type!==Pb.parenL&&this.type!==Pb.backQuote||this.eat(Pb.dot))h=this.startNodeAt(h,
f),h.object=c,h.property=b?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!b,b&&this.expect(Pb.bracketR),d&&(h.optional=k),c=this.finishNode(h,"MemberExpression");else if(!m&&this.eat(Pb.parenL)){m=new dC;a=this.yieldPos;var e=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;b=this.parseExprList(Pb.parenR,8<=this.options.ecmaVersion,!1,m);if(n&&!k&&!this.canInsertSemicolon()&&this.eat(Pb.arrow))return this.checkPatternErrors(m,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=a,this.awaitPos=e,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,f),b,!0);this.checkExpressionErrors(m,!0);this.yieldPos=a||this.yieldPos;this.awaitPos=e||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,f);h.callee=c;h.arguments=b;d&&(h.optional=k);c=this.finishNode(h,"CallExpression")}else this.type===
Pb.backQuote&&((k||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(h,f),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};ph.parseExprAtom=function(c){this.type===Pb.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case Pb._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),
this.type!==Pb.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==Pb.dot&&this.type!==Pb.bracketL&&this.type!==Pb.parenL&&this.unexpected(),this.finishNode(h,"Super");case Pb._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case Pb.name:c=this.start;var f=this.startLoc,m=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!m&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Pb._function))return this.parseFunction(this.startNodeAt(c,
f),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(Pb.arrow))return this.parseArrowExpression(this.startNodeAt(c,f),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Pb.name&&!m)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Pb.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[n],!0)}return n;case Pb.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case Pb.num:case Pb.string:return this.parseLiteral(this.value);
case Pb._null:case Pb._true:case Pb._false:return h=this.startNode(),h.value=this.type===Pb._null?null:this.type===Pb._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case Pb.parenL:return f=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),h;case Pb.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(Pb.bracketR,
!0,!0,c),this.finishNode(h,"ArrayExpression");case Pb.braceL:return this.parseObj(!1,c);case Pb._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case Pb._class:return this.parseClass(this.startNode(),!1);case Pb._new:return this.parseNew();case Pb.backQuote:return this.parseTemplate();case Pb._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};ph.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);switch(this.type){case Pb.parenL:return this.parseDynamicImport(c);case Pb.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};ph.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Pb.parenR)){var h=this.start;this.eat(Pb.comma)&&this.eat(Pb.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,
"ImportExpression")};ph.parseImportMeta=function(c){this.next();var h=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};ph.parseLiteral=function(c){var h=
this.startNode();h.value=c;h.raw=this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};ph.parseParenExpression=function(){this.expect(Pb.parenL);var c=this.parseExpression();this.expect(Pb.parenR);return c};ph.parseParenAndDistinguishExpression=function(c){var h=this.start,f=this.startLoc,m=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,a=
this.startLoc,d=[],k=!0,b=!1,e=new dC,l=this.yieldPos,p=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Pb.parenR;)if(k?k=!1:this.expect(Pb.comma),m&&this.afterTrailingComma(Pb.parenR,!0)){b=!0;break}else if(this.type===Pb.ellipsis){var q=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===Pb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,e,this.parseParenItem));m=this.start;k=this.startLoc;
this.expect(Pb.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Pb.arrow))return this.checkPatternErrors(e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=p,this.parseParenArrowList(h,f,d);d.length&&!b||this.unexpected(this.lastTokStart);q&&this.unexpected(q);this.checkExpressionErrors(e,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=p||this.awaitPos;1<d.length?(c=this.startNodeAt(n,a),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",m,k)):c=d[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(h=this.startNodeAt(h,f),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};ph.parseParenItem=function(c){return c};ph.parseParenArrowList=function(c,h,f){return this.parseArrowExpression(this.startNodeAt(c,h),f)};var Fda=[];ph.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Pb.dot))return c.meta=h,h=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var f=this.startLoc,m=this.type===Pb._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,f,!0);m&&"ImportExpression"===
c.callee.type&&this.raise(h,"Cannot use new with import()");this.eat(Pb.parenL)?c.arguments=this.parseExprList(Pb.parenR,8<=this.options.ecmaVersion,!1):c.arguments=Fda;return this.finishNode(c,"NewExpression")};ph.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===Pb.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();h.tail=this.type===Pb.backQuote;return this.finishNode(h,"TemplateElement")};ph.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(h.quasis=[f];!f.tail;)this.type===Pb.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Pb.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(Pb.braceR),h.quasis.push(f=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(h,"TemplateLiteral")};ph.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Pb.name||this.type===Pb.num||this.type===Pb.string||this.type===Pb.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Pb.star)&&!Lm.test(this.input.slice(this.lastTokEnd,this.start))};ph.parseObj=function(c,h){var f=this.startNode(),m=!0,n={};f.properties=[];for(this.next();!this.eat(Pb.braceR);){if(m)m=
!1;else if(this.expect(Pb.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Pb.braceR))break;var a=this.parseProperty(c,h);c||this.checkPropClash(a,n,h);f.properties.push(a)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};ph.parseProperty=function(c,h){var f=this.startNode(),m;if(9<=this.options.ecmaVersion&&this.eat(Pb.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===Pb.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,
"RestElement");this.type===Pb.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,h);this.type===Pb.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||h){var n=this.start;var a=this.startLoc}c||(m=this.eat(Pb.star))}var d=this.containsEsc;this.parsePropertyName(f);if(!c&&!d&&
8<=this.options.ecmaVersion&&!m&&this.isAsyncProp(f)){var k=!0;m=9<=this.options.ecmaVersion&&this.eat(Pb.star);this.parsePropertyName(f,h)}else k=!1;this.parsePropertyValue(f,c,m,k,n,a,h,d);return this.finishNode(f,"Property")};ph.parsePropertyValue=function(c,h,f,m,n,a,d,k){(f||m)&&this.type===Pb.colon&&this.unexpected();this.eat(Pb.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Pb.parenL?(h&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(f,m)):h||k||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Pb.comma||this.type===Pb.braceR||this.type===Pb.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||m)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key)):
this.type===Pb.eq&&d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||m)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};ph.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Pb.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Pb.bracketR),c.key;c.computed=!1}return c.key=this.type===Pb.num||this.type===Pb.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};ph.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};ph.parseMethod=function(c,h,f){var m=this.startNode(),n=this.yieldPos,a=this.awaitPos,d=this.awaitIdentPos;this.initFunction(m);6<=this.options.ecmaVersion&&(m.generator=c);8<=this.options.ecmaVersion&&(m.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(m.generator?8:0)|64|(f?128:0));this.expect(Pb.parenL);m.params=this.parseBindingList(Pb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(m,!1,!0);this.yieldPos=n;this.awaitPos=a;this.awaitIdentPos=d;return this.finishNode(m,"FunctionExpression")};ph.parseArrowExpression=function(c,h,f){var m=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,
"ArrowFunctionExpression")};ph.parseFunctionBody=function(c,h,f){var m=this.strict,n=!1;if(h&&this.type!==Pb.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var a=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!m||a)&&(n=this.strictDirective(this.end))&&a&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");a=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!m&&!n&&!h&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!m);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=a}this.exitScope()};ph.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};ph.checkParams=function(c,h){var f={},m=0;for(c=c.params;m<c.length;m+=1)this.checkLValInnerPattern(c[m],1,h?null:f)};ph.parseExprList=function(c,h,f,m){for(var n=[],a=!0;!this.eat(c);){if(a)a=!1;else if(this.expect(Pb.comma),
h&&this.afterTrailingComma(c))break;if(f&&this.type===Pb.comma)var d=null;else this.type===Pb.ellipsis?(d=this.parseSpread(m),m&&this.type===Pb.comma&&0>m.trailingComma&&(m.trailingComma=this.start)):d=this.parseMaybeAssign(!1,m);n.push(d)}return n};ph.checkUnreserved=function(c){var h=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};ph.parseIdent=function(c,h){h=this.startNode();this.type===Pb.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,
"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};ph.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===Pb.semi||this.canInsertSemicolon()||this.type!==Pb.star&&!this.type.startsExpr?
(h.delegate=!1,h.argument=null):(h.delegate=this.eat(Pb.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};ph.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var kH=yj.prototype;kH.raise=function(c,h){var f=hK(this.input,c);h+=" ("+f.line+":"+f.column+")";h=new SyntaxError(h);h.pos=c;h.loc=f;h.raisedAt=this.pos;throw h;};kH.raiseRecoverable=
kH.raise;kH.curPosition=function(){if(this.options.locations)return new Xv(this.curLine,this.pos-this.lineStart)};var Zr=yj.prototype,Gda=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};Zr.enterScope=function(c){this.scopeStack.push(new Gda(c))};Zr.exitScope=function(){this.scopeStack.pop()};Zr.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};Zr.declareName=function(c,h,f){var m=!1;if(2===h)h=this.currentScope(),m=-1<h.lexical.indexOf(c)||
-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),m=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){m=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}m&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};Zr.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};Zr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Zr.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];
if(h.flags&3)return h}};Zr.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var AA=function(c,h,f){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new uy(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},BA=yj.prototype;BA.startNode=function(){return new AA(this,this.start,this.startLoc)};BA.startNodeAt=function(c,h){return new AA(this,
c,h)};BA.finishNode=function(c,h){return jS.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};BA.finishNodeAt=function(c,h,f,m){return jS.call(this,c,h,f,m)};BA.copyNode=function(c){var h=new AA(this,c.start,this.startLoc),f;for(f in c)h[f]=c[f];return h};var xn=function(c,h,f,m,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!f;this.override=m;this.generator=!!n},pj={b_stat:new xn("{",!1),b_expr:new xn("{",!0),b_tmpl:new xn("${",!1),p_stat:new xn("(",!1),p_expr:new xn("(",!0),q_tmpl:new xn("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new xn("function",!1),f_expr:new xn("function",!0),f_expr_gen:new xn("function",!0,!1,null,!0),f_gen:new xn("function",!1,!1,null,!0)},lH=yj.prototype;lH.initialContext=function(){return[pj.b_stat]};lH.braceIsBlock=function(c){var h=this.curContext();return h===pj.f_expr||h===pj.f_stat?!0:c!==Pb.colon||h!==pj.b_stat&&h!==pj.b_expr?c===Pb._return||c===Pb.name&&this.exprAllowed?Lm.test(this.input.slice(this.lastTokEnd,this.start)):c===Pb._else||
c===Pb.semi||c===Pb.eof||c===Pb.parenR||c===Pb.arrow?!0:c===Pb.braceL?h===pj.b_stat:c===Pb._var||c===Pb._const||c===Pb.name?!1:!this.exprAllowed:!h.isExpr};lH.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};lH.updateContext=function(c){var h,f=this.type;f.keyword&&c===Pb.dot?this.exprAllowed=!1:(h=f.updateContext)?h.call(this,c):this.exprAllowed=f.beforeExpr};Pb.parenR.updateContext=Pb.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===pj.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Pb.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?pj.b_stat:pj.b_expr);this.exprAllowed=!0};Pb.dollarBraceL.updateContext=function(){this.context.push(pj.b_tmpl);this.exprAllowed=!0};Pb.parenL.updateContext=function(c){this.context.push(c===Pb._if||c===Pb._for||c===Pb._with||c===Pb._while?
pj.p_stat:pj.p_expr);this.exprAllowed=!0};Pb.incDec.updateContext=function(){};Pb._function.updateContext=Pb._class.updateContext=function(c){!c.beforeExpr||c===Pb._else||c===Pb.semi&&this.curContext()!==pj.p_stat||c===Pb._return&&Lm.test(this.input.slice(this.lastTokEnd,this.start))||(c===Pb.colon||c===Pb.braceL)&&this.curContext()===pj.b_stat?this.context.push(pj.f_stat):this.context.push(pj.f_expr);this.exprAllowed=!1};Pb.backQuote.updateContext=function(){this.curContext()===pj.q_tmpl?this.context.pop():
this.context.push(pj.q_tmpl);this.exprAllowed=!1};Pb.star.updateContext=function(c){c===Pb._function&&(c=this.context.length-1,this.context[c]=this.context[c]===pj.f_expr?pj.f_expr_gen:pj.f_gen);this.exprAllowed=!0};Pb.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==Pb.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var L6={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
M6={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
kS={};eC(9);eC(10);eC(11);eC(12);var Xf=yj.prototype,Eq=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=kS[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
Eq.prototype.reset=function(c,h,f){var m=-1!==f.indexOf("u");this.start=c|0;this.source=h+"";this.flags=f;this.switchU=m&&6<=this.parser.options.ecmaVersion;this.switchN=m&&9<=this.parser.options.ecmaVersion};Eq.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Eq.prototype.at=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return-1;var n=f.charCodeAt(c);if(!h&&!this.switchU||55295>=n||57344<=n||c+1>=m)return n;
c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Eq.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return m;var n=f.charCodeAt(c),a;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=m||56320>(a=f.charCodeAt(c+1))||57343<a?c+1:c+2};Eq.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Eq.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};Eq.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Eq.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};Xf.validateRegExpFlags=function(c){for(var h=c.validFlags,f=c.flags,m=0;m<f.length;m++){var n=f.charAt(m);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(n,m+1)&&this.raise(c.start,"Duplicate regular expression flag")}};Xf.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};Xf.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var h=0,f=c.backReferenceNames;h<
f.length;h+=1)-1===c.groupNames.indexOf(f[h])&&c.raise("Invalid named capture referenced")};Xf.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};Xf.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};Xf.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};Xf.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!f,!0}c.pos=h;return!1};Xf.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};Xf.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};Xf.regexp_eatBracedQuantifier=function(c,h){var f=c.pos;if(c.eat(123)){var m=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(m=c.lastIntValue);if(c.eat(125))return-1!==m&&m<n&&!h&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=f}return!1};Xf.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};Xf.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};Xf.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};Xf.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};Xf.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};Xf.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};Xf.regexp_eatSyntaxCharacter=function(c){var h=c.current();return lS(h)?(c.lastIntValue=h,c.advance(),!0):!1};Xf.regexp_eatPatternCharacters=function(c){for(var h=c.pos,f=0;-1!==(f=c.current())&&
!lS(f);)c.advance();return c.pos!==h};Xf.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};Xf.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};Xf.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};Xf.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=fC(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=fC(c.lastIntValue);return!0}return!1};Xf.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);
f=m;if(El(f,!0)||36===f||95===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Xf.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);f=m;if(vm(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Xf.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};Xf.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=h}return!1};Xf.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};Xf.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};Xf.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};Xf.regexp_eatZero=
function(c){return 48!==c.current()||gC(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};Xf.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};Xf.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};Xf.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var f=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(h&&55296<=f&&56319>=f){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var m=c.lastIntValue;if(56320<=m&&57343>=m)return c.lastIntValue=1024*(f-55296)+(m-56320)+65536,!0}c.pos=h;c.lastIntValue=f}return!0}if(m=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))m=c.lastIntValue,m=0<=m&&1114111>=m;
if(m)return!0;h&&c.raise("Invalid unicode escape");c.pos=f}return!1};Xf.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};Xf.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};Xf.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};Xf.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};Xf.regexp_validateUnicodePropertyNameAndValue=function(c,h,f){cC.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(f)||c.raise("Invalid property value")};Xf.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
Xf.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";mS(h=c.current());)c.lastStringValue+=fC(h),c.advance();return""!==c.lastStringValue};Xf.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";N6(h=c.current());)c.lastStringValue+=fC(h),c.advance();return""!==c.lastStringValue};Xf.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};Xf.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};Xf.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==h&&-1!==f||c.raise("Invalid character class");-1!==h&&-1!==f&&h>f&&c.raise("Range out of order in character class")}}};Xf.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};Xf.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};Xf.regexp_eatClassControlLetter=function(c){var h=
c.current();return gC(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};Xf.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};Xf.regexp_eatDecimalDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;gC(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==h};Xf.regexp_eatHexDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;nS(f=c.current());)c.lastIntValue=
16*c.lastIntValue+oS(f),c.advance();return c.pos!==h};Xf.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*f+c.lastIntValue:c.lastIntValue=8*h+f}else c.lastIntValue=h;return!0}return!1};Xf.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};Xf.regexp_eatFixedHexDigits=
function(c,h){for(var f=c.pos,m=c.lastIntValue=0;m<h;++m){var n=c.current();if(!nS(n))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+oS(n);c.advance()}return!0};var mH=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new uy(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},Kh=yj.prototype;Kh.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new mH(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Kh.getToken=function(){this.next();return new mH(this)};"undefined"!==typeof Symbol&&(Kh[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===Pb.eof,value:h}}}});Kh.curContext=function(){return this.context[this.context.length-1]};Kh.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Pb.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};Kh.readToken=function(c){return El(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};Kh.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return(c<<10)+h-56613888};Kh.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){Wv.lastIndex=h;for(var m;(m=Wv.exec(this.input))&&m.index<this.pos;)++this.curLine,this.lineStart=m.index+m[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+2,f),h,this.pos,c,this.curPosition())};
Kh.skipLineComment=function(c){for(var h=this.pos,f=this.options.onComment&&this.curPosition(),m=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!Vv(m);)m=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,f,this.curPosition())};Kh.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&dP.test(String.fromCharCode(c)))++this.pos;else break a}}};Kh.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var f=this.type;this.type=c;this.value=
h;this.updateContext(f)};Kh.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(Pb.ellipsis);++this.pos;return this.finishToken(Pb.dot)};Kh.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Pb.assign,2):this.finishOp(Pb.slash,1)};
Kh.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),f=1,m=42===c?Pb.star:Pb.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++f,m=Pb.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(Pb.assign,f+1):this.finishOp(m,f)};Kh.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Pb.assign,3):this.finishOp(124===c?Pb.logicalOR:Pb.logicalAND,
2):61===h?this.finishOp(Pb.assign,2):this.finishOp(124===c?Pb.bitwiseOR:Pb.bitwiseAND,1)};Kh.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Pb.assign,2):this.finishOp(Pb.bitwiseXOR,1)};Kh.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Lm.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Pb.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===h?this.finishOp(Pb.assign,2):this.finishOp(Pb.plusMin,1)};Kh.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),f=1;if(h===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(Pb.assign,f+1):this.finishOp(Pb.bitShift,f);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===h&&(f=2);return this.finishOp(Pb.relational,f)};Kh.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(Pb.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Pb.arrow)):this.finishOp(61===c?Pb.eq:Pb.prefix,1)};Kh.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var f=this.input.charCodeAt(this.pos+
2);if(48>f||57<f)return this.finishOp(Pb.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Pb.assign,3):this.finishOp(Pb.coalesce,2)}return this.finishOp(Pb.question,1)};Kh.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Pb.parenL);case 41:return++this.pos,this.finishToken(Pb.parenR);case 59:return++this.pos,this.finishToken(Pb.semi);case 44:return++this.pos,this.finishToken(Pb.comma);case 91:return++this.pos,
this.finishToken(Pb.bracketL);case 93:return++this.pos,this.finishToken(Pb.bracketR);case 123:return++this.pos,this.finishToken(Pb.braceL);case 125:return++this.pos,this.finishToken(Pb.braceR);case 58:return++this.pos,this.finishToken(Pb.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Pb.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Pb.prefix,1)}this.raise(this.pos,"Unexpected character '"+iK(c)+"'")};Kh.finishOp=function(c,h){var f=this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,f)};Kh.readRegexp=function(){for(var c,h,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var m=this.input.charAt(this.pos);Lm.test(m)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===m)h=
!0;else if("]"===m&&h)h=!1;else if("/"===m&&!h)break;c="\\"===m}++this.pos}c=this.input.slice(f,this.pos);++this.pos;m=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(m);m=this.regexpState||(this.regexpState=new Eq(this));m.reset(f,c,h);this.validateRegExpFlags(m);this.validateRegExpPattern(m);f=null;try{f=new RegExp(c,h)}catch(n){}return this.finishToken(Pb.regexp,{pattern:c,flags:h,value:f})};Kh.readInt=function(c,h,f){var m=12<=this.options.ecmaVersion&&void 0===h;f=f&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,a=0,d=0,k=0,b=null==h?Infinity:h;k<b;++k,++this.pos){var e=this.input.charCodeAt(this.pos);if(m&&95===e)f&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===k&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=e;else{var l=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity;if(l>=c)break;d=e;
a=a*c+l}}m&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?null:a};Kh.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=pS(this.input.slice(h,this.pos)),++this.pos):El(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Pb.num,f)};Kh.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var f=2<=this.pos-h&&48===this.input.charCodeAt(h);f&&this.strict&&this.raise(h,"Invalid number");var m=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===m)return f=pS(this.input.slice(h,this.pos)),++this.pos,El(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Pb.num,f);f&&/[89]/.test(this.input.slice(h,
this.pos))&&(f=!1);46!==m||f||(++this.pos,this.readInt(10),m=this.input.charCodeAt(this.pos));69!==m&&101!==m||f||(m=this.input.charCodeAt(++this.pos),43!==m&&45!==m||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));El(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Pb.num,f)};Kh.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};Kh.readString=function(c){for(var h="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var m=this.input.charCodeAt(this.pos);if(m===c)break;92===m?(h+=this.input.slice(f,this.pos),h+=this.readEscapedChar(!1),f=
this.pos):(Vv(m,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(f,this.pos++);return this.finishToken(Pb.string,h)};var W0={};Kh.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===W0)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};Kh.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw W0;this.raise(c,h)};Kh.readTmplToken=
function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Pb.template||this.type===Pb.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(Pb.dollarBraceL);++this.pos;return this.finishToken(Pb.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(Pb.template,c)}if(92===f)c+=this.input.slice(h,
this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(Vv(f)){c+=this.input.slice(h,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};Kh.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Pb.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Kh.readEscapedChar=function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return iK(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],m=parseInt(f,8);255<m&&(f=f.slice(0,-1),m=parseInt(f,8));this.pos+=f.length-1;h=this.input.charCodeAt(this.pos);"0"===f&&56!==h&&57!==h||!this.strict&&
!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(m)}return Vv(h)?"":String.fromCharCode(h)}};Kh.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};Kh.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,f=this.pos,m=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(vm(n,
m))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(h?El:vm)(n,m)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=iK(n),f=this.pos;else break;h=!1}return c+this.input.slice(f,this.pos)};Kh.readWord=function(){var c=this.readWord1(),h=Pb.name;this.keywords.test(c)&&(h=aC[c]);return this.finishToken(h,
c)};yj.acorn={Parser:yj,version:"8.0.4",defaultOptions:bC,Position:Xv,SourceLocation:uy,getLineInfo:hK,Node:AA,TokenType:bi,tokTypes:Pb,keywordTypes:aC,TokContext:xn,tokContexts:pj,isIdentifierChar:vm,isIdentifierStart:El,Token:mH,isNewLine:Vv,lineBreak:Lm,lineBreakG:Wv,nonASCIIwhitespace:dP};var wp=Object.freeze({__proto__:null,Node:AA,Parser:yj,Position:Xv,SourceLocation:uy,TokContext:xn,Token:mH,TokenType:bi,defaultOptions:bC,getLineInfo:hK,isIdentifierChar:vm,isIdentifierStart:El,isNewLine:Vv,
keywordTypes:aC,lineBreak:Lm,lineBreakG:Wv,nonASCIIwhitespace:dP,parse:function(c,h){return yj.parse(c,h)},parseExpressionAt:function(c,h,f){return yj.parseExpressionAt(c,h,f)},tokContexts:pj,tokTypes:Pb,tokenizer:function(c,h){return yj.tokenizer(c,h)},version:"8.0.4"});Ia("bL",wp);var uu=function(c,h){this.node=c;this.state=h},ue={};ue.Program=ue.BlockStatement=function(c,h,f){var m=0;for(c=c.body;m<c.length;m+=1)f(c[m],h,"Statement")};ue.Statement=jK;ue.EmptyStatement=st;ue.ExpressionStatement=
ue.ParenthesizedExpression=ue.ChainExpression=function(c,h,f){return f(c.expression,h,"Expression")};ue.IfStatement=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Statement");c.alternate&&f(c.alternate,h,"Statement")};ue.LabeledStatement=function(c,h,f){return f(c.body,h,"Statement")};ue.BreakStatement=ue.ContinueStatement=st;ue.WithStatement=function(c,h,f){f(c.object,h,"Expression");f(c.body,h,"Statement")};ue.SwitchStatement=function(c,h,f){f(c.discriminant,h,"Expression");var m=0;
for(c=c.cases;m<c.length;m+=1){var n=c[m];n.test&&f(n.test,h,"Expression");var a=0;for(n=n.consequent;a<n.length;a+=1)f(n[a],h,"Statement")}};ue.SwitchCase=function(c,h,f){c.test&&f(c.test,h,"Expression");var m=0;for(c=c.consequent;m<c.length;m+=1)f(c[m],h,"Statement")};ue.ReturnStatement=ue.YieldExpression=ue.AwaitExpression=function(c,h,f){c.argument&&f(c.argument,h,"Expression")};ue.ThrowStatement=ue.SpreadElement=function(c,h,f){return f(c.argument,h,"Expression")};ue.TryStatement=function(c,
h,f){f(c.block,h,"Statement");c.handler&&f(c.handler,h);c.finalizer&&f(c.finalizer,h,"Statement")};ue.CatchClause=function(c,h,f){c.param&&f(c.param,h,"Pattern");f(c.body,h,"Statement")};ue.WhileStatement=ue.DoWhileStatement=function(c,h,f){f(c.test,h,"Expression");f(c.body,h,"Statement")};ue.ForStatement=function(c,h,f){c.init&&f(c.init,h,"ForInit");c.test&&f(c.test,h,"Expression");c.update&&f(c.update,h,"Expression");f(c.body,h,"Statement")};ue.ForInStatement=ue.ForOfStatement=function(c,h,f){f(c.left,
h,"ForInit");f(c.right,h,"Expression");f(c.body,h,"Statement")};ue.ForInit=function(c,h,f){"VariableDeclaration"===c.type?f(c,h):f(c,h,"Expression")};ue.DebuggerStatement=st;ue.FunctionDeclaration=function(c,h,f){return f(c,h,"Function")};ue.VariableDeclaration=function(c,h,f){var m=0;for(c=c.declarations;m<c.length;m+=1)f(c[m],h)};ue.VariableDeclarator=function(c,h,f){f(c.id,h,"Pattern");c.init&&f(c.init,h,"Expression")};ue.Function=function(c,h,f){c.id&&f(c.id,h,"Pattern");for(var m=0,n=c.params;m<
n.length;m+=1)f(n[m],h,"Pattern");f(c.body,h,c.expression?"Expression":"Statement")};ue.Pattern=function(c,h,f){"Identifier"===c.type?f(c,h,"VariablePattern"):"MemberExpression"===c.type?f(c,h,"MemberPattern"):f(c,h)};ue.VariablePattern=st;ue.MemberPattern=jK;ue.RestElement=function(c,h,f){return f(c.argument,h,"Pattern")};ue.ArrayPattern=function(c,h,f){var m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&f(n,h,"Pattern")}};ue.ObjectPattern=function(c,h,f){var m=0;for(c=c.properties;m<c.length;m+=
1){var n=c[m];"Property"===n.type?(n.computed&&f(n.key,h,"Expression"),f(n.value,h,"Pattern")):"RestElement"===n.type&&f(n.argument,h,"Pattern")}};ue.Expression=jK;ue.ThisExpression=ue.Super=ue.MetaProperty=st;ue.ArrayExpression=function(c,h,f){var m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&f(n,h,"Expression")}};ue.ObjectExpression=function(c,h,f){var m=0;for(c=c.properties;m<c.length;m+=1)f(c[m],h)};ue.FunctionExpression=ue.ArrowFunctionExpression=ue.FunctionDeclaration;ue.SequenceExpression=
function(c,h,f){var m=0;for(c=c.expressions;m<c.length;m+=1)f(c[m],h,"Expression")};ue.TemplateLiteral=function(c,h,f){for(var m=0,n=c.quasis;m<n.length;m+=1)f(n[m],h);m=0;for(c=c.expressions;m<c.length;m+=1)f(c[m],h,"Expression")};ue.TemplateElement=st;ue.UnaryExpression=ue.UpdateExpression=function(c,h,f){f(c.argument,h,"Expression")};ue.BinaryExpression=ue.LogicalExpression=function(c,h,f){f(c.left,h,"Expression");f(c.right,h,"Expression")};ue.AssignmentExpression=ue.AssignmentPattern=function(c,
h,f){f(c.left,h,"Pattern");f(c.right,h,"Expression")};ue.ConditionalExpression=function(c,h,f){f(c.test,h,"Expression");f(c.consequent,h,"Expression");f(c.alternate,h,"Expression")};ue.NewExpression=ue.CallExpression=function(c,h,f){f(c.callee,h,"Expression");if(c.arguments){var m=0;for(c=c.arguments;m<c.length;m+=1)f(c[m],h,"Expression")}};ue.MemberExpression=function(c,h,f){f(c.object,h,"Expression");c.computed&&f(c.property,h,"Expression")};ue.ExportNamedDeclaration=ue.ExportDefaultDeclaration=
function(c,h,f){c.declaration&&f(c.declaration,h,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&f(c.source,h,"Expression")};ue.ExportAllDeclaration=function(c,h,f){c.exported&&f(c.exported,h);f(c.source,h,"Expression")};ue.ImportDeclaration=function(c,h,f){for(var m=0,n=c.specifiers;m<n.length;m+=1)f(n[m],h);f(c.source,h,"Expression")};ue.ImportExpression=function(c,h,f){f(c.source,h,"Expression")};ue.ImportSpecifier=ue.ImportDefaultSpecifier=ue.ImportNamespaceSpecifier=
ue.Identifier=ue.PrivateIdentifier=ue.Literal=st;ue.TaggedTemplateExpression=function(c,h,f){f(c.tag,h,"Expression");f(c.quasi,h,"Expression")};ue.ClassDeclaration=ue.ClassExpression=function(c,h,f){return f(c,h,"Class")};ue.Class=function(c,h,f){c.id&&f(c.id,h,"Pattern");c.superClass&&f(c.superClass,h,"Expression");f(c.body,h)};ue.ClassBody=function(c,h,f){var m=0;for(c=c.body;m<c.length;m+=1)f(c[m],h)};ue.MethodDefinition=ue.PropertyDefinition=ue.Property=function(c,h,f){c.computed&&f(c.key,h,"Expression");
c.value&&f(c.value,h,"Expression")};var so=Object.freeze({__proto__:null,ancestor:function(c,h,f,m,n){var a=[];f||(f=ue);(function l(k,b,e){e=e||k.type;var p=h[e],q=k!==a[a.length-1];q&&a.push(k);f[e](k,b,l);p&&p(k,b||a,a);q&&a.pop()})(c,m,n)},base:ue,findNodeAfter:function(c,h,f,m,n){f=hC(f);m||(m=ue);try{(function e(d,k,b){if(!(d.end<h)){b=b||d.type;if(d.start>=h&&f(b,d))throw new uu(d,k);m[b](d,k,e)}})(c,n)}catch(a){if(a instanceof uu)return a;throw a;}},findNodeAround:function(c,h,f,m,n){f=hC(f);
m||(m=ue);try{(function e(d,k,b){b=b||d.type;if(!(d.start>h||d.end<h)&&(m[b](d,k,e),f(b,d)))throw new uu(d,k);})(c,n)}catch(a){if(a instanceof uu)return a;throw a;}},findNodeAt:function(c,h,f,m,n,a){n||(n=ue);m=hC(m);try{(function l(k,b,e){e=e||k.type;if((null==h||k.start<=h)&&(null==f||k.end>=f))n[e](k,b,l);if(!(null!=h&&k.start!==h||null!=f&&k.end!==f)&&m(e,k))throw new uu(k,b);})(c,a)}catch(d){if(d instanceof uu)return d;throw d;}},findNodeBefore:function(c,h,f,m,n){f=hC(f);m||(m=ue);var a;(function l(k,
b,e){k.start>h||(e=e||k.type,k.end<=h&&(!a||a.node.end<k.end)&&f(e,k)&&(a=new uu(k,b)),m[e](k,b,l))})(c,n);return a},full:function(c,h,f,m,n){f||(f=ue);var a;(function l(k,b,e){e=e||k.type;f[e](k,b,l);a!==k&&(h(k,b,e),a=k)})(c,m,n)},fullAncestor:function(c,h,f,m){f||(f=ue);var n=[],a;(function l(k,b,e){e=e||k.type;var p=k!==n[n.length-1];p&&n.push(k);f[e](k,b,l);a!==k&&(h(k,b||n,n,e),a=k);p&&n.pop()})(c,m)},make:qS,recursive:function(c,h,f,m,n){var a=f?qS(f,m||void 0):m;(function l(k,b,e){a[e||k.type](k,
b,l)})(c,h,n)},simple:function(c,h,f,m,n){f||(f=ue);(function e(d,k,b){b=b||d.type;var l=h[b];f[b](d,k,e);l&&l(d,k)})(c,m,n)}}),gP={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},
Hda={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},
Ida=/^in(stanceof)?$/,hP="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
X0="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
O6=new RegExp("["+hP+"]"),P6=new RegExp("["+hP+X0+"]");hP=X0=null;var rS=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,
2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,
3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],Q6=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,
2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,
787719,239],ci=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},yn={beforeExpr:!0},lm={startsExpr:!0},lK={},Ua={num:new ci("num",lm),regexp:new ci("regexp",lm),string:new ci("string",lm),name:new ci("name",lm),privateId:new ci("privateId",lm),eof:new ci("eof"),bracketL:new ci("[",
{beforeExpr:!0,startsExpr:!0}),bracketR:new ci("]"),braceL:new ci("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ci("}"),parenL:new ci("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ci(")"),comma:new ci(",",yn),semi:new ci(";",yn),colon:new ci(":",yn),dot:new ci("."),question:new ci("?",yn),questionDot:new ci("?."),arrow:new ci("=>",yn),template:new ci("template"),invalidTemplate:new ci("invalidTemplate"),ellipsis:new ci("...",yn),backQuote:new ci("`",lm),dollarBraceL:new ci("${",{beforeExpr:!0,startsExpr:!0}),
eq:new ci("=",{beforeExpr:!0,isAssign:!0}),assign:new ci("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ci("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ci("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Zm("||",1),logicalAND:Zm("&&",2),bitwiseOR:Zm("|",3),bitwiseXOR:Zm("^",4),bitwiseAND:Zm("&",5),equality:Zm("==/!=/===/!==",6),relational:Zm("</>/<=/>=",7),bitShift:Zm("<</>>/>>>",8),plusMin:new ci("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Zm("%",10),star:Zm("*",
10),slash:Zm("/",10),starstar:new ci("**",{beforeExpr:!0}),coalesce:Zm("??",1),_break:Qh("break"),_case:Qh("case",yn),_catch:Qh("catch"),_continue:Qh("continue"),_debugger:Qh("debugger"),_default:Qh("default",yn),_do:Qh("do",{isLoop:!0,beforeExpr:!0}),_else:Qh("else",yn),_finally:Qh("finally"),_for:Qh("for",{isLoop:!0}),_function:Qh("function",lm),_if:Qh("if"),_return:Qh("return",yn),_switch:Qh("switch"),_throw:Qh("throw",yn),_try:Qh("try"),_var:Qh("var"),_const:Qh("const"),_while:Qh("while",{isLoop:!0}),
_with:Qh("with"),_new:Qh("new",{beforeExpr:!0,startsExpr:!0}),_this:Qh("this",lm),_super:Qh("super",lm),_class:Qh("class",lm),_extends:Qh("extends",yn),_export:Qh("export"),_import:Qh("import",lm),_null:Qh("null",lm),_true:Qh("true",lm),_false:Qh("false",lm),_in:Qh("in",{beforeExpr:!0,binop:7}),_instanceof:Qh("instanceof",{beforeExpr:!0,binop:7}),_typeof:Qh("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Qh("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Qh("delete",{beforeExpr:!0,
prefix:!0,startsExpr:!0})},Mm=/\r\n?|\n|\u2028|\u2029/,ut=new RegExp(Mm.source,"g"),Y0=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,zn=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Z0=Object.prototype,xy=Z0.hasOwnProperty,Jda=Z0.toString,tS=Array.isArray||function(c){return"[object Array]"===Jda.call(c)},wy=function(c,h){this.line=c;this.column=h};wy.prototype.offset=function(c){return new wy(this.line,this.column+c)};var Zv=function(c,h,f){this.start=h;this.end=f;null!==c.sourceFile&&(this.source=c.sourceFile)},
iC={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},sS=!1,ok=function(c,h,f){this.options=c=R6(c);this.sourceFile=c.sourceFile;this.keywords=tt(Hda[6<=c.ecmaVersion?6:"module"===c.sourceType?
"5module":5]);var m="";!0!==c.allowReserved&&(m=gP[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===c.sourceType&&(m+=" await"));this.reservedWords=tt(m);m=(m?m+" ":"")+gP.strict;this.reservedWordsStrict=tt(m);this.reservedWordsStrictBind=tt(m+" "+gP.strictBind);this.input=String(h);this.containsEsc=!1;f?(this.pos=f,this.lineStart=this.input.lastIndexOf("\n",f-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Mm).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Ua.eof;this.value=
null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.potentialArrowInForAwait=!1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports=Object.create(null);0===this.pos&&c.allowHashBang&&
"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null;this.privateNameStack=[]},Fq={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};ok.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};
Fq.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Fq.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)&&!this.currentVarScope().inClassFieldInit};Fq.inAsync.get=function(){return 0<(this.currentVarScope().flags&4)&&!this.currentVarScope().inClassFieldInit};Fq.canAwait.get=function(){for(var c=this.scopeStack.length-1;0<=c;c--){var h=this.scopeStack[c];if(h.inClassFieldInit)return!1;if(h.flags&2)return 0<(h.flags&4)}return this.inModule&&13<=this.options.ecmaVersion||
this.options.allowAwaitOutsideFunction};Fq.allowSuper.get=function(){var c=this.currentThisScope(),h=c.inClassFieldInit;return 0<(c.flags&64)||h||this.options.allowSuperOutsideMethod};Fq.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Fq.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Fq.inNonArrowFunction.get=function(){var c=this.currentThisScope(),h=c.inClassFieldInit;return 0<(c.flags&2)||h};ok.extend=function(){for(var c=
[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};ok.parse=function(c,h){return(new this(h,c)).parse()};ok.parseExpressionAt=function(c,h,f){c=new this(f,c,h);c.nextToken();return c.parseExpression()};ok.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(ok.prototype,Fq);var Ll=ok.prototype,Kda=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Ll.strictDirective=function(c){for(;;){zn.lastIndex=c;c+=zn.exec(this.input)[0].length;var h=
Kda.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){zn.lastIndex=c+h[0].length;c=zn.exec(this.input);h=c.index+c[0].length;var f=this.input.charAt(h);return";"===f||"}"===f||Mm.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(f)||"!"===f&&"="===this.input.charAt(h+1))}c+=h[0].length;zn.lastIndex=c;c+=zn.exec(this.input)[0].length;";"===this.input[c]&&c++}};Ll.eat=function(c){return this.type===c?(this.next(),!0):!1};Ll.isContextual=function(c){return this.type===Ua.name&&this.value===
c&&!this.containsEsc};Ll.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Ll.expectContextual=function(c){this.eatContextual(c)||this.unexpected()};Ll.canInsertSemicolon=function(){return this.type===Ua.eof||this.type===Ua.braceR||Mm.test(this.input.slice(this.lastTokEnd,this.start))};Ll.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Ll.semicolon=
function(){this.eat(Ua.semi)||this.insertSemicolon()||this.unexpected()};Ll.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc);h||this.next();return!0}};Ll.expect=function(c){this.eat(c)||this.unexpected()};Ll.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Ll.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),
c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Ll.checkExpressionErrors=function(c,h){if(!c)return!1;var f=c.shorthandAssign;c=c.doubleProto;if(!h)return 0<=f||0<=c;0<=f&&this.raise(f,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Ll.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,
"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Ll.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var Cg=ok.prototype;Cg.parseTopLevel=function(c){var h=Object.create(null);c.body||(c.body=[]);for(;this.type!==Ua.eof;){var f=this.parseStatement(null,!0,h);c.body.push(f)}if(this.inModule)for(h=0,f=
Object.keys(this.undefinedExports);h<f.length;h+=1){var m=f[h];this.raiseRecoverable(this.undefinedExports[m].start,"Export '"+m+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};var iP={kind:"loop"},Lda={kind:"switch"};Cg.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;zn.lastIndex=this.pos;var h=zn.exec(this.input);h=this.pos+h[0].length;var f=this.input.charCodeAt(h);
if(91===f||92===f||55295<f&&56320>f)return!0;if(c)return!1;if(123===f)return!0;if($p(f,!0)){for(c=h+1;Yv(f=this.input.charCodeAt(c),!0);)++c;if(92===f||55295<f&&56320>f)return!0;c=this.input.slice(h,c);if(!Ida.test(c))return!0}return!1};Cg.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;zn.lastIndex=this.pos;var c=zn.exec(this.input);c=this.pos+c[0].length;var h;return!Mm.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===
this.input.length||!(Yv(h=this.input.charCodeAt(c+8))||55295<h&&56320>h))};Cg.parseStatement=function(c,h,f){var m=this.type,n=this.startNode();if(this.isLet(c)){m=Ua._var;var a="let"}switch(m){case Ua._break:case Ua._continue:return this.parseBreakContinueStatement(n,m.keyword);case Ua._debugger:return this.parseDebuggerStatement(n);case Ua._do:return this.parseDoStatement(n);case Ua._for:return this.parseForStatement(n);case Ua._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&
this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Ua._class:return c&&this.unexpected(),this.parseClass(n,!0);case Ua._if:return this.parseIfStatement(n);case Ua._return:return this.parseReturnStatement(n);case Ua._switch:return this.parseSwitchStatement(n);case Ua._throw:return this.parseThrowStatement(n);case Ua._try:return this.parseTryStatement(n);case Ua._const:case Ua._var:return a=a||this.value,c&&"var"!==a&&this.unexpected(),this.parseVarStatement(n,a);case Ua._while:return this.parseWhileStatement(n);
case Ua._with:return this.parseWithStatement(n);case Ua.braceL:return this.parseBlock(!0,n);case Ua.semi:return this.parseEmptyStatement(n);case Ua._export:case Ua._import:if(10<this.options.ecmaVersion&&m===Ua._import&&(zn.lastIndex=this.pos,c=zn.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),
this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return m===Ua._import?this.parseImport(n):this.parseExport(n,f);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;f=this.parseExpression();return m===Ua.name&&"Identifier"===f.type&&this.eat(Ua.colon)?this.parseLabeledStatement(n,h,f,c):this.parseExpressionStatement(n,f)}};Cg.parseBreakContinueStatement=function(c,h){var f=
"break"===h;this.next();this.eat(Ua.semi)||this.insertSemicolon()?c.label=null:this.type!==Ua.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var m=0;m<this.labels.length;++m){var n=this.labels[m];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(f||"loop"===n.kind))break;if(c.label&&f)break}}m===this.labels.length&&this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,f?"BreakStatement":"ContinueStatement")};Cg.parseDebuggerStatement=function(c){this.next();
this.semicolon();return this.finishNode(c,"DebuggerStatement")};Cg.parseDoStatement=function(c){this.next();this.labels.push(iP);c.body=this.parseStatement("do");this.labels.pop();this.expect(Ua._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Ua.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};Cg.parseForStatement=function(c){this.next();var h=9<=this.options.ecmaVersion&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(iP);
this.enterScope(0);this.expect(Ua.parenL);if(this.type===Ua.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var f=this.isLet();if(this.type===Ua._var||this.type===Ua._const||f){var m=this.startNode();f=f?"let":this.value;this.next();this.parseVar(m,!0,f);this.finishNode(m,"VariableDeclaration");if((this.type===Ua._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===m.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Ua._in?-1<h&&this.unexpected(h):c.await=-1<
h),this.parseForIn(c,m);-1<h&&this.unexpected(h);return this.parseFor(c,m)}m=new jC;f=this.parseExpression(-1<h?"await":!0,m);if(this.type===Ua._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===Ua._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(f,!1,m),this.checkLValPattern(f),this.parseForIn(c,f);this.checkExpressionErrors(m,!0);-1<h&&this.unexpected(h);return this.parseFor(c,f)};Cg.parseFunctionStatement=function(c,h,f){this.next();
return this.parseFunction(c,CA|(f?0:jP),!1,h)};Cg.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Ua._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};Cg.parseReturnStatement=function(c){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Ua.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),
this.semicolon());return this.finishNode(c,"ReturnStatement")};Cg.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Ua.braceL);this.labels.push(Lda);this.enterScope(0);for(var h,f=!1;this.type!==Ua.braceR;)if(this.type===Ua._case||this.type===Ua._default){var m=this.type===Ua._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();m?h.test=this.parseExpression():(f&&this.raiseRecoverable(this.lastTokStart,
"Multiple default clauses"),f=!0,h.test=null);this.expect(Ua.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};Cg.parseThrowStatement=function(c){this.next();Mm.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,
"ThrowStatement")};var Mda=[];Cg.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Ua._catch){var h=this.startNode();this.next();if(this.eat(Ua.parenL)){h.param=this.parseBindingAtom();var f="Identifier"===h.param.type;this.enterScope(f?32:0);this.checkLValPattern(h.param,f?4:2);this.expect(Ua.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,
"CatchClause")}c.finalizer=this.eat(Ua._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};Cg.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,"VariableDeclaration")};Cg.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(iP);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,
"WhileStatement")};Cg.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};Cg.parseEmptyStatement=function(c){this.next();return this.finishNode(c,"EmptyStatement")};Cg.parseLabeledStatement=function(c,h,f,m){for(var n=0,a=this.labels;n<a.length;n+=1)a[n].name===h&&this.raise(f.start,"Label '"+h+"' is already declared");n=this.type.isLoop?
"loop":this.type===Ua._switch?"switch":null;for(a=this.labels.length-1;0<=a;a--){var d=this.labels[a];if(d.statementStart===c.start)d.statementStart=this.start,d.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(m?-1===m.indexOf("label")?m+"label":m:"label");this.labels.pop();c.label=f;return this.finishNode(c,"LabeledStatement")};Cg.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};
Cg.parseBlock=function(c,h,f){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(Ua.braceL);for(c&&this.enterScope(0);this.type!==Ua.braceR;){var m=this.parseStatement(null);h.body.push(m)}f&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};Cg.parseFor=function(c,h){c.init=h;this.expect(Ua.semi);c.test=this.type===Ua.semi?null:this.parseExpression();this.expect(Ua.semi);c.update=this.type===Ua.parenR?null:this.parseExpression();this.expect(Ua.parenR);
c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};Cg.parseForIn=function(c,h){var f=this.type===Ua._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!f||8>this.options.ecmaVersion||this.strict||"var"!==h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(f?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=f?this.parseExpression():this.parseMaybeAssign();
this.expect(Ua.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,f?"ForInStatement":"ForOfStatement")};Cg.parseVar=function(c,h,f){c.declarations=[];for(c.kind=f;;){var m=this.startNode();this.parseVarId(m,f);this.eat(Ua.eq)?m.init=this.parseMaybeAssign(h):"const"!==f||this.type===Ua._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===m.id.type||h&&(this.type===Ua._in||this.isContextual("of"))?m.init=null:this.raise(this.lastTokEnd,
"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(m,"VariableDeclarator"));if(!this.eat(Ua.comma))break}return c};Cg.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var CA=1,jP=2;Cg.parseFunction=function(c,h,f,m){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!m)this.type===Ua.star&&h&jP&&this.unexpected(),c.generator=this.eat(Ua.star);8<=this.options.ecmaVersion&&
(c.async=!!m);h&CA&&(c.id=h&4&&this.type!==Ua.name?null:this.parseIdent(),!c.id||h&jP||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));m=this.yieldPos;var n=this.awaitPos,a=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(c.async?4:0)|(c.generator?8:0));h&CA||(c.id=this.type===Ua.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,f,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=
a;return this.finishNode(c,h&CA?"FunctionDeclaration":"FunctionExpression")};Cg.parseFunctionParams=function(c){this.expect(Ua.parenL);c.params=this.parseBindingList(Ua.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};Cg.parseClass=function(c,h){this.next();var f=this.strict;this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var m=this.enterClassBody(),n=this.startNode(),a=!1;n.body=[];for(this.expect(Ua.braceL);this.type!==Ua.braceR;){var d=this.parseClassElement(null!==
c.superClass);if(d)if(n.body.push(d),"MethodDefinition"===d.type&&"constructor"===d.kind)a&&this.raise(d.start,"Duplicate constructor in the same class"),a=!0;else{var k;if(k="PrivateIdentifier"===d.key.type){k=m;var b=d.key.name,e=k[b],l="true";"MethodDefinition"!==d.type||"get"!==d.kind&&"set"!==d.kind||(l=(d.static?"s":"i")+d.kind);"iget"===e&&"iset"===l||"iset"===e&&"iget"===l||"sget"===e&&"sset"===l||"sset"===e&&"sget"===l?(k[b]="true",k=!1):e?k=!0:(k[b]=l,k=!1)}k&&this.raiseRecoverable(d.key.start,
"Identifier '#"+d.key.name+"' has already been declared")}}this.strict=f;this.next();c.body=this.finishNode(n,"ClassBody");this.exitClassBody();return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};Cg.parseClassElement=function(c){if(this.eat(Ua.semi))return null;var h=this.options.ecmaVersion,f=this.startNode(),m="",n=!1,a=!1,d="method";f.static=!1;this.eatContextual("static")&&(this.isClassElementNameStart()||this.type===Ua.star?f.static=!0:m="static");!m&&8<=h&&this.eatContextual("async")&&
(!this.isClassElementNameStart()&&this.type!==Ua.star||this.canInsertSemicolon()?m="async":a=!0);!m&&(9<=h||!a)&&this.eat(Ua.star)&&(n=!0);if(!m&&!a&&!n){var k=this.value;if(this.eatContextual("get")||this.eatContextual("set"))this.isClassElementNameStart()?d=k:m=k}m?(f.computed=!1,f.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),f.key.name=m,this.finishNode(f.key,"Identifier")):this.parseClassElementName(f);13>h||this.type===Ua.parenL||"method"!==d||n||a?(c=(h=!f.static&&kC(f,"constructor"))&&
c,h&&"method"!==d&&this.raise(f.key.start,"Constructor can't have get/set modifier"),f.kind=h?"constructor":d,this.parseClassMethod(f,n,a,c)):this.parseClassField(f);return f};Cg.isClassElementNameStart=function(){return this.type===Ua.name||this.type===Ua.privateId||this.type===Ua.num||this.type===Ua.string||this.type===Ua.bracketL||this.type.keyword};Cg.parseClassElementName=function(c){this.type===Ua.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),
c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)};Cg.parseClassMethod=function(c,h,f,m){var n=c.key;"constructor"===c.kind?(h&&this.raise(n.start,"Constructor can't be a generator"),f&&this.raise(n.start,"Constructor can't be an async method")):c.static&&kC(c,"prototype")&&this.raise(n.start,"Classes may not have a static property named prototype");h=c.value=this.parseMethod(h,f,m);"get"===c.kind&&0!==h.params.length&&this.raiseRecoverable(h.start,"getter should have no params");
"set"===c.kind&&1!==h.params.length&&this.raiseRecoverable(h.start,"setter should have exactly one param");"set"===c.kind&&"RestElement"===h.params[0].type&&this.raiseRecoverable(h.params[0].start,"Setter cannot use rest params");return this.finishNode(c,"MethodDefinition")};Cg.parseClassField=function(c){kC(c,"constructor")?this.raise(c.key.start,"Classes can't have a field named 'constructor'"):c.static&&kC(c,"prototype")&&this.raise(c.key.start,"Classes can't have a static field named 'prototype'");
if(this.eat(Ua.eq)){var h=this.currentThisScope(),f=h.inClassFieldInit;h.inClassFieldInit=!0;c.value=this.parseMaybeAssign();h.inClassFieldInit=f}else c.value=null;this.semicolon();return this.finishNode(c,"PropertyDefinition")};Cg.parseClassId=function(c,h){this.type===Ua.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};Cg.parseClassSuper=function(c){c.superClass=this.eat(Ua._extends)?this.parseExprSubscripts():null};Cg.enterClassBody=function(){var c=
{declared:Object.create(null),used:[]};this.privateNameStack.push(c);return c.declared};Cg.exitClassBody=function(){var c=this.privateNameStack.pop(),h=c.declared;c=c.used;var f=this.privateNameStack.length;f=0===f?null:this.privateNameStack[f-1];for(var m=0;m<c.length;++m){var n=c[m];xy.call(h,n.name)||(f?f.used.push(n):this.raiseRecoverable(n.start,"Private field '#"+n.name+"' must be declared in an enclosing class"))}};Cg.parseExport=function(c,h){this.next();if(this.eat(Ua.star))return 11<=this.options.ecmaVersion&&
(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Ua.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ua._default)){this.checkExport(h,"default",this.lastTokStart);var f;this.type===Ua._function||(f=this.isAsyncFunction())?(h=this.startNode(),this.next(),f&&this.next(),c.declaration=this.parseFunction(h,
CA|4,!1,f)):this.type===Ua._class?(f=this.startNode(),c.declaration=this.parseClass(f,"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;
c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==Ua.string&&this.unexpected(),c.source=this.parseExprAtom();else{f=0;for(h=c.specifiers;f<h.length;f+=1){var m=h[f];this.checkUnreserved(m.local);this.checkLocalExport(m.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};Cg.checkExport=function(c,h,f){c&&(xy.call(c,h)&&this.raiseRecoverable(f,"Duplicate export '"+h+"'"),c[h]=!0)};Cg.checkPatternExport=function(c,h){var f=h.type;
if("Identifier"===f)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===f)for(f=0,h=h.properties;f<h.length;f+=1)this.checkPatternExport(c,h[f]);else if("ArrayPattern"===f)for(f=0,h=h.elements;f<h.length;f+=1){var m=h[f];m&&this.checkPatternExport(c,m)}else"Property"===f?this.checkPatternExport(c,h.value):"AssignmentPattern"===f?this.checkPatternExport(c,h.left):"RestElement"===f?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===f&&this.checkPatternExport(c,h.expression)};
Cg.checkVariableExport=function(c,h){if(c)for(var f=0;f<h.length;f+=1)this.checkPatternExport(c,h[f].id)};Cg.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};Cg.parseExportSpecifiers=function(c){var h=[],f=!0;for(this.expect(Ua.braceL);!this.eat(Ua.braceR);){if(f)f=!1;else if(this.expect(Ua.comma),this.afterTrailingComma(Ua.braceR))break;var m=this.startNode();
m.local=this.parseIdent(!0);m.exported=this.eatContextual("as")?this.parseIdent(!0):m.local;this.checkExport(c,m.exported.name,m.exported.start);h.push(this.finishNode(m,"ExportSpecifier"))}return h};Cg.parseImport=function(c){this.next();this.type===Ua.string?(c.specifiers=Mda,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Ua.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};
Cg.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===Ua.name){var f=this.startNode();f.local=this.parseIdent();this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportDefaultSpecifier"));if(!this.eat(Ua.comma))return c}if(this.type===Ua.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(Ua.braceL);!this.eat(Ua.braceR);){if(h)h=!1;
else if(this.expect(Ua.comma),this.afterTrailingComma(Ua.braceR))break;f=this.startNode();f.imported=this.parseIdent(!0);this.eatContextual("as")?f.local=this.parseIdent():(this.checkUnreserved(f.imported),f.local=f.imported);this.checkLValSimple(f.local,2);c.push(this.finishNode(f,"ImportSpecifier"))}return c};Cg.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};Cg.isDirectiveCandidate=function(c){return"ExpressionStatement"===
c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&('"'===this.input[c.start]||"'"===this.input[c.start])};var to=ok.prototype;to.toAssignable=function(c,h,f){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";
f&&this.checkPatternErrors(f,!0);f=0;for(var m=c.properties;f<m.length;f+=1){var n=m[f];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";f&&this.checkPatternErrors(f,!0);this.toAssignableList(c.elements,
h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,f);break;case "ChainExpression":this.raiseRecoverable(c.start,
"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else f&&this.checkPatternErrors(f,!0);return c};to.toAssignableList=function(c,h){for(var f=c.length,m=0;m<f;m++){var n=c[m];n&&this.toAssignable(n,h)}f&&(f=c[f-1],6===this.options.ecmaVersion&&h&&f&&"RestElement"===f.type&&"Identifier"!==f.argument.type&&this.unexpected(f.argument.start));return c};to.parseSpread=function(c){var h=this.startNode();this.next();
h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,"SpreadElement")};to.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Ua.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};to.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Ua.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Ua.bracketR,!0,!0);return this.finishNode(c,
"ArrayPattern");case Ua.braceL:return this.parseObj(!0)}return this.parseIdent()};to.parseBindingList=function(c,h,f){for(var m=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Ua.comma),h&&this.type===Ua.comma)m.push(null);else if(f&&this.afterTrailingComma(c))break;else if(this.type===Ua.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);m.push(h);this.type===Ua.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var a=this.parseMaybeDefault(this.start,
this.startLoc);this.parseBindingListItem(a);m.push(a)}return m};to.parseBindingListItem=function(c){return c};to.parseMaybeDefault=function(c,h,f){f=f||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Ua.eq))return f;c=this.startNodeAt(c,h);c.left=f;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};to.checkLValSimple=function(c,h,f){void 0===h&&(h=0);var m=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,
(m?"Binding ":"Assigning to ")+c.name+" in strict mode");m&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),f&&(xy.call(f,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),f[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":m&&this.raiseRecoverable(c.start,"Binding member expression");break;
case "ParenthesizedExpression":return m&&this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,f);default:this.raise(c.start,(m?"Binding":"Assigning to")+" rvalue")}};to.checkLValPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var m=0;for(c=c.properties;m<c.length;m+=1)this.checkLValInnerPattern(c[m],h,f);break;case "ArrayPattern":m=0;for(c=c.elements;m<c.length;m+=1){var n=c[m];n&&this.checkLValInnerPattern(n,h,f)}break;
default:this.checkLValSimple(c,h,f)}};to.checkLValInnerPattern=function(c,h,f){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,f);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,f);break;case "RestElement":this.checkLValPattern(c.argument,h,f);break;default:this.checkLValPattern(c,h,f)}};var nh=ok.prototype;nh.checkPropClash=function(c,h,f){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||
c.shorthand))){var m=c.key;switch(m.type){case "Identifier":var n=m.name;break;case "Literal":n=String(m.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(f?0>f.doubleProto&&(f.doubleProto=m.start):this.raiseRecoverable(m.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(f=h[n])?("init"===c?this.strict&&f.init||f.get||f.set:f.init||f[c])&&this.raiseRecoverable(m.start,"Redefinition of property"):f=h[n]={init:!1,get:!1,set:!1},
f[c]=!0)}};nh.parseExpression=function(c,h){var f=this.start,m=this.startLoc,n=this.parseMaybeAssign(c,h);if(this.type===Ua.comma){f=this.startNodeAt(f,m);for(f.expressions=[n];this.eat(Ua.comma);)f.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(f,"SequenceExpression")}return n};nh.parseMaybeAssign=function(c,h,f){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var m=!1,n=-1,a=-1;h?(n=h.parenthesizedAssign,a=h.trailingComma,h.parenthesizedAssign=
h.trailingComma=-1):(h=new jC,m=!0);var d=this.start,k=this.startLoc;if(this.type===Ua.parenL||this.type===Ua.name)this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===c;var b=this.parseMaybeConditional(c,h);f&&(b=f.call(this,b,d,k));if(this.type.isAssign)return f=this.startNodeAt(d,k),f.operator=this.value,this.type===Ua.eq&&(b=this.toAssignable(b,!1,h)),m||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=b.start&&(h.shorthandAssign=-1),this.type===
Ua.eq?this.checkLValPattern(b):this.checkLValSimple(b),f.left=b,this.next(),f.right=this.parseMaybeAssign(c),this.finishNode(f,"AssignmentExpression");m&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<a&&(h.trailingComma=a);return b};nh.parseMaybeConditional=function(c,h){var f=this.start,m=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(Ua.question)?(h=this.startNodeAt(f,m),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(Ua.colon),
h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};nh.parseExprOps=function(c,h){var f=this.start,m=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===f&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,f,m,-1,c)};nh.parseExprOp=function(c,h,f,m,n){var a=this.type.binop;if(null!=a&&(!n||this.type!==Ua._in)&&a>m){var d=this.type===Ua.logicalOR||this.type===Ua.logicalAND,k=this.type===Ua.coalesce;k&&(a=Ua.logicalAND.binop);
var b=this.value;this.next();var e=this.start,l=this.startLoc;a=this.parseExprOp(this.parseMaybeUnary(null,!1),e,l,a,n);c=this.buildBinary(h,f,c,a,b,d||k);(d&&this.type===Ua.coalesce||k&&(this.type===Ua.logicalOR||this.type===Ua.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,f,m,n)}return c};nh.buildBinary=function(c,h,f,m,n,a){c=this.startNodeAt(c,h);c.left=f;c.operator=n;c.right=
m;return this.finishNode(c,a?"LogicalExpression":"BinaryExpression")};nh.parseMaybeUnary=function(c,h,f){var m=this.start,n=this.startLoc;if(this.isContextual("await")&&this.canAwait){var a=this.parseAwait();h=!0}else if(this.type.prefix){a=this.startNode();var d=this.type===Ua.incDec;a.operator=this.value;a.prefix=!0;this.next();a.argument=this.parseMaybeUnary(null,!0,d);this.checkExpressionErrors(c,!0);d?this.checkLValSimple(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?
this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):"delete"===a.operator&&uS(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):h=!0;a=this.finishNode(a,d?"UpdateExpression":"UnaryExpression")}else{a=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return a;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(m,n),c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}if(!f&&
this.eat(Ua.starstar))if(h)this.unexpected(this.lastTokStart);else return this.buildBinary(m,n,a,this.parseMaybeUnary(null,!1),"**",!1);else return a};nh.parseExprSubscripts=function(c){var h=this.start,f=this.startLoc,m=this.parseExprAtom(c);if("ArrowFunctionExpression"===m.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return m;h=this.parseSubscripts(m,h,f);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&
(c.parenthesizedBind=-1),c.trailingComma>=h.start&&(c.trailingComma=-1));return h};nh.parseSubscripts=function(c,h,f,m){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,a=!1;;){var d=this.parseSubscript(c,h,f,m,n,a);d.optional&&(a=!0);if(d===c||"ArrowFunctionExpression"===d.type)return a&&(c=this.startNodeAt(h,f),c.expression=d,d=this.finishNode(c,"ChainExpression")),
d;c=d}};nh.parseSubscript=function(c,h,f,m,n,a){var d=11<=this.options.ecmaVersion,k=d&&this.eat(Ua.questionDot);m&&k&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var b=this.eat(Ua.bracketL);if(b||k&&this.type!==Ua.parenL&&this.type!==Ua.backQuote||this.eat(Ua.dot))h=this.startNodeAt(h,f),h.object=c,b?(h.property=this.parseExpression(),this.expect(Ua.bracketR)):h.property=this.type===Ua.privateId&&"Super"!==c.type?this.parsePrivateIdent():this.parseIdent("never"!==
this.options.allowReserved),h.computed=!!b,d&&(h.optional=k),c=this.finishNode(h,"MemberExpression");else if(!m&&this.eat(Ua.parenL)){m=new jC;a=this.yieldPos;var e=this.awaitPos,l=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;b=this.parseExprList(Ua.parenR,8<=this.options.ecmaVersion,!1,m);if(n&&!k&&!this.canInsertSemicolon()&&this.eat(Ua.arrow))return this.checkPatternErrors(m,!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),
this.yieldPos=a,this.awaitPos=e,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(h,f),b,!0);this.checkExpressionErrors(m,!0);this.yieldPos=a||this.yieldPos;this.awaitPos=e||this.awaitPos;this.awaitIdentPos=l||this.awaitIdentPos;h=this.startNodeAt(h,f);h.callee=c;h.arguments=b;d&&(h.optional=k);c=this.finishNode(h,"CallExpression")}else this.type===Ua.backQuote&&((k||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),d=this.startNodeAt(h,
f),d.tag=c,d.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(d,"TaggedTemplateExpression"));return c};nh.parseExprAtom=function(c){this.type===Ua.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case Ua._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),this.type!==Ua.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==Ua.dot&&
this.type!==Ua.bracketL&&this.type!==Ua.parenL&&this.unexpected(),this.finishNode(h,"Super");case Ua._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case Ua.name:c=this.start;var f=this.startLoc,m=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!m&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Ua._function))return this.parseFunction(this.startNodeAt(c,f),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(Ua.arrow))return this.parseArrowExpression(this.startNodeAt(c,
f),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Ua.name&&!m&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ua.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,f),[n],!0)}return n;case Ua.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case Ua.num:case Ua.string:return this.parseLiteral(this.value);case Ua._null:case Ua._true:case Ua._false:return h=
this.startNode(),h.value=this.type===Ua._null?null:this.type===Ua._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case Ua.parenL:return f=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=f),0>c.parenthesizedBind&&(c.parenthesizedBind=f)),h;case Ua.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(Ua.bracketR,!0,!0,c),this.finishNode(h,"ArrayExpression");case Ua.braceL:return this.parseObj(!1,
c);case Ua._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case Ua._class:return this.parseClass(this.startNode(),!1);case Ua._new:return this.parseNew();case Ua.backQuote:return this.parseTemplate();case Ua._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};nh.parseExprImport=function(){var c=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);
switch(this.type){case Ua.parenL:return this.parseDynamicImport(c);case Ua.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};nh.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Ua.parenR)){var h=this.start;this.eat(Ua.comma)&&this.eat(Ua.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,"ImportExpression")};nh.parseImportMeta=function(c){this.next();var h=this.containsEsc;
c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};nh.parseLiteral=function(c){var h=this.startNode();h.value=c;h.raw=
this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};nh.parseParenExpression=function(){this.expect(Ua.parenL);var c=this.parseExpression();this.expect(Ua.parenR);return c};nh.parseParenAndDistinguishExpression=function(c){var h=this.start,f=this.startLoc,m=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,a=this.startLoc,d=[],k=!0,b=!1,e=new jC,
l=this.yieldPos,p=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Ua.parenR;)if(k?k=!1:this.expect(Ua.comma),m&&this.afterTrailingComma(Ua.parenR,!0)){b=!0;break}else if(this.type===Ua.ellipsis){var q=this.start;d.push(this.parseParenItem(this.parseRestBinding()));this.type===Ua.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,e,this.parseParenItem));m=this.start;k=this.startLoc;this.expect(Ua.parenR);if(c&&!this.canInsertSemicolon()&&
this.eat(Ua.arrow))return this.checkPatternErrors(e,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=p,this.parseParenArrowList(h,f,d);d.length&&!b||this.unexpected(this.lastTokStart);q&&this.unexpected(q);this.checkExpressionErrors(e,!0);this.yieldPos=l||this.yieldPos;this.awaitPos=p||this.awaitPos;1<d.length?(c=this.startNodeAt(n,a),c.expressions=d,this.finishNodeAt(c,"SequenceExpression",m,k)):c=d[0]}else c=this.parseParenExpression();return this.options.preserveParens?(h=
this.startNodeAt(h,f),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};nh.parseParenItem=function(c){return c};nh.parseParenArrowList=function(c,h,f){return this.parseArrowExpression(this.startNodeAt(c,h),f)};var Nda=[];nh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ua.dot))return c.meta=h,h=this.containsEsc,c.property=this.parseIdent(!0),
"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var f=this.startLoc,m=this.type===Ua._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,f,!0);m&&"ImportExpression"===c.callee.type&&this.raise(h,
"Cannot use new with import()");this.eat(Ua.parenL)?c.arguments=this.parseExprList(Ua.parenR,8<=this.options.ecmaVersion,!1):c.arguments=Nda;return this.finishNode(c,"NewExpression")};nh.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===Ua.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value};
this.next();h.tail=this.type===Ua.backQuote;return this.finishNode(h,"TemplateElement")};nh.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var f=this.parseTemplateElement({isTagged:c});for(h.quasis=[f];!f.tail;)this.type===Ua.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ua.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(Ua.braceR),h.quasis.push(f=this.parseTemplateElement({isTagged:c}));
this.next();return this.finishNode(h,"TemplateLiteral")};nh.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Ua.name||this.type===Ua.num||this.type===Ua.string||this.type===Ua.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Ua.star)&&!Mm.test(this.input.slice(this.lastTokEnd,this.start))};nh.parseObj=function(c,h){var f=this.startNode(),m=!0,n={};f.properties=[];for(this.next();!this.eat(Ua.braceR);){if(m)m=!1;else if(this.expect(Ua.comma),
5<=this.options.ecmaVersion&&this.afterTrailingComma(Ua.braceR))break;var a=this.parseProperty(c,h);c||this.checkPropClash(a,n,h);f.properties.push(a)}return this.finishNode(f,c?"ObjectPattern":"ObjectExpression")};nh.parseProperty=function(c,h){var f=this.startNode(),m;if(9<=this.options.ecmaVersion&&this.eat(Ua.ellipsis)){if(c)return f.argument=this.parseIdent(!1),this.type===Ua.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(f,"RestElement");this.type===
Ua.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));f.argument=this.parseMaybeAssign(!1,h);this.type===Ua.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(f,"SpreadElement")}if(6<=this.options.ecmaVersion){f.method=!1;f.shorthand=!1;if(c||h){var n=this.start;var a=this.startLoc}c||(m=this.eat(Ua.star))}var d=this.containsEsc;this.parsePropertyName(f);if(!c&&!d&&8<=this.options.ecmaVersion&&
!m&&this.isAsyncProp(f)){var k=!0;m=9<=this.options.ecmaVersion&&this.eat(Ua.star);this.parsePropertyName(f,h)}else k=!1;this.parsePropertyValue(f,c,m,k,n,a,h,d);return this.finishNode(f,"Property")};nh.parsePropertyValue=function(c,h,f,m,n,a,d,k){(f||m)&&this.type===Ua.colon&&this.unexpected();this.eat(Ua.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Ua.parenL?(h&&this.unexpected(),c.kind="init",
c.method=!0,c.value=this.parseMethod(f,m)):h||k||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Ua.comma||this.type===Ua.braceR||this.type===Ua.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((f||m)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key)):this.type===Ua.eq&&
d?(0>d.shorthandAssign&&(d.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,a,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((f||m)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===c.kind&&"RestElement"===
c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};nh.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ua.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Ua.bracketR),c.key;c.computed=!1}return c.key=this.type===Ua.num||this.type===Ua.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};nh.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&(c.generator=
c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};nh.parseMethod=function(c,h,f){var m=this.startNode(),n=this.yieldPos,a=this.awaitPos,d=this.awaitIdentPos;this.initFunction(m);6<=this.options.ecmaVersion&&(m.generator=c);8<=this.options.ecmaVersion&&(m.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(m.generator?8:0)|64|(f?128:0));this.expect(Ua.parenL);m.params=this.parseBindingList(Ua.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(m,!1,!0);this.yieldPos=n;this.awaitPos=a;this.awaitIdentPos=d;return this.finishNode(m,"FunctionExpression")};nh.parseArrowExpression=function(c,h,f){var m=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;this.enterScope((f?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=m;this.awaitPos=n;this.awaitIdentPos=a;return this.finishNode(c,
"ArrowFunctionExpression")};nh.parseFunctionBody=function(c,h,f){var m=this.strict,n=!1;if(h&&this.type!==Ua.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var a=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!m||a)&&(n=this.strictDirective(this.end))&&a&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");a=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!m&&!n&&!h&&!f&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!m);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=a}this.exitScope()};nh.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};nh.checkParams=function(c,h){var f=Object.create(null),m=0;for(c=c.params;m<c.length;m+=1)this.checkLValInnerPattern(c[m],1,h?null:f)};nh.parseExprList=function(c,h,f,m){for(var n=[],a=!0;!this.eat(c);){if(a)a=!1;else if(this.expect(Ua.comma),
h&&this.afterTrailingComma(c))break;if(f&&this.type===Ua.comma)var d=null;else this.type===Ua.ellipsis?(d=this.parseSpread(m),m&&this.type===Ua.comma&&0>m.trailingComma&&(m.trailingComma=this.start)):d=this.parseMaybeAssign(!1,m);n.push(d)}return n};nh.checkUnreserved=function(c){var h=c.start,f=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.currentThisScope().inClassFieldInit&&"arguments"===c&&this.raiseRecoverable(h,"Cannot use 'arguments' in class field initializer");this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,f).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};
nh.parseIdent=function(c,h){h=this.startNode();this.type===Ua.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};nh.parsePrivateIdent=function(){var c=this.startNode();this.type===
Ua.privateId?c.name=this.value:this.unexpected();this.next();this.finishNode(c,"PrivateIdentifier");0===this.privateNameStack.length?this.raise(c.start,"Private field '#"+c.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(c);return c};nh.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===Ua.semi||this.canInsertSemicolon()||this.type!==Ua.star&&!this.type.startsExpr?(h.delegate=
!1,h.argument=null):(h.delegate=this.eat(Ua.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};nh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var nH=ok.prototype;nH.raise=function(c,h){var f=vy(this.input,c);h+=" ("+f.line+":"+f.column+")";h=new SyntaxError(h);h.pos=c;h.loc=f;h.raisedAt=this.pos;throw h;};nH.raiseRecoverable=
nH.raise;nH.curPosition=function(){if(this.options.locations)return new wy(this.curLine,this.pos-this.lineStart)};var $r=ok.prototype,Oda=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[];this.inClassFieldInit=!1};$r.enterScope=function(c){this.scopeStack.push(new Oda(c))};$r.exitScope=function(){this.scopeStack.pop()};$r.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};$r.declareName=function(c,h,f){var m=!1;if(2===h)h=this.currentScope(),m=
-1<h.lexical.indexOf(c)||-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),m=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&
-1<n.functions.indexOf(c)){m=!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}m&&this.raiseRecoverable(f,"Identifier '"+c+"' has already been declared")};$r.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};$r.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};$r.currentVarScope=function(){for(var c=this.scopeStack.length-
1;;c--){var h=this.scopeStack[c];if(h.flags&3)return h}};$r.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var vu=function(c,h,f){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new Zv(c,f));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},DA=ok.prototype;DA.startNode=function(){return new vu(this,this.start,this.startLoc)};DA.startNodeAt=
function(c,h){return new vu(this,c,h)};DA.finishNode=function(c,h){return vS.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};DA.finishNodeAt=function(c,h,f,m){return vS.call(this,c,h,f,m)};DA.copyNode=function(c){var h=new vu(this,c.start,this.startLoc),f;for(f in c)h[f]=c[f];return h};var uo=function(c,h,f,m,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!f;this.override=m;this.generator=!!n},zj={b_stat:new uo("{",!1),b_expr:new uo("{",!0),b_tmpl:new uo("${",!1),p_stat:new uo("(",!1),p_expr:new uo("(",
!0),q_tmpl:new uo("`",!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new uo("function",!1),f_expr:new uo("function",!0),f_expr_gen:new uo("function",!0,!1,null,!0),f_gen:new uo("function",!1,!1,null,!0)},oH=ok.prototype;oH.initialContext=function(){return[zj.b_stat]};oH.braceIsBlock=function(c){var h=this.curContext();return h===zj.f_expr||h===zj.f_stat?!0:c!==Ua.colon||h!==zj.b_stat&&h!==zj.b_expr?c===Ua._return||c===Ua.name&&this.exprAllowed?Mm.test(this.input.slice(this.lastTokEnd,
this.start)):c===Ua._else||c===Ua.semi||c===Ua.eof||c===Ua.parenR||c===Ua.arrow?!0:c===Ua.braceL?h===zj.b_stat:c===Ua._var||c===Ua._const||c===Ua.name?!1:!this.exprAllowed:!h.isExpr};oH.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};oH.updateContext=function(c){var h,f=this.type;f.keyword&&c===Ua.dot?this.exprAllowed=!1:(h=f.updateContext)?h.call(this,c):this.exprAllowed=f.beforeExpr};Ua.parenR.updateContext=
Ua.braceR.updateContext=function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===zj.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Ua.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?zj.b_stat:zj.b_expr);this.exprAllowed=!0};Ua.dollarBraceL.updateContext=function(){this.context.push(zj.b_tmpl);this.exprAllowed=!0};Ua.parenL.updateContext=function(c){this.context.push(c===Ua._if||c===Ua._for||
c===Ua._with||c===Ua._while?zj.p_stat:zj.p_expr);this.exprAllowed=!0};Ua.incDec.updateContext=function(){};Ua._function.updateContext=Ua._class.updateContext=function(c){!c.beforeExpr||c===Ua._else||c===Ua.semi&&this.curContext()!==zj.p_stat||c===Ua._return&&Mm.test(this.input.slice(this.lastTokEnd,this.start))||(c===Ua.colon||c===Ua.braceL)&&this.curContext()===zj.b_stat?this.context.push(zj.f_stat):this.context.push(zj.f_expr);this.exprAllowed=!1};Ua.backQuote.updateContext=function(){this.curContext()===
zj.q_tmpl?this.context.pop():this.context.push(zj.q_tmpl);this.exprAllowed=!1};Ua.star.updateContext=function(c){c===Ua._function&&(c=this.context.length-1,this.context[c]=this.context[c]===zj.f_expr?zj.f_expr_gen:zj.f_gen);this.exprAllowed=!0};Ua.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==Ua.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var T6={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
U6={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
wS={};lC(9);lC(10);lC(11);lC(12);var Yf=ok.prototype,Gq=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"")+(13<=c.options.ecmaVersion?"d":"");this.unicodeProperties=wS[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=
[];this.backReferenceNames=[]};Gq.prototype.reset=function(c,h,f){var m=-1!==f.indexOf("u");this.start=c|0;this.source=h+"";this.flags=f;this.switchU=m&&6<=this.parser.options.ecmaVersion;this.switchN=m&&9<=this.parser.options.ecmaVersion};Gq.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Gq.prototype.at=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return-1;var n=f.charCodeAt(c);if(!h&&!this.switchU||
55295>=n||57344<=n||c+1>=m)return n;c=f.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Gq.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var f=this.source,m=f.length;if(c>=m)return m;var n=f.charCodeAt(c),a;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=m||56320>(a=f.charCodeAt(c+1))||57343<a?c+1:c+2};Gq.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Gq.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,
c),c)};Gq.prototype.advance=function(c){void 0===c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Gq.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};Yf.validateRegExpFlags=function(c){for(var h=c.validFlags,f=c.flags,m=0;m<f.length;m++){var n=f.charAt(m);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<f.indexOf(n,m+1)&&this.raise(c.start,"Duplicate regular expression flag")}};Yf.validateRegExpPattern=function(c){this.regexp_pattern(c);
!c.switchN&&9<=this.options.ecmaVersion&&0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};Yf.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");
for(var h=0,f=c.backReferenceNames;h<f.length;h+=1)-1===c.groupNames.indexOf(f[h])&&c.raise("Invalid named capture referenced")};Yf.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};Yf.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};Yf.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&
this.regexp_eatQuantifier(c)&&c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};Yf.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var f=!1;9<=this.options.ecmaVersion&&(f=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),
c.lastAssertionIsQuantifiable=!f,!0}c.pos=h;return!1};Yf.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};Yf.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};Yf.regexp_eatBracedQuantifier=function(c,h){var f=c.pos;if(c.eat(123)){var m=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(m=c.lastIntValue);if(c.eat(125))return-1!==
m&&m<n&&!h&&c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=f}return!1};Yf.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};Yf.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};Yf.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};Yf.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};Yf.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};Yf.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};Yf.regexp_eatSyntaxCharacter=function(c){var h=c.current();return xS(h)?(c.lastIntValue=h,c.advance(),!0):!1};Yf.regexp_eatPatternCharacters=function(c){for(var h=c.pos,f=0;-1!==(f=c.current())&&
!xS(f);)c.advance();return c.pos!==h};Yf.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};Yf.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};Yf.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};Yf.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=mC(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=mC(c.lastIntValue);return!0}return!1};Yf.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);
f=m;if($p(f,!0)||36===f||95===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Yf.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,f=11<=this.options.ecmaVersion,m=c.current(f);c.advance(f);92===m&&this.regexp_eatRegExpUnicodeEscapeSequence(c,f)&&(m=c.lastIntValue);f=m;if(Yv(f,!0)||36===f||95===f||8204===f||8205===f)return c.lastIntValue=m,!0;c.pos=h;return!1};Yf.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};Yf.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var f=c.lastIntValue;if(c.switchU)return f>c.maxBackReference&&(c.maxBackReference=f),!0;if(f<=c.numCapturingParens)return!0;c.pos=h}return!1};Yf.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};Yf.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};Yf.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};Yf.regexp_eatZero=
function(c){return 48!==c.current()||nC(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};Yf.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};Yf.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};Yf.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var f=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){f=c.lastIntValue;if(h&&55296<=f&&56319>=f){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var m=c.lastIntValue;if(56320<=m&&57343>=m)return c.lastIntValue=1024*(f-55296)+(m-56320)+65536,!0}c.pos=h;c.lastIntValue=f}return!0}if(m=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))m=c.lastIntValue,m=0<=m&&1114111>=m;
if(m)return!0;h&&c.raise("Invalid unicode escape");c.pos=f}return!1};Yf.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};Yf.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};Yf.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};Yf.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var f=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
f,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};Yf.regexp_validateUnicodePropertyNameAndValue=function(c,h,f){xy.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(f)||c.raise("Invalid property value")};Yf.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
Yf.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";yS(h=c.current());)c.lastStringValue+=mC(h),c.advance();return""!==c.lastStringValue};Yf.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";V6(h=c.current());)c.lastStringValue+=mC(h),c.advance();return""!==c.lastStringValue};Yf.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};Yf.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};Yf.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var f=c.lastIntValue;!c.switchU||-1!==h&&-1!==f||c.raise("Invalid character class");-1!==h&&-1!==f&&h>f&&c.raise("Range out of order in character class")}}};Yf.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var f=c.current();(99===
f||48<=f&&55>=f)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};Yf.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};Yf.regexp_eatClassControlLetter=function(c){var h=
c.current();return nC(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};Yf.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};Yf.regexp_eatDecimalDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;nC(f=c.current());)c.lastIntValue=10*c.lastIntValue+(f-48),c.advance();return c.pos!==h};Yf.regexp_eatHexDigits=function(c){var h=c.pos,f;for(c.lastIntValue=0;zS(f=c.current());)c.lastIntValue=
16*c.lastIntValue+AS(f),c.advance();return c.pos!==h};Yf.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var f=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*f+c.lastIntValue:c.lastIntValue=8*h+f}else c.lastIntValue=h;return!0}return!1};Yf.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};Yf.regexp_eatFixedHexDigits=
function(c,h){for(var f=c.pos,m=c.lastIntValue=0;m<h;++m){var n=c.current();if(!zS(n))return c.pos=f,!1;c.lastIntValue=16*c.lastIntValue+AS(n);c.advance()}return!0};var pH=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new Zv(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},Ah=ok.prototype;Ah.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new pH(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};Ah.getToken=function(){this.next();return new pH(this)};"undefined"!==typeof Symbol&&(Ah[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===Ua.eof,value:h}}}});Ah.curContext=function(){return this.context[this.context.length-1]};Ah.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Ua.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};Ah.readToken=function(c){return $p(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};Ah.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||56320<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return 56319>=h||57344<=h?c:(c<<10)+h-56613888};Ah.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,f=this.input.indexOf("*/",this.pos+=2);-1===f&&this.raise(this.pos-2,"Unterminated comment");this.pos=f+2;if(this.options.locations){ut.lastIndex=h;for(var m;(m=ut.exec(this.input))&&m.index<this.pos;)++this.curLine,this.lineStart=m.index+m[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+
2,f),h,this.pos,c,this.curPosition())};Ah.skipLineComment=function(c){for(var h=this.pos,f=this.options.onComment&&this.curPosition(),m=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!mr(m);)m=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,f,this.curPosition())};Ah.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;
case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&Y0.test(String.fromCharCode(c)))++this.pos;else break a}}};Ah.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());
var f=this.type;this.type=c;this.value=h;this.updateContext(f)};Ah.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(Ua.ellipsis);++this.pos;return this.finishToken(Ua.dot)};Ah.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Ua.assign,
2):this.finishOp(Ua.slash,1)};Ah.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),f=1,m=42===c?Ua.star:Ua.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++f,m=Ua.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(Ua.assign,f+1):this.finishOp(m,f)};Ah.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ua.assign,3):this.finishOp(124===
c?Ua.logicalOR:Ua.logicalAND,2):61===h?this.finishOp(Ua.assign,2):this.finishOp(124===c?Ua.bitwiseOR:Ua.bitwiseAND,1)};Ah.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ua.assign,2):this.finishOp(Ua.bitwiseXOR,1)};Ah.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Mm.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ua.incDec,
2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===h?this.finishOp(Ua.assign,2):this.finishOp(Ua.plusMin,1)};Ah.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),f=1;if(h===c)return f=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+f)?this.finishOp(Ua.assign,f+1):this.finishOp(Ua.bitShift,f);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),
this.skipSpace(),this.nextToken();61===h&&(f=2);return this.finishOp(Ua.relational,f)};Ah.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(Ua.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Ua.arrow)):this.finishOp(61===c?Ua.eq:Ua.prefix,1)};Ah.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var f=
this.input.charCodeAt(this.pos+2);if(48>f||57<f)return this.finishOp(Ua.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ua.assign,3):this.finishOp(Ua.coalesce,2)}return this.finishOp(Ua.question,1)};Ah.readToken_numberSign=function(){var c=35;if(13<=this.options.ecmaVersion&&(++this.pos,c=this.fullCharCodeAtPos(),$p(c,!0)||92===c))return this.finishToken(Ua.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+oC(c)+"'")};Ah.getTokenFromCode=
function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ua.parenL);case 41:return++this.pos,this.finishToken(Ua.parenR);case 59:return++this.pos,this.finishToken(Ua.semi);case 44:return++this.pos,this.finishToken(Ua.comma);case 91:return++this.pos,this.finishToken(Ua.bracketL);case 93:return++this.pos,this.finishToken(Ua.bracketR);case 123:return++this.pos,this.finishToken(Ua.braceL);case 125:return++this.pos,this.finishToken(Ua.braceR);case 58:return++this.pos,
this.finishToken(Ua.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Ua.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();
case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);case 63:return this.readToken_question();case 126:return this.finishOp(Ua.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+oC(c)+"'")};Ah.finishOp=function(c,h){var f=
this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,f)};Ah.readRegexp=function(){for(var c,h,f=this.pos;;){this.pos>=this.input.length&&this.raise(f,"Unterminated regular expression");var m=this.input.charAt(this.pos);Mm.test(m)&&this.raise(f,"Unterminated regular expression");if(c)c=!1;else{if("["===m)h=!0;else if("]"===m&&h)h=!1;else if("/"===m&&!h)break;c="\\"===m}++this.pos}c=this.input.slice(f,this.pos);++this.pos;m=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(m);
m=this.regexpState||(this.regexpState=new Gq(this));m.reset(f,c,h);this.validateRegExpFlags(m);this.validateRegExpPattern(m);f=null;try{f=new RegExp(c,h)}catch(n){}return this.finishToken(Ua.regexp,{pattern:c,flags:h,value:f})};Ah.readInt=function(c,h,f){var m=12<=this.options.ecmaVersion&&void 0===h;f=f&&48===this.input.charCodeAt(this.pos);for(var n=this.pos,a=0,d=0,k=0,b=null==h?Infinity:h;k<b;++k,++this.pos){var e=this.input.charCodeAt(this.pos);if(m&&95===e)f&&this.raiseRecoverable(this.pos,
"Numeric separator is not allowed in legacy octal numeric literals"),95===d&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===k&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),d=e;else{var l=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity;if(l>=c)break;d=e;a=a*c+l}}m&&95===d&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?
null:a};Ah.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var f=this.readInt(c);null==f&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(f=BS(this.input.slice(h,this.pos)),++this.pos):$p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(Ua.num,f)};Ah.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var f=
2<=this.pos-h&&48===this.input.charCodeAt(h);f&&this.strict&&this.raise(h,"Invalid number");var m=this.input.charCodeAt(this.pos);if(!f&&!c&&11<=this.options.ecmaVersion&&110===m)return f=BS(this.input.slice(h,this.pos)),++this.pos,$p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ua.num,f);f&&/[89]/.test(this.input.slice(h,this.pos))&&(f=!1);46!==m||f||(++this.pos,this.readInt(10),m=this.input.charCodeAt(this.pos));69!==m&&101!==m||f||(m=this.input.charCodeAt(++this.pos),
43!==m&&45!==m||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));$p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);f=f?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Ua.num,f)};Ah.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<
h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};Ah.readString=function(c){for(var h="",f=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var m=this.input.charCodeAt(this.pos);if(m===c)break;92===m?(h+=this.input.slice(f,this.pos),h+=this.readEscapedChar(!1),f=this.pos):(mr(m,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(f,this.pos++);
return this.finishToken(Ua.string,h)};var $0={};Ah.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===$0)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};Ah.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw $0;this.raise(c,h)};Ah.readTmplToken=function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var f=this.input.charCodeAt(this.pos);
if(96===f||36===f&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Ua.template||this.type===Ua.invalidTemplate)){if(36===f)return this.pos+=2,this.finishToken(Ua.dollarBraceL);++this.pos;return this.finishToken(Ua.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(Ua.template,c)}if(92===f)c+=this.input.slice(h,this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(mr(f)){c+=this.input.slice(h,this.pos);++this.pos;switch(f){case 13:10===this.input.charCodeAt(this.pos)&&
++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(f)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};Ah.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;case "`":return this.finishToken(Ua.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Ah.readEscapedChar=
function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return oC(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),
c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var f=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],m=parseInt(f,8);255<m&&(f=f.slice(0,-1),m=parseInt(f,8));this.pos+=f.length-1;h=this.input.charCodeAt(this.pos);"0"===f&&56!==h&&57!==h||!this.strict&&!c||this.invalidStringToken(this.pos-1-f.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(m)}return mr(h)?"":String.fromCharCode(h)}};
Ah.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};Ah.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,f=this.pos,m=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Yv(n,m))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(f,this.pos),f=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),
++this.pos,n=this.readCodePoint(),(h?$p:Yv)(n,m)||this.invalidStringToken(f,"Invalid Unicode escape"),c+=oC(n),f=this.pos;else break;h=!1}return c+this.input.slice(f,this.pos)};Ah.readWord=function(){var c=this.readWord1(),h=Ua.name;this.keywords.test(c)&&(h=lK[c]);return this.finishToken(h,c)};ok.acorn={Parser:ok,version:"8.4.1",defaultOptions:iC,Position:wy,SourceLocation:Zv,getLineInfo:vy,Node:vu,TokenType:ci,tokTypes:Ua,keywordTypes:lK,TokContext:uo,tokContexts:zj,isIdentifierChar:Yv,isIdentifierStart:$p,
Token:pH,isNewLine:mr,lineBreak:Mm,lineBreakG:ut,nonASCIIwhitespace:Y0};var Ei=function(c,h){void 0===h&&(h={});this.toks=this.constructor.BaseParser.tokenizer(c,h);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Ua.eof,start:0,end:0};this.tok.validateRegExpFlags=CS;this.tok.validateRegExpPattern=CS;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new Zv(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=0;this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.inFunction=this.inGenerator=this.inAsync=!1};Ei.prototype.startNode=function(){return new vu(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};Ei.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start};Ei.prototype.startNodeAt=function(c){return this.options.locations?new vu(this.toks,c[0],c[1]):new vu(this.toks,c)};Ei.prototype.finishNode=function(c,h){c.type=h;c.end=this.last.end;
this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};Ei.prototype.dummyNode=function(c){var h=this.startNode();h.type=c;h.end=h.start;this.options.locations&&(h.loc.end=h.loc.start);this.options.ranges&&(h.range[1]=h.start);this.last={type:Ua.name,start:h.start,end:h.start,loc:h.loc};return h};Ei.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};Ei.prototype.dummyString=function(){var c=this.dummyNode("Literal");
c.value=c.raw="\u2716";return c};Ei.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};Ei.prototype.isContextual=function(c){return this.tok.type===Ua.name&&this.tok.value===c};Ei.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Ua.name)};Ei.prototype.canInsertSemicolon=function(){return this.tok.type===Ua.eof||this.tok.type===Ua.braceR||Mm.test(this.input.slice(this.last.end,this.tok.start))};Ei.prototype.semicolon=function(){return this.eat(Ua.semi)};
Ei.prototype.expect=function(c){if(this.eat(c))return!0;for(var h=1;2>=h;h++)if(this.lookAhead(h).type===c){for(c=0;c<h;c++)this.next();return!0}};Ei.prototype.pushCx=function(){this.context.push(this.curIndent)};Ei.prototype.popCx=function(){this.curIndent=this.context.pop()};Ei.prototype.lineEnd=function(c){for(;c<this.input.length&&!mr(this.input.charCodeAt(c));)++c;return c};Ei.prototype.indentationAfter=function(c){for(var h=0;;++c){var f=this.input.charCodeAt(c);if(32===f)++h;else if(9===f)h+=
this.options.tabSize;else return h}};Ei.prototype.closes=function(c,h,f,m){return this.tok.type===c||this.tok.type===Ua.eof?!0:f!==this.curLineStart&&this.curIndent<h&&this.tokenStartsLine()&&(!m||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<h)};Ei.prototype.tokenStartsLine=function(){for(var c=this.tok.start-1;c>=this.curLineStart;--c){var h=this.input.charCodeAt(c);if(9!==h&&32!==h)return!1}return!0};Ei.prototype.extend=function(c,h){this[c]=h(this[c])};Ei.prototype.parse=
function(){this.next();return this.parseTopLevel()};Ei.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var f=0;f<c.length;f++)h=c[f](h);return h};Ei.parse=function(c,h){return(new this(c,h)).parse()};Ei.BaseParser=ok;var qH=Ei.prototype;qH.next=function(){this.last=this.tok;this.tok=this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=
this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};qH.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Ua.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Ua.ellipsis),new pH(this.toks)}catch(m){if(!(m instanceof SyntaxError))throw m;var c=m.message,h=m.raisedAt,f=!0;if(/unterminated/i.test(c))if(h=this.lineEnd(m.pos+1),/string/.test(c))f={start:m.pos,end:h,type:Ua.string,value:this.input.slice(m.pos+
1,h)};else if(/regular expr/i.test(c)){f=this.input.slice(m.pos,h);try{f=new RegExp(f)}catch(n){}f={start:m.pos,end:h,type:Ua.regexp,value:f}}else f=/template/.test(c)?{start:m.pos,end:h,type:Ua.template,value:this.input.slice(m.pos,h)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;h<this.input.length&&!W6(this.input.charCodeAt(h));)++h;else if(/character escape|expected hexadecimal/i.test(c))for(;h<
this.input.length&&(c=this.input.charCodeAt(h++),34!==c&&39!==c&&!mr(c)););else if(/unexpected character/i.test(c))h++,f=!1;else if(/regular expression/i.test(c))f=!0;else throw m;this.resetTo(h);!0===f&&(f={start:h,end:h,type:Ua.name,value:"\u2716"});if(f)return this.options.locations&&(f.loc=new Zv(this.toks,vy(this.input,f.start),vy(this.input,f.end))),f}};qH.resetTo=function(c){this.toks.pos=c;var h=this.input.charAt(c-1);this.toks.exprAllowed=!h||/[[{(,;:?/*=+\-~!|&%^<>]/.test(h)||/[enwfd]/.test(h)&&
/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=ut.lastIndex=0;for(var f;(f=ut.exec(this.input))&&f.index<c;)++this.toks.curLine,this.toks.lineStart=f.index+f[0].length}};qH.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-1]};var Ml=Ei.prototype;Ml.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,vy(this.input,
0)]:0);for(c.body=[];this.tok.type!==Ua.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};Ml.parseStatement=function(){var c=this.tok.type,h=this.startNode();if(this.toks.isLet()){c=Ua._var;var f="let"}switch(c){case Ua._break:case Ua._continue:this.next();var m=c===Ua._break;this.semicolon()||this.canInsertSemicolon()?h.label=null:(h.label=this.tok.type===Ua.name?this.parseIdent():
null,this.semicolon());return this.finishNode(h,m?"BreakStatement":"ContinueStatement");case Ua._debugger:return this.next(),this.semicolon(),this.finishNode(h,"DebuggerStatement");case Ua._do:return this.next(),h.body=this.parseStatement(),h.test=this.eat(Ua._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(h,"DoWhileStatement");case Ua._for:this.next();m=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Ua.parenL);if(this.tok.type===
Ua.semi)return this.parseFor(h,null);if((c=this.toks.isLet())||this.tok.type===Ua._var||this.tok.type===Ua._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Ua._in&&!this.isContextual("of")?this.parseFor(h,c):(9<=this.options.ecmaVersion&&this.tok.type!==Ua._in&&(h.await=m),this.parseForIn(h,c));c=this.parseExpression(!0);return this.tok.type===Ua._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Ua._in&&(h.await=
m),this.parseForIn(h,this.toAssignable(c))):this.parseFor(h,c);case Ua._function:return this.next(),this.parseFunction(h,!0);case Ua._if:return this.next(),h.test=this.parseParenExpression(),h.consequent=this.parseStatement(),h.alternate=this.eat(Ua._else)?this.parseStatement():null,this.finishNode(h,"IfStatement");case Ua._return:return this.next(),this.eat(Ua.semi)||this.canInsertSemicolon()?h.argument=null:(h.argument=this.parseExpression(),this.semicolon()),this.finishNode(h,"ReturnStatement");
case Ua._switch:c=this.curIndent;f=this.curLineStart;this.next();h.discriminant=this.parseParenExpression();h.cases=[];this.pushCx();for(this.expect(Ua.braceL);!this.closes(Ua.braceR,c,f,!0);)if(this.tok.type===Ua._case||this.tok.type===Ua._default){var n=this.tok.type===Ua._case;m&&this.finishNode(m,"SwitchCase");h.cases.push(m=this.startNode());m.consequent=[];this.next();m.test=n?this.parseExpression():null;this.expect(Ua.colon)}else m||(h.cases.push(m=this.startNode()),m.consequent=[],m.test=
null),m.consequent.push(this.parseStatement());m&&this.finishNode(m,"SwitchCase");this.popCx();this.eat(Ua.braceR);return this.finishNode(h,"SwitchStatement");case Ua._throw:return this.next(),h.argument=this.parseExpression(),this.semicolon(),this.finishNode(h,"ThrowStatement");case Ua._try:return this.next(),h.block=this.parseBlock(),h.handler=null,this.tok.type===Ua._catch&&(m=this.startNode(),this.next(),this.eat(Ua.parenL)?(m.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Ua.parenR)):
m.param=null,m.body=this.parseBlock(),h.handler=this.finishNode(m,"CatchClause")),h.finalizer=this.eat(Ua._finally)?this.parseBlock():null,h.handler||h.finalizer?this.finishNode(h,"TryStatement"):h.block;case Ua._var:case Ua._const:return this.parseVar(h,!1,f||this.tok.value);case Ua._while:return this.next(),h.test=this.parseParenExpression(),h.body=this.parseStatement(),this.finishNode(h,"WhileStatement");case Ua._with:return this.next(),h.object=this.parseParenExpression(),h.body=this.parseStatement(),
this.finishNode(h,"WithStatement");case Ua.braceL:return this.parseBlock();case Ua.semi:return this.next(),this.finishNode(h,"EmptyStatement");case Ua._class:return this.parseClass(!0);case Ua._import:return 10<this.options.ecmaVersion&&(m=this.lookAhead(1).type,m===Ua.parenL||m===Ua.dot)?(h.expression=this.parseExpression(),this.semicolon(),this.finishNode(h,"ExpressionStatement")):this.parseImport();case Ua._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),
this.next(),this.parseFunction(h,!0,!0);m=this.parseExpression();if(Qo(m))return this.next(),this.tok.type===Ua.eof?this.finishNode(h,"EmptyStatement"):this.parseStatement();if(c===Ua.name&&"Identifier"===m.type&&this.eat(Ua.colon))return h.body=this.parseStatement(),h.label=m,this.finishNode(h,"LabeledStatement");h.expression=m;this.semicolon();return this.finishNode(h,"ExpressionStatement")}};Ml.parseBlock=function(){var c=this.startNode();this.pushCx();this.expect(Ua.braceL);var h=this.curIndent,
f=this.curLineStart;for(c.body=[];!this.closes(Ua.braceR,h,f,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Ua.braceR);return this.finishNode(c,"BlockStatement")};Ml.parseFor=function(c,h){c.init=h;c.test=c.update=null;this.eat(Ua.semi)&&this.tok.type!==Ua.semi&&(c.test=this.parseExpression());this.eat(Ua.semi)&&this.tok.type!==Ua.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Ua.parenR);c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};Ml.parseForIn=
function(c,h){var f=this.tok.type===Ua._in?"ForInStatement":"ForOfStatement";this.next();c.left=h;c.right=this.parseExpression();this.popCx();this.expect(Ua.parenR);c.body=this.parseStatement();return this.finishNode(c,f)};Ml.parseVar=function(c,h,f){c.kind=f;this.next();c.declarations=[];do f=this.startNode(),f.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),f.init=this.eat(Ua.eq)?this.parseMaybeAssign(h):null,c.declarations.push(this.finishNode(f,"VariableDeclarator"));
while(this.eat(Ua.comma));c.declarations.length||(f=this.startNode(),f.id=this.dummyIdent(),c.declarations.push(this.finishNode(f,"VariableDeclarator")));h||this.semicolon();return this.finishNode(c,"VariableDeclaration")};Ml.parseClass=function(c){var h=this.startNode();this.next();h.id=this.tok.type===Ua.name?this.parseIdent():!0===c?this.dummyIdent():null;h.superClass=this.eat(Ua._extends)?this.parseExpression():null;h.body=this.startNode();h.body.body=[];this.pushCx();var f=this.curIndent+1,m=
this.curLineStart;this.eat(Ua.braceL);this.curIndent+1<f&&(f=this.curIndent,m=this.curLineStart);for(;!this.closes(Ua.braceR,f,m);){var n=this.parseClassElement();n&&h.body.body.push(n)}this.popCx();this.eat(Ua.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(h.body,"ClassBody");return this.finishNode(h,c?"ClassDeclaration":"ClassExpression")};Ml.parseClassElement=function(){if(this.eat(Ua.semi))return null;var c=
this.options,h=c.ecmaVersion,f=c.locations,m=this.curIndent,n=this.curLineStart;c=this.startNode();var a="",d=!1,k=!1,b="method";c.static=!1;this.eatContextual("static")&&(this.isClassElementNameStart()||this.toks.type===Ua.star?c.static=!0:a="static");!a&&8<=h&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.toks.type!==Ua.star||this.canInsertSemicolon()?a="async":k=!0);if(!a){d=this.eat(Ua.star);var e=this.toks.value;if(this.eatContextual("get")||this.eatContextual("set"))this.isClassElementNameStart()?
b=e:a=e}if(a)c.computed=!1,c.key=this.startNodeAt(f?[this.toks.lastTokStart,this.toks.lastTokStartLoc]:this.toks.lastTokStart),c.key.name=a,this.finishNode(c.key,"Identifier");else if(this.parseClassElementName(c),Qo(c.key))return Qo(this.parseMaybeAssign())&&this.next(),this.eat(Ua.comma),null;13>h||this.toks.type===Ua.parenL||"method"!==b||d||k?(c.kind=c.computed||c.static||d||k||"method"!==b||!("Identifier"===c.key.type&&"constructor"===c.key.name||"Literal"===c.key.type&&"constructor"===c.key.value)?
b:"constructor",c.value=this.parseMethod(d,k),this.finishNode(c,"MethodDefinition")):(this.eat(Ua.eq)?this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine()?c.value=null:(h=this.inAsync,f=this.inGenerator,this.inGenerator=this.inAsync=!1,c.value=this.parseMaybeAssign(),this.inAsync=h,this.inGenerator=f):c.value=null,this.semicolon(),this.finishNode(c,"PropertyDefinition"));return c};Ml.isClassElementNameStart=function(){return this.toks.isClassElementNameStart()};Ml.parseClassElementName=
function(c){this.toks.type===Ua.privateId?(c.computed=!1,c.key=this.parsePrivateIdent()):this.parsePropertyName(c)};Ml.parseFunction=function(c,h,f){var m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Ua.star));8<=this.options.ecmaVersion&&(c.async=!!f);this.tok.type===Ua.name?c.id=this.parseIdent():!0===h&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inGenerator=c.generator;this.inFunction=!0;c.params=this.parseFunctionParams();
c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(c,h?"FunctionDeclaration":"FunctionExpression")};Ml.parseExport=function(){var c=this.startNode();this.next();if(this.eat(Ua.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");
if(this.eat(Ua._default)){var h;if(this.tok.type===Ua._function||(h=this.toks.isAsyncFunction())){var f=this.startNode();this.next();h&&this.next();c.declaration=this.parseFunction(f,"nullableID",h)}else this.tok.type===Ua._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=
[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};Ml.parseImport=function(){var c=this.startNode();this.next();if(this.tok.type===Ua.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Ua.name&&"from"!==this.tok.value){var h=this.startNode();h.local=this.parseIdent();this.finishNode(h,"ImportDefaultSpecifier");
this.eat(Ua.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Ua.string?this.parseExprAtom():this.dummyString();h&&c.specifiers.unshift(h)}this.semicolon();return this.finishNode(c,"ImportDeclaration")};Ml.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Ua.star){var h=this.startNode();this.next();h.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(h,"ImportNamespaceSpecifier"))}else{h=this.curIndent;
var f=this.curLineStart,m=this.nextLineStart;this.pushCx();this.eat(Ua.braceL);this.curLineStart>m&&(m=this.curLineStart);for(;!this.closes(Ua.braceR,h+(this.curLineStart<=m?1:0),f);){var n=this.startNode();if(this.eat(Ua.star))n.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Qo(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,
"ImportSpecifier")}c.push(n);this.eat(Ua.comma)}this.eat(Ua.braceR);this.popCx()}return c};Ml.parseExportSpecifierList=function(){var c=[],h=this.curIndent,f=this.curLineStart,m=this.nextLineStart;this.pushCx();this.eat(Ua.braceL);this.curLineStart>m&&(m=this.curLineStart);for(;!this.closes(Ua.braceR,h+(this.curLineStart<=m?1:0),f)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Qo(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,
"ExportSpecifier");c.push(n);this.eat(Ua.comma)}this.eat(Ua.braceR);this.popCx();return c};var ti=Ei.prototype;ti.checkLVal=function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=this.checkLVal(c.expression),c;default:return this.dummyIdent()}};ti.parseExpression=function(c){var h=this.storeCurrentPos(),f=this.parseMaybeAssign(c);if(this.tok.type===Ua.comma){h=this.startNodeAt(h);for(h.expressions=[f];this.eat(Ua.comma);)h.expressions.push(this.parseMaybeAssign(c));
return this.finishNode(h,"SequenceExpression")}return f};ti.parseParenExpression=function(){this.pushCx();this.expect(Ua.parenL);var c=this.parseExpression();this.popCx();this.expect(Ua.parenR);return c};ti.parseMaybeAssign=function(c){if(this.inGenerator&&this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Ua.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Ua.star),c.argument=this.parseMaybeAssign()),
this.finishNode(c,"YieldExpression");var h=this.storeCurrentPos(),f=this.parseMaybeConditional(c);return this.tok.type.isAssign?(h=this.startNodeAt(h),h.operator=this.tok.value,h.left=this.tok.type===Ua.eq?this.toAssignable(f):this.checkLVal(f),this.next(),h.right=this.parseMaybeAssign(c),this.finishNode(h,"AssignmentExpression")):f};ti.parseMaybeConditional=function(c){var h=this.storeCurrentPos(),f=this.parseExprOps(c);return this.eat(Ua.question)?(h=this.startNodeAt(h),h.test=f,h.consequent=this.parseMaybeAssign(),
h.alternate=this.expect(Ua.colon)?this.parseMaybeAssign(c):this.dummyIdent(),this.finishNode(h,"ConditionalExpression")):f};ti.parseExprOps=function(c){var h=this.storeCurrentPos(),f=this.curIndent,m=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),h,-1,c,f,m)};ti.parseExprOp=function(c,h,f,m,n,a){if(this.curLineStart!==a&&this.curIndent<n&&this.tokenStartsLine())return c;var d=this.tok.type.binop;if(null!=d&&(!m||this.tok.type!==Ua._in)&&d>f){var k=this.startNodeAt(h);k.left=c;
k.operator=this.tok.value;this.next();this.curLineStart!==a&&this.curIndent<n&&this.tokenStartsLine()?k.right=this.dummyIdent():(c=this.storeCurrentPos(),k.right=this.parseExprOp(this.parseMaybeUnary(!1),c,d,m,n,a));this.finishNode(k,/&&|\|\||\?\?/.test(k.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(k,h,f,m,n,a)}return c};ti.parseMaybeUnary=function(c){var h=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&
this.options.allowAwaitOutsideFunction)){var f=this.parseAwait();c=!0}else if(this.tok.type.prefix){f=this.startNode();var m=this.tok.type===Ua.incDec;m||(c=!0);f.operator=this.tok.value;f.prefix=!0;this.next();f.argument=this.parseMaybeUnary(!0);m&&(f.argument=this.checkLVal(f.argument));f=this.finishNode(f,m?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Ua.ellipsis)f=this.startNode(),this.next(),f.argument=this.parseMaybeUnary(c),f=this.finishNode(f,"SpreadElement");else for(f=this.parseExprSubscripts();this.tok.type.postfix&&
!this.canInsertSemicolon();)m=this.startNodeAt(h),m.operator=this.tok.value,m.prefix=!1,m.argument=this.checkLVal(f),this.next(),f=this.finishNode(m,"UpdateExpression");return!c&&this.eat(Ua.starstar)?(c=this.startNodeAt(h),c.operator="**",c.left=f,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):f};ti.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};ti.parseSubscripts=function(c,
h,f,m,n){for(var a=11<=this.options.ecmaVersion,d=!1;;){if(this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine())if(this.tok.type===Ua.dot&&this.curIndent===m)--m;else break;var k="Identifier"===c.type&&"async"===c.name&&!this.canInsertSemicolon(),b=a&&this.eat(Ua.questionDot);b&&(d=!0);if(b&&this.tok.type!==Ua.parenL&&this.tok.type!==Ua.bracketL&&this.tok.type!==Ua.backQuote||this.eat(Ua.dot)){var e=this.startNodeAt(h);e.object=c;this.curLineStart!==n&&this.curIndent<=m&&this.tokenStartsLine()?
e.property=this.dummyIdent():e.property=this.parsePropertyAccessor()||this.dummyIdent();e.computed=!1;a&&(e.optional=b);c=this.finishNode(e,"MemberExpression")}else if(this.tok.type===Ua.bracketL)this.pushCx(),this.next(),e=this.startNodeAt(h),e.object=c,e.property=this.parseExpression(),e.computed=!0,a&&(e.optional=b),this.popCx(),this.expect(Ua.bracketR),c=this.finishNode(e,"MemberExpression");else if(f||this.tok.type!==Ua.parenL)if(this.tok.type===Ua.backQuote)b=this.startNodeAt(h),b.tag=c,b.quasi=
this.parseTemplate(),c=this.finishNode(b,"TaggedTemplateExpression");else break;else{e=this.parseExprList(Ua.parenR);if(k&&this.eat(Ua.arrow))return this.parseArrowExpression(this.startNodeAt(h),e,!0);k=this.startNodeAt(h);k.callee=c;k.arguments=e;a&&(k.optional=b);c=this.finishNode(k,"CallExpression")}}d&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ChainExpression"));return c};ti.parseExprAtom=function(){switch(this.tok.type){case Ua._this:case Ua._super:var c=this.tok.type===Ua._this?
"ThisExpression":"Super";var h=this.startNode();this.next();return this.finishNode(h,c);case Ua.name:h=this.storeCurrentPos();c=this.parseIdent();var f=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Ua._function))return this.parseFunction(this.startNodeAt(h),!1,!0);this.tok.type===Ua.name&&(c=this.parseIdent(),f=!0)}return this.eat(Ua.arrow)?this.parseArrowExpression(this.startNodeAt(h),[c],f):c;case Ua.regexp:return h=this.startNode(),c=this.tok.value,h.regex={pattern:c.pattern,
flags:c.flags},h.value=c.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(h,"Literal");case Ua.num:case Ua.string:return h=this.startNode(),h.value=this.tok.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Ua.num&&110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(h,"Literal");case Ua._null:case Ua._true:case Ua._false:return h=this.startNode(),h.value=this.tok.type===Ua._null?
null:this.tok.type===Ua._true,h.raw=this.tok.type.keyword,this.next(),this.finishNode(h,"Literal");case Ua.parenL:h=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Ua.parenR);if(this.eat(Ua.arrow))return c=c.expressions||[c],c.length&&Qo(c[c.length-1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(h),c);this.options.preserveParens&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ParenthesizedExpression"));return c;case Ua.bracketL:return h=this.startNode(),
h.elements=this.parseExprList(Ua.bracketR,!0),this.finishNode(h,"ArrayExpression");case Ua.braceL:return this.parseObj();case Ua._class:return this.parseClass(!1);case Ua._function:return h=this.startNode(),this.next(),this.parseFunction(h,!1);case Ua._new:return this.parseNew();case Ua.backQuote:return this.parseTemplate();case Ua._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};ti.parseExprImport=function(){var c=this.startNode(),
h=this.parseIdent(!0);switch(this.tok.type){case Ua.parenL:return this.parseDynamicImport(c);case Ua.dot:return c.meta=h,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};ti.parseDynamicImport=function(c){c.source=this.parseExprList(Ua.parenR)[0]||this.dummyString();return this.finishNode(c,"ImportExpression")};ti.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};ti.parseNew=function(){var c=this.startNode(),
h=this.curIndent,f=this.curLineStart,m=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ua.dot))return c.meta=m,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");m=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),m,!0,h,f);c.arguments=this.tok.type===Ua.parenL?this.parseExprList(Ua.parenR):[];return this.finishNode(c,"NewExpression")};ti.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Ua.invalidTemplate?{raw:this.tok.value,
cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();c.tail=this.tok.type===Ua.backQuote;return this.finishNode(c,"TemplateElement")};ti.parseTemplate=function(){var c=this.startNode();this.next();c.expressions=[];var h=this.parseTemplateElement();for(c.quasis=[h];!h.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Ua.braceR)?h=this.parseTemplateElement():(h=this.startNode(),h.value={cooked:"",raw:""},h.tail=
!0,this.finishNode(h,"TemplateElement")),c.quasis.push(h);this.expect(Ua.backQuote);return this.finishNode(c,"TemplateLiteral")};ti.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var h=this.curIndent+1,f=this.curLineStart;this.eat(Ua.braceL);this.curIndent+1<h&&(h=this.curIndent,f=this.curLineStart);for(;!this.closes(Ua.braceR,h,f);){var m=this.startNode(),n=void 0,a=void 0;if(9<=this.options.ecmaVersion&&this.eat(Ua.ellipsis))m.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(m,
"SpreadElement"));else{6<=this.options.ecmaVersion&&(a=this.storeCurrentPos(),m.method=!1,m.shorthand=!1,n=this.eat(Ua.star));this.parsePropertyName(m);if(this.toks.isAsyncProp(m)){var d=!0;n=9<=this.options.ecmaVersion&&this.eat(Ua.star);this.parsePropertyName(m)}else d=!1;Qo(m.key)?Qo(this.parseMaybeAssign())&&this.next():(this.eat(Ua.colon)?(m.kind="init",m.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Ua.parenL||this.tok.type===Ua.braceL)?(m.kind="init",m.method=
!0,m.value=this.parseMethod(n,d)):5<=this.options.ecmaVersion&&"Identifier"===m.key.type&&!m.computed&&("get"===m.key.name||"set"===m.key.name)&&this.tok.type!==Ua.comma&&this.tok.type!==Ua.braceR&&this.tok.type!==Ua.eq?(m.kind=m.key.name,this.parsePropertyName(m),m.value=this.parseMethod(!1)):(m.kind="init",6<=this.options.ecmaVersion?this.eat(Ua.eq)?(n=this.startNodeAt(a),n.operator="=",n.left=m.key,n.right=this.parseMaybeAssign(),m.value=this.finishNode(n,"AssignmentExpression")):m.value=m.key:
m.value=this.dummyIdent(),m.shorthand=!0),c.properties.push(this.finishNode(m,"Property")))}this.eat(Ua.comma)}this.popCx();this.eat(Ua.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};ti.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ua.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Ua.bracketR);return}c.computed=!1}var h=this.tok.type===Ua.num||this.tok.type===
Ua.string?this.parseExprAtom():this.parseIdent();c.key=h||this.dummyIdent()};ti.parsePropertyAccessor=function(){if(this.tok.type===Ua.name||this.tok.type.keyword)return this.parseIdent();if(this.tok.type===Ua.privateId)return this.parsePrivateIdent()};ti.parseIdent=function(){var c=this.tok.type===Ua.name?this.tok.value:this.tok.type.keyword;if(!c)return this.dummyIdent();var h=this.startNode();this.next();h.name=c;return this.finishNode(h,"Identifier")};ti.parsePrivateIdent=function(){var c=this.startNode();
c.name=this.tok.value;this.next();return this.finishNode(c,"PrivateIdentifier")};ti.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};ti.toAssignable=function(c,h){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||h))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,h);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===c.type){c.type="ObjectPattern";
for(var f=0,m=c.properties;f<m.length;f+=1)this.toAssignable(m[f],h)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,h);else if("Property"===c.type)this.toAssignable(c.value,h);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,h);else if("AssignmentExpression"===c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};ti.toAssignableList=function(c,h){for(var f=0;f<c.length;f+=1)this.toAssignable(c[f],
h);return c};ti.parseFunctionParams=function(c){c=this.parseExprList(Ua.parenR);return this.toAssignableList(c,!0)};ti.parseMethod=function(c,h){var f=this.startNode(),m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(f);6<=this.options.ecmaVersion&&(f.generator=!!c);8<=this.options.ecmaVersion&&(f.async=!!h);this.inAsync=f.async;this.inGenerator=f.generator;this.inFunction=!0;f.params=this.parseFunctionParams();f.body=this.parseBlock();this.toks.adaptDirectivePrologue(f.body.body);
this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(f,"FunctionExpression")};ti.parseArrowExpression=function(c,h,f){var m=this.inAsync,n=this.inGenerator,a=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!f);this.inAsync=c.async;this.inGenerator=!1;this.inFunction=!0;c.params=this.toAssignableList(h,!0);c.expression=this.tok.type!==Ua.braceL;c.expression?c.body=this.parseMaybeAssign():(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));
this.inAsync=m;this.inGenerator=n;this.inFunction=a;return this.finishNode(c,"ArrowFunctionExpression")};ti.parseExprList=function(c,h){this.pushCx();var f=this.curIndent,m=this.curLineStart,n=[];for(this.next();!this.closes(c,f+1,m);)if(this.eat(Ua.comma))n.push(h?null:this.dummyIdent());else{var a=this.parseMaybeAssign();if(Qo(a)){if(this.closes(c,f,m))break;this.next()}else n.push(a);this.eat(Ua.comma)}this.popCx();this.eat(c)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=
this.tok.loc.start));return n};ti.parseAwait=function(){var c=this.startNode();this.next();c.argument=this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};iC.tabSize=4;var rH=Object.freeze({__proto__:null,LooseParser:Ei,isDummy:Qo,parse:function(c,h){return Ei.parse(c,h)}}),se=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");se.forEachNode=function(c,h,f,m){m=m||{};var n=m.traversal||"preorder",a=se.obj.clone(m.visitors?m.visitors:se.walk.make(se.custom.visitors.withMemberExpression)),
d="preorder"===n?function(k,b,e,l,p){h(e,f,l,b);return k(e,l+1,p)}:function(k,b,e,l,p){k=k(e,l+1,p);h(e,f,l,b);return k};Object.keys(a).forEach(function(k){var b=a[k];a[k]=function(e,l,p){return d(b,k,e,l,p)}});se.walk.recursive(c,0,null,a);return c};se.matchNodes=function(c,h,f,m){return se.forEachNode(c,function(n,a,d,k){if(h[n.type])h[n.type](n,a,d,k)},f,m)};se.findNodesIncluding=pC;se.withParentInfo=function(c,h,f){function m(b){var e={id:se.string.newUUID(),parentScope:b,containingScopes:[]};
b&&b.containingScopes.push(e);return e}f=f||{};var n=se.walk.make({Function:function(b,e,l){e&&e.scope&&(e.scope=m(e.scope));l(b.body,e,"ScopeBody")},VariableDeclarator:function(b,e,l){b.init&&l(b.init,e,"Expression")},VariableDeclaration:function(b,e,l){for(var p=0;p<b.declarations.length;++p){var q=b.declarations[p];q&&l(q,e,"VariableDeclarator")}},ObjectExpression:function(b,e,l){for(var p=0;p<b.properties.length;++p){var q=b.properties[p];l(q.key,e,"Expression");l(q.value,e,"Expression")}},MemberExpression:function(b,
e,l){l(b.object,e,"Expression");l(b.property,e,"Expression")}},se.walk.base),a,d=[];se.forEachNode(c,function(b){se.arr.withoutAll(Object.keys(b),["end","start","type","source","raw"]).forEach(function(e){if(!b.__lookupGetter__(e)){var l=b[e];b.__defineGetter__(e,function(){a=e;return l});d.push([b,e,b[e]])}})},null,{visitors:n});var k=[];Object.keys(n).forEach(function(b){var e=n[b];n[b]=function(l,p,q){return b===l.type||f.visitAllNodes?(k.push(h.call(null,l,{scope:p.scope,depth:p.depth,parent:p.parent,
type:b,propertyInParent:a})),e(l,{scope:p.scope,parent:l,depth:p.depth+1},q)):e(l,p,q)}});se.walk.recursive(c,{scope:m(),parent:null,propertyInParent:"",depth:0},null,n);d.forEach(function(b){delete b[0][b[1]];b[0][b[1]]=b[2]});return k};se.copy=mK;se.findSiblings=nK;se.findNodeByAstIndex=oK;se.findStatementOfNode=pK;se.addAstIndex=yy;se.obj=ff;se.arr=Ne;se.string=Bg;se.Path=Sg;se.withMozillaAstDo=wu;se.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?
self:void 0;se.acorn=wp;se.walk=so;se.loose=rH;se.custom={};se.custom.forEachNode=se.forEachNode;se.custom.matchNodes=se.matchNodes;se.custom.findNodesIncluding=se.findNodesIncluding;se.custom.withParentInfo=se.withParentInfo;se.custom.copy=se.copy;se.custom.findSiblings=se.findSiblings;se.custom.findNodeByAstIndex=se.findNodeByAstIndex;se.custom.findStatementOfNode=se.findStatementOfNode;se.custom.addAstIndex=se.addAstIndex;var as=Ia("bM",se.custom);se.walk=so;se.walk=so;se.loose=rH;se.loose=rH;
se.acorn=wp;se.acorn=wp;se.custom=as;se.custom=as;se.findStatementOfNode=pK;se.findStatementOfNode=pK;se.addAstIndex=yy;se.addAstIndex=yy;se.findNodesIncluding=pC;se.findNodesIncluding=pC;se.findSiblings=nK;se.findSiblings=nK;se.findNodeByAstIndex=oK;se.findNodeByAstIndex=oK;se.copy=mK;se.copy=mK;se.custom.visitors={stopAtFunctions:se.walk.make(Object.assign({Function:function(){}},se.walk.base)),withMemberExpression:se.walk.make({MemberExpression:function(c,h,f){f(c.object,h,"Expression");f(c.property,
h,"Expression")}},se.walk.base)};var Uh=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");Uh.blockInliner=function(c){if(Array.isArray(c.body))for(var h=c.body.length-1;0<=h;h--){var f=c.body[h];"BlockStatement"===f.type&&f[Uh.canBeInlinedSym]&&c.body.splice.apply(c.body,[h,1].concat(f.body))}return c};Uh.block=function(c){return{type:"BlockStatement",body:c}};Uh.Visitor=Md;var xp=function(){return Uh.Visitor.apply(this,arguments)||this};$jscomp.inherits(xp,Uh.Visitor);xp.prototype.accept=
function(c,h,f){this.doFunc(c,h,f);return Uh.Visitor.prototype.accept.call(this,c,h,f)};xp.run=function(c,h,f){var m=new this;m.doFunc=h;m.accept(c,f,[]);return f};Uh.AllNodesVisitor=xp;var xu=function(){return Uh.Visitor.apply(this,arguments)||this};$jscomp.inherits(xu,Uh.Visitor);xu.prototype.accept=function(c,h,f){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return h.unshift({node:c,path:f}),c;default:return Uh.Visitor.prototype.accept.call(this,
c,h,f)}};xu.run=function(c){var h=[];(new this).accept(c,h,[]);return h};Uh.FindToplevelFuncDeclVisitor=xu;Uh.canBeInlinedSym=Symbol("canBeInlined");var An=function(){return Uh.Visitor.apply(this,arguments)||this};$jscomp.inherits(An,Uh.Visitor);An.prototype.accept=function(c,h,f){c=this.replacer(Uh.Visitor.prototype.accept.call(this,c,h,f));h={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(Uh.block(c),(h[Uh.canBeInlinedSym]=!0,h)):c};An.prototype.visitBlockStatement=function(c,h,f){return Uh.blockInliner(Uh.Visitor.prototype.visitBlockStatement.call(this,
c,h,f))};An.prototype.visitProgram=function(c,h,f){return Uh.blockInliner(Uh.Visitor.prototype.visitProgram.call(this,c,h,f))};An.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,[])};Uh.ReplaceManyVisitor=An;var vo=function(){return Uh.Visitor.apply(this,arguments)||this};$jscomp.inherits(vo,Uh.Visitor);vo.prototype.accept=function(c,h,f){return this.replacer(Uh.Visitor.prototype.accept.call(this,c,h,f),f)};vo.run=function(c,h){var f=new this;f.replacer=h;return f.accept(c,null,
[])};Uh.ReplaceVisitor=vo;Uh.AllNodesVisitor=xp;Uh.AllNodesVisitor=xp;Uh.FindToplevelFuncDeclVisitor=xu;Uh.FindToplevelFuncDeclVisitor=xu;Uh.ReplaceVisitor=vo;Uh.ReplaceVisitor=vo;Uh.ReplaceManyVisitor=An;Uh.ReplaceManyVisitor=An;var vg=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");vg.addSource=qC;vg.nodesAt=function(c,h){h="string"===typeof h?this.parse(h):h;return vg.findNodesIncluding(h,c)};vg.parseFunction=nr;vg.fuzzyParse=aq;vg.acornParseAsyncAware=function(c,h){if(h.onComment){var f=
h.onComment;h.onComment=function(a,d,k,b,e,l){return f.call(this,a,d,k-14,b-14,e,l)}}var m=vg.acorn.parse("async () => {\n"+c+"\n}",h);if(m.loc)var n=m.loc.constructor;m={body:m.body[0].expression.body.body,sourceType:"module",type:"Program"};vg.AllNodesVisitor.run(m,function(a,d,k){if(!a._positionFixed){a._positionFixed=!0;if(a.start||0===a.start)a.start-=14,a.end-=14;a.loc&&n&&(k=a.loc,d=k.start,k=k.end,a.loc=new n(h,{column:d.column,line:d.line-1},{column:k.column,line:k.line-1}));h.addSource&&
!a.source&&(a.source=c.slice(a.start,a.end))}});m.start=m.body[0].start;m.end=vg.arr.last(m.body).end;h.addSource&&(m.source=c);m.body[0].loc&&n&&(m.loc=new n(h,m.body[0].loc.start,vg.arr.last(m.body).loc.end));return m};vg.parse=Ej;vg.arr=Ne;vg.acorn=wp;vg.loose=rH;vg.walk=so;vg.addAstIndex=yy;vg.findNodesIncluding=pC;vg.custom=as;vg.AllNodesVisitor=xp;vg.walk=so;vg.walk=so;vg.parse=Ej;vg.parse=Ej;vg.parseFunction=nr;vg.parseFunction=nr;vg.fuzzyParse=aq;vg.fuzzyParse=aq;vg.addSource=qC;vg.addSource=
qC;vg.custom.addSource=vg.addSource;var eg=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");eg.string=Bg;eg.Path=Sg;eg.BaseVisitor=Md;eg.PrinterVisitor=rx;eg.ComparisonVisitor=Ui;eg.stringify=Dj;eg.addAstIndex=yy;eg.parse=Ej;eg.addSource=qC;eg.methods={withMozillaAstDo:function(c,h,f){var m=new eg.BaseVisitor,n=m.accept;m.accept=function(a,d,k){h=f(function(){n.call(m,a,d,k)},a,d,k);return a};m.accept(c,h,[]);return h},printAst:function(c,h){h=h||{};var f=h.printSource||
!1,m=h.printPositions||!1,n=h.printIndex||!1,a=[];if("string"===typeof c){var d=c;c=eg.parse(c)}else d=h.source||c.source;f&&!c.source&&(d||(d=eg.stringify(c),c=eg.parse(d)),eg.addSource(c,d));(new eg.PrinterVisitor).accept(c,{index:0,tree:a},[]);return eg.string.printTree(a[0],function(k){var b=k.path+":"+k.node.type,e=[];n&&e.push(k.index);m&&e.push(k.node.start+"-"+k.node.end);f&&(k=k.node.source||d.slice(k.node.start,k.node.end),k=eg.string.print(k.truncate(60).replace(/\n/g,"").replace(/\s+/g,
" ")),e.push(k));e.length&&(b+="("+e.join(",")+")");return b},function(k){return k.children},"  ")},compareAst:function(c,h){if(!c||!h)throw Error("node"+(c?"1":"2")+" not defined");var f={completePath:[],comparisons:{errors:[]}};(new eg.ComparisonVisitor).accept(c,h,f,[]);return f.comparisons.errors.length?f.comparisons.errors.pluck("msg"):null},pathToNode:function(c,h,f){c.astIndex||eg.addAstIndex(c);f=new eg.BaseVisitor;var m=null;(f.accept=function(n,a,d,k){if(!m)return a=a.concat(k),n.astIndex===
h&&(m={pathString:a.map(function(b){return"string"===typeof b?"."+b:"["+b+"]"}).join(""),path:a,node:n}),this["visit"+n.type](n,a,d,k)}).call(f,c,[],{},[]);return m},rematchAstWithSource:function(c,h,f,m){f=!!f;h=eg.parse(h,f?{locations:!0}:void 0);var n=new eg.BaseVisitor;m&&(h=eg.Path(m).get(h));n.accept=function(a,d,k){k=k||[];var b=k.reduce(function(e,l){return e[l]},c);b.start=a.start;b.end=a.end;f&&(b.loc=a.loc);return this["visit"+a.type](a,d,k)};n.accept(h)}};eg.withMozillaAstDo=eg.methods.withMozillaAstDo;
eg.printAst=eg.methods.printAst;eg.compareAst=eg.methods.compareAst;eg.pathToNode=eg.methods.pathToNode;eg.rematchAstWithSource=eg.methods.rematchAstWithSource;var wu=eg.withMozillaAstDo,EA=eg.printAst,FA=eg.compareAst,GA=eg.pathToNode,HA=eg.rematchAstWithSource;eg.BaseVisitor=Md;eg.BaseVisitor=Md;eg.withMozillaAstDo=wu;eg.withMozillaAstDo=wu;eg.printAst=EA;eg.printAst=EA;eg.compareAst=FA;eg.compareAst=FA;eg.pathToNode=GA;eg.pathToNode=GA;eg.rematchAstWithSource=HA;eg.rematchAstWithSource=HA;var ne=
lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");ne.isIdentifier=rC;ne.id=zy;ne.literal=sC;ne.exprStmt=Ay;ne.returnStmt=By;ne.empty=tC;ne.binaryExpr=uC;ne.funcExpr=Cy;ne.funcCall=$v;ne.varDecl=Dy;ne.member=Ey;ne.memberChain=Fy;ne.assign=vC;ne.block=Gy;ne.program=Hy;ne.tryStmt=Iy;ne.prop=wC;ne.objectLiteral=xC;ne.ifStmt=yC;ne.forIn=zC;ne.conditional=AC;ne.logical=BC;ne.isIdentifier=rC;ne.isIdentifier=rC;ne.id=zy;ne.id=zy;ne.literal=sC;ne.literal=sC;ne.objectLiteral=xC;ne.objectLiteral=
xC;ne.prop=wC;ne.prop=wC;ne.exprStmt=Ay;ne.exprStmt=Ay;ne.returnStmt=By;ne.returnStmt=By;ne.empty=tC;ne.empty=tC;ne.binaryExpr=uC;ne.binaryExpr=uC;ne.funcExpr=Cy;ne.funcExpr=Cy;ne.funcCall=$v;ne.funcCall=$v;ne.varDecl=Dy;ne.varDecl=Dy;ne.member=Ey;ne.member=Ey;ne.memberChain=Fy;ne.memberChain=Fy;ne.assign=vC;ne.assign=vC;ne.block=Gy;ne.block=Gy;ne.program=Hy;ne.program=Hy;ne.tryStmt=Iy;ne.tryStmt=Iy;ne.ifStmt=yC;ne.ifStmt=yC;ne.forIn=zC;ne.forIn=zC;ne.conditional=AC;ne.conditional=AC;ne.logical=BC;
ne.logical=BC;ne.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var Hq=Object.freeze({__proto__:null,isIdentifier:rC,id:zy,literal:sC,objectLiteral:xC,prop:wC,exprStmt:Ay,returnStmt:By,empty:tC,binaryExpr:uC,funcExpr:Cy,funcCall:$v,varDecl:Dy,member:Ey,memberChain:Fy,assign:vC,block:Gy,program:Hy,tryStmt:Iy,ifStmt:yC,forIn:zC,conditional:AC,logical:BC}),hd=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");hd.scopes=Jy;hd.nodesAtIndex=CC;hd.scopesAtIndex=DC;hd.scopeAtIndex=
EC;hd.scopesAtPos=FC;hd.nodesInScopeOf=GC;hd.declarationsOfScope=HC;hd.declarationsWithIdsOfScope=function(c){var h=hd.arr.compact(hd.helpers.declIds(c.params).concat(c.catches)),f=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable(hd.arr.filter(c.funcDecls,function(m){return m.id})),$jscomp.arrayFromIterable(hd.arr.filter(c.classDecls,function(m){return m.id})));return h.map(function(m){return[m,m]}).concat(f.map(function(m){return[m,m.id]})).concat(hd.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(m){return[hd.statementOf(c.node,
m),m]}))};hd._declaredVarNames=IC;hd._findJsLintGlobalDeclarations=JC;hd.topLevelFuncDecls=Ky;hd.resolveReference=DS;hd.resolveReferences=KC;hd.refWithDeclAt=LC;hd.topLevelDeclsAndRefs=Ly;hd.findGlobalVarRefs=MC;hd.findNodesIncludingLines=NC;hd.__varDeclIdsFor=function(c,h){for(var f=[],m=$jscomp.makeIterator(c.params),n=m.next();!n.done;n=m.next())n=n.value,n.name===h&&f.push(n);m=$jscomp.makeIterator(c.funcDecls);for(n=m.next();!n.done;n=m.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);m=$jscomp.makeIterator(c.classDecls);
for(n=m.next();!n.done;n=m.next())n=n.value,n.id&&n.id.name===h&&f.push(n.id);m=$jscomp.makeIterator(c.importSpecifiers);for(n=m.next();!n.done;n=m.next())n=n.value,n.name===h&&f.push(n);c=$jscomp.makeIterator(hd.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===h&&f.push(n);return f};hd.findReferencesAndDeclsInScope=My;hd.findDeclarationClosestToIndex=OC;hd.nodesAt=PC;hd.statementOf=Ny;hd.imports=QC;hd.exports=RC;hd.arr=Ne;hd.chain=yk;hd.num=Gj;hd.tree=Dq;hd.fun=Tj;hd.obj=
ff;hd.BaseVisitor=Md;hd.ScopeVisitor=ni;hd.FindToplevelFuncDeclVisitor=xu;hd.withMozillaAstDo=wu;hd.parse=Ej;hd.acorn=wp;hd.walk=so;hd.custom=as;hd.stringify=Dj;hd.helpers={declIds:function(c,h){h=void 0===h?[]:h;for(var f=0;f<c.length;f++){var m=c[f];if(m)if("Identifier"===m.type)h.push(m);else if("RestElement"===m.type)h.push(m.argument);else if("AssignmentPattern"===m.type)hd.helpers.declIds([m.left],h);else if("ObjectPattern"===m.type)for(var n=0;n<m.properties.length;n++){var a=m.properties[n];
hd.helpers.declIds([a.value||a],h)}else"ArrayPattern"===m.type&&hd.helpers.declIds(m.elements,h)}return h},varDecls:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var m=f.next();!m.done;m=f.next()){m=m.value;for(var n=$jscomp.makeIterator(hd.helpers.declIds([m.id])),a=n.next();!a.done;a=n.next())h.push([m,a.value])}}return h},varDeclIds:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);
for(var f=c.next();!f.done;f=c.next()){f=$jscomp.makeIterator(f.value.declarations);for(var m=f.next();!m.done;m=f.next())hd.helpers.declIds([m.value.id],h)}return h},objPropertiesAsList:function(c,h,f,m){m=void 0===m?[]:m;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var a=n.key.name,d={key:h.concat([a]),value:n.value};switch(n.value.type){case "ArrayExpression":case "ArrayPattern":f||m.push(d);for(d=0;d<n.value.elements.length;d++)hd.helpers.objPropertiesAsList(n.value.elements[d],
h.concat([a,d]),f,m);break;case "ObjectExpression":case "ObjectPattern":f||m.push(d);hd.helpers.objPropertiesAsList(n.value,h.concat([a]),f,m);break;case "AssignmentPattern":f||m.push(d);hd.helpers.objPropertiesAsList(n.left,h.concat([a]),f,m);break;default:m.push(d)}}return m},isDeclaration:function(c){return"FunctionDeclaration"===c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};hd.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
hd.globalDeclRe=/^\s*global\s*/;hd._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var sH=hd.helpers,kP=hd.knownGlobals;
hd.helpers=sH;hd.helpers=sH;hd.knownGlobals=kP;hd.knownGlobals=kP;hd.scopes=Jy;hd.scopes=Jy;hd.nodesAtIndex=CC;hd.nodesAtIndex=CC;hd.scopesAtIndex=DC;hd.scopesAtIndex=DC;hd.scopeAtIndex=EC;hd.scopeAtIndex=EC;hd.scopesAtPos=FC;hd.scopesAtPos=FC;hd.nodesInScopeOf=GC;hd.nodesInScopeOf=GC;hd.declarationsOfScope=HC;hd.declarationsOfScope=HC;hd._declaredVarNames=IC;hd._declaredVarNames=IC;hd._findJsLintGlobalDeclarations=JC;hd._findJsLintGlobalDeclarations=JC;hd.topLevelDeclsAndRefs=Ly;hd.topLevelDeclsAndRefs=
Ly;hd.topLevelFuncDecls=Ky;hd.topLevelFuncDecls=Ky;hd.findGlobalVarRefs=MC;hd.findGlobalVarRefs=MC;hd.findNodesIncludingLines=NC;hd.findNodesIncludingLines=NC;hd.findReferencesAndDeclsInScope=My;hd.findReferencesAndDeclsInScope=My;hd.findDeclarationClosestToIndex=OC;hd.findDeclarationClosestToIndex=OC;hd.nodesAt=PC;hd.nodesAt=PC;hd.statementOf=Ny;hd.statementOf=Ny;hd.resolveReferences=KC;hd.resolveReferences=KC;hd.refWithDeclAt=LC;hd.refWithDeclAt=LC;hd.imports=QC;hd.imports=QC;hd.exports=RC;hd.exports=
RC;var wo=Object.freeze({__proto__:null,helpers:sH,knownGlobals:kP,scopes:Jy,nodesAtIndex:CC,scopesAtIndex:DC,scopeAtIndex:EC,scopesAtPos:FC,nodesInScopeOf:GC,declarationsOfScope:HC,_declaredVarNames:IC,_findJsLintGlobalDeclarations:JC,topLevelDeclsAndRefs:Ly,topLevelFuncDecls:Ky,findGlobalVarRefs:MC,findNodesIncludingLines:NC,findReferencesAndDeclsInScope:My,findDeclarationClosestToIndex:OC,nodesAt:PC,statementOf:Ny,resolveReferences:KC,refWithDeclAt:LC,imports:QC,exports:RC});Ia("bJ",wo);var wm=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");wm.objectSpreadTransform=aw;wm.Visitor=Md;wm.funcCall=$v;wm.member=Ey;var tH=function(){return wm.Visitor.apply(this,arguments)||this};$jscomp.inherits(tH,wm.Visitor);tH.prototype.accept=function(c,h,f){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return wm.Visitor.prototype.accept.call(this,c,h,f)};tH.prototype.transformSpreadElement=function(c){var h=[],f=[h];c.properties.forEach(function(m){"SpreadElement"!==
m.type?(m.shorthand=!1,h.push(m)):(f.push(m),h=[],f.push(h))});if(1===f.length)return c;h.length||f.pop();return wm.funcCall.apply(wm,[wm.member("Object","assign")].concat($jscomp.arrayFromIterable(f.map(function(m){return"SpreadElement"===m.type?m.argument:{properties:m,type:"ObjectExpression"}}))))};wm.ObjectSpreadTransformer=tH;wm.default=aw;var Bd=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");Bd._node2string=function(c){return c.source||Bd.stringify(c)};Bd._findIndentAt=function(c,
h){var f=Bd.string.peekLeft(c,h,/\s+$/);c="number"===typeof f?c.slice(f,h):"";"\n"===c[0]&&(c=c.slice(1));return c};Bd._applyChanges=function(c,h){for(var f=0;f<c.length;f++){var m=c[f];if("del"===m.type)h=h.slice(0,m.pos)+h.slice(m.pos+m.length);else if("add"===m.type)h=h.slice(0,m.pos)+m.string+h.slice(m.pos);else throw Error("Unexpected change "+Bd.obj.inspect(m));}return h};Bd._compareNodesForReplacement=SC;Bd.replaceNode=TC;Bd.replaceNodes=UC;Bd.replace=VC;Bd.__findVarDecls=ES;Bd.oneDeclaratorPerVarDecl=
WC;Bd.oneDeclaratorForVarsInDestructoring=XC;Bd.returnLastStatement=YC;Bd.wrapInFunction=ZC;Bd.wrapInStartEndCall=$C;Bd.transformSingleExpression=aD;Bd.arr=Ne;Bd.obj=ff;Bd.string=Bg;Bd.chain=yk;Bd.Path=Sg;Bd.helpers=sH;Bd.scopes=Jy;Bd.topLevelDeclsAndRefs=Ly;Bd.topLevelFuncDecls=Ky;Bd.parse=Ej;Bd.fuzzyParse=aq;Bd.objectSpreadTransform=aw;Bd.varDecl=Dy;Bd.memberChain=Fy;Bd.id=zy;Bd.exprStmt=Ay;Bd.funcCall=$v;Bd.returnStmt=By;Bd.tryStmt=Iy;Bd.program=Hy;Bd.block=Gy;Bd.funcExpr=Cy;Bd.stringify=Dj;Bd.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;Bd.replaceNode=TC;Bd.replaceNode=TC;Bd.replaceNodes=UC;Bd.replaceNodes=UC;Bd.replace=VC;Bd.replace=VC;Bd._compareNodesForReplacement=SC;Bd._compareNodesForReplacement=SC;Bd.oneDeclaratorPerVarDecl=WC;Bd.oneDeclaratorPerVarDecl=WC;Bd.oneDeclaratorForVarsInDestructoring=XC;Bd.oneDeclaratorForVarsInDestructoring=XC;Bd.returnLastStatement=YC;Bd.returnLastStatement=YC;Bd.wrapInFunction=ZC;Bd.wrapInFunction=ZC;Bd.wrapInStartEndCall=$C;Bd.wrapInStartEndCall=$C;Bd.transformSingleExpression=
aD;Bd.transformSingleExpression=aD;Bd.objectSpreadTransform=aw;Bd.objectSpreadTransform=aw;var yu=Object.freeze({__proto__:null,replaceNode:TC,replaceNodes:UC,replace:VC,_compareNodesForReplacement:SC,oneDeclaratorPerVarDecl:WC,oneDeclaratorForVarsInDestructoring:XC,returnLastStatement:YC,wrapInFunction:ZC,wrapInStartEndCall:$C,transformSingleExpression:aD,objectSpreadTransform:aw});Ia("bv",yu);var af=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");af.getCommentPrecedingNode=bD;af.extractComments=
cD;af.obj=ff;af.string=Bg;af.Path=Sg;af.chain=yk;af.arr=Ne;af.fun=Tj;af.parse=Ej;af.statementOf=Ny;af.Visitor=Md;af.stringify=Dj;af.getCommentPrecedingNode=bD;af.getCommentPrecedingNode=bD;af.extractComments=cD;af.extractComments=cD;var uH=Object.freeze({__proto__:null,getCommentPrecedingNode:bD,extractComments:cD}),bg=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");bg.findDecls=dD;bg.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var h={type:"class-decl",
name:c.id.name,node:c,children:[]};h.children.push.apply(h.children,$jscomp.arrayFromIterable(bg.arr.compact(c.body.body.map(function(f,m){return bg.es6ClassMethod(f,h,m)}))));return[h].concat($jscomp.arrayFromIterable(h.children))};bg.es6ClassMethod=function(c,h,f){if("MethodDefinition"!==c.type)return null;var m;"constructor"===c.kind?m="class-constructor":"method"===c.kind?m=c.static?"class-class-method":"class-instance-method":"get"===c.kind?m=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(m=c.static?"class-class-setter":"class-instance-setter");return"class-instance-getter"==m&&"commands"==c.key.name?bg.parseCommandsMethod(c,h,m):"class-class-getter"==m&&"properties"==c.key.name?bg.parsePropertiesMethod(c,h,m):m?{type:m,parent:h,node:c,name:c.key.name}:null};bg.parsePropertiesMethod=function(c,h,f){var m={type:f,parent:h,node:c,name:c.key.name};try{var n=[];m.node.value.body.body[0].argument.properties.forEach(function(a){n.push({type:a.type,parent:m,node:a,name:a.key?
a.key.name:a.argument.arguments[0].value})});m.children=n}finally{return m}};bg.parseCommandsMethod=function(c,h,f){var m={type:f,parent:h,node:c,name:c.key.name};try{var n=[];if(m.node.value.body.body){var a=m.node.value.body.body[0].argument.elements;a&&(a.forEach(function(d){n.push({type:d.type,parent:m,node:d,name:d.properties[0].value.value})}),m.children=n)}}finally{return m}};bg.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var h=[],f={};c=$jscomp.makeIterator(bg.withVarDeclIds(c));
for(var m=c.next();!m.done;f={$jscomp$loop$prop$def$2695:f.$jscomp$loop$prop$def$2695},m=c.next())if(m=m.value,f.$jscomp$loop$prop$def$2695={name:m.id.name,node:m.node,type:"var-decl"},h.push(f.$jscomp$loop$prop$def$2695),f.$jscomp$loop$prop$def$2695.node.init){for(m=f.$jscomp$loop$prop$def$2695.node.init;"AssignmentExpression"===m.type;)m=m.right;if("ObjectExpression"===m.type)f.$jscomp$loop$prop$def$2695.type="object-decl",f.$jscomp$loop$prop$def$2695.children=bg.objectKeyValsAsDefs(m).map(function(n){return function(a){return Object.assign({},
a,{type:"object-"+a.type,parent:n.$jscomp$loop$prop$def$2695})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2695.children));else{if("ArrayExpression"===m.type){f.$jscomp$loop$prop$def$2695.type="array-decl";try{f.$jscomp$loop$prop$def$2695.children=bg.arrayEntriesAsDefs(m).map(function(n){return function(a){return Object.assign({},a,{type:"object-"+a.type,parent:n.$jscomp$loop$prop$def$2695})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2695.children))}finally{continue}}if(m=
bg.someObjectExpressionCall(m,f.$jscomp$loop$prop$def$2695))f.$jscomp$loop$prop$def$2695.children=m.map(function(n){return function(a){return Object.assign({},a,{parent:n.$jscomp$loop$prop$def$2695})}}(f)),h.push.apply(h,$jscomp.arrayFromIterable(f.$jscomp$loop$prop$def$2695.children))}}return h};bg.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};bg.someObjectExpressionCall=function(c,h){"ExpressionStatement"===
c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(f){return"ObjectExpression"===f.type}))?bg.objectKeyValsAsDefs(c,h):null};bg.functionWrapper=function(c,h){if(!bg.isFunctionWrapper(c))return null;var f=bg.Path("expression.arguments.0").get(c);h=f&&"FunctionExpression"===f.type&&5<bg.string.lines(f.source||"").length?bg.findDecls(f,h):bg.findDecls(bg.Path("expression.callee").get(c),h);var m={node:c,name:bg.Path("expression.callee.id.name").get(c)};h.forEach(function(n){return n.parent||
(n.parent=m)});return h};bg.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};bg.objectKeyValsAsDefs=function(c,h){return c.properties.map(function(f){return{name:f.key.name||f.key.value,type:"FunctionExpression"===f.value.type?"method":"property",node:f,parent:h}})};bg.arrayEntriesAsDefs=function(c,h){return c.elements.map(function(f){return{name:f.value||f.properties[0].value.value,type:f.type,node:f,parent:h}})};
bg.isFunctionWrapper=function(c){return"CallExpression"===bg.Path("expression.type").get(c)&&"FunctionExpression"===bg.Path("expression.callee.type").get(c)};bg.declIds=qK;bg.withVarDeclIds=function(c){return c.declarations.map(function(h){!h.source&&h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};bg.parse=Ej;bg.arr=Ne;bg.Path=Sg;bg.string=Bg;bg.obj=ff;bg.findDecls=dD;bg.findDecls=dD;var IA=Object.freeze({__proto__:null,findDecls:dD}),of=lively.FreezerRuntime.recorderFor("lively.ast/index.js");
of.isValidIdentifier=bw;of.BaseVisitor=Md;of.BaseVisitor=Md;of.withMozillaAstDo=wu;of.withMozillaAstDo=wu;of.printAst=EA;of.printAst=EA;of.compareAst=FA;of.compareAst=FA;of.pathToNode=GA;of.pathToNode=GA;of.rematchAstWithSource=HA;of.rematchAstWithSource=HA;of.ReplaceManyVisitor=An;of.ReplaceManyVisitor=An;of.ReplaceVisitor=vo;of.ReplaceVisitor=vo;of.AllNodesVisitor=xp;of.AllNodesVisitor=xp;of.parse=Ej;of.parse=Ej;of.parseFunction=nr;of.parseFunction=nr;of.fuzzyParse=aq;of.fuzzyParse=aq;of.acorn=
wp;of.walk=so;of.custom=as;of.stringify=Dj;of.escodegen=tx;of.escodegen=tx;of.escodegen=tx;of.acorn=wp;of.acorn=wp;of.walk=so;of.walk=so;of.nodes=Hq;of.query=wo;of.transform=yu;of.comments=uH;of.categorizer=IA;of.query=wo;of.query=wo;of.transform=yu;of.transform=yu;of.comments=uH;of.comments=uH;of.categorizer=IA;of.categorizer=IA;of.stringify=Dj;of.stringify=Dj;of.nodes=Hq;of.nodes=Hq;of.custom=as;of.custom=as;of.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
of.isValidIdentifier=bw;of.isValidIdentifier=bw;of.parse=Ej;of.Node=of.parse("").constructor;Object.defineProperty(of.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var vH=Object.freeze({__proto__:null,BaseVisitor:Md,withMozillaAstDo:wu,printAst:EA,compareAst:FA,pathToNode:GA,rematchAstWithSource:HA,ReplaceManyVisitor:An,ReplaceVisitor:vo,AllNodesVisitor:xp,parse:Ej,parseFunction:nr,fuzzyParse:aq,escodegen:tx,acorn:wp,walk:so,query:wo,
transform:yu,comments:uH,categorizer:IA,stringify:Dj,nodes:Hq,custom:as,isValidIdentifier:bw});Ia("a_",vH);var cg=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");cg.getGlobal=or;cg.signatureOf=eD;cg.isClass=rK;cg.pluck=fD;cg.printSymbol=gD;cg.safeToString=Oy;cg.printEvalResult=Py;cg.obj=ff;cg.string=Bg;cg.getGlobal=or;cg.getGlobal=or;cg.signatureOf=eD;cg.signatureOf=eD;cg.isClass=rK;cg.isClass=rK;cg.pluck=fD;cg.pluck=fD;cg.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,h){return c.set(Symbol[h],"Symbol."+h)},new Map)}();cg.symMatcher=/^Symbol\((.*)\)$/;cg.printSymbol=gD;cg.printSymbol=gD;cg.safeToString=Oy;cg.safeToString=Oy;cg.printEvalResult=Py;cg.printEvalResult=Py;var lP=function(){function c(n,a){"object"===typeof a&&(a=a.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return a=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),a+n+a;if(n instanceof Error)return n.stack||cg.safeToString(n);if(!cg.obj.isObject(n))return cg.safeToString(n);
try{var d=cg.obj.inspect(n,{customPrinter:f,maxNumberOfKeys:100,maxDepth:a,printFunctionSource:!0})}catch(k){}return"{}"===d?cg.safeToString(n):d}function h(n,a){if("string"===typeof n||Array.isArray(n)||!m||"function"!==typeof n[m])return a;var d="function"===typeof n.entries,k=d?n.entries():n[m](),b=[];a=d?"{":"[";var e=d?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var l=0,p;10>l;l++){p=k.next();if(p.done)break;b.push(p.value)}k=b.map(function(q){return d?String(q[0])+": "+String(q[1]):
c(q,2)}).join(", ");return n+"("+a+k+e+")"}function f(n,a,d){if(!n)return a;if("symbol"===typeof n)return cg.printSymbol(n);if("string"===typeof n)return cg.string.print(cg.string.truncate(n,100));if(n.isMorph)return cg.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof cg.Node&&n instanceof cg.Node||"undefined"!==typeof cg.ImageData&&n instanceof cg.ImageData)return cg.safeToString(n);var k=n.length||n.byteLength;if(void 0!==k&&10<k&&n.slice)return"["+("string"===typeof n||
n.byteLength?cg.safeToString(n.slice(0,10)):n.slice(0,10).map(d))+",...]";n=h(n,a);return n!==a?n:a}var m="undefined"!==typeof Symbol&&Symbol.iterator;return c}();cg.printInspectEvalValue=lP;cg.printInspectEvalValue=lP;cg.printInspectEvalValue=lP;var jh=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");jh.getObjectForCompletion=hD;jh.propertyExtract=function(c,h,f){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(jh.printSymbol)).filter(function(m){return-1===
c.indexOf(m)}).map(f).filter(function(m){return!!m}).sort(function(m,n){return m.name<n.name?-1:m.name>n.name?1:0})};jh.getMethodsOf=function(c,h){return jh.propertyExtract(c,h,function(f){return h.__lookupGetter__&&h.__lookupGetter__(f)||"function"!==typeof h[f]?null:{name:f,completion:jh.signatureOf(f,h[f])}})};jh.getAttributesOf=function(c,h){return jh.propertyExtract(c,h,function(f){return h.__lookupGetter__&&!h.__lookupGetter__(f)&&"function"===typeof h[f]?null:{name:f,completion:f}})};jh.getProtoChain=
function(c){for(var h=[];c;)h.push(c),c=c.__proto__;return h};jh.getDescriptorOf=function(c,h){function f(m,n){m.length>n&&(m=m.slice(0,n)+"...");return m.replace(/\n/g,"").replace(/\s+/g," ")}if(c===h){if("function"!==typeof c)return f(jh.safeToString(c),50);h=c.toString();h=f(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return jh.signatureOf(c.displayName||c.name||"function",c)+" {"+h+"}"}return(c=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof c.type&&c.type.length?f(c.type,
50):"string"===typeof c.name&&c.name.length?f(c.name,50):"anonymous class":"prototype"};jh.getCompletionsOfObj=function(c,h){try{var f=[];var m=jh.getProtoChain(c).map(function(a){var d=jh.getDescriptorOf(c,a);a=jh.getMethodsOf(f,a).concat(jh.getAttributesOf(f,a));f=f.concat(jh.pluck(a,"name"));return[d,jh.pluck(a,"completion")]})}catch(a){var n=a}h(n,m)};jh.descriptorsOfObjAndProtoProperties=function(c){var h=[];return jh.getProtoChain(c).map(function(f){var m=jh.getDescriptorOf(c,f);f=jh.getMethodsOf(h,
f).concat(jh.getAttributesOf(h,f));h=h.concat(jh.pluck(f,"name"));return[m,jh.pluck(f,"completion")]})};jh.getCompletions=iD;jh.lang=L0;jh.signatureOf=eD;jh.pluck=fD;jh.safeToString=Oy;jh.printSymbol=gD;jh.getObjectForCompletion=hD;jh.getObjectForCompletion=hD;jh.getCompletions=iD;jh.getCompletions=iD;var JA=Object.freeze({__proto__:null,getObjectForCompletion:hD,getCompletions:iD});Ia("as",JA);var $b=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");$b.rewriteToCaptureTopLevelVariables=
Qy;$b.transformImportMeta=function(c,h){return $b.ReplaceVisitor.run(c,function(f){return"MetaProperty"==f.type&&"import"==f.meta.name?h.classToFunction.currentModuleAccessor?$b.nodes.objectLiteral(["url",$b.nodes.member(h.classToFunction.currentModuleAccessor,"id")]):$b.parse('({url: eval("_context").id})').body[0].expression:f})};$b.rewriteToRegisterModuleToCaptureSetters=jD;$b.clearEmptyExports=function(c,h){h=$b.topLevelDeclsAndRefs(c);h=$jscomp.makeIterator(h.scope.exportDecls);for(var f=h.next();!f.done;f=
h.next())f=f.value,f.declaration||!f.specifiers||f.specifiers.length||$b.arr.remove(c.body,f);return c};$b.replaceRefs=function(c,h){var f=$b.topLevelDeclsAndRefs(c),m=f.refs.filter(function(a){return $b.shouldRefBeCaptured(a,f,h)}),n=[];c=$b.ReplaceVisitor.run(c,function(a,d){if("Property"===a.type&&m.includes(a.key)&&a.shorthand)return $b.prop($b.id(a.key.name),a.value);if("ExportNamedDeclaration"===a.type){d=a.declaration;var k=a.specifiers;d&&(d.id?n.push(d.id):d.declarations&&n.push.apply(n,
$jscomp.arrayFromIterable(d.declarations.map(function(b){return b.id}))));k&&k.forEach(function(b){return n.push(b.local)});return a}return"AssignmentExpression"===a.type&&m.includes(a.left)&&h.declarationWrapper?Object.assign({},a,{right:$b.declarationWrapperCall(h.declarationWrapper,null,$b.literal(a.left.name),$b.literal("assignment"),a.right,h.captureObj,h)}):a});return $b.ReplaceVisitor.run(c,function(a,d,k){return m.includes(a)&&!n.includes(a)?$b.member(h.captureObj,a):a})};$b.replaceVarDecls=
function(c,h){var f=$b.topLevelDeclsAndRefs(c);return $b.ReplaceManyVisitor.run(c,function(m){if(!f.varDecls.includes(m)||m.declarations.every(function(l){return!$b.shouldDeclBeCaptured(l,h)}))return m;for(var n=[],a=0;a<m.declarations.length;a++){var d=m.declarations[a];if($b.shouldDeclBeCaptured(d,h)){var k=d.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:d.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};k=h.declarationWrapper&&
d.id.name?$b.declarationWrapperCall(h.declarationWrapper,d,$b.literal(d.id.name),$b.literal(m.kind),k,h.captureObj,h):k;if(d.id.type.includes("Pattern")){var b=$b.generateUniqueName(f.declaredNames,"destructured_1"),e={type:"Identifier",name:b};d=$b.transformPattern(d.id,{parent:e,declaredNames:f.declaredNames}).map(function(l){return l[$b.annotationSym]&&l[$b.annotationSym].capture?$b.assignExpr(h.captureObj,l.declarations[0].id,h.declarationWrapper?$b.declarationWrapperCall(h.declarationWrapper,
null,$b.literal(l.declarations[0].id.name),$b.literal(m.kind),l.declarations[0].init,h.captureObj,h):l.declarations[0].init,!1):l});f.declaredNames.push(b);n.push.apply(n,$jscomp.arrayFromIterable([$b.varDecl(e,k,m.kind)].concat(d)))}else n.push($b.assignExpr(h.captureObj,d.id,k,!1)),h.keepTopLevelVarDecls&&n.push($b.varDecl(d.id,$b.member(h.captureObj,d.id)))}else n.push({type:"VariableDeclaration",kind:m.kind||"var",declarations:[d]})}return n})};$b.generateUniqueName=function(c,h){for(var f=1;-1<
c.indexOf(h);){if(1E3<f)throw Error("Endless loop searching for unique variable "+h);h=h.replace(/_[0-9]+$|$/,"_"+ ++f)}return h};$b.additionalIgnoredDecls=function(c,h){h=$b.topLevelDeclsAndRefs(c);for(var f=[],m=0;m<h.scope.varDecls.length;m++){var n=h.scope.varDecls[m],a=$b.Path(h.scope.varDeclPaths[m]).slice(0,-1).get(c);"ForStatement"!==a.type&&"ForInStatement"!==a.type&&"ForOfStatement"!==a.type&&"ExportNamedDeclaration"!==a.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(d){return d.name}).concat(f.map(function(d){return d.id.name}))};
$b.additionalIgnoredRefs=function(c,h){h=$b.topLevelDeclsAndRefs(c);for(var f=[],m=0;m<h.scope.varDecls.length;m++){var n=h.scope.varDecls[m],a=$b.Path(h.scope.varDeclPaths[m]).slice(0,-1).get(c);"ForStatement"!==a.type&&"ForInStatement"!==a.type&&"ForOfStatement"!==a.type||f.push.apply(f,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(d){return d.name}).concat($b.queryHelpers.declIds(f.map(function(d){return d.id})).map(function(d){return d.name}))};$b.shouldDeclBeCaptured=
function(c,h){return-1===h.excludeDecls.indexOf(c.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(c.id.name))};$b.shouldRefBeCaptured=function(c,h,f){if(h.scope.importSpecifiers.includes(c))return!1;for(var m=0;m<h.scope.exportDecls.length;m++){var n=h.scope.exportDecls[m];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return f.excludeRefs.includes(c.name)||f.includeRefs&&!f.includeRefs.includes(c.name)?!1:!0};$b.replaceClassDecls=function(c,h){if(h.classToFunction)return h.classToFunction.transform(c,
h.classToFunction);var f=$b.topLevelDeclsAndRefs(c);if(!f.classDecls.length)return c;for(var m=c.body.length-1;0<=m;m--){var n=c.body[m];n.id&&f.classDecls.includes(n)&&c.body.splice(m+1,0,$b.assignExpr(h.captureObj,n.id,n.id,!1))}return c};$b.splitExportDeclarations=function(c,h){h=c.body;for(var f=c.body=[],m=0;m<h.length;m++){var n=h[m];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)f.push(n);else for(var a=
n.declaration.declarations,d=0;d<a.length;d++)f.push({type:"ExportNamedDeclaration",specifiers:[],declaration:$b.varDecl(a[d].id,a[d].init,n.declaration.kind)})}return c};$b.insertCapturesForExportedImports=Ry;$b.insertCapturesForExportDeclarations=function(c,h){for(var f=[],m=0;m<c.body.length;m++){var n=c.body[m];f.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var a=n.declaration,
d=$b.generateUniqueName($b.topLevelDeclsAndRefs(c).declaredNames,"$"+a.raw.split('"').join(""));n.declaration=$b.id(d);$b.arr.pushAt(f,$b.assignExpr(h.captureObj,d,a.raw,!1),f.indexOf(n))}else n.declaration.declarations?f.push.apply(f,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(k){var b=k.id;h.declarationWrapper&&(k.init.callee&&k.init.callee.name===h.declarationWrapper.name||(b=$b.declarationWrapperCall(h.declarationWrapper,k,$b.literal(k.id.name),$b.literal("assignment"),k.id,
h.captureObj,h)));return $b.assignExpr(h.captureObj,k.id,b,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&f.push($b.assignExpr(h.captureObj,n.declaration.id,n.declaration.id,!1))}c.body=f;return c};$b.insertCapturesForImportDeclarations=function(c,h){c.body=c.body.reduce(function(f,m){return f.concat("ImportDeclaration"===m.type&&m.specifiers.length?[m].concat(m.specifiers.map(function(n){return $b.assignExpr(h.captureObj,n.local,n.local,!1)})):[m])},
[]);return c};$b.insertDeclarationsForExports=function(c,h){for(var f=$b.topLevelDeclsAndRefs(c),m=[],n=0;n<c.body.length;n++){var a=c.body[n];h.classToFunction&&"ExportDefaultDeclaration"===a.type&&a.declaration&&!a.declaration.type.includes("Declaration")&&("Identifier"===a.declaration.type||a.declaration.id)?m=m.concat([$b.varDeclOrAssignment(c,{type:"VariableDeclarator",id:a.declaration,init:$b.member(h.captureObj,a.declaration)}),a]):"ExportNamedDeclaration"!==a.type||!a.specifiers.length||a.source?
m.push(a):m=m.concat(a.specifiers.map(function(d){return f.declaredNames.includes(d.local.name)?null:$b.varDeclOrAssignment(c,{type:"VariableDeclarator",id:d.local,init:$b.member(h.captureObj,d.local)})}).filter(Boolean)).concat(a)}c.body=m;return c};$b.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,h){h=[];for(var f=0;f<c.body.length;f++){var m=c.body[f];"ExportDefaultDeclaration"===m.type&&"FunctionDeclaration"===m.declaration.type&&m.declaration.id&&m.declaration.async&&(h.push(m.declaration),
m.declaration={type:"Identifier",name:m.declaration.id.name});h.push(m)}c.body=h;return c};$b.es6ModuleTransforms=function(c,h){c.body=c.body.reduce(function(f,m){if("ExportNamedDeclaration"===m.type)if(m.source){var n=d=m.source;var a=m.specifiers.map(function(k){return{type:"ExpressionStatement",expression:$b.exportFromImport({type:"Literal",value:k.exported.name},{type:"Literal",value:k.local.name},d,h.moduleExportFunc,h.moduleImportFunc)}})}else a=m.declaration?(a=m.declaration.declarations)?
a.map(function(k){h.excludeDecls.push(k.id);return $b.varDecl(k.id,$b.assignExpr(h.captureObj,k.id,h.declarationWrapper?$b.declarationWrapperCall(h.declarationWrapper,null,$b.literal(k.id.name),$b.literal(m.declaration.kind),k,h.captureObj,h):k.init,!1),m.declaration.kind)}).concat(a.map(function(k){return $b.exportCallStmt(h.moduleExportFunc,k.id.name,k.id)})):[m.declaration].concat($b.exportCallStmt(h.moduleExportFunc,m.declaration.id.name,m.declaration.id)):m.specifiers.map(function(k){return $b.exportCallStmt(h.moduleExportFunc,
k.exported.name,$b.shouldDeclBeCaptured({id:k.local},h)?$b.member(h.captureObj,k.local):k.local)});else if("ExportDefaultDeclaration"===m.type)a=m.declaration&&m.declaration.id?[m.declaration].concat($b.exportCallStmt(h.moduleExportFunc,"default",m.declaration.id)):[$b.exportCallStmt(h.moduleExportFunc,"default",m.declaration)];else if("ExportAllDeclaration"===m.type){n={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var d=m.source;a=[{type:"ForInStatement",body:{type:"ExpressionStatement",
expression:$b.exportFromImport(n,n,d,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:n,init:null}]},right:$b.importCall(null,d,h.moduleImportFunc)}];h.excludeRefs.push(n.name);h.excludeDecls.push(n.name)}else a="ImportDeclaration"===m.type?m.specifiers.length?m.specifiers.map(function(k){return $b.varDeclAndImportCall(c,k.local,"ImportSpecifier"===k.type&&k.imported.name||"ImportDefaultSpecifier"===k.type&&"default"||
null,m.source,h.moduleImportFunc)}):$b.importCallStmt(null,m.source,h.moduleImportFunc):[m];return f.concat(a)},[]);return c};$b.putFunctionDeclsInFront=function(c,h){var f=$b.topLevelDeclsAndRefs(c).scope,m=f.funcDecls;if(!m.length)return c;for(var n=[],a=m.length;a--;){var d=m[a];if(d.id&&$b.shouldDeclBeCaptured(d,h)){var k=f.funcDeclPaths[a].slice(0,-1),b=$b.Path(k).get(f.node);k={type:"Identifier",name:d.id.name};var e=h.declarationWrapper?$b.declarationWrapperCall(h.declarationWrapper,d,$b.literal(k.name),
$b.literal("function"),k,h.captureObj,h):k,l=Object.assign({},d);Array.isArray(b)?b.splice(b.indexOf(d),1,$b.exprStmt(d.id)):"ExportNamedDeclaration"===b.type?(b=f.node.body.indexOf(b),-1<b&&f.node.body.splice(b,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:d.id,local:d.id}]})):"ExportDefaultDeclaration"===b.type&&(b.declaration=d.id);n.unshift($b.assignExpr(h.captureObj,k,e,!1));n.unshift(l)}}c.body=n.concat(c.body);return c};$b.computeDefRanges=function(c,h){c=$b.topLevelDeclsAndRefs(c);
return $b.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(f){return f.id})).reduce(function(f,m){f[m.id.name]||(f[m.id.name]=[]);f[m.id.name].push({type:m.type,start:m.start,end:m.end});return f},{})};$b.transformPattern=function(c,h){return"ArrayPattern"===c.type?$b.transformArrayPattern(c,h):"ObjectPattern"===c.type?$b.transformObjectPattern(c,h):[]};$b.transformArrayPattern=function(c,h){for(var f=h.declaredNames,m=$b.annotationSym,n=[],
a=0;a<c.elements.length;a++){var d=c.elements[a];if("Identifier"===d.type)d=$b.varDecl(d,$b.member(h.parent,$b.id(a),!0)),d[m]={capture:!0},n.push(d);else if("RestElement"===d.type)d=$b.varDecl(d.argument,{type:"CallExpression",arguments:[{type:"Literal",value:a}],callee:$b.member(h.parent,$b.id("slice"),!1)}),d[m]={capture:!0},n.push(d);else if("AssignmentPattern"==d.type)d=$b.varDecl(d.left,$b.conditional($b.binaryExpr($b.member(h.parent,$b.id(a),!0),"===",$b.id("undefined")),d.right,$b.member(h.parent,
$b.id(a),!0))),d[m]={capture:!0},n.push(d);else{var k=$b.id($b.generateUniqueName(f,h.parent.name+"$"+a)),b=$b.varDecl(k,$b.member(h.parent,a));f.push(k.name);n.push(b);n.push.apply(n,$jscomp.arrayFromIterable($b.transformPattern(d,{parent:k,declaredNames:f})))}}return n};$b.transformObjectPattern=function(c,h){for(var f=h.declaredNames,m=$b.annotationSym,n=[],a=0;a<c.properties.length;a++){var d=c.properties[a];if("RestElement"==d.type){var k=c.properties.map(function(l){return l.key&&l.key.name}).filter(Boolean),
b=$b.nodes.varDecl(d.argument.name,$b.nodes.objectLiteral([])),e=$b.nodes.varDecl(d.argument.name,$b.id(d.argument.name));d=$b.nodes.exprStmt($b.nodes.funcCall($b.nodes.funcExpr({},[],$b.nodes.forIn("__key",h.parent,$b.nodes.block.apply($b.nodes,[].concat($jscomp.arrayFromIterable(k.length?k.map(function(l){return $b.nodes.ifStmt($b.nodes.binaryExpr($b.nodes.id("__key"),"===",$b.nodes.literal(l)),{type:"ContinueStatement",label:null},null)}):[]),[$b.nodes.exprStmt($b.nodes.assign($b.nodes.member(d.argument.name,
$b.nodes.id("__key"),!0),$b.nodes.member(h.parent,$b.nodes.id("__key"),!0)))]))))));e[m]={capture:!0};n.push(b,e,d)}else"Identifier"==d.value.type?(b=$b.varDecl(d.value,$b.member(h.parent,d.key)),b[m]={capture:!0},n.push(b)):"AssignmentPattern"==d.value.type?(b=$b.varDecl(d.value.left,$b.conditional($b.binaryExpr($b.member(h.parent,d.key),"===",$b.id("undefined")),d.value.right,$b.member(h.parent,d.key))),b[m]={capture:!0},n.push(b)):(b=$b.id($b.generateUniqueName(f,h.parent.name+"$"+d.key.name)),
e=$b.varDecl(b,$b.member(h.parent,d.key)),e[m]={capture:!1},f.push(b.name),n.push.apply(n,$jscomp.arrayFromIterable([e].concat($b.transformPattern(d.value,{parent:b,declaredNames:f})))))}return n};$b.varDeclOrAssignment=function(c,h,f){return-1<$b.topLevelDeclsAndRefs(c).declaredNames.indexOf(h.id.name)?$b.exprStmt($b.assign(h.id,h.init)):{declarations:[h],kind:f||"var",type:"VariableDeclaration"}};$b.assignExpr=function(c,h,f,m){return $b.exprStmt($b.assign($b.member(c,h,m),f||$b.id("undefined")))};
$b.exportFromImport=function(c,h,f,m,n){return $b.exportCall(m,c,$b.importCall(h,f,n))};$b.varDeclAndImportCall=function(c,h,f,m,n){return $b.varDecl(h,$b.importCall(f,m,n))};$b.importCall=function(c,h,f){"string"===typeof c&&(c=$b.literal(c));return{arguments:[h].concat(c||[]),callee:f,type:"CallExpression"}};$b.importCallStmt=function(c,h,f){return $b.exprStmt($b.importCall(c,h,f))};$b.exportCall=function(c,h,f){"string"===typeof h&&(h=$b.literal(h));f=$b.obj.deepCopy(f);return $b.funcCall(c,h,
f)};$b.exportCallStmt=function(c,h,f){return $b.exprStmt($b.exportCall(c,h,f))};$b.declarationWrapperCall=function(c,h,f,m,n,a,d){if(h){var k=[],b=!1;if(h["x-lively-object-meta"]){b=h["x-lively-object-meta"];h=b.start;var e=b.end,l=b.evalId,p=b.sourceAccessorName;b=!0;k.push("start",$b.nodes.literal(h),"end",$b.nodes.literal(e))}void 0===l&&d.hasOwnProperty("evalId")&&(l=d.evalId,b=!0);void 0===p&&d.hasOwnProperty("sourceAccessorName")&&(p=d.sourceAccessorName,b=!0);void 0!==l&&k.push("evalId",$b.nodes.literal(l));
p&&k.push("moduleSource",$b.nodes.id(p));if(b)return $b.funcCall(c,f,m,n,a,$b.nodes.objectLiteral(k))}return $b.funcCall(c,f,m,n,a)};$b.obj=ff;$b.string=Bg;$b.chain=yk;$b.arr=Ne;$b.fun=Tj;$b.Path=Sg;$b.parse=Ej;$b.stringify=Dj;$b.query=wo;$b.transform=yu;$b.nodes=Hq;$b.Visitor=Md;$b.ReplaceManyVisitor=An;$b.ReplaceVisitor=vo;var yp=$b.nodes;$b.member=yp.member;$b.prop=yp.prop;$b.varDecl=yp.varDecl;$b.assign=yp.assign;$b.id=yp.id;$b.literal=yp.literal;$b.exprStmt=yp.exprStmt;$b.conditional=yp.conditional;
$b.binaryExpr=yp.binaryExpr;$b.funcCall=yp.funcCall;var a1=$b.query;$b.topLevelDeclsAndRefs=a1.topLevelDeclsAndRefs;$b.queryHelpers=a1.helpers;var b1=$b.transform;$b.transformSingleExpression=b1.transformSingleExpression;$b.wrapInStartEndCall=b1.wrapInStartEndCall;$b.rewriteToCaptureTopLevelVariables=Qy;$b.rewriteToCaptureTopLevelVariables=Qy;$b.rewriteToRegisterModuleToCaptureSetters=jD;$b.rewriteToRegisterModuleToCaptureSetters=jD;$b.insertCapturesForExportedImports=Ry;$b.insertCapturesForExportedImports=
Ry;$b.annotationSym=Symbol("lively.ast-destructuring-transform");var KA=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:Qy,rewriteToRegisterModuleToCaptureSetters:jD,insertCapturesForExportedImports:Ry}),c1={__esModule:!0,default:function(){return{manipulateOptions:function(c,h){h.plugins.push("jsx")}}}},Pda=c1=c1["default"],Qda={},d1=Qda=Array.isArray,wH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,e1={};e1="object"==typeof wH&&wH&&wH.Object===
Object&&wH;var Rda={},Sda="object"==typeof self&&self&&self.Object===Object&&self,zu=Rda=e1||Sda||Function("return this")(),Tda={},xH=Tda=zu.Symbol,Uda={},f1=Object.prototype,Vda=f1.hasOwnProperty,Wda=f1.toString,LA=xH?xH.toStringTag:void 0,Xda=Uda=function(c){var h=Vda.call(c,LA),f=c[LA];try{c[LA]=void 0;var m=!0}catch(a){}var n=Wda.call(c);m&&(h?c[LA]=f:delete c[LA]);return n},g1={},Yda=Object.prototype.toString;g1=function(c){return Yda.call(c)};var Zda={},$da=g1,h1=xH?xH.toStringTag:void 0,mP=
Zda=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":h1&&h1 in Object(c)?Xda(c):$da(c)},aea={},nP=aea=function(c){return null!=c&&"object"==typeof c},bea={},cea=bea=function(c){return"string"==typeof c||!d1(c)&&nP(c)&&"[object String]"==mP(c)},dea={},oP=dea=function(c){return c},eea={},fea=eea=function(c){return"symbol"==typeof c||nP(c)&&"[object Symbol]"==mP(c)},gea={},ux=gea=function(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},hea={},iea=hea=function(c){if(!ux(c))return!1;
c=mP(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},i1={};i1=zu["__core-js_shared__"];var jea={},pP=i1,j1=function(){var c=/[^.]+$/.exec(pP&&pP.keys&&pP.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),kea=jea=function(c){return!!j1&&j1 in c},k1={},lea=Function.prototype.toString;k1=function(c){if(null!=c){try{return lea.call(c)}catch(h){}return c+""}return""};var mea={},nea=k1,oea=/^\[object .+?Constructor\]$/,pea=RegExp("^"+
Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qea=mea=function(c){return!ux(c)||kea(c)?!1:(iea(c)?pea:oea).test(nea(c))},l1={};l1=function(c,h){return null==c?void 0:c[h]};var rea={},sea=l1,m1=rea=function(c,h){c=sea(c,h);return qea(c)?c:void 0},tea={},n1=tea=function(){try{var c=m1(Object,"defineProperty");c({},"",{});return c}catch(h){}}(),uea={},o1=uea=function(c,
h){var f=-1,m=c.length;for(h||(h=Array(m));++f<m;)h[f]=c[f];return h},vea={},p1=Object.create,qP=vea=function(){function c(){}return function(h){if(!ux(h))return{};if(p1)return p1(h);c.prototype=h;h=new c;c.prototype=void 0;return h}}(),wea={},xea=/^(?:0|[1-9]\d*)$/,yea=wea=function(c,h){var f=typeof c;h=null==h?9007199254740991:h;return!!h&&("number"==f||"symbol"!=f&&xea.test(c))&&-1<c&&0==c%1&&c<h},zea={},q1=zea=function(c,h,f){switch(f.length){case 0:return c.call(h);case 1:return c.call(h,f[0]);
case 2:return c.call(h,f[0],f[1]);case 3:return c.call(h,f[0],f[1],f[2])}return c.apply(h,f)},r1={};r1=function(c){return function(){return c}};var Aea={},Bea=r1,Cea=Aea=n1?function(c,h){return n1(c,"toString",{configurable:!0,enumerable:!1,value:Bea(h),writable:!0})}:oP,Dea={},Eea=Date.now,s1=Dea=function(c){var h=0,f=0;return function(){var m=Eea(),n=16-(m-f);f=m;if(0<n){if(800<=++h)return arguments[0]}else h=0;return c.apply(void 0,arguments)}},Fea={},Gea=Fea=s1(Cea),Hea={},t1=Hea=m1(zu,"WeakMap"),
Iea={},Jea=Iea=function(c,h){for(var f=-1,m=null==c?0:c.length;++f<m&&!1!==h(c[f],f,c););return c},u1={},Kea=/\s/;u1=function(c){for(var h=c.length;h--&&Kea.test(c.charAt(h)););return h};var v1={},Lea=u1,Mea=/^\s+/;v1=function(c){return c?c.slice(0,Lea(c)+1).replace(Mea,""):c};var Nea={},Oea=v1,w1=0/0,Pea=/^[-+]0x[0-9a-f]+$/i,Qea=/^0b[01]+$/i,Rea=/^0o[0-7]+$/i,Sea=parseInt,Tea=Nea=function(c){if("number"==typeof c)return c;if(fea(c))return w1;ux(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=
ux(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=Oea(c);var h=Qea.test(c);return h||Rea.test(c)?Sea(c.slice(2),h?2:8):Pea.test(c)?w1:+c},Uea={},Vea=Uea=function(c,h,f,m){var n=c.length;for(f+=m?1:-1;m?f--:++f<n;)if(h(c[f],f,c))return f;return-1},x1={},y1=1/0;x1=function(c){if(!c)return 0===c?c:0;c=Tea(c);return c===y1||c===-y1?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Wea={},Xea=x1,z1=Wea=function(c){c=Xea(c);var h=c%1;return c===c?h?c-h:c:0},Yea={},Zea=Yea=function(c){return c!==c},
A1={};A1=function(c,h,f){--f;for(var m=c.length;++f<m;)if(c[f]===h)return f;return-1};var B1={},$ea=A1;B1=function(c,h,f){return h===h?$ea(c,h,f):Vea(c,Zea,f)};var afa={},bfa=B1,cfa=afa=function(c,h){return!(null==c||!c.length)&&-1<bfa(c,h,0)},dfa={},efa=dfa=function(){},ffa={},rP=ffa=function(){},vt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,gfa={};sK.prototype=qP(rP.prototype);var sP=gfa=sK.prototype.constructor=sK,Sy="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,hfa={};tK.prototype=qP(rP.prototype);var C1=hfa=tK.prototype.constructor=tK,D1={};D1=function(c){if(c instanceof sP)return c.clone();var h=new C1(c.__wrapped__,c.__chain__);h.__actions__=o1(c.__actions__);h.__index__=c.__index__;h.__values__=c.__values__;return h};var ifa={},Z6=sP,FS=C1,Y6=d1,X6=nP,a7=D1,$6=Object.prototype.hasOwnProperty;uK.prototype=rP.prototype;var jfa=ifa=uK.prototype.constructor=uK,kfa={},yH=kfa=t1&&new t1,lfa={},E1=lfa=yH?function(c){return yH.get(c)}:
efa,F1={};F1={};var G1={},H1=F1,mfa=Object.prototype.hasOwnProperty;G1=function(c){for(var h=c.name+"",f=H1[h],m=mfa.call(H1,h)?f.length:0;m--;){var n=f[m],a=n.func;if(null==a||a==c)return n.name}return h};var nfa={},ofa=G1,pfa=nfa=function(c){var h=ofa(c),f=jfa[h];if("function"!=typeof f||!(h in sP.prototype))return!1;if(c===f)return!0;h=E1(f);return!!h&&c===h[0]},qfa={},I1=qfa=yH?function(c,h){yH.set(c,h);return c}:oP,rfa={},zH=rfa=function(c){return function(){var h=arguments;switch(h.length){case 0:return new c;
case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var f=qP(c.prototype);h=c.apply(f,h);return ux(h)?h:f}},AH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sfa={},tfa=sfa=function(c,h,f){function m(){return((this||AH)&&(this||AH)!==
zu&&(this||AH)instanceof m?a:c).apply(n?f:this||AH,arguments)}var n=h&1,a=zH(c);return m},ufa={},vfa=Math.max,J1=ufa=function(c,h,f,m){var n=-1,a=c.length,d=f.length,k=-1,b=h.length,e=vfa(a-d,0),l=Array(b+e);for(m=!m;++k<b;)l[k]=h[k];for(;++n<d;)if(m||n<a)l[f[n]]=c[n];for(;e--;)l[k++]=c[n++];return l},wfa={},xfa=Math.max,K1=wfa=function(c,h,f,m){var n=-1,a=c.length,d=-1,k=f.length,b=-1,e=h.length,l=xfa(a-k,0),p=Array(l+e);for(m=!m;++n<l;)p[n]=c[n];for(l=n;++b<e;)p[l+b]=h[b];for(;++d<k;)if(m||n<a)p[l+
f[d]]=c[n++];return p},yfa={},zfa=yfa=function(c,h){for(var f=c.length,m=0;f--;)c[f]===h&&++m;return m},Afa={},L1=Afa=s1(I1),Bfa={},Cfa=/\{\n\/\* \[wrapped with (.+)\] \*/,Dfa=/,? & /,Efa=Bfa=function(c){return(c=c.match(Cfa))?c[1].split(Dfa):[]},Ffa={},Gfa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hfa=Ffa=function(c,h){var f=h.length;if(!f)return c;var m=f-1;h[m]=(1<f?"& ":"")+h[m];h=h.join(2<f?", ":" ");return c.replace(Gfa,"{\n/* [wrapped with "+h+"] */\n")},M1={},Ifa=[["ary",128],["bind",1],
["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];M1=function(c,h){Jea(Ifa,function(f){var m="_."+f[0];h&f[1]&&!cfa(c,m)&&c.push(m)});return c.sort()};var Jfa={},Kfa=M1,N1=Jfa=function(c,h,f){h+="";return Gea(c,Hfa(h,Kfa(Efa(h),f)))},Lfa={},O1=Lfa=function(c,h,f,m,n,a,d,k,b,e){var l=h&8;h=(h|(l?32:64))&~(l?64:32);h&4||(h&=-4);n=[c,h,n,l?a:void 0,l?d:void 0,l?void 0:a,l?void 0:d,k,b,e];f=f.apply(void 0,n);pfa(c)&&L1(f,n);f.placeholder=m;return N1(f,
c,h)},Mfa={},P1=Mfa=function(c){return c.placeholder},Nfa={},Ofa=Math.min,Pfa=Nfa=function(c,h){for(var f=c.length,m=Ofa(h.length,f),n=o1(c);m--;){var a=h[m];c[m]=yea(a,f)?n[a]:void 0}return c},Qfa={},BH=Qfa=function(c,h){for(var f=-1,m=c.length,n=0,a=[];++f<m;){var d=c[f];if(d===h||"__lodash_placeholder__"===d)c[f]="__lodash_placeholder__",a[n++]=f}return a},kD="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Rfa={},d7=J1,e7=K1,c7=zfa,HS=zH,g7=O1,b7=P1,h7=Pfa,f7=BH,
i7=zu,Q1=Rfa=GS,CH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Sfa={},Tfa=Sfa=function(c,h,f){function m(){for(var a=arguments.length,d=Array(a),k=a,b=P1(m);k--;)d[k]=arguments[k];k=3>a&&d[0]!==b&&d[a-1]!==b?[]:BH(d,b);a-=k.length;return a<f?O1(c,h,Q1,m.placeholder,void 0,d,k,void 0,void 0,f-a):q1((this||CH)&&(this||CH)!==zu&&(this||CH)instanceof m?n:c,this||CH,d)}var n=zH(c);return m},DH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,Ufa={},Vfa=Ufa=function(c,h,f,m){function n(){for(var k=-1,b=arguments.length,e=-1,l=m.length,p=Array(l+b),q=(this||DH)&&(this||DH)!==zu&&(this||DH)instanceof n?d:c;++e<l;)p[e]=m[e];for(;b--;)p[e++]=arguments[++k];return q1(q,a?f:this||DH,p)}var a=h&1,d=zH(c);return n},R1={},Wfa=Math.min;R1=function(c,h){var f=c[1],m=h[1],n=f|m,a=128==m&&8==f||128==m&&256==f&&c[7].length<=h[8]||384==m&&h[7].length<=h[8]&&8==f;if(!(131>n||a))return c;m&1&&(c[2]=h[2],n|=f&1?0:4);if(f=h[3])a=c[3],c[3]=a?J1(a,
f,h[4]):f,c[4]=a?BH(c[3],"__lodash_placeholder__"):h[4];if(f=h[5])a=c[5],c[5]=a?K1(a,f,h[6]):f,c[6]=a?BH(c[5],"__lodash_placeholder__"):h[6];(f=h[7])&&(c[7]=f);m&128&&(c[8]=null==c[8]?h[8]:Wfa(c[8],h[8]));null==c[9]&&(c[9]=h[9]);c[0]=h[0];c[1]=n;return c};var S1={},Xfa=R1,T1=Math.max;S1=function(c,h,f,m,n,a,d,k){var b=h&2;if(!b&&"function"!=typeof c)throw new TypeError("Expected a function");var e=m?m.length:0;e||(h&=-97,m=n=void 0);d=void 0===d?d:T1(z1(d),0);k=void 0===k?k:z1(k);e-=n?n.length:0;
if(h&64){var l=m,p=n;m=n=void 0}var q=b?void 0:E1(c);a=[c,h,f,m,n,l,p,a,d,k];q&&Xfa(a,q);c=a[0];h=a[1];f=a[2];m=a[3];n=a[4];k=a[9]=void 0===a[9]?b?0:c.length:T1(a[9]-e,0);!k&&h&24&&(h&=-25);f=h&&1!=h?8==h||16==h?Tfa(c,h,k):32!=h&&33!=h||n.length?Q1.apply(void 0,a):Vfa(c,h,f,m):tfa(c,h,f);return N1((q?I1:L1)(f,a),c,h)};var Yfa={},Zfa=S1,$fa=Yfa=function(c,h,f){h=f?void 0:h;h=c&&null==h?c.length:h;return Zfa(c,128,void 0,void 0,void 0,void 0,h)},tP={};Object.defineProperty(tP,"__esModule",{value:!0});
tP.default=function(c){var h=c.types,f=function(n){return function(a){var d=n[a.type];if(d)return d(a);throw Error(a.type+" could not be transformed");}},m=function(n,a){var d=a.opts;a=d.useNew;var k=void 0===a?!1:a;a=d.module;var b=d.function;d=d.useVariables;var e=void 0===d?!1:d,l=d=void 0;!0===e?d=/^[A-Z]/:(0,aga.default)(e)&&(d=new RegExp(e));var p=k?h.newExpression:h.callExpression;l=function(q){return function(u){return p(q,[u])}};a?(k=n.scope.generateUidIdentifier(k?"JSXNode":"jsx"),l=l(k),
a=h.importDeclaration([h.importDefaultSpecifier(k)],h.stringLiteral(a)),n.findParent(function(q){return q.isProgram()}).unshiftContainer("body",a)):b?(n=b.split(".").map((0,U1.default)(h.identifier,1)).reduce((0,U1.default)(h.memberExpression,2)),l=l(n)):l=bga.default;return{variablesRegex:d,jsxObjectTransformer:l}};return{inherits:Pda,visitor:{JSXElement:function(n,a){a.get("jsxConfig")||a.set("jsxConfig",m(n,a));var d=a.get("jsxConfig"),k=d.variablesRegex,b=d.jsxObjectTransformer,e=function(D){return h.stringLiteral(D.name)},
l=function(D){return h.stringLiteral(D.namespace.name+":"+D.name.name)},p=f({JSXIdentifier:function(D){return h.identifier(D.name)},JSXMemberExpression:function(D){return h.memberExpression(p(D.object),p(D.property))}}),q=f({JSXIdentifier:k?function(D){return k.test(D.name)?h.identifier(D.name):e(D)}:e,JSXNamespacedName:l,JSXMemberExpression:p});d=function(D){return D.expression};var u=f({JSXIdentifier:e,JSXNamespacedName:l,JSXMemberExpression:p}),w=f({StringLiteral:function(D){return D},JSXExpressionContainer:d}),
y=function(D){var L=[],I=[];D.forEach(function(S){switch(S.type){case "JSXAttribute":L||(L=[]);var V=u(S.name);V=cga.default.keyword.isIdentifierNameES6(V.value)?h.identifier(V.value):V;L.push(h.objectProperty(V,w(S.value)));break;case "JSXSpreadAttribute":L&&(I.push(h.objectExpression(L)),L=null);I.push(S.argument);break;default:throw Error(S.type+" cannot be used as a JSX attribute");}});L&&0<L.length&&I.push(h.objectExpression(L));return 0===I.length?h.objectExpression([]):1===I.length?I[0]:h.callExpression(a.addHelper("extends"),
I)};l=function(D){return b(h.objectExpression([h.objectProperty(h.identifier(dga),q(D.openingElement.name)),h.objectProperty(h.identifier(ega),y(D.openingElement.attributes)),h.objectProperty(h.identifier(fga),D.closingElement?C(D.children):h.nullLiteral())]))};var A=f({JSXText:function(D){if(a.opts.noTrim)return h.stringLiteral(D.value);D=D.value.replace(/\n\s*/g,"");return""===D?null:h.stringLiteral(D)},JSXElement:l,JSXExpressionContainer:d}),C=function(D){return h.arrayExpression(D.map(A).filter(Boolean).reduce(function(L,
I){var S=0<L.length?L[L.length-1]:null;return"StringLiteral"===I.type&&S&&"StringLiteral"===S.type?[].concat(IS(L.slice(0,-1)),[h.stringLiteral(S.value+I.value)]):[].concat(IS(L),[I])},[]))};n.replaceWith(l(n.node))}}}};var aga=lD(cea),bga=lD(oP),U1=lD($fa),cga=lD(xA),dga="elementName",ega="attributes",fga="children",bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.declare=function(c){return function(h,f,m){for(var n,a,d=$jscomp.makeIterator(Object.keys(V1)),k=d.next();!k.done;k=d.next())if(k=
k.value,!h[k]){if(null==a){a=h;var b=null;"string"===typeof a.version&&/^7\./.test(a.version)&&(b=Object.getPrototypeOf(a),!b||Object.prototype.hasOwnProperty.call(b,"version")&&Object.prototype.hasOwnProperty.call(b,"transform")&&Object.prototype.hasOwnProperty.call(b,"template")&&Object.prototype.hasOwnProperty.call(b,"types")||(b=null));a=Object.assign({},b,a)}a[k]=V1[k](a)}return c(null!=(n=a)?n:h,f||{},m)}};var V1={assertVersion:function(c){return function(h){var f=c.version;if("number"===typeof h){if(!Number.isInteger(h))throw Error("Expected string or integer value.");
h="^"+h+".0.0-0"}if("string"!==typeof h)throw Error("Expected string or integer value.");var m=Error.stackTraceLimit;"number"===typeof m&&25>m&&(Error.stackTraceLimit=25);var n="7."===f.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+f+"\". You'll need to update your @babel/core version."):Error('Requires Babel "'+h+'", but was loaded with "'+f+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');
"number"===typeof m&&(Error.stackTraceLimit=m);throw Object.assign(n,{code:"BABEL_VERSION_UNSUPPORTED",version:f,range:h});}},targets:function(){return function(){return{}}},assumption:function(){return function(){}}},W1=Object.freeze({__proto__:null,"default":bs,__esModule:bs.__esModule,declare:bs.declare}),vx={};Object.defineProperty(vx,"__esModule",{value:!0});vx.default=void 0;var gga=(0,bs.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(h,
f){f.plugins.push("optionalCatchBinding")}}});vx.default=gga;var X1=Object.freeze({__proto__:null,"default":vx,__esModule:vx.__esModule}),hga="default"in W1?bs:W1,iga="default"in X1?vx:X1,EH={};Object.defineProperty(EH,"__esModule",{value:!0});EH.default=void 0;var jga=(0,hga.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:iga.default,visitor:{CatchClause:function(h){if(!h.node.param){var f=h.scope.generateUidIdentifier("unused");h.get("param").replaceWith(f)}}}}});
EH.default=jga;var FH={};Object.defineProperty(FH,"__esModule",{value:!0});FH.default=void 0;var kga=(0,bs.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",manipulateOptions:function(h,f){f.plugins.push("importMeta")}}});FH.default=kga;var $g=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");$g.ensureJSXPlugin=function(){$g.transformJSX&&("undefined"===typeof $g.babel||$g.babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||$g.babel.registerPlugin("transform-jsx",
$g.transformJSX.default))};$g.ensureOptionalCatchBinding=function(){$g.catchBinding&&("undefined"===typeof $g.babel||$g.babel.availablePlugins["optional-catch-binding"]||(lively||global.lively).FreezerRuntime||$g.babel.registerPlugin("optional-catch-binding",$g.catchBinding.default))};$g.ensureImportMeta=function(){$g.importMeta&&("undefined"===typeof $g.babel||$g.babel.availablePlugins["syntax-import-meta"]||(lively||global.lively).FreezerRuntime||$g.babel.registerPlugin("syntax-import-meta",$g.importMeta.default))};
$g.stringifyFunctionWithoutToplevelRecorder=cw;$g.es5Transpilation=dw;$g.capturing=KA;$g.capturing=KA;$g.capturing=KA;$g.parseFunction=nr;$g.stringify=Dj;$g.ReplaceVisitor=vo;$g.transformJSX=tP;$g.catchBinding=EH;$g.importMeta=FH;$g.stringifyFunctionWithoutToplevelRecorder=cw;$g.stringifyFunctionWithoutToplevelRecorder=cw;$g.es5Transpilation=dw;$g.es5Transpilation=dw;var lga=Object.freeze({__proto__:null,capturing:KA,stringifyFunctionWithoutToplevelRecorder:cw,es5Transpilation:dw}),Cf=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");
Cf.processInlineCodeTransformOptions=function(c,h){if(!c.comments)return h;c=c.comments.find(function(m){return m.text.startsWith("lively.vm ")});if(!c)return h;try{var f=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(h,f)}catch(m){return h}};Cf.evalCodeTransform=pr;Cf.evalCodeTransformOfSystemRegisterSetters=wt;Cf.copyProperties=function(c,h,f){f=void 0===f?[]:f;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(m){return-1===f.indexOf(m)&&
Object.defineProperty(h,m,Object.getOwnPropertyDescriptor(c,m))})};Cf.arr=Ne;Cf.Path=Sg;Cf.parse=Ej;Cf.stringify=Dj;Cf.transform=yu;Cf.query=wo;Cf.nodes=Hq;Cf.capturing=KA;Cf.es5Transpilation=dw;Cf.getGlobal=or;var GH=Cf.nodes;Cf.id=GH.id;Cf.literal=GH.literal;Cf.member=GH.member;Cf.objectLiteral=GH.objectLiteral;Cf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Cf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Cf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";
Cf.defaultClassToFunctionConverterName="initializeES6ClassForLively";Cf.defaultClassToFunctionConverterName="initializeES6ClassForLively";Cf.defaultClassToFunctionConverterName="initializeES6ClassForLively";Cf.evalCodeTransform=pr;Cf.evalCodeTransform=pr;Cf.evalCodeTransformOfSystemRegisterSetters=wt;Cf.evalCodeTransformOfSystemRegisterSetters=wt;var Vf=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");Vf._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,
runtime:null,context:Vf.getGlobal(),varRecorderName:Vf.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var h=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];h&&(c=Object.assign(c,h))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:Vf.startEvalFunctionName},
computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:Vf.endEvalFunctionName},computed:!0});return c};Vf.runEval=Ty;Vf.finishEval=function(c,h,f,m,n,a,d){m.wrapInStartEndCall&&(delete n[Vf.startEvalFunctionName],delete n[Vf.endEvalFunctionName]);c?(f.isError=!0,f.value=c):f.value=h;f.value instanceof Promise&&(f.isPromise=!0);if(m.sync){if(f.processSync(m),"function"===typeof m.onEndEval)m.onEndEval(c,h)}else f.process(m).then(function(){"function"===
typeof d&&d(null,f);"function"===typeof m.onEndEval&&m.onEndEval(c,h);return f},function(k){"function"===typeof d&&d(k,void 0);"function"===typeof m.onEndEval&&m.onEndEval(k,void 0);return f}).then(a.resolve,a.reject)};Vf.syncEval=mD;Vf.tryToWaitForPromise=function(c,h){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var f={},m=new Promise(function(n){return setTimeout(n,h,f)});return Promise.race([m,c.value]).then(function(n){return Object.assign(c,n!==f?{promiseStatus:"fulfilled",
promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",promisedValue:n})})};Vf.arr=Ne;Vf.obj=ff;Vf.string=Bg;Vf.Path=Sg;Vf.promise=Uf;Vf.Closure=ji;Vf.evalCodeTransform=pr;Vf.printEvalResult=Py;Vf.getGlobal=or;Vf.defaultTopLevelVarRecorderName="__lvVarRecorder";Vf.startEvalFunctionName="lively.vm-on-eval-start";Vf.endEvalFunctionName="lively.vm-on-eval-end";Vf._eval=Vf.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();
var MA=function(){this.isEvalResult=!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};MA.prototype.addWarning=function(c){this.warnings.push(c);return c};MA.prototype.printed=function(c){c=void 0===c?{}:c;this.value=Vf.printEvalResult(this,c)};MA.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};MA.prototype.process=function(c){var h=this;if(h.isPromise&&c.waitForPromise)return Vf.tryToWaitForPromise(h,
c.promiseTimeout).then(function(){(c.inspect||c.asString)&&h.printed(c);return h});(c.inspect||c.asString)&&h.printed(c);return Promise.resolve(h)};Vf.EvalResult=MA;var wx=Vf.defaultTopLevelVarRecorderName;Vf.defaultTopLevelVarRecorderName=wx;Vf.defaultTopLevelVarRecorderName=wx;Vf.getGlobal=or;Vf.getGlobal=or;Vf.runEval=Ty;Vf.runEval=Ty;Vf.syncEval=mD;Vf.syncEval=mD;var mga=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:wx,getGlobal:or,runEval:Ty,syncEval:mD}),Vg=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");
Vg.ensureImportsAreImported=function(c,h,f){var m,n,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(m=Vg.parse(h),n=m.body,a=n.filter(function(k){return"ImportDeclaration"===k.type}),d.yield(Promise.all(a.map(function(k){return c.normalize(k.source.value,f).then(function(b){k.source.value=b;return c.get(b)||c.import(b)})})).catch(function(k){console.error("Error ensuring imports: "+k.message);throw k;}),2)):d.return(Vg.stringify(m))})};Vg.hasUnimportedImports=
function(c,h,f){h=Vg.parse(h).body.filter(function(m){return"ImportDeclaration"===m.type});return 0<Vg.arr.uniq(h.map(function(m){return m.source.value})).filter(Boolean).filter(function(m){return!c.get(c.decanonicalize(m,f))}).length};Vg.babelTranspilerForAsyncAwaitCode=function(c,h,f,m){return function(n,a){a=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,code:!0,ast:!1},a);n=h.transform("(async function(__rec) {\n"+n+"\n}).call(this);",a).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};Vg.babelPluginTranspilerForAsyncAwaitCode=function(c,h,f,m){return function(n,a){var d=c.babelOptions||{},k=[];k.push(h.presetES2015);d.stage3&&k.push({plugins:h.pluginsStage3});d.stage2&&k.push({plugins:h.pluginsStage2});d.stage1&&k.push({plugins:h.pluginsStage1});a=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:f,babelrc:!1,presets:k,moduleIds:!1,code:!0,ast:!1},a);n=h.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",a).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};Vg.getEs6Transpiler=function(c,h,f){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===c.transpiler){var m=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return m?Vg.babelTranspilerForAsyncAwaitCode(c,m,h.targetModule,f):c.import(c.transpiler).then(function(d){return Vg.babelTranspilerForAsyncAwaitCode(c,d,h.targetModule,f)})}if("plugin-babel"===c.transpiler){m=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");
var n=c.get(m);return n?Vg.babelPluginTranspilerForAsyncAwaitCode(c,n,h.targetModule,f):c.import(m).then(function(d){return Vg.babelPluginTranspilerForAsyncAwaitCode(c,d,h.targetModule,f)})}if("lively.transpiler"===c.transpiler){var a=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,h.targetModule,f);return function(d,k){return a.transpileDoit(d,k)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};Vg.runEval=xt;Vg.evalEnd=function(c,h,f,m){c.get("@lively-env").evaluationEnd(f.targetModule);
c.debug&&console.log("[lively.module] runEval in module "+f.targetModule+" done");Vg.emit("lively.vm/doitresult",{code:h,result:m,waitForPromise:f.waitForPromise,targetModule:f.targetModule},Date.now(),c);return m};Vg.parse=Ej;Vg.nodes=Hq;Vg.stringify=Dj;Vg.emit=bq;var HH=Vg.nodes;Vg.funcCall=HH.funcCall;Vg.member=HH.member;Vg.id=HH.id;Vg.literal=HH.literal;Vg.arr=Ne;Vg.vmRunEval=Ty;Vg.runEval=xt;Vg.runEval=xt;var nga=Object.freeze({__proto__:null,runEval:xt}),ui=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");
ui.obj=ff;var xx=function(){};xx.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Promise.reject("runEval(source, options) not yet implemented for "+f.constructor.name))})};xx.prototype.keysOfObject=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+f.constructor.name))})};ui.EvalStrategy=xx;var Au=function(){return ui.EvalStrategy.apply(this,
arguments)||this};$jscomp.inherits(Au,ui.EvalStrategy);Au.prototype.runEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(m){return{isError:!0,value:m}}}))})};Au.prototype.keysOfObject=function(c,h){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(a){return f.runEval(a,
h)},c),2);m=n.yieldResult;return n.return({completions:m.completions,prefix:m.startLetters})})};ui.SimpleEvalStrategy=Au;var cs=function(){return ui.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(cs,ui.EvalStrategy);cs.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};cs.prototype.runEval=function(c,h){var f=this,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){h=
f.normalizeOptions(h);m=h.System||lively.modules.System;n={};m.config({meta:(n[h.targetModule]={format:"esm"},n)});return a.return(lively.vm.runEval(c,h))})};cs.prototype.keysOfObject=function(c,h){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,h)},c),2);f=m.yieldResult;return m.return({completions:f.completions,prefix:f.startLetters})})};ui.LivelyVmEvalStrategy=cs;
var ds=function(){return ui.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(ds,ui.LivelyVmEvalStrategy);ds.prototype.sourceForRemote=function(c,h,f){var m=ui.obj.isString(f.context)?f.context:!1;f=ui.obj.dissoc(f,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(h)+",\n      options = "+JSON.stringify(f)+';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+
m+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};ds.prototype.runEval=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(f.remoteEval(f.sourceForRemote("eval",c,h),h))})};ds.prototype.keysOfObject=function(c,h){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(f.remoteEval(f.sourceForRemote("keysOfObject",
c,h),h))})};ds.prototype.remoteEval=function(c,h){var f=this,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.setCatchFinallyBlocks(2),a.yield(f.basicRemoteEval(c,h),4);if(2!=a.nextAddress)return m=a.yieldResult,a.return("string"===typeof m?JSON.parse(m):m);n=a.enterCatchBlock();return a.return({isError:!0,value:"Remote eval failed: "+(m||n)})})};ds.prototype.basicRemoteEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Not yet implemented");
})};ui.RemoteEvalStrategy=ds;var zp=function(c){var h=ui.RemoteEvalStrategy.call(this)||this;h.url=c||h.constructor.defaultURL;return h};$jscomp.inherits(zp,ui.RemoteEvalStrategy);zp.prototype.normalizeOptions=function(c){c=ui.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};zp.prototype.basicRemoteEval=function(c,h){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(h=f.normalizeOptions(h),
m="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(f[m]({method:"POST",body:c},h.serverEvalURL),2)):n.return(n.yieldResult)})};zp.prototype.basicRemoteEval_web=function(c,h){var f,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:f=$jscomp.makeIterator(h.match(/[^:]+:\/\/[^\/]+/)||[h]);m=f.next().value;n=System.get("@system-env").worker?window.location:document.location;if(a=n.origin!==m)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=n.origin;b.setCatchFinallyBlocks(2);return b.yield(window.fetch(h,c),4);case 4:d=b.yieldResult;b.leaveTryBlock(3);break;case 2:throw k=b.enterCatchBlock(),Error("Cannot reach server at "+h+": "+k.message);case 3:if(!d.ok)throw Error("Server at "+h+": "+d.statusText);return b.return(d.text())}})};zp.prototype.basicRemoteEval_node=function(c,h){var f,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){f=System._nodeRequire("url").parse;
m=System._nodeRequire(h.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},f(h));return a.return(new Promise(function(d,k){var b=m.request(n,function(e){e.setEncoding("utf8");var l="";e.on("data",function(p){return l+=p});e.on("end",function(){return d(l)});e.on("error",function(p){return k(p)})});b.on("error",function(e){return k(e)});b.end(c.body)}))})};$jscomp.global.Object.defineProperties(zp,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
ui.HttpEvalStrategy=zp;var yx=function(c,h){var f=ui.RemoteEvalStrategy.call(this)||this;f.l2lClient=c;f.targetId=h;return f};$jscomp.inherits(yx,ui.RemoteEvalStrategy);yx.prototype.basicRemoteEval=function(c,h){var f=this,m,n,a,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return m=f,n=m.l2lClient,a=m.targetId,b.yield(n.sendToAndWait(a,"remote-eval",{source:c},{ackTimeout:h.ackTimeout||3500}),2);d=b.yieldResult;(k=d.data)&&k.value&&k.value.isEvalResult&&(k=
k.value);return b.return(k)})};ui.L2LEvalStrategy=yx;ui.EvalStrategy=xx;ui.EvalStrategy=xx;ui.SimpleEvalStrategy=Au;ui.SimpleEvalStrategy=Au;ui.LivelyVmEvalStrategy=cs;ui.LivelyVmEvalStrategy=cs;ui.HttpEvalStrategy=zp;ui.HttpEvalStrategy=zp;ui.L2LEvalStrategy=yx;ui.L2LEvalStrategy=yx;var NA=Object.freeze({__proto__:null,RemoteEvalStrategy:ds,EvalStrategy:xx,SimpleEvalStrategy:Au,LivelyVmEvalStrategy:cs,HttpEvalStrategy:zp,L2LEvalStrategy:yx});Ia("by",NA);var Yi=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
Yi.runEval=fw;Yi.syncEval=Vy;Yi.completions=JA;Yi.completions=JA;Yi.completions=JA;Yi.globalEval=mga;Yi.esmEval=nga;Yi.defaultTopLevelVarRecorderName=wx;Yi.defaultTopLevelVarRecorderName=wx;Yi.defaultClassToFunctionConverterName="initializeES6ClassForLively";Yi.defaultClassToFunctionConverterName="initializeES6ClassForLively";Yi.evalCodeTransform=pr;Yi.evalCodeTransform=pr;Yi.evalCodeTransformOfSystemRegisterSetters=wt;Yi.evalCodeTransformOfSystemRegisterSetters=wt;Yi.runEval=fw;Yi.runEval=fw;Yi.syncEval=
Vy;Yi.syncEval=Vy;Yi.evalStrategies=NA;Yi.evalStrategies=NA;Yi.evalStrategies=NA;var Y1=Object.freeze({__proto__:null,completions:JA,defaultTopLevelVarRecorderName:wx,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:pr,evalCodeTransformOfSystemRegisterSetters:wt,runEval:fw,syncEval:Vy,evalStrategies:NA});Ia("bx",Y1);var uh=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");uh.string=Bg;uh.arr=Ne;uh.parse=Ej;uh.query=wo;uh.runEval=fw;uh.objMetaSym=
Symbol.for("lively-object-meta");uh.moduleSym=Symbol.for("lively-module-meta");uh.descriptorCache=new Map;var zx=function(c,h){c&&h?this.update(h,c):this.reset()};zx.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};zx.prototype.update=function(c,h){this._moduleSource===c&&h&&this._sourceLocation&&h.start===this._sourceLocation.start&&h.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=h)};zx.prototype.changeSource=function(c){var h=this.moduleSource,f=this.sourceLocation,m=f.start;f=f.end;h=h.slice(0,m)+c+h.slice(f);this.update(h,{start:m,end:m+c.length});this._source=c;return this};zx.prototype.toString=function(){var c=uh.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(zx.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=uh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
uh.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=uh.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=uh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=uh.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,f=uh.arr.uniq(this.moduleImports.map(function(n){return n.local})),m=uh.arr.withoutAll(h,f);c=uh.arr.withoutAll(uh.query.findGlobalVarRefs(c).map(function(n){return n.name}),
h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:m,undeclaredNames:c}}}});uh.SourceDescriptor=zx;var mm=function(c,h){this.obj=c;this.System=h;this.reset()};mm.forObjectWithModuleSource=function(c,h,f){c=this.for(c,f);c.ensureSourceDescriptor(c.sourceLocation,h);return c};mm.for=function(c,h){var f=uh.descriptorCache.get(c);f||(f=new this(c,h),uh.descriptorCache.set(c,f));return f};mm.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};mm.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};mm.prototype.changeSourceSync=function(c){var h=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=uh.runEval(c,{sync:!0,targetModule:this.module.id,System:h});if(c.isError)throw c.value;return this};mm.prototype.changeSource=
function(c){var h=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(f=h,m=f.module,n.yield(m.changeSourceAction(function(a){if(a!==h.moduleSource)throw Error("source of module "+m.id+" and source of "+h+" don't match");h._basicChangeSource(c);return h.moduleSource}),2)):n.return(h)})};mm.prototype._modifiedSource=function(c){var h=this.moduleSource,f=this.sourceLocation,m=f.start;f=f.end;return{moduleSource:h.slice(0,m)+c+h.slice(f),sourceLocation:{start:m,
end:m+c.length}}};mm.prototype._renamedSource=function(c){var h=this.ast,f=h.type,m=h.id;h=m.start;m=m.end;if("ClassDeclaration"!==f)throw Error("Don't know how to rename "+f);return this._modifiedSource(this.source.slice(0,h)+c+this.source.slice(m))};mm.prototype._basicChangeSource=function(c){var h=this.meta,f=this._modifiedSource(c),m=f.moduleSource;f=f.sourceLocation;this.reset();this.meta=Object.assign({},h,{moduleSource:m},f);this._sourceLocation=f;this._moduleSource=m;this._source=c;return this};
mm.prototype.toString=function(){var c=uh.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var h=this.module.shortName()}catch(f){h="NO MODULE!"}return this.constructor.name+"("+c+" in "+h+")"};$jscomp.global.Object.defineProperties(mm.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,h=this.System;if(!c[uh.moduleSym])throw Error("runtime object of source descriptor has no module data");
var f=c[uh.moduleSym];c=f.package.name;f=f.pathInPackage;c=f.includes("://")?f:c+"/"+f;h=this.System._scripting.module(h,c);h._frozenModule||h._source||!this.moduleSource||h.setSource(this.moduleSource);return h}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[uh.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[uh.objMetaSym]},set:function(c){this.obj[uh.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,h=c.start;c=c.end;if(void 0===h||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:h,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=uh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=uh.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=uh.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=uh.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,f=uh.arr.uniq(this.moduleImports.map(function(n){return n.local})),m=uh.arr.withoutAll(h,f);
c=uh.arr.withoutAll(uh.query.findGlobalVarRefs(c).map(function(n){return n.name}),h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:f,localDeclaredNames:m,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=uh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});Ia("D",mm);uh.RuntimeSourceDescriptor=mm;var we=lively.FreezerRuntime.recorderFor("lively.classes/util.js");we.superclasses=wK;we.getClassHierarchy=
oD;we.withSuperclasses=pD;we.inheritsFrom=xK;we.changeClass=yK;we.isClass=zK;we.isOverridden=function(c,h){for(;c!=Object;)if(c=c[Symbol.for("lively-instance-superclass")],c.prototype.hasOwnProperty(h))return!0;return!1};we.lexicalClassMembers=AK;we.runtimeClassMembers=BK;we.runtimeClassMembersInProtoChain=function(c){return we.arr.uniq(we.arr.flatmap(we.arr.without(we.withSuperclasses(c),Object),function(h){return we.runtimeClassMembers(h)}))};we.runtimeNonStaticMembers=function(c){var h=c.prototype,
f=we.obj.getOwnPropertyDescriptors(h);return we.arr.withoutAll(Object.keys(f),["constructor"]).map(function(m){var n=f[m],a="function"===typeof n.value?"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:m,value:"method"===a?n.value:"get"===a?n.get:"set"===a?n.set:null,kind:a,owner:h}})};we.runtimeNonstaticClassMembersInProtoChain=function(c){return we.arr.uniq(we.arr.flatmap(we.arr.without(we.withSuperclasses(c),Object),function(h){return we.runtimeNonStaticMembers(h)}))};we.runtimeStaticClassMembers=
CK;we.runtimeStaticClassMembersInProtoChain=DK;we.arr=Ne;we.obj=ff;we.Path=Sg;we.RuntimeSourceDescriptor=mm;we.superclasses=wK;we.superclasses=wK;var IH=Symbol.for("lively-instance-initialize");we.initializeSymbol=IH;we.initializeSymbol=IH;we.initializeSymbol=IH;var uP=Symbol.for("lively-instance-restorer");we.instanceRestorerSymbol=uP;we.instanceRestorerSymbol=uP;we.instanceRestorerSymbol=uP;var JH=Symbol.for("lively-instance-superclass");we.superclassSymbol=JH;we.superclassSymbol=JH;we.superclassSymbol=
JH;var KH=Symbol.for("lively-module-meta");we.moduleMetaSymbol=KH;we.moduleMetaSymbol=KH;we.moduleMetaSymbol=KH;var LH=Symbol.for("lively-object-meta");we.objMetaSymbol=LH;we.objMetaSymbol=LH;we.objMetaSymbol=LH;var MH=Symbol.for("lively-klass-changes-subscriber");we.moduleSubscribeToToplevelChangesSym=MH;we.moduleSubscribeToToplevelChangesSym=MH;we.moduleSubscribeToToplevelChangesSym=MH;we.getClassHierarchy=oD;we.getClassHierarchy=oD;we.withSuperclasses=pD;we.withSuperclasses=pD;we.inheritsFrom=
xK;we.inheritsFrom=xK;we.changeClass=yK;we.changeClass=yK;we.isClass=zK;we.isClass=zK;we.lexicalClassMembers=AK;we.lexicalClassMembers=AK;we.runtimeClassMembers=BK;we.runtimeClassMembers=BK;we.runtimeStaticClassMembers=CK;we.runtimeStaticClassMembers=CK;we.runtimeStaticClassMembersInProtoChain=DK;we.runtimeStaticClassMembersInProtoChain=DK;var vP=Ia("F",function(){function c(d){return d.replace(a,function(k,b){return b[b.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
f={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},m={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(d){return f[d]||"ASCII_"+d.charCodeAt(0)},a=/([\s-]+.)/g;return function(d){d=c(d);return 0<=h.indexOf(d)?d:0===d.length?"_null_":d.replace(/^\d/,function(k){return m[k]}).replace(/[^\w\$_]/g,n)}}());we.toJsIdentifier=vP;we.toJsIdentifier=vP;we.toJsIdentifier=vP;var xh=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
xh.hasManagedProperties=function(c){return c.hasOwnProperty(xh.defaultPropertiesKey)};xh.prepareClassForManagedPropertiesAfterCreation=qD;xh.prepareClassForProperties=function(c,h,f){xh.ensurePropertyInitializer(c);var m=h.valueStoreProperty,n=h.defaultGetter,a=h.defaultSetter,d=c.prototype;Object.keys(f).forEach(function(k){var b=f[k],e=d.hasOwnProperty(k)&&d.__lookupGetter__(k);if(!e||e._wasGenerated)e=b.get||"function"===typeof n&&function(){return n.call(this,k)}||function(){return this[m][k]},
e._wasGenerated=!0,d.__defineGetter__(k,e);e=d.hasOwnProperty(k)&&d.__lookupSetter__(k);if(!e||e._wasGenerated)if(b.hasOwnProperty("set")||!b.readOnly)b=b.set||"function"===typeof a&&function(l){a.call(this,k,l)}||function(l){this[m][k]=l},b._wasGenerated=!0,d.__defineSetter__(k,b)})};xh.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,f=h[xh.propertiesAndSettingsCacheSym];
if(f)if(f.classHierarchy!=xh.getClassHierarchy(h)){var m=xh.propertiesAndSettingsInHierarchyOf(h);f=m.properties;m=m.propertySettings;h[xh.propertiesAndSettingsCacheSym]={properties:f,propertySettings:m,order:xh.obj.sortKeysWithBeforeAndAfterConstraints(f),classHierarchy:xh.getClassHierarchy(h)};xh.prepareClassForProperties(h,m,f)}else return f;return h[xh.propertiesAndSettingsCacheSym]||xh.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(h){var f=this.propertiesAndPropertySettings();xh.prepareInstanceForProperties(this,f.propertySettings,f.properties,h,f.order);return this}})};xh.propertiesAndSettingsInHierarchyOf=function(c){for(var h=Object.assign({},xh.defaultPropertySettings),f={},m=xh.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=xh.obj.valuesInPropertyHierarchy(c,"properties"),a=0;a<m.length;a++){var d=m[a];d&&"object"===typeof d&&Object.assign(h,d)}for(a=0;a<n.length;a++)if(m=
n[a],"object"!==typeof m)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+m);else for(var k in m)f.hasOwnProperty(k)?Object.assign(f[k],m[k]):f[k]=m[k];return{properties:f,propertySettings:h}};xh.prepareInstanceForProperties=function(c,h,f,m,n){var a=h.valueStoreProperty;n=n||xh.obj.sortKeysWithBeforeAndAfterConstraints(f);h=[];var d={};c.hasOwnProperty(a)||(c[a]={});for(var k=0;k<n.length;k++){var b=n[k],e=f[b],l=e.derived,p=!!e.foldable,q=e.hasOwnProperty("defaultValue")?
e.defaultValue:void 0;Array.isArray(q)&&(q=q.slice());l||p||(c[a][b]=q);var u=void 0;e.hasOwnProperty("initialize")?(u=d[b]={initialize:q},h.push(b)):l&&void 0!==q?(u=d[b]={derived:q},h.push(b)):p&&void 0!==q&&(u=d[b]={folded:q},h.push(b));m&&b in m&&(e.readOnly?console.warn("Trying to initialize read-only property "+b+" in "+c+", skipping setting value"):(u||(u=d[b]={},h.push(b)),u.value=m[b]))}for(k=0;k<h.length;k++)m=h[k],n=d[m],a=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(f[m].initialize.call(c,
a?n.value:n.initialize),a&&(c[m]=n.value)):n.hasOwnProperty("derived")?c[m]=a?n.value:n.derived:n.hasOwnProperty("folded")?c[m]=a?n.value:n.folded:a&&(c[m]=n.value)};xh.obj=ff;xh.getClassHierarchy=oD;xh.defaultPropertiesSettingKey="propertySettings";xh.defaultPropertiesKey="properties";xh.defaultInstanceInitializerMethod="initializeProperties";xh.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");xh.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
xh.prepareClassForManagedPropertiesAfterCreation=qD;xh.prepareClassForManagedPropertiesAfterCreation=qD;var bf=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");bf.adoptObject=gw;bf.setSuperclass=rD;bf.installValueDescriptor=function(c,h,f){f=Object.assign(f,bf.defaultPropertyDescriptorForValue);f.value.displayName=f.key;if(f.needsDeclaringClass){var m=f.value.originalFunction||f.value;f.value=Object.assign(function(){return m.call.apply(m,[this,h].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:m,toString:function(){return m.toString()},displayName:f.key})}Object.defineProperty(c,f.key,f)};bf.installGetterSetterDescriptor=function(c,h){h=Object.assign(h,bf.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,h.key,h)};bf.installMethods=function(c,h,f){f&&f.forEach(function(d){d.value?bf.installValueDescriptor(c,c,d):bf.installGetterSetterDescriptor(c,d)});h&&h.forEach(function(d){d.value?bf.installValueDescriptor(c.prototype,c,d):bf.installGetterSetterDescriptor(c.prototype,
d)});c.prototype[bf.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(bf.initializeSymbol)&&c.prototype[bf.initializeSymbol].isDefaultInitializer&&c[bf.superclassSymbol].prototype[bf.initializeSymbol]&&delete c.prototype[bf.initializeSymbol]:(Object.defineProperty(c.prototype,bf.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[bf.initializeSymbol].isDefaultInitializer=!0,c.prototype[bf.initializeSymbol].displayName="lively-initialize");
h=h.map(function(d){return d.key}).concat(["constructor","arguments","caller"]);for(var m=Object.getOwnPropertyNames(c.prototype),n=0;n<m.length;n++){var a=m[n];h.includes(a)||delete c.prototype[a]}f=f.map(function(d){return d.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(c);for(m=0;m<h.length;m++)n=h[m],f.includes(n)||delete c[n]};bf.ensureInitializeStub=function(c){c===Object||c.prototype[bf.initializeSymbol]||(Object.defineProperty(c.prototype,bf.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[bf.initializeSymbol].displayName="lively-initialize-stub")};bf.initializeClass=Sb;bf.prepareClassForManagedPropertiesAfterCreation=qD;bf.superclassSymbol=JH;bf.moduleSubscribeToToplevelChangesSym=MH;bf.moduleMetaSymbol=KH;bf.objMetaSymbol=LH;bf.initializeSymbol=IH;bf.constructorArgMatcher=/\([^\\)]*\)/;bf.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};bf.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var NH="function"===typeof Object.setPrototypeOf?function(c,h){return Object.setPrototypeOf(c,h)}:function(c,h){return c.__proto__=h};bf.setPrototypeOf=NH;bf.setPrototypeOf=NH;bf.setPrototypeOf=NH;bf.adoptObject=gw;bf.adoptObject=gw;bf.setSuperclass=rD;bf.setSuperclass=rD;bf.initializeClass=Sb;bf.initializeClass=Sb;bf.initializeClass._get=function n(h,f,m){null===h&&(h=Function.prototype);var a=Object.getOwnPropertyDescriptor(h,f);if(void 0===a)return h=
Object.getPrototypeOf(h),null===h?void 0:n(h,f,m);if("value"in a)return a.value;f=a.get;return void 0===f?void 0:f.call(m)};bf.initializeClass._set=function d(f,m,n,a){var k=Object.getOwnPropertyDescriptor(f,m);void 0===k?(f=Object.getPrototypeOf(f),null!==f&&d(f,m,n,a)):"value"in k&&k.writable?k.value=n:(m=k.set,void 0!==m&&m.call(a,n));return n};var Ax=Object.freeze({__proto__:null,setPrototypeOf:NH,adoptObject:gw,setSuperclass:rD,initializeClass:Sb}),bd=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
bd.parse=sD;bd.Color=function(f){this._listeners={};this.subscribe(bd.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(bd.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(bd.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(bd.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(bd.Events.INT_UPDATED,this._INTUpdated);this.parse(f)};bd.parse=sD;bd.parse=sD;bd.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};bd.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};bd.absround=function(f){return.5+f<<0};bd.hue2rgb=function(f,m,n){0>n&&(n+=1);1<n&&--n;return n<1/6?f+6*(m-f)*n:.5>n?m:n<2/3?f+(m-f)*(2/3-n)*6:f};bd.p2v=function(f){return bd.isPercent.test(f)?
bd.absround(2.55*parseInt(f)):f};bd.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;bd.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;bd.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;bd.isPercent=/^\d+(\.\d+)*%$/;bd.hexBit=/([0-9a-f])/gi;bd.leadHex=/^#/;bd.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;bd.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;bd.Color.prototype._decimal=
0;bd.Color.prototype._hex="#000000";bd.Color.prototype._red=0;bd.Color.prototype._green=0;bd.Color.prototype._blue=0;bd.Color.prototype._hue=0;bd.Color.prototype._saturation=0;bd.Color.prototype._lightness=0;bd.Color.prototype._brightness=0;bd.Color.prototype._alpha=1;bd.Color.prototype.parse=function(f){if("undefined"===typeof f)return this;switch(!0){case isFinite(f):this.decimal(f);this.output=bd.Color.INT;break;case f instanceof bd.Color:this.copy(f);break;default:switch(typeof f){case "object":this.set(f);
break;case "string":switch(!0){case bd.namedColors.hasOwnProperty(f):f=bd.namedColors[f];f=f.replace(bd.leadHex,"");this.decimal(parseInt(f,16));break;case bd.isHex.test(f):f=f.replace(bd.leadHex,"");3==f.length&&(f=f.replace(bd.hexBit,"$1$1"));this.decimal(parseInt(f,16));break;case bd.isRGB.test(f):f=f.match(bd.matchRGB);this.red(bd.p2v(f[1]));this.green(bd.p2v(f[2]));this.blue(bd.p2v(f[3]));this.alpha(parseFloat(f[5])||1);this.output=(bd.isPercent.test(f[1])?2:1)+(f[5]?2:0);break;case bd.isHSL.test(f):f=
f.match(bd.matchHSL),this.hue(parseInt(f[1])),this.saturation(parseInt(f[2])),this.lightness(parseInt(f[3])),this.alpha(parseFloat(f[5])||1),this.output=f[5]?6:5}}}return this};bd.Color.prototype.clone=function(){return new bd.Color(this.decimal())};bd.Color.prototype.copy=function(f){this.set(f.decimal());return this};bd.Color.prototype.set=function(f,m){if(1==arguments.length)if("object"===typeof f)for(var n in f){if("function"===typeof this[n])this[n](f[n])}else isFinite(f)&&this.decimal(f);else if("function"===
typeof this[f])this[f](m);return this};bd.Color.prototype.interpolate=function(f,m){f instanceof bd.Color||(f=new bd.Color(f));this._red=bd.absround(+this._red+(f._red-this._red)*m);this._green=bd.absround(+this._green+(f._green-this._green)*m);this._blue=bd.absround(+this._blue+(f._blue-this._blue)*m);this._alpha=bd.absround(+this._alpha+(f._alpha-this._alpha)*m);this.broadcast(bd.Events.RGB_UPDATED);this.broadcast(bd.Events.UPDATED);return this};bd.Color.prototype._RGB2HSL=function(){var f=this._red/
255,m=this._green/255,n=this._blue/255,a=Math.max(f,m,n),d=Math.min(f,m,n),k=(a+d)/2;if(a==d)this._saturation=this._hue=0;else{var b=a-d;d=b/(.5>=k?a+d:2-a-d);this._hue=bd.absround((a==f?(m-n)/b+(m<n?6:0):a==m?(n-f)/b+2:(f-m)/b+4)/6*360);this._saturation=bd.absround(100*d)}this._lightness=bd.absround(100*k);this._brightness=bd.absround(100*a)};bd.Color.prototype._HSL2RGB=function(){var f=this._hue/360,m=this._saturation/100,n=this._lightness/100;m=.5>n?n*(1+m):n+m-n*m;n=2*n-m;this._red=bd.absround(255*
bd.hue2rgb(n,m,f+1/3));this._green=bd.absround(255*bd.hue2rgb(n,m,f));this._blue=bd.absround(255*bd.hue2rgb(n,m,f-1/3))};bd.Color.prototype._HSV2RGB=function(){var f=this._hue/360,m=this._saturation/100,n=this._brightness/100,a=0,d=0,k=0,b=Math.floor(6*f),e=6*f-b;f=n*(1-m);var l=n*(1-e*m);m=n*(1-(1-e)*m);switch(b%6){case 0:a=n;d=m;k=f;break;case 1:a=l;d=n;k=f;break;case 2:a=f;d=n;k=m;break;case 3:a=f;d=l;k=n;break;case 4:a=m;d=f;k=n;break;case 5:a=n,d=f,k=l}this._red=bd.absround(255*a);this._green=
bd.absround(255*d);this._blue=bd.absround(255*k)};bd.Color.prototype._INT2HEX=function(){var f=this._decimal.toString(16);f="000000".substr(0,6-f.length)+f;this._hex="#"+f.toUpperCase()};bd.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};bd.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};bd.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};bd.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};bd.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};bd.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};bd.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};bd.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};bd.Color.prototype._broadcastUpdate=function(){this.broadcast(bd.Events.UPDATED)};
bd.Color.prototype.decimal=function(f){return this._handle("_decimal",f,bd.Events.INT_UPDATED)};bd.Color.prototype.hex=function(f){return this._handle("_hex",f,bd.Events.HEX_UPDATED)};bd.Color.prototype.red=function(f){return this._handle("_red",f,bd.Events.RGB_UPDATED)};bd.Color.prototype.green=function(f){return this._handle("_green",f,bd.Events.RGB_UPDATED)};bd.Color.prototype.blue=function(f){return this._handle("_blue",f,bd.Events.RGB_UPDATED)};bd.Color.prototype.hue=function(f){return this._handle("_hue",
f,bd.Events.HSL_UPDATED)};bd.Color.prototype.saturation=function(f){return this._handle("_saturation",f,bd.Events.HSL_UPDATED)};bd.Color.prototype.lightness=function(f){return this._handle("_lightness",f,bd.Events.HSL_UPDATED)};bd.Color.prototype.brightness=function(f){return this._handle("_brightness",f,bd.Events.HSV_UPDATED)};bd.Color.prototype.alpha=function(f){return this._handle("_alpha",f)};bd.Color.prototype._handle=function(f,m,n){"undefined"!==typeof this[f]&&"undefined"!==typeof m&&(m!=
this[f]&&(this[f]=m,n&&this.broadcast(n)),this.broadcast(bd.Events.UPDATED));return this[f]};bd.Color.prototype.getHex=function(){return this._hex};bd.Color.prototype.getRGB=function(){return"rgb("+[bd.absround(this._red),bd.absround(this._green),bd.absround(this._blue)].join(", ")+")"};bd.Color.prototype.getPRGB=function(){return"rgb("+[bd.absround(100*this._red/255)+"%",bd.absround(100*this._green/255)+"%",bd.absround(100*this._blue/255)+"%"].join(", ")+")"};bd.Color.prototype.getRGBA=function(){return"rgba("+
[bd.absround(this._red),bd.absround(this._green),bd.absround(this._blue),this._alpha].join(", ")+")"};bd.Color.prototype.getPRGBA=function(){return"rgba("+[bd.absround(100*this._red/255)+"%",bd.absround(100*this._green/255)+"%",bd.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};bd.Color.prototype.getHSL=function(){return"hsl("+[bd.absround(this._hue),bd.absround(this._saturation)+"%",bd.absround(this._lightness)+"%"].join(", ")+")"};bd.Color.prototype.getHSLA=function(){return"hsla("+
[bd.absround(this._hue),bd.absround(this._saturation)+"%",bd.absround(this._lightness)+"%",this._alpha].join(", ")+")"};bd.Color.prototype.format=function(f){var m={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},n;for(n in m)f=f.split("%"+n+"%").join(m[n]);return f};bd.Color.prototype.output=0;bd.Color.HEX=0;bd.Color.RGB=1;bd.Color.PRGB=2;bd.Color.RGBA=3;bd.Color.PRGBA=4;bd.Color.HSL=5;bd.Color.HSLA=
6;bd.Color.INT=7;bd.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};bd.Color.prototype._listeners=null;bd.Color.prototype._isSubscribed=function(f){return null!=this._listeners[f]};bd.Color.prototype.subscribe=function(f,m){this._isSubscribed(f)||(this._listeners[f]=[]);
this._listeners[f].push(m)};bd.Color.prototype.unsubscribe=function(f,m){if(this._isSubscribed(f))for(var n=this._listeners[f],a=0,d=n.length;a<d;a++)if(n[a]===m)return n.splice(a,1),this.unsubscribe(f,m)};bd.Color.prototype.broadcast=function(f,m){if(this._isSubscribed(f)){f=this._listeners[f];for(var n=f.length,a=0;a<n;a++)f[a].apply(this,m)}};bd.Color.prototype.tween=function(f,m){m instanceof bd.Color||(m=new bd.Color(m));var n=+new Date,a=this;this.broadcast("tweenStart");var d=setInterval(function(){var k=
Math.min(1,(+new Date-n)/f);a.interpolate(m,k);a.broadcast("tweenProgress");1==k&&(clearInterval(d),a.broadcast("tweenComplete"))},20);return d};bd.Color.prototype.bind=function(f,m){var n=this;this.subscribe("updated",function(){f[m]=n.toString()})};bd.Color.random=function(){return new bd.Color(bd.absround(16777215*Math.random()))};bd.Color.bind=function(f,m){var n=new bd.Color(f[m]);n.bind(f,m);return n};var oh=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");oh.parseUnit=
function(f,m){m||(m=[0,""]);f=String(f);var n=parseFloat(f,10);m[0]=n;m[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return m};oh.unit=function(f){return oh.parseUnit(f)[1]};oh.unitLess=function(f){return oh.parseUnit(f)[0]};oh.genericCssLengthParser=EK;oh.cssLengthToPixels=tD;oh.baseFontSize="16px";if(System.get("@system-env").browser)try{oh.newBaseFontSize=oh.genericCssLengthParser(oh.baseFontSize)(window.getComputedStyle(document.body).fontSize),oh.newBaseFontSize&&"NaN"!==oh.newBaseFontSize.slice(0,
3)&&(oh.baseFontSize=oh.newBaseFontSize)}catch(f){}oh.genericCssLengthParser=EK;oh.genericCssLengthParser=EK;var wP=oh.genericCssLengthParser(oh.baseFontSize);oh.parseCssLength=wP;oh.parseCssLength=wP;oh.parseCssLength=wP;oh.cssLengthToPixels=tD;oh.cssLengthToPixels=tD;var ld=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");ld.rect=zk;ld.pt=kh;ld.num=Gj;ld.string=Bg;ld.grid=qx;ld.cssLengthToPixels=tD;var xf=function(f,m){this.x=f||0;this.y=m||0};xf.ensure=function(f){return f instanceof
ld.Point?f:new ld.Point(f.x,f.y)};xf.polar=function(f,m){return new ld.Point(f*Math.cos(m),f*Math.sin(m))};xf.random=function(f){return new ld.Point(ld.num.randomSmallerInteger(f.x),ld.num.randomSmallerInteger(f.y))};xf.fromLiteral=function(f){return ld.pt(f.x,f.y)};xf.fromTuple=function(f){return ld.pt(f[0],f[1])};xf.prototype.getX=function(){return this.x};xf.prototype.getY=function(){return this.y};xf.prototype.toFixed=function(f){return new ld.Point(this.x.toFixed(f),this.y.toFixed(f))};xf.prototype.addPt=
function(f){return new ld.Point(this.x+f.x,this.y+f.y)};xf.prototype.addXY=function(f,m){return new ld.Point(this.x+f,this.y+m)};xf.prototype.midPt=function(f){return new ld.Point((this.x+f.x)/2,(this.y+f.y)/2)};xf.prototype.subPt=function(f){return new ld.Point(this.x-f.x,this.y-f.y)};xf.prototype.subXY=function(f,m){return new ld.Point(this.x-f,this.y-m)};xf.prototype.scaleBy=function(f,m){return new ld.Point(this.x*f,this.y*(m||f))};xf.prototype.scaleByPt=function(f){return new ld.Point(this.x*
f.x,this.y*f.y)};xf.prototype.negated=function(){return new ld.Point(-this.x,-this.y)};xf.prototype.inverted=function(){return new ld.Point(1/this.x,1/this.y)};xf.prototype.invertedSafely=function(){return new ld.Point(this.x&&1/this.x,this.y&&1/this.y)};xf.prototype.lessPt=function(f){return this.x<f.x&&this.y<f.y};xf.prototype.leqPt=function(f){return this.x<=f.x&&this.y<=f.y};xf.prototype.eqPt=function(f){return this.x==f.x&&this.y==f.y};xf.prototype.equals=function(f){return this.x==f.x&&this.y==
f.y};xf.prototype.withX=function(f){return ld.pt(f,this.y)};xf.prototype.withY=function(f){return ld.pt(this.x,f)};xf.prototype.copy=function(){return new ld.Point(this.x,this.y)};xf.prototype.minPt=function(f,m){m||(m=new ld.Point(0,0));m.x=Math.min(this.x,f.x);m.y=Math.min(this.y,f.y);return m};xf.prototype.maxPt=function(f,m){m||(m=new ld.Point(0,0));m.x=Math.max(this.x,f.x);m.y=Math.max(this.y,f.y);return m};xf.prototype.random=function(){return ld.Point.random(this)};xf.prototype.normalized=
function(){var f=this.r();return ld.pt(this.x/f,this.y/f)};xf.prototype.fastNormalized=function(){var f=this.fastR();return ld.pt(this.x/f,this.y/f)};xf.prototype.dotProduct=function(f){return this.x*f.x+this.y*f.y};xf.prototype.matrixTransform=function(f,m){var n=f.a*this.x+f.c*this.y+f.e;f=f.b*this.x+f.d*this.y+f.f;return m?Object.assign(m,{x:n,y:f}):ld.pt(n,f)};xf.prototype.matrixTransformDirection=function(f,m){var n=f.a*this.x+f.c*this.y;f=f.b*this.x+f.d*this.y;return m?Object.assign(m,{x:n,
y:f}):ld.pt(n,f)};xf.prototype.griddedBy=function(f){return ld.pt(this.x-this.x%f.x,this.y-this.y%f.y)};xf.prototype.roundTo=function(f){return new ld.Point(ld.num.roundTo(this.x,f),ld.num.roundTo(this.y,f))};xf.prototype.dist=function(f){var m=this.x-f.x;f=this.y-f.y;return Math.sqrt(m*m+f*f)};xf.prototype.distSquared=function(f){var m=this.x-f.x;f=this.y-f.y;return m*m+f*f};xf.prototype.nearestPointOnLineBetween=function(f,m){if(f.x==m.x)return ld.pt(f.x,this.y);if(f.y==m.y)return ld.pt(this.x,
f.y);var n=f.x;f=f.y;var a=m.x-n;m=m.y-f;var d=((this.y-f)/a+(this.x-n)/m)/(a/m+m/a);return ld.pt(n+d*a,f+d*m)};xf.prototype.interpolate=function(f,m,n){return void 0===n||n?ld.pt(ld.num.interpolate(f,this.x,m.x),ld.num.interpolate(f,this.y,m.y)):ld.Point.polar(ld.num.interpolate(f,this.r(),m.r()),ld.num.interpolate(f,this.theta(),m.theta()))};xf.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};xf.prototype.fastR=function(){for(var f=this.x*this.x+this.y*this.y,m=17,n=0;6>n;n++)m=
(m+f/m)/2;return m};xf.prototype.theta=function(){return Math.atan2(this.y,this.x)};xf.prototype.asRectangle=function(){return new ld.Rectangle(this.x,this.y,0,0)};xf.prototype.extent=function(f){return new ld.Rectangle(this.x,this.y,f.x,f.y)};xf.prototype.extentAsRectangle=function(){return new ld.Rectangle(0,0,this.x,this.y)};xf.prototype.lineTo=function(f){return new ld.Line(this,f)};xf.prototype.toTuple=function(){return[this.x,this.y]};xf.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
xf.prototype.toString=function(f){return void 0===f||f?ld.string.format("pt(%1.f,%1.f)",this.x,this.y):ld.string.format("pt(%10.d,%10.d)",this.x,this.y)};xf.prototype.inspect=function(){return JSON.stringify(this)};xf.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(xf.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ia("a8",xf);ld.Point=xf;var Qd=function(f,
m,n,a){this.x=f||0;this.y=m||0;this.width=n||0;this.height=a||0};Qd.fromAny=function(f,m){return ld.rect(f.minPt(m),f.maxPt(m))};Qd.fromLiteral=function(f){return new ld.Rectangle(f.x,f.y,f.width,f.height)};Qd.fromTuple=function(f){return new ld.Rectangle(f[0],f[1],f[2],f[3])};Qd.unionPts=function(f){for(var m=f[0],n=f[0],a=1;a<f.length;a++)m=m.minPt(f[a]),n=n.maxPt(f[a]);return ld.rect(m,n)};Qd.ensure=function(f){return f instanceof ld.Rectangle?f:new ld.Rectangle(f.x,f.y,f.width,f.height)};Qd.fromElement=
function(f){if("function"===typeof f.getBoundingClientRect){var m=f.getBoundingClientRect();return ld.rect(m.left,m.top,m.width,m.height)}if("http://www.w3.org/1999/xhtml"==f.namespaceURI){m=ld.cssLengthToPixels(f.style.left||"0px");var n=ld.cssLengthToPixels(f.style.top||"0px"),a=ld.cssLengthToPixels(f.style.width||"0px");f=ld.cssLengthToPixels(f.style.hieght||"0px");return new ld.Rectangle(m,n,a,f)}if("http://www.w3.org/2000/svg"==f.namespaceURI)return new ld.Rectangle(f.x.baseVal.value,f.y.baseVal.value,
f.width.baseVal.value,f.height.baseVal.value);throw Error("Cannot create Rectangle from "+f);};Qd.inset=function(f,m,n,a){void 0===m&&(m=f);void 0===n&&(n=f);void 0===a&&(a=m);return new ld.Rectangle(f,m,n-f,a-m)};Qd.prototype.getX=function(){return this.x};Qd.prototype.getY=function(){return this.y};Qd.prototype.getWidth=function(){return this.width};Qd.prototype.getHeight=function(){return this.height};Qd.prototype.copy=function(){return new ld.Rectangle(this.x,this.y,this.width,this.height)};Qd.prototype.toFixed=
function(f){return new ld.Rectangle(this.x.toFixed(f),this.y.toFixed(f),this.width.toFixed(f),this.height.toFixed(f))};Qd.prototype.withWidth=function(f){return new ld.Rectangle(this.x,this.y,f,this.height)};Qd.prototype.withHeight=function(f){return new ld.Rectangle(this.x,this.y,this.width,f)};Qd.prototype.withX=function(f){return new ld.Rectangle(f,this.y,this.width,this.height)};Qd.prototype.withY=function(f){return new ld.Rectangle(this.x,f,this.width,this.height)};Qd.prototype.withExtent=function(f){return new ld.Rectangle(this.x,
this.y,f.x,f.y)};Qd.prototype.withTopLeft=function(f){return ld.Rectangle.fromAny(f,this.bottomRight())};Qd.prototype.withTopRight=function(f){return ld.Rectangle.fromAny(this.bottomLeft(),f)};Qd.prototype.withBottomRight=function(f){return ld.Rectangle.fromAny(f,this.topLeft())};Qd.prototype.withBottomLeft=function(f){return ld.Rectangle.fromAny(f,this.topRight())};Qd.prototype.withLeftCenter=function(f){return new ld.Rectangle(f.x,this.y,this.width+(this.x-f.x),this.height)};Qd.prototype.withRightCenter=
function(f){return new ld.Rectangle(this.x,this.y,f.x-this.x,this.height)};Qd.prototype.withTopCenter=function(f){return new ld.Rectangle(this.x,f.y,this.width,this.height+(this.y-f.y))};Qd.prototype.withBottomCenter=function(f){return new ld.Rectangle(this.x,this.y,this.width,f.y-this.y)};Qd.prototype.withCenter=function(f){return new ld.Rectangle(f.x-this.width/2,f.y-this.height/2,this.width,this.height)};Qd.prototype.insetBy=function(f){return new ld.Rectangle(this.x+f,this.y+f,this.width-2*f,
this.height-2*f)};Qd.prototype.insetByPt=function(f){return new ld.Rectangle(this.x+f.x,this.y+f.y,this.width-2*f.x,this.height-2*f.y)};Qd.prototype.grid=function(f,m){var n=this.width/m,a=this.height/f;return ld.grid.mapCreate(f,m,function(d,k){return new ld.Rectangle(n*k,a*d,n,a)})};Qd.prototype.divide=function(f){var m=this;return f.map(function(n){return ld.rect(m.x+m.width*n.x,m.y+m.height*n.y,m.width*n.width,m.height*n.height)})};Qd.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};Qd.prototype.lineTo=function(f){var m=this.center(),n=f.center();n=m.lineTo(n);m=this.lineIntersection(n)[0];f=f.lineIntersection(n)[0];return m&&f&&m.lineTo(f)};Qd.prototype.equals=function(f){return f?this.x==f.x&&this.y==f.y&&this.width==f.width&&this.height==f.height:!1};Qd.prototype.inspect=function(){return JSON.stringify(this)};Qd.prototype.topLeft=function(){return new ld.Point(this.x,this.y)};Qd.prototype.topRight=function(){return new ld.Point(this.maxX(),this.y)};Qd.prototype.bottomRight=
function(){return new ld.Point(this.maxX(),this.maxY())};Qd.prototype.bottomLeft=function(){return new ld.Point(this.x,this.maxY())};Qd.prototype.leftCenter=function(){return new ld.Point(this.x,this.center().y)};Qd.prototype.rightCenter=function(){return new ld.Point(this.maxX(),this.center().y)};Qd.prototype.topCenter=function(){return new ld.Point(this.center().x,this.y)};Qd.prototype.bottomCenter=function(){return new ld.Point(this.center().x,this.maxY())};Qd.prototype.extent=function(){return new ld.Point(this.width,
this.height)};Qd.prototype.center=function(){return new ld.Point(this.x+this.width/2,this.y+this.height/2)};Qd.prototype.topEdge=function(){return new ld.Line(this.topLeft(),this.topRight())};Qd.prototype.bottomEdge=function(){return new ld.Line(this.bottomLeft(),this.bottomRight())};Qd.prototype.leftEdge=function(){return new ld.Line(this.topLeft(),this.bottomLeft())};Qd.prototype.rightEdge=function(){return new ld.Line(this.topRight(),this.bottomRight())};Qd.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};Qd.prototype.allPoints=function(){for(var f=this.x,m=this.y,n=this.width,a=this.height,d=[],k=m;k<m+a;k++)for(var b=f;b<f+n;b++)d.push(ld.pt(b,k));return d};Qd.prototype.isNonEmpty=function(f){return 0<this.width&&0<this.height};Qd.prototype.containsRect=function(f){return this.x<=f.x&&this.y<=f.y&&f.maxX()<=this.maxX()&&f.maxY()<=this.maxY()};Qd.prototype.intersects=function(f){return this.intersection(f).isNonEmpty()};Qd.prototype.containsPoint=
function(f){return this.x<=f.x&&f.x<=this.x+this.width&&this.y<=f.y&&f.y<=this.y+this.height};Qd.prototype.translatedBy=function(f){return new ld.Rectangle(this.x+f.x,this.y+f.y,this.width,this.height)};Qd.prototype.scaleByRect=function(f){return new ld.Rectangle(this.x+f.x*this.width,this.y+f.y*this.height,f.width*this.width,f.height*this.height)};Qd.prototype.scaleRectIn=function(f){return new ld.Rectangle((this.x-f.x)/f.width,(this.y-f.y)/f.height,this.width/f.width,this.height/f.height)};Qd.prototype.scaleRectTo=
function(f){var m,n;this.width>this.height?n=this.width:m=this.height;f=n?f.width/n:f.height/m;return this.withExtent(this.extent().scaleBy(f)).withCenter(this.center())};Qd.prototype.expandBy=function(f){return this.insetBy(0-f)};Qd.prototype.translateForInclusion=function(f){var m=f.x,n=f.y,a=m+f.width,d=n+f.height;a>this.right()&&(m-=a-this.right());d>this.bottom()&&(n-=d-this.bottom());m<this.x&&(m=this.x);n<this.y&&(n=this.y);return ld.rect(m,n,f.width,f.height)};Qd.prototype.transformRectForInclusion=
function(f){var m=this.topLeft().maxPt(f.topLeft());f=m.addPt(f.extent());f=this.bottomRight().minPt(f);return ld.rect(m,f)};Qd.prototype.insetByRect=function(f){return new ld.Rectangle(this.x+f.left(),this.y+f.top(),this.width-(f.left()+f.right()),this.height-(f.top()+f.bottom()))};Qd.prototype.outsetByRect=function(f){return new ld.Rectangle(this.x-f.left(),this.y-f.top(),this.width+(f.left()+f.right()),this.height+(f.top()+f.bottom()))};Qd.prototype.interpolate=function(f,m){var n=this.topLeft(),
a=this.bottomRight(),d=m.topLeft();m=m.bottomRight();return ld.Rectangle.fromAny(n.interpolate(f,d),a.interpolate(f,m))};Qd.prototype.intersection=function(f){var m=Math.max(this.x,f.x),n=Math.max(this.y,f.y);return new ld.Rectangle(m,n,Math.min(this.x+this.width,f.x+f.width)-m,Math.min(this.y+this.height,f.y+f.height)-n)};Qd.prototype.union=function(f){return ld.rect(this.topLeft().minPt(f.topLeft()),this.bottomRight().maxPt(f.bottomRight()))};Qd.prototype.lineIntersection=function(f){return this.edges().map(function(m){return m.intersection(f)}).filter(function(m){return!!m})};
Qd.prototype.dist=function(f){var m=this.closestPointToPt(f.center());f=f.closestPointToPt(m);return m.dist(f)};Qd.prototype.relativeToAbsPoint=function(f){return new ld.Point(this.x+this.width*f.x,this.y+this.height*f.y)};Qd.prototype.closestPointToPt=function(f){return ld.pt(Math.min(Math.max(this.x,f.x),this.maxX()),Math.min(Math.max(this.y,f.y),this.maxY()))};Qd.prototype.maxX=function(){return this.x+this.width};Qd.prototype.maxY=function(){return this.y+this.height};Qd.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};Qd.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};Qd.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};Qd.prototype.randomPoint=function(){return ld.Point.random(ld.pt(this.width,this.height)).addPt(this.topLeft())};Qd.prototype.constrainPt=function(f){return f.maxPt(this.topLeft()).minPt(this.bottomRight())};Qd.prototype.left=function(){return this.x};Qd.prototype.right=function(){return this.maxX()};
Qd.prototype.top=function(){return this.y};Qd.prototype.bottom=function(){return this.maxY()};Qd.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};Qd.prototype.toAttributeValue=function(f){f=.01;var m=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&m.push(this.top()):m=m.concat([this.top(),this.right(),this.bottom()]);return m.invoke("roundTo",f||.01)};Qd.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};Qd.prototype.partNamed=function(f){return this[f].call(this)};Qd.prototype.withPartNamed=function(f,m){return this[this.setterName(f)].call(this,m)};Qd.prototype.setterName=function(f){return"with"+f[0].toUpperCase()+f.slice(1)};Qd.prototype.partNameNear=function(f,m,n){f=this.partNameNearest(f,m);return m.dist(this.partNamed(f))<n?f:null};Qd.prototype.partNameNearest=function(f,m){for(var n=1E99,a,d=0;d<f.length;d++){a=f[d];var k=m.dist(this.partNamed(a));if(k<
n){var b=a;n=k}}return b};Qd.prototype.toString=function(){return ld.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};Qd.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(Qd.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});Ia("R",Qd);ld.Rectangle=Qd;var Qi=function(f,m,n){f?f instanceof ld.Point?(m=m||0,void 0===n&&(n=ld.pt(1,1)),this.a=this.ensureNumber(n.x*Math.cos(m)),this.b=this.ensureNumber(n.y*Math.sin(m)),this.c=this.ensureNumber(n.x*-Math.sin(m)),this.d=this.ensureNumber(n.y*Math.cos(m)),this.e=this.ensureNumber(f.x),this.f=this.ensureNumber(f.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(f):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};Qi.prototype.copy=function(){return new ld.Transform(this)};Qi.prototype.fromMatrix=function(f){this.a=this.ensureNumber(f.a);this.b=this.ensureNumber(f.b);this.c=this.ensureNumber(f.c);this.d=this.ensureNumber(f.d);this.e=this.ensureNumber(f.e);this.f=this.ensureNumber(f.f)};Qi.prototype.getRotation=function(){var f=ld.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(f)<this.eps?0:f};Qi.prototype.getScale=function(){var f=this.a,m=this.c;f=Math.sqrt(f*f+m*m);return Math.abs(f-1)<this.eps?1:f};Qi.prototype.getScalePoint=function(){var f=this.a,m=this.b,n=this.c,a=this.d,d=Math.atan2(-n,f);return ld.pt(Math.sqrt(f*f+n*n),Math.abs(m)>Math.abs(a)?m/Math.sin(d):a/Math.cos(d))};Qi.prototype.getTranslation=function(){return ld.pt(this.e,this.f)};Qi.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};Qi.prototype.toSVGAttributeValue=
function(){var f=this.getTranslation();f="translate("+f.x+","+f.y+")";var m=this.getRotation(),n=this.getScalePoint();0!=m&&(f+=" rotate("+this.getRotation()+")");if(1!=n.x||1!=n.y)f+=" scale("+n.x+","+n.y+")";return f};Qi.prototype.toCSSValue=function(f){var m="",n=this.getTranslation();m+="translate("+n.x.toFixed(2)+"px,"+n.y.toFixed(2)+"px)";if(f){n=f.width/2;var a=f.height/2;m+=" translate("+n.toFixed(2)+"px,"+a.toFixed(2)+"px)"}0!=this.getRotation()&&(m+=" rotate("+this.getRotation().toFixed(2)+
"deg)");f&&(n=f.width/2,a=f.height/2,m+=" translate("+(-1*n).toFixed(2)+"px,"+(-1*a).toFixed(2)+"px)");f=this.getScalePoint();if(1!=f.x||1!=f.y)m+=" scale("+f.x.toFixed(2)+","+f.y.toFixed(2)+")";return m};Qi.prototype.toCSSTransformString=function(){var f=this.getRotation(),m=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+f+"deg) scale("+m+","+m+")"};Qi.prototype.toString=function(){return this.toCSSTransformString()};Qi.prototype.toMatrix=function(){return this.copy()};Qi.prototype.transformPoint=
function(f,m){return f.matrixTransform(this,m)};Qi.prototype.transformDirection=function(f,m){return f.matrixTransformDirection(this,m)};Qi.prototype.matrixTransformForMinMax=function(f,m,n){var a=this.a*f.x+this.c*f.y+this.e;f=this.b*f.x+this.d*f.y+this.f;a>n.x&&(n.x=a);f>n.y&&(n.y=f);a<m.x&&(m.x=a);f<m.y&&(m.y=f)};Qi.prototype.transformRectToRect=function(f){var m=ld.pt(Infinity,Infinity),n=ld.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(f.topLeft(),m,n);this.matrixTransformForMinMax(f.bottomRight(),
m,n);this.isTranslation()||(this.matrixTransformForMinMax(f.topRight(),m,n),this.matrixTransformForMinMax(f.bottomLeft(),m,n));return ld.rect(m,n)};Qi.prototype.preConcatenate=function(f){var m=this.matrix_||this.toMatrix();this.a=f.a*m.a+f.c*m.b;this.b=f.b*m.a+f.d*m.b;this.c=f.a*m.c+f.c*m.d;this.d=f.b*m.c+f.d*m.d;this.e=f.a*m.e+f.c*m.f+f.e;this.f=f.b*m.e+f.d*m.f+f.f;this.matrix_=this.toMatrix();return this};Qi.prototype.invert=function(){var f=this.copy(),m=1/(f.a*f.d-f.c*f.b);this.a=f.d*m;this.b=
-f.b*m;this.c=-f.c*m;this.d=f.a*m;this.e=(f.c*f.f-f.e*f.d)*m;this.f=-(f.a*f.f-f.b*f.e)*m;return this};Qi.prototype.inverse=function(){var f=this.matrix_||this.toMatrix();f=new this.constructor(f);f.invert();return f};Qi.prototype.ensureNumber=function(f){if(isNaN(f))throw Error("not a number");return f};Qi.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(Qi.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});ld.Transform=Qi;var pk=function(f,m){this.start=f;this.end=m};pk.fromCoords=function(f,m,n,a){return new ld.Line(ld.pt(f,m),ld.pt(n,a))};pk.prototype.withStart=function(f){return new ld.Line(f,this.end)};pk.prototype.withEnd=function(f){return new ld.Line(this.start,f)};pk.prototype.sampleN=function(f){f=f||10;for(var m=
this.end.subPt(this.start).scaleBy(1/f),n=[],a=0;a<=f;a++)n.push(this.start.addPt(m.scaleBy(a)));return n};pk.prototype.sample=function(f){return this.sampleN(this.length()/f)};pk.prototype.length=function(){return this.start.dist(this.end)};pk.prototype.equals=function(f){return f?this.start.eqPt(f.start)&&this.end.eqPt(f.end):!1};pk.prototype.distanceFromLine=function(f){var m=this.start.x,n=this.start.y,a=this.end.x,d=this.end.y;return Math.abs((d-n)*f.x-(a-m)*f.y+a*n-d*m)/Math.sqrt(Math.pow(d-
n,2)+Math.pow(a-m,2))};pk.prototype.includesPoint=function(f,m){var n=this.start.x,a=this.start.y,d=this.end.x,k=this.end.y,b=f.x;f=f.y;var e=0===(d-n)*(f-a)-(b-n)*(k-a);if(m||!e)return e;m=Math.min(a,k);e=Math.max(n,d);a=Math.max(a,k);return Math.min(n,d)<=b&&b<=e&&m<=f&&f<=a};pk.prototype.intersection=function(f,m){var n=this.start,a=this.end,d=f.start,k=f.end;f=n.x;n=n.y;var b=a.x;a=a.y;var e=d.x;d=d.y;var l=k.x;k=k.y;var p=((f*a-n*b)*(e-l)-(f-b)*(e*k-d*l))/((f-b)*(d-k)-(n-a)*(e-l)),q=((f*a-n*
b)*(d-k)-(n-a)*(e*k-d*l))/((f-b)*(d-k)-(n-a)*(e-l));return Infinity!==p&&Infinity!==q&&(m||ld.num.between(p,f,b,1E-4)&&ld.num.between(q,n,a,1E-4)&&ld.num.between(p,e,l,1E-4)&&ld.num.between(q,d,k,1E-4))?ld.pt(p,q):null};pk.prototype.perpendicularLine=function(f,m,n){f=void 0===f?0:f;m=void 0===m?1:m;n=void 0===n?"cc":n;var a=this.start,d=this.toVector();f=a.addPt(d.scaleBy(f));n=d.theta()+("cc"===n?-1:1)*Math.PI/2;return new ld.Line(f,f.addPt(ld.Point.polar(m,n)))};pk.prototype.toVector=function(){return this.end.subPt(this.start)};
pk.prototype.toString=function(){return ld.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};pk.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(pk.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});ld.Line=pk;ld.rect=zk;ld.rect=zk;ld.pt=kh;ld.pt=kh;var oga=
Object.freeze({__proto__:null,Point:xf,Rectangle:Qd,Transform:Qi,Line:pk,rect:zk,pt:kh}),jd=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");jd.floor=function(f){return Math.floor(255.99*f)};jd.pad=function(f,m,n){n=void 0===n?jd.arr.last:n;return[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(Array(Math.max(m-f.length,0)).fill(n(f))))};jd.num=Gj;jd.obj=ff;jd.arr=Ne;jd.parse=sD;jd.Rectangle=Qd;jd.rect=zk;jd.pt=kh;jd.Point=xf;jd.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;
var Bx=function(){};Bx.prototype.offsets=function(){return null};Bx.prototype.stepCount=function(){return 0};Bx.prototype.stepSize=function(){return 0};Bx.prototype.chord=function(f){var m=this,n=f.hue,a=f.saturation,d=f.brightness;return(this.offsets()||jd.arr.range(0,this.steps()).map(function(k){return k*m.stepSize()})).map(function(k){return jd.Color.hsb(n+k%360,a,d)})};$jscomp.global.Object.defineProperties(Bx.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});
jd.ColorHarmony=Bx;var es=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(es,jd.ColorHarmony);es.prototype.steps=function(){return 1};es.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(es.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});Ia("bf",es);jd.Complementary=es;var fs=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(fs,jd.ColorHarmony);fs.prototype.steps=function(){return 2};
fs.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(fs.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});Ia("bg",fs);jd.Triadic=fs;var Bu=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Bu,jd.ColorHarmony);Bu.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(Bu.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});Ia("bh",Bu);jd.Tetradic=
Bu;var gs=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(gs,jd.ColorHarmony);gs.prototype.steps=function(){return 3};gs.prototype.stepSize=function(){return 90};$jscomp.global.Object.defineProperties(gs.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});Ia("bi",gs);jd.Quadratic=gs;var hs=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(hs,jd.ColorHarmony);hs.prototype.steps=function(){return 5};hs.prototype.offsets=
function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(hs.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});Ia("bj",hs);jd.Analogous=hs;var Cu=function(){return jd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Cu,jd.ColorHarmony);Cu.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(Cu.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});Ia("bk",Cu);jd.Neutral=
Cu;var qf=function(f,m,n,a){this.r=f||0;this.g=m||0;this.b=n||0;this.a=a||(0===a?0:1)};qf.random=function(f,m){void 0===f&&(f=0);void 0===m&&(m=255);return jd.Color.rgb(jd.num.random(f,m),jd.num.random(f,m),jd.num.random(f,m))};qf.hsb=function(f,m,n){if(0==m)return new jd.Color(n,n,n);var a=f%360/60;f=Math.floor(a);var d=a-f;a=(1-m)*n;var k=(1-m*d)*n;m=(1-m*(1-d))*n;switch(f){case 0:return new jd.Color(n,m,a);case 1:return new jd.Color(k,n,a);case 2:return new jd.Color(a,n,m);case 3:return new jd.Color(a,
k,n);case 4:return new jd.Color(m,a,n);case 5:return new jd.Color(n,a,k);default:return new jd.Color(0,0,0)}};qf.wheel=function(f){return jd.Color.wheelHsb(void 0===f?10:f,0,.9,.7)};qf.wheelHsb=function(f,m,n,a){for(var d=Array(f),k=360/Math.max(f,1),b=0;b<f;b++)d[b]=jd.Color.hsb(m+b*k,n,a);return d};qf.rgb=function(f,m,n){return new jd.Color(f/255,m/255,n/255)};qf.rgbHex=function(f){return(f=this.parseHex(f))&&0<=f[0]&&0<=f[1]&&0<=f[2]?new jd.Color(f[0],f[1],f[2]):null};qf.rgba=function(f,m,n,a){return new jd.Color(f/
255,m/255,n/255,a)};qf.fromLiteral=function(f){return new jd.Color(f.r,f.g,f.b,f.a)};qf.fromTuple=function(f){return new jd.Color(f[0],f[1],f[2],f[3])};qf.fromTuple8Bit=function(f){return new jd.Color(f[0]/255,f[1]/255,f[2]/255,f[3]/255)};qf.fromString=function(f){return f&&"none"!==f?this.fromTuple(this.parse(f)):null};qf.parse=function(f){return f&&"none"!==f?(f=jd.parse(f),[f.red,f.green,f.blue,f.alpha]):null};qf.parseRGB=function(f){var m=f.match(this.rgbaRegex);if(m){f=parseInt(m[1])/(m[2]?100:
255);var n=parseInt(m[3])/(m[4]?100:255),a=parseInt(m[5])/(m[6]?100:255);m=m[7]?parseFloat(m[7]):1;return[f,n,a,m]}return null};qf.parseHex=function(f){var m;var n="";for(m=0;m<f.length;m++){var a=f[m].toLowerCase();if("a"==a||"b"==a||"c"==a||"d"==a||"e"==a||"f"==a||"0"==a||"1"==a||"2"==a||"3"==a||"4"==a||"5"==a||"6"==a||"7"==a||"8"==a||"9"==a)n+=a}if(6==n.length)m=n.substring(0,2),f=n.substring(2,4),n=n.substring(4,6);else if(3==n.length)m=n.substring(0,1),m+=m,f=n.substring(1,2),f+=f,n=n.substring(2,
3),n+=n;else return null;m=parseInt(m,16)/255;f=parseInt(f,16)/255;n=parseInt(n,16)/255;return[m,f,n]};qf.prototype.grayValue=function(){return(this.r+this.g+this.b)/3};qf.prototype.equals=function(f){return f?this.r===f.r&&this.g===f.g&&this.b===f.b&&this.a===f.a:!1};qf.prototype.darker=function(f){var m=this.mixedWith(jd.Color.black,.5);return 1<f?m.darker(f-1):m};qf.prototype.lighter=function(f){if(0==f)return this;var m=this.mixedWith(jd.Color.white,.5);return 1<f?m.lighter(f-1):m};qf.prototype.interpolate=
function(f,m){if(m.isGradient)return m.interpolate(1-f,this);m=jd.obj.isArray(m)?m:m.toTuple();return jd.Color.fromTuple(this.toTuple().map(function(n,a){return jd.num.interpolate(f,n,m[a])}))};qf.prototype.toString=function(){return 1===this.a?"rgb("+jd.floor(this.r)+","+jd.floor(this.g)+","+jd.floor(this.b)+")":this.toRGBAString()};qf.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};qf.prototype.toHexString=
function(){function f(m){for(;2>m.length;)m="0"+m;return m}return f(Math.floor(255.99*this.r).toString(16))+f(Math.floor(255.99*this.g).toString(16))+f(Math.floor(255.99*this.b).toString(16))};qf.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};qf.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};qf.prototype.toHSB=function(){var f=Math.max(this.r,this.g,this.b),m=Math.min(this.r,this.g,this.b),n;f==m?n=0:f==this.r?n=(this.g-this.b)/(f-m)*60:f==
this.g?n=60*(2+(this.b-this.r)/(f-m)):f==this.b&&(n=60*(4+(this.r-this.g)/(f-m)));return[(n+360)%360,0==f?0:(f-m)/f,f]};qf.prototype.withA=function(f){return new jd.Color(this.r,this.g,this.b,f)};qf.prototype.mixedWith=function(f,m){var n=1-m;return new jd.Color(this.r*m+f.r*n,this.g*m+f.g*n,this.b*m+f.b*n,this.a*m+f.a*n)};qf.prototype.invert=function(){return jd.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};qf.prototype.toCSSString=function(){return this.toRGBAString()};qf.prototype.__serialize__=
function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};qf.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};$jscomp.global.Object.defineProperties(qf.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var f=this,m=jd.Color.named;return Object.keys(m).find(function(n){return m[n].equals(f)})}}});$jscomp.global.Object.defineProperties(qf,{rgbaRegex:{configurable:!0,
enumerable:!0,get:function(){return jd.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new jd.Color(0,0,0),almostBlack:jd.Color.rgb(64,64,64),white:new jd.Color(1,1,1),gray:new jd.Color(.8,.8,.8),red:new jd.Color(.8,0,0),green:new jd.Color(0,.8,0),yellow:new jd.Color(.8,.8,0),blue:new jd.Color(0,0,.8),purple:new jd.Color(.5,0,.5),magenta:new jd.Color(1,0,1),pink:jd.Color.rgb(255,30,153),turquoise:jd.Color.rgb(0,240,255),tangerine:jd.Color.rgb(242,
133,0),orange:jd.Color.rgb(255,153,0),cyan:jd.Color.rgb(0,255,255),brown:jd.Color.rgb(182,67,0),limeGreen:jd.Color.rgb(51,255,0),darkGray:jd.Color.rgb(102,102,102),lightGray:jd.Color.rgb(230,230,230),veryLightGray:jd.Color.rgb(243,243,243),transparent:jd.Color.rgba(0,0,0,0),lively:jd.Color.rgb(245,124,0)}}}});Ia("C",qf);jd.Color=qf;Object.assign(jd.Color,jd.Color.named);var Iq=function(f){this.stops=f?f.map(function(m){return m}):[]};Iq.create=function(f){var m=[],n;for(n in f)m.push({offset:Number(n),
color:f[n]});return new this({stops:m})};Iq.parse=function(f){return f.startsWith("radial-gradient")?jd.RadialGradient.parse(f):f.startsWith("linear-gradient")?jd.LinearGradient.parse(f):jd.Color.fromTuple(jd.Color.parse(f))};Iq.prototype.equals=function(f){return f&&f.isGradient?this.toString()==f.toString():!1};Iq.prototype.getStopsLighter=function(f){return jd.arr.collect(this.stops,function(m){return{offset:m.offset,color:m.color.lighter(f)}})};Iq.prototype.getStopsDarker=function(f){return jd.arr.collect(this.stops,
function(m){return{offset:m.offset,color:m.color.darker(f)}})};Iq.prototype.interpolateStops=function(f,m){var n=jd.pad(this.stops,m.length);m=jd.pad(m,this.stops.length);var a=[],d;for(d=0;d<n.length;d++){var k=n[d];var b=k.color;var e=k.offset;var l=m[d];k=l.color;l=l.offset;a.push({color:b.interpolate(f,k),offset:jd.num.interpolate(f,e,l)})}return a};Iq.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],
"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(Iq.prototype,{isGradient:{configurable:!0,enumerable:!0,get:function(){return!0}}});jd.Gradient=Iq;var qk=function(f){var m=void 0===f?{}:f;f=m.vector;m=jd.Gradient.call(this,m.stops)||this;m.vector=f;return m};$jscomp.inherits(qk,jd.Gradient);qk.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};qk.prototype.angleToRect=function(f){return jd.Point.polar(1,f).extentAsRectangle().withCenter(jd.pt(.5,.5))};qk.prototype.vectorAsAngle=
function(){return this.vector.extent().theta()};qk.prototype.toString=function(){return this.toCSSString()};qk.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),vector:this.vector})};qk.prototype.darker=function(f){return new this.constructor({stops:this.getStopsDarker(f),vector:this.vector})};qk.prototype.interpolate=function(f,m,n){n=void 0===n?{width:1E3,height:1E3}:n;m.isColor&&(m=new jd.LinearGradient({vector:this.vector,stops:this.stops.map(function(a){return{color:m,
offset:a.offset}})}));if("radialGradient"==m.type){if(.5>f)return new jd.LinearGradient({vector:this.vector.interpolate(f,jd.rect(0,0,0,1)),stops:this.interpolateStops(f,m.stops.map(function(a,d){return{color:a.color,offset:1}}))});if(.5<=f)return new jd.RadialGradient({stops:this.interpolateStops(f,m.stops),focus:jd.pt(.5,0).interpolate(f,m.focus),bounds:jd.rect(0,0,100*n.width,2*n.height).interpolate(f,m.bounds)})}return new jd.LinearGradient({stops:this.interpolateStops(f,m.stops),vector:this.vector.interpolate(f,
m.vector)})};qk.prototype.toCSSString=function(){var f="linear-gradient("+(jd.num.toDegrees(this.vectorAsAngle())+90+"deg,")+this.stops.map(function(m){return m.color.toRGBAString()+" "+((100*m.offset).toFixed()+"%")}).join(",");return f+")"};qk.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(qk.prototype,{type:{configurable:!0,
enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,get:function(){return{northsouth:jd.rect(jd.pt(0,0),jd.pt(0,1)),northeast:jd.rect(jd.pt(1,0),jd.pt(0,1)),westeast:jd.rect(jd.pt(1,0),jd.pt(0,0)),southeast:jd.rect(jd.pt(1,1),jd.pt(0,0)),southnorth:jd.rect(jd.pt(0,1),jd.pt(0,0)),southwest:jd.rect(jd.pt(0,1),jd.pt(1,0)),eastwest:jd.rect(jd.pt(0,0),jd.pt(1,0)),northwest:jd.rect(jd.pt(0,0),jd.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},
set:function(f){this._vector=f?"string"===typeof f?this.vectors[f.toLowerCase()]:"number"===typeof f?this.angleToRect(f):f:this.vectors.northsouth}}});Ia("a9",qk);jd.LinearGradient=qk;var Nl=function(f){var m=void 0===f?{}:f;f=m.focus;var n=m.bounds;m=jd.Gradient.call(this,m.stops)||this;m.focus=f||jd.pt(.5,.5);m.bounds=n||new jd.Rectangle(0,0,20,20);return m};$jscomp.inherits(Nl,jd.Gradient);Nl.parse=function(f){f.match(/\((.*)\)/)[1].split(",")};Nl.prototype.toString=function(){return this.toCSSString()};
Nl.prototype.lighter=function(f){return new this.constructor({stops:this.getStopsLighter(f),focus:this.focus,bounds:this.bounds})};Nl.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};Nl.prototype.interpolate=function(f,m,n){n=void 0===n?{height:1E3,width:1E3}:n;m.isColor&&(m=new jd.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(a){return{color:m,offset:a.offset}})}));return"linearGradient"==
m.type?m.interpolate(1-f,this,n):new jd.RadialGradient({bounds:this.bounds.interpolate(f,m.bounds),stops:this.interpolateStops(f,m.stops),focus:this.focus.interpolate(f,m.focus)})};Nl.prototype.toCSSString=function(){var f=this.focus.scaleBy(100),m=this.bounds.extent();f="radial-gradient("+m.x/2+"px "+m.y/2+"px at "+f.x+"% "+f.y+"%";for(m=0;m<this.stops.length;m++)f+=","+this.stops[m].color.toRGBAString()+" "+((100*this.stops[m].offset).toFixed()+"%");return f+")"};Nl.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+
this.stops.map(function(f){return"{offset: "+f.offset+", color: "+f.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(Nl.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});Ia("a7",Nl);jd.RadialGradient=Nl;var OA=Ia("bl","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
jd.flatDesignColors=OA;jd.flatDesignColors=OA;jd.flatDesignColors=OA;var PA=Ia("bm","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
jd.materialDesignColors=PA;jd.materialDesignColors=PA;jd.materialDesignColors=PA;var QA=Ia("bn","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
jd.webSafeColors=QA;jd.webSafeColors=QA;jd.webSafeColors=QA;var pga=Object.freeze({__proto__:null,Complementary:es,Triadic:fs,Tetradic:Bu,Quadratic:gs,Analogous:hs,Neutral:Cu,Color:qf,LinearGradient:qk,RadialGradient:Nl,flatDesignColors:OA,materialDesignColors:PA,webSafeColors:QA}),Z1=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(Z1,pga);Object.assign(Z1,oga);var qga=Object.freeze({__proto__:null,Complementary:es,Triadic:fs,Tetradic:Bu,Quadratic:gs,Analogous:hs,Neutral:Cu,
Color:qf,LinearGradient:qk,RadialGradient:Nl,flatDesignColors:OA,materialDesignColors:PA,webSafeColors:QA,Point:xf,Rectangle:Qd,Transform:Qi,Line:pk,rect:zk,pt:kh}),Xh=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");Xh.getClassName=Un;Xh.getSerializableClassMeta=qr;Xh.locateClass=Ro;Xh.arr=Ne;Xh.string=Bg;Xh.classMetaForSerializationProp="lively.serializer-class-info";Xh.classSuperClassProp=Symbol.for("lively-instance-superclass");Xh.classNameProp=Symbol.for("__LivelyClassName__");
Xh.moduleMetaInClassProp=Symbol.for("lively-module-meta");Xh.getClassName=Un;Xh.getClassName=Un;Xh.getSerializableClassMeta=qr;Xh.getSerializableClassMeta=qr;Xh.locateClass=Ro;Xh.locateClass=Ro;var Ap=function(f){this.options=Object.assign({ignoreClassNotFound:!0},f);this[Symbol.for("lively-instance-restorer")]=!0};Ap.prototype.addClassInfo=function(f,m,n){(f=Xh.getSerializableClassMeta(m))&&(n[Xh.classMetaForSerializationProp]=f)};Ap.prototype.restoreIfClassInstance=function(f,m){if(m.hasOwnProperty(Xh.classMetaForSerializationProp)&&
(f=m[Xh.classMetaForSerializationProp],f.className)){m=Xh.locateClass(f);if(!m||"function"!==typeof m){m="Trying to deserialize instance of "+JSON.stringify(f)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(m);console.error(m);return{isClassPlaceHolder:!0,className:f.className}}return m.hasOwnProperty(Symbol.for("lively-instance-superclass"))?new m(this):new m}};Ap.sourceModulesInObjRef=function(f){var m=[];(f=f&&f[Xh.classMetaForSerializationProp])&&f.module&&
m.push(f.module);return m};Ap.sourceModulesIn=function(f){var m=[];Object.keys(f).forEach(function(n){(n=f[n])&&n[Xh.classMetaForSerializationProp]&&m.push(n[Xh.classMetaForSerializationProp])});return Xh.arr.uniqBy(m,function(n,a){var d=n.module,k=a.module;return!d&&!k||d&&!k||!d&&k?n.className===a.className:n.className===a.className&&d.package.name==k.package.name&&d.package.pathInPackage==k.package.pathInPackage})};$jscomp.global.Object.defineProperties(Ap.prototype,{sourceModuleNameProperty:{configurable:!0,
enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(Ap,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return Xh.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,enumerable:!0,get:function(){return Xh.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return Xh.classSuperClassProp}},classNameProperty:{configurable:!0,enumerable:!0,get:function(){return Xh.classNameProp}}});
Xh.ClassHelper=Ap;Xh.default=Ap;var gh=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");gh.deserializeSpec=Vn;gh.serializeSpec=xm;gh.string=Bg;gh.Closure=ji;gh.Path=Sg;gh.obj=ff;gh.properties=km;gh.arr=Ne;gh.getSerializableClassMeta=qr;gh.connect=Mj;gh.joinPath=Jd;var Vj=function(f){this.prefix=Object.assign({prefix:"__lv_expr__"},f).prefix+":"};Vj.prototype.isSerializedExpression=function(f){return 0===f.indexOf(this.prefix)};Vj.prototype.requiredModulesOf__expr__=
function(f){return this.isSerializedExpression(f)?(f=this.exprStringDecode(f).bindings)?Object.keys(f):null:null};Vj.prototype.exprStringDecode=function(f){var m=f.indexOf(":");f.slice(0,m);f=f.slice(m+1);for(var n={},a=!1;f&&f.startsWith("{")&&0<=(m=f.indexOf("}:"));){a=!0;var d=f.slice(1,m);f=f.slice(m+2);f.includes("https:")&&f.indexOf("https:")<f.indexOf(":")?(f=f.replace("https:","__HTTP_PLACEHOLDER__"),m=f.indexOf(":")-20+6,f=f.replace("__HTTP_PLACEHOLDER__","https:")):m=f.indexOf(":");var k=
f.slice(0,m);d=d.split(",").filter(function(b){return!!b.trim()}).map(function(b){if(!b.includes(":"))return b;var e=$jscomp.makeIterator(b.split(":"));b=e.next().value;e=e.next().value;return{exported:b,local:e}});n[k]=d;f=f.slice(m+1)}return{__expr__:f,bindings:a?n:null}};Vj.prototype.exprStringEncode=function(f){var m=f.bindings;f=String(f.__expr__);if(m)for(var n=Object.keys(m),a=0;a<n.length;a++){var d=n[a],k=m[d];Array.isArray(k)&&(k=k.map(function(b){return"string"===typeof b?b:b.exported+
":"+b.local}).join(","));f="{"+k+"}:"+d+":"+f}return this.prefix+f};Vj.prototype.getExpressionForFunction=function(f){var m=f[Symbol.for("lively-module-meta")],n={};return this.exprStringEncode({__expr__:f.name,bindings:(n[gh.joinPath(m.package.name,m.pathInPackage)]=[f.name],n)})};Vj.prototype.convert__expr__obj=function(f){console.assert("__expr__"in f,"obj has no property __expr__");return this.prefix+f.__expr__};Vj.prototype.__eval__=function(f,m){return gh.__eval__(f,m)};Vj.prototype.deserializeExpr=
function(f){if(!f.startsWith(this.prefix))throw Error('"'+f+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(f))};Vj.prototype.deserializeExprObj=function(f){var m=f.__expr__;f=f.bindings;var n={};if(f)for(var a=f?Object.keys(f):[],d=0;d<a.length;d++){var k=a[d],b=f[k];if(lively.FreezerRuntime){var e=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(k));if(!e){var l=lively.FreezerRuntime.fetchStandaloneFor(k);l&&
(e=l.exports)}e.exports&&(e=e.exports)}else e=System.get(System.decanonicalize(k));if(!e)throw Error("[lively.serializer] expression eval: bindings specify to import "+k+" but this module is not loaded!\nSource: "+m);for(k=0;k<b.length;k++){var p=b[k],q=l=void 0;"string"===typeof p?q=l=p:"object"===typeof p&&(l=p.local,q=p.exported);n[l]=e[q];m="var "+l+" = __boundValues__."+l+";\n"+m}}return this.__eval__(m,n)};Ia("b5",Vj);gh.ExpressionSerializer=Vj;gh.__eval__=gh.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();
gh.deserializeSpec=Vn;gh.deserializeSpec=Vn;gh.serializeSpec=xm;gh.serializeSpec=xm;gh.default=Vj;var Of=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");Of.connect=Mj;Of.disconnect=So;Of.disconnectAll=hw;Of.once=cq;Of.signal=Ak;Of.callWhenNotNull=uD;Of.callWhenPathNotNull=vD;Of.noUpdate=rr;Of.string=Bg;Of.arr=Ne;Of.Closure=ji;Of.obj=ff;Of.stringifyFunctionWithoutToplevelRecorder=cw;Of.ExpressionSerializer=Vj;Of.connect=Mj;Of.connect=Mj;Of.disconnect=So;Of.disconnect=So;Of.disconnectAll=
hw;Of.disconnectAll=hw;Of.once=cq;Of.once=cq;Of.signal=Ak;Of.signal=Ak;Of.noUpdate=rr;Of.noUpdate=rr;var OH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=m.hasOwnProperty("AttributeConnection")&&"function"===typeof m.AttributeConnection?m.AttributeConnection:m.AttributeConnection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(a,d,k,b,e){this.init(a,d,k,b,e)}},{key:"init",value:function(a,d,k,b,e){this.doNotSerialize=["isActive","converter","updater"];this.sourceObj=a;this.sourceAttrName=d;this.targetObj=k;this.targetMethodName=b;this.varMapping={source:a,target:k};e=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},e);e.removeAfterUpdate&&(this.removeAfterUpdate=!0);e.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof e.garbageCollect&&
(this.garbageCollect=e.garbageCollect);"boolean"===typeof e.signalOnAssignment&&(this.signalOnAssignment=e.signalOnAssignment);e.converter&&this.setConverter(e.converter);e.updater&&this.setUpdater(e.updater);e.varMapping&&(this.varMapping=Object.assign(e.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(a,d,k,b){delete this.varMapping._rev;Of.arr.equals(Object.keys(this.varMapping),["source","target"])?delete a.props.varMapping:b("varMapping",
this._getSerializableVarMapping())}},{key:"__after_deserialize__",value:function(a,d){this.varMapping||(this.varMapping={},this.varMapping.source=this.sourceObj,this.varMapping.target=this.targetObj);this.onSourceAndTargetRestored()}},{key:"_getSerializableVarMapping",value:function(){for(var a=Object.assign({},this.varMapping),d=$jscomp.makeIterator(Object.keys(a)),k=d.next();!k.done;k=d.next()){k=k.value;try{Of.obj.isFunction(a[k])&&(a[k]=(new Of.ExpressionSerializer).getExpressionForFunction(a[k]))}catch(b){throw Error("Cannot be serialized due to lack of module information: "+
k+" in "+this);}}return a}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(a){return Of.AttributeConnection.fromLiteral(this.toLiteral(),a)}},{key:"fixInstanceAfterCopyingFromSite",value:function(a,d,k){this.disconnect()}},{key:"clone",value:function(){var a=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&(a.dependedBy=this.dependedBy);
return a}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},{key:"getConverter",
value:function(){if(!this.converterString)return null;this.converter||(this.converter=Of.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(a){delete this.converter;return this.converterString=a?String(a):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=Of.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},{key:"setUpdater",
value:function(a){delete this.updater;return this.updaterString=a?Of.stringifyFunctionWithoutToplevelRecorder(a):null}},{key:"getSpec",value:function(){var a={};this.updaterString&&(a.updater=this.getUpdater());this.converterString&&(a.converter=this.getConverter());this.removeAfterUpdate&&(a.removeAfterUpdate=!0);this.forceAttributeConnection&&(a.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(a.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&(a.signalOnAssignment=
this.signalOnAssignment);return a}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(a){return"$$"+a}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var a=this.getExistingConnection();
a!==this&&(a&&a.disconnect(),this.addAttributeConnection());a=this.sourceObj;var d=this.sourceAttrName,k=this.forceAttributeConnection,b=a.__lookupSetter__(d),e=a.__lookupGetter__(d),l=!b&&!e&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof l||k?this.addSourceObjGetterAndSetter(e,b):l.isWrapped||this.addConnectionWrapper(a,d,l);return this}},{key:"disconnect",value:function(){var a=this,d=this.sourceObj;if(!d||!d.attributeConnections)return this.removeSourceObjGetterAndSetter();
d.attributeConnections=d.attributeConnections.filter(function(b){return!a.isSimilarConnection(b)});var k=d.attributeConnections.filter(function(b){return a.getSourceAttrName()==b.getSourceAttrName()});0==d.attributeConnections.length&&delete d.attributeConnections;0==k.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(a,d){if(this.isActive)return null;var k=this,b=this.getUpdater(),e=this.getConverter(),l=this.targetObj,p=this.targetMethodName;if(!l||!p)return d=
"Cannot update "+this.toString(a)+" because of no target ("+l+") or targetProp ("+p+") ",this.isWeakConnection&&this.disconnect(),console.error(d),null;var q=l[p],u=function(y,A,C,D,L,I){C=[y,A,C,D,L,I];e&&(a=e.call(k,y,A),y=C[0]=a);y="function"===typeof q?q.apply(l,C):l[p]=y;k.removeAfterUpdate&&k.disconnect();return y};try{return this.isActive=!0,b?b.call(this,u,a,d):u(a,d)}catch(y){var w=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===
typeof this.targetObj.world&&this.targetObj.world();w?w.logError(y,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+a+":\n"+y+"\n"+y.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(a,d){if(!(a&&a.isAttributeConnectionGetter||d&&d.isAttributeConnectionSetter)){var k=this.sourceObj,b=this.sourceAttrName,e=this.privateAttrName(b);k[e]&&console.warn("newAttrName "+e+" already exists.Are there already other connections?");
k.hasOwnProperty("doNotSerialize")||(k.doNotSerialize=[]);Of.arr.pushIfNotIncluded(k.doNotSerialize,e);k.hasOwnProperty("doNotCopyProperties")||(k.doNotCopyProperties=[]);Of.arr.pushIfNotIncluded(k.doNotCopyProperties,e);a&&(k.hasOwnProperty(b)?k.__defineGetter__(e,a):k.__defineGetter__(e,function(){return k.constructor.prototype.__lookupGetter__(b).bind(k)()}));d&&(k.hasOwnProperty(b)?k.__defineSetter__(e,d):k.__defineSetter__(e,function(l){k.constructor.prototype.__lookupSetter__(b).bind(k)(l)}));
a||d||!k.hasOwnProperty(b)||(k[e]=k[b]);k.__defineSetter__(b,function(l){var p=k[e];k[e]=l;if(void 0===k.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;k.attributeConnections.forEach(function(q){q&&q.getSourceAttrName()===b&&q.signalOnAssignment&&q.update(l,p)});return l});k.__lookupSetter__(b).isAttributeConnectionSetter=!0;k.__defineGetter__(b,function(){return k[e]});k.__lookupGetter__(b).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",
value:function(a,d,k){if("function"!==typeof k)throw Error("addConnectionWrapper didnt get a method to wrap");var b;if(b=a.hasOwnProperty(d)){a[this.privateAttrName(d)]=k;var e=function(){return k}}else e=function(){return Object.getPrototypeOf(a)[d]};a[d]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var l=this.attributeConnections.slice(),p=this[d].originalFunction.apply(this,
arguments),q=0;q<l.length;q++){var u=l[q];u.getSourceAttrName()===d&&u.update(arguments[0])}return p};a[d].isOwnProperty=b;a[d].isWrapped=!0;a[d].isConnectionWrapper=!0;Object.defineProperty(a[d],"originalFunction",{get:e});a[d].toString=function(){return"<Wrapped "+e()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var a=this.sourceAttrName,d=this.privateAttrName(a),k=this.sourceObj;if(k){if(k.__lookupGetter__(a)){if(delete k[a],k.hasOwnProperty(d)){try{k[a]=k[d]}catch(e){}delete k[d]}}else if(k[a]&&
k[a].isConnectionWrapper){var b=k[a];delete k[a];k[a]||(k[a]=b.originalFunction)}k.doNotSerialize&&k.doNotSerialize.includes(d)&&(k.doNotSerialize=Of.arr.without(k.doNotSerialize,d),0==k.doNotSerialize.length&&delete k.doNotSerialize);k.doNotCopyProperties&&k.doNotCopyProperties.includes(d)&&(k.doNotCopyProperties=Of.arr.without(k.doNotCopyProperties,d),0==k.doNotCopyProperties.length&&delete k.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||
(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var a=this.sourceObj&&this.sourceObj.attributeConnections;if(!a)return null;for(var d=0,k=a.length;d<k;d++)if(this.isSimilarConnection(a[d]))return a[d];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(a){return a&&a.constructor==this.constructor?this.sourceObj==a.sourceObj&&this.sourceAttrName==
a.sourceAttrName&&this.targetObj==a.targetObj&&this.targetMethodName==a.targetMethodName:!1}},{key:"toString",value:function(a){try{return Of.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),a?"--\x3e"+String(a)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(d){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],m,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:309,end:17530})}(void 0);Of.AttributeConnection=OH;Of.AttributeConnection=OH;Of.AttributeConnection=OH;Of.callWhenNotNull=uD;Of.callWhenNotNull=uD;Of.callWhenPathNotNull=vD;Of.callWhenPathNotNull=vD;var rga=Object.freeze({__proto__:null,connect:Mj,disconnect:So,disconnectAll:hw,once:cq,
signal:Ak,noUpdate:rr,AttributeConnection:OH,callWhenNotNull:uD,callWhenPathNotNull:vD}),pd=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");pd.pt=kh;pd.Rectangle=Qd;pd.rect=zk;pd.arr=Ne;pd.Closure=ji;pd.num=Gj;pd.grid=qx;pd.obj=ff;pd.once=cq;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("Layout")&&"function"===typeof m.Layout?m.Layout:m.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=a=void 0===a?{}:a;a=d.spacing;var k=d.padding,b=d.border,e=d.container,l=d.manualUpdate,p=d.autoResize,q=d.ignore,u=d.onScheduleApply,w=d.layoutOrder;d=d.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},b);this.ignore=q||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=!1;this.container=e;this.manualUpdate=l;
this.reactToSubmorphAnimations=d||!1;this.autoResize=void 0!=p?p:!0;this.onScheduleApply=u||function(y,A,C){};w&&(this.layoutOrder=w,this.layoutOrderSource=JSON.stringify(String(w)));this.spacing=a||0;this._padding=k?"number"===typeof k?pd.Rectangle.inset(k):k:null}},{key:"attach",value:function(){var a=this;this.apply();this.container.master&&this.container.master.whenApplied().then(function(){a.applyRequests=!0;a.forceLayout()});this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},
{key:"description",value:function(){return"Describe the layout behavior here."}},{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=pd.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",
value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=pd.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return pd.arr.sortBy(this.container.submorphs.filter(function(d){return d.isLayoutable&&
!a.ignore.includes(d.name)}),function(d){return a.layoutOrder(d)})}},{key:"layoutOrder",value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,d=this.layoutableSubmorphBounds;if(!d||a.length!=d.length)return!0;for(var k=0;k<a.length;k++)if(!d[k].equals(a[k].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},
{key:"onContainerRender",value:function(){this.forceLayout()}},{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,
animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var d=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(k){return d.forceLayoutsOfMorph(k)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(d){return a.forceLayoutsOfMorph(d)})}},{key:"scheduleApply",value:function(a,d,k){k=void 0===k?{}:k;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,
d,k);this.active||(d&&(this.lastAnim=d),this.applyRequests=!0)}},{key:"onSubmorphResized",value:function(a,d){this.scheduleApply(a,this.reactToSubmorphAnimations&&d.meta.animation,d)}},{key:"onSubmorphAdded",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onSubmorphRemoved",value:function(a,d){this.submorphsChanged=!0;this.scheduleApply(a,d)}},{key:"onChange",value:function(a){var d=a.args,k=a.prop,b=a.value,e=a.prevValue,l=a.meta;l=this.reactToSubmorphAnimations&&l&&
l.animation;d=d&&d[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(d,l);break;case "addMorphAt":this.onSubmorphAdded(d,l)}"extent"===k&&b&&e&&(e.x!==b.x||e.y!==b.y)&&this.scheduleApply(d,l)}},{key:"affectsLayout",value:function(a,d){a=d.value;var k=d.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(d.prop)&&!pd.obj.equals(a,k)}},{key:"onSubmorphChange",value:function(a,d){if(d.meta&&d.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&
d.meta.animation);if(this.affectsLayout(a,d))this.onSubmorphResized(a,d)}},{key:"changePropertyAnimated",value:function(a,d,k,b){if(b){var e=b.duration;b=b.easing;var l={};this.animationPromise=a.animate((l[d]=k,l.duration=e,l.easing=b,l))}else a[d]=k}},{key:"attachAnimated",value:function(a,d,k){this.active||(this.container=d,this.active=!0,d.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:k})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=
!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:156,end:6778})})(void 0);var RA=Ia("az",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("CustomLayout")&&"function"===typeof m.CustomLayout?m.CustomLayout:m.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){Sb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=pd.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(d){console.error("Error in relayout() of a custom layout:",d)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();
this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6787,end:7715})}(pd.Layout));pd.CustomLayout=RA;pd.CustomLayout=RA;pd.CustomLayout=RA;var SA=Ia("bq",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("SnapLayout")&&"function"===typeof m.SnapLayout?m.SnapLayout:m.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",
value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var d=this;a=void 0===a?!1:a;if(!this.active&&this.container){Sb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var k=this.container.submorphBounds().insetBy(-this.spacing),b=pd.pt(this.spacing,this.spacing).subPt(k.topLeft());b.r()&&this.container.submorphs.forEach(function(e){return d.changePropertyAnimated(e,"position",e.position.addPt(b),a)});this.changePropertyAnimated(this.container,
"extent",k.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7724,end:8521})}(pd.Layout));pd.SnapLayout=SA;pd.SnapLayout=SA;pd.SnapLayout=SA;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
n=m.hasOwnProperty("FloatLayout")&&"function"===typeof m.FloatLayout?m.FloatLayout:m.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?
a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},
{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||
this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(d.active||
!d.container||!d.container.submorphs.length||!d.layoutableSubmorphs.length)return b.return();d.layoutableSubmorphBounds||d.refreshBoundsCache();Sb._get(Object.getPrototypeOf(n.prototype),"apply",d).call(d,a);d.active=!0;try{k=d.computeMinContainerExtent(),d.layoutSubmorphs(k,a),k=d.computeMinContainerExtent(),d.resizeContainer(k,a),d.lastBoundsExtent=d.container.bounds().extent()}finally{d.active=!1,d.layoutRequests=!1}return b.return(d.animationPromise)})}},{key:"resizeContainer",value:function(){}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8523,end:10937})})(pd.Layout);var is=Ia("aa",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("VerticalLayout")&&
"function"===typeof m.VerticalLayout?m.VerticalLayout:m.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},
{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return Sb._get(Object.getPrototypeOf(n.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+pd.obj.inspect(this.getSpec())+
")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,d){var k=this,b=this.container,e=this.layoutableSubmorphs,l=this.spacing,p=this.autoResize,q=this.align,u=this.resizeSubmorphs,w=this.getStartY(a),y=[];a=u?b.width:a.x;p=p&&!u;var A=function(C,D){e.reduce(function(L,I){u&&k.changePropertyAnimated(I,"width",b.width-2*l,d);k.forceLayoutsOfMorph(I);k.changePropertyAnimated(I,C,L,d);L=I.bounds();y.push(L);return L[C]().addXY(0,L.height+l)},D)};this.layoutableSubmorphBounds=
y;"left"===q?A("topLeft",pd.pt(l,w)):"right"===q?A("topRight",pd.pt(a+(p?l:-l),w)):A("topCenter",pd.pt((a+(p?2*l:0))/2,w))}},{key:"resizeContainer",value:function(a,d){var k=this.direction,b=this.layoutableSubmorphs,e=this.resizeSubmorphs,l=this.spacing,p=this.container;this.autoResize&&("centered"===k?(k=b[0].top,b=pd.arr.last(b).bottom+k):b=pd.arr.last(b).bottom+l,a=pd.pt(e?p.width:a.x+2*l,Math.max(b,a.y)),this.changePropertyAnimated(p,"extent",a,d))}},{key:"getStartY",value:function(a){var d=this.layoutableSubmorphBounds,
k=this.spacing,b=this.direction;var e=(d.length-1)*k;d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;l=d.next())e+=l.value.height;return Math.max(0,"bottomToTop"===b?a.y-e-2*k:"centered"===b?a.y/2-e/2-k:0)+k}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,d=this.layoutableSubmorphs,k=this.autoResize,b=(d.length+1)*this.spacing,e=0,l=0,p=0;p<d.length;p++){var q=d[p].bounds(),u=q.width;l+=q.height;e=Math.max(u,e)}d=pd.pt(e,l+b);k||(d=d.maxPt(a.extent));return d}},{key:"layoutOrder",
value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10946,end:14914})}(pd.FloatLayout));pd.VerticalLayout=is;pd.VerticalLayout=
is;pd.VerticalLayout=is;var xo=Ia("af",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("HorizontalLayout")&&"function"===typeof m.HorizontalLayout?m.HorizontalLayout:m.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+
pd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return Sb._get(Object.getPrototypeOf(n.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,d){var k=this,b=this.container,e=this.layoutableSubmorphs,l=this.resizeSubmorphs,p=this.spacing,q=this.autoResize,u=this.align,w=this.getStartX(a),y=[];a=l?b.height:a.y;q=q&&!l;var A=function(C,D){e.reduce(function(L,I){l&&k.changePropertyAnimated(I,
"height",b.height-2*p,d);k.forceLayoutsOfMorph(I);k.changePropertyAnimated(I,C,L,d);L=I.bounds();y.push(L);return L[C]().addXY(L.width+p,0)},D)};this.layoutableSubmorphBounds=y;"top"===u?A("topLeft",pd.pt(w,p)):"bottom"===u?A("bottomLeft",pd.pt(w,a+(q?p:-p))):A("leftCenter",pd.pt(w,(a+(q?2*p:0))/2))}},{key:"resizeContainer",value:function(a,d){var k=this.direction,b=this.layoutableSubmorphBounds,e=this.resizeSubmorphs,l=this.spacing,p=this.container;this.autoResize&&("centered"===k?(k=b[0].left(),
b=pd.arr.last(b).right()+k):b=pd.arr.last(b).right()+l,a=pd.pt(Math.max(a.x,b),e?p.height:a.y+2*l),this.changePropertyAnimated(p,"extent",a,d))}},{key:"getStartX",value:function(a){var d=this.layoutableSubmorphBounds,k=this.spacing,b=this.direction;var e=(d.length-1)*k;d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;l=d.next())e+=l.value.width;return Math.max(0,"rightToLeft"===b?a.x-e-2*k:"centered"===b?a.x/2-e/2-k:0)+k}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,
d=this.layoutableSubmorphBounds,k=this.autoResize,b=(d.length+1)*this.spacing,e=0,l=0,p=0;p<d.length;p++){var q=d[p],u=q.height;e+=q.width;l=Math.max(u,l)}d=pd.pt(e+b,l);k||(d=d.maxPt(a.extent));return d}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:14923,end:18840})}(pd.FloatLayout));pd.HorizontalLayout=xo;pd.HorizontalLayout=xo;pd.HorizontalLayout=xo;var TA=Ia("ag",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("ProportionalLayout")&&"function"===typeof m.ProportionalLayout?m.ProportionalLayout:m.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:"name",
value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=pd.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=
a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+pd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(Sb._get(Object.getPrototypeOf(n.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,d){var k=this._submorphSettings;a=this.container;d=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=pd.pt(0,0);if(k&&a){k=$jscomp.makeIterator(k);for(var b=k.next();!b.done;b=k.next()){var e=$jscomp.makeIterator(b.value);b=e.next().value;e=e.next().value;(b=$jscomp.makeIterator(this._morphsMatchingSelector(a,b)).next().value)&&d.set(b,e)}this.proportionalLayoutSettingsForMorphs=
d}}},{key:"onSubmorphChange",value:function(a,d,k,b){"name"===d.prop&&(k=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,k,!0);return Sb._get(Object.getPrototypeOf(n.prototype),"onSubmorphChange",this).call(this,a,d)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,d,k){k=void 0===k?!1:k;"string"===typeof d&&(d={x:d,y:d});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},d));k&&(d=this.submorphSettings.filter(function(b){return b[0]!==a.name}),d.push([a.name,this.settingsFor(a)]),this._submorphSettings=d)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else pd.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var d=this,k={};a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;k={$jscomp$loop$prop$setting$2699:k.$jscomp$loop$prop$setting$2699},b=a.next()){b=$jscomp.makeIterator(b.value);var e=b.next().value;k.$jscomp$loop$prop$setting$2699=b.next().value;this._morphsMatchingSelector(this.container,e).forEach(function(l){return function(p){return d.changeSettingsFor(p,l.$jscomp$loop$prop$setting$2699)}}(k))}}},{key:"_morphsMatchingSelector",value:function(a,
d){var k=this,b=[];if(!d)return b;d.isMorph?b=[d]:d instanceof RegExp?b=a.submorphs.filter(function(e){return e.name.match(d)}):"string"===typeof d?b=a.submorphs.filter(function(e){return e.name===d}):Array.isArray(d)&&(b=pd.arr.flatmap(d,function(e){return k._morphsMatchingSelector(a,e)}));return b}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,d=this.lastExtent;d&&!a.eqPt(d)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(d)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(k){return k.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this.container,k=this.extentDelta,b=k.x;k=k.y;var e=(d||{}).extent;if(!this.active&&d&&(0!=b||0!=k)){this.extentDelta=pd.pt(0,0);this.active=!0;Sb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var l=this.layoutableSubmorphs;d=e.scaleByPt(e.addXY(-b,-k).invertedSafely());e=$jscomp.makeIterator(l);for(l=e.next();!l.done;l=e.next()){l=l.value;var p=this.settingsFor(l),
q=p.x,u=p.y,w=p=0,y=0,A=0;"move"===q&&(p=b);"move"===u&&(w=k);"resize"===q&&(y=b);"resize"===u&&(A=k);if("scale"===q||"scale"===u)q=pd.pt("scale"===q?d.x:1,"scale"===u?d.y:1),this.changePropertyAnimated(l,"position",l.position.scaleByPt(q),a),this.changePropertyAnimated(l,"extent",l.extent.scaleByPt(q),a);(p||w)&&this.changePropertyAnimated(l,"position",l.position.addXY(p,w),a);(y||A)&&this.changePropertyAnimated(l,"extent",l.extent.addXY(y,A),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18849,end:24393})}(pd.Layout));pd.ProportionalLayout=TA;pd.ProportionalLayout=TA;pd.ProportionalLayout=
TA;var UA=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof m.CenteredTilingLayout?m.CenteredTilingLayout:m.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Sb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var d=this.spacing,k=this.layoutableSubmorphs,b=d+this.border.top;k=k.slice();for(var e={};k.length;){e.$jscomp$loop$prop$remainingWidth$2701=a;var l=pd.arr.takeWhile(k,function(u){return function(w){w=u.$jscomp$loop$prop$remainingWidth$2701-(w.width+2*d);if(0>w)return!1;u.$jscomp$loop$prop$remainingWidth$2701=
w;return!0}}(e));l.length?k=pd.arr.withoutAll(k,l):(l=[k.shift()],e.$jscomp$loop$prop$remainingWidth$2701=0);var p=pd.pt(e.$jscomp$loop$prop$remainingWidth$2701/2+d+this.border.left,b);l=$jscomp.makeIterator(l);for(var q=l.next();!q.done;q=l.next())q=q.value,q.position=p,p=p.addXY(2*d+q.width,0),b=Math.max(b,q.bottom);b+=2*d;e={$jscomp$loop$prop$remainingWidth$2701:e.$jscomp$loop$prop$remainingWidth$2701}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],
m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24402,end:25698})}(pd.TilingLayout);pd.CenteredTilingLayout=UA;pd.CenteredTilingLayout=UA;pd.CenteredTilingLayout=UA;var VA=Ia("aA",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("TilingLayout")&&
"function"===typeof m.TilingLayout?m.TilingLayout:m.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=
a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+pd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","column"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;Sb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a);var d=this.axis,k=this.align,b=this.border,e=this.spacing,
l=this.layoutableSubmorphs,p=this.getOptimalWidth(this.container),q=(d="row"==d)?"left":"top",u=d?"x":"y",w=d?"y":"x",y=0,A=e+b[d?"top":"left"],C="topLeft";switch(this._verticalAlign){case "top":C="topLeft";break;case "center":C="leftCenter";break;case "bottom":C="bottomLeft"}for(;l.length;){var D=p-e,L=pd.arr.takeWhile(l,function(V){V=V.bounds().extent();V=D-(Math.floor(V[u])+e);if(0>V)return!1;D=V;return!0});L.length?l.splice(0,L.length):(L=[l.shift()],D=0);y=pd.arr.max(L.map(function(V){return V.bounds().extent()[w]}));
if(d)switch(k){case "left":var I=pd.pt(e,A);break;case "center":I=pd.pt(D/2+e+b[q],A);break;case "right":I=pd.pt(D-e,A)}else switch(k){case "left":I=pd.pt(A,e);break;case "center":I=pd.pt(A,D/2+e+b[q]);break;case "right":I=pd.pt(A,D-e)}"bottomLeft"==C&&(I=I.addXY(0,y));L=$jscomp.makeIterator(L);for(var S=L.next();!S.done;S=L.next())S=S.value,this.changePropertyAnimated(S,C,I,a),S=S.bounds().extent(),I=d?I.addXY(e+S[u],0):I.addXY(0,e+S[u]);A+=e+y;y=0}this.active=!1}}},{key:"getMinWidth",value:function(){var a=
this.border,d=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(k,b){return b.bounds().width>k?b.bounds().width:k},0)+d+a}},{key:"getMinHeight",value:function(){var a=this.border,d=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(k,b){return b.bounds().height>k?b.bounds().height:k},0)+d+a}},{key:"getOptimalWidth",value:function(a){var d=this.axis,k=this.border,b=k.left,e=k.top,l=k.right;k=k.bottom;a="row"==d?a.width-b-l:a.height-e-k;d="row"==d?this.getMinWidth():this.getMinHeight();
return Math.max(a,d)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:25707,end:31255})}(pd.Layout));pd.TilingLayout=VA;pd.TilingLayout=VA;pd.TilingLayout=VA;var WA=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("CellGroup")&&"function"===typeof m.CellGroup?m.CellGroup:m.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=
a.morph,k=a.layout;this.state={cells:[a.cell],layout:k,align:a.align,resize:k.fitToCell};k&&k.addGroup(this);this.morph=d}},{key:"morph",get:function(){var a=this.state,d=a.morph;a=a.layout;return d?d.isMorph?d:a.layoutableSubmorphs.find(function(k){return k.name==d}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},{key:"align",get:function(){return this.state.align||
"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var d=a&&this.layout.getCellGroupFor(a);d&&(d.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var d=this.morph;if(d){var k=this.bounds(),b=this.compensateOrigin?this.layout.container.origin.negated():pd.pt(0,0);if(a){var e=this.resize?k.extent():
d.extent,l=a;a=l.duration;l=l.easing;var p={};d.animate((p[this.alignedProperty||this.align]=k[this.align]().addPt(b),p.extent=e,p.duration=a,p.easing=l,p))}else this.resize&&(d.extent=k.extent()),d[this.alignedProperty||this.align]=k[this.align]().addPt(b);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?this.cells.map(function(a){return a.bounds()}).reduce(function(a,
d){return a.union(d)}):pd.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(d){return d==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,d){a.group=(void 0===d?null:d)||new pd.CellGroup({morph:null,layout:this.layout,cell:a});pd.arr.remove(this.cells,a);1>this.cells.length&&this.layout&&this.layout.removeGroup(this)}},{key:"merge",
value:function(a){var d=this;a.cells.forEach(function(k){d.connect(k)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(d){return(null==d.left||d.left.group!=a)&&(null==d.top||d.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(d){return(null==d.right||d.right.group!=a)&&(null==d.bottom||d.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],
m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31264,end:34496})}(void 0);pd.CellGroup=WA;pd.CellGroup=WA;pd.CellGroup=WA;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutAxis")&&"function"===typeof m.LayoutAxis?m.LayoutAxis:m.LayoutAxis=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,d=[];a=a.before;)d=[a].concat($jscomp.arrayFromIterable(d));return d}},{key:"axisAfter",get:function(){for(var a=
this,d=[];a=a.after;)d=[].concat($jscomp.arrayFromIterable(d),[a]);return d}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},{key:"container",get:function(){return this.origin.container}},
{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(d){return d.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var d=this;if(pd.obj.isNumber(a)){var k=a;a=!0}this.items.forEach(function(e){e.fixed[d.dimension]=a});var b=
this.containerLength;void 0!=k&&(this[this.dimension]=k);this.adjustOtherProportions(a);this.containerLength=b}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var d=this;this.items.forEach(function(k){k[d.dimension]=pd.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var d=this;this.items.forEach(function(k){k.proportion[d.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var d=this;this.items.forEach(function(k){k.min[d.dimension]=0>k.min[d.dimension]+a?0:k.min[d.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var d=this,k=this.axisBefore,b=this.axisAfter,e=pd.arr.sum([].concat($jscomp.arrayFromIterable(k),$jscomp.arrayFromIterable(b)).filter(function(q){return!q.fixed}).map(function(q){return q.proportion})),
l=function(q){return q.proportion/=e},p=function(q){return q.proportion*=d.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=e);k.forEach(a?l:p);b.forEach(a?l:p)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var d;0>this.length+a&&(a=
-this.length);(d=this.axisAfter.find(function(k){return!k.fixed}))?(a=Math.min(a,d.length),this.length+=a,d.length-=a,this.adjustProportion(),d.adjustProportion()):(d=this.axisBefore.reverse().find(function(k){return!k.fixed}))?(d.length-=a,this.length+=a,this.adjustProportion(),d.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(k){return k.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(k){return!k.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),d=(this.containerLength-this.staticLength)/a.length;a.map(function(k){k.fixed||(k.length=d);return k}).forEach(function(k){return k.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:35136,end:40853})})(void 0);var XA=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutColumn")&&
"function"===typeof m.LayoutColumn?m.LayoutColumn:m.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new pd.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new pd.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(d){d.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(d){d.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new pd.LayoutColumn(new pd.LayoutCell({column:pd.arr.withN(this.items.length,null),layout:this.layout}));pd.arr.zip(a.items,this.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.height=k.height;d.fixed.height=k.fixed.height;d.frozen.height=k.frozen.height;d.proportion.height=k.proportion.height;d.min.height=k.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;pd.arr.zip(this.items,a.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.right=k;k.left=d});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(k){k.left&&(k.left.right=k.right);k.right&&(k.right.left=k.left);k.group.disconnect(k);a.layout.removeGroup(k.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40862,end:43236})}(pd.LayoutAxis);pd.LayoutColumn=XA;pd.LayoutColumn=XA;pd.LayoutColumn=XA;var YA=function(f){var m=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutRow")&&"function"===typeof m.LayoutRow?m.LayoutRow:m.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),
[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new pd.LayoutRow(new pd.LayoutCell({row:pd.arr.withN(this.items.length,null),layout:this.layout}));pd.arr.zip(a.items,this.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.width=k.width;d.fixed.width=k.fixed.width;d.frozen.width=k.frozen.width;d.proportion.width=k.proportion.width;d.min.width=k.min.width});return a}},{key:"paddingTop",
set:function(a){this.items.forEach(function(d){d.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(d){d.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new pd.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new pd.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;pd.arr.zip(this.items,a.items).forEach(function(d){var k=$jscomp.makeIterator(d);d=k.next().value;k=k.next().value;d.bottom=k;k.top=d});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,d=this.before||this.after;this.items.forEach(function(k){k.top&&(k.top.bottom=k.bottom);k.bottom&&(k.bottom.top=k.top);k.group.disconnect(k);a.layout.removeGroup(k.group)});
this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());d.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:43245,
end:45706})}(pd.LayoutAxis);pd.LayoutRow=YA;pd.LayoutRow=YA;pd.LayoutRow=YA;var ZA=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("LayoutCell")&&"function"===typeof m.LayoutCell?m.LayoutCell:m.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=a.row,k=a.column,b=a.top,e=a.left,
l=a.right,p=a.bottom;a=a.layout;var q;d=$jscomp.makeIterator(d||[]);var u=d.next().value;d=$jscomp.arrayFromIterator(d);k=$jscomp.makeIterator(k||[]);var w=k.next().value;k=$jscomp.arrayFromIterator(k);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=b;this.left=e;this.bottom=p;this.right=l;this.padding=pd.rect(0,0,0,0);0<d.length?this.right=new pd.LayoutCell({row:d,left:this,layout:a}):0<k.length&&(this.bottom=new pd.LayoutCell({column:k,
top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(q=a&&a.getCellGroupFor(u||w))?q.connect(this):this.group=new pd.CellGroup({cell:this,morph:u||w,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",
get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var d=a.neighbor,k=a.prepend;a=a.append;for(var b=[],e=this;e=e[d];)k&&(b=[e].concat($jscomp.arrayFromIterable(b))),a&&(b=[].concat($jscomp.arrayFromIterable(b),[e]));return b}},{key:"col",value:function(a){for(var d=this,k=a;0<k&&d;)d=d.right,
k--;if(!d)throw Error(a+" out of bounds! Last column was "+(a-k-1));return new pd.LayoutColumn(d)}},{key:"row",value:function(a){for(var d=this,k=a;0<k&&d;)d=d.bottom,k--;if(!d)throw Error(a+" out of bounds! Last row was "+(a-k-1));return new pd.LayoutRow(d)}},{key:"extent",get:function(){return pd.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},
{key:"totalStaticWidth",get:function(){return pd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return pd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return pd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return pd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,
this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return pd.pt(pd.arr.sum(this.before.map(function(a){return a.width})),pd.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],m,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45715,end:49367})}(void 0);pd.LayoutCell=ZA;pd.LayoutCell=ZA;pd.LayoutCell=ZA;var js=Ia("ab",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),n=m.hasOwnProperty("GridLayout")&&"function"===typeof m.GridLayout?m.GridLayout:m.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],d=[],k=[],b={},e=$jscomp.makeIterator(pd.arr.range(0,this.rowCount-1)),l=e.next();!l.done;l=e.next())a.push(this.grid.row(l.value).items.map(function(q){return q.group.state.morph?q.group.state.morph.name||q.group.state.morph:null}));e=$jscomp.makeIterator(pd.arr.range(0,this.rowCount-1));for(l=e.next();!l.done;l=e.next()){l=l.value;var p=this.grid.row(l);d.push(l,Object.assign({},
p.fixed?{fixed:p.length}:{height:p.height},{paddingTop:p.paddingTop,paddingBottom:p.paddingBottom}))}e=$jscomp.makeIterator(pd.arr.range(0,this.columnCount-1));for(l=e.next();!l.done;l=e.next())l=l.value,p=this.grid.col(l),k.push(l,Object.assign({},p.fixed?{fixed:p.length}:{},{paddingLeft:p.paddingLeft,paddingRight:p.paddingRight}));e=$jscomp.makeIterator(this.cellGroups);for(l=e.next();!l.done;l=e.next())l=l.value,l.state.morph&&(b["string"===typeof l.state.morph?l.state.morph:l.morph.name]=pd.obj.select(l,
["align","resize"]));return{autoAssign:!1,grid:a,rows:d,columns:k,groups:b}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+pd.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,d=this.ensureGrid(this.config).map(function(k){return new pd.LayoutRow(new pd.LayoutCell({row:k,layout:a}))});d.reduce(function(k,b){return k.attachTo(b)});this.config.autoAssign&&this.autoAssign(this.notInLayout);
this.grid=d[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var d in a){var k=this.getCellGroupFor(this.container.getSubmorphNamed(d)),b=a[d],e=b.resize,l=void 0===b.align?"topLeft":b.align;b=void 0===b.alignedProperty?"topLeft":b.alignedProperty;k&&(void 0!=e&&(k.resize=e),k.align=l,k.alignedProperty=b)}}},{key:"initRowsAndColumns",value:function(){var a=
this.config,d=void 0===a.columns?[]:a.columns,k=$jscomp.makeIterator(pd.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=k.next();!a.done;a=k.next()){var b=$jscomp.makeIterator(a.value);a=b.next().value;b=b.next().value;Object.assign(this.row(a),b)}d=$jscomp.makeIterator(pd.arr.toTuples(d,2));for(a=d.next();!a.done;a=d.next())k=$jscomp.makeIterator(a.value),a=k.next().value,b=k.next().value,Object.assign(this.col(a),b)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},
{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(d){return d.resize=a});this.apply()}},{key:"notInLayout",get:function(){return pd.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},
{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){pd.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,d,k;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(b){b.prepareForResize(a.container.height);d=a.grid.totalStaticHeight;return b}).forEach(function(b){b.fixed||
(b.length=b.proportion*Math.max(0,a.container.height-d))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(b){b.prepareForResize(a.container.width);k=a.grid.totalStaticWidth;return b}).forEach(function(b){b.fixed||(b.length=b.proportion*Math.max(0,a.container.width-k))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,Sb._get(Object.getPrototypeOf(n.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),
this.container.extent=pd.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(d){d&&d.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),d=a.next();!d.done;d=a.next())if(d=d.value,d.morph&&!d.bounds().equals(d.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",
value:function(a){return a&&this.cellGroups.find(function(d){return d.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var d=this.getCellGroupFor(a);d&&(d.morph=null);Sb._get(Object.getPrototypeOf(n.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var d=this,k=a.grid,b=a.rowCount,e=a.columnCount;k=k||[[]];b=b||k.length;e=e||pd.arr.max(k.map(function(l){return l.length}));k.length<b&&(k=k.concat(pd.arr.withN(b-k.length,
[])));return k=k.map(function(l){l.length<e&&(l=l.concat(pd.arr.withN(e-l.length,null)));return l.map(function(p){return p&&p.isMorph?(p.owner!=d.container&&d.container.addMorph(p),p):p?d.container.getSubmorphNamed(p)||p:p})})}},{key:"autoAssign",value:function(a){var d=this;a.forEach(function(k){var b,e=Infinity;d.cellGroups.forEach(function(l){l.morph||l.cells.forEach(function(p){p=p.position.dist(k.position);p<e&&(b=l,e=p)})});b&&(b.morph=k)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],
m,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:49376,end:56477})}(pd.Layout));pd.GridLayout=js;pd.GridLayout=js;pd.GridLayout=js;var $1=Object.freeze({__proto__:null,CustomLayout:RA,SnapLayout:SA,VerticalLayout:is,HorizontalLayout:xo,ProportionalLayout:TA,CenteredTilingLayout:UA,TilingLayout:VA,
CellGroup:WA,LayoutColumn:XA,LayoutRow:YA,LayoutCell:ZA,GridLayout:js});Ia("bO",$1);lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var f=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,a){return n.set(Symbol[a],"Symbol."+a)},new Map)}(),m=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?
this[Symbol.toPrimitive]():this,a=Symbol.keyFor(n);if(a)return{__expr__:'Symbol.for("'+a+'")'};if(f.get(n))return{__expr__:f.get(n)};n=String(n).match(m);return{__expr__:n?'Symbol("'+n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,
value:function(f,m,n){var a=f.add(this),d=a.currentRev,k=a.currentSnapshot,b=k.entries=[],e=0;m[a.id]=k;f.classHelper.addClassInfo(a,this,k);k=$jscomp.makeIterator(this);for(var l=k.next();!l.done;l=k.next()){var p=$jscomp.makeIterator(l.value);l=p.next().value;p=p.next().value;e++;l=a.snapshotProperty(a.id,l,n.concat("key",String(e)),m,f);p=a.snapshotProperty(a.id,p,n.concat("value",String(e)),m,f);b.push(l,p)}return a.asRefForSerializedObjMap(d)}});Object.defineProperty(Map.prototype,"__deserialize__",
{configurable:!0,value:function(f,m,n,a,d){f=f.entries;for(var k=0;k<f.length;k+=2){var b=f[k+1],e=m.recreateProperty("key."+k,f[k],n,a,d.concat("key",k));b=m.recreateProperty("value."+k,b,n,a,d.concat("value",k));this.set(e,b)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(f,m,n){var a=f.add(this),d=a.currentRev,k=a.currentSnapshot,b=k.entries=[],e=0;m[a.id]=k;f.classHelper.addClassInfo(a,this,k);k=$jscomp.makeIterator(this);for(var l=k.next();!l.done;l=k.next())l=
l.value,e++,l=a.snapshotProperty(a.id,l,n.concat("entry",String(e)),m,f),b.push(l);return a.asRefForSerializedObjMap(d)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(f,m,n,a,d){f=f.entries;for(var k=0;k<f.length;k++){var b=m.recreateProperty("entry."+k,f[k],n,a,d.concat("key",k));this.add(b)}}});var xP=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");xP.isPrimitive=wD;xP.isPrimitive=wD;xP.isPrimitive=wD;var qh=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");
qh.obj=ff;qh.properties=km;qh.Plugin=function(){};var yP=function(){};yP.prototype.serializeObject=function(f,m,n,a,d){if("function"!==typeof f.__serialize__)return null;(f=f.__serialize__(n,a,d))&&f.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(f),f=m?n:{__expr__:n});return f};yP.prototype.deserializeObject=function(f,m,n,a){return(m=n.__expr__)?f.expressionSerializer.deserializeExpr(m):null};qh.CustomSerializePlugin=yP;var zP=function(){};zP.prototype.additionallySerialize=
function(f,m,n,a){f.classHelper.addClassInfo(m,m.realObj,n)};zP.prototype.deserializeObject=function(f,m,n,a){return f.classHelper.restoreIfClassInstance(m,n)};qh.ClassPlugin=zP;var a2=function(){};a2.prototype.serializeObject=function(f,m,n,a,d){f&&f.isMorph&&(f.__isBeingSerialized__=!0);return null};qh.SerializationIndicationPlugin=a2;var b2=function(){};b2.prototype.additionallySerialize=function(f,m,n,a){m.realObj&&m.realObj.isMorph&&(m.realObj.__isBeingSerialized__=!1)};qh.SerializationFinishPlugin=
b2;var PH=function(){};PH.prototype.additionallySerialize=function(f,m,n,a){var d=m.realObj;d&&"function"===typeof d.__additionally_serialize__&&d.__additionally_serialize__(n,m,f,a)};PH.prototype.additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k,b){"function"===typeof n.__deserialize__&&n.__deserialize__(d,m,k,f,b)};PH.prototype.additionallyDeserializeAfterProperties=function(f,m,n,a,d,k){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(a,m,f)};qh.AdditionallySerializePlugin=
PH;var c2=function(){};c2.prototype.propertiesToSerialize=function(f,m,n,a){return(f=m.realObj)&&f.__only_serialize__||null};qh.OnlySerializePropsPlugin=c2;var d2=function(){};d2.prototype.propertiesToSerialize=function(f,m,n,a){f=m.realObj;if(!f||!f.__dont_serialize__)return null;f=qh.obj.mergePropertyInHierarchy(f,"__dont_serialize__");m=[];for(n=0;n<a.length;n++){var d=a[n];f.includes(d)||m.push(d)}return m};qh.DontSerializePropsPlugin=d2;var AP=function(){};AP.prototype.propertiesToSerialize=
function(f,m,n,a){var d=m.realObj;m=d.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!m)return null;f=m.properties;n=m.propertySettings.valueStoreProperty||"_state";m=[];if(d[n]){if(d.__only_serialize__){for(var k=0;k<a.length;k++){d=a[k];var b=f[d];d!==n&&(b&&b&&(b.derived||b.readOnly||b.hasOwnProperty("serialize")&&!b.serialize)||m.push(d))}return m}n=a.indexOf(n);-1<n&&a.splice(n,1);for(k in f)n=f[k],d=a.indexOf(k),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?
-1<d&&a.splice(d,1):-1===d&&m.push(k);return m.concat(a)}};AP.prototype.additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k,b){var e=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!e)return a;var l=e.order;e=e.propertySettings.valueStoreProperty||"_state";a=d.props;if(a[e])return a;a=qh.obj.clone(a);n.hasOwnProperty(e)||n.initializeProperties();for(d=0;d<l.length;d++)e=l[d],a.hasOwnProperty(e)&&(m.recreatePropertyAndSetProperty(n,a,e,k,f,b),delete a[e]);return a};
qh.LivelyClassPropertiesPlugin=AP;var BP=function(){};BP.prototype.additionallySerialize=function(f,m,n,a){var d=this,k=m.realObj;k&&(this._serializable(k)?qh.properties.allOwnPropertiesOrFunctions(k,function(b,e){d._serializable(k[e])||console.warn("Attribute cannot be serialized: "+e+" of "+k+". Might be an anonymous function?")}):console.warn("Cannot serialize anonymous function "+k))};BP.prototype._serializable=function(f){return"function"!==typeof f||!!f.isWrapped||!!f.hasLivelyClosure};qh.SerializableCheckPlugin=
BP;var CP={livelyClassPropertiesPlugin:new qh.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new qh.DontSerializePropsPlugin,onlySerializePropsPlugin:new qh.OnlySerializePropsPlugin,additionallySerializePlugin:new qh.AdditionallySerializePlugin,classPlugin:new qh.ClassPlugin,customSerializePlugin:new qh.CustomSerializePlugin,indicationPlugin:new qh.SerializationIndicationPlugin,serializableCheckPlugin:new qh.SerializableCheckPlugin,finishPlugin:new qh.SerializationFinishPlugin};qh.plugins=CP;
qh.plugins=CP;qh.plugins=CP;var Bp=[qh.plugins.indicationPlugin,qh.plugins.customSerializePlugin,qh.plugins.classPlugin,qh.plugins.additionallySerializePlugin,qh.plugins.onlySerializePropsPlugin,qh.plugins.dontSerializePropsPlugin,qh.plugins.livelyClassPropertiesPlugin,qh.plugins.serializableCheckPlugin,qh.plugins.finishPlugin];qh.allPlugins=Bp;qh.allPlugins=Bp;qh.allPlugins=Bp;var oi=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");oi.__additionally_serialize__addObjectFunction=
function(f,m,n,a,d){d=void 0===d?[]:d;return function(k,b,e){e=void 0===e?!1:e;return m.props[k]=e?{value:b,verbatim:e}:{value:f.snapshotProperty(f.id,b,d.concat([k]),n,a)}}};oi.arr=Ne;oi.Path=Sg;oi.obj=ff;oi.string=Bg;oi.isPrimitive=wD;oi.ClassHelper=Ap;oi.ExpressionSerializer=Vj;oi.allPlugins=Bp;oi.debugSerialization=!1;oi.debugDeserialization=!1;var ei=function(f){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},f);this.reset()};ei.withDefaultPlugins=function(f){return new this(Object.assign({plugins:oi.allPlugins},
f))};ei.resolveFromSnapshotAndId=function(f,m){return(new this(m)).resolveFromSnapshotAndId(f)};ei.fromSnapshot=function(f,m){return(new this(m)).readSnapshot(f)};ei.withObject=function(f,m){m=new this(m);m.add(f);return m};ei.prototype.reset=function(){this.uuidGen=oi.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var f=this.options;this.classHelper=new oi.ClassHelper(f);this.expressionSerializer=new oi.ExpressionSerializer;f.idPropertyName&&(this.idPropertyName=f.idPropertyName);f.uuidGen&&
(this.uuidGen=f.uuidGen);f.reinitializeIds&&(this.reinitializeIds=f.reinitializeIds);f.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=f.ignoreClassNotFound);var m=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};f.plugins&&f.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&m.serializeObject.push(n);"function"===typeof n.additionallySerialize&&m.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&m.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&m.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&m.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&m.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&m.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&m.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&m.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&m.afterSerialization.push(n)})};ei.prototype.knowsId=function(f){return!!this._id_ref_map[f]};ei.prototype.refForId=function(f){return this._id_ref_map[f]};ei.prototype.resolveToObj=function(f){return(f=this._id_ref_map[f])?f.realObj:void 0};ei.prototype.ref=
function(f){return this._obj_ref_map.get(f)};ei.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};ei.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};ei.prototype.internalAddRef=function(f){f.realObj&&this._obj_ref_map.set(f.realObj,f);return this._id_ref_map[f.id]=f};ei.prototype.add=function(f){var m=this;if(!oi.isPrimitive(f)){if(Array.isArray(f))return f.map(function(a){return m.add(a)});var n=f.__serialization_id_property__||this.idPropertyName;
return this.ref(f)||this.internalAddRef(new oi.ObjectRef(f[n]||this.uuidGen(),f,void 0,this.idPropertyName))}};ei.prototype.snapshot=function(f){var m={};this.plugin_beforeSerialization(m,f);for(var n=0,a=Object.keys(this._id_ref_map);n<a.length;n++)this._id_ref_map[a[n]].snapshotObject(m,this);return m=this.plugin_afterSerialization(m,f)};ei.prototype.snapshotObject=function(f){f=this.add(f).id;var m=this.snapshot(f);return{id:f,snapshot:m}};ei.prototype.readSnapshot=function(f,m){if(f.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)oi.ObjectRef.fromSnapshot(m,f,this,[],this.idPropertyName);else{m=0;for(var n=Object.keys(f);m<n.length;m++)this.resolveToObj(n[m])||oi.ObjectRef.fromSnapshot(n[m],f,this,[],this.idPropertyName)}return this};ei.prototype.resolveFromSnapshotAndId=function(f){if(!f.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!f.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var m=f=this.plugin_beforeDeserialization(f),n=m.id;this.readSnapshot(m.snapshot,
n);this.plugin_afterDeserialization(f);return this.resolveToObj(n)};ei.prototype.plugin_beforeSerialization=function(f,m){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,f,m)};ei.prototype.plugin_afterSerialization=function(f,m){for(var n=0;n<this.plugins.afterSerialization.length;n++){var a=this.plugins.afterSerialization[n].afterSerialization(this,f,m);a&&(f=a)}return f};ei.prototype.plugin_beforeDeserialization=function(f){for(var m=
0;m<this.plugins.beforeDeserialization.length;m++){var n=this.plugins.beforeDeserialization[m].beforeDeserialization(this,f);n&&(f=n)}return f};ei.prototype.plugin_afterDeserialization=function(f){for(var m=0;m<this.plugins.afterDeserialization.length;m++)this.plugins.afterDeserialization[m].afterDeserialization(this,f)};ei.prototype.plugin_serializeObject=function(f,m,n,a){for(var d=0;d<this.plugins.serializeObject.length;d++){var k=this.plugins.serializeObject[d].serializeObject(f,m,this,n,a);if(k)return k}};
ei.prototype.plugin_propertiesToSerialize=function(f,m,n){for(var a=0;a<this.plugins.propertiesToSerialize.length;a++){var d=this.plugins.propertiesToSerialize[a].propertiesToSerialize(this,f,m,n);d&&(n=d)}return n};ei.prototype.plugin_additionallySerialize=function(f,m,n,a){n=this.plugins.additionallySerialize.length?oi.__additionally_serialize__addObjectFunction(f,m,n,this,a):null;for(a=0;a<this.plugins.additionallySerialize.length;a++)this.plugins.additionallySerialize[a].additionallySerialize(this,
f,m,n)};ei.prototype.plugin_deserializeObject=function(f,m,n){for(var a=0;a<this.plugins.deserializeObject.length;a++){var d=this.plugins.deserializeObject[a].deserializeObject(this,f,m,n);if(d)return d}};ei.prototype.plugin_additionallyDeserializeBeforeProperties=function(f,m,n,a,d,k){for(var b=0;b<this.plugins.additionallyDeserializeBeforeProperties.length;b++){var e=this.plugins.additionallyDeserializeBeforeProperties[b].additionallyDeserializeBeforeProperties(this,f,m,n,a,d,k);e&&(n=e)}return n};
ei.prototype.plugin_additionallyDeserializeAfterProperties=function(f,m,n,a,d){for(var k=0;k<this.plugins.additionallyDeserializeAfterProperties.length;k++)this.plugins.additionallyDeserializeAfterProperties[k].additionallyDeserializeAfterProperties(this,f,m,n,a,d)};oi.ObjectPool=ei;var Bn=function(f,m,n,a){this.id=f;this.idPropertyName=void 0===a?"id":a;this.realObj=m;this.snapshotVersions=[];this.snapshots={};n&&(f=n.rev||0,this.snapshotVersions.push(f),this.snapshots[f]=n)};Bn.fromSnapshot=function(f,
m,n,a,d){a=void 0===a?[]:a;f=new this(f,void 0,void 0,d);try{return n.internalAddRef(f).recreateObjFromSnapshot(m,n,a)}catch(k){if(n.options.highlightBuggyMorphs)for(;a.length;){if((m=oi.Path(a).map(function(b,e){return"submorphs"==b?e.filter(function(l){return!l.isHand&&!l.isEpiMorph}):e}).get(n.options.rootObject))&&m.isMorph&&m.world()){m.show(!0);n.options.highlightBuggyMorphs=!1;break}a.pop()}throw k;}};Bn.prototype.asRefForSerializedObjMap=function(f){return{__ref__:!0,id:this.id,rev:void 0===
f?"????":f}};Bn.prototype.snapshotObject=function(f,m,n){n=void 0===n?[]:n;oi.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var a=this.id,d=this.realObj,k=this.snapshots;if(!d)return console.error("Cannot marshall object ref "+a+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var b=d._rev||0;var e=this.asRefForSerializedObjMap(b);oi.arr.pushIfNotIncluded(this.snapshotVersions,
b);if(k[b])return f[a]||(f[a]=k[b]),e;var l=typeof a;"number"===l&&(a=String(a),l="string");if("string"!==l)throw Error("Error snapshoting "+d+": id is not a string but "+(a+" (serialization path: ")+(n.join(".")+")"));if(l=m.plugin_serializeObject(d,!1,f,n))return k[b]=f[a]=l,e;l=Object.getOwnPropertyNames(d);var p={};k=k[b]=f[a]={rev:b,props:p};(b=m.plugin_propertiesToSerialize(this,k,l))&&(l=b);for(b=0;b<l.length;b++){var q=l[b];p[q]={value:this.snapshotProperty(a,d[q],n.concat([q]),f,m)}}m.plugin_additionallySerialize(this,
k,f,n);return e};Bn.prototype.snapshotProperty=function(f,m,n,a,d){var k=this;if(oi.isPrimitive(m))return m;var b=d.plugin_serializeObject(m,!0,a,n);if(b)return b;if("function"!==typeof m)return Array.isArray(m)?m.map(function(e,l){return k.snapshotProperty(f,e,n.concat(l),a,d)}):(m=d.add(m))&&m.isObjectRef?m.snapshotObject(a,d,n):m};Bn.prototype.recreateObjFromSnapshot=function(f,m,n){if(this.realObj)return this;oi.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var a=f[this.id];if(!a)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var d=a.rev,k;d=d||0;this.snapshotVersions.push(d);this.snapshots[d]=a;(k=m.plugin_deserializeObject(this,a,n))||(k={});"undefined"===typeof k._rev&&"object"===typeof k&&(k._rev=d||0);this.realObj=k;m.internalAddRef(this);if(!k)return this;d=a.props;var b=m.plugin_additionallyDeserializeBeforeProperties(this,k,d,a,f,n);b&&(d=b);if(d)for(var e in d)this.recreatePropertyAndSetProperty(k,
d,e,f,m,n);e=k.__serialization_id_property__||this.idPropertyName;m.reinitializeIds&&k.hasOwnProperty(e)&&(k[e]=m.reinitializeIds(this.id,this));m.plugin_additionallyDeserializeAfterProperties(this,k,a,f,n);return this};Bn.prototype.recreatePropertyAndSetProperty=function(f,m,n,a,d,k){try{var b=m[n]||{value:"NON EXISTING"},e=b.value;f[n]=b.verbatim?e:this.recreateProperty(n,e,a,d,k.concat(n))}catch(p){try{var l=String(f)}catch(q){l="[some "+f.constructor.name+"]"}p.__seen?console.error("Error deserializing property "+
n+" of "+l):(f=n+" of "+l+" ("+JSON.stringify(e)+")",console.error("Error deserializing property "+f),p.__seen=!0)}};Bn.prototype.recreateProperty=function(f,m,n,a,d){var k=this;if("string"===typeof m&&a.expressionSerializer.isSerializedExpression(m))return a.expressionSerializer.deserializeExpr(m);if(oi.isPrimitive(m))return m;if(Array.isArray(m))return m.map(function(b,e){return k.recreateProperty(e,b,n,a,d.concat(e))});f=m.__serialization_id_property__||this.idPropertyName;return(a.refForId(m[f])||
oi.ObjectRef.fromSnapshot(m[f],n,a,d,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(Bn.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var f=oi.arr.last(this.snapshotVersions);else f=0,this.snapshotVersions.push(f);return this.snapshots[f]||(this.snapshots[f]={rev:f,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
oi.arr.last(this.snapshotVersions):0}}});oi.ObjectRef=Bn;var Me=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Me.referenceGraph=FK;Me.isReference=xD;Me.referencesOfRef=GK;Me.referencesOfId=yD;Me.referencesInArray=JS;Me.moduleOfId=zD;Me.referencesAndClassNamesOfId=HK;Me.classNameOfId=AD;Me.findPathFromToId=IK;Me.lookupPath=JK;Me.modifyProperty=KK;Me.removeUnreachableObjects=dq;Me.clearDanglingConnections=BD;Me.requiredModulesOfSnapshot=eq;Me.ClassHelper=Ap;Me.Path=
Sg;Me.obj=ff;Me.arr=Ne;Me.graph=Cq;Me.ExpressionSerializer=Vj;Me.referenceGraph=FK;Me.referenceGraph=FK;Me.isReference=xD;Me.isReference=xD;Me.referencesOfRef=GK;Me.referencesOfRef=GK;Me.referencesOfId=yD;Me.referencesOfId=yD;Me.moduleOfId=zD;Me.moduleOfId=zD;Me.referencesAndClassNamesOfId=HK;Me.referencesAndClassNamesOfId=HK;Me.classNameOfId=AD;Me.classNameOfId=AD;Me.findPathFromToId=IK;Me.findPathFromToId=IK;Me.lookupPath=JK;Me.lookupPath=JK;Me.modifyProperty=KK;Me.modifyProperty=KK;Me.removeUnreachableObjects=
dq;Me.removeUnreachableObjects=dq;Me.clearDanglingConnections=BD;Me.clearDanglingConnections=BD;Me.defaultExprSerializer=new Me.ExpressionSerializer;Me.requiredModulesOfSnapshot=eq;Me.requiredModulesOfSnapshot=eq;var e2,iw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Hj=e2={};try{var sr="function"==typeof setTimeout?setTimeout:LK}catch(f){sr=LK}try{var tr="function"==typeof clearTimeout?clearTimeout:MK}catch(f){tr=MK}!0;var yt,fq=[],jw=!1,CD=-1;Hj.nextTick=function(f){var m=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)m[n-1]=arguments[n];fq.push(new MS(f,m));1!==fq.length||jw||KS(LS)};MS.prototype.run=function(){(this||iw).fun.apply(null,(this||iw).array)};Hj.title="browser";Hj.browser=!0;Hj.env={};Hj.argv=[];Hj.version="";Hj.versions={};Hj.on=gq;Hj.addListener=gq;Hj.once=gq;Hj.off=gq;Hj.removeListener=gq;Hj.removeAllListeners=gq;Hj.emit=gq;Hj.prependListener=gq;Hj.prependOnceListener=gq;Hj.listeners=function(f){return[]};Hj.binding=
function(f){throw Error("process.binding is not supported");};Hj.cwd=function(){return"/"};Hj.chdir=function(f){throw Error("process.chdir is not supported");};Hj.umask=function(){return 0};var yh=Ia("aV",e2),OS={},NS=!1,QS={},PS=!1,To={},RS=!1,TS={},SS=!1,VS={},US=!1,XS={},WS=!1,ZS={},YS=!1,aT={},$S=!1,cT={},bT=!1,eT={},dT=!1,gT={},fT=!1,iT={},hT=!1,kT={},jT=!1,mT={},lT=!1,oT={},nT=!1,qT={},pT=!1,sT={},rT=!1,uT={},tT=!1,wT={},vT=!1,zT={},yT=!1,BT={},AT=!1,ET={},DT=!1,GT={},FT=!1,sga={},tga=sga=function(f){f.prototype[Symbol.iterator]=
function n(){var a=this,d;return $jscomp.generator.createGenerator(n,function(k){1==k.nextAddress&&(d=a.head);if(3!=k.nextAddress)return d?k.yield(d.value,3):k.jumpTo(0);d=d.next;return k.jumpTo(2)})}},f2={};f2=gi;gi.Node=zt;gi.create=gi;gi.prototype.removeNode=function(f){if(f.list!==this)throw Error("removing node which does not belong to this list");var m=f.next,n=f.prev;m&&(m.prev=n);n&&(n.next=m);f===this.head&&(this.head=m);f===this.tail&&(this.tail=n);f.list.length--;f.next=null;f.prev=null;
f.list=null;return m};gi.prototype.unshiftNode=function(f){if(f!==this.head){f.list&&f.list.removeNode(f);var m=this.head;f.list=this;if(f.next=m)m.prev=f;this.head=f;this.tail||(this.tail=f);this.length++}};gi.prototype.pushNode=function(f){if(f!==this.tail){f.list&&f.list.removeNode(f);var m=this.tail;f.list=this;if(f.prev=m)m.next=f;this.tail=f;this.head||(this.head=f);this.length++}};gi.prototype.push=function(){for(var f=0,m=arguments.length;f<m;f++)this.tail=new zt(arguments[f],this.tail,null,
this),this.head||(this.head=this.tail),this.length++;return this.length};gi.prototype.unshift=function(){for(var f=0,m=arguments.length;f<m;f++)this.head=new zt(arguments[f],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};gi.prototype.pop=function(){if(this.tail){var f=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return f}};gi.prototype.shift=function(){if(this.head){var f=this.head.value;(this.head=this.head.next)?
this.head.prev=null:this.tail=null;this.length--;return f}};gi.prototype.forEach=function(f,m){m=m||this;for(var n=this.head,a=0;null!==n;a++)f.call(m,n.value,a,this),n=n.next};gi.prototype.forEachReverse=function(f,m){m=m||this;for(var n=this.tail,a=this.length-1;null!==n;a--)f.call(m,n.value,a,this),n=n.prev};gi.prototype.get=function(f){for(var m=0,n=this.head;null!==n&&m<f;m++)n=n.next;if(m===f&&null!==n)return n.value};gi.prototype.getReverse=function(f){for(var m=0,n=this.tail;null!==n&&m<f;m++)n=
n.prev;if(m===f&&null!==n)return n.value};gi.prototype.map=function(f,m){m=m||this;for(var n=new gi,a=this.head;null!==a;)n.push(f.call(m,a.value,this)),a=a.next;return n};gi.prototype.mapReverse=function(f,m){m=m||this;for(var n=new gi,a=this.tail;null!==a;)n.push(f.call(m,a.value,this)),a=a.prev;return n};gi.prototype.reduce=function(f,m){var n=this.head;if(1<arguments.length)var a=m;else if(this.head)n=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");
for(var d=0;null!==n;d++)a=f(a,n.value,d),n=n.next;return a};gi.prototype.reduceReverse=function(f,m){var n=this.tail;if(1<arguments.length)var a=m;else if(this.tail)n=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;null!==n;d--)a=f(a,n.value,d),n=n.prev;return a};gi.prototype.toArray=function(){for(var f=Array(this.length),m=0,n=this.head;null!==n;m++)f[m]=n.value,n=n.next;return f};gi.prototype.toArrayReverse=function(){for(var f=
Array(this.length),m=0,n=this.tail;null!==n;m++)f[m]=n.value,n=n.prev;return f};gi.prototype.slice=function(f,m){m=m||this.length;0>m&&(m+=this.length);f=f||0;0>f&&(f+=this.length);var n=new gi;if(m<f||0>m)return n;0>f&&(f=0);m>this.length&&(m=this.length);for(var a=0,d=this.head;null!==d&&a<f;a++)d=d.next;for(;null!==d&&a<m;a++,d=d.next)n.push(d.value);return n};gi.prototype.sliceReverse=function(f,m){m=m||this.length;0>m&&(m+=this.length);f=f||0;0>f&&(f+=this.length);var n=new gi;if(m<f||0>m)return n;
0>f&&(f=0);m>this.length&&(m=this.length);for(var a=this.length,d=this.tail;null!==d&&a>m;a--)d=d.prev;for(;null!==d&&a>f;a--,d=d.prev)n.push(d.value);return n};gi.prototype.splice=function(f,m,n){for(var a=[],d=2;d<arguments.length;++d)a[d-2]=arguments[d];f>this.length&&(f=this.length-1);0>f&&(f=this.length+f);d=0;for(var k=this.head;null!==k&&d<f;d++)k=k.next;var b=[];for(d=0;k&&d<m;d++)b.push(k.value),k=this.removeNode(k);null===k&&(k=this.tail);k!==this.head&&k!==this.tail&&(k=k.prev);for(d=0;d<
a.length;d++){var e=a[d];k=k===this.head?new zt(e,null,k,this):new zt(e,k,k.next,this);null===k.next&&(this.tail=k);null===k.prev&&(this.head=k);this.length++}return b};gi.prototype.reverse=function(){for(var f=this.head,m=this.tail,n=f;null!==n;n=n.prev){var a=n.prev;n.prev=n.next;n.next=a}this.head=m;this.tail=f;return this};try{tga(gi)}catch(f){}var uga={},vga=f2,Du=Symbol("max"),Nm=Symbol("length"),Cx=Symbol("lengthCalculator"),$A=Symbol("allowStale"),Eu=Symbol("maxAge"),Jq=Symbol("dispose"),
g2=Symbol("noDisposeOnSet"),Pk=Symbol("lruList"),yo=Symbol("cache"),h2=Symbol("updateAgeOnGet"),DP=function(){return 1},fl=function(f){"number"===typeof f&&(f={max:f});f||(f={});if(f.max&&("number"!==typeof f.max||0>f.max))throw new TypeError("max must be a non-negative number");this[Du]=f.max||Infinity;var m=f.length||DP;this[Cx]="function"!==typeof m?DP:m;this[$A]=f.stale||!1;if(f.maxAge&&"number"!==typeof f.maxAge)throw new TypeError("maxAge must be a number");this[Eu]=f.maxAge||0;this[Jq]=f.dispose;
this[g2]=f.noDisposeOnSet||!1;this[h2]=f.updateAgeOnGet||!1;this.reset()};fl.prototype.rforEach=function(f,m){m=m||this;for(var n=this[Pk].tail;null!==n;){var a=n.prev;i2(this,f,n,m);n=a}};fl.prototype.forEach=function(f,m){m=m||this;for(var n=this[Pk].head;null!==n;){var a=n.next;i2(this,f,n,m);n=a}};fl.prototype.keys=function(){return this[Pk].toArray().map(function(f){return f.key})};fl.prototype.values=function(){return this[Pk].toArray().map(function(f){return f.value})};fl.prototype.reset=function(){var f=
this;this[Jq]&&this[Pk]&&this[Pk].length&&this[Pk].forEach(function(m){return f[Jq](m.key,m.value)});this[yo]=new Map;this[Pk]=new vga;this[Nm]=0};fl.prototype.dump=function(){var f=this;return this[Pk].map(function(m){return QH(f,m)?!1:{k:m.key,v:m.value,e:m.now+(m.maxAge||0)}}).toArray().filter(function(m){return m})};fl.prototype.dumpLru=function(){return this[Pk]};fl.prototype.set=function(f,m,n){if((n=n||this[Eu])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var a=n?Date.now():
0,d=this[Cx](m,f);if(this[yo].has(f)){if(d>this[Du])return Dx(this,this[yo].get(f)),!1;var k=this[yo].get(f).value;if(this[Jq]&&!this[g2])this[Jq](f,k.value);k.now=a;k.maxAge=n;k.value=m;this[Nm]+=d-k.length;k.length=d;this.get(f);aB(this);return!0}n=new wga(f,m,d,a,n);if(n.length>this[Du]){if(this[Jq])this[Jq](f,m);return!1}this[Nm]+=n.length;this[Pk].unshift(n);this[yo].set(f,this[Pk].head);aB(this);return!0};fl.prototype.has=function(f){if(!this[yo].has(f))return!1;f=this[yo].get(f).value;return!QH(this,
f)};fl.prototype.get=function(f){return EP(this,f,!0)};fl.prototype.peek=function(f){return EP(this,f,!1)};fl.prototype.pop=function(){var f=this[Pk].tail;if(!f)return null;Dx(this,f);return f.value};fl.prototype.del=function(f){Dx(this,this[yo].get(f))};fl.prototype.load=function(f){this.reset();for(var m=Date.now(),n=f.length-1;0<=n;n--){var a=f[n],d=a.e||0;0===d?this.set(a.k,a.v):(d-=m,0<d&&this.set(a.k,a.v,d))}};fl.prototype.prune=function(){var f=this;this[yo].forEach(function(m,n){return EP(f,
n,!1)})};$jscomp.global.Object.defineProperties(fl.prototype,{max:{configurable:!0,enumerable:!0,set:function(f){if("number"!==typeof f||0>f)throw new TypeError("max must be a non-negative number");this[Du]=f||Infinity;aB(this)},get:function(){return this[Du]}},allowStale:{configurable:!0,enumerable:!0,set:function(f){this[$A]=!!f},get:function(){return this[$A]}},maxAge:{configurable:!0,enumerable:!0,set:function(f){if("number"!==typeof f)throw new TypeError("maxAge must be a non-negative number");
this[Eu]=f;aB(this)},get:function(){return this[Eu]}},lengthCalculator:{configurable:!0,enumerable:!0,set:function(f){var m=this;"function"!==typeof f&&(f=DP);f!==this[Cx]&&(this[Cx]=f,this[Nm]=0,this[Pk].forEach(function(n){n.length=m[Cx](n.value,n.key);m[Nm]+=n.length}));aB(this)},get:function(){return this[Cx]}},length:{configurable:!0,enumerable:!0,get:function(){return this[Nm]}},itemCount:{configurable:!0,enumerable:!0,get:function(){return this[Pk].length}}});var EP=function(f,m,n){if(m=f[yo].get(m)){var a=
m.value;if(QH(f,a)){if(Dx(f,m),!f[$A])return}else n&&(f[h2]&&(m.value.now=Date.now()),f[Pk].unshiftNode(m));return a.value}},QH=function(f,m){if(!m||!m.maxAge&&!f[Eu])return!1;var n=Date.now()-m.now;return m.maxAge?n>m.maxAge:f[Eu]&&n>f[Eu]},aB=function(f){if(f[Nm]>f[Du])for(var m=f[Pk].tail;f[Nm]>f[Du]&&null!==m;){var n=m.prev;Dx(f,m);m=n}},Dx=function(f,m){if(m){var n=m.value;if(f[Jq])f[Jq](n.key,n.value);f[Nm]-=n.length;f[yo].delete(n.key);f[Pk].removeNode(m)}},wga=function(f,m,n,a,d){this.key=
f;this.value=m;this.length=n;this.now=a;this.maxAge=d||0},i2=function(f,m,n,a){var d=n.value;QH(f,d)&&(Dx(f,n),f[$A]||(d=void 0));d&&m.call(a,d.value,d.key,f)},j2=uga=fl,k2=Object.freeze({__proto__:null,"default":j2}),r7="default"in k2?j2:k2,TK={},HT=!1,UK={},IT=!1,KT={},JT=!1,MT={},LT=!1,OT={},NT=!1,QT={},PT=!1,ST={},RT=!1,UT={},TT=!1,WT={},VT=!1,YT={},XT=!1,$T={},ZT=!1,bU={},aU=!1,dU={},cU=!1,fU={},eU=!1,hU={},gU=!1,jU={},iU=!1,lU={},kU=!1,nU={},mU=!1,pU={},oU=!1,rU={},qU=!1,l2={},m2=!1,bB=function(){if(m2)return l2;
m2=!0;var f=kw();return l2={re:f.re,src:f.src,tokens:f.t,SEMVER_SPEC_VERSION:DD().SEMVER_SPEC_VERSION,SemVer:Fl(),compareIdentifiers:NK().compareIdentifiers,rcompareIdentifiers:NK().rcompareIdentifiers,parse:lw(),valid:k7(),clean:v7(),inc:l7(),diff:w7(),major:m7(),minor:x7(),patch:y7(),prerelease:n7(),compare:Wn(),rcompare:o7(),compareLoose:z7(),compareBuild:PK(),sort:A7(),rsort:p7(),gt:GD(),lt:QK(),eq:OK(),neq:xT(),gte:RK(),lte:SK(),cmp:CT(),coerce:q7(),Comparator:HD(),Range:Xn(),satisfies:ID(),
toComparators:B7(),maxSatisfying:s7(),minSatisfying:C7(),minVersion:D7(),validRange:t7(),outside:VK(),gtr:E7(),ltr:F7(),intersects:u7(),simplifyRange:G7(),subset:H7()}}(),Ue=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");Ue.normalizeOptions=Wy;Ue.normalizeMigrations=function(f){f=void 0===f?[]:f;return{before:f.filter(function(m){return"function"===typeof m.snapshotConverter}),after:f.filter(function(m){return"function"===typeof m.objectConverter})}};Ue.runMigrations=function(f,
m,n,a){for(var d=0;d<f.length;d++){var k=f[d];try{n=k[m](n,a)}catch(b){console.error("migration "+k.name+" failed:"),console.error(b)}}return n};Ue.serialize=mw;Ue.deserialize=Xy;Ue.deserializeWithMigrations=Yy;Ue.copy=Zy;Ue.ObjectPool=ei;Ue.serializerVersion="0.1.3";Ue.requiredModulesOfSnapshot=eq;Ue.removeUnreachableObjects=dq;Ue.clearDanglingConnections=BD;Ue.allPlugins=Bp;Ue.semver=bB;Ue.normalizeOptions=Wy;Ue.normalizeOptions=Wy;Ue.majorAndMinorVersionRe=/\.[^\.]+$/;Ue.ObjectRef=Bn;Ue.ObjectRef=
Bn;Ue.ObjectPool=ei;Ue.ObjectPool=ei;Ue.requiredModulesOfSnapshot=eq;Ue.requiredModulesOfSnapshot=eq;Ue.removeUnreachableObjects=dq;Ue.removeUnreachableObjects=dq;Ue.serialize=mw;Ue.serialize=mw;Ue.deserialize=Xy;Ue.deserialize=Xy;Ue.deserializeWithMigrations=Yy;Ue.deserializeWithMigrations=Yy;Ue.copy=Zy;Ue.copy=Zy;Ue.ExpressionSerializer=Vj;Ue.serializeSpec=xm;Ue.deserializeSpec=Vn;Ue.getSerializableClassMeta=qr;Ue.locateClass=Ro;Ue.getClassName=Un;Ue.ExpressionSerializer=Vj;Ue.ExpressionSerializer=
Vj;Ue.getSerializableClassMeta=qr;Ue.getSerializableClassMeta=qr;Ue.locateClass=Ro;Ue.locateClass=Ro;Ue.serializeSpec=xm;Ue.serializeSpec=xm;Ue.deserializeSpec=Vn;Ue.deserializeSpec=Vn;Ue.getClassName=Un;Ue.getClassName=Un;Ue.allPlugins=Bp;Ue.allPlugins=Bp;var xga=Object.freeze({__proto__:null,normalizeOptions:Wy,ObjectRef:Bn,ObjectPool:ei,requiredModulesOfSnapshot:eq,removeUnreachableObjects:dq,serialize:mw,deserialize:Xy,deserializeWithMigrations:Yy,copy:Zy,ExpressionSerializer:Vj,getSerializableClassMeta:qr,
locateClass:Ro,serializeSpec:xm,deserializeSpec:Vn,getClassName:Un,allPlugins:Bp}),ah=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");ah.sanitizeFont=$y;ah.pathForBrowserHistory=nw;ah.addClassMappings=az;ah.morph=Zi;ah.newMorphId=bz;ah.lazyInspect=function(f){var m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(System.import("lively.ide/js/inspector.js"),2);m=a.yieldResult;n=m.inspect;ah.inspect=n;return a.return(n(f))})};ah.locateClass=
Ro;ah.string=Bg;ah.parseQuery=Vb;ah.stringifyQuery=Eb;ah.touchInput=ah.touchInput||void 0;try{document.createEvent("TouchEvent"),ah.touchInput=!0}catch(f){ah.touchInput=!1}var Ol=Ia("t",ah.touchInput);ah.touchInputDevice=Ol;ah.touchInputDevice=Ol;ah.touchInputDevice=Ol;ah.nameToClassMapping=ah.nameToClassMapping||{};ah.sanitizeFont=$y;ah.sanitizeFont=$y;ah.pathForBrowserHistory=nw;ah.pathForBrowserHistory=nw;ah.addClassMappings=az;ah.addClassMappings=az;ah.morph=Zi;ah.morph=Zi;ah.newMorphId=bz;ah.newMorphId=
bz;var Fu=Ia("a2",ah.lazyInspect);ah.inspect=Fu;ah.inspect=Fu;ah.inspect=Fu;var yga={},J7=Object.prototype.toString,FP=yga=Array.isArray||I7,zga={},cB=zga="2",WK="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,n2={};$m.NONE=0;$m.VTEXT=1;$m.VNODE=2;$m.WIDGET=3;$m.PROPS=4;$m.ORDER=5;$m.INSERT=6;$m.REMOVE=7;$m.THUNK=8;n2=$m;$m.prototype.version=cB;$m.prototype.type="VirtualPatch";var Kq=n2,Aga={},dB=Aga=function(f){return f&&"VirtualNode"===f.type&&f.version===cB},Bga=
{},RH=Bga=function(f){return f&&"VirtualText"===f.type&&f.version===cB},Cga={},ks=Cga=function(f){return f&&"Widget"===f.type},Dga={},eB=Dga=function(f){return f&&"Thunk"===f.type},Ega={},K7=dB,L7=RH,M7=ks,o2=Ega=function(f,m){var n=f,a=m;eB(m)&&(a=sU(m,f));eB(f)&&(n=sU(f,null));return{a:n,b:a}},Fga={},SH=Fga=function(f){return"object"===typeof f&&null!==f},Gga={},fB=Gga=function(f){return f&&("function"===typeof f.hook&&!f.hasOwnProperty("hook")||"function"===typeof f.unhook&&!f.hasOwnProperty("unhook"))},
p2={},uU=SH,N7=fB;p2=tU;var q2={},Q7=FP,fj=Kq,At=dB,zU=RH,KD=ks,JD=eB,P7=o2,O7=p2;q2=wU;var Hga={},Iga=Hga=q2,Jga=Object.freeze({}),r2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kga={},s2="undefined"!==typeof r2?r2:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var GP=document;else(GP=s2["__GLOBAL_DOCUMENT_CACHE@4"])||(GP=s2["__GLOBAL_DOCUMENT_CACHE@4"]=Jga);var t2=Kga=GP,Lga={},BU=fB,u2=Lga=function(f,m,n){for(var a in m){var d=m[a];if(void 0===
d)AU(f,a,d,n);else if(BU(d))AU(f,a,d,n),d.hook&&d.hook(f,a,n?n[a]:void 0);else if(SH(d)){var k=void 0,b=void 0,e=f,l=a,p=n?n[l]:void 0;if("attributes"===l)for(b in d)k=d[b],void 0===k?e.removeAttribute(b):e.setAttribute(b,k);else if(p&&SH(p)&&CU(p)!==CU(d))e[l]=d;else for(k in SH(e[l])||(e[l]={}),b="style"===l?"":void 0,d)p=d[k],e[l][k]=void 0===p?b:p}else f[a]=d}},Mga={},EU=t2,V7=u2,U7=dB,T7=RH,S7=ks,R7=o2,v2=Mga=DU,Nga={},Oga=Nga=function(f,m){return ks(f)&&ks(m)?"name"in f&&"name"in m?f.id===m.id:
f.init===m.init:!1},Pga={},W7={},Qga=Pga=function(f,m,n,a){return n&&0!==n.length?(n.sort(X7),FU(f,m,n,a,0)):{}},w2={},Y7=ks;w2=function(f,m,n){var a=f.vNode,d=f.patch;switch(f.type){case Kq.REMOVE:return(d=m.parentNode)&&d.removeChild(m),HU(m,a),null;case Kq.INSERT:return d=n.render(d,n),m&&m.appendChild(d),m;case Kq.VTEXT:return 3===m.nodeType?(m.replaceData(0,m.length,d.text),d=m):(a=m.parentNode,d=n.render(d,n),a&&d!==m&&a.replaceChild(d,m)),d;case Kq.WIDGET:return d=(f=Oga(a,d))?d.update(a,m)||
m:n.render(d,n),(n=m.parentNode)&&d!==m&&n.replaceChild(d,m),f||HU(m,a),d;case Kq.VNODE:return a=m.parentNode,d=n.render(d,n),a&&d!==m&&a.replaceChild(d,m),d;case Kq.ORDER:a=m.childNodes;n={};for(var k,b=0;b<d.removes.length;b++)k=d.removes[b],f=a[k.from],k.key&&(n[k.key]=f),m.removeChild(f);b=a.length;for(var e=0;e<d.inserts.length;e++)k=d.inserts[e],f=n[k.key],m.insertBefore(f,k.to>=b++?null:a[k.to]);return m;case Kq.PROPS:return u2(m,d,a.properties),m;case Kq.THUNK:return d=n.patch(m,d,n),m&&d&&
m!==d&&m.parentNode&&m.parentNode.replaceChild(d,m),d;default:return m}};var x2={},b8=t2,c8=FP,$7=v2,a8=Qga,JU=w2;x2=IU;var Rga={},Sga=Rga=x2,Uo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,y2={},g8=dB,h8=ks,i8=eB,f8=fB;y2=$K;var d8={},e8=[];$K.prototype.version=cB;$K.prototype.type="VirtualNode";var HP=y2,j8="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,z2={};z2=aL;aL.prototype.version=cB;aL.prototype.type="VirtualText";var IP=
z2,A2={};A2=function(f){var m=String.prototype.split,n=/()??/.exec("")[1]===f;return function(a,d,k){if("[object RegExp]"!==Object.prototype.toString.call(d))return m.call(a,d,k);var b=[],e=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.extended?"x":"")+(d.sticky?"y":""),l=0;d=new RegExp(d.source,e+"g");var p,q;a+="";n||(p=new RegExp("^"+d.source+"$(?!\\s)",e));for(k=k===f?4294967295:k>>>0;q=d.exec(a);){e=q.index+q[0].length;if(e>l){b.push(a.slice(l,q.index));!n&&1<q.length&&q[0].replace(p,function(){for(var w=
1;w<arguments.length-2;w++)arguments[w]===f&&(q[w]=f)});1<q.length&&q.index<a.length&&Array.prototype.push.apply(b,q.slice(1));var u=q[0].length;l=e;if(b.length>=k)break}d.lastIndex===q.index&&d.lastIndex++}l===a.length?(u||!d.test(""))&&b.push(""):b.push(a.slice(l));return b.length>k?b.slice(0,k):b}}();var Tga={},Uga=A2,Vga=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,Wga=/^\.|#/,Xga=Tga=function(f,m){if(!f)return"DIV";var n=!m.hasOwnProperty("id");f=Uga(f,Vga);var a=null;Wga.test(f[1])&&(a="DIV");var d,
k;for(k=0;k<f.length;k++)if(d=f[k]){var b=d.charAt(0);if(a)if("."===b){var e=e||[];e.push(d.substring(1,d.length))}else"#"===b&&n&&(m.id=d.substring(1,d.length));else a=d}e&&(m.className&&e.push(m.className),m.className=e.join(" "));return m.namespace?a:a.toUpperCase()},B2={};B2=MD;MD.prototype.hook=function(f,m){f[m]!==this.value&&(f[m]=this.value)};var Yga=B2,C2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,D2={},JP="undefined"!==typeof window?window:"undefined"!==
typeof C2?C2:{};D2=function(f,m){return f in JP?JP[f]:JP[f]=m};var E2={},F2=D2;E2=function(f,m,n){var a="__INDIVIDUAL_ONE_VERSION_"+f,d=F2(a+"_ENFORCE_SINGLETON",m);if(d!==m)throw Error("Can only have one copy of "+f+".\nYou already have version "+d+" installed.\nThis means you cannot install version "+m);return F2(a,n)};var G2={};E2("ev-store","7");G2=function(f){var m=f["__EV_STORE_KEY@7"];m||(m=f["__EV_STORE_KEY@7"]={});return m};var H2={},I2=G2;H2=cz;cz.prototype.hook=function(f,m){f=I2(f);m=
m.substr(3);f[m]=this.value};cz.prototype.unhook=function(f,m){f=I2(f);m=m.substr(3);f[m]=void 0};var J2={},NU=FP,LU=IP,k8=dB,l8=RH,m8=ks,n8=eB,Zga=H2;J2=function(f,m,n){var a=[],d;if(d=!n)d="string"===typeof m||NU(m)||MU(m);if(d){n=m;var k={}}k=k||m||{};f=Xga(f,k);if(k.hasOwnProperty("key")){var b=k.key;k.key=void 0}if(k.hasOwnProperty("namespace")){var e=k.namespace;k.namespace=void 0}"INPUT"!==f||e||!k.hasOwnProperty("value")||void 0===k.value||fB(k.value)||(k.value=Yga(k.value));m=k;for(var l in m)m.hasOwnProperty(l)&&
(d=m[l],fB(d)||"ev-"===l.substr(0,3)&&(m[l]=Zga(d)));void 0!==n&&null!==n&&KU(n,a,f,k);return new HP(f,k,a,b,e)};var $ga={},aha=$ga=J2,K2={};K2=v2;var bha={},gB=bha={diff:Iga,patch:Sga,h:aha,create:K2,VNode:HP,VText:IP},cha={},dha=cha={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",
cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType",
"for":"htmlFor",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",
loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",
scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},L2={};L2={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,
alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,
cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,
focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,
"in":null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,
mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,
patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,
role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,
"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,
"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink",
"xlink:role":"http://www.w3.org/1999/xlink","xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var eha={},p8=HP,PU=IP,KP,QU=dha,o8=L2,fha=eha=function(f,
m){if(!f)return bL(document.createTextNode(""));if("string"===typeof f){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");KP=KP||new DOMParser;f=KP.parseFromString(f,"text/html");f=f.body.firstChild?f.getElementsByTagName("body")[0].firstChild:f.head.firstChild&&("TITLE"!==f.head.firstChild.tagName||f.title)?f.head.firstChild:f.firstChild&&"HTML"!==f.firstChild.tagName?f.firstChild:document.createTextNode("")}if("object"!==typeof f||
!f||!f.nodeType)throw Error("invalid dom node",f);return bL(f,m)},gha="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,LP={};!function(f,m){LP?LP=m():(this||gha)[f]=m()}("bowser",function(){function f(k){function b(Q){return(Q=k.match(Q))&&1<Q.length&&Q[1]||""}function e(Q){return(Q=k.match(Q))&&1<Q.length&&Q[2]||""}var l=b(/(ipod|iphone|ipad)/i).toLowerCase(),p=!/like android/i.test(k)&&/android/i.test(k),q=/nexus\s*[0-6]\s*/i.test(k),u=!q&&/nexus\s*[0-9]+/i.test(k),
w=/CrOS/.test(k),y=/silk/i.test(k),A=/sailfish/i.test(k),C=/tizen/i.test(k),D=/(web|hpw)os/i.test(k),L=/windows phone/i.test(k),I=!L&&/windows/i.test(k),S=!l&&!y&&/macintosh/i.test(k),V=!p&&!A&&!C&&!D&&/linux/i.test(k),ba=b(/edge\/(\d+(\.\d+)?)/i),ua=b(/version\/(\d+(\.\d+)?)/i),Fa=/tablet/i.test(k),F=!Fa&&/[^-]mobi/i.test(k),Y=/xbox/i.test(k);/opera|opr|opios/i.test(k)?w={name:"Opera",opera:!0,version:ua||b(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(k)?w={name:"Opera Coast",coast:!0,
version:ua||b(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(k)?w={name:"Yandex Browser",yandexbrowser:!0,version:ua||b(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(k)?w={name:"UC Browser",ucbrowser:!0,version:b(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(k)?w={name:"Maxthon",maxthon:!0,version:b(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(k)?w={name:"Epiphany",epiphany:!0,version:b(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(k)?w={name:"Puffin",puffin:!0,
version:b(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(k)?w={name:"Sleipnir",sleipnir:!0,version:b(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(k)?w={name:"K-Meleon",kMeleon:!0,version:b(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:L?(w={name:"Windows Phone",windowsphone:!0},ba?(w.msedge=!0,w.version=ba):(w.msie=!0,w.version=b(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(k)?w={name:"Internet Explorer",msie:!0,version:b(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:w?w={name:"Chrome",chromeos:!0,
chromeBook:!0,chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(k)?w={name:"Microsoft Edge",msedge:!0,version:ba}:/vivaldi/i.test(k)?w={name:"Vivaldi",vivaldi:!0,version:b(/vivaldi\/(\d+(\.\d+)?)/i)||ua}:A?w={name:"Sailfish",sailfish:!0,version:b(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(k)?w={name:"SeaMonkey",seamonkey:!0,version:b(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(k)?(w={name:"Firefox",firefox:!0,version:b(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},
/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(k)&&(w.firefoxos=!0)):y?w={name:"Amazon Silk",silk:!0,version:b(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(k)?w={name:"PhantomJS",phantom:!0,version:b(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(k)?w={name:"SlimerJS",slimer:!0,version:b(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(k)||/rim\stablet/i.test(k)?w={name:"BlackBerry",blackberry:!0,version:ua||b(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:D?(w={name:"WebOS",webos:!0,version:ua||b(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},
/touchpad\//i.test(k)&&(w.touchpad=!0)):/bada/i.test(k)?w={name:"Bada",bada:!0,version:b(/dolfin\/(\d+(\.\d+)?)/i)}:C?w={name:"Tizen",tizen:!0,version:b(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||ua}:/qupzilla/i.test(k)?w={name:"QupZilla",qupzilla:!0,version:b(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||ua}:/chromium/i.test(k)?w={name:"Chromium",chromium:!0,version:b(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||ua}:/chrome|crios|crmo/i.test(k)?w={name:"Chrome",chrome:!0,version:b(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:
p?w={name:"Android",version:ua}:/safari|applewebkit/i.test(k)?(w={name:"Safari",safari:!0},ua&&(w.version=ua)):l?(w={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},ua&&(w.version=ua)):w=/googlebot/i.test(k)?{name:"Googlebot",googlebot:!0,version:b(/googlebot\/(\d+(\.\d+))/i)||ua}:{name:b(/^(.*)\/(.*) /),version:e(/^(.*)\/(.*) /)};!w.msedge&&/(apple)?webkit/i.test(k)?(/(apple)?webkit\/537\.36/i.test(k)?(w.name=w.name||"Blink",w.blink=!0):(w.name=w.name||"Webkit",w.webkit=!0),!w.version&&ua&&(w.version=
ua)):!w.opera&&/gecko\//i.test(k)&&(w.name=w.name||"Gecko",w.gecko=!0,w.version=w.version||b(/gecko\/(\d+(\.\d+)?)/i));w.msedge||!p&&!w.silk?l?(w[l]=!0,w.ios=!0):S?w.mac=!0:Y?w.xbox=!0:I?w.windows=!0:V&&(w.linux=!0):w.android=!0;I="";w.windowsphone?I=b(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(I=b(/os (\d+([_\s]\d+)*) like mac os x/i),I=I.replace(/[_\s]/g,".")):p?I=b(/android[ \/-](\d+(\.\d+)*)/i):w.webos?I=b(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):w.blackberry?I=b(/rim\stablet\sos\s(\d+(\.\d+)*)/i):
w.bada?I=b(/bada\/(\d+(\.\d+)*)/i):w.tizen&&(I=b(/tizen[\/\s](\d+(\.\d+)*)/i));I&&(w.osversion=I);I=I.split(".")[0];if(Fa||u||"ipad"==l||p&&(3==I||4<=I&&!F)||w.silk)w.tablet=!0;else if(F||"iphone"==l||"ipod"==l||p||q||w.blackberry||w.webos||w.bada)w.mobile=!0;w.msedge||w.msie&&10<=w.version||w.yandexbrowser&&15<=w.version||w.vivaldi&&1<=w.version||w.chrome&&20<=w.version||w.firefox&&20<=w.version||w.safari&&6<=w.version||w.opera&&10<=w.version||w.ios&&w.osversion&&6<=w.osversion.split(".")[0]||w.blackberry&&
10.1<=w.version||w.chromium&&20<=w.version?w.a=!0:w.msie&&10>w.version||w.chrome&&20>w.version||w.firefox&&20>w.version||w.safari&&6>w.version||w.opera&&10>w.version||w.ios&&w.osversion&&6>w.osversion.split(".")[0]||w.chromium&&20>w.version?w.c=!0:w.x=!0;return w}function m(k,b){var e=[],l;if(Array.prototype.map)return Array.prototype.map.call(k,b);for(l=0;l<k.length;l++)e=b(k[l]);return e}function n(k){var b=Math.max(k[0].split(".").length,k[1].split(".").length);for(k=m(k,function(e){var l=b-e.split(".").length;
e+=Array(l+1).join(".0");return m(e.split("."),function(p){return Array(20-p.length).join("0")+p}).reverse()});0<=--b;){if(k[0][b]>k[1][b])return 1;if(k[0][b]===k[1][b]){if(0===b)return 0}else return-1}}function a(k,b,e){var l=d;"string"===typeof b&&(e=b,b=void 0);void 0===b&&(b=!1);e&&(l=f(e));e=""+l.version;for(var p in k)if(k.hasOwnProperty(p)&&l[p])return 0>n([e,k[p]]);return b}var d=f("undefined"!==typeof navigator?navigator.userAgent:"");d.test=function(k){for(var b=0;b<k.length;++b){var e=
k[b];if("string"===typeof e&&e in d)return!0}return!1};d.isUnsupportedBrowser=a;d.compareVersions=n;d.check=function(k,b,e){return!a(k,b,e)};d._detect=f;return d});var Cn=LP,Wj=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");Wj.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var f=(document.location.hash||document.location.search).slice(1);f=f&&f.split("&");var m={};if(f)for(var n=0;n<f.length;n++){var a=f[n].split("="),d=a[0],k=!0;if(1<a.length&&
(k=decodeURIComponent(a.slice(1).join("=")),k.match(/^(true|false|null|[0-9"[{].*)$/)))try{k=JSON.parse(k)}catch(b){"["===k[0]&&(k=k.slice(1,-1).split(","))}m[d]=k}return m};Wj.Rectangle=Qd;Wj.Color=qf;Wj.bowser=Cn;Wj.joinPath=Jd;Wj.isMac=!!Wj.bowser.mac;Wj.baseURL=window.SERVER_URL||System.baseURL||document.location.origin;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(f){return f.hasOwnProperty("_cachedKeyhandlers")&&(f._cachedKeyhandlers=null)});Wj.config={onloadURLQuery:Wj.parseURLQuery(),
defaultShadow:{fast:!0,distance:18,blur:30,color:Wj.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:window.AUTH_SERVER_URL||"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(f){return f.includes("lively.morphic/objectdb")||f.includes("lively.next-node_modules")||
f.includes("node_modules")||f.includes("custom-npm-modules")||f.includes("mocha-es6")||f.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},{keys:"Meta-Shift-L s a v e",command:"save this world"},
{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},{keys:{win:"Ctrl-K",
mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",onlyWhenFocused:!1}},
{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",
offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",
command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",
args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",
offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},
{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",
win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},
command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",
mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",
mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},
{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:"Shift-Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",
mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},
command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},
{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},
{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",
mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},
{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},
{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},
{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},
command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},
command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",
command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},
{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},
{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",
command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},
{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:Wj.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},
systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:Wj.joinPath(Wj.baseURL,"lively.morphic/assets/ibm-plex/css/ibm-plex.css"),fontAwesome:Wj.joinPath(Wj.baseURL,"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css"),inconsolata:Wj.joinPath(Wj.baseURL,"/lively.morphic/assets/inconsolata/inconsolata.css")}};var rk=Ia("g",Wj.config);Wj.default=rk;var Lg=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");
Lg.styleProps=dz;Lg.canBePromotedToCompositionLayer=ND;Lg.addTransform=cL;Lg.addTransformOrigin=function(f,m){if(f=f.origin)m.transformOrigin=f.x+"px "+f.y+"px"};Lg.addDisplay=function(f,m){f=f.visible;null!=f&&(m.display=f?"":"none")};Lg.addBorderRadius=function(f,m){var n=f.borderRadiusLeft,a=f.borderRadiusRight,d=f.borderRadiusBottom;f=f.borderRadiusTop;m.borderRadius=f+"px "+f+"px "+d+"px "+d+"px / "+n+"px "+a+"px "+a+"px "+n+"px"};Lg.addBorder=function(f,m){var n=f.borderWidthLeft,a=f.borderColorLeft,
d=f.borderStyleLeft,k=f.borderWidthRight,b=f.borderColorRight,e=f.borderStyleRight,l=f.borderColor,p=f.borderWidthBottom,q=f.borderColorBottom,u=f.borderStyleBottom,w=f.borderWidthTop,y=f.borderColorTop;f=f.borderStyleTop;var A=function(C){return Lg.bowser.safari?Lg.string.camelize(C):C};m[A("border-left-style")]=""+d;m[A("border-right-style")]=""+e;m[A("border-bottom-style")]=""+u;m[A("border-top-style")]=""+f;m[A("border-left-width")]=n+"px";m[A("border-right-width")]=k+"px";m[A("border-bottom-width")]=
p+"px";m[A("border-top-width")]=w+"px";m[A("border-top-color")]=y?y.toString():"transparent";m[A("border-right-color")]=b?b.toString():"transparent";m[A("border-bottom-color")]=q?q.toString():"transparent";m[A("border-left-color")]=a?a.toString():"transparent";l&&l.isGradient&&(m["border-image"]=l.toString())};Lg.addFill=function(f,m){(f=f.fill)?f.isGradient?m.backgroundImage=f.toString():m.background=f.toString():m.background=Lg.Color.transparent.toString()};Lg.addExtentStyle=function(f,m){f=f.extent;
m.width=f.x+"px";m.height=f.y+"px"};Lg.shadowCss=function(f){return f.dropShadow?f.dropShadow.toFilterCss():""};Lg.addShadowStyle=function(f,m){f.isSvgMorph||f.isImage?m.filter=Lg.shadowCss(f):(f=f.dropShadow)&&f.fast||f&&f.inset?m.boxShadow=f?f.toCss():"none":m.filter=f?f.toFilterCss():""};Lg.addSvgAttributes=ez;Lg.getSvgVertices=ow;Lg.addPathAttributes=fz;Lg.addSvgBorderStyle=function(f,m){var n=f.borderStyle.valueOf();"dashed"===n?(f=f.borderWidth.valueOf(),m["stroke-dasharray"]=1.61*f+" "+f):
"dotted"===n&&(m["stroke-dasharray"]="1 "+2*f.borderWidth.valueOf(),m["stroke-linecap"]="round",m["stroke-linejoin"]="round");return m};Lg.Color=qf;Lg.string=Bg;Lg.bowser=Cn;Lg.styleProps=dz;Lg.styleProps=dz;Lg.canBePromotedToCompositionLayer=ND;Lg.canBePromotedToCompositionLayer=ND;Lg.addTransform=cL;Lg.addTransform=cL;Lg.addSvgAttributes=ez;Lg.addSvgAttributes=ez;Lg.getSvgVertices=ow;Lg.getSvgVertices=ow;Lg.addPathAttributes=fz;Lg.addPathAttributes=fz;var ce=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");
ce.defaultStyle=pw;ce.MorphAfterRenderHook=function(f,m){this.morph=f;this.renderer=m};ce.Animation=function(f){this.morph=f};ce.SvgAnimation=dL;ce.defaultAttributes=qw;ce.svgAttributes=OD;ce.pathAttributes=PD;ce.renderGradient=QD;ce.initDOMState=function(f,m){f.rootNode.appendChild(f.domNode);f.ensureDefaultCSS().then(function(){return ce.promise.delay(500)}).then(function(){return m.env.fontMetric&&m.env.fontMetric.reset()}).then(function(){return m.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var a=
(n.metadata||{}).serializationInfo;a&&a.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};ce.renderMorph=RD;ce.renderSubTree=SD;ce.renderRootMorph=TD;ce.vdom=gB;ce.parser=fha;ce.num=Gj;ce.obj=ff;ce.arr=Ne;ce.properties=km;ce.promise=Uf;ce.Color=qf;ce.RadialGradient=Nl;ce.pt=kh;ce.Point=xf;ce.LinearGradient=qk;ce.rect=zk;ce.config=rk;ce.styleProps=dz;ce.addSvgAttributes=ez;ce.addPathAttributes=fz;ce.bowser=Cn;var TH=ce.vdom;ce.h=TH.h;ce.diff=TH.diff;ce.patch=
TH.patch;ce.createNode=TH.create;ce.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
ce.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
ce.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var Dn=Ia("br",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=m.hasOwnProperty("ShadowObject")&&"function"===typeof m.ShadowObject?m.ShadowObject:m.ShadowObject=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){ce.obj.isBoolean(a)&&(a=ce.config.defaultShadow);var d=a;a=d.rotation;var k=d.distance,
b=d.blur,e=d.color,l=d.morph,p=d.inset,q=d.spread;d=d.fast;this.rotation=ce.obj.isNumber(a)?a:45;this.distance=ce.obj.isNumber(k)?k:2;this.blur=ce.obj.isNumber(b)?b:6;this.inset=p||!1;this.spread=q||0;this.color=e||ce.Color.gray.darker();this.morph=l;this.fast=d}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(a){this._inset=a;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(a){this._distance=a;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(a){this._blur=a;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(a){this._rotation=a;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(a){this._color=a;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var a=this.toJson(),d=a.distance,k=a.rotation,b=a.color,e=a.inset,l=a.blur,p=a.spread;a=a.fast;b=b.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:d,rotation:k,color:b,inset:e,blur:l,spread:p,fast:a}).map(function(q){var u=$jscomp.makeIterator(q);q=u.next().value;u=u.next().value;return q+":"+u})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(a){return new ce.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},a))}},{key:"toCss",value:function(){var a=this.color,d=this.inset,k=this.blur,b=this.spread,e=ce.Point.polar(this.distance,ce.num.toRadians(this.rotation)),l=e.y;return(d?"inset":"")+" "+a.toString()+" "+e.x.toFixed(2)+"px "+l.toFixed(2)+"px "+k+"px "+b+"px"}},{key:"toJson",value:function(){return ce.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(a){return!!a&&ce.obj.equals(this.toJson(),a.toJson())}},{key:"toFilterCss",value:function(){var a=this.blur,d=this.color,k=ce.Point.polar(this.distance,ce.num.toRadians(this.rotation)),b=k.x;k=k.y;a=ce.bowser.chrome?a/3:a/2;return"drop-shadow("+b.toFixed(2)+"px "+k.toFixed(2)+"px "+a.toFixed(2)+"px "+d.toString()+")"}},{key:"interpolate",value:function(a,d){return new ce.ShadowObject({distance:ce.num.interpolate(a,this.distance,d.distance),rotation:ce.num.interpolate(a,this.rotation,
d.rotation),color:this.color.interpolate(a,d.color),blur:ce.num.interpolate(a,this.blur,d.blur),spread:ce.num.interpolate(a,this.spread,d.spread),inset:d.inset,fast:d.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],m,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3438,end:7097})}(void 0));ce.ShadowObject=Dn;ce.ShadowObject=Dn;ce.ShadowObject=Dn;ce.defaultStyle=pw;ce.defaultStyle=pw;ce.MorphAfterRenderHook.prototype.hook=function(f,m,n,a){var d=this;a=void 0===a?0:a;var k=!!f.parentNode;k&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,f));k||3<a?(this.morph._rendering=!1,this.morph.onAfterRender(f)):
(a++,setTimeout(function(){return d.hook(f,m,n,a)},20*a))};ce.MorphAfterRenderHook.prototype.updateScroll=function(f,m,n){var a=this,d=f.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(m&&d)return d.then(function(){return a.updateScroll(f,m,!0)});if(!f.isWorld&&m){d=f.scroll;var k=d.x,b=d.y;if(!f._animationQueue.animations.find(function(l){return l.animatedProps.scroll})){var e=f.isText&&f.viewState.fastScroll?m.querySelector(".scrollLayer"):m;!f._skipScrollUpdate&&e&&(e.scrollTop!==
b&&(e.scrollTop=b),e.scrollLeft!==k&&(e.scrollLeft=k),!n&&requestAnimationFrame(function(){e.scrollTop!==b&&(e.scrollTop=b);e.scrollLeft!==k&&(e.scrollLeft=k)},f.id))}}};ce.MorphAfterRenderHook.prototype.unhook=function(f,m){};ce.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(f,m){var n=this;f.submorphs.forEach(function(a){a.isClip()&&n.updateScroll(a,m.getNodeForMorph(a));n.updateScrollOfSubmorphs(a,m)})};ce.Animation.prototype.hook=function(f){this.morph._animationQueue.startAnimationsFor(f)};
ce.SvgAnimation=dL;ce.SvgAnimation=dL;ce.SvgAnimation.prototype.hook=function(f){this.morph._animationQueue.startSvgAnimationsFor(f,this.type)};ce.defaultAttributes=qw;ce.defaultAttributes=qw;ce.svgAttributes=OD;ce.svgAttributes=OD;ce.pathAttributes=PD;ce.pathAttributes=PD;ce.renderGradient=QD;ce.renderGradient=QD;ce.renderMorph=RD;ce.renderMorph=RD;ce.renderSubTree=SD;ce.renderSubTree=SD;ce.renderRootMorph=TD;ce.renderRootMorph=TD;var kc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,MP={};!function(f,m){m(MP)}(MP,function(f){function m(sa){return 10===sa||13===sa||8232===sa||8233===sa||32===sa||9===sa||11===sa||12===sa||160===sa||5760<=sa&&0<=ls.indexOf(sa)}function n(sa){return 48<=sa&&57>=sa}function a(sa){(this||kc).index=0;(this||kc).path=sa;(this||kc).max=sa.length;(this||kc).result=[];(this||kc).param=0;(this||kc).err="";(this||kc).segmentStart=0;(this||kc).data=[]}function d(sa){for(;sa.index<sa.max&&m(sa.path.charCodeAt(sa.index));)sa.index++}function k(sa){var Qa,
Ka=sa.index,Wa=Ka,kb=sa.max,Tb=!1,$a=!1,Nb=!1,Bb=!1;if(Wa>=kb)return void(sa.err="SvgPath: missed param (at pos "+Wa+")");if(Qa=sa.path.charCodeAt(Wa),43!==Qa&&45!==Qa||(Wa++,Qa=Wa<kb?sa.path.charCodeAt(Wa):0),!n(Qa)&&46!==Qa)return void(sa.err="SvgPath: param should start with 0..9 or `.` (at pos "+Wa+")");if(46!==Qa){if(Tb=48===Qa,Wa++,Qa=Wa<kb?sa.path.charCodeAt(Wa):0,Tb&&Wa<kb&&Qa&&n(Qa))return void(sa.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+Ka+")");for(;Wa<kb&&
n(sa.path.charCodeAt(Wa));)Wa++,$a=!0;Qa=Wa<kb?sa.path.charCodeAt(Wa):0}if(46===Qa){Bb=!0;for(Wa++;n(sa.path.charCodeAt(Wa));)Wa++,Nb=!0;Qa=Wa<kb?sa.path.charCodeAt(Wa):0}if(101===Qa||69===Qa){if(Bb&&!$a&&!Nb||(Wa++,Qa=Wa<kb?sa.path.charCodeAt(Wa):0,43!==Qa&&45!==Qa||Wa++,!(Wa<kb&&n(sa.path.charCodeAt(Wa)))))return void(sa.err="SvgPath: invalid float exponent (at pos "+Wa+")");for(;Wa<kb&&n(sa.path.charCodeAt(Wa));)Wa++}sa.index=Wa;sa.param=parseFloat(sa.path.slice(Ka,Wa))+0}function b(){if(!((this||
kc)instanceof b))return new b;(this||kc).queue=[];(this||kc).cache=null}function e(sa,Qa,Ka,Wa){var kb=(sa*Ka+Qa*Wa)/(Math.sqrt(sa*sa+Qa*Qa)*Math.sqrt(sa*sa+Qa*Qa));return 1<kb&&(kb=1),-1>kb&&(kb=-1),(0>sa*Wa-Qa*Ka?-1:1)*Math.acos(kb)}function l(sa,Qa,Ka,Wa,kb,Tb,$a,Nb,Bb,Ac){var Gb=Ac*(sa-Ka)/2+Bb*(Qa-Wa)/2,nd=-Bb*(sa-Ka)/2+Ac*(Qa-Wa)/2,Kd=$a*$a,Ie=Nb*Nb,Je=Gb*Gb,ae=nd*nd,Ke=Kd*Ie-Kd*ae-Ie*Je;0>Ke&&(Ke=0);Ke=Math.sqrt(Ke/(Kd*ae+Ie*Je))*(kb===Tb?-1:1);kb=Ke*$a/Nb*nd;Ke=Ke*-Nb/$a*Gb;sa=Ac*kb-Bb*Ke+
(sa+Ka)/2;Qa=Bb*kb+Ac*Ke+(Qa+Wa)/2;Wa=(Gb-kb)/$a;Bb=(nd-Ke)/Nb;$a=(-Gb-kb)/$a;nd=(-nd-Ke)/Nb;Nb=e(1,0,Wa,Bb);nd=e(Wa,Bb,$a,nd);return 0===Tb&&0<nd&&(nd-=Lq),1===Tb&&0>nd&&(nd+=Lq),[sa,Qa,Nb,nd]}function p(sa,Qa){var Ka=4/3*Math.tan(Qa/4),Wa=Math.cos(sa),kb=Math.sin(sa),Tb=Math.cos(sa+Qa);sa=Math.sin(sa+Qa);return[Wa,kb,Wa-kb*Ka,kb+Wa*Ka,Tb+sa*Ka,sa-Tb*Ka,Tb,sa]}function q(sa,Qa,Ka){if(!((this||kc)instanceof q))return new q(sa,Qa,Ka);(this||kc).rx=sa;(this||kc).ry=Qa;(this||kc).ax=Ka}function u(sa){if(!((this||
kc)instanceof u))return new u(sa);sa=new a(sa);var Qa=sa.max;for(d(sa);sa.index<Qa&&!sa.err.length;)a:{var Ka,Wa=void 0,kb=sa,Tb=kb.max;kb.segmentStart=kb.index;var $a=kb.path.charCodeAt(kb.index);b:{switch(32|$a){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:$a=!0;break b}$a=!1}if($a){if(Wa=nm[kb.path[kb.index].toLowerCase()],kb.index++,d(kb),kb.data=[],Wa)for($a=!1;;){for(Ka=Wa;0<Ka;Ka--){if(k(kb),kb.err.length)break a;kb.data.push(kb.param);d(kb);
$a=!1;kb.index<Tb&&44===kb.path.charCodeAt(kb.index)&&(kb.index++,d(kb),$a=!0)}if(!$a){if(kb.index>=kb.max)break;Ka=kb.path.charCodeAt(kb.index);if(!(48<=Ka&&57>=Ka||43===Ka||45===Ka||46===Ka))break}}Tb=kb;kb=Tb.path[Tb.segmentStart];Wa=kb.toLowerCase();$a=Tb.data;if("m"===Wa&&2<$a.length&&(Tb.result.push([kb,$a[0],$a[1]]),$a=$a.slice(2),Wa="l",kb="m"===kb?"l":"L"),"r"===Wa)Tb.result.push([kb].concat($a));else for(;$a.length>=nm[Wa]&&(Tb.result.push([kb].concat($a.splice(0,nm[Wa]))),nm[Wa]););}else kb.err=
"SvgPath: bad command "+kb.path[kb.index]+" (at pos "+kb.index+")"}sa=(sa.err.length?sa.result=[]:sa.result.length&&(0>"mM".indexOf(sa.result[0][0])?(sa.err="SvgPath: string should start with `M` or `m`",sa.result=[]):sa.result[0][0]="M"),{err:sa.err,segments:sa.result});(this||kc).segments=sa.segments;(this||kc).err=sa.err;(this||kc).__stack=[]}function w(sa,Qa,Ka,Wa,kb,Tb,$a,Nb){(this||kc).a={x:sa,y:Qa};(this||kc).b={x:Ka,y:Wa};(this||kc).c={x:kb,y:Tb};(this||kc).d={x:$a,y:Nb};null!==$a&&void 0!==
$a&&null!==Nb&&void 0!==Nb?((this||kc).getArcLength=V,(this||kc).getPoint=L,(this||kc).getDerivative=A):((this||kc).getArcLength=I,(this||kc).getPoint=D,(this||kc).getDerivative=y);this.init()}function y(sa,Qa,Ka){return{x:2*(1-Ka)*(sa[1]-sa[0])+2*Ka*(sa[2]-sa[1]),y:2*(1-Ka)*(Qa[1]-Qa[0])+2*Ka*(Qa[2]-Qa[1])}}function A(sa,Qa,Ka){return D([3*(sa[1]-sa[0]),3*(sa[2]-sa[1]),3*(sa[3]-sa[2])],[3*(Qa[1]-Qa[0]),3*(Qa[2]-Qa[1]),3*(Qa[3]-Qa[2])],Ka)}function C(sa,Qa,Ka,Wa,kb){for(var Tb=1,$a=sa/Qa,Nb=(sa-Ka(Wa,
kb,$a))/Qa;.001<Tb;){var Bb=Ka(Wa,kb,$a+Nb),Ac=Ka(Wa,kb,$a-Nb);Bb=Math.abs(sa-Bb)/Qa;Ac=Math.abs(sa-Ac)/Qa;Bb<Tb?(Tb=Bb,$a+=Nb):Ac<Tb?(Tb=Ac,$a-=Nb):Nb/=2}return $a}function D(sa,Qa,Ka){return{x:(1-Ka)*(1-Ka)*sa[0]+2*(1-Ka)*Ka*sa[1]+Ka*Ka*sa[2],y:(1-Ka)*(1-Ka)*Qa[0]+2*(1-Ka)*Ka*Qa[1]+Ka*Ka*Qa[2]}}function L(sa,Qa,Ka){return{x:(1-Ka)*(1-Ka)*(1-Ka)*sa[0]+3*(1-Ka)*(1-Ka)*Ka*sa[1]+3*(1-Ka)*Ka*Ka*sa[2]+Ka*Ka*Ka*sa[3],y:(1-Ka)*(1-Ka)*(1-Ka)*Qa[0]+3*(1-Ka)*(1-Ka)*Ka*Qa[1]+3*(1-Ka)*Ka*Ka*Qa[2]+Ka*Ka*Ka*Qa[3]}}
function I(sa,Qa,Ka){void 0===Ka&&(Ka=1);var Wa=sa[0]-2*sa[1]+sa[2],kb=Qa[0]-2*Qa[1]+Qa[2],Tb=2*sa[1]-2*sa[0],$a=2*Qa[1]-2*Qa[0],Nb=4*(Wa*Wa+kb*kb);if(0===Nb)return Ka*Math.sqrt(Math.pow(sa[2]-sa[0],2)+Math.pow(Qa[2]-Qa[0],2));sa=4*(Wa*Tb+kb*$a)/(2*Nb);Ka+=sa;Tb=(Tb*Tb+$a*$a)/Nb-sa*sa;return Math.sqrt(Nb)/2*(Ka*Math.sqrt(Ka*Ka+Tb)-sa*Math.sqrt(sa*sa+Tb)+Tb*Math.log(Math.abs((Ka+Math.sqrt(Ka*Ka+Tb))/(sa+Math.sqrt(sa*sa+Tb)))))}function S(sa,Qa,Ka){var Wa,kb=Ka.length-1;if(0===kb)return 0;if(0===sa){for(Wa=
sa=0;Wa<=kb;Wa++)sa+=hha[kb][Wa]*Math.pow(1-Qa,kb-Wa)*Math.pow(Qa,Wa)*Ka[Wa];return sa}var Tb=Array(kb);for(Wa=0;Wa<kb;Wa++)Tb[Wa]=kb*(Ka[Wa+1]-Ka[Wa]);return S(sa-1,Qa,Tb)}function V(sa,Qa,Ka){var Wa,kb;void 0===Ka&&(Ka=1);Ka/=2;for(kb=Wa=0;20>kb;kb++){var Tb=Ka*iha[20][kb]+Ka;var $a=jha[20][kb],Nb=Qa,Bb=Tb;Tb=S(1,Bb,sa);Nb=S(1,Bb,Nb);Wa+=$a*Math.sqrt(Tb*Tb+Nb*Nb)}return Ka*Wa}function ba(sa,Qa,Ka,Wa){var kb=sa*Ka+Qa*Wa;return 1<kb&&(kb=1),-1>kb&&(kb=-1),(0>sa*Wa-Qa*Ka?-1:1)*Math.acos(kb)}function ua(sa,
Qa,Ka,Wa,kb,Tb,$a,Nb,Bb,Ac){var Gb=Ac*(sa-Ka)/2+Bb*(Qa-Wa)/2,nd=-Bb*(sa-Ka)/2+Ac*(Qa-Wa)/2,Kd=$a*$a,Ie=Nb*Nb,Je=Gb*Gb,ae=nd*nd,Ke=Kd*Ie-Kd*ae-Ie*Je;0>Ke&&(Ke=0);Ke=Math.sqrt(Ke/(Kd*ae+Ie*Je))*(kb===Tb?-1:1);kb=Ke*$a/Nb*nd;Ke=Ke*-Nb/$a*Gb;sa=Ac*kb-Bb*Ke+(sa+Ka)/2;Qa=Bb*kb+Ac*Ke+(Qa+Wa)/2;Wa=(Gb-kb)/$a;Bb=(nd-Ke)/Nb;$a=(-Gb-kb)/$a;nd=(-nd-Ke)/Nb;Nb=ba(1,0,Wa,Bb);nd=ba(Wa,Bb,$a,nd);return 0===Tb&&0<nd&&(nd-=hB),1===Tb&&0>nd&&(nd+=hB),[sa,Qa,Nb,nd]}function Fa(sa,Qa){var Ka=4/3*Math.tan(Qa/4),Wa=Math.cos(sa),
kb=Math.sin(sa),Tb=Math.cos(sa+Qa);sa=Math.sin(sa+Qa);return[Wa,kb,Wa-kb*Ka,kb+Wa*Ka,Tb+sa*Ka,sa-Tb*Ka,Tb,sa]}function F(sa,Qa,Ka,Wa,kb,Tb,$a,Nb,Bb){var Ac=0,Gb=[],nd=[];kha(sa,Qa,Ka,Wa,kb,Tb,$a,Nb,Bb).forEach(function(Kd){Kd=new zo(Kd[0],Kd[1],Kd[2],Kd[3],Kd[4],Kd[5],Kd[6],Kd[7]);var Ie=Kd.getTotalLength();Ac+=Ie;Gb.push(Ie);nd.push(Kd)});(this||kc).length=Ac;(this||kc).partialLengths=Gb;(this||kc).curves=nd}function Y(sa,Qa,Ka,Wa){(this||kc).x0=sa;(this||kc).x1=Qa;(this||kc).y0=Ka;(this||kc).y1=
Wa}function Q(sa,Qa){return Math.sqrt((sa[0]-Qa[0])*(sa[0]-Qa[0])+(sa[1]-Qa[1])*(sa[1]-Qa[1]))}function W(sa,Qa,Ka){return[sa[0]+(Qa[0]-sa[0])*Ka,sa[1]+(Qa[1]-sa[1])*Ka]}function ka(sa,Qa,Ka){var Wa=sa.map(function(kb,Tb){return ea(kb,Qa[Tb])});return function(kb){var Tb=Wa.map(function($a){return $a(kb)});return Ka?xa(Tb):Tb}}function ea(sa,Qa){return function(Ka){return sa.map(function(Wa,kb){return Wa+Ka*(Qa[kb]-Wa)})}}function la(sa){return"number"==typeof sa&&isFinite(sa)}function db(sa){var Qa;
a:{for(Qa=0;Qa<sa.length-2;Qa++){var Ka=sa[Qa],Wa=sa[Qa+1],kb=sa[Qa+2];if(Ka[0]*(Wa[1]-kb[1])+Wa[0]*(kb[1]-Ka[1])+kb[0]*(Ka[1]-Wa[1])){Qa=!0;break a}}Qa=!1}if(Qa){kb=-1;var Tb=sa.length,$a=0,Nb=0,Bb=sa[Tb-1];for(Qa=0;++kb<Tb;)Ka=Bb,Bb=sa[kb],Qa+=Wa=Ka[0]*Bb[1]-Bb[0]*Ka[1],$a+=(Ka[0]+Bb[0])*Wa,Nb+=(Ka[1]+Bb[1])*Wa;sa=(Qa*=3,[$a/Qa,Nb/Qa])}else sa=[(sa[0][0]+sa[sa.length-1][0])/2,(sa[0][1]+sa[sa.length-1][1])/2];return sa}function ub(sa){return sa.toString().split("M").map(function(Qa,Ka){return Qa=
Qa.trim(),Ka&&Qa?"M"+Qa:Qa}).filter(function(Qa){return Qa})}function xa(sa){return"M"+sa.join("L")+"Z"}function na(sa,Qa){var Ka=sa.length+Qa;Qa=Om(sa)/Qa;for(var Wa=0,kb=0,Tb=Qa/2;sa.length<Ka;){var $a=sa[Wa],Nb=sa[(Wa+1)%sa.length],Bb=Q($a,Nb);Tb<=kb+Bb?(sa.splice(Wa+1,0,Bb?W($a,Nb,(Tb-kb)/Bb):$a.slice(0)),Tb+=Qa):(kb+=Bb,Wa++)}}function Aa(sa,Qa){var Ka;if("string"==typeof sa){sa=(new Ex(sa)).abs();a:{var Wa=sa.segments||[];var kb=[];if(Wa.length&&"M"===Wa[0][0]){for(var Tb=0;Tb<Wa.length;Tb++){var $a=
Wa[Tb],Nb=$a[0],Bb=$a[1];$a=$a[2];if("M"===Nb&&Tb||"Z"===Nb)break;if("M"===Nb||"L"===Nb)kb.push([Bb,$a]);else if("H"===Nb)kb.push([Bb,kb[kb.length-1][1]]);else{if("V"!==Nb){Wa=!1;break a}kb.push([kb[kb.length-1][0],Bb])}}Wa=!!kb.length&&{ring:kb}}else Wa=!1}if(!Wa){kb=ub(sa)[0];sa=[];Wa=3;if(!kb)throw new TypeError(NP);a:{if("undefined"!=typeof window&&window&&window.document)try{var Ac=window.document.createElementNS("http://www.w3.org/2000/svg","path");var Gb=(Ac.setAttributeNS(null,"d",kb),Ac);
break a}catch(nd){}Gb=lha(kb)}Ac=Gb;Gb=Ac.getTotalLength();Qa&&la(Qa)&&0<Qa&&(Wa=Math.max(Wa,Math.ceil(Gb/Qa)));for(kb=0;kb<Wa;kb++)Tb=Ac.getPointAtLength(Gb*kb/Wa),sa.push([Tb.x,Tb.y]);Wa={ring:sa,skipBisect:!0}}Gb=Wa;sa=Gb.ring;Wa=Gb.skipBisect}else if(!Array.isArray(sa))throw new TypeError(NP);if(Ka=sa.slice(0),!Pa(Ka))throw new TypeError(NP);1<Ka.length&&1E-9>Q(Ka[0],Ka[Ka.length-1])&&Ka.pop();0<En(Ka)&&Ka.reverse();if(!Wa&&Qa&&la(Qa)&&0<Qa)for(void 0===Qa&&(Qa=1/0),Gb=0;Gb<Ka.length;Gb++)for(Ac=
Ka[Gb],sa=Gb===Ka.length-1?Ka[0]:Ka[Gb+1];Q(Ac,sa)>Qa;)sa=W(Ac,sa,.5),Ka.splice(Gb+1,0,sa);return Ka}function Pa(sa){return sa.every(function(Qa){return Array.isArray(Qa)&&2<=Qa.length&&la(Qa[0])&&la(Qa[1])})}function Da(sa,Qa,Ka){var Wa;return Wa=sa.length-Qa.length,na(sa,0>Wa?-1*Wa:0),na(Qa,0<Wa?Wa:0),mha(sa,Qa),ka(sa,Qa,Ka)}function M(sa,Qa,Ka){Ka=Ka||2;var Wa=Qa&&Qa.length,kb=Wa?Qa[0]*Ka:sa.length,Tb=U(sa,0,kb,Ka,!0),$a=[];if(!Tb)return $a;var Nb;if(Wa){var Bb=Ka,Ac;var Gb=[];Wa=0;for(Ac=Qa.length;Wa<
Ac;Wa++){var nd=Qa[Wa]*Bb;var Kd=Wa<Ac-1?Qa[Wa+1]*Bb:sa.length;nd=U(sa,nd,Kd,Bb,!1);nd===nd.next&&(nd.steiner=!0);Gb.push(ca(nd))}Gb.sort(ma);for(Wa=0;Wa<Gb.length;Wa++){Qa=Gb[Wa];Bb=Tb;if(Bb=La(Qa,Bb))Qa=nc(Bb,Qa),aa(Qa,Qa.next);Tb=aa(Tb,Tb.next)}}if(sa.length>80*Ka){var Ie=Nb=sa[0];var Je=Wa=sa[1];for(Bb=Ka;Bb<kb;Bb+=Ka)Gb=sa[Bb],Qa=sa[Bb+1],Gb<Ie&&(Ie=Gb),Qa<Je&&(Je=Qa),Gb>Nb&&(Nb=Gb),Qa>Wa&&(Wa=Qa);Nb=Math.max(Nb-Ie,Wa-Je)}return pa(Tb,$a,Ka,Ie,Je,Nb),$a}function U(sa,Qa,Ka,Wa,kb){if(kb===0<xe(sa,
Qa,Ka,Wa))for(kb=Qa;kb<Ka;kb+=Wa)var Tb=ac(kb,sa[kb],sa[kb+1],Tb);else for(kb=Ka-Wa;kb>=Qa;kb-=Wa)Tb=ac(kb,sa[kb],sa[kb+1],Tb);return Tb&&Va(Tb,Tb.next)&&(qd(Tb),Tb=Tb.next),Tb}function aa(sa,Qa){if(!sa)return sa;Qa||(Qa=sa);var Ka=sa;do if(sa=!1,Ka.steiner||!Va(Ka,Ka.next)&&0!==ra(Ka.prev,Ka,Ka.next))Ka=Ka.next;else{if(qd(Ka),(Ka=Qa=Ka.prev)===Ka.next)return null;sa=!0}while(sa||Ka!==Qa);return Qa}function pa(sa,Qa,Ka,Wa,kb,Tb,$a){if(sa){if(!$a&&Tb){var Nb=sa,Bb=Nb;do null===Bb.z&&(Bb.z=ib(Bb.x,
Bb.y,Wa,kb,Tb)),Bb.prevZ=Bb.prev,Bb=Bb.nextZ=Bb.next;while(Bb!==Nb);Bb.prevZ.nextZ=null;Bb.prevZ=null;Nb=Bb;var Ac,Gb,nd,Kd,Ie=1;do{Bb=Nb;var Je=Nb=null;for(nd=0;Bb;){nd++;var ae=Bb;for(Ac=Kd=0;Ac<Ie&&(Kd++,ae=ae.nextZ);Ac++);for(Ac=Ie;0<Kd||0<Ac&&ae;)0===Kd?(Gb=ae,ae=ae.nextZ,Ac--):0!==Ac&&ae?Bb.z<=ae.z?(Gb=Bb,Bb=Bb.nextZ,Kd--):(Gb=ae,ae=ae.nextZ,Ac--):(Gb=Bb,Bb=Bb.nextZ,Kd--),Je?Je.nextZ=Gb:Nb=Gb,Gb.prevZ=Je,Je=Gb;Bb=ae}Je.nextZ=null;Ie*=2}while(1<nd)}for(Bb=sa;sa.prev!==sa.next;){Gb=sa.prev;Nb=
sa.next;if(Tb)a:{ae=sa;Ac=Wa;var Ke=kb,om=Tb;Je=ae.prev;nd=ae;Kd=ae.next;if(0<=ra(Je,nd,Kd))ae=!1;else{var nha=Je.x>nd.x?Je.x>Kd.x?Je.x:Kd.x:nd.x>Kd.x?nd.x:Kd.x,oha=Je.y>nd.y?Je.y>Kd.y?Je.y:Kd.y:nd.y>Kd.y?nd.y:Kd.y;Ie=ib(Je.x<nd.x?Je.x<Kd.x?Je.x:Kd.x:nd.x<Kd.x?nd.x:Kd.x,Je.y<nd.y?Je.y<Kd.y?Je.y:Kd.y:nd.y<Kd.y?nd.y:Kd.y,Ac,Ke,om);Ac=ib(nha,oha,Ac,Ke,om);for(Ke=ae.nextZ;Ke&&Ke.z<=Ac;){if(Ke!==ae.prev&&Ke!==ae.next&&qa(Je.x,Je.y,nd.x,nd.y,Kd.x,Kd.y,Ke.x,Ke.y)&&0<=ra(Ke.prev,Ke,Ke.next)){ae=!1;break a}Ke=
Ke.nextZ}for(Ke=ae.prevZ;Ke&&Ke.z>=Ie;){if(Ke!==ae.prev&&Ke!==ae.next&&qa(Je.x,Je.y,nd.x,nd.y,Kd.x,Kd.y,Ke.x,Ke.y)&&0<=ra(Ke.prev,Ke,Ke.next)){ae=!1;break a}Ke=Ke.prevZ}ae=!0}}else a:if(ae=sa,Je=ae.prev,nd=ae,Kd=ae.next,0<=ra(Je,nd,Kd))ae=!1;else{for(Ie=ae.next.next;Ie!==ae.prev;){if(qa(Je.x,Je.y,nd.x,nd.y,Kd.x,Kd.y,Ie.x,Ie.y)&&0<=ra(Ie.prev,Ie,Ie.next)){ae=!1;break a}Ie=Ie.next}ae=!0}if(ae)Qa.push(Gb.i/Ka),Qa.push(sa.i/Ka),Qa.push(Nb.i/Ka),qd(sa),Bb=sa=Nb.next;else if((sa=Nb)===Bb){if($a)if(1===
$a){$a=Qa;Gb=Ka;Nb=sa;do Bb=Nb.prev,ae=Nb.next.next,!Va(Bb,ae)&&nb(Bb,Nb,Nb.next,ae)&&wc(Bb,ae)&&wc(ae,Bb)&&($a.push(Bb.i/Gb),$a.push(Nb.i/Gb),$a.push(ae.i/Gb),qd(Nb),qd(Nb.next),Nb=sa=ae),Nb=Nb.next;while(Nb!==sa);sa=Nb;pa(sa,Qa,Ka,Wa,kb,Tb,2)}else{if(2===$a)a:{$a=sa;do{for(Gb=$a.next.next;Gb!==$a.prev;){if(Nb=$a.i!==Gb.i){Nb=$a;Bb=Gb;if(ae=Nb.next.i!==Bb.i&&Nb.prev.i!==Bb.i){b:{ae=Nb;do{if(ae.i!==Nb.i&&ae.next.i!==Nb.i&&ae.i!==Bb.i&&ae.next.i!==Bb.i&&nb(ae,ae.next,Nb,Bb)){ae=!0;break b}ae=ae.next}while(ae!==
Nb);ae=!1}ae=!ae}if(ae=ae&&wc(Nb,Bb)&&wc(Bb,Nb)){ae=Nb;Je=!1;nd=(Nb.x+Bb.x)/2;Bb=(Nb.y+Bb.y)/2;do ae.y>Bb!=ae.next.y>Bb&&nd<(ae.next.x-ae.x)*(Bb-ae.y)/(ae.next.y-ae.y)+ae.x&&(Je=!Je),ae=ae.next;while(ae!==Nb);ae=Je}Nb=ae}if(Nb){sa=nc($a,Gb);$a=aa($a,$a.next);sa=aa(sa,sa.next);pa($a,Qa,Ka,Wa,kb,Tb);pa(sa,Qa,Ka,Wa,kb,Tb);break a}Gb=Gb.next}$a=$a.next}while($a!==sa)}}else pa(aa(sa),Qa,Ka,Wa,kb,Tb,1);break}}}}function ma(sa,Qa){return sa.x-Qa.x}function La(sa,Qa){var Ka=Qa,Wa=sa.x,kb=sa.y,Tb=-1/0;do{if(kb<=
Ka.y&&kb>=Ka.next.y){var $a=Ka.x+(kb-Ka.y)*(Ka.next.x-Ka.x)/(Ka.next.y-Ka.y);if($a<=Wa&&$a>Tb){if(Tb=$a,$a===Wa){if(kb===Ka.y)return Ka;if(kb===Ka.next.y)return Ka.next}var Nb=Ka.x<Ka.next.x?Ka:Ka.next}}Ka=Ka.next}while(Ka!==Qa);if(!Nb)return null;if(Wa===Tb)return Nb.prev;var Bb;Qa=Nb;$a=Nb.x;var Ac=Nb.y,Gb=1/0;for(Ka=Nb.next;Ka!==Qa;)Wa>=Ka.x&&Ka.x>=$a&&qa(kb<Ac?Wa:Tb,kb,$a,Ac,kb<Ac?Tb:Wa,kb,Ka.x,Ka.y)&&((Bb=Math.abs(kb-Ka.y)/(Wa-Ka.x))<Gb||Bb===Gb&&Ka.x>Nb.x)&&wc(Ka,sa)&&(Nb=Ka,Gb=Bb),Ka=Ka.next;
return Nb}function ib(sa,Qa,Ka,Wa,kb){return sa=32767*(sa-Ka)/kb,Qa=32767*(Qa-Wa)/kb,sa=16711935&(sa|sa<<8),sa=252645135&(sa|sa<<4),sa=858993459&(sa|sa<<2),sa=1431655765&(sa|sa<<1),Qa=16711935&(Qa|Qa<<8),Qa=252645135&(Qa|Qa<<4),Qa=858993459&(Qa|Qa<<2),Qa=1431655765&(Qa|Qa<<1),sa|Qa<<1}function ca(sa){var Qa=sa,Ka=sa;do Qa.x<Ka.x&&(Ka=Qa),Qa=Qa.next;while(Qa!==sa);return Ka}function qa(sa,Qa,Ka,Wa,kb,Tb,$a,Nb){return 0<=(kb-$a)*(Qa-Nb)-(sa-$a)*(Tb-Nb)&&0<=(sa-$a)*(Wa-Nb)-(Ka-$a)*(Qa-Nb)&&0<=(Ka-$a)*
(Tb-Nb)-(kb-$a)*(Wa-Nb)}function ra(sa,Qa,Ka){return(Qa.y-sa.y)*(Ka.x-Qa.x)-(Qa.x-sa.x)*(Ka.y-Qa.y)}function Va(sa,Qa){return sa.x===Qa.x&&sa.y===Qa.y}function nb(sa,Qa,Ka,Wa){return!!(Va(sa,Qa)&&Va(Ka,Wa)||Va(sa,Wa)&&Va(Ka,Qa))||0<ra(sa,Qa,Ka)!=0<ra(sa,Qa,Wa)&&0<ra(Ka,Wa,sa)!=0<ra(Ka,Wa,Qa)}function wc(sa,Qa){return 0>ra(sa.prev,sa,sa.next)?0<=ra(sa,Qa,sa.next)&&0<=ra(sa,sa.prev,Qa):0>ra(sa,Qa,sa.prev)||0>ra(sa,sa.next,Qa)}function nc(sa,Qa){var Ka=new id(sa.i,sa.x,sa.y),Wa=new id(Qa.i,Qa.x,Qa.y),
kb=sa.next,Tb=Qa.prev;return sa.next=Qa,Qa.prev=sa,Ka.next=kb,kb.prev=Ka,Wa.next=Ka,Ka.prev=Wa,Tb.next=Wa,Wa.prev=Tb,Wa}function ac(sa,Qa,Ka,Wa){sa=new id(sa,Qa,Ka);return Wa?(sa.next=Wa.next,sa.prev=Wa,Wa.next.prev=sa,Wa.next=sa):(sa.prev=sa,sa.next=sa),sa}function qd(sa){sa.next.prev=sa.prev;sa.prev.next=sa.next;sa.prevZ&&(sa.prevZ.nextZ=sa.nextZ);sa.nextZ&&(sa.nextZ.prevZ=sa.prevZ)}function id(sa,Qa,Ka){(this||kc).i=sa;(this||kc).x=Qa;(this||kc).y=Ka;(this||kc).prev=null;(this||kc).next=null;(this||
kc).z=null;(this||kc).prevZ=null;(this||kc).nextZ=null;(this||kc).steiner=!1}function xe(sa,Qa,Ka,Wa){for(var kb=0,Tb=Ka-Wa;Qa<Ka;Qa+=Wa)kb+=(sa[Tb]-sa[Qa])*(sa[Qa+1]+sa[Tb+1]),Tb=Qa;return kb}function Ae(sa,Qa){var Ka=Qa.id,Wa=Qa.bbox,kb=null==Qa.properties?{}:Qa.properties;sa=hf(sa,Qa);return null==Ka&&null==Wa?{type:"Feature",properties:kb,geometry:sa}:null==Wa?{type:"Feature",id:Ka,properties:kb,geometry:sa}:{type:"Feature",id:Ka,bbox:Wa,properties:kb,geometry:sa}}function hf(sa,Qa){function Ka(Ac){return Nb(Ac)}
function Wa(Ac){for(var Gb=[],nd=0,Kd=Ac.length;nd<Kd;++nd){var Ie=Ac[nd],Je=Gb;Je.length&&Je.pop();for(var ae=Bb[0>Ie?~Ie:Ie],Ke=0,om=ae.length;Ke<om;++Ke)Je.push(Nb(ae[Ke],Ke));if(0>Ie)for(Ie=Je,Je=Ie.length,ae=Je-om;ae<--Je;)om=Ie[ae],Ie[ae++]=Ie[Je],Ie[Je]=om}return 2>Gb.length&&Gb.push(Gb[0]),Gb}function kb(Ac){for(Ac=Wa(Ac);4>Ac.length;)Ac.push(Ac[0]);return Ac}function Tb(Ac){return Ac.map(kb)}function $a(Ac){var Gb=Ac.type;switch(Gb){case "GeometryCollection":return{type:Gb,geometries:Ac.geometries.map($a)};
case "Point":Ac=Nb(Ac.coordinates);break;case "MultiPoint":Ac=Ac.coordinates.map(Ka);break;case "LineString":Ac=Wa(Ac.arcs);break;case "MultiLineString":Ac=Ac.arcs.map(Wa);break;case "Polygon":Ac=Tb(Ac.arcs);break;case "MultiPolygon":Ac=Ac.arcs.map(Tb);break;default:return null}return{type:Gb,coordinates:Ac}}var Nb=pha(sa.transform),Bb=sa.arcs;return $a(Qa)}function fg(sa,Qa){function Ka(Bb){switch(Bb.type){case "GeometryCollection":Bb.geometries.forEach(Ka);break;case "Polygon":Wa(Bb.arcs);break;
case "MultiPolygon":Bb.arcs.forEach(Wa)}}function Wa(Bb){Bb.forEach(function(Ac){Ac.forEach(function(Gb){(Tb[Gb=0>Gb?~Gb:Gb]||(Tb[Gb]=[])).push(Bb)})});$a.push(Bb)}function kb(Bb){Bb=hf(sa,{type:"Polygon",arcs:[Bb]}).coordinates[0];for(var Ac,Gb=-1,nd=Bb.length,Kd=Bb[nd-1],Ie=0;++Gb<nd;)Ac=Kd,Kd=Bb[Gb],Ie+=Ac[0]*Kd[1]-Ac[1]*Kd[0];return Math.abs(Ie)}var Tb={},$a=[],Nb=[];return Qa.forEach(Ka),$a.forEach(function(Bb){if(!Bb._){var Ac=[],Gb=[Bb];Bb._=1;for(Nb.push(Ac);Bb=Gb.pop();)Ac.push(Bb),Bb.forEach(function(nd){nd.forEach(function(Kd){Tb[0>
Kd?~Kd:Kd].forEach(function(Ie){Ie._||(Ie._=1,Gb.push(Ie))})})})}}),$a.forEach(function(Bb){delete Bb._}),{type:"MultiPolygon",arcs:Nb.map(function(Bb){var Ac=[];if(Bb.forEach(function(Je){Je.forEach(function(ae){ae.forEach(function(Ke){2>Tb[0>Ke?~Ke:Ke].length&&Ac.push(Ke)})})}),Ac=qha(sa,Ac),1<(Bb=Ac.length))for(var Gb,nd,Kd=1,Ie=kb(Ac[0]);Kd<Bb;++Kd)(Gb=kb(Ac[Kd]))>Ie&&(nd=Ac[0],Ac[0]=Ac[Kd],Ac[Kd]=nd,Ie=Gb);return Ac})}}function Mg(sa){return function(Qa,Ka){return M2(sa(Qa),Ka)}}function pg(sa,
Qa){var Ka={},Wa={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return sa.forEach(function(kb){var Tb=[];kb.forEach(function($a,Nb){Nb=$a[0]<$a[1]?$a.join(","):$a[1]+","+$a[0];$a=$a.map(function(Bb){return Qa[Bb]});Nb in Ka?Tb.push(~Ka[Nb]):(Tb.push(Ka[Nb]=Wa.arcs.length),Wa.arcs.push($a))});Wa.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(En(kb.map(function($a){return Qa[$a[0]]}))),arcs:[Tb]})}),Wa.objects.triangles.geometries.sort(function(kb,
Tb){return kb.area-Tb.area}),Wa}function vh(sa,Qa){for(var Ka=sa.objects.triangles.geometries,Wa=N2(function(kb){return kb.area}).left;Ka.length>Qa;)!function(){var kb=Ka[0],Tb=rha(Ka)[0][0],$a=Ka[Tb],Nb=fg(sa,[kb,$a]);Nb.area=kb.area+$a.area;Nb.type="Polygon";Nb.arcs=Nb.arcs[0];Ka.splice(Tb,1);Ka.shift();Ka.splice(Wa(Ka,Nb.area),0,Nb)}();if(Qa>Ka.length)throw new RangeError("Can't collapse topology into "+Qa+" pieces.");return sha(sa,sa.objects.triangles).features.map(function(kb){return kb.geometry.coordinates[0].pop(),
kb.geometry.coordinates[0]})}function xg(sa){sa=tha(sa.reduce(function(kb,Tb){return kb.concat([Tb[0]],[Tb[1]])},[]));for(var Qa=[],Ka=0,Wa=sa.length;Ka<Wa;Ka+=3)Qa.push([[sa[Ka],sa[Ka+1]],[sa[Ka+1],sa[Ka+2]],[sa[Ka+2],sa[Ka]]]);return Qa}function Ff(sa,Qa,Ka){function Wa($a,Nb,Bb){void 0===Nb&&(Nb=[]);void 0===Bb&&(Bb=0);for(var Ac=0;Ac<$a.length;Ac++){var Gb=$a.splice(Ac,1),nd=Ka[Gb[0]][Nb.length];Bb+nd<kb&&($a.length?Wa($a.slice(),Nb.concat(Gb),Bb+nd):(kb=Bb+nd,Tb=Nb.concat(Gb)));$a.length&&$a.splice(Ac,
0,Gb[0])}}var kb=1/0,Tb=sa.map(function($a,Nb){return Nb});return Wa(Tb),Tb}function gg(sa,Qa,Ka){void 0===Ka&&(Ka={});var Wa=Ka.maxSegmentLength;void 0===Wa&&(Wa=10);var kb=Ka.string;void 0===kb&&(kb=!0);Ka=Ka.single;void 0===Ka&&(Ka=!1);var Tb=Aa(sa,Wa);Tb.length<Qa.length+2&&na(Tb,Qa.length+2-Tb.length);var $a;Tb=uha(Tb,Qa.length);var Nb=Qa.map(function(Bb){return Aa(Bb,Wa)});sa="string"==typeof sa&&sa;return Ka&&!Qa.every(function(Bb){return"string"==typeof Bb})||($a=Qa.slice(0)),yg(Tb,Nb,{match:!0,
string:kb,single:Ka,t0:sa,t1:$a})}function yg(sa,Qa,Ka){void 0===Ka&&(Ka={});var Wa=Ka.string,kb=Ka.single,Tb=Ka.t0,$a=Ka.t1,Nb=(Ka=Ka.match)?vha(sa,Qa):sa.map(function(Gb,nd){return nd}),Bb=Nb.map(function(Gb,nd){return Da(sa[Gb],Qa[nd],Wa)});if(Ka&&Array.isArray(Tb)&&(Tb=Nb.map(function(Gb){return Tb[Gb]})),kb&&Wa&&(Array.isArray(Tb)&&(Tb=Tb.join(" ")),Array.isArray($a)&&($a=$a.join(" "))),kb){var Ac=Wa?function(Gb){return Bb.map(function(nd){return nd(Gb)}).join(" ")}:function(Gb){return Bb.map(function(nd){return nd(Gb)})};
return Wa&&(Tb||$a)?function(Gb){return 1E-4>Gb&&Tb||1E-4>1-Gb&&$a||Ac(Gb)}:Ac}return Wa?(Tb=Array.isArray(Tb)?Tb.map(function(Gb){return"string"==typeof Gb&&Gb}):[],$a=Array.isArray($a)?$a.map(function(Gb){return"string"==typeof Gb&&Gb}):[],Bb.map(function(Gb,nd){return Tb[nd]||$a[nd]?function(Kd){return 1E-4>Kd&&Tb[nd]||1E-4>1-Kd&&$a[nd]||Gb(Kd)}:Gb})):Bb}function rh(sa,Qa,Ka,Wa,kb){var Tb=Vc(sa,Qa,Ka),$a=sa-Ka+","+Qa,Nb="A"+Ka+","+Ka+",0,1,1,";return Pl(Tb,Wa,"M"+$a+Nb+(sa+Ka+","+Qa)+Nb+$a+"Z",
2*Math.PI*Ka,kb)}function Lh(sa,Qa,Ka,Wa,kb,Tb){var $a=Yc(sa,Qa,Ka,Wa),Nb=sa+Ka,Bb=Qa+Wa;return Pl($a,kb,"M"+sa+","+Qa+"L"+Nb+","+Qa+"L"+Nb+","+Bb+"L"+sa+","+Bb+"Z",2*Ka+2*Wa,Tb)}function Pl(sa,Qa,Ka,Wa,kb){void 0===kb&&(kb={});var Tb=kb.maxSegmentLength;void 0===Tb&&(Tb=10);kb=kb.string;void 0===kb&&(kb=!0);var $a,Nb;Qa=Aa(Qa,Tb);return la(Wa)&&Qa.length<Wa/Tb&&na(Qa,Math.ceil(Wa/Tb-Qa.length)),$a=sa(Qa),Nb=ka($a,Qa,kb),kb?function(Bb){return 1E-4>Bb?Ka:Nb(Bb)}:Nb}function Vc(sa,Qa,Ka){return function(Wa){var kb=
db(Wa),Tb=Om(Wa.concat([Wa[0]])),$a=Math.atan2(Wa[0][1]-kb[1],Wa[0][0]-kb[0]),Nb=0;return Wa.map(function(Bb,Ac){var Gb;return Ac&&(Nb+=Q(Bb,Wa[Ac-1])),Gb=$a+2*Math.PI*(Tb?Nb/Tb:Ac/Wa.length),[Math.cos(Gb)*Ka+sa,Math.sin(Gb)*Ka+Qa]})}}function Yc(sa,Qa,Ka,Wa){return function(kb){var Tb=db(kb),$a=Om(kb.concat([kb[0]]));Tb=Math.atan2(kb[0][1]-Tb[1],kb[0][0]-Tb[0]);var Nb=0;0>Tb&&(Tb=2*Math.PI+Tb);var Bb=Tb/(2*Math.PI);return kb.map(function(Ac,Gb){Gb&&(Nb+=Q(Ac,kb[Gb-1]));Ac=(Bb+($a?Nb/$a:Gb/kb.length))%
1;Ac=.125>=Ac?[1,.5+4*Ac]:.375>=Ac?[1.5-4*Ac,1]:.625>=Ac?[0,2.5-4*Ac]:.875>=Ac?[4*Ac-2.5,0]:[1,4*Ac-3.5];return[sa+Ac[0]*Ka,Qa+Ac[1]*Wa]})}}var En=function(sa){for(var Qa,Ka=-1,Wa=sa.length,kb=sa[Wa-1],Tb=0;++Ka<Wa;)Qa=kb,kb=sa[Ka],Tb+=Qa[1]*kb[0]-Qa[0]*kb[1];return Tb/2},Om=function(sa){var Qa=-1,Ka=sa.length,Wa=sa[Ka-1],kb=Wa[0];Wa=Wa[1];for(var Tb=0;++Qa<Ka;){var $a=kb;var Nb=Wa;Wa=sa[Qa];kb=Wa[0];Wa=Wa[1];$a-=kb;Nb-=Wa;Tb+=Math.sqrt($a*$a+Nb*Nb)}return Tb},nm={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},ls=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];b.prototype.matrix=function(sa){return 1===sa[0]&&0===sa[1]&&0===sa[2]&&1===sa[3]&&0===sa[4]&&0===sa[5]?this||kc:((this||kc).cache=null,(this||kc).queue.push(sa),this||kc)};b.prototype.translate=function(sa,Qa){return 0===sa&&0===Qa||((this||kc).cache=null,(this||kc).queue.push([1,0,0,1,sa,Qa])),this||kc};b.prototype.scale=function(sa,Qa){return 1===sa&&1===Qa||((this||kc).cache=null,(this||kc).queue.push([sa,
0,0,Qa,0,0])),this||kc};b.prototype.rotate=function(sa,Qa,Ka){var Wa,kb,Tb;return 0!==sa&&(this.translate(Qa,Ka),Wa=sa*Math.PI/180,kb=Math.cos(Wa),Tb=Math.sin(Wa),(this||kc).queue.push([kb,Tb,-Tb,kb,0,0]),(this||kc).cache=null,this.translate(-Qa,-Ka)),this||kc};b.prototype.skewX=function(sa){return 0!==sa&&((this||kc).cache=null,(this||kc).queue.push([1,0,Math.tan(sa*Math.PI/180),1,0,0])),this||kc};b.prototype.skewY=function(sa){return 0!==sa&&((this||kc).cache=null,(this||kc).queue.push([1,Math.tan(sa*
Math.PI/180),0,1,0,0])),this||kc};b.prototype.toArray=function(){var sa=this||kc;if((this||kc).cache)return(this||kc).cache;if(!(this||kc).queue.length)return(this||kc).cache=[1,0,0,1,0,0],(this||kc).cache;if((this||kc).cache=(this||kc).queue[0],1===(this||kc).queue.length)return(this||kc).cache;for(var Qa=1;Qa<(this||kc).queue.length;Qa++){var Ka=sa.cache,Wa=sa.queue[Qa];sa.cache=[Ka[0]*Wa[0]+Ka[2]*Wa[1],Ka[1]*Wa[0]+Ka[3]*Wa[1],Ka[0]*Wa[2]+Ka[2]*Wa[3],Ka[1]*Wa[2]+Ka[3]*Wa[3],Ka[0]*Wa[4]+Ka[2]*Wa[5]+
Ka[4],Ka[1]*Wa[4]+Ka[3]*Wa[5]+Ka[5]]}return(this||kc).cache};b.prototype.calc=function(sa,Qa,Ka){var Wa;return(this||kc).queue.length?((this||kc).cache||((this||kc).cache=this.toArray()),Wa=(this||kc).cache,[sa*Wa[0]+Qa*Wa[2]+(Ka?0:Wa[4]),sa*Wa[1]+Qa*Wa[3]+(Ka?0:Wa[5])]):[sa,Qa]};var jj={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},ms=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,ns=/[\s,]+/,os=function(sa){var Qa,Ka,Wa=new b;return sa.split(ms).forEach(function(kb){if(kb.length){if(void 0!==
jj[kb])return void(Qa=kb);switch(Ka=kb.split(ns).map(function(Tb){return+Tb||0}),Qa){case "matrix":return void(6===Ka.length&&Wa.matrix(Ka));case "scale":return void(1===Ka.length?Wa.scale(Ka[0],Ka[0]):2===Ka.length&&Wa.scale(Ka[0],Ka[1]));case "rotate":return void(1===Ka.length?Wa.rotate(Ka[0],0,0):3===Ka.length&&Wa.rotate(Ka[0],Ka[1],Ka[2]));case "translate":return void(1===Ka.length?Wa.translate(Ka[0],0):2===Ka.length&&Wa.translate(Ka[0],Ka[1]));case "skewX":return void(1===Ka.length&&Wa.skewX(Ka[0]));
case "skewY":return void(1===Ka.length&&Wa.skewY(Ka[0]))}}}),Wa},Lq=2*Math.PI,Fx=function(sa,Qa,Ka,Wa,kb,Tb,$a,Nb,Bb){var Ac=Math.sin(Bb*Lq/360),Gb=Math.cos(Bb*Lq/360);Bb=Gb*(sa-Ka)/2+Ac*(Qa-Wa)/2;var nd=-Ac*(sa-Ka)/2+Gb*(Qa-Wa)/2;if(0===Bb&&0===nd||0===$a||0===Nb)return[];$a=Math.abs($a);Nb=Math.abs(Nb);Bb=Bb*Bb/($a*$a)+nd*nd/(Nb*Nb);1<Bb&&($a*=Math.sqrt(Bb),Nb*=Math.sqrt(Bb));var Kd=l(sa,Qa,Ka,Wa,kb,Tb,$a,Nb,Ac,Gb);sa=[];Qa=Kd[2];Ka=Kd[3];Wa=Math.max(Math.ceil(Math.abs(Ka)/(Lq/4)),1);Ka/=Wa;for(kb=
0;kb<Wa;kb++)sa.push(p(Qa,Ka)),Qa+=Ka;return sa.map(function(Ie){for(var Je=0;Je<Ie.length;Je+=2){var ae=Ie[Je+0],Ke=Ie[Je+1];ae*=$a;Ke*=Nb;var om=Ac*ae+Gb*Ke;Ie[Je+0]=Gb*ae-Ac*Ke+Kd[0];Ie[Je+1]=om+Kd[1]}return Ie})},iB=Math.PI/180;q.prototype.transform=function(sa){var Qa=Math.cos((this||kc).ax*iB),Ka=Math.sin((this||kc).ax*iB),Wa=[(this||kc).rx*(sa[0]*Qa+sa[2]*Ka),(this||kc).rx*(sa[1]*Qa+sa[3]*Ka),(this||kc).ry*(-sa[0]*Ka+sa[2]*Qa),(this||kc).ry*(-sa[1]*Ka+sa[3]*Qa)];sa=Wa[0]*Wa[0]+Wa[2]*Wa[2];
Qa=Wa[1]*Wa[1]+Wa[3]*Wa[3];Ka=((Wa[0]-Wa[3])*(Wa[0]-Wa[3])+(Wa[2]+Wa[1])*(Wa[2]+Wa[1]))*((Wa[0]+Wa[3])*(Wa[0]+Wa[3])+(Wa[2]-Wa[1])*(Wa[2]-Wa[1]));var kb=(sa+Qa)/2;if(Ka<1E-10*kb)return(this||kc).rx=(this||kc).ry=Math.sqrt(kb),(this||kc).ax=0,this||kc;Wa=Wa[0]*Wa[1]+Wa[2]*Wa[3];Ka=Math.sqrt(Ka);var Tb=kb+Ka/2;Ka=kb-Ka/2;return(this||kc).ax=1E-10>Math.abs(Wa)&&1E-10>Math.abs(Tb-Qa)?90:180*Math.atan(Math.abs(Wa)>Math.abs(Tb-Qa)?(Tb-sa)/Wa:Wa/(Tb-Qa))/Math.PI,0<=(this||kc).ax?((this||kc).rx=Math.sqrt(Tb),
(this||kc).ry=Math.sqrt(Ka)):((this||kc).ax+=90,(this||kc).rx=Math.sqrt(Ka),(this||kc).ry=Math.sqrt(Tb)),this||kc};q.prototype.isDegenerate=function(){return(this||kc).rx<1E-10*(this||kc).ry||(this||kc).ry<1E-10*(this||kc).rx};u.prototype.__matrix=function(sa){var Qa,Ka=this||kc;sa.queue.length&&this.iterate(function(Wa,kb,Tb,$a){switch(Wa[0]){case "v":var Nb=sa.calc(0,Wa[1],!0);Tb=0===Nb[0]?["v",Nb[1]]:["l",Nb[0],Nb[1]];break;case "V":Nb=sa.calc(Tb,Wa[1],!1);Tb=Nb[0]===sa.calc(Tb,$a,!1)[0]?["V",
Nb[1]]:["L",Nb[0],Nb[1]];break;case "h":Nb=sa.calc(Wa[1],0,!0);Tb=0===Nb[1]?["h",Nb[0]]:["l",Nb[0],Nb[1]];break;case "H":Nb=sa.calc(Wa[1],$a,!1);Tb=Nb[1]===sa.calc(Tb,$a,!1)[1]?["H",Nb[0]]:["L",Nb[0],Nb[1]];break;case "a":case "A":Nb=sa.toArray();var Bb=q(Wa[1],Wa[2],Wa[3]).transform(Nb);if(0>Nb[0]*Nb[3]-Nb[1]*Nb[2]&&(Wa[5]=Wa[5]?"0":"1"),Nb=sa.calc(Wa[6],Wa[7],"a"===Wa[0]),"A"===Wa[0]&&Wa[6]===Tb&&Wa[7]===$a||"a"===Wa[0]&&0===Wa[6]&&0===Wa[7]){Tb=["a"===Wa[0]?"l":"L",Nb[0],Nb[1]];break}Tb=Bb.isDegenerate()?
["a"===Wa[0]?"l":"L",Nb[0],Nb[1]]:[Wa[0],Bb.rx,Bb.ry,Bb.ax,Wa[4],Wa[5],Nb[0],Nb[1]];break;case "m":Nb=sa.calc(Wa[1],Wa[2],0<kb);Tb=["m",Nb[0],Nb[1]];break;default:for(Nb=Wa[0],Tb=[Nb],$a=Nb.toLowerCase()===Nb,Qa=1;Qa<Wa.length;Qa+=2)Nb=sa.calc(Wa[Qa],Wa[Qa+1],$a),Tb.push(Nb[0],Nb[1])}Ka.segments[kb]=Tb},!0)};u.prototype.__evaluateStack=function(){var sa,Qa=this||kc;if((this||kc).__stack.length){if(1===(this||kc).__stack.length)return this.__matrix((this||kc).__stack[0]),void((this||kc).__stack=[]);
var Ka=b();for(sa=(this||kc).__stack.length;0<=--sa;)Ka.matrix(Qa.__stack[sa].toArray());this.__matrix(Ka);(this||kc).__stack=[]}};u.prototype.toString=function(){var sa=this||kc,Qa=[];this.__evaluateStack();for(var Ka=0;Ka<(this||kc).segments.length;Ka++){var Wa=sa.segments[Ka][0];Wa=0<Ka&&"m"!==Wa&&"M"!==Wa&&Wa===sa.segments[Ka-1][0];Qa=Qa.concat(Wa?sa.segments[Ka].slice(1):sa.segments[Ka])}return Qa.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};u.prototype.translate=
function(sa,Qa){return(this||kc).__stack.push(b().translate(sa,Qa||0)),this||kc};u.prototype.scale=function(sa,Qa){return(this||kc).__stack.push(b().scale(sa,Qa||0===Qa?Qa:sa)),this||kc};u.prototype.rotate=function(sa,Qa,Ka){return(this||kc).__stack.push(b().rotate(sa,Qa||0,Ka||0)),this||kc};u.prototype.skewX=function(sa){return(this||kc).__stack.push(b().skewX(sa)),this||kc};u.prototype.skewY=function(sa){return(this||kc).__stack.push(b().skewY(sa)),this||kc};u.prototype.matrix=function(sa){return(this||
kc).__stack.push(b().matrix(sa)),this||kc};u.prototype.transform=function(sa){return sa.trim()?((this||kc).__stack.push(os(sa)),this||kc):this||kc};u.prototype.round=function(sa){var Qa,Ka=0,Wa=0,kb=0,Tb=0;return sa=sa||0,this.__evaluateStack(),(this||kc).segments.forEach(function($a){var Nb=$a[0].toLowerCase()===$a[0];switch($a[0]){case "H":case "h":return Nb&&($a[1]+=kb),kb=$a[1]-$a[1].toFixed(sa),void($a[1]=+$a[1].toFixed(sa));case "V":case "v":return Nb&&($a[1]+=Tb),Tb=$a[1]-$a[1].toFixed(sa),
void($a[1]=+$a[1].toFixed(sa));case "Z":case "z":return kb=Ka,void(Tb=Wa);case "M":case "m":return Nb&&($a[1]+=kb,$a[2]+=Tb),kb=$a[1]-$a[1].toFixed(sa),Tb=$a[2]-$a[2].toFixed(sa),Ka=kb,Wa=Tb,$a[1]=+$a[1].toFixed(sa),void($a[2]=+$a[2].toFixed(sa));case "A":case "a":return Nb&&($a[6]+=kb,$a[7]+=Tb),kb=$a[6]-$a[6].toFixed(sa),Tb=$a[7]-$a[7].toFixed(sa),$a[1]=+$a[1].toFixed(sa),$a[2]=+$a[2].toFixed(sa),$a[3]=+$a[3].toFixed(sa+2),$a[6]=+$a[6].toFixed(sa),void($a[7]=+$a[7].toFixed(sa));default:return Qa=
$a.length,Nb&&($a[Qa-2]+=kb,$a[Qa-1]+=Tb),kb=$a[Qa-2]-$a[Qa-2].toFixed(sa),Tb=$a[Qa-1]-$a[Qa-1].toFixed(sa),void $a.forEach(function(Bb,Ac){Ac&&($a[Ac]=+$a[Ac].toFixed(sa))})}}),this||kc};u.prototype.iterate=function(sa,Qa){var Ka,Wa=(this||kc).segments,kb={},Tb=!1,$a=0,Nb=0,Bb=0,Ac=0;if(Qa||this.__evaluateStack(),Wa.forEach(function(nd,Kd){var Ie=sa(nd,Kd,$a,Nb);Array.isArray(Ie)&&(kb[Kd]=Ie,Tb=!0);Kd=nd[0]===nd[0].toLowerCase();switch(nd[0]){case "m":case "M":return $a=nd[1]+(Kd?$a:0),Nb=nd[2]+
(Kd?Nb:0),Bb=$a,void(Ac=Nb);case "h":case "H":return void($a=nd[1]+(Kd?$a:0));case "v":case "V":return void(Nb=nd[1]+(Kd?Nb:0));case "z":case "Z":return $a=Bb,void(Nb=Ac);default:$a=nd[nd.length-2]+(Kd?$a:0),Nb=nd[nd.length-1]+(Kd?Nb:0)}}),!Tb)return this||kc;var Gb=[];for(Qa=0;Qa<Wa.length;Qa++)if(void 0!==kb[Qa])for(Ka=0;Ka<kb[Qa].length;Ka++)Gb.push(kb[Qa][Ka]);else Gb.push(Wa[Qa]);return(this||kc).segments=Gb,this||kc};u.prototype.abs=function(){return this.iterate(function(sa,Qa,Ka,Wa){Qa=sa[0];
var kb=Qa.toUpperCase();if(Qa!==kb)switch(sa[0]=kb,Qa){case "v":return void(sa[1]+=Wa);case "a":return sa[6]+=Ka,void(sa[7]+=Wa);default:for(Qa=1;Qa<sa.length;Qa++)sa[Qa]+=Qa%2?Ka:Wa}},!0),this||kc};u.prototype.rel=function(){return this.iterate(function(sa,Qa,Ka,Wa){var kb=sa[0],Tb=kb.toLowerCase();if(kb!==Tb&&(0!==Qa||"M"!==kb))switch(sa[0]=Tb,kb){case "V":return void(sa[1]-=Wa);case "A":return sa[6]-=Ka,void(sa[7]-=Wa);default:for(Qa=1;Qa<sa.length;Qa++)sa[Qa]-=Qa%2?Ka:Wa}},!0),this||kc};u.prototype.unarc=
function(){return this.iterate(function(sa,Qa,Ka,Wa){var kb,Tb,$a,Nb=[];Qa=sa[0];return"A"!==Qa&&"a"!==Qa?null:("a"===Qa?(Tb=Ka+sa[6],$a=Wa+sa[7]):(Tb=sa[6],$a=sa[7]),kb=Fx(Ka,Wa,Tb,$a,sa[4],sa[5],sa[1],sa[2],sa[3]),0===kb.length?[["a"===sa[0]?"l":"L",sa[6],sa[7]]]:(kb.forEach(function(Bb){Nb.push(["C",Bb[2],Bb[3],Bb[4],Bb[5],Bb[6],Bb[7]])}),Nb))}),this||kc};u.prototype.unshort=function(){var sa,Qa,Ka,Wa,kb,Tb=(this||kc).segments;return this.iterate(function($a,Nb,Bb,Ac){var Gb,nd=$a[0],Kd=nd.toUpperCase();
Nb&&("T"===Kd?(Gb="t"===nd,Ka=Tb[Nb-1],"Q"===Ka[0]?(sa=Ka[1]-Bb,Qa=Ka[2]-Ac):"q"===Ka[0]?(sa=Ka[1]-Ka[3],Qa=Ka[2]-Ka[4]):(sa=0,Qa=0),Wa=-sa,kb=-Qa,Gb||(Wa+=Bb,kb+=Ac),Tb[Nb]=[Gb?"q":"Q",Wa,kb,$a[1],$a[2]]):"S"===Kd&&(Gb="s"===nd,Ka=Tb[Nb-1],"C"===Ka[0]?(sa=Ka[3]-Bb,Qa=Ka[4]-Ac):"c"===Ka[0]?(sa=Ka[3]-Ka[5],Qa=Ka[4]-Ka[6]):(sa=0,Qa=0),Wa=-sa,kb=-Qa,Gb||(Wa+=Bb,kb+=Ac),Tb[Nb]=[Gb?"c":"C",Wa,kb,$a[1],$a[2],$a[3],$a[4]]))}),this||kc};var Ex=u,Gu={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},wha=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
yha=function(sa){var Qa=[];return sa.replace(wha,function(Ka,Wa,kb){Ka=Wa.toLowerCase();kb=(kb=kb.match(xha))?kb.map(Number):[];for("m"===Ka&&2<kb.length&&(Qa.push([Wa].concat(kb.splice(0,2))),Ka="l",Wa="m"===Wa?"l":"L");0<=kb.length;){if(kb.length===Gu[Ka])return kb.unshift(Wa),Qa.push(kb);if(kb.length<Gu[Ka])throw Error("malformed path data");Qa.push([Wa].concat(kb.splice(0,Gu[Ka])))}}),Qa},xha=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,zo=function(sa,Qa,Ka,Wa,kb,Tb,$a,Nb){return new w(sa,Qa,Ka,Wa,kb,
Tb,$a,Nb)};w.prototype={constructor:w,init:function(){(this||kc).length=this.getArcLength([(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y])},getTotalLength:function(){return(this||kc).length},getPointAtLength:function(sa){sa=C(sa,(this||kc).length,(this||kc).getArcLength,[(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y]);return this.getPoint([(this||
kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y],sa)},getTangentAtLength:function(sa){sa=C(sa,(this||kc).length,(this||kc).getArcLength,[(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y]);sa=this.getDerivative([(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y],sa);var Qa=Math.sqrt(sa.x*sa.x+
sa.y*sa.y);return 0<Qa?{x:sa.x/Qa,y:sa.y/Qa}:{x:0,y:0}},getPropertiesAtLength:function(sa){sa=C(sa,(this||kc).length,(this||kc).getArcLength,[(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y]);var Qa=this.getDerivative([(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y],sa);var Ka=Math.sqrt(Qa.x*Qa.x+Qa.y*Qa.y);Qa=0<Ka?{x:Qa.x/Ka,y:Qa.y/Ka}:{x:0,y:0};sa=
this.getPoint([(this||kc).a.x,(this||kc).b.x,(this||kc).c.x,(this||kc).d.x],[(this||kc).a.y,(this||kc).b.y,(this||kc).c.y,(this||kc).d.y],sa);return{x:sa.x,y:sa.y,tangentX:Qa.x,tangentY:Qa.y}}};var iha=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,
-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,
.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,
-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,
.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,
-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,
.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,
-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,
.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,
-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,
.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,
-.9951872199970213,.9951872199970213]],jha=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,
.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,
.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,
.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,
.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,
.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,
.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,
.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,
.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,
.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,
.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,
.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],hha=[[1],[1,1],[1,2,1],[1,3,3,1]],hB=2*Math.PI,kha=function(sa,Qa,Ka,Wa,kb,Tb,$a,Nb,Bb){var Ac=Math.sin(kb*hB/360),Gb=Math.cos(kb*hB/360);kb=Gb*(sa-Nb)/2+Ac*(Qa-Bb)/2;var nd=-Ac*(sa-Nb)/2+Gb*(Qa-Bb)/2;if(0===kb&&0===nd||0===Ka||0===Wa)return[];Ka=Math.abs(Ka);Wa=Math.abs(Wa);kb=kb*kb/(Ka*Ka)+nd*nd/(Wa*Wa);1<kb&&(Ka*=Math.sqrt(kb),Wa*=Math.sqrt(kb));var Kd=ua(sa,Qa,Nb,Bb,Tb,$a,Ka,Wa,Ac,Gb);sa=[];Qa=Kd[2];Tb=Kd[3];$a=Math.max(Math.ceil(Math.abs(Tb)/
(hB/4)),1);Tb/=$a;for(Nb=0;Nb<$a;Nb++)sa.push(Fa(Qa,Tb)),Qa+=Tb;return sa.map(function(Ie){for(var Je=0;Je<Ie.length;Je+=2){var ae=Ie[Je+0],Ke=Ie[Je+1];ae*=Ka;Ke*=Wa;var om=Ac*ae+Gb*Ke;Ie[Je+0]=Gb*ae-Ac*Ke+Kd[0];Ie[Je+1]=om+Kd[1]}return Ie})},O2=function(sa,Qa,Ka,Wa,kb,Tb,$a,Nb,Bb){return new F(sa,Qa,Ka,Wa,kb,Tb,$a,Nb,Bb)};F.prototype={constructor:F,init:function(){},getTotalLength:function(){return(this||kc).length},getPointAtLength:function(sa){var Qa=this||kc;0>sa?sa=0:sa>(this||kc).length&&(sa=
(this||kc).length);for(var Ka=(this||kc).partialLengths.length-1;(this||kc).partialLengths[Ka]>=sa&&0<(this||kc).partialLengths[Ka];)Ka--;Ka<(this||kc).partialLengths.length-1&&Ka++;for(var Wa=0,kb=0;kb<Ka;kb++)Wa+=Qa.partialLengths[kb];return(this||kc).curves[Ka].getPointAtLength(sa-Wa)},getTangentAtLength:function(sa){var Qa=this||kc;0>sa?sa=0:sa>(this||kc).length&&(sa=(this||kc).length);for(var Ka=(this||kc).partialLengths.length-1;(this||kc).partialLengths[Ka]>=sa&&0<(this||kc).partialLengths[Ka];)Ka--;
Ka<(this||kc).partialLengths.length-1&&Ka++;for(var Wa=0,kb=0;kb<Ka;kb++)Wa+=Qa.partialLengths[kb];return(this||kc).curves[Ka].getTangentAtLength(sa-Wa)},getPropertiesAtLength:function(sa){var Qa=this.getTangentAtLength(sa);sa=this.getPointAtLength(sa);return{x:sa.x,y:sa.y,tangentX:Qa.x,tangentY:Qa.y}}};var Mq=function(sa,Qa,Ka,Wa){return new Y(sa,Qa,Ka,Wa)};Y.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||kc).x0-(this||kc).x1,2)+Math.pow((this||kc).y0-(this||kc).y1,2))};Y.prototype.getPointAtLength=
function(sa){sa/=Math.sqrt(Math.pow((this||kc).x0-(this||kc).x1,2)+Math.pow((this||kc).y0-(this||kc).y1,2));return{x:(this||kc).x0+((this||kc).x1-(this||kc).x0)*sa,y:(this||kc).y0+((this||kc).y1-(this||kc).y0)*sa}};Y.prototype.getTangentAtLength=function(){var sa=Math.sqrt(((this||kc).x1-(this||kc).x0)*((this||kc).x1-(this||kc).x0)+((this||kc).y1-(this||kc).y0)*((this||kc).y1-(this||kc).y0));return{x:((this||kc).x1-(this||kc).x0)/sa,y:((this||kc).y1-(this||kc).y0)/sa}};Y.prototype.getPropertiesAtLength=
function(sa){sa=this.getPointAtLength(sa);var Qa=this.getTangentAtLength();return{x:sa.x,y:sa.y,tangentX:Qa.x,tangentY:Qa.y}};var lha=function(sa){function Qa($a){if(!$a)return null;var Nb;$a=yha($a);for(var Bb=[0,0],Ac=[0,0],Gb=0;Gb<$a.length;Gb++)"M"===$a[Gb][0]?(Bb=[$a[Gb][1],$a[Gb][2]],kb.push(null)):"m"===$a[Gb][0]?(Bb=[$a[Gb][1]+Bb[0],$a[Gb][2]+Bb[1]],kb.push(null)):"L"===$a[Gb][0]?(Ka+=Math.sqrt(Math.pow(Bb[0]-$a[Gb][1],2)+Math.pow(Bb[1]-$a[Gb][2],2)),kb.push(new Mq(Bb[0],$a[Gb][1],Bb[1],$a[Gb][2])),
Bb=[$a[Gb][1],$a[Gb][2]]):"l"===$a[Gb][0]?(Ka+=Math.sqrt(Math.pow($a[Gb][1],2)+Math.pow($a[Gb][2],2)),kb.push(new Mq(Bb[0],$a[Gb][1]+Bb[0],Bb[1],$a[Gb][2]+Bb[1])),Bb=[$a[Gb][1]+Bb[0],$a[Gb][2]+Bb[1]]):"H"===$a[Gb][0]?(Ka+=Math.abs(Bb[0]-$a[Gb][1]),kb.push(new Mq(Bb[0],$a[Gb][1],Bb[1],Bb[1])),Bb[0]=$a[Gb][1]):"h"===$a[Gb][0]?(Ka+=Math.abs($a[Gb][1]),kb.push(new Mq(Bb[0],Bb[0]+$a[Gb][1],Bb[1],Bb[1])),Bb[0]=$a[Gb][1]+Bb[0]):"V"===$a[Gb][0]?(Ka+=Math.abs(Bb[1]-$a[Gb][1]),kb.push(new Mq(Bb[0],Bb[0],Bb[1],
$a[Gb][1])),Bb[1]=$a[Gb][1]):"v"===$a[Gb][0]?(Ka+=Math.abs($a[Gb][1]),kb.push(new Mq(Bb[0],Bb[0],Bb[1],Bb[1]+$a[Gb][1])),Bb[1]=$a[Gb][1]+Bb[1]):"z"===$a[Gb][0]||"Z"===$a[Gb][0]?(Ka+=Math.sqrt(Math.pow($a[0][1]-Bb[0],2)+Math.pow($a[0][2]-Bb[1],2)),kb.push(new Mq(Bb[0],$a[0][1],Bb[1],$a[0][2])),Bb=[$a[0][1],$a[0][2]]):"C"===$a[Gb][0]?(Nb=new zo(Bb[0],Bb[1],$a[Gb][1],$a[Gb][2],$a[Gb][3],$a[Gb][4],$a[Gb][5],$a[Gb][6]),Ka+=Nb.getTotalLength(),Bb=[$a[Gb][5],$a[Gb][6]],kb.push(Nb)):"c"===$a[Gb][0]?(Nb=new zo(Bb[0],
Bb[1],Bb[0]+$a[Gb][1],Bb[1]+$a[Gb][2],Bb[0]+$a[Gb][3],Bb[1]+$a[Gb][4],Bb[0]+$a[Gb][5],Bb[1]+$a[Gb][6]),Ka+=Nb.getTotalLength(),Bb=[$a[Gb][5]+Bb[0],$a[Gb][6]+Bb[1]],kb.push(Nb)):"S"===$a[Gb][0]?(Nb=0<Gb&&-1<["C","c","S","s"].indexOf($a[Gb-1][0])?new zo(Bb[0],Bb[1],2*Bb[0]-$a[Gb-1][$a[Gb-1].length-4],2*Bb[1]-$a[Gb-1][$a[Gb-1].length-3],$a[Gb][1],$a[Gb][2],$a[Gb][3],$a[Gb][4]):new zo(Bb[0],Bb[1],Bb[0],Bb[1],$a[Gb][1],$a[Gb][2],$a[Gb][3],$a[Gb][4]),Ka+=Nb.getTotalLength(),Bb=[$a[Gb][3],$a[Gb][4]],kb.push(Nb)):
"s"===$a[Gb][0]?(Nb=0<Gb&&-1<["C","c","S","s"].indexOf($a[Gb-1][0])?new zo(Bb[0],Bb[1],Bb[0]+Nb.d.x-Nb.c.x,Bb[1]+Nb.d.y-Nb.c.y,Bb[0]+$a[Gb][1],Bb[1]+$a[Gb][2],Bb[0]+$a[Gb][3],Bb[1]+$a[Gb][4]):new zo(Bb[0],Bb[1],Bb[0],Bb[1],Bb[0]+$a[Gb][1],Bb[1]+$a[Gb][2],Bb[0]+$a[Gb][3],Bb[1]+$a[Gb][4]),Ka+=Nb.getTotalLength(),Bb=[$a[Gb][3]+Bb[0],$a[Gb][4]+Bb[1]],kb.push(Nb)):"Q"===$a[Gb][0]?(Nb=new zo(Bb[0],Bb[1],$a[Gb][1],$a[Gb][2],$a[Gb][3],$a[Gb][4]),Ka+=Nb.getTotalLength(),kb.push(Nb),Bb=[$a[Gb][3],$a[Gb][4]],
Ac=[$a[Gb][1],$a[Gb][2]]):"q"===$a[Gb][0]?(Nb=new zo(Bb[0],Bb[1],Bb[0]+$a[Gb][1],Bb[1]+$a[Gb][2],Bb[0]+$a[Gb][3],Bb[1]+$a[Gb][4]),Ka+=Nb.getTotalLength(),Ac=[Bb[0]+$a[Gb][1],Bb[1]+$a[Gb][2]],Bb=[$a[Gb][3]+Bb[0],$a[Gb][4]+Bb[1]],kb.push(Nb)):"T"===$a[Gb][0]?(Nb=0<Gb&&-1<["Q","q","T","t"].indexOf($a[Gb-1][0])?new zo(Bb[0],Bb[1],2*Bb[0]-Ac[0],2*Bb[1]-Ac[1],$a[Gb][1],$a[Gb][2]):new Mq(Bb[0],$a[Gb][1],Bb[1],$a[Gb][2]),kb.push(Nb),Ka+=Nb.getTotalLength(),Ac=[2*Bb[0]-Ac[0],2*Bb[1]-Ac[1]],Bb=[$a[Gb][1],$a[Gb][2]]):
"t"===$a[Gb][0]?(Nb=0<Gb&&-1<["Q","q","T","t"].indexOf($a[Gb-1][0])?new zo(Bb[0],Bb[1],2*Bb[0]-Ac[0],2*Bb[1]-Ac[1],Bb[0]+$a[Gb][1],Bb[1]+$a[Gb][2]):new Mq(Bb[0],Bb[0]+$a[Gb][1],Bb[1],Bb[1]+$a[Gb][2]),Ka+=Nb.getTotalLength(),Ac=[2*Bb[0]-Ac[0],2*Bb[1]-Ac[1]],Bb=[$a[Gb][1]+Bb[0],$a[Gb][2]+Bb[0]],kb.push(Nb)):"A"===$a[Gb][0]?(Nb=new O2(Bb[0],Bb[1],$a[Gb][1],$a[Gb][2],$a[Gb][3],$a[Gb][4],$a[Gb][5],$a[Gb][6],$a[Gb][7]),Ka+=Nb.getTotalLength(),Bb=[$a[Gb][6],$a[Gb][7]],kb.push(Nb)):"a"===$a[Gb][0]&&(Nb=new O2(Bb[0],
Bb[1],$a[Gb][1],$a[Gb][2],$a[Gb][3],$a[Gb][4],$a[Gb][5],Bb[0]+$a[Gb][6],Bb[1]+$a[Gb][7]),Ka+=Nb.getTotalLength(),Bb=[Bb[0]+$a[Gb][6],Bb[1]+$a[Gb][7]],kb.push(Nb)),Wa.push(Ka);return Qa}var Ka=0,Wa=[],kb=[];Qa.getTotalLength=function(){return Ka};Qa.getPointAtLength=function($a){$a=Tb($a);return kb[$a.i].getPointAtLength($a.fraction)};Qa.getTangentAtLength=function($a){$a=Tb($a);return kb[$a.i].getTangentAtLength($a.fraction)};Qa.getPropertiesAtLength=function($a){$a=Tb($a);return kb[$a.i].getPropertiesAtLength($a.fraction)};
var Tb=function($a){0>$a?$a=0:$a>Ka&&($a=Ka);for(var Nb=Wa.length-1;Wa[Nb]>=$a&&0<Wa[Nb];)Nb--;return Nb++,{fraction:$a-Wa[Nb-1],i:Nb}};return Qa(sa)},NP='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',mha=function(sa,Qa){for(var Ka,Wa,kb,Tb=sa.length,$a=1/0,Nb=0;Nb<Tb;Nb++)!function(Bb){Wa=0;Qa.forEach(function(Ac,
Gb){Ac=Q(sa[(Bb+Gb)%Tb],Ac);Wa+=Ac*Ac});Wa<$a&&($a=Wa,Ka=Bb)}(Nb);Ka&&(kb=sa.splice(0,Ka),sa.splice.apply(sa,[sa.length,0].concat(kb)))},tha=M;M.deviation=function(sa,Qa,Ka,Wa){var kb=Qa&&Qa.length,Tb=Math.abs(xe(sa,0,kb?Qa[0]*Ka:sa.length,Ka));if(kb){kb=0;for(var $a=Qa.length;kb<$a;kb++)Tb-=Math.abs(xe(sa,Qa[kb]*Ka,kb<$a-1?Qa[kb+1]*Ka:sa.length,Ka))}for(kb=Qa=0;kb<Wa.length;kb+=3){$a=Wa[kb]*Ka;var Nb=Wa[kb+1]*Ka,Bb=Wa[kb+2]*Ka;Qa+=Math.abs((sa[$a]-sa[Bb])*(sa[Nb+1]-sa[$a+1])-(sa[$a]-sa[Nb])*(sa[Bb+
1]-sa[$a+1]))}return 0===Tb&&0===Qa?0:Math.abs((Qa-Tb)/Tb)};M.flatten=function(sa){for(var Qa=sa[0][0].length,Ka={vertices:[],holes:[],dimensions:Qa},Wa=0,kb=0;kb<sa.length;kb++){for(var Tb=0;Tb<sa[kb].length;Tb++)for(var $a=0;$a<Qa;$a++)Ka.vertices.push(sa[kb][Tb][$a]);0<kb&&(Wa+=sa[kb-1].length,Ka.holes.push(Wa))}return Ka};var zha=function(sa){return sa},pha=function(sa){if(null==sa)return zha;var Qa,Ka,Wa=sa.scale[0],kb=sa.scale[1],Tb=sa.translate[0],$a=sa.translate[1];return function(Nb,Bb){Bb||
(Qa=Ka=0);Bb=2;var Ac=Nb.length,Gb=Array(Ac);Gb[0]=(Qa+=Nb[0])*Wa+Tb;for(Gb[1]=(Ka+=Nb[1])*kb+$a;Bb<Ac;)Gb[Bb]=Nb[Bb],++Bb;return Gb}},sha=function(sa,Qa){return"GeometryCollection"===Qa.type?{type:"FeatureCollection",features:Qa.geometries.map(function(Ka){return Ae(sa,Ka)})}:Ae(sa,Qa)},qha=function(sa,Qa){function Ka(Ac){var Gb,nd=sa.arcs[0>Ac?~Ac:Ac],Kd=nd[0];return sa.transform?(Gb=[0,0],nd.forEach(function(Ie){Gb[0]+=Ie[0];Gb[1]+=Ie[1]})):Gb=nd[nd.length-1],0>Ac?[Gb,Kd]:[Kd,Gb]}function Wa(Ac,
Gb){for(var nd in Ac){var Kd=Ac[nd];delete Gb[Kd.start];delete Kd.start;delete Kd.end;Kd.forEach(function(Ie){kb[0>Ie?~Ie:Ie]=1});Nb.push(Kd)}}var kb={},Tb={},$a={},Nb=[],Bb=-1;return Qa.forEach(function(Ac,Gb){var nd,Kd=sa.arcs[0>Ac?~Ac:Ac];3>Kd.length&&!Kd[1][0]&&!Kd[1][1]&&(nd=Qa[++Bb],Qa[Bb]=Ac,Qa[Gb]=nd)}),Qa.forEach(function(Ac){var Gb=Ka(Ac);var nd=Gb[0],Kd=Gb[1];(Gb=$a[nd])?(delete $a[Gb.end],Gb.push(Ac),Gb.end=Kd,Ac=Tb[Kd])?(delete Tb[Ac.start],nd=Ac===Gb?Gb:Gb.concat(Ac),Tb[nd.start=Gb.start]=
$a[nd.end=Ac.end]=nd):Tb[Gb.start]=$a[Gb.end]=Gb:(Gb=Tb[Kd])?(delete Tb[Gb.start],Gb.unshift(Ac),Gb.start=nd,Ac=$a[nd])?(delete $a[Ac.end],nd=Ac===Gb?Gb:Ac.concat(Gb),Tb[nd.start=Ac.start]=$a[nd.end=Gb.end]=nd):Tb[Gb.start]=$a[Gb.end]=Gb:(Gb=[Ac],Tb[Gb.start=nd]=$a[Gb.end=Kd]=Gb)}),Wa($a,Tb),Wa(Tb,$a),Qa.forEach(function(Ac){kb[0>Ac?~Ac:Ac]||Nb.push([Ac])}),Nb},P2=function(sa,Qa){for(var Ka=0,Wa=sa.length;Ka<Wa;){var kb=Ka+Wa>>>1;sa[kb]<Qa?Ka=kb+1:Wa=kb}return Ka},rha=function(sa){function Qa(Je,
ae){Je.forEach(function(Ke){0>Ke&&(Ke=~Ke);var om=kb[Ke];om?om.push(ae):kb[Ke]=[ae]})}function Ka(Je,ae){Je.forEach(function(Ke){Qa(Ke,ae)})}function Wa(Je,ae){"GeometryCollection"===Je.type?Je.geometries.forEach(function(Ke){Wa(Ke,ae)}):Je.type in $a&&$a[Je.type](Je.arcs,ae)}var kb={},Tb=sa.map(function(){return[]}),$a={LineString:Qa,MultiLineString:Ka,Polygon:Ka,MultiPolygon:function(Je,ae){Je.forEach(function(Ke){Ka(Ke,ae)})}};sa.forEach(Wa);for(var Nb in kb){sa=kb[Nb];for(var Bb=sa.length,Ac=
0;Ac<Bb;++Ac)for(var Gb=Ac+1;Gb<Bb;++Gb){var nd,Kd=sa[Ac],Ie=sa[Gb];(nd=Tb[Kd])[Nb=P2(nd,Ie)]!==Ie&&nd.splice(Nb,0,Ie);(nd=Tb[Ie])[Nb=P2(nd,Kd)]!==Kd&&nd.splice(Nb,0,Kd)}}return Tb},M2=function(sa,Qa){return sa<Qa?-1:sa>Qa?1:sa>=Qa?0:NaN},N2=function(sa){return 1===sa.length&&(sa=Mg(sa)),{left:function(Qa,Ka,Wa,kb){null==Wa&&(Wa=0);for(null==kb&&(kb=Qa.length);Wa<kb;){var Tb=Wa+kb>>>1;0>sa(Qa[Tb],Ka)?Wa=Tb+1:kb=Tb}return Wa},right:function(Qa,Ka,Wa,kb){null==Wa&&(Wa=0);for(null==kb&&(kb=Qa.length);Wa<
kb;){var Tb=Wa+kb>>>1;0<sa(Qa[Tb],Ka)?kb=Tb:Wa=Tb+1}return Wa}}};N2(M2);var uha=function(sa,Qa){return vh(pg(xg(sa),sa),Qa)},vha=function(sa,Qa){if(8<sa.length)return sa.map(function(Wa,kb){return kb});var Ka=sa.map(function(Wa){return Qa.map(function(kb){kb=Q(db(Wa),db(kb));return kb*kb})});return Ff(sa,Qa,Ka)};f.interpolate=function(sa,Qa,Ka){void 0===Ka&&(Ka={});var Wa=Ka.maxSegmentLength;void 0===Wa&&(Wa=10);Ka=Ka.string;void 0===Ka&&(Ka=!0);var kb=Aa(sa,Wa);Wa=Aa(Qa,Wa);var Tb=Da(kb,Wa,Ka);return!Ka||
"string"!=typeof sa&&"string"!=typeof Qa?Tb:function($a){return 1E-4>$a&&"string"==typeof sa?sa:1E-4>1-$a&&"string"==typeof Qa?Qa:Tb($a)}};f.separate=gg;f.combine=function(sa,Qa,Ka){void 0===Ka&&(Ka={});var Wa=Ka.maxSegmentLength;void 0===Wa&&(Wa=10);var kb=Ka.string;void 0===kb&&(kb=!0);Ka=Ka.single;void 0===Ka&&(Ka=!1);var Tb=gg(Qa,sa,{maxSegmentLength:Wa,string:kb,single:Ka});return Ka?function($a){return Tb(1-$a)}:Tb.map(function($a){return function(Nb){return $a(1-Nb)}})};f.interpolateAll=function(sa,
Qa,Ka){void 0===Ka&&(Ka={});var Wa=Ka.maxSegmentLength;void 0===Wa&&(Wa=10);var kb=Ka.string;void 0===kb&&(kb=!0);Ka=Ka.single;if(void 0===Ka&&(Ka=!1),!Array.isArray(sa)||!Array.isArray(Qa)||sa.length!==Qa.length||!sa.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var Tb,$a,Nb=function(Ac){return Aa(Ac,Wa)},
Bb=sa.map(Nb);Nb=Qa.map(Nb);return Ka?(sa.every(function(Ac){return"string"==typeof Ac})&&(Tb=sa.slice(0)),Qa.every(function(Ac){return"string"==typeof Ac})&&($a=Qa.slice(0))):(Tb=sa.slice(0),$a=Qa.slice(0)),yg(Bb,Nb,{string:kb,single:Ka,t0:Tb,t1:$a,match:!1})};f.splitPathString=function(sa){return ub((new Ex(sa)).abs())};f.toPathString=xa;f.fromCircle=rh;f.toCircle=function(sa,Qa,Ka,Wa,kb){var Tb=rh(Qa,Ka,Wa,sa,kb);return function($a){return Tb(1-$a)}};f.fromRect=Lh;f.toRect=function(sa,Qa,Ka,Wa,
kb,Tb){var $a=Lh(Qa,Ka,Wa,kb,sa,Tb);return function(Nb){return $a(1-Nb)}};Object.defineProperty(f,"__esModule",{value:!0})});var Aha={},Bha="function"===typeof Float32Array,Cha=Aha=function(f,m,n,a){if(!(0<=f&&1>=f&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(f===m&&n===a)return q8;for(var d=Bha?new Float32Array(11):Array(11),k=0;11>k;++k)d[k]=UD(.1*k,f,n);return function(b){if(0===b)return 0;if(1===b)return 1;for(var e=0,l=1;10!==l&&d[l]<=b;++l)e+=.1;--l;l=e+(b-d[l])/(d[l+
1]-d[l])*.1;var p=3*(1-3*n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(.001<=p){for(e=0;4>e;++e){p=3*(1-3*n+3*f)*l*l+2*(3*n-6*f)*l+3*f;if(0===p)break;var q=UD(l,f,n)-b;l-=q/p}b=l}else if(0===p)b=l;else{l=e;e+=.1;var u=0;do q=l+(e-l)/2,p=UD(q,f,n)-b,0<p?e=q:l=q;while(1E-7<Math.abs(p)&&10>++u);b=q}return UD(b,m,a)}},dc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var f={},m={};!function(n,a){function d(){(this||dc)._delay=0;(this||dc)._endDelay=0;(this||dc)._fill="none";
(this||dc)._iterationStart=0;(this||dc)._iterations=1;(this||dc)._duration=0;(this||dc)._playbackRate=1;(this||dc)._direction="normal";(this||dc)._easing="linear";(this||dc)._easingFunction=A}function k(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function b(W,ka,ea){var la=new d;return ka&&(la.fill="both",la.duration="auto"),"number"!=typeof W||isNaN(W)?void 0!==W&&Object.getOwnPropertyNames(W).forEach(function(db){"auto"==W[db]||
("number"==typeof la[db]||"duration"==db)&&("number"!=typeof W[db]||isNaN(W[db]))||"fill"==db&&-1==w.indexOf(W[db])||"direction"==db&&-1==y.indexOf(W[db])||"playbackRate"==db&&1!==W[db]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(la[db]=W[db])}):la.duration=W,la}function e(W,ka,ea,la){return 0>W||1<W||0>ea||1<ea?A:function(db){if(0>=db){var ub=0;return 0<W?ub=ka/W:!ka&&0<ea&&(ub=la/ea),ub*db}if(1<=db)return ub=0,1>ea?ub=(la-1)/(ea-1):
1==ea&&1>W&&(ub=(ka-1)/(W-1)),1+ub*(db-1);ub=0;for(var xa=1;ub<xa;){var na=(ub+xa)/2,Aa=3*W*(1-na)*(1-na)*na+3*ea*(1-na)*na*na+na*na*na;if(1E-5>Math.abs(db-Aa))break;Aa<db?ub=na:xa=na}return 3*ka*(1-na)*(1-na)*na+3*la*(1-na)*na*na+na*na*na}}function l(W,ka){return function(ea){if(1<=ea)return 1;var la=1/W;return(ea+=ka*la)-ea%la}}function p(W){S||(S=document.createElement("div").style);S.animationTimingFunction="";S.animationTimingFunction=W;var ka=S.animationTimingFunction;if(""==ka&&k())throw new TypeError(W+
" is not a valid value for easing");return ka}function q(W){if("linear"==W)return A;var ka=V.exec(W);return ka?e.apply(this||dc,ka.slice(1).map(Number)):(ka=ba.exec(W))?l(Number(ka[1]),L):(ka=ua.exec(W))?l(Number(ka[1]),{start:C,middle:D,end:L}[ka[2]]):I[W]||A}function u(W,ka,ea){if(null==ka)return Fa;var la=ea.delay+W+ea.endDelay;return ka<Math.min(ea.delay,la)?F:ka>=Math.min(ea.delay+W,la)?Y:Q}var w=["backwards","forwards","both","none"],y=["reverse","alternate","alternate-reverse"],A=function(W){return W};
d.prototype={_setMember:function(W,ka){(this||dc)["_"+W]=ka;(this||dc)._effect&&((this||dc)._effect._timingInput[W]=ka,(this||dc)._effect._timing=n.normalizeTimingInput((this||dc)._effect._timingInput),(this||dc)._effect.activeDuration=n.calculateActiveDuration((this||dc)._effect._timing),(this||dc)._effect._animation&&(this||dc)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||dc)._playbackRate},set delay(W){this._setMember("delay",W)},get delay(){return(this||dc)._delay},
set endDelay(W){this._setMember("endDelay",W)},get endDelay(){return(this||dc)._endDelay},set fill(W){this._setMember("fill",W)},get fill(){return(this||dc)._fill},set iterationStart(W){if((isNaN(W)||0>W)&&k())throw new TypeError("iterationStart must be a non-negative number, received: "+W);this._setMember("iterationStart",W)},get iterationStart(){return(this||dc)._iterationStart},set duration(W){if("auto"!=W&&(isNaN(W)||0>W)&&k())throw new TypeError("duration must be non-negative or auto, received: "+
W);this._setMember("duration",W)},get duration(){return(this||dc)._duration},set direction(W){this._setMember("direction",W)},get direction(){return(this||dc)._direction},set easing(W){(this||dc)._easingFunction=q(p(W));this._setMember("easing",W)},get easing(){return(this||dc)._easing},set iterations(W){if((isNaN(W)||0>W)&&k())throw new TypeError("iterations must be non-negative, received: "+W);this._setMember("iterations",W)},get iterations(){return(this||dc)._iterations}};var C=1,D=.5,L=0,I={ease:e(.25,
.1,.25,1),"ease-in":e(.42,0,1,1),"ease-out":e(0,0,.58,1),"ease-in-out":e(.42,0,.58,1),"step-start":l(1,C),"step-middle":l(1,D),"step-end":l(1,L)},S=null,V=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,ba=/steps\(\s*(\d+)\s*\)/,ua=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,Fa=0,F=1,Y=2,Q=3;n.cloneTimingInput=function(W){if("number"==typeof W)return W;var ka={},ea;for(ea in W)ka[ea]=W[ea];return ka};n.makeTiming=
b;n.numericTimingToObject=function(W){return"number"==typeof W&&(W=isNaN(W)?{duration:0}:{duration:W}),W};n.normalizeTimingInput=function(W,ka){return W=n.numericTimingToObject(W),b(W,ka)};n.calculateActiveDuration=function(W){return Math.abs((0===W.duration||0===W.iterations?0:W.duration*W.iterations)/W.playbackRate)};n.calculateIterationProgress=function(W,ka,ea){var la=u(W,ka,ea);a:{var db=ea.fill;switch(la){case F:W="backwards"==db||"both"==db?0:null;break a;case Q:W=ka-ea.delay;break a;case Y:W=
"forwards"==db||"both"==db?W:null;break a;case Fa:W=null;break a}W=void 0}if(null===W)return null;ka=ea.duration;db=ea.iterationStart;ka=(0===ka?la!==F&&(db+=ea.iterations):db+=W/ka,db);db=ka===1/0?ea.iterationStart%1:ka%1;W=(0!==db||la!==Y||0===ea.iterations||0===W&&0!==ea.duration||(db=1),db);db=la===Y&&ea.iterations===1/0?1/0:1===W?Math.floor(ka)-1:Math.floor(ka);ka=la=ea.direction;"normal"!==la&&"reverse"!==la&&("alternate-reverse"===la&&(db+=1),ka="normal",db!==1/0&&0!=db%2&&(ka="reverse"));
return ea._easingFunction("normal"===ka?W:1-W)};n.calculatePhase=u;n.normalizeEasing=p;n.parseEasingFunction=q}(f);(function(n,a){function d(l){var p=[],q;for(q in l)if(!(q in["easing","offset","composite"])){var u=l[q];Array.isArray(u)||(u=[u]);for(var w,y=u.length,A=0;A<y;A++)w={},w.offset="offset"in l?l.offset:1==y?1:A/(y-1),"easing"in l&&(w.easing=l.easing),"composite"in l&&(w.composite=l.composite),w[q]=u[A],p.push(w)}return p.sort(function(C,D){return C.offset-D.offset}),p}var k={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},b=document.createElementNS("http://www.w3.org/1999/xhtml","div");a={thin:"1px",medium:"3px",thick:"5px"};var e={borderBottomWidth:a,borderLeftWidth:a,borderRightWidth:a,borderTopWidth:a,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:a,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=d;n.normalizeKeyframes=function(l){function p(){var A=q.length;null==q[A-1].offset&&(q[A-1].offset=1);1<A&&null==q[0].offset&&(q[0].offset=0);for(var C=0,D=q[0].offset,L=1;L<A;L++){var I=q[L].offset;if(null!=I){for(var S=1;S<L-C;S++)q[C+S].offset=D+(I-D)*S/(L-C);C=L;D=I}}}if(null==l)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l));Array.isArray(l)||(l=d(l));var q=l.map(function(A){var C={},D;for(D in A){var L=A[D];if("offset"==
D){if(null!=L){if(L=Number(L),!isFinite(L))throw new TypeError("Keyframe offsets must be numbers.");if(0>L||1<L)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==D){if("add"==L||"accumulate"==L)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=L)throw new TypeError("Invalid composite mode "+L+".");}else L="easing"==D?n.normalizeEasing(L):""+L;var I=void 0,S=D,V=L;L=C;var ba=S;if("display"!==
ba&&0!==ba.lastIndexOf("animation",0)&&0!==ba.lastIndexOf("transition",0))if(ba=k[S])for(I in b.style[S]=V,ba)S=ba[I],V=b.style[S],L[S]=S in e?e[S][V]||V:V;else L[S]=S in e?e[S][V]||V:V}return void 0==C.offset&&(C.offset=null),void 0==C.easing&&(C.easing="linear"),C});l=!0;for(var u=-1/0,w=0;w<q.length;w++){var y=q[w].offset;if(null!=y){if(y<u)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");u=y}else l=!1}return q=q.filter(function(A){return 0<=A.offset&&
1>=A.offset}),l||p(),q}})(f);(function(n){var a={};n.isDeprecated=function(d,k,b,e){e=e?"are":"is";var l=new Date;k=new Date(k);return k.setMonth(k.getMonth()+3),!(l<k&&(d in a||console.warn("Web Animations: "+d+" "+e+" deprecated and will stop working on "+k.toDateString()+". "+b),a[d]=!0,1))};n.deprecated=function(d,k,b,e){var l=e?"are":"is";if(n.isDeprecated(d,k,b,e))throw Error(d+" "+l+" no longer supported. "+b);}})(f);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),a=!0;if(n&&(a=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(d){void 0===n[d]&&(a=!0)})),!a)return}!function(d,k,b){function e(p){for(var q={},u=0;u<p.length;u++)for(var w in p[u])if("offset"!=w&&"easing"!=w&&"composite"!=w){var y={offset:p[u].offset,easing:p[u].easing,value:p[u][w]};q[w]=q[w]||[];q[w].push(y)}for(var A in q)if(p=q[A],0!=p[0].offset||1!=p[p.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return q}function l(p){var q=[],u;for(u in p)for(var w=p[u],y=0;y<w.length-1;y++){var A=y,C=y+1,D=w[A].offset,L=w[C].offset,I=D,S=L;0==y&&(I=-1/0,0==L&&(C=A));y==w.length-2&&(S=1/0,1==D&&(A=C));q.push({applyFrom:I,applyTo:S,startOffset:w[A].offset,endOffset:w[C].offset,easingFunction:d.parseEasingFunction(w[A].easing),property:u,interpolation:k.propertyInterpolation(u,w[A].value,w[C].value)})}return q.sort(function(V,ba){return V.startOffset-ba.startOffset}),
q}k.convertEffectInput=function(p){p=d.normalizeKeyframes(p);var q=e(p),u=l(q);return function(w,y){if(null!=y)u.filter(function(C){return y>=C.applyFrom&&y<C.applyTo}).forEach(function(C){var D=y-C.startOffset,L=C.endOffset-C.startOffset;D=0==L?0:C.easingFunction(D/L);k.apply(w,C.property,C.interpolation(D))});else for(var A in q)"offset"!=A&&"easing"!=A&&"composite"!=A&&k.clear(w,A)}}}(f,m);(function(d,k,b){function e(q){return q.replace(/-(.)/g,function(u,w){return w.toUpperCase()})}var l={};k.addPropertiesHandler=
function(q,u,w){for(var y=0;y<w.length;y++){var A=q,C=u,D=e(w[y]);l[D]=l[D]||[];l[D].push([A,C])}};var p={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};k.propertyInterpolation=function(q,u,w){var y=q;/-/.test(q)&&!d.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(y=e(q));"initial"!=u&&"initial"!=w||("initial"==u&&(u=p[y]),"initial"==w&&(w=p[y]));q=u==w?[]:l[y];for(y=0;q&&y<q.length;y++){var A=q[y][0](u),C=q[y][0](w);if(void 0!==A&&void 0!==C&&(A=
q[y][1](A,C))){var D=k.Interpolation.apply(null,A);return function(L){return 0==L?u:1==L?w:D(L)}}}return k.Interpolation(!1,!0,function(L){return L?w:u})}})(f,m);(function(d,k,b){function e(l){var p=d.calculateActiveDuration(l),q=function(u){return d.calculateIterationProgress(p,u,l)};return q._totalDuration=l.delay+p+l.endDelay,q}k.KeyframeEffect=function(l,p,q,u){var w,y=e(d.normalizeTimingInput(q)),A=k.convertEffectInput(p);p=function(){A(l,w)};return p._update=function(C){return null!==(w=y(C))},
p._clear=function(){A(l,null)},p._hasSameTarget=function(C){return l===C},p._target=l,p._totalDuration=y._totalDuration,p._id=u,p}})(f,m);(function(d,k){function b(A,C,D){D.enumerable=!0;D.configurable=!0;Object.defineProperty(A,C,D)}function e(A){(this||dc)._element=A;(this||dc)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||dc)._style=A.style;(this||dc)._length=0;(this||dc)._isAnimatedProperty={};var C=window;A=!(!A.namespaceURI||-1==A.namespaceURI.indexOf("/svg"))&&
(p in C||(C[p]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(C.navigator.userAgent)),C[p]);(this||dc)._updateSvgTransformAttr=A;(this||dc)._savedTransformAttr=null;for(A=0;A<(this||dc)._style.length;A++)C=(this||dc)._style[A],(this||dc)._surrogateStyle[C]=(this||dc)._style[C];this._updateIndices()}function l(A){if(!A._webAnimationsPatchedStyle){var C=new e(A);try{b(A,"style",{get:function(){return C}})}catch(D){A.style._set=function(L,I){A.style[L]=I},A.style._clear=function(L){A.style[L]=""}}A._webAnimationsPatchedStyle=
A.style}}var p="_webAnimationsUpdateSvgTransformAttr";k={cssText:1,length:1,parentRule:1};var q={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},u={removeProperty:1,setProperty:1};e.prototype={get cssText(){return(this||dc)._surrogateStyle.cssText},set cssText(A){for(var C={},D=0;D<(this||dc)._surrogateStyle.length;D++)C[(this||dc)._surrogateStyle[D]]=!0;(this||dc)._surrogateStyle.cssText=A;this._updateIndices();for(D=0;D<(this||dc)._surrogateStyle.length;D++)C[(this||
dc)._surrogateStyle[D]]=!0;for(var L in C)(this||dc)._isAnimatedProperty[L]||(this||dc)._style.setProperty(L,(this||dc)._surrogateStyle.getPropertyValue(L))},get length(){return(this||dc)._surrogateStyle.length},get parentRule(){return(this||dc)._style.parentRule},_updateIndices:function(){for(;(this||dc)._length<(this||dc)._surrogateStyle.length;)Object.defineProperty(this||dc,(this||dc)._length,{configurable:!0,enumerable:!1,get:function(A){return function(){return(this||dc)._surrogateStyle[A]}}((this||
dc)._length)}),(this||dc)._length++;for(;(this||dc)._length>(this||dc)._surrogateStyle.length;)(this||dc)._length--,Object.defineProperty(this||dc,(this||dc)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(A,C){(this||dc)._style[A]=C;(this||dc)._isAnimatedProperty[A]=!0;(this||dc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(A)&&(null==(this||dc)._savedTransformAttr&&((this||dc)._savedTransformAttr=(this||dc)._element.getAttribute("transform")),(this||dc)._element.setAttribute("transform",
d.transformToSvgMatrix(C)))},_clear:function(A){(this||dc)._style[A]=(this||dc)._surrogateStyle[A];(this||dc)._updateSvgTransformAttr&&"transform"==d.unprefixedPropertyName(A)&&((this||dc)._savedTransformAttr?(this||dc)._element.setAttribute("transform",(this||dc)._savedTransformAttr):(this||dc)._element.removeAttribute("transform"),(this||dc)._savedTransformAttr=null);delete (this||dc)._isAnimatedProperty[A]}};for(var w in q)e.prototype[w]=function(A,C){return function(){var D=(this||dc)._surrogateStyle[A].apply((this||
dc)._surrogateStyle,arguments);return C&&((this||dc)._isAnimatedProperty[arguments[0]]||(this||dc)._style[A].apply((this||dc)._style,arguments),this._updateIndices()),D}}(w,w in u);for(var y in document.documentElement.style)y in k||y in q||function(A){b(e.prototype,A,{get:function(){return(this||dc)._surrogateStyle[A]},set:function(C){(this||dc)._surrogateStyle[A]=C;this._updateIndices();(this||dc)._isAnimatedProperty[A]||((this||dc)._style[A]=C)}})}(y);d.apply=function(A,C,D){l(A);A.style._set(d.propertyName(C),
D)};d.clear=function(A,C){A._webAnimationsPatchedStyle&&A.style._clear(d.propertyName(C))}})(m);(function(d){window.Element.prototype.animate=function(k,b){var e="";return b&&b.id&&(e=b.id),d.timeline._play(d.KeyframeEffect(this||dc,k,b,e))}})(m);(function(d,k){function b(e,l,p){if("number"==typeof e&&"number"==typeof l)return e*(1-p)+l*p;if("boolean"==typeof e&&"boolean"==typeof l)return.5>p?e:l;if(e.length==l.length){for(var q=[],u=0;u<e.length;u++)q.push(b(e[u],l[u],p));return q}throw"Mismatched interpolation arguments "+
e+":"+l;}d.Interpolation=function(e,l,p){return function(q){return p(b(e,l,q))}}})(m);(function(d,k){k=function(){function b(e,l){for(var p=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],q=0;4>q;q++)for(var u=0;4>u;u++)for(var w=0;4>w;w++)p[q][u]+=l[q][w]*e[w][u];return p}return function(e,l,p,q,u){for(var w=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=0;4>y;y++)w[y][3]=u[y];for(y=0;3>y;y++)for(u=0;3>u;u++)w[3][y]+=e[u]*w[u][y];e=q[0];y=q[1];u=q[2];q=q[3];var A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
A[0][0]=1-2*(y*y+u*u);A[0][1]=2*(e*y-u*q);A[0][2]=2*(e*u+y*q);A[1][0]=2*(e*y+u*q);A[1][1]=1-2*(e*e+u*u);A[1][2]=2*(y*u-e*q);A[2][0]=2*(e*u-y*q);A[2][1]=2*(y*u+e*q);A[2][2]=1-2*(e*e+y*y);w=b(w,A);q=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];p[2]&&(q[2][1]=p[2],w=b(w,q));p[1]&&(q[2][1]=0,q[2][0]=p[0],w=b(w,q));p[0]&&(q[2][0]=0,q[1][0]=p[0],w=b(w,q));for(y=0;3>y;y++)for(u=0;3>u;u++)w[y][u]*=l[y];return 0==w[0][2]&&0==w[0][3]&&0==w[1][2]&&0==w[1][3]&&0==w[2][0]&&0==w[2][1]&&1==w[2][2]&&0==w[2][3]&&0==
w[3][2]&&1==w[3][3]?[w[0][0],w[0][1],w[1][0],w[1][1],w[3][0],w[3][1]]:w[0].concat(w[1],w[2],w[3])}}();d.composeMatrix=k;d.quat=function(b,e,l){var p=d.dot(b,e);p=Math.max(Math.min(p,1),-1);var q=[];if(1===p)q=b;else for(var u=Math.acos(p),w=1*Math.sin(l*u)/Math.sqrt(1-p*p),y=0;4>y;y++)q.push(b[y]*(Math.cos(l*u)-p*w)+e[y]*w);return q}})(m);(function(d,k,b){d.sequenceNumber=0;var e=function(l,p,q){(this||dc).target=l;(this||dc).currentTime=p;(this||dc).timelineTime=q;(this||dc).type="finish";(this||
dc).bubbles=!1;(this||dc).cancelable=!1;(this||dc).currentTarget=l;(this||dc).defaultPrevented=!1;(this||dc).eventPhase=Event.AT_TARGET;(this||dc).timeStamp=Date.now()};k.Animation=function(l){(this||dc).id="";l&&l._id&&((this||dc).id=l._id);(this||dc)._sequenceNumber=d.sequenceNumber++;(this||dc)._currentTime=0;(this||dc)._startTime=null;(this||dc)._paused=!1;(this||dc)._playbackRate=1;(this||dc)._inTimeline=!0;(this||dc)._finishedFlag=!0;(this||dc).onfinish=null;(this||dc)._finishHandlers=[];(this||
dc)._effect=l;(this||dc)._inEffect=(this||dc)._effect._update(0);(this||dc)._idle=!0;(this||dc)._currentTimePending=!1};k.Animation.prototype={_ensureAlive:function(){0>(this||dc).playbackRate&&0===(this||dc).currentTime?(this||dc)._inEffect=(this||dc)._effect._update(-1):(this||dc)._inEffect=(this||dc)._effect._update((this||dc).currentTime);(this||dc)._inTimeline||!(this||dc)._inEffect&&(this||dc)._finishedFlag||((this||dc)._inTimeline=!0,k.timeline._animations.push(this||dc))},_tickCurrentTime:function(l,
p){l!=(this||dc)._currentTime&&((this||dc)._currentTime=l,(this||dc)._isFinished&&!p&&((this||dc)._currentTime=0<(this||dc)._playbackRate?(this||dc)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||dc)._idle||(this||dc)._currentTimePending?null:(this||dc)._currentTime},set currentTime(l){l=+l;isNaN(l)||(k.restart(),(this||dc)._paused||null==(this||dc)._startTime||((this||dc)._startTime=(this||dc)._timeline.currentTime-l/(this||dc)._playbackRate),(this||dc)._currentTimePending=
!1,(this||dc)._currentTime!=l&&((this||dc)._idle&&((this||dc)._idle=!1,(this||dc)._paused=!0),this._tickCurrentTime(l,!0),k.applyDirtiedAnimation(this||dc)))},get startTime(){return(this||dc)._startTime},set startTime(l){l=+l;isNaN(l)||(this||dc)._paused||(this||dc)._idle||((this||dc)._startTime=l,this._tickCurrentTime(((this||dc)._timeline.currentTime-(this||dc)._startTime)*(this||dc).playbackRate),k.applyDirtiedAnimation(this||dc))},get playbackRate(){return(this||dc)._playbackRate},set playbackRate(l){if(l!=
(this||dc)._playbackRate){var p=(this||dc).currentTime;(this||dc)._playbackRate=l;(this||dc)._startTime=null;"paused"!=(this||dc).playState&&"idle"!=(this||dc).playState&&((this||dc)._finishedFlag=!1,(this||dc)._idle=!1,this._ensureAlive(),k.applyDirtiedAnimation(this||dc));null!=p&&((this||dc).currentTime=p)}},get _isFinished(){return!(this||dc)._idle&&(0<(this||dc)._playbackRate&&(this||dc)._currentTime>=(this||dc)._totalDuration||0>(this||dc)._playbackRate&&0>=(this||dc)._currentTime)},get _totalDuration(){return(this||
dc)._effect._totalDuration},get playState(){return(this||dc)._idle?"idle":null==(this||dc)._startTime&&!(this||dc)._paused&&0!=(this||dc).playbackRate||(this||dc)._currentTimePending?"pending":(this||dc)._paused?"paused":(this||dc)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||dc)._playbackRate)(this||dc)._currentTime=0;else{if(!((this||dc)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||dc)._currentTime=(this||dc)._totalDuration}},play:function(){(this||dc)._paused=!1;((this||dc)._isFinished||(this||dc)._idle)&&(this._rewind(),(this||dc)._startTime=null);(this||dc)._finishedFlag=!1;(this||dc)._idle=!1;this._ensureAlive();k.applyDirtiedAnimation(this||dc)},pause:function(){(this||dc)._isFinished||(this||dc)._paused||(this||dc)._idle?(this||dc)._idle&&(this._rewind(),(this||dc)._idle=!1):(this||dc)._currentTimePending=!0;(this||dc)._startTime=null;(this||dc)._paused=!0},finish:function(){(this||
dc)._idle||((this||dc).currentTime=0<(this||dc)._playbackRate?(this||dc)._totalDuration:0,(this||dc)._startTime=(this||dc)._totalDuration-(this||dc).currentTime,(this||dc)._currentTimePending=!1,k.applyDirtiedAnimation(this||dc))},cancel:function(){(this||dc)._inEffect&&((this||dc)._inEffect=!1,(this||dc)._idle=!0,(this||dc)._paused=!1,(this||dc)._finishedFlag=!0,(this||dc)._currentTime=0,(this||dc)._startTime=null,(this||dc)._effect._update(null),k.applyDirtiedAnimation(this||dc))},reverse:function(){(this||
dc).playbackRate*=-1;this.play()},addEventListener:function(l,p){"function"==typeof p&&"finish"==l&&(this||dc)._finishHandlers.push(p)},removeEventListener:function(l,p){"finish"==l&&(l=(this||dc)._finishHandlers.indexOf(p),0<=l&&(this||dc)._finishHandlers.splice(l,1))},_fireEvents:function(l){if((this||dc)._isFinished){if(!(this||dc)._finishedFlag){var p=new e(this||dc,(this||dc)._currentTime,l),q=(this||dc)._finishHandlers.concat((this||dc).onfinish?[(this||dc).onfinish]:[]);setTimeout(function(){q.forEach(function(u){u.call(p.target,
p)})},0);(this||dc)._finishedFlag=!0}}else(this||dc)._finishedFlag=!1},_tick:function(l,p){(this||dc)._idle||(this||dc)._paused||(null==(this||dc)._startTime?p&&((this||dc).startTime=l-(this||dc)._currentTime/(this||dc).playbackRate):(this||dc)._isFinished||this._tickCurrentTime((l-(this||dc)._startTime)*(this||dc).playbackRate));p&&((this||dc)._currentTimePending=!1,this._fireEvents(l))},get _needsTick(){return(this||dc).playState in{pending:1,running:1}||!(this||dc)._finishedFlag},_targetAnimations:function(){var l=
(this||dc)._effect._target;return l._activeAnimations||(l._activeAnimations=[]),l._activeAnimations},_markTarget:function(){var l=this._targetAnimations();-1===l.indexOf(this||dc)&&l.push(this||dc)},_unmarkTarget:function(){var l=this._targetAnimations(),p=l.indexOf(this||dc);-1!==p&&l.splice(p,1)}}})(f,m);(function(d,k,b){function e(V){var ba=y;y=[];V<S.currentTime&&(V=S.currentTime);S._animations.sort(l);S._animations=u(V,!0,S._animations)[0];ba.forEach(function(ua){ua[1](V)});q()}function l(V,
ba){return V._sequenceNumber-ba._sequenceNumber}function p(){(this||dc)._animations=[];(this||dc).currentTime=window.performance&&performance.now?performance.now():0}function q(){L.forEach(function(V){V()});L.length=0}function u(V,ba,ua){I=!0;D=!1;k.timeline.currentTime=V;C=!1;var Fa=[],F=[],Y=[],Q=[];return ua.forEach(function(W){W._tick(V,ba);W._inEffect?(F.push(W._effect),W._markTarget()):(Fa.push(W._effect),W._unmarkTarget());W._needsTick&&(C=!0);var ka=W._inEffect||W._needsTick;(W._inTimeline=
ka)?Y.push(W):Q.push(W)}),L.push.apply(L,Fa),L.push.apply(L,F),C&&requestAnimationFrame(function(){}),I=!1,[Y,Q]}var w=window.requestAnimationFrame,y=[],A=0;window.requestAnimationFrame=function(V){var ba=A++;return 0==y.length&&w(e),y.push([ba,V]),ba};window.cancelAnimationFrame=function(V){y.forEach(function(ba){ba[0]==V&&(ba[1]=function(){})})};p.prototype={_play:function(V){V._timing=d.normalizeTimingInput(V.timing);V=new k.Animation(V);return V._idle=!1,V._timeline=this||dc,(this||dc)._animations.push(V),
k.restart(),k.applyDirtiedAnimation(V),V}};var C=!1,D=!1;k.restart=function(){return C||(C=!0,requestAnimationFrame(function(){}),D=!0),D};k.applyDirtiedAnimation=function(V){I||(V._markTarget(),V=V._targetAnimations(),V.sort(l),u(k.timeline.currentTime,!1,V.slice())[1].forEach(function(ba){ba=S._animations.indexOf(ba);-1!==ba&&S._animations.splice(ba,1)}),q())};var L=[],I=!1,S=new p;k.timeline=S})(f,m);(function(d,k){function b(w,y){for(var A=0,C=0;C<w.length;C++)A+=w[C]*y[C];return A}function e(w,
y){return[w[0]*y[0]+w[4]*y[1]+w[8]*y[2]+w[12]*y[3],w[1]*y[0]+w[5]*y[1]+w[9]*y[2]+w[13]*y[3],w[2]*y[0]+w[6]*y[1]+w[10]*y[2]+w[14]*y[3],w[3]*y[0]+w[7]*y[1]+w[11]*y[2]+w[15]*y[3],w[0]*y[4]+w[4]*y[5]+w[8]*y[6]+w[12]*y[7],w[1]*y[4]+w[5]*y[5]+w[9]*y[6]+w[13]*y[7],w[2]*y[4]+w[6]*y[5]+w[10]*y[6]+w[14]*y[7],w[3]*y[4]+w[7]*y[5]+w[11]*y[6]+w[15]*y[7],w[0]*y[8]+w[4]*y[9]+w[8]*y[10]+w[12]*y[11],w[1]*y[8]+w[5]*y[9]+w[9]*y[10]+w[13]*y[11],w[2]*y[8]+w[6]*y[9]+w[10]*y[10]+w[14]*y[11],w[3]*y[8]+w[7]*y[9]+w[11]*y[10]+
w[15]*y[11],w[0]*y[12]+w[4]*y[13]+w[8]*y[14]+w[12]*y[15],w[1]*y[12]+w[5]*y[13]+w[9]*y[14]+w[13]*y[15],w[2]*y[12]+w[6]*y[13]+w[10]*y[14]+w[14]*y[15],w[3]*y[12]+w[7]*y[13]+w[11]*y[14]+w[15]*y[15]]}function l(w){return 2*((w.deg||0)/360+(w.grad||0)/400+(w.turn||0))*Math.PI+(w.rad||0)}function p(w){switch(w.t){case "rotatex":return w=l(w.d[0]),[1,0,0,0,0,Math.cos(w),Math.sin(w),0,0,-Math.sin(w),Math.cos(w),0,0,0,0,1];case "rotatey":return w=l(w.d[0]),[Math.cos(w),0,-Math.sin(w),0,0,1,0,0,Math.sin(w),
0,Math.cos(w),0,0,0,0,1];case "rotate":case "rotatez":return w=l(w.d[0]),[Math.cos(w),Math.sin(w),0,0,-Math.sin(w),Math.cos(w),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var y=w.d[0],A=w.d[1],C=w.d[2];w=l(w.d[3]);var D=y*y+A*A+C*C;0===D?(y=1,C=A=0):1!==D&&(D=Math.sqrt(D),y/=D,A/=D,C/=D);D=Math.sin(w/2);w=D*Math.cos(w/2);D*=D;return[1-2*(A*A+C*C)*D,2*(y*A*D+C*w),2*(y*C*D-A*w),0,2*(y*A*D-C*w),1-2*(y*y+C*C)*D,2*(A*C*D+y*w),0,2*(y*C*D+A*w),2*(A*C*D-y*w),1-2*(y*y+A*A)*D,0,0,0,0,1];case "scale":return[w.d[0],
0,0,0,0,w.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[w.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,w.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,w.d[0],0,0,0,0,1];case "scale3d":return[w.d[0],0,0,0,0,w.d[1],0,0,0,0,w.d[2],0,0,0,0,1];case "skew":return y=l(w.d[0]),A=l(w.d[1]),[1,Math.tan(A),0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return w=l(w.d[0]),[1,0,0,0,Math.tan(w),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return w=l(w.d[0]),[1,Math.tan(w),
0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return y=w.d[0].px||0,A=w.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,A,0,1];case "translatex":return y=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,0,0,1];case "translatey":return A=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,A,0,1];case "translatez":return C=w.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,C,1];case "translate3d":return y=w.d[0].px||0,A=w.d[1].px||0,C=w.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,A,C,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,w.d[0].px?
-1/w.d[0].px:0,0,0,0,1];case "matrix":return[w.d[0],w.d[1],0,0,w.d[2],w.d[3],0,0,0,0,1,0,w.d[4],w.d[5],0,1];case "matrix3d":return w.d}}function q(w){return 0===w.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:w.map(p).reduce(e)}var u=function(){function w(D){return D[0][0]*D[1][1]*D[2][2]+D[1][0]*D[2][1]*D[0][2]+D[2][0]*D[0][1]*D[1][2]-D[0][2]*D[1][1]*D[2][0]-D[1][2]*D[2][1]*D[0][0]-D[2][2]*D[0][1]*D[1][0]}function y(D){var L=A(D);return[D[0]/L,D[1]/L,D[2]/L]}function A(D){return Math.sqrt(D[0]*D[0]+D[1]*
D[1]+D[2]*D[2])}function C(D,L,I,S){return[I*D[0]+S*L[0],I*D[1]+S*L[1],I*D[2]+S*L[2]]}return function(D){D=[D.slice(0,4),D.slice(4,8),D.slice(8,12),D.slice(12,16)];if(1!==D[3][3])return null;for(var L=[],I=0;4>I;I++)L.push(D[I].slice());for(I=0;3>I;I++)L[I][3]=0;if(0===w(L))return null;var S=[];if(D[0][3]||D[1][3]||D[2][3]){S.push(D[0][3]);S.push(D[1][3]);S.push(D[2][3]);S.push(D[3][3]);var V=1/w(L),ba=L[0][0],ua=L[0][1];I=L[0][2];var Fa=L[1][0],F=L[1][1],Y=L[1][2],Q=L[2][0],W=L[2][1],ka=L[2][2];
V=[[(F*ka-Y*W)*V,(I*W-ua*ka)*V,(ua*Y-I*F)*V,0],[(Y*Q-Fa*ka)*V,(ba*ka-I*Q)*V,(I*Fa-ba*Y)*V,0],[(Fa*W-F*Q)*V,(Q*ua-ba*W)*V,(ba*F-ua*Fa)*V,0]];ba=[];for(ua=0;3>ua;ua++){for(Fa=I=0;3>Fa;Fa++)I+=L[3][Fa]*V[Fa][ua];ba.push(I)}L=(ba.push(1),V.push(ba),V);L=[[L[0][0],L[1][0],L[2][0],L[3][0]],[L[0][1],L[1][1],L[2][1],L[3][1]],[L[0][2],L[1][2],L[2][2],L[3][2]],[L[0][3],L[1][3],L[2][3],L[3][3]]];V=[];for(ba=0;4>ba;ba++){for(I=ua=0;4>I;I++)ua+=S[I]*L[I][ba];V.push(ua)}S=V}else S=[0,0,0,1];L=D[3].slice(0,3);V=
[];V.push(D[0].slice(0,3));ba=[];ba.push(A(V[0]));V[0]=y(V[0]);ua=[];V.push(D[1].slice(0,3));ua.push(b(V[0],V[1]));V[1]=C(V[1],V[0],1,-ua[0]);ba.push(A(V[1]));V[1]=y(V[1]);ua[0]/=ba[1];V.push(D[2].slice(0,3));ua.push(b(V[0],V[2]));V[2]=C(V[2],V[0],1,-ua[1]);ua.push(b(V[1],V[2]));V[2]=C(V[2],V[1],1,-ua[2]);ba.push(A(V[2]));V[2]=y(V[2]);ua[1]/=ba[2];ua[2]/=ba[2];D=V[1];I=V[2];if(0>b(V[0],[D[1]*I[2]-D[2]*I[1],D[2]*I[0]-D[0]*I[2],D[0]*I[1]-D[1]*I[0]]))for(I=0;3>I;I++)ba[I]*=-1,V[I][0]*=-1,V[I][1]*=-1,
V[I][2]*=-1;var ea,la;D=V[0][0]+V[1][1]+V[2][2]+1;return 1E-4<D?(ea=.5/Math.sqrt(D),la=[(V[2][1]-V[1][2])*ea,(V[0][2]-V[2][0])*ea,(V[1][0]-V[0][1])*ea,.25/ea]):V[0][0]>V[1][1]&&V[0][0]>V[2][2]?(ea=2*Math.sqrt(1+V[0][0]-V[1][1]-V[2][2]),la=[.25*ea,(V[0][1]+V[1][0])/ea,(V[0][2]+V[2][0])/ea,(V[2][1]-V[1][2])/ea]):V[1][1]>V[2][2]?(ea=2*Math.sqrt(1+V[1][1]-V[0][0]-V[2][2]),la=[(V[0][1]+V[1][0])/ea,.25*ea,(V[1][2]+V[2][1])/ea,(V[0][2]-V[2][0])/ea]):(ea=2*Math.sqrt(1+V[2][2]-V[0][0]-V[1][1]),la=[(V[0][2]+
V[2][0])/ea,(V[1][2]+V[2][1])/ea,.25*ea,(V[1][0]-V[0][1])/ea]),[L,ba,ua,la,S]}}();d.dot=b;d.makeMatrixDecomposition=function(w){return[u(q(w))]};d.transformListToMatrix=q})(m);(function(d){function k(p,q){var u=p.exec(q);if(u)return u=p.ignoreCase?u[0].toLowerCase():u[0],[u,q.substr(u.length)]}function b(p,q){q=q.replace(/^\s*/,"");if(p=p(q))return[p[0],p[1].replace(/^\s*/,"")]}function e(p,q){for(var u=p,w=q;u&&w;)u>w?u%=w:w%=u;return p*q/(u+w)}function l(p,q,u,w,y){for(var A=[],C=[],D=[],L=e(w.length,
y.length),I=0;I<L;I++){var S=q(w[I%w.length],y[I%y.length]);if(!S)return;A.push(S[0]);C.push(S[1]);D.push(S[2])}return[A,C,function(V){V=V.map(function(ba,ua){return D[ua](ba)}).join(u);return p?p(V):V}]}d.consumeToken=k;d.consumeTrimmed=b;d.consumeRepeated=function(p,q,u){p=b.bind(null,p);for(var w=[];;){var y=p(u);if(!y||(w.push(y[0]),u=y[1],!(y=k(q,u))||""==y[1]))return[w,u];u=y[1]}};d.consumeParenthesised=function(p,q){for(var u=0,w=0;w<q.length&&(!/\s|,/.test(q[w])||0!=u);w++)if("("==q[w])u++;
else if(")"==q[w]&&(u--,0==u&&w++,0>=u))break;p=p(q.substr(0,w));return void 0==p?void 0:[p,q.substr(w)]};d.ignore=function(p){return function(q){q=p(q);return q&&(q[0]=void 0),q}};d.optional=function(p,q){return function(u){return p(u)||[q,u]}};d.consumeList=function(p,q){for(var u=[],w=0;w<p.length;w++){q=d.consumeTrimmed(p[w],q);if(!q||""==q[0])return;void 0!==q[0]&&u.push(q[0]);q=q[1]}if(""==q)return u};d.mergeNestedRepeated=l.bind(null,null);d.mergeWrappedNestedRepeated=l;d.mergeList=function(p,
q,u){for(var w=[],y=[],A=[],C=0,D=0;D<u.length;D++)if("function"==typeof u[D]){var L=u[D](p[C],q[C++]);w.push(L[0]);y.push(L[1]);A.push(L[2])}else!function(I){w.push(!1);y.push(!1);A.push(function(){return u[I]})}(D);return[w,y,function(I){for(var S="",V=0;V<I.length;V++)S+=A[V](I[V]);return S}]}})(m);(function(d){function k(e){var l={inset:!1,lengths:[],color:null};if((e=d.consumeRepeated(function(p){var q=d.consumeToken(/^inset/i,p);return q?(l.inset=!0,q):(q=d.consumeLengthOrPercent(p))?(l.lengths.push(q[0]),
q):(q=d.consumeColor(p),q?(l.color=q[0],q):void 0)},/^/,e))&&e[0].length)return[l,e[1]]}var b=function(e,l,p,q){function u(L){return{inset:L,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var w=[],y=[],A=0;A<p.length||A<q.length;A++){var C=p[A]||u(q[A].inset),D=q[A]||u(p[A].inset);w.push(C);y.push(D)}return d.mergeNestedRepeated(e,l,w,y)}.bind(null,function(e,l){for(;e.lengths.length<Math.max(e.lengths.length,l.lengths.length);)e.lengths.push({px:0});for(;l.lengths.length<Math.max(e.lengths.length,
l.lengths.length);)l.lengths.push({px:0});if(e.inset==l.inset&&!!e.color==!!l.color){for(var p,q=[],u=[[],0],w=[[],0],y=0;y<e.lengths.length;y++){var A=d.mergeDimensions(e.lengths[y],l.lengths[y],2==y);u[0].push(A[0]);w[0].push(A[1]);q.push(A[2])}e.color&&l.color&&(l=d.mergeColors(e.color,l.color),u[1]=l[0],w[1]=l[1],p=l[2]);return[u,w,function(C){for(var D=e.inset?"inset ":" ",L=0;L<q.length;L++)D+=q[L](C[0][L])+" ";return p&&(D+=p(C[1])),D}]}},", ");d.addPropertiesHandler(function(e){if((e=d.consumeRepeated(k,
/^,/,e))&&""==e[1])return e[0]},b,["box-shadow","text-shadow"])})(m);(function(d,k){function b(u){return u.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function e(u,w,y){return Math.min(w,Math.max(u,y))}function l(u){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(u))return Number(u)}function p(u,w){return function(y,A){return[y,A,function(C){return b(e(u,w,C))}]}}function q(u){u=u.trim().split(/\s*[\s,]\s*/);if(0!==u.length){for(var w=[],y=0;y<u.length;y++){var A=l(u[y]);if(void 0===A)return;w.push(A)}return w}}
d.clamp=e;d.addPropertiesHandler(q,function(u,w){if(u.length==w.length)return[u,w,function(y){return y.map(b).join(" ")}]},["stroke-dasharray"]);d.addPropertiesHandler(l,p(0,1/0),["border-image-width","line-height"]);d.addPropertiesHandler(l,p(0,1),["opacity","shape-image-threshold"]);d.addPropertiesHandler(l,function(u,w){if(0!=u)return p(0,1/0)(u,w)},["flex-grow","flex-shrink"]);d.addPropertiesHandler(l,function(u,w){return[u,w,function(y){return Math.round(e(1,1/0,y))}]},["orphans","widows"]);
d.addPropertiesHandler(l,function(u,w){return[u,w,Math.round]},["z-index"]);d.parseNumber=l;d.parseNumberList=q;d.mergeNumbers=function(u,w){return[u,w,b]};d.numberToString=b})(m);(function(d,k){d.addPropertiesHandler(String,function(b,e){if("visible"==b||"visible"==e)return[0,1,function(l){return 0>=l?b:1<=l?e:"visible"}]},["visibility"])})(m);(function(d,k){function b(p){p=p.trim();l.fillStyle="#000";l.fillStyle=p;var q=l.fillStyle;if(l.fillStyle="#fff",l.fillStyle=p,q==l.fillStyle)return l.fillRect(0,
0,1,1),p=l.getImageData(0,0,1,1).data,l.clearRect(0,0,1,1),q=p[3]/255,[p[0]*q,p[1]*q,p[2]*q,q]}function e(p,q){return[p,q,function(u){if(u[3])for(var w=0;3>w;w++)u[w]=Math.round(Math.max(0,Math.min(255,u[w]/u[3])));return u[3]=d.numberToString(d.clamp(0,1,u[3])),"rgba("+u.join(",")+")"}]}k=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");k.width=k.height=1;var l=k.getContext("2d");d.addPropertiesHandler(b,e,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));
d.consumeColor=d.consumeParenthesised.bind(null,b);d.mergeColors=e})(m);(function(d,k){function b(y){function A(){var V=S.exec(y);I=V?V[0]:void 0}function C(){if("("!==I){var V=Number(I);return A(),V}A();V=L();return")"!==I?NaN:(A(),V)}function D(){for(var V=C();"*"===I||"/"===I;){var ba=I;A();var ua=C();"*"===ba?V*=ua:V/=ua}return V}function L(){for(var V=D();"+"===I||"-"===I;){var ba=I;A();var ua=D();"+"===ba?V+=ua:V-=ua}return V}var I,S=/([\+\-\w\.]+|[\(\)\*\/])/g;return A(),L()}function e(y,A){if("0"==
(A=A.trim().toLowerCase())&&0<="px".search(y))return{px:0};if(/^[^(]*$|^calc/.test(A)){A=A.replace(/calc\(/g,"(");var C={};A=A.replace(y,function(V){return C[V]=null,"U"+V});y="U("+y.source+")";for(var D=A.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+y,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),L=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],I=0;I<L.length;)L[I].test(D)?(D=D.replace(L[I],"$1"),I=0):I++;if("D"==D){for(var S in C){D=b(A.replace(new RegExp("U"+
S,"g"),"").replace(new RegExp(y,"g"),"*0"));if(!isFinite(D))return;C[S]=D}return C}}}function l(y,A){return p(y,A,!0)}function p(y,A,C){var D,L=[];for(D in y)L.push(D);for(D in A)0>L.indexOf(D)&&L.push(D);return y=L.map(function(I){return y[I]||0}),A=L.map(function(I){return A[I]||0}),[y,A,function(I){var S=I.map(function(V,ba){return 1==I.length&&C&&(V=Math.max(V,0)),d.numberToString(V)+L[ba]}).join(" + ");return 1<I.length?"calc("+S+")":S}]}var q=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);
k=e.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);var u=e.bind(null,/deg|rad|grad|turn/g);d.parseLength=q;d.parseLengthOrPercent=k;d.consumeLengthOrPercent=d.consumeParenthesised.bind(null,k);d.parseAngle=u;d.mergeDimensions=p;q=d.consumeParenthesised.bind(null,q);q=d.consumeRepeated.bind(void 0,q,/^/);var w=d.consumeRepeated.bind(void 0,q,/^,/);d.consumeSizePairList=w;q=d.mergeNestedRepeated.bind(void 0,l," ");u=d.mergeNestedRepeated.bind(void 0,q,",");d.mergeNonNegativeSizePair=
q;d.addPropertiesHandler(function(y){if((y=w(y))&&""==y[1])return y[0]},u,["background-size"]);d.addPropertiesHandler(k,l,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));d.addPropertiesHandler(k,p,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(m);
(function(d,k){function b(l){return d.consumeLengthOrPercent(l)||d.consumeToken(/^auto/,l)}function e(l){if((l=d.consumeList([d.ignore(d.consumeToken.bind(null,/^rect/)),d.ignore(d.consumeToken.bind(null,/^\(/)),d.consumeRepeated.bind(null,b,/^,/),d.ignore(d.consumeToken.bind(null,/^\)/))],l))&&4==l[0].length)return l[0]}k=d.mergeWrappedNestedRepeated.bind(null,function(l){return"rect("+l+")"},function(l,p){return"auto"==l||"auto"==p?[!0,!1,function(q){q=q?l:p;if("auto"==q)return"auto";q=d.mergeDimensions(q,
q);return q[2](q[0])}]:d.mergeDimensions(l,p)},", ");d.parseBox=e;d.mergeBoxes=k;d.addPropertiesHandler(e,k,["clip"])})(m);(function(d,k){function b(D){return function(L){var I=0;return D.map(function(S){return S===w?L[I++]:S})}}function e(D){return D}function l(D){if("none"==(D=D.toLowerCase().trim()))return[];for(var L,I=/\s*(\w+)\(([^)]*)\)/g,S=[],V=0;(L=I.exec(D))&&L.index==V;){V=L.index+L[0].length;var ba=L[1],ua=C[ba];if(!ua)break;L=L[2].split(",");ua=ua[0];if(ua.length<L.length)break;for(var Fa=
[],F=0;F<ua.length;F++){var Y=L[F];var Q=ua[F];if(void 0===(Y=Y?{A:function(W){return"0"==W.trim()?A:d.parseAngle(W)},N:d.parseNumber,T:d.parseLengthOrPercent,L:d.parseLength}[Q.toUpperCase()](Y):{a:A,n:Fa[0],t:y}[Q]))return;Fa.push(Y)}if(S.push({t:ba,d:Fa}),I.lastIndex==D.length)return S}}function p(D){return D.toFixed(6).replace(".000000","")}function q(D,L){if(D.decompositionPair!==L){D.decompositionPair=L;var I=d.makeMatrixDecomposition(D)}if(L.decompositionPair!==D){L.decompositionPair=D;var S=
d.makeMatrixDecomposition(L)}return null==I[0]||null==S[0]?[[!1],[!0],function(V){return V?L[0].d:D[0].d}]:(I[0].push(0),S[0].push(1),[I,S,function(V){var ba=d.quat(I[0][3],S[0][3],V[5]);return d.composeMatrix(V[0],V[1],V[2],ba,V[4]).map(p).join(",")}])}function u(D){return D.replace(/(x|y|z|3d)?$/,"3d")}var w=null,y={px:0},A={deg:0},C={matrix:["NNNNNN",[w,w,0,0,w,w,0,0,0,0,1,0,w,w,0,1],e],matrix3d:["NNNNNNNNNNNNNNNN",e],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",b([w,w,1]),e],scalex:["N",b([w,1,1]),b([w,1])],scaley:["N",b([1,w,1]),b([1,w])],scalez:["N",b([1,1,w])],scale3d:["NNN",e],skew:["Aa",null,e],skewx:["A",null,b([w,A])],skewy:["A",null,b([A,w])],translate:["Tt",b([w,w,y]),e],translatex:["T",b([w,y,y]),b([w,y])],translatey:["T",b([y,w,y]),b([y,w])],translatez:["L",b([y,y,w])],translate3d:["TTL",e]};d.addPropertiesHandler(l,function(D,L){var I=d.makeMatrixDecomposition&&!0,S=!1;if(!D.length||!L.length){D.length||(S=!0,D=L,L=[]);for(var V=
0;V<D.length;V++){var ba=D[V].t,ua=D[V].d,Fa="scale"==ba.substr(0,5)?1:0;L.push({t:ba,d:ua.map(function(xa){if("number"==typeof xa)return Fa;var na={},Aa;for(Aa in xa)na[Aa]=Fa;return na})})}}ua=[];var F=[],Y=[];if(D.length!=L.length){if(!I)return;var Q=q(D,L);ua=[Q[0]];F=[Q[1]];Y=[["matrix",[Q[2]]]]}else for(V=0;V<D.length;V++){ba=D[V].t;var W=L[V].t,ka=D[V].d,ea=L[V].d;Q=C[ba];var la=C[W];if("perspective"==ba&&"perspective"==W||!("matrix"!=ba&&"matrix3d"!=ba||"matrix"!=W&&"matrix3d"!=W)){if(!I)return;
Q=q([D[V]],[L[V]]);ua.push(Q[0]);F.push(Q[1]);Y.push(["matrix",[Q[2]]])}else{if(ba!=W)if(Q[2]&&la[2]&&ba.replace(/[xy]/,"")==W.replace(/[xy]/,""))ba=ba.replace(/[xy]/,""),ka=Q[2](ka),ea=la[2](ea);else{if(!Q[1]||!la[1]||u(ba)!=u(W)){if(!I)return;Q=q(D,L);ua=[Q[0]];F=[Q[1]];Y=[["matrix",[Q[2]]]];break}ba=u(ba);ka=Q[1](ka);ea=la[1](ea)}la=[];W=[];for(var db=[],ub=0;ub<ka.length;ub++)Q=("number"==typeof ka[ub]?d.mergeNumbers:d.mergeDimensions)(ka[ub],ea[ub]),la[ub]=Q[0],W[ub]=Q[1],db.push(Q[2]);ua.push(la);
F.push(W);Y.push([ba,db])}}S&&(D=ua,ua=F,F=D);return[ua,F,function(xa){return xa.map(function(na,Aa){na=na.map(function(Pa,Da){return Y[Aa][1][Da](Pa)}).join(",");return"matrix"==Y[Aa][0]&&16==na.split(",").length&&(Y[Aa][0]="matrix3d"),Y[Aa][0]+"("+na+")"}).join(" ")}]},["transform"]);d.transformToSvgMatrix=function(D){D=d.transformListToMatrix(l(D));return"matrix("+p(D[0])+" "+p(D[1])+" "+p(D[4])+" "+p(D[5])+" "+p(D[12])+" "+p(D[13])+")"}})(m);(function(d){function k(b){return b=100*Math.round(b/
100),b=d.clamp(100,900,b),400===b?"normal":700===b?"bold":String(b)}d.addPropertiesHandler(function(b){b=Number(b);if(!(isNaN(b)||100>b||900<b||0!=b%100))return b},function(b,e){return[b,e,k]},["font-weight"])})(m);(function(d){function k(q){return d.consumeToken(/^(left|center|right|top|bottom)\b/i,q)||d.consumeLengthOrPercent(q)}function b(q,u){if((u=d.consumeRepeated(k,/^/,u))&&""==u[1]&&(u=u[0],u[0]=u[0]||"center",u[1]=u[1]||"center",3==q&&(u[2]=u[2]||{px:0}),u.length==q)){if(/top|bottom/.test(u[0])||
/left|right/.test(u[1]))q=u[0],u[0]=u[1],u[1]=q;if(/left|right|center|Object/.test(u[0])&&/top|bottom|center|Object/.test(u[1]))return u.map(function(w){return"object"==typeof w?w:l[w]})}}function e(q){if(q=d.consumeRepeated(k,/^/,q)){for(var u=q[0],w=[{"%":50},{"%":50}],y=0,A=!1,C=0;C<u.length;C++){var D=u[C];if("string"==typeof D)A=/bottom|right/.test(D),y={left:0,right:0,center:y,top:1,bottom:1}[D],w[y]=l[D],"center"==D&&y++;else{if(A){A=void 0;var L={};for(A in D)L[A]=-D[A];D=L;D["%"]=(D["%"]||
0)+100}w[y]=D;y++;A=!1}}return[w,q[1]]}}var l={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},p=d.mergeNestedRepeated.bind(null,d.mergeDimensions," ");d.addPropertiesHandler(b.bind(null,3),p,["transform-origin"]);d.addPropertiesHandler(b.bind(null,2),p,["perspective-origin"]);d.consumePosition=e;d.mergeOffsetList=p;p=d.mergeNestedRepeated.bind(null,p,", ");d.addPropertiesHandler(function(q){if((q=d.consumeRepeated(e,/^,/,q))&&""==q[1])return q[0]},p,["background-position",
"object-position"])})(m);(function(d){var k=d.consumeParenthesised.bind(null,d.parseLengthOrPercent),b=d.consumeRepeated.bind(void 0,k,/^/),e=d.mergeNestedRepeated.bind(void 0,d.mergeDimensions," "),l=d.mergeNestedRepeated.bind(void 0,e,",");d.addPropertiesHandler(function(p){var q=d.consumeToken(/^circle/,p);return q&&q[0]?["circle"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),k,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,
/^\)/))],q[1])):(q=d.consumeToken(/^ellipse/,p))&&q[0]?["ellipse"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),b,d.ignore(d.consumeToken.bind(void 0,/^at/)),d.consumePosition,d.ignore(d.consumeToken.bind(void 0,/^\)/))],q[1])):(p=d.consumeToken(/^polygon/,p))&&p[0]?["polygon"].concat(d.consumeList([d.ignore(d.consumeToken.bind(void 0,/^\(/)),d.optional(d.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),d.consumeSizePairList,d.ignore(d.consumeToken.bind(void 0,
/^\)/))],p[1])):void 0},function(p,q){if(p[0]===q[0])return"circle"==p[0]?d.mergeList(p.slice(1),q.slice(1),["circle(",d.mergeDimensions," at ",d.mergeOffsetList,")"]):"ellipse"==p[0]?d.mergeList(p.slice(1),q.slice(1),["ellipse(",d.mergeNonNegativeSizePair," at ",d.mergeOffsetList,")"]):"polygon"==p[0]&&p[1]==q[1]?d.mergeList(p.slice(2),q.slice(2),["polygon(",p[1],l,")"]):void 0},["shape-outside"])})(m);(function(d,k){function b(p,q){q.concat([p]).forEach(function(u){u in document.documentElement.style&&
(e[p]=u);l[u]=p})}var e={},l={};b("transform",["webkitTransform","msTransform"]);b("transformOrigin",["webkitTransformOrigin"]);b("perspective",["webkitPerspective"]);b("perspectiveOrigin",["webkitPerspectiveOrigin"]);d.propertyName=function(p){return e[p]||p};d.unprefixedPropertyName=function(p){return l[p]||p}})(m)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};
var a=function(k,b,e){(this||dc).target=k;(this||dc).currentTime=b;(this||dc).timelineTime=e;(this||dc).type="cancel";(this||dc).bubbles=!1;(this||dc).cancelable=!1;(this||dc).currentTarget=k;(this||dc).defaultPrevented=!1;(this||dc).eventPhase=Event.AT_TARGET;(this||dc).timeStamp=Date.now()},d=window.Element.prototype.animate;window.Element.prototype.animate=function(k,b){k=d.call(this||dc,k,b);k._cancelHandlers=[];k.oncancel=null;var e=k.cancel;k.cancel=function(){e.call(this||dc);var q=new a(this||
dc,null,n()),u=(this||dc)._cancelHandlers.concat((this||dc).oncancel?[(this||dc).oncancel]:[]);setTimeout(function(){u.forEach(function(w){w.call(q.target,q)})},0)};var l=k.addEventListener;k.addEventListener=function(q,u){"function"==typeof u&&"cancel"==q?(this||dc)._cancelHandlers.push(u):l.call(this||dc,q,u)};var p=k.removeEventListener;return k.removeEventListener=function(q,u){"cancel"==q?(q=(this||dc)._cancelHandlers.indexOf(u),0<=q&&(this||dc)._cancelHandlers.splice(q,1)):p.call(this||dc,q,
u)},k}}})();(function(n){var a=document.documentElement,d=null,k=!1;try{var b="0"==getComputedStyle(a).getPropertyValue("opacity")?"1":"0";d=a.animate({opacity:[b,b]},{duration:1});d.currentTime=0;k=getComputedStyle(a).getPropertyValue("opacity")==b}catch(l){}finally{d&&d.cancel()}if(!k){var e=window.Element.prototype.animate;window.Element.prototype.animate=function(l,p){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&l[Symbol.iterator]&&(l=Array.from(l)),Array.isArray(l)||null===l||
(l=n.convertToArrayForm(l)),e.call(this||dc,l,p)}}})(f)}();var He=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");He.convertToSvgEasing=function(f){for(var m in He.easings)if(He.easings[m]===f){if(m.includes("inOut"))return m.replace("inOut","").toLowerCase()+"InOut";if(m.includes("out"))return m.replace("out","").toLowerCase()+"Out";if(m.includes("in"))return m.replace("in","").toLowerCase()+"In"}};He.stringToEasing=ur;He.obj=ff;He.promise=Uf;He.fun=Tj;He.num=Gj;He.properties=
km;He.arr=Ne;He.string=Bg;He.Color=qf;He.styleProps=dz;He.addPathAttributes=fz;He.addSvgAttributes=ez;He.flubber=MP;He.Bezier=Cha;He.ShadowObject=Dn;var Fn=Ia("e",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",
inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",
inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});He.easings=Fn;He.easings=Fn;He.easings=Fn;He.stringToEasing=ur;He.stringToEasing=
ur;var UH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=m.hasOwnProperty("AnimationQueue")&&"function"===typeof m.AnimationQueue?m.AnimationQueue:m.AnimationQueue=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.animations=[]}},{key:"maskedProps",value:function(a){return 0<this.animations.length?
He.obj.merge(this.animations.map(function(d){return d.getAnimationProps(a)[0]})):{}}},{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(a){var d=this,k=new He.PropertyAnimation(this,this.morph,a);this.morph.makeDirty();return this.morph.withMetaDo({animation:k},function(){var b=k.affectsMorph&&d.animations.find(function(l){return l.equals(k)});if(!b){var e;if(e=d.animations.find(function(l){return l.canMerge(k)}))return e.mergeWith(k),e;if(k.affectsMorph)return k.assignProps(),
d.animations.push(k),k}return b})}},{key:"startAnimationsFor",value:function(a){for(var d=0;d<this.animations.length;d++)this.animations[d].start(a)}},{key:"startSvgAnimationsFor",value:function(a,d){this.animations.forEach(function(k){return k.startSvg(a,d)})}},{key:"removeAnimation",value:function(a){He.arr.remove(this.animations,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],m,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);He.AnimationQueue=UH;He.AnimationQueue=UH;He.AnimationQueue=UH;var OP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=m.hasOwnProperty("PropertyAnimation")&&"function"===typeof m.PropertyAnimation?m.PropertyAnimation:m.PropertyAnimation=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){var b=this;this.queue=a;this.morph=d;if(d.isPath&&"fill"in k){var e=d.fill||He.Color.transparent,l=k.fill;k.customTween=He.fun.compose(function(y){d.fill=e.interpolate(y,l);return y},k.customTween||function(y){});delete k.fill;d.fill=e}if("dropShadow"in k){var p=d.dropShadow||new He.ShadowObject({blur:0,distance:0,spread:0}),q=k.dropShadow;k.customTween=
He.fun.compose(function(y){d.dropShadow=p.interpolate(y,q||new He.ShadowObject({blur:0,distance:0,spread:0}));1==y&&(d.dropShadow=q);return y},k.customTween||function(y){});delete k.dropShadow;d.dropShadow=p}if("visible"in k&&k.visible!=d.visible){var u=void 0===a.originalOpacity?d.opacity:a.originalOpacity;a.originalOpacity=u;var w=k.visible;k.customTween=He.fun.compose(function(y){if(b._otherVisibleTransformationInProgress)return y;0==y&&1==w&&(d.visible=!0);d.opacity=w?He.num.interpolate(y,0,u):
He.num.interpolate(y,u,0);1==y&&(d.visible=w,d.opacity=u,delete a.originalOpacity);return y},k.customTween||function(y){});this.queue.animations.forEach(function(y){return y._otherVisibleTransformationInProgress=!0});delete k.visible}this.config=this.convertBounds(k);this.needsAnimation={svg:d.isSvgMorph,path:d.isPath};this.capturedProperties=He.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var a=this;
return this._promise||(this._promise=new Promise(function(d,k){a.resolveCallback=function(){a.onFinish(a);a.subAnimations?a.subAnimations.then(d):d(a.morph)}}))}},{key:"finish",value:function(a){var d=this;this.config.scale&&this.morph.whenRendered().then(function(){return d.morph.withAllSubmorphsDo(function(k){return k.isText&&k.invalidateTextLayout(!0,!0)})});this.needsAnimation[a]=!1;He.arr.any(He.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?
this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(a){var d=a.bounds,k=a.origin,b=a.rotation,e=a.scale;k=k||this.morph.origin;b=b||this.morph.rotation;e=e||this.morph.scale;return d?Object.assign({},He.obj.dissoc(a,["bounds"]),{origin:k,rotation:b,scale:e,position:d.topLeft().addPt(k),extent:d.extent()}):a}},{key:"equals",value:function(a){return!this.config.customTween&&!a.config.customTweem&&He.obj.equals(this.animatedProps,a.animatedProps)}},{key:"canMerge",value:function(a){return this.easing==
a.easing&&this.duration==a.duration}},{key:"mergeWith",value:function(a){var d=this.config.customTween;Object.assign(this.morph,a.animatedProps);Object.assign(this.config,a.config);this.config.customTween=function(k){d&&d(k);a.config.customTween&&a.config.customTween(k);return k};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var a=this;return!!this.config.customTween||He.properties.any(this.animatedProps,function(d,k){return!He.obj.equals(d[k],a.morph[k])})}},{key:"animatedProps",
get:function(){return He.obj.dissoc(this.config,["customTween","easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||He.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(a){this.config.onFinish=a}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(a,d){var k=[],b;for(b in a)He.obj.equals(d[b],a[b])&&k.push(b);return[He.obj.dissoc(a,
k),He.obj.dissoc(d,k)]}},{key:"getAnimationProps",value:function(a){var d=$jscomp.makeIterator(this.getChangedProps(this.beforeProps[a],this.afterProps[a])),k=d.next().value;d=d.next().value;var b=this.capturedProperties.fill,e=this.config.fill;this.morph.isPolygon&&"css"==a&&(b=e=!1,delete k.background,delete d.background,delete k.backgroundImage,delete d.backgroundImage);"none"==k.filter&&d.boxShadow&&(delete k.filter,k.boxShadow="none");"none"==d.filter&&k.boxShadow&&(delete d.filter,d.boxShadow=
"none");b&&e&&(b.isGradient||e.isGradient)&&(this.tweenGradient=this.interpolate("gradient",b,e));a=$jscomp.makeIterator(He.arr.union(He.obj.keys(k),He.obj.keys(d)));for(b=a.next();!b.done;b=a.next())b=b.value,b in k||(k[b]=d[b]),b in d||(d[b]=k[b]);return[He.obj.isEmpty(k)?!1:k,He.obj.isEmpty(d)?!1:d]}},{key:"gatherAnimationProps",value:function(){var a=this.morph,d=a.isSvgMorph,k=a.isPath,b=a.isPolygon,e={};e.css=He.styleProps(this.morph);d&&(e.svg=He.addSvgAttributes(a,{}));k&&(e.path=He.addPathAttributes(a,
{}));b&&(e.polygon=He.addPathAttributes(a,{}));return e}},{key:"assignProps",value:function(){var a=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:He.arr.withoutAll(a,this.morph.styleClasses),added:He.arr.withoutAll(this.morph.styleClasses,a),animation:this})}},{key:"interpolate",value:function(a,d,k){var b=this;switch(a){case "scrollTop":case "scrollLeft":return function(e){return He.num.interpolate(e,
d,k)};case "d":return He.flubber.interpolate(d,k);case "stroke-width":return function(e){return He.num.interpolate(e,d,k)};case "stroke":return function(e){return He.Color.fromString(d).interpolate(e,He.Color.fromString(k),b.morph.bounds())};case "gradient":return function(e){return d.interpolate(e,k,b.morph.bounds())};case "fill":return d=He.Color.fromString(d),k=He.Color.fromString(k),function(e){return d.interpolate(e,k)}}}},{key:"startSvg",value:function(a,d){var k=this;if(this.needsAnimation[d]){this.needsAnimation[d]=
!1;var b=$jscomp.makeIterator(this.getAnimationProps(d)),e=b.next().value;b=b.next().value;var l={},p=He.stringToEasing(this.easing),q;for(q in e)l[q]=this.interpolate(q,e[q],b[q]);var u,w=function(y){u||(u=y);y-=u;if(1<y/k.duration)return k.finish(d);for(var A in l)l[A]&&a.setAttribute(A,l[A](p(y/k.duration)));requestAnimationFrame(w)};requestAnimationFrame(w)}}},{key:"start",value:function(a){if(!this.active)try{this.active=!0;var d=$jscomp.makeIterator(this.getAnimationProps("css")),k=d.next().value,
b=d.next().value;a&&this.tween(a,k,b);if(this.config.origin){var e=this.capturedProperties.origin,l=this.config.origin,p=a.childNodes[0];p&&this.tween(p,p.style.top?{left:e.x+"px",top:e.y+"px"}:{transform:"translate3d("+e.x+"px, "+e.y+"px, 0px)"},p.style.top?{left:e.x+"px",top:e.y+"px"}:{transform:"translate3d("+l.x+"px, "+l.y+"px, 0px)"})}}catch(q){this.active=!1}}},{key:"tween",value:function(a,d,k,b){var e=this;b=void 0===b?!0:b;var l=this.animatedProps.scroll,p=this.config.customTween,q=!1,u=
function(){b&&(e.finish("css"),e.morph.makeDirty())};if(p){var w,y=He.stringToEasing(this.easing),A=function(ea){w||(w=ea);var la=Math.min(1,(ea-w)/e.duration);e.morph.dontRecordChangesWhile(function(){return p(y(la))});if(1<=la)return e.finish("css");requestAnimationFrame(A)};requestAnimationFrame(A);q=!0}if(l){var C,D=this.morph.env.eventDispatcher.eventState;q=He.promise.deferred();var L=q.promise,I=q.resolve,S=this.interpolate("scrollLeft",a.scrollLeft,l.x),V=this.interpolate("scrollTop",a.scrollTop,
l.y),ba=He.stringToEasing(this.easing),ua=function(ea){C||(C=ea);ea-=C;var la=Math.min(1,ea/e.duration);a.scrollTop=V(ba(la));a.scrollLeft=S(ba(la));if(1<=ea/e.duration)return D.scroll.interactiveScrollInProgress=null,I(),e.finish("css");requestAnimationFrame(ua)};L.debounce=function(){};requestAnimationFrame(ua);q=!0}if(this.tweenGradient&&!this.morph.isPolygon){var Fa,F=He.stringToEasing(this.easing),Y=function(ea){Fa||(Fa=ea);ea-=Fa;if(1<=ea/e.duration)return e.finish("css");a.style.setProperty("background-image",
e.tweenGradient(F(ea/e.duration)));requestAnimationFrame(Y)};delete d.backgroundImage;delete k.backgroundImage;delete d.background;delete k.background;requestAnimationFrame(Y);q=!0}else this.tweenGradient&&(q=!0);if(a&&d&&k){l={};L={};for(var Q in d)l[He.string.camelize(Q)]=d[Q];for(var W in k)L[He.string.camelize(W)]=k[W];try{var ka=a.animate([l,L],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});ka.onfinish=function(){u();setTimeout(function(){return ka.cancel()},
200)};q=!0}catch(ea){q=!1}}q||u()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],m,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17169})}(void 0);He.PropertyAnimation=OP;He.PropertyAnimation=OP;He.PropertyAnimation=OP;var lg=
lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");lg.cumulativeOffset=rw;lg.createIFrame=function(f,m,n){m=void 0===m?"about:blank":m;n=void 0===n?new lg.Rectangle(0,0,700,700):n;return new Promise(function(a,d){if(!f)throw Error("Need parent element!");var k=document.createElement("iframe");k.style.position="absolute";k.style.top=n.top()+"px";k.style.left=n.left()+"px";k.style.width=n.width+"px";k.style.height=n.height+"px";k.src=m;var b=!1;k.onload=function(e){b=!0;k.onload=
null;a(k)};lg.promise.waitFor(1E3,function(){return!!b}).catch(function(e){return d(Error("iframe load timeout"))});f.appendChild(k)})};lg.requestAnimationFramePolyfill=function(f){for(var m=0,n=["ms","moz","webkit","o"],a=0;a<n.length&&!f.requestAnimationFrame;++a)f.requestAnimationFrame=f[n[a]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[n[a]+"CancelAnimationFrame"]||f[n[a]+"CancelRequestAnimationFrame"];f.requestAnimationFrame||(f.requestAnimationFrame=function(d,k){var b=Date.now(),e=Math.max(0,
16-(b-m));k=f.setTimeout(function(){d(b+e)},e);m=b+e;return k});f.cancelAnimationFrame||(f.cancelAnimationFrame=function(d){clearTimeout(d)})};lg.createDOMEnvironment_browser=function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(f=lg.IFramedDomEnvironment,m.yield(lg.createIFrame(document.body),2)):m.return(new f(m.yieldResult))})};lg.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var f=System._nodeRequire("jsdom"),
m=f.createVirtualConsole().sendTo(console);return new Promise(function(n,a){f.env("<div></div>",["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:m},function(d,k){return d?a(d):n(new lg.DomEnvironment(k,k.document,function(){return k.close()}))})})};lg.createDOMEnvironment=eL;lg.defaultDOMEnv=VD;lg.setCSSDef=function(f,m,n){lg.arr.from(f.childNodes).forEach(function(a){return f.removeChild(a)});m=document.createTextNode(m);f.styleSheet?f.styleSheet.cssText=m.nodeValue:f.appendChild(m);
return f};lg.addCSSDef=function(f,m,n){var a=document.createElement("style");a.type="text/css";f&&a.setAttribute("id",f);lg.setCSSDef(a,m,n);(n.head||n).appendChild(a);return a};lg.addOrChangeCSSDeclaration=Vo;lg.addOrChangeLinkedCSS=Bt;lg.promise=Uf;lg.obj=ff;lg.arr=Ne;lg.Rectangle=Qd;lg.cumulativeOffset=rw;lg.cumulativeOffset=rw;lg.createDOMEnvironment=eL;lg.createDOMEnvironment=eL;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=m.hasOwnProperty("DomEnvironment")&&
"function"===typeof m.DomEnvironment?m.DomEnvironment:m.DomEnvironment=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){lg.requestAnimationFramePolyfill(a);this.window=a;this.document=d;this.destroyFn=k}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],
m,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=m.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof m.IFramedDomEnvironment?m.IFramedDomEnvironment:
m.IFramedDomEnvironment=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.contentWindow,a.contentWindow.document,function(){a.contentWindow&&a.contentWindow.close();a.parentNode&&a.parentNode.removeChild(a)});this.iframe=a}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IFramedDomEnvironment"}}],m,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(lg.DomEnvironment);lg._defaultEnv=lg._defaultEnv||void 0;lg.defaultDOMEnv=VD;lg.defaultDOMEnv=VD;lg.addOrChangeCSSDeclaration=Vo;lg.addOrChangeCSSDeclaration=
Vo;lg.addOrChangeLinkedCSS=Bt;lg.addOrChangeLinkedCSS=Bt;var VH=function(){return function(f){f=void 0===f?window.document:f;return function(m,n,a){var d=n||void 0;"undefined"===typeof a&&(a=n,d=void 0);var k=m.split(".");if(1<k.length)for(m=k.shift(),n=0;n<k.length;n++){var b=k[n],e;-1<(e=b.indexOf("#"))&&(b.slice(e+1),b.slice(0,e))}n=m.split("#");1<n.length&&(m=n[0]);m=f.createElement(m);if(d){for(var l in d)"style"!==l&&"dataset"!==l&&"attributes"!==l&&(m[l]=d[l]);if(l=d.style)for(var p in l)m.style[p]=
l[p];if(p=d.dataset)if(m.dataset)for(var q in p)m.dataset[q]=p[q];else for(q in p)m.setAttribute("data-"+q,p[q]);if(d=d.attributes)for(var u in d)d[u]&&lg.obj.isBoolean(d[u])?m.toggleAttribute(u):m.setAttribute(u,d[u])}a||(a="");if("string"===typeof a)m.appendChild(f.createTextNode(a));else if(Array.isArray(a))for(n=0;n<a.length;n++)u=a[n],m.appendChild("string"===typeof u?f.createTextNode(u):u);else m.appendChild("string"===typeof a?f.createTextNode(a):a);return m}}}();lg.hyperscriptFnForDocument=
VH;lg.hyperscriptFnForDocument=VH;lg.hyperscriptFnForDocument=VH;var Gn=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");Gn.obj=ff;Gn.morph=Zi;var Ql=Ia("I",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=m.hasOwnProperty("Icon")&&"function"===typeof m.Icon?m.Icon:m.Icon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Icon"}},{key:"makeLabel",value:function(a,d){var k=d=void 0===d?{prefix:"",suffix:""}:d,b=k.prefix;k=k.suffix;var e=[];b&&e.push.apply(e,$jscomp.arrayFromIterable("string"===typeof b?[b||"",{}]:b));e.push.apply(e,$jscomp.arrayFromIterable(this.textAttribute(a,Gn.obj.dissoc(d,["fontSize"]))));k&&e.push.apply(e,$jscomp.arrayFromIterable("string"===typeof k?[k||"",{}]:k));return Gn.morph(Object.assign({type:"label",value:e},Gn.obj.dissoc(d,["prefix","suffix"])))}},{key:"textAttribute",
value:function(a,d){d=void 0===d?{}:d;var k=d.textStyleClasses&&d.textStyleClasses.includes("far");return[Gn.Icons[a].code||"icon "+a+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:k?"400":"900",textStyleClasses:["fas"]},d)]}},{key:"setIcon",value:function(a,d){a.textAndAttributes=this.textAttribute(d)}}],m,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,end:1811})}(void 0));Gn.Icon=Ql;Gn.Icon=Ql;Gn.Icon=Ql;var WH=Ia("bu",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},
airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},
"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},
"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},
asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},
"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},
"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},
blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},
box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},
"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},
cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},
"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},
"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},
"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},
"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},
cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},
"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},
"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},
"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},
democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},
"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},
draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},
edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},
"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},
"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},
"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},
"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},
"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},
"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},
gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},
"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},
"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},
"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},
hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},
"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},
helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},
hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},
images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},
"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},
"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},
less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},
lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},
"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},
medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},
microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},
monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},
npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},
pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},
pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},
"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},
"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},
"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},
quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},
reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},
road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},
satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},
shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},
sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},
"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},
"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},
"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},
stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},
"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},
superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},
tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},
"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},
tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},
"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},
twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},
untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},
"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},
"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},
"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},
wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},
wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},
"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});Gn.Icons=WH;Gn.Icons=WH;Gn.Icons=WH;var Hd=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");Hd.vdom=gB;Hd.promise=Uf;Hd.arr=Ne;Hd.tree=Dq;Hd.obj=ff;Hd.string=Bg;Hd.addOrChangeCSSDeclaration=Vo;Hd.addOrChangeLinkedCSS=Bt;Hd.defaultStyle=pw;Hd.renderGradient=QD;Hd.defaultAttributes=qw;Hd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Hd.pathAttributes=PD;Hd.svgAttributes=OD;Hd.renderMorph=RD;Hd.Transform=Qi;Hd.pt=kh;Hd.getSvgVertices=ow;Hd.canBePromotedToCompositionLayer=ND;Hd.config=rk;var XH=Hd.vdom;Hd.h=XH.h;Hd.diff=XH.diff;Hd.patch=XH.patch;Hd.createNode=XH.create;Hd.svgNs="http://www.w3.org/2000/svg";Hd.CanvasHook=function(f){this.canvasMorph=f};Hd.CanvasHook.prototype.hook=function(f,m,n){this.canvasMorph.afterRender(f,this.canvasMorph._canvas!==f&&"CANVAS"==f.tagName)};Hd.InitStroke=function(f,m,n){this.path=f;this.renderer=
m;this.reverse=n};Hd.InitStroke.prototype.hook=function(f,m,n){m=this.path.drawnProportion||0;0!=m&&(f.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),f.setAttribute("stroke-dasharray",f.getTotalLength()),f.setAttribute("stroke-dashoffset",f.getTotalLength()*(this.reverse?1-m:-1+(1-m))))};var YH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=m.hasOwnProperty("Renderer")&&"function"===typeof m.Renderer?m.Renderer:m.Renderer=function(a){a&&
a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){if(!a||!a.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+a);if(!(d&&"nodeType"in d))throw Error("Trying to initialize renderer with an invalid root node: "+d);k||(k=d.getRootNode(),k={window:System.global,document:k});this.worldMorph=a;a._renderer=this;this.rootNode=d;this.domNode=
null;this.domEnvironment=k;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=this.renderWorldLoopProcess=null;this.requestAnimationFrame=k.window.requestAnimationFrame.bind(k.window)}},{key:"clear",value:function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return d=a.domNode,b.setCatchFinallyBlocks(2),b.yield(a.stopRenderWorldLoop(),4);case 4:b.leaveTryBlock(3);break;case 2:b.enterCatchBlock();case 3:d&&
(k=d.parentNode,k.removeChild(d),[].concat($jscomp.arrayFromIterable(a.fixedMorphNodeMap.values())).forEach(function(e){return k.removeChild(e)})),a.domNode=null,a.renderMap=new WeakMap,b.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var a=this;return Hd.promise.waitFor(3E3,function(){return a.domNode.getRootNode()}).then(function(d){return Promise.all([Hd.addOrChangeCSSDeclaration("lively-morphic-css",Hd.defaultCSS,d),Hd.addOrChangeLinkedCSS("lively-ibm-plex",Hd.config.css.ibmPlex),Hd.addOrChangeLinkedCSS("lively-font-awesome",
Hd.config.css.fontAwesome,d,!1),Hd.addOrChangeLinkedCSS("lively-font-inconsolata",Hd.config.css.inconsolata,d,!1)])})}},{key:"startRenderWorldLoop",value:function(){var a=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return a.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){a._stopped=!0;a.domEnvironment.window.cancelAnimationFrame(a.renderWorldLoopProcess);
a.renderWorldLoopProcess=null;a.domEnvironment.window.cancelAnimationFrame(a.renderWorldLoopLater);a.renderWorldLoopLater=null;return d.yield(Hd.promise.waitFor(2E3,function(){return!a.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(a){var d=this;this.renderWorldLoopLaterCounter=void 0===a?10:a;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){d.renderWorldLoopLater=null;0<d.renderWorldLoopLaterCounter&&d.renderLater(d.renderWorldLoopLaterCounter-
1);try{d.renderStep()}catch(k){console.error("Error rendering morphs:",k)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(a){var d="#"+Hd.string.regExpEscape(a.id),k=this.domNode&&this.domNode.querySelector(d);this.domNode&&this.domNode.id==a.id&&(k=this.domNode);if(k)return k;a=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(k=a.next();!k.done;k=a.next())if(k=k.value.querySelector(d))return k;return null}},
{key:"getMorphForNode",value:function(a){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(d){return d.id===a.id}):null}},{key:"render",value:function(a){if(!a.needsRerender()){var d=this.renderMap.get(a);if(d)return d}a.aboutToRender(this);d=a.render(this);this.renderMap.set(a,d);return d}},{key:"renderAsFixed",value:function(a){var d=this.render(a);a.isHTMLMorph||(d.properties.style.position="fixed");if(this.worldMorph.isEmbedded){var k=this.domNode.getBoundingClientRect(),
b=a.origin,e=a.owner,l=a.position,p=Math.round(l.x-b.x-(a._skipWrapping&&e?e.borderWidthLeft:0));b=Math.round(l.y-b.y-(a._skipWrapping&&e?e.borderWidthTop:0));a=Hd.canBePromotedToCompositionLayer(a)?Hd.pt(0,0):Hd.pt(p,b);p=a.x;d.properties.style.top=a.y+k.y+"px";d.properties.style.left=p+k.x+"px"}return d}},{key:"renderFixedMorphs",value:function(a,d){var k=this;d=this.domNode;var b=this.fixedMorphNodeMap;if((a.length||b.size)&&d&&d.parentNode){d=d.parentNode;for(var e=$jscomp.makeIterator(b),l=e.next();!l.done;l=
e.next()){var p=$jscomp.makeIterator(l.value);l=p.next().value;p=p.next().value;a.includes(l)||(p.parentNode&&p.parentNode.removeChild(p),b.delete(l))}l=a.map(function(C){return b.get(C)});var q=a.map(function(C){return C.id});e=[].concat($jscomp.arrayFromIterable(d.children)).map(function(C){return C.id}).filter(function(C){return q.includes(C)});e=!Hd.arr.equals(q,e);var u=new WeakMap;if(e){var w=new WeakMap;p=Hd.arr.compact(Hd.arr.flatten(a.map(function(C){return C.withAllSubmorphsDo(function(D){return k.getNodeForMorph(D)})})));
p.forEach(function(C){return w.set(C,C.scrollTop)});l.map(function(C){return C&&C.parentNode&&C.parentNode.removeChild(C)});p.forEach(function(C){w.get(C)!=C.scrollTop&&u.set(C,w.get(C))})}a=$jscomp.makeIterator(a);for(l=a.next();!l.done;l=a.next()){l=l.value;p=this.renderMap.get(l)||this.renderAsFixed(l);var y=this.renderAsFixed(l);y=Hd.diff(p,y);var A=b.get(l);A||(A=Hd.createNode(p,this.domEnvironment),b.set(l,A));A.parentNode||d.appendChild(A);e&&l.withAllSubmorphsDo(function(C){return k.getNodeForMorph(C)}).forEach(function(C){u.has(C)&&
(C.scrollTop=u.get(C))});Hd.patch(A,y)}}}},{key:"renderMorph",value:function(a){var d=this.renderSubmorphs(a);return Hd.h("div",Object.assign({},Hd.defaultAttributes(a,this),{style:Hd.defaultStyle(a)}),d)}},{key:"renderSubmorphs",value:function(a){return this.renderSelectedSubmorphs(a,a.submorphs)}},{key:"renderSelectedSubmorphs",value:function(a,d){var k=a.borderWidthLeft,b=a.borderWidthTop,e=a.origin,l=e.x;e=e.y;for(var p=d.length-1,q=Array(p+1);0<=p;p--)q[p]=this.render(d[p]);d={};return Hd.h("div",
{style:Object.assign({position:"absolute",left:l-(a.isPath?0:k)+"px",top:e-(a.isPath?0:b)+"px"},a.isPolygon?Object.assign({height:"100%",width:"100%",overflow:a.clipMode},"visible"!==a.clipMode?(d[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+a.id+")",d):{}):{})},q)}},{key:"renderWorld",value:function(a){for(var d=a.submorphs,k=[],b=[],e=0;e<d.length;e++){var l=d[e];l.hasFixedPosition?b.push(l):k.push(l)}d=this.renderSelectedSubmorphs(a,k);a=Hd.h("div",
Object.assign({},Hd.defaultAttributes(a,this),{style:Hd.defaultStyle(a)}),d);a.fixedMorphs=b;return a}},{key:"renderImage",value:function(a){var d=a.imageUrl;if(d.startsWith("data:")){var k=d.indexOf(","),b=d.substring(5,k),e=$jscomp.makeIterator(b.split(";"));b=e.next().value;e=e.next().value;k=d.substring(k+1);"base64"!==e&&(d=Hd.string.createDataURI(k,b))}return Hd.h("div",Object.assign({},Hd.defaultAttributes(a,this),{style:Hd.defaultStyle(a)}),[Hd.h("img",{src:d,alt:a.tooltip||"",draggable:!1,
style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(a)])}},{key:"renderCanvas",value:function(a){return Hd.h("div",Object.assign({},Hd.defaultAttributes(a,this),{style:Hd.defaultStyle(a)}),[Hd.h("canvas",{width:a.width,height:a.height,style:{"pointer-events":"none",position:"absolute"},canvasHook:new Hd.CanvasHook(a)}),this.renderSubmorphs(a)])}},{key:"renderCheckBox",value:function(a){return Hd.h("div",Object.assign({},Hd.defaultAttributes(a,
this),{style:Hd.defaultStyle(a)}),[Hd.h("input",{type:"checkbox",checked:a.checked,disabled:!a.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(a)])}},{key:"renderPath",value:function(a){var d=a.startMarker,k=a.endMarker,b=a.showControlPoints,e=Hd.getSvgVertices(a.vertices),l=Hd.h("path",Object.assign({namespace:Hd.svgNs,id:"svg"+a.id},Hd.pathAttributes(a))),p=Hd.h("mask",{namespace:Hd.svgNs,id:"mask"+a.id},[Hd.h("rect",{namespace:Hd.svgNs,
attributes:{fill:"white",x:0,y:0,width:a.width+20,height:a.height+20}}),Hd.h("path",{namespace:Hd.svgNs,initStroke:new Hd.InitStroke(a,this,!0),attributes:{d:e,stroke:"black",fill:"none"}}),Hd.h("path",{namespace:Hd.svgNs,initStroke:new Hd.InitStroke(a,this,!1),attributes:{d:e,stroke:"white",fill:"none"}})]);e=[Hd.h("clipPath",{namespace:Hd.svgNs,id:"clipPath"+a.id},Hd.h("path",{namespace:Hd.svgNs,attributes:{d:e,fill:"white"}})),p];d&&(d.id||(d.id="start-marker"),l.properties.attributes["marker-start"]=
"url(#"+a.id+"-"+d.id+")",e=[],e.push(this._renderPath_Marker(a,d)));k&&(k.id||(k.id="end-marker"),l.properties.attributes["marker-end"]="url(#"+a.id+"-"+k.id+")",e||(e=[]),e.push(this._renderPath_Marker(a,k)));var q;b&&(q=Hd.h("g",{namespace:Hd.svgNs},this._renderPath_ControlPoints(a)));return this.renderSvgMorph(a,l,e,q)}},{key:"_renderPath_ControlPoints",value:function(a,d){function k(S,V,ba,ua,Fa,F){var Y=ua?12:Math.min(8,Math.max(3,l));ba="path-point path-point-"+ba;ua=ua?"orange":p;"string"===
typeof Fa&&(ba+="-"+Fa);F&&(Y=Math.max(3,Math.ceil(Y/2)));return F?Hd.h("circle",{namespace:Hd.svgNs,style:{fill:"white","stroke-width":2,stroke:ua},attributes:{class:ba,cx:S,cy:V,r:Y}}):Hd.h("circle",{namespace:Hd.svgNs,style:{fill:ua},attributes:{class:ba,cx:S,cy:V,r:Y}})}var b=a.vertices;d=a.borderWidth;var e=a.showControlPoints;a=a._controlPointDrag;var l=0==d?6:d+2,p="red";d=[];if("object"===typeof e){var q=e.radius;(e=e.fill)&&(p=String(e));"number"===typeof q&&(l=q)}if(b.length){e=0;var u=
b[0];q=u.x;var w=u.y;u=u.controlPoints.next;var y=a&&a.maybeMerge&&a.maybeMerge.includes(e);d.push(k(q,w,e,y));for(e=1;e<b.length-1;e++){var A=b[e];y=A.isSmooth;var C=A.x,D=A.y,L=A.controlPoints;A=L.previous;L=L.next;var I=a&&a.maybeMerge&&a.maybeMerge.includes(e);y?d.push(k(C,D,e,I),k(q+u.x,w+u.y,e-1,!1,"control-2",!0),k(C+A.x,D+A.y,e,!1,"control-1",!0)):d.push(k(C,D,e,I));q=C;w=D;u=L}D=b[b.length-1];b=D.isSmooth;y=D.x;C=D.y;D=D.controlPoints.previous;a=a&&a.maybeMerge&&a.maybeMerge.includes(e);
b?d.push(k(y,C,e,a),k(q+u.x,w+u.y,e-1,!1,"control-2",!0),k(y+D.x,C+D.y,e,!1,"control-1",!0)):d.push(k(y,C,e,a))}return d}},{key:"_renderPath_Marker",value:function(a,d){function k(b){var e=b.tagName,l=b.id,p=b.children,q=b.style;p=p?p.map(k):void 0;l&&(l=a.id+"-"+l);return Hd.h(e,{namespace:Hd.svgNs,id:l,style:q,attributes:Hd.obj.dissoc(b,["tagName","id","children","style"])},p)}return k(d)}},{key:"renderSvgMorph",value:function(a,d,k,b){b=void 0===b?[]:b;var e=Hd.svgAttributes(a),l=a.innerBounds(),
p=l.width;l=l.height;var q,u=[];a.fill&&a.fill.isGradient&&(q||(q=[]),q.push(Hd.renderGradient("fill"+a.id,a.extent,a.fill)));a.borderColor&&a.borderColor.valueOf().isGradient&&(q||(q=[]),q.push(Hd.renderGradient("borderColor"+a.id,a.extent,a.borderColor)));k&&k.length&&(q||(q=[]),q.push.apply(q,$jscomp.arrayFromIterable(k)));u.push(d);q&&u.push(Hd.h("defs",{namespace:Hd.svgNs},q));d=Hd.obj.select(Hd.defaultStyle(a),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));
return Hd.h("div",Object.assign({},Hd.defaultAttributes(a,this),{style:Object.assign({},d,{width:p+"px",height:l+"px","pointer-events":a.reactsToPointer?"auto":"none"})}),[Hd.h("svg",Object.assign({namespace:Hd.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":a.cornerStyle||"mint","stroke-linecap":a.endStyle||"round",overflow:"visible"}},e),u),this.renderSubmorphs(a),Hd.h("svg",Object.assign({namespace:Hd.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},e),b)])}},
{key:"renderPreview",value:function(a,d){var k=void 0===d.center?!0:d.center,b=void 0===d.ignoreMorphs?[]:d.ignoreMorphs,e=void 0===d.asNode?!1:d.asNode,l=a.origin,p=a.rotation,q=void 0===d.width?100:d.width;d=void 0===d.height?100:d.height;var u=Math.max(.1,1/a.scale);u=(new Hd.Transform(a.position.negated(),0,Hd.pt(u,u))).transformRectToRect(a.bounds());var w=Math.max(.1,Math.min(q/u.width,d/u.height));l=new Hd.Transform(u.topLeft().negated().scaleBy(w).subPt(l),p,Hd.pt(w,w));p=(p=this.getNodeForMorph(a))?
p.cloneNode(!0):Hd.renderMorph(a);k&&(a=l.transformRectToRect(a.extent.extentAsRectangle()),l=l.preConcatenate(new Hd.Transform(Hd.pt(a.width<q?(q-a.width)/2:0,a.height<d?(d-a.height)/2:0))));p.style.transform=l.toCSSTransformString();p.style.pointerEvents="";Hd.tree.prewalk(p,function(y){if("string"===typeof y.className){var A=y.className.split(" ").map(function(C){return C.trim()}).filter(Boolean);A.includes("Morph")&&(y.className=Hd.arr.withoutAll(A,["morph","Morph"]).join(" "),b.find(function(C){return C.id===
y.id})&&y.remove(),y.id="")}},function(y){return Array.from(y.childNodes)});return e?p:p.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],m,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1439,end:22095})}(void 0);Hd.Renderer=YH;Hd.Renderer=YH;Hd.Renderer=YH;var Gx=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),Q2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=m.hasOwnProperty("FontDetector")&&"function"===typeof m.FontDetector?m.FontDetector:m.FontDetector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,
f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.document=a;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(d,k){return[d,String(100*(k+1))]}));this.baseFonts=["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",
value:function(){var a=this.defaultWidth,d=this.defaultHeight,k=this.possibleFontWeights,b=this.baseFonts,e=this.document.getElementsByTagName("body")[0],l=this.span||this.document.createElement("span");l.style.fontSize="72px";l.style.opacity=0;l.innerHTML="mmmmmmmmmmlli";if(!l.parentNode){var p=this.document.createElement("div");p.style.position="absolute";p.style.width="100%";p.style.overflow="hidden";p.style["pointer-events"]="none";p.style["-webkit-user-select"]="none";p.appendChild(l);e.appendChild(p)}for(var q in k)for(var u in b)l.style.fontFamily=
b[u],l.style.fontWeight=k[q],a[b[u]+"@"+k[q]]=l.offsetWidth,d[b[u]+"@"+k[q]]=l.offsetHeight;this.span=l;this.prepared=!0}},{key:"isFontSupported",value:function(a,d){d=void 0===d?"normal":d;this.possibleFontWeights.includes(d)||(d=this.namedToNumeric.get(d)||"normal");this.prepared||this.prepare();var k=this.defaultWidth,b=this.defaultHeight,e=this.baseFonts,l=this.span,p=this.document.body;l.parentNode||p.appendChild(l);for(var q in e)if(l.style.fontWeight=d,l.style.fontFamily=a+","+e[q],l.offsetWidth!=
k[e[q]+"@"+d]||l.offsetHeight!=b[e[q]+"@"+d])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return Gx.fonts}}],m,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:15,end:3680})}(void 0),Dha=Q2=
Gx.FontDetector,PP=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},{name:"Bell",
type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",
type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",type:"serif"},
{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},{name:"FF Scala",
type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",type:"serif"},{name:"Janson",
type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",
type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",
type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",
isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},
{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},
{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},{name:"Rockwell",type:"slab serif"},{name:"Schadow",
type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",type:"sans-serif"},{name:"Avenir",type:"sans-serif"},
{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},{name:"Clearview",type:"sans-serif"},
{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",type:"sans-serif"},{name:"Square 721",
type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},{name:"Gotham",type:"sans-serif"},
{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",type:"sans-serif"},{name:"Klavika",
type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},{name:"Arial",type:"sans-serif"},
{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",type:"sans-serif"},{name:"Rotis Sans",
type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},{name:"Twentieth Century (Tw Cen MT)",
type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},{name:"Chivo",type:"sans-serif",isGoogleFont:!0},
{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",
isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},
{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",type:"monospace"},{name:"Menlo",type:"monospace"},
{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",type:"monospace"},{name:"SimSun",type:"monospace"},
{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},{name:"Dom Casual",type:"script"},{name:"Mistral",
type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",type:"script"},{name:"Kuenstler Script",
type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",type:"blackletter"},{name:"Breitkopf Fraktur",
type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",type:"non-latin"},{name:"Gadugi",type:"non-latin"},
{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},{name:"Minch\u014d",type:"non-latin"},{name:"Ming",
type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},{name:"SMP",type:"unicode"},{name:"Microsoft Office",
type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",
type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",type:"unicode"},{name:"Verdana Ref",
type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},{name:"Wingdings 3",type:"symbol"},
{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},{name:"Ellington",type:"decorative"},
{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},{name:"Willow",type:"decorative"},{name:"Windsor",
type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];Gx.fonts=PP;Gx.fonts=PP;Gx.fonts=PP;Gx.default=Q2;var Xg=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");Xg.textlayerNodeForFontMeasure=function(f){var m=f.viewState,n=m.text_layer_node;m=m.fontmetric_text_layer_node;
n&&!n.className.includes("newtext-text-layer")&&(f.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));m&&!m.className.includes("newtext-text-layer")&&(f.viewState.fontmetric_text_layer_node=m=null);n&&!m&&n.parentNode&&(m=f.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return m};Xg.isExtendingChar=function(f){return 768<=f.charCodeAt(0)&&Xg.extendingChars.test(f)};Xg.skipExtendingChars=function(f,m,n){for(;(0>
n?0<m:m<f.length)&&Xg.isExtendingChar(f.charAt(m));)m+=n;return m};Xg.charBoundsOfBigMonospacedLine=function(f,m,n,a,d,k,b,e){d=void 0===d?0:d;k=void 0===k?0:k;n=n.text.length;if(500>n||m.isProportional(Xg.getComputedFontFamily(a)))return null;var l=Infinity,p=b.defaultTextStyle;b.lineWrapping&&(l=a.getBoundingClientRect().width);m=m._domMeasure.defaultCharExtent(f,{defaultTextStyle:p},e);f=m.width;m=m.height;a=Array(n);for(b=0;b<n;b++)d+f>l&&(d=0,k+=m),a[b]={x:d,y:k,width:f,height:m},d+=f;return a};
Xg.charBoundsOfLine=function(f,m,n,a){n=void 0===n?0:n;a=void 0===a?0:a;f=m.ELEMENT_NODE;var d=m.TEXT_NODE,k=m.ownerDocument,b=[],e=0;if(m)if(m.className.includes("line")){n-=m.offsetLeft;a-=m.offsetTop;var l=m.childNodes[0]}else l=m.getElementsByClassName("line")[0].childNodes[0],n=n-m.offsetLeft+Xg.getComputedMarginLeft(m),a-=m.offsetTop;else l=null;if(!l){var p=l=k.createElement("br");m.appendChild(p)}for(;l&&!(Infinity<e);){var q="BR"!==l.tagName&&l.nodeType===f&&l.childNodes[0]||l;if(q.nodeType===
d)for(var u=q.length,w=0;w<u;w++){var y=Xg.measureCharInner(k,q,w,"right");var A=y.left;var C=y.top;m=y.width;y=y.height;A+=n;C+=a;b[e++]={x:A,y:C,width:m,height:y}}else if(l.nodeType===f)q=l.getBoundingClientRect(),A=q.left,C=q.top,m=q.width,y=q.height,A+=n,C+=a,b[e++]={x:A,y:C,width:m,height:y};else throw Error("Cannot deal with node "+l);l=l.nextSibling}p&&p.parentNode.removeChild(p);return b};Xg.measureCharInner=function(f,m,n,a){a=void 0===a?"left":a;var d=n;n+=1;if(3==m.nodeType)for(var k=0;4>
k;k++){var b=Xg.getUsefulRect(Xg.range(f,m,d,n).getClientRects(),a);if(b.left||b.right||0==d)break;n=d;--d}return b};Xg.range=function(f,m,n,a,d){f=f.createRange();f.setEnd(d||m,a);f.setStart(m,n);return f};Xg.getUsefulRect=function(f,m){var n={left:0,right:0,top:0,bottom:0};if("left"==m)for(m=0;m<f.length&&(n=f[m]).left==n.right;m++);else for(m=f.length-1;0<=m&&(n=f[m]).left==n.right;m--);return n};Xg.string=Bg;Xg.arr=Ne;Xg.obj=ff;Xg.FontDetector=Dha;Xg.cumulativeOffset=rw;Xg.config=rk;Xg.debug=
!!Xg.config.onloadURLQuery["debug-font-metric"];Xg.checkTimeout=1E3;var R2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=m.hasOwnProperty("FontMetric")&&"function"===typeof m.FontMetric?m.FontMetric:m.FontMetric=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo=
{};this.supportedFontCache={};this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(a){if(this.element){var d=this.element.parentNode;var k=this.element.getRootNode()}this.uninstall();this.charMap={};this.cachedBoundsInfo={};k&&d&&this.install(k,d,a)}},{key:"install",value:function(a,d,k){this.element=a.createElement("div");this.element.name="fontMetric";this.setMeasureNodeStyles(this.element.style,!0);d.appendChild(this.element);this._domMeasure=(new Xg.DOMTextMeasure).install(a,
d,k)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";a.left=a.top="0px";a.visibility="hidden";a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d?"hidden":"visible"}},{key:"measure",value:function(a,d){var k=a.fontFamily,b=a.fontSize,e=a.fontWeight,l=a.fontStyle,p=
a.textDecoration,q=a.textStyleClasses;a=a.transform;var u=this.element;a&&(a=a.inverse());u.textContent=d;Object.assign(u.style,{"-webkit-text-size-adjust":"none",fontFamily:k,fontWeight:e,fontStyle:l,textDecoration:p,transform:a,fontSize:b+"px"});u.className=q?q.join(" "):"";try{var w=u.getBoundingClientRect();var y=w.width;var A=w.height}catch(C){return{width:0,height:0}}return{height:A,width:y}}},{key:"charBoundsFor",value:function(a,d){var k=d.length,b=Array(k),e=this.cachedBoundsInfo,l=e.bounds,
p=e.str;e=e.style;if(this.isProportional(a.fontFamily)){e=l&&Xg.obj.equals(e,a);for(var q=!a.fixedCharacterSpacing,u=0,w=0;u<k;u++){var y=d[u];if(q)if(e=e&&y===p[u]){var A=l[u];y=A.width;A=A.height}else y=d.substr(0,u+1),A=this.measure(a,y),y=A.width,A=A.height,y-=w;else A=this.sizeFor(a,y),y=A.width,A=A.height;b[u]={x:w,y:0,width:Math.ceil(y),height:Math.ceil(A)};w+=y}q&&(this.cachedBoundsInfo={bounds:b,str:d,style:a})}else for(d=this.sizeFor(a,"x",!0),a=this.sizeFor(a,"xx",!0).width-d.width,d=d.height,
p=0;p<k;p++)l=a*p,b[p]={x:l,y:0,width:a,height:d};return b}},{key:"isProportional",value:function(a){if(this.isProportionalCache.hasOwnProperty(a))return this.isProportionalCache[a];var d={fontFamily:a,fontSize:12},k=this.sizeFor(d,"w").width;d=this.sizeFor(d,"i").width;return this.isProportionalCache[a]=k!==d}},{key:"sizeFor",value:function(a,d,k){d=void 0===d?"":d;var b=a.fontFamily,e=a.fontSize,l=a.fontWeight,p=a.fontStyle,q=a.textDecoration,u=a.textStyleClasses;a={fontFamily:b,fontSize:e,fontWeight:l,
fontStyle:p,textDecoration:q,textStyleClasses:u};if((void 0===k||!k)&&1<d.length)return this.measure(a,d);k=u?u.join(" "):"";b=[b,e,l,p,q,k].join("-");this.charMap[b]||(this.charMap[b]={});this.charMap[b][d]||(this.charMap[b][d]=this.measure(a,d));return this.charMap[b][d]}},{key:"defaultLineHeight",value:function(a){return this.sizeFor(a," ").height}},{key:"supportedFonts",get:function(){return Xg.arr.uniq(Object.keys(this.supportedFontCache).map(function(a){return a.split(",")[0].replaceAll(/-bold|-Medium|"|-normal/g,
"")}))}},{key:"isFontSupported",value:function(a,d){d=void 0===d?"normal":d;var k=this.fontDetector||(this.fontDetector=new Xg.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[a+"-"+d]){var b=this.supportedFontCache[a+"-"+d],e=b.ts;b=b.value;if(Date.now()-e<Xg.checkTimeout)return b}k=k.isFontSupported(a,d);this.supportedFontCache[a+"-"+d]={ts:Date.now(),value:k};return k}},{key:"defaultCharExtent",value:function(a,d,k){return this._domMeasure.defaultCharExtent(a,d,k)}},{key:"manuallyComputeCharBoundsOfLine",
value:function(a,d,k,b,e,l,p){return this._domMeasure.computeCharBBoxes(a,d,0,0,e,l,p,this)}},{key:"manuallyComputeBoundsOfLines",value:function(a,d,k,b,e,l,p){return this._domMeasure.computeBBoxesOfLines(a,d,0,0,e,l,p)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(a){if(!this._fontMetric){if(!a&&"undefined"===
typeof document)throw Error("Cannot initialize FontMetric without document");a||(a={document:document});this._fontMetric=this.forDOMEnv(a)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(a){a=a.document;var d=new Xg.FontMetric;d.install(a,a.body);return d}}],m,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:321,end:7644})}(void 0),Eha=R2=Xg.FontMetric;Xg.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=m.hasOwnProperty("DOMTextMeasure")&&"function"===typeof m.DOMTextMeasure?m.DOMTextMeasure:m.DOMTextMeasure=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:"reset",value:function(){if(this.element){var a=this.element.parentNode;var d=this.element.ownerDocument}this.uninstall();d&&a&&this.install(d,a);return this}},
{key:"install",value:function(a,d,k){this.maxLineBBoxCacheCount=(this.debug=k=void 0===k?!1:k)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=k?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=a;a=this.element=a.createElement("div");a.className="dom-measure"+(k?" debug":"");this.setMeasureNodeStyles(a.style,!0);d.appendChild(a);return this}},{key:"uninstall",value:function(){var a=this.element;a&&(a.parentNode&&
a.parentNode.removeChild(a),this.element=null)}},{key:"setMeasureNodeStyles",value:function(a,d){a.width=a.height="auto";this.debug||(a.left=a.top="0px",a.visibility="hidden");a.position="absolute";a.whiteSpace="pre";a.font="inherit";a.overflow=d&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(a){var d=a.defaultTextStyle;return[d.fontFamily,d.fontSize,d.fontWeight,d.fontStyle,d.textDecoration,d.textStyleClasses,a.paddingLeft,a.paddingRight,a.paddingTop,a.paddingBottom,a.width,
a.height,a.clipMode,a.lineWrapping,a.textAlign].join("-")}},{key:"defaultCharExtent",value:function(a,d,k){var b=this,e=this.generateStyleKey(d),l=this.defaultCharWidthHeightCache[e];if("undefined"!==typeof l&&(0!==l.height||0!==l.width))return l;var p=this.doc;return this.withTextLayerNodeDo(a,k,d,e,function(q){var u=p.createElement("span");u.className="line";u.style.whiteSpace="pre";q.appendChild(u);u.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var w=u.getBoundingClientRect().width,y=p.createElement("span");y.className="line";y.style.whiteSpace="pre";q.appendChild(y);y.textContent="H\ne\nll\no";var A=y.getBoundingClientRect().height;q.removeChild(u);q.removeChild(y);return b.defaultCharWidthHeightCache[e]={width:w/92,height:Math.ceil(A/4)}})}},{key:"computeBBoxesOfLines",value:function(a,d,k,b,e,l,p){var q=this;k=void 0===k?0:k;b=void 0===b?0:b;for(var u=this.generateStyleKey(e),w=Array(d.length),y=!0,A=0;A<d.length;A++){var C=!d[A].textAttributes.length&&
this.lineBBoxCache[u+"_"+d[A].text];C&&C.height&&C.width?w[A]=C:y=!1}return y?w:this.withTextLayerNodeDo(a,l,e,u,function(D,L,I){for(var S=Array(d.length),V=Array(d.length),ba=0;ba<d.length;ba++)if(!V[ba]){var ua=p(d[ba]);ua.style.display="inline-block";D.appendChild(ua);S[ba]=ua}for(ba=0;ba<S.length;ba++)if(!V[ba]){ua=S[ba];var Fa=ua.getBoundingClientRect();q.lineBBoxCache[u+"_"+d[ba].text]=V[ba]={x:Fa.left-ua.offsetLeft+k-L,y:Fa.top-ua.offsetTop+b-I,width:Fa.width,height:Fa.height}}for(L=0;L<S.length;L++)D.removeChild(S[L]);
return V})}},{key:"computeCharBBoxes",value:function(a,d,k,b,e,l,p,q){var u=this;k=void 0===k?0:k;b=void 0===b?0:b;return this.withTextLayerNodeDo(a,l,e,this.generateStyleKey(e),function(w,y,A){var C=p(d);w.appendChild(C);w=1E4<d.stringSize&&Xg.charBoundsOfBigMonospacedLine(a,q,d,C,k,b,e,l)||Xg.charBoundsOfLine(d,C,k-y,b-A);u.debug||C.parentNode.removeChild(C);return w})}},{key:"withTextLayerNodeDo",value:function(a,d,k,b,e){var l=this.doc,p=this.textlayerNodeCache,q=this.element,u=Xg.textlayerNodeForFontMeasure(a);
u||(u=p[b]);if(!u){this.textlayerNodeCacheCount++;u=p[b]=d(k,[]);u.id=b;d=k.width;var w=k.clipMode;k.width||k.clipMode&&"visible"!==k.clipMode?(k=l.createElement("div"),k.style.position="absolute",w&&(k.style.overflow=w),d&&(k.style.width=d+"px"),k.id=b,k.appendChild(u),q.appendChild(k)):q.appendChild(u)}b=a.getGlobalTransform().inverse();a.env.renderer&&a.env.renderer.getNodeForMorph(a)&&(1!=b.getScale()||0!=b.getRotation())&&(b.e=b.f=0,u.style.transform=b.toString());b=u.getBoundingClientRect();
a=b.left;b=b.top;try{return e(u,a,b)}finally{if(u.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){e=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var y;e--&&(y=q.childNodes[0]);)p[y.id]=null,q.removeChild(y);this.textlayerNodeCacheCount-=e}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],m,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11314,end:19760})})(void 0);Xg.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;Xg.getComputedFontFamily="function"===typeof Xg.GLOBAL.getComputedStyle?function(f){return Xg.GLOBAL.getComputedStyle(f).fontFamily}:function(){return""};Xg.getComputedMarginLeft="function"===typeof Xg.GLOBAL.getComputedStyle?function(f){return parseInt(Xg.GLOBAL.getComputedStyle(f).marginLeft)||
0}:function(){return 0};Xg.default=R2;var Bh=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");Bh.signalBindings=function(f,m,n){if(f=f.attributeConnections){f=f.slice();for(var a=0;a<f.length;a++)f[a].sourceAttrName===m&&f[a].update(n)}};Bh.informMorph=function(f,m,n){try{n.onChange(m);Bh.signalBindings(n,"change",m);for(var a=n.owner;a;)a.onSubmorphChange(m,n),a=a.owner}catch(d){console.error("Error in informMorph: "+d.stack)}};Bh.arr=Ne;Bh.string=Bg;Bh.obj=ff;Bh.connect=Mj;Bh.signal=
Ak;Bh.disconnect=So;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("Change")&&"function"===typeof m.Change?m.Change:m.Change=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.target=a;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var QP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=m.hasOwnProperty("GroupChange")&&"function"===typeof m.GroupChange?m.GroupChange:m.GroupChange=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(a){this.changes.push(a);
a.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(Bh.Change);Bh.GroupChange=QP;Bh.GroupChange=QP;Bh.GroupChange=QP;var RP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("ValueChange")&&"function"===typeof m.ValueChange?m.ValueChange:m.ValueChange=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.prop=d;this.value=k;this.prevValue=null;this.meta=b}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],m,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(Bh.Change);Bh.ValueChange=RP;Bh.ValueChange=RP;Bh.ValueChange=RP;var SP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("MethodCallChange")&&"function"===typeof m.MethodCallChange?m.MethodCallChange:m.MethodCallChange=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.selector=d;this.args=k;this.undo=b;this.meta=e}},{key:"apply",value:function(){var a=this.target;a[this.selector].apply(a,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var a=this.undo,d=a.target;d[a.selector].apply(d,a.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(Bh.GroupChange);Bh.MethodCallChange=SP;Bh.MethodCallChange=SP;Bh.MethodCallChange=SP;var ZH=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=m.hasOwnProperty("ChangeManager")&&"function"===typeof m.ChangeManager?m.ChangeManager:m.ChangeManager=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(a){return this.changes.filter(function(d){return d.target===a})}},{key:"apply",value:function(a,d){d.apply()}},{key:"doWithValueChangeMeta",value:function(a,d,k){this.defaultMeta=a;this.metaStack.push(a);try{var b=k(d)}finally{return this.metaStack.pop(),
this.defaultMeta=Bh.arr.last(this.metaStack)||{},b}}},{key:"addValueChange",value:function(a,d,k,b){d=new Bh.ValueChange(a,d,k,Object.assign({},this.defaultMeta,{},b));return this._record(a,d)}},{key:"addMethodCallChangeDoing",value:function(a,d,k){var b=a.target,e=a.selector,l=a.args;(a=a.undo)||(a=function(){return console.warn("No undo recorded for "+b+"."+e)});l=new Bh.MethodCallChange(b,e,l,a,this.defaultMeta);d.groupChangesWhile(l,k);return l}},{key:"_record",value:function(a,d){Bh.signal(this,
"changeRecorded",d);d.hasOwnProperty("value")&&(d.prevValue=a._morphicState[d.prop],a._morphicState[d.prop]=d.value);a.makeDirty(d);var k=Bh.arr.last(this.changeGroupStack);k&&k.consumesChanges()?k.addChange(d):(this.changes.push(d),a._rev=++this.revision,this.informChangeListeners(d));Bh.informMorph(this,d,a);return d}},{key:"groupChangesWhile",value:function(a,d,k,b){b=void 0===b?!0:b;d||(d=new Bh.GroupChange(a));this.changeGroupStack.push(d);try{return k(),Bh.arr.remove(this.changeGroupStack,d),
b?this._record(a,d):d}catch(e){throw Bh.arr.remove(this.changeGroupStack,d),e;}}},{key:"dontRecordChangesWhile",value:function(a,d){return this.groupChangesWhile(a,void 0,d,!1)}},{key:"recordChangesWhile",value:function(a,d){var k=this.changes.length;a();a=this.changes.slice(k,this.changes.length);return d?a.filter(d):a}},{key:"addChangeListener",value:function(a){Bh.arr.pushIfNotIncluded(this.changeRecordedListeners,a)}},{key:"removeChangeListener",value:function(a){Bh.arr.remove(this.changeRecordedListeners,
a)}},{key:"informChangeListeners",value:function(a){this.changeRecordedListeners.forEach(function(d){return d(a)})}},{key:"recordChangesStart",value:function(a,d){d=Bh.obj.newKeyIn(this.changeRecorders,(void 0===d?"":d)+"__change_recorder_"+Date.now());var k=a?function(e){return a(e)&&b.changes.push(e)}:function(e){return b.changes.push(e)},b=this.changeRecorders[d]={id:d,filter:a,changes:[],listener:k};this.addChangeListener(k);return b}},{key:"recordChangesStop",value:function(a){if(!(a in this.changeRecorders))return[];
var d=this.changeRecorders[a],k=d.changes;d=d.listener;delete this.changeRecorders[a];this.removeChangeListener(d);return k}},{key:"recordChangesStartForMorph",value:function(a,d){d=this.recordChangesStart(d,a.id);var k=this.changeRecordersPerMorph.get(a);k||(k=[],this.changeRecordersPerMorph.set(a,k));k.push(d.id);return d}},{key:"recordChangesStopForMorph",value:function(a,d){var k=this.changeRecordersPerMorph.get(a);if(!k||!k.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
a+": recorder not found"),[];(a=d)?Bh.arr.remove(k,a):a=k.pop();return this.recordChangesStop(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],m,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7620})}(void 0);Bh.ChangeManager=ZH;Bh.ChangeManager=
ZH;Bh.ChangeManager=ZH;var Xj=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");Xj.printArg=function(f){return Xj.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Xj.obj=ff;Xj.arr=Ne;Xj.events=tu;Xj.fun=Tj;(function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=m.hasOwnProperty("Undo")&&"function"===typeof m.Undo?m.Undo:m.Undo=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){d=void 0===d?[]:d;this.name=a;this.targets=d;this.timestamp=this.changes=this.recorder=null;this.no=void 0===k?0:k}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(a){var d=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(k){var b=k.target;return b.isUsedAsEpiMorph()||!d.targets.some(function(e){return e===b||e.isAncestorOf(b)})?!1:"function"===typeof a?a(k):!0});return this}},{key:"stopRecording",value:function(){var a=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(a);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(a){return a.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(a){return a.reverseApply()});return this}},{key:"addTarget",value:function(a){Xj.arr.pushIfNotIncluded(this.targets,a)}},{key:"addUndos",value:function(a){a=Xj.arr.sortBy(a.concat(this).filter(function(d){return d.recorded()}),function(d){return d.no});
a.length&&(this.changes=Xj.arr.flatmap(a,function(d){return d.changes}),this.timestamp=a[0].timestamp,this.no=a[0].no,this.name=a.map(function(d){return d.name}).join("-"))}},{key:"toString",value:function(){var a=this.name,d=this.changes,k=this.no,b=this.isRecording();d=d.length?"\n  "+d.map(function(e){var l=e.selector,p=e.args,q=e.prop,u=e.value;e=e.target;return l?e+"."+l+"("+p.map(Xj.printArg)+")":e+"."+q+" = "+Xj.printArg(u)}).join("\n  "):"no changes";return"Undo("+k+":"+a+" "+(b?"RECORDING ":
"")+d+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],m,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2504})})(void 0);var jB=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=m.hasOwnProperty("UndoManager")&&"function"===
typeof m.UndoManager?m.UndoManager:m.UndoManager=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.reset();this.filter=a}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(a){a=
void 0===a?null:a;this.groupLaterCancel();a&&this.undos.includes(a)&&(this.grouping.current=Xj.arr.uniq(this.undos.slice(this.undos.indexOf(a)).concat(this.grouping.current)));this.grouping.current.length&&(a=this.grouping.current.slice(1),this.grouping.current[0].addUndos(a),this.undos=Xj.arr.withoutAll(this.undos,a),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(a,d){d=void 0===d?"new undo group":d;this.group();this.undoStart(a,d);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var a=this.grouping;a.debounce&&(a.debouncedCanceled=!0,this.grouping=Object.assign({},a,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(a){var d=this,k=this.grouping;(k.debounce||(k.debounce=Xj.fun.debounce(a||k.debounceTime,function(){k.debounce=null;k.debouncedCanceled||d.group()})))()}},{key:"undoStart",value:function(a,d){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo being recorded. Tried to start undo "+d+" for "+
a.name+", but "+this.undoInProgress.name+" is currently in progress.");else return this.undoInProgress=(new Xj.Undo(d,[a],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var a=this.undoInProgress;if(!a)return null;a.stopRecording();this.undoInProgress=null;this.undos.push(a);this.grouping.current.push(a);this.redos.length&&(this.redos.length=0);return a}},{key:"removeLatestUndo",value:function(){this.undoStop();var a=this.undos.pop();Xj.arr.remove(this.grouping.current,
a);return a}},{key:"undo",value:function(){var a=this.removeLatestUndo();if(a){Xj.arr.remove(this.grouping.current,a);this.redos.unshift(a);this.applyCount++;try{a.reverseApply()}finally{this.applyCount--}return a}}},{key:"redo",value:function(){this.undoStop();var a=this.redos.shift();if(a){this.undos.push(a);this.applyCount++;try{a.apply()}finally{this.applyCount--}return a}}},{key:"toString",value:function(){var a=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");
return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?", UNDO IN PROGRESS":"")+a+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],m,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2639,end:5941})}(void 0);Xj.UndoManager=
jB;Xj.UndoManager=jB;Xj.UndoManager=jB;var Qk=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");Qk.promise=Uf;Qk.bowser=Cn;Qk.touchInputDevice=Ol;Qk.placeholderValue="\u0001\u0001";Qk.placeholderRe=/\u0001/g;var S2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=m.hasOwnProperty("TextInput")&&"function"===typeof m.TextInput?m.TextInput:m.TextInput=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.eventDispatcher=a;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(a,d){var k=this,b=this.domState,e=b.isInstalled,l=b.rootNode;this.world=d;if(e){if(l===a)return;this.uninstall()}b.isInstalled=!0;b.rootNode=
a;a.tabIndex=1;d=b.textareaNode=a.ownerDocument.createElement("textarea");d.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
Qk.touchInputDevice&&d.setAttribute("x-palm-disable-auto-cap",!0);d.setAttribute("wrap","off");d.setAttribute("autocorrect","off");d.setAttribute("autocapitalize","off");d.setAttribute("spellcheck",!1);d.setAttribute("aria-label","Lively Textinput Node");d.className="lively-text-input";d.value="";a.insertBefore(d,a.firstChild);Qk.touchInputDevice&&(d.setAttribute("disabled",!0),d.style.setProperty("transform","scale(0)"));b.eventHandlers=[{type:"focusin",node:a,fn:function(p){return k.onRootNodeFocus(p)},
capturing:!0},{type:"focusin",node:b.textareaNode,fn:function(p){return k.onTextAreaFocus(p)},capturing:!0},{type:"blur",node:b.textareaNode,fn:function(p){return k.onTextAreaBlur(p)},capturing:!0},{type:"keydown",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"keyup",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"cut",node:b.textareaNode,fn:function(p){return k.eventDispatcher.dispatchDOMEvent(p)},
capturing:!1},{type:"copy",node:b.textareaNode,fn:function(p){return k.inputState.manualCopy?k.inputState.manualCopy.onEvent(p):k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"paste",node:b.textareaNode,fn:function(p){return k.inputState.manualPaste?k.inputState.manualPaste.onEvent(p):k.eventDispatcher.dispatchDOMEvent(p)},capturing:!1},{type:"compositionstart",node:b.textareaNode,fn:function(p){return k.onCompositionStart(p)},capturing:!1},{type:"compositionend",node:b.textareaNode,fn:function(p){return k.onCompositionEnd(p)},
capturing:!1},{type:"compositionupdate",node:b.textareaNode,fn:function(p){return k.onCompositionUpdate(p)},capturing:!1},{type:"input",node:b.textareaNode,fn:function(p){return k.onInput(p)},capturing:!1}];b.eventHandlers.forEach(function(p){return p.node.addEventListener(p.type,p.fn,p.capturing)});return this}},{key:"uninstall",value:function(){var a=this.domState;a.isInstalled=!1;a.eventHandlers.forEach(function(k){return k.node.removeEventListener(k.type,k.fn,k.capturing)});var d=a.textareaNode;
d&&d.parentNode&&d.parentNode.removeChild(d);a.rootNode=null;return this}},{key:"resetValue",value:function(){var a=this.domState.textareaNode;a&&(a.value=Qk.placeholderValue)}},{key:"readValue",value:function(){var a=this.domState.textareaNode;return a?a.value.replace(Qk.placeholderRe,""):""}},{key:"focus",value:function(a,d){var k=this.domState.textareaNode;k&&(Qk.touchInputDevice&&a&&a.isText&&!a.readOnly&&k.removeAttribute("disabled"),a&&a.stealFocus||k.getRootNode().activeElement!==k&&k.focus(),
Qk.bowser.firefox&&Promise.resolve().then(function(){return k.getRootNode().activeElement!==k&&k.focus()}),a&&a.isText&&a.focusable?(Qk.touchInputDevice&&k.focus(),this.ensureBeingAtCursorOfText(a)):d&&this.ensureBeingInVisibleBoundsOfWorld(d))}},{key:"blur",value:function(){var a=this.domState.textareaNode;Qk.touchInputDevice&&a.setAttribute("disabled",!0);a&&a.blur()}},{key:"doCopyWithMimeTypes",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var k=d.domState.textareaNode,
b=function(e){k.removeEventListener("copy",b);e.preventDefault();a.forEach(function(l){return e.clipboardData.setData(l.type,l.data)})};setTimeout(function(){return k.removeEventListener("copy",b)},300);k.addEventListener("copy",b);k.value="";k.select();k.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(a){var d=this;return this.execCommand("manualCopy",function(){var k=d.domState.textareaNode;k.value=a;k.select();k.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var a=
this;return this.execCommand("manualPaste",function(){var d=a.domState.textareaNode;d.value="";d.select();d.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(a,d){var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(!k.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");b=k.inputState;if(!b[a]){q.jumpTo(2);break}q.setCatchFinallyBlocks(3);return q.yield(b[a].promise,
5);case 5:q.leaveTryBlock(2);break;case 3:q.enterCatchBlock();case 2:return e=Qk.promise.deferred(),l=!1,b[a]={onEvent:function(u){l||(b[a]=null,l=!0,e.resolve(u))},promise:e.promise},d(),q.setCatchFinallyBlocks(6),q.yield(Qk.promise.waitFor(1E3,function(){return l}),8);case 8:q.leaveTryBlock(7);break;case 6:p=q.enterCatchBlock(),b[a]=null,l=!0,e.reject(p);case 7:return q.return(e.promise)}})}},{key:"onTextAreaBlur",value:function(a){var d=this;setTimeout(function(){var k=d.domState||{},b=k.textareaNode;
k=k.rootNode;if(b&&k){var e=b.getRootNode();e.activeElement!==k&&(!d.world.isEmbedded||e.activeElement)||d.world.focusedMorph&&d.world.focusedMorph.stealFocus||Qk.touchInputDevice||b.focus()}})}},{key:"onTextAreaFocus",value:function(a){}},{key:"onRootNodeFocus",value:function(a){var d=this.domState||{},k=d.rootNode;if(a.target===d.textareaNode||a.target===k)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(a){if(!this.inputState.composition){if(!a.data){var d=
this.readValue();a.__defineGetter__("data",function(){return d})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(a)}}},{key:"onCompositionStart",value:function(a){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(a)}},{key:"onCompositionUpdate",value:function(a){var d=this.inputState.composition,k=this.readValue();d.lastValue!==k&&(d.lastValue=k,this.eventDispatcher.dispatchDOMEvent(a))}},{key:"onCompositionEnd",value:function(a){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(a)}},
{key:"setPosition",value:function(a){var d=(this.domState||{}).textareaNode;d&&(d.style.left=a.x+"px",d.style.top=a.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(a){this.setPosition(a.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(a){var d=a.world();if(d){var k=a.whatsVisible,b=a.cursorPosition,e=b.row;b=b.column;e=Math.max(k.startRow,Math.min(e,k.endRow));k=a.charBoundsFromTextPosition({row:e,column:b}).topLeft();a=d.visibleBounds().insetBy(10).constrainPt(a.worldPoint(k.subPt(a.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],m,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12394})}(void 0),Fha=S2=Qk.TextInput;Qk.default=S2;var TP=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");TP.arr=Ne;var T2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=m.hasOwnProperty("KillRing")&&"function"===typeof m.KillRing?m.KillRing:m.KillRing=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){this.size=void 0===a?0:a;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(a){var d=this.buffer;d.push(a);this.size&&d.length>this.size&&d.splice(0,d.length-this.size);this.pointer=this.buffer.length-1;return a}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],m,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),Gha=T2=TP.KillRing;TP.default=T2;var Pg=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");Pg.computeHashIdOfEvent=function(f){var m=
f.key;f=0|(f.ctrlKey?1:0)|(f.altKey?2:0)|(f.shiftKey?4:0)|(f.metaKey?8:0);0===f&&!Pg.canonicalizeFunctionKey(m)&&m&&Pg.letterRe.test(m)&&(f=-1);return f};Pg.isModifier=function(f){if(Pg.isNumber(f))return!1;f=f.replace(/-$/,"").toLowerCase();return Pg.arr.withoutAll(Object.keys(Pg.KEY_MODS),["","input-"]).includes(f)};Pg.canonicalizeFunctionKey=function(f){f&&(f=f.toLowerCase());switch(f){case "space":f="space";break;case "esc":f="escape";break;case "return":f="enter";break;case "arrowleft":f="left";
break;case "arrowright":f="right";break;case "arrowup":f="up";break;case "arrowdown":f="down"}return Pg.FUNCTION_KEYS.includes(f)?Pg.string.capitalize(f):""};Pg.decodeKeyIdentifier=function(f,m){var n=/u\+?([\d\w]{4})/gi,a=function(d,k){return String.fromCharCode(parseInt(k,16))};f=f&&f.replace(n,a);if("Command"===f||"Cmd"===f)f="Meta";" "===f&&(f="Space");8===m&&(f="Backspace");return f};Pg.identifyKeyFromCode=function(f){f=f.code;if("string"!==typeof f)return null;if(f.startsWith("Key"))return f.slice(3);
if(f.startsWith("Numpad"))return f;if(f.startsWith("Digit")||f.startsWith("Arrow"))return f.slice(5);if(f.match(/^F[0-9]{1-2}$/))return f;switch(f){case "Insert":case "Home":case "PageUp":case "PageDown":return f;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";
case "Semicolon":return";"}return null};Pg.dedasherize=function(f){for(var m=[];;){var n=f.indexOf("-");if(-1===n)return f&&m.push(f),m;0===n?(m.push(f[0]),f=f.slice(2)):(m.push(f.slice(0,n)),f=f.slice(n+1))}};Pg.bowser=Cn;Pg.arr=Ne;Pg.string=Bg;Pg.letterRe=/[a-z]/i;Pg.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};Pg.KEY_MODS=function(){for(var f={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},m=["alt","ctrl","meta","shift"],n=Math.pow(2,m.length);n--;)f[n]=
m.filter(function(a){return n&f[a]}).join("-")+"-";f[0]="";f[-1]="input-";return f}();Pg.isNumber=function(){var f=/^[0-9]+$/;return function(m){return f.test(m)}}();Pg.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");Pg.Keys={computeHashIdOfEvent:Pg.computeHashIdOfEvent,keyComboToEventSpec:function(f,
m){m=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},m);var n=Pg.dedasherize(f),a={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return m.keyCombo=f,m.key=n[1],m;for(var d=n.length-1;0<=d;d--){var k=a[n[d].toLowerCase()];k&&(n.splice(d,1),m.isModified=!0,m[k]=!0)}if(!n.length)return m.keyCombo=
Pg.Keys.eventToKeyCombo(m),m.key=Pg.arr.last(Pg.dedasherize(m.keyCombo)),m.onlyModifiers=!0,m;1<n.length&&console.warn('Strange key "'+f+'" encountered in keyComboToEventSpec, parsing probably failed');f=Pg.arr.last(n);(n=Pg.canonicalizeFunctionKey(f))?(m.isFunctionKey=!0,m.key=n):m.key=m.isModified?Pg.string.capitalize(f):f;m.keyCombo=Pg.Keys.eventToKeyCombo(m);return m},eventToKeyCombo:function(f,m){Object.assign({ignoreModifiersIfNoCombo:!1,ignoreKeys:[]},m);m=f.key;var n=f.data,a=f.keyIdentifier;
if("string"===typeof n)return"input-"+n;if(!m&&a&&(m=Pg.decodeKeyIdentifier(a,f.which||f.keyCode),f.key=m=m[f.shiftKey?"toUpperCase":"toLowerCase"](),Pg.isModifier(m)))return Pg.string.capitalize(m);n=Pg.KEY_MODS[Pg.computeHashIdOfEvent(f)];if("input-"===n)return n+m;f.code&&(m=Pg.identifyKeyFromCode(f)||m);f=!m||Pg.isModifier(m)?n.replace(/-$/,""):n+m;f.match(/\s$/)&&(f=f.replace(/\s$/,"Space"));return f.replace(/(^|-)([a-z])/g,function(d,k,b){return k+b.toUpperCase()})},canonicalizeKeyCombo:function(f){return Pg.Keys.eventToKeyCombo(Pg.Keys.keyComboToEventSpec(f))},
canonicalizeEvent:function(f){return f._isLivelyKeyEventSpec?f:Pg.Keys.keyComboToEventSpec(Pg.Keys.eventToKeyCombo(f))}};var UP=Pg.Keys;Pg.default=UP;var Qg=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");Qg.bowser=Cn;Qg.obj=ff;Qg.pt=kh;Qg.Keys=UP;Qg.cumulativeOffset=rw;var VP="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");Qg.pointerEvents=VP;Qg.pointerEvents=VP;Qg.pointerEvents=
VP;var WP="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");Qg.mouseEvents=WP;Qg.mouseEvents=WP;Qg.mouseEvents=WP;var XP=["keydown","keyup","keypress"];Qg.keyboardEvents=XP;Qg.keyboardEvents=XP;Qg.keyboardEvents=XP;var $H=Qg.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");Qg.keyLikeEvents=$H;Qg.keyLikeEvents=$H;Qg.keyLikeEvents=$H;var aI=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),
n=m.hasOwnProperty("Event")&&"function"===typeof m.Event?m.Event:m.Event=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e,l,p){this.type=a;this.domEvt=d;this.dispatcher=k;this.targetMorphs=b;this.hand=e;this.halo=l;this.layoutHalo=p;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=
[]}},{key:"onDispatch",value:function(a){this.onDispatchCallbacks.push(a);return this}},{key:"onAfterDispatch",value:function(a){this.onAfterDispatchCallbacks.push(a);return this}},{key:"onStop",value:function(a){this.onStopCallbacks.push(a);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},
{key:"isMouseEvent",value:function(){return Qg.pointerEvents.includes(this.type)||Qg.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&Qg.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(a){return a()})}},
{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return Qg.pt(0,0);for(var a=this.domEvt.composedPath()[0];a&&a.id!==this.world.id;)a=a.parentNode;if(!a){a=this.domEvt.composedPath()[0]||this.domEvt.target;var d=this.world.env.domEnv.document;a=(a.nodeType===a.DOCUMENT_NODE?a:d).getElementById(this.world.id)}if(!a)return console.error("event position: cannot find world node for determining the position!"),
Qg.pt(0,0);a=Qg.cumulativeOffset(a);d=this.domEvt;a=Qg.pt((d.pageX||0)-a.left,(d.pageY||0)-a.top);1!==this.world.scale&&(a=a.scaleBy(1/this.world.scale));return a}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(a){return a.localize(this.position)}},{key:"isClickTarget",value:function(a){var d=this.state.clickedOnMorph;return d&&(a===d||a.isAncestorOf(d))}},{key:"leftMouseButtonPressed",
value:function(){return this.domEvt?1===this.domEvt.buttons:!1}},{key:"rightMouseButtonPressed",value:function(){return this.domEvt?2===this.domEvt.buttons:!1}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?4===this.domEvt.buttons:!1}},{key:"isCommandKey",value:function(){var a=this.domEvt;if(!a)return!1;var d=!1;Qg.bowser.mac||(d=d||a.ctrlKey);if(Qg.bowser.tablet||Qg.bowser.tablet)d=d||!1;return d||a.metaKey||"Meta"===a.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&
!!this.domEvt.shiftKey}},{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=Qg.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(a){return this._keyCombo=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],m,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:4928})}(void 0);Qg.Event=aI;Qg.Event=aI;Qg.Event=aI;var bI=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=m.hasOwnProperty("KeyEvent")&&"function"===typeof m.KeyEvent?m.KeyEvent:m.KeyEvent=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k,b,e,l,p){console.assert(Qg.keyLikeEvents.includes(a),"not a keyboard event: "+a);Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a,d,k,b,e,l,p);Object.assign(this,Qg.Keys.canonicalizeEvent(d))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],m,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4937,end:5307})}(Qg.Event);Qg.KeyEvent=bI;Qg.KeyEvent=bI;Qg.KeyEvent=bI;var cI=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=m.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof m.SimulatedDOMEvent?m.SimulatedDOMEvent:m.SimulatedDOMEvent=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(a.position){var d=a.position,k=d.x;d=d.y;a=Qg.obj.dissoc(a,["position"]);a.pageX=k;a.pageY=d}!a.hasOwnProperty("pointerId")&&Qg.mouseEvents.concat(Qg.pointerEvents).includes(a.type)&&(a=Object.assign({},a,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,
pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},a))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"composedPath",value:function(){return[this.target]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],m,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5316,end:6265})}(void 0);Qg.SimulatedDOMEvent=cI;Qg.SimulatedDOMEvent=cI;Qg.SimulatedDOMEvent=cI;var ye=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");ye.dragStartEvent=function(f,m,n,a,d,k,b){var e=(new ye.Event("morphicdragstart",f,m,[n],d,k,b)).onDispatch(function(){a.draggedMorph=
n;a.dragStartMorphPosition=n.position;a.dragStartPosition=e.position;a.lastDragPosition=e.position;a.dragDelta=ye.pt(0,0);a.absDragDelta=ye.pt(0,0)}).onStop(function(){a.draggedMorph=null;m.schedule(ye.dragEndEvent(f,m,n,a,d,k,b))});return e};ye.dragEvent=function(f,m,n,a,d,k,b){var e=(new ye.Event("morphicdrag",f,m,[a.draggedMorph],d,k,b)).onDispatch(function(){a.dragDelta=(a.draggedMorph.owner||m.world).getInverseTransform().transformDirection(e.position.subPt(a.lastDragPosition));a.absDragDelta=
e.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){return a.lastDragPosition=e.position}).onStop(function(){a.draggedMorph=null;m.schedule(ye.dragEndEvent(f,m,n,a,d,k,b))});return e};ye.dragEndEvent=function(f,m,n,a,d,k,b){var e=a.draggedMorph||n,l=(new ye.Event("morphicdragend",f,m,[e],d,k,b)).onDispatch(function(){a.dragDelta=(e.owner||m.world).getInverseTransform().transformDirection(l.position.subPt(a.lastDragPosition));a.absDragDelta=l.position.subPt(a.clickedOnPosition)}).onAfterDispatch(function(){a.draggedMorph=
null;a.lastDragPosition=null;a.dragDelta=ye.pt(0,0);a.absDragDelta=ye.pt(0,0);a.dragStartMorphPosition=null;a.dragStartPosition=null});return l};ye.focusEvents=function(f,m){var n=f.eventState;if(n.focusedMorph===m)return[];f=[];n.focusedMorph&&f.push((new ye.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));f.push((new ye.Event("focus",null,this,[m],null,null,null)).onDispatch(function(){return n.focusedMorph=m}));return f};ye.arr=Ne;ye.fun=
Tj;ye.Path=Sg;ye.promise=Uf;ye.pt=kh;ye.config=rk;ye.TextInput=Fha;ye.KillRing=Gha;ye.Event=aI;ye.KeyEvent=bI;ye.SimulatedDOMEvent=cI;ye.keyLikeEvents=$H;ye.cumulativeOffset=rw;ye.bowser=Cn;ye.touchInputDevice=Ol;ye.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"wheel",capturing:!1,passive:!1},
{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];ye.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);ye.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},
{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];ye.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",
morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",
dragleave:"onNativeDragleave",drop:"onNativeDrop"};ye.focusTargetingEvents="keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");ye.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var U2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=m.hasOwnProperty("EventDispatcher")&&"function"===typeof m.EventDispatcher?m.EventDispatcher:m.EventDispatcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d){this.activations=0;this.emitter=a;this.keyInputHelper=null;this.world=d;this.installed=!1;this.handlerFunctions=[];this.killRing=new ye.KillRing(ye.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=ye.Path("performance.timing.navigationStart").get(a)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState=
{timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",
count:void 0}}},{key:"focusMorph",value:function(a){var d=this;this.keyInputHelper&&this.keyInputHelper.focus(a,this.world);ye.focusEvents(this,a).forEach(function(k){return d.dispatchEvent(k)})}},{key:"isMorphFocused",value:function(a){return this.eventState.focusedMorph===a}},{key:"isMorphHovered",value:function(a){return this.eventState.hover.hoveredOverMorphs.includes(a)}},{key:"isMorphClicked",value:function(a){return this.eventState.clickedMorph==a}},{key:"isKeyPressed",value:function(a){return Object.keys(this.eventState.pressedKeys).map(function(d){return d.toLowerCase()}).includes(a.toLowerCase())}},
{key:"whenIdle",value:function(){var a=this;return ye.promise.waitFor(function(){return 0===a.activations})}},{key:"install",value:function(a){var d=this;if(this.installed)return this;this.installed=!0;var k=this.emitter,b=System.global;ye.domEventsWeListenTo.forEach(function(e){var l=e.type,p=e.capturing;e=e.passive;var q=function(u){return d.dispatchDOMEvent(u)};d.handlerFunctions.push({node:k,type:l,fn:q,capturing:p});k.addEventListener(l,q,{capture:p,passive:e})});b.addEventListener&&ye.globalDomEventsWeListenTo.forEach(function(e){var l=
e.type,p=e.capturing,q=e.morphMethod;e=e.passive;var u=function(w){return d.dispatchDOMEvent(w,d.world,q)};d.handlerFunctions.push({node:b,type:l,fn:u,capturing:p});b.addEventListener(l,u,{capture:p,passive:e})});this.keyInputHelper=(new ye.TextInput(this)).install(a,this.world);ye.bowser.ios&&a.setAttribute("touch-action","auto");return this}},{key:"uninstallHandler",value:function(a){var d=this.handlerFuntions.find(function(k){return k.type==a});d&&d.node.removeEventListener(d.node,d.fn,d.capturing)}},
{key:"uninstall",value:function(){this.installed=!1;var a=this.handlerFunctions;a.forEach(function(d){d.node.removeEventListener(d.type,d.fn,d.capturing)});a.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(a,d){var k=this,b=a.type,e=this.eventState,l=[d].concat(d.ownerChain()),p="touch"===a.pointerType,q=a.pointerId,u=a.composedPath()[0],w="number"===typeof q&&(ye.touchInputDevice||a.isPrimary),y=w?this.world.handForPointerId(q,
a.isPrimary):this.world.firstHand,A=w&&!p?this.world.haloForPointerId(q):null,C=w&&!p?this.world.layoutHaloForPointerId(q):null,D=new (ye.keyLikeEvents.includes(b)?ye.KeyEvent:ye.Event)(b,a,this,l,y,A,C),L=[D];w=[];switch(b){case "keydown":e.pressedKeys[D.key]=!0;break;case "keyup":"Meta"===D.key?e.pressedKeys={}:delete e.pressedKeys[D.key];break;case "click":L=this.processDOMEvent(Object.assign({},a,{type:"pointerdown"}),d).events;b=this.processDOMEvent(Object.assign({},a,{type:"pointerup"}),d).events;
L=L.concat(b);break;case "pointerdown":D.onDispatch(function(){k.focusMorph(d);e.clickedOnMorph=d;e.clickedOnPosition=D.position;e.downTimeStamp=a.timeStamp;var I=!1,S=0;if(e.prevClick){S=e.prevClick;I=S.clickedOnMorph;var V=S.clickedAtTime;S=S.clickCount;V=Date.now()-V;I=I===d&&V<ye.config.repeatClickInterval}e.clickCount=I?S+1:1});break;case "pointerup":D.onAfterDispatch(function(){var I=e.clickedOnMorph,S=e.clickedOnPosition,V=e.clickCount,ba=Date.now();e.prevClick={clickedOnMorph:I,clickedOnPosition:S,
clickedAtTime:ba,clickCount:V};e.clickedOnMorph=null;e.clickCount=0;I=a.timeStamp-e.downTimeStamp;S=e.clickedOnPosition.dist(D.position);V=ye.config.longClick;ba=V.minDur;var ua=V.maxDur;S<V.maxDist&&I>=ba&&I<=ua&&(I=new ye.Event("longclick",a,k,l,y,A,C),k.schedule(I))});e.draggedMorph&&(L.push(ye.dragEndEvent(a,this,d,e,y,A,C)),D.targetMorphs=[e.draggedMorph,this.world]);y.carriesMorphs()&&(e.dropHoverTarget?(L.push(new ye.Event("morphicdrophoverout",a,this,[e.dropHoverTarget],y,A,C)),d=e.dropHoverTarget,
e.dropHoverTarget=null):d=y.findDropTarget(D.position,y.grabbedMorphs),y.isAncestorOf(d)&&(d=this.world),L.push(new ye.Event("morphicdrop",a,this,[d],y,A,C)),D.targetMorphs=[this.world]);break;case "pointermove":y.carriesMorphs()?(D.targetMorphs=[this.world],b=y.findDropTarget(D.position,y.grabbedMorphs)||this.world,e.dropHoverTarget===b?L.push(new ye.Event("morphicdrophoverupdate",a,this,[b],y,A,C)):(e.dropHoverTarget&&L.push(new ye.Event("morphicdrophoverout",a,this,[e.dropHoverTarget],y,A,C)),
e.dropHoverTarget=b,L.push(new ye.Event("morphicdrophoverin",a,this,[b],y,A,C)))):e.draggedMorph?(D.targetMorphs=[this.world],L.push(ye.dragEvent(a,this,d,e,y,A,C))):e.clickedOnMorph&&e.clickedOnPosition&&e.clickedOnMorph.draggable&&!e.draggedMorph&&!y.carriesMorphs()&&(b=e.clickedOnPosition.dist(D.position),p=e.clickedOnMorph,b>p.dragTriggerDistance&&(p.grabbable?L.push(new ye.Event("grab",a,this,[p],y,A,C)):p.draggable&&L.push(ye.dragStartEvent(a,this,p,e,y,A,C)),D.targetMorphs=[this.world]));break;
case "pointerover":e.hover.unresolvedPointerOut&&(e.hover.unresolvedPointerOut=!1);b=[d].concat(d.ownerChain()).reverse();L=ye.arr.withoutAll(e.hover.hoveredOverMorphs,b).map(function(I){return(new ye.Event("hoverout",a,k,[I],y,A,C)).onDispatch(function(){return ye.arr.remove(e.hover.hoveredOverMorphs,I)})});b=ye.arr.withoutAll(b,e.hover.hoveredOverMorphs).map(function(I){return(new ye.Event("hoverin",a,k,[I],y,A,C)).onDispatch(function(){return ye.arr.pushIfNotIncluded(e.hover.hoveredOverMorphs,
I)})});L=L.concat(b);break;case "pointerout":L=[];e.hover.unresolvedPointerOut=!0;w.push(function(){if(e.hover.unresolvedPointerOut)return Promise.all(e.hover.hoveredOverMorphs.map(function(I){return k.schedule((new ye.Event("hoverout",a,k,[I],y,A,C)).onAfterDispatch(function(){return ye.arr.remove(e.hover.hoveredOverMorphs,I)}))}))});p&&this.world.removeHandForPointerId(q);break;case "blur":L=[(new ye.Event(b,a,this,[d],y,A,C)).onDispatch(function(){return e.focusedMorph=null})];break;case "focus":L=
ye.focusEvents(this,d);break;case "scroll":L=[(new ye.Event(b,a,this,[d],y,A,C)).onDispatch(function(){if(!e.scroll.interactiveScrollInProgress){var I=ye.promise.deferred(),S=I.promise,V=I.resolve;I="Firefox"==ye.bowser.name?500:250;"Safari"==ye.bowser.name&&(I=1E3);e.scroll.interactiveScrollInProgress=S;S.debounce=ye.fun.debounce(I,function(){e.scroll.interactiveScrollInProgress=null;V()})}e.scroll.interactiveScrollInProgress.debounce();S=u.documentElement||u;I=S.scrollLeft;var ba=S.scrollTop,ua=
d.scroll,Fa=ua.x;ua=ua.y;if("hidden"!=S.style.overflow&&Fa!==I||ua!==ba)d.scroll=ye.pt(I,ba)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":d.isText?D.targetMorphs=[d]:L=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==b&&"dragover"!==b||a.preventDefault()}return{events:L,later:w}}},{key:"schedule",value:function(a){var d=this;this.activations++;return Promise.resolve().then(function(){return d.dispatchEvent(a)}).then(function(){return d.activations--},
function(k){d.activations--;throw k;})}},{key:"dispatchEvent",value:function(a,d){d=d||ye.typeToMethodMap[a.type];if(!d)throw Error("dispatchEvent: "+a.type+" not yet supported!");a.onDispatchCallbacks.forEach(function(e){return e()});this.activations++;for(var k,b=a.targetMorphs.length-1;0<=b;b--){try{a.targetMorphs[b][d](a)}catch(e){k=Error("Error in event handler "+a.targetMorphs[b]+"."+d+": "+(e.stack||e)),k.originalError=e,"undefined"!==typeof this.world?this.world.logError(k):console.error(k)}if(k||
a.stopped)break}this.activations--;a.onAfterDispatchCallbacks.forEach(function(e){return e()});if(k)throw k;}},{key:"dispatchDOMEvent",value:function(a,d,k){var b=this,e=this.world,l=this.eventState,p=this.nodeMorphMap,q=a.type;l.timeOfLastActivity=this.timestampBase+a.timeStamp;if(!d&&ye.focusTargetingEvents.includes(q))d=l.focusedMorph||e;else if(!d){for(l=a.composedPath()[0];;){d=l.className||"";"string"!==typeof d&&"baseVal"in d&&(d=d.baseVal);if(d&&d.includes("Morph"))break;if(!(l=l.parentNode))return}d=
p.get(l);if(!d){var u=l.id;(d=e.withAllSubmorphsDetect(function(w){return w.id===u}))&&p.set(l,d)}}d&&(a=this.processDOMEvent(a,d),p=a.events,a.later.map(function(w){b.activations++;return ye.promise.delay(0).then(w).then(function(){return b.activations--},function(y){b.activations--;throw y;})}),p.forEach(function(w){return b.dispatchEvent(w,k)}),e&&e.needsRerender()&&ye.eventsCausingImmediateRender.has(q)&&e.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(a){for(var d=[],k=
0;k<arguments.length;++k)d[k-0]=arguments[k];k=this.emitter.document||this.emitter.ownerDocument;var b=[];d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next()){var l=e=e.value,p=l.target,q=l.position;l=l.type;if(ye.focusTargetingEvents.includes(l)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+l+", no keyInputHelper installed!");e=Object.assign({},e,{target:this.keyInputHelper.textareaNode})}p||(p=q?this.world.morphsContainingPoint(q)[0]:this.world);
p.isMorph&&(e=Object.assign({},e,{target:k.getElementById(p.id)}));e.position&&(p=ye.cumulativeOffset(k.getElementById(this.world.id)),e.position=e.position.addXY(p.left,p.top));"scroll"===l&&("scrollLeft"in e||"scrollTop"in e)&&(e.target.scrollLeft=e.scrollLeft||0,e.target.scrollTop=e.scrollTop||0);e=new ye.SimulatedDOMEvent(e);b.push(e);this.dispatchDOMEvent(e)}return b}},{key:"doCopy",value:function(a){return this.keyInputHelper.doCopy(a)}},{key:"doCopyWithMimeTypes",value:function(a){return this.keyInputHelper.doCopyWithMimeTypes(a)}},
{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(a,d){var k=this,b=[],e=this.eventState;e.clickedOnMorph=null;e.dropHoverTarget&&(b.push(new ye.Event("morphicdrophoverout",d.domEvt,this,[e.dropHoverTarget],a,null,null)),e.dropHoverTarget=null);b.forEach(function(l){return k.dispatchEvent(l)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],m,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7170,end:30003})}(void 0),Hha=U2=ye.EventDispatcher;ye.default=U2;var Aj=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");Aj.defaultDOMEnv=VD;Aj.Renderer=YH;Aj.FontMetric=Eha;Aj.ChangeManager=ZH;Aj.UndoManager=jB;Aj.EventDispatcher=Hha;Aj.subscribe=Uy;Aj.unsubscribe=vK;var tn=Ia("av",function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),
n=m.hasOwnProperty("MorphicEnv")&&"function"===typeof m.MorphicEnv?m.MorphicEnv:m.MorphicEnv=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var d=this;a=void 0===a?Aj.defaultDOMEnv():a;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=
new Aj.ChangeManager;this.undoManager=new Aj.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof a.then?this._waitForDOMEnv=a.then(function(k){d._waitForDOMEnv=null;d.initWithDOMEnv(k);d.initialized=!0}).catch(function(k){return console.error("Error initializing MorphicEnv with dom env: "+k.stack)}):(this.initWithDOMEnv(a),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===
this}},{key:"initWithDOMEnv",value:function(a){this.domEnv=a;this.fontMetric=Aj.FontMetric.forDOMEnv(a)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var a=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(a,d){var k=this;d=void 0===d?this.renderer?this.renderer.rootNode:this.domEnv.document.body:d;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return k.setWorld(a)}):
this.setWorldRenderedOn(a,d)}},{key:"setWorldRenderedOn",value:function(a,d,k){var b=this;k=void 0===k?null:k;if(!a||!a.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.setWorldRenderedOn(a,d,k)});this.deleteHistory();this.uninstallWorldRelated();this.world=a;this.renderer=new Aj.Renderer(a,d,this.domEnv);this.renderer.domNode=k;this.eventDispatcher=(new Aj.EventDispatcher(a.isEmbedded?d:this.domEnv.window,
a)).install(d);a.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=a);a.focus();a.makeDirty();this.renderer.renderLater();return a.whenRendered().then(function(){return b})}},{key:"installSystemChangeHandlers",value:function(){var a=this;if(!this.systemChangeHandlers){var d=this.systemChangeHandlers={};d["lively.modules/moduleloaded"]=[Aj.subscribe("lively.modules/moduleloaded",function(k){return a.getTargetsFor("onModuleLoaded").forEach(function(b){return b.onModuleLoaded(k)})})];
d["lively.modules/modulechanged"]=[Aj.subscribe("lively.modules/modulechanged",function(k){return a.getTargetsFor("onModuleChanged").forEach(function(b){return b.onModuleChanged(k)})})];d["lively.partsbin/partpublished"]=[Aj.subscribe("lively.partsbin/partpublished",function(k){return a.getTargetsFor("onPartPublished").forEach(function(b){return b.onPartPublished(k)})})];d["lively.user/userchanged"]=[Aj.subscribe("lively.user/userchanged",function(k){return a.getTargetsFor("onUserChanged").forEach(function(b){return b.onUserChanged(k)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var a=this.systemChangeHandlers;a&&(this.systemChangeHandlers=null,Object.keys(a).forEach(function(d){return a[d].forEach(function(k){return Aj.unsubscribe(d,k)})}))}},{key:"getTargetsFor",value:function(a){var d=this.world,k=[];if(!d||!d.submorphs)return k;"function"===typeof d[a]&&k.push(d);d=$jscomp.makeIterator(d.submorphs);for(var b=d.next();!b.done;b=d.next())b=b.value,"function"===typeof b[a]&&k.push(b),b.isWindow&&b.targetMorph&&"function"===
typeof b.targetMorph[a]&&k.push(b.targetMorph);return k}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(a){return a._pathDependants=a._pathDependants.filter(function(d){return d.world()})})}},{key:"deleteHistory",value:function(){var a=this.changeManager,d=this.world,k=this.fontMetric;a&&(a.changes.length=0);d&&d.withAllSubmorphsDo(function(b){return b.undoManager&&b.undoManager.reset()});k&&k.reset()}},{key:"printStatus",value:function(){var a=this.changeManager,d=
this.world,k=0,b=0;d&&d.withAllSubmorphsDo(function(e){e.undoManager&&(k++,b+=e.undoManager.undos.length+e.undoManager.redos.length)});return a.changes.length+" changes recorded\n"+k+" morphs with undos\n"+b+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var a=this,d=this.whenRenderedRequesters,k=0,b=$jscomp.makeIterator(d),e=b.next();!e.done;e=b.next()){var l=$jscomp.makeIterator(e.value);e=l.next().value;var p=l=l.next().value,q=p.maxAttempts,u=p.resolve;p=p.reject;e._dirty||
e._rendering?++l.currentAttempt>q?(d.delete(e),p(Error("Failed to wait for whenRendered of "+e+" (tried "+q+"x)"))):k++:(d.delete(e),u(e))}this.whenRenderedTickingProcess=k?this.domEnv.window.requestAnimationFrame(function(){return a.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(a,d){var k=this;d=void 0===d?50:d;var b=this.whenRenderedRequesters,e=this.whenRenderedTickingProcess,l=b.get(a);if(!l){var p,q;l=new Promise(function(u,w){p=u;q=w});b.set(a,l={maxAttempts:d,currentAttempt:0,
resolve:p,reject:q,promise:l})}e||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return k.updateWhenRenderedRequests()}));return l.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var a=this.popDefault();if(!a)break;try{a.uninstall()}catch(d){console.error("Error uninstalling MorphicEnv: "+(d.stack||d))}}}},{key:"default",value:function(){var a=this.envs;a.length||this.pushDefault(new this);
return a[a.length-1]}},{key:"pushDefault",value:function(a){this.envs.push(a);return a}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],m,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:405,end:8366})}(void 0));Aj.MorphicEnv=
tn;Aj.MorphicEnv=tn;Aj.MorphicEnv=tn;var Iha=Object.freeze({__proto__:null,MorphicEnv:tn}),Nq=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");Nq.printArg=function(f){return Nq.obj.inspect(f,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};Nq.obj=ff;Nq.arr=Ne;Nq.promise=Uf;var V2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=m.hasOwnProperty("CommandHandler")&&"function"===typeof m.CommandHandler?m.CommandHandler:m.CommandHandler=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(a){this.history.push(a);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(a){var d=a.target.string,k=a.args,b=a.count,e=a.evt,l=a.keyCombo;return'"'+a.name+'" '+(e?e+" ":"")+(l?l+" ":"")+(k?Nq.printArg(k):"")+("number"===typeof b?" x"+b:"")+" "+d}},{key:"lookupCommand",value:function(a,d){var k;if(!a)return{};"string"===typeof a&&(k=a);"string"===typeof a.command&&(k=a.command);if(a.exec){var b=a;k=b.name}b||(b=d.commands.find(function(e){return e.name===k}));return{name:k,command:b}}},{key:"exec",value:function(a,d,k,b,e){var l=this,
p=this.lookupCommand(a,d)||{},q=p.name,u=p.command;if(!u)return console.warn("Cannot find command "+(q||a)),null;if(q){if(e){var w=e.type;if(e.isKeyEvent)var y=e.keyCombo}this.addToHistory({name:q,target:{string:String(d),id:d.id},args:k,count:b,time:Date.now(),evt:w,keyCombo:y})}var A=d.world();"string"===typeof u.progressIndicator&&(this.progressIndicator=A.execCommand("open loading indicator",u.progressIndicator));if("function"===typeof u.exec)try{var C=u.exec(d,k,u.handlesCount?b:void 0,e)}catch(D){C=
D,a="Error in interactive command "+q+": "+(D.stack||D),A?A.logError(a):console.error(a)}else console.error("command "+q+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();C&&"function"===typeof C.catch?(C.catch(function(D){var L="Error in interactive command "+q+": "+D+"\n"+(D.stack||D);A?A.logError(L):console.error(L);throw D;}),this.progressIndicator&&Nq.promise.finally(C,function(){return l.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();
C&&"number"===typeof b&&1<b&&!u.handlesCount&&(C="function"===typeof C.then?C.then(function(){return l.exec(u,d,k,b-1,e,null)}):this.exec(u,d,k,b-1,e,null));return C}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],m,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:194,end:3656})}(void 0),Jha=V2=Nq.CommandHandler;Nq.default=V2;var rf=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");rf.ensureSpaces=function(f){return f.length?f:" "};rf.invokeKeyHandlers=function(f,m,n){n=void 0===n?!1:n;var a=m=rf.Keys.canonicalizeEvent(m),d=a.key,k=a.data,b,e=!1,l=f.keyhandlers,p=m.keyInputState||{};a=a.keyCombo.startsWith("input-");var q=!1,u=p.count,w=p.keyChain||"",y=!1;if(!l||n&&a)return!1;for(n=l.length;n--;)if((b=l[n].eventCommandLookup(f,
m))&&b.command){y=b;b=y.command;var A=y.args,C=y.passEvent,D=y.count;q=y.keyChain;var L=y.onlyWhenFocused;y=!0;u=D;w=q;q="null"===b;if(L&&(L=f.world())&&L.focusedMorph&&L.focusedMorph!==f)continue;e=q?!1:f.execCommand(b,A,D,m);!e||a&&"insertstring"===b||C||"function"!==typeof m.stop||m.stop();if(e||q)break}e||q||!a||!f.onTextInput||w||(e=f.execCommand("insertstring",{string:k||d,undoGroup:rf.config.text.undoGroupDelay},p.count,m));if(y)if("function"===typeof m.onAfterDispatch)m.onAfterDispatch(function(){p.count=
e?void 0:u;p.keyChain=e?"":w});else p.count=e?void 0:u,p.keyChain=e?"":w;return e&&!q};rf.simulateKeys=function(f,m,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var a,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){1==e.nextAddress&&(a=1===m.length?[m]:m.split(/ /g).map(rf.ensureSpaces),d=$jscomp.makeIterator(a),k=d.next());if(3!=e.nextAddress){if(k.done)return e.jumpTo(0);b=k.value;return e.yield(rf.simulateKey(f,b,n),3)}k=d.next();return e.jumpTo(2)})};rf.simulateKey=function(f,
m,n){return rf.invokeKeyHandlers(f,Object.assign({},rf.Keys.keyComboToEventSpec(m),{keyInputState:n}))};rf.bowserOS=function(){return rf.bowser.mac?"mac":rf.bowser.windows?"windows":rf.bowser.windowsphone?"windowsphone":rf.bowser.linux?"linux":rf.bowser.chromeos?"chromeos":rf.bowser.android?"android":rf.bowser.ios?"ios":rf.bowser.blackberry?"blackberry":rf.bowser.firefoxos?"firefoxos":rf.bowser.webos?"webos":rf.bowser.bada?"bada":rf.bowser.tizen?"tizen":rf.bowser.sailfish?"sailfish":"unknown"};rf.findKeysForPlatform=
WD;rf.Keys=UP;rf.bowser=Cn;rf.config=rk;rf.arr=Ne;rf.findKeysForPlatform=WD;rf.findKeysForPlatform=WD;rf.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var YP=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=m.hasOwnProperty("KeyHandler")&&
"function"===typeof m.KeyHandler?m.KeyHandler:m.KeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.platform=a=void 0===a?rf.bowserOS():a;this.keyBindings={}}},{key:"eventCommandLookup",value:function(a,d){return this.lookup(d.keyCombo,d.keyInputState)}},{key:"lookup",value:function(a,d){var k=this;d=void 0===d?{keyChain:void 0,
count:void 0}:d;a=rf.Keys.canonicalizeKeyCombo(a);var b=d.keyChain||"";d=d.count;if(!b&&a.startsWith("Ctrl-")){var e=a.match(/^Ctrl-([0-9]+)/);if(e)return{command:"null",count:parseInt(("number"===typeof d?d:"")+e[1])};if("Ctrl-U"===a)return{command:"null",count:4,keyChain:"Ctrl-U"}}e=[a];if(!p&&a.startsWith("input-")){p=a.replace(/^(input-)(.*)$/,function(q,u,w){return u+w.toUpperCase()});var l=a.replace(/^(input-)(.*)$/,function(q,u,w){return u+w.toLowerCase()});e.push(p,l)}var p=e.map(function(q){return k.keyBindings[q]})[0];
b&&(e=e.find(function(q){return k.keyBindings[b+" "+q]}))&&(b+=" "+e,p=this.keyBindings[b]||p);if(p&&"chainKeys"===p)return b=b||a,a={command:"null",keyChain:b},void 0!==d&&(a.count=d),a;if(p)return a="object"===typeof p?Object.assign({},p):{command:p},void 0!==d&&(a.count=d),a}},{key:"bindKey",value:function(a,d){var k=this;"object"===typeof a&&a&&!Array.isArray(a)&&(a=rf.findKeysForPlatform(a,this.platform));if(a){if("function"===typeof d)return this.addCommand({exec:d,bindKey:a,name:d.name||a});
(Array.isArray(a)?a:a.includes("|")?a.split("|"):[a]).forEach(function(b){var e="";if(-1!=b.indexOf(" ")){var l=b.split(/\s+/);b=l.pop();l.forEach(function(p){p=rf.Keys.canonicalizeKeyCombo(p);e+=(e?" ":"")+p;k.addCommandToBinding(e,"chainKeys")});e+=" "}k.addCommandToBinding(e+rf.Keys.canonicalizeKeyCombo(b),d)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(a){this.bindKey(a,null)}},{key:"cleanupUnusedKeyChains",value:function(){var a=this,d=Object.keys(this.keyBindings),k=d.filter(function(b){return"chainKeys"===
a.keyBindings[b]});k=rf.arr.sortBy(k,function(b){return b.length}).reverse();k.forEach(function(b){d.some(function(e){return b!==e&&e.startsWith(b)})||(delete a.keyBindings[b],rf.arr.remove(d,b),rf.arr.remove(k,b))})}},{key:"addCommand",value:function(a){return a&&a.bindKey?this.addCommandToBinding(a.bindKey,a):void 0}},{key:"addCommandToBinding",value:function(a,d){var k=this;"chainKeys"===this.keyBindings[a]&&"chainKeys"!=d&&Object.keys(this.keyBindings).forEach(function(b){b.startsWith(a)&&delete k.keyBindings[b]});
d?this.keyBindings[a]=d:delete this.keyBindings[a];"chainKeys"!==d&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(a,d,k){return rf.invokeKeyHandlers(a,d,void 0===k?!1:k)}},{key:"simulateKeys",value:function(a,d,k){return rf.simulateKeys(a,d,k)}},{key:"withBindings",value:function(a,d){var k=new this(d);a.forEach(function(b){return k.bindKey(b.keys,b.command)});return k}},{key:"prettyCombo",value:function(a){var d=
this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[a]?d[a]:d[a]=a.replace(rf.regexps.meta,"mac"==rf.bowserOS()?"\u2318":"\u229e ").replace(rf.regexps.alt,"mac"==rf.bowserOS()?"\u2325":"Alt ").replace(rf.regexps.ctrl,"mac"==rf.bowserOS()?"\u2303":"Ctrl ").replace(rf.regexps.tab,"\u21e5").replace(rf.regexps.enter,"\u23ce").replace(rf.regexps.shift,"\u21e7").replace(rf.regexps.backspace,"\u232b").replace(rf.regexps.delete,"\u2326").replace(rf.regexps.left,"\u2192").replace(rf.regexps.right,
"\u2190").replace(rf.regexps.up,"\u2191").replace(rf.regexps.down,"\u2193").replace(rf.regexps.keySpacer,"$1").replace(rf.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(a,d,k){function b(q){if(p[q.id])return p[q.id];var u=l[q.id]||(l[q.id]=q.keyCommandMap);return p[q.id]=rf.arr.groupBy(Object.keys(u),function(w){return u[w].name})}var e=this;k=void 0===k?!0:k;var l={},p={};return((void 0===d?0:d)?a.commandsIncludingOwners:a.commands.map(function(q){return{command:q,
target:a}})).map(function(q){var u=q.target;q=q.command;var w=b(u)[q.name];return{keys:w,target:u,command:q,prettyKeys:w&&k?w.map(function(y){return e.prettyCombo(y)}):null}})}}],m,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:13079})}(void 0);YP=rf.KeyHandler;var ZP=
Ia("a3",YP);rf.default=YP;var ps=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),W2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=m.hasOwnProperty("Script")&&"function"===typeof m.Script?m.Script:m.Script=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=
this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(a,d,k){a.props.suspended.value=!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(a){console.error("Error executing script "+this+": "+a+"\n"+a.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(a){this.stopped=
!1;this.tickTime=a;this.type="number"===typeof a?"setTimeout":"requestAnimationFrame";this.currentTimeout="setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),a):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(a){a=void 0===a?this.tickTime:a;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=
a))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Script"}}],m,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:21,end:1376})}(void 0),$P=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),
n=m.hasOwnProperty("TargetScript")&&"function"===typeof m.TargetScript?m.TargetScript:m.TargetScript=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a,d,k){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=a;this.selector=d;this.args=k||[]}},{key:"execute",value:function(){this.target.isMorph&&
!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(a){return a.isScript&&this.target==a.target&&this.selector==a.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TargetScript"}}],m,{pathInPackage:function(){return"ticking.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(ps.Script),X2=function(f){var m=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=m.hasOwnProperty("FunctionScript")&&"function"===typeof m.FunctionScript?m.FunctionScript:m.FunctionScript=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(n,f,[{key:Symbol.for("lively-instance-initialize"),value:function(a){Sb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.callback=a}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(a){return a.isScript&&this.callback==a.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],
m,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(ps.Script);ps.Script=W2;ps.Script=W2;ps.TargetScript=$P;ps.TargetScript=$P;ps.FunctionScript=X2;ps.FunctionScript=X2;var Cp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kha={},Y2=Cp.MutationObserver||
Cp.WebKitMutationObserver;if(Y2){var Z2=0,Lha=new Y2(XD),$2=Cp.document.createTextNode("");Lha.observe($2,{characterData:!0});var aQ=function(){$2.data=Z2=++Z2%2}}else if(Cp.setImmediate||"undefined"===typeof Cp.MessageChannel)aQ="document"in Cp&&"onreadystatechange"in Cp.document.createElement("script")?function(){var f=Cp.document.createElement("script");f.onreadystatechange=function(){XD();f.onreadystatechange=null;f.parentNode.removeChild(f);f=null};Cp.document.documentElement.appendChild(f)}:
function(){setTimeout(XD,0)};else{var a3=new Cp.MessageChannel;a3.port1.onmessage=XD;aQ=function(){a3.port2.postMessage(0)}}var fL,gz=[],Mha=Kha=function(f){1!==gz.push(f)||fL||aQ()},bQ={},b3="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(b3){var c3=new Uint8Array(16);bQ=function(){b3(c3);return c3}}else{var d3=Array(16);bQ=function(){for(var f=
0,m;16>f;f++)0===(f&3)&&(m=4294967296*Math.random()),d3[f]=m>>>((f&3)<<3)&255;return d3}}for(var e3=bQ,Nha={},gl=[],dI=0;256>dI;++dI)gl[dI]=(dI+256).toString(16).substr(1);var f3=Nha=function(f,m){m=m||0;return[gl[f[m++]],gl[f[m++]],gl[f[m++]],gl[f[m++]],"-",gl[f[m++]],gl[f[m++]],"-",gl[f[m++]],gl[f[m++]],"-",gl[f[m++]],gl[f[m++]],"-",gl[f[m++]],gl[f[m++]],gl[f[m++]],gl[f[m++]],gl[f[m++]],gl[f[m++]]].join("")},Oha={},g3,cQ,dQ=0,eQ=0,Pha=Oha=function(f,m,n){n=m&&n||0;var a=m||[];f=f||{};var d=f.node||
g3,k=void 0!==f.clockseq?f.clockseq:cQ;if(null==d||null==k){var b=e3();null==d&&(d=g3=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]);null==k&&(k=cQ=(b[6]<<8|b[7])&16383)}b=void 0!==f.msecs?f.msecs:(new Date).getTime();var e=void 0!==f.nsecs?f.nsecs:eQ+1,l=b-dQ+(e-eQ)/1E4;0>l&&void 0===f.clockseq&&(k=k+1&16383);(0>l||b>dQ)&&void 0===f.nsecs&&(e=0);if(1E4<=e)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");dQ=b;eQ=e;cQ=k;b+=122192928E5;f=(1E4*(b&268435455)+e)%4294967296;a[n++]=f>>>24&255;a[n++]=f>>>
16&255;a[n++]=f>>>8&255;a[n++]=f&255;f=b/4294967296*1E4&268435455;a[n++]=f>>>8&255;a[n++]=f&255;a[n++]=f>>>24&15|16;a[n++]=f>>>16&255;a[n++]=k>>>8|128;a[n++]=k&255;for(k=0;6>k;++k)a[n+k]=d[k];return m?m:f3(a)},h3={};h3=function(f,m,n){n=m&&n||0;"string"==typeof f&&(m="binary"===f?Array(16):null,f=null);f=f||{};f=f.random||(f.rng||e3)();f[6]=f[6]&15|64;f[8]=f[8]&63|128;if(m)for(var a=0;16>a;++a)m[n+a]=f[a];return m||f3(f)};var Qha={},fQ=h3;fQ.v1=Pha;var Rha=Qha=fQ.v4=fQ,Hg="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Sha={},Tha=Sha=function(f){function m(q,u){var w=q[0],y=q[1],A=q[2],C=q[3];w+=(y&A|~y&C)+u[0]-680876936|0;w=(w<<7|w>>>25)+y|0;C+=(w&y|~w&A)+u[1]-389564586|0;C=(C<<12|C>>>20)+w|0;A+=(C&w|~C&y)+u[2]+606105819|0;A=(A<<17|A>>>15)+C|0;y+=(A&C|~A&w)+u[3]-1044525330|0;y=(y<<22|y>>>10)+A|0;w+=(y&A|~y&C)+u[4]-176418897|0;w=(w<<7|w>>>25)+y|0;C+=(w&y|~w&A)+u[5]+1200080426|0;C=(C<<12|C>>>20)+w|0;A+=(C&w|~C&y)+u[6]-1473231341|0;A=(A<<17|A>>>15)+C|0;y+=(A&C|~A&w)+
u[7]-45705983|0;y=(y<<22|y>>>10)+A|0;w+=(y&A|~y&C)+u[8]+1770035416|0;w=(w<<7|w>>>25)+y|0;C+=(w&y|~w&A)+u[9]-1958414417|0;C=(C<<12|C>>>20)+w|0;A+=(C&w|~C&y)+u[10]-42063|0;A=(A<<17|A>>>15)+C|0;y+=(A&C|~A&w)+u[11]-1990404162|0;y=(y<<22|y>>>10)+A|0;w+=(y&A|~y&C)+u[12]+1804603682|0;w=(w<<7|w>>>25)+y|0;C+=(w&y|~w&A)+u[13]-40341101|0;C=(C<<12|C>>>20)+w|0;A+=(C&w|~C&y)+u[14]-1502002290|0;A=(A<<17|A>>>15)+C|0;y+=(A&C|~A&w)+u[15]+1236535329|0;y=(y<<22|y>>>10)+A|0;w+=(y&C|A&~C)+u[1]-165796510|0;w=(w<<5|w>>>
27)+y|0;C+=(w&A|y&~A)+u[6]-1069501632|0;C=(C<<9|C>>>23)+w|0;A+=(C&y|w&~y)+u[11]+643717713|0;A=(A<<14|A>>>18)+C|0;y+=(A&w|C&~w)+u[0]-373897302|0;y=(y<<20|y>>>12)+A|0;w+=(y&C|A&~C)+u[5]-701558691|0;w=(w<<5|w>>>27)+y|0;C+=(w&A|y&~A)+u[10]+38016083|0;C=(C<<9|C>>>23)+w|0;A+=(C&y|w&~y)+u[15]-660478335|0;A=(A<<14|A>>>18)+C|0;y+=(A&w|C&~w)+u[4]-405537848|0;y=(y<<20|y>>>12)+A|0;w+=(y&C|A&~C)+u[9]+568446438|0;w=(w<<5|w>>>27)+y|0;C+=(w&A|y&~A)+u[14]-1019803690|0;C=(C<<9|C>>>23)+w|0;A+=(C&y|w&~y)+u[3]-187363961|
0;A=(A<<14|A>>>18)+C|0;y+=(A&w|C&~w)+u[8]+1163531501|0;y=(y<<20|y>>>12)+A|0;w+=(y&C|A&~C)+u[13]-1444681467|0;w=(w<<5|w>>>27)+y|0;C+=(w&A|y&~A)+u[2]-51403784|0;C=(C<<9|C>>>23)+w|0;A+=(C&y|w&~y)+u[7]+1735328473|0;A=(A<<14|A>>>18)+C|0;y+=(A&w|C&~w)+u[12]-1926607734|0;y=(y<<20|y>>>12)+A|0;w+=(y^A^C)+u[5]-378558|0;w=(w<<4|w>>>28)+y|0;C+=(w^y^A)+u[8]-2022574463|0;C=(C<<11|C>>>21)+w|0;A+=(C^w^y)+u[11]+1839030562|0;A=(A<<16|A>>>16)+C|0;y+=(A^C^w)+u[14]-35309556|0;y=(y<<23|y>>>9)+A|0;w+=(y^A^C)+u[1]-1530992060|
0;w=(w<<4|w>>>28)+y|0;C+=(w^y^A)+u[4]+1272893353|0;C=(C<<11|C>>>21)+w|0;A+=(C^w^y)+u[7]-155497632|0;A=(A<<16|A>>>16)+C|0;y+=(A^C^w)+u[10]-1094730640|0;y=(y<<23|y>>>9)+A|0;w+=(y^A^C)+u[13]+681279174|0;w=(w<<4|w>>>28)+y|0;C+=(w^y^A)+u[0]-358537222|0;C=(C<<11|C>>>21)+w|0;A+=(C^w^y)+u[3]-722521979|0;A=(A<<16|A>>>16)+C|0;y+=(A^C^w)+u[6]+76029189|0;y=(y<<23|y>>>9)+A|0;w+=(y^A^C)+u[9]-640364487|0;w=(w<<4|w>>>28)+y|0;C+=(w^y^A)+u[12]-421815835|0;C=(C<<11|C>>>21)+w|0;A+=(C^w^y)+u[15]+530742520|0;A=(A<<16|
A>>>16)+C|0;y+=(A^C^w)+u[2]-995338651|0;y=(y<<23|y>>>9)+A|0;w+=(A^(y|~C))+u[0]-198630844|0;w=(w<<6|w>>>26)+y|0;C+=(y^(w|~A))+u[7]+1126891415|0;C=(C<<10|C>>>22)+w|0;A+=(w^(C|~y))+u[14]-1416354905|0;A=(A<<15|A>>>17)+C|0;y+=(C^(A|~w))+u[5]-57434055|0;y=(y<<21|y>>>11)+A|0;w+=(A^(y|~C))+u[12]+1700485571|0;w=(w<<6|w>>>26)+y|0;C+=(y^(w|~A))+u[3]-1894986606|0;C=(C<<10|C>>>22)+w|0;A+=(w^(C|~y))+u[10]-1051523|0;A=(A<<15|A>>>17)+C|0;y+=(C^(A|~w))+u[1]-2054922799|0;y=(y<<21|y>>>11)+A|0;w+=(A^(y|~C))+u[8]+1873313359|
0;w=(w<<6|w>>>26)+y|0;C+=(y^(w|~A))+u[15]-30611744|0;C=(C<<10|C>>>22)+w|0;A+=(w^(C|~y))+u[6]-1560198380|0;A=(A<<15|A>>>17)+C|0;y+=(C^(A|~w))+u[13]+1309151649|0;y=(y<<21|y>>>11)+A|0;w+=(A^(y|~C))+u[4]-145523070|0;w=(w<<6|w>>>26)+y|0;C+=(y^(w|~A))+u[11]-1120210379|0;C=(C<<10|C>>>22)+w|0;A+=(w^(C|~y))+u[2]+718787259|0;A=(A<<15|A>>>17)+C|0;y+=(C^(A|~w))+u[9]-343485551|0;q[0]=w+q[0]|0;q[1]=((y<<21|y>>>11)+A|0)+q[1]|0;q[2]=A+q[2]|0;q[3]=C+q[3]|0}function n(q){var u=[],w;for(w=0;64>w;w+=4)u[w>>2]=q.charCodeAt(w)+
(q.charCodeAt(w+1)<<8)+(q.charCodeAt(w+2)<<16)+(q.charCodeAt(w+3)<<24);return u}function a(q){var u=[],w;for(w=0;64>w;w+=4)u[w>>2]=q[w]+(q[w+1]<<8)+(q[w+2]<<16)+(q[w+3]<<24);return u}function d(q){var u=q.length,w=[1732584193,-271733879,-1732584194,271733878],y;for(y=64;y<=u;y+=64)m(w,n(q.substring(y-64,y)));q=q.substring(y-64);var A=q.length;var C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<A;y+=1)C[y>>2]|=q.charCodeAt(y)<<(y%4<<3);C[y>>2]|=128<<(y%4<<3);if(55<y)for(m(w,C),y=0;16>y;y+=1)C[y]=0;u=
(8*u).toString(16).match(/(.*?)(.{0,8})$/);q=parseInt(u[2],16);u=parseInt(u[1],16)||0;C[14]=q;C[15]=u;m(w,C);return w}function k(q){var u;for(u=0;u<q.length;u+=1){var w=u,y,A=q[u],C="";for(y=0;4>y;y+=1)C+=p[A>>8*y+4&15]+p[A>>8*y&15];q[w]=C}return q.join("")}function b(q){/[\u0080-\uFFFF]/.test(q)&&(q=unescape(encodeURIComponent(q)));return q}function e(q){var u=[],w=q.length,y;for(y=0;y<w-1;y+=2)u.push(parseInt(q.substr(y,2),16));return String.fromCharCode.apply(String,u)}function l(){this.reset()}
var p="0123456789abcdef".split("");k(d("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function q(u,w){u=u|0||0;return 0>u?Math.max(u+w,0):Math.min(u,w)}ArrayBuffer.prototype.slice=function(u,w){var y=(this||Hg).byteLength;u=q(u,y);var A=y;w!==f&&(A=q(w,y));if(u>A)return new ArrayBuffer(0);A-=u;w=new ArrayBuffer(A);y=new Uint8Array(w);u=new Uint8Array(this||Hg,u,A);y.set(u);return w}}();l.prototype.append=function(q){this.appendBinary(b(q));return this||Hg};l.prototype.appendBinary=
function(q){(this||Hg)._buff+=q;(this||Hg)._length+=q.length;q=(this||Hg)._buff.length;var u;for(u=64;u<=q;u+=64)m((this||Hg)._hash,n((this||Hg)._buff.substring(u-64,u)));(this||Hg)._buff=(this||Hg)._buff.substring(u-64);return this||Hg};l.prototype.end=function(q){var u=(this||Hg)._buff,w=u.length,y,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<w;y+=1)A[y>>2]|=u.charCodeAt(y)<<(y%4<<3);this._finish(A,w);u=k((this||Hg)._hash);q&&(u=e(u));this.reset();return u};l.prototype.reset=function(){(this||
Hg)._buff="";(this||Hg)._length=0;(this||Hg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Hg};l.prototype.getState=function(){return{buff:(this||Hg)._buff,length:(this||Hg)._length,hash:(this||Hg)._hash}};l.prototype.setState=function(q){(this||Hg)._buff=q.buff;(this||Hg)._length=q.length;(this||Hg)._hash=q.hash;return this||Hg};l.prototype.destroy=function(){delete (this||Hg)._hash;delete (this||Hg)._buff;delete (this||Hg)._length};l.prototype._finish=function(q,u){q[u>>2]|=128<<
(u%4<<3);if(55<u)for(m((this||Hg)._hash,q),u=0;16>u;u+=1)q[u]=0;var w=8*(this||Hg)._length;w=w.toString(16).match(/(.*?)(.{0,8})$/);u=parseInt(w[2],16);w=parseInt(w[1],16)||0;q[14]=u;q[15]=w;m((this||Hg)._hash,q)};l.hash=function(q,u){return l.hashBinary(b(q),u)};l.hashBinary=function(q,u){q=d(q);q=k(q);return u?e(q):q};l.ArrayBuffer=function(){this.reset()};l.ArrayBuffer.prototype.append=function(q){var u=(this||Hg)._buff.buffer,w=new Uint8Array(u.byteLength+q.byteLength);w.set(new Uint8Array(u));
w.set(new Uint8Array(q),u.byteLength);u=w.length;(this||Hg)._length+=q.byteLength;for(q=64;q<=u;q+=64)m((this||Hg)._hash,a(w.subarray(q-64,q)));(this||Hg)._buff=q-64<u?new Uint8Array(w.buffer.slice(q-64)):new Uint8Array(0);return this||Hg};l.ArrayBuffer.prototype.end=function(q){var u=(this||Hg)._buff,w=u.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A;for(A=0;A<w;A+=1)y[A>>2]|=u[A]<<(A%4<<3);this._finish(y,w);u=k((this||Hg)._hash);q&&(u=e(u));this.reset();return u};l.ArrayBuffer.prototype.reset=function(){(this||
Hg)._buff=new Uint8Array(0);(this||Hg)._length=0;(this||Hg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Hg};l.ArrayBuffer.prototype.getState=function(){var q=l.prototype.getState.call(this||Hg);q.buff=String.fromCharCode.apply(null,new Uint8Array(q.buff));return q};l.ArrayBuffer.prototype.setState=function(q){var u=q.buff,w=u.length,y=new ArrayBuffer(w);y=new Uint8Array(y);var A;for(A=0;A<w;A+=1)y[A]=u.charCodeAt(A);q.buff=y;return l.prototype.setState.call(this||Hg,q)};l.ArrayBuffer.prototype.destroy=
l.prototype.destroy;l.ArrayBuffer.prototype._finish=l.prototype._finish;l.ArrayBuffer.hash=function(q,u){var w=new Uint8Array(q),y=w.length;q=[1732584193,-271733879,-1732584194,271733878];var A;for(A=64;A<=y;A+=64)m(q,a(w.subarray(A-64,A)));w=A-64<y?w.subarray(A-64):new Uint8Array(0);var C=w.length;var D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(A=0;A<C;A+=1)D[A>>2]|=w[A]<<(A%4<<3);D[A>>2]|=128<<(A%4<<3);if(55<A)for(m(q,D),A=0;16>A;A+=1)D[A]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);w=parseInt(y[2],
16);y=parseInt(y[1],16)||0;D[14]=w;D[15]=y;m(q,D);q=k(q);return u?e(q):q};return l}(),Hx={stringify:function(f){var m=[];m.push({obj:f});f="";for(var n,a,d,k,b,e,l;n=m.pop();)if(a=n.obj,d=n.prefix||"",n=n.val||"",f+=d,n)f+=n;else if("object"!==typeof a)f+="undefined"===typeof a?null:JSON.stringify(a);else if(null===a)f+="null";else if(Array.isArray(a)){m.push({val:"]"});for(d=a.length-1;0<=d;d--)n=0===d?"":",",m.push({obj:a[d],prefix:n});m.push({val:"["})}else{n=[];for(k in a)a.hasOwnProperty(k)&&
n.push(k);m.push({val:"}"});for(d=n.length-1;0<=d;d--)b=n[d],e=a[b],l=0<d?",":"",l+=JSON.stringify(b)+":",m.push({obj:e,prefix:l});m.push({val:"{"})}return f},parse:function(f){for(var m=[],n=[],a=0,d,k,b,e;;)if(d=f[a++],"}"===d||"]"===d||"undefined"===typeof d){if(1===m.length)return m.pop();sw(m.pop(),m,n)}else switch(d){case " ":case "\t":case "\n":case ":":case ",":break;case "n":a+=3;sw(null,m,n);break;case "t":a+=3;sw(!0,m,n);break;case "f":a+=4;sw(!1,m,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":d=
"";for(a--;;)if(k=f[a++],/[\d\.\-e\+]/.test(k))d+=k;else{a--;break}sw(parseFloat(d),m,n);break;case '"':d="";k=void 0;for(b=0;;)if(e=f[a++],'"'!==e||"\\"===k&&1===b%2)d+=e,k=e,"\\"===k?b++:b=0;else break;sw(JSON.parse('"'+d+'"'),m,n);break;case "[":d={element:[],index:m.length};m.push(d.element);n.push(d);break;case "{":d={element:{},index:m.length};m.push(d.element);n.push(d);break;default:throw Error("unexpectedly reached end of input: "+d);}}},Uha={},gQ=Uha=function(f){return function(){var m=
arguments.length;if(m){for(var n=[],a=-1;++a<m;)n[a]=arguments[a];return f.call(this,n)}return f.call(this,[])}},Vha={},bj=Vha="function"===typeof Object.create?function(f,m){m&&(f.super_=m,f.prototype=Object.create(m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,m){if(m){f.super_=m;var n=function(){};n.prototype=m.prototype;f.prototype=new n;f.prototype.constructor=f}},Ix="object"==typeof Reflect?Reflect:null,i3=Ix&&"function"==typeof Ix.apply?Ix.apply:
function(f,m,n){return Function.prototype.apply.call(f,m,n)};var Wha=Ix&&"function"==typeof Ix.ownKeys?Ix.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var j3=Number.isNaN||function(f){return f!=f};Ai.EventEmitter=Ai;Ai.prototype._events=void 0;Ai.prototype._eventsCount=0;Ai.prototype._maxListeners=void 0;var k3=10;Object.defineProperty(Ai,"defaultMaxListeners",{enumerable:!0,
get:function(){return k3},set:function(f){if("number"!=typeof f||0>f||j3(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");k3=f}});Ai.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};Ai.prototype.setMaxListeners=function(f){if("number"!=typeof f||0>f||j3(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
f+".");return this._maxListeners=f,this};Ai.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Ai.defaultMaxListeners:this._maxListeners};Ai.prototype.emit=function(f){for(var m=[],n=1;n<arguments.length;n++)m.push(arguments[n]);n="error"===f;var a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var d;if(0<m.length&&(d=m[0]),d instanceof Error)throw d;m=Error("Unhandled error."+(d?" ("+d.message+")":""));throw m.context=d,m;}n=a[f];if(void 0===n)return!1;
if("function"==typeof n)i3(n,this,m);else for(d=n.length,a=UU(n,d),n=0;n<d;++n)i3(a[n],this,m);return!0};Ai.prototype.addListener=function(f,m){return RU(this,f,m,!1)};Ai.prototype.on=Ai.prototype.addListener;Ai.prototype.prependListener=function(f,m){return RU(this,f,m,!0)};Ai.prototype.once=function(f,m){return YD(m),this.on(f,SU(this,f,m)),this};Ai.prototype.prependOnceListener=function(f,m){return YD(m),this.prependListener(f,SU(this,f,m)),this};Ai.prototype.removeListener=function(f,m){var n,
a,d;if((YD(m),void 0===(a=this._events))||void 0===(n=a[f]))return this;if(n===m||n.listener===m)0==--this._eventsCount?this._events=Object.create(null):(delete a[f],a.removeListener&&this.emit("removeListener",f,n.listener||m));else if("function"!=typeof n){var k=-1;for(d=n.length-1;0<=d;d--)if(n[d]===m||n[d].listener===m){var b=n[d].listener;k=d;break}if(0>k)return this;if(0===k)n.shift();else{for(;k+1<n.length;k++)n[k]=n[k+1];n.pop();!0}1===n.length&&(a[f]=n[0]);void 0!==a.removeListener&&this.emit("removeListener",
f,b||m)}return this};Ai.prototype.off=Ai.prototype.removeListener;Ai.prototype.removeAllListeners=function(f){var m,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[f]),this;if(0===arguments.length){var a=Object.keys(n);for(n=0;n<a.length;++n)"removeListener"!==(m=a[n])&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),
this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(m=n[f]))this.removeListener(f,m);else if(void 0!==m)for(n=m.length-1;0<=n;n--)this.removeListener(f,m[n]);return this};Ai.prototype.listeners=function(f){return TU(this,f,!0)};Ai.prototype.rawListeners=function(f){return TU(this,f,!1)};Ai.listenerCount=function(f,m){return"function"==typeof f.listenerCount?f.listenerCount(m):VU.call(f,m)};Ai.prototype.listenerCount=VU;Ai.prototype.eventNames=function(){return 0<this._eventsCount?
Wha(this._events):[]};var ap=Ai,l3="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Xha={},gE=yh,Xo=tw(Mha),jV=tw(Rha),bE=tw(Tha),DV=tw(Hx),uw=tw(gQ),Ao=tw(bj),am=ap;vr.prototype.get=function(f){return this._store["$"+f]};vr.prototype.set=function(f,m){this._store["$"+f]=m;return!0};vr.prototype.has=function(f){return"$"+f in this._store};vr.prototype.delete=function(f){f="$"+f;var m=f in this._store;delete this._store[f];return m};vr.prototype.forEach=function(f){for(var m=
Object.keys(this._store),n=0,a=m.length;n<a;n++){var d=m[n],k=this._store[d];d=d.substring(1);f(k,d)}};Object.defineProperty(vr.prototype,"size",{get:function(){return Object.keys(this._store).length}});hz.prototype.add=function(f){return this._store.set(f,!0)};hz.prototype.has=function(f){return this._store.has(f)};hz.prototype.forEach=function(f){this._store.forEach(function(m,n){f(n)})};Object.defineProperty(hz.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===
typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map}()){var pz=Set;var ym=Map}else pz=hz,ym=vr;var WU=Function.prototype.toString,s8=WU.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var jz=!!localStorage.getItem("_pouch_check_localstorage")}catch(f){jz=!1}Ao(vw,am.EventEmitter);vw.prototype.addListener=function(f,m,n,a){function d(){if(k._listeners[m])if(b)b=
"waiting";else{b=!0;var e=iz(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));n.changes(e).on("change",function(l){l.seq>a.since&&!a.cancelled&&(a.since=l.seq,a.onChange(l))}).on("complete",function(){"waiting"===b&&Xo(d);b=!1}).on("error",function(){b=!1})}}if(!this._listeners[m]){var k=this,b=!1;this._listeners[m]=d;this.on(f,d)}};vw.prototype.removeListener=function(f,m){m in this._listeners&&(am.EventEmitter.prototype.removeListener.call(this,
f,this._listeners[m]),delete this._listeners[m])};vw.prototype.notifyLocalWindows=function(f){jz&&(localStorage[f]="a"===localStorage[f]?"b":"a")};vw.prototype.notify=function(f){this.emit(f);this.notifyLocalWindows(f)};var zw="function"===typeof Object.assign?Object.assign:function(f){for(var m=Object(f),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(m[d]=a[d])}return m};Ao(Li,Error);Li.prototype.toString=function(){return JSON.stringify({status:this.status,
name:this.name,message:this.message,reason:this.reason})};new Li(401,"unauthorized","Name or password is incorrect.");var Yha=new Li(400,"bad_request","Missing JSON list of 'docs'"),$n=new Li(404,"not_found","missing"),yw=new Li(409,"conflict","Document update conflict"),cV=new Li(400,"bad_request","_id field must contain a string"),y8=new Li(412,"missing_id","_id is required for puts"),x8=new Li(400,"bad_request","Only reserved document ids may start with underscore.");new Li(412,"precondition_failed",
"Database not open");var aV=new Li(500,"unknown_error","Database encountered an unknown error"),CV=new Li(500,"badarg","Some query argument is invalid");new Li(400,"invalid_request","Request was invalid");var Zha=new Li(400,"query_parse_error","Some query parameter is invalid"),BV=new Li(500,"doc_validation","Bad special document member"),ZD=new Li(400,"bad_request","Something wrong with the request"),hQ=new Li(400,"bad_request","Document must be a JSON object");new Li(404,"not_found","Database not found");
var uL=new Li(500,"indexed_db_went_bad","unknown");new Li(500,"web_sql_went_bad","unknown");new Li(500,"levelDB_went_went_bad","unknown");new Li(403,"forbidden","Forbidden by design doc validate_doc_update function");var zV=new Li(400,"bad_request","Invalid rev format");new Li(412,"file_exists","The database could not be created, the file already exists.");var o9=new Li(412,"missing_stub","A pre-existing attachment stub wasn't found");new Li(413,"invalid_url","Provided URL is invalid");var fV="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
A8=/(?:^|&)([^&=]*)=?([^&]*)/g,z8=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,G8=l3.setImmediate||l3.setTimeout,cE=jV.v4;Ao(kz,am.EventEmitter);kz.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};kz.prototype.validateChanges=function(f){var m=f.complete,n=this;hh._changesFilterPlugin?hh._changesFilterPlugin.validate(f,
function(a){if(a)return m(a);n.doChanges(f)}):n.doChanges(f)};kz.prototype.doChanges=function(f){var m=this,n=f.complete;f=ek(f);"live"in f&&!("continuous"in f)&&(f.continuous=f.live);f.processChange=O8;"latest"===f.since&&(f.since="now");f.since||(f.since=0);if("now"===f.since)this.db.info().then(function(k){m.isCancelled?n(null,{status:"cancelled"}):(f.since=k.update_seq,m.doChanges(f))},n);else{if(hh._changesFilterPlugin){if(hh._changesFilterPlugin.normalize(f),hh._changesFilterPlugin.shouldFilter(this,
f))return hh._changesFilterPlugin.filter(this,f)}else["doc_ids","filter","selector","view"].forEach(function(k){k in f&&an("warn",'The "'+k+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in f||(f.descending=!1);f.limit=0===f.limit?1:f.limit;f.complete=n;var a=this.db._changes(f);if(a&&"function"===typeof a.cancel){var d=m.cancel;m.cancel=uw(function(k){a.cancel();d.apply(this,
k)})}}};Ao($i,am.EventEmitter);$i.prototype.post=Nj("post",function(f,m,n){"function"===typeof m&&(n=m,m={});if("object"!==typeof f||Array.isArray(f))return n(lh(hQ));this.bulkDocs({docs:[f]},m,rL(n,f._id))});$i.prototype.put=Nj("put",function(f,m,n){function a(){var b=f._rev.split("-"),e=b[1];b=parseInt(b[0],10)+1;var l=iV();f._revisions={start:b,ids:[l,e]};f._rev=b+"-"+l;m.new_edits=!1}function d(b){"function"===typeof k._put&&!1!==m.new_edits?k._put(f,m,b):k.bulkDocs({docs:[f]},m,rL(b,f._id))}
"function"===typeof m&&(n=m,m={});if("object"!==typeof f||Array.isArray(f))return n(lh(hQ));bV(f._id);if(Et(f._id)&&"function"===typeof this._putLocal)return f._deleted?this._removeLocal(f,n):this._putLocal(f,n);var k=this;m.force&&f._rev?(a(),d(function(b){n(b,b?null:{ok:!0,id:f._id,rev:f._rev})})):d(n)});$i.prototype.putAttachment=Nj("putAttachment",function(f,m,n,a,d){function k(e){var l="_rev"in e?parseInt(e._rev,10):0;e._attachments=e._attachments||{};e._attachments[m]={content_type:d,data:a,
revpos:++l};return b.put(e)}var b=this;"function"===typeof d&&(d=a,a=n,n=null);"undefined"===typeof d&&(d=a,a=n,n=null);d||an("warn","Attachment",m,"on document",f,"is missing content_type");return b.get(f).then(function(e){if(e._rev!==n)throw lh(yw);return k(e)},function(e){if(e.reason===$n.message)return k({_id:f});throw e;})});$i.prototype.removeAttachment=Nj("removeAttachment",function(f,m,n,a){var d=this;d.get(f,function(k,b){if(k)a(k);else if(b._rev!==n)a(lh(yw));else{if(!b._attachments)return a();
delete b._attachments[m];0===Object.keys(b._attachments).length&&delete b._attachments;d.put(b,a)}})});$i.prototype.remove=Nj("remove",function(f,m,n,a){"string"===typeof m?(f={_id:f,_rev:m},"function"===typeof n&&(a=n,n={})):"function"===typeof m?(a=m,n={}):(a=n,n=m);n=n||{};n.was_delete=!0;m={_id:f._id,_rev:f._rev||n.rev,_deleted:!0};if(Et(m._id)&&"function"===typeof this._removeLocal)return this._removeLocal(f,a);this.bulkDocs({docs:[m]},n,rL(a,m._id))});$i.prototype.revsDiff=Nj("revsDiff",function(f,
m,n){function a(l,p){e.has(l)||e.set(l,{missing:[]});e.get(l).missing.push(p)}function d(l,p){var q=f[l].slice(0);Dt(p,function(u,w,y,A,C){u=w+"-"+y;w=q.indexOf(u);-1!==w&&(q.splice(w,1),"available"!==C.status&&a(l,u))});q.forEach(function(u){a(l,u)})}"function"===typeof m&&(n=m,m={});var k=Object.keys(f);if(!k.length)return n(null,{});var b=0,e=new ym;k.map(function(l){this._getRevisionTree(l,function(p,q){if(p&&404===p.status&&"missing"===p.message)e.set(l,{missing:f[l]});else{if(p)return n(p);
d(l,q)}if(++b===k.length){var u={};e.forEach(function(w,y){u[y]=w});return n(null,u)}})},this)});$i.prototype.bulkGet=Nj("bulkGet",function(f,m){$U(this,f,m)});$i.prototype.compactDocument=Nj("compactDocument",function(f,m,n){var a=this;this._getRevisionTree(f,function(d,k){if(d)return n(d);var b=R8(k),e=[],l=[];Object.keys(b).forEach(function(p){b[p]>m&&e.push(p)});Dt(k,function(p,q,u,w,y){p=q+"-"+u;"available"===y.status&&-1!==e.indexOf(p)&&l.push(p)});a._doCompaction(f,l,n)})});$i.prototype.compact=
Nj("compact",function(f,m){"function"===typeof f&&(m=f,f={});f=f||{};this._compactionQueue=this._compactionQueue||[];this._compactionQueue.push({opts:f,callback:m});1===this._compactionQueue.length&&pV(this)});$i.prototype._compact=function(f,m){var n=this,a=[];n.changes({return_docs:!1,last_seq:f.last_seq||0}).on("change",function(d){a.push(n.compactDocument(d.id,0))}).on("complete",function(d){var k=d.last_seq;Promise.all(a).then(function(){return aE(n,"_local/compaction",function(b){return!b.last_seq||
b.last_seq<k?(b.last_seq=k,b):!1})}).then(function(){m(null,{ok:!0})}).catch(m)}).on("error",m)};$i.prototype.get=Nj("get",function(f,m,n){function a(){var l=[],p=d.length;if(!p)return n(null,l);d.forEach(function(q){k.get(f,{rev:q,revs:m.revs,latest:m.latest,attachments:m.attachments,binary:m.binary},function(u,w){if(u)l.push({missing:q});else{u=0;for(var y=l.length;u<y;u++)if(l[u].ok&&l[u].ok._rev===w._rev){var A=!0;break}A||l.push({ok:w})}p--;p||n(null,l)})})}"function"===typeof m&&(n=m,m={});
if("string"!==typeof f)return n(lh(cV));if(Et(f)&&"function"===typeof this._getLocal)return this._getLocal(f,n);var d=[],k=this;if(m.open_revs)if("all"===m.open_revs)this._getRevisionTree(f,function(l,p){if(l)return n(l);d=pL(p).map(function(q){return q.rev});a()});else if(Array.isArray(m.open_revs)){d=m.open_revs;for(var b=0;b<d.length;b++){var e=d[b];if("string"!==typeof e||!/^\d+-/.test(e))return n(lh(zV))}a()}else return n(lh(aV,"function_clause"));else return this._get(f,m,function(l,p){if(l)return l.docId=
f,n(l);var q=p.doc,u=p.metadata,w=p.ctx;m.conflicts&&(p=qL(u),p.length&&(q._conflicts=p));hq(u,q._rev)&&(q._deleted=!0);if(m.revs||m.revs_info){l=q._rev.split("-");p=parseInt(l[0],10);l=l[1];var y=kV(u.rev_tree);u=null;for(var A=0;A<y.length;A++){var C=y[A],D=C.ids.map(function(ba){return ba.id}).indexOf(l);if(D===p-1||!u&&-1!==D)u=C}if(!u)return l=Error("invalid rev tree"),l.docId=f,n(l);p=u.ids.map(function(ba){return ba.id}).indexOf(q._rev.split("-")[1])+1;u.ids.splice(p,u.ids.length-p);u.ids.reverse();
m.revs&&(q._revisions={start:u.pos+u.ids.length-1,ids:u.ids.map(function(ba){return ba.id})});if(m.revs_info){var L=u.pos+u.ids.length;q._revs_info=u.ids.map(function(ba){L--;return{rev:L+"-"+ba.id,status:ba.opts.status}})}}if(m.attachments&&q._attachments){var I=q._attachments,S=Object.keys(I).length;if(0===S)return n(null,q);Object.keys(I).forEach(function(ba){this._getAttachment(q._id,ba,I[ba],{rev:q._rev,binary:m.binary,ctx:w},function(ua,Fa){ua=q._attachments[ba];ua.data=Fa;delete ua.stub;delete ua.length;
--S||n(null,q)})},k)}else{if(q._attachments)for(var V in q._attachments)q._attachments.hasOwnProperty(V)&&(q._attachments[V].stub=!0);n(null,q)}})});$i.prototype.getAttachment=Nj("getAttachment",function(f,m,n,a){var d=this;n instanceof Function&&(a=n,n={});this._get(f,n,function(k,b){if(k)return a(k);if(b.doc._attachments&&b.doc._attachments[m])n.ctx=b.ctx,n.binary=!0,d._getAttachment(f,m,b.doc._attachments[m],n,a);else return a(lh($n))})});$i.prototype.allDocs=Nj("allDocs",function(f,m){"function"===
typeof f&&(m=f,f={});f.skip="undefined"!==typeof f.skip?f.skip:0;f.start_key&&(f.startkey=f.start_key);f.end_key&&(f.endkey=f.end_key);if("keys"in f){if(!Array.isArray(f.keys))return m(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(a){return a in f})[0];if(n){m(lh(Zha,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!Wo(this)&&(S8(f),0===f.keys.length))return this._allDocs({limit:0},m)}return this._allDocs(f,m)});$i.prototype.changes=
function(f,m){"function"===typeof f&&(m=f,f={});f=f||{};f.return_docs="return_docs"in f?f.return_docs:!f.live;return new kz(this,f,m)};$i.prototype.close=Nj("close",function(f){this._closed=!0;this.emit("closed");return this._close(f)});$i.prototype.info=Nj("info",function(f){var m=this;this._info(function(n,a){if(n)return f(n);a.db_name=a.db_name||m.name;a.auto_compaction=!(!m.auto_compaction||Wo(m));a.adapter=m.adapter;f(null,a)})});$i.prototype.id=Nj("id",function(f){return this._id(f)});$i.prototype.type=
function(){return"function"===typeof this._type?this._type():this.adapter};$i.prototype.bulkDocs=Nj("bulkDocs",function(f,m,n){"function"===typeof m&&(n=m,m={});m=m||{};Array.isArray(f)&&(f={docs:f});if(!f||!f.docs||!Array.isArray(f.docs))return n(lh(Yha));for(var a=0;a<f.docs.length;++a)if("object"!==typeof f.docs[a]||Array.isArray(f.docs[a]))return n(lh(hQ));var d;f.docs.forEach(function(e){e._attachments&&Object.keys(e._attachments).forEach(function(l){var p;(p=d)||(p="_"===l.charAt(0)?l+" is not a valid attachment name, attachment names cannot start with '_'":
!1);d=p;e._attachments[l].content_type||an("warn","Attachment",l,"on document",e._id,"is missing content_type")})});if(d)return n(lh(ZD,d));"new_edits"in m||(m.new_edits="new_edits"in f?f.new_edits:!0);var k=this;m.new_edits||Wo(k)||f.docs.sort(Q8);P8(f.docs);var b=f.docs.map(function(e){return e._id});return this._bulkDocs(f,m,function(e,l){if(e)return n(e);m.new_edits||(l=l.filter(function(q){return q.error}));if(!Wo(k)){e=0;for(var p=l.length;e<p;e++)l[e].id=l[e].id||b[e]}n(null,l)})});$i.prototype.registerDependentDatabase=
Nj("registerDependentDatabase",function(f,m){var n=new this.constructor(f,this.__opts);aE(this,"_local/_pouch_dependentDbs",function(a){a.dependentDbs=a.dependentDbs||{};if(a.dependentDbs[f])return!1;a.dependentDbs[f]=!0;return a}).then(function(){m(null,{db:n})}).catch(m)});$i.prototype.destroy=Nj("destroy",function(f,m){function n(){a._destroy(f,function(k,b){if(k)return m(k);a._destroyed=!0;a.emit("destroyed");m(null,b||{ok:!0})})}"function"===typeof f&&(m=f,f={});var a=this,d="use_prefix"in a?
a.use_prefix:!0;if(Wo(a))return n();a.get("_local/_pouch_dependentDbs",function(k,b){if(k)return 404!==k.status?m(k):n();var e=a.constructor;k=Object.keys(b.dependentDbs).map(function(l){l=d?l.replace(new RegExp("^"+e.prefix),""):l;return(new e(l,a.__opts)).destroy()});Promise.all(k).then(n,m)})});lz.prototype.execute=function(){var f;if(this.failed)for(;f=this.queue.shift();)f(this.failed);else for(;f=this.queue.shift();)f()};lz.prototype.fail=function(f){this.failed=f;this.execute()};lz.prototype.ready=
function(f){this.isReady=!0;this.db=f;this.execute()};lz.prototype.addTask=function(f){this.queue.push(f);this.failed&&this.execute()};Ao(hh,$i);var C9="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},LV=fetch,Bw=Headers;hh.adapters={};hh.preferredAdapters=[];hh.prefix="_pouch_";var m3=new am.EventEmitter;(function(f){Object.keys(am.EventEmitter.prototype).forEach(function(n){"function"===typeof am.EventEmitter.prototype[n]&&(f[n]=m3[n].bind(m3))});var m=
f._destructionListeners=new ym;f.on("ref",function(n){m.has(n.name)||m.set(n.name,[]);m.get(n.name).push(n)});f.on("unref",function(n){if(m.has(n.name)){var a=m.get(n.name),d=a.indexOf(n);0>d||(a.splice(d,1),1<a.length?m.set(n.name,a):m.delete(n.name))}});f.on("destroyed",function(n){if(m.has(n)){var a=m.get(n);m.delete(n);a.forEach(function(d){d.emit("destroyed",!0)})}})})(hh);hh.adapter=function(f,m,n){m.valid()&&(hh.adapters[f]=m,n&&hh.preferredAdapters.push(f))};hh.plugin=function(f){if("function"===
typeof f)f(hh);else{if("object"!==typeof f||0===Object.keys(f).length)throw Error('Invalid plugin: got "'+f+'", expected an object or a function');Object.keys(f).forEach(function(m){hh.prototype[m]=f[m]})}this.__defaults&&(hh.__defaults=zw({},this.__defaults));return hh};hh.defaults=function(f){function m(n,a){if(!(this instanceof m))return new m(n,a);a=a||{};n&&"object"===typeof n&&(a=n,n=a.name,delete a.name);a=zw({},m.__defaults,a);hh.call(this,n,a)}Ao(m,hh);m.preferredAdapters=hh.preferredAdapters.slice();
Object.keys(hh).forEach(function(n){n in m||(m[n]=hh[n])});m.__defaults=zw({},this.__defaults,f);return m};hh.fetch=function(f,m){return LV(f,m)};var sV=["$or","$nor","$not"],vV={$elemMatch:function(f,m,n,a){return Array.isArray(a)&&0!==a.length?"object"===typeof a[0]?a.some(function(d){return xw(d,m,Object.keys(m))}):a.some(function(d){return tL(m,f,n,d)}):!1},$allMatch:function(f,m,n,a){return Array.isArray(a)&&0!==a.length?"object"===typeof a[0]?a.every(function(d){return xw(d,m,Object.keys(m))}):
a.every(function(d){return tL(m,f,n,d)}):!1},$eq:function(f,m,n,a){return Gt(a)&&0===Bk(a,m)},$gte:function(f,m,n,a){return Gt(a)&&0<=Bk(a,m)},$gt:function(f,m,n,a){return Gt(a)&&0<Bk(a,m)},$lte:function(f,m,n,a){return Gt(a)&&0>=Bk(a,m)},$lt:function(f,m,n,a){return Gt(a)&&0>Bk(a,m)},$exists:function(f,m,n,a){return m?Gt(a):!Gt(a)},$mod:function(f,m,n,a){if(f=nz(a)){f=m[0];m=m[1];if(0===f)throw Error("Bad divisor, cannot divide by zero");if(parseInt(f,10)!==f)throw Error("Divisor is not an integer");
if(parseInt(m,10)!==m)throw Error("Modulus is not an integer");f=parseInt(a,10)!==a?!1:a%f===m}return f},$ne:function(f,m,n,a){return m.every(function(d){return 0!==Bk(a,d)})},$in:function(f,m,n,a){return nz(a)&&wV(a,m)},$nin:function(f,m,n,a){return nz(a)&&!wV(a,m)},$size:function(f,m,n,a){return nz(a)&&a.length===m},$all:function(f,m,n,a){return Array.isArray(a)&&a9(a,m)},$regex:function(f,m,n,a){if(f=nz(a))f=(new RegExp(m)).test(a);return f},$type:function(f,m,n,a){return b9(a,m)}};hh.plugin(function(f){f._changesFilterPlugin=
{validate:c9,normalize:d9,shouldFilter:e9,filter:f9}});hh.version="7.2.1";var g9=xV("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),h9=xV("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),oz=new vw,xL=!1,yL=[],Aw=new ym,AL,zL=new ym;JV.valid=
function(){return"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange};var DL={};CL.valid=function(){return!0};Ao(Jt,Error);Ao(hE,Error);Ao(iE,Error);var F9=an.bind(null,"log"),G9=Array.isArray,H9=JSON.parse;qz.prototype.add=function(f){return this.promise=this.promise.catch(function(){}).then(function(){return f()})};qz.prototype.finish=function(){return this.promise};var n3={},o3=new qz,$ha=function(f,m){return GL(m)},aia=function(f,m){return m.length},bia=function(f,m){f=GL(m);for(var n=
Math.min.apply(null,m),a=Math.max.apply(null,m),d=m.length,k=0,b=0,e=m.length;b<e;b++){var l=m[b];k+=l*l}return{sum:f,min:n,max:a,count:d,sumsqr:k}},p3=function(f,m,n,a){function d(ea,la,db,ub,xa){try{return{output:la(db,ub,xa)}}catch(na){return SV(ea,na),{error:na}}}function k(ea,la){var db=Bk(ea.key,la.key);return 0!==db?db:Bk(ea.value,la.value)}function b(ea,la,db){db=db||0;return"number"===typeof la?ea.slice(db,la+db):0<db?ea.slice(db):ea}function e(ea){var la=ea.value;return la&&"object"===typeof la&&
la._id||ea.id}function l(ea){ea.rows.forEach(function(la){var db=la.doc&&la.doc._attachments;db&&Object.keys(db).forEach(function(ub){var xa=db[ub];db[ub].data=mL(xa.data,xa.content_type)})})}function p(ea){return function(la){ea.include_docs&&ea.attachments&&ea.binary&&l(la);return la}}function q(ea,la,db,ub){la=la[ea];"undefined"!==typeof la&&(ub&&(la=encodeURIComponent(JSON.stringify(la))),db.push(ea+"="+la))}function u(ea){if("undefined"!==typeof ea){var la=Number(ea);return isNaN(la)||la!==parseInt(ea,
10)?ea:la}}function w(ea){ea.group_level=u(ea.group_level);ea.limit=u(ea.limit);ea.skip=u(ea.skip);return ea}function y(ea,la){var db=ea.descending?"endkey":"startkey",ub=ea.descending?"startkey":"endkey";if("undefined"!==typeof ea[db]&&"undefined"!==typeof ea[ub]&&0<Bk(ea[db],ea[ub]))throw new Jt("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(la.reduce&&!1!==ea.reduce){if(ea.include_docs)throw new Jt("{include_docs:true} is invalid for reduce");
if(ea.keys&&1<ea.keys.length&&!ea.group&&!ea.group_level)throw new Jt("Multi-key fetches for reduce views must use {group: true}");}["group_level","limit","skip"].forEach(function(xa){a:{if(xa=ea[xa]){if("number"!==typeof xa){xa=new Jt('Invalid value for integer: "'+xa+'"');break a}if(0>xa){xa=new Jt('Invalid value for positive integer: "'+xa+'"');break a}}xa=void 0}if(xa)throw xa;})}function A(ea,la,db){var ub=[],xa,na="GET",Aa,Pa;q("reduce",db,ub);q("include_docs",db,ub);q("attachments",db,ub);
q("limit",db,ub);q("descending",db,ub);q("group",db,ub);q("group_level",db,ub);q("skip",db,ub);q("stale",db,ub);q("conflicts",db,ub);q("startkey",db,ub,!0);q("start_key",db,ub,!0);q("endkey",db,ub,!0);q("end_key",db,ub,!0);q("inclusive_end",db,ub);q("key",db,ub,!0);q("update_seq",db,ub);ub=ub.join("&");ub=""===ub?"":"?"+ub;if("undefined"!==typeof db.keys){var Da="keys="+encodeURIComponent(JSON.stringify(db.keys));2E3>=Da.length+ub.length+1?ub+=("?"===ub[0]?"&":"?")+Da:(na="POST","string"===typeof la?
xa={keys:db.keys}:la.keys=db.keys)}if("string"===typeof la)return Da=HL(la),ea.fetch("_design/"+Da[0]+"/_view/"+Da[1]+ub,{headers:new Bw({"Content-Type":"application/json"}),method:na,body:JSON.stringify(xa)}).then(function(M){Aa=M.ok;Pa=M.status;return M.json()}).then(function(M){if(!Aa)throw M.status=Pa,ww(M);M.rows.forEach(function(U){if(U.value&&U.value.error&&"builtin_reduce_error"===U.value.error)throw Error(U.reason);});return M}).then(p(db));xa=xa||{};Object.keys(la).forEach(function(M){Array.isArray(la[M])?
xa[M]=la[M]:xa[M]=la[M].toString()});return ea.fetch("_temp_view"+ub,{headers:new Bw({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(xa)}).then(function(M){Aa=M.ok;Pa=M.status;return M.json()}).then(function(M){if(!Aa)throw M.status=Pa,ww(M);return M}).then(p(db))}function C(ea,la,db){return new Promise(function(ub,xa){ea._query(la,db,function(na,Aa){if(na)return xa(na);ub(Aa)})})}function D(ea){return new Promise(function(la,db){ea._viewCleanup(function(ub,xa){if(ub)return db(ub);
la(xa)})})}function L(ea){return function(la){if(404===la.status)return ea;throw la;}}function I(ea,la,db){function ub(Pa,Da){for(var M=[],U=new pz,aa=0,pa=Da.rows.length;aa<pa;aa++){var ma=Da.rows[aa].doc;if(ma&&(M.push(ma),U.add(ma._id),ma._deleted=!Aa.has(ma._id),!ma._deleted)){var La=Aa.get(ma._id);"value"in La&&(ma.value=La.value)}}Da=FL(Aa);Da.forEach(function(ib){if(!U.has(ib)){var ca={_id:ib};ib=Aa.get(ib);"value"in ib&&(ca.value=ib.value);M.push(ca)}});Pa.keys=NV(Da.concat(Pa.keys));M.push(Pa);
return M}var xa="_local/doc_"+ea,na={_id:xa,keys:[]};ea=db.get(ea);var Aa=ea[0];xa=J9(ea[1])?Promise.resolve(na):la.db.get(xa).catch(L(na));return xa.then(function(Pa){return(Pa.keys.length?la.db.allDocs({keys:Pa.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(Da){return ub(Pa,Da)})})}function S(ea,la,db){return ea.db.get("_local/lastSeq").catch(L({_id:"_local/lastSeq",seq:0})).then(function(ub){var xa=FL(la);return Promise.all(xa.map(function(na){return I(na,ea,la)})).then(function(na){na=
$D(na);ub.seq=db;na.push(ub);return ea.db.bulkDocs({docs:na})})})}function V(ea){ea="string"===typeof ea?ea:ea.name;var la=n3[ea];la||(la=n3[ea]=new qz);return la}function ba(ea){return EL(V(ea),function(){return ua(ea)})()}function ua(ea){function la(M,U){return function(){return S(ea,M,U)}}function db(){return ea.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Pa,limit:50}).then(ub)}function ub(M){M=M.results;if(M.length){for(var U=new ym,aa=0,pa=M.length;aa<
pa;aa++){var ma=M[aa];if("_"!==ma.doc._id[0]){xa=[];na=ma.doc;if(!na._deleted){var La=ea.sourceDB;try{Aa(na)}catch(wc){SV(La,wc)}}xa.sort(k);La=void 0;for(var ib=xa,ca=new ym,qa=0,ra=ib.length;qa<ra;qa++){var Va=ib[qa],nb=[Va.key,Va.id];0<qa&&0===Bk(Va.key,La)&&nb.push(qa);ca.set(Zn(nb),Va);La=Va.key}U.set(ma.doc._id,[ca,ma.changes])}Pa=ma.seq}Da.add(la(U,Pa));if(!(50>M.length))return db()}}var xa,na,Aa=m(ea.mapFun,function(M,U){M={id:na._id,key:Ft(M)};"undefined"!==typeof U&&null!==U&&(M.value=Ft(U));
xa.push(M)}),Pa=ea.seq||0,Da=new qz;return db().then(function(){return Da.finish()}).then(function(){ea.seq=Pa})}function Fa(ea,la,db){0===db.group_level&&delete db.group_level;var ub=db.group||db.group_level,xa=n(ea.reduceFun),na=[],Aa=isNaN(db.group_level)?Number.POSITIVE_INFINITY:db.group_level;la.forEach(function(aa){var pa=na[na.length-1],ma=ub?aa.key:null;ub&&Array.isArray(ma)&&(ma=ma.slice(0,Aa));pa&&0===Bk(pa.groupKey,ma)?(pa.keys.push([aa.key,aa.id]),pa.values.push(aa.value)):na.push({keys:[[aa.key,
aa.id]],values:[aa.value],groupKey:ma})});la=[];for(var Pa=0,Da=na.length;Pa<Da;Pa++){var M=na[Pa],U=d(ea.sourceDB,xa,M.keys,M.values,!1);if(U.error&&U.error instanceof iE)throw U.error;la.push({value:U.error?null:U.output,key:M.groupKey})}return{rows:b(la,db.limit,db.skip)}}function F(ea,la){return EL(V(ea),function(){return Y(ea,la)})()}function Y(ea,la){function db(U){U.include_docs=!0;return ea.db.allDocs(U).then(function(aa){xa=aa.total_rows;return aa.rows.map(function(pa){if("value"in pa.doc&&
"object"===typeof pa.doc.value&&null!==pa.doc.value){var ma=Object.keys(pa.doc.value).sort(),La=["id","key","value"];if(!(ma<La||ma>La))return pa.doc.value}a:{ma=pa.doc._id;La=[];for(var ib=[],ca=0;;){var qa=ma[ca++];if("\x00"===qa)if(1===La.length){ma=La.pop();break a}else{var ra=La;var Va=ib;qa=ra.pop();if(Va.length){var nb=Va[Va.length-1];qa===nb.element&&(Va.pop(),nb=Va[Va.length-1]);Va=nb.element;nb=nb.index;Array.isArray(Va)?Va.push(qa):nb===ra.length-2?(ra=ra.pop(),Va[ra]=qa):ra.push(qa)}continue}switch(qa){case "1":La.push(null);
break;case "2":La.push("1"===ma[ca]);ca++;break;case "3":nb=ma;ra=qa=ca;if("1"===nb[qa])nb=0,qa++;else{Va="0"===nb[qa];qa++;var wc="",nc=nb.substring(qa,qa+3);nc=parseInt(nc,10)+-324;Va&&(nc=-nc);for(qa+=3;;){var ac=nb[qa];if("\x00"===ac)break;else wc+=ac;qa++}wc=wc.split(".");nb=1===wc.length?parseInt(wc,10):parseFloat(wc[0]+"."+wc[1]);Va&&(nb-=10);0!==nc&&(nb=parseFloat(nb+"e"+nc))}Va=nb;qa-=ra;La.push(Va);ca+=qa;break;case "4":for(qa="";;){ra=ma[ca];if("\x00"===ra)break;qa+=ra;ca++}qa=qa.replace(/\u0001\u0001/g,
"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,"\u0002");La.push(qa);break;case "5":qa={element:[],index:La.length};La.push(qa.element);ib.push(qa);break;case "6":qa={element:{},index:La.length};La.push(qa.element);ib.push(qa);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+qa);}}}return{key:ma[0],id:ma[1],value:"value"in pa.doc?pa.doc.value:null}})})}function ub(U){var aa=na?Fa(ea,U,la):{total_rows:xa,offset:Aa,rows:U};la.update_seq&&(aa.update_seq=
ea.seq);if(la.include_docs){var pa=NV(U.map(e));return ea.sourceDB.allDocs({keys:pa,include_docs:!0,conflicts:la.conflicts,attachments:la.attachments,binary:la.binary}).then(function(ma){var La=new ym;ma.rows.forEach(function(ib){La.set(ib.id,ib.doc)});U.forEach(function(ib){var ca=e(ib);if(ca=La.get(ca))ib.doc=ca});return aa})}return aa}var xa,na=ea.reduceFun&&!1!==la.reduce,Aa=la.skip||0;"undefined"===typeof la.keys||la.keys.length||(la.limit=0,delete la.keys);if("undefined"!==typeof la.keys){var Pa=
la.keys.map(function(U){U={startkey:Zn([U]),endkey:Zn([U,{}])};la.update_seq&&(U.update_seq=!0);return db(U)});return Promise.all(Pa).then($D).then(ub)}Pa={descending:la.descending};la.update_seq&&(Pa.update_seq=!0);if("start_key"in la)var Da=la.start_key;"startkey"in la&&(Da=la.startkey);if("end_key"in la)var M=la.end_key;"endkey"in la&&(M=la.endkey);"undefined"!==typeof Da&&(Pa.startkey=la.descending?Zn([Da,{}]):Zn([Da]));"undefined"!==typeof M&&(Da=!1!==la.inclusive_end,la.descending&&(Da=!Da),
Pa.endkey=Zn(Da?[M,{}]:[M]));"undefined"!==typeof la.key&&(M=Zn([la.key]),Da=Zn([la.key,{}]),Pa.descending?(Pa.endkey=M,Pa.startkey=Da):(Pa.startkey=M,Pa.endkey=Da));na||("number"===typeof la.limit&&(Pa.limit=la.limit),Pa.skip=Aa);return db(Pa).then(ub)}function Q(ea){return ea.fetch("_view_cleanup",{headers:new Bw({"Content-Type":"application/json"}),method:"POST"}).then(function(la){return la.json()})}function W(ea){return ea.get("_local/"+f).then(function(la){var db=new ym;Object.keys(la.views).forEach(function(xa){var na=
HL(xa);xa="_design/"+na[0];na=na[1];var Aa=db.get(xa);Aa||(Aa=new pz,db.set(xa,Aa));Aa.add(na)});var ub={keys:FL(db),include_docs:!0};return ea.allDocs(ub).then(function(xa){var na={};xa.rows.forEach(function(Aa){var Pa=Aa.key.substring(8);db.get(Aa.key).forEach(function(Da){var M=Pa+"/"+Da;la.views[M]||(M=Da);M=Object.keys(la.views[M]);var U=Aa.doc&&Aa.doc.views&&Aa.doc.views[Da];M.forEach(function(aa){na[aa]=na[aa]||U})})});xa=Object.keys(na).filter(function(Aa){return!na[Aa]}).map(function(Aa){return EL(V(Aa),
function(){return(new ea.constructor(Aa,ea.__opts)).destroy()})()});return Promise.all(xa).then(function(){return{ok:!0}})})},L({ok:!0}))}function ka(ea,la,db){if("function"===typeof ea._query)return C(ea,la,db);if(Wo(ea))return A(ea,la,db);if("string"!==typeof la)return y(db,la),o3.add(function(){return RV(ea,"temp_view/temp_view",la.map,la.reduce,!0,f).then(function(na){return E9(ba(na).then(function(){return F(na,db)}),function(){return na.db.destroy()})})}),o3.finish();var ub=HL(la),xa=ub[1];
return ea.get("_design/"+ub[0]).then(function(na){var Aa=na.views&&na.views[xa];if(!Aa)throw new hE("ddoc "+na._id+" has no view named "+xa);a(na,xa);y(db,Aa);return RV(ea,la,Aa.map,Aa.reduce,!1,f).then(function(Pa){return"ok"===db.stale||"update_after"===db.stale?("update_after"===db.stale&&Xo(function(){ba(Pa)}),F(Pa,db)):ba(Pa).then(function(){return F(Pa,db)})})})}return{query:function(ea,la,db){var ub=this;"function"===typeof la&&(db=la,la={});la=la?w(la):{};"function"===typeof ea&&(ea={map:ea});
var xa=Promise.resolve().then(function(){return ka(ub,ea,la)});MV(xa,db);return xa},viewCleanup:D9(function(){return"function"===typeof this._viewCleanup?D(this):Wo(this)?Q(this):W(this)})}}("mrviews",function(f,m){return"function"===typeof f&&2===f.length?function(n){return f(n,m)}:PV(f.toString(),m)},function(f){f=f.toString();if(/^_sum/.test(f))var m=$ha;else if(/^_count/.test(f))m=aia;else if(/^_stats/.test(f))m=bia;else{if(/^_/.test(f))throw Error(f+" is not a supported reduce function.");m=
void 0}return m?m:PV(f)},function(f,m){var n=f.views&&f.views[m];if("string"!==typeof n.map)throw new hE("ddoc "+f._id+" has no string view named "+m+", instead found object of type: "+typeof n.map);});rz.prototype.writeCheckpoint=function(f,m){var n=this;return this.updateTarget(f,m).then(function(){return n.updateSource(f,m)})};rz.prototype.updateTarget=function(f,m){return this.opts.writeTargetCheckpoint?IL(this.target,this.id,f,m,this.returnValue):Promise.resolve(!0)};rz.prototype.updateSource=
function(f,m){if(this.opts.writeSourceCheckpoint){var n=this;return IL(this.src,this.id,f,m,this.returnValue).catch(function(a){if(VV(a))return n.opts.writeSourceCheckpoint=!1,!0;throw a;})}return Promise.resolve(!0)};var q3={undefined:function(f,m){return 0===Bk(f.last_seq,m.last_seq)?m.last_seq:0},1:function(f,m){f=m.session_id===f.session_id?{last_seq:m.last_seq,history:m.history}:UV(m.history,f.history);return f.last_seq}};rz.prototype.getCheckpoint=function(){var f=this;return f.opts&&f.opts.writeSourceCheckpoint&&
!f.opts.writeTargetCheckpoint?f.src.get(f.id).then(function(m){return m.last_seq||0}).catch(function(m){if(404!==m.status)throw m;return 0}):f.target.get(f.id).then(function(m){return f.opts&&f.opts.writeTargetCheckpoint&&!f.opts.writeSourceCheckpoint?m.last_seq||0:f.src.get(f.id).then(function(n){if(m.version!==n.version)return 0;var a=m.version?m.version.toString():"undefined";return a in q3?q3[a](m,n):0},function(n){if(404===n.status&&m.last_seq)return f.src.put({_id:f.id,last_seq:0}).then(function(){return 0},
function(a){return VV(a)?(f.opts.writeSourceCheckpoint=!1,m.last_seq):0});throw n;})}).catch(function(m){if(404!==m.status)throw m;return 0})};Ao(jE,am.EventEmitter);jE.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};jE.prototype.ready=function(f,m){function n(){a.cancel()}var a=this;a._readyCalled||(a._readyCalled=!0,f.once("destroyed",n),m.once("destroyed",n),a.once("complete",function(){f.removeListener("destroyed",n);m.removeListener("destroyed",n)}))};
Ao(LL,am.EventEmitter);LL.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};hh.plugin(function(f){f.adapter("idb",JV,!0)}).plugin(function(f){f.adapter("http",CL,!1);f.adapter("https",CL,!1)}).plugin({query:function(f,m,n){return p3.query.call(this,f,m,n)},viewCleanup:function(f){return p3.viewCleanup.call(this,f)}}).plugin(function(f){f.replicate=KL;f.sync=Q9;Object.defineProperty(f.prototype,"replicate",{get:function(){var m=this;"undefined"===
typeof this.replicateMethods&&(this.replicateMethods={from:function(n,a,d){return m.constructor.replicate(n,m,a,d)},to:function(n,a,d){return m.constructor.replicate(m,n,a,d)}});return this.replicateMethods}});f.prototype.sync=function(m,n,a){return this.constructor.sync(this,m,n,a)}});var cia=Xha=hh,qs={};Object.defineProperty(qs,"__esModule",{value:!0});wr.prototype.get=function(f){return this._store["$"+f]};wr.prototype.set=function(f,m){this._store["$"+f]=m;return!0};wr.prototype.has=function(f){return"$"+
f in this._store};wr.prototype.delete=function(f){f="$"+f;var m=f in this._store;delete this._store[f];return m};wr.prototype.forEach=function(f){for(var m=Object.keys(this._store),n=0,a=m.length;n<a;n++){var d=m[n],k=this._store[d];d=d.substring(1);f(k,d)}};Object.defineProperty(wr.prototype,"size",{get:function(){return Object.keys(this._store).length}});sz.prototype.add=function(f){return this._store.set(f,!0)};sz.prototype.has=function(f){return this._store.has(f)};sz.prototype.forEach=function(f){this._store.forEach(function(m,
n){f(n)})};Object.defineProperty(sz.prototype,"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var f=Object.getOwnPropertyDescriptor(Map,Symbol.species);return f&&"get"in f&&Map[Symbol.species]===Map})()?(qs.Set=Set,qs.Map=Map):(qs.Set=sz,qs.Map=wr);var iQ={},jQ=yh;iQ.test=function(){return"undefined"!==typeof jQ&&!jQ.browser};iQ.install=function(f){return function(){jQ.nextTick(f)}};var r3="undefined"!==
typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,lQ={},s3=kQ.MutationObserver||kQ.WebKitMutationObserver;lQ.test=function(){return s3};lQ.install=function(f){var m=0;f=new s3(f);var n=kQ.document.createTextNode("");f.observe(n,{characterData:!0});return function(){n.data=m=++m%2}};var mQ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eI="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,dia={},kB=[iQ,{test:function(){return"function"===typeof r3.queueMicrotask},install:function(f){return function(){r3.queueMicrotask(f)}}},lQ,{test:function(){return mQ.setImmediate?!1:"undefined"!==typeof mQ.MessageChannel},install:function(f){var m=new mQ.MessageChannel;m.port1.onmessage=f;return function(){m.port2.postMessage(0)}}},{test:function(){return"document"in eI&&"onreadystatechange"in eI.document.createElement("script")},install:function(f){return function(){var m=
eI.document.createElement("script");m.onreadystatechange=function(){f();m.onreadystatechange=null;m.parentNode.removeChild(m);m=null};eI.document.documentElement.appendChild(m);return f}}},{test:function(){return!0},install:function(f){return function(){setTimeout(f,0)}}}],Cw,Kt,tz=-1,xr=[],ML=!1,lB=-1,eia=kB.length;for(;++lB<eia;)if(kB[lB]&&kB[lB].test&&kB[lB].test()){var fia=kB[lB].install(XV);break}YV.prototype.run=function(){var f=this.fun,m=this.array;switch(m.length){case 0:return f();case 1:return f(m[0]);
case 2:return f(m[0],m[1]);case 3:return f(m[0],m[1],m[2]);default:return f.apply(null,m)}};var Zh=dia=function(f){var m=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)m[n-1]=arguments[n];xr.push(new YV(f,m));ML||Cw||(ML=!0,fia())},Gf={};Object.defineProperty(Gf,"__esModule",{value:!0});(bj&&"object"===typeof bj&&"default"in bj?bj["default"]:bj)(Mi,Error);Mi.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,
reason:this.reason})};var gia=new Mi(401,"unauthorized","Name or password is incorrect."),hia=new Mi(400,"bad_request","Missing JSON list of 'docs'"),iia=new Mi(404,"not_found","missing"),jia=new Mi(409,"conflict","Document update conflict"),kia=new Mi(400,"bad_request","_id field must contain a string"),lia=new Mi(412,"missing_id","_id is required for puts"),mia=new Mi(400,"bad_request","Only reserved document ids may start with underscore."),nia=new Mi(412,"precondition_failed","Database not open"),
t3=new Mi(500,"unknown_error","Database encountered an unknown error"),oia=new Mi(500,"badarg","Some query argument is invalid"),pia=new Mi(400,"invalid_request","Request was invalid"),qia=new Mi(400,"query_parse_error","Some query parameter is invalid"),ria=new Mi(500,"doc_validation","Bad special document member"),sia=new Mi(400,"bad_request","Something wrong with the request"),tia=new Mi(400,"bad_request","Document must be a JSON object"),uia=new Mi(404,"not_found","Database not found"),via=new Mi(500,
"indexed_db_went_bad","unknown"),wia=new Mi(500,"web_sql_went_bad","unknown"),xia=new Mi(500,"levelDB_went_went_bad","unknown"),yia=new Mi(403,"forbidden","Forbidden by design doc validate_doc_update function"),zia=new Mi(400,"bad_request","Invalid rev format"),Aia=new Mi(412,"file_exists","The database could not be created, the file already exists."),Bia=new Mi(412,"missing_stub","A pre-existing attachment stub wasn't found"),Cia=new Mi(413,"invalid_url","Provided URL is invalid");Gf.UNAUTHORIZED=
gia;Gf.MISSING_BULK_DOCS=hia;Gf.MISSING_DOC=iia;Gf.REV_CONFLICT=jia;Gf.INVALID_ID=kia;Gf.MISSING_ID=lia;Gf.RESERVED_ID=mia;Gf.NOT_OPEN=nia;Gf.UNKNOWN_ERROR=t3;Gf.BAD_ARG=oia;Gf.INVALID_REQUEST=pia;Gf.QUERY_PARSE_ERROR=qia;Gf.DOC_VALIDATION=ria;Gf.BAD_REQUEST=sia;Gf.NOT_AN_OBJECT=tia;Gf.DB_MISSING=uia;Gf.WSQ_ERROR=wia;Gf.LDB_ERROR=xia;Gf.FORBIDDEN=yia;Gf.INVALID_REV=zia;Gf.FILE_EXISTS=Aia;Gf.MISSING_STUB=Bia;Gf.IDB_ERROR=via;Gf.INVALID_URL=Cia;Gf.createError=function(f,m){function n(a){for(var d=Object.getOwnPropertyNames(f),
k=0,b=d.length;k<b;k++)"function"!==typeof f[d[k]]&&(this[d[k]]=f[d[k]]);void 0!==a&&(this.reason=a)}n.prototype=Mi.prototype;return new n(m)};Gf.generateErrorFromResponse=function(f){if("object"!==typeof f){var m=f;f=t3;f.data=m}"error"in f&&"conflict"===f.error&&(f.name="conflict",f.status=409);"name"in f||(f.name=f.error||"unknown");"status"in f||(f.status=500);"message"in f||(f.message=f.message||f.reason);return f};var Dia="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,nQ=Object.prototype.toString,
fI=function(f){return!(Dia&&f&&"object"==typeof f&&Symbol.toStringTag in f)&&"[object Arguments]"===nQ.call(f)},u3=function(f){return!!fI(f)||null!==f&&"object"==typeof f&&"number"==typeof f.length&&0<=f.length&&"[object Array]"!==nQ.call(f)&&"[object Function]"===nQ.call(f.callee)},Eia=function(){return fI(arguments)}();fI.isLegacyArguments=u3;var Fia=Eia?fI:u3,Gia=Object.prototype.toString,Hia=Function.prototype.toString,Iia=/^\s*(?:function)?\*/,v3="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,
w3=Object.getPrototypeOf;a:if(v3){try{var gI=Function("return function*() {}")();break a}catch(f){}gI=void 0}else gI=!1;var Jia=gI?w3(gI):{},Wg="function"==typeof Object.create?function(f,m){m&&(f.super_=m,f.prototype=Object.create(m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:function(f,m){if(m){f.super_=m;var n=function(){};n.prototype=m.prototype;f.prototype=new n;f.prototype.constructor=f}},x3=function(f){return f&&"object"==typeof f&&"function"==typeof f.copy&&
"function"==typeof f.fill&&"function"==typeof f.readUInt8},Ch={},S9=x3,rW="undefined"!=typeof BigInt,OL="undefined"!=typeof Symbol,zm=OL&&void 0!==Symbol.toStringTag,bm="undefined"!=typeof Uint8Array,Kia="undefined"!=typeof ArrayBuffer;if(bm&&zm)var Lia=Object.getPrototypeOf(Uint8Array.prototype),bn=Lt(Object.getOwnPropertyDescriptor(Lia,Symbol.toStringTag).get);var nj=Lt(Object.prototype.toString),T9=Lt(Number.prototype.valueOf),U9=Lt(String.prototype.valueOf),V9=Lt(Boolean.prototype.valueOf);if(rW)var W9=
Lt(BigInt.prototype.valueOf);if(OL)var X9=Lt(Symbol.prototype.valueOf);Ch.isArgumentsObject=Fia;Ch.isGeneratorFunction=function(f){return"function"==typeof f&&(!!Iia.test(Hia.call(f))||(v3?w3(f)===Jia:"[object GeneratorFunction]"===Gia.call(f)))};Ch.isPromise=function(f){return"undefined"!=typeof Promise&&f instanceof Promise||null!==f&&"object"==typeof f&&"function"==typeof f.then&&"function"==typeof f.catch};Ch.isArrayBufferView=function(f){return Kia&&ArrayBuffer.isView?ArrayBuffer.isView(f):ZV(f)||
lW(f)};Ch.isTypedArray=ZV;Ch.isUint8Array=$V;Ch.isUint8ClampedArray=aW;Ch.isUint16Array=bW;Ch.isUint32Array=cW;Ch.isInt8Array=dW;Ch.isInt16Array=eW;Ch.isInt32Array=fW;Ch.isFloat32Array=gW;Ch.isFloat64Array=hW;Ch.isBigInt64Array=iW;Ch.isBigUint64Array=jW;lE.working="undefined"!=typeof Map&&lE(new Map);Ch.isMap=function(f){return"undefined"!=typeof Map&&(lE.working?lE(f):f instanceof Map)};mE.working="undefined"!=typeof Set&&mE(new Set);Ch.isSet=function(f){return"undefined"!=typeof Set&&(mE.working?
mE(f):f instanceof Set)};nE.working="undefined"!=typeof WeakMap&&nE(new WeakMap);Ch.isWeakMap=function(f){return"undefined"!=typeof WeakMap&&(nE.working?nE(f):f instanceof WeakMap)};NL.working="undefined"!=typeof WeakSet&&NL(new WeakSet);Ch.isWeakSet=function(f){return NL(f)};oE.working="undefined"!=typeof ArrayBuffer&&oE(new ArrayBuffer);Ch.isArrayBuffer=kW;pE.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&pE(new DataView(new ArrayBuffer(1),0,1));Ch.isDataView=lW;qE.working=
"undefined"!=typeof SharedArrayBuffer&&qE(new SharedArrayBuffer);Ch.isSharedArrayBuffer=mW;Ch.isAsyncFunction=function(f){return"[object AsyncFunction]"===nj(f)};Ch.isMapIterator=function(f){return"[object Map Iterator]"===nj(f)};Ch.isSetIterator=function(f){return"[object Set Iterator]"===nj(f)};Ch.isGeneratorObject=function(f){return"[object Generator]"===nj(f)};Ch.isWebAssemblyCompiledModule=function(f){return"[object WebAssembly.Module]"===nj(f)};Ch.isNumberObject=nW;Ch.isStringObject=oW;Ch.isBooleanObject=
pW;Ch.isBigIntObject=qW;Ch.isSymbolObject=sW;Ch.isBoxedPrimitive=function(f){return nW(f)||oW(f)||pW(f)||qW(f)||sW(f)};Ch.isAnyArrayBuffer=function(f){return bm&&(kW(f)||mW(f))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(f){Object.defineProperty(Ch,f,{enumerable:!1,value:function(){throw Error(f+" is not supported in userland");}})});var mB="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Eg={},Dp=yh,y3=Object.getOwnPropertyDescriptors||function(f){for(var m=
Object.keys(f),n={},a=0;a<m.length;a++)n[m[a]]=Object.getOwnPropertyDescriptor(f,m[a]);return n},Mia=/%[sdj%]/g;Eg.format=function(f){if(!tE(f)){for(var m=[],n=0;n<arguments.length;n++)m.push(yr(arguments[n]));return m.join(" ")}n=1;var a=arguments,d=a.length;m=String(f).replace(Mia,function(b){if("%%"===b)return"%";if(n>=d)return b;switch(b){case "%s":return String(a[n++]);case "%d":return Number(a[n++]);case "%j":try{return JSON.stringify(a[n++])}catch(e){return"[Circular]"}default:return b}});
for(var k=a[n];n<d;k=a[++n])null!==k&&Dw(k)?m+=" "+yr(k):m+=" "+k;return m};Eg.deprecate=function(f,m){if(void 0!==Dp&&!0===Dp.noDeprecation)return f;if(void 0===Dp)return function(){return Eg.deprecate(f,m).apply(this||mB,arguments)};var n=!1;return function(){if(!n){if(Dp.throwDeprecation)throw Error(m);Dp.traceDeprecation?console.trace(m):console.error(m);n=!0}return f.apply(this||mB,arguments)}};var hI={},z3=/^$/;if(Dp.env.NODE_DEBUG){var oQ=Dp.env.NODE_DEBUG;oQ=oQ.replace(/[|\\{}()[\]^$+?.]/g,
"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();z3=new RegExp("^"+oQ+"$","i")}Eg.debuglog=function(f){if(f=f.toUpperCase(),!hI[f])if(z3.test(f)){var m=Dp.pid;hI[f]=function(){var n=Eg.format.apply(Eg,arguments);console.error("%s %d: %s",f,m,n)}}else hI[f]=function(){};return hI[f]};Eg.inspect=yr;yr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};
yr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Eg.types=Ch;Eg.isArray=uW;Eg.isBoolean=PL;Eg.isNull=function(f){return null===f};Eg.isNullOrUndefined=function(f){return null==f};Eg.isNumber=tW;Eg.isString=tE;Eg.isSymbol=function(f){return"symbol"==typeof f};Eg.isUndefined=Mt;Eg.isRegExp=wz;Eg.types.isRegExp=wz;Eg.isObject=Dw;Eg.isDate=uE;Eg.types.isDate=uE;Eg.isError=vz;Eg.types.isNativeError=vz;Eg.isFunction=sE;Eg.isPrimitive=
function(f){return null===f||"boolean"==typeof f||"number"==typeof f||"string"==typeof f||"symbol"==typeof f||void 0===f};Eg.isBuffer=x3;var a$="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Eg.log=function(){console.log("%s - %s",$9(),Eg.format.apply(Eg,arguments))};Eg.inherits=Wg;Eg._extend=function(f,m){if(!m||!Dw(m))return f;for(var n=Object.keys(m),a=n.length;a--;)f[n[a]]=m[n[a]];return f};var Hu="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Eg.promisify=function(f){function m(){for(var n,
a,d=new Promise(function(e,l){n=e;a=l}),k=[],b=0;b<arguments.length;b++)k.push(arguments[b]);k.push(function(e,l){e?a(e):n(l)});try{f.apply(this||mB,k)}catch(e){a(e)}return d}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');if(Hu&&f[Hu]){if("function"!=typeof(m=f[Hu]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(m,Hu,{value:m,enumerable:!1,writable:!1,configurable:!0}),m}return Object.setPrototypeOf(m,
Object.getPrototypeOf(f)),Hu&&Object.defineProperty(m,Hu,{value:m,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(m,y3(f))};Eg.promisify.custom=Hu;Eg.callbackify=function(f){function m(){for(var n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);var d=n.pop();if("function"!=typeof d)throw new TypeError("The last argument must be of type Function");var k=this||mB,b=function(){return d.apply(k,arguments)};f.apply(this||mB,n).then(function(e){Dp.nextTick(b.bind(null,null,e))},function(e){Dp.nextTick(b$.bind(null,
e,b))})}if("function"!=typeof f)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(m,Object.getPrototypeOf(f)),Object.defineProperties(m,y3(f)),m};for(var Zo=[],Hn=[],Nia="undefined"!=typeof Uint8Array?Uint8Array:Array,Jx=0;64>Jx;++Jx)Zo[Jx]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[Jx],Hn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Jx)]=Jx;Hn[45]=62;Hn[95]=63;var Ng={},XL={byteLength:function(f){f=
vW(f);var m=f[1];return 3*(f[0]+m)/4-m},toByteArray:function(f){var m=vW(f);var n=m[0];m=m[1];var a=new Nia(3*(n+m)/4-m),d=0,k=0<m?n-4:n;for(n=0;n<k;n+=4){var b=Hn[f.charCodeAt(n)]<<18|Hn[f.charCodeAt(n+1)]<<12|Hn[f.charCodeAt(n+2)]<<6|Hn[f.charCodeAt(n+3)];a[d++]=b>>16&255;a[d++]=b>>8&255;a[d++]=255&b}2===m&&(b=Hn[f.charCodeAt(n)]<<2|Hn[f.charCodeAt(n+1)]>>4,a[d++]=255&b);1===m&&(b=Hn[f.charCodeAt(n)]<<10|Hn[f.charCodeAt(n+1)]<<4|Hn[f.charCodeAt(n+2)]>>2,a[d++]=b>>8&255,a[d++]=255&b);return a},fromByteArray:function(f){for(var m,
n=f.length,a=n%3,d=[],k=0,b=n-a;k<b;k+=16383)d.push(c$(f,k,k+16383>b?b:k+16383));1===a?(m=f[n-1],d.push(Zo[m>>2]+Zo[m<<4&63]+"==")):2===a&&(m=(f[n-2]<<8)+f[n-1],d.push(Zo[m>>10]+Zo[m>>4&63]+Zo[m<<2&63]+"="));return d.join("")}},Ew={read:function(f,m,n,a,d){var k=8*d-a-1;var b=(1<<k)-1,e=b>>1,l=-7;d=n?d-1:0;var p=n?-1:1,q=f[m+d];d+=p;n=q&(1<<-l)-1;q>>=-l;for(l+=k;0<l;n=256*n+f[m+d],d+=p,l-=8);k=n&(1<<-l)-1;n>>=-l;for(l+=a;0<l;k=256*k+f[m+d],d+=p,l-=8);if(0===n)n=1-e;else{if(n===b)return k?NaN:1/0*
(q?-1:1);k+=Math.pow(2,a);n-=e}return(q?-1:1)*k*Math.pow(2,n-a)},write:function(f,m,n,a,d,k){var b,e,l,p=8*k-d-1,q=(1<<p)-1,u=q>>1,w=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;k=a?0:k-1;a=a?1:-1;var y=0>m||0===m&&0>1/m?1:0;m=Math.abs(m);for(isNaN(m)||m===1/0?(e=isNaN(m)?1:0,b=q):(b=Math.floor(Math.log(m)/Math.LN2),1>m*(l=Math.pow(2,-b))&&(b--,l*=2),2<=(m+=1<=b+u?w/l:w*Math.pow(2,1-u))*l&&(b++,l/=2),b+u>=q?(e=0,b=q):1<=b+u?(e=(m*l-1)*Math.pow(2,d),b+=u):(e=m*Math.pow(2,u-1)*Math.pow(2,d),b=0));8<=d;f[n+
k]=255&e,k+=a,e/=256,d-=8);b=b<<d|e;for(p+=d;0<p;f[n+k]=255&b,k+=a,b/=256,p-=8);f[n+k-a]|=128*y}},A3="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ng.Buffer=de;Ng.SlowBuffer=function(f){+f!=f&&(f=0);return de.alloc(+f)};Ng.INSPECT_MAX_BYTES=50;Ng.kMaxLength=2147483647;de.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(f,m),42===
f.foo()}catch(n){return!1}}();de.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(de.prototype,"parent",{enumerable:!0,get:function(){if(de.isBuffer(this))return this.buffer}});Object.defineProperty(de.prototype,"offset",{enumerable:!0,get:function(){if(de.isBuffer(this))return this.byteOffset}});
de.poolSize=8192;de.from=function(f,m,n){return wW(f,m,n)};Object.setPrototypeOf(de.prototype,Uint8Array.prototype);Object.setPrototypeOf(de,Uint8Array);de.alloc=function(f,m,n){return yW(f),0>=f?iq(f):void 0!==m?"string"==typeof n?iq(f).fill(m,n):iq(f).fill(m):iq(f)};de.allocUnsafe=function(f){return TL(f)};de.allocUnsafeSlow=function(f){return TL(f)};de.isBuffer=function(f){return null!=f&&!0===f._isBuffer&&f!==de.prototype};de.compare=function(f,m){if(jq(f,Uint8Array)&&(f=de.from(f,f.offset,f.byteLength)),
jq(m,Uint8Array)&&(m=de.from(m,m.offset,m.byteLength)),!de.isBuffer(f)||!de.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===m)return 0;for(var n=f.length,a=m.length,d=0,k=Math.min(n,a);d<k;++d)if(f[d]!==m[d]){n=f[d];a=m[d];break}return n<a?-1:a<n?1:0};de.isEncoding=function(f){switch(String(f).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};de.concat=function(f,m){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(0===f.length)return de.alloc(0);var n;if(void 0===m)for(n=m=0;n<f.length;++n)m+=f[n].length;m=de.allocUnsafe(m);var a=0;for(n=0;n<f.length;++n){var d=f[n];if(jq(d,Uint8Array)&&(d=de.from(d)),!de.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(m,a);a+=d.length}return m};de.byteLength=xW;de.prototype._isBuffer=!0;de.prototype.swap16=
function(){var f=this.length;if(0!=f%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<f;m+=2)Nt(this,m,m+1);return this};de.prototype.swap32=function(){var f=this.length;if(0!=f%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<f;m+=4)Nt(this,m,m+3),Nt(this,m+1,m+2);return this};de.prototype.swap64=function(){var f=this.length;if(0!=f%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<f;m+=8)Nt(this,m,
m+7),Nt(this,m+1,m+6),Nt(this,m+2,m+5),Nt(this,m+3,m+4);return this};de.prototype.toString=function(){var f=this.length;return 0===f?"":0===arguments.length?AW(this,0,f):e$.apply(this,arguments)};de.prototype.toLocaleString=de.prototype.toString;de.prototype.equals=function(f){if(!de.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||0===de.compare(this,f)};de.prototype.inspect=function(){var f="",m=Ng.INSPECT_MAX_BYTES;return f=this.toString("hex",0,m).replace(/(.{2})/g,
"$1 ").trim(),this.length>m&&(f+=" ... "),"<Buffer "+f+">"};A3&&(de.prototype[A3]=de.prototype.inspect);de.prototype.compare=function(f,m,n,a,d){if(jq(f,Uint8Array)&&(f=de.from(f,f.offset,f.byteLength)),!de.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(void 0===m&&(m=0),void 0===n&&(n=f?f.length:0),void 0===a&&(a=0),void 0===d&&(d=this.length),0>m||n>f.length||0>a||d>this.length)throw new RangeError("out of range index");
if(a>=d&&m>=n)return 0;if(a>=d)return-1;if(m>=n)return 1;if(this===f)return 0;var k=(d>>>=0)-(a>>>=0),b=(n>>>=0)-(m>>>=0),e=Math.min(k,b);a=this.slice(a,d);f=f.slice(m,n);for(m=0;m<e;++m)if(a[m]!==f[m]){k=a[m];b=f[m];break}return k<b?-1:b<k?1:0};de.prototype.includes=function(f,m,n){return-1!==this.indexOf(f,m,n)};de.prototype.indexOf=function(f,m,n){return BW(this,f,m,n,!0)};de.prototype.lastIndexOf=function(f,m,n){return BW(this,f,m,n,!1)};de.prototype.write=function(f,m,n,a){if(void 0===m)a="utf8",
n=this.length,m=0;else if(void 0===n&&"string"==typeof m)a=m,n=this.length,m=0;else{if(!isFinite(m))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");m>>>=0;isFinite(n)?(n>>>=0,void 0===a&&(a="utf8")):(a=n,n=void 0)}var d=this.length-m;if((void 0===n||n>d)&&(n=d),0<f.length&&(0>n||0>m)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(d=!1;;)switch(a){case "hex":a:{m=Number(m)||0;a=this.length-m;n?(n=Number(n))>a&&
(n=a):n=a;a=f.length;n>a/2&&(n=a/2);for(a=0;a<n;++a){d=parseInt(f.substr(2*a,2),16);if(d!=d){n=a;break a}this[m+a]=d}n=a}return n;case "utf8":case "utf-8":return vE(WL(f,this.length-m),this,m,n);case "ascii":return DW(this,f,m,n);case "latin1":case "binary":return DW(this,f,m,n);case "base64":return vE(zW(f),this,m,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=n;d=this.length-m;for(var k=[],b=0;b<f.length&&!(0>(d-=2));++b){var e=f.charCodeAt(b);n=e>>8;e%=256;k.push(e);k.push(n)}return vE(k,
this,m,a);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();d=!0}};de.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};de.prototype.slice=function(f,m){var n=this.length;0>(f=~~f)?0>(f+=n)&&(f=0):f>n&&(f=n);0>(m=void 0===m?n:~~m)?0>(m+=n)&&(m=0):m>n&&(m=n);m<f&&(m=f);f=this.subarray(f,m);return Object.setPrototypeOf(f,de.prototype),f};de.prototype.readUIntLE=function(f,m,n){f>>>=0;m>>>=0;n||Ck(f,m,this.length);n=this[f];
for(var a=1,d=0;++d<m&&(a*=256);)n+=this[f+d]*a;return n};de.prototype.readUIntBE=function(f,m,n){f>>>=0;m>>>=0;n||Ck(f,m,this.length);n=this[f+--m];for(var a=1;0<m&&(a*=256);)n+=this[f+--m]*a;return n};de.prototype.readUInt8=function(f,m){return f>>>=0,m||Ck(f,1,this.length),this[f]};de.prototype.readUInt16LE=function(f,m){return f>>>=0,m||Ck(f,2,this.length),this[f]|this[f+1]<<8};de.prototype.readUInt16BE=function(f,m){return f>>>=0,m||Ck(f,2,this.length),this[f]<<8|this[f+1]};de.prototype.readUInt32LE=
function(f,m){return f>>>=0,m||Ck(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]};de.prototype.readUInt32BE=function(f,m){return f>>>=0,m||Ck(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])};de.prototype.readIntLE=function(f,m,n){f>>>=0;m>>>=0;n||Ck(f,m,this.length);n=this[f];for(var a=1,d=0;++d<m&&(a*=256);)n+=this[f+d]*a;return n>=128*a&&(n-=Math.pow(2,8*m)),n};de.prototype.readIntBE=function(f,m,n){f>>>=0;m>>>=0;n||Ck(f,m,this.length);n=m;for(var a=
1,d=this[f+--n];0<n&&(a*=256);)d+=this[f+--n]*a;return d>=128*a&&(d-=Math.pow(2,8*m)),d};de.prototype.readInt8=function(f,m){return f>>>=0,m||Ck(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]};de.prototype.readInt16LE=function(f,m){f>>>=0;m||Ck(f,2,this.length);f=this[f]|this[f+1]<<8;return 32768&f?4294901760|f:f};de.prototype.readInt16BE=function(f,m){f>>>=0;m||Ck(f,2,this.length);f=this[f+1]|this[f]<<8;return 32768&f?4294901760|f:f};de.prototype.readInt32LE=function(f,m){return f>>>=0,
m||Ck(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24};de.prototype.readInt32BE=function(f,m){return f>>>=0,m||Ck(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]};de.prototype.readFloatLE=function(f,m){return f>>>=0,m||Ck(f,4,this.length),Ew.read(this,f,!0,23,4)};de.prototype.readFloatBE=function(f,m){return f>>>=0,m||Ck(f,4,this.length),Ew.read(this,f,!1,23,4)};de.prototype.readDoubleLE=function(f,m){return f>>>=0,m||Ck(f,8,this.length),Ew.read(this,f,!0,52,8)};
de.prototype.readDoubleBE=function(f,m){return f>>>=0,m||Ck(f,8,this.length),Ew.read(this,f,!1,52,8)};de.prototype.writeUIntLE=function(f,m,n,a){(f=+f,m>>>=0,n>>>=0,a)||cm(this,f,m,n,Math.pow(2,8*n)-1,0);a=1;var d=0;for(this[m]=255&f;++d<n&&(a*=256);)this[m+d]=f/a&255;return m+n};de.prototype.writeUIntBE=function(f,m,n,a){(f=+f,m>>>=0,n>>>=0,a)||cm(this,f,m,n,Math.pow(2,8*n)-1,0);a=n-1;var d=1;for(this[m+a]=255&f;0<=--a&&(d*=256);)this[m+a]=f/d&255;return m+n};de.prototype.writeUInt8=function(f,m,
n){return f=+f,m>>>=0,n||cm(this,f,m,1,255,0),this[m]=255&f,m+1};de.prototype.writeUInt16LE=function(f,m,n){return f=+f,m>>>=0,n||cm(this,f,m,2,65535,0),this[m]=255&f,this[m+1]=f>>>8,m+2};de.prototype.writeUInt16BE=function(f,m,n){return f=+f,m>>>=0,n||cm(this,f,m,2,65535,0),this[m]=f>>>8,this[m+1]=255&f,m+2};de.prototype.writeUInt32LE=function(f,m,n){return f=+f,m>>>=0,n||cm(this,f,m,4,4294967295,0),this[m+3]=f>>>24,this[m+2]=f>>>16,this[m+1]=f>>>8,this[m]=255&f,m+4};de.prototype.writeUInt32BE=function(f,
m,n){return f=+f,m>>>=0,n||cm(this,f,m,4,4294967295,0),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=255&f,m+4};de.prototype.writeIntLE=function(f,m,n,a){(f=+f,m>>>=0,a)||(a=Math.pow(2,8*n-1),cm(this,f,m,n,a-1,-a));a=0;var d=1,k=0;for(this[m]=255&f;++a<n&&(d*=256);)0>f&&0===k&&0!==this[m+a-1]&&(k=1),this[m+a]=(f/d>>0)-k&255;return m+n};de.prototype.writeIntBE=function(f,m,n,a){(f=+f,m>>>=0,a)||(a=Math.pow(2,8*n-1),cm(this,f,m,n,a-1,-a));a=n-1;var d=1,k=0;for(this[m+a]=255&f;0<=--a&&(d*=
256);)0>f&&0===k&&0!==this[m+a+1]&&(k=1),this[m+a]=(f/d>>0)-k&255;return m+n};de.prototype.writeInt8=function(f,m,n){return f=+f,m>>>=0,n||cm(this,f,m,1,127,-128),0>f&&(f=255+f+1),this[m]=255&f,m+1};de.prototype.writeInt16LE=function(f,m,n){return f=+f,m>>>=0,n||cm(this,f,m,2,32767,-32768),this[m]=255&f,this[m+1]=f>>>8,m+2};de.prototype.writeInt16BE=function(f,m,n){return f=+f,m>>>=0,n||cm(this,f,m,2,32767,-32768),this[m]=f>>>8,this[m+1]=255&f,m+2};de.prototype.writeInt32LE=function(f,m,n){return f=
+f,m>>>=0,n||cm(this,f,m,4,2147483647,-2147483648),this[m]=255&f,this[m+1]=f>>>8,this[m+2]=f>>>16,this[m+3]=f>>>24,m+4};de.prototype.writeInt32BE=function(f,m,n){return f=+f,m>>>=0,n||cm(this,f,m,4,2147483647,-2147483648),0>f&&(f=4294967295+f+1),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=255&f,m+4};de.prototype.writeFloatLE=function(f,m,n){return FW(this,f,m,!0,n)};de.prototype.writeFloatBE=function(f,m,n){return FW(this,f,m,!1,n)};de.prototype.writeDoubleLE=function(f,m,n){return GW(this,
f,m,!0,n)};de.prototype.writeDoubleBE=function(f,m,n){return GW(this,f,m,!1,n)};de.prototype.copy=function(f,m,n,a){if(!de.isBuffer(f))throw new TypeError("argument should be a Buffer");if((n||(n=0),a||0===a||(a=this.length),m>=f.length&&(m=f.length),m||(m=0),0<a&&a<n&&(a=n),a===n)||0===f.length||0===this.length)return 0;if(0>m)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");
a>this.length&&(a=this.length);f.length-m<a-n&&(a=f.length-m+n);var d=a-n;if(this===f&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(m,n,a);else if(this===f&&n<m&&m<a)for(a=d-1;0<=a;--a)f[a+m]=this[a+n];else Uint8Array.prototype.set.call(f,this.subarray(n,a),m);return d};de.prototype.fill=function(f,m,n,a){if("string"==typeof f){if("string"==typeof m?(a=m,m=0,n=this.length):"string"==typeof n&&(a=n,n=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");
if("string"==typeof a&&!de.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===f.length){var d=f.charCodeAt(0);("utf8"===a&&128>d||"latin1"===a)&&(f=d)}}else"number"==typeof f?f&=255:"boolean"==typeof f&&(f=Number(f));if(0>m||this.length<m||this.length<n)throw new RangeError("Out of range index");if(n<=m)return this;if(m>>>=0,n=void 0===n?this.length:n>>>0,f||(f=0),"number"==typeof f)for(a=m;a<n;++a)this[a]=f;else{d=de.isBuffer(f)?f:de.from(f,a);var k=d.length;if(0===k)throw new TypeError('The value "'+
f+'" is invalid for argument "value"');for(a=0;a<n-m;++a)this[a+m]=d[a%k]}return this};var g$=/[^+/0-9A-Za-z-_]/g,f$=function(){for(var f=Array(256),m=0;16>m;++m)for(var n=16*m,a=0;16>a;++a)f[n+a]="0123456789abcdef"[m]+"0123456789abcdef"[a];return f}(),iI={},jI=Ng,$o=jI.Buffer;$o.from&&$o.alloc&&$o.allocUnsafe&&$o.allocUnsafeSlow?iI=jI:(HW(jI,iI),iI.Buffer=Ot);Ot.prototype=Object.create($o.prototype);HW($o,Ot);Ot.from=function(f,m,n){if("number"==typeof f)throw new TypeError("Argument must not be a number");
return $o(f,m,n)};Ot.alloc=function(f,m,n){if("number"!=typeof f)throw new TypeError("Argument must be a number");f=$o(f);return void 0!==m?"string"==typeof n?f.fill(m,n):f.fill(m):f.fill(0),f};Ot.allocUnsafe=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return $o(f)};Ot.allocUnsafeSlow=function(f){if("number"!=typeof f)throw new TypeError("Argument must be a number");return jI.SlowBuffer(f)};var Mh=iI,Fw={},YL=Mh.Buffer,IW=YL.isEncoding||function(f){switch((f=
""+f)&&f.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};Fw.StringDecoder=xz;xz.prototype.write=function(f){if(0===f.length)return"";var m;if(this.lastNeed){if(void 0===(m=this.fillLast(f)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<f.length?m?m+this.text(f,n):this.text(f,n):m||""};xz.prototype.end=function(f){f=f&&f.length?this.write(f):"";
return this.lastNeed?f+"\ufffd":f};xz.prototype.text=function(f,m){var n=f.length-1;if(n<m)n=0;else{var a=ZL(f[n]);n=0<=a?(0<a&&(this.lastNeed=a-1),a):--n<m||-2===a?0:0<=(a=ZL(f[n]))?(0<a&&(this.lastNeed=a-2),a):--n<m||-2===a?0:0<=(a=ZL(f[n]))?(0<a&&(2===a?a=0:this.lastNeed=a-3),a):0}if(!this.lastNeed)return f.toString("utf8",m);this.lastTotal=n;a=f.length-(n-this.lastNeed);return f.copy(this.lastChar,0,a),f.toString("utf8",m,a)};xz.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length);this.lastNeed-=f.length};var xE=ap.EventEmitter,bo={},JW={};cn("ERR_INVALID_OPT_VALUE",function(f,m){return'The value "'+m+'" is invalid for option "'+f+'"'},TypeError);cn("ERR_INVALID_ARG_TYPE",function(f,m,n){var a;f=("string"==typeof m&&"not "===m.substr(0,4)?(a="must not be",m=m.replace(/^not /,"")):a="must be",function(d,k,b){return(void 0===
b||b>d.length)&&(b=d.length),d.substring(b-k.length,b)===k}(f," argument"))?"The "+f+" "+a+" "+KW(m,"type"):'The "'+f+'" '+(function(d,k,b){return"number"!=typeof b&&(b=0),!(b+k.length>d.length)&&-1!==d.indexOf(k,b)}(f,".")?"property":"argument")+" "+a+" "+KW(m,"type");return f+=". Received type "+typeof n,f},TypeError);cn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");cn("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"});cn("ERR_STREAM_PREMATURE_CLOSE",
"Premature close");cn("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"});cn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");cn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");cn("ERR_STREAM_WRITE_AFTER_END","write after end");cn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);cn("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError);cn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");
bo.codes=JW;var SW=function(){throw Error("Readable.from is not available in the browser");},aM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,UW=function(f,m){if($L("noDeprecation"))return f;var n=!1;return function(){if(!n){if($L("throwDeprecation"))throw Error(m);$L("traceDeprecation")?console.trace(m):console.warn(m);n=!0}return f.apply(this||aM,arguments)}},kI=Ng.Buffer,pQ=Eg.inspect,Oia=pQ&&pQ.custom||"inspect",t$=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");
!0;this.tail=this.head=null;this.length=0}var m;return m=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=
this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var a=this.head,d=""+a.data;a=a.next;)d+=n+a.data;return d}},{key:"concat",value:function(n){if(0===this.length)return kI.alloc(0);for(var a,d,k=kI.allocUnsafe(n>>>0),b=this.head,e=0;b;)n=b.data,a=k,d=e,void kI.prototype.copy.call(n,a,d),e+=b.data.length,b=b.next;return k}},{key:"consume",value:function(n,a){var d;return n<this.head.data.length?(d=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):
d=n===this.head.data.length?this.shift():a?this._getString(n):this._getBuffer(n),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var a=this.head,d=1,k=a.data;for(n-=k.length;a=a.next;){var b=a.data,e=n>b.length?b.length:n;if(e===b.length?k+=b:k+=b.slice(0,n),0==(n-=e)){e===b.length?(++d,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=b.slice(e));break}++d}return this.length-=d,k}},{key:"_getBuffer",value:function(n){var a=kI.allocUnsafe(n),
d=this.head,k=1;d.data.copy(a);for(n-=d.data.length;d=d.next;){var b=d.data,e=n>b.length?b.length:n;if(b.copy(a,a.length-n,0,e),0==(n-=e)){e===b.length?(++k,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=b.slice(e));break}++k}return this.length-=k,a}},{key:Oia,value:function(n,a){return pQ(this,function(d){for(var k=1;k<arguments.length;k++){var b=null!=arguments[k]?arguments[k]:{};k%2?LW(Object(b),!0).forEach(function(e){var l=b[e];e in d?Object.defineProperty(d,e,{value:l,
enumerable:!0,configurable:!0,writable:!0}):d[e]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(b)):LW(Object(b)).forEach(function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(b,e))})}return d}({},a,{depth:0,customInspect:!1}))}}],o$(f.prototype,m),f}(),Iu=yh,QW={destroy:function(f,m){var n=this,a=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||a?(m?m(f):f&&(this._writableState?
this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Iu.nextTick(bM,this,f)):Iu.nextTick(bM,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(d){!m&&d?n._writableState?n._writableState.errorEmitted?Iu.nextTick(wE,n):(n._writableState.errorEmitted=!0,Iu.nextTick(MW,n,d)):Iu.nextTick(MW,n,d):m?(Iu.nextTick(wE,n),m(d)):Iu.nextTick(wE,n)}),this)},undestroy:function(){this._readableState&&
(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,m){var n=f._readableState,a=f._writableState;n&&n.autoDestroy||a&&a.autoDestroy?f.destroy(m):
f.emit("error",m)}},Pia=bo.codes.ERR_INVALID_OPT_VALUE,RW={getHighWaterMark:function(f,m,n,a){m=null!=m.highWaterMark?m.highWaterMark:a?m[n]:null;if(null!=m){if(!isFinite(m)||Math.floor(m)!==m||0>m)throw new Pia(a?n:"highWaterMark",m);return Math.floor(m)}return f.objectMode?16:16384}},B3=bo.codes.ERR_STREAM_PREMATURE_CLOSE,qQ,NW=yh,Qia=function d(m,n,a){if("function"==typeof n)return d(m,null,n);n||(n={});a=function(C){var D=!1;return function(){if(!D){D=!0;for(var L=arguments.length,I=Array(L),
S=0;S<L;S++)I[S]=arguments[S];C.apply(this,I)}}}(a||p$);var k=n.readable||!1!==n.readable&&m.readable,b=n.writable||!1!==n.writable&&m.writable,e=function(){m.writable||p()},l=m._writableState&&m._writableState.finished,p=function(){b=!1;l=!0;k||a.call(m)},q=m._readableState&&m._readableState.endEmitted,u=function(){k=!1;q=!0;b||a.call(m)},w=function(C){a.call(m,C)},y=function(){var C;return k&&!q?(m._readableState&&m._readableState.ended||(C=new B3),a.call(m,C)):b&&!l?(m._writableState&&m._writableState.ended||
(C=new B3),a.call(m,C)):void 0},A=function(){m.req.on("finish",p)};return m.setHeader&&"function"==typeof m.abort?(m.on("complete",p),m.on("abort",y),m.req?A():m.on("request",A)):b&&!m._writableState&&(m.on("end",e),m.on("close",e)),m.on("end",u),m.on("finish",p),!1!==n.error&&m.on("error",w),m.on("close",y),function(){m.removeListener("complete",p);m.removeListener("abort",y);m.removeListener("request",A);m.req&&m.req.removeListener("finish",p);m.removeListener("end",e);m.removeListener("close",
e);m.removeListener("finish",p);m.removeListener("end",u);m.removeListener("error",w);m.removeListener("close",y)}},Br=Symbol("lastResolve"),Rt=Symbol("lastReject"),nB=Symbol("error"),lI=Symbol("ended"),Qt=Symbol("lastPromise"),rQ=Symbol("handlePromise"),Pt=Symbol("stream"),Ria=Object.getPrototypeOf(function(){}),Sia=Object.setPrototypeOf((zr(qQ={get stream(){return this[Pt]},next:function(){var m=this,n=this[nB];if(null!==n)return Promise.reject(n);if(this[lI])return Promise.resolve(Ar(void 0,!0));
if(this[Pt].destroyed)return new Promise(function(a,d){NW.nextTick(function(){m[nB]?d(m[nB]):a(Ar(void 0,!0))})});if(n=this[Qt])n=new Promise(function(a,d){return function(k,b){a.then(function(){if(d[lI])return k(Ar(void 0,!0)),void 0;d[rQ](k,b)},b)}}(n,this));else{n=this[Pt].read();if(null!==n)return Promise.resolve(Ar(n,!1));n=new Promise(this[rQ])}return this[Qt]=n,n}},Symbol.asyncIterator,function(){return this}),zr(qQ,"return",function(){var m=this;return new Promise(function(n,a){m[Pt].destroy(null,
function(d){if(d)return a(d),void 0;n(Ar(void 0,!0))})})}),qQ),Ria),u$=function(m){var n,a=Object.create(Sia,(zr(n={},Pt,{value:m,writable:!0}),zr(n,Br,{value:null,writable:!0}),zr(n,Rt,{value:null,writable:!0}),zr(n,nB,{value:null,writable:!0}),zr(n,lI,{value:m._readableState.endEmitted,writable:!0}),zr(n,rQ,{value:function(d,k){var b=a[Pt].read();b?(a[Qt]=null,a[Br]=null,a[Rt]=null,d(Ar(b,!1))):(a[Br]=d,a[Rt]=k)},writable:!0}),n));return a[Qt]=null,Qia(m,function(d){if(d&&"ERR_STREAM_PREMATURE_CLOSE"!==
d.code){var k=a[Rt];return null!==k&&(a[Qt]=null,a[Br]=null,a[Rt]=null,k(d)),a[nB]=d,void 0}d=a[Br];null!==d&&(a[Qt]=null,a[Br]=null,a[Rt]=null,d(Ar(void 0,!0)));a[lI]=!0}),m.on("readable",r$.bind(null,a)),a},cM={},PW=!1,s$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dM={},TW=!1,w$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,eM={},VW=!1,Tia=OW(),C3=bo.codes.ERR_STREAM_PREMATURE_CLOSE,kM=function k(n,a,d){if("function"==typeof a)return k(n,
null,a);a||(a={});d=function(D){var L=!1;return function(){if(!L){L=!0;for(var I=arguments.length,S=Array(I),V=0;V<I;V++)S[V]=arguments[V];D.apply(this,S)}}}(d||x$);var b=a.readable||!1!==a.readable&&n.readable,e=a.writable||!1!==a.writable&&n.writable,l=function(){n.writable||q()},p=n._writableState&&n._writableState.finished,q=function(){e=!1;p=!0;b||d.call(n)},u=n._readableState&&n._readableState.endEmitted,w=function(){b=!1;u=!0;e||d.call(n)},y=function(D){d.call(n,D)},A=function(){var D;return b&&
!u?(n._readableState&&n._readableState.ended||(D=new C3),d.call(n,D)):e&&!p?(n._writableState&&n._writableState.ended||(D=new C3),d.call(n,D)):void 0},C=function(){n.req.on("finish",q)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",q),n.on("abort",A),n.req?C():n.on("request",C)):e&&!n._writableState&&(n.on("end",l),n.on("close",l)),n.on("end",w),n.on("finish",q),!1!==a.error&&n.on("error",y),n.on("close",A),function(){n.removeListener("complete",q);n.removeListener("abort",A);n.removeListener("request",
C);n.req&&n.req.removeListener("finish",q);n.removeListener("end",l);n.removeListener("close",l);n.removeListener("finish",q);n.removeListener("end",w);n.removeListener("error",y);n.removeListener("close",A)}},mI=Ng.Buffer,sQ=Eg.inspect,Uia=sQ&&sQ.custom||"inspect",D$=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var a;return a=[{key:"push",value:function(d){d={data:d,next:null};0<this.length?this.tail.next=
d:this.head=d;this.tail=d;++this.length}},{key:"unshift",value:function(d){d={data:d,next:this.head};0===this.length&&(this.tail=d);this.head=d;++this.length}},{key:"shift",value:function(){if(0!==this.length){var d=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(d){if(0===this.length)return"";for(var k=this.head,b=""+k.data;k=k.next;)b+=d+k.data;
return b}},{key:"concat",value:function(d){if(0===this.length)return mI.alloc(0);for(var k,b,e=mI.allocUnsafe(d>>>0),l=this.head,p=0;l;)d=l.data,k=e,b=p,void mI.prototype.copy.call(d,k,b),p+=l.data.length,l=l.next;return e}},{key:"consume",value:function(d,k){var b;return d<this.head.data.length?(b=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):b=d===this.head.data.length?this.shift():k?this._getString(d):this._getBuffer(d),b}},{key:"first",value:function(){return this.head.data}},
{key:"_getString",value:function(d){var k=this.head,b=1,e=k.data;for(d-=e.length;k=k.next;){var l=k.data,p=d>l.length?l.length:d;if(p===l.length?e+=l:e+=l.slice(0,d),0==(d-=p)){p===l.length?(++b,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=l.slice(p));break}++b}return this.length-=b,e}},{key:"_getBuffer",value:function(d){var k=mI.allocUnsafe(d),b=this.head,e=1;b.data.copy(k);for(d-=b.data.length;b=b.next;){var l=b.data,p=d>l.length?l.length:d;if(l.copy(k,k.length-d,0,p),
0==(d-=p)){p===l.length?(++e,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=l.slice(p));break}++e}return this.length-=e,k}},{key:Uia,value:function(d,k){return sQ(this,function(b){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?WW(Object(l),!0).forEach(function(p){var q=l[p];p in b?Object.defineProperty(b,p,{value:q,enumerable:!0,configurable:!0,writable:!0}):b[p]=q}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(l)):
WW(Object(l)).forEach(function(p){Object.defineProperty(b,p,Object.getOwnPropertyDescriptor(l,p))})}return b}({},k,{depth:0,customInspect:!1}))}}],y$(n.prototype,a),n}(),Ju=yh,$W={destroy:function(n,a){var d=this,k=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||k?(a?a(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ju.nextTick(fM,this,n)):Ju.nextTick(fM,this,n)),this):(this._readableState&&
(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(b){!a&&b?d._writableState?d._writableState.errorEmitted?Ju.nextTick(yE,d):(d._writableState.errorEmitted=!0,Ju.nextTick(XW,d,b)):Ju.nextTick(XW,d,b):a?(Ju.nextTick(yE,d),a(b)):Ju.nextTick(yE,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,a){var d=n._readableState,k=n._writableState;d&&d.autoDestroy||k&&k.autoDestroy?n.destroy(a):n.emit("error",a)}},Via=bo.codes.ERR_INVALID_OPT_VALUE,tQ,aX={getHighWaterMark:function(n,a,d,k){a=null!=a.highWaterMark?a.highWaterMark:k?a[d]:null;
if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||0>a)throw new Via(k?d:"highWaterMark",a);return Math.floor(a)}return n.objectMode?16:16384}},YW=yh,Wia=kM,Er=Symbol("lastResolve"),Ut=Symbol("lastReject"),oB=Symbol("error"),nI=Symbol("ended"),Tt=Symbol("lastPromise"),uQ=Symbol("handlePromise"),St=Symbol("stream"),Xia=Object.getPrototypeOf(function(){}),Yia=Object.setPrototypeOf((Cr(tQ={get stream(){return this[St]},next:function(){var n=this,a=this[oB];if(null!==a)return Promise.reject(a);if(this[nI])return Promise.resolve(Dr(void 0,
!0));if(this[St].destroyed)return new Promise(function(d,k){YW.nextTick(function(){n[oB]?k(n[oB]):d(Dr(void 0,!0))})});if(a=this[Tt])a=new Promise(function(d,k){return function(b,e){d.then(function(){if(k[nI])return b(Dr(void 0,!0)),void 0;k[uQ](b,e)},e)}}(a,this));else{a=this[St].read();if(null!==a)return Promise.resolve(Dr(a,!1));a=new Promise(this[uQ])}return this[Tt]=a,a}},Symbol.asyncIterator,function(){return this}),Cr(tQ,"return",function(){var n=this;return new Promise(function(a,d){n[St].destroy(null,
function(k){if(k)return d(k),void 0;a(Dr(void 0,!0))})})}),tQ),Xia),E$=function(n){var a,d=Object.create(Yia,(Cr(a={},St,{value:n,writable:!0}),Cr(a,Er,{value:null,writable:!0}),Cr(a,Ut,{value:null,writable:!0}),Cr(a,oB,{value:null,writable:!0}),Cr(a,nI,{value:n._readableState.endEmitted,writable:!0}),Cr(a,uQ,{value:function(k,b){var e=d[St].read();e?(d[Tt]=null,d[Er]=null,d[Ut]=null,k(Dr(e,!1))):(d[Er]=k,d[Ut]=b)},writable:!0}),a));return d[Tt]=null,Wia(n,function(k){if(k&&"ERR_STREAM_PREMATURE_CLOSE"!==
k.code){var b=d[Ut];return null!==b&&(d[Tt]=null,d[Er]=null,d[Ut]=null,b(k)),d[oB]=k,void 0}k=d[Er];null!==k&&(d[Tt]=null,d[Er]=null,d[Ut]=null,k(Dr(void 0,!0)));d[nI]=!0}),n.on("readable",A$.bind(null,d)),d},gM={},ZW=!1,C$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,hM={},cX=!1,F$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,iM={},dX=!1,Zia=bX(),D3=yz(),oI=bo.codes,$ia=oI.ERR_METHOD_NOT_IMPLEMENTED,H$=oI.ERR_MULTIPLE_CALLBACK,K$=
oI.ERR_TRANSFORM_ALREADY_TRANSFORMING,J$=oI.ERR_TRANSFORM_WITH_LENGTH_0,AE=D3;Wg(bp,AE);bp.prototype.push=function(n,a){return this._transformState.needTransform=!1,AE.prototype.push.call(this,n,a)};bp.prototype._transform=function(n,a,d){d(new $ia("_transform()"))};bp.prototype._write=function(n,a,d){var k=this._transformState;(k.writecb=d,k.writechunk=n,k.writeencoding=a,k.transforming)||(n=this._readableState,(k.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};
bp.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};bp.prototype._destroy=function(n,a){AE.prototype._destroy.call(this,n,function(d){a(d)})};var fX=bp;Wg(zz,fX);zz.prototype._transform=function(n,a,d){d(null,n)};var jM,E3=bo.codes,aja=E3.ERR_MISSING_ARGS,M$=E3.ERR_STREAM_DESTROYED,mM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,
lM=ap.EventEmitter;Wg(dn,lM);dn.Readable=Tia;dn.Writable=Zia;dn.Duplex=D3;dn.Transform=bp;dn.PassThrough=zz;dn.finished=kM;dn.pipeline=function(){for(var n=arguments.length,a=Array(n),d=0;d<n;d++)a[d]=arguments[d];var k,b=a.length?"function"!=typeof a[a.length-1]?gX:a.pop():gX;if(Array.isArray(a[0])&&(a=a[0]),2>a.length)throw new aja("streams");var e=a.map(function(l,p){var q=p<a.length-1;return L$(l,q,0<p,function(u){k||(k=u);u&&e.forEach(hX);q||(e.forEach(hX),b(k))})});return a.reduce(N$)};dn.Stream=
dn;dn.prototype.pipe=function(n,a){function d(w){n.writable&&!1===n.write(w)&&q.pause&&q.pause()}function k(){q.readable&&q.resume&&q.resume()}function b(){u||(u=!0,n.end())}function e(){u||(u=!0,"function"==typeof n.destroy&&n.destroy())}function l(w){if(p(),0===lM.listenerCount(this||mM,"error"))throw w;}function p(){q.removeListener("data",d);n.removeListener("drain",k);q.removeListener("end",b);q.removeListener("close",e);q.removeListener("error",l);n.removeListener("error",l);q.removeListener("end",
p);q.removeListener("close",p);n.removeListener("close",p)}var q=this||mM;q.on("data",d);n.on("drain",k);n._isStdio||a&&!1===a.end||(q.on("end",b),q.on("close",e));var u=!1;return q.on("error",l),n.on("error",l),q.on("end",p),q.on("close",p),n.on("close",p),n.emit("pipe",q),n};var gu=dn,pI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,$t={},Kx=function(n){if(Object.keys)return Object.keys(n);var a=[],d;for(d in n)a.push(d);return a},Ku=function(n,a){if(n.forEach)return n.forEach(a);
for(var d=0;d<n.length;d++)a(n[d],d,n)},bja=function(){try{return Object.defineProperty({},"_",{}),function(n,a,d){Object.defineProperty(n,a,{writable:!0,enumerable:!1,configurable:!0,value:d})}}catch(n){return function(a,d,k){a[d]=k}}}(),F3="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
BE.prototype={};var Ep=$t.Script=function(n){if(!((this||pI)instanceof Ep))return new Ep(n);(this||pI).code=n};Ep.prototype.runInContext=function(n){if(!(n instanceof BE))throw new TypeError("needs a 'context' argument.");var a=document.createElement("iframe");a.style||(a.style={});a.style.display="none";document.body.appendChild(a);var d=a.contentWindow,k=d.eval,b=d.execScript;!k&&b&&(b.call(d,"null"),k=d.eval);Ku(Kx(n),function(l){d[l]=n[l]});Ku(F3,function(l){n[l]&&(d[l]=n[l])});var e=Kx(d);k=
k.call(d,(this||pI).code);return Ku(Kx(d),function(l){var p;if(!(p=l in n)){a:if(e.indexOf)p=e.indexOf(l);else{for(p=0;p<e.length;p++)if(e[p]===l)break a;p=-1}p=-1===p}p&&(n[l]=d[l])}),Ku(F3,function(l){l in n||bja(n,l,d[l])}),document.body.removeChild(a),k};Ep.prototype.runInThisContext=function(){return eval((this||pI).code)};Ep.prototype.runInNewContext=function(n){var a=Ep.createContext(n),d=this.runInContext(a);return n&&Ku(Kx(a),function(k){n[k]=a[k]}),d};Ku(Kx(Ep.prototype),function(n){$t[n]=
Ep[n]=function(a){var d=Ep(a);return d[n].apply(d,[].slice.call(arguments,1))}});$t.isContext=function(n){return n instanceof BE};$t.createScript=function(n){return $t.Script(n)};$t.createContext=Ep.createContext=function(n){var a=new BE;return"object"==typeof n&&Ku(Kx(n),function(d){a[d]=n[d]}),a};var G3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,cja=yh,dja=Mh.Buffer,qI=G3.crypto||G3.msCrypto,rs=qI&&qI.getRandomValues?function(n,a){if(4294967295<n)throw new RangeError("requested too many random bytes");
var d=dja.allocUnsafe(n);if(0<n)if(65536<n)for(var k=0;k<n;k+=65536)qI.getRandomValues(d.slice(k,k+65536));else qI.getRandomValues(d);return"function"==typeof a?cja.nextTick(function(){a(null,d)}):d}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},CE=Mh.Buffer,iX=gu.Transform;Wg(kq,iX);kq.prototype._transform=function(n,a,d){var k=null;try{this.update(n,a)}catch(b){k=b}d(k)};kq.prototype._flush=function(n){var a=
null;try{this.push(this.digest())}catch(d){a=d}n(a)};kq.prototype.update=function(n,a){var d=n;if(!CE.isBuffer(d)&&"string"!=typeof d)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");CE.isBuffer(n)||(n=CE.from(n,a));a=this._block;for(d=0;this._blockOffset+n.length-d>=this._blockSize;){for(var k=this._blockOffset;k<this._blockSize;)a[k++]=n[d++];this._update();this._blockOffset=0}for(;d<n.length;)a[this._blockOffset++]=n[d++];a=0;for(n=
8*n.length;0<n;++a)this._length[a]+=n,0<(n=this._length[a]/4294967296|0)&&(this._length[a]-=4294967296*n);return this};kq.prototype._update=function(){throw Error("_update is not implemented");};kq.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var a=this._digest();void 0!==n&&(a=a.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return a};kq.prototype._digest=function(){throw Error("_digest is not implemented");
};var jX=kq,eja=Mh.Buffer,jf=Array(16);Wg(Gw,jX);Gw.prototype._update=function(){for(var n=0;16>n;++n)jf[n]=this._block.readInt32LE(4*n);n=this._a;var a=this._b,d=this._c,k=this._d;n=nl(n,a,d,k,jf[0],3614090360,7);k=nl(k,n,a,d,jf[1],3905402710,12);d=nl(d,k,n,a,jf[2],606105819,17);a=nl(a,d,k,n,jf[3],3250441966,22);n=nl(n,a,d,k,jf[4],4118548399,7);k=nl(k,n,a,d,jf[5],1200080426,12);d=nl(d,k,n,a,jf[6],2821735955,17);a=nl(a,d,k,n,jf[7],4249261313,22);n=nl(n,a,d,k,jf[8],1770035416,7);k=nl(k,n,a,d,jf[9],
2336552879,12);d=nl(d,k,n,a,jf[10],4294925233,17);a=nl(a,d,k,n,jf[11],2304563134,22);n=nl(n,a,d,k,jf[12],1804603682,7);k=nl(k,n,a,d,jf[13],4254626195,12);d=nl(d,k,n,a,jf[14],2792965006,17);n=ol(n,a=nl(a,d,k,n,jf[15],1236535329,22),d,k,jf[1],4129170786,5);k=ol(k,n,a,d,jf[6],3225465664,9);d=ol(d,k,n,a,jf[11],643717713,14);a=ol(a,d,k,n,jf[0],3921069994,20);n=ol(n,a,d,k,jf[5],3593408605,5);k=ol(k,n,a,d,jf[10],38016083,9);d=ol(d,k,n,a,jf[15],3634488961,14);a=ol(a,d,k,n,jf[4],3889429448,20);n=ol(n,a,d,
k,jf[9],568446438,5);k=ol(k,n,a,d,jf[14],3275163606,9);d=ol(d,k,n,a,jf[3],4107603335,14);a=ol(a,d,k,n,jf[8],1163531501,20);n=ol(n,a,d,k,jf[13],2850285829,5);k=ol(k,n,a,d,jf[2],4243563512,9);d=ol(d,k,n,a,jf[7],1735328473,14);n=pl(n,a=ol(a,d,k,n,jf[12],2368359562,20),d,k,jf[5],4294588738,4);k=pl(k,n,a,d,jf[8],2272392833,11);d=pl(d,k,n,a,jf[11],1839030562,16);a=pl(a,d,k,n,jf[14],4259657740,23);n=pl(n,a,d,k,jf[1],2763975236,4);k=pl(k,n,a,d,jf[4],1272893353,11);d=pl(d,k,n,a,jf[7],4139469664,16);a=pl(a,
d,k,n,jf[10],3200236656,23);n=pl(n,a,d,k,jf[13],681279174,4);k=pl(k,n,a,d,jf[0],3936430074,11);d=pl(d,k,n,a,jf[3],3572445317,16);a=pl(a,d,k,n,jf[6],76029189,23);n=pl(n,a,d,k,jf[9],3654602809,4);k=pl(k,n,a,d,jf[12],3873151461,11);d=pl(d,k,n,a,jf[15],530742520,16);n=ql(n,a=pl(a,d,k,n,jf[2],3299628645,23),d,k,jf[0],4096336452,6);k=ql(k,n,a,d,jf[7],1126891415,10);d=ql(d,k,n,a,jf[14],2878612391,15);a=ql(a,d,k,n,jf[5],4237533241,21);n=ql(n,a,d,k,jf[12],1700485571,6);k=ql(k,n,a,d,jf[3],2399980690,10);d=
ql(d,k,n,a,jf[10],4293915773,15);a=ql(a,d,k,n,jf[1],2240044497,21);n=ql(n,a,d,k,jf[8],1873313359,6);k=ql(k,n,a,d,jf[15],4264355552,10);d=ql(d,k,n,a,jf[6],2734768916,15);a=ql(a,d,k,n,jf[13],1309151649,21);n=ql(n,a,d,k,jf[4],4149444226,6);k=ql(k,n,a,d,jf[11],3174756917,10);d=ql(d,k,n,a,jf[2],718787259,15);a=ql(a,d,k,n,jf[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+a|0;this._c=this._c+d|0;this._d=this._d+k|0};Gw.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=eja.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var vQ=Ng.Buffer,kX=kq,Bo=Array(16),pB=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],qB=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],rB=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sB=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],tB=[0,1518500249,1859775393,2400959708,2840853838],uB=[1352829926,1548603684,1836072691,2053994217,0];Wg(Hw,kX);Hw.prototype._update=function(){for(var n=0;16>n;++n)Bo[n]=this._block.readInt32LE(4*n);var a=0|this._a;n=0|this._b;for(var d=0|this._c,k=0|this._d,b=0|this._e,e=0|this._a,l=0|this._b,p=0|this._c,
q=0|this._d,u=0|this._e,w=0;80>w;w+=1){if(16>w){var y=b;y=en(a+(n^d^k)+Bo[pB[w]]+tB[0]|0,rB[w])+y|0;a=u;var A=en(e+(l^(p|~q))+Bo[qB[w]]+uB[0]|0,sB[w])+a|0}else 32>w?(y=b,y=en(a+(n&d|~n&k)+Bo[pB[w]]+tB[1]|0,rB[w])+y|0,a=u,A=en(e+(l&q|p&~q)+Bo[qB[w]]+uB[1]|0,sB[w])+a|0):48>w?(y=b,y=en(a+((n|~d)^k)+Bo[pB[w]]+tB[2]|0,rB[w])+y|0,a=u,A=en(e+((l|~p)^q)+Bo[qB[w]]+uB[2]|0,sB[w])+a|0):64>w?(y=b,y=en(a+(n&k|d&~k)+Bo[pB[w]]+tB[3]|0,rB[w])+y|0,a=u,A=en(e+(l&p|~l&q)+Bo[qB[w]]+uB[3]|0,sB[w])+a|0):(y=b,y=en(a+(n^
(d|~k))+Bo[pB[w]]+tB[4]|0,rB[w])+y|0,a=u,A=en(e+(l^p^q)+Bo[qB[w]]+uB[4]|0,sB[w])+a|0);a=b;b=k;k=en(d,10);d=n;n=y;e=u;u=q;q=en(p,10);p=l;l=A}d=this._b+d+q|0;this._b=this._c+k+u|0;this._c=this._d+b+e|0;this._d=this._e+a+l|0;this._e=this._a+n+p|0;this._a=d};Hw.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=vQ.alloc?vQ.alloc(20):new vQ(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var aj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,lX=Mh.Buffer;lq.prototype.update=function(n,a){"string"==typeof n&&(a=a||"utf8",n=lX.from(n,a));a=(this||aj)._block;for(var d=(this||aj)._blockSize,k=n.length,b=(this||aj)._len,
e=0;e<k;){for(var l=b%d,p=Math.min(k-e,d-l),q=0;q<p;q++)a[l+q]=n[e+q];e+=p;0==(b+=p)%d&&this._update(a)}return(this||aj)._len+=k,this||aj};lq.prototype.digest=function(n){var a=(this||aj)._len%(this||aj)._blockSize;(this||aj)._block[a]=128;(this||aj)._block.fill(0,a+1);a>=(this||aj)._finalSize&&(this._update((this||aj)._block),(this||aj)._block.fill(0));a=8*(this||aj)._len;if(4294967295>=a)(this||aj)._block.writeUInt32BE(a,(this||aj)._blockSize-4);else{var d=(4294967295&a)>>>0;(this||aj)._block.writeUInt32BE((a-
d)/4294967296,(this||aj)._blockSize-8);(this||aj)._block.writeUInt32BE(d,(this||aj)._blockSize-4)}this._update((this||aj)._block);a=this._hash();return n?a.toString(n):a};lq.prototype._update=function(){throw Error("_update must be implemented by subclass");};var Og="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,mX=lq,fja=Mh.Buffer,gja=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],O$=Array(64);Wg(Iw,mX);Iw.prototype.init=function(){return(this||Og)._a=1779033703,(this||Og)._b=3144134277,(this||Og)._c=1013904242,(this||Og)._d=2773480762,(this||Og)._e=1359893119,(this||Og)._f=2600822924,(this||Og)._g=528734635,(this||Og)._h=1541459225,this||Og};Iw.prototype._update=function(n){for(var a,d=(this||Og)._w,k=0|(this||Og)._a,b=0|(this||Og)._b,e=0|(this||Og)._c,l=0|(this||Og)._d,p=0|(this||Og)._e,q=0|(this||Og)._f,u=0|(this||Og)._g,w=0|
(this||Og)._h,y=0;16>y;++y)d[y]=n.readInt32BE(4*y);for(;64>y;++y){n=y;var A=(((a=d[y-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10)+d[y-7],C=d[y-15];d[n]=0|A+((C>>>7|C<<25)^(C>>>18|C<<14)^C>>>3)+d[y-16]}for(a=0;64>a;++a)y=w+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(u^p&(q^u))+gja[a]+d[a]|0,n=((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+(k&b|e&(k|b))|0,w=u,u=q,q=p,p=l+y|0,l=e,e=b,b=k,k=y+n|0;(this||Og)._a=k+(this||Og)._a|0;(this||Og)._b=b+(this||Og)._b|0;(this||Og)._c=e+(this||Og)._c|0;(this||Og)._d=
l+(this||Og)._d|0;(this||Og)._e=p+(this||Og)._e|0;(this||Og)._f=q+(this||Og)._f|0;(this||Og)._g=u+(this||Og)._g|0;(this||Og)._h=w+(this||Og)._h|0};Iw.prototype._hash=function(){var n=fja.allocUnsafe(32);return n.writeInt32BE((this||Og)._a,0),n.writeInt32BE((this||Og)._b,4),n.writeInt32BE((this||Og)._c,8),n.writeInt32BE((this||Og)._d,12),n.writeInt32BE((this||Og)._e,16),n.writeInt32BE((this||Og)._f,20),n.writeInt32BE((this||Og)._g,24),n.writeInt32BE((this||Og)._h,28),n};var Bi="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,nX=lq,hja=Mh.Buffer,ija=[1518500249,1859775393,-1894007588,-899497514],P$=Array(80);Wg(Az,nX);Az.prototype.init=function(){return(this||Bi)._a=1732584193,(this||Bi)._b=4023233417,(this||Bi)._c=2562383102,(this||Bi)._d=271733878,(this||Bi)._e=3285377520,this||Bi};Az.prototype._update=function(n){for(var a,d=(this||Bi)._w,k=0|(this||Bi)._a,b=0|(this||Bi)._b,e=0|(this||Bi)._c,l=0|(this||Bi)._d,p=0|(this||Bi)._e,q=0;16>q;++q)d[q]=n.readInt32BE(4*q);for(;80>
q;++q)d[q]=d[q-3]^d[q-8]^d[q-14]^d[q-16];for(n=0;80>n;++n)q=~~(n/20),q=0|((a=k)<<5|a>>>27)+(0===q?b&e|~b&l:2===q?b&e|b&l|e&l:b^e^l)+p+d[n]+ija[q],p=l,l=e,e=b<<30|b>>>2,b=k,k=q;(this||Bi)._a=k+(this||Bi)._a|0;(this||Bi)._b=b+(this||Bi)._b|0;(this||Bi)._c=e+(this||Bi)._c|0;(this||Bi)._d=l+(this||Bi)._d|0;(this||Bi)._e=p+(this||Bi)._e|0};Az.prototype._hash=function(){var n=hja.allocUnsafe(20);return n.writeInt32BE(0|(this||Bi)._a,0),n.writeInt32BE(0|(this||Bi)._b,4),n.writeInt32BE(0|(this||Bi)._c,8),
n.writeInt32BE(0|(this||Bi)._d,12),n.writeInt32BE(0|(this||Bi)._e,16),n};var Ci="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,oX=lq,jja=Mh.Buffer,kja=[1518500249,1859775393,-1894007588,-899497514],Q$=Array(80);Wg(Bz,oX);Bz.prototype.init=function(){return(this||Ci)._a=1732584193,(this||Ci)._b=4023233417,(this||Ci)._c=2562383102,(this||Ci)._d=271733878,(this||Ci)._e=3285377520,this||Ci};Bz.prototype._update=function(n){for(var a,d=(this||Ci)._w,k=0|(this||Ci)._a,b=
0|(this||Ci)._b,e=0|(this||Ci)._c,l=0|(this||Ci)._d,p=0|(this||Ci)._e,q=0;16>q;++q)d[q]=n.readInt32BE(4*q);for(;80>q;++q)d[q]=(a=d[q-3]^d[q-8]^d[q-14]^d[q-16])<<1|a>>>31;for(n=0;80>n;++n)a=~~(n/20),a=(k<<5|k>>>27)+(0===a?b&e|~b&l:2===a?b&e|b&l|e&l:b^e^l)+p+d[n]+kja[a]|0,p=l,l=e,e=b<<30|b>>>2,b=k,k=a;(this||Ci)._a=k+(this||Ci)._a|0;(this||Ci)._b=b+(this||Ci)._b|0;(this||Ci)._c=e+(this||Ci)._c|0;(this||Ci)._d=l+(this||Ci)._d|0;(this||Ci)._e=p+(this||Ci)._e|0};Bz.prototype._hash=function(){var n=jja.allocUnsafe(20);
return n.writeInt32BE(0|(this||Ci)._a,0),n.writeInt32BE(0|(this||Ci)._b,4),n.writeInt32BE(0|(this||Ci)._c,8),n.writeInt32BE(0|(this||Ci)._d,12),n.writeInt32BE(0|(this||Ci)._e,16),n};var Dk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,S$=lq,lja=Mh.Buffer,R$=Array(64);Wg(EE,Iw);EE.prototype.init=function(){return(this||Dk)._a=3238371032,(this||Dk)._b=914150663,(this||Dk)._c=812702999,(this||Dk)._d=4144912697,(this||Dk)._e=4290775857,(this||Dk)._f=1750603025,(this||
Dk)._g=1694076839,(this||Dk)._h=3204075428,this||Dk};EE.prototype._hash=function(){var n=lja.allocUnsafe(28);return n.writeInt32BE((this||Dk)._a,0),n.writeInt32BE((this||Dk)._b,4),n.writeInt32BE((this||Dk)._c,8),n.writeInt32BE((this||Dk)._d,12),n.writeInt32BE((this||Dk)._e,16),n.writeInt32BE((this||Dk)._f,20),n.writeInt32BE((this||Dk)._g,24),n};var re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,pX=lq,mja=Mh.Buffer,H3=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],T$=Array(160);Wg(Jw,pX);Jw.prototype.init=function(){return(this||re)._ah=1779033703,(this||re)._bh=3144134277,(this||re)._ch=1013904242,(this||re)._dh=2773480762,(this||re)._eh=1359893119,(this||re)._fh=2600822924,(this||re)._gh=528734635,(this||re)._hh=1541459225,(this||re)._al=4089235720,(this||re)._bl=2227873595,(this||re)._cl=4271175723,(this||
re)._dl=1595750129,(this||re)._el=2917565137,(this||re)._fl=725511199,(this||re)._gl=4215389547,(this||re)._hl=327033209,this||re};Jw.prototype._update=function(n){for(var a=(this||re)._w,d=0|(this||re)._ah,k=0|(this||re)._bh,b=0|(this||re)._ch,e=0|(this||re)._dh,l=0|(this||re)._eh,p=0|(this||re)._fh,q=0|(this||re)._gh,u=0|(this||re)._hh,w=0|(this||re)._al,y=0|(this||re)._bl,A=0|(this||re)._cl,C=0|(this||re)._dl,D=0|(this||re)._el,L=0|(this||re)._fl,I=0|(this||re)._gl,S=0|(this||re)._hl,V=0;32>V;V+=
2)a[V]=n.readInt32BE(4*V),a[V+1]=n.readInt32BE(4*V+4);for(;160>V;V+=2){n=a[V-30];var ba=a[V-30+1],ua=(n>>>1|ba<<31)^(n>>>8|ba<<24)^n>>>7,Fa=(ba>>>1|n<<31)^(ba>>>8|n<<24)^(ba>>>7|n<<25);var F=n=a[V-4];var Y=ba=a[V-4+1];F=(F>>>19|Y<<13)^(Y>>>29|F<<3)^F>>>6;ba=(ba>>>19|n<<13)^(n>>>29|ba<<3)^(ba>>>6|n<<26);Y=a[V-32];var Q=a[V-32+1];n=Fa+a[V-14+1]|0;ua=ua+a[V-14]+Ek(n,Fa)|0;ua=(ua=ua+F+Ek(n=n+ba|0,ba)|0)+Y+Ek(n=n+Q|0,Q)|0;a[V]=ua;a[V+1]=n}for(V=0;160>V;V+=2){ua=a[V];n=a[V+1];ba=d&k|b&(d|k);var W=w&y|A&
(w|y);Y=(d>>>28|w<<4)^(w>>>2|d<<30)^(w>>>7|d<<25);Q=(w>>>28|d<<4)^(d>>>2|w<<30)^(d>>>7|w<<25);var ka=H3[V],ea=H3[V+1],la=q^l&(p^q),db=I^D&(L^I);Fa=S+((D>>>14|l<<18)^(D>>>18|l<<14)^(l>>>9|D<<23))|0;F=u+((l>>>14|D<<18)^(l>>>18|D<<14)^(D>>>9|l<<23))+Ek(Fa,S)|0;F=(F=(F=F+la+Ek(Fa=Fa+db|0,db)|0)+ka+Ek(Fa=Fa+ea|0,ea)|0)+ua+Ek(Fa=Fa+n|0,n)|0;n=Q+W|0;ua=Y+ba+Ek(n,Q)|0;u=q;S=I;q=p;I=L;p=l;L=D;l=e+F+Ek(D=C+Fa|0,C)|0;e=b;C=A;b=k;A=y;k=d;y=w;d=F+ua+Ek(w=Fa+n|0,Fa)|0}(this||re)._al=(this||re)._al+w|0;(this||re)._bl=
(this||re)._bl+y|0;(this||re)._cl=(this||re)._cl+A|0;(this||re)._dl=(this||re)._dl+C|0;(this||re)._el=(this||re)._el+D|0;(this||re)._fl=(this||re)._fl+L|0;(this||re)._gl=(this||re)._gl+I|0;(this||re)._hl=(this||re)._hl+S|0;(this||re)._ah=(this||re)._ah+d+Ek((this||re)._al,w)|0;(this||re)._bh=(this||re)._bh+k+Ek((this||re)._bl,y)|0;(this||re)._ch=(this||re)._ch+b+Ek((this||re)._cl,A)|0;(this||re)._dh=(this||re)._dh+e+Ek((this||re)._dl,C)|0;(this||re)._eh=(this||re)._eh+l+Ek((this||re)._el,D)|0;(this||
re)._fh=(this||re)._fh+p+Ek((this||re)._fl,L)|0;(this||re)._gh=(this||re)._gh+q+Ek((this||re)._gl,I)|0;(this||re)._hh=(this||re)._hh+u+Ek((this||re)._hl,S)|0};Jw.prototype._hash=function(){function n(d,k,b){a.writeInt32BE(d,b);a.writeInt32BE(k,b+4)}var a=mja.allocUnsafe(64);return n((this||re)._ah,(this||re)._al,0),n((this||re)._bh,(this||re)._bl,8),n((this||re)._ch,(this||re)._cl,16),n((this||re)._dh,(this||re)._dl,24),n((this||re)._eh,(this||re)._el,32),n((this||re)._fh,(this||re)._fl,40),n((this||
re)._gh,(this||re)._gl,48),n((this||re)._hh,(this||re)._hl,56),a};var ki="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,V$=lq,nja=Mh.Buffer,U$=Array(160);Wg(FE,Jw);FE.prototype.init=function(){return(this||ki)._ah=3418070365,(this||ki)._bh=1654270250,(this||ki)._ch=2438529370,(this||ki)._dh=355462360,(this||ki)._eh=1731405415,(this||ki)._fh=2394180231,(this||ki)._gh=3675008525,(this||ki)._hh=1203062813,(this||ki)._al=3238371032,(this||ki)._bl=914150663,(this||ki)._cl=
812702999,(this||ki)._dl=4144912697,(this||ki)._el=4290775857,(this||ki)._fl=1750603025,(this||ki)._gl=1694076839,(this||ki)._hl=3204075428,this||ki};FE.prototype._hash=function(){function n(d,k,b){a.writeInt32BE(d,b);a.writeInt32BE(k,b+4)}var a=nja.allocUnsafe(48);return n((this||ki)._ah,(this||ki)._al,0),n((this||ki)._bh,(this||ki)._bl,8),n((this||ki)._ch,(this||ki)._cl,16),n((this||ki)._dh,(this||ki)._dl,24),n((this||ki)._eh,(this||ki)._el,32),n((this||ki)._fh,(this||ki)._fl,40),a};var ss,I3=ss=
{};(ss=I3=function(n){n=n.toLowerCase();var a=ss[n];if(!a)throw Error(n+" is not supported (we accept pull requests)");return new a}).sha=Az;ss.sha1=Bz;ss.sha224=EE;ss.sha256=Iw;ss.sha384=FE;ss.sha512=Jw;var wQ=I3,uj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,J3=Mh.Buffer,qX=gu.Transform,oja=Fw.StringDecoder;Wg(Fk,qX);Fk.prototype.update=function(n,a,d){"string"==typeof n&&(n=J3.from(n,a));n=this._update(n);return(this||uj).hashMode?this||uj:(d&&(n=this._toString(n,
d)),n)};Fk.prototype.setAutoPadding=function(){};Fk.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};Fk.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};Fk.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};Fk.prototype._transform=function(n,a,d){try{(this||uj).hashMode?this._update(n):this.push(this._update(n))}catch(b){var k=b}finally{d(k)}};Fk.prototype._flush=function(n){try{this.push(this.__final())}catch(d){var a=
d}n(a)};Fk.prototype._finalOrDigest=function(n){var a=this.__final()||J3.alloc(0);return n&&(a=this._toString(a,n,!0)),a};Fk.prototype._toString=function(n,a,d){if((this||uj)._decoder||((this||uj)._decoder=new oja(a),(this||uj)._encoding=a),(this||uj)._encoding!==a)throw Error("can't switch encodings");n=(this||uj)._decoder.write(n);return d&&(n+=(this||uj)._decoder.end()),n};var rX=Fk;Wg(GE,rX);GE.prototype._update=function(n){this._hash.update(n)};GE.prototype._final=function(){return this._hash.digest()};
var vB=function(n){return"md5"===(n=n.toLowerCase())?new Gw:"rmd160"===n||"ripemd160"===n?new Hw:new GE(wQ(n))},K3=function(n){return(new Gw).update(n).digest()},pja=Wg,Vt=Mh.Buffer,sX=Fk,W$=Vt.alloc(128);pja(HE,sX);HE.prototype._update=function(n){this._hash.push(n)};HE.prototype._final=function(){var n=this._alg(Vt.concat(this._hash));return this._alg(Vt.concat([this._opad,n]))};var qja=Wg,tX=Fk,Dz=Mh.Buffer,nM=Hw,oM=wQ,X$=Dz.alloc(128);qja(Cz,tX);Cz.prototype._update=function(n){this._hash.update(n)};
Cz.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new nM:oM(this._alg)).update(this._opad).update(n).digest()};var L3=function(n,a){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new Cz("rmd160",a):"md5"===n?new HE(K3,a):new Cz(n,a)},M3={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",
hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},
"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",
hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},Y$=Ng.Buffer,rja=Math.pow(2,30)-1,xQ,N3=function(n,a,d,k){if(uX(n,"Password"),uX(a,"Salt"),"number"!=typeof d)throw new TypeError("Iterations not a number");if(0>d)throw new TypeError("Bad iterations");if("number"!=typeof k)throw new TypeError("Key length not a number");if(0>k||k>rja||k!=k)throw new TypeError("Bad key length");},O3=yh;O3.browser?xQ="utf-8":xQ=6<=parseInt(O3.version.split(".")[0].slice(1),
10)?"utf-8":"binary";var rI=xQ,eo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,aaa=K3,$$=Hw,Z$=wQ,co=Mh.Buffer,baa=co.alloc(128),IE={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};vX.prototype.run=function(n,a){return n.copy(a,(this||eo).blocksize),this.hash(a).copy((this||eo).opad,(this||eo).blocksize),this.hash((this||eo).opad)};var yQ,zQ=function(n,a,d,k,b){N3(n,a,d,k);co.isBuffer(n)||(n=co.from(n,rI));co.isBuffer(a)||(a=co.from(a,
rI));n=new vX(b=b||"sha1",n,a.length);var e=co.allocUnsafe(k),l=co.allocUnsafe(a.length+4);a.copy(l,0,0,a.length);var p=0;b=IE[b];k=Math.ceil(k/b);for(var q=1;q<=k;q++){l.writeUInt32BE(q,a.length);for(var u=n.run(l,n.ipad1),w=u,y=1;y<d;y++){w=n.run(w,n.ipad2);for(var A=0;A<b;A++)u[A]^=w[A]}u.copy(e,p);p+=b}return e},wB="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AQ=yh,Kw=Mh.Buffer,Ez=wB.crypto&&wB.crypto.subtle,sja={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256",
"sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},BQ=[],sI={pbkdf2:function(n,a,d,k,b,e){"function"==typeof b&&(e=b,b=void 0);var l=sja[(b=b||"sha1").toLowerCase()];if(!l||"function"!=typeof wB.Promise)return AQ.nextTick(function(){try{var p=zQ(n,a,d,k,b)}catch(q){return e(q)}e(null,p)});if(N3(n,a,d,k),"function"!=typeof e)throw Error("No callback provided to pbkdf2");Kw.isBuffer(n)||(n=Kw.from(n,rI));Kw.isBuffer(a)||(a=Kw.from(a,rI));(function(p,q){p.then(function(u){AQ.nextTick(function(){q(null,
u)})},function(u){AQ.nextTick(function(){q(u)})})})(function(p){if(wB.process&&!wB.process.browser||!Ez||!Ez.importKey||!Ez.deriveBits)return Promise.resolve(!1);if(void 0!==BQ[p])return BQ[p];var q=wX(yQ=yQ||Kw.alloc(8),yQ,10,128,p).then(function(){return!0}).catch(function(){return!1});return BQ[p]=q,q}(l).then(function(p){return p?wX(n,a,d,k,l):zQ(n,a,d,k,b)}),e)}};sI.pbkdf2Sync=zQ;xX.equal=function(n,a,d){if(n!=a)throw Error(d||"Assertion failed: "+n+" != "+a);};var pn=xX,kj={readUInt32BE:function(n,
a){return(n[0+a]<<24|n[1+a]<<16|n[2+a]<<8|n[3+a])>>>0},writeUInt32BE:function(n,a,d){n[0+d]=a>>>24;n[1+d]=a>>>16&255;n[2+d]=a>>>8&255;n[3+d]=255&a},ip:function(n,a,d,k){for(var b=0,e=0,l=6;0<=l;l-=2){for(var p=0;24>=p;p+=8)b<<=1,b|=a>>>p+l&1;for(p=0;24>=p;p+=8)b<<=1,b|=n>>>p+l&1}for(l=6;0<=l;l-=2){for(p=1;25>=p;p+=8)e<<=1,e|=a>>>p+l&1;for(p=1;25>=p;p+=8)e<<=1,e|=n>>>p+l&1}d[k+0]=b>>>0;d[k+1]=e>>>0},rip:function(n,a,d,k){for(var b=0,e=0,l=0;4>l;l++)for(var p=24;0<=p;p-=8)b<<=1,b|=a>>>p+l&1,b<<=1,b|=
n>>>p+l&1;for(l=4;8>l;l++)for(p=24;0<=p;p-=8)e<<=1,e|=a>>>p+l&1,e<<=1,e|=n>>>p+l&1;d[k+0]=b>>>0;d[k+1]=e>>>0},pc1:function(n,a,d,k){for(var b=0,e=0,l=7;5<=l;l--){for(var p=0;24>=p;p+=8)b<<=1,b|=a>>p+l&1;for(p=0;24>=p;p+=8)b<<=1,b|=n>>p+l&1}for(p=0;24>=p;p+=8)b<<=1,b|=a>>p+l&1;for(l=1;3>=l;l++){for(p=0;24>=p;p+=8)e<<=1,e|=a>>p+l&1;for(p=0;24>=p;p+=8)e<<=1,e|=n>>p+l&1}for(p=0;24>=p;p+=8)e<<=1,e|=n>>p+l&1;d[k+0]=b>>>0;d[k+1]=e>>>0},r28shl:function(n,a){return n<<a&268435455|n>>>28-a}},tI=[14,11,17,4,
27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];kj.pc2=function(n,a,d,k){for(var b=0,e=0,l=tI.length>>>1,p=0;p<l;p++)b<<=1,b|=n>>>tI[p]&1;for(p=l;p<tI.length;p++)e<<=1,e|=a>>>tI[p]&1;d[k+0]=b>>>0;d[k+1]=e>>>0};kj.expand=function(n,a,d){var k=0;var b=(1&n)<<5|n>>>27;for(var e=23;15<=e;e-=4)b<<=6,b|=n>>>e&63;for(e=11;3<=e;e-=4)k|=n>>>e&63,k<<=6;a[d+0]=b>>>0;a[d+1]=(k|(31&n)<<1|n>>>31)>>>0};var P3=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,
8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,
6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,
0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];kj.substitute=function(n,a){for(var d=0,k=0;4>k;k++)d<<=4,d|=P3[64*k+(n>>>18-6*k&63)];for(k=0;4>k;k++)d<<=4,d|=P3[256+64*k+(a>>>18-6*k&63)];return d>>>0};var Q3=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];kj.permute=function(n){for(var a=0,d=0;d<Q3.length;d++)a<<=1,a|=n>>>Q3[d]&
1;return a>>>0};kj.padSplit=function(n,a,d){for(n=n.toString(2);n.length<a;)n="0"+n;for(var k=[],b=0;b<a;b+=d)k.push(n.slice(b,b+d));return k.join(" ")};var tja=pn;Am.prototype._init=function(){};Am.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};Am.prototype._buffer=function(n,a){for(var d=Math.min(this.buffer.length-this.bufferOff,n.length-a),k=0;k<d;k++)this.buffer[this.bufferOff+k]=n[a+k];return this.bufferOff+=d,d};Am.prototype._flushBuffer=
function(n,a){return this._update(this.buffer,0,n,a),this.bufferOff=0,this.blockSize};Am.prototype._updateEncrypt=function(n){var a=0,d=0,k=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(a+=this._buffer(n,a),this.bufferOff===this.buffer.length&&(d+=this._flushBuffer(k,d)));for(var b=n.length-(n.length-a)%this.blockSize;a<b;a+=this.blockSize)this._update(n,a,k,d),d+=this.blockSize;for(;a<n.length;a++,this.bufferOff++)this.buffer[this.bufferOff]=n[a];return k};
Am.prototype._updateDecrypt=function(n){for(var a=0,d=0,k=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,b=Array(k*this.blockSize);0<k;k--)a+=this._buffer(n,a),d+=this._flushBuffer(b,d);return this._buffer(n,a),b};Am.prototype.final=function(n){var a,d;return n&&(a=this.update(n)),d="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),a?a.concat(d):d};Am.prototype._pad=function(n,a){if(0===a)return!1;for(;a<n.length;)n[a++]=0;return!0};Am.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,
this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};Am.prototype._unpad=function(n){return n};Am.prototype._finalDecrypt=function(){tja.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var R3=pn,yX=Am;Wg(fn,yX);fn.create=function(n){return new fn(n)};var uja=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];fn.prototype.deriveKeys=function(n,a){n.keys=Array(32);R3.equal(a.length,this.blockSize,
"Invalid key length");var d=kj.readUInt32BE(a,0);a=kj.readUInt32BE(a,4);kj.pc1(d,a,n.tmp,0);d=n.tmp[0];a=n.tmp[1];for(var k=0;k<n.keys.length;k+=2){var b=uja[k>>>1];d=kj.r28shl(d,b);a=kj.r28shl(a,b);kj.pc2(d,a,n.keys,k)}};fn.prototype._update=function(n,a,d,k){var b=this._desState,e=kj.readUInt32BE(n,a);n=kj.readUInt32BE(n,a+4);kj.ip(e,n,b.tmp,0);e=b.tmp[0];n=b.tmp[1];"encrypt"===this.type?this._encrypt(b,e,n,b.tmp,0):this._decrypt(b,e,n,b.tmp,0);e=b.tmp[0];n=b.tmp[1];kj.writeUInt32BE(d,e,k);kj.writeUInt32BE(d,
n,k+4)};fn.prototype._pad=function(n,a){for(var d=n.length-a;a<n.length;a++)n[a]=d;return!0};fn.prototype._unpad=function(n){for(var a=n[n.length-1],d=n.length-a;d<n.length;d++)R3.equal(n[d],a);return n.slice(0,n.length-a)};fn.prototype._encrypt=function(n,a,d,k,b){for(var e=0;e<n.keys.length;e+=2){var l=n.keys[e],p=n.keys[e+1];kj.expand(d,n.tmp,0);l^=n.tmp[0];p^=n.tmp[1];l=kj.substitute(l,p);p=d;d=(a^kj.permute(l))>>>0;a=p}kj.rip(d,a,k,b)};fn.prototype._decrypt=function(n,a,d,k,b){for(var e=n.keys.length-
2;0<=e;e-=2){var l=n.keys[e],p=n.keys[e+1];kj.expand(d,n.tmp,0);l^=n.tmp[0];p^=n.tmp[1];l=kj.substitute(l,p);p=d;d=(a^kj.permute(l))>>>0;a=p}kj.rip(d,a,k,b)};var uI={},eaa=pn,vja=Wg,vI={};uI.instantiate=function(n){function a(e){n.call(this,e);this._cbcInit()}vja(a,n);for(var d=Object.keys(vI),k=0;k<d.length;k++){var b=d[k];a.prototype[b]=vI[b]}return a.create=function(e){return new a(e)},a};vI._cbcInit=function(){this._cbcState=new daa(this.options.iv)};vI._update=function(n,a,d,k){var b=this.constructor.super_.prototype,
e=this._cbcState.iv;if("encrypt"===this.type){for(var l=0;l<this.blockSize;l++)e[l]^=n[a+l];b._update.call(this,e,0,d,k);for(l=0;l<this.blockSize;l++)e[l]=d[k+l]}else{b._update.call(this,n,a,d,k);for(l=0;l<this.blockSize;l++)d[k+l]^=e[l];for(l=0;l<this.blockSize;l++)e[l]=n[a+l]}};var gaa=pn,zX=Am,Fr=fn;Wg(cp,zX);cp.create=function(n){return new cp(n)};cp.prototype._update=function(n,a,d,k){var b=this._edeState;b.ciphers[0]._update(n,a,d,k);b.ciphers[1]._update(d,k,d,k);b.ciphers[2]._update(d,k,d,
k)};cp.prototype._pad=Fr.prototype._pad;cp.prototype._unpad=Fr.prototype._unpad;var KE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AX=Fk,wja=Wg,Wt=Mh.Buffer,Fz={"des-ede3-cbc":uI.instantiate(cp),"des-ede3":cp,"des-ede-cbc":uI.instantiate(cp),"des-ede":cp,"des-cbc":uI.instantiate(fn),"des-ecb":fn};Fz.des=Fz["des-cbc"];Fz.des3=Fz["des-ede3-cbc"];wja(JE,AX);JE.prototype._update=function(n){return Wt.from((this||KE)._des.update(n))};JE.prototype._final=function(){return Wt.from((this||
KE)._des.final())};var xja=Ng.Buffer,Lx=function(n,a){for(var d=Math.min(n.length,a.length),k=new xja(d),b=0;b<d;++b)k[b]=n[b]^a[b];return k},S3=function(n){for(var a,d=n.length;d--;){if(255!==(a=n.readUInt8(d))){a++;n.writeUInt8(a,d);break}n.writeUInt8(0,d)}},T3={},Gz=Mh.Buffer,haa=Lx;T3.encrypt=function(n,a,d){for(var k,b=Gz.allocUnsafe(0);a.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=Gz.allocUnsafe(0)),!(n._cache.length<=a.length)){b=Gz.concat([b,BX(n,a,d)]);
break}k=n._cache.length;b=Gz.concat([b,BX(n,a.slice(0,k),d)]);a=a.slice(k)}return b};var U3={},CQ=Mh.Buffer;U3.encrypt=function(n,a,d){for(var k=a.length,b=CQ.allocUnsafe(k),e=-1;++e<k;){var l=e;var p=n;var q=a[e],u=d,w=p._cipher.encryptBlock(p._prev)[0]^q;p=(p._prev=CQ.concat([p._prev.slice(1),CQ.from([u?q:w])]),w);b[l]=p}return b};var V3={},wI=Mh.Buffer;V3.encrypt=function(n,a,d){for(var k=a.length,b=wI.allocUnsafe(k),e=-1;++e<k;){for(var l=e,p,q,u=n,w=a[e],y=d,A=-1,C=0;8>++A;){q=w&1<<7-A?128:0;
C+=(128&(p=u._cipher.encryptBlock(u._prev)[0]^q))>>A%8;var D=u,L=u._prev;p=y?q:p;q=L.length;var I=-1,S=wI.allocUnsafe(L.length);for(L=wI.concat([L,wI.from([p])]);++I<q;)S[I]=L[I]<<1|L[I+1]>>7;D._prev=S}b[l]=C}return b};var W3={},yja=Ng.Buffer;W3.encrypt=function(n,a){for(;n._cache.length<a.length;)n._cache=yja.concat([n._cache,iaa(n)]);var d=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),Lx(a,d)};var DQ={},X3=Mh.Buffer;DQ.encrypt=function(n,a){var d=Math.ceil(a.length/16),k=n._cache.length;
n._cache=X3.concat([n._cache,X3.allocUnsafe(16*d)]);for(var b=0;b<d;b++){var e=n;var l=e._cipher.encryptBlockRaw(e._prev);e=(S3(e._prev),l);l=k+16*b;n._cache.writeUInt32BE(e[0],l+0);n._cache.writeUInt32BE(e[1],l+4);n._cache.writeUInt32BE(e[2],l+8);n._cache.writeUInt32BE(e[3],l+12)}d=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),Lx(a,d)};var Lu={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},
"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},
"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",
key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",
type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},zja={ECB:{encrypt:function(n,a){return n._cipher.encryptBlock(a)},decrypt:function(n,a){return n._cipher.decryptBlock(a)}},CBC:{encrypt:function(n,a){a=Lx(a,n._prev);return n._prev=n._cipher.encryptBlock(a),n._prev},decrypt:function(n,a){var d=n._prev;n._prev=a;n=n._cipher.decryptBlock(a);return Lx(n,d)}},CFB:T3,CFB8:U3,CFB1:V3,OFB:W3,CTR:DQ,GCM:DQ},EQ;
for(EQ in Lu)Lu[EQ].module=zja[Lu[EQ].mode];var hn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,xB={},LE=Mh.Buffer,Aja=[0,1,2,4,8,16,32,64,128,27,54],Yj=function(){for(var n=Array(256),a=0;256>a;a++)n[a]=128>a?a<<1:a<<1^283;a=[];for(var d=[],k=[[],[],[],[]],b=[[],[],[],[]],e=0,l=0,p=0;256>p;++p){var q=l^l<<1^l<<2^l<<3^l<<4;q=q>>>8^255&q^99;a[e]=q;d[q]=e;var u=n[e],w=n[u],y=n[w],A=257*n[q]^16843008*q;k[0][e]=A<<24|A>>>8;k[1][e]=A<<16|A>>>16;k[2][e]=A<<8|A>>>24;k[3][e]=
A;A=16843009*y^65537*w^257*u^16843008*e;b[0][q]=A<<24|A>>>8;b[1][q]=A<<16|A>>>16;b[2][q]=A<<8|A>>>24;b[3][q]=A;0===e?e=l=1:(e=u^n[n[n[y^u]]],l^=n[n[l]])}return{SBOX:a,INV_SBOX:d,SUB_MIX:k,INV_SUB_MIX:b}}();gn.blockSize=16;gn.keySize=32;gn.prototype.blockSize=gn.blockSize;gn.prototype.keySize=gn.keySize;gn.prototype._reset=function(){for(var n=(this||hn)._key,a=n.length,d=a+6,k=4*(d+1),b=[],e=0;e<a;e++)b[e]=n[e];for(e=a;e<k;e++)n=b[e-1],0==e%a?(n=n<<8|n>>>24,n=Yj.SBOX[n>>>24]<<24|Yj.SBOX[n>>>16&255]<<
16|Yj.SBOX[n>>>8&255]<<8|Yj.SBOX[255&n],n^=Aja[e/a|0]<<24):6<a&&4==e%a&&(n=Yj.SBOX[n>>>24]<<24|Yj.SBOX[n>>>16&255]<<16|Yj.SBOX[n>>>8&255]<<8|Yj.SBOX[255&n]),b[e]=b[e-a]^n;a=[];for(e=0;e<k;e++){n=k-e;var l=b[n-(e%4?0:4)];a[e]=4>e||4>=n?l:Yj.INV_SUB_MIX[0][Yj.SBOX[l>>>24]]^Yj.INV_SUB_MIX[1][Yj.SBOX[l>>>16&255]]^Yj.INV_SUB_MIX[2][Yj.SBOX[l>>>8&255]]^Yj.INV_SUB_MIX[3][Yj.SBOX[255&l]]}(this||hn)._nRounds=d;(this||hn)._keySchedule=b;(this||hn)._invKeySchedule=a};gn.prototype.encryptBlockRaw=function(n){return CX(pM(n),
(this||hn)._keySchedule,Yj.SUB_MIX,Yj.SBOX,(this||hn)._nRounds)};gn.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var a=LE.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[1],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[3],12),a};gn.prototype.decryptBlock=function(n){var a=(n=pM(n))[1];n[1]=n[3];n[3]=a;n=CX(n,(this||hn)._invKeySchedule,Yj.INV_SUB_MIX,Yj.INV_SBOX,(this||hn)._nRounds);a=LE.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],
8),a.writeUInt32BE(n[1],12),a};gn.prototype.scrub=function(){qM((this||hn)._keySchedule);qM((this||hn)._invKeySchedule);qM((this||hn)._key)};xB.AES=gn;var bl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Lw=Mh.Buffer,Bja=Lw.alloc(16,0);Hz.prototype.ghash=function(n){for(var a=-1;++a<n.length;)(this||bl).state[a]^=n[a];this._multiply()};Hz.prototype._multiply=function(){for(var n,a,d=[(n=(this||bl).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],
k=[0,0,0,0],b=-1;128>++b;){0!=((this||bl).state[~~(b/8)]&1<<7-b%8)&&(k[0]^=d[0],k[1]^=d[1],k[2]^=d[2],k[3]^=d[3]);a=0!=(1&d[3]);for(n=3;0<n;n--)d[n]=d[n]>>>1|(1&d[n-1])<<31;d[0]>>>=1;a&&(d[0]^=-520093696)}(this||bl).state=DX(k)};Hz.prototype.update=function(n){for((this||bl).cache=Lw.concat([(this||bl).cache,n]);16<=(this||bl).cache.length;)n=(this||bl).cache.slice(0,16),(this||bl).cache=(this||bl).cache.slice(16),this.ghash(n)};Hz.prototype.final=function(n,a){return(this||bl).cache.length&&this.ghash(Lw.concat([(this||
bl).cache,Bja],16)),this.ghash(DX([0,n,0,a])),(this||bl).state};var Fg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,jaa=xB,dm=Mh.Buffer,EX=Fk,FX=Hz,kaa=S3;Wg(Gr,EX);Gr.prototype._update=function(n){if(!(this||Fg)._called&&(this||Fg)._alen){var a=16-(this||Fg)._alen%16;16>a&&(a=dm.alloc(a,0),(this||Fg)._ghash.update(a))}(this||Fg)._called=!0;a=(this||Fg)._mode.encrypt(this||Fg,n);return(this||Fg)._decrypt?(this||Fg)._ghash.update(n):(this||Fg)._ghash.update(a),(this||
Fg)._len+=n.length,a};Gr.prototype._final=function(){if((this||Fg)._decrypt&&!(this||Fg)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=Lx((this||Fg)._ghash.final(8*(this||Fg)._alen,8*(this||Fg)._len),(this||Fg)._cipher.encryptBlock((this||Fg)._finID)),a;if(a=(this||Fg)._decrypt){a=(this||Fg)._authTag;var d=0;n.length!==a.length&&d++;for(var k=Math.min(n.length,a.length),b=0;b<k;++b)d+=n[b]^a[b];a=d}if(a)throw Error("Unsupported state or unable to authenticate data");
(this||Fg)._authTag=n;(this||Fg)._cipher.scrub()};Gr.prototype.getAuthTag=function(){if((this||Fg)._decrypt||!dm.isBuffer((this||Fg)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Fg)._authTag};Gr.prototype.setAuthTag=function(n){if(!(this||Fg)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Fg)._authTag=n};Gr.prototype.setAAD=function(n){if((this||Fg)._called)throw Error("Attempting to set AAD in unsupported state");(this||Fg)._ghash.update(n);
(this||Fg)._alen+=n.length};var fo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,laa=xB,rM=Mh.Buffer,GX=Fk;Wg(Iz,GX);Iz.prototype._update=function(n){return(this||fo)._mode.encrypt(this||fo,n,(this||fo)._decrypt)};Iz.prototype._final=function(){(this||fo)._cipher.scrub()};var Mu=Mh.Buffer,Nz=function(n,a,d,k){if(Mu.isBuffer(n)||(n=Mu.from(n,"binary")),a&&(Mu.isBuffer(a)||(a=Mu.from(a,"binary")),8!==a.length))throw new RangeError("salt should be Buffer with 8 byte length");
d/=8;for(var b=Mu.alloc(d),e=Mu.alloc(k||0),l=Mu.alloc(0);0<d||0<k;){var p=new Gw;p.update(l);p.update(n);a&&p.update(a);l=p.digest();p=0;if(0<d){var q=b.length-d;p=Math.min(d,l.length);l.copy(b,q,0,p);d-=p}p<l.length&&0<k&&(q=Math.min(k,l.length-p),l.copy(e,e.length-k,p,p+q),k-=q)}return l.fill(0),{key:b,iv:e}},li="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,oaa=Gr,Mw=Mh.Buffer,JX=Lu,naa=Iz,HX=Fk,maa=xB;Wg(Jz,HX);Jz.prototype._update=function(n){var a;(this||li)._cache.add(n);
for(n=[];a=(this||li)._cache.get((this||li)._autopadding);)a=(this||li)._mode.decrypt(this||li,a),n.push(a);return Mw.concat(n)};Jz.prototype._final=function(){var n=(this||li)._cache.flush();if((this||li)._autopadding){n=(this||li)._mode.decrypt(this||li,n);var a=n[15];if(1>a||16<a)throw Error("unable to decrypt data");for(var d=-1;++d<a;)if(n[d+(16-a)]!==a)throw Error("unable to decrypt data");n=16===a?void 0:n.slice(0,16-a);return n}if(n)throw Error("data not multiple of block length");};Jz.prototype.setAutoPadding=
function(n){return(this||li)._autopadding=!!n,this||li};ME.prototype.add=function(n){(this||li).cache=Mw.concat([(this||li).cache,n])};ME.prototype.get=function(n){var a;if(n){if(16<(this||li).cache.length)return a=(this||li).cache.slice(0,16),(this||li).cache=(this||li).cache.slice(16),a}else if(16<=(this||li).cache.length)return a=(this||li).cache.slice(0,16),(this||li).cache=(this||li).cache.slice(16),a;return null};ME.prototype.flush=function(){if((this||li).cache.length)return(this||li).cache};
var Ni="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,MX=Lu,raa=Gr,mq=Mh.Buffer,qaa=Iz,KX=Fk,paa=xB;Wg(Kz,KX);Kz.prototype._update=function(n){var a;(this||Ni)._cache.add(n);for(n=[];a=(this||Ni)._cache.get();)a=(this||Ni)._mode.encrypt(this||Ni,a),n.push(a);return mq.concat(n)};var Cja=mq.alloc(16,16);Kz.prototype._final=function(){var n=(this||Ni)._cache.flush();if((this||Ni)._autopadding)return n=(this||Ni)._mode.encrypt(this||Ni,n),(this||Ni)._cipher.scrub(),n;
if(!n.equals(Cja))throw(this||Ni)._cipher.scrub(),Error("data not multiple of block length");};Kz.prototype.setAutoPadding=function(n){return(this||Ni)._autopadding=!!n,this||Ni};NE.prototype.add=function(n){(this||Ni).cache=mq.concat([(this||Ni).cache,n])};NE.prototype.get=function(){if(15<(this||Ni).cache.length){var n=(this||Ni).cache.slice(0,16);return(this||Ni).cache=(this||Ni).cache.slice(16),n}return null};NE.prototype.flush=function(){for(var n=16-(this||Ni).cache.length,a=mq.allocUnsafe(n),
d=-1;++d<n;)a.writeUInt8(n,d);return mq.concat([(this||Ni).cache,a])};var Cm={};Cm.createCipher=Cm.Cipher=function(n,a){var d=MX[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");a=Nz(a,!1,d.key,d.iv);return LX(n,a.key,a.iv)};Cm.createCipheriv=Cm.Cipheriv=LX;Cm.createDecipher=Cm.Decipher=function(n,a){var d=JX[n.toLowerCase()];if(!d)throw new TypeError("invalid suite type");a=Nz(a,!1,d.key,d.iv);return IX(n,a.key,a.iv)};Cm.createDecipheriv=Cm.Decipheriv=IX;Cm.listCiphers=Cm.getCiphers=
function(){return Object.keys(Lu)};var ts={"des-ecb":{key:8,iv:0}};ts["des-cbc"]=ts.des={key:8,iv:8};ts["des-ede3-cbc"]=ts.des3={key:24,iv:8};ts["des-ede3"]={key:24,iv:0};ts["des-ede-cbc"]={key:16,iv:8};ts["des-ede"]={key:16,iv:0};var Y3,Z3,$3,NX=JE,tM=Cm,Hr=Lu,nq=ts;var Dja=Y3=function(n,a){if(n=n.toLowerCase(),Hr[n]){var d=Hr[n].key;var k=Hr[n].iv}else{if(!nq[n])throw new TypeError("invalid suite type");d=8*nq[n].key;k=nq[n].iv}a=Nz(a,!1,d,k);return sM(n,a.key,a.iv)};var Eja=Z3=function(n,a){if(n=
n.toLowerCase(),Hr[n]){var d=Hr[n].key;var k=Hr[n].iv}else{if(!nq[n])throw new TypeError("invalid suite type");d=8*nq[n].key;k=nq[n].iv}a=Nz(a,!1,d,k);return uM(n,a.key,a.iv)};var Fja=$3=function(){return Object.keys(nq).concat(tM.getCiphers())};var Gja=Object.freeze({}),eb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,a4={},b4={exports:a4};!function(n,a){function d(F,Y){if(!F)throw Error(Y||"Assertion failed");}function k(F,Y){F.super_=Y;var Q=function(){};Q.prototype=
Y.prototype;F.prototype=new Q;F.prototype.constructor=F}function b(F,Y,Q){if(b.isBN(F))return F;(this||eb).negative=0;(this||eb).words=null;(this||eb).length=0;(this||eb).red=null;null!==F&&("le"!==Y&&"be"!==Y||(Q=Y,Y=10),this._init(F||0,Y||10,Q||"be"))}function e(F,Y,Q){var W=0;for(Q=Math.min(F.length,Q);Y<Q;Y++){var ka=F.charCodeAt(Y)-48;W<<=4;W|=49<=ka&&54>=ka?ka-49+10:17<=ka&&22>=ka?ka-17+10:15&ka}return W}function l(F,Y,Q,W){var ka=0;for(Q=Math.min(F.length,Q);Y<Q;Y++){var ea=F.charCodeAt(Y)-
48;ka*=W;ka+=49<=ea?ea-49+10:17<=ea?ea-17+10:ea}return ka}function p(F,Y,Q){Q.negative=Y.negative^F.negative;var W=F.length+Y.length|0;Q.length=W;W=W-1|0;var ka=(0|F.words[0])*(0|Y.words[0]),ea=ka/67108864|0;Q.words[0]=67108863&ka;for(var la=1;la<W;la++){var db=ea>>>26;ka=67108863&ea;ea=Math.min(la,Y.length-1);for(var ub=Math.max(0,la-F.length+1);ub<=ea;ub++)db+=(ka=(0|F.words[la-ub|0])*(0|Y.words[ub])+ka)/67108864|0,ka&=67108863;Q.words[la]=0|ka;ea=0|db}return 0!==ea?Q.words[la]=0|ea:Q.length--,
Q.strip()}function q(F,Y){(this||eb).x=F;(this||eb).y=Y}function u(F,Y){(this||eb).name=F;(this||eb).p=new b(Y,16);(this||eb).n=(this||eb).p.bitLength();(this||eb).k=(new b(1)).iushln((this||eb).n).isub((this||eb).p);(this||eb).tmp=this._tmp()}function w(){u.call(this||eb,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){u.call(this||eb,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){u.call(this||eb,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function C(){u.call(this||eb,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function D(F){"string"==typeof F?(F=b._prime(F),(this||eb).m=F.p,(this||eb).prime=F):(d(F.gtn(1),"modulus must be greater than 1"),(this||eb).m=F,(this||eb).prime=null)}function L(F){D.call(this||eb,F);(this||eb).shift=(this||eb).m.bitLength();0!=(this||eb).shift%26&&((this||eb).shift+=26-(this||eb).shift%26);(this||eb).r=(new b(1)).iushln((this||eb).shift);(this||eb).r2=this.imod((this||eb).r.sqr());
(this||eb).rinv=(this||eb).r._invmp((this||eb).m);(this||eb).minv=(this||eb).rinv.mul((this||eb).r).isubn(1).div((this||eb).m);(this||eb).minv=(this||eb).minv.umod((this||eb).r);(this||eb).minv=(this||eb).r.sub((this||eb).minv)}"object"==typeof n?n.exports=b:a.BN=b;b.BN=b;b.wordSize=26;try{var I=Gja.Buffer}catch(F){}b.isBN=function(F){return F instanceof b||null!==F&&"object"==typeof F&&F.constructor.wordSize===b.wordSize&&Array.isArray(F.words)};b.max=function(F,Y){return 0<F.cmp(Y)?F:Y};b.min=function(F,
Y){return 0>F.cmp(Y)?F:Y};b.prototype._init=function(F,Y,Q){if("number"==typeof F)return this._initNumber(F,Y,Q);if("object"==typeof F)return this._initArray(F,Y,Q);"hex"===Y&&(Y=16);d(Y===(0|Y)&&2<=Y&&36>=Y);var W=0;"-"===(F=F.toString().replace(/\s+/g,""))[0]&&W++;16===Y?this._parseHex(F,W):this._parseBase(F,Y,W);"-"===F[0]&&((this||eb).negative=1);this.strip();"le"===Q&&this._initArray(this.toArray(),Y,Q)};b.prototype._initNumber=function(F,Y,Q){0>F&&((this||eb).negative=1,F=-F);67108864>F?((this||
eb).words=[67108863&F],(this||eb).length=1):4503599627370496>F?((this||eb).words=[67108863&F,F/67108864&67108863],(this||eb).length=2):(d(9007199254740992>F),(this||eb).words=[67108863&F,F/67108864&67108863,1],(this||eb).length=3);"le"===Q&&this._initArray(this.toArray(),Y,Q)};b.prototype._initArray=function(F,Y,Q){if(d("number"==typeof F.length),0>=F.length)return(this||eb).words=[0],(this||eb).length=1,this||eb;(this||eb).length=Math.ceil(F.length/3);(this||eb).words=Array((this||eb).length);for(Y=
0;Y<(this||eb).length;Y++)(this||eb).words[Y]=0;var W=0;if("be"===Q)for(Y=F.length-1,Q=0;0<=Y;Y-=3){var ka=F[Y]|F[Y-1]<<8|F[Y-2]<<16;(this||eb).words[Q]|=ka<<W&67108863;(this||eb).words[Q+1]=ka>>>26-W&67108863;26<=(W+=24)&&(W-=26,Q++)}else if("le"===Q)for(Q=Y=0;Y<F.length;Y+=3)ka=F[Y]|F[Y+1]<<8|F[Y+2]<<16,(this||eb).words[Q]|=ka<<W&67108863,(this||eb).words[Q+1]=ka>>>26-W&67108863,26<=(W+=24)&&(W-=26,Q++);return this.strip()};b.prototype._parseHex=function(F,Y){(this||eb).length=Math.ceil((F.length-
Y)/6);(this||eb).words=Array((this||eb).length);for(var Q=0;Q<(this||eb).length;Q++)(this||eb).words[Q]=0;var W,ka=0;Q=F.length-6;for(W=0;Q>=Y;Q-=6){var ea=e(F,Q,Q+6);(this||eb).words[W]|=ea<<ka&67108863;(this||eb).words[W+1]|=ea>>>26-ka&4194303;26<=(ka+=24)&&(ka-=26,W++)}Q+6!==Y&&(ea=e(F,Y,Q+6),(this||eb).words[W]|=ea<<ka&67108863,(this||eb).words[W+1]|=ea>>>26-ka&4194303);this.strip()};b.prototype._parseBase=function(F,Y,Q){(this||eb).words=[0];(this||eb).length=1;for(var W=0,ka=1;67108863>=ka;ka*=
Y)W++;W--;ka=ka/Y|0;var ea=F.length-Q,la=ea%W;ea=Math.min(ea,ea-la)+Q;for(var db=Q;db<ea;db+=W)Q=l(F,db,db+W,Y),this.imuln(ka),67108864>(this||eb).words[0]+Q?(this||eb).words[0]+=Q:this._iaddn(Q);if(0!==la){W=1;Q=l(F,db,F.length,Y);for(db=0;db<la;db++)W*=Y;this.imuln(W);67108864>(this||eb).words[0]+Q?(this||eb).words[0]+=Q:this._iaddn(Q)}};b.prototype.copy=function(F){F.words=Array((this||eb).length);for(var Y=0;Y<(this||eb).length;Y++)F.words[Y]=(this||eb).words[Y];F.length=(this||eb).length;F.negative=
(this||eb).negative;F.red=(this||eb).red};b.prototype.clone=function(){var F=new b(null);return this.copy(F),F};b.prototype._expand=function(F){for(;(this||eb).length<F;)(this||eb).words[(this||eb).length++]=0;return this||eb};b.prototype.strip=function(){for(;1<(this||eb).length&&0===(this||eb).words[(this||eb).length-1];)(this||eb).length--;return this._normSign()};b.prototype._normSign=function(){return 1===(this||eb).length&&0===(this||eb).words[0]&&((this||eb).negative=0),this||eb};b.prototype.inspect=
function(){return((this||eb).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),V=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,
5,5,5,5,5,5,5,5,5,5,5,5,5],ba=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];b.prototype.toString=function(F,Y){if(Y=0|Y||1,16===(F=F||10)||"hex"===F){var Q="";for(var W=F=0,ka=0;ka<(this||eb).length;ka++){var ea=(this||eb).words[ka],la=(16777215&
(ea<<F|W)).toString(16);Q=0!==(W=ea>>>24-F&16777215)||ka!==(this||eb).length-1?S[6-la.length]+la+Q:la+Q;26<=(F+=2)&&(F-=26,ka--)}for(0!==W&&(Q=W.toString(16)+Q);0!=Q.length%Y;)Q="0"+Q;return 0!==(this||eb).negative&&(Q="-"+Q),Q}if(F===(0|F)&&2<=F&&36>=F){W=V[F];ka=ba[F];Q="";ea=this.clone();for(ea.negative=0;!ea.isZero();)la=ea.modn(ka).toString(F),Q=(ea=ea.idivn(ka)).isZero()?la+Q:S[W-la.length]+la+Q;for(this.isZero()&&(Q="0"+Q);0!=Q.length%Y;)Q="0"+Q;return 0!==(this||eb).negative&&(Q="-"+Q),Q}d(!1,
"Base should be between 2 and 36")};b.prototype.toNumber=function(){var F=(this||eb).words[0];return 2===(this||eb).length?F+=67108864*(this||eb).words[1]:3===(this||eb).length&&1===(this||eb).words[2]?F+=4503599627370496+67108864*(this||eb).words[1]:2<(this||eb).length&&d(!1,"Number can only safely store up to 53 bits"),0!==(this||eb).negative?-F:F};b.prototype.toJSON=function(){return this.toString(16)};b.prototype.toBuffer=function(F,Y){return d(void 0!==I),this.toArrayLike(I,F,Y)};b.prototype.toArray=
function(F,Y){return this.toArrayLike(Array,F,Y)};b.prototype.toArrayLike=function(F,Y,Q){var W=this.byteLength();Q=Q||Math.max(1,W);d(W<=Q,"byte array longer than desired length");d(0<Q,"Requested array length <= 0");this.strip();var ka="le"===Y;F=new F(Q);Y=this.clone();if(ka){for(ka=0;!Y.isZero();ka++)W=Y.andln(255),Y.iushrn(8),F[ka]=W;for(;ka<Q;ka++)F[ka]=0}else{for(ka=0;ka<Q-W;ka++)F[ka]=0;for(ka=0;!Y.isZero();ka++)W=Y.andln(255),Y.iushrn(8),F[Q-ka-1]=W}return F};Math.clz32?b.prototype._countBits=
function(F){return 32-Math.clz32(F)}:b.prototype._countBits=function(F){var Y=0;return 4096<=F&&(Y+=13,F>>>=13),64<=F&&(Y+=7,F>>>=7),8<=F&&(Y+=4,F>>>=4),2<=F&&(Y+=2,F>>>=2),Y+F};b.prototype._zeroBits=function(F){if(0===F)return 26;var Y=0;return 0==(8191&F)&&(Y+=13,F>>>=13),0==(127&F)&&(Y+=7,F>>>=7),0==(15&F)&&(Y+=4,F>>>=4),0==(3&F)&&(Y+=2,F>>>=2),0==(1&F)&&Y++,Y};b.prototype.bitLength=function(){var F=this._countBits((this||eb).words[(this||eb).length-1]);return 26*((this||eb).length-1)+F};b.prototype.zeroBits=
function(){if(this.isZero())return 0;for(var F=0,Y=0;Y<(this||eb).length;Y++){var Q=this._zeroBits((this||eb).words[Y]);if(F+=Q,26!==Q)break}return F};b.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};b.prototype.toTwos=function(F){return 0!==(this||eb).negative?this.abs().inotn(F).iaddn(1):this.clone()};b.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()};b.prototype.isNeg=function(){return 0!==(this||eb).negative};b.prototype.neg=
function(){return this.clone().ineg()};b.prototype.ineg=function(){return this.isZero()||((this||eb).negative^=1),this||eb};b.prototype.iuor=function(F){for(;(this||eb).length<F.length;)(this||eb).words[(this||eb).length++]=0;for(var Y=0;Y<F.length;Y++)(this||eb).words[Y]|=F.words[Y];return this.strip()};b.prototype.ior=function(F){return d(0==((this||eb).negative|F.negative)),this.iuor(F)};b.prototype.or=function(F){return(this||eb).length>F.length?this.clone().ior(F):F.clone().ior(this||eb)};b.prototype.uor=
function(F){return(this||eb).length>F.length?this.clone().iuor(F):F.clone().iuor(this||eb)};b.prototype.iuand=function(F){var Y=(this||eb).length>F.length?F:this||eb;for(var Q=0;Q<Y.length;Q++)(this||eb).words[Q]&=F.words[Q];return(this||eb).length=Y.length,this.strip()};b.prototype.iand=function(F){return d(0==((this||eb).negative|F.negative)),this.iuand(F)};b.prototype.and=function(F){return(this||eb).length>F.length?this.clone().iand(F):F.clone().iand(this||eb)};b.prototype.uand=function(F){return(this||
eb).length>F.length?this.clone().iuand(F):F.clone().iuand(this||eb)};b.prototype.iuxor=function(F){var Y,Q;(this||eb).length>F.length?(Y=this||eb,Q=F):(Y=F,Q=this||eb);for(F=0;F<Q.length;F++)(this||eb).words[F]=Y.words[F]^Q.words[F];if((this||eb)!==Y)for(;F<Y.length;F++)(this||eb).words[F]=Y.words[F];return(this||eb).length=Y.length,this.strip()};b.prototype.ixor=function(F){return d(0==((this||eb).negative|F.negative)),this.iuxor(F)};b.prototype.xor=function(F){return(this||eb).length>F.length?this.clone().ixor(F):
F.clone().ixor(this||eb)};b.prototype.uxor=function(F){return(this||eb).length>F.length?this.clone().iuxor(F):F.clone().iuxor(this||eb)};b.prototype.inotn=function(F){d("number"==typeof F&&0<=F);var Y=0|Math.ceil(F/26);F%=26;this._expand(Y);0<F&&Y--;for(var Q=0;Q<Y;Q++)(this||eb).words[Q]=67108863&~(this||eb).words[Q];return 0<F&&((this||eb).words[Q]=~(this||eb).words[Q]&67108863>>26-F),this.strip()};b.prototype.notn=function(F){return this.clone().inotn(F)};b.prototype.setn=function(F,Y){d("number"==
typeof F&&0<=F);var Q=F/26|0;F%=26;return this._expand(Q+1),(this||eb).words[Q]=Y?(this||eb).words[Q]|1<<F:(this||eb).words[Q]&~(1<<F),this.strip()};b.prototype.iadd=function(F){var Y,Q,W;if(0!==(this||eb).negative&&0===F.negative)return(this||eb).negative=0,this.isub(F),(this||eb).negative^=1,this._normSign();if(0===(this||eb).negative&&0!==F.negative)return F.negative=0,Y=this.isub(F),F.negative=1,Y._normSign();(this||eb).length>F.length?(Q=this||eb,W=F):(Q=F,W=this||eb);for(F=Y=0;F<W.length;F++)Y=
(0|Q.words[F])+(0|W.words[F])+Y,(this||eb).words[F]=67108863&Y,Y>>>=26;for(;0!==Y&&F<Q.length;F++)Y=(0|Q.words[F])+Y,(this||eb).words[F]=67108863&Y,Y>>>=26;if((this||eb).length=Q.length,0!==Y)(this||eb).words[(this||eb).length]=Y,(this||eb).length++;else if(Q!==(this||eb))for(;F<Q.length;F++)(this||eb).words[F]=Q.words[F];return this||eb};b.prototype.add=function(F){var Y;return 0!==F.negative&&0===(this||eb).negative?(F.negative=0,Y=this.sub(F),F.negative^=1,Y):0===F.negative&&0!==(this||eb).negative?
((this||eb).negative=0,Y=F.sub(this||eb),(this||eb).negative=1,Y):(this||eb).length>F.length?this.clone().iadd(F):F.clone().iadd(this||eb)};b.prototype.isub=function(F){if(0!==F.negative){F.negative=0;var Y=this.iadd(F);return F.negative=1,Y._normSign()}if(0!==(this||eb).negative)return(this||eb).negative=0,this.iadd(F),(this||eb).negative=1,this._normSign();var Q,W;Y=this.cmp(F);if(0===Y)return(this||eb).negative=0,(this||eb).length=1,(this||eb).words[0]=0,this||eb;0<Y?(Q=this||eb,W=F):(Q=F,W=this||
eb);for(var ka=F=0;ka<W.length;ka++)F=(Y=(0|Q.words[ka])-(0|W.words[ka])+F)>>26,(this||eb).words[ka]=67108863&Y;for(;0!==F&&ka<Q.length;ka++)F=(Y=(0|Q.words[ka])+F)>>26,(this||eb).words[ka]=67108863&Y;if(0===F&&ka<Q.length&&Q!==(this||eb))for(;ka<Q.length;ka++)(this||eb).words[ka]=Q.words[ka];return(this||eb).length=Math.max((this||eb).length,ka),Q!==(this||eb)&&((this||eb).negative=1),this.strip()};b.prototype.sub=function(F){return this.clone().isub(F)};var ua=function(F,Y,Q){var W=F.words,ka=Y.words,
ea=Q.words,la=0|W[0],db=8191&la;la>>>=13;var ub=0|W[1],xa=8191&ub;ub>>>=13;var na=0|W[2],Aa=8191&na;na>>>=13;var Pa=0|W[3],Da=8191&Pa;Pa>>>=13;var M=0|W[4],U=8191&M;M>>>=13;var aa=0|W[5],pa=8191&aa;aa>>>=13;var ma=0|W[6],La=8191&ma;ma>>>=13;var ib=0|W[7],ca=8191&ib;ib>>>=13;var qa=0|W[8],ra=8191&qa;qa>>>=13;var Va=0|W[9];W=8191&Va;Va>>>=13;var nb=0|ka[0],wc=8191&nb,nc=nb>>>13,ac=0|ka[1];nb=8191&ac;var qd=ac>>>13,id=0|ka[2];ac=8191&id;var xe=id>>>13,Ae=0|ka[3];id=8191&Ae;var hf=Ae>>>13,fg=0|ka[4];
Ae=8191&fg;var Mg=fg>>>13,pg=0|ka[5];fg=8191&pg;var vh=pg>>>13,xg=0|ka[6];pg=8191&xg;var Ff=xg>>>13,gg=0|ka[7];xg=8191&gg;var yg=gg>>>13,rh=0|ka[8];gg=8191&rh;rh>>>=13;var Lh=0|ka[9];ka=8191&Lh;Lh>>>=13;Q.negative=F.negative^Y.negative;Q.length=19;var Pl=(0+Math.imul(db,wc)|0)+((8191&(F=(F=Math.imul(db,nc))+Math.imul(la,wc)|0))<<13)|0;Y=(Math.imul(la,nc)+(F>>>13)|0)+(Pl>>>26)|0;Pl&=67108863;var Vc=Math.imul(xa,wc);F=(F=Math.imul(xa,nc))+Math.imul(ub,wc)|0;var Yc=Math.imul(ub,nc);var En=(Y+(Vc+Math.imul(db,
nb)|0)|0)+((8191&(F=(F=F+Math.imul(db,qd)|0)+Math.imul(la,nb)|0))<<13)|0;Y=((Yc+Math.imul(la,qd)|0)+(F>>>13)|0)+(En>>>26)|0;En&=67108863;Vc=Math.imul(Aa,wc);F=(F=Math.imul(Aa,nc))+Math.imul(na,wc)|0;Yc=Math.imul(na,nc);Vc=Vc+Math.imul(xa,nb)|0;F=(F=F+Math.imul(xa,qd)|0)+Math.imul(ub,nb)|0;Yc=Yc+Math.imul(ub,qd)|0;var Om=(Y+(Vc+Math.imul(db,ac)|0)|0)+((8191&(F=(F=F+Math.imul(db,xe)|0)+Math.imul(la,ac)|0))<<13)|0;Y=((Yc+Math.imul(la,xe)|0)+(F>>>13)|0)+(Om>>>26)|0;Om&=67108863;Vc=Math.imul(Da,wc);F=
(F=Math.imul(Da,nc))+Math.imul(Pa,wc)|0;Yc=Math.imul(Pa,nc);Vc=Vc+Math.imul(Aa,nb)|0;F=(F=F+Math.imul(Aa,qd)|0)+Math.imul(na,nb)|0;Yc=Yc+Math.imul(na,qd)|0;Vc=Vc+Math.imul(xa,ac)|0;F=(F=F+Math.imul(xa,xe)|0)+Math.imul(ub,ac)|0;Yc=Yc+Math.imul(ub,xe)|0;var nm=(Y+(Vc+Math.imul(db,id)|0)|0)+((8191&(F=(F=F+Math.imul(db,hf)|0)+Math.imul(la,id)|0))<<13)|0;Y=((Yc+Math.imul(la,hf)|0)+(F>>>13)|0)+(nm>>>26)|0;nm&=67108863;Vc=Math.imul(U,wc);F=(F=Math.imul(U,nc))+Math.imul(M,wc)|0;Yc=Math.imul(M,nc);Vc=Vc+Math.imul(Da,
nb)|0;F=(F=F+Math.imul(Da,qd)|0)+Math.imul(Pa,nb)|0;Yc=Yc+Math.imul(Pa,qd)|0;Vc=Vc+Math.imul(Aa,ac)|0;F=(F=F+Math.imul(Aa,xe)|0)+Math.imul(na,ac)|0;Yc=Yc+Math.imul(na,xe)|0;Vc=Vc+Math.imul(xa,id)|0;F=(F=F+Math.imul(xa,hf)|0)+Math.imul(ub,id)|0;Yc=Yc+Math.imul(ub,hf)|0;var ls=(Y+(Vc+Math.imul(db,Ae)|0)|0)+((8191&(F=(F=F+Math.imul(db,Mg)|0)+Math.imul(la,Ae)|0))<<13)|0;Y=((Yc+Math.imul(la,Mg)|0)+(F>>>13)|0)+(ls>>>26)|0;ls&=67108863;Vc=Math.imul(pa,wc);F=(F=Math.imul(pa,nc))+Math.imul(aa,wc)|0;Yc=Math.imul(aa,
nc);Vc=Vc+Math.imul(U,nb)|0;F=(F=F+Math.imul(U,qd)|0)+Math.imul(M,nb)|0;Yc=Yc+Math.imul(M,qd)|0;Vc=Vc+Math.imul(Da,ac)|0;F=(F=F+Math.imul(Da,xe)|0)+Math.imul(Pa,ac)|0;Yc=Yc+Math.imul(Pa,xe)|0;Vc=Vc+Math.imul(Aa,id)|0;F=(F=F+Math.imul(Aa,hf)|0)+Math.imul(na,id)|0;Yc=Yc+Math.imul(na,hf)|0;Vc=Vc+Math.imul(xa,Ae)|0;F=(F=F+Math.imul(xa,Mg)|0)+Math.imul(ub,Ae)|0;Yc=Yc+Math.imul(ub,Mg)|0;var jj=(Y+(Vc+Math.imul(db,fg)|0)|0)+((8191&(F=(F=F+Math.imul(db,vh)|0)+Math.imul(la,fg)|0))<<13)|0;Y=((Yc+Math.imul(la,
vh)|0)+(F>>>13)|0)+(jj>>>26)|0;jj&=67108863;Vc=Math.imul(La,wc);F=(F=Math.imul(La,nc))+Math.imul(ma,wc)|0;Yc=Math.imul(ma,nc);Vc=Vc+Math.imul(pa,nb)|0;F=(F=F+Math.imul(pa,qd)|0)+Math.imul(aa,nb)|0;Yc=Yc+Math.imul(aa,qd)|0;Vc=Vc+Math.imul(U,ac)|0;F=(F=F+Math.imul(U,xe)|0)+Math.imul(M,ac)|0;Yc=Yc+Math.imul(M,xe)|0;Vc=Vc+Math.imul(Da,id)|0;F=(F=F+Math.imul(Da,hf)|0)+Math.imul(Pa,id)|0;Yc=Yc+Math.imul(Pa,hf)|0;Vc=Vc+Math.imul(Aa,Ae)|0;F=(F=F+Math.imul(Aa,Mg)|0)+Math.imul(na,Ae)|0;Yc=Yc+Math.imul(na,Mg)|
0;Vc=Vc+Math.imul(xa,fg)|0;F=(F=F+Math.imul(xa,vh)|0)+Math.imul(ub,fg)|0;Yc=Yc+Math.imul(ub,vh)|0;var ms=(Y+(Vc+Math.imul(db,pg)|0)|0)+((8191&(F=(F=F+Math.imul(db,Ff)|0)+Math.imul(la,pg)|0))<<13)|0;Y=((Yc+Math.imul(la,Ff)|0)+(F>>>13)|0)+(ms>>>26)|0;ms&=67108863;Vc=Math.imul(ca,wc);F=(F=Math.imul(ca,nc))+Math.imul(ib,wc)|0;Yc=Math.imul(ib,nc);Vc=Vc+Math.imul(La,nb)|0;F=(F=F+Math.imul(La,qd)|0)+Math.imul(ma,nb)|0;Yc=Yc+Math.imul(ma,qd)|0;Vc=Vc+Math.imul(pa,ac)|0;F=(F=F+Math.imul(pa,xe)|0)+Math.imul(aa,
ac)|0;Yc=Yc+Math.imul(aa,xe)|0;Vc=Vc+Math.imul(U,id)|0;F=(F=F+Math.imul(U,hf)|0)+Math.imul(M,id)|0;Yc=Yc+Math.imul(M,hf)|0;Vc=Vc+Math.imul(Da,Ae)|0;F=(F=F+Math.imul(Da,Mg)|0)+Math.imul(Pa,Ae)|0;Yc=Yc+Math.imul(Pa,Mg)|0;Vc=Vc+Math.imul(Aa,fg)|0;F=(F=F+Math.imul(Aa,vh)|0)+Math.imul(na,fg)|0;Yc=Yc+Math.imul(na,vh)|0;Vc=Vc+Math.imul(xa,pg)|0;F=(F=F+Math.imul(xa,Ff)|0)+Math.imul(ub,pg)|0;Yc=Yc+Math.imul(ub,Ff)|0;var ns=(Y+(Vc+Math.imul(db,xg)|0)|0)+((8191&(F=(F=F+Math.imul(db,yg)|0)+Math.imul(la,xg)|0))<<
13)|0;Y=((Yc+Math.imul(la,yg)|0)+(F>>>13)|0)+(ns>>>26)|0;ns&=67108863;Vc=Math.imul(ra,wc);F=(F=Math.imul(ra,nc))+Math.imul(qa,wc)|0;Yc=Math.imul(qa,nc);Vc=Vc+Math.imul(ca,nb)|0;F=(F=F+Math.imul(ca,qd)|0)+Math.imul(ib,nb)|0;Yc=Yc+Math.imul(ib,qd)|0;Vc=Vc+Math.imul(La,ac)|0;F=(F=F+Math.imul(La,xe)|0)+Math.imul(ma,ac)|0;Yc=Yc+Math.imul(ma,xe)|0;Vc=Vc+Math.imul(pa,id)|0;F=(F=F+Math.imul(pa,hf)|0)+Math.imul(aa,id)|0;Yc=Yc+Math.imul(aa,hf)|0;Vc=Vc+Math.imul(U,Ae)|0;F=(F=F+Math.imul(U,Mg)|0)+Math.imul(M,
Ae)|0;Yc=Yc+Math.imul(M,Mg)|0;Vc=Vc+Math.imul(Da,fg)|0;F=(F=F+Math.imul(Da,vh)|0)+Math.imul(Pa,fg)|0;Yc=Yc+Math.imul(Pa,vh)|0;Vc=Vc+Math.imul(Aa,pg)|0;F=(F=F+Math.imul(Aa,Ff)|0)+Math.imul(na,pg)|0;Yc=Yc+Math.imul(na,Ff)|0;Vc=Vc+Math.imul(xa,xg)|0;F=(F=F+Math.imul(xa,yg)|0)+Math.imul(ub,xg)|0;Yc=Yc+Math.imul(ub,yg)|0;var os=(Y+(Vc+Math.imul(db,gg)|0)|0)+((8191&(F=(F=F+Math.imul(db,rh)|0)+Math.imul(la,gg)|0))<<13)|0;Y=((Yc+Math.imul(la,rh)|0)+(F>>>13)|0)+(os>>>26)|0;os&=67108863;Vc=Math.imul(W,wc);
F=(F=Math.imul(W,nc))+Math.imul(Va,wc)|0;Yc=Math.imul(Va,nc);Vc=Vc+Math.imul(ra,nb)|0;F=(F=F+Math.imul(ra,qd)|0)+Math.imul(qa,nb)|0;Yc=Yc+Math.imul(qa,qd)|0;Vc=Vc+Math.imul(ca,ac)|0;F=(F=F+Math.imul(ca,xe)|0)+Math.imul(ib,ac)|0;Yc=Yc+Math.imul(ib,xe)|0;Vc=Vc+Math.imul(La,id)|0;F=(F=F+Math.imul(La,hf)|0)+Math.imul(ma,id)|0;Yc=Yc+Math.imul(ma,hf)|0;Vc=Vc+Math.imul(pa,Ae)|0;F=(F=F+Math.imul(pa,Mg)|0)+Math.imul(aa,Ae)|0;Yc=Yc+Math.imul(aa,Mg)|0;Vc=Vc+Math.imul(U,fg)|0;F=(F=F+Math.imul(U,vh)|0)+Math.imul(M,
fg)|0;Yc=Yc+Math.imul(M,vh)|0;Vc=Vc+Math.imul(Da,pg)|0;F=(F=F+Math.imul(Da,Ff)|0)+Math.imul(Pa,pg)|0;Yc=Yc+Math.imul(Pa,Ff)|0;Vc=Vc+Math.imul(Aa,xg)|0;F=(F=F+Math.imul(Aa,yg)|0)+Math.imul(na,xg)|0;Yc=Yc+Math.imul(na,yg)|0;Vc=Vc+Math.imul(xa,gg)|0;F=(F=F+Math.imul(xa,rh)|0)+Math.imul(ub,gg)|0;Yc=Yc+Math.imul(ub,rh)|0;db=(Y+(Vc+Math.imul(db,ka)|0)|0)+((8191&(F=(F=F+Math.imul(db,Lh)|0)+Math.imul(la,ka)|0))<<13)|0;Y=((Yc+Math.imul(la,Lh)|0)+(F>>>13)|0)+(db>>>26)|0;db&=67108863;Vc=Math.imul(W,nb);F=(F=
Math.imul(W,qd))+Math.imul(Va,nb)|0;Yc=Math.imul(Va,qd);Vc=Vc+Math.imul(ra,ac)|0;F=(F=F+Math.imul(ra,xe)|0)+Math.imul(qa,ac)|0;Yc=Yc+Math.imul(qa,xe)|0;Vc=Vc+Math.imul(ca,id)|0;F=(F=F+Math.imul(ca,hf)|0)+Math.imul(ib,id)|0;Yc=Yc+Math.imul(ib,hf)|0;Vc=Vc+Math.imul(La,Ae)|0;F=(F=F+Math.imul(La,Mg)|0)+Math.imul(ma,Ae)|0;Yc=Yc+Math.imul(ma,Mg)|0;Vc=Vc+Math.imul(pa,fg)|0;F=(F=F+Math.imul(pa,vh)|0)+Math.imul(aa,fg)|0;Yc=Yc+Math.imul(aa,vh)|0;Vc=Vc+Math.imul(U,pg)|0;F=(F=F+Math.imul(U,Ff)|0)+Math.imul(M,
pg)|0;Yc=Yc+Math.imul(M,Ff)|0;Vc=Vc+Math.imul(Da,xg)|0;F=(F=F+Math.imul(Da,yg)|0)+Math.imul(Pa,xg)|0;Yc=Yc+Math.imul(Pa,yg)|0;Vc=Vc+Math.imul(Aa,gg)|0;F=(F=F+Math.imul(Aa,rh)|0)+Math.imul(na,gg)|0;Yc=Yc+Math.imul(na,rh)|0;la=(Y+(Vc+Math.imul(xa,ka)|0)|0)+((8191&(F=(F=F+Math.imul(xa,Lh)|0)+Math.imul(ub,ka)|0))<<13)|0;Y=((Yc+Math.imul(ub,Lh)|0)+(F>>>13)|0)+(la>>>26)|0;la&=67108863;Vc=Math.imul(W,ac);F=(F=Math.imul(W,xe))+Math.imul(Va,ac)|0;Yc=Math.imul(Va,xe);Vc=Vc+Math.imul(ra,id)|0;F=(F=F+Math.imul(ra,
hf)|0)+Math.imul(qa,id)|0;Yc=Yc+Math.imul(qa,hf)|0;Vc=Vc+Math.imul(ca,Ae)|0;F=(F=F+Math.imul(ca,Mg)|0)+Math.imul(ib,Ae)|0;Yc=Yc+Math.imul(ib,Mg)|0;Vc=Vc+Math.imul(La,fg)|0;F=(F=F+Math.imul(La,vh)|0)+Math.imul(ma,fg)|0;Yc=Yc+Math.imul(ma,vh)|0;Vc=Vc+Math.imul(pa,pg)|0;F=(F=F+Math.imul(pa,Ff)|0)+Math.imul(aa,pg)|0;Yc=Yc+Math.imul(aa,Ff)|0;Vc=Vc+Math.imul(U,xg)|0;F=(F=F+Math.imul(U,yg)|0)+Math.imul(M,xg)|0;Yc=Yc+Math.imul(M,yg)|0;Vc=Vc+Math.imul(Da,gg)|0;F=(F=F+Math.imul(Da,rh)|0)+Math.imul(Pa,gg)|0;
Yc=Yc+Math.imul(Pa,rh)|0;xa=(Y+(Vc+Math.imul(Aa,ka)|0)|0)+((8191&(F=(F=F+Math.imul(Aa,Lh)|0)+Math.imul(na,ka)|0))<<13)|0;Y=((Yc+Math.imul(na,Lh)|0)+(F>>>13)|0)+(xa>>>26)|0;xa&=67108863;Vc=Math.imul(W,id);F=(F=Math.imul(W,hf))+Math.imul(Va,id)|0;Yc=Math.imul(Va,hf);Vc=Vc+Math.imul(ra,Ae)|0;F=(F=F+Math.imul(ra,Mg)|0)+Math.imul(qa,Ae)|0;Yc=Yc+Math.imul(qa,Mg)|0;Vc=Vc+Math.imul(ca,fg)|0;F=(F=F+Math.imul(ca,vh)|0)+Math.imul(ib,fg)|0;Yc=Yc+Math.imul(ib,vh)|0;Vc=Vc+Math.imul(La,pg)|0;F=(F=F+Math.imul(La,
Ff)|0)+Math.imul(ma,pg)|0;Yc=Yc+Math.imul(ma,Ff)|0;Vc=Vc+Math.imul(pa,xg)|0;F=(F=F+Math.imul(pa,yg)|0)+Math.imul(aa,xg)|0;Yc=Yc+Math.imul(aa,yg)|0;Vc=Vc+Math.imul(U,gg)|0;F=(F=F+Math.imul(U,rh)|0)+Math.imul(M,gg)|0;Yc=Yc+Math.imul(M,rh)|0;ub=(Y+(Vc+Math.imul(Da,ka)|0)|0)+((8191&(F=(F=F+Math.imul(Da,Lh)|0)+Math.imul(Pa,ka)|0))<<13)|0;Y=((Yc+Math.imul(Pa,Lh)|0)+(F>>>13)|0)+(ub>>>26)|0;ub&=67108863;Vc=Math.imul(W,Ae);F=(F=Math.imul(W,Mg))+Math.imul(Va,Ae)|0;Yc=Math.imul(Va,Mg);Vc=Vc+Math.imul(ra,fg)|
0;F=(F=F+Math.imul(ra,vh)|0)+Math.imul(qa,fg)|0;Yc=Yc+Math.imul(qa,vh)|0;Vc=Vc+Math.imul(ca,pg)|0;F=(F=F+Math.imul(ca,Ff)|0)+Math.imul(ib,pg)|0;Yc=Yc+Math.imul(ib,Ff)|0;Vc=Vc+Math.imul(La,xg)|0;F=(F=F+Math.imul(La,yg)|0)+Math.imul(ma,xg)|0;Yc=Yc+Math.imul(ma,yg)|0;Vc=Vc+Math.imul(pa,gg)|0;F=(F=F+Math.imul(pa,rh)|0)+Math.imul(aa,gg)|0;Yc=Yc+Math.imul(aa,rh)|0;Aa=(Y+(Vc+Math.imul(U,ka)|0)|0)+((8191&(F=(F=F+Math.imul(U,Lh)|0)+Math.imul(M,ka)|0))<<13)|0;Y=((Yc+Math.imul(M,Lh)|0)+(F>>>13)|0)+(Aa>>>26)|
0;Aa&=67108863;Vc=Math.imul(W,fg);F=(F=Math.imul(W,vh))+Math.imul(Va,fg)|0;Yc=Math.imul(Va,vh);Vc=Vc+Math.imul(ra,pg)|0;F=(F=F+Math.imul(ra,Ff)|0)+Math.imul(qa,pg)|0;Yc=Yc+Math.imul(qa,Ff)|0;Vc=Vc+Math.imul(ca,xg)|0;F=(F=F+Math.imul(ca,yg)|0)+Math.imul(ib,xg)|0;Yc=Yc+Math.imul(ib,yg)|0;Vc=Vc+Math.imul(La,gg)|0;F=(F=F+Math.imul(La,rh)|0)+Math.imul(ma,gg)|0;Yc=Yc+Math.imul(ma,rh)|0;na=(Y+(Vc+Math.imul(pa,ka)|0)|0)+((8191&(F=(F=F+Math.imul(pa,Lh)|0)+Math.imul(aa,ka)|0))<<13)|0;Y=((Yc+Math.imul(aa,Lh)|
0)+(F>>>13)|0)+(na>>>26)|0;na&=67108863;Vc=Math.imul(W,pg);F=(F=Math.imul(W,Ff))+Math.imul(Va,pg)|0;Yc=Math.imul(Va,Ff);Vc=Vc+Math.imul(ra,xg)|0;F=(F=F+Math.imul(ra,yg)|0)+Math.imul(qa,xg)|0;Yc=Yc+Math.imul(qa,yg)|0;Vc=Vc+Math.imul(ca,gg)|0;F=(F=F+Math.imul(ca,rh)|0)+Math.imul(ib,gg)|0;Yc=Yc+Math.imul(ib,rh)|0;Da=(Y+(Vc+Math.imul(La,ka)|0)|0)+((8191&(F=(F=F+Math.imul(La,Lh)|0)+Math.imul(ma,ka)|0))<<13)|0;Y=((Yc+Math.imul(ma,Lh)|0)+(F>>>13)|0)+(Da>>>26)|0;Da&=67108863;Vc=Math.imul(W,xg);F=(F=Math.imul(W,
yg))+Math.imul(Va,xg)|0;Yc=Math.imul(Va,yg);Vc=Vc+Math.imul(ra,gg)|0;F=(F=F+Math.imul(ra,rh)|0)+Math.imul(qa,gg)|0;Yc=Yc+Math.imul(qa,rh)|0;Pa=(Y+(Vc+Math.imul(ca,ka)|0)|0)+((8191&(F=(F=F+Math.imul(ca,Lh)|0)+Math.imul(ib,ka)|0))<<13)|0;Y=((Yc+Math.imul(ib,Lh)|0)+(F>>>13)|0)+(Pa>>>26)|0;Pa&=67108863;Vc=Math.imul(W,gg);F=(F=Math.imul(W,rh))+Math.imul(Va,gg)|0;Yc=Math.imul(Va,rh);U=(Y+(Vc+Math.imul(ra,ka)|0)|0)+((8191&(F=(F=F+Math.imul(ra,Lh)|0)+Math.imul(qa,ka)|0))<<13)|0;Y=((Yc+Math.imul(qa,Lh)|0)+
(F>>>13)|0)+(U>>>26)|0;U&=67108863;M=(Y+Math.imul(W,ka)|0)+((8191&(F=(F=Math.imul(W,Lh))+Math.imul(Va,ka)|0))<<13)|0;return Y=(Math.imul(Va,Lh)+(F>>>13)|0)+(M>>>26)|0,M&=67108863,ea[0]=Pl,ea[1]=En,ea[2]=Om,ea[3]=nm,ea[4]=ls,ea[5]=jj,ea[6]=ms,ea[7]=ns,ea[8]=os,ea[9]=db,ea[10]=la,ea[11]=xa,ea[12]=ub,ea[13]=Aa,ea[14]=na,ea[15]=Da,ea[16]=Pa,ea[17]=U,ea[18]=M,0!==Y&&(ea[19]=Y,Q.length++),Q};Math.imul||(ua=p);b.prototype.mulTo=function(F,Y){var Q=(this||eb).length+F.length;if(10===(this||eb).length&&10===
F.length)F=ua(this||eb,F,Y);else if(63>Q)F=p(this||eb,F,Y);else if(1024>Q){Q=this||eb;Y.negative=F.negative^Q.negative;Y.length=Q.length+F.length;for(var W=0,ka=0,ea=0;ea<Y.length-1;ea++){var la=ka;ka=0;W&=67108863;for(var db=Math.min(ea,F.length-1),ub=Math.max(0,ea-Q.length+1);ub<=db;ub++){var xa=(0|Q.words[ea-ub])*(0|F.words[ub]),na=67108863&xa;W=67108863&(na=na+W|0);ka+=(la=(la=la+(xa/67108864|0)|0)+(na>>>26)|0)>>>26;la&=67108863}Y.words[ea]=W;W=la}F=(0!==W?Y.words[ea]=W:Y.length--,Y.strip())}else Q=
this||eb,F=(new q).mulp(Q,F,Y);return F};q.prototype.makeRBT=function(F){for(var Y=Array(F),Q=b.prototype._countBits(F)-1,W=0;W<F;W++)Y[W]=this.revBin(W,Q,F);return Y};q.prototype.revBin=function(F,Y,Q){if(0===F||F===Q-1)return F;for(var W=Q=0;W<Y;W++)Q|=(1&F)<<Y-W-1,F>>=1;return Q};q.prototype.permute=function(F,Y,Q,W,ka,ea){for(var la=0;la<ea;la++)W[la]=Y[F[la]],ka[la]=Q[F[la]]};q.prototype.transform=function(F,Y,Q,W,ka,ea){this.permute(ea,F,Y,Q,W,ka);for(F=1;F<ka;F<<=1){Y=F<<1;ea=Math.cos(2*Math.PI/
Y);for(var la=Math.sin(2*Math.PI/Y),db=0;db<ka;db+=Y)for(var ub=ea,xa=la,na=0;na<F;na++){var Aa=Q[db+na],Pa=W[db+na],Da=Q[db+na+F],M=W[db+na+F],U=ub*Da-xa*M;M=ub*M+xa*Da;Da=U;Q[db+na]=Aa+Da;W[db+na]=Pa+M;Q[db+na+F]=Aa-Da;W[db+na+F]=Pa-M;na!==Y&&(U=ea*ub-la*xa,xa=ea*xa+la*ub,ub=U)}}};q.prototype.guessLen13b=function(F,Y){F=1|Math.max(Y,F);Y=1&F;var Q=0;for(F=F/2|0;F;F>>>=1)Q++;return 1<<Q+1+Y};q.prototype.conjugate=function(F,Y,Q){if(!(1>=Q))for(var W=0;W<Q/2;W++){var ka=F[W];F[W]=F[Q-W-1];F[Q-W-1]=
ka;ka=Y[W];Y[W]=-Y[Q-W-1];Y[Q-W-1]=-ka}};q.prototype.normalize13b=function(F,Y){for(var Q=0,W=0;W<Y/2;W++)Q=8192*Math.round(F[2*W+1]/Y)+Math.round(F[2*W]/Y)+Q,F[W]=67108863&Q,Q=67108864>Q?0:Q/67108864|0;return F};q.prototype.convert13b=function(F,Y,Q,W){for(var ka=0,ea=0;ea<Y;ea++)ka+=0|F[ea],Q[2*ea]=8191&ka,ka>>>=13,Q[2*ea+1]=8191&ka,ka>>>=13;for(ea=2*Y;ea<W;++ea)Q[ea]=0;d(0===ka);d(0==(-8192&ka))};q.prototype.stub=function(F){for(var Y=Array(F),Q=0;Q<F;Q++)Y[Q]=0;return Y};q.prototype.mulp=function(F,
Y,Q){var W=2*this.guessLen13b(F.length,Y.length),ka=this.makeRBT(W),ea=this.stub(W),la=Array(W),db=Array(W),ub=Array(W),xa=Array(W),na=Array(W),Aa=Array(W),Pa=Q.words;Pa.length=W;this.convert13b(F.words,F.length,la,W);this.convert13b(Y.words,Y.length,xa,W);this.transform(la,ea,db,ub,W,ka);this.transform(xa,ea,na,Aa,W,ka);for(la=0;la<W;la++)xa=db[la]*na[la]-ub[la]*Aa[la],ub[la]=db[la]*Aa[la]+ub[la]*na[la],db[la]=xa;return this.conjugate(db,ub,W),this.transform(db,ub,Pa,ea,W,ka),this.conjugate(Pa,ea,
W),this.normalize13b(Pa,W),Q.negative=F.negative^Y.negative,Q.length=F.length+Y.length,Q.strip()};b.prototype.mul=function(F){var Y=new b(null);return Y.words=Array((this||eb).length+F.length),this.mulTo(F,Y)};b.prototype.mulf=function(F){var Y=new b(null);Y.words=Array((this||eb).length+F.length);var Q=this||eb;return(new q).mulp(Q,F,Y)};b.prototype.imul=function(F){return this.clone().mulTo(F,this||eb)};b.prototype.imuln=function(F){d("number"==typeof F);d(67108864>F);for(var Y=0,Q=0;Q<(this||eb).length;Q++){var W=
(0|(this||eb).words[Q])*F,ka=(67108863&W)+(67108863&Y);Y>>=26;Y+=W/67108864|0;Y+=ka>>>26;(this||eb).words[Q]=67108863&ka}return 0!==Y&&((this||eb).words[Q]=Y,(this||eb).length++),this||eb};b.prototype.muln=function(F){return this.clone().imuln(F)};b.prototype.sqr=function(){return this.mul(this||eb)};b.prototype.isqr=function(){return this.imul(this.clone())};b.prototype.pow=function(F){for(var Y=Array(F.bitLength()),Q=0;Q<Y.length;Q++){var W=Q%26;Y[Q]=(F.words[Q/26|0]&1<<W)>>>W}if(0===Y.length)return new b(1);
F=this||eb;for(Q=0;Q<Y.length&&0===Y[Q];Q++,F=F.sqr());if(++Q<Y.length)for(W=F.sqr();Q<Y.length;Q++,W=W.sqr())0!==Y[Q]&&(F=F.mul(W));return F};b.prototype.iushln=function(F){d("number"==typeof F&&0<=F);var Y=F%26,Q=(F-Y)/26,W=67108863>>>26-Y<<26-Y;if(0!==Y){var ka=0;for(F=0;F<(this||eb).length;F++){var ea=(this||eb).words[F]&W;(this||eb).words[F]=(0|(this||eb).words[F])-ea<<Y|ka;ka=ea>>>26-Y}ka&&((this||eb).words[F]=ka,(this||eb).length++)}if(0!==Q){for(F=(this||eb).length-1;0<=F;F--)(this||eb).words[F+
Q]=(this||eb).words[F];for(F=0;F<Q;F++)(this||eb).words[F]=0;(this||eb).length+=Q}return this.strip()};b.prototype.ishln=function(F){return d(0===(this||eb).negative),this.iushln(F)};b.prototype.iushrn=function(F,Y,Q){d("number"==typeof F&&0<=F);Y=Y?(Y-Y%26)/26:0;var W=F%26,ka=Math.min((F-W)/26,(this||eb).length);F=67108863^67108863>>>W<<W;if(Y-=ka,Y=Math.max(0,Y),Q){for(var ea=0;ea<ka;ea++)Q.words[ea]=(this||eb).words[ea];Q.length=ka}if(0!==ka)if((this||eb).length>ka)for((this||eb).length-=ka,ea=
0;ea<(this||eb).length;ea++)(this||eb).words[ea]=(this||eb).words[ea+ka];else(this||eb).words[0]=0,(this||eb).length=1;ka=0;for(ea=(this||eb).length-1;0<=ea&&(0!==ka||ea>=Y);ea--){var la=0|(this||eb).words[ea];(this||eb).words[ea]=ka<<26-W|la>>>W;ka=la&F}return Q&&0!==ka&&(Q.words[Q.length++]=ka),0===(this||eb).length&&((this||eb).words[0]=0,(this||eb).length=1),this.strip()};b.prototype.ishrn=function(F,Y,Q){return d(0===(this||eb).negative),this.iushrn(F,Y,Q)};b.prototype.shln=function(F){return this.clone().ishln(F)};
b.prototype.ushln=function(F){return this.clone().iushln(F)};b.prototype.shrn=function(F){return this.clone().ishrn(F)};b.prototype.ushrn=function(F){return this.clone().iushrn(F)};b.prototype.testn=function(F){d("number"==typeof F&&0<=F);var Y=F%26;F=(F-Y)/26;return!((this||eb).length<=F)&&!!((this||eb).words[F]&1<<Y)};b.prototype.imaskn=function(F){d("number"==typeof F&&0<=F);var Y=F%26;F=(F-Y)/26;if(d(0===(this||eb).negative,"imaskn works only with positive numbers"),(this||eb).length<=F)return this||
eb;if(0!==Y&&F++,(this||eb).length=Math.min(F,(this||eb).length),0!==Y)(this||eb).words[(this||eb).length-1]&=67108863^67108863>>>Y<<Y;return this.strip()};b.prototype.maskn=function(F){return this.clone().imaskn(F)};b.prototype.iaddn=function(F){return d("number"==typeof F),d(67108864>F),0>F?this.isubn(-F):0!==(this||eb).negative?1===(this||eb).length&&(0|(this||eb).words[0])<F?((this||eb).words[0]=F-(0|(this||eb).words[0]),(this||eb).negative=0,this||eb):((this||eb).negative=0,this.isubn(F),(this||
eb).negative=1,this||eb):this._iaddn(F)};b.prototype._iaddn=function(F){(this||eb).words[0]+=F;for(F=0;F<(this||eb).length&&67108864<=(this||eb).words[F];F++)(this||eb).words[F]-=67108864,F===(this||eb).length-1?(this||eb).words[F+1]=1:(this||eb).words[F+1]++;return(this||eb).length=Math.max((this||eb).length,F+1),this||eb};b.prototype.isubn=function(F){if(d("number"==typeof F),d(67108864>F),0>F)return this.iaddn(-F);if(0!==(this||eb).negative)return(this||eb).negative=0,this.iaddn(F),(this||eb).negative=
1,this||eb;if((this||eb).words[0]-=F,1===(this||eb).length&&0>(this||eb).words[0])(this||eb).words[0]=-(this||eb).words[0],(this||eb).negative=1;else for(F=0;F<(this||eb).length&&0>(this||eb).words[F];F++)(this||eb).words[F]+=67108864,--(this||eb).words[F+1];return this.strip()};b.prototype.addn=function(F){return this.clone().iaddn(F)};b.prototype.subn=function(F){return this.clone().isubn(F)};b.prototype.iabs=function(){return(this||eb).negative=0,this||eb};b.prototype.abs=function(){return this.clone().iabs()};
b.prototype._ishlnsubmul=function(F,Y,Q){var W;this._expand(F.length+Q);var ka=0;for(W=0;W<F.length;W++){var ea=(0|(this||eb).words[W+Q])+ka;ka=(0|F.words[W])*Y;ka=((ea-=67108863&ka)>>26)-(ka/67108864|0);(this||eb).words[W+Q]=67108863&ea}for(;W<(this||eb).length-Q;W++)ka=(ea=(0|(this||eb).words[W+Q])+ka)>>26,(this||eb).words[W+Q]=67108863&ea;if(0===ka)return this.strip();d(-1===ka);for(W=ka=0;W<(this||eb).length;W++)ka=(ea=-(0|(this||eb).words[W])+ka)>>26,(this||eb).words[W]=67108863&ea;return(this||
eb).negative=1,this.strip()};b.prototype._wordDiv=function(F,Y){var Q=((this||eb).length,F.length),W=this.clone(),ka=0|F.words[F.length-1];0!==(Q=26-this._countBits(ka))&&(F=F.ushln(Q),W.iushln(Q),ka=0|F.words[F.length-1]);var ea,la=W.length-F.length;if("mod"!==Y){(ea=new b(null)).length=la+1;ea.words=Array(ea.length);for(var db=0;db<ea.length;db++)ea.words[db]=0}db=W.clone()._ishlnsubmul(F,1,la);0===db.negative&&(W=db,ea&&(ea.words[la]=1));for(--la;0<=la;la--){db=67108864*(0|W.words[F.length+la])+
(0|W.words[F.length+la-1]);db=Math.min(db/ka|0,67108863);for(W._ishlnsubmul(F,db,la);0!==W.negative;)db--,W.negative=0,W._ishlnsubmul(F,1,la),W.isZero()||(W.negative^=1);ea&&(ea.words[la]=db)}return ea&&ea.strip(),W.strip(),"div"!==Y&&0!==Q&&W.iushrn(Q),{div:ea||null,mod:W}};b.prototype.divmod=function(F,Y,Q){return d(!F.isZero()),this.isZero()?{div:new b(0),mod:new b(0)}:0!==(this||eb).negative&&0===F.negative?(ea=this.neg().divmod(F,Y),"mod"!==Y&&(W=ea.div.neg()),"div"!==Y&&(ka=ea.mod.neg(),Q&&
0!==ka.negative&&ka.iadd(F)),{div:W,mod:ka}):0===(this||eb).negative&&0!==F.negative?(ea=this.divmod(F.neg(),Y),"mod"!==Y&&(W=ea.div.neg()),{div:W,mod:ea.mod}):0!=((this||eb).negative&F.negative)?(ea=this.neg().divmod(F.neg(),Y),"div"!==Y&&(ka=ea.mod.neg(),Q&&0!==ka.negative&&ka.isub(F)),{div:ea.div,mod:ka}):F.length>(this||eb).length||0>this.cmp(F)?{div:new b(0),mod:this||eb}:1===F.length?"div"===Y?{div:this.divn(F.words[0]),mod:null}:"mod"===Y?{div:null,mod:new b(this.modn(F.words[0]))}:{div:this.divn(F.words[0]),
mod:new b(this.modn(F.words[0]))}:this._wordDiv(F,Y);var W,ka,ea};b.prototype.div=function(F){return this.divmod(F,"div",!1).div};b.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod};b.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod};b.prototype.divRound=function(F){var Y=this.divmod(F);if(Y.mod.isZero())return Y.div;var Q=0!==Y.div.negative?Y.mod.isub(F):Y.mod,W=F.ushrn(1);F=F.andln(1);Q=Q.cmp(W);return 0>Q||1===F&&0===Q?Y.div:0!==Y.div.negative?Y.div.isubn(1):Y.div.iaddn(1)};
b.prototype.modn=function(F){d(67108863>=F);for(var Y=67108864%F,Q=0,W=(this||eb).length-1;0<=W;W--)Q=(Y*Q+(0|(this||eb).words[W]))%F;return Q};b.prototype.idivn=function(F){d(67108863>=F);for(var Y=0,Q=(this||eb).length-1;0<=Q;Q--)Y=(0|(this||eb).words[Q])+67108864*Y,(this||eb).words[Q]=Y/F|0,Y%=F;return this.strip()};b.prototype.divn=function(F){return this.clone().idivn(F)};b.prototype.egcd=function(F){d(0===F.negative);d(!F.isZero());var Y=this||eb,Q=F.clone();Y=0!==Y.negative?Y.umod(F):Y.clone();
F=new b(1);for(var W=new b(0),ka=new b(0),ea=new b(1),la=0;Y.isEven()&&Q.isEven();)Y.iushrn(1),Q.iushrn(1),++la;for(var db=Q.clone(),ub=Y.clone();!Y.isZero();){for(var xa=0,na=1;0==(Y.words[0]&na)&&26>xa;++xa,na<<=1);if(0<xa)for(Y.iushrn(xa);0<xa--;)(F.isOdd()||W.isOdd())&&(F.iadd(db),W.isub(ub)),F.iushrn(1),W.iushrn(1);xa=0;for(na=1;0==(Q.words[0]&na)&&26>xa;++xa,na<<=1);if(0<xa)for(Q.iushrn(xa);0<xa--;)(ka.isOdd()||ea.isOdd())&&(ka.iadd(db),ea.isub(ub)),ka.iushrn(1),ea.iushrn(1);0<=Y.cmp(Q)?(Y.isub(Q),
F.isub(ka),W.isub(ea)):(Q.isub(Y),ka.isub(F),ea.isub(W))}return{a:ka,b:ea,gcd:Q.iushln(la)}};b.prototype._invmp=function(F){d(0===F.negative);d(!F.isZero());var Y=this||eb,Q=F.clone();Y=0!==Y.negative?Y.umod(F):Y.clone();for(var W,ka=new b(1),ea=new b(0),la=Q.clone();0<Y.cmpn(1)&&0<Q.cmpn(1);){for(var db=0,ub=1;0==(Y.words[0]&ub)&&26>db;++db,ub<<=1);if(0<db)for(Y.iushrn(db);0<db--;)ka.isOdd()&&ka.iadd(la),ka.iushrn(1);db=0;for(ub=1;0==(Q.words[0]&ub)&&26>db;++db,ub<<=1);if(0<db)for(Q.iushrn(db);0<
db--;)ea.isOdd()&&ea.iadd(la),ea.iushrn(1);0<=Y.cmp(Q)?(Y.isub(Q),ka.isub(ea)):(Q.isub(Y),ea.isub(ka))}return 0>(W=0===Y.cmpn(1)?ka:ea).cmpn(0)&&W.iadd(F),W};b.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var Y=this.clone();F=F.clone();Y.negative=0;for(var Q=F.negative=0;Y.isEven()&&F.isEven();Q++)Y.iushrn(1),F.iushrn(1);for(;;){for(;Y.isEven();)Y.iushrn(1);for(;F.isEven();)F.iushrn(1);var W=Y.cmp(F);if(0>W)W=Y,Y=F,F=W;else if(0===W||0===F.cmpn(1))break;
Y.isub(F)}return F.iushln(Q)};b.prototype.invm=function(F){return this.egcd(F).a.umod(F)};b.prototype.isEven=function(){return 0==(1&(this||eb).words[0])};b.prototype.isOdd=function(){return 1==(1&(this||eb).words[0])};b.prototype.andln=function(F){return(this||eb).words[0]&F};b.prototype.bincn=function(F){d("number"==typeof F);var Y=F%26;F=(F-Y)/26;Y=1<<Y;if((this||eb).length<=F)return this._expand(F+1),(this||eb).words[F]|=Y,this||eb;for(;0!==Y&&F<(this||eb).length;F++){var Q=0|(this||eb).words[F];
Y=(Q+=Y)>>>26;Q&=67108863;(this||eb).words[F]=Q}return 0!==Y&&((this||eb).words[F]=Y,(this||eb).length++),this||eb};b.prototype.isZero=function(){return 1===(this||eb).length&&0===(this||eb).words[0]};b.prototype.cmpn=function(F){var Y=0>F;if(0!==(this||eb).negative&&!Y)return-1;if(0===(this||eb).negative&&Y)return 1;(this.strip(),1<(this||eb).length)?F=1:(Y&&(F=-F),d(67108863>=F,"Number is too big"),Y=0|(this||eb).words[0],F=Y===F?0:Y<F?-1:1);return 0!==(this||eb).negative?0|-F:F};b.prototype.cmp=
function(F){if(0!==(this||eb).negative&&0===F.negative)return-1;if(0===(this||eb).negative&&0!==F.negative)return 1;F=this.ucmp(F);return 0!==(this||eb).negative?0|-F:F};b.prototype.ucmp=function(F){if((this||eb).length>F.length)return 1;if((this||eb).length<F.length)return-1;for(var Y=0,Q=(this||eb).length-1;0<=Q;Q--){var W=0|(this||eb).words[Q],ka=0|F.words[Q];if(W!==ka){W<ka?Y=-1:W>ka&&(Y=1);break}}return Y};b.prototype.gtn=function(F){return 1===this.cmpn(F)};b.prototype.gt=function(F){return 1===
this.cmp(F)};b.prototype.gten=function(F){return 0<=this.cmpn(F)};b.prototype.gte=function(F){return 0<=this.cmp(F)};b.prototype.ltn=function(F){return-1===this.cmpn(F)};b.prototype.lt=function(F){return-1===this.cmp(F)};b.prototype.lten=function(F){return 0>=this.cmpn(F)};b.prototype.lte=function(F){return 0>=this.cmp(F)};b.prototype.eqn=function(F){return 0===this.cmpn(F)};b.prototype.eq=function(F){return 0===this.cmp(F)};b.red=function(F){return new D(F)};b.prototype.toRed=function(F){return d(!(this||
eb).red,"Already a number in reduction context"),d(0===(this||eb).negative,"red works only with positives"),F.convertTo(this||eb)._forceRed(F)};b.prototype.fromRed=function(){return d((this||eb).red,"fromRed works only with numbers in reduction context"),(this||eb).red.convertFrom(this||eb)};b.prototype._forceRed=function(F){return(this||eb).red=F,this||eb};b.prototype.forceRed=function(F){return d(!(this||eb).red,"Already a number in reduction context"),this._forceRed(F)};b.prototype.redAdd=function(F){return d((this||
eb).red,"redAdd works only with red numbers"),(this||eb).red.add(this||eb,F)};b.prototype.redIAdd=function(F){return d((this||eb).red,"redIAdd works only with red numbers"),(this||eb).red.iadd(this||eb,F)};b.prototype.redSub=function(F){return d((this||eb).red,"redSub works only with red numbers"),(this||eb).red.sub(this||eb,F)};b.prototype.redISub=function(F){return d((this||eb).red,"redISub works only with red numbers"),(this||eb).red.isub(this||eb,F)};b.prototype.redShl=function(F){return d((this||
eb).red,"redShl works only with red numbers"),(this||eb).red.shl(this||eb,F)};b.prototype.redMul=function(F){return d((this||eb).red,"redMul works only with red numbers"),(this||eb).red._verify2(this||eb,F),(this||eb).red.mul(this||eb,F)};b.prototype.redIMul=function(F){return d((this||eb).red,"redMul works only with red numbers"),(this||eb).red._verify2(this||eb,F),(this||eb).red.imul(this||eb,F)};b.prototype.redSqr=function(){return d((this||eb).red,"redSqr works only with red numbers"),(this||
eb).red._verify1(this||eb),(this||eb).red.sqr(this||eb)};b.prototype.redISqr=function(){return d((this||eb).red,"redISqr works only with red numbers"),(this||eb).red._verify1(this||eb),(this||eb).red.isqr(this||eb)};b.prototype.redSqrt=function(){return d((this||eb).red,"redSqrt works only with red numbers"),(this||eb).red._verify1(this||eb),(this||eb).red.sqrt(this||eb)};b.prototype.redInvm=function(){return d((this||eb).red,"redInvm works only with red numbers"),(this||eb).red._verify1(this||eb),
(this||eb).red.invm(this||eb)};b.prototype.redNeg=function(){return d((this||eb).red,"redNeg works only with red numbers"),(this||eb).red._verify1(this||eb),(this||eb).red.neg(this||eb)};b.prototype.redPow=function(F){return d((this||eb).red&&!F.red,"redPow(normalNum)"),(this||eb).red._verify1(this||eb),(this||eb).red.pow(this||eb,F)};var Fa={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var F=new b(null);return F.words=Array(Math.ceil((this||eb).n/13)),F};u.prototype.ireduce=
function(F){do{this.split(F,(this||eb).tmp);var Y=(F=(F=this.imulK(F)).iadd((this||eb).tmp)).bitLength()}while(Y>(this||eb).n);Y=Y<(this||eb).n?-1:F.ucmp((this||eb).p);return 0===Y?(F.words[0]=0,F.length=1):0<Y?F.isub((this||eb).p):F.strip(),F};u.prototype.split=function(F,Y){F.iushrn((this||eb).n,0,Y)};u.prototype.imulK=function(F){return F.imul((this||eb).k)};k(w,u);w.prototype.split=function(F,Y){for(var Q=Math.min(F.length,9),W=0;W<Q;W++)Y.words[W]=F.words[W];if(Y.length=Q,9>=F.length)return F.words[0]=
0,F.length=1,void 0;Q=F.words[9];Y.words[Y.length++]=4194303&Q;for(W=10;W<F.length;W++)Y=0|F.words[W],F.words[W-10]=(4194303&Y)<<4|Q>>>22,Q=Y;Q>>>=22;F.words[W-10]=Q;0===Q&&10<F.length?F.length-=10:F.length-=9};w.prototype.imulK=function(F){F.words[F.length]=0;F.words[F.length+1]=0;F.length+=2;for(var Y=0,Q=0;Q<F.length;Q++){var W=0|F.words[Q];Y+=977*W;F.words[Q]=67108863&Y;Y=64*W+(Y/67108864|0)}return 0===F.words[F.length-1]&&(F.length--,0===F.words[F.length-1]&&F.length--),F};k(y,u);k(A,u);k(C,
u);C.prototype.imulK=function(F){for(var Y=0,Q=0;Q<F.length;Q++){Y=19*(0|F.words[Q])+Y;var W=67108863&Y;Y>>>=26;F.words[Q]=W}return 0!==Y&&(F.words[F.length++]=Y),F};b._prime=function(F){if(Fa[F])return Fa[F];if("k256"===F)var Y=new w;else if("p224"===F)Y=new y;else if("p192"===F)Y=new A;else{if("p25519"!==F)throw Error("Unknown prime "+F);Y=new C}return Fa[F]=Y,Y};D.prototype._verify1=function(F){d(0===F.negative,"red works only with positives");d(F.red,"red works only with red numbers")};D.prototype._verify2=
function(F,Y){d(0==(F.negative|Y.negative),"red works only with positives");d(F.red&&F.red===Y.red,"red works only with red numbers")};D.prototype.imod=function(F){return(this||eb).prime?(this||eb).prime.ireduce(F)._forceRed(this||eb):F.umod((this||eb).m)._forceRed(this||eb)};D.prototype.neg=function(F){return F.isZero()?F.clone():(this||eb).m.sub(F)._forceRed(this||eb)};D.prototype.add=function(F,Y){this._verify2(F,Y);F=F.add(Y);return 0<=F.cmp((this||eb).m)&&F.isub((this||eb).m),F._forceRed(this||
eb)};D.prototype.iadd=function(F,Y){this._verify2(F,Y);F=F.iadd(Y);return 0<=F.cmp((this||eb).m)&&F.isub((this||eb).m),F};D.prototype.sub=function(F,Y){this._verify2(F,Y);F=F.sub(Y);return 0>F.cmpn(0)&&F.iadd((this||eb).m),F._forceRed(this||eb)};D.prototype.isub=function(F,Y){this._verify2(F,Y);F=F.isub(Y);return 0>F.cmpn(0)&&F.iadd((this||eb).m),F};D.prototype.shl=function(F,Y){return this._verify1(F),this.imod(F.ushln(Y))};D.prototype.imul=function(F,Y){return this._verify2(F,Y),this.imod(F.imul(Y))};
D.prototype.mul=function(F,Y){return this._verify2(F,Y),this.imod(F.mul(Y))};D.prototype.isqr=function(F){return this.imul(F,F.clone())};D.prototype.sqr=function(F){return this.mul(F,F)};D.prototype.sqrt=function(F){if(F.isZero())return F.clone();var Y=(this||eb).m.andln(3);if(d(1==Y%2),3===Y)return Y=(this||eb).m.add(new b(1)).iushrn(2),this.pow(F,Y);for(var Q=(this||eb).m.subn(1),W=0;!Q.isZero()&&0===Q.andln(1);)W++,Q.iushrn(1);d(!Q.isZero());Y=(new b(1)).toRed(this||eb);var ka=Y.redNeg(),ea=(this||
eb).m.subn(1).iushrn(1),la=(this||eb).m.bitLength();for(la=(new b(2*la*la)).toRed(this||eb);0!==this.pow(la,ea).cmp(ka);)la.redIAdd(ka);ea=this.pow(la,Q);ka=this.pow(F,Q.addn(1).iushrn(1));F=this.pow(F,Q);for(Q=W;0!==F.cmp(Y);){la=F;for(W=0;0!==la.cmp(Y);W++)la=la.redSqr();d(W<Q);ea=this.pow(ea,(new b(1)).iushln(Q-W-1));ka=ka.redMul(ea);ea=ea.redSqr();F=F.redMul(ea);Q=W}return ka};D.prototype.invm=function(F){F=F._invmp((this||eb).m);return 0!==F.negative?(F.negative=0,this.imod(F).redNeg()):this.imod(F)};
D.prototype.pow=function(F,Y){if(Y.isZero())return(new b(1)).toRed(this||eb);if(0===Y.cmpn(1))return F.clone();var Q=Array(16);Q[0]=(new b(1)).toRed(this||eb);Q[1]=F;for(var W=2;W<Q.length;W++)Q[W]=this.mul(Q[W-1],F);F=Q[0];var ka=0,ea=0,la=Y.bitLength()%26;0===la&&(la=26);for(W=Y.length-1;0<=W;W--){var db=Y.words[W];for(--la;0<=la;la--){var ub=db>>la&1;F!==Q[0]&&(F=this.sqr(F));0!==ub||0!==ka?(ka<<=1,ka|=ub,(4===++ea||0===W&&0===la)&&(F=this.mul(F,Q[ka]),ea=0,ka=0)):ea=0}la=26}return F};D.prototype.convertTo=
function(F){var Y=F.umod((this||eb).m);return Y===F?Y.clone():Y};D.prototype.convertFrom=function(F){F=F.clone();return F.red=null,F};b.mont=function(F){return new L(F)};k(L,D);L.prototype.convertTo=function(F){return this.imod(F.ushln((this||eb).shift))};L.prototype.convertFrom=function(F){F=this.imod(F.mul((this||eb).rinv));return F.red=null,F};L.prototype.imul=function(F,Y){if(F.isZero()||Y.isZero())return F.words[0]=0,F.length=1,F;F=F.imul(Y);Y=F.maskn((this||eb).shift).mul((this||eb).minv).imaskn((this||
eb).shift).mul((this||eb).m);Y=F=F.isub(Y).iushrn((this||eb).shift);return 0<=F.cmp((this||eb).m)?Y=F.isub((this||eb).m):0>F.cmpn(0)&&(Y=F.iadd((this||eb).m)),Y._forceRed(this||eb)};L.prototype.mul=function(F,Y){if(F.isZero()||Y.isZero())return(new b(0))._forceRed(this||eb);F=F.mul(Y);Y=F.maskn((this||eb).shift).mul((this||eb).minv).imaskn((this||eb).shift).mul((this||eb).m);Y=F=F.isub(Y).iushrn((this||eb).shift);return 0<=F.cmp((this||eb).m)?Y=F.isub((this||eb).m):0>F.cmpn(0)&&(Y=F.iadd((this||eb).m)),
Y._forceRed(this||eb)};L.prototype.invm=function(F){return this.imod(F._invmp((this||eb).m).mul((this||eb).r2))._forceRed(this||eb)}}(b4,a4);var Oj=b4.exports,xI,FQ,c4=Object.freeze({}),OE="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;if((xI=function(n){return FQ||(FQ=new Ir(null)),FQ.generate(n)}).Rand=Ir,Ir.prototype.generate=function(n){return this._rand(n)},Ir.prototype._rand=function(n){if((this||OE).rand.getBytes)return(this||OE).rand.getBytes(n);n=new Uint8Array(n);
for(var a=0;a<n.length;a++)n[a]=(this||OE).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Ir.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?Ir.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),n}:"object"==typeof window&&(Ir.prototype._rand=function(){throw Error("Not implemented yet");});else try{if("function"!=typeof c4.randomBytes)throw Error("Not supported");
Ir.prototype._rand=function(n){return c4.randomBytes(n)}}catch(n){}var OX="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Nu=Oj,saa=xI;Jr.create=function(n){return new Jr(n)};Jr.prototype._randbelow=function(n){var a=n.bitLength();a=Math.ceil(a/8);do var d=new Nu((this||OX).rand.generate(a));while(0<=d.cmp(n));return d};Jr.prototype._randrange=function(n,a){a=a.sub(n);return n.add(this._randbelow(a))};Jr.prototype.test=function(n,a,d){var k=n.bitLength(),b=Nu.mont(n),
e=(new Nu(1)).toRed(b);a||(a=Math.max(1,k/48|0));k=n.subn(1);for(var l=0;!k.testn(l);l++);n=n.shrn(l);for(var p=k.toRed(b);0<a;a--){var q=this._randrange(new Nu(2),k);d&&d(q);q=q.toRed(b).redPow(n);if(0!==q.cmp(e)&&0!==q.cmp(p)){for(var u=1;u<l;u++){if(0===(q=q.redSqr()).cmp(e))return!1;if(0===q.cmp(p))break}if(u===l)return!1}}return!0};Jr.prototype.getDivisor=function(n,a){var d=n.bitLength(),k=Nu.mont(n),b=(new Nu(1)).toRed(k);a||(a=Math.max(1,d/48|0));d=n.subn(1);for(var e=0;!d.testn(e);e++);for(var l=
n.shrn(e),p=d.toRed(k);0<a;a--){var q=this._randrange(new Nu(2),d),u=n.gcd(q);if(0!==u.cmpn(1))return u;q=q.toRed(k).redPow(l);if(0!==q.cmp(b)&&0!==q.cmp(p)){for(u=1;u<e;u++){if(0===(q=q.redSqr()).cmp(b))return q.fromRed().subn(1).gcd(n);if(0===q.cmp(p))break}if(u===e)return q.redSqr().fromRed().subn(1).gcd(n)}}return!1};var taa=rs;Lz.simpleSieve=vM;Lz.fermatTest=xM;var rl=Oj,yaa=new rl(24),QX=new Jr,uaa=new rl(1),yM=new rl(2),vaa=new rl(5),waa=(new rl(16),new rl(8),new rl(10)),xaa=new rl(3),zaa=
(new rl(7),new rl(11)),PX=new rl(4),wM=(new rl(12),null),Rh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dp=Ng.Buffer,jn=Oj,d4=new Jr,Hja=new jn(24),Ija=new jn(11),Jja=new jn(10),Kja=new jn(3),Lja=new jn(7),yI={};Object.defineProperty(go.prototype,"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||Rh)._primeCode){var n=(this||Rh).__prime;var a=(this||Rh).__gen.toString("hex"),d=[a,n.toString(16)].join("_");if(d in yI)n=yI[d];else{var k,b=0;if(!n.isEven()&&
Lz.simpleSieve&&Lz.fermatTest(n)&&d4.test(n)){switch(d4.test(n.shrn(1))||(b+=2),a){case "02":n.mod(Hja).cmp(Ija)&&(b+=8);break;case "05":(k=n.mod(Jja)).cmp(Kja)&&k.cmp(Lja)&&(b+=8);break;default:b+=4}n=(yI[d]=b,b)}else n=(b+=1,b+="02"===a||"05"===a?8:4,yI[d]=b,b)}(this||Rh)._primeCode=n}return(this||Rh)._primeCode}});go.prototype.generateKeys=function(){return(this||Rh)._priv||((this||Rh)._priv=new jn(rs((this||Rh)._primeLen))),(this||Rh)._pub=(this||Rh)._gen.toRed((this||Rh)._prime).redPow((this||
Rh)._priv).fromRed(),this.getPublicKey()};go.prototype.computeSecret=function(n){n=(new jn(n)).toRed((this||Rh)._prime).redPow((this||Rh)._priv).fromRed();n=new dp(n.toArray());var a=this.getPrime();n.length<a.length&&(a=new dp(a.length-n.length),a.fill(0),n=dp.concat([a,n]));return n};go.prototype.getPublicKey=function(n){return PE((this||Rh)._pub,n)};go.prototype.getPrivateKey=function(n){return PE((this||Rh)._priv,n)};go.prototype.getPrime=function(n){return PE((this||Rh).__prime,n)};go.prototype.getGenerator=
function(n){return PE((this||Rh)._gen,n)};go.prototype.setGenerator=function(n,a){return a=a||"utf8",dp.isBuffer(n)||(n=new dp(n,a)),(this||Rh).__gen=n,(this||Rh)._gen=new jn(n),this||Rh};var e4,f4,g4,us=Ng.Buffer,h4={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},
modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
Mja={binary:!0,hex:!0,base64:!0};var Nja=e4=f4=function(n){var a=new us(h4[n].prime,"hex");n=new us(h4[n].gen,"hex");return new go(a,n)};var Oja=g4=function e(a,d,k,b){return us.isBuffer(d)||void 0===Mja[d]?e(a,"binary",d,k):(d=d||"binary",b=b||"binary",k=k||new us([2]),us.isBuffer(k)||(k=new us(k,b)),"number"==typeof a?new go(Lz(a,k),k,!0):(us.isBuffer(a)||(a=new us(a,d)),new go(a,k,!0)))};var Caa=Ng.Buffer,Kr=Oj,SX=rs;QE.getr=RX;var vs={toArray:function(a,d){if(Array.isArray(a))return a.slice();
if(!a)return[];var k=[];if("string"!=typeof a){for(d=0;d<a.length;d++)k[d]=0|a[d];return k}if("hex"===d)for(0!=(a=a.replace(/[^a-z0-9]+/gi,"")).length%2&&(a="0"+a),d=0;d<a.length;d+=2)k.push(parseInt(a[d]+a[d+1],16));else for(d=0;d<a.length;d++){var b=a.charCodeAt(d),e=b>>8;b&=255;e?k.push(e,b):k.push(b)}return k}};vs.zero2=TX;vs.toHex=UX;vs.encode=function(a,d){return"hex"===d?UX(a):a};var ih={},Pja=Oj;ih.assert=pn;ih.toArray=vs.toArray;ih.zero2=vs.zero2;ih.toHex=vs.toHex;ih.encode=vs.encode;ih.getNAF=
function(a,d,k){k=Array(Math.max(a.bitLength(),k)+1);k.fill(0);d=1<<d+1;a=a.clone();for(var b=0;b<k.length;b++){var e,l=a.andln(d-1);a.isOdd()?(e=l>(d>>1)-1?(d>>1)-l:l,a.isubn(e)):e=0;k[b]=e;a.iushrn(1)}return k};ih.getJSF=function(a,d){var k=[[],[]];a=a.clone();d=d.clone();for(var b=0,e=0;0<a.cmpn(-b)||0<d.cmpn(-e);){var l;var p=a.andln(3)+b&3;var q=d.andln(3)+e&3;var u=(3===p&&(p=-1),3===q&&(q=-1),0==(1&p))?0:3!==(l=a.andln(7)+b&7)&&5!==l||2!==q?p:-p;p=(k[0].push(u),0==(1&q))?0:3!==(l=d.andln(7)+
e&7)&&5!==l||2!==p?q:-q;k[1].push(p);2*b===u+1&&(b=1-b);2*e===p+1&&(e=1-e);a.iushrn(1);d.iushrn(1)}return k};ih.cachedProperty=function(a,d,k){var b="_"+d;a.prototype[d]=function(){return void 0!==this[b]?this[b]:this[b]=k.call(this)}};ih.parseBytes=function(a){return"string"==typeof a?ih.toArray(a,"hex"):a};ih.intFromLE=function(a){return new Pja(a,"hex","le")};var RE=Oj,Daa=ih.assert;Xt.prototype._importDER=function(a,d){a=ih.toArray(a,d);var k=new Eaa;if(48!==a[k.place++]||zM(a,k)+k.place!==a.length||
2!==a[k.place++])return!1;var b=zM(a,k);d=a.slice(k.place,b+k.place);if(k.place+=b,2!==a[k.place++])return!1;b=zM(a,k);if(a.length!==b+k.place)return!1;a=a.slice(k.place,b+k.place);return 0===d[0]&&128&d[1]&&(d=d.slice(1)),0===a[0]&&128&a[1]&&(a=a.slice(1)),this.r=new RE(d),this.s=new RE(a),this.recoveryParam=null,!0};Xt.prototype.toDER=function(a){var d=this.r.toArray(),k=this.s.toArray();128&d[0]&&(d=[0].concat(d));128&k[0]&&(k=[0].concat(k));d=VX(d);for(k=VX(k);!(k[0]||128&k[1]);)k=k.slice(1);
var b=[2];AM(b,d.length);(b=b.concat(d)).push(2);AM(b,k.length);d=b.concat(k);k=[48];return AM(k,d.length),k=k.concat(d),ih.encode(k,a)};var Ze={},Qja=pn;Ze.inherits=Wg;Ze.toArray=function(a,d){if(Array.isArray(a))return a.slice();if(!a)return[];var k=[];if("string"==typeof a)if(d){if("hex"===d)for(0!=(a=a.replace(/[^a-z0-9]+/gi,"")).length%2&&(a="0"+a),b=0;b<a.length;b+=2)k.push(parseInt(a[b]+a[b+1],16))}else for(var b=d=0;b<a.length;b++){var e=a.charCodeAt(b);if(128>e)k[d++]=e;else if(2048>e)k[d++]=
e>>6|192,k[d++]=63&e|128;else{var l=a,p=b;55296!=(64512&l.charCodeAt(p))||0>p||p+1>=l.length||56320!=(64512&l.charCodeAt(p+1))?(k[d++]=e>>12|224,k[d++]=e>>6&63|128,k[d++]=63&e|128):(e=65536+((1023&e)<<10)+(1023&a.charCodeAt(++b)),k[d++]=e>>18|240,k[d++]=e>>12&63|128,k[d++]=e>>6&63|128,k[d++]=63&e|128)}}else for(b=0;b<a.length;b++)k[b]=0|a[b];return k};Ze.toHex=function(a){for(var d="",k=0;k<a.length;k++)d+=XX(a[k].toString(16));return d};Ze.htonl=WX;Ze.toHex32=function(a,d){for(var k="",b=0;b<a.length;b++){var e=
a[b];"little"===d&&(e=WX(e));k+=YX(e.toString(16))}return k};Ze.zero2=XX;Ze.zero8=YX;Ze.join32=function(a,d,k,b){k-=d;Qja(0==k%4);k=Array(k/4);for(var e=0;e<k.length;e++,d+=4)k[e]=("big"===b?a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3]:a[d+3]<<24|a[d+2]<<16|a[d+1]<<8|a[d])>>>0;return k};Ze.split32=function(a,d){for(var k=Array(4*a.length),b=0,e=0;b<a.length;b++,e+=4){var l=a[b];"big"===d?(k[e]=l>>>24,k[e+1]=l>>>16&255,k[e+2]=l>>>8&255,k[e+3]=255&l):(k[e+3]=l>>>24,k[e+2]=l>>>16&255,k[e+1]=l>>>8&255,k[e]=255&
l)}return k};Ze.rotr32=function(a,d){return a>>>d|a<<32-d};Ze.rotl32=function(a,d){return a<<d|a>>>32-d};Ze.sum32=function(a,d){return a+d>>>0};Ze.sum32_3=function(a,d,k){return a+d+k>>>0};Ze.sum32_4=function(a,d,k,b){return a+d+k+b>>>0};Ze.sum32_5=function(a,d,k,b,e){return a+d+k+b+e>>>0};Ze.sum64=function(a,d,k,b){var e=b+a[d+1]>>>0;a[d]=(e<b?1:0)+k+a[d]>>>0;a[d+1]=e};Ze.sum64_hi=function(a,d,k,b){return(d+b>>>0<d?1:0)+a+k>>>0};Ze.sum64_lo=function(a,d,k,b){return d+b>>>0};Ze.sum64_4_hi=function(a,
d,k,b,e,l,p,q){var u=0,w=d;return u+=(w=w+b>>>0)<d?1:0,u+=(w=w+l>>>0)<l?1:0,a+k+e+p+(u+(w+q>>>0<q?1:0))>>>0};Ze.sum64_4_lo=function(a,d,k,b,e,l,p,q){return d+b+l+q>>>0};Ze.sum64_5_hi=function(a,d,k,b,e,l,p,q,u,w){var y=0,A=d;return y+=(A=A+b>>>0)<d?1:0,y+=(A=A+l>>>0)<l?1:0,y+=(A=A+q>>>0)<q?1:0,a+k+e+p+u+(y+(A+w>>>0<w?1:0))>>>0};Ze.sum64_5_lo=function(a,d,k,b,e,l,p,q,u,w){return d+b+l+q+w>>>0};Ze.rotr64_hi=function(a,d,k){return(d<<32-k|a>>>k)>>>0};Ze.rotr64_lo=function(a,d,k){return(a<<32-k|d>>>k)>>>
0};Ze.shr64_hi=function(a,d,k){return a>>>k};Ze.shr64_lo=function(a,d,k){return(a<<32-k|d>>>k)>>>0};var Mx={},Rja=pn;Mx.BlockHash=SE;SE.prototype.update=function(a,d){if(a=Ze.toArray(a,d),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8)for(d=(a=this.pending).length%this._delta8,this.pending=a.slice(a.length-d,a.length),0===this.pending.length&&(this.pending=null),a=Ze.join32(a,0,a.length-d,this.endian),d=0;d<a.length;d+=
this._delta32)this._update(a,d,d+this._delta32);return this};SE.prototype.digest=function(a){return this.update(this._pad()),Rja(null===this.pending),this._digest(a)};SE.prototype._pad=function(){var a=this.pendingTotal,d=this._delta8,k=d-(a+this.padLength)%d;d=Array(k+this.padLength);d[0]=128;for(var b=1;b<k;b++)d[b]=0;if(a<<=3,"big"===this.endian){for(k=8;k<this.padLength;k++)d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=0;d[b++]=a>>>24&255;d[b++]=a>>>16&255;d[b++]=a>>>8&255;d[b++]=255&a}else for(d[b++]=
255&a,d[b++]=a>>>8&255,d[b++]=a>>>16&255,d[b++]=a>>>24&255,d[b++]=0,d[b++]=0,d[b++]=0,d[b++]=0,k=8;k<this.padLength;k++)d[b++]=0;return d};var Sja=pn,Fp=Ze.rotr64_hi,Gp=Ze.rotr64_lo,i4=Ze.shr64_hi,j4=Ze.shr64_lo,ws=Ze.sum64,GQ=Ze.sum64_hi,HQ=Ze.sum64_lo,Tja=Ze.sum64_4_hi,Uja=Ze.sum64_4_lo,Vja=Ze.sum64_5_hi,Wja=Ze.sum64_5_lo,ZX=Mx.BlockHash,Faa=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,
3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,
338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,
2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,
1607167915,987167468,1816402316,1246189591];Ze.inherits(kn,ZX);kn.blockSize=1024;kn.outSize=512;kn.hmacStrength=192;kn.padLength=128;kn.prototype._prepareBlock=function(a,d){for(var k=this.W,b=0;32>b;b++)k[b]=a[d+b];for(;b<k.length;b+=2){a=k[b-4];d=k[b-3];d=Fp(a,d,19)^Fp(d,a,29)^i4(a,d,6);a=(0>d&&(d+=4294967296),d);d=k[b-4];var e=k[b-3];e=Gp(d,e,19)^Gp(e,d,29)^j4(d,e,6);d=(0>e&&(e+=4294967296),e);e=k[b-14];var l=k[b-13];var p=k[b-30];var q=k[b-29];q=Fp(p,q,1)^Fp(p,q,8)^i4(p,q,7);p=(0>q&&(q+=4294967296),
q);q=k[b-30];var u=k[b-29];u=Gp(q,u,1)^Gp(q,u,8)^j4(q,u,7);q=(0>u&&(u+=4294967296),u);u=k[b-32];var w=k[b-31];k[b]=Tja(a,d,e,l,p,q,u,w);k[b+1]=Uja(a,d,e,l,p,q,u,w)}};kn.prototype._update=function(a,d){this._prepareBlock(a,d);a=this.W;d=this.h[0];var k=this.h[1],b=this.h[2],e=this.h[3],l=this.h[4],p=this.h[5],q=this.h[6],u=this.h[7],w=this.h[8],y=this.h[9],A=this.h[10],C=this.h[11],D=this.h[12],L=this.h[13],I=this.h[14],S=this.h[15];Sja(this.k.length===a.length);for(var V=0;V<a.length;V+=2){var ba=
w;var ua=y;ba=Fp(ba,ua,14)^Fp(ba,ua,18)^Fp(ua,ba,9);ua=(0>ba&&(ba+=4294967296),ba);ba=w;var Fa=y;ba=Gp(ba,Fa,14)^Gp(ba,Fa,18)^Gp(Fa,ba,9);var F=(0>ba&&(ba+=4294967296),ba);ba=w&A^~w&D;Fa=(0>ba&&(ba+=4294967296),ba);ba=y&C^~y&L;var Y=(0>ba&&(ba+=4294967296),ba);var Q=this.k[V],W=this.k[V+1],ka=a[V],ea=a[V+1];ba=Vja(I,S,ua,F,Fa,Y,Q,W,ka,ea);Fa=Wja(I,S,ua,F,Fa,Y,Q,W,ka,ea);I=d;S=k;S=Fp(I,S,28)^Fp(S,I,2)^Fp(S,I,7);I=(0>S&&(S+=4294967296),S);S=d;ua=k;ua=Gp(S,ua,28)^Gp(ua,S,2)^Gp(ua,S,7);S=(0>ua&&(ua+=
4294967296),ua);F=d&b^d&l^b&l;ua=(0>F&&(F+=4294967296),F);Y=k&e^k&p^e&p;F=(0>Y&&(Y+=4294967296),Y);Y=GQ(I,S,ua,F);ua=HQ(I,S,ua,F);I=D;S=L;D=A;L=C;A=w;C=y;w=GQ(q,u,ba,Fa);y=HQ(u,u,ba,Fa);q=l;u=p;l=b;p=e;b=d;e=k;d=GQ(ba,Fa,Y,ua);k=HQ(ba,Fa,Y,ua)}ws(this.h,0,d,k);ws(this.h,2,b,e);ws(this.h,4,l,p);ws(this.h,6,q,u);ws(this.h,8,w,y);ws(this.h,10,A,C);ws(this.h,12,D,L);ws(this.h,14,I,S)};kn.prototype._digest=function(a){return"hex"===a?Ze.toHex32(this.h,"big"):Ze.split32(this.h,"big")};var Hp=Ze.rotr32,
Xja=pn,Co=Ze.sum32,Yja=Ze.sum32_4,Zja=Ze.sum32_5,$X=Mx.BlockHash,Gaa=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,
2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];Ze.inherits(ho,$X);ho.blockSize=512;ho.outSize=256;ho.hmacStrength=192;ho.padLength=64;ho.prototype._update=function(a,d){for(var k=this.W,b=0;16>b;b++)k[b]=a[d+b];for(;b<k.length;b++){a=b;d=k[b-2];d=Hp(d,17)^Hp(d,19)^d>>>10;var e=k[b-7];var l=k[b-15];l=
Hp(l,7)^Hp(l,18)^l>>>3;k[a]=Yja(d,e,l,k[b-16])}a=this.h[0];d=this.h[1];e=this.h[2];l=this.h[3];var p=this.h[4],q=this.h[5],u=this.h[6],w=this.h[7];Xja(this.k.length===k.length);for(b=0;b<k.length;b++){var y=w;w=p;w=Hp(w,6)^Hp(w,11)^Hp(w,25);y=Zja(y,w,p&q^~p&u,this.k[b],k[b]);w=a;w=Hp(w,2)^Hp(w,13)^Hp(w,22);var A=Co(w,a&d^a&e^d&e);w=u;u=q;q=p;p=Co(l,y);l=e;e=d;d=a;a=Co(y,A)}this.h[0]=Co(this.h[0],a);this.h[1]=Co(this.h[1],d);this.h[2]=Co(this.h[2],e);this.h[3]=Co(this.h[3],l);this.h[4]=Co(this.h[4],
p);this.h[5]=Co(this.h[5],q);this.h[6]=Co(this.h[6],u);this.h[7]=Co(this.h[7],w)};ho.prototype._digest=function(a){return"hex"===a?Ze.toHex32(this.h,"big"):Ze.split32(this.h,"big")};var IQ=Ze.rotl32,yB=Ze.sum32,$ja=Ze.sum32_5,aY=Mx.BlockHash,aka=[1518500249,1859775393,2400959708,3395469782];Ze.inherits(ep,aY);ep.blockSize=512;ep.outSize=160;ep.hmacStrength=80;ep.padLength=64;ep.prototype._update=function(a,d){for(var k=this.W,b=0;16>b;b++)k[b]=a[d+b];for(;b<k.length;b++)k[b]=IQ(k[b-3]^k[b-8]^k[b-
14]^k[b-16],1);a=this.h[0];d=this.h[1];var e=this.h[2],l=this.h[3],p=this.h[4];for(b=0;b<k.length;b++){var q=~~(b/20);q=$ja(IQ(a,5),0===q?d&e^~d&l:1===q||3===q?d^e^l:2===q?d&e^d&l^e&l:void 0,p,k[b],aka[q]);p=l;l=e;e=IQ(d,30);d=a;a=q}this.h[0]=yB(this.h[0],a);this.h[1]=yB(this.h[1],d);this.h[2]=yB(this.h[2],e);this.h[3]=yB(this.h[3],l);this.h[4]=yB(this.h[4],p)};ep.prototype._digest=function(a){return"hex"===a?Ze.toHex32(this.h,"big"):Ze.split32(this.h,"big")};var bY=ho;Ze.inherits(oq,bY);oq.blockSize=
512;oq.outSize=224;oq.hmacStrength=192;oq.padLength=64;oq.prototype._digest=function(a){return"hex"===a?Ze.toHex32(this.h.slice(0,7),"big"):Ze.split32(this.h.slice(0,7),"big")};var cY=kn;Ze.inherits(pq,cY);pq.blockSize=1024;pq.outSize=384;pq.hmacStrength=192;pq.padLength=128;pq.prototype._digest=function(a){return"hex"===a?Ze.toHex32(this.h.slice(0,12),"big"):Ze.split32(this.h.slice(0,12),"big")};var Nx={};Nx.sha1=ep;Nx.sha224=oq;Nx.sha256=ho;Nx.sha384=pq;Nx.sha512=kn;var k4={},zI=Ze.rotl32,l4=Ze.sum32,
zB=Ze.sum32_3,m4=Ze.sum32_4,dY=Mx.BlockHash;Ze.inherits(fp,dY);k4.ripemd160=fp;fp.blockSize=512;fp.outSize=160;fp.hmacStrength=192;fp.padLength=64;fp.prototype._update=function(a,d){for(var k=this.h[0],b=this.h[1],e=this.h[2],l=this.h[3],p=this.h[4],q=k,u=b,w=e,y=l,A=p,C=0;80>C;C++){var D=l4(zI(m4(k,eY(C,b,e,l),a[bka[C]+d],15>=C?0:31>=C?1518500249:47>=C?1859775393:63>=C?2400959708:2840853838),cka[C]),p);k=p;p=l;l=zI(e,10);e=b;b=D;D=l4(zI(m4(q,eY(79-C,u,w,y),a[dka[C]+d],15>=C?1352829926:31>=C?1548603684:
47>=C?1836072691:63>=C?2053994217:0),eka[C]),A);q=A;A=y;y=zI(w,10);w=u;u=D}D=zB(this.h[1],e,y);this.h[1]=zB(this.h[2],l,A);this.h[2]=zB(this.h[3],p,q);this.h[3]=zB(this.h[4],k,u);this.h[4]=zB(this.h[0],b,w);this.h[0]=D};fp.prototype._digest=function(a){return"hex"===a?Ze.toHex32(this.h,"little"):Ze.split32(this.h,"little")};var bka=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,
10,14,1,3,8,11,6,15,13],dka=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],cka=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],eka=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,
15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Haa=Ze,fka=pn;Nw.prototype._init=function(a){a.length>this.blockSize&&(a=(new this.Hash).update(a).digest());fka(a.length<=this.blockSize);for(var d=a.length;d<this.blockSize;d++)a.push(0);for(d=0;d<a.length;d++)a[d]^=54;this.inner=(new this.Hash).update(a);for(d=0;d<a.length;d++)a[d]^=106;this.outer=(new this.Hash).update(a)};Nw.prototype.update=function(a,d){return this.inner.update(a,
d),this};Nw.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)};var Ri={};Ri.utils=Ze;Ri.common=Mx;Ri.sha=Nx;Ri.ripemd=k4;Ri.hmac=Nw;Ri.sha1=Ri.sha.sha1;Ri.sha256=Ri.sha.sha256;Ri.sha224=Ri.sha.sha224;Ri.sha384=Ri.sha.sha384;Ri.sha512=Ri.sha.sha512;Ri.ripemd160=Ri.ripemd.ripemd160;var Yt=vs,fY=pn;qq.prototype._init=function(a,d,k){a=a.concat(d).concat(k);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(d=0;d<this.V.length;d++)this.K[d]=0,this.V[d]=
1;this._update(a);this._reseed=1;this.reseedInterval=281474976710656};qq.prototype._hmac=function(){return new Ri.hmac(this.hash,this.K)};qq.prototype._update=function(a){var d=this._hmac().update(this.V).update([0]);a&&(d=d.update(a));this.K=d.digest();this.V=this._hmac().update(this.V).digest();a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())};qq.prototype.reseed=function(a,d,k,b){"string"!=typeof d&&(b=k,k=d,d=null);a=Yt.toArray(a,
d);k=Yt.toArray(k,b);fY(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(a.concat(k||[]));this._reseed=1};qq.prototype.generate=function(a,d,k,b){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof d&&(b=k,k=d,d=null);k&&(k=Yt.toArray(k,b||"hex"),this._update(k));for(b=[];b.length<a;)this.V=this._hmac().update(this.V).digest(),b=b.concat(this.V);a=b.slice(0,a);return this._update(k),this._reseed++,Yt.encode(a,d)};
var Zt=Oj,AI=ih.getNAF,gka=ih.getJSF,BI=ih.assert;io.prototype.point=function(){throw Error("Not implemented");};io.prototype.validate=function(){throw Error("Not implemented");};io.prototype._fixedNafMul=function(a,d){BI(a.precomputed);a=a._getDoubles();var k=AI(d,1,this._bitLength),b=(1<<a.step+1)-(0==a.step%2?2:1);b/=3;for(var e=[],l=0;l<k.length;l+=a.step){var p=0;for(d=l+a.step-1;d>=l;d--)p=(p<<1)+k[d];e.push(p)}d=this.jpoint(null,null,null);for(k=this.jpoint(null,null,null);0<b;b--){for(l=0;l<
e.length;l++)(p=e[l])===b?k=k.mixedAdd(a.points[l]):p===-b&&(k=k.mixedAdd(a.points[l].neg()));d=d.add(k)}return d.toP()};io.prototype._wnafMul=function(a,d){var k=a._getNAFPoints(4),b=k.points;k=AI(d,k.wnd,this._bitLength);for(var e=this.jpoint(null,null,null),l=k.length-1;0<=l;l--){for(d=0;0<=l&&0===k[l];l--)d++;if(0<=l&&d++,e=e.dblp(d),0>l)break;d=k[l];BI(0!==d);e="affine"===a.type?0<d?e.mixedAdd(b[d-1>>1]):e.mixedAdd(b[-d-1>>1].neg()):0<d?e.add(b[d-1>>1]):e.add(b[-d-1>>1].neg())}return"affine"===
a.type?e.toP():e};io.prototype._wnafMulAdd=function(a,d,k,b,e){for(var l=this._wnafT1,p=this._wnafT2,q=this._wnafT3,u=0,w=0;w<b;w++){var y=(I=d[w])._getNAFPoints(a);l[w]=y.wnd;p[w]=y.points}for(w=b-1;1<=w;w-=2){y=w-1;var A=w;if(1===l[y]&&1===l[A]){var C=[d[y],null,null,d[A]];0===d[y].y.cmp(d[A].y)?(C[1]=d[y].add(d[A]),C[2]=d[y].toJ().mixedAdd(d[A].neg())):0===d[y].y.cmp(d[A].y.redNeg())?(C[1]=d[y].toJ().mixedAdd(d[A]),C[2]=d[y].add(d[A].neg())):(C[1]=d[y].toJ().mixedAdd(d[A]),C[2]=d[y].toJ().mixedAdd(d[A].neg()));
var D=[-3,-1,-5,-7,0,7,5,1,3],L=gka(k[y],k[A]);u=Math.max(L[0].length,u);q[y]=Array(u);q[A]=Array(u);for(a=0;a<u;a++)q[y][a]=D[3*((0|L[0][a])+1)+((0|L[1][a])+1)],q[A][a]=0,p[y]=C}else q[y]=AI(k[y],l[y],this._bitLength),q[A]=AI(k[A],l[A],this._bitLength),u=Math.max(q[y].length,u),u=Math.max(q[A].length,u)}d=this.jpoint(null,null,null);k=this._wnafT4;for(w=u;0<=w;w--){for(u=0;0<=w;){l=!0;for(a=0;a<b;a++)k[a]=0|q[a][w],0!==k[a]&&(l=!1);if(!l)break;u++;w--}if(0<=w&&u++,d=d.dblp(u),0>w)break;for(a=0;a<
b;a++){var I;u=k[a];0!==u&&(0<u?I=p[a][u-1>>1]:0>u&&(I=p[a][-u-1>>1].neg()),d="affine"===I.type?d.mixedAdd(I):d.add(I))}}for(w=0;w<b;w++)p[w]=null;return e?d:d.toP()};io.BasePoint=ln;ln.prototype.eq=function(){throw Error("Not implemented");};ln.prototype.validate=function(){return this.curve.validate(this)};io.prototype.decodePoint=function(a,d){a=ih.toArray(a,d);d=this.p.byteLength();if((4===a[0]||6===a[0]||7===a[0])&&a.length-1==2*d)return 6===a[0]?BI(0==a[a.length-1]%2):7===a[0]&&BI(1==a[a.length-
1]%2),this.point(a.slice(1,1+d),a.slice(1+d,1+2*d));if((2===a[0]||3===a[0])&&a.length-1===d)return this.pointFromX(a.slice(1,1+d),3===a[0]);throw Error("Unknown point format");};ln.prototype.encodeCompressed=function(a){return this.encode(a,!0)};ln.prototype._encode=function(a){var d=this.curve.p.byteLength(),k=this.getX().toArray("be",d);return a?[this.getY().isEven()?2:3].concat(k):[4].concat(k,this.getY().toArray("be",d))};ln.prototype.encode=function(a,d){return ih.encode(this._encode(d),a)};
ln.prototype.precompute=function(a){if(this.precomputed)return this;var d={doubles:null,naf:null,beta:null};return d.naf=this._getNAFPoints(8),d.doubles=this._getDoubles(4,a),d.beta=this._getBeta(),this.precomputed=d,this};ln.prototype._hasDoubles=function(a){if(!this.precomputed)return!1;var d=this.precomputed.doubles;return!!d&&d.points.length>=Math.ceil((a.bitLength()+1)/d.step)};ln.prototype._getDoubles=function(a,d){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var k=[this],b=this,e=0;e<d;e+=a){for(var l=0;l<a;l++)b=b.dbl();k.push(b)}return{step:a,points:k}};ln.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var d=[this],k=(1<<a)-1,b=1===k?null:this.dbl(),e=1;e<k;e++)d[e]=d[e-1].add(b);return{wnd:a,points:d}};ln.prototype._getBeta=function(){return null};ln.prototype.dblp=function(a){for(var d=this,k=0;k<a;k++)d=d.dbl();return d};var vj=Oj,JQ=Wg,Ow=io,hka=ih.assert;JQ(mn,Ow);mn.prototype._getEndomorphism=
function(a){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(a.beta)var d=(new vj(a.beta,16)).toRed(this.red);else d=this._getEndoRoots(this.p),d=(d=0>d[0].cmp(d[1])?d[0]:d[1]).toRed(this.red);if(a.lambda)var k=new vj(a.lambda,16);else{var b=this._getEndoRoots(this.n);0===this.g.mul(b[0]).x.cmp(this.g.x.redMul(d))?k=b[0]:(k=b[1],hka(0===this.g.mul(k).x.cmp(this.g.x.redMul(d))))}return{beta:d,lambda:k,basis:a.basis?a.basis.map(function(e){return{a:new vj(e.a,16),b:new vj(e.b,16)}}):this._getEndoBasis(k)}}};
mn.prototype._getEndoRoots=function(a){var d=a===this.p?this.red:vj.mont(a),k=(new vj(2)).toRed(d).redInvm();a=k.redNeg();d=(new vj(3)).toRed(d).redNeg().redSqrt().redMul(k);return[a.redAdd(d).fromRed(),a.redSub(d).fromRed()]};mn.prototype._getEndoBasis=function(a){for(var d,k,b,e,l,p,q,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),w=this.n.clone(),y=new vj(1),A=new vj(0),C=new vj(0),D=new vj(1),L=0;0!==a.cmpn(0);){var I=w.div(a);q=w.sub(I.mul(a));p=C.sub(I.mul(y));I=D.sub(I.mul(A));if(!b&&0>q.cmp(u))d=
l.neg(),k=y,b=q.neg(),e=p;else if(b&&2==++L)break;l=q;w=a;a=q;C=y;y=p;D=A;A=I}l=q.neg();q=b.sqr().add(e.sqr());return 0<=l.sqr().add(p.sqr()).cmp(q)&&(l=d,p=k),b.negative&&(b=b.neg(),e=e.neg()),l.negative&&(l=l.neg(),p=p.neg()),[{a:b,b:e},{a:l,b:p}]};mn.prototype._endoSplit=function(a){var d=this.endo.basis,k=d[0],b=d[1],e=b.b.mul(a).divRound(this.n),l=k.b.neg().mul(a).divRound(this.n);d=e.mul(k.a);var p=l.mul(b.a);k=e.mul(k.b);b=l.mul(b.b);return{k1:a.sub(d).sub(p),k2:k.add(b).neg()}};mn.prototype.pointFromX=
function(a,d){(a=new vj(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr().redMul(a).redIAdd(a.redMul(this.a)).redIAdd(this.b),b=k.redSqrt();if(0!==b.redSqr().redSub(k).cmp(this.zero))throw Error("invalid point");k=b.fromRed().isOdd();return(d&&!k||!d&&k)&&(b=b.redNeg()),this.point(a,b)};mn.prototype.validate=function(a){if(a.inf)return!0;var d=a.x;a=a.y;var k=this.a.redMul(d);d=d.redSqr().redMul(d).redIAdd(k).redIAdd(this.b);return 0===a.redSqr().redISub(d).cmpn(0)};mn.prototype._endoWnafMulAdd=
function(a,d,k){for(var b=this._endoWnafT1,e=this._endoWnafT2,l=0;l<a.length;l++){var p=this._endoSplit(d[l]),q=a[l],u=q._getBeta();p.k1.negative&&(p.k1.ineg(),q=q.neg(!0));p.k2.negative&&(p.k2.ineg(),u=u.neg(!0));b[2*l]=q;b[2*l+1]=u;e[2*l]=p.k1;e[2*l+1]=p.k2}a=this._wnafMulAdd(1,b,e,2*l,k);for(d=0;d<2*l;d++)b[d]=null,e[d]=null;return a};JQ(Gk,Ow.BasePoint);mn.prototype.point=function(a,d,k){return new Gk(this,a,d,k)};mn.prototype.pointFromJSON=function(a,d){return Gk.fromJSON(this,a,d)};Gk.prototype._getBeta=
function(){if(this.curve.endo){var a=this.precomputed;if(a&&a.beta)return a.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(a){var k=this.curve,b=function(e){return k.point(e.x.redMul(k.endo.beta),e.y)};a.beta=d;d.precomputed={beta:null,naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(b)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(b)}}}return d}};Gk.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Gk.fromJSON=function(a,d,k){function b(l){return a.point(l[0],l[1],k)}"string"==typeof d&&(d=JSON.parse(d));var e=a.point(d[0],d[1],k);if(!d[2])return e;d=d[2];return e.precomputed={beta:null,doubles:d.doubles&&{step:d.doubles.step,points:[e].concat(d.doubles.points.map(b))},naf:d.naf&&{wnd:d.naf.wnd,
points:[e].concat(d.naf.points.map(b))}},e};Gk.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Gk.prototype.isInfinity=function(){return this.inf};Gk.prototype.add=function(a){if(this.inf)return a;if(a.inf)return this;if(this.eq(a))return this.dbl();if(this.neg().eq(a)||0===this.x.cmp(a.x))return this.curve.point(null,null);var d=this.y.redSub(a.y);0!==d.cmpn(0)&&(d=d.redMul(this.x.redSub(a.x).redInvm()));
a=d.redSqr().redISub(this.x).redISub(a.x);d=d.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,d)};Gk.prototype.dbl=function(){if(this.inf)return this;var a=this.y.redAdd(this.y);if(0===a.cmpn(0))return this.curve.point(null,null);var d=this.curve.a,k=this.x.redSqr();a=a.redInvm();k=k.redAdd(k).redIAdd(k).redIAdd(d).redMul(a);d=k.redSqr().redISub(this.x.redAdd(this.x));k=k.redMul(this.x.redSub(d)).redISub(this.y);return this.curve.point(d,k)};Gk.prototype.getX=function(){return this.x.fromRed()};
Gk.prototype.getY=function(){return this.y.fromRed()};Gk.prototype.mul=function(a){return a=new vj(a,16),this.isInfinity()?this:this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve.endo?this.curve._endoWnafMulAdd([this],[a]):this.curve._wnafMul(this,a)};Gk.prototype.mulAdd=function(a,d,k){d=[this,d];a=[a,k];return this.curve.endo?this.curve._endoWnafMulAdd(d,a):this.curve._wnafMulAdd(1,d,a,2)};Gk.prototype.jmulAdd=function(a,d,k){d=[this,d];a=[a,k];return this.curve.endo?this.curve._endoWnafMulAdd(d,
a,!0):this.curve._wnafMulAdd(1,d,a,2,!0)};Gk.prototype.eq=function(a){return this===a||this.inf===a.inf&&(this.inf||0===this.x.cmp(a.x)&&0===this.y.cmp(a.y))};Gk.prototype.neg=function(a){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(a&&this.precomputed){a=this.precomputed;var k=function(b){return b.neg()};d.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(k)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(k)}}}return d};Gk.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};JQ(cl,Ow.BasePoint);mn.prototype.jpoint=function(a,d,k){return new cl(this,a,d,k)};cl.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var a=this.z.redInvm(),d=a.redSqr(),k=this.x.redMul(d);a=this.y.redMul(d).redMul(a);return this.curve.point(k,a)};cl.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};cl.prototype.add=function(a){if(this.isInfinity())return a;
if(a.isInfinity())return this;var d=a.z.redSqr(),k=this.z.redSqr(),b=this.x.redMul(d),e=a.x.redMul(k);d=this.y.redMul(d.redMul(a.z));k=a.y.redMul(k.redMul(this.z));e=b.redSub(e);k=d.redSub(k);if(0===e.cmpn(0))return 0!==k.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=e.redSqr(),p=l.redMul(e);l=b.redMul(l);b=k.redSqr().redIAdd(p).redISub(l).redISub(l);d=k.redMul(l.redISub(b)).redISub(d.redMul(p));a=this.z.redMul(a.z).redMul(e);return this.curve.jpoint(b,d,a)};cl.prototype.mixedAdd=function(a){if(this.isInfinity())return a.toJ();
if(a.isInfinity())return this;var d=this.z.redSqr(),k=this.x,b=a.x.redMul(d),e=this.y;a=a.y.redMul(d).redMul(this.z);b=k.redSub(b);a=e.redSub(a);if(0===b.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=b.redSqr();d=l.redMul(b);l=k.redMul(l);k=a.redSqr().redIAdd(d).redISub(l).redISub(l);e=a.redMul(l.redISub(k)).redISub(e.redMul(d));b=this.z.redMul(b);return this.curve.jpoint(k,e,b)};cl.prototype.dblp=function(a){if(0===a||this.isInfinity())return this;if(!a)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var d=this,k=0;k<a;k++)d=d.dbl();return d}d=this.curve.a;var b=this.curve.tinv,e=this.x;k=this.y;var l=this.z,p=l.redSqr().redSqr(),q=k.redAdd(k);for(k=0;k<a;k++){var u=e.redSqr(),w=q.redSqr(),y=w.redSqr();u=u.redAdd(u).redIAdd(u).redIAdd(d.redMul(p));w=e.redMul(w);e=u.redSqr().redISub(w.redAdd(w));w=w.redISub(e);u=u.redMul(w);u=u.redIAdd(u).redISub(y);l=q.redMul(l);k+1<a&&(p=p.redMul(y));q=u}return this.curve.jpoint(e,q.redMul(b),l)};cl.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};cl.prototype._zeroDbl=function(){if(this.zOne){var a=this.x.redSqr();var d=this.y.redSqr();var k=d.redSqr();d=this.x.redAdd(d).redSqr().redISub(a).redISub(k);d=d.redIAdd(d);a=a.redAdd(a).redIAdd(a);var b=a.redSqr().redISub(d).redISub(d),e=k.redIAdd(k);e=(e=e.redIAdd(e)).redIAdd(e);k=b;a=a.redMul(d.redISub(b)).redISub(e);d=this.y.redAdd(this.y)}else{b=this.x.redSqr();a=this.y.redSqr();k=a.redSqr();a=this.x.redAdd(a).redSqr().redISub(b).redISub(k);
a=a.redIAdd(a);b=b.redAdd(b).redIAdd(b);e=b.redSqr();var l=k.redIAdd(k);l=(l=l.redIAdd(l)).redIAdd(l);k=e.redISub(a).redISub(a);a=b.redMul(a.redISub(k)).redISub(l);d=(d=this.y.redMul(this.z)).redIAdd(d)}return this.curve.jpoint(k,a,d)};cl.prototype._threeDbl=function(){var a;if(this.zOne){var d=this.x.redSqr();var k=this.y.redSqr();var b=k.redSqr();k=this.x.redAdd(k).redSqr().redISub(d).redISub(b);k=k.redIAdd(k);var e=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a);d=a=e.redSqr().redISub(k).redISub(k);
b=b.redIAdd(b);b=(b=b.redIAdd(b)).redIAdd(b);b=e.redMul(k.redISub(a)).redISub(b);a=this.y.redAdd(this.y)}else a=this.z.redSqr(),k=this.y.redSqr(),d=this.x.redMul(k),b=this.x.redSub(a).redMul(this.x.redAdd(a)),b=b.redAdd(b).redIAdd(b),e=d.redIAdd(d),d=(e=e.redIAdd(e)).redAdd(e),d=b.redSqr().redISub(d),a=this.y.redAdd(this.z).redSqr().redISub(k).redISub(a),k=k.redSqr(),k=(k=(k=k.redIAdd(k)).redIAdd(k)).redIAdd(k),b=b.redMul(e.redISub(d)).redISub(k);return this.curve.jpoint(d,b,a)};cl.prototype._dbl=
function(){var a=this.curve.a,d=this.x,k=this.y,b=this.z,e=b.redSqr().redSqr(),l=d.redSqr(),p=k.redSqr();a=l.redAdd(l).redIAdd(l).redIAdd(a.redMul(e));d=d.redAdd(d);e=d.redIAdd(d).redMul(p);d=a.redSqr().redISub(e.redAdd(e));e=e.redISub(d);p=p.redSqr();p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);p=a.redMul(e).redISub(p);k=k.redAdd(k).redMul(b);return this.curve.jpoint(d,p,k)};cl.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),d=this.y.redSqr(),k=this.z.redSqr(),
b=d.redSqr(),e=a.redAdd(a).redIAdd(a),l=e.redSqr();a=this.x.redAdd(d).redSqr().redISub(a).redISub(b);var p=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(l)).redSqr();b=b.redIAdd(b);b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b);e=e.redIAdd(a).redSqr().redISub(l).redISub(p).redISub(b);d=d.redMul(e);d=(d=d.redIAdd(d)).redIAdd(d);d=this.x.redMul(p).redISub(d);d=(d=d.redIAdd(d)).redIAdd(d);b=this.y.redMul(e.redMul(b.redISub(e)).redISub(a.redMul(p)));b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b);k=
this.z.redAdd(a).redSqr().redISub(k).redISub(p);return this.curve.jpoint(d,b,k)};cl.prototype.mul=function(a,d){return a=new vj(a,d),this.curve._wnafMul(this,a)};cl.prototype.eq=function(a){if("affine"===a.type)return this.eq(a.toJ());if(this===a)return!0;var d=this.z.redSqr(),k=a.z.redSqr();if(0!==this.x.redMul(k).redISub(a.x.redMul(d)).cmpn(0))return!1;d=d.redMul(this.z);k=k.redMul(a.z);return 0===this.y.redMul(k).redISub(a.y.redMul(d)).cmpn(0)};cl.prototype.eqXToP=function(a){var d=this.z.redSqr(),
k=a.toRed(this.curve.red).redMul(d);if(0===this.x.cmp(k))return!0;a=a.clone();for(d=this.curve.redN.redMul(d);;){if(a.iadd(this.curve.n),0<=a.cmp(this.curve.p))return!1;if(k.redIAdd(d),0===this.x.cmp(k))return!0}};cl.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};cl.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Qw=Oj,n4=Wg,TE=io;n4(Pw,TE);Pw.prototype.validate=
function(a){a=a.normalize().x;var d=a.redSqr();a=d.redMul(a).redAdd(d.redMul(this.a)).redAdd(a);return 0===a.redSqrt().redSqr().cmp(a)};n4(Hk,TE.BasePoint);Pw.prototype.decodePoint=function(a,d){return this.point(ih.toArray(a,d),1)};Pw.prototype.point=function(a,d){return new Hk(this,a,d)};Pw.prototype.pointFromJSON=function(a){return Hk.fromJSON(this,a)};Hk.prototype.precompute=function(){};Hk.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Hk.fromJSON=function(a,
d){return new Hk(a,d[0],d[1]||a.one)};Hk.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Hk.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};Hk.prototype.dbl=function(){var a=this.x.redAdd(this.z).redSqr(),d=this.x.redSub(this.z).redSqr(),k=a.redSub(d);a=a.redMul(d);d=k.redMul(d.redAdd(this.curve.a24.redMul(k)));return this.curve.point(a,d)};Hk.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};Hk.prototype.diffAdd=function(a,d){var k=this.x.redAdd(this.z),b=this.x.redSub(this.z),e=a.x.redAdd(a.z);a=a.x.redSub(a.z).redMul(k);e=e.redMul(b);b=d.z.redMul(a.redAdd(e).redSqr());d=d.x.redMul(a.redISub(e).redSqr());return this.curve.point(b,d)};Hk.prototype.mul=function(a){var d=a.clone();a=this;for(var k=this.curve.point(null,null),b=[];0!==d.cmpn(0);d.iushrn(1))b.push(d.andln(1));for(d=b.length-1;0<=d;d--)0===b[d]?(a=a.diffAdd(k,this),k=k.dbl()):(k=a.diffAdd(k,this),a=a.dbl());return k};Hk.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};Hk.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};Hk.prototype.eq=function(a){return 0===this.getX().cmp(a.getX())};Hk.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Hk.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var rq=Oj,o4=Wg,UE=io,Iaa=ih.assert;o4(gp,UE);gp.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)};
gp.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)};gp.prototype.jpoint=function(a,d,k,b){return this.point(a,d,k,b)};gp.prototype.pointFromX=function(a,d){(a=new rq(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr(),b=this.c2.redSub(this.a.redMul(k));k=this.one.redSub(this.c2.redMul(this.d).redMul(k));k=b.redMul(k.redInvm());b=k.redSqrt();if(0!==b.redSqr().redSub(k).cmp(this.zero))throw Error("invalid point");k=b.fromRed().isOdd();return(d&&!k||!d&&k)&&(b=b.redNeg()),this.point(a,
b)};gp.prototype.pointFromY=function(a,d){(a=new rq(a,16)).red||(a=a.toRed(this.red));var k=a.redSqr(),b=k.redSub(this.c2);k=k.redMul(this.d).redMul(this.c2).redSub(this.a);b=b.redMul(k.redInvm());if(0===b.cmp(this.zero)){if(d)throw Error("invalid point");return this.point(this.zero,a)}k=b.redSqrt();if(0!==k.redSqr().redSub(b).cmp(this.zero))throw Error("invalid point");return k.fromRed().isOdd()!==d&&(k=k.redNeg()),this.point(k,a)};gp.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();
var d=a.x.redSqr(),k=a.y.redSqr();a=d.redMul(this.a).redAdd(k);d=this.c2.redMul(this.one.redAdd(this.d.redMul(d).redMul(k)));return 0===a.cmp(d)};o4(Ti,UE.BasePoint);gp.prototype.pointFromJSON=function(a){return Ti.fromJSON(this,a)};gp.prototype.point=function(a,d,k,b){return new Ti(this,a,d,k,b)};Ti.fromJSON=function(a,d){return new Ti(a,d[0],d[1],d[2])};Ti.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ti.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};Ti.prototype._extDbl=function(){var a=this.x.redSqr(),d=this.y.redSqr(),k=this.z.redSqr();k=k.redIAdd(k);var b=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(d);a=b.redAdd(d);k=a.redSub(k);var l=b.redSub(d);d=e.redMul(k);b=a.redMul(l);e=e.redMul(l);a=k.redMul(a);return this.curve.point(d,b,a,e)};Ti.prototype._projDbl=
function(){var a=this.x.redAdd(this.y).redSqr();var d=this.x.redSqr();var k=this.y.redSqr();if(this.curve.twisted){var b=(l=this.curve._mulA(d)).redAdd(k);if(this.zOne)a=a.redSub(d).redSub(k).redMul(b.redSub(this.curve.two)),d=b.redMul(l.redSub(k)),b=b.redSqr().redSub(b).redSub(b);else{var e=this.z.redSqr();e=b.redSub(e).redISub(e);a=a.redSub(d).redISub(k).redMul(e);d=b.redMul(l.redSub(k));b=b.redMul(e)}}else{var l=d.redAdd(k);e=this.curve._mulC(this.z).redSqr();e=l.redSub(e).redSub(e);a=this.curve._mulC(a.redISub(l)).redMul(e);
d=this.curve._mulC(l).redMul(d.redISub(k));b=l.redMul(e)}return this.curve.point(a,d,b)};Ti.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Ti.prototype._extAdd=function(a){var d=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),k=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),b=this.t.redMul(this.curve.dd).redMul(a.t),e=this.z.redMul(a.z.redAdd(a.z)),l=k.redSub(d);a=e.redSub(b);b=e.redAdd(b);e=k.redAdd(d);d=l.redMul(a);k=b.redMul(e);l=l.redMul(e);
a=a.redMul(b);return this.curve.point(d,k,a,l)};Ti.prototype._projAdd=function(a){var d,k,b=this.z.redMul(a.z),e=b.redSqr(),l=this.x.redMul(a.x),p=this.y.redMul(a.y),q=this.curve.d.redMul(l).redMul(p),u=e.redSub(q);e=e.redAdd(q);a=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(l).redISub(p);a=b.redMul(u).redMul(a);return this.curve.twisted?(d=b.redMul(e).redMul(p.redSub(this.curve._mulA(l))),k=u.redMul(e)):(d=b.redMul(e).redMul(p.redSub(l)),k=this.curve._mulC(u).redMul(e)),this.curve.point(a,
d,k)};Ti.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)};Ti.prototype.mul=function(a){return this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)};Ti.prototype.mulAdd=function(a,d,k){return this.curve._wnafMulAdd(1,[this,d],[a,k],2,!1)};Ti.prototype.jmulAdd=function(a,d,k){return this.curve._wnafMulAdd(1,[this,d],[a,k],2,!0)};Ti.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();
return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this};Ti.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Ti.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Ti.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Ti.prototype.eq=function(a){return this===a||0===this.getX().cmp(a.getX())&&0===this.getY().cmp(a.getY())};Ti.prototype.eqXToP=
function(a){var d=a.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(d))return!0;a=a.clone();for(var k=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),0<=a.cmp(this.curve.p))return!1;if(d.redIAdd(k),0===this.x.cmp(d))return!0}};Ti.prototype.toP=Ti.prototype.normalize;Ti.prototype.mixedAdd=Ti.prototype.add;var Ox={};Ox.base=io;Ox.short=mn;Ox.mont=Pw;Ox.edwards=gp;var ika={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},CI={},CM=CI,BM=Ox,hY=ih.assert;CM.PresetCurve=gY;Lr("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ri.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Lr("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ri.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Lr("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:Ri.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Lr("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ri.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Lr("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ri.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Lr("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ri.sha256,gRed:!1,g:["9"]});Lr("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ri.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var p4=ika}catch(a){p4=void 0}Lr("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:Ri.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",p4]});var jka=Oj,q4=ih.assert;
Ik.fromPublic=function(a,d,k){return d instanceof Ik?d:new Ik(a,{pub:d,pubEnc:k})};Ik.fromPrivate=function(a,d,k){return d instanceof Ik?d:new Ik(a,{priv:d,privEnc:k})};Ik.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Ik.prototype.getPublic=function(a,d){return"string"==
typeof a&&(d=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),d?this.pub.encode(d,a):this.pub};Ik.prototype.getPrivate=function(a){return"hex"===a?this.priv.toString(16,2):this.priv};Ik.prototype._importPrivate=function(a,d){this.priv=new jka(a,d||16);this.priv=this.priv.umod(this.ec.curve.n)};Ik.prototype._importPublic=function(a,d){if(a.x||a.y)return"mont"===this.ec.curve.type?q4(a.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||q4(a.x&&a.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(a.x,a.y),void 0;this.pub=this.ec.curve.decodePoint(a,d)};Ik.prototype.derive=function(a){return a.mul(this.priv).getX()};Ik.prototype.sign=function(a,d,k){return this.ec.sign(a,this,d,k)};Ik.prototype.verify=function(a,d){return this.ec.verify(a,d,this)};Ik.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Ou=Oj,DM=CI,iY=ih.assert;nn.prototype.keyPair=function(a){return new Ik(this,
a)};nn.prototype.keyFromPrivate=function(a,d){return Ik.fromPrivate(this,a,d)};nn.prototype.keyFromPublic=function(a,d){return Ik.fromPublic(this,a,d)};nn.prototype.genKeyPair=function(a){a||(a={});a=new qq({hash:this.hash,pers:a.pers,persEnc:a.persEnc||"utf8",entropy:a.entropy||xI(this.hash.hmacStrength),entropyEnc:a.entropy&&a.entropyEnc||"utf8",nonce:this.n.toArray()});for(var d=this.n.byteLength(),k=this.n.sub(new Ou(2));;){var b=new Ou(a.generate(d));if(!(0<b.cmp(k)))return b.iaddn(1),this.keyFromPrivate(b)}};
nn.prototype._truncateToN=function(a,d){var k=8*a.byteLength()-this.n.bitLength();return 0<k&&(a=a.ushrn(k)),!d&&0<=a.cmp(this.n)?a.sub(this.n):a};nn.prototype.sign=function(a,d,k,b){"object"==typeof k&&(b=k,k=null);b||(b={});d=this.keyFromPrivate(d,k);a=this._truncateToN(new Ou(a,16));var e=this.n.byteLength();k=d.getPrivate().toArray("be",e);e=a.toArray("be",e);e=new qq({hash:this.hash,entropy:k,nonce:e,pers:b.pers,persEnc:b.persEnc||"utf8"});for(var l=this.n.sub(new Ou(1)),p=0;;p++){var q=b.k?
b.k(p):new Ou(e.generate(this.n.byteLength()));if(!(0>=(q=this._truncateToN(q,!0)).cmpn(1)||0<=q.cmp(l))){var u=this.g.mul(q);if(!u.isInfinity()){var w=u.getX();k=w.umod(this.n);if(0!==k.cmpn(0)&&(q=q.invm(this.n).mul(k.mul(d.getPrivate()).iadd(a)),0!==(q=q.umod(this.n)).cmpn(0)))return a=(u.getY().isOdd()?1:0)|(0!==w.cmp(k)?2:0),b.canonical&&0<q.cmp(this.nh)&&(q=this.n.sub(q),a^=1),new Xt({r:k,s:q,recoveryParam:a})}}}};nn.prototype.verify=function(a,d,k,b){a=this._truncateToN(new Ou(a,16));k=this.keyFromPublic(k,
b);b=(d=new Xt(d,"hex")).r;d=d.s;if(0>b.cmpn(1)||0<=b.cmp(this.n)||0>d.cmpn(1)||0<=d.cmp(this.n))return!1;var e;d=d.invm(this.n);a=d.mul(a).umod(this.n);d=d.mul(b).umod(this.n);return this.curve._maxwellTrick?!(e=this.g.jmulAdd(a,k.getPublic(),d)).isInfinity()&&e.eqXToP(b):!(e=this.g.mulAdd(a,k.getPublic(),d)).isInfinity()&&0===e.getX().umod(this.n).cmp(b)};nn.prototype.recoverPubKey=function(a,d,k,b){iY((3&k)===k,"The recovery param is more than two bits");d=new Xt(d,b);b=this.n;var e=new Ou(a);
a=d.r;var l=d.s,p=1&k;k>>=1;if(0<=a.cmp(this.curve.p.umod(this.curve.n))&&k)throw Error("Unable to find sencond key candinate");a=k?this.curve.pointFromX(a.add(this.curve.n),p):this.curve.pointFromX(a,p);d=d.r.invm(b);k=b.sub(e).mul(d).umod(b);b=l.mul(d).umod(b);return this.g.mulAdd(k,a,b)};nn.prototype.getKeyRecoveryParam=function(a,d,k,b){if(null!==(d=new Xt(d,b)).recoveryParam)return d.recoveryParam;for(b=0;4>b;b++){try{var e=this.recoverPubKey(a,d,b)}catch(l){continue}if(e.eq(k))return b}throw Error("Unable to find valid recovery factor");
};var r4=ih.assert,jY=ih.parseBytes,Px=ih.cachedProperty;gk.fromPublic=function(a,d){return d instanceof gk?d:new gk(a,{pub:d})};gk.fromSecret=function(a,d){return d instanceof gk?d:new gk(a,{secret:d})};gk.prototype.secret=function(){return this._secret};Px(gk,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Px(gk,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Px(gk,"privBytes",function(){var a=this.eddsa,d=this.hash(),
k=a.encodingLength-1;a=d.slice(0,a.encodingLength);return a[0]&=248,a[k]&=127,a[k]|=64,a});Px(gk,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Px(gk,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Px(gk,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});gk.prototype.sign=function(a){return r4(this._secret,"KeyPair can only verify"),this.eddsa.sign(a,this)};gk.prototype.verify=function(a,d){return this.eddsa.verify(a,d,this)};
gk.prototype.getSecret=function(a){return r4(this._secret,"KeyPair is public only"),ih.encode(this.secret(),a)};gk.prototype.getPublic=function(a){return ih.encode(this.pubBytes(),a)};var Laa=Oj,Kaa=ih.assert,DI=ih.cachedProperty,Jaa=ih.parseBytes;DI(Mr,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});DI(Mr,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});DI(Mr,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});DI(Mr,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
Mr.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Mr.prototype.toHex=function(){return ih.encode(this.toBytes(),"hex").toUpperCase()};var Oaa=Ri,Naa=CI,Maa=ih.assert,s4=ih.parseBytes;em.prototype.sign=function(a,d){a=s4(a);var k=this.keyFromSecret(d),b=this.hashInt(k.messagePrefix(),a);d=this.g.mul(b);var e=this.encodePoint(d);a=this.hashInt(e,k.pubBytes(),a).mul(k.priv());a=b.add(a).umod(this.curve.n);return this.makeSignature({R:d,S:a,Rencoded:e})};em.prototype.verify=
function(a,d,k){a=s4(a);d=this.makeSignature(d);k=this.keyFromPublic(k);a=this.hashInt(d.Rencoded(),k.pubBytes(),a);var b=this.g.mul(d.S());return d.R().add(k.pub().mul(a)).eq(b)};em.prototype.hashInt=function(){for(var a=this.hash(),d=0;d<arguments.length;d++)a.update(arguments[d]);return ih.intFromLE(a.digest()).umod(this.curve.n)};em.prototype.keyFromPublic=function(a){return gk.fromPublic(this,a)};em.prototype.keyFromSecret=function(a){return gk.fromSecret(this,a)};em.prototype.makeSignature=
function(a){return a instanceof Mr?a:new Mr(this,a)};em.prototype.encodePoint=function(a){var d=a.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=a.getX().isOdd()?128:0,d};em.prototype.decodePoint=function(a){var d=(a=ih.parseBytes(a)).length-1,k=a.slice(0,d).concat(-129&a[d]);a=0!=(128&a[d]);k=ih.intFromLE(k);return this.curve.pointFromY(k,a)};em.prototype.encodeInt=function(a){return a.toArray("le",this.encodingLength)};em.prototype.decodeInt=function(a){return ih.intFromLE(a)};
em.prototype.isPoint=function(a){return a instanceof this.pointClass};var Oq={version:"6.5.2"};Oq.utils=ih;Oq.rand=xI;Oq.curve=Ox;Oq.curves=CI;Oq.ec=nn;Oq.eddsa=em;var QM={},BY=!1,Bm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,hk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,nY={},kka=Wg;nY.Reporter=on;on.prototype.isError=function(a){return a instanceof Rw};on.prototype.save=function(){var a=(this||hk)._reporterState;return{obj:a.obj,
pathLen:a.path.length}};on.prototype.restore=function(a){var d=(this||hk)._reporterState;d.obj=a.obj;d.path=d.path.slice(0,a.pathLen)};on.prototype.enterKey=function(a){return(this||hk)._reporterState.path.push(a)};on.prototype.exitKey=function(a){var d=(this||hk)._reporterState;d.path=d.path.slice(0,a-1)};on.prototype.leaveKey=function(a,d,k){var b=(this||hk)._reporterState;this.exitKey(a);null!==b.obj&&(b.obj[d]=k)};on.prototype.path=function(){return(this||hk)._reporterState.path.join("/")};on.prototype.enterObject=
function(){var a=(this||hk)._reporterState,d=a.obj;return a.obj={},d};on.prototype.leaveObject=function(a){var d=(this||hk)._reporterState,k=d.obj;return d.obj=a,k};on.prototype.error=function(a){var d=(this||hk)._reporterState,k=a instanceof Rw;if(a=k?a:new Rw(d.path.map(function(b){return"["+JSON.stringify(b)+"]"}).join(""),a.message||a,a.stack),!d.options.partial)throw a;return k||d.errors.push(a),a};on.prototype.wrapResult=function(a){var d=(this||hk)._reporterState;return d.options.partial?{result:this.isError(a)?
null:a,errors:d.errors}:a};kka(Rw,Error);Rw.prototype.rethrow=function(a){if((this||hk).message=a+" at: "+((this||hk).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||hk,Rw),!(this||hk).stack)try{throw Error((this||hk).message);}catch(d){(this||hk).stack=d.stack}return this||hk};var VE={},lY=!1,og="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,FM={},oY=!1,Lf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,EM={},
mY=!1,Nr={},rY=!1,GM={},qY=!1,HM={},tY=!1,Or="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,KM={},vY=!1,JM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,IM={},uY=!1,LM={},xY=!1,ik="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,OM={},zY=!1,NM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,MM={},yY=!1,PM={},AY=!1,Bj=WE(),t4=Bj.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),lka=Bj.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),KQ=Bj.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),mka=Bj.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(KQ),this.key("subjectPublicKey").bitstr())}),nka=Bj.define("RelativeDistinguishedName",function(){this.setof(lka)}),
oka=Bj.define("RDNSequence",function(){this.seqof(nka)}),u4=Bj.define("Name",function(){this.choice({rdnSequence:this.use(oka)})}),pka=Bj.define("Validity",function(){this.seq().obj(this.key("notBefore").use(t4),this.key("notAfter").use(t4))}),qka=Bj.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),rka=Bj.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),
this.key("signature").use(KQ),this.key("issuer").use(u4),this.key("validity").use(pka),this.key("subject").use(u4),this.key("subjectPublicKeyInfo").use(mka),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(qka).optional())}),ska=Bj.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(rka),this.key("signatureAlgorithm").use(KQ),this.key("signatureValue").bitstr())}),
Do={};Do.certificate=ska;var tka=Bj.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Do.RSAPrivateKey=tka;var uka=Bj.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Do.RSAPublicKey=
uka;var vka=Bj.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(v4),this.key("subjectPublicKey").bitstr())});Do.PublicKey=vka;var v4=Bj.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),wka=Bj.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(v4),this.key("subjectPrivateKey").octstr())});Do.PrivateKey=wka;var xka=Bj.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
Do.EncryptedPrivateKey=xka;var yka=Bj.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Do.DSAPrivateKey=yka;Do.DSAparam=Bj.define("DSAparam",function(){this.int()});var Aka=Bj.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(zka),this.key("publicKey").optional().explicit(1).bitstr())});
Do.ECPrivateKey=Aka;var zka=Bj.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});Do.signature=Bj.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var Raa=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,Taa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,Saa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,XE=Mh.Buffer,fm=Do,Uaa={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},Waa=Cm,Vaa=sI,RM=Mh.Buffer;Sw.signature=fm.signature;var w4={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},LQ={},sl=Ng.Buffer,au=L3,Bka=Oq.ec,YE=Oj;(LQ=function(a,d,k,b,e){d=Sw(d);if(d.curve){if("ecdsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong private key type");return function(l,p){var q=w4[p.curve.join(".")];if(!q)throw Error("unknown curve "+p.curve.join("."));l=(new Bka(q)).keyFromPrivate(p.privateKey).sign(l);return new sl(l.toDER())}(a,d)}if("dsa"===d.type){if("dsa"!==b)throw Error("wrong private key type");
return function(l,p,q){var u=p.params.priv_key,w=p.params.p,y=p.params.q;p=p.params.g;var A=new YE(0),C=SM(l,y).mod(y);var D=!1;for(l=CY(u,y,l,q);!1===D;){A=D=DY(y,l,q);var L=y;A=p.toRed(YE.mont(w)).redPow(A).fromRed().mod(L);0===(D=D.invm(y).imul(C.add(u.mul(A))).mod(y)).cmpn(0)&&(D=!1,A=new YE(0))}q=D;u=A.toArray();q=q.toArray();128&u[0]&&(u=[0].concat(u));128&q[0]&&(q=[0].concat(q));w=[48,u.length+q.length+4,2,u.length];return w=w.concat(u,[2,q.length],q),new sl(w)}(a,d,k)}if("rsa"!==b&&"ecdsa/rsa"!==
b)throw Error("wrong private key type");a=sl.concat([e,a]);b=d.modulus.byteLength();for(k=[0,1];a.length+k.length+1<b;)k.push(255);k.push(0);for(b=-1;++b<a.length;)k.push(a[b]);return QE(k,d)}).getKey=CY;LQ.makeKey=DY;var MQ=Ng.Buffer,AB=Oj,Cka=Oq.ec,wj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,EI=Ng.Buffer,FY=vB,ZE=gu,x4=Wg,Dka=LQ,Eka=function(a,d,k,b,e){k=Sw(k);if("ec"===k.type){if("ecdsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong public key type");return function(q,
u,w){var y=w4[w.data.algorithm.curve.join(".")];if(!y)throw Error("unknown curve "+w.data.algorithm.curve.join("."));return(new Cka(y)).verify(u,q,w.data.subjectPrivateKey.data)}(a,d,k)}if("dsa"===k.type){if("dsa"!==b)throw Error("wrong public key type");return function(q,u,w){var y=w.data.p,A=w.data.q,C=w.data.g;w=w.data.pub_key;var D=Sw.signature.decode(q,"der");q=D.s;D=D.r;EY(q,A);EY(D,A);var L=AB.mont(y);q=q.invm(A);return 0===C.toRed(L).redPow((new AB(u)).mul(q).mod(A)).fromRed().mul(w.toRed(L).redPow(D.mul(q).mod(A)).fromRed()).mod(y).mod(A).cmp(D)}(a,
d,k)}if("rsa"!==b&&"ecdsa/rsa"!==b)throw Error("wrong public key type");d=MQ.concat([e,d]);e=k.modulus.byteLength();b=[1];for(var l=0;d.length+b.length+2<e;)b.push(255),l++;b.push(0);for(var p=-1;++p<d.length;)b.push(d[p]);b=new MQ(b);d=AB.mont(k.modulus);a=(a=(new AB(a)).toRed(d)).redPow(new AB(k.publicExponent));a=new MQ(a.fromRed().toArray());d=8>l?1:0;e=Math.min(a.length,b.length);a.length!==b.length&&(d=1);for(p=-1;++p<e;)d|=a[p]^b[p];return 0===d},bu=M3;Object.keys(bu).forEach(function(a){bu[a].id=
new EI(bu[a].id,"hex");bu[a.toLowerCase()]=bu[a]});x4(Oz,ZE.Writable);Oz.prototype._write=function(a,d,k){(this||wj)._hash.update(a);k()};Oz.prototype.update=function(a,d){return"string"==typeof a&&(a=new EI(a,d)),(this||wj)._hash.update(a),this||wj};Oz.prototype.sign=function(a,d){this.end();var k=(this||wj)._hash.digest();a=Dka(k,a,(this||wj)._hashType,(this||wj)._signType,(this||wj)._tag);return d?a.toString(d):a};x4(Pz,ZE.Writable);Pz.prototype._write=function(a,d,k){(this||wj)._hash.update(a);
k()};Pz.prototype.update=function(a,d){return"string"==typeof a&&(a=new EI(a,d)),(this||wj)._hash.update(a),this||wj};Pz.prototype.verify=function(a,d,k){"string"==typeof d&&(d=new EI(d,k));this.end();k=(this||wj)._hash.digest();return Eka(d,k,a,(this||wj)._signType,(this||wj)._tag)};var jk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,sq=Ng.Buffer,Xaa=Oq,Fka=Oj,Dm={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};Dm.p224=Dm.secp224r1;Dm.p256=Dm.secp256r1=Dm.prime256v1;Dm.p192=Dm.secp192r1=Dm.prime192v1;Dm.p384=Dm.secp384r1;Dm.p521=Dm.secp521r1;cu.prototype.generateKeys=function(a,d){return(this||jk).keys=(this||jk).curve.genKeyPair(),this.getPublicKey(a,d)};cu.prototype.computeSecret=function(a,d,k){return d=d||"utf8",sq.isBuffer(a)||(a=new sq(a,
d)),TM((this||jk).curve.keyFromPublic(a).getPublic().mul((this||jk).keys.getPrivate()).getX(),k,(this||jk).curveType.byteLength)};cu.prototype.getPublicKey=function(a,d){var k=(this||jk).keys.getPublic("compressed"===d,!0);return"hybrid"===d&&(k[k.length-1]%2?k[0]=7:k[0]=6),TM(k,a)};cu.prototype.getPrivateKey=function(a){return TM((this||jk).keys.getPrivate(),a)};cu.prototype.setPublicKey=function(a,d){return d=d||"utf8",sq.isBuffer(a)||(a=new sq(a,d)),(this||jk).keys._importPublic(a),this||jk};cu.prototype.setPrivateKey=
function(a,d){d=d||"utf8";sq.isBuffer(a)||(a=new sq(a,d));a=new Fka(a);return a=a.toString(16),(this||jk).keys=(this||jk).curve.genKeyPair(),(this||jk).keys._importPrivate(a),this||jk};var NQ=Mh.Buffer,FI=function(a,d){for(var k,b=NQ.alloc(0),e=0;b.length<d;){k=e++;var l=NQ.allocUnsafe(4);k=(l.writeUInt32BE(k,0),l);b=NQ.concat([b,vB("sha1").update(a).update(k).digest()])}return b.slice(0,d)},GI=function(a,d){for(var k=a.length,b=-1;++b<k;)a[b]^=d[b];return a},y4=Oj,Gka=Mh.Buffer,z4=function(a,d){return Gka.from(a.toRed(y4.mont(d.modulus)).redPow(new y4(d.publicExponent)).fromRed().toArray())},
OQ=Oj,Eo=Mh.Buffer,A4=Oj,BB=Mh.Buffer,Qx={publicEncrypt:function(a,d,k){var b=a.padding?a.padding:k?1:4;a=Sw(a);if(4===b)d=function(e,l){e=e.modulus.byteLength();var p=l.length,q=vB("sha1").update(Eo.alloc(0)).digest(),u=q.length,w=2*u;if(p>e-w-2)throw Error("message too long");w=Eo.alloc(e-p-w-2);var y=e-u-1;p=rs(u);l=GI(Eo.concat([q,w,Eo.alloc(1,1),l],y),FI(p,y));u=GI(p,FI(l,u));return new OQ(Eo.concat([Eo.alloc(1),u,l],e))}(a,d);else if(1===b)d=function(e,l,p){var q=l.length;e=e.modulus.byteLength();
if(q>e-11)throw Error("message too long");if(p)var u=Eo.alloc(e-q-3,255);else{q=e-q-3;for(var w=Eo.allocUnsafe(q),y=0,A=rs(2*q),C=0;y<q;)C===A.length&&(A=rs(2*q),C=0),(u=A[C++])&&(w[y++]=u);u=w}return new OQ(Eo.concat([Eo.from([0,p?1:2]),u,Eo.alloc(1),l],e))}(a,d,k);else{if(3!==b)throw Error("unknown padding");if(0<=(d=new OQ(d)).cmp(a.modulus))throw Error("data too long for modulus");}return k?QE(d,a):z4(d,a)},privateDecrypt:function(a,d,k){var b=a.padding?a.padding:k?1:4;a=Sw(a);var e=a.modulus.byteLength();
if(d.length>e||0<=(new A4(d)).cmp(a.modulus))throw Error("decryption error");d=k?z4(new A4(d),a):QE(d,a);var l=BB.alloc(e-d.length);if(d=BB.concat([l,d],e),4===b)return function(p,q){var u=p.modulus.byteLength(),w=vB("sha1").update(BB.alloc(0)).digest();p=w.length;if(0!==q[0])throw Error("decryption error");var y=q.slice(1,p+1);q=q.slice(p+1);y=GI(y,FI(q,p));u=GI(q,FI(y,u-p-1));q=u.slice(0,p);w=BB.from(w);q=BB.from(q);y=0;var A=w.length;w.length!==q.length&&(y++,A=Math.min(w.length,q.length));for(var C=
-1;++C<A;)y+=w[C]^q[C];if(y)throw Error("decryption error");for(;0===u[p];)p++;if(1!==u[p++])throw Error("decryption error");return u.slice(p)}(a,d);if(1===b)return function(p,q,u){p=q.slice(0,2);for(var w=2,y=0;0!==q[w++];)if(w>=q.length){y++;break}var A=q.slice(2,w-1);("0002"!==p.toString("hex")&&!u||"0001"!==p.toString("hex")&&u)&&y++;8>A.length&&y++;if(y)throw Error("decryption error");return q.slice(w)}(0,d,k);if(3===b)return d;throw Error("unknown padding");},privateEncrypt:function(a,d){return Qx.publicEncrypt(a,
d,!0)},publicDecrypt:function(a,d){return Qx.privateDecrypt(a,d,!0)}},HI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,PQ,QQ,UM=yh,OY=rs,B4=Mh.Buffer,LY=Mh.kMaxLength,VM=HI.crypto||HI.msCrypto,KY=Math.pow(2,32)-1;VM&&VM.getRandomValues||!UM.browser?(PQ=function(a,d,k,b){if(!(B4.isBuffer(a)||a instanceof HI.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof d)b=d,d=0,k=a.length;else if("function"==typeof k)b=k,k=a.length-
d;else if("function"!=typeof b)throw new TypeError('"cb" argument must be a function');return JY(d,a.length),MY(k,d,a.length),NY(a,d,k,b)},QQ=function(a,d,k){void 0===d&&(d=0);if(!(B4.isBuffer(a)||a instanceof HI.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');JY(d,a.length);void 0===k&&(k=a.length-d);return MY(k,d,a.length),NY(a,d,k)}):(PQ=IY,QQ=IY);var hg={};hg.randomBytes=hg.rng=hg.pseudoRandomBytes=hg.prng=rs;hg.createHash=hg.Hash=vB;hg.createHmac=hg.Hmac=L3;var Hka=
Object.keys(M3),Ika="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(Hka);hg.getHashes=function(){return Ika};hg.pbkdf2=sI.pbkdf2;hg.pbkdf2Sync=sI.pbkdf2Sync;hg.Cipher=Y3;hg.createCipher=Dja;hg.Cipheriv=sM;hg.createCipheriv=sM;hg.Decipher=Z3;hg.createDecipher=Eja;hg.Decipheriv=uM;hg.createDecipheriv=uM;hg.getCiphers=$3;hg.listCiphers=Fja;hg.DiffieHellmanGroup=Nja;hg.createDiffieHellmanGroup=e4;hg.getDiffieHellman=f4;hg.createDiffieHellman=Oja;hg.DiffieHellman=g4;hg.createSign=GY;hg.Sign=
GY;hg.createVerify=HY;hg.Verify=HY;hg.createECDH=function(a){return new cu(a)};hg.publicEncrypt=Qx.publicEncrypt;hg.privateEncrypt=Qx.privateEncrypt;hg.publicDecrypt=Qx.publicDecrypt;hg.privateDecrypt=Qx.privateDecrypt;hg.randomFill=PQ;hg.randomFillSync=QQ;hg.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};hg.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,
DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var Ip={};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.default=function(){return Jka.default.randomFillSync(Kka)};var Jka=hg&&hg.__esModule?hg:{default:hg},Kka=new Uint8Array(16),Rl={};Object.defineProperty(Rl,"__esModule",
{value:!0});Rl.default=void 0;for(var hl=[],RQ=0;256>RQ;++RQ)hl.push((RQ+256).toString(16).substr(1));Rl.default=function(a,d){d=d||0;return(hl[a[d+0]]+hl[a[d+1]]+hl[a[d+2]]+hl[a[d+3]]+"-"+hl[a[d+4]]+hl[a[d+5]]+"-"+hl[a[d+6]]+hl[a[d+7]]+"-"+hl[a[d+8]]+hl[a[d+9]]+"-"+hl[a[d+10]]+hl[a[d+11]]+hl[a[d+12]]+hl[a[d+13]]+hl[a[d+14]]+hl[a[d+15]]).toLowerCase()};var II={};Object.defineProperty(II,"__esModule",{value:!0});II.default=void 0;var Lka=Ip&&Ip.__esModule?Ip:{default:Ip},Mka=Rl&&Rl.__esModule?Rl:{default:Rl},
C4,SQ,TQ=0,UQ=0;II.default=function(a,d,k){k=d&&k||0;var b=d||[];a=a||{};var e=a.node||C4,l=void 0!==a.clockseq?a.clockseq:SQ;if(null==e||null==l){var p=a.random||(a.rng||Lka.default)();null==e&&(e=C4=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]);null==l&&(l=SQ=(p[6]<<8|p[7])&16383)}p=void 0!==a.msecs?a.msecs:Date.now();var q=void 0!==a.nsecs?a.nsecs:UQ+1,u=p-TQ+(q-UQ)/1E4;0>u&&void 0===a.clockseq&&(l=l+1&16383);(0>u||p>TQ)&&void 0===a.nsecs&&(q=0);if(1E4<=q)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
TQ=p;UQ=q;SQ=l;p+=122192928E5;a=(1E4*(p&268435455)+q)%4294967296;b[k++]=a>>>24&255;b[k++]=a>>>16&255;b[k++]=a>>>8&255;b[k++]=a&255;a=p/4294967296*1E4&268435455;b[k++]=a>>>8&255;b[k++]=a&255;b[k++]=a>>>24&15|16;b[k++]=a>>>16&255;b[k++]=l>>>8|128;b[k++]=l&255;for(l=0;6>l;++l)b[k+l]=e[l];return d||(0,Mka.default)(b)};var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.default=function(a,d,k){function b(e,l,p,q){q=p&&q||0;if("string"===typeof e){e=unescape(encodeURIComponent(e));for(var u=
[],w=0;w<e.length;++w)u.push(e.charCodeAt(w));e=u}"string"===typeof l&&(l=Yaa(l));if(!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(l)||16!==l.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");l=k(l.concat(e));l[6]=l[6]&15|d;l[8]=l[8]&63|128;if(p)for(e=0;16>e;++e)p[q+e]=l[e];return p||(0,Nka.default)(l)}try{b.name=a}catch(e){}b.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";b.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return b};
pm.URL=pm.DNS=void 0;var Nka=Rl&&Rl.__esModule?Rl:{default:Rl};pm.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";pm.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var Pu={},D4=Ng.Buffer;Object.defineProperty(Pu,"__esModule",{value:!0});Pu.default=void 0;var Oka=hg&&hg.__esModule?hg:{default:hg};Pu.default=function(a){Array.isArray(a)?a=D4.from(a):"string"===typeof a&&(a=D4.from(a,"utf8"));return Oka.default.createHash("md5").update(a).digest()};var JI={};Object.defineProperty(JI,"__esModule",{value:!0});
JI.default=void 0;var Pka=pm&&pm.__esModule?pm:{default:pm},Qka=Pu&&Pu.__esModule?Pu:{default:Pu},Rka=(0,Pka.default)("v3",48,Qka.default);JI.default=Rka;var KI={};Object.defineProperty(KI,"__esModule",{value:!0});KI.default=void 0;var Ska=Ip&&Ip.__esModule?Ip:{default:Ip},Tka=Rl&&Rl.__esModule?Rl:{default:Rl};KI.default=function(a,d,k){"string"===typeof a&&(d="binary"===a?new Uint8Array(16):null,a=null);a=a||{};a=a.random||(a.rng||Ska.default)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(d){k=k||0;for(var b=
0;16>b;++b)d[k+b]=a[b];return d}return(0,Tka.default)(a)};var Qu={},E4=Ng.Buffer;Object.defineProperty(Qu,"__esModule",{value:!0});Qu.default=void 0;var Uka=hg&&hg.__esModule?hg:{default:hg};Qu.default=function(a){Array.isArray(a)?a=E4.from(a):"string"===typeof a&&(a=E4.from(a,"utf8"));return Uka.default.createHash("sha1").update(a).digest()};var LI={};Object.defineProperty(LI,"__esModule",{value:!0});LI.default=void 0;var Vka=pm&&pm.__esModule?pm:{default:pm},Wka=Qu&&Qu.__esModule?Qu:{default:Qu},
Xka=(0,Vka.default)("v5",80,Wka.default);LI.default=Xka;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Object.defineProperty(Ru,"v1",{enumerable:!0,get:function(){return Yka.default}});Object.defineProperty(Ru,"v3",{enumerable:!0,get:function(){return Zka.default}});Object.defineProperty(Ru,"v4",{enumerable:!0,get:function(){return $ka.default}});Object.defineProperty(Ru,"v5",{enumerable:!0,get:function(){return ala.default}});var Yka=$E(II),Zka=$E(JI),$ka=$E(KI),ala=$E(LI),il={};Object.defineProperty(il,
"__esModule",{value:!0});il.atob=function(a){return F4(a)};il.btoa=function(a){return G4(a)};il.base64StringToBlobOrBuffer=function(a,d){return RY(F4(a),d)};il.binaryStringToArrayBuffer=QY;il.binaryStringToBlobOrBuffer=RY;il.blob=PY;il.blobOrBufferToBase64=function(a,d){TY(a,function(k){d(G4(k))})};il.blobOrBufferToBinaryString=TY;il.readAsArrayBuffer=function(a,d){var k=new FileReader;k.onloadend=function(b){b=b.target.result||new ArrayBuffer(0);d(b)};k.readAsArrayBuffer(a)};il.readAsBinaryString=
SY;il.typedBuffer=function(){};var F4=il.atob,G4=il.btoa,Ig="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bla={},CB=bla=function(a){function d(y,A){var C=y[0],D=y[1],L=y[2],I=y[3];C+=(D&L|~D&I)+A[0]-680876936|0;C=(C<<7|C>>>25)+D|0;I+=(C&D|~C&L)+A[1]-389564586|0;I=(I<<12|I>>>20)+C|0;L+=(I&C|~I&D)+A[2]+606105819|0;L=(L<<17|L>>>15)+I|0;D+=(L&I|~L&C)+A[3]-1044525330|0;D=(D<<22|D>>>10)+L|0;C+=(D&L|~D&I)+A[4]-176418897|0;C=(C<<7|C>>>25)+D|0;I+=(C&D|~C&L)+A[5]+1200080426|
0;I=(I<<12|I>>>20)+C|0;L+=(I&C|~I&D)+A[6]-1473231341|0;L=(L<<17|L>>>15)+I|0;D+=(L&I|~L&C)+A[7]-45705983|0;D=(D<<22|D>>>10)+L|0;C+=(D&L|~D&I)+A[8]+1770035416|0;C=(C<<7|C>>>25)+D|0;I+=(C&D|~C&L)+A[9]-1958414417|0;I=(I<<12|I>>>20)+C|0;L+=(I&C|~I&D)+A[10]-42063|0;L=(L<<17|L>>>15)+I|0;D+=(L&I|~L&C)+A[11]-1990404162|0;D=(D<<22|D>>>10)+L|0;C+=(D&L|~D&I)+A[12]+1804603682|0;C=(C<<7|C>>>25)+D|0;I+=(C&D|~C&L)+A[13]-40341101|0;I=(I<<12|I>>>20)+C|0;L+=(I&C|~I&D)+A[14]-1502002290|0;L=(L<<17|L>>>15)+I|0;D+=(L&I|
~L&C)+A[15]+1236535329|0;D=(D<<22|D>>>10)+L|0;C+=(D&I|L&~I)+A[1]-165796510|0;C=(C<<5|C>>>27)+D|0;I+=(C&L|D&~L)+A[6]-1069501632|0;I=(I<<9|I>>>23)+C|0;L+=(I&D|C&~D)+A[11]+643717713|0;L=(L<<14|L>>>18)+I|0;D+=(L&C|I&~C)+A[0]-373897302|0;D=(D<<20|D>>>12)+L|0;C+=(D&I|L&~I)+A[5]-701558691|0;C=(C<<5|C>>>27)+D|0;I+=(C&L|D&~L)+A[10]+38016083|0;I=(I<<9|I>>>23)+C|0;L+=(I&D|C&~D)+A[15]-660478335|0;L=(L<<14|L>>>18)+I|0;D+=(L&C|I&~C)+A[4]-405537848|0;D=(D<<20|D>>>12)+L|0;C+=(D&I|L&~I)+A[9]+568446438|0;C=(C<<5|C>>>
27)+D|0;I+=(C&L|D&~L)+A[14]-1019803690|0;I=(I<<9|I>>>23)+C|0;L+=(I&D|C&~D)+A[3]-187363961|0;L=(L<<14|L>>>18)+I|0;D+=(L&C|I&~C)+A[8]+1163531501|0;D=(D<<20|D>>>12)+L|0;C+=(D&I|L&~I)+A[13]-1444681467|0;C=(C<<5|C>>>27)+D|0;I+=(C&L|D&~L)+A[2]-51403784|0;I=(I<<9|I>>>23)+C|0;L+=(I&D|C&~D)+A[7]+1735328473|0;L=(L<<14|L>>>18)+I|0;D+=(L&C|I&~C)+A[12]-1926607734|0;D=(D<<20|D>>>12)+L|0;C+=(D^L^I)+A[5]-378558|0;C=(C<<4|C>>>28)+D|0;I+=(C^D^L)+A[8]-2022574463|0;I=(I<<11|I>>>21)+C|0;L+=(I^C^D)+A[11]+1839030562|0;
L=(L<<16|L>>>16)+I|0;D+=(L^I^C)+A[14]-35309556|0;D=(D<<23|D>>>9)+L|0;C+=(D^L^I)+A[1]-1530992060|0;C=(C<<4|C>>>28)+D|0;I+=(C^D^L)+A[4]+1272893353|0;I=(I<<11|I>>>21)+C|0;L+=(I^C^D)+A[7]-155497632|0;L=(L<<16|L>>>16)+I|0;D+=(L^I^C)+A[10]-1094730640|0;D=(D<<23|D>>>9)+L|0;C+=(D^L^I)+A[13]+681279174|0;C=(C<<4|C>>>28)+D|0;I+=(C^D^L)+A[0]-358537222|0;I=(I<<11|I>>>21)+C|0;L+=(I^C^D)+A[3]-722521979|0;L=(L<<16|L>>>16)+I|0;D+=(L^I^C)+A[6]+76029189|0;D=(D<<23|D>>>9)+L|0;C+=(D^L^I)+A[9]-640364487|0;C=(C<<4|C>>>
28)+D|0;I+=(C^D^L)+A[12]-421815835|0;I=(I<<11|I>>>21)+C|0;L+=(I^C^D)+A[15]+530742520|0;L=(L<<16|L>>>16)+I|0;D+=(L^I^C)+A[2]-995338651|0;D=(D<<23|D>>>9)+L|0;C+=(L^(D|~I))+A[0]-198630844|0;C=(C<<6|C>>>26)+D|0;I+=(D^(C|~L))+A[7]+1126891415|0;I=(I<<10|I>>>22)+C|0;L+=(C^(I|~D))+A[14]-1416354905|0;L=(L<<15|L>>>17)+I|0;D+=(I^(L|~C))+A[5]-57434055|0;D=(D<<21|D>>>11)+L|0;C+=(L^(D|~I))+A[12]+1700485571|0;C=(C<<6|C>>>26)+D|0;I+=(D^(C|~L))+A[3]-1894986606|0;I=(I<<10|I>>>22)+C|0;L+=(C^(I|~D))+A[10]-1051523|0;
L=(L<<15|L>>>17)+I|0;D+=(I^(L|~C))+A[1]-2054922799|0;D=(D<<21|D>>>11)+L|0;C+=(L^(D|~I))+A[8]+1873313359|0;C=(C<<6|C>>>26)+D|0;I+=(D^(C|~L))+A[15]-30611744|0;I=(I<<10|I>>>22)+C|0;L+=(C^(I|~D))+A[6]-1560198380|0;L=(L<<15|L>>>17)+I|0;D+=(I^(L|~C))+A[13]+1309151649|0;D=(D<<21|D>>>11)+L|0;C+=(L^(D|~I))+A[4]-145523070|0;C=(C<<6|C>>>26)+D|0;I+=(D^(C|~L))+A[11]-1120210379|0;I=(I<<10|I>>>22)+C|0;L+=(C^(I|~D))+A[2]+718787259|0;L=(L<<15|L>>>17)+I|0;D+=(I^(L|~C))+A[9]-343485551|0;y[0]=C+y[0]|0;y[1]=((D<<21|D>>>
11)+L|0)+y[1]|0;y[2]=L+y[2]|0;y[3]=I+y[3]|0}function k(y){var A=[],C;for(C=0;64>C;C+=4)A[C>>2]=y.charCodeAt(C)+(y.charCodeAt(C+1)<<8)+(y.charCodeAt(C+2)<<16)+(y.charCodeAt(C+3)<<24);return A}function b(y){var A=[],C;for(C=0;64>C;C+=4)A[C>>2]=y[C]+(y[C+1]<<8)+(y[C+2]<<16)+(y[C+3]<<24);return A}function e(y){var A=y.length,C=[1732584193,-271733879,-1732584194,271733878],D;for(D=64;D<=A;D+=64)d(C,k(y.substring(D-64,D)));y=y.substring(D-64);var L=y.length;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(D=
0;D<L;D+=1)I[D>>2]|=y.charCodeAt(D)<<(D%4<<3);I[D>>2]|=128<<(D%4<<3);if(55<D)for(d(C,I),D=0;16>D;D+=1)I[D]=0;A=(8*A).toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(A[2],16);A=parseInt(A[1],16)||0;I[14]=y;I[15]=A;d(C,I);return C}function l(y){var A;for(A=0;A<y.length;A+=1){var C=A,D,L=y[A],I="";for(D=0;4>D;D+=1)I+=w[L>>8*D+4&15]+w[L>>8*D&15];y[C]=I}return y.join("")}function p(y){/[\u0080-\uFFFF]/.test(y)&&(y=unescape(encodeURIComponent(y)));return y}function q(y){var A=[],C=y.length,D;for(D=0;D<
C-1;D+=2)A.push(parseInt(y.substr(D,2),16));return String.fromCharCode.apply(String,A)}function u(){this.reset()}var w="0123456789abcdef".split("");l(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function y(A,C){A=A|0||0;return 0>A?Math.max(A+C,0):Math.min(A,C)}ArrayBuffer.prototype.slice=function(A,C){var D=(this||Ig).byteLength;A=y(A,D);var L=D;C!==a&&(L=y(C,D));if(A>L)return new ArrayBuffer(0);L-=A;C=new ArrayBuffer(L);D=new Uint8Array(C);A=new Uint8Array(this||
Ig,A,L);D.set(A);return C}}();u.prototype.append=function(y){this.appendBinary(p(y));return this||Ig};u.prototype.appendBinary=function(y){(this||Ig)._buff+=y;(this||Ig)._length+=y.length;y=(this||Ig)._buff.length;var A;for(A=64;A<=y;A+=64)d((this||Ig)._hash,k((this||Ig)._buff.substring(A-64,A)));(this||Ig)._buff=(this||Ig)._buff.substring(A-64);return this||Ig};u.prototype.end=function(y){var A=(this||Ig)._buff,C=A.length,D,L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(D=0;D<C;D+=1)L[D>>2]|=A.charCodeAt(D)<<
(D%4<<3);this._finish(L,C);A=l((this||Ig)._hash);y&&(A=q(A));this.reset();return A};u.prototype.reset=function(){(this||Ig)._buff="";(this||Ig)._length=0;(this||Ig)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Ig};u.prototype.getState=function(){return{buff:(this||Ig)._buff,length:(this||Ig)._length,hash:(this||Ig)._hash.slice()}};u.prototype.setState=function(y){(this||Ig)._buff=y.buff;(this||Ig)._length=y.length;(this||Ig)._hash=y.hash;return this||Ig};u.prototype.destroy=function(){delete (this||
Ig)._hash;delete (this||Ig)._buff;delete (this||Ig)._length};u.prototype._finish=function(y,A){y[A>>2]|=128<<(A%4<<3);if(55<A)for(d((this||Ig)._hash,y),A=0;16>A;A+=1)y[A]=0;var C=8*(this||Ig)._length;C=C.toString(16).match(/(.*?)(.{0,8})$/);A=parseInt(C[2],16);C=parseInt(C[1],16)||0;y[14]=A;y[15]=C;d((this||Ig)._hash,y)};u.hash=function(y,A){return u.hashBinary(p(y),A)};u.hashBinary=function(y,A){y=e(y);y=l(y);return A?q(y):y};u.ArrayBuffer=function(){this.reset()};u.ArrayBuffer.prototype.append=
function(y){var A=(this||Ig)._buff.buffer,C=new Uint8Array(A.byteLength+y.byteLength);C.set(new Uint8Array(A));C.set(new Uint8Array(y),A.byteLength);A=C.length;(this||Ig)._length+=y.byteLength;for(y=64;y<=A;y+=64)d((this||Ig)._hash,b(C.subarray(y-64,y)));(this||Ig)._buff=y-64<A?new Uint8Array(C.buffer.slice(y-64)):new Uint8Array(0);return this||Ig};u.ArrayBuffer.prototype.end=function(y){var A=(this||Ig)._buff,C=A.length,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L;for(L=0;L<C;L+=1)D[L>>2]|=A[L]<<(L%4<<
3);this._finish(D,C);A=l((this||Ig)._hash);y&&(A=q(A));this.reset();return A};u.ArrayBuffer.prototype.reset=function(){(this||Ig)._buff=new Uint8Array(0);(this||Ig)._length=0;(this||Ig)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Ig};u.ArrayBuffer.prototype.getState=function(){var y=u.prototype.getState.call(this||Ig);y.buff=String.fromCharCode.apply(null,new Uint8Array(y.buff));return y};u.ArrayBuffer.prototype.setState=function(y){var A=y.buff,C=A.length,D=new ArrayBuffer(C);
D=new Uint8Array(D);var L;for(L=0;L<C;L+=1)D[L]=A.charCodeAt(L);y.buff=D;return u.prototype.setState.call(this||Ig,y)};u.ArrayBuffer.prototype.destroy=u.prototype.destroy;u.ArrayBuffer.prototype._finish=u.prototype._finish;u.ArrayBuffer.hash=function(y,A){var C=new Uint8Array(y),D=C.length;y=[1732584193,-271733879,-1732584194,271733878];var L;for(L=64;L<=D;L+=64)d(y,b(C.subarray(L-64,L)));C=L-64<D?C.subarray(L-64):new Uint8Array(0);var I=C.length;var S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(L=0;L<
I;L+=1)S[L>>2]|=C[L]<<(L%4<<3);S[L>>2]|=128<<(L%4<<3);if(55<L)for(d(y,S),L=0;16>L;L+=1)S[L]=0;D=(8*D).toString(16).match(/(.*?)(.{0,8})$/);C=parseInt(D[2],16);D=parseInt(D[1],16)||0;S[14]=C;S[15]=D;d(y,S);y=l(y);return A?q(y):y};return u}(),Rx={};Object.defineProperty(Rx,"__esModule",{value:!0});var UY=il,VQ=CB&&"object"===typeof CB&&"default"in CB?CB["default"]:CB,cla=self.setImmediate||self.setTimeout;Rx.binaryMd5=function(a,d){function k(){cla(e)}function b(){var C=y.end(!0);C=UY.btoa(C);d(C);
y.destroy()}function e(){var C=w*q,D=C+q;w++;w<u?A(y,a,C,D,k):A(y,a,C,D,b)}var l="string"===typeof a,p=l?a.length:a.size,q=Math.min(32768,p),u=Math.ceil(p/q),w=0,y=l?new VQ:new VQ.ArrayBuffer,A=l?aba:$aa;e()};Rx.stringMd5=function(a){return VQ.hash(a)};var mg={};Object.defineProperty(mg,"__esModule",{value:!0});var WM=aF(gQ),dla=aF(bj),H4=aF(Zh),cF=aF(ap),VY=Function.prototype.toString,bba=VY.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var bF=!!localStorage.getItem("_pouch_check_localstorage")}catch(a){bF=
!1}dla(Tw,cF);Tw.prototype.addListener=function(a,d,k,b){function e(){if(l._listeners[d])if(p)p="waiting";else{p=!0;var q=XM(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));k.changes(q).on("change",function(u){u.seq>b.since&&!b.cancelled&&(b.since=u.seq,b.onChange(u))}).on("complete",function(){"waiting"===p&&H4(e);p=!1}).on("error",function(){p=!1})}}if(!this._listeners[d]){var l=this,p=!1;this._listeners[d]=e;this.on(a,e)}};Tw.prototype.removeListener=
function(a,d){d in this._listeners&&(cF.prototype.removeListener.call(this,a,this._listeners[d]),delete this._listeners[d])};Tw.prototype.notifyLocalWindows=function(a){bF&&(localStorage[a]="a"===localStorage[a]?"b":"a")};Tw.prototype.notify=function(a){this.emit(a);this.notifyLocalWindows(a)};var ela="function"===typeof Object.assign?Object.assign:function(a){for(var d=Object(a),k=1;k<arguments.length;k++){var b=arguments[k];if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d[e]=
b[e])}return d},fla=function(){}.name?function(a){return a.name}:function(a){return(a=a.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&a[1]?a[1]:""},I4="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),gla=/(?:^|&)([^&=]*)=?([^&]*)/g,hla=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
ila=Ru.v4;mg.adapterFun=function(a,d){return XY(WM(function(k){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var b=this;cba(b,a,k);return this.taskqueue.isReady?d.apply(this,k):new Promise(function(e,l){b.taskqueue.addTask(function(p){p?l(p):e(b[a].apply(b,k))})})}))};mg.assign=ela;mg.bulkGetShim=function(a,d,k){function b(){var D=[];y.forEach(function(L){L.docs.forEach(function(I){D.push({id:L.id,docs:[I]})})});
k(null,{results:D})}function e(){if(!(C>=A.length)){var D=A.slice(C,Math.min(C+6,A.length));l(D,C);C+=D.length}}function l(D,L){D.forEach(function(I,S){var V=L+S;S=q.get(I);var ba=XM(S[0],["atts_since","attachments"]);ba.open_revs=S.map(function(Fa){return Fa.rev});ba.open_revs=ba.open_revs.filter(YY);var ua=YY;0===ba.open_revs.length&&(delete ba.open_revs,ua=dba);["revs","attachments","binary","ajax","latest"].forEach(function(Fa){Fa in d&&(ba[Fa]=d[Fa])});a.get(I,ba,function(Fa,F){Fa=Fa?[{error:Fa}]:
ua(F);y[V]={id:I,docs:Fa};++w===u&&b();e()})})}var p=d.docs,q=new qs.Map;p.forEach(function(D){q.has(D.id)?q.get(D.id).push(D):q.set(D.id,[D])});var u=q.size,w=0,y=Array(u),A=[];q.forEach(function(D,L){A.push(L)});var C=0;e()};mg.changesHandler=Tw;mg.clone=Qz;mg.defaultBackOff=function(a){var d=0;a||(d=2E3);a=parseInt(a,10)||0;d=parseInt(d,10);d=d!==d||d<=a?(a||1)<<1:d+1;6E5<d&&(a=3E5,d=6E5);return~~((d-a)*Math.random()+a)};mg.explainError=function(a,d){YM("info","The above "+a+" is totally normal. "+
d)};mg.filterChange=function(a){var d={},k=a.filter&&"function"===typeof a.filter;d.query=a.query_params;return function(b){b.doc||(b.doc={});var e;if(e=k)try{e=!(0,a.filter)(b.doc,d)}catch(p){e=Gf.createError(Gf.BAD_REQUEST,"Filter function threw: "+p.toString())}if("object"===typeof e)return e;if(e)return!1;if(!a.include_docs)delete b.doc;else if(!a.attachments)for(var l in b.doc._attachments)b.doc._attachments.hasOwnProperty(l)&&(b.doc._attachments[l].stub=!0);return!0}};mg.flatten=function(a){for(var d=
[],k=0,b=a.length;k<b;k++)d=d.concat(a[k]);return d};mg.functionName=fla;mg.guardedConsole=YM;mg.hasLocalStorage=function(){return bF};mg.invalidIdError=function(a){var d;a?"string"!==typeof a?d=Gf.createError(Gf.INVALID_ID):/^_/.test(a)&&!/^_(design|local)/.test(a)&&(d=Gf.createError(Gf.RESERVED_ID)):d=Gf.createError(Gf.MISSING_ID);if(d)throw d;};mg.isRemote=function(a){return"boolean"===typeof a._remote?a._remote:"function"===typeof a.type?(YM("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===a.type()):!1};mg.listenerCount=function(a,d){return"listenerCount"in a?a.listenerCount(d):cF.listenerCount(a,d)};mg.nextTick=H4;mg.normalizeDdocFunctionName=function(a){return(a=ZY(a))?a.join("/"):null};mg.once=WY;mg.parseDdocFunctionName=ZY;mg.parseUri=function(a){a=hla.exec(a);for(var d={},k=14;k--;){var b=I4[k],e=a[k]||"",l=-1!==["user","password"].indexOf(b);d[b]=l?decodeURIComponent(e):e}d.queryKey={};d[I4[12]].replace(gla,function(p,q,u){q&&(d.queryKey[q]=u)});return d};mg.pick=XM;
mg.rev=function(a,d){a=Qz(a);if(!d)return Ru.v4().replace(/-/g,"").toLowerCase();delete a._rev_tree;return Rx.stringMd5(JSON.stringify(a))};mg.scopeEval=function(a,d){var k=[],b=[],e;for(e in d)d.hasOwnProperty(e)&&(k.push(e),b.push(d[e]));k.push(a);return Function.apply(null,k).apply(null,b)};mg.toPromise=XY;mg.upsert=$Y;mg.uuid=ila;var J4={};J4=function(){for(var a={},d=0;d<arguments.length;d++){var k=arguments[d],b;for(b in k)jla.call(k,b)&&(a[b]=k[b])}return a};var jla=Object.prototype.hasOwnProperty,
xs=J4,K4={};K4=function(a){for(var d=1;d<arguments.length;d++){var k=arguments[d],b;for(b in k)kla.call(k,b)&&(a[b]=k[b])}return a};for(var kla=Object.prototype.hasOwnProperty,lla={},mla=K4,L4=lla=function(){var a=xs.apply(null,arguments);return mla(a,{bufferKeys:a.bufferKeys||!1,snapshots:a.snapshots||!1,permanence:a.permanence||!1,seek:a.seek||!1,clear:a.clear||!1,status:a.status||!1,createIfMissing:a.createIfMissing||!1,errorIfExists:a.errorIfExists||!1,deferredOpen:a.deferredOpen||!1,openCallback:a.openCallback||
!1,promises:a.promises||!1,streams:a.streams||!1,encodings:a.encodings||!1,additionalMethods:xs(a.additionalMethods)})},hp=[],In=[],nla="undefined"!==typeof Uint8Array?Uint8Array:Array,Sx=0;64>Sx;++Sx)hp[Sx]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[Sx],In["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Sx)]=Sx;In[45]=62;In[95]=63;var dF={byteLength:function(a){a=aZ(a);var d=a[1];return 3*(a[0]+d)/4-d},toByteArray:function(a){var d=aZ(a);var k=
d[0];d=d[1];var b=new nla(3*(k+d)/4-d),e=0,l=0<d?k-4:k,p;for(p=0;p<l;p+=4)k=In[a.charCodeAt(p)]<<18|In[a.charCodeAt(p+1)]<<12|In[a.charCodeAt(p+2)]<<6|In[a.charCodeAt(p+3)],b[e++]=k>>16&255,b[e++]=k>>8&255,b[e++]=k&255;2===d&&(k=In[a.charCodeAt(p)]<<2|In[a.charCodeAt(p+1)]>>4,b[e++]=k&255);1===d&&(k=In[a.charCodeAt(p)]<<10|In[a.charCodeAt(p+1)]<<4|In[a.charCodeAt(p+2)]>>2,b[e++]=k>>8&255,b[e++]=k&255);return b},fromByteArray:function(a){for(var d=a.length,k=d%3,b=[],e=0,l=d-k;e<l;e+=16383)b.push(gba(a,
e,e+16383>l?l:e+16383));1===k?(a=a[d-1],b.push(hp[a>>2]+hp[a<<4&63]+"==")):2===k&&(a=(a[d-2]<<8)+a[d-1],b.push(hp[a>>10]+hp[a>>4&63]+hp[a<<2&63]+"="));return b.join("")}},Uw={read:function(a,d,k,b,e){var l=8*e-b-1;var p=(1<<l)-1,q=p>>1,u=-7;e=k?e-1:0;var w=k?-1:1,y=a[d+e];e+=w;k=y&(1<<-u)-1;y>>=-u;for(u+=l;0<u;k=256*k+a[d+e],e+=w,u-=8);l=k&(1<<-u)-1;k>>=-u;for(u+=b;0<u;l=256*l+a[d+e],e+=w,u-=8);if(0===k)k=1-q;else{if(k===p)return l?NaN:Infinity*(y?-1:1);l+=Math.pow(2,b);k-=q}return(y?-1:1)*l*Math.pow(2,
k-b)},write:function(a,d,k,b,e,l){var p,q=8*l-e-1,u=(1<<q)-1,w=u>>1,y=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;l=b?0:l-1;var A=b?1:-1,C=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,b=u):(b=Math.floor(Math.log(d)/Math.LN2),1>d*(p=Math.pow(2,-b))&&(b--,p*=2),d=1<=b+w?d+y/p:d+y*Math.pow(2,1-w),2<=d*p&&(b++,p/=2),b+w>=u?(d=0,b=u):1<=b+w?(d=(d*p-1)*Math.pow(2,e),b+=w):(d=d*Math.pow(2,w-1)*Math.pow(2,e),b=0));for(;8<=e;a[k+l]=d&255,l+=A,d/=256,e-=8);b=b<<e|d;for(q+=e;0<q;a[k+
l]=b&255,l+=A,b/=256,q-=8);a[k+l-A]|=128*C}},M4="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var N4=Od;var ZM=2147483647;Od.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1),d={foo:function(){return 42}};Object.setPrototypeOf(d,Uint8Array.prototype);Object.setPrototypeOf(a,d);return 42===a.foo()}catch(k){return!1}}();Od.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(Od.prototype,"parent",{enumerable:!0,get:function(){if(Od.isBuffer(this))return this.buffer}});Object.defineProperty(Od.prototype,"offset",{enumerable:!0,get:function(){if(Od.isBuffer(this))return this.byteOffset}});Od.poolSize=8192;Od.from=function(a,d,k){return bZ(a,d,k)};Object.setPrototypeOf(Od.prototype,Uint8Array.prototype);Object.setPrototypeOf(Od,Uint8Array);Od.alloc=function(a,d,k){eZ(a);a=0>=a?tq(a):void 0!==d?"string"===typeof k?tq(a).fill(d,k):tq(a).fill(d):tq(a);
return a};Od.allocUnsafe=function(a){return $M(a)};Od.allocUnsafeSlow=function(a){return $M(a)};Od.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==Od.prototype};Od.compare=function(a,d){ip(a,Uint8Array)&&(a=Od.from(a,a.offset,a.byteLength));ip(d,Uint8Array)&&(d=Od.from(d,d.offset,d.byteLength));if(!Od.isBuffer(a)||!Od.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===d)return 0;for(var k=a.length,b=d.length,e=0,l=Math.min(k,
b);e<l;++e)if(a[e]!==d[e]){k=a[e];b=d[e];break}return k<b?-1:b<k?1:0};Od.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};Od.concat=function(a,d){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return Od.alloc(0);var k;if(void 0===d)for(k=d=0;k<a.length;++k)d+=a[k].length;
d=Od.allocUnsafe(d);var b=0;for(k=0;k<a.length;++k){var e=a[k];if(ip(e,Uint8Array))b+e.length>d.length?Od.from(e).copy(d,b):Uint8Array.prototype.set.call(d,e,b);else if(Od.isBuffer(e))e.copy(d,b);else throw new TypeError('"list" argument must be an Array of Buffers');b+=e.length}return d};Od.byteLength=cZ;Od.prototype._isBuffer=!0;Od.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<a;d+=2)du(this,d,d+1);return this};
Od.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var d=0;d<a;d+=4)du(this,d,d+3),du(this,d+1,d+2);return this};Od.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<a;d+=8)du(this,d,d+7),du(this,d+1,d+6),du(this,d+2,d+5),du(this,d+3,d+4);return this};Od.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?
gZ(this,0,a):iba.apply(this,arguments)};Od.prototype.toLocaleString=Od.prototype.toString;Od.prototype.equals=function(a){if(!Od.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===Od.compare(this,a)};Od.prototype.inspect=function(){var a=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(a+=" ... ");return"<Buffer "+a+">"};M4&&(Od.prototype[M4]=Od.prototype.inspect);Od.prototype.compare=function(a,d,k,b,e){ip(a,Uint8Array)&&(a=Od.from(a,a.offset,
a.byteLength));if(!Od.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);void 0===d&&(d=0);void 0===k&&(k=a?a.length:0);void 0===b&&(b=0);void 0===e&&(e=this.length);if(0>d||k>a.length||0>b||e>this.length)throw new RangeError("out of range index");if(b>=e&&d>=k)return 0;if(b>=e)return-1;if(d>=k)return 1;d>>>=0;k>>>=0;b>>>=0;e>>>=0;if(this===a)return 0;var l=e-b,p=k-d,q=Math.min(l,p);b=this.slice(b,e);a=a.slice(d,k);for(d=0;d<
q;++d)if(b[d]!==a[d]){l=b[d];p=a[d];break}return l<p?-1:p<l?1:0};Od.prototype.includes=function(a,d,k){return-1!==this.indexOf(a,d,k)};Od.prototype.indexOf=function(a,d,k){return hZ(this,a,d,k,!0)};Od.prototype.lastIndexOf=function(a,d,k){return hZ(this,a,d,k,!1)};Od.prototype.write=function(a,d,k,b){if(void 0===d)b="utf8",k=this.length,d=0;else if(void 0===k&&"string"===typeof d)b=d,k=this.length,d=0;else if(isFinite(d))d>>>=0,isFinite(k)?(k>>>=0,void 0===b&&(b="utf8")):(b=k,k=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var e=this.length-d;if(void 0===k||k>e)k=e;if(0<a.length&&(0>k||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(e=!1;;)switch(b){case "hex":a:{d=Number(d)||0;b=this.length-d;k?(k=Number(k),k>b&&(k=b)):k=b;b=a.length;k>b/2&&(k=b/2);for(b=0;b<k;++b){e=parseInt(a.substr(2*b,2),16);if(e!==e){a=b;break a}this[d+b]=e}a=b}return a;case "utf8":case "utf-8":return eF(cN(a,this.length-d),this,d,k);case "ascii":case "latin1":case "binary":b=[];for(e=0;e<a.length;++e)b.push(a.charCodeAt(e)&
255);return eF(b,this,d,k);case "base64":return eF(dF.toByteArray(fZ(a)),this,d,k);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=a;e=this.length-d;for(var l=[],p=0;p<b.length&&!(0>(e-=2));++p){var q=b.charCodeAt(p);a=q>>8;q%=256;l.push(q);l.push(a)}return eF(l,this,d,k);default:if(e)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();e=!0}};Od.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var jZ=4096;Od.prototype.slice=
function(a,d){var k=this.length;a=~~a;d=void 0===d?k:~~d;0>a?(a+=k,0>a&&(a=0)):a>k&&(a=k);0>d?(d+=k,0>d&&(d=0)):d>k&&(d=k);d<a&&(d=a);a=this.subarray(a,d);Object.setPrototypeOf(a,Od.prototype);return a};Od.prototype.readUintLE=Od.prototype.readUIntLE=function(a,d,k){a>>>=0;d>>>=0;k||Jk(a,d,this.length);k=this[a];for(var b=1,e=0;++e<d&&(b*=256);)k+=this[a+e]*b;return k};Od.prototype.readUintBE=Od.prototype.readUIntBE=function(a,d,k){a>>>=0;d>>>=0;k||Jk(a,d,this.length);k=this[a+--d];for(var b=1;0<
d&&(b*=256);)k+=this[a+--d]*b;return k};Od.prototype.readUint8=Od.prototype.readUInt8=function(a,d){a>>>=0;d||Jk(a,1,this.length);return this[a]};Od.prototype.readUint16LE=Od.prototype.readUInt16LE=function(a,d){a>>>=0;d||Jk(a,2,this.length);return this[a]|this[a+1]<<8};Od.prototype.readUint16BE=Od.prototype.readUInt16BE=function(a,d){a>>>=0;d||Jk(a,2,this.length);return this[a]<<8|this[a+1]};Od.prototype.readUint32LE=Od.prototype.readUInt32LE=function(a,d){a>>>=0;d||Jk(a,4,this.length);return(this[a]|
this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};Od.prototype.readUint32BE=Od.prototype.readUInt32BE=function(a,d){a>>>=0;d||Jk(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};Od.prototype.readIntLE=function(a,d,k){a>>>=0;d>>>=0;k||Jk(a,d,this.length);k=this[a];for(var b=1,e=0;++e<d&&(b*=256);)k+=this[a+e]*b;k>=128*b&&(k-=Math.pow(2,8*d));return k};Od.prototype.readIntBE=function(a,d,k){a>>>=0;d>>>=0;k||Jk(a,d,this.length);k=d;for(var b=1,e=this[a+--k];0<k&&(b*=256);)e+=
this[a+--k]*b;e>=128*b&&(e-=Math.pow(2,8*d));return e};Od.prototype.readInt8=function(a,d){a>>>=0;d||Jk(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};Od.prototype.readInt16LE=function(a,d){a>>>=0;d||Jk(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};Od.prototype.readInt16BE=function(a,d){a>>>=0;d||Jk(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};Od.prototype.readInt32LE=function(a,d){a>>>=0;d||Jk(a,4,this.length);return this[a]|this[a+
1]<<8|this[a+2]<<16|this[a+3]<<24};Od.prototype.readInt32BE=function(a,d){a>>>=0;d||Jk(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};Od.prototype.readFloatLE=function(a,d){a>>>=0;d||Jk(a,4,this.length);return Uw.read(this,a,!0,23,4)};Od.prototype.readFloatBE=function(a,d){a>>>=0;d||Jk(a,4,this.length);return Uw.read(this,a,!1,23,4)};Od.prototype.readDoubleLE=function(a,d){a>>>=0;d||Jk(a,8,this.length);return Uw.read(this,a,!0,52,8)};Od.prototype.readDoubleBE=function(a,
d){a>>>=0;d||Jk(a,8,this.length);return Uw.read(this,a,!1,52,8)};Od.prototype.writeUintLE=Od.prototype.writeUIntLE=function(a,d,k,b){a=+a;d>>>=0;k>>>=0;b||gm(this,a,d,k,Math.pow(2,8*k)-1,0);b=1;var e=0;for(this[d]=a&255;++e<k&&(b*=256);)this[d+e]=a/b&255;return d+k};Od.prototype.writeUintBE=Od.prototype.writeUIntBE=function(a,d,k,b){a=+a;d>>>=0;k>>>=0;b||gm(this,a,d,k,Math.pow(2,8*k)-1,0);b=k-1;var e=1;for(this[d+b]=a&255;0<=--b&&(e*=256);)this[d+b]=a/e&255;return d+k};Od.prototype.writeUint8=Od.prototype.writeUInt8=
function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,1,255,0);this[d]=a&255;return d+1};Od.prototype.writeUint16LE=Od.prototype.writeUInt16LE=function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,2,65535,0);this[d]=a&255;this[d+1]=a>>>8;return d+2};Od.prototype.writeUint16BE=Od.prototype.writeUInt16BE=function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,2,65535,0);this[d]=a>>>8;this[d+1]=a&255;return d+2};Od.prototype.writeUint32LE=Od.prototype.writeUInt32LE=function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,4,4294967295,0);this[d+3]=
a>>>24;this[d+2]=a>>>16;this[d+1]=a>>>8;this[d]=a&255;return d+4};Od.prototype.writeUint32BE=Od.prototype.writeUInt32BE=function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,4,4294967295,0);this[d]=a>>>24;this[d+1]=a>>>16;this[d+2]=a>>>8;this[d+3]=a&255;return d+4};Od.prototype.writeIntLE=function(a,d,k,b){a=+a;d>>>=0;b||(b=Math.pow(2,8*k-1),gm(this,a,d,k,b-1,-b));b=0;var e=1,l=0;for(this[d]=a&255;++b<k&&(e*=256);)0>a&&0===l&&0!==this[d+b-1]&&(l=1),this[d+b]=(a/e>>0)-l&255;return d+k};Od.prototype.writeIntBE=
function(a,d,k,b){a=+a;d>>>=0;b||(b=Math.pow(2,8*k-1),gm(this,a,d,k,b-1,-b));b=k-1;var e=1,l=0;for(this[d+b]=a&255;0<=--b&&(e*=256);)0>a&&0===l&&0!==this[d+b+1]&&(l=1),this[d+b]=(a/e>>0)-l&255;return d+k};Od.prototype.writeInt8=function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,1,127,-128);0>a&&(a=255+a+1);this[d]=a&255;return d+1};Od.prototype.writeInt16LE=function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,2,32767,-32768);this[d]=a&255;this[d+1]=a>>>8;return d+2};Od.prototype.writeInt16BE=function(a,d,k){a=+a;d>>>=
0;k||gm(this,a,d,2,32767,-32768);this[d]=a>>>8;this[d+1]=a&255;return d+2};Od.prototype.writeInt32LE=function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,4,2147483647,-2147483648);this[d]=a&255;this[d+1]=a>>>8;this[d+2]=a>>>16;this[d+3]=a>>>24;return d+4};Od.prototype.writeInt32BE=function(a,d,k){a=+a;d>>>=0;k||gm(this,a,d,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[d]=a>>>24;this[d+1]=a>>>16;this[d+2]=a>>>8;this[d+3]=a&255;return d+4};Od.prototype.writeFloatLE=function(a,d,k){return lZ(this,a,d,
!0,k)};Od.prototype.writeFloatBE=function(a,d,k){return lZ(this,a,d,!1,k)};Od.prototype.writeDoubleLE=function(a,d,k){return mZ(this,a,d,!0,k)};Od.prototype.writeDoubleBE=function(a,d,k){return mZ(this,a,d,!1,k)};Od.prototype.copy=function(a,d,k,b){if(!Od.isBuffer(a))throw new TypeError("argument should be a Buffer");k||(k=0);b||0===b||(b=this.length);d>=a.length&&(d=a.length);d||(d=0);0<b&&b<k&&(b=k);if(b===k||0===a.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");
if(0>k||k>=this.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length);a.length-d<b-k&&(b=a.length-d+k);var e=b-k;this===a&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(d,k,b):Uint8Array.prototype.set.call(a,this.subarray(k,b),d);return e};Od.prototype.fill=function(a,d,k,b){if("string"===typeof a){"string"===typeof d?(b=d,d=0,k=this.length):"string"===typeof k&&(b=k,k=this.length);if(void 0!==
b&&"string"!==typeof b)throw new TypeError("encoding must be a string");if("string"===typeof b&&!Od.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===a.length){var e=a.charCodeAt(0);if("utf8"===b&&128>e||"latin1"===b)a=e}}else"number"===typeof a?a&=255:"boolean"===typeof a&&(a=Number(a));if(0>d||this.length<d||this.length<k)throw new RangeError("Out of range index");if(k<=d)return this;d>>>=0;k=void 0===k?this.length:k>>>0;a||(a=0);if("number"===typeof a)for(b=d;b<k;++b)this[b]=a;else{e=
Od.isBuffer(a)?a:Od.from(a,b);var l=e.length;if(0===l)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(b=0;b<k-d;++b)this[b+d]=e[b%l]}return this};var kba=/[^+/0-9A-Za-z-_]/g,jba=function(){for(var a=Array(256),d=0;16>d;++d)for(var k=16*d,b=0;16>b;++b)a[k+b]="0123456789abcdef"[d]+"0123456789abcdef"[b];return a}(),uq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ola={};Pr.prototype.next=function(a){var d=this||uq;if("function"!==typeof a)throw Error("next() requires a callback argument");
if(d._ended)return Zh(a,Error("cannot call next() after end()")),d;if(d._nexting)return Zh(a,Error("cannot call next() before previous next() has completed")),d;d._nexting=!0;d._next(function(){d._nexting=!1;a.apply(null,arguments)});return d};Pr.prototype._next=function(a){Zh(a)};Pr.prototype.seek=function(a){if((this||uq)._ended)throw Error("cannot call seek() after end()");if((this||uq)._nexting)throw Error("cannot call seek() before next() has completed");a=(this||uq).db._serializeKey(a);this._seek(a)};
Pr.prototype._seek=function(a){};Pr.prototype.end=function(a){if("function"!==typeof a)throw Error("end() requires a callback argument");if((this||uq)._ended)return Zh(a,Error("end() already called on iterator"));(this||uq)._ended=!0;this._end(a)};Pr.prototype._end=function(a){Zh(a)};Pr.prototype._nextTick=Zh;var O4=ola=Pr,kk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pla={};jo.prototype._checkWritten=function(){if((this||kk)._written)throw Error("write() already called on this batch");
};jo.prototype.put=function(a,d){this._checkWritten();var k=(this||kk).db._checkKey(a)||(this||kk).db._checkValue(d);if(k)throw k;a=(this||kk).db._serializeKey(a);d=(this||kk).db._serializeValue(d);this._put(a,d);return this||kk};jo.prototype._put=function(a,d){(this||kk)._operations.push({type:"put",key:a,value:d})};jo.prototype.del=function(a){this._checkWritten();var d=(this||kk).db._checkKey(a);if(d)throw d;a=(this||kk).db._serializeKey(a);this._del(a);return this||kk};jo.prototype._del=function(a){(this||
kk)._operations.push({type:"del",key:a})};jo.prototype.clear=function(){this._checkWritten();this._clear();return this||kk};jo.prototype._clear=function(){(this||kk)._operations=[]};jo.prototype.write=function(a,d){this._checkWritten();"function"===typeof a&&(d=a);if("function"!==typeof d)throw Error("write() requires a callback argument");if("object"!==typeof a||null===a)a={};(this||kk)._written=!0;this._write(a,d)};jo.prototype._write=function(a,d){(this||kk).db._batch((this||kk)._operations,a,
d)};jo.prototype._nextTick=Zh;var qla=pla=jo,Em="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,P4={},lba=L4,mba=Object.prototype.hasOwnProperty,nba="start end gt gte lt lte".split(" ");gj.prototype.open=function(a,d){var k=this||Em,b=(this||Em).status;"function"===typeof a&&(d=a);if("function"!==typeof d)throw Error("open() requires a callback argument");if("object"!==typeof a||null===a)a={};a.createIfMissing=!1!==a.createIfMissing;a.errorIfExists=!!a.errorIfExists;
(this||Em).status="opening";this._open(a,function(e){if(e)return k.status=b,d(e);k.status="open";d()})};gj.prototype._open=function(a,d){Zh(d)};gj.prototype.close=function(a){var d=this||Em,k=(this||Em).status;if("function"!==typeof a)throw Error("close() requires a callback argument");(this||Em).status="closing";this._close(function(b){if(b)return d.status=k,a(b);d.status="closed";a()})};gj.prototype._close=function(a){Zh(a)};gj.prototype.get=function(a,d,k){"function"===typeof d&&(k=d);if("function"!==
typeof k)throw Error("get() requires a callback argument");var b=this._checkKey(a);if(b)return Zh(k,b);a=this._serializeKey(a);if("object"!==typeof d||null===d)d={};d.asBuffer=!1!==d.asBuffer;this._get(a,d,k)};gj.prototype._get=function(a,d,k){Zh(function(){k(Error("NotFound"))})};gj.prototype.put=function(a,d,k,b){"function"===typeof k&&(b=k);if("function"!==typeof b)throw Error("put() requires a callback argument");var e=this._checkKey(a)||this._checkValue(d);if(e)return Zh(b,e);a=this._serializeKey(a);
d=this._serializeValue(d);if("object"!==typeof k||null===k)k={};this._put(a,d,k,b)};gj.prototype._put=function(a,d,k,b){Zh(b)};gj.prototype.del=function(a,d,k){"function"===typeof d&&(k=d);if("function"!==typeof k)throw Error("del() requires a callback argument");var b=this._checkKey(a);if(b)return Zh(k,b);a=this._serializeKey(a);if("object"!==typeof d||null===d)d={};this._del(a,d,k)};gj.prototype._del=function(a,d,k){Zh(k)};gj.prototype.batch=function(a,d,k){if(!arguments.length)return this._chainedBatch();
"function"===typeof d&&(k=d);"function"===typeof a&&(k=a);if("function"!==typeof k)throw Error("batch(array) requires a callback argument");if(!Array.isArray(a))return Zh(k,Error("batch(array) requires an array argument"));if(0===a.length)return Zh(k);if("object"!==typeof d||null===d)d={};for(var b=Array(a.length),e=0;e<a.length;e++){if("object"!==typeof a[e]||null===a[e])return Zh(k,Error("batch(array) element must be an object and not `null`"));var l=xs(a[e]);if("put"!==l.type&&"del"!==l.type)return Zh(k,
Error("`type` must be 'put' or 'del'"));var p=this._checkKey(l.key);if(p)return Zh(k,p);l.key=this._serializeKey(l.key);if("put"===l.type){if(p=this._checkValue(l.value))return Zh(k,p);l.value=this._serializeValue(l.value)}b[e]=l}this._batch(b,d,k)};gj.prototype._batch=function(a,d,k){Zh(k)};gj.prototype.clear=function(a,d){if("function"===typeof a)d=a;else if("function"!==typeof d)throw Error("clear() requires a callback argument");a=nZ(this||Em,a);a.reverse=!!a.reverse;a.limit="limit"in a?a.limit:
-1;this._clear(a,d)};gj.prototype._clear=function(a,d){a.keys=!0;a.values=!1;a.keyAsBuffer=!0;a.valueAsBuffer=!0;var k=this._iterator(a),b={},e=this||Em,l=function(p){if(p)return k.end(function(){d(p)});k.next(function(q,u){if(q)return l(q);if(void 0===u)return k.end(d);e._del(u,b,l)})};l()};gj.prototype._setupIteratorOptions=function(a){a=nZ(this||Em,a);a.reverse=!!a.reverse;a.keys=!1!==a.keys;a.values=!1!==a.values;a.limit="limit"in a?a.limit:-1;a.keyAsBuffer=!1!==a.keyAsBuffer;a.valueAsBuffer=
!1!==a.valueAsBuffer;return a};gj.prototype.iterator=function(a){if("object"!==typeof a||null===a)a={};a=this._setupIteratorOptions(a);return this._iterator(a)};gj.prototype._iterator=function(a){return new O4(this||Em)};gj.prototype._chainedBatch=function(){return new qla(this||Em)};gj.prototype._serializeKey=function(a){return a};gj.prototype._serializeValue=function(a){return a};gj.prototype._checkKey=function(a){if(null===a||void 0===a)return Error("key cannot be `null` or `undefined`");if(N4.isBuffer(a)&&
0===a.length)return Error("key cannot be an empty Buffer");if(""===a)return Error("key cannot be an empty String");if(Array.isArray(a)&&0===a.length)return Error("key cannot be an empty Array")};gj.prototype._checkValue=function(a){if(null===a||void 0===a)return Error("value cannot be `null` or `undefined`")};gj.prototype._nextTick=Zh;P4=gj;var rla=P4;var ko="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Q4={},oZ=O4;bj(Vw,oZ);Vw.prototype.setDb=function(a){var d=
(this||ko)._iterator=a.iterator((this||ko)._options);(this||ko)._operations.forEach(function(k){d[k.method].apply(d,k.args)})};Vw.prototype._operation=function(a,d){if((this||ko)._iterator)return(this||ko)._iterator[a].apply((this||ko)._iterator,d);(this||ko)._operations.push({method:a,args:d})};["next","end"].forEach(function(a){Vw.prototype["_"+a]=function(){this._operation(a,arguments)}});Vw.prototype.seek=function(){this._operation("seek",arguments)};Q4=Vw;var Kk="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,WQ={},pZ=rla,sZ=Q4,rZ=["put","get","del","batch","clear"],oba=["approximateSize","compactRange"];bj(eu,pZ);eu.prototype.type="deferred-leveldown";eu.prototype._open=function(a,d){var k=this||Kk;(this||Kk)._db.open(a,function(b){if(b)return d(b);k._operations.forEach(function(e){e.iterator?e.iterator.setDb(k._db):k._db[e.method].apply(k._db,e.args)});k._operations=[];pba(k);d()})};eu.prototype._close=function(a){var d=this||Kk;(this||Kk)._db.close(function(k){if(k)return a(k);
qZ(d);a()})};eu.prototype._serializeKey=function(a){return a};eu.prototype._serializeValue=function(a){return a};WQ=eu;WQ.DeferredIterator=sZ;var sla=WQ,vZ={},uZ=!1,dN={},wZ=!1,fN="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tla={},Bba=tla=function(a,d){if(eN("noDeprecation"))return a;var k=!1;return function(){if(!k){if(eN("throwDeprecation"))throw Error(d);eN("traceDeprecation")?console.trace(d):console.warn(d);k=!0}return a.apply(this||fN,arguments)}},MI={},
NI=Ng,jp=NI.Buffer;jp.from&&jp.alloc&&jp.allocUnsafe&&jp.allocUnsafeSlow?MI=NI:(xZ(NI,MI),MI.Buffer=fu);fu.prototype=Object.create(jp.prototype);xZ(jp,fu);fu.from=function(a,d,k){if("number"===typeof a)throw new TypeError("Argument must not be a number");return jp(a,d,k)};fu.alloc=function(a,d,k){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=jp(a);void 0!==d?"string"===typeof k?a.fill(d,k):a.fill(d):a.fill(0);return a};fu.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");
return jp(a)};fu.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return NI.SlowBuffer(a)};var lN={},gN=MI.Buffer,yZ=gN.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};lN.StringDecoder=Rz;Rz.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var d=
this.fillLast(a);if(void 0===d)return"";var k=this.lastNeed;this.lastNeed=0}else k=0;return k<a.length?d?d+this.text(a,k):this.text(a,k):d||""};Rz.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};Rz.prototype.text=function(a,d){var k=yba(this,a,d);if(!this.lastNeed)return a.toString("utf8",d);this.lastTotal=k;k=a.length-(k-this.lastNeed);a.copy(this.lastChar,0,k);return a.toString("utf8",d,k)};Rz.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};var AZ={},zZ=!1,CZ={},BZ=!1,FZ=Object.freeze({}),EZ={},DZ=!1,IZ={},HZ=!1,LZ={},KZ=!1,jN={},NZ=!1,Cba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kN={},OZ=!1,RZ={},QZ=!1,mN={},SZ=!1,Eba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,nN={},UZ=!1,
XQ={},R4=!1,S4={},T4=!1,Pm={},U4=!1;U4||(U4=!0,Pm=Pm=PZ(),Pm.Stream=Pm,Pm.Readable=Pm,Pm.Writable=MZ(),Pm.Duplex=Xw(),Pm.Transform=TZ(),Pm.PassThrough=function(){function a(k){if(!(this instanceof a))return new a(k);d.call(this,k)}if(R4)return XQ;R4=!0;XQ=a;var d=TZ();bj(a,d);a.prototype._transform=function(k,b,e){e(null,k)};return XQ}(),Pm.finished=iN(),Pm.pipeline=function(){function a(w){var y=!1;return function(){y||(y=!0,w.apply(void 0,arguments))}}function d(w){if(w)throw w;}function k(w,y,
A,C){C=a(C);var D=!1;w.on("close",function(){D=!0});void 0===l&&(l=iN());l(w,{readable:y,writable:A},function(I){if(I)return C(I);D=!0;C()});var L=!1;return function(I){if(!D&&!L){L=!0;if(w.setHeader&&"function"===typeof w.abort)return w.abort();if("function"===typeof w.destroy)return w.destroy();C(I||new u("pipe"))}}}function b(w){w()}function e(w,y){return w.pipe(y)}if(T4)return S4;T4=!0;var l,p=Ww().codes,q=p.ERR_MISSING_ARGS,u=p.ERR_STREAM_DESTROYED;return S4=function(){for(var w=arguments.length,
y=Array(w),A=0;A<w;A++)y[A]=arguments[A];var C=y.length?"function"!==typeof y[y.length-1]?d:y.pop():d;Array.isArray(y[0])&&(y=y[0]);if(2>y.length)throw new q("streams");var D,L=y.map(function(I,S){var V=S<y.length-1;return k(I,V,0<S,function(ba){D||(D=ba);ba&&L.forEach(b);V||(L.forEach(b),C(D))})});return y.reduce(e)}}());var V4=Pm;var lo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,W4={},ula=bj,VZ=V4.Readable,Fba=xs;W4=Yw;ula(Yw,VZ);Yw.prototype._read=function(){var a=
this||lo,d=(this||lo)._options;(this||lo).destroyed||(this||lo)._iterator.next(function(k,b,e){if(!a.destroyed){if(k)return a.destroy(k);void 0===b&&void 0===e?a.push(null):!1!==d.keys&&!1===d.values?a.push(b):!1===d.keys&&!1!==d.values?a.push(e):a.push({key:b,value:e})}})};Yw.prototype._destroy=function(a,d){(this||lo)._iterator.end(function(k){d(a||k)})};var vla=W4,OI={};(function(a,d,k){OI?OI=k():d[a]=k()})("prr",OI,function(){var a="function"==typeof Object.defineProperty?function(k,b,e){Object.defineProperty(k,
b,e);return k}:function(k,b,e){k[b]=e.value;return k},d=function(k,b){var e="object"==typeof b,l=!e&&"string"==typeof b,p=function(q){return e?!!b[q]:l?-1<b.indexOf(q[0]):!1};return{enumerable:p("enumerable"),configurable:p("configurable"),writable:p("writable"),value:k}};return function(k,b,e,l){var p;l=d(e,l);if("object"==typeof b){for(p in b)Object.hasOwnProperty.call(b,p)&&(l.value=b[p],a(k,p,l));return k}return a(k,b,l)}});var Pj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,wla={},Gba=OI;oN.prototype=Error();var xla=wla=function(a){var d=function(k,b){return Hba(a,k,b)};return{CustomError:oN,FilesystemError:d("FilesystemError"),createError:d}},Jp={},yla=Jp.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},
{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},
{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},
{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",
description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},
{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];Jp.errno={};Jp.code={};yla.forEach(function(a){Jp.errno[a.errno]=a;Jp.code[a.code]=a});Jp.custom=xla(Jp);
Jp.create=Jp.custom.createError;var zla={},Su=Jp.create,Tu=Su("LevelUPError"),YQ=Su("NotFoundError",Tu);YQ.prototype.notFound=!0;YQ.prototype.status=404;var Uu=zla={LevelUPError:Tu,InitializationError:Su("InitializationError",Tu),OpenError:Su("OpenError",Tu),ReadError:Su("ReadError",Tu),WriteError:Su("WriteError",Tu),NotFoundError:YQ,EncodingError:Su("EncodingError",Tu)},Ala={},ys=Ala=function(){var a,d=new Promise(function(k,b){a=function(e,l){e?b(e):k(l)}});a.promise=d;return a};var Tx=function(a,
d){return"function"===typeof a?a:d};var X4=function(a){return"object"===typeof a&&null!==a?a:{}};var Qj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bla={},DB=Uu.WriteError;Sz.prototype.put=function(a,d){try{(this||Qj).batch.put(a,d)}catch(k){throw new DB(k);}(this||Qj).ops.push({type:"put",key:a,value:d});(this||Qj).length++;return this||Qj};Sz.prototype.del=function(a){try{(this||Qj).batch.del(a)}catch(d){throw new DB(d);}(this||Qj).ops.push({type:"del",key:a});
(this||Qj).length++;return this||Qj};Sz.prototype.clear=function(){try{(this||Qj).batch.clear()}catch(a){throw new DB(a);}(this||Qj).ops=[];(this||Qj).length=0;return this||Qj};Sz.prototype.write=function(a,d){var k=(this||Qj)._levelup,b=(this||Qj).ops;d=Tx(a,d);if(!d){d=ys();var e=d.promise}a=X4(a);try{(this||Qj).batch.write(a,function(l){if(l)return d(new DB(l));k.emit("batch",b);d()})}catch(l){throw new DB(l);}return e};var Cla=Bla=Sz,Tba={assign:XZ,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:XZ})}},Y4=Object.prototype.toString,Z4=function(a){var d=Y4.call(a),k="[object Arguments]"===d;return k||(k="[object Array]"!==d&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&0<=a.length&&"[object Function]"===Y4.call(a.callee)),k};if(!Object.keys){var PI=Object.prototype.hasOwnProperty,$4=Object.prototype.toString,a5=Object.prototype.propertyIsEnumerable,Dla=!a5.call({toString:null},"toString"),Ela=a5.call(function(){},"prototype"),
QI="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),ZQ=function(a){var d=a.constructor;return d&&d.prototype===a},Fla={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,
$window:!0},Gla=function(){if("undefined"==typeof window)return!1;for(var a in window)try{if(!Fla["$"+a]&&PI.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{ZQ(window[a])}catch(d){return!0}}catch(d){return!0}return!1}();var Hla=function(a){var d=null!==a&&"object"==typeof a,k="[object Function]"===$4.call(a),b=Z4(a),e=d&&"[object String]"===$4.call(a),l=[];if(!d&&!k&&!b)throw new TypeError("Object.keys called on a non-object");d=Ela&&k;if(e&&0<a.length&&!PI.call(a,0))for(e=0;e<a.length;++e)l.push(String(e));
if(b&&0<a.length)for(b=0;b<a.length;++b)l.push(String(b));else for(var p in a)d&&"prototype"===p||!PI.call(a,p)||l.push(String(p));if(Dla){if("undefined"!=typeof window&&Gla)try{var q=ZQ(a)}catch(u){q=!1}else q=ZQ(a);for(b=0;b<QI.length;++b)q&&"constructor"===QI[b]||!PI.call(a,QI[b])||l.push(QI[b])}return l}}var Ila=Hla,Jla=Array.prototype.slice,b5=Object.keys,RI=b5?function(a){return b5(a)}:Ila,c5=Object.keys;RI.shim=function(){Object.keys?function(){var a=Object.keys(arguments);return a&&a.length===
arguments.length}(1,2)||(Object.keys=function(a){return Z4(a)?c5(Jla.call(a)):c5(a)}):Object.keys=RI;return Object.keys||RI};var Kla="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Lla=Object.prototype.toString,Mla=Array.prototype.concat,$Q=Object.defineProperty,d5=$Q&&function(){var a={};try{for(var d in $Q(a,"x",{enumerable:!1,value:a}),a)return!1;return a.x===a}catch(k){return!1}}(),EB=function(a,d){var k=2<arguments.length?arguments[2]:{},b=RI(d);Kla&&(b=Mla.call(b,Object.getOwnPropertySymbols(d)));
for(var e=0;e<b.length;e+=1){var l=void 0,p=a,q=b[e],u=d[b[e]],w=k[b[e]];(!(q in p)||"function"==typeof(l=w)&&"[object Function]"===Lla.call(l)&&w())&&(d5?$Q(p,q,{configurable:!0,enumerable:!1,value:u,writable:!0}):p[q]=u)}};EB.supportsDescriptors=!!d5;var e5=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,Nla=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var a=
{},d=Symbol("test"),k=Object(d);if("string"==typeof d||"[object Symbol]"!==Object.prototype.toString.call(d)||"[object Symbol]"!==Object.prototype.toString.call(k))return!1;for(d in a[d]=42,a)return!1;if("function"==typeof Object.keys&&0!==Object.keys(a).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(a).length)return!1;k=Object.getOwnPropertySymbols(a);return 1!==k.length||k[0]!==d||!Object.prototype.propertyIsEnumerable.call(a,d)||"function"==typeof Object.getOwnPropertyDescriptor&&
(a=Object.getOwnPropertyDescriptor(a,d),42!==a.value||!0!==a.enumerable)?!1:!0},aR=Array.prototype.slice,Ola=Object.prototype.toString,Pla=function(a){var d=this;if("function"!=typeof d||"[object Function]"!==Ola.call(d))throw new TypeError("Function.prototype.bind called on incompatible "+d);for(var k,b=aR.call(arguments,1),e=Math.max(0,d.length-b.length),l=[],p=0;p<e;p++)l.push("$"+p);if(k=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof
k){var q=d.apply(this,b.concat(aR.call(arguments)));return Object(q)===q?q:this}return d.apply(a,b.concat(aR.call(arguments)))}),d.prototype)e=function(){},e.prototype=d.prototype,k.prototype=new e,e.prototype=null;return k},bR=Function.prototype.bind||Pla,FB=TypeError,Vu=Object.getOwnPropertyDescriptor;if(Vu)try{Vu({},"")}catch(a){Vu=null}var cR=function(){throw new FB;},Qla=Vu?function(){try{return arguments.callee,cR}catch(a){try{return Vu(arguments,"callee").get}catch(d){return cR}}}():cR,Wu=
"function"==typeof e5&&"function"==typeof Symbol&&"symbol"==typeof e5("foo")&&"symbol"==typeof Symbol("bar")&&Nla(),Xu=Object.getPrototypeOf||function(a){return a.__proto__},dR="undefined"==typeof Uint8Array?void 0:Xu(Uint8Array),eR={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":Wu?Xu([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,
"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,
"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:
Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==
typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Wu?Xu(Xu([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==
typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Wu?Xu((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==
typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,
"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Wu?Xu((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==
typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":Wu?Xu(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":Wu?Symbol:void 0,"%SymbolPrototype%":Wu?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Qla,"%TypedArray%":dR,"%TypedArrayPrototype%":dR?dR.prototype:void 0,"%TypeError%":FB,"%TypeErrorPrototype%":FB.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?
void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,
"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},f5=bR.call(Function.call,String.prototype.replace),Rla=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,
Sla=/\\(\\)?/g,Tla=function(a){var d=[];return f5(a,Rla,function(k,b,e,l){d[d.length]=e?f5(l,Sla,"$1"):b||k}),d},g5,h5=function(a,d){if("string"!=typeof a||0===a.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof d)throw new TypeError('"allowMissing" argument must be a boolean');var k=Tla(a);var b="%"+(0<k.length?k[0]:"")+"%";if(!(b in eR))throw new SyntaxError("intrinsic "+b+" does not exist!");if(void 0===eR[b]&&!d)throw new FB("intrinsic "+
b+" exists, but is not available. Please file an issue!");b=eR[b];for(var e=1;e<k.length;e+=1)if(null!=b)if(Vu&&e+1>=k.length){var l=Vu(b,k[e]);if(!(d||k[e]in b))throw new FB("base intrinsic for "+a+" exists, but the property is not available.");b=l?l.get||l.value:b[k[e]]}else b=b[k[e]];return b}("%Function%"),Ula=h5.apply,Vla=h5.call;(g5=function(){return bR.apply(Vla,arguments)}).apply=function(){return bR.apply(Ula,arguments)};var fR,SI,Wla=(fR=function(a,d){return 0===a&&0===d?1/a==1/d:a===d||
!(a==a||d==d)},fR),Xla=(SI=function(){return"function"==typeof Object.is?Object.is:Wla},SI),i5=g5(SI(),Object);EB(i5,{getPolyfill:SI,implementation:fR,shim:function(){var a=Xla();return EB(Object,{is:a},{is:function(){return Object.is!==a}}),a}});var s_=i5;var j5=function(a){return a!=a};var TI,Yla=j5,Zla=(TI=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Yla},EB),$la=j5,k5=TI();EB(k5,{getPolyfill:TI,implementation:$la,shim:function(){var a=TI();return Zla(Number,
{isNaN:a},{isNaN:function(){return Number.isNaN!==a}}),a}});var pN={},ZZ=!1,a_={},$Z=!1,Kba=void 0!==/a/g.flags,kF=function(a){var d=[];return a.forEach(function(k){return d.push(k)}),d},p_=function(a){var d=[];return a.forEach(function(k,b){return d.push([b,k])}),d},d_=Object.is?Object.is:s_,gF=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},sN=Number.isNaN?Number.isNaN:k5,Uz=rN(Object.prototype.hasOwnProperty),jF=rN(Object.prototype.propertyIsEnumerable),e_=rN(Object.prototype.toString),
Sl=Eg.types,Pba=Sl.isAnyArrayBuffer,Mba=Sl.isArrayBufferView,f_=Sl.isDate,hF=Sl.isMap,g_=Sl.isRegExp,iF=Sl.isSet,Lba=Sl.isNativeError,Qba=Sl.isBoxedPrimitive,h_=Sl.isNumberObject,i_=Sl.isStringObject,j_=Sl.isBooleanObject,k_=Sl.isBigIntObject,Rba=Sl.isSymbolObject,Nba=Sl.isFloat32Array,Oba=Sl.isFloat64Array,q_={isDeepEqual:function(a,d){return qn(a,d,!1)},isDeepStrictEqual:function(a,d){return qn(a,d,!0)}},tN={},r_=!1,ama=qN(),bh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,bma={},mF=yh,lF=ap.EventEmitter,cma=Eg.inherits,t_=sla,Wba=L4,Vba=ama,Zw=X4,UI=Uu.WriteError,u_=Uu.ReadError,dma=Uu.NotFoundError,ema=Uu.OpenError,Uba=Uu.InitializationError;Oi.prototype.emit=lF.prototype.emit;Oi.prototype.once=lF.prototype.once;cma(Oi,lF);Oi.prototype.open=function(a,d){var k=this||bh;"function"===typeof a&&(d=a,a=null);if(!d){d=ys();var b=d.promise}a||(a=(this||bh).options);if(this.isOpen())return mF.nextTick(d,null,k),b;if(this._isOpening())return this.once("open",
function(){d(null,k)}),b;this.emit("opening");(this||bh).db.open(a,function(e){if(e)return d(new ema(e));k.db=k._db;d(null,k);k.emit("open");k.emit("ready")});return b};Oi.prototype.close=function(a){var d=this||bh;if(!a){a=ys();var k=a.promise}if(this.isOpen())(this||bh).db.close(function(){d.emit("closed");a.apply(null,arguments)}),this.emit("closing"),(this||bh).db=new t_((this||bh)._db);else if(this.isClosed())mF.nextTick(a);else if("closing"===(this||bh).db.status)this.once("closed",a);else if(this._isOpening())this.once("open",
function(){d.close(a)});return k};Oi.prototype.isOpen=function(){return"open"===(this||bh).db.status};Oi.prototype._isOpening=function(){return"opening"===(this||bh).db.status};Oi.prototype.isClosed=function(){return/^clos|new/.test((this||bh).db.status)};Oi.prototype.get=function(a,d,k){k=Tx(d,k);if(!k){k=ys();var b=k.promise}if(Vz(this||bh,k))return b;d=Zw(d);(this||bh).db.get(a,d,function(e,l){if(e)return e=/notfound/i.test(e)||e.notFound?new dma("Key not found in database ["+a+"]",e):new u_(e),
k(e);k(null,l)});return b};Oi.prototype.put=function(a,d,k,b){var e=this||bh;b=Tx(k,b);if(!b){b=ys();var l=b.promise}if(Vz(this||bh,b))return l;k=Zw(k);(this||bh).db.put(a,d,k,function(p){if(p)return b(new UI(p));e.emit("put",a,d);b()});return l};Oi.prototype.del=function(a,d,k){var b=this||bh;k=Tx(d,k);if(!k){k=ys();var e=k.promise}if(Vz(this||bh,k))return e;d=Zw(d);(this||bh).db.del(a,d,function(l){if(l)return k(new UI(l));b.emit("del",a);k()});return e};Oi.prototype.batch=function(a,d,k){if(!arguments.length)return new Cla(this||
bh);var b=this||bh;k="function"===typeof a?a:Tx(d,k);if(!k){k=ys();var e=k.promise}if(Vz(this||bh,k))return e;d=Zw(d);(this||bh).db.batch(a,d,function(l){if(l)return k(new UI(l));b.emit("batch",a);k()});return e};Oi.prototype.iterator=function(a){return(this||bh).db.iterator(a)};Oi.prototype.clear=function(a,d){var k=this||bh;d=Tx(a,d);a=Zw(a);if(!d){d=ys();var b=d.promise}if(Vz(this||bh,d))return b;(this||bh).db.clear(a,function(e){if(e)return d(new UI(e));k.emit("clear",a);d()});return b};Oi.prototype.readStream=
Oi.prototype.createReadStream=function(a){a=xs({keys:!0,values:!0},a);"number"!==typeof a.limit&&(a.limit=-1);return new vla((this||bh).db.iterator(a),a)};Oi.prototype.keyStream=Oi.prototype.createKeyStream=function(a){return this.createReadStream(xs(a,{keys:!0,values:!1}))};Oi.prototype.valueStream=Oi.prototype.createValueStream=function(a){return this.createReadStream(xs(a,{keys:!1,values:!0}))};Oi.prototype.toString=function(){return"LevelUP"};Oi.prototype.type="levelup";Oi.errors=Uu;var fma=bma=
Oi.default=Oi,Cj={},gma=Ng.Buffer;Cj.compare=function(a,d){if(gma.isBuffer(a)){for(var k=Math.min(a.length,d.length),b=0;b<k;b++){var e=a[b]-d[b];if(e)return e}return a.length-d.length}return a<d?-1:a>d?1:0};var hma=Cj.lowerBoundKey=function(a){return kp(a,"gt")||kp(a,"gte")||kp(a,"min")||(a.reverse?kp(a,"end"):kp(a,"start"))||void 0},gR=Cj.lowerBound=function(a,d){var k=hma(a);return k?a[k]:d},hR=Cj.lowerBoundInclusive=function(a){return Object.hasOwnProperty.call(a,"gt")?!1:!0},iR=Cj.upperBoundInclusive=
function(a){return Object.hasOwnProperty.call(a,"lt")?!1:!0},ima=Cj.lowerBoundExclusive=function(a){return!hR(a)},jma=Cj.upperBoundExclusive=function(a){return!iR(a)},kma=Cj.upperBoundKey=function(a){return kp(a,"lt")||kp(a,"lte")||kp(a,"max")||(a.reverse?kp(a,"start"):kp(a,"end"))||void 0},jR=Cj.upperBound=function(a,d){var k=kma(a);return k?a[k]:d};Cj.start=function(a,d){return a.reverse?jR(a,d):gR(a,d)};Cj.end=function(a,d){return a.reverse?gR(a,d):jR(a,d)};Cj.startInclusive=function(a){return a.reverse?
iR(a):hR(a)};Cj.endInclusive=function(a){return a.reverse?hR(a):iR(a)};Cj.toLtgt=function(a,d,k,b,e){d=d||{};k=k||Xba;var l=3<arguments.length,p=Cj.lowerBoundKey(a),q=Cj.upperBoundKey(a);p?"gt"===p?d.gt=k(a.gt,!1):d.gte=k(a[p],!1):l&&(d.gte=k(b,!1));q?"lt"===q?d.lt=k(a.lt,!0):d.lte=k(a[q],!0):l&&(d.lte=k(e,!0));null!=a.reverse&&(d.reverse=!!a.reverse);Object.hasOwnProperty.call(d,"max")&&delete d.max;Object.hasOwnProperty.call(d,"min")&&delete d.min;Object.hasOwnProperty.call(d,"start")&&delete d.start;
Object.hasOwnProperty.call(d,"end")&&delete d.end;return d};Cj.contains=function(a,d,k){k=k||Cj.compare;var b=gR(a);if(void 0!==b&&""!==b&&(b=k(d,b),0>b||0===b&&ima(a)))return!1;b=jR(a);return void 0!==b&&""!==b&&(b=k(d,b),0<b||0===b&&jma(a))?!1:!0};Cj.filter=function(a,d){return function(k){return Cj.contains(a,k,d)}};var Pq={},vN=N4;Pq.utf8=Pq["utf-8"]={encode:function(a){return uN(a)?a:String(a)},decode:nF,buffer:!1,type:"utf8"};Pq.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};
Pq.binary={encode:function(a){return uN(a)?a:vN.from(a)},decode:nF,buffer:!0,type:"binary"};Pq.none={encode:nF,decode:nF,buffer:!1,type:"id"};Pq.id=Pq.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(a){Pq[a]={encode:function(d){return uN(d)?d:vN.from(d,a)},decode:function(d){return d.toString(a)},buffer:!0,type:a}});var vq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,l5={},wN=Pq;l5=Gl;Gl.prototype._encoding=function(a){"string"===
typeof a&&(a=wN[a]);a||(a=wN.id);return a};Gl.prototype._keyEncoding=function(a,d){return this._encoding(d&&d.keyEncoding||a&&a.keyEncoding||(this||vq).opts.keyEncoding)};Gl.prototype._valueEncoding=function(a,d){return this._encoding(d&&(d.valueEncoding||d.encoding)||a&&(a.valueEncoding||a.encoding)||(this||vq).opts.valueEncoding||(this||vq).opts.encoding)};Gl.prototype.encodeKey=function(a,d,k){return this._keyEncoding(d,k).encode(a)};Gl.prototype.encodeValue=function(a,d,k){return this._valueEncoding(d,
k).encode(a)};Gl.prototype.decodeKey=function(a,d){return this._keyEncoding(d).decode(a)};Gl.prototype.decodeValue=function(a,d){return this._valueEncoding(d).decode(a)};Gl.prototype.encodeBatch=function(a,d){var k=this||vq;return a.map(function(b){var e={type:b.type,key:k.encodeKey(b.key,d,b)};k.keyAsBuffer(d,b)&&(e.keyEncoding="binary");b.prefix&&(e.prefix=b.prefix);"value"in b&&(e.value=k.encodeValue(b.value,d,b),k.valueAsBuffer(d,b)&&(e.valueEncoding="binary"));return e})};var lma="lt gt lte gte start end".split(" ");
Gl.prototype.encodeLtgt=function(a){var d=this||vq,k={};Object.keys(a).forEach(function(b){k[b]=-1<lma.indexOf(b)?d.encodeKey(a[b],a):a[b]});return k};Gl.prototype.createStreamDecoder=function(a){var d=this||vq;return a.keys&&a.values?function(k,b){return{key:d.decodeKey(k,a),value:d.decodeValue(b,a)}}:a.keys?function(k){return d.decodeKey(k,a)}:a.values?function(k,b){return d.decodeValue(b,a)}:function(){}};Gl.prototype.keyAsBuffer=function(a){return this._keyEncoding(a).buffer};Gl.prototype.valueAsBuffer=
function(a){return this._valueEncoding(a).buffer};var mma=l5,nma={},aca=nma=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},Rj={},oma=Ng.Buffer;Rj.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};Rj.isBoolean=function(a){return"boolean"===typeof a};Rj.isNull=function(a){return null===a};Rj.isNullOrUndefined=function(a){return null==a};Rj.isNumber=function(a){return"number"===typeof a};Rj.isString=
function(a){return"string"===typeof a};Rj.isSymbol=function(a){return"symbol"===typeof a};Rj.isUndefined=function(a){return void 0===a};Rj.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};Rj.isObject=function(a){return"object"===typeof a&&null!==a};Rj.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)};Rj.isError=function(a){return"[object Error]"===Object.prototype.toString.call(a)||a instanceof Error};Rj.isFunction=function(a){return"function"===
typeof a};Rj.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};Rj.isBuffer=oma.isBuffer;var Df="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zN={},m5=Ng.Buffer,pma=m5.isEncoding||function(a){switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}},kR=zN.StringDecoder=function(a){(this||Df).encoding=(a||"utf8").toLowerCase().replace(/[-_]/,"");if(a&&!pma(a))throw Error("Unknown encoding: "+a);switch((this||Df).encoding){case "utf8":(this||Df).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Df).surrogateSize=2;(this||Df).detectIncompleteChar=Zba;break;case "base64":(this||Df).surrogateSize=3;(this||Df).detectIncompleteChar=$ba;break;default:(this||Df).write=Yba;return}(this||Df).charBuffer=new m5(6);(this||Df).charReceived=
0;(this||Df).charLength=0};kR.prototype.write=function(a){for(var d="";(this||Df).charLength;){d=a.length>=(this||Df).charLength-(this||Df).charReceived?(this||Df).charLength-(this||Df).charReceived:a.length;a.copy((this||Df).charBuffer,(this||Df).charReceived,0,d);(this||Df).charReceived+=d;if((this||Df).charReceived<(this||Df).charLength)return"";a=a.slice(d,a.length);d=(this||Df).charBuffer.slice(0,(this||Df).charLength).toString((this||Df).encoding);var k=d.charCodeAt(d.length-1);if(55296<=k&&
56319>=k)(this||Df).charLength+=(this||Df).surrogateSize,d="";else{(this||Df).charReceived=(this||Df).charLength=0;if(0===a.length)return d;break}}this.detectIncompleteChar(a);var b=a.length;(this||Df).charLength&&(a.copy((this||Df).charBuffer,0,a.length-(this||Df).charReceived,b),b-=(this||Df).charReceived);d+=a.toString((this||Df).encoding,0,b);b=d.length-1;k=d.charCodeAt(b);return 55296<=k&&56319>=k?(k=(this||Df).surrogateSize,(this||Df).charLength+=k,(this||Df).charReceived+=k,(this||Df).charBuffer.copy((this||
Df).charBuffer,k,0,k),a.copy((this||Df).charBuffer,0,0,k),d.substring(0,b)):d};kR.prototype.detectIncompleteChar=function(a){for(var d=3<=a.length?3:a.length;0<d;d--){var k=a[a.length-d];if(1==d&&6==k>>5){(this||Df).charLength=2;break}if(2>=d&&14==k>>4){(this||Df).charLength=3;break}if(3>=d&&30==k>>3){(this||Df).charLength=4;break}}(this||Df).charReceived=d};kR.prototype.end=function(a){var d="";a&&a.length&&(d=this.write(a));(this||Df).charReceived&&(a=(this||Df).encoding,d+=(this||Df).charBuffer.slice(0,
(this||Df).charReceived).toString(a));return d};var bca=Object.freeze({}),xN={},w_=!1,ch="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,yN={},x_=!1,no="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,AN={},z_=!1,We="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,BN={},B_=!1,Lk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,CN={},D_=!1,C_="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Jn={},n5=!1,qma=function(){if(n5)return Jn;n5=!0;var a=yh;Jn=Jn=y_();Jn.Stream=gu;Jn.Readable=Jn;Jn.Writable=v_();Jn.Duplex=$w();Jn.Transform=A_();Jn.PassThrough=cca();a.browser||"disable"!==a.env.READABLE_STREAM||(Jn=gu);return Jn}(),rma={},fca=Wz(Cj),sma=Wz(ap),tma=Wz(mma),uma=Wz(qma),o5=Wz(bj);o5(DN,Error);DN.prototype.name="NotFoundError";var vma=sma.EventEmitter,wma=new DN,p5=function(a,d,k,b){function e(p){var q={},u;if(b)for(u in b)"undefined"!==
typeof b[u]&&(q[u]=b[u]);if(p)for(u in p)"undefined"!==typeof p[u]&&(q[u]=p[u]);return q}var l=new vma;l.sublevels={};l.options=b;l.version="6.5.4";l.methods={};d=d||[];l.put=function(p,q,u,w){"function"===typeof u&&(w=u,u={});a.apply([{key:p,value:q,prefix:d.slice(),type:"put"}],e(u),function(y){if(y)return w(y);l.emit("put",p,q);w(null)})};l.prefix=function(){return d.slice()};l.batch=function(p,q,u){"function"===typeof q&&(u=q,q={});p=p.map(function(w){return{key:w.key,value:w.value,prefix:w.prefix||
d,keyEncoding:w.keyEncoding,valueEncoding:w.valueEncoding,type:w.type}});a.apply(p,e(q),function(w){if(w)return u(w);l.emit("batch",p);u(null)})};l.get=function(p,q,u){"function"===typeof q&&(u=q,q={});a.get(p,d,e(q),function(w,y){w?u(wma):u(null,y)})};l.sublevel=function(p,q){return l.sublevels[p]=l.sublevels[p]||p5(a,d.concat(p),k,e(q))};l.readStream=l.createReadStream=function(p){p=e(p);p.prefix=d;var q=a.iterator(p);p=k(p,a.createDecoder(p));p.setIterator(q);return p};l.close=function(p){a.close(p)};
l.isOpen=a.isOpen;l.isClosed=a.isClosed;return l},E_=uma.Readable;o5(Qr,E_);Qr.prototype.setIterator=function(a){this._iterator=a;return this._destroyed?a.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};Qr.prototype._read=function(){var a=this;if(!a._destroyed){if(!a._iterator)return this._waiting=!0;a._iterator.next(function(d,k,b){if(d||void 0===k&&void 0===b)return d||a._destroyed||a.push(null),a._cleanup(d);b=a._makeData(k,b);a._destroyed||a.push(b)})}};Qr.prototype._cleanup=
function(a){if(!this._destroyed){this._destroyed=!0;var d=this;a&&"iterator has ended"!==a.message&&d.emit("error",a);d._iterator?d._iterator.end(function(){d._iterator=null;d.emit("close")}):d.emit("close")}};Qr.prototype.destroy=function(){this._cleanup()};var xma={encode:function(a){return"\u00ff"+a[0]+"\u00ff"+a[1]},decode:function(a){a=a.toString();var d=a.indexOf("\u00ff",1);return[a.substring(1,d),a.substring(d+1)]},lowerBound:"\x00",upperBound:"\u00ff"},yma=new tma,zma=rma=function(a){return p5(eca(a,
xma,yma),[],Qr,a.options)},wq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,VI={},Ama=yh,F_=V4.Transform,q5=bj;q5(ax,F_);ax.prototype.destroy=function(a){if(!(this||wq)._destroyed){(this||wq)._destroyed=!0;var d=this||wq;Ama.nextTick(function(){a&&d.emit("error",a);d.emit("close")})}};VI=EN(function(a,d,k){a=new ax(a);a._transform=d;k&&(a._flush=k);return a});VI.ctor=EN(function(a,d,k){function b(e){if(!((this||wq)instanceof b))return new b(e);(this||wq).options=
Object.assign({},a,e);ax.call(this||wq,(this||wq).options)}q5(b,ax);b.prototype._transform=d;k&&(b.prototype._flush=k);return b});VI.obj=EN(function(a,d,k){a=new ax(Object.assign({objectMode:!0,highWaterMark:16},a));a._transform=d;k&&(a._flush=k);return a});var r5=VI,Bma={};mi.prototype.toArray=function(){for(var a=this._length,d=Array(a),k=this._front,b=this._capacity,e=0;e<a;++e)d[e]=this[k+e&b-1];return d};mi.prototype.push=function(a){var d=arguments.length,k=this._length;if(1<d){var b=this._capacity;
if(k+d>b){for(var e=0;e<d;++e){this._checkCapacity(k+1);var l=this._front+k&this._capacity-1;this[l]=arguments[e];k++;this._length=k}return k}l=this._front;for(e=0;e<d;++e)this[l+k&b-1]=arguments[e],l++;this._length=k+d;return k+d}if(0===d)return k;this._checkCapacity(k+1);e=this._front+k&this._capacity-1;this[e]=a;this._length=k+1;return k+1};mi.prototype.pop=function(){var a=this._length;if(0!==a){var d=this._front+a-1&this._capacity-1,k=this[d];this[d]=void 0;this._length=a-1;return k}};mi.prototype.shift=
function(){var a=this._length;if(0!==a){var d=this._front,k=this[d];this[d]=void 0;this._front=d+1&this._capacity-1;this._length=a-1;return k}};mi.prototype.unshift=function(a){var d=this._length,k=arguments.length;if(1<k){var b=this._capacity;if(d+k>b){for(var e=k-1;0<=e;e--){this._checkCapacity(d+1);b=this._capacity;var l=(this._front-1&b-1^b)-b;this[l]=arguments[e];d++;this._length=d;this._front=l}return d}l=this._front;for(e=k-1;0<=e;e--)l=(l-1&b-1^b)-b,this[l]=arguments[e];this._front=l;this._length=
d+k;return d+k}if(0===k)return d;this._checkCapacity(d+1);b=this._capacity;e=(this._front-1&b-1^b)-b;this[e]=a;this._length=d+1;this._front=e;return d+1};mi.prototype.peekBack=function(){var a=this._length;if(0!==a)return this[this._front+a-1&this._capacity-1]};mi.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};mi.prototype.get=function(a){if(a===(a|0)){var d=this._length;0>a&&(a+=d);if(!(0>a||a>=d))return this[this._front+a&this._capacity-1]}};mi.prototype.isEmpty=function(){return 0===
this._length};mi.prototype.clear=function(){for(var a=this._length,d=this._front,k=this._capacity,b=0;b<a;++b)this[d+b&k-1]=void 0;this._front=this._length=0};mi.prototype.toString=function(){return this.toArray().toString()};mi.prototype.valueOf=mi.prototype.toString;mi.prototype.removeFront=mi.prototype.shift;mi.prototype.removeBack=mi.prototype.pop;mi.prototype.insertFront=mi.prototype.unshift;mi.prototype.insertBack=mi.prototype.push;mi.prototype.enqueue=mi.prototype.push;mi.prototype.dequeue=
mi.prototype.shift;mi.prototype.toJSON=mi.prototype.toArray;Object.defineProperty(mi.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});mi.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(G_(1.5*this._capacity+16))};mi.prototype._resizeTo=function(a){var d=this._capacity;this._capacity=a;a=this._front;var k=this._length;if(a+k>d)for(a=a+k&d-1,k=0;k<a;++k)this[k+d]=this[k+0],this[k+0]=void 0};var H_=Array.isArray,Cma=Bma=mi,Dma=
{},Kp=Ng.Buffer,Ema=Object.prototype.toString,lR="function"===typeof Kp.alloc&&"function"===typeof Kp.allocUnsafe&&"function"===typeof Kp.from,Fma=Dma=function(a,d,k){if("number"===typeof a)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===Ema.call(a).slice(8,-1)){d>>>=0;var b=a.byteLength-d;if(0>b)throw new RangeError("'offset' is out of bounds");if(void 0===k)k=b;else if(k>>>=0,k>b)throw new RangeError("'length' is out of bounds");return lR?Kp.from(a.slice(d,d+k)):
new Kp(new Uint8Array(a.slice(d,d+k)))}if("string"===typeof a){k=d;if("string"!==typeof k||""===k)k="utf8";if(!Kp.isEncoding(k))throw new TypeError('"encoding" must be a valid string encoding');return lR?Kp.from(a,k):new Kp(a,k)}return lR?Kp.from(a):new Kp(a)},qm={};Object.defineProperty(qm,"__esModule",{value:!0});qm.collectConflicts=function(a){var d=FN(a);a=I_(a.rev_tree);for(var k=[],b=0,e=a.length;b<e;b++){var l=a[b];l.rev===d||l.opts.deleted||k.push(l.rev)}return k};qm.collectLeaves=I_;qm.compactTree=
function(a){var d=[];oF(a.rev_tree,function(k,b,e,l,p){"available"!==p.status||k||(d.push(b+"-"+e),p.status="missing")});return d};qm.isDeleted=function(a,d){d||(d=FN(a));d=d.substring(d.indexOf("-")+1);a=a.rev_tree.map(lca);for(var k;k=a.pop();){if(k[0]===d)return!!k[1].deleted;a=a.concat(k[2])}};qm.isLocalId=function(a){return/^_local/.test(a)};qm.merge=function(a,d,k){a=M_(a,d);k=kca(a.tree,k);return{tree:k.tree,stemmedRevs:k.revs,conflicts:a.conflicts}};qm.revExists=function(a,d){a=a.slice();
var k=d.split("-");d=parseInt(k[0],10);k=k[1];for(var b;b=a.pop();){if(b.pos===d&&b.ids[0]===k)return!0;for(var e=b.ids[2],l=0,p=e.length;l<p;l++)a.push({pos:b.pos+1,ids:e[l]})}return!1};qm.rootToLeaf=J_;qm.traverseRevTree=oF;qm.winningRev=FN;qm.latest=function(a,d){for(var k=d.rev_tree.slice(),b;b=k.pop();){var e=b.pos,l=b.ids,p=l[0],q=l[1];l=l[2];var u=0===l.length;b=b.history?b.history.slice():[];b.push({id:p,pos:e,opts:q});if(u)for(q=0,u=b.length;q<u;q++){var w=b[q];if(w.pos+"-"+w.id===a)return e+
"-"+p}p=0;for(q=l.length;p<q;p++)k.push({pos:e+1,ids:l[p],history:b})}throw Error("Unable to resolve latest revision for id "+d.id+", rev "+a);};var sk={};Object.defineProperty(sk,"__esModule",{value:!0});var hu=mg,Xz=il,Q_=Rx,Fm=Gf,hm=qm,mca=N_("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),nca=N_("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));
sk.invalidIdError=hu.invalidIdError;sk.normalizeDdocFunctionName=hu.normalizeDdocFunctionName;sk.parseDdocFunctionName=hu.parseDdocFunctionName;sk.isDeleted=hm.isDeleted;sk.isLocalId=hm.isLocalId;sk.allDocsKeysQuery=function(a,d){var k={offset:d.skip};return Promise.all(d.keys.map(function(b){var e=hu.assign({key:b,deleted:"ok"},d);["limit","skip","keys"].forEach(function(l){delete e[l]});return new Promise(function(l,p){a._allDocs(e,function(q,u){if(q)return p(q);d.update_seq&&void 0!==u.update_seq&&
(k.update_seq=u.update_seq);k.total_rows=u.total_rows;l(u.rows[0]||{key:b,error:"not_found"})})})})).then(function(b){k.rows=b;return k})};sk.parseDoc=P_;sk.preprocessAttachments=function(a,d,k){function b(){e++;a.length===e&&(l?k(l):k())}if(!a.length)return k();var e=0,l;a.forEach(function(p){function q(A){l=A;w++;w===u.length&&b()}var u=p.data&&p.data._attachments?Object.keys(p.data._attachments):[],w=0;if(!u.length)return b();for(var y in p.data._attachments)p.data._attachments.hasOwnProperty(y)&&
qca(p.data._attachments[y],d,q)})};sk.processDocs=function(a,d,k,b,e,l,p,q,u){a=a||1E3;var w=q.new_edits,y=new qs.Map,A=0,C=d.length;d.forEach(function(D,L){if(D._id&&hm.isLocalId(D._id))k[D._deleted?"_removeLocal":"_putLocal"](D,{ctx:e},function(S,V){l[L]=S||V;++A===C&&u&&u()});else{var I=D.metadata.id;y.has(I)?(C--,y.get(I).push([D,L])):y.set(I,[[D,L]])}});y.forEach(function(D,L){function I(){++V<D.length?S():++A===C&&u&&u()}function S(){var ba=D[V],ua=ba[0];ba=ba[1];if(b.has(L))R_(a,b.get(L),ua,
l,ba,I,p,w);else{var Fa=hm.merge([],ua.metadata.rev_tree[0],a);ua.metadata.rev_tree=Fa.tree;ua.stemmedRevs=Fa.stemmedRevs||[];Fa=hm.winningRev(ua.metadata);var F=hm.isDeleted(ua.metadata,Fa);"was_delete"in q&&F?(l[ba]=Fm.createError(Fm.MISSING_DOC,"deleted"),I()):w&&"missing"===ua.metadata.rev_tree[0].ids[1].status?(ua=Fm.createError(Fm.REV_CONFLICT),l[ba]=ua,I()):p(ua,Fa,F,F,!1,F?0:1,ba,I)}}var V=0;S()})};sk.updateDoc=R_;var GB={};Object.defineProperty(GB,"__esModule",{value:!0});var s5=Hx&&"object"===
typeof Hx&&"default"in Hx?Hx["default"]:Hx;GB.safeJsonParse=function(a){try{return JSON.parse(a)}catch(d){return s5.parse(a)}};GB.safeJsonStringify=function(a){try{return JSON.stringify(a)}catch(d){return s5.stringify(a)}};var Gma={},Hma=Yz(fma),Ima=Yz(zma),WI=Yz(gQ),Jma=Yz(Cma),Kma=Yz(Fma),$z=qm,Zz=il,oo=qs;iu.prototype.get=function(a,d,k){var b=T_(this,a),e=b.get(d);if(e)return mg.nextTick(function(){k(null,e)});if(null===e)return mg.nextTick(function(){k({name:"NotFoundError"})});a.get(d,function(l,
p){if(l)return"NotFoundError"===l.name&&b.set(d,null),k(l);b.set(d,p);k(null,p)})};iu.prototype.batch=function(a){for(var d=0,k=a.length;d<k;d++){var b=a[d],e=T_(this,b.prefix);"put"===b.type?e.set(b.key,b.value):e.set(b.key,null)}this._batch=this._batch.concat(a)};iu.prototype.execute=function(a,d){for(var k=new oo.Set,b=[],e=this._batch.length-1;0<=e;e--){var l=this._batch[e],p=l.prefix.prefix()[0]+"\u00ff"+l.key;k.has(p)||(k.add(p),b.push(l))}a.batch(b,d)};var HB=new oo.Map,Lma={encode:GB.safeJsonStringify,
decode:GB.safeJsonParse,buffer:!1,type:"cheap-json"},IB=new mg.changesHandler,Mma=Gma=function(a,d){function k(){I.docStore=F.sublevel("document-store",{valueEncoding:Lma});I.bySeqStore=F.sublevel("by-sequence",{valueEncoding:"json"});I.attachmentStore=F.sublevel("attach-store",{valueEncoding:"json"});I.binaryStore=F.sublevel("attach-binary-store",{valueEncoding:"binary"});I.localStore=F.sublevel("local-store",{valueEncoding:"json"});I.metaStore=F.sublevel("meta-store",{valueEncoding:"json"});"object"===
typeof a.migrate?a.migrate.doMigrationTwo(F,I,b):b()}function b(){I.metaStore.get("_local_last_update_seq",function(Y,Q){"undefined"===typeof F._updateSeq&&(F._updateSeq=Q||0);I.metaStore.get("_local_doc_count",function(W,ka){F._docCount=W?0:ka;I.metaStore.get("_local_uuid",function(ea,la){L=ea?mg.uuid():la;I.metaStore.put("_local_uuid",L,function(){mg.nextTick(function(){d(null,D)})})})})})}function e(Y){return F.isClosed()?Y(Error("database is closed")):Y(null,F._docCount)}function l(Y,Q){try{Y.apply(null,
Q)}catch(W){Q[Q.length-1](W)}}function p(){var Y=F._queue.peekFront();"read"===Y.type?q(Y):u(Y)}function q(Y){var Q=[Y];Y=1;for(var W=F._queue.get(Y);"undefined"!==typeof W&&"read"===W.type;)Q.push(W),Y++,W=F._queue.get(Y);var ka=0;Q.forEach(function(ea){var la=ea.args,db=la[la.length-1];la[la.length-1]=WI(function(ub){db.apply(null,ub);++ka===Q.length&&mg.nextTick(function(){Q.forEach(function(){F._queue.shift()});F._queue.length&&p()})});l(ea.fun,la)})}function u(Y){var Q=Y.args,W=Q[Q.length-1];
Q[Q.length-1]=WI(function(ka){W.apply(null,ka);mg.nextTick(function(){F._queue.shift();F._queue.length&&p()})});l(Y.fun,Q)}function w(Y){return WI(function(Q){F._queue.push({fun:Y,args:Q,type:"write"});1===F._queue.length&&mg.nextTick(p)})}function y(Y){return WI(function(Q){F._queue.push({fun:Y,args:Q,type:"read"});1===F._queue.length&&mg.nextTick(p)})}function A(Y){return("0000000000000000"+Y).slice(-16)}function C(Y,Q){"destroy"in ba?ba.destroy(Y,Q):Q(null)}a=mg.clone(a);var D=this,L,I={},S=a.revs_limit,
V=a.name;"undefined"===typeof a.createIfMissing&&(a.createIfMissing=!0);var ba=a.db,ua=mg.functionName(ba);if(HB.has(ua))var Fa=HB.get(ua);else Fa=new oo.Map,HB.set(ua,Fa);if(Fa.has(V)){var F=Fa.get(V);k()}else Fa.set(V,Ima(Hma(ba(V),a,function(Y){if(Y)return Fa.delete(V),d(Y);F=Fa.get(V);F._docCount=-1;F._queue=new Jma;"object"===typeof a.migrate?a.migrate.doMigrationOne(V,F,k):k()})));D._remote=!1;D.type=function(){return"leveldb"};D._id=function(Y){Y(null,L)};D._info=function(Y){var Q={doc_count:F._docCount,
update_seq:F._updateSeq,backend_adapter:mg.functionName(ba)};return mg.nextTick(function(){Y(null,Q)})};D._get=y(function(Y,Q,W){Q=mg.clone(Q);I.docStore.get(Y,function(ka,ea){if(ka||!ea)return W(Gf.createError(Gf.MISSING_DOC,"missing"));if(Q.rev)var la=Q.latest?$z.latest(Q.rev,ea):Q.rev;else if(la=GN(ea),"deleted"in ea?ea.deleted:sk.isDeleted(ea,la))return W(Gf.createError(Gf.MISSING_DOC,"deleted"));I.bySeqStore.get(A(ea.rev_map[la]),function(db,ub){if(!ub)return W(Gf.createError(Gf.MISSING_DOC));
if("_id"in ub&&ub._id!==ea.id)return W(Error("wrong doc returned"));ub._id=ea.id;if("_rev"in ub){if(ub._rev!==la)return W(Error("wrong doc returned"))}else ub._rev=la;return W(null,{doc:ub,metadata:ea})})})});D._getAttachment=function(Y,Q,W,ka,ea){var la=W.content_type;I.binaryStore.get(W.digest,function(db,ub){if(db)return"NotFoundError"!==db.name?ea(db):ea(null,ka.binary?Zz.blob([""],{type:la}):"");ka.binary?ea(null,S_(ub,la)):ea(null,ub.toString("base64"))})};D._bulkDocs=w(function(Y,Q,W){function ka(ra,
Va){pa.get(I.attachmentStore,ra,function(nb){nb?(nb=Gf.createError(Gf.MISSING_STUB,"unknown stub attachment with digest "+ra),Va(nb)):Va()})}function ea(ra){function Va(){if(++nb===ib.length)return ra(wc)}var nb=0,wc;ib.forEach(function(nc){if(nc._id&&sk.isLocalId(nc._id))return Va();pa.get(I.docStore,nc._id,function(ac,qd){ac?"NotFoundError"!==ac.name&&(wc=ac):U.set(nc._id,qd);Va()})})}function la(ra,Va){var nb=Promise.resolve();ra.forEach(function(wc,nc){nb=nb.then(function(){return new Promise(function(ac,
qd){D._doCompactionNoLock(nc,wc,{ctx:pa},function(id){if(id)return qd(id);ac()})})})});nb.then(function(){Va()},Va)}function db(ra){var Va=new oo.Map;U.forEach(function(nb,wc){Va.set(wc,$z.compactTree(nb))});la(Va,ra)}function ub(){la(aa,function(ra){ra&&Pa(ra);if(D.auto_compaction)return db(Pa);Pa()})}function xa(ra,Va,nb,wc,nc,ac,qd,id){function xe(Ff){pg++;Mg||(Ff?(Mg=Ff,id(Mg)):pg===vh.length&&fg())}function Ae(Ff,gg,yg,rh){return function(Lh){Aa(Ff,"md5-"+Lh,gg,yg,rh)}}function hf(Ff,gg,yg){return function(rh){Rx.binaryMd5(rh,
Ae(Ff,gg,rh,yg))}}function fg(){var Ff=ra.metadata.rev_map[ra.metadata.rev];if(Ff)return id();Ff=++La;ra.metadata.rev_map[ra.metadata.rev]=ra.metadata.seq=Ff;Ff=[{key:A(Ff),value:ra.data,prefix:I.bySeqStore,type:"put"},{key:ra.metadata.id,value:ra.metadata,prefix:I.docStore,type:"put"}];pa.batch(Ff);M[qd]={ok:!0,id:ra.metadata.id,rev:ra.metadata.rev};U.set(ra.metadata.id,ra.metadata);id()}ma+=ac;var Mg=null,pg=0;ra.metadata.winningRev=Va;ra.metadata.deleted=nb;ra.data._id=ra.metadata.id;ra.data._rev=
ra.metadata.rev;wc&&(ra.data._deleted=!0);ra.stemmedRevs.length&&aa.set(ra.metadata.id,ra.stemmedRevs);var vh=ra.data._attachments?Object.keys(ra.data._attachments):[];for(Va=0;Va<vh.length;Va++)if(nb=vh[Va],wc=ra.data._attachments[nb],wc.stub)na(ra.data._id,ra.data._rev,wc.digest,xe);else if("string"===typeof wc.data){try{var xg=Zz.atob(wc.data)}catch(Ff){W(Gf.createError(Gf.BAD_ARG,"Attachment is not a valid base64 string"));return}hf(ra,nb,xe)(xg)}else rca(wc.data,hf(ra,nb,xe));vh.length||fg()}
function na(ra,Va,nb,wc){function nc(){return new Promise(function(id,xe){pa.get(I.attachmentStore,nb,function(Ae,hf){if(Ae&&"NotFoundError"!==Ae.name)return xe(Ae);id(hf)})})}function ac(id){var xe=[ra,Va].join("@"),Ae={};id?id.refs&&(Ae.refs=id.refs,Ae.refs[xe]=!0):(Ae.refs={},Ae.refs[xe]=!0);return new Promise(function(hf){pa.batch([{type:"put",prefix:I.attachmentStore,key:nb,value:Ae}]);hf(!id)})}var qd=qa[nb]||Promise.resolve();qa[nb]=qd.then(function(){return nc().then(ac).then(function(id){wc(null,
id)},wc)})}function Aa(ra,Va,nb,wc,nc){nb=ra.data._attachments[nb];delete nb.data;nb.digest=Va;nb.length=wc.length;var ac=ra.metadata.id;ra=ra.metadata.rev;nb.revpos=parseInt(ra,10);na(ac,ra,Va,function(qd,id){if(qd||0===wc.length||!id)return nc(qd);pa.batch([{type:"put",prefix:I.binaryStore,key:Va,value:Kma(wc,"binary")}]);nc()})}function Pa(ra){if(ra)return mg.nextTick(function(){W(ra)});pa.batch([{prefix:I.metaStore,type:"put",key:"_local_last_update_seq",value:La},{prefix:I.metaStore,type:"put",
key:"_local_doc_count",value:F._docCount+ma}]);pa.execute(F,function(Va){if(Va)return W(Va);F._docCount+=ma;F._updateSeq=La;IB.notify(V);mg.nextTick(function(){W(null,M)})})}var Da=Q.new_edits,M=Array(Y.docs.length),U=new oo.Map,aa=new oo.Map,pa=new iu,ma=0,La=F._updateSeq,ib=Y.docs,ca=ib.map(function(ra){if(ra._id&&sk.isLocalId(ra._id))return ra;ra=sk.parseDoc(ra,Da,D.__opts);ra.metadata&&!ra.metadata.rev_map&&(ra.metadata.rev_map={});return ra});Y=ca.filter(function(ra){return ra.error});if(Y.length)return W(Y[0]);
var qa={};if(!ca.length)return W(null,[]);(function(ra){var Va=[];ib.forEach(function(nc){nc&&nc._attachments&&Object.keys(nc._attachments).forEach(function(ac){ac=nc._attachments[ac];ac.stub&&Va.push(ac.digest)})});if(!Va.length)return ra();var nb=0,wc;Va.forEach(function(nc){ka(nc,function(ac){ac&&!wc&&(wc=ac);++nb===Va.length&&ra(wc)})})})(function(ra){if(ra)return W(ra);ea(function(Va){if(Va)return W(Va);sk.processDocs(S,ca,D,U,pa,M,xa,Q,ub)})})});D._allDocs=function(Y,Q){return"keys"in Y?sk.allDocsKeysQuery(this,
Y):y(function(W,ka){W=mg.clone(W);e(function(ea,la){if(ea)return ka(ea);ea={};var db=W.skip||0;W.startkey&&(ea.gte=W.startkey);W.endkey&&(ea.lte=W.endkey);W.key&&(ea.gte=ea.lte=W.key);if(W.descending){ea.reverse=!0;var ub=ea.lte;ea.lte=ea.gte;ea.gte=ub}if("number"===typeof W.limit)var xa=W.limit;if(0===xa||"gte"in ea&&"lte"in ea&&ea.gte>ea.lte)return ea={total_rows:la,offset:W.skip,rows:[]},W.update_seq&&(ea.update_seq=F._updateSeq),ka(null,ea);var na=[],Aa=I.docStore.readStream(ea),Pa=r5.obj(function(Da,
M,U){function aa(ib){var ca={id:pa.id,key:pa.id,value:{rev:ma}};if(W.include_docs){ca.doc=ib;ca.doc._rev=ca.value.rev;W.conflicts&&(ib=$z.collectConflicts(pa),ib.length&&(ca.doc._conflicts=ib));for(var qa in ca.doc._attachments)ca.doc._attachments.hasOwnProperty(qa)&&(ca.doc._attachments[qa].stub=!0)}if(!1===W.inclusive_end&&pa.id===W.endkey)return U();if(La)if("ok"===W.deleted)ca.value.deleted=!0,ca.doc=null;else return U();na.push(ca);U()}var pa=Da.value,ma=GN(pa),La="deleted"in pa?pa.deleted:sk.isDeleted(pa,
ma);if(!La){if(0<db--){U();return}if("number"===typeof xa&&0>=xa--){Aa.unpipe();Aa.destroy();U();return}}else if("ok"!==W.deleted){U();return}W.include_docs?I.bySeqStore.get(A(pa.rev_map[ma]),function(ib,ca){aa(ca)}):aa()},function(Da){Promise.resolve().then(function(){if(W.include_docs&&W.attachments)return HN(na,I,W)}).then(function(){var M={total_rows:la,offset:W.skip,rows:na};W.update_seq&&(M.update_seq=F._updateSeq);ka(null,M)},ka);Da()}).on("unpipe",function(){Pa.end()});Aa.on("error",ka);Aa.pipe(Pa)})})(Y,
Q)};D._changes=function(Y){function Q(){Y.done=!0;Y.return_docs&&Y.limit&&Y.limit<ea.length&&(ea.length=Y.limit);Da.unpipe(M);Da.destroy();Y.continuous||Y.cancelled||(Y.include_docs&&Y.attachments&&Y.return_docs?HN(ea,I,Y).then(function(){Y.complete(null,{results:ea,last_seq:la})}):Y.complete(null,{results:ea,last_seq:la}))}Y=mg.clone(Y);if(Y.continuous){var W=V+":"+mg.uuid();IB.addListener(V,W,D,Y);IB.notify(V);return{cancel:function(){IB.removeListener(V,W)}}}var ka=Y.descending,ea=[],la=Y.since||
0,db=0,ub={reverse:ka};if("limit"in Y&&0<Y.limit)var xa=Y.limit;ub.reverse||(ub.start=A(Y.since||0));var na=Y.doc_ids&&new oo.Set(Y.doc_ids),Aa=mg.filterChange(Y),Pa=new oo.Map,Da=I.bySeqStore.readStream(ub),M=r5.obj(function(U,aa,pa){function ma(ca){function qa(Va){var nb=Y.processChange(Va,ca,Y);nb.seq=ca.seq;Va=Aa(nb);if("object"===typeof Va)return Y.complete(Va);if(Va){db++;if(Y.attachments&&Y.include_docs)HN([nb],I,Y).then(function(){Y.onChange(nb)});else Y.onChange(nb);Y.return_docs&&ea.push(nb)}pa()}
var ra=GN(ca);if(ca.seq!==La)return pa();la=La;if(ra===ib._rev)return qa(ib);I.bySeqStore.get(A(ca.rev_map[ra]),function(Va,nb){qa(nb)})}if(xa&&db>=xa)return Q(),pa();if(Y.cancelled||Y.done)return pa();var La=parseInt(U.key,10),ib=U.value;if(La===Y.since&&!ka||na&&!na.has(ib._id))return pa();if(U=Pa.get(ib._id))return ma(U);I.docStore.get(ib._id,function(ca,qa){if(Y.cancelled||Y.done||F.isClosed()||sk.isLocalId(qa.id))return pa();Pa.set(ib._id,qa);ma(qa)})},function(U){if(Y.cancelled)return U();Y.return_docs&&
Y.limit&&Y.limit<ea.length&&(ea.length=Y.limit);U()}).on("unpipe",function(){M.end();Q()});Da.pipe(M);return{cancel:function(){Y.cancelled=!0;Q()}}};D._close=function(Y){if(F.isClosed())return Y(Gf.createError(Gf.NOT_OPEN));F.close(function(Q){Q?Y(Q):(Fa.delete(V),Y())})};D._getRevisionTree=function(Y,Q){I.docStore.get(Y,function(W,ka){W?Q(Gf.createError(Gf.MISSING_DOC)):Q(null,ka.rev_tree)})};D._doCompaction=w(function(Y,Q,W,ka){D._doCompactionNoLock(Y,Q,W,ka)});D._doCompactionNoLock=function(Y,
Q,W,ka){"function"===typeof W&&(ka=W,W={});if(!Q.length)return ka();var ea=W.ctx||new iu;ea.get(I.docStore,Y,function(la,db){function ub(U){U&&(M=U);if(++Da===Q.length){if(M)return ka(M);na()}}function xa(U){if(U)return ka(U);ea.batch(Aa);if(W.ctx)return ka();ea.execute(F,ka)}function na(){function U(ib){ib&&(ma=ib);++pa===aa.length&&xa(ma)}var aa=Object.keys(Pa);if(!aa.length)return xa();var pa=0,ma,La=new oo.Map;Q.forEach(function(ib){La.set(Y+"@"+ib,!0)});aa.forEach(function(ib){ea.get(I.attachmentStore,
ib,function(ca,qa){if(ca)return"NotFoundError"===ca.name?U():U(ca);ca=Object.keys(qa.refs||{}).filter(function(Va){return!La.has(Va)});var ra={};ca.forEach(function(Va){ra[Va]=!0});ca.length?Aa.push({key:ib,type:"put",value:{refs:ra},prefix:I.attachmentStore}):Aa=Aa.concat([{key:ib,type:"del",prefix:I.attachmentStore},{key:ib,type:"del",prefix:I.binaryStore}]);U()})})}if(la)return ka(la);la=Q.map(function(U){var aa=db.rev_map[U];delete db.rev_map[U];return aa});$z.traverseRevTree(db.rev_tree,function(U,
aa,pa,ma,La){-1!==Q.indexOf(aa+"-"+pa)&&(La.status="missing")});var Aa=[];Aa.push({key:db.id,value:db,type:"put",prefix:I.docStore});var Pa={},Da=0,M;la.forEach(function(U){Aa.push({key:A(U),type:"del",prefix:I.bySeqStore});ea.get(I.bySeqStore,A(U),function(aa,pa){if(aa)return"NotFoundError"===aa.name?ub():ub(aa);Object.keys(pa._attachments||{}).forEach(function(ma){Pa[pa._attachments[ma].digest]=!0});ub()})})})};D._getLocal=function(Y,Q){I.localStore.get(Y,function(W,ka){W?Q(Gf.createError(Gf.MISSING_DOC)):
Q(null,ka)})};D._putLocal=function(Y,Q,W){"function"===typeof Q&&(W=Q,Q={});Q.ctx?D._putLocalNoLock(Y,Q,W):D._putLocalWithLock(Y,Q,W)};D._putLocalWithLock=w(function(Y,Q,W){D._putLocalNoLock(Y,Q,W)});D._putLocalNoLock=function(Y,Q,W){delete Y._revisions;var ka=Y._rev,ea=Y._id,la=Q.ctx||new iu;la.get(I.localStore,ea,function(db,ub){if(db&&ka||ub&&ub._rev!==ka)return W(Gf.createError(Gf.REV_CONFLICT));Y._rev=ka?"0-"+(parseInt(ka.split("-")[1],10)+1):"0-1";la.batch([{type:"put",prefix:I.localStore,key:ea,
value:Y}]);var xa={ok:!0,id:Y._id,rev:Y._rev};if(Q.ctx)return W(null,xa);la.execute(F,function(na){if(na)return W(na);W(null,xa)})})};D._removeLocal=function(Y,Q,W){"function"===typeof Q&&(W=Q,Q={});Q.ctx?D._removeLocalNoLock(Y,Q,W):D._removeLocalWithLock(Y,Q,W)};D._removeLocalWithLock=w(function(Y,Q,W){D._removeLocalNoLock(Y,Q,W)});D._removeLocalNoLock=function(Y,Q,W){var ka=Q.ctx||new iu;ka.get(I.localStore,Y._id,function(ea,la){if(ea)return"NotFoundError"!==ea.name?W(ea):W(Gf.createError(Gf.MISSING_DOC));
if(la._rev!==Y._rev)return W(Gf.createError(Gf.REV_CONFLICT));ka.batch([{prefix:I.localStore,type:"del",key:Y._id}]);var db={ok:!0,id:Y._id,rev:"0-0"};if(Q.ctx)return W(null,db);ka.execute(F,function(ub){if(ub)return W(ub);W(null,db)})})};D._destroy=function(Y,Q){Y=mg.functionName(ba);if(HB.has(Y))var W=HB.get(Y);else return C(V,Q);W.has(V)?(IB.removeAllListeners(V),W.get(V).close(function(){W.delete(V);C(V,Q)})):C(V,Q)}},ju="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,Nma={},t5=yh;IN.prototype.next=function(a){var d=this||ju;if("function"!=typeof a)throw Error("next() requires a callback argument");if(d._ended)return a(Error("cannot call next() after end()"));if(d._nexting)return a(Error("cannot call next() before previous next() has completed"));d._nexting=!0;if("function"==typeof d._next)return d._next(function(){d._nexting=!1;a.apply(null,arguments)});t5.nextTick(function(){d._nexting=!1;a()})};IN.prototype.end=function(a){if("function"!=typeof a)throw Error("end() requires a callback argument");
if((this||ju)._ended)return a(Error("end() already called on iterator"));(this||ju)._ended=!0;if("function"==typeof(this||ju)._end)return this._end(a);t5.nextTick(a)};var u5=Nma=IN,hj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Oma={},Pma=yh;Rr.prototype._serializeKey=function(a){return(this||hj)._db._serializeKey(a)};Rr.prototype._serializeValue=function(a){return(this||hj)._db._serializeValue(a)};Rr.prototype._checkWritten=function(){if((this||hj)._written)throw Error("write() already called on this batch");
};Rr.prototype.put=function(a,d){this._checkWritten();var k=(this||hj)._db._checkKey(a,"key",(this||hj)._db._isBuffer);if(k)throw k;a=this._serializeKey(a);d=this._serializeValue(d);"function"==typeof(this||hj)._put?this._put(a,d):(this||hj)._operations.push({type:"put",key:a,value:d});return this||hj};Rr.prototype.del=function(a){this._checkWritten();var d=(this||hj)._db._checkKey(a,"key",(this||hj)._db._isBuffer);if(d)throw d;a=this._serializeKey(a);"function"==typeof(this||hj)._del?this._del(a):
(this||hj)._operations.push({type:"del",key:a});return this||hj};Rr.prototype.clear=function(){this._checkWritten();(this||hj)._operations=[];"function"==typeof(this||hj)._clear&&this._clear();return this||hj};Rr.prototype.write=function(a,d){this._checkWritten();"function"==typeof a&&(d=a);if("function"!=typeof d)throw Error("write() requires a callback argument");"object"!=typeof a&&(a={});(this||hj)._written=!0;if("function"==typeof(this||hj)._write)return this._write(d);if("function"==typeof(this||
hj)._db._batch)return(this||hj)._db._batch((this||hj)._operations,a,d);Pma.nextTick(d)};var Qma=Oma=Rr,Fj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,v5={},Rma=Ng.Buffer,zs=yh;Hl.prototype.open=function(a,d){var k=this||Fj,b=(this||Fj).status;"function"==typeof a&&(d=a);if("function"!=typeof d)throw Error("open() requires a callback argument");"object"!=typeof a&&(a={});a.createIfMissing=0!=a.createIfMissing;a.errorIfExists=!!a.errorIfExists;"function"==typeof(this||
Fj)._open?((this||Fj).status="opening",this._open(a,function(e){if(e)return k.status=b,d(e);k.status="open";d()})):((this||Fj).status="open",zs.nextTick(d))};Hl.prototype.close=function(a){var d=this||Fj,k=(this||Fj).status;if("function"!=typeof a)throw Error("close() requires a callback argument");"function"==typeof(this||Fj)._close?((this||Fj).status="closing",this._close(function(b){if(b)return d.status=k,a(b);d.status="closed";a()})):((this||Fj).status="closed",zs.nextTick(a))};Hl.prototype.get=
function(a,d,k){var b;"function"==typeof d&&(k=d);if("function"!=typeof k)throw Error("get() requires a callback argument");if(b=this._checkKey(a,"key"))return k(b);a=this._serializeKey(a);"object"!=typeof d&&(d={});d.asBuffer=0!=d.asBuffer;if("function"==typeof(this||Fj)._get)return this._get(a,d,k);zs.nextTick(function(){k(Error("NotFound"))})};Hl.prototype.put=function(a,d,k,b){var e;"function"==typeof k&&(b=k);if("function"!=typeof b)throw Error("put() requires a callback argument");if(e=this._checkKey(a,
"key"))return b(e);a=this._serializeKey(a);d=this._serializeValue(d);"object"!=typeof k&&(k={});if("function"==typeof(this||Fj)._put)return this._put(a,d,k,b);zs.nextTick(b)};Hl.prototype.del=function(a,d,k){var b;"function"==typeof d&&(k=d);if("function"!=typeof k)throw Error("del() requires a callback argument");if(b=this._checkKey(a,"key"))return k(b);a=this._serializeKey(a);"object"!=typeof d&&(d={});if("function"==typeof(this||Fj)._del)return this._del(a,d,k);zs.nextTick(k)};Hl.prototype.batch=
function(a,d,k){if(!arguments.length)return this._chainedBatch();"function"==typeof d&&(k=d);"function"==typeof a&&(k=a);if("function"!=typeof k)throw Error("batch(array) requires a callback argument");if(!Array.isArray(a))return k(Error("batch(array) requires an array argument"));d&&"object"==typeof d||(d={});for(var b=0,e=a.length,l,p;b<e;b++)if(l=a[b],"object"==typeof l&&((p=this._checkKey(l.type,"type"))||(p=this._checkKey(l.key,"key"))))return k(p);if("function"==typeof(this||Fj)._batch)return this._batch(a,
d,k);zs.nextTick(k)};Hl.prototype.approximateSize=function(a,d,k){if(null==a||null==d||"function"==typeof a||"function"==typeof d)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof k)throw Error("approximateSize() requires a callback argument");a=this._serializeKey(a);d=this._serializeKey(d);if("function"==typeof(this||Fj)._approximateSize)return this._approximateSize(a,d,k);zs.nextTick(function(){k(null,0)})};Hl.prototype._setupIteratorOptions=
function(a){var d=this||Fj;a=xs(a);"start end gt gte lt lte".split(" ").forEach(function(k){a[k]&&d._isBuffer(a[k])&&0===a[k].length&&delete a[k]});a.reverse=!!a.reverse;a.keys=0!=a.keys;a.values=0!=a.values;a.limit="limit"in a?a.limit:-1;a.keyAsBuffer=0!=a.keyAsBuffer;a.valueAsBuffer=0!=a.valueAsBuffer;return a};Hl.prototype.iterator=function(a){"object"!=typeof a&&(a={});a=this._setupIteratorOptions(a);return"function"==typeof(this||Fj)._iterator?this._iterator(a):new u5(this||Fj)};Hl.prototype._chainedBatch=
function(){return new Qma(this||Fj)};Hl.prototype._isBuffer=function(a){return Rma.isBuffer(a)};Hl.prototype._serializeKey=function(a){return this._isBuffer(a)?a:String(a)};Hl.prototype._serializeValue=function(a){return null==a?"":this._isBuffer(a)||zs.browser?a:String(a)};Hl.prototype._checkKey=function(a,d){if(null===a||void 0===a)return Error(d+" cannot be `null` or `undefined`");if(this._isBuffer(a)&&0===a.length)return Error(d+" cannot be an empty Buffer");if(""===String(a))return Error(d+" cannot be an empty String")};
v5=Hl;var Sma=v5;var w5={};w5=function(a){return new bx(a||tca,null)};var Tl=bx.prototype;Object.defineProperty(Tl,"keys",{get:function(){var a=[];this.forEach(function(d,k){a.push(d)});return a}});Object.defineProperty(Tl,"values",{get:function(){var a=[];this.forEach(function(d,k){a.push(k)});return a}});Object.defineProperty(Tl,"length",{get:function(){return this.root?this.root._count:0}});Tl.insert=function(a,d){for(var k=this._compare,b=this.root,e=[],l=[];b;){var p=k(a,b.key);e.push(b);l.push(p);
b=0>=p?b.left:b.right}e.push(new Gm(0,a,d,null,null,1));for(a=e.length-2;0<=a;--a)b=e[a],e[a]=0>=l[a]?new Gm(b._color,b.key,b.value,e[a+1],b.right,b._count+1):new Gm(b._color,b.key,b.value,b.left,e[a+1],b._count+1);for(a=e.length-1;1<a;--a){l=e[a-1];b=e[a];if(1===l._color||1===b._color)break;d=e[a-2];if(d.left===l)if(l.left===b)if((p=d.right)&&0===p._color)l._color=1,d.right=Sr(1,p),d._color=0,--a;else{d._color=0;d.left=l.right;l._color=1;l.right=d;e[a-2]=l;e[a-1]=b;ij(d);ij(l);3<=a&&(a=e[a-3],a.left===
d?a.left=l:a.right=l);break}else if((p=d.right)&&0===p._color)l._color=1,d.right=Sr(1,p),d._color=0,--a;else{l.right=b.left;d._color=0;d.left=b.right;b._color=1;b.left=l;b.right=d;e[a-2]=b;e[a-1]=l;ij(d);ij(l);ij(b);3<=a&&(a=e[a-3],a.left===d?a.left=b:a.right=b);break}else if(l.right===b)if((p=d.left)&&0===p._color)l._color=1,d.left=Sr(1,p),d._color=0,--a;else{d._color=0;d.right=l.left;l._color=1;l.left=d;e[a-2]=l;e[a-1]=b;ij(d);ij(l);3<=a&&(a=e[a-3],a.right===d?a.right=l:a.left=l);break}else if((p=
d.left)&&0===p._color)l._color=1,d.left=Sr(1,p),d._color=0,--a;else{l.left=b.right;d._color=0;d.right=b.left;b._color=1;b.right=l;b.left=d;e[a-2]=b;e[a-1]=l;ij(d);ij(l);ij(b);3<=a&&(a=e[a-3],a.right===d?a.right=b:a.left=b);break}}e[0]._color=1;return new bx(k,e[0])};Tl.forEach=function(a,d,k){if(this.root)switch(arguments.length){case 1:return JN(a,this.root);case 2:return KN(d,this._compare,a,this.root);case 3:if(!(0<=this._compare(d,k)))return LN(d,k,this._compare,a,this.root)}};Object.defineProperty(Tl,
"begin",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.left;return new Hm(this,a)}});Object.defineProperty(Tl,"end",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.right;return new Hm(this,a)}});Tl.at=function(a){if(0>a)return new Hm(this,[]);for(var d=this.root,k=[];;){k.push(d);if(d.left){if(a<d.left._count){d=d.left;continue}a-=d.left._count}if(!a)return new Hm(this,k);--a;if(d.right){if(a>=d.right._count)break;d=d.right}else break}return new Hm(this,[])};Tl.ge=function(a){for(var d=
this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0>=l&&(e=b.length);k=0>=l?k.left:k.right}b.length=e;return new Hm(this,b)};Tl.gt=function(a){for(var d=this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0>l&&(e=b.length);k=0>l?k.left:k.right}b.length=e;return new Hm(this,b)};Tl.lt=function(a){for(var d=this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0<l&&(e=b.length);k=0>=l?k.left:k.right}b.length=e;return new Hm(this,b)};Tl.le=function(a){for(var d=
this._compare,k=this.root,b=[],e=0;k;){var l=d(a,k.key);b.push(k);0<=l&&(e=b.length);k=0>l?k.left:k.right}b.length=e;return new Hm(this,b)};Tl.find=function(a){for(var d=this._compare,k=this.root,b=[];k;){var e=d(a,k.key);b.push(k);if(0===e)return new Hm(this,b);k=0>=e?k.left:k.right}return new Hm(this,[])};Tl.remove=function(a){return(a=this.find(a))?a.remove():this};Tl.get=function(a){for(var d=this._compare,k=this.root;k;){var b=d(a,k.key);if(0===b)return k.value;k=0>=b?k.left:k.right}};var Kn=
Hm.prototype;Object.defineProperty(Kn,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(Kn,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});Kn.clone=function(){return new Hm(this.tree,this._stack.slice())};Kn.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var d=Array(a.length),k=a[a.length-1];d[d.length-1]=new Gm(k._color,k.key,k.value,k.left,k.right,k._count);for(var b=a.length-2;0<=b;--b)k=
a[b],d[b]=k.left===a[b+1]?new Gm(k._color,k.key,k.value,d[b+1],k.right,k._count):new Gm(k._color,k.key,k.value,k.left,d[b+1],k._count);k=d[d.length-1];if(k.left&&k.right){a=d.length;for(k=k.left;k.right;)d.push(k),k=k.right;b=d[a-1];d.push(new Gm(k._color,b.key,b.value,k.left,k.right,k._count));d[a-1].key=k.key;d[a-1].value=k.value;for(b=d.length-2;b>=a;--b)k=d[b],d[b]=new Gm(k._color,k.key,k.value,k.left,d[b+1],k._count);d[a-1].left=d[a]}k=d[d.length-1];if(0===k._color)for(b=d[d.length-2],b.left===
k?b.left=null:b.right===k&&(b.right=null),d.pop(),b=0;b<d.length;++b)d[b]._count--;else if(k.left||k.right)for(k.left?U_(k,k.left):k.right&&U_(k,k.right),k._color=1,b=0;b<d.length-1;++b)d[b]._count--;else{if(1===d.length)return new bx(this.tree._compare,null);for(b=0;b<d.length;++b)d[b]._count--;b=d[d.length-2];for(var e,l,p,q=d.length-1;0<=q;--q){a=d[q];if(0===q){a._color=1;break}e=d[q-1];if(e.left===a){l=e.right;if(l.right&&0===l.right._color){l=e.right=lp(l);p=l.right=lp(l.right);e.right=l.left;
l.left=e;l.right=p;l._color=e._color;a._color=1;e._color=1;p._color=1;ij(e);ij(l);if(1<q){var u=d[q-2];u.left===e?u.left=l:u.right=l}d[q-1]=l;break}else if(l.left&&0===l.left._color){l=e.right=lp(l);p=l.left=lp(l.left);e.right=p.left;l.left=p.right;p.left=e;p.right=l;p._color=e._color;e._color=1;l._color=1;a._color=1;ij(e);ij(l);ij(p);1<q&&(u=d[q-2],u.left===e?u.left=p:u.right=p);d[q-1]=p;break}if(1===l._color)if(0===e._color){e._color=1;e.right=Sr(0,l);break}else e.right=Sr(0,l);else l=lp(l),e.right=
l.left,l.left=e,l._color=e._color,e._color=0,ij(e),ij(l),1<q&&(u=d[q-2],u.left===e?u.left=l:u.right=l),d[q-1]=l,d[q]=e,q+1<d.length?d[q+1]=a:d.push(a),q+=2}else{l=e.left;if(l.left&&0===l.left._color){l=e.left=lp(l);p=l.left=lp(l.left);e.left=l.right;l.right=e;l.left=p;l._color=e._color;a._color=1;e._color=1;p._color=1;ij(e);ij(l);1<q&&(u=d[q-2],u.right===e?u.right=l:u.left=l);d[q-1]=l;break}else if(l.right&&0===l.right._color){l=e.left=lp(l);p=l.right=lp(l.right);e.left=p.right;l.right=p.left;p.right=
e;p.left=l;p._color=e._color;e._color=1;l._color=1;a._color=1;ij(e);ij(l);ij(p);1<q&&(u=d[q-2],u.right===e?u.right=p:u.left=p);d[q-1]=p;break}if(1===l._color)if(0===e._color){e._color=1;e.left=Sr(0,l);break}else e.left=Sr(0,l);else l=lp(l),e.left=l.right,l.right=e,l._color=e._color,e._color=0,ij(e),ij(l),1<q&&(u=d[q-2],u.right===e?u.right=l:u.left=l),d[q-1]=l,d[q]=e,q+1<d.length?d[q+1]=a:d.push(a),q+=2}}b.left===k?b.left=null:b.right=null}return new bx(this.tree._compare,d[0])};Object.defineProperty(Kn,
"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(Kn,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(Kn,"index",{get:function(){var a=0,d=this._stack;if(0===d.length)return(a=this.tree.root)?a._count:0;d[d.length-1].left&&(a=d[d.length-1].left._count);for(var k=d.length-2;0<=k;--k)d[k+1]===d[k].right&&(++a,d[k].left&&(a+=d[k].left._count));
return a},enumerable:!0});Kn.next=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.right)for(d=d.right;d;)a.push(d),d=d.left;else for(a.pop();0<a.length&&a[a.length-1].right===d;)d=a[a.length-1],a.pop()}};Object.defineProperty(Kn,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].left===a[d])return!0;return!1}});Kn.update=function(a){var d=this._stack;if(0===d.length)throw Error("Can't update empty node!");
var k=Array(d.length),b=d[d.length-1];k[k.length-1]=new Gm(b._color,b.key,a,b.left,b.right,b._count);for(a=d.length-2;0<=a;--a)b=d[a],k[a]=b.left===d[a+1]?new Gm(b._color,b.key,b.value,k[a+1],b.right,b._count):new Gm(b._color,b.key,b.value,b.left,k[a+1],b._count);return new bx(this.tree._compare,k[0])};Kn.prev=function(){var a=this._stack;if(0!==a.length){var d=a[a.length-1];if(d.left)for(d=d.left;d;)a.push(d),d=d.right;else for(a.pop();0<a.length&&a[a.length-1].left===d;)d=a[a.length-1],a.pop()}};
Object.defineProperty(Kn,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var d=a.length-1;0<d;--d)if(a[d-1].right===a[d])return!0;return!1}});var Tma=w5,XI={},YI=Ng,xq=YI.Buffer;xq.from&&xq.alloc&&xq.allocUnsafe&&xq.allocUnsafeSlow?XI=YI:(V_(YI,XI),XI.Buffer=cx);V_(xq,cx);cx.from=function(a,d,k){if("number"===typeof a)throw new TypeError("Argument must not be a number");return xq(a,d,k)};cx.alloc=function(a,d,k){if("number"!==typeof a)throw new TypeError("Argument must be a number");
a=xq(a);void 0!==d?"string"===typeof k?a.fill(d,k):a.fill(d):a.fill(0);return a};cx.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return xq(a)};cx.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return YI.SlowBuffer(a)};var Re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Uma={},x5=bj,X_=Sma,W_=u5,Im=Cj,yca=Tma,ZI=XI.Buffer,dx={};x5(pF,W_);pF.prototype._next=function(a){if((this||
Re)._done++>=(this||Re)._limit||!(this||Re)._tree.valid)return Zh(a);var d=(this||Re)._tree.key;var k=(this||Re)._tree.value;if(!this._test(d))return Zh(a);(this||Re).keyAsBuffer&&(d=ZI.from(d));(this||Re).valueAsBuffer&&(k=ZI.from(k));(this||Re)._tree[(this||Re)._incr]();Zh(function(){a(null,d,k)})};pF.prototype._test=function(){return!0};im.clearGlobalStore=function(a){a?Object.keys(dx).forEach(function(d){delete dx[d]}):dx={}};x5(im,X_);im.prototype._open=function(a,d){var k=this||Re;Zh(function(){d(null,
k)})};im.prototype._put=function(a,d,k,b){if("undefined"===typeof d||null===d)d="";k=(this||Re)._store[(this||Re)._location].find(a);(this||Re)._store[(this||Re)._location]=k.valid?k.update(d):(this||Re)._store[(this||Re)._location].insert(a,d);Zh(b)};im.prototype._get=function(a,d,k){var b=(this||Re)._store[(this||Re)._location].get(a);if("undefined"===typeof b)return Zh(function(){k(Error("NotFound"))});!1===d.asBuffer||this._isBuffer(b)||(b=ZI.from(String(b)));Zh(function(){k(null,b)})};im.prototype._del=
function(a,d,k){(this||Re)._store[(this||Re)._location]=(this||Re)._store[(this||Re)._location].remove(a);Zh(k)};im.prototype._batch=function(a,d,k){d=-1;for(var b,e,l,p=a.length,q=(this||Re)._store[(this||Re)._location];++d<p;)a[d]&&(b=this._isBuffer(a[d].key)?a[d].key:String(a[d].key),l=q.find(b),"put"===a[d].type?(e=this._isBuffer(a[d].value)?a[d].value:String(a[d].value),q=l.valid?l.update(e):q.insert(b,e)):q=l.remove());(this||Re)._store[(this||Re)._location]=q;Zh(k)};im.prototype._iterator=
function(a){return new pF(this||Re,a)};im.prototype._isBuffer=function(a){return ZI.isBuffer(a)};im.destroy=function(a,d){a="$"+a;a in dx&&delete dx[a];Zh(d)};var Vma=Uma=im.default=im,Wma={},zca=mg,Bca=Y_(Mma),Aca=Y_(Vma);MN.valid=function(){return!0};MN.use_prefix=!1;var Xma=Wma=function(a){a.adapter("memory",MN,!0)},zg=lively.FreezerRuntime.recorderFor("lively.storage/database.js");zg.nodejsRequire=function(a){if(!zg.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==
typeof System?System._nodeRequire(a):zg.require("module")._load(a)};zg.nodejs_leveldbPath=function(a){if(a.startsWith("/"))return a;if(a.match(/[^\/]+:\/\//))return a.startsWith("file:")&&(a=a.replace(/^file:\/\//,"")),a;if(!zg.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var d="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):zg.GLOBAL.process.cwd(),k=zg.nodejsRequire("path").join,b=zg.nodejsRequire("fs"),e=b.mkdirSync,
l=b.existsSync;b=b.readFileSync;if(a.includes("/"))return k(d,a);try{var p=b(k(d,"../package.json")),q=JSON.parse(p);if("lively.web"===q.name||"lively.next"===q.name){var u=k(d,"../.livelydbs");l(u)||e(u);return k(u,a)}}catch(w){}d=k(d,".livelydbs");l(d)||e(d);return k(d,a)};zg.nodejs_attemptToLoadProperPouchDB=function(){if(!zg.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var a=System._nodeRequire("path").join,d=System.normalizeSync("lively.storage/index.js");
d=System.normalizeSync("pouchdb",d).replace(/file:\/\//,"");a=a(d,"../../lib/index.js");try{return zg.PouchDB=System._nodeRequire(a),zg.PouchDB.plugin(zg.pouchdbAdapterMem),!0}catch(k){return!1}}try{return zg.PouchDB=zg.require("pouchdb"),zg.PouchDB.plugin(zg.pouchdbAdapterMem),!0}catch(k){return!1}};zg._PouchDB=cia;zg.pouchdbAdapterMem=Xma;zg.Path=Sg;zg.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;zg.isNode="undefined"!==typeof global&&
"undefined"!==typeof zg.process;zg.PouchDB=zg._PouchDB;zg.PouchDB.plugin&&zg.pouchdbAdapterMem&&zg.PouchDB.plugin(zg.pouchdbAdapterMem);zg.createPouchDB=zg.isNode?function(){var a=!1,d=!1;return function(k,b){b=void 0===b?{}:b;a||(a=!0,d=zg.nodejs_attemptToLoadProperPouchDB());b.adapter||(b.adapter=k.startsWith("http")?"http":d?"leveldb":"memory");"leveldb"==b.adapter&&(k=zg.nodejs_leveldbPath(k));b=Object.assign({},b,{name:k});return new zg.PouchDB(b)}}():function(a,d){return new zg.PouchDB(Object.assign({name:a},
d))};var ig=function(a,d){d=void 0===d?{}:d;this.name=a;this.options=d;this._pouchdb=null};ig.findDB=function(a){return this.databases.get(a)};ig.ensureDB=function(a,d){var k=this.findDB(a);if(k)return k;k=new this(a,d);this.databases.set(a,k);a.endsWith("lively.storage-meta")||this.createMetaEntryForDB(a,d);return k};ig.knownDBs=function(a,d){return zg.Database.ensureDB("lively.storage-meta").getAll().then(function(k){return k.map(function(b){return b._id})})};ig.createMetaEntryForDB=function(a,
d){var k=zg.Database.ensureDB("lively.storage-meta");k.has(a).then(function(b){return!b&&k.set(a,{created:Date.now(),options:d})})};ig.knowsDB=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=d.ensureDB(a),e.yield(k.docCount(),2)):3!=e.nextAddress?(b=e.yieldResult,0<b?e.return(!0):e.yield(k.destroy(),3)):e.return(!1)})};ig.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};ig.prototype.isDestroyed=
function(){return!!this.pouchdb._destroyed};ig.prototype.destroy=function(a){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(a)};ig.prototype.update=function(a,d,k,b){b=void 0===b?0:b;var e=this,l,p,q,u,w,y,A,C,D,L,I,S,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ba){switch(ba.nextAddress){case 1:return l=k=k||{},p=void 0===l.ensure?!0:l.ensure,q=void 0===l.retryOnConflict?!0:l.retryOnConflict,u=void 0===l.maxUpdateAttempts?10:l.maxUpdateAttempts,
w={latest:!0},y=e,A=y.pouchdb,ba.setCatchFinallyBlocks(2),ba.yield(A.get(a,w),4);case 4:C=ba.yieldResult;ba.leaveTryBlock(3);break;case 2:if(L=ba.enterCatchBlock(),"not_found"!==L.name||!p)throw L;case 3:return ba.yield(d(C),5);case 5:D=ba.yieldResult;if(!D||"object"!==typeof D)return ba.return(null);D._id!==a&&(D._id=a);C&&D._rev!==C._rev&&(D._rev=C._rev);ba.setCatchFinallyBlocks(6);return ba.yield(A.put(D),8);case 8:return I=ba.yieldResult,S=I.rev,ba.return(Object.assign(D,{_rev:S}));case 6:V=ba.enterCatchBlock();
if("conflict"===V.name&&q&&b<u)return ba.return(e.update(a,d,k,b+1));throw V;}})};ig.prototype.mixin=function(a,d,k){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(b.update(a,function(l){return Object.assign(l||{_id:a},d)},k))})};ig.prototype.set=function(a,d,k){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(b.update(a,function(l){return d},k))})};ig.prototype.get=function(a,d){d=void 0===d?{}:d;var k=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.setCatchFinallyBlocks(2),e.yield(k.pouchdb.get(a,d),4);if(2!=e.nextAddress)return e.return(e.yieldResult);b=e.enterCatchBlock();if("not_found"===b.name)return e.return(void 0);throw b;})};ig.prototype.has=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(d.get(a),2):k.return(!!k.yieldResult)})};ig.prototype.add=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d.pouchdb.post(a))})};
ig.prototype.docList=function(a){a=void 0===a?{}:a;var d=this,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(d.pouchdb.allDocs(a),2);k=y.yieldResult;b=k.rows;e=[];for(l=0;l<b.length;l++)p=b[l],q=p.id,u=p.value,w=u.rev,e.push({id:q,rev:w});return y.return(e)})};ig.prototype.docCount=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(a.pouchdb.allDocs(),2);d=k.yieldResult;
return k.return(d.rows.length)})};ig.prototype.revList=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(d.pouchdb.get(a,{revs:!0}),2);k=p.yieldResult;b=k._revisions;e=b.start;l=b.ids;return p.return(l.map(function(q){return e--+"-"+q}))})};ig.prototype.getAllRevisions=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(b=d,e=void 0===
b.skip?0:b.skip,l=void 0===b.limit?0:b.limit,u.yield(k.revList(a),2)):3!=u.nextAddress?(p=u.yieldResult,0<e&&(p=p.slice(e)),0<l&&(p=p.slice(0,l)),q=p.map(function(w){return{rev:w,id:a}}),u.yield(k.getDocuments(q),3)):u.return(u.yieldResult)})};ig.prototype.getAll=function(a){a=void 0===a?{}:a;var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.pouchdb.allDocs(Object.assign({},a,{include_docs:!0})),2);k=e.yieldResult;b=k.rows;return e.return(b.map(function(l){return l.doc}))})};
ig.prototype.setDocuments=function(a,d){var k=this,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(k.pouchdb.bulkDocs(a,d),2);case 2:b=y.yieldResult,e=0;case 3:if(!(e<b.length)){y.jumpTo(5);break}l=a[e];p=b[e];if(p.ok||"conflict"!==p.name||l._rev){y.jumpTo(4);break}return y.yield(k.set(l._id,l),7);case 7:q=y.yieldResult,u=q._id,w=q._rev,b[e]={ok:!0,id:u,rev:w};case 4:e++;y.jumpTo(3);break;case 5:return y.return(b)}})};ig.prototype.updateDocuments=
function(a,d,k){var b=this,e,l,p,q,u,w,y,A,C,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return I.yield(b.pouchdb.bulkDocs(a,k),2);case 2:e=I.yieldResult,l=[],p={},q=0;case 3:if(!(q<e.length)){if(!l.length){I.jumpTo(8);break}C=Object;D=C.assign;L=p;return I.yield(b.updateDocuments(l,d,k),9)}u=a[q];w=e[q];p[w._id||u._id]=w;if(w.ok||"conflict"!==w.name){I.jumpTo(4);break}return I.yield(b.get(u._id),7);case 7:if(y=I.yieldResult,A=d(y,u))A._id||(A._id=
u._id),A._rev||(A._rev=y._rev),l.push(A);case 4:q++;I.jumpTo(3);break;case 9:p=D.call(C,{},L,{},I.yieldResult);case 8:return I.return(p)}})};ig.prototype.getDocuments=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q,u,w,y,A,C,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return b=d,e=void 0===b.ignoreErrors?!0:b.ignoreErrors,L.yield(k.pouchdb.bulkGet({docs:a}),2);l=L.yieldResult;p=l.results;q=[];for(u=0;u<p.length;u++)for(w=p[u],y=w.docs,A=w.id,console.assert(1===
y.length,"getDocuments: expected only one doc for "+A),C=0;C<y.length;C++)D=y[C],e&&!D.ok||q.push(D.ok||D.error||D);return L.return(q)})};ig.prototype.query=function(a,d){return this.pouchdb.query(a,d)};ig.prototype.remove=function(a,d,k){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return"undefined"!==typeof d?(e={_id:a,_rev:d},p.jumpTo(2)):p.yield(b.get(a),3);2!=p.nextAddress&&(e=p.yieldResult);l=e;return p.return(l?b.pouchdb.remove(l):void 0)})};
ig.prototype.removeAll=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=a.pouchdb,b.yield(d.allDocs(),2)):3!=b.nextAddress?(k=b.yieldResult,b.yield(Promise.all(k.rows.map(function(e){return d.remove(e.id,e.value.rev)})),3)):b.return(b.yieldResult)})};ig.prototype.replicateTo=function(a,d){a instanceof zg.Database&&(a=a.pouchdb);return this.pouchdb.replicate.to(a,d)};ig.prototype.replicateFrom=function(a,d){a instanceof zg.Database&&
(a=a.pouchdb);return this.pouchdb.replicate.from(a,d)};ig.prototype.sync=function(a,d){a instanceof zg.Database&&(a=a.pouchdb);return this.pouchdb.sync(a,d)};ig.prototype.getConflicts=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},a)),2);k=e.yieldResult;b=k.rows;return e.return(b.map(function(l){var p={id:l.id,rev:l.doc._rev,
doc:l.doc};l.doc._conflicts&&(p.conflicts=l.doc._conflicts,delete l.doc._conflicts);return p}))})};ig.prototype.resolveConflicts=function(a,d){var k=this,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(k.pouchdb.get(a,{conflicts:!0}),2);case 2:return b=y.yieldResult,e=b._conflicts.map(function(A){return{id:a,rev:A}}),y.yield(k.getDocuments(e),3);case 3:l=y.yieldResult,p=b,q=$jscomp.makeIterator(l),u=q.next();case 4:if(u.done){y.jumpTo(6);
break}w=u.value;return y.yield(d(p,w),7);case 7:return(p=y.yieldResult)?y.yield(k.set(a,p),8):y.return(null);case 8:return p=y.yieldResult,y.yield(k.pouchdb.remove(w),5);case 5:u=q.next();y.jumpTo(4);break;case 6:return y.return(p)}})};ig.prototype.diffWith=function(a){var d=this,k,b,e,l,p,q,u,w,y,A,C,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(a.docList(),2);if(3!=I.nextAddress)return k=I.yieldResult,I.yield(d.docList(),3);b=I.yieldResult;
e=k.reduce(function(S,V){var ba={};return Object.assign(S,(ba[V.id]=V.rev,ba))},{});l=b.reduce(function(S,V){var ba={};return Object.assign(S,(ba[V.id]=V.rev,ba))},{});p=[];q=[];u=[];for(w in e)y=e[w],(A=l[w])?y!=A&&u.push({right:{id:w,rev:y},left:{id:w,rev:A}}):q.push({id:w,rev:y});for(C in l)D=l[C],(L=e[C])||p.push({id:C,rev:D});return I.return({inLeft:p,inRight:q,changed:u})})};ig.loadDump=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==
u.nextAddress?(b=a,e=b.header,l=b.docs,p=d.name||e.name,q=k.ensureDB(p),u.yield(q.setDocuments(l,{new_edits:!1}),2)):u.return(q)})};ig.prototype.dump=function(a){a=void 0===a?{}:a;var d=this,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ba){if(1==ba.nextAddress)return k=a,b=k.filterFn,e=k.name,l=k.type,p=k.dbInfo,q=d,u=q.name,w=q.pouchdb,A=y=e||u,C=l||w.type(),D=(new Date).toJSON(),L=Object,I=L.assign,ba.yield(w.info(),2);if(3!=ba.nextAddress)return S=
{name:A,db_type:C,start_time:D,db_info:I.call(L,{},ba.yieldResult,{db_name:y},p)},ba.yield(d.getAll({attachments:!0}),3);V=ba.yieldResult;"function"===typeof b&&(V=b(V,S));return ba.return({header:S,docs:V})})};ig.prototype.backup=function(a){a=void 0===a?1:a;var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=d.name+"_backup_"+a,b=d.constructor.ensureDB(k),e.yield(d.replicateTo(b),2)):e.return(b)})};ig.prototype.migrate=function(a){var d=this,
k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(d.getAll(),2);if(3!=u.nextAddress){k=u.yieldResult;b=[];e=[];for(l=0;l<k.length;l++)p=k[l],(q=a(p,l))?(q.hasOwnProperty("_id")||(q._id=p._id),q.hasOwnProperty("_rev")&&delete q._rev,b.push(q)):e.push(p);return u.yield(d.setDocuments(b),3)}return u.return({migrated:b.length,unchanged:e.length})})};ig.prototype.createDesignDocs=function(a){return a.map(this.createDesignDoc)};ig.prototype.createDesignDoc=
function(a){var d=a.name,k=a.mapFn,b=a.reduceFn,e=a.filterFn;a={_id:"_design/"+d,version:void 0===a.version?1:a.version};e&&zg.Path("filters."+d).set(a,e.toString(),!0);k&&zg.Path("views."+d+".map").set(a,k.toString(),!0);b&&zg.Path("views."+d+".reduce").set(a,b.toString(),!0);return a};ig.prototype.addDesignDocs=function(a,d){d=void 0===d?!1:d;var k=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(b=k.createDesignDocs(a),l.yield(k.updateDocuments(b,
function(p,q){return!p.hasOwnProperty("version")||q.hasOwnProperty("version")&&q.version>p.version?q:null}),2)):3!=l.nextAddress?(e=l.yieldResult,d?l.yield(Promise.all(b.map(function(p){return k.designDocDoQueryStale(p._id)})),3):l.jumpTo(3)):l.return(e)})};ig.prototype.addDesignDoc=function(a,d){var k=a.name,b=a.mapFn,e=a.reduceFn,l=a.version;d=void 0===d?!1:d;var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){return 1==w.nextAddress?(q=p.createDesignDoc({name:k,mapFn:b,
reduceFn:e,version:l}),w.yield(p.set(q._id,q),2)):3!=w.nextAddress?(u=w.yieldResult,d?w.yield(p.designDocDoQueryStale(q._id),3):w.jumpTo(3)):w.return(u)})};ig.prototype.removeDesignDoc=function(a){return this.remove("_design/"+a)};ig.prototype.designDocDoQueryStale=function(a){a=$jscomp.makeIterator(a.split("/"));a.next();a=a.next().value;return this.query(a,{stale:"update_after"})};$jscomp.global.Object.defineProperties(ig.prototype,{pouchdb:{configurable:!0,enumerable:!0,get:function(){return this._pouchdb?
this._pouchdb:this._pouchdb=zg.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(ig,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return zg.PouchDB},set:function(a){zg.PouchDB=a}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});zg.Database=ig;zg.default=ig;var Id=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Id.isHash=function(a){return"string"===typeof a&&40===a.length&&a.match(Id.hashRe)};
Id.checkArg=function(a,d,k){if("undefined"===typeof d&&"string"===typeof k&&!k.includes("undefined"))throw Error("parameter "+a+" is undefined");if(null===d&&"string"===typeof k&&!k.includes("null"))throw Error("parameter "+a+" is null");if("string"===typeof k){var b=typeof d,e=d?d.constructor.name:"";if(!k.split("|").some(function(l){return b===l||e===l}))throw Error('parameter "'+a+'" expected to be of type '+k+" but is "+(e||b));}if("function"===typeof k&&(d=k(d))&&d.error)throw Error('check of parameter "'+
a+'" failed: '+d.error);};Id.checkArgs=function(a,d,k){for(var b in d)Id.checkArg(b,a[b],d[b]);if("function"===typeof k&&(d=k(a))&&d.error)throw Error(d.error);return a};Id.Database=ig;Id.resource=sc;Id.obj=ff;Id.promise=Uf;Id.arr=Ne;Id.string=Bg;Id.Path=Sg;Id.parse=Ej;Id.categorizer=IA;Id.sha1=function(){function a(){var l=e.createHash("sha1");return{update:function(p){return l.update(p)},digest:function(){return l.digest("hex")}}}function d(l){function p(ba){w[I]|=(255&ba)<<S;S?S-=8:(I++,S=24);
16===I&&q()}function q(){for(var ba=16;80>ba;ba++){var ua=w[ba-3]^w[ba-8]^w[ba-14]^w[ba-16];w[ba]=ua<<1|ua>>>31}var Fa,F;ua=y;var Y=A,Q=C,W=D,ka=L;for(ba=0;80>ba;ba++){20>ba?(Fa=W^Y&(Q^W),F=1518500249):40>ba?(Fa=Y^Q^W,F=1859775393):60>ba?(Fa=Y&Q|W&(Y|Q),F=2400959708):(Fa=Y^Q^W,F=3395469782);var ea=(ua<<5|ua>>>27)+Fa+ka+F+(0|w[ba]);ka=W;W=Q;Q=Y<<30|Y>>>2;Y=ua;ua=ea}y=y+ua|0;A=A+Y|0;C=C+Q|0;D=D+W|0;L=L+ka|0;for(ba=I=0;16>ba;ba++)w[ba]=0}function u(ba){for(var ua="",Fa=28;0<=Fa;Fa-=4)ua+=(ba>>Fa&15).toString(16);
return ua}var w,y=1732584193,A=4023233417,C=2562383102,D=271733878,L=3285377520,I=0,S=24,V=0;return w=l?k:new Uint32Array(80),{update:function(ba){if("string"===typeof ba){var ua=ba.length;V+=8*ua;for(var Fa=0;Fa<ua;Fa++)p(ba.charCodeAt(Fa))}else for(ua=ba.length,V+=8*ua,Fa=0;Fa<ua;Fa++)p(ba[Fa])},digest:function(){p(128);(14<I||14===I&&24>S)&&q();I=14;S=24;p(0);p(0);p(0xffffffffff<V?V/1099511627776:0);p(4294967295<V?V/4294967296:0);for(var ba=24;0<=ba;ba-=8)p(V>>ba);return u(y)+u(A)+u(C)+u(D)+u(L)}}}
var k,b,e;return"object"===typeof Id.process&&"object"===typeof Id.process.versions&&Id.process.versions.node&&"renderer"!==Id.process.__atom_type?(e="undefined"!==typeof System?System._nodeRequire("crypto"):Id.require("crypto"),b=a):(k=new Uint32Array(80),b=d),function(l){if(void 0===l)return b(!1);var p=b(!0);return p.update(l),p.digest()}}();Id.hashRe=/^[0-9a-f]+$/i;Id.objectDBs=Id.objectDBs||new Map;var Jg=function(a,d){this.name=a;if(!d.snapshotLocation||!d.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");
this.snapshotLocation=d.snapshotLocation;this.__versionDB=this.__commitDB=null};Jg.dbList=function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(a=Id.Database.ensureDB("internal__objectdb-meta"),d.yield(a.getAll(),2)):d.return(d.yieldResult.map(function(k){return k._id}))})};Jg.find=function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(k=Id.objectDBs.get(a))return l.return(k);b=Id.Database.ensureDB("internal__objectdb-meta");
return l.yield(b.get(a),2)}return(e=l.yieldResult)?l.return(d.named(a,e)):l.return()})};Jg.named=function(a,d){d=void 0===d?{}:d;var k=Id.objectDBs.get(a);if(k)return k;if(!d||!d.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof d.snapshotLocation)try{d.snapshotLocation=Id.resource(d.snapshotLocation)}catch(b){d.snapshotLocation=Id.resource(System.baseURL).join(d.snapshotLocation)}k=new this(a,d);Id.objectDBs.set(a,k);Id.Database.ensureDB("internal__objectdb-meta").set(a,
Object.assign({},d,{snapshotLocation:d.snapshotLocation.url})).catch(function(b){return console.error("error writing objectdb meta:",b)});return k};Jg.prototype.destroy=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return(d=Id.Database.findDB(a.name+"-commits"))?e.yield(d.destroy(),2):e.jumpTo(2);if(4!=e.nextAddress)return(k=Id.Database.findDB(a.name+"-version-graph"))?e.yield(k.destroy(),4):e.jumpTo(4);Id.objectDBs.delete(a.name);b=
Id.Database.ensureDB("internal__objectdb-meta");return e.yield(b.remove(a.name),0)})};Jg.prototype.snapshotResourceFor=function(a){var d=a.content.slice(0,2);a=a.content.slice(2);return this.snapshotLocation.join(d+"/"+a+".json")};Jg.prototype.snapshotObject=function(a,d,k,b,e,l,p,q){var u=this,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return w=function(C){return C},A.yield(w(k),2);y=A.yieldResult;return A.return(u.commit(a,d,y,e,l,p,q))})};Jg.prototype.loadObject=
function(a,d,k,b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.loadSnapshot(a,d,b,e),2);p=u.yieldResult;q=function(w){return w};return u.return(q(p))})};Jg.prototype.has=function(a,d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(k.objectStats(a,d),2):b.return(!!b.yieldResult)})};Jg.prototype.objects=function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(d.objectStats(a),2);k=l.yieldResult;if(a)return l.return(Object.keys(k||{}));b={};for(e in k)b[e]=Object.keys(k[e]);return l.return(b)})};Jg.prototype.objectStats=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){switch(Q.nextAddress){case 1:b={};if(e=k.__commitDB){Q.jumpTo(2);break}return Q.yield(k._commitDB(),3);case 3:e=Q.yieldResult;case 2:return l=e,p={reduce:!0,group:!0},a&&d?p.key=
a+"\x00"+d:a&&(p.startkey=a+"\x00",p.endkey=a+"\ufff0"),Q.setCatchFinallyBlocks(4),Q.yield(l.pouchdb.query("nameWithMaxMinTimestamp_index",p),6);case 6:q=Q.yieldResult;u=q.rows;w=$jscomp.makeIterator(u);for(y=w.next();!y.done;y=w.next())C=A=y.value,D=C.key,L=C.value,I=L.count,S=L.max,V=L.min,ba=$jscomp.makeIterator(D.split("\x00")),ua=ba.next().value,Fa=ba.next().value,F=b[ua]||(b[ua]={}),F[Fa]={count:I,newest:S,oldest:V};Q.leaveTryBlock(5);break;case 4:return Y=Q.enterCatchBlock(),console.error(Y),
Q.return(b);case 5:return a&&d?Q.return((b[a]||{})[d]):a?Q.return(b[a]):Q.return(b)}})};Jg.prototype.getCommits=function(a,d,k,b){k=void 0===k?"HEAD":k;b=void 0===b?Infinity:b;var e=this,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(e._log(a,d,k,b),2);case 2:l=w.yieldResult;if(!l.length)return w.return([]);if(p=e.__commitDB){w.jumpTo(3);break}return w.yield(e._commitDB(),4);case 4:p=w.yieldResult;case 3:return q=p,w.yield(q.getDocuments(l.map(function(y){return{id:y}})),
5);case 5:return u=w.yieldResult,w.return(u)}})};Jg.prototype.getCommit=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return(k=d.__commitDB)?e.jumpTo(2):e.yield(d._commitDB(),3);2!=e.nextAddress&&(k=e.yieldResult);b=k;return e.return(b.get(a))})};Jg.prototype.getCommitsWithIds=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a.length?(k=d.__commitDB)?e.jumpTo(2):e.yield(d._commitDB(),
3):e.return([]);2!=e.nextAddress&&(k=e.yieldResult);b=k;return e.return(b.getDocuments(a.map(function(l){return{id:l}})))})};Jg.prototype.getLatestCommit=function(a,d,k,b){k=void 0===k?"HEAD":k;b=void 0===b?!1:b;var e=this,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:return l=$jscomp,p=l.makeIterator,C.yield(e._log(a,d,k,1),2);case 2:q=p.call(l,C.yieldResult);u=q.next().value;if(!u)return C.return(null);if(w=e.__commitDB){C.jumpTo(3);break}return C.yield(e._commitDB(),
4);case 4:w=C.yieldResult;case 3:return y=w,C.yield(y.get(u),5);case 5:return(A=C.yieldResult)&&A.deleted&&!b?C.return(null):C.return(A)}})};Jg.prototype.commit=function(a,d,k,b,e,l,p){l=void 0===l?"HEAD":l;var q=this,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:u=b;w=u.author;y=void 0===u.description?"no description":u.description;A=void 0===u.tags?[]:u.tags;C=u.timestamp;D=void 0===u.message?"":u.message;
L=u.metadata;I=u.preview;if(!a)throw Error("object needs a type");if(!d)throw Error("object needs a name");if(!w)throw Error("Cannot commit "+a+"/"+d+" without user");if(S=q.__versionDB){la.jumpTo(2);break}return la.yield(q._versionDB(),3);case 3:S=la.yieldResult;case 2:return V=S,la.yield(q.versionGraph(a,d),4);case 4:Fa=(ua=(ba=la.yieldResult)?ba.refs[l]:null)?[ua]:[];if(p){if(!ba)throw Error('Trying to store "'+a+"/"+d+'" on top of expected version '+p+" but no version entry exists!");if(ua!==
p)throw Error('Trying to store "'+a+"/"+d+'" on top of expected version '+p+" but ref "+l+" is of version "+ua+"!");}Y=(F=Id.isHash(k))?null:k?JSON.stringify(k):null;Q=q._createCommit(a,d,y,A,L,w,C,D,Fa,F?null:k,Y,e||I,F?k:null);if(!k||F){la.jumpTo(5);break}W=q.snapshotResourceFor(Q);return la.yield(W.parent().ensureExistance(),6);case 6:return W.canDealWithJSON?la.yield(W.writeJson(k),5):la.yield(W.write(Y),5);case 5:if(ka=q.__commitDB){la.jumpTo(11);break}return la.yield(q._commitDB(),12);case 12:ka=
la.yieldResult;case 11:return ea=ka,la.yield(ea.set(Q._id,Q),13);case 13:return Q=la.yieldResult,ba||(ba={refs:{},history:{}}),ba.refs[l]=Q._id,ba.history[Q._id]=Fa,la.yield(V.set(a+"/"+d,ba),14);case 14:return la.return(Q)}})};Jg.prototype.loadSnapshot=function(a,d,k,b){b=void 0===b?"HEAD":b;var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(k&&"string"!==typeof k){l=k;u.jumpTo(2);break}if(k){if(p=e.__commitDB){u.jumpTo(6);break}return u.yield(e._commitDB(),
7)}return u.yield(e.getLatestCommit(a,d,b),5);case 5:l=u.yieldResult;u.jumpTo(2);break;case 7:p=u.yieldResult;case 6:return q=p,u.yield(q.get(k),8);case 8:l=u.yieldResult;case 2:if(!l)throw Error("Cannot find commit to loadSnapshot for "+a+"/"+d+" (using "+k+")");return u.return(e.snapshotResourceFor(l).readJson())}})};Jg.prototype.revert=function(a,d,k,b){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(l=e.__versionDB){u.jumpTo(2);break}return u.yield(e._versionDB(),
3);case 3:l=u.yieldResult;case 2:return p=l,u.yield(p.get(a+"/"+d),4);case 4:return q=u.yieldResult,q.refs[k||"HEAD"]=b,delete q.deleted,u.yield(p.set(a+"/"+d,q),5);case 5:return u.return(q)}})};Jg.prototype._createCommit=function(a,d,k,b,e,l,p,q,u,w,y,A,C){q=void 0===q?"":q;u=void 0===u?[]:u;!A&&w&&w.preview&&(A=w.preview);return this._createCommitFromSpec({name:d,type:a,timestamp:p||Date.now(),author:{name:l.name,email:l.email,realm:l.realm},tags:b,description:k,preview:A,message:q,content:C||y&&
Id.sha1(y)||null,deleted:!C&&!w,metadata:e,ancestors:u},!0)};Jg.prototype._createCommitFromSpec=function(a,d){d=void 0===d?!1:d;if(!a.name)throw Error("commit needs name");if(!a.type)throw Error("commit needs type");if(!a.author)throw Error("commit needs author");if(!a.author.name)throw Error("commit needs author.name");a.timestamp||(a.timestamp=Date.now());a.tags||(a.tags=[]);!d&&a.content&&(d=Id.isHash(a.content),d||(a.content=Id.sha1(a.content)));d=Id.obj.dissoc(a,["preview"]);d=Id.sha1(JSON.stringify(d));
return Object.assign(a,{_id:d})};Jg.prototype._commitDB=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(a.__commitDB)return b.return(a.__commitDB);d=a.name+"-commits";if(k=Id.Database.findDB(d))return b.return(a.__commitDB=k);k=Id.Database.ensureDB(d);return b.yield(k.addDesignDocs(a._commitdb_indexes),2)}return b.return(a.__commitDB=k)})};Jg.prototype.close=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:if(!a.__commitDB){d.jumpTo(2);
break}return d.yield(a.__commitDB.close(),3);case 3:a.__commitDB=null;case 2:if(!a.__versionDB){d.jumpTo(0);break}return d.yield(a.__versionDB.close(),5);case 5:a.__versionDB=null,d.jumpToEnd()}})};Jg.prototype.versionGraph=function(a,d){var k=this,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:if(b=k.__versionDB){p.jumpTo(2);break}return p.yield(k._versionDB(),3);case 3:b=p.yieldResult;case 2:return e=b,p.yield(e.get(a+"/"+d),4);case 4:return l=
p.yieldResult,p.return(!l||l.deleted||l._deleted?null:l)}})};Jg.prototype._log=function(a,d,k,b){b=void 0===b?Infinity:b;var e=this,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(e.versionGraph(a,d),2);l=w.yieldResult;if(!l||l.deleted||l._deleted)return w.return([]);p=l.refs.HEAD;for(q=[];;){if(q.includes(p))throw Error("cyclic version graph???");q.push(p);u=$jscomp.makeIterator(l.history[p]||[]);p=u.next().value;if(!p||q.length>=b)break}return w.return(q)})};
Jg.prototype._findTimestampedVersionsOfObjectNamed=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q,u,w,y,A,C,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:b=d;e=void 0===b.include_docs?!0:b.include_docs;l=void 0===b.descending?!0:b.descending;p=void 0===b.startTime?"0".repeat(13):b.startTime;q=void 0===b.endTime?"9".repeat(13):b.endTime;u=a+"\x00"+(l?q:p);w=a+"\x00"+(l?p:q);if(y=k.__commitDB){L.jumpTo(2);break}return L.yield(k._commitDB(),3);case 3:y=
L.yieldResult;case 2:return A=y,L.yield(A.pouchdb.query("nameAndTimestamp_index",Object.assign({},d,{descending:l,include_docs:e,startkey:u,endkey:w})),4);case 4:return C=L.yieldResult,D=C.rows,L.return(e?D.map(function(I){return I.doc}):D.map(function(I){return I.id}))}})};Jg.prototype._versionDB=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(a.__versionDB)return b.return(a.__versionDB);d=a.name+"-version-graph";if(k=Id.Database.findDB(d))return b.return(a.__versionDB=
k);k=Id.Database.ensureDB(d);return b.yield(k.addDesignDocs(a._versiondb_indexes),2)}return b.return(a.__versionDB=k)})};Jg.prototype.exportToDir=function(a,d,k,b){k=void 0===k?!1:k;b=void 0===b?!1:b;var e=this,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la,db,ub,xa,na,Aa,Pa,Da,M,U,aa,pa,ma,La,ib,ca,qa,ra,Va,nb,wc,nc,ac,qd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(id){switch(id.nextAddress){case 1:"string"===typeof a&&(a=Id.resource(a));if(e.__commitDB){id.jumpTo(2);break}return id.yield(e._commitDB(),
3);case 3:case 2:if(l=e.__versionDB){id.jumpTo(4);break}return id.yield(e._versionDB(),5);case 5:l=id.yieldResult;case 4:p=l;q=[];if(!d)return id.yield(p.getAll(),13);u=$jscomp.makeIterator(d);w=u.next();case 8:if(w.done){id.jumpTo(7);break}A=y=w.value;C=A.name;D=A.type;L=a.join(D).join(C).asDirectory();return id.yield(e.versionGraph(D,C),11);case 11:return I=id.yieldResult,S=I.refs,V=I.history,ba=Object.keys(V),id.yield(e.getCommitsWithIds(ba),12);case 12:ua=id.yieldResult;q.push({refs:S,history:V,
currentExportDir:L,commits:ua,name:C,type:D});w=u.next();id.jumpTo(8);break;case 13:Fa=id.yieldResult,F=$jscomp.makeIterator(Fa),Y=F.next();case 14:if(Y.done){id.jumpTo(7);break}W=Q=Y.value;ka=W.refs;ea=W.history;la=W._id;if(la.startsWith("_")){id.jumpTo(15);break}return id.yield(e.getCommit(ka.HEAD||Object.keys(ea)[0]),17);case 17:return db=id.yieldResult,ub=db.type,xa=db.name,na=a.join(ub).join(xa).asDirectory(),Aa=Object.keys(ea),id.yield(e.getCommitsWithIds(Aa),18);case 18:Pa=id.yieldResult,q.push({refs:ka,
history:ea,currentExportDir:na,commits:Pa,name:xa,type:ub});case 15:Y=F.next();id.jumpTo(14);break;case 7:Da={},M=$jscomp.makeIterator(q),U=M.next();case 19:if(U.done){id.jumpTo(0);break}pa=aa=U.value;ma=pa.refs;La=pa.history;Da.$jscomp$loop$prop$currentExportDir$1307$2710=pa.currentExportDir;ib=pa.commits;ca=pa.name;qa=pa.type;b||(ib=ib.filter(function(xe){return!xe.deleted}));ra=k?ib.map(function(xe){return function(Ae){if(Ae.deleted||Ae._deleted||!Ae.content)return null;delete Ae._rev;Ae=e.snapshotResourceFor(Ae);
var hf=xe.$jscomp$loop$prop$currentExportDir$1307$2710.join(Ae.parent().name()+"/"+Ae.name());return{from:Ae,to:hf}}}(Da)).filter(Boolean):[];k||ib.forEach(function(xe){delete xe._rev});return id.yield(Da.$jscomp$loop$prop$currentExportDir$1307$2710.ensureExistance(),22);case 22:return id.yield(Da.$jscomp$loop$prop$currentExportDir$1307$2710.join("index.json").writeJson({name:ca,type:qa}),23);case 23:return id.yield(Da.$jscomp$loop$prop$currentExportDir$1307$2710.join("commits.json").writeJson(ib),
24);case 24:return id.yield(Da.$jscomp$loop$prop$currentExportDir$1307$2710.join("history.json").writeJson({refs:ma,history:La}),25);case 25:Va=$jscomp.makeIterator(ra),nb=Va.next();case 26:if(nb.done){Da={$jscomp$loop$prop$currentExportDir$1307$2710:Da.$jscomp$loop$prop$currentExportDir$1307$2710};U=M.next();id.jumpTo(19);break}nc=wc=nb.value;ac=nc.from;qd=nc.to;return id.yield(ac.copyTo(qd),27);case 27:nb=Va.next(),id.jumpTo(26)}})};Jg.prototype.exportToSpecs=function(a,d){d=void 0===d?!1:d;var k=
this,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ba){switch(ba.nextAddress){case 1:b=[];if(a){ba.jumpTo(2);break}a=[];return ba.yield(k.objectStats(),3);case 3:for(l in e=ba.yieldResult||{},e)for(p in e[l])a.push({type:l,name:p});case 2:q=$jscomp.makeIterator(a),u=q.next();case 4:if(u.done){ba.jumpTo(6);break}y=w=u.value;A=y.name;C=y.type;return ba.yield(k.versionGraph(C,A),7);case 7:return D=ba.yieldResult,L=D.refs,I=D.history,S=Object.keys(I),ba.yield(k.getCommitsWithIds(S),
8);case 8:V=ba.yieldResult;d||(V=V.filter(function(ua){return!ua.deleted}));V.forEach(function(ua){delete ua._rev});b.push({type:C,name:A,commits:V,history:{refs:L,history:I}});u=q.next();ba.jumpTo(4);break;case 6:return ba.return(b)}})};Jg.prototype.importFromDir=function(a,d,k){function b(D){var L,I,S,V,ba,ua,Fa,F,Y,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(W){switch(W.nextAddress){case 1:return L=$jscomp,I=L.makeIterator,W.yield(Promise.all([D.join("index.json").readJson(),
D.join("commits.json").readJson(),D.join("history.json").readJson()]),2);case 2:S=I.call(L,W.yieldResult);V=S.next().value;ba=V.type;ua=V.name;Fa=S.next().value;F=S.next().value;if(!k){Y=[];W.jumpTo(3);break}return W.yield(D.dirList(1,{exclude:function(ka){return!ka.isDirectory()}}),4);case 4:Y=W.yieldResult;case 3:return Q=Y,W.return({dir:D,type:ba,name:ua,commits:Fa,history:F,snapshotDirs:Q})}})}d=void 0===d?!1:d;k=void 0===k?!1:k;var e=this,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return D.yield(a.dirList(3,
{exclude:function(L){return!L.isDirectory()&&"index.json"!==L.name()}}),2);case 2:l=D.yieldResult,l=l.filter(function(L){return"index.json"===L.name()}),p=l.map(function(L){return L.parent()}),q=[],u=$jscomp.makeIterator(p),w=u.next();case 3:if(w.done){D.jumpTo(5);break}y=w.value;A=q;C=A.push;return D.yield(b(y),6);case 6:C.call(A,D.yieldResult);w=u.next();D.jumpTo(3);break;case 5:return D.return(e.importFromSpecs(q,d,k))}})};Jg.prototype.importFromSpecs=function(a,d,k){d=void 0===d?!1:d;k=void 0===
k?!1:k;var b=this,e,l,p,q,u,w,y,A,C,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:if(d){I.jumpTo(2);break}if(e=b.__versionDB){I.jumpTo(3);break}return I.yield(b._versionDB(),4);case 4:e=I.yieldResult;case 3:l=e,p=$jscomp.makeIterator(a),q=p.next();case 5:if(q.done){I.jumpTo(2);break}w=u=q.value;y=w.type;A=w.name;return I.yield(l.get(y+"/"+A),8);case 8:if(I.yieldResult)throw Error("Import failed: object "+y+"/"+A+" already exists and overwrite is not allowed");
q=p.next();I.jumpTo(5);break;case 2:C=$jscomp.makeIterator(a),D=C.next();case 9:if(D.done){I.jumpTo(11);break}L=D.value;return I.yield(b.importFromSpec(L,!0,k),10);case 10:D=C.next();I.jumpTo(9);break;case 11:return I.return(a)}})};Jg.prototype.importFromSpec=function(a,d,k){d=void 0===d?!1:d;k=void 0===k?!1:k;var b=this,e,l,p,q,u,w,y,A,C,D,L,I,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){switch(V.nextAddress){case 1:if(e=b.__versionDB){V.jumpTo(2);break}return V.yield(b._versionDB(),
3);case 3:e=V.yieldResult;case 2:l=e;if(p=b.__commitDB){V.jumpTo(4);break}return V.yield(b._commitDB(),5);case 5:p=V.yieldResult;case 4:q=p;u=b;w=u.snapshotLocation;y=a;A=y.type;C=y.name;D=y.commits;L=y.history;I=y.snapshotDirs;if(!(S=!d)){V.jumpTo(6);break}return V.yield(l.get(A+"/"+C),7);case 7:S=V.yieldResult;case 6:if(S)throw Error("Import failed: object "+A+"/"+C+" already exists and overwrite is not allowed");return V.yield(Promise.all([q.setDocuments(D),l.set(A+"/"+C,L)].concat($jscomp.arrayFromIterable(I&&
k?I.map(function(ba){return ba.copyTo(w.join(ba.name()).asDirectory())}):[]))),8);case 8:return V.return(a)}})};Jg.prototype.importFromResource=function(a,d,k,b,e){e=void 0===e?!1:e;var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return u.yield(k.readJson(),2);case 2:p=u.yieldResult;if(!(q=e)){u.jumpTo(3);break}return u.yield(l.has(a,d),4);case 4:q=u.yieldResult;case 3:if(!q){u.jumpTo(5);break}return u.yield(l.delete(a,d,!1),5);case 5:return u.return(l.commit(a,
d,p,b))}})};Jg.prototype.replicateTo=function(a,d,k,b){return(new Id.Synchronization(this,a,d,k,Object.assign({method:"replicateTo"},b))).start()};Jg.prototype.replicateFrom=function(a,d,k,b){return(new Id.Synchronization(this,a,d,k,Object.assign({method:"replicateFrom"},b))).start()};Jg.prototype.sync=function(a,d,k,b){return(new Id.Synchronization(this,a,d,k,Object.assign({method:"sync"},b))).start()};Jg.prototype.getConflicts=function(a,d){function k(w,y){var A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){return 1==
C.nextAddress?C.yield(w.getConflicts({include_docs:!0}),2):3!=C.nextAddress?(A=C.yieldResult,C.yield(Promise.all(A.map(function(D){var L,I,S,V,ba,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress){L=D;I=L.id;S=L.rev;V=L.conflicts;ba=L.doc;if(d&&d[y]&&!d[y][I])return Fa.return(null);if(!a)return Fa.jumpTo(2);ua=V.map(function(F){return{id:I,rev:F}});return Fa.yield(w.getDocuments(ua),3)}2!=Fa.nextAddress&&(V=Fa.yieldResult);a?Id.obj.dissoc(ba,["_conflicts"]):ba=
null;return Fa.return({id:I,rev:S,conflicts:V,kind:y,doc:ba})})})),3)):C.return(C.yieldResult.filter(Boolean))})}var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(e=b.__commitDB){w.jumpTo(2);break}return w.yield(b._commitDB(),3);case 3:e=w.yieldResult;case 2:l=e;if(p=b.__versionDB){w.jumpTo(4);break}return w.yield(b._versionDB(),5);case 5:p=w.yieldResult;case 4:return q=p,w.yield(k(q,"versions"),6);case 6:return u=w.yieldResult,w.yield(k(l,
"commits"),8);case 8:return w.yield(w.yieldResult,7);case 7:return w.return({versionConflicts:u,commitConflicts:w.yieldResult})}})};Jg.prototype.resolveConflict=function(a){var d=this,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:k=a;b=k.resolved;e=k.delete;l=k.kind;p=k.id;if("versions"===l){if(w=d.__versionDB){y.jumpTo(7);break}return y.yield(d._versionDB(),8)}if("commits"!==l)throw Error("Unknown conflict kind: "+l);if(u=d.__commitDB){y.jumpTo(5);
break}return y.yield(d._commitDB(),6);case 6:u=y.yieldResult;case 5:q=u;y.jumpTo(3);break;case 8:w=y.yieldResult;case 7:q=w;case 3:return y.yield(q.set(p,b),9);case 9:return y.yield(Promise.all(e.map(function(A){return q.pouchdb.remove(p,A)})),0)}})};Jg.prototype.getDiff=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la,db,ub,xa,na,Aa,Pa,Da,M,U,aa,pa,ma;return $jscomp.asyncExecutePromiseGeneratorProgram(function(La){switch(La.nextAddress){case 1:b=a;"string"===typeof a&&
(b=Id.Database.ensureDB(a+"-commits"),d=Id.Database.ensureDB(a+"-version-graph"));if(e=k.__commitDB){La.jumpTo(2);break}return La.yield(k._commitDB(),3);case 3:e=La.yieldResult;case 2:l=e;if(p=k.__versionDB){La.jumpTo(4);break}return La.yield(k._versionDB(),5);case 5:p=La.yieldResult;case 4:return q=p,La.yield(l.diffWith(b),6);case 6:return u=La.yieldResult,La.yield(q.diffWith(d),7);case 7:return w=La.yieldResult,La.yield(Promise.all(w.inLeft.map(function(ib){var ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){return 1==
qa.nextAddress?(ca=ib.id,qa.yield(q.get(ib.id),2)):qa.return({id:ca,doc:qa.yieldResult})})})),8);case 8:return y=La.yieldResult,A=Id.arr,C=A.groupBy,La.yield(d.getAll(),9);case 9:return D=C.call(A,La.yieldResult,function(ib){return ib._id}),La.yield(Promise.all(w.inRight.map(function(ib){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ca){return ca.return({id:ib.id,doc:D[ib.id]})})})),10);case 10:return L=La.yieldResult,La.yield(Promise.all(w.changed.map(function(ib){var ca,qa,ra,Va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){return 1==
nb.nextAddress?(ca=Object,qa=ca.assign,ra=ib.left,nb.yield(q.get(ib.left.id),2)):3!=nb.nextAddress?(Va=nb.yieldResult,nb.yield(d.get(ib.right.id),3)):nb.return(qa.call(ca,{},ra,{docA:Va,docB:nb.yieldResult}))})})),11);case 11:return I=La.yieldResult,S=Id.arr,V=S.groupBy,La.yield(b.getAll(),12);case 12:ba=V.call(S,La.yieldResult,function(ib){return ib._id}),ua=[],Fa=[],F=[],Y=$jscomp.makeIterator(u.inLeft),Q=Y.next();case 13:if(Q.done){La.jumpTo(15);break}W=Q.value;ka=ua;ea=ka.push;return La.yield(l.get(W.id),
16);case 16:ea.call(ka,La.yieldResult);Q=Y.next();La.jumpTo(13);break;case 15:la=$jscomp.makeIterator(u.inRight),Q=la.next();case 17:if(Q.done){La.jumpTo(19);break}db=Q.value;ub=Fa;xa=ub.push;return La.yield(ba[db.id],20);case 20:xa.call(ub,La.yieldResult);Q=la.next();La.jumpTo(17);break;case 19:na=$jscomp.makeIterator(u.changed),Q=na.next();case 21:if(Q.done){La.jumpTo(23);break}Aa=Q.value;Pa=F;Da=Pa.push;return La.yield(l.get(Aa.left.id),24);case 24:return Da.call(Pa,La.yieldResult),M=F,U=M.push,
La.yield(b.get(Aa.right.id),25);case 25:U.call(M,La.yieldResult);Q=na.next();La.jumpTo(21);break;case 23:return aa=ua.map(function(ib){return Id.obj.select(ib,["_id","name","type"])}),pa=Fa.map(function(ib){return Id.obj.select(ib,["_id","name","type"])}),ma=F.map(function(ib){return Id.obj.select(ib,["_id","name","type"])}),La.return({changed:I,remote:L,local:y,changedCommitTypeAndNames:ma,remoteCommitTypeAndNames:pa,localCommitTypeAndNames:aa})}})};Jg.prototype.delete=function(a,d,k){k=void 0===
k?!0:k;var b=this,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:e=[];l=[];if(p=b.__commitDB){Y.jumpTo(2);break}return Y.yield(b._commitDB(),3);case 3:p=Y.yieldResult;case 2:return q=p,u={include_docs:!0,startkey:a+"\x00"+d+"\x00",endkey:a+"\x00"+d+"\uffff"},Y.yield(q.query("nameAndTimestamp_index",u),4);case 4:w=Y.yieldResult;y=w.rows;A=$jscomp.makeIterator(y);for(C=A.next();!C.done;C=A.next())L=D=C.value,I=L.doc,
I.deleted||I._deleted||!I.content||e.push(b.snapshotResourceFor(I)),l.push(Object.assign({},I,{_deleted:!0}));if(S=b.__versionDB){Y.jumpTo(5);break}return Y.yield(b._versionDB(),6);case 6:S=Y.yieldResult;case 5:return V=S,Y.yield(V.get(a+"/"+d),7);case 7:ba=Y.yieldResult;ua=ba._id;Fa=ba._rev;F={_id:ua,_rev:Fa,_deleted:!0};if(k){Y.jumpTo(8);break}return Y.yield(q.setDocuments(l),9);case 9:return Y.yield(V.setDocuments([F]),10);case 10:Promise.all(e.map(function(Q){return Q.remove()}));case 8:return Y.return({commits:l,
history:F,resources:e})}})};Jg.prototype.deleteCommit=function(a,d,k){d=void 0===d?!0:d;k=void 0===k?"HEAD":k;var b=this,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:if(a&&"string"!==typeof a){e=a;ua.jumpTo(2);break}if(!a){ua.jumpTo(2);break}if(l=b.__commitDB){ua.jumpTo(4);break}return ua.yield(b._commitDB(),5);case 5:l=ua.yieldResult;case 4:return p=l,ua.yield(p.get(a),6);case 6:e=ua.yieldResult;case 2:if(!e)throw Error("commit needed!");
if(q=b.__versionDB){ua.jumpTo(7);break}return ua.yield(b._versionDB(),8);case 8:q=ua.yieldResult;case 7:u=q;if(w=b.__commitDB){ua.jumpTo(9);break}return ua.yield(b._commitDB(),10);case 10:w=ua.yieldResult;case 9:return y=w,A=e,C=A.name,D=A.type,L=e.deleted||e._deleted||!e.content?[]:[b.snapshotResourceFor(e)],I=[Object.assign({},e,{_deleted:!0})],ua.yield(u.get(D+"/"+C),11);case 11:S=ua.yieldResult;if(!S)throw Error("No history for "+D+"/"+C+"@"+e._id);if(!S.refs[k])throw Error("Cannot delete commit "+
D+"/"+C+"@"+e._id+" b/c it is not where ref "+k+" is pointing!");V=$jscomp.makeIterator(S.history[e._id]||[]);ba=V.next().value;if(!ba&&1>=Object.keys(S.history).length)S._deleted=!0;else if(ba)delete S.history[e._id],S.refs[k]=ba;else throw Error("Cannot delete commit "+D+"/"+C+"@"+e._id+" b/c it has no ancestor but there are still other commits!");if(d){ua.jumpTo(12);break}return ua.yield(u.set(D+"/"+C,S),13);case 13:return ua.yield(y.setDocuments(I),14);case 14:return ua.yield(Promise.all(L.map(function(Fa){return Fa.remove()})),
12);case 12:return ua.return({commits:I,history:S,resources:L})}})};$jscomp.global.Object.defineProperties(Jg.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Id.ObjectDB=Jg;var Qq=function(a,
d,k,b,e){e=void 0===e?{}:e;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},e);this.state="not started";this.method="";this.fromObjectDB=a;this.remoteCommitDB=d;this.remoteVersionDB=k;this.remoteLocation=b;this.deferred=Id.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};Qq.prototype.whenPaused=function(){var a=this;return Promise.resolve().then(function(){return Id.promise.waitFor(function(){return a.isPaused||a.isComplete})}).then(function(){return a})};
Qq.prototype.waitForIt=function(){return this.deferred.promise};Qq.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(a){return console.error("Error starting synchronization: ",a)});return this};Qq.prototype._startReplicationAndCopy=function(){function a(U){return"paused"===M&&"paused"===Da&&0>=Pa.copyCalls&&0>=Pa.copyCallsWaiting?U.state="paused":"complete"===M&&"complete"===Da&&Pa.isComplete()?U.state="complete":U.state="running"}function d(U,aa){if(aa.length||
"complete"===Da&&"complete"===M&&Pa.isComplete()){W.cancel();if(aa.length){U.state="complete";U.errors=aa;na.cancel();Aa.cancel();var pa=Error("Synchronization error:\n  "+aa.join("\n  "));pa.errors=aa;console.log(U+" errored")}else console.log(U+" completed");pa?U.deferred.reject(pa):U.deferred.resolve(U)}}function k(U){if(!U.content)return null;var aa=U.content.slice(0,2);U=U.content.slice(2);return aa+"/"+U+".json"}var b=this,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la,db,ub,xa,na,Aa,
Pa,Da,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(U){switch(U.nextAddress){case 1:e=b;l=e.fromObjectDB;p=e.remoteCommitDB;q=e.remoteVersionDB;u=e.remoteLocation;w=e.options;y=w.debug;A=void 0===w.live?!1:w.live;C=void 0===w.retry?!1:w.retry;D=w.method;L=w.replicationFilter;I=void 0===w.pushDesignDocToRemote?!1:w.pushDesignDocToRemote;if(S=l.__versionDB){U.jumpTo(2);break}return U.yield(l._versionDB(),3);case 3:S=U.yieldResult;case 2:V=S;if(ba=l.__commitDB){U.jumpTo(4);break}return U.yield(l._commitDB(),
5);case 5:ba=U.yieldResult;case 4:ua=ba;Fa=l;F=Fa._commitdb_indexes;Y=Fa._versiondb_indexes;Q=Fa.snapshotLocation;b.method=D;ea=F.find(function(aa){return"nameTypeFilter"===aa.name});la=Y.find(function(aa){return"nameTypeFilter"===aa.name});if(!I){U.jumpTo(6);break}console.log("adding commitNameTypeFilter");return U.yield(p.addDesignDoc(ea),7);case 7:return console.log("adding versionNameTypeFilter"),U.yield(q.addDesignDoc(la),6);case 6:return db={live:A,retry:C},ub=Object.assign({},db),xa=Object.assign({},
db),L&&(ub.filter=eval("("+ea.filterFn+")"),ub.query_params=L,xa.filter=eval("("+la.filterFn+")"),xa.query_params=L),na=ua[D](p,ub),Aa=V[D](q,xa),Pa={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},M=Da="not started",b.versionReplication=Aa,b.commitReplication=na,b.snapshotReplication=Pa,ka=p.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),W=q.pouchdb.changes({include_docs:!0,live:!0,
conflicts:!0}),ka.on("change",function(aa){var pa=aa.id,ma=aa.changes;aa=aa.doc._conflicts;y&&console.log("commit changes "+pa+":",ma,aa);aa&&(console.log("commit conflict "+pa+":",ma,aa),b.conflicts.push({db:"commits",id:pa,changes:ma,conflicts:aa}))}),W.on("change",function(aa){var pa=aa.id,ma=aa.changes;aa=aa.doc._conflicts;y&&console.log("version changes "+pa+":",ma,aa);aa&&(console.log("version conflict "+pa+":",ma,aa),b.conflicts.push({db:"versions",id:pa,changes:ma,conflicts:aa}))}),na.on("change",
function(aa){var pa,ma,La,ib,ca,qa,ra,Va,nb,wc,nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ac){switch(ac.nextAddress){case 1:"replicateTo"===D?aa={direction:"push",change:aa}:"replicateFrom"===D&&(aa={direction:"pull",change:aa});pa=aa;ma=pa.direction;La=pa.change;ib=La.docs;console.log(b+" "+("push"===ma?"send":"received")+" "+ib.length+" commits");ac.setCatchFinallyBlocks(2,3);qa=[];ra=$jscomp.makeIterator(ib);for(Va=ra.next();!Va.done;Va=ra.next())nb=Va.value,nb._id.startsWith("_")||
(b.changes.push({direction:ma,kind:"commits",id:nb._id,type:nb.type,name:nb.name}),(wc=k(nb))&&qa.push(wc));Pa.nFilesToCopy+=qa.length;if(!(0<Pa.copyCalls)){ac.jumpTo(5);break}Pa.copyCallsWaiting++;return ac.yield(Id.promise.waitFor(function(){return 0>=Pa.copyCalls}),6);case 6:Pa.copyCallsWaiting--;case 5:return Pa.copyCalls++,a(b),console.log(b+" copying "+qa.length+" snapshots..."),ac.yield(Id.promise.parallel(qa.map(function(qd){return function(){var id=("push"===ma?Q:u).join(qd),xe=("push"===
ma?u:Q).join(qd);return Pa.stopped?(console.warn(b+" Stopping copying resources b/c synchronization ended ("+Pa.copyCalls+", "+id.url+" => "+xe.url+")"),Promise.resolve()):xe.exists().then(function(Ae){function hf(fg){fg=void 0===fg?0:fg;return id.copyTo(xe).catch(function(Mg){if(5<=fg)throw Mg;return hf(fg+1)})}return Ae?(y&&console.log("Skip copying to "+xe.url+", already exist"),Promise.resolve()):id.exists().then(function(fg){if(!fg)return console.warn("Skip copying "+id.url+", does not exist"),
Promise.resolve();y&&console.log(b+" Copying "+id.url+" => "+xe.url);return hf(0).then(function(Mg){Pa.nFilesCopied++;Pa.stopped||0!==Pa.nFilesCopied%10||console.log(b+" copied "+Pa.nFilesCopied+" of "+Pa.nFilesToCopy+" snapshots");return Mg})})})}}),5),7);case 7:console.log(b+" sending files done");case 3:ac.enterFinallyBlock();Pa.copyCalls--;a(b);d(b,ca?[ca]:[]);ac.leaveFinallyBlock(0);break;case 2:throw nc=ac.enterCatchBlock(),console.error("error in commitReplication onChange",nc),ca=nc,nc;}})}).on("paused",
function(){Da="paused";a(b);y&&console.log(b+" commit replication paused")}).on("active",function(){Da="active";a(b);y&&console.log(b+" commit replication active")}).on("error",function(aa){Da="complete";a(b);console.error(b+" commit replication error",aa);d(b,[aa])}).on("complete",function(aa){Da="complete";a(b);aa="sync"===D?aa.push.errors.concat(aa.pull.errors):aa.errors;d(b,aa)}),Aa.on("change",function(aa){"replicateTo"===D?aa={direction:"push",change:aa}:"replicateFrom"===D&&(aa={direction:"pull",
change:aa});var pa=aa.direction;aa=aa.change.docs;y&&console.log(b+" "+("push"===pa?"send":"received")+" "+aa.length+" histories");aa.forEach(function(ma){ma._id.startsWith("_")||b.changes.push({direction:pa,kind:"versions",id:ma._id})})}).on("paused",function(){M="paused";a(b);y&&console.log(b+" version replication paused")}).on("active",function(aa){M="active";a(b);y&&console.log(b+" version replication active",aa)}).on("error",function(aa){M="complete";a(b);console.error(b+" version replication error",
aa);d(b,[aa])}).on("complete",function(aa){M="complete";a(b);aa="sync"===D?aa.push.errors.concat(aa.pull.errors):aa.errors;d(b,aa)}),b.state="running",U.return(b)}})};Qq.prototype.safeStop=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?"not started"!==a.state&&a.isSynchonizing?d.yield(a.whenPaused(),2):d.return(a):d.return(a.stop())})};Qq.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;this.commitReplication.cancel();
this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};Qq.prototype.toString=function(){var a=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===a?"<=>":"replicateTo"===a?"=>":"replicateFrom"===a?"<=":"??")+")"};$jscomp.global.Object.defineProperties(Qq.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,get:function(){return"complete"===
this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var a={push:{},pull:{}};this.changes.forEach(function(d){var k=d.direction,b=d.id,e=d.kind;if("_"!==b[0]){if("versions"===e)var l=a[k][b]||(a[k][b]=[]);else"commits"===e&&(b=d.type+"/"+d.name,l=a[k][b]||(a[k][b]=[]));l.push(d)}});return a}}});Id.Synchronization=
Qq;var Yu={describe:function(a){function d(q,u){q=q.find(function(C){return C.name===u}).node.value.body;var w=q.body||[],y=(q.comments||[]).find(function(C){return C.end<w[0].start});q={name:u,parameters:[],sideEffect:!1,returns:null,description:""};if(y&&y.text.trim()){y=Id.string.changeIndent(y.text," ",0).split("\n");y=$jscomp.makeIterator(y);for(var A=y.next();!A.done;A=y.next()){A=A.value;if(A.startsWith("ignore-in-doc")){q.description="";break}A.startsWith("side effect:")?q.sideEffect=JSON.parse(A.split(":")[1]):
A.startsWith("returns:")?q.returns=A.split(":")[1].trim():q.description+=A+"\n"}}y=$jscomp.makeIterator(w);for(A=y.next();!A.done;A=y.next())if(A=A.value,"checkArgs"===Id.Path("declarations.0.init.callee.name").get(A)&&(A=Id.Path("declarations.0.id.properties").get(A)))q.parameters=A.map(function(C){return C.key.name});return q}var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:q.setCatchFinallyBlocks(2);if(k._methodSpecs){q.jumpTo(4);break}return q.yield(lively.modules.module("lively.storage/objectdb.js").source(),
5);case 5:b=q.yieldResult,e=Id.parse(b,{withComments:!0}),l=Id.categorizer.findDecls(e),k._methodSpecs=l.filter(function(u){return u.parent&&"ObjectDBInterface"===u.parent.name});case 4:return q.return(a?d(k._methodSpecs,a):k._methodSpecs.map(function(u){return d(k._methodSpecs,u.name)}).filter(Boolean));case 2:return p=q.enterCatchBlock(),q.return("Error in describe "+p)}})},ensureDB:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=
Id.checkArgs(a,{db:"string",snapshotLocation:"string|Resource"}),k=d.db,b=d.snapshotLocation,l.yield(Id.ObjectDB.find(k),2);if(e=l.yieldResult)return l.return(!1);Id.ObjectDB.named(k,{snapshotLocation:b});return l.return(!0)})},destroyDB:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=Id.checkArgs(a,{db:"string"}),k=d.db,e.yield(Id.ObjectDB.find(k),2)):3!=e.nextAddress?(b=e.yieldResult)?e.yield(b.destroy(),3):e.return(!1):e.return(!0)})},
fetchCommits:function(a){var d,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la,db,ub,xa,na,Aa,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Da){switch(Da.nextAddress){case 1:return d=Id.checkArgs(a,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),k=d.db,b=d.ref,e=d.type,l=d.typesAndNames,p=d.knownCommitIds,q=d.includeDeleted,u=d.filterFn,
Da.yield(Id.ObjectDB.find(k),2);case 2:w=Da.yieldResult;b||(b="HEAD");if(!w)throw Error("db "+k+" does not exist");if(w.__commitDB){Da.jumpTo(3);break}return Da.yield(w._commitDB(),4);case 4:case 3:if(y=w.__versionDB){Da.jumpTo(5);break}return Da.yield(w._versionDB(),6);case 6:y=Da.yieldResult;case 5:A=y;C={};D={};if(l)for(L=C.keys=[],I=$jscomp.makeIterator(l),S=I.next();!S.done;S=I.next())ba=V=S.value,ua=ba.type,Fa=ba.name,F=ba.ref,L.push(ua+"/"+Fa),F&&(D[ua+"/"+Fa]=F);else e&&(C.startkey=e+'/\x00"',
C.endkey=e+'/\uffff"');return Da.yield(A.getAll(C),7);case 7:Y=Da.yieldResult;Q=[];W=$jscomp.makeIterator(Y);for(ka=W.next();!ka.done;ka=W.next())!(ea=ka.value)||ea.deleted||ea._deleted||(la=ea,db=la._id,ub=la.refs,db.startsWith("_")||(xa=ub[D[db]||b]||b,!xa||p&&p.hasOwnProperty(xa)||Q.push(xa)));return Da.yield(w.getCommitsWithIds(Q),8);case 8:na=Da.yieldResult;q||(na=na.filter(function(M){return M&&!M.deleted}));if(u)try{Aa=eval("("+u+")");if("function"!==typeof Aa)throw Error(u+" does not eval to a function!");
Pa=na.filter(Aa);if(Array.isArray(Pa))na=Pa;else throw Error(u+" does not return an array!");}catch(M){console.error("fetchCommits filterFn failed:",M)}return Da.return(na)}})},fetchVersionGraph:function(a){var d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return d=Id.checkArgs(a,{db:"string",type:"string",name:"string"}),k=d.db,b=d.type,e=d.name,w.yield(Id.ObjectDB.find(k),2);if(3!=w.nextAddress){l=w.yieldResult;if(!l)throw Error("db "+k+" does not exist");
return w.yield(l.versionGraph(b,e),3)}p=w.yieldResult;q=p.refs;u=p.history;return w.return({refs:q,history:u})})},exists:function(a){var d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return d=Id.checkArgs(a,{db:"string",type:"string",name:"string",ref:"string|undefined"}),k=d.db,b=d.type,e=d.name,l=d.ref,w.yield(Id.ObjectDB.find(k),2);if(3!=w.nextAddress)return p=w.yieldResult,w.yield(p.versionGraph(b,e),3);q=w.yieldResult;if(!q)return w.return({exists:!1,
commitId:void 0});l=l||"HEAD";return(u=q.refs[l])?w.return({exists:!0,commitId:u}):w.return({exists:!1,commitId:void 0})})},fetchLog:function(a){var d,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){switch(Q.nextAddress){case 1:return d=Id.checkArgs(a,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},
function(W){return W.type&&W.name||W.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.commit,q=d.limit,u=d.includeCommits,w=d.knownCommitIds,Q.yield(Id.ObjectDB.find(k),2);case 2:y=Q.yieldResult;A=l||"HEAD";if(!y)throw Error("db "+k+" does not exist");q||(q=Infinity);p||l||(l=A);if(!p){Q.jumpTo(3);break}C=p;if(b&&e){Q.jumpTo(3);break}return Q.yield(y.getCommit(p),5);case 5:D=Q.yieldResult;if(!D)throw Error("fetchLog: specified commit "+p+" but no commit with this id is in the database!");
L=D;b=L.type;e=L.name;case 3:return Q.yield(y.versionGraph(b,e),6);case 6:I=Q.yieldResult;if(!I)throw Error("Unknown object "+b+"/"+e);S=I;V=S.refs;ba=S.history;C||(C=V[l]);ua=C;for(Fa=[];Fa.length<q&&!Fa.includes(ua);){Fa.push(ua);F=ba[ua];if(!F||!F.length)break;Y=$jscomp.makeIterator(F);ua=Y.next().value}if(!u){Q.jumpTo(7);break}w&&(Fa=Fa.filter(function(W){return!w.hasOwnProperty(W)}));return Q.yield(y.getCommitsWithIds(Fa),8);case 8:Fa=Q.yieldResult;case 7:return Q.return(Fa)}})},fetchSnapshot:function(a){var d,
k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return d=Id.checkArgs(a,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(A){return A.type&&A.name||A.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.commit,y.yield(Id.ObjectDB.find(k),2);case 2:q=y.yieldResult;l=l||"HEAD";if(!q)throw Error("db "+k+" does not exist");if(p){y.jumpTo(3);
break}return y.yield(q.versionGraph(b,e),4);case 4:u=y.yieldResult;if(!u)throw Error("Unknown object "+b+"/"+e);p=u.refs[l];if(!p)throw Error("Cannot find commit for ref "+l+" of "+b+"/"+e);case 3:return y.yield(q.getCommit(p),5);case 5:w=y.yieldResult;if(!w)throw Error("Cannot find commit "+p);return y.return(q.loadSnapshot(void 0,void 0,w))}})},revert:function(a){var d,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=Id.checkArgs(a,{db:"string",
type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.toCommitId,u.yield(Id.ObjectDB.find(k),2);q=u.yieldResult;l||(l="HEAD");return u.return(q.revert(b,e,l,p))})},commit:function(a){var d,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return d=Id.checkArgs(a,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",
expectedParentCommit:"string|undefined"}),k=d.db,b=d.type,e=d.name,l=d.ref,p=d.expectedParentCommit,q=d.commitSpec,u=d.snapshot,w=d.preview,A.yield(Id.ObjectDB.find(k),2);y=A.yieldResult;l||(l="HEAD");return A.return(y.commit(b,e,u,q,w,l,p))})},exportToSpecs:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=Id.checkArgs(a,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),k=d.db,b=d.nameAndTypes,l.yield(Id.ObjectDB.find(k),
2);e=l.yieldResult;if(!e)throw Error("db "+k+" does not exist");return l.return(e.exportToSpecs(b))})},exportToDir:function(a){var d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return d=Id.checkArgs(a,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",includeDeleted:"boolean|undefined"}),k=d.db,b=d.url,e=d.nameAndTypes,l=d.copyResources,p=d.includeDeleted,w.yield(Id.ObjectDB.find(k),2);q=w.yieldResult;if(!q)throw Error("db "+
k+" does not exist");try{u=Id.resource(b)}catch(y){u=Id.resource(System.baseURL).join(b)}return w.return(q.exportToDir(u,e,l,p))})},importFromDir:function(a){var d,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=Id.checkArgs(a,{db:"string",url:"string",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),k=d.db,b=d.url,e=d.overwrite,l=d.copyResources,u.yield(Id.ObjectDB.find(k),2);p=u.yieldResult;if(!p)throw Error("db "+k+" does not exist");
try{q=Id.resource(b)}catch(w){q=Id.resource(System.baseURL).join(b)}return u.return(p.importFromDir(q,e,l))})},importFromSpecs:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=Id.checkArgs(a,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),k=d.db,b=d.specs,e=d.overwrite,l=d.copyResources,q.yield(Id.ObjectDB.find(k),2);p=q.yieldResult;if(!p)throw Error("db "+k+" does not exist");return q.return(p.importFromSpecs(b,
e,l))})},importFromResource:function(a){var d,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return d=Id.checkArgs(a,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),k=d.db,b=d.type,e=d.name,l=d.url,p=d.commitSpec,q=d.purgeHistory,y.yield(Id.ObjectDB.find(k),2);u=y.yieldResult;if(!u)throw Error("db "+k+" does not exist");try{w=Id.resource(l)}catch(A){w=Id.resource(System.baseURL).join(l)}return y.return(u.importFromResource(b,
e,w,p,q))})},delete:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=Id.checkArgs(a,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),k=d.db,b=d.type,e=d.name,l=d.dryRun,q.yield(Id.ObjectDB.find(k),2);p=q.yieldResult;return q.return(p.delete(b,e,"undefined"===typeof l||l))})},deleteCommit:function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return d=Id.checkArgs(a,
{db:"string",commit:"string",dryRun:"boolean|undefined"}),k=d.db,b=d.commit,e=d.dryRun,p.yield(Id.ObjectDB.find(k),2);l=p.yieldResult;return p.return(l.deleteCommit(b,"undefined"===typeof e||e))})},fetchConflicts:function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return d=Id.checkArgs(a,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),k=d.db,b=d.includeDocs,e=d.only,p.yield(Id.ObjectDB.find(k),2);l=p.yieldResult;return p.return(l.getConflicts(b,
e))})},resolveConflict:function(a){var d,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return d=Id.checkArgs(a,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),k=d.db,b=d.resolved,e=d.delete,l=d.kind,p=d.id,u.yield(Id.ObjectDB.find(k),2);q=u.yieldResult;return u.return(q.resolveConflict({resolved:b,delete:e,kind:l,id:p}))})},fetchDiff:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return d=Id.checkArgs(a,{db:"string",otherDB:"string"}),k=d.db,b=d.otherDB,l.yield(Id.ObjectDB.find(k),2);e=l.yieldResult;return l.return(e.getDiff(b))})},synchronize:function(a){var d,k,b,e,l,p,q,u,w,y,A,C,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:return d=Id.checkArgs(a,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),k=d.db,b=d.otherDB,e=d.otherDBSnapshotLocation,
l=d.onlyTypesAndNames,p=d.method,L.yield(Id.ObjectDB.find(k),2);case 2:return e||(e=b.replace(/\/$/,"")+"/snapshots"),p||(p="replicateTo"),L.yield(Id.ObjectDB.find(k),3);case 3:return q=L.yieldResult,L.yield(Id.ObjectDB.named(b,{snapshotLocation:e}),4);case 4:return u=L.yieldResult,L.yield(u._commitDB(),5);case 5:return w=L.yieldResult,L.yield(u._versionDB(),6);case 6:return y=L.yieldResult,A=u.snapshotLocation,C={replicationFilter:l?{onlyTypesAndNames:l}:void 0,retry:!0,live:!0},D=q[p](w,y,A,C),
L.yield(D.whenPaused(),7);case 7:return L.yield(D.safeStop(),8);case 8:return L.yield(D.waitForIt(),9);case 9:return L.return(Id.obj.select(D,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Id.ObjectDBInterface=Yu;Id.ObjectDBInterface=Yu;Id.ObjectDBInterface=Yu;var vi=function(a){this.serverURL=a=void 0===a?document.location.origin+"/objectdb/":a};vi.prototype._processResponse=function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=
a.headers.get("content-type"),e.yield(a.text(),2);k=e.yieldResult;if("application/json"===d)try{b=JSON.parse(k)}catch(l){}if(!a.ok||b&&b.error)throw Error(b&&b.error||k||a.statusText);return e.return(b||k)})};vi.prototype._GET=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(b=Object.keys(d).map(function(u){var w=d[u];"object"===typeof w&&(w=JSON.stringify(w));return u+"="+encodeURIComponent(w)}).join("&"),e=
k.serverURL+a+"?"+b,l=k,p=l._processResponse,q.yield(fetch(e),2)):q.return(p.call(l,q.yieldResult))})};vi.prototype._POST=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(b=k.serverURL+a,e=k,l=e._processResponse,p.yield(fetch(b,{method:"POST",body:JSON.stringify(d),headers:{"content-type":"application/json"}}),2)):p.return(l.call(e,p.yieldResult))})};vi.prototype.describe=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("describe",
a))})};vi.prototype.ensureDB=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("ensureDB",a))})};vi.prototype.destroyDB=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("destroyDB",a))})};vi.prototype.fetchCommits=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchCommits",a))})};vi.prototype.fetchVersionGraph=function(a){var d=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchVersionGraph",a))})};vi.prototype.exists=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("exists",a))})};vi.prototype.fetchLog=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchLog",a))})};vi.prototype.fetchSnapshot=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchSnapshot",
a))})};vi.prototype.revert=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("revert",a))})};vi.prototype.commit=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("commit",a))})};vi.prototype.exportToSpecs=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("exportToSpecs",a))})};vi.prototype.exportToDir=function(a){var d=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("exportToDir",a))})};vi.prototype.importFromDir=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromDir",a))})};vi.prototype.importFromSpecs=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromSpecs",a))})};vi.prototype.importFromResource=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("importFromResource",
a))})};vi.prototype.delete=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("delete",a))})};vi.prototype.deleteCommit=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("deleteCommit",a))})};vi.prototype.fetchConflicts=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchConflicts",a))})};vi.prototype.resolveConflict=
function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("resolveConflict",a))})};vi.prototype.fetchDiff=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._GET("fetchDiff",a))})};vi.prototype.synchronize=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d._POST("synchronize",a))})};Id.ObjectDBHTTPInterface=vi;Id.default=Jg;var wi=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");
wi.applyExclude=function(a,d){return d?"string"===typeof d?!a.url.includes(d):"function"===typeof d?!d(a):d instanceof RegExp?!d.test(a.url):!0:!0};wi.Resource=Ef;wi.Database=ig;wi.debug=!1;wi.slashRe=/\//g;var mR=function(){return wi.Database.apply(this,arguments)||this};$jscomp.inherits(mR,wi.Database);mR.ensureDB=function(a,d){return wi.Database.ensureDB.call(this,"lively.storage-"+a,d)};wi.StorageDatabase=mR;var Qm=function(){return wi.Resource.apply(this,arguments)||this};$jscomp.inherits(Qm,
wi.Resource);Qm.prototype.read=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return wi.debug&&console.log("["+a+"] read"),b.yield(a.db.get(a.pathWithoutQuery()),2);k=(d=b.yieldResult)&&d.content;return b.return(k?"string"===typeof k?k:JSON.stringify(k):"")})};Qm.prototype.readJson=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(a.read(),2);d=k.yieldResult;return k.return("string"===
typeof d?JSON.parse(d):d)})};Qm.prototype.write=function(a){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){wi.debug&&console.log("["+d+"] write");a||(a="");if(d.isDirectory())throw Error("Cannot write into a directory! ("+d.url+")");return k.yield(d.db.update(d.pathWithoutQuery(),function(b){if(b&&b.isDirectory)throw Error(d.url+" already exists and is a directory (cannot write into it!)");var e=Date.now();return b?Object.assign({},b,{lastModified:e,
size:a.length,content:a}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:e,created:e,size:"string"===typeof a?a.length:0,content:a}}),2)}return k.return(d)})};Qm.prototype.writeJson=function(a){return this.write(a)};Qm.prototype.mkdir=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){wi.debug&&console.log("["+a+"] mkdir");if(!a.isDirectory())throw Error("Cannot mkdir a file! ("+a.url+")");return b.yield(a.db.get(a.pathWithoutQuery()),
2)}if(3!=b.nextAddress){if(d=b.yieldResult){if(!d.isDirectory)throw Error(a.url+" already exists and is a file (cannot mkdir it!)");return b.return(a)}k=Date.now();return b.yield(a.db.set(a.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:k,created:k,isDirectory:!0}),3)}return b.return(a)})};Qm.prototype.exists=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return wi.debug&&
console.log("["+a+"] exists"),(d=a.isRoot())?k.jumpTo(2):k.yield(a.db.get(a.pathWithoutQuery()),3);2!=k.nextAddress&&(d=!!k.yieldResult);return k.return(d)})};Qm.prototype.remove=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(wi.debug&&console.log("["+a+"] remove"),d=a.pathWithoutQuery(),k=a.db,e.yield(k.docList({startkey:d,endkey:d+"\uffff"}),2)):3!=e.nextAddress?(b=e.yieldResult,e.yield(k.setDocuments(b.map(function(l){return{_id:l.id,
_rev:l.rev,_deleted:!0}})),3)):e.return(a)})};Qm.prototype.readProperties=function(){wi.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};Qm.prototype.dirList=function(a,d){a=void 0===a?1:a;d=void 0===d?{}:d;var k=this,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ba){if(1==ba.nextAddress){wi.debug&&console.log("["+k+"] dirList");if(!k.isDirectory())return ba.return(k.asDirectory().dirList(a,d));b=d;e=b.exclude;
l=k.pathWithoutQuery();p=[];return ba.yield(k.db.getAll({startkey:l,endkey:l+"\uffff"}),2)}q=ba.yieldResult;"infinity"===a&&(a=Infinity);u={};for(w=0;w<q.length;u={$jscomp$loop$prop$dirToChild$2712:u.$jscomp$loop$prop$dirToChild$2712},w++)if(A=y=q[w],C=A._id,C.startsWith(l)&&l!==C)if(D=C.slice(l.length),L=D.includes("/")?D.match(wi.slashRe).length+1:1,L>a)u.$jscomp$loop$prop$dirToChild$2712=k.join(D.split("/").slice(0,a).join("/")+"/"),p.some(function(ua){return function(Fa){return Fa.equals(ua.$jscomp$loop$prop$dirToChild$2712)}}(u))||
p.push(u.$jscomp$loop$prop$dirToChild$2712);else if(I=k.join(D),!e||wi.applyExclude(I,e))for(p.push(I),S="created lastModified mode group user contentType type etag size".split(" "),V=0;V<S.length;V++)I[S[V]]=y[S[V]];return ba.return(p)})};$jscomp.global.Object.defineProperties(Qm.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=wi.StorageDatabase.ensureDB(this.host()))}}});wi.LivelyStorageResource=
Qm;var nR={name:"lively.storage",matches:function(a){return a.startsWith("lively.storage:")},resourceClass:wi.LivelyStorageResource};wi.resourceExtension=nR;wi.resourceExtension=nR;wi.resourceExtension=nR;wi.registerExtension=Fd;wi.registerExtension(wi.resourceExtension);wi.default=Qm;var Fo=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Fo.default=ig;Fo.Database=ig;Fo.ObjectDB=Jg;Fo.ObjectDBInterface=Yu;Fo.ObjectDBHTTPInterface=vi;Fo.ObjectDB=Jg;Fo.ObjectDB=Jg;Fo.ObjectDBInterface=
Yu;Fo.ObjectDBInterface=Yu;Fo.ObjectDBHTTPInterface=vi;Fo.ObjectDBHTTPInterface=vi;var Yma=Object.freeze({__proto__:null,Database:ig,ObjectDB:Jg,ObjectDBInterface:Yu,ObjectDBHTTPInterface:vi}),Wf=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");Wf.convertToSerializableCommit=NN;Wf.ensureCommitInfo=aA;Wf.ObjectDBHTTPInterface=vi;Wf.Database=ig;Wf.loadMorphFromSnapshot=mp;Wf.createMorphSnapshot=pu;Wf.resource=sc;Wf.obj=ff;Wf.Path=Sg;Wf.arr=Ne;Wf.string=Bg;Wf.morphicDBs=Wf.morphicDBs||
(Wf.morphicDBs=new Map);Wf.getDefaultServerUrl=function(){return Wf.resource("undefined"!==typeof document?window.SERVER_URL||System.baseURL:"http://localhost:9001").join("objectdb/").url};Wf.convertToSerializableCommit=NN;Wf.convertToSerializableCommit=NN;Wf.ensureCommitInfo=aA;Wf.ensureCommitInfo=aA;var oR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),k=d.hasOwnProperty("MorphicDB")&&"function"===typeof d.MorphicDB?d.MorphicDB:d.MorphicDB=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){var l=e.snapshotLocation;e=e.serverURL;this.name=b;this.serverURL=e;this.snapshotLocation=l||b+"/snapshots/";this.httpDB=new Wf.ObjectDBHTTPInterface(e);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},
{key:"initializeIfNecessary",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b._initialized?e.return():e.yield(b.ensureDB(),2);b._initialized=!0;e.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(b){var e=b.content.slice(0,2);b=b.content.slice(2);return Wf.resource(System.decanonicalize(this.snapshotLocation)).join(e+"/"+b+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},
{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(b,e){b=void 0===b?"world":b;e=void 0===e?!1:e;var l=this,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(l.initializeIfNecessary(),2);p=l;q=p.name;u={};return w.return(l.httpDB.fetchCommits({db:q,type:b,ref:"HEAD",knownCommitIds:u,includeDeleted:e}))})}},{key:"fetchCommit",value:function(b,e,l){var p=this,
q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(p.initializeIfNecessary(),2);if(3!=w.nextAddress)return q=[{type:b,name:e,ref:l}],w.yield(p.httpDB.fetchCommits({db:p.name,ref:l,type:b,typesAndNames:q,knownCommitIds:{}}),3);u=w.yieldResult;return w.return(Wf.convertToSerializableCommit(u[0]))})}},{key:"fetchSnapshot",value:function(b,e,l,p){var q=this,u=arguments,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return w=
b,1===u.length&&w.type&&w.name&&(b=w.type,e=w.name,l=w._id),C.yield(q.initializeIfNecessary(),2);y=q;A=y.name;return C.return(q.httpDB.fetchSnapshot({db:A,type:b,name:e,ref:p,commit:l}))})}},{key:"exists",value:function(b,e,l){var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(p.initializeIfNecessary(),2);q=p;u=q.name;return w.return(p.httpDB.exists({db:u,type:b,name:e,ref:l}))})}},{key:"history",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return u.yield(l.initializeIfNecessary(),2);p=l;q=p.name;return u.return(l.httpDB.fetchVersionGraph({db:q,type:b,name:e}))})}},{key:"log",value:function(b,e,l,p){l=void 0===l?!1:l;var q=this,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?y.yield(q.initializeIfNecessary(),2):3!=y.nextAddress?(u=q,w=u.name,y.yield(q.httpDB.fetchLog({db:w,commit:b,limit:e,includeCommits:l,knownCommitIds:p}),3)):y.return(y.yieldResult.map(Wf.convertToSerializableCommit))})}},
{key:"revert",value:function(b,e,l,p){p=void 0===p?"HEAD":p;var q=this,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(q.initializeIfNecessary(),2);u=q;w=u.name;return y.return(q.httpDB.revert({db:w,type:b,name:e,toCommitId:l,ref:p}))})}},{key:"snapshotAndCommit",value:function(b,e,l,p,q,u,w){var y=this,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return D.yield(Wf.createMorphSnapshot(l,p),2);if(3!=D.nextAddress)return A=
D.yieldResult,D.yield(y.commit(b,e,A,q,u,w),3);C=D.yieldResult;C=Wf.convertToSerializableCommit(C);l.changeMetaData("commit",Wf.obj.dissoc(C,["preview"]),!0,!1);return D.return(C)})}},{key:"commit",value:function(b,e,l,p,q,u){var w=this,y=arguments,A,C,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return A=b,1===y.length&&A.type&&A.name&&(b=A.type,e=A.name,l=A.snapshot||A.content,p=Wf.obj.dissoc(A,["snapshot","_rev","_id","ancestors","deleted"]),u=A._id),L.yield(w.initializeIfNecessary(),
2);C=w;D=C.name;return L.return(w.httpDB.commit({db:D,type:b,name:e,ref:q,expectedParentCommit:u,commitSpec:p,snapshot:l}))})}},{key:"load",value:function(b,e,l,p,q){var u=this,w,y,A,C,D,L,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:"object"===typeof b?p=b:w=b;y=p;if(!y)return S.yield(u.fetchCommit(w,e,q),6);if("string"!==typeof y){S.jumpTo(3);break}A=$jscomp;C=A.makeIterator;return S.yield(u.log(y,1,!0),5);case 5:D=C.call(A,S.yieldResult);y=D.next().value;
S.jumpTo(3);break;case 6:y=S.yieldResult;case 3:return S.yield(u.fetchSnapshot(void 0,void 0,y._id),7);case 7:return L=S.yieldResult,S.yield(Wf.loadMorphFromSnapshot(L,l),8);case 8:return I=S.yieldResult,y=Wf.convertToSerializableCommit(y),I.changeMetaData("commit",Wf.obj.dissoc(y,["preview"]),!0,!1),S.return(I)}})}},{key:"fetchDiff",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(e.initializeIfNecessary(),2);l=e;p=
l.name;return q.return(e.httpDB.fetchDiff({db:p,otherDB:b}))})}},{key:"fetchConflicts",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(l.initializeIfNecessary(),2);p=l;q=p.name;return u.return(l.httpDB.fetchConflicts({db:q,includeDocs:b,only:e}))})}},{key:"resolveConflict",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(e.initializeIfNecessary(),
2);l=e;p=l.name;return q.return(e.httpDB.resolveConflict(Object.assign({db:p},b)))})}},{key:"synchronize",value:function(b){var e=b.method,l=b.otherDB,p=b.otherDBSnapshotLocation,q=b.onlyTypesAndNames,u=this,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(u.initializeIfNecessary(),2);w=u;y=w.name;return A.return(u.httpDB.synchronize({db:y,method:e,otherDB:l,otherDBSnapshotLocation:p,onlyTypesAndNames:q}))})}},{key:"softDelete",value:function(b,
e,l,p,q){var u=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){return w.return(u.commit(b,e,void 0,l,p,q))})}},{key:"delete",value:function(b,e,l){l=void 0===l?!0:l;var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(p.initializeIfNecessary(),2);q=p;u=q.name;return w.return(p.httpDB.delete({db:u,type:b,name:e,dryRun:l}))})}},{key:"deleteCommit",value:function(b,e){e=void 0===e?!0:e;var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return u.yield(l.initializeIfNecessary(),2);p=l;q=p.name;return u.return(l.httpDB.deleteCommit({db:q,commit:b,dryRun:e}))})}},{key:"codeSearchInPackages",value:function(b,e,l,p){e=void 0===e?"part":e;var q=this,u,w,y,A,C,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return I.yield(q.latestCommits(e),2);case 2:u=I.yieldResult,w=[],y=0,"function"===typeof p&&(u=u.filter(p)),A=$jscomp.makeIterator(u),C=A.next();case 3:if(C.done){I.jumpTo(5);
break}D=C.value;"function"===typeof l&&l(D.name,y++,u.length);return I.yield(q._textSearchInSnapshotOfCommit(b,D),6);case 6:L=I.yieldResult;L.length&&w.push.apply(w,$jscomp.arrayFromIterable(L));C=A.next();I.jumpTo(3);break;case 5:return I.return(w)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(b,e,l){var p=this,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return q=e,u=q._id,(w=l)?A.jumpTo(2):A.yield(p.fetchSnapshot(void 0,void 0,u),3);2!=A.nextAddress&&
(w=A.yieldResult);y=w;return A.return((new Wf.SnapshotPackageHelper(y)).textSearch(b,e))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:Wf.getDefaultServerUrl()})}},{key:"named",value:function(b,e){var l=Wf.morphicDBs.get(b);if(l)return l;if(!e.serverURL)throw Error("Needs serverURL!");e=new this(b,e);Wf.morphicDBs.set(b,e);return e}},{key:"wellKnownMorphicDBs",value:function(){var b=
this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return e=Wf.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),q.yield(e.getAll(),2);l=q.yieldResult;p=l.reduce(function(u,w){var y={};return Object.assign(u,(y[w._id]=b.named(w.name,{serverURL:w.serverURL,snapshotLocation:w.snapshotLocation}),y))},{});p.default||(p.default=b.default);return q.return(p)})}},{key:"addWellKnownMorphicDB",value:function(b,e){var l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){l=
e;p=l.name;q=l.snapshotLocation;u=l.serverURL;w=Wf.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return y.yield(w.set(b,{name:p,snapshotLocation:q,serverURL:u}),0)})}},{key:"removeWellKnownMorphicDB",value:function(b){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=Wf.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return l.yield(e.remove(b),0)})}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1570,end:10352})}(void 0);oR=Wf.MorphicDB;var Lp=Ia("ae",oR),$I=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),k=d.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof d.SnapshotPackageHelper?d.SnapshotPackageHelper:d.SnapshotPackageHelper=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.snapshot=b}},{key:"textSearch",value:function(b,e){var l=b&&b instanceof RegExp,p=[];if(!b)return p;for(var q={},u=$jscomp.makeIterator(this.filesInPackages()),w=u.next();!w.done;q={$jscomp$loop$prop$file$2714:q.$jscomp$loop$prop$file$2714},w=u.next()){q.$jscomp$loop$prop$file$2714=w.value;w=q.$jscomp$loop$prop$file$2714.get(this.snapshot);var y=Wf.string.lineIndexComputer(w),A=Wf.string.lineRanges(w);
if(l)w=Wf.string.reMatches(w,b),w.length&&p.push.apply(p,$jscomp.arrayFromIterable(w.map(function(ba){return function(ua){return Object.assign(ua,{commit:e,file:ba.$jscomp$loop$prop$file$2714})}}(q))));else for(var C=0,D=0;0<=(C=w.indexOf(b));){var L=C+D,I=L+b.length,S=y(L),V=w.slice.apply(w,$jscomp.arrayFromIterable(A[S]));p.push({match:b,start:L,end:I,length:b.length,line:S,lineString:V,commit:e,file:q.$jscomp$loop$prop$file$2714});D+=C+b.length;w=w.slice(C+b.length)}}return p}},{key:"filesInPackages",
value:function(){function b(p,q,u,w,y){y=void 0===y?[]:y;if(p["package.json"]&&"string"===typeof p["package.json"])try{var A=JSON.parse(p["package.json"]);w={url:u,path:q,name:A.name||Wf.arr.last(q)}}catch(D){}A=[];for(var C in p)"string"===typeof p[C]?y.push({path:q.concat(C),url:Wf.string.joinPath(u,C),package:w,get:function(D){return Wf.Path(this.path).get(D.packages)},set:function(D,L){Wf.Path(this.path).set(D.packages,L)}}):A.push(C);A.forEach(function(D){return b(p[D],q.concat(D),Wf.string.joinPath(u,
D),w,y)});return y}var e=[],l;for(l in this.snapshot.packages)b(this.snapshot.packages[l],[l],l,null,e);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],d,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10361,end:13434})}(void 0);Wf.SnapshotPackageHelper=
$I;Wf.SnapshotPackageHelper=$I;Wf.SnapshotPackageHelper=$I;Wf.default=oR;var Wc=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");Wc.ensureAbsoluteComponentRefs=function(a){var d=a.snapshotAndPackages,k=void 0===a.localComponents?bA(snapshot):a.localComponents,b=void 0===a.localWorldName?Sg("metadata.commit.name").get($world):a.localWorldName;Object.values(d.packages["local://lively-object-modules/"]||{}).forEach(function(e){Object.entries(e).forEach(function(l){var p=$jscomp.makeIterator(l);
l=p.next().value;p=p.next().value;if(!l.endsWith(".json")){var q=Wc.ast.parse(p),u=[];Wc.ast.AllNodesVisitor.run(q,function(w,y){"Literal"===w.type&&"string"===typeof w.value&&(w.value.match(/^styleguide:\/\/\$world\/.+/)&&!k.includes(w.value.replace("styleguide://$world/",""))&&u.push({target:w,replacementFunc:function(){return JSON.stringify(w.value.replace("$world",b))}}),w.value.match(/^part:\/\/\$world\/.+/)&&!k.includes(w.value.replace("part://$world/",""))&&u.push({target:w,replacementFunc:function(){return JSON.stringify(w.value.replace("$world",
b))}}))});e[l]=Wc.ast.transform.replaceNodes(u,p).source}})})};Wc.findLocalComponents=bA;Wc.prefetchCoreStyleguides=qF;Wc.getProjectName=function(a){return Wc.Path("metadata.commit.name").get(a)||a.name};Wc.reset=rF;Wc.clearSnapshot=ON;Wc.arr=Ne;Wc.properties=km;Wc.Path=Sg;Wc.promise=Uf;Wc.obj=ff;Wc.registerExtension=Fd;Wc.Resource=Ef;Wc.resource=sc;Wc.pt=kh;Wc.MorphicDB=Lp;Wc.ObjectPool=ei;Wc.allPlugins=Bp;Wc.normalizeOptions=Wy;Wc.deserializeMorph=kA;Wc.loadPackagesAndModulesOfSnapshot=lA;Wc.subscribeOnce=
function(a,d,k){nD(k).emitter.once(a,d);return d};Wc.once=cq;Wc.ast=vH;Wc.findLocalComponents=bA;Wc.findLocalComponents=bA;var aJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("StyleguidePlugin")&&"function"===typeof d.StyleguidePlugin?d.StyleguidePlugin:d.StyleguidePlugin=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"afterSerialization",
value:function(b,e,l){var p={},q="styleguide://"+Wc.getProjectName($world);Wc.findLocalComponents(e).forEach(function(u){return p[q+"/"+u]="styleguide://$world/"+u});Object.values(e).forEach(function(u){if((u=u.props.master)&&u.value)for(var w in p)u.value.includes(w)&&(u.value=u.value.split(w).join(p[w]))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleguidePlugin"}}],d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3123,end:4277})}(void 0);Wc.StyleguidePlugin=aJ;Wc.StyleguidePlugin=aJ;Wc.StyleguidePlugin=aJ;Wc.prefetchCoreStyleguides=qF;Wc.prefetchCoreStyleguides=qF;var bJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("ComponentPolicy")&&"function"===typeof d.ComponentPolicy?d.ComponentPolicy:d.ComponentPolicy=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.derivedMorph=b;this._overriddenProps=new WeakMap;if(e.isMorph||"string"===typeof e)this.auto=e,e.isMorph&&(this.auto.isComponent=!0),"string"===typeof e&&this.resolveMasterComponents();else{b=e.click;var l=e.auto,p=e.hover,q=void 0===e.light?{}:e.light;e=void 0===e.dark?{}:e.dark;q&&(this.light=
q);e&&(this.dark=e);b&&(this.click=b);l&&(this.auto=l);p&&(this.hover=p);this.resolveMasterComponents()}}},{key:"uses",value:function(b){return[this.auto,this.click,this.hover].includes(b)}},{key:"spec",value:function(){return Wc.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",value:function(b){if(!b)return!1;if("string"===typeof b){b=b.replace("styleguide://$world","styleguide://"+Wc.getProjectName($world));var e=this.getResourceUrlFor(this.auto);e&&(e=e.replace("styleguide://$world",
"styleguide://"+Wc.getProjectName($world)));return e==b}e=$jscomp.makeIterator(["auto","click","hover"]);for(var l=e.next();!l.done;l=e.next())if(l=l.value,"string"===typeof b[l]){if(this.getResourceUrlFor(this[l])!=b[l])return!1}else if((this[l]||null)!=(b[l]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var b=this,e=[];this.derivedMorph.withAllSubmorphsDo(function(l){b.managesMorph(l)&&0<Object.keys(b._overriddenProps.get(l)).filter(function(p){return"_rev"!=p}).length&&e.push([l,
Object.keys(b._overriddenProps.get(l))])});return e}},{key:"__dont_serialize__",get:function(){var b=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];Wc.obj.isEmpty(this.dark)&&b.push("dark");Wc.obj.isEmpty(this.light)&&b.push("light");return b}},{key:"__serialize__",value:function(){var b=this,e={},l=function(p){return Wc.obj.isString(p)?p:b.getResourceUrlFor(p)};this.auto&&(e.auto=l(this.auto));this.click&&(e.click=l(this.click));this.hover&&(e.hover=l(this.hover));return{__expr__:"("+
JSON.stringify(e)+")"}}},{key:"__after_deserialize__",value:function(b,e){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(e=Wc.promise.deferred(),l=e.promise,p=e.resolve,Wc.once(b,"_appliedMaster",p),q.yield(b._hasUnresolvedMaster,2)):3!=q.nextAddress?b._appliedMaster?q.jumpTo(3):q.yield(l,3):q.return(!0)})}},{key:"whenReady",
value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(b._hasUnresolvedMaster,0)})}},{key:"getResourceUrlFor",value:function(b){return b?b._resourceHandle?b._resourceHandle.url.replace("$world",Wc.getProjectName($world)):void 0==b.name?null:"styleguide://"+Wc.getProjectName($world)+"/"+b.name:null}},{key:"getWorldUrlFor",value:function(b){b=Wc.resource("string "===typeof b?b:this.getResourceUrlFor(b)).worldName;return b==Wc.getProjectName($world)?
document.location.href:Wc.worldToUrl[b]}},{key:"resolveMasterComponents",value:function(){var b=this,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){switch(Fa.nextAddress){case 1:e=Wc.promise.deferred(),b._hasUnresolvedMaster=e.promise,l=b,p=void 0===l.light?{}:l.light,q=void 0===l.dark?{}:l.dark,u=["auto","click","hover"],w=[],Fa.setCatchFinallyBlocks(2),y=$jscomp.makeIterator(u),A=y.next();case 4:if(A.done){Fa.leaveTryBlock(3);break}C=A.value;if("string"!==
typeof b[C]){Fa.jumpTo(7);break}D=b;L=C;return Fa.yield(Wc.resource(b[C]).read(),8);case 8:D[L]=Fa.yieldResult;case 7:if("string"!==typeof p[C]){Fa.jumpTo(9);break}I=p;S=C;return Fa.yield(Wc.resource(p[C]).read(),10);case 10:I[S]=Fa.yieldResult;case 9:if("string"!==typeof q[C]){Fa.jumpTo(11);break}V=q;ba=C;return Fa.yield(Wc.resource(q[C]).read(),12);case 12:V[ba]=Fa.yieldResult;case 11:w.push(b[C],p[C],q[C]);A=y.next();Fa.jumpTo(4);break;case 2:throw ua=Fa.enterCatchBlock(),Error("Encountered invalid master component reference: "+
ua.message);case 3:Wc.arr.compact(w).forEach(function(F){F.isComponent||(F.isComponent=!0)}),e.resolve(),b._hasUnresolvedMaster=!1,Fa.jumpToEnd()}})}},{key:"applyAnimated",value:function(b){b=void 0===b?{duration:1E3}:b;var e=Wc.promise.deferred(),l=e.promise;e=e.resolve;this.applyIfNeeded(!0,b);Wc.once(this,"_animationConfig",e);return l}},{key:"applyIfNeeded",value:function(b,e){var l=this;b=void 0===b?!1:b;if(e=void 0===e?!1:e)this._animationConfig=e;var p=this.derivedMorph;if(p.env.world)if(p.env.eventDispatcher){if(this._hasUnresolvedMaster)return this._originalOpacity=
p.opacity,p.withMetaDo({metaInteraction:!0},function(){e||[p].concat($jscomp.arrayFromIterable(p.ownerChain())).find(function(u){return u.isComponent})||(p.opacity=0)}),this._hasUnresolvedMaster.then(function(){l.applyIfNeeded(b);p.withMetaDo({metaInteraction:!0},function(){p.opacity=l._originalOpacity});delete l._originalOpacity;delete l._capturedExtents});var q=this.determineMaster(p);q&&this._appliedMaster!=q&&(b=!0);q&&b&&(this.apply(p,q),this._appliedMaster=q)}else Wc.once(p.env,"eventDispatcher",
function(){l.applyIfNeeded(b,e)});else Wc.once(p.env,"world",function(){l.applyIfNeeded(b,e)})}},{key:"getStyleProperties",value:function(b){var e=b.propertiesAndPropertySettings();b=e.properties;var l=[];e=$jscomp.makeIterator(e.order);for(var p=e.next();!p.done;p=e.next())p=p.value,b[p].isStyleProp&&l.push(p);return l}},{key:"apply",value:function(b,e,l){var p=this;l=void 0===l?this._animationConfig:l;if(!this._applying){this._applying=!0;try{var q=function(){return b.withMetaDo({metaInteraction:!0},
function(){var u=p.prepareSubmorphsToBeManaged(b,e);e.withAllSubmorphsDoExcluding(function(w){var y=w==e,A=y?b:u[w.name];if(A)if(Wc.obj.isArray(A)&&(A=A.pop()),!w.master||y||w.master.equals(A.master)||p._overriddenProps.get(A).master||(A.master=w.master.spec(),A.requestMasterStyling()),A.master&&!y)y=A.master._overriddenProps.get(A)||{},y.position||(A.position=w.position),y.extent||(A.extent=w.extent);else{y=$jscomp.makeIterator(p.getStyleProperties(w));for(var C=y.next();!C.done;C=y.next())if(C=
C.value,!p._overriddenProps.get(A)[C])if("layout"==C)A.layout&&w.layout&&A.layout.name()==w.layout.name()&&A.layout.equals(w.layout)||(A.layout=w.layout?w.layout.copy():void 0);else{if(w==e){if("extent"==C&&!A.extent.equals(Wc.pt(10,10))&&(!A.owner||A.owner.isWorld||A.ownerChain().find(function(D){return D.master&&D.master.managesMorph(A)})))continue;if("position"==C)continue}A.isLabel&&"extent"==C||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(C)||(Wc.obj.equals(A[C],
w[C])||(A[C]=w[C]),["fixedHeight","fixedWidth"].includes(C)&&A._parametrizedProps&&A._parametrizedProps.extent&&(A.extent=A._parametrizedProps.extent))}A._parametrizedProps&&delete A._parametrizedProps}},function(w){return e!=w&&w.master})})};l?b.withAnimationDo(q,l).then(function(){p._animationConfig=!1;p._applying=!1}):b.dontRecordChangesWhile(q)}finally{l||(this._applying=!1),delete b._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(b,e){var l=this._overriddenProps.get(b);
this._overriddenProps.set(b,Wc.obj.dissoc(l,e))}},{key:"prepareSubmorphsToBeManaged",value:function(b,e){var l=this,p={};b.withAllSubmorphsDoExcluding(function(q){p[q.name]&&(Wc.obj.isArray(p[q.name])?p[q.name].push(q):p[q.name]=[p[q.name],q]);p[q.name]=q},function(q){return q!=b&&q.master});e.withAllSubmorphsDoExcluding(function(q){if(q=q==e?b:p[q.name])Wc.obj.isArray(q)&&(q=q.pop()),l.prepareMorphToBeManaged(q)},function(q){return q!=e&&q.master});return p}},{key:"managedMorphs",get:function(){var b=
this,e=Wc.arr.groupBy(this.derivedMorph.withAllSubmorphsSelect(function(p){return b.managesMorph(p)}),function(p){return p.name}),l;for(l in e)e[l]=e[l][0];return e}},{key:"reconcileSubmorphs",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(b.whenReady(),2);e=b.managedMorphs;l=b._appliedMaster||b.auto;e[l.name]=b.derivedMorph;if(!l)return p.return();b.derivedMorph.submorphs=l.copy().submorphs;b.derivedMorph.submorphs.forEach(function(q,
u){q.position=l.submorphs[u].position});b.prepareSubmorphsToBeManaged(b.derivedMorph,l);p.jumpToEnd()})}},{key:"managesMorph",value:function(b){return this._overriddenProps.has(b)}},{key:"propsToSerializeForMorph",value:function(b,e){if(!this.managesMorph(b))return e;for(var l=[],p=$jscomp.makeIterator(this.getStyleProperties(b)),q=p.next();!q.done;q=p.next())q=q.value,this._overriddenProps.get(b)[q]||!("position"==q&&b==this.derivedMorph||"extent"==q&&b==this.derivedMorph)&&l.push(q);return Wc.arr.withoutAll(e,
l)}},{key:"prepareMorphToBeManaged",value:function(b){if(!this._overriddenProps.has(b)){var e={},l;for(l in b._parametrizedProps)"__takenFromSnapshot__"!=l&&(e[l]=!0);this._overriddenProps.set(b,e)}}},{key:"determineMaster",value:function(b){var e=b.env.world.colorScheme,l=b.env.eventDispatcher.isMorphHovered(b);b=b.env.eventDispatcher.isMorphClicked(b);var p=this.getMasterForState(this,{isHovered:l,isClicked:b});this.light&&"light"==e&&(p=this.getMasterForState(this.light,{isHovered:l,isClicked:b})||
p);this.dark&&"dark"==e&&(p=this.getMasterForState(this.light,{isHovered:l,isClicked:b})||p);return p}},{key:"getMasterForState",value:function(b,e){var l=b.auto,p=b.hover,q=b.click,u=e.isClicked;b=l;if(e.isHovered)if(p)b=p;else for(e=b&&b.master,p=[];e;){if(e.hover){b=e.hover;break}e=Wc.Path("auto.master").get(e);if(p.includes(e))break;p.push(e)}if(u)if(b=l,q)b=q;else for(l=b&&b.master,q=[];l;){if(l.click){b=l.click;break}l=Wc.Path("auto.master").get(l);if(q.includes(l))break;q.push(l)}return b}},
{key:"onMorphChange",value:function(b,e){if(!this._applying&&!Wc.Path("meta.metaInteraction").get(e)&&!["_rev","name"].includes(e.prop)&&("opacity"==e.prop&&delete this._originalOpacity,"master"==e.prop&&this.managesMorph(b)&&(this._overriddenProps.get(b).master=!0),b.styleProperties.includes(e.prop)))if(this.managesMorph(b)){if(!b.master||b.master==this||["extent","position"].includes(e.prop))this._overriddenProps.get(b)[e.prop]=!0}else if(b._parametrizedProps)b._parametrizedProps[e.prop]=e.value;
else{var l={};b._parametrizedProps=(l[e.prop]=e.value,l)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentPolicy"}},{key:"for",value:function(b,e){e=e.constructor===Wc.ComponentPolicy?e:new this(b,e);b.master&&(e._overriddenProps=b.master._overriddenProps);return e}}],d,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:5171,end:28362})}(void 0);Wc.ComponentPolicy=bJ;Wc.ComponentPolicy=bJ;Wc.ComponentPolicy=bJ;Wc.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;Wc.fetchedSnapshots=Wc.fetchedSnapshots||{};Wc.fetchedMasters=Wc.fetchedMasters||{};Wc.resolvedMasters=Wc.resolvedMasters||{};Wc.modulesToLoad=Wc.modulesToLoad||{};Wc.li=Wc.li||void 0;Wc.localNamePromise=Wc.localNamePromise||void 0;Wc.masterComponentFetches=Wc.masterComponentFetches||{};Wc.worldToUrl=Wc.worldToUrl||{};var y5=Ia("bQ",
Wc.resolvedMasters);Wc.resolvedMasters=y5;Wc.resolvedMasters=y5;Wc.reset=rF;Wc.reset=rF;Wc.clearSnapshot=ON;Wc.clearSnapshot=ON;var JB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),k=d.hasOwnProperty("StyleGuideResource")&&"function"===typeof d.StyleGuideResource?d.StyleGuideResource:d.StyleGuideResource=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"canDealWithJSON",
get:function(){return!1}},{key:"componentName",get:function(){var b=this.url.match(Wc.styleGuideURLRe);b=$jscomp.makeIterator(b);b.next();b.next();return b.next().value}},{key:"worldName",get:function(){var b=this.url.match(Wc.styleGuideURLRe);b=$jscomp.makeIterator(b);b.next();var e=b.next().value;b.next();"$world"==e&&(e=this.localWorldName());return e}},{key:"dirList",value:function(b,e){var l=this,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return l.worldName==Wc.getProjectName($world)?
q.return(Wc.arr.uniq([].concat($jscomp.arrayFromIterable($world.localComponents),$jscomp.arrayFromIterable($world.withAllSubmorphsSelect(function(u){return u.isComponent}))))):(p=Wc.resolvedMasters[l.worldName])?q.return(Object.values(p)):q.return([])})}},{key:"localWorldName",value:function(){var b;if(b=Wc.getProjectName($world))return b;if(Wc.localNamePromise)return Wc.localNamePromise;b=Wc.promise.deferred();var e=b.resolve;Wc.localNamePromise=b.promise;if("__newWorld__"==Wc.resource(document.location.href).query().name)return e("__newWorld__"),
Wc.localNamePromise;Wc.subscribeOnce("world/loaded",function(){e(Wc.getProjectName($world))},System);return Wc.localNamePromise}},{key:"fetchFromMasterDir",value:function(b,e){var l=b.join(this.worldName).join(e+".json");if(Wc.masterComponentFetches[l.url])return Wc.masterComponentFetches[l.url];Wc.masterComponentFetches[l.url]=function(){var p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(p=Wc,q=p.deserializeMorph,u.yield(l.readJson(),2)):u.return(q.call(p,
u.yieldResult))})}();return Wc.masterComponentFetches[l.url]}},{key:"read",value:function(){var b=this,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:return e=b.componentName,ua.yield(b.worldName,2);case 2:l=ua.yieldResult;if(p=Wc.Path([l,b.componentName]).get(Wc.resolvedMasters))return ua.return(p);q=Wc.resource(System.baseURL).join("components_cache").join(l).join(e+".json");return"undefined"===typeof Wc.fetchedMasters[q.url]?
(w=Wc.promise.deferred(),u=w.resolve,Wc.fetchedMasters[q.url]=w.promise,ua.yield(b.localWorldName(),6)):ua.yield(Wc.fetchedMasters[q.url],5);case 5:p=ua.yieldResult;ua.jumpTo(4);break;case 6:if(ua.yieldResult==l){p="undefined"!==typeof $world&&$world.localComponents.find(function(Fa){return Fa.name==e});if(!p)throw Error('Master component "'+e+'" can not be found in "'+l+'"');u(p);ua.jumpTo(4);break}return ua.yield(q.exists(),8);case 8:if(!ua.yieldResult){u(null);ua.jumpTo(4);break}Wc.worldToUrl[l]=
Wc.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+l+".json"}).url;return ua.yield(q.readJson(),10);case 10:return y=ua.yieldResult,ua.yield(Wc.loadPackagesAndModulesOfSnapshot(y),11);case 11:return p=Wc.deserializeMorph(y),ua.yield(b.resolveComponent(p),12);case 12:u(p);case 4:if(p)return ua.return(p);Wc.fetchedSnapshots[l]||(console.log("scheduling fetch of",l),C=Wc.promise.deferred(),A=C.resolve,Wc.fetchedSnapshots[l]=C.promise);return A?(L=Wc.MorphicDB.default,
ua.yield(L.fetchCommit("world",l),16)):ua.yield(Wc.fetchedSnapshots[l],15);case 15:D=ua.yieldResult;ua.jumpTo(14);break;case 16:if(ua.yieldResult)return ua.yield(L.fetchSnapshot("world",l),22);I=Wc.resource(System.baseURL).join("lively.morphic/styleguides").join(l+".json");return ua.yield(I.exists(),19);case 19:if(!ua.yieldResult){A(null);ua.jumpTo(18);break}return ua.yield(I.readJson(),21);case 21:D=ua.yieldResult;Wc.worldToUrl[l]=Wc.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+
l+".json"}).url;ua.jumpTo(18);break;case 22:D=ua.yieldResult,Wc.worldToUrl[l]=Wc.resource(System.baseURL).join("worlds/load").withQuery({name:l}).url;case 18:return Wc.ensureAbsoluteComponentRefs({snapshotAndPackages:D,localComponents:[],localWorldName:b.worldName}),ua.yield(Wc.loadPackagesAndModulesOfSnapshot(D),23);case 23:Object.values(D.snapshot).filter(function(Fa){return Fa.props.master}).forEach(function(Fa){var F=Fa.props.master.value;Wc.obj.isString(F)&&(Fa.props.master.value=F.split("$world").join(b.worldName))}),
A(D);case 14:S=new Wc.ObjectPool(Wc.normalizeOptions({plugins:[new Wc.StyleguidePlugin].concat($jscomp.arrayFromIterable(Wc.allPlugins))}));V=$jscomp.makeIterator(Object.entries(D.snapshot).find(function(Fa){Fa=$jscomp.makeIterator(Fa);Fa.next();Fa=Fa.next().value;return Wc.Path("props.isComponent.value").get(Fa)&&Wc.Path("props.name.value").get(Fa)==e})||[]);ba=V.next().value;if(!ba)throw Error('Master component "'+e+'" can not be found in "'+l+'"');p=S.resolveFromSnapshotAndId(Object.assign({},
D,{id:ba}));return ua.yield(b.resolveComponent(p),24);case 24:return ua.return(ua.yieldResult)}})}},{key:"resolveComponent",value:function(b){var e=this,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:l=e.componentName;Wc.resolvedMasters[e.worldName]?Wc.resolvedMasters[e.worldName][l]=b:(p={},Wc.resolvedMasters[e.worldName]=(p[l]=b,p));b._resourceHandle=e;if(!b._pool||!b._pool.mastersInSubHierarchy){y.jumpTo(2);break}q=$jscomp.makeIterator(b._pool.mastersInSubHierarchy);
u=q.next();case 3:if(u.done){y.jumpTo(5);break}w=u.value;return y.yield(w.applyIfNeeded(!0),6);case 6:w.derivedMorph.ownerChain().includes(b)||w.derivedMorph.requestMasterStyling();u=q.next();y.jumpTo(3);break;case 5:delete b._pool;case 2:return y.return(b)}})}},{key:"write",value:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Master Components can not be written to!");})}},{key:"exists",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=
"undefined"!==typeof $world&&$world.localComponents.find(function(p){return p.name==b.morphName});return l.return(e&&e.isComponent)})}},{key:"remove",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(e="undefined"!==typeof $world&&$world.localComponents.find(function(p){return p.name==b.morphName}))e.isComponent=!1;return l.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],d,{pathInPackage:function(){return"style-guide.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:32143,end:39700})}(Wc.Resource);Wc.StyleGuideResource=JB;Wc.StyleGuideResource=JB;Wc.StyleGuideResource=JB;var cJ={name:"styleguide",matches:function(a){return a.match(Wc.styleGuideURLRe)},resourceClass:Wc.StyleGuideResource};Wc.resourceExtension=cJ;Wc.resourceExtension=cJ;Wc.resourceExtension=
cJ;Wc.registerExtension(Wc.resourceExtension);var jm=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");jm.install=Tr;jm.remove=ku;jm.isInstalled=Ur;jm.arr=Ne;jm.fun=Tj;jm.install=Tr;jm.install=Tr;jm.remove=ku;jm.remove=ku;jm.isInstalled=Ur;jm.isInstalled=Ur;var dJ=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");dJ.classHolder={};var Rq=dJ.classHolder;dJ.classHolder=Rq;dJ.classHolder=Rq;var yq=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");
yq.computeRequireMap=cA;yq.graph=Cq;yq.arr=Ne;yq.obj=ff;yq.loadedModules=QF;yq.computeRequireMap=cA;yq.computeRequireMap=cA;var tl=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");tl.scheduleModuleExportsChange=dA;tl.runScheduledExportChanges=sF;tl.clearPendingModuleExportChanges=function(a,d){delete a.get("@lively-env").pendingExportChanges[d]};tl.updateModuleExports=function(a,d,k){var b=a.debug;tl.module(a,d).updateRecord(function(e){var l=[],p=[];Object.keys(k).forEach(function(D){var L=
k[D];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",d,D,String(L).slice(0,30).replace(/\n/g,"")+"...");var I=!(D in e.exports);I&&(e.__lively_modules__.evalOnlyExport[D]=!0);e.exports[D]=L;I?l.push(D):p.push(D)});if(l.length){var q=a.get(d);Object.isFrozen(q)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",
d),a.set(d,a.newModule(e.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",d),l.forEach(function(D){Object.defineProperty(q,D,{configurable:!1,enumerable:!0,get:function(){return e.exports[D]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(p.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,d);for(var u=0,w=e.importers.length;u<w;u++){var y=e.importers[u];if(!y.locked){var A;
if(y.dependencies.some(function(D,L){A=L;return D&&D.name===e.name})){if(b){var C=tl.module(a,y.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+C.package().name+"/"+C.pathInPackage())}tl.module(a,y.name).evaluationStart();y.setters[A](e.exports);tl.module(a,y.name).evaluationEnd()}}}}})};tl.module=mu;tl.scheduleModuleExportsChange=dA;tl.scheduleModuleExportsChange=dA;tl.runScheduledExportChanges=sF;tl.runScheduledExportChanges=sF;var Di=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");
Di.moduleSourceChange=eA;Di.moduleSourceChangeEsm=function(a,d,k,b){var e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:return e=a.debug,l={status:"loading",source:k,name:d,address:d,linkSets:[],dependencies:[],metadata:{format:"esm"}},ua.yield(Di.instrumentSourceOfEsmModuleLoad(a,l),2);case 2:p=ua.yieldResult,q=function(Fa,F){return Di.scheduleModuleExportsChange(a,l.name,Fa,F,!0)},u=p.declare(q),e&&console.log("[lively.vm es6] sourceChange of %s with deps",
l.name,p.localDeps),w=[],y=$jscomp.makeIterator(p.localDeps),A=y.next();case 3:if(A.done){ua.jumpTo(5);break}C=A.value;return ua.yield(a.normalize(C,l.name),6);case 6:return D=ua.yieldResult,L=Di.classHolder.module(a,D),ua.yield(L.load(),7);case 7:I=ua.yieldResult;w.push({name:C,fullname:D,module:L,exports:I});A=y.next();ua.jumpTo(3);break;case 5:if(S=a.loads&&a.loads[l.name])S.deps=w.map(function(Fa){return Fa.name}),S.depMap=w.reduce(function(Fa,F){Fa[F.name]=F.fullname;return Fa},{}),S.metadata&&
S.metadata.entry&&(S.metadata.entry.deps=S.deps,S.metadata.entry.normalizedDeps=w.map(function(Fa){return Fa.fullname}),S.metadata.entry.declare=p.declare);V=Di.classHolder.module(a,l.name);ba=V.record();w.forEach(function(Fa,F){return V.addDependencyToModuleRecord(Fa.module,u.setters[F])});ba&&(ba.execute=u.execute);w.forEach(function(Fa,F){return u.setters[F](Fa.exports)});return ua.return(u.execute())}})};Di.moduleSourceChangeGlobal=function(a,d,k,b){var e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return e={status:"loading",source:k,name:d,address:d,linkSets:[],dependencies:[],metadata:{format:"global"}},a.get(d)?q.jumpTo(2):q.yield(a.import(d),2);if(4!=q.nextAddress)return q.yield(Di.instrumentSourceOfGlobalModuleLoad(a,e),4);l=q.yieldResult;e.source=l.translated;p=Di.doInstantiateGlobalModule(a,e);a.delete(d);a.set(p.name,p.esModule);return q.return(p.module)})};Di.doInstantiateGlobalModule=function(a,d){var k=Di.__createEntry();k.name=d.name;k.esmExports=!0;d.metadata.entry=
k;k.deps=[];for(var b in d.metadata.globals){var e=d.metadata.globals[b];e&&k.deps.push(e)}k.execute=function(l,p,q){(p=(p=Di.classHolder.module(a,q.id).metadata())&&p.entry&&p.entry.module&&p.entry.module.exports)&&Object.keys(p).forEach(function(y){try{delete a.global[y]}catch(A){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+y+'"]')}});if(d.metadata.globals){var u={};for(var w in d.metadata.globals)d.metadata.globals[w]&&(u[w]=l(d.metadata.globals[w]))}if(l=d.metadata.exports)d.source+=
'\nSystem.global["'+l+'"] = '+l+";";q=a.get("@@global-helpers").prepareGlobal(q.id,l,u);Di.__evaluateGlobalLoadSource(a,d);return q()};return Di.runExecuteOfGlobalModule(a,k)};Di.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};Di.__evaluateGlobalLoadSource=function(a,d){function k(){0==--e&&(l.System=l.SystemJS=b)}var b,e=
0,l=a.global;return function(p){try{0==e++&&(b=l.System),l.System=l.SystemJS=this,(0,eval)(p.source),k()}catch(q){throw k(),Error("Error evaluating "+p.address+":\n"+q.stack);}}.call(a,d)};Di.runExecuteOfGlobalModule=function(a,d){var k={},b=d.module={exports:k,id:d.name};d.evaluated=!0;if(k=d.execute.call(a.global,function(e){var l=d.deps.find(function(p){return p===e});if(l=l&&a.get(d.normalizedDeps[d.deps.indexOf(l)])||a.get(a.decanonicalize(e,d.name)))return l;throw Error("Module "+e+" not declared as a dependency of "+
d.name);},k,b))b.exports=k;k=b.exports;b=a.get("@system-env").constructor;d.esModule=k&&(k.__esModule||k instanceof b)?k:d.esmExports&&k!==a.global?a.newModule(k):{default:k};return d};Di.arr=Ne;Di.emit=bq;Di.instrumentSourceOfEsmModuleLoad=GF;Di.instrumentSourceOfGlobalModuleLoad=HF;Di.scheduleModuleExportsChange=dA;Di.classHolder=Rq;Di.moduleSourceChange=eA;Di.moduleSourceChange=eA;var Mk=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Mk.isJsFile=PN;Mk.asDir=QN;Mk.isURL=
lu;Mk.urlResolve=tF;Mk.string=Bg;Mk.isJsFile=PN;Mk.isJsFile=PN;Mk.asDir=QN;Mk.asDir=QN;var KB=Mk.string.joinPath;Mk.join=KB;Mk.join=KB;Mk.join=KB;Mk.isURL=lu;Mk.isURL=lu;Mk.urlResolve=tF;Mk.urlResolve=tF;var Ln=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");Ln.arr=Ne;Ln.obj=ff;Ln.isURL=lu;Ln.installHook=Tr;Ln.isHookInstalled=Ur;var Mp=function(a){this.pkg=a};Mp.prototype.applyConfig=function(a){var d=this.System,k=this.packageURL,b=this.pkg;a=Ln.obj.deepMerge(b.config,
a);var e=a.name||k.split("/").slice(-1)[0],l=a.version,p=a.systemjs||{},q=a.lively,u=a.main||"index.js",w={},y={};d.config({map:(w[e]=k,w),packages:(y[k]=Object.assign({},p,{meta:Object.assign({"package.json":{format:"json"}},p.meta),configured:!0}),y)});d.packages[k].configured=!0;d=d.getConfig().packages[k]||{};d.map||(d.map={});p&&(q&&q.main?u=q.main:p.main&&(u=p.main),this.applySystemJSConfig(p));u.match(/\.[^\/\.]+/)||(u+=".js");d.main=u;b.version=l;b.config=a;b._name=e;b.mergeWithConfig(d);
return q?this.applyLivelyConfig(q):{subPackages:[]}};Mp.prototype.applySystemJSConfig=function(a){var d=this.System;a.packageConfigPaths&&d.config({packageConfigPaths:Ln.arr.uniq(d.packageConfigPaths.concat(a.packageConfigPaths))});a.packages&&d.config({packages:a.packages});a.globalmap&&d.config({map:a.globalmap});a.babelOptions&&d.config({babelOptions:a.babelOptions});a.meta&&d.config({meta:a.meta})};Mp.prototype.applyLivelyConfig=function(a){this.applyLivelyConfigMeta(a);this.applyLivelyConfigHooks(a);
this.applyLivelyConfigBundles(a)};Mp.prototype.applyLivelyConfigHooks=function(a){var d=this;(a.hooks||[]).forEach(function(k){try{var b=eval("("+k.source+")");b.name&&Ln.isHookInstalled(d.System,k.target,b.name)||Ln.installHook(d.System,k.target,b)}catch(e){console.error("Error installing hook for %s: %s",d.packageURL,e,k)}})};Mp.prototype.applyLivelyConfigBundles=function(a){var d=this;if(!a.bundles)return Promise.resolve();var k=Object.keys(a.bundles).reduce(function(b,e){var l=d.packageURL+"/"+
e;e=a.bundles[e].map(function(p){return d.System.decanonicalize(p,d.packageURL+"/")});b[l]=e;return b},{});this.System.config({bundles:k});return Promise.resolve()};Mp.prototype.applyLivelyConfigMeta=function(a){if(a.meta){var d=this.System.getConfig().packages[this.packageURL]||{},k={},b={meta:{},packages:(k[this.packageURL]=d,k)};Object.keys(a.meta).forEach(function(e){var l=a.meta[e];Ln.isURL(e)?b.meta[e]=l:(d.meta||(d.meta={}),d.meta[e]=l)});this.System.config(b)}};$jscomp.global.Object.defineProperties(Mp.prototype,
{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});Ln.PackageConfiguration=Mp;Ln.default=Mp;var oe=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");oe.normalizePackageURL=function(a,d,k){k=void 0===k?[]:k;if(k.some(function(b){return b===d}))return d;a=a.decanonicalize(d.replace(/[\/]+$/,"")+"/");if(!oe.isURL(a))throw Error("Strange package URL: "+a+" is not a valid URL");
a.match(/\.js/)&&(a=-1<a.indexOf(a+".js")?a.replace(/\.js$/,""):a.split("/").slice(0,-1).join("/"));a.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+a);return String(a).replace(/\/$/,"")};oe.lookupPackage=uF;oe.ensurePackage=vF;oe.getPackage=fA;oe.applyConfig=wF;oe.importPackage=xF;oe.removePackage=yF;oe.reloadPackage=zF;oe.registerPackage=AF;oe.getPackageSpecs=BF;oe.arr=Ne;oe.promise=Uf;oe.obj=ff;oe.emit=bq;oe.module=mu;oe.resource=sc;oe.PackageConfiguration=
Mp;oe.isURL=lu;oe.join=KB;oe.classHolder=Rq;var Vh=function(a,d,k,b,e){e=void 0===e?{}:e;this.System=a;this.url=d;this.registerProcess=null;this.map={};this.setConfig(e)};Vh.allPackages=function(a){return oe.obj.values(oe.classHolder.PackageRegistry.ofSystem(a).byURL)};Vh.allPackageURLs=function(a){return oe.classHolder.PackageRegistry.ofSystem(a).allPackageURLs()};Vh.forModule=function(a,d){return this.forModuleId(a,d.id)};Vh.forModuleId=function(a,d){return(d=oe.classHolder.ModulePackageMapping.forSystem(a).getPackageURLForModuleId(d))?
oe.getPackage(a,d,!0):null};Vh.fromJSON=function(a,d){return(new oe.Package(a)).fromJSON(d)};Vh.prototype.setConfig=function(a){this._name=a.name;this.version=a.version;this.dependencies=a.dependencies||{};this.devDependencies=a.devDependencies||{};this.main=a.main||"index.js";this.systemjs=a.systemjs;this.lively=a.lively};Vh.prototype.toJSON=function(){var a=this.System,d=oe.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));d.url.startsWith(a.baseURL)&&
(d.url=d.url.slice(a.baseURL.length).replace(/^\//,""));return d};Vh.prototype.fromJSON=function(a){var d=this.System;this.url=a.url;this._name=a._name;this.version=a.version;this.map=a.map||{};this.main=a.main;this.dependencies=a.dependencies||{};this.devDependencies=a.devDependencies||{};this.systemjs=a.systemjs;this.lively=a.lively;oe.isURL(this.url)||(this.url=oe.join(d.baseURL,this.url));this.registerWithConfig();return this};Vh.prototype.asSpec=function(){return Object.assign({},oe.obj.select(this,
"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(a){return{name:a.id,deps:a.directRequirements().map(function(d){return d.id})}})})};Vh.prototype.path=function(){var a=this.System.baseURL;return 0===this.url.indexOf(a)?this.url.slice(a.length):this.url};Vh.prototype.modules=function(){var a=this.url,d=this.System;return oe.classHolder.ModulePackageMapping.forSystem(d).getModuleIdsForPackageURL(a).map(function(k){return oe.module(d,k)})};Vh.prototype.resources=
function(a,d){d=void 0===d?[".git","node_modules",".module_cache","lively.next-node_modules"]:d;var k=this,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return b=k,e=b.System,l=b.url,p=oe.Package.allPackageURLs(e),q=p.filter(function(C){return C!==l&&!l.startsWith(C)}),A.yield(oe.resource(l).dirList("infinity",{exclude:d}),2);u=A.yieldResult;w=u.filter(function(C){return!C.isDirectory()&&!q.some(function(D){return C.url.startsWith(D)})}).map(function(C){return C.url});
y=oe.arr.pluck(k.modules(),"id");a&&(w=w.filter(a));return A.return(w.map(function(C){var D=C.replace(l,"").replace(/^\//,"");return{isLoaded:y.includes(C),url:C,nameInPackage:D,package:k}}))})};Vh.prototype.hasResource=function(a){var d=this.url;return(a.startsWith(d)?oe.resource(a):oe.resource(d).join(a)).exists()};Vh.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};Vh.prototype.mergeWithConfig=function(a){var d=a=Object.assign({},a),k=d.name;d=d.map;k&&(delete a.name,
this._name=k);d&&(delete a.map,Object.assign(this.map,d));Object.assign(this,a);return this};Vh.prototype.addMapping=function(a,d){this.map[a]=d;var k={},b={};this.System.config({packages:(b[this.url]={map:(k[a]=d,k)},b)})};Vh.prototype.tryToLoadPackageConfig=function(){var a=this,d,k,b,e,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:d=a;k=d.System;b=d.url;e=b+"/package.json";l={};p={};k.config({meta:(l[e]={format:"json"},l),packages:(p[b]=
{meta:{"package.json":{format:"json"}}},p)});k.debug&&console.log("[lively.modules package reading config] %s",e);C.setCatchFinallyBlocks(2);if(q=k.get(e)){C.jumpTo(4);break}return C.yield(k.import(e),5);case 5:q=C.yieldResult;case 4:return u=q,w=[].concat($jscomp.arrayFromIterable(k.packageConfigPaths)),oe.arr.pushIfNotIncluded(w,e),k.config({packageConfigPaths:w}),C.return(u);case 2:return y=C.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",
e,y),delete k.meta[e],A=b.split("/").slice(-1)[0],C.return({name:A})}})};Vh.prototype.import=function(){var a=this,d,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(a.register(),2);case 2:return d=a,k=d.url,b=d.System,e=oe,l=e.module,p=b,w.yield(b.normalize(k),3);case 3:return q=l.call(e,p,w.yieldResult),w.yield(b.import(q.id),4);case 4:return u=w.yieldResult,w.yield(oe.promise.waitFor(1E3,function(){return q.isLoaded()}),5);
case 5:return w.return(u)}})};Vh.prototype.isRegistering=function(){return!!this.registerProcess};Vh.prototype.register=function(a){var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(d.isRegistering())return w.return(d.registerProcess.promise);k=d;b=k.System;e=k.url;d.registerProcess=oe.promise.deferred();l=d.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",e);w.setCatchFinallyBlocks(2,3);if(p=
a){w.jumpTo(5);break}return w.yield(d.tryToLoadPackageConfig(),6);case 6:p=w.yieldResult;case 5:q=p,d.registerWithConfig(q),d.registerProcess.resolve(q);case 3:w.enterFinallyBlock();delete d.registerProcess;w.leaveFinallyBlock(4);break;case 2:throw u=w.enterCatchBlock(),d.registerProcess.reject(u),u;case 4:return w.return(l)}})};Vh.prototype.updateConfig=function(a){a=Object.assign({},this.runtimeConfig,{},a);var d=this.name,k=this.version,b=a,e=b.name;b=b.version;(new oe.PackageConfiguration(this)).applyConfig(a);
if(d!==a.name||k!==a.version)console.log("[lively.modules] Updating registry "+d+"@"+k+" => "+e+"@"+b),oe.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,d,k,e,b)};Vh.prototype.registerWithConfig=function(a){a=void 0===a?this.runtimeConfig:a;var d=this.System,k=this.url,b=(new oe.PackageConfiguration(this)).applyConfig(a),e=oe.join(k,"package.json");d.get(e)||d.set(e,d.newModule(Object.assign({},a,{default:a})));oe.emit("lively.modules/packageregistered",{package:k},
Date.now(),d);return b};Vh.prototype.remove=function(a){a=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},a);var d=this.System,k=this.url;k=k.replace(/\/$/,"");a.unloadModules&&this.modules().forEach(function(q){return q.unload(a)});oe.classHolder.PackageRegistry.ofSystem(d).removePackage(this);var b=d.getConfig(),e=k+"/package.json";d.delete(String(e));oe.arr.remove(b.packageConfigPaths||[],e);var l={},p={};d.config({meta:(l[e]={},l),packages:(p[k]={},p),packageConfigPaths:b.packageConfigPaths});
delete d.packages[k];oe.emit("lively.modules/packageremoved",{package:this.url},Date.now(),d)};Vh.prototype.reload=function(a){var d=this.url,k=oe.classHolder.PackageRegistry.ofSystem(this.System),b=k.coversDirectory(d);this.remove(a);a={};k.addPackageAt(d,b||"devPackageDirs",(a[d]=this,a));return this.import()};Vh.prototype.fork=function(a,d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d||(d=oe.resource(k.url).join("../"+a).withRelativePartsResolved().url),
b.yield(k.changeAddress(d,a,!1),2)):b.return(b.yieldResult)})};Vh.prototype.rename=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=oe.resource(d.url).join("../"+a).withRelativePartsResolved().url,b.yield(d.changeAddress(k,a,!0),2)):b.return(b.yieldResult)})};Vh.prototype.changeAddress=function(a,d,k){d=void 0===d?null:d;k=void 0===k?!0:k;var b=this,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(db){switch(db.nextAddress){case 1:return a=
a.replace(/\/?/,""),e=b,l=e.System,p=e.url,db.yield(b.runtimeConfig,2);case 2:return q=db.yieldResult,u=oe.resource(p).asDirectory(),w=new oe.Package(l,a),db.yield(oe.resource(a).asDirectory(),3);case 3:return y=db.yieldResult,q.name=d||b.name,A=oe.classHolder.PackageRegistry.ofSystem(l),C=A.coversDirectory(p),oe.classHolder.ModulePackageMapping.forSystem(l).clearCache(),l.packages[p]&&(l.packages[a]=l.packages[p],k&&delete l.packages[p]),Object.assign(w,oe.obj.select(b,["_name","map","config"])),
db.yield(y.ensureExistance(),4);case 4:return db.yield(b.resources(void 0,[]),5);case 5:D=db.yieldResult.map(function(ub){return ub.url}),L=b.modules(),I=$jscomp.makeIterator(L),S=I.next();case 6:if(S.done){db.jumpTo(8);break}V=S.value;ba=y.join(V.pathInPackage()).url;return k?db.yield(V.renameTo(ba),10):db.yield(V.copyTo(ba),10);case 10:ua=D.indexOf(V.id);-1<ua&&D.splice(ua,1);S=I.next();db.jumpTo(6);break;case 8:Fa=$jscomp.makeIterator(D),F=Fa.next();case 13:if(F.done){if(!k){db.jumpTo(17);break}return db.yield(b.remove({forgetEnv:!0,
forgetDeps:!1}),18)}Y=F.value;Q=oe.resource(Y);W=Q.relativePathFrom(u);return db.yield(Q.copyTo(y.join(W)),14);case 14:F=Fa.next();db.jumpTo(13);break;case 18:return db.yield(u.remove(),17);case 17:if(!d){db.jumpTo(20);break}w.name=d;w.config.name=d;ka=oe.resource(a).join("package.json");db.setCatchFinallyBlocks(21);return db.yield(ka.exists(),23);case 23:if(!db.yieldResult){db.jumpTo(24);break}return db.yield(ka.readJson(),25);case 25:ea=db.yieldResult;if(ea.name!==b.name){db.jumpTo(26);break}ea.name=
d;return db.yield(ka.writeJson(ea,!0),26);case 26:(la=l.get(ka.url))&&l.set(ka.url,l.newModule(Object.assign({},la,{name:d})));case 24:db.leaveTryBlock(20);break;case 21:db.enterCatchBlock();case 20:return C=C||"individualPackageDirs","individualPackageDirs"!==C&&"devPackageDirs"!==C||A._addPackageDir(a,C,!0),A._addPackageWithConfig(w,q,a,C),A.resetByURL(),A._updateLatestPackages(),db.return(w)}})};Vh.prototype.search=function(a,d){d=void 0===d?{}:d;var k=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return d.includeUnloaded?l.yield(k.resources(function(p){return p.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=k.modules().filter(function(p){return p.isLoaded()}),l.jumpTo(2));2!=l.nextAddress&&(b=l.yieldResult.map(function(p){return oe.module(k.System,p.url)}));e=b;return l.return(Promise.all(e.map(function(p){return p.search(a,d).catch(function(q){console.error("Error searching module "+p.name+":\n"+q.stack);return[]})})).then(function(p){return oe.arr.flatten(p,
1)}))})};$jscomp.global.Object.defineProperties(Vh.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var a=this.System.get(this.url+"/package.json");return a&&a.name?a.name:oe.arr.last(this.url.replace(/[\/]+$/,"").split("/"))},set:function(a){return this._name=a}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,
get:function(){return this.url},set:function(a){return this.url=a}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var a=this.main,d=this.systemjs,k=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};a&&(b.main=a);d&&(b.systemjs=d);k&&(b.lively=k);return b}}});oe.Package=Vh;oe.ensurePackage=vF;oe.ensurePackage=vF;oe.importPackage=xF;oe.importPackage=xF;oe.removePackage=yF;oe.removePackage=yF;oe.reloadPackage=
zF;oe.reloadPackage=zF;oe.registerPackage=AF;oe.registerPackage=AF;oe.getPackage=fA;oe.getPackage=fA;oe.lookupPackage=uF;oe.lookupPackage=uF;oe.applyConfig=wF;oe.applyConfig=wF;oe.getPackageSpecs=BF;oe.getPackageSpecs=BF;oe.Package=Vh;oe.Package=Vh;var Mc=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");Mc.isFunctionNode=function(a){return"ArrowFunctionExpression"===a.type||"FunctionExpression"===a.type||"FunctionDeclaration"===a.type};Mc.ensureIdentifier=function(a){return a.replace(Mc.firstIdRe,
"_").replace(Mc.trailingIdRe,"_")};Mc.constructorTemplate=function(a){return Mc.funcExpr({id:a?Mc.id(a):null},["__first_arg__"],Mc.ifStmt(Mc.binaryExpr(Mc.id("__first_arg__"),"&&",Mc.member("__first_arg__",Mc.funcCall(Mc.member("Symbol","for"),Mc.literal("lively-instance-restorer")),!0)),Mc.block(),Mc.block(Mc.exprStmt(Mc.funcCall(Mc.member(Mc.member("this",Mc.funcCall(Mc.member("Symbol","for"),Mc.literal("lively-instance-initialize")),!0),"apply"),Mc.id("this"),Mc.id("arguments"))))))};Mc.replaceSuper=
function(a,d,k,b){console.assert("Super"===a.type);(d=d.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+Mc.stringify(a)+" in "+k.join("."));b=$jscomp.makeIterator(k.slice(-2));k=b.next().value;b=b.next().value;return"callee"===k&&"object"===b||"callee"===b?a:d&&"static"===d[Mc.methodKindSymbol]?Mc.funcCall(Mc.member("Object","getPrototypeOf"),Mc.id(Mc.tempLivelyClassVar)):Mc.funcCall(Mc.member("Object","getPrototypeOf"),Mc.member(Mc.id(Mc.tempLivelyClassVar),
"prototype"))};Mc.replaceSuperMethodCall=function(a,d,k,b){console.assert("CallExpression"===a.type);console.assert("Super"===a.callee.object.type);return Mc.funcCall.apply(Mc,[Mc.member(Mc.funcCall(Mc.member(b.functionNode,"_get"),Mc.replaceSuper(a.callee.object,d,k.concat(["callee","object"]),b),Mc.literal(a.callee.property.value||a.callee.property.name),Mc.id("this")),"call"),Mc.id("this")].concat($jscomp.arrayFromIterable(a.arguments)))};Mc.replaceDirectSuperCall=function(a,d,k,b){console.assert("CallExpression"===
a.type);console.assert("Super"===a.callee.type);return Mc.funcCall.apply(Mc,[Mc.member(Mc.funcCall(Mc.member(b.functionNode,"_get"),Mc.replaceSuper(a.callee,d,k.concat(["callee"]),b),Mc.funcCall(Mc.member("Symbol","for"),Mc.literal("lively-instance-initialize")),Mc.id("this")),"call"),Mc.id("this")].concat($jscomp.arrayFromIterable(a.arguments)))};Mc.replaceSuperGetter=function(a,d,k,b){console.assert("MemberExpression"===a.type);console.assert("Super"===a.object.type);return Mc.funcCall(Mc.member(b.functionNode,
"_get"),Mc.replaceSuper(a.object,d,k.concat(["object"]),b),Mc.literal(a.property.value||a.property.name),Mc.id("this"))};Mc.replaceSuperSetter=function(a,d,k,b){console.assert("AssignmentExpression"===a.type);console.assert("Super"===a.left.object.type);return Mc.funcCall(Mc.member(b.functionNode,"_set"),Mc.replaceSuper(a.left.object,d,k.concat(["left","object"]),b),Mc.literal(a.left.property.value||a.left.property.name),a.right,Mc.id("this"))};Mc.replaceClass=function(a,d,k,b){console.assert("ClassDeclaration"===
a.type||"ClassExpression"===a.type);var e=a.body.body,l=a.superClass;k=a.id;var p=a.type,q=a.start,u=a.end,w=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,y=Mc.id("undefined"),A=Mc.id("undefined"),C=k?k.name:"anonymous_class",D=b.evalId,L=b.sourceAccessorName;a=a["x-lively-object-meta"]||{start:q,end:u};w=e.reduce(function(ba,ua){var Fa=ua.key,F=ua.kind,Y=ua.value,Q=ua.static;"Literal"!==Fa.type&&"Identifier"!==Fa.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(Fa));
if("method"===F){F=Mc.id(C+"_"+Mc.ensureIdentifier(Fa.name||Fa.value||Mc.Path("property.name").get(Fa))+"_");ua={};Y=["key",Mc.literal(Fa.name||Fa.value||Mc.Path("property.name").get(Fa)),"value",Object.assign({},Y,(ua.id=F,ua[Mc.methodKindSymbol]=Q?"static":"proto",ua))];var W=Mc.objectLiteral(Y)}else"get"===F||"set"===F?(ua={},W=Mc.objectLiteral(["key",Mc.literal(Fa.name||Fa.value||Mc.Path("property.name").get(Fa)),F,Object.assign({},Y,(ua.id=Mc.id(F),ua[Mc.methodKindSymbol]=Q?"static":"proto",
ua))])):"constructor"===F?(Fa={},Y=["key",Mc.funcCall(Mc.member("Symbol","for"),Mc.literal("lively-instance-initialize")),"value",Object.assign({},Y,(Fa.id=Mc.id(C+"_initialize_"),Fa[Mc.methodKindSymbol]="proto",Fa))],W=Mc.objectLiteral(Y)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+F+", ignoring it, "+JSON.stringify(ua));(Q?ba.clazz:ba.inst).push(W);return ba},{inst:[],clazz:w?[Mc.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+
C+'"; } })').body[0].expression]:[]});e=w.inst;w=w.clazz;e.length&&(y={type:"ArrayExpression",elements:e});w.length&&(A={type:"ArrayExpression",elements:w});e=b.scope;if(l&&b.currentModuleAccessor)if(b.classHolder===l.object){var I=l;var S=l.property.name}else{var V=e&&e.resolvedRefMap&&e.resolvedRefMap.get(l);V&&V.decl&&e.decls&&e.decls.find(function(ba){return $jscomp.makeIterator(ba).next().value===V.decl})&&(I=l,S=l.name)}S=I?Mc.objectLiteral(["referencedAs",Mc.literal(S),"value",I]):l||Mc.id("undefined");
I=k&&"ClassDeclaration"===p;l=["start",Mc.literal(a.start),"end",Mc.literal(a.end)];"undefined"!==typeof D&&l.push("evalId",Mc.literal(D));L&&l.push("moduleSource",Mc.nodes.id(L));D=Mc.objectLiteral(l);y=Mc.funcCall(Mc.funcExpr({},["superclass"],Mc.varDecl(Mc.tempLivelyClassHolderVar,d.classHolder),Mc.varDecl(Mc.tempLivelyClassVar,I?{type:"ConditionalExpression",test:Mc.binaryExpr(Mc.funcCall(Mc.member(Mc.tempLivelyClassHolderVar,"hasOwnProperty"),Mc.literal(k.name)),"&&",Mc.binaryExpr({argument:Mc.member(Mc.tempLivelyClassHolderVar,
k),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",Mc.literal("function"))),consequent:Mc.member(Mc.tempLivelyClassHolderVar,k),alternate:Mc.assign(Mc.member(Mc.tempLivelyClassHolderVar,k),Mc.constructorTemplate(k.name))}:k?Mc.constructorTemplate(k.name):Mc.constructorTemplate(null)),Mc.returnStmt(Mc.funcCall(b.functionNode,Mc.id(Mc.tempLivelyClassVar),Mc.id("superclass"),y,A,Mc.id(Mc.tempLivelyClassHolderVar),b.currentModuleAccessor||Mc.id("undefined"),D))),S);if("ClassExpression"===p)return y;
p=y;b.declarationWrapper&&d.classHolder===b.classHolder&&(p=Mc.funcCall(b.declarationWrapper,Mc.literal(k.name),Mc.literal("class"),p,b.classHolder,D));p=Mc.varDecl(k,p,"var");p[Mc.isTransformedClassVarDeclSymbol]=!0;return p};Mc.splitExportDefaultWithClass=function(a,d,k,b){return a.declaration&&a.declaration[Mc.isTransformedClassVarDeclSymbol]?[a.declaration,{declaration:a.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:a};Mc.classToFunctionTransform=zq;Mc.arr=Ne;Mc.Path=Sg;Mc.parse=
Ej;Mc.stringify=Dj;Mc.query=wo;Mc.nodes=Hq;Mc.Visitor=Md;var Rm=Mc.nodes;Mc.assign=Rm.assign;Mc.member=Rm.member;Mc.id=Rm.id;Mc.exprStmt=Rm.exprStmt;Mc.funcCall=Rm.funcCall;Mc.literal=Rm.literal;Mc.objectLiteral=Rm.objectLiteral;Mc.varDecl=Rm.varDecl;Mc.funcExpr=Rm.funcExpr;Mc.returnStmt=Rm.returnStmt;Mc.binaryExpr=Rm.binaryExpr;Mc.ifStmt=Rm.ifStmt;Mc.block=Rm.block;Mc.firstIdRe=/^[^_a-z]/i;Mc.trailingIdRe=/[^_a-z0-9]/ig;Mc.isTransformedClassVarDeclSymbol=Symbol();Mc.methodKindSymbol=Symbol();Mc.tempLivelyClassVar=
"__lively_class__";Mc.tempLivelyClassHolderVar="__lively_classholder__";var eJ=function(){return Mc.Visitor.apply(this,arguments)||this};$jscomp.inherits(eJ,Mc.Visitor);eJ.prototype.accept=function(a,d,k){Mc.isFunctionNode(a)&&(d=Object.assign({},d,{classHolder:Mc.objectLiteral([]),currentMethod:a[Mc.methodKindSymbol]?a:d.currentMethod}));if("ClassExpression"===a.type||"ClassDeclaration"===a.type)a=Mc.replaceClass(a,d,k,d.options);"Super"===a.type&&(a=Mc.replaceSuper(a,d,k,d.options));"MemberExpression"===
a.type&&a.object&&"Super"===a.object.type&&(a=Mc.replaceSuperGetter(a,d,k,d.options));"AssignmentExpression"===a.type&&"MemberExpression"===a.left.type&&"Super"===a.left.object.type&&(a=Mc.replaceSuperSetter(a,d,k,d.options));"CallExpression"===a.type&&"Super"===a.callee.type&&(a=Mc.replaceDirectSuperCall(a,d,k,d.options));"CallExpression"===a.type&&a.callee.object&&"Super"===a.callee.object.type&&(a=Mc.replaceSuperMethodCall(a,d,k,d.options));a=Mc.Visitor.prototype.accept.call(this,a,d,k);return"ExportDefaultDeclaration"===
a.type?Mc.splitExportDefaultWithClass(a,d,k,d.options):a};eJ.run=function(a,d){var k=new this,b=d.classHolder||Mc.objectLiteral([]);return k.accept(a,{options:d,classHolder:b},[])};Mc.ClassReplaceVisitor=eJ;Mc.classToFunctionTransform=zq;Mc.classToFunctionTransform=zq;var Ux=lively.FreezerRuntime.recorderFor("lively.classes/index.js");Ux.runtime=Ax;Ux.classToFunctionTransform=zq;Ux.runtime=Ax;Ux.runtime=Ax;Ux.classToFunctionTransform=zq;Ux.classToFunctionTransform=zq;var z5=Object.freeze({__proto__:null,
runtime:Ax,classToFunctionTransform:zq});Ia("a$",z5);var $h=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");$h.arr=Ne;$h.Path=Sg;$h.fuzzyParse=aq;$h.query=wo;$h.stringify=Dj;$h.resource=sc;var Np=function(a,d,k,b,e,l,p){this.System=a;this.intoModuleId=d;this.intoPackage=k;this.intoModuleSource=b;this.fromModuleId=e.moduleId;this.importData=e;this.alias=l;this.parsed=p||$h.fuzzyParse(b)};Np.run=function(a,d,k,b,e,l,p){return(new this(a,d,k,b,e,l,p)).run()};Np.prototype.run=
function(){var a=this.generateImportStatement(),d=a.standaloneImport,k=a.importedVarName,b=this.existingImportsOfFromModule(),e=b.imports,l=b.importsOfFromModule;b=b.importsOfVar;l=this.importsToBeReused(l,b,a);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:d,from:b[0].start,to:b[0].end};if(l.length&&(a=this.modifyExistingImport(l,d)))return a;e=$h.arr.last(e);return this.insertNewImport(l,d,k,e?e.end:0)};Np.prototype.importsToBeReused=
function(a,d,k){k.isDefault&&(a=a.filter(function(b){return!b.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));return a};Np.prototype.generateImportStatement=function(){var a=this.intoModuleId,d=this.fromModuleId,k=this.importData,b=this.intoPackage,e="default"===k.exported,l=this.alias||(e?k.local:k.exported),p=!e&&k.exported!==l;b=b&&b.name;var q=d,u=k.packageName,w=k.pathInPackage;if(k.isMain)q=u;else if(b===u)try{q=$h.resource(d).relativePathFrom($h.resource(a)),q.startsWith(".")||
(q="./"+q)}catch(y){u&&"no group"!==u&&w&&(q=u+"/"+w)}else u&&"no group"!==u&&w&&(q=u+"/"+w);return{isDefault:e,standaloneImport:e?"import "+l+' from "'+q+'";':"import { "+k.exported+(p?" as "+l:"")+' } from "'+q+'";',importedVarName:l}};Np.prototype.existingImportsOfFromModule=function(){var a=this.System,d=this.fromModuleId,k=this.intoModuleId,b=this.importData,e=b.exported,l=b.local,p=this.alias,q="default"===e;b=this.parsed.body.filter(function(w){return"ImportDeclaration"===w.type});var u=q?
p||l:p||e;l=b.filter(function(w){if(!w.source||"string"!==typeof w.source.value)return null;w=a.decanonicalize(w.source.value,k);return d===w});p=l.filter(function(w){return(w.specifiers||[]).some(function(y){return q?"ImportDefaultSpecifier"===y.type&&y.local.name===u:$h.Path("imported.name").get(y)===e&&$h.Path("local.name").get(y)===u})});return{imports:b,importsOfFromModule:l,importsOfVar:p}};Np.prototype.modifyExistingImport=function(a,d){a=$h.arr.flatmap(a,function(u){return u.specifiers||[]});
if(!a.length)return null;a=$jscomp.makeIterator($h.arr.partition(a,function(u){return"ImportDefaultSpecifier"===u.type}));var k=$jscomp.makeIterator(a.next().value).next().value,b=$jscomp.makeIterator(a.next().value).next().value;a=this.alias;var e=this.intoModuleSource,l=this.importData,p=l.exported;l=l.local;var q="default"===p;q?console.assert(!!b,"no ImportSpecifier found"):console.assert(b||k,"at least one kine of specifier is expected");if(q){k=e.slice(0,b.start).lastIndexOf("{")-1;if(0>k)return null;
b=(a||l)+",";p=e.slice(0,k);e=e.slice(k);p.endsWith(" ")&&p.endsWith("\n")||(b=" "+b);e.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+p+b+e,generated:b,standaloneImport:d,importedVarName:a||l,from:k,to:k+b.length}}k=b?b.end:k.end;q=(l=a&&a!==p)?p+" as "+a:p;b=b?", "+q:", { "+q+" }";return{status:"modified",newSource:""+e.slice(0,k)+b+e.slice(k),generated:b,standaloneImport:d,importedVarName:l?a:p,from:k,to:k+b.length}};Np.prototype.insertNewImport=function(a,d,k,b){b=void 0===b?
0:b;a&&a.length&&(b=$h.arr.last(a).end);var e=this.intoModuleSource;a=e.slice(0,b);e=e.slice(b);var l=d;a.length&&!a.endsWith("\n")&&(l="\n"+l);e.length&&!e.startsWith("\n")&&(l+="\n");return{status:"modified",newSource:a+l+e,generated:l,standaloneImport:d,importedVarName:k,from:b,to:b+l.length}};$h.ImportInjector=Np;var fJ=function(){};fJ.getGlobals=function(a,d){a=d||$h.fuzzyParse(a,{withComments:!0});d=(d=a.comments?a.comments.find(function(b){return b.isBlock&&b.text.startsWith("global")}):null)?
d.text.replace(/^global\s*/,"").split(",").map(function(b){return b.trim()}).filter(Boolean):[];var k=[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable($h.query.knownGlobals));a=$h.query.findGlobalVarRefs(a,{jslintGlobalComment:!0}).filter(function(b){return!k.includes(b.name)}).map(function(b){return b.name});return $h.arr.compact([].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(a)))};fJ.run=function(a,d,k){k=k||$h.fuzzyParse(a,{withComments:!0});var b=(k=k.comments?
k.comments.find(function(l){return l.isBlock&&l.text.startsWith("global")}):null)?k.text.replace(/^global\s*/,"").split(",").map(function(l){return l.trim()}).filter(Boolean):[],e=d.filter(function(l){return!b.includes(l)});if(!e.length)return{status:"not modified",newSource:a,generated:"",from:0,to:0};if(!k)return k="/*global "+e.join(",")+"*/\n",{status:"modified",newSource:k+a,generated:k,from:0,to:k.length};d=k.start+2+k.text.length;e=e.join(",");b.length?e=","+e:k.text.startsWith("global ")||
(e=" "+e);k=d+e.length;return{status:"modified",newSource:a.slice(0,d)+e+a.slice(d),generated:e,from:d,to:k}};$h.GlobalInjector=fJ;var LB=function(){};LB.removeImports=function(a,d,k){k=k||$h.fuzzyParse(a);var b=$h.arr.flatmap(k.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,importStmt:e}}):[]}).filter(function(e){return d.some(function(l){return l.local===e.local.name})});k=b.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});
a=$h.arr.uniq(b.map(function(e){var l=e.importStmt.specifiers.find(function(p){return e.local===p.local});$h.arr.remove(e.importStmt.specifiers,l);return e.importStmt})).slice().reverse().reduce(function(e,l){var p=e.source;e=e.changes;var q=l.start,u=l.end,w=l.specifiers,y=p.slice(0,q),A=p.slice(u);p=p.slice(q,u);(l=w.length?$h.stringify(l):"")&&l.includes("\n")&&!p.includes("\n")&&(l=l.replace(/\s+/g," "));p=y+l+A;e=e.concat({replacement:l,start:q,end:u});return{source:p,changes:e}},{source:a,changes:[]});
return Object.assign({},a,{removedImports:k})};LB.findUnusedImports=function(a){var d="string"===typeof a?$h.fuzzyParse(a):a;a=$h.arr.flatmap(d.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,from:e.source?e.source.value:"",importStmt:e}}):[]});var k=a.map(function(e){return e.local});d=$h.query.resolveReferences($h.query.scopes(d));d=Array.from(d.resolvedRefMap.keys()).filter(function(e){return!k.includes(e)});var b=$h.arr.uniq(d.map(function(e){return e.name}));
return a.filter(function(e){return!b.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};LB.removeUnusedImports=function(a){var d=$h.fuzzyParse(a);return this.removeImports(a,this.findUnusedImports(d),d)};$h.ImportRemover=LB;var Il=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");Il.ensureParent=function(a,d,k){if(k)return k;k=a.id;var b=a.System;d=k.startsWith("file://")?k.replace("file://",""):k;if(k=b._nodeRequire("module").Module._cache[k])return k;
k={id:d,filename:d,paths:[]};(a=a.package())&&k.paths.push(Il.resource(a.url).join("node_modules/").path());return k};Il.relative=function(a,d){return Il.resource(a.id).parent().join(d).url.replace("file://","")};Il._require=CF;Il._resolve=DF;Il.resource=sc;Il._require=CF;Il._require=CF;Il._resolve=DF;Il._resolve=DF;var me=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");me.module=mu;me.isModuleLoaded=EF;me.doesModuleExist=FF;me.arr=Ne;me.obj=ff;me.graph=Cq;me.parse=Ej;me.query=wo;
me.computeRequireMap=cA;me.moduleSourceChange=eA;me.scheduleModuleExportsChange=dA;me.runScheduledExportChanges=sF;me.livelySystemEnv=MF;me.Package=Vh;me.isURL=lu;me.emit=bq;me.subscribe=Uy;me.defaultClassToFunctionConverterName="initializeES6ClassForLively";me.classRuntime=Ax;me.ImportInjector=Np;me.GlobalInjector=fJ;me.ImportRemover=LB;me._require=CF;me._resolve=DF;me.classHolder=Rq;var gJ=function(){var a=/['"]format (esm|es6)['"];/,d=/['"]format cjs['"];/,k=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;
return function(b,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):a.test(b.slice(0,5E3))||!d.test(b.slice(0,5E3))&&k.test(b)?"esm":d.test(b.slice(0,5E3))?"cjs":"global"}}();me.detectModuleFormat=gJ;me.detectModuleFormat=gJ;me.detectModuleFormat=gJ;me.classHolder.module=me.module;me.isModuleLoaded=EF;me.isModuleLoaded=EF;me.doesModuleExist=FF;me.doesModuleExist=FF;me.globalProps={initialized:!1,descriptors:{}};var vf=function(a,d){var k=this;if(!me.isURL(d)&&!/^@/.test(d))throw Error("ModuleInterface constructor called with "+
d+" that does not seem to be a fully normalized module id.");this.System=a;this.id=d;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;me.subscribe("lively.modules/modulechanged",function(b){b.module===k.id&&k.reset()})};vf.prototype.fullName=function(){return this.id};vf.prototype.shortName=function(){return this.package().name+
"/"+this.pathInPackage()};vf.prototype.source=function(){var a=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(d){return a._source=d})};vf.prototype.setSource=function(a){this.sourceAccessorName&&this.recorderName&&a.includes("var "+this.recorderName)&&a.includes("var "+this.sourceAccessorName)||this._source===a||(this.reset(),this._source=a)};vf.prototype.ast=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress){if(a._ast)return e.return(a._ast);d=a;k=me;b=k.parse;return e.yield(a.source(),2)}return e.return(d._ast=b.call(k,e.yieldResult))})};vf.prototype.scope=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return a._scope?k.return(a._scope):k.yield(a.ast(),2);d=k.yieldResult;return k.return(a._scope=me.query.topLevelDeclsAndRefs(d).scope)})};vf.prototype.resolvedScope=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(d=a,k=me.query,b=k.resolveReferences,e.yield(a.scope(),2)):e.return(d._scope=b.call(k,e.yieldResult))})};vf.prototype.metadata=function(){var a=this.System.loads?this.System.loads[this.id]:null;return a?a.metadata:null};vf.prototype.addMetadata=function(a){var d=this.System,k=this.id,b=this.metadata();a=b?Object.assign(b,a):a;b={};d.config({meta:(b[k]=a,b)});return d.meta[k]};vf.prototype.format=function(){var a=this.metadata();return a&&a.format?a.format:this._source?me.detectModuleFormat(this._source):
"global"};vf.prototype.setFormat=function(a){return this.addMetadata({format:a})};vf.prototype.reset=function(){this._scope=this._ast=this._source=null};vf.prototype.get=function(){return this.System.get(this.id)};vf.prototype.load=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return k=d,b=k.id,e=k.System,a&&d.addMetadata(a),(l=e.get(b))?p.jumpTo(2):p.yield(e.import(b),3);2!=p.nextAddress&&(l=p.yieldResult);return p.return(l)})};
vf.prototype.isLoaded=function(){return!!this.System.get(this.id)};vf.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=[];delete me.livelySystemEnv(this.System).loadedModules[this.id]};vf.prototype.unloadDeps=function(a){var d=this;a=me.obj.merge({forgetDeps:!0,forgetEnv:!0},a);this.dependents().forEach(function(k){d.System.delete(k.id);d.System.loads&&delete d.System.loads[k.id];a.forgetEnv&&k.unloadEnv()})};vf.prototype.unload=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==
p.nextAddress)return a=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},a),k=d,b=k.System,e=k.id,a.reset&&d.reset(),a.forgetDeps&&d.unloadDeps(a),d.System.delete(e),b.loads&&delete b.loads[e],b.meta&&delete b.meta[e],a.forgetEnv&&d.unloadEnv(),(l=b._livelyModulesTranslationCache)?p.yield(l.deleteCachedData(e),2):p.jumpTo(2);me.emit("lively.modules/moduleunloaded",{module:d.id},Date.now(),d.System);p.jumpToEnd()})};vf.prototype.reload=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==
b.nextAddress?(a=me.obj.merge({reloadDeps:!0,resetEnv:!0},a),k=[d],a.reloadDeps&&(k=d.dependents().concat(k)),b.yield(d.unload({forgetDeps:a.reloadDeps,forgetEnv:a.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(k.map(function(e){return e.id!==d.id&&e.load()})),3):b.yield(d.load(),0)})};vf.prototype.copyTo=function(a){var d=this,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return k=d.System.resource(a),b=k.write,u.yield(d.source(),3);if(2!=u.nextAddress)return u.yield(b.call(k,
u.yieldResult),2);e=d;l=e.System;p=me.module(l,a);q=me.obj.select(d,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(p,q);l.set(a,l.newModule(l.get(d.id)));return u.return(p)})};vf.prototype.renameTo=function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return b=d,e=void 0===b.unload?!0:b.unload,l=void 0===b.removeFile?!0:b.removeFile,q.yield(k.copyTo(a),
2);case 2:p=q.yieldResult;if(!e){q.jumpTo(3);break}return q.yield(k.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!l){q.jumpTo(5);break}return q.yield(k.System.resource(k.id).remove(),5);case 5:return q.return(p)}})};vf.prototype.whenLoaded=function(a){if(this.isLoaded())try{a(this)}catch(d){console.error(d)}else me.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:a})};vf.prototype.changeSourceAction=function(a){var d=this;return Promise.resolve(this.source()).then(function(k){return a(k)}).then(function(k){return d.changeSource(k)})};
vf.prototype.changeSource=function(a,d){d=Object.assign({doSave:!0,doEval:!0},d);var k=this.System,b=this.id,e=this.format(),l;this.reset();this.lastModifiedAt=new Date;return Promise.all([d.doSave&&this.System.resource(b).write(a),d.doEval&&me.moduleSourceChange(k,b,a,e,d).then(function(p){return l=p})]).then(function(){return l})};vf.prototype.addDependencyToModuleRecord=function(a,d){var k=this;d=void 0===d?function(){}:d;var b=this.record(),e=a.record();if(b&&e){var l,p=b.dependencies.some(function(u,
w){if(u)return l=w,u&&u.name===a.id});p?e!==b.dependencies[l]&&b.dependencies.splice(l,1,e):b.dependencies.push(e);p&&b.setters[l]||(b.setters[p?l:b.dependencies.length-1]=d);var q;e.importers.some(function(u,w){if(u)return q=w,u&&u.name===k.id})?b!==e.importers[q]&&e.importers.splice(q,1,b):e.importers.push(b)}};vf.prototype.dependents=function(){var a=this;return me.graph.hull(me.graph.invert(me.computeRequireMap(this.System)),this.id).map(function(d){return me.module(a.System,d)})};vf.prototype.requirements=
function(){var a=this;return me.graph.hull(me.computeRequireMap(this.System),this.id).map(function(d){return me.module(a.System,d)})};vf.prototype.directRequirements=function(){var a=this,d=(this.record()||{}).dependencies||[];return me.arr.pluck(d.filter(Boolean),"name").map(function(k){return me.module(a.System,k)})};vf.prototype.isMochaTest=function(){if(!this._source)return!1;var a=this._scope||(this._scope=me.query.topLevelDeclsAndRefs(me.parse(this._source)).scope);return me.query.imports(a).map(function(d){return d.fromModule}).some(function(d){return d.endsWith("mocha-es6")||
d.endsWith("mocha-es6/index.js")})?!0:!1};vf.prototype.define=function(a,d,k,b){k=void 0===k?!0:k;var e=this.System,l=this.id,p=this.recorder,q=Symbol.for("lively-object-meta"),u=Symbol.for("lively-module-meta");"function"!==typeof d||!b||"function"!==b.kind&&"class"!==b.kind||(d[q]=b);d&&d[q]&&!d[u]&&(b=this.pathInPackage(),q=this.package(),d[u]={package:q?{name:q.name,version:q.version}:{},pathInPackage:b});p[a]=d;me.scheduleModuleExportsChange(e,l,a,d,!1);this.notifyTopLevelObservers(a);(k=k||
!this.isEvalutionInProgress())&&me.runScheduledExportChanges(e,l);return d};vf.prototype.undefine=function(a){delete this.recorder[a]};vf.prototype.subscribeToToplevelDefinitionChanges=function(a){this._observersOfTopLevelState.push(a);return a};vf.prototype.notifyTopLevelObservers=function(a){var d=this.recorder;me.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],a)||this._observersOfTopLevelState.forEach(function(k){return k(a,d[a])})};vf.prototype.unsubscribeFromToplevelDefinitionChanges=
function(a){this._observersOfTopLevelState="string"===typeof a?this._observersOfTopLevelState.filter(function(d){return d.name!==a}):this._observersOfTopLevelState.filter(function(d){return d!==a})};vf.prototype.evaluationStart=function(){this._evaluationsInProgress++};vf.prototype.evaluationEnd=function(){this._evaluationsInProgress--;me.runScheduledExportChanges(this.System,this.id)};vf.prototype.nextEvalId=function(){return this._evalId++};vf.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};vf.prototype.env=function(){return this};vf.prototype.package=function(){return me.Package.forModule(this.System,this)};vf.prototype.pathInPackage=function(){var a=this.package();return a&&0===this.id.indexOf(a.address)?this.id.slice(a.address.length).replace(/^\//,""):this.id};vf.prototype.imports=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=me.query,k=d.imports,b.yield(a.scope(),2)):b.return(k.call(d,
b.yieldResult))})};vf.prototype.exports=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=me.query,k=d.exports,b.yield(a.scope(),2)):b.return(k.call(d,b.yieldResult))})};vf.prototype.addImports=function(a){var d=this,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(d.source(),2);k=A.yieldResult;b=$jscomp.makeIterator(a);for(e=b.next();!e.done;e=b.next())l=e.value,p=
me.module(d.System,l.from||l.moduleId),q=p.package(),u={exported:l.exported||l.local,moduleId:p.id,packageName:q.name,packageURL:q.url,pathInPackage:p.pathInPackage()},w=l.local,y=me.ImportInjector.run(d.System,d.id,d.package(),k,u,w),k=y.newSource;return A.yield(d.changeSource(k),0)})};vf.prototype.addGlobalDeclaration=function(a){var d=this,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?q.yield(d.source(),2):3!=q.nextAddress?(k=q.yieldResult,b=me.GlobalInjector.run(k,
a),e=b.status,l=b.newSource,(p="modified"===e)?q.yield(d.changeSource(l),3):q.jumpTo(3)):q.return(p)})};vf.prototype.removeImports=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return a.length?p.yield(d.source(),2):p.return();case 2:return k=p.yieldResult,p.yield(me.ImportRemover.removeImports(k,a),3);case 3:return b=p.yieldResult,e=b.source,l=b.removedImports,p.yield(d.changeSource(e),4);case 4:l.forEach(function(q){return delete d.recorder[q.local]}),
p.jumpToEnd()}})};vf.prototype._localDeclForRefAt=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(d.resolvedScope(),2);k=e.yieldResult;b=me.query.refWithDeclAt(a,k);return e.return(b&&{decl:b.decl,id:b.declId,declModule:d})})};vf.prototype._localDeclForName=function(a){var d=this,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(d.resolvedScope(),2);k=y.yieldResult;
e=$jscomp.makeIterator(k.resolvedRefMap.values());for(l=e.next();!l.done;l=e.next())if(q=p=l.value,u=q.ref,w=u.name,a===w){b=p;break}return y.return(b&&{decl:b.decl,id:b.declId,declModule:d})})};vf.prototype._importForNSRefAt=function(a){var d=this,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return A.yield(d.resolvedScope(),2);k=A.yieldResult;b=k.node;e=me.query.nodesAtIndex(b,a);if(2>e.length)return A.return([null,null]);l=e[e.length-1];p=
e[e.length-2];if("Identifier"!=l.type||"MemberExpression"!=p.type||p.computed||"Identifier"!==p.object.type)return A.return([null,null]);q=k.resolvedRefMap.get(p.object)||{};u=q.decl;if(!u||"ImportDeclaration"!==u.type)return A.return([null,null]);w=p.object.name;y=u.specifiers.find(function(C){return C.local.name===w});return A.return("ImportNamespaceSpecifier"!==y.type?[null,null]:[u,y.local,l.name])})};vf.prototype._resolveImportedDecl=function(a){var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(!a)return w.return([]);
k=a.id;b=k.name;return w.yield(d.imports(),2);case 2:e=w.yieldResult;l=e.find(function(y){return y.local==b});if(!l){w.jumpTo(3);break}p=me.module(d.System,l.fromModule,d.id);q=[a];u=q.concat;return w.yield(p.bindingPathForExport(l.imported),4);case 4:return w.return(u.call(q,w.yieldResult));case 3:return w.return([a])}})};vf.prototype.bindingPathFor=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(d._localDeclForName(a),2):4!=
b.nextAddress?(k=b.yieldResult)?b.yield(d._resolveImportedDecl(k),4):b.jumpTo(0):b.return(b.yieldResult)})};vf.prototype.bindingPathForExport=function(a){var d=this,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return u.yield(d.resolvedScope(),2);case 2:return u.yield(d.exports(),3);case 3:k=u.yieldResult;b=k.find(function(w){return w.exported===a});if(!b.fromModule)return u.return(d._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?d:null}));e=me.module(d.System,b.fromModule,d.id);l={decl:b.node,id:b.declId,declModule:d};p=[l];q=p.concat;return u.yield(e.bindingPathForExport(b.imported),5);case 5:return u.return(q.call(p,u.yieldResult))}})};vf.prototype.bindingPathForRefAt=function(a){var d=this,k,b,e,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:return C.yield(d._localDeclForRefAt(a),2);case 2:k=C.yieldResult;if(!k){C.jumpTo(3);break}return C.yield(d._resolveImportedDecl(k),
4);case 4:return C.return(C.yieldResult);case 3:return b=$jscomp,e=b.makeIterator,C.yield(d._importForNSRefAt(a),5);case 5:l=e.call(b,C.yieldResult);p=l.next().value;q=l.next().value;u=l.next().value;if(!p)return C.return([]);w=me.module(d.System,p.source.value,d.id);y=[{decl:p,declModule:d,id:q}];A=y.concat;return C.yield(w.bindingPathForExport(u),6);case 6:return C.return(A.call(y,C.yieldResult))}})};vf.prototype.definitionForRefAt=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(d.bindingPathForRefAt(a),2);k=b.yieldResult;return b.return(1>k.length?null:k[k.length-1].decl)})};vf.prototype.ensureRecord=function(){var a=this.System,d=a._loader.moduleRecords;return d[this.id]?d[this.id]:d[this.id]={name:this.id,exports:a.newModule({}),dependencies:[],importers:[],setters:[]}};vf.prototype.record=function(){var a=this.System._loader.moduleRecords[this.id];if(!a)return null;a.hasOwnProperty("__lively_modules__")||(a.__lively_modules__={evalOnlyExport:{}});
return a};vf.prototype.updateRecord=function(a){var d=this.record();if(!d)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");d.locked=!0;try{return a(d)}finally{d.locked=!1}};vf.prototype.search=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,D,L,I,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){if(1==V.nextAddress)return d=Object.assign({excludedModules:[]},d),d.excludedModules.some(function(ba){return"string"===typeof ba?ba===k.id:ba instanceof
RegExp?ba.test(k.id):"function"===typeof ba?ba(k.id):!1})?V.return([]):V.yield(k.source(),2);b=V.yieldResult;a instanceof RegExp?(l="g",a.ignoreCase&&(l+="i"),a.multiline&&(l+="m"),e=RegExp(a.source,l)):e=RegExp(a,"g");for(q=[];null!==(p=e.exec(b));)q.push([p.index,p[0].length]);w=u=0;y=1;for(A=0;u<b.length&&w<q.length;u++)"\n"==b[u]&&(y++,A=u+1),C=$jscomp.makeIterator(q[w]),D=C.next().value,L=C.next().value,u===D&&(I=b.slice(A).indexOf("\n"),I=-1===I?b.length:I+A,S=k.package(),q[w]={moduleId:k.id,
packageName:S?S.name:void 0,pathInPackage:S?k.pathInPackage():k.id,isLoaded:k.isLoaded(),length:L,line:y,column:u-A,lineString:1E3<I-A?"..."+b.slice(u-10,u+100)+"...":b.slice(A,I)},w++);return V.return(q)})};vf.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(vf.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt",
"alert","fetch","getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:me.GlobalInjector.getGlobals(this._source))).concat(me.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(a){return this._recorder=a},get:function(){if(this._recorder)return this._recorder;var a=this.System,d=this;if(!me.globalProps.initialized){me.globalProps.initialized=!0;for(var k in a.global)if(a.global.__lookupGetter__(k)||"closed"==k)me.globalProps.descriptors[k]={value:void 0,
configurable:!0,writable:!0}}k={};if(a.get("@system-env").node){var b=me._require.bind(null,this);b.resolve=me._resolve.bind(null,this);k.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(a.global,Object.assign({},me.globalProps.descriptors,{},k,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:a},b.__currentLivelyModule={value:d},b[me.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:me.classRuntime.initializeClass},
b[this.varDefinitionCallbackName]={value:function(e,l,p,q,u){u=u||{};u.kind=l;return d.define(e,p,!1,u)}},b._moduleExport={value:function(e,l){me.scheduleModuleExportsChange(a,d.id,e,l,!0)}},b._moduleImport={value:function(e,l){var p=a.decanonicalize(e,d.id),q=a.get(p);if(q){d.addDependencyToModuleRecord(me.module(a,p),function(u){return Object.assign(d.recorder,u)});if(void 0==l)return q;q.hasOwnProperty(l)||console.warn("import from "+q+": Has no export "+l+"!");return q[l]}console.warn("import of "+
l+" failed: "+e+" (tried as "+d.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});me.ModuleInterface=vf;me.default=mu;var Pd=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");Pd.canonicalURL=function(a){var d=a.match(/([^:]+:\/\/)(.*)/);if(d){var k=d[1];a=d[2]}a=a.replace(/([^:])\/[\/]+/g,"$1/");return(k||"")+a};Pd.prepareNodejsCaching=function(){var a=System._nodeRequire("fs"),d=System._nodeRequire("path"),
k="win32"===Pd.process.platform;d=k||"/"!==Pd.process.cwd()?Pd.process.cwd():d.join(Pd.process.env.HOME,".lively.next");Pd.nodejsCacheDirURL=k?"file:///"+d.replace(/\\/g,"/"):"file://"+d;a.existsSync(d)||a.mkdirSync(d)};Pd.getExceptions=RN;Pd.setExceptions=SN;Pd.prepareCodeForCustomCompile=TN;Pd.prepareTranslatedCodeForSetterCapture=UN;Pd.getCachedNodejsModule=function(a,d){try{var k=a._nodeRequire("module").Module,b=k._resolveFilename(d.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));
return k._cache[b]}catch(e){a.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",d.name)}return null};Pd.addNodejsWrapperSource=function(a,d){var k=Pd.getCachedNodejsModule(a,d);if(k)return d.metadata.format="esm",d.source="var exports = System._nodeRequire('"+k.id+"'); export default exports;\n"+Pd.properties.allOwnPropertiesOrFunctions(k.exports).map(function(b){return Pd.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),
a.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",d.name),!0;a.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",d.name);return!1};Pd.customTranslate=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Y){switch(Y.nextAddress){case 1:b=k;e=b.debug;if(p=(l=d.metadata)&&l.hasOwnProperty("instrument")&&!l.instrument||Pd.exceptions.some(function(Q){return Q(d.name)}))return e&&
console.log("[lively.modules customTranslate ignoring] %s",d.name),Y.return(a(d));if(Pd.isNode&&Pd.addNodejsWrapperSource(b,d))return e&&console.log("[lively.modules] loaded %s from nodejs cache",d.name),Y.return(a(d));q=Date.now();u=Pd.detectModuleFormat(d.source,l);w=Pd.module(b,d.name);y=!1;A="esm"===u;w.setSource(d.source);Y.setCatchFinallyBlocks(2);C=b.useModuleTranslationCache;D=b.global.indexedDB;L=C&&String(Pd.string.hashCode(d.source));if(C&&D&&A)return I=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new Pd.BrowserModuleTranslationCache),Y.yield(I.fetchStoredModuleSource(d.name),8);if(!(Pd.isNode&&C&&A)){Y.jumpTo(5);break}I=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Pd.NodeModuleTranslationCache);return Y.yield(I.fetchStoredModuleSource(d.name),7);case 7:if((S=Y.yieldResult)&&S.hash==L&&S.timestamp>=Pd.NodeModuleTranslationCache.earliestDate&&S.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
d.name,Date.now()-q),Y.return(Promise.resolve(S.source));Y.jumpTo(5);break;case 8:if((S=Y.yieldResult)&&S.hash==L&&S.timestamp>=Pd.BrowserModuleTranslationCache.earliestDate&&S.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",d.name,Date.now()-q),Y.return(Promise.resolve(S.source));case 5:Y.leaveTryBlock(3);break;case 2:V=Y.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
V.stack);case 3:return ba={},A?(w.recorderName="__lvVarRecorder",w.recorder===b.global&&w.unloadEnv(),d.metadata.format="esm",ua=Pd.prepareCodeForCustomCompile(b,d.source,d.name,w,e),ba=ua.options,Fa=ua.source,d.source=Fa,y=d.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",d.name)):"global"===d.metadata.format&&(w.recorderName="System.global",w.recorder=b.global,d.metadata.format="global",F=Pd.prepareCodeForCustomCompile(b,d.source,d.name,w,e),
ba=F.options,Fa=F.source,d.source=Fa,y=d.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",d.name)),y||e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",d.name,d.metadata.format),Y.return(a(d).then(function(Q){var W,ka,ea;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:0===Q.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
d.name),Q=Pd.prepareTranslatedCodeForSetterCapture(b,Q,d.name,w,ba,e));if(Pd.isNode&&C&&A)return W=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Pd.NodeModuleTranslationCache),la.setCatchFinallyBlocks(8),la.yield(W.cacheModuleSource(d.name,L,Q),10);if(!(C&&D&&A)){la.jumpTo(3);break}W=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Pd.BrowserModuleTranslationCache);la.setCatchFinallyBlocks(5);return la.yield(W.cacheModuleSource(d.name,L,Q),7);case 7:e&&
console.log("[lively.modules customTranslate] stored cached version for %s",d.name);la.leaveTryBlock(3);break;case 5:ka=la.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+ka.stack);la.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",d.name);la.leaveTryBlock(3);break;case 8:ea=la.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+ea.stack);
case 3:return e&&console.log("[lively.modules customTranslate] done %s after %sms",d.name,Date.now()-q),la.return(Q)}})}))}})};Pd.instrumentSourceOfEsmModuleLoad=GF;Pd.instrumentSourceOfGlobalModuleLoad=HF;Pd.wrapModuleLoad=gA;Pd.unwrapModuleLoad=IF;Pd.parse=Ej;Pd.nodes=Hq;Pd.isValidIdentifier=bw;var pR=Pd.nodes;Pd.funcCall=pR.funcCall;Pd.member=pR.member;Pd.literal=pR.literal;Pd.evalCodeTransform=pr;Pd.evalCodeTransformOfSystemRegisterSetters=wt;Pd.arr=Ne;Pd.string=Bg;Pd.properties=km;Pd.module=
mu;Pd.detectModuleFormat=gJ;Pd.resource=sc;Pd.installHook=Tr;Pd.removeHook=ku;Pd.isHookInstalled=Ur;Pd.classToFunctionTransform=zq;Pd.isNode=System.get("@system-env").node;var MB=function(){};MB.prototype.cacheModuleSource=function(a,d,k){throw Error("not yet implemented");};MB.prototype.fetchStoredModuleSource=function(a){throw Error("not yet implemented");};MB.prototype.deleteCachedData=function(a){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(MB,{earliestDate:{configurable:!0,
enumerable:!0,get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});Pd.ModuleTranslationCache=MB;Pd.nodejsCacheDirURL=null;var Sq=function(){return Pd.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(Sq,Pd.ModuleTranslationCache);Sq.prototype.ensurePath=function(a){var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(d.moduleCacheDir.join(a).exists(),2);case 2:if(w.yieldResult)return w.return();
k="";l=$jscomp.makeIterator(a.split("/"));p=l.next();case 3:if(p.done){w.jumpTo(0);break}q=p.value;k+=q+"/";b=d.moduleCacheDir.join(k);return w.yield(b.exists(),6);case 6:if(w.yieldResult){w.jumpTo(7);break}w.setCatchFinallyBlocks(8);return w.yield(b.mkdir(),10);case 10:w.leaveTryBlock(7);break;case 8:if(u=w.enterCatchBlock(),"EEXIST"!=u.code)throw u;case 7:return b=Pd.resource("file://"+k+"/package.json"),w.yield(b.exists(),11);case 11:if(!w.yieldResult){w.jumpTo(4);break}return w.yield(b.read(),
13);case 13:return e=w.yieldResult,w.yield(d.moduleCacheDir.join(k+"/package.json").write(e),4);case 4:p=l.next(),w.jumpTo(3)}})};Sq.prototype.dumpModuleCache=function(){var a=this,d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:k=q.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(d=k.getNext())){q.jumpTo(0);break}b=Pd.resource("file://"+d);return q.yield(b.exists(),5);case 5:if(!q.yieldResult){q.jumpTo(2);break}e=a;l=e.cacheModuleSource;
p=d;return q.yield(b.read(),8);case 8:return q.yield(l.call(e,p,"NO_HASH",q.yieldResult),2)}})};Sq.prototype.getFileName=function(a){return a.match(/([^\/]*.)(\.js)?$/)[0]};Sq.prototype.fetchStoredModuleSource=function(a){var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return a=a.replace("file://",""),k=d.getFileName(a),b=a.replace(k,""),e=d.moduleCacheDir.join(a),w.yield(e.exists(),2);case 2:return w.yieldResult?w.yield(e.stat(),
3):w.return(null);case 3:return l=w.yieldResult,p=l.birthtime,w.yield(e.read(),4);case 4:return q=w.yieldResult,w.yield(d.moduleCacheDir.join(b+"/.hash_"+k).read(),5);case 5:return u=w.yieldResult,w.return({source:q,timestamp:p,hash:u})}})};Sq.prototype.cacheModuleSource=function(a,d,k){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(a=a.replace("file://",""),e=b.getFileName(a),l=a.replace(e,""),p.yield(b.ensurePath(l),2)):3!=p.nextAddress?p.yield(b.moduleCacheDir.join(a).write(k),
3):p.yield(b.moduleCacheDir.join(l+"/.hash_"+e).write(d),0)})};Sq.prototype.deleteCachedData=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(a=a.replace("file://",""),k=d.getFileName(a),a.replace(k,""),b=d.moduleCacheDir.join(a),e.yield(b.exists(),2)):3!=e.nextAddress?e.yieldResult?e.yield(b.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(Sq.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){Pd.nodejsCacheDirURL||
Pd.prepareNodejsCaching();return Pd.resource(Pd.nodejsCacheDirURL+"/.module_cache/")}}});Pd.NodeModuleTranslationCache=Sq;var Tq=function(a){a=void 0===a?"lively.modules-module-translation-cache":a;var d=Pd.ModuleTranslationCache.call(this)||this;d.version=2;d.sourceCodeCacheStoreName="sourceCodeStore";d.dbName=a;d.db=d.openDb();return d};$jscomp.inherits(Tq,Pd.ModuleTranslationCache);Tq.prototype.openDb=function(){var a=this,d=System.global.indexedDB.open(this.version);return new Promise(function(k,
b){d.onsuccess=function(e){k(this.result)};d.onerror=function(e){return b(e.target)};d.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(a.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};Tq.prototype.deleteDb=function(){var a=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(d,k){a.onerror=function(b){return k(b.target)};a.onsuccess=function(b){return d(b)}})};Tq.prototype.closeDb=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(a.db,2);d=b.yieldResult;k=d.close();return b.return(new Promise(function(e,l){k.onsuccess=function(p){e(this.result)};k.onerror=function(p){return l(p.target.errorCode)}}))})};Tq.prototype.cacheModuleSource=function(a,d,k){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.db,2);e=l.yieldResult;return l.return(new Promise(function(p,q){var u=e.transaction([b.sourceCodeCacheStoreName],"readwrite"),w=u.objectStore(b.sourceCodeCacheStoreName),
y=Date.now();w.put({moduleId:a,hash:d,source:k,timestamp:y});u.oncomplete=p;u.onerror=q}))})};Tq.prototype.fetchStoredModuleSource=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.db,2);k=b.yieldResult;return b.return(new Promise(function(e,l){var p=k.transaction([d.sourceCodeCacheStoreName]).objectStore(d.sourceCodeCacheStoreName).get(a);p.onerror=l;p.onsuccess=function(q){return e(p.result)}}))})};Tq.prototype.deleteCachedData=
function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.db,2);k=b.yieldResult;return b.return(new Promise(function(e,l){var p=k.transaction([d.sourceCodeCacheStoreName],"readwrite").objectStore(d.sourceCodeCacheStoreName).delete(a);p.onerror=l;p.onsuccess=function(q){return e(p.result)}}))})};Ia("a6",Tq);Pd.BrowserModuleTranslationCache=Tq;Pd.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");Pd.exceptions=[function(a){return!a.endsWith(".js")&&
!a.endsWith(".jsx")&&!a.startsWith("https://jspm.dev")},function(a){return a.endsWith("dist/acorn.js")||a.endsWith("dist/escodegen.browser.js")||a.endsWith("bowser.js")||a.endsWith("TweenMax.min.js")},function(a){return a.endsWith("babel-core/browser.js")||a.endsWith("system.src.js")||a.includes("systemjs-plugin-babel")}];Pd.pendingConfigs=[];Pd.configInitialized=!1;Pd.prepareCodeForCustomCompile=TN;Pd.prepareCodeForCustomCompile=TN;Pd.prepareTranslatedCodeForSetterCapture=UN;Pd.prepareTranslatedCodeForSetterCapture=
UN;Pd.wrapModuleLoad=gA;Pd.wrapModuleLoad=gA;Pd.unwrapModuleLoad=IF;Pd.unwrapModuleLoad=IF;Pd.getExceptions=RN;Pd.getExceptions=RN;Pd.setExceptions=SN;Pd.setExceptions=SN;Pd.instrumentSourceOfEsmModuleLoad=GF;Pd.instrumentSourceOfEsmModuleLoad=GF;Pd.instrumentSourceOfGlobalModuleLoad=HF;Pd.instrumentSourceOfGlobalModuleLoad=HF;var dg=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");dg.fetchResource=function(a,d){var k=this,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:b=
k;e=25E4;l=b.resource(d.name);p=b.get("@system-env").node&&!l.isNodeJSFileResource;if(!p){ea.jumpTo(2);break}return ea.yield(Zma(d.name),3);case 3:l=ea.yieldResult;case 2:if(!l)return ea.return(a(d));if(dg.jsFileHashMap||b.get("@system-env").node){ea.jumpTo(4);break}w=dg;return ea.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:w.jsFileHashMap=ea.yieldResult;case 4:y=b.useModuleTranslationCache;A=b.global.indexedDB;C=b._livelyModulesTranslationCache;if(b.get("@system-env").node||
!y||!A||!C){ea.jumpTo(6);break}return ea.yield(C.fetchStoredModuleSource(d.name),7);case 7:if((D=ea.yieldResult)&&(dg.jsFileHashMap[d.name.replace(b.baseURL,"/")]==D.hash||d.name.includes("jspm")))return d.metadata.instrument=!1,ea.return(D.source);case 6:if(l.isResource&&l.ext()&&l.ext().startsWith("css"))return ea.return("");ea.setCatchFinallyBlocks(8);if(!l.isResource){L=l;ea.jumpTo(10);break}return ea.yield(l.read(),11);case 11:L=ea.yieldResult;case 10:q=L;ea.leaveTryBlock(9);break;case 8:u=I=
ea.enterCatchBlock();case 9:if(!u||!b.get("@system-env").browser){ea.jumpTo(12);break}S=l.url.startsWith("http");V=!l.url.startsWith(document.location.origin);if(!S||!V){ea.jumpTo(12);break}ea.setCatchFinallyBlocks(14);return ea.yield(l.makeProxied(b.baseURL).read(),16);case 16:q=ea.yieldResult;u=null;ea.leaveTryBlock(12);break;case 14:ea.enterCatchBlock();case 12:if(u)throw u;if(!p){ea.jumpTo(17);break}ba=q.headers||{};ua=ba._headers;Fa=$jscomp.makeIterator(ua&&ua["content-encoding"]||[]);F=Fa.next().value;
return"br"==F?(Y=dg.Buffer,Q=Y.from,W=dg.brotli,ka=W.decompress,ea.yield(q.buffer(),21)):ea.yield(q.text(),20);case 20:q=ea.yieldResult;ea.jumpTo(17);break;case 21:q=Q.call(Y,ka.call(W,ea.yieldResult)).toString();case 17:if(!(q.length>e&&$world)||b._loadingIndicator){ea.jumpTo(22);break}b._loadingIndicator=$world.execCommand("open loading indicator",{label:"loading module",status:d.name.replace(b.baseURL,"")});return ea.yield(dg.promise.delay(500),23);case 23:if(!b._loadingIndicator){ea.jumpTo(22);
break}return ea.yield(b._loadingIndicator.whenRendered(),22);case 22:return ea.return(q)}})};dg.livelyProtocol=function(a,d){var k=d.match(dg.livelyURLRe);if(!k)return a(d);a=$jscomp.makeIterator(k);a.next();a.next();var b=a.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(e?e.textString:"/*Could not locate "+b+"*/")},write:function(e){var l="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!l)return Promise.reject("Could not save morph "+
b);l.textString=e;return Promise.resolve(this)}}};dg.wrapResource=JF;dg.unwrapResource=VN;dg.resource=sc;dg.Resource=Ef;dg.installHook=Tr;dg.removeHook=ku;dg.isHookInstalled=Ur;dg.brotli=dg.brotli||void 0;if(System.get("@system-env").node){var Zma=System._nodeRequire("node-fetch");dg.brotli=System._nodeRequire("brotli")}dg.jsFileHashMap=dg.jsFileHashMap||void 0;dg.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;dg.wrapResource=JF;dg.wrapResource=JF;dg.unwrapResource=VN;dg.unwrapResource=VN;var Zu=function(){return dg.Resource.apply(this,
arguments)||this};$jscomp.inherits(Zu,dg.Resource);Zu.prototype.read=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d=a.morphId;k="undefined"!==typeof $world&&$world.getMorphWithId(d);return b.return(Promise.resolve(k?k.textString:"/*Could not locate "+d+"*/"))})};Zu.prototype.write=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){k=d.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(k);if(!b)return e.return(Promise.reject("Could not save morph "+
k));b.textString=a;return e.return(Promise.resolve(d))})};Zu.prototype.exists=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.return("undefined"!==typeof $world&&$world.getMorphWithId(a.morphId))})};Zu.prototype.remove=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){"undefined"!==typeof $world&&$world.getMorphWithId(a.morphId).remove();return d.return(!0)})};$jscomp.global.Object.defineProperties(Zu.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var a=this.url.match(dg.livelyURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}}});dg.LivelyResource=Zu;var qR={name:"lively.modules",matches:function(a){return a.match(dg.livelyURLRe)},resourceClass:dg.LivelyResource};dg.resourceExtension=qR;dg.resourceExtension=qR;dg.resourceExtension=qR;dg.registerExtension=Fd;dg.promise=Uf;dg.registerExtension(dg.resourceExtension);var fd=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
fd.wrapModuleResolution=KF;fd.unwrapModuleResolution=LF;fd.livelySystemEnv=MF;fd.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};fd.nameOfSystem=function(a){return Object.keys(fd.systems()).detect(function(d){return fd.systems()[d]===a})};fd.getSystem=nu;fd.removeSystem=ou;fd.makeSystem=function(a){return fd.prepareSystem(new System.constructor,a)};fd.prepareSystem=NF;fd.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(a,d){var k=d.split("=");d=k[0];k=k[1];"true"===k||"false"===k?k=eval(k):isNaN(Number(k))||(k=Number(k));a[d]=k;return a},{}):{}};fd.preNormalize=function(a,d,k){".."===d&&(d="../index.js");d=d.replace(fd.doubleSlashRe,function(q){return":"===q[0]?q:q[0]+"/"});var b=a.get("@lively-env").packageRegistry;if(b){var e=k&&b.findPackageHavingURL(k);if(e){var l=e.map,p=e.url;if(l=l&&l[d]||a.map[d])"object"===typeof l&&(l=fd.normalize_doMapWithObject(l,
e,a)),"string"===typeof l&&""!==l&&(d=l),d.startsWith(".")&&(d=fd.urlResolve(fd.join(p,d)))}}b&&(a=b.resolvePath(d,k))&&(a.endsWith("/")&&!d.endsWith("/")&&(a=a.slice(0,-1)),!a.endsWith("/")&&d.endsWith("/")&&(a+="/"),d=a);return d};fd.postNormalize=function(a,d,k){k=d.replace(fd.jsExtRe,"");if(d.endsWith("/"))return d;var b=a.get("@lively-env").packageRegistry;if(b){if(b=b.findPackageWithURL(k))return b=(b.main||"index.js").replace(fd.dotSlashStartRe,""),a=k.replace(fd.trailingSlashRe,"")+"/"+b}else if(k in
a.packages&&(b=a.packages[k].main))return a=k.replace(fd.trailingSlashRe,"")+"/"+b.replace(fd.dotSlashStartRe,"");k=d.match(fd.jsonJsExtRe);a.debug&&console.log(">> [postNormalize] "+(k?k[1]:d));return k?k[1]:d};fd.checkExistence=function(a,d){var k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:d._fileCheckMap=d._fileCheckMap||{};if(a in d._fileCheckMap)return p.return(d._fileCheckMap[a]);k=d._livelyModulesTranslationCache;if(!(b=k)){p.jumpTo(2);
break}return p.yield(k.fetchStoredModuleSource(a),3);case 3:b=p.yieldResult;case 2:if(b)return p.return(d._fileCheckMap[a]=!0);e=d._fileCheckMap;l=a;return p.yield(fd.resource(a).exists(),4);case 4:return p.return(e[l]=p.yieldResult)}})};fd.normalizeHook=function(a,d,k,b){var e=this,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(k&&"cjs"==d)return A.return("cjs");l=e;p=fd.preNormalize(l,d,k);return A.yield(a(p,k,b),2);case 2:q=A.yieldResult;
u=fd.postNormalize(l,q||p,!1);w=u.startsWith("file:");l.debug&&console.log("[normalize] "+d+" => "+u);if(fd.jsExtRe.test(d)||fd.jsxExtRe.test(d)||fd.jsonExtRe.test(u)||fd.nodeModRe.test(u)||fd.nodeExtRe.test(u)||l.loads&&l.loads[u]){A.jumpTo(3);break}if(fd.jsExtRe.test(u))return A.yield(fd.checkExistence(u,l),9);if(u.includes("jspm.dev")||"@empty"==u){A.jumpTo(3);break}return A.yield(fd.checkExistence(u+".js",l),7);case 7:return A.yieldResult?A.return(u+".js"):A.yield(fd.checkExistence(u+"/index.js",
l),8);case 8:if(A.yieldResult)return A.return(u+"/index.js");A.jumpTo(3);break;case 9:if(A.yieldResult)return A.return(u);y=u.replace(".js","/index.js");return A.yield(fd.checkExistence(y,l),10);case 10:return A.yieldResult||!w?A.return(y):A.return(u.replace(".js","/index.node"));case 3:return fd.jsxJsExtRe.test(u)&&(u=u.replace(".jsx.js",".jsx")),A.return(u)}})};fd.decanonicalizeHook=function(a,d,k,b){if(d&&d.endsWith("!cjs")){d=d.replace("!cjs","");var e="!cjs"}var l=fd.preNormalize(this,d,k);a=
a(l,k,b);a=fd.postNormalize(this,a,!0);e&&(a+=e);this.debug&&console.log("[normalizeSync] "+d+" => "+a);return a};fd.locateHook=function(a,d){var k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return k=$jscomp.makeIterator(d.name.split("!")),b=k.next().value,k.next(),d.name=b,l.yield(a(d),2);e=l.yieldResult;return l.return(e)})};fd.normalize_doMapWithObject=function(a,d,k){d=k.get(d.map["@env"]||"@system-env");var b;for(b in a){var e=(k="~"==b[0])?b.substr(1):
b,l=d;for(e=e.split(".");e.length;)l=l[e.shift()];if(!k&&l||k&&!l){var p=a[b];break}}if(p&&"string"!==typeof p)throw Error("Unable to map a package conditional to a package conditional.");return p};fd.normalize_packageOfURL=function(a,d){var k=Object.keys(d.packages||{}).map(function(b){return 0===a.indexOf(b)?{url:b,penalty:a.slice(b.length).length}:null}).filter(function(b){return!!b});return(d=(k=k.length?k.reduce(function(b,e){return b.penalty>e.penalty?e:b}).url:null)&&d.packages[k])?{systemPackage:d,
packageURL:k}:null};fd.newModule_volatile=function(a,d){var k=Object.freeze;Object.freeze=function(b){return b};a=a(d);Object.freeze=k;return a};fd.printSystemConfig=OF;fd.instantiate_triggerOnLoadCallbacks=function(a,d){var k=this;return a(d).then(function(b){var e={};fd.promise.waitFor(6E4,function(){return k.get(d.name)},e).then(function(l){if(l===e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+d.name+" timed out");else{l=d.name;for(var p=fd.classHolder.module(k,l),q=
k.get("@lively-env").onLoadCallbacks,u=q.length;u--;){var w=q[u],y=w.moduleName,A=w.callback;if((w.resolved?y:k.decanonicalize(y))===l){q.splice(u,1);try{A(p)}catch(C){console.error(C)}}}fd.emit("lively.modules/moduleloaded",{module:d.name},Date.now(),k);k._loadingIndicator&&(k._loadingIndicator.remove(),k._loadingIndicator=null)}});return b})};fd.whenLoaded=PF;fd.loadedModules=QF;fd.knownModuleNames=RF;fd.searchLoadedModules=WN;fd.arr=Ne;fd.obj=ff;fd.promise=Uf;fd.removeHook=ku;fd.installHook=Tr;
fd.isHookInstalled=Ur;fd.classHolder=Rq;fd.isNode=System.get("@system-env").node;fd.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;fd.defaultOptions={notificationLimit:null};fd.wrapModuleResolution=KF;fd.wrapModuleResolution=KF;fd.unwrapModuleResolution=LF;fd.unwrapModuleResolution=LF;fd.wrapModuleLoad=gA;fd.wrapResource=JF;fd.emit=bq;fd.join=KB;fd.urlResolve=tF;fd.resource=sc;fd.dotSlashStartRe=/^\.?\//;fd.trailingSlashRe=/\/$/;
fd.jsExtRe=/\.js$/;fd.jsxExtRe=/\.jsx$/;fd.nodeExtRe=/\.node$/;fd.jsonExtRe=/\.json$/;fd.jsonJsExtRe=/(.*\.json)\.js$/i;fd.jsxJsExtRe=/(.*\.jsx)\.js$/i;fd.doubleSlashRe=/.\/{2,}/g;fd.nodeModRe=/@node.*/;fd.whenLoaded=PF;fd.whenLoaded=PF;fd.getSystem=nu;fd.getSystem=nu;fd.removeSystem=ou;fd.removeSystem=ou;fd.prepareSystem=NF;fd.prepareSystem=NF;fd.printSystemConfig=OF;fd.printSystemConfig=OF;fd.livelySystemEnv=MF;fd.livelySystemEnv=MF;fd.loadedModules=QF;fd.loadedModules=QF;fd.knownModuleNames=RF;
fd.knownModuleNames=RF;fd.searchLoadedModules=WN;fd.searchLoadedModules=WN;var Pf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");Pf.isAbsolute=function(a){return a.startsWith("/")||a.startsWith("http:")||a.startsWith("https:")||a.startsWith("file:")||a.match(Pf.urlStartRe)};Pf.ensureResource=function(a){return a.isResource?a:Pf.resource(a)};Pf.semver=bB;Pf.arr=Ne;Pf.obj=ff;Pf.promise=Uf;Pf.getPackage=fA;Pf.Package=Vh;Pf.resource=sc;Pf.isURL=lu;Pf.classHolder=
Rq;Pf.urlStartRe=/^[a-z\.-_\+]+:/i;var wh=function(a,d){d=void 0===d?{}:d;this.System=a;this.packageBaseDirs=d.packageBaseDirs||[];this.devPackageDirs=d.devPackageDirs||[];this.individualPackageDirs=d.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};wh.ofSystem=function(a){var d=a.get("@lively-env").packageRegistry;d||(d=a["__lively.modules__packageRegistry"]=new this(a));return d};wh.forDirectory=function(a,d){return new this(a,{packageBaseDirs:[Pf.ensureResource(d)]})};
wh.fromJSON=function(a,d){return(new this(a)).fromJSON(d)};wh.prototype.resetByURL=function(){this._byURL=null};wh.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};wh.prototype.toJSON=function(){function a(y){y=y.url;return y.startsWith(d.baseURL)?y.slice(d.baseURL.length).replace(/^\//,""):y}var d=this.System,k=this.packageMap,b=this.individualPackageDirs,e=this.devPackageDirs,l=this.packageBaseDirs,p={},q;for(q in k){var u=k[q];p[q]={};p[q].latest=u.latest;p[q].versions={};for(var w in u.versions)p[q].versions[w]=
u.versions[w].toJSON()}return{packageMap:p,individualPackageDirs:b.map(a),devPackageDirs:e.map(a),packageBaseDirs:l.map(a)}};wh.prototype.fromJSON=function(a){function d(y){return Pf.isURL(y)?Pf.resource(y):Pf.resource(b.baseURL).join(y)}var k={},b=this.System,e=Pf.resource(b.baseURL),l;for(l in a.packageMap){var p=a.packageMap[l];k[l]={};k[l].latest=p.latest;k[l].versions={};for(var q in p.versions){var u=p.versions[q],w=u.url;Pf.isAbsolute(w)||(w=e.join(w).url);u=Pf.Package.fromJSON(b,Object.assign({},
u,{url:w}));k[l].versions[q]=u}}this.packageMap=k;this.individualPackageDirs=a.individualPackageDirs.map(d);this.devPackageDirs=a.devPackageDirs.map(d);this.packageBaseDirs=a.packageBaseDirs.map(d);this.resetByURL();Pf.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};wh.prototype.updateFromJSON=function(a){var d=this.packageMap,k;for(k in a.packageMap){var b=a.packageMap[k];d[k]||(d[k]={});d[k].latest?Pf.semver.gt(b.latest,d[k].latest)&&(d[k].latest=b.latest):d[k].latest;d[k].versions||
(d[k].versions={});var e=this.System,l=Pf.resource(e.baseURL),p;for(p in b.versions){var q=b.versions[p],u=q.url;Pf.isAbsolute(u)||(u=l.join(u).url);q=new Pf.Package.fromJSON(e,Object.assign({},q,{url:u}));d[k].versions[p]=q}}this.resetByURL();Pf.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};wh.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};wh.prototype.isReady=function(){return!this._readyPromise};wh.prototype.withPackagesDo=function(a){for(var d in this.packageMap){var k=
this.packageMap[d].versions,b;for(b in k)a(k[b])}};wh.prototype.findPackage=function(a){for(var d in this.packageMap){var k=this.packageMap[d].versions,b;for(b in k){var e=k[b];if(a(e))return e}}return null};wh.prototype.filterPackages=function(a){var d=[];this.withPackagesDo(function(k){return a(k)&&d.push(k)});return d};wh.prototype.allPackages=function(){var a=[],d;for(d in this.packageMap){var k=this.packageMap[d].versions,b;for(b in k)a.push(k[b])}return a};wh.prototype.sortPackagesByVersion=
function(a){return a.sort(function(d,k){return Pf.semver.compare(d.version,k.version,!0)})};wh.prototype.matches=function(a,d,k){var b=a.version;return a.name!==d?!1:!k||Pf.semver.validRange(b||"",!0)&&Pf.semver.satisfies(b,k,!0)?!0:!1};wh.prototype.coversDirectory=function(a){a=Pf.ensureResource(a).asDirectory();var d=this.packageBaseDirs,k=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(a)}))return"individualPackageDirs";if(k.some(function(e){return e.equals(a)}))return"devPackageDirs";
var b=a.parent().parent();return d.some(function(e){return e.equals(b)})?this.allPackages().find(function(e){return Pf.ensureResource(e.url).equals(a)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};wh.prototype.lookup=function(a,d){var k=this,b=this.packageMap[a];if(!b)return null;if(!d||"latest"===d)return b.versions[b.latest];if(!Pf.semver.validRange(d,!0))throw Error("PackageRegistry>>lookup of "+a+": Invalid version - "+d);b=Pf.obj.values(b.versions).filter(function(e){return k.matches(e,
a,d)});return 1>=b.length?b[0]:Pf.arr.last(this.sortPackagesByVersion(b))};wh.prototype.findPackageDependency=function(a,d,k){k||(k=a.dependencies[d]||a.devDependencies[d]);Pf.semver.validRange(k,!0)||(k=null);return this.lookup(d,k)};wh.prototype.findPackageWithURL=function(a){a.isResource&&(a=a.url);a.endsWith("/")&&(a=a.slice(0,-1));return this.byURL[a]};wh.prototype.findPackageHavingURL=function(a){a.isResource&&(a=a.url);a.endsWith("/")&&(a=a.slice(0,-1));var d=Infinity,k=null,b=this.byURL,e;
for(e in b)if(0===a.indexOf(e)){var l=a.slice(e.length).length;l>=d||(d=l,k=b[e])}return k};wh.prototype.findPackageForPath=function(a,d){if(Pf.isAbsolute(a))return this.findPackageHavingURL(a);if(a.startsWith("."))return null;a=$jscomp.makeIterator(a.split("/")).next().value;if(!a)return null;var k=a.indexOf("@");if(-1<k){var b=a.slice(k+1);a=a.slice(0,k)}return!b&&d?this.findPackageDependency(d,a):this.lookup(a,b)};wh.prototype.resolvePath=function(a,d){if(Pf.isAbsolute(a))return a;var k=d&&d.isPackage||
null;if(!k&&d){if(a.startsWith("."))return d=Pf.resource(d),d.isDirectory()||(d=d.parent()),d.join(a).withRelativePartsResolved().url;k=this.findPackageHavingURL(d)}d=this.findPackageForPath(a,k);if(!d)return null;k=a.indexOf("/");return(a=-1===k||k===a.length-1?"":a.slice(k))?Pf.resource(d.url).join(a).url:d.url};wh.prototype.update=function(){var a=this,d,k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:if(!a.isReady())return ea.return(a.whenReady().then(function(){return a.update()}));
d=Pf.promise.deferred();a._readyPromise=d.promise;a.packageBaseDirs=a.packageBaseDirs.map(function(la){return la.asDirectory()});a.individualPackageDirs=a.individualPackageDirs.map(function(la){return la.asDirectory()});a.devPackageDirs=a.devPackageDirs.map(function(la){return la.asDirectory()});k={};ea.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(a.packageBaseDirs);e=b.next();case 5:if(e.done){ea.jumpTo(7);break}l=e.value;p=$jscomp;q=p.makeIterator;return ea.yield(l.dirList(1),8);case 8:u=q.call(p,
ea.yieldResult),w=u.next();case 9:if(w.done){e=b.next();ea.jumpTo(5);break}y=w.value;A=$jscomp;C=A.makeIterator;return ea.yield(y.dirList(1),12);case 12:D=C.call(A,ea.yieldResult.filter(function(la){return la.isDirectory()})),L=D.next();case 13:if(L.done){w=u.next();ea.jumpTo(9);break}I=L.value;return ea.yield(a._discoverPackagesIn(I,k,"packageCollectionDirs"),16);case 16:k=ea.yieldResult;L=D.next();ea.jumpTo(13);break;case 7:S=$jscomp.makeIterator(a.individualPackageDirs),e=S.next();case 17:if(e.done){ea.jumpTo(19);
break}V=e.value;return ea.yield(a._discoverPackagesIn(V,k,"individualPackageDirs"),20);case 20:k=ea.yieldResult;e=S.next();ea.jumpTo(17);break;case 19:ba=$jscomp.makeIterator(a.devPackageDirs),e=ba.next();case 21:if(e.done){ea.jumpTo(23);break}ua=e.value;return ea.yield(a._discoverPackagesIn(ua,k,"devPackageDirs"),24);case 24:k=ea.yieldResult;e=ba.next();ea.jumpTo(21);break;case 23:for(Fa in k)F=k[Fa],Y=F.pkg,Q=F.config,W=F.covered,a.System.debug&&console.log("[PackageRegistry] Adding discovered package "+
Fa+" (from "+W+")"),a._addPackageWithConfig(Y,Q,Fa+"/",W);a._updateLatestPackages();d.resolve();case 3:ea.enterFinallyBlock();a._readyPromise=null;a.resetByURL();Pf.classHolder.ModulePackageMapping.forSystem(a.System).clearCache();ea.leaveFinallyBlock(4);break;case 2:ka=ea.enterCatchBlock();d.reject(ka);ea.jumpTo(3);break;case 4:return ea.return(a)}})};wh.prototype.addPackageAt=function(a,d,k){d=void 0===d?"individualPackageDirs":d;var b=this,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress){e=a.isResource?a.url:a;e.endsWith("/")&&e.slice(0,-1);if(b.byURL[e])throw Error("package in "+e+" already added to registry");return A.yield(b._discoverPackagesIn(Pf.ensureResource(a).asDirectory(),{},void 0,k),2)}l=A.yieldResult;for(p in l)b.byURL[p]||(q=l[p],u=q.pkg,w=q.config,y=b._addPackageDir(p,d,!0),b._addPackageWithConfig(u,w,p+"/",y));b.resetByURL();Pf.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return A.return(b.findPackageWithURL(a))})};
wh.prototype.removePackage=function(a,d){d=void 0===d?!0:d;var k=a.name,b=a.version,e=Pf.ensureResource(a.url),l=this.coversDirectory(e);"devPackageDirs"===l?this.devPackageDirs=this.devPackageDirs.filter(function(p){return!p.equals(e)}):"individualPackageDirs"===l&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(p){return!p.equals(e)}));l=this.packageMap;l[k]&&(delete l[k].versions[b],0===Object.keys(l[k].versions).length&&delete l[k]);this.resetByURL();Pf.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
d&&this._updateLatestPackages(a.name)};wh.prototype.updateNameAndVersionOf=function(a,d,k,b,e){var l=this.packageMap;l[d]?l[d].versions[k]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+k+" of "+d+" found in registry ("+a.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+d+"@"+k+" not found in registry ("+a.url+")");this._addToPackageMap(a,b,e);l[d]&&l[d].versions[k]&&(delete l[d].versions[k],0===Object.keys(l[d].versions).length&&delete l[d]);this._updateLatestPackages(a.name)};
wh.prototype._updateLatestPackages=function(a){var d=this.packageMap;if(a&&d[a])d[a].latest=Pf.arr.last(Pf.semver.sort(Object.keys(d[a].versions),!0));else for(var k in d)d[k].latest=Pf.arr.last(Pf.semver.sort(Object.keys(d[k].versions),!0))};wh.prototype._discoverPackagesIn=function(a,d,k,b){b=void 0===b?null:b;var e=this,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){if(!a.isDirectory())return A.return(d);l=a.asFile().url;if(d.hasOwnProperty(l))return A.return(d);
A.setCatchFinallyBlocks(2);p=b&&b[l]||new Pf.Package(e.System,l);return A.yield(p.tryToLoadPackageConfig(),4)}if(2!=A.nextAddress)return q=A.yieldResult,p.setConfig(q),d[l]={pkg:p,config:q,covered:k},e.System.debug&&(u=q,w=u.name,y=u.version,console.log("[lively.modules] package "+w+"@"+y+" discovered in "+a.url)),A.return(d);A.enterCatchBlock();return A.return(d)})};wh.prototype._addToPackageMap=function(a,d,k,b){if(!d)throw Error("Cannot add package without name");k||(k="0.0.0");var e=this.packageMap;
d=e[d]||(e[d]={versions:{},latest:null});if(d.versions[k])if(e="Redefining version "+k+" of package "+a.url,void 0===b||b)console.warn(e);else throw Error(e+" not allowed");d.versions[k]=a};wh.prototype._addPackageWithConfig=function(a,d,k,b){(void 0===b?0:b)||this._addPackageDir(k,"individualPackageDirs",!0);a.registerWithConfig(d);this._addToPackageMap(a,a.name,a.version);return a};wh.prototype._addPackageDir=function(a,d,k){d=void 0===d?"individualPackageDirs":d;k=void 0===k?!0:k;a=Pf.ensureResource(a).asDirectory();
if(("packageCollectionDirs"===d||"maybe packageCollectionDirs"===d)&&(this.coversDirectory(a)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";a=this[d].concat(a);this[d]=k?Pf.arr.uniqBy(a,function(b,e){return b.equals(e)}):a;return d};$jscomp.global.Object.defineProperties(wh.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var a=$jscomp.makeIterator(this.allPackages()),d=a.next();!d.done;d=a.next())d=d.value,this._byURL[d.url]=
d}return this._byURL}}});Pf.PackageRegistry=wh;var Rk=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");Rk.arr=Ne;Rk.obj=ff;Rk.subscribe=Uy;Rk.unsubscribe=vK;Rk.module=mu;var jl=function(a){this.System=a;this.subscribeToSystemChanges()};jl.forSystem=function(a){this._forSystemMap||(this._forSystemMap=new WeakMap);var d=this._forSystemMap.get(a);if(d)return d;d=new this(a);this._forSystemMap.set(a,d);return d};jl.run=function(a,d){a=void 0===a?System:a;return this.forSystem(a).systemExports(d)};
jl.findExportOfValue=function(a,d){d=void 0===d?System:d;var k=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(k.run(d),2);b=e.yieldResult;return e.return(b.find(function(l){var p=l.local;l=Rk.module(d,l.moduleId);l=l.recorder||d.get(l.id)||{};try{return l[p]===a}catch(q){return!1}}))})};jl.prototype.subscribeToSystemChanges=function(){var a=this;if(!this._notificationHandlers){var d=this.System;this._notificationHandlers=[Rk.subscribe("lively.modules/moduleloaded",
function(k){return a.clearCacheFor(k.module)},d),Rk.subscribe("lively.modules/modulechanged",function(k){return a.clearCacheFor(k.module)},d),Rk.subscribe("lively.vm/doitresult",function(k){return a.clearCacheFor(k.targetModule)},d)]}};jl.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var a=this.System;Rk.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],a);Rk.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],a);Rk.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],a);this._notificationHandlers=null}};jl.prototype.clearCacheFor=function(a){this.exportByModuleCache[a]=null};jl.prototype.systemExports=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(d.rawExportsByModule(a),2);k=b.yieldResult;Object.keys(k).forEach(function(e){return d.resolveExportsOfModule(e,k)});return b.return(Rk.arr.flatmap(Object.keys(k),function(e){return k[e]?k[e].resolvedExports||k[e].rawExports:
[]}))})};jl.prototype.rawExportsByModule=function(a){var d=this,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(a=a||{},k=d.System,b=k.get("@lively-env")||{},e=Object.keys(b.loadedModules||{}),l={},p=function(u){1>u%50&&a.progress.step&&a.progress.step("Scanning ...",u/e.length)},q.yield(Promise.all(e.map(function(u,w){a.progress&&p(w);return d.rawExportsOfModule(u,a,l).then(function(y){return y?l[u]=y:null})})),2)):q.return(l)})};jl.prototype.rawExportsOfModule=
function(a,d){d=void 0===d?{}:d;var k=this,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){switch(ka.nextAddress){case 1:b=k;e=b.System;l=b.exportByModuleCache;p=d.excludedPackages||[];q=d.excludedURLs||(d.excludedURLs=p.filter(function(ea){return"string"===typeof ea}));u=d.excludeFns||(d.excludeFns=p.filter(function(ea){return"function"===typeof ea}));w=d.excludedPackageURLs||(d.excludedPackageURLs=q.concat(q.map(function(ea){return e.decanonicalize(ea.replace(/\/?$/,
"/")).replace(/\/$/,"")})));y=d.livelyEnv||(d.livelyEnv=e.get("@lively-env")||{});d.modes||(d.modes=Object.keys(y.loadedModules||{}));if(l[a])return A=l[a].rawExports,ka.return(w.includes(A.packageURL)||u.some(function(ea){return ea(A.packageURL)})?null:l[a]);C=Rk.module(e,a);D=C.pathInPackage();I=(L=C.package())&&L.main&&D===L.main;S=L?L.url:"";V=L?L.name:"";ba=L?L.version:"";ua={moduleId:a,isMain:I,pathInPackage:D,packageName:V,packageURL:S,packageVersion:ba,exports:[]};if(w.includes(S)||u.some(function(ea){return ea(S)}))return ka.return(null);
ka.setCatchFinallyBlocks(2);Fa=C.format();return["register","es6","esm"].includes(Fa)?(Q=ua,ka.yield(C.exports(),7)):ka.yield(C.load(),6);case 6:F=ka.yieldResult;ua.exports=[];for(Y in F)"__useDefault"!==Y&&"default"!==Y&&ua.exports.push({exported:Y,local:Y,type:"id"});ka.jumpTo(5);break;case 7:Q.exports=ka.yieldResult;case 5:ka.leaveTryBlock(3);break;case 2:W=ka.enterCatchBlock(),ua.error=W;case 3:return ka.return(l[a]={rawExports:ua})}})};jl.prototype.resolveExportsOfModule=function(a,d,k){var b=
this;k=void 0===k?{}:k;if(!k[a]){k[a]=!0;var e=d[a];if(e&&!e.resolvedExports){var l=this.System,p=Rk.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));e.resolvedExports=Rk.arr.flatmap(e.rawExports.exports,function(q){var u=q.type,w=q.exported,y=q.local,A=q.fromModule;if("all"!==u)return[Object.assign({},p,{type:u,exported:w,local:y,fromModule:A})];q=l.decanonicalize(A,a);b.resolveExportsOfModule(q,d,k);return(d[q]&&d[q].resolvedExports||[]).map(function(C){return Object.assign({},
p,{type:C.type,exported:C.exported,local:C.local,fromModule:C.fromModule||A})})});k[a]=!1}}};$jscomp.global.Object.defineProperties(jl.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});Ia("E",jl);Rk.ExportLookup=jl;Rk.default=jl;var lk=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");lk.buildPackageMap=hA;lk.resolvePackageDependencies=SF;lk.dependencyGraph=TF;lk.arr=Ne;lk.fun=Tj;
lk.promise=Uf;lk.obj=ff;lk.resource=sc;lk.buildPackageMap=hA;lk.buildPackageMap=hA;lk.resolvePackageDependencies=SF;lk.resolvePackageDependencies=SF;lk.dependencyGraph=TF;lk.dependencyGraph=TF;var hJ=Object.freeze({__proto__:null,buildPackageMap:hA,resolvePackageDependencies:SF,dependencyGraph:TF}),Sk=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");Sk.arr=Ne;Sk.unsubscribe=vK;Sk.subscribe=Uy;Sk.knownModuleNames=RF;Sk.classHolder=Rq;var Mn=function(a){this.System=
a;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};Mn.forSystem=function(a){var d=a["__lively.modules__modulePackageMapCache"];if(d)return d;d=new this(a);return a["__lively.modules__modulePackageMapCache"]=d};Mn.prototype.subscribeToSystemChanges=function(){var a=this;if(!this._notificationHandlers){var d=this.System;this._notificationHandlers=[Sk.subscribe("lively.modules/moduleloaded",function(k){return a.addModuleIdToCache(k.module)},d),Sk.subscribe("lively.modules/moduleunloaded",
function(k){return a.removeModuleFromCache(k.module)},d),Sk.subscribe("lively.modules/packageregistered",function(k){return a.clearCache()},d),Sk.subscribe("lively.modules/packageremoved",function(k){return a.clearCache()},d)]}};Mn.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var a=this.System;Sk.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],a);Sk.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],a);Sk.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],a);Sk.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],a);this._notificationHandlers=null}};Mn.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};Mn.prototype.ensureCache=function(){var a=this.System,d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var e=Sk.classHolder.Package.allPackageURLs(a),
l=0;l<e.length;l++)d[e[l]]=[];a=Sk.knownModuleNames(a);for(l=0;l<a.length;l++){for(var p=a[l],q=void 0,u=0;u<e.length;u++){var w=e[u];p.startsWith(w)&&(!q||q.length<w.length)&&(q=w)}q?(d[q].push(p),k[p]=q):b[p]={}}this._cacheInitialized=!0;return this};Mn.prototype.addModuleIdToCache=function(a){this.ensureCache();var d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;if(k[a])return k[a];if(b[a])return null;for(var e=Object.keys(d),l,p=0;p<e.length;p++){var q=e[p];a.startsWith(q)&&
(!l||l.length<q.length)&&(l=q)}if(l)return(d[l]||(d[l]=[])).push(a),k[a]=l;b[a]={};return null};Mn.prototype.removeModuleFromCache=function(a){if(this._cacheInitialized){var d=this.packageToModule,k=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(a))delete b[a];else if(b=k[a])delete k[a],d[b]&&Sk.arr.remove(d[b],a)}};Mn.prototype.getPackageURLForModuleId=function(a){return this.modulesToPackage[a]||this.addModuleIdToCache(a)};Mn.prototype.getModuleIdsForPackageURL=function(a){this.ensureCache();
return this.packageToModule[a]||[]};Sk.ModulePackageMapping=Mn;Sk.default=Mn;var Fc=lively.FreezerRuntime.recorderFor("lively.modules/index.js");Fc.changeSystem=UF;Fc.wrapModuleResolution=VF;Fc.unwrapModuleResolution=WF;Fc.loadedModules=XF;Fc.module=iA;Fc.isModuleLoaded=YF;Fc.doesModuleExist=ZF;Fc.printSystemConfig=$F;Fc.whenLoaded=aG;Fc.importPackage=bG;Fc.registerPackage=cG;Fc.removePackage=dG;Fc.reloadPackage=eG;Fc.getPackages=fG;Fc.getPackage=gG;Fc.getPackageOfModule=hG;Fc.ensurePackage=iG;Fc.applyPackageConfig=
jG;Fc.lookupPackage=kG;Fc.moduleSourceChange=lG;Fc.requireMap=mG;Fc.isHookInstalled=nG;Fc.installHook=oG;Fc.removeHook=pG;Fc.wrapModuleLoad=qG;Fc.unwrapModuleLoad=rG;Fc.getSystem=nu;Fc.removeSystem=ou;Fc.prepareSystem=NF;Fc._printSystemConfig=OF;Fc._unwrapModuleResolution=LF;Fc._wrapModuleResolution=KF;Fc._whenLoaded=PF;Fc._module=mu;Fc._doesModuleExist=FF;Fc._isModuleLoaded=EF;Fc.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Fc.defaultSystem=
Fc.defaultSystem||Fc.prepareSystem(Fc.GLOBAL.System);var rR=Fc.defaultSystem;Fc.System=rR;Fc.defaultSystem=rR;Fc.getSystem=nu;Fc.getSystem=nu;Fc.removeSystem=ou;Fc.removeSystem=ou;Fc.loadedModules=XF;Fc.loadedModules=XF;Fc.printSystemConfig=$F;Fc.printSystemConfig=$F;Fc.whenLoaded=aG;Fc.whenLoaded=aG;Fc.changeSystem=UF;Fc.changeSystem=UF;Fc.module=iA;Fc.module=iA;Fc.doesModuleExist=ZF;Fc.doesModuleExist=ZF;Fc.isModuleLoaded=YF;Fc.isModuleLoaded=YF;Fc.unwrapModuleResolution=WF;Fc.unwrapModuleResolution=
WF;Fc.wrapModuleResolution=VF;Fc.wrapModuleResolution=VF;Fc.Package=Vh;Fc._getPackage=fA;Fc._ensurePackage=vF;Fc.getPackageSpecs=BF;Fc._applyPackageConfig=wF;Fc._importPackage=xF;Fc._removePackage=yF;Fc._reloadPackage=zF;Fc._registerPackage=AF;Fc._lookupPackage=uF;Fc.importPackage=bG;Fc.importPackage=bG;Fc.registerPackage=cG;Fc.registerPackage=cG;Fc.removePackage=dG;Fc.removePackage=dG;Fc.reloadPackage=eG;Fc.reloadPackage=eG;Fc.getPackages=fG;Fc.getPackages=fG;Fc.getPackage=gG;Fc.getPackage=gG;Fc.getPackageOfModule=
hG;Fc.getPackageOfModule=hG;Fc.ensurePackage=iG;Fc.ensurePackage=iG;Fc.applyPackageConfig=jG;Fc.applyPackageConfig=jG;Fc.lookupPackage=kG;Fc.lookupPackage=kG;Fc.PackageRegistry=wh;Fc.PackageRegistry=wh;Fc.PackageRegistry=wh;Fc._moduleSourceChange=eA;Fc.moduleSourceChange=lG;Fc.moduleSourceChange=lG;Fc.computeRequireMap=cA;Fc.requireMap=mG;Fc.requireMap=mG;Fc._isHookInstalled=Ur;Fc._installHook=Tr;Fc._removeHook=ku;Fc.isHookInstalled=nG;Fc.isHookInstalled=nG;Fc.installHook=oG;Fc.installHook=oG;Fc.removeHook=
pG;Fc.removeHook=pG;Fc._wrapModuleLoad=gA;Fc._unwrapModuleLoad=IF;Fc.wrapModuleLoad=qG;Fc.wrapModuleLoad=qG;Fc.unwrapModuleLoad=rG;Fc.unwrapModuleLoad=rG;Fc.default=jl;Fc.ExportLookup=jl;Fc.cjs=hJ;Fc.cjs=hJ;Fc.cjs=hJ;Fc.default=bB;Fc.semver=bB;Fc.ImportInjector=Np;Fc.scripting=Fc.defaultSystem._scripting={module:Fc._module,ensurePackage:Fc._ensurePackage,registerPackage:Fc._registerPackage,importPackage:Fc._importPackage,lookupPackage:Fc._lookupPackage,ImportInjector:Fc.ImportInjector};Fc.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";Fc.classRuntime=Ax;Fc.defaultSystem.global[Fc.defaultClassToFunctionConverterName]=Fc.classRuntime.initializeClass;Fc.classHolder=Rq;Fc.ModulePackageMapping=Mn;Fc.classHolder.ModulePackageMapping=Fc.ModulePackageMapping;Fc.classHolder.Package=Fc.Package;Fc.classHolder.PackageRegistry=Fc.PackageRegistry;var sR=Ia("A",Fc.scripting);Fc.scripting=sR;Fc.scripting=sR;var iJ=Object.freeze({__proto__:null,System:rR,getSystem:nu,removeSystem:ou,loadedModules:XF,printSystemConfig:$F,
whenLoaded:aG,changeSystem:UF,module:iA,doesModuleExist:ZF,isModuleLoaded:YF,unwrapModuleResolution:WF,wrapModuleResolution:VF,importPackage:bG,registerPackage:cG,removePackage:dG,reloadPackage:eG,getPackages:fG,getPackage:gG,getPackageOfModule:hG,ensurePackage:iG,applyPackageConfig:jG,lookupPackage:kG,PackageRegistry:wh,moduleSourceChange:lG,requireMap:mG,isHookInstalled:nG,installHook:oG,removeHook:pG,wrapModuleLoad:qG,unwrapModuleLoad:rG,ExportLookup:jl,cjs:hJ,semver:bB,scripting:sR});Ia("aZ",
iJ);var tk=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");tk.isReference=XN;tk.removeUnreachableObjects=dq;tk.obj=ff;tk.Path=Sg;tk.connect=Mj;tk.disconnectAll=hw;tk.isReference=XN;tk.isReference=XN;var jJ=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(a){var d=a.snapshot,
k;for(k in d){var b=d[k],e=b.props&&b.props.textAndAttributes;if(e){var l=e.value;if(!Array.isArray(l))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(l.length&&"string"!==typeof l[0]){l=[].concat.apply([],l);for(var p=0;p<l.length;p+=2){var q=l[p+1];q&&Array.isArray(q)&&(l[p+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(q))))}b.props.textAndAttributes=Object.assign({},e,{value:l})}}}return a}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(a,d){(d=d.refForId(a.id).realObj)&&d.isMorph&&d.withAllSubmorphsDo(function(k){k.isWindow&&(k.submorphs.some(function(b){return"button wrapper"===b.name})&&k.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name}),k.minimizedBounds=null,tk.disconnectAll(k.get("minimize")),tk.connect(k.get("minimize"),"onMouseDown",
k,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return a}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(a){var d=a.id,k=a.snapshot,b;for(b in k){var e=k[b].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&e.styleSheets.value.filter(function(l){l=
k[l.id];var p=k[l.props.rules.value.id];return!l.props.styledMorphs&&!("lively.serializer-class-info"in p)}))}tk.removeUnreachableObjects([d],k);return a}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(a){var d=a.snapshot,k;for(k in d){var b=d[k],e=b["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className="DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===e.className&&delete b["lively.serializer-class-info"])}return a}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(a,d){(d=d.refForId(a.id).realObj)&&d.isMorph&&d.withAllSubmorphsDo(function(k){k.styleSheets&&0<k.styleSheets.length&&k.styleSheets.forEach(function(b){for(var e in tk.obj.dissoc(b.rules,["_rev"]))b.rules[e]=b.unwrapFoldedProps(b.rules[e])})});return a}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(a){var d=a.snapshot,k;for(k in d){var b=d[k]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return a}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(a){var d=a.snapshot,k=a.packages,b=k&&k["local://lively-object-modules/"]||{};k=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(C){return"{"+C+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var e in b){for(var l=b[e]["index.js"],p=$jscomp.makeIterator(k),q=p.next();!q.done;q=p.next()){var u=$jscomp.makeIterator(q.value),w=u.next().value;
q=u.next().value;if(u=u.next().value){w=new RegExp('(import\\s)(.*)(\\sfrom \\"'+w+")","g");var y=w.exec(l);y&&(l=l.replace(w,"import "+u(y[2])+'from "'+q))}else l=l.replace(new RegExp(w,"g"),q)}b[e]["index.js"]=l}for(var A in d)if((e=d[A]["lively.serializer-class-info"])&&e.module)for(b=e.module.package.name+"/"+e.module.pathInPackage,l=$jscomp.makeIterator(k),p=l.next();!p.done;p=l.next())if(u=$jscomp.makeIterator(p.value),p=u.next().value,q=u.next().value,u.next(),u=u.next().value,b.includes(p)){e.module.package.name=
q;e.module.package.version="0.1.0";e.module.pathInPackage=u||b.substring(b.indexOf(p)+p.length+1)||"index.js";break}return a}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(a,d){d=$jscomp.makeIterator(d.objectRefs());for(var k=d.next();!k.done;k=d.next())k=k.value.realObj,k.isList&&"function"===typeof k.initializeSubmorphs&&k.initializeSubmorphs();return a}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(a){var d=
a.snapshot,k;for(k in d){var b=d[k],e=b["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==e.className&&delete d[k],"InspectorTreeData"==e.className&&delete d[k],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete d[k])}return a}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(a){var d=
a.id,k=a.snapshot;Object.values(k).map(function(b){if(b.props.metadata&&tk.isReference(b.props.metadata.value)&&(b=k[b.props.metadata.value.id],b.props.commit&&tk.isReference(b.props.commit.value))){var e=k[b.props.commit.value.id].props,l=e.type,p=e.name;e=e._id;l&&p&&e&&(b.props.commit.value='__lv_expr__:({type: "'+l.value+'", name: "'+p.value+'", _id: "'+e.value+'"})')}});tk.removeUnreachableObjects([d],k);return a}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(a){var d=
a.packages,k,b=tk.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(k=b.get(d))k=k.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(d,k);return a}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(a){Object.values(a.snapshot).map(function(d){d.props.fontFamily&&
"Camphor"==d.props.fontFamily.value&&(d.props.fontFamily.value="Nunito")});return a}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(a){var d=a.snapshot;Object.values(d).map(function(k){k.props.master&&"string"===typeof k.props.master.value&&(k.props.master.value=k.props.master.value.split("styleguide://style guide").join("styleguide://System"));k.props.master&&k.props.master.value.id&&(k=d[k.props.master.value.id],k.props.auto.value=k.props.auto.value.split("styleguide://style guide").join("styleguide://System"))});
return a}}];tk.migrations=jJ;tk.migrations=jJ;tk.migrations=jJ;var Xd=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");Xd.normalizeOptions=function(a){a=Object.assign({reinitializeIds:!1,plugins:[].concat($jscomp.arrayFromIterable(Xd.allPlugins),[new Xd.StyleguidePlugin])},a);a.reinitializeIds&&(a.reinitializeIds="function"===typeof a.reinitializeIds?a.reinitializeIds:function(d,k){return k.realObj.isMorph?Xd.newMorphId(k.realObj.constructor):null});return a};Xd.serializeMorph=
jA;Xd.deserializeMorph=kA;Xd.loadWorldFromResource=YN;Xd.saveWorldToResource=ZN;Xd.copyMorph=sG;Xd.createMorphSnapshot=pu;Xd.loadMorphFromSnapshot=mp;Xd.resourceToJSON=Z_;Xd.findPackagesInFileSpec=$_;Xd.packagesOfSnapshot=$N;Xd.loadPackagesAndModulesOfSnapshot=lA;Xd.findRequiredPackagesOfSnapshot=tG;Xd.requiredModulesOfSnapshot=eq;Xd.deserializeWithMigrations=Yy;Xd.serialize=mw;Xd.allPlugins=Bp;Xd.MorphicEnv=tn;Xd.resource=sc;Xd.newMorphId=bz;Xd.morph=Zi;Xd.pathForBrowserHistory=nw;Xd.ast=vH;Xd.StyleguidePlugin=
aJ;Xd.findLocalComponents=bA;Xd.serializeMorph=jA;Xd.serializeMorph=jA;Xd.deserializeMorph=kA;Xd.deserializeMorph=kA;Xd.loadWorldFromResource=YN;Xd.loadWorldFromResource=YN;Xd.saveWorldToResource=ZN;Xd.saveWorldToResource=ZN;Xd.copyMorph=sG;Xd.copyMorph=sG;Xd.modules=iJ;Xd.createFiles=Tc;Xd.promise=Uf;Xd.Path=Sg;Xd.graph=Cq;Xd.arr=Ne;Xd.migrations=jJ;var Vx=Xd.modules;Xd.registerPackage=Vx.registerPackage;Xd.module=Vx.module;Xd.getPackage=Vx.getPackage;Xd.ensurePackage=Vx.ensurePackage;Xd.lookupPackage=
Vx.lookupPackage;Xd.semver=Vx.semver;Xd.objectScriptingEnabled=!1;Xd.createMorphSnapshot=pu;Xd.createMorphSnapshot=pu;Xd.loadMorphFromSnapshot=mp;Xd.loadMorphFromSnapshot=mp;Xd.packagesOfSnapshot=$N;Xd.packagesOfSnapshot=$N;Xd.loadPackagesAndModulesOfSnapshot=lA;Xd.loadPackagesAndModulesOfSnapshot=lA;Xd.findRequiredPackagesOfSnapshot=tG;Xd.findRequiredPackagesOfSnapshot=tG;var fc=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");fc.generateUnfolded=function(a,d,k){d=void 0===d?["top","left",
"right","bottom"]:d;k=void 0===k?"core":k;var b={},e={};d=$jscomp.makeIterator(d);for(var l=d.next();!l.done;e={$jscomp$loop$prop$m$1457$2719:e.$jscomp$loop$prop$m$1457$2719},l=d.next())e.$jscomp$loop$prop$m$1457$2719=l.value,b[a+fc.string.capitalize(e.$jscomp$loop$prop$m$1457$2719)]={group:k,derived:!0,generated:!0,after:[a],get:function(p){return function(){return this.getProperty(a)[p.$jscomp$loop$prop$m$1457$2719]}}(e),set:function(p){return function(q){var u={};this[a]=Object.assign({},this.getProperty(a),
(u[p.$jscomp$loop$prop$m$1457$2719]=q,u))}}(e)};return b};fc.Color=qf;fc.Line=pk;fc.Point=xf;fc.pt=kh;fc.rect=zk;fc.Rectangle=Qd;fc.Transform=Qi;fc.string=Bg;fc.properties=km;fc.obj=ff;fc.arr=Ne;fc.num=Gj;fc.promise=Uf;fc.tree=Dq;fc.PropertyPath=Sg;fc.signal=Ak;fc.copy=Zy;fc.deserializeSpec=Vn;fc.ExpressionSerializer=Vj;fc.serializeSpec=xm;fc.getClassName=Un;fc.renderRootMorph=TD;fc.ShadowObject=Dn;fc.AnimationQueue=UH;fc.easings=Fn;fc.addOrChangeCSSDeclaration=Vo;fc.Icon=Ql;fc.morph=Zi;fc.newMorphId=
bz;fc.sanitizeFont=$y;fc.MorphicEnv=tn;fc.config=rk;fc.CommandHandler=Jha;fc.KeyHandler=ZP;fc.findKeysForPlatform=WD;fc.TargetScript=$P;fc.copyMorph=sG;fc.ComponentPolicy=bJ;fc.defaultCommandHandler=new fc.CommandHandler;var Vi=Ia("M",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Morph")&&"function"===typeof d.Morph?d.Morph:d.Morph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b||(b={});var e=b.env||fc.MorphicEnv.default();this._env=e;this._rev=e.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=fc.newMorphId(fc.getClassName(this));this._animationQueue=new fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=fc.obj.select(b,fc.arr.intersect(Object.keys(b),this.styleProperties));
this.initializeProperties(b);b.bounds&&(this.setBounds(b.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=b.height||void 0!=b.width)this._parametrizedProps.extent=this.extent;b.layout&&(this.layout=b.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(b,e,l,p){this._env=fc.MorphicEnv.default();this._rev=b.rev;
this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=e.id;this._animationQueue=new fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=fc.obj.select(b.props,fc.arr.intersect(Object.keys(b.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;b=p.expressionSerializer;for(var q in this._parametrizedProps)(e=this._parametrizedProps[q].value)&&fc.obj.isString(e)&&b.isSerializedExpression(e)&&
(this._parametrizedProps[q]=b.deserializeExpr(e));this.initializeProperties();this._pool=p}},{key:"__after_deserialize__",value:function(b,e,l){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(p){console.error("[lively.morphic] "+this+".onLoad() error: "+p.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(l.mastersInSubHierarchy?l.mastersInSubHierarchy.push(this.master):l.mastersInSubHierarchy=[this.master])}},{key:"__only_serialize__",get:function(){var b=
this.defaultProperties,e=this.propertiesAndPropertySettings().properties,l=[];0<this._tickingScripts.length&&l.push("_tickingScripts");this.attributeConnections&&l.push("attributeConnections");var p=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(w){return w.__isBeingSerialized__&&w.master}).find(Boolean),q;for(q in e){var u=e[q];p&&p.managesMorph(this)&&void 0!=p._overriddenProps.get(this)[q]?l.push(q):u.readOnly||u.derived||fc.obj.equals(this[q],b[q])||u.hasOwnProperty("serialize")&&
!u.serialize||l.push(q)}return p&&!this.isComponent?p.propsToSerializeForMorph(this,l):l}},{key:"__additionally_serialize__",value:function(b,e,l,p){if((e=b.props.submorphs)&&!this.isEpiMorph)for(e=e.value,p=e.length;p--;)l.refForId(e[p].id).realObj.isEpiMorph&&fc.arr.removeAt(e,p);l=$jscomp.makeIterator(fc.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(e=l.next();!e.done;e=l.next())e=e.value,b.props[e]={key:e,verbatim:!0,value:fc.obj.extract(this[e],
["top","right","bottom","left"],function(q,u){return u&&u.isColor?u.toTuple():u})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(b,e){b=void 0===b?!0:b;e=void 0===e?new WeakMap:e;var l=this.defaultProperties,p=this.propertiesAndPropertySettings().properties,q={submorphs:!0},u={};if(e.has(this))return e.get(this);e.set(this,u);for(var w in p){var y=p[w];y&&(y.readOnly||y.derived||y.hasOwnProperty("serialize")&&
!y.serialize||w in q||b&&(fc.obj.equals(this[w],l[w])||this[w]&&l[w]&&this[w].valueOf&&l[w].valueOf&&fc.obj.equals(this[w].valueOf(),l[w].valueOf()))||(u[w]=this[w]&&this[w].isMorph?this[w].spec(b,e):this[w]&&"layout"===w?this[w].copy():this[w]))}u.submorphs=this.submorphs.map(function(A){return A.spec(b,e)});u.type=this.constructor;return u}},{key:"printSpec",value:function(b,e){e=void 0===e?0:e;b=(void 0===b?null:b)||this.spec();var l={name:!0,type:!0,submorphs:!0},p="  ".repeat(e+1),q="  ".repeat(e)+
"{\n"+(p+'name: "'+b.name+'",\n')+(p+'type: "'+b.type+'",\n'),u;for(u in b)l[u]||(q+=""+p+u+": "+fc.string.print(b[u])+",\n");if(b.submorphs){q+=p+"submorphs: [\n";b=$jscomp.makeIterator(b.submorphs);for(l=b.next();!l.done;l=b.next())q+=this.printSpec(l.value,e+1);q+="]\n"}return q+="  ".repeat(e)+"}\n"}},{key:"defaultProperties",get:function(){var b=this.constructor,e=b[Symbol.for("lively-instance-superclass")];if(!b._morphicDefaultPropertyValues||b._morphicDefaultPropertyValues==(e&&e._morphicDefaultPropertyValues)){b=
this.constructor._morphicDefaultPropertyValues={};e=this.propertiesAndPropertySettings().properties;for(var l in e){var p=e[l];p.hasOwnProperty("defaultValue")&&(p=p.defaultValue,Array.isArray(p)&&(p=p.slice()),b[l]=p)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(b){return this.defaultProperties[b]}},{key:"getProperty",value:function(b){return this._morphicState[b]}},{key:"setProperty",value:function(b,e,l){return this.addValueChange(b,e,l)}},{key:"changeMetaData",
value:function(b,e,l,p){l=void 0===l?!0:l;p=void 0===p?!0:p;var q=this.metadata;q||(q={});(new fc.PropertyPath(b)).withParentAndKeyDo(q,!0,function(u,w){u[w]=p?Object.assign({},u[w],{},e):e;var y=u.__dont_serialize__;l?y&&y.includes(w)&&(fc.arr.remove(y,w),0===y.length&&delete u.__dont_serialize__):(y||(y=u.__dont_serialize__=[]),fc.arr.pushIfNotIncluded(y,w))});this.metadata=q}},{key:"installFont",value:function(b,e){var l={};this.installedFonts=Object.assign({},this.installedFonts,(l[b]=e,l));this.insertFontCSS(b,
e)}},{key:"uninstallFont",value:function(b){delete this.installedFonts[b];(b=document.getElementById(this.id+"-"+b))&&b.remove()}},{key:"ensureInstalledFonts",value:function(b,e){b=$jscomp.makeIterator(b);for(var l=b.next();!l.done;l=b.next())(l=document.getElementById(this.id+"-"+l.value))&&l.remove();e=$jscomp.makeIterator(e);for(l=e.next();!l.done;l=e.next())b=l.value,this.env.fontMetric.isFontSupported(fc.sanitizeFont(b))||this.insertFontCSS(b,this.installedFonts[b])}},{key:"insertFontCSS",value:function(b,
e){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(l.whenRendered(),2);e.endsWith(".otf")?fc.addOrChangeCSSDeclaration(l.id+"-"+b,"@font-face {\n             font-family: "+b+';\n             src: url("'+l.installedFonts[b]+'") format("opentype");\n         }'):fc.addOrChangeCSSDeclaration(l.id+"-"+b,'@import url("'+l.installedFonts[b]+'");');p.jumpToEnd()})}},{key:"toString",value:function(){return"<"+fc.getClassName(this)+" - "+(this.name?
this.name:this.id)+">"}},{key:"edit",value:function(b){return this.env.world.execCommand("open object editor",Object.assign({className:fc.getClassName(this)},b,{target:this}))}},{key:"inspect",value:function(b){return this.env.world.execCommand("open object inspector",Object.assign({},b,{target:this}))}},{key:"livelyCustomInspect",value:function(){var b={_id:!0,_owner:!0},e={},l=this.propertiesAndPropertySettings().properties,p=[],q;for(q in l)b[q]||l[q].derived&&!l[q].showInInspector||(e[q]=!0,p.push({key:q,
value:this[q]}));p.push({key:"id",value:this.id});p.push({key:"owner",value:this.owner});p=p.sort(function(w,y){w=w.key.toLowerCase();y=y.key.toLowerCase();return w<y?-1:w===y?0:1});if(this.attributeConnections)for(l=$jscomp.makeIterator(this.attributeConnections),q=l.next();!q.done;q=l.next())q=q.value,b["$$"+q.sourceAttrName,""+q.sourceAttrName]=!0;Object.assign(e,b);b=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(l=b.next();!l.done;l=b.next())l=l.value,l in this&&(e[l]=!0,p.push({key:l,value:this[l],keyString:"[internal] "+l}));for(var u in this)!e[u]&&this.hasOwnProperty(u)&&p.unshift({key:u,value:this[u],keyString:"[UNKNOWN PROPERTY] "+u});return{sort:!1,includeDefault:!1,properties:p}}},{key:"show",value:function(b){return $world.execCommand("show morph",{morph:this,loop:b})}},{key:"setStatusMessage",value:function(b,e,l,p){var q=this.world();p=Object.assign({maxLines:7},p);return q?q.setStatusMessageFor(this,
b,e,l,p):console.log(b)}},{key:"showError",value:function(b){var e=this.world();return e?e.showErrorFor(this,b):console.error(b)}},{key:"onChange",value:function(b){var e=this,l=b.meta&&b.meta.animation,p=b.prop,q=b.value;if("position"===p||"rotation"===p||"scale"===p||"origin"===p||"reactsToPointer"===p)this.onBoundsChanged(this.bounds()),l={},this.updateTransform((l[p]=q,l));else if("extent"==p)this.onBoundsChanged(this.bounds());else"layout"==p&&(l?q&&q.attachAnimated(l.duration,this,l.easing):
q&&q.attach());this.layout&&this.layout.onChange(b);this.isComponent&&!fc.PropertyPath("meta.metaInteraction").get(b)&&(p=this.world(),delete this._preview,(p?p.withAllSubmorphsSelect(function(u){return u.master&&u.master.uses(e)}):[]).forEach(function(u){u.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,b)}},{key:"onBoundsChanged",value:function(b){var e=this;fc.signal(this,"bounds",b);[].concat($jscomp.arrayFromIterable(b.corners),$jscomp.arrayFromIterable(b.sides)).forEach(function(l){fc.signal(e,
l,b.partNamed(l))})}},{key:"onSubmorphChange",value:function(b,e){var l=this;if(this.isComponent&&!fc.PropertyPath("meta.metaInteraction").get(b)&&!fc.PropertyPath("meta.layoutAction").get(b)){var p=this.world();p&&p.withAllSubmorphsDo(function(q){q.master&&q.master.uses(l)&&q.requestMasterStyling()})}if(this.master)this.master.onMorphChange(e,b);this.layout&&this.layout.onSubmorphChange(e,b)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(b){this.env.changeManager.apply(this,
b)}},{key:"addValueChange",value:function(b,e,l){return this.env.changeManager.addValueChange(this,b,e,l)}},{key:"addMethodCallChangeDoing",value:function(b,e){return this.env.changeManager.addMethodCallChangeDoing(b,this,e)}},{key:"groupChangesWhile",value:function(b,e){return this.env.changeManager.groupChangesWhile(this,b,e)}},{key:"dontRecordChangesWhile",value:function(b){return this.env.changeManager.dontRecordChangesWhile(this,b)}},{key:"recordChangesWhile",value:function(b,e){return this.env.changeManager.recordChangesWhile(b,
e)}},{key:"recordChangesStart",value:function(b){return this.env.changeManager.recordChangesStartForMorph(this,b)}},{key:"recordChangesStop",value:function(b){return this.env.changeManager.recordChangesStopForMorph(this,b)}},{key:"withMetaDo",value:function(b,e){return this.env.changeManager.doWithValueChangeMeta(b,this,e)}},{key:"undoStart",value:function(b){return this.env.undoManager.undoStart(this,b)}},{key:"undoStop",value:function(b){return this.env.undoManager.undoStop(this,b)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e._animationQueue.registerAnimation(b),e._animationQueue.animationsActive?l?p.yield(l.asPromise(),3):p.jumpTo(2):(l&&l.finish(),p.return(Promise.resolve(e)))):2!=p.nextAddress?p.return(p.yieldResult):p.return(Promise.resolve(e))})}},{key:"withAnimationDo",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){p=
l.groupChangesWhile(!1,b);q=p.changes;return u.yield(Promise.all(Object.values(fc.arr.groupBy(q,function(w){return w.target.id})).map(function(w){var y=Object.assign({},e),A;w.forEach(function(C){A=C.target;C.reverseApply();y[C.prop]=C.value});return A&&A.animate(y)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},
{key:"scrollBounds",value:function(){var b=this.scroll,e=this.scrollExtent;return new fc.Rectangle(b.x,b.y,e.x,e.y)}},{key:"scrollDown",value:function(b){this.scroll=this.scroll.addXY(0,b)}},{key:"scrollUp",value:function(b){this.scrollDown(50*-b)}},{key:"scrollLeft",value:function(b){this.scroll=this.scroll.addXY(b,0)}},{key:"scrollRight",value:function(b){this.scrollLeft(-b)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},
{key:"addStyleClass",value:function(b){this.styleClasses=fc.arr.uniq(this.styleClasses.concat(b))}},{key:"removeStyleClass",value:function(b){this.styleClasses=this.styleClasses.filter(function(e){return e!=b})}},{key:"adjustOrigin",value:function(b){var e=this.origin,l=this.globalBounds().topLeft();this.origin=b;this.submorphs.forEach(function(q){return q.position=q.position.subPt(b.subPt(e))});var p=this.globalBounds().topLeft();l=l.subPt(p);this.globalPosition=this.globalPosition.addPt(l)}},{key:"setBounds",
value:function(b){this.extent=b.extent();this.position=b.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var b=this.extent;return fc.rect(0,0,b.x,b.y)}},{key:"relativeBounds",value:function(b){b=b||this.world();var e=this.origin.negated().extent(this.extent);e=b?this.transformRectToMorph(b,e):this.getGlobalTransform().transformRectToRect(e);this.isClip()||this.submorphs.forEach(function(l){e=e.union(l.relativeBounds(b))});return e}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},
{key:"relativeSubmorphBounds",value:function(){var b=this.innerBounds();return this.submorphs.map(function(e){e=e.bounds();return fc.rect(e.x/b.width,e.y/b.height,e.width/b.width,e.height/b.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(b){b=fc.arr.filter(this.submorphs,void 0===b?function(){return!0}:b);return 1>b.length?this.innerBounds():b.map(function(e){return e.bounds()}).reduce(function(e,l){return e.union(l)})}},
{key:"fitToSubmorphs",value:function(b){b=void 0===b?fc.Rectangle.inset(0):b;var e=this.submorphs;if(e.length){e=e.reduce(function(q,u){return q.union(u.bounds())},e[0].bounds());var l=e.top()-b.top(),p=e.left()-b.left();this.moveBy(fc.pt(p,l));fc.arr.invoke(this.submorphs,"moveBy",fc.pt(-p,-l));this.extent=fc.pt(e.width+b.left()+b.right(),e.height+b.top()+b.bottom())}}},{key:"align",value:function(b,e){return this.moveBy(e.subPt(b))}},{key:"moveBy",value:function(b){this.position=this.position.addPt(b);
return this}},{key:"rotateBy",value:function(b){this.rotation+=b}},{key:"resizeBy",value:function(b){this.extent=this.extent.addPt(b)}},{key:"snap",value:function(b){this.position=this.position.roundTo(b||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var b=this;b;){if(b.isEpiMorph)return!0;b=b.owner}return!1}},{key:"replaceWith",value:function(b,e,l){l=void 0===l?!0:l;if(this===b||!b)return b;if(this===b.owner)return b.replaceWith(this),
b;var p=this.owner,q=this.submorphs,u=this.getTransform().copy();e="number"===typeof e?e:p?p.submorphs.indexOf(this):-1;var w=b.owner,y=fc.arr.without(b.submorphs,this),A=b.getTransform().copy(),C=w?w.submorphs.indexOf(b):-1;p&&this.remove();w&&b.remove();l&&(this.submorphs=[],b.submorphs=[]);p===b?(w&&w.addMorphAt(this,C),l&&(this.submorphs=y.slice(0,e).concat(b).concat(y.slice(e)),b.submorphs=q)):(p&&p.addMorphAt(b,e),w&&w.addMorphAt(this,C),l&&(b.submorphs=q,this.submorphs=y));b.setTransform(u);
this.setTransform(A);return b}},{key:"addMorphAt",value:function(b,e){var l=this;if(!b||"object"!==typeof b)throw Error(b+" cannot be added as a submorph to "+this);if(b.isMorph){if(b.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+b+" to "+this)),null;if(b===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}b.isMorph||(b=fc.morph(b));var p=this.submorphs.indexOf(b);
if(!(-1<p&&p===e))return this.requestMasterStyling(),this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[b,e],undo:{target:this,selector:"removeMorph",args:[b]}},function(){var q=b.owner,u=l.submorphs;if(q&&q!==l){var w=b.transformForNewOwner(l);b.remove()}b._env!==l._env&&(b._env=l._env);e=Math.min(u.length,Math.max(0,e));-1<p&&(u.splice(p,1),p<e&&e--);u.splice(e,0,b);b._owner=l;b._cachedPaths={};w&&b.setTransform(w);b.requestStyling();l._morphicState.submorphs=u;l._submorphOrderChanged=
!0;l.makeDirty();b.resumeSteppingAll();b.withAllSubmorphsDo(function(y){return y.onOwnerChanged(l)});l.world()&&b._requestMasterStyling&&(b.master&&b.master.applyIfNeeded(!0),b._requestMasterStyling=!1)}),b}},{key:"addMorph",value:function(b,e){var l=this.submorphs;e=e?l.indexOf(e):-1;return this.addMorphAt(b,-1===e?l.length:e)}},{key:"addMorphBack",value:function(b){return this.addMorph(b,b===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(b){var e=this.submorphs.indexOf(b);
-1!==e&&((this.getProperty("submorphs")||[]).splice(e,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",args:[b],undo:{target:this,selector:"addMorphAt",args:[b,e]}},function(){b.suspendSteppingAll();b._owner=null}),this._pathDependants=fc.arr.withoutAll(this._pathDependants,b._pathDependants))}},{key:"remove",value:function(){var b=this;fc.signal(this,"onRemove");this.ownerChain().forEach(function(e){e._stylingVisitor&&e._stylingVisitor.deleteFromCache(b)});this.owner&&this.owner.removeMorph(this);
this._cachedPaths={};this._pathDependants.forEach(function(e){return e._cachedPaths={}});this._pathDependants=[];this.withAllSubmorphsDo(function(e){return e.onOwnerChanged(null)});return this}},{key:"abandon",value:function(b){b=void 0===b?!0:b;fc.signal(this,"onAbandon");this.emptyComments();b&&this.remove();this.submorphs.forEach(function(e){return e.abandon(!1)})}},{key:"onOwnerChanged",value:function(b){b&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(b){b=void 0===
b?1E3:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(e.animate({opacity:0,duration:b,easing:fc.easings.outQuad}),2);e.remove();e.opacity=1;l.jumpToEnd()})}},{key:"fadeIn",value:function(b){b=void 0===b?1E3:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e.opacity=0;e.animate({opacity:1,duration:b});return l.return(e)})}},{key:"fadeIntoWorld",value:function(b,e){b=void 0===b?$world.visibleBounds().center():
b;e=void 0===e?200:e;var l=this,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return p=new fc.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:fc.Color.transparent}),q=l.env.world,p.openInWorld(),p.addMorph(l),l.position=p.extent.scaleBy(.5),p.center=b,p.scale=.8,w.yield(p.animate({opacity:1,scale:1,duration:e}),2);u=l.globalBounds();q.addMorph(l);l.top=u.top();l.left=u.left();p.remove();return w.return(l)})}},{key:"removeAllMorphs",value:function(){this.submorphs=
[]}},{key:"bringToFront",value:function(){this.owner&&fc.arr.last(this.owner.submorphs)!==this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(b){if(b(this))return this;for(var e=$jscomp.makeIterator(this.submorphs),l=e.next();!l.done;l=e.next())if(l=l.value.withAllSubmorphsDetect(b))return l}},{key:"withAllSubmorphsDoExcluding",value:function(b,e){var l=[b(this)];if(e(this))return l;for(var p=$jscomp.makeIterator(this.submorphs),
q=p.next();!q.done;q=p.next())fc.arr.pushAll(l,q.value.withAllSubmorphsDoExcluding(b,e));return l}},{key:"withAllSubmorphsDo",value:function(b){for(var e=[b(this)],l=$jscomp.makeIterator(this.submorphs),p=l.next();!p.done;p=l.next())fc.arr.pushAll(e,p.value.withAllSubmorphsDo(b));return e}},{key:"withAllSubmorphsSelect",value:function(b){var e=[];this.withAllSubmorphsDo(function(l){return b(l)&&e.push(l)});return e}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):
[]}},{key:"world",value:function(){return this.owner?this.owner.world():null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(b){return b.isWindow})}},{key:"openInWorldNear",value:function(b,e){var l=this;e=e||this.world()||this.env.world;if(!e)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(l.whenRendered(),2);l.opacity=
1;p.jumpToEnd()})}));this.center=b;this.setBounds(e.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(b){b=b||this.world()||this.env.world;var e=b.firstHand?b.firstHand.position.addPt(this.hasFixedPosition?fc.pt(0,0):b.scroll):fc.pt(0,0);return b?this.openInWorldNear(e):void 0}},{key:"openInWorld",value:function(b,e){e=e||this.world()||this.env.world;if(!e)return console.warn("Cannot open morph "+
this+", world morph not found;"),this;b?this.position=b:(this.center=this.hasFixedPosition?e.visibleBounds().extent().scaleBy(.5,.5):e.visibleBounds().center(),this.snap());e.addMorph(this);return this}},{key:"openInHand",value:function(b){b||(b=(this.world()||this.env.world).firstHand);b.grab(this);this.center=fc.pt(0,0)}},{key:"openInWindow",value:function(b){b=void 0===b?{title:this.name,name:"window for "+this.name,world:null}:b;return(b.world||this.world()||this.env.world).openInWindow(this,
fc.obj.dissoc(b,["world"]))}},{key:"isAncestorOf",value:function(b){for(b=b.owner;b;){if(b===this)return!0;b=b.owner}return!1}},{key:"morphsContainingPoint",value:function(b,e){e||(e=[]);if(!this.fullContainsWorldPoint(b))return e;for(var l=this.submorphs.length-1;0<=l;l--)this.submorphs[l].morphsContainingPoint(b,e);this.innerBoundsContainsWorldPoint(b)&&e.push(this);return e}},{key:"morphBeneath",value:function(b){var e=this.world()||this.owner;if(!e)return null;b=e.morphsContainingPoint(b);e=b.indexOf(this);
return b[e+1]}},{key:"transformTillMorph",value:function(b,e){if("down"==(void 0===e?"up":e))return b.transformTillMorph(this,"up").inverse();e=new fc.Transform;for(var l=this;l&&l!=b;l=l.owner){var p=l,q=p.origin;p=p.scroll;0===q.x&&0===q.y||e.preConcatenate(new fc.Transform(l.origin));e.preConcatenate(l.getTransform());l!=this&&(0===p.x&&0===p.y||!l.owner||e.preConcatenate(new fc.Transform(p.negated())));l.hasFixedPosition&&l.owner&&e.preConcatenate(new fc.Transform(l.owner.scroll))}return e}},
{key:"localize",value:function(b){var e=this.world(),l=b.x,p=b.y;return e?e.transformPointToMorph(this,fc.pt(l,p)):b}},{key:"worldPoint",value:function(b){var e=this.world(),l=b.x,p=b.y;return e?this.transformPointToMorph(e,fc.pt(l,p)):b.addPt(this.position)}},{key:"transformToMorph",value:function(b){var e=this.getGlobalTransform(),l=b.getGlobalTransform().inverse();e.preConcatenate(l);l=b.scroll;0===l.x&&0===l.y||!b.owner||e.preConcatenate(new fc.Transform(l));return e}},{key:"transformPointToMorph",
value:function(b,e){for(var l=this.hasFixedPosition,p=$jscomp.makeIterator(this.pathToMorph(b)),q=p.next();!q.done;q=p.next()){var u=$jscomp.makeIterator(q.value);q=u.next().value;u=u.next().value;this!=u&&"up"==q&&(e.x-=u.scroll.x,e.y-=u.scroll.y,u.hasFixedPosition&&(l=u.owner&&u.owner.isWorld),u.hasFixedPosition&&u.owner&&u.owner.owner&&(e.x+=u.owner.scroll.x,e.y+=u.owner.scroll.y));this.applyTransform(q,u,e);this!=u&&"down"==q&&(e.x+=u.scroll.x,e.y+=u.scroll.y,u.hasFixedPosition&&(l=u.owner&&u.owner.isWorld),
u.hasFixedPosition&&u.owner&&u.owner.owner&&(e.x-=u.owner.scroll.x,e.y-=u.owner.scroll.y))}l&&b.isWorld&&(e.x=e.x-b.position.x+b.scroll.x,e.y=e.y-b.position.y+b.scroll.y);l&&this.isWorld&&(e.x=e.x+this.position.x-this.scroll.x,e.y=e.y+this.position.y-this.scroll.y);return e}},{key:"transformRectToMorph",value:function(b,e){var l=this,p,q,u;[p=e.topLeft(),q=e.topRight(),u=e.bottomRight(),e=e.bottomLeft()].forEach(function(w){return l.transformPointToMorph(b,w)});return fc.Rectangle.unionPts([p,q,u,
e])}},{key:"applyTransform",value:function(b,e,l){"up"==b?(l.x+=e.origin.x,l.y+=e.origin.y,l.matrixTransform(e.getTransform(),l)):(l.matrixTransform(e.getInverseTransform(),l),l.x-=e.origin.x,l.y-=e.origin.y)}},{key:"_addPathDependant",value:function(b){this._pathDependants.includes(b)||this._pathDependants.push(b)}},{key:"pathToMorph",value:function(b){var e;if(e=this._cachedPaths[b.id])return e;e=this.closestCommonAncestor(b)||this;var l=this,p=[],q=[];for(e._addPathDependant(this);l&&l!=e;)q.push(["up",
l]),l._addPathDependant(this),l=l.owner;for(l=b;l&&l!=e;)p.push(["down",l]),l._addPathDependant(this),l=l.owner;return this._cachedPaths[b.id]=e=[].concat($jscomp.arrayFromIterable(q),$jscomp.arrayFromIterable(p.reverse()))}},{key:"closestCommonAncestor",value:function(b){return fc.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[b].concat($jscomp.arrayFromIterable(b.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(b){return new fc.Transform(this.transformToMorph(b))}},
{key:"localizePointFrom",value:function(b,e){var l=b.x;b=b.y;try{return e.transformPointToMorph(this,fc.pt(l,b))}catch(p){return console.warn("problem "+p+" in localizePointFrom"),fc.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(fc.pt(0,0))}},{key:"globalPosition",set:function(b){return this.position=this.owner?this.owner.localize(b):b}},{key:"ensureToBeInWorldBounds",value:function(){var b=
this.world();if(b){var e=this.globalBounds();b=b.innerBounds().translateForInclusion(e).topLeft().subPt(e.topLeft());this.moveBy(b)}}},{key:"getTransform",value:function(){this._transform||this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(b){b=void 0===b?{}:b;var e=b.position,l=b.scale,p=b.origin,q=b.rotation;b=this._transform||new fc.Transform;var u=
this._invTransform||new fc.Transform;e=e||this.position;p=p||this.origin;l=l||this.scale;q=q||this.rotation;b.a=l*Math.cos(q);b.b=l*Math.sin(q);b.c=l*-Math.sin(q);b.d=l*Math.cos(q);b.e=b.a*-p.x+b.c*-p.y+e.x;b.f=b.b*-p.x+b.d*-p.y+e.y;e=b.a;l=b.b;p=b.c;q=b.d;var w=b.e,y=b.f,A=1/(e*q-p*l);u.a=q*A;u.b=-l*A;u.c=-p*A;u.d=e*A;u.e=(p*y-w*q)*A;u.f=-(e*y-l*w)*A;this._transform=b;this._invTransform=u}},{key:"setTransform",value:function(b){this.position=b.getTranslation();this.rotation=fc.num.toRadians(b.getRotation());
this.scale=b.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(b){return this.fullContainsPoint(null==this.owner?b:this.owner.localize(b))}},{key:"fullContainsPoint",value:function(b){return this.bounds().containsPoint(b)}},{key:"innerBoundsContainsWorldPoint",value:function(b){return this.innerBoundsContainsPoint(this.localize(b))}},{key:"innerBoundsContainsPoint",value:function(b){return this.innerBounds().containsPoint(b.addPt(this.origin).subPt(this.scroll))}},
{key:"get",value:function(b){if(!b)return null;try{return this.getSubmorphNamed(b)||this.getNameTest(this,b)&&this||this.getOwnerOrOwnerSubmorphNamed(b)}catch(e){if(e.constructor==RangeError&&"Maximum call stack size exceeded"==e.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+
e.stack);throw e;}}},{key:"getNameTest",value:function(b,e){if(fc.obj.isRegExp(e)){if(e.test(b.name)||e.test(String(b)))return!0}else if(b.name===e||String(b)===e)return!0;return!1}},{key:"getAllNamed",value:function(b,e){e=void 0===e?[]:e;if(!this._morphicState||!this.submorphs.length)return e;for(var l=0;l<this.submorphs.length;l++){var p=this.submorphs[l];this.getNameTest(p,b)&&e.push(p)}for(l=0;l<this.submorphs.length;l++)this.submorphs[l].getAllNamed(b,e);return e}},{key:"getSubmorphNamed",value:function(b){if(!this._morphicState||
!this.submorphs.length)return null;for(var e=0;e<this.submorphs.length;e++){var l=this.submorphs[e];if(this.getNameTest(l,b))return l}for(e=0;e<this.submorphs.length;e++)if(l=this.submorphs[e].getSubmorphNamed(b))return l;return null}},{key:"getSubmorphsByStyleClassName",value:function(b){return this.withAllSubmorphsSelect(function(e){return e.styleClasses.includes(b)})}},{key:"getOwnerNamed",value:function(b){return this.ownerChain().find(function(e){return e.name===b})}},{key:"getOwnerOrOwnerSubmorphNamed",
value:function(b){var e=this.owner;if(!e)return null;if(e.name===b)return e;for(var l=0;l<e.submorphs.length;l++){var p=e.submorphs[l];if(p!==this&&(this.getNameTest(p,b)||(p=p.getSubmorphNamed(b))))return p}return this.owner.getOwnerOrOwnerSubmorphNamed(b)}},{key:"getMorphWithId",value:function(b){return this.withAllSubmorphsDetect(function(e){return b===e.id})}},{key:"setMirrored",value:function(b){b?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",
value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},{key:"onMouseDown",value:function(b){if(this===b.targetMorph&&(b.state.clickedMorph=this,1==b.state.prevClick.clickCount&&200>=Date.now()-b.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(b);return}this===b.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(b){}},{key:"onMouseUp",value:function(b){b.state.clickedMorph=
null;this===b.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(b){}},{key:"onLongClick",value:function(b){}},{key:"addKeyBindings",value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[b],undo:null},function(){e._keybindings||(e._keybindings=[]);e._cachedKeyhandlers=null;e._keybindings.unshift.apply(e._keybindings,$jscomp.arrayFromIterable(b))})}},{key:"keybindings",get:function(){return this._keybindings||
[]}},{key:"keybindings",set:function(b){this._cachedKeyhandlers=null;return this._keybindings=b}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||(this._cachedKeyhandlers=[fc.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var b=this.keyhandlers[0].platform;return this.keybindings.reduce(function(e,l){var p=fc.findKeysForPlatform(l.keys,b),q=l.command,u="string"===typeof q?q:q.command||q.name;return"string"!==typeof p?e:p.split("|").reduce(function(w,
y){var A={};return Object.assign(w,(A[y]={name:u,command:q,prettyKeys:fc.KeyHandler.prettyCombo(y)},A))},e)},{})}},{key:"keysForCommand",value:function(b,e){e=void 0===e?!0:e;var l=this.keyCommandMap,p=Object.keys(l).find(function(q){return l[q].name===b});return p&&e?l[p].prettyKeys:p}},{key:"simulateKeys",value:function(b){return fc.KeyHandler.simulateKeys(this,b)}},{key:"onKeyDown",value:function(b){fc.KeyHandler.invokeKeyHandlers(this,b,!1)&&b.stop()}},{key:"onKeyUp",value:function(b){}},{key:"onContextMenu",
value:function(b){var e=this;b.targetMorph===this&&(lively.FreezerRuntime||b.stop(),Promise.resolve(this.menuItems(b)).then(function(l){return e.openMenu(l,b)}).catch(function(l){return $world.logError(l)}))}},{key:"openMenu",value:function(b,e){var l=this.world();return b&&b.length&&l?l.openWorldMenu(e,b):null}},{key:"menuItems",value:function(b){return $world.defaultMenuItems(this,b)}},{key:"onCut",value:function(b){}},{key:"onCopy",value:function(b){}},{key:"onPaste",value:function(b){}},{key:"onDragStart",
value:function(b){this.undoStart("drag-move");b=b.state;this.position=b.dragStartMorphPosition.addPt(b.absDragDelta)}},{key:"onDragEnd",value:function(b){this.undoStop("drag-move");$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(b){var e=b.state;this.position=e.dragStartMorphPosition.addPt(e.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:b.isCtrlDown(),snap:b.isCtrlDown()})}},{key:"onGrab",value:function(b){if(b.isShiftDown()){var e=
this.copy();e.position=this.transformPointToMorph(b.hand,fc.pt(0,0));b.hand.grab(e)}else b.hand.grab(this)}},{key:"onDrop",value:function(b){b.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(b){return b.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(b){return b.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(b){return!0}},{key:"onDropHoverIn",value:function(b){}},
{key:"onDropHoverUpdate",value:function(b){}},{key:"onDropHoverOut",value:function(b){}},{key:"onBeingDroppedOn",value:function(b,e){e.addMorph(this)}},{key:"onHoverIn",value:function(b){this.master&&this.requestMasterStyling()}},{key:"onHoverOut",value:function(b){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(b){}},{key:"onMouseWheel",value:function(b){}},{key:"onNativeDrop",value:function(b){}},{key:"onNativeDragleave",value:function(b){}},{key:"onNativeDragenter",value:function(b){}},
{key:"onNativeDragover",value:function(b){}},{key:"onNativeDragend",value:function(b){}},{key:"onNativeDragstart",value:function(b){}},{key:"onNativeDrag",value:function(b){}},{key:"focus",value:function(){var b=this.env.eventDispatcher;b&&b.focusMorph(this)}},{key:"onFocus",value:function(b){}},{key:"onBlur",value:function(b){}},{key:"isFocused",value:function(){var b=this.env.eventDispatcher;return b&&b.isMorphFocused(this)}},{key:"exportToJSON",value:function(b){return fc.serializeSpec(this,b)}},
{key:"initFromJSON",value:function(b){var e=this;this._env=b.env||b._env||fc.MorphicEnv.default();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=b._id||fc.newMorphId(fc.getClassName(this));this._animationQueue=new fc.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){e.initializeProperties();fc.deserializeSpec(b,function(l){return fc.morph(l)},e)});return this}},{key:"copyViaJSON",
value:function(){var b=this.exportToJSON();fc.tree.prewalk(b,function(e){return e._id=fc.newMorphId(e.type)},function(e){return e.submorphs});b.name=b.name.replace(/copy( [0-9]+)?$/,function(e,l){return"copy "+(l&&l.trim()?Number(l)+1:"1")});return fc.morph({type:b.type}).initFromJSON(b)}},{key:"canBeCopied",value:function(){return!0}},{key:"copy",value:function(b){return fc.copyMorph(this,void 0===b?!1:b)}},{key:"interactivelyPublish",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return e=
b.world()||b.env.world,w.setCatchFinallyBlocks(2),w.yield(System.import("lively.morphic/partsbin.js"),4);case 4:return l=w.yieldResult,p=l.interactivelySavePart,w.yield(p(b,{notifications:!1,loadingIndicator:!0}),5);case 5:q=w.yieldResult;e.setStatusMessage(q?"Published "+b+" as "+q.name:"Failed to publish part "+b,q?fc.Color.green:fc.Color.red);w.leaveTryBlock(0);break;case 2:u=w.enterCatchBlock(),"canceled"!=u&&e.showError(u),w.jumpToEnd()}})}},{key:"makeDirty",value:function(b){this._dirty=!0;
this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",value:function(b){this._dirty=!1;this._rendering=!0}},{key:"onAfterRender",value:function(b){}},{key:"whenRendered",value:function(b){return this.env.whenRendered(this,void 0===b?50:b).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return b.renderMorph(this)}},
{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var b=0;b<this.submorphs.length;b++)this.submorphs[b].applyLayoutIfNeeded();this.layout&&!this.layout.manualUpdate&&this.layout.onContainerRender()}}},{key:"requestMasterStyling",value:function(){var b=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(e){return b.master._capturedExtents.set(e,e.extent)})),this.master&&(this._requestMasterStyling=
!0,this.makeDirty()))}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(b){b._wantsStyling=!0;b.makeDirty()})}},{key:"renderAsRoot",value:function(b){var e=this;this.dontRecordChangesWhile(function(){e.applyLayoutIfNeeded()});return fc.renderRootMorph(this,b)}},{key:"renderPreview",value:function(b,e){b=void 0===b?{}:b;e=void 0===e?this.env.renderer:e;return e.renderPreview(this,b)}},{key:"startStepping",value:function(){var b=Array.from(arguments),e="number"===typeof b[0]?
b.shift():null,l=b.shift();b=new fc.TargetScript(this,l,b);this.removeEqualScripts(b);this._tickingScripts.push(b);b.startTicking(e);return b}},{key:"tickingScripts",get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){fc.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(b){var e=this._tickingScripts.filter(function(l){return l.selector===b});this.stopScripts(e)}},{key:"stopScripts",value:function(b){fc.arr.invoke(b,
"stop");this._tickingScripts=fc.arr.withoutAll(this._tickingScripts,b)}},{key:"suspendStepping",value:function(){this._tickingScripts&&fc.arr.invoke(this._tickingScripts,"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(b){return b.suspendStepping()})}},{key:"resumeStepping",value:function(){fc.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(b){return fc.arr.invoke(b._tickingScripts,"resume")})}},
{key:"removeEqualScripts",value:function(b){this.stopScripts(this._tickingScripts.filter(function(e){return e.equals(b)}))}},{key:"addComment",value:function(b,e){e=void 0===e?fc.pt(0,0):e;var l=this,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?y.yield(System.import("lively.collab"),2):3!=y.nextAddress?(p=y.yieldResult,q=p.Comment,u=p.CommentBrowser,w=new q(b,e),l.comments.push(w),y.yield(u.addCommentForMorph(w,l),3)):y.return(w)})}},{key:"removeComment",
value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(System.import("lively.collab"),2);l=q.yieldResult;p=l.CommentBrowser;e.comments=e.comments.filter(function(u){return!b.equals(u)});p.removeCommentForMorph(b,e);q.jumpToEnd()})}},{key:"emptyComments",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(System.import("lively.collab"),2);e=p.yieldResult;
l=e.CommentBrowser;b.comments.forEach(function(q){return l.removeCommentForMorph(q,b)});b.comments=[];p.jumpToEnd()})}},{key:"commands",get:function(){return this._commands||[]}},{key:"commands",set:function(b){this._commands&&this.removeCommands(this._commands);this.addCommands(b)}},{key:"commandsIncludingOwners",get:function(){return fc.arr.flatmap([this].concat(this.ownerChain()),function(b){return fc.arr.sortByKey(b.commands,"name").map(function(e){return{target:b,command:e}})})}},{key:"addCommands",
value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[b],undo:{target:this,selector:"removeCommands",args:[b]}},function(){e.removeCommands(b);e._commands=(e._commands||[]).concat(b)})}},{key:"removeCommands",value:function(b){var e=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[b],undo:{target:this,selector:"addCommands",args:[b]}},function(){var l=b.map(function(q){return"string"===typeof q?q:q.name}),p=(e._commands||
[]).filter(function(q){return!l.includes(q.name)});p.length?e._commands=p:delete e._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||fc.defaultCommandHandler}},{key:"lookupCommand",value:function(b){return(b=this.commandHandler.lookupCommand(b,this))&&b.command?b:null}},{key:"execCommand",value:function(b,e,l,p){return this.commandHandler.exec(b,this,e,l,p)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(b){return this.getProperty(b)},
defaultSetter:function(b,e){this.setProperty(b,e)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",initialize:function(b){b||(b=fc.getClassName(this),b=fc.string.findArticle(b)+b);this.name=b}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(b){this.setProperty("isComponent",b);b&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(b){this.master&&this.master.equals(b)||
(this.setProperty("master",b?fc.ComponentPolicy.for(this,b):0==b?!1:null),b&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(b){b&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",b)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,
min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(b){b&&!b.isShadowObject&&(b=new fc.ShadowObject(b),b.morph=this);this.setProperty("dropShadow",b)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!fc.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:fc.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:fc.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:fc.pt(10,10),set:function(b){var e=this.extent;this.setProperty("extent",b);this.origin.equals(fc.pt(0,
0))||(b=fc.pt(b.x/e.x,b.y/e.y),this.adjustOrigin(this.origin.scaleByPt(b)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(b){return this.extent=fc.pt(b,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(b){return this.extent=fc.pt(this.extent.x,b)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(b){return this.moveBy(fc.pt(b-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(b){return this.moveBy(fc.pt(b-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(b){return this.moveBy(fc.pt(0,b-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(b){return this.moveBy(fc.pt(0,b-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(b){return this.align(this.center,b)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(b){return this.align(this.topLeft,b)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(b){return this.align(this.topRight,b)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(b){return this.align(this.bottomRight,b)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(b){return this.align(this.bottomLeft,b)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(b){return this.align(this.bottomCenter,b)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(b){return this.align(this.topCenter,b)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(b){return this.align(this.leftCenter,b)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(b){return this.align(this.rightCenter,b)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:fc.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(b){b||this.makeDirty();
this.setProperty("visible",b)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(b){var e=this,l=this.layout,p=l&&l.isEnabled();p&&l.disable();this.submorphs.forEach(function(q){return b.includes(q)||q.remove()});b.forEach(function(q,u){return e.submorphs[u]!==q&&e.addMorph(q,e.submorphs[u])});p&&l.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(b){this.setProperty("clipMode",b);this.isClip()||(this.scroll=fc.pt(0,0))}},scroll:{group:"geometry",defaultValue:fc.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(b){var e=b.x;b=b.y;if(this.isClip()){var l=this.scrollExtent.subPt(this.extent),p=l.y;e=Math.max(0,Math.min(l.x,e));b=Math.max(0,Math.min(p,b));this.setProperty("scroll",fc.pt(e,b));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:fc.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(b){this._cachedStyleClasses=null;this.setProperty("styleClasses",fc.arr.withoutAll(b,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(b){b&&
(b.container=this);this.setProperty("layout",b)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(b){"style"in b&&(this.borderStyleLeft=b.style);"width"in b&&(this.borderWidthLeft=b.width);"color"in b&&(this.borderColorLeft=b.color);"radius"in b&&(this.borderRadiusLeft=
b.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(b){"style"in b&&(this.borderStyleRight=b.style);"width"in b&&(this.borderWidthRight=b.width);"color"in b&&(this.borderColorRight=b.color);"radius"in b&&(this.borderRadiusRight=b.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(b){"style"in b&&(this.borderStyleBottom=b.style);"width"in b&&(this.borderWidthBottom=b.width);"color"in b&&(this.borderColorBottom=b.color);"radius"in b&&(this.borderRadiusBottom=b.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(b){"style"in b&&(this.borderStyleTop=b.style);"width"in b&&(this.borderWidthTop=b.width);"color"in b&&(this.borderColorTop=b.color);"radius"in b&&(this.borderRadiusTop=b.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var b=this.getProperty("borderWidth");return Object.assign({},
b,{valueOf:function(){return b.left}})},set:function(b){fc.obj.isNumber(b)&&(b={left:b,right:b,top:b,bottom:b});this.setProperty("borderWidth",b)}}},fc.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var b=this.getProperty("borderRadius");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){b||
(b=0);fc.obj.isNumber(b)&&(b={left:b,right:b,top:b,bottom:b});b.isRectangle&&(b={left:b.left(),right:b.right(),top:b.top(),bottom:b.bottom()});this.setProperty("borderRadius",b)}}},fc.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var b=this.getProperty("borderStyle");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){fc.obj.isString(b)&&(b={left:b,right:b,top:b,bottom:b});this.setProperty("borderStyle",b)}}},fc.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:fc.Color.white,left:fc.Color.white,bottom:fc.Color.white,right:fc.Color.white,valueOf:function(){return fc.Color.white}},
get:function(){var b=this.getProperty("borderColor");return Object.assign({},b,{valueOf:function(){return b.left}})},set:function(b){b||(b=fc.Color.white);b.isColor&&(b={top:b,left:b,right:b,bottom:b});this.setProperty("borderColor",b?fc.obj.extract(b,["top","left","right","bottom"],function(e,l){return fc.obj.isArray(l)?fc.Color.fromTuple(l):l}):b)}}},fc.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var b=this;return{get style(){return b.borderStyle},set style(e){b.borderStyle=e},get width(){return b.borderWidth},set width(e){b.borderWidth=e},get color(){return b.borderColor},set color(e){b.borderColor=e},get borderRadius(){return b.borderRadius},set borderRadius(e){b.borderRadius=e}}},set:function(b){"style"in b&&(this.borderStyle=b.style);"width"in b&&(this.borderWidth=b.width);"color"in b&&(this.borderColor=b.color);"radius"in b&&(this.borderRadius=b.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var b=this.propertiesAndPropertySettings(),e=b.properties,l=[];b=$jscomp.makeIterator(b.order);for(var p=b.next();!p.done;p=b.next())p=p.value,e[p].isStyleProp&&l.push(p);return l}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var b=this.styleProperties,e={},l=0;l<b.length;l++){var p=b[l];e[p]=this[p]}return e}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(b){var e=fc.arr.without(fc.obj.keys(this.installedFonts||
{}),"_rev"),l=fc.arr.without(fc.obj.keys(b||{}),"_rev");this.setProperty("installedFonts",b);this.ensureInstalledFonts(e,l)},get:function(){return this.getProperty("installedFonts")||{}}},comments:{doc:"Holds all comments belonging to this Morph.",type:"list",defaultValue:[]},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var b=this,e=[];b&&b!==Object;)e.push(b[Symbol.for("__LivelyClassName__")]),b=b[Symbol.for("lively-instance-superclass")];
return this._styleClasses=e}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1667,end:82521})}(void 0));fc.Morph=Vi;fc.Morph=Vi;fc.Morph=Vi;var $u=Ia("W",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Ellipse")&&"function"===typeof d.Ellipse?
d.Ellipse:d.Ellipse=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var b=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return b.borderRadiusLeft}}}},
borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82530,end:83287})}(fc.Morph));fc.Ellipse=$u;fc.Ellipse=$u;fc.Ellipse=$u;var Wx=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Triangle")&&"function"===typeof d.Triangle?d.Triangle:d.Triangle=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Sb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b);this.update()}},{key:"onChange",value:function(b){("extent"==b.prop||"direction"==b.prop||"fill"==b.prop&&b.value)&&this.update();Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"update",value:function(){var b=this.extent,e=b.x;b=b.y;e!=b&&(this.extent=fc.pt(Math.max(e,b),Math.max(e,b)));this.origin=fc.pt(e/2,b/2);var l=this.triangleFill=this.fill||this.triangleFill;this.fill=null;e={width:e/2,style:"solid",
color:l};b={width:b/2,style:"solid",color:fc.Color.transparent};switch(this.direction){case "down":var p="borderLeft";var q="borderRight";var u="borderTop";break;case "up":p="borderLeft";q="borderRight";u="borderBottom";break;case "left":p="borderBottom";q="borderTop";u="borderRight";break;case "right":p="borderBottom",q="borderTop",u="borderLeft"}l={};Object.assign(this,(l[p]=b,l[q]=b,l[u]=e,l))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},
triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:83296,end:84754})}(fc.Morph);fc.Triangle=Wx;fc.Triangle=Wx;fc.Triangle=Wx;var av=Ia("S",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
k=d.hasOwnProperty("Image")&&"function"===typeof d.Image?d.Image:d.Image=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"__deserialize__",value:function(b,e,l,p){this._isDeserializing=!0;Sb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p)}},{key:"__after_deserialize__",value:function(b,e,l){delete this._isDeserializing;Sb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",
this).call(this,b,e,l)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var b=this.naturalExtent;return b.x/b.y}},{key:"setWidthKeepingRatio",value:function(b){this.width=b;this.height=b/this.ratio}},{key:"setHeightKeepingRatio",value:function(b){this.width=this.ratio*b;this.height=b}},{key:"loadUrl",value:function(b,e){var l=this;e=void 0===e?this.autoResize:e;var p=this.autoResize;this.autoResize=e;this.imageUrl=b;return fc.promise.finally(this.whenLoaded(),function(){return l.autoResize=
p})}},{key:"whenLoaded",value:function(){var b=this;return this.isLoaded?Promise.resolve(this):new Promise(function(e,l){var p=b.imageUrl;b.imageElement(function(q){b.imageUrl!==p&&l(Error("url changed ("+p+" => "+b.imageUrl+")"));b.naturalExtent=fc.pt(q.width,q.height);b.isLoaded=!0;e(b)})})}},{key:"determineNaturalExtent",value:function(){var b=this;return this.whenLoaded().then(function(){return b.naturalExtent})}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return b.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(b){var e=this;return new Promise(function(l,p){var q=e.env.domEnv.document.createElement("img");q.onload=function(){l(q);"function"===typeof b&&b(q)};q.src=e.imageUrl})}},{key:"canvasElementAndContext",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return e=b.env.domEnv.document,u.yield(b.imageElement(),2);l=u.yieldResult;p=e.createElement("canvas");q=p.getContext("2d");p.width=l.width;p.height=l.height;q.drawImage(l,0,0,l.width,l.height);return u.return({canvas:p,ctx:q,image:l})})}},{key:"imageData",value:function(b){var e=this,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return D.yield(e.canvasElementAndContext(),2);l=D.yieldResult;p=l.ctx;q=l.image;b||(b=fc.rect(0,0,q.width,
q.height));u=b;w=u.x;y=u.y;A=u.width;C=u.height;return D.return(p.getImageData(w,y,A,C))})}},{key:"pixelAt",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(e.imageData(b.extent(fc.pt(1,1))),2):l.return(l.yieldResult.data)})}},{key:"colorAt",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(l=fc.Color,p=l.fromTuple8Bit,q.yield(e.pixelAt(b),2)):q.return(p.call(l,
q.yieldResult))})}},{key:"loadArrayBuffer",value:function(b,e){b=new Uint8Array(b);b=new Blob([b],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(b);this.makeDirty()}},{key:"convertToBase64",value:function(){var b=this,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return e=b.imageUrl,l=e.slice(e.lastIndexOf(".")+1,e.length).toLowerCase(),"jpg"===l?l="jpeg":"svg"===l&&(l="svg+xml"),["gif","jpeg","png","tiff","svg+xml"].includes(l)||
(l="gif"),e.startsWith("http")||(e=fc.location.origin+"/"+e),A.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=A.nextAddress)return p=A.yieldResult,q=p.runCommand,u='curl --silent "'+e+'" | openssl base64',A.yield(q(u).whenDone(),3);w=A.yieldResult;y=w.stdout;return A.return(b.loadUrl("data:image/"+l+";base64,"+y,!1))})}},{key:"downloadImage",value:function(){var b=this.imageUrl;if(b.match(/^data:image/)){var e=this.name||"image-from-lively";var l=b.match(/image\/([^;]+)/);l&&l[1]&&
(e+="."+l[1])}else e||(e=fc.arr.last(b.split("/")));l=document.createElement("a");l.download=e;l.href=b;l.click()}},{key:"convertTo",value:function(b,e){e||(e=1);var l=this.canvasElementAndContext(),p=l.ctx,q=l.canvas;l=l.image;var u=this.width,w=this.height;q.width=l.width;q.height=l.height;p.drawImage(l,0,0,u,w);return this.loadUrl(q.toDataURL(b,e),!1)}},{key:"resampleImageToFitBounds",value:function(){var b=this,e,l,p,q,u,w,y,A,C,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==
I.nextAddress)return I.yield(b.canvasElementAndContext(),2);e=I.yieldResult;l=e.ctx;p=e.canvas;q=e.image;u=b;w=u.width;y=u.height;A=q;C=A.width;D=A.height;p.width=C;p.height=D;l.drawImage(q,0,0,w,y);L=l.getImageData(0,0,C,D);p.width=w;p.height=y;l.putImageData(L,0,0);return I.return(b.loadUrl(p.toDataURL(),!1))})}},{key:"crop",value:function(b){var e=this.canvasElementAndContext(),l=e.ctx,p=e.canvas;e=e.image;var q=this.innerBounds(),u=e.width,w=e.height;b=q.intersection(b);b=new fc.Rectangle(b.x/
q.width,b.y/q.height,b.width/q.width,b.height/q.height);b=$jscomp.makeIterator((new fc.Rectangle(0,0,u,w)).divide([b])).next().value;p.width=u;p.height=w;l.drawImage(e,0,0,u,w);e=l.getImageData(b.x,b.y,b.width,b.height);p.width=b.width;p.height=b.height;l.putImageData(e,0,0);return this.loadUrl(p.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:b.imageUrl.startsWith("data:")?"":b.imageUrl,requester:b}),2);e=l.yieldResult;"string"===typeof e&&(b.imageUrl=e);l.jumpToEnd()})}},{key:"menuItems",value:function(b){var e=this;b=Sb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this,b);b.unshift(["change image url...",function(){return e.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var l=Math.min(e.world().visibleBounds().width/e.naturalExtent.x,e.world().visibleBounds().height/
e.naturalExtent.y);e.extent=e.naturalExtent.scaleBy(l)}],["resize image to its real image size",function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e,p.yield(e.determineNaturalExtent(),2)):p.return(l.extent=p.yieldResult)})}],["resample image to fit current bounds",function(){return e.resampleImageToFitBounds()}],{isDivider:!0});return b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,
copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(b){var e=this;this.isLoaded=!1;this.setProperty("imageUrl",b);this.setProperty("naturalExtent",null);var l=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){e.imageUrl===b&&(e.isLoaded=!0,l&&(e.extent=e.naturalExtent))})}},fill:{defaultValue:fc.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},
autoResize:{isStyleProp:!0,defaultValue:!1}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:84763,end:94107})}(fc.Morph));fc.Image=av;fc.Image=av;fc.Image=av;var NB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("PathPoint")&&"function"===
typeof d.PathPoint?d.PathPoint:d.PathPoint=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){e=void 0===e?{}:e;this.path=b;this._isSmooth=e.isSmooth||!1;this.x=e.position?e.position.x:e.x||0;this.y=e.position?e.position.y:e.y||0;this._controlPoints=e.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints",
"$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(b){this._isSmooth!==b&&(this._isSmooth=b,this.adaptControlPoints(b))}},{key:"position",get:function(){return fc.pt(this.x,this.y)}},{key:"position",set:function(b){var e=b.y;this.x=b.x;this.y=e;this.path.makeDirty()}},{key:"moveBy",value:function(b){this.position=this.position.addPt(b);this.path.onVertexChanged(this);
return this}},{key:"copy",value:function(){var b=new fc.ExpressionSerializer;return new fc.PathPoint(this.path,b.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,
""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:fc.pt(0,0),previous:fc.pt(0,0)}}},{key:"controlPoints",set:function(b){var e=b=void 0===b?{}:b;b=e.next;e=e.previous;this._controlPoints={next:b?fc.Point.fromLiteral(b):fc.pt(0,0),previous:e?fc.Point.fromLiteral(e):fc.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(b){this.moveControlPoint("next",b)}},{key:"movePreviousControlPoint",value:function(b){this.moveControlPoint("previous",
b)}},{key:"moveControlPoint",value:function(b,e){var l=this.controlPoints[b];l=l?l.addPt(e):e;e="next"==b?"previous":"next";var p=this.controlPoints[e];this.isSmooth&&(p=l.negated().normalized().scaleBy(p.r()));var q={};this.controlPoints=(q[b]=l,q[e]=p,q);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(b,e,l,p){b=fc.pt(b.x,b.y);e=fc.pt(e.x,e.y);b=e.subPt(b);var q=b.scaleBy(1/b.r());l=e.subPt(l).dotProduct(q);return e.subPt(q.scaleBy(Math.max(1,Math.min(l,b.r())))).addXY(p,p)}},
{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(b,e){var l=this.copy();l.position=l.position.interpolate(b,e);return l}},{key:"adaptControlPoints",value:function(b){var e=this.nextVertex,l=this.previousVertex,p=this.position,q=this.path,u=q.vertices,w=u.indexOf(this),y=0===w;u=w===u.length-1;l=l?l.position:p;e=e?e.position:p;b?(b=this.pointOnLine(l,e,p,q.borderWidth),
this.controlPoints={previous:y?fc.pt(0,0):b.subPt(e),next:b.subPt(l)}):this.controlPoints={previous:y?fc.pt(0,0):l.subPt(p).scaleBy(.5),next:u?fc.pt(0,0):e.subPt(p).scaleBy(.5)};q.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:94116,end:98081})}(void 0);fc.PathPoint=NB;fc.PathPoint=NB;fc.PathPoint=NB;var bv=Ia("Q",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Path")&&"function"===typeof d.Path?d.Path:d.Path=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Sb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},fc.obj.dissoc(b,"origin")));this.adjustOrigin(b.origin||this.origin);this.position=b.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(b,e,l){Sb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(b,e,l,p){Sb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,b,e,l,p);e=this.getProperty("draggable");e!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(b.props.draggable={value:e});if(e=this.borderColor.valueOf())b.props.borderColor={key:"borderColor",value:l.expressionSerializer.exprStringEncode({__expr__:e.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",fc.getClassName(e)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},
{key:"onVertexChanged",value:function(b){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(b){return b.copy()})}},{key:"updateBounds",value:function(b){b=void 0===b?this.vertices:b;if(b.length&&!this._adjustingVertices){this._adjustingVertices=!0;var e=this.origin,l=this.extent,p=e.x/l.x;l=e.y/l.y;var q=[];b.forEach(function(w,y){var A=w.isSmooth,C=w.position,D=w.controlPoints||{};w=D.next;D=D.previous;q.push(C);A&&0<y&&y<b.length-
1&&q.push(C.addPt(w),C.addPt(D))});e=fc.Rectangle.unionPts(q);p=fc.pt(e.width*p,e.height*l);var u=e.topLeft();b.forEach(function(w){return w.moveBy(u.negated())});this.moveBy(this.getTransform().transformDirection(u));this.extent=e.extent().maxPt(fc.pt(this.borderWidth,this.borderWidth));this.origin=p;this._adjustingVertices=!1}}},{key:"onChange",value:function(b){var e=b.prop,l=b.value,p=b.prevValue,q=this._adjustingVertices,u=this._adjustingOrigin;"extent"==e&&l&&p&&!q&&this.adjustVertices(l.scaleByPt(p.inverted()));
(!u&&"vertices"===e||"borderWidthLeft"===e)&&this.updateBounds("vertices"==e?l:this.vertices);q||"origin"!==e||this.updateBounds(this.vertices);Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"vertexBefore",value:function(b){b=this.vertices.indexOf(b)-1;return this.vertices[0<=b?b:this.vertices.length-1]}},{key:"vertexAfter",value:function(b){b=this.vertices.indexOf(b)+1;return this.vertices[b>this.vertices.length-1?0:b]}},{key:"adjustVertices",value:function(b){var e=
this,l=this.vertices;l&&l.forEach(function(p){var q=p.controlPoints,u=q.next;q=q.previous;u=u.scaleByPt(b);q=q.scaleByPt(b);p.position=p.position.addPt(e.origin).scaleByPt(b).subPt(e.origin);p.controlPoints={next:u,previous:q}})}},{key:"adjustOrigin",value:function(b){this._adjustingOrigin=!0;var e=this.origin;this.vertices.forEach(function(l){return l.position=e.subPt(b).addXY(l.x,l.y)});Sb._get(Object.getPrototypeOf(k.prototype),"adjustOrigin",this).call(this,b);this._adjustingOrigin=!1}},{key:"addVertex",
value:function(b,e){e=void 0===e?null:e;var l=this.vertices;e="number"===typeof e?e:e&&e.isPathPoint?l.indexOf(e):void 0;"number"===typeof e&&-1<e?l.splice(e,0,b):l.push(b);this.vertices=l}},{key:"addVertexCloseTo",value:function(b){var e=this.verticesCloseTo(b),l=e.closest,p=l.length;l=l.vertex;e=e.next;b=this.findClosestPointOnPath(b,10,3);return this.addVertex(b.point,b.length<=p?l:e?e.vertex:null)}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return b.renderPath(this)}},{key:"_pathNode",get:function(){var b=fc.PropertyPath("env.renderer").get(this);return(b=b&&b.getNodeForMorph(this))&&b.querySelector("#svg"+fc.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(b,e){e=void 0===e?!0:e;for(var l=this.vertices,p=Infinity,q=-1,u=0;u<l.length;u++){var w=l[u].position.dist(b);w>=p||(p=w,q=u)}b=0===q?null:{index:q-1,vertex:l[q-1]};p=q===l.length-1?null:{index:q+1,vertex:l[q+1]};l={index:q,vertex:l[q]};
e&&(e=this._pathNode,b&&(q=this.findClosestPointOnPath(b.vertex.position,6,3,e).length,b.length=q),p&&(q=this.findClosestPointOnPath(p.vertex.position,6,3,e).length,p.length=q),e=this.findClosestPointOnPath(l.vertex.position,20,3,e).length,l.length=e);return{previous:b,next:p,closest:l}}},{key:"findClosestPointOnPath",value:function(b,e,l,p){function q(u,w,y,A,C,D,L){y=void 0===y?10:y;A=void 0===A?3:A;C=void 0===C?0:C;D=void 0===D?u.getTotalLength():D;L=void 0===L?0:L;var I=D,S=y;D=[];var V=(C-I)/
(S-1),ba=0;D.push([fc.Point.ensure(u.getPointAtLength(I)),I,ba]);for(ba=1;ba<S-1;ba++){var ua=I+ba*V;D.push([fc.Point.ensure(u.getPointAtLength(ua)),ua,ba])}D.push([fc.Point.ensure(u.getPointAtLength(C)),C,ba]);C=Infinity;I=-1;S=$jscomp.makeIterator(D);for(V=S.next();!V.done;V=S.next())ba=$jscomp.makeIterator(V.value),V=ba.next().value,ba.next(),ba=ba.next().value,V=w.dist(V),V>=C||(C=V,I=ba);if(L>=A)return w=$jscomp.makeIterator(D[I]),u=w.next().value,w=w.next().value,{point:u,length:w};C=D[Math.max(0,
I-1)][1];D=D[Math.min(D.length-1,I+1)][1];return q(u,w,y,A,C,D,L+1)}p||(p=(p=this.env.renderer.getNodeForMorph(this))&&p.querySelector("#svg"+fc.string.regExpEscape(this.id)));return p?q(p,b,e,l):{length:0,point:b}}},{key:"onDragStart",value:function(b){var e=b.domEvt.target,l=(new fc.PropertyPath("attributes.class.value")).get(e);if(l&&l.includes("path-point"))l=$jscomp.makeIterator(l.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),l.next(),b=l.next().value,l=l.next().value,this._controlPointDrag=
{marker:e,n:Number(b)},void 0!==l&&(this._controlPointDrag.ctrlN=Number(l));else return Sb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b)}},{key:"onDrag",value:function(b){if(!this._controlPointDrag)return Sb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,b);var e=this._controlPointDrag,l=e.n,p=e.ctrlN,q=this.vertices;if(e=q[l])b=this.getInverseTransform().transformDirection(b.state.dragDelta),void 0===p?(e.moveBy(b),b=q[l-1],q=q[l+1],b&&10>b.position.dist(e.position)?
this._controlPointDrag.maybeMerge=[l-1,l]:q&&10>q.position.dist(e.position)?this._controlPointDrag.maybeMerge=[l,l+1]:this._controlPointDrag.maybeMerge=void 0):1===p?e.movePreviousControlPoint(b):2===p&&e.moveNextControlPoint(b)}},{key:"onDragEnd",value:function(b){b=this.vertices;var e=this._controlPointDrag;if(e&&(e=e.maybeMerge,delete this._controlPointDrag,e)){var l=$jscomp.makeIterator(e);e=l.next().value;l=l.next().value;b[e].controlPoints.next=b[l].controlPoints.next;b.splice(l,1);this.vertices=
b}}},{key:"onDoubleMouseDown",value:function(b){this.showControlPoints&&this.addVertexCloseTo(this.localize(b.position))}},{key:"menuItems",value:function(){var b=this,e=fc.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),l=fc.Icon.textAttribute("square",{textStyleClasses:["far"]});l[1].paddingRight="7px";e[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?e:l),[" control points"]),function(){return b.showControlPoints=!b.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?
e:l),[" smooth"]),function(){return b.isSmooth=!b.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(Sb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(b){if(!this._pathNode)return fc.pt(0,0);b=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*b)||fc.pt(0,0);return fc.pt(b.x,b.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,
type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(b){b||(b=fc.Color.white);if(b.isColor||b.isGradient)b={top:b,left:b,right:b,bottom:b};this.setProperty("borderColor",fc.obj.extract(b,["top","left","right","bottom"],function(e,l){return fc.obj.isArray(l)?fc.Color.fromTuple(l):l}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],isStyleProp:!0,after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(b){var e=this,l=this.isSmooth;
this._adjustingVertices=!0;b=b.map(function(p){return p.isPathPoint?Object.assign(p,{path:e}):new fc.PathPoint(e,Object.assign({isSmooth:l},p))});this.setProperty("vertices",b);this._adjustingVertices=!1;this.updateBounds(b)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",
isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(b){this.setProperty("isSmooth",b);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(e){return e.isSmooth=b}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:98090,end:111840})}(fc.Morph));fc.Path=bv;fc.Path=bv;fc.Path=bv;var Xx=Ia("N",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("Polygon")&&"function"===typeof d.Polygon?d.Polygon:d.Polygon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){if(b.vertices&&2<b.vertices.length)Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:111849,end:112103})}(fc.Path));fc.Polygon=Xx;fc.Polygon=Xx;fc.Polygon=Xx;var Yx=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),k=d.hasOwnProperty("LineMorph")&&"function"===typeof d.LineMorph?d.LineMorph:d.LineMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var b=this.line,e=this.height,l=b.toVector();this.setProperty("position",this.position.addPt(b.perpendicularLine(0,e,"cc").toVector()));this.width=l.fastR();this.rotation=l.theta();this.vec=l;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},
fill:{defaultValue:fc.Color.black},height:{defaultValue:1},line:{defaultValue:fc.Line.fromCoords(0,0,0,0),set:function(b){this.setProperty("line",b);this.update(b)}},start:{derived:!0,after:["line"],get:function(b){return this.line.start},set:function(b){this.line=this.line.withStart(b)}},end:{derived:!0,after:["line"],get:function(b){return this.line.end},set:function(b){this.line=this.line.withEnd(b)}},position:{derived:!0,after:["line"],get:function(b){return this.start},set:function(b){var e=
b.subPt(this.start),l=this.rotation;this.line=new fc.Line(b,this.end.addPt(e));this.rotation=l}}}}}],d,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:112112,end:113604})}(fc.Morph);fc.LineMorph=Yx;fc.LineMorph=Yx;fc.LineMorph=Yx;var $ma=Object.freeze({__proto__:null,Morph:Vi,Ellipse:$u,Triangle:Wx,
Image:av,PathPoint:NB,Path:bv,Polygon:Xx,LineMorph:Yx}),fe=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");fe.getAllPartResources=aO;fe.loadPart=uG;fe.savePart=bO;fe.interactivelySavePart=mA;fe.interactivelyLoadObjectFromPartsBinFolder=cO;fe.interactivelySaveObjectToPartsBinFolder=dO;fe.saveObjectToPartsbinFolder=eO;fe.loadObjectFromPartsbinFolder=vG;fe.buildCommitEditor=fO;fe.resource=sc;fe.Resource=Ef;fe.registerExtension=Fd;fe.Path=Sg;fe.obj=ff;fe.date=tp;fe.promise=Uf;fe.HorizontalLayout=
xo;fe.VerticalLayout=is;fe.morph=Zi;fe.Morph=Vi;fe.pt=kh;fe.Color=qf;fe.Rectangle=Qd;fe.connect=Mj;fe.emit=bq;fe.SnapshotPackageHelper=$I;fe.ensureCommitInfo=aA;fe.MorphicDB=Lp;fe.createMorphSnapshot=pu;fe.getClassName=Un;fe.getAllPartResources=aO;fe.getAllPartResources=aO;fe.loadPart=uG;fe.loadPart=uG;fe.savePart=bO;fe.savePart=bO;fe.interactivelySavePart=mA;fe.interactivelySavePart=mA;fe.interactivelyLoadObjectFromPartsBinFolder=cO;fe.interactivelyLoadObjectFromPartsBinFolder=cO;fe.interactivelySaveObjectToPartsBinFolder=
dO;fe.interactivelySaveObjectToPartsBinFolder=dO;fe.saveObjectToPartsbinFolder=eO;fe.saveObjectToPartsbinFolder=eO;fe.loadObjectFromPartsbinFolder=vG;fe.loadObjectFromPartsbinFolder=vG;var tR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("SnapshotEditor")&&"function"===typeof d.SnapshotEditor?d.SnapshotEditor:d.SnapshotEditor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){this.commit=b;this.snapshot=e;this._db=l}},{key:"db",get:function(){return this._db||fe.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(b,e){var l=this,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){p=b;q=p._id;u=p.name;w=p.type;if(!q)throw Error("No id of commit, cannot save!");return y.yield(l.db.commit(w,u,e,b,void 0,q),2)}b=y.yieldResult;l.commit=b;l.snapshot=
e;return y.return(b)})}},{key:"interactivelySaveModifiedSnapshot",value:function(b,e){var l=this,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){p=fe.promise.deferred();q=p.promise;u=p.resolve;w=p.reject;y=l;Object.assign(fe.buildCommitEditor(),{commit:Object.assign({},l.commit,{},b),cancel:function(){(this.getWindow()||this).remove();w("canceled")},accept:function(){var C=this,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.setCatchFinallyBlocks(2),
I.yield(y.saveModifiedSnapshot(C.commit,e),4);if(2!=I.nextAddress)return D=I.yieldResult,(C.getWindow()||C).remove(),u(C.commit=D),I.leaveTryBlock(0);L=I.enterCatchBlock();C.showError(L);w(L);I.jumpToEnd()})}}).openInWindow({title:"commit"});return A.return(q)})}},{key:"interactivelyEditMetadata",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(e.interactivelySaveModifiedSnapshot(e.commit,e.snapshot),2);l=p.yieldResult;
"function"===typeof b&&b({commit:l,snapshot:e.snapshot});return p.return(l)})}},{key:"interactivelyEditSnapshotJSON",value:function(b){var e=this,l,p,q,u,w,y,A,C,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return l=e,p=l.commit,q=l.snapshot,u=p,w=u._id,y=u.name,A=u.type,I.yield(System.import("lively.ide/text-editor.js"),2);D=I.yieldResult;L=D.default;L.openURL("<"+A+"/"+y+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(S){var V,
ba,ua,Fa,F,Y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Q){switch(Q.nextAddress){case 1:if(V=q){Q.jumpTo(2);break}return Q.yield(e.db.fetchSnapshot(void 0,void 0,w),3);case 3:V=Q.yieldResult;case 2:ba=V;ua=JSON.stringify(ba,null,2);if(ua===C){Q.jumpTo(4);break}return Q.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),5);case 5:if(Fa=Q.yieldResult,!Fa)return Q.return({saved:!1,
message:"canceled"});case 4:return F=JSON.parse(S.ui.contentText.textString),Q.yield(e.interactivelySaveModifiedSnapshot(e.commit,F),6);case 6:return p=Q.yieldResult,q=F,C=S.ui.contentText.textString,Y={saved:!0,snapshot:F,commit:p},"function"===typeof b&&b(Y),Q.return(Y)}})},customLoadContentAction:function(S,V){var ba,ua;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return(ba=q)?Fa.jumpTo(2):Fa.yield(e.db.fetchSnapshot(void 0,void 0,w),3);2!=Fa.nextAddress&&
(ba=Fa.yieldResult);ua=ba;return Fa.return({content:C=JSON.stringify(ua,null,2),url:A+"/"+y+".json"})})}});I.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(b){var e=this,l,p,q,u,w,y,A,C,D,L,I,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){switch(V.nextAddress){case 1:l=e;p=l.commit;q=l.snapshot;u=p;w=u._id;if(y=q){V.jumpTo(2);break}return V.yield(e.db.fetchSnapshot(void 0,void 0,w),3);case 3:y=V.yieldResult;case 2:return A=y,C=(new fe.SnapshotPackageHelper(A)).filesInPackages(),
D=C.map(function(ba){return{isListItem:!0,string:ba.url,value:ba}}),V.yield($world.filterableListPrompt("Select file to edit",D,{historyId:"object-serialization-debugger-hist"}),4);case 4:return L=V.yieldResult,I=$jscomp.makeIterator(L.selected),(S=I.next().value)?V.return(e.interactivelyEditFileInSnapshotPackage(S,b)):V.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(b,e,l){var p=this,q,u,w,y,A,C,D,L,I,S,V,ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:q=
p;u=q.snapshot;w=q.commit;y=w._id;A=w.name;C=w.type;if(D=u){ua.jumpTo(2);break}return ua.yield(p.db.fetchSnapshot(void 0,void 0,y),3);case 3:D=ua.yieldResult;case 2:return L=D,I=b.get(L),ua.yield(System.import("lively.ide/text-editor.js"),4);case 4:return S=ua.yieldResult,V=S.default,ba=V.openURL("<"+C+"/"+A+" - "+b.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",customSaveAction:function(Fa){var F,Y,Q,W;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){switch(ka.nextAddress){case 1:F=
b.get(L);if(F===I){ka.jumpTo(2);break}return ka.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(Y=ka.yieldResult,!Y)return ka.return({saved:!1,message:"canceled"});case 2:return b.set(L,Fa.ui.contentText.textString),Q=p,ka.yield(p.interactivelySaveModifiedSnapshot(p.commit,L),4);case 4:return Q.commit=ka.yieldResult,W={commit:p.commit,snapshot:L,saved:!0},"function"===typeof e&&
e(W),ka.return(W)}})},customLoadContentAction:function(Fa,F){return{content:b.get(L),url:b.url}}}),l&&ba.whenRendered().then(function(){return ba.lineNumber=l.row}),ua.return(ba)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9614,end:14833})}(void 0);fe.SnapshotEditor=tR;fe.SnapshotEditor=tR;fe.SnapshotEditor=tR;fe.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;var Zx=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("PartResource")&&"function"===typeof d.PartResource?d.PartResource:d.PartResource=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"canDealWithJSON",
get:function(){return!1}},{key:"dirList",value:function(b,e){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?p.yield(fe.resource(l.url.replace("part://","styleguide://")).dirList(b,e),2):p.return(p.yieldResult)})}},{key:"write",value:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");})}},{key:"read",
value:function(){var b=this,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(fe.resource(b.url.replace("part://","styleguide://")).read(),2);case 2:e=y.yieldResult;if(!e.master){y.jumpTo(3);break}return y.yield(e.master.whenReady(),3);case 3:l=e.copy();l.isComponent=!1;l.name="a"+fe.getClassName(l);l.withAllSubmorphsDoExcluding(function(A){A!=l&&A.master||delete A._parametrizedProps},function(A){return A.master&&A!=l});p=l.master;
l.master=e;if(!l._pool.mastersInSubHierarchy){y.jumpTo(5);break}q=$jscomp.makeIterator(l._pool.mastersInSubHierarchy);u=q.next();case 6:if(u.done){y.jumpTo(5);break}w=u.value;if(p==w){y.jumpTo(7);break}return y.yield(w.applyIfNeeded(!0),9);case 9:w.derivedMorph.ownerChain().includes(l)||w.derivedMorph.requestMasterStyling();case 7:u=q.next();y.jumpTo(6);break;case 5:return l.master.applyIfNeeded(!0),delete l._pool,l.withAllSubmorphsDo(function(A){if("function"===typeof A.onLoad)A.onLoad()}),y.return(l)}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14890,end:16664})}(fe.Resource);fe.PartResource=Zx;fe.PartResource=Zx;fe.PartResource=Zx;var kJ={name:"part",matches:function(a){return a.match(fe.partURLRe)},
resourceClass:fe.PartResource};fe.resourceExtension=kJ;fe.resourceExtension=kJ;fe.resourceExtension=kJ;fe.registerExtension(fe.resourceExtension);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),k=d.hasOwnProperty("CommitEditor")&&"function"===typeof d.CommitEditor?d.CommitEditor:d.CommitEditor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onLoad",value:function(){fe.connect(this.ui.okButton,
"fire",this,"accept");fe.connect(this.ui.cancelButton,"fire",this,"cancel")}},{key:"accept",value:function(){}},{key:"cancel",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommitEditor"}},{key:"properties",get:function(){return{name:{defaultValue:"commit editor"},extent:{defaultValue:fe.pt(420,24)},layout:{initialize:function(){this.layout=new fe.VerticalLayout({resizeSubmorphs:!0,spacing:3})}},commit:{set:function(b){this._commit=b;var e=b.type,l=b.timestamp,
p=b.author,q=b.tags,u=b.description,w=b.metadata,y=this.ui,A=y.typeInput,C=y.timestampInput,D=y.authorNameInput,L=y.authorEmailInput,I=y.authorRealmInput,S=y.tagsInput,V=y.descriptionInput,ba=y.messageInput,ua=y.metadataInput;y.nameInput.input=b.name;A.input=e;C.input=String(new Date(l));D.input=p.name;L.input=p.email;I.input=p.realm;S.input=q.join(" ");V.textString=u;ba.textString="";ua.textString=w?JSON.stringify(w,null,2):""},get:function(){var b=this._commit;if(!b)throw Error("commit editor does not have a _commit object");
var e=this.ui,l=e.authorNameInput,p=e.authorEmailInput,q=e.authorRealmInput,u=e.tagsInput,w=e.descriptionInput,y=e.messageInput,A=e.metadataInput,C=e.nameInput.input;e=e.typeInput.input;if(b.name!==C)throw Error("name does not match _commit.name: "+C+" vs "+b.name);if(b.type!==e)throw Error("type does not match _commit.type: "+e+" vs "+b.type);b.author.name=l.input;b.author.email=p.input;b.author.realm=q.input;b.tags=u.input.split(" ").map(function(D){return D.trim()}).filter(Boolean);b.description=
w.textString;b.message=y.textString;b.metadata=A.textString?JSON.parse(A.textString):null;return b}},ui:{get:function(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),
nameInput:this.get("name input"),cancelButton:this.get("cancel button"),okButton:this.get("ok button")}}},submorphs:{initialize:function(){var b={type:"input",extent:fe.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:fe.Rectangle.inset(4,4),border:{color:fe.Color.gray,width:1}};this.submorphs=[Object.assign({},b,{name:"name input",placeholder:"name"}),Object.assign({},b,{name:"type input",placeholder:"type"}),Object.assign({},b,{name:"timestamp input",placeholder:"timestamp"}),{layout:new fe.VerticalLayout({resizeSubmorphs:!0,
spacing:3}),submorphs:[Object.assign({},b,{name:"author.name input",placeholder:"author name"}),Object.assign({},b,{name:"author.email input",placeholder:"author email"}),Object.assign({},b,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},b,{name:"tags input",placeholder:"tags"}),Object.assign({},b,{height:70,name:"description input",type:"text"}),Object.assign({},b,{height:70,name:"message input",type:"text"}),Object.assign({},b,{height:70,name:"metadata input",type:"text"}),
{layout:new fe.HorizontalLayout({spacing:3,direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}]}}}}}],d,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:16850,end:21944})})(fe.Morph);fe.buildCommitEditor=fO;
fe.buildCommitEditor=fO;var Tk=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");Tk.pt=kh;Tk.Morph=Vi;Tk.morph=Zi;Tk.touchInputDevice=Ol;Tk.config=rk;Tk.fun=Tj;var $x=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),k=d.hasOwnProperty("TooltipViewer")&&"function"===typeof d.TooltipViewer?d.TooltipViewer:d.TooltipViewer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,
a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.currentMorph=b}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(b){return!b.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(b){return b.tooltip||this.notPartOfCurrentTooltip(b)}},{key:"mouseMove",value:function(b){var e=this;if(!Tk.touchInputDevice&&!b.state.draggedMorph){var l=b.hand,p=$world.morphsContainingPoint(b.positionIn($world)).filter(function(y){return y.reactsToPointer||
y.tooltip});p=$jscomp.makeIterator(p.slice(p.indexOf(l)+1));for(var q=p.next();!q.done;q=p.next()){q=q.value;if(w&&!w.ownerChain().includes(q))break;if(q.tooltip){var u=q;break}var w=q}for(;u&&!u.visible;)u=u.morphBeneath(b.positionIn($world));u?this.currentMorph!==u&&this.invalidatesCurrentTooltip(u)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(u,l),this.currentMorph=u):this.currentTooltip?this.currentTooltip.softRemove().then(function(){e.currentTooltip&&!e.currentTooltip.owner&&
(e.currentTooltip=null)}):this.currentMorph=null}}},{key:"mouseDown",value:function(b){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(b,e){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(b,e):this.scheduleTooltipFor(b,e)}},{key:"hoverOutOfMorph",value:function(b){var e=this;this.currentTooltip&&this.currentTooltip.softRemove(function(l){return e.currentTooltip==l&&(e.currentTooltip=null)})}},{key:"scheduleTooltipFor",
value:function(b,e){var l=this;this.timer=setTimeout(function(){l.currentMorph&&l.showTooltipFor(b,e)},1E3*Tk.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var b=this.currentTooltip;b&&b.remove()}},{key:"showTooltipFor",value:function(b,e){b.tooltip&&b.world()&&!e.env.eventDispatcher.eventState.draggedMorph&&(this.clearCurrentTooltip(),e=e?e.position.addXY(10,7):b.globalBounds().bottomRight(),this.currentTooltip=
new Tk.Tooltip({position:e,description:b.tooltip}),$world.addMorph(this.currentTooltip),this.currentTooltip.update(b))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:207,end:3202})}(void 0);Tk.TooltipViewer=
$x;Tk.TooltipViewer=$x;Tk.TooltipViewer=$x;var cv=Ia("T",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),k=d.hasOwnProperty("Tooltip")&&"function"===typeof d.Tooltip?d.Tooltip:d.Tooltip=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"update",value:function(b){this.position=b.globalBounds().bottomCenter().subPt(b.world().scroll).addPt(Tk.pt(0,7))}},{key:"softRemove",
value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(e.animate({opacity:0,duration:300}),2);b&&b(e);e.remove();l.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],
derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},set:function(b){var e=$jscomp.makeIterator(this.submorphs).next().value;e.value=b;e.fit()}},submorphs:{initialize:function(){this.submorphs=[new Tk.morph({reactsToPointer:!1,type:"label",width:200})]}}}}}],d,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3211,end:4406})}(Tk.Morph));Tk.Tooltip=cv;Tk.Tooltip=cv;Tk.Tooltip=cv;var ana=Object.freeze({__proto__:null,TooltipViewer:$x,Tooltip:cv}),A5=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");A5.default=Lp;A5.MorphicDB=Lp;var bna=Object.freeze({__proto__:null,MorphicDB:Lp}),Zj=lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");Zj.nyi=function(a){throw Error("Not yet implemented: "+a);};Zj.string=Bg;Zj.promise=Uf;Zj.debugMessageOrder=!1;var Ii=
function(a){this.id=Zj.string.newUUID();this.actions={};this.options={ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=new Map;this._outgoingOrderNumberingByTargets=new Map;this._outOfOrderCacheBySenders=new Map};Ii.prototype.isOnline=function(){Zj.nyi("isOnline")};Ii.prototype.open=function(){Zj.nyi("open")};Ii.prototype.close=function(){Zj.nyi("close")};Ii.prototype.remove=function(){Zj.nyi("remove")};Ii.prototype.whenOnline=function(a){var d=this;return Zj.promise.waitFor(a,function(){return d.isOnline()}).then(function(){return d}).catch(function(k){return Promise.reject(/timeout/i.test(String(k))?
Error("Timeout in "+d+".whenOnline"):k)})};Ii.prototype.onError=function(a){this.debug&&console.log("["+this+"] error: "+a)};Ii.prototype.removeService=function(a){delete this.actions[a]};Ii.prototype.removeServices=function(a){var d=this;a.forEach(function(k){return d.removeService(k)})};Ii.prototype.addService=function(a,d){this.actions[a]=d};Ii.prototype.addServices=function(a){var d=this;Object.keys(a).forEach(function(k){return d.addService(k,a[k])})};Ii.prototype.ping=function(a){var d=this,
k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return k=Date.now(),q.yield(d.sendToAndWait(a,"l2l-ping",{timestamp:k}),2);b=q.yieldResult;e=b.data;l=e.timestamp;p=Date.now();return q.return({to:l-k,from:p-l,roundtrip:p-k})})};Ii.prototype.send=function(a,d){Zj.nyi("send")};Ii.prototype.sendAndWait=function(a){var d=this,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return k=new Promise(function(q,u){return d.send(a,
q)}),b={},e=d.options.ackTimeout+400,"ackTimeout"in a&&(e=!a.ackTimeout||0>a.ackTimeout?null:a.ackTimeout+400),e?p.yield(Promise.race([Zj.promise.delay(e,b),k]),5):p.yield(k,4);case 4:l=p.yieldResult;p.jumpTo(3);break;case 5:l=p.yieldResult;case 3:if(l===b)throw Error("Timeout sending "+a.action);return p.return(l)}})};Ii.prototype.sendTo=function(a,d,k,b){return this.send({target:a,action:d,data:k},b)};Ii.prototype.sendToAndWait=function(a,d,k,b){return this.sendAndWait(Object.assign({target:a,action:d,
data:k},b))};Ii.prototype.prepareSend=function(a,d){var k=a.target,b=a.action,e=a.messageId,l=a.sender;if(!b)throw Error("Trying to send a message without specifying action!");if(!k)throw Error("Trying to send message "+b+" without specifying target!");e||(a.messageId=Zj.string.newUUID());l||(a.sender=this.id);b=a.n=this._outgoingOrderNumberingByTargets.get(k)||0;this._outgoingOrderNumberingByTargets.set(k,b+1);if("function"===typeof d){l=this;var p=d;d=function(q){var u=l._incomingOrderNumberingBySenders.get(q.sender)||
0;l.debug&&Zj.debugMessageOrder&&console.log("[MSG ORDER] "+l+" received ack for "+q.action+" as msg "+u);try{p.apply(null,arguments)}catch(w){console.error("Error in ack fn of "+l+": "+w.stack)}l._incomingOrderNumberingBySenders.set(q.sender,u+1);setTimeout(function(){return l.invokeOutOfOrderMessages(q.sender)},0)}}this.debug&&Zj.debugMessageOrder&&console.log("[MSG ORDER] "+this+" sending "+b+" ("+a.action+") to "+k);return[a,d]};Ii.prototype.prepareAnswerMessage=function(a,d){return{action:a.action+
"-response",inResponseTo:a.messageId,target:a.sender,data:d,sender:this.id}};Ii.prototype.installEventToMessageTranslator=function(a){var d=this,k=a.onevent;a.onevent=function(b){var e=b.data||[];k.call(this,b);b.data=["*"].concat(e);k.call(this,b)};a.on("*",function(b,e){b&&"object"===typeof b&&b.action&&(e=b,b=e.action);var l=arguments[arguments.length-1];l="function"===typeof l?l:null;(e=e===l?null:e)&&e.data&&("number"===typeof e.n||e.broadcast)&&e.sender?d.receive(e,a,l):(console.warn(d+" received non-conformant message "+
b+":",arguments),"function"===typeof l&&l({data:{error:"invalid l2l message"}}))})};Ii.prototype.receive=function(a,d,k){this.dispatchL2LMessageToSelf(a,d,k)};Ii.prototype.dispatchL2LMessageToSelf=function(a,d,k){var b=this,e=a.action;if(a.broadcast)this.safeInvokeServiceHandler(e,a,k,d);else try{var l=this._incomingOrderNumberingBySenders.get(a.sender)||0,p="register"===e||"unregister";if(!p&&a.n<l)console.error("[MSG ORDER] ["+this+"] received message no. "+a.n+" but expected >= "+l+", dropping "+
e);else if(!p&&a.n>l){this.debug&&Zj.debugMessageOrder&&console.log("[MSG ORDER] ["+this+"] storing out of order message "+e+" ("+a.n+") for later invocation");var q=this._outOfOrderCacheBySenders.get(a.sender);q||(q=[],this._outOfOrderCacheBySenders.set(a.sender,q));q.push([e,a,k,d])}else this.safeInvokeServiceHandler(e,a,k,d),setTimeout(function(){return b.invokeOutOfOrderMessages(a.sender)},0)}catch(u){console.error("Error message ordering when handling "+e+": "+(u.stack||u)),"function"===typeof k&&
k(this.prepareAnswerMessage(a,{isError:!0,error:String(u.stack||u)}))}};Ii.prototype.invokeOutOfOrderMessages=function(a){var d=this._outOfOrderCacheBySenders.get(a);if(d&&d.length){var k=this._incomingOrderNumberingBySenders.get(a)||0;a=d.findIndex(function(b){b=$jscomp.makeIterator(b);b.next();return b.next().value.n===k});-1!==a&&(d.splice(a,1),this.invokeServiceHandler.apply(this,d[a]))}};Ii.prototype.renameTarget=function(a,d){if(a!==d){var k=this._outgoingOrderNumberingByTargets.get(a);this._outgoingOrderNumberingByTargets.delete(a);
this._outgoingOrderNumberingByTargets.set(d,k)}};Ii.prototype.safeInvokeServiceHandler=function(a,d,k,b){try{"function"===typeof this.actions[a]?this.invokeServiceHandler(a,d,k,b):b._events&&Object.keys(b._events).includes(a)||(console.warn("WARNING ["+this+"] Unhandled message: "+a),"function"===typeof k&&k(this.prepareAnswerMessage(d,{isError:!0,error:"message not understood: "+a})))}catch(e){console.error("Error when handling "+a+": "+(e.stack||e)),"function"===typeof k&&k(this.prepareAnswerMessage(d,
{isError:!0,error:String(e.stack||e)}))}};Ii.prototype.invokeServiceHandler=function(a,d,k,b){var e=this;this.debug&&Zj.debugMessageOrder&&console.log("[MSG ORDER] "+this+" received "+d.n+" ("+d.action+") from "+d.sender);this._incomingOrderNumberingBySenders.set(d.sender,d.n+1);if("function"===typeof k){var l=!1,p=!1,q="ackTimeout"in d?d.ackTimeout:this.options.ackTimeout,u=this._outgoingOrderNumberingByTargets.get(d.sender)||0;this._outgoingOrderNumberingByTargets.set(d.sender,u+1);var w=function(y){p?
console.warn("["+e+"] ackFn for "+d.action+" called after it timed out, dropping answer!"):l?console.warn("["+e+"] ack function called repeatedly when handling "+d.action):(l=!0,k(e.prepareAnswerMessage(d,y)),e.debug&&Zj.debugMessageOrder&&console.log("[MSG ORDER] "+e+" sending "+u+" (ack for "+d.action+")"))};q&&setTimeout(function(){l||(w({isError:!0,error:"Timeout error: "+e+" did not send answer for "+d.action+" after "+q+"ms"}),p=!0)},q)}try{this.actions[a].call(this,this,d,w,b)}catch(y){console.error("["+
this+"] Error handling "+a+": "+(y.stack||y)),w&&w({error:y.stack})}};$jscomp.global.Object.defineProperties(Ii.prototype,{debug:{configurable:!0,enumerable:!0,get:function(){return this.options.debug},set:function(a){this.options.debug=a}}});Zj.L2LConnection=Ii;Zj.default=Ii;var Uq=lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),lJ={"l2l-ping":function(a,d,k,b){b=d.sender;d=d.data.timestamp;var e=Date.now();"function"===typeof k&&k({timestamp:e});a.debug&&console.log("[undefined] got ping from "+
b+", time: "+(e-d)+"ms")},"remote-eval":function(a,d,k,b){var e=d.data.source;Promise.resolve().then(function(){return eval(e)}).then(function(l){return k({value:l})}).catch(function(l){l.originalErr&&(l=l.originalErr);console.error("eval error: "+l);"function"===typeof k&&k({isError:!0,value:String(l.stack||l)})})},"remote-eval-2":function(a,d,k,b){var e=d.data.source;Promise.resolve().then(function(){var l=eval(e);if(!(l instanceof Promise))throw console.error("unexpected eval result:"+l),Error("unexpected eval result:"+
l);return l}).then(function(l){return k(l)}).catch(function(l){console.error("eval error: "+l);l.originalErr&&(l=l.originalErr);"function"===typeof k&&k({isError:!0,value:String(l.stack||l)})})}};Uq.defaultActions=lJ;Uq.defaultActions=lJ;Uq.defaultActions=lJ;var As={},uR=(As["[broadcast] send"]=function(a,d,k,b){var e=d.sender,l=d.data,p,q,u,w,y,A,C,D,L,I,S,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ba){p=l;q=p.action;u=p.broadcast;w=p.room;y=p.namespace;A=p.isSystemBroadcast;C=
p.isMultiServerBroadcast;D=[];C?(console.log(".......isMultiServerBroadcast"),L=a,I=L.id,S=a.getTrackerList(),console.log(S),D=S.map(function(ua){return ua.id!=I?ua.io.nsps["/"+ua.namespace]:b.broadcast})):(A&&(y=a.namespace),D.push(y?a.io.nsps["/"+y]:b.broadcast));D.forEach(function(ua){console.log(q,{action:q,sender:e,broadcast:!0,data:u});ua.to(w).emit(q,{action:q,sender:e,broadcast:!0,data:u})});k&&"function"===typeof k&&(V="message broadcasted to "+w,y&&(V+=" in namespace "+y),1<D.length&&(V+=
" "+D.length+" trackers"),console.log(V),k({status:V}));ba.jumpToEnd()})},As["[broadcast] join room"]=function(a,d,k,b){var e=d.sender,l=d.data.room,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return q=!1,u=a.io.nsps["/"+a.namespace].adapter.rooms,(w=u[l]&&u[l].sockets&&u[l].sockets[b.id])?(p=e+" already in "+l,y.jumpTo(2)):y.yield(new Promise(function(A,C){return b.join(l,function(D){return D?C(D):A()})}),3);2!=y.nextAddress&&(p=e+" joined "+l,q=!0);
k&&"function"===typeof k&&k({status:p,joined:q});y.jumpToEnd()})},As["[broadcast] leave room"]=function(a,d,k,b){var e=d.sender,l=d.data.room,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return q=!1,u=a.io.nsps["/"+a.namespace].adapter.rooms,w=u[l]&&u[l].sockets&&u[l].sockets[b.id],w?y.yield(new Promise(function(A,C){return b.leave(l,function(D){return D?C(D):A()})}),3):(p=e+" not in "+l,y.jumpTo(2));2!=y.nextAddress&&(p=e+" left room "+l,q=!0);console.log(p);
k&&"function"===typeof k&&k({left:q,status:p});y.jumpToEnd()})},As["[broadcast] my rooms"]=function(a,d,k,b){k(b.rooms)},As["[broadcast] all rooms"]=function(a,d,k,b){k(a.io.nsps["/"+a.namespace].adapter.rooms)},As["[broadcast] list room members"]=function(a,d,k,b){d=d.data.room;b=a.io;d?(a=b.nsps["/"+a.namespace].adapter.rooms[d],k({room:d,sockets:a?a.sockets:{},length:a?a.length:0})):k({isError:!0,error:"`room` paramerter missing!"})},As.getClients=function(a,d,k){a.removeDisconnectedClients();
k(Array.from(a.clients))},As);Uq.defaultTrackerActions=uR;Uq.defaultTrackerActions=uR;Uq.defaultTrackerActions=uR;var OB={},mJ=(OB.getRoomList=function(a){var d=a.client,k=a.ackFn,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=d._socketioClient.rooms;k(b);e.jumpToEnd()})},OB["ask for"]=function(a,d,k,b){var e=d.sender,l=d.data.query,p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return q=l.match(/password|sudo/i)?"passwordPrompt":
"prompt",w.yield($world[q](l),2);u=w.yieldResult;"function"===typeof k&&k({answer:u});a.debug&&console.log("["+p+"] message 'ask for' from "+e+", query: "+l);w.jumpToEnd()})},OB["open editor"]=function(a,d,k,b){var e=d.data.args,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return e.length?p.yield($world.execCommand("open file for EDITOR",{url:e[0]}),2):(k({error:"no file specified"}),p.return());l=p.yieldResult;"function"===typeof k&&k("aborted"===l?{error:String(l)}:
{status:l});p.jumpToEnd()})},OB.changeWorkingDirectory=function(a,d,k,b){var e=d.data.args,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){l=$jscomp.makeIterator(e||[]);p=l.next().value;q=l.next().value;u="OK";try{if(p)if(q){if(w=$world.getMorphWithId(q))if(w.__lookupSetter__("cwd"))w.cwd=p;else if("function"===typeof w.changeWorkingDirectory)w.changeWorkingDirectory(p);else if("function"===typeof w.pluginFind){if(y=w.pluginFind(function(C){return C.isShellEditorPlugin}))y.cwd=
p}else u="[changeWorkingDirectory] cannot figure pout how to set dir"}else u="[changeWorkingDirectory] No command morph";else u="[changeWorkingDirectory] No directory received"}catch(C){u=String(C)}"OK"!==u&&console.warn(u);"function"===typeof k&&k(u);A.jumpToEnd()})},OB);Uq.defaultClientActions=mJ;Uq.defaultClientActions=mJ;Uq.defaultClientActions=mJ;var cna={},dna=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
ena="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),B5=cna=function(a){var d=a,k=a.indexOf("["),b=a.indexOf("]");-1!=k&&-1!=b&&(a=a.substring(0,k)+a.substring(k,b).replace(/:/g,";")+a.substring(b,a.length));var e=dna.exec(a||"");a={};for(var l=14;l--;)a[ena[l]]=e[l]||"";-1!=k&&-1!=b&&(a.source=d,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=
!0);d=a.path;k=d.replace(/\/{2,9}/g,"/").split("/");"/"!=d.substr(0,1)&&0!==d.length||k.splice(0,1);"/"==d.substr(d.length-1,1)&&k.splice(k.length-1,1);a.pathNames=k;a.queryKey=Cca(a,a.query);return a},fna={},nA=864E5,Eca=365.25*nA,gna=fna=function(a,d){d=d||{};var k=typeof a;if("string"===k&&0<a.length)return Dca(a);if("number"===k&&!1===isNaN(a))return d.long?wG(a,nA,"day")||wG(a,36E5,"hour")||wG(a,6E4,"minute")||wG(a,1E3,"second")||a+" ms":a>=nA?Math.round(a/nA)+"d":36E5<=a?Math.round(a/36E5)+
"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a));},Hca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,th={};th=th=gO.debug=gO["default"]=gO;th.coerce=function(a){return a instanceof Error?a.stack||a.message:a};th.disable=function(){th.enable("")};th.enable=function(a){th.save(a);th.names=[];th.skips=[];var d,k=("string"===typeof a?a:"").split(/[\s,]+/),b=k.length;
for(d=0;d<b;d++)k[d]&&(a=k[d].replace(/\*/g,".*?"),"-"===a[0]?th.skips.push(new RegExp("^"+a.substr(1)+"$")):th.names.push(new RegExp("^"+a+"$")));for(d=0;d<th.instances.length;d++)a=th.instances[d],a.enabled=th.enabled(a.namespace)};th.enabled=function(a){if("*"===a[a.length-1])return!0;var d;var k=0;for(d=th.skips.length;k<d;k++)if(th.skips[k].test(a))return!1;k=0;for(d=th.names.length;k<d;k++)if(th.names[k].test(a))return!0;return!1};th.humanize=gna;th.instances=[];th.names=[];th.skips=[];th.formatters=
{};var nJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ul={},hO=yh;ul=ul=th;ul.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};ul.formatArgs=function(a){var d=(this||nJ).useColors;a[0]=(d?"%c":"")+(this||nJ).namespace+(d?" %c":" ")+a[0]+(d?"%c ":" ")+"+"+ul.humanize((this||nJ).diff);if(d){d="color: "+(this||nJ).color;a.splice(1,0,d,"color: inherit");var k=0,b=0;a[0].replace(/%[a-zA-Z%]/g,
function(e){"%%"!==e&&(k++,"%c"===e&&(b=k))});a.splice(b,0,d)}};ul.save=function(a){try{null==a?ul.storage.removeItem("debug"):ul.storage.debug=a}catch(d){}};ul.load=a0;ul.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||
"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var hna=ul;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var vR=chrome.storage.local;else a:{try{vR=window.localStorage;
break a}catch(a){}vR=void 0}hna.storage=vR;ul.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
ul.formatters.j=function(a){try{return JSON.stringify(a)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};ul.enable(a0());var Vq=ul,dj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,C5={};C5=Jm;Jm.prototype.on=Jm.prototype.addEventListener=function(a,d){(this||dj)._callbacks=(this||dj)._callbacks||{};((this||dj)._callbacks["$"+a]=(this||dj)._callbacks["$"+a]||[]).push(d);return this||dj};Jm.prototype.once=function(a,d){function k(){this.off(a,k);d.apply(this||
dj,arguments)}k.fn=d;this.on(a,k);return this||dj};Jm.prototype.off=Jm.prototype.removeListener=Jm.prototype.removeAllListeners=Jm.prototype.removeEventListener=function(a,d){(this||dj)._callbacks=(this||dj)._callbacks||{};if(0==arguments.length)return(this||dj)._callbacks={},this||dj;var k=(this||dj)._callbacks["$"+a];if(!k)return this||dj;if(1==arguments.length)return delete (this||dj)._callbacks["$"+a],this||dj;for(var b,e=0;e<k.length;e++)if(b=k[e],b===d||b.fn===d){k.splice(e,1);break}0===k.length&&
delete (this||dj)._callbacks["$"+a];return this||dj};Jm.prototype.emit=function(a){(this||dj)._callbacks=(this||dj)._callbacks||{};for(var d=Array(arguments.length-1),k=(this||dj)._callbacks["$"+a],b=1;b<arguments.length;b++)d[b-1]=arguments[b];if(k){k=k.slice(0);b=0;for(var e=k.length;b<e;++b)k[b].apply(this||dj,d)}return this||dj};Jm.prototype.listeners=function(a){(this||dj)._callbacks=(this||dj)._callbacks||{};return(this||dj)._callbacks["$"+a]||[]};Jm.prototype.hasListeners=function(a){return!!this.listeners(a).length};
var dv=C5,ina={},jna={}.toString,wR=ina=Array.isArray||function(a){return"[object Array]"==jna.call(a)},D5={},xR=Ng.Buffer;D5=function(a){var d;!(d=kna&&xR.isBuffer(a))&&(d=lna)&&((d=a instanceof ArrayBuffer)||(d="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer));return d};var kna="function"===typeof xR&&"function"===typeof xR.isBuffer,lna="function"===typeof ArrayBuffer,E5=D5,F5="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,oJ={},jO=wR,b0=E5,G5=Object.prototype.toString,mna="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===G5.call(Blob),nna="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===G5.call(File);oJ.deconstructPacket=function(a){var d=[];a.data=iO(a.data,d);a.attachments=d.length;return{packet:a,buffers:d}};oJ.reconstructPacket=function(a,d){a.data=kO(a.data,d);a.attachments=void 0;return a};oJ.removeBlobs=function(a,d){function k(l,p,q){if(!l)return l;
if(mna&&l instanceof Blob||nna&&l instanceof File){b++;var u=new FileReader;u.onload=function(){q?q[p]=(this||F5).result:e=(this||F5).result;--b||d(e)};u.readAsArrayBuffer(l)}else if(jO(l))for(u=0;u<l.length;u++)k(l[u],u,l);else if("object"===typeof l&&!b0(l))for(u in l)k(l[u],u,l)}var b=0,e=a;k(e);b||d(e)};var dl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Pi={},lO=Vq("socket.io-parser"),mO=oJ;Pi.protocol=4;Pi.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");
Pi.CONNECT=0;Pi.DISCONNECT=1;Pi.EVENT=2;Pi.ACK=3;Pi.ERROR=4;Pi.BINARY_EVENT=5;Pi.BINARY_ACK=6;Pi.Encoder=c0;Pi.Decoder=xG;var Ica=Pi.ERROR+'"encode error"';c0.prototype.encode=function(a,d){lO("encoding packet %j",a);Pi.BINARY_EVENT===a.type||Pi.BINARY_ACK===a.type?Jca(a,d):(a=d0(a),d([a]))};dv(xG.prototype);xG.prototype.add=function(a){if("string"===typeof a){a:{var d=0,k={type:Number(a.charAt(0))};if(null==Pi.types[k.type])a={type:Pi.ERROR,data:"parser error: unknown packet type "+k.type};else{if(Pi.BINARY_EVENT===
k.type||Pi.BINARY_ACK===k.type){for(var b=d+1;"-"!==a.charAt(++d)&&d!=a.length;);b=a.substring(b,d);if(b!=Number(b)||"-"!==a.charAt(d))throw Error("Illegal attachments");k.attachments=Number(b)}if("/"===a.charAt(d+1)){for(b=d+1;++d;){var e=a.charAt(d);if(","===e)break;if(d===a.length)break}k.nsp=a.substring(b,d)}else k.nsp="/";b=a.charAt(d+1);if(""!==b&&Number(b)==b){for(b=d+1;++d;){e=a.charAt(d);if(null==e||Number(e)!=e){--d;break}if(d===a.length)break}k.id=Number(a.substring(b,d+1))}if(a.charAt(++d)){d=
a.substr(d);try{var l=JSON.parse(d)}catch(p){l=!1}if(!1===l||k.type!==Pi.ERROR&&!wR(l)){a={type:Pi.ERROR,data:"parser error: invalid payload"};break a}else k.data=l}lO("decoded %s as %j",a,k);a=k}}Pi.BINARY_EVENT===a.type||Pi.BINARY_ACK===a.type?((this||dl).reconstructor=new nO(a),0===(this||dl).reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(E5(a)||a.base64)if((this||dl).reconstructor){if(a=(this||dl).reconstructor.takeBinaryData(a))(this||dl).reconstructor=
null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};xG.prototype.destroy=function(){(this||dl).reconstructor&&(this||dl).reconstructor.finishedReconstruction()};nO.prototype.takeBinaryData=function(a){(this||dl).buffers.push(a);return(this||dl).buffers.length===(this||dl).reconPack.attachments?(a=mO.reconstructPacket((this||dl).reconPack,(this||dl).buffers),this.finishedReconstruction(),a):null};nO.prototype.finishedReconstruction=
function(){(this||dl).reconPack=null;(this||dl).buffers=[]};var yR={};try{yR="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(a){yR=!1}var ona=yR,pna={},zR=pna="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")(),qna={},AR=qna=function(a){var d=a.xdomain,k=a.xscheme;a=a.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!d||ona))return new XMLHttpRequest}catch(b){}try{if("undefined"!==typeof XDomainRequest&&!k&&a)return new XDomainRequest}catch(b){}if(!d)try{return new (zR[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(b){}},
rna={},oO=Ng.Buffer,Kca=wR,H5=Object.prototype.toString,Lca="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===H5.call(Blob),Mca="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===H5.call(File),BR=rna=yG,sna={},pJ=sna=function(a,d,k){var b=a.byteLength;d=d||0;k=k||b;if(a.slice)return a.slice(d,k);0>d&&(d+=b);0>k&&(k+=b);k>b&&(k=b);if(d>=b||d>=k||0===b)return new ArrayBuffer(0);a=new Uint8Array(a);b=new Uint8Array(k-d);for(var e=0;d<k;d++,
e++)b[e]=a[d];return b.buffer},tna={},una=tna=function(a,d,k){function b(l,p){if(0>=b.count)throw Error("after called too many times");--b.count;l?(e=!0,d(l),d=k):0!==b.count||e||d(null,p)}var e=!1;k=k||Nca;b.count=a;return 0===a?d():b},CR={};(function(a){CR.encode=function(d){d=new Uint8Array(d);var k,b=d.length,e="";for(k=0;k<b;k+=3)e+=a[d[k]>>2],e+=a[(d[k]&3)<<4|d[k+1]>>4],e+=a[(d[k+1]&15)<<2|d[k+2]>>6],e+=a[d[k+2]&63];2===b%3?e=e.substring(0,e.length-1)+"=":1===b%3&&(e=e.substring(0,e.length-
2)+"==");return e};CR.decode=function(d){var k=.75*d.length,b=d.length,e=0;"="===d[d.length-1]&&(k--,"="===d[d.length-2]&&k--);var l=new ArrayBuffer(k),p=new Uint8Array(l);for(k=0;k<b;k+=4){var q=a.indexOf(d[k]);var u=a.indexOf(d[k+1]);var w=a.indexOf(d[k+2]);var y=a.indexOf(d[k+3]);p[e++]=q<<2|u>>4;p[e++]=(u&15)<<4|w>>2;p[e++]=(w&3)<<6|y&63}return l}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var I5={},ex="undefined"!==typeof ex?ex:"undefined"!==typeof WebKitBlobBuilder?
WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:!1;try{var DR=2===(new Blob(["hi"])).size}catch(a){DR=!1}var qJ;if(qJ=DR)try{qJ=2===(new Blob([new Uint8Array([1,2])])).size}catch(a){qJ=!1}var vna=qJ,wna=ex&&ex.prototype.append&&ex.prototype.getBlob;"undefined"!==typeof Blob&&(f0.prototype=Blob.prototype,g0.prototype=Blob.prototype);I5=DR?vna?Blob:g0:wna?f0:void 0;var Sm=I5,xna={},yna=xna=Object.keys||function(a){var d=[],k=Object.prototype.hasOwnProperty,
b;for(b in a)k.call(a,b)&&d.push(b);return d},J5={},Op=String.fromCharCode,AG,zG,Vr;J5={version:"2.1.2",encode:function(a,d){d=d||{};d=!1!==d.strict;a=h0(a);for(var k=a.length,b=-1,e,l="";++b<k;){e=a[b];var p=d;if(0==(e&4294967168))e=Op(e);else{var q="";0==(e&4294965248)?q=Op(e>>6&31|192):0==(e&4294901760)?(i0(e,p)||(e=65533),q=Op(e>>12&15|224),q+=Op(e>>6&63|128)):0==(e&4292870144)&&(q=Op(e>>18&7|240),q+=Op(e>>12&63|128),q+=Op(e>>6&63|128));e=q+=Op(e&63|128)}l+=e}return l},decode:function(a,d){d=
d||{};d=!1!==d.strict;AG=h0(a);zG=AG.length;Vr=0;a=[];for(var k;!1!==(k=Oca(d));)a.push(k);d=a.length;k=-1;for(var b,e="";++k<d;)b=a[k],65535<b&&(b-=65536,e+=Op(b>>>10&1023|55296),b=56320|b&1023),e+=Op(b);return e}};var hi={},Qca=una,K5=J5,ER;"undefined"!==typeof ArrayBuffer&&(ER=CR);var zna="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),Ana="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),L5=zna||Ana;hi.protocol=3;var rJ=hi.packets={open:0,close:1,ping:2,
pong:3,message:4,upgrade:5,noop:6},PB=yna(rJ),Go={type:"error",data:"parser error"};hi.encodePacket=function(a,d,k,b){"function"===typeof d&&(b=d,d=!1);"function"===typeof k&&(b=k,k=null);var e=void 0===a.data?void 0:a.data.buffer||a.data;if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer){if(d){k=a.data;d=new Uint8Array(k);k=new Uint8Array(1+k.byteLength);k[0]=rJ[a.type];for(a=0;a<d.length;a++)k[a+1]=d[a];a=b(k.buffer)}else a=hi.encodeBase64Packet(a,b);return a}if("undefined"!==typeof Sm&&
e instanceof Sm)return d?L5?a=Pca(a,d,b):(d=new Uint8Array(1),d[0]=rJ[a.type],a=new Sm([d.buffer,a.data]),a=b(a)):a=hi.encodeBase64Packet(a,b),a;if(e&&e.base64)return b("b"+hi.packets[a.type]+a.data.data);d=rJ[a.type];void 0!==a.data&&(d+=k?K5.encode(String(a.data),{strict:!1}):String(a.data));return b(""+d)};hi.encodeBase64Packet=function(a,d){var k="b"+hi.packets[a.type];if("undefined"!==typeof Sm&&a.data instanceof Sm){var b=new FileReader;b.onload=function(){var p=b.result.split(",")[1];d(k+p)};
return b.readAsDataURL(a.data)}try{var e=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(p){a=new Uint8Array(a.data);e=Array(a.length);for(var l=0;l<a.length;l++)e[l]=a[l];e=String.fromCharCode.apply(null,e)}k+=btoa(e);return d(k)};hi.decodePacket=function(a,d,k){if(void 0===a)return Go;if("string"===typeof a){if("b"===a.charAt(0))return hi.decodeBase64Packet(a.substr(1),d);if(k){a:{d=a;try{d=K5.decode(d,{strict:!1})}catch(b){a=!1;break a}a=d}if(!1===a)return Go}k=a.charAt(0);return Number(k)==
k&&PB[k]?1<a.length?{type:PB[k],data:a.substring(1)}:{type:PB[k]}:Go}k=(new Uint8Array(a))[0];a=pJ(a,1);Sm&&"blob"===d&&(a=new Sm([a]));return{type:PB[k],data:a}};hi.decodeBase64Packet=function(a,d){var k=PB[a.charAt(0)];if(!ER)return{type:k,data:{base64:!0,data:a.substr(1)}};a=ER.decode(a.substr(1));"blob"===d&&Sm&&(a=new Sm([a]));return{type:k,data:a}};hi.encodePayload=function(a,d,k){"function"===typeof d&&(k=d,d=null);var b=BR(a);if(d&&b)return Sm&&!L5?hi.encodePayloadAsBlob(a,k):hi.encodePayloadAsArrayBuffer(a,
k);if(!a.length)return k("0:");pO(a,function(e,l){hi.encodePacket(e,b?d:!1,!1,function(p){l(null,p.length+":"+p)})},function(e,l){return k(l.join(""))})};hi.decodePayload=function(a,d,k){if("string"!==typeof a)return hi.decodePayloadAsBinary(a,d,k);"function"===typeof d&&(k=d,d=null);if(""===a)return k(Go,0,1);var b="";for(var e,l,p=0,q=a.length;p<q;p++)if(l=a.charAt(p),":"!==l)b+=l;else{if(""===b||b!=(e=Number(b)))return k(Go,0,1);l=a.substr(p+1,e);if(b!=l.length)return k(Go,0,1);if(l.length){b=
hi.decodePacket(l,d,!1);if(Go.type===b.type&&Go.data===b.data)return k(Go,0,1);if(!1===k(b,p+e,q))return}p+=e;b=""}if(""!==b)return k(Go,0,1)};hi.encodePayloadAsArrayBuffer=function(a,d){if(!a.length)return d(new ArrayBuffer(0));pO(a,function(k,b){hi.encodePacket(k,!0,!0,function(e){return b(null,e)})},function(k,b){k=b.reduce(function(p,q){q="string"===typeof q?q.length:q.byteLength;return p+q.toString().length+q+2},0);var e=new Uint8Array(k),l=0;b.forEach(function(p){var q="string"===typeof p,u=
p;if(q){u=new Uint8Array(p.length);for(var w=0;w<p.length;w++)u[w]=p.charCodeAt(w);u=u.buffer}q?e[l++]=0:e[l++]=1;p=u.byteLength.toString();for(w=0;w<p.length;w++)e[l++]=parseInt(p[w]);e[l++]=255;u=new Uint8Array(u);for(w=0;w<u.length;w++)e[l++]=u[w]});return d(e.buffer)})};hi.encodePayloadAsBlob=function(a,d){pO(a,function(k,b){hi.encodePacket(k,!0,!0,function(e){var l=new Uint8Array(1);l[0]=1;if("string"===typeof e){for(var p=new Uint8Array(e.length),q=0;q<e.length;q++)p[q]=e.charCodeAt(q);e=p.buffer;
l[0]=0}p=(e instanceof ArrayBuffer?e.byteLength:e.size).toString();var u=new Uint8Array(p.length+1);for(q=0;q<p.length;q++)u[q]=parseInt(p[q]);u[p.length]=255;Sm&&(e=new Sm([l.buffer,u.buffer,e]),b(null,e))})},function(k,b){return d(new Sm(b))})};hi.decodePayloadAsBinary=function(a,d,k){"function"===typeof d&&(k=d,d=null);for(var b=[];0<a.byteLength;){for(var e=new Uint8Array(a),l=0===e[0],p="",q=1;255!==e[q];q++){if(310<p.length)return k(Go,0,1);p+=e[q]}a=pJ(a,2+p.length);p=parseInt(p);e=pJ(a,0,
p);if(l)try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(w){for(l=new Uint8Array(e),e="",q=0;q<l.length;q++)e+=String.fromCharCode(l[q])}b.push(e);a=pJ(a,p)}var u=b.length;b.forEach(function(w,y){k(hi.decodePacket(w,d,!0),y,u)})};for(var sJ={encode:function(a){var d="",k;for(k in a)a.hasOwnProperty(k)&&(d.length&&(d+="&"),d+=encodeURIComponent(k)+"="+encodeURIComponent(a[k]));return d},decode:function(a){var d={};a=a.split("&");for(var k=0,b=a.length;k<b;k++){var e=a[k].split("=");d[decodeURIComponent(e[0])]=
decodeURIComponent(e[1])}return d}},Bna={},tJ=Bna=function(a,d){var k=function(){};k.prototype=d.prototype;a.prototype=new k;a.prototype.constructor=a},Cna={},j0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),M5={},l0=0,Bs=0,k0;64>Bs;Bs++)M5[j0[Bs]]=Bs;rO.encode=qO;rO.decode=function(a){var d=0;for(Bs=0;Bs<a.length;Bs++)d=64*d+M5[a.charAt(Bs)];return d};var N5=Cna=rO,Jh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,O5={},Dna=hi;O5=np;
dv(np.prototype);np.prototype.onError=function(a,d){a=Error(a);a.type="TransportError";a.description=d;this.emit("error",a);return this||Jh};np.prototype.open=function(){if("closed"===(this||Jh).readyState||""===(this||Jh).readyState)(this||Jh).readyState="opening",this.doOpen();return this||Jh};np.prototype.close=function(){if("opening"===(this||Jh).readyState||"open"===(this||Jh).readyState)this.doClose(),this.onClose();return this||Jh};np.prototype.send=function(a){if("open"===(this||Jh).readyState)this.write(a);
else throw Error("Transport not open");};np.prototype.onOpen=function(){(this||Jh).readyState="open";(this||Jh).writable=!0;this.emit("open")};np.prototype.onData=function(a){a=Dna.decodePacket(a,(this||Jh).socket.binaryType);this.onPacket(a)};np.prototype.onPacket=function(a){this.emit("packet",a)};np.prototype.onClose=function(){(this||Jh).readyState="closed";this.emit("close")};var FR=O5,di="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,P5={},m0=FR,Q5=hi,Ho=Vq("engine.io-client:polling");
P5=op;var Rca=null!=(new AR({xdomain:!1})).responseType;tJ(op,m0);op.prototype.name="polling";op.prototype.doOpen=function(){this.poll()};op.prototype.pause=function(a){function d(){Ho("paused");k.readyState="paused";a()}var k=this||di;(this||di).readyState="pausing";if((this||di).polling||!(this||di).writable){var b=0;(this||di).polling&&(Ho("we are currently polling - waiting to pause"),b++,this.once("pollComplete",function(){Ho("pre-pause polling complete");--b||d()}));(this||di).writable||(Ho("we are currently writing - waiting to pause"),
b++,this.once("drain",function(){Ho("pre-pause writing complete");--b||d()}))}else d()};op.prototype.poll=function(){Ho("polling");(this||di).polling=!0;this.doPoll();this.emit("poll")};op.prototype.onData=function(a){var d=this||di;Ho("polling got data %s",a);Q5.decodePayload(a,(this||di).socket.binaryType,function(k,b,e){if("opening"===d.readyState)d.onOpen();if("close"===k.type)return d.onClose(),!1;d.onPacket(k)});"closed"!==(this||di).readyState&&((this||di).polling=!1,this.emit("pollComplete"),
"open"===(this||di).readyState?this.poll():Ho('ignoring poll - transport state "%s"',(this||di).readyState))};op.prototype.doClose=function(){function a(){Ho("writing close packet");d.write([{type:"close"}])}var d=this||di;"open"===(this||di).readyState?(Ho("transport open - closing"),a()):(Ho("transport not open - deferring close"),this.once("open",a))};op.prototype.write=function(a){var d=this||di;(this||di).writable=!1;var k=function(){d.writable=!0;d.emit("drain")};Q5.encodePayload(a,(this||di).supportsBinary,
function(b){d.doWrite(b,k)})};op.prototype.uri=function(){var a=(this||di).query||{},d=(this||di).secure?"https":"http",k="";!1!==(this||di).timestampRequests&&(a[(this||di).timestampParam]=N5());(this||di).supportsBinary||a.sid||(a.b64=1);a=sJ.encode(a);(this||di).port&&("https"===d&&443!==Number((this||di).port)||"http"===d&&80!==Number((this||di).port))&&(k=":"+(this||di).port);a.length&&(a="?"+a);var b=-1!==(this||di).hostname.indexOf(":");return d+"://"+(b?"["+(this||di).hostname+"]":(this||
di).hostname)+k+(this||di).path+a};var R5=P5,te="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,GR={},o0=R5,HR=Vq("engine.io-client:polling-xhr");GR=gx;GR.Request=mk;tJ(gx,o0);gx.prototype.supportsBinary=!0;gx.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=(this||te).xd;a.xs=(this||te).xs;a.agent=(this||te).agent||!1;a.supportsBinary=(this||te).supportsBinary;a.enablesXDR=(this||te).enablesXDR;a.withCredentials=(this||te).withCredentials;a.pfx=(this||
te).pfx;a.key=(this||te).key;a.passphrase=(this||te).passphrase;a.cert=(this||te).cert;a.ca=(this||te).ca;a.ciphers=(this||te).ciphers;a.rejectUnauthorized=(this||te).rejectUnauthorized;a.requestTimeout=(this||te).requestTimeout;a.extraHeaders=(this||te).extraHeaders;return new mk(a)};gx.prototype.doWrite=function(a,d){a=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a});var k=this||te;a.on("success",d);a.on("error",function(b){k.onError("xhr post error",b)});(this||te).sendXhr=
a};gx.prototype.doPoll=function(){HR("xhr poll");var a=this.request(),d=this||te;a.on("data",function(k){d.onData(k)});a.on("error",function(k){d.onError("xhr poll error",k)});(this||te).pollXhr=a};dv(mk.prototype);mk.prototype.create=function(){var a={agent:(this||te).agent,xdomain:(this||te).xd,xscheme:(this||te).xs,enablesXDR:(this||te).enablesXDR};a.pfx=(this||te).pfx;a.key=(this||te).key;a.passphrase=(this||te).passphrase;a.cert=(this||te).cert;a.ca=(this||te).ca;a.ciphers=(this||te).ciphers;
a.rejectUnauthorized=(this||te).rejectUnauthorized;var d=(this||te).xhr=new AR(a),k=this||te;try{HR("xhr open %s: %s",(this||te).method,(this||te).uri);d.open((this||te).method,(this||te).uri,(this||te).async);try{if((this||te).extraHeaders){d.setDisableHeaderCheck&&d.setDisableHeaderCheck(!0);for(var b in(this||te).extraHeaders)(this||te).extraHeaders.hasOwnProperty(b)&&d.setRequestHeader(b,(this||te).extraHeaders[b])}}catch(e){}if("POST"===(this||te).method)try{(this||te).isBinary?d.setRequestHeader("Content-type",
"application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{d.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in d&&(d.withCredentials=(this||te).withCredentials);(this||te).requestTimeout&&(d.timeout=(this||te).requestTimeout);this.hasXDR()?(d.onload=function(){k.onLoad()},d.onerror=function(){k.onError(d.responseText)}):d.onreadystatechange=function(){if(2===d.readyState)try{var e=d.getResponseHeader("Content-Type");if(k.supportsBinary&&"application/octet-stream"===
e||"application/octet-stream; charset=UTF-8"===e)d.responseType="arraybuffer"}catch(l){}if(4===d.readyState)if(200===d.status||1223===d.status)k.onLoad();else setTimeout(function(){k.onError("number"===typeof d.status?d.status:0)},0)};HR("xhr data %s",(this||te).data);d.send((this||te).data)}catch(e){setTimeout(function(){k.onError(e)},0);return}"undefined"!==typeof document&&((this||te).index=mk.requestsCount++,mk.requests[(this||te).index]=this||te)};mk.prototype.onSuccess=function(){this.emit("success");
this.cleanup()};mk.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};mk.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};mk.prototype.cleanup=function(a){if("undefined"!==typeof(this||te).xhr&&null!==(this||te).xhr){this.hasXDR()?(this||te).xhr.onload=(this||te).xhr.onerror=n0:(this||te).xhr.onreadystatechange=n0;if(a)try{(this||te).xhr.abort()}catch(d){}"undefined"!==typeof document&&delete mk.requests[(this||te).index];(this||te).xhr=null}};mk.prototype.onLoad=
function(){try{try{var a=(this||te).xhr.getResponseHeader("Content-Type")}catch(k){}var d="application/octet-stream"===a||"application/octet-stream; charset=UTF-8"===a?(this||te).xhr.response||(this||te).xhr.responseText:(this||te).xhr.responseText}catch(k){this.onError(k)}if(null!=d)this.onData(d)};mk.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!(this||te).xs&&(this||te).enablesXDR};mk.prototype.abort=function(){this.cleanup()};mk.requestsCount=0;mk.requests={};"undefined"!==
typeof document&&("function"===typeof attachEvent?attachEvent("onunload",p0):"function"===typeof addEventListener&&addEventListener("onpagehide"in zR?"pagehide":"unload",p0,!1));var Ena=GR,Fna={},Gna=[].indexOf,IR=Fna=function(a,d){if(Gna)return a.indexOf(d);for(var k=0;k<a.length;++k)if(a[k]===d)return k;return-1},Sh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,S5={},sO=R5,q0=zR;S5=hx;var Hna=/\n/g,Ina=/\\n/g,BG;tJ(hx,sO);hx.prototype.supportsBinary=!1;hx.prototype.doClose=
function(){(this||Sh).script&&((this||Sh).script.parentNode.removeChild((this||Sh).script),(this||Sh).script=null);(this||Sh).form&&((this||Sh).form.parentNode.removeChild((this||Sh).form),(this||Sh).form=null,(this||Sh).iframe=null);sO.prototype.doClose.call(this||Sh)};hx.prototype.doPoll=function(){var a=this||Sh,d=document.createElement("script");(this||Sh).script&&((this||Sh).script.parentNode.removeChild((this||Sh).script),(this||Sh).script=null);d.async=!0;d.src=this.uri();d.onerror=function(b){a.onError("jsonp poll error",
b)};var k=document.getElementsByTagName("script")[0];k?k.parentNode.insertBefore(d,k):(document.head||document.body).appendChild(d);(this||Sh).script=d;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var b=document.createElement("iframe");document.body.appendChild(b);document.body.removeChild(b)},100)};hx.prototype.doWrite=function(a,d){function k(){b();d()}function b(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(w){e.onError("jsonp polling iframe removal error",
w)}try{u=document.createElement('<iframe src="javascript:0" name="'+e.iframeId+'">')}catch(w){u=document.createElement("iframe"),u.name=e.iframeId,u.src="javascript:0"}u.id=e.iframeId;e.form.appendChild(u);e.iframe=u}var e=this||Sh;if(!(this||Sh).form){var l=document.createElement("form"),p=document.createElement("textarea"),q=(this||Sh).iframeId="eio_iframe_"+(this||Sh).index,u;l.className="socketio";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";l.target=q;l.method="POST";
l.setAttribute("accept-charset","utf-8");p.name="d";l.appendChild(p);document.body.appendChild(l);(this||Sh).form=l;(this||Sh).area=p}(this||Sh).form.action=this.uri();b();a=a.replace(Ina,"\\\n");(this||Sh).area.value=a.replace(Hna,"\\n");try{(this||Sh).form.submit()}catch(w){}(this||Sh).iframe.attachEvent?(this||Sh).iframe.onreadystatechange=function(){"complete"===e.iframe.readyState&&k()}:(this||Sh).iframe.onload=k};var Jna=S5,Kna=Object.freeze({}),Mf="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,T5={},Lna=Ng.Buffer,tO=FR,Mna=hi,Nna=Vq("engine.io-client:websocket"),CG;"undefined"!==typeof WebSocket?CG=WebSocket:"undefined"!==typeof self&&(CG=self.WebSocket||self.MozWebSocket);if("undefined"===typeof window)try{var r0=Kna}catch(a){}var ix=CG||r0;T5=rn;tJ(rn,tO);rn.prototype.name="websocket";rn.prototype.supportsBinary=!0;rn.prototype.doOpen=function(){if(this.check()){var a=this.uri(),d=(this||Mf).protocols,k={};(this||Mf).isReactNative||(k.agent=(this||
Mf).agent,k.perMessageDeflate=(this||Mf).perMessageDeflate,k.pfx=(this||Mf).pfx,k.key=(this||Mf).key,k.passphrase=(this||Mf).passphrase,k.cert=(this||Mf).cert,k.ca=(this||Mf).ca,k.ciphers=(this||Mf).ciphers,k.rejectUnauthorized=(this||Mf).rejectUnauthorized);(this||Mf).extraHeaders&&(k.headers=(this||Mf).extraHeaders);(this||Mf).localAddress&&(k.localAddress=(this||Mf).localAddress);try{(this||Mf).ws=(this||Mf).usingBrowserWebSocket&&!(this||Mf).isReactNative?d?new ix(a,d):new ix(a):new ix(a,d,k)}catch(b){return this.emit("error",
b)}void 0===(this||Mf).ws.binaryType&&((this||Mf).supportsBinary=!1);(this||Mf).ws.supports&&(this||Mf).ws.supports.binary?((this||Mf).supportsBinary=!0,(this||Mf).ws.binaryType="nodebuffer"):(this||Mf).ws.binaryType="arraybuffer";this.addEventListeners()}};rn.prototype.addEventListeners=function(){var a=this||Mf;(this||Mf).ws.onopen=function(){a.onOpen()};(this||Mf).ws.onclose=function(){a.onClose()};(this||Mf).ws.onmessage=function(d){a.onData(d.data)};(this||Mf).ws.onerror=function(d){a.onError("websocket error",
d)}};rn.prototype.write=function(a){function d(){k.emit("flush");setTimeout(function(){k.writable=!0;k.emit("drain")},0)}var k=this||Mf;(this||Mf).writable=!1;for(var b=a.length,e=0,l=b;e<l;e++)(function(p){Mna.encodePacket(p,k.supportsBinary,function(q){if(!k.usingBrowserWebSocket){var u={};p.options&&(u.compress=p.options.compress);k.perMessageDeflate&&("string"===typeof q?Lna.byteLength(q):q.length)<k.perMessageDeflate.threshold&&(u.compress=!1)}try{k.usingBrowserWebSocket?k.ws.send(q):k.ws.send(q,
u)}catch(w){Nna("websocket closed before onclose event")}--b||d()})})(a[e])};rn.prototype.onClose=function(){tO.prototype.onClose.call(this||Mf)};rn.prototype.doClose=function(){"undefined"!==typeof(this||Mf).ws&&(this||Mf).ws.close()};rn.prototype.uri=function(){var a=(this||Mf).query||{},d=(this||Mf).secure?"wss":"ws",k="";(this||Mf).port&&("wss"===d&&443!==Number((this||Mf).port)||"ws"===d&&80!==Number((this||Mf).port))&&(k=":"+(this||Mf).port);(this||Mf).timestampRequests&&(a[(this||Mf).timestampParam]=
N5());(this||Mf).supportsBinary||(a.b64=1);a=sJ.encode(a);a.length&&(a="?"+a);var b=-1!==(this||Mf).hostname.indexOf(":");return d+"://"+(b?"["+(this||Mf).hostname+"]":(this||Mf).hostname)+k+(this||Mf).path+a};rn.prototype.check=function(){return!!ix&&!("__initialize"in ix&&(this||Mf).name===rn.prototype.name)};var uJ={},Ona=T5;uJ.polling=function(a){var d=!1,k=!1,b=!1!==a.jsonp;"undefined"!==typeof location&&(k="https:"===location.protocol,(d=location.port)||(d=k?443:80),d=a.hostname!==location.hostname||
d!==a.port,k=a.secure!==k);a.xdomain=d;a.xscheme=k;if("open"in new AR(a)&&!a.forceJSONP)return new Ena(a);if(!b)throw Error("JSONP disabled");return new Jna(a)};uJ.websocket=Ona;var gd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,U5={},ak=Vq("engine.io-client:socket"),V5=hi,s0=B5,Tca=sJ;U5=Th;Th.priorWebsocketSuccess=!1;dv(Th.prototype);Th.protocol=V5.protocol;Th.Socket=Th;Th.Transport=FR;Th.transports=uJ;Th.parser=hi;Th.prototype.createTransport=function(a){ak('creating transport "%s"',
a);var d=(this||gd).query,k={},b;for(b in d)d.hasOwnProperty(b)&&(k[b]=d[b]);k.EIO=V5.protocol;k.transport=a;d=(this||gd).transportOptions[a]||{};(this||gd).id&&(k.sid=(this||gd).id);return new uJ[a]({query:k,socket:this||gd,agent:d.agent||(this||gd).agent,hostname:d.hostname||(this||gd).hostname,port:d.port||(this||gd).port,secure:d.secure||(this||gd).secure,path:d.path||(this||gd).path,forceJSONP:d.forceJSONP||(this||gd).forceJSONP,jsonp:d.jsonp||(this||gd).jsonp,forceBase64:d.forceBase64||(this||
gd).forceBase64,enablesXDR:d.enablesXDR||(this||gd).enablesXDR,withCredentials:d.withCredentials||(this||gd).withCredentials,timestampRequests:d.timestampRequests||(this||gd).timestampRequests,timestampParam:d.timestampParam||(this||gd).timestampParam,policyPort:d.policyPort||(this||gd).policyPort,pfx:d.pfx||(this||gd).pfx,key:d.key||(this||gd).key,passphrase:d.passphrase||(this||gd).passphrase,cert:d.cert||(this||gd).cert,ca:d.ca||(this||gd).ca,ciphers:d.ciphers||(this||gd).ciphers,rejectUnauthorized:d.rejectUnauthorized||
(this||gd).rejectUnauthorized,perMessageDeflate:d.perMessageDeflate||(this||gd).perMessageDeflate,extraHeaders:d.extraHeaders||(this||gd).extraHeaders,forceNode:d.forceNode||(this||gd).forceNode,localAddress:d.localAddress||(this||gd).localAddress,requestTimeout:d.requestTimeout||(this||gd).requestTimeout,protocols:d.protocols||void 0,isReactNative:(this||gd).isReactNative})};Th.prototype.open=function(){if((this||gd).rememberUpgrade&&Th.priorWebsocketSuccess&&-1!==(this||gd).transports.indexOf("websocket"))var a=
"websocket";else{if(0===(this||gd).transports.length){var d=this||gd;setTimeout(function(){d.emit("error","No transports available")},0);return}a=(this||gd).transports[0]}(this||gd).readyState="opening";try{a=this.createTransport(a)}catch(k){(this||gd).transports.shift();this.open();return}a.open();this.setTransport(a)};Th.prototype.setTransport=function(a){ak("setting transport %s",a.name);var d=this||gd;(this||gd).transport&&(ak("clearing existing transport %s",(this||gd).transport.name),(this||
gd).transport.removeAllListeners());(this||gd).transport=a;a.on("drain",function(){d.onDrain()}).on("packet",function(k){d.onPacket(k)}).on("error",function(k){d.onError(k)}).on("close",function(){d.onClose("transport close")})};Th.prototype.probe=function(a){function d(){if(y.onlyBinaryUpgrades){var A=!(this||gd).supportsBinary&&y.transport.supportsBinary;w=w||A}w||(ak('probe transport "%s" opened',a),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(C){w||("pong"===C.type&&"probe"===
C.data?(ak('probe transport "%s" pong',a),y.upgrading=!0,y.emit("upgrading",u),u&&(Th.priorWebsocketSuccess="websocket"===u.name,ak('pausing current transport "%s"',y.transport.name),y.transport.pause(function(){w||"closed"===y.readyState||(ak("changing transport and sending upgrade packet"),q(),y.setTransport(u),u.send([{type:"upgrade"}]),y.emit("upgrade",u),u=null,y.upgrading=!1,y.flush())}))):(ak('probe transport "%s" failed',a),C=Error("probe error"),C.transport=u.name,y.emit("upgradeError",C)))}))}
function k(){w||(w=!0,q(),u.close(),u=null)}function b(A){var C=Error("probe error: "+A);C.transport=u.name;k();ak('probe transport "%s" failed because of error: %s',a,A);y.emit("upgradeError",C)}function e(){b("transport closed")}function l(){b("socket closed")}function p(A){u&&A.name!==u.name&&(ak('"%s" works - aborting "%s"',A.name,u.name),k())}function q(){u.removeListener("open",d);u.removeListener("error",b);u.removeListener("close",e);y.removeListener("close",l);y.removeListener("upgrading",
p)}ak('probing transport "%s"',a);var u=this.createTransport(a,{probe:1}),w=!1,y=this||gd;Th.priorWebsocketSuccess=!1;u.once("open",d);u.once("error",b);u.once("close",e);this.once("close",l);this.once("upgrading",p);u.open()};Th.prototype.onOpen=function(){ak("socket open");(this||gd).readyState="open";Th.priorWebsocketSuccess="websocket"===(this||gd).transport.name;this.emit("open");this.flush();if("open"===(this||gd).readyState&&(this||gd).upgrade&&(this||gd).transport.pause){ak("starting upgrade probes");
for(var a=0,d=(this||gd).upgrades.length;a<d;a++)this.probe((this||gd).upgrades[a])}};Th.prototype.onPacket=function(a){if("opening"===(this||gd).readyState||"open"===(this||gd).readyState||"closing"===(this||gd).readyState)switch(ak('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(JSON.parse(a.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var d=Error("server error");d.code=a.data;
this.onError(d);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else ak('packet received with socket readyState "%s"',(this||gd).readyState)};Th.prototype.onHandshake=function(a){this.emit("handshake",a);(this||gd).id=a.sid;(this||gd).transport.query.sid=a.sid;(this||gd).upgrades=this.filterUpgrades(a.upgrades);(this||gd).pingInterval=a.pingInterval;(this||gd).pingTimeout=a.pingTimeout;this.onOpen();"closed"!==(this||gd).readyState&&(this.setPing(),this.removeListener("heartbeat",
(this||gd).onHeartbeat),this.on("heartbeat",(this||gd).onHeartbeat))};Th.prototype.onHeartbeat=function(a){clearTimeout((this||gd).pingTimeoutTimer);var d=this||gd;d.pingTimeoutTimer=setTimeout(function(){if("closed"!==d.readyState)d.onClose("ping timeout")},a||d.pingInterval+d.pingTimeout)};Th.prototype.setPing=function(){var a=this||gd;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){ak("writing ping packet - expecting pong within %sms",a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},
a.pingInterval)};Th.prototype.ping=function(){var a=this||gd;this.sendPacket("ping",function(){a.emit("ping")})};Th.prototype.onDrain=function(){(this||gd).writeBuffer.splice(0,(this||gd).prevBufferLen);(this||gd).prevBufferLen=0;0===(this||gd).writeBuffer.length?this.emit("drain"):this.flush()};Th.prototype.flush=function(){"closed"!==(this||gd).readyState&&(this||gd).transport.writable&&!(this||gd).upgrading&&(this||gd).writeBuffer.length&&(ak("flushing %d packets in socket",(this||gd).writeBuffer.length),
(this||gd).transport.send((this||gd).writeBuffer),(this||gd).prevBufferLen=(this||gd).writeBuffer.length,this.emit("flush"))};Th.prototype.write=Th.prototype.send=function(a,d,k){this.sendPacket("message",a,d,k);return this||gd};Th.prototype.sendPacket=function(a,d,k,b){"function"===typeof d&&(b=d,d=void 0);"function"===typeof k&&(b=k,k=null);if("closing"!==(this||gd).readyState&&"closed"!==(this||gd).readyState){k=k||{};k.compress=!1!==k.compress;a={type:a,data:d,options:k};this.emit("packetCreate",
a);(this||gd).writeBuffer.push(a);if(b)this.once("flush",b);this.flush()}};Th.prototype.close=function(){function a(){b.onClose("forced close");ak("socket closing - telling transport to close");b.transport.close()}function d(){b.removeListener("upgrade",d);b.removeListener("upgradeError",d);a()}function k(){b.once("upgrade",d);b.once("upgradeError",d)}if("opening"===(this||gd).readyState||"open"===(this||gd).readyState){(this||gd).readyState="closing";var b=this||gd;if((this||gd).writeBuffer.length)this.once("drain",
function(){(this||gd).upgrading?k():a()});else(this||gd).upgrading?k():a()}return this||gd};Th.prototype.onError=function(a){ak("socket error %j",a);Th.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};Th.prototype.onClose=function(a,d){if("opening"===(this||gd).readyState||"open"===(this||gd).readyState||"closing"===(this||gd).readyState){ak('socket close with reason: "%s"',a);var k=this||gd;clearTimeout((this||gd).pingIntervalTimer);clearTimeout((this||gd).pingTimeoutTimer);
(this||gd).transport.removeAllListeners("close");(this||gd).transport.close();(this||gd).transport.removeAllListeners();(this||gd).readyState="closed";(this||gd).id=null;this.emit("close",a,d);k.writeBuffer=[];k.prevBufferLen=0}};Th.prototype.filterUpgrades=function(a){for(var d=[],k=0,b=a.length;k<b;k++)~IR((this||gd).transports,a[k])&&d.push(a[k]);return d};var JR={};JR=U5;JR.parser=hi;var Pna=JR,Qna={},KR=Qna=function(a,d){for(var k=[],b=(d=d||0)||0;b<a.length;b++)k[b-d]=a[b];return k},Rna={},
W5=[].slice,Wq=Rna=function(a,d){"string"==typeof d&&(d=a[d]);if("function"!=typeof d)throw Error("bind() requires a function");var k=W5.call(arguments,2);return function(){return d.apply(a,k.concat(W5.call(arguments)))}},Sna={},Io=Sna=function(a,d,k){a.on(d,k);return{destroy:function(){a.removeListener(d,k)}}},Ce="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,LR={},Ul=Pi,Jo=Vq("socket.io-client:socket");LR=LR=xj;var Tna={connect:1,connect_error:1,connect_timeout:1,
connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},MR=dv.prototype.emit;dv(xj.prototype);xj.prototype.subEvents=function(){if(!(this||Ce).subs){var a=(this||Ce).io;(this||Ce).subs=[Io(a,"open",Wq(this||Ce,"onopen")),Io(a,"packet",Wq(this||Ce,"onpacket")),Io(a,"close",Wq(this||Ce,"onclose"))]}};xj.prototype.open=xj.prototype.connect=function(){if((this||Ce).connected)return this||Ce;this.subEvents();(this||Ce).io.reconnecting||
(this||Ce).io.open();if("open"===(this||Ce).io.readyState)this.onopen();this.emit("connecting");return this||Ce};xj.prototype.send=function(){var a=KR(arguments);a.unshift("message");(this||Ce).emit.apply(this||Ce,a);return this||Ce};xj.prototype.emit=function(a){if(Tna.hasOwnProperty(a))return MR.apply(this||Ce,arguments),this||Ce;var d=KR(arguments),k={type:(void 0!==(this||Ce).flags.binary?(this||Ce).flags.binary:BR(d))?Ul.BINARY_EVENT:Ul.EVENT,data:d,options:{}};k.options.compress=!(this||Ce).flags||
!1!==(this||Ce).flags.compress;"function"===typeof d[d.length-1]&&(Jo("emitting packet with ack id %d",(this||Ce).ids),(this||Ce).acks[(this||Ce).ids]=d.pop(),k.id=(this||Ce).ids++);(this||Ce).connected?this.packet(k):(this||Ce).sendBuffer.push(k);(this||Ce).flags={};return this||Ce};xj.prototype.packet=function(a){a.nsp=(this||Ce).nsp;(this||Ce).io.packet(a)};xj.prototype.onopen=function(){Jo("transport is open - connecting");if("/"!==(this||Ce).nsp)if((this||Ce).query){var a="object"===typeof(this||
Ce).query?sJ.encode((this||Ce).query):(this||Ce).query;Jo("sending connect packet with query %s",a);this.packet({type:Ul.CONNECT,query:a})}else this.packet({type:Ul.CONNECT})};xj.prototype.onclose=function(a){Jo("close (%s)",a);(this||Ce).connected=!1;(this||Ce).disconnected=!0;delete (this||Ce).id;this.emit("disconnect",a)};xj.prototype.onpacket=function(a){var d=a.type===Ul.ERROR&&"/"===a.nsp;if(a.nsp===(this||Ce).nsp||d)switch(a.type){case Ul.CONNECT:this.onconnect();break;case Ul.EVENT:this.onevent(a);
break;case Ul.BINARY_EVENT:this.onevent(a);break;case Ul.ACK:this.onack(a);break;case Ul.BINARY_ACK:this.onack(a);break;case Ul.DISCONNECT:this.ondisconnect();break;case Ul.ERROR:this.emit("error",a.data)}};xj.prototype.onevent=function(a){var d=a.data||[];Jo("emitting event %j",d);null!=a.id&&(Jo("attaching ack callback to event"),d.push(this.ack(a.id)));(this||Ce).connected?MR.apply(this||Ce,d):(this||Ce).receiveBuffer.push(d)};xj.prototype.ack=function(a){var d=this||Ce,k=!1;return function(){if(!k){k=
!0;var b=KR(arguments);Jo("sending ack %j",b);d.packet({type:BR(b)?Ul.BINARY_ACK:Ul.ACK,id:a,data:b})}}};xj.prototype.onack=function(a){var d=(this||Ce).acks[a.id];"function"===typeof d?(Jo("calling ack %s with %j",a.id,a.data),d.apply(this||Ce,a.data),delete (this||Ce).acks[a.id]):Jo("bad ack %s",a.id)};xj.prototype.onconnect=function(){(this||Ce).connected=!0;(this||Ce).disconnected=!1;this.emit("connect");this.emitBuffered()};xj.prototype.emitBuffered=function(){var a;for(a=0;a<(this||Ce).receiveBuffer.length;a++)MR.apply(this||
Ce,(this||Ce).receiveBuffer[a]);(this||Ce).receiveBuffer=[];for(a=0;a<(this||Ce).sendBuffer.length;a++)this.packet((this||Ce).sendBuffer[a]);(this||Ce).sendBuffer=[]};xj.prototype.ondisconnect=function(){Jo("server disconnect (%s)",(this||Ce).nsp);this.destroy();this.onclose("io server disconnect")};xj.prototype.destroy=function(){if((this||Ce).subs){for(var a=0;a<(this||Ce).subs.length;a++)(this||Ce).subs[a].destroy();(this||Ce).subs=null}(this||Ce).io.destroy(this||Ce)};xj.prototype.close=xj.prototype.disconnect=
function(){(this||Ce).connected&&(Jo("performing disconnect (%s)",(this||Ce).nsp),this.packet({type:Ul.DISCONNECT}));this.destroy();if((this||Ce).connected)this.onclose("io client disconnect");return this||Ce};xj.prototype.compress=function(a){(this||Ce).flags.compress=a;return this||Ce};xj.prototype.binary=function(a){(this||Ce).flags.binary=a;return this||Ce};var X5=LR,Jl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Y5={};Y5=jx;jx.prototype.duration=function(){var a=
(this||Jl).ms*Math.pow((this||Jl).factor,(this||Jl).attempts++);if((this||Jl).jitter){var d=Math.random(),k=Math.floor(d*(this||Jl).jitter*a);a=0==(Math.floor(10*d)&1)?a-k:a+k}return Math.min(a,(this||Jl).max)|0};jx.prototype.reset=function(){(this||Jl).attempts=0};jx.prototype.setMin=function(a){(this||Jl).ms=a};jx.prototype.setMax=function(a){(this||Jl).max=a};jx.prototype.setJitter=function(a){(this||Jl).jitter=a};var Una=Y5,Vna={},Z5=Vq("socket.io-client:url"),Wna=Vna=function(a,d){var k=a;d=
d||"undefined"!==typeof location&&location;null==a&&(a=d.protocol+"//"+d.host);"string"===typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?d.protocol+a:d.host+a),/^(https?|wss?):\/\//.test(a)||(Z5("protocol-less url %s",a),a="undefined"!==typeof d?d.protocol+"//"+a:"https://"+a),Z5("parse %s",a),k=B5(a));k.port||(/^(http|ws)$/.test(k.protocol)?k.port="80":/^(http|ws)s$/.test(k.protocol)&&(k.port="443"));k.path=k.path||"/";a=-1!==k.host.indexOf(":")?"["+k.host+"]":k.host;k.id=k.protocol+"://"+a+
":"+k.port;k.href=k.protocol+"://"+a+(d&&d.port===k.port?"":":"+k.port);return k},Ad="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$5={},Vca=Pi,wl=Vq("socket.io-client:manager"),Uca=Una,a6=Object.prototype.hasOwnProperty;$5=ii;ii.prototype.emitAll=function(){(this||Ad).emit.apply(this||Ad,arguments);for(var a in(this||Ad).nsps)a6.call((this||Ad).nsps,a)&&(this||Ad).nsps[a].emit.apply((this||Ad).nsps[a],arguments)};ii.prototype.updateSocketIds=function(){for(var a in(this||
Ad).nsps)a6.call((this||Ad).nsps,a)&&((this||Ad).nsps[a].id=this.generateId(a))};ii.prototype.generateId=function(a){return("/"===a?"":a+"#")+(this||Ad).engine.id};dv(ii.prototype);ii.prototype.reconnection=function(a){if(!arguments.length)return(this||Ad)._reconnection;(this||Ad)._reconnection=!!a;return this||Ad};ii.prototype.reconnectionAttempts=function(a){if(!arguments.length)return(this||Ad)._reconnectionAttempts;(this||Ad)._reconnectionAttempts=a;return this||Ad};ii.prototype.reconnectionDelay=
function(a){if(!arguments.length)return(this||Ad)._reconnectionDelay;(this||Ad)._reconnectionDelay=a;(this||Ad).backoff&&(this||Ad).backoff.setMin(a);return this||Ad};ii.prototype.randomizationFactor=function(a){if(!arguments.length)return(this||Ad)._randomizationFactor;(this||Ad)._randomizationFactor=a;(this||Ad).backoff&&(this||Ad).backoff.setJitter(a);return this||Ad};ii.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return(this||Ad)._reconnectionDelayMax;(this||Ad)._reconnectionDelayMax=
a;(this||Ad).backoff&&(this||Ad).backoff.setMax(a);return this||Ad};ii.prototype.timeout=function(a){if(!arguments.length)return(this||Ad)._timeout;(this||Ad)._timeout=a;return this||Ad};ii.prototype.maybeReconnectOnOpen=function(){!(this||Ad).reconnecting&&(this||Ad)._reconnection&&0===(this||Ad).backoff.attempts&&this.reconnect()};ii.prototype.open=ii.prototype.connect=function(a,d){wl("readyState %s",(this||Ad).readyState);if(~(this||Ad).readyState.indexOf("open"))return this||Ad;wl("opening %s",
(this||Ad).uri);(this||Ad).engine=Pna((this||Ad).uri,(this||Ad).opts);var k=(this||Ad).engine,b=this||Ad;(this||Ad).readyState="opening";(this||Ad).skipReconnect=!1;var e=Io(k,"open",function(){b.onopen();a&&a()});d=Io(k,"error",function(q){wl("connect_error");b.cleanup();b.readyState="closed";b.emitAll("connect_error",q);if(a){var u=Error("Connection error");u.data=q;a(u)}else b.maybeReconnectOnOpen()});if(!1!==(this||Ad)._timeout){var l=(this||Ad)._timeout;wl("connect attempt will timeout after %d",
l);0===l&&e.destroy();var p=setTimeout(function(){wl("connect attempt timed out after %d",l);e.destroy();k.close();k.emit("error","timeout");b.emitAll("connect_timeout",l)},l);(this||Ad).subs.push({destroy:function(){clearTimeout(p)}})}(this||Ad).subs.push(e);(this||Ad).subs.push(d);return this||Ad};ii.prototype.onopen=function(){wl("open");this.cleanup();(this||Ad).readyState="open";this.emit("open");var a=(this||Ad).engine;(this||Ad).subs.push(Io(a,"data",Wq(this||Ad,"ondata")));(this||Ad).subs.push(Io(a,
"ping",Wq(this||Ad,"onping")));(this||Ad).subs.push(Io(a,"pong",Wq(this||Ad,"onpong")));(this||Ad).subs.push(Io(a,"error",Wq(this||Ad,"onerror")));(this||Ad).subs.push(Io(a,"close",Wq(this||Ad,"onclose")));(this||Ad).subs.push(Io((this||Ad).decoder,"decoded",Wq(this||Ad,"ondecoded")))};ii.prototype.onping=function(){(this||Ad).lastPing=new Date;this.emitAll("ping")};ii.prototype.onpong=function(){this.emitAll("pong",new Date-(this||Ad).lastPing)};ii.prototype.ondata=function(a){(this||Ad).decoder.add(a)};
ii.prototype.ondecoded=function(a){this.emit("packet",a)};ii.prototype.onerror=function(a){wl("error",a);this.emitAll("error",a)};ii.prototype.socket=function(a,d){function k(){~IR(e.connecting,b)||e.connecting.push(b)}var b=(this||Ad).nsps[a];if(!b){b=new X5(this||Ad,a,d);(this||Ad).nsps[a]=b;var e=this||Ad;b.on("connecting",k);b.on("connect",function(){b.id=e.generateId(a)});(this||Ad).autoConnect&&k()}return b};ii.prototype.destroy=function(a){a=IR((this||Ad).connecting,a);~a&&(this||Ad).connecting.splice(a,
1);(this||Ad).connecting.length||this.close()};ii.prototype.packet=function(a){wl("writing packet %j",a);var d=this||Ad;a.query&&0===a.type&&(a.nsp+="?"+a.query);d.encoding?d.packetBuffer.push(a):(d.encoding=!0,(this||Ad).encoder.encode(a,function(k){for(var b=0;b<k.length;b++)d.engine.write(k[b],a.options);d.encoding=!1;d.processPacketQueue()}))};ii.prototype.processPacketQueue=function(){if(0<(this||Ad).packetBuffer.length&&!(this||Ad).encoding){var a=(this||Ad).packetBuffer.shift();this.packet(a)}};
ii.prototype.cleanup=function(){wl("cleanup");for(var a=(this||Ad).subs.length,d=0;d<a;d++)(this||Ad).subs.shift().destroy();(this||Ad).packetBuffer=[];(this||Ad).encoding=!1;(this||Ad).lastPing=null;(this||Ad).decoder.destroy()};ii.prototype.close=ii.prototype.disconnect=function(){wl("disconnect");(this||Ad).skipReconnect=!0;(this||Ad).reconnecting=!1;"opening"===(this||Ad).readyState&&this.cleanup();(this||Ad).backoff.reset();(this||Ad).readyState="closed";(this||Ad).engine&&(this||Ad).engine.close()};
ii.prototype.onclose=function(a){wl("onclose");this.cleanup();(this||Ad).backoff.reset();(this||Ad).readyState="closed";this.emit("close",a);(this||Ad)._reconnection&&!(this||Ad).skipReconnect&&this.reconnect()};ii.prototype.reconnect=function(){if((this||Ad).reconnecting||(this||Ad).skipReconnect)return this||Ad;var a=this||Ad;if((this||Ad).backoff.attempts>=(this||Ad)._reconnectionAttempts)wl("reconnect failed"),(this||Ad).backoff.reset(),this.emitAll("reconnect_failed"),(this||Ad).reconnecting=
!1;else{var d=(this||Ad).backoff.duration();wl("will wait %dms before reconnect attempt",d);(this||Ad).reconnecting=!0;var k=setTimeout(function(){a.skipReconnect||(wl("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(wl("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(wl("reconnect success"),a.onreconnect())}))},d);(this||Ad).subs.push({destroy:function(){clearTimeout(k)}})}};
ii.prototype.onreconnect=function(){var a=(this||Ad).backoff.attempts;(this||Ad).reconnecting=!1;(this||Ad).backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)};var b6=$5,Cs={},Wca=Wna,Xna=Pi,v0=b6,u0=Vq("socket.io-client");Cs=Cs=t0;var oA=Cs.managers={};Cs.protocol=Xna.protocol;Cs.connect=t0;Cs.Manager=b6;Cs.Socket=X5;var Yna=Cs,Qf=lively.FreezerRuntime.recorderFor("lively.2lively/client.js");Qf.determineLocation=function(){return"undefined"!==typeof document&&document.location?System.baseURL||
document.location.origin:Qf.isNode?System._nodeRequire("os").hostname():System.baseURL};Qf.promise=Uf;Qf.fun=Tj;Qf.obj=ff;Qf.events=tu;Qf.num=Gj;Qf.L2LConnection=Ii;Qf.defaultActions=lJ;Qf.defaultClientActions=mJ;Qf.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof Qf.process&&Qf.process.env;Qf._ioClient=Yna;Qf.resource=sc;Qf.ioClient=Qf.ioClient||void 0;Qf.isNode?(Qf.require=System._nodeRequire("module")._load,Qf.ioClient=Qf.require("socket.io-client")):Qf.ioClient=
Qf._ioClient;Qf.urlHelper={isRoot:function(a){return"/"===Qf.urlHelper.path(a)},root:function(a){return Qf.urlHelper.isRoot(a)?a:a.slice(0,-Qf.urlHelper.path(a).length)+"/"},path:function(){var a=/^[a-z0-9-_\.]+:/,d=/^\/\/[^\/]+/;return function(k){k=k.replace(a,"").replace(d,"");return""===k?"/":k}}(),join:function(a,d){a.endsWith("/")&&(a=a.slice(0,-1));d.startsWith("/")&&(d=d.slice(1));return a+"/"+d}};var xi=function(a,d,k,b){var e=Qf.L2LConnection.call(this)||this;Qf.events.makeEmitter(e);e.info=
b;e.origin=a;e.path=d;e.namespace=k.replace(/^\/?/,"/");e.trackerId=null;e._socketioClient=null;e._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(Qf.defaultActions).forEach(function(l){return e.addService(l,Qf.defaultActions[l])});Object.keys(Qf.defaultClientActions).forEach(function(l){return e.addService(l,Qf.defaultClientActions[l])});return e};$jscomp.inherits(xi,Qf.L2LConnection);xi.clientKey=
function(a,d,k){a=a.replace(/\/$/,"");d=d.replace(/^\//,"");k=k.replace(/^\//,"");return a+"-"+d+"-"+k};xi.forLivelyInBrowser=function(a){var d=!!a;a=Object.assign({type:"lively.morphic browser"},a);var k=this.default();if(!k)return Qf.L2LClient.ensure({url:Qf.resource(Qf.determineLocation()).join("/lively-socket.io").url,namespace:"l2l",info:a});d&&!Qf.obj.equals(k.info,a)&&k.isRegistered()&&(k.info=a,k.unregister().then(function(){return k.register()}).catch(function(b){return console.error("l2l re-register on info change errored: "+
b)}));return k};xi.default=function(){var a=Qf.L2LClient.clients.keys().next().value;return Qf.L2LClient.clients.get(a)};xi.create=function(a){var d=a=void 0===a?{}:a;a=void 0===d.debug?!1:d.debug;var k=d.url,b=d.namespace,e=void 0===d.autoOpen?!0:d.autoOpen;d=void 0===d.info?{}:d.info;if(!k)throw Error("L2LClient needs server url!");var l=Qf.urlHelper.root(k).replace(/\/+$/,"");k=Qf.urlHelper.path(k);b=new this(l,k,b||"",d);e&&b.register();b.debug=a;return b};xi.ensure=function(a){var d=a=void 0===
a?{}:a,k=d.url;d=d.namespace;if(!k)throw Error("L2LClient needs server url!");var b=Qf.urlHelper.root(k).replace(/\/+$/,""),e=Qf.urlHelper.path(k);b=this.clientKey(b,e,d||"");(e=this.clients.get(b))||this.clients.set(b,e=this.create(Object.assign({},a,{url:k,namespace:d})));return e};xi.prototype.isOnline=function(){return this.socket&&this.socket.connected};xi.prototype.isRegistered=function(){return this.isOnline()&&!!this.trackerId};xi.prototype.open=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return a.isOnline()||a._reconnectState.isOpening?e.return(a):e.yield(a.close(),2);a._reconnectState.closed=!1;d=Qf.urlHelper.join(a.origin,a.namespace);k={path:a.path,transports:["websocket","polling"]};b=a._socketioClient=Qf.ioClient(d,k);a.debug&&console.log("["+a+"] connecting");b.on("error",function(l){a._reconnectState.isOpening=!1;a.debug&&console.log("["+a+"] errored: "+l)});b.on("close",function(l){return a.debug&&console.log("["+a+"] closed: "+l)});b.on("reconnect_failed",function(){return a.debug&&
console.log("["+a+"] could not reconnect")});b.on("reconnect_error",function(l){return a.debug&&console.log("["+a+"] reconnect error "+l)});b.on("connect",function(){a.debug&&console.log("["+a+"] connected");a.emit("connected",a);a._reconnectState.isOpening=!1;a._reconnectState.isReconnecting=!1;a._reconnectState.isReconnectingViaSocketio=!1});b.on("disconnect",function(){a._reconnectState.isOpening=!1;a.debug&&console.log("["+a+"] disconnected");a.emit("disconnected",a);a.trackerId?("tracker"!==
a.trackerId&&(a.renameTarget(a.trackerId,"tracker"),a.trackerId=null),a._reconnectState.closed?a.debug&&console.log("["+a+"] won't reconnect b/c client is marked as closed"):a._reconnectState.autoReconnect?(a._reconnectState.isReconnecting=!0,setTimeout(function(){a._reconnectState.closed?a.debug&&console.log("["+a+"] won't reconnect b/c client is marked as closed 2"):a._reconnectState.isReconnectingViaSocketio?a.debug&&console.log("["+a+"] won't reconnect again, client already reconnecting"):(a.debug&&
console.log("["+a+"] initiating reconnection to tracker"),a.register())},20)):a.debug&&console.log("["+a+"] won't reconnect b/c client has reconnection disabled")):(a.debug&&console.log("["+a+"] disconnect: don't have a tracker id, won't try reconnect"),a.trackerId="tracker")});b.on("reconnecting",function(){a.debug&&console.log("["+a+"] reconnecting",a._reconnectState);a.emit("reconnecting",a);a._reconnectState.closed?(a._reconnectState.isReconnecting=!1,a._reconnectState.isReconnectingViaSocketio=
!1,b.close(),a.close()):(a._reconnectState.isReconnecting=!0,a._reconnectState.isReconnectingViaSocketio=!0)});b.on("reconnect",function(){a.debug&&console.log("["+a+"] reconnected");a._reconnectState.isReconnecting=!1;a._reconnectState.isReconnectingViaSocketio=!1;a.register();if(a.onReconnect&&"function"===typeof a.onReconnect)a.onReconnect()});a.installEventToMessageTranslator(b);a._reconnectState.isOpening=!0;return e.return((new Promise(function(l,p){b.once("error",p);b.once("connect",l)})).then(function(){return a}))})};
xi.prototype.onReconnect=function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){a=(new Date).toTimeString();console.log("Reconnected at "+a);d.jumpToEnd()})};xi.prototype.close=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){a._reconnectState.closed=!0;if(d=a.socket)d.removeAllListeners("reconnect"),d.removeAllListeners("reconnecting"),d.removeAllListeners("disconnect"),d.removeAllListeners("connect"),d.removeAllListeners("reconnect_error"),
d.removeAllListeners("reconnect_failed"),d.removeAllListeners("close"),d.removeAllListeners("error"),d.close();a.debug&&console.log("["+a+"] closing...");return a.isRegistered()?b.yield(a.unregister(),2):b.jumpTo(2)}return a.isOnline()||a.socket?d&&!d.connected?(a.debug&&console.log("["+a+"] socket not connected, considering client closed"),b.return(a)):b.return(Promise.race([Qf.promise.delay(2E3).then(function(){return d.removeAllListeners("disconnect")}),new Promise(function(e){return d.once("disconnect",
e)})]).then(function(){a.debug&&console.log("["+a+"] closed");return a})):(a.debug&&(k=a.isOnline()?"no socket":"not online",a.debug&&console.log("["+a+"] cannot close: "+k)),b.return(a))})};xi.prototype.remove=function(){var a=this.constructor.clientKey(this.origin,this.path,this.namespace);this.constructor.clients.delete(a);return this.close()};xi.prototype.register=function(){var a=this,d,k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:if(a.isRegistered())return A.return();
if(a._reconnectState.closed)return a.debug&&console.log("["+a+"] not registering this b/c closed"),a._reconnectState.registerAttempt=0,A.return();if(a._reconnectState.registerProcess)return a.debug&&console.log("["+a+"] not registering this b/c register process exists"),A.return();A.setCatchFinallyBlocks(2);if(a.isOnline()){A.jumpTo(4);break}return A.yield(a.open(),4);case 4:return a.debug&&console.log("["+a+"] register"),A.yield(a.sendToAndWait("tracker","register",Object.assign({userName:"unknown",
type:"l2l "+(Qf.isNode?"node":"browser"),location:Qf.determineLocation()},a.info)),6);case 6:d=A.yieldResult;if(!d.data)throw k=Error("Register answer is empty!"),a.emit("error",k),k;if(d.data.isError)throw b=Error(d.data.error),a.emit("error",b),b;a._reconnectState.registerAttempt=0;e=d;l=e.data;p=l.trackerId;q=l.messageNumber;a.trackerId=p;a._incomingOrderNumberingBySenders.set(p,q||0);a.emit("registered",{trackerId:p});if(a.onReconnect&&"function"===typeof a.onReconnect)a.onReconnect();A.leaveTryBlock(0);
break;case 2:u=A.enterCatchBlock(),console.error("Error in register request of "+a+": "+u),w=a._reconnectState.registerAttempt++,y=Qf.num.backoff(w,4,3E5),a._reconnectState.registerProcess=setTimeout(function(){a._reconnectState.registerProcess=null;a.register()},y),A.jumpToEnd()}})};xi.prototype.unregister=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if(!a.isRegistered())return k.return();a.debug&&console.log("["+a+"] unregister");
d=a.trackerId;k.setCatchFinallyBlocks(2);return k.yield(a.sendToAndWait(a.trackerId,"unregister",{}),4);case 4:k.leaveTryBlock(3);break;case 2:k.enterCatchBlock();case 3:a.renameTarget(d,"tracker"),a.trackerId=null,a.emit("unregistered",a),k.jumpToEnd()}})};xi.prototype.whenRegistered=function(a){var d=this;return Qf.promise.waitFor(a,function(){return d.isRegistered()}).catch(function(k){return Promise.reject(/timeout/i.test(String(k))?Error("Timeout in "+d+".whenRegistered"):k)})};xi.prototype.send=
function(a,d){var k=this,b=$jscomp.makeIterator(this.prepareSend(a,d));a=b.next().value;d=b.next().value;this.whenOnline().then(function(){var e=k.socket,l=a,p=l.action;l=l.target;if(!e)throw Error("Trying to send message "+p+" to "+l+" but cannot find a connection to it!");"function"===typeof d?e.emit(p,a,d):e.emit(p,a)})};xi.prototype.joinRoom=function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] join room",{room:a})})};xi.prototype.leaveRoom=
function(a){var d=this;return this.whenOnline().then(function(){return d.sendToAndWait(d.trackerId,"[broadcast] leave room",{room:a})})};xi.prototype.broadcast=function(a,d,k,b,e){var l=this,p={action:d,room:a,broadcast:k};if(void 0===b?0:b)p.isSystemBroadcast=!0;if(void 0===e?0:e)p.isMultiServerBroadcast=!0;return this.whenOnline().then(function(){return l.sendToAndWait(l.trackerId,"[broadcast] send",p)})};xi.prototype.listRoomMembers=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.yield(d.sendToAndWait(d.trackerId,"[broadcast] list room members",{room:a}),2);k=e.yieldResult;b=k.data;return e.return(b)})};xi.prototype.joinedRooms=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(a.sendToAndWait(a.trackerId,"[broadcast] my rooms",{}),2);d=b.yieldResult;k=d.data;return b.return(k)})};xi.prototype.listRooms=function(){var a=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(a.sendToAndWait(a.trackerId,"[broadcast] all rooms",{}),2);d=b.yieldResult;k=d.data;return b.return(k)})};xi.prototype.listPeers=function(a){a=void 0===a?!1:a;var d=this,k,b,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return k=d,b=k._peersCached,e=Date.now(),!a&&b&&1E3>e-b.timestamp?u.return(d._peersCached.sessions):d.isOnline()?u.yield(d.sendToAndWait(d.trackerId,"getClients",{}),2):u.return([]);l=u.yieldResult;p=l.data;
q=p.map(function(w){var y=$jscomp.makeIterator(w);w=y.next().value;var A=y.next().value,C=A.info||{};y=C.userRealm;var D=C.userToken,L=C.l2lUserToken,I=C.location,S=C.type;C=C.world;w=Object.assign({},Qf.obj.dissoc(A,["info"]),{id:w,world:C,location:I,type:S});(D=D||L)&&"null"!==D&&(lively.user?w.user=lively.user.ClientUser.fromToken(D,y):(w.userToken=D,w.userRealm=y));return w});d._peersCached={timestamp:e,sessions:q};return u.return(q)})};xi.prototype.toString=function(){var a=this.origin,d=this.path,
k=this.namespace,b=this.id,e=this.isOnline()?this.isRegistered()?"registered":"unregistered":"disconnected";return"L2LClient("+(b||"").slice(0,5)+" "+a+d+" - "+k+" "+e+")"};$jscomp.global.Object.defineProperties(xi.prototype,{socket:{configurable:!0,enumerable:!0,get:function(){return this._socketioClient}},socketId:{configurable:!0,enumerable:!0,get:function(){return this.socket?this.socket.id:null}}});$jscomp.global.Object.defineProperties(xi,{clients:{configurable:!0,enumerable:!0,get:function(){return this._clients||
(this._clients=new Map)}}});Qf.L2LClient=xi;Qf.default=xi;var c6=Object.freeze({__proto__:null,"default":xi});Ia("bS",c6);var ev=lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");ev.promise=Uf;ev.events=tu;var Tm=function(){this._stderr=this._stdout="";this.exitCode=void 0;this.commandString="";this.process=null;this._whenDone=ev.promise.deferred();this._whenStarted=ev.promise.deferred();this.startTime=0;this.lastSignal=null;ev.events.makeEmitter(this)};Tm.findCommand=function(a){return this.commands.find(function(d){return d.pid===
a})};Tm.prototype.isRunning=function(){return this.process&&void 0===this.exitCode};Tm.prototype.isDone=function(){return void 0!=this.exitCode};Tm.prototype.whenStarted=function(){return this._whenStarted.promise};Tm.prototype.whenDone=function(){return this._whenDone.promise};Tm.prototype.spawn=function(a){throw Error("not yet implemented");};Tm.prototype.kill=function(a){this.lastSignal=void 0===a?"KILL":a};Tm.prototype.toString=function(){return this.constructor.name+"("+this.commandString+", "+
this.status+")"};$jscomp.global.Object.defineProperties(Tm.prototype,{isShellCommand:{configurable:!0,enumerable:!0,get:function(){return!0}},status:{configurable:!0,enumerable:!0,get:function(){return this.process?void 0===this.exitCode?"running, pid "+this.pid:"exited "+this.exitCode+", pid "+this.pid:"not started"}},pid:{configurable:!0,enumerable:!0,get:function(){return this.process?this.process.pid:null}},output:{configurable:!0,enumerable:!0,get:function(){return this.stdout+(this.stderr?"\n"+
this.stderr:"")}},stdout:{configurable:!0,enumerable:!0,get:function(){return this._stdout}},stderr:{configurable:!0,enumerable:!0,get:function(){return this._stderr}}});$jscomp.global.Object.defineProperties(Tm,{commands:{configurable:!0,enumerable:!0,get:function(){return this._commands||(this._commands=[])}}});ev.CommandInterface=Tm;ev.default=Tm;var Hf=lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");Hf.runCommand=qu;Hf.defaultDirectory=pA;Hf.env=qA;Hf.readFile=DG;Hf.writeFile=
EG;Hf.CommandInterface=Tm;Hf.promise=Uf;Hf.arr=Ne;Hf.obj=ff;Hf.signal=Ak;Hf.debug=!1;Hf.runCommand=qu;Hf.runCommand=qu;Hf.dirCache={};Hf.defaultDirectory=pA;Hf.defaultDirectory=pA;Hf.env=qA;Hf.env=qA;Hf.readFile=DG;Hf.readFile=DG;Hf.writeFile=EG;Hf.writeFile=EG;var Nn=function(a){var d=Hf.CommandInterface.call(this)||this;d.debug=Hf.debug;d.l2lClient=a;return d};$jscomp.inherits(Nn,Hf.CommandInterface);Nn.installLively2LivelyServices=function(a){Object.keys(Hf.L2LServices).forEach(function(d){return a.addService(d,
function(k,b,e){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(Hf.L2LServices[d](k,b,e))})})})};Nn.prototype.envForCommand=function(a){var d=this.l2lClient,k=d.id,b=d.origin,e=d.path;d=d.namespace;var l=a||{};a=l.env;l=l.owner;a=a||{};l&&(a.LIVELY_COMMAND_OWNER=l);return Object.assign({ASKPASS_SESSIONID:k,L2L_EDITOR_SESSIONID:k,L2L_SESSIONTRACKER_SERVER:b,L2L_SESSIONTRACKER_PATH:e,L2L_SESSIONTRACKER_NS:d},a)};Nn.prototype.spawn=function(a){a=void 0===a?{command:null,
env:{},cwd:null,stdin:null}:a;var d=this,k,b,e,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return k=d,b=k.l2lClient,e=a,l=e.command,p=e.env,q=e.cwd,u=e.stdin,d.startTime=new Date,p=d.envForCommand(a),d.debug&&console.log(d+" spawning "+l),d.debug&&d.whenStarted().then(function(){return console.log(d+" started")}),d.debug&&d.whenDone().then(function(){return console.log(d+" exited")}),Hf.arr.pushIfNotIncluded(d.constructor.commands,d),d.commandString=
Array.isArray(l)?l.join(""):l,D.yield(b.sendToAndWait(b.trackerId,"lively.shell.spawn",{command:l,env:p,cwd:q,stdin:u},{ackTimeout:3E4}),2);w=D.yieldResult;y=w.data;A=y.error;C=y.pid;if(A)throw Hf.debug&&console.error("["+d+"] error at start: "+A),d.process={error:A},d.exitCode=1,Hf.signal(d,"error",A),Error(A);d.process={pid:C};Hf.debug&&console.log("["+d+"] got pid "+C);Hf.signal(d,"pid",C);d._whenStarted.resolve();return D.return(d)})};Nn.prototype.writeToStdin=function(a){var d=this,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(!d.isRunning())return l.return();
k=d;b=k.l2lClient;e=k.pid;return l.yield(b.sendToAndWait(b.trackerId,"lively.shell.writeToStdin",{pid:e,stdin:String(a)}),0)})};Nn.prototype.kill=function(a){a=void 0===a?"KILL":a;var d=this,k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){if(!d.isRunning())return w.return();Hf.debug&&console.log(d+" signaling "+a);d.lastSignal=a;k=d;b=k.pid;e=k.l2lClient;return w.yield(e.sendToAndWait(e.trackerId,"lively.shell.kill",{pid:b}),2)}l=w.yieldResult;p=l.data;
q=p.status;u=p.error;Hf.debug&&console.log(d+" kill send: "+(u||q));if(u)throw Error(u);return w.return(d.whenDone())})};Nn.prototype.onOutput=function(a){var d=a.stdout;a=a.stderr;d&&(this._stdout+=d,Hf.signal(this,"stdout",d),this.emit("stdout",d));a&&(this._stderr+=a,Hf.signal(this,"stderr",a),this.emit("stderr",a))};Nn.prototype.onClose=function(a){Hf.arr.remove(this.constructor.commands,this);this.exitCode=a;this.emit("close",a);Hf.signal(this,"close",a);this._whenDone.resolve(this)};Nn.prototype.onError=
function(a){Hf.arr.remove(this.constructor.commands,this);this._stderr+=a.stack;this.exitCode=1;this.emit("error",a.stack);Hf.signal(this,"error",a.stack);this._whenDone.reject(a)};Hf.ClientCommand=Nn;Hf.L2LServices={"lively.shell.onOutput":function(a,d,k,b){a=d.data;var e=a.pid,l=a.stdout,p=a.stderr,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return Hf.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command "+e),u.setCatchFinallyBlocks(2),
u.yield(Hf.promise.waitFor(1E3,function(){return Hf.ClientCommand.findCommand(e)}),4);case 4:q=u.yieldResult;u.leaveTryBlock(3);break;case 2:return u.enterCatchBlock(),console.warn("[lively.shell] received output for command "+e+" but it isn't registered!'"),u.return();case 3:q.onOutput({stdout:l,stderr:p}),u.jumpToEnd()}})},"lively.shell.onExit":function(a,d,k,b){a=d.data;var e=a.pid,l=a.code,p=a.error,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return Hf.debug&&
console.log("[lively.shell] client received lively.shell.onExit for command "+e),u.setCatchFinallyBlocks(2),u.yield(Hf.promise.waitFor(1E3,function(){return Hf.ClientCommand.findCommand(e)}),4);case 4:q=u.yieldResult;u.leaveTryBlock(3);break;case 2:return u.enterCatchBlock(),console.warn("[lively.shell] received exit message for command "+e+" but it isn't registered!'"),u.return();case 3:if(p)"string"===typeof p&&(p=Error(p)),q.onError(p);else q.onClose(l);u.jumpToEnd()}})}};Hf.default=Nn;var Zna=
Object.freeze({__proto__:null,runCommand:qu,defaultDirectory:pA,env:qA,readFile:DG,writeFile:EG,"default":Nn}),zh=lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");zh.runCommand=FG;zh.defaultDirectory=rA;zh.env=uO;zh.readFile=function(a,d){d=(d=void 0===d?{}:d)||{};var k=zh.runCommand('cat "'+a+'"',d);return k.whenDone().then(function(){return k.output})};zh.writeFile=function(a,d,k){"string"===typeof d&&(d={content:d});d=d||{};d.content=d.content||"";"win32"!==this.PLATFORM&&
(a='"'+a+'"');a=this.run("tee "+a,{stdin:d.content,cwd:d.cwd});d.onEnd&&lively.bindings.connect(a,"end",d,"onEnd");k&&lively.bindings.connect(a,"end",{thenDo:k},"thenDo");return a};zh.parseCommand=vO;zh.doGrep=wO;zh.L2LClient=xi;zh._runCommand=qu;zh._env=qA;zh._defaultDirectory=pA;zh.string=Bg;zh.defaultConnection={url:document.location.origin+"/lively-socket.io",namespace:"l2l"};zh.runCommand=FG;zh.runCommand=FG;zh.defaultDirectory=rA;zh.defaultDirectory=rA;zh.env=uO;zh.env=uO;zh.parseCommand=vO;
zh.parseCommand=vO;zh.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");zh.doGrep=wO;zh.doGrep=wO;var mh=lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");mh.fileInfo=GG;mh.fileInfoCommandString=function(a,d){var k=d=void 0===d?{}:d;d=k.rootDirectory;k=k.platform;d=d||".";var b="win32"===k?"\\":"/";"win32"===k||d.endsWith(b)||(d+=b);return"win32"===k?"cd "+d+' && ls -lLd --time-style=locale "'+a+'"':'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && env TZ=GMT LANG=en_US.UTF-8 cd '+
(d+' && ls -lLd "$timeformat" "'+a+'"')};mh.parseDirectoryListFromLs=xO;mh.findFiles=HG;mh.findFilesCommandString=function(a,d){var k=d=void 0===d?{}:d,b=k.rootDirectory,e=k.exclude,l=k.depth;k=k.platform;b=b||".";e=e||"-iname "+mh.defaultExcludes.map(mh.string.print).join(" -o -iname ");var p="win32"===k?"\\":"/";"win32"===k||b.endsWith(p)||(b+=p);a=mh.string.format('%s "%s"',d.re?"-iregex":d.matchPath?"-ipath":"-iname",a);l="number"===typeof l?" -maxdepth "+l:"";return"win32"===k?mh.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",
b,d.re?"-E ":"",e.replace(/"/g,""),a.replace(/"/g,""),l):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+mh.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',b,d.re?"-E ":"",e,a,l)};mh.convertDirectoryUploadEntriesToFileInfos=yO;mh.runCommand=qu;mh.string=Bg;mh.promise=Uf;mh.arr=Ne;mh.fileInfo=GG;mh.fileInfo=GG;mh.parseDirectoryListFromLs=
xO;mh.parseDirectoryListFromLs=xO;var vJ=function(a){this.rootDirectory=a;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null};vJ.prototype.readFromDirectoryListLine=function(a){var d=this;if(!a.trim().length)return null;var k=a;this.reader.forEach(function(b){return k=b(k,d)});return this};vJ.prototype.toString=function(){return this.path};$jscomp.global.Object.defineProperties(vJ.prototype,
{reader:{configurable:!0,enumerable:!0,get:function(){return[function(a,d){var k=a.indexOf(" ");d.mode=a.slice(0,k);d.isDirectory="d"===d.mode[0];return a.slice(k+1).trim()},function(a,d){var k=a.indexOf(" ");d.linkCount=Number(a.slice(0,k));return a.slice(k+1).trim()},function(a,d){var k=a.indexOf(" ");d.user=a.slice(0,k);return a.slice(k+1).trim()},function(a,d){var k=mh.string.peekRight(a,0,/\s+[0-9]/);d.group=a.slice(0,k).trim();return a.slice(k).trim()},function(a,d){var k=a.indexOf(" ");d.size=
Number(a.slice(0,k));return a.slice(k+1).trim()},function(a,d){var k=mh.string.reMatches(a,/[^s]+\s+[0-9:\s]+/);if(!k||!k[0])return a;d.lastModified=new Date(k[0].match+" GMT");return a.slice(k[0].end).trim()},function(a,d){var k=(a=a.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&a.split(" -> "),b=""===a?!1:a&&2===k.length,e=(k=b?k[0]:a)&&0===k.indexOf(d.rootDirectory)?k.slice(d.rootDirectory.length):k;d.fileName=""===a?".":e;d.path=k;d.isLink=b;return e}]}}});mh.FileInfo=vJ;mh.findFilesProcesses=
{};mh.findFiles=HG;mh.findFiles=HG;mh.defaultExcludes=[".svn",".git","node_modules",".module_cache"];mh.convertDirectoryUploadEntriesToFileInfos=yO;mh.convertDirectoryUploadEntriesToFileInfos=yO;var fi=lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");fi.Resource=Ef;fi.runCommand=qu;fi.fileInfo=GG;fi.findFiles=HG;fi.string=Bg;fi.promise=Uf;fi.arr=Ne;fi.obj=ff;var xl=function(a,d,k){k=void 0===k?{}:k;a=fi.Resource.call(this,a)||this;a.options=Object.assign({},k,{l2lClient:d||a.constructor.defaultL2lClient});
return a};$jscomp.inherits(xl,fi.Resource);xl.prototype.newResource=function(a){return new this.constructor(a,this.options.l2lClient,this.options)};xl.prototype.read=function(){var a=this,d=fi.runCommand('cat "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Read "+a.url+" failed: "+d.stderr);return d.output})};xl.prototype.write=function(a){var d=this,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return a?
e.yield(fi.runCommand('touch "'+d.url+'" && tee "'+d.url+'"',Object.assign({stdin:String(a)},d.options)).whenDone(),4):e.yield(fi.runCommand('echo -n > "'+d.url+'"',Object.assign({},d.options)).whenDone(),5);case 4:k=e.yieldResult;e.jumpTo(3);break;case 5:k=e.yieldResult;case 3:b=k;if(b.exitCode)throw Error("Write "+d.url+" failed: "+b.stderr);return e.return(d)}})};xl.prototype.mkdir=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(fi.runCommand('mkdir -p "'+
a.url+'"',a.options).whenDone(),2);d=k.yieldResult;if(d.exitCode)throw Error(a+" cannot create directory: "+d.stderr);return k.return(a)})};xl.prototype.exists=function(){var a=fi.runCommand('test -d "'+this.url+'" || test -f "'+this.url+'"',this.options);return a.whenDone().then(function(){return 0===a.exitCode})};xl.prototype.remove=function(){var a=this,d=fi.runCommand('rm -rf "'+this.url+'"',this.options);return d.whenDone().then(function(){if(d.exitCode)throw Error("Remove of "+a.url+" failed: "+
d.stderr);return a})};xl.prototype.gzip=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=fi.runCommand('gzip > "'+d.url+'"',Object.assign({stdin:String(a)},d.options));return b.return(k.whenDone().then(function(){if(k.exitCode)throw Error("Gzip compression of "+d.url+" failed: "+k.stderr);return d}))})};xl.prototype.brotli=function(a){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=fi.runCommand('brotli > "'+d.url+'"',Object.assign({stdin:String(a)},
d.options));return b.return(k.whenDone().then(function(){if(k.exitCode)throw Error("Brotli compression of "+d.url+" failed: "+k.stderr);return d}))})};xl.prototype.readProperties=function(){var a=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(fi.fileInfo(a.url,a.options),2);d=k.yieldResult;a.assignProperties(fi.obj.dissoc(d,["fileName","path","rootDirectory"]));return k.return(a)})};xl.prototype.dirList=function(a,d){a=void 0===a?1:a;d=void 0===
d?{}:d;var k=this,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return b=d,e=b.exclude,Array.isArray(e)&&(e="-iname "+e.map(fi.string.print).join(" -o -iname ")),l=k,p=l.url,q=l.options,u=q.l2lClient,y.yield(fi.findFiles("*",{exclude:e,depth:a,rootDirectory:p,l2lClient:u}),2);w=y.yieldResult;w[0].path.replace(/\/$/,"")===k.url.replace(/\/$/,"")&&w.shift();return y.return(w.map(function(A){var C=A.path;A.isDirectory&&(C=C.replace(/\/?$/,"/"));C=new k.constructor(C,
u,k.options);C.assignProperties(fi.obj.dissoc(A,["fileName","path","rootDirectory"]));return C}))})};$jscomp.global.Object.defineProperties(xl,{defaultL2lClient:{configurable:!0,enumerable:!0,get:function(){return this._defaultL2lClient||fi._defaultL2LClient},set:function(a){this._defaultL2lClient=fi._defaultL2LClient=a}}});fi.ShellClientResource=xl;fi._defaultL2LClient=fi._defaultL2LClient||void 0;var wJ={name:"shell-client",matches:function(a){return a.startsWith("/")||a.match(/[a-z]:\\/i)},resourceClass:fi.ShellClientResource};
fi.resourceExtension=wJ;fi.resourceExtension=wJ;fi.resourceExtension=wJ;fi.default=xl;var $na=Object.freeze({__proto__:null,"default":xl,resourceExtension:wJ}),Ve=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");Ve.loadWorldFromURL=IG;Ve.loadWorldFromCommit=JG;Ve.loadWorldFromDB=KG;Ve.loadWorld=LG;Ve.loadLocalConfig=function(){var a,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return a=lively.modules.module("localconfig.js"),k.setCatchFinallyBlocks(2),
k.yield(Ve.resource(a.id).exists(),4);case 4:if(!k.yieldResult){k.jumpTo(5);break}return k.yield(a.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:k.leaveTryBlock(0);break;case 2:d=k.enterCatchBlock(),console.error("Error loading localconfig:",d),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+d),k.jumpToEnd()}})};Ve.setupLivelyShell=function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.yield(lively.modules.importPackage("lively.shell"),
2);case 2:return q.yield(System.import("lively.shell/client-command.js"),3);case 3:return d=q.yieldResult,k=d.default,q.yield(System.import("lively.shell/client-resource.js"),4);case 4:b=q.yieldResult,e=b.resourceExtension,l=a,p=l.l2lClient,k.installLively2LivelyServices(p),e.resourceClass.defaultL2lClient=p,Ve.registerResourceExension(e),console.log("[lively] lively.shell setup"),q.jumpToEnd()}})};Ve.setupLively2Lively=function(a){var d,k,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return d=
a.getCurrentUser(),k={world:a.name},d&&(k.userToken=d.token,k.userRealm=d.realm),p.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return p.yield(System.import("lively.2lively/client.js"),3);case 3:return b=p.yieldResult,e=b.default,p.yield(e.forLivelyInBrowser(k),4);case 4:return l=p.yieldResult,console.log("[lively] lively2lively client created "+l),l._onUserChange?Ve.reportWorldLoad(a,d):(l._onUserChange=function(q){l.isOnline()&&q.user&&(q=q.user,l.info=Object.assign({},l.info,
{userToken:q.token,userRealm:q.realm}),l.unregister().then(function(){return l.register()}).then(function(){return console.log("re-registered after user change")}))},Ve.subscribe("lively.user/userchanged",l._onUserChange,System),l.once("registered",function(){Ve.reportWorldLoad(a,d)}),l.on("registered",function(){var q=a.get("user flap");q&&q.updateNetworkIndicator(l)}),l.on("connected",function(){var q=a.get("user flap");q&&q.updateNetworkIndicator(l)}),l.on("reconnecting",function(){var q=a.get("user flap");
q&&q.updateNetworkIndicator(l)}),l.on("disconnected",function(){var q=a.get("user flap");q&&q.updateNetworkIndicator(l)})),p.return(l)}})};Ve.interactivelySaveWorld=kx;Ve.reportWorldLoad=function(a,d){d=d?d.name+" ("+(d.token||"").slice(0,5)+")":"---";fetch(Ve.joinPath(System.baseURL,"/report-world-load"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:d+" logged in at "+a.name+" ["+window._livelyLoadId+"]"})}).catch(function(k){return console.warn("report-world-load failed: "+
k)})};Ve.resource=sc;Ve.registerResourceExension=Fd;Ve.Color=qf;Ve.Path=Sg;Ve.obj=ff;Ve.date=tp;Ve.promise=Uf;Ve.MorphicEnv=tn;Ve.createMorphSnapshot=pu;Ve.MorphicDB=Lp;Ve.ensureCommitInfo=aA;Ve.pathForBrowserHistory=nw;Ve.subscribe=Uy;Ve.emit=bq;Ve.defaultDirectory=rA;Ve.ShellClientResource=xl;Ve.joinPath=Jd;Ve.reset=rF;Ve.loadWorldFromURL=IG;Ve.loadWorldFromURL=IG;Ve.loadWorldFromCommit=JG;Ve.loadWorldFromCommit=JG;Ve.loadWorldFromDB=KG;Ve.loadWorldFromDB=KG;Ve.loadWorld=LG;Ve.loadWorld=LG;Ve.interactivelySaveWorld=
kx;Ve.interactivelySaveWorld=kx;var pi=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");pi.jwtTokenDecode=function(a){a=$jscomp.makeIterator(a.split("."));a.next();var d=a.next().value;a.next();return JSON.parse(atob(d))};pi.guid=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};pi.makeRequest=function(a,d,k,b){b=void 0===b?{}:b;d={method:void 0===d?"GET":d,mode:"cors"};k&&(d.body=
k);d.redirect="follow";d.headers=Object.assign({},b);return fetch(a,d)};pi.POST=function(a,d){var k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),l.yield(pi.makeRequest(a,"POST",d,{}),2);case 2:return k=l.yieldResult,l.setCatchFinallyBlocks(3),l.yield(k.text(),5);case 5:b=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(b&&"application/json"===k.headers.get("content-type"))try{e=
JSON.parse(b)}catch(p){}if(!e)throw Error("Unexpected response: "+b);return l.return(e)}})};pi.resource=sc;var fv=Ia("k",function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),k=d.hasOwnProperty("User")&&"function"===typeof d.User?d.User:d.User=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.realm=e;this.name=
b;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(b,e,l){var p=this,q,u,w,y,A,C,D,L,I,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){if(1==V.nextAddress)return q=p,u=q.email,w=q.createdAt,y=q.roles,A=q.name,C="register"===b?{password:e,email:u,createdAt:w,roles:y,name:A}:{password:e,name:A},V.yield(pi.POST(l+"/"+b,C),2);D=V.yieldResult;if(D.error)return V.return(D);L=D;I=L.token;
S=pi.jwtTokenDecode(I);y=S.roles;w=S.createdAt;u=S.email;Object.assign(p,{roles:y,createdAt:w,email:u,token:I});return V.return({status:D.status})})}},{key:"verify",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(pi.POST(b.realm+"/verify",{token:b.token}),2);e=p.yieldResult;l=e.error;return p.return(!l)})}},{key:"login",value:function(b){return this.loginOrRegister("login",b,this.realm)}},{key:"register",value:function(b){return this.loginOrRegister("register",
b,this.realm)}},{key:"checkPassword",value:function(b){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!e.isLoggedIn)throw Error("To check password, user needs to login.");return u.yield(pi.POST(e.realm+"/check-password",{token:e.token,password:b}),2)}l=u.yieldResult;p=l.error;q=l.status;if(p)throw Error(p);return u.return(q)})}},{key:"modify",value:function(b){var e=this,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==
D.nextAddress)return D.yield(pi.POST(e.realm+"/modify",{token:e.token,changes:b}),2);l=D.yieldResult;p=l.error;q=l.status;u=l.token;if(p)return D.return({error:p});u&&(w=pi.jwtTokenDecode(u),y=w.roles,A=w.createdAt,C=w.email,Object.assign(e,{roles:y,createdAt:A,email:C,token:u}));return D.return({status:q})})}},{key:"getDir",value:function(){return pi.resource(System.baseURL).join("users").join(this.name)}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?
"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return pi.guestUser}},{key:"named",value:function(b,e){var l=b+"-"+e,p=pi.userMap.get(l);p||(p=new this(b,e),pi.userMap.set(l,p));return p}},{key:"fromToken",value:function(b,e){var l=pi.jwtTokenDecode(b),p=l.roles,q=l.createdAt,u=l.email;return Object.assign(this.named(l.name,e),{roles:p,createdAt:q,email:u,token:b})}},{key:"clearCache",value:function(){pi.userMap=new Map}}],
d,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1106,end:3681})}(void 0));pi.User=fv;pi.User=fv;pi.User=fv;var gv=function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),k=d.hasOwnProperty("GuestUser")&&"function"===typeof d.GuestUser?d.GuestUser:d.GuestUser=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(b,e,l){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){throw Error("Guest user cannot "+b+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],d,{pathInPackage:function(){return"client/user.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3690,end:3918})}(pi.User);pi.GuestUser=gv;pi.GuestUser=gv;pi.GuestUser=gv;pi.userMap=pi.userMap||new Map;pi.guestUser=pi.guestUser||pi.GuestUser.named("guest-"+pi.guid(),null);var Ko=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");Ko.User=fv;Ko.GuestUser=gv;Ko.emit=
bq;var NR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),k=d.hasOwnProperty("UserRegistry")&&"function"===typeof d.UserRegistry?d.UserRegistry:d.UserRegistry=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"isTrackingGuestUsers",get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(b){return!1}}},
{key:"login",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return b.isGuestUser?u.jumpTo(2):u.yield(b.login(e),3);if(2!=u.nextAddress&&(p=u.yieldResult,q=p.error))throw Error(q);l.saveUserToLocalStorage(b);return u.return(b)})}},{key:"logout",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){try{e.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(p){}b=
b&&b.isGuestUser?b:Ko.User.guest;Ko.emit("lively.user/userchanged",{user:b},Date.now(),System);return l.return(b)})}},{key:"register",value:function(b,e){var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!b||b.isGuestUser)throw Error("guest users cannot register");return u.yield(b.register(e),2)}p=u.yieldResult;if(q=p.error)throw Error(q);l.saveUserToLocalStorage(b);return u.return(b)})}},{key:"loadUserFromLocalStorage",value:function(b){try{var e=
localStorage["lively.user"]||sessionStorage["lively.user"];if(e)return e=JSON.parse(e),e.isGuest?Ko.GuestUser.named(e.name,null):Ko.User.fromToken(e.token,b)}catch(l){console.warn("Could not read user from localStorage: "+l)}return this.isTrackingGuestUsers?!1:Ko.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(b){if(!b||!b.isGuestUser&&!b.token)return!1;Ko.emit("lively.user/userchanged",{user:b},Date.now(),System);try{return b.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=
JSON.stringify({isGuest:!0,name:b.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=b.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:b.name}):JSON.stringify({token:b.token}),!0}catch(e){return console.warn("Could not save user into local/sessionStorage: "+e),!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],d,{pathInPackage:function(){return"client/user-registry.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);NR=Ko.UserRegistry;var xJ=Ia("U",NR);Ko.default=NR;var ay=lively.FreezerRuntime.recorderFor("lively.user/index.js");ay.User=fv;ay.ClientUser=fv;ay.GuestUser=gv;ay.GuestUser=gv;ay.default=xJ;ay.UserRegistry=xJ;var aoa=Object.freeze({__proto__:null,ClientUser:fv,GuestUser:gv,
UserRegistry:xJ}),kf=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");kf.bowser=Cn;kf.Rectangle=Qd;kf.Color=qf;kf.pt=kh;kf.arr=Ne;kf.promise=Uf;kf.Path=Sg;kf.obj=ff;kf.signal=Ak;kf.config=rk;kf.MorphicEnv=tn;kf.Morph=Vi;kf.TooltipViewer=$x;kf.Tooltip=cv;kf.loadWorldFromURL=IG;kf.loadWorldFromDB=KG;kf.loadWorldFromCommit=JG;kf.loadWorld=LG;kf.touchInputDevice=Ol;kf.UserRegistry=xJ;kf.emit=bq;kf.resource=sc;kf.loadMorphFromSnapshot=mp;var Bq=Ia("ah",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),
k=d.hasOwnProperty("World")&&"function"===typeof d.World?d.World:d.World=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this._renderer=null;this._tooltipViewer=new kf.TooltipViewer(this)}},{key:"__deserialize__",value:function(b,e,l,p){Sb._get(Object.getPrototypeOf(k.prototype),
"__deserialize__",this).call(this,b,e,l,p);this._renderer=null;this._tooltipViewer=new kf.TooltipViewer(this)}},{key:"__additionally_serialize__",value:function(b,e,l,p){Sb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);if(b.props.submorphs)for(b=b.props.submorphs.value,e=b.length;e--;)l.refForId(b[e].id).realObj.isHand&&kf.arr.removeAt(b,e)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(Sb._get(Object.getPrototypeOf(k.prototype),
"commands",this)),[{name:"resize to fit window",exec:function(b){var e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:e=function(){b.extent=lively.FreezerRuntime?b.windowBounds().extent():b.windowBounds().union(b.submorphBounds(function(w){return!w.isEpiMorph&&!w.hasFixedPosition})).extent()},l=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(b.whenRendered(),2);delete b._cachedWindowBounds;
return w.return(!b.windowBounds().extent().equals(b.extent))})},p=0;case 2:if(!(q=5>p)){u.jumpTo(4);break}return u.yield(l(),5);case 5:q=u.yieldResult;case 4:if(!q){u.jumpTo(3);break}p++;e();u.jumpTo(2);break;case 3:return b.relayout(),u.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.return(!0)})}},{key:"render",value:function(b){return b.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},
{key:"grabbable",set:function(b){}},{key:"existingHandForPointerId",value:function(b){return this.submorphs.find(function(e){return e instanceof kf.Hand&&e.pointerId===b})}},{key:"layoutHaloForPointerId",value:function(b){}},{key:"haloForPointerId",value:function(b){}},{key:"handForPointerId",value:function(b,e){e=void 0===e?!1:e;var l=this.existingHandForPointerId(b);return l?l:!l&&this.firstHand&&e?(this.firstHand.pointerId=b,this.firstHand):this.addMorph(new kf.Hand(b),this.submorphs[0])}},{key:"removeHandForPointerId",
value:function(b){(b=this.existingHandForPointerId(b))&&1<this.hands.length&&b.remove()}},{key:"world",value:function(){return this}},{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var b=this.env.renderer;b&&b.renderLater()}}},{key:"hands",get:function(){return kf.arr.sortBy(this.submorphs.filter(function(b){return b.isHand}),function(b){return b.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return kf.UserRegistry.current.loadUserFromLocalStorage(window.AUTH_SERVER_URL||
kf.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var b=this.env.eventDispatcher;return(b=b&&b.eventState.focusedMorph)&&b.world()===this?b:this}},{key:"onMouseMove",value:function(b){b.hand&&b.hand.update(b);this._tooltipViewer.mouseMove(b)}},{key:"onHoverOut",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);if(b.state.draggedMorph){var e=b.state;e.dragDelta=(e.draggedMorph.owner||this).getInverseTransform().transformDirection(b.position.subPt(e.lastDragPosition));
e.absDragDelta=b.position.subPt(e.clickedOnPosition);b.onAfterDispatch(function(){return e.lastDragPosition=b.position});b.state.draggedMorph.onDrag(b)}}},{key:"onMouseDown",value:function(b){b.state.menu&&b.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(b)}},{key:"onMouseUp",value:function(b){b.isCommandKey()&&b.stop();if(b.isAltDown()&&kf.config.altClickDefinesThat){var e=this.morphsContainingPoint(b.position)[0];setTimeout(function(){return System.global.that=e},100);e.show();
b.stop();console.log('Set global "that" to '+e)}}},{key:"onMouseWheel",value:function(b){b.isShiftDown()&&(window.scrollBy(-b.domEvt.wheelDeltaX,-b.domEvt.wheelDeltaY),b.stop())}},{key:"onBeforeUnload",value:function(b){return this.onUnload(b)}},{key:"onUnload",value:function(b){this.submorphs.forEach(function(e){if("function"===typeof e.onWorldUnload)e.onWorldUnload(b)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(b){if(b.respondsToVisibleWindow){if("function"!==
typeof b.relayout)return b.showError(Error(b+" listed as responding to visible window change, but has no relayout instruction"));b.relayout()}})}},{key:"onWindowScroll",value:function(){var b=this.env.eventDispatcher.keyInputHelper.inputState,e=b.positionChangedTime,l=b.scrollLeftWhenChanged;b=b.scrollTopWhenChanged;var p=document.documentElement;500>Date.now()-e&&!kf.bowser.firefox?(p.scrollLeft=l,p.scrollTop=b):(this.setProperty("scroll",kf.pt(p.scrollLeft,p.scrollTop)),this._cachedWindowBounds=
null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(b){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(e.whenRendered(),2);if(3!=u.nextAddress)return e._cachedWindowBounds=null,"elastic"!==e.resizePolicy?u.jumpTo(3):u.yield(e.execCommand("resize to fit window"),3);e.updateVisibleWindowMorphs();l=$jscomp.makeIterator(e.submorphs);for(p=l.next();!p.done;p=l.next())if(q=p.value,"function"===typeof q.onWorldResize)q.onWorldResize(b);
u.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(b){if(!b)return null;var e=this.focusedMorph,l=kf.arr.findAndGet(kf.arr.without([e].concat($jscomp.arrayFromIterable(e.ownerChain())),this),function(p){return kf.arr.findAndGet(p.keyhandlers,function(q){return(q=q.eventCommandLookup(p,b))?{command:q,morph:p}:null})})||{};e=l.command;l=l.morph;return e?l.execCommand(e):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):
this.innerBounds()}},{key:"visibleBoundsExcludingTopBar",value:function(){return this.visibleBounds()}},{key:"windowBounds",value:function(b){if(this._cachedWindowBounds)return this._cachedWindowBounds;b=this.env.domEnv.window;var e=1/this.scale;return this._cachedWindowBounds=new kf.Rectangle(b.scrollX*e,b.scrollY*e,(b.innerWidth||this.width)*e,(b.innerHeight||this.height)*e)}},{key:"logError",value:function(b){console.log(b)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(b){return[]}},
{key:"serveFileAsDownload",value:function(b,e){var l=void 0===e?{}:e;e=void 0===l.fileName?"file.txt":l.fileName;l=void 0===l.type?"text/plain":l.type;var p=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i,q=b instanceof Blob,u=window.document.createElement("a");u.href=kf.obj.isString(b)&&b.match(p)?b:window.URL.createObjectURL(q?b:new Blob([b],{type:l}));u.download=e;document.body.appendChild(u);u.click();document.body.removeChild(u)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(b){this.setProperty("resizePolicy",b);this.clipMode="static"===b?"visible":"hidden";"elastic"==b&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?
"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(b){var e=this,l=kf.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof l&&(b=l);this.setProperty("showsUserFlap",b);System.import("lively.user/morphic/user-ui.js").then(function(p){return p.UserUI[b?"showUserFlap":"hideUserFlap"](e).then(function(){b&&(e.enableComments=!0)})})}},enableComments:{defaultValue:!0,set:function(b){this.setProperty("enableComments",b);b&&System.import("lively.collab").then(function(e){return e.CommentBrowser.initializeCommentBrowser()})}}}}},
{key:"defaultWorld",value:function(){return kf.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;return kf.loadWorldFromURL(b,e,l)}},{key:"loadWorld",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;return kf.loadWorld(b,e,l)}},{key:"loadFromCommit",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;return kf.loadWorldFromCommit(b,e,l)}},{key:"loadFromDB",value:function(b,
e,l,p){l=void 0===l?this.defaultWorld():l;p=void 0===p?{}:p;return kf.loadWorldFromDB(b,e,l,p)}},{key:"loadFromResource",value:function(b,e,l){e=void 0===e?this.defaultWorld():e;l=void 0===l?{}:l;var p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return p=kf,q=p.loadWorld,u=kf,w=u.loadMorphFromSnapshot,y.yield(b.readJson(),4);case 4:return y.yield(w.call(u,y.yieldResult),3);case 3:return y.yield(q.call(p,y.yieldResult,e,l),2);case 2:return y.return(y.yieldResult)}})}}],
d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:774,end:12867})}(kf.Morph));kf.World=Bq;kf.World=Bq;kf.World=Bq;var by=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),k=d.hasOwnProperty("Hand")&&"function"===typeof d.Hand?d.Hand:d.Hand=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:b})}},{key:"__deserialize__",value:function(b,e,l,p){Sb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"carriesMorphs",
value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(b,e){return e}},{key:"update",value:function(b){this.position=b.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(b,e){b=void 0===b?!0:b;var l=this,p,q,u,w,y,A,C,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(!l.grabbedMorphs.length)return I.return();l.env.eventDispatcher.cancelGrab(l,e);p=[];q=$jscomp.makeIterator(l.grabbedMorphs);for(u=q.next();!u.done;u=
q.next())w=u.value,y=l._grabbedMorphProperties.get(w)||{},A=y.prevOwner,C=y.prevIndex,D=y.prevPosition,L=y.pointerAndShadow,Object.assign(w,L),A?(A.addMorphAt(w,C),b?p.push(w.animate({position:D})):w.position=D):w.remove();return I.return(p.length?Promise.all(p):null)})}},{key:"grab",value:function(b){var e=this;if(kf.obj.isArray(b))return b.forEach(function(l){return e.grab(l)});this.withMetaDo({metaInteraction:!0},function(){e._grabbedMorphProperties.set(b,{prevOwner:b.owner,prevPosition:b.position,
prevIndex:b.owner?b.owner.submorphs.indexOf(b):-1,pointerAndShadow:kf.obj.select(b,["dropShadow","reactsToPointer"])});b.reactsToPointer=!1;b.dropShadow=!0;e.addMorph(b)});kf.signal(this,"grab",b)}},{key:"dropMorphsOn",value:function(b){var e=this;this.withMetaDo({metaInteraction:!0},function(){e.grabbedMorphs.forEach(function(l){try{var p=(e._grabbedMorphProperties.get(l)||{}).pointerAndShadow;Object.assign(l,p);kf.signal(e,"drop",l);l.onBeingDroppedOn(e,b)}catch(q){console.error(q),e.world().showError("Error dropping "+
l+" onto "+b+":\n"+q.stack),l.owner!==b&&e.world().addMorph(b)}})})}},{key:"findDropTarget",value:function(b,e,l){var p=this;b=void 0===b?this.globalPosition:b;e=void 0===e?this.grabbedMorphs:e;b=this.world().morphsContainingPoint(b);return kf.arr.sortBy(b,function(q){return[q].concat($jscomp.arrayFromIterable(q.ownerChain())).find(function(u){return kf.Path("owner.isWorld").get(u)&&u.hasFixedPosition})?0:1}).find("function"===typeof l?function(q,u){return!p.isAncestorOf(q)&&q.acceptsDrops&&!e.includes(q)&&
e.every(function(w){return w.wantsToBeDroppedOn(q)})&&l(q,u)}:function(q){return!p.isAncestorOf(q)&&q.acceptsDrops&&q.ownerChain().every(function(u){return u.visible})&&e.every(function(u){return u.wantsToBeDroppedOn(q)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:kf.touchInputDevice?kf.Color.transparent:kf.Color.orange},extent:{defaultValue:kf.pt(1,1)},reactsToPointer:{defaultValue:!1},
pointerId:{},isHand:{readOnly:!0,get:function(){return!0}},draggable:{readOnly:!0,get:function(){return!1}},grabbable:{readOnly:!0,get:function(){return!1}},grabbedMorphs:{readOnly:!0,get:function(){return this.submorphs}},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=new WeakMap}}}}}],d,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:12876,end:16942})}(kf.Morph);kf.Hand=by;kf.Hand=by;kf.Hand=by;var boa=Object.freeze({__proto__:null,World:Bq,Hand:by}),oj=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");oj.comparePosition=zO;oj.lessPosition=pp;oj.lessEqPosition=lx;oj.eqPosition=qp;oj.minPosition=mx;oj.maxPosition=nx;oj.comparePosition=zO;oj.comparePosition=zO;oj.lessPosition=pp;oj.lessPosition=pp;oj.lessEqPosition=lx;oj.lessEqPosition=
lx;oj.eqPosition=qp;oj.eqPosition=qp;oj.minPosition=mx;oj.minPosition=mx;oj.maxPosition=nx;oj.maxPosition=nx;var Zf=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");Zf.lessPosition=pp;Zf.lessEqPosition=lx;Zf.eqPosition=qp;Zf.minPosition=mx;Zf.maxPosition=nx;var Ds=Ia("bz",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),k=d.hasOwnProperty("Range")&&"function"===typeof d.Range?d.Range:d.Range=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=b=void 0===b?{start:{row:0,column:0},end:{row:0,column:0}}:b,l=e.start;b=l.row;l=l.column;var p=e.end;e=p.row;p=p.column;if(e<b||e===b&&p<l)l=$jscomp.makeIterator([b,l,e,p]),e=l.next().value,p=l.next().value,b=l.next().value,l=l.next().value;this.start={row:b,column:l};this.end={row:e,column:p}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",
value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(b){return b&&b.start&&b.end?Zf.eqPosition(this.start,b.start)&&Zf.eqPosition(this.end,b.end):!1}},{key:"copy",value:function(){return new Zf.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,end:this.end}}},{key:"merge",value:function(b){b.isRange||(b=new Zf.Range(b));return Zf.lessPosition(this.end,b.start)||Zf.lessPosition(b.end,this.start)?this:Zf.Range.fromPositions(Zf.minPosition(this.start,
b.start),Zf.maxPosition(this.end,b.end))}},{key:"without",value:function(b){b.isRange||(b=new Zf.Range(b));var e=Zf.Range.compare(this,b);return 0===e?Zf.Range.fromPositions(this.start,this.start):5<=Math.abs(e)?this:0>e?Zf.Range.fromPositions(this.start,b.start):Zf.Range.fromPositions(b.end,this.end)}},{key:"intersect",value:function(b){b.isRange||(b=new Zf.Range(b));var e=Zf.Range.compare(this,b),l=0>e?this:b;b=0>e?b:this;switch(Math.abs(e)){case 0:case 1:return new Zf.Range(l);case 2:case 3:return new Zf.Range(b);
case 4:return Zf.Range.fromPositions(b.start,l.end);case 5:return Zf.Range.at(b.start);case 6:return Zf.Range.at(l.end)}}},{key:"subtract",value:function(b){b.isRange||(b=new Zf.Range(b));switch(Zf.Range.compare(this,b)){case -6:case -5:case 5:case 6:return[new Zf.Range(this)];case -1:case 0:case 2:case 3:return[Zf.Range.at(this.start)];case 1:case 4:return[Zf.Range.fromPositions(b.end,this.end)];case -4:case -3:return[Zf.Range.fromPositions(this.start,b.start)];case -2:return[Zf.Range.fromPositions(this.start,
b.start),Zf.Range.fromPositions(b.end,this.end)]}}},{key:"containsPosition",value:function(b){return Zf.lessEqPosition(this.start,b)&&Zf.lessEqPosition(b,this.end)}},{key:"toString",value:function(){var b=this.start,e=this.end;return"Range("+b.row+"/"+b.column+" -> "+e.row+"/"+e.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(b){return b.sort(Zf.Range.compare)}},{key:"compare",value:function(b,e){var l=b.start,p=b.end,q=e.start,u=e.end;
return Zf.lessPosition(l,q)?Zf.lessPosition(p,q)?-6:Zf.eqPosition(p,q)?-5:Zf.lessPosition(p,u)?-4:Zf.eqPosition(p,u)?-3:-2:Zf.eqPosition(l,q)?Zf.eqPosition(p,u)?0:Zf.lessPosition(p,u)?-1:1:-1*Zf.Range.compare(e,b)}},{key:"at",value:function(b){return new this({start:b,end:b})}},{key:"fromPositions",value:function(b,e){return new this({start:b,end:e})}},{key:"create",value:function(b,e,l,p){return new this({start:{row:b,column:e},end:{row:l,column:p}})}},{key:"isValidLiteral",value:function(b){return b?
b.isRange?!0:b.start&&b.end&&"number"===typeof b.start.row&&"number"===typeof b.start.column&&"number"===typeof b.end.row&&"number"===typeof b.end.column:!1}}],d,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5369})}(void 0));Zf.Range=Ds;Zf.Range=Ds;Zf.Range=Ds;var yJ=new Zf.Range;
Zf.defaultRange=yJ;Zf.defaultRange=yJ;Zf.defaultRange=yJ;var yi=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");yi.lessPosition=pp;yi.Range=Ds;yi.defaultRange=yJ;yi.config=rk;yi.string=Bg;yi.arr=Ne;yi.signal=Ak;var zJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),k=d.hasOwnProperty("Selection")&&"function"===typeof d.Selection?d.Selection:d.Selection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.textMorph=b;this.initialize(e)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(b){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var e=yi.string.newUUID();this.startAnchor=this.textMorph.addAnchor("selection-start-"+e);this.endAnchor=this.textMorph.addAnchor("selection-end-"+e);this.range=yi.Range.isValidLiteral(b)?b:yi.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=
null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(b,e){var l=b.start,p=l.row;l=l.column;var q=b.end,u=q.row;q=q.column;var w=e.start,y=w.row;w=w.column;var A=e.end,C=A.row;A=A.column;return p<y||p===y&&l<w?u<y||u===y&&q<w?"separate":u===y&&q===w?y===C&&w===A?"overlapping":"bordering":"overlapping":p===y&&
l===w?u===C&&q===A?"equal":"overlapping":this.compareRangesForMerge(e,b)}},{key:"mergeWith",value:function(b){if(!b||!b.isSelection)return!1;var e=this.compareRangesForMerge(this.range,b.range);if("separate"===e||"bordering"===e)return!1;this.range=this.range.merge(b.range);b.isReverse()!=this.isReverse()&&this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(b){if(b){var e=b,l=e.start;e=e.end;if(void 0!==l&&void 0!==e){var p=this.textMorph.document;
"number"===typeof l&&(b.start=l=p.indexToPosition(l));"number"===typeof e&&(b.end=e=p.indexToPosition(e));if(yi.Range.isValidLiteral(b)){l=p.clipPositionToLines(l);e=p.clipPositionToLines(e);if(this._isReverse=yi.lessPosition(e,l))e=$jscomp.makeIterator([e,l]),l=e.next().value,e=e.next().value;b.start=l;b.end=e;b.isRange||(b=new yi.Range(b));b.equals(this._range)||(this._range=b,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=
this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=b.start,this.endAnchor.position=b.end,this.textMorph.makeDirty(),yi.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range={start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(b){this.range=yi.Range.fromPositions(b,
this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(b){this.range=yi.Range.fromPositions(this.start,b)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",set:function(b){this.range={start:b,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(b){this.range=
{start:this.anchor,end:b}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(b){this.replace(b)}},{key:"replace",value:function(b,e,l,p){var q=this.range,u=this.textMorph,w=this.isReverse();this.range=u.replace(q,b,e,l,p);w&&this.reverse();return this.range}},{key:"selectedRows",get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",
value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(b){b=void 0===b?this.start:b;this.range={start:b,end:b};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(b){var e=this.textMorph.document,l=e.positionToIndex(this.end);b=Math.min(l,e.positionToIndex(this.start)-b);l=this.isReverse();this.start=e.indexToPosition(b);this._isReverse=
l;return this}},{key:"growRight",value:function(b){var e=this.textMorph.document,l=e.positionToIndex(this.start);b=Math.max(l,e.positionToIndex(this.end)+b);l=this.isReverse();this.end=e.indexToPosition(b);this._isReverse=l;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};return this}},{key:"selectLine",value:function(b,e){b=void 0===b?this.lead.row:b;this.includingLineEnd=void 0===e?!1:e;this.range={start:{row:b,column:0},
end:{row:b,column:this.textMorph.getLine(b).length}};return this}},{key:"gotoLineEnd",value:function(b){b=void 0===b?this.lead.row:b;b={row:b,column:this.textMorph.getLine(b).length};this.range={start:b,end:b}}},{key:"selectLeft",value:function(b){b=void 0===b?1:b;this.isEmpty()?(this.growLeft(b),this.reverse()):this.isReverse()?this.growLeft(b):this.growRight(-b);return this}},{key:"selectRight",value:function(b){b=void 0===b?1:b;this.isReverse()?this.growLeft(-b):this.growRight(b);return this}},
{key:"selectUp",value:function(b,e){return this.goUp(void 0===b?1:b,e,!0)}},{key:"selectDown",value:function(b,e){return this.selectUp(-(void 0===b?1:b),e)}},{key:"goUp",value:function(b,e,l){b=void 0===b?1:b;l=void 0===l?!1:l;if(0===b)return this;var p=this._goalColumn,q=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(b,this.lead,void 0===e?!1:e,p,q);l||(this.anchor=this.lead);this._goalColumn=p;this._goalX=q;return this}},{key:"goDown",value:function(b,e){return this.goUp(-(void 0===
b?1:b),e)}},{key:"goLeft",value:function(b){b=void 0===b?1:b;this.isEmpty()&&this.growLeft(b);this.collapse();return this}},{key:"goRight",value:function(b){b=void 0===b?1:b;this.isEmpty()&&this.growRight(b);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},{key:"cursorBlinkStart",value:function(){var b=this;this.cursorBlinkStop();var e=yi.config.text.cursorBlinkPeriod;if(e){var l=this.textMorph,
p=l.env.renderer.getNodeForMorph(l);this.cursorBlinkProcess=setInterval(function(){p||(p=l.env.renderer.getNodeForMorph(l));if(p){b._cursorVisible=!b._cursorVisible;var q=p.className.split(" "),u=q.indexOf("hidden-cursor");b._cursorVisible&&-1<u&&(q.splice(u,1),p.className=q.join(" "));b._cursorVisible||-1!==u||(p.className=[].concat($jscomp.arrayFromIterable(q),["hidden-cursor"]).join(" "))}},1E3*e)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);
this.cursorBlinkProcess=null;this._cursorVisible=!0;var b=this.textMorph;if(b=b.env.renderer.getNodeForMorph(b)){var e=b.className.split(" "),l=e.indexOf("hidden-cursor");-1<l&&(e.splice(l,1),b.className=e.join(" "))}}},{key:"toString",value:function(){var b=this.anchor,e=this.lead;return"Selection("+b.row+"/"+b.column+" -> "+e.row+"/"+e.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Selection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:224,end:9243})}(void 0);yi.Selection=zJ;yi.Selection=zJ;yi.Selection=zJ;var AJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),k=d.hasOwnProperty("MultiSelection")&&"function"===typeof d.MultiSelection?d.MultiSelection:d.MultiSelection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:"initialize",value:function(b){this._selections=[new yi.Selection(this.textMorph,b)]}},{key:"__deserialize__",value:function(b,e){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(b){var e=this._selections?this._selections.filter(function(l){return!b.includes(l)}):[];this._selections=b;e.forEach(function(l){return l.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(b){return b.uninstall()})}},
{key:"defaultSelection",get:function(){return yi.arr.last(this.selections)}},{key:"removeSelections",value:function(b){b=this.selections.slice(void 0===b?1:b);b.forEach(function(e){return e.uninstall()});this.selections=yi.arr.withoutAll(this.selections,b)}},{key:"disableMultiSelect",value:function(){yi.arr.without(this.selections,this.defaultSelection).forEach(function(b){return b.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},
{key:"range",set:function(b){this.disableMultiSelect();this.defaultSelection.range=b}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(b){return b.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(b){this.defaultSelection.start=b}},{key:"end",get:function(){return this.defaultSelection.end}},{key:"end",set:function(b){this.defaultSelection.end=b}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},
{key:"anchor",set:function(b){this.defaultSelection.anchor=b}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(b){this.defaultSelection.lead=b}},{key:"text",get:function(){return this.selections.map(function(b){return b.text}).join("\n")}},{key:"text",set:function(b){this.selections.forEach(function(e){return e.text=b})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},
{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(b){this.defaultSelection.collapse(b);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(b){this.defaultSelection.growLeft(b);return this}},{key:"growRight",value:function(b){this.defaultSelection.growRight(b);return this}},{key:"selectAll",
value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(b,e){this.includingLineEnd=e;this.defaultSelection.selectLine(b,e);return this}},{key:"gotoLineEnd",value:function(b){this.defaultSelection.gotoLineEnd(b)}},{key:"selectLeft",value:function(b){this.defaultSelection.selectLeft(b);return this}},{key:"selectRight",value:function(b){this.defaultSelection.selectRight(b);return this}},{key:"selectUp",value:function(b,e){this.defaultSelection.selectUp(b,
e);return this}},{key:"selectDown",value:function(b,e){this.defaultSelection.selectDown(b,e);return this}},{key:"goUp",value:function(b,e){return this.defaultSelection.goUp(b,e)}},{key:"goDown",value:function(b,e){return this.defaultSelection.goDown(b,e)}},{key:"goLeft",value:function(b){return this.defaultSelection.goLeft(b)}},{key:"goRight",value:function(b){return this.defaultSelection.goRight(b)}},{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(b){this.defaultSelection.style=
b}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var b=this.selections.slice(),e=b.length-1;0<=e;e--)for(var l=b.length-1;0<=l;l--)if(e!==l&&b[l].mergeWith(b[e])){b.splice(e,1);break}this.selections=b}},{key:"ranges",get:function(){return this.selections.map(function(b){return b.range})}},{key:"ranges",set:function(b){for(var e=
0;e<b.length;e++){var l=this.selections[e];l?l.range=b[e]:this.addRange(b[e],!1)}this.removeSelections(e);this.mergeSelections()}},{key:"addRange",value:function(b,e){e=void 0===e?!0:e;this.selections.push(new yi.Selection(this.textMorph,b));e&&this.mergeSelections();return yi.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],d,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9252,end:13920})}(yi.Selection);yi.MultiSelection=AJ;yi.MultiSelection=AJ;yi.MultiSelection=AJ;var wg=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");wg.shallowEquals=AO;wg.concatAttributePair=MG;wg.joinTextAttributes=NG;wg.splitTextAndAttributesAt=OG;wg.splitTextAndAttributesAtColumns=PG;wg.concatTextAndAttributes=QG;wg.modifyAttributesInRange=
RG;wg.textAndAttributesWithSubRanges=SG;wg.textAndAttributesDo=function(a,d){for(var k=0;k<a.length;k+=2)d(a[k],a[k+1])};wg.splitTextAndAttributesIntoLines=sA;wg.eqPosition=qp;wg.lessPosition=pp;wg.shallowEquals=AO;wg.shallowEquals=AO;wg.concatAttributePair=MG;wg.concatAttributePair=MG;wg.joinTextAttributes=NG;wg.joinTextAttributes=NG;wg.splitTextAndAttributesAt=OG;wg.splitTextAndAttributesAt=OG;wg.splitTextAndAttributesAtColumns=PG;wg.splitTextAndAttributesAtColumns=PG;wg.concatTextAndAttributes=
QG;wg.concatTextAndAttributes=QG;wg.modifyAttributesInRange=RG;wg.modifyAttributesInRange=RG;wg.textAndAttributesWithSubRanges=SG;wg.textAndAttributesWithSubRanges=SG;wg.splitTextAndAttributesIntoLines=sA;wg.splitTextAndAttributesIntoLines=sA;var vd=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");vd.arr=Ne;vd.num=Gj;vd.string=Bg;vd.lessEqPosition=lx;vd.minPosition=mx;vd.maxPosition=nx;vd.lessPosition=pp;vd.eqPosition=qp;vd.concatTextAndAttributes=QG;vd.splitTextAndAttributesAtColumns=
PG;vd.splitTextAndAttributesIntoLines=sA;vd.joinTextAttributes=NG;vd.modifyAttributesInRange=RG;vd.concatAttributePair=MG;vd.splitTextAndAttributesAt=OG;vd.objectReplacementChar="\ufffd";vd.objectReplacementChar="\ufffd";vd.objectReplacementChar="\ufffd";vd.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("TreeNode")&&"function"===typeof d.TreeNode?
d.TreeNode:d.TreeNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.parent=b}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var b=this,e=[];b;)e.push(b),b=b.parent;return e}},{key:"traverse",value:function(b){var e=[b.call(null,
this)];if(this.isLeaf)return e;for(var l=0;l<this.children.length;l++)e.push.apply(e,$jscomp.arrayFromIterable(this.children[l].traverse(b)));return e}},{key:"consistencyCheck",value:function(){var b=[],e=this.isRoot,l=this.isLeaf,p=this.children,q=this.size,u=this.stringSize,w=this.height,y=this.width,A=this.options,C=A.maxLeafSize,D=A.maxNodeSize,L=A.minLeafSize;A=A.minNodeSize;e||0!==q||b.push({error:"size of "+this+" expected to be > 0!"});if(!Array.isArray(p))return b.push({error:this+".children is not an array but "+
p}),b;var I=vd.arr.sum(vd.arr.pluck(p,"size"));I!=q&&b.push({error:"Sum of child sizes is not size of "+this+": "+I+" != "+q});q=vd.arr.sum(vd.arr.pluck(p,"stringSize"));q!=u&&b.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+q+" != "+u});u=vd.arr.sum(vd.arr.pluck(p,"height"));Number.parseInt(u)!=Number.parseInt(w)&&b.push({error:"Sum of child Height is not Height of "+this+": "+u+" != "+w});w=p.length?Math.max.apply(null,vd.arr.pluck(p,"width")):0;(p.find(function(S){return S.isLine&&
S.hasEstimatedExtent})?Number.parseInt(w)>Number.parseInt(y):Number.parseInt(w)!=Number.parseInt(y))&&b.push({error:"max width of children of "+this+" is not node width: "+w+" != "+y});y=l?C:D;!e&&p.length>y&&b.push({error:"children count of "+this+" expected to be between "+(l?L:A)+" and "+y+" but is "+p.length});for(e=0;e<p.length;e++)(L=p[e])?(l&&!L.isLine?b.push({error:"child "+e+" of leaf "+this+" is not a line!"}):!l&&L.isLine&&b.push({error:"child of non-leaf "+this+" is a line!"}),this!==
L.parent&&b.push({error:"child.parent is "+L.parent+" but should be "+this})):b.push({error:"child "+e+" of "+this+" is nullish!"});b.push.apply(b,$jscomp.arrayFromIterable(vd.arr.flatmap(p,function(S){return S.consistencyCheck()})));return b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("InnerTreeNode")&&"function"===typeof d.InnerTreeNode?d.InnerTreeNode:d.InnerTreeNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b.parent);this.options=b.options;this.children=b.children;this.size=b.size;this.stringSize=b.stringSize;this.height=b.height;this.width=b.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(b,e,l){this.size+=b;this.height+=e;this.stringSize+=l;for(var p=0,q=0;q<this.children.length;q++){var u=this.children[q].width;u>p&&(p=u)}this.width=p;this.parent&&this.parent.resize(b,e,l)}},{key:"lines",value:function(b){b=
void 0===b?[]:b;if(this.isLeaf)return b.push.apply(b,$jscomp.arrayFromIterable(this.children)),b;for(var e=0;e<this.children.length;e++)this.children[e].lines(b);return b}},{key:"findRow",value:function(b){if(0>b||b>=this.size)return null;if(this.isLeaf)return this.children[b];for(var e=0;e<this.children.length;e++){var l=this.children[e],p=l.size;if(b<p)return l.findRow(b);b-=p}return null}},{key:"findLineByVerticalOffset",value:function(b,e,l){e=void 0===e?0:e;l=void 0===l?0:l;if(0>b||b>this.height)return null;
for(var p=0;p<this.children.length;p++){var q=this.children[p],u=q.height;if(b<=u)return this.isLeaf?{line:q,offset:b,y:e,row:l}:q.findLineByVerticalOffset(b,e,l);b-=u;e+=u;l+=q.size}return null}},{key:"computeVerticalOffsetOf",value:function(b,e){e=void 0===e?0:e;if(0>b||b>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+b),e;if(this.isLeaf){for(var l=0;l<Math.min(b,this.children.length);l++)e+=this.children[l].height;return e}for(l=0;l<this.children.length;l++){var p=this.children[l],
q=p.size;if(b<q)return p.computeVerticalOffsetOf(b,e);b-=q;e+=p.height}return e}},{key:"ensureLine",value:function(b){b||(b="");var e="string"===typeof b;return!e&&b.isLine?(b.parent=this,b):new vd.Line({parent:this,width:e?0:b.width||0,height:e?0:b.height||0,textAndAttributes:e?[b,null]:b.textAndAttributes||[b.text||"",null]})}},{key:"insert",value:function(b,e){e=void 0===e?this.size:e;var l=this.children,p=this.options;if(this.isLeaf){var q=[],u=0,w=0;for(p=0;p<b.length;p++){var y=this.ensureLine(b[p]);
q.push(y);u+=y.height;w+=y.stringSize;l.splice(e++,0,y)}this.resize(q.length,u,w);this.balanceAfterGrowth();return q}0===l.length&&l.push(new vd.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:p}));for(p=0;p<l.length;p++){q=l[p];u=q.size;if(e<=u)return q.insert(b,e);e-=u}e=l[p-1];return e.insert(b,e.size)}},{key:"withParentChainsUpToCommonParentDo",value:function(b,e,l){for(var p=this.withParents(),q,u=0;b;){if(p.includes(b)){q=b;break}e(b,u++);b=b.parent}e=p.indexOf(q);
0>e&&(e=p.length);p=p.slice(0,e);for(e=0;e<p.length;e++)l(p[e],e)}},{key:"findLineWithTextIndex",value:function(b,e){e=void 0===e?0:e;if(this.isLeaf){for(var l=0;l<this.children.length;l++){var p=this.children[l],q=p.stringSize;if(b<q)return{line:p,column:b,row:e};b-=q;e++}b=vd.arr.last(this.children);return{line:b,row:e-1,column:b.stringSize-1}}for(p=l=0;p<this.children.length;p++){q=this.children[p];var u=q.stringSize;if(b<l+u)return q.findLineWithTextIndex(b-l,e);e+=q.size;l+=u}return vd.arr.last(this.children).findLineWithTextIndex(b-
l)}},{key:"findLeafs",value:function(b,e,l){l=void 0===l?0:l;if(b>l+this.size||e<l)return[];if(this.isLeaf){b=Math.max(0,b-l);var p=this.children.length-1;e=Math.min(p,e-l);l=!1;0===b&&e===p&&(l=!0,e=p);return[{node:this,firstLine:b,lastLine:e,full:l}]}p=[];for(var q=0;q<this.children.length;q++){var u=this.children[q];p.push.apply(p,$jscomp.arrayFromIterable(u.findLeafs(b,e,l)));l+=u.size}return p}},{key:"removeFromToInRoot",value:function(b,e,l){var p=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");
b>e&&(e=$jscomp.makeIterator([e,b]),b=e.next().value,e=e.next().value);var q=this.size,u=this.options.minLeafSize,w=this.findLeafs(b,e),y=w.shift();e=w.pop();var A=[],C=!1,D=!1;if(!(b>=q)){e&&y.node===e.node&&(e=null);y.full?(l&&l.log("Removing complete first line "+y),w.push(y)):C=y.node.children.length-(y.lastLine-y.firstLine+1)<u;e&&(e.full?(l&&l.log("Removing complete last line "+e),w.push(e)):(D=e,D=D.node.children.length-(D.lastLine-D.firstLine+1)<u));if(C||D){var L=(L=y.node.children[0].prevLine())?
L.parent:null;var I=(I=vd.arr.last(e?e.node.children:y.node.children).nextLine())?I.parent:null}for(b=0;b<w.length;b++){u=w[b].node;q=u.children.length;for(var S=0,V=0,ba=0;ba<q;ba++){var ua=u.children[ba];S+=ua.height;V+=ua.stringSize;ua.parent=null}u.children.length=0;u.resize(-q,-S,-V);if(q=u.parent)u.parent=null,q.children.splice(q.children.indexOf(u),1),A.includes(q)||A.push(q)}if(!y.full){u=y.firstLine;w=y.node;b=y.lastLine-u+1;u=w.children.splice(u,b);for(V=S=q=0;V<u.length;V++)ba=u[V],q+=
ba.height,S+=ba.stringSize,ba.parent=null;w.resize(-b,-q,-S)}if(e&&!e.full){b=e;u=b.firstLine;w=b.node;b=b.lastLine-u+1;u=w.children.splice(u,b);for(V=S=q=0;V<u.length;V++)ba=u[V],q+=ba.height,S+=ba.stringSize,ba.parent=null;w.resize(-b,-q,-S)}l&&l.dump(""+this.print(!1));C&&y.node.balanceByMergeOrTheft(L,!e||e.full?I:e.node,l);e&&D&&e.node.root===this&&(D=!0,L=y.full||!y.node.parent?L:y.node,C&&(e.node.root!==this&&(D=!1),L&&L.root!==this&&(L=null),I&&I.root!==this&&(I=null)),D&&e.node.balanceByMergeOrTheft(L,
I,l));A.forEach(function(Fa){return Fa.root===p&&Fa.balanceAfterShrink(l)})}}},{key:"balanceByMergeOrTheft",value:function(b,e,l){var p=this,q=this.children,u=this.options,w=this.isLeaf,y=w?u.maxLeafSize:u.maxNodeSize;u=w?u.minLeafSize:u.minNodeSize;w=b&&b.children.length+q.length<=y;y=!w&&e&&e.children.length+q.length<=y;var A=w?b:y?e:null;if(A){l&&l.log("[balanceByMergeOrTheft] merging "+this+" "+(w?"left":"right")+" into "+A);var C=this.size,D=this.width,L=this.height,I=this.stringSize;q.forEach(function(Q){return Q.parent=
A});w?A.children.push.apply(A.children,$jscomp.arrayFromIterable(q)):A.children.unshift.apply(A.children,$jscomp.arrayFromIterable(q));this.width=q.length=0;this.withParentChainsUpToCommonParentDo(A,function(Q){D>Q.width&&(Q.width=D);Q.height+=L;Q.size+=C;Q.stringSize+=I},function(Q){if(D===Q.width)for(var W=0;W<Q.children.length;W++){var ka=Q.children[W];ka.width>Q.width&&(Q.width=ka.width)}Q.height-=L;Q.size-=C;Q.stringSize-=I})}else{w=b?Math.ceil((b.children.length-u)/2):0;var S=e?Math.ceil((e.children.length-
u)/2):0;if((y=0<w&&w>=S)||!y&&0<S){u=y?b.children.splice(b.children.length-w,w):e.children.splice(0,S);var V=y?b:e,ba=y?w:S,ua=0,Fa=0,F=0,Y=0;l&&l.log("[balanceByMergeOrTheft] "+this+" steals from "+(y?"left":"right")+" node "+V+" "+ba+" nodes");for(b=0;b<u.length;b++)ua+=u[b].height,Fa+=u[b].stringSize,F=Math.max(F,u[b].width);for(b=0;b<V.children.length;b++)Y=Math.max(Y,V.children[b].width);this.withParentChainsUpToCommonParentDo(V,function(Q){if(Y<F&&Y<Q.width){if(Q===V)Q.width=Y;else{for(var W=
!1,ka=0;ka<Q.children.length;ka++)if(Q.children[ka].width>Y){W=!0;break}W||(Q.width=Y)}Q.width=F}Q.height-=ua;Q.size-=ba;Q.stringSize-=Fa},function(Q){Q.width<F&&(Q.width=F);Q.height+=ua;Q.size+=ba;Q.stringSize+=Fa});u.forEach(function(Q){return Q.parent=p});y?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(u)):this.children.push.apply(this.children,$jscomp.arrayFromIterable(u))}}b=this.parent;0===q.length&&(this.parent=null,b&&b.children.splice(b.children.indexOf(this),1));b&&
b.balanceAfterShrink(l)}},{key:"balanceAfterGrowth",value:function(){var b=this.isLeaf,e=this.size,l=this.stringSize,p=this.parent,q=this.children,u=this.width,w=this.height,y=this.options,A=b?y.maxLeafSize:y.maxNodeSize;if(q.length>A){p||(p=this.parent=new vd.InnerTreeNode({parent:null,children:[this],size:e,width:u,height:w,stringSize:l,options:y}),p.isLeaf=!1);var C=Math.floor(q.length/2),D=0,L=0,I=e=0,S=l=0,V=u=0;for(w=0;D<C;D++)L+=q[D].size,I=Math.max(I,q[D].width),S+=q[D].height,V+=q[D].stringSize;
for(;D<q.length;D++)e+=q[D].size,l=Math.max(l,q[D].width),u+=q[D].height,w+=q[D].stringSize;this.children=q.slice(0,C);this.size=L;this.width=I;this.height=S;this.stringSize=V;D=p.children.indexOf(this);q=q.slice(C);var ba=new vd.InnerTreeNode({parent:p,children:q,size:e,height:u,width:l,stringSize:w,options:y});ba.isLeaf=b;q.forEach(function(ua){return ua.parent=ba});p.children.splice(D+1,0,ba);ba.children.length>A&&ba.balanceAfterGrowth();this.children.length>A&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},
{key:"balanceAfterShrink",value:function(b){var e=this,l=this.isLeaf,p=this.parent,q=this.children,u=this.options,w=u.maxLeafSize,y=u.maxNodeSize,A=u.minLeafSize,C=u.minNodeSize;u=l?w:y;A=l?A:C;C=!1;for(var D=q.length;D--;)0===q[D].size&&(q.splice(D,1),C=!0,b&&b.log("[balanceAfterShrink] "+this+" removes node "+D+" b/c it is empty, remaining children: "+q.length+" (min: "+A+", max: "+u+")"));C&&b&&b.dump(""+this.root.print(!1));if(q.length>=A)p&&p.balanceAfterShrink(b);else if(0===q.length)p&&p.balanceAfterShrink(b);
else if(l)p&&(1===p.children.length?(b&&b.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),b&&b.dump(""+this.root.print(!1)),this.parent=null,p.children.length=0,p.children.push.apply(p.children,$jscomp.arrayFromIterable(q)),q.forEach(function(I){return I.parent=p}),p.isLeaf=!0):(w=(w=q[0].prevLine())&&w.parent,q=vd.arr.last(q).nextLine(),this.balanceByMergeOrTheft(w,q&&q.parent,b))),this.parent&&this.parent.balanceAfterShrink(b);else{l=[];u=C=
A=!1;for(D=0;D<q.length;D++){var L=q[D];!A&&L.isLeaf&&(A=!0);C||L.isLeaf||(C=!0);if(A&&C){u=!0;break}l.push.apply(l,$jscomp.arrayFromIterable(L.children))}!u&&l.length<=(A?w:y)&&(b&&b.log("[balanceAfterShrink] "+this+" grandChildren.length is "+l.length+" and <= max size so it is removing all its children and adopting their children"),q.forEach(function(I){return I.parent=null}),l.forEach(function(I){return I.parent=e}),q.length=0,q.push.apply(q,$jscomp.arrayFromIterable(l)),this.isLeaf=A,b&&b.log("[balanceAfterShrink] "+
q.join("\n")),b&&b.dump(""+this.root.print(!1)));p&&p.balanceAfterShrink(b)}}},{key:"print",value:function(b,e,l,p){b=void 0===b?!0:b;e=void 0===e?0:e;l=void 0===l?0:l;var q=this.isLeaf,u=this.size,w=this.stringSize,y=this.width,A=this.height,C=this.children;p=p||(q?"leaf":"node");w=""+" ".repeat(l)+p+" (size: "+u+" width: "+Math.round(y)+" height: "+Math.round(A)+" text length: "+w+")";if(C.length){y="";e+=u;for(u=C.length;u--;)A=C[u],e-=A.size,y="\n"+A.print(b,e,l+1)+y;w+=y}return w}},{key:"toString",
value:function(){var b=this.isLeaf,e=this.size,l=this.width,p=this.height,q=this.children;return"node ("+(b?"leaf, ":"")+(b&&q.length?"rows: "+q[0].row+"-"+vd.arr.last(q).row+" ":"")+("size: "+e+" "+l+"x"+p+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:4638,end:29081})})(vd.TreeNode);var OR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("Line")&&"function"===typeof d.Line?d.Line:d.Line=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,b.parent);this.textAndAttributes=vd.joinTextAttributes(b.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=b.width;this.height=b.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;
for(var b="",e=this.textAndAttributes,l=0;l<e.length;l+=2)b+="string"===typeof e[l]?e[l]:vd.objectReplacementChar;return this._text=b}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var b=[],e=this.textAndAttributes,l=0;l<e.length;l+=2){var p=e[l+1];p&&!b.includes(p)&&b.push(p)}return this._textAttributes=b}},{key:"row",get:function(){if(!this.parent)return 0;var b=this.withParents();if(1===b.length)return b.children.indexOf(this);for(var e=0,l=b.length-
1;1<=l;l--)for(var p=b[l],q=p.children.indexOf(b[l-1]),u=0;u<q;u++)e+=p.children[u].size;return e}},{key:"nextLine",value:function(){var b=this.parent;return b?(b=b.children[b.children.indexOf(this)+1])?b:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var b=this.parent;return b?(b=b.children[b.children.indexOf(this)-1])?b:this.root.findRow(this.row-1):null}},{key:"changeExtent",value:function(b,e,l){var p=this.height,q=this.width,u=this.parent;this.width=b;this.height=e;this.hasEstimatedExtent=
void 0===l?!1:l;if(q!==b||p!==e)for(e-=p;u;){u.height+=e;if(b>=u.width)u.width=b;else if(q===u.width){for(p=l=0;p<u.children.length;p++){var w=u.children[p].width;w>l&&(l=w)}u.width=l}u=u.parent}return this}},{key:"changeText",value:function(b,e){e=void 0===e?null:e;var l=this.parent,p=this.height,q=b.length+1-(this.text.length+1),u=0;this.modeState&&this.modeState._string!==b&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=
!1,u=-p);this._text=b;this._textAttributes=null;this.textAndAttributes=e||(e=[b,null]);if(0!==e.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(b=0;b<e.length;b+=2)if((p=e[b+1])&&Array.isArray(p))throw Error("invalid attr part of text/attr pair, its an array: "+p);for(;l;){l.stringSize+=q;l.height+=u;for(b=e=0;b<l.children.length;b++)p=l.children[b].width,p>e&&(e=p);l.width=e;l=l.parent}return this}},{key:"changeTextAndAttributes",value:function(b){b=
vd.joinTextAttributes(b);for(var e="",l=0;l<b.length;l+=2)e+="string"===typeof b[l]?b[l]:vd.objectReplacementChar;return this.changeText(e,b)}},{key:"print",value:function(b,e,l){b=void 0===b?!0:b;e=void 0===e?0:e;e=" ".repeat(void 0===l?0:l)+"line "+e+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+this.stringSize;l=vd.arr.toTuples(this.textAndAttributes,2).map(function(p){var q=$jscomp.makeIterator(p);p=q.next().value;q=q.next().value;return("string"===
typeof p?'"'+p+'"':String(p))+(","+JSON.stringify(q))}).join(",");return e+(b?")":" content: ["+l+"])")}},{key:"toString",value:function(){var b=this.width,e=this.height;return'line ("'+vd.string.truncate(this._text,30)+'", '+b+"x"+e+")"}},{key:"consistencyCheck",value:function(){var b=[];if(!this.parent)return b.push("line "+this+" has no parent!"),b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:29090,end:35532})}(vd.TreeNode);vd.Line=OR;vd.Line=OR;vd.Line=OR;vd.documentFuzzier={makeString:function(a,d){a=void 0===a?5:a;d=void 0===d?50:d;var k=vd.arr.range(65,90).map(function(b){return String.fromCharCode(b)}).join("");k+=k.toLowerCase()+" \n";a=vd.num.random(a,d);return vd.arr.shuffle(Array.from(k.repeat(Math.ceil(a/k.length)))).slice(0,a).join("")},
randomDocPosition:function(a){var d=0===a.rowCount?0:vd.num.random(0,a.rowCount-1);a=vd.num.random(0,a.getLineString(d).length-1);return{row:d,column:a}},insertRandom:function(a,d,k,b){k=[this.makeString(k,b),null];b=this.randomDocPosition(a);d.push(["insertTextAndAttributes",k,b]);a.insertTextAndAttributes(k,b)},deleteRandom:function(a,d,k,b){k={start:this.randomDocPosition(a),end:this.randomDocPosition(a)};d.push(["remove",k]);a.remove(k)},maybe:function(){return.5>Math.random()},replay:function(a,
d,k,b){k=void 0===k?!1:k;b=void 0===b?!1:b;k&&(a.debug=k,k=a.debugHelper(),k.reset());var e=new vd.Document([""]);d.forEach(function(l,p){var q=$jscomp.makeIterator(l);l=q.next().value;q=$jscomp.arrayFromIterator(q);if(b&&p==d.length-1)debugger;e[l].apply(e,[].concat($jscomp.arrayFromIterable(q),[k]))});a.changeDocument(e)},run:function(){var a=Date.now(),d=0,k=new vd.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),b=[];try{for(;1E4>k.stringSize&&
1E4>d++;)this.maybe()?this.deleteRandom(k,b):this.insertRandom(k,b),k.consistencyCheck()}catch(l){var e=l}a=Date.now()-a;return{error:e,doc:k,actions:b,time:a}}};vd.newline="\n";vd.newlineLength=1;var d6=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),k=d.hasOwnProperty("Document")&&"function"===typeof d.Document?d.Document:d.Document=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.options=Object.assign({},vd.defaultOptions,{},e);this.lines=b}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var b=this.root.root;this.root!==b&&(this.root=b)}},{key:"height",get:function(){return this.root.height}},{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===
this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(b){return b.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(b){b=void 0===b?[]:b;this.root=new vd.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(b)}},{key:"clipRow",value:function(b){return Math.max(0,Math.min(b,this.rowCount-1))}},{key:"clipPositionToLines",value:function(b){var e=b.row;
b=b.column;var l=this.rowCount;if(0===l)return{row:0,column:0};0>e?e=0:e>=l&&(e=l-1,b=Infinity);0>b?b=0:(l=this.getLineString(e).length,b>l&&(b=l));return{row:e,column:b}}},{key:"findLineByVerticalOffset",value:function(b){return this.root.findLineByVerticalOffset(b)}},{key:"computeVerticalOffsetOf",value:function(b){return this.root.computeVerticalOffsetOf(b)}},{key:"getLine",value:function(b){return this.root.findRow(this.clipRow(b))}},{key:"getLineString",value:function(b){return(b=this.getLine(b))?
b.text:""}},{key:"insertLine",value:function(b,e){e=void 0===e?this.root.rowCount:e;return this.insertLines([b],e)[0]}},{key:"removeLine",value:function(b){this.root.removeFromToInRoot(b,b)}},{key:"removeLines",value:function(b,e,l){this.root.removeFromToInRoot(b,e,l)}},{key:"insertLines",value:function(b,e){b=this.root.insert(b,e);this.fixRoot();return b}},{key:"textString",get:function(){var b="",e=this.lines;if(!e.length)return b;for(var l=0;l<e.length-1;l++)b=b+e[l].text+vd.newline;return b+=
e[l].text}},{key:"textString",set:function(b){this.lines=b.split(vd.newline)}},{key:"endPosition",get:function(){var b=this.rowCount;if(0===b)return{row:0,column:0};--b;var e=this.getLine(b);return{row:b,column:e.stringSize-1}}},{key:"textAndAttributes",get:function(){var b=this.lines;if(!b.length)return[];for(var e=vd.newline,l=b.length-1,p=b[0].textAndAttributes.slice(),q=1;q<=l;q++){var u=b[q],w=p.pop()||null,y=p.pop()||"";u=u.textAndAttributes;p.push.apply(p,$jscomp.arrayFromIterable(vd.concatAttributePair(y,
w,u[0]||"",u[1]||null,e)));for(w=2;w<u.length;w+=2)p.push(u[w],u[w+1])}return p}},{key:"textAndAttributes",set:function(b){this.lines=vd.splitTextAndAttributesIntoLines(b,vd.newline).map(function(e){return new vd.Line({parent:null,width:0,height:0,textAndAttributes:e})})}},{key:"getTextAndAttributesOfLine",value:function(b){return this.getLine(b).textAndAttributes}},{key:"setTextAndAttributesOfLine",value:function(b,e){this.getLine(b).changeTextAndAttributes(e);return e}},{key:"mixinTextAttribute",
value:function(b,e){vd.modifyAttributesInRange(this,e,function(l,p){l._textAttributes=null;return Object.assign({},p,b)})}},{key:"setTextAttribute",value:function(b,e){vd.modifyAttributesInRange(this,e,function(l,p){l._textAttributes=null;return b})}},{key:"mixoutTextAttribute",value:function(b,e){e=void 0===e?{start:{row:0,column:0},end:this.endPosition}:e;if(b){var l=Object.keys(b);vd.modifyAttributesInRange(this,e,function(p,q){if(!q)return q;p._textAttributes=null;p=0;var u={},w;for(w in q)l.includes(w)||
(u[w]=q[w],p++);return 0===p?null:u})}}},{key:"setTextAttributesWithSortedRanges",value:function(b){function e(D,L,I,S){S=void 0===S?0:S;var V=0,ba=L.length;if(0>=I.length-S)return{attributes:[L,null],index:S};for(var ua=[];S<I.length&&!(V>=ba);S+=2){var Fa=I[S],F=Fa.start;Fa=Fa.end;var Y=I[S+1];if(Fa.row<D)V=0;else{F.row===D&&V<F.column&&(ua.push(L.slice(V,F.column),null),V=F.column);if(Fa.row>D){ua.push(Y.embeddedMorph||L.slice(V,ba),Y);V=ba;break}V<Fa.column&&ua.push(Y.embeddedMorph||L.slice(V,
Fa.column),Y);V=Fa.column}}V<ba&&ua.push(L.slice(V,ba),null);return{attributes:ua,index:S}}if(!(2>b.length)){var l=b[0].start,p=b.slice(-2)[0].end,q=this.getLine(l.row);if(l.row===p.row){if(!(l.column>=p.column)){var u=e(l.row,q.text,b,0).attributes,w=$jscomp.makeIterator(vd.splitTextAndAttributesAtColumns(q.textAndAttributes,[l.column,p.column]));b=w.next().value;w.next();w=w.next().value;p=$jscomp.makeIterator(vd.splitTextAndAttributesAtColumns(u,[l.column,p.column]));p.next();l=p.next().value;
p.next();q.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(b),$jscomp.arrayFromIterable(l),$jscomp.arrayFromIterable(w)))}}else{w=l.row;var y=l.column;l=e(w,q.text,b,0);var A=l.attributes;l=l.index;var C=$jscomp.makeIterator(vd.splitTextAndAttributesAt(q.textAndAttributes,y));u=C.next().value;C.next();y=$jscomp.makeIterator(vd.splitTextAndAttributesAt(A,y));y.next();y=y.next().value;for(q.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(u),$jscomp.arrayFromIterable(y)));q=q.nextLine();){w++;
if(w===p.row)break;l=e(w,q.text,b,l);u=l.attributes;l=l.index;q.changeTextAndAttributes(u)}q&&(p=p.column,b=e(w,q.text,b,l).attributes,w=$jscomp.makeIterator(vd.splitTextAndAttributesAt(q.textAndAttributes,p)),w.next(),w=w.next().value,p=$jscomp.makeIterator(vd.splitTextAndAttributesAt(b,p)).next().value,q.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(p),$jscomp.arrayFromIterable(w))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(b){return b.changeText(b.text)})}},
{key:"textAttributeAt",value:function(b){var e=b.row;b=b.column;b=Math.max(0,b);var l=this.getLine(e);if(!l)return null;e=0;l=l.textAndAttributes;for(var p=0;p<l.length;p+=2){var q=l[p],u=l[p+1];e+="string"===typeof q?q.length:1;if(b<e)return u}return l[l.length-1]}},{key:"textAndAttributesInRange",value:function(b){var e=b.start,l=b.end;if(vd.eqPosition(e,l))return["",null];vd.lessPosition(l,e)&&(b=$jscomp.makeIterator([l,e]),e=b.next().value,l=b.next().value);e=vd.maxPosition(e,{column:0,row:0});
l=vd.minPosition(l,this.endPosition);var p=this.getLine(e.row),q=p;if(l.row===e.row)return b=e.column,l=l.column,b===l&&l++,b=$jscomp.makeIterator(vd.splitTextAndAttributesAtColumns(q.textAndAttributes,[b,l])),b.next(),b.next().value;b=[p];for(var u=0;u<l.row-e.row;u++)b.push(p=p.nextLine());p=b[b.length-1];e=$jscomp.makeIterator(vd.splitTextAndAttributesAt(q.textAndAttributes,e.column));e.next();e=e.next().value;l=$jscomp.makeIterator(vd.splitTextAndAttributesAt(p.textAndAttributes,l.column)).next().value;
0===e.length&&(e=["",null]);if(1===b.length)return vd.concatTextAndAttributes(e,l,!0);for(q=1;q<b.length-1;q++)"string"===typeof e[e.length-2]&&(e[e.length-2]+=vd.newline),vd.concatTextAndAttributes(e,b[q].textAndAttributes,!0);"string"===typeof e[e.length-2]&&(e[e.length-2]+=vd.newline);vd.concatTextAndAttributes(e,l,!0);return vd.joinTextAttributes(e,"")}},{key:"textInRange",value:function(b){var e=b.start,l=b.end;e=this.clipPositionToLines(e);l=this.clipPositionToLines(l);vd.lessPosition(l,e)&&
(b=$jscomp.makeIterator([l,e]),e=b.next().value,l=b.next().value);b=e;e=b.row;b=b.column;var p=l;l=p.row;p=p.column;if(e===l)return b===p?"":this.getLineString(e).slice(b,p);var q=this.getLine(e);for(b=q.text.slice(b);(q=q.nextLine())&&++e<l;)b+=vd.newline+q.text;return b+vd.newline+this.getLineString(l).slice(0,p)}},{key:"setTextInRange",value:function(b,e){this.remove(e);return this.insertText(b,e.start,!1)}},{key:"indexToPosition",value:function(b){0>b&&(b=0);b=this.root.findLineWithTextIndex(b,
0);return{row:b.row,column:b.column}}},{key:"positionToIndex",value:function(b){var e=b.column,l=this.getLine(b.row);e=Math.max(0,Math.min(e,l.stringSize-1));for(b=l.parent;b;){l=b.children.indexOf(l);l=b.children.slice(0,l);for(var p=0;p<l.length;p++)e+=l[p].stringSize;l=b;b=b.parent}return e}},{key:"insertTextAndAttributes",value:function(b,e,l){l=void 0===l?!1:l;if(!b||!b.length||2===b.length&&!b[0])return{start:e,end:e};l&&!l.debugDocumentUpdate&&(l=!1);l&&!l.log&&(l=console);var p=e.row;e=e.column;
0>p&&(p=0);0>e&&(e=0);var q=this.getLine(p);b=vd.splitTextAndAttributesIntoLines(b,vd.newline);l&&(l.log||(l={log:console.log.bind(console),dump:console.log.bind(console)}));if(!q)return p=this.insertLines(b.map(function(S){return new vd.Line({parent:null,width:0,height:0,textAndAttributes:S})})),l&&l.log("insert "+p.length+" lines into empty text"),{start:{row:0,column:0},end:{row:p.length,column:vd.arr.last(p).text.length}};if(p>=this.rowCount){var u=this.endPosition;l&&l.log("insertion after doc end, "+
p+"/"+e+", inserting "+(p-u.row)+" rows");for(e=0;e<p-u.row;e++)b.unshift(["",null]);p=u.row;e=u.column}if(1===b.length&&""===b[0][0])return l&&l.log("insert just newline at "+p+"/"+e),p=this.splitLineAt({row:p,column:e}),l&&l.dump(""+this.root.print(!1)),p;var w=b.shift(),y=b.length;u={row:p,column:e};var A=q.stringSize-1;e>A&&(l&&l.log("filling up insertion column at "+p+"/"+e+": "+(e-A)),A=" ".repeat(e-A),w.length?"string"===typeof w[0]?w[0]=A+w[0]:w.unshift(A,null):w.push(A,null));A=$jscomp.makeIterator(vd.splitTextAndAttributesAt(q.textAndAttributes,
e));var C=A.next().value;A=A.next().value;""===C[0]&&(C=[]);C=vd.concatTextAndAttributes(C,w,!0);if(0===y){for(var D=0,L=0;L<w.length;L+=2){var I=w[L];D+="string"===typeof I?I.length:1}u.column=e+D;vd.concatTextAndAttributes(C,A,!0)}q.changeTextAndAttributes(C);if(0===y)return l&&(l.log("single line inserted at "+p+"/"+e),l&&l.dump(""+this.root.print(!1))),{start:{row:p,column:e},end:u};q=b[y-1];for(C=w=0;C<q.length;C+=2)D=q[C],w+="string"===typeof D?D.length:1;u.row+=y;u.column=w;b=this.insertLines(b.map(function(S){return new vd.Line({parent:null,
width:0,height:0,textAndAttributes:S})}),p+1);y=vd.arr.last(b);y.changeTextAndAttributes(vd.concatTextAndAttributes(y.textAndAttributes,A,!0));l&&(l.log(b.length+" inserted at "+p+"/"+e),l&&l.dump(""+this.root.print(!1)));return{start:{row:p,column:e},end:u}}},{key:"insertText",value:function(b,e,l){l=void 0===l?!1:l;if(!b)return{start:e,end:e};var p=e.row;e=e.column;0>p&&(p=0);0>e&&(e=0);var q=this.getLine(p);if(!q)return p=this.insertLines(b.split(vd.newline)),{start:{row:0,column:0},end:{row:p.length,
column:vd.arr.last(p).text.length}};p>=this.rowCount&&(e=this.endPosition,b="\n".repeat(p-e.row)+b,p=e.row,e=e.column);var u=b.split(vd.newline),w=u.shift(),y=u.length;b={row:p,column:e};var A=q.stringSize-1;e>A&&(w=" ".repeat(e-A)+w);A=$jscomp.makeIterator(vd.splitTextAndAttributesAt(q.textAndAttributes,e));var C=A.next().value;A=A.next().value;""===C[0]&&(C=[]);l=vd.concatTextAndAttributes(C,[w,l&&C.length?C[C.length-1]:null],!0);0===y&&(b.column=e+w.length,vd.concatTextAndAttributes(l,A,!0));q.changeTextAndAttributes(l);
if(0===y)return{start:{row:p,column:e},end:b};b.row+=y;b.column=u[y-1].length;l=this.insertLines(u,p+1);l=vd.arr.last(l);l.changeTextAndAttributes(vd.concatTextAndAttributes(l.textAndAttributes,A,!0));return{start:{row:p,column:e},end:b}}},{key:"remove",value:function(b,e){e=void 0===e?!1:e;if(0!==this.rowCount){var l=b.start,p=b.end;if(l.row!==p.row||l.column!==p.column){vd.lessPosition(p,l)&&(p=$jscomp.makeIterator([p,l]),l=p.next().value,p=p.next().value);var q=this.endPosition;if(!vd.lessEqPosition(q,
l)){var u=vd.maxPosition(l,{column:0,row:0});l=u.row;u=u.column;q=vd.minPosition(p,q);p=q.row;var w=q.column;0>u&&(u=0);0>w&&(w=0);e&&!e.debugDocumentUpdate&&(e=!1);e&&(e.log||(e={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),e.group("document.remove "+JSON.stringify(b)),e.log("[text doc] removing "+l+"/"+u+" => "+p+"/"+w));var y=this.getLine(l);b=y;q=[y];for(var A=0;A<p-l;A++)q.push(y=y.nextLine());y=q[q.length-
1];u=$jscomp.makeIterator(vd.splitTextAndAttributesAt(b.textAndAttributes,u)).next().value;w=$jscomp.makeIterator(vd.splitTextAndAttributesAt(y.textAndAttributes,w));w.next();w=w.next().value;b.changeTextAndAttributes(vd.concatTextAndAttributes(u,w,!0));e&&e.log('[text doc removal] what remains of start/end line: "'+b.textAndAttributes+'"');1<q.length&&this.removeLines(l+1,p,e);e&&e.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(b){var e=b.row;b=b.column;var l=this.getLine(e),
p=$jscomp.makeIterator(vd.splitTextAndAttributesAt(l.textAndAttributes,b)),q=p.next().value;p=p.next().value;l.changeTextAndAttributes(q);l=new vd.Line({parent:null,width:0,height:0,textAndAttributes:p});this.insertLines([l],e+1);return{start:{row:e,column:b},end:{row:e+1,column:0}}}},{key:"replace",value:function(b,e,l){var p=b.start;b=b.end;if(!e.length)return this.remove({start:p,end:b},l),{removed:{start:p,end:b},inserted:{start:p,end:p}};var q=this.clipPositionToLines(p),u=this.clipPositionToLines(b);
q.row===u.row&&this.remove({start:q,end:u},l);if(q.row===u.row||vd.lessEqPosition(this.endPosition,p)){var w;"string"===typeof e?e.length&&(w=e.length&&this.insertText(e,p)):e.length&&(2!==e.length||e[0])&&(w=this.insertTextAndAttributes(e,p,l));w||(w={start:q,end:q});return{removed:{start:p,end:b},inserted:w}}p=q;b=u;l=p;w=l.row;u=l.column;q=b.row;if("string"===typeof e){l=[];e=e.split(vd.newline);for(var y=0;y<e.length;y++)l.push([e[y],null])}else l=vd.splitTextAndAttributesIntoLines(e,vd.newline);
var A=!l.length||1===l.length&&(!l[0].length||!l[0][0].length);A&&(l=[]);var C=e=this.getLine(w);y=this.getLine(q);u=$jscomp.makeIterator(vd.splitTextAndAttributesAt(C.textAndAttributes,u));var D=u.next().value;u.next();for(C.changeTextAndAttributes(A?D:vd.concatTextAndAttributes(D,l.shift(),!0));l.length;){e=e.nextLine();w++;if(e===y)break;e.changeTextAndAttributes(l.shift())}if(!l.length)return l=e.stringSize-1,this.remove({start:{row:w,column:e.stringSize},end:b}),{removed:{start:p,end:b},inserted:{start:p,
end:{row:w,column:l}}};console.assert(w==q,"not end row");console.assert(e.row==w,"row != last line.row");this.remove({start:{row:w,column:0},end:b});q=[];e=l.length;for(u=0;u<e-1;u++)y=l[u],y.length||(y=["",null]),"string"===typeof y[y.length-2]?y[y.length-2]+=vd.newline:y.push(vd.newline,null),q.push.apply(q,$jscomp.arrayFromIterable(y));q.push.apply(q,$jscomp.arrayFromIterable(l[e-1]));l=this.insertTextAndAttributes(q,{row:w,column:0}).end;return{removed:{start:p,end:b},inserted:{start:p,end:l}}}},
{key:"wordsOfLine",value:function(b){for(var e=this.getLineString(b),l=[],p,q=0;q<e.length;q++)/[^a-z0-9_]/i.test(e[q])?p&&(p.range.end.column=q,l.push(p),p=null):(p=p||{index:l.length,string:"",range:{start:{row:b,column:q},end:{row:b,column:q}}},p.string+=e[q]);p&&(p.range.end.column=q,l.push(p));return l}},{key:"wordAt",value:function(b,e){var l=b.row,p=b.column;e=void 0===e?this.wordsOfLine(l):e;return e.find(function(q){q=q.range;var u=q.end.column;return q.start.column<=p&&p<=u})||{range:{start:{column:p,
row:l},end:{column:p,row:l}},string:""}}},{key:"wordLeft",value:function(b){var e=b.row,l=b.column,p=this.wordsOfLine(e);if(!p.length||vd.lessEqPosition(b,p[0].range.start)){for(;0<=--e;)if(p=this.wordsOfLine(e),p.length)return vd.arr.last(p);return{range:{start:b,end:b},string:""}}e=this.wordAt(b);return e.string?vd.eqPosition(e.range.start,b)?p[e.index-1]:e:p.slice().reverse().find(function(q){return q.range.end.column<=l})||{range:{start:b,end:b},string:""}}},{key:"wordRight",value:function(b){var e=
b.column,l=b.row,p=this.wordsOfLine(b.row);if(!p.length||vd.lessEqPosition(vd.arr.last(p).range.end,b)){for(;++l<this.lines.length;)if(p=this.wordsOfLine(l),p.length)return p[0];return{range:{start:b,end:b},string:""}}l=this.wordAt(b);return l.string?vd.eqPosition(l.range.end,b)?p[l.index+1]:l:p.find(function(q){return q.range.start.column>=e})||{range:{start:b,end:b},string:""}}},{key:"scanForward",value:function(b,e){var l=b.row,p=b.column;b=this.getLine(l);for(var q=b.text;p<b.stringSize-1;p++){var u=
e(q[p],{row:l,column:p});if(u)return u}for(;b=b.nextLine();)for(l++,q=b.text,p=0;p<b.stringSize-1;p++)if(u=e(q[p],{row:l,column:p}))return u;return null}},{key:"scanBackward",value:function(b,e){var l=b.row,p=b.column;b=this.getLine(l);var q=b.text;for(--p;0<=p;p--){var u=e(q[p],{row:l,column:p});if(u)return u}for(;b=b.prevLine();)for(l--,q=b.text,p=b.stringSize-2;0<=p;p--)if(u=e(q[p],{row:l,column:p}))return u;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),
this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var b=[],e=this.rowCount,l=this.stringSize,p=this.lines,q=this.textString,u=this.root;e!==p.length&&b.push({error:"document "+this+" row count: "+e+" !== "+p.length});q.length!==l&&b.push({error:"document "+this+" textString.length vs stringSize: "+q.length+" !== "+l});b.push.apply(b,$jscomp.arrayFromIterable(u.consistencyCheck()));e=0;for(l=p[0];l;)l!=p[e]&&b.push({error:"line iteration at "+
e+" is broken: nextLine() of "+p[e-1]+" is not "+p[e]+"!"}),e++,l=l.nextLine();p[e]&&b.push({error:"nextLine() of\n  "+p[e-1]+"\nis nullish but \n  "+p[e]+"\nexists in tree!"});if(b.length)throw Error("Consistency check of document revealed "+b.length+" error"+(1<b.length?"s":"")+":\n"+b.map(function(w){return w.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var b=System.decanonicalize("lively.lang/text-graphics.js"),
e=(System.get(b)||{}).printTree;return e?e(this.root,function(l){return l.toString()},function(l){return l.children},{padding:[2,1,2,1]}):(lively.module.module(b).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(l){return console.error(l)}),"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return vd.documentFuzzier.run()}},
{key:"newline",get:function(){return vd.newline}},{key:"fromString",value:function(b,e){return new this(b.split(vd.newline),e)}}],d,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),coa=d6=vd.Document;vd.default=d6;var Um=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");
Um.lessPosition=pp;Um.lessEqPosition=lx;Um.eqPosition=qp;var cy=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),k=d.hasOwnProperty("Anchor")&&"function"===typeof d.Anchor?d.Anchor:d.Anchor=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){e=void 0===e?{column:0,row:0}:e;this.id=b||""+(this.constructor._id=
(this.constructor._id||0)+1);this.position=e;this.insertBehavior=void 0===l?"move":l}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(b){if(Um.lessEqPosition(this.position,b.start))return!1;if(Um.lessEqPosition(b.start,this.position)&&Um.lessEqPosition(this.position,b.end))return this.position=b.start,!0;var e=this.position,l=e.column,p=b.start,q=p.column,u=b.end;b=u.row;u=u.column;this.position={column:b!==this.position.row?l:q===u?l-(u-q):q+(l-u),row:e.row-(b-p.row)};return!0}},
{key:"onInsert",value:function(b){if(Um.lessPosition(this.position,b.start)||Um.eqPosition(this.position,b.start)&&"stay"===this.insertBehavior)return!1;var e=this.position,l=b.start,p=l.row;l=l.column;b=b.end;var q=b.column;this.position={column:e.column+(p!==this.position.row?0:q-l),row:e.row+(b.row-p)};return!0}},{key:"equalsPosition",value:function(b){return b?b.isAnchor?Um.eqPosition(this.position,b.position):Um.eqPosition(this.position,b):!1}},{key:"toString",value:function(){var b=this.position;
return"Anchor("+this.id+" "+b.row+"/"+b.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],d,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82,end:3025})}(void 0);Um.Anchor=cy;Um.Anchor=cy;Um.Anchor=cy;var doa=Object.freeze({__proto__:null,Anchor:cy}),
lf=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");lf.pt=kh;lf.Color=qf;lf.connect=Mj;lf.once=cq;lf.disconnect=So;lf.Path=Sg;lf.morph=Zi;lf.GridLayout=js;lf.config=rk;lf.Morph=Vi;lf.lessPosition=pp;lf.minPosition=mx;lf.maxPosition=nx;lf.Icon=Ql;var BJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),k=d.hasOwnProperty("TextSearcher")&&"function"===typeof d.TextSearcher?d.TextSearcher:d.TextSearcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(b,e){var l=this.doc.positionToIndex(b);l=this.doc.indexToPosition(l+e.length);return{range:{start:b,end:l},match:e}}},{key:"stringSearch",value:function(b,e,l,p,q,u,w){if(q&&(lf.lessPosition(w,q.start)||lf.lessPosition(q.end,w)))return this.STOP;
l||(u=u.toLowerCase());if(u!==e[0])return null;q=w.row;w=w.column;u=b[q];b=1>=p?"":"\n"+b.slice(q+1,q+1+(p-1)).join("\n");b=u.slice(w)+b;return 0!==(l?b:b.toLowerCase()).indexOf(e)?null:this.processFind({row:q,column:w},b.slice(0,e.length))}},{key:"reSearch",value:function(b,e,l,p,q,u){if(p&&(lf.lessPosition(u,p.start)||lf.lessPosition(p.end,u)))return this.STOP;p=u.row;u=u.column;return(b=(b[p].slice(u)+(l?"\n"+b.slice(p+1).join("\n"):"")).match(e))?this.processFind({row:p,column:u},b[0]):null}},
{key:"search",value:function(b){var e=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},b);b=e.start;var l=e.needle,p=e.backwards,q=e.caseSensitive;e=e.inRange;if(!l)return null;e&&(b=p?lf.minPosition(e.end,b):lf.maxPosition(e.start,b));if(l instanceof RegExp){var u=(l.flags||"").split(""),w=!!l.multiline;u.splice(u.indexOf("m"),1);q||u.includes("i")||u.push("i");l=new RegExp("^"+l.source.replace(/^\^+/,""),u.join(""));l=this.reSearch.bind(this,this.doc.lineStrings,
l,w,e)}else l=String(l),q||(l=l.toLowerCase()),u=l.split(this.doc.constructor.newline).length,l=this.stringSearch.bind(this,this.doc.lineStrings,l,q,u,e);b=this.doc[p?"scanBackward":"scanForward"](b,l);return b===this.STOP?null:b}},{key:"searchForAll",value:function(b){for(var e=[],l=0;;){if(1E4<l++)throw Error("endless loop");var p=this.search(b);if(!p)return e;e.push(p);b=Object.assign({},b,{start:b.backwards?p.range.start:p.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],
d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);lf.TextSearcher=BJ;lf.TextSearcher=BJ;lf.TextSearcher=BJ;var PR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),k=d.hasOwnProperty("SearchWidget")&&"function"===typeof d.SearchWidget?
d.SearchWidget:d.SearchWidget=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=this;b=void 0===b?{}:b;b.targetText&&(b.target=b.targetText);if(!b.target)throw Error("SearchWidget needs a target text morph!");Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);b=this.getSubmorphNamed("replaceButton");
var l=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var p=this.getSubmorphNamed("searchInput"),q=this.getSubmorphNamed("prevButton"),u=this.getSubmorphNamed("nextButton"),w=this.getSubmorphNamed("cancelButton"),y=this.getSubmorphNamed("acceptButton");lf.connect(y,"fire",this,"execCommand",{converter:function(){return"accept search"}});lf.connect(w,"fire",this,"execCommand",{converter:function(){return"cancel search and reset cursor in text"}});lf.connect(u,"fire",
this,"execCommand",{converter:function(){return"search next"}});lf.connect(q,"fire",this,"execCommand",{converter:function(){return"search prev"}});lf.connect(p,"inputChanged",this,"search");lf.connect(b,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});lf.connect(l,"fire",this,"execCommand",{converter:function(){return"replace all"}});this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};p.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){e.target.execCommand("realign top-bottom-center");
e.addSearchMarkersForPreview(e.state.inProgress&&e.state.inProgress.found,!1);return A.return(!0)})}}])}},{key:"focus",value:function(){var b=this;this.get("searchInput").focus();this.whenRendered().then(function(){return b.get("searchInput").invalidateTextLayout(!0,!0)})}},{key:"onBlur",value:function(b){var e=this,l=this.world();l&&setTimeout(function(){var p=l.focusedMorph;e.withAllSubmorphsDetect(function(q){return q.isFocused()})?e.get("searchInput")!=p&&e.get("replaceInput")!=p&&e.get("searchInput").focus():
e.cancelSearch(!1)})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(b){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();this.removeTextMap();if(this.state.before&&b){b=this.state.before;var e=b.scroll;this.target.selection=b.selectionRange;this.target.scroll=e;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&
(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(b){if(!b||!b.found)return null;var e=this.target,l=e.selection,p=!!e.activeMark||!l.isEmpty(),q=b.found.range,u=q.start;q=q.end;u=b.backwards?u:q;p?l.lead=u:e.cursorPosition=
u;e.isLineFullyVisible(u.row)||e.centerRow();return b}},{key:"removeSearchMarkers",value:function(){var b=this;(this.target.markers||[]).forEach(function(e){e=e.id;return e.startsWith("search-highlight")&&b.target.removeMarker(e)})}},{key:"addSearchMarkers",value:function(b,e,l){l=void 0===l?!1:l;this.removeSearchMarkers();e=this.target;var p=this.textMap,q=e.whatsVisible,u=q.startRow;q=q.endRow;var w=e.document.lineStrings,y=0,A=lf.config.codeEditor.search,C=A.maxCharsPerLine;A=A.fastHighlightLineCount;
p&&3<=b.match.length&&w.length<A&&(u=0,q=w.length-1);A=!1;for(var D=window.performance.now();u<=q&&!A;u++)for(var L=w[u]||"",I=0;I<Math.min(L.length,C);I++){if(300<window.performance.now()-D){A=!0;break}if(l?0===L.slice(I).indexOf(b.match):0===L.slice(I).toLowerCase().indexOf(b.match.toLowerCase()))e.addMarker({id:"search-highlight-"+y++,range:{start:{row:u,column:I},end:{row:u,column:I+b.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)",
"pointer-events":"none"}}),I+=b.match.length}this.state.backwards?(l=b.range.start,b=l.row,l=l.column,b={start:{row:b,column:l},end:{row:b,column:l+1}}):(l=b.range.end,b=l.row,l=l.column,b={start:{row:b,column:l-1},end:{row:b,column:l}});l={};e.addMarker({id:"search-highlight-cursor",range:b,style:(l["pointer-events"]="none",l["box-sizing"]="border-box",l[this.state.backwards?"border-left":"border-right"]="3px red solid",l)});p&&p.update()}},{key:"addSearchMarkersForPreview",value:function(b,e){e=
void 0===e?!0:e;b&&(this.addSearchMarkers(b),e&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var b=this.target,e=this.state,l=b.world();if(l){this.openInWorld(l.visibleBounds().center(),l);this.topRight=b.globalBounds().insetBy(5).topRight();if(b.getWindow())lf.once(b.getWindow(),"remove",this,"remove");l=this.get("searchInput");var p=b.scroll;b=b.selection;e.position=b.lead;e.before={scroll:p,position:b.lead,selectionRange:b.range,selectionReverse:b.isReverse()};
e.last&&e.last.found&&(lf.disconnect(l,"inputChanged",this,"search"),this.input=e.last.needle,lf.connect(l,"inputChanged",this,"search"),this.addSearchMarkersForPreview(e.last.found));this.focus();l.selectAll()}}},{key:"advance",value:function(b){var e=this.state.inProgress;if(e&&e.found){var l=e.found.range;e=l.start;l=l.end;this.state.position=b!==this.state.backwards?b?l:e:b?e:l}this.state.backwards=b;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",
value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var b=this.state,e=b.backwards,l={backwards:e,start:b.position};b=this.target.search(this.input,l);l=this.state.inProgress=Object.assign({},l,{needle:this.input,found:b});this.applySearchResult(l);b?this.addSearchMarkers(b,e):this.cleanup();return l}},{key:"showTextMap",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(System.import("lively.morphic/text/map.js"),
2);e=b.textMap=lf.morph({type:"textmap"});e.attachTo(b.target);e.isLayoutable=!1;b.addMorph(e);e.topRight=b.innerBounds().bottomRight().addXY(0,5);e.height=b.target.height-b.height-15;e.update();b.renderOnGPU=!0;return l.return(e)})}},{key:"removeTextMap",value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"search next or replace and go to next"},{keys:"Alt-Enter",command:"only search prev"},
{keys:"Tab",command:"change focus"},{keys:{mac:"Ctrl-O",win:"Alt-O"},command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var b=this;return[{name:"occur with search term",exec:function(){var e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==
p.nextAddress)return p.yield(System.import("lively.morphic/text/occur.js"),2);e=p.yieldResult;l=e.occurStartCommand;b.target.addCommands([l]);b.execCommand("accept search");return p.return(b.target.execCommand("occur",{needle:b.input}))})}},{name:"accept search",exec:function(){b.acceptSearch();return!0}},{name:"cancel search and reset cursor in text",exec:function(){b.cancelSearch(!0);return!0}},{name:"cancel search",exec:function(){b.cancelSearch(!1);return!0}},{name:"search next",exec:function(){b.searchNext();
return!0}},{name:"search prev",exec:function(){b.searchPrev();return!0}},{name:"only search prev",exec:function(){if(b.get("searchInput").isFocused())return b.searchPrev(),!0}},{name:"search next or replace and go to next",exec:function(e,l,p){b.get("searchInput").acceptInput();return b.execCommand(b.get("replaceInput").isFocused()?"replace and go to next":"search next",l,p)}},{name:"replace current search location with replace input",exec:function(){var e=lf.Path("state.inProgress").get(b);if(e.found){var l=
b.get("replaceInput").textString;b.get("replaceInput").get("replaceInput").acceptInput();e.needle instanceof RegExp&&(l=e.found.match.replace(e.needle,l));b.target.replace(e.found.range,l)}return!0}},{name:"replace and go to next",exec:function(){b.execCommand("replace current search location with replace input");b.execCommand(b.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var e=lf.Path("state.inProgress").get(b);if(e.found){e=Object.assign({},e,{start:{row:0,
column:0}});var l=b.get("replaceInput").textString;b.get("replaceInput").get("replaceInput").acceptInput();var p=(new lf.TextSearcher(b.target)).searchForAll(e);b.target.undoManager.group();p.forEach(function(q){var u=q.range;q=q.match;e.needle instanceof RegExp&&(l=q.replace(e.needle,l));b.target.replace(u,l,!0,!0,!1)});b.target.undoManager.group();b.acceptSearch()}return!0}},{name:"change focus",exec:function(){b.get("searchInput").isFocused()?b.get("replaceInput").focus():b.get("searchInput").focus();
return!0}},{name:"yank next word from text",exec:function(){var e=b.target,l=e.wordRight(),p=b.get("searchInput");p.selection.isEmpty()||(p.selection.text="");e=e.textInRange({start:e.cursorPosition,end:l.range.end});p.textString+=e;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:lf.Color.gray},borderRadius:{defaultValue:3},
fill:{defaultValue:lf.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var b=this.get("searchInput").textString,e=b.match(/^\/(.*)\/([a-z]*)$/);return e?new RegExp(e[1],e[2]):b},set:function(b){this.get("searchInput").textString=String(b)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(b){this.get("replaceInput").fontSize=
b}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(b){this.get("searchInput").fontFamily=b;this.get("replaceInput").fontFamily=b}},layout:{initialize:function(){this.layout=new lf.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},
2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[lf.morph({type:"button",name:"acceptButton",label:lf.Icon.textAttribute("check-circle")}).fit(),lf.morph({type:"button",name:"cancelButton",label:lf.Icon.textAttribute("times-circle")}).fit(),
lf.morph({type:"button",name:"nextButton",label:lf.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),lf.morph({type:"button",name:"prevButton",label:lf.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),lf.morph({type:"input",name:"searchInput",placeholder:"search input",historyId:"lively.morphic-text search"}),lf.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),lf.morph({type:"button",
styleClasses:["replace"],name:"replaceButton",label:"replace"}),lf.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];lf.connect(this.get("searchInput"),"onBlur",this,"onBlur");lf.connect(this.get("replaceInput"),"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],d,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21677})}(lf.Morph);lf.SearchWidget=PR;lf.SearchWidget=PR;lf.SearchWidget=PR;var CJ=[{name:"search in text",exec:function(a,d){d=void 0===d?{backwards:!1}:d;a=a._searchWidget||(a._searchWidget=new lf.SearchWidget({target:a,extent:lf.pt(300,20)}));a.state.backwards=d.backwards;a.prepareForNewSearch();lf.config.codeEditor.search.showTextMap&&a.showTextMap();return!0}}];lf.searchCommands=CJ;lf.searchCommands=CJ;lf.searchCommands=
CJ;var Ij=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");Ij.todo=function(a){throw Error("not yet implemented "+a);};Ij.Rectangle=Qd;Ij.rect=zk;Ij.pt=kh;Ij.arr=Ne;Ij.Range=Ds;var e6=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),k=d.hasOwnProperty("TextLayout")&&"function"===typeof d.TextLayout?d.TextLayout:d.TextLayout=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(b,e){var l=function(u){var w=0;return Ij.arr.flatten(Ij.arr.histogram(u,u.length/3).map(function(y){var A=$jscomp.makeIterator(y);y=A.next().value;var C=A.next().value;A=A.next().value;for(var D=[],L=0;L<y;L++)D.push(Ij.rect(w,0,C,A)),w+=C;return D}))};b=$jscomp.makeIterator(b);for(var p=b.next();!p.done;p=b.next()){var q=
$jscomp.makeIterator(p.value);p=q.next().value;q=q.next().value;q=l(q);this.lineCharBoundsCache.set(e.document.getLine(p),q)}}},{key:"resetLineCharBoundsCache",value:function(b){this.lineCharBoundsCache=new WeakMap;b&&!b._isDeserializing&&(this.estimateLineHeights(b),b.makeDirty())}},{key:"resetLineCharBoundsCacheOfLine",value:function(b){b&&this.lineCharBoundsCache.set(b,null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(b,e){var l=b.document;b._isDeserializing&&b._initializedByCachedBounds||
l&&this.resetLineCharBoundsCacheOfLine(l.getLine(e))}},{key:"resetLineCharBoundsCacheOfRange",value:function(b,e){for(var l=e.start.row;l<=e.end.row;l++)this.resetLineCharBoundsCacheOfRow(b,l)}},{key:"estimateLineHeightsInRange",value:function(b,e){for(var l=b.document,p=b.getGlobalTransform(),q=e.start.row;q<=e.end.row;q++)this.resetLineCharBoundsCacheOfRow(b,l.getLine(q),p)}},{key:"estimateExtentOfLine",value:function(b,e,l){l=void 0===l?b.getGlobalTransform():l;var p=b.fontMetric,q=b.lineWrapping,
u=b.padding,w=b.textRenderer,y=b.debug,A=b.defaultTextStyle,C=b.getProperty("extent").x,D=u.left(),L=u.right(),I=u.top();u=u.bottom();w=w.directRenderTextLayerFn(b);var S=e.textAndAttributes,V=[],ba;C=C-D-L;if(S&&S.length)for(var ua=0,Fa=0;ua<S.length;ua+=2)(ba=S[ua])&&ba.isMorph?(ba.position=this.pixelPositionFor(b,{row:e.row,column:Fa}).subPt(b.origin),Fa++):ba&&(Fa+=ba.length),V.push(Object.assign({},A,{},S[ua+1]));else V.push(A);S=V.length;for(ua=A=ba=0;ua<S;ua++){Fa=p.defaultCharExtent(b,{defaultTextStyle:V[ua],
width:1E3,transform:l,paddingBottom:u,paddingTop:I,paddingRight:L,paddingLeft:D},w);var F=Fa.width;A=Math.max(Fa.height,A);ba+=F}b=A;l=e.text.length||1;p=Math.round(ba/S);D=l*p;D=q?Math.min(D,C):D;q&&(b=Math.round((Math.ceil(l/Math.max(3,C/p))||1)*A));y&&console.log(e.row+": "+e.height+" => "+b);e.changeExtent(D,b,!0)}},{key:"estimateLineHeights",value:function(b,e){var l=b.fontMetric,p=b.textRenderer,q=b.document,u=b.defaultTextStyle,w=b.clipMode,y=b.textAlign,A=b.padding,C=b.lineWrapping,D=b.debug,
L=b.getProperty("extent"),I=L.x,S=L.y;L=b.getGlobalTransform();var V=A.left(),ba=A.right(),ua=A.top();A=A.bottom();q=q.lines;var Fa=p.directRenderTextLayerFn(b);D&&(D=b.debugHelper(D),D.debugTextLayout||(D=!1));if(!D&&10>b.lineCount()&&3E3>b.document.stringSize&&!Ij.arr.any(b.textAndAttributes,function(F){return F&&void 0!=F.fontFamily}))for(e=p.directRenderLineFn(b),e=l.manuallyComputeBoundsOfLines(b,q,0,0,{defaultTextStyle:u,width:I,height:S,clipMode:w,lineWrapping:C,textAlign:y,transform:L,paddingLeft:V,
paddingRight:ba,paddingTop:ua,paddingBottom:A},Fa,e),u=0;u<q.length;u++)D=e[u],q[u].changeExtent(D.width,D.height,!l.isFontSupported(b.fontFamily,b.fontWeight));else{for(u=l=0;u<q.length;u++)w=q[u],!e&&0<w.height||(l++,this.estimateExtentOfLine(b,w,L));b.viewState._textLayoutStale=!1;D&&D.log("estimateLineHeights, "+l+"/"+q.length+" updated, force: "+e)}}},{key:"defaultCharExtent",value:function(b){var e=b.textRenderer,l=b.fontMetric,p=b.defaultTextStyle,q=b.getGlobalTransform();e=e.directRenderTextLayerFn(b);
return l.defaultCharExtent(b,{transform:q,defaultTextStyle:p,width:1E3},e)}},{key:"textBounds",value:function(b){var e=b.document,l=b.padding,p=b.borderWidthLeft,q=b.borderWidthRight,u=b.borderWidthTop;b=b.borderWidthBottom;return new Ij.Rectangle(l.left(),l.top(),Math.round(e.width+p+q),Math.round(e.height+u+b))}},{key:"isFirstLineVisible",value:function(b){return 0>=b.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(b){return b.viewState.lastVisibleRow>=b.lineCount()-1}},{key:"isLineVisible",
value:function(b,e){return e>=b.viewState.firstVisibleRow&&e<=b.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(b,e){return e>=b.viewState.firstFullyVisibleRow&&e<=b.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(b){var e=b.viewState.firstVisibleRow,l=b.viewState.lastVisibleRow;return{lines:b.document.lines.slice(e,l),startRow:e,endRow:l}}},{key:"firstFullVisibleLine",value:function(b){return b.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(b){return b.viewState.lastFullyVisibleRow}},
{key:"screenLineRange",value:function(b,e,l){var p=e.row,q=e.column;q=Math.max(0,q);p=Math.min(b.lineCount()-1,Math.max(0,p));var u=this.charBoundsOfRow(b,p);q>u.length-1&&(q=u.length-1);for(var w=u[q],y=e=q,A=q+1;A<u.length&&!(u[A].y>w.y+w.height);A++)y=A;y===u.length-1&&y++;for(A=q-1;0<=A&&!(u[A].y<w.y+w.height);A--)e=A;l&&(b=b.getLine(p).slice(e,y).match(/^\s*/)[0].length,e+=b);return new Ij.Range({start:{row:p,column:e},end:{row:p,column:y}})}},{key:"rangesOfWrappedLine",value:function(b,e){for(var l=
b.getLine(e).length,p=0,q=[];;){var u=this.screenLineRange(b,{row:e,column:p},!1);q.push(u);if(u.end.column>=l)break;var w=u.end.column+1;if(w>=l)break;if(w<=p){if(!b.env.renderer.getNodeForMorph(b))break;throw Error("should not happen "+u.end.column+" vs "+p);}p=w}return q}},{key:"chunkAtPos",value:function(b,e){Ij.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(b,e){e=b.document.getLine(e);b._initializedByCachedBounds&&!this._restored&&(this.restore(b._initializedByCachedBounds,b),this._restored=
!0);var l=this.lineCharBoundsCache.get(e);if(l)return l;var p=b.getProperty("extent");l=p.x;p=p.y;var q=b.fontMetric,u=b.textRenderer,w=b.defaultTextStyle,y=b.clipMode,A=b.textAlign,C=b.padding,D=b.lineWrapping,L=b.getGlobalTransform(),I=C.left(),S=C.right(),V=C.top();C=C.bottom();var ba=u.directRenderLineFn(b);u=u.directRenderTextLayerFn(b);b=q.manuallyComputeCharBoundsOfLine(b,e,0,0,{defaultTextStyle:w,width:l,height:p,clipMode:y,lineWrapping:D,textAlign:A,paddingLeft:I,paddingRight:S,paddingTop:V,
paddingBottom:C,transform:L},u,ba);if(b.find(function(ua){return void 0==ua.width&&void 0==ua.height}))return b;this.lineCharBoundsCache.set(e,b);return b}},{key:"computeMaxBoundsForLineSelection",value:function(b,e){var l=e.start,p=e.end,q=b.textLayout,u=q.rangesOfWrappedLine(b,l.row).find(function(w){return w.containsPosition(l)});p=b.lineWrapping&&u?u.intersect(e).end:p;p=p.row==l.row?p:{row:p.row,column:-1};e=q.charBoundsOfRow(b,l.row);e=0>p.column?e.slice(l.column):e.slice(l.column,p.column+
1);p=l.column+(e?e.indexOf(Ij.arr.max(e,function(w){return w.height})):0);return q.boundsFor(b,{row:l.row,column:p})}},{key:"boundsFor",value:function(b,e){var l=e.row;e=e.column;e=Math.max(0,e);l=Math.min(b.lineCount()-1,Math.max(0,l));var p=this.charBoundsOfRow(b,l);if(0<p.length)if(e>=p.length){var q=p[p.length-1];q=new Ij.Rectangle(q.x+q.width,q.y,0,q.height)}else q=Ij.Rectangle.fromLiteral(p[e]);q||(console.warn("Cannot compute bounds for line "+l+"/"+e),q=new Ij.Rectangle(0,0,0,0));e=b.document;
b=b.padding;q.x+=b.left();q.y=q.y+e.computeVerticalOffsetOf(l)+b.top();return q}},{key:"pixelPositionFor",value:function(b,e){return this.boundsFor(b,e).topLeft()}},{key:"textPositionFromPoint",value:function(b,e){var l=e.addPt(b.origin),p=l.x,q=l.y,u=b.document;l=b.padding;var w=l.left(),y=l.top();if(q>u.height+y)return u.endPosition;if(q<y)return{row:0,column:0};l=u.findLineByVerticalOffset(q-y);if(!l)return{row:0,column:0};var A=l.line.row;b=this.charBoundsOfRow(b,A);var C=b.length,D=b[0],L=b[C-
1];l={row:A,column:0};p-=w;q-=y+u.computeVerticalOffsetOf(A);if(0===C||p<=D.x+Math.round(D.width/2)&&q>=D.y&&q<=D.y+D.height)return l;if(p>L.x+Math.round(L.width/2)&&q>=L.y&&q<=L.y+L.height)return l.column=C,l;w=[];for(u=C-1;0<=u;u--)if(L=y=b[u],A=L.x,C=L.width,D=L.y,L=L.height,!(q<D||q>D+L)&&(w.push(y),p>=A+Math.round(C/2)))return l.column=1===w.length?u:u+1,l;if(w.length)return l.column=b.indexOf(Ij.arr.last(w)),l;p=Infinity;q=-1;for(u=0;u<b.length;u++)w=b[u],w=e.distSquared(Ij.pt(w.x+w.width/2,
w.y+w.height/2)),w>=p||(p=w,q=u);l.column=q;return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],d,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17181})}(void 0),eoa=e6=Ij.TextLayout;Ij.default=e6;var Be=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");
Be.printViewState=function(a){var d=a.viewState,k=d.scrollTop,b=d.scrollHeight,e=d.textHeight,l=d.firstVisibleRow;d=d.lastVisibleRow;var p=a.document.lines;console.log(a+" #"+a.id.slice(0,12)+"\nscroll: "+k+" + "+b+"\nlines: "+l+" - "+d+"\nvisible lines: "+(d-l)+"\nheight: "+e+", "+p.length+" lines")};Be.installCSS=function(a){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return Be.cssInstalled=!0,k.yield(Be.waitFor(2E4,function(){return a.renderer&&a.renderer.domNode}),
2);d=k.yieldResult;Be.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
d.getRootNode());k.jumpToEnd()})};Be.extractHTMLFromTextMorph=TG;Be.obj=ff;Be.arr=Ne;Be.num=Gj;Be.pt=kh;Be.Rectangle=Qd;Be.vdom=gB;Be.defaultAttributes=qw;Be.defaultStyle=pw;Be.addOrChangeCSSDeclaration=Vo;Be.hyperscriptFnForDocument=VH;Be.objectReplacementChar="\ufffd";Be.config=rk;Be.getSvgVertices=ow;Be.waitFor=Us;var DJ=Be.vdom;Be.h=DJ.h;Be.create=DJ.create;Be.patch=DJ.patch;Be.diff=DJ.diff;Be.cssInstalled=!1;Be.debug=!!Be.config.onloadURLQuery["debug-text"];Be.nextTick=function(a,d,k,b,e,l){for(;!e&&
k<d.length;)e=a[d[k++]+"equestAnimationFrame"];return e&&e.bind(a)||a.setImmediate||function(p){a.setTimeout(p,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),k=d.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof d.AfterTextRenderHook?d.AfterTextRenderHook:d.AfterTextRenderHook=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:"reset",value:function(b){this.morph=b;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(b,e,l){if(0===e.height||e.hasEstimatedExtent){var p=b.getGlobalTransform().inverse();p.e=p.f=0;var q=1!=p.getScale()||0!=p.getRotation();q&&(l.style.transform=p.toString());var u=l.getBoundingClientRect();p=u.height;u=u.width;q&&(l.style.transform="");p&&u&&(e.height!==p||e.width!==u)&&b.fontMetric.isFontSupported(b.fontFamily,b.fontWeight)&&(e.changeExtent(u,
p,!1),b.textLayout.resetLineCharBoundsCacheOfLine(e),this.needsRerender=!0,b.viewState._needsFit=!0);if(e.textAndAttributes&&e.textAndAttributes.length)for(u=q=0;q<e.textAndAttributes.length;q+=2)(l=e.textAndAttributes[q])&&l.isMorph?(b._positioningSubmorph=l,l.position=b.textLayout.pixelPositionFor(b,{row:e.row,column:u}).subPt(b.origin),l._dirty=!1,b._positioningSubmorph=null,u++):l&&(u+=l.length);return p}return e.height}},{key:"updateExtentsOfLines",value:function(b){var e=this.morph,l=e.viewState,
p=e.fontMetric;l.dom_nodes=[];l.dom_nodeFirstRow=0;l.textWidth=b.scrollWidth;b=b.children;for(var q=0,u;q<b.length&&"line"!=b[q].className;)q++;if(q<b.length){u=b[q];var w=u.dataset;w=Number(w?w.row:u.getAttribute("data-row"));if("number"===typeof w&&!isNaN(w)){l.dom_nodeFirstRow=w;u=0;w=e.document.getLine(w);for(var y;q<b.length;q++){var A=b[q];l.dom_nodes.push(A);w&&(y||(y=w.hasEstimatedExtent),w.hasEstimatedExtent=y,u+=this.updateLineHeightOfNode(e,w,A),w.hasEstimatedExtent=!p.isFontSupported(e.fontFamily,
e.fontWeight),w=w.nextLine())}this.needsRerender?(e.fitIfNeeded(),e.makeDirty()):e._dirty=!!e.submorphs.find(function(C){return C.needsRerender()})}}}},{key:"hook",value:function(b,e,l){b&&b.parentNode&&(e=this.morph.viewState,e.text_layer_node=b,e.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(b))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5104,end:9179})})(void 0);var f6=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),k=d.hasOwnProperty("TextRenderer")&&"function"===typeof d.TextRenderer?d.TextRenderer:d.TextRenderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,
a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b.domEnv?Be.cssInstalled||Be.installCSS(b):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=b.domEnv}},{key:"directRenderLineFn",value:function(b){var e=this,l=b.viewState._renderLineFn;if(!l){var p=Be.hyperscriptFnForDocument(this.domEnv.document);l=b.viewState._renderLineFn=function(q){return e.renderLine(p,null,b,q)}}return l}},{key:"directRenderTextLayerFn",
value:function(b){var e=this,l=b.viewState._renderTextLayerFn;if(!l){var p=Be.hyperscriptFnForDocument(this.domEnv.document);l=b.viewState._renderTextLayerFn=function(q){return e.renderJustTextLayerNode(p,b,q,[])}}return l}},{key:"renderMorph",value:function(b,e){var l=b.cursorWidth||1,p=[],q=b.selection;if(b.inMultiSelectMode()){l=q.selections;for(q=0;q<l.length-1;q++)p.push.apply(p,$jscomp.arrayFromIterable(this.renderSelectionLayer(b,l[q],!0,2)));p.push.apply(p,$jscomp.arrayFromIterable(this.renderSelectionLayer(b,
l[q],!1,4)))}else p=this.renderSelectionLayer(b,q,!1,l);l=this.renderTextLayer(b,e);q=this.renderJustTextLayerNode(Be.h,b,null,[]);var u=this.renderMarkerLayer(b,e),w=b.document.width>b.width?b.scrollbarOffset:Be.pt(0,0);w=Be.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},b.viewState.fastScroll?{overflow:b.scrollActive?b.clipMode:"hidden"}:{},{width:b.width+"px",height:b.height+"px"})},[Be.h("div",{style:{width:Math.max(b.document.width,b.width)+"px",height:Math.max(b.document.height,
b.height)-w.y+"px"}})]);l.properties.className+=" actual";l.properties.style.overflow="visible"===b.clipMode?"visible":"hidden";q.properties.className+=" font-measure";var y=b.embeddedMorphMap,A=y?b.submorphs.filter(function(C){return!y.has(C)}):b.submorphs;p=[].concat($jscomp.arrayFromIterable(p),[u,q,l,e.renderSelectedSubmorphs(b,A)]);return Be.h("div",Object.assign({},Be.defaultAttributes(b,e),{style:Object.assign({},Be.defaultStyle(b),{},b.viewState.fastScroll?{overflow:"visible"==b.clipMode?
"visible":"hidden"}:{},{"-moz-user-select":"none",cursor:"auto"===b.nativeCursor?b.readOnly?"default":"text":b.nativeCursor})}),[w].concat($jscomp.arrayFromIterable(b.viewState.fastScroll?[Be.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+b.scroll.x+"px, -"+b.scroll.y+"px)"}},p)]:p)))}},{key:"renderTextLayer",value:function(b,e){var l=this,p=b.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(b)),
$jscomp.arrayFromIterable(this.renderLines(Be.h,e,b))):this.renderLines(Be.h,e,b);p=this.renderJustTextLayerNode(Be.h,b,null,p);p.properties.style.position="absolute";var q=b.viewState.afterTextRenderHook||(b.viewState.afterTextRenderHook=new Be.AfterTextRenderHook);q.reset(b);p.properties["after-text-render-hook"]=q;Be.nextTick(function(){l.manuallyTriggerTextRenderHook(b,e)});return p}},{key:"manuallyTriggerTextRenderHook",value:function(b,e){var l=b.viewState.afterTextRenderHook;l&&!l.called&&
((e=(e=e.getNodeForMorph(b))&&e.querySelector(".actual.newtext-text-layer"))&&l.hook(e),b.ownerChain().every(function(p){return p.visible})&&b.fit())}},{key:"renderJustTextLayerNode",value:function(b,e,l,p){var q=e.padding,u=q.x,w=q.y,y=e.fixedWidth,A=e.fixedHeight,C=e.backgroundColor,D=e.fontColor,L=e.textAlign,I=e.fontSize,S=e.textDecoration,V=e.fontStyle,ba=e.fontWeight,ua=e.fontFamily,Fa=e.lineHeight,F=e.wordSpacing,Y=e.letterSpacing,Q=e.tabWidth,W=u+q.width;q=w+q.height;var ka=Math.max(e.document.height,
e.height),ea="newtext-text-layer";switch(e.lineWrapping){case !0:case "by-words":ea+=" wrap-by-words";break;case "only-by-words":ea+=" only-wrap-by-words";break;case "by-chars":ea+=" wrap-by-chars";break;case !1:ea+=" no-wrapping"}y||(ea+=" auto-width");A||(ea+=" auto-height");e={height:ka+"px"};0<u&&(e.paddingLeft=u+"px");0<W&&(e.paddingRight=W+"px");0<w&&(e.paddingTop=w+"px");0<q&&(e.paddingBottom=q+"px");Y&&(e.letterSpacing=Y);F&&(e.wordSpacing=F);Fa&&(e.lineHeight=Fa);ua&&(e.fontFamily=ua);ba&&
(e.fontWeight=ba);V&&(e.fontStyle=V);S&&(e.textDecoration=S);I&&(e.fontSize=I+"px");L&&(e.textAlign=L);D&&(e.color=String(D));C&&(e.backgroundColor=C);8!==Q&&(e.tabSize=Q);u={className:ea,style:e};e.overflow="hidden";l&&(w=l.clipMode,C=l.height,l=l.width,"number"===typeof l&&(e.width=l+"px"),"number"===typeof C&&(e.height=C+"px"),w&&(e.overflow=w));return b("div",u,p)}},{key:"renderLines",value:function(b,e,l){var p=l.height,q=l.scroll,u=l.padding.y,w=l.document,y=l.clipMode;e.getNodeForMorph(l);
q=q.y;var A=w.rowCount-1,C=w.height,D="visible"!==y,L=w.findLineByVerticalOffset(D?Math.max(0,D?q-u:0):0)||{row:0,y:0,offset:0,line:w.getLine(0)},I=L.line,S=L.offset;y=L.y;L=L.row;u=w.findLineByVerticalOffset(D?Math.min(C,q-u+p):C)||{row:A,offset:0,y:0,line:w.getLine(A)};w=u.line;var V=u.offset,ba=u.row;u=D?L:0;S=0===S?L:L+1;A=D?ba+1:A;D=w&&V!==w.height?ba-1:ba;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,A-u+1);L=[];w=[];w.push(b("div.newtext-before-filler",{key:"filler",style:{height:y+
"px"}}));for(V=0;V<this.maxVisibleLines&&(L.push(I),ba=this.renderLine(b,e,l,I),w.push(ba),ba.key=I.row%this.maxVisibleLines,V++,I=I.nextLine(),I););Object.assign(l.viewState,{scrollTop:q,scrollHeight:p,scrollBottom:q+p,heightBefore:y,textHeight:C,firstVisibleRow:u,lastVisibleRow:A,firstFullyVisibleRow:S,lastFullyVisibleRow:D,visibleLines:L});l.debug&&Be.printViewState(l);return w}},{key:"renderLine",value:function(b,e,l,p){var q=p.textAndAttributes,u=[],w=q.length,y=l.fontSize;if(0<w)for(var A=0;A<
w;A+=2){var C=q[A]||"\u00a0";var D=q[A+1];if("string"!==typeof C)u.push(C.isMorph?this.renderEmbeddedSubmorph(b,e,C,D):Be.objectReplacementChar);else if(D){var L=D.fontSize&&(Be.obj.isString(D.fontSize)?D.fontSize:D.fontSize+"px");var I=D.fontFamily;var S=D.fontWeight;var V=D.fontStyle;var ba=D.textDecoration;var ua=D.fontColor;var Fa=D.backgroundColor;var F=D.nativeCursor;var Y=D.textStyleClasses;var Q=D.link;var W=D.lineHeight||W;var ka=D.textAlign||ka;var ea=D.wordSpacing||ea;var la=D.letterSpacing||
la;var db=D.paddingRight;var ub=D.paddingLeft;var xa=D.paddingTop;var na=D.paddingBottom;var Aa=D.verticalAlign;var Pa=D.textStroke;var Da=D.quote||Da;var M="span";var U={};var aa={style:U};L&&D.fontSize<y&&(y=D.fontSize);Q&&(M="a",(aa.href=Q)&&Q.startsWith("http")&&(aa.target="_blank"));if(Q||F)U.pointerEvents="auto";L&&(U.fontSize=L);I&&(U.fontFamily=I);S&&(U.fontWeight=S);V&&(U.fontStyle=V);ba&&(U.textDecoration=ba);ua&&(U.color=String(ua));Fa&&(U.backgroundColor=String(Fa));F&&(U.cursor=F);db&&
(U.paddingRight=db);ub&&(U.paddingLeft=ub);xa&&(U.paddingTop=xa);na&&(U.paddingBottom=na);Aa&&(U.verticalAlign=Aa);Pa&&(U["-webkit-text-stroke"]=Pa);D.doit&&(U.pointerEvents="auto",U.cursor="pointer");Y&&Y.length&&(aa.className=Y.join(" "));u.push(b(M,aa,C))}else u.push(C)}else u.push(b("br"));e={};l.fontSize>y&&(e.fontSize=y+"px");W&&(e.lineHeight=W);ka&&(e.textAlign=ka);la&&(e.letterSpacing=la);ea&&(e.wordSpacing=ea);l=b("div",{className:"line",style:e,dataset:{row:p.row}},u);if(Da)for("number"!==
typeof Da&&(Da=1);Da--;)l=b("blockquote",{},l);return l}},{key:"renderEmbeddedSubmorph",value:function(b,e,l,p){p=p||{};if(e)return b=e.render(l),b.properties.style.position="relative",b.properties.style.transform="",b.properties.style.textAlign="initial",p.paddingTop&&(b.properties.style.marginTop=p.paddingTop),p.paddingLeft&&(b.properties.style.marginLeft=p.paddingLeft),p.paddingRight&&(b.properties.style.marginRight=p.paddingRight),p.paddingBottom&&(b.properties.style.marginBottom=p.paddingBottom),
b;e=l.extent;p=e.x+"px";e=e.y+"px";return b("div",{className:l.styleClasses.join(" "),style:{width:p,height:e}},[])}},{key:"renderSelectionLayer",value:function(b,e,l,p){l=void 0===l?!1:l;p=void 0===p?2:p;if(!e)return[];var q=b.textLayout,u=e.start,w=e.end,y=e.cursorVisible,A=e.selectionColor,C=b.document,D=b.cursorColor,L=e.isReverse();u=q.boundsFor(b,u);var I=q.computeMaxBoundsForLineSelection(b,e),S=q.boundsFor(b,w);Be.pt(u.x,I.y);I=Be.pt(S.x,S.y);w=u.height;S=S.height;u=L?Be.pt(u.x,u.y):I;l=this.cursor(u,
L?w:S,y,l,p,D);if(e.isEmpty())return[l];p=[];y=e.start.row;D=C.computeVerticalOffsetOf(y)+b.padding.top();L=b.padding.left();for(var V,ba,ua;y<=e.end.row;){w=C.getLine(y);if(!(y<b.viewState.firstVisibleRow-50)){if(y>b.viewState.lastVisibleRow+50)break;u=q.charBoundsOfRow(b,y).map(Be.Rectangle.fromLiteral);S=y==e.start.row;if(ua=u[0].bottom()<Be.arr.last(u).top()){I=q.rangesOfWrappedLine(b,y).map(function(Q){return Q.intersect(e)});ba=S;var Fa=0,F=V=void 0,Y=$jscomp.makeIterator(I);for(I=Y.next();!I.done;I=
Y.next())I=I.value,I.isEmpty()||(V=u.slice(I.start.column,I.end.column),Fa=ba?Be.arr.min(V.map(function(Q){return Q.top()})):Fa,F=Be.arr.max(V.map(function(Q){return Q.bottom()})),ba=V[0],I=Be.pt(L+ba.left(),D+Fa),ba=Be.arr.last(V),V=Be.pt(L+ba.right(),D+F),Fa=F,ba=!1,p.push(Be.Rectangle.fromAny(I,V)))}ua||(ua=y==e.end.row,I=S?e.start.column:0,Fa=ua?e.end.column:u.length-1,S=S&&Be.arr.min(u.slice(I,Fa+1).map(function(Q){return Q.top()}))||0,Y=I>=Fa?5:0,ba=u[I],I=Be.pt(L+(ba?ba.left():Be.arr.last(u).right()),
D+S),ba=u[Fa],e.includingLineEnd?V=Be.pt(b.width-b.padding.right(),D+S+w.height):(ua=ua&&e.end.column<=u.length-1,V=Be.pt(L+(ba?ua?ba.left():ba.right():Be.arr.last(u).right())+Y,D+S+w.height)),p.push(Be.Rectangle.fromAny(I,V)))}D+=w.height;y++}b=this.selectionLayerRounded(p,A,b);b.push(l);return b}},{key:"selectionLayerRounded",value:function(b,e,l){var p=[l={left:[],right:[]}];b=$jscomp.makeIterator(b);for(var q=b.next();!q.done;q=b.next()){q=q.value;u&&(u.left()>q.right()||u.right()<q.left())&&
p.push(l={left:[],right:[]});l.left.push(q.topLeft(),q.bottomLeft());l.right.push(q.topRight(),q.bottomRight());var u=q}u=[];l={};p=$jscomp.makeIterator(p);for(b=p.next();!b.done;l={$jscomp$loop$prop$pos$2723:l.$jscomp$loop$prop$pos$2723},b=p.next())if(b=b.value,b.left.length){l.$jscomp$loop$prop$pos$2723=b.left.reduce(function(L,I){return L.minPt(I)});q=b.left.concat(b.right.reverse());b=[];for(var w=0;w<q.length;w++){var y=q[w-1]||Be.arr.last(q),A=q[w],C=q[w+1]||Be.arr.first(q),D=y.subPt(A).normalized().scaleBy(6);
y=A.addPt(D);y._next=D.scaleBy(-1);C=C.subPt(A).normalized().scaleBy(6);A=A.addPt(C);A._prev=C.scaleBy(-1);b.push(y,A)}b=b.map(function(L){return function(I){return{position:I.subPt(L.$jscomp$loop$prop$pos$2723),isSmooth:!0,controlPoints:{next:I._next||Be.pt(0),previous:I._prev||Be.pt(0)}}}}(l));q=Be.getSvgVertices(b);A=b.map(function(L){return L.position}).reduce(function(L,I){return L.minPt(I)});w=A.y;A=A.x;b=b.map(function(L){return L.position}).reduce(function(L,I){return L.maxPt(I)});u.push(Be.h("svg",
{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:l.$jscomp$loop$prop$pos$2723.x+"px",top:l.$jscomp$loop$prop$pos$2723.y+"px",width:b.x-A,height:b.y-w}},Be.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:q,fill:e.toString()}})))}return u}},{key:"cursor",value:function(b,e,l,p,q,u){return Be.h("div",{className:"newtext-cursor"+(p?" diminished":""),style:{left:b.x-Math.ceil(q/2)+"px",top:b.y+"px",width:q+"px",height:e+"px",display:l?"":"none",background:u||
"black"}})}},{key:"renderMarkerLayer",value:function(b){var e=b.markers,l=b.textLayout,p=b.viewState,q=p.firstVisibleRow;p=p.lastVisibleRow;var u=[];if(!e)return u;e=$jscomp.makeIterator(e);for(var w=e.next();!w.done;w=e.next()){var y=w.value;w=y.style;y=y.range;var A=y.start;y=y.end;if(!(y.row<q||A.row>p))if(A.row===y.row)u.push(this.renderMarkerPart(l,b,A,y,w));else{u.push(this.renderMarkerPart(l,b,A,b.lineRange(A.row).end,w));for(A=A.row+1;A<=y.row-1;A++){var C=b.lineRange(A);u.push(this.renderMarkerPart(l,
b,C.start,C.end,w,!0))}u.push(this.renderMarkerPart(l,b,{row:y.row,column:0},y,w))}}return u}},{key:"renderMarkerPart",value:function(b,e,l,p,q,u){u=void 0===u?!1:u;var w=e.document;var y=w.getLine(l.row);u?(b=e.padding,u=b.left(),l=b.top()+w.computeVerticalOffsetOf(l.row),b=u+y.width,y=y.height):(y=b.boundsFor(e,l),u=y.x,l=y.y,y=b.boundsFor(e,p),b=y.x,y=y.height);y=Math.ceil(y);return Be.h("div.newtext-marker-layer",{style:Object.assign({},q,{left:u+"px",top:l+"px",height:y+"px",width:b-u+"px"})})}},
{key:"renderDebugLayer",value:function(b){var e=[],l=b.viewState,p=l.heightBefore,q=l.firstVisibleRow,u=l.lastVisibleRow;l=l.visibleLines;var w=b.padding,y=b.scroll,A=y.x,C=y.y;y=w.left();var D=w.right(),L=w.top();w.bottom();e.push(Be.h("div.debug-info",{style:{left:A+y+"px",top:C+"px",width:b.width-D+"px"}},Be.h("span","visible rows: "+q+" - "+u)));for(w=0;q<u;w++,q++){var I=l[w];C=b.textLayout.lineCharBoundsCache.get(I);I=I.height;e.push(Be.h("div.debug-line",{style:{left:A+y+"px",top:L+p+"px",
width:b.width-D+"px",height:I+"px"}},Be.h("span",String(q))));if(C)for(var S=0;S<C.length;S++){var V=C[S];e.push(Be.h("div.debug-char",{style:{left:y+V.x+"px",top:L+p+V.y+"px",width:V.width+"px",height:V.height+"px"}}))}p+=I}return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],d,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9196,end:36226})}(void 0),foa=f6=Be.TextRenderer;Be.extractHTMLFromTextMorph=TG;Be.extractHTMLFromTextMorph=TG;Be.default=f6;var Vm=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Vm.arr=Ne;Vm.eqPosition=qp;Vm.KeyHandler=ZP;Vm.commands={activate:{name:"[IyGotoChar] activate",exec:function(a,d){d=void 0===d?{backwards:!1}:d;Vm.IyGotoCharKeyHandler.installInto(a,d.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",
exec:function(a,d){a.saveMark();var k=a.selection,b=k.lead,e=b.row,l=b.column;b=!!a.activeMark||!k.isEmpty();var p={row:e,column:l-1};a=a.document[d.backwards?"scanBackward":"scanForward"](p,function(q,u){return q!==d.needle||Vm.eqPosition(p,u)?null:u});if(!a)return!0;a.column++;k.lead=a;b||(k.anchor=a);return!0},multiSelectAction:"forEach",readOnly:!0}};var EJ=Vm.commands.activate;Vm.activate=EJ;Vm.activate=EJ;Vm.activate=EJ;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),
k=d.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof d.IyGotoCharKeyHandler?d.IyGotoCharKeyHandler:d.IyGotoCharKeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?!1:b;Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=b}},
{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(b){b._cachedKeyhandlers=null;Vm.arr.remove(b._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(b,e){var l=e.keyCombo,p=l.startsWith("input-");if(e.onlyModifiers||l.startsWith("Shift-")||!p&&!e.isModified&&!e.isFunctionKey)return{command:"null",passEvent:!0};e=p&&l.slice(6);if(!this.charToFind)if(p)this.charToFind=e;else return this.uninstallFrom(b),null;return e!==this.charToFind?(this.uninstallFrom(b),
null):{command:Vm.commands.moveTo,args:{backwards:this.backwards,needle:e}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(b,e){e=void 0===e?!1:e;b.keyhandlers.filter(function(l){return l.isIyGoToChar}).forEach(function(l){return l.uninstallFrom(b)});b._cachedKeyhandlers=null;b._keyhandlers=(b._keyhandlers||[]).concat(new this(e))}}],d,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1063,end:3067})})(Vm.KeyHandler);var eh=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");eh.chain=yk;eh.arr=Ne;eh.string=Bg;eh.date=tp;eh.pt=kh;eh.Range=Ds;eh.eqPosition=qp;eh.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(a){a.selection.isEmpty()&&a.selectLine(a.cursorPosition.row);
return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a,d){d=void 0===d?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:d;var k=a.selection,b=k.text,e=d.hasOwnProperty("collapseSelection")?d.collapseSelection:!0;a.saveMark(k.anchor);a.activeMark=null;(k.isMultiSelection?k.selections.slice():[k]).forEach(function(l){var p=l.isEmpty()?a.lineRange():l.range,q=a.textInRange(p);a.env.eventDispatcher.killRing.add(q);
d.delete?a.deleteText(p):!l.isEmpty()&&e&&l.collapse(l.lead)});d.dontTryNativeClipboard||a.env.eventDispatcher.doCopy(b);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(a){a.selection.isEmpty()&&a.selectLine(a.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",
exec:function(a,d){d=void 0===d?{killRingCycleBack:!1}:d;var k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=a.env.eventDispatcher.killRing;d.killRingCycleBack&&(eh.arr.last(eh.arr.pluck(a.commandHandler.history,"name"))||"").includes("clipboard paste")&&(k=b.back());!k&&b.isCycling()&&(k=b.yank());k||(k=b.yank());a.selection.isMultiSelection?(a.undoManager.group(),a.selection.selections.slice(0,-1).reverse().map(function(l,p){p=b.pointer-1-p;0>p&&(p=b.buffer.length-1);return{selection:l,
pasted:b.buffer[p]||""}}).concat({selection:a.selection.defaultSelection,pasted:k}).forEach(function(l){return l.selection.text=l.pasted}),a.undoManager.group()):k&&(a.undoManager.group(),a.selection.text=k,a.undoManager.group());return e.return(!0)})}},{name:"browse clipboard",exec:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=a.env.eventDispatcher.killRing,k=d.pointer,b=d.buffer,e=b.map(function(u){return{isListItem:!0,string:eh.string.truncate(u,
80).replace(/\n/g,""),value:u}}),q.yield(a.world().filterableListPrompt("select items to paste",e,{preselect:k,multiSelect:!0}),2);l=q.yieldResult;p=l.selected;p.length&&(a.undoManager.group(),a.insertTextAndSelect(p.join("\n")),a.undoManager.group());return q.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(a){a.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(a){a.textRedo();return!0}},{name:"select all",
doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){a.saveMark();a.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(a){if(a.rejectsInput())return!1;if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_newline&&a.editorPlugin.cmd_delete_backwards())return!0;var d=a.selection;d.isEmpty()&&d.growLeft(1);d.text="";d.collapse();a.activeMark&&(a.activeMark=null);return!0}},
{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(a){var d=a.selection;if(a.rejectsInput())return!1;d.isEmpty()&&d.growRight(1);d.text="";d.collapse();a.activeMark&&(a.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(a){a.undoManager.group();a.withSelectedLinesDo(function(d,k){return a.insertText(a.tab,k.start)});a.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(a){a.undoManager.group();
a.withSelectedLinesDo(function(d,k){return d.startsWith(a.tab)&&a.deleteText({start:k.start,end:{row:k.start.row,column:a.tab.length}})});a.undoManager.group();return!0}},{name:"indent according to mode",exec:function(a,d){d=void 0===d?{}:d;var k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){k=a.editorPlugin&&a.editorPlugin.mode;if(!k)return y.return(!0);l=d.hasOwnProperty("undo")?d.undo:!0;d.hasOwnProperty("firstRow")&&d.hasOwnProperty("lastRow")?
(p=d,b=p.firstRow,e=p.lastRow):a.selection.isEmpty()?b=e=a.cursorPosition.row:(q=a.selection.selectedRows,b=q.first,e=q.last);return y.yield(System.import("lively.ide/editor-modes.js"),2)}u=y.yieldResult;w=u.indentLines;l&&a.undoManager.group();w(a,k,b,e,"smart",!0,d);l&&a.undoManager.group();return y.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(a){var d=a.snippets.find(function(k){return k.canExpand(a)});return d?(d.expandAtCursor(a),!0):a.selection.isEmpty()?
a.execCommand("insertstring",{string:a.tab}):a.execCommand("indent according to mode")}},{name:"browse snippets",scrollCursorIntoView:!0,exec:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return d=a.snippets.map(function(p){return{isListItem:!0,string:p.trigger+" - "+p.expansion,value:p}}),l.yield(a.world().filterableListPrompt("select snippet",d,{requester:a}),2);k=l.yieldResult;b=$jscomp.makeIterator(k.selected);(e=b.next().value)&&e.expandAtCursor(a);
return l.return(!0)})}},{name:"transpose chars",exec:function(a){if(a.selection.isEmpty()){var d=a.cursorPosition,k=d.row,b=d.column;d=eh.Range.create(k,b-1,k,b+1);var e=a.getLine(k);k=e[b-1];b=e[b];k&&b&&a.replace(d,b+k,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",
multiSelectAction:"single",exec:function(a){var d=a.selection.selections;a.undoManager.group();d.reduce(function(k,b){var e=b.text;b.text=k;return e},eh.arr.last(d).text);a.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(a){a.activeMark?a.selection.selectLeft(1):a.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(a){a.activeMark?a.selection.selectRight(1):a.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(a){a.activeMark?a.selection.selectUp(1):a.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(a){a.activeMark?a.selection.selectDown(1):a.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(a){a.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(a){a.selection.selectRight(1);return!0}},{name:"select up",exec:function(a){a.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(a){a.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(a){var d=a.selection,k=d.lead.row,b=a.lineRange(k,!1);d.range=d.range.equals(b)?a.lineRange(k,!0):b;return!0}},{name:"goto line start",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.selection,b=k.lead;
a=a.screenLineRange(b,!0);k.lead=eh.eqPosition(b,a.start)?{column:0,row:b.row}:a.start;!d&&(k.anchor=k.lead);return!0}},{name:"goto line end",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.selection;a=a.screenLineRange(k.lead,!0);k.lead=a.end;!d&&(k.anchor=k.lead);return!0}},{name:"goto page up",exec:function(a){a.pageUpOrDown({direction:"up",select:!!a.activeMark});return!0}},{name:"goto page down",exec:function(a){a.pageUpOrDown({direction:"down",select:!!a.activeMark});
return!0}},{name:"goto page up and select",exec:function(a){a.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(a){a.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;a.gotoDocumentStart(Object.assign({},d));return!0}},{name:"goto end",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;a.gotoDocumentEnd(Object.assign({},d));return!0}},{name:"goto paragraph above",
exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=a.paragraphRangeAbove(a.cursorPosition.row);k.start.row--;a.selection.lead=k.start;d.select||a.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=a.paragraphRangeBelow(a.cursorPosition.row);k.end.row++;a.selection.lead=k.end;d.select||a.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(a){var d=!!a.activeMark,
k=a.cursorPosition,b=a.textLayout.firstFullVisibleLine(a),e=a.textLayout.lastFullVisibleLine(a),l=b+Math.floor((e-b)/2);if(k.row<b)k.row=b;else if(k.row<l)k.row=l;else if(k.row<e)k.row=e;else return!0;a.selection.lead=k;d||(a.selection.anchor=a.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(a){var d=!!a.activeMark,k=a.cursorPosition,b=a.textLayout.firstFullVisibleLine(a),e=a.textLayout.lastFullVisibleLine(a),l=b+Math.floor((e-b)/2);if(k.row<=b)return!0;
k.row=k.row<=l?b:k.row<=e?l:e;a.selection.lead=k;d||(a.selection.anchor=a.selection.lead);return!0}},{name:"goto line",exec:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d=!!a.activeMark,k=Number,e.yield(a.world().prompt("Enter line number"),2);b=k(e.yieldResult);isNaN(b)||(d?a.selection.lead={row:b,column:0}:a.cursorPosition={row:b,column:0},a.scrollCursorIntoView(),a.focus());return e.return(!0)})}},{name:"join line",exec:function(a,
d){d=void 0===d?{withLine:"before"}:d;var k=a.selection,b=k.start,e=k.end;k=k.lead;if(!a.selection.isEmpty()){if(b.row===e.row)return!0;d=a.undoManager.ensureNewGroup(a,"join line");e=eh.arr.range(0,e.row-1-b.row).map(function(l){return a.joinLine(b.row)});a.undoManager.group(d);a.selection.isMultiSelection&&(a.cursorPosition=e[0],e.slice(1).forEach(function(l){return a.selection.addRange({start:l,end:l})}));return!0}e=k.row;if("before"===d.withLine&&0>=e||"after"===d.withLine&&e>=a.document.endPosition.row)return!0;
a.undoManager.group();a.cursorPosition=a.joinLine("before"===d.withLine?e-1:e);a.undoManager.group();return!0}},{name:"split line",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row).match(/^\s*/)[0].length;a.insertText("\n"+" ".repeat(k),d);a.cursorPosition=d;return!0}},{name:"insert line",exec:function(a,d){d=void 0===d?{where:"above"}:d;var k=a.cursorPosition.row,b=a.getLine(k).match(/^\s*/)[0].length;"below"===d.where&&k++;a.insertText(" ".repeat(b)+"\n",{column:0,row:k});a.cursorPosition=
{column:b,row:k};return!0}},{name:"duplicate line or selection",exec:function(a){a.undoManager.group();var d=a.selection.end;if(a.selection.isEmpty())a.insertText(a.getLine(d.row)+"\n",{column:0,row:d.row+1});else{var k=a.selection.range;a.insertText(a.selection.text,d);a.selection=k}a.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row);if(eh.eqPosition(a.document.endPosition,d))return!0;d=k.trim()?{start:d,end:{row:d.row,
column:k.length}}:{start:{row:d.row,column:0},end:{row:d.row+1,column:0}};a.env.eventDispatcher.doCopy(a.textInRange(d));a.undoManager.group();a.deleteText(d);a.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(a){a.activeMark&&(a.activeMark=null);if(!a.selection.isEmpty())return a.selection.text="",!0;var d=a.lineRange(),k=a.cursorPosition;if(eh.eqPosition({row:k.row,column:0},k))return!0;d={start:eh.eqPosition(d.start,k)?{row:k.row,column:0}:d.start,end:k};
a.deleteText(d);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(a){var d=a.selection;if(a.inMultiSelectMode()){var k=d.selections.map(function(l){return l.range});k.slice().sort(eh.Range.compare).forEach(function(l){a.selection=l;a.execCommand("move lines up")});k.forEach(function(l){l.start.row--;l.end.row--});a.selection.ranges=k;return!0}d.isEmpty()||0!==d.end.column||d.growRight(-1);k=d.start;d=d.end;var b=a.getLine(k.row-1),e=a.undoManager.ensureNewGroup(a);a.insertText(b+
"\n",{row:d.row+1,column:0});a.deleteText({start:{row:k.row-1,column:0},end:{row:k.row,column:0}});a.undoManager.group(e);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(a){var d=a.selection;if(a.inMultiSelectMode()){var k=d.selections.map(function(l){return l.range});k.slice().sort(eh.Range.compare).reverse().forEach(function(l){a.selection=l;a.execCommand("move lines down")});k.forEach(function(l){l.start.row++;l.end.row++});a.selection.ranges=k;return!0}d.isEmpty()||
0!==d.end.column||d.growRight(-1);var b=d.range,e=b;k=e.start;e=e.end;d.isEmpty()?b={start:{row:k.row,column:0},end:{row:k.row+1,column:0}}:0!==e.column&&(b={start:k,end:{row:e.row+1,column:0}});d=a.undoManager.ensureNewGroup(a);b=a.deleteText(b);a.insertText(b,{row:k.row+1,column:0});a.undoManager.group(d);a.selection={start:Object.assign({},k,{row:k.row+1}),end:Object.assign({},e,{row:e.row+1})};return!0}},{name:"old select word",exec:function(a){var d=a.selection;d.range=a.wordAt(d.lead).range;
return!0}},{name:"select word",exec:function(a){var d=a.selection;if(a=a.selectMatchingBrackets(a.textString,a.positionToIndex(d.lead)))d.range={start:a[0],end:a[1]+1};return!0}},{name:"select word right",exec:function(a){var d=a.selection;d.anchor=a.wordRight(d.end).range.end;return!0}},{name:"goto word left",exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.wordLeft().range;a.selection.lead=k.start;d||(a.selection.anchor=k.start);return!0}},{name:"goto word right",
exec:function(a,d){d=void 0===d?{select:!1}:d;d=d.select||!!a.activeMark;var k=a.wordRight().range;a.selection.lead=k.end;d||(a.selection.anchor=k.end);return!0}},{name:"delete word right",exec:function(a){a.undoManager.group();var d=a.wordRight().range.end;d={start:a.cursorPosition,end:d};a.env.eventDispatcher.doCopy(a.textInRange(d));a.deleteText(d);a.undoManager.group();return!0}},{name:"delete word left",exec:function(a){a.undoManager.group();var d={start:a.wordLeft().range.start,end:a.cursorPosition};
a.deleteText(d);a.undoManager.group();return!0}},{name:"goto matching right",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=d.pairs||{"{":"}","[":"]","(":")","<":">"};if(k=a.findMatchingForward(a.cursorPosition,"right",k)||a.findMatchingForward(a.cursorPosition,"left",k))a.selection.lead=k,d.select||(a.selection.anchor=a.selection.lead);return!0}},{name:"goto matching left",exec:function(a,d){d=void 0===d?{select:!!a.activeMark}:d;var k=d.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(k=a.findMatchingBackward(a.cursorPosition,"left",k)||a.findMatchingBackward(a.cursorPosition,"right",k))a.selection.lead=k,d.select||(a.selection.anchor=a.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){var d=a.charBoundsFromTextPosition(a.cursorPosition),k=d.topLeft();d=a.height-d.height;var b=a.scroll,e=b.x;b=b.y;
b=2>Math.abs(k.y-b)?k.y-d:2>Math.abs(k.y-b-.5*d)?k.y:k.y-.5*d;a.scroll=eh.pt(e,b);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(a){var d=a.selection;if(d.isEmpty()){var k=a.popSavedMark();k&&(a.saveMark(a.cursorPosition),d.lead=k.position)}else d.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(a,d,k){var b=a.activeMark;d=a.selection;var e=!d.isEmpty();if(4===k){if(a=a.popSavedMark())d.lead=
a.position,e||(d.anchor=d.lead);return!0}if(!b&&!e)return a.activeMark=d.lead,!0;a.saveMark(b||d.anchor);a.activeMark=null;e&&(a.inMultiSelectMode()?d.selections:[d]).forEach(function(l){return l.anchor=l.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(a,d,k){function b(u,w,y){if(u.length<=e)return[w+u.trim()];y=u.slice(0,e);var A=eh.arr.last(eh.string.reMatches(y,p)),C=A&&0<A.start?A.start:e;A=y.slice(0,C);u=w+(y.slice(C)+u.slice(e)).trimLeft();
return[A].concat(b(u,w))}if(4===k)return a.execCommand("join line");a.selection.isEmpty()&&a.selectLine();d=a.selection;var e=k||80,l=d.selectedRows;k=d.range;var p=/[ ]+/g,q=/^[\s\t]+/;d=eh.string.paragraphs(eh.arr.range(l.first,l.last).map(function(u){return a.getLine(u)}).join("\n"),{keepEmptyLines:!0});d=eh.chain(d.map(function(u){if(!/^\s*$/.test(u)){u=u.split("\n").join(" ");if(""===u.trim())u=[""];else{var w=u.match(q);w=w?w[0]:"";u=b(w+u.trim(),w)}u=u.join("\n")+"\n"}return u})).flatten().value().join("\n");
a.undoManager.group();a.replace(k,d);a.undoManager.group();return!0}},{name:"lowercase",exec:function(a){a.undoManager.group();a.selection.isEmpty()&&(a.selection=a.wordAt().range);a.selection.text=a.selection.text.toLowerCase();a.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(a){a.undoManager.group();var d=0;a.withLinesDo(0,a.documentEndPosition.row,function(k,b){return k.match(/\s+$/)&&++d&&a.replace(b,k.trimRight())});a.world().setStatusMessage(d+" lines cleaned up");
a.undoManager.group();return!0}},{name:"uppercase",exec:function(a){a.undoManager.group();a.selection.isEmpty()&&(a.selection=a.wordAt().range);a.selection.text=a.selection.text.toUpperCase();a.undoManager.group();return!0}},{name:"newline",exec:function(a){var d=a.cursorPosition,k=a.getLine(d.row),b=k.match(/^\s*/)[0].length;a.undoManager.group();!k.trim()&&b&&(a.deleteText({start:{row:d.row,column:0},end:{row:d.row,column:b}}),d.column=0);if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_newline&&
a.editorPlugin.cmd_newline(d,k,b))return!0;a.selection.text="\n"+" ".repeat(b);a.selection.collapseToEnd();a.undoManager.group();return!0}},{name:"insertstring",exec:function(a,d){var k=d=void 0===d?{string:null,undoGroup:!1}:d;d=k.string;k=k.undoGroup;var b="string"===typeof d&&d.length;b||console.warn("command insertstring called with not string value");if(a.rejectsInput()||!b)return!1;a.saveActiveMarkAndDeactivate();if(a.editorPlugin&&"function"===typeof a.editorPlugin.cmd_insertstring&&a.editorPlugin.cmd_insertstring(d))return!0;
b=a.selection;var e=!b.isEmpty();e&&a.undoManager.group();var l=b.lead;b.replace(d,!0,!0,!0,!(1===d.length&&"\n"!==d&&0<l.column));b.collapseToEnd();e&&a.undoManager.group();k&&(/^[\s\.,\?\+=]+$/.test(d)||"number"!==typeof k?a.undoManager.group():a.undoManager.groupLater(k));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a){a.keepPosAtSameScrollOffsetWhile(function(){return a.lineWrapping=a.lineWrapping?!1:a.fontMetric.isProportional(a.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(a,d,k,b){a.env.eventDispatcher.resetKeyInputState();a.selection.disableMultiSelect&&a.selection.disableMultiSelect();a.selection.isEmpty()||(a.selection.anchor=a.selection.lead);a.activeMark&&(a.activeMark=null);return!0}}];eh.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(a,d,k){d=eh.date.format(new Date,k?"mediumDate":"isoDate");a.undoManager.group();a.insertText(d);
a.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(a){var d=a.selection;d.isEmpty()&&a.selectLine();a=/\[\s*\]/g;var k=/\[X\]/g,b=d.text;b=a.test(b)?b.replace(a,"[X]"):k.test(b)?b.replace(k,"[ ]"):"[ ] "+b.trimLeft();d.text=b;return!0}},{name:"selected lines: sort",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,d,function(e){var l=b.findIndex(function(p){return p>e});-1<l?b.splice(l,0,e):b.push(e)});a.undoManager.group();a.replace({start:{row:k,
column:0},end:{row:d+1,column:0}},b.join("\n")+"\n");a.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,d,function(e){return b.push(e)});a.undoManager.group();a.replace({start:{row:k,column:0},end:{row:d+1,column:0}},b.reverse().join("\n")+"\n");a.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(a){var d=a.selection,k=d.start.row;d=d.end.row;var b=[];a.withLinesDo(k,
d,function(e){return eh.arr.pushIfNotIncluded(b,e)});a.undoManager.group();a.replace({start:{row:k,column:0},end:{row:d+1,column:0}},b.join("\n")+"\n");a.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(a,d,k){function b(C,D){var L,I,S=e(C).trim();"uppercased"===S?L=/\s*[A-Z0-9]+/g:"dashed"===S?L=/-\w/g:"spaced"===S&&(L=/\s+.?/g);"uppercased"===D?I=function(V){return V.trim().replace(/^-/,"").toUpperCase()}:"dashed"===D?I=function(V){return"-"+
V.trim().replace(/^-/,"").toLowerCase()}:"spaced"===D&&(I=function(V){return" "+V.trim().replace(/^-/,"").toLowerCase()});return C.replace(L,I)}function e(C){return C.match(/[A-Z]/)?"uppercased":C.match(/-/)?"dashed":C.match(/\s/)?"spaced":"unknown"}var l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress){a.selection.isEmpty()&&(a.selection=a.wordAt().range);l=a.selection.ranges;p=a.textInRange(l[0]);if(!p)return a.setStatusMessage("Please select some text"),
C.return(!0);q=e(p);u=eh.arr.without(["uppercased","dashed","spaced"],q);return C.yield(a.world().listPrompt("Convert "+q+" into?",u,{}),2)}w=C.yieldResult;y=$jscomp.makeIterator(w.selected);A=y.next().value;if(!A)return C.return(!0);a.undoManager.group();l.forEach(function(D,L){L=a.textInRange(D);L=b(L,A);a.replace(D,L)});a.undoManager.group();a.focus();return C.return(!0)})}},{name:"spell check word",exec:function(a,d){var k,b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return k=
a.wordAt(),k.string?w.yield(System.import("lively.ide/shell/spell-checker.js"),2):(a.setStatusMessage("no word for spellcheck!"),w.return(!0));case 2:return b=w.yieldResult,e=b.spellCheckWord,w.yield(e(k.string),3);case 3:return l=w.yieldResult,l.length?w.yield(a.world().filterableListPrompt("Choose replacement for "+k.string,l),4):(a.setStatusMessage("no suggestions for word "+k.string),w.return(!0));case 4:p=w.yieldResult;q=$jscomp.makeIterator(p.selected);if(u=q.next().value)a.undoManager.group(),
a.replace(k.range,u),a.undoManager.group();return w.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(a,d){var k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return b=(k=a.textInRange(a.selection))&&0!==k.length?{stdin:k}:{},y.yield(a.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return e=y.yieldResult,y.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:l=y.yieldResult;p=l.runCommand;if(!e)return y.return(a.setStatusMessage("No command entered, aborting...!"));q=p(e,b);y.setCatchFinallyBlocks(4);return y.yield(q.whenDone(),6);case 6:u=q.output.trim();a.undoManager.group();a.selection.selections.forEach(function(A){return A.text=u});a.undoManager.group();y.leaveTryBlock(5);break;case 4:w=y.enterCatchBlock(),a.showError(w);case 5:return y.return(!0)}})}},{name:"open file at cursor",exec:function(a,d){var k,b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==
A.nextAddress)return a.getLine(),k=a.cursorPosition.row,b=a.document.scanBackward(a.cursorPosition,function(C,D){return(0>=D.column||C.match(/\s/))&&D})||{row:0,column:0},e=a.document.scanForward(a.cursorPosition,function(C,D){return(D.row!=k||C.match(/\s/))&&D})||a.documentEndPosition,l=a.textInRange({start:b,end:e}).replace(/\s/g,""),p=l.split(":"),q=p[0].match(/^file|http/)?p.shift()+":"+p.shift():p.shift(),p[0].match(/^[0-9]+$/)&&(q+=":"+p.shift()),A.yield(System.import("lively.ide/text-editor.js"),
2);u=A.yieldResult;w=u.default;y=w.openInWindow();y.location=q;return A.return(y)})}},{name:"run code on text morph",doc:"...",exec:function(a,d){var k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return k={targetModule:"lively://code-on-text-morph",context:a},q.yield(a.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:a,mode:"js",evalEnvironment:k,historyId:"run-code-on-text-morph-hist"}),2);case 2:return b=
q.yieldResult,q.setCatchFinallyBlocks(3),a.undoManager.group(),q.yield(lively.vm.runEval(b,k),5);case 5:l=q.yieldResult;a.undoManager.group();e=l.isError?l.value:null;q.leaveTryBlock(4);break;case 3:e=p=q.enterCatchBlock();case 4:return e&&a.showError(e),q.return(void 0)}})}},{name:"change editor mode",exec:function(a){var d,k,b,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return d=function(A){return!A.endsWith("ide/editor-plugin.js")&&A.endsWith("editor-plugin.js")},
y.yield(lively.modules.getPackage("lively.ide").resources(d),2);case 2:return k=y.yieldResult,b=a.editorPlugin||{},e=b.shortName,l=0,p=["<no mode>"].concat(k.map(function(A,C){var D=A.url.match(/([^\/]+)\/editor-plugin.js/)[1];D===e&&(l=C);return{isListItem:!0,string:D,value:A}})),y.yield(a.world().filterableListPrompt("choose mode",p,{requester:a,preselect:l,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:q=y.yieldResult;u=$jscomp.makeIterator(q.selected);w=u.next().value;
if(!w)return y.return();if("<no mode>"!==w){y.jumpTo(4);break}return y.yield(a.changeEditorMode(null),5);case 5:return a.resetTextAttributes(),y.return();case 4:if(w.isLoaded){y.jumpTo(6);break}return y.yield(lively.modules.module(w.url).load(),6);case 6:return y.yield(a.changeEditorMode(w.url),0)}})}},{name:"report token at cursor",exec:function(a){var d,k,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){d=a.tokenAt(a.cursorPosition)||{};k=d.token;b=d.start;e=d.end;a.setStatusMessage(k?
k+" "+b.column+" => "+e.column:"no token");return l.return(!0)})}}];eh.commands.push.apply(eh.commands,$jscomp.arrayFromIterable(eh.usefulEditorCommands));eh.iyGotoCharActivate=EJ;eh.commands.push(eh.iyGotoCharActivate);eh.searchCommands=CJ;eh.commands.push.apply(eh.commands,$jscomp.arrayFromIterable(eh.searchCommands));var g6=eh.commands;eh.default=g6;var Nc=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");Nc.Rectangle=Qd;Nc.Point=xf;Nc.rect=zk;Nc.Color=qf;Nc.pt=kh;Nc.string=Bg;
Nc.num=Gj;Nc.obj=ff;Nc.fun=Tj;Nc.promise=Uf;Nc.arr=Ne;Nc.signal=Ak;Nc.noUpdate=rr;Nc.connect=Mj;Nc.disconnect=So;Nc.bowser=Cn;Nc.morph=Zi;Nc.touchInputDevice=Ol;Nc.sanitizeFont=$y;Nc.config=rk;Nc.Morph=Vi;Nc.Selection=zJ;Nc.MultiSelection=AJ;Nc.Document=coa;Nc.objectReplacementChar="\ufffd";Nc.Anchor=cy;Nc.Range=Ds;Nc.eqPosition=qp;Nc.lessPosition=pp;Nc.KeyHandler=ZP;Nc.UndoManager=jB;Nc.TextSearcher=BJ;Nc.TextLayout=eoa;Nc.Renderer=foa;Nc.extractHTMLFromTextMorph=TG;Nc.commands=g6;Nc.textAndAttributesWithSubRanges=
SG;Nc.serializeMorph=jA;Nc.deserializeMorph=kA;Nc.getSvgVertices=ow;Nc.renderSubTree=SD;Nc.ShadowObject=Dn;Nc.getClassName=Un;var Lo=Ia("K",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),k=d.hasOwnProperty("Text")&&"function"===typeof d.Text?d.Text:d.Text=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=
b=void 0===b?{}:b,l=e.position,p=e.rightCenter,q=e.leftCenter,u=e.topCenter,w=e.bottom,y=e.top,A=e.right,C=e.left,D=e.bottomCenter,L=e.bottomLeft,I=e.bottomRight,S=e.topRight,V=e.topLeft;e=e.center;Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.undoManager.reset();this.fit();void 0!==l&&(this.position=l);void 0!==p&&(this.rightCenter=p);void 0!==q&&(this.leftCenter=q);void 0!==u&&(this.topCenter=u);void 0!==w&&(this.bottom=w);void 0!==y&&
(this.top=y);void 0!==A&&(this.right=A);void 0!==C&&(this.left=C);void 0!==D&&(this.bottomCenter=D);void 0!==L&&(this.bottomLeft=L);void 0!==I&&(this.bottomRight=I);void 0!==S&&(this.topRight=S);void 0!==V&&(this.topLeft=V);void 0!==e&&(this.center=e)}},{key:"__deserialize__",value:function(b,e,l,p){Sb._get(Object.getPrototypeOf(k.prototype),"__deserialize__",this).call(this,b,e,l,p);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new Nc.Renderer(this.env);this.textLayout=new Nc.TextLayout(this);
this.changeDocument(Nc.Document.fromString(""));this.ensureUndoManager();b.cachedLineBounds&&(this._initializedByCachedBounds=b.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(b,e,l){var p=this;Sb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);this._isDeserializing=!1;this.whenRendered().then(function(){p.embeddedMorphs.forEach(function(q){return q.top=0})})}},{key:"__only_serialize__",get:function(){return Nc.arr.withoutAll(Sb._get(Object.getPrototypeOf(k.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(b,e,l,p){Sb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);b.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(D){return Nc.obj.select(D,
["start","end"])})};b.props.anchors&&this.selection.isEmpty()&&(b.props.anchors.value=b.props.anchors.value.filter(function(D){return!D.id.includes("selection-")}));b.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(D){if(!D)return D;if(D.isMorph)return l.ref(D).asRefForSerializedObjMap();if(Nc.obj.isObject(D)){var L={};D=JSON.stringify(D,function(I,S){return S&&S.__serialize__?(S=S.__serialize__(),Object.assign(L,S.bindings),"->["+(S.__expr__+"]")):S});D=
D.replace(/"->\[.*\]"/g,function(I){return I.slice(4,-2)});return l.expressionSerializer.exprStringEncode({__expr__:"("+D+")",bindings:L})}return D})};e=[];p=$jscomp.makeIterator(this.document.lines);for(var q=p.next();!q.done;q=p.next()){q=q.value;var u=this.textLayout.lineCharBoundsCache.get(q);if(u){var w=[],y=void 0,A=0;if(u){u=$jscomp.makeIterator(u);for(var C=u.next();!C.done;C=u.next()){C=C.value;if(y){if(Nc.num.roundTo(y.width,.001)==Nc.num.roundTo(C.width||0,.001)&&C.height==y.height){A++;
continue}w.push([A,Nc.num.roundTo(y.width||0,.001),y.height||0])}A=1;y=C}}y&&w.push([A,Nc.num.roundTo(y.width||0,.001),y.height||0]);e.push([q.row,Nc.arr.flatten(w)])}}b.cachedLineBounds=e}},{key:"spec",value:function(){var b=Sb._get(Object.getPrototypeOf(k.prototype),"spec",this).call(this);b.textString=this.textString;return Nc.obj.dissoc(b,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||Sb._get(Object.getPrototypeOf(k.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(b){var e=this,l=b.prop,p=b.selector,q=b.meta,u=this.lineWrapping,w=!1,y=!1,A=!1,C=!1,D=!1,L=!1;if(p)w="replace"===p,C="addTextAttribute"===p,this._displacementChange=!this._displacing&&w;else switch(l){case "scroll":D=y=!0;break;case "extent":y=!0;l=b.prevValue.subPt(b.value);L=(A=this.fixedWidth&&!!this.lineWrapping&&
!!l.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":u&&(C=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":C=b.prevValue!=b.value;break;case "lineWrapping":C=!0;break;case "borderWidth":case "fixedHeight":A=b.prevValue!=b.value;break;case "padding":A=!0}Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);l=function(){e._textChange=
!0;D&&(e.viewState.wasScrolled=!0);(C||L||A&&!q.styleSheetChange)&&e.invalidateTextLayout(C,C);(A||C)&&e.document&&e.world()&&e.document.lines.forEach(function(I){return I.hasEstimatedExtent=!0});e._displacementChange&&(e._displacementChange=!1);w&&Nc.signal(e,"textChange",b);y&&Nc.signal(e,"viewChange",b);e._textChange=!1};q.animation?Nc.promise.delay(q.animation.duration).then(l):this.ownerChain().every(function(I){return I.visible})&&l()}},{key:"onSubmorphChange",value:function(b,e){var l=this,
p,q,u,w,y,A,C,D,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress){if(b.meta&&b.meta.styleSheetChange)return I.return();Sb._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",l).call(l,b,e);return b.meta.animation?I.yield(b.meta.animation.asPromise(),2):I.jumpTo(2)}if(l._textChange||l._positioningSubmorph===e)return I.return();p=b;q=p.prop;u="position"==q||"extent"==q||"scale"==q||"rotation"==q;l.displacingMorphMap.get(e)&&u&&[].concat($jscomp.arrayFromIterable(l.displacingMorphMap.keys())).filter(function(S){return S.top>=
e.top}).forEach(function(S){l._intersectionShapeCache&&l._intersectionShapeCache.delete(S);l.updateTextDisplacementFor(S)});w=l.embeddedMorphMap.get(e)||{};if((y=w.anchor)&&u){if("position"==q)return l._positioningSubmorph=e,e.position=b.prevValue,l._positioningSubmorph=null,I.return();A=e.bounds();C=e._lastBounds;D=y.position.row;L=l.document.getLine(D);C&&C.height==A.height&&C.bottom()==A.bottom()||(L.hasEstimatedExtent=!0,e._lastBounds=A)}I.jumpToEnd()})}},{key:"removeMorph",value:function(b,e){e=
void 0===e?!0:e;var l=this.embeddedMorphMap,p=this.displacingMorphMap;p&&p.has(b)&&this.toggleTextWrappingAround(b,!1);if(l&&l.has(b)){if(p=l.get(b).anchor){var q=p.position;p=q.row;q=q.column;this.replace({start:{row:p,column:q},end:{row:p,column:q+1}},[],!0,e);this.replace}l.delete(b)}return Sb._get(Object.getPrototypeOf(k.prototype),"removeMorph",this).call(this,b)}},{key:"toggleTextWrappingAround",value:function(b,e){var l=this;if(e)this.displacingMorphMap.has(b)||(this.embeddedMorphMap.has(b)&&
this.addMorph(b.remove()),this.displacingMorphMap.set(b,[]),this.updateTextDisplacementFor(b));else if(e=this.displacingMorphMap.get(b))this._displacing=!0,e.forEach(function(p){return l.removeMorph(p)}),this._displacing=!1,this.displacingMorphMap.delete(b)}},{key:"updateTextDisplacementFor",value:function(b){var e=this;if(!this._displacing){this._displacing=!0;var l=this.displacingMorphMap.get(b),p=this.computeDisplacementRectsFor(b).values(),q=[];l.forEach(function(C){return e.removeMorph(C,!1)});
this.textLayout.resetLineCharBoundsCacheOfRange(this,b._displacementRange);p=$jscomp.makeIterator(p);for(var u=p.next();!u.done;u=p.next()){u=u.value;var w=l.shift()||Nc.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),y=this.textLayout.textPositionFromPoint(this,u.leftCenter());w.setBounds(u);this.insertText([w,{}],y);this.viewState._needsFit=!1;if(A==w.top)w.remove();else{var A=w.top;q.push(w)}}l.forEach(function(C){return e.removeMorph(C,!1)});this.displacingMorphMap.set(b,q);this._displacing=
!1}}},{key:"computeDisplacementRectsFor",value:function(b){var e=this.textLayout,l=e.textPositionFromPoint(this,b.topLeft),p=e.textPositionFromPoint(this,b.bottomLeft),q=[];b._displacementRange=Nc.Range.fromPositions(l,p);for(l=l.row;l<p.row+1;l++)q.push.apply(q,$jscomp.arrayFromIterable(e.rangesOfWrappedLine(this,l)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(p=this._intersectionShapeCache.get(b))||(p=b.isPath?Nc.Shapes.path(Nc.getSvgVertices(b.vertices)):"Ellipse"==Nc.getClassName(b)?
Nc.Shapes.ellipse(b.center.x,b.center.y,b.width/2,b.height/2):Nc.Shapes.rectangle(b.left,b.top,b.width,b.height));this._intersectionShapeCache.set(b,p);b=this.width;l=new Map;q=$jscomp.makeIterator(q);for(var u=q.next();!u.done;u=q.next()){u=u.value;var w=e.computeMaxBoundsForLineSelection(this,u),y=w.height;w=w.y;var A=Nc.Shapes.rectangle(b,y,0,w);A=Nc.Intersection.intersect(A,p);1>A.points.length||(A=Nc.Rectangle.unionPts(A.points.map(Nc.Point.fromLiteral)),A.y=w,A.height=y,A.x-=15,A.width+=30,
l.set(u,A))}return l}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(b){if(b){"string"===typeof b&&(b={id:b,row:0,column:0});if(!b.isAnchor){var e=b,l=e.column,p=e.row;b=new Nc.Anchor(e.id,"number"===typeof p&&"number"===typeof l?{row:p,column:l}:void 0,e.insertBehavior||"move")}if(e=b.id&&this.anchors.find(function(q){return q.id===b.id}))return Object.assign(e,b);this.anchors.push(b);return b}}},{key:"removeAnchor",value:function(b){for(var e=this.anchors,
l,p=e.length;p--;){var q=e[p];if(q.id==b||q===b)l=q,e.splice(p,1)}return l}},{key:"addMarker",value:function(b){this.removeMarker(b.id);this.markers.push(b);this.makeDirty();return b}},{key:"removeMarker",value:function(b){var e="string"===typeof b?b:b.id;this.markers=this.markers.filter(function(l){return l.id!==e});this.makeDirty()}},{key:"saveMark",value:function(b,e){b=void 0===b?this.cursorPosition:b;var l=this.activeMark;l&&l!==b&&!l.equalsPosition(b)&&(this.savedMarks=this.savedMarks.concat(l));
e?this.activeMark=b:this.savedMarks=this.savedMarks.concat(b)}},{key:"saveActiveMarkAndDeactivate",value:function(){var b=this.activeMark;b&&(this.saveMark(b),this.activeMark=null)}},{key:"popSavedMark",value:function(){var b=this.activeMark;if(b)return this.activeMark=null,b;b=Nc.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return b}},{key:"lastSavedMark",get:function(){return this.activeMark||Nc.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(b){var e=
this.selection,l=this.savedMarks,p=this.multiSelect?this.multiSelect.getAllRanges().length:1;p=l.length-(p-(e.index||0));e=l[p]||e.anchor;b&&"row"in b&&"column"in b&&(this.savedMarks=l.slice(0,p).concat(b).concat(l.slice(p+1)));return e}},{key:"addPlugin",value:function(b){this.plugins.includes(b)||(this.plugins.push(b),this._cachedKeyhandlers=null,"function"===typeof b.attach&&b.attach(this));return b}},{key:"removePlugin",value:function(b){if(!this.plugins.includes(b))return!1;this._cachedKeyhandlers=
null;Nc.arr.remove(this.plugins,b);"function"===typeof b.detach&&b.detach(this);return!0}},{key:"pluginCollect",value:function(b,e){e=void 0===e?[]:e;this.plugins.forEach(function(l){return"function"===typeof l[b]&&(e=l[b](e))});return e}},{key:"pluginInvokeFirst",value:function(b,e){for(var l=[],p=1;p<arguments.length;++p)l[p-1]=arguments[p];return(p=this.pluginFind(function(q){return"function"===typeof q[b]}))?p[b].apply(p,$jscomp.arrayFromIterable(l)):void 0}},{key:"pluginFind",value:function(b){return this.plugins.slice().reverse().find(b)}},
{key:"editorPlugin",get:function(){return this.pluginFind(function(b){return b.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(b){var e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return b=Nc.config.ide.modes.aliases[b]||b,l=(e=/^[^:\\]+:\/\//.test(b))?b:"lively.ide/"+b+"/editor-plugin.js",u.yield(lively.modules.doesModuleExist(l),2);if(3!=u.nextAddress)return u.yieldResult?u.yield(lively.modules.module(l).load(),3):u.return(null);p=u.yieldResult;
q=p.default;return u.return(q)})}},{key:"changeEditorMode",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return l=e.plugins.filter(function(u){return!u.isEditorPlugin}),b?"string"!==typeof b?q.jumpTo(2):q.yield(e.lookupEditorPluginNamed(b),3):(e.plugins=l,q.return(null));if(2!=q.nextAddress){p=q.yieldResult;if(!p)throw Error("Cannot find editor mode "+b);b=new p(Nc.config.codeEditor.defaultTheme);e.evalEnvironment&&(b.evalEnvironment=
e.evalEnvironment)}e.plugins=l.concat(b);return q.return(b)})}},{key:"invalidateTextLayout",value:function(b,e){e=void 0===e?!1:e;if(!this._isDeserializing){var l=this.viewState;l&&(this.fixedWidth&&this.fixedHeight||(l._needsFit=!0),l=this.textLayout)&&((void 0===b?0:b)&&l.resetLineCharBoundsCache(this),l.estimateLineHeights(this,e))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},
{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(Sb._get(Object.getPrototypeOf(k.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(Nc.commands))}},{key:"execCommand",value:function(b,e,l,p){function q(V){(w.hasOwnProperty("scrollCursorIntoView")?w.scrollCursorIntoView:1)&&Nc.fun.debounceNamed("execCommand-scrollCursorIntoView-"+
V.id,100,function(){return V.scrollCursorIntoView()})()}var u=this,w=(this.lookupCommand(b)||{}).command;if(w){var y=this.inMultiSelectMode(),A=w.hasOwnProperty("multiSelectAction")?w.multiSelectAction:"forEach";if(y&&"forEach"===A){var C=this.selection;y=this.selection.selections.slice().reverse();this.selection=y[0];this._multiSelection=C;try{var D=this.execCommand(b,e,l,p)}catch(V){throw this.selection=C,this._multiSelection=null,this.selection.mergeSelections(),V;}if(!D)return D;var L=[D];if("function"===
typeof D.then&&"function"===typeof D.catch)return Nc.promise.finally(Nc.promise.chain([function(){return D}].concat(y.slice(1).map(function(V){return function(){u.selection=V;return Promise.resolve(u.execCommand(b,e,l,p)).then(function(ba){return L.push(ba)})}}))).then(function(){return L}),function(){u.selection=C;u._multiSelection=null;u.selection.mergeSelections()});try{for(var I=$jscomp.makeIterator(y.slice(1)),S=I.next();!S.done;S=I.next())this.selection=S.value,L.push(this.execCommand(b,e,l,
p))}finally{this.selection=C,this._multiSelection=null,this.selection.mergeSelections()}return L}(D=this.commandHandler.exec(b,this,e,l,p))&&("function"===typeof D.then&&"function"===typeof D.catch?D.then(function(){return q(u)}):q(this));return D}}},{key:"changeDocument",value:function(b,e){e=void 0===e?!1:e;if(this.document)var l=this.defaultTextStyle;else e=!1;this.document=b;this.textLayout.reset();e&&(this.defaultTextStyle=l);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(b){return this.document.textInRange(b)}},
{key:"charRight",value:function(b){b=void 0===b?this.cursorPosition:b;var e=b.column;return this.getLine(b.row).slice(e,e+1)}},{key:"charLeft",value:function(b){b=void 0===b?this.cursorPosition:b;var e=b.column;return this.getLine(b.row).slice(e-1,e)}},{key:"indexToPosition",value:function(b){return this.document.indexToPosition(b)}},{key:"positionToIndex",value:function(b){return this.document.positionToIndex(b)}},{key:"getVisibleLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.textLayout.wrappedLines(this)[b].text}},
{key:"isLineVisible",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.textLayout.isLineVisible(this,b)}},{key:"isLineFullyVisible",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.textLayout.isLineFullyVisible(this,b)}},{key:"getLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.document.getLineString(b)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(b){return!this.getLine(b).trim()}},
{key:"isAtLineEnd",value:function(b){b=void 0===b?this.cursorPosition:b;var e=this.getLine(b.row);return b.column===e.length}},{key:"wordsOfLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;return this.document.wordsOfLine(b)}},{key:"wordAt",value:function(b){b=void 0===b?this.cursorPosition:b;return this.document.wordAt(b)}},{key:"wordLeft",value:function(b){b=void 0===b?this.cursorPosition:b;return this.document.wordLeft(b)}},{key:"wordRight",value:function(b){b=void 0===b?this.cursorPosition:
b;return this.document.wordRight(b)}},{key:"lineRange",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?!0:e;"number"!==typeof b&&this.cursorPosition.row;var l=this.getLine(b);b={start:{column:0,row:b},end:{column:l.length,row:b}};l=l.match(/^\s*/);l[0].length&&e&&(b.start.column+=l[0].length);return new Nc.Range(b)}},{key:"screenLineRange",value:function(b,e){b=void 0===b?this.cursorPosition:b;return this.textLayout.screenLineRange(this,b,void 0===e?!0:e)}},{key:"insertTextAndSelect",
value:function(b,e){e=void 0===e?null:e;b=String(b);e?this.selection.range=this.insertText(b,e):this.selection.text=b}},{key:"append",value:function(b){var e=this;return this.saveExcursion(function(){return e.insertText(b,e.documentEndPosition)})}},{key:"insertText",value:function(b,e,l,p){e=void 0===e?this.cursorPosition:e;return this.replace({start:e,end:e},b,void 0===l?!0:l,void 0===p?!0:p)}},{key:"deleteText",value:function(b,e){e=void 0===e?!0:e;var l=this.textAndAttributesInRange(b);this.replace(b,
[],!1,e);return l}},{key:"replace",value:function(b,e,l,p,q,u){var w=this;l=void 0===l?!0:l;p=void 0===p?!0:p;q=void 0===q?!0:q;u=void 0===u?!0:u;b=b.isRange?b:new Nc.Range(b);var y="string"===typeof e?[e,null]:Array.isArray(e)?e:[String(e||""),null];e=!y.length||2==y.length&&!y[0];var A=b.isEmpty();if(e&&A)return b;var C;l&&(C=this.textAttributeAt({row:b.start.row,column:b.start.column-(0<b.start.column?1:0)}));var D=[];for(l=0;l<y.length;l+=2)e=y[l],A=y[l+1],e.isMorph&&D.push(e),C&&(y[l+1]=Object.assign({},
C,{},A));q&&this.undoManager.undoStart(this,"replace");var L=this.textAndAttributesInRange(b),I=this.document.replace(b,y,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[b,y],undo:{target:this,selector:"replace",args:[I,L,!1]}},function(){p&&(w.invalidateTextLayout(!1,!1),w.textLayout.resetLineCharBoundsCacheOfRange(w,I));if(!Nc.eqPosition(b.end,I.end)){if(Nc.lessPosition(I.end,b.end)){var S=$jscomp.makeIterator((new Nc.Range(b)).subtract(I)).next().value;
w.anchors.forEach(function(ba){return ba.onDelete(S)})}else{var V=$jscomp.makeIterator((new Nc.Range(I)).subtract(b)).next().value;w.anchors.forEach(function(ba){return ba.onInsert(V)})}w._multiSelection?w._multiSelection.updateFromAnchors():w.selection.updateFromAnchors()}w._updateEmbeddedMorphsDuringReplace(D,I,y,L);w._isDeserializing&&w._initializedByCachedBounds||w.textLayout.estimateLineHeights(w,!1);u&&w.consistencyCheck()});q&&this.undoManager.undoStop();return I}},{key:"_updateEmbeddedMorphsDuringReplace",
value:function(b,e,l,p){for(var q=this.embeddedMorphMap,u=0;u<p.length;u+=2){var w=p[u];if(w.isMorph&&!b.includes(w)){if(q){var y=q.get(w);y&&y.anchor&&(this.removeAnchor(y.anchor),Nc.disconnect(y.anchor,"position",w,"position"));q.set(w,Object.assign({},y,{anchor:null}))}w.remove()}}if(b.length)for(l=Nc.textAndAttributesWithSubRanges(e.start,l),e=l.ranges,l=l.textAndAttributes,p=0;p<e.length;p++)u=l[2*p],u.isMorph&&(console.assert(b.includes(u),"????"),w=e[p].start,u.owner!==this&&this.addMorph(u),
q&&(q.has(u)?q.get(u).anchor.position=w:(w=this.addAnchor(Object.assign({id:"embedded-"+u.id},w)),Nc.connect(w,"position",u,"position",{updater:function(A,C){var D=this.targetObj.owner,L=this.targetObj;C=D&&D.isText?D.charBoundsFromTextPosition(C).topLeft().subPt(D.origin):L.position;D&&(D._positioningSubmorph=L);A(C);D&&(D._positioningSubmorph=!1)}}).update(w.position),q.set(u,{anchor:w}))))}},{key:"applyJsDiffPatch",value:function(b){function e(A,C,D,L){var I=p.indexToPosition(A+D),S=p.indexToPosition(C+
D);L.push(p.deleteText({start:I,end:S}));return D-(C-A)}function l(A,C,D,L){L.push(p.insertText(C,p.indexToPosition(A+D)));return D}var p=this,q=[],u=0,w=0;b=$jscomp.makeIterator(b);for(var y=b.next();!y.done;y=b.next())y=y.value,y.removed?w=e(u,u+y.count,w,q):y.added&&(w=l(u,y.value,w,q)),u+=y.count;return q}},{key:"applyTextChanges",value:function(b,e,l,p){e=void 0===e?0:e;l=void 0===l?!0:l;var q=[];b=$jscomp.makeIterator(b);for(var u=b.next();!u.done;u=b.next()){var w=$jscomp.makeIterator(u.value);
u=w.next().value;var y=w.next().value;w=w.next().value;e&&(y="number"===typeof y?y:this.positionToIndex(y),w&&"string"!==typeof w&&!Array.isArray(w)&&(w=("number"===typeof w?w:this.positionToIndex(w))+e),y+=e);y="number"===typeof y?this.indexToPosition(y):y;switch(u){case "delete":case "remove":u="number"===typeof w?this.indexToPosition(w):w;q.push(this.deleteText({start:y,end:u},p));break;case "insert":q.push(this.insertText(w,y,l,p));break;default:console.warn("[applyTextChanges] unknown type: "+
u)}}return q}},{key:"modifyLines",value:function(b,e,l){var p=this;l=Nc.arr.range(b,e).map(function(q){return p.getLine(q)}).map(l).join("\n")+"\n";this.deleteText({start:{row:b,column:0},end:{row:e+1,column:0}},!1);this.insertText(l,{row:b,column:0})}},{key:"modifySelectedLines",value:function(b){var e=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(e.start.row,e.end.row,b)}},{key:"withLinesDo",value:function(b,e,l){var p=this;return Nc.arr.range(b,
e).map(function(q){var u=p.getLine(q);q=Nc.Range.create(q,0,q,u.length);return l(u,q)})}},{key:"withSelectedLinesDo",value:function(b){var e=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,l=e.start.row;e=e.end;var p=e.row;return this.withLinesDo(l,0===e.column&&p>l?p-1:p,b)}},{key:"joinLine",value:function(b){b=void 0===b?this.cursorPosition.row:b;var e=this.getLine(b),l=this.getLine(b+1);l=e+l.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,
row:b},end:{column:0,row:b+2}},l,!0);return{row:b,column:e.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(b,e){var l=this;b=void 0===b?this.selection.range:b;e=Object.assign({time:1E3,fill:Nc.Color.orange},e);var p=e.id||"flash"+Nc.string.newUUID();this.addMarker({id:p,range:b,style:{"background-color":e.fill.toCSSString(),"pointer-events":"none"}});Nc.fun.debounceNamed("flash-"+p,e.time,function(){return l.removeMarker(p)})()}},
{key:"addTextAttribute",value:function(b,e){var l=this;e=void 0===e?this.selection:e;var p={start:e.start,end:e.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[b,p],undo:{target:this,selector:"removeTextAttribute",args:[b,p]}},function(){l.document.mixinTextAttribute(b,p);l.onAttributesChanged(p);l.consistencyCheck()});this.undoManager.undoStop();return b}},{key:"removeTextAttribute",value:function(b,e){var l=this;
e=void 0===e?this.selection:e;var p={start:e.start,end:e.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[b,p],undo:{target:this,selector:"addTextAttribute",args:[b,p]}},function(){l.document.mixoutTextAttribute(b,p);l.onAttributesChanged(p);l.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(b){this.document.setTextAttributesWithSortedRanges(b);this.consistencyCheck();
for(var e=0;e<b.length;)this.onAttributesChanged(b[e]),e+=2}},{key:"textAttributeAt",value:function(b){return this.document.textAttributeAt(b)}},{key:"textAttributeAtPoint",value:function(b){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,b))}},{key:"textAndAttributesInRange",value:function(b){b=void 0===b?this.selection.range:b;return this.document.textAndAttributesInRange(b)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);
this.consistencyCheck()}},{key:"onAttributesChanged",value:function(b){this.invalidateTextLayout(!1,!1);var e=this.textLayout;e&&e.resetLineCharBoundsCacheOfRange(this,b);this.makeDirty()}},{key:"styleAt",value:function(b){return(b=this.textLayout.chunkAtPos(this,b))?b.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(b){b=void 0===b?this.selection:b;return this.textAndAttributesInRange(b).filter(function(e,l){return 0!=l%2}).reduce(function(e,l){for(var p in l){var q=
l[p];if(!e.hasOwnProperty(p)||void 0!==q&&null!==q)e[p]=q}return e},{})}},{key:"setStyleInRange",value:function(b,e){var l=this;e=void 0===e?this.selection:e;for(var p=this.textAndAttributesInRange(e),q={start:Object.assign({},e.start),end:Object.assign({},e.start)},u=[],w=0;w<p.length;w+=2){var y=p[w],A=p[w+1],C=-1;"string"!==typeof y&&(y=Nc.objectReplacementChar);for(;-1<(C=y.indexOf("\n"));)0<C&&(q.end.column+=C,u.push(q,A)),q={row:q.end.row+1,column:0},q={start:q,end:Object.assign({},q)},y=y.slice(C+
1);q.end.column+=y.length;u.push(q,A);q={start:Object.assign({},q.end),end:Object.assign({},q.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[b,e],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[u]}},function(){l.document.setTextAttribute(b,e);l.consistencyCheck();l.onAttributesChanged(e)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(b){b=void 0===b?this.selection:b;
for(var e=this.document.textAndAttributesInRange(b),l={},p=0;p<e.length;p+=2)Object.assign(l,e[p+1]);this.removeTextAttribute(l,b)}},{key:"changeStyleProperty",value:function(b,e,l){var p=this;l=void 0===l?this.selection:l;l=this.getStyleInRange(l)[b];var q=e(l);this.selections.forEach(function(u){var w={};return p.addTextAttribute((w[b]=q,w),u)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var b=
this;return this.selections.map(function(e){var l=b.charBoundsFromTextPosition(e.start),p=b.charBoundsFromTextPosition(e.end);return e.start.row===e.end.row?l.union(p):Nc.rect(Nc.pt(b.padding.left(),l.top()),Nc.pt(b.width-b.padding.left(),p.bottom()))}).reduce(function(e,l){return l.union(e)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return Nc.eqPosition(this.cursorPosition,this.documentEndPosition)}},
{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(b){return this.selection.goUp(void 0===b?1:b)}},{key:"cursorDown",value:function(b){return this.selection.goDown(void 0===b?1:b)}},{key:"cursorLeft",value:function(b){return this.selection.goLeft(void 0===b?1:b)}},{key:"cursorRight",value:function(b){return this.selection.goRight(void 0===b?1:b)}},{key:"getPositionAboveOrBelow",value:function(b,e,l,p,q){function u(C,D){C=
C.slice();C.push({x:Nc.arr.last(C).x+Nc.arr.last(C).width});for(var L=0,I=Infinity,S=0;S<C.length;S++){var V=Math.abs(C[S].x-D);V<I&&(I=V,L=S)}return L}b=void 0===b?1:b;e=void 0===e?this.cursorPosition:e;l=void 0===l?!1:l;if(0===b)return e;"number"===typeof q&&(q-=this.padding.left());var w=e.row,y=e.column;if(l&&this.lineWrapping){w=this.textLayout.rangesOfWrappedLine(this,e.row);if(!w.length)return e;y=w.length-1-w.slice().reverse().findIndex(function(C){return C.start.column<=e.column});if(1<=
b){var A=0===y?0>=e.row?null:Nc.arr.last(this.textLayout.rangesOfWrappedLine(this,e.row-1)):w[y-1];if(!A)return e}else if(-1>=b&&(A=(w.length-1===y?e.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,e.row+1):w.slice(y+1))[0],!A))return e;w=A.start.row;y=this.textLayout.charBoundsOfRow(this,w).slice(A.start.column,A.end.column+1);y=A.start.column+u(y,q)}else w=Math.min(Math.max(0,e.row-b),this.lineCount()-1),"number"===typeof q&&(A=this.textLayout.charBoundsOfRow(this,w),y=u(A,q));
A={row:w,column:y};return 1<Math.abs(b)?this.getPositionAboveOrBelow(b+(1<b?-1:1),A,l,p,q):A}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;this.selection.selectLine(b,void 0===e?!1:e);return this.selection}},{key:"selectionOrLineString",value:function(){var b=this.selection,
e=b.start;return b.text||this.getLine(e.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(b,e,l){b=void 0===b?this.selection.range:b;e=void 0===e?Nc.pt(0,0):e;l=void 0===l?!0:l;var p=this.charBoundsFromTextPosition(b.start).top();b=this.charBoundsFromTextPosition(b.end).bottom()-p;this.scroll=b<this.height||!1===l?this.scroll.withY(p+b/2-this.height/2).addPt(e):this.scroll.withY(p).addPt(e)}},{key:"centerRow",value:function(b,
e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?Nc.pt(0,0):e;return this.alignRowAtTop(b,e.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?Nc.pt(0,0):e;this.scroll=this.charBoundsFromTextPosition({row:b,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(e)}},{key:"alignRowAtBottom",value:function(b,e){b=void 0===b?this.cursorPosition.row:b;e=void 0===e?Nc.pt(0,0):e;var l=this.charBoundsFromTextPosition({row:b,column:0}).height;
this.alignRowAtTop(b,e.addXY(0,-this.textPageHeight()+l))}},{key:"scrollPositionIntoView",value:function(b,e){e=void 0===e?Nc.pt(0,0):e;if(this.isClip()){var l=this.scroll;l=this.innerBounds().translatedBy(l).insetByRect(this.padding).insetBy(this.borderWidth);b=this.charBoundsFromTextPosition(b);this.lineWrapping||(b=b.insetByPt(Nc.pt(-20,0)));var p=20<l.bottom()-b.bottom()?"bottomLeft":"topLeft";l=b[p]().subPt(l.translateForInclusion(b)[p]()).addPt(e);if(0!=l.x||0!=l.y)this.scroll=this.scroll.addPt(l).addPt(e),
this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(b,e){var l=this;e=void 0===e?this.cursorPosition:e;var p=this.scroll;e=this.selection.lead;var q=this.charBoundsFromTextPosition(e).y-p.y;p=!1;var u=function(){return l.scroll=l.scroll.withY(l.charBoundsFromTextPosition(e).y-q)};try{var w=b();p=w&&w instanceof Promise}finally{!p&&u()}p&&Nc.promise.finally(w,u);return w}},{key:"saveExcursion",value:function(b,e){var l=this;e=Object.assign({useAnchors:!1},
e);var p=this.selection.isMultiSelection?this.selection.selections.map(function(y){return y.directedRange}):[this.selection],q=e.useAnchors?p.map(function(y){var A=y.end;return[l.addAnchor(Object.assign({},y.start,{id:"save-excursion-"+Nc.string.newUUID()})),l.addAnchor(Object.assign({},A,{id:"save-excursion-"+Nc.string.newUUID()}))]}):null,u=!1;e=e.useAnchors?function(){var y=q.map(function(A){var C=$jscomp.makeIterator(A);A=C.next().value.position;C=C.next().value.position;return{start:A,end:C}});
l.selections=y;q.forEach(function(A){var C=$jscomp.makeIterator(A);A=C.next().value;C=C.next().value;l.removeAnchor(A);l.removeAnchor(C)})}:function(){return l.selections=p};try{var w=this.keepPosAtSameScrollOffsetWhile(b);u=w&&w instanceof Promise}finally{!u&&e()}u&&Nc.promise.finally(w,e);return w}},{key:"alignRow",value:function(b,e){e=void 0===e?"center":e;if(this.isClip()){var l=this.scroll,p=this.padding;l=this.innerBounds().insetByRect(p).translatedBy(l);b=this.charBoundsFromTextPosition({row:b,
column:0});if(e="top"===e||"bottom"===e?l[e]()-b[e]():"center"===e?l[e]().y-b[e]().y:0)this.scroll=this.scroll.addXY(0,-e)}}},{key:"fit",value:function(){var b=this,e=this.viewState,l=this.fixedWidth,p=this.fixedHeight;e._needsFit=!1;if(p&&l||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var q=this.textBounds().outsetByRect(this.padding),u=function(){p||b.height==q.height||(b.height=q.height);l||b.width==q.width||(b.width=q.width);b.embeddedMorphs.forEach(function(w){w=b.embeddedMorphMap.get(w).anchor;
w.position=w.position})};e._needsFit=!1;this.document.lines.find(function(w){return w.hasEstimatedExtent})?this.whenRendered().then(u):u();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var b=this.padding;return b.top()+b.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(b){if(!this.lineWrapping)return b.column;var e=this.screenLineRange(b,
!0).start.column;return b.column-e}},{key:"textPositionFromPoint",value:function(b){return this.textLayout.textPositionFromPoint(this,b)}},{key:"charBoundsFromTextPosition",value:function(b){return this.textLayout.boundsFor(this,b)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"aboutToRender",this).call(this,b)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();Sb._get(Object.getPrototypeOf(k.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(b){return this.textRenderer.renderMorph(this,b)}},{key:"directRender",value:function(){var b=this.env.renderer,e=this.textRenderer;b&&e&&!b._stopped&&(Nc.renderSubTree(this,b),e.manuallyTriggerTextRenderHook(this,b))}},{key:"onMouseDown",value:function(b){if(!b.rightMouseButtonPressed()){this.activeMark&&
(this.activeMark=null);var e=b.state;if(e.clickedOnMorph===this){e=(e.clickCount-1)%3+1;var l=this.localize(b.position),p=this.textPositionFromPoint(l);b.leftMouseButtonPressed()&&!b.isShiftDown()&&!b.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(b,l);this.selectable&&(b.isShiftDown()?this.selection.lead=p:b.isAltDown()?this.selection.addRange(Nc.Range.at(p)):(this.selection.disableMultiSelect(),1===e?b.isShiftDown()?this.selection.lead=p:this.selection={start:p,end:p}:2===e?this.execCommand("select word",
null,1,b):3===e&&this.execCommand("select line",null,1,b)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(b){var e="lively://text-doit/"+this.id;lively.modules.module(e);return{context:b.context||this,format:"esm",targetModule:e}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(b,e){var l=this;e=(e=this.textAttributeAtPoint(e)||[],e.doit);if(!e||!e.code)return!1;var p=this.evalEnvForDoit(e),q=lively.modules.module(p.targetModule);q.recorder.evt=
b;lively.vm.runEval(e.code,p).catch(function(u){return l.world().logError(Error("Error in text doit: "+u.stack))}).then(function(){return q.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(b){b.leftMouseButtonPressed()&&this.selectable&&b.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(b.position)))}},{key:"selectMatchingBrackets",value:function(b,e){function l(A){return"\t"===A||" "===A}function p(A,C,D,L,I){for(var S=1;(0>I?0<=L-1:L+1<A.length)&&
(L+=I,A[L]==C&&C!=D&&S++,A[L]==D&&S--,0!=S););return L}function q(A,C,D,L){for(var I=C;0>D?0<=I-1:I+1<A.length;)if(I+=D,A[I]==L)return 0<D?[C,I]:[I+1,C];return 0<D?[C+1,A.length-1]:[0,C]}if(!b)return e;if(0==e||e==b.length)return[0,b.length-1];var u=e-1;if(0<e){if("\n"==b[e-1]||"\r"==b[e-1])return q(b,e,1,b[e-1]);var w="*({[<'\"`".indexOf(b[e-1]);"*"==b[e-1]&&(0>e-2||"/"!=b[e-2])&&(w=-1);if(0<=w)return u=p(b,"*({[<'\"`"[w],"*)}]>'\"`"[w],e-1,1),[e,u-1]}if(e<b.length){if("\n"==b[e]||"\r"==b[e])return q(b,
e,-1,b[e]);w="*)}]>'\"`".indexOf(b[e]);"*"==b[e]&&(e+1>=b.length||"/"!=b[e+1])&&(w=-1);if(0<=w)return e=p(b,"*)}]>'\"`"[w],"*({[<'\"`"[w],e,-1),[e+1,u]}if("/"===b[e-1]&&"/"===b[e-2]){for(;u+1<b.length&&"\n"!==b[u+1]&&"\r"!==b[u+1];)u++;return[e,u]}w=e;for(var y=u;0<=w-1&&l(b[w-1]);)w--;for(;y<b.length&&l(b[y+1]);)y++;if(1<=y-w)return[w,y];for(w=e<b.length?b[e]:"";0<=e-1&&((b[e-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=b[e-1]?0:0<="0123456789".indexOf(w)));)w=b[e-1],e--;for(;u+1<b.length&&((b[u+1]||
"").match(/^[a-zA-Z0-9\-]+$/)||("."!=b[u+1]?0:0<="0123456789".indexOf(w)));)w=b[u+1],u++;return[e,u]}},{key:"onContextMenu",value:function(b){var e=this;if(b.targetMorph===this){b.stop();var l=this.textPositionFromPoint(this.localize(b.position)),p=this.selection.selections||[this.selection];if(this.selection.isEmpty()||p.every(function(q){return!q.range.containsPosition(l)}))this.cursorPosition=l;Promise.resolve(this.menuItemsForContextMenu()).then(function(q){return e.openMenu(q,b)}).catch(function(q){return $world.logError(q)})}}},
{key:"onDrop",value:function(b){var e=b.hand.grabbedMorphs.filter(function(p){return p.isLayoutable});Sb._get(Object.getPrototypeOf(k.prototype),"onDrop",this).call(this,b);if(e[0]){var l=this.textPositionFromPoint(this.localize(b.hand.globalPosition));this.insertText([e[0],null],l);e[0].opacity=b.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(b){var e=this;if(b.simpleDrop)return null;var l=this.whatsVisible,p=l.startRow;l=Math.min(this.documentEndPosition.row,l.endRow);var q=
this.document,u=this.padding.left(),w=this.padding.top();p=Nc.arr.range(p,l).reduce(function(y,A){var C=e.textLayout.charBoundsOfRow(e,A).slice();1<=C.length&&0==Nc.arr.last(C).width&&(Nc.arr.last(C).width=12);if(1<C.length){var D=Nc.arr.last(C);C.push({x:D.x+D.width,y:D.y,height:D.height,width:D.width||12})}C=C.map(function(L,I){L=Nc.Rectangle.fromLiteral(L).translatedBy(Nc.pt(u,w+q.computeVerticalOffsetOf(A)));var S=e.getGlobalTransform().transformRectToRect(L);return{textPos:{row:A,column:I},bounds:L,
globalBounds:S,morph:b.showDropGrid?Nc.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:L,border:{width:1,color:Nc.Color.green},fill:null}):null}});return y.concat(C)},[]);p.forEach(function(y){return y.morph&&e.addMorph(y.morph)});return p}},{key:"onDropHoverIn",value:function(b){var e={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?
window.useTextFlowPlaceholder:!1},l=b.hand.grabbedMorphs[0];l&&(b.state.originalOpacity=l.opacity,l.opacity=.3);l=this.buildDropHoverGrid(e);b=b.state.dropHover||(b.state.dropHover=new WeakMap);var p=b.get(this);p||(p={},b.set(this,p));p.config=e;p.dropGrid=l}},{key:"onDropHoverUpdate",value:function(b){var e=b.hand.grabbedMorphs[0];if(e){var l=b.state.dropHover;if(l&&(l=l.get(this)))if(l.dropGrid){var p=l.config;b=b.positionIn(this);for(var q,u,w=Infinity,y=$jscomp.makeIterator(l.dropGrid),A=y.next();!A.done;A=
y.next()){A=A.value;if(A.bounds.containsPoint(b)){q=A;break}var C=A.bounds.closestPointToPt(b).dist(b);C<w&&(w=C,u=A)}q||(q=u);q&&(u=l.placeholder,u||(l.placeholder=u=Nc.morph({fill:e.fill,extent:e.extent,reactsToPointer:!1,acceptsDrops:!1})),Nc.obj.equals(u._textPos||{},q.textPos)||(this!==u.owner&&this.addMorph(u),u.position=q.bounds.topLeft(),p&&p.useTextFlowPlaceholder&&(u.remove(),u._textPos=q.textPos,this.insertText([u,null],q.textPos))))}else e=this.textPositionFromPoint(b.positionIn(this)),
this.focus(),this.cursorPosition=e}}},{key:"onDropHoverOut",value:function(b){var e=b.hand.grabbedMorphs[0];e&&(e.opacity=b.state.originalOpacity||1);if(b=b.state.dropHover)if(e=b.get(this))b.delete(this),e.dropGrid&&(e.dropGrid.forEach(function(l){return l.morph&&l.morph.remove()}),e.dropGrid=null),e.placeholder&&(e.placeholder.remove(),e.placeholder=null)}},{key:"menuItems",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return e=
$jscomp,l=e.makeIterator,w.yield(Promise.all([Sb._get(Object.getPrototypeOf(k.prototype),"menuItems",b).call(b),b.menuItemsForContextMenu()]),2);p=l.call(e,w.yieldResult);q=p.next().value;u=p.next().value;return w.return(q.concat({isDivider:!0}).concat(u))})}},{key:"menuItemsForContextMenu",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:e=[{command:"text undo",alias:"undo",target:b,showKeyShortcuts:!0},{command:"text redo",
alias:"redo",target:b,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:b,showKeyShortcuts:b.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:b,showKeyShortcuts:b.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:b},{isDivider:!0},{command:"toggle line wrapping",alias:(b.lineWrapping?"disable":"enable")+" line wrapping",target:b,showKeyShortcuts:!0},
["run command",function(){b.focus();b.world().execCommand("run command")}]],l=$jscomp.makeIterator(b.plugins),p=l.next();case 2:if(p.done){u.jumpTo(4);break}q=p.value;if("function"!==typeof q.getMenuItems){u.jumpTo(3);break}return u.yield(q.getMenuItems(e),6);case 6:e=u.yieldResult;case 3:p=l.next();u.jumpTo(2);break;case 4:return u.return(e)}})}},{key:"keybindings",get:function(){var b=this.world();b=b&&b.getCurrentUser()&&b.getCurrentUser().config&&b.getCurrentUser().config.textKeyBindings||[];
b=Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat(b).concat(Nc.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",b)}},{key:"keybindings",set:function(b){Sb._set(Object.getPrototypeOf(k.prototype),"keybindings",b,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var b=Sb._get(Object.getPrototypeOf(k.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=b=this.pluginCollect("getKeyHandlers",
b)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);Nc.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(b){this.compositionRange||b.targetMorph!=this||(this.selection.cursorBlinkStart(),
Nc.KeyHandler.invokeKeyHandlers(this,b,!0))}},{key:"onTextInput",value:function(b){Nc.KeyHandler.invokeKeyHandlers(this,b,!1)}},{key:"onCompositionStart",value:function(b){this.insertTextAndSelect(b.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(b){this.selection.range=this.compositionRange;this.selection.text=[b.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(b){this.selection.range=
this.compositionRange;this.selection.text=b.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(b){if(!this.rejectsInput()&&this.isFocused()&&!Nc.config.emacs)this.onCopy(b,!this.rejectsInput())}},{key:"onCopy",value:function(b,e){e=void 0===e?!1:e;if(this.isFocused()){b.stop();var l=this.selection;try{for(var p=this.textAndAttributesInRange(this.selection.range),q=this.defaultTextStyle,u={},w=0;w<p.length;w+=2){var y=p[w];if(y.isMorph)if(y.isDisplacementMorph)p[w]=
"";else{var A=u[w]=Nc.serializeMorph(p[w]);p[w]=Nc.deserializeMorph(A,{reinitializeIds:!0})}}var C=Nc.extractHTMLFromTextMorph(this,p);b.domEvt.clipboardData.setData("text/html",C);for(var D in u)p[D]=u[D];var L=JSON.stringify({textAndAttributes:p,defaultTextStyle:q});b.domEvt.clipboardData.setData("application/x-lively-text",L)}catch(I){$world.logError(I)}b.domEvt.clipboardData.setData("text/plain",l.text);this.execCommand("manual clipboard copy",{collapseSelection:Nc.config.codeEditor.collapseSelection||
!1,delete:e,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(b){var e=this;if(!this.rejectsInput()){b.stop();var l="";try{l=b.domEvt.clipboardData.getData("text")}catch(w){console.warn(w)}if(!this.editorPlugin)try{var p=b.domEvt.clipboardData.getData("application/x-lively-text");var q=p&&JSON.parse(p);var u=q.textAndAttributes;for(b=0;b<u.length;b+=2)"string"!==typeof u[b]&&(u[b]=Nc.deserializeMorph(u[b],{reinitializeIds:!0}))}catch(w){console.warn(w)}u=this.selection;u=u.isMultiSelection?
u.selections:[u];q&&this.undoManager.group();u.forEach(function(w){q?e.replace(w.range,q.textAndAttributes,!1,!0,!0):w.text=l;e.saveMark(w.start);w.collapseToEnd()});q&&this.undoManager.group()}}},{key:"onFocus",value:function(b){var e=this;Sb._get(Object.getPrototypeOf(k.prototype),"onFocus",this).call(this,b);this.makeDirty();this.selection.cursorBlinkStart();if(!this._originalShadow){var l=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue;l&&!l.equals&&(l=
new Nc.ShadowObject(l));l&&!l.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow);this.withMetaDo({metaInteraction:!0},function(){e.highlightWhenFocused&&e.animate({dropShadow:l,duration:200})})}}},{key:"onBlur",value:function(b){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;Sb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b)}},{key:"onScroll",
value:function(b){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(b=this.env.renderer.getNodeForMorph(this))&&Nc.signal(this,"viewChanged",{prop:"scroll",value:Nc.pt(b.scrollLeft,b.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var b=this.padding,e=this.borderWidthBottom,l=this.borderWidthTop;return this.height-b.top()-
b.bottom()-e-l}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(b){var e=b=void 0===b?{direction:"up",select:!1}:b;b=e.direction;e=e.select;var l=this.textLayout["down"===b?"lastFullVisibleLine":"firstFullVisibleLine"](this),p=this.cursorPosition.column,q=this.padding;e?this.selection.lead={row:l,column:p}:this.cursorPosition={row:l,column:p};"down"===b?this.alignRowAtTop(l,
Nc.pt(0,-q.top()-q.bottom())):(this.alignRowAtBottom(l,Nc.pt(0,0)),this.alignRowAtBottom(l,Nc.pt(0,q.top()+q.bottom())))}},{key:"gotoDocumentStart",value:function(b){b=void 0===b?{select:!1}:b;this.selection.lead={row:0,column:0};b&&b.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(b){b=void 0===b?{select:!1}:b;this.selection.lead=this.documentEndPosition;b&&b.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(b){if(this.isLineEmpty(b)){for(var e=
b-1;0<=e;e--)if(!this.isLineEmpty(e)){var l=e;break}if(void 0===l)return{start:{row:b,column:0},end:{row:b,column:0}}}else l=b;return this.paragraphRange(l)}},{key:"paragraphRangeBelow",value:function(b){var e=this.isLineEmpty(b),l=this.documentEndPosition;if(e){for(e=b+1;e<=l.row;e++)if(!this.isLineEmpty(e)){var p=e;break}if(void 0===p)return{start:{row:b,column:0},end:{row:b,column:0}}}else p=b;return this.paragraphRange(p)}},{key:"paragraphRange",value:function(b){if(this.isLineEmpty(b))return{start:{row:b,
column:0},end:{row:b,column:0}};var e=this.documentEndPosition;for(b+=1;b<=e.row;b++)if(this.isLineEmpty(b)){var l={row:b-1,column:this.getLine(b-1).length};break}l||(l=e);for(b=l.row-1;0<=b;b--)if(this.isLineEmpty(b)){var p={row:b+1,column:0};break}p||(p={row:0,column:0});return{start:p,end:l}}},{key:"astNodeRange",value:function(b){return{start:this.document.indexToPosition(b.start),end:this.document.indexToPosition(b.end)}}},{key:"parseIntoLines",value:function(b){return b.split("\n")}},{key:"computeTextRangeForChanges",
value:function(b){function e(w,y){for(var A="",C=0;C<w.length;C+=2)A+="string"===typeof w[C]?w[C]:Nc.objectReplacementChar;w=p.parseIntoLines(A);return 1===w.length?Nc.Range.fromPositions(y,{row:y.row,column:y.column+w[0].length}):1<w.length?Nc.Range.fromPositions(y,{row:y.row+w.length-1,column:Nc.arr.last(w).length}):Nc.Range.at(y)}var l=Nc.Range.at(this.cursorPosition);if(!b.length)return l;var p=this,q=b[0];l="replace"===q.selector?e(q.args[1],q.args[0].start):l;for(q=1;q<b.length;q++){var u=b[q];
l="replace"===u.selector?l.merge(e(u.args[1],u.args[0].start)):l}return l}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var b=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new Nc.UndoManager(function(e){return b.includes(e.selector)})}},{key:"textUndo",value:function(){var b=this.undoManager.undo();b&&(b=b.changes.slice().reverse().map(function(e){return e.undo}),this.selection=this.computeTextRangeForChanges(b))}},
{key:"textRedo",value:function(){var b=this.undoManager.redo();b&&(b=b.changes.slice(),this.selection=this.computeTextRangeForChanges(b))}},{key:"findMatchingForward",value:function(b,e,l){e=void 0===e?"right":e;l=void 0===l?{}:l;var p=this["right"===e?"charRight":"charLeft"](b),q=l[p];if(!q)return null;var u="right"===e?-1:0;return this.document.scanForward(b,function(w,y){if(w===q){if(0===u)return"right"===e?{row:y.row,column:y.column+1}:y;u--}else w===p&&u++;return null})}},{key:"findMatchingBackward",
value:function(b,e,l){e=void 0===e?"right":e;l=void 0===l?{}:l;var p=this["right"===e?"charRight":"charLeft"](b),q=l[p];if(!q)return null;var u="left"===e?-1:0;return this.document.scanBackward(b,function(w,y){if(w===q){if(0===u)return"right"===e?{row:y.row,column:y.column+1}:y;u--}else w===p&&u++;return null})}},{key:"search",value:function(b,e){e=void 0===e?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:e;return(new Nc.TextSearcher(this)).search(Object.assign({needle:b},e))}},{key:"searchForAll",
value:function(b,e){e=void 0===e?{caseSensitive:!1}:e;return(new Nc.TextSearcher(this)).searchForAll(Object.assign({needle:b},e))}},{key:"tokenAt",value:function(b){return this.pluginInvokeFirst("tokenAt",b)}},{key:"astAt",value:function(b){return this.pluginInvokeFirst("astAt",b)}},{key:"evalEnvironment",get:function(){var b=this.editorPlugin;return b&&b.evalEnvironment}},{key:"evalEnvironment",set:function(b){var e=this.editorPlugin;e&&(e.evalEnvironment=b)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(b){(this.evalEnvironment||{}).context=b}},{key:"logDoit",value:function(b,e){e=void 0===e?{}:e;e=void 0===e.time?Date.now():e.time;if(!(12E4<b.length)){try{var l=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(p){}l||(l=[]);if(!l.some(function(p){return"string"===typeof p?p===b:p.source===b})){l.push({source:b,time:e});50<l.length&&(l=l.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(l)}catch(p){}}}}},{key:"doEval",
value:function(b,e,l){b=void 0===b?this.selection.isEmpty()?this.lineRange():this.selection.range:b;l=void 0===l?this.textInRange(b):l;b=this.pluginFind(function(p){return p.isEditorPlugin&&"function"===typeof p.runEval});if(!b)throw Error("doit not possible: cannot find js editor plugin of !"+this);e&&e.logDoit&&this.logDoit(l,e);return b.runEval(l,e)}},{key:"maybeSelectCommentOrLine",value:function(){var b=this.selection,e=b.lead,l=e.row;e=e.column;var p=this.selectionOrLineString();if(b.isEmpty()){var q=
p.indexOf("//");-1===q||e<q||0<q&&0<=":\"'".indexOf(p[q-1])?this.selectLine(l):b.range={start:{row:l,column:q+2},end:{row:l,column:p.length}}}}},{key:"debugHelper",value:function(b){b=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},b);return this._debugHelper?Object.assign(this._debugHelper,b):this._debugHelper=Object.assign({},b,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(e){for(var l=[],p=0;p<arguments.length;++p)l[p-0]=arguments[p];
console.log.apply(console,$jscomp.arrayFromIterable(l));this.logged.push({args:l})},dump:function(e){console.log(e.split("\n").map(function(l){return l.slice(0,100)}).join("\n"));this.logged.push({dump:e})},group:function(e){this.groups.push([]);this.logged=Nc.arr.last(this.groups);console.group(e)},groupEnd:function(e){console.groupEnd(e)},steps:function(e){for(var l=[];e.length;){var p=Nc.arr.takeWhile(e,function(u){return!u.dump});e=e.slice(p.length);var q=(e.shift()||{}).dump;l.push({actions:p,
dump:q})}return l},printToConsole:function(){var e=this;console.clear();this.groups.forEach(function(l){var p=e.steps(l);console.group(p.length);e.steps(l).forEach(function(q,u){q=q.actions;console.group("step "+(u+1));q.forEach(function(w){return console.log.apply(console,$jscomp.arrayFromIterable(w.args))});console.groupEnd("step "+(u+1))});console.groupEnd(p.length)})},report:function(){var e=this,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=C.nextAddress)return l=C.yieldResult,C.yield(System.import("lively.ide/diff/editor-plugin.js"),3);p=C.yieldResult;q=p.default;u=0;w="";y=[];A=0;e.groups.forEach(function(D,L){w+=">>> group "+(L+1)+"\n";A++;u++;var I=e.steps(D);I.forEach(function(S,V){var ba=S.actions;S=S.dump;w+=Nc.string.indent(">>> step "+(V+1)," ",u)+"\n";A++;u++;ba.forEach(function(ua){ua=Nc.string.indent(Nc.string.formatFromArray(ua.args.slice()).trim()," ",u);A+=ua.split("\n").length;
w+=ua+"\n"});1<=V&&S&&I[V-1].dump&&(ba=new q,S=l.createPatch(String(V),I[V-1].dump,S),ba.tokenize(S),y.push.apply(y,$jscomp.arrayFromIterable(ba.styledRanges(A,u))),w+=S,A+=S.split("\n").length-1);w+=Nc.string.indent("<< step "+(V+1)," ",u)+"\n";A++;u--});w+="<<< group "+(L+1)+"\n";A++;u--});return C.return({report:w,reportStyles:y})})},openReport:function(){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(e.report(),2);l=u.yieldResult;
p=l.reportStyles;q=l.report;return u.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:q,rangesAndStyles:p}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(p){var b=this.document;this.brokenDocument||(this.brokenDocument=b);var e=this.world()||$world;try{var l=new Nc.Document([]);l.textAndAttributes=b.textAndAttributes;this.changeDocument(l)}catch(q){e?
e.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}e?e.logError(p):console.error(p)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(b,e){return new Nc.morph(Object.assign({type:"label",value:b,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:Nc.Color.almostBlack,fontSize:11},e))}},{key:"makeInputLine",value:function(b){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(b)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var b=this.prototype.propertiesAndPropertySettings().properties,e=this.defaultTextStyleProps,l={},p=0;p<e.length;p++){var q=e[p];l[q]=b[q].defaultValue}return this._defaultTextStyle=l}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var b=this.prototype.propertiesAndPropertySettings().properties,e=[],l;for(l in b)b[l].isDefaultTextStyleProp&&
e.push(l);return this._defaultTextStyleProps=e}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(b){this.setProperty("clipMode",b);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new Nc.Renderer(this.env)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new Nc.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=Nc.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==Nc.config.text.useSoftTabs?Nc.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:Nc.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var b=this,e=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&e&&this.owner&&(this._measuringTextBox=!0,Nc.noUpdate(function(){b.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(b){this.setProperty("readOnly",b)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,set:function(b){this.setProperty("selectable",b);b||this.selection.collapse()}},padding:{group:"styling",type:"Rectangle",isStyleProp:!0,after:["textLayout",
"viewState"],defaultValue:Nc.Rectangle.inset(0),set:function(b){this.setProperty("padding","number"===typeof b?Nc.Rectangle.inset(b):b)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(b){this.setProperty("highlightWhenFocused",b);b&&!this.haloShadow&&(this.haloShadow={blur:6,color:Nc.Color.rgb(52,152,219),distance:0,rotation:45})}},cursorPosition:{group:"selection",derived:!0,after:["selection"],
get:function(){return this.selection.lead},set:function(b){this.selection.range={start:b,end:b}}},cursorWidth:{defaultValue:1,type:"Number"},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var b=this.getProperty("selection");if(b)return b;b=new (Nc.config.text.useMultiSelect?Nc.MultiSelection:Nc.Selection)(this);this.setProperty("selection",b);return b},set:function(b){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,
this);b?b.isSelection?this.setProperty("selection",b):this.selection.range=b:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(b){var e=this;this.selection=b[0];this.selection.isMultiSelection&&b.slice(1).forEach(function(l){return e.selection.addRange(l)})}},textString:{group:"text",
after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(b){b=null!=b?String(b):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(b,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var b=this.textAndAttributes;if(1===b.length){var e=$jscomp.makeIterator(b[0]),
l=e.next().value;e=e.next().value;if(!Object.keys(e||{}).length)return l}return b},set:function(b){"string"===typeof b?this.textString=b:this.textAndAttributes=b}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(b){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},b)}},defaultTextStyleProps:{group:"_internal",
readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return Nc.obj.select(this,this.defaultTextStyleProps)},set:function(b){Object.assign(this,b)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var b={},e=this.defaultTextStyleProps,l=this.constructor.defaultTextStyle,p=0;p<e.length;p++){var q=e[p],u=this[q];u!==l[q]&&(b[q]=u)}return b}},nativeCursor:{defaultValue:"text",
isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:Nc.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"],set:function(b){this.setProperty("fontFamily",Nc.sanitizeFont(b))}},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:Nc.Color.rgba(212,
230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:Nc.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:Nc.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},
fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,
isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document",
"defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(b){var e=this,l=Nc.arr.withoutAll(b,this.anchors);Nc.arr.withoutAll(this.anchors,b).forEach(function(p){return e.removeAnchor(p)});
l.forEach(function(p){return e.addAnchor(p)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(b){var e=this;b=b.map(function(p){return p.isAnchor?p:e.addAnchor(Object.assign({},p,{id:"saved-mark-"+Nc.string.newUUID()}))});var l=this.savedMarks.filter(function(p){return!b.includes(p)});b>Nc.config.text.markStackSize&&l.push.apply(l,$jscomp.arrayFromIterable(b.splice(0,b.length-Nc.config.text.markStackSize)));l.map(function(p){return e.removeAnchor(p)});
return this.setProperty("savedMarks",b)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var b=this.activeMark;return b?b.position:null}},activeMark:{group:"core",after:["anchors"],set:function(b){if(b)b=this.addAnchor(b.isAnchor?b:Object.assign({},b,{id:"saved-mark-"+Nc.string.newUUID()}));else{var e=this.activeMark;this.savedMarks.includes(e)||this.removeAnchor(e)}this.setProperty("activeMark",b)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(b){var e=
this,l=this.getProperty("plugins");Nc.arr.withoutAll(l,b).forEach(function(p){return p&&e.removePlugin(p)});b.forEach(function(p){return p&&e.addPlugin(p)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var b=this.editorPlugin;return b?b.shortName:null},set:function(b){this.changeEditorMode(b)}}}}}],d,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1319,end:113638})}(Nc.Morph));Nc.Text=Lo;Nc.Text=Lo;Nc.Text=Lo;var goa=Object.freeze({__proto__:null,Text:Lo}),qg=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");qg.obj=ff;qg.promise=Uf;qg.arr=Ne;qg.string=Bg;qg.properties=km;qg.Rectangle=Qd;qg.Color=qf;qg.signal=Ak;qg.connect=Mj;qg.vdom=gB;qg.Morph=Vi;qg.config=rk;qg.defaultStyle=pw;qg.defaultAttributes=qw;qg.Icon=Ql;qg.Icons=WH;qg.splitTextAndAttributesIntoLines=
sA;qg.h=qg.vdom.h;var Mo=Ia("O",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),k=d.hasOwnProperty("Label")&&"function"===typeof d.Label?d.Label:d.Label=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onChange",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);b.prop&&b.prop.includes("borderWidth")&&this.fit()}},{key:Symbol.for("lively-instance-initialize"),
value:function(b){var e=b=void 0===b?{}:b,l=e.fontMetric,p=e.position,q=e.rightCenter,u=e.leftCenter,w=e.topCenter,y=e.bottom,A=e.top,C=e.right,D=e.left,L=e.bottomCenter,I=e.bottomLeft,S=e.bottomRight,V=e.topRight,ba=e.topLeft,ua=e.center;e=e.extent;Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,qg.obj.dissoc(b,["fontMetric"]));l&&(this._fontMetric=l);this._cachedTextBounds=null;this.fit();void 0!==e&&(this.extent=e);void 0!==p&&(this.position=
p);void 0!==q&&(this.rightCenter=q);void 0!==u&&(this.leftCenter=u);void 0!==w&&(this.topCenter=w);void 0!==y&&(this.bottom=y);void 0!==A&&(this.top=A);void 0!==C&&(this.right=C);void 0!==D&&(this.left=D);void 0!==L&&(this.bottomCenter=L);void 0!==I&&(this.bottomLeft=I);void 0!==S&&(this.bottomRight=S);void 0!==V&&(this.topRight=V);void 0!==ba&&(this.topLeft=ba);void 0!==ua&&(this.center=ua)}},{key:"__additionally_serialize__",value:function(b,e,l,p){Sb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,b,e,l,p);this.autofit&&this.fitIfNeeded();b._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(b,e,l){Sb._get(Object.getPrototypeOf(k.prototype),"__after_deserialize__",this).call(this,b,e,l);b._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=qg.Rectangle.fromTuple(b._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return qg.obj.select(this,
"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent().addXY(this.borderWidthLeft+this.borderWidthRight,this.borderWidthTop+this.borderWidthBottom);this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return qg.splitTextAndAttributesIntoLines(this.textAndAttributes,
"\n")}},{key:"allFontsLoaded",value:function(){var b=this,e=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(l,p){if(p%2)return{fontFamily:l&&l.fontFamily||b.fontFamily,fontWeight:l&&l.fontWeight||b.fontWeight}}).filter(Boolean))).every(function(l){return e.isFontSupported(l.fontFamily,l.fontWeight)})}},{key:"whenFontLoaded",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.return(qg.promise.waitFor(5E3,
function(){return b.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",value:function(){var b=this._fontMetric||this.env.fontMetric,e=$jscomp.makeIterator(this.textAndAttributes),l=e.next().value;e=e.next().value;var p=Object.assign({},this.textStyle,{},e);e=this.padding;b.isProportional(p.fontFamily)?(b=b.sizeFor(p,l),l=b.width,b=b.height):(p=b.sizeFor(p,"x"),b=p.height,l=l.length*p.width);return new qg.Rectangle(0,0,Math.ceil(e.left()+e.right()+l),Math.ceil(e.top()+e.bottom()+b))}},{key:"textBoundsAllChunks",
value:function(){for(var b=this._fontMetric||this.env.fontMetric,e=this.padding,l=this.textStyle,p=this.textAndAttributesOfLines,q=!b.isProportional(l.fontFamily),u=b.sizeFor(l,"x").height,w=0,y=0,A=0;A<p.length;A++){var C=p[A];if(C.length){for(var D=0,L=0,I=0;I<C.length;I+=2){var S=C[I],V=C[I+1]||{},ba=Object.assign({},l,{},V);q&&!V.fontFamily||!b.isProportional(ba.fontFamily)?(ba=b.sizeFor(ba,"x"),V=ba.height,L+=S.length*ba.width,D=Math.max(D,V)):(S=b.sizeFor(ba,S),V=S.height,L+=S.width,ba.paddingRight&&
(L+=Number.parseInt(ba.paddingRight)),ba.paddingLeft&&(L+=Number.parseInt(ba.paddingLeft)),D=Math.max(D,V))}w+=D;y=Math.max(y,L)}else w+=u}return new qg.Rectangle(0,0,Math.ceil(e.left()+e.right()+y),Math.ceil(e.top()+e.bottom()+w))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var b=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=b.length?this.textBoundsSingleChunk():
this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();Sb._get(Object.getPrototypeOf(k.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var e=[],l=this.textAndAttributesOfLines.length,p=0;p<l;p++){for(var q=this.textAndAttributesOfLines[p],
u=0;u<q.length;u+=2){var w=q[u+1];e.push(this.renderChunk(q[u],w))}p<l-1&&e.push(qg.h("br"))}w=this.textStyle;var y=w.fontColor,A=w.fontSize;l=w.fontStyle;p=w.fontWeight;q=w.textShadow;u=w.textDecoration;var C=w.textStyleClasses,D=this.padding;w={fontFamily:w.fontFamily,fontSize:"number"===typeof A?A+"px":A,color:y?String(y):"transparent",position:"absolute",cursor:this.nativeCursor};y=qg.defaultAttributes(this,b);q&&(w.textShadow=q);"normal"!==p&&(w.fontWeight=p);"normal"!==l&&(w.fontStyle=l);"none"!==
u&&(w.textDecoration=u);C&&C.length&&(y.className=(y.className||"")+" "+C.join(" "));y.style=Object.assign({},qg.defaultStyle(this),{},w);return qg.h("div",y,[qg.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:D.left()+"px",paddingRight:D.right()+"px",paddingTop:D.top()+"px",paddingBottom:D.bottom()+"px",width:"calc(100% - "+D.left()+"px - "+D.right()+"px)"}},e),b.renderSubmorphs(this)])}},{key:"renderChunk",value:function(b,e){var l=e=e||{},p=l.backgroundColor,q=l.fontColor,
u=l.fontFamily,w=l.fontStyle,y=l.fontWeight,A=l.textShadow,C=l.textDecoration,D=l.textStyleClasses,L=l.textAlign,I=l.float,S=l.display,V=l.lineHeight,ba=l.opacity;l={};var ua={style:l};I&&(l.float=I);S&&(l.display=S);p&&(l.backgroundColor=String(p));u&&(l.fontFamily=u);q&&(l.color=String(q));A&&(l.textShadow=A);"normal"!==y&&(l.fontWeight=y);"normal"!==w&&(l.fontStyle=w);"none"!==C&&(l.textDecoration=C);L&&(l.textAlign=L);V&&(l.lineHeight=V);ba&&(l.opacity=ba);D&&D.length&&(ua.className=D.join(" "));
p="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(q=0;q<p.length;q++)u=p[q],e.hasOwnProperty(u)&&(w=e[u],l[u]="number"===typeof w?w+"px":w);return qg.h("span",ua,b)}},{key:"interactivelyChangeLabel",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("edit label",{input:b.textString,historyId:"lively.morphic-label-edit-hist"}),
2);e=l.yieldResult;"string"===typeof e&&(b.textString=e);l.jumpToEnd()})}},{key:"interactivelySetIcon",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(b.world().filterableListPrompt("Select Icon",Object.keys(qg.Icons).map(function(u){return{isListItem:!0,label:[].concat($jscomp.arrayFromIterable(qg.Icon.textAttribute(u,{paddingRight:"10px"})),[u,{}]),value:u}})),2);e=q.yieldResult;l=$jscomp.makeIterator(e.selected);
if(p=l.next().value)b.value=qg.Icon.textAttribute(p);q.jumpToEnd()})}},{key:"menuItems",value:function(){var b=this,e=Sb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);e.unshift({isDivider:!0});e.unshift(["edit label as rich text",function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield($world.editPrompt("rich text",{input:b.value,resolveTextAttributes:!0}),2);if(l=p.yieldResult)b.value=l;p.jumpToEnd()})}]);e.unshift(["change label",
function(){return b.interactivelyChangeLabel()}]);e.unshift(["set Icon",function(){return b.interactivelySetIcon()}]);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:qg.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return qg.properties.values(qg.Icons).map(function(b){return b.code}).includes(this.textString)}},
value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var b=this.textAndAttributes;if(2>=b.length){var e=$jscomp.makeIterator(b),l=e.next().value;e=e.next().value;if(!Object.keys(e||{}).length)return l||""}return b},set:function(b){"string"===typeof b?this.textString=b:this.textAndAttributes=b}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(b,e){return 0==e%2?b:""}).join("")},set:function(b){this.textAndAttributes=
[b,null]}},textAndAttributes:{after:["autofit"],get:function(){var b=this.getProperty("textAndAttributes");if(!b||1>b.length)b=["",null];return b},set:function(b){Array.isArray(b)||(b=[String(b),{}]);0===b.length&&(b=["",{}]);this.setProperty("textAndAttributes",b);this.autofit&&this.invalidateTextLayout();qg.signal(this,"value",b)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var b=this.textAndAttributes,e=null;if(2<b.length){var l=$jscomp.makeIterator(b.slice(-2)),
p=l.next().value;(l=l.next().value)&&l.textStyleClasses&&l.textStyleClasses.includes("annotation")&&(b=b.slice(0,-2),e=[p,l])}return{value:b,annotation:e}},set:function(b){var e=b.value;b=b.annotation;e||(e="");"string"===typeof e&&(e=[e,null]);Array.isArray(e)||(e=[String(e),null]);e=e.slice();if(b){"string"===typeof b&&(b=[b,null]);var l=b[1];l||(l=b[1]={});e.push.apply(e,$jscomp.arrayFromIterable(b));l.textStyleClasses=(l.textStyleClasses||[]).concat("annotation");l.textStyleClasses.includes("annotation")||
l.textStyleClasses.push("annotation")}this.textAndAttributes=e}},autofit:{defaultValue:!0,set:function(b){this.setProperty("autofit",b);b&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:qg.Rectangle.inset(0),after:["autofit"],initialize:function(b){this.padding=b},set:function(b){b||(b=qg.Rectangle.inset(0));var e=this.padding;this.setProperty("padding","number"===typeof b?qg.Rectangle.inset(b):b);this.autofit&&!e.equals(b)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,
type:"Enum",values:qg.config.text.basicFontItems,after:["autofit"],defaultValue:"IBM Plex Sans, Sans-Serif",set:function(b){var e=this.fontFamily;this.setProperty("fontFamily",b);this.autofit&&e!=b&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,after:["autofit"],set:function(b){var e=this.fontSize;this.setProperty("fontSize",b);this.autofit&&b!=e&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:qg.Color.black},fontWeight:{type:"Enum",
values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(b){var e=this.fontWeight;this.setProperty("fontWeight",b);this.autofit&&e!=b&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(b){var e=this.fontStyle;this.setProperty("fontStyle",b);this.autofit&&e!=b&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},
textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,after:["autofit"],set:function(b){this.setProperty("textStyleClasses",b);this.autofit&&this.invalidateTextLayout()}}}}},{key:"icon",value:function(b,e){e=void 0===e?{prefix:"",suffix:""}:e;return qg.Icon.makeLabel(b,e)}}],d,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:499,end:18882})}(qg.Morph));qg.Label=Mo;qg.Label=Mo;qg.Label=Mo;var hoa=Object.freeze({__proto__:null,Label:Mo}),QR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,ioa={},h6=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,joa=ioa=function(a,d){function k(ea){var la=ea.match(/\n/g);la&&(Fa+=la.length);la=ea.lastIndexOf("\n");F=~la?ea.length-la:F+ea.length}function b(){var ea={line:Fa,column:F};return function(la){la.position=new e(ea);w(/^\s*/);return la}}
function e(ea){(this||QR).start=ea;(this||QR).end={line:Fa,column:F};(this||QR).source=d.source}function l(ea){var la=Error(d.source+":"+Fa+":"+F+": "+ea);la.reason=ea;la.filename=d.source;la.line=Fa;la.column=F;la.source=a;if(d.silent)Y.push(la);else throw la;}function p(){return w(/^{\s*/)}function q(){return w(/^}/)}function u(){var ea,la=[];w(/^\s*/);for(y(la);a.length&&"}"!=a.charAt(0)&&(ea=ba()||ua());)!1!==ea&&(la.push(ea),y(la));return la}function w(ea){if(ea=ea.exec(a)){var la=ea[0];k(la);
a=a.slice(la.length);return ea}}function y(ea){var la;for(ea=ea||[];la=A();)!1!==la&&ea.push(la);return ea}function A(){var ea=b();if("/"==a.charAt(0)&&"*"==a.charAt(1)){for(var la=2;""!=a.charAt(la)&&("*"!=a.charAt(la)||"/"!=a.charAt(la+1));)++la;la+=2;if(""===a.charAt(la-1))return l("End of comment missing");var db=a.slice(2,la-2);F+=2;k(db);a=a.slice(la);F+=2;return ea({type:"comment",comment:db})}}function C(){var ea=w(/^([^{]+)/);if(ea)return Aq(ea[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,
"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(la){return la.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(la){return la.replace(/\u200C/g,",")})}function D(){var ea=b(),la=w(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(la){la=Aq(la[0]);if(!w(/^:\s*/))return l("property missing ':'");var db=w(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);ea=ea({type:"declaration",property:la.replace(h6,""),value:db?Aq(db[0]).replace(h6,""):""});w(/^[;\s]*/);return ea}}function L(){var ea=
[];if(!p())return l("missing '{'");y(ea);for(var la;la=D();)!1!==la&&(ea.push(la),y(ea));return q()?ea:l("missing '}'")}function I(){for(var ea,la=[],db=b();ea=w(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)la.push(ea[1]),w(/^,\s*/);if(la.length)return db({type:"keyframe",values:la,declarations:L()})}function S(){var ea=b(),la=w(/^@([-\w]+)?keyframes\s*/);if(la){var db=la[1];la=w(/^([-\w]+)\s*/);if(!la)return l("@keyframes missing name");la=la[1];if(!p())return l("@keyframes missing '{'");for(var ub,xa=
y();ub=I();)xa.push(ub),xa=xa.concat(y());return q()?ea({type:"keyframes",name:la,vendor:db,keyframes:xa}):l("@keyframes missing '}'")}}function V(ea){var la=new RegExp("^@"+ea+"\\s*([^;]+);");return function(){var db=b(),ub=w(la);if(ub){var xa={type:ea};xa[ea]=ub[1].trim();return db(xa)}}}function ba(){if("@"==a[0]){var ea;if(!(ea=S())){ea=b();var la=w(/^@media *([^{]+)/);if(la)if(la=Aq(la[1]),p()){var db=y().concat(u());ea=q()?ea({type:"media",media:la,rules:db}):l("@media missing '}'")}else ea=
l("@media missing '{'");else ea=void 0}ea||(ea=b(),ea=(la=w(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?ea({type:"custom-media",name:Aq(la[1]),media:Aq(la[2])}):void 0);ea||(ea=b(),(la=w(/^@supports *([^{]+)/))?(la=Aq(la[1]),p()?(db=y().concat(u()),ea=q()?ea({type:"supports",supports:la,rules:db}):l("@supports missing '}'")):ea=l("@supports missing '{'")):ea=void 0);if(!(ea=ea||Q()||W()||ka()))if(ea=b(),db=w(/^@([-\w]+)?document *([^{]+)/))if(la=Aq(db[1]),db=Aq(db[2]),p()){var ub=y().concat(u());
ea=q()?ea({type:"document",document:db,vendor:la,rules:ub}):l("@document missing '}'")}else ea=l("@document missing '{'");else ea=void 0;if(!ea)if(ea=b(),w(/^@page */))if(la=C()||[],p()){for(db=y();ub=D();)db.push(ub),db=db.concat(y());ea=q()?ea({type:"page",selectors:la,declarations:db}):l("@page missing '}'")}else ea=l("@page missing '{'");else ea=void 0;ea||(ea=b(),w(/^@host\s*/)?p()?(la=y().concat(u()),ea=q()?ea({type:"host",rules:la}):l("@host missing '}'")):ea=l("@host missing '{'"):ea=void 0);
if(!ea)if(ea=b(),w(/^@font-face\s*/))if(p()){for(la=y();db=D();)la.push(db),la=la.concat(y());ea=q()?ea({type:"font-face",declarations:la}):l("@font-face missing '}'")}else ea=l("@font-face missing '{'");else ea=void 0;return ea}}function ua(){var ea=b(),la=C();if(!la)return l("selector missing");y();return ea({type:"rule",selectors:la,declarations:L()})}d=d||{};var Fa=1,F=1;e.prototype.content=a;var Y=[],Q=V("import"),W=V("charset"),ka=V("namespace");return BO(function(){var ea=u();return{type:"stylesheet",
stylesheet:{source:d.source,rules:ea,parsingErrors:Y}}}())},Xca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,i6={};i6=UG;UG.prototype.emit=function(a){return a};UG.prototype.visit=function(a){return this[a.type](a)};UG.prototype.mapVisit=function(a,d){var k="";d=d||"";for(var b=0,e=a.length;b<e;b++)k+=this.visit(a[b]),d&&b<e-1&&(k+=this.emit(d));return k};var j6=i6,Wr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,k6={},w0=j6,koa=
bj;k6=Sj;koa(Sj,w0);Sj.prototype.compile=function(a){return this.stylesheet(a)};Sj.prototype.stylesheet=function(a){return this.mapVisit(a.stylesheet.rules,"\n\n")};Sj.prototype.comment=function(a){return this.emit(this.indent()+"/*"+a.comment+"*/",a.position)};Sj.prototype.import=function(a){return this.emit("@import "+a.import+";",a.position)};Sj.prototype.media=function(a){return this.emit("@media "+a.media,a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+
"\n}")};Sj.prototype.document=function(a){return this.emit("@"+(a.vendor||"")+"document "+a.document,a.position)+this.emit("  {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Sj.prototype.charset=function(a){return this.emit("@charset "+a.charset+";",a.position)};Sj.prototype.namespace=function(a){return this.emit("@namespace "+a.namespace+";",a.position)};Sj.prototype.supports=function(a){return this.emit("@supports "+a.supports,a.position)+this.emit(" {\n"+this.indent(1))+
this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Sj.prototype.keyframes=function(a){return this.emit("@"+(a.vendor||"")+"keyframes "+a.name,a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.keyframes,"\n")+this.emit(this.indent(-1)+"}")};Sj.prototype.keyframe=function(a){var d=a.declarations;return this.emit(this.indent())+this.emit(a.values.join(", "),a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(d,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};
Sj.prototype.page=function(a){var d=a.selectors.length?a.selectors.join(", ")+" ":"";return this.emit("@page "+d,a.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(a.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Sj.prototype["font-face"]=function(a){return this.emit("@font-face ",a.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(a.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Sj.prototype.host=function(a){return this.emit("@host",
a.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(a.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Sj.prototype["custom-media"]=function(a){return this.emit("@custom-media "+a.name+" "+a.media+";",a.position)};Sj.prototype.rule=function(a){var d=this.indent(),k=a.declarations;return k.length?this.emit(a.selectors.map(function(b){return d+b}).join(",\n"),a.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(k,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):
""};Sj.prototype.declaration=function(a){return this.emit(this.indent())+this.emit(a.property+": "+a.value,a.position)+this.emit(";")};Sj.prototype.indent=function(a){(this||Wr).level=(this||Wr).level||1;return null!=a?((this||Wr).level+=a,""):Array((this||Wr).level).join((this||Wr).indentation||"  ")};var loa=k6,RR={},l6=Ng.Buffer;(function(a){var d=function(k){return"function"===typeof k?k:"function"===typeof l6?function(b){return(new l6(b,"base64")).toString("binary")}:"object"===typeof a.base64js?
function(b){b=a.base64js.b64ToByteArray(b);return Array.prototype.map.call(b,function(e){return String.fromCharCode(e)}).join("")}:function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(a.atob);a.atob=d;RR&&(RR=d)})(window);var moa=RR,noa=/^xn--/,ooa=/[^\0-\x7E]/,Zca=/[\x2E\u3002\uFF0E\uFF61]/g,Yca={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},
Pp=Math.floor,SR=String.fromCharCode,m6=function(a,d){return a+22+75*(26>a)-((0!=d)<<5)},n6=function(a,d,k){var b=0;a=k?Pp(a/700):a>>1;for(a+=Pp(a/d);455<a;b+=36)a=Pp(a/35);return Pp(b+36*a/(a+38))},o6=function(a){var d=[],k=a.length,b=0,e=128,l=72,p=a.lastIndexOf("-");0>p&&(p=0);for(var q=0;q<p;++q)128<=a.charCodeAt(q)&&ru("not-basic"),d.push(a.charCodeAt(q));for(p=0<p?p+1:0;p<k;){q=b;for(var u=1,w=36;;w+=36){p>=k&&ru("invalid-input");var y=10>(C=a.charCodeAt(p++))-48?C-22:26>C-65?C-65:26>C-97?C-
97:36;(36<=y||y>Pp((2147483647-b)/u))&&ru("overflow");b+=y*u;var A=w<=l?1:w>=l+26?26:w-l;if(y<A)break;y=36-A;u>Pp(2147483647/y)&&ru("overflow");u*=y}u=d.length+1;l=n6(b-q,u,0==q);Pp(b/u)>2147483647-e&&ru("overflow");e+=Pp(b/u);b%=u;d.splice(b++,0,e)}var C;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(d))},p6=function(a){for(var d=[],k=(a=y0(a)).length,b=128,e=0,l=72,p=$jscomp.makeIterator(a),q=p.next();!q.done;q=p.next()){var u=q.value;128>u&&d.push(SR(u))}for((u=p=d.length)&&
d.push("-");u<k;){var w=2147483647,y=$jscomp.makeIterator(a);for(q=y.next();!q.done;q=y.next())q=q.value,q>=b&&q<w&&(w=q);q=u+1;w-b>Pp((2147483647-e)/q)&&ru("overflow");e+=(w-b)*q;b=w;w=$jscomp.makeIterator(a);for(y=w.next();!y.done;y=w.next())if(y=y.value,y<b&&2147483647<++e&&ru("overflow"),y==b){var A=e;for(y=36;;y+=36){var C=y<=l?1:y>=l+26?26:y-l;if(A<C)break;A-=C;var D=36-C;d.push(SR(m6(C+A%D,0)));A=Pp(A/D)}d.push(SR(m6(A,0)));l=n6(e,q,u==p);e=0;++u}++e;++b}return d.join("")},poa={version:"2.1.0",
ucs2:{decode:y0,encode:function(a){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(a))}},decode:o6,encode:p6,toASCII:function(a){return x0(a,function(d){return ooa.test(d)?"xn--"+p6(d):d})},toUnicode:function(a){return x0(a,function(d){return noa.test(d)?o6(d.slice(4).toLowerCase()):d})}},QB=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}},hv={};hv.decode=hv.parse=function(a,d,k,b){k=
k||"=";var e={};if("string"!=typeof a||0===a.length)return e;var l=/\+/g;a=a.split(d||"&");d=1E3;b&&"number"==typeof b.maxKeys&&(d=b.maxKeys);b=a.length;0<d&&b>d&&(b=d);for(d=0;d<b;++d){var p,q;var u=a[d].replace(l,"%20");var w=u.indexOf(k);0<=w?(p=u.substr(0,w),q=u.substr(w+1)):(p=u,q="");u=decodeURIComponent(p);w=decodeURIComponent(q);Object.prototype.hasOwnProperty.call(e,u)?Array.isArray(e[u])?e[u].push(w):e[u]=[e[u],w]:e[u]=w}return e};hv.encode=hv.stringify=function(a,d,k,b){return d=d||"&",
k=k||"=",null===a&&(a=void 0),"object"==typeof a?Object.keys(a).map(function(e){var l=encodeURIComponent(QB(e))+k;return Array.isArray(a[e])?a[e].map(function(p){return l+encodeURIComponent(QB(p))}).join(d):l+encodeURIComponent(QB(a[e]))}).join(d):b?encodeURIComponent(QB(b))+k+encodeURIComponent(QB(a)):""};var dy={},rp={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==
a}};dy.parse=tA;dy.resolve=function(a,d){return tA(a,!1,!0).resolve(d)};dy.resolveObject=function(a,d){return a?tA(a,!1,!0).resolveObject(d):d};dy.format=function(a){rp.isString(a)&&(a=tA(a));return a instanceof sn?a.format():sn.prototype.format.call(a)};dy.Url=sn;var qoa=/^([a-z0-9.+-]+:)/i,roa=/:[0-9]*$/,soa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,toa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),TR=["'"].concat(toa),q6=["%","/","?",";","#"].concat(TR),r6=["/","?","#"],s6=/^[+a-z0-9A-Z_-]{0,63}$/,
uoa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,voa={javascript:!0,"javascript:":!0},UR={javascript:!0,"javascript:":!0},ey={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};sn.prototype.parse=function(a,d,k){if(!rp.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var b=a.indexOf("?");b=-1!==b&&b<a.indexOf("#")?"?":"#";a=a.split(b);a[0]=a[0].replace(/\\/g,"/");b=a=a.join(b);if(b=b.trim(),!k&&1===a.split("#").length)if(a=soa.exec(b))return this.path=
b,this.href=b,this.pathname=a[1],a[2]?(this.search=a[2],this.query=d?hv.parse(this.search.substr(1)):this.search.substr(1)):d&&(this.search="",this.query={}),this;if(a=qoa.exec(b)){var e=(a=a[0]).toLowerCase();this.protocol=e;b=b.substr(a.length)}if(k||a||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===b.substr(0,2);!l||a&&UR[a]||(b=b.substr(2),this.slashes=!0)}if(!UR[a]&&(l||a&&!ey[a])){var p,q;l=-1;for(k=0;k<r6.length;k++)-1!==(u=b.indexOf(r6[k]))&&(-1===l||u<l)&&(l=u);-1!==(q=-1===l?b.lastIndexOf("@"):
b.lastIndexOf("@",l))&&(p=b.slice(0,q),b=b.slice(q+1),this.auth=decodeURIComponent(p));l=-1;for(k=0;k<q6.length;k++){var u;-1!==(u=b.indexOf(q6[k]))&&(-1===l||u<l)&&(l=u)}-1===l&&(l=b.length);this.host=b.slice(0,l);b=b.slice(l);this.parseHost();this.hostname=this.hostname||"";p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(l=this.hostname.split(/\./),q=(k=0,l.length);k<q;k++)if((u=l[k])&&!u.match(s6)){a="";for(var w=0,y=u.length;w<y;w++)127<u.charCodeAt(w)?a+="x":a+=
u[w];if(!a.match(s6)){q=l.slice(0,k);k=l.slice(k+1);(u=u.match(uoa))&&(q.push(u[1]),k.unshift(u[2]));k.length&&(b="/"+k.join(".")+b);this.hostname=q.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();p||(this.hostname=poa.toASCII(this.hostname));k=this.port?":"+this.port:"";this.host=(this.hostname||"")+k;this.href+=this.host;p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!voa[e])for(k=0,q=TR.length;k<q;k++)p=
TR[k],-1!==b.indexOf(p)&&(u=encodeURIComponent(p),u===p&&(u=escape(p)),b=b.split(p).join(u));k=b.indexOf("#");-1!==k&&(this.hash=b.substr(k),b=b.slice(0,k));k=b.indexOf("?");if(-1!==k?(this.search=b.substr(k),this.query=b.substr(k+1),d&&(this.query=hv.parse(this.query)),b=b.slice(0,k)):d&&(this.search="",this.query={}),b&&(this.pathname=b),ey[e]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)k=this.pathname||"",this.path=k+(this.search||"");return this.href=this.format(),
this};sn.prototype.format=function(){var a=this.auth||"";a&&(a=(a=encodeURIComponent(a)).replace(/%3A/i,":"),a+="@");var d=this.protocol||"",k=this.pathname||"",b=this.hash||"",e=!1,l="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port));this.query&&rp.isObject(this.query)&&Object.keys(this.query).length&&(l=hv.stringify(this.query));a=this.search||l&&"?"+l||"";return d&&":"!==d.substr(-1)&&(d+=":"),this.slashes||
(!d||ey[d])&&!1!==e?(e="//"+(e||""),k&&"/"!==k.charAt(0)&&(k="/"+k)):e||(e=""),b&&"#"!==b.charAt(0)&&(b="#"+b),a&&"?"!==a.charAt(0)&&(a="?"+a),d+e+(k=k.replace(/[?#]/g,function(p){return encodeURIComponent(p)}))+(a=a.replace("#","%23"))+b};sn.prototype.resolve=function(a){return this.resolveObject(tA(a,!1,!0)).format()};sn.prototype.resolveObject=function(a){if(rp.isString(a)){var d=new sn;d.parse(a,!1,!0);a=d}d=new sn;for(var k=Object.keys(this),b=0;b<k.length;b++){var e=k[b];d[e]=this[e]}if(d.hash=
a.hash,""===a.href)return d.href=d.format(),d;if(a.slashes&&!a.protocol){var l=Object.keys(a);for(k=0;k<l.length;k++)b=l[k],"protocol"!==b&&(d[b]=a[b]);return ey[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),d.href=d.format(),d}if(a.protocol&&a.protocol!==d.protocol){if(!ey[a.protocol]){l=Object.keys(a);for(k=0;k<l.length;k++)b=l[k],d[b]=a[b];return d.href=d.format(),d}if(d.protocol=a.protocol,a.host||UR[a.protocol])d.pathname=a.pathname;else{for(var p=(a.pathname||"").split("/");p.length&&
!(a.host=p.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==p[0]&&p.unshift("");2>p.length&&p.unshift("");d.pathname=p.join("/")}if(d.search=a.search,d.query=a.query,d.host=a.host||"",d.auth=a.auth,d.hostname=a.hostname||a.host,d.port=a.port,d.pathname||d.search)d.path=(d.pathname||"")+(d.search||"");return d.slashes=d.slashes||a.slashes,d.href=d.format(),d}k=d.pathname&&"/"===d.pathname.charAt(0);var q=a.host||a.pathname&&"/"===a.pathname.charAt(0),u=k=q||k||d.host&&a.pathname;b=d.pathname&&
d.pathname.split("/")||[];e=(p=a.pathname&&a.pathname.split("/")||[],d.protocol&&!ey[d.protocol]);if(e&&(d.hostname="",d.port=null,d.host&&(""===b[0]?b[0]=d.host:b.unshift(d.host)),d.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===p[0]?p[0]=a.host:p.unshift(a.host)),a.host=null),k=k&&(""===p[0]||""===b[0])),q)d.host=a.host||""===a.host?a.host:d.host,d.hostname=a.hostname||""===a.hostname?a.hostname:d.hostname,d.search=a.search,d.query=a.query,b=p;else if(p.length)b||(b=[]),b.pop(),
b=b.concat(p),d.search=a.search,d.query=a.query;else if(!rp.isNullOrUndefined(a.search))return e&&(d.hostname=d.host=b.shift(),(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift())),d.search=a.search,d.query=a.query,rp.isNull(d.pathname)&&rp.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.href=d.format(),d;if(!b.length)return d.pathname=null,d.search?d.path="/"+d.search:d.path=null,d.href=d.format(),d;q=b.slice(-1)[0];
p=(d.host||a.host||1<b.length)&&("."===q||".."===q)||""===q;for(var w=0,y=b.length;0<=y;y--)"."===(q=b[y])?b.splice(y,1):".."===q?(b.splice(y,1),w++):w&&(b.splice(y,1),w--);if(!k&&!u)for(;w--;w)b.unshift("..");!k||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift("");p&&"/"!==b.join("/").substr(-1)&&b.push("");u=""===b[0]||b[0]&&"/"===b[0].charAt(0);e&&(d.hostname=d.host=u?"":b.length?b.shift():"",(l=!!(d.host&&0<d.host.indexOf("@"))&&d.host.split("@"))&&(d.auth=l.shift(),d.host=d.hostname=l.shift()));
return(k||d.host&&b.length)&&!u&&b.unshift(""),b.length?d.pathname=b.join("/"):(d.pathname=null,d.path=null),rp.isNull(d.pathname)&&rp.isNull(d.search)||(d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"")),d.auth=a.auth||d.auth,d.slashes=d.slashes||a.slashes,d.href=d.format(),d};sn.prototype.parseHost=function(){var a=this.host,d=roa.exec(a);d&&(":"!==(d=d[0])&&(this.port=d.substr(1)),a=a.substr(0,a.length-d.length));a&&(this.hostname=a)};var woa=yh,fy={resolve:function(){for(var a,d="",k=!1,
b=arguments.length-1;-1<=b&&!k;b--){var e;0<=b?e=arguments[b]:(void 0===a&&(a=woa.cwd()),e=a);sp(e);0!==e.length&&(d=e+"/"+d,k=47===e.charCodeAt(0))}return d=z0(d,!k),k?0<d.length?"/"+d:"/":0<d.length?d:"."},normalize:function(a){if(sp(a),0===a.length)return".";var d=47===a.charCodeAt(0),k=47===a.charCodeAt(a.length-1);return 0!==(a=z0(a,!d)).length||d||(a="."),0<a.length&&k&&(a+="/"),d?"/"+a:a},isAbsolute:function(a){return sp(a),0<a.length&&47===a.charCodeAt(0)},join:function(){if(0===arguments.length)return".";
for(var a,d=0;d<arguments.length;++d){var k=arguments[d];sp(k);0<k.length&&(void 0===a?a=k:a+="/"+k)}return void 0===a?".":fy.normalize(a)},relative:function(a,d){if((sp(a),sp(d),a===d)||(a=fy.resolve(a))===(d=fy.resolve(d)))return"";for(var k=1;k<a.length&&47===a.charCodeAt(k);++k);for(var b=a.length,e=b-k,l=1;l<d.length&&47===d.charCodeAt(l);++l);for(var p=d.length-l,q=e<p?e:p,u=-1,w=0;w<=q;++w){if(w===q){if(p>q){if(47===d.charCodeAt(l+w))return d.slice(l+w+1);if(0===w)return d.slice(l+w)}else e>
q&&(47===a.charCodeAt(k+w)?u=w:0===w&&(u=0));break}var y=a.charCodeAt(k+w);if(y!==d.charCodeAt(l+w))break;47===y&&(u=w)}e="";for(w=k+u+1;w<=b;++w)w!==b&&47!==a.charCodeAt(w)||(0===e.length?e+="..":e+="/..");return 0<e.length?e+d.slice(l+u):(l+=u,47===d.charCodeAt(l)&&++l,d.slice(l))},_makeLong:function(a){return a},dirname:function(a){if(sp(a),0===a.length)return".";for(var d=47===a.charCodeAt(0),k=-1,b=!0,e=a.length-1;1<=e;--e)if(47===a.charCodeAt(e)){if(!b){k=e;break}}else b=!1;return-1===k?d?"/":
".":d&&1===k?"//":a.slice(0,k)},basename:function(a,d){if(void 0!==d&&"string"!=typeof d)throw new TypeError('"ext" argument must be a string');sp(a);var k,b=0,e=-1,l=!0;if(void 0!==d&&0<d.length&&d.length<=a.length){if(d.length===a.length&&d===a)return"";var p=d.length-1,q=-1;for(k=a.length-1;0<=k;--k){var u=a.charCodeAt(k);if(47===u){if(!l){b=k+1;break}}else-1===q&&(l=!1,q=k+1),0<=p&&(u===d.charCodeAt(p)?-1==--p&&(e=k):(p=-1,e=q))}return b===e?e=q:-1===e&&(e=a.length),a.slice(b,e)}for(k=a.length-
1;0<=k;--k)if(47===a.charCodeAt(k)){if(!l){b=k+1;break}}else-1===e&&(l=!1,e=k+1);return-1===e?"":a.slice(b,e)},extname:function(a){sp(a);for(var d=-1,k=0,b=-1,e=!0,l=0,p=a.length-1;0<=p;--p){var q=a.charCodeAt(p);if(47!==q)-1===b&&(e=!1,b=p+1),46===q?-1===d?d=p:1!==l&&(l=1):-1!==d&&(l=-1);else if(!e){k=p+1;break}}return-1===d||-1===b||0===l||1===l&&d===b-1&&d===k+1?"":a.slice(d,b)},format:function(a){if(null===a||"object"!=typeof a)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+
typeof a);var d=a.dir||a.root,k=a.base||(a.name||"")+(a.ext||"");return d?d===a.root?d+k:d+"/"+k:k},parse:function(a){sp(a);var d={root:"",dir:"",base:"",ext:"",name:""};if(0===a.length)return d;var k,b=a.charCodeAt(0),e=47===b;e?(d.root="/",k=1):k=0;for(var l=-1,p=0,q=-1,u=!0,w=a.length-1,y=0;w>=k;--w)if(47!==(b=a.charCodeAt(w)))-1===q&&(u=!1,q=w+1),46===b?-1===l?l=w:1!==y&&(y=1):-1!==l&&(y=-1);else if(!u){p=w+1;break}return-1===l||-1===q||0===y||1===y&&l===q-1&&l===p+1?-1!==q&&(d.base=d.name=0===
p&&e?a.slice(1,q):a.slice(p,q)):(0===p&&e?(d.name=a.slice(1,l),d.base=a.slice(1,q)):(d.name=a.slice(p,l),d.base=a.slice(p,q)),d.ext=a.slice(l,q)),0<p?d.dir=a.slice(0,p-1):e&&(d.dir="/"),d},sep:"/",delimiter:":",win32:null,posix:null};fy.posix=fy;var Uk=Ia("aF",fy);Ia("aG",Uk._makeLong);Ia("aH",Uk.basename);Ia("aI",Uk.delimiter);Ia("aJ",Uk.dirname);Ia("aK",Uk.extname);Ia("aL",Uk.format);Ia("aM",Uk.isAbsolute);Ia("aN",Uk.join);Ia("aO",Uk.normalize);Ia("aP",Uk.parse);Ia("aQ",Uk.posix);Ia("aR",Uk.relative);
Ia("aS",Uk.resolve);Ia("aT",Uk.sep);Ia("aU",Uk.win32);var t6={},u6=/%[a-f0-9]{2}/gi,v6=/(%[a-f0-9]{2})+/gi;t6=function(a){if("string"!==typeof a)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof a+"`");try{return a=a.replace(/\+/g," "),decodeURIComponent(a)}catch(p){for(var d={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},k=v6.exec(a);k;){try{d[k[0]]=decodeURIComponent(k[0])}catch(q){var b=k[0];try{var e=decodeURIComponent(b)}catch(u){e=b.match(u6);for(var l=1;l<
e.length;l++)b=CO(e,l).join(""),e=b.match(u6);e=b}e!==k[0]&&(d[k[0]]=e)}k=v6.exec(a)}d["%C2"]="\ufffd";k=Object.keys(d);for(b=0;b<k.length;b++)e=k[b],a=a.replace(new RegExp(e,"g"),d[e]);return a}};var xoa={},cda=yh,F0=moa,$ca=dy,ada=Uk,bda=t6,w6=/[#@] sourceMappingURL=([^\s'"]*)/,dda=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+w6.source+")\\s*\\*/|//(?:"+w6.source+"))\\s*"),eda=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,fda=/^(?:application|text)\/json$/,gda="utf-8",hda=/\/?$/,yoa=xoa={resolveSourceMap:C0,
resolveSourceMapSync:E0,resolveSources:G0,resolveSourcesSync:I0,resolve:function(a,d,k,b,e){function l(q){G0(q.map,q.sourcesRelativeTo,k,b,function(u,w){if(u)return e(u);q.sourcesResolved=w.sourcesResolved;q.sourcesContent=w.sourcesContent;e(null,q)})}"function"===typeof b&&(e=b,b={});if(null===a){var p={sourceMappingURL:null,url:d,sourcesRelativeTo:d,map:null};a=uA(d);k(a,function(q,u){if(q)return q.sourceMapData=p,e(q);p.map=String(u);try{p.map=ox(p.map,p)}catch(w){return e(w)}l(p)})}else C0(a,
d,k,function(q,u){if(q)return e(q);if(!u)return e(null,null);l(u)})},resolveSync:function(a,d,k,b){if(null===a)a={sourceMappingURL:null,url:d,sourcesRelativeTo:d,map:null},a.map=B0(k,d,a),a.map=ox(a.map,a);else if(a=E0(a,d,k),!a)return null;d=I0(a.map,a.sourcesRelativeTo,k,b);a.sourcesResolved=d.sourcesResolved;a.sourcesContent=d.sourcesContent;return a},parseMapToJSON:ox},zoa=function(){throw Error("Node.js fs module is not supported by jspm core"+("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":
" in the browser"));},EO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,x6={},J0=j6,Aoa=bj;x6=Nk;Aoa(Nk,J0);Nk.prototype.compile=function(a){return a.stylesheet.rules.map((this||EO).visit,this||EO).join("")};Nk.prototype.comment=function(a){return this.emit("",a.position)};Nk.prototype.import=function(a){return this.emit("@import "+a.import+";",a.position)};Nk.prototype.media=function(a){return this.emit("@media "+a.media,a.position)+this.emit("{")+this.mapVisit(a.rules)+
this.emit("}")};Nk.prototype.document=function(a){return this.emit("@"+(a.vendor||"")+"document "+a.document,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};Nk.prototype.charset=function(a){return this.emit("@charset "+a.charset+";",a.position)};Nk.prototype.namespace=function(a){return this.emit("@namespace "+a.namespace+";",a.position)};Nk.prototype.supports=function(a){return this.emit("@supports "+a.supports,a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};Nk.prototype.keyframes=
function(a){return this.emit("@"+(a.vendor||"")+"keyframes "+a.name,a.position)+this.emit("{")+this.mapVisit(a.keyframes)+this.emit("}")};Nk.prototype.keyframe=function(a){var d=a.declarations;return this.emit(a.values.join(","),a.position)+this.emit("{")+this.mapVisit(d)+this.emit("}")};Nk.prototype.page=function(a){var d=a.selectors.length?a.selectors.join(", "):"";return this.emit("@page "+d,a.position)+this.emit("{")+this.mapVisit(a.declarations)+this.emit("}")};Nk.prototype["font-face"]=function(a){return this.emit("@font-face",
a.position)+this.emit("{")+this.mapVisit(a.declarations)+this.emit("}")};Nk.prototype.host=function(a){return this.emit("@host",a.position)+this.emit("{")+this.mapVisit(a.rules)+this.emit("}")};Nk.prototype["custom-media"]=function(a){return this.emit("@custom-media "+a.name+" "+a.media+";",a.position)};Nk.prototype.rule=function(a){var d=a.declarations;return d.length?this.emit(a.selectors.join(","),a.position)+this.emit("{")+this.mapVisit(d)+this.emit("}"):""};Nk.prototype.declaration=function(a){return this.emit(a.property+
":"+a.value,a.position)+this.emit(";")};var Boa=x6,Vl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Xq={};Xq=function(a){a._comment=a.comment;a.map=new Te;a.position={line:1,column:1};a.files={};for(var d in Xq)a[d]=Xq[d]};var y6=function(a){return"\\"===Uk.sep?a.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):a};Xq.updatePosition=function(a){var d=a.match(/\n/g);d&&((this||Vl).position.line+=d.length);d=a.lastIndexOf("\n");(this||Vl).position.column=~d?a.length-d:
(this||Vl).position.column+a.length};Xq.emit=function(a,d){if(d){var k=y6(d.source||"source.css");(this||Vl).map.addMapping({source:k,generated:{line:(this||Vl).position.line,column:Math.max((this||Vl).position.column-1,0)},original:{line:d.start.line,column:d.start.column-1}});this.addFile(k,d)}this.updatePosition(a);return a};Xq.addFile=function(a,d){"string"!==typeof d.content||Object.prototype.hasOwnProperty.call((this||Vl).files,a)||((this||Vl).files[a]=d.content)};Xq.applySourceMaps=function(){Object.keys((this||
Vl).files).forEach(function(a){var d=(this||Vl).files[a];(this||Vl).map.setSourceContent(a,d);if(!1!==(this||Vl).options.inputSourcemaps&&(d=yoa.resolveSync(d,a,zoa))){var k=new gf(d.map);(this||Vl).map.applySourceMap(k,a,y6(Uk.dirname(d.sourcesRelativeTo)))}},this||Vl)};Xq.comment=function(a){return/^# sourceMappingURL=/.test(a.comment)?this.emit("",a.position):this._comment(a)};var Coa=Xq,Doa={},Eoa=Doa=function(a,d){d=d||{};var k=d.compress?new Boa(d):new loa(d);return d.sourcemap?(Coa(k),a=k.compile(a),
k.applySourceMaps(),d="generator"===d.sourcemap?k.map:k.map.toJSON(),{code:a,map:d}):a=k.compile(a)},VR={};VR.parse=joa;VR.stringify=Eoa;var Dh=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");Dh.obj=ff;Dh.promise=Uf;Dh.string=Bg;Dh.pt=kh;Dh.Morph=Vi;Dh.vdom=gB;Dh.addOrChangeCSSDeclaration=Vo;Dh.css=VR;var FJ=Dh.vdom;Dh.diff=FJ.diff;Dh.patch=FJ.patch;Dh.h=FJ.h;Dh.createElement=FJ.create;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("CustomVNode")&&
"function"===typeof d.CustomVNode?d.CustomVNode:d.CustomVNode=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.morph=b;this.renderer=e;this.morphVtree=null;this.key="custom-"+b.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var b=this.morph,e=this.morphVtree=this.renderer.renderMorph(b),l="customNode-key-"+
b.id;e.children[0]&&e.children[0].key===l||e.children.unshift(Dh.h(b.domNodeTagName||"div",{key:l},[]));b._updateCSSDeclaration&&(b.ensureCSSDeclaration(),b._updateCSSDeclaration=!1);return e}},{key:"init",value:function(){var b=Dh.createElement(this.renderMorph(),this.renderer.domEnvironment);b.childNodes[0].appendChild(this.morph.domNode);this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return b}},{key:"update",value:function(b,e){b=b.morphVtree||this.renderMorph();var l=this.renderMorph();
b=Dh.diff(b,l);Dh.patch(e,b);return null}},{key:"destroy",value:function(b){(b=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&b.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomVNode"}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:426,end:2427})})(void 0);var Es=Ia("V",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("HTMLMorph")&&"function"===typeof d.HTMLMorph?d.HTMLMorph:d.HTMLMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",
value:function(){var b=this;try{var e=Dh.css.parse(this.cssDeclaration);this.whenRendered().then(function(){e.stylesheet.rules.forEach(function(l){l.selectors&&(l.selectors=l.selectors.map(function(p){return"#"+b.id+" "+p}))});Dh.addOrChangeCSSDeclaration("css-for-"+b.id,Dh.css.stringify(e))})}catch(l){console.error("Error setting cssDeclaration of "+this+": "+l)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(b){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new Dh.CustomVNode(this,b)}},{key:"menuItems",value:function(){var b=this,e=Sb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);e.unshift(["edit CSS...",function(){return b.world().execCommand("open workspace",{language:"css",content:b.cssDeclaration,target:b})}],["edit html...",function(){return b.world().execCommand("open workspace",{language:"html",
content:b.html,target:b})}],{isDivider:!0});return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:Dh.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(b){this.domNode.innerHTML=b;var e=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).find(function(w){return w.master});if(e)e.master.onMorphChange(this,
{prop:"html",value:b});if(b.includes("<script"))for(b=this.domNode.querySelectorAll("script"),b=$jscomp.makeIterator(b),e=b.next();!e.done;e=b.next()){var l=e.value;e=l.parentNode;l.remove();for(var p=document.createElement("script"),q=$jscomp.makeIterator(l.attributes),u=q.next();!u.done;u=q.next())u=u.value,p.setAttribute(u.name,u.value);l=$jscomp.makeIterator(l.childNodes);for(q=l.next();!q.done;q=l.next())p.appendChild(q.value);e.appendChild(p)}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},
domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(b){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(b,this.domNode);return this._domNode=b}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,
get:function(){return Dh.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,set:function(b){this.setProperty("cssDeclaration",b);b?(this.makeDirty(),this._updateCSSDeclaration=!0):(b=this.env.domEnv.document.getElementById("css-for-"+this.id))&&b.remove()}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:2752,end:7157})}(Dh.Morph));Dh.HTMLMorph=Es;Dh.HTMLMorph=Es;Dh.HTMLMorph=Es;var RB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),k=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"isIFrameMorph",get:function(){return!0}},{key:"reload",value:function(){return this.src?
this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(b,e){e=void 0===e?{}:e;var l=this,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){p=e;if(q=void 0===p.keepScroll?!0:p.keepScroll)u=l.iframeScroll;l.srcDoc=b;return w.yield(l.whenLoaded(),2)}q&&u&&(l.iframeScroll=u);return w.return(l)})}},{key:"loadURL",value:function(b,e){e=
void 0===e?{}:e;var l=this,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){p=e;if(q=void 0===p.keepScroll?!0:p.keepScroll)u=l.iframeScroll;l.src=b;return w.yield(l.whenLoaded(),2)}q&&u&&(l.iframeScroll=u);return w.return(l)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return b=(new Dh.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,b.srcDoc="",b.src="http://localhost:9011/worlds/html%20export",e.yield(b.loadURL("https://google.com"),2);b.iframe.src;
b.iframe.srcDoc;b.src="";b.srcDoc="fooo";return e.yield(b.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,after:["iframe"],get:function(){return this.iframe.src},set:function(b){this.iframe.removeAttribute("srcDoc");this.iframe.src=b;var e=Dh.promise.deferred().resolve;this._whenLoaded=
Dh.promise;this.iframe.onload=function(l){return e(l)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(b){this.iframe.removeAttribute("src");this.iframe.srcdoc=b;this._whenLoaded=this.whenRendered().then(function(){return Dh.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],get:function(){try{var b=this.iframe.contentWindow;return Dh.pt(b.scrollX,b.scrollY)}catch(e){return Dh.pt(0,0)}},set:function(b){try{this.iframe.contentWindow.scrollTo(b.x,
b.y)}catch(e){}}}}}}],d,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7167,end:10464})}(Dh.HTMLMorph);Dh.IFrameMorph=RB;Dh.IFrameMorph=RB;Dh.IFrameMorph=RB;var Foa=Object.freeze({__proto__:null,HTMLMorph:Es,IFrameMorph:RB}),qj=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");
qj.arr=Ne;qj.obj=ff;qj.rect=zk;qj.ShadowObject=Dn;qj.morph=Zi;var Qp=Ia("ay",function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),k=d.hasOwnProperty("StyleSheet")&&"function"===typeof d.StyleSheet?d.StyleSheet:d.StyleSheet=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){qj.obj.isObject(b)&&!e&&(e=b,b=null);
this.rules=e;for(var l in e)e[l]=this.unwrapFoldedProps(e[l]);this.name=b}},{key:"copy",value:function(){var b={},e;for(e in this.rules)b[e]=Object.assign({},this.rules[e]);return new qj.StyleSheet(this.name,b)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(b){this._context=b}},{key:"context",get:function(){return this._context}},{key:"unwrapFoldedProps",value:function(b){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(e){if(e in
b){var l=b[e];l||(l=0);b[e]=4==qj.arr.intersect(qj.obj.keys(l),["top","left","bottom","right"]).length?l:{top:l,bottom:l,right:l,left:l,valueOf:function(){return l}}}});return b}},{key:"removeRule",value:function(b){delete this.rules[b];this.context.requestStyling()}},{key:"setRule",value:function(b,e){this.rules[b]=this.unwrapFoldedProps(e);this.context.requestStyling()}},{key:"toggleRule",value:function(b,e){this.rules[b]._deactivated=!e;this.context.requestStyling()}},{key:"applicableRules",value:function(){var b=
{},e;for(e in this.rules)b[e]={styleSheet:this,rule:e};return b}},{key:"toJSExpr",value:function(){return"new StyleSheet("+qj.obj.inspect(this.rules,{customPrinter:function(b,e,l){return b&&b.isColor||b&&b.isGradient?b.toJSExpr():b&&b.isPoint?b.toString():b&&qj.arr.all([b.top,b.left,b.right,b.bottom],function(p){return p&&qj.obj.equals(p,b.top)})?l(b.top):b&&qj.obj.keys(b).includes("_rev")?l(qj.obj.dissoc(b,["_rev","_deactivated"])):e},escapeKeys:!0})+")"}},{key:"applyRule",value:function(b,e,l){var p=
this.rules[b];if(p._deactivated)return{};p=qj.obj.dissoc(p,["_deactivated"]);return e.withMetaDo({styleSheetChange:!0},function(){if("layout"in p){var q=p.layout.copy();q.container=e;p.layout=q}"dropShadow"in p&&(p.dropShadow=new qj.ShadowObject(p.dropShadow),p.dropShadow.morph=e);"padding"in p&&(p.padding=p.padding.isRect?p.padding:qj.rect(p.padding,p.padding));q=qj.obj.keys(p).filter(function(A){return!qj.obj.equals(e[A],p[A])});q=qj.obj.select(p,q);var u=e.propertiesAndPropertySettings().properties,
w={},y;for(y in p)w[y]=u[y]&&u[y].defaultValue||e[y];l?e.animate(Object.assign({},q,{duration:l.duration,easing:l.easing})):Object.assign(e,q);return w})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],d,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,
end:3712})}(void 0));qj.StyleSheet=Qp;qj.StyleSheet=Qp;qj.StyleSheet=Qp;var If=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");If.obj=ff;If.arr=Ne;If.num=Gj;If.Rectangle=Qd;If.rect=zk;If.Color=qf;If.pt=kh;If.connect=Mj;If.noUpdate=rr;If.signal=Ak;If.disconnect=So;If.Text=Lo;If.Range=Ds;If.HTMLMorph=Es;If.Icon=Ql;If.morph=Zi;var WR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),k=d.hasOwnProperty("InputLine")&&"function"===typeof d.InputLine?
d.InputLine:d.InputLine=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);If.connect(this,"textChange",this,"onInputChanged");If.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var b=this,
e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(e=[{command:"change placeholder",target:b},{isDivider:!0}],l=e.concat,p=$jscomp,q=p.arrayFromIterable,u.yield(Sb._get(Object.getPrototypeOf(k.prototype),"menuItems",b).call(b),2)):u.return(l.call(e,q.call(p,u.yieldResult)))})}},{key:"onChange",value:function(b){"extent fontSize padding fontFamily position selection".split(" ").includes(b.prop)&&this.updatePlaceholder();return Sb._get(Object.getPrototypeOf(k.prototype),
"onChange",this).call(this,b)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(b){this._inputHistory=b;this.historyId&&this.constructor.setHistory(this.historyId,
this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();Sb._get(Object.getPrototypeOf(k.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return e.borderColor=If.Color.red,e._errorIcon=e.addMorph(e._errorIcon||If.morph({type:"label",value:[" "+b,{fontSize:e.fontSize}," ",{}].concat($jscomp.arrayFromIterable(If.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:e.fontSize,fontColor:If.Color.red,opacity:0,reactsToPointer:!1,fill:If.Color.white.withA(.9)})),l.yield(e.whenRendered(),2);e._errorIcon.opacity=1;e._errorIcon.rightCenter=e.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=If.Color.transparent)}},{key:"updatePlaceholder",value:function(){var b=this.getSubmorphNamed("placeholder");if(b)if(this.input.length)b.visible=!1;else{var e=this.innerBounds();b.fontSize=this.fontSize;b.visible=!0;b.height=this.height;b.padding=this.padding;b.defaultTextStyle=this.defaultTextStyle;b.lineHeight=this.height+"px";b.fit();b.topLeft=this.label.length?e.topLeft().addXY(0,
this.borderWidth):e.topLeft().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var b=this.input;this.onInput(b);return b}},{key:"onInput",value:function(b){0<this.input.length&&this.addInputToHistory(this.input);
this.clearOnInput&&this.clear();If.signal(this,"inputAccepted",b)}},{key:"onInputChanged",value:function(b){If.signal(this,"inputChanged",b);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(b){b=b.isRange?b:new If.Range(b);if(!b.isEmpty())return b=b.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],
Sb._get(Object.getPrototypeOf(k.prototype),"deleteText",this).call(this,b)}},{key:"addInputToHistory",value:function(b){var e=this.inputHistory,l=e.items;if(If.arr.last(l)!==b){l.push(b);l.length>e.max&&(e.items=l=l.slice(-e.max));e.index=l.length-1;if(!this.allowDuplicatesInHistory)for(l=e.items.length-1;l--;)e.items[l]===b&&(e.items.splice(l,1),e.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,e)}}},{key:"browseHistory",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return e=b.inputHistory.items.map(function(w,y){return{isListItem:!0,string:w,value:y}}).reverse(),u.yield(b.world().filterableListPrompt("Choose item:",e,{commands:[b.histEditCommandForHistBrowse()]}),2);l=u.yieldResult;p=$jscomp.makeIterator(l.selected);q=p.next().value;"number"===typeof q&&b.setAndShowHistItem(q);b.focus();u.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",value:function(){var b=this;return{name:"edit history "+this.historyId,exec:function(e){var l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==
w.nextAddress)return l=b.inputHistory.items.slice().reverse(),w.yield(e.world().editListPrompt("edit history "+b.historyId,l),2);p=w.yieldResult;q=p.status;u=p.list;if("canceled"===q)return w.return(!0);l=l.filter(function(y){return y.isListItem?u.includes(y.value):u.includes(y)});b.inputHistory=Object.assign({},b.inputHistory,{items:l});e.get("list").items=l.map(function(y,A){return{isListItem:!0,string:y,value:A}}).reverse();return w.return(!0)})}}}},{key:"setAndShowHistItem",value:function(b){var e=
this.inputHistory,l=e.items,p=l.length-1;If.num.between(b,0,p+1)?e.index=b:e.index=b=p;this.input!==l[b]&&"undefined"!==typeof l[b]&&(this.input=l[b])}},{key:"showHistItem",value:function(b){b=b||"next";var e=this.inputHistory,l=e.items,p=l.length-1,q=e.index;If.num.between(q,0,p+1)||(e.index=q=p);if(this.input!==l[q]&&"undefined"!==typeof l[q])this.input=l[q];else{if("next"===b){if(q>p)return;q=++e.index}else{if(0>=q)return;q=--e.index}this.input=l[q]||""}}},{key:"commands",get:function(){var b=
this;return[{name:"change placeholder",exec:function(){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("Enter Placeholder:",{input:b.placeholder}),2);if(e=l.yieldResult)b.placeholder=e;l.jumpToEnd()})}},{name:"accept input",exec:function(){b.acceptInput();return!0}},{name:"show previous input from history",exec:function(){b.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){b.showHistItem("next");
return!0}},{name:"browse history",exec:function(){b.browseHistory();return!0}},{name:"remove items from history",exec:function(e){var l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return l=e.inputHistory,p=l.items.map(function(y,A){return{isListItem:!0,string:y,value:A}}).reverse(),w.yield(e.world().filterableListPrompt("Choose items to delete:",p,{multiSelect:!0}),2);q=w.yieldResult;u=q.selected;If.arr.sort(u).reverse().forEach(function(y){y<l.index&&
l.index--;l.items.splice(y,1)});e.inputHistory=l;return w.return(!0)})}}].concat(Sb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",
command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(b){var e=b.getRootNode().createElement("input"),l=b.querySelector(".newtext-text-layer.actual");e.id=b.id;e.className=b.className;e.style=b.style.cssText;Object.assign(e.style,If.obj.select(l.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));e.placeholder=this.placeholder;e.type="text";e.autocomplete=e.name=this.name.replace(/[\s"]/g,
"-");return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(b){if("undefined"===typeof localStorage)return null;try{var e=localStorage.getItem("lively.morphic-inputline-"+b);return e?JSON.parse(e):null}catch(l){return null}}},{key:"addHistoryToLocalStorage",value:function(b,e){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+b,JSON.stringify(e))}catch(l){console.error(l)}}},{key:"histories",
get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(b){var e=this.histories.get(b);if(e)return e;e=this.getHistoryFromLocalSorage(b)||{items:[],max:50,index:0};this.histories.set(b,e);return e}},{key:"setHistory",value:function(b,e){e=void 0===e?{items:[],max:50,index:0}:e;this.histories.set(b,e);this.addHistoryToLocalStorage(b,e);return e}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},
extent:{defaultValue:If.pt(100,20)},padding:{defaultValue:If.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(b){var e=this;this.setProperty("label",b);this.textString.startsWith(b)||If.noUpdate(function(){e.textString=b+e.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(b){this.textString=this.label+(b?String(b):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var b=this.getSubmorphNamed("placeholder");return b?b.value:null},set:function(b){var e=this.getSubmorphNamed("placeholder");b?e?(e.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:If.Color.gray}),e.value=b):this.addMorph(If.Text.makeLabel(b,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:If.Color.gray}))):e&&e.remove();this.updatePlaceholder()}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14839})}(If.Text);WR=If.InputLine;var SB=Ia("aB",WR),Fs=function(a){var d=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),k=d.hasOwnProperty("PasswordInputLine")&&
"function"===typeof d.PasswordInputLine?d.PasswordInputLine:d.PasswordInputLine=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onChange",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);"borderRadius"==b.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Sb._get(Object.getPrototypeOf(k.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,b);this.onLoad()}},{key:"onChange",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);["fill","borderRadius"].includes(b.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.whenRendered(),2);b.ensureInputNode().then(function(l){b.updateHtml(b.input);l.onkeydown=function(p){return b.env.eventDispatcher.dispatchDOMEvent(p,
b,"onKeyDown")};l.onkeyup=function(p){return b.env.eventDispatcher.dispatchDOMEvent(p,b,"onKeyUp")}});e.jumpToEnd()})}},{key:"onMouseDown",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(b){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var b=this;return this.whenRendered().then(function(){var e=b.domNode;e.parentNode&&"INPUT"==e.parentNode.tagName&&(e.parentNode.remove(),
e=b.env.renderer.getNodeForMorph(b),e.insertBefore(b.domNode,e.firstChild));return b.domNode})}},{key:"onKeyDown",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){Sb._get(Object.getPrototypeOf(k.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),
"onFocus",this).call(this,b);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,b);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return e.borderWidth=3,e.borderColor=If.Color.red,e._errorIcon=e.addMorph(e._errorIcon||If.morph({type:"label",value:[" "+b,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(If.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:If.Color.red,opacity:0,reactsToPointer:!1,fill:If.Color.white.withA(.9)})),l.yield(e.whenRendered(),2);e._errorIcon.opacity=1;e._errorIcon.rightCenter=e.innerBounds().insetBy(10).rightCenter();l.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=If.Color.transparent)}},{key:"acceptInput",value:function(){var b=this.input;If.signal(this,"inputAccepted",b);return b}},{key:"onInputChanged",value:function(b){this.clearError();If.signal(this,"inputChanged",b)}},{key:"updateHtml",value:function(b){var e=this,l,p,q,u,w,y,A,C,D,L,I,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){if(1==V.nextAddress)return l=e,p=l.fontSize,
q=l.fontFamily,u=l.padding,w=l.placeholder,y=void 0===l.fill?qf.white:l.fill,A=l.borderRadius,C=u.top(),D=u.right(),L=u.bottom(),I=u.left(),V.yield(e.ensureInputNode(),2);S=V.yieldResult;S.setAttribute("type","password");S.setAttribute("placeholder",w);S.setAttribute("value",b);Object.assign(S.style,{position:"absolute",width:"calc(100% - "+I+"px - "+D+"px)","border-width":0,outline:"none","border-radius":A.valueOf()+"px",background:y.toString(),padding:C+"px "+D+"px "+L+"px "+I+"px","font-size":p+
"px","font-family":""+q});V.jumpToEnd()})}},{key:"commands",get:function(){var b=this;return[{name:"accept input",exec:function(){b.acceptInput();return!0}}].concat(Sb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(b){var e=b.getRootNode(),
l=e.createElement("div"),p=b.querySelector("input");e=e.createElement("input");p.childNodes[0]&&"INPUT"===p.childNodes[0].tagName&&(p=p.childNodes[0]);e.id=b.id;e.className=b.className;l.style=b.style.cssText;Object.assign(e.style,If.obj.select(p.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));e.style.position="absolute";e.style.width=b.style.width;e.style.height=b.style.height;e.style["border-width"]=b.style["border-width"];e.placeholder=
this.placeholder;e.type="password";e.autocomplete=e.name=this.name.replace(/[\s"]/g,"-");l.appendChild(e);l.appendChild(b.childNodes[1]);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:If.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(b){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},
domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(b){this.domNode.value=b;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(b){this.setProperty("placeholder",b);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(b){this.setProperty("fontSize",b);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],
set:function(b){this.setProperty("fontFamily",b);this.updateHtml(this.input)}},padding:{defaultValue:If.Rectangle.inset(2),after:["input"],set:function(b){this.setProperty("padding",b);this.updateHtml(this.input)}}}}}],d,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14914,end:21842})}(If.HTMLMorph);
If.PasswordInputLine=Fs;If.PasswordInputLine=Fs;If.PasswordInputLine=Fs;If.default=WR;var Ye=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");Ye.default=rk;Ye.config=rk;Object.assign(Ye,$ma);Object.assign(Ye,boa);Object.assign(Ye,goa);Object.assign(Ye,hoa);Object.assign(Ye,doa);Object.assign(Ye,Foa);Object.assign(Ye,Iha);Object.assign(Ye,$1);Ye.StyleSheet=Qp;Ye.StyleSheet=Qp;Ye.ShadowObject=Dn;Ye.ShadowObject=Dn;Ye.addOrChangeCSSDeclaration=Vo;Ye.addOrChangeCSSDeclaration=Vo;Ye.addOrChangeLinkedCSS=
Bt;Ye.addOrChangeLinkedCSS=Bt;Ye.easings=Fn;Ye.easings=Fn;Ye.stringToEasing=ur;Ye.stringToEasing=ur;Object.assign(Ye,ana);Ye.Icon=Ql;Ye.Icon=Ql;Ye.loadMorphFromSnapshot=mp;Ye.loadMorphFromSnapshot=mp;Object.assign(Ye,bna);Ye.World=Bq;Ye.Hand=by;Ye.Morph=Vi;Ye.Image=av;Ye.Ellipse=$u;Ye.Triangle=Wx;Ye.Path=bv;Ye.Polygon=Xx;Ye.LineMorph=Yx;Ye.Text=Lo;Ye.Label=Mo;Ye.HTMLMorph=Es;Ye.InputLine=SB;Ye.PasswordInputLine=Fs;Ye.InputLine=SB;Ye.InputLine=SB;Ye.PasswordInputLine=Fs;Ye.PasswordInputLine=Fs;Ye.locateClass=
Ro;Ye.morph=Zi;Ye.addClassMappings=az;Ye.inspect=Fu;Ye.touchInputDevice=Ol;Ye.addClassMappings({default:Ye.Morph,world:Ye.World,hand:Ye.Hand,image:Ye.Image,ellipse:Ye.Ellipse,triangle:Ye.Triangle,path:Ye.Path,text:Ye.Text,input:Ye.InputLine,label:Ye.Label,polygon:Ye.Polygon,line:Ye.LineMorph,html:Ye.HTMLMorph});Ye.morph=Zi;Ye.morph=Zi;Ye.inspect=Fu;Ye.inspect=Fu;Ye.touchInputDevice=Ol;Ye.touchInputDevice=Ol;var Goa=Object.freeze({__proto__:null,config:rk,StyleSheet:Qp,ShadowObject:Dn,addOrChangeCSSDeclaration:Vo,
addOrChangeLinkedCSS:Bt,easings:Fn,stringToEasing:ur,Icon:Ql,loadMorphFromSnapshot:mp,InputLine:SB,PasswordInputLine:Fs,morph:Zi,inspect:Fu,touchInputDevice:Ol,Morph:Vi,Ellipse:$u,Triangle:Wx,Image:av,PathPoint:NB,Path:bv,Polygon:Xx,LineMorph:Yx,World:Bq,Hand:by,Text:Lo,Label:Mo,Anchor:cy,HTMLMorph:Es,IFrameMorph:RB,MorphicEnv:tn,CustomLayout:RA,SnapLayout:SA,VerticalLayout:is,HorizontalLayout:xo,ProportionalLayout:TA,CenteredTilingLayout:UA,TilingLayout:VA,CellGroup:WA,LayoutColumn:XA,LayoutRow:YA,
LayoutCell:ZA,GridLayout:js,TooltipViewer:$x,Tooltip:cv,MorphicDB:Lp}),uk=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");uk.Morph=Vi;uk.stringToEasing=ur;uk.easings=Fn;uk.pt=kh;uk.num=Gj;uk.Path=Sg;uk.promise=Uf;uk.fun=Tj;var z6=function(a){var d=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),k=d.hasOwnProperty("ModuleProgress")&&"function"===typeof d.ModuleProgress?d.ModuleProgress:d.ModuleProgress=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&uk.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var b=this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(b.map(function(e){return[e,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(e){e._cachedTextBounds=null;e.fit()})}},{key:"updateProgressBar",
value:function(){if(this._lastWidth){this.relayout();var b=this.get("progress path"),e=uk.stringToEasing(uk.easings.inOutExpo)(uk.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);b.width=uk.num.interpolate(e,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){1==u.nextAddress&&(b.reset(),e="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),
l=$jscomp.makeIterator(e),p=l.next());if(3!=u.nextAddress){if(p.done)return u.jumpTo(0);q=p.value;b.finishPackage({packageName:q,loaded:!0});return u.yield(uk.promise.delay(200),3)}p=l.next();return u.jumpTo(2)})}},{key:"finishPackage",value:function(b){var e=this,l=b.frozen,p=b.loaded;b="stage "+b.packageName.replace("lively.","");b=this.get(b);l&&this.stages.set(b,"frozen");p&&this.stages.set(b,"loaded");uk.fun.debounceNamed("update progress",200,function(){e.updateProgressVisualization()})()}},
{key:"updateProgressVisualization",value:function(){var b=this,e=this.getSubmorphNamed("progress path"),l=this.getAllNamed(/stage/),p=l[0];l.forEach(function(q){var u=q.get("checkmark"),w=q.get("frozen indicator"),y=q.get("icon");q=b.stages.get(q);if("not loaded"!=q){p=u;if("loaded"==q){if(u.visible)return;u.animate({duration:300,visible:!0})}if("frozen"==q){if(w.visible)return;w.animate({duration:300,visible:!0})}y.opacity=1}else u.visible=!1,w.visible=!1,y.opacity=.2});l=this.localizePointFrom(uk.pt(-20,
0),p).x;l=Math.max(20,l-e.left);e.visible=20==l?!1:!0;this._lastWidth=e.width;this._timeStamp=Date.now();this._currentProgress=l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var b=this;this.whenRendered().then(function(){b.reset()})}}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},{start:192,end:3586})}(uk.Morph);z6=uk.ModuleProgress;uk.default=z6;var jg=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");jg.promise=Uf;jg.fun=Tj;jg.num=Gj;jg.Icon=Ql;jg.stringToEasing=ur;jg.easings=Fn;jg.VerticalLayout=is;jg.ShadowObject=Dn;jg.HorizontalLayout=xo;jg.morph=Zi;jg.Morph=Vi;jg.StyleSheet=Qp;jg.Image=av;jg.pt=kh;jg.RadialGradient=Nl;jg.rect=zk;jg.Rectangle=Qd;jg.Color=qf;jg.connect=Mj;
(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),k=d.hasOwnProperty("ProgressBar")&&"function"===typeof d.ProgressBar?d.ProgressBar:d.ProgressBar=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"test",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){1==e.nextAddress&&(b.progress=0);if(!(1>b.progress))return e.jumpTo(0);
b.progress+=.1;return e.yield(jg.promise.delay(1E3),2)})}},{key:"update",value:function(){var b=this;setTimeout(function(){b.world()||b.stopStepping()},1E3);if(this._lastWidth){var e=this.get("progress path"),l=jg.stringToEasing(jg.easings.inOutExpo)(jg.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),p=this._targetWidth;e.topLeft=jg.pt(0,0);e.height=this.height;e.width=this._lastWidth>p?p:jg.num.interpolate(l,this._lastWidth,p)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},
{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(b){var e=this.get("progress path");this._lastWidth=Math.max(e.width,this._targetWidth,1);this._targetWidth=this.width*b;this._timeStamp=Date.now();this.setProperty("progress",b)}},fill:{defaultValue:jg.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",
fill:jg.Color.orange,width:1}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1943})})(jg.Morph);var YR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),k=d.hasOwnProperty("LoadingIndicator")&&"function"===typeof d.LoadingIndicator?
d.LoadingIndicator:d.LoadingIndicator=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);var e=this.ui;b=e.label;var l=e.closeButton;if(e=e.progressBar)e.opacity=0,e.isLayoutable=!1;jg.connect(this,"extent",this,"relayout");
jg.connect(b,"extent",this,"relayout");jg.connect(b,"value",this,"updateLabel");jg.connect(b,"fontSize",this,"updateLabel");jg.connect(b,"fontFamily",this,"updateLabel");jg.connect(l,"fire",this,"remove");l.fit();this.relayout()}},{key:"animateProgress",value:function(b){var e=this,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return l=e.ui,(p=l.progressBar)||(p=e.addMorph(new jg.ProgressBar({name:"progress bar"}))),q=e.center,0==b?(p.isLayoutable=!1,p.opacity=
0):(p.isLayoutable=!0,p.opacity=1),p.progress=b,u.yield(e.whenRendered(),2);e.center=q;u.jumpToEnd()})}},{key:"hideSpinner",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(!b.ui.spinner)return e.return();b.ui.spinner.visible=!1;b.ui.spinner.width=50;b.ui.spinner.remove();return e.yield(b.whenRendered(),0)})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var b=this.center;this.relayout();this.center=b}},{key:"relayout",
value:function(){jg.Rectangle.inset(20,12);var b=this.ui,e=b.label,l=b.progressBar,p=b.status;b.closeButton.topRight=this.innerBounds().insetBy(2).topRight();l.extent=jg.pt(e.owner.bounds().width,5);p[p.visible?"top":"bottom"]=e.height}},{key:"onHoverIn",value:function(b){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(b){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(b,e){var l=jg.morph(Object.assign({type:jg.LoadingIndicator},
e,{label:b}));if(e&&e.animated)return jg.promise.delay(e.delay||0).then(function(){l.openInWorld();l.opacity=0;l.whenRendered().then(function(){l.ui.spinner&&(l.ui.spinner.visible=!0);l.top+=25;l.animate({top:l.top-25,easing:jg.easings.outExpo});l.animate({opacity:1,easing:jg.easings.outExpo})})}),l;l.openInWorld();l.ui.label.whenRendered().then(function(){l.ui.spinner&&(l.ui.spinner.visible=!0);l.ui.label.fit()});return l}},{key:"forPromise",value:function(b,e,l){var p=this.open(e,l);jg.promise.finally(Promise.resolve(b),
function(){return p.remove()});return p}},{key:"runFn",value:function(b,e,l){var p=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return q=p.open(e,l),u.yield(q.whenRendered(),2);case 2:return u.setFinallyBlock(3),u.yield(b(q),5);case 5:return u.return(u.yieldResult);case 3:u.enterFinallyBlock(),q.remove(),u.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},
hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(b){this.animateProgress(jg.num.clamp(b,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(b){this.ui.label.value=b}},status:{derived:!0,
after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(b){var e=this.ui.status;b?(e.visible=!0,e.value=b):(e.visible=!1,e.value="");this.relayout()}},fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(b){this.ui.label.fontFamily=b}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(b){this.ui.label.fontSize=b}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+
"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:jg.pt(86.2,70.2)},{type:"label",name:"ld label",extent:jg.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:jg.Icon.textAttribute("times")},{type:jg.ProgressBar,name:"progress bar"}]}}}}}],d,{pathInPackage:function(){return"loading-indicator.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2099,end:8211})}(jg.Morph);YR=jg.LoadingIndicator;var gy=Ia("q",YR);jg.default=YR;var sh=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");sh.Morph=Vi;sh.World=Bq;sh.HorizontalLayout=xo;sh.morph=Zi;sh.MorphicDB=Lp;sh.graph=Cq;sh.promise=Uf;sh.date=tp;sh.string=Bg;sh.arr=
Ne;sh.Color=qf;sh.pt=kh;sh.LoadingIndicator=gy;sh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
sh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
sh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(a){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),k=d.hasOwnProperty("WorldVersion")&&"function"===typeof d.WorldVersion?d.WorldVersion:d.WorldVersion=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"update",value:function(){var b=$jscomp.makeIterator(this.submorphs),e=b.next().value;b=b.next().value;e.imageUrl=this.commit.preview||sh.missingSVG;b.textAndAttributes=
this.info;b.fontColor=this.selected?sh.Color.white:sh.Color.darkGray}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:sh.Color.transparent},info:{derived:!0,get:function(){var b=this.commit,e=b.message,l=b.name,p=b.timestamp;return[b._id.slice(0,6)+" ",{fontWeight:"bold"},sh.string.truncate(e.split("\n")[0],40)+" ",{}," ("+l+" ",{},""+sh.date.format(new Date(p),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(b){this.setProperty("selected",
b);this.update()}},layout:{initialize:function(){this.layout=new sh.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:sh.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:sh.Color.gray}]}}}}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:1327,end:2884})})(sh.Morph);var A6=function(a){var d=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),k=d.hasOwnProperty("WorldVersionViewer")&&"function"===typeof d.WorldVersionViewer?d.WorldVersionViewer:d.WorldVersionViewer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(b){switch(b.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var b=this,e,l,p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:return e=b.get("version list").selection,l=sh.LoadingIndicator.open("Loading "+e.name+"..."),p=$world,q=b.db||
sh.MorphicDB.default,u=e._id,C.setCatchFinallyBlocks(2,3),u?C.yield(sh.World.loadFromCommit(u,void 0,{morphicDB:q}),8):C.yield(sh.World.loadFromDB(e.name,e.ref,void 0,{morphicDB:q}),7);case 7:w=C.yieldResult;C.jumpTo(6);break;case 8:w=C.yieldResult;case 6:return y=w,C.return(y);case 3:C.enterFinallyBlock();l.remove();C.leaveFinallyBlock(0);break;case 2:A=C.enterCatchBlock(),console.error(A),p.showError("Error loading world:"+A),C.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var b=
this,e,l,p,q,u,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){e=b.get("version list").selection;if(!e)return y.return();l=b.db||sh.MorphicDB.default;p=e;q=p._id;u=p.name;w=p.type;return y.yield(l.revert(w,u,q,"HEAD"),2)}return y.return(b.initializeFromStartCommit(e,l,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(b,e,l){e=void 0===e?sh.MorphicDB.default:e;l=void 0===l?{}:l;var p=this,q,u,w,y,A,C,D,L,I,S,V,ba,ua,Fa,F,Y,Q,W,ka,ea,la,
db,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){switch(xa.nextAddress){case 1:return q=l,u=void 0===q.showRefs?!0:q.showRefs,w=p.startCommit=b,y=w._id,A=w.type,C=w.name,D=p.getSubmorphNamed("version list spinner"),D.visible=!0,D.center=p.get("version list").center,p.db=e,xa.yield(e.history(A,C),2);case 2:L=xa.yieldResult,I=L.refs,S=L.history,V=y,ba=sh.graph.invert(S),ua=sh.graph.hull(ba,y),Fa={_id:!0},F=[b],Y=$jscomp.makeIterator(ua),Q=Y.next();case 3:if(Q.done)return ea=sh.arr.max(F,
function(na){return na.timestamp}),V=ea._id,xa.yield(e.log(V,void 0,!0),7);W=Q.value;return xa.yield(e.log(W,void 0,!0,Fa),6);case 6:ka=xa.yieldResult;F.push.apply(F,$jscomp.arrayFromIterable(ka));ka.forEach(function(na){return Fa[na._id]=!0});Q=Y.next();xa.jumpTo(3);break;case 7:la=xa.yieldResult;if(u)for(db in I);ub=la.map(function(na){var Aa=new sh.WorldVersion({reactsToPointer:!1,commit:na});Aa.update();return{isListItem:!0,morph:Aa,value:na}});p.get("version list").items=ub;D.visible=!1;xa.jumpToEnd()}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],d,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:2901,end:6778})}(sh.Morph);A6=sh.WorldVersionViewer;sh.default=A6;var Rg=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");Rg.Morph=
Vi;Rg.morph=Zi;Rg.Icon=Ql;Rg.touchInputDevice=Ol;Rg.Rectangle=Qd;Rg.LinearGradient=qk;Rg.Color=qf;Rg.pt=kh;Rg.signal=Ak;Rg.connect=Mj;Rg.arr=Ne;Rg.obj=ff;Rg.Closure=ji;var hy=Ia("B",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("Button")&&"function"===typeof d.Button?d.Button:d.Button=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b)}},{key:"__additionally_serialize__",value:function(b,e,l,p){Sb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",this).call(this,b,e,l,p);p("fontSize",this.fontSize);this.label!=this.labelMorph.value&&p("label",this.labelMorph.value)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=
!0}},{key:"onChange",value:function(b){var e=b.prop;if(this.label)switch(e){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"onSubmorphChange",value:function(b,e){e===this.labelMorph&&"extent"===b.prop&&this.relayout();return Sb._get(Object.getPrototypeOf(k.prototype),"onSubmorphChange",this).call(this,b,e)}},{key:"fitLabelMorph",value:function(){var b=this;this.labelMorph.whenFontLoaded().then(function(){b.labelMorph.invalidateTextLayout();
b.labelMorph.fit()})}},{key:"relayout",value:function(){var b=this.labelMorph;if(b&&!this._relayouting){this._relayouting=!0;try{var e=this.padding,l=e.top(),p=e.bottom(),q=e.left(),u=e.right(),w=b.height+l+p,y=b.width+q+u;w>this.height&&(this.height=w);y>this.width&&(this.width=y);var A=this.innerBounds().insetByRect(e);b.center=A.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var b=this.padding,e=this.labelMorph;e.fit();this.extent=b.bottomLeft().addPt(b.bottomRight()).addPt(e.extent);
this.relayout();return this}},{key:"trigger",value:function(){try{Rg.signal(this,"fire"),"function"===typeof this.action&&this.action()}catch(e){var b=this.world();b?b.logError(e):console.error(e)}}},{key:"considerPress",value:function(b){return Rg.touchInputDevice?!0:this.innerBoundsContainsPoint(b.positionIn(this))}},{key:"onMouseDown",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);b.isAltDown()||this.deactivated||!this.considerPress(b)||(this.pressed=
{originalFill:this.fill})}},{key:"onMouseUp",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);b.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(b){Rg.touchInputDevice?(this.draggable=!0,this.pressed=null):Sb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b)}},{key:"onDrag",value:function(b){}},{key:"onHoverOut",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",
this).call(this,b);!Rg.touchInputDevice&&this.pressed&&b.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);Rg.touchInputDevice||this.deactivated||!b.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.world().prompt("edit button label",
{input:b.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);e=l.yieldResult;"string"===typeof e&&(b.label=e);l.jumpToEnd()})}},{key:"menuItems",value:function(){var b=this,e=Sb._get(Object.getPrototypeOf(k.prototype),"menuItems",this).call(this);e.unshift({isDivider:!0});e.unshift(["change label",function(){return b.interactivelyChangeLabel()}]);return e}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,
defaultValue:Rg.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:Rg.pt(100,20)},borderColor:{defaultValue:Rg.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new Rg.LinearGradient({stops:[{offset:0,color:Rg.Color.white},{offset:1,color:Rg.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(b){this.setProperty("deactivated",b);this.nativeCursor=
b?"not-allowed":"pointer";this.labelMorph.opacity=b?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(b){this.getProperty("pressed");this.setProperty("pressed",b)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(b){this.labelMorph.fontSize=b},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(b){this.labelMorph.fontColor=b},get:function(){return this.labelMorph.fontColor}},
labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(b){var e=this.labelMorph;e&&e.remove();b.name="label";b.reactsToPointer=!1;this.addMorphAt(b,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(b){this.labelMorph.textAndAttributes=
b}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(b){b.isMorph?(this.setProperty("label",b.value),this.labelMorph=b):(this.setProperty("label",b),this.labelMorph.value=b,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=b));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8293})}(Rg.Morph));Rg.Button=hy;Rg.Button=hy;Rg.Button=hy;var TB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("RadioButton")&&"function"===typeof d.RadioButton?d.RadioButton:d.RadioButton=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:"getMaster",value:function(b){return b?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var b=this.indicator;b.borderWidth=1;b.borderColor=Rg.Color.gray;this.selected=!1;Rg.connect(b,"onMouseUp",this,"select")}},{key:"morph",get:function(){var b=this.indicator;return this.submorphs.find(function(e){return e!==b})}},{key:"morph",set:function(b){var e=this.indicator;
this.submorphs.forEach(function(l){l!==e&&l.remove()});b.position=Rg.pt(50,0);this.addMorph(b)}},{key:"value",get:function(){if(!this.valueFn){try{var b=JSON.parse(this.valueFunctionString)}catch(e){b=this.valueFunctionString}this.valueFn=Rg.Closure.fromSource(b).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(b){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(b){var e=this;this.whenRendered().then(function(l){e.master={auto:e.getMaster(b)}});this.setProperty("selected",!!b)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',
set:function(b){this.setProperty("valueFunctionString",b.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8302,end:10679})}(Rg.Morph);Rg.RadioButton=TB;Rg.RadioButton=
TB;Rg.RadioButton=TB;var UB=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),k=d.hasOwnProperty("RadioButtonGroup")&&"function"===typeof d.RadioButtonGroup?d.RadioButtonGroup:d.RadioButtonGroup=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"reset",value:function(){this.submorphs.forEach(function(b){return b.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},
{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(b,e){var l=new Rg.RadioButton;l.reset();l.morph=b;void 0!=e&&(l.internalValue=e,l.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(l);return l}},{key:"setSelection",value:function(b){this.submorphs.forEach(function(e){e!==b&&(e.selected=!1)});b.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(b){return b.selected})}},
{key:"value",get:function(){var b=this.selectedButton;return b?b.value:null}},{key:"value",set:function(b){var e=this.submorphs.find(function(l){try{return l.value===b}catch(p){return!1}});e?e.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(b){return b.value})},set:function(b){var e=this;this.removeAllButtons();
if(Rg.obj.isArray(b)){if(0==b.length)return;b.forEach(function(l){e.addButton(Rg.morph({name:"label",type:"label",value:l,reactsToPointer:!1}))})}else{b=[].concat($jscomp.arrayFromIterable(b.entries()));if(0==b.length)return;b.forEach(function(l){var p=$jscomp.makeIterator(l);l=p.next().value;p=p.next().value;e.addButton(Rg.morph({name:"label",type:"label",value:l,reactsToPointer:!1}),p)})}this.submorphs[0].master.whenApplied().then(function(){return e.setSelection(e.submorphs[0])})},value:{derived:!0,
after:["submorphs"],get:function(){var b=this.selectedButton;return b?b.value:null},set:function(b){var e=this.submorphs.find(function(l){try{return l.value===b}catch(p){return!1}});e?e.select():this.setSelection(null)}}}}}}],d,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10688,end:13602})}(Rg.Morph);
Rg.RadioButtonGroup=UB;Rg.RadioButtonGroup=UB;Rg.RadioButtonGroup=UB;var Hoa=Object.freeze({__proto__:null,Button:hy,RadioButton:TB,RadioButtonGroup:UB}),$c=lively.FreezerRuntime.recorderFor("lively.components/list.js");$c.asItem=WG;$c.Morph=Vi;$c.Text=Lo;$c.StyleSheet=Qp;$c.Label=Mo;$c.Icon=Ql;$c.morph=Zi;$c.touchInputDevice=Ol;$c.pt=kh;$c.LinearGradient=qk;$c.Color=qf;$c.Rectangle=Qd;$c.rect=zk;$c.arr=Ne;$c.Path=Sg;$c.string=Bg;$c.signal=Ak;$c.noUpdate=rr;$c.once=cq;$c.Button=hy;$c.bowser=Cn;$c.asItem=
WG;$c.asItem=WG;var GJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("ListItemMorph")&&"function"===typeof d.ListItemMorph?d.ListItemMorph:d.ListItemMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"displayItem",value:function(b,e,l,p,q,u,w){u=void 0===u?!1:u;var y=b.morph,A=y?"":b.label||b.string||"no item.string";b.annotation?this.valueAndAnnotation=
{value:A,annotation:b.annotation}:"string"===typeof A?this.textString=A:this.value=A;this.tooltip=b.tooltip||this.tooltip||this.textString;0==b.tooltip&&(this.tooltip=!1);this.itemIndex=e;this.position=q;if(w){e=w.fontFamily;q=w.selectionColor;A=w.selectionFontColor;var C=w.nonSelectionFontColor,D=w.borderRadius,L=w.fontSize;w=w.padding;A&&this.selectionFontColor!==A&&(this.selectionFontColor=A);C&&this.nonSelectionFontColor!==C&&(this.nonSelectionFontColor=C);q&&this.selectionColor!==q&&(this.selectionColor=
q);D&&D!=this.borderRadius&&(this.borderRadius=D);L&&this.fontSize!==L&&(this.fontSize=L);e&&this.fontFamily!==e&&(this.fontFamily=e);w&&!this.padding.equals(w)&&(this.padding=w)}b.autoFit&&(y.width=l);this.extent=$c.pt(y?Math.max(y.width,l):l,p);y?(b=y.getTransform().copy(),this.submorphs=[y],y.setTransform(b),y.position=$c.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=u}},{key:"onDragStart",value:function(b){var e=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,
source:this,itemsTouched:[]};if(!e.multiSelect||!e.multiSelectViaDrag)e.onItemMorphDragged(b,this)}},{key:"onMouseDown",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this.owner.owner.clickOnItem(b)}},{key:"onDrag",value:function(b){var e=this.owner.owner;if(e.multiSelect&&e.multiSelectViaDrag){b=b.hand.morphBeneath(b.position);var l=e.selectedIndexes,p=e.itemMorphs;b!==this&&p.includes(b)&&(this._dragState.sourceIsSelected&&!b.isSelected?($c.arr.pushIfNotIncluded(l,
b.itemIndex),e.selectedIndexes=l):!this._dragState.sourceIsSelected&&b.isSelected&&($c.arr.remove(l,b.itemIndex),e.selectedIndexes=l))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!$c.touchInputDevice},fill:{derived:!0,get:function(){return $c.touchInputDevice&&this.pressed?$c.Color.gray.withA(.5):this.isSelected?
this.selectionColor:$c.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:$c.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:$c.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:$c.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:924,end:5192})}($c.Label);$c.ListItemMorph=GJ;$c.ListItemMorph=GJ;$c.ListItemMorph=GJ;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("ListScroller")&&"function"===typeof d.ListScroller?d.ListScroller:d.ListScroller=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:"onScroll",value:function(b){return this.owner.update()}},{key:"onMouseDown",value:function(b){var e=this,l=this.scroll.y;if($c.touchInputDevice){var p=this.owner.itemForClick(b);p&&(p.pressed=!0,p.makeDirty(),setTimeout(function(){p.pressed=!1;if(0==l-e.scroll.y)return e.owner.clickOnItem(b)},300))}else return this.owner.clickOnItem(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},
fill:{defaultValue:$c.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5194,
end:6156})})($c.Morph);$c.listCommands=[{name:"page up",exec:function(a){a.gotoIndex(Math.max(0,a.selectedIndex-Math.round(a.height/a.itemHeight)));return!0}},{name:"page down",exec:function(a){a.gotoIndex(Math.min(a.items.length-1,a.selectedIndex+Math.round(a.height/a.itemHeight)));return!0}},{name:"goto first item",exec:function(a){a.gotoIndex(0);return!0}},{name:"goto last item",exec:function(a){a.gotoIndex(a.items.length-1);return!0}},{name:"arrow up",exec:function(a){a.gotoIndex(a.indexUp());
return!0}},{name:"arrow down",exec:function(a){a.gotoIndex(a.indexDown());return!0}},{name:"select up",exec:function(a){var d=a.selectedIndexes;if(!a.multiSelect||!d.length)return a.execCommand("arrow up");var k=d[0];if("number"!==typeof k)a.selectedIndexes=[k];else{var b=a.indexUp(k);d.includes(k)&&d.includes(b)?a.selectedIndexes=d.filter(function(e){return e!==k}):a.selectedIndexes=[b].concat(d.filter(function(e){return e!==b}))}return!0}},{name:"select down",exec:function(a){var d=a.selectedIndexes;
if(!a.multiSelect||!d.length)return a.execCommand("arrow down");var k=d[0],b=a.indexDown(k);d.includes(k)&&d.includes(b)?a.selectedIndexes=d.filter(function(e){return e!==k}):a.selectedIndexes=[b].concat(d.filter(function(e){return e!==b}));return!0}},{name:"select all",exec:function(a){a.selectedIndexes=$c.arr.range(a.items.length-1,0);a.scrollIndexIntoView(a.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(a){var d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return d=a.selectedIndex||0,e.yield(a.world().filterableListPrompt("Select item",a.items,{preselect:d,requester:a.getWindow()||a,itemPadding:$c.Rectangle.inset(0,2),multiSelect:!0}),2);k=e.yieldResult;b=k.selected;b.length&&(a.multiSelect?a.selections=b:a.selection=b[0],a.scrollSelectionIntoView(),a.update());return e.return(!0)})}},{name:"realign top-bottom-center",exec:function(a){if(a.selection){var d=a.padding,k=a.itemHeight,b=a.scroll,e=b.x;b=b.y;var l=$c.pt(0,a.selectedIndex*k);
d=a.height-k-d.top()-d.bottom();b=2>Math.abs(l.y-b)?l.y-d:2>Math.abs(l.y-b-.5*d)?l.y:l.y-.5*d;a.scroll=$c.pt(e,b);return!0}}},{name:"print contents in text window",exec:function(a){var d="items of "+a.name,k=a.items.map(function(b){if("string"===typeof b)return b;var e=b.string,l=b.label;b=b.annotation;var p="";l?p="string"===typeof l?p+l:p+l.map(function(q,u){return 0==u%2?q:""}).join(""):e&&(p+=e);b&&(p+=" ",p="string"===typeof b?p+b:p+b[0]);return p}).join("\n");return a.world().execCommand("open text window",
{title:d,content:k,name:d,fontFamily:"Monaco, monospace"})}}];var iy=Ia("L",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("List")&&"function"===typeof d.List?d.List:d.List=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"__additionally_serialize__",value:function(b,e,l,p){var q=this;Sb._get(Object.getPrototypeOf(k.prototype),"__additionally_serialize__",
this).call(this,b,e,l,p);this.whenRendered().then(function(){return q.update()})}},{key:"onLoad",value:function(){this.scroller.visible=$c.touchInputDevice}},{key:"initializeSubmorphs",value:function(b){this.submorphs=b=b||this.submorphs||[];for(var e=0;e<b.length;e++)switch(b[e].name){case "listItemContainer":var l=b[e];continue;case "scroller":var p=b[e]}p||(p=this.addMorph(new $c.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));l||this.addMorph({name:"listItemContainer",
fill:$c.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(l||p)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(b){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(b.prop)&&this.update();return Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"itemForClick",value:function(b){b=b.positionIn(this.world()).subPt(this.scroll);
b=this.listItemContainer.morphsContainingPoint(b);return b.find(function(e){return e.isListItem})||b[0]}},{key:"clickOnItem",value:function(b){var e=this.itemForClick(b),l=b.state.clickCount;if(!(b.positionIn(this).x>this.width-this.scrollbarOffset.x))this[2===l?"onItemMorphDoubleClicked":"onItemMorphClicked"](b,e)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",
value:function(b){return this.items.find(function(e){return e===b||e.value===b})}},{key:"findIndex",value:function(b){return this.items.findIndex(function(e){return e===b||e.value===b})}},{key:"addItem",value:function(b){return this.addItemAt(b)}},{key:"addItemAt",value:function(b,e){var l=this;e=void 0===e?this.items.length:e;var p=this.items;e=Math.min(p.length,Math.max(0,e));p.splice(e,0,$c.asItem(b));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[b,e],undo:{target:this,
selector:"removeItem",args:[b]}},function(){return l.update()})}},{key:"removeItem",value:function(b){var e=this;b=this.find(b);var l=this.items,p=l.indexOf(b);-1!==p&&(l.splice(p,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[b],undo:{target:this,selector:"addItemAt",args:[b,p]}},function(){return e.update()}))}},{key:"selectItemMorph",value:function(b){this.selectedIndexes=[b.itemIndex]}},{key:"gotoIndex",value:function(b){this.scrollIndexIntoView(this.selectedIndex=b)}},
{key:"indexUp",value:function(b){b="number"===typeof b?b:this.selectedIndex;return(b||this.items.length)-1}},{key:"indexDown",value:function(b){b=void 0===b?this.selectedIndex:b;return(("number"===typeof b?b:-1)+1)%this.items.length}},{key:"update",value:function(){var b=this,e=this.items;e&&this.scroller&&this.dontRecordChangesWhile(function(){var l=b.itemHeight,p=b.itemMorphs,q=b.listItemContainer,u=b.selectedIndexes,w=b.extent.y,y=b.fontSize,A=b.fontFamily,C=b.fontColor,D=b.padding,L=b.itemPadding,
I=b.selectionColor,S=b.selectionFontColor,V=b.nonSelectionFontColor,ba=b.itemBorderRadius,ua=b.scrollBar,Fa=b.scroller,F=b.scrollable,Y=Fa.scroll.y;D=D||$c.Rectangle.inset(0);var Q=D.top(),W=D.left(),ka=D.bottom();D=D.right();var ea=Math.max(0,Math.floor(Y/l)),la=Math.min(e.length,ea+w/l+2);w=0;D=b.width-(W+D);p=$c.arr.sortBy(p,function(Pa){return Pa.itemIndex});var db=$jscomp.makeIterator($c.arr.partition(p,function(Pa){return Pa.itemIndex<ea}));p=db.next().value;var ub=db.next().value;ub=$jscomp.makeIterator($c.arr.partition(ub,
function(Pa){return Pa.itemIndex>la-1}));db=ub.next().value;ub=ub.next().value;p=[].concat($jscomp.arrayFromIterable(db),$jscomp.arrayFromIterable(ub),$jscomp.arrayFromIterable(p));for(db=0;db<la-ea;db++){ub=ea+db;var xa=e[ub];if(!xa){p.slice(db).forEach(function(Pa){Pa.remove()});break}var na={fontSize:y,fontFamily:A,fontColor:V||C,padding:L,borderRadius:ba||0,selectionFontColor:S,nonSelectionFontColor:V,selectionColor:I},Aa=p[db];Aa||(Aa=p[db]=q.addMorph(new $c.ListItemMorph(na)));Aa.reactsToPointer=
!F;Aa.displayItem(xa,ub,D,l,$c.pt(0,l*ub),u.includes(ub),na);w=Math.max(w,Aa.width)}p.slice(la-ea).forEach(function(Pa){return Pa.remove()});l=Math.max(Q+ka+l*e.length,b.height);q.setBounds($c.pt(W,Q).subXY(0,Y).extent($c.pt(b.width,l)));Fa.extent=b.extent.subXY(b.borderWidthRight,b.borderWidthBottom);ua.left=w/2;Fa.position=$c.pt(0,0);ua.extent=$c.pt(1,l)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",
value:function(b){var e=this.itemHeight,l=this.itemScroll;b=new $c.Rectangle(0,b*e,this.width,e);e=this.innerBounds().insetByRect(this.padding).translatedBy(l);var p=0;b.bottom()>e.bottom()&&(p=b.bottom()-e.bottom());b.top()<e.top()&&(p=b.top()-e.top());this.itemScroll=l.addXY(0,p);this.update()}},{key:"onItemMorphDoubleClicked",value:function(b,e){}},{key:"onItemMorphClicked",value:function(b,e){var l=e.itemIndex;e=this.selectedIndexes;var p=e.includes(l),q=[];if(this.multiSelect)if(b.isShiftDown())if(p)q=
e.filter(function(w){return w!=l});else{b=e[0];var u="number"===typeof b?$c.arr.range(l,b):[l];q=u.concat(e.filter(function(w){return!u.includes(w)}))}else q=this.multiSelectWithSimpleClick||b.isCommandKey()?p?e.filter(function(w){return w!=l}):[l].concat(e.filter(function(w){return w!=l})):[l];else q=[l];this.selectedIndexes=q}},{key:"onItemMorphDragged",value:function(b,e){}},{key:"onHoverIn",value:function(b){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(b){$c.touchInputDevice||
(this.scroller.visible=!1)}},{key:"onDragStart",value:function(b){}},{key:"onDrag",value:function(b){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",
command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this))}},{key:"commands",get:function(){return $c.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:$c.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:$c.Color.white},selectionColor:{type:"ColorGradient",
isStyleProp:!0,defaultValue:$c.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:$c.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:$c.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:$c.pt(0,0)},set:function(b){this.scroller&&(this.scroller.scroll=b)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{defaultValue:$c.pt(400,
360),set:function(b){b.eqPt(this.extent)||(this.setProperty("extent",b),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(b){this.setProperty("fontFamily",b);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(b){this.setProperty("fontSize",b);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:$c.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(b){this.setProperty("itemBorderRadius",
b);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:$c.Rectangle.inset(1),set:function(b){this.setProperty("itemPadding",b);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(b){this.setProperty("items",b.map($c.asItem));this.itemScroll=$c.pt(0,0);this.update();this.attributeConnections&&$c.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",
defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(b){return b.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(b){return this.selectedIndexes="number"===typeof b?[b]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(b){var e=
this.items.length;this.setProperty("selectedIndexes",(b||[]).filter(function(l){return 0<=l&&l<e}));this.update();$c.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(b){this.selections=[b]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var b=this;return this.selectedIndexes.map(function(e){return b.items[e]&&b.items[e].value})},set:function(b){var e=this;this.selectedIndexes=b.map(function(l){return e.findIndex(l)})}},
selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var b=this;return this.selectedIndexes.map(function(e){return b.items[e]})}},submorphs:{initialize:function(b){this.initializeSubmorphs(b)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},
scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{isStyleProp:!0,after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(b){this.setProperty("itemHeight",b);this.manualItemHeight="number"===typeof b;this.update()},get:function(){var b=this.getProperty("itemHeight");if(b)return b;
b=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var e=this.itemPadding;e&&(b+=e.top()+e.bottom());this.setProperty("itemHeight",b);return b}},theme:{after:["styleClasses"],defaultValue:"default",set:function(b){this.removeStyleClass(this.theme);this.addStyleClass(b);this.setProperty("theme",b)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10560,end:27175})}($c.Morph));$c.List=iy;$c.List=iy;$c.List=iy;$c.connect=Mj;var VB=Ia("ar",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("FilterableList")&&"function"===typeof d.FilterableList?d.FilterableList:d.FilterableList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,
[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;b.bounds||b.extent||(b.extent=$c.pt(400,360));Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);$c.connect(this.inputMorph,"inputChanged",this,"updateFilter");$c.connect(this.listMorph,"selection",this,"selectionChanged");$c.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();$c.connect(this,"extent",this,"relayout")}},{key:"resetConnections",
value:function(){var b=this,e=this.attributeConnections;if(e){var l=["accepted","canceled","remove"];e.filter(function(p){return l.includes(p.sourceAttrName)&&p.targetObj!==b}).forEach(function(p){return p.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var b=this.listMorph,e=this.inputMorph,l=this.paddingMorph,p=this.borderWidth;e.topLeft=$c.pt(p,p);e.width=b.width=this.width-2*p;l&&(l.topLeft=e.bottomLeft);b.position=l?l.bottomLeft:e.bottomLeft;b.height=
this.height-b.top-p}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(b){$c.signal(this,"selection",b)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var b=this.get("input").textString,e=Array.from(b).reduce(function(p,q){if("\\"===q&&!p.escaped)return p.escaped=!0,p;" "!==q||p.escaped?(p.spaceSeen=!1,p.current+=q):(!p.spaceSeen&&p.current&&(p.tokens.push(p.current),
p.current=""),p.spaceSeen=!0);p.escaped=!1;return p},{tokens:[],current:"",escaped:!1,spaceSeen:!1});e.current&&e.tokens.push(e.current);var l=e.tokens.map(function(p){return p.toLowerCase()});return{tokens:e.tokens,lowercasedTokens:l,input:b}}},{key:"updateFilter",value:function(){var b=this,e=this.parseInput(),l=this.filterFunction,p=this.sortFunction,q=this.items.filter(function(y){return l.call(b,e,y)});p&&(q=$c.arr.sortBy(q,function(y){return p.call(b,e,y)}));var u=this.listMorph,w=this.updateSelectionsAfterFilter?
u.selectedIndexes.map(function(y){return q.indexOf(u.items[y])}).filter(function(y){return-1!==y}):u.selectedIndexes;u.items=q;u.selectedIndexes=w.length?w:q.length?[0]:[];this.scrollSelectionIntoView();$c.signal(this,"filterChanged",{parsedInput:e,items:u.items})}},{key:"acceptInput",value:function(){var b=this.listMorph;this.get("input").acceptInput();b={filtered:this.items,selected:b.selections,action:this.selectedAction,status:"accepted"};$c.signal(this,"accepted",b);return b}},{key:"keybindings",
get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable($c.arr.range(0,
8).map(function(b){return{keys:"Alt-"+(b+1),command:{command:"choose action and accept input",args:{actionNo:b}}}}))).concat(Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this))}},{key:"commands",get:function(){var b=this;return Sb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"accept input",exec:function(e){b.acceptInput();return!0}},{name:"cancel",exec:function(e){$c.signal(e,"canceled");return!0}},{name:"choose action and accept input",exec:function(e,l){l=void 0===
l?{}:l;e.selectedAction=(e.actions||[])[void 0===l.actionNo?0:l.actionNo];return e.execCommand("accept input")}},{name:"choose action",exec:function(e){var l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(!e.actions)return u.return(!0);l=Object.assign({},e.style,{extent:e.extent});p=new $c.FilterableList(l);p.openInWorld(e.globalPosition);p.items=e.actions;q=e.actions.indexOf(e.selectedAction);-1===q&&(q=0);p.selectedIndex=q;$c.connect(p,"accepted",e,"selectedAction",{converter:function(w){this.targetObj.focus();
this.disconnect();this.sourceObj.remove();return w.selected[0]}});$c.connect(p,"canceled",e,"selectedAction",{converter:function(w){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});p.focus();return u.return(!0)})}}].concat($jscomp.arrayFromIterable($c.listCommands.map(function(e){return Object.assign({},e,{exec:function(l,p,q){return e.exec(b.listMorph,p,q)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},
{key:"properties",get:function(){return{fill:{defaultValue:$c.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(b){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(b);this.listMorph.addStyleClass(b);this.setProperty("theme",b)}},submorphs:{initialize:function(){var b=this;this.submorphs=[$c.Text.makeInputLine({name:"input",highlightWhenFocused:!1,
fixedHeight:!1,autofit:!1}),new $c.morph({name:"padding",fill:$c.Color.transparent}),new $c.List({name:"list",items:[]})];this.get("list").whenRendered().then(function(){return b.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},
fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(b){this.listMorph.fontFamily=b;this.inputMorph.fontFamily=b}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(b){this.listMorph.padding=b;this.inputMorph.padding=b}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(b){this.listMorph.fontSize=
b}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(b){this.listMorph.itemPadding=b}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(b){this.inputMorph.padding=b}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(b){this.inputMorph.input=b}},historyId:{derived:!0,after:["submorphs"],
defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(b){this.inputMorph.historyId=b}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(b){this.listMorph.multiSelect=b}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(b){this.setProperty("items",b.map($c.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},
selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(b){this.listMorph.selection=b}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(b){this.listMorph.selectedIndex=b}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(b){this.listMorph.selectedIndexes=b}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},
set:function(b){this.listMorph.selectedItems=b}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(b){this.listMorph.selections=b}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(b){this.setProperty("fuzzy",b);b?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=
null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var b=this.getProperty("filterFunction");if(!b)return this.defaultFilterFunction;"string"===typeof b&&(b=eval("("+b+")"));return b}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(b,e){return b.lowercasedTokens.every(function(l){return e.string.toLowerCase().includes(l)})})}},
fuzzySortFunction:{get:function(){var b=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(e,l){var p=String($c.Path("string"===typeof b.fuzzy?b.fuzzy:"string").get(l)).toLowerCase(),q=0;e.lowercasedTokens.forEach(function(u){p.startsWith(u)?q-=10:p.includes(u)&&(q-=5)});return $c.arr.sum(e.lowercasedTokens.map(function(u){return $c.string.levenshtein(p.toLowerCase(),u)}))+q})}},fuzzyFilterFunction:{get:function(){var b=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=
function(e,l){var p="string"===typeof b.fuzzy?b.fuzzy:"string";if(e.lowercasedTokens.every(function(u){return l.string.toLowerCase().includes(u)}))return!0;var q=String($c.Path(p).get(l)).toLowerCase();return 3>=$c.arr.sum(e.lowercasedTokens.map(function(u){return $c.string.levenshtein(q,u)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27288,end:41612})}($c.Morph));$c.FilterableList=VB;$c.FilterableList=VB;$c.FilterableList=VB;var WB=Ia("bE",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("DropDownList")&&"function"===typeof d.DropDownList?d.DropDownList:d.DropDownList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);$c.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(b){var e=
this;setTimeout(function(){var l=e.listMorph,p=e.world()&&e.world().focusedMorph;p!==l&&p!==e&&l.world()&&!l.withAllSubmorphsDetect(function(q){return q==p})?l.fadeOut(200):l.world()&&(l=$c.touchInputDevice?l.scroller:l,$c.once(l,"onBlur",e,"removeWhenFocusLost"),l.focus())},100)}},{key:"adjustLableFor",value:function(b){b=b.label||[b.string,null];b=[].concat($jscomp.arrayFromIterable(b),[" ",null],$jscomp.arrayFromIterable($c.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"))));
b[5]&&(b[5].paddingRight="0px",b[5].textStyleClasses=["fa","annotation"]);this.label=b;this.relayout()}},{key:"toggleList",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){e=b.listMorph;if(b.isListVisible())return $c.signal(b,"deactivated"),b.selection=e.selection,e.epiMorph=!1,e.remove(),q.jumpTo(0);$c.signal(b,"activated");b.openListInWorld?(e.openInWorld(),e.epiMorph=!0,e.hasFixedPosition=!0,e.setTransform(b.getGlobalTransform()),
l=b.globalBounds()):(l=b.innerBounds(),b.addMorph(e));p=e.items.length*e.itemHeight+e.padding.top()+e.padding.bottom();e.extent=$c.pt(b.width,Math.min(b.listHeight,p));"top"===b.listAlign?e.bottomLeft=l.topLeft():e.topLeft=l.bottomLeft();e.moveBy(b.listOffset||$c.pt(0,0));$c.once(e,"onItemMorphClicked",b,"toggleList");$c.once($c.touchInputDevice?e.scroller:e,"onBlur",b,"removeWhenFocusLost");return q.yield(e.whenRendered(),3)}if(4!=q.nextAddress)return q.yield(e.whenRendered(),4);$c.touchInputDevice?
e.scroller.focus():e.focus();e.scrollSelectionIntoView();q.jumpToEnd()})}},{key:"commands",get:function(){var b=this;return[{name:"accept",exec:function(){b.isListVisible()&&b.toggleList();return!0}},{name:"cancel",exec:function(){b.isListVisible()&&b.listMorph.remove();return!0}}].concat(Sb._get(Object.getPrototypeOf(k.prototype),"commands",this))}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:$c.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},listOffset:{isStyleProp:!0,defaultValue:$c.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var b=this.getProperty("listMorph");if(b)return b;b=new $c.List({name:"dropDownList"});
this.setProperty("listMorph",b);return b}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(b){var e=this,l=this.items.find(function(p){return p.value==e.selection});this.listMorph.items=b;l&&$c.noUpdate(function(){e.selection=e.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(b){var e=this.listMorph;if(b){var l=e.items,p=e.find(b);p||"string"!==typeof b||(p=l.find(function(q){return q.string===
b}));if(!p)return;this.adjustLableFor(p);e.selectedIndex=l.indexOf(p)}else e.selection=null,this.label="";$c.signal(this,"selection",e.selection)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41621,end:46703})}($c.Button));$c.DropDownList=WB;$c.DropDownList=WB;$c.DropDownList=
WB;var HJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("InteractiveItem")&&"function"===typeof d.InteractiveItem?d.InteractiveItem:d.InteractiveItem=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(b){this.list.showDropPreviewFor(this,b)}},{key:"onDrop",value:function(b){var e=this,l;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress){if(!e.item.isPreview)return p.jumpTo(0);l=b.hand.grabbedMorphs[0];Sb._get(Object.getPrototypeOf(k.prototype),"onDrop",e).call(e,b);return p.yield(e.list.whenRendered(),3)}e.list.addItemAt({morph:l,isListItem:!0},e.itemIndex);e.list.clearPreviews();p.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(b){$c.touchInputDevice?
this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(b){$c.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(b,e,l,p,q,u,w){u=void 0===u?!1:u;Sb._get(Object.getPrototypeOf(k.prototype),"displayItem",this).call(this,b,e,l,p,q,u,w);b.morph&&(b.morph.selected=u)}},{key:"onGrab",value:function(b){var e=this.list,l=b.halo&&b.halo.target===this;l&&b.halo.detachFromTarget();var p=this.submorphs.length?this.submorphs[0]:$c.morph({type:"label",
value:this.value});b.hand.grab(p);p.position=b.hand.localize(this.globalPosition);l&&b.halo.refocus(p);e.removeItem(this.list.items[this.itemIndex]);e.itemMorphs.forEach(function(q){return q.remove()});e.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!$c.touchInputDevice},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},
isListItem:{get:function(){return!0}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:46712,end:48961})}($c.ListItemMorph);$c.InteractiveItem=HJ;$c.InteractiveItem=HJ;$c.InteractiveItem=HJ;var IJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/list.js"),k=d.hasOwnProperty("MorphList")&&
"function"===typeof d.MorphList?d.MorphList:d.MorphList=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onLoad",value:function(){Sb._get(Object.getPrototypeOf(k.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(b,e){b=b.itemIndex;this.items[b].isPreview&&e||(this.clearPreviews(),e&&this.addItemAt({isListItem:!0,isPreview:!0,
morph:$c.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:$c.Color.orange.withA(.5)})},b))}},{key:"clearPreviews",value:function(){var b=this;this.items.filter(function(e){return e.morph&&e.morph.owner&&!$c.Path("morph.owner.isListItem").get(e)}).map(function(e){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(b.removeItem(e))})});this.items.filter(function(e){return e.isPreview}).map(function(e){return b.removeItem(e)})}},{key:"update",
value:function(){var b=this,e=this.items;e&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var l=b.itemHeight,p=b.itemMorphs,q=b.listItemContainer,u=b.selectedIndexes,w=b.extent.y,y=b.fontSize,A=b.fontFamily,C=b.fontColor,D=b.padding,L=b.itemPadding,I=b.selectionColor,S=b.selectionFontColor,V=b.nonSelectionFontColor,ba=b.itemBorderRadius,ua=b.scrollBar,Fa=b.scroll.y;D=D||$c.Rectangle.inset(0);var F=D.top(),Y=D.left(),Q=D.bottom();D=D.right();
var W=Math.max(0,Math.floor(Fa/l)),ka=Math.min(e.length,Math.ceil((Fa+w)/l));w=0;Fa=b.width-(Y+D);p=$c.arr.sortBy(p,function(db){return db.itemIndex});var ea=$jscomp.makeIterator($c.arr.partition(p,function(db){return db.itemIndex<W}));p=ea.next().value;var la=ea.next().value;la=$jscomp.makeIterator($c.arr.partition(la,function(db){return db.itemIndex>ka}));ea=la.next().value;la=la.next().value;p=[].concat($jscomp.arrayFromIterable(ea),$jscomp.arrayFromIterable(la),$jscomp.arrayFromIterable(p));y=
{fontSize:y,fontFamily:A,fontColor:V||C,padding:L,borderRadius:ba||0,selectionFontColor:S,nonSelectionFontColor:V,selectionColor:I};p.length&&ka-W>p.length&&(W!=p[0].itemIndex?$c.arr.pushAt(p,q.addMorph(new $c.InteractiveItem(y)),0):ka!=$c.arr.last(p).itemIndex&&p.push(q.addMorph(new $c.InteractiveItem(y))));for(A=0;A<ka-W;A++){C=W+A;L=e[C];if(!L){p.slice(A).forEach(function(db){return db.remove()});break}I=p[A];I||(I=p[A]=q.addMorph(new $c.InteractiveItem(y)),I.clipMode="visible");I.displayItem(L,
C,Fa,l,$c.pt(0,l*C),u.includes(C),y);w=Math.max(w,I.width)}l=Math.max(F+Q+l*e.length,b.height);u=$c.pt(b.width,l).subPt($c.pt(Y+D,0));q.setBounds($c.pt(Y,F).extent(u));ua.left=w-10;ua.fill=null;ua.top=0;ua.extent=$c.pt(1,l)}))}},{key:"onHoverIn",value:function(b){this.clipMode="auto"}},{key:"onHoverOut",value:function(b){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(b){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",
get:function(){return{touchInput:{get:function(){return $c.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(b){this.setProperty("items",b.map($c.asItem));this.itemMorphs.forEach(function(e){return e.remove()});this.update();this.attributeConnections&&$c.signal(this,"values",this.values)}}}}}],d,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:48970,end:54202})}($c.List);$c.MorphList=IJ;$c.MorphList=IJ;$c.MorphList=IJ;var Ioa=Object.freeze({__proto__:null,asItem:WG,ListItemMorph:GJ,List:iy,FilterableList:VB,DropDownList:WB,InteractiveItem:HJ,MorphList:IJ}),$f=lively.FreezerRuntime.recorderFor("lively.components/menus.js");$f.Label=Mo;$f.config=rk;$f.Morph=Vi;$f.obj=ff;$f.promise=Uf;$f.fun=Tj;$f.pt=kh;$f.Color=qf;$f.Rectangle=Qd;var JJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
k=d.hasOwnProperty("MenuDivider")&&"function"===typeof d.MenuDivider?d.MenuDivider:d.MenuDivider=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:$f.Color.gray.lighter()},extent:{defaultValue:$f.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}($f.Morph);$f.MenuDivider=JJ;$f.MenuDivider=JJ;$f.MenuDivider=JJ;var KJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),k=d.hasOwnProperty("MenuItem")&&"function"===typeof d.MenuItem?d.MenuItem:
d.MenuItem=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onHoverIn",value:function(b){var e=this;this.owner.itemMorphs.forEach(function(l){return l!==e&&(l.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(b,this,this.submenu)}},{key:"onHoverOut",value:function(b){var e=this,l=b.hand;setTimeout(function(){(e.owner?e.owner.submenus:[]).some(function(p){return p.fullContainsWorldPoint(l.globalPosition)})||
(e.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(e.submenu)return q.return();q.setCatchFinallyBlocks(2);e.owner.startFinish();if("function"!==typeof e.action)throw Error("Menu item "+e.textString+" has no executable action!");return q.yield(e.action(),4)}if(2!=q.nextAddress)return e.owner.completeFinish(),q.leaveTryBlock(0);l=q.enterCatchBlock();(p=e.world())?
p.logError(l):console.error(l);q.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:$f.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(b){this.selected!==b&&(this.addValueChange("selected",
b),b?(this.fontColor=$f.Color.white,this.fill=$f.Color.rgb(21,101,192)):(this.fill=$f.Color.transparent,this.fontColor=$f.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(b,e){return 0===e%2?b:""}).join("\n")},set:function(b){this.valueAndAnnotation={value:b,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(b){this.valueAndAnnotation={value:this.value,
annotation:b}}},action:{},submenu:{}}}}],d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}($f.Label);$f.MenuItem=KJ;$f.MenuItem=KJ;$f.MenuItem=KJ;$f.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var LJ=Ia("h",function(a){var d=
lively.FreezerRuntime.recorderFor("lively.components/menus.js"),k=d.hasOwnProperty("Menu")&&"function"===typeof d.Menu?d.Menu:d.Menu=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},
{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(b){switch(b.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b)}},{key:"remove",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.animate({opacity:0,duration:300}),2);b._waitingForFinish||b.completeFinish();Sb._get(Object.getPrototypeOf(k.prototype),
"remove",b).call(b);e.jumpToEnd()})}},{key:"ensureItem",value:function(b){if(!b)return $f.invalidItem;if(b.title)return this.title=b.title,null;if(b.isDivider)return b;if(b.hasOwnProperty("string")&&b.hasOwnProperty("action"))return $f.obj.select(b,["string","action","annotation"]);if(Array.isArray(b)){var e=$jscomp.makeIterator(b),l=e.next().value;e=e.next().value;return"string"===typeof l||Array.isArray(l)?e&&"function"!==typeof e?"object"===typeof e&&e.getItems?{label:l,submenu:e.getItems,annotation:[" ",
{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(e)?{label:l,submenu:e,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:$f.invalidItem:{label:l,action:e||function(){return $world.setStatusMessage(l)}}:$f.invalidItem}if(b.command){var p=b.command,q=b.showKeyShortcuts,u=b.target;e=b.alias;var w=b.args;b=b.tooltip;if(!p||!u)return $f.invalidItem;void 0===q&&(q=!0);q=q?"string"===typeof q?q:u.keysForCommand(p):null;return{tooltip:b,string:e||p,annotation:q?["\t"+q,{fontSize:"70%"}]:
["",{}],action:function(){return u.execCommand(p,w)}}}return $f.invalidItem}},{key:"updateMorphs",value:function(){var b=this;this.submorphs=[];var e=this.padding.left(),l=this.padding.right(),p=this.padding.top(),q=this.padding.bottom(),u=0,w=$f.pt(e,p),y={};this.fontFamily&&(y.fontFamily=this.fontFamily);this.fontSize&&(y.fontSize=this.fontSize);this.itemPadding&&(y.padding=this.itemPadding);this.title&&(p=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:w,fontWeight:"bold"},
y)),w=p.bottomLeft,u=Math.max(p.width,u));this.items.forEach(function(A){var C=A.label,D=A.string,L=A.annotation,I=A.action,S=A.submenu,V=A.tooltip;A=b.addMorph(A.isDivider?new $f.MenuDivider({position:w}):new $f.MenuItem(Object.assign({label:C||D,annotation:L,action:I,submenu:S,tooltip:V,position:w},y)));w=A.bottomLeft;u=Math.max(A.width,u)});this.submorphs.forEach(function(A){A.isLabel&&(A.fit(),A.autofit=!1,A.fixedWidth=!0,A.fixedHeight=!0);A.width=u});this.extent=$f.pt(u+l+e,w.y+q)}},{key:"openSubMenuDelayed",
value:function(b,e,l){var p=this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{p.openSubMenu(b,e,l)}catch(u){var q=p.world();q?q.logError(u):console.error(u)}},200)}},{key:"openSubMenu",value:function(b,e,l){if(e.selected){var p=this.submenu;if(p){if(p.ownerItemMorph===e||this.morphsContainingPoint(b.position).includes(p))return;this.removeSubMenu()}"function"===typeof l&&(l=l());b=this.submenu=this.addMorph(new $f.Menu({items:l,
ownerItemMorph:e,ownerMenu:this}));b.updateMorphs();b.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var b=this;$f.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var e=b.world();if(e){var l=b.submenu,p=b.selectedItemMorph;e=e&&l&&l.fullContainsWorldPoint(e.firstHand.position);l&&l.ownerItemMorph!==p&&!l.ownerItemMorph.selected&&(e?(p&&(p.selected=!1),l.ownerItemMorph.selected=!0):b.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var b=
this.submenu;this.submenu=b.ownerMenu=null;b.remove()}}},{key:"moveBoundsForVisibility",value:function(b,e){var l=0,p=0;b.right()>e.right()&&(l=-1*(b.right()-e.right()));var q=b.left()+l;0>q&&(l+=-q);b.bottom()>e.bottom()&&(p=-1*(b.bottom()-e.bottom()),l+=1);e=b.top()+p;0>e&&(p+=-e);return b.translatedBy($f.pt(l,p))}},{key:"moveSubMenuBoundsForVisibility",value:function(b,e,l,p){p||(p=e.right()+b.width>l.right()?"left":"right");b=b.extent();b="left"===p?e.topLeft().addXY(-b.x,0).extent(b):e.topRight().extent(b);
b.bottom()>l.bottom()&&(e=-1*(b.bottom()-l.bottom()),b=b.translatedBy($f.pt(0,e)));b.top()<l.top()&&(l=l.top()-b.top(),b=b.translatedBy($f.pt(0,l)));return b}},{key:"offsetForOwnerMenu",value:function(){var b=this.ownerMenu,e=this.world().visibleBounds(),l=b.getGlobalTransform().inverse().transformRectToRect(e);b=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),b.selectedItemMorph?b.selectedItemMorph.bounds():b.innerBounds(),l),e);this.setBounds(b)}},{key:"clipForVisibility",
value:function(b,e){b=void 0===b?this.bounds():b;e=void 0===e?this.world().visibleBounds():e;var l=this.transformRectToMorph(this.world(),b.withX(0).withY(0));e.containsRect(l.insetBy(10))||(b=b.withExtent($f.pt(5+b.width,Math.min(l.height,e.height))));return b}},{key:"offsetForWorld",value:function(b){b=this.innerBounds().translatedBy(b);if(this.owner.visibleBounds){var e=this.owner.visibleBounds();b=this.clipForVisibility(this.moveBoundsForVisibility(b,e),e)}this.setBounds(b)}},{key:"onHoverOut",
value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(b,e){e=void 0===e?{title:""}:e;return new this(Object.assign({},e,{items:b}))}},{key:"openAt",value:function(b,e,l){l=void 0===l?{title:""}:l;e=this.forItems(e,l).openInWorldNear(b);e.offsetForWorld(b);return e}},{key:"openAtHand",value:function(b,e){e=void 0===e?{title:""}:e;var l=e.hand;b=this.forItems(b,$f.obj.dissoc(e,["hand"]));l=l?l.position:
$f.pt(0,0);b.titleMorph&&(l=l.addXY(0,-b.titleMorph.height));b.openInWorld(l);b.offsetForWorld(l);return b}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if($f.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:$f.Rectangle.inset(0,2)},itemPadding:{defaultValue:$f.Rectangle.inset(8,
4)},borderWidth:{defaultValue:1},fill:{defaultValue:$f.Color.white},borderColor:{defaultValue:$f.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},title:{get:function(){return this.getProperty("title")},set:function(b){this.addValueChange("title",b)}},finishedPromise:{initialize:function(){this.finishedPromise=$f.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,get:function(){return this.submenu?
[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(b){b=b.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",b)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(b){return b.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(b){return b.isMenuItem})}}}}}],
d,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16006})}($f.Morph));$f.Menu=LJ;$f.Menu=LJ;$f.Menu=LJ;var Joa=Object.freeze({__proto__:null,MenuDivider:JJ,MenuItem:KJ,Menu:LJ}),Ji=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");Ji.arr=Ne;Ji.pt=kh;Ji.Color=qf;
Ji.Morph=Vi;var MJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),k=d.hasOwnProperty("VerticalResizer")&&"function"===typeof d.VerticalResizer?d.VerticalResizer:d.VerticalResizer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onDrag",value:function(b){this.movedHorizontallyBy(b.position.x-b.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(b){if(!(!this.owner||
"number"!==typeof b||0>b||1<b)){var e=this.owner.extent.x-this.extent.x;if(!(0>e)){var l=this.getRelativeDivide();this.movedHorizontallyBy(e*(b-l))}}}},{key:"getRelativeDivide",value:function(b){var e=this.bounds();b=e.left();e=this.owner.extent.x-e.width;return 0>e?NaN:b/e}},{key:"movedHorizontallyBy",value:function(b){this.resizeIsSave(b)&&(this.fixed.concat(this.scalingRight).forEach(function(e){var l=e.position;e.position=Ji.pt(l.x+b,l.y)}),this.scalingLeft.forEach(function(e){var l=e.extent;
e.extent=Ji.pt(l.x+b,l.y)}),this.scalingRight.forEach(function(e){var l=e.extent;e.extent=Ji.pt(l.x-b,l.y)}),this.position=this.position.addPt(Ji.pt(b,0)))}},{key:"resizeIsSave",value:function(b){var e=this;return this.scalingLeft.every(function(l){return l.extent.x+b>=e.minWidth})&&this.scalingRight.every(function(l){return l.extent.x-b>=e.minWidth})}},{key:"addFixed",value:function(b){Ji.arr.pushIfNotIncluded(this.fixed,b)}},{key:"addScalingLeft",value:function(b){Ji.arr.pushIfNotIncluded(this.scalingLeft,
b)}},{key:"addScalingRight",value:function(b){Ji.arr.pushIfNotIncluded(this.scalingRight,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Ji.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2722})}(Ji.Morph);Ji.VerticalResizer=MJ;Ji.VerticalResizer=MJ;Ji.VerticalResizer=MJ;var NJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),k=d.hasOwnProperty("HorizontalResizer")&&"function"===typeof d.HorizontalResizer?d.HorizontalResizer:d.HorizontalResizer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onDrag",value:function(b){this.movedVerticallyBy(b.position.y-b.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(b){if(!(!this.owner||"number"!==typeof b||0>b||1<b)){var e=this.owner.extent.y-this.extent.y;if(!(0>e)){var l=this.getRelativeDivide();this.movedVerticallyBy(e*(b-l))}}}},{key:"getRelativeDivide",value:function(b){var e=this.bounds();b=e.top();e=this.owner.extent.y-e.height;
return 0>e?NaN:b/e}},{key:"movedVerticallyBy",value:function(b){this.resizeIsSave(b)&&(this.fixed.concat(this.scalingBelow).forEach(function(e){var l=e.position;e.position=Ji.pt(l.x,l.y+b)}),this.scalingAbove.forEach(function(e){var l=e.extent;e.extent=Ji.pt(l.x,l.y+b)}),this.scalingBelow.forEach(function(e){var l=e.extent;e.extent=Ji.pt(l.x,l.y-b)}),this.position=this.position.addPt(Ji.pt(0,b)))}},{key:"resizeIsSave",value:function(b){var e=this;return this.scalingAbove.every(function(l){return l.extent.y+
b>=e.minHeight})&&this.scalingBelow.every(function(l){return l.extent.y-b>=e.minHeight})}},{key:"addFixed",value:function(b){Ji.arr.pushIfNotIncluded(this.fixed,b)}},{key:"addScalingAbove",value:function(b){Ji.arr.pushIfNotIncluded(this.scalingAbove,b)}},{key:"addScalingBelow",value:function(b){Ji.arr.pushIfNotIncluded(this.scalingBelow,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:Ji.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2731,end:5358})}(Ji.Morph);Ji.HorizontalResizer=
NJ;Ji.HorizontalResizer=NJ;Ji.HorizontalResizer=NJ;var Koa=Object.freeze({__proto__:null,VerticalResizer:MJ,HorizontalResizer:NJ}),pf=lively.FreezerRuntime.recorderFor("lively.components/tree.js");pf.arr=Ne;pf.fun=Tj;pf.obj=ff;pf.tree=Dq;pf.string=Bg;pf.promise=Uf;pf.pt=kh;pf.Rectangle=Qd;pf.Color=qf;pf.Morph=Vi;pf.Text=Lo;pf.config=rk;pf.touchInputDevice=Ol;pf.Label=Mo;pf.connect=Mj;pf.signal=Ak;pf.bowser=Cn;var OJ=Ia("bD",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
k=d.hasOwnProperty("Tree")&&"function"===typeof d.Tree?d.Tree:d.Tree=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(!b.treeData)throw Error("Cannot create tree without TreeData!");Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.resetCache();this.update()}},{key:"onChange",
value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(b.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(b){var e=
this.textLayout.charBoundsOfRow(this,b);b=pf.Rectangle.fromLiteral(pf.arr.first(e)).topLeft();e=pf.Rectangle.fromLiteral(pf.arr.last(e)).bottomRight();return pf.Rectangle.fromAny(b,e)}},{key:"recoverOriginalLine",value:function(b){for(var e=this.document.getTextAndAttributesOfLine(b),l=0;l<e.length;l++){var p=this._originalColor[l];p&&!pf.obj.isString(e[l])&&(e[l]?e[l].fontColor=p:e[l]={fontColor:p})}this.document.setTextAndAttributesOfLine(b,e)}},{key:"renderSelectedLine",value:function(b){var e=
this.document.getTextAndAttributesOfLine(b);this._originalColor=Array(e.length);for(var l=0;l<e.length;l++)0===l%2?e[l]&&e[l].isMorph&&(this._originalColor[l]=e[l]?e[l].fontColor||this.nonSelectionFontColor:null,e[l].fontColor=this.selectionFontColor,e[l].isSelected=!0):(this._originalColor[l]=(e[l]?e[l].fontColor:null)||this.nonSelectionFontColor,e[l]?e[l].fontColor=this.selectionFontColor:e[l]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(b,e);this.selectLine(b,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(b){if(!b.length)return[];for(var e=pf.arr.genN(8*(b.length-1),function(){return null}),l=1,p,q,u=this.disableIndent?0:1.3*this.fontSize;l<b.length;l++){p=8*(l-1);q=this.selectedIndex==l;b[l].node.isSelected=q;e[p]=" ";e[p+1]={fontSize:u,fontColor:pf.Color.transparent,textStyleClasses:["fas"],paddingRight:u*(b[l].depth-1)+"px"};e[p+3]={fontColor:pf.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(b[l].node)?e[p+2]=this.disableIndent?"":"    ":(e[p+2]=this.treeData.isCollapsed(b[l].node)?" \uf0da ":" \uf0d7 ",Object.assign(e[p+3],{paddingRight:this.treeData.isCollapsed(b[l].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var w=this.treeData.safeDisplay(b[l].node);w.isMorph&&(w._capturedProps&&Object.assign(w,w._capturedProps),q&&(w._capturedProps=pf.obj.select(w,["fontColor"])),
w.fontColor=this.nonSelectionFontColor);e[p+4]=w;pf.arr.isArray(w)?e[p+5]=[]:e[p+5]={fontColor:this.fontColor};e[p+6]="\n";e[p+7]={}}e.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<b.length?pf.arr.flatten(e):[]}},{key:"update",value:function(b){var e=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var l=e.treeData.asListWithIndexAndDepth();e.treeData!==e.lastTreeData||e.lastNumberOfNodes!==
l.length||b?(e.replace({start:{row:0,column:0},end:e.documentEndPosition},e.computeTreeAttributes(l),!1,!1),e.invalidateTextLayout(!0,!1),e.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){e.makeDirty();p.jumpToEnd()})})):e._lastSelectedIndex&&e.recoverOriginalLine(e._lastSelectedIndex-1);e.lastTreeData=e.treeData;e.lastNumberOfNodes=l.length;e.cursorPosition={row:0,column:0};0<e.selectedIndex&&e.renderSelectedLine(e.selectedIndex-1)})}finally{this._updating=
!1}}}},{key:"buildViewState",value:function(b){var e=this;"function"!==typeof b&&(b=function(q){return q});var l=this.selectedNode?b(this.selectedNode):null,p=new Map;pf.tree.prewalk(this.treeData.root,function(q){return p.set(b(q),e.treeData.isCollapsed(q))},function(q){return e.treeData.getChildrenIfUncollapsed(q)});return{selectionId:l,collapsedMap:p,scroll:this.scroll}}},{key:"applyViewState",value:function(b,e){var l=this,p,q,u,w,y,A,C,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:"function"!==
typeof e&&(e=function(I){return I}),p=b,q=p.selectionId,u=p.collapsedMap,w=p.scroll,y=0,A=-1;case 2:C=l.nodes;if(y>=C.length){L.jumpTo(3);break}D=e(C[y]);q===D&&(A=y);if(!u.has(D)||u.get(D)){L.jumpTo(4);break}return L.yield(l.treeData.collapse(C[y],!1),4);case 4:y++;L.jumpTo(2);break;case 3:return l.selectedIndex=A,l.update(),l.scroll=w,l.scrollSelectionIntoView(),L.yield(pf.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(b,e){var l=this,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==
q.nextAddress?(p=l.buildViewState(e),q.yield(b(),2)):q.yield(l.applyViewState(p,e),0)})}},{key:"onNodeCollapseChanged",value:function(b){var e=b.node,l=b.isCollapsed,p=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return p.resetCache(),u.setCatchFinallyBlocks(2),u.yield(p.treeData.collapse(e,l),4);if(2!=u.nextAddress)return pf.signal(p,"nodeCollapseChanged",{node:e,isCollapsed:l}),p.update(),u.leaveTryBlock(0);q=u.enterCatchBlock();p.showError(q);u.jumpToEnd()})}},
{key:"uncollapse",value:function(b){b=void 0===b?this.selectedNode:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?b&&e.treeData.isCollapsed(b)?l.yield(e.onNodeCollapseChanged({node:b,isCollapsed:!1}),2):l.return():l.return(b)})}},{key:"collapse",value:function(b){b=void 0===b?this.selectedNode:b;var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?!b||e.treeData.isCollapsed(b)?l.return():l.yield(e.onNodeCollapseChanged({node:b,
isCollapsed:!0}),2):l.return(b)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){return 1==p.nextAddress?(l=e,p.yield(e.treeData.followPath(b),2)):p.return(l.selectedNode=p.yieldResult)})}},{key:"gotoIndex",value:function(b){this.selectedNode=this.nodes[b];this.scrollIndexIntoView(b)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(b){this.scrollToIndex(b,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(b){this.scrollPositionIntoView({row:b-1,column:0})}},{key:"contextMenuForNode",value:function(b,e){pf.signal(this,"contextMenuRequested",{node:b,evt:e})}},{key:"onKeyDown",value:function(b){var e=this.world().focusedMorph;if(!e.isText||
e.readOnly)return Sb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b)}},{key:"onDragStart",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b);var e=this.textAttributeAtPoint(b.positionIn(this))||{},l=e.onDragStart,p=e.onDrag;e=e.onDragEnd;p&&(this._onDragHandler=p);e&&(this._onDragEndHandler=e);l&&l(b)}},{key:"onDrag",value:function(b){this._onDragHandler?this._onDragHandler(b):Sb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,
b)}},{key:"onDragEnd",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onDragEnd",this).call(this,b);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(b);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(b){var e=this,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return l=e.textPositionFromPoint(b.positionIn(e)),p=l.row,q=l.column,u=e.nodes[p+1],u?!e.treeData.isLeaf(u)&&4>q?A.yield(u.isCollapsed,
3):(e.selectedIndex!=p+1&&(e.selectedIndex=p+1),A.jumpTo(2)):A.return();2!=A.nextAddress&&(A.yieldResult?e.uncollapse(u):e.collapse(u));w=e.textAttributeAt({row:p,column:q})||{};(y=w.onMouseDown)&&y(b);A.jumpToEnd()})}},{key:"onMouseUp",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);var e=(this.textAttributeAtPoint(b.positionIn(this))||{}).onMouseUp;e&&e(b)}},{key:"onHoverIn",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,
b);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);!pf.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(b){if(b.targetMorph===this){b.stop();var e=this.textPositionFromPoint(b.positionIn(this));(e=this.nodes[e.row+1])&&this.contextMenuForNode(e,b)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},
{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return pf.treeCommands}},{key:"highlightChangedNodes",value:function(b){this.treeData.diff(b).forEach(function(e){e=$jscomp.makeIterator(e);var l=e.next().value;e.next();return l.renderedNode&&l.renderedNode.highlight()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:pf.Color.rgb(21,101,192)},fontFamily:{defaultValue:pf.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},
lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:pf.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(b){this.setProperty("resizeNodes",b);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(b){this.setProperty("treeData",b);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?
this.nodes.indexOf(this.selectedNode):-1},set:function(b){this.selectedNode=this.nodes[b]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},Sb._get(Object.getPrototypeOf(k),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(b){this.setProperty("selectedNode",b);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?
this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:pf.Color.white,set:function(b){this.setProperty("selectionFontColor",b)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:pf.Color.rgbHex("333"),set:function(b){this.setProperty("nonSelectionFontColor",b)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],
d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1472,end:17578})}(pf.Text));pf.Tree=OJ;pf.Tree=OJ;pf.Tree=OJ;var PJ=Ia("bB",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),k=d.hasOwnProperty("TreeData")&&"function"===typeof d.TreeData?d.TreeData:d.TreeData=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.root=b;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(b){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(b){throw Error("Not yet implemented");
}},{key:"collapse",value:function(b,e){throw Error("Not yet implemented");}},{key:"getChildren",value:function(b){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(b){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(b){return this.isCollapsed(b)?[]:this.getChildren(b)}},{key:"safeDisplay",value:function(b){try{return this.display(b)}catch(e){return"[TreeData] Error when trying to display node: "+e}}},{key:"nodeToString",value:function(b){b=this.safeDisplay(b);
return"string"===typeof b?b:b&&Array.isArray(b)?b.map(function(e,l){return 0===l%2?e:""}).join(""):String(b)}},{key:"parentNode",value:function(b){var e=this;return this.parentMap.get(b)||pf.tree.detect(this.root,function(l){return!e.isLeaf(l)&&e.getChildrenIfUncollapsed(l).includes(b)},function(l){return e.getChildrenIfUncollapsed(l)})}},{key:"nodeWithSiblings",value:function(b){return(b=this.parentNode(b))?this.getChildrenIfUncollapsed(b):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(b){return b.node})}},
{key:"asListWithIndexAndDepth",value:function(b){var e=this;b=void 0===b?!1:b;var l=[];pf.tree.prewalk(this.root,function(p,q,u){return l.push({node:p,depth:u,i:q})},function(p){return e.getChildrenIfUncollapsed(p)});return b?pf.arr.filter(l,b):l}},{key:"pathOf",value:function(b){for(var e=[];b;)e.unshift(b),b=this.parentNode(b);return e}},{key:"followPath",value:function(b,e,l){l=void 0===l?this.root:l;var p=this,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:e||
(e=function(C,D){return C===D});q=b.findIndex(function(C){return e(C,l)});b=b.slice(q+1);if(!b.length)return A.return(null);u=l;case 2:if(!b.length){A.jumpTo(3);break}if(!p.isCollapsed(u)){A.jumpTo(4);break}return A.yield(p.collapse(u,!1),4);case 4:w=b.shift();y=p.getChildrenIfUncollapsed(u).find(function(C){return e(w,C)});if(!y)throw Error("Cannot descend into tree, next node of "+b.join(".")+" not found at "+p.safeDisplay(u));u=y;A.jumpTo(2);break;case 3:return A.return(u)}})}},{key:"diff",value:function(b){var e=
[],l=this.asListWithIndexAndDepth();b=b.asListWithIndexAndDepth();if(l.length!=b.length)return[];l=$jscomp.makeIterator(pf.arr.zip(l,b));for(b=l.next();!b.done;b=l.next()){var p=$jscomp.makeIterator(b.value);b=p.next().value;p=p.next().value;pf.obj.equals(b.node.value,p&&p.node.value)||e.push([b.node,p.node])}return e}},{key:"patch",value:function(b){var e=this.diff(b);if(0<e.length){b=$jscomp.makeIterator(e);for(e=b.next();!e.done;e=b.next()){var l=$jscomp.makeIterator(e.value);e=l.next().value;
l=l.next().value;e.value=l.value}return this}return b}},{key:"uncollapseAll",value:function(b,e,l){e=void 0===e?0:e;var p=this,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:if(l){w.jumpTo(2);break}return w.yield(p.uncollapseAll(b,e,p.root),3);case 3:return w.return(w.yieldResult);case 2:if(!b(l,e)){w.jumpTo(0);break}if(!l.isCollapsed){w.jumpTo(5);break}return w.yield(p.collapse(l,!1),6);case 6:case 5:u=w.forIn(l.children);case 7:if(null==(q=u.getNext()))w.jumpTo(0);
else return w.yield(p.uncollapseAll(b,e+1,l.children[q]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],d,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17587,end:22608})}(void 0));pf.TreeData=PJ;pf.TreeData=PJ;pf.TreeData=PJ;pf.treeCommands=[{name:"select via filter",
exec:function(a){var d,k,b,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return d=a.treeData,d.asListWithIndexAndDepth(),d.asListWithIndexAndDepth().map(function(u){return Object.assign(u,{string:d.nodeToString(u.node)})}),k=pf.string.lines(pf.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d))),b=d.asList().map(function(u,w){return{isListItem:!0,string:k[w],value:u}}),q.yield(a.world().filterableListPrompt("Select item",b),
2);e=q.yieldResult;l=$jscomp.makeIterator(e.selected);if(p=l.next().value)a.selectedNode=p,a.scrollSelectionIntoView();return q.return(!0)})}},{name:"page up",exec:function(a){a.scrollPageUp(1);var d=a.scroll,k=a.padding.top(),b=d.y;d=a.lineHeightCache.findIndex(function(e){return b<=(k+=e)});d--;a.gotoIndex(Math.max(1,d));return!0}},{name:"page down",exec:function(a){a.scrollPageDown(1);var d=a.scroll,k=a.padding.top(),b=d.y+a.height;d=a.lineHeightCache.findIndex(function(e){return b<=(k+=e)});d--;
a.gotoIndex(Math.min(d,a.nodes.length-1));return!0}},{name:"goto first item",exec:function(a){a.gotoIndex(1);return!0}},{name:"goto last item",exec:function(a){a.gotoIndex(a.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(a){var d=a.selectedNodeAndSiblings;if(d=d[d.indexOf(a.selectedNode)+1])a.selectedNode=d,a.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(a){var d=a.selectedNodeAndSiblings;if(d=d[d.indexOf(a.selectedNode)-1])a.selectedNode=d,a.scrollSelectionIntoView();
return!0}},{name:"goto parent",exec:function(a){a.selectedNode&&(a.selectedNode=a.treeData.parentNode(a.selectedNode),a.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(a){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(d=a.selectedNode,d?a.treeData.isCollapsed(d)?(a.selectedNode=a.treeData.parentNode(d),a.scrollSelectionIntoView(),k.jumpTo(2)):k.yield(a.onNodeCollapseChanged({node:a.selectedNode,isCollapsed:!0}),2):k.return(!0)):
k.return(!0)})}},{name:"uncollapse selected node",exec:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?a.selectedNode?d.yield(a.onNodeCollapseChanged({node:a.selectedNode,isCollapsed:!1}),2):d.jumpTo(2):d.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(a,d){function k(A){return pf.arr.filter(l.getChildrenIfUncollapsed(A),function(C){return!l.isLeaf(C)})}function b(A,C){return Promise.all(A.map(function(D){return a.onNodeCollapseChanged({node:D,
isCollapsed:C})}))}d=void 0===d?{what:"collapse"}:d;var e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){e="collapse"===d.what;l=a.treeData;if(e){if(l.isCollapsed(a.selectedNode))return A.return(!0);q=l.parentNode(a.selectedNode);u=-1;pf.tree.prewalk(q,function(C,D,L){L<u||(L>u&&(u=L,p=[]),L===u&&pf.arr.pushIfNotIncluded(p,l.parentNode(C)))},l.getChildrenIfUncollapsed.bind(l))}else for(w=pf.arr.compact([l.parentNode(a.selectedNode)]);w.length;){p=pf.arr.flatmap(w,
function(C){return k(C)});y=p.every(function(C){return l.isCollapsed(C)===e});if(!y)break;w=p}return A.yield(b(p,e),2)}a.scrollSelectionIntoView();return A.return(!0)})}},{name:"select node above",exec:function(a){var d=a.nodes,k=a.selectedIndex;1>=k&&(k=d.length);a.selectedNode=d[k-1];a.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(a){var d=a.nodes,k=a.selectedIndex;if(-1>=k||k>=d.length-1)k=0;a.selectedNode=d[k+1];a.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",
exec:function(a){if(a.selectedNode){var d=a.scroll,k=d.x;d=d.y;var b=a.lineBounds(a.selectedIndex),e=b.topLeft();b=a.height-b.height;d=2>Math.abs(e.y-d)?e.y-b:2>Math.abs(e.y-d-.5*b)?e.y:e.y-.5*b;a.scroll=pf.pt(k,d);return!0}}},{name:"print contents in text window",exec:function(a){var d=a.treeData;d=pf.string.printTree(d.root,d.nodeToString.bind(d),d.getChildrenIfUncollapsed.bind(d));var k=a.getWindow()?"printed "+a.getWindow().title:a.name;return a.world().execCommand("open text window",{title:k,
content:d,name:k,fontFamily:pf.config.codeEditor.defaultStyle.fontFamily})}}];var Loa=Object.freeze({__proto__:null,Tree:OJ,TreeData:PJ}),Gs=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");Gs.promise=Uf;Gs.HTMLMorph=Es;var QJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),k=d.hasOwnProperty("IFrameMorph")&&"function"===typeof d.IFrameMorph?d.IFrameMorph:d.IFrameMorph=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b.src||b.srcdoc||(b.srcdoc="<p>Empty iframe</p>");Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b)}},{key:"changeSrc",value:function(b,e){var l=this,p=this.iframe,q=this._loadPromise;q&&!q.loaded&&q.reject();this._loadPromise=Gs.promise.deferred();this._loadPromise.loaded=!1;p.onload=function(u){l._loadPromise.loaded=!0;l._loadPromise.resolve(u)};e=b||e;
q=b?"src":"srcdoc";b=b?"srcdoc":"src";this.addValueChange(b,null);this.addValueChange(q,e);p.removeAttribute(b);p.setAttribute(q,e);this._loadPromise[q]=e}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(b){return this.innerWindow.eval("("+b+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(b){var e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==
w.nextAddress)return w.yield(b.whenRendered(),2);if(3!=w.nextAddress)return e=b.env.renderer.getNodeForMorph(b),l=Gs.IFrameMorph.open({srcdoc:e.outerHTML}),w.yield(l.whenLoaded(),3);p=l.innerWindow.document;p.body.style.whiteSpace="normal";p.body.style.margin="0.5cm";p.querySelector(".Text").style.width="100%";p.querySelector(".Text").style.overflow="visible";p.querySelectorAll(".marker-layer-part").forEach(function(y){return y.parentNode.removeChild(y)});q=p.querySelector(".text-layer");q.style.whiteSpace=
"pre-wrap";u=Array.from(q.querySelectorAll("div"));u.forEach(function(y){y.childNodes[0]&&(Array.from(y.childNodes).forEach(function(A){return q.insertBefore(A,y)}),q.insertBefore(p.createElement("br"),y),q.removeChild(y))});l.innerWindow.print();l.getWindow().remove();w.jumpToEnd()})}},{key:"open",value:function(b){b=void 0===b?{}:b;return(new this(b)).openInWindow({title:b.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},
innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(b){this.changeSrc(b,null)}},srcdoc:{after:["domNode"],set:function(b){this.changeSrc(null,b)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",
!0));return this._domNode},set:function(b){return this._domNode=b}}}}}],d,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:621,end:6201})}(Gs.HTMLMorph);Gs.IFrameMorph=QJ;Gs.IFrameMorph=QJ;Gs.IFrameMorph=QJ;var Moa=Object.freeze({__proto__:null,IFrameMorph:QJ}),ze=lively.FreezerRuntime.recorderFor("lively.components/window.js");
ze.arr=Ne;ze.promise=Uf;ze.pt=kh;ze.LinearGradient=qk;ze.Color=qf;ze.Rectangle=Qd;ze.Label=Mo;ze.morph=Zi;ze.Morph=Vi;ze.HorizontalLayout=xo;ze.StyleSheet=Qp;ze.connect=Mj;ze.signal=Ak;ze.easings=Fn;var ZR=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/window.js"),k=d.hasOwnProperty("Window")&&"function"===typeof d.Window?d.Window:d.Window=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,
a,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var b=this,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){return 1==A.nextAddress?(e=b.world()||b.env.world,l=b.targetMorph.world(),p=l.openMenu,q=[["Change Window Title",function(){var C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return D.yield(e.prompt("Enter New Name",{input:b.title}),2);if(C=D.yieldResult)b.title=
C;D.jumpToEnd()})}],["Align and resize",[{alias:"full",target:e,command:"resize active window",args:{window:b,how:"full"}},{alias:"left",target:e,command:"resize active window",args:{window:b,how:"left"}},{alias:"center",target:e,command:"resize active window",args:{window:b,how:"center"}},{alias:"right",target:e,command:"resize active window",args:{window:b,how:"right"}},{alias:"top",target:e,command:"resize active window",args:{window:b,how:"top"}},{alias:"bottom",target:e,command:"resize active window",
args:{window:b,how:"bottom"}},{alias:"reset",target:e,command:"resize active window",args:{window:b,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:e,command:"toggle minimize all except active window"},{alias:"close all except this",target:e,command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:e,command:"toggle minimize all windows"},{alias:"close all",target:e,command:"close all windows"}]],{isDivider:!0}],u=q.concat,w=$jscomp,y=w.arrayFromIterable,
A.yield(b.targetMorph.menuItems(),2)):A.return(p.call(l,u.call(q,y.call(w,A.yieldResult))))})}},{key:"toggleFader",value:function(b){var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:l=e.getSubmorphNamed("fader")||e.addMorph({name:"fader",fill:ze.Color.black.withA(.5),opacity:0,extent:e.extent});if(b){p=e.world().visibleBoundsExcludingTopBar().translateForInclusion(e.bounds());e._originalBounds=e.bounds();e.animate({bounds:p,duration:300});
e.borderColor=ze.Color.gray.darker();e._faderTriggered=!0;l.opacity=1;q.jumpTo(0);break}e._originalBounds&&(e.animate({bounds:e._originalBounds,duration:300}),e._originalBounds=null);e._faderTriggered=!1;return q.yield(e.whenRendered(),3);case 3:return q.yield(ze.promise.delay(100),4);case 4:return e.borderColor=ze.Color.gray,e._faderTriggered?q.return():q.yield(l.animate({opacity:0,duration:300}),5);case 5:l.remove(),q.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",
value:function(){return new ze.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){try{var b=this.innerBounds(),e=this.ui.windowTitle,l=this.ui.resizer,p=b.withHeight(25),q=this.ui.header,u=this.ui.windowControls.bounds().right()+3,w=p.withLeftCenter(ze.pt(u,p.height/2));l.bottomRight=b.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());e.textBounds().width<p.width-2*u?e.center=
p.center():e.leftCenter=w.leftCenter();q.width=this.width}catch(y){}}},{key:"ensureNotOverTheTop",value:function(){var b=this,e=this.world();if(e){var l=this.globalBounds();e.withTopBarDo(function(p){l.top()<p.height&&b.moveBy(ze.pt(0,p.height-l.top()))})}}},{key:"buildHeader",value:function(){return ze.morph({name:"header",extent:ze.pt(this.width,50),submorphs:[ze.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",
value:function(){var b=this.getSubmorphNamed("close")||ze.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[ze.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});ze.connect(b,"onMouseDown",this,"close");var e=this.getSubmorphNamed("minimize")||ze.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[ze.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});ze.connect(e,"onMouseDown",this,"minimized",{updater:function(p){p(!this.targetObj.minimized)}});if(this.resizable){var l=this.getSubmorphNamed("menu")||ze.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[ze.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});ze.connect(l,"onMouseDown",this,"openWindowMenu")}return ze.arr.compact([b,e,l])}},{key:"buildTitleLabel",value:function(){var b=ze.morph({padding:ze.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});ze.connect(this,"onDoubleMouseDown",this,"toggleMaximize",{updater:"($upd, evt) => {\n        if (source.fullContainsWorldPoint(evt.position)) {\n          $upd();\n        }\n      }"});return this.addMorph(b)}},{key:"resizeBy",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"resizeBy",this).call(this,b);this.relayoutWindowControls()}},{key:"resizeAt",
value:function(b){b=$jscomp.makeIterator(b);var e=b.next().value;b=b.next().value;var l=this.bounds();switch(e){case "right":this.resizeBy(b.withY(0));break;case "bottom right":this.resizeBy(b);break;case "bottom":this.resizeBy(b.withX(0));break;case "left":e=this.right;this.resizeBy(b.withY(0).negated());this.right=e;break;case "bottom left":e=this.right;this.resizeBy(b.scaleByPt(ze.pt(-1,1)));this.right=e;break;case "top":e=l.x;var p=l.y+b.y;var q=l.width;b=l.height-b.y;this.setBounds(new ze.Rectangle(e,
p,q,b));break;case "top left":e=l.x+b.x;p=l.y+b.y;q=l.width-b.x;b=l.height-b.y;this.setBounds(new ze.Rectangle(e,p,q,b));break;case "top right":e=l.x,p=l.y+b.y,q=l.width+b.x,b=l.height-b.y,this.setBounds(new ze.Rectangle(e,p,q,b))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var b=this.getSubmorphNamed("resizer"),e=$jscomp.makeIterator(b.submorphs),l=e.next().value,p=e.next().value,q=e.next().value,u=e.next().value,w=e.next().value,y=e.next().value,A=e.next().value;e=e.next().value;
l.height=this.height-10;l.bottomRight=this.extent.subXY(0,10);p.bottomRight=this.extent;q.height=this.height-10;q.bottomLeft=ze.pt(0,this.height-10);u.bottomLeft=ze.pt(0,this.height);w.width=this.width-20;w.bottomLeft=ze.pt(10,this.height);y.width=this.width-20;y.bottomLeft=ze.pt(10,2.5);A.topLeft=ze.pt(0,0);e.topRight=ze.pt(this.width,0);b.position=ze.pt(0,0)}},{key:"buildResizer",value:function(){var b,e,l,p,q,u,w;var y=ze.Color.transparent;var A=ze.morph({name:"resizer",fill:ze.Color.transparent,
position:ze.pt(0,0),submorphs:[b=ze.morph({name:"right resizer",fill:y,width:10,draggable:!0,nativeCursor:"ew-resize"}),e=ze.morph({name:"bottom right resizer",fill:y,extent:ze.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),l=ze.morph({name:"left resizer",fill:y,width:10,draggable:!0,nativeCursor:"ew-resize"}),p=ze.morph({name:"bottom left resizer",draggable:!0,fill:y,extent:ze.pt(10,10),nativeCursor:"nesw-resize"}),q=ze.morph({name:"bottom resizer",draggable:!0,fill:y,height:10,nativeCursor:"ns-resize"}),
u=ze.morph({name:"top resizer",draggable:!0,fill:y,height:2.5,nativeCursor:"ns-resize"}),w=ze.morph({name:"top left resizer",draggable:!0,fill:y,extent:ze.pt(10,10),nativeCursor:"nwse-resize"}),y=ze.morph({name:"top rigth resizer",draggable:!0,fill:y,extent:ze.pt(10,10),nativeCursor:"nesw-resize"})]});ze.connect(u,"onDrag",this,"resizeAt",{converter:function(C){return["top",C.state.dragDelta]}});ze.connect(y,"onDrag",this,"resizeAt",{converter:function(C){return["top right",C.state.dragDelta]}});
ze.connect(w,"onDrag",this,"resizeAt",{converter:function(C){return["top left",C.state.dragDelta]}});ze.connect(e,"onDrag",this,"resizeAt",{converter:function(C){return["bottom right",C.state.dragDelta]}});ze.connect(b,"onDrag",this,"resizeAt",{converter:function(C){return["right",C.state.dragDelta]}});ze.connect(q,"onDrag",this,"resizeAt",{converter:function(C){return["bottom",C.state.dragDelta]}});ze.connect(l,"onDrag",this,"resizeAt",{converter:function(C){return["left",C.state.dragDelta]}});ze.connect(p,
"onDrag",this,"resizeAt",{converter:function(C){return["bottom left",C.state.dragDelta]}});this.addMorph(A);this.relayoutResizer();return A}},{key:"toggleMaximize",value:function(){this.minized||(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b.minimized=
!b.minimized;e.jumpToEnd()})}},{key:"applyMinimize",value:function(){var b=this,e,l,p,q,u,w,y,A,C,D,L,I,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){if(1==V.nextAddress){if(!b.targetMorph)return V.return();e=b;l=e.nonMinizedBounds;p=e.minimized;q=e.width;u=b.ui;w=u.windowTitle;y=u.resizer;A=b.bounds();C=b.getSubmorphNamed("minimize");D=ze.easings.outQuad;if(!p)return b.minimizedBounds=A,b.withMetaDo({metaInteraction:!0},function(){b.targetMorph&&(b.targetMorph.visible=!0)}),l=
b.world().visibleBoundsExcludingTopBar().translateForInclusion(l||A),b.animate({bounds:l,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(ze.arr.without(b.styleClasses,"minimzed"))),duration:100,easing:D}),C.tooltip="collapse window",V.jumpTo(2);b.nonMinizedBounds=A;L=(b.minimizedBounds||A).withExtent(ze.pt(q,28));I=w.textBounds();S=b.get("window controls").bounds().right()+3;I.width+2*S<L.width&&(L=L.withWidth(I.width+S+5));b.minimizedBounds=L;C.tooltip="uncollapse window";return V.yield(b.animate({styleClasses:["minimized",
"active"].concat($jscomp.arrayFromIterable(ze.arr.without(b.styleClasses,"neutral"))),bounds:L,duration:100,easing:D}),3)}2!=V.nextAddress&&b.targetMorph&&(b.targetMorph.isComponent?b.targetMorph.top=b.height:b.targetMorph.visible=!1);w.reactsToPointer=!b.minimized;y.visible=!b.minimized;b.relayoutWindowControls();V.jumpToEnd()})}},{key:"setBounds",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"setBounds",this).call(this,b);this.relayoutResizer();this.relayoutWindowControls()}},{key:"setBounds",
value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"setBounds",this).call(this,b);this.relayoutResizer();this.relayoutWindowControls()}},{key:"close",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return b.targetMorph&&"function"===typeof b.targetMorph.onWindowClose?q.yield(b.targetMorph.onWindowClose(),3):q.jumpTo(2);2!=q.nextAddress&&(e=q.yieldResult);if(!1===e)return q.return();l=b.world();b.deactivate();b.remove();
(p=l.activeWindow()||ze.arr.last(l.getWindows()))&&p.activate();ze.signal(b,"windowClosed",b);q.jumpToEnd()})}},{key:"onMouseUp",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onMouseUp",this).call(this,b);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onMouseDown",this).call(this,b);this.activate(b);this.minimized||this.ui.resizer.submorphs.includes(b.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",
value:function(b){var e=this;Sb._get(Object.getPrototypeOf(k.prototype),"onDragStart",this).call(this,b);this.targetMorph&&(b.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.withMetaDo({metaInteraction:!0},function(){e.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(b){var e=this;Sb._get(Object.getPrototypeOf(k.prototype),"onDragEnd",this).call(this,b);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){e.targetMorph.reactsToPointer=b.state.origReactsToPointer});
this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onDrag",this).call(this,b);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var b=this.world(),e=this.targetMorph;b&&e&&(!b.focusedMorph||b.focusedMorph!==e&&!e.isAncestorOf(b.focusedMorph))&&e.focus()}},{key:"isActive",value:function(){var b=this.world();return b&&"bold"==this.ui.windowTitle.fontWeight?ze.arr.last(b.getWindows())===this:!1}},{key:"activate",value:function(b){var e=
this;if(this.isActive())return this.bringToFront(),this.focus(b),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){e.master={auto:"styleguide://System/window/light/active"}});this.world()?this.bringToFront():this.openInWorldNearHand();var l=this.world()||this.env.world;ze.arr.without(l.getWindows(),this).forEach(function(p){return p.deactivate()});this.focus(b);ze.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return e.relayoutWindowControls()});
return this}},{key:"deactivate",value:function(){var b=this;this.master&&"styleguide://System/window/light/inactive"==this.master.auto||(this.master.whenApplied().then(function(){b.master={auto:"styleguide://System/window/light/inactive"}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},
{key:"commands",get:function(){return Sb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"[window] change title",exec:function(b,e){e=void 0===e?{}:e;var l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return(l=e.title)?q.jumpTo(2):q.yield(b.world().prompt("Enter new title",{input:b.title,historyId:"lively.morphic-window-title-hist"}),3);2!=q.nextAddress&&(l=q.yieldResult);if(p=l)b.title=p;return q.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],
derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(b){var e=this,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress){l="string"===typeof b?[b,{}]:b;p=[];for(q=0;q<l.length;q+=2)u=l[q],w=l[q+1],u=u.replace(/\n/g,""),y=u.length+0-100,0<y&&(u=u.slice(0,-y)),p.push(u,w||{});e.ui.windowTitle.value=p;return A.yield(e.whenRendered(),2)}e.ui.windowTitle.reactsToPointer=!1;e.relayoutWindowControls();A.jumpToEnd()})}},targetMorph:{after:["submorphs"],
derived:!0,get:function(){return ze.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(b){var e=[this.get("header"),this.get("resizer")];ze.arr.withoutAll(this.submorphs,e).forEach(function(l){return l.remove()});b&&this.addMorph(b,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(b){this.setProperty("minimized",b);this.applyMinimize()}},maximized:{set:function(b){this.setProperty("maximized",
b);this.applyMaximize()}}}}}],d,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:343,end:21023})}(ze.Morph);ZR=ze.Window;var $R=Ia("aq",ZR);ze.default=ZR;var Yd=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");Yd.Rectangle=Qd;Yd.rect=zk;Yd.Color=qf;Yd.pt=kh;Yd.morph=Zi;
Yd.VerticalLayout=is;Yd.Morph=Vi;Yd.StyleSheet=Qp;Yd.Text=Lo;Yd.GridLayout=js;Yd.Icon=Ql;Yd.HorizontalLayout=xo;Yd.InputLine=SB;Yd.PasswordInputLine=Fs;Yd.arr=Ne;Yd.obj=ff;Yd.promise=Uf;Yd.connect=Mj;Yd.List=iy;Yd.FilterableList=VB;Yd.RadioButtonGroup=UB;Yd.RadioButton=TB;var RJ=function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("AbstractPrompt")&&"function"===typeof d.AbstractPrompt?d.AbstractPrompt:d.AbstractPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;Sb._get(Object.getPrototypeOf(k.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Yd.obj.dissoc(b,["label","commands","keybindings"]));this.build(b);b.commands&&this.addCommands(b.commands);b.keybindings&&this.addKeyBindings(b.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(b){return this.answer.resolve(b)}},
{key:"reject",value:function(b){return this.answer.resolve(b)}},{key:"activate",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b.focus();b.answer=Yd.promise.deferred();b._isActive=!0;Yd.promise.finally(b.answer.promise,function(){return b._isActive=!1});b.autoRemove&&Yd.promise.finally(b.answer.promise,function(){return b.fadeOut(200)});return e.return(b.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",
value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var b=this;return Sb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"resolve",exec:function(e,l){b.resolve(l);
return!0}},{name:"reject",exec:function(e,l){b.reject(l);return!0}}])}},{key:"transitionTo",value:function(b,e){e=void 0===e?300:e;var l=this,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){p=Yd.morph({fill:l.fill,borderRadius:l.borderRadius});q=Yd.morph({fill:null,origin:Yd.pt(5,5)});b.opacity=0;b.fill=Yd.Color.transparent;b.openInWorld();l.fill=Yd.Color.transparent;$world.addMorph(p,l);p.setBounds(l.bounds());q.openInWorld();q.addMorph(b);b.center=q.origin;q.center=p.center=l.center;
q.scale=b.width/l.width;p.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return l.animate({scale:l.width/b.width,opacity:0,duration:e}),b.animate({opacity:1,duration:e}),q.animate({scale:1,duration:e}),w.yield(p.animate({bounds:q.bounds(),duration:e}),2);b.fill=p.fill;$world.addMorph(b);p.remove();l.remove();q.remove();w.jumpToEnd()})});u.jumpToEnd()})}},{key:"addNamed",value:function(b,e){var l=this.getSubmorphNamed(b)||this.addMorph(e.isMorph?
e:Yd.morph(Object.assign({},e,{name:b})));e.label&&(l.label=e.label);e.isMorph&&(l.name=b);return l}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",get:function(){return{fill:{defaultValue:Yd.Color.black.withA(.6)},extent:{defaultValue:Yd.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},
answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(b){this.getSubmorphNamed("promptTitle").value=b}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:446,end:3935})}(Yd.Morph);
Yd.AbstractPrompt=RJ;Yd.AbstractPrompt=RJ;Yd.AbstractPrompt=RJ;var SJ=Ia("ai",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("InformPrompt")&&"function"===typeof d.InformPrompt?d.InformPrompt:d.InformPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"build",value:function(b){var e=this,l=b=void 0===b?{}:b,p=l.label,q=this.addNamed("promptTitle",
{type:"text",lineWrapping:l.lineWrapping});l=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[l]});q.textString=p;Yd.connect(l,"fire",this,"resolve");b.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(q.document){var u=e.center;e.width=Math.max(e.width,q.document.width+100);e.align(e.center,u)}e.opacity=1}))}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:"Escape",
command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"example",value:function(){$world.inform("Computer says no.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3944,end:5259})}(Yd.AbstractPrompt));Yd.InformPrompt=SJ;Yd.InformPrompt=SJ;Yd.InformPrompt=SJ;var TJ=Ia("aj",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("ConfirmPrompt")&&"function"===typeof d.ConfirmPrompt?d.ConfirmPrompt:d.ConfirmPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(k,a,[{key:"build",value:function(b){var e=this,l=this.addNamed("promptTitle",{type:"text"});l.value=b.label;b=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var p=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[b,p]});Yd.connect(b,"fire",this,"resolve");Yd.connect(p,"fire",this,"reject");l.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){l.lineWrapping=
e.lineWrapping;var q=e.center;e.width=Math.max(e.width,l.document.width+100);e.center=q;e.opacity=1}))}},{key:"resolve",value:function(){Sb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){Sb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"example",value:function(){$world.confirm("Isn't this a nice prompt.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5306,end:6757})}(Yd.AbstractPrompt));Yd.ConfirmPrompt=TJ;Yd.ConfirmPrompt=
TJ;Yd.ConfirmPrompt=TJ;var UJ=Ia("ak",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof d.MultipleChoicePrompt?d.MultipleChoicePrompt:d.MultipleChoicePrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"resolve",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,b||
this.getSubmorphNamed("choices").value)}},{key:"build",value:function(b){var e=b=void 0===b?{choices:["No choice"]}:b;b=e.label;var l=e.choices;e=this.addNamed("ok button",{type:"button"});var p=this.addNamed("cancel button",{type:"button"});b&&(this.addNamed("promptTitle",{type:"text"}).value=b);var q=this.addNamed("choices",{name:"choices",type:Yd.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[e,p]});e&&Yd.connect(e,"fire",this,"resolve");p&&Yd.connect(p,"fire",this,"reject");this.whenRendered().then(function(){q.choices=
l})}},{key:"onKeyDown",value:function(b){if(/^[0-9]$/.test(b.keyCombo)){var e=this.getSubmorphNamed("button "+(Number(b.keyCombo)-1));if(e)return e.trigger(),b.stop()}return Sb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultipleChoicePrompt"}},{key:"example",value:function(){$world.multipleChoicePrompt("Choose wisely:",{choices:[1,2,3]})}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],
set:function(b){this.getSubmorphNamed("title").value=b}},choices:{after:["submorphs"],derived:!0,set:function(b){var e;if(e=this.getSubmorphNamed("choices"))e.choices=b}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:6846,end:8787})}(Yd.AbstractPrompt));Yd.MultipleChoicePrompt=UJ;Yd.MultipleChoicePrompt=UJ;Yd.MultipleChoicePrompt=UJ;var VJ=Ia("al",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("TextPrompt")&&"function"===typeof d.TextPrompt?d.TextPrompt:d.TextPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-
20}},{key:"resolve",value:function(){var b=this.getSubmorphNamed("input");this.validate(b.input)?Sb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,b.acceptInput()):b.indicateError(this.errorMessage)}},{key:"build",value:function(b){var e=this,l=b.label,p=b.input,q=b.historyId;b=b.useLastInput;var u=this.addNamed("promptTitle",{type:"text"});u.value=l;l=this.addNamed("input",Yd.Text.makeInputLine({historyId:q,highlightWhenFocused:!1}));l.viewState.fastScroll=!1;l.textString=p||"";
q&&b&&(p=Yd.arr.last(l.inputHistory.items))&&(l.textString=p);this.lineWrapping||(this.width=Math.max(this.width,u.textBounds().width+50));p=this.addNamed("ok button",{type:"button",label:this.confirmLabel});q=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[p,q]});Yd.connect(p,"fire",this,"resolve");Yd.connect(q,"fire",this,"reject");u.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var w=
e.center;e.width=Math.max(350,u.document.width+100);e.opacity=1;e.center=w}));l.gotoDocumentEnd();l.scrollCursorIntoView()}},{key:"initLayout",value:function(){var b=this;if(!this.layout){var e=this.getSubmorphNamed("promptTitle"),l=this.getSubmorphNamed("input");e.fit();this.whenRendered().then(function(){var p=Math.max(l.textBounds().width,e.textBounds().width)+20;b.width=Math.min(b.maxWidth,p);b.opacity=1});this.layout=new Yd.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,
fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:e.textBounds().height+5,paddingBottom:5},1,{fixed:l.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle","promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",
value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield($world.prompt("enter",{input:"a little longer text"}),2):b.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},master:{initialize:function(){this.master=
{auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8796,end:12333})}(Yd.AbstractPrompt));Yd.TextPrompt=VJ;Yd.TextPrompt=VJ;Yd.TextPrompt=VJ;var WJ=Ia("am",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
k=d.hasOwnProperty("EditPrompt")&&"function"===typeof d.EditPrompt?d.EditPrompt:d.EditPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(b){var e=b.input,l=b.mode,p=b.textStyle,q=b.evalEnvironment,u=void 0===b.resolveTextAttributes?!1:b.resolveTextAttributes;this.addNamed("promptTitle",{type:"text",
value:b.label});this.resolveTextAttributes=u;p||(p={});l&&!p.fontFamily&&(p.fontFamily="Monaco, monospace");var w=this.addNamed("editor",{type:"text"});w.value=e||"";Object.assign(w,p);w.changeEditorMode(l).then(function(){q&&w.editorPlugin&&Object.assign(w.editorPlugin.evalEnvironment,q)});b=w.textBounds().width+50;b>this.width-25&&(this.width=Math.min(this.maxWidth,b+125));b=this.addNamed("ok button",{type:"button"});e=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",
{submorphs:[b,e]});Yd.connect(b,"fire",this,"resolve");Yd.connect(e,"fire",this,"reject");w.gotoDocumentEnd();w.scrollCursorIntoView()}},{key:"resolve",value:function(b){if(this.resolveTextAttributes)return Sb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,this.getSubmorphNamed("editor").textAndAttributes);var e=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){b=Yd.InputLine.getHistory(this.historyId);b.items=b.items.filter(function(l){return l!==e});for(b.items.push(e);b.items.length>
b.items.max;)b.items.shift();b.index=b.items.length;Yd.InputLine.setHistory(this.historyId,b)}return Sb._get(Object.getPrototypeOf(k.prototype),"resolve",this).call(this,e)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var b=this;
return Sb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"history back",exec:function(e,l){if(b.historyId){e=Yd.InputLine.getHistory(b.historyId);l=e.items;var p=e.index;e.index=--p;0>p&&(e.index=p=l.length-1);b.get("editor").undoManager.group();b.get("editor").textString=l[p];b.get("editor").undoManager.group()}return!0}},{name:"browse history",exec:function(e,l){var p,q,u,w,y,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress){if(!b.historyId)return C.jumpTo(2);
p=Yd.InputLine.getHistory(b.historyId);return C.yield(b.world().editListPrompt("input history "+b.historyId,p.items,{requester:b}),3)}2!=C.nextAddress&&(q=C.yieldResult,u=q.status,w=q.list,y=$jscomp.makeIterator(q.selections),A=y.next().value,"canceled"!==u&&(p.items=w,Yd.InputLine.setHistory(b.historyId,p),A&&(p.index=p.items.indexOf(A),b.get("editor").textString=A)));return C.return(!0)})}},{name:"history forward",exec:function(e,l){if(b.historyId){e=Yd.InputLine.getHistory(b.historyId);l=e.items;
var p=e.index;e.index=++p;p>=l.length&&(e.index=p=0);b.get("editor").undoManager.group();b.get("editor").textString=l[p];b.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield($world.editPrompt("enter",{input:"$world.show()",
mode:"js",evalEnvironment:{context:23}}),2);b.editorPlugin.evalEnvironment;e.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Yd.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:12342,end:17054})}(Yd.AbstractPrompt));Yd.EditPrompt=WJ;Yd.EditPrompt=WJ;Yd.EditPrompt=WJ;var XJ=Ia("an",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("PasswordPrompt")&&"function"===typeof d.PasswordPrompt?d.PasswordPrompt:d.PasswordPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"build",value:function(b){var e=
b.placeholder;this.addNamed("promptTitle",{type:"text",value:b.label,fixedHeight:!0});this.addNamed("input",{type:Yd.PasswordInputLine,fontSize:22,padding:Yd.rect(5,5,0,0),name:"input",placeholder:e||""});b=this.addNamed("ok button",{type:"button",label:"OK"});e=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Yd.connect(b,"fire",this,"resolve");Yd.connect(e,"fire",this,"reject");this.addNamed("button wrapper",{submorphs:[b,e]})}},{key:"resolve",value:function(){Sb._get(Object.getPrototypeOf(k.prototype),
"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var b=this.get("input");b.whenRendered().then(function(){return b.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.passwordPrompt("Enter your secret password:"),0)})}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},
master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17063,end:18461})}(Yd.AbstractPrompt));Yd.PasswordPrompt=XJ;Yd.PasswordPrompt=XJ;Yd.PasswordPrompt=XJ;var YJ=Ia("ao",function(a){var d=
lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("ListPrompt")&&"function"===typeof d.ListPrompt?d.ListPrompt:d.ListPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onChange",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);"extent"==b.prop&&this.layout&&!this.layout.active&&(b=b.value.subPt(b.prevValue),this.getSubmorphNamed("prompt list").height+=
b.y)}},{key:"getMaster",value:function(){return this.filterable?"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(b){var e=b.label,l=b.filterable,p=b.multiSelect,q=b.historyId,u=b.useLastInput,w=b.fuzzy,y=b.filterFunction,A=b.sortFunction,C=b.actions,D=b.selectedAction,L=b.items,I=b.onSelection,S=b.onFilter;this.extent=b.extent||Yd.pt(500,400);this.addNamed("promptTitle",{type:"text"}).value=
e;var V=this.addNamed("prompt list",{type:l?Yd.FilterableList:Yd.List,multiSelect:p,historyId:q,useLastInput:u});l?this.get("list").master=!1:this.get("prompt list").master=!1;V.items=L;l&&w&&(V.fuzzy=w);l&&"function"===typeof y&&(V.filterFunction=y);l&&"function"===typeof A&&(V.sortFunction=A);I&&"function"===typeof I&&(this.onSelection=I);l&&C&&(V.actions=C);l&&D&&(V.selectedAction=D);b=this.addNamed("ok button",{type:"button"});e=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",
{submorphs:[b,e]});Yd.connect(b,"fire",this,"resolve");Yd.connect(e,"fire",this,"reject");l&&(Yd.connect(V,"accepted",this,"resolve"),Yd.connect(V,"canceled",this,"reject"),S&&Yd.connect(V,"updateFilter",function(){return S(V)}),V.whenRendered().then(function(){return V.relayout()}))}},{key:"resolve",value:function(b){var e=this.getSubmorphNamed("prompt list");b=b||e instanceof Yd.FilterableList?e.acceptInput():{selected:e.selections,status:"accepted",actions:"default"};return this.answer.resolve(b)}},
{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.listPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],
set:function(b){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=b||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(b){var e=this.getSubmorphNamed("prompt list");e&&(e.selectedIndex=b,e.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect","submorphs"],set:function(b){var e=this,l=this.getSubmorphNamed("prompt list");l&&Yd.connect(l,"selection",function(p){return b(p,
e)})}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:18559,end:22768})}(Yd.AbstractPrompt));Yd.ListPrompt=YJ;Yd.ListPrompt=YJ;Yd.ListPrompt=YJ;var ZJ=Ia("ap",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),k=d.hasOwnProperty("EditListPrompt")&&
"function"===typeof d.EditListPrompt?d.EditListPrompt:d.EditListPrompt=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"build",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"build",this).call(this,b);this.getSubmorphNamed("prompt list").items=b.items;b=this.addNamed("add item button",{type:"button",label:Yd.Icon.makeLabel("plus")});var e=this.addNamed("remove item button",{type:"button",
label:Yd.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(b);this.getSubmorphNamed("button wrapper").addMorph(e);Yd.connect(b,"fire",this,"addItemToList");Yd.connect(e,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){e=b.get("prompt list");l=1!=e.selectedItems.length?-1:0===e.selectedIndex?0:e.selectedIndex-1;e.items=Yd.arr.withoutAll(e.items,e.selectedItems);
0>l?e.selection=null:e.selectedIndex=l;e.focus();p.jumpToEnd()})}},{key:"addItemToList",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=b.get("prompt list"),l=e.selection?e.items[e.selectedIndex].string:"",u.yield(b.world().prompt("Input to add to the list",{historyId:b.historyId||"EditListPrompt-input-history",input:l}),2);p=u.yieldResult;if(!p)return u.return();e=b.get("list");q=e.selection?e.selectedIndex+1:e.items.length;
e.addItemAt(p,q);e.focus();e.selectedIndex=q;u.jumpToEnd()})}},{key:"keybindings",get:function(){return Sb._get(Object.getPrototypeOf(k.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var b=this;return Sb._get(Object.getPrototypeOf(k.prototype),"commands",this).concat([{name:"deselect",
exec:function(){b.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){b.addItemToList();return!0}},{name:"remove item from list",exec:function(){b.removeSelectedItemsFromList();return!0}}])}},{key:"resolve",value:function(){var b=this.get("prompt list");return this.answer.resolve({list:b.values,selections:b.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},
{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],d,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22777,end:25665})}(Yd.ListPrompt));Yd.EditListPrompt=ZJ;Yd.EditListPrompt=ZJ;Yd.EditListPrompt=ZJ;var aS=Object.freeze({__proto__:null,AbstractPrompt:RJ,InformPrompt:SJ,ConfirmPrompt:TJ,MultipleChoicePrompt:UJ,TextPrompt:VJ,EditPrompt:WJ,PasswordPrompt:XJ,ListPrompt:YJ,EditListPrompt:ZJ}),Na="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bS={};(function(a,d){d(bS)})(bS,function(a){function d(Da){"@babel/helpers - typeof";
d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(M){return typeof M}:function(M){return M&&"function"===typeof Symbol&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M};return d(Da)}function k(Da,M){if(!(Da instanceof M))throw new TypeError("Cannot call a class as a function");}function b(Da,M){for(var U=0;U<M.length;U++){var aa=M[U];aa.enumerable=aa.enumerable||!1;aa.configurable=!0;"value"in aa&&(aa.writable=!0);Object.defineProperty(Da,aa.key,aa)}}function e(Da,
M,U){M&&b(Da.prototype,M);U&&b(Da,U);return Da}function l(Da,M){var U=Array.isArray(Da)?Da:void 0;if(!U)if("undefined"!==typeof Symbol&&Symbol.iterator in Object(Da)){U=[];var aa=!0,pa=!1,ma=void 0;try{for(var La=Da[Symbol.iterator](),ib;!(aa=(ib=La.next()).done)&&(U.push(ib.value),!M||U.length!==M);aa=!0);}catch(ca){pa=!0,ma=ca}finally{try{if(!aa&&null!=La["return"])La["return"]()}finally{if(pa)throw ma;}}}else U=void 0;if(!(Da=U||q(Da,M)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return Da}function p(Da){var M=Array.isArray(Da)?u(Da):void 0;M||(M="undefined"!==typeof Symbol&&Symbol.iterator in Object(Da)?Array.from(Da):void 0);if(!(Da=M||q(Da)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return Da}function q(Da,M){if(Da){if("string"===typeof Da)return u(Da,M);var U=Object.prototype.toString.call(Da).slice(8,-1);"Object"===U&&Da.constructor&&(U=Da.constructor.name);
if("Map"===U||"Set"===U)return Array.from(Da);if("Arguments"===U||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return u(Da,M)}}function u(Da,M){if(null==M||M>Da.length)M=Da.length;for(var U=0,aa=Array(M);U<M;U++)aa[U]=Da[U];return aa}function w(Da){if("undefined"===typeof Symbol||null==Da[Symbol.iterator]){if(Array.isArray(Da)||(Da=q(Da))){var M=0,U=function(){};return{s:U,n:function(){return M>=Da.length?{done:!0}:{done:!1,value:Da[M++]}},e:function(ib){throw ib;},f:U}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var aa,pa=!0,ma=!1,La;return{s:function(){aa=Da[Symbol.iterator]()},n:function(){var ib=aa.next();pa=ib.done;return ib},e:function(ib){ma=!0;La=ib},f:function(){try{pa||null==aa.return||aa.return()}finally{if(ma)throw La;}}}}function y(Da){return"number"===typeof Da?Da?0>Da?-1:1:Da===Da?Da:NaN:NaN}function A(Da,M,U,aa,pa,ma,La){pa=pa*Math.PI/180;var ib=Math.cos(pa);pa=Math.sin(pa);var ca=Da.subtract(M).multiply(.5),qa=ca.x*ib+ca.y*pa;ca=ca.x*-pa+ca.y*ib;U=Math.abs(U);aa=Math.abs(aa);var ra=qa*qa,
Va=ca*ca,nb=ra/(U*U)+Va/(aa*aa);1<nb&&(nb=Math.sqrt(nb),U*=nb,aa*=nb);nb=U*U;var wc=aa*aa;Va*=nb;ra*=wc;ra=(nb*wc-Va-ra)/(Va+ra);1E-6>Math.abs(ra)&&(ra=0);ra=Math.sqrt(ra);ma===La&&(ra=-ra);Da=Da.add(M).multiply(.5);M=ra*U*ca/aa;ma=ra*-aa*qa/U;ra=(qa-M)/U;qa=(qa+M)/U;Va=(ca-ma)/aa;nb=(ca+ma)/aa;ca=(new V(1,0)).angleBetween(new V(ra,Va));qa=(new V(ra,Va)).angleBetween(new V(-qa,-nb));!1===La&&(qa-=Q);return[M*ib-ma*pa+Da.x,M*pa+ma*ib+Da.y,U,aa,ca,ca+qa]}function C(Da,M){var U=[];Da=w(Da);var aa;try{for(Da.s();!(aa=
Da.n()).done;){var pa=l(aa.value,2),ma=pa[0],La=pa[1],ib=null;if("Point2D"===La)ib=L(ma,M);else if("Number"===La)ib=D(ma,M);else if("Array<Point2D>"===La||"Point2D[]"===La){for(var ca=[];0<M.length;)ca.push(L(ma,M));0<ca.length&&(ib=ca)}else if("Optional<Number>"===La||"Number?"===La)ib=D(ma,M),null===ib&&(ib=void 0);else throw new TypeError("Unrecognized value type: ".concat(La));if(null!==ib)U.push(ib);else throw new TypeError("Unable to extract value for ".concat(ma));}}catch(qa){Da.e(qa)}finally{Da.f()}return U}
function D(Da,M){var U=null;if(0<M.length){var aa=M[0],pa=d(aa);if("number"===pa)return M.shift();if("object"===pa){Da=w(Da);var ma;try{for(Da.s();!(ma=Da.n()).done;){var La=ma.value;if(La in aa&&"number"===typeof aa[La]){U=aa[La];break}}}catch(ib){Da.e(ib)}finally{Da.f()}}}return U}function L(Da,M){var U=null;0<M.length&&function(){var aa=M[0],pa=d(aa);if("number"===pa){if(1<M.length){var ma=M.shift(),La=M.shift();U=new S(ma,La)}}else if(Array.isArray(aa)&&1<aa.length)if(2===aa.length)ma=M.shift(),
ma=l(ma,2),U=new S(ma[0],ma[1]);else throw new TypeError("Unhandled array of length ".concat(aa.length));else if("object"===pa)if("x"in aa&&"y"in aa)U=new S(aa.x,aa.y),M.shift();else{pa=w(Da);try{for(pa.s();!(ma=pa.n()).done;)if(La=ma.value,Array.isArray(La)){if(La.every(function(ib){return ib in aa})){U=new S(aa[La[0]],aa[La[1]]);break}}else if(La in aa){U=L([],[aa[La]]);break}}catch(ib){pa.e(ib)}finally{pa.f()}}}();return U}function I(Da){var M=Da.slice();M.push(Da[0]);return M}var S=function(){function Da(){var M=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,U=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;k(this||Na,Da);(this||Na).x=M;(this||Na).y=U}e(Da,[{key:"clone",value:function(){return new (this||Na).constructor((this||Na).x,(this||Na).y)}},{key:"add",value:function(M){return new (this||Na).constructor((this||Na).x+M.x,(this||Na).y+M.y)}},{key:"subtract",value:function(M){return new (this||Na).constructor((this||Na).x-M.x,(this||Na).y-M.y)}},{key:"multiply",value:function(M){return new (this||
Na).constructor((this||Na).x*M,(this||Na).y*M)}},{key:"divide",value:function(M){return new (this||Na).constructor((this||Na).x/M,(this||Na).y/M)}},{key:"equals",value:function(M){return(this||Na).x===M.x&&(this||Na).y===M.y}},{key:"precisionEquals",value:function(M,U){return Math.abs((this||Na).x-M.x)<U&&Math.abs((this||Na).y-M.y)<U}},{key:"lerp",value:function(M,U){var aa=1-U;return new (this||Na).constructor((this||Na).x*aa+M.x*U,(this||Na).y*aa+M.y*U)}},{key:"distanceFrom",value:function(M){var U=
(this||Na).x-M.x;M=(this||Na).y-M.y;return Math.sqrt(U*U+M*M)}},{key:"min",value:function(M){return new (this||Na).constructor(Math.min((this||Na).x,M.x),Math.min((this||Na).y,M.y))}},{key:"max",value:function(M){return new (this||Na).constructor(Math.max((this||Na).x,M.x),Math.max((this||Na).y,M.y))}},{key:"transform",value:function(M){return new (this||Na).constructor(M.a*(this||Na).x+M.c*(this||Na).y+M.e,M.b*(this||Na).x+M.d*(this||Na).y+M.f)}},{key:"toString",value:function(){return"point(".concat((this||
Na).x,",").concat((this||Na).y,")")}}]);return Da}(),V=function(){function Da(){var M=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,U=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;k(this||Na,Da);(this||Na).x=M;(this||Na).y=U}e(Da,[{key:"length",value:function(){return Math.sqrt((this||Na).x*(this||Na).x+(this||Na).y*(this||Na).y)}},{key:"magnitude",value:function(){return(this||Na).x*(this||Na).x+(this||Na).y*(this||Na).y}},{key:"dot",value:function(M){return(this||Na).x*M.x+
(this||Na).y*M.y}},{key:"cross",value:function(M){return(this||Na).x*M.y-(this||Na).y*M.x}},{key:"determinant",value:function(M){return(this||Na).x*M.y-(this||Na).y*M.x}},{key:"unit",value:function(){return this.divide(this.length())}},{key:"add",value:function(M){return new (this||Na).constructor((this||Na).x+M.x,(this||Na).y+M.y)}},{key:"subtract",value:function(M){return new (this||Na).constructor((this||Na).x-M.x,(this||Na).y-M.y)}},{key:"multiply",value:function(M){return new (this||Na).constructor((this||
Na).x*M,(this||Na).y*M)}},{key:"divide",value:function(M){return new (this||Na).constructor((this||Na).x/M,(this||Na).y/M)}},{key:"angleBetween",value:function(M){var U=this.dot(M)/(this.length()*M.length());U=Math.max(-1,Math.min(U,1));U=Math.acos(U);return 0>this.cross(M)?-U:U}},{key:"perp",value:function(){return new (this||Na).constructor(-(this||Na).y,(this||Na).x)}},{key:"perpendicular",value:function(M){return this.subtract(this.project(M))}},{key:"project",value:function(M){var U=this.dot(M)/
M.dot(M);return M.multiply(U)}},{key:"transform",value:function(M){return new (this||Na).constructor(M.a*(this||Na).x+M.c*(this||Na).y,M.b*(this||Na).x+M.d*(this||Na).y)}},{key:"equals",value:function(M){return(this||Na).x===M.x&&(this||Na).y===M.y}},{key:"precisionEquals",value:function(M,U){return Math.abs((this||Na).x-M.x)<U&&Math.abs((this||Na).y-M.y)<U}},{key:"toString",value:function(){return"vector(".concat((this||Na).x,",").concat((this||Na).y,")")}}],[{key:"fromPoints",value:function(M,U){return new Da(U.x-
M.x,U.y-M.y)}}]);return Da}(),ba=function(){function Da(){var M=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,U=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,aa=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,pa=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,ma=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,La=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;k(this||Na,Da);(this||Na).a=M;(this||Na).b=U;(this||Na).c=aa;(this||Na).d=pa;(this||
Na).e=ma;(this||Na).f=La}e(Da,[{key:"multiply",value:function(M){return this.isIdentity()?M:M.isIdentity()?this||Na:new (this||Na).constructor((this||Na).a*M.a+(this||Na).c*M.b,(this||Na).b*M.a+(this||Na).d*M.b,(this||Na).a*M.c+(this||Na).c*M.d,(this||Na).b*M.c+(this||Na).d*M.d,(this||Na).a*M.e+(this||Na).c*M.f+(this||Na).e,(this||Na).b*M.e+(this||Na).d*M.f+(this||Na).f)}},{key:"inverse",value:function(){if(this.isIdentity())return this||Na;var M=(this||Na).a*(this||Na).d-(this||Na).b*(this||Na).c;
if(0===M)throw Error("Matrix is not invertible");M=1/M;return new (this||Na).constructor((this||Na).d*M,-(this||Na).b*M,-(this||Na).c*M,(this||Na).a*M,((this||Na).f*(this||Na).c-(this||Na).e*(this||Na).d)*M,((this||Na).e*(this||Na).b-(this||Na).f*(this||Na).a)*M)}},{key:"translate",value:function(M,U){return new (this||Na).constructor((this||Na).a,(this||Na).b,(this||Na).c,(this||Na).d,(this||Na).a*M+(this||Na).c*U+(this||Na).e,(this||Na).b*M+(this||Na).d*U+(this||Na).f)}},{key:"scale",value:function(M){return new (this||
Na).constructor((this||Na).a*M,(this||Na).b*M,(this||Na).c*M,(this||Na).d*M,(this||Na).e,(this||Na).f)}},{key:"scaleAt",value:function(M,U){var aa=U.x-M*U.x;U=U.y-M*U.y;return new (this||Na).constructor((this||Na).a*M,(this||Na).b*M,(this||Na).c*M,(this||Na).d*M,(this||Na).a*aa+(this||Na).c*U+(this||Na).e,(this||Na).b*aa+(this||Na).d*U+(this||Na).f)}},{key:"scaleNonUniform",value:function(M,U){return new (this||Na).constructor((this||Na).a*M,(this||Na).b*M,(this||Na).c*U,(this||Na).d*U,(this||Na).e,
(this||Na).f)}},{key:"scaleNonUniformAt",value:function(M,U,aa){var pa=aa.x-M*aa.x;aa=aa.y-U*aa.y;return new (this||Na).constructor((this||Na).a*M,(this||Na).b*M,(this||Na).c*U,(this||Na).d*U,(this||Na).a*pa+(this||Na).c*aa+(this||Na).e,(this||Na).b*pa+(this||Na).d*aa+(this||Na).f)}},{key:"rotate",value:function(M){var U=Math.cos(M);M=Math.sin(M);return new (this||Na).constructor((this||Na).a*U+(this||Na).c*M,(this||Na).b*U+(this||Na).d*M,(this||Na).a*-M+(this||Na).c*U,(this||Na).b*-M+(this||Na).d*
U,(this||Na).e,(this||Na).f)}},{key:"rotateAt",value:function(M,U){var aa=Math.cos(M),pa=Math.sin(M);M=U.x;U=U.y;var ma=(this||Na).a*aa+(this||Na).c*pa,La=(this||Na).b*aa+(this||Na).d*pa,ib=(this||Na).c*aa-(this||Na).a*pa;aa=(this||Na).d*aa-(this||Na).b*pa;return new (this||Na).constructor(ma,La,ib,aa,((this||Na).a-ma)*M+((this||Na).c-ib)*U+(this||Na).e,((this||Na).b-La)*M+((this||Na).d-aa)*U+(this||Na).f)}},{key:"rotateFromVector",value:function(M){var U=M.unit();M=U.x;U=U.y;return new (this||Na).constructor((this||
Na).a*M+(this||Na).c*U,(this||Na).b*M+(this||Na).d*U,(this||Na).a*-U+(this||Na).c*M,(this||Na).b*-U+(this||Na).d*M,(this||Na).e,(this||Na).f)}},{key:"flipX",value:function(){return new (this||Na).constructor(-(this||Na).a,-(this||Na).b,(this||Na).c,(this||Na).d,(this||Na).e,(this||Na).f)}},{key:"flipY",value:function(){return new (this||Na).constructor((this||Na).a,(this||Na).b,-(this||Na).c,-(this||Na).d,(this||Na).e,(this||Na).f)}},{key:"skewX",value:function(M){M=Math.tan(M);return new (this||
Na).constructor((this||Na).a,(this||Na).b,(this||Na).c+(this||Na).a*M,(this||Na).d+(this||Na).b*M,(this||Na).e,(this||Na).f)}},{key:"skewY",value:function(M){M=Math.tan(M);return new (this||Na).constructor((this||Na).a+(this||Na).c*M,(this||Na).b+(this||Na).d*M,(this||Na).c,(this||Na).d,(this||Na).e,(this||Na).f)}},{key:"isIdentity",value:function(){return 1===(this||Na).a&&0===(this||Na).b&&0===(this||Na).c&&1===(this||Na).d&&0===(this||Na).e&&0===(this||Na).f}},{key:"isInvertible",value:function(){return 0!==
(this||Na).a*(this||Na).d-(this||Na).b*(this||Na).c}},{key:"getScale",value:function(){return{scaleX:Math.sqrt((this||Na).a*(this||Na).a+(this||Na).c*(this||Na).c),scaleY:Math.sqrt((this||Na).b*(this||Na).b+(this||Na).d*(this||Na).d)}}},{key:"getDecomposition",value:function(){var M=.5*((this||Na).a+(this||Na).d),U=.5*((this||Na).a-(this||Na).d),aa=.5*((this||Na).b+(this||Na).c),pa=.5*((this||Na).b-(this||Na).c),ma=Math.sqrt(M*M+pa*pa),La=Math.sqrt(U*U+aa*aa),ib=ma+La;ma-=La;U=Math.atan2(aa,U);pa=
Math.atan2(pa,M);M=.5*(pa-U);pa=.5*(pa+U);return{translation:(this||Na).constructor.translation((this||Na).e,(this||Na).f),rotation:(this||Na).constructor.rotation(pa),scale:(this||Na).constructor.nonUniformScaling(ib,ma),rotation0:(this||Na).constructor.rotation(M)}}},{key:"equals",value:function(M){return(this||Na).a===M.a&&(this||Na).b===M.b&&(this||Na).c===M.c&&(this||Na).d===M.d&&(this||Na).e===M.e&&(this||Na).f===M.f}},{key:"precisionEquals",value:function(M,U){return Math.abs((this||Na).a-
M.a)<U&&Math.abs((this||Na).b-M.b)<U&&Math.abs((this||Na).c-M.c)<U&&Math.abs((this||Na).d-M.d)<U&&Math.abs((this||Na).e-M.e)<U&&Math.abs((this||Na).f-M.f)<U}},{key:"toString",value:function(){return"matrix(".concat((this||Na).a,",").concat((this||Na).b,",").concat((this||Na).c,",").concat((this||Na).d,",").concat((this||Na).e,",").concat((this||Na).f,")")}}],[{key:"translation",value:function(M,U){return new Da(1,0,0,1,M,U)}},{key:"scaling",value:function(M){return new Da(M,0,0,M,0,0)}},{key:"scalingAt",
value:function(M,U){return new Da(M,0,0,M,U.x-U.x*M,U.y-U.y*M)}},{key:"nonUniformScaling",value:function(M,U){return new Da(M,0,0,U,0,0)}},{key:"nonUniformScalingAt",value:function(M,U,aa){return new Da(M,0,0,U,aa.x-aa.x*M,aa.y-aa.y*U)}},{key:"rotation",value:function(M){var U=Math.cos(M);M=Math.sin(M);return new Da(U,M,-M,U,0,0)}},{key:"rotationAt",value:function(M,U){var aa=Math.cos(M);M=Math.sin(M);return new Da(aa,M,-M,aa,U.x-U.x*aa+U.y*M,U.y-U.y*aa-U.x*M)}},{key:"rotationFromVector",value:function(M){var U=
M.unit();M=U.x;U=U.y;return new Da(M,U,-U,M,0,0)}},{key:"xFlip",value:function(){return new Da(-1,0,0,1,0,0)}},{key:"yFlip",value:function(){return new Da(1,0,0,-1,0,0)}},{key:"xSkew",value:function(M){return new Da(1,0,Math.tan(M),1,0,0)}},{key:"ySkew",value:function(M){return new Da(1,Math.tan(M),0,1,0,0)}}]);return Da}();ba.IDENTITY=new ba;ba.IDENTITY.isIdentity=function(){return!0};var ua=function(){function Da(){k(this||Na,Da);(this||Na).coefs=[];for(var M=arguments.length-1;0<=M;M--)(this||
Na).coefs.push(0>M||arguments.length<=M?void 0:arguments[M]);(this||Na)._variable="t";(this||Na)._s=0}e(Da,[{key:"clone",value:function(){var M=new Da;M.coefs=(this||Na).coefs.slice();return M}},{key:"eval",value:function(M){if(isNaN(M))throw new TypeError("Parameter must be a number. Found '".concat(M,"'"));for(var U=0,aa=(this||Na).coefs.length-1;0<=aa;aa--)U=U*M+(this||Na).coefs[aa];return U}},{key:"add",value:function(M){for(var U=new Da,aa=this.getDegree(),pa=M.getDegree(),ma=Math.max(aa,pa),
La=0;La<=ma;La++)U.coefs[La]=(La<=aa?(this||Na).coefs[La]:0)+(La<=pa?M.coefs[La]:0);return U}},{key:"multiply",value:function(M){for(var U=new Da,aa=0;aa<=this.getDegree()+M.getDegree();aa++)U.coefs.push(0);for(aa=0;aa<=this.getDegree();aa++)for(var pa=0;pa<=M.getDegree();pa++)U.coefs[aa+pa]+=(this||Na).coefs[aa]*M.coefs[pa];return U}},{key:"divideEqualsScalar",value:function(M){for(var U=0;U<(this||Na).coefs.length;U++)(this||Na).coefs[U]/=M}},{key:"simplifyEquals",value:function(){for(var M=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:1E-12,U=this.getDegree();0<=U;U--)if(Math.abs((this||Na).coefs[U])<=M)(this||Na).coefs.pop();else break}},{key:"removeZerosEquals",value:function(){for(var M=(this||Na).coefs,U=10*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1E-15)*Math.abs(M.reduce(function(pa,ma){return Math.abs(ma)>Math.abs(pa)?ma:pa})),aa=0;aa<M.length-1;aa++)Math.abs(M[aa])<U&&(M[aa]=0);return this||Na}},{key:"monicEquals",value:function(){var M=(this||Na).coefs;1!==M[M.length-1]&&
this.divideEqualsScalar(M[M.length-1]);return this||Na}},{key:"toString",value:function(){for(var M=[],U=[],aa=(this||Na).coefs.length-1;0<=aa;aa--){var pa=Math.round(1E3*(this||Na).coefs[aa])/1E3;if(0!==pa){var ma=0>pa?" - ":" + ";pa=Math.abs(pa);0<aa&&(pa=1===pa?(this||Na)._variable:pa+(this||Na)._variable);1<aa&&(pa+="^"+aa);U.push(ma);M.push(pa)}}U[0]=" + "===U[0]?"":"-";aa="";for(pa=0;pa<M.length;pa++)aa+=U[pa]+M[pa];return aa}},{key:"bisection",value:function(M,U){var aa=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:1E-6,pa=3<arguments.length&&void 0!==arguments[3]?arguments[3]:15,ma=this.eval(M),La=this.eval(U);if(Math.abs(ma)<=aa)var ib=M;else if(Math.abs(La)<=aa)ib=U;else if(0>=ma*La)for(pa=Math.ceil((Math.log(U-M)+Math.LN10*pa)/Math.LN2),La=0;La<pa;La++){ib=.5*(M+U);var ca=this.eval(ib);if(Math.abs(ca)<=aa)break;0>ca*ma?U=ib:(M=ib,ma=ca)}return ib}},{key:"trapezoid",value:function(M,U,aa){if(isNaN(M)||isNaN(U)||isNaN(aa))throw new TypeError("Parameters must be numbers");
var pa=U-M;if(1===aa)aa=this.eval(M),U=this.eval(U),(this||Na)._s=.5*pa*(aa+U);else{U=1<<aa-2;aa=pa/U;M+=.5*aa;for(var ma=0,La=0;La<U;La++)ma+=this.eval(M),M+=aa;(this||Na)._s=.5*((this||Na)._s+pa*ma/U)}if(isNaN((this||Na)._s))throw new TypeError("this._s is NaN");return(this||Na)._s}},{key:"simpson",value:function(M,U){if(isNaN(M)||isNaN(U))throw new TypeError("Parameters must be numbers");var aa=U-M,pa=.5*aa*(this.eval(M)+this.eval(U));U=pa;for(var ma=4*pa/3,La=ma,ib=pa,ca=1,qa=2;20>=qa;qa++){pa=
aa/ca;ma=M+.5*pa;for(var ra=0,Va=1;Va<=ca;Va++)ra+=this.eval(ma),ma+=pa;pa=U=.5*(U+aa*ra/ca);ma=(4*pa-ib)/3;if(Math.abs(ma-La)<1E-7*Math.abs(La))break;La=ma;ib=pa;ca<<=1}return ma}},{key:"romberg",value:function(M,U){if(isNaN(M)||isNaN(U))throw new TypeError("Parameters must be numbers");for(var aa=Array(21),pa=Array(21),ma={y:0,dy:0},La=pa[0]=1;20>=La;La++){aa[La-1]=this.trapezoid(M,U,La);if(3<=La&&(ma=Da.interpolate(pa,aa,3,La-3,0),Math.abs(ma.dy)<=1E-6*ma.y))break;aa[La]=aa[La-1];pa[La]=.25*pa[La-
1]}return ma.y}},{key:"zeroErrorEstimate",value:function(M){var U=this||Na;if("undefined"===typeof M){var aa=U.bounds();M=Math.max(Math.abs(aa.minX),Math.abs(aa.maxX))}if(.001>M)return 2*Math.abs(U.eval(1E-15));var pa=U.coefs[U.coefs.length-1];return 10*1E-15*U.coefs.reduce(function(ma,La,ib){La=La/pa*Math.pow(M,ib);return La>ma?La:ma},0)}},{key:"boundsUpperRealFujiwara",value:function(){var M=(this||Na).coefs,U=M.length-1,aa=M[U];1!==aa&&(M=(this||Na).coefs.map(function(ca){return ca/aa}));var pa=
M.map(function(ca,qa){return qa<U?Math.pow(Math.abs(0===qa?ca/2:ca),1/(U-qa)):ca}),ma=function(ca,qa,ra){La(ra)&&(ca.max<qa?(ca.nearmax=ca.max,ca.max=qa):ca.nearmax<qa&&(ca.nearmax=qa));return ca};var La=function(ca){return ca<U&&0>M[ca]};var ib=pa.reduce(ma,{max:0,nearmax:0});La=function(ca){return ca<U&&(U%2===ca%2?0>M[ca]:0<M[ca])};return{negX:-2*pa.reduce(ma,{max:0,nearmax:0}).max,posX:2*ib.max}}},{key:"boundsLowerRealFujiwara",value:function(){var M=new Da;M.coefs=(this||Na).coefs.slice().reverse();
M=M.boundsUpperRealFujiwara();M.negX=1/M.negX;M.posX=1/M.posX;return M}},{key:"bounds",value:function(){var M=this.boundsUpperRealFujiwara(),U={minX:M.negX,maxX:M.posX};if(0===M.negX&&0===M.posX)return U;0===M.negX?U.minX=this.boundsLowerRealFujiwara().posX:0===M.posX&&(U.maxX=this.boundsLowerRealFujiwara().negX);U.minX>U.maxX&&(U.minX=U.maxX=0);return U}},{key:"boundUpperAbsRouche",value:function(){var M=(this||Na).coefs,U=M.length-1;return 1+M.reduce(function(aa,pa,ma){return ma!==U?(pa=Math.abs(pa),
aa<pa?pa:aa):aa},0)/Math.abs(M[U])}},{key:"boundLowerAbsRouche",value:function(){var M=(this||Na).coefs,U=M.reduce(function(aa,pa,ma){return 0!==ma?(pa=Math.abs(pa),aa<pa?pa:aa):aa},0);return Math.abs(M[0])/(Math.abs(M[0])+U)}},{key:"boundsRealLaguerre",value:function(){var M=(this||Na).coefs,U=M.length-1,aa=-M[U-1]/(U*M[U]);M=(U-1)/(U*M[U])*Math.sqrt(M[U-1]*M[U-1]-2*U/(U-1)*M[U]*M[U-2]);0>M&&(M=-M);return{minX:aa-M,maxX:aa+M}}},{key:"countRootsDescartes",value:function(){var M=(this||Na).coefs,U=
M.length-1;M=M.reduce(function(aa,pa,ma){0!==aa.prev_a&&0!==pa&&(0>aa.prev_a===0<pa&&aa.pos++,0===ma%2!==0>aa.prev_a===(1===ma%2!==0<pa)&&aa.neg++);aa.prev_a=pa;return aa},{pos:0,neg:0,prev_a:0});return{maxRealPos:M.pos,maxRealNeg:M.neg,minComplex:U-(M.pos+M.neg)}}},{key:"getDegree",value:function(){return(this||Na).coefs.length-1}},{key:"getDerivative",value:function(){for(var M=new Da,U=1;U<(this||Na).coefs.length;U++)M.coefs.push(U*(this||Na).coefs[U]);return M}},{key:"getRoots",value:function(){this.simplifyEquals();
switch(this.getDegree()){case 0:var M=[];break;case 1:M=this.getLinearRoot();break;case 2:M=this.getQuadraticRoots();break;case 3:M=this.getCubicRoots();break;case 4:M=this.getQuarticRoots();break;default:M=[]}return M}},{key:"getRootsInInterval",value:function(M,U){function aa(La){"number"===typeof La&&pa.push(La)}var pa=[];if(0===this.getDegree())throw new RangeError("Unexpected empty polynomial");if(1===this.getDegree())aa(this.bisection(M,U));else{var ma=this.getDerivative().getRootsInInterval(M,
U);if(0<ma.length){aa(this.bisection(M,ma[0]));for(M=0;M<=ma.length-2;M++)aa(this.bisection(ma[M],ma[M+1]));aa(this.bisection(ma[ma.length-1],U))}else aa(this.bisection(M,U))}return pa}},{key:"getLinearRoot",value:function(){var M=[],U=(this||Na).coefs[1];0!==U&&M.push(-(this||Na).coefs[0]/U);return M}},{key:"getQuadraticRoots",value:function(){var M=[];if(2===this.getDegree()){var U=(this||Na).coefs[2],aa=(this||Na).coefs[1]/U;U=aa*aa-(this||Na).coefs[0]/U*4;0<U?(U=Math.sqrt(U),M.push(.5*(-aa+U)),
M.push(.5*(-aa-U))):0===U&&M.push(.5*-aa)}return M}},{key:"getCubicRoots",value:function(){var M=[];if(3===this.getDegree()){var U=(this||Na).coefs[3],aa=(this||Na).coefs[2]/U,pa=(this||Na).coefs[1]/U,ma=(3*pa-aa*aa)/3;U=(2*aa*aa*aa-9*pa*aa+(this||Na).coefs[0]/U*27)/27;aa/=3;pa=U*U/4+ma*ma*ma/27;U/=2;var La=this.zeroErrorEstimate();Math.abs(pa)<=La&&(pa=0);0<pa?(ma=Math.sqrt(pa),La=-U+ma,pa=0<=La?Math.pow(La,1/3):-Math.pow(-La,1/3),La=-U-ma,pa=0<=La?pa+Math.pow(La,1/3):pa-Math.pow(-La,1/3),M.push(pa-
aa)):0>pa?(ma=Math.sqrt(-ma/3),pa=Math.atan2(Math.sqrt(-pa),-U)/3,U=Math.cos(pa),pa=Math.sin(pa),La=Math.sqrt(3),M.push(2*ma*U-aa),M.push(-ma*(U+La*pa)-aa),M.push(-ma*(U-La*pa)-aa)):(ma=0<=U?-Math.pow(U,1/3):Math.pow(-U,1/3),M.push(2*ma-aa),M.push(-ma-aa))}return M}},{key:"getQuarticRoots",value:function(){var M=[],U=this.getDegree();if(4===U){var aa=new Da;aa.coefs=(this||Na).coefs.slice();aa.divideEqualsScalar(aa.coefs[U]);Math.abs(aa.coefs[0])<10*1E-15*Math.abs(aa.coefs[3])&&(aa.coefs[0]=0);for(var pa=
aa.getDerivative(),ma=pa.getRoots().sort(function(nb,wc){return nb-wc}),La=[],ib=ma.length-1,ca=this.bounds(),qa=this.zeroErrorEstimate(Math.max(Math.abs(ca.minX),Math.abs(ca.maxX))),ra=0;ra<=ib;ra++)La.push(aa.eval(ma[ra]));for(ra=0;ra<=ib;ra++)Math.abs(La[ra])<qa&&(La[ra]=0);qa=0;var Va=Math.max(.1*(ca.maxX-ca.minX)/U,1E-15);U=[];ra=[];if(-1<ib){0!==La[0]?y(La[0])!==y(aa.eval(ma[0]-Va)-La[0])&&(U.push(ma[0]-Va),ra.push([ca.minX,ma[0]])):(M.push(ma[0],ma[0]),qa++);for(;qa<ib;qa++)0===La[qa+1]?(M.push(ma[qa+
1],ma[qa+1]),qa++):y(La[qa])!==y(La[qa+1])&&(U.push((ma[qa]+ma[qa+1])/2),ra.push([ma[qa],ma[qa+1]]));0!==La[ib]&&y(La[ib])!==y(aa.eval(ma[ib]+Va)-La[ib])&&(U.push(ma[ib]+Va),ra.push([ma[ib],ca.maxX]))}ma=function(nb){return aa.eval(nb)};La=function(nb){return pa.eval(nb)};if(0<U.length)for(qa=0;qa<U.length;qa++)U[qa]=Da.newtonSecantBisection(U[qa],ma,La,32,ra[qa][0],ra[qa][1]);M=M.concat(U)}return M}}],[{key:"interpolate",value:function(M,U,aa,pa,ma){if(M.constructor!==Array||U.constructor!==Array)throw new TypeError("xs and ys must be arrays");
if(isNaN(aa)||isNaN(pa)||isNaN(ma))throw new TypeError("n, offset, and x must be numbers");var La,ib=0,ca=Array(aa),qa=Array(aa),ra=0,Va=Math.abs(ma-M[pa]);for(La=0;La<aa;La++){var nb=Math.abs(ma-M[pa+La]);nb<Va&&(ra=La,Va=nb);ca[La]=qa[La]=U[pa+La]}U=U[pa+ra];ra--;for(Va=1;Va<aa;Va++){for(La=0;La<aa-Va;La++){ib=M[pa+La]-ma;nb=M[pa+La+Va]-ma;var wc=ca[La+1]-qa[La],nc=ib-nb;if(0===nc)throw new RangeError("Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)");nc=wc/
nc;qa[La]=nb*nc;ca[La]=ib*nc}ib=2*(ra+1)<aa-Va?ca[ra+1]:qa[ra--];U+=ib}return{y:U,dy:ib}}},{key:"newtonSecantBisection",value:function(M,U,aa,pa,ma,La){var ib=0,ca=0;var qa=M;var ra=Math.pow(10,-14);if(M="number"===typeof ma&&"number"===typeof La){if(ma>La)throw new RangeError("Min must be greater than max");var Va=U(ma);var nb=U(La);if(y(Va)===y(nb))throw new RangeError("Y values of bounds must be of opposite sign");}for(var wc=function(){return Math.abs(id)<=ra*Math.abs(qa)||ca===qa-id-qa},nc=0;nc<
pa;nc++){var ac=aa(qa);if(0===ac){if(0===ib)throw new RangeError("df(x) is zero");ac=ib}ib=ac;var qd=U(qa);var id=qd/ac;ac=qa-id;if(wc())break;if(M){if(y(qd)===y(nb))La=qa,nb=qd;else if(y(qd)===y(Va))ma=qa,Va=qd;else{qa=ac;break}if(ac<ma||ac>La){if(y(Va)===y(nb))break;qd=nb-Va;ac=La-ma;id=0===qd?qa-(ma+.5*ac):50<Math.abs(qd/Math.min(Va,nb))?qa-(ma+ac*(.5+(Math.abs(Va)<Math.abs(nb)?-.25:.25))):qa-(ma-Va/qd*ac);ac=qa-id;if(wc())break}}ca=qa-ac;qa=ac}return qa}}]);return Da}(),Fa=function(){function Da(M,
U){k(this||Na,Da);(this||Na).type=M;(this||Na).text=U}e(Da,[{key:"typeis",value:function(M){return(this||Na).type===M}}]);return Da}();Fa.UNDEFINED=0;Fa.COMMAND=1;Fa.NUMBER=2;Fa.EOD=3;var F=function(){function Da(M){k(this||Na,Da);if(null===M||void 0===M)M="";this.setPathData(M)}e(Da,[{key:"setPathData",value:function(M){if("string"!==typeof M)throw new TypeError("The first parameter must be a string");(this||Na)._pathData=M}},{key:"getNextToken",value:function(){for(var M=null,U=(this||Na)._pathData;null===
M;)if(null===U||""===U)M=new Fa(Fa.EOD,"");else if(U.match(/^([ \t\r\n,]+)/))U=U.substr(RegExp.$1.length);else if(U.match(/^([AaCcHhLlMmQqSsTtVvZz])/))M=new Fa(Fa.COMMAND,RegExp.$1),U=U.substr(RegExp.$1.length);else if(U.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))M=new Fa(Fa.NUMBER,RegExp.$1),U=U.substr(RegExp.$1.length);else throw new SyntaxError("Unrecognized path data: ".concat(U));(this||Na)._pathData=U;return M}}]);return Da}(),Y=function(){function Da(){k(this||Na,Da);(this||Na)._lexer=
new F;(this||Na)._handler=null}e(Da,[{key:"parseData",value:function(M){if("string"!==typeof M)throw new TypeError("The first parameter must be a string: ".concat(M));null!==(this||Na)._handler&&"function"===typeof(this||Na)._handler.beginParse&&(this||Na)._handler.beginParse();var U=(this||Na)._lexer;U.setPathData(M);M="BOP";for(var aa=null,pa=U.getNextToken();!1===pa.typeis(Fa.EOD);){var ma=[];switch(pa.type){case Fa.COMMAND:if("BOP"===M&&"M"!==pa.text&&"m"!==pa.text)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(pa.text,
"'"));M=pa.text;var La=Da.PARAMCOUNT[pa.text.toUpperCase()];pa=U.getNextToken();break;case Fa.NUMBER:if("BOP"===M)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(pa.text,"'"));La=Da.PARAMCOUNT[M.toUpperCase()];break;default:throw new SyntaxError("Unrecognized command type: ".concat(pa.type));}for(var ib=0;ib<La;ib++){switch(pa.type){case Fa.COMMAND:throw new SyntaxError("Parameter must be a number. Found '".concat(pa.text,"'"));case Fa.NUMBER:ma[ib]=parseFloat(pa.text);
break;case Fa.EOD:throw new SyntaxError("Unexpected end of string");default:throw new SyntaxError("Unrecognized parameter type. Found type '".concat(pa.type,"'"));}pa=U.getNextToken()}if(null!==(this||Na)._handler){La=(this||Na)._handler;ib=Da.METHODNAME[M];if("a"===M||"A"===M)ma[3]=0!==ma[3],ma[4]=0!==ma[4];null!==La&&"function"===typeof La[ib]&&La[ib].apply(La,ma)}switch(M){case "M":M="L";break;case "m":M="l";break;case "Z":case "z":M="BOP"}if(pa===aa)throw new SyntaxError("Parser stalled on '".concat(pa.text,
"'"));aa=pa}null!==(this||Na)._handler&&"function"===typeof(this||Na)._handler.endParse&&(this||Na)._handler.endParse()}},{key:"setHandler",value:function(M){(this||Na)._handler=M}}]);return Da}();Y.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0};Y.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",
s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"};var Q=2*Math.PI,W=function(){function Da(M){k(this||Na,Da);(this||Na).shapeCreator=M;(this||Na).shapes=[];(this||Na).firstX=null;(this||Na).firstY=null;(this||Na).lastX=null;(this||Na).lastY=null;(this||Na).lastCommand=null}e(Da,[{key:"beginParse",value:function(){(this||Na).shapes=[];(this||Na).firstX=null;(this||Na).firstY=null;(this||Na).lastX=
null;(this||Na).lastY=null;(this||Na).lastCommand=null}},{key:"addShape",value:function(M){(this||Na).shapes.push(M)}},{key:"arcAbs",value:function(M,U,aa,pa,ma,La,ib){if(0===M||0===U)this.addShape((this||Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,La,ib));else{var ca;M=A(new S((this||Na).lastX,(this||Na).lastY),new S(La,ib),M,U,aa,pa,ma);this.addShape((ca=(this||Na).shapeCreator).arc.apply(ca,p(M)))}(this||Na).lastCommand="A";(this||Na).lastX=La;(this||Na).lastY=ib}},{key:"arcRel",value:function(M,
U,aa,pa,ma,La,ib){if(0===M||0===U)this.addShape((this||Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,(this||Na).lastX+La,(this||Na).lastY+ib));else{var ca;M=A(new S((this||Na).lastX,(this||Na).lastY),new S((this||Na).lastX+La,(this||Na).lastY+ib),M,U,aa,pa,ma);this.addShape((ca=(this||Na).shapeCreator).arc.apply(ca,p(M)))}(this||Na).lastCommand="a";(this||Na).lastX+=La;(this||Na).lastY+=ib}},{key:"curvetoCubicAbs",value:function(M,U,aa,pa,ma,La){this.addShape((this||Na).shapeCreator.cubicBezier((this||
Na).lastX,(this||Na).lastY,M,U,aa,pa,ma,La));(this||Na).lastX=ma;(this||Na).lastY=La;(this||Na).lastCommand="C"}},{key:"curvetoCubicRel",value:function(M,U,aa,pa,ma,La){this.addShape((this||Na).shapeCreator.cubicBezier((this||Na).lastX,(this||Na).lastY,(this||Na).lastX+M,(this||Na).lastY+U,(this||Na).lastX+aa,(this||Na).lastY+pa,(this||Na).lastX+ma,(this||Na).lastY+La));(this||Na).lastX+=ma;(this||Na).lastY+=La;(this||Na).lastCommand="c"}},{key:"linetoHorizontalAbs",value:function(M){this.addShape((this||
Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,M,(this||Na).lastY));(this||Na).lastX=M;(this||Na).lastCommand="H"}},{key:"linetoHorizontalRel",value:function(M){this.addShape((this||Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,(this||Na).lastX+M,(this||Na).lastY));(this||Na).lastX+=M;(this||Na).lastCommand="h"}},{key:"linetoAbs",value:function(M,U){this.addShape((this||Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,M,U));(this||Na).lastX=M;(this||Na).lastY=U;(this||Na).lastCommand=
"L"}},{key:"linetoRel",value:function(M,U){this.addShape((this||Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,(this||Na).lastX+M,(this||Na).lastY+U));(this||Na).lastX+=M;(this||Na).lastY+=U;(this||Na).lastCommand="l"}},{key:"movetoAbs",value:function(M,U){(this||Na).firstX=M;(this||Na).firstY=U;(this||Na).lastX=M;(this||Na).lastY=U;(this||Na).lastCommand="M"}},{key:"movetoRel",value:function(M,U){(this||Na).firstX+=M;(this||Na).firstY+=U;(this||Na).lastX+=M;(this||Na).lastY+=U;(this||Na).lastCommand=
"m"}},{key:"curvetoQuadraticAbs",value:function(M,U,aa,pa){this.addShape((this||Na).shapeCreator.quadraticBezier((this||Na).lastX,(this||Na).lastY,M,U,aa,pa));(this||Na).lastX=aa;(this||Na).lastY=pa;(this||Na).lastCommand="Q"}},{key:"curvetoQuadraticRel",value:function(M,U,aa,pa){this.addShape((this||Na).shapeCreator.quadraticBezier((this||Na).lastX,(this||Na).lastY,(this||Na).lastX+M,(this||Na).lastY+U,(this||Na).lastX+aa,(this||Na).lastY+pa));(this||Na).lastX+=aa;(this||Na).lastY+=pa;(this||Na).lastCommand=
"q"}},{key:"curvetoCubicSmoothAbs",value:function(M,U,aa,pa){if((this||Na).lastCommand.match(/^[SsCc]$/)){var ma=(this||Na).shapes[(this||Na).shapes.length-1].args[2];var La=2*(this||Na).lastX-ma.x;ma=2*(this||Na).lastY-ma.y}else La=(this||Na).lastX,ma=(this||Na).lastY;this.addShape((this||Na).shapeCreator.cubicBezier((this||Na).lastX,(this||Na).lastY,La,ma,M,U,aa,pa));(this||Na).lastX=aa;(this||Na).lastY=pa;(this||Na).lastCommand="S"}},{key:"curvetoCubicSmoothRel",value:function(M,U,aa,pa){if((this||
Na).lastCommand.match(/^[SsCc]$/)){var ma=(this||Na).shapes[(this||Na).shapes.length-1].args[2];var La=2*(this||Na).lastX-ma.x;ma=2*(this||Na).lastY-ma.y}else La=(this||Na).lastX,ma=(this||Na).lastY;this.addShape((this||Na).shapeCreator.cubicBezier((this||Na).lastX,(this||Na).lastY,La,ma,(this||Na).lastX+M,(this||Na).lastY+U,(this||Na).lastX+aa,(this||Na).lastY+pa));(this||Na).lastX+=aa;(this||Na).lastY+=pa;(this||Na).lastCommand="s"}},{key:"curvetoQuadraticSmoothAbs",value:function(M,U){if((this||
Na).lastCommand.match(/^[QqTt]$/)){var aa=(this||Na).shapes[(this||Na).shapes.length-1].args[1];var pa=2*(this||Na).lastX-aa.x;aa=2*(this||Na).lastY-aa.y}else pa=(this||Na).lastX,aa=(this||Na).lastY;this.addShape((this||Na).shapeCreator.quadraticBezier((this||Na).lastX,(this||Na).lastY,pa,aa,M,U));(this||Na).lastX=M;(this||Na).lastY=U;(this||Na).lastCommand="T"}},{key:"curvetoQuadraticSmoothRel",value:function(M,U){if((this||Na).lastCommand.match(/^[QqTt]$/)){var aa=(this||Na).shapes[(this||Na).shapes.length-
1].args[1];var pa=2*(this||Na).lastX-aa.x;aa=2*(this||Na).lastY-aa.y}else pa=(this||Na).lastX,aa=(this||Na).lastY;this.addShape((this||Na).shapeCreator.quadraticBezier((this||Na).lastX,(this||Na).lastY,pa,aa,(this||Na).lastX+M,(this||Na).lastY+U));(this||Na).lastX+=M;(this||Na).lastY+=U;(this||Na).lastCommand="t"}},{key:"linetoVerticalAbs",value:function(M){this.addShape((this||Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,(this||Na).lastX,M));(this||Na).lastY=M;(this||Na).lastCommand="V"}},
{key:"linetoVerticalRel",value:function(M){this.addShape((this||Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,(this||Na).lastX,(this||Na).lastY+M));(this||Na).lastY+=M;(this||Na).lastCommand="v"}},{key:"closePath",value:function(){this.addShape((this||Na).shapeCreator.line((this||Na).lastX,(this||Na).lastY,(this||Na).firstX,(this||Na).firstY));(this||Na).lastX=(this||Na).firstX;(this||Na).lastY=(this||Na).firstY;(this||Na).lastCommand="z"}}]);return Da}(),ka=.5*Math.PI,ea=new Y,la=function(){function Da(M,
U){k(this||Na,Da);(this||Na).name=M;(this||Na).args=U}e(Da,null,[{key:"arc",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<M;aa++)U[aa]=arguments[aa];M=C([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"],[["startRadians"],"Number"],[["endRadians"],"Number"]],U);return new Da(Da.ARC,M)}},{key:"quadraticBezier",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<M;aa++)U[aa]=arguments[aa];M=C([[["p1",["p1x","p1y"]],
"Point2D"],[["p2",["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"]],U);return new Da(Da.QUADRATIC_BEZIER,M)}},{key:"cubicBezier",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<M;aa++)U[aa]=arguments[aa];M=C([[["p1",["p1x","p1y"]],"Point2D"],[["p2",["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"],[["p4",["p4x","p4y"]],"Point2D"]],U);return new Da(Da.CUBIC_BEZIER,M)}},{key:"circle",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<M;aa++)U[aa]=arguments[aa];
M=C([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radius","r"],"Number"]],U);return new Da(Da.CIRCLE,M)}},{key:"ellipse",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<M;aa++)U[aa]=arguments[aa];M=C([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"]],U);return new Da(Da.ELLIPSE,M)}},{key:"line",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<M;aa++)U[aa]=arguments[aa];M=C([[["p1",["p1x","p1y"],
["x1","y1"]],"Point2D"],[["p2",["p2x","p2y"],["x2","y2"]],"Point2D"]],U);return new Da(Da.LINE,M)}},{key:"path",value:function(){ea.parseData(0>=arguments.length?void 0:arguments[0]);return new Da(Da.PATH,db.shapes)}},{key:"polygon",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<M;aa++)U[aa]=arguments[aa];M=C([[[],"Array<Point2D>"]],1===U.length&&Array.isArray(U[0])?U[0]:U);return new Da(Da.POLYGON,M)}},{key:"polyline",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<
M;aa++)U[aa]=arguments[aa];M=C([[[],"Array<Point2D>"]],1===U.length&&Array.isArray(U[0])?U[0]:U);return new Da(Da.POLYLINE,M)}},{key:"rectangle",value:function(){for(var M=arguments.length,U=Array(M),aa=0;aa<M;aa++)U[aa]=arguments[aa];M=C([[["topLeft",["x","y"],["left","top"]],"Point2D"],[["size",["width","height"],["w","h"]],"Point2D"],[["radiusX","rx"],"Optional<Number>"],[["radiusY","ry"],"Optional<Number>"]],U);U=M[0];aa=M[1];M[1]=new S(U.x+aa.x,U.y+aa.y);var pa=new Da(Da.RECTANGLE,M);M=pa.args.pop();
U=pa.args.pop();U=void 0===U?0:U;M=void 0===M?0:M;if(0===U&&0===M)return pa;var ma=pa.args[0];aa=ma.x;ma=ma.y;var La=pa.args[1];pa=La.x;La=La.y;var ib=pa-aa,ca=La-ma;0===U&&(U=M);0===M&&(M=U);U>.5*ib&&(U=.5*ib);M>.5*ca&&(M=.5*ca);ib=aa+U;ca=ma+M;var qa=pa-U,ra=La-M;M=[Da.arc(ib,ca,U,M,2*ka,3*ka),Da.line(ib,ma,qa,ma),Da.arc(qa,ca,U,M,3*ka,4*ka),Da.line(pa,ca,pa,ra),Da.arc(qa,ra,U,M,0,ka),Da.line(qa,La,ib,La),Da.arc(ib,ra,U,M,ka,2*ka),Da.line(aa,ra,aa,ca)];return new Da(Da.PATH,M)}}]);return Da}();
la.ARC="Arc";la.QUADRATIC_BEZIER="Bezier2";la.CUBIC_BEZIER="Bezier3";la.CIRCLE="Circle";la.ELLIPSE="Ellipse";la.LINE="Line";la.PATH="Path";la.POLYGON="Polygon";la.POLYLINE="Polyline";la.RECTANGLE="Rectangle";var db=new W(la);ea.setHandler(db);var ub=2*Math.PI,xa=new V(1,0),na=function(){function Da(M){k(this||Na,Da);this.init(M)}e(Da,[{key:"init",value:function(M){(this||Na).status=M;(this||Na).points=[]}},{key:"appendPoint",value:function(M){(this||Na).points.push(M)}},{key:"appendPoints",value:function(M){(this||
Na).points=(this||Na).points.concat(M)}}],[{key:"intersect",value:function(M,U){if(null!==M&&void 0!==M&&null!==U&&void 0!==U)if("Path"===M.name)var aa=Da.intersectPathShape(M,U);else if("Path"===U.name)aa=Da.intersectPathShape(U,M);else if("Arc"===M.name)aa=Da.intersectArcShape(M,U);else if("Arc"===U.name)aa=Da.intersectArcShape(U,M);else{M.name<U.name?(aa="intersect"+M.name+U.name,M=M.args.concat(U.args)):(aa="intersect"+U.name+M.name,M=U.args.concat(M.args));if(!(aa in Da))throw new TypeError("Intersection not available: "+
aa);aa=Da[aa].apply(null,M)}else aa=new Da("No Intersection");return aa}},{key:"intersectPathShape",value:function(M,U){var aa=new Da("No Intersection");M=w(M.args);var pa;try{for(M.s();!(pa=M.n()).done;){var ma=Da.intersect(pa.value,U);aa.appendPoints(ma.points)}}catch(La){M.e(La)}finally{M.f()}0<aa.points.length&&(aa.status="Intersection");return aa}},{key:"intersectArcShape",value:function(M,U){var aa=l(M.args,5);M=aa[0];var pa=aa[3],ma=aa[4];aa=new la(la.ELLIPSE,[M,aa[1],aa[2]]);U=Da.intersect(aa,
U);aa=ma;if(0===U.points.length)var La=U;else{ma=new na("No Intersection");aa<pa&&(aa=[aa,pa],pa=aa[0],aa=aa[1]);if(0>pa||0>aa)pa+=ub,aa+=ub;U=w(U.points);try{for(U.s();!(La=U.n()).done;){var ib=La.value,ca=xa.angleBetween(V.fromPoints(M,ib))%ub;var qa=0>ca?ca+ub:ca;qa<pa&&(qa+=ub);pa<=qa&&qa<=aa&&ma.appendPoint(ib)}}catch(ra){U.e(ra)}finally{U.f()}0<ma.points.length&&(ma.status="Intersection");La=ma}return La}},{key:"intersectBezier2Bezier2",value:function(M,U,aa,pa,ma,La){var ib=new Da("No Intersection");
var ca=U.multiply(-2);aa=M.add(ca.add(aa));ca=M.multiply(-2);var qa=U.multiply(2);U=ca.add(qa);M=new S(M.x,M.y);ca=ma.multiply(-2);La=pa.add(ca.add(La));ca=pa.multiply(-2);qa=ma.multiply(2);ma=ca.add(qa);pa=new S(pa.x,pa.y);ca=aa.x*U.y-U.x*aa.y;qa=La.x*U.y-U.x*La.y;var ra=La.x*aa.y-aa.x*La.y,Va=ma.x*aa.y-aa.x*ma.y,nb=aa.x*(M.y-pa.y)+aa.y*(-M.x+pa.x);ca=(new ua(-ra*ra,-2*ra*Va,ca*qa-Va*Va-2*ra*nb,ca*(ma.x*U.y-U.x*ma.y)-2*Va*nb,ca*(U.x*(M.y-pa.y)+U.y*(-M.x+pa.x))-nb*nb)).getRoots();ca=w(ca);var wc;
try{for(ca.s();!(wc=ca.n()).done;){var nc=wc.value;if(0<=nc&&1>=nc){var ac=new ua(aa.x,U.x,M.x-pa.x-nc*ma.x-nc*nc*La.x);ac.simplifyEquals();var qd=ac.getRoots(),id=new ua(aa.y,U.y,M.y-pa.y-nc*ma.y-nc*nc*La.y);id.simplifyEquals();var xe=id.getRoots();if(0<qd.length&&0<xe.length){var Ae=w(qd),hf;try{a:for(Ae.s();!(hf=Ae.n()).done;){var fg=hf.value;if(0<=fg&&1>=fg)for(qa=0;qa<xe.length;qa++)if(1E-4>Math.abs(fg-xe[qa])){ib.points.push(La.multiply(nc*nc).add(ma.multiply(nc).add(pa)));break a}}}catch(Mg){Ae.e(Mg)}finally{Ae.f()}}}}}catch(Mg){ca.e(Mg)}finally{ca.f()}0<
ib.points.length&&(ib.status="Intersection");return ib}},{key:"intersectBezier2Bezier3",value:function(M,U,aa,pa,ma,La,ib){var ca=new Da("No Intersection");var qa=U.multiply(-2);aa=M.add(qa.add(aa));qa=M.multiply(-2);var ra=U.multiply(2);U=qa.add(ra);M=new S(M.x,M.y);qa=pa.multiply(-1);ra=ma.multiply(3);var Va=La.multiply(-3);qa=qa.add(ra.add(Va.add(ib)));ib=new S(qa.x,qa.y);qa=pa.multiply(3);ra=ma.multiply(-6);Va=La.multiply(3);qa=qa.add(ra.add(Va));La=new S(qa.x,qa.y);qa=pa.multiply(-3);ra=ma.multiply(3);
Va=qa.add(ra);ma=new S(Va.x,Va.y);pa=new S(pa.x,pa.y);qa=U.x*U.x;ra=U.y*U.y;Va=aa.x*aa.x;var nb=aa.y*aa.y;qa=(new ua(-2*aa.x*aa.y*ib.x*ib.y+Va*ib.y*ib.y+nb*ib.x*ib.x,-2*aa.x*aa.y*La.x*ib.y-2*aa.x*aa.y*La.y*ib.x+2*nb*La.x*ib.x+2*Va*La.y*ib.y,-2*aa.x*ma.x*aa.y*ib.y-2*aa.x*aa.y*ma.y*ib.x-2*aa.x*aa.y*La.x*La.y+2*ma.x*nb*ib.x+nb*La.x*La.x+Va*(2*ma.y*ib.y+La.y*La.y),2*M.x*aa.x*aa.y*ib.y+2*M.y*aa.x*aa.y*ib.x+U.x*U.y*aa.x*ib.y+U.x*U.y*aa.y*ib.x-2*pa.x*aa.x*aa.y*ib.y-2*aa.x*pa.y*aa.y*ib.x-2*aa.x*ma.x*aa.y*
La.y-2*aa.x*aa.y*ma.y*La.x-2*M.x*nb*ib.x-2*M.y*Va*ib.y+2*pa.x*nb*ib.x+2*ma.x*nb*La.x-ra*aa.x*ib.x-qa*aa.y*ib.y+Va*(2*pa.y*ib.y+2*ma.y*La.y),2*M.x*aa.x*aa.y*La.y+2*M.y*aa.x*aa.y*La.x+U.x*U.y*aa.x*La.y+U.x*U.y*aa.y*La.x-2*pa.x*aa.x*aa.y*La.y-2*aa.x*pa.y*aa.y*La.x-2*aa.x*ma.x*aa.y*ma.y-2*M.x*nb*La.x-2*M.y*Va*La.y+2*pa.x*nb*La.x-ra*aa.x*La.x-qa*aa.y*La.y+ma.x*ma.x*nb+Va*(2*pa.y*La.y+ma.y*ma.y),2*M.x*aa.x*aa.y*ma.y+2*M.y*aa.x*ma.x*aa.y+U.x*U.y*aa.x*ma.y+U.x*U.y*ma.x*aa.y-2*pa.x*aa.x*aa.y*ma.y-2*aa.x*pa.y*
ma.x*aa.y-2*M.x*ma.x*nb-2*M.y*Va*ma.y+2*pa.x*ma.x*nb-ra*aa.x*ma.x-qa*aa.y*ma.y+2*Va*pa.y*ma.y,-2*M.x*M.y*aa.x*aa.y-M.x*U.x*U.y*aa.y-M.y*U.x*U.y*aa.x+2*M.x*aa.x*pa.y*aa.y+2*M.y*pa.x*aa.x*aa.y+U.x*pa.x*U.y*aa.y+U.x*U.y*aa.x*pa.y-2*pa.x*aa.x*pa.y*aa.y-2*M.x*pa.x*nb+M.x*ra*aa.x+M.y*qa*aa.y-2*M.y*Va*pa.y-pa.x*ra*aa.x-qa*pa.y*aa.y+M.x*M.x*nb+M.y*M.y*Va+pa.x*pa.x*nb+Va*pa.y*pa.y)).getRootsInInterval(0,1);qa=w(qa);var wc;try{for(qa.s();!(wc=qa.n()).done;){var nc=wc.value,ac=(new ua(aa.x,U.x,M.x-pa.x-nc*ma.x-
nc*nc*La.x-nc*nc*nc*ib.x)).getRoots(),qd=(new ua(aa.y,U.y,M.y-pa.y-nc*ma.y-nc*nc*La.y-nc*nc*nc*ib.y)).getRoots();if(0<ac.length&&0<qd.length){var id=w(ac),xe;try{a:for(id.s();!(xe=id.n()).done;){var Ae=xe.value;if(0<=Ae&&1>=Ae)for(ra=0;ra<qd.length;ra++)if(1E-4>Math.abs(Ae-qd[ra])){ca.points.push(ib.multiply(nc*nc*nc).add(La.multiply(nc*nc).add(ma.multiply(nc).add(pa))));break a}}}catch(hf){id.e(hf)}finally{id.f()}}}}catch(hf){qa.e(hf)}finally{qa.f()}0<ca.points.length&&(ca.status="Intersection");
return ca}},{key:"intersectBezier2Circle",value:function(M,U,aa,pa,ma){return Da.intersectBezier2Ellipse(M,U,aa,pa,ma,ma)}},{key:"intersectBezier2Ellipse",value:function(M,U,aa,pa,ma,La){var ib=new Da("No Intersection");var ca=U.multiply(-2);aa=M.add(ca.add(aa));ca=M.multiply(-2);U=U.multiply(2);ca=ca.add(U);M=new S(M.x,M.y);ma*=ma;La*=La;pa=(new ua(La*aa.x*aa.x+ma*aa.y*aa.y,2*(La*aa.x*ca.x+ma*aa.y*ca.y),La*(2*aa.x*M.x+ca.x*ca.x)+ma*(2*aa.y*M.y+ca.y*ca.y)-2*(La*pa.x*aa.x+ma*pa.y*aa.y),2*(La*ca.x*
(M.x-pa.x)+ma*ca.y*(M.y-pa.y)),La*(M.x*M.x+pa.x*pa.x)+ma*(M.y*M.y+pa.y*pa.y)-2*(La*pa.x*M.x+ma*pa.y*M.y)-ma*La)).getRoots();pa=w(pa);var qa;try{for(pa.s();!(qa=pa.n()).done;){var ra=qa.value;0<=ra&&1>=ra&&ib.points.push(aa.multiply(ra*ra).add(ca.multiply(ra).add(M)))}}catch(Va){pa.e(Va)}finally{pa.f()}0<ib.points.length&&(ib.status="Intersection");return ib}},{key:"intersectBezier2Line",value:function(M,U,aa,pa,ma){var La=pa.min(ma),ib=pa.max(ma),ca=new Da("No Intersection");var qa=U.multiply(-2);
var ra=M.add(qa.add(aa));qa=M.multiply(-2);var Va=U.multiply(2);qa=qa.add(Va);Va=new S(M.x,M.y);var nb=new V(pa.y-ma.y,ma.x-pa.x),wc=pa.x*ma.y-ma.x*pa.y;ra=(new ua(nb.dot(ra),nb.dot(qa),nb.dot(Va)+wc)).getRoots();ra=w(ra);var nc;try{for(ra.s();!(nc=ra.n()).done;){var ac=nc.value;if(0<=ac&&1>=ac){var qd=M.lerp(U,ac),id=U.lerp(aa,ac),xe=qd.lerp(id,ac);pa.x===ma.x?La.y<=xe.y&&xe.y<=ib.y&&(ca.status="Intersection",ca.appendPoint(xe)):pa.y===ma.y?La.x<=xe.x&&xe.x<=ib.x&&(ca.status="Intersection",ca.appendPoint(xe)):
La.x<=xe.x&&xe.x<=ib.x&&La.y<=xe.y&&xe.y<=ib.y&&(ca.status="Intersection",ca.appendPoint(xe))}}}catch(Ae){ra.e(Ae)}finally{ra.f()}return ca}},{key:"intersectBezier2Polygon",value:function(M,U,aa,pa){return Da.intersectBezier2Polyline(M,U,aa,I(pa))}},{key:"intersectBezier2Polyline",value:function(M,U,aa,pa){for(var ma=new Da("No Intersection"),La=pa.length,ib=0;ib<La-1;ib++){var ca=Da.intersectBezier2Line(M,U,aa,pa[ib],pa[ib+1]);ma.appendPoints(ca.points)}0<ma.points.length&&(ma.status="Intersection");
return ma}},{key:"intersectBezier2Rectangle",value:function(M,U,aa,pa,ma){var La=pa.min(ma),ib=pa.max(ma);ma=new S(ib.x,La.y);var ca=new S(La.x,ib.y);pa=Da.intersectBezier2Line(M,U,aa,La,ma);ma=Da.intersectBezier2Line(M,U,aa,ma,ib);ib=Da.intersectBezier2Line(M,U,aa,ib,ca);M=Da.intersectBezier2Line(M,U,aa,ca,La);U=new Da("No Intersection");U.appendPoints(pa.points);U.appendPoints(ma.points);U.appendPoints(ib.points);U.appendPoints(M.points);0<U.points.length&&(U.status="Intersection");return U}},{key:"intersectBezier3Bezier3",
value:function(M,U,aa,pa,ma,La,ib,ca){var qa=new Da("No Intersection");var ra=M.multiply(-1);var Va=U.multiply(3);var nb=aa.multiply(-3);nb=ra.add(Va.add(nb.add(pa)));pa=new S(nb.x,nb.y);ra=M.multiply(3);Va=U.multiply(-6);nb=aa.multiply(3);nb=ra.add(Va.add(nb));aa=new S(nb.x,nb.y);ra=M.multiply(-3);Va=U.multiply(3);nb=ra.add(Va);U=new S(nb.x,nb.y);M=new S(M.x,M.y);ra=ma.multiply(-1);Va=La.multiply(3);nb=ib.multiply(-3);nb=ra.add(Va.add(nb.add(ca)));ca=new S(nb.x,nb.y);ra=ma.multiply(3);Va=La.multiply(-6);
nb=ib.multiply(3);nb=ra.add(Va.add(nb));ib=new S(nb.x,nb.y);ra=ma.multiply(-3);Va=La.multiply(3);nb=ra.add(Va);La=new S(nb.x,nb.y);ma=new S(ma.x,ma.y);ra=pa.x*aa.y-aa.x*pa.y;Va=pa.x*U.y-U.x*pa.y;var wc=pa.x*M.y-M.x*pa.y+ma.x*pa.y-pa.x*ma.y,nc=La.x*pa.y-pa.x*La.y,ac=ib.x*pa.y-pa.x*ib.y,qd=ca.x*pa.y-pa.x*ca.y;nb=pa.x*U.y-U.x*pa.y;var id=pa.x*M.y+aa.x*U.y-U.x*aa.y-M.x*pa.y+ma.x*pa.y-pa.x*ma.y,xe=La.x*pa.y-pa.x*La.y,Ae=ib.x*pa.y-pa.x*ib.y,hf=ca.x*pa.y-pa.x*ca.y,fg=aa.x*M.y-M.x*aa.y+ma.x*aa.y-aa.x*ma.y,
Mg=La.x*aa.y-aa.x*La.y,pg=ib.x*aa.y-aa.x*ib.y,vh=ca.x*aa.y-aa.x*ca.y,xg=pa.x*M.y-M.x*pa.y+ma.x*pa.y-pa.x*ma.y,Ff=La.x*pa.y-pa.x*La.y,gg=ib.x*pa.y-pa.x*ib.y,yg=ca.x*pa.y-pa.x*ca.y,rh=aa.x*M.y-M.x*aa.y+ma.x*aa.y-aa.x*ma.y,Lh=La.x*aa.y-aa.x*La.y,Pl=ib.x*aa.y-aa.x*ib.y,Vc=ca.x*aa.y-aa.x*ca.y,Yc=U.x*M.y-M.x*U.y+ma.x*U.y-U.x*ma.y,En=La.x*U.y-U.x*La.y,Om=ib.x*U.y-U.x*ib.y,nm=ca.x*U.y-U.x*ca.y;ra=new ua(-qd*hf*yg,-qd*hf*gg-qd*Ae*yg-ac*hf*yg,-qd*hf*Ff-qd*Ae*gg-ac*hf*gg-qd*xe*yg-ac*Ae*yg-nc*hf*yg,-qd*hf*xg-
qd*Ae*Ff-ac*hf*Ff-qd*xe*gg-ac*Ae*gg-nc*hf*gg-qd*id*yg-ac*xe*yg-nc*Ae*yg-wc*hf*yg+Va*vh*yg+qd*nb*Vc-ra*vh*Vc+ra*hf*nm,-qd*Ae*xg-ac*hf*xg-qd*xe*Ff-ac*Ae*Ff-nc*hf*Ff-qd*id*gg-ac*xe*gg-nc*Ae*gg-wc*hf*gg+Va*vh*gg-ac*id*yg-nc*xe*yg-wc*Ae*yg+Va*pg*yg+qd*nb*Pl-ra*vh*Pl+ac*nb*Vc-ra*pg*Vc+ra*hf*Om+ra*Ae*nm,-qd*xe*xg-ac*Ae*xg-nc*hf*xg-qd*id*Ff-ac*xe*Ff-nc*Ae*Ff-wc*hf*Ff+Va*vh*Ff-ac*id*gg-nc*xe*gg-wc*Ae*gg+Va*pg*gg-nc*id*yg-wc*xe*yg+Va*Mg*yg+qd*nb*Lh-ra*vh*Lh+ac*nb*Pl-ra*pg*Pl+nc*nb*Vc-ra*Mg*Vc+ra*hf*En+ra*Ae*
Om+ra*xe*nm,-qd*id*xg-ac*xe*xg-nc*Ae*xg-wc*hf*xg+Va*vh*xg-ac*id*Ff-nc*xe*Ff-wc*Ae*Ff+Va*pg*Ff-nc*id*gg-wc*xe*gg+Va*Mg*gg-wc*id*yg+Va*fg*yg+qd*nb*rh-ra*vh*rh+ac*nb*Lh-ra*pg*Lh+nc*nb*Pl-ra*Mg*Pl+wc*nb*Vc-ra*fg*Vc+ra*hf*Yc+ra*Ae*En+ra*xe*Om-Va*nb*nm+ra*id*nm,-ac*id*xg-nc*xe*xg-wc*Ae*xg+Va*pg*xg-nc*id*Ff-wc*xe*Ff+Va*Mg*Ff-wc*id*gg+Va*fg*gg+ac*nb*rh-ra*pg*rh+nc*nb*Lh-ra*Mg*Lh+wc*nb*Pl-ra*fg*Pl+ra*Ae*Yc+ra*xe*En-Va*nb*Om+ra*id*Om,-nc*id*xg-wc*xe*xg+Va*Mg*xg-wc*id*Ff+Va*fg*Ff+nc*nb*rh-ra*Mg*rh+wc*nb*Lh-
ra*fg*Lh+ra*xe*Yc-Va*nb*En+ra*id*En,-wc*id*xg+Va*fg*xg+wc*nb*rh-ra*fg*rh-Va*nb*Yc+ra*id*Yc);ra.simplifyEquals();ra=ra.getRootsInInterval(0,1);ra=w(ra);var ls;try{for(ra.s();!(ls=ra.n()).done;){var jj=ls.value,ms=new ua(pa.x,aa.x,U.x,M.x-ma.x-jj*La.x-jj*jj*ib.x-jj*jj*jj*ca.x);ms.simplifyEquals();var ns=ms.getRoots(),os=new ua(pa.y,aa.y,U.y,M.y-ma.y-jj*La.y-jj*jj*ib.y-jj*jj*jj*ca.y);os.simplifyEquals();var Lq=os.getRoots();if(0<ns.length&&0<Lq.length){var Fx=w(ns),iB;try{a:for(Fx.s();!(iB=Fx.n()).done;){var Ex=
iB.value;if(0<=Ex&&1>=Ex)for(Va=0;Va<Lq.length;Va++)if(1E-4>Math.abs(Ex-Lq[Va])){qa.points.push(ca.multiply(jj*jj*jj).add(ib.multiply(jj*jj).add(La.multiply(jj).add(ma))));break a}}}catch(Gu){Fx.e(Gu)}finally{Fx.f()}}}}catch(Gu){ra.e(Gu)}finally{ra.f()}0<qa.points.length&&(qa.status="Intersection");return qa}},{key:"intersectBezier3Circle",value:function(M,U,aa,pa,ma,La){return Da.intersectBezier3Ellipse(M,U,aa,pa,ma,La,La)}},{key:"intersectBezier3Ellipse",value:function(M,U,aa,pa,ma,La,ib){var ca=
new Da("No Intersection");var qa=M.multiply(-1);var ra=U.multiply(3);var Va=aa.multiply(-3);qa=qa.add(ra.add(Va.add(pa)));pa=new S(qa.x,qa.y);qa=M.multiply(3);ra=U.multiply(-6);Va=aa.multiply(3);qa=qa.add(ra.add(Va));aa=new S(qa.x,qa.y);qa=M.multiply(-3);ra=U.multiply(3);Va=qa.add(ra);U=new S(Va.x,Va.y);M=new S(M.x,M.y);La*=La;ib*=ib;ma=(new ua(pa.x*pa.x*ib+pa.y*pa.y*La,2*(pa.x*aa.x*ib+pa.y*aa.y*La),2*(pa.x*U.x*ib+pa.y*U.y*La)+aa.x*aa.x*ib+aa.y*aa.y*La,2*pa.x*ib*(M.x-ma.x)+2*pa.y*La*(M.y-ma.y)+2*
(aa.x*U.x*ib+aa.y*U.y*La),2*aa.x*ib*(M.x-ma.x)+2*aa.y*La*(M.y-ma.y)+U.x*U.x*ib+U.y*U.y*La,2*U.x*ib*(M.x-ma.x)+2*U.y*La*(M.y-ma.y),M.x*M.x*ib-2*M.y*ma.y*La-2*M.x*ma.x*ib+M.y*M.y*La+ma.x*ma.x*ib+ma.y*ma.y*La-La*ib)).getRootsInInterval(0,1);ma=w(ma);var nb;try{for(ma.s();!(nb=ma.n()).done;){var wc=nb.value;ca.points.push(pa.multiply(wc*wc*wc).add(aa.multiply(wc*wc).add(U.multiply(wc).add(M))))}}catch(nc){ma.e(nc)}finally{ma.f()}0<ca.points.length&&(ca.status="Intersection");return ca}},{key:"intersectBezier3Line",
value:function(M,U,aa,pa,ma,La){var ib=ma.min(La),ca=ma.max(La),qa=new Da("No Intersection");var ra=M.multiply(-1);var Va=U.multiply(3);var nb=aa.multiply(-3);var wc=ra.add(Va.add(nb.add(pa)));var nc=new V(wc.x,wc.y);ra=M.multiply(3);Va=U.multiply(-6);nb=aa.multiply(3);wc=ra.add(Va.add(nb));wc=new V(wc.x,wc.y);ra=M.multiply(-3);Va=U.multiply(3);nb=ra.add(Va);ra=new V(nb.x,nb.y);Va=new V(M.x,M.y);nb=new V(ma.y-La.y,La.x-ma.x);var ac=ma.x*La.y-La.x*ma.y;nc=(new ua(nb.dot(nc),nb.dot(wc),nb.dot(ra),nb.dot(Va)+
ac)).getRoots();nc=w(nc);var qd;try{for(nc.s();!(qd=nc.n()).done;){var id=qd.value;if(0<=id&&1>=id){var xe=M.lerp(U,id),Ae=U.lerp(aa,id),hf=aa.lerp(pa,id),fg=xe.lerp(Ae,id),Mg=Ae.lerp(hf,id),pg=fg.lerp(Mg,id);ma.x===La.x?ib.y<=pg.y&&pg.y<=ca.y&&(qa.status="Intersection",qa.appendPoint(pg)):ma.y===La.y?ib.x<=pg.x&&pg.x<=ca.x&&(qa.status="Intersection",qa.appendPoint(pg)):ib.x<=pg.x&&pg.x<=ca.x&&ib.y<=pg.y&&pg.y<=ca.y&&(qa.status="Intersection",qa.appendPoint(pg))}}}catch(vh){nc.e(vh)}finally{nc.f()}return qa}},
{key:"intersectBezier3Polygon",value:function(M,U,aa,pa,ma){return Da.intersectBezier3Polyline(M,U,aa,pa,I(ma))}},{key:"intersectBezier3Polyline",value:function(M,U,aa,pa,ma){for(var La=new Da("No Intersection"),ib=ma.length,ca=0;ca<ib-1;ca++){var qa=Da.intersectBezier3Line(M,U,aa,pa,ma[ca],ma[ca+1]);La.appendPoints(qa.points)}0<La.points.length&&(La.status="Intersection");return La}},{key:"intersectBezier3Rectangle",value:function(M,U,aa,pa,ma,La){var ib=ma.min(La),ca=ma.max(La);La=new S(ca.x,ib.y);
var qa=new S(ib.x,ca.y);ma=Da.intersectBezier3Line(M,U,aa,pa,ib,La);La=Da.intersectBezier3Line(M,U,aa,pa,La,ca);ca=Da.intersectBezier3Line(M,U,aa,pa,ca,qa);M=Da.intersectBezier3Line(M,U,aa,pa,qa,ib);U=new Da("No Intersection");U.appendPoints(ma.points);U.appendPoints(La.points);U.appendPoints(ca.points);U.appendPoints(M.points);0<U.points.length&&(U.status="Intersection");return U}},{key:"intersectCircleCircle",value:function(M,U,aa,pa){var ma=U+pa;var La=Math.abs(U-pa),ib=M.distanceFrom(aa);ib>ma?
ma=new Da("Outside"):ib<La?ma=new Da("Inside"):(ma=new Da("Intersection"),pa=(U*U-pa*pa+ib*ib)/(2*ib),U=Math.sqrt(U*U-pa*pa),pa=M.lerp(aa,pa/ib),ib=U/ib,ma.points.push(new S(pa.x-ib*(aa.y-M.y),pa.y+ib*(aa.x-M.x))),ma.points.push(new S(pa.x+ib*(aa.y-M.y),pa.y-ib*(aa.x-M.x))));return ma}},{key:"intersectCircleEllipse",value:function(M,U,aa,pa,ma){return Da.intersectEllipseEllipse(M,U,U,aa,pa,ma)}},{key:"intersectCircleLine",value:function(M,U,aa,pa){var ma=(pa.x-aa.x)*(pa.x-aa.x)+(pa.y-aa.y)*(pa.y-
aa.y);var La=2*((pa.x-aa.x)*(aa.x-M.x)+(pa.y-aa.y)*(aa.y-M.y));M=La*La-4*ma*(M.x*M.x+M.y*M.y+aa.x*aa.x+aa.y*aa.y-2*(M.x*aa.x+M.y*aa.y)-U*U);0>M?ma=new Da("Outside"):0===M?ma=new Da("Tangent"):(U=Math.sqrt(M),M=(-La+U)/(2*ma),La=(-La-U)/(2*ma),(0>M||1<M)&&(0>La||1<La)?ma=0>M&&0>La||1<M&&1<La?new Da("Outside"):new Da("Inside"):(ma=new Da("Intersection"),0<=M&&1>=M&&ma.points.push(aa.lerp(pa,M)),0<=La&&1>=La&&ma.points.push(aa.lerp(pa,La))));return ma}},{key:"intersectCirclePolygon",value:function(M,
U,aa){return Da.intersectCirclePolyline(M,U,I(aa))}},{key:"intersectCirclePolyline",value:function(M,U,aa){for(var pa=new Da("No Intersection"),ma=aa.length,La,ib=0;ib<ma-1;ib++)La=Da.intersectCircleLine(M,U,aa[ib],aa[ib+1]),pa.appendPoints(La.points);pa.status=0<pa.points.length?"Intersection":La.status;return pa}},{key:"intersectCircleRectangle",value:function(M,U,aa,pa){var ma=aa.min(pa),La=aa.max(pa);pa=new S(La.x,ma.y);var ib=new S(ma.x,La.y);aa=Da.intersectCircleLine(M,U,ma,pa);pa=Da.intersectCircleLine(M,
U,pa,La);La=Da.intersectCircleLine(M,U,La,ib);M=Da.intersectCircleLine(M,U,ib,ma);U=new Da("No Intersection");U.appendPoints(aa.points);U.appendPoints(pa.points);U.appendPoints(La.points);U.appendPoints(M.points);U.status=0<U.points.length?"Intersection":aa.status;return U}},{key:"intersectEllipseEllipse",value:function(M,U,aa,pa,ma,La){M=[aa*aa,0,U*U,-2*aa*aa*M.x,-2*U*U*M.y,aa*aa*M.x*M.x+U*U*M.y*M.y-U*U*aa*aa];pa=[La*La,0,ma*ma,-2*La*La*pa.x,-2*ma*ma*pa.y,La*La*pa.x*pa.x+ma*ma*pa.y*pa.y-ma*ma*La*
La];ma=M[0]*pa[1]-pa[0]*M[1];La=M[0]*pa[2]-pa[0]*M[2];U=M[0]*pa[3]-pa[0]*M[3];aa=M[0]*pa[4]-pa[0]*M[4];var ib=M[0]*pa[5]-pa[0]*M[5],ca=M[1]*pa[2]-pa[1]*M[2],qa=M[3]*pa[5]-pa[3]*M[5],ra=M[1]*pa[5]-pa[1]*M[5]+(M[3]*pa[4]-pa[3]*M[4]),Va=M[1]*pa[4]-pa[1]*M[4]-(M[2]*pa[3]-pa[2]*M[3]);ma=(new ua(ma*ca-La*La,ma*Va+U*ca-2*La*aa,ma*ra+U*Va-aa*aa-2*La*ib,ma*qa+U*ra-2*aa*ib,U*qa-ib*ib)).getRoots();La=.001*(M[0]*M[0]+2*M[1]*M[1]+M[2]*M[2]);U=.001*(pa[0]*pa[0]+2*pa[1]*pa[1]+pa[2]*pa[2]);aa=new Da("No Intersection");
for(ib=0;ib<ma.length;ib++)for(ca=(new ua(M[0],M[3]+ma[ib]*M[1],M[5]+ma[ib]*(M[4]+ma[ib]*M[2]))).getRoots(),qa=0;qa<ca.length;qa++)ra=(M[0]*ca[qa]+M[1]*ma[ib]+M[3])*ca[qa]+(M[2]*ma[ib]+M[4])*ma[ib]+M[5],Math.abs(ra)<La&&(ra=(pa[0]*ca[qa]+pa[1]*ma[ib]+pa[3])*ca[qa]+(pa[2]*ma[ib]+pa[4])*ma[ib]+pa[5],Math.abs(ra)<U&&aa.appendPoint(new S(ca[qa],ma[ib])));0<aa.points.length&&(aa.status="Intersection");return aa}},{key:"intersectEllipseLine",value:function(M,U,aa,pa,ma){var La=new V(pa.x,pa.y);var ib=V.fromPoints(pa,
ma);M=new V(M.x,M.y);M=La.subtract(M);La=new V(ib.x/(U*U),ib.y/(aa*aa));aa=new V(M.x/(U*U),M.y/(aa*aa));U=ib.dot(La);ib=ib.dot(aa);M=M.dot(aa)-1;aa=ib*ib-U*M;0>aa?ib=new Da("Outside"):0<aa?(M=Math.sqrt(aa),aa=(-ib-M)/U,U=(-ib+M)/U,(0>aa||1<aa)&&(0>U||1<U)?ib=0>aa&&0>U||1<aa&&1<U?new Da("Outside"):new Da("Inside"):(ib=new Da("Intersection"),0<=aa&&1>=aa&&ib.appendPoint(pa.lerp(ma,aa)),0<=U&&1>=U&&ib.appendPoint(pa.lerp(ma,U)))):(U=-ib/U,0<=U&&1>=U?(ib=new Da("Intersection"),ib.appendPoint(pa.lerp(ma,
U))):ib=new Da("Outside"));return ib}},{key:"intersectEllipsePolygon",value:function(M,U,aa,pa){return Da.intersectEllipsePolyline(M,U,aa,I(pa))}},{key:"intersectEllipsePolyline",value:function(M,U,aa,pa){for(var ma=new Da("No Intersection"),La=pa.length,ib=0;ib<La-1;ib++){var ca=Da.intersectEllipseLine(M,U,aa,pa[ib],pa[ib+1]);ma.appendPoints(ca.points)}0<ma.points.length&&(ma.status="Intersection");return ma}},{key:"intersectEllipseRectangle",value:function(M,U,aa,pa,ma){var La=pa.min(ma),ib=pa.max(ma);
ma=new S(ib.x,La.y);var ca=new S(La.x,ib.y);pa=Da.intersectEllipseLine(M,U,aa,La,ma);ma=Da.intersectEllipseLine(M,U,aa,ma,ib);ib=Da.intersectEllipseLine(M,U,aa,ib,ca);M=Da.intersectEllipseLine(M,U,aa,ca,La);U=new Da("No Intersection");U.appendPoints(pa.points);U.appendPoints(ma.points);U.appendPoints(ib.points);U.appendPoints(M.points);0<U.points.length&&(U.status="Intersection");return U}},{key:"intersectLineLine",value:function(M,U,aa,pa){var ma=(pa.x-aa.x)*(M.y-aa.y)-(pa.y-aa.y)*(M.x-aa.x);var La=
(U.x-M.x)*(M.y-aa.y)-(U.y-M.y)*(M.x-aa.x);aa=(pa.y-aa.y)*(U.x-M.x)-(pa.x-aa.x)*(U.y-M.y);0!==aa?(ma/=aa,La/=aa,0<=ma&&1>=ma&&0<=La&&1>=La?(La=new Da("Intersection"),La.points.push(new S(M.x+ma*(U.x-M.x),M.y+ma*(U.y-M.y)))):La=new Da("No Intersection")):La=0===ma||0===La?new Da("Coincident"):new Da("Parallel");return La}},{key:"intersectLinePolygon",value:function(M,U,aa){return Da.intersectLinePolyline(M,U,I(aa))}},{key:"intersectLinePolyline",value:function(M,U,aa){for(var pa=new Da("No Intersection"),
ma=aa.length,La=0;La<ma-1;La++){var ib=Da.intersectLineLine(M,U,aa[La],aa[La+1]);pa.appendPoints(ib.points)}0<pa.points.length&&(pa.status="Intersection");return pa}},{key:"intersectLineRectangle",value:function(M,U,aa,pa){var ma=aa.min(pa),La=aa.max(pa);pa=new S(La.x,ma.y);var ib=new S(ma.x,La.y);aa=Da.intersectLineLine(ma,pa,M,U);pa=Da.intersectLineLine(pa,La,M,U);La=Da.intersectLineLine(La,ib,M,U);M=Da.intersectLineLine(ib,ma,M,U);U=new Da("No Intersection");U.appendPoints(aa.points);U.appendPoints(pa.points);
U.appendPoints(La.points);U.appendPoints(M.points);0<U.points.length&&(U.status="Intersection");return U}},{key:"intersectPolygonPolygon",value:function(M,U){return Da.intersectPolylinePolyline(I(M),I(U))}},{key:"intersectPolygonPolyline",value:function(M,U){return Da.intersectPolylinePolyline(I(M),U)}},{key:"intersectPolygonRectangle",value:function(M,U,aa){return Da.intersectPolylineRectangle(I(M),U,aa)}},{key:"intersectPolylinePolyline",value:function(M,U){for(var aa=new Da("No Intersection"),
pa=M.length,ma=0;ma<pa-1;ma++){var La=Da.intersectLinePolyline(M[ma],M[ma+1],U);aa.appendPoints(La.points)}0<aa.points.length&&(aa.status="Intersection");return aa}},{key:"intersectPolylineRectangle",value:function(M,U,aa){var pa=U.min(aa),ma=U.max(aa);aa=new S(ma.x,pa.y);var La=new S(pa.x,ma.y);U=Da.intersectLinePolyline(pa,aa,M);aa=Da.intersectLinePolyline(aa,ma,M);ma=Da.intersectLinePolyline(ma,La,M);M=Da.intersectLinePolyline(La,pa,M);pa=new Da("No Intersection");pa.appendPoints(U.points);pa.appendPoints(aa.points);
pa.appendPoints(ma.points);pa.appendPoints(M.points);0<pa.points.length&&(pa.status="Intersection");return pa}},{key:"intersectRectangleRectangle",value:function(M,U,aa,pa){var ma=M.min(U),La=M.max(U);U=new S(La.x,ma.y);var ib=new S(ma.x,La.y);M=Da.intersectLineRectangle(ma,U,aa,pa);U=Da.intersectLineRectangle(U,La,aa,pa);La=Da.intersectLineRectangle(La,ib,aa,pa);aa=Da.intersectLineRectangle(ib,ma,aa,pa);pa=new Da("No Intersection");pa.appendPoints(M.points);pa.appendPoints(U.points);pa.appendPoints(La.points);
pa.appendPoints(aa.points);0<pa.points.length&&(pa.status="Intersection");return pa}},{key:"intersectRayRay",value:function(M,U,aa,pa){var ma=(pa.x-aa.x)*(M.y-aa.y)-(pa.y-aa.y)*(M.x-aa.x);var La=(U.x-M.x)*(M.y-aa.y)-(U.y-M.y)*(M.x-aa.x);aa=(pa.y-aa.y)*(U.x-M.x)-(pa.x-aa.x)*(U.y-M.y);0!==aa?(La=ma/aa,ma=new Da("Intersection"),ma.points.push(new S(M.x+La*(U.x-M.x),M.y+La*(U.y-M.y)))):ma=0===ma||0===La?new Da("Coincident"):new Da("Parallel");return ma}}]);return Da}();Y=function(){function Da(){k(this||
Na,Da)}e(Da,null,[{key:"arc",value:function(M,U,aa,pa,ma,La){return la.arc.apply(la,arguments)}},{key:"quadraticBezier",value:function(M,U,aa,pa,ma,La){return la.quadraticBezier.apply(la,arguments)}},{key:"cubicBezier",value:function(M,U,aa,pa,ma,La,ib,ca){return la.cubicBezier.apply(la,arguments)}},{key:"circle",value:function(M,U,aa){return la.circle.apply(la,arguments)}},{key:"ellipse",value:function(M,U,aa,pa){return la.ellipse.apply(la,arguments)}},{key:"line",value:function(M,U,aa,pa){return la.line.apply(la,
arguments)}},{key:"path",value:function(M){return la.path.apply(la,arguments)}},{key:"polygon",value:function(M){return la.polygon.apply(la,arguments)}},{key:"polyline",value:function(M){return la.polyline.apply(la,arguments)}},{key:"rectangle",value:function(M,U,aa,pa){return la.rectangle.apply(la,arguments)}}]);return Da}();W=function(){function Da(){k(this||Na,Da)}e(Da,null,[{key:"arc",value:function(M,U,aa,pa,ma){return la.arc.apply(la,arguments)}},{key:"quadraticBezier",value:function(M,U,aa){return la.quadraticBezier.apply(la,
arguments)}},{key:"cubicBezier",value:function(M,U,aa,pa){return la.cubicBezier.apply(la,arguments)}},{key:"circle",value:function(M,U){return la.circle.apply(la,arguments)}},{key:"ellipse",value:function(M,U,aa){return la.ellipse.apply(la,arguments)}},{key:"line",value:function(M,U){return la.line.apply(la,arguments)}},{key:"path",value:function(M){return la.path.apply(la,arguments)}},{key:"polygon",value:function(M){return la.polygon.apply(la,arguments)}},{key:"polyline",value:function(M){return la.polyline.apply(la,
arguments)}},{key:"rectangle",value:function(M,U){return la.rectangle.apply(la,arguments)}}]);return Da}();var Aa=function(){function Da(){k(this||Na,Da)}e(Da,null,[{key:"circle",value:function(M){if(!1===M instanceof SVGCircleElement)throw new TypeError("Expected SVGCircleElement, but found ".concat(M));var U=new S(M.cx.baseVal.value,M.cy.baseVal.value);return la.circle(U,M.r.baseVal.value)}},{key:"ellipse",value:function(M){if(!1===M instanceof SVGEllipseElement)throw new TypeError("Expected SVGEllipseElement, but found ".concat(M));
var U=new S(M.cx.baseVal.value,M.cy.baseVal.value);return la.ellipse(U,M.rx.baseVal.value,M.ry.baseVal.value)}},{key:"line",value:function(M){if(!1===M instanceof SVGLineElement)throw new TypeError("Expected SVGLineElement, but found ".concat(M));var U=new S(M.x1.baseVal.value,M.y1.baseVal.value);M=new S(M.x2.baseVal.value,M.y2.baseVal.value);return la.line(U,M)}},{key:"path",value:function(M){if(!1===M instanceof SVGPathElement)throw new TypeError("Expected SVGPathElement, but found ".concat(M));
M=M.getAttributeNS(null,"d");return la.path(M)}},{key:"polygon",value:function(M){if(!1===M instanceof SVGPolygonElement)throw new TypeError("Expected SVGPolygonElement, but found ".concat(M));for(var U=[],aa=0;aa<M.points.numberOfItems;aa++){var pa=M.points.getItem(aa);U.push(new S(pa.x,pa.y))}return la.polygon(U)}},{key:"polyline",value:function(M){if(!1===M instanceof SVGPolylineElement)throw new TypeError("Expected SVGPolylineElement, but found ".concat(M));for(var U=[],aa=0;aa<M.points.numberOfItems;aa++){var pa=
M.points.getItem(aa);U.push(new S(pa.x,pa.y))}return la.polyline(U)}},{key:"rect",value:function(M){if(!1===M instanceof SVGRectElement)throw new TypeError("Expected SVGRectElement, but found ".concat(M));return la.rectangle(M.x.baseVal.value,M.y.baseVal.value,M.width.baseVal.value,M.height.baseVal.value,M.rx.baseVal.value,M.ry.baseVal.value)}},{key:"element",value:function(M){if(!1===M instanceof SVGElement)throw new TypeError("Expected SVGElement, but found ".concat(M));var U=M.tagName;switch(U){case "circle":return Da.circle(M);
case "ellipse":return Da.ellipse(M);case "line":return Da.line(M);case "path":return Da.path(M);case "polygon":return Da.polygon(M);case "polyline":return Da.polyline(M);case "rect":return Da.rect(M);default:throw new TypeError("Unrecognized element type: '".concat(U,"'"));}}}]);return Da}(),Pa={pointInCircle:function(Da,M,U){return V.fromPoints(M,Da).length()<=U},pointInEllipse:function(Da,M,U,aa){Da=Da.subtract(M);return 1>=Da.x*Da.x/(U*U)+Da.y*Da.y/(aa*aa)},pointInPolyline:function(Da,M){for(var U=
M.length,aa=0,pa,ma=M[0],La=1;La<=U;La++){var ib=M[La%U];pa=Math.min(ma.y,ib.y);var ca=Math.max(ma.y,ib.y),qa=Math.max(ma.x,ib.x);ma.y!==ib.y&&pa<Da.y&&Da.y<=ca&&Da.x<=qa&&(pa=(Da.y-ma.y)*(ib.x-ma.x)/(ib.y-ma.y)+ma.x,(ma.x===ib.x||Da.x<=pa)&&aa++);ma=ib}return 1===aa%2}};Pa.pointInPolygon=Pa.pointInPolyline;Pa.pointInRectangle=function(Da,M,U){return M.x<=Da.x&&Da.x<U.x&&M.y<=Da.y&&Da.y<U.y};a.AffineShapes=W;a.Intersection=na;a.IntersectionArgs=la;a.IntersectionQuery=Pa;a.Matrix2D=ba;a.Point2D=S;
a.ShapeInfo=la;a.Shapes=Y;a.SvgShapes=Aa;a.Vector2D=V;Object.defineProperty(a,"__esModule",{value:!0})});var Pc=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");Pc.obj=ff;Pc.PropertyPath=Sg;Pc.string=Bg;Pc.num=Gj;Pc.arr=Ne;Pc.properties=km;Pc.pt=kh;Pc.Color=qf;Pc.Rectangle=Qd;Pc.rect=zk;Pc.signal=Ak;Pc.connect=Mj;Pc.disconnect=So;Pc.Morph=Vi;Pc.ShadowObject=Dn;Pc.morph=Zi;Pc.Text=Lo;Pc.GridLayout=js;Pc.HorizontalLayout=xo;Pc.Path=bv;Pc.Ellipse=$u;Pc.Label=Mo;Pc.Tooltip=cv;Pc.Icon=
Ql;Pc.kld=bS;var B6=Pc.kld;Pc.Shapes=B6.Shapes;Pc.Intersection=B6.Intersection;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("LeashEndpoint")&&"function"===typeof d.LeashEndpoint?d.LeashEndpoint:d.LeashEndpoint=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",
value:function(b){var e=b.state;b.state.dragDelta=e.lastDragPosition.subPt(e.clickedOnPosition);b.state.endpoint=this;this.leash.onEndpointDrag(b)}},{key:"canConnectTo",value:function(b){return!b.isWorld&&!b.isHaloItem&&this.leash.canConnectTo(b)&&!b.isHighlighter&&!b.ownerChain().some(function(e){return e.isHaloItem})}},{key:"onDrag",value:function(b){var e=this;if(this.connectedMorph)this.clearConnection();else{var l=b.hand.findDropTarget(b.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],
function(p){return e.canConnectTo(p)});this.possibleTarget!=l&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=l)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(Pc.obj.keys(Pc.Leash.connectionPoints),this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}b.state.endpoint=this;this.leash.onEndpointDrag(b)}},
{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var b=this.connectedMorph,e=b.isPath,l=b.isPolygon,p=b.vertices,q=b.origin;b=this.connectedMorph.globalBounds();if((e||l)&&"center"!=this.attachedSide){e=p.map(function(w){return Pc.pt(w.x,w.y).addPt(q)});l=Pc.Rectangle.unionPts(e);var u=l[this.attachedSide]();l=l.center().addPt(l.center().subPt(u));l=
Pc.Shapes.line(u.x,u.y,l.x,l.y);e=Pc.Shapes.polyline(Pc.arr.flatten(e.map(function(w){return[w.x,w.y]})));e=Pc.arr.min(Pc.Intersection.intersect(e,l).points,function(w){return Pc.pt(w.x,w.y).dist(u)});return Pc.pt(e.x,e.y).addPt(b.topLeft())}return b[this.attachedSide]()}},{key:"update",value:function(b){b&&!["position","extent","rotation","scale"].includes(b.prop)&&b.target!=this.connectedMorph||!this.connectedMorph||(b=this.getConnectionPoint(),b=this.leash.localize(b),this.vertex.position=b,this.relayout())}},
{key:"clearConnection",value:function(){this.connectedMorph&&(Pc.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(b){var e=this.vertex.position,l=e.x;e=e.y;var p=this.leash.borderWidth;b&&b.meta&&b.meta.animation?this.animate({center:Pc.pt(l+p,e+p),duration:b.duration}):this.center=Pc.pt(l+p,e+p)}},{key:"attachTo",value:function(b,e){this.clearConnection();this.leash.world()||this.leash.openInWorld(b.globalPosition);this.connectedMorph=
b;this.attachedSide=e;this.vertex.controlPoints=this.leash.controlPointsFor(e,this);this.update();Pc.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(b){this.leash.vertices[this.index]=
b;this.leash.vertices=this.leash.vertices}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:444,end:4597})})(Pc.Ellipse);var $J=Ia("bG",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("Leash")&&"function"===typeof d.Leash?d.Leash:
d.Leash=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onMouseDown",value:function(b){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){Sb._get(Object.getPrototypeOf(k.prototype),"remove",this).call(this);this.startPoint.clearConnection();
this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(b){b.state.endpoint.vertex.position=b.state.endpoint.vertex.position.addPt(b.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(b){return Object.assign({},this.endpointStyle,{},0==b?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(b){var e=this.vertices[b];return new Pc.LeashEndpoint({index:b,leash:this,position:Pc.pt(e.x,e.y)})}},{key:"controlPointsFor",value:function(b,
e){b=Pc.Leash.connectionPoints[b];b=e==this.startPoint?b.negated():b;return{previous:b.scaleBy(100),next:b.negated().scaleBy(100)}}},{key:"relayout",value:function(b){if(!b||["vertices","position"].includes(b.prop))this.startPoint.relayout(b),this.endPoint.relayout(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:Pc.pt(0,-1),topLeft:Pc.pt(-1,-1),rightCenter:Pc.pt(1,0),bottomRight:Pc.pt(1,1),bottomCenter:Pc.pt(0,1),
bottomLeft:Pc.pt(-1,1),leftCenter:Pc.pt(-1,0),topRight:Pc.pt(1,-1),center:Pc.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:Pc.pt(0,0)},end:{defaultValue:Pc.pt(0,0)},canConnectTo:{defaultValue:function(b){return!0}},getLabelFor:{defaultValue:function(b){return b.name}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:Pc.Color.black,
origin:Pc.pt(3.5,3.5),extent:Pc.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:Pc.Color.black},fill:{defaultValue:Pc.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];Pc.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4606,end:7493})}(Pc.Path));Pc.Leash=$J;Pc.Leash=$J;Pc.Leash=$J;var aK=Ia("bp",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("Slider")&&"function"===typeof d.Slider?d.Slider:d.Slider=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"normalize",value:function(b){return Math.abs(b/(this.max-this.min))}},{key:"update",value:function(b){b=void 0===b?this.value:b;b=(this.width-15)*this.normalize(b);this.getSubmorphNamed("slideHandle").center=Pc.pt(b+7.5,10)}},{key:"onSlide",value:function(b,e){b=Pc.num.roundTo(this.value+e.x/this.width,.01);this.value=b=Math.max(this.min,Math.min(this.max,b));this.update(b)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:Pc.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],initialize:function(){var b=new Pc.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new Pc.Path({borderColor:Pc.Color.gray.darker(),borderWidth:2,vertices:[Pc.pt(0,0),Pc.pt(this.width,0)],position:Pc.pt(0,this.height/2)}),b];Pc.connect(this,"extent",this,"update");
this.update()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:7502,end:8800})}(Pc.Morph));Pc.Slider=aK;Pc.Slider=aK;Pc.Slider=aK;(function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("SliderHandle")&&"function"===typeof d.SliderHandle?
d.SliderHandle:d.SliderHandle=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"onDragStart",value:function(b){this.valueView=(new Pc.Tooltip({description:""})).openInWorld(b.hand.position.addXY(10,10))}},{key:"onDrag",value:function(b){this.slider.onSlide(this,b.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=b.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(b){this.valueView.remove()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:Pc.Color.gray},borderColor:{defaultValue:Pc.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new Pc.ShadowObject({blur:5})},extent:{defaultValue:Pc.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8802,end:9638})})(Pc.Ellipse);var bK=Ia("aC",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("ValueScrubber")&&"function"===typeof d.ValueScrubber?d.ValueScrubber:d.ValueScrubber=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(k,a,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onKeyDown",this).call(this,b);if("Enter"==b.keyCombo){var e=$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),l=e.next().value;e.next();"string"===typeof l&&(this.value=parseFloat(l),this.scrub(this.scrubbedValue));b.stop()}}},{key:"scrub",value:function(b){this.field.update(b)}},
{key:"onDragStart",value:function(b){this.execCommand("toggle active mark");this.initPos=b.position;this.factorLabel=(new Pc.Tooltip({description:"1x"})).openInWorld(b.hand.position.addXY(10,10));b.hand.extent=Pc.pt(30,30);b.hand.nativeCursor="ew-resize";b.hand.fill=Pc.Color.transparent;b.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(b){var e=b.position.subPt(this.initPos);b=e.x;e=Pc.num.roundTo(Math.exp(-e.y/$world.height*4),.01)*this.baseFactor;return{offset:b,scale:e}}},{key:"onDrag",
value:function(b){var e=this.getScaleAndOffset(b),l=e.scale;e=this.getCurrentValue(e.offset,l);this.scrub(e);e=this.floatingPoint?e.toFixed(3):Pc.obj.safeToString(e);this.unit&&(e+=" "+this.unit);this.replace(this.documentRange,e,!1,this.scaleToBounds,!1,!1);this.factorLabel.description=l.toFixed(3)+"x";this.factorLabel.position=b.hand.position.addXY(10,10);b.hand.moveBy(Pc.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(b,e){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+
(this.floatingPoint?b*e:Math.round(b*e))))}},{key:"onDragEnd",value:function(b){var e=this.getScaleAndOffset(b);this.value=this.getCurrentValue(e.offset,e.scale);this.factorLabel.softRemove();b.hand.extent=Pc.pt(1,1);b.hand.fill=Pc.Color.orange;b.hand.reactsToPointer=!1}},{key:"value",set:function(b){this.scrubbedValue=b=Math.max(this.min,Math.min(this.max,b));b=this.floatingPoint?b.toFixed(3):Pc.obj.safeToString(b);b=this.unit?b+(" "+this.unit):b+"";this.replace(this.documentRange,b,!1,!0);this.relayout()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(b){this.fixedWidth=!0;this.setProperty("scaleToBounds",b)}},field:{derived:!0,get:function(){return this.owner}},value:{defaultValue:0},fill:{defaultValue:Pc.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],d,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9647,end:12810})}(Pc.Text));Pc.ValueScrubber=bK;Pc.ValueScrubber=bK;Pc.ValueScrubber=bK;var XB=Ia("bt",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("CheckBox")&&"function"===typeof d.CheckBox?d.CheckBox:d.CheckBox=function(b){b&&
b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"trigger",value:function(){try{this.checked=!this.checked,Pc.signal(this,"toggle",this.checked)}catch(e){var b=this.world();b?b.logError(e):console.error(e)}}},{key:"onMouseDown",value:function(b){this.active&&this.trigger()}},{key:"render",value:function(b){return b.renderCheckBox(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",
get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Pc.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Pc.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:12819,end:13565})}(Pc.Morph));Pc.CheckBox=XB;Pc.CheckBox=XB;Pc.CheckBox=XB;var cK=Ia("aD",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("LabeledCheckBox")&&"function"===typeof d.LabeledCheckBox?d.LabeledCheckBox:d.LabeledCheckBox=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=
.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(b){this.active&&this.trigger();b.stop()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new Pc.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",
type:"Enum",values:["left","right"],set:function(b){this.layout=new Pc.HorizontalLayout({direction:"left"==b?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",b)}},layout:{initialize:function(){this.layout=new Pc.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(b){this.labelMorph.value=b}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},
set:function(b){this.checkboxMorph.checked=b;Pc.signal(this,"checked",b)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(b){this.checkboxMorph.active=b}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new Pc.CheckBox({name:"checkbox"}),new Pc.Label({nativeCursor:"pointer",
name:"label",padding:Pc.Rectangle.inset(5,3)})];Pc.connect(this,"alignCheckBox",this,"extent");Pc.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13574,end:16133})}(Pc.Morph));Pc.LabeledCheckBox=cK;Pc.LabeledCheckBox=cK;Pc.LabeledCheckBox=
cK;var dK=Ia("bo",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("ModeSelector")&&"function"===typeof d.ModeSelector?d.ModeSelector:d.ModeSelector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"createLabels",value:function(b,e,l){var p=this;l=void 0===l?{}:l;return Pc.arr.zip(b,e).map(function(q){q=$jscomp.makeIterator(q);var u=q.next().value,
w=q.next().value;q=l[u];q=Pc.morph(Object.assign({name:u+"Label",master:"styleguide://SystemWidgets/mode label",type:"label",value:u},q&&{tooltip:q}));Pc.connect(q,"onMouseDown",p,"update",{updater:function(y){y(u,w)},varMapping:{name:u,value:w}});return q})}},{key:"relayout",value:function(b){b=void 0===b?!0:b;var e=this,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(!e.currentLabel||!e.layout)return q.return();e.layout.forceLayout();l=e.get("typeMarker");
p=e.currentLabel.bounds();return b?q.yield(l.animate({bounds:p,duration:200}),3):(l.setBounds(p),q.jumpTo(2))}q.jumpToEnd()})}},{key:"animateFontColor",value:function(b,e,l){var p=b.fontColor;b.animate({customTween:function(q){return b.fontColor=p.interpolate(q,e)},duration:l})}},{key:"update",value:function(b,e,l){l=void 0===l?!1:l;var p=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){q=p.get(b+"Label");if(q==p.currentLabel)return u.return();p.getSubmorphsByStyleClassName("Label").forEach(function(w){w!=
q&&p.animateFontColor(w,p.fontColor,200)});p.currentLabel=q;!l&&Pc.signal(p,b,e);!l&&Pc.signal(p,"switchLabel",e);p.relayout(!l);return u.yield(p.animateFontColor(q,p.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",value:function(){(new Pc.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},{key:"properties",get:function(){return{items:{derived:!0,set:function(b){Pc.obj.isArray(b)?this.keys=this.values=b:
(this.keys=Pc.obj.keys(b),this.values=Pc.obj.values(b))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:Pc.Color.black},selectionFontColor:{defaultValue:Pc.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&(this.layout=new Pc.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+
2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(Pc.arr.interpose(this.keys.map(function(b){return b+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),Pc.connect(this,"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?
this.keys.indexOf(this.init):0],!0))}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16142,end:19750})}(Pc.Morph));Pc.ModeSelector=dK;Pc.ModeSelector=dK;Pc.ModeSelector=dK;var eK=Ia("aE",function(a){var d=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("DropDownSelector")&&
"function"===typeof d.DropDownSelector?d.DropDownSelector:d.DropDownSelector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"build",value:function(){this.dropDownLabel=Pc.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var b=this,e=this.getNameFor(this.selectedValue);
return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:e,target:this}]:[]),$jscomp.arrayFromIterable(Pc.arr.compact(this.commands.map(function(l){return l.name!=e&&{command:l.name,target:b}}))))}},{key:"commands",get:function(){var b=this;return Pc.obj.isArray(this.values)?this.values.map(function(e){return{name:String(e),exec:function(){Pc.signal(b,"update",e);b.selectedValue=e}}}):Pc.properties.forEachOwn(this.values,function(e,l){return{name:e,exec:function(){Pc.signal(b,
"update",l);b.selectedValue=l}}})}},{key:"getNameFor",value:function(b){return this.getCurrentValue?this.getCurrentValue():Pc.obj.isArray(this.values)?Pc.obj.safeToString(b):Pc.obj.safeToString(Pc.properties.nameFor(this.values,b))}},{key:"relayout",value:function(){var b=this.getNameFor(this.selectedValue),e=this.get("currentValue");"undefined"==b?(e.value="Not set",e.fontColor=Pc.Color.gray):(e.value=b,e.fontColor=Pc.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,
duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(b){this.menu=this.world().openWorldMenu(b,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values",
"getCurrentValue"],set:function(b){this.setProperty("selectedValue",b);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:Pc.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:Pc.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(b){this.setProperty("isSelected",b);this.fontColor=b?Pc.Color.white:Pc.Color.black}},layout:{initialize:function(){this.layout=
new Pc.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:19759,end:23034})}(Pc.Morph));Pc.DropDownSelector=eK;Pc.DropDownSelector=eK;Pc.DropDownSelector=eK;var fK=Ia("bs",function(a){var d=
lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),k=d.hasOwnProperty("SearchField")&&"function"===typeof d.SearchField?d.SearchField:d.SearchField=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"parseInput",value:function(){var b=Array.from(this.textString).reduce(function(l,p){if("\\"===p&&!l.escaped)return l.escaped=!0,l;" "!==p||l.escaped?(l.spaceSeen=!1,l.current+=p):(!l.spaceSeen&&
l.current&&(l.tokens.push(l.current),l.current=""),l.spaceSeen=!0);l.escaped=!1;return l},{tokens:[],current:"",escaped:!1,spaceSeen:!1});b.current&&b.tokens.push(b.current);var e=b.tokens.map(function(l){return l.toLowerCase()});return{tokens:b.tokens,lowercasedTokens:e}}},{key:"clearInput",value:function(){this.textString="";Pc.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(b){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:b}):
!0}},{key:"onChange",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onChange",this).call(this,b);b="replace"===b.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&b&&Pc.signal(this,"searchInput",this.parseInput())}},{key:"onBlur",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onBlur",this).call(this,
b);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onFocus",this).call(this,b);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master=
{auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:Pc.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:Pc.Color.gray},borderColor:{defaultValue:Pc.Color.gray},layout:{initialize:function(){this.layout=new Pc.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(b){this.setProperty("fuzzy",b);b?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==
this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var b=this.getProperty("filterFunction");if(!b)return this.defaultFilterFunction;"string"===typeof b&&(b=eval("("+b+")"));return b}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||
(this._defaultFilterFunction=function(b,e){return b.lowercasedTokens.every(function(l){return e.string.toLowerCase().includes(l)})})}},fuzzySortFunction:{get:function(){var b=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(e,l){var p=String(Pc.PropertyPath("string"===typeof b.fuzzy?b.fuzzy:"string").get(l)).toLowerCase(),q=0;e.lowercasedTokens.forEach(function(u){p.startsWith(u)?q-=10:p.includes(u)&&(q-=5)});return Pc.arr.sum(e.lowercasedTokens.map(function(u){return Pc.string.levenshtein(p.toLowerCase(),
u)}))+q})}},fuzzyFilterFunction:{get:function(){var b=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(e,l){var p="string"===typeof b.fuzzy?b.fuzzy:"string";if(e.lowercasedTokens.every(function(u){return l.string.toLowerCase().includes(u)}))return!0;var q=String(Pc.PropertyPath(p).get(l)).toLowerCase();return 3>=Pc.arr.sum(e.lowercasedTokens.map(function(u){return Pc.string.levenshtein(q,u)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=
[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},Pc.Icon.makeLabel("times-circle",{padding:Pc.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:Pc.pt(20,22),name:"placeholder icon",fontColor:Pc.Color.gray,nativeCursor:"pointer"})];Pc.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],d,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:23078,end:29598})}(Pc.Text));Pc.SearchField=fK;Pc.SearchField=fK;Pc.SearchField=fK;var cS=Object.freeze({__proto__:null,Leash:$J,Slider:aK,ValueScrubber:bK,CheckBox:XB,LabeledCheckBox:cK,ModeSelector:dK,DropDownSelector:eK,SearchField:fK}),Fi=lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(Fi,Ioa);Object.assign(Fi,Hoa);Object.assign(Fi,Joa);Object.assign(Fi,Koa);Object.assign(Fi,Loa);Object.assign(Fi,
Moa);Fi.Window=$R;Fi.prompts=aS;Fi.widgets=cS;Fi.LoadingIndicator=gy;Fi.addClassMappings=az;Fi.List=iy;Fi.DropDownList=WB;Fi.Button=hy;Fi.CheckBox=XB;Fi.addClassMappings({list:Fi.List,dropdownlist:Fi.DropDownList,button:Fi.Button,checkbox:Fi.CheckBox,labeledcheckbox:Fi.widgets.LabeledCheckBox});Fi.Window=$R;Fi.Window=$R;Fi.LoadingIndicator=gy;Fi.LoadingIndicator=gy;Fi.prompts=aS;Fi.prompts=aS;Fi.widgets=cS;Fi.widgets=cS;var Wl=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");Wl.Morph=
Vi;Wl.MorphicDB=Lp;Wl.LoadingIndicator=gy;Wl.resource=sc;var jy=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),k=d.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof d.WorldLoadingScreen?d.WorldLoadingScreen:d.WorldLoadingScreen=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"commands",get:function(){var b=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=
null;b.setBounds($world.windowBounds());b.get("json target indicator").topRight=b.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},{key:"onLoad",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==
w.nextAddress){if(!lively.FreezerRuntime)return w.jumpTo(0);e=b.get("package loading indicator");l=b.get("css loading screen");p=b.getWorldName();q=b.getFilePath();(u=b.getSnapshot())?(e.isLayoutable=e.visible=!1,l.isLayoutable=l.visible=!0):(e.startStepping("updateProgressBar"),document.body.style.backgroundColor="black");q&&b.get("json target indicator").animate({opacity:1,duration:300});return w.yield(b.transitionToLivelyWorld({worldName:p,filePath:q,snapshot:u},e),3)}e.stopStepping();w.jumpToEnd()})}},
{key:"transitionToLivelyWorld",value:function(b,e){var l=b.worldName,p=b.filePath,q=b.snapshot,u=this,w,y,A,C,D,L,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:return w=Wl.resource(window.SYSTEM_BASE_URL||document.location.origin).join("objectdb/").url,y=u.get("package loading indicator"),S.yield(Promise.resolve().then(function(){return C6}),2);case 2:A=S.yieldResult;C=A.bootstrap;if(!(D=l&&"__newWorld__"!=l)){S.jumpTo(3);break}return S.yield(Wl.MorphicDB.named("lively.morphic/objectdb/morphicdb",
{serverURL:w}).exists("world",l),4);case 4:D=!S.yieldResult.exists;case 3:if(D)return S.return(u.indicateMissingWorld(!0));if(!(L=p)){S.jumpTo(5);break}return S.yield(Wl.resource(document.location.origin).join(p).exists(),6);case 6:L=!S.yieldResult;case 5:if(L)return S.return(u.indicateMissingWorld(!0));I=Wl.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3});q&&(I.visible=!1);e.opacity=1;return S.yield(C({worldName:l,filePath:p,loadingIndicator:I,progress:y,snapshot:q}),
0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":Wl.resource(document.location.href).query().name||window.WORLD_NAME||!1}},{key:"getFilePath",value:function(){return Wl.resource(document.location.href).query().file||!1}},{key:"getSnapshot",value:function(){return Wl.resource(document.location.href).query().snapshot||window.SNAPSHOT_PATH||!1}},{key:"indicateMissingWorld",value:function(b){this.get("package loading indicator").visible=
!b;this.get("broken heart").visible=this.get("broken heart").isLayoutable=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],d,{pathInPackage:function(){return"loading-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",
version:"0.1.1-119"}}},{start:158,end:3675})}(Wl.Morph);Wl.WorldLoadingScreen=jy;Wl.WorldLoadingScreen=jy;Wl.WorldLoadingScreen=jy;var Rf=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");Rf.Morph=Vi;Rf.MorphicDB=Lp;Rf.World=Bq;Rf.easings=Fn;Rf.morph=Zi;Rf.promise=Uf;Rf.string=Bg;Rf.date=tp;Rf.Color=qf;Rf.pt=kh;Rf.LoadingIndicator=gy;Rf.resource=sc;Rf.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
var dS=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),k=d.hasOwnProperty("TitleWrapper")&&"function"===typeof d.TitleWrapper?d.TitleWrapper:d.TitleWrapper=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"startMovingRight",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=e}})}},{key:"stopMovingRight",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=
1-e}})}},{key:"startMovingLeft",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=-e}})}},{key:"stopMovingLeft",value:function(){var b=this;this.animate({customTween:function(e){b._hoverDelta=-1+e}})}},{key:"startOnce",value:function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(e._fn)return l.return();e._fn=b;return l.yield(b(),2)}e._fn=null;l.jumpToEnd()})}},{key:"updateTitle",value:function(){var b=this;if(this.title){var e=
$jscomp.makeIterator(this.submorphs).next().value;e.left+=this._hoverDelta;e.right<this.width-20&&-1==this._hoverDelta?this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(b.stopMovingLeft(),2):l.yield(b.startMovingRight(),0)})}):20<e.left&&1==this._hoverDelta&&this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(b.stopMovingRight(),2):l.yield(b.startMovingLeft(),
0)})})}}},{key:"startShowingFullTitle",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress){if(!b.title)return p.return();e=$jscomp.makeIterator(b.submorphs);l=e.next().value;l.textString=b.title;return p.yield(l.whenRendered(),2)}b._hoverDelta=0;b.startStepping("updateTitle");l.right>b.width&&b.startMovingLeft();p.jumpToEnd()})}},{key:"stopShowingFullTitle",value:function(){if(this.title){var b=this.submorphs[0];b.textString=Rf.string.truncate(this.title,
18,"...");this.stopStepping("updateTitle");this._hoverDelta=0;b.left=0}}},{key:"onHoverIn",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverIn",this).call(this,b);this.startShowingFullTitle()}},{key:"onHoverOut",value:function(b){Sb._get(Object.getPrototypeOf(k.prototype),"onHoverOut",this).call(this,b);this.stopShowingFullTitle()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TitleWrapper"}},{key:"properties",get:function(){return{title:{derived:!0,set:function(b){this.setProperty("title",
b);b&&(this.submorphs[0].textString=Rf.string.truncate(b,18,"..."))}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:350,end:2487})}(Rf.Morph);Rf.TitleWrapper=dS;Rf.TitleWrapper=dS;Rf.TitleWrapper=dS;var ky=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),
k=d.hasOwnProperty("WorldPreview")&&"function"===typeof d.WorldPreview?d.WorldPreview:d.WorldPreview=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sb(k,a,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return e.yield(b.initWithCommit(b._commit),
0)})}},{key:"initWithCommit",value:function(b){var e=this,l,p,q,u,w,y,A,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress)return l=e.ui,p=l.preview,q=l.timestamp,u=l.title,w=l.description,y=l.previewContainer,e.opacity=.5,y.opacity=0,D.yield(e.whenRendered(),2);if(3!=D.nextAddress)return e._commit=b,p.imageUrl=b.preview||Rf.missingSVG,A=b.author,C=A.name,C=C.startsWith("guest-")?"guest":C,q.value=[C,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},Rf.date.format(b.timestamp,
" - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],u.title=b.name,w.value=b.description,D.yield(e.whenRendered(),3);y.opacity=1;e.animate({opacity:1,duration:300});D.jumpToEnd()})}},{key:"openAnimated",value:function(b){b=void 0===b?$world.visibleBounds():b;var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return l=Rf.morph(Object.assign({},e.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[e.ui.spinner.spec()]})).openInWorld(),
l.hasFixedPosition=!0,l.globalPosition=e.globalPosition,l.opacity=0,p.yield(l.whenRendered(),2);case 2:return p.yield(l.animate({opacity:1,duration:300}),3);case 3:return l.dropShadow=!1,l.animate({bounds:b,borderRadius:0,duration:500,easing:Rf.easings.inOutQuint}),l.respondsToVisibleWindow=!0,p.yield(l.ui.spinner.animate({center:l.innerBounds().center(),duration:500,easing:Rf.easings.inOutQuint}),4);case 4:return p.yield(Rf.promise.delay(1E3),5);case 5:return p.return(l)}})}},{key:"openWorld",value:function(){var b=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(b.openAnimated(),2);b.loadWorld();e.jumpToEnd()})}},{key:"loadWorld",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){e=b._commit;l=e._id;p=e.name;if(lively.FreezerRuntime)return q=Rf.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3}),b.transitionToLivelyWorld(document.location.origin,b._commit,
q),w.jumpTo(0);u=Rf.LoadingIndicator.open("loading "+p);return w.yield(Rf.World.loadFromCommit(l,void 0,{morphicDB:Rf.MorphicDB.default}),3)}u.remove();w.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(b,e,l){var p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return w.yield(Rf.resource("part://partial freezing/package loading progress indicator").read(),2);if(3!=w.nextAddress)return p=w.yieldResult,w.yield(Promise.resolve().then(function(){return C6}),
3);q=w.yieldResult;u=q.bootstrap;return w.yield(u({commit:e,loadingIndicator:l,progress:p}),0)})}},{key:"showVersions",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return e=200,l=Rf.easings.inOutExpo,p=b.ui,q=p.previewContainer,w.yield(Rf.resource("part://partial freezing/version container").read(),2);if(3!=w.nextAddress)return u=w.yieldResult,u.name="version container",u.position=Rf.pt(0,0),b.addMorph(u),u.reactsToPointer=
u.visible=!0,u.initializeFromStartCommit(b._commit),b.animate({width:515,duration:e,easing:l}),q.animate({opacity:0,duration:e}),w.yield(u.animate({opacity:1,duration:e}),3);q.reactsToPointer=q.visible=!1;w.jumpToEnd()})}},{key:"hideVersions",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=Rf.easings.inOutExpo,l=b.ui,p=l.previewContainer,q=l.versionContainer,p.reactsToPointer=p.visible=!0,b.animate({width:245,duration:200,
easing:e}),p.animate({opacity:1,duration:200}),u.yield(q.animate({opacity:0,duration:200}),2);q.reset();q.remove();u.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(b){this.ui.deleteButton.visible=b}},{key:"onHoverIn",value:function(b){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(b){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var b=this,e,l,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=300,l=b.ui,p=
l.previewContainer,u.yield(Rf.resource("part://partial freezing/delete world prompt").read(),2);q=u.yieldResult;Object.assign(q,{name:"delete world prompt",position:Rf.pt(0,0),opacity:0});b.addMorph(q);q.visible=!0;return u.yield(b.withAnimationDo(function(){q.opacity=1;b.dropShadow=b.dropShadow.with({color:Rf.Color.black.withA(.5),blur:50});p.opacity=.3;p.blur=1},{duration:e}),0)})}},{key:"confirmDelete",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.yield(Rf.MorphicDB.default.commit(Object.assign({},b._commit,{content:void 0,snapshot:null})),2);b.isComponent||b.owner.isWorld||b.owner.remove();e.jumpToEnd()})}},{key:"cancelDelete",value:function(){var b=this,e,l,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return e=b.ui,l=e.previewContainer,p=e.deleteWorldPrompt,q.yield(b.withAnimationDo(function(){Object.assign(l,{opacity:1,blur:0});b.dropShadow=b.dropShadow.with({color:Rf.Color.rgba(0,
0,0,.11)});p.opacity=0},{duration:300}),2);p.remove();q.jumpToEnd()})}},{key:"onMouseUp",value:function(b){var e=this.ui,l=e.openButton,p=e.versionButton,q=e.deleteButton,u=e.closeVersionsButton,w=e.cancelDeleteButton;e=e.confirmDeleteButton;switch(b.targetMorph){case l:this.openWorld();break;case p:this.showVersions();break;case q:this.tryToDelete();break;case u:this.hideVersions();break;case e:this.confirmDelete();break;case w:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},
{key:"properties",get:function(){return{ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title wrapper"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),
deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:2500,end:10197})}(Rf.Morph);Rf.WorldPreview=ky;Rf.WorldPreview=ky;Rf.WorldPreview=ky;var ly=function(a){var d=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),k=d.hasOwnProperty("WorldLandingPage")&&"function"===typeof d.WorldLandingPage?d.WorldLandingPage:d.WorldLandingPage=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return Sb(k,a,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var b=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";b.setBounds($world.windowBounds());b.getSubmorphNamed("globe").extent=b.extent;b.ensureUserFlap();var e=b.getSubmorphNamed("a project browser");e&&(e.center=b.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return $world.get("user flap")?
e.return():e.yield(Rf.resource("part://SystemIDE/user flap master/dark").read(),2);if(3!=e.nextAddress)return b=e.yieldResult,b.name="user flap",b.showMorphControls=!1,b.hasFixedPosition=!0,b.openInWorld(),b.opacity=0,b.alignInWorld(),b.get("fast load toggler").refresh(),e.yield(Rf.promise.delay(1E3),3);b.animate({opacity:1});e.jumpToEnd()})}},{key:"beforePublish",value:function(){var b=this.getSubmorphNamed("a project browser");b&&b.remove()}},{key:"onLoad",value:function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==
l.nextAddress)return l.yield(b.whenRendered(),2);if(!lively.FreezerRuntime)return l.return();$world.fill=Rf.Color.black;document.documentElement.style.background=Rf.Color.black;b.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});b.getSubmorphNamed("globe").fullyLoaded();(e=document.getElementById("loading screen"))&&e.remove();l.jumpToEnd()})}},{key:"showWorldList",value:function(){var b=this,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==
w.nextAddress){if(e=b.getSubmorphNamed("a poject browser"))return w.jumpTo(2);l=b;p=l.addMorph;q=l;return w.yield(Rf.resource("part://partial freezing/project browser").read(),3)}2!=w.nextAddress&&(e=p.call(q,w.yieldResult));u=e;u.name="a project browser";b.reset();u.showCloseButton=!1;u.extent=Rf.pt(1110,800).minPt(b.extent.subPt(Rf.pt(50,150)));u.center=b.innerBounds().center();u.animate({opacity:1,duration:300});u.displayWorlds();u.hasFixedPosition=!1;w.jumpToEnd()})}},{key:"reset",value:function(){var b=
this.getSubmorphNamed("a project browser");b.opacity=0;b.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],d,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:10208,end:13426})}(Rf.Morph);Rf.WorldLandingPage=ly;Rf.WorldLandingPage=ly;Rf.WorldLandingPage=ly;var Yq=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");Yq.WorldLoadingScreen=jy;Yq.WorldLandingPage=ly;Yq.WorldPreview=ky;Yq.WorldLoadingScreen=jy;Yq.WorldLoadingScreen=jy;Yq.WorldLandingPage=ly;Yq.WorldLandingPage=ly;Yq.WorldPreview=ky;Yq.WorldPreview=ky;var Ed=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");
Ed.bootstrap=XG;Ed.fastPrepLivelySystem=function(a){return Promise.resolve().then(function(){a.status="starting fast system preparation..."}).then(function(){return Ed.resource(System.baseURL).join("package-registry.json").readJson()}).then(function(d){System["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(System,d);return System}).then(function(){return Ed.loadViaScript(Ed.resource(System.baseURL).join("/lively.user/dist/lively.user-client.js").url)})};Ed.installFetchHook=
function(a){function d(k,b){Ed.loads++;a.status="loading "+Ed.string.truncateLeft(b.name.replace(window.System.baseURL,""),25,"...");a.progress=Ed.loads/(800-4*Object.keys(Ed.extractedModules).length);a.center=$world.innerBounds().center();return k(b)}window.__logFetch=d;lively.modules.installHook("fetch",d)};Ed.extractModules=function(a){Object.keys(lively.FreezerRuntime.registry).filter(function(d){return d.startsWith(a)}).forEach(function(d){Ed.extractedModules[Ed.resource(System.baseURL).join(d).url]=
Object.assign({},lively.FreezerRuntime.registry[d].exports)})};Ed.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(mb.import("./world-c7efd0bd.js").then(function(d){return d.w}),2);case 2:return a.yield(mb.import("./editor-plugin-85896541.js").then(function(d){return d.e}),3);case 3:return a.yield(mb.import("./editor-plugin-d2926468.js"),4);case 4:return a.yield(mb.import("./index-a98bf65c.js"),5);case 5:return a.yield(Promise.resolve().then(function(){return Zna}),
6);case 6:return a.yield(Promise.resolve().then(function(){return $na}),7);case 7:return a.yield(Promise.resolve().then(function(){return rga}),8);case 8:Ed.extractModules("lively.bindings"),Ed.extractModules("lively.shell"),Ed.extractModules("lively.ide"),Ed.extractModules("lively.components"),a.jumpToEnd()}})};Ed.bootstrapLivelySystem=function(a,d,k){return Promise.resolve().then(function(){a.status="starting bootstrap process..."}).then(function(){var b,e,l,p,q,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.yield(d.whenRendered(),
2);case 2:if("frozen"!=k["lively.lang"]&&!Ed.fastLoad){w.jumpTo(3);break}return w.yield(Promise.resolve().then(function(){return L0}),4);case 4:b=w.yieldResult,Ed.extractModules("lively.lang"),d.finishPackage({packageName:"lively.lang",frozen:!0}),delete b._prevLivelyGlobal;case 3:if("frozen"!=k["lively.ast"]&&!Ed.fastLoad){w.jumpTo(5);break}e=lively;return w.yield(Promise.resolve().then(function(){return vH}),6);case 6:e.ast=w.yieldResult,Ed.extractModules("lively.ast"),d.finishPackage({packageName:"lively.ast",
frozen:!0});case 5:if("frozen"!=k["lively.source-transform"]&&!Ed.fastLoad){w.jumpTo(7);break}l=lively;return w.yield(Promise.resolve().then(function(){return lga}),8);case 8:l.sourceTransform=w.yieldResult,Ed.extractModules("lively.source-transform"),d.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=k["lively.classes"]&&!Ed.fastLoad){w.jumpTo(9);break}return w.yield(mb.import("./object-classes-d1bf095f.js"),10);case 10:return p=lively,w.yield(Promise.resolve().then(function(){return z5}),
11);case 11:p.classes=w.yieldResult,Ed.extractModules("lively.class"),d.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=k["lively.vm"]&&!Ed.fastLoad){w.jumpTo(12);break}q=lively;return w.yield(Promise.resolve().then(function(){return Y1}),13);case 13:q.vm=w.yieldResult,Ed.extractModules("lively.vm"),d.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=k["lively.modules"]&&!Ed.fastLoad){w.jumpTo(14);break}return w.yield(Promise.resolve().then(function(){return iJ}),
15);case 15:Ed.extractModules("lively.modules"),d.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=k["lively.user"]&&!Ed.fastLoad){w.jumpTo(16);break}return w.yield(Promise.resolve().then(function(){return aoa}),17);case 17:return w.yield(mb.import("./user-ui-49874e7c.js"),18);case 18:Ed.extractModules("lively.user"),d.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=k["lively.storage"]&&!Ed.fastLoad){w.jumpTo(19);break}return w.yield(Promise.resolve().then(function(){return Yma}),
20);case 20:Ed.extractModules("lively.storage"),d.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=k["lively.morphic"]&&!Ed.fastLoad){w.jumpTo(0);break}return w.yield(Promise.resolve().then(function(){return uda}),22);case 22:return Ed.extractModules("lively.resources"),w.yield(Promise.resolve().then(function(){return c6}),23);case 23:return w.yield(mb.import("./index-792c91c7.js"),24);case 24:return Ed.extractModules("lively.2lively"),w.yield(Promise.resolve().then(function(){return xga}),
25);case 25:return Ed.extractModules("lively.serializer2"),w.yield(Ed.loadComponents(),26);case 26:return w.yield(mb.import("./index-2245b428.js").then(function(y){return y.i}),27);case 27:return Ed.extractModules("lively.halos"),w.yield(mb.import("./index-4fd2821f.js"),28);case 28:return Ed.extractModules("lively-system-interface"),w.yield(Promise.resolve().then(function(){return qga}),29);case 29:return Ed.extractModules("lively.graphics"),u=lively,w.yield(Promise.resolve().then(function(){return Goa}),
30);case 30:u.morphic=w.yieldResult,Ed.extractModules("lively.morphic"),d.finishPackage({packageName:"lively.morphic",frozen:!0}),w.jumpToEnd()}})}).then(function(){var b,e,l,p,q,u,w,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){switch(A.nextAddress){case 1:return b=window.SYSTEM_BASE_URL||document.location.origin,e=window.System,l=e.baseURL,l.endsWith("/")&&(l=l.slice(0,-1)),A.yield(Ed.resource(b).join("package-registry.json").readJson(),2);case 2:return p=A.yieldResult,A.yield(Ed.loadViaScript(Ed.resource(b).join("/lively.next-node_modules/babel-standalone/babel.js").url),
3);case 3:return A.yield(Ed.loadViaScript(Ed.resource(b).join("/lively.next-node_modules/systemjs/dist/system.src.js").url),4);case 4:return A.yield(Ed.loadViaScript(Ed.resource(b).join("/lively.modules/systemjs-init.js").url),5);case 5:q=lively.modules.getSystem("bootstrapped",{baseURL:b});lively.modules.changeSystem(q,!0);q["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(q,p);for(u in Ed.extractedModules)w=u.replace(l,b),q.set(w,q.newModule(Ed.extractedModules[u])),
y=lively.modules.module(w),y._recorder=Ed.extractedModules[u],y._frozenModule=!0;e.config({baseURL:b});Ed.installFetchHook(a);A.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.lang"]&&!Ed.fastLoad)return b.return(Ed.importPackageAndDo("lively.lang",function(e){d.finishPackage({packageName:"lively.lang",loaded:!0});delete e._prevLivelyGlobal},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d.animate({opacity:1,
easing:Ed.easings.outExpo,duration:300});if("dynamic"==k["lively.ast"]&&!Ed.fastLoad)return b.return(Ed.importPackageAndDo("lively.ast",function(e){d.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.source-transform"]&&!Ed.fastLoad)return b.return(Ed.importPackageAndDo("lively.source-transform",function(e){d.finishPackage({packageName:"lively.source-transform",
loaded:!0});lively.sourceTransform=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.classes"]&&!Ed.fastLoad)return b.return(Ed.importPackageAndDo("lively.classes",function(e){d.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.vm"]&&!Ed.fastLoad)return b.return(Ed.importPackageAndDo("lively.vm",
function(e){d.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=e},a));b.jumpToEnd()})}).then(function(){function b(e){lively.modules=e;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();Ed.installFetchHook(a);var l=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];e=System["__lively.modules__packageRegistry"]=e.PackageRegistry.ofSystem(System);Object.assign(e,
Ed.obj.select(l,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));e.resetByURL();l=e.allPackages();var p=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;l.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){Ed.adoptObject(u,p)});l=Object.values(System["__lively.modules__loadedModules"]);var q=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;l.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){Ed.adoptObject(u,
q)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return"frozen"==k["lively.modules"]||Ed.fastLoad?(System._scripting=lively.modules.scripting,e.jumpTo(2)):e.yield(Ed.importPackageAndDo("lively.modules",b,a),2);d.finishPackage({packageName:"lively.modules",loaded:!0});e.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.user"]&&!Ed.fastLoad)return b.return(Ed.importPackageAndDo("lively.user",
function(e){d.finishPackage({packageName:"lively.user",loaded:!0});lively.user=e},a));b.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if("dynamic"==k["lively.storage"]&&!Ed.fastLoad)return b.return(Ed.importPackageAndDo("lively.storage",function(e){d.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=e},a));b.jumpToEnd()})})};Ed.importPackageAndDo=function(a,d,k){var b=a.split("/").slice(-1)[0];k.label="loading "+b;return lively.modules.importPackage(a).then(d||
function(){})};Ed.polyfills=function(){var a=[];"PointerEvent"in window||a.push(Ed.loadViaScript(Ed.resource(System.baseURL).join("/lively.next-node_modules/pepjs/dist/pep.js").url));"fetch"in window||a.push(Ed.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(a)};Ed.resource=sc;Ed.unregisterExtension=Rd;Ed.registerExtension=Fd;Ed.loadViaScript=Yp;Ed.promise=Uf;Ed.string=Bg;Ed.obj=ff;Ed.modulePackage=iJ;Ed.easings=Fn;Ed.adoptObject=gw;Ed.Color=qf;Ed.styleguideResourceExtension=
cJ;Ed.partResourceExtension=kJ;lively.modules=Ed.modulePackage;Ed.loginDone=!0;Ed.doBootstrap=!0;Ed.askBeforeQuit=!0;Ed.worldLoaded=!1;Ed.loc=document.location;Ed.query=Ed.resource(Ed.loc.href).query();Ed.fastLoad=1==Ed.query.fastLoad||window.FORCE_FAST_LOAD;Ed.bootstrap=XG;Ed.bootstrap=XG;Ed.loads=0;Ed.extractedModules={};var C6=Object.freeze({__proto__:null,bootstrap:XG}),Noa=/^part:\/\/([^\/]+)\/(.*)$/,eS=function(){return Zx.apply(this,arguments)||this};$jscomp.inherits(eS,Zx);eS.prototype.read=
function(){var a=this,d=function(){return Zx.prototype.read},k,b,e,l,p,q,u,w,y,A,C,D,L,I,S,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ba){switch(ba.nextAddress){case 1:switch(a.url){case "part://partial freezing/package loading progress indicator":return ba.jumpTo(2);case "part://partial freezing/version container":return ba.jumpTo(3);case "part://partial freezing/delete world prompt":return ba.jumpTo(4);case "part://SystemIDE/user flap master/dark":return ba.jumpTo(5);case "part://SystemIDE/lively top bar master":return ba.jumpTo(6);
case "part://SystemUserUI/version checker":return ba.jumpTo(7);case "part://SystemUserUI/login widget":return ba.jumpTo(8);case "part://SystemUserUI/user info":return ba.jumpTo(9);case "part://SystemUserUI/register widget":return ba.jumpTo(10);case "part://SystemIDE/user menu master":return ba.jumpTo(11);case "part://SystemIDE/scene graph side bar master":return ba.jumpTo(12);case "part://SystemIDE/styling side bar master":return ba.jumpTo(13);case "part://SystemWidgets/new color picker":return ba.jumpTo(14);
case "part://SystemWidgets/gradient editor/color stop":return ba.jumpTo(15);case "part://partial freezing/project browser":return ba.jumpTo(16);case "part://partial freezing/world preview":return ba.jumpTo(17);default:return ba.jumpTo(18)}case 2:return ba.yield(mb.import("./package loading progress indicator-e1995983.js"),20);case 20:if(!(k=ba.yieldResult)){ba.jumpTo(21);break}return ba.yield(d().call(a),22);case 22:k=ba.yieldResult;case 21:return ba.return(k);case 3:return ba.yield(mb.import("./version container-99b8adb3.js"),
23);case 23:if(!(b=ba.yieldResult)){ba.jumpTo(24);break}return ba.yield(d().call(a),25);case 25:b=ba.yieldResult;case 24:return ba.return(b);case 4:return ba.yield(mb.import("./delete world prompt-e3657cd1.js"),26);case 26:if(!(e=ba.yieldResult)){ba.jumpTo(27);break}return ba.yield(d().call(a),28);case 28:e=ba.yieldResult;case 27:return ba.return(e);case 5:return ba.yield(mb.import("./dark-d99af7c6.js"),29);case 29:if(!(l=ba.yieldResult)){ba.jumpTo(30);break}return ba.yield(d().call(a),31);case 31:l=
ba.yieldResult;case 30:return ba.return(l);case 6:return ba.yield(mb.import("./lively top bar master-256c73c0.js"),32);case 32:if(!(p=ba.yieldResult)){ba.jumpTo(33);break}return ba.yield(d().call(a),34);case 34:p=ba.yieldResult;case 33:return ba.return(p);case 7:return ba.yield(mb.import("./version checker-52db1347.js"),35);case 35:if(!(q=ba.yieldResult)){ba.jumpTo(36);break}return ba.yield(d().call(a),37);case 37:q=ba.yieldResult;case 36:return ba.return(q);case 8:return ba.yield(mb.import("./login widget-f34441c3.js"),
38);case 38:if(!(u=ba.yieldResult)){ba.jumpTo(39);break}return ba.yield(d().call(a),40);case 40:u=ba.yieldResult;case 39:return ba.return(u);case 9:return ba.yield(mb.import("./user info-82c9fbed.js"),41);case 41:if(!(w=ba.yieldResult)){ba.jumpTo(42);break}return ba.yield(d().call(a),43);case 43:w=ba.yieldResult;case 42:return ba.return(w);case 10:return ba.yield(mb.import("./register widget-0eb7b261.js"),44);case 44:if(!(y=ba.yieldResult)){ba.jumpTo(45);break}return ba.yield(d().call(a),46);case 46:y=
ba.yieldResult;case 45:return ba.return(y);case 11:return ba.yield(mb.import("./user menu master-d3230e5e.js"),47);case 47:if(!(A=ba.yieldResult)){ba.jumpTo(48);break}return ba.yield(d().call(a),49);case 49:A=ba.yieldResult;case 48:return ba.return(A);case 12:return ba.yield(mb.import("./scene graph side bar master-e5633048.js"),50);case 50:if(!(C=ba.yieldResult)){ba.jumpTo(51);break}return ba.yield(d().call(a),52);case 52:C=ba.yieldResult;case 51:return ba.return(C);case 13:return ba.yield(mb.import("./styling side bar master-8591b26f.js"),
53);case 53:if(!(D=ba.yieldResult)){ba.jumpTo(54);break}return ba.yield(d().call(a),55);case 55:D=ba.yieldResult;case 54:return ba.return(D);case 14:return ba.yield(mb.import("./new color picker-6db2071a.js"),56);case 56:if(!(L=ba.yieldResult)){ba.jumpTo(57);break}return ba.yield(d().call(a),58);case 58:L=ba.yieldResult;case 57:return ba.return(L);case 15:return ba.yield(mb.import("./color stop-8193b6b4.js"),59);case 59:if(!(I=ba.yieldResult)){ba.jumpTo(60);break}return ba.yield(d().call(a),61);case 61:I=
ba.yieldResult;case 60:return ba.return(I);case 16:return ba.yield(mb.import("./project browser-cc377c5d.js"),62);case 62:if(!(S=ba.yieldResult)){ba.jumpTo(63);break}return ba.yield(d().call(a),64);case 64:S=ba.yieldResult;case 63:return ba.return(S);case 17:return ba.yield(mb.import("./world preview-87a3d880.js"),65);case 65:if(!(V=ba.yieldResult)){ba.jumpTo(66);break}return ba.yield(d().call(a),67);case 67:V=ba.yieldResult;case 66:return ba.return(V);case 18:return ba.yield(d().call(a),68);case 68:return ba.return(ba.yieldResult)}})};
var Ooa={name:"part",matches:function(a){return a.match(Noa)},resourceClass:eS};Rd("part");Fd(Ooa);var gK=function(){return JB.apply(this,arguments)||this};$jscomp.inherits(gK,JB);gK.prototype.read=function(){var a=this,d,k,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=sc(System.baseURL),d.isFile()&&(d=d.parent()),k=d.join("masters/"),e.yield(a.fetchFromMasterDir(k,a.componentName),2)):3!=e.nextAddress?(b=e.yieldResult,e.yield(a.resolveComponent(b),3)):
e.return(e.yieldResult)})};$jscomp.global.Object.defineProperties(gK.prototype,{worldName:{configurable:!0,enumerable:!0,get:function(){var a=this.url.match(D6);a=$jscomp.makeIterator(a);a.next();var d=a.next().value;a.next();return d}}});var D6=/^styleguide:\/\/([^\/]+)\/(.*)$/,Poa={name:"styleguide",matches:function(a){return a.match(D6)},resourceClass:gK};Rd("styleguide");Fd(Poa);var K0=JSON.parse('{"id":"WorldLoadingScreen_8C60B634_082A_41D9_8EFA_EF01A28B6046","snapshot":{"WorldLoadingScreen_8C60B634_082A_41D9_8EFA_EF01A28B6046":{"rev":64462,"props":{"name":{"value":"world loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(67.99453124999991,685.8828125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1012.7413741929706,539.71484375)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_3EA66FFA_D722_44C5_83CD_449664042D05","rev":2686},{"__ref__":true,"id":"Label_53358198_E9E8_473E_B703_6606BB42A78F","rev":2735},{"__ref__":true,"id":"ModuleProgress_0FBBC9A3_7855_4504_8CFB_81B240CE387D","rev":3846},{"__ref__":true,"id":"HTMLMorph_9A0F0049_0C36_4C8E_BD21_5EE2DAF82976","rev":3744}]},"styleClasses":{"value":["WorldLoadingScreen","Morph","WorldLandingPage","morph"]},"layout":{"value":"__lv_expr__:{VerticalLayout}:lively.morphic:new VerticalLayout({\\n  align: \\"center\\",\\n  autoResize: false,\\n  direction: \\"centered\\",\\n  orderByIndex: false,\\n  padding: null,\\n  reactToSubmorphAnimations: false,\\n  resizeSubmorphs: false,\\n  spacing: 0\\n})"},"metadata":{"value":{"__ref__":true,"id":"B6DE350E-A4EC-4A06-A42B-A763F2520C83","rev":0}}},"lively.serializer-class-info":{"className":"WorldLoadingScreen","module":{"package":{"name":"PartialFreezing","version":"0.1.1-119"},"pathInPackage":"loading-page.js"}}},"Label_3EA66FFA_D722_44C5_83CD_449664042D05":{"rev":2686,"props":{"name":{"value":"json target indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(919.7413741929706,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(72,35)"},"opacity":{"value":0},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":2,"right":2,"bottom":2,"left":2}},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":6,"right":6,"bottom":6,"left":6}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"B8627F7B-1C40-4487-A3D2-9D47FB083D18","rev":0}},"textAndAttributes":{"value":["JSON",null]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(5,2,5,2)"},"fontSize":{"value":20},"fontWeight":{"value":"bold"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"B8627F7B-1C40-4487-A3D2-9D47FB083D18":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"18FDC9C5-BEB9-47E7-9FA5-820458963B92","rev":0}}}},"18FDC9C5-BEB9-47E7-9FA5-820458963B92":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Label_53358198_E9E8_473E_B703_6606BB42A78F":{"rev":2735,"props":{"name":{"value":"broken heart"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(400.37068709648537,111.970703125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(212,211)"},"visible":{"value":false},"submorphs":{"value":[{"__ref__":true,"id":"Text_6BD2DBBB_C527_4D6C_81AD_7412BD698DD1","rev":2734}]},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"textAndAttributes":{"value":["\uf7a9",{"__ref__":true,"id":"33A9B87A-AAC6-4A5B-A9C3-65D5A0B5EB1E","rev":0}]},"fontSize":{"value":211.064},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(231,76,60)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"Text_6BD2DBBB_C527_4D6C_81AD_7412BD698DD1":{"rev":2734,"props":{"name":{"value":"error text"},"nativeCursor":{"value":"default"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-66.55859375,211)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(345.1171875,104.7734375)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"styleClasses":{"value":["Text","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"right":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"bottom":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"left":[0.09019607843137255,0.6274509803921569,0.984313725490196,1]}},"fixedWidth":{"value":true},"fixedHeight":{"value":true},"readOnly":{"value":true},"fontSize":{"value":22},"fontWeight":{"value":"bold"},"textAlign":{"value":"center"},"lineWrapping":{"value":true},"anchors":{"value":[]},"selections":{"key":"selections","verbatim":true,"value":[{"start":{"row":0,"column":62},"end":{"row":0,"column":62}}]},"textAndAttributes":{"key":"textAndAttributes","value":["Sorry, the world you requested can not be found on the server.",null]}},"lively.serializer-class-info":{"className":"Text","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/morph.js"}},"cachedLineBounds":[]},"33A9B87A-AAC6-4A5B-A9C3-65D5A0B5EB1E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"heart-broken"}}},"ModuleProgress_0FBBC9A3_7855_4504_8CFB_81B240CE387D":{"rev":3846,"props":{"_tickingScripts":{"value":[{"__ref__":true,"id":"50166AE3-FCCA-428B-AB0B-032126B4CAEF","rev":0}]},"name":{"value":"package loading indicator"},"master":{"value":"__lv_expr__:({\\"auto\\":\\"styleguide://partial freezing/package loading progress indicator\\"})"},"blur":{"value":0},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(14.940511315235426,187.92724609375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(982.8603515624998,163.8603515625)"},"opacity":{},"submorphs":{"value":[{"__ref__":true,"id":"Path_CF5DCA21_3E2F_4DB3_8AB8_8FC97486540F","rev":64464},{"__ref__":true,"id":"Morph_F4849FF8_1FD6_4566_A2FA_28F5751CFB53","rev":3836},{"__ref__":true,"id":"Morph_0AF7BDC3_6B69_455C_8C5A_EC45E20A787F","rev":3837},{"__ref__":true,"id":"Morph_E47A69BD_C419_4B4B_B0DC_156C1023B674","rev":3838},{"__ref__":true,"id":"Morph_6507683B_FF7E_4001_9258_6D0852953E39","rev":3839},{"__ref__":true,"id":"Morph_E0B25E2E_C922_4DA5_89FF_0D66E1C1D01B","rev":3840},{"__ref__":true,"id":"Morph_566FFC5E_8AE5_481B_A75F_79EB13B7CCC4","rev":3841},{"__ref__":true,"id":"Morph_9400D444_D204_4E12_85B3_4862D3B4D85E","rev":3842},{"__ref__":true,"id":"Morph_0DEEC65A_5E33_49DE_AE60_E6D1F97C9AE3","rev":3843},{"__ref__":true,"id":"Morph_677E5FA3_5FAB_4736_ACC2_23FBD62F96CB","rev":3844},{"__ref__":true,"id":"Morph_D0695608_B35A_4241_B7A5_EBB1F834C6AC","rev":3845}]},"styleClasses":{"value":["ModuleProgress","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D1E1E3D4-725A-47FE-B2E6-6533BB710C19","rev":0}}},"lively.serializer-class-info":{"className":"ModuleProgress","module":{"package":{"name":"ModuleProgress","version":"0.1.1-109"},"pathInPackage":"index.js"}}},"50166AE3-FCCA-428B-AB0B-032126B4CAEF":{"rev":0,"props":{"_rev":{"value":0},"suspended":{"value":true},"stopped":{"value":false},"tickTime":{"value":null},"type":{"value":"requestAnimationFrame"},"currentTimeout":{"value":7432},"target":{"value":{"__ref__":true,"id":"ModuleProgress_0FBBC9A3_7855_4504_8CFB_81B240CE387D","rev":3846}},"selector":{"value":"updateProgressBar"},"args":{"value":[]}},"lively.serializer-class-info":{"className":"TargetScript","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"ticking.js"}}},"Path_CF5DCA21_3E2F_4DB3_8AB8_8FC97486540F":{"rev":64464,"props":{"name":{"value":"progress path"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(20,0)"},"visible":{"value":false},"styleClasses":{"value":["Path","Morph","morph"]},"borderColor":{"key":"borderColor","value":"__lv_expr__:{Color,Color}:lively.graphics/color.js:{pt,rect}:lively.graphics/geometry-2d.js:Color.rgb(127,140,141)"},"metadata":{"value":{"__ref__":true,"id":"3EBC8371-86A1-47B7-A842-5747752DBA68","rev":0}},"vertices":{"value":["__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(0,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})","__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(20,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})"]},"endMarker":{"value":{"__ref__":true,"id":"end-marker","rev":0}}},"lively.serializer-class-info":{"className":"Path","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"3EBC8371-86A1-47B7-A842-5747752DBA68":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"arrow\\", _id: \\"f5486b4a5f64aed6413e16fdb4e4def6b7648b7f\\"})"}}},"end-marker":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"marker"},"id":{"value":"end-marker"},"viewBox":{"value":"0 0 10 10"},"refX":{"value":"5"},"refY":{"value":"5"},"markerWidth":{"value":"5"},"markerHeight":{"value":"5"},"orient":{"value":"auto"},"children":{"value":[{"__ref__":true,"id":"F781A461-D566-4DB7-A85F-D7CD3C47686E","rev":0}]},"fill":{"value":"rgba(127,140,141,1)"}}},"F781A461-D566-4DB7-A85F-D7CD3C47686E":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"path"},"d":{"value":"M0,0 L10,5 L0,10 z"}}},"Morph_F4849FF8_1FD6_4566_A2FA_28F5751CFB53":{"rev":3836,"props":{"name":{"value":"stage lang"},"tooltip":{"value":""},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_10760DE9_3A64_4B7A_97B8_1512F8AC332A","rev":3794},{"__ref__":true,"id":"Label_214137D5_9DDA_4343_BF06_1D4FEBA1ADD6","rev":3823},{"__ref__":true,"id":"Ellipse_E1E9F65C_C9F4_43ED_B004_5EDD1969C539","rev":2861}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"C8B548FA-9E76-4287-9353-74389C7038B2","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_10760DE9_3A64_4B7A_97B8_1512F8AC332A":{"rev":3794,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"DD474D41-4097-45A1-BB1C-6E49D57BECA1","rev":0}},"textAndAttributes":{"value":["\uf1ab",{"__ref__":true,"id":"A1D35530-3134-4EA6-89A3-4EB5C2EC3A7C","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"DD474D41-4097-45A1-BB1C-6E49D57BECA1":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"2C8FA5A1-B4FB-40BE-9419-B03001625FA6","rev":0}}}},"2C8FA5A1-B4FB-40BE-9419-B03001625FA6":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"A1D35530-3134-4EA6-89A3-4EB5C2EC3A7C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"language"}}},"Label_214137D5_9DDA_4343_BF06_1D4FEBA1ADD6":{"rev":3823,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7FB4B4FD-E380-4C49-AD66-D40F5728A72E","rev":0}},"textAndAttributes":{"value":["lang",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"7FB4B4FD-E380-4C49-AD66-D40F5728A72E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"FA86ACB0-6821-4654-BA87-75479C4B93D3","rev":0}}}},"FA86ACB0-6821-4654-BA87-75479C4B93D3":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_E1E9F65C_C9F4_43ED_B004_5EDD1969C539":{"rev":2861,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_E9933DD3_CCF1_4F11_9866_2BC4AB84D5DB","rev":3792},{"__ref__":true,"id":"Label_EC6DA547_E998_4849_8B2D_C2081138C35C","rev":3793}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"9B9F3EA3-2F3E-4DE2-9761-031BB3F04544","rev":0}},"metadata":{"value":{"__ref__":true,"id":"11CB7E0C-A243-4771-9302-102F5ACDC7AB","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_E9933DD3_CCF1_4F11_9866_2BC4AB84D5DB":{"rev":3792,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"4C194B85-7F91-489C-880C-063FF1060BCA","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"14C7199B-F66B-4F92-A0EE-F57F6BEE96AE","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"4C194B85-7F91-489C-880C-063FF1060BCA":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"6A82B096-A31E-47F2-9F13-2F783520CF28","rev":0}}}},"6A82B096-A31E-47F2-9F13-2F783520CF28":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"14C7199B-F66B-4F92-A0EE-F57F6BEE96AE":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_EC6DA547_E998_4849_8B2D_C2081138C35C":{"rev":3793,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"ABB6F1AF-008D-4DC5-AB31-C2D7AB81C7B4","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"5B1B2A3E-0B4B-41CA-B626-FD7411CB3A1B","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"ABB6F1AF-008D-4DC5-AB31-C2D7AB81C7B4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"AC02F79C-0CC5-4F3B-BA9C-737BD5ADCFAD","rev":0}}}},"AC02F79C-0CC5-4F3B-BA9C-737BD5ADCFAD":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"5B1B2A3E-0B4B-41CA-B626-FD7411CB3A1B":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"9B9F3EA3-2F3E-4DE2-9761-031BB3F04544":{"rev":0,"props":{"_rev":{"value":0}}},"11CB7E0C-A243-4771-9302-102F5ACDC7AB":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"C8B548FA-9E76-4287-9353-74389C7038B2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_0AF7BDC3_6B69_455C_8C5A_EC45E20A787F":{"rev":3837,"props":{"name":{"value":"stage ast"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(104,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(46.86035156249977,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Ellipse_C028C0B4_9FE7_4A35_B71A_B49101A94B68","rev":2925},{"__ref__":true,"id":"Label_E7B24B83_DE34_41BC_939E_F9DE46E68765","rev":3797},{"__ref__":true,"id":"Label_B251E3EC_687E_4527_956F_4BE7A6AEC760","rev":3824}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"FF320BE2-1949-4207-84B0-989C850F9ECC","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Ellipse_C028C0B4_9FE7_4A35_B71A_B49101A94B68":{"rev":2925,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_983A4A6B_7EB2_44B5_B73F_7B7DDD279A3F","rev":3795},{"__ref__":true,"id":"Label_368DE520_4888_41B2_8024_59964FBC9935","rev":3796}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"BBAAD9F1-789F-4D9C-A981-48C0D284128B","rev":0}},"metadata":{"value":{"__ref__":true,"id":"1F613129-CA77-459E-BC1B-929D80D05134","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_983A4A6B_7EB2_44B5_B73F_7B7DDD279A3F":{"rev":3795,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2E7C3E42-65E5-4F79-B763-C81A331AE4E5","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"468D00C5-BBF0-4BDD-A32D-A8572ED88799","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"2E7C3E42-65E5-4F79-B763-C81A331AE4E5":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"6AE5A6D1-34A4-48CA-A30A-FFBB5836FBDE","rev":0}}}},"6AE5A6D1-34A4-48CA-A30A-FFBB5836FBDE":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"468D00C5-BBF0-4BDD-A32D-A8572ED88799":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_368DE520_4888_41B2_8024_59964FBC9935":{"rev":3796,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"AFDF611F-317F-4F51-A899-7E03C16619AA","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"B7294DD6-8F97-4C7F-A6D8-E6E68DE79AC4","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"AFDF611F-317F-4F51-A899-7E03C16619AA":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"B77C745A-C34F-4DC6-9248-90B8622A38B1","rev":0}}}},"B77C745A-C34F-4DC6-9248-90B8622A38B1":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"B7294DD6-8F97-4C7F-A6D8-E6E68DE79AC4":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"BBAAD9F1-789F-4D9C-A981-48C0D284128B":{"rev":0,"props":{"_rev":{"value":0}}},"1F613129-CA77-459E-BC1B-929D80D05134":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_E7B24B83_DE34_41BC_939E_F9DE46E68765":{"rev":3797,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"AEE21694-DC09-484D-9486-5E6661C80B57","rev":0}},"textAndAttributes":{"value":["\uf1bb",{"__ref__":true,"id":"17CBF6C6-1D64-45DF-9E49-2934FF4F2EC6","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"AEE21694-DC09-484D-9486-5E6661C80B57":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"94E34EB9-10DF-4285-BA31-F7A7E7BDB795","rev":0}}}},"94E34EB9-10DF-4285-BA31-F7A7E7BDB795":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"17CBF6C6-1D64-45DF-9E49-2934FF4F2EC6":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"tree"}}},"Label_B251E3EC_687E_4527_956F_4BE7A6AEC760":{"rev":3824,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(22,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E3895C46-AE4D-4750-B3A5-D47399946CFC","rev":0}},"textAndAttributes":{"value":["ast",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E3895C46-AE4D-4750-B3A5-D47399946CFC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"3963647B-FCE3-4C9D-84EC-1C4763007A10","rev":0}}}},"3963647B-FCE3-4C9D-84EC-1C4763007A10":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"FF320BE2-1949-4207-84B0-989C850F9ECC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_E47A69BD_C419_4B4B_B0DC_156C1023B674":{"rev":3838,"props":{"name":{"value":"stage source-transform"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(173.86035156249977,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(143,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_57BFAB85_CB58_4C61_A3EE_D4CE5272F199","rev":3825},{"__ref__":true,"id":"Ellipse_4C3DD470_0F05_4221_A2C9_208BB43D2F85","rev":3040},{"__ref__":true,"id":"Label_18DE39FA_5C65_42BA_87C7_7F2BB8F7EBF6","rev":3800}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E7C00F1E-D003-49D4-9563-53DD0A6B862C","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_57BFAB85_CB58_4C61_A3EE_D4CE5272F199":{"rev":3825,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(123,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"40F71393-8F6B-45F5-A4E5-CCF1B00E9FB1","rev":0}},"textAndAttributes":{"value":["source transform",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"40F71393-8F6B-45F5-A4E5-CCF1B00E9FB1":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"C92E8ADB-74C8-4902-9F5B-4BC460172EE1","rev":0}}}},"C92E8ADB-74C8-4902-9F5B-4BC460172EE1":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_4C3DD470_0F05_4221_A2C9_208BB43D2F85":{"rev":3040,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58.93017578124979,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_38B0A2A7_AC90_42B3_9023_F54ED4739DA0","rev":3798},{"__ref__":true,"id":"Label_784FF0D8_8B35_4A91_B6E1_80615F222B29","rev":3799}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"79104588-504D-4F73-9F4B-D103FE2B02B8","rev":0}},"metadata":{"value":{"__ref__":true,"id":"C88CEF92-D17C-4D9D-B245-A4DAF051E53B","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_38B0A2A7_AC90_42B3_9023_F54ED4739DA0":{"rev":3798,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.13964843750044,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"7A14EEEE-7F6E-47B9-9F4F-E4154C0F9E1F","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"F35B51C1-0732-4009-B900-9A1F48478218","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"7A14EEEE-7F6E-47B9-9F4F-E4154C0F9E1F":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7BA7F12E-C7A2-486D-806A-67E421416B80","rev":0}}}},"7BA7F12E-C7A2-486D-806A-67E421416B80":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"F35B51C1-0732-4009-B900-9A1F48478218":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_784FF0D8_8B35_4A91_B6E1_80615F222B29":{"rev":3799,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"0E0444AE-3E26-4E72-A5ED-1D1DB064FE00","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"B1089468-DE35-4E64-A760-93385A55E25A","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0E0444AE-3E26-4E72-A5ED-1D1DB064FE00":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"5589CE71-24D2-43CE-A5D9-AC6C40FC4820","rev":0}}}},"5589CE71-24D2-43CE-A5D9-AC6C40FC4820":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"B1089468-DE35-4E64-A760-93385A55E25A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"79104588-504D-4F73-9F4B-D103FE2B02B8":{"rev":0,"props":{"_rev":{"value":0}}},"C88CEF92-D17C-4D9D-B245-A4DAF051E53B":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_18DE39FA_5C65_42BA_87C7_7F2BB8F7EBF6":{"rev":3800,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(52.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"725ECB84-6BAC-4F47-A3F3-C1AB0F5D5DE9","rev":0}},"textAndAttributes":{"value":["\uf079",{"__ref__":true,"id":"5C22BFD9-CCB2-466D-A12F-188E8EABE23F","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"725ECB84-6BAC-4F47-A3F3-C1AB0F5D5DE9":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"FD418860-3C79-49EE-A4BD-349D5FC18410","rev":0}}}},"FD418860-3C79-49EE-A4BD-349D5FC18410":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"5C22BFD9-CCB2-466D-A12F-188E8EABE23F":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"retweet"}}},"E7C00F1E-D003-49D4-9563-53DD0A6B862C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_6507683B_FF7E_4001_9258_6D0852953E39":{"rev":3839,"props":{"name":{"value":"stage classes"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(339.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(74,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_5C0EFF01_4C2F_447B_A94F_C20211A606AD","rev":3826},{"__ref__":true,"id":"Ellipse_46B9DBC4_8841_464D_9C63_3147CE795EAC","rev":3137},{"__ref__":true,"id":"Label_339D400A_AD76_4EB3_A6B7_91576DCA3B23","rev":3803}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"742F5B01-7594-4CFB-B378-048CFD2F01B7","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_5C0EFF01_4C2F_447B_A94F_C20211A606AD":{"rev":3826,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2A77F151-EF96-4BCC-89EB-CA9410AAC723","rev":0}},"textAndAttributes":{"value":["classes",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"2A77F151-EF96-4BCC-89EB-CA9410AAC723":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"9469F08F-7019-46A5-B7B0-423EDD64C840","rev":0}}}},"9469F08F-7019-46A5-B7B0-423EDD64C840":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_46B9DBC4_8841_464D_9C63_3147CE795EAC":{"rev":3137,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_B1424142_3C9D_4505_8459_8A3509FAB6B0","rev":3801},{"__ref__":true,"id":"Label_6BB53F26_7406_49CA_AA33_53F5DE0BDC9A","rev":3802}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"EF16B424-D3B1-47BB-9FC9-C450EFB769F9","rev":0}},"metadata":{"value":{"__ref__":true,"id":"2EAC7469-1DDF-44F4-91F2-826938F0B37E","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_B1424142_3C9D_4505_8459_8A3509FAB6B0":{"rev":3801,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"45A97A1D-C996-49A6-877F-C05D32BABD85","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"2E5FB441-56D5-4DE9-9409-177C223E6C6C","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"45A97A1D-C996-49A6-877F-C05D32BABD85":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7F572A87-AC03-46DF-B320-0EED6479D335","rev":0}}}},"7F572A87-AC03-46DF-B320-0EED6479D335":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"2E5FB441-56D5-4DE9-9409-177C223E6C6C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_6BB53F26_7406_49CA_AA33_53F5DE0BDC9A":{"rev":3802,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"15869E22-9AAB-4937-B7F1-2CE7443D9F6E","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"F5480EC3-823F-4EFB-BE91-58BAD41D0D18","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"15869E22-9AAB-4937-B7F1-2CE7443D9F6E":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"68303A4B-1D89-499C-BDAF-A23A5491FDCA","rev":0}}}},"68303A4B-1D89-499C-BDAF-A23A5491FDCA":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"F5480EC3-823F-4EFB-BE91-58BAD41D0D18":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"EF16B424-D3B1-47BB-9FC9-C450EFB769F9":{"rev":0,"props":{"_rev":{"value":0}}},"2EAC7469-1DDF-44F4-91F2-826938F0B37E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_339D400A_AD76_4EB3_A6B7_91576DCA3B23":{"rev":3803,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(18,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"26245CAE-0956-4AAA-A488-2D31788E0E39","rev":0}},"textAndAttributes":{"value":["\uf0e8",{"__ref__":true,"id":"B3C05CF0-BD3F-4FC3-9819-D4066B58A4A8","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"26245CAE-0956-4AAA-A488-2D31788E0E39":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"856D1A7C-0317-42F5-96E9-6C7E8721F912","rev":0}}}},"856D1A7C-0317-42F5-96E9-6C7E8721F912":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"B3C05CF0-BD3F-4FC3-9819-D4066B58A4A8":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"sitemap"}}},"742F5B01-7594-4CFB-B378-048CFD2F01B7":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_E0B25E2E_C922_4DA5_89FF_0D66E1C1D01B":{"rev":3840,"props":{"name":{"value":"stage vm"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(436.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_B284BDF6_FF85_479A_9E3C_5BF6E99C6140","rev":3827},{"__ref__":true,"id":"Ellipse_A2BEB244_6469_4EC0_A2A6_BCAE2A2D5781","rev":3234},{"__ref__":true,"id":"Label_D0B22B5D_A907_41FF_A71D_B0F14E9350CD","rev":3806}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3E50EF0C-D45D-44CD-B957-826EB1AF9668","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_B284BDF6_FF85_479A_9E3C_5BF6E99C6140":{"rev":3827,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17.5,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0F163AB9-3674-4A7C-8793-95F0AD650DFF","rev":0}},"textAndAttributes":{"value":["VM",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"0F163AB9-3674-4A7C-8793-95F0AD650DFF":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"4A94AFE3-3A3E-4D04-818D-F599AAE6011E","rev":0}}}},"4A94AFE3-3A3E-4D04-818D-F599AAE6011E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_A2BEB244_6469_4EC0_A2A6_BCAE2A2D5781":{"rev":3234,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16.430175781249776,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_429DEE2C_92A2_4590_8870_E59932770135","rev":3804},{"__ref__":true,"id":"Label_9938B7E5_BA47_48BD_B25A_AC632AD2EB6F","rev":3805}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"6DC51EA5-E264-4DB9-B8A5-21697CEC85A1","rev":0}},"metadata":{"value":{"__ref__":true,"id":"CDA43A94-163E-4203-80A1-DE83F077AF5B","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_429DEE2C_92A2_4590_8870_E59932770135":{"rev":3804,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"EABEA23C-26B9-4875-ACC8-4A9182E9E57B","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"A00F6297-696F-449C-9722-79FDF28B4FE9","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"EABEA23C-26B9-4875-ACC8-4A9182E9E57B":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"4AF9CC20-5334-4887-8EF3-7BCDDDCB3785","rev":0}}}},"4AF9CC20-5334-4887-8EF3-7BCDDDCB3785":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"A00F6297-696F-449C-9722-79FDF28B4FE9":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_9938B7E5_BA47_48BD_B25A_AC632AD2EB6F":{"rev":3805,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"BF36E942-E60D-4A89-95A4-BBDFB47F4493","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"74F19674-EFC8-4FF5-9880-20A91B5137D9","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"BF36E942-E60D-4A89-95A4-BBDFB47F4493":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7B339A62-182E-47F4-9B84-EB6E51B9A710","rev":0}}}},"7B339A62-182E-47F4-9B84-EB6E51B9A710":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"74F19674-EFC8-4FF5-9880-20A91B5137D9":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"6DC51EA5-E264-4DB9-B8A5-21697CEC85A1":{"rev":0,"props":{"_rev":{"value":0}}},"CDA43A94-163E-4203-80A1-DE83F077AF5B":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_D0B22B5D_A907_41FF_A71D_B0F14E9350CD":{"rev":3806,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"E4CC66A8-BA4E-4212-A49A-D1996B048096","rev":0}},"textAndAttributes":{"value":["\uf085",{"__ref__":true,"id":"0FE8359D-8CBF-45F2-9565-6C5B7D94C034","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E4CC66A8-BA4E-4212-A49A-D1996B048096":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"4B1E3F3F-19B7-435B-AF22-2F6C4F2F2841","rev":0}}}},"4B1E3F3F-19B7-435B-AF22-2F6C4F2F2841":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"0FE8359D-8CBF-45F2-9565-6C5B7D94C034":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"3E50EF0C-D45D-44CD-B957-826EB1AF9668":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_566FFC5E_8AE5_481B_A75F_79EB13B7CCC4":{"rev":3841,"props":{"name":{"value":"stage modules"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(517.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(83,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_40337BF0_8F9F_4541_BD83_FEBC5D737B9B","rev":3828},{"__ref__":true,"id":"Ellipse_FF175A4D_D4E2_4E3B_AD48_E2949FF4924F","rev":3331},{"__ref__":true,"id":"Label_0F1944DC_B186_4F65_893C_B6F9FF59CE73","rev":3809}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A04D62A0-DF1D-4B52-8516-A56529DCC2C3","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_40337BF0_8F9F_4541_BD83_FEBC5D737B9B":{"rev":3828,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(63,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"CD9A4E80-558A-4363-AAC2-2DDA589406F7","rev":0}},"textAndAttributes":{"value":["modules",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"CD9A4E80-558A-4363-AAC2-2DDA589406F7":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"5DB9C847-338A-4E32-85D5-C55633B7FBB9","rev":0}}}},"5DB9C847-338A-4E32-85D5-C55633B7FBB9":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_FF175A4D_D4E2_4E3B_AD48_E2949FF4924F":{"rev":3331,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(28.93017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_62A6E01A_77D7_4316_904F_DE988849709B","rev":3807},{"__ref__":true,"id":"Label_FA732177_8861_40D5_91E6_C5E0BF9B0187","rev":3808}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"FF3EAC6E-4FEA-463A-8C9F-2F79C3FF6C09","rev":0}},"metadata":{"value":{"__ref__":true,"id":"1D88C502-E83F-4B30-BFD3-7738B41E2BA6","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_62A6E01A_77D7_4316_904F_DE988849709B":{"rev":3807,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"8D496402-1B95-4ACC-9DB7-C4C48B3C40A0","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"0CC5F245-AB16-4D94-BFA4-BA5DD9F4C7DF","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"8D496402-1B95-4ACC-9DB7-C4C48B3C40A0":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"8F8996BF-FDE6-4D91-86C9-74A95D90485C","rev":0}}}},"8F8996BF-FDE6-4D91-86C9-74A95D90485C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"0CC5F245-AB16-4D94-BFA4-BA5DD9F4C7DF":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_FA732177_8861_40D5_91E6_C5E0BF9B0187":{"rev":3808,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"E68A815E-C260-4130-86B9-08D46A649CAE","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"3F03C07A-71C6-41C7-BF71-A89A4E6EFC52","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E68A815E-C260-4130-86B9-08D46A649CAE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7A5775C3-B7D1-4A89-BF4C-70B878BAC97F","rev":0}}}},"7A5775C3-B7D1-4A89-BF4C-70B878BAC97F":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"3F03C07A-71C6-41C7-BF71-A89A4E6EFC52":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"FF3EAC6E-4FEA-463A-8C9F-2F79C3FF6C09":{"rev":0,"props":{"_rev":{"value":0}}},"1D88C502-E83F-4B30-BFD3-7738B41E2BA6":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_0F1944DC_B186_4F65_893C_B6F9FF59CE73":{"rev":3809,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(22.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"4B1BEF58-4C02-47A7-A82C-D1D43D70667D","rev":0}},"textAndAttributes":{"value":["\uf49e",{"__ref__":true,"id":"1776B9F8-5B93-4120-87F8-7A762B53E038","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"4B1BEF58-4C02-47A7-A82C-D1D43D70667D":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"98E4A3AD-BC30-4213-8081-8DC5ED23641E","rev":0}}}},"98E4A3AD-BC30-4213-8081-8DC5ED23641E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"1776B9F8-5B93-4120-87F8-7A762B53E038":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"A04D62A0-DF1D-4B52-8516-A56529DCC2C3":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_9400D444_D204_4E12_85B3_4862D3B4D85E":{"rev":3842,"props":{"name":{"value":"stage user"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(623.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(52,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_A014276C_A277_49CF_BE2F_F0E1409C6ACC","rev":3829},{"__ref__":true,"id":"Ellipse_A5EE7120_55C8_407E_9CD8_63A21651F986","rev":3428},{"__ref__":true,"id":"Label_3DDE2676_D9C9_4B2B_84D4_4448BC4C28A9","rev":3812}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"397E75C7-784F-44DA-BDFC-91B1241DF7A5","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_A014276C_A277_49CF_BE2F_F0E1409C6ACC":{"rev":3829,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(32,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"72FB1969-2251-4680-A08F-39DA34FBD13B","rev":0}},"textAndAttributes":{"value":["user",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"72FB1969-2251-4680-A08F-39DA34FBD13B":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"95A95071-CA1F-407B-9A53-73EFE68673D1","rev":0}}}},"95A95071-CA1F-407B-9A53-73EFE68673D1":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_A5EE7120_55C8_407E_9CD8_63A21651F986":{"rev":3428,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13.430175781249776,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_1BEEFE42_57FA_4D92_8EE5_7FB0760F09C2","rev":3810},{"__ref__":true,"id":"Label_05F8B6FA_6612_4DF7_A45F_036557F4BA79","rev":3811}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"E3DCBE2A-D89D-4138-B6AD-36A3866DA8C4","rev":0}},"metadata":{"value":{"__ref__":true,"id":"B60A87F8-DD94-4D35-BD03-EE1492B3E816","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_1BEEFE42_57FA_4D92_8EE5_7FB0760F09C2":{"rev":3810,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"736805BA-5C10-4EB0-B850-9EC2B2E8A95D","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"7AD221D3-AF16-4399-ADA0-AD02CBFA27E6","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"736805BA-5C10-4EB0-B850-9EC2B2E8A95D":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"E884A3DA-38D6-4AFC-B14F-3FC4E56EB666","rev":0}}}},"E884A3DA-38D6-4AFC-B14F-3FC4E56EB666":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"7AD221D3-AF16-4399-ADA0-AD02CBFA27E6":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_05F8B6FA_6612_4DF7_A45F_036557F4BA79":{"rev":3811,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"36B6616D-448C-4B39-B5C0-8E96664B5171","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"5B72FBA1-F9C1-46E2-B12F-EEE7F64483D3","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"36B6616D-448C-4B39-B5C0-8E96664B5171":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"2BAA0C94-2895-40FB-83C0-CDFE334B8D6F","rev":0}}}},"2BAA0C94-2895-40FB-83C0-CDFE334B8D6F":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"5B72FBA1-F9C1-46E2-B12F-EEE7F64483D3":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"E3DCBE2A-D89D-4138-B6AD-36A3866DA8C4":{"rev":0,"props":{"_rev":{"value":0}}},"B60A87F8-DD94-4D35-BD03-EE1492B3E816":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_3DDE2676_D9C9_4B2B_84D4_4448BC4C28A9":{"rev":3812,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(11,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F07F6A7A-F1C6-4822-A239-EE37FC596783","rev":0}},"textAndAttributes":{"value":["\uf2bd",{"__ref__":true,"id":"BCDDC4E0-4079-4E26-9408-E5D2177F2DF3","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F07F6A7A-F1C6-4822-A239-EE37FC596783":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"8DAC4B4F-7302-41BE-9590-66F287A93EDF","rev":0}}}},"8DAC4B4F-7302-41BE-9590-66F287A93EDF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"BCDDC4E0-4079-4E26-9408-E5D2177F2DF3":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"user-circle"}}},"397E75C7-784F-44DA-BDFC-91B1241DF7A5":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_0DEEC65A_5E33_49DE_AE60_E6D1F97C9AE3":{"rev":3843,"props":{"name":{"value":"stage storage"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(698.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(74,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_94E5630E_53DA_49A8_A636_7A57C929824F","rev":3830},{"__ref__":true,"id":"Ellipse_B0418C01_4B95_4A2B_B73F_C7E25EEB0954","rev":3525},{"__ref__":true,"id":"Label_A4719982_4680_480C_A7D9_B5FE186D478A","rev":3815}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"09D96CD4-D21E-4677-9AA9-4BBB794ECAF2","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_94E5630E_53DA_49A8_A636_7A57C929824F":{"rev":3830,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"FB608EBC-D3CC-4AF6-9DC0-D5818DADD50B","rev":0}},"textAndAttributes":{"value":["storage",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"FB608EBC-D3CC-4AF6-9DC0-D5818DADD50B":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"5A0ECC4C-8978-4466-BC75-70AB6492AC8D","rev":0}}}},"5A0ECC4C-8978-4466-BC75-70AB6492AC8D":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_B0418C01_4B95_4A2B_B73F_C7E25EEB0954":{"rev":3525,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_D4529E17_B3CB_42D3_B8C9_DA5143D6B88B","rev":3813},{"__ref__":true,"id":"Label_80A47A79_4E05_4639_9E94_12FBF4A68570","rev":3814}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"070351B8-51CE-44AE-A3DE-FC799464CEDC","rev":0}},"metadata":{"value":{"__ref__":true,"id":"6761656E-A3B4-4E75-9573-7503E0EBDB15","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_D4529E17_B3CB_42D3_B8C9_DA5143D6B88B":{"rev":3813,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"849AAE89-2ED0-422D-AF83-F684280E55D7","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"85579A69-B89C-4435-A7FC-E4EC683593C6","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"849AAE89-2ED0-422D-AF83-F684280E55D7":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"8FA1F7E9-7880-4566-805D-DAACE46B47F5","rev":0}}}},"8FA1F7E9-7880-4566-805D-DAACE46B47F5":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"85579A69-B89C-4435-A7FC-E4EC683593C6":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_80A47A79_4E05_4639_9E94_12FBF4A68570":{"rev":3814,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"84B07783-8769-4052-9012-5C7C4272DA20","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"EC0EEA3F-1AD7-4122-BFA6-9EC9A4972E18","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"84B07783-8769-4052-9012-5C7C4272DA20":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C65EE04D-F6DC-4A71-AD54-B93AAFFE2DCA","rev":0}}}},"C65EE04D-F6DC-4A71-AD54-B93AAFFE2DCA":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"EC0EEA3F-1AD7-4122-BFA6-9EC9A4972E18":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"070351B8-51CE-44AE-A3DE-FC799464CEDC":{"rev":0,"props":{"_rev":{"value":0}}},"6761656E-A3B4-4E75-9573-7503E0EBDB15":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_A4719982_4680_480C_A7D9_B5FE186D478A":{"rev":3815,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A3BDA36E-5C67-4117-9FC0-1B63250BDB80","rev":0}},"textAndAttributes":{"value":["\uf1c0",{"__ref__":true,"id":"E7802EE9-1746-4F38-830E-1331608EB0EC","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"A3BDA36E-5C67-4117-9FC0-1B63250BDB80":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"E0F75C91-837C-46CC-AB2E-4FC22BD70A50","rev":0}}}},"E0F75C91-837C-46CC-AB2E-4FC22BD70A50":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"E7802EE9-1746-4F38-830E-1331608EB0EC":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"database"}}},"09D96CD4-D21E-4677-9AA9-4BBB794ECAF2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_677E5FA3_5FAB_4736_ACC2_23FBD62F96CB":{"rev":3844,"props":{"name":{"value":"stage morphic"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(795.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(80,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_D418F74E_BF2D_4B7F_BA3C_01977517B4B6","rev":3831},{"__ref__":true,"id":"Ellipse_9FE26246_4D5E_41C2_9EBF_4539C9362777","rev":3622},{"__ref__":true,"id":"Label_A60A7905_A301_454E_9843_C8F71D899CB0","rev":3818}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"AFE6C8DF-CB29-44F1-85FA-2860D421F6AE","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_D418F74E_BF2D_4B7F_BA3C_01977517B4B6":{"rev":3831,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(60,20)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"217C6964-F901-40B2-92F0-5C3FA0360274","rev":0}},"textAndAttributes":{"value":["morphic",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"217C6964-F901-40B2-92F0-5C3FA0360274":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"450CC58B-0C69-435F-B6DE-3540EE3F9AEC","rev":0}}}},"450CC58B-0C69-435F-B6DE-3540EE3F9AEC":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_9FE26246_4D5E_41C2_9EBF_4539C9362777":{"rev":3622,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27.43017578124978,80.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_4695A16D_D0E5_422E_86BF_60B9F73C5F92","rev":3816},{"__ref__":true,"id":"Label_1CFBF958_E22A_46C4_82F0_E9531D4D96F6","rev":3817}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"921DD183-FFF2-46D5-9242-51DD8F026471","rev":0}},"metadata":{"value":{"__ref__":true,"id":"84F88C47-94A1-4D10-9CE3-A008F08EF9F0","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_4695A16D_D0E5_422E_86BF_60B9F73C5F92":{"rev":3816,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"6560DDE2-5B1A-470E-903C-DE4A47E28337","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"370D1520-A176-4766-B931-8CD316FF7663","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"6560DDE2-5B1A-470E-903C-DE4A47E28337":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"4C775C21-677A-49EB-91D7-CD281A514626","rev":0}}}},"4C775C21-677A-49EB-91D7-CD281A514626":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"370D1520-A176-4766-B931-8CD316FF7663":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_1CFBF958_E22A_46C4_82F0_E9531D4D96F6":{"rev":3817,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"AD51EDEE-95D6-41DB-8969-D66C9782E56C","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"16C55B6E-64AA-48EC-A450-709D6EBB42CC","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"AD51EDEE-95D6-41DB-8969-D66C9782E56C":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"0A92825D-F736-4D97-ABAF-CA7DAD6DDEF9","rev":0}}}},"0A92825D-F736-4D97-ABAF-CA7DAD6DDEF9":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"16C55B6E-64AA-48EC-A450-709D6EBB42CC":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"921DD183-FFF2-46D5-9242-51DD8F026471":{"rev":0,"props":{"_rev":{"value":0}}},"84F88C47-94A1-4D10-9CE3-A008F08EF9F0":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_A60A7905_A301_454E_9843_C8F71D899CB0":{"rev":3818,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"03F7CEA9-906D-4746-BEF4-67CB5582B024","rev":0}},"textAndAttributes":{"value":["\uf1b2",{"__ref__":true,"id":"E7B7DD3B-0659-44CE-81D3-04AC62B8C052","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"03F7CEA9-906D-4746-BEF4-67CB5582B024":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"66191E29-A141-4A95-9E1E-403FA3A42220","rev":0}}}},"66191E29-A141-4A95-9E1E-403FA3A42220":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"E7B7DD3B-0659-44CE-81D3-04AC62B8C052":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"AFE6C8DF-CB29-44F1-85FA-2860D421F6AE":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_D0695608_B35A_4241_B7A5_EBB1F834C6AC":{"rev":3845,"props":{"name":{"value":"stage world"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(898.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(61,117.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_6BDF71EA_F67A_41F8_A591_1EDD7FDEF1C0","rev":3832},{"__ref__":true,"id":"Ellipse_B7EE7A5F_9A44_4707_9FD4_008441AAC76C","rev":3703},{"__ref__":true,"id":"Label_1CEE5FB8_6E4A_4661_91D1_0C1D68EE3846","rev":3821}]},"styleClasses":{"value":["Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A4A4A952-F2F2-47AC-BFA0-E0A98C942E99","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_6BDF71EA_F67A_41F8_A591_1EDD7FDEF1C0":{"rev":3832,"props":{"name":{"value":"label"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(41,20)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"4DA67828-E112-4A52-B6CF-189B8258E769","rev":0}},"textAndAttributes":{"value":["world",null]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"4DA67828-E112-4A52-B6CF-189B8258E769":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"75CCA693-62EA-463C-8733-D92280E6076C","rev":0}}}},"75CCA693-62EA-463C-8733-D92280E6076C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_B7EE7A5F_9A44_4707_9FD4_008441AAC76C":{"rev":3703,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17.930175781249996,80.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_E75B598E_BC52_4D95_8CB3_553CD86B8E32","rev":3819},{"__ref__":true,"id":"Label_E2A5A044_1843_434B_93D5_72A2B4762C69","rev":3820}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"installedFonts":{"value":{"__ref__":true,"id":"D1201666-4C74-4D27-8735-93BAC548B8B9","rev":0}},"metadata":{"value":{"__ref__":true,"id":"5E640FCF-01F6-4178-8436-A0931B74F325","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_E75B598E_BC52_4D95_8CB3_553CD86B8E32":{"rev":3819,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500004,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A82267D2-F28C-49B9-9BEC-482D0EBC7472","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"23CAF0C3-7A59-44F1-97DC-241BEEA64532","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"A82267D2-F28C-49B9-9BEC-482D0EBC7472":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"E1A2D68A-7AFF-47CB-B388-826B2FBF726C","rev":0}}}},"E1A2D68A-7AFF-47CB-B388-826B2FBF726C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"23CAF0C3-7A59-44F1-97DC-241BEEA64532":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_E2A5A044_1843_434B_93D5_72A2B4762C69":{"rev":3820,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"448BBAE8-DEFA-4536-B923-E3D34D7E531D","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"E377FE87-7708-487E-848A-E3D88F17CC6E","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"448BBAE8-DEFA-4536-B923-E3D34D7E531D":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"D876D9F8-87BA-4AE1-BBF7-B709D9E621D9","rev":0}}}},"D876D9F8-87BA-4AE1-BBF7-B709D9E621D9":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"E377FE87-7708-487E-848A-E3D88F17CC6E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"D1201666-4C74-4D27-8735-93BAC548B8B9":{"rev":0,"props":{"_rev":{"value":0}}},"5E640FCF-01F6-4178-8436-A0931B74F325":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_1CEE5FB8_6E4A_4661_91D1_0C1D68EE3846":{"rev":3821,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(15.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"20B0618B-BCEC-4A1A-9AC9-8924945B650E","rev":0}},"textAndAttributes":{"value":["\uf7a2",{"__ref__":true,"id":"CDB10A98-B6F8-4F4C-953B-62F474816D93","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"20B0618B-BCEC-4A1A-9AC9-8924945B650E":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"30380535-028A-4005-AD0B-DE46990F98A0","rev":0}}}},"30380535-028A-4005-AD0B-DE46990F98A0":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"CDB10A98-B6F8-4F4C-953B-62F474816D93":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"A4A4A952-F2F2-47AC-BFA0-E0A98C942E99":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"D1E1E3D4-725A-47FE-B2E6-6533BB710C19":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"package loading progress indicator\\", _id: \\"f64ec4ab4ac2da6a67007e4f1ef82de8a479a583\\"})"}}},"HTMLMorph_9A0F0049_0C36_4C8E_BD21_5EE2DAF82976":{"rev":3744,"props":{"name":{"value":"css loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(36.38826522148531,50.78076171875)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(939.96484375,274.29296875)"},"visible":{"value":false},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"isLayoutable":{"value":false},"metadata":{"value":{"__ref__":true,"id":"C5A2A0A5-83FD-4BE4-A740-B8A6B6CA6E28","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: transparent\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"C5A2A0A5-83FD-4BE4-A740-B8A6B6CA6E28":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}},"B6DE350E-A4EC-4A06-A42B-A763F2520C83":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"},"publishedAlias":{"value":"world-loading-screen"},"excludedPackages":{"value":["kld-intersections","lively.collab"]},"publishedLocation":{"value":"/lively.freezer/loading-screen/"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/PartialFreezing":["local://lively-object-modules/WorldVersionViewer"],"local://lively-object-modules/WorldVersionViewer":[],"local://lively-object-modules/ModuleProgress":[]}}');
lively.resources={resource:sc,loadViaScript:Yp};lively.morphic={loadMorphFromSnapshot:mp};Ia("bP",void 0)}}});System.register("2",["./__root_module__-28353364.js"],function(){return{setters:[function(){}],execute:function(){}}});System.register("3",["./__root_module__-28353364.js","./index-d97c8020.js","./index-2112d28c.js"],function(){return{setters:[function(){},function(){},function(){}],execute:function(){}}});