System.register(["./__root_module__-be0d56fe.js","./index-2aae95d3.js","./color-picker-f9089dd8.js","./index-a225ba89.js","./index-57c34f7a.js"],function(){var Pa,Lb,Vb,Dc,jc,qd,id,Cd,bd,Wc,Zc,zd,me,te,Je,jd,Zd,gc;return{setters:[function($c){Pa=$c.M;Lb=$c.a;Vb=$c.C;Dc=$c.d;jc=$c.i;qd=$c.a9;id=$c.a7;Cd=$c.$;bd=$c.r;Wc=$c.c;Zc=$c.bB;zd=$c.ac;me=$c.b;te=$c.a8;Je=$c.V;jd=$c.bk;Zd=$c.bl;gc=$c.bj},function(){},function(){},function(){},function(){}],execute:function(){var $c=lively.FreezerRuntime.recorderFor("ColorPicker/index.js");
$c.Morph=Pa;$c.arr=Lb;$c.Color=Vb;$c.signal=Dc;var Bd=function(xd){var Ic=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),Ad=Ic.hasOwnProperty("ColorPicker")&&"function"===typeof Ic.ColorPicker?Ic.ColorPicker:Ic.ColorPicker=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(Ad,xd,[{key:"toggleHalos",value:function(Mb){this.withAllSubmorphsDo(function(mb){return mb.halosEnabled=Mb});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(mb){return mb.halosEnabled=
Mb})}},{key:"focusOnMorph",value:function(Mb,mb){var Ac=Mb&&Mb.world();Ac&&(Ac.halos().forEach(function(vc){return vc.remove()}),Ac.withTopBarDo(function(vc){return vc.setEditMode("Hand",!0)}));this._target=Mb;mb.isGradient?(this.ui.gradientControl.setGradient(mb,this),this.ui.colorTypeSelector.selection=mb.type):(this.color=mb,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",value:function(){this.remove();var Mb=this._target&&this._target.world();Mb&&Mb.withTopBarDo(function(mb){return mb.setEditMode("Halo",
!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":$c.signal(this,"value",this.gradientValue);break;case "Solid":$c.signal(this,"value",this.color)}}},{key:"switchMode",value:function(Mb){var mb=["linearGradient","radialGradient"].includes(Mb);this.ui.gradientControl.toggle(mb,this);this.colorMode=Mb;this.update();this.confirm()}},{key:"enterColor",value:function(Mb){this.color=Mb;this.update(this.ui.colorEncoder);
this.confirm()}},{key:"adjustColor",value:function(Mb){this.color=Mb;this.update();this.confirm()}},{key:"adjustOpacity",value:function(Mb){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[Mb]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function(Mb){this.hsb=[Mb].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function(Mb){var mb=$jscomp.makeIterator(Mb);Mb=mb.next().value;
mb=mb.next().value;this.hsb=[this.hsb[0],mb,Mb,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function(Mb){this.confirm()}},{key:"update",value:function(Mb){for(var mb=[],Ac=0;Ac<arguments.length;++Ac)mb[Ac-0]=arguments[Ac];var vc=this;$c.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(mb),[this.ui.colorTypeSelector])).forEach(function(ec){return ec.update(vc)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},
{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable($c.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function(Mb){this.ui.gradientControl.gradientValue=Mb}},color:{derived:!0,get:function(){return $c.Color.hsb.apply($c.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},set:function(Mb){this.hsb=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),
[Mb.a])}},solidOnly:{derived:!0,set:function(Mb){var mb=this.ui.colorTypeSelector;Mb&&(mb.selection="Solid");mb.visible=!Mb}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],Ic,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}($c.Morph);Bd=$c.ColorPicker;$c.default=Bd;var fd=lively.FreezerRuntime.recorderFor("GradientControl/index.js");fd.Morph=Pa;fd.LinearGradient=qd;fd.RadialGradient=id;fd.Color=Vb;fd.rect=Cd;fd.resource=bd;fd.connect=Wc;fd.noUpdate=Zc;fd.signal=Dc;fd.num=zd;fd.arr=Lb;Bd=function(xd){var Ic=
lively.FreezerRuntime.recorderFor("GradientControl/index.js"),Ad=Ic.hasOwnProperty("GradientControl")&&"function"===typeof Ic.GradientControl?Ic.GradientControl:Ic.GradientControl=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(Ad,xd,[{key:"onKeyDown",value:function(Mb){jc._get(Object.getPrototypeOf(Ad.prototype),"onKeyDown",this).call(this,Mb);"Delete"==Mb.keyCombo&&this.removeStop(this.selectedStopControl)}},
{key:"onMouseDown",value:function(Mb){jc._get(Object.getPrototypeOf(Ad.prototype),"onMouseDown",this).call(this,Mb);"gradient preview"==Mb.targetMorph.name&&(Mb=Mb.positionIn(Mb.targetMorph).x/Mb.targetMorph.width,this.addStopAt(Mb))}},{key:"removeStop",value:function(Mb){3>this.gradientValue.stops.length||(fd.arr.remove(this.gradientValue.stops,Mb.stop),this.refresh(),this.confirm())}},{key:"addStopAt",value:function(Mb){var mb=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),Ac=$jscomp.makeIterator(fd.arr.sortBy(fd.arr.sortBy(mb,
function(ec){return Math.abs(ec.offset-Mb)}).slice(0,2),function(ec){return ec.offset})),vc=Ac.next().value;Ac=Ac.next().value;mb.push({color:vc.color.interpolate((Mb-vc.offset)/(Ac.offset-vc.offset),Ac.color),offset:Mb});this.gradientValue.stops=fd.arr.sortBy(mb,function(ec){return ec.offset});this.refresh();this.confirm()}},{key:"toggle",value:function(Mb,mb){(this.isLayoutable=this.visible=Mb)?this.gradientHalo.openInWorld():this.gradientHalo.remove();Mb||this.reset()}},{key:"reset",value:function(){this.gradientValue=
null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function(Mb){return Mb.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function(Mb){this.gradientValue=Mb.isGradient?new fd.LinearGradient({stops:Mb.stops}):new fd.LinearGradient({stops:[{color:Mb,offset:0},{color:fd.Color.transparent,offset:1}]})}},{key:"initRadialGradient",value:function(Mb,mb){mb=mb.innerBounds();this.gradientValue=Mb.isGradient?new fd.RadialGradient({bounds:mb,stops:Mb.stops}):new fd.RadialGradient({bounds:mb,
stops:[{color:Mb,offset:0},{color:fd.Color.transparent,offset:1}]})}},{key:"setGradient",value:function(Mb,mb){this.gradientValue=Mb;this.gradientHalo.initFromPicker(mb)}},{key:"update",value:function(Mb){if(!this.isDisabled){var mb=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==Mb.colorMode||("linearGradient"==Mb.colorMode&&this.initLinearGradient(this.gradientValue||Mb.color),"radialGradient"==Mb.colorMode&&this.initRadialGradient(this.gradientValue||Mb.color,Mb._target),
this.gradientHalo.initFromPicker(Mb),this.gradientHalo.confirm());if(mb){var Ac=this.gradientValue.stops.find(function(vc){return mb.stop==vc});Ac&&(Ac.color=Mb.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function(Mb){var mb=this.getSubmorphNamed("gradient preview").bounds().topEdge();return mb.start.interpolate(Mb.offset,mb.end).subXY(0,5)}},{key:"confirm",value:function(){fd.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var Mb=
this.getSubmorphNamed("gradient"),mb=this.gradientValue.stops.map(function(Ac){return Object.assign({},Ac)});Mb.fill=new fd.LinearGradient({vector:fd.rect(0),stops:mb});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function(Mb){var mb=$jscomp.makeIterator(Mb);Mb=mb.next().value;mb=mb.next().value/this.getSubmorphNamed("gradient preview").width;this.adjustStop(Mb,mb)}},{key:"adjustStop",value:function(Mb,mb){Mb.offset=fd.num.clamp(Mb.offset+
mb,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function(Mb){this.addMorph(Mb)}},{key:"getControlFor",value:function(Mb,mb){mb=void 0===mb?this:mb;var Ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vc){if(1==vc.nextAddress)return vc.yield(fd.resource("part://SystemWidgets/gradient editor/color stop").read(),2);Ac=vc.yieldResult;Ac.withAllSubmorphsDo(function(ec){return ec.halosEnabled=!1});mb.placeStop(Ac);fd.connect(Ac,"select",mb,"selectStop");fd.connect(Ac,"moveColorStop",
mb,"moveStop");return vc.return(Ac.forStop(Mb))})}},{key:"selectStop",value:function(Mb){this.deselectAllStopsExcept(Mb,this);this.deselectAllStopsExcept(Mb,this.gradientHalo);fd.signal(this,"switchColor",Mb.stop.color)}},{key:"deselectAllStopsExcept",value:function(Mb,mb){fd.noUpdate(function(){mb.getSubmorphsByStyleClassName("ColorStop").forEach(function(Ac){Ac.stop!=Mb.stop?Ac.deselect():Ac.select()})})}},{key:"updateStopControls",value:function(Mb,mb){mb=void 0===mb?this:mb;var Ac=this,vc,ec,
Bc,Ua,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Eb){switch(Eb.nextAddress){case 1:if(mb._active)return Eb.return();mb._active=!0;vc=mb.getSubmorphsByStyleClassName("ColorStop");ec=$jscomp.makeIterator(Mb);Bc=ec.next();case 2:if(Bc.done){Eb.jumpTo(4);break}Ua=Bc.value;if(hc=vc.shift()){hc.forStop(Ua);Eb.jumpTo(3);break}return Eb.yield(Ac.getControlFor(Ua,mb),3);case 3:Bc=ec.next();Eb.jumpTo(2);break;case 4:fd.arr.invoke(vc,"remove"),mb.getSubmorphsByStyleClassName("ColorStop").forEach(function(qc){qc.positionIn(mb)}),
mb._active=!1,Eb.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,get:function(){return this.stopControls.find(function(Mb){return Mb.isSelected})}}}}}],Ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(fd.Morph);Bd=fd.GradientControl;fd.default=Bd;var Jd=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");Jd.Morph=Pa;Jd.arr=Lb;Jd.resource=bd;Jd.connect=Wc;Jd.signal=Dc;Jd.pt=me;Jd.RadialGradient=id;Jd.LinearGradient=qd;Jd.Point=te;Bd=function(xd){var Ic=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),Ad=Ic.hasOwnProperty("GradientHalo")&&
"function"===typeof Ic.GradientHalo?Ic.GradientHalo:Ic.GradientHalo=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(Ad,xd,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function(Mb){return Mb.remove()})}},{key:"initFromPicker",value:function(Mb){var mb=Mb.gradientValue;this.picker=Mb;"linearGradient"==mb.type&&this.initFromLinearGradient(this.targetMorph,mb);"radialGradient"==
mb.type&&this.initFromRadialGradient(this.targetMorph,mb);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function(Mb,mb){Mb=Mb.innerBounds();mb=mb.vectorAsAngle();var Ac=Mb.center(),vc=Math.max(Mb.height,Mb.width),ec=Ac.addPt(Jd.Point.polar(vc,mb));mb=Ac.subPt(Jd.Point.polar(vc,mb));Ac=$jscomp.makeIterator(Mb.lineIntersection(mb.lineTo(ec)));mb=Ac.next().value;var Bc=Ac.next().value;Ac=Jd.arr.min([mb,Bc],function(Ua){return Ua.dist(ec)});this.originPoint=Ac==mb?Bc:mb;this.directionPoint=
Ac;this.orthogonalDist=Jd.arr.min(Mb.edges(),function(Ua){return Ua.distanceFromLine(Bc)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function(Mb,mb){Mb=Mb.innerBounds().relativeToAbsPoint(mb.focus);var Ac=mb.bounds;mb=Ac.height;Ac=Ac.width;this.originPoint=Mb;this.directionPoint=Mb.addXY(0,mb/2);this.orthogonalDist=Ac/2;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){var Mb=this.ui,mb=Mb.directionHandle,Ac=Mb.orthogonalHandle,vc=Mb.colorStopWrapper;Mb.originHandle.center=
Jd.pt(0);mb.center=Jd.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);vc.width=this.width;mb.center=Jd.pt(this.width,0);Ac.center=Jd.pt(0,this.orthogonalDist);0<this.orthogonalDist?(vc.tilted=1,vc.position=Jd.pt(this.width/2,this.height/4-1)):(vc.tilted=0,vc.position=Jd.pt(this.width/2,-this.height/4+1));this.globalPosition=this.targetMorph.worldPoint(this.originPoint).subPt($world.scroll);this.rotation=this.angle}},{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"confirm",value:function(){var Mb=this.picker.ui.gradientControl;"linearGradient"==Mb.gradientValue.type&&(Mb.gradientValue.vector=this.angle);if("radialGradient"==Mb.gradientValue.type){var mb=Mb.gradientValue,Ac=2*Math.abs(this.orthogonalDist),vc=2*this.originPoint.dist(this.directionPoint);mb.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());mb.bounds=Jd.pt(0,0).extent(Jd.pt(Ac,vc));mb.angle=this.angle}Mb.confirm();this.refresh(Mb,this.targetMorph);this.alignWithTarget()}},
{key:"normalize",value:function(Mb){return this.getGlobalTransform().transformDirection(Mb)}},{key:"moveOriginHandle",value:function(Mb){Mb=this.normalize(Mb.state.dragDelta);this.originPoint=this.originPoint.addPt(Mb);this.confirm()}},{key:"moveDirectionHandle",value:function(Mb){Mb=this.normalize(Mb.state.dragDelta);this.directionPoint=this.directionPoint.addPt(Mb);this.confirm()}},{key:"moveOrthogonalHandle",value:function(Mb){Mb=this.normalize(Mb.state.dragDelta);this.orthogonalDist-=Mb.dotProduct(Jd.Point.polar(1,
this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function(Mb){var mb=$jscomp.makeIterator(Mb);Mb=mb.next().value;mb=mb.next().value;this.picker.ui.gradientControl.adjustStop(Mb,mb/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function(Mb,mb){mb=Mb.gradientValue;this.alignWithTarget();Mb.updateStopControls(mb.stops,this)}},{key:"placeStop",value:function(Mb){this.get("color stop wrapper").addMorph(Mb)}},{key:"selectStop",value:function(Mb){this.picker.ui.gradientControl.selectStop(Mb)}},
{key:"getPositionFor",value:function(Mb){var mb=this.getSubmorphNamed("color stop wrapper"),Ac=mb.innerBounds().bottomEdge();return Ac.start.interpolate(Mb.offset,Ac.end).subXY(0,5).subPt(mb.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),directionHandle:this.getSubmorphNamed("direction handle"),
orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],Ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",version:"0.1.1-141"}}},{start:300,end:5921})}(Jd.Morph);
Bd=Jd.GradientHalo;Jd.default=Bd;var fe=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");fe.Morph=Pa;fe.pt=me;fe.Color=Vb;fe.LinearGradient=qd;fe.signal=Dc;fe.num=zd;Bd=function(xd){var Ic=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),Ad=Ic.hasOwnProperty("OpacityPicker")&&"function"===typeof Ic.OpacityPicker?Ic.OpacityPicker:Ic.OpacityPicker=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return jc(Ad,xd,[{key:"confirm",value:function(){fe.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",value:function(Mb){var mb=this.get("slider").width;this.sliderPosition=fe.pt(0,Mb.positionIn(this).y-mb/2);this.confirm()}},{key:"onDrag",value:function(Mb){var mb=this.get("slider").width;this.sliderPosition=fe.pt(0,Mb.positionIn(this).y-mb/2);this.confirm()}},{key:"update",value:function(Mb){this.alpha=Mb.color.a;this.getSubmorphNamed("opacity gradient").fill=new fe.LinearGradient({stops:[{offset:0,
color:Mb.color.withA(0)},{offset:1,color:Mb.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return fe.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function(Mb){this.alpha=fe.num.clamp(Mb.y/(this.height-10),0,1);this.refresh()}}}}}],Ic,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(fe.Morph);Bd=fe.OpacityPicker;fe.default=Bd;var Zb=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");Zb.Morph=Pa;Zb.Color=Vb;Zb.signal=Dc;Zb.noUpdate=Zc;Zb.num=zd;Bd=function(xd){var Ic=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),Ad=Ic.hasOwnProperty("ColorEncoder")&&
"function"===typeof Ic.ColorEncoder?Ic.ColorEncoder:Ic.ColorEncoder=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return jc(Ad,xd,[{key:"update",value:function(Mb){this.currentColor=Mb.hsb;this.refresh()}},{key:"refresh",value:function(){var Mb=this,mb=this.currentColor;Zb.noUpdate(function(){({Hex:function(){return Mb.updateHex(mb)},RGB:function(){return Mb.updateRGB(mb)},HSL:function(){return Mb.updateHSL(mb)},
HSB:function(){return Mb.updateHSB(mb)},CSS:function(){return Mb.updateCSS(mb)}})[Mb.encodingMode]()})}},{key:"updateHex",value:function(Mb){Mb=Zb.Color.hsb.apply(Zb.Color,$jscomp.arrayFromIterable(Mb)).withA(Zb.num.roundTo(Mb[3],.01));var mb=this.getSubmorphNamed("hex input"),Ac=this.getSubmorphNamed("hex opacity control");mb.input=Mb.toHexString().toUpperCase();Ac.number=Mb.a}},{key:"updateRGB",value:function(Mb){var mb=this.getSubmorphNamed("first value"),Ac=this.getSubmorphNamed("second value"),
vc=this.getSubmorphNamed("third value"),ec=this.getSubmorphNamed("opacity control"),Bc=$jscomp.makeIterator(Zb.Color.hsb.apply(Zb.Color,$jscomp.arrayFromIterable(Mb)).toTuple()),Ua=Bc.next().value,hc=Bc.next().value;Bc=Bc.next().value;Mb=Mb[3];mb.number=255*Ua;Ac.number=255*hc;vc.number=255*Bc;ec.number=Mb}},{key:"updateHSL",value:function(Mb,mb){mb=void 0===mb?!0:mb;var Ac=this.getSubmorphNamed("first value"),vc=this.getSubmorphNamed("second value"),ec=this.getSubmorphNamed("third value"),Bc=this.getSubmorphNamed("opacity control"),
Ua=$jscomp.makeIterator(Mb),hc=Ua.next().value,Eb=Ua.next().value;Ua=Ua.next().value;ec.number=mb?1-Ua:Ua;Ac.number=hc;vc.number=Eb;Bc.number=Mb[3]}},{key:"updateHSB",value:function(Mb){this.updateHSL(Mb,!1)}},{key:"updateCSS",value:function(Mb){var mb=this.getSubmorphNamed("css input");Mb=Zb.Color.hsb.apply(Zb.Color,$jscomp.arrayFromIterable(Mb)).withA(Zb.num.roundTo(Mb[3],.01));mb.input=Mb.toCSSString()}},{key:"confirm",value:function(){var Mb=this;({Hex:function(){return Mb.confirmHex()},RGB:function(){return Mb.confirmRGB()},
HSL:function(){return Mb.confirmHSL()},HSB:function(){return Mb.confirmHSB()},CSS:function(){return Mb.confirmCSS()}})[this.encodingMode]()}},{key:"confirmHex",value:function(){var Mb=this.getSubmorphNamed("hex input"),mb=this.getSubmorphNamed("hex opacity control");Mb=Zb.Color.rgbHex(Mb.input).withA(mb.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,"colorEntered",Mb)}},{key:"confirmRGB",value:function(){var Mb=this.getSubmorphNamed("first value"),
mb=this.getSubmorphNamed("second value"),Ac=this.getSubmorphNamed("third value"),vc=this.getSubmorphNamed("opacity control");Mb=Zb.Color.rgba(Mb.number,mb.number,Ac.number,vc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,"colorEntered",Mb)}},{key:"confirmHSL",value:function(){var Mb=this.getSubmorphNamed("first value"),mb=this.getSubmorphNamed("second value"),Ac=this.getSubmorphNamed("third value"),vc=this.getSubmorphNamed("opacity control");Mb=Zb.Color.hsb(Mb.number,
mb.number,1-Ac.number).withA(vc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,"colorEntered",Mb)}},{key:"confirmHSB",value:function(){var Mb=this.getSubmorphNamed("first value"),mb=this.getSubmorphNamed("second value"),Ac=this.getSubmorphNamed("third value"),vc=this.getSubmorphNamed("opacity control");Mb=Zb.Color.hsb(Mb.number,mb.number,Ac.number).withA(vc.number);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,
"colorEntered",Mb)}},{key:"confirmCSS",value:function(){var Mb=this.getSubmorphNamed("css input");Mb=Zb.Color.fromString(Mb.input);this.currentColor=[].concat($jscomp.arrayFromIterable(Mb.toHSB()),[Mb.a]);Zb.signal(this,"colorEntered",Mb)}},{key:"selectEncoding",value:function(Mb){this.encodingMode=Mb;this.submorphs.map(function(Ac){return Ac.visible=Ac.isLayoutable=!1});var mb=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[Mb]);
mb.visible=mb.isLayoutable=!0;"RGB"==Mb&&[mb.getSubmorphNamed("first value"),mb.getSubmorphNamed("second value"),mb.getSubmorphNamed("third value")].forEach(function(Ac){Object.assign(Ac,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes(Mb)&&(Object.assign(mb.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[mb.getSubmorphNamed("second value"),mb.getSubmorphNamed("third value")].forEach(function(Ac){Object.assign(Ac,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:Zb.Color.white}}}}],Ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorEncoder",version:"0.1.1-43"}}},{start:211,end:5572})}(Zb.Morph);Bd=Zb.ColorEncoder;Zb.default=
Bd;var Gc=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");Gc.HTMLMorph=Je;Gc.arr=Lb;Gc.materialDesignColors=jd;Gc.webSafeColors=Zd;Gc.flatDesignColors=gc;Gc.Color=Vb;Gc.signal=Dc;Bd=function(xd){var Ic=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),Ad=Ic.hasOwnProperty("ColorPaletteView")&&"function"===typeof Ic.ColorPaletteView?Ic.ColorPaletteView:Ic.ColorPaletteView=function(Mb){Mb&&Mb[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return jc(Ad,xd,[{key:"test",value:function(){this.showPalette(Gc.materialDesignColors.map(function(Mb){return Gc.Color.rgbHex(Mb)}))}},{key:"selectPalette",value:function(Mb){var mb={"Flat Design":Gc.flatDesignColors,Material:Gc.materialDesignColors,"Web Safe":Gc.webSafeColors};mb[Mb]&&this.showPalette(mb[Mb].map(function(Ac){return Gc.Color.rgbHex(Ac)}))}},{key:"onMouseDown",value:function(Mb){jc._get(Object.getPrototypeOf(Ad.prototype),"onMouseDown",this).call(this,Mb);(Mb=Mb.domEvt.target.dataset.color)&&
Gc.signal(this,"colorSelected",Gc.Color.fromString(Mb))}},{key:"showPalette",value:function(Mb){this.html='<div class="palette-container">\n      '+Mb.map(function(mb){return'<div class="color-cell" data-color="'+mb+'" style="background: '+mb+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],Ic,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}(Gc.HTMLMorph);Bd=Gc.ColorPaletteView;Gc.default=Bd}}});