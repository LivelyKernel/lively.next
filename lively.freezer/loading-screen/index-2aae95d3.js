System.register(["./__root_module__-be0d56fe.js"],function(Pa){var Lb,Vb,Dc,jc,qd,id,Cd,bd,Wc,Zc,zd,me,te,Je,jd,Zd,gc,$c,Bd,fd,Jd,fe,Zb,Gc,xd,Ic,Ad,Mb,mb,Ac,vc,ec,Bc,Ua,hc,Eb,qc,Cc,Yc,rd;return{setters:[function(fc){Lb=fc.f;Vb=fc.b;Dc=fc.C;jc=fc.m;qd=fc.Y;id=fc.p;Cd=fc.s;bd=fc.R;Wc=fc.$;Zc=fc.e;zd=fc.Q;me=fc.I;te=fc.M;Je=fc.av;jd=fc.c;Zd=fc.o;gc=fc._;$c=fc.i;Bd=fc.O;fd=fc.af;Jd=fc.K;fe=fc.ab;Zb=fc.j;Gc=fc.a9;xd=fc.P;Ic=fc.aw;Ad=fc.ac;Mb=fc.a;mb=fc.d;Ac=fc.ax;vc=fc.ay;ec=fc.az;Bc=fc.g;Ua=fc.aA;
hc=fc.W;Eb=fc.aa;qc=fc.aB;Cc=fc.aC;Yc=fc.B;rd=fc.h}],execute:function(){function fc(Tb){(Tb=ja.cachedGuideLines.get(Tb))&&Tb.forEach(function(Gb){return Gb.remove()})}function xc(Tb,Gb,La,da,Ha){Gb=void 0===Gb?!0:Gb;La=void 0===La?!0:La;da=void 0===da?10:da;Ha=void 0===Ha?100:Ha;if(Gb||La){var bb=Tb.owner,Qb=bb.world();bb=bb.getGlobalTransform();var uc=Tb.owner.submorphs.filter(function(ab){return ab!==Tb&&!ab.isEpiMorph&&ab.visible&&ab.reactsToPointer}),Tc=ja.findAlignedMorphs(Tb,uc,da,Ha,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));Ha=[];var vd=0,Wd=0,ed=0,He=0;bb.e-=Qb.scroll.x;bb.f-=Qb.scroll.y;if(Tc){Tc=$jscomp.makeIterator(Tc);for(var Rd=Tc.next();!Rd.done;Rd=Tc.next()){Rd=$jscomp.makeIterator(Rd.value);Rd.next();var Fe=Rd.next().value;Rd=Fe.vertical;Fe=$jscomp.makeIterator(Fe.horizontal);for(var z=Fe.next();!z.done;z=Fe.next()){z=z.value;var Ce=z.edgeAVal,Ke=z.refPointsA,eg=z.refPointsB,sf=z.edgeBVal,Nd=Math.ceil(da-z.delta),hf=Math.min(Ke.top,eg.top);Ke=Math.max(Ke.bottom,
eg.bottom);z.maxDist>da&&(Nd-=da/2);vd<Nd&&(vd=Nd,ed=sf-Ce);Ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ja.guideWidth,start:bb.transformPoint(ja.pt(sf,hf)),end:bb.transformPoint(ja.pt(sf,Ke)),fill:ja.guideColor,guideType:"h",priority:Nd})}Rd=$jscomp.makeIterator(Rd);for(Fe=Rd.next();!Fe.done;Fe=Rd.next())Fe=Fe.value,z=Fe.edgeAVal,hf=Fe.refPointsA,Ke=Fe.refPointsB,Ce=Fe.edgeBVal,sf=Math.ceil(da-Fe.delta),Nd=Math.min(hf.left,Ke.left),hf=Math.max(hf.right,Ke.right),Fe.maxDist>da&&(sf-=
da/2),Wd<sf&&Math.abs(Ce-z)<=da&&(Wd=sf,He=Ce-z),Ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ja.guideWidth,start:bb.transformPoint(ja.pt(Nd,Ce)),end:bb.transformPoint(ja.pt(hf,Ce)),fill:ja.guideColor,guideType:"v",priority:sf})}}if(!vd||!Wd){uc=[Tb].concat($jscomp.arrayFromIterable(uc));z=ja.computeClosestMorphs(uc);Fe=z[0];uc=Fe.l;Tc=Fe.r;Rd=Fe.t;Fe=Fe.b;var jf;if(uc||Tc||Rd||Fe){var Bf=(uc||Tc||Rd||Fe).refPointsA;for(Ce=1;Ce<z.length&&(Ke=z[Ce],sf=Ke.l,Nd=Ke.r,hf=Ke.t,Ke=Ke.b,vd||
(uc&&sf&&uc.index!==sf.index&&Math.abs(sf.dist-uc.dist)<=da?jf=Object.assign({neighbor:Ce,direction:"left"},sf):Tc&&Nd&&Tc!==Nd.index&&Math.abs(Nd.dist-Tc.dist)<=da&&(jf=Object.assign({neighbor:Ce,direction:"right"},Nd))),Wd||(Rd&&hf&&Rd.index!==hf.index&&Math.abs(hf.dist-Rd.dist)<=da?jf=Object.assign({neighbor:Ce,direction:"top"},hf):Fe&&Ke&&Fe.index!==Ke.index&&Math.abs(Ke.dist-Fe.dist)<=da&&(jf=Object.assign({neighbor:Ce,direction:"bottom"},Ke))),!jf);Ce++);}if(jf){var Xd=jf;da=Xd.direction;hf=
Xd.dist;var ii=Bf.left;eg=Bf.top;var Pc=Bf.bottom,Ud=Bf.right,df=Bf.width,yd=Bf.height;Ke=Xd.refPointsA;Bf=Ke.left;z=Ke.top;Ce=Ke.bottom;sf=Ke.right;Nd=Ke.width;Ke=Ke.height;var Pe=Xd.refPointsB,Xa=Pe.left;Xd=Pe.top;var hb=Pe.bottom;Pe=Pe.right;Ud="left"===da?ii:"right"===da?Ud:ii+df/2;Pc="bottom"===da?Pc:"top"===da?eg:eg+yd/2;ii="left"===da?Ud-hf:"right"===da?Ud+hf:ii+df/2;hf="bottom"===da?Pc+hf:"top"===da?Pc-hf:eg+yd/2;eg="left"===da?Pe:"right"===da?Xa:Bf+Nd/2;df="bottom"===da?Xd:"top"===da?hb:
z+Ke/2;!La||vd||"right"!==da&&"left"!==da||(vd=10,ed=(jf.dist-(Tc||uc).dist)*("right"===da?-1:1),Ud+=ed,ii+=ed);!La||Wd||"top"!==da&&"bottom"!==da||(Wd=10,He=((Rd||Fe).dist-jf.dist)*("top"===da?-1:1),Pc+=He,hf+=He);Ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:bb.transformPoint(ja.pt("left"===da?Bf:"right"===da?sf:Bf+Nd/2,"bottom"===da?Ce:"top"===da?z:z+Ke/2)),end:bb.transformPoint(ja.pt(eg,df)),fill:ja.Color.orange,height:ja.guideWidth,guideType:da,priority:10},{type:"line",epiMorph:!0,
hasFixedPosition:!0,start:bb.transformPoint(ja.pt(Ud,Pc)),end:bb.transformPoint(ja.pt(ii,hf)),fill:ja.Color.orange,height:ja.guideWidth,guideType:da,priority:10})}}La&&(ed||He)&&Tb.moveBy(ja.pt(ed,He));if(Gb){Ha=Ha.filter(function(ab){var ma=ab.guideType;ab=ab.priority;return"h"===ma?ab===vd:"v"===ma?ab===Wd:!0});(Gb=ja.cachedGuideLines.get(Tb))||ja.cachedGuideLines.set(Tb,Gb=[]);for(La=0;La<Ha.length;La++)jf=void 0,Gb[La]?jf=Object.assign(Gb[La],Ha[La]):(jf=ja.morph(Ha[La]),Gb.push(jf)),jf.owner||
Qb.addMorph(jf);Gb.slice(La).forEach(function(ab){return ab.remove()});ja.fun.debounceNamed(Tb.id+"-drag-guides-cleanup",1300,function(){var ab=ja.cachedGuideLines.get(Tb);ab&&ab.forEach(function(ma){return ma.remove()})})()}}}function bc(Tb,Gb,La,da,Ha,bb){La=void 0===La?!0:La;da=void 0===da?!0:da;Ha=void 0===Ha?5:Ha;bb=void 0===bb?100:bb;if(La||da){var Qb=Tb.owner,uc=Qb.world(),Tc=Qb.getGlobalTransform(),vd=Tb.owner.submorphs.filter(function(Pc){return Pc!==Tb&&!Pc.isEpiMorph&&Pc.visible&&Pc.reactsToPointer});
Qb=(Gb.includes("left")||Gb.includes("right")?"x":"")+(Gb.includes("top")||Gb.includes("bottom")?"y":"");var Wd=ja.findMorphsWithSimilarWidthOrHeight(Tb,Qb,vd,Ha,bb),ed=-Infinity,He=-Infinity,Rd=0,Fe=0,z=0,Ce=0,Ke=0,eg=0;Qb=[];Tc.e-=uc.scroll.x;Tc.f-=uc.scroll.y;if(Wd){Wd=$jscomp.makeIterator(Wd);for(var sf=Wd.next();!sf.done;sf=Wd.next()){sf=$jscomp.makeIterator(sf.value);sf.next();var Nd=sf.next().value;sf=Nd.similarIn;var hf=Nd.delta,jf=Nd.refPointsA,Bf=Nd.refPointsB;Nd=Ha-hf+(bb-Nd.minDist);"width"===
sf?ed<Nd&&(ed=Nd,Gb.includes("left")&&(Fe=-hf),Gb.includes("right")&&(Rd=hf)):He<Nd&&(He=Nd,Gb.includes("top")&&(z=-hf),Gb.includes("bottom")&&(Ce=hf));hf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:ja.guideWidth,fill:ja.guideColor,guideType:sf,priority:Nd,start:Tc.transformPoint("width"===sf?ja.pt(jf.left,jf.top+jf.height/2):ja.pt(jf.left+jf.width/2,jf.top)),end:Tc.transformPoint("width"===sf?ja.pt(jf.right,jf.top+jf.height/2):ja.pt(jf.left+jf.width/2,jf.bottom))};sf=Object.assign({},hf,
{start:Tc.transformPoint("width"===sf?ja.pt(Bf.left,Bf.top+Bf.height/2):ja.pt(Bf.left+Bf.width/2,Bf.top)),end:Tc.transformPoint("width"===sf?ja.pt(Bf.right,Bf.top+Bf.height/2):ja.pt(Bf.left+Bf.width/2,Bf.bottom))});Qb.push(hf,sf)}}if(bb=ja.findAlignedMorphs(Tb,vd,Ha,bb,Gb,void 0))for(bb=$jscomp.makeIterator(bb),vd=bb.next();!vd.done;vd=bb.next()){vd=$jscomp.makeIterator(vd.value);vd.next();Wd=vd.next().value;vd=Wd.vertical;Wd=$jscomp.makeIterator(Wd.horizontal);for(sf=Wd.next();!sf.done;sf=Wd.next()){sf=
sf.value;Bf=sf.edgeAVal;var Xd=sf.refPointsA,ii=sf.refPointsB;hf=sf.edgeBVal;jf=Math.ceil(Ha-sf.delta);Nd=Math.min(Xd.top,ii.top);Xd=Math.max(Xd.bottom,ii.bottom);sf.maxDist>Ha&&(jf-=Ha/2);Ke<jf&&(Ke=jf,Gb.includes("left")&&(Fe=-(hf-Bf)),Gb.includes("right")&&(Rd=+(hf-Bf)));Qb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ja.guideWidth,start:Tc.transformPoint(ja.pt(hf,Nd)),end:Tc.transformPoint(ja.pt(hf,Xd)),fill:ja.guideColor,guideType:"h",priority:jf})}vd=$jscomp.makeIterator(vd);for(Wd=
vd.next();!Wd.done;Wd=vd.next())Wd=Wd.value,sf=Wd.edgeAVal,Nd=Wd.refPointsA,Xd=Wd.refPointsB,Bf=Wd.edgeBVal,hf=Math.ceil(Ha-Wd.delta),jf=Math.min(Nd.left,Xd.left),Nd=Math.max(Nd.right,Xd.right),Wd.maxDist>Ha&&(hf-=Ha/2),eg<hf&&Math.abs(Bf-sf)<=Ha&&(eg=hf,Gb.includes("top")&&(z=Bf-sf),Gb.includes("bottom")&&(Ce=Bf-sf)),Qb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ja.guideWidth,start:Tc.transformPoint(ja.pt(jf,Bf)),end:Tc.transformPoint(ja.pt(Nd,Bf)),fill:ja.guideColor,guideType:"v",
priority:hf})}da&&(Fe&&(Tb.left+=Fe,Tb.right-=Fe),z&&(Tb.top+=z,Tb.bottom-=z),Rd&&(Tb.width+=Rd),Ce&&(Tb.height+=Ce));if(La){Qb=Qb.filter(function(Pc){var Ud=Pc.guideType;Pc=Pc.priority;return"width"===Ud?Pc===ed:"height"===Ud?Pc===He:"v"===Ud?Pc===eg:"h"===Ud?Pc===Ke:!1});(Gb=ja.cachedGuideLines.get(Tb))||ja.cachedGuideLines.set(Tb,Gb=[]);for(La=0;La<Qb.length;La++)da=void 0,Gb[La]?da=Object.assign(Gb[La],Qb[La]):(da=ja.morph(Qb[La]),Gb.push(da)),da.owner||uc.addMorph(da);Gb.slice(La).forEach(function(Pc){return Pc.remove()});
ja.fun.debounceNamed(Tb.id+"-drag-guides-cleanup",1300,function(){var Pc=ja.cachedGuideLines.get(Tb);Pc&&Pc.forEach(function(Ud){return Ud.remove()})})()}}}function Qa(Tb,Gb){Gb=void 0===Gb?!1:Gb;var La=Ja.MorphicEnv.default().world;if(null===Tb||void 0===Tb)Tb=String(Tb);if(Tb.isMorph)return Ja.showRect(Tb.world(),Tb.globalBounds().translatedBy(La.scroll.negated()),Gb);if(Tb.isPoint)return Ja.showRect(La,new Ja.Rectangle(Tb.x-5,Tb.y-5,10,10));if(Tb.isLine)return Ja.showLine(La,Tb);if(Tb.isRectangle)return Ja.showRect(La,
Tb);if("undefined"!==typeof Ja.Element&&Tb instanceof Ja.Element)return Ja.showRect(La,Ja.Rectangle.fromElement(Tb));if("number"===typeof Tb||"symbol"===typeof Tb||"boolean"===typeof Tb||"undefined"!==typeof Ja.Node&&Tb instanceof Ja.Node||Tb instanceof RegExp)Tb=String(Tb);"object"===typeof Tb&&(Tb=Ja.obj.inspect(Tb,{maxDepth:1}));return"string"===typeof Tb&&1===arguments.length?La.setStatusMessage(Tb):La.setStatusMessage(Ja.string.formatFromArray(Array.from(arguments)))}function Da(Tb,Gb,La){La=
void 0===La?3E3:La;var da,Ha,bb,Qb,uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tc){if(1==Tc.nextAddress){if(!(Tb&&Tb.world()&&Gb&&Gb.world()))return Tc.return(null);da=Tb.owner.worldPoint(Tb.center);Ha=Gb.owner.worldPoint(Gb.center);bb=da.lineTo(Ha).sampleN(2)[1];Qb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Ja.Color.red,fill:Ja.Color.red,cx:5,cy:5,r:4}]};uc=$world.addMorph(new Ja.Path({position:bb,
renderOnGPU:!0,vertices:[Ja.pt(0),Ja.pt(0)],borderWidth:2,startMarker:Qb,endMarker:Qb,borderColor:Ja.Color.red}));return Tc.yield(uc.whenRendered(),2)}if(3!=Tc.nextAddress)return Tc.yield(uc.animate({opacity:1,customTween:function(vd){var Wd=uc.center;uc.vertices=[Ja.pt(0).interpolate(vd,da.subPt(bb)),Ja.pt(0).interpolate(vd,Ha.subPt(bb))];uc.center=Wd},duration:400}),3);La&&setTimeout(function(){return uc.fadeOut()},La);return Tc.return(uc)})}Pa({a:xc,e:Da,r:fc,s:Qa});var ja=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
ja.removeSnapToGuidesOf=fc;ja.showAndSnapToGuides=xc;ja.showAndSnapToResizeGuides=bc;ja.computeRefPoints=function(Tb){var Gb=Tb.x,La=Tb.y,da=Tb.width;Tb=Tb.height;return{left:Gb,top:La,hCenter:Gb+da/2,vCenter:La+Tb/2,right:Gb+da,bottom:La+Tb,width:da,height:Tb}};ja.findEdgesInAlignment=function(Tb,Gb,La,da,Ha,bb,Qb,uc,Tc,vd){La=void 0===La?15:La;bb=void 0===bb?0:bb;Qb=void 0===Qb?0:Qb;uc=void 0===uc?0:uc;Tc=void 0===Tc?0:Tc;vd=void 0===vd?0:vd;for(var Wd=[],ed=[],He=0;He<ja.edges.length;He++){var Rd=
$jscomp.makeIterator(ja.edges[He]),Fe=Rd.next().value,z=Rd.next().value;Rd=Rd.next().value;var Ce=Tb[z],Ke=Gb[Rd],eg=Math.max(Ce,Ke)-Math.min(Ce,Ke);eg>La||!(da&&!da.includes(z)||Ha&&!Ha.includes(Rd))&&("vertical"===Fe?Wd:ed).push({delta:eg,edgeA:z,edgeB:Rd,edgeAVal:Ce,edgeBVal:Ke,refPointsA:Tb,refPointsB:Gb,distLeft:bb,distTop:Qb,distRight:uc,distBottom:Tc,maxDist:vd})}return Wd.length||ed.length?{vertical:Wd,horizontal:ed}:null};ja.findAlignedMorphs=function(Tb,Gb,La,da,Ha,bb){La=void 0===La?15:
La;da=void 0===da?Infinity:da;for(var Qb,uc=ja.computeRefPoints(Tb.bounds()),Tc=0;Tc<Gb.length;Tc++){var vd=Gb[Tc];if(vd!==Tb){var Wd=ja.computeRefPoints(vd.bounds()),ed=Math.max(0,uc.left-Wd.right),He=Math.max(0,Wd.left-uc.right),Rd=Math.max(0,uc.top-Wd.bottom),Fe=Math.max(0,Wd.top-uc.bottom);Math.max(Fe,Rd,He,ed)>da||!(Wd=ja.findEdgesInAlignment(uc,Wd,La,Ha,bb,ed,Rd,He,Fe,Math.max(Fe,Rd,He,ed)))||(Qb||(Qb=new Map),Qb.set(vd,Wd))}}Tb=Tb.owner;Gb=ja.computeRefPoints(Tb.innerBounds());if(La=ja.findEdgesInAlignment(uc,
Gb,La))Qb||(Qb=new Map),Qb.set(Tb,La);return Qb};ja.findMorphsWithSimilarWidthOrHeight=function(Tb,Gb,La,da,Ha){da=void 0===da?15:da;Ha=void 0===Ha?Infinity:Ha;for(var bb,Qb=ja.computeRefPoints(Tb.bounds()),uc=0;uc<La.length;uc++){var Tc=La[uc];if(Tc!==Tb){var vd=ja.computeRefPoints(Tc.bounds()),Wd=Math.max(0,Qb.left-vd.right),ed=Math.max(0,vd.left-Qb.right),He=Math.max(0,Qb.top-vd.bottom),Rd=Math.max(0,vd.top-Qb.bottom),Fe=Math.min(Rd,He,ed,Wd),z=Math.max(Rd,He,ed,Wd);if(!(Math.max(Rd,He,ed,Wd)>
Ha)){ed=Qb;Wd=ed.width;ed=ed.height;Rd=vd;He=Rd.width;Rd=Rd.height;var Ce=He-Wd,Ke=Rd-ed;("x"===Gb||"xy"===Gb)&&Math.abs(Ce)<=da&&(bb||(bb=new Map),bb.set(Tc,{similarIn:"width",minDist:Fe,maxDist:z,refPointsA:Qb,refPointsB:vd,valA:Wd,valB:He,delta:Ce}));("y"===Gb||"xy"===Gb)&&Math.abs(Ke)<=da&&(bb||(bb=new Map),bb.set(Tc,{similarIn:"height",minDist:Fe,maxDist:z,refPointsA:Qb,refPointsB:vd,valA:ed,valB:Rd,delta:Ke}))}}}return bb};ja.closest=function(Tb,Gb,La,da,Ha,bb,Qb,uc){uc=void 0===uc?!0:uc;var Tc=
da[Tb],vd=Ha[Tb],Wd=bb[Tb];Gb=Qb[Tb];for(var ed,He,Rd,Fe,z=0;z<Ha.length;z++)Tb===z||Tc<Ha[z]||ed&&Ha[ed.index]>=Ha[z]||uc&&Qb[Tb]<bb[z]||bb[Tb]>Qb[z]||(ed={index:z,dist:Tc-Ha[z],refPointsA:La[Tb],refPointsB:La[z]});for(Tc=0;Tc<da.length;Tc++)Tb===Tc||vd>da[Tc]||He&&da[He.index]<=da[Tc]||uc&&Qb[Tb]<bb[Tc]||bb[Tb]>Qb[Tc]||(He={index:Tc,dist:da[Tc]-vd,refPointsA:La[Tb],refPointsB:La[Tc]});for(vd=0;vd<Qb.length;vd++)Tb===vd||Wd<Qb[vd]||Rd&&Qb[Rd.index]>=Qb[vd]||uc&&da[Tb]>Ha[vd]||Ha[Tb]<da[vd]||(Rd=
{index:vd,dist:Wd-Qb[vd],refPointsA:La[Tb],refPointsB:La[vd]});for(Qb=0;Qb<bb.length;Qb++)Tb===Qb||Gb>bb[Qb]||Fe&&bb[Fe.index]<=bb[Qb]||uc&&da[Tb]>Ha[Qb]||Ha[Tb]<da[Qb]||(Fe={index:Qb,dist:bb[Qb]-Gb,refPointsA:La[Tb],refPointsB:La[Qb]});return{l:ed,r:He,t:Rd,b:Fe}};ja.computeClosestMorphs=function(Tb){for(var Gb=[],La=[],da=[],Ha=[],bb=[],Qb=[],uc=0;uc<Tb.length;uc++){var Tc=ja.computeRefPoints(Tb[uc].bounds());bb.push(Tc);var vd=Tc.right,Wd=Tc.top,ed=Tc.bottom;Gb.push(Tc.left);La.push(vd);da.push(Wd);
Ha.push(ed)}for(uc=0;uc<Tb.length;uc++)Qb.push(ja.closest(uc,Tb,bb,Gb,La,da,Ha));return Qb};ja.fun=Lb;ja.pt=Vb;ja.Color=Dc;ja.morph=jc;ja.cachedGuideLines=new WeakMap;ja.guideWidth=1;ja.guideColor=ja.Color.orange.lighter();ja.removeSnapToGuidesOf=fc;ja.removeSnapToGuidesOf=fc;ja.showAndSnapToGuides=xc;ja.showAndSnapToGuides=xc;ja.showAndSnapToResizeGuides=bc;ja.showAndSnapToResizeGuides=bc;ja.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top",
"vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom","vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");
lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");var Ba=lively.FreezerRuntime.recorderFor("lively.collab/index.js");Ba.CommentGroupMorph=void 0;Ba.CommentGroupMorph=void 0;Ba.CommentMorph=void 0;Ba.CommentMorph=void 0;Ba.CommentIndicator=void 0;Ba.CommentIndicator=
void 0;Ba.CommentBrowser=void 0;Ba.CommentBrowser=void 0;Ba.Comment=void 0;Ba.Comment=void 0;Ba.Badge=void 0;Ba.Badge=void 0;var Ja=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Ja.show=Qa;Ja.showRect=function(Tb,Gb,La){var da=Ja.BoundsMarker.highlightBounds(Gb);return La?Ja.showInLoop(Tb,da,Gb):Ja.showThenHide(Tb,da)};Ja.showInLoop=function(Tb,Gb,La){var da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ha){switch(Ha.nextAddress){case 1:return Ja.showThenHide(Tb,Gb,!1),
Ha.yield(Ja.promise.delay(300),2);case 2:da=!1,Ja.once(Tb,"onMouseDown",function(){return da=!0}),Ja.once(Tb,"hideMarkers",function(){return da=!0});case 3:if(da){Ha.jumpTo(4);break}return Ha.yield(Gb.retract(La),3);case 4:Gb.fadeOut(2E3),Ha.jumpToEnd()}})};Ja.showThenHide=function(Tb,Gb,La){La=void 0===La?3:La;if(Tb){var da=Array.isArray(Gb)?Gb:[Gb];da.forEach(function(Ha){return Tb.addMorph(Ha)});La&&setTimeout(function(){return da.forEach(function(Ha){return Ha.fadeOut(2E3)})},1E3*La);return Gb}};
Ja.showLine=function(Tb,Gb,La){La=void 0===La?3E3:La;var da=Gb.start;Gb=Gb.end.subPt(da);var Ha=Tb.addMorph({position:da,rotation:Gb.theta(),border:{width:1,color:Ja.Color.red},width:Gb.fastR(),height:0});La&&setTimeout(function(){return Ha.fadeOut()},La);return Ha};Ja.showConnector=Da;Ja.obj=qd;Ja.promise=id;Ja.string=Cd;Ja.pt=Vb;Ja.Color=Dc;Ja.Rectangle=bd;Ja.rect=Wc;Ja.morph=jc;Ja.easings=Zc;Ja.Path=zd;Ja.Icon=me;Ja.Morph=te;Ja.MorphicEnv=Je;Ja.connect=jd;Ja.once=Zd;Ja.disconnect=gc;Ja.show=Qa;
Ja.show=Qa;(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),La=Gb.hasOwnProperty("BoundsMarker")&&"function"===typeof Gb.BoundsMarker?Gb.BoundsMarker:Gb.BoundsMarker=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(){$c._get(Object.getPrototypeOf(La.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
{borderWidth:0,fill:Ja.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(da){da=da.insetBy(-2);da=Math.min(da.width,da.height);return Math.max(4,Math.floor(10>da/10?da/2-5:da/10))}},{key:"createMarkerEdge",value:function(){return Ja.morph({fill:Ja.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var da=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),
Ha=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),bb=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),Qb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),uc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Tc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),vd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Wd=this.bottomLeftV||(this.bottomLeftV=
this.addMorph(this.createMarkerEdge()));return[da,Ha,bb,Qb,uc,Tc,vd,Wd]}},{key:"alignWithMorph",value:function(da){return this.alignWithBounds(da.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(da){this.alignWithRect(da.insetBy(-20));return this.alignWithRect(da,!0)}},{key:"alignWithRect",value:function(da,Ha){var bb=this.ensureMarkerCorners(),Qb=this.markerLength(da),uc=[da.topLeft().addXY(0,0).extent(Ja.pt(Qb,5)),da.topLeft().addXY(0,0).extent(Ja.pt(5,
Qb)),da.topRight().addXY(-Qb,0).extent(Ja.pt(Qb,5)),da.topRight().addXY(-5,0).extent(Ja.pt(5,Qb)),da.bottomRight().addXY(-5,-Qb).extent(Ja.pt(5,Qb)),da.bottomRight().addXY(-Qb,-5).extent(Ja.pt(Qb,5)),da.bottomLeft().addXY(0,-5).extent(Ja.pt(Qb,5)),da.bottomLeft().addXY(0,-Qb).extent(Ja.pt(5,Qb))];bb.forEach(function(Tc,vd){return Tc.setBounds(uc[vd])});Ha&&(this.adjustOrigin(da.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(da){var Ha=
this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){if(1==Qb.nextAddress)return Qb.yield(Ha.animate({scale:Math.max(30/da.width,1.05)}),2);bb=Ha.center;return Qb.yield(Ha.animate({center:bb,scale:1,duration:300,easing:Ja.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(da){return(new this).alignWithMorph(da)}},{key:"highlightBounds",value:function(da){return(new this).alignWithBounds(da)}}],
Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2323,end:6E3})})(Ja.Morph);Ba=Pa("S",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),La=Gb.hasOwnProperty("StatusMessage")&&"function"===typeof Gb.StatusMessage?Gb.StatusMessage:Gb.StatusMessage=function(da){da&&
da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"relayout",value:function(){this.title=Ja.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(da,Ha){this.message=da;this.color=Ha}},{key:"slideTo",value:function(da){var Ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==
bb.nextAddress)return Ha.sliding=Ha.animate({position:da,duration:500}),bb.yield(Ha.sliding,2);Ha.sliding=!1;bb.jumpToEnd()})}},{key:"expand",value:function(){var da=this,Ha,bb,Qb,uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Tc){if(1==Tc.nextAddress)return da.expandable?da.sliding?Tc.yield(da.sliding,2):Tc.jumpTo(2):Tc.return();Ha=da.world();if(!Ha||da.isMaximized)return Tc.return();da.isMaximized=!0;da.stayOpen=!0;bb=da.getSubmorphNamed("message text");bb.lineWrapping=!1;Object.assign(bb,
{clipMode:"auto",fixedWidth:!0,selectable:!0});da.expandedContent&&(bb.value=da.expandedContent);bb.fit();Qb=bb.textBounds().extent();uc=Ha.visibleBounds();Qb.y>uc.extent().y&&(Qb.y=uc.extent().y-20);Qb.x>uc.extent().x&&(Qb.x=uc.extent().x-20);Qb=da.extent.maxPt(Qb);da.animate({extent:Qb,center:uc.center(),duration:200});da.relayout();da.focus();Tc.jumpToEnd()})}},{key:"fit",value:function(){var da=this.getSubmorphNamed("message text");da&&(this.extent=Ja.pt(100,35).maxPt(da.textBounds().extent()),
this.relayout())}},{key:"focus",value:function(){var da=this.getSubmorphNamed("message text");da&&da.focus()}},{key:"onMouseUp",value:function(da){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Ja.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},
master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(da){this.setProperty("message",da);var Ha=this.getSubmorphNamed("message text");if(Ha){Ha.value=da;var bb=Ha.documentEndPosition;bb.row>this.maxLines&&(Ha.replace({start:{row:this.maxLines,column:0},end:bb},"...\n"),this.expandedContent||(this.expandedContent=da));bb=Ha.documentEndPosition;0!==bb.column&&Ha.insertText("\n",bb)}}},title:{isStyleProp:!0,derived:!0,set:function(da){this.getSubmorphNamed("message title").value=
da},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(da){this.get("message icon").fontColor=da;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=da)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Ja.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},
{name:"message title",type:"label"},{name:"close button",type:"button"}];Ja.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Ja.connect(this,"extent",this,"relayout")}}}}}],Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:6044,end:10373})}(Ja.Morph));Ja.StatusMessage=
Ba;Ja.StatusMessage=Ba;Ja.StatusMessage=Ba;var Fb=Pa("b",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),La=Gb.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof Gb.StatusMessageForMorph?Gb.StatusMessageForMorph:Gb.StatusMessageForMorph=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"alignAtBottomOf",value:function(da){var Ha=this.world();Ha&&(this.bringToFront(),
this.fit(),this.width=da.bounds().width,this.relayout(),da.world()&&(this.position=da.owner.worldPoint(da.bounds().bottomLeft())),da=Ha.visibleBounds(),da=this.bounds().top()+this.height-da.bottom(),0<da&&this.moveBy(Ja.pt(0,-da)))}},{key:"onMouseUp",value:function(da){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},
targetMorph:{defaultValue:null,get:function(){var da=this.getProperty("targetMorph");return da&&$world.getMorphWithId(da)},set:function(da){this.setProperty("targetMorph",da?da.id:null);this.alignAtBottomOf(da)}},expandable:{after:["submorphs"],set:function(da){this.setProperty("expandable",da);if(da){var Ha=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Ja.connect(Ha,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),
Ja.disconnect(Ha,"fire",this,"expand"))}}}}}],Gb,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10598,end:12466})}(Ja.StatusMessage));Ja.StatusMessageForMorph=Fb;Ja.StatusMessageForMorph=Fb;Ja.StatusMessageForMorph=Fb;Ja.showConnector=Da;Ja.showConnector=Da;var wa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");
wa.Morph=te;wa.Label=Bd;wa.HorizontalLayout=fd;wa.Path=zd;wa.Text=Jd;wa.GridLayout=fe;wa.morph=jc;wa.Icon=me;wa.createMorphSnapshot=Zb;wa.Color=Dc;wa.pt=Vb;wa.rect=Wc;wa.Rectangle=bd;wa.LinearGradient=Gc;wa.obj=qd;wa.PropertyPath=xd;wa.promise=id;wa.properties=Ic;wa.num=Ad;wa.arr=Mb;wa.connect=jd;wa.signal=mb;wa.disconnect=gc;wa.disconnectAll=Ac;wa.once=Zd;wa.showAndSnapToGuides=xc;wa.showAndSnapToResizeGuides=bc;wa.removeSnapToGuidesOf=fc;wa.CommentBrowser=void 0;wa.show=Qa;wa.haloBlue=wa.Color.rgb(23,
160,251);wa.componentAccent=wa.Color.magenta;wa.derivedAccent=wa.Color.purple;var Ka=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("Halo")&&"function"===typeof Gb.Halo?Gb.Halo:Gb.Halo=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",
win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(da){da.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var da=this;setTimeout(function(){da.target.owner||da.remove()})}},{key:"initLayout",value:function(){var da=this.layout=new wa.GridLayout({autoAssign:!1,fitToCell:!1,renderViaCSS:!0,columns:[0,{fixed:36,paddingRight:10},
2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});
da.col(1).row(7).group.align="topCenter";da.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(wa.morph({name:"border-box",halosEnabled:!1,fill:wa.Color.transparent,borderColor:this.target.isComponent?wa.componentAccent:wa.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(da){this.state||(this.state={});this.state.pointerId=da}},{key:"prepareTarget",value:function(da){if(!wa.obj.isArray(da))return da;
if(1>=da.length)return da[0];da=da[0].world().addMorph(new wa.MultiSelectionTarget({selectedMorphs:da}));da.alignWithSelection();da.modifiesSelectedMorphs=!0;return da}},{key:"refocus",value:function(da){this.target=da;this.alignWithTarget()}},{key:"alignWithTarget",value:function(da){var Ha=this;if((!da||["extent","position","scale","rotation"].includes(da.prop))&&!this.active&&this.target){da=this.target.world()||$world;var bb=this.maskBounds,Qb=this.target.globalBounds(),uc=Qb.insetBy(-36).intersection(bb);
bb=Qb.intersection(bb);this.state.activeButton?(this.buttonControls.forEach(function(Tc){return Tc.visible=!1}),this.ensureResizeHandles().forEach(function(Tc){return Tc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(Tc){return Tc.visible=!0}),this.buttonControls.filter(function(Tc){return Ha.activeItems.includes("*")?!0:Ha.activeItems.includes(Tc.name)}).forEach(function(Tc){Tc.visible=
!0}),this.propertyDisplay.disable());this.setBounds(uc.translatedBy(da.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,bb));this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Tc){return Tc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();return this}}},{key:"detachFromTarget",value:function(){var da=this.target;da&&(wa.disconnect(da,"onChange",this,"alignWithTarget"),wa.disconnect(da,"onOwnerChanged",this,"removeIfDetached"),da instanceof
wa.MultiSelectionTarget?(da.modifiesSelectedMorphs=!1,da.remove()):"function"===typeof da.detachedHalo&&da.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();$c._get(Object.getPrototypeOf(La.prototype),"remove",this).call(this)}},{key:"propertyDisplay",get:function(){return wa.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return wa.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return wa.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return wa.GrabHaloItem.for(this)}},
{key:"dragHalo",value:function(){return wa.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return wa.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return wa.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return wa.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return wa.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return wa.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return wa.OriginHaloItem.for(this)}},{key:"componentHalo",
value:function(){return wa.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(da){return da.isHaloItem&&!da.isResizeHandle})}},{key:"addMorphToSelection",value:function(da){var Ha=this,bb,Qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){if(1==uc.nextAddress){bb=Ha.world();Qb=Ha.target.isMorphSelection?Ha.target.selectedMorphs:[Ha.target];if(Qb.includes(da))return uc.return();Ha.remove();return uc.yield(bb.showHaloForSelection([].concat($jscomp.arrayFromIterable(Qb),
[da]),Ha.state.pointerId),2)}return uc.return(uc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(da){var Ha=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){if(1==Qb.nextAddress){bb=Ha.world();Ha.remove();if(!Ha.target.isMorphSelection)return Qb.jumpTo(0);wa.arr.remove(Ha.target.selectedMorphs,da);return Qb.yield(bb.showHaloForSelection(Ha.target.selectedMorphs,Ha.state.pointerId),3)}return Qb.return(Qb.yieldResult)})}},{key:"isAlreadySelected",value:function(da){return this.target==
da||this.target.isMorphSelection&&this.target.selectsMorph(da)}},{key:"updateBoundsFor",value:function(da,Ha,bb,Qb,uc){var Tc={topLeft:wa.rect(-1,-1,1,1),topCenter:Ha?wa.rect(1,-1,0,1):wa.rect(0,-1,0,1),topRight:wa.rect(0,-1,1,1),rightCenter:Ha?wa.rect(0,1,1,1):wa.rect(0,0,1,0),bottomRight:wa.rect(0,0,1,1),bottomCenter:Ha?wa.rect(1,0,0,1):wa.rect(0,0,0,1),bottomLeft:wa.rect(-1,0,1,1),leftCenter:Ha?wa.rect(-1,1,1,0):wa.rect(-1,0,1,0)}[da];uc=Tc.x;var vd=Tc.y,Wd=Tc.width;Tc=Tc.height;bb=Ha?this.proportionalDelta(da,
bb,Qb):bb;da=wa.rect(bb.x*uc,bb.y*vd,bb.x*Wd,bb.y*Tc);this.active=!0;this.targetIsPositionedByLayout?this.target.extent=Qb.insetByRect(da).extent():(this.target.setBounds(Qb.insetByRect(da)),(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated()));this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(ed){if(ed.activeSideBars.includes("Styling Palette"))ed.stylingPalette.onHierarchyChange()})}},{key:"proportionalDelta",value:function(da,Ha,bb){var Qb=
bb.width,uc=bb.height;bb={topLeft:wa.pt(-1,-1),topCenter:wa.pt(0,-1),topRight:wa.pt(1,-1),leftCenter:wa.pt(-1,0),rightCenter:wa.pt(1,0),bottomLeft:wa.pt(-1,1),bottomCenter:wa.pt(0,1),bottomRight:wa.pt(1,1)};var Tc=Qb/Math.max(Qb,uc),vd=uc/Math.max(uc,Qb);Qb={topLeft:wa.pt(-Tc,-vd),topCenter:wa.pt(1/(2*uc/Qb),-1),topRight:wa.pt(Tc,-vd),leftCenter:wa.pt(-1,uc/(2*Qb)),rightCenter:wa.pt(1,uc/(3*Qb)),bottomLeft:wa.pt(-Tc,vd),bottomCenter:wa.pt(1/(2*uc/Qb),1),bottomRight:wa.pt(Tc,vd)};bb=bb[da];return Qb[da].scaleBy(bb.dotProduct(Ha)/
bb.dotProduct(bb))}},{key:"ensureResizeHandles",value:function(){return wa.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(da){da=da.valueForPropertyDisplay();"undefined"!==typeof da?this.propertyDisplay.displayProperty(da):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(da,Ha){if(!wa.rect(0).sides.includes(Ha)){var bb=this.getSubmorphNamed("diagonal");if(da){da=this.target.globalBounds();var Qb=da.width,uc=da.height;da=this.localize(wa.pt(da.x,da.y)).extent(wa.pt(Qb,
uc)).scaleRectTo(this.innerBounds());Qb={topLeft:[wa.pt(Qb,uc),wa.pt(0,0)],topRight:[wa.pt(0,uc),wa.pt(Qb,0)],bottomRight:[wa.pt(0,0),wa.pt(Qb,uc)],bottomLeft:[wa.pt(Qb,0),wa.pt(0,uc)]};bb?bb.setBounds(da):(bb=$jscomp.makeIterator(Qb[Ha]),Ha=bb.next().value,bb=bb.next().value,Qb=new wa.LinearGradient({stops:[{offset:0,color:wa.Color.orange.withA(0)},{offset:.2,color:wa.Color.orange},{offset:.8,color:wa.Color.orange},{offset:1,color:wa.Color.orange.withA(0)}]}),bb=this.addMorphBack(new wa.Path({opacity:0,
name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:da,borderColor:Qb,vertices:[Ha,bb]})),bb.setBounds(da),bb.animate({opacity:1,duration:500}))}else bb&&bb.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(da,Ha){var bb=this.getSubmorphNamed("rotationIndicator");da&&Ha?(da=this.getSubmorphNamed("origin").center,bb=bb||this.addMorphBack(new wa.Path({name:"rotationIndicator",borderColor:wa.haloBlue,borderWidth:1,vertices:[]})),bb.setBounds(Ha.bounds().union(this.innerBounds())),bb.vertices=
[bb.localizePointFrom(da,this),bb.localizePointFrom(Ha.center,this)]):bb&&bb.remove()}},{key:"toggleMorphHighlighter",value:function(da,Ha,bb){bb=void 0===bb?!1:bb;if(Ha)if(Ha.onHaloGrabover)Ha.onHaloGrabover(da);else bb=wa.MorphHighlighter.for(this,Ha,bb),da&&Ha&&Ha!=this.world()?bb&&bb.show(Ha):bb&&bb.deactivate()}},{key:"temporaryEditTextMorph",value:function(da){if(this.target.isText){var Ha=this.target.readOnly;this.target.readOnly=!1;this.target.focus();this.target.cursorPosition=this.target.textPositionFromPoint(da.positionIn(this.target));
var bb=this.world(),Qb=this.target,uc=this.topBar,Tc=function(vd){uc.stylingPalette&&uc.stylingPalette.fullContainsWorldPoint(bb.firstHand.position)?(Qb.whenRendered().then(function(){wa.once(Qb,"onBlur",Tc)}),wa.once(Qb,"onBlur",Tc)):(uc.setEditMode("Halo",!0),Qb.readOnly=Ha,Qb.collapseSelection(),uc.showHaloFor(Qb))};this.target.whenRendered().then(function(){wa.once(Qb,"onBlur",Tc)});uc.setEditMode("Hand",!0);this.remove()}}},{key:"onMouseDown",value:function(da){var Ha=this,bb=da.state.clickedOnMorph;
if(!da.isCommandKey()&&bb==this.borderBox){if(2==da.state.clickCount&&this.target.isText){this.temporaryEditTextMorph(da);return}return wa.promise.delay(200).then(function(){2!=da.state.clickCount&&Ha.remove()})}if(da.isShiftDown()&&da.isCommandKey())bb=this.target.isMorphSelection?this.target.morphBeneath(da.position):this.morphBeneath(da.position),this.isAlreadySelected(bb)?this.removeMorphFromSelection(bb):this.addMorphToSelection(bb);else{if(bb==this.borderBox&&da.isCommandKey()){var Qb=da.world.morphsContainingPoint(da.position).filter(function(uc){return uc.halosEnabled});
(Qb=Qb.slice(Qb.indexOf(this.target)+1)[0]||Qb[0]||da.world)&&da.world.showHaloFor(Qb,da.domEvt.pointerId);this.remove()}bb==this&&da.isCommandKey()&&(Qb=this.morphBeneath(da.position),da.world.showHaloFor(Qb,da.domEvt.pointerId));bb==this&&wa.promise.delay(500).then(function(){Ha.remove()})}}},{key:"onContextMenu",value:function(da){var Ha=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(bb){return Ha.target.openMenu(bb,da)}).catch(function(bb){return $world.logError(bb)})}},
{key:"onKeyUp",value:function(da){this.changingName||this.buttonControls.map(function(Ha){return Ha.onKeyUp(da)})}},{key:"getMesh",value:function(da,Ha){var bb=da.x;da=da.y;Ha=void 0===Ha?wa.pt(0,0):Ha;var Qb=this.world().visibleBounds(),uc=Qb.height;Qb=Qb.width;var Tc={borderStyle:"dotted",borderWidth:2,borderColor:wa.Color.orange};Tc=this.get("mesh")||this.addMorph(new wa.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:wa.pt(Qb,uc),fill:null,submorphs:[new wa.Path(Object.assign({name:"vertical"},
Tc)),new wa.Path(Object.assign({name:"horizontal"},Tc))]}));Tc.globalPosition=Ha;Tc.getSubmorphNamed("vertical").vertices=[wa.pt(bb,0).subPt(Ha),wa.pt(bb,uc).subPt(Ha)];Tc.getSubmorphNamed("horizontal").vertices=[wa.pt(0,da).subPt(Ha),wa.pt(Qb,da).subPt(Ha)];return Tc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:wa.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},
acceptsDrops:{defaultValue:!1},maskBounds:{initialize:function(){this.maskBounds=$world.visibleBounds()},set:function(da){this.setProperty("maskBounds",da);this.relayout()}},activeItems:{derived:!0,defaultValue:["*"],set:function(da){this.setProperty("activeItems",da);this.buttonControls.forEach(function(Ha){return Ha.visible=da.includes(Ha.name)})}},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},
hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(wa.pt(0))}},topBar:{serialize:!1,get:function(){return this.getProperty("topBar")||this.get("lively top bar")}},targetIsPositionedByLayout:{derived:!0,get:function(){return this.target.isLayoutable&&wa.PropertyPath("target.owner.layout.renderViaCSS").get(this)}},target:{get:function(){return this.state?this.state.target:null},set:function(da){this.state||(this.state={});var Ha=!!this.state.target;this.detachFromTarget();
da=this.prepareTarget(da);this.state.target=da;Ha&&this.alignWithTarget();wa.connect(da,"onChange",this,"alignWithTarget");wa.connect(da,"onOwnerChanged",this,"removeIfDetached")}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:975,end:19891})}(wa.Morph);Ka=wa.Halo;var Rb=Pa("H",Ka);
(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof Gb.HaloPropertyDisplay?Gb.HaloPropertyDisplay:Gb.HaloPropertyDisplay=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(da){var Ha=this.halo.state.activeButton;da=String(da);this.visible=!0;this.textString=da;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(Ha.bounds())&&(this.position=wa.pt(Ha.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},
{key:"defaultPosition",get:function(){return wa.pt(25,0)}},{key:"for",value:function(da){return da.getSubmorphNamed(this.morphName)||da.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:wa.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:wa.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:wa.Color.white},position:{defaultValue:this.defaultPosition}}}}],
Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20081,end:21419})})(wa.Label);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof Gb.MultiSelectionTarget?Gb.MultiSelectionTarget:Gb.MultiSelectionTarget=
function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(da){return this.selectedMorphs.includes(da)}},{key:"alignWithSelection",value:function(){var da=this.selectedMorphs.map(function(Ha){return Ha.globalBounds()}).reduce(function(Ha,bb){return Ha.union(bb)});this.setBounds(da)}},
{key:"onGrab",value:function(da){this.grabbingHand=da.hand;this.selectionGrabbed=!0;da.hand.grab(this.selectedMorphs);wa.once(da.hand,"dropMorphsOn",this,"onGrabEnd");wa.connect(da.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;wa.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(da){var Ha=da.value.subPt(da.prevValue);this.selectedMorphs.forEach(function(bb){return bb.resizeBy(Ha)})}},{key:"updatePosition",value:function(da){if(!this.selectionGrabbed){var Ha=
da.value.subPt(da.prevValue);this.selectedMorphs.forEach(function(bb){return bb.moveBy(Ha)})}}},{key:"updateRotation",value:function(da){var Ha=this,bb=da.value-da.prevValue;this.selectedMorphs.forEach(function(Qb){var uc=Qb.origin;Qb.adjustOrigin(Qb.localize(Ha.worldPoint(wa.pt(0,0))));Qb.rotation+=bb;Qb.adjustOrigin(uc)})}},{key:"updateScale",value:function(da){var Ha=this,bb=da.value-da.prevValue;this.selectedMorphs.forEach(function(Qb){var uc=Qb.origin;Qb.adjustOrigin(Qb.localize(Ha.worldPoint(wa.pt(0,
0))));Qb.scale+=bb;Qb.adjustOrigin(uc)})}},{key:"onChange",value:function(da){$c._get(Object.getPrototypeOf(La.prototype),"onChange",this).call(this,da);if(this.modifiesSelectedMorphs){switch(da.prop){case "extent":this.updateExtent(da);break;case "scale":this.updateScale(da);break;case "position":this.updatePosition(da);break;case "rotation":this.updateRotation(da)}return da}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21487,end:23758})})(wa.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("HaloItem")&&
"function"===typeof Gb.HaloItem?Gb.HaloItem:Gb.HaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:wa.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:wa.pt(24,24)},halo:{},acceptsDrops:{defaultValue:!1}}}},{key:"for",value:function(da){return da.getSubmorphNamed(this.morphName)||da.addMorph(new this({halo:da,name:this.morphName}))}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:23922,end:24640})})(wa.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("NameHolder")&&"function"===typeof Gb.NameHolder?Gb.NameHolder:Gb.NameHolder=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onHoverIn",
value:function(da){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=wa.Color.orange)}},{key:"onHoverOut",value:function(da){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=wa.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(da){"Enter"==da.keyCombo?(this.accept(),
this.halo.focus(),da.stop()):$c._get(Object.getPrototypeOf(La.prototype),"onKeyDown",this).call(this,da)}},{key:"onMouseUp",value:function(){wa.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(da){this.nameHolder.fontColor=wa.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(da){da=this.nameHolder.textString;var Ha=this.target.owner;this.validName=!Ha||!Ha.getSubmorphNamed(da)||this.target.name==da;wa.signal(this,"valid",[this.validName,
da])}},{key:"update",value:function(){var da=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return da.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(da){if(!this.forceUniqueName||
this.validName)this.target.name=da,wa.signal(this,"active",[!1,this]),wa.CommentBrowser.instance&&wa.CommentBrowser.updateName(this.target)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:wa.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new wa.HorizontalLayout({renderViaCSS:!0,
resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new wa.Text({fill:wa.Color.transparent,fontColor:wa.Color.white,fontWeight:"bold",active:!0}));wa.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:24675,end:27426})})(wa.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("NameHaloItem")&&"function"===typeof Gb.NameHaloItem?Gb.NameHaloItem:Gb.NameHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(da){$c._get(Object.getPrototypeOf(La.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,da);this.initComponentLink();this.initNameHolders();this.validityIndicator=wa.Icon.makeLabel("check",{fontColor:wa.Color.green,fontSize:15,padding:wa.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?wa.componentAccent:wa.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var da=this,Ha=this.halo.target;if(Ha&&!Ha.isMorphSelection&&Ha.master){var bb=Ha.master.determineMaster(Ha),Qb=bb&&!!Ha.world().localComponents.includes(bb),uc=bb?Ha.master.getWorldUrlFor(bb):
"this project";Ha=this.addMorph(wa.Icon.makeLabel(uc?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:wa.Color.white,padding:wa.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+uc}));uc&&wa.connect(Ha,"onMouseDown",function(){Qb?da.showLocalMaster(bb):window.open(uc)})}}},{key:"showLocalMaster",value:function(da){var Ha;if(Ha=da.getWindow())Ha.activate(),Ha.minimized&&(Ha.minimized=!1);da.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?
this.halo.target.selectedMorphs.map(function(da){return{target:da,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var da=this;this.nameHolders=this.targets().map(function(Ha){Ha=new wa.NameHolder({halo:da.halo,highlightOnHover:Ha.highlightOnHover,target:Ha.target});wa.connect(Ha,"active",da,"toggleActive");wa.connect(Ha,"valid",da,"toggleNameValid");return Ha});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(wa.arr.interpose(this.nameHolders,
{extent:wa.pt(1,28),fill:wa.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(da){var Ha=$jscomp.makeIterator(da);da=Ha.next().value;var bb=Ha.next().value;if(this.halo.changingName!==da){this.halo.changingName=da;if(Ha=this.get("master link"))Ha.visible=Ha.isLayoutable=!da;da?(this.nameHolders.forEach(function(Qb){return Qb!=bb&&Qb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=wa.Color.darkGray,setTimeout(function(){return bb.nameHolder.selectAll()})):
(this.fill=wa.haloBlue,this.nameHolders.forEach(function(Qb){return Qb!=bb&&Qb.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(da){var Ha=$jscomp.makeIterator(da);da=Ha.next().value;Ha=Ha.next().value;(this.validName=da)?(this.conflictingMorph=null,this.borderColor=wa.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=wa.Color.green,wa.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=
this.get(Ha),this.borderColor=wa.Color.red,this.validityIndicator.fontColor=wa.Color.red,this.validityIndicator.nativeCursor="pointer",wa.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){wa.arr.zip(this.targets(),this.nameHolders).map(function(Ha){var bb=$jscomp.makeIterator(Ha);Ha=bb.next().value.target;bb=bb.next().value;bb.target=Ha;bb.update()});var da=this.halo.innerBounds().bottomCenter().addPt(wa.pt(0,2));this.topCenter=wa.pt(Math.max(da.x,30),
Math.max(da.y,80))}},{key:"onMouseDown",value:function(da){var Ha=this,bb=this.conflictingMorph;bb&&(this.halo.toggleMorphHighlighter(!0,bb),setTimeout(function(){return Ha.halo.toggleMorphHighlighter(!1,bb)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:wa.haloBlue},borderColor:{defaultValue:wa.Color.green},layout:{initialize:function(){this.layout=
new wa.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27428,end:31928})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("CloseHaloItem")&&
"function"===typeof Gb.CloseHaloItem?Gb.CloseHaloItem:Gb.CloseHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"update",value:function(){var da=this.halo,Ha=da.target.owner;Ha.undoStart("close-halo");da.target.selectedMorphs?da.target.selectedMorphs.forEach(function(bb){return bb.abandon()}):da.target.abandon();Ha.undoStop("close-halo");da.remove()}},{key:"onMouseDown",value:function(da){this.update()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{targetIsComponent:{derived:!0,get:function(){return this.halo.target.isComponent}},styleClasses:{after:["halo"],initialize:function(){this.styleClasses=["fas",this.targetIsComponent?"fa-eye-slash":"fa-trash"]}},draggable:{defaultValue:!1},tooltip:{after:["halo"],initialize:function(){this.tooltip=this.targetIsComponent?"Hide this component":
"Remove this morph from the world"}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:31930,end:32940})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("GrabHaloItem")&&"function"===typeof Gb.GrabHaloItem?Gb.GrabHaloItem:
Gb.GrabHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"adjustTarget",value:function(da,Ha){wa.PropertyPath("owner.layout.autoResize").get(da)&&!da.globalBounds().insetBy(10).containsPoint(Ha)&&(da=da.owner);return da}},{key:"valueForPropertyDisplay",value:function(){var da=this.hand,Ha=this.halo,bb=this.prevDropTarget,Qb=da.world(),uc=da.findDropTarget(da.globalPosition,[Ha.target],function(Tc){return!Tc.isHaloItem&&
!Tc.ownerChain().some(function(vd){return vd.isHaloItem||!vd.visible||0==vd.opacity})});if(uc)return uc=this.adjustTarget(uc,da.globalPosition),Ha.toggleMorphHighlighter(uc&&uc!=Qb,uc,!0),bb&&bb!=uc&&Ha.toggleMorphHighlighter(!1,bb),(this.prevDropTarget=uc)&&uc.name}},{key:"init",value:function(da){var Ha=this.halo,bb=Ha.target.undoStart("grab-halo");bb&&bb.addTarget(Ha.target.owner);this.hand=da;Ha.target.onGrab({halo:Ha,hand:da,isShiftDown:function(){return!1}});Ha.state.activeButton=this;this.opacity=
.3;var Qb=wa.connect(da,"update",this,"update");wa.once(Ha.target,"remove",function(){return Qb.disconnect()})}},{key:"stop",value:function(da){var Ha=this.halo,bb=this.prevDropTarget,Qb=Ha.target.undoInProgress,uc=da.hand.findDropTarget(da.hand.globalPosition,[Ha.target],function(Tc){return!Tc.isHaloItem&&!Tc.ownerChain().some(function(vd){return vd.isHaloItem})});uc=this.adjustTarget(uc,da.hand.globalPosition);wa.disconnect(da.hand,"update",this,"update");wa.MorphHighlighter.interceptDrop(Ha,uc,
Ha.target);Qb.addTarget(uc);uc.onDrop(da);Ha.state.activeButton=null;Ha.alignWithTarget();Ha.toggleMorphHighlighter(!1,bb);wa.MorphHighlighter.removeHighlighters(Ha);Ha.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(da){this.init(da.hand)}},{key:"onDragEnd",value:function(da){this.stop(da)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},
{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33004,end:35532})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
La=Gb.hasOwnProperty("DragHaloItem")&&"function"===typeof Gb.DragHaloItem?Gb.DragHaloItem:Gb.DragHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(da){var Ha=this.halo.getSubmorphNamed("mesh");if(da)return Ha=this.halo.getMesh(this.halo.target.worldPoint(wa.pt(0,0))),
this.focus(),Ha;Ha&&Ha.remove()}},{key:"init",value:function(){var da=this.halo.target;da.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=da.position;this.targetTransform=da.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);wa.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(da,Ha,bb){Ha=void 0===Ha?!1:Ha;
bb=void 0===bb?!1:bb;this.actualPos=da=this.actualPos.addPt(this.targetTransform.transformDirection(da));Ha&&(da=da.griddedBy(wa.pt(10,10)));this.halo.target.position=da;this.updateAlignmentGuide(Ha);this.world().withTopBarDo(function(Qb){if(Qb.activeSideBars.includes("Styling Palette"))Qb.stylingPalette.onHierarchyChange()});Ha||wa.showAndSnapToGuides(this.halo.target,!0,bb,5,500)}},{key:"onDragStart",value:function(da){this.init()}},{key:"onDrag",value:function(da){this.update(da.state.dragDelta,
da.isAltDown(),da.isCtrlDown())}},{key:"onDragEnd",value:function(da){this.stop()}},{key:"onKeyUp",value:function(da){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],
Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35534,end:37532})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("InspectHaloItem")&&"function"===typeof Gb.InspectHaloItem?Gb.InspectHaloItem:Gb.InspectHaloItem=function(da){da&&
da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){var Ha=this;(function(){var bb,Qb,uc,Tc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vd){if(1==vd.nextAddress)return vd.yield(System.import("lively.ide/js/inspector.js"),2);bb=vd.yieldResult;Qb=bb.default;(uc=Ha.world().getSubmorphsByStyleClassName("Inspector").find(function(Wd){return Wd.targetObject==Ha.halo.target}))&&
(Tc=uc.getWindow())?(Tc.minimized=!1,Tc.activate(),Tc.animate({center:Ha.world().visibleBounds().center(),duration:200})):Qb.openInWindow({targetObject:Ha.halo.target});Ha.halo.remove();vd.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],
Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37534,end:38451})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("EditHaloItem")&&"function"===typeof Gb.EditHaloItem?Gb.EditHaloItem:Gb.EditHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){var Ha=this;(da=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(bb){return bb.target==Ha.halo.target}))?(da=da.getWindow(),da.bringToFront(),da.minimized=!1,da.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:38453,end:39233})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("RotateHaloItem")&&"function"===typeof Gb.RotateHaloItem?Gb.RotateHaloItem:Gb.RotateHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(da){$c._get(Object.getPrototypeOf(La.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,da);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(da){this.setProperty("angle",da)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(da){this.setProperty("scaleGauge",da)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(da){this.setProperty("initRotation",da)}},{key:"valueForPropertyDisplay",
value:function(){var da=this.halo.target;return this.scaleGauge?da.scale.toFixed(4).toString():wa.num.toDegrees(da.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(da){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=da;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(da){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=da.scaleBy(1/
this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(da){this.scaleGauge=null;da=this.initRotation+(da-this.angle);da=wa.num.toRadians(wa.num.detent(wa.num.toDegrees(da),10,45));this.halo.target.rotation=da;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(da){var Ha=this.scaleGauge,bb=this.halo;Ha||(Ha=this.scaleGauge=da.scaleBy(1/bb.target.scale));this.angle=da.theta();this.initRotation=bb.target.rotation;bb.target.scale=
wa.num.detent(da.dist(wa.pt(0,0))/Ha.dist(wa.pt(0,0)),.1,.5);bb.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(da){this.styleClasses=["fas",da?"fa-search-plus":"fa-redo"];this.tooltip=da?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",
value:function(){}},{key:"attachToLayout",value:function(){}},{key:"onDragStart",value:function(da){this.adaptAppearance(da.isShiftDown());da.isShiftDown()?this.initScale(da.position.subPt(this.halo.target.globalPosition)):this.init(da.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(da){this.globalPosition=da.position.addPt(wa.pt(-10,-10));this.adaptAppearance(da.isShiftDown());da.isShiftDown()?this.updateScale(da.position.subPt(this.halo.target.globalPosition)):
this.update(da.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(da){this.adaptAppearance(da.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(da){this.adaptAppearance(da.isShiftDown())}},{key:"onKeyUp",value:function(da){this.adaptAppearance(da.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:39235,end:42603})})(wa.HaloItem);wa.nameNumberRe=/(.+)([0-9]+)$/;(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("ComponentHaloItem")&&"function"===typeof Gb.ComponentHaloItem?Gb.ComponentHaloItem:
Gb.ComponentHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"updateComponentIndicator",value:function(){var da=this.world(),Ha=this.halo.target;this.halo.remove();da.showHaloFor(Ha)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var da=this,Ha,bb,Qb,uc,Tc,vd,Wd,ed,He,Rd,Fe,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ce){switch(Ce.nextAddress){case 1:Ha=da.halo.target;
bb=da.world();Qb=[];Ha.withAllSubmorphsDoExcluding(function(Ke){Ke!=Ha&&Qb.push(Ke)},function(Ke){return Ke.master&&Ke!=Ha});uc=wa.arr.groupBy(Qb,function(Ke){return Ke.name});Tc={fontWeight:"normal",fontSize:16};if(!Object.values(uc).find(function(Ke){return 1<Ke.length})){Ce.jumpTo(2);break}vd=wa.arr.sum(Object.values(uc).filter(function(Ke){return 1<Ke.length}).map(function(Ke){return Ke.length}));return Ce.yield(bb.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(wa.Icon.textAttribute("exclamation-triangle",
{fontColor:wa.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+vd+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",Object.assign({},Tc,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",
Object.assign({},Tc,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Tc,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Tc,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(Wd=Ce.yieldResult,!Wd)return Ce.return();case 2:He=Ce.forIn(uc);case 4:if(null==(ed=He.getNext())){Ce.jumpTo(6);break}if(2>uc[ed].length){Ce.jumpTo(4);break}Rd=uc[ed];case 7:if(!(1<Rd.length)){Ce.jumpTo(4);break}Fe=Rd[0];wa.show(Fe,!0);return Ce.yield(bb.prompt(["Name Collision\n",{},"The name of\n",Tc,Fe.toString(),Object.assign({},Tc,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Tc),Ha.name,Object.assign({},Tc,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<Rd.length?"are "+(Rd.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Tc," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Tc],{input:Fe.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Ke){return!Object.keys(uc).includes(Ke)}}),9);case 9:z=Ce.yieldResult;wa.signal(bb,"hideMarkers");z&&(Fe.name=z);if(z in uc){Ce.jumpTo(7);break}else if(!z){Rd=wa.arr.rotate(Rd);Ce.jumpTo(7);break}wa.arr.remove(Rd,Fe);Ce.jumpTo(7);break;case 6:return Ce.return(!0)}})}},{key:"onMouseDown",value:function(){var da=this,Ha,bb,Qb,uc,Tc,vd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wd){switch(Wd.nextAddress){case 1:Ha=
da.halo.target;bb=!Ha.isComponent;Qb=$world.getAllNamed(Ha.name).length;if(!(bb&&1<Qb)){Wd.jumpTo(2);break}return Wd.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(Qb-1)+" other morph"+(2<Qb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:Ha.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(ed){return 0==$world.getAllNamed(ed).length}}),3);case 3:uc=Wd.yieldResult;if(!uc)return Wd.return();Ha.name=uc;case 2:Tc=Ha;if(!(vd=bb)){Wd.jumpTo(4);break}return Wd.yield(da.checkForDuplicateNamesInHierarchy(),5);case 5:vd=Wd.yieldResult;case 4:Tc.isComponent=vd,bb?(wa.arr.pushIfNotIncluded(Ha.world().localComponents,Ha),wa.arr.pushIfNotIncluded(Ha.world().hiddenComponents,Ha.name)):wa.arr.remove(Ha.world().localComponents,Ha),da.world()?da.updateComponentIndicator():Ha.world().showHaloFor(Ha),
Wd.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42644,end:48798})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("CopyHaloItem")&&"function"===typeof Gb.CopyHaloItem?Gb.CopyHaloItem:Gb.CopyHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,
Tb,[{key:"init",value:function(da){function Ha(ed,He){return He.match(wa.nameNumberRe)?He.replace(wa.nameNumberRe,function(Rd,Fe,z){z||(z="0");for(Rd=Number(z);ed.get(Fe+ ++Rd););return Fe+Rd}):He+"1"}var bb=this.halo,Qb=bb.target,uc=bb.world(),Tc=Qb instanceof wa.MultiSelectionTarget;bb.remove();wa.connect(da,"update",this,"update");if(Tc){var vd=wa.arr.compact(Qb.selectedMorphs.map(function(ed){if(ed.canBeCopied())return ed=ed.copy(!0),uc.addMorph(ed),ed}));Tc=vd.map(function(ed){ed.name=Ha(Qb,
ed.name);return ed.position});vd[0].undoStart("copy-halo");uc.addMorph(bb);bb.refocus(vd);da.grab(bb.target);bb.target.onGrab({halo:bb,hand:da,isShiftDown:function(){return!1}});Tc.forEach(function(ed,He){return vd[He].globalPosition=ed});bb.alignWithTarget()}else{Tc=Qb.globalPosition;var Wd=Qb.copy(!0);Qb.isComponent&&(Wd.isComponent=!1,Wd.withAllSubmorphsDoExcluding(function(ed){ed!=Wd&&ed.master||delete ed._parametrizedProps},function(ed){return ed.master&&ed!=Wd}),Wd.master=Qb);Wd.name=Ha(Qb,
Qb.name);uc.addMorph(Wd);Wd.globalPosition=Tc;Wd.undoStart("copy-halo");da.grab(Wd);uc.addMorph(bb);bb.visible=!1}}},{key:"stop",value:function(da){var Ha=this.halo,bb=$jscomp.makeIterator(da.grabbedMorphs).next().value,Qb=da.findDropTarget(da.globalPosition,[Ha.target],function(Tc){return!Tc.isHaloItem&&!Tc.ownerChain().some(function(vd){return vd.isHaloItem})}),uc=Ha.target.undoInProgress;wa.disconnect(da,"update",this,"update");uc.addTarget(Qb);da.dropMorphsOn(Qb);Ha.target.undoStop("copy-halo");
Ha.remove();da.world().showHaloFor(bb)}},{key:"onDragStart",value:function(da){this.init(da.hand)}},{key:"onDragEnd",value:function(da){this.stop(da.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var da=this,Ha,bb,Qb,uc,Tc,vd,Wd,ed,He,Rd,Fe,z,Ce,Ke,eg,sf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nd){switch(Nd.nextAddress){case 1:Ha=da;bb=Ha.halo;if(bb.nameHalo().nameHolders.find(function(hf){return hf.nameHolder===$world.focusedMorph}))return Nd.return();
Qb=bb.target;uc=bb.world();Tc=Qb instanceof wa.MultiSelectionTarget;vd=Qb.globalBounds().topLeft();Wd=Tc?Qb.selectedMorphs:[Qb];return Nd.yield(Promise.all(Wd.filter(function(hf){return!hf.isCommentIndicator}).map(function(hf){var jf;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bf){return 1==Bf.nextAddress?(jf=hf.copy(!0),Bf.yield(Promise.all(jf.withAllSubmorphsDo(function(Xd){if(Xd.master)return Xd.master.applyIfNeeded(),Xd.master.whenApplied()})),2)):Bf.return(jf)})})),2);case 2:ed=
Nd.yieldResult,He=[],Rd='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>",bb.remove(),Nd.setCatchFinallyBlocks(3),Fe=$jscomp.makeIterator(ed),z=Fe.next();case 5:if(z.done)return Rd+="</body></html>",eg=JSON.stringify(He),Nd.yield(da.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Rd},{type:"application/morphic",data:eg}]),9);
Ce=z.value;return Nd.yield(wa.createMorphSnapshot(Ce,{addPreview:!1,testLoad:!1}),8);case 8:Ke=Nd.yieldResult;Ke.copyMeta={offset:Ce.worldPoint(wa.pt(0,0)).subPt(vd)};He.push(Ke);Rd+=Ce.renderPreview();z=Fe.next();Nd.jumpTo(5);break;case 9:Nd.leaveTryBlock(4);break;case 3:return sf=Nd.enterCatchBlock(),uc.logError(sf),Nd.return();case 4:uc.addMorph(bb),bb.refocus(Wd),bb.setStatusMessage("copied"),Nd.jumpToEnd()}})}},{key:"onMouseUp",value:function(da){var Ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){da.stop();
return bb.yield(Ha.copyToClipBoard(),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:48800,end:53428})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("OriginHaloItem")&&"function"===typeof Gb.OriginHaloItem?Gb.OriginHaloItem:Gb.OriginHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"fill",get:function(){return wa.Color.white.interpolate(.2,
this.borderColorTop)}},{key:"extent",get:function(){return wa.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");
this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(da){var Ha=this.halo,bb=Ha.target.origin,Qb=Ha.target.worldPoint(bb);da=Ha.target.localize(Qb.addPt(da)).subPt(Ha.target.scroll).subPt(bb);Ha.target.adjustOrigin(Ha.target.origin.addPt(da))}},{key:"onDragStart",value:function(da){this.init()}},{key:"onDragEnd",value:function(da){this.stop()}},{key:"onDrag",
value:function(da){this.update(da.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?wa.componentAccent:wa.haloBlue}}}}}],Gb,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53430,end:55091})})(wa.HaloItem);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("ResizeHandle")&&"function"===typeof Gb.ResizeHandle?Gb.ResizeHandle:Gb.ResizeHandle=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $c(La,Tb,[{key:"valueForPropertyDisplay",value:function(){var da=this.halo.target.extent,Ha=da.y;return da.x.toFixed(1)+"x"+Ha.toFixed(1)}},{key:"positionInHalo",value:function(){var da=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(wa.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),da=da.insetBy(-4));return da.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(da){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(da.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(da){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(da.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(da){this.init(da.position,da.isShiftDown())}},{key:"onDragEnd",value:function(da){this.stop(da.isShiftDown())}},{key:"onDrag",value:function(da){this.update(da.position,da.isShiftDown(),da.isAltDown(),da.isCtrlDown());this.focus()}},{key:"init",value:function(da,Ha){Ha=void 0===
Ha?!1:Ha;var bb=this.halo.target,Qb=bb.origin,uc=bb.position;bb=bb.extent;this.startPos=da;this.startBounds=uc.subPt(Qb).extent(bb);this.startOrigin=this.halo.target.origin;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();da=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=wa.num.toRadians(da%45);this.halo.toggleDiagonal(Ha,this.corner)}},{key:"update",value:function(da,Ha,bb,Qb){Ha=void 0===Ha?!1:Ha;bb=void 0===bb?!1:bb;Qb=void 0===
Qb?!1:Qb;var uc=this.corner,Tc=this.tfm;da=this.startPos.subPt(da);Tc=Tc.transformDirection(wa.pt(da.x,da.y));bb&&(Tc=Tc.griddedBy(wa.pt(10,10)));this.halo.updateBoundsFor(uc,Ha,Tc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(Ha,uc);this.updateAlignmentGuide(bb);Ha=[];uc=uc.toLowerCase();uc.includes("left")&&Ha.push("left");uc.includes("top")&&Ha.push("top");uc.includes("bottom")&&Ha.push("bottom");uc.includes("right")&&Ha.push("right");wa.showAndSnapToResizeGuides(this.halo.target,
Ha,!0,Qb,5,200)}},{key:"stop",value:function(da){da=this.halo;da.state.activeButton=null;da.alignWithTarget();da.toggleDiagonal(!1);this.updateAlignmentGuide(!1);wa.removeSnapToGuidesOf(da.target)}},{key:"updateAlignmentGuide",value:function(da){var Ha=this.halo.getSubmorphNamed("mesh");if(da)return da=this.halo.target.extent,da=wa.pt(da.x%10,da.y%10),Ha=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),da),this.focus(),Ha;Ha&&Ha.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(da){0<da&&(da-=360);da=-8-(da/45).toFixed();0==da&&(da=8);return wa.arr.zip(wa.arr.rotate([["topLeft",function(Ha){return Ha.negated()}],["topCenter",function(Ha){return Ha.withX(0).negated()}],["topRight",function(Ha){return Ha.withX(0).negated()}],["rightCenter",function(Ha){return wa.pt(0,
0)}],["bottomRight",function(Ha){return wa.pt(0,0)}],["bottomCenter",function(Ha){return wa.pt(0,0)}],["bottomLeft",function(Ha){return Ha.withY(0).negated()}],["leftCenter",function(Ha){return Ha.withY(0).negated()}]],da),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(da){var Ha=this;if(!da.target)return[];
var bb=da.target.getGlobalTransform().getRotation();return wa.arr.compact(this.getResizeParts(bb).map(function(Qb){var uc=$jscomp.makeIterator(Qb),Tc=$jscomp.makeIterator(uc.next().value);Qb=Tc.next().value;Tc.next();Tc.next();Tc=$jscomp.makeIterator(uc.next().value);uc=Tc.next().value;Tc=Tc.next().value;return Ha.for(da,Qb,Tc,uc)})).map(function(Qb){return Qb.alignInHalo()})}},{key:"for",value:function(da,Ha,bb,Qb){var uc="Resize "+Ha;da=da.getSubmorphNamed(uc)||new this({name:uc,halo:da,corner:Ha,
tooltip:"Resize "+Ha,extent:wa.pt(10,10),borderWidth:1,borderRadius:0,borderColor:da.target.isComponent?wa.componentAccent:wa.haloBlue,fill:wa.Color.white});return Object.assign(da,{nativeCursor:Qb,location:bb})}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:55150,end:60455})})(wa.HaloItem);
(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("MenuHaloItem")&&"function"===typeof Gb.MenuHaloItem?Gb.MenuHaloItem:Gb.MenuHaloItem=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){var Ha=this,bb,Qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){if(1==uc.nextAddress)return bb=Ha.halo.target,Ha.halo.remove(),
uc.yield(bb.menuItems(da),2);Qb=uc.yieldResult;bb.world().openMenu(Qb).hasFixedPosition=Ha.halo.hasFixedPosition;uc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:60457,end:60982})})(wa.HaloItem);var eb=Pa("M",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("MorphHighlighter")&&"function"===typeof Gb.MorphHighlighter?Gb.MorphHighlighter:Gb.MorphHighlighter=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $c(La,Tb,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||
this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(da){this.layoutHalo&&this.layoutHalo.handleDrop(da)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();
this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:wa.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:wa.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},
acceptsDrops:{get:function(){return!!this.layoutHalo}},highlightedSides:{defaultValue:[],set:function(da){var Ha=this;this.setProperty("highlightedSides",da);this.submorphs=da.map(function(bb){return{type:"ellipse",isHaloItem:!0,fill:wa.Color.orange,center:Ha.innerBounds()[bb]()}});this.addMorph({type:"label",name:"name tag",padding:wa.Rectangle.inset(5,5,5,5),fontColor:wa.Color.white,fill:wa.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,
derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(da){da=void 0===da?$world:da;var Ha=da._morphHighlighters,bb;for(bb in Ha)Ha[bb].remove();delete da._morphHighlighters}},{key:"for",value:function(da,Ha,bb,Qb){bb=void 0===bb?!1:bb;Qb=void 0===Qb?[]:Qb;var uc=da._morphHighlighters=da._morphHighlighters||{};wa.properties.forEachOwn(uc,function(Tc,vd){return vd.alignWithHalo()});if(!Ha||Ha.ownerChain().find(function(Tc){return Tc.isHaloItem}))return null;
uc[Ha.id]=uc[Ha.id]||new this({targetId:Ha.id,halo:da,showLayout:bb});da.addMorph(uc[Ha.id]);uc[Ha.id].highlightedSides=Qb;return uc[Ha.id]}},{key:"interceptDrop",value:function(da,Ha,bb){(da=da._morphHighlighters=da._morphHighlighters||{},da[Ha.id])&&da[Ha.id].handleDrop(bb)}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:61171,end:64966})}(wa.Morph));wa.MorphHighlighter=eb;wa.MorphHighlighter=eb;wa.MorphHighlighter=eb;var Sc=Pa("I",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),La=Gb.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof Gb.InteractiveMorphSelector?Gb.InteractiveMorphSelector:Gb.InteractiveMorphSelector=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return $c(La,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(da,Ha,bb){da=void 0===da?$world:da;this.controllingMorph=void 0===Ha?null:Ha;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=da;this.filterFn=bb;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var da=wa.promise.deferred();da.promise.resolve=da.resolve;this.whenDone=da.promise;this.selectorMorph=wa.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,
epiMorph:!0}).openInWorld();wa.connect(this.world.firstHand,"position",this,"scanForTargetAt");wa.once(this.selectorMorph,"onMouseUp",this,"selectTarget");wa.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var da=this.world.firstHand.globalPosition;this.selectorMorph.center=da;this.selectorMorph.focus();var Ha=this.selectorMorph.morphBeneath(da),bb,Qb=this.possibleTarget,
uc=this.controllingMorph,Tc=this.filterFn,vd=this.world,Wd=this.morphHighlighter;for(Wd==Ha?Ha=Wd.morphBeneath(da):Ha&&Ha.isEpiMorph&&(Ha=Ha.morphBeneath(da));Ha&&(bb=[Ha].concat($jscomp.arrayFromIterable(Ha.ownerChain())).find(function(ed){return!ed.visible}));)Ha=bb=bb.morphBeneath(da);if(Ha&&Tc&&!Tc(Ha))for(;Ha&&![Ha].concat($jscomp.arrayFromIterable(Ha.ownerChain())).find(Tc);)Ha=Ha.morphBeneath(da);!Ha||Ha==Qb||uc&&Ha.ownerChain().includes(uc.getWindow())||(Wd&&Wd.deactivate(),(this.possibleTarget=
Qb=Ha)&&!Qb.isWorld&&(da=this.morphHighlighter=wa.MorphHighlighter.for(vd,Ha))&&da.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){wa.MorphHighlighter.removeHighlighters(this.world);wa.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},
{key:"selectMorph",value:function(da,Ha,bb){da=new this(da,Ha,bb);da.selectNewTarget();return da.whenDone}}],Gb,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:64975,end:67728})}(void 0));wa.InteractiveMorphSelector=Sc;wa.InteractiveMorphSelector=Sc;wa.InteractiveMorphSelector=Sc;wa.default=
Ka;var Ob=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Ob.info="import via sub modules";Ob.info="import via sub modules";Ob.info="import via sub modules";Ka=Pa("v",{});Ob.valueWidgets=Ka;Ob.valueWidgets=Ka;Ob.valueWidgets=Ka;var pd=Pa("p",{});Ob.popovers=pd;Ob.popovers=pd;Ob.popovers=pd;var Uc=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Uc.Morph=te;Uc.Icon=me;Uc.Color=Dc;Uc.pt=Vb;Uc.connect=jd;Uc.duration=300;Ob=Pa("P",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),
La=Gb.hasOwnProperty("Popover")&&"function"===typeof Gb.Popover?Gb.Popover:Gb.Popover=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"relayout",value:function(da){var Ha=this.get("body"),bb=this.get("arrow"),Qb=this.get("close button");bb=bb.height;da?(Ha.animate({topCenter:Uc.pt(0,bb),duration:200}),Qb.animate({topRight:Ha.topRight.addXY(8,-8),duration:200})):(Ha.topCenter=Uc.pt(0,bb),Qb.topRight=
Ha.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Uc.pt(200,200),fill:Uc.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},
get:function(){return this.get("body").submorphs[0]},set:function(da){var Ha=this;this.get("body").addMorph(da);this.whenRendered().then(function(){return Ha.relayout()})}},submorphs:{initialize:function(){var da=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Uc.pt(0,0),borderColor:Uc.Color.transparent,vertices:[Uc.pt(-10,0),Uc.pt(0,-15),Uc.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(Uc.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",
fill:null,extent:Uc.pt(16,16),borderColor:Uc.Color.transparent}];var Ha=$jscomp.makeIterator(this.submorphs);Ha.next();var bb=Ha.next().value;Ha=Ha.next().value;Uc.connect(Ha,"fire",this,"close");Uc.connect(bb,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return da.animated=!0},1E3)}}}}}],Gb,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:163,end:2541})}(Uc.Morph));Uc.Popover=Ob;Uc.Popover=Ob;Uc.Popover=Ob;var Kc=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Kc.Morph=te;Kc.TilingLayout=vc;Kc.morph=jc;Kc.Label=Bd;Kc.HorizontalLayout=fd;Kc.Icon=me;Kc.InputLine=ec;Kc.config=Bc;Kc.connect=jd;Kc.signal=mb;Kc.Color=Dc;Kc.LinearGradient=Gc;Kc.pt=Vb;Kc.rect=Wc;Kc.num=Ad;Kc.obj=qd;Kc.popovers=pd;Kc.ValueScrubber=Ua;Kc.Popover=Ob;(function(Tb){var Gb=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof Gb.ContextSensitiveWidget?Gb.ContextSensitiveWidget:Gb.ContextSensitiveWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Kc.Color.transparent},
isSelected:{defaultValue:"false",set:function(da){this.setProperty("isSelected",da);this.fontColor=da?Kc.Color.white:Kc.Color.black}},layout:{initialize:function(){this.layout=new Kc.HorizontalLayout}},context:{serialize:!1}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,
end:2441})})(Kc.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("ShortcutWidget")&&"function"===typeof Gb.ShortcutWidget?Gb.ShortcutWidget:Gb.ShortcutWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(da){da.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(da){this.setProperty("title",da);this.getSubmorphNamed("valueString").value=da}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(da){this.submorphs.forEach(function(Ha){return Ha.fontColor=da})}},submorphs:{initialize:function(){this.submorphs=[Kc.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],
fontSize:15,padding:Kc.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Kc.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:2443,end:3793})})(Kc.ContextSensitiveWidget);pd=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("LayoutWidget")&&"function"===typeof Gb.LayoutWidget?Gb.LayoutWidget:Gb.LayoutWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+
" Layout":"No Layout"}},{key:"openPopover",value:function(){var da=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ha=new Kc.popovers.LayoutPopover({hasFixedPosition:!!da.ownerChain().find(function(Qb){return Qb.hasFixedPosition}),container:da.context}),bb.yield(Ha.fadeIntoWorld(da.globalBounds().center()),2);Kc.connect(Ha,"layoutChanged",da,"layoutChanged");Kc.signal(da,"openWidget",Ha);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,
end:4641})}(Kc.ShortcutWidget);Kc.LayoutWidget=pd;Kc.LayoutWidget=pd;Kc.LayoutWidget=pd;pd=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("ColorWidget")&&"function"===typeof Gb.ColorWidget?Gb.ColorWidget:Gb.ColorWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"relayout",value:function(da){da?this.submorphs=this.color?this.color.isGradient?
this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var da=this.color;if(2*da.stops.length==this.submorphs.length-3){var Ha;for(Ha in this.color.stops){var bb=da.stops[Ha];var Qb=bb.color,uc=bb.offset,Tc=$jscomp.makeIterator(this.submorphs[2+2*Ha].submorphs).next().value;bb=this.submorphs[3+2*Ha];Tc.fill=Qb;bb.value=(100*uc).toFixed()+"%"+(Ha<da.stops.length-
1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=Kc.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Kc.pt(15,
15),fill:Kc.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Kc.pt(5,7.5),fill:Kc.Color.white,borderColor:Kc.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Kc.pt(0,0),Kc.pt(10,10)],borderColor:Kc.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Kc.pt(15,15),fill:Kc.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:Kc.pt(5,7.5),fill:this.color,borderColor:Kc.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Kc.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var da=this.color,Ha=[{type:"label",padding:Kc.rect(0,0,5,0),value:"linearGradient"==da.type?Kc.num.toDegrees(da.vectorAsAngle()).toFixed()+"\u00b0,":""}],bb;for(bb in da.stops){var Qb=da.stops[bb],uc=Qb.color;Qb=Qb.offset;
Ha.push({extent:Kc.pt(this.fontSize,this.fontSize),fill:Kc.Color.transparent,layout:new Kc.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:uc}]});Ha.push({type:"label",padding:Kc.rect(0,0,5,0),value:(100*Qb).toFixed()+"%"+(bb<da.stops.length-1?",":"")})}return Ha}},{key:"onMouseDown",value:function(da){this.openFillEditor()}},{key:"update",value:function(da){this.color=da}},{key:"openFillEditor",value:function(){var da=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==
bb.nextAddress)return Ha=new Kc.popovers.FillPopover({hasFixedPosition:!!da.ownerChain().find(function(Qb){return Qb.hasFixedPosition}),handleMorph:da.context,fillValue:da.color,title:"Fill Control",gradientEnabled:da.gradientEnabled}),bb.yield(Ha.fadeIntoWorld(da.globalBounds().center()),2);Kc.connect(Ha,"fillValue",da,"update");Kc.signal(da,"openWidget",Ha);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=
new Kc.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:Kc.Color.white},nonSelectionFontColor:{defaultValue:Kc.Color.black},color:{defaultValue:Kc.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(da){this.getProperty("isSelected")!=da&&(this.getSubmorphNamed("valueString").fontColor=da?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",da))}},submorphs:{after:["nonSelectionFontColor",
"selectionFontColor"],initialize:function(){Kc.connect(this,"color",this,"relayout",{converter:function(da,Ha){return(Ha&&Ha.isColor)!=(da&&da.isColor)}});this.relayout(!0)}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4705,end:10188})}(Kc.ContextSensitiveWidget);Kc.ColorWidget=
pd;Kc.ColorWidget=pd;Kc.ColorWidget=pd;pd=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("BooleanWidget")&&"function"===typeof Gb.BooleanWidget?Gb.BooleanWidget:Gb.BooleanWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},
{key:"properties",get:function(){return{fontFamily:{defaultValue:Kc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(da){this.setProperty("boolean",da);this.value=Kc.obj.safeToString(da);this.fontColor=this.boolean?Kc.Color.green:Kc.Color.red}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10197,end:10682})}(Kc.Label);Kc.BooleanWidget=pd;Kc.BooleanWidget=pd;Kc.BooleanWidget=pd;pd=Pa("N",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("NumberWidget")&&"function"===typeof Gb.NumberWidget?Gb.NumberWidget:Gb.NumberWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){$c._get(Object.getPrototypeOf(La.prototype),
"onMouseDown",this).call(this,da);"up"==da.targetMorph.name&&this.increment();"down"==da.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Kc.obj.dissoc($c._get(Object.getPrototypeOf(La.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(da,Ha){Ha=void 0===Ha?!0:Ha;this.setProperty("number",Ha?da/this.scaleFactor:da);Kc.signal(this,"number",this.number);this.relayout(Ha)}},{key:"relayoutButtons",value:function(){var da=this.getSubmorphNamed("up"),
Ha=this.getSubmorphNamed("down");this.getSubmorphNamed("value");da.height=Ha.height=Math.floor(this.height/2);da.width=Ha.width=20}},{key:"onChange",value:function(da){$c._get(Object.getPrototypeOf(La.prototype),"onChange",this).call(this,da);"extent"!=da.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(da){var Ha=this.getSubmorphNamed("value"),bb=this.showStepControls?20:0;Ha&&(this.autofit?(da||(Ha.value=this.number*this.scaleFactor),Ha.fit(),this.height=Ha.height,this.width=
Ha.width+bb):da||(Ha.width=this.width-bb),this.relayoutButtons(),da||(Ha.value=Kc.num.roundTo(this.number*this.scaleFactor,1),Ha.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,Ha.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,Ha.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,
!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(da){this.setProperty("autofit",da);this.getSubmorphNamed("value").scaleToBounds=!da}},number:{defaultValue:0,after:["unit","autofit"],set:function(da){this.setProperty("number",da);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},
floatingPoint:{after:["number","submorphs"],set:function(da){this.setProperty("floatingPoint",da);this.get("value").floatingPoint=da},get:function(){if("undefined"!==typeof this.getProperty("floatingPoint"))return this.getProperty("floatingPoint");var da=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return 1==this.scaleFactor&&da&&!!da[1]}},padding:{isStyleProp:!0,defaultValue:Kc.rect(5,3,0,0),after:["submorphs"],set:function(da){this.setProperty("padding",da);this.getSubmorphNamed("value").padding=
da}},extent:{defaultValue:Kc.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(da){this.get("value").baseFactor=da}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){var da=this;this.master={auto:"styleguide://SystemWidgets/number field/light"};this.master.whenApplied().then(function(){da.relayout()})}},fontColor:{isStyleProp:!0,
defaultValue:Kc.Color.rgbHex("#0086b3"),set:function(da){this.setProperty("fontColor",da)}},isSelected:{set:function(da){this.getProperty("isSelected")!=da&&(da?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",da))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(da){this.setProperty("fontFamily",da)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(da){this.setProperty("fontSize",
da)}},layout:{initialize:function(){this.layout=new Kc.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},showStepControls:{derived:!0,get:function(){return this.getSubmorphNamed("up").visible&&this.getSubmorphNamed("down").visible},set:function(da){this.clipMode=(this.getSubmorphNamed("up").visible=this.getSubmorphNamed("down").visible=da)?"visible":"hidden"}},submorphs:{after:["min","max"],initialize:function(da){0<da.length||(this.submorphs=[new Kc.ValueScrubber({name:"value",unit:this.unit,
floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),{name:"up",submorphs:[Kc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]},{name:"down",rotation:Math.PI,submorphs:[Kc.Icon.makeLabel("sort-up",{reactsToPointer:!1,name:"icon"})]}])}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:10691,end:17485})}(Kc.Morph));Kc.NumberWidget=pd;Kc.NumberWidget=pd;Kc.NumberWidget=pd;Ob=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("ShadowWidget")&&"function"===typeof Gb.ShadowWidget?Gb.ShadowWidget:Gb.ShadowWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){this.openPopover()}},
{key:"openPopover",value:function(){var da=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ha=new Kc.popovers.ShadowPopover({hasFixedPosition:!!da.ownerChain().find(function(Qb){return Qb.hasFixedPosition}),shadowValue:da.shadowValue}),bb.yield(Ha.fadeIntoWorld(da.globalBounds().center()),2);Kc.connect(Ha,"shadowValue",da,"shadowValue");Kc.connect(da,"shadowValue",da,"update");Kc.signal(da,"openWidget",Ha);bb.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},
{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var da=this.shadowValue,Ha=da.blur,bb=da.spread,Qb=da.distance;da=da.color;var uc=$jscomp.makeIterator(this.submorphs),Tc=uc.next().value,vd=uc.next().value;vd=$jscomp.makeIterator(vd.submorphs).next().value;
uc=uc.next().value;Tc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";vd.fill=da;uc.value=", "+Ha+"px, "+Qb+"px, "+bb+"px)"}},{key:"initShadowDisplay",value:function(){var da=this.shadowValue,Ha=da.blur,bb=da.spread,Qb=da.distance;da=da.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Kc.morph({fill:Kc.Color.transparent,extent:Kc.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Kc.pt(this.fontSize,
this.fontSize),position:Kc.pt(2,2),fill:da,borderColor:Kc.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+Ha+"px, "+Qb+"px, "+bb+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(da){this.setProperty("shadowValue",da);this.renderShadowDisplay()}},fill:{defaultValue:Kc.Color.transparent},nativeCursor:{defaultValue:"pointer"},
fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(da){this.submorphs.forEach(function(Ha){return Ha.fontColor=da})}},isSelected:{defaultValue:!1,set:function(da){this.setProperty("isSelected",da);this.fontColor=da?Kc.Color.white:Kc.Color.black}},layout:{initialize:function(){this.layout=new Kc.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:17496,end:20619})}(Kc.Morph);Kc.ShadowWidget=Ob;Kc.ShadowWidget=Ob;Kc.ShadowWidget=Ob;Ob=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("PointWidget")&&"function"===typeof Gb.PointWidget?Gb.PointWidget:Gb.PointWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){this.openPopover()}},{key:"openPopover",value:function(){var da=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ha=new Kc.popovers.PointPopover({pointValue:da.pointValue,hasFixedPosition:!!da.ownerChain().find(function(Qb){return Qb.hasFixedPosition})}),bb.yield(Ha.fadeIntoWorld(da.globalBounds().center()),2);Kc.connect(Ha,"pointValue",da,"pointValue");Kc.signal(da,"openWidget",Ha);
bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(da){this.setProperty("isSelected",da);this.fontColor=da?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Kc.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Kc.Color.black},fontFamily:{defaultValue:Kc.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(da){var Ha=Kc.Color.rgbHex("#0086b3");this.setProperty("pointValue",da);this.textAndAttributes=["pt(",null,da.x.toFixed(),{fontColor:Ha},",",{},da.y.toFixed(),{fontColor:Ha},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20628,end:22272})}(Kc.Label);Kc.PointWidget=Ob;Kc.PointWidget=Ob;Kc.PointWidget=Ob;Ob=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("PaddingWidget")&&"function"===typeof Gb.PaddingWidget?Gb.PaddingWidget:Gb.PaddingWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){this.openPopover()}},{key:"openPopover",value:function(){var da=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ha=new Kc.popovers.RectanglePopover({hasFixedPosition:!!da.ownerChain().find(function(Qb){return Qb.hasFixedPosition}),rectangle:da.rectangle}),Ha.relayout(),bb.yield(Ha.fadeIntoWorld(da.globalBounds().center()),2);Kc.connect(Ha,"rectangle",da,"rectangle");Kc.signal(da,
"openWidget",Ha);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Kc.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(da){this.setProperty("isSelected",da);this.fontColor=da?Kc.Color.white:Kc.Color.black}},rectangle:{defaultValue:Kc.rect(0),set:function(da){this.setProperty("rectangle",
da);this.value=Kc.obj.safeToString(da)}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22281,end:23342})}(Kc.Label);Kc.PaddingWidget=Ob;Kc.PaddingWidget=Ob;Kc.PaddingWidget=Ob;Ob=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),La=Gb.hasOwnProperty("IconWidget")&&
"function"===typeof Gb.IconWidget?Gb.IconWidget:Gb.IconWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"onMouseDown",value:function(da){this.openPopover()}},{key:"openPopover",value:function(){var da=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ha=new Kc.popovers.IconPopover({hasFixedPosition:!!da.ownerChain().find(function(Qb){return Qb.hasFixedPosition})}),
bb.yield(Ha.fadeIntoWorld(da.globalBounds().center()),2);Kc.connect(Ha,"select",da,"iconValue",{converter:function(Qb){return Qb&&Kc.Icon.makeLabel(Qb).value},varMapping:{Icon:Kc.Icon}});Kc.signal(da,"openWidget",Ha);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Kc.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,
get:function(){return this.value},set:function(da){this.value=da||"No Icon"}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23351,end:24282})}(Kc.Label);Kc.IconWidget=Ob;Kc.IconWidget=Ob;Kc.IconWidget=Ob;Ob=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),
La=Gb.hasOwnProperty("StringWidget")&&"function"===typeof Gb.StringWidget?Gb.StringWidget:Gb.StringWidget=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"truncate",value:function(da){return 200<da.length?da.slice(0,20)+"...":da}},{key:"onFocus",value:function(da){var Ha=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qb){if(1==Qb.nextAddress)return $c._get(Object.getPrototypeOf(La.prototype),
"onFocus",Ha).call(Ha,da),Ha.readOnly?Qb.return():Ha.stringTooLong?Qb.yield(Ha.world().editPrompt("edit string",{requester:Ha,input:Ha.stringValue}),2):(Ha.borderColor=Kc.Color.white.withA(.9),Ha.textString=Ha.stringValue,Qb.return());bb=Qb.yieldResult;if("string"===typeof bb)Ha.onInput(bb);Qb.jumpToEnd()})}},{key:"onBlur",value:function(da){$c._get(Object.getPrototypeOf(La.prototype),"onBlur",this).call(this,da);this.readOnly||(this.borderColor=Kc.Color.transparent,this.onInput(this.textString))}},
{key:"onInput",value:function(da){this.owner.focus();Kc.signal(this,"inputAccepted",da);this.stringValue=da}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Kc.Color.transparent},fontColor:{defaultValue:Kc.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Kc.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Kc.rect(0,
0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(da){this.setProperty("stringValue",da);this.textString=this.truncate(da);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(da){this.setProperty("isSelected",da);this.fontColor=da?Kc.Color.white:Kc.Color.blue}}}}}],Gb,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:24291,end:26242})}(Kc.InputLine);Kc.StringWidget=Ob;Kc.StringWidget=Ob;Kc.StringWidget=Ob;Kc.valueWidgets=Ka;Object.assign(Kc.valueWidgets,{NumberWidget:Kc.NumberWidget,StringWidget:Kc.StringWidget,IconWidget:Kc.IconWidget,PaddingWidget:Kc.PaddingWidget,ShadowWidget:Kc.ShadowWidget,PointWidget:Kc.PointWidget,
BooleanWidget:Kc.BooleanWidget,LayoutWidget:Kc.LayoutWidget,ColorWidget:Kc.ColorWidget});var Hb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Hb.Ellipse=hc;Hb.Icon=me;Hb.Morph=te;Hb.Path=zd;Hb.Text=Jd;Hb.HorizontalLayout=fd;Hb.VerticalLayout=Eb;Hb.morph=jc;Hb.Color=Dc;Hb.pt=Vb;Hb.rect=Wc;Hb.Rectangle=bd;Hb.arr=Mb;Hb.connect=jd;Hb.disconnect=gc;Hb.LabeledCheckBox=qc;Hb.DropDownSelector=Cc;Hb.Button=Yc;Hb.Menu=rd;Hb.NumberWidget=pd;Hb.InteractiveMorphSelector=Sc;Hb.easings=Zc;(function(Tb){var Gb=
lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("ProportionSlider")&&"function"===typeof Gb.ProportionSlider?Gb.ProportionSlider:Gb.ProportionSlider=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"alignWithTarget",value:function(){this.setBounds(this.axis.getProportionSliderBounds(this))}},{key:"onDragStart",value:function(){this.view.visible=!0}},{key:"onDrag",
value:function(da){this.axis.adjustStretch(this.axis.getDelta(da));this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){this.view.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionSlider"}},{key:"properties",get:function(){return{axis:{},view:{},fill:{defaultValue:Hb.Color.transparent}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:662,end:1139})})(Hb.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("MinViewer")&&"function"===typeof Gb.MinViewer?Gb.MinViewer:Gb.MinViewer=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"alignWithTarget",value:function(){this.textString="min: "+this.axis.targetAxis.min.toFixed()+
"px !"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinViewer"}},{key:"properties",get:function(){return{axis:{}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:1141,end:1361})})(Hb.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
La=Gb.hasOwnProperty("MinSlider")&&"function"===typeof Gb.MinSlider?Gb.MinSlider:Gb.MinSlider=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"alignWithTarget",value:function(){this.position=this.axis.getMinSliderPosition()}},{key:"requestToShow",value:function(){this.visible=!this.axis.targetAxis.fixed}},{key:"requestToHide",value:function(){this.active?this.shouldHide=!0:this.visible=!1}},{key:"onDragStart",
value:function(){var da=$jscomp.makeIterator(this.submorphs),Ha=da.next().value;da=da.next().value;this.axis.forceMenuHidden=!0;Ha.visible=!0;this.active=da.visible=!0}},{key:"onDrag",value:function(da){this.axis.targetAxis.min+=-this.getDelta(da);this.axis.halo.alignWithTarget()}},{key:"onDragEnd",value:function(){var da=$jscomp.makeIterator(this.submorphs),Ha=da.next().value;da=da.next().value;this.axis.forceMenuHidden=!1;Ha.visible=!1;this.active=da.visible=!1;this.shouldHide&&(this.shouldHide=
this.visible=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MinSlider"}},{key:"properties",get:function(){return{axis:{},fill:{defaultValue:Hb.Color.green},visible:{defaultValue:!1},becomesActiveOnHover:{defaultValue:!0}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:1363,end:2515})})(Hb.Ellipse);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("AxisHalo")&&"function"===typeof Gb.AxisHalo?Gb.AxisHalo:Gb.AxisHalo=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"initialize",value:function(){this.setBounds(this.fetchBounds());var da=this.minSlider(),Ha=this.axisMenu(),bb=this.proportionSlider();bb.addMorph(da);
this.submorphs=[bb,Ha];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(da){this._forceMenuHidden=da;this.axisMenu.visible=!da}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();
this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(da){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var da=this.proportionViewer();return this.halo.addGuide(new Hb.ProportionSlider({nativeCursor:this.getResizeCursor(),axis:this,view:da,submorphs:[this.devider(),da]}))}},{key:"devider",value:function(){return new Hb.Morph({visible:!this.lastAxis,
fill:Hb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var da=this.minSpaceVisualizer(),Ha=this.minViewer();return this.halo.addGuide(new Hb.MinSlider({nativeCursor:this.getResizeCursor(),axis:this,submorphs:[da,Ha]}))}},{key:"minViewer",value:function(){return this.viewer(new Hb.MinViewer({axis:this,position:this.getMinViewerPosition()}))}},{key:"minSpaceBorder",value:function(){return new Hb.Path(Object.assign({position:Hb.pt(-1,
-1),borderStyle:"dashed",borderColor:Hb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var da=this,Ha=this.minSpaceBorder();return this.halo.addGuide(new Hb.Morph({fill:Hb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[Ha],alignWithTarget:function(){this.extent=da.getMinSpaceExtent();this.topLeft=Hb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var da=this.lockButton(),Ha=this.menuButton(),bb=this;return new Hb.Morph({layout:this.getMenuLayout(),
submorphs:[da,Ha],fill:Hb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(bb.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var da=this;return this.halo.addGuide(new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),submorphs:[{center:Hb.pt(12.5,12.5),fill:Hb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){da.targetAxis.fixed?(this.fontColor=Hb.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=Hb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){da.targetAxis.fixed=!da.targetAxis.fixed;da.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var da=this,Ha=this;return new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),submorphs:[{fill:Hb.Color.transparent,styleClasses:["fa","fa-cog"],center:Hb.pt(12.5,12.5)}],onMouseDown:function(bb){Ha.forceMenuVisible=!0;
this.addMorph(bb.state.menu=new Hb.Menu({position:Hb.pt(15,15),items:[["Remove "+Ha.subject,function(){da.targetAxis.remove();da.halo.initGuides();da.halo.alignWithTarget()}],["Insert "+Ha.subject+" before",function(){da.targetAxis.addBefore();da.halo.initGuides();da.halo.alignWithTarget()}],["Insert "+Ha.subject+" after",function(){da.targetAxis.addAfter();da.halo.initGuides();da.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(da){var Ha=da.position;da=da.alignWithTarget;return this.halo.addGuide(new Hb.Text({styleClasses:["Halo"],
padding:Hb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Hb.Color.white,fill:Hb.Color.black.withA(.5),position:Ha,alignWithTarget:da,readOnly:!0}))}},{key:"proportionViewer",value:function(){var da=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=da.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}},{key:"properties",get:function(){return{halo:{},targetAxis:{},container:{},
fill:{defaultValue:Hb.Color.transparent},submorphs:{initialize:function(){this.initialize()}}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2517,end:8448})})(Hb.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("RowHalo")&&
"function"===typeof Gb.RowHalo?Gb.RowHalo:Gb.RowHalo=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(da){this.targetAxis.height+=da}},{key:"getDelta",value:function(da){return da.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Hb.pt(-45,
this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Hb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(da){return this.targetAxis.length>da.height?Hb.pt(2,5):Hb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Hb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Hb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Hb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",
value:function(){return Hb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Hb.pt(this.container.width+50,2),vertices:[Hb.pt(0,1),Hb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Hb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(da){return Hb.pt(0,da.owner.height-5).extent(Hb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Hb.pt(15,4).extent(Hb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RowHalo"}},{key:"properties",get:function(){return{row:{},targetAxis:{derived:!0,get:function(){return this.halo.target.row(this.row)}}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:8450,end:9799})})(Hb.AxisHalo);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
La=Gb.hasOwnProperty("ColumnHalo")&&"function"===typeof Gb.ColumnHalo?Gb.ColumnHalo:Gb.ColumnHalo=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:Symbol.for("lively-instance-initialize"),value:function(da){var Ha=da.col;da=da.halo;$c._get(Object.getPrototypeOf(La.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:da.target.col(Ha),halo:da})}},{key:"subject",get:function(){return"column"}},
{key:"adjustStretch",value:function(da){this.targetAxis.width+=da}},{key:"getDelta",value:function(da){return da.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Hb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Hb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(da){return this.targetAxis.length>da.width?Hb.pt(5,3):Hb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Hb.HorizontalLayout}},
{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Hb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Hb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Hb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Hb.pt(2,this.container.height+50),vertices:[Hb.pt(1,0),Hb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Hb.pt(20,
40)}},{key:"getProportionSliderBounds",value:function(da){return Hb.pt(da.owner.width-5,0).extent(Hb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Hb.pt(4,15).extent(Hb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:9801,end:11056})})(Hb.AxisHalo);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("CellGuide")&&"function"===typeof Gb.CellGuide?Gb.CellGuide:Gb.CellGuide=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"menuItems",value:function(){var da=this,Ha=Hb.Icon.textAttribute("check-square-o"),bb=Hb.Icon.textAttribute("square-o");
Ha[1].textStyleClasses.push("annotation");bb[1].textStyleClasses.push("annotation");bb[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?bb:Ha)),function(){da.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ha:bb)),function(){da.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Hb.Rectangle).sides),$jscomp.arrayFromIterable((new Hb.Rectangle).corners)).map(function(Qb){return[[Qb,
{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(da.cellGroup.align==Qb?Ha:bb),["  ",null]),function(){return da.cellGroup.align=Qb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var Qb=da.cellGroup.morph;Qb&&(da.world().firstHand.grab(Qb),da.world().firstHand.longClickGrab=!0,Qb.position=Hb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],Gb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11058,end:12377})})(Hb.Morph);(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("LayoutHalo")&&"function"===typeof Gb.LayoutHalo?Gb.LayoutHalo:Gb.LayoutHalo=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $c(La,Tb,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{get:function(){return this.container.layout}},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Hb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12379,end:12833})})(Hb.Morph);Ka=Pa("G",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("GridLayoutHalo")&&"function"===typeof Gb.GridLayoutHalo?Gb.GridLayoutHalo:Gb.GridLayoutHalo=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return $c(La,Tb,[{key:"previewDrop",value:function(da){1>da.length||(da=this.cellGuides.find(function(Ha){return Ha.fullContainsWorldPoint($world.firstHand.position)}),da!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=da)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(da){var Ha=this;this.currentCell&&da.whenRendered().then(function(){return Ha.currentCell.cellGroup.morph=da})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var da=this.target,Ha=new Hb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Hb.Color.transparent,checked:da.compensateOrigin}),bb=new Hb.LabeledCheckBox({label:"Resize Submorphs",fill:Hb.Color.transparent,name:"fitToCell",checked:da.fitToCell});Hb.connect(Ha,"checked",da,"compensateOrigin");Hb.connect(bb,"checked",da,"fitToCell");Hb.connect(Ha,"checked",this,"alignWithTarget");return[Ha,bb]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Hb.arr.reverse(this.guides).forEach(function(da){return da.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var da=this;Hb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(Ha){return Ha.cellGroup})).forEach(function(Ha){return da.addMorph(da.cellGuide(Ha))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var da=this,Ha=this.addMorph({fill:Hb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(bb){Ha.addMorph(da.cellGuide(bb))});this.cellGuides=Ha.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(da){da.isHaloItem=!0;this.guides.push(da);return da}},
{key:"initRowGuides",value:function(){var da=this,Ha=this;this.addGuide(this.addMorph(new Hb.Morph({width:25,fill:Hb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Hb.pt(-5,0),alignWithTarget:function(){this.height=Ha.container.height}})));Hb.arr.range(0,this.target.rowCount-1).forEach(function(bb){da.addMorph(new Hb.RowHalo({row:bb,halo:da}))})}},{key:"initColumnGuides",value:function(){var da=this,Ha=this;this.addGuide(this.addMorph(new Hb.Morph({height:25,fill:Hb.Color.gray.withA(.7),
borderRadius:15,width:this.container.width,bottomLeft:Hb.pt(0,-5),alignWithTarget:function(){this.width=Ha.container.width}})));Hb.arr.range(0,this.target.columnCount-1).forEach(function(bb){da.addMorph(new Hb.ColumnHalo({col:bb,halo:da}))})}},{key:"resizer",value:function(){var da=this;return this.addGuide(new Hb.Morph({fill:Hb.Color.transparent,extent:Hb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(Ha){da.container.resizeBy(Ha.state.dragDelta);da.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
da.extent}}))}},{key:"cellResizer",value:function(da,Ha){var bb=this,Qb="topLeft"==Ha?"bottomRight":"topLeft";return new Hb.Ellipse({borderWidth:1,visible:!1,borderColor:Hb.Color.black,nativeCursor:"nwse-resize",removeCell:function(uc){da.disconnect(uc);bb.alignWithTarget()},addCell:function(uc){da.connect(uc);bb.alignWithTarget()},start:function(){this.fixpointCell=da[Qb];this.draggedDelta=da.bounds().partNamed(Ha);this.debugMorph=bb.addMorph(new Hb.Morph({fill:Hb.Color.orange.withA(.5)}))},update:function(uc){var Tc=
this;this.draggedDelta=this.draggedDelta.addPt(uc);var vd=Hb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(vd);bb.cells.forEach(function(Wd){var ed=vd.intersection(Wd.bounds()).area()/Wd.bounds().area();da.includes(Wd)&&.1>ed&&Tc.removeCell(Wd);!da.includes(Wd)&&ed>1/3&&Tc.addCell(Wd)})},onDragEnd:function(uc){this.debugMorph.remove()},onDragStart:function(uc){this.start(uc.position)},onDrag:function(uc){this.update(uc.state.dragDelta)}})}},{key:"cellGuide",
value:function(da){var Ha=this,bb=this.cellResizer(da,"topLeft"),Qb=this.cellResizer(da,"bottomRight");return this.addGuide(new Hb.CellGuide({cellGroup:da,bounds:da.bounds(),fill:Hb.Color.transparent,borderColor:Hb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[bb,Qb],onMouseDown:function(uc){this.becomeActive()},deactivate:function(){this.borderColor=Hb.Color.orange;this.fill=Hb.Color.transparent;this.submorphs.forEach(function(uc){uc.visible=!1})},becomeActive:function(){Ha.guides.forEach(function(uc){uc.isCell&&
uc.deactivate()});this.borderColor=Hb.Color.rgbHex("#1565C0");this.fill=Hb.Color.rgbHex("#1565C0").withA(.3);Ha.addMorph(this.remove());this.submorphs.forEach(function(uc){uc.visible=!0})},startPreview:function(uc){this.fill=Hb.Color.orange.withA(.7)},stopPreview:function(uc){this.fill=Hb.Color.transparent},onDrop:function(uc){var Tc=$jscomp.makeIterator(uc.hand.grabbedMorphs).next().value;uc.hand.dropMorphsOn(Ha.container);da.morph=Tc},alignWithTarget:function(){da.bounds().isNonEmpty()?(this.setBounds(da.bounds()),
bb.center=this.innerBounds().topLeft(),Qb.center=this.innerBounds().bottomRight()):(Hb.arr.remove(Ha.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Hb.Color.transparent},cells:{derived:!0,get:function(){return Hb.arr.flatten(this.target.col(0).items.map(function(da){return da.row(0).items}))}},submorphs:{after:["target"],initialize:function(){this.initialize()}}}}}],Gb,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12842,end:20283})}(Hb.LayoutHalo));Hb.GridLayoutHalo=Ka;Hb.GridLayoutHalo=Ka;Hb.GridLayoutHalo=Ka;pd=function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof Gb.TilingLayoutHalo?Gb.TilingLayoutHalo:Gb.TilingLayoutHalo=
function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"remove",value:function(){$c._get(Object.getPrototypeOf(La.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(da){}},{key:"removePreviews",value:function(){this.previews.forEach(function(da){return da.clear()})}},
{key:"previewDrop",value:function(da){var Ha=this;0<this.previews.length||(this.previews=da.map(function(bb){return Ha.container.addMorph({type:Hb.DropPreview,bounds:bb.bounds()})}),this.previews.forEach(function(bb){bb.step()}))}},{key:"updateSpacing",value:function(da){this.target.spacing=da}},{key:"updateAxis",value:function(da){this.target.axis=da}},{key:"updateAlign",value:function(da){this.target.align=da}},{key:"optionControls",value:function(){var da=this.target,Ha=new Hb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:da.axis,values:["row","column"]}),bb=new Hb.DropDownSelector({borderRadius:2,padding:3,selectedValue:da.align,values:["left","center"]});da=new Hb.NumberWidget({min:0,number:da.spacing,padding:Hb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Hb.Color.gray,unit:"px"});Hb.connect(da,"update",this,"updateSpacing");Hb.connect(bb,"update",this,"updateAlign");Hb.connect(Ha,"update",this,"updateAxis");var Qb={type:"label",padding:Hb.rect(0,5,5,5),fill:Hb.Color.transparent,
fontColor:Hb.Color.gray.darker(),readOnly:!0};return[[Object.assign({},Qb,{textString:"Submorph Spacing"}),da],[Object.assign({},Qb,{textString:"Tiling Align"}),bb],[Object.assign({},Qb,{textString:"Tiling Axis"}),Ha]].map(function(uc){return{submorphs:uc,fill:null,layout:new Hb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Hb.Color.transparent},previews:{defaultValue:[]}}}}],
Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20292,end:22407})}(Hb.LayoutHalo);Hb.TilingLayoutHalo=pd;Hb.TilingLayoutHalo=pd;Hb.TilingLayoutHalo=pd;(function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("DropPreview")&&"function"===typeof Gb.DropPreview?
Gb.DropPreview:Gb.DropPreview=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var da=this,Ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ha=Hb.easings.inOutQuad,bb.yield(da.animate({opacity:.5,duration:(da.pulseDuration-10)/2,easing:Ha}),2);if(3!=bb.nextAddress)return bb.yield(da.animate({opacity:1,
duration:(da.pulseDuration-10)/2,easing:Ha}),3);da.stopped||da.step();bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Hb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Hb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],
Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22409,end:23245})})(Hb.Morph);pd=Pa("F",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof Gb.FlexLayoutHalo?Gb.FlexLayoutHalo:Gb.FlexLayoutHalo=function(da){da&&
da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,Tb,[{key:"handleDrop",value:function(da){}},{key:"previewDrop",value:function(da){var Ha=this;0<this.previews.length||(this.previews=da.map(function(bb){return Ha.container.addMorph({type:Hb.DropPreview,position:Ha.container.localize(Ha.world().firstHand.position),extent:bb.bounds().extent()})}),this.previews.forEach(function(bb){bb.step()}))}},{key:"remove",value:function(){$c._get(Object.getPrototypeOf(La.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(da){return da.clear()})}},{key:"onDrop",value:function(da){this.removePreviews();da.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(da){da&&(this.originalExtent=this.container.extent);this.target.autoResize=da;da||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(da){this.target.resizeSubmorphs=da;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(da){this.target.align=da}},{key:"updateDirectionPolicy",value:function(da){this.target.direction=da}},{key:"updateSpacing",value:function(da){this.target.spacing=da}},{key:"optionControls",value:function(){var da=this.target,Ha=da.possibleAlignValues?{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Hb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:da.align,values:da.possibleAlignValues})]}:null,bb=da.possibleDirectionValues?{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new Hb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:da.direction,values:da.possibleDirectionValues})]}:
null,Qb=new Hb.NumberWidget({fill:Hb.Color.white,borderWidth:1,borderRadius:4,padding:Hb.rect(5,4,0,0),borderColor:Hb.Color.gray,min:0,number:da.spacing,unit:"px"}),uc=new Hb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Hb.Color.transparent,checked:da.autoResize});da=new Hb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:Hb.Color.transparent,checked:da.resizeSubmorphs});Hb.connect(Qb,"update",this,"updateSpacing");
Hb.connect(uc,"checked",this,"updateAutoResizePolicy");Hb.connect(da,"checked",this,"updateResizeSubmorphsPolicy");Ha&&Hb.connect(Ha.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");bb&&Hb.connect(bb.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[uc,da].concat($jscomp.arrayFromIterable([Ha,bb].filter(Boolean)),[{fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Hb.Color.gray.darker(),padding:Hb.rect(0,
5,5,5)},Qb]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Hb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:23254,end:27441})}(Hb.LayoutHalo));Hb.FlexLayoutHalo=pd;Hb.FlexLayoutHalo=pd;Hb.FlexLayoutHalo=pd;Ob=Pa("c",function(Tb){var Gb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),La=Gb.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof Gb.ProportionalLayoutHalo?Gb.ProportionalLayoutHalo:Gb.ProportionalLayoutHalo=function(da){da&&da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $c(La,
Tb,[{key:"handleDrop",value:function(da){}},{key:"onDrop",value:function(da){da.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(da){var Ha={};this.target.changeSettingsFor(da.submorph,(Ha[da.axis]=da.policy,Ha),!0)}},{key:"onSubmorphSettingsDragStart",value:function(da,Ha){var bb=this;da.stop();var Qb=this.target.settingsFor(Ha);Ha="";for(var uc in Qb)Ha+=uc+":"+
Qb[uc]+" ";var Tc=Hb.morph({type:"label",value:Ha,isLayoutable:!1});Tc.wantsToBeDroppedOn=function(vd){return bb.target.layoutableSubmorphs.includes(vd)};Tc.onBeingDroppedOn=function(vd,Wd){Tc.remove();if(vd=bb.target.layoutableSubmorphs.includes(Wd)?Wd:da.world.morphsContainingPoint(da.hand.position).find(function(ed){return bb.target.layoutableSubmorphs.includes(ed)}))bb.updateSubmorphProportionalLayoutSettings({policy:Qb.x,axis:"x",submorph:vd}),bb.updateSubmorphProportionalLayoutSettings({policy:Qb.y,
axis:"y",submorph:vd}),vd.show(),$world.setStatusMessage("layout settings applied")};da.hand.grab(Tc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var da=this,Ha,bb,Qb,uc,Tc,vd,Wd,ed,He,Rd,Fe,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ce){switch(Ce.nextAddress){case 1:return Ha=da.target.layoutableSubmorphs,da.env.eventDispatcher.isKeyPressed("Shift")?(Qb=Ha.map(function(Ke){return{isListItem:!0,string:String(Ke),value:Ke}}),Ce.yield($world.listPrompt("Select morph",
Qb,{requester:da,onSelection:function(Ke){return Ke.show()}}),5)):Ce.yield(Hb.InteractiveMorphSelector.selectMorph(da.world(),da,function(Ke){return Ha.includes(Ke)}),4);case 4:bb=Ce.yieldResult;Ce.jumpTo(3);break;case 5:uc=Ce.yieldResult,Tc=$jscomp.makeIterator(uc.selected),bb=Tc.next().value;case 3:if(!bb)return Ce.return();vd=da.state.popover.get("controlContainer");Wd=vd.getAllNamed(/submorph config/);ed=["move","resize","scale","fixed"];He=da.target.settingsFor(bb);Wd.length||(vd.submorphs=[].concat($jscomp.arrayFromIterable(vd.submorphs),
[{name:"submorph config X-Axis policy",position:Hb.pt(0,da.height),fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Hb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:He.x,values:ed})]},{name:"submorph config Y-Axis policy",position:Hb.pt(0,da.height),fill:Hb.Color.transparent,layout:new Hb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),
submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Hb.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:He.y,values:ed})]},Hb.morph({position:Hb.pt(0,da.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Rd=vd.getSubmorphNamed("x-axis policy selector");Fe=vd.getSubmorphNamed("y-axis policy selector");z=vd.getSubmorphNamed("dragme");Hb.disconnect(Rd,"selectedValue",da,"updateSubmorphProportionalLayoutSettings");Hb.disconnect(Fe,
"selectedValue",da,"updateSubmorphProportionalLayoutSettings");Rd.selectedValue=He.x;Fe.selectedValue=He.y;Hb.connect(z,"onDragStart",da,"onSubmorphSettingsDragStart",{updater:function(Ke,eg){return Ke(eg,bb)},varMapping:{submorph:bb}});Hb.connect(Rd,"selectedValue",da,"updateSubmorphProportionalLayoutSettings",{converter:function(Ke){return{policy:Ke,axis:"x",submorph:bb}},varMapping:{submorph:bb}});Hb.connect(Fe,"selectedValue",da,"updateSubmorphProportionalLayoutSettings",{converter:function(Ke){return{policy:Ke,
axis:"y",submorph:bb}},varMapping:{submorph:bb}});Ce.jumpToEnd()}})}},{key:"optionControls",value:function(da){this.state.popover=da;var Ha=this.target;da=new Hb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Hb.Color.transparent,checked:Ha.xAxisEnabled});Ha=new Hb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Hb.Color.transparent,checked:Ha.yAxisEnabled});var bb=new Hb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Hb.Icon.textAttribute("crosshairs")),
["\u00a0Change submorph settings"])});Hb.connect(da,"checked",this,"updateXAxisEnabled");Hb.connect(Ha,"checked",this,"updateYAxisEnabled");Hb.connect(bb,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[bb]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Hb.Color.transparent}}}}],Gb,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27450,end:33182})}(Hb.LayoutHalo));Hb.ProportionalLayoutHalo=Ob;Hb.ProportionalLayoutHalo=Ob;Hb.ProportionalLayoutHalo=Ob;var $d=lively.FreezerRuntime.recorderFor("lively.halos/index.js");$d.Halo=Rb;$d.MorphHighlighter=eb;$d.InteractiveMorphSelector=Sc;$d.StatusMessage=Ba;$d.StatusMessageForMorph=Fb;$d.show=Qa;$d.showConnector=Da;$d.ProportionalLayoutHalo=Ob;
$d.GridLayoutHalo=Ka;$d.FlexLayoutHalo=pd;$d.showAndSnapToGuides=xc;$d.removeSnapToGuidesOf=fc;$d.StatusMessage=Ba;$d.StatusMessage=Ba;$d.StatusMessageForMorph=Fb;$d.StatusMessageForMorph=Fb;$d.show=Qa;$d.show=Qa;$d.showConnector=Da;$d.showConnector=Da;$d.Halo=Rb;$d.Halo=Rb;$d.MorphHighlighter=eb;$d.MorphHighlighter=eb;$d.InteractiveMorphSelector=Sc;$d.InteractiveMorphSelector=Sc;$d.ProportionalLayoutHalo=Ob;$d.ProportionalLayoutHalo=Ob;$d.GridLayoutHalo=Ka;$d.GridLayoutHalo=Ka;$d.FlexLayoutHalo=
pd;$d.FlexLayoutHalo=pd;$d.showAndSnapToGuides=xc;$d.showAndSnapToGuides=xc;$d.removeSnapToGuidesOf=fc;$d.removeSnapToGuidesOf=fc;Ba=Object.freeze({__proto__:null,StatusMessage:Ba,StatusMessageForMorph:Fb,show:Qa,showConnector:Da,Halo:Rb,MorphHighlighter:eb,InteractiveMorphSelector:Sc,ProportionalLayoutHalo:Ob,GridLayoutHalo:Ka,FlexLayoutHalo:pd,showAndSnapToGuides:xc,removeSnapToGuidesOf:fc,SvgStyleHalo:void 0});Pa("i",Ba);Pa({_:void 0,d:void 0})}}});