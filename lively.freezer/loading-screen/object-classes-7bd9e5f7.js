System.register(["./__root_module__-19078926.js"],function(ya){var wb,Ab,ac,Ob,kd,Cc,qd,Dc,Ic,Qc,Bd,ne,ve,Wd,Ub;return{setters:[function(wc){wb=wc.a7;Ab=wc.P;ac=wc.a6;Ob=wc.p;kd=wc.bE;Cc=wc.B;qd=wc.bF;Dc=wc.r;Ic=wc.aU;Qc=wc.bG;Bd=wc.bH;ne=wc.bI;ve=wc.bJ;Wd=wc.bK;Ub=wc.l}],execute:function(){function wc(ic,rc,Gb,oc){oc=void 0===oc?{}:oc;oc=oc.package||Tb.ObjectPackage.lookupPackageForObject(ic,oc);if(!oc)throw Error("Object is not part of an object package: "+ic);return oc.addScript(ic,rc,Gb)}
function od(ic,rc){rc=Tb.normalizeOptions(rc).System;ic=(ic=ic[Symbol.for("lively-module-meta")])?ic.package.name:null;return(rc=(ic?Tb.lookupPackage(rc,ic):{}).pkg)?!!Tb.ObjectPackage.forSystemPackage(rc):!1}ya({addScript:wc,isObjectClass:od});var Tb=lively.FreezerRuntime.recorderFor("lively.classes/object-classes.js");Tb.normalizeOptions=function(ic){ic=Object.assign({baseURL:Tb.defaultBaseURL,System:System},ic);ic.baseURL=ic.baseURL.replace(/\/$/,"");return ic};Tb.addScript=wc;Tb.isObjectClass=
od;Tb.string=wb;Tb.Path=Ab;Tb.arr=ac;Tb.parse=Ob;Tb.isValidIdentifier=kd;Tb.stringify=Cc;Tb.parseFunction=qd;Tb.resource=Dc;Tb.runEval=Ic;Tb.scripting=Qc;Tb.ExportLookup=Bd;var xd=Tb.scripting;Tb.ensurePackage=xd.ensurePackage;Tb.registerPackage=xd.registerPackage;Tb.importPackage=xd.importPackage;Tb.lookupPackage=xd.lookupPackage;Tb.module=xd.module;Tb.ImportInjector=xd.ImportInjector;Tb.RuntimeSourceDescriptor=ne;Tb.toJsIdentifier=ve;Tb.adoptObject=Wd;Tb.classToFunctionTransform=Ub;Tb.objectPackageSym=
Symbol.for("lively-object-package-data");Tb.defaultBaseURL="local://lively-object-modules";Tb.globalClasses=Object.keys(System.global).map(function(ic){ic=System.global[ic];return"function"===typeof ic&&ic.name&&ic}).filter(Boolean);Tb.addScript=wc;Tb.addScript=wc;Tb.isObjectClass=od;Tb.isObjectClass=od;Tb._packageStore=Tb._packageStore||{};xd=function(ic,rc){this._id=ic;this.options=Tb.normalizeOptions(rc)};xd.lookupPackageForObject=function(ic,rc){return this.lookupPackageForClass(ic.constructor,
rc)};xd.lookupPackageForClass=function(ic,rc){rc=Tb.normalizeOptions(rc).System;ic=(ic=ic[Symbol.for("lively-module-meta")])?ic.package.name:null;return(rc=(ic?Tb.lookupPackage(rc,ic):{}).pkg)?Tb.ObjectPackage.forSystemPackage(rc):null};xd.forSystemPackage=function(ic){return this.packageStore[ic.name]};xd.withId=function(ic,rc){return this.packageStore[ic]||(this.packageStore[ic]=new this(ic,rc))};xd.prototype.ensureSubModule=function(ic){ic=void 0===ic?"index":ic;var rc=this,Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oc){return 1==
oc.nextAddress?(Gb=new Tb.ObjectModule(ic,rc),oc.yield(Gb.ensureExistance(),2)):oc.return(Gb)})};xd.prototype.resource=function(ic){ic=void 0===ic?"":ic;return Tb.resource(this.packageURL).join(ic)};xd.prototype.load=function(){return Tb.importPackage(this.System,this.packageURL)};xd.prototype.ensureExistance=function(){var ic=this,rc,Gb,oc,Hc,ad,dd,ec,jb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yb){switch(yb.nextAddress){case 1:return rc=ic.resource("/"),yb.yield(rc.exists(),2);
case 2:if(yb.yieldResult)return yb.return();Gb=[{resource:rc}];oc=[{resource:ic.resource("package.json"),content:JSON.stringify(ic.config,null,2)}];return yb.yield(Promise.all(Gb.map(function(Ja){return Ja.resource.mkdir()})),3);case 3:return yb.yield(Promise.all(oc.map(function(Ja){var Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){switch(Ka.nextAddress){case 1:return Ka.yield(Ja.resource.exists(),2);case 2:if(!(Ta=!Ka.yieldResult)){Ka.jumpTo(3);break}return Ka.yield(Ja.resource.write(Ja.content),
4);case 4:Ta=Ka.yieldResult;case 3:return Ka.return(Ta)}})})),4);case 4:return yb.yield(ic.objectModule.ensureExistance(),5);case 5:return Hc=ic,ad=Hc.System,dd=Hc.packageURL,ec=Hc.config,yb.yield(Tb.ensurePackage(ad,dd),6);case 6:return jb=yb.yieldResult,jb.registerWithConfig(ec),console.log(ic.packageURL+" REGISTERED"),yb.return(ic)}})};xd.prototype.ensureObjectClass=function(ic){var rc=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gb){return 1==Gb.nextAddress?Gb.yield(rc.ensureExistance(),
2):Gb.return(rc.objectModule.ensureObjectClass(ic))})};xd.prototype.adoptObject=function(ic){var rc=this,Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oc){if(1==oc.nextAddress)return rc.objectClass===ic.constructor?oc.return():oc.yield(rc.ensureObjectClass(ic.constructor),2);Gb=oc.yieldResult;Tb.adoptObject(ic,Gb);oc.jumpToEnd()})};xd.prototype.addScript=function(ic,rc,Gb){return this.objectModule.addScript(ic,rc,Gb)};xd.prototype.remove=function(){this.systemPackage.remove();delete Tb.ObjectPackage.packageStore[this.id];
return this.resource().remove()};xd.prototype.renameObjectClass=function(ic,rc){rc=void 0===rc?[]:rc;var Gb=this,oc,Hc,ad,dd,ec,jb,yb,Ja,Ta,Ka,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xa){if(1==Xa.nextAddress){oc=Gb;Hc=oc.objectClass;ad=oc.System;if(!Hc||Hc[Symbol.for("__LivelyClassName__")]===ic)return Xa.return(Hc);if(!Tb.isValidIdentifier(ic))throw Error(ic+" is not a valid name for a class");ec=dd=Tb.RuntimeSourceDescriptor.for(Hc,ad);jb=ec.source;yb=ec.ast;Ja=yb.id;Ta=Ja.start;
Ka=Ja.end;return Xa.yield(dd.changeSource(jb.slice(0,Ta)+ic+jb.slice(Ka)),2)}Fa=Gb.objectClass;rc.forEach(function(Ib){Ib.constructor=Fa;Ib.__proto__=Fa.prototype});return Xa.return(Fa)})};xd.prototype.fork=function(ic,rc){var Gb=this,oc,Hc,ad,dd,ec,jb,yb,Ja,Ta,Ka,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xa){switch(Xa.nextAddress){case 1:return oc=Gb,Hc=oc.System,ad=oc.baseURL,dd=oc.objectClass,rc=Object.assign({System:Hc,baseURL:ad},rc),ec=Tb.RuntimeSourceDescriptor.for(dd),
jb=ec._renamedSource(ic),yb=jb.moduleSource,Ja=Tb.ObjectPackage.withId(ic,rc),Xa.yield(Ja.ensureExistance(),2);case 2:return Ta=Ja,Ka=Ta.objectModule,Fa=Ka.systemModule,Xa.yield(Fa.load({format:"esm"}),3);case 3:return Xa.yield(Fa.changeSource(yb),4);case 4:return Xa.return(Ja)}})};$jscomp.global.Object.defineProperties(xd.prototype,{id:{configurable:!0,enumerable:!0,get:function(){return this._id}},name:{configurable:!0,enumerable:!0,get:function(){return this.id}},System:{configurable:!0,enumerable:!0,
get:function(){return this.options.System}},baseURL:{configurable:!0,enumerable:!0,get:function(){return this.options.baseURL}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.baseURL+("/"+this.id)}},config:{configurable:!0,enumerable:!0,get:function(){return{name:this.name,version:"0.1.0",lively:{isObjectPackage:!0}}}},systemPackage:{configurable:!0,enumerable:!0,get:function(){return Tb.lookupPackage(this.System,this.packageURL,!0).pkg}},objectModule:{configurable:!0,enumerable:!0,
get:function(){return this._objectModule||(this._objectModule=new Tb.ObjectModule("index.js",this))}},objectClass:{configurable:!0,enumerable:!0,get:function(){return this.objectModule.objectClass}}});$jscomp.global.Object.defineProperties(xd,{packageStore:{configurable:!0,enumerable:!0,get:function(){return this._packageStore||(this._packageStore=Tb._packageStore)}}});ya("default",xd);Tb.ObjectPackage=xd;var Fd=function(ic,rc){if(!ic)throw Error("ObjectModule needs package!");if(!rc)throw Error("ObjectModule needs package!");
this._moduleName=ic;this._objectPackage=rc};Fd.prototype.read=function(){return this.resource.read()};Fd.prototype.write=function(ic){return this.resource.write(ic)};Fd.prototype.ensureExistance=function(){var ic=this,rc,Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oc){switch(oc.nextAddress){case 1:return rc=ic.resource,oc.yield(rc.exists(),2);case 2:if(oc.yieldResult){oc.jumpTo(3);break}return oc.yield(rc.write("'format esm';\n"),4);case 4:Gb={},ic.System.config({meta:(Gb[ic.url]=
{format:"esm"},Gb)});case 3:return oc.return(ic)}})};Fd.prototype.adoptObject=function(ic){var rc=this,Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(oc){if(1==oc.nextAddress)return rc.objectClass===ic.constructor?oc.return():oc.yield(rc.ensureObjectClass(ic.constructor),2);Gb=oc.yieldResult;Tb.adoptObject(ic,Gb);oc.jumpToEnd()})};Fd.prototype.ensureObjectClass=function(ic){var rc=this,Gb=this.objectClass;return Gb&&Gb.prototype.__proto__===ic.prototype?Gb:Promise.resolve(this.ensureObjectClassSource(ic)).then(function(oc){var Hc=
oc.source,ad=oc.moduleId,dd=oc.className,ec=oc.bindings,jb=rc.System;oc=Tb.module(jb,ad);if(ec)for(var yb in ec)oc.define(yb,ec[yb]);Hc=Tb.runEval(Hc,{classTransform:Tb.classToFunctionTransform,sync:!0,targetModule:ad,System:jb});if(Hc.isError)throw Hc.value;Hc=oc.recorder[dd];if(!Hc)throw Error("Failed to define class "+dd+" in "+ad);return Hc})};Fd.prototype.ensureObjectClassSource=function(ic){return this.createDefaultClassDeclaration(ic)};Fd.prototype.createDefaultClassDeclaration=function(ic){ic=
void 0===ic?Object:ic;var rc=this,Gb,oc,Hc,ad,dd,ec,jb,yb,Ja,Ta,Ka,Fa,Xa,Ib,jc,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(tb){switch(tb.nextAddress){case 1:Gb=rc;oc=Gb.System;Hc=Gb.systemModule;ad=Gb.objectPackage;dd=Tb.string.capitalize(Tb.toJsIdentifier(ad.id));ec=ic[Symbol.for("__LivelyClassName__")];jb=!ec;yb=Tb.globalClasses.includes(ic);Ja="";Ta=null;if(jb){ec="__anonymous_superclass__";Ka={};Ta=(Ka[ec]=ic,Ka);tb.jumpTo(2);break}if(yb){tb.jumpTo(2);break}return tb.yield(Tb.ExportLookup.findExportOfValue(ic,
oc),4);case 4:(Fa=tb.yieldResult)?(Xa=Tb.ImportInjector.run(oc,Hc.id,Hc.package(),"",Fa),Ib=Xa.standaloneImport,Ja+=Ib+"\n\n"):(jc={},Ta=(jc[ec]=ic,jc));case 2:return dd===ec&&(dd="Object"+dd),lb="Object"===ec?"class "+dd+" {}\n":"class "+dd+" extends "+ec+" {}\n",Ja+="export default "+lb+"\n",tb.yield(Hc.changeSource(Ja),5);case 5:return tb.yield(Hc.load(),6);case 6:return tb.return({source:Ja,className:dd,moduleId:rc.url,bindings:Ta})}})};Fd.prototype.addScript=function(ic,rc,Gb){var oc=this,Hc,
ad,dd,ec,jb,yb,Ja,Ta,Ka,Fa,Xa,Ib,jc,lb,tb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nb){switch(nb.nextAddress){case 1:if(ic.constructor===oc.objectClass){Hc=ic.constructor;nb.jumpTo(2);break}return nb.yield(oc.ensureObjectClass(ic.constructor),3);case 3:Hc=nb.yieldResult;case 2:ad=Hc;dd="function"===typeof rc?String(rc):rc;ec=Tb.parseFunction(dd);jb=Tb.RuntimeSourceDescriptor.for(ad,oc.System);Gb||(Gb=Tb.Path("id.name").get(ec));if(!Gb)throw Error("No name, cannot add "+Tb.string.truncate(dd,
30).replace(/\n/g,"")+"!");yb=Tb.toJsIdentifier(Gb);console.assert("FunctionExpression"===ec.type||"ArrowFunctionExpression"===ec.type,"not a function expression but: "+ec.type);Ja=ec.params.map(function(Y){return dd.slice(Y.start,Y.end)});Ta="BlockStatement"===ec.body.type?dd.slice(ec.body.start,ec.body.end):"{ return "+dd.slice(ec.body.start,ec.body.end)+" }";Ka=yb+"("+Ja.join(",")+") "+Ta;"ArrowFunctionExpression"===ec.type&&(ec.type="FunctionExpression");Fa=jb.source;Xa=jb.ast;if(!Xa)throw Error("cannot find class decl of "+
jb.module.id);(Ib=Xa.body.body.find(function(Y){return Y.key.name===yb&&!Y.static}))?Fa=Fa.slice(0,Ib.start)+Ka+Fa.slice(Ib.end):(jc=Fa.lastIndexOf("}"),lb=Fa.slice(0,jc),tb=Fa.slice(jc),/\n\s*$/m.test(lb)||(lb+="\n"),Ka=Tb.string.changeIndent(Ka,"  ",1),/^[ ]*\n/m.test(tb)||(tb="\n"+tb),Fa=lb+Ka+tb);return nb.yield(jb.changeSource(Fa),4);case 4:return nb.return({script:ad.prototype[yb],klass:ad,module:jb.module.id,methodName:yb})}})};$jscomp.global.Object.defineProperties(Fd.prototype,{objectPackage:{configurable:!0,
enumerable:!0,get:function(){return this._objectPackage}},objectClass:{configurable:!0,enumerable:!0,get:function(){var ic=this.systemModule;return ic.isLoaded()?ic.System.get(ic.id).default:null}},moduleName:{configurable:!0,enumerable:!0,get:function(){return this._moduleName}},systemModule:{configurable:!0,enumerable:!0,get:function(){return Tb.module(this.System,this.url)}},System:{configurable:!0,enumerable:!0,get:function(){return this.objectPackage.System}},resource:{configurable:!0,enumerable:!0,
get:function(){return this.objectPackage.resource(this.moduleName)}},url:{configurable:!0,enumerable:!0,get:function(){return this.resource.url}}});Tb.ObjectModule=Fd;Tb.default=xd}}});