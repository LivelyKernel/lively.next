System.register(["./__root_module__-3d4e820f.js"],function(ra){var kb,zb,Sb,Mb,Fd,Jc,wd,Kc,Fc,Wc,hd,Id,nd,Xc,Na,nb,Pb,Wb,Pc,Bd,Hb,Ub,vb,kc,xc,Dc,Gb,$a,dc,oc,sa,Ca,bb,rb,qb,Sa,Ta,sb,Zb,rc,Xb,wc;return{setters:[function(I){kb=I.at;zb=I.a3;Sb=I.C;Mb=I.an;Fd=I.ai;Jc=I.ax;wd=I.aU;Kc=I.aB;Fc=I.ay;Wc=I.a9;hd=I.al;Id=I.ao;nd=I.h;Xc=I.a2;Na=I.a1;nb=I.ah;Pb=I.a7;Wb=I.P;Pc=I.$;Bd=I.aV;Hb=I.ap;Ub=I.a6;vb=I.aq;kc=I.ar;xc=I.aW;Dc=I.aX;Gb=I.au;$a=I.as;dc=I.s;oc=I.av;sa=I.aY;Ca=I.ak;bb=I.aZ;rb=I.a_;qb=I.a$;Sa=
I.aa;Ta=I.b0;sb=I.am;Zb=I.b1;rc=I.b2;Xb=I.b3;wc=I.aQ}],execute:function(){function I(ea){(ea=Db.cachedGuideLines.get(ea))&&ea.forEach(function(la){return la.remove()})}function T(ea,la,tb,H,ja){la=void 0===la?!0:la;tb=void 0===tb?!0:tb;H=void 0===H?10:H;ja=void 0===ja?100:ja;if(la||tb){var Ba=ea.owner,ub=Ba.world();Ba=Ba.getGlobalTransform();var jc=ea.owner.submorphs.filter(function(Sc){return Sc!==ea&&!Sc.isEpiMorph&&Sc.visible&&Sc.reactsToPointer}),vc=Db.findAlignedMorphs(ea,jc,H,ja,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));ja=[];var Cd=0,id=0,we=0,sd=0;Ba.e-=ub.scroll.x;Ba.f-=ub.scroll.y;if(vc){vc=$jscomp.makeIterator(vc);for(var Zd=vc.next();!Zd.done;Zd=vc.next()){Zd=$jscomp.makeIterator(Zd.value);Zd.next();var ie=Zd.next().value;Zd=ie.vertical;ie=$jscomp.makeIterator(ie.horizontal);for(var Ne=ie.next();!Ne.done;Ne=ie.next()){Ne=Ne.value;var wf=Ne.edgeAVal,Ye=Ne.refPointsA,uc=Ne.refPointsB,Ze=Ne.edgeBVal,If=Math.ceil(H-Ne.delta),Jf=Math.min(Ye.top,uc.top);Ye=Math.max(Ye.bottom,
uc.bottom);Ne.maxDist>H&&(If-=H/2);Cd<If&&(Cd=If,we=Ze-wf);ja.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Db.guideWidth,start:Ba.transformPoint(Db.pt(Ze,Jf)),end:Ba.transformPoint(Db.pt(Ze,Ye)),fill:Db.guideColor,guideType:"h",priority:If})}Zd=$jscomp.makeIterator(Zd);for(ie=Zd.next();!ie.done;ie=Zd.next())ie=ie.value,Ne=ie.edgeAVal,Jf=ie.refPointsA,Ye=ie.refPointsB,wf=ie.edgeBVal,Ze=Math.ceil(H-ie.delta),If=Math.min(Jf.left,Ye.left),Jf=Math.max(Jf.right,Ye.right),ie.maxDist>H&&(Ze-=
H/2),id<Ze&&Math.abs(wf-Ne)<=H&&(id=Ze,sd=wf-Ne),ja.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Db.guideWidth,start:Ba.transformPoint(Db.pt(If,wf)),end:Ba.transformPoint(Db.pt(Jf,wf)),fill:Db.guideColor,guideType:"v",priority:Ze})}}if(!Cd||!id){jc=[ea].concat($jscomp.arrayFromIterable(jc));Ne=Db.computeClosestMorphs(jc);ie=Ne[0];jc=ie.l;vc=ie.r;Zd=ie.t;ie=ie.b;var De;if(jc||vc||Zd||ie){var ta=(jc||vc||Zd||ie).refPointsA;for(wf=1;wf<Ne.length&&(Ye=Ne[wf],Ze=Ye.l,If=Ye.r,Jf=Ye.t,Ye=Ye.b,
Cd||(jc&&Ze&&jc.index!==Ze.index&&Math.abs(Ze.dist-jc.dist)<=H?De=Object.assign({neighbor:wf,direction:"left"},Ze):vc&&If&&vc!==If.index&&Math.abs(If.dist-vc.dist)<=H&&(De=Object.assign({neighbor:wf,direction:"right"},If))),id||(Zd&&Jf&&Zd.index!==Jf.index&&Math.abs(Jf.dist-Zd.dist)<=H?De=Object.assign({neighbor:wf,direction:"top"},Jf):ie&&Ye&&ie.index!==Ye.index&&Math.abs(Ye.dist-ie.dist)<=H&&(De=Object.assign({neighbor:wf,direction:"bottom"},Ye))),!De);wf++);}if(De){var Ma=De;H=Ma.direction;Jf=
Ma.dist;var ob=ta.left;uc=ta.top;var R=ta.bottom,va=ta.right,Ya=ta.width,gb=ta.height;Ye=Ma.refPointsA;ta=Ye.left;Ne=Ye.top;wf=Ye.bottom;Ze=Ye.right;If=Ye.width;Ye=Ye.height;var lc=Ma.refPointsB,$b=lc.left;Ma=lc.top;var Yc=lc.bottom;lc=lc.right;va="left"===H?ob:"right"===H?va:ob+Ya/2;R="bottom"===H?R:"top"===H?uc:uc+gb/2;ob="left"===H?va-Jf:"right"===H?va+Jf:ob+Ya/2;Jf="bottom"===H?R+Jf:"top"===H?R-Jf:uc+gb/2;uc="left"===H?lc:"right"===H?$b:ta+If/2;Ya="bottom"===H?Ma:"top"===H?Yc:Ne+Ye/2;!tb||Cd||
"right"!==H&&"left"!==H||(Cd=10,we=(De.dist-(vc||jc).dist)*("right"===H?-1:1),va+=we,ob+=we);!tb||id||"top"!==H&&"bottom"!==H||(id=10,sd=((Zd||ie).dist-De.dist)*("top"===H?-1:1),R+=sd,Jf+=sd);ja.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ba.transformPoint(Db.pt("left"===H?ta:"right"===H?Ze:ta+If/2,"bottom"===H?wf:"top"===H?Ne:Ne+Ye/2)),end:Ba.transformPoint(Db.pt(uc,Ya)),fill:Db.Color.orange,height:Db.guideWidth,guideType:H,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ba.transformPoint(Db.pt(va,
R)),end:Ba.transformPoint(Db.pt(ob,Jf)),fill:Db.Color.orange,height:Db.guideWidth,guideType:H,priority:10})}}tb&&(we||sd)&&ea.moveBy(Db.pt(we,sd));if(la){ja=ja.filter(function(Sc){var Uc=Sc.guideType;Sc=Sc.priority;return"h"===Uc?Sc===Cd:"v"===Uc?Sc===id:!0});(la=Db.cachedGuideLines.get(ea))||Db.cachedGuideLines.set(ea,la=[]);for(tb=0;tb<ja.length;tb++)De=void 0,la[tb]?De=Object.assign(la[tb],ja[tb]):(De=Db.morph(ja[tb]),la.push(De)),De.owner||ub.addMorph(De);la.slice(tb).forEach(function(Sc){return Sc.remove()});
Db.fun.debounceNamed(ea.id+"-drag-guides-cleanup",1300,function(){var Sc=Db.cachedGuideLines.get(ea);Sc&&Sc.forEach(function(Uc){return Uc.remove()})})()}}}function ua(ea,la,tb,H,ja,Ba){tb=void 0===tb?!0:tb;H=void 0===H?!0:H;ja=void 0===ja?5:ja;Ba=void 0===Ba?100:Ba;if(tb||H){var ub=ea.owner,jc=ub.world(),vc=ub.getGlobalTransform(),Cd=ea.owner.submorphs.filter(function(R){return R!==ea&&!R.isEpiMorph&&R.visible&&R.reactsToPointer});ub=(la.includes("left")||la.includes("right")?"x":"")+(la.includes("top")||
la.includes("bottom")?"y":"");var id=Db.findMorphsWithSimilarWidthOrHeight(ea,ub,Cd,ja,Ba),we=-Infinity,sd=-Infinity,Zd=0,ie=0,Ne=0,wf=0,Ye=0,uc=0;ub=[];vc.e-=jc.scroll.x;vc.f-=jc.scroll.y;if(id){id=$jscomp.makeIterator(id);for(var Ze=id.next();!Ze.done;Ze=id.next()){Ze=$jscomp.makeIterator(Ze.value);Ze.next();var If=Ze.next().value;Ze=If.similarIn;var Jf=If.delta,De=If.refPointsA,ta=If.refPointsB;If=ja-Jf+(Ba-If.minDist);"width"===Ze?we<If&&(we=If,la.includes("left")&&(ie=-Jf),la.includes("right")&&
(Zd=Jf)):sd<If&&(sd=If,la.includes("top")&&(Ne=-Jf),la.includes("bottom")&&(wf=Jf));Jf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Db.guideWidth,fill:Db.guideColor,guideType:Ze,priority:If,start:vc.transformPoint("width"===Ze?Db.pt(De.left,De.top+De.height/2):Db.pt(De.left+De.width/2,De.top)),end:vc.transformPoint("width"===Ze?Db.pt(De.right,De.top+De.height/2):Db.pt(De.left+De.width/2,De.bottom))};Ze=Object.assign({},Jf,{start:vc.transformPoint("width"===Ze?Db.pt(ta.left,ta.top+ta.height/
2):Db.pt(ta.left+ta.width/2,ta.top)),end:vc.transformPoint("width"===Ze?Db.pt(ta.right,ta.top+ta.height/2):Db.pt(ta.left+ta.width/2,ta.bottom))});ub.push(Jf,Ze)}}if(Ba=Db.findAlignedMorphs(ea,Cd,ja,Ba,la,void 0))for(Ba=$jscomp.makeIterator(Ba),Cd=Ba.next();!Cd.done;Cd=Ba.next()){Cd=$jscomp.makeIterator(Cd.value);Cd.next();id=Cd.next().value;Cd=id.vertical;id=$jscomp.makeIterator(id.horizontal);for(Ze=id.next();!Ze.done;Ze=id.next()){Ze=Ze.value;ta=Ze.edgeAVal;var Ma=Ze.refPointsA,ob=Ze.refPointsB;
Jf=Ze.edgeBVal;De=Math.ceil(ja-Ze.delta);If=Math.min(Ma.top,ob.top);Ma=Math.max(Ma.bottom,ob.bottom);Ze.maxDist>ja&&(De-=ja/2);Ye<De&&(Ye=De,la.includes("left")&&(ie=-(Jf-ta)),la.includes("right")&&(Zd=+(Jf-ta)));ub.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Db.guideWidth,start:vc.transformPoint(Db.pt(Jf,If)),end:vc.transformPoint(Db.pt(Jf,Ma)),fill:Db.guideColor,guideType:"h",priority:De})}Cd=$jscomp.makeIterator(Cd);for(id=Cd.next();!id.done;id=Cd.next())id=id.value,Ze=id.edgeAVal,
If=id.refPointsA,Ma=id.refPointsB,ta=id.edgeBVal,Jf=Math.ceil(ja-id.delta),De=Math.min(If.left,Ma.left),If=Math.max(If.right,Ma.right),id.maxDist>ja&&(Jf-=ja/2),uc<Jf&&Math.abs(ta-Ze)<=ja&&(uc=Jf,la.includes("top")&&(Ne=ta-Ze),la.includes("bottom")&&(wf=ta-Ze)),ub.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Db.guideWidth,start:vc.transformPoint(Db.pt(De,ta)),end:vc.transformPoint(Db.pt(If,ta)),fill:Db.guideColor,guideType:"v",priority:Jf})}H&&(ie&&(ea.left+=ie,ea.right-=ie),Ne&&(ea.top+=
Ne,ea.bottom-=Ne),Zd&&(ea.width+=Zd),wf&&(ea.height+=wf));if(tb){ub=ub.filter(function(R){var va=R.guideType;R=R.priority;return"width"===va?R===we:"height"===va?R===sd:"v"===va?R===uc:"h"===va?R===Ye:!1});(la=Db.cachedGuideLines.get(ea))||Db.cachedGuideLines.set(ea,la=[]);for(tb=0;tb<ub.length;tb++)H=void 0,la[tb]?H=Object.assign(la[tb],ub[tb]):(H=Db.morph(ub[tb]),la.push(H)),H.owner||jc.addMorph(H);la.slice(tb).forEach(function(R){return R.remove()});Db.fun.debounceNamed(ea.id+"-drag-guides-cleanup",
1300,function(){var R=Db.cachedGuideLines.get(ea);R&&R.forEach(function(va){return va.remove()})})()}}}function Da(ea,la){la=void 0===la?!1:la;var tb=Ea.MorphicEnv.default().world;if(null===ea||void 0===ea)ea=String(ea);if(ea.isMorph)return Ea.showRect(ea.world(),ea.globalBounds().translatedBy(ea.world().scroll.negated()),la);if(ea.isPoint)return Ea.showRect(tb,new Ea.Rectangle(ea.x-5,ea.y-5,10,10));if(ea.isLine)return Ea.showLine(tb,ea);if(ea.isRectangle)return Ea.showRect(tb,ea);if("undefined"!==
typeof Ea.Element&&ea instanceof Ea.Element)return Ea.showRect(tb,Ea.Rectangle.fromElement(ea));if("number"===typeof ea||"symbol"===typeof ea||"boolean"===typeof ea||"undefined"!==typeof Ea.Node&&ea instanceof Ea.Node||ea instanceof RegExp)ea=String(ea);"object"===typeof ea&&(ea=Ea.obj.inspect(ea,{maxDepth:1}));return"string"===typeof ea&&1===arguments.length?tb.setStatusMessage(ea):tb.setStatusMessage(Ea.string.formatFromArray(Array.from(arguments)))}function Kb(ea,la,tb){tb=void 0===tb?3E3:tb;var H,
ja,Ba,ub,jc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vc){if(1==vc.nextAddress){if(!(ea&&ea.world()&&la&&la.world()))return vc.return(null);H=ea.owner.worldPoint(ea.center);ja=la.owner.worldPoint(la.center);Ba=H.lineTo(ja).sampleN(2)[1];ub={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Ea.Color.red,fill:Ea.Color.red,cx:5,cy:5,r:4}]};jc=$world.addMorph(new Ea.Path({position:Ba,renderOnGPU:!0,vertices:[Ea.pt(0),
Ea.pt(0)],borderWidth:2,startMarker:ub,endMarker:ub,borderColor:Ea.Color.red}));return vc.yield(jc.whenRendered(),2)}if(3!=vc.nextAddress)return vc.yield(jc.animate({opacity:1,customTween:function(Cd){var id=jc.center;jc.vertices=[Ea.pt(0).interpolate(Cd,H.subPt(Ba)),Ea.pt(0).interpolate(Cd,ja.subPt(Ba))];jc.center=id},duration:400}),3);tb&&setTimeout(function(){return jc.fadeOut()},tb);return vc.return(jc)})}ra({a:T,d:Kb,r:I,s:Da});var Db=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Db.removeSnapToGuidesOf=I;Db.showAndSnapToGuides=T;Db.showAndSnapToResizeGuides=ua;Db.computeRefPoints=function(ea){var la=ea.x,tb=ea.y,H=ea.width;ea=ea.height;return{left:la,top:tb,hCenter:la+H/2,vCenter:tb+ea/2,right:la+H,bottom:tb+ea,width:H,height:ea}};Db.findEdgesInAlignment=function(ea,la,tb,H,ja,Ba,ub,jc,vc,Cd){tb=void 0===tb?15:tb;Ba=void 0===Ba?0:Ba;ub=void 0===ub?0:ub;jc=void 0===jc?0:jc;vc=void 0===vc?0:vc;Cd=void 0===Cd?0:Cd;for(var id=[],we=[],sd=0;sd<Db.edges.length;sd++){var Zd=$jscomp.makeIterator(Db.edges[sd]),
ie=Zd.next().value,Ne=Zd.next().value;Zd=Zd.next().value;var wf=ea[Ne],Ye=la[Zd],uc=Math.max(wf,Ye)-Math.min(wf,Ye);uc>tb||!(H&&!H.includes(Ne)||ja&&!ja.includes(Zd))&&("vertical"===ie?id:we).push({delta:uc,edgeA:Ne,edgeB:Zd,edgeAVal:wf,edgeBVal:Ye,refPointsA:ea,refPointsB:la,distLeft:Ba,distTop:ub,distRight:jc,distBottom:vc,maxDist:Cd})}return id.length||we.length?{vertical:id,horizontal:we}:null};Db.findAlignedMorphs=function(ea,la,tb,H,ja,Ba){tb=void 0===tb?15:tb;H=void 0===H?Infinity:H;for(var ub,
jc=Db.computeRefPoints(ea.bounds()),vc=0;vc<la.length;vc++){var Cd=la[vc];if(Cd!==ea){var id=Db.computeRefPoints(Cd.bounds()),we=Math.max(0,jc.left-id.right),sd=Math.max(0,id.left-jc.right),Zd=Math.max(0,jc.top-id.bottom),ie=Math.max(0,id.top-jc.bottom);Math.max(ie,Zd,sd,we)>H||!(id=Db.findEdgesInAlignment(jc,id,tb,ja,Ba,we,Zd,sd,ie,Math.max(ie,Zd,sd,we)))||(ub||(ub=new Map),ub.set(Cd,id))}}ea=ea.owner;la=Db.computeRefPoints(ea.innerBounds());if(tb=Db.findEdgesInAlignment(jc,la,tb))ub||(ub=new Map),
ub.set(ea,tb);return ub};Db.findMorphsWithSimilarWidthOrHeight=function(ea,la,tb,H,ja){H=void 0===H?15:H;ja=void 0===ja?Infinity:ja;for(var Ba,ub=Db.computeRefPoints(ea.bounds()),jc=0;jc<tb.length;jc++){var vc=tb[jc];if(vc!==ea){var Cd=Db.computeRefPoints(vc.bounds()),id=Math.max(0,ub.left-Cd.right),we=Math.max(0,Cd.left-ub.right),sd=Math.max(0,ub.top-Cd.bottom),Zd=Math.max(0,Cd.top-ub.bottom),ie=Math.min(Zd,sd,we,id),Ne=Math.max(Zd,sd,we,id);if(!(Math.max(Zd,sd,we,id)>ja)){we=ub;id=we.width;we=we.height;
Zd=Cd;sd=Zd.width;Zd=Zd.height;var wf=sd-id,Ye=Zd-we;("x"===la||"xy"===la)&&Math.abs(wf)<=H&&(Ba||(Ba=new Map),Ba.set(vc,{similarIn:"width",minDist:ie,maxDist:Ne,refPointsA:ub,refPointsB:Cd,valA:id,valB:sd,delta:wf}));("y"===la||"xy"===la)&&Math.abs(Ye)<=H&&(Ba||(Ba=new Map),Ba.set(vc,{similarIn:"height",minDist:ie,maxDist:Ne,refPointsA:ub,refPointsB:Cd,valA:we,valB:Zd,delta:Ye}))}}}return Ba};Db.closest=function(ea,la,tb,H,ja,Ba,ub,jc){jc=void 0===jc?!0:jc;var vc=H[ea],Cd=ja[ea],id=Ba[ea];la=ub[ea];
for(var we,sd,Zd,ie,Ne=0;Ne<ja.length;Ne++)ea===Ne||vc<ja[Ne]||we&&ja[we.index]>=ja[Ne]||jc&&ub[ea]<Ba[Ne]||Ba[ea]>ub[Ne]||(we={index:Ne,dist:vc-ja[Ne],refPointsA:tb[ea],refPointsB:tb[Ne]});for(vc=0;vc<H.length;vc++)ea===vc||Cd>H[vc]||sd&&H[sd.index]<=H[vc]||jc&&ub[ea]<Ba[vc]||Ba[ea]>ub[vc]||(sd={index:vc,dist:H[vc]-Cd,refPointsA:tb[ea],refPointsB:tb[vc]});for(Cd=0;Cd<ub.length;Cd++)ea===Cd||id<ub[Cd]||Zd&&ub[Zd.index]>=ub[Cd]||jc&&H[ea]>ja[Cd]||ja[ea]<H[Cd]||(Zd={index:Cd,dist:id-ub[Cd],refPointsA:tb[ea],
refPointsB:tb[Cd]});for(ub=0;ub<Ba.length;ub++)ea===ub||la>Ba[ub]||ie&&Ba[ie.index]<=Ba[ub]||jc&&H[ea]>ja[ub]||ja[ea]<H[ub]||(ie={index:ub,dist:Ba[ub]-la,refPointsA:tb[ea],refPointsB:tb[ub]});return{l:we,r:sd,t:Zd,b:ie}};Db.computeClosestMorphs=function(ea){for(var la=[],tb=[],H=[],ja=[],Ba=[],ub=[],jc=0;jc<ea.length;jc++){var vc=Db.computeRefPoints(ea[jc].bounds());Ba.push(vc);var Cd=vc.right,id=vc.top,we=vc.bottom;la.push(vc.left);tb.push(Cd);H.push(id);ja.push(we)}for(jc=0;jc<ea.length;jc++)ub.push(Db.closest(jc,
ea,Ba,la,tb,H,ja));return ub};Db.fun=kb;Db.pt=zb;Db.Color=Sb;Db.morph=Mb;Db.cachedGuideLines=new WeakMap;Db.guideWidth=1;Db.guideColor=Db.Color.orange.lighter();Db.removeSnapToGuidesOf=I;Db.removeSnapToGuidesOf=I;Db.showAndSnapToGuides=T;Db.showAndSnapToGuides=T;Db.showAndSnapToResizeGuides=ua;Db.showAndSnapToResizeGuides=ua;Db.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Fa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Fa.Morph=Fd;Fa.Label=Jc;Fa.StyleSheet=wd;Fa.HorizontalLayout=
Kc;Fa.Path=Fc;Fa.Text=Wc;Fa.GridLayout=hd;Fa.morph=Mb;Fa.Icon=Id;Fa.createMorphSnapshot=nd;Fa.Color=Sb;Fa.pt=zb;Fa.rect=Xc;Fa.Rectangle=Na;Fa.LinearGradient=nb;Fa.obj=Pb;Fa.PropertyPath=Wb;Fa.promise=Pc;Fa.properties=Bd;Fa.num=Hb;Fa.arr=Ub;Fa.connect=vb;Fa.signal=kc;Fa.disconnect=xc;Fa.disconnectAll=Dc;Fa.once=Gb;Fa.showAndSnapToGuides=T;Fa.showAndSnapToResizeGuides=ua;Fa.removeSnapToGuidesOf=I;Fa.haloBlue=Fa.Color.rgb(23,160,251);Fa.componentAccent=Fa.Color.magenta;Fa.derivedAccent=Fa.Color.purple;
var ac=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("Halo")&&"function"===typeof la.Halo?la.Halo:la.Halo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",
get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(H){H.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var H=this;setTimeout(function(){H.target.owner||H.remove()})}},{key:"initLayout",value:function(){var H=this.layout=new Fa.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},
4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});H.col(1).row(7).group.align="center";H.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=
[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||
this.addMorphBack(Fa.morph({name:"border-box",fill:Fa.Color.transparent,borderColor:this.target.isComponent?Fa.componentAccent:Fa.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(H){this.state||(this.state={});this.state.pointerId=H}},{key:"prepareTarget",value:function(H){if(!Fa.obj.isArray(H))return H;if(1>=H.length)return H[0];H=H[0].world().addMorph(new Fa.MultiSelectionTarget({selectedMorphs:H}));H.alignWithSelection();
H.modifiesSelectedMorphs=!0;return H}},{key:"refocus",value:function(H){this.target=H;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var H=this.target.world()||$world,ja=H.visibleBounds(),Ba=this.target.globalBounds(),ub=Ba.insetBy(-36).intersection(ja);ja=Ba.intersection(ja);this.layout&&this.layout.disable();this.setBounds(ub.translatedBy(H.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,ja));this.state.activeButton?(this.buttonControls.forEach(function(jc){return jc.visible=
!1}),this.ensureResizeHandles().forEach(function(jc){return jc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(jc){return jc.visible=!0}),this.buttonControls.forEach(function(jc){jc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(jc){return jc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();
this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var H=this.target;H&&(Fa.disconnect(H,"onChange",this,"alignWithTarget"),Fa.disconnect(H,"onOwnerChanged",this,"removeIfDetached"),H instanceof Fa.MultiSelectionTarget?(H.modifiesSelectedMorphs=!1,H.remove()):"function"===typeof H.detachedHalo&&H.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();$a._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",
value:function(H){return H}},{key:"propertyDisplay",get:function(){return Fa.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Fa.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Fa.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Fa.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Fa.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Fa.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Fa.InspectHaloItem.for(this)}},
{key:"editHalo",value:function(){return Fa.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Fa.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Fa.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Fa.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Fa.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(H){return H.isHaloItem&&!H.isResizeHandle})}},{key:"addMorphToSelection",
value:function(H){var ja=this,Ba,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(jc){return 1==jc.nextAddress?(Ba=ja.world(),ub=ja.target.isMorphSelection?ja.target.selectedMorphs:[ja.target],ja.remove(),jc.yield(Ba.showHaloForSelection([].concat($jscomp.arrayFromIterable(ub),[H]),ja.state.pointerId),2)):jc.return(jc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(H){var ja=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress){Ba=
ja.world();ja.remove();if(!ja.target.isMorphSelection)return ub.jumpTo(0);Fa.arr.remove(ja.target.selectedMorphs,H);return ub.yield(Ba.showHaloForSelection(ja.target.selectedMorphs,ja.state.pointerId),3)}return ub.return(ub.yieldResult)})}},{key:"isAlreadySelected",value:function(H){return this.target==H||this.target.isMorphSelection&&this.target.selectsMorph(H)}},{key:"updateBoundsFor",value:function(H,ja,Ba,ub,jc){var vc={topLeft:Fa.rect(-1,-1,1,1),topCenter:ja?Fa.rect(1,-1,0,1):Fa.rect(0,-1,0,
1),topRight:Fa.rect(0,-1,1,1),rightCenter:ja?Fa.rect(0,1,1,1):Fa.rect(0,0,1,0),bottomRight:Fa.rect(0,0,1,1),bottomCenter:ja?Fa.rect(1,0,0,1):Fa.rect(0,0,0,1),bottomLeft:Fa.rect(-1,0,1,1),leftCenter:ja?Fa.rect(-1,1,1,0):Fa.rect(-1,0,1,0)}[H];jc=vc.x;var Cd=vc.y,id=vc.width;vc=vc.height;Ba=ja?this.proportionalDelta(H,Ba,ub):Ba;H=Fa.rect(Ba.x*jc,Ba.y*Cd,Ba.x*id,Ba.y*vc);this.active=!0;this.target.setBounds(ub.insetByRect(H));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());
this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(H,ja,Ba){var ub=Ba.width,jc=Ba.height;Ba={topLeft:Fa.pt(-1,-1),topCenter:Fa.pt(0,-1),topRight:Fa.pt(1,-1),leftCenter:Fa.pt(-1,0),rightCenter:Fa.pt(1,0),bottomLeft:Fa.pt(-1,1),bottomCenter:Fa.pt(0,1),bottomRight:Fa.pt(1,1)};var vc=ub/Math.max(ub,jc),Cd=jc/Math.max(jc,ub);ub={topLeft:Fa.pt(-vc,-Cd),topCenter:Fa.pt(1/(2*jc/ub),-1),topRight:Fa.pt(vc,-Cd),leftCenter:Fa.pt(-1,jc/(2*ub)),rightCenter:Fa.pt(1,jc/(3*ub)),bottomLeft:Fa.pt(-vc,
Cd),bottomCenter:Fa.pt(1/(2*jc/ub),1),bottomRight:Fa.pt(vc,Cd)};Ba=Ba[H];return ub[H].scaleBy(Ba.dotProduct(ja)/Ba.dotProduct(Ba))}},{key:"ensureResizeHandles",value:function(){return Fa.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(H){H=H.valueForPropertyDisplay();"undefined"!==typeof H?this.propertyDisplay.displayProperty(H):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(H,ja){if(!Fa.rect(0).sides.includes(ja)){var Ba=this.getSubmorphNamed("diagonal");
if(H){H=this.target.globalBounds();var ub=H.width,jc=H.height;H=this.localize(Fa.pt(H.x,H.y)).extent(Fa.pt(ub,jc)).scaleRectTo(this.innerBounds());ub={topLeft:[Fa.pt(ub,jc),Fa.pt(0,0)],topRight:[Fa.pt(0,jc),Fa.pt(ub,0)],bottomRight:[Fa.pt(0,0),Fa.pt(ub,jc)],bottomLeft:[Fa.pt(ub,0),Fa.pt(0,jc)]};Ba?Ba.setBounds(H):(Ba=$jscomp.makeIterator(ub[ja]),ja=Ba.next().value,Ba=Ba.next().value,ub=new Fa.LinearGradient({stops:[{offset:0,color:Fa.Color.orange.withA(0)},{offset:.2,color:Fa.Color.orange},{offset:.8,
color:Fa.Color.orange},{offset:1,color:Fa.Color.orange.withA(0)}]}),Ba=this.addMorphBack(new Fa.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:H,borderColor:ub,vertices:[ja,Ba]})),Ba.setBounds(H),Ba.animate({opacity:1,duration:500}))}else Ba&&Ba.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(H,ja){var Ba=this.getSubmorphNamed("rotationIndicator");H&&ja?(H=this.getSubmorphNamed("origin").center,Ba=Ba||this.addMorphBack(new Fa.Path({name:"rotationIndicator",
borderColor:Fa.haloBlue,borderWidth:1,vertices:[]})),Ba.setBounds(ja.bounds().union(this.innerBounds())),Ba.vertices=[Ba.localizePointFrom(H,this),Ba.localizePointFrom(ja.center,this)]):Ba&&Ba.remove()}},{key:"toggleMorphHighlighter",value:function(H,ja,Ba){Ba=void 0===Ba?!1:Ba;if(ja.onHaloGrabover)ja.onHaloGrabover(H);else Ba=Fa.MorphHighlighter.for(this,ja,Ba),H&&ja&&ja!=this.world()?Ba&&Ba.show(ja):Ba&&Ba.deactivate()}},{key:"onMouseDown",value:function(H){var ja=H.state.clickedOnMorph;if(!H.isCommandKey()&&
ja==this.borderBox)return this.remove();if(H.isShiftDown()&&H.isCommandKey())H=this.target.isMorphSelection?this.target.morphBeneath(H.position):this.morphBeneath(H.position),this.isAlreadySelected(H)?this.removeMorphFromSelection(H):this.addMorphToSelection(H);else{if(ja==this.borderBox&&H.isCommandKey()){var Ba=H.world.morphsContainingPoint(H.position).filter(function(ub){return ub.halosEnabled});(Ba=Ba.slice(Ba.indexOf(this.target)+1)[0]||Ba[0]||H.world)&&H.world.showHaloFor(Ba,H.domEvt.pointerId);
this.remove()}ja==this&&H.isCommandKey()&&(Ba=this.morphBeneath(H.position),H.world.showHaloFor(Ba,H.domEvt.pointerId));ja==this&&this.remove()}}},{key:"onKeyUp",value:function(H){this.changingName||this.buttonControls.map(function(ja){return ja.onKeyUp(H)})}},{key:"getMesh",value:function(H,ja){var Ba=H.x;H=H.y;ja=void 0===ja?Fa.pt(0,0):ja;var ub=this.world().visibleBounds(),jc=ub.height;ub=ub.width;var vc={borderStyle:"dotted",borderWidth:2,borderColor:Fa.Color.orange};vc=this.get("mesh")||this.addMorph(new Fa.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:Fa.pt(ub,jc),fill:null,submorphs:[new Fa.Path(Object.assign({name:"vertical"},vc)),new Fa.Path(Object.assign({name:"horizontal"},vc))]}));vc.globalPosition=ja;vc.getSubmorphNamed("vertical").vertices=[Fa.pt(Ba,0).subPt(ja),Fa.pt(Ba,jc).subPt(ja)];vc.getSubmorphNamed("horizontal").vertices=[Fa.pt(0,H).subPt(ja),Fa.pt(ub,H).subPt(ja)];return vc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Fa.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Fa.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(H){this.state||(this.state={});var ja=!!this.state.target;
this.detachFromTarget();H=this.prepareTarget(H);this.state.target=H;ja&&this.alignWithTarget();Fa.connect(H,"onChange",this,"alignWithTarget");Fa.connect(H,"onOwnerChanged",this,"removeIfDetached")}}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:895,end:16994})}(Fa.Morph);ac=Fa.Halo;
var Gd=ra("H",ac);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof la.HaloPropertyDisplay?la.HaloPropertyDisplay:la.HaloPropertyDisplay=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(H){var ja=this.halo.state.activeButton;H=String(H);this.visible=!0;this.textString=H;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(ja.bounds())&&(this.position=Fa.pt(ja.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},
{key:"defaultPosition",get:function(){return Fa.pt(25,0)}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Fa.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Fa.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Fa.Color.white},position:{defaultValue:this.defaultPosition}}}}],
la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17185,end:18532})})(Fa.Label);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof la.MultiSelectionTarget?la.MultiSelectionTarget:la.MultiSelectionTarget=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(H){return this.selectedMorphs.includes(H)}},{key:"alignWithSelection",value:function(){var H=this.selectedMorphs.map(function(ja){return ja.globalBounds()}).reduce(function(ja,Ba){return ja.union(Ba)});this.setBounds(H)}},{key:"onGrab",
value:function(H){this.grabbingHand=H.hand;this.selectionGrabbed=!0;H.hand.grab(this.selectedMorphs);Fa.once(H.hand,"dropMorphsOn",this,"onGrabEnd");Fa.connect(H.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Fa.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(H){var ja=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Ba){return Ba.resizeBy(ja)})}},{key:"updatePosition",value:function(H){if(!this.selectionGrabbed){var ja=
H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Ba){return Ba.moveBy(ja)})}}},{key:"updateRotation",value:function(H){var ja=this,Ba=H.value-H.prevValue;this.selectedMorphs.forEach(function(ub){var jc=ub.origin;ub.adjustOrigin(ub.localize(ja.worldPoint(Fa.pt(0,0))));ub.rotation+=Ba;ub.adjustOrigin(jc)})}},{key:"updateScale",value:function(H){var ja=this,Ba=H.value-H.prevValue;this.selectedMorphs.forEach(function(ub){var jc=ub.origin;ub.adjustOrigin(ub.localize(ja.worldPoint(Fa.pt(0,
0))));ub.scale+=Ba;ub.adjustOrigin(jc)})}},{key:"onChange",value:function(H){$a._get(Object.getPrototypeOf(tb.prototype),"onChange",this).call(this,H);if(this.modifiesSelectedMorphs){switch(H.prop){case "extent":this.updateExtent(H);break;case "scale":this.updateScale(H);break;case "position":this.updatePosition(H);break;case "rotation":this.updateRotation(H)}return H}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18600,end:20818})})(Fa.Morph);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("HaloItem")&&"function"===typeof la.HaloItem?
la.HaloItem:la.HaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Fa.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Fa.pt(24,24)},halo:{}}}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({halo:H,name:this.morphName}))}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20984,end:21661})})(Fa.Morph);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("NameHolder")&&"function"===typeof la.NameHolder?la.NameHolder:la.NameHolder=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"onHoverIn",value:function(H){this.highlightOnHover&&this.nameHolder.active&&
(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Fa.Color.orange)}},{key:"onHoverOut",value:function(H){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Fa.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(H){"Enter"==H.keyCombo?(this.accept(),H.stop()):$a._get(Object.getPrototypeOf(tb.prototype),"onKeyDown",
this).call(this,H)}},{key:"onMouseUp",value:function(){Fa.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(H){this.nameHolder.fontColor=Fa.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(H){H=this.nameHolder.textString;var ja=this.target.owner;this.validName=!ja||!ja.getSubmorphNamed(H)||this.target.name==H;Fa.signal(this,"valid",[this.validName,H])}},{key:"update",value:function(){var H=this;this.nameHolder.textString!==this.target.name&&
(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return H.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(H){if(!this.forceUniqueName||this.validName)this.target.name=H,Fa.signal(this,"active",[!1,this])}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Fa.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Fa.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Fa.Text({fill:Fa.Color.transparent,
fontColor:Fa.Color.white,fontWeight:"bold",active:!0}));Fa.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21698,end:24232})})(Fa.Morph);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("NameHaloItem")&&
"function"===typeof la.NameHaloItem?la.NameHaloItem:la.NameHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:Symbol.for("lively-instance-initialize"),value:function(H){$a._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.initNameHolders();this.validityIndicator=Fa.Icon.makeLabel("check",{fontColor:Fa.Color.green,fontSize:15,padding:Fa.rect(4,
6,4,0)});this.fill=this.halo.target.isComponent?Fa.componentAccent:Fa.haloBlue;this.alignInHalo()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(H){return{target:H,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var H=this;this.nameHolders=this.targets().map(function(ja){ja=new Fa.NameHolder({halo:H.halo,highlightOnHover:ja.highlightOnHover,
target:ja.target});Fa.connect(ja,"active",H,"toggleActive");Fa.connect(ja,"valid",H,"toggleNameValid");return ja});this.submorphs=Fa.arr.interpose(this.nameHolders,{extent:Fa.pt(1,28),fill:Fa.Color.black.withA(.4)})}},{key:"toggleActive",value:function(H){H=$jscomp.makeIterator(H);var ja=H.next().value,Ba=H.next().value;this.halo.changingName!==ja&&((this.halo.changingName=ja)?(this.nameHolders.forEach(function(ub){return ub!=Ba&&ub.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),
this.fill=Fa.Color.darkGray,setTimeout(function(){return Ba.nameHolder.selectAll()})):(this.fill=Fa.haloBlue,this.nameHolders.forEach(function(ub){return ub!=Ba&&ub.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus()),this.alignInHalo())}},{key:"toggleNameValid",value:function(H){var ja=$jscomp.makeIterator(H);H=ja.next().value;ja=ja.next().value;(this.validName=H)?(this.conflictingMorph=null,this.borderColor=Fa.Color.green,this.validityIndicator.nativeCursor="auto",
this.validityIndicator.fontColor=Fa.Color.green,Fa.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(ja),this.borderColor=Fa.Color.red,this.validityIndicator.fontColor=Fa.Color.red,this.validityIndicator.nativeCursor="pointer",Fa.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Fa.arr.zip(this.targets(),this.nameHolders).map(function(ja){var Ba=$jscomp.makeIterator(ja);ja=Ba.next().value.target;Ba=Ba.next().value;Ba.target=
ja;Ba.update()});var H=this.halo.innerBounds().bottomCenter().addPt(Fa.pt(0,2));this.topCenter=Fa.pt(Math.max(H.x,30),Math.max(H.y,80))}},{key:"onMouseDown",value:function(H){var ja=this,Ba=this.conflictingMorph;Ba&&(this.halo.toggleMorphHighlighter(!0,Ba),setTimeout(function(){return ja.halo.toggleMorphHighlighter(!1,Ba)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},
fill:{defaultValue:Fa.haloBlue},borderColor:{defaultValue:Fa.Color.green},layout:{initialize:function(){this.layout=new Fa.HorizontalLayout({resizeContainer:!0,spacing:0})}}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24234,end:27401})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=la.hasOwnProperty("CloseHaloItem")&&"function"===typeof la.CloseHaloItem?la.CloseHaloItem:la.CloseHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"update",value:function(){var H=this.halo,ja=H.target.owner;ja.undoStart("close-halo");H.target.selectedMorphs?H.target.selectedMorphs.forEach(function(Ba){return Ba.remove()}):H.target.remove();ja.undoStop("close-halo");H.remove()}},{key:"onMouseDown",
value:function(H){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-times"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27404,end:28010})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("GrabHaloItem")&&"function"===typeof la.GrabHaloItem?la.GrabHaloItem:la.GrabHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"adjustTarget",value:function(H,ja){Fa.PropertyPath("owner.layout.autoResize").get(H)&&
!H.globalBounds().insetBy(10).containsPoint(ja)&&(H=H.owner);return H}},{key:"valueForPropertyDisplay",value:function(){var H=this.hand,ja=this.halo,Ba=this.prevDropTarget,ub=H.world(),jc=H.findDropTarget(H.globalPosition,[ja.target],function(vc){return!vc.isHaloItem&&!vc.ownerChain().some(function(Cd){return Cd.isHaloItem||!Cd.visible||0==Cd.opacity})});jc=this.adjustTarget(jc,H.globalPosition);ja.toggleMorphHighlighter(jc&&jc!=ub,jc,!0);Ba&&Ba!=jc&&ja.toggleMorphHighlighter(!1,Ba);return(this.prevDropTarget=
jc)&&jc.name}},{key:"init",value:function(H){var ja=this.halo,Ba=ja.target.undoStart("grab-halo");Ba&&Ba.addTarget(ja.target.owner);this.hand=H;ja.target.onGrab({halo:ja,hand:H,isShiftDown:function(){return!1}});ja.state.activeButton=this;this.opacity=.3;var ub=Fa.connect(H,"update",this,"update");Fa.once(ja.target,"remove",function(){return ub.disconnect()})}},{key:"stop",value:function(H){var ja=this.halo,Ba=this.prevDropTarget,ub=ja.target.undoInProgress,jc=H.hand.findDropTarget(H.hand.globalPosition,
[ja.target],function(vc){return!vc.isHaloItem&&!vc.ownerChain().some(function(Cd){return Cd.isHaloItem})});jc=this.adjustTarget(jc,H.hand.globalPosition);Fa.disconnect(H.hand,"update",this,"update");Fa.MorphHighlighter.interceptDrop(ja,jc,ja.target);ub.addTarget(jc);jc.onDrop(H);ja.state.activeButton=null;ja.alignWithTarget();ja.toggleMorphHighlighter(!1,Ba);Fa.MorphHighlighter.removeHighlighters(ja);ja.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28013,end:30518})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("DragHaloItem")&&"function"===typeof la.DragHaloItem?la.DragHaloItem:la.DragHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,
ea,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(H){var ja=this.halo.getSubmorphNamed("mesh");if(H)return ja=this.halo.getMesh(this.halo.target.worldPoint(Fa.pt(0,0))),this.focus(),ja;ja&&ja.remove()}},{key:"init",value:function(){var H=this.halo.target;H.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=H.position;this.targetTransform=H.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);Fa.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(H,ja,Ba){ja=void 0===ja?!1:ja;Ba=void 0===Ba?!1:Ba;this.actualPos=H=this.actualPos.addPt(this.targetTransform.transformDirection(H));ja&&(H=H.griddedBy(Fa.pt(10,10)));this.halo.target.position=H;this.updateAlignmentGuide(ja);ja||Fa.showAndSnapToGuides(this.halo.target,!0,Ba,5,500)}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDrag",
value:function(H){this.update(H.state.dragDelta,H.isAltDown(),H.isCtrlDown())}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onKeyUp",value:function(H){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],
la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:30521,end:32332})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("InspectHaloItem")&&"function"===typeof la.InspectHaloItem?la.InspectHaloItem:la.InspectHaloItem=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){var ja=this;(function(){var Ba,ub,jc,vc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cd){if(1==Cd.nextAddress)return Cd.yield(System.import("lively.ide/js/inspector.js"),2);Ba=Cd.yieldResult;ub=Ba.default;(jc=ja.world().getSubmorphsByStyleClassName("Inspector").find(function(id){return id.targetObject==ja.halo.target}))&&
(vc=jc.getWindow())?(vc.minimized=!1,vc.animate({center:ja.world().visibleBounds().center(),duration:200})):ub.openInWindow({targetObject:ja.halo.target});ja.halo.remove();Cd.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],
la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32335,end:33237})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("EditHaloItem")&&"function"===typeof la.EditHaloItem?la.EditHaloItem:la.EditHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){var ja=this;(H=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Ba){return Ba.target==ja.halo.target}))?(H=H.getWindow(),H.bringToFront(),H.minimized=!1,H.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:33240,end:34022})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("RotateHaloItem")&&"function"===typeof la.RotateHaloItem?la.RotateHaloItem:la.RotateHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:Symbol.for("lively-instance-initialize"),value:function(H){$a._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,H);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(H){this.setProperty("angle",H)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(H){this.setProperty("scaleGauge",H)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(H){this.setProperty("initRotation",H)}},{key:"valueForPropertyDisplay",
value:function(){var H=this.halo.target;return this.scaleGauge?H.scale.toFixed(4).toString():Fa.num.toDegrees(H.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(H){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=H;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(H){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=H.scaleBy(1/this.halo.target.scale);
this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(H){this.scaleGauge=null;H=this.initRotation+(H-this.angle);H=Fa.num.toRadians(Fa.num.detent(Fa.num.toDegrees(H),10,45));this.halo.target.rotation=H;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(H){var ja=this.scaleGauge,Ba=this.halo;ja||(ja=this.scaleGauge=H.scaleBy(1/Ba.target.scale));this.angle=H.theta();this.initRotation=Ba.target.rotation;Ba.target.scale=Fa.num.detent(H.dist(Fa.pt(0,0))/
ja.dist(Fa.pt(0,0)),.1,.5);Ba.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(H){this.styleClasses=["fas",H?"fa-search-plus":"fa-redo"];this.tooltip=H?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=
this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(H){this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.initScale(H.position.subPt(this.halo.target.globalPosition)):this.init(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(H){this.globalPosition=H.position.addPt(Fa.pt(-10,-10));this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.updateScale(H.position.subPt(this.halo.target.globalPosition)):
this.update(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(H){this.adaptAppearance(H.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(H){this.adaptAppearance(H.isShiftDown())}},{key:"onKeyUp",value:function(H){this.adaptAppearance(H.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34024,end:37468})})(Fa.HaloItem);Fa.nameNumberRe=/(.+)([0-9]+)$/;(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("ComponentHaloItem")&&"function"===typeof la.ComponentHaloItem?la.ComponentHaloItem:
la.ComponentHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"updateComponentIndicator",value:function(){var H=this.world(),ja=this.halo.target;this.halo.remove();H.showHaloFor(ja)}},{key:"onMouseDown",value:function(){this.halo.target.isComponent=!this.halo.target.isComponent;this.updateComponentIndicator()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},
{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37510,end:38256})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("CopyHaloItem")&&"function"===typeof la.CopyHaloItem?la.CopyHaloItem:la.CopyHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"init",value:function(H){function ja(we,sd){return sd.match(Fa.nameNumberRe)?
sd.replace(Fa.nameNumberRe,function(Zd,ie,Ne){Ne||(Ne="0");for(Zd=Number(Ne);we.get(ie+ ++Zd););return ie+Zd}):sd+"1"}var Ba=this.halo,ub=Ba.target,jc=Ba.world(),vc=ub instanceof Fa.MultiSelectionTarget;Ba.remove();Fa.connect(H,"update",this,"update");if(vc){var Cd=ub.selectedMorphs.map(function(we){return jc.addMorph(we.copy())});vc=Cd.map(function(we){we.name=ja(ub,we.name);return we.position});Cd[0].undoStart("copy-halo");jc.addMorph(Ba);Ba.refocus(Cd);H.grab(Ba.target);Ba.target.onGrab({halo:Ba,
hand:H,isShiftDown:function(){return!1}});vc.forEach(function(we,sd){return Cd[sd].globalPosition=we});Ba.alignWithTarget()}else{vc=ub.globalPosition;var id=ub.copy();ub.isComponent&&(id.isComponent=!1,id.withAllSubmorphsDoExcluding(function(we){we!=id&&we.master||delete we._parametrizedProps},function(we){return we.master&&we!=id}),id.master=ub);id.name=ja(ub,ub.name);jc.addMorph(id);id.globalPosition=vc;id.undoStart("copy-halo");H.grab(id);jc.addMorph(Ba);Ba.visible=!1}}},{key:"stop",value:function(H){var ja=
this.halo,Ba=$jscomp.makeIterator(H.grabbedMorphs).next().value,ub=H.findDropTarget(H.globalPosition,[ja.target],function(vc){return!vc.isHaloItem&&!vc.ownerChain().some(function(Cd){return Cd.isHaloItem})}),jc=ja.target.undoInProgress;Fa.disconnect(H,"update",this,"update");jc.addTarget(ub);H.dropMorphsOn(ub);ja.target.undoStop("copy-halo");ja.remove();H.world().showHaloFor(Ba)}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H.hand)}},{key:"update",
value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var H=this,ja,Ba,ub,jc,vc,Cd,id,we,sd,Zd,ie,Ne,wf,Ye,uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ze){switch(Ze.nextAddress){case 1:ja=H;Ba=ja.halo;if(Ba.nameHalo().nameHolders.find(function(If){return If.nameHolder===$world.focusedMorph}))return Ze.return();ub=Ba.target;jc=Ba.world();vc=ub instanceof Fa.MultiSelectionTarget;Cd=ub.globalBounds().topLeft();id=vc?ub.selectedMorphs:[ub];we=[];sd=
'<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Ba.remove();Ze.setCatchFinallyBlocks(2);Zd=$jscomp.makeIterator(id);ie=Zd.next();case 4:if(ie.done)return sd+="</body></html>",Ye=JSON.stringify(we),Ze.yield(H.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:sd},{type:"application/morphic",data:Ye}]),8);Ne=ie.value;return Ze.yield(Fa.createMorphSnapshot(Ne,
{addPreview:!1,testLoad:!1}),7);case 7:wf=Ze.yieldResult;wf.copyMeta={offset:Ne.worldPoint(Fa.pt(0,0)).subPt(Cd)};we.push(wf);sd+=Ne.renderPreview();ie=Zd.next();Ze.jumpTo(4);break;case 8:Ze.leaveTryBlock(3);break;case 2:return uc=Ze.enterCatchBlock(),jc.logError(uc),Ze.return();case 3:jc.addMorph(Ba),Ba.refocus(id),Ba.setStatusMessage("copied"),Ze.jumpToEnd()}})}},{key:"onMouseUp",value:function(H){var ja=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){H.stop();return Ba.yield(ja.copyToClipBoard(),
0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:38258,end:42247})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("OriginHaloItem")&&"function"===typeof la.OriginHaloItem?la.OriginHaloItem:la.OriginHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"fill",get:function(){return Fa.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Fa.pt(15,
15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(H){var ja=this.halo,Ba=ja.target.origin,ub=ja.target.worldPoint(Ba);H=ja.target.localize(ub.addPt(H)).subPt(ja.target.scroll).subPt(Ba);ja.target.adjustOrigin(ja.target.origin.addPt(H))}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},
{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Fa.componentAccent:Fa.haloBlue}}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42250,end:43881})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("ResizeHandle")&&"function"===typeof la.ResizeHandle?la.ResizeHandle:la.ResizeHandle=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target.extent,
ja=H.y;return H.x.toFixed(1)+"x"+ja.toFixed(1)}},{key:"positionInHalo",value:function(){var H=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Fa.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),H=H.insetBy(-4));return H.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(H){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(H){this.init(H.position,H.isShiftDown())}},{key:"onDragEnd",value:function(H){this.stop(H.isShiftDown())}},{key:"onDrag",value:function(H){this.update(H.position,H.isShiftDown(),H.isAltDown(),H.isCtrlDown());this.focus()}},{key:"init",value:function(H,ja){ja=void 0===ja?!1:ja;var Ba=this.halo.target,ub=Ba.origin,jc=Ba.position;Ba=Ba.extent;this.startPos=H;this.startBounds=jc.subPt(ub).extent(Ba);this.startOrigin=
this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();H=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Fa.num.toRadians(H%45);this.halo.toggleDiagonal(ja,this.corner)}},{key:"update",value:function(H,ja,Ba,ub){ja=void 0===ja?!1:ja;Ba=void 0===Ba?!1:Ba;ub=void 0===ub?!1:ub;var jc=this.corner,vc=this.tfm;H=this.startPos.subPt(H);vc=vc.transformDirection(Fa.pt(H.x,
H.y));Ba&&(vc=vc.griddedBy(Fa.pt(10,10)));this.halo.updateBoundsFor(jc,ja,vc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(ja,jc);this.updateAlignmentGuide(Ba);ja=[];jc=jc.toLowerCase();jc.includes("left")&&ja.push("left");jc.includes("top")&&ja.push("top");jc.includes("bottom")&&ja.push("bottom");jc.includes("right")&&ja.push("right");Fa.showAndSnapToResizeGuides(this.halo.target,ja,!0,ub,5,200)}},{key:"stop",value:function(H){H=this.halo;H.layout=this.savedLayout;H.state.activeButton=
null;H.alignWithTarget();H.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Fa.removeSnapToGuidesOf(H.target)}},{key:"updateAlignmentGuide",value:function(H){var ja=this.halo.getSubmorphNamed("mesh");if(H)return H=this.halo.target.extent,H=Fa.pt(H.x%10,H.y%10),ja=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),H),this.focus(),ja;ja&&ja.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},
draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(H){0<H&&(H-=360);H=-8-(H/45).toFixed();0==H&&(H=8);return Fa.arr.zip(Fa.arr.rotate([["topLeft",function(ja){return ja.negated()}],["topCenter",function(ja){return ja.withX(0).negated()}],["topRight",function(ja){return ja.withX(0).negated()}],["rightCenter",function(ja){return Fa.pt(0,0)}],["bottomRight",function(ja){return Fa.pt(0,0)}],["bottomCenter",function(ja){return Fa.pt(0,
0)}],["bottomLeft",function(ja){return ja.withY(0).negated()}],["leftCenter",function(ja){return ja.withY(0).negated()}]],H),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(H){var ja=this;if(!H.target)return[];var Ba=H.target.getGlobalTransform().getRotation();return Fa.arr.compact(this.getResizeParts(Ba).map(function(ub){var jc=
$jscomp.makeIterator(ub),vc=$jscomp.makeIterator(jc.next().value);ub=vc.next().value;vc.next();vc.next();vc=$jscomp.makeIterator(jc.next().value);jc=vc.next().value;vc=vc.next().value;return ja.for(H,ub,vc,jc)})).map(function(ub){return ub.alignInHalo()})}},{key:"for",value:function(H,ja,Ba,ub){var jc="Resize "+ja;H=H.getSubmorphNamed(jc)||new this({name:jc,halo:H,corner:ja,tooltip:"Resize "+ja,extent:Fa.pt(10,10),borderWidth:1,borderRadius:0,borderColor:H.target.isComponent?Fa.componentAccent:Fa.haloBlue,
fill:Fa.Color.white});return Object.assign(H,{nativeCursor:ub,location:Ba})}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:43941,end:49204})})(Fa.HaloItem);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("MenuHaloItem")&&"function"===
typeof la.MenuHaloItem?la.MenuHaloItem:la.MenuHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){var ja=this,Ba,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(jc){if(1==jc.nextAddress)return Ba=ja.halo.target,ja.halo.remove(),jc.yield(Ba.menuItems(),2);ub=jc.yieldResult;Ba.world().openMenu(ub).hasFixedPosition=ja.halo.hasFixedPosition;jc.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:49207,end:49718})})(Fa.HaloItem);var fd=ra("M",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=la.hasOwnProperty("MorphHighlighter")&&"function"===typeof la.MorphHighlighter?la.MorphHighlighter:la.MorphHighlighter=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),
this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&
this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(H){this.layoutHalo&&this.layoutHalo.handleDrop(H)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Fa.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Fa.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(H){var ja=this;this.setProperty("highlightedSides",H);this.submorphs=H.map(function(Ba){return{type:"ellipse",
isHaloItem:!0,fill:Fa.Color.orange,center:ja.innerBounds()[Ba]()}});this.addMorph({type:"label",name:"name tag",padding:Fa.Rectangle.inset(5,5,5,5),fontColor:Fa.Color.white,fill:Fa.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(H){H=void 0===H?$world:H;var ja=H._morphHighlighters,Ba;for(Ba in ja)ja[Ba].remove();
delete H._morphHighlighters}},{key:"for",value:function(H,ja,Ba,ub){Ba=void 0===Ba?!1:Ba;ub=void 0===ub?[]:ub;var jc=H._morphHighlighters=H._morphHighlighters||{};Fa.properties.forEachOwn(jc,function(vc,Cd){return Cd.alignWithHalo()});if(!ja||ja.ownerChain().find(function(vc){return vc.isHaloItem}))return null;jc[ja.id]=jc[ja.id]||new this({targetId:ja.id,halo:H,showLayout:Ba});H.addMorph(jc[ja.id]);jc[ja.id].highlightedSides=ub;return jc[ja.id]}},{key:"interceptDrop",value:function(H,ja,Ba){(H=H._morphHighlighters=
H._morphHighlighters||{},H[ja.id])&&H[ja.id].handleDrop(Ba)}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49908,end:53420})}(Fa.Morph));Fa.MorphHighlighter=fd;Fa.MorphHighlighter=fd;Fa.MorphHighlighter=fd;var Gc=ra("I",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=la.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof la.InteractiveMorphSelector?la.InteractiveMorphSelector:la.InteractiveMorphSelector=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:Symbol.for("lively-instance-initialize"),value:function(H,ja,Ba){H=void 0===H?$world:H;this.controllingMorph=void 0===ja?null:ja;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=
H;this.filterFn=Ba;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var H=Fa.promise.deferred();H.promise.resolve=H.resolve;this.whenDone=H.promise;this.selectorMorph=Fa.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Fa.connect(this.world.firstHand,"position",this,"scanForTargetAt");Fa.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Fa.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();
this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var H=this.world.firstHand.globalPosition;this.selectorMorph.center=H;this.selectorMorph.focus();var ja=this.selectorMorph.morphBeneath(H),Ba,ub=this.possibleTarget,jc=this.controllingMorph,vc=this.filterFn,Cd=this.world,id=this.morphHighlighter;for(id==ja?ja=id.morphBeneath(H):ja&&ja.isEpiMorph&&(ja=ja.morphBeneath(H));ja&&(Ba=[ja].concat($jscomp.arrayFromIterable(ja.ownerChain())).find(function(we){return!we.visible}));)ja=
Ba=Ba.morphBeneath(H);if(ja&&vc&&!vc(ja))for(;ja&&![ja].concat($jscomp.arrayFromIterable(ja.ownerChain())).find(vc);)ja=ja.morphBeneath(H);!ja||ja==ub||jc&&ja.ownerChain().includes(jc.getWindow())||(id&&id.deactivate(),(this.possibleTarget=ub=ja)&&!ub.isWorld&&(H=this.morphHighlighter=Fa.MorphHighlighter.for(Cd,ja))&&H.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Fa.MorphHighlighter.removeHighlighters(this.world);
Fa.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(H,ja,Ba){H=new this(H,ja,Ba);H.selectNewTarget();return H.whenDone}}],la,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53429,end:56174})}(void 0));Fa.InteractiveMorphSelector=Gc;Fa.InteractiveMorphSelector=Gc;Fa.InteractiveMorphSelector=Gc;Fa.default=ac;var Ea=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Ea.show=Da;Ea.showRect=function(ea,la,tb){var H=Ea.BoundsMarker.highlightBounds(la);return tb?Ea.showInLoop(ea,H,la):Ea.showThenHide(ea,H)};Ea.showInLoop=function(ea,la,tb){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){switch(ja.nextAddress){case 1:return Ea.showThenHide(ea,
la,!1),ja.yield(Ea.promise.delay(300),2);case 2:H=!1,Ea.once(ea,"onMouseDown",function(){return H=!0});case 3:if(H){ja.jumpTo(4);break}return ja.yield(la.retract(tb),3);case 4:la.fadeOut(2E3),ja.jumpToEnd()}})};Ea.showThenHide=function(ea,la,tb){tb=void 0===tb?3:tb;if(ea){var H=Array.isArray(la)?la:[la];H.forEach(function(ja){return ea.addMorph(ja)});tb&&setTimeout(function(){return H.forEach(function(ja){return ja.fadeOut(2E3)})},1E3*tb);return la}};Ea.showLine=function(ea,la,tb){tb=void 0===tb?
3E3:tb;var H=la.start;la=la.end.subPt(H);var ja=ea.addMorph({position:H,rotation:la.theta(),border:{width:1,color:Ea.Color.red},width:la.fastR(),height:0});tb&&setTimeout(function(){return ja.fadeOut()},tb);return ja};Ea.showConnector=Kb;Ea.obj=Pb;Ea.promise=Pc;Ea.string=dc;Ea.pt=zb;Ea.Color=Sb;Ea.Rectangle=Na;Ea.rect=Xc;Ea.morph=Mb;Ea.easings=oc;Ea.Path=Fc;Ea.Icon=Id;Ea.Morph=Fd;Ea.MorphicEnv=sa;Ea.connect=vb;Ea.once=Gb;Ea.disconnect=xc;Ea.show=Da;Ea.show=Da;(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),
tb=la.hasOwnProperty("BoundsMarker")&&"function"===typeof la.BoundsMarker?la.BoundsMarker:la.BoundsMarker=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:Symbol.for("lively-instance-initialize"),value:function(){$a._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Ea.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",
get:function(){return!0}},{key:"markerLength",value:function(H){H=H.insetBy(-2);H=Math.min(H.width,H.height);return Math.max(4,Math.floor(10>H/10?H/2-5:H/10))}},{key:"createMarkerEdge",value:function(){return Ea.morph({fill:Ea.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var H=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),ja=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Ba=this.topRightH||(this.topRightH=
this.addMorph(this.createMarkerEdge())),ub=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),jc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),vc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),Cd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),id=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[H,ja,Ba,ub,jc,vc,Cd,id]}},{key:"alignWithMorph",value:function(H){return this.alignWithBounds(H.globalBounds().translatedBy($world.scroll.negated()))}},
{key:"alignWithBounds",value:function(H){this.alignWithRect(H.insetBy(-20));return this.alignWithRect(H,!0)}},{key:"alignWithRect",value:function(H,ja){var Ba=this.ensureMarkerCorners(),ub=this.markerLength(H),jc=[H.topLeft().addXY(0,0).extent(Ea.pt(ub,5)),H.topLeft().addXY(0,0).extent(Ea.pt(5,ub)),H.topRight().addXY(-ub,0).extent(Ea.pt(ub,5)),H.topRight().addXY(-5,0).extent(Ea.pt(5,ub)),H.bottomRight().addXY(-5,-ub).extent(Ea.pt(5,ub)),H.bottomRight().addXY(-ub,-5).extent(Ea.pt(ub,5)),H.bottomLeft().addXY(0,
-5).extent(Ea.pt(ub,5)),H.bottomLeft().addXY(0,-ub).extent(Ea.pt(5,ub))];Ba.forEach(function(vc,Cd){return vc.setBounds(jc[Cd])});ja&&(this.adjustOrigin(H.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(H){var ja=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return ub.yield(ja.animate({scale:Math.max(30/H.width,1.05)}),2);Ba=ja.center;return ub.yield(ja.animate({center:Ba,
scale:1,duration:300,easing:Ea.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(H){return(new this).alignWithMorph(H)}},{key:"highlightBounds",value:function(H){return(new this).alignWithBounds(H)}}],la,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:2261,end:5920})})(Ea.Morph);ac=ra("S",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=la.hasOwnProperty("StatusMessage")&&"function"===typeof la.StatusMessage?la.StatusMessage:la.StatusMessage=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"relayout",value:function(){this.title=Ea.string.truncate(this.message,(this.width/15).toFixed(),
"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(H,ja){this.message=H;this.color=ja}},{key:"slideTo",value:function(H){var ja=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja.sliding=ja.animate({position:H,duration:500}),Ba.yield(ja.sliding,2);ja.sliding=!1;Ba.jumpToEnd()})}},{key:"expand",value:function(){var H=this,ja,Ba,ub,jc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vc){if(1==
vc.nextAddress)return H.expandable?H.sliding?vc.yield(H.sliding,2):vc.jumpTo(2):vc.return();ja=H.world();if(!ja||H.isMaximized)return vc.return();H.isMaximized=!0;H.stayOpen=!0;Ba=H.getSubmorphNamed("message text");Ba.lineWrapping=!1;Object.assign(Ba,{clipMode:"auto",fixedWidth:!0,selectable:!0});H.expandedContent&&(Ba.value=H.expandedContent);Ba.fit();ub=Ba.textBounds().extent();jc=ja.visibleBounds();ub.y>jc.extent().y&&(ub.y=jc.extent().y-20);ub.x>jc.extent().x&&(ub.x=jc.extent().x-20);ub=H.extent.maxPt(ub);
H.animate({extent:ub,center:jc.center(),duration:200});H.relayout();H.focus();vc.jumpToEnd()})}},{key:"fit",value:function(){var H=this.getSubmorphNamed("message text");H&&(this.extent=Ea.pt(100,35).maxPt(H.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var H=this.getSubmorphNamed("message text");H&&H.focus()}},{key:"onMouseUp",value:function(H){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Ea.pt(200,
100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(H){this.setProperty("message",H);var ja=this.getSubmorphNamed("message text");if(ja){ja.value=H;var Ba=ja.documentEndPosition;Ba.row>this.maxLines&&(ja.replace({start:{row:this.maxLines,
column:0},end:Ba},"...\n"),this.expandedContent||(this.expandedContent=H));Ba=ja.documentEndPosition;0!==Ba.column&&ja.insertText("\n",Ba)}}},title:{isStyleProp:!0,derived:!0,set:function(H){this.getSubmorphNamed("message title").value=H},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(H){this.get("message icon").fontColor=H;this.get("message icon")._parametrizedProps&&
(this.get("message icon")._parametrizedProps.fontColor=H)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Ea.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Ea.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Ea.connect(this,"extent",this,"relayout")}}}}}],la,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:5964,end:10242})}(Ea.Morph));Ea.StatusMessage=ac;Ea.StatusMessage=ac;Ea.StatusMessage=ac;var Oc=ra("b",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=la.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof la.StatusMessageForMorph?la.StatusMessageForMorph:la.StatusMessageForMorph=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"alignAtBottomOf",value:function(H){var ja=this.world();ja&&(this.bringToFront(),this.fit(),this.width=H.bounds().width,this.relayout(),H.world()&&(this.position=H.owner.worldPoint(H.bounds().bottomLeft())),H=ja.visibleBounds(),H=this.bounds().top()+this.height-H.bottom(),0<H&&this.moveBy(Ea.pt(0,-H)))}},{key:"onMouseUp",value:function(H){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},
{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var H=this.getProperty("targetMorph");return H&&$world.getMorphWithId(H)},set:function(H){this.setProperty("targetMorph",H?H.id:null);this.alignAtBottomOf(H)}},expandable:{after:["submorphs"],set:function(H){this.setProperty("expandable",H);if(H){var ja=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",
type:"button"});Ea.connect(ja,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),Ea.disconnect(ja,"fire",this,"expand"))}}}}}],la,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10467,end:12318})}(Ea.StatusMessage));Ea.StatusMessageForMorph=
Oc;Ea.StatusMessageForMorph=Oc;Ea.StatusMessageForMorph=Oc;Ea.showConnector=Kb;Ea.showConnector=Kb;var Va=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Va.info="import via sub modules";Va.info="import via sub modules";Va.info="import via sub modules";var kd=ra("v",{});Va.valueWidgets=kd;Va.valueWidgets=kd;Va.valueWidgets=kd;var Ka=ra("p",{});Va.popovers=Ka;Va.popovers=Ka;Va.popovers=Ka;var Wa=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Wa.Morph=Fd;Wa.VerticalLayout=
Ca;Wa.StyleSheet=wd;Wa.Icon=Id;Wa.CustomLayout=bb;Wa.Color=Sb;Wa.rect=Xc;Wa.pt=zb;Wa.connect=vb;Wa.Path=Wb;Wa.duration=300;Va=ra("P",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),tb=la.hasOwnProperty("Popover")&&"function"===typeof la.Popover?la.Popover:la.Popover=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"relayout",value:function(H){var ja=this.get("body"),
Ba=this.get("arrow"),ub=this.get("close button");Ba=Ba.height;H?(ja.animate({topCenter:Wa.pt(0,Ba),duration:200}),ub.animate({topRight:ja.topRight.addXY(8,-8),duration:200})):(ja.topCenter=Wa.pt(0,Ba),ub.topRight=ja.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master=
{auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Wa.pt(200,200),fill:Wa.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(H){var ja=this;this.get("body").addMorph(H);this.whenRendered().then(function(){return ja.relayout()})}},submorphs:{initialize:function(){var H=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Wa.pt(0,
0),borderColor:Wa.Color.transparent,vertices:[Wa.pt(-10,0),Wa.pt(0,-15),Wa.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(Wa.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:Wa.pt(16,16),borderColor:Wa.Color.transparent}];var ja=$jscomp.makeIterator(this.submorphs);ja.next();var Ba=ja.next().value;ja=ja.next().value;Wa.connect(ja,"fire",this,"close");Wa.connect(Ba,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return H.animated=
!0},1E3)}}}}}],la,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(Wa.Morph));Wa.Popover=Va;Wa.Popover=Va;Wa.Popover=Va;var db=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");db.Morph=Fd;db.TilingLayout=rb;db.morph=Mb;db.Label=Jc;db.HorizontalLayout=Kc;db.Icon=
Id;db.InputLine=qb;db.config=Sa;db.connect=vb;db.signal=kc;db.Color=Sb;db.LinearGradient=nb;db.pt=zb;db.rect=Xc;db.num=Hb;db.obj=Pb;db.popovers=Ka;db.ValueScrubber=Ta;db.Popover=Va;(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof la.ContextSensitiveWidget?la.ContextSensitiveWidget:la.ContextSensitiveWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $a(tb,ea,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:db.Color.transparent},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?db.Color.white:db.Color.black}},layout:{initialize:function(){this.layout=new db.HorizontalLayout}},context:{serialize:!1}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2439})})(db.Morph);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("ShortcutWidget")&&"function"===typeof la.ShortcutWidget?la.ShortcutWidget:la.ShortcutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,
ea,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){H.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(H){this.setProperty("title",H);this.getSubmorphNamed("valueString").value=H}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,
set:function(H){this.submorphs.forEach(function(ja){return ja.fontColor=H})}},submorphs:{initialize:function(){this.submorphs=[db.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:db.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:db.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2441,end:3667})})(db.ContextSensitiveWidget);Ka=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("LayoutWidget")&&"function"===typeof la.LayoutWidget?la.LayoutWidget:la.LayoutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return $a(tb,ea,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var H=this,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja=new db.popovers.LayoutPopover({hasFixedPosition:!!H.ownerChain().find(function(ub){return ub.hasFixedPosition}),container:H.context}),Ba.yield(ja.fadeIntoWorld(H.globalBounds().center()),2);db.connect(ja,"layoutChanged",
H,"layoutChanged");db.signal(H,"openWidget",ja);Ba.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3676,end:4493})}(db.ShortcutWidget);db.LayoutWidget=Ka;db.LayoutWidget=Ka;db.LayoutWidget=Ka;Va=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("ColorWidget")&&"function"===typeof la.ColorWidget?la.ColorWidget:la.ColorWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"relayout",
value:function(H){H?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var H=this.color;if(2*H.stops.length==this.submorphs.length-3){var ja;for(ja in this.color.stops){var Ba=H.stops[ja];var ub=Ba.color,jc=Ba.offset,vc=$jscomp.makeIterator(this.submorphs[2+2*ja].submorphs).next().value;Ba=this.submorphs[3+
2*ja];vc.fill=ub;Ba.value=(100*jc).toFixed()+"%"+(ja<H.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=
db.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:db.pt(15,15),fill:db.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:db.pt(5,7.5),fill:db.Color.white,borderColor:db.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[db.pt(0,0),db.pt(10,10)],borderColor:db.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:db.pt(15,
15),fill:db.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:db.pt(5,7.5),fill:this.color,borderColor:db.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:db.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var H=this.color,ja=[{type:"label",padding:db.rect(0,0,5,0),value:"linearGradient"==H.type?db.num.toDegrees(H.vectorAsAngle()).toFixed()+"\u00b0,":""}],Ba;
for(Ba in H.stops){var ub=H.stops[Ba],jc=ub.color;ub=ub.offset;ja.push({extent:db.pt(this.fontSize,this.fontSize),fill:db.Color.transparent,layout:new db.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:jc}]});ja.push({type:"label",padding:db.rect(0,0,5,0),value:(100*ub).toFixed()+"%"+(Ba<H.stops.length-1?",":"")})}return ja}},{key:"onMouseDown",value:function(H){this.openFillEditor()}},{key:"update",value:function(H){this.color=H}},{key:"openFillEditor",value:function(){var H=
this,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja=new db.popovers.FillPopover({hasFixedPosition:!!H.ownerChain().find(function(ub){return ub.hasFixedPosition}),handleMorph:H.context,fillValue:H.color,title:"Fill Control",gradientEnabled:H.gradientEnabled}),Ba.yield(ja.fadeIntoWorld(H.globalBounds().center()),2);db.connect(ja,"fillValue",H,"update");db.signal(H,"openWidget",ja);Ba.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},
{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new db.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:db.Color.white},nonSelectionFontColor:{defaultValue:db.Color.black},color:{defaultValue:db.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(H){this.getProperty("isSelected")!=H&&(this.getSubmorphNamed("valueString").fontColor=H?this.selectionFontColor:this.nonSelectionFontColor,
this.setProperty("isSelected",H))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){db.connect(this,"color",this,"relayout",{converter:function(H,ja){return(ja&&ja.isColor)!=(H&&H.isColor)}});this.relayout(!0)}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:4557,end:9992})}(db.ContextSensitiveWidget);db.ColorWidget=Va;db.ColorWidget=Va;db.ColorWidget=Va;var Zc=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("BooleanWidget")&&"function"===typeof la.BooleanWidget?la.BooleanWidget:la.BooleanWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){this.boolean=
!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:db.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(H){this.setProperty("boolean",H);this.value=db.obj.safeToString(H);this.fontColor=this.boolean?db.Color.green:db.Color.red}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10001,end:10481})}(db.Label);db.BooleanWidget=Zc;db.BooleanWidget=Zc;db.BooleanWidget=Zc;var xd=ra("N",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("NumberWidget")&&"function"===typeof la.NumberWidget?la.NumberWidget:la.NumberWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){$a._get(Object.getPrototypeOf(tb.prototype),"onMouseDown",this).call(this,H);"up"==H.targetMorph.name&&this.increment();"down"==H.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return db.obj.dissoc($a._get(Object.getPrototypeOf(tb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(H,ja){ja=void 0===ja?!0:ja;this.setProperty("number",ja?H/this.scaleFactor:H);db.signal(this,"number",this.number);
this.relayout(ja)}},{key:"relayoutButtons",value:function(){var H=this.getSubmorphNamed("up"),ja=this.getSubmorphNamed("down");this.getSubmorphNamed("value");H.height=ja.height=(this.height-2)/2;H.width=ja.width=20}},{key:"onChange",value:function(H){$a._get(Object.getPrototypeOf(tb.prototype),"onChange",this).call(this,H);"extent"!=H.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(H){var ja=this.getSubmorphNamed("value");ja&&(this.autofit?(H||(ja.value=this.number*this.scaleFactor),
ja.fit(),this.height=ja.height,this.width=ja.width+20):H||(ja.width=this.width-20),this.relayoutButtons(),H||(ja.value=db.num.roundTo(this.number*this.scaleFactor,1),ja.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,ja.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,ja.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||
this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(H){this.setProperty("autofit",H);this.getSubmorphNamed("value").scaleToBounds=!H}},number:{defaultValue:0,after:["unit","autofit"],set:function(H){this.setProperty("number",H);this.relayout(!1)}},min:{defaultValue:-Infinity},
max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(H){this.setProperty("floatingPoint",H);this.get("value").floatingPoint=H},get:function(){var H=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&H&&!!H[1]}},padding:{isStyleProp:!0,defaultValue:db.rect(5,3,0,0),after:["submorphs"],set:function(H){this.setProperty("padding",H);this.getSubmorphNamed("value").padding=H}},extent:{defaultValue:db.pt(70,25)},scaleFactor:{defaultValue:1,
get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(H){this.get("value").baseFactor=H}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:db.Color.rgbHex("#0086b3"),set:function(H){this.setProperty("fontColor",H)}},isSelected:{set:function(H){this.getProperty("isSelected")!=
H&&(H?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",H))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(H){this.setProperty("fontFamily",H)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(H){this.setProperty("fontSize",H)}},layout:{initialize:function(){this.layout=new db.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min",
"max"],initialize:function(){var H=this;this.submorphs=[new db.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),db.Icon.makeLabel("sort-up",{name:"up"}),db.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];db.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return H.relayout()})}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10490,end:16426})}(db.Morph));db.NumberWidget=xd;db.NumberWidget=xd;db.NumberWidget=xd;var Wd=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("ShadowWidget")&&"function"===typeof la.ShadowWidget?la.ShadowWidget:la.ShadowWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja=new db.popovers.ShadowPopover({hasFixedPosition:!!H.ownerChain().find(function(ub){return ub.hasFixedPosition}),shadowValue:H.shadowValue}),Ba.yield(ja.fadeIntoWorld(H.globalBounds().center()),2);db.connect(ja,"shadowValue",H,"shadowValue");db.connect(H,"shadowValue",H,
"update");db.signal(H,"openWidget",ja);Ba.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var H=this.shadowValue,ja=H.blur,Ba=H.spread,ub=H.distance;H=H.color;var jc=
$jscomp.makeIterator(this.submorphs),vc=jc.next().value,Cd=jc.next().value;Cd=$jscomp.makeIterator(Cd.submorphs).next().value;jc=jc.next().value;vc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Cd.fill=H;jc.value=", "+ja+"px, "+ub+"px, "+Ba+"px)"}},{key:"initShadowDisplay",value:function(){var H=this.shadowValue,ja=H.blur,Ba=H.spread,ub=H.distance;H=H.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},
db.morph({fill:db.Color.transparent,extent:db.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:db.pt(this.fontSize,this.fontSize),position:db.pt(2,2),fill:H,borderColor:db.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+ja+"px, "+ub+"px, "+Ba+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(H){this.setProperty("shadowValue",
H);this.renderShadowDisplay()}},fill:{defaultValue:db.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(ja){return ja.fontColor=H})}},isSelected:{defaultValue:!1,set:function(H){this.setProperty("isSelected",H);this.fontColor=H?db.Color.white:db.Color.black}},layout:{initialize:function(){this.layout=new db.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16435,end:19445})}(db.Morph);db.ShadowWidget=Wd;db.ShadowWidget=Wd;db.ShadowWidget=Wd;var le=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("PointWidget")&&"function"===typeof la.PointWidget?la.PointWidget:la.PointWidget=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja=new db.popovers.PointPopover({pointValue:H.pointValue,hasFixedPosition:!!H.ownerChain().find(function(ub){return ub.hasFixedPosition})}),Ba.yield(ja.fadeIntoWorld(H.globalBounds().center()),
2);db.connect(ja,"pointValue",H,"pointValue");db.signal(H,"openWidget",ja);Ba.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:db.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:db.Color.black},fontFamily:{defaultValue:db.config.codeEditor.defaultStyle.fontFamily},
nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(H){var ja=db.Color.rgbHex("#0086b3");this.setProperty("pointValue",H);this.textAndAttributes=["pt(",null,H.x.toFixed(),{fontColor:ja},",",{},H.y.toFixed(),{fontColor:ja},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19454,end:21082})}(db.Label);db.PointWidget=le;db.PointWidget=le;db.PointWidget=le;var yc=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("PaddingWidget")&&"function"===typeof la.PaddingWidget?la.PaddingWidget:la.PaddingWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja=new db.popovers.RectanglePopover({hasFixedPosition:!!H.ownerChain().find(function(ub){return ub.hasFixedPosition}),rectangle:H.rectangle}),ja.relayout(),Ba.yield(ja.fadeIntoWorld(H.globalBounds().center()),2);db.connect(ja,"rectangle",H,"rectangle");db.signal(H,"openWidget",
ja);Ba.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:db.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?db.Color.white:db.Color.black}},rectangle:{defaultValue:db.rect(0),set:function(H){this.setProperty("rectangle",
H);this.value=db.obj.safeToString(H)}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21091,end:22140})}(db.Label);db.PaddingWidget=yc;db.PaddingWidget=yc;db.PaddingWidget=yc;var Rd=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("IconWidget")&&
"function"===typeof la.IconWidget?la.IconWidget:la.IconWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja=new db.popovers.IconPopover({hasFixedPosition:!!H.ownerChain().find(function(ub){return ub.hasFixedPosition})}),
Ba.yield(ja.fadeIntoWorld(H.globalBounds().center()),2);db.connect(ja,"select",H,"iconValue",{converter:function(ub){return ub&&db.Icon.makeLabel(ub).value},varMapping:{Icon:Id}});db.signal(H,"openWidget",ja);Ba.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:db.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(H){this.value=H||"No Icon"}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22149,end:23045})}(db.Label);db.IconWidget=Rd;db.IconWidget=Rd;db.IconWidget=Rd;var bd=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=la.hasOwnProperty("StringWidget")&&
"function"===typeof la.StringWidget?la.StringWidget:la.StringWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"truncate",value:function(H){return 200<H.length?H.slice(0,20)+"...":H}},{key:"onFocus",value:function(H){var ja=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return $a._get(Object.getPrototypeOf(tb.prototype),"onFocus",ja).call(ja,H),ja.readOnly?
ub.return():ja.stringTooLong?ub.yield(ja.world().editPrompt("edit string",{requester:ja,input:ja.stringValue}),2):(ja.borderColor=db.Color.white.withA(.9),ja.textString=ja.stringValue,ub.return());Ba=ub.yieldResult;if("string"===typeof Ba)ja.onInput(Ba);ub.jumpToEnd()})}},{key:"onBlur",value:function(H){$a._get(Object.getPrototypeOf(tb.prototype),"onBlur",this).call(this,H);this.readOnly||(this.borderColor=db.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(H){this.owner.focus();
db.signal(this,"inputAccepted",H);this.stringValue=H}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:db.Color.transparent},fontColor:{defaultValue:db.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:db.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:db.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(H){this.setProperty("stringValue",H);this.textString=this.truncate(H);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?db.Color.white:db.Color.blue}}}}}],la,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23054,end:24974})}(db.InputLine);db.StringWidget=bd;db.StringWidget=bd;db.StringWidget=bd;db.valueWidgets=kd;Object.assign(db.valueWidgets,{NumberWidget:xd,StringWidget:bd,IconWidget:Rd,PaddingWidget:yc,ShadowWidget:Wd,PointWidget:le,BooleanWidget:Zc,LayoutWidget:Ka,ColorWidget:Va});var Fb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Fb.Ellipse=
sb;Fb.Icon=Id;Fb.Morph=Fd;Fb.Path=Fc;Fb.Text=Wc;Fb.HorizontalLayout=Kc;Fb.VerticalLayout=Ca;Fb.morph=Mb;Fb.Color=Sb;Fb.pt=zb;Fb.rect=Xc;Fb.Rectangle=Na;Fb.arr=Ub;Fb.connect=vb;Fb.disconnect=xc;Fb.LabeledCheckBox=Zb;Fb.DropDownSelector=rc;Fb.Button=Xb;Fb.Menu=wc;Fb.NumberWidget=xd;Fb.InteractiveMorphSelector=Gc;Fb.easings=oc;(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=la.hasOwnProperty("AxisHalo")&&"function"===typeof la.AxisHalo?la.AxisHalo:la.AxisHalo=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ja=H.halo;H=H.targetAxis;$a._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:Fb.Color.transparent,halo:ja,targetAxis:H,container:ja.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=
this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(H){this._forceMenuHidden=H;this.axisMenu.visible=!H}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},
{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(H){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var H=this,ja=this,Ba=this.proportionViewer();return this.halo.addGuide(new Fb.Morph({nativeCursor:this.getResizeCursor(),
fill:Fb.Color.transparent,submorphs:[this.devider(),Ba],alignWithTarget:function(){this.setBounds(ja.getProportionSliderBounds(this))},onDragStart:function(){Ba.visible=!0},onDrag:function(ub){H.adjustStretch(H.getDelta(ub));H.halo.alignWithTarget()},onDragEnd:function(){Ba.visible=!1}}))}},{key:"devider",value:function(){return new Fb.Morph({visible:!this.lastAxis,fill:Fb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var H=
this,ja=this,Ba=this.minSpaceVisualizer(),ub=this.minViewer();return this.halo.addGuide(new Fb.Ellipse({nativeCursor:this.getResizeCursor(),fill:Fb.Color.green,extent:Fb.pt(10,10),visible:!1,submorphs:[Ba,ub],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=ja.getMinSliderPosition()},requestToShow:function(){this.visible=!ja.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){ja.forceMenuHidden=!0;ub.visible=!0;this.active=
Ba.visible=!0},onDrag:function(jc){H.targetAxis.min+=-H.getDelta(jc);H.halo.alignWithTarget()},onDragEnd:function(){ja.forceMenuHidden=!1;ub.visible=!1;this.active=Ba.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var H=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+H.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new Fb.Path(Object.assign({position:Fb.pt(-1,
-1),borderStyle:"dashed",borderColor:Fb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var H=this,ja=this.minSpaceBorder();return this.halo.addGuide(new Fb.Morph({fill:Fb.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[ja],alignWithTarget:function(){this.extent=H.getMinSpaceExtent();this.topLeft=Fb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var H=this.lockButton(),ja=this.menuButton(),Ba=this;return new Fb.Morph({layout:this.getMenuLayout(),
submorphs:[H,ja],fill:Fb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Ba.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var H=this;return this.halo.addGuide(new Fb.Morph({fill:Fb.Color.transparent,extent:Fb.pt(25,25),submorphs:[{center:Fb.pt(12.5,12.5),fill:Fb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){H.targetAxis.fixed?(this.fontColor=Fb.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=Fb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){H.targetAxis.fixed=!H.targetAxis.fixed;H.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var H=this,ja=this;return new Fb.Morph({fill:Fb.Color.transparent,extent:Fb.pt(25,25),submorphs:[{fill:Fb.Color.transparent,styleClasses:["fa","fa-cog"],center:Fb.pt(12.5,12.5)}],onMouseDown:function(Ba){ja.forceMenuVisible=!0;this.addMorph(Ba.state.menu=
new Fb.Menu({position:Fb.pt(15,15),items:[["Remove "+ja.subject,function(){H.targetAxis.remove();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+ja.subject+" before",function(){H.targetAxis.addBefore();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+ja.subject+" after",function(){H.targetAxis.addAfter();H.halo.initGuides();H.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(H){var ja=H.position;H=H.alignWithTarget;return this.halo.addGuide(new Fb.Text({styleClasses:["Halo"],
padding:Fb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Fb.Color.white,fill:Fb.Color.black.withA(.5),position:ja,alignWithTarget:H,readOnly:!0}))}},{key:"proportionViewer",value:function(){var H=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=H.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(Fb.Morph);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=la.hasOwnProperty("RowHalo")&&"function"===typeof la.RowHalo?la.RowHalo:la.RowHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:Symbol.for("lively-instance-initialize"),
value:function(H){var ja=H.row;H=H.halo;$a._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.row(ja),halo:H})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(H){this.targetAxis.height+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Fb.pt(-45,this.axisOffset()+
10)}},{key:"fetchExtent",value:function(){return Fb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.height?Fb.pt(2,5):Fb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Fb.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Fb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Fb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return Fb.pt(this.container.width+
45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Fb.pt(this.container.width+50,2),vertices:[Fb.pt(0,1),Fb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Fb.pt(40,20)}},{key:"getProportionSliderBounds",value:function(H){return Fb.pt(0,H.owner.height-5).extent(Fb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Fb.pt(15,4).extent(Fb.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],
la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(Fb.AxisHalo);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=la.hasOwnProperty("ColumnHalo")&&"function"===typeof la.ColumnHalo?la.ColumnHalo:la.ColumnHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ja=H.col;H=H.halo;$a._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.col(ja),halo:H})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(H){this.targetAxis.width+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.x}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Fb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Fb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.width?Fb.pt(5,3):Fb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Fb.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Fb.pt(20,
50)}},{key:"getMinSliderPosition",value:function(){return Fb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Fb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Fb.pt(2,this.container.height+50),vertices:[Fb.pt(1,0),Fb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Fb.pt(20,40)}},{key:"getProportionSliderBounds",value:function(H){return Fb.pt(H.owner.width-5,0).extent(Fb.pt(10,
40))}},{key:"getDeviderBounds",value:function(){return Fb.pt(4,15).extent(Fb.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(Fb.AxisHalo);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
tb=la.hasOwnProperty("CellGuide")&&"function"===typeof la.CellGuide?la.CellGuide:la.CellGuide=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"menuItems",value:function(){var H=this,ja=Fb.Icon.textAttribute("check-square-o"),Ba=Fb.Icon.textAttribute("square-o");ja[1].textStyleClasses.push("annotation");Ba[1].textStyleClasses.push("annotation");Ba[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",
null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ba:ja)),function(){H.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?ja:Ba)),function(){H.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Fb.Rectangle).sides),$jscomp.arrayFromIterable((new Fb.Rectangle).corners)).map(function(ub){return[[ub,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(H.cellGroup.align==ub?ja:Ba),["  ",null]),function(){return H.cellGroup.align=
ub}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var ub=H.cellGroup.morph;ub&&(H.world().firstHand.grab(ub),H.world().firstHand.longClickGrab=!0,ub.position=Fb.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(Fb.Morph);(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=la.hasOwnProperty("LayoutHalo")&&"function"===typeof la.LayoutHalo?la.LayoutHalo:la.LayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},
{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Fb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:11724,end:12137})})(Fb.Morph);kd=ra("G",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=la.hasOwnProperty("GridLayoutHalo")&&"function"===typeof la.GridLayoutHalo?la.GridLayoutHalo:la.GridLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"previewDrop",value:function(H){1>H.length||(H=this.cellGuides.find(function(ja){return ja.fullContainsWorldPoint($world.firstHand.position)}),
H!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=H)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(H){var ja=this;this.currentCell&&H.whenRendered().then(function(){return ja.currentCell.cellGroup.morph=H})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var H=this.target,ja=new Fb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Fb.Color.transparent,
checked:H.compensateOrigin}),Ba=new Fb.LabeledCheckBox({label:"Resize Submorphs",fill:Fb.Color.transparent,name:"fitToCell",checked:H.fitToCell});Fb.connect(ja,"checked",H,"compensateOrigin");Fb.connect(Ba,"checked",H,"fitToCell");Fb.connect(ja,"checked",this,"alignWithTarget");return[ja,Ba]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());
this.extent=this.container.extent;this.addMissingGuides();Fb.arr.reverse(this.guides).forEach(function(H){return H.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var H=this;Fb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(ja){return ja.cellGroup})).forEach(function(ja){return H.addMorph(H.cellGuide(ja))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",
value:function(){var H=this,ja=this.addMorph({fill:Fb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Ba){ja.addMorph(H.cellGuide(Ba))});this.cellGuides=ja.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(H){H.isHaloItem=!0;this.guides.push(H);return H}},{key:"initRowGuides",value:function(){var H=this,ja=this;this.addGuide(this.addMorph(new Fb.Morph({width:25,fill:Fb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,
topRight:Fb.pt(-5,0),alignWithTarget:function(){this.height=ja.container.height}})));Fb.arr.range(0,this.target.rowCount-1).forEach(function(Ba){H.addMorph(new Fb.RowHalo({row:Ba,halo:H}))})}},{key:"initColumnGuides",value:function(){var H=this,ja=this;this.addGuide(this.addMorph(new Fb.Morph({height:25,fill:Fb.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:Fb.pt(0,-5),alignWithTarget:function(){this.width=ja.container.width}})));Fb.arr.range(0,this.target.columnCount-
1).forEach(function(Ba){H.addMorph(new Fb.ColumnHalo({col:Ba,halo:H}))})}},{key:"resizer",value:function(){var H=this;return this.addGuide(new Fb.Morph({fill:Fb.Color.transparent,extent:Fb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(ja){H.container.resizeBy(ja.state.dragDelta);H.alignWithTarget()},alignWithTarget:function(){this.bottomRight=H.extent}}))}},{key:"cellResizer",value:function(H,ja){var Ba=this,ub="topLeft"==ja?"bottomRight":"topLeft";return new Fb.Ellipse({borderWidth:1,visible:!1,
borderColor:Fb.Color.black,nativeCursor:"nwse-resize",removeCell:function(jc){H.disconnect(jc);Ba.alignWithTarget()},addCell:function(jc){H.connect(jc);Ba.alignWithTarget()},start:function(){this.fixpointCell=H[ub];this.draggedDelta=H.bounds().partNamed(ja);this.debugMorph=Ba.addMorph(new Fb.Morph({fill:Fb.Color.orange.withA(.5)}))},update:function(jc){var vc=this;this.draggedDelta=this.draggedDelta.addPt(jc);var Cd=Fb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Cd);
Ba.cells.forEach(function(id){var we=Cd.intersection(id.bounds()).area()/id.bounds().area();H.includes(id)&&.1>we&&vc.removeCell(id);!H.includes(id)&&we>1/3&&vc.addCell(id)})},onDragEnd:function(jc){this.debugMorph.remove()},onDragStart:function(jc){this.start(jc.position)},onDrag:function(jc){this.update(jc.state.dragDelta)}})}},{key:"cellGuide",value:function(H){var ja=this,Ba=this.cellResizer(H,"topLeft"),ub=this.cellResizer(H,"bottomRight");return this.addGuide(new Fb.CellGuide({cellGroup:H,bounds:H.bounds(),
fill:Fb.Color.transparent,borderColor:Fb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Ba,ub],onMouseDown:function(jc){this.becomeActive()},deactivate:function(){this.borderColor=Fb.Color.orange;this.fill=Fb.Color.transparent;this.submorphs.forEach(function(jc){jc.visible=!1})},becomeActive:function(){ja.guides.forEach(function(jc){jc.isCell&&jc.deactivate()});this.borderColor=Fb.Color.rgbHex("#1565C0");this.fill=Fb.Color.rgbHex("#1565C0").withA(.3);ja.addMorph(this.remove());
this.submorphs.forEach(function(jc){jc.visible=!0})},startPreview:function(jc){this.fill=Fb.Color.orange.withA(.7)},stopPreview:function(jc){this.fill=Fb.Color.transparent},onDrop:function(jc){var vc=$jscomp.makeIterator(jc.hand.grabbedMorphs).next().value;jc.hand.dropMorphsOn(ja.container);H.morph=vc},alignWithTarget:function(){H.bounds().isNonEmpty()?(this.setBounds(H.bounds()),Ba.center=this.innerBounds().topLeft(),ub.center=this.innerBounds().bottomRight()):(Fb.arr.remove(ja.guides,this),this.remove())}}))}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Fb.Color.transparent},cells:{derived:!0,get:function(){return Fb.arr.flatten(this.target.col(0).items.map(function(H){return H.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(Fb.LayoutHalo));Fb.GridLayoutHalo=kd;Fb.GridLayoutHalo=kd;Fb.GridLayoutHalo=kd;Ka=function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=la.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof la.TilingLayoutHalo?la.TilingLayoutHalo:la.TilingLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return $a(tb,ea,[{key:"remove",value:function(){$a._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(H){}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"previewDrop",value:function(H){var ja=this;0<this.previews.length||(this.previews=H.map(function(Ba){return ja.container.addMorph({type:Fb.DropPreview,
bounds:Ba.bounds()})}),this.previews.forEach(function(Ba){Ba.step()}))}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"updateAxis",value:function(H){this.target.axis=H}},{key:"updateAlign",value:function(H){this.target.align=H}},{key:"optionControls",value:function(){var H=this.target,ja=new Fb.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.axis,values:["row","column"]}),Ba=new Fb.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.align,values:["left","center"]});
H=new Fb.NumberWidget({min:0,number:H.spacing,padding:Fb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Fb.Color.gray,unit:"px"});Fb.connect(H,"update",this,"updateSpacing");Fb.connect(Ba,"update",this,"updateAlign");Fb.connect(ja,"update",this,"updateAxis");var ub={type:"label",padding:Fb.rect(0,5,5,5),fill:Fb.Color.transparent,fontColor:Fb.Color.gray.darker(),readOnly:!0};return[[Object.assign({},ub,{textString:"Submorph Spacing"}),H],[Object.assign({},ub,{textString:"Tiling Align"}),Ba],
[Object.assign({},ub,{textString:"Tiling Axis"}),ja]].map(function(jc){return{submorphs:jc,fill:null,layout:new Fb.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Fb.Color.transparent},previews:{defaultValue:[]}}}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(Fb.LayoutHalo);Fb.TilingLayoutHalo=Ka;Fb.TilingLayoutHalo=Ka;Fb.TilingLayoutHalo=Ka;(function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=la.hasOwnProperty("DropPreview")&&"function"===typeof la.DropPreview?la.DropPreview:la.DropPreview=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,
[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var H=this,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja=Fb.easings.inOutQuad,Ba.yield(H.animate({opacity:.5,duration:(H.pulseDuration-10)/2,easing:ja}),2);if(3!=Ba.nextAddress)return Ba.yield(H.animate({opacity:1,duration:(H.pulseDuration-10)/2,easing:ja}),3);H.stopped||H.step();Ba.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},
{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Fb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Fb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(Fb.Morph);Ka=ra("F",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=la.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof la.FlexLayoutHalo?la.FlexLayoutHalo:la.FlexLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"handleDrop",value:function(H){}},{key:"previewDrop",
value:function(H){var ja=this;0<this.previews.length||(this.previews=H.map(function(Ba){return ja.container.addMorph({type:Fb.DropPreview,position:ja.container.localize(ja.world().firstHand.position),extent:Ba.bounds().extent()})}),this.previews.forEach(function(Ba){Ba.step()}))}},{key:"remove",value:function(){$a._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},
{key:"onDrop",value:function(H){this.removePreviews();H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(H){H&&(this.originalExtent=this.container.extent);this.target.autoResize=H;H||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(H){this.target.resizeSubmorphs=H;this.alignWithTarget()}},
{key:"updateAlignmentPolicy",value:function(H){this.target.align=H}},{key:"updateDirectionPolicy",value:function(H){this.target.direction=H}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"optionControls",value:function(){var H=this.target,ja=H.possibleAlignValues?{fill:Fb.Color.transparent,layout:new Fb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Fb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,
selectedValue:H.align,values:H.possibleAlignValues})]}:null,Ba=H.possibleDirectionValues?{fill:Fb.Color.transparent,layout:new Fb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new Fb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:H.direction,values:H.possibleDirectionValues})]}:null,ub=new Fb.NumberWidget({fill:Fb.Color.white,borderWidth:1,borderRadius:4,padding:Fb.rect(5,4,0,0),borderColor:Fb.Color.gray,
min:0,number:H.spacing,unit:"px"}),jc=new Fb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Fb.Color.transparent,checked:H.autoResize});H=new Fb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:Fb.Color.transparent,checked:H.resizeSubmorphs});Fb.connect(ub,"update",this,"updateSpacing");Fb.connect(jc,"checked",this,"updateAutoResizePolicy");Fb.connect(H,"checked",this,"updateResizeSubmorphsPolicy");ja&&Fb.connect(ja.submorphs[1],
"selectedValue",this,"updateAlignmentPolicy");Ba&&Fb.connect(Ba.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[jc,H].concat($jscomp.arrayFromIterable([ja,Ba].filter(Boolean)),[{fill:Fb.Color.transparent,layout:new Fb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Fb.Color.gray.darker(),padding:Fb.rect(0,5,5,5)},ub]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:Fb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(Fb.LayoutHalo));Fb.FlexLayoutHalo=Ka;Fb.FlexLayoutHalo=Ka;Fb.FlexLayoutHalo=Ka;Va=ra("c",function(ea){var la=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
tb=la.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof la.ProportionalLayoutHalo?la.ProportionalLayoutHalo:la.ProportionalLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return $a(tb,ea,[{key:"handleDrop",value:function(H){}},{key:"onDrop",value:function(H){H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",
value:function(H){var ja={};this.target.changeSettingsFor(H.submorph,(ja[H.axis]=H.policy,ja),!0)}},{key:"onSubmorphSettingsDragStart",value:function(H,ja){var Ba=this;H.stop();var ub=this.target.settingsFor(ja);ja="";for(var jc in ub)ja+=jc+":"+ub[jc]+" ";var vc=Fb.morph({type:"label",value:ja,isLayoutable:!1});vc.wantsToBeDroppedOn=function(Cd){return Ba.target.layoutableSubmorphs.includes(Cd)};vc.onBeingDroppedOn=function(Cd,id){vc.remove();if(Cd=Ba.target.layoutableSubmorphs.includes(id)?id:H.world.morphsContainingPoint(H.hand.position).find(function(we){return Ba.target.layoutableSubmorphs.includes(we)}))Ba.updateSubmorphProportionalLayoutSettings({policy:ub.x,
axis:"x",submorph:Cd}),Ba.updateSubmorphProportionalLayoutSettings({policy:ub.y,axis:"y",submorph:Cd}),Cd.show(),$world.setStatusMessage("layout settings applied")};H.hand.grab(vc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var H=this,ja,Ba,ub,jc,vc,Cd,id,we,sd,Zd,ie,Ne;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wf){switch(wf.nextAddress){case 1:return ja=H.target.layoutableSubmorphs,H.env.eventDispatcher.isKeyPressed("Shift")?(ub=ja.map(function(Ye){return{isListItem:!0,
string:String(Ye),value:Ye}}),wf.yield($world.listPrompt("Select morph",ub,{requester:H,onSelection:function(Ye){return Ye.show()}}),5)):wf.yield(Fb.InteractiveMorphSelector.selectMorph(H.world(),H,function(Ye){return ja.includes(Ye)}),4);case 4:Ba=wf.yieldResult;wf.jumpTo(3);break;case 5:jc=wf.yieldResult,vc=$jscomp.makeIterator(jc.selected),Ba=vc.next().value;case 3:if(!Ba)return wf.return();Cd=H.state.popover.get("controlContainer");id=Cd.getAllNamed(/submorph config/);we=["move","resize","scale",
"fixed"];sd=H.target.settingsFor(Ba);id.length||(Cd.submorphs=[].concat($jscomp.arrayFromIterable(Cd.submorphs),[{name:"submorph config X-Axis policy",position:Fb.pt(0,H.height),fill:Fb.Color.transparent,layout:new Fb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Fb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:sd.x,values:we})]},{name:"submorph config Y-Axis policy",position:Fb.pt(0,
H.height),fill:Fb.Color.transparent,layout:new Fb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Fb.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:sd.y,values:we})]},Fb.morph({position:Fb.pt(0,H.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Zd=Cd.getSubmorphNamed("x-axis policy selector");ie=Cd.getSubmorphNamed("y-axis policy selector");Ne=Cd.getSubmorphNamed("dragme");
Fb.disconnect(Zd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Fb.disconnect(ie,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Zd.selectedValue=sd.x;ie.selectedValue=sd.y;Fb.connect(Ne,"onDragStart",H,"onSubmorphSettingsDragStart",{updater:function(Ye,uc){return Ye(uc,Ba)},varMapping:{submorph:Ba}});Fb.connect(Zd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Ye){return{policy:Ye,axis:"x",submorph:Ba}},varMapping:{submorph:Ba}});Fb.connect(ie,
"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Ye){return{policy:Ye,axis:"y",submorph:Ba}},varMapping:{submorph:Ba}});wf.jumpToEnd()}})}},{key:"optionControls",value:function(H){this.state.popover=H;var ja=this.target;H=new Fb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Fb.Color.transparent,checked:ja.xAxisEnabled});ja=new Fb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Fb.Color.transparent,checked:ja.yAxisEnabled});
var Ba=new Fb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Fb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});Fb.connect(H,"checked",this,"updateXAxisEnabled");Fb.connect(ja,"checked",this,"updateYAxisEnabled");Fb.connect(Ba,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Ba]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:Fb.Color.transparent}}}}],la,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(Fb.LayoutHalo));Fb.ProportionalLayoutHalo=Va;Fb.ProportionalLayoutHalo=Va;Fb.ProportionalLayoutHalo=Va;Zc=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Zc.Halo=Gd;
Zc.MorphHighlighter=fd;Zc.InteractiveMorphSelector=Gc;Zc.StatusMessage=ac;Zc.StatusMessageForMorph=Oc;Zc.show=Da;Zc.showConnector=Kb;Zc.ProportionalLayoutHalo=Va;Zc.GridLayoutHalo=kd;Zc.FlexLayoutHalo=Ka;Zc.showAndSnapToGuides=T;Zc.removeSnapToGuidesOf=I;Zc.StatusMessage=ac;Zc.StatusMessage=ac;Zc.StatusMessageForMorph=Oc;Zc.StatusMessageForMorph=Oc;Zc.show=Da;Zc.show=Da;Zc.showConnector=Kb;Zc.showConnector=Kb;Zc.Halo=Gd;Zc.Halo=Gd;Zc.MorphHighlighter=fd;Zc.MorphHighlighter=fd;Zc.InteractiveMorphSelector=
Gc;Zc.InteractiveMorphSelector=Gc;Zc.ProportionalLayoutHalo=Va;Zc.ProportionalLayoutHalo=Va;Zc.GridLayoutHalo=kd;Zc.GridLayoutHalo=kd;Zc.FlexLayoutHalo=Ka;Zc.FlexLayoutHalo=Ka;Zc.showAndSnapToGuides=T;Zc.showAndSnapToGuides=T;Zc.removeSnapToGuidesOf=I;Zc.removeSnapToGuidesOf=I;Gd=Object.freeze({__proto__:null,StatusMessage:ac,StatusMessageForMorph:Oc,show:Da,showConnector:Kb,Halo:Gd,MorphHighlighter:fd,InteractiveMorphSelector:Gc,ProportionalLayoutHalo:Va,GridLayoutHalo:kd,FlexLayoutHalo:Ka,showAndSnapToGuides:T,
removeSnapToGuidesOf:I,SvgStyleHalo:void 0});ra("i",Gd);ra("_",void 0)}}});