System.register("./__rootModule___commonjs-entry-71573ff5.js ./index-d18accbd.js ./editor-plugin-330ed4ee.js ./editor-modes-5e094c88.js ./editor-plugin-00779331.js ./eval-backend-ui-e952986b.js ./index-5053c530.js ./test-runner-849f8d86.js ./index-ca98f65e.js ./ui.cp-6289a670.js ./index-1c08552a.js ./linter-9c18bc15.js ./editor-plugin-0a8dd45b.js ./mode-9e103dc6.js ./list.cp-8569fe93.js ./loading-indicator.cp-b18e3b89.js".split(" "),function(Lc,pd){var Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,
Xb,Nb,bc,hb,cb,Hb,ec,ub,yb,ba,wb,Xa,Za,Sb,Cb,Da,zb,db,ib,Ea,W,T,ia,ka,K,ya,pb,La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub,vc,Oc,aa,Ma,qb,Vb,Lb,Kb,Db,Ra,N,va,Wa,pa,tb,ab;return{setters:[function(Ob){Nd=Ob.C;Tc=Ob.r;Jc=Ob.b;$d=Ob.H;Bb=Ob.V;rd=Ob.p;Id=Ob.c;Ac=Ob.h;Pc=Ob.u;gd=Ob.w;nd=Ob.j;Fd=Ob.i;ic=Ob._;vd=Ob.y;sb=Ob.G;Xb=Ob.x;Nb=Ob.g;bc=Ob.ae;hb=Ob.aD;cb=Ob.l;Hb=Ob.ag;ec=Ob.bf;ub=Ob.I;yb=Ob.D;ba=Ob.bX;wb=Ob.k;Xa=Ob.J;Za=Ob.M;Sb=Ob.f;Cb=Ob.bY;Da=Ob.R;zb=Ob.F;db=Ob.n;ib=Ob.b8;Ea=Ob.B;W=Ob.d;T=Ob.e;ia=Ob.A;ka=Ob.bZ;
K=Ob.ap;ya=Ob.b_;pb=Ob.bb;La=Ob.aR},function(Ob){eb=Ob.T},function(Ob){jb=Ob["default"]},function(Ob){E=Ob.getMode;Wb=Ob.passIndent;R=Ob.defineMode;xb=Ob.defineMIME;Ja=Ob.registerHelper;Ga=Ob.startState;sa=Ob.copyState;Ub=Ob.innerMode;vc=Ob.findModeByName;Oc=Ob.tokenizeDocument},function(Ob){aa=Ob.H},function(Ob){Ma=Ob["default"]},function(Ob){qb=Ob.a},function(Ob){Vb=Ob.testsFromSource},function(Ob){Lb=Ob.m},function(Ob){Kb=Ob.a;Db=Ob.D},function(Ob){Ra=Ob.serverInterfaceFor;N=Ob.localInterface},
function(Ob){va=Ob.l},function(Ob){Wa=Ob.CodeMirrorEnabledEditorPlugin},function(Ob){pa=Ob.S},function(Ob){tb=Ob.a},function(Ob){ab=Ob.L}],execute:function(){function Ob(){Ob=ic(regeneratorRuntime.mark(function Rb(ja){var Q;return regeneratorRuntime.wrap(function(nb){for(;;)switch(nb.prev=nb.next){case 0:return nb.next=2,le.resource(ja).dirList();case 2:return nb.t0=function(Ia){return Ia.isDirectory()||le.editableFiles.includes(Ia.ext())},Q=nb.sent.filter(nb.t0),nb.abrupt("return",Q.map(function(Ia){var lb=
Ia.isDirectory()?"directory":Ia.ext();return{isCollapsed:!0,name:Ia.name(),size:Ia.size,lastModified:Ia.lastModified,url:Ia.url,type:lb}}));case 5:case "end":return nb.stop()}},Rb)}));return Ob.apply(this,arguments)}function yc(J){"ObjectExpression"===J.type&&(J.children=J.properties.map(function(ja){return yc(ja)}));J.value&&"ObjectExpression"===J.value.type&&(J.children=J.value.properties.map(function(ja){return yc(ja)}));"ArrayExpression"===J.type&&(J.children=J.elements.map(function(ja){return yc(ja)}));
J.value&&"ArrayExpression"===J.value.type&&(J.children=J.value.elements.map(function(ja){return yc(ja)}));J.key?(J.start=J.key.start-13,J.end-=13,J.name=J.key.value,J.type="ObjectExpression"===J.value.type?"object-decl":"ArrayExpression"===J.value.type?"array-decl":"Literal"):(J.start-=13,J.end-=13,J.name=J.value);J.isDeclaration=!0;J.isCollapsed=!0;J.name||(J.name="[ANONYMOUS OBJECT]");return J}function Ta(){Ta=ic(regeneratorRuntime.mark(function Rb(ja){var Q,nb,Ia,lb,fb,kb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=
kc.next){case 0:return kc.next=2,le.resource(ja).read();case 2:Q=kc.sent;nb=le.parse("const test = "+Q);Ia=nb.body[0].declarations[0].init.properties;lb=sb(Ia);try{for(lb.s();!(fb=lb.n()).done;)kb=fb.value,le.transformJSONNode(kb)}catch(Mc){lb.e(Mc)}finally{lb.f()}return kc.abrupt("return",Ia);case 8:case "end":return kc.stop()}},Rb)}));return Ta.apply(this,arguments)}function Bd(){Bd=ic(regeneratorRuntime.mark(function Rb(ja){var Q,nb;return regeneratorRuntime.wrap(function(Ia){for(;;)switch(Ia.prev=
Ia.next){case 0:return Q="https://registry.npmjs.com/-/v1/search?text=".concat(ja,"&size=50"),Ia.next=3,nf.resource(Q).makeProxied().readJson();case 3:return nb=Ia.sent,Ia.abrupt("return",nb.objects.map(function(lb){lb.searchScore;var fb=lb["package"],kb=fb.version;return{isListItem:!0,string:"".concat(fb.name,"@").concat(kb),value:lb}}));case 5:case "end":return Ia.stop()}},Rb)}));return Bd.apply(this,arguments)}function Eb(J){return new re.Context(re.copyState(J.mode,J.state),J.mode,J.depth,J.prev&&
Eb(J.prev))}function fe(J){function ja(lb,fb,kb){return Rb.apply(this,arguments)}function Rb(){Rb=ic(regeneratorRuntime.mark(function Mc(fb,kb,kc){var Gc;return regeneratorRuntime.wrap(function(Xc){for(;;)switch(Xc.prev=Xc.next){case 0:if(Gc=fb.get("test runner window")){Xc.next=5;break}Xc.next=4;return Ia.execCommand("open test runner");case 4:Gc=Xc.sent;case 5:return Gc.minimized&&Gc.toggleMinimize(),Gc.bringToFront(),Gc=Gc.getWindow().targetMorph,Gc.systemInterface!==fb.systemInterface&&(Gc.systemInterface=
fb.systemInterface),Xc.abrupt("return",kc?Gc["suite"===kc.type?"runSuite":"runTest"](kc.fullTitle):Gc.runTestFile(kb));case 10:case "end":return Xc.stop()}},Mc)}));return Rb.apply(this,arguments)}function Q(lb,fb){return nb.apply(this,arguments)}function nb(){nb=ic(regeneratorRuntime.mark(function kc(fb,kb){var Mc;return regeneratorRuntime.wrap(function(Gc){for(;;)switch(Gc.prev=Gc.next){case 0:if(Mc=fb.get("test runner window")){Gc.next=5;break}Gc.next=4;return Ia.execCommand("open test runner");
case 4:Mc=Gc.sent;case 5:return Mc.minimized&&Mc.toggleMinimize(),Mc=Mc.getWindow().targetMorph,Mc.systemInterface!==fb.systemInterface&&(Mc.systemInterface=fb.systemInterface),Gc.abrupt("return",Mc.runTestsInPackage(kb));case 9:case "end":return Gc.stop()}},kc)}));return nb.apply(this,arguments)}var Ia=J.world();return[{name:"focus list with selection",exec:function(){return J.focusColumnView()}},{name:"open new tab",exec:function(){var lb=ic(regeneratorRuntime.mark(function kb(){var kc;return regeneratorRuntime.wrap(function(Mc){for(;;)switch(Mc.prev=
Mc.next){case 0:if(!J.hasUnsavedChanges()){Mc.next=6;break}Mc.next=3;return J.warnForUnsavedChanges();case 3:if(kc=Mc.sent){Mc.next=6;break}return Mc.abrupt("return");case 6:J.ui.tabs.addTab("New Browser Tab");case 7:case "end":return Mc.stop()}},kb)}));return function(){return lb.apply(this,arguments)}}()},{name:"focus source editor",exec:function(){J.focusSourceEditor();return!0}},{name:"resize editor panel",exec:function(){var lb=J.ui.hresizer,fb=lb.getRelativeDivide();lb.divideRelativeToParent(.39<
fb?.15:.4);return!0}},{name:"browser history backward",exec:function(lb){lb.historyBackward();return!0}},{name:"browser history forward",exec:function(lb){lb.historyForward();return!0}},{name:"browser save",exec:function(lb){return lb.save()}},{name:"jump to codeentity",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc,ad,he,we,$e;return regeneratorRuntime.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:Mc=kb.editorPlugin.textMorph;if(!kb.isTestModule(Mc.textString)){Qe.next=
3;break}return Qe.abrupt("return",kb.execCommand("jump to test"));case 3:if(!wd.isMarkdown(kb.selectedModule)){Qe.next=5;break}return Qe.abrupt("return",Mc.execCommand("[markdown] goto heading"));case 5:return Gc=kb.renderedCodeEntities(),Xc=Gc.map(function(dg){return dg.name}).indexOf(kb.selectedCodeEntity&&kb.selectedCodeEntity.name),ad=Gc.map(function(dg){var Cf=dg.name,Fh=dg.type,ag=dg.parent;return{isListItem:!0,label:["".concat(ag?ag.name+">>":"").concat(Cf),null,"".concat(Fh),{fontSize:"70%",
textStyleClasses:["annotation"]}],value:dg}}),Qe.next=10,kb.world().filterableListPrompt("Select item",ad,{preselect:Xc,requester:kb,historyId:"js-browser-codeentity-jump-hist"});case 10:he=Qe.sent;we=Xb(he.selected,1);if($e=we[0])Mc.saveMark(),kb.selectCodeEntity($e);return Qe.abrupt("return",!0);case 15:case "end":return Qe.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()},{name:"jump to test",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc,
ad,he,we,$e,Qe,dg,Cf,Fh,ag,ng,Gj,zj,gl;return regeneratorRuntime.wrap(function(og){for(;;)switch(og.prev=og.next){case 0:Mc=kb.selectedModule;Gc=kb.editorPlugin.textMorph;if(Mc){og.next=3;break}return og.abrupt("return",!0);case 3:return Xc=Gc.textString,ad=[],he=[],we=Xc.split("\n"),$e=Gc.cursorPosition.row,Qe=0,og.next=11,pd.import("mocha-es6");case 11:return dg=og.sent,Cf=dg.loadTestModuleAndExtractTestState,og.next=15,Cf(Mc.url,he);case 15:Fh=he[0].tests.filter(function(ek){return ek.fullTitle});
ag=function(ek){var bj=Fh[ek],Ym=bj.depth,Pj=bj.fullTitle,ge=bj.title,Ed=bj.type,Kf="suite"===Ed?"describe":"it",Di=bj.row=we.findIndex(function(rk){return rk.match(new RegExp("".concat(Kf,'.*".*').concat(ge,'.*"')))});Di<=$e&&(Qe=ek);ad.push({isListItem:!0,value:bj,label:["".concat("\u2002".repeat(Ym-1)).concat(Pj),null,"line ".concat(Di," ").concat(Ed),{fontSize:"70%",textStyleClasses:["annotation"]}]})};for(ng=0;ng<Fh.length;ng++)ag(ng);og.next=20;return kb.world().filterableListPrompt("tests of ".concat(Mc.nameInPackage),
ad,{requester:kb,preselect:Qe});case 20:Gj=og.sent;zj=Xb(Gj.selected,1);if(gl=zj[0])Gc.saveMark(),Gc.cursorPosition={row:gl.row,column:0},Gc.execCommand("goto line start"),Gc.centerRow(gl.row);return og.abrupt("return",!0);case 25:case "end":return og.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()},{name:"browser history browse",exec:function(lb){return lb.interactivelyBrowseHistory()}},{name:"open code search",exec:function(lb){return lb.world().execCommand("open code search",
{browser:lb})}},{name:"choose and browse package resources",exec:function(lb){return lb.world().execCommand("choose and browse package resources",{browser:lb})}},{name:"choose and browse module",exec:function(lb){return lb.world().execCommand("choose and browse module",{browser:lb})}},{name:"reload module",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc=arguments;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:return Mc=1<Xc.length&&
void 0!==Xc[1]?Xc[1]:{hard:!1},ad.next=3,J.reloadModule(Mc.hard);case 3:if(Gc=ad.sent){ad.next=6;break}return ad.abrupt("return",J.world().inform("No module selected",{requester:J}));case 6:if(!(Gc instanceof Error)){ad.next=8;break}return ad.abrupt("return",J.world().inform(Gc.message,{requester:J}));case 8:return J.setStatusMessage("Reloaded ".concat(Gc.name)),ad.abrupt("return",!0);case 10:case "end":return ad.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()},{name:"load or add module",
exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc,ad;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return Mc=kb.selectedPackage,Gc=kb.selectedModule,Xc=kb.systemInterface,he.prev=4,he.next=7,Xc.interactivelyAddModule(kb,Gc?Gc.name:Mc?Mc.address:null);case 7:ad=he.sent;he.next=14;break;case 10:return he.prev=10,he.t0=he["catch"](4),"Canceled"===he.t0?kb.setStatusMessage(he.t0):kb.world().inform("Error while trying to load modules:\n".concat(he.t0.stack||
he.t0),{requester:kb}),he.abrupt("return");case 14:return ad.forEach(function(we){var $e=we.name;return(we=we.error)?kb.showError("Error while loading module ".concat($e,": ").concat(we.stack||we)):kb.setStatusMessage("Module ".concat($e," loaded"))}),he.next=17,kb.updateModuleList(Mc);case 17:return ad.length&&kb.selectModuleNamed(ad[0].name),he.abrupt("return",!0);case 19:case "end":return he.stop()}},kc,null,[[4,10]])}));return function(kb){return lb.apply(this,arguments)}}()},{name:"create new folder",
exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc=arguments;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:return Mc=1<Xc.length&&void 0!==Xc[1]?Xc[1]:{},Gc=Mc.dir,ad.next=4,kb.interactivelyCreateNewFolder(Gc);case 4:return ad.abrupt("return",ad.sent);case 5:case "end":return ad.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()},{name:"create new module",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,
Gc,Xc,ad=arguments;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return Mc=1<ad.length&&void 0!==ad[1]?ad[1]:{},Gc=Mc.dir,Xc=Mc.type,he.next=4,kb.interactivelyAddNewModule(Gc,Xc);case 4:return he.abrupt("return",he.sent);case 5:case "end":return he.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()},{name:"remove selected entity",exec:function(lb){return lb.interactivelyRemoveSelectedItem((1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{}).dir)}},{name:"remove module",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc,ad,he=arguments;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:Mc=1<he.length&&void 0!==he[1]?he[1]:{};Gc=kb.selectedPackage;Xc=Mc.mod||kb.selectedModule;ad=kb.systemInterface;if(Gc){we.next=6;break}return we.abrupt("return",kb.world().inform("No package selected",{requester:kb}));case 6:if(Xc){we.next=8;break}return we.abrupt("return",kb.world().inform("No module selected",
{requester:kb}));case 8:return we.prev=8,we.next=11,ad.interactivelyRemoveModule(kb,Xc.url||Xc.name||Xc.id);case 11:we.next=17;break;case 13:return we.prev=13,we.t0=we["catch"](8),"Canceled"!==we.t0&&kb.showError("Error while trying to load modules:\n".concat(we.t0.stack||we.t0)),we.abrupt("return",!0);case 17:return we.next=19,kb.updateModuleList(Xc);case 19:return we.abrupt("return",!0);case 20:case "end":return we.stop()}},kc,null,[[8,13]])}));return function(kb){return lb.apply(this,arguments)}}()},
{name:"add package",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:return ad.next=2,kb.world().multipleChoicePrompt("Add Package",{requester:kb,choices:new Map([[[].concat(vd(wd.Icon.textAttribute("cube")),[" Create New Package",{}]),"Create New Package"],[[].concat(vd(wd.Icon.textAttribute("external-link-alt")),[" Load Existing Package",{}]),"Load Existing Package"]])});case 2:if((Mc=
ad.sent)&&"Cancel"!==Mc){ad.next=5;break}return ad.abrupt("return",!0);case 5:ad.prev=5;Xc=kb.systemInterface;if("Create New Package"!==Mc){ad.next=13;break}ad.next=10;return Xc.interactivelyCreatePackage(kb);case 10:ad.t0=ad.sent;ad.next=16;break;case 13:return ad.next=15,Xc.interactivelyLoadPackage(kb,kb.selectedPackage?kb.selectedPackage.address:null);case 15:ad.t0=ad.sent;case 16:Gc=ad.t0;ad.next=26;break;case 19:ad.prev=19;ad.t1=ad["catch"](5);if("Canceled"!==ad.t1){ad.next=24;break}ad.next=
25;break;case 24:throw ad.t1;case 25:return ad.abrupt("return",!0);case 26:return ad.next=28,kb.selectPackageNamed(Gc.name,!0);case 28:return ad.abrupt("return",!0);case 29:case "end":return ad.stop()}},kc,null,[[5,19]])}));return function(kb){return lb.apply(this,arguments)}}()},{name:"remove package",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc;return regeneratorRuntime.wrap(function(Gc){for(;;)switch(Gc.prev=Gc.next){case 0:if(Mc=kb.selectedPackage){Gc.next=4;break}kb.world().inform("No package selected",
{requester:kb});return Gc.abrupt("return",!0);case 4:return Gc.prev=4,Gc.next=7,kb.systemInterface.interactivelyRemovePackage(kb,Mc.address);case 7:Gc.next=14;break;case 9:Gc.prev=9;Gc.t0=Gc["catch"](4);if("Canceled"===Gc.t0){Gc.next=13;break}throw Gc.t0;case 13:return Gc.abrupt("return",!0);case 14:return Gc.next=16,kb.selectPackageNamed(null,!0);case 16:return Gc.abrupt("return",!0);case 17:case "end":return Gc.stop()}},kc,null,[[4,9]])}));return function(kb){return lb.apply(this,arguments)}}()},
{name:"show imports and exports of package",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc,ad,he;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return Mc=kb.systemInterface,we.next=3,Mc.getPackages();case 3:return Gc=we.sent,Xc=Gc.map(function($e){return{isListItem:!0,label:["".concat($e.name),null,"".concat($e.url),{fontSize:"70%",textStyleClasses:["annotation"]}],value:$e}}),we.next=7,kb.world().filterableListPrompt("Choose package(s)",
Xc,{multiselect:!0,requester:kb,historyId:"lively.ide.js-browser-choose-package-for-showing-export-imports-hist"});case 7:return ad=we.sent,he=ad.selected,we.next=11,Promise.all(he.map(function($e){return Mc.showExportsAndImportsOf($e.url)}));case 11:return we.abrupt("return",!0);case 12:case "end":return we.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()},{name:"open browse snippet",exec:function(lb){return lb.world().execCommand("open workspace",{content:lb.browseSnippetForSelection(),
language:"javascript"})}},{name:"open selected module in text editor",exec:function(lb){var fb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},kb=fb.module||lb.selectedModule;fb=fb.hasOwnProperty("codeEntity")?fb.codeEntity:lb.selectedCodeEntity;if(!kb)return lb.world().inform("No module selected / specified!",{requester:lb,autoWidth:!0}),!0;fb=fb?lb.editorPlugin.textMorph.indexToPosition(fb.node.start).row:null;kb=kb.url;kb.startsWith("file://")&&(kb=kb.replace("file://",""));return lb.world().execCommand("open file",
{url:kb,lineNumber:fb})}},{name:"run all tests in package",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc;return regeneratorRuntime.wrap(function(Xc){for(;;)switch(Xc.prev=Xc.next){case 0:if(Mc=kb.selectedPackage){Xc.next=3;break}return Xc.abrupt("return",kb.world().inform("No package selected",{requester:kb}));case 3:return Xc.next=5,Q(kb,Mc.name);case 5:return Gc=Xc.sent,kb.focus(),Xc.abrupt("return",Gc);case 8:case "end":return Xc.stop()}},kc)}));return function(kb){return lb.apply(this,
arguments)}}()},{name:"run all tests in module",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc;return regeneratorRuntime.wrap(function(Xc){for(;;)switch(Xc.prev=Xc.next){case 0:if(Mc=kb.selectedModule){Xc.next=3;break}return Xc.abrupt("return",kb.world().inform("No module selected",{requester:kb}));case 3:return Xc.next=5,ja(kb,Mc.url,null);case 5:return Gc=Xc.sent,kb.focus(),Xc.abrupt("return",Gc);case 8:case "end":return Xc.stop()}},kc)}));return function(kb){return lb.apply(this,
arguments)}}()},{name:"run tests at point",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc,ad,he,we,$e;return regeneratorRuntime.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(Mc=kb.selectedModule){Qe.next=3;break}return Qe.abrupt("return",kb.world().inform("No module selected",{requester:kb}));case 3:return Gc=kb.get("sourceEditor"),Qe.next=6,pd.import("mocha-es6/test-analysis.js");case 6:return Xc=Qe.sent,ad=Xc.extractTestDescriptors,Qe.next=10,ad(Gc.textString,
Gc.document.positionToIndex(Gc.cursorPosition));case 10:if((he=Qe.sent)&&he.length){Qe.next=13;break}return Qe.abrupt("return",kb.world().inform("No test at "+JSON.stringify(Gc.cursorPosition),{requester:kb}));case 13:return we={fullTitle:wd.arr.pluck(he,"title").join(" "),type:wd.arr.last(he).type,file:Mc.name},Qe.next=16,ja(kb,Mc.name,we);case 16:return $e=Qe.sent,kb.focus(),Qe.abrupt("return",$e);case 19:case "end":return Qe.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()},
{name:"run setup code of tests (before and beforeEach)",exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){var Mc,Gc,Xc,ad,he,we,$e,Qe,dg,Cf,Fh=arguments;return regeneratorRuntime.wrap(function(ag){for(;;)switch(ag.prev=ag.next){case 0:Mc=1<Fh.length&&void 0!==Fh[1]?Fh[1]:{what:"setup"};if(Gc=kb.selectedModule){ag.next=4;break}return ag.abrupt("return",kb.world().inform("No module selected",{requester:kb}));case 4:return Xc=kb.get("sourceEditor"),ag.next=7,pd.import("mocha-es6/test-analysis.js");
case 7:return ad=ag.sent,he=ad.extractTestDescriptors,ag.next=11,he(Xc.textString,Xc.document.positionToIndex(Xc.cursorPosition));case 11:if((we=ag.sent)&&we.length){ag.next=14;break}return ag.abrupt("return",kb.world().inform("No test at "+JSON.stringify(Xc.cursorPosition),{requester:kb}));case 14:return $e=Mc&&Mc.what||"setup",Qe="setup"===$e?"setupCalls":"teardownCalls",dg=0,Cf=we.flatMap(function(ng){return ng[Qe].map(function(Gj,zj){dg++;return"await ((".concat(lively.ast.stringify(Gj),")());")})}).join("\n"),
ag.prev=18,ag.next=21,kb.systemInterface.runEval(Cf,Object.assign({},Xc.evalEnvironment));case 21:kb.setStatusMessage("Executed ".concat(dg," test ").concat($e," functions"));ag.next=27;break;case 24:ag.prev=24,ag.t0=ag["catch"](18),kb.showError(Error("Error when running ".concat($e," calls of test:\n").concat(ag.t0.stack)));case 27:return ag.abrupt("return",!0);case 28:case "end":return ag.stop()}},kc,null,[[18,24]])}));return function(kb){return lb.apply(this,arguments)}}()},{name:"run teardown code of tests (after and afterEach)",
exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){return regeneratorRuntime.wrap(function(Mc){for(;;)switch(Mc.prev=Mc.next){case 0:return Mc.abrupt("return",kb.execCommand("run setup code of tests (before and beforeEach)",{what:"teardown"}));case 1:case "end":return Mc.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()},{name:"freeze selected module",doc:"Enters the freeze prompt which allows the user to configure and execute a build for the currently selected module. The resulting bundle will execute the specified main() method in the current module and pass the default world object as a parameter. This allows us to bundle apps in lively without snapshots.",
exec:function(){var lb=ic(regeneratorRuntime.mark(function kc(kb){return regeneratorRuntime.wrap(function(Mc){for(;;)switch(Mc.prev=Mc.next){case 0:wd.interactivelyFreezeModule(kb.selectedModule.url,kb);case 1:case "end":return Mc.stop()}},kc)}));return function(kb){return lb.apply(this,arguments)}}()}]}function Od(J,ja,Rb){var Q,nb="";"string"!==typeof ja&&(Rb=ja,ja=Od.defaultChars);"undefined"===typeof Rb&&(Rb=!0);var Ia=Y[ja];if(!Ia){Ia=Y[ja]=[];for(Q=0;128>Q;Q++){var lb=String.fromCharCode(Q);
/^[0-9a-z]$/i.test(lb)?Ia.push(lb):Ia.push("%"+("0"+Q.toString(16).toUpperCase()).slice(-2))}for(Q=0;Q<ja.length;Q++)Ia[ja.charCodeAt(Q)]=ja[Q]}lb=Ia;ja=0;for(Q=J.length;ja<Q;ja++)if(Ia=J.charCodeAt(ja),Rb&&37===Ia&&ja+2<Q&&/^[0-9a-f]{2}$/i.test(J.slice(ja+1,ja+3)))nb+=J.slice(ja,ja+3),ja+=2;else if(128>Ia)nb+=lb[Ia];else if(55296<=Ia&&57343>=Ia){if(55296<=Ia&&56319>=Ia&&ja+1<Q&&(Ia=J.charCodeAt(ja+1),56320<=Ia&&57343>=Ia)){nb+=encodeURIComponent(J[ja]+J[ja+1]);ja++;continue}nb+="%EF%BF%BD"}else nb+=
encodeURIComponent(J[ja]);return nb}function Hd(J){var ja,Rb=Ca[J];if(Rb)return Rb;Rb=Ca[J]=[];for(ja=0;128>ja;ja++){var Q=String.fromCharCode(ja);Rb.push(Q)}for(ja=0;ja<J.length;ja++)Q=J.charCodeAt(ja),Rb[Q]="%"+("0"+Q.toString(16).toUpperCase()).slice(-2);return Rb}function Qc(J,ja){"string"!==typeof ja&&(ja=Qc.defaultChars);var Rb=Hd(ja);return J.replace(/(%[a-f0-9]{2})+/gi,function(Q){var nb,Ia="";var lb=0;for(nb=Q.length;lb<nb;lb+=3){var fb=parseInt(Q.slice(lb+1,lb+3),16);if(128>fb)Ia+=Rb[fb];
else{if(192===(fb&224)&&lb+3<nb){var kb=parseInt(Q.slice(lb+4,lb+6),16);if(128===(kb&192)){fb=fb<<6&1984|kb&63;Ia=128>fb?Ia+"\ufffd\ufffd":Ia+String.fromCharCode(fb);lb+=3;continue}}if(224===(fb&240)&&lb+6<nb){kb=parseInt(Q.slice(lb+4,lb+6),16);var kc=parseInt(Q.slice(lb+7,lb+9),16);if(128===(kb&192)&&128===(kc&192)){fb=fb<<12&61440|kb<<6&4032|kc&63;Ia=2048>fb||55296<=fb&&57343>=fb?Ia+"\ufffd\ufffd\ufffd":Ia+String.fromCharCode(fb);lb+=6;continue}}if(240===(fb&248)&&lb+9<nb){kb=parseInt(Q.slice(lb+
4,lb+6),16);kc=parseInt(Q.slice(lb+7,lb+9),16);var Mc=parseInt(Q.slice(lb+10,lb+12),16);if(128===(kb&192)&&128===(kc&192)&&128===(Mc&192)){fb=fb<<18&1835008|kb<<12&258048|kc<<6&4032|Mc&63;65536>fb||1114111<fb?Ia+="\ufffd\ufffd\ufffd\ufffd":(fb-=65536,Ia+=String.fromCharCode(55296+(fb>>10),56320+(fb&1023)));lb+=9;continue}}Ia+="\ufffd"}}return Ia})}function Xd(){this.pathname=this.search=this.hash=this.hostname=this.port=this.auth=this.slashes=this.protocol=null}function oc(J,ja){return Bf.call(J,
ja)}function rf(J){return 55296<=J&&57343>=J||64976<=J&&65007>=J||65535===(J&65535)||65534===(J&65535)||0<=J&&8>=J||11===J||14<=J&&31>=J||127<=J&&159>=J||1114111<J?!1:!0}function Dd(J){return 65535<J?(J-=65536,String.fromCharCode(55296+(J>>10),56320+(J&1023))):String.fromCharCode(J)}function ld(J){return Z[J]}function Td(){this.rules=zc({},kd)}function gb(J,ja,Rb){this.type=J;this.tag=ja;this.map=this.attrs=null;this.nesting=Rb;this.level=0;this.children=null;this.info=this.markup=this.content="";
this.meta=null;this.hidden=this.block=!1}function Vc(J,ja,Rb,Q){this.src=J;this.env=Rb;this.md=ja;this.tokens=Q;this.tokens_meta=Array(Q.length);this.pos=0;this.posMax=this.src.length;this.level=0;this.pending="";this.pendingLevel=0;this.cache={};this.delimiters=[];this._prev_delimiters=[];this.backticks={};this.backticksScanned=!1}function vb(J){Array.prototype.slice.call(arguments,1).forEach(function(ja){ja&&Object.keys(ja).forEach(function(Rb){J[Rb]=ja[Rb]})});return J}function cc(J){return Object.prototype.toString.call(J)}
function ob(J){return J.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function ac(J){return Object.keys(J||{}).reduce(function(ja,Rb){return ja||Dl.hasOwnProperty(Rb)},!1)}function ae(J){J.__index__=-1;J.__text_cache__=""}function qe(J){return function(ja,Rb){ja=ja.slice(Rb);return J.test(ja)?ja.match(J)[0].length:0}}function lc(){return function(J,ja){ja.normalize(J)}}function nc(J){function ja(lb){return lb.replace("%TLDS%",Q.src_tlds)}function Rb(lb,fb){throw Error('(LinkifyIt) Invalid schema "'+lb+'": '+
fb);}var Q=J.re=Lh(J.__opts__),nb=J.__tlds__.slice();J.onCompile();J.__tlds_replaced__||nb.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]");nb.push(Q.src_xn);Q.src_tlds=nb.join("|");Q.email_fuzzy=RegExp(ja(Q.tpl_email_fuzzy),
"i");Q.link_fuzzy=RegExp(ja(Q.tpl_link_fuzzy),"i");Q.link_no_ip_fuzzy=RegExp(ja(Q.tpl_link_no_ip_fuzzy),"i");Q.host_fuzzy_test=RegExp(ja(Q.tpl_host_fuzzy_test),"i");var Ia=[];J.__compiled__={};Object.keys(J.__schemas__).forEach(function(lb){var fb=J.__schemas__[lb];if(null!==fb){var kb={validate:null,link:null};J.__compiled__[lb]=kb;"[object Object]"===cc(fb)?("[object RegExp]"===cc(fb.validate)?kb.validate=qe(fb.validate):"[object Function]"===cc(fb.validate)?kb.validate=fb.validate:Rb(lb,fb),"[object Function]"===
cc(fb.normalize)?kb.normalize=fb.normalize:fb.normalize?Rb(lb,fb):kb.normalize=lc()):"[object String]"===cc(fb)?Ia.push(lb):Rb(lb,fb)}});Ia.forEach(function(lb){J.__compiled__[J.__schemas__[lb]]&&(J.__compiled__[lb].validate=J.__compiled__[J.__schemas__[lb]].validate,J.__compiled__[lb].normalize=J.__compiled__[J.__schemas__[lb]].normalize)});J.__compiled__[""]={validate:null,normalize:lc()};nb=Object.keys(J.__compiled__).filter(function(lb){return 0<lb.length&&J.__compiled__[lb]}).map(ob).join("|");
J.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+Q.src_ZPCc+"))("+nb+")","i");J.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+Q.src_ZPCc+"))("+nb+")","ig");J.re.pretest=RegExp("("+J.re.schema_test.source+")|("+J.re.host_fuzzy_test.source+")|@","i");ae(J)}function Yc(J,ja){var Rb=J.__index__,Q=J.__last_index__,nb=J.__text_cache__.slice(Rb,Q);this.schema=J.__schema__.toLowerCase();this.index=Rb+ja;this.lastIndex=Q+ja;this.url=this.text=this.raw=nb}function fd(J,ja){ja=new Yc(J,ja);J.__compiled__[ja.schema].normalize(ja,
J);return ja}function ua(J,ja){if(!(this instanceof ua))return new ua(J,ja);!ja&&ac(J)&&(ja=J,J={});this.__opts__=vb({},Dl,ja);this.__last_index__=this.__index__=-1;this.__text_cache__=this.__schema__="";this.__schemas__=vb({},El,J);this.__compiled__={};this.__tlds__=pj;this.__tlds_replaced__=!1;this.re={};nc(this)}function Ab(){this.__rules__=[];this.__cache__=null}function Fa(J,ja){return Nj[ja.toLowerCase()]}function za(J,ja,Rb){return J.substr(0,ja)+Rb+J.substr(ja+1)}function Ka(J,ja,Rb){this.src=
J;this.env=Rb;this.tokens=[];this.inlineMode=!1;this.md=ja}function Ib(){this.ruler=new Mq;for(var J=0;J<Jn.length;J++)this.ruler.push(Jn[J][0],Jn[J][1])}function C(J,ja){var Rb=J.bMarks[ja]+J.tShift[ja];return J.src.substr(Rb,J.eMarks[ja]-Rb)}function Pb(J){var ja=[],Rb=0,Q=J.length,nb,Ia=!1,lb=0,fb="";for(nb=J.charCodeAt(Rb);Rb<Q;)124===nb&&(Ia?(fb+=J.substring(lb,Rb-1),lb=Rb):(ja.push(fb+J.substring(lb,Rb)),fb="",lb=Rb+1)),Ia=92===nb,Rb++,nb=J.charCodeAt(Rb);ja.push(fb+J.substring(lb));return ja}
function da(J,ja){var Rb=J.bMarks[ja]+J.tShift[ja];var Q=J.eMarks[ja];ja=J.src.charCodeAt(Rb++);return 42!==ja&&45!==ja&&43!==ja||Rb<Q&&(J=J.src.charCodeAt(Rb),!Uq(J))?-1:Rb}function wa(J,ja){var Rb=J.bMarks[ja]+J.tShift[ja],Q=Rb,nb=J.eMarks[ja];if(Q+1>=nb)return-1;ja=J.src.charCodeAt(Q++);if(48>ja||57<ja)return-1;for(;;){if(Q>=nb)return-1;ja=J.src.charCodeAt(Q++);if(48<=ja&&57>=ja){if(10<=Q-Rb)return-1}else{if(41===ja||46===ja)break;return-1}}return Q<nb&&(ja=J.src.charCodeAt(Q),!Uq(ja))?-1:Q}function ca(J,
ja,Rb,Q){var nb,Ia,lb;this.src=J;this.md=ja;this.env=Rb;this.tokens=Q;this.bMarks=[];this.eMarks=[];this.tShift=[];this.sCount=[];this.bsCount=[];this.lineMax=this.line=this.blkIndent=0;this.tight=!1;this.listIndent=this.ddIndent=-1;this.parentType="root";this.level=0;this.result="";ja=this.src;var fb=!1;Rb=Q=Ia=lb=0;for(nb=ja.length;Q<nb;Q++){J=ja.charCodeAt(Q);if(!fb)if(Tm(J)){Ia++;9===J?lb+=4-lb%4:lb++;continue}else fb=!0;if(10===J||Q===nb-1)10!==J&&Q++,this.bMarks.push(Rb),this.eMarks.push(Q),
this.tShift.push(Ia),this.sCount.push(lb),this.bsCount.push(0),fb=!1,lb=Ia=0,Rb=Q+1}this.bMarks.push(ja.length);this.eMarks.push(ja.length);this.tShift.push(0);this.sCount.push(0);this.bsCount.push(0);this.lineMax=this.bMarks.length-1}function ma(){this.ruler=new br;for(var J=0;J<Nn.length;J++)this.ruler.push(Nn[J][0],Nn[J][1],{alt:(Nn[J][2]||[]).slice()})}function u(J){switch(J){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;
default:return!1}}function O(J,ja){var Rb,Q=[],nb=ja.length;for(Rb=0;Rb<nb;Rb++){var Ia=ja[Rb];if(126===Ia.marker&&-1!==Ia.end){var lb=ja[Ia.end];Ia=J.tokens[Ia.token];Ia.type="s_open";Ia.tag="s";Ia.nesting=1;Ia.markup="~~";Ia.content="";Ia=J.tokens[lb.token];Ia.type="s_close";Ia.tag="s";Ia.nesting=-1;Ia.markup="~~";Ia.content="";"text"===J.tokens[lb.token-1].type&&"~"===J.tokens[lb.token-1].content&&Q.push(lb.token-1)}}for(;Q.length;){Rb=Q.pop();for(ja=Rb+1;ja<J.tokens.length&&"s_close"===J.tokens[ja].type;)ja++;
ja--;Rb!==ja&&(Ia=J.tokens[ja],J.tokens[ja]=J.tokens[Rb],J.tokens[Rb]=Ia)}}function P(J,ja){var Rb;for(Rb=ja.length-1;0<=Rb;Rb--){var Q=ja[Rb];if((95===Q.marker||42===Q.marker)&&-1!==Q.end){var nb=ja[Q.end];var Ia=0<Rb&&ja[Rb-1].end===Q.end+1&&ja[Rb-1].marker===Q.marker&&ja[Rb-1].token===Q.token-1&&ja[Q.end+1].token===nb.token+1;var lb=String.fromCharCode(Q.marker);var fb=J.tokens[Q.token];fb.type=Ia?"strong_open":"em_open";fb.tag=Ia?"strong":"em";fb.nesting=1;fb.markup=Ia?lb+lb:lb;fb.content="";
fb=J.tokens[nb.token];fb.type=Ia?"strong_close":"em_close";fb.tag=Ia?"strong":"em";fb.nesting=-1;fb.markup=Ia?lb+lb:lb;fb.content="";Ia&&(J.tokens[ja[Rb-1].token].content="",J.tokens[ja[Q.end+1].token].content="",Rb--)}}}function fa(J,ja){var Rb,Q,nb={},Ia=ja.length;if(Ia){var lb=0,fb=-2,kb=[];for(J=0;J<Ia;J++){var kc=ja[J];kb.push(0);if(ja[lb].marker!==kc.marker||fb!==kc.token-1)lb=J;fb=kc.token;kc.length=kc.length||0;if(kc.close){nb.hasOwnProperty(kc.marker)||(nb[kc.marker]=[-1,-1,-1,-1,-1,-1]);
var Mc=nb[kc.marker][(kc.open?3:0)+kc.length%3];for(Q=Rb=lb-kb[lb]-1;Rb>Mc;Rb-=kb[Rb]+1){var Gc=ja[Rb];if(Gc.marker===kc.marker&&Gc.open&&0>Gc.end){var Xc=!1;!Gc.close&&!kc.open||0!==(Gc.length+kc.length)%3||0===Gc.length%3&&0===kc.length%3||(Xc=!0);if(!Xc){Mc=0<Rb&&!ja[Rb-1].open?kb[Rb-1]+1:0;kb[J]=J-Rb+Mc;kb[Rb]=Mc;kc.open=!1;Gc.end=J;Gc.close=!1;Q=-1;fb=-2;break}}}-1!==Q&&(nb[kc.marker][(kc.open?3:0)+(kc.length||0)%3]=Q)}}}}function Qa(){var J;this.ruler=new kv;for(J=0;J<Dp.length;J++)this.ruler.push(Dp[J][0],
Dp[J][1]);this.ruler2=new kv;for(J=0;J<fr.length;J++)this.ruler2.push(fr[J][0],fr[J][1])}function Ua(J){J=J.trim().toLowerCase();return xy.test(J)?yy.test(J)?!0:!1:!0}function Gb(J){J=Qn.parse(J,!0);if(J.hostname&&(!J.protocol||0<=pv.indexOf(J.protocol)))try{J.hostname=ov.toASCII(J.hostname)}catch(ja){}return Qn.encode(Qn.format(J))}function ta(J){J=Qn.parse(J,!0);if(J.hostname&&(!J.protocol||0<=pv.indexOf(J.protocol)))try{J.hostname=ov.toUnicode(J.hostname)}catch(ja){}return Qn.decode(Qn.format(J),
Qn.decode.defaultChars+"%")}function mc(J,ja){if(!(this instanceof mc))return new mc(J,ja);ja||Ep.isString(J)||(ja=J||{},J="default");this.inline=new uy;this.block=new ty;this.core=new sy;this.renderer=new qy;this.linkify=new vy;this.validateLink=Ua;this.normalizeLink=Gb;this.normalizeLinkText=ta;this.utils=Ep;this.helpers=Ep.assign({},lv);this.options={};this.configure(J);ja&&this.set(ja)}var pc=window.lively.FreezerRuntime.recorderFor("lively.components/muller-columns.cp.js");pc.Color=Nd;pc.rect=
Tc;pc.pt=Jc;pc.HorizontalLayout=$d;pc.ViewModel=Bb;pc.part=rd;pc.component=Id;pc.signal=Ac;pc.noUpdate=Pc;pc.connect=gd;pc.arr=nd;pc.DefaultList=tb;pc.ColumnListDefault=pc.component["for"](function(){return pc.component(pc.DefaultList,{name:"column list default",borderWidthRight:1,borderColor:pc.Color.rgb(213,216,220),extent:pc.pt(230,93.5),fill:pc.Color.rgba(255,255,255,0),itemBorderRadius:3,itemPadding:pc.rect(5,3,0,-2),padding:pc.rect(5,5,5,0)})},{module:"lively.components/muller-columns.cp.js",
"export":"ColumnListDefault",range:{start:349,end:639}},pc.ColumnListDefault);pc.ColumnListDark=pc.component["for"](function(){return pc.component(pc.ColumnListDefault,{name:"column list dark",borderColor:pc.Color.rgb(133,146,158),fill:pc.Color.rgba(44,62,80,0),nonSelectionFontColor:pc.Color.rgb(252,252,252),selectionColor:pc.Color.rgb(133,193,233),selectionFontColor:pc.Color.rgb(53,53,53)})},{module:"lively.components/muller-columns.cp.js","export":"ColumnListDark",range:{start:647,end:940}},pc.ColumnListDark);
var zd=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.components/muller-columns.cp.js"),Rb=ja.hasOwnProperty("MullerColumnViewModel")&&"function"===typeof ja.MullerColumnViewModel?ja.MullerColumnViewModel:ja.MullerColumnViewModel=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"focusActiveList",value:function(){pc.arr.last(this.lists.filter(function(Q){return!!Q.selection})).focus()}},
{key:"listNavigationProhibited",get:function(){return this.treeData.listNavigationProhibited}},{key:"truncateNameIfNeeded",value:function(Q){return Q}},{key:"isSelected",value:function(Q){return!Q.isCollapsed}},{key:"setTreeData",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=fb.next){case 0:return this.treeData=Ia,fb.next=3,Ia.collapse(Ia.root,!1);case 3:return fb.next=5,this.refresh(!1);case 5:case "end":return fb.stop()}},
lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"reset",value:function(){this.lists=[]}},{key:"selectNode",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb=this,kb,kc,Mc=arguments;return regeneratorRuntime.wrap(function(Gc){for(;;)switch(Gc.prev=Gc.next){case 0:return kb=1<Mc.length&&void 0!==Mc[1]?Mc[1]:!0,this._selectedNode=Ia,kc=this.treeData.parentNode(Ia),Gc.next=5,Promise.all(this.treeData.getChildren(kc).map(function(Xc){if(Xc!==Ia&&!fb.treeData.isCollapsed(Xc))return fb.treeData.collapse(Xc,
!0);if(Xc===Ia)return fb.treeData.collapse(Xc,!1)}));case 5:return Gc.next=7,this.refresh(kb);case 7:pc.signal(this,"selectionChange",this.getExpandedPath());case 8:case "end":return Gc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"getExpandedPath",value:function(){var Q=this.treeData;if(!Q)return[];for(var nb=Q.getChildren(Q.root),Ia=[Q.root];nb=nb&&nb.find(function(lb){return!Q.isCollapsed(lb)});)Ia.push(nb),nb=Q.getChildren(nb);return Ia}},{key:"setExpandedPath",
value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc,Gc,Xc=arguments;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:return lb=0<Xc.length&&void 0!==Xc[0]?Xc[0]:function(he){return he===this.treeData.root}.bind(this),fb=1<Xc.length&&void 0!==Xc[1]?Xc[1]:this.treeData.root,kb=2<Xc.length&&void 0!==Xc[2]?Xc[2]:!0,kc=this.treeData,Mc=this.getExpandedPath(),Gc=Mc.slice(Mc.indexOf(fb)),ad.next=8,Promise.all(Gc.map(function(he){return kc.collapse(he,
!0)}));case 8:return ad.next=10,kc.uncollapseAll(lb,0,fb);case 10:return ad.next=12,this.refresh(kb);case 12:this.lists.forEach(function(he){return he.scrollSelectionIntoView()});case 13:case "end":return ad.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"newList",value:function(){var Q=pc.part(this.listMaster,{width:200});pc.connect(Q,"selection",this,"selectNode");return Q}},{key:"ensureLists",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb=
this,kb,kc,Mc,Gc,Xc,ad=arguments;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:kb=1<ad.length&&void 0!==ad[1]?ad[1]:!0;kc=this.lists;Gc=this.view;Xc=Ia-kc.length;if(!(0<Xc)){he.next=14;break}this.lists=kc=[].concat(vd(kc),vd(pc.arr.genN(Xc,function(){return fb.newList()})));he.next=9;return Gc.whenRendered();case 9:Gc.layout.renderViaCSS&&kc.map(function(we){return Gc.layout.expressMeasure(we)});Mc=pc.pt(Gc.scrollExtent.x-Gc.width);kb?Gc.animate({scroll:Mc,duration:200}):
Gc.scroll=Mc;he.next=24;break;case 14:if(!(0>Xc)){he.next=24;break}kc=kc.slice(0,Xc);Mc=pc.pt(pc.arr.last(kc).right-Gc.width);if(!kb){he.next=22;break}he.next=20;return Gc.animate({scroll:Mc,duration:200});case 20:he.next=23;break;case 22:Gc.scroll=Mc;case 23:this.lists=kc;case 24:return he.abrupt("return",kc);case 25:case "end":return he.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"relayout",value:function(){var Q=0,nb=this.view;nb.scrollExtent.x>nb.width+nb.scrollbarOffset.x&&
(Q=5);this.lists.forEach(function(Ia){Ia.height=nb.height-Q-1;var lb=Ia._managedNode&&Ia._managedNode.listControl;lb&&(lb.bottomRight=Ia.innerBounds().bottomRight().subXY(5,0))})}},{key:"onHoverOut",value:function(Q){this.lists.forEach(function(nb){if(nb=nb._managedNode&&nb._managedNode.listControl)nb.visible=!1})}},{key:"onKeyDown",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb=this,kb,kc,Mc,Gc,Xc,ad,he,we,$e,Qe;return regeneratorRuntime.wrap(function(dg){for(;;)switch(dg.prev=
dg.next){case 0:if((kb=this.view.getWindow())&&kb.isActive()&&!kb.isFaderActive()){dg.next=3;break}return dg.abrupt("return");case 3:return dg.next=5,this.refresh(!1);case 5:if(kc=this.lists.find(function(Cf){return Cf.fullContainsWorldPoint($world.firstHand.position)})){dg.next=8;break}return dg.abrupt("return");case 8:kc.items.forEach(function(Cf){Cf.originalLabel&&(Cf.label=Cf.originalLabel.filter(function(Fh){return!0}))});if(!Ia.hasCharacterPressed){dg.next=13;break}Mc=Ia.key;dg.next=25;break;
case 13:if("Space"!==Ia.key){dg.next=17;break}Mc=" ";dg.next=25;break;case 17:if("Backspace"!==Ia.key){dg.next=22;break}Mc="";this.searchString=this.searchString.slice(0,-1);dg.next=25;break;case 22:return this.lists.forEach(function(Cf){return Cf.scrollSelectionIntoView()}),this.searchString="",dg.abrupt("return");case 25:this.searchString||(this.searchString="");this.searchString+=Mc.toLowerCase();kc.items.forEach(function(Cf,Fh){Cf.normalizedIndex=Fh});Xc=kc.items.filter(function(Cf){Gc=2<Cf.label.length?
2:0;return Cf.string.toLowerCase().includes(fb.searchString)});ad=sb(Xc);try{for(ad.s();!(he=ad.n()).done;)we=he.value,Gc=2<we.label.length?2:0,$e=we.label[Gc].toLowerCase().indexOf(this.searchString),Qe=we.label,we.originalLabel=we.label.filter(function(Cf){return!0}),Qe.splice(Gc,1,we.label[Gc].slice(0,$e),we.label[Gc+1],we.label[Gc].slice($e,$e+this.searchString.length),{fontStyle:we.label[Gc+1]?we.label[Gc+1].fontStyle:"normal",backgroundColor:pc.Color.orange},we.label[Gc].slice($e+this.searchString.length)),
we.label=Qe}catch(Cf){ad.e(Cf)}finally{ad.f()}kc.items=Xc;case 32:case "end":return dg.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"onMouseMove",value:function(Q){var nb=this.lists.find(function(Ia){return Ia.fullContainsWorldPoint(Q.position)});nb&&(nb.focus(),this.lists.forEach(function(Ia){var lb=Ia._managedNode&&Ia._managedNode.listControl;lb&&(lb.visible=Ia===nb)}))}},{key:"onMouseDown",value:function(Q){Q.targetMorph.isListItemMorph&&this.clickOnItem(Q)}},
{key:"clickOnItem",value:function(Q){var nb=this;if(this.searchString){var Ia=Q.targetMorph.owner.owner,lb=Ia.items.find(function(fb){return fb.string===Q.targetMorph.textString});this.refresh().then(function(){Ia.selectedIndex=lb.normalizedIndex;Ia.items.forEach(function(fb){return fb.normalizedIndex=null});nb.searchString=null;Ia.scrollSelectionIntoView()})}}},{key:"keybindings",get:function(){return[{keys:"Left",command:"select previous entry of last list"},{keys:"Right",command:"select first entry of next list"}]}},
{key:"commands",get:function(){var Q=this;return[{name:"select previous entry of last list",exec:function(){if(!Q.listNavigationProhibited){var nb=Q.treeData.parentNode(Q._selectedNode);Q.selectNode(nb)}}},{name:"select first entry of next list",exec:function(){if(!Q.listNavigationProhibited){var nb=Q._selectedNode;(nb=nb.subNodes&&nb.subNodes[0])&&Q.selectNode(nb)}}}]}},{key:"refresh",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb=this,fb,kb,kc,Mc,Gc,Xc,ad,he=arguments;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=
we.next){case 0:fb=0<he.length&&void 0!==he[0]?he[0]:!0;if(kb=this.treeData){we.next=4;break}return we.abrupt("return");case 4:return kc=this.getExpandedPath(),Gc=pc.arr.last(kc),kb.isLeaf(Gc)&&Gc!==kb.root&&(Mc=pc.arr.last(kc),kc=kc.slice(0,-1)),we.next=9,this.ensureLists(kc.length,fb);case 9:Xc=we.sent,kc.forEach(function($e){!kb.isCollapsed($e)&&ad&&pc.noUpdate(function(){ad.selection=$e;ad.focus()});ad=Xc.shift();pc.noUpdate(function(){return ad.selection=!1});var Qe=ad.itemScroll;if(ad._managedNode===
$e){ad.itemScroll=Qe;Qe=ad.items;var dg=kb.getChildren($e);dg.length===Qe.length?pc.arr.zip(Qe,dg).forEach(function(Cf){var Fh=Xb(Cf,2);Cf=Fh[0];if(Fh=Fh[1])Cf.value=Fh,Cf.value.isDirty&&(Cf.value.isDirty=!1,Cf.label=kb.display(Cf.value))}):ad._managedNode=null}ad._managedNode!==$e&&(ad.items=kb.getChildren($e).map(function(Cf){return{isListItem:!0,label:kb.display(Cf),value:Cf,tooltip:lb.defaultTooltips?Cf.name:Cf.tooltip||!1}}),ad._managedNode=$e);$e.listControl&&(ad.submorphs=ad.submorphs.slice(0,
2).concat([$e.listControl]))}),Mc&&pc.noUpdate(function(){ad.selection=Mc;ad.focus()}),this.relayout();case 13:case "end":return we.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MullerColumnViewModel"}},{key:"properties",get:function(){return{defaultTooltips:{},treeData:{},listMaster:{isComponent:!0,defaultValue:pc.DefaultList,set:function(Q){this.setProperty("listMaster",Q);this.refresh(!1)}},lists:{derived:!0,
get:function(){return this.view.submorphs},set:function(Q){this.view.submorphs=Q.map(function(nb){nb.epiMorph=!0;return nb})}},expose:{get:function(){return"listMaster treeData setTreeData isSelected selectNode getExpandedPath refresh keybindings commands reset setExpandedPath listNavigationProhibited lists".split(" ")}},bindings:{get:function(){return[{signal:"extent",handler:"relayout"},{signal:"onMouseMove",handler:"onMouseMove"},{signal:"onHoverOut",handler:"onHoverOut"},{signal:"onKeyDown",handler:"onKeyDown"},
{signal:"onMouseDown",handler:"onMouseDown"}]}}}}}],ja,{pathInPackage:function(){return"./muller-columns.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:949,end:14255})}(pc.ViewModel);pc.MullerColumnViewModel=zd;pc.MullerColumnViewModel=zd;pc.MullerColumnView=pc.component["for"](function(){return pc.component({defaultViewModel:pc.MullerColumnViewModel,
name:"muller column view",borderColor:pc.Color.rgb(23,160,251),clipMode:"auto",extent:pc.pt(565.1,285.2),layout:new pc.HorizontalLayout({align:"top",autoResize:!1,direction:"leftToRight",orderByIndex:!0,padding:{height:0,width:0,x:0,y:0},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1}),position:pc.pt(875,1268),renderOnGPU:!0})},{module:"lively.components/muller-columns.cp.js","export":"MullerColumnView",range:{start:14297,end:14839}},pc.MullerColumnView);var Pd=Lc("M",pc.MullerColumnView),
bd=Lc("C",pc.ColumnListDefault),Yd=pc.ColumnListDark;pc.MullerColumnView=Pd;pc.ColumnListDefault=bd;pc.ColumnListDark=Yd;var le=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/tree.js");le.listEditableFilesInDir=function(J){return Ob.apply(this,arguments)};le.transformJSONNode=yc;le.listJSONScope=function(J){return Ta.apply(this,arguments)};le.resource=Nb;le.parse=bc;var Be="md js json css less html mjs cjs".split(" ");le.editableFiles=Be;le.editableFiles=Be;var Ne=window.lively.FreezerRuntime.recorderFor("lively.ide/json/checker.js");
Ne.Range=hb;Ne.warnStyle={"border-bottom":"2px dotted orange"};Ne.errorStyle={"background-color":"red"};var Re=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/json/checker.js"),Rb=ja.hasOwnProperty("JSONChecker")&&"function"===typeof ja.JSONChecker?ja.JSONChecker:ja.JSONChecker=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"uninstall",value:function(Q){var nb=
Q.text||Q;(nb.markers||[]).forEach(function(Ia){return Ia.id.startsWith("js-checker-")&&nb.removeMarker(Ia)});nb.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(Q,nb){return vd(Q.embeddedMorphMap.values()).find(function(Ia){return nb.containsPosition(Ia.anchor.position)})}},{key:"onDocumentChange",value:function(Q,nb,Ia){try{JSON.parse(nb.textString),nb.removeMarker("js-syntax-error")}catch(fb){if(!(fb instanceof SyntaxError))throw fb;var lb;Q=fb.message.match(/position ([0-9]+)/)||
[];Q=Xb(Q,2);Q[0];(Q=Q[1])&&!isNaN(Number(Q))&&(lb=nb.indexToPosition(Number(Q)));lb||(Q=fb.message.match(/line ([0-9]+)/)||[],Q=Xb(Q,2),Q[0],Q=Q[1],Ia=fb.message.match(/column ([0-9]+)/)||[],Ia=Xb(Ia,2),Ia[0],Ia=Ia[1],isNaN(Number(Q))||(lb={row:Number(Q)-1,column:Number(Ia)}));lb||(Ia=fb.column,Q=fb.line,"number"===typeof Q&&(lb={row:Q-1,column:Ia}));!lb||isNaN(lb.row)||isNaN(lb.column)||(lb=new Ne.Range({start:{column:lb.column-1,row:lb.row},end:{column:lb.column+1,row:lb.row}}),this.hasEmbeddedMorphInRange(nb,
lb)||nb.addMarker({id:"js-syntax-error",range:lb,style:Ne.errorStyle,type:"js-syntax-error"}))}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JSONChecker"}}],ja,{pathInPackage:function(){return"./json/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:183,end:2029})}(void 0);Ne["default"]=Re;var nf=window.lively.FreezerRuntime.recorderFor("lively.ide/json/completers.js");
nf.doNewNPMSearch=function(J){return Bd.apply(this,arguments)};nf.resource=Nb;nf.Path=cb;var af=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/json/completers.js"),Rb=ja.hasOwnProperty("PackageJSONCompleter")&&"function"===typeof ja.PackageJSONCompleter?ja.PackageJSONCompleter:ja.PackageJSONCompleter=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"isValidPrefix",
value:function(Q){return!!Q}},{key:"compute",value:function(){var Q=ic(regeneratorRuntime.mark(function fb(Ia,lb){var kb,kc;return regeneratorRuntime.wrap(function(Mc){for(;;)switch(Mc.prev=Mc.next){case 0:Ia.editorPlugin.parse();if(kb=!!Ia.editorPlugin.tokenAt(Ia.cursorPosition).find(function(Gc){return["dependencies","devDependencies"].includes(nf.Path("key.value").get(Gc))})){Mc.next=4;break}return Mc.abrupt("return",[]);case 4:return Mc.next=6,nf.doNewNPMSearch(lb);case 6:return kc=Mc.sent,Mc.abrupt("return",
kc.map(function(Gc){Gc=Gc.string.split("@");Gc=Xb(Gc,2);var Xc=Gc[0],ad=Gc[1];return{info:"@".concat(ad),completion:Xc,customInsertionFn:function(he,we,$e,Qe){Qe.start;Qe.end;$e.replace($e.lineRange(),'"'.concat(Xc,'": "').concat(ad,'"'))}}}));case 8:case "end":return Mc.stop()}},fb)}));return function(Ia,lb){return Q.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PackageJSONCompleter"}}],ja,{pathInPackage:function(){return"./json/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:88,end:850})}(void 0);nf.PackageJSONCompleter=af;nf.PackageJSONCompleter=af;var yf=window.lively.FreezerRuntime.recorderFor("lively.ide/json/editor-plugin.js");yf.JavaScriptEditorPlugin=jb;yf.JSONChecker=Re;yf.getMode=E;yf.query=Hb;yf.PackageJSONCompleter=af;var Ig=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/json/editor-plugin.js"),
Rb=ja.hasOwnProperty("JSONEditorPlugin")&&"function"===typeof ja.JSONEditorPlugin?ja.JSONEditorPlugin:ja.JSONEditorPlugin=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){Fd._get(Object.getPrototypeOf(Rb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.checker=new yf.JSONChecker}},{key:"parse",
value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(this._ast&&this._ast._astType===Q)return this._ast;var nb=this.parser,Ia=this.textMorph.textString;if(!nb)return null;var lb={withComments:!0,allowReturnOutsideFunction:!0};Q&&(lb.type=Q);if(Ia.startsWith("#!")){var fb=Ia.indexOf("\n");Ia=" ".repeat(fb)+Ia.slice(fb)}Ia="(".concat(Ia,")");nb=nb.fuzzyParse(Ia,lb);nb._astType=Q;return this._ast=nb}},{key:"tokenAt",value:function(Q){return yf.query.nodesAt(this.textMorph.positionToIndex(Q)-
1,this._ast)}},{key:"isJSONEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"json"}},{key:"longName",get:function(){return"json"}},{key:"codeMirrorMode",value:function(Q){Q=this.defaultCodeMirrorModeConfig(Q);return yf.getMode(Q,{name:"javascript",json:!0})}},{key:"getCompleters",value:function(Q){return[].concat(vd(Fd._get(Object.getPrototypeOf(Rb.prototype),"getCompleters",this).call(this,Q)),[new yf.PackageJSONCompleter])}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"JSONEditorPlugin"}}],ja,{pathInPackage:function(){return"./json/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:254,end:1666})}(yf.JavaScriptEditorPlugin);yf["default"]=Ig;var re=window.lively.FreezerRuntime.recorderFor("lively.ide/jsx/mode.js");re.Context=function(J,ja,Rb,Q){this.state=J;this.mode=
ja;this.depth=Rb;this.prev=Q};re.copyContext=Eb;re.passIndent=Wb;re.defineMode=R;re.defineMIME=xb;re.registerHelper=Ja;re.startState=Ga;re.copyState=sa;re.getMode=E;re.defineMode("jsx",function(J,ja){function Rb(fb){var kb=fb.tagName;fb.tagName=null;var kc=Ia.indent(fb,"","");fb.tagName=kb;return kc}function Q(fb,kb){if(kb.context.mode==Ia)return nb(fb,kb,kb.context);var kc=kb.context;if("<"==fb.peek()&&lb.expressionAllowed(fb,kc.state))lb.skipExpression(kc.state),kb.context=new re.Context(re.startState(Ia,
lb.indent(kc.state,"","")),Ia,0,kb.context),kb=null;else{var Mc=lb.token(fb,kc.state);Mc||null==kc.depth||(fb=fb.current(),"{"==fb?kc.depth++:"}"==fb&&0==--kc.depth&&(kb.context=kb.context.prev));kb=Mc}return kb}function nb(fb,kb,kc){if(2==kc.depth)return fb.match(/^.*?\*\//)?kc.depth=1:fb.skipToEnd(),"comment";if("{"==fb.peek()){Ia.skipAttribute(kc.state);var Mc=Rb(kc.state),Gc=kc.state.context;if(Gc&&fb.match(/^[^>]*>\s*$/,!1)){for(;Gc.prev&&!Gc.startOfLine;)Gc=Gc.prev;Gc.startOfLine?Mc-=J.indentUnit:
kc.prev.state.lexical&&(Mc=kc.prev.state.lexical.indented)}else 1==kc.depth&&(Mc+=J.indentUnit);kb.context=new re.Context(re.startState(lb,Mc),lb,0,kb.context);return null}if(1==kc.depth){if("<"==fb.peek())return Ia.skipAttribute(kc.state),kb.context=new re.Context(re.startState(Ia,Rb(kc.state)),Ia,0,kb.context),null;if(fb.match("//"))return fb.skipToEnd(),"comment";if(fb.match("/*"))return kc.depth=2,Q(fb,kb)}Mc=Ia.token(fb,kc.state);Gc=fb.current();var Xc;/\btag\b/.test(Mc)?/>$/.test(Gc)?kc.state.context?
kc.depth=0:kb.context=kb.context.prev:/^</.test(Gc)&&(kc.depth=1):!Mc&&-1<(Xc=Gc.indexOf("{"))&&fb.backUp(Gc.length-Xc);return Mc}var Ia=re.getMode(J,{name:"xml",allowMissing:!0,multilineTagIndentPastTag:!1,allowMissingTagName:!0}),lb=re.getMode(J,"javascript");return{startState:function(){return{context:new re.Context(re.startState(lb),lb)}},copyState:function(fb){return{context:re.copyContext(fb.context)}},token:Q,indent:function(fb,kb,kc){return fb.context.mode.indent(fb.context.state,kb,kc)},
innerMode:function(fb){return fb.context}}},"xml","javascript");re.defineMIME("text/jsx","jsx");re.defineMIME("text/typescript-jsx",{name:"jsx",base:{name:"javascript",typescript:!0}});var Ld=window.lively.FreezerRuntime.recorderFor("lively.ide/jsx/editor-plugin.js");Ld.JavaScriptEditorPlugin=jb;Ld.es5Transpilation=ec;var fc=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/jsx/editor-plugin.js"),Rb=ja.hasOwnProperty("JSXEditorPlugin")&&"function"===typeof ja.JSXEditorPlugin?
ja.JSXEditorPlugin:ja.JSXEditorPlugin=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"shortName",get:function(){return"jsx"}},{key:"longName",get:function(){return"jsx"}},{key:"runEval",value:function(Q,nb){nb=this.sanatizedJsEnv(nb);return this.systemInterface(nb).runEval(Ld.es5Transpilation(Q),Object.assign({},nb,{format:"es6"}))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JSXEditorPlugin"}}],
ja,{pathInPackage:function(){return"./jsx/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:183,end:565})}(Ld.JavaScriptEditorPlugin);Ld["default"]=fc;var wd=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/commands.js");wd.isMarkdown=function(J){return"md"===J.type};wd.browserCommands=fe;wd.arr=nd;wd.Icon=
ub;wd.interactivelyFreezeModule=qb;wd["default"]=fe;var Ie={Aacute:"\u00c1",aacute:"\u00e1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\u00c2",acirc:"\u00e2",acute:"\u00b4",Acy:"\u0410",acy:"\u0430",AElig:"\u00c6",aelig:"\u00e6",af:"\u2061",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"\u00c0",agrave:"\u00e0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",amp:"&",AMP:"&",andand:"\u2a55",And:"\u2a53",
and:"\u2227",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angmsd:"\u2221",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\u00c5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",apacir:"\u2a6f",ap:"\u2248",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",
ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\u00c5",aring:"\u00e5",Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\u00c3",atilde:"\u00e3",Auml:"\u00c4",auml:"\u00e4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",
bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",
bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250c",boxdR:"\u2552",boxDr:"\u2553",
boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252c",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxul:"\u2518",boxuL:"\u255b",boxUl:"\u255c",boxUL:"\u255d",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255a",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253c",boxvH:"\u256a",boxVh:"\u256b",boxVH:"\u256c",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251c",boxvR:"\u255e",
boxVr:"\u255f",boxVR:"\u2560",bprime:"\u2035",breve:"\u02d8",Breve:"\u02d8",brvbar:"\u00a6",bscr:"\ud835\udcb7",Bscr:"\u212c",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsolb:"\u29c5",bsol:"\\",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",cap:"\u2229",Cap:"\u22d2",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",
caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\u00c7",ccedil:"\u00e7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\u00b8",Cedilla:"\u00b8",cemptyv:"\u29b2",cent:"\u00a2",centerdot:"\u00b7",CenterDot:"\u00b7",cfr:"\ud835\udd20",Cfr:"\u212d",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",
circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\u00ae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25cb",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",
commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",conint:"\u222e",Conint:"\u222f",ContourIntegral:"\u222e",copf:"\ud835\udd54",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\u00a9",COPY:"\u00a9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",cross:"\u2717",Cross:"\u2a2f",Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",
cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",cupbrcap:"\u2a48",cupcap:"\u2a46",CupCap:"\u224d",cup:"\u222a",Cup:"\u22d3",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\u00a4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",dagger:"\u2020",Dagger:"\u2021",
daleth:"\u2138",darr:"\u2193",Darr:"\u21a1",dArr:"\u21d3",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21ca",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\u00b0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\u00b4",DiacriticalDot:"\u02d9",
DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",diamond:"\u22c4",Diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\u00a8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\u00f7",divide:"\u00f7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"\u00a8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",
dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\u00a8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",
Downarrow:"\u21d3",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21bd",DownRightTeeVector:"\u295f",DownRightVectorBar:"\u2957",DownRightVector:"\u21c1",DownTeeArrow:"\u21a7",DownTee:"\u22a4",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",
dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\u00c9",eacute:"\u00e9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",Ecirc:"\u00ca",ecirc:"\u00ea",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"\u2a9a",Egrave:"\u00c8",egrave:"\u00e8",egs:"\u2a96",egsdot:"\u2a98",
el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",
eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",escr:"\u212f",Escr:"\u2130",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\u00d0",eth:"\u00f0",Euml:"\u00cb",euml:"\u00eb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",
fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",forall:"\u2200",ForAll:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\u00bd",frac13:"\u2153",frac14:"\u00bc",frac15:"\u2155",frac16:"\u2159",
frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\u00be",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",fscr:"\ud835\udcbb",Fscr:"\u2131",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",
geqq:"\u2267",geqslant:"\u2a7e",gescc:"\u2aa9",ges:"\u2a7e",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",gg:"\u226b",Gg:"\u22d9",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2aa5",gl:"\u2277",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gne:"\u2a88",gnE:"\u2269",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",
GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\ud835\udca2",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",gtcc:"\u2aa7",gtcir:"\u2a7a",gt:">",GT:">",Gt:"\u226b",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\u00bd",
hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",harrcir:"\u2948",harr:"\u2194",hArr:"\u21d4",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",hfr:"\ud835\udd25",Hfr:"\u210c",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",hopf:"\ud835\udd59",Hopf:"\u210d",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\ud835\udcbd",Hscr:"\u210b",
hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\u00cd",iacute:"\u00ed",ic:"\u2063",Icirc:"\u00ce",icirc:"\u00ee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\u00a1",iff:"\u21d4",ifr:"\ud835\udd26",Ifr:"\u2111",Igrave:"\u00cc",igrave:"\u00ec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",
ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",incare:"\u2105","in":"\u2208",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",intcal:"\u22ba","int":"\u222b",Int:"\u222c",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",
Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\u00bf",iscr:"\ud835\udcbe",Iscr:"\u2110",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\u00cf",iuml:"\u00ef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"\u0237",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"\u0408",jsercy:"\u0458",
Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",lang:"\u27e8",Lang:"\u27ea",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",
Laplacetrf:"\u2112",laquo:"\u00ab",larrb:"\u21e4",larrbfs:"\u291f",larr:"\u2190",Larr:"\u219e",lArr:"\u21d0",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",latail:"\u2919",lAtail:"\u291b",lat:"\u2aab",late:"\u2aad",lates:"\u2aad\ufe00",lbarr:"\u290c",lBarr:"\u290e",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",
lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27e8",LeftArrowBar:"\u21e4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21d0",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21c3",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",
leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTeeArrow:"\u21a4",LeftTee:"\u22a3",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangleBar:"\u29cf",LeftTriangle:"\u22b2",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21bf",LeftVectorBar:"\u2952",LeftVector:"\u21bc",lEg:"\u2a8b",leg:"\u22da",
leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",lescc:"\u2aa8",les:"\u2a7d",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",
lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21c7",ll:"\u226a",Ll:"\u22d8",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoustache:"\u23b0",lmoust:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lne:"\u2a87",lnE:"\u2268",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",longleftarrow:"\u27f5",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftrightarrow:"\u27f7",
LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longmapsto:"\u27fc",longrightarrow:"\u27f6",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",
lrtri:"\u22bf",lsaquo:"\u2039",lscr:"\ud835\udcc1",Lscr:"\u2112",lsh:"\u21b0",Lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2aa6",ltcir:"\u2a79",lt:"<",LT:"<",Lt:"\u226a",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\u00af",male:"\u2642",
malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"\u2127",micro:"\u00b5",midast:"*",midcir:"\u2af0",mid:"\u2223",middot:"\u00b7",minusb:"\u229f",minus:"\u2212",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",
mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\ud835\udd44",mopf:"\ud835\udd5e",mp:"\u2213",mscr:"\ud835\udcc2",Mscr:"\u2133",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266e",naturals:"\u2115",natur:"\u266e",nbsp:"\u00a0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",
Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21d7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\ud835\udd11",
nfr:"\ud835\udd2b",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nharr:"\u21ae",nhArr:"\u21ce",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlarr:"\u219a",nlArr:"\u21cd",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219a",nLeftarrow:"\u21cd",nleftrightarrow:"\u21ae",nLeftrightarrow:"\u21ce",
nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\u00a0",nopf:"\ud835\udd5f",Nopf:"\u2115",Not:"\u2aec",not:"\u00ac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",
NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangle:"\u22ea",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",
NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangle:"\u22eb",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",
NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",nprec:"\u2280",
npreceq:"\u2aaf\u0338",npre:"\u2aaf\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219b",nrArr:"\u21cf",nrarrw:"\u219d\u0338",nrightarrow:"\u219b",nRightarrow:"\u21cf",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",
nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\u00d1",ntilde:"\u00f1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nvdash:"\u22ac",nvDash:"\u22ad",nVdash:"\u22ae",nVDash:"\u22af",
nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21d6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\u00d3",oacute:"\u00f3",oast:"\u229b",Ocirc:"\u00d4",ocirc:"\u00f4",ocir:"\u229a",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",
oelig:"\u0153",ofcir:"\u29bf",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",ogon:"\u02db",Ograve:"\u00d2",ograve:"\u00f2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",
orarr:"\u21bb",Or:"\u2a54",or:"\u2228",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\u00aa",ordm:"\u00ba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\ud835\udcaa",oscr:"\u2134",Oslash:"\u00d8",oslash:"\u00f8",osol:"\u2298",Otilde:"\u00d5",otilde:"\u00f5",otimesas:"\u2a36",Otimes:"\u2a37",otimes:"\u2297",Ouml:"\u00d6",ouml:"\u00f6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",para:"\u00b6",parallel:"\u2225",
par:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plus:"+",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\u00b1",
plusmn:"\u00b1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\u00b1",Poincareplane:"\u210c",pointint:"\u2a15",popf:"\ud835\udd61",Popf:"\u2119",pound:"\u00a3",prap:"\u2ab7",Pr:"\u2abb",pr:"\u227a",prcue:"\u227c",precapprox:"\u2ab7",prec:"\u227a",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",pre:"\u2aaf",prE:"\u2ab3",precsim:"\u227e",prime:"\u2032",Prime:"\u2033",primes:"\u2119",
prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportional:"\u221d",Proportion:"\u2237",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"\u2a0c",qopf:"\ud835\udd62",Qopf:"\u211a",qprime:"\u2057",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"\u210d",quatint:"\u2a16",quest:"?",
questeq:"\u225f",quot:'"',QUOT:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",rang:"\u27e9",Rang:"\u27eb",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\u00bb",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21a0",rArr:"\u21d2",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",ratail:"\u291a",rAtail:"\u291c",ratio:"\u2236",
rationals:"\u211a",rbarr:"\u290d",rBarr:"\u290f",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",Re:"\u211c",rect:"\u25ad",reg:"\u00ae",REG:"\u00ae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",
ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",rfr:"\ud835\udd2f",Rfr:"\u211c",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrowBar:"\u21e5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21d2",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVectorBar:"\u2955",RightDownVector:"\u21c2",RightFloor:"\u230b",
rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTeeArrow:"\u21a6",RightTee:"\u22a2",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangleBar:"\u29d0",RightTriangle:"\u22b3",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVectorBar:"\u2954",RightUpVector:"\u21be",RightVectorBar:"\u2953",RightVector:"\u21c0",ring:"\u02da",risingdotseq:"\u2253",
rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoustache:"\u23b1",rmoust:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",ropf:"\ud835\udd63",Ropf:"\u211d",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",rscr:"\ud835\udcc7",Rscr:"\u211b",rsh:"\u21b1",Rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",
rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2abc",sc:"\u227b",sccue:"\u227d",sce:"\u2ab0",scE:"\u2ab4",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdotb:"\u22a1",sdot:"\u22c5",sdote:"\u2a66",searhk:"\u2925",searr:"\u2198",seArr:"\u21d8",searrow:"\u2198",sect:"\u00a7",
semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\ud835\udd16",sfr:"\ud835\udd30",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\u00ad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",
simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",solbar:"\u233f",solb:"\u29c4",sol:"/",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",
sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25a1",Square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squ:"\u25a1",squf:"\u25aa",srarr:"\u2192",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",
straightphi:"\u03d5",strns:"\u00af",sub:"\u2282",Sub:"\u22d0",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",subset:"\u2282",Subset:"\u22d0",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succapprox:"\u2ab8",succ:"\u227b",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",
SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",sum:"\u2211",Sum:"\u2211",sung:"\u266a",sup1:"\u00b9",sup2:"\u00b2",sup3:"\u00b3",sup:"\u2283",Sup:"\u22d1",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",supset:"\u2283",Supset:"\u22d1",
supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21d9",swarrow:"\u2199",swnwar:"\u292a",szlig:"\u00df",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",
theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\u00de",thorn:"\u00fe",tilde:"\u02dc",Tilde:"\u223c",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2a31",timesb:"\u22a0",times:"\u00d7",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",topbot:"\u2336",topcir:"\u2af1",top:"\u22a4",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"\u2ada",tosa:"\u2929",
tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",
twoheadrightarrow:"\u21a0",Uacute:"\u00da",uacute:"\u00fa",uarr:"\u2191",Uarr:"\u219f",uArr:"\u21d1",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\u00db",ucirc:"\u00fb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"\u00d9",ugrave:"\u00f9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",
Umacr:"\u016a",umacr:"\u016b",uml:"\u00a8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21d1",UpArrowDownArrow:"\u21c5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21d5",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",
upsi:"\u03c5",Upsi:"\u03d2",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTeeArrow:"\u21a5",UpTee:"\u22a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\ud835\udcb0",uscr:"\ud835\udcca",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\u00dc",uuml:"\u00fc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",
varpropto:"\u221d",varr:"\u2195",vArr:"\u21d5",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",vBar:"\u2ae8",Vbar:"\u2aeb",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22a2",vDash:"\u22a8",Vdash:"\u22a9",VDash:"\u22ab",Vdashl:"\u2ae6",veebar:"\u22bb",vee:"\u2228",Vee:"\u22c1",veeeq:"\u225a",vellip:"\u22ee",verbar:"|",Verbar:"\u2016",
vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",
wedge:"\u2227",Wedge:"\u22c0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",wopf:"\ud835\udd68",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xharr:"\u27f7",xhArr:"\u27fa",Xi:"\u039e",xi:"\u03be",xlarr:"\u27f5",xlArr:"\u27f8",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"\u2a01",xotime:"\u2a02",
xrarr:"\u27f6",xrArr:"\u27f9",Xscr:"\ud835\udcb3",xscr:"\ud835\udccd",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\u00dd",yacute:"\u00fd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\u00a5",Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"\u0407",yicy:"\u0457",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"\u042e",yucy:"\u044e",yuml:"\u00ff",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017a",
Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",zfr:"\ud835\udd37",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",zopf:"\ud835\udd6b",Zopf:"\u2124",Zscr:"\ud835\udcb5",zscr:"\ud835\udccf",zwj:"\u200d",zwnj:"\u200c"},ff=Object.freeze({__proto__:null,"default":Ie}),Pe={},Gf=Pe=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,
Vf=Object.freeze({__proto__:null,"default":Gf}),cd={},Y={};Od.defaultChars=";/?:@&=+$,-_.!~*'()#";Od.componentChars="-_.!~*'()";var Ba=cd=Od,mb={},Ca={};Qc.defaultChars=";/?:@&=+$,#";Qc.componentChars="";var Cc=mb=Qc,Fc={},ud=/^([a-z0-9.+-]+:)/i,ke=/:[0-9]*$/,ze=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,xe="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),qd=["'"].concat(xe),We=["%","/","?",";","#"].concat(qd),of=["/","?","#"],Ef=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,na={javascript:!0,
"javascript:":!0},Hc={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Xd.prototype.parse=function(J,ja){var Rb,Q;var nb=J.trim();if(!ja&&1===J.split("#").length&&(J=ze.exec(nb)))return this.pathname=J[1],J[2]&&(this.search=J[2]),this;if(J=ud.exec(nb)){J=J[0];var Ia=J.toLowerCase();this.protocol=J;nb=nb.substr(J.length)}if(ja||J||nb.match(/^\/\/[^@\/]+@[^@\/]+/))!(Q="//"===nb.substr(0,2))||J&&na[J]||(nb=nb.substr(2),this.slashes=!0);if(!na[J]&&(Q||
J&&!Hc[J])){Q=-1;for(ja=0;ja<of.length;ja++)J=nb.indexOf(of[ja]),-1!==J&&(-1===Q||J<Q)&&(Q=J);Q=-1===Q?nb.lastIndexOf("@"):nb.lastIndexOf("@",Q);-1!==Q&&(ja=nb.slice(0,Q),nb=nb.slice(Q+1),this.auth=ja);Q=-1;for(ja=0;ja<We.length;ja++)J=nb.indexOf(We[ja]),-1!==J&&(-1===Q||J<Q)&&(Q=J);-1===Q&&(Q=nb.length);":"===nb[Q-1]&&Q--;ja=nb.slice(0,Q);nb=nb.slice(Q);this.parseHost(ja);this.hostname=this.hostname||"";Q="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Q){var lb=this.hostname.split(/\./);
ja=0;for(Rb=lb.length;ja<Rb;ja++)if((J=lb[ja])&&!J.match(Ef)){for(var fb="",kb=0,kc=J.length;kb<kc;kb++)fb=127<J.charCodeAt(kb)?fb+"x":fb+J[kb];if(!fb.match(Ef)){Rb=lb.slice(0,ja);ja=lb.slice(ja+1);if(J=J.match(v))Rb.push(J[1]),ja.unshift(J[2]);ja.length&&(nb=ja.join(".")+nb);this.hostname=Rb.join(".");break}}}255<this.hostname.length&&(this.hostname="");Q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}ja=nb.indexOf("#");-1!==ja&&(this.hash=nb.substr(ja),nb=nb.slice(0,ja));ja=nb.indexOf("?");
-1!==ja&&(this.search=nb.substr(ja),nb=nb.slice(0,ja));nb&&(this.pathname=nb);Hc[Ia]&&this.hostname&&!this.pathname&&(this.pathname="");return this};Xd.prototype.parseHost=function(J){var ja=ke.exec(J);ja&&(ja=ja[0],":"!==ja&&(this.port=ja.substr(1)),J=J.substr(0,J.length-ja.length));J&&(this.hostname=J)};var Nc=Fc=function(J,ja){if(J&&J instanceof Xd)return J;var Rb=new Xd;Rb.parse(J,ja);return Rb},Ud={},ue=Ud=function(J){var ja=""+(J.protocol||"");ja+=J.slashes?"//":"";ja+=J.auth?J.auth+"@":"";
ja=J.hostname&&-1!==J.hostname.indexOf(":")?ja+("["+J.hostname+"]"):ja+(J.hostname||"");ja+=J.port?":"+J.port:"";ja+=J.pathname||"";ja+=J.search||"";return ja+=J.hash||""},bf={};bf.encode=Ba;bf.decode=Cc;bf.format=ue;bf.parse=Nc;var pf=Object.freeze({__proto__:null,"default":bf,decode:bf.decode,encode:bf.encode,format:bf.format,parse:bf.parse}),mg={},Zd=mg=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tg={},Sg=tg=
/[\0-\x1F\x7F-\x9F]/,oh={},Hf=oh=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Bh={},ah=Bh=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,th={};th.Any=Zd;th.Cc=Sg;th.Cf=Hf;th.P=Gf;th.Z=ah;var Xg=Object.freeze({__proto__:null,"default":th,Any:th.Any,Cc:th.Cc,Cf:th.Cf,P:th.P,Z:th.Z}),ti="default"in ff?Ie:ff,Af="default"in
pf?bf:pf,vh="default"in Xg?th:Xg,Md={},Bf=Object.prototype.hasOwnProperty,xg=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,df=new RegExp(xg.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),y=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,A=/[&<>"]/,H=/[&<>"]/g,Z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},M=/[.?*+^$[\]\\(){}|-]/g,qa="default"in Vf?Gf:Vf;Md.lib={};Md.lib.mdurl=Af;Md.lib.ucmicro=vh;Md.assign=function(J){Array.prototype.slice.call(arguments,1).forEach(function(ja){if(ja){if("object"!==
yb(ja))throw new TypeError(ja+"must be object");Object.keys(ja).forEach(function(Rb){J[Rb]=ja[Rb]})}});return J};Md.isString=function(J){return"[object String]"===Object.prototype.toString.call(J)};Md.has=oc;Md.unescapeMd=function(J){return 0>J.indexOf("\\")?J:J.replace(xg,"$1")};Md.unescapeAll=function(J){return 0>J.indexOf("\\")&&0>J.indexOf("&")?J:J.replace(df,function(ja,Rb,Q){if(Rb)return Rb;oc(ti,Q)?ja=ti[Q]:35===Q.charCodeAt(0)&&y.test(Q)&&(Rb="x"===Q[1].toLowerCase()?parseInt(Q.slice(2),16):
parseInt(Q.slice(1),10),rf(Rb)&&(ja=Dd(Rb)));return ja})};Md.isValidEntityCode=rf;Md.fromCodePoint=Dd;Md.escapeHtml=function(J){return A.test(J)?J.replace(H,ld):J};Md.arrayReplaceAt=function(J,ja,Rb){return[].concat(J.slice(0,ja),Rb,J.slice(ja+1))};Md.isSpace=function(J){switch(J){case 9:case 32:return!0}return!1};Md.isWhiteSpace=function(J){if(8192<=J&&8202>=J)return!0;switch(J){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1};Md.isMdAsciiPunct=
function(J){switch(J){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}};Md.isPunctChar=function(J){return qa.test(J)};Md.escapeRE=function(J){return J.replace(M,"\\$&")};Md.normalizeReference=function(J){J=J.trim().replace(/\s+/g," ");return J.toLowerCase().toUpperCase()};
Md.lib;Md.assign;Md.isString;Md.has;Md.unescapeMd;Md.unescapeAll;Md.isValidEntityCode;Md.fromCodePoint;Md.escapeHtml;Md.arrayReplaceAt;Md.isSpace;Md.isWhiteSpace;Md.isMdAsciiPunct;Md.isPunctChar;Md.escapeRE;Md.normalizeReference;var Pa={},Yb=Pa=function(J,ja,Rb){var Q=-1,nb=J.posMax,Ia=J.pos;J.pos=ja+1;for(ja=1;J.pos<nb;){var lb=J.src.charCodeAt(J.pos);if(93===lb&&(ja--,0===ja)){var fb=!0;break}var kb=J.pos;J.md.inline.skipToken(J);if(91===lb)if(kb===J.pos-1)ja++;else if(Rb)return J.pos=Ia,-1}fb&&
(Q=J.pos);J.pos=Ia;return Q},$b={},zc=Md.assign,id=Md.unescapeAll,jd=Md.escapeHtml,kd={code_inline:function(J,ja,Rb,Q,nb){return"<code"+nb.renderAttrs(J[ja])+">"+jd(J[ja].content)+"</code>"},code_block:function(J,ja,Rb,Q,nb){return"<pre"+nb.renderAttrs(J[ja])+"><code>"+jd(J[ja].content)+"</code></pre>\n"},fence:function(J,ja,Rb,Q,nb){ja=J[ja];var Ia=ja.info?id(ja.info).trim():"";Q=J="";Ia&&(Q=Ia.split(/(\s+)/g),J=Q[0],Q=Q.slice(2).join(""));Q=Rb.highlight?Rb.highlight(ja.content,J,Q)||jd(ja.content):
jd(ja.content);return 0===Q.indexOf("<pre")?Q+"\n":Ia?(Ia=ja.attrIndex("class"),ja=ja.attrs?ja.attrs.slice():[],0>Ia?ja.push(["class",Rb.langPrefix+J]):(ja[Ia]=ja[Ia].slice(),ja[Ia][1]+=" "+Rb.langPrefix+J),Rb={attrs:ja},"<pre><code"+nb.renderAttrs(Rb)+">"+Q+"</code></pre>\n"):"<pre><code"+nb.renderAttrs(ja)+">"+Q+"</code></pre>\n"},image:function(J,ja,Rb,Q,nb){var Ia=J[ja];Ia.attrs[Ia.attrIndex("alt")][1]=nb.renderInlineAsText(Ia.children,Rb,Q);return nb.renderToken(J,ja,Rb)},hardbreak:function(J,
ja,Rb){return Rb.xhtmlOut?"<br />\n":"<br>\n"},softbreak:function(J,ja,Rb){return Rb.breaks?Rb.xhtmlOut?"<br />\n":"<br>\n":"\n"},text:function(J,ja){return jd(J[ja].content)},html_block:function(J,ja){return J[ja].content},html_inline:function(J,ja){return J[ja].content}};Td.prototype.renderAttrs=function(J){var ja;if(!J.attrs)return"";var Rb="";var Q=0;for(ja=J.attrs.length;Q<ja;Q++)Rb+=" "+jd(J.attrs[Q][0])+'="'+jd(J.attrs[Q][1])+'"';return Rb};Td.prototype.renderToken=function(J,ja,Rb){var Q=
"",nb=!1,Ia=J[ja];if(Ia.hidden)return"";Ia.block&&-1!==Ia.nesting&&ja&&J[ja-1].hidden&&(Q+="\n");Q+=(-1===Ia.nesting?"</":"<")+Ia.tag;Q+=this.renderAttrs(Ia);0===Ia.nesting&&Rb.xhtmlOut&&(Q+=" /");Ia.block&&(nb=!0,1===Ia.nesting&&ja+1<J.length&&(J=J[ja+1],"inline"===J.type||J.hidden?nb=!1:-1===J.nesting&&J.tag===Ia.tag&&(nb=!1)));return Q+(nb?">\n":">")};Td.prototype.renderInline=function(J,ja,Rb){for(var Q,nb="",Ia=this.rules,lb=0,fb=J.length;lb<fb;lb++)Q=J[lb].type,nb="undefined"!==typeof Ia[Q]?
nb+Ia[Q](J,lb,ja,Rb,this):nb+this.renderToken(J,lb,ja);return nb};Td.prototype.renderInlineAsText=function(J,ja,Rb){for(var Q="",nb=0,Ia=J.length;nb<Ia;nb++)"text"===J[nb].type?Q+=J[nb].content:"image"===J[nb].type?Q+=this.renderInlineAsText(J[nb].children,ja,Rb):"softbreak"===J[nb].type&&(Q+="\n");return Q};Td.prototype.render=function(J,ja,Rb){var Q,nb="",Ia=this.rules;var lb=0;for(Q=J.length;lb<Q;lb++){var fb=J[lb].type;nb="inline"===fb?nb+this.renderInline(J[lb].children,ja,Rb):"undefined"!==
typeof Ia[fb]?nb+Ia[J[lb].type](J,lb,ja,Rb,this):nb+this.renderToken(J,lb,ja,Rb)}return nb};var be=$b=Td,te={};gb.prototype.attrIndex=function(J){var ja;if(!this.attrs)return-1;var Rb=this.attrs;var Q=0;for(ja=Rb.length;Q<ja;Q++)if(Rb[Q][0]===J)return Q;return-1};gb.prototype.attrPush=function(J){this.attrs?this.attrs.push(J):this.attrs=[J]};gb.prototype.attrSet=function(J,ja){var Rb=this.attrIndex(J);J=[J,ja];0>Rb?this.attrPush(J):this.attrs[Rb]=J};gb.prototype.attrGet=function(J){J=this.attrIndex(J);
var ja=null;0<=J&&(ja=this.attrs[J][1]);return ja};gb.prototype.attrJoin=function(J,ja){var Rb=this.attrIndex(J);0>Rb?this.attrPush([J,ja]):this.attrs[Rb][1]=this.attrs[Rb][1]+" "+ja};var Ce=te=gb,me={},ve=me="address article aside base basefont blockquote body caption center col colgroup dd details dialog dir div dl dt fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 head header hr html iframe legend li link main menu menuitem nav noframes ol optgroup option p param section source summary table tbody td tfoot th thead title tr track ul".split(" ");
var qg=/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\s\S]*?[?]>|<![A-Z]+\s+[^>]*>|<!\[CDATA\[[\s\S]*?\]\]>)/;var Eg={},Wf=Md.isWhiteSpace,$f=Md.isPunctChar,Lf=Md.isMdAsciiPunct;Vc.prototype.pushPending=function(){var J=new Ce("text","",0);J.content=this.pending;J.level=this.pendingLevel;this.tokens.push(J);this.pending="";return J};Vc.prototype.push=
function(J,ja,Rb){this.pending&&this.pushPending();J=new Ce(J,ja,Rb);ja=null;0>Rb&&(this.level--,this.delimiters=this._prev_delimiters.pop());J.level=this.level;0<Rb&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],ja={delimiters:this.delimiters});this.pendingLevel=this.level;this.tokens.push(J);this.tokens_meta.push(ja);return J};Vc.prototype.scanDelims=function(J,ja){var Rb=J,Q,nb,Ia=nb=!0;var lb=this.posMax;var fb=this.src.charCodeAt(J);for(Q=0<J?this.src.charCodeAt(J-
1):32;Rb<lb&&this.src.charCodeAt(Rb)===fb;)Rb++;J=Rb-J;fb=Rb<lb?this.src.charCodeAt(Rb):32;lb=Lf(Q)||$f(String.fromCharCode(Q));Rb=Lf(fb)||$f(String.fromCharCode(fb));Q=Wf(Q);(fb=Wf(fb))?nb=!1:Rb&&(Q||lb||(nb=!1));Q?Ia=!1:lb&&(fb||Rb||(Ia=!1));ja?(ja=nb,nb=Ia):(ja=nb&&(!Ia||lb),nb=Ia&&(!nb||Rb));return{can_open:ja,can_close:nb,length:J}};Vc.prototype.Token=Ce;var jf=Eg=Vc,wh=Object.freeze({__proto__:null,"default":Zd}),yg=Object.freeze({__proto__:null,"default":Sg}),Gg=Object.freeze({__proto__:null,
"default":ah}),zf="default"in wh?Zd:wh,Kh="default"in yg?Sg:yg,cg="default"in Gg?ah:Gg,Ag="default"in Vf?Gf:Vf,Uf={},Lh=Uf=function(J){var ja={};ja.src_Any=zf.source;ja.src_Cc=Kh.source;ja.src_Z=cg.source;ja.src_P=Ag.source;ja.src_ZPCc=[ja.src_Z,ja.src_P,ja.src_Cc].join("|");ja.src_ZCc=[ja.src_Z,ja.src_Cc].join("|");ja.src_pseudo_letter="(?:(?![><\uff5c]|"+ja.src_ZPCc+")"+ja.src_Any+")";ja.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";ja.src_auth=
"(?:(?:(?!"+ja.src_ZCc+"|[@/\\[\\]()]).)+@)?";ja.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?";ja.src_host_terminator="(?=$|[><\uff5c]|"+ja.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+ja.src_ZPCc+"))";ja.src_path="(?:[/?#](?:(?!"+ja.src_ZCc+"|[><\uff5c]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+ja.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+ja.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+ja.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+ja.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+ja.src_ZCc+"|[']).)+\\'|\\'(?="+
ja.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+ja.src_ZCc+"|[.]).|"+(J&&J["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+ja.src_ZCc+").|;(?!"+ja.src_ZCc+").|\\!+(?!"+ja.src_ZCc+"|[!]).|\\?(?!"+ja.src_ZCc+"|[?]).)+|\\/)?";ja.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*';ja.src_xn="xn--[a-z0-9\\-]{1,59}";ja.src_domain_root="(?:"+ja.src_xn+"|"+ja.src_pseudo_letter+"{1,63})";ja.src_domain="(?:"+ja.src_xn+"|(?:"+ja.src_pseudo_letter+")|(?:"+ja.src_pseudo_letter+
"(?:-|"+ja.src_pseudo_letter+"){0,61}"+ja.src_pseudo_letter+"))";ja.src_host="(?:(?:(?:(?:"+ja.src_domain+")\\.)*"+ja.src_domain+"))";ja.tpl_host_fuzzy="(?:"+ja.src_ip4+"|(?:(?:(?:"+ja.src_domain+")\\.)+(?:%TLDS%)))";ja.tpl_host_no_ip_fuzzy="(?:(?:(?:"+ja.src_domain+")\\.)+(?:%TLDS%))";ja.src_host_strict=ja.src_host+ja.src_host_terminator;ja.tpl_host_fuzzy_strict=ja.tpl_host_fuzzy+ja.src_host_terminator;ja.src_host_port_strict=ja.src_host+ja.src_port+ja.src_host_terminator;ja.tpl_host_port_fuzzy_strict=
ja.tpl_host_fuzzy+ja.src_port+ja.src_host_terminator;ja.tpl_host_port_no_ip_fuzzy_strict=ja.tpl_host_no_ip_fuzzy+ja.src_port+ja.src_host_terminator;ja.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+ja.src_ZPCc+"|>|$))";ja.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+ja.src_ZCc+")("+ja.src_email_name+"@"+ja.tpl_host_fuzzy_strict+")";ja.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+ja.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+ja.tpl_host_port_fuzzy_strict+ja.src_path+")";ja.tpl_link_no_ip_fuzzy=
"(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+ja.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+ja.tpl_host_port_no_ip_fuzzy_strict+ja.src_path+")";return ja},Mj={},Dl={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},El={"http:":{validate:function(J,ja,Rb){J=J.slice(ja);Rb.re.http||(Rb.re.http=new RegExp("^\\/\\/"+Rb.re.src_auth+Rb.re.src_host_port_strict+Rb.re.src_path,"i"));return Rb.re.http.test(J)?J.match(Rb.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(J,ja,Rb){var Q=J.slice(ja);Rb.re.no_http||
(Rb.re.no_http=new RegExp("^"+Rb.re.src_auth+"(?:localhost|(?:(?:"+Rb.re.src_domain+")\\.)+"+Rb.re.src_domain_root+")"+Rb.re.src_port+Rb.re.src_host_terminator+Rb.re.src_path,"i"));return Rb.re.no_http.test(Q)?3<=ja&&":"===J[ja-3]||3<=ja&&"/"===J[ja-3]?0:Q.match(Rb.re.no_http)[0].length:0}},"mailto:":{validate:function(J,ja,Rb){J=J.slice(ja);Rb.re.mailto||(Rb.re.mailto=new RegExp("^"+Rb.re.src_email_name+"@"+Rb.re.src_host_strict,"i"));return Rb.re.mailto.test(J)?J.match(Rb.re.mailto)[0].length:0}}},
pj="biz com edu gov net org pro web xxx aero asia coop info museum name shop \u0440\u0444".split(" ");ua.prototype.add=function(J,ja){this.__schemas__[J]=ja;nc(this);return this};ua.prototype.set=function(J){this.__opts__=vb(this.__opts__,J);return this};ua.prototype.test=function(J){this.__text_cache__=J;this.__index__=-1;if(!J.length)return!1;var ja,Rb,Q,nb;if(this.re.schema_test.test(J)){var Ia=this.re.schema_search;for(Ia.lastIndex=0;null!==(ja=Ia.exec(J));)if(nb=this.testSchemaAt(J,ja[2],Ia.lastIndex)){this.__schema__=
ja[2];this.__index__=ja.index+ja[1].length;this.__last_index__=ja.index+ja[0].length+nb;break}}this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(ja=J.search(this.re.host_fuzzy_test),0<=ja&&(0>this.__index__||ja<this.__index__)&&null!==(Rb=J.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(ja=Rb.index+Rb[1].length,0>this.__index__||ja<this.__index__))&&(this.__schema__="",this.__index__=ja,this.__last_index__=Rb.index+Rb[0].length);this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&
(Rb=J.indexOf("@"),0<=Rb&&null!==(Q=J.match(this.re.email_fuzzy))&&(ja=Q.index+Q[1].length,J=Q.index+Q[0].length,0>this.__index__||ja<this.__index__||ja===this.__index__&&J>this.__last_index__))&&(this.__schema__="mailto:",this.__index__=ja,this.__last_index__=J);return 0<=this.__index__};ua.prototype.pretest=function(J){return this.re.pretest.test(J)};ua.prototype.testSchemaAt=function(J,ja,Rb){return this.__compiled__[ja.toLowerCase()]?this.__compiled__[ja.toLowerCase()].validate(J,Rb,this):0};
ua.prototype.match=function(J){var ja=0,Rb=[];0<=this.__index__&&this.__text_cache__===J&&(Rb.push(fd(this,ja)),ja=this.__last_index__);for(J=ja?J.slice(ja):J;this.test(J);)Rb.push(fd(this,ja)),J=J.slice(this.__last_index__),ja+=this.__last_index__;return Rb.length?Rb:null};ua.prototype.tlds=function(J,ja){J=Array.isArray(J)?J:[J];if(!ja)return this.__tlds__=J.slice(),this.__tlds_replaced__=!0,nc(this),this;this.__tlds__=this.__tlds__.concat(J).sort().filter(function(Rb,Q,nb){return Rb!==nb[Q-1]}).reverse();
nc(this);return this};ua.prototype.normalize=function(J){J.schema||(J.url="http://"+J.url);"mailto:"!==J.schema||/^mailto:/i.test(J.url)||(J.url="mailto:"+J.url)};ua.prototype.onCompile=function(){};var Dk=Mj=ua,pk=Object.freeze({__proto__:null,"default":Dk});ba.decode;ba.encode;ba.toASCII;ba.toUnicode;ba.ucs2;ba.version;var km=Object.freeze({__proto__:null,"default":ba,decode:ba.decode,encode:ba.encode,toASCII:ba.toASCII,toUnicode:ba.toUnicode,ucs2:ba.ucs2,version:ba.version}),Pm={},lm=Pm={options:{html:!1,
xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Qm={},mm=Md.unescapeAll,Pl=Qm=function(J,ja,Rb){var Q,nb=ja,Ia={ok:!1,pos:0,lines:0,str:""};if(60===J.charCodeAt(ja)){for(ja++;ja<Rb;){var lb=J.charCodeAt(ja);if(10===lb)break;if(60===lb)break;if(62===lb){Ia.pos=ja+1;Ia.str=mm(J.slice(nb+1,ja));Ia.ok=!0;break}92===lb&&ja+1<Rb?ja+=2:ja++}return Ia}for(Q=0;ja<Rb;){lb=J.charCodeAt(ja);
if(32===lb)break;if(32>lb||127===lb)break;if(92===lb&&ja+1<Rb){if(32===J.charCodeAt(ja+1))break;ja+=2}else{if(40===lb&&(Q++,32<Q))return Ia;if(41===lb){if(0===Q)break;Q--}ja++}}if(nb===ja||0!==Q)return Ia;Ia.str=mm(J.slice(nb,ja));Ia.lines=0;Ia.pos=ja;Ia.ok=!0;return Ia},Fn={},Gn=Md.unescapeAll,dl=Fn=function(J,ja,Rb){var Q=0,nb=ja,Ia={ok:!1,pos:0,lines:0,str:""};if(ja>=Rb)return Ia;var lb=J.charCodeAt(ja);if(34!==lb&&39!==lb&&40!==lb)return Ia;ja++;for(40===lb&&(lb=41);ja<Rb;){var fb=J.charCodeAt(ja);
if(fb===lb){Ia.pos=ja+1;Ia.lines=Q;Ia.str=Gn(J.slice(nb+1,ja));Ia.ok=!0;break}else if(40===fb&&41===lb)break;else 10===fb?Q++:92===fb&&ja+1<Rb&&(ja++,10===J.charCodeAt(ja)&&Q++);ja++}return Ia},el={};el.parseLinkLabel=Yb;el.parseLinkDestination=Pl;el.parseLinkTitle=dl;var nm={};Ab.prototype.__find__=function(J){for(var ja=0;ja<this.__rules__.length;ja++)if(this.__rules__[ja].name===J)return ja;return-1};Ab.prototype.__compile__=function(){var J=this,ja=[""];J.__rules__.forEach(function(Rb){Rb.enabled&&
Rb.alt.forEach(function(Q){0>ja.indexOf(Q)&&ja.push(Q)})});J.__cache__={};ja.forEach(function(Rb){J.__cache__[Rb]=[];J.__rules__.forEach(function(Q){Q.enabled&&(Rb&&0>Q.alt.indexOf(Rb)||J.__cache__[Rb].push(Q.fn))})})};Ab.prototype.at=function(J,ja,Rb){var Q=this.__find__(J);Rb=Rb||{};if(-1===Q)throw Error("Parser rule not found: "+J);this.__rules__[Q].fn=ja;this.__rules__[Q].alt=Rb.alt||[];this.__cache__=null};Ab.prototype.before=function(J,ja,Rb,Q){var nb=this.__find__(J);Q=Q||{};if(-1===nb)throw Error("Parser rule not found: "+
J);this.__rules__.splice(nb,0,{name:ja,enabled:!0,fn:Rb,alt:Q.alt||[]});this.__cache__=null};Ab.prototype.after=function(J,ja,Rb,Q){var nb=this.__find__(J);Q=Q||{};if(-1===nb)throw Error("Parser rule not found: "+J);this.__rules__.splice(nb+1,0,{name:ja,enabled:!0,fn:Rb,alt:Q.alt||[]});this.__cache__=null};Ab.prototype.push=function(J,ja,Rb){this.__rules__.push({name:J,enabled:!0,fn:ja,alt:(Rb||{}).alt||[]});this.__cache__=null};Ab.prototype.enable=function(J,ja){Array.isArray(J)||(J=[J]);var Rb=
[];J.forEach(function(Q){var nb=this.__find__(Q);if(0>nb){if(ja)return;throw Error("Rules manager: invalid rule name "+Q);}this.__rules__[nb].enabled=!0;Rb.push(Q)},this);this.__cache__=null;return Rb};Ab.prototype.enableOnly=function(J,ja){Array.isArray(J)||(J=[J]);this.__rules__.forEach(function(Rb){Rb.enabled=!1});this.enable(J,ja)};Ab.prototype.disable=function(J,ja){Array.isArray(J)||(J=[J]);var Rb=[];J.forEach(function(Q){var nb=this.__find__(Q);if(0>nb){if(ja)return;throw Error("Rules manager: invalid rule name "+
Q);}this.__rules__[nb].enabled=!1;Rb.push(Q)},this);this.__cache__=null;return Rb};Ab.prototype.getRules=function(J){null===this.__cache__&&this.__compile__();return this.__cache__[J]||[]};var ol=nm=Ab,om={},fl=/\r\n?|\n/g,Hn=/\0/g,pm=om=function(J){var ja=J.src.replace(fl,"\n");ja=ja.replace(Hn,"\ufffd");J.src=ja},qm={},Ql=qm=function(J){if(J.inlineMode){var ja=new J.Token("inline","",0);ja.content=J.src;ja.map=[0,1];ja.children=[];J.tokens.push(ja)}else J.md.block.parse(J.src,J.md,J.env,J.tokens)},
Rl={},Rd=Rl=function(J){var ja=J.tokens,Rb;var Q=0;for(Rb=ja.length;Q<Rb;Q++){var nb=ja[Q];"inline"===nb.type&&J.md.inline.parse(nb.content,J.md,J.env,nb.children)}},Je={},Ve=Md.arrayReplaceAt,lf=Je=function(J){var ja,Rb,Q,nb=J.tokens;if(J.md.options.linkify){var Ia=0;for(Rb=nb.length;Ia<Rb;Ia++)if("inline"===nb[Ia].type&&J.md.linkify.pretest(nb[Ia].content)){var lb=nb[Ia].children;var fb=0;for(ja=lb.length-1;0<=ja;ja--){var kb=lb[ja];if("link_close"===kb.type)for(ja--;lb[ja].level!==kb.level&&"link_open"!==
lb[ja].type;)ja--;else if("html_inline"===kb.type&&(/^<a[>\s]/i.test(kb.content)&&0<fb&&fb--,/^<\/a\s*>/i.test(kb.content)&&fb++),!(0<fb)&&"text"===kb.type&&J.md.linkify.test(kb.content)){var kc=kb.content;var Mc=J.md.linkify.match(kc);var Gc=[];var Xc=kb.level;for(kb=Q=0;kb<Mc.length;kb++){var ad=Mc[kb].url;var he=J.md.normalizeLink(ad);if(J.md.validateLink(he)){var we=Mc[kb].text;we=Mc[kb].schema?"mailto:"!==Mc[kb].schema||/^mailto:/i.test(we)?J.md.normalizeLinkText(we):J.md.normalizeLinkText("mailto:"+
we).replace(/^mailto:/,""):J.md.normalizeLinkText("http://"+we).replace(/^http:\/\//,"");var $e=Mc[kb].index;$e>Q&&(ad=new J.Token("text","",0),ad.content=kc.slice(Q,$e),ad.level=Xc,Gc.push(ad));ad=new J.Token("link_open","a",1);ad.attrs=[["href",he]];ad.level=Xc++;ad.markup="linkify";ad.info="auto";Gc.push(ad);ad=new J.Token("text","",0);ad.content=we;ad.level=Xc;Gc.push(ad);ad=new J.Token("link_close","a",-1);ad.level=--Xc;ad.markup="linkify";ad.info="auto";Gc.push(ad);Q=Mc[kb].lastIndex}}Q<kc.length&&
(ad=new J.Token("text","",0),ad.content=kc.slice(Q),ad.level=Xc,Gc.push(ad));nb[Ia].children=lb=Ve(lb,ja,Gc)}}}}},fh={},Wh=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,ki=/\((c|tm|r|p)\)/i,qk=/\((c|tm|r|p)\)/ig,Nj={c:"\u00a9",r:"\u00ae",p:"\u00a7",tm:"\u2122"},kj=fh=function(J){var ja;if(J.md.options.typographer)for(ja=J.tokens.length-1;0<=ja;ja--)if("inline"===J.tokens[ja].type){if(ki.test(J.tokens[ja].content)){var Rb,Q=J.tokens[ja].children,nb=0;for(Rb=Q.length-1;0<=Rb;Rb--){var Ia=Q[Rb];"text"!==Ia.type||nb||
(Ia.content=Ia.content.replace(qk,Fa));"link_open"===Ia.type&&"auto"===Ia.info&&nb--;"link_close"===Ia.type&&"auto"===Ia.info&&nb++}}if(Wh.test(J.tokens[ja].content))for(Q=J.tokens[ja].children,nb=0,Rb=Q.length-1;0<=Rb;Rb--)Ia=Q[Rb],"text"===Ia.type&&!nb&&Wh.test(Ia.content)&&(Ia.content=Ia.content.replace(/\+-/g,"\u00b1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,
"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),"link_open"===Ia.type&&"auto"===Ia.info&&nb--,"link_close"===Ia.type&&"auto"===Ia.info&&nb++}},dk={},Tj=Md.isWhiteSpace,Rm=Md.isPunctChar,up=Md.isMdAsciiPunct,Jq=/['"]/,In=/['"]/g,Eo=dk=function(J){var ja;if(J.md.options.typographer)for(ja=J.tokens.length-1;0<=ja;ja--)if("inline"===J.tokens[ja].type&&Jq.test(J.tokens[ja].content)){var Rb,Q,nb,Ia=J.tokens[ja].children,lb=J;var fb=[];for(nb=0;nb<Ia.length;nb++){var kb=Ia[nb];var kc=Ia[nb].level;
for(Q=fb.length-1;0<=Q&&!(fb[Q].level<=kc);Q--);fb.length=Q+1;if("text"===kb.type){var Mc=kb.content;var Gc=0;var Xc=Mc.length;a:for(;Gc<Xc;){In.lastIndex=Gc;var ad=In.exec(Mc);if(!ad)break;var he=Rb=!0;Gc=ad.index+1;var we="'"===ad[0];var $e=32;if(0<=ad.index-1)$e=Mc.charCodeAt(ad.index-1);else for(Q=nb-1;0<=Q&&"softbreak"!==Ia[Q].type&&"hardbreak"!==Ia[Q].type;Q--)if(Ia[Q].content){$e=Ia[Q].content.charCodeAt(Ia[Q].content.length-1);break}var Qe=32;if(Gc<Xc)Qe=Mc.charCodeAt(Gc);else for(Q=nb+1;Q<
Ia.length&&"softbreak"!==Ia[Q].type&&"hardbreak"!==Ia[Q].type;Q++)if(Ia[Q].content){Qe=Ia[Q].content.charCodeAt(0);break}var dg=up($e)||Rm(String.fromCharCode($e));var Cf=up(Qe)||Rm(String.fromCharCode(Qe));var Fh=Tj($e);(Q=Tj(Qe))?he=!1:Cf&&(Fh||dg||(he=!1));Fh?Rb=!1:dg&&(Q||Cf||(Rb=!1));34===Qe&&'"'===ad[0]&&48<=$e&&57>=$e&&(Rb=he=!1);he&&Rb&&(he=dg,Rb=Cf);if(he||Rb){if(Rb)for(Q=fb.length-1;0<=Q;Q--){Qe=fb[Q];if(fb[Q].level<kc)break;if(Qe.single===we&&fb[Q].level===kc){Qe=fb[Q];we?(Rb=lb.md.options.quotes[2],
we=lb.md.options.quotes[3]):(Rb=lb.md.options.quotes[0],we=lb.md.options.quotes[1]);kb.content=za(kb.content,ad.index,we);Ia[Qe.token].content=za(Ia[Qe.token].content,Qe.pos,Rb);Gc+=we.length-1;Qe.token===nb&&(Gc+=Rb.length-1);Mc=kb.content;Xc=Mc.length;fb.length=Q;continue a}}he?fb.push({token:nb,pos:ad.index,single:we,level:kc}):Rb&&we&&(kb.content=za(kb.content,ad.index,"\u2019"))}else we&&(kb.content=za(kb.content,ad.index,"\u2019"))}}}}},Fo={};Ka.prototype.Token=Ce;var Kq=Fo=Ka,Lq={},Mq=ol,Jn=
[["normalize",pm],["block",Ql],["inline",Rd],["linkify",lf],["replacements",kj],["smartquotes",Eo]];Ib.prototype.process=function(J){var ja;var Rb=this.ruler.getRules("");var Q=0;for(ja=Rb.length;Q<ja;Q++)Rb[Q](J)};Ib.prototype.State=Kq;var vp=Lq=Ib,Nq={},Kn=Md.isSpace,wp=Nq=function(J,ja,Rb,Q){var nb;if(ja+2>Rb)return!1;var Ia=ja+1;if(J.sCount[Ia]<J.blkIndent||4<=J.sCount[Ia]-J.blkIndent)return!1;var lb=J.bMarks[Ia]+J.tShift[Ia];if(lb>=J.eMarks[Ia])return!1;var fb=J.src.charCodeAt(lb++);if(124!==
fb&&45!==fb&&58!==fb||lb>=J.eMarks[Ia])return!1;var kb=J.src.charCodeAt(lb++);if(124!==kb&&45!==kb&&58!==kb&&!Kn(kb)||45===fb&&Kn(kb))return!1;for(;lb<J.eMarks[Ia];){fb=J.src.charCodeAt(lb);if(124!==fb&&45!==fb&&58!==fb&&!Kn(fb))return!1;lb++}fb=C(J,ja+1);var kc=fb.split("|");lb=[];for(fb=0;fb<kc.length;fb++){Ia=kc[fb].trim();if(!Ia)if(0===fb||fb===kc.length-1)continue;else return!1;if(!/^:?-+:?$/.test(Ia))return!1;58===Ia.charCodeAt(Ia.length-1)?lb.push(58===Ia.charCodeAt(0)?"center":"right"):58===
Ia.charCodeAt(0)?lb.push("left"):lb.push("")}fb=C(J,ja).trim();if(-1===fb.indexOf("|")||4<=J.sCount[ja]-J.blkIndent)return!1;kc=Pb(fb);kc.length&&""===kc[0]&&kc.shift();kc.length&&""===kc[kc.length-1]&&kc.pop();kb=kc.length;if(0===kb||kb!==lb.length)return!1;if(Q)return!0;var Mc=J.parentType;J.parentType="table";var Gc=J.md.block.ruler.getRules("blockquote");var Xc=J.push("table_open","table",1);Xc.map=Q=[ja,0];Xc=J.push("thead_open","thead",1);Xc.map=[ja,ja+1];Xc=J.push("tr_open","tr",1);Xc.map=
[ja,ja+1];for(fb=0;fb<kc.length;fb++)Xc=J.push("th_open","th",1),lb[fb]&&(Xc.attrs=[["style","text-align:"+lb[fb]]]),Xc=J.push("inline","",0),Xc.content=kc[fb].trim(),Xc.children=[],J.push("th_close","th",-1);J.push("tr_close","tr",-1);J.push("thead_close","thead",-1);for(Ia=ja+2;Ia<Rb&&!(J.sCount[Ia]<J.blkIndent);Ia++){Xc=!1;fb=0;for(kc=Gc.length;fb<kc;fb++)if(Gc[fb](J,Ia,Rb,!0)){Xc=!0;break}if(Xc)break;fb=C(J,Ia).trim();if(!fb)break;if(4<=J.sCount[Ia]-J.blkIndent)break;kc=Pb(fb);kc.length&&""===
kc[0]&&kc.shift();kc.length&&""===kc[kc.length-1]&&kc.pop();Ia===ja+2&&(Xc=J.push("tbody_open","tbody",1),Xc.map=nb=[ja+2,0]);Xc=J.push("tr_open","tr",1);Xc.map=[Ia,Ia+1];for(fb=0;fb<kb;fb++)Xc=J.push("td_open","td",1),lb[fb]&&(Xc.attrs=[["style","text-align:"+lb[fb]]]),Xc=J.push("inline","",0),Xc.content=kc[fb]?kc[fb].trim():"",Xc.children=[],J.push("td_close","td",-1);J.push("tr_close","tr",-1)}nb&&(J.push("tbody_close","tbody",-1),nb[1]=Ia);J.push("table_close","table",-1);Q[1]=Ia;J.parentType=
Mc;J.line=Ia;return!0},Oq={},Pq=Oq=function(J,ja,Rb){var Q,nb;if(4>J.sCount[ja]-J.blkIndent)return!1;for(nb=Q=ja+1;Q<Rb;)if(J.isEmpty(Q))Q++;else if(4<=J.sCount[Q]-J.blkIndent)Q++,nb=Q;else break;J.line=nb;Rb=J.push("code_block","code",0);Rb.content=J.getLines(ja,nb,4+J.blkIndent,!1)+"\n";Rb.map=[ja,J.line];return!0},Qq={},Mn=Qq=function(J,ja,Rb,Q){var nb=!1,Ia=J.bMarks[ja]+J.tShift[ja],lb=J.eMarks[ja];if(4<=J.sCount[ja]-J.blkIndent||Ia+3>lb)return!1;var fb=J.src.charCodeAt(Ia);if(126!==fb&&96!==
fb)return!1;var kb=Ia;Ia=J.skipChars(Ia,fb);var kc=Ia-kb;if(3>kc)return!1;var Mc=J.src.slice(kb,Ia);var Gc=J.src.slice(Ia,lb);if(96===fb&&0<=Gc.indexOf(String.fromCharCode(fb)))return!1;if(Q)return!0;for(Q=ja;;){Q++;if(Q>=Rb)break;Ia=kb=J.bMarks[Q]+J.tShift[Q];lb=J.eMarks[Q];if(Ia<lb&&J.sCount[Q]<J.blkIndent)break;if(!(J.src.charCodeAt(Ia)!==fb||4<=J.sCount[Q]-J.blkIndent||(Ia=J.skipChars(Ia,fb),Ia-kb<kc||(Ia=J.skipSpaces(Ia),Ia<lb)))){nb=!0;break}}kc=J.sCount[ja];J.line=Q+(nb?1:0);Rb=J.push("fence",
"code",0);Rb.info=Gc;Rb.content=J.getLines(ja+1,Q,kc,!0);Rb.markup=Mc;Rb.map=[ja,J.line];return!0},ai={},Sm=Md.isSpace,xp=ai=function(J,ja,Rb,Q){var nb,Ia=J.lineMax;var lb=J.bMarks[ja]+J.tShift[ja];var fb=J.eMarks[ja];if(4<=J.sCount[ja]-J.blkIndent||62!==J.src.charCodeAt(lb++))return!1;if(Q)return!0;var kb=nb=J.sCount[ja]+1;if(32===J.src.charCodeAt(lb)){lb++;kb++;nb++;var kc=!1;var Mc=!0}else 9===J.src.charCodeAt(lb)?(Mc=!0,3===(J.bsCount[ja]+nb)%4?(lb++,kb++,nb++,kc=!1):kc=!0):Mc=!1;var Gc=[J.bMarks[ja]];
for(J.bMarks[ja]=lb;lb<fb;){var Xc=J.src.charCodeAt(lb);if(Sm(Xc))9===Xc?nb+=4-(nb+J.bsCount[ja]+(kc?1:0))%4:nb++;else break;lb++}var ad=[J.bsCount[ja]];J.bsCount[ja]=J.sCount[ja]+1+(Mc?1:0);Xc=lb>=fb;var he=[J.sCount[ja]];J.sCount[ja]=nb-kb;var we=[J.tShift[ja]];J.tShift[ja]=lb-J.bMarks[ja];var $e=J.md.block.ruler.getRules("blockquote");var Qe=J.parentType;J.parentType="blockquote";for(Q=ja+1;Q<Rb;Q++){kb=J.sCount[Q]<J.blkIndent;lb=J.bMarks[Q]+J.tShift[Q];fb=J.eMarks[Q];if(lb>=fb)break;if(62!==J.src.charCodeAt(lb++)||
kb){if(Xc)break;kb=!1;lb=0;for(fb=$e.length;lb<fb;lb++)if($e[lb](J,Q,Rb,!0)){kb=!0;break}if(kb){J.lineMax=Q;0!==J.blkIndent&&(Gc.push(J.bMarks[Q]),ad.push(J.bsCount[Q]),we.push(J.tShift[Q]),he.push(J.sCount[Q]),J.sCount[Q]-=J.blkIndent);break}Gc.push(J.bMarks[Q]);ad.push(J.bsCount[Q]);we.push(J.tShift[Q]);he.push(J.sCount[Q]);J.sCount[Q]=-1}else{kb=nb=J.sCount[Q]+1;32===J.src.charCodeAt(lb)?(lb++,kb++,nb++,kc=!1,Mc=!0):9===J.src.charCodeAt(lb)?(Mc=!0,3===(J.bsCount[Q]+nb)%4?(lb++,kb++,nb++,kc=!1):
kc=!0):Mc=!1;Gc.push(J.bMarks[Q]);for(J.bMarks[Q]=lb;lb<fb;){Xc=J.src.charCodeAt(lb);if(Sm(Xc))9===Xc?nb+=4-(nb+J.bsCount[Q]+(kc?1:0))%4:nb++;else break;lb++}Xc=lb>=fb;ad.push(J.bsCount[Q]);J.bsCount[Q]=J.sCount[Q]+1+(Mc?1:0);he.push(J.sCount[Q]);J.sCount[Q]=nb-kb;we.push(J.tShift[Q]);J.tShift[Q]=lb-J.bMarks[Q]}}Rb=J.blkIndent;J.blkIndent=0;$e=J.push("blockquote_open","blockquote",1);$e.markup=">";$e.map=kc=[ja,0];J.md.block.tokenize(J,ja,Q);$e=J.push("blockquote_close","blockquote",-1);$e.markup=
">";J.lineMax=Ia;J.parentType=Qe;kc[1]=J.line;for(lb=0;lb<we.length;lb++)J.bMarks[lb+ja]=Gc[lb],J.tShift[lb+ja]=we[lb],J.sCount[lb+ja]=he[lb],J.bsCount[lb+ja]=ad[lb];J.blkIndent=Rb;return!0},Rq={},Sq=Md.isSpace,Go=Rq=function(J,ja,Rb,Q){var nb,Ia=J.bMarks[ja]+J.tShift[ja],lb=J.eMarks[ja];if(4<=J.sCount[ja]-J.blkIndent)return!1;Rb=J.src.charCodeAt(Ia++);if(42!==Rb&&45!==Rb&&95!==Rb)return!1;for(nb=1;Ia<lb;){var fb=J.src.charCodeAt(Ia++);if(fb!==Rb&&!Sq(fb))return!1;fb===Rb&&nb++}if(3>nb)return!1;if(Q)return!0;
J.line=ja+1;Q=J.push("hr","hr",0);Q.map=[ja,J.line];Q.markup=Array(nb+1).join(String.fromCharCode(Rb));return!0},Tq={},Uq=Md.isSpace,Us=Tq=function(J,ja,Rb,Q){var nb,Ia,lb;var fb=!1;var kb=!0;if(4<=J.sCount[ja]-J.blkIndent||0<=J.listIndent&&4<=J.sCount[ja]-J.listIndent&&J.sCount[ja]<J.blkIndent)return!1;Q&&"paragraph"===J.parentType&&J.sCount[ja]>=J.blkIndent&&(fb=!0);if(0<=(lb=wa(J,ja))){var kc=!0;var Mc=J.bMarks[ja]+J.tShift[ja];var Gc=Number(J.src.slice(Mc,lb-1));if(fb&&1!==Gc)return!1}else if(0<=
(lb=da(J,ja)))kc=!1;else return!1;if(fb&&J.skipSpaces(lb)>=J.eMarks[ja])return!1;fb=J.src.charCodeAt(lb-1);if(Q)return!0;Q=J.tokens.length;if(kc){var Xc=J.push("ordered_list_open","ol",1);1!==Gc&&(Xc.attrs=[["start",Gc]])}else Xc=J.push("bullet_list_open","ul",1);Xc.map=Gc=[ja,0];Xc.markup=String.fromCharCode(fb);var ad=ja;var he=!1;var we=J.md.block.ruler.getRules("list");var $e=J.parentType;for(J.parentType="list";ad<Rb;){Xc=lb;var Qe=J.eMarks[ad];for(nb=Ia=J.sCount[ad]+lb-(J.bMarks[ja]+J.tShift[ja]);Xc<
Qe;){var dg=J.src.charCodeAt(Xc);if(9===dg)Ia+=4-(Ia+J.bsCount[ad])%4;else if(32===dg)Ia++;else break;Xc++}ad=Xc;dg=ad>=Qe?1:Ia-nb;4<dg&&(dg=1);dg=nb+dg;Xc=J.push("list_item_open","li",1);Xc.markup=String.fromCharCode(fb);Xc.map=nb=[ja,0];kc&&(Xc.info=J.src.slice(Mc,lb-1));var Cf=J.tight;var Fh=J.tShift[ja];Xc=J.sCount[ja];lb=J.listIndent;J.listIndent=J.blkIndent;J.blkIndent=dg;J.tight=!0;J.tShift[ja]=ad-J.bMarks[ja];J.sCount[ja]=Ia;ad>=Qe&&J.isEmpty(ja+1)?J.line=Math.min(J.line+2,Rb):J.md.block.tokenize(J,
ja,Rb,!0);if(!J.tight||he)kb=!1;he=1<J.line-ja&&J.isEmpty(J.line-1);J.blkIndent=J.listIndent;J.listIndent=lb;J.tShift[ja]=Fh;J.sCount[ja]=Xc;J.tight=Cf;Xc=J.push("list_item_close","li",-1);Xc.markup=String.fromCharCode(fb);ad=ja=J.line;nb[1]=ad;if(ad>=Rb)break;if(J.sCount[ad]<J.blkIndent)break;if(4<=J.sCount[ja]-J.blkIndent)break;lb=!1;Qe=0;for(Ia=we.length;Qe<Ia;Qe++)if(we[Qe](J,ad,Rb,!0)){lb=!0;break}if(lb)break;if(kc){lb=wa(J,ad);if(0>lb)break;Mc=J.bMarks[ad]+J.tShift[ad]}else if(lb=da(J,ad),0>
lb)break;if(fb!==J.src.charCodeAt(lb-1))break}Xc=kc?J.push("ordered_list_close","ol",-1):J.push("bullet_list_close","ul",-1);Xc.markup=String.fromCharCode(fb);Gc[1]=ad;J.line=ad;J.parentType=$e;if(kb)for(ja=J.level+2,Rb=Q+2,kc=J.tokens.length-2;Rb<kc;Rb++)J.tokens[Rb].level===ja&&"paragraph_open"===J.tokens[Rb].type&&(J.tokens[Rb+2].hidden=!0,J.tokens[Rb].hidden=!0,Rb+=2);return!0},Vs={},Ws=Md.normalizeReference,rm=Md.isSpace,Vq=Vs=function(J,ja,Rb,Q){var nb,Ia,lb=0;var fb=J.bMarks[ja]+J.tShift[ja];
var kb=J.eMarks[ja];var kc=ja+1;if(4<=J.sCount[ja]-J.blkIndent||91!==J.src.charCodeAt(fb))return!1;for(;++fb<kb;)if(93===J.src.charCodeAt(fb)&&92!==J.src.charCodeAt(fb-1)){if(fb+1===kb||58!==J.src.charCodeAt(fb+1))return!1;break}fb=J.lineMax;var Mc=J.md.block.ruler.getRules("reference");Rb=J.parentType;for(J.parentType="reference";kc<fb&&!J.isEmpty(kc);kc++)if(!(3<J.sCount[kc]-J.blkIndent||0>J.sCount[kc])){var Gc=!1;kb=0;for(nb=Mc.length;kb<nb;kb++)if(Mc[kb](J,kc,fb,!0)){Gc=!0;break}if(Gc)break}Mc=
J.getLines(ja,kc,J.blkIndent,!1).trim();kb=Mc.length;for(fb=1;fb<kb;fb++){var Xc=Mc.charCodeAt(fb);if(91===Xc)return!1;if(93===Xc){var ad=fb;break}else 10===Xc?lb++:92===Xc&&(fb++,fb<kb&&10===Mc.charCodeAt(fb)&&lb++)}if(0>ad||58!==Mc.charCodeAt(ad+1))return!1;for(fb=ad+2;fb<kb;fb++)if(Xc=Mc.charCodeAt(fb),10===Xc)lb++;else if(!rm(Xc))break;Xc=J.md.helpers.parseLinkDestination(Mc,fb,kb);if(!Xc.ok)return!1;kc=J.md.normalizeLink(Xc.str);if(!J.md.validateLink(kc))return!1;fb=Xc.pos;lb+=Xc.lines;nb=fb;
Gc=lb;for(Ia=fb;fb<kb;fb++)if(Xc=Mc.charCodeAt(fb),10===Xc)lb++;else if(!rm(Xc))break;Xc=J.md.helpers.parseLinkTitle(Mc,fb,kb);fb<kb&&Ia!==fb&&Xc.ok?(Ia=Xc.str,fb=Xc.pos,lb+=Xc.lines):(Ia="",fb=nb,lb=Gc);for(;fb<kb;){Xc=Mc.charCodeAt(fb);if(!rm(Xc))break;fb++}if(fb<kb&&10!==Mc.charCodeAt(fb)&&Ia)for(Ia="",fb=nb,lb=Gc;fb<kb;){Xc=Mc.charCodeAt(fb);if(!rm(Xc))break;fb++}if(fb<kb&&10!==Mc.charCodeAt(fb))return!1;ad=Ws(Mc.slice(1,ad));if(!ad)return!1;if(Q)return!0;"undefined"===typeof J.env.references&&
(J.env.references={});"undefined"===typeof J.env.references[ad]&&(J.env.references[ad]={title:Ia,href:kc});J.parentType=Rb;J.line=ja+lb+1;return!0},Nh={},Sl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^\x3c!--/,/--\x3e/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+ve.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>)/.source+
"\\s*$"),/^$/,!1]],Wq=Nh=function(J,ja,Rb,Q){var nb;var Ia=J.bMarks[ja]+J.tShift[ja];var lb=J.eMarks[ja];if(4<=J.sCount[ja]-J.blkIndent||!J.md.options.html||60!==J.src.charCodeAt(Ia))return!1;Ia=J.src.slice(Ia,lb);for(nb=0;nb<Sl.length&&!Sl[nb][0].test(Ia);nb++);if(nb===Sl.length)return!1;if(Q)return Sl[nb][2];Q=ja+1;if(!Sl[nb][1].test(Ia))for(;Q<Rb&&!(J.sCount[Q]<J.blkIndent);Q++)if(Ia=J.bMarks[Q]+J.tShift[Q],lb=J.eMarks[Q],Ia=J.src.slice(Ia,lb),Sl[nb][1].test(Ia)){0!==Ia.length&&Q++;break}J.line=
Q;Rb=J.push("html_block","",0);Rb.map=[ja,Q];Rb.content=J.getLines(ja,Q,J.blkIndent,!0);return!0},yp={},Ho=Md.isSpace,Io=yp=function(J,ja,Rb,Q){var nb=J.bMarks[ja]+J.tShift[ja],Ia=J.eMarks[ja];if(4<=J.sCount[ja]-J.blkIndent)return!1;var lb=J.src.charCodeAt(nb);if(35!==lb||nb>=Ia)return!1;Rb=1;for(lb=J.src.charCodeAt(++nb);35===lb&&nb<Ia&&6>=Rb;)Rb++,lb=J.src.charCodeAt(++nb);if(6<Rb||nb<Ia&&!Ho(lb))return!1;if(Q)return!0;Ia=J.skipSpacesBack(Ia,nb);Q=J.skipCharsBack(Ia,35,nb);Q>nb&&Ho(J.src.charCodeAt(Q-
1))&&(Ia=Q);J.line=ja+1;Q=J.push("heading_open","h"+String(Rb),1);Q.markup="########".slice(0,Rb);Q.map=[ja,J.line];Q=J.push("inline","",0);Q.content=J.src.slice(nb,Ia).trim();Q.map=[ja,J.line];Q.children=[];Q=J.push("heading_close","h"+String(Rb),-1);Q.markup="########".slice(0,Rb);return!0},Xq={},Yq=Xq=function(J,ja,Rb){var Q;var nb=ja+1;var Ia=J.md.block.ruler.getRules("paragraph");if(4<=J.sCount[ja]-J.blkIndent)return!1;var lb=J.parentType;for(J.parentType="paragraph";nb<Rb&&!J.isEmpty(nb);nb++)if(!(3<
J.sCount[nb]-J.blkIndent)){if(J.sCount[nb]>=J.blkIndent){var fb=J.bMarks[nb]+J.tShift[nb];var kb=J.eMarks[nb];if(fb<kb){var kc=J.src.charCodeAt(fb);if(45===kc||61===kc)if(fb=J.skipChars(fb,kc),fb=J.skipSpaces(fb),fb>=kb){var Mc=61===kc?1:2;break}}}if(!(0>J.sCount[nb])){fb=!1;kb=0;for(Q=Ia.length;kb<Q;kb++)if(Ia[kb](J,nb,Rb,!0)){fb=!0;break}if(fb)break}}if(!Mc)return!1;Rb=J.getLines(ja,nb,J.blkIndent,!1).trim();J.line=nb+1;nb=J.push("heading_open","h"+String(Mc),1);nb.markup=String.fromCharCode(kc);
nb.map=[ja,J.line];nb=J.push("inline","",0);nb.content=Rb;nb.map=[ja,J.line-1];nb.children=[];nb=J.push("heading_close","h"+String(Mc),-1);nb.markup=String.fromCharCode(kc);J.parentType=lb;return!0},Zq={},zp=Zq=function(J,ja){var Rb;var Q=ja+1;var nb=J.md.block.ruler.getRules("paragraph"),Ia=J.lineMax;var lb=J.parentType;for(J.parentType="paragraph";Q<Ia&&!J.isEmpty(Q);Q++)if(!(3<J.sCount[Q]-J.blkIndent||0>J.sCount[Q])){var fb=!1;var kb=0;for(Rb=nb.length;kb<Rb;kb++)if(nb[kb](J,Q,Ia,!0)){fb=!0;break}if(fb)break}fb=
J.getLines(ja,Q,J.blkIndent,!1).trim();J.line=Q;Q=J.push("paragraph_open","p",1);Q.map=[ja,J.line];Q=J.push("inline","",0);Q.content=fb;Q.map=[ja,J.line];Q.children=[];J.push("paragraph_close","p",-1);J.parentType=lb;return!0},$q={},Tm=Md.isSpace;ca.prototype.push=function(J,ja,Rb){J=new Ce(J,ja,Rb);J.block=!0;0>Rb&&this.level--;J.level=this.level;0<Rb&&this.level++;this.tokens.push(J);return J};ca.prototype.isEmpty=function(J){return this.bMarks[J]+this.tShift[J]>=this.eMarks[J]};ca.prototype.skipEmptyLines=
function(J){for(var ja=this.lineMax;J<ja&&!(this.bMarks[J]+this.tShift[J]<this.eMarks[J]);J++);return J};ca.prototype.skipSpaces=function(J){for(var ja,Rb=this.src.length;J<Rb&&(ja=this.src.charCodeAt(J),Tm(ja));J++);return J};ca.prototype.skipSpacesBack=function(J,ja){if(J<=ja)return J;for(;J>ja;)if(!Tm(this.src.charCodeAt(--J)))return J+1;return J};ca.prototype.skipChars=function(J,ja){for(var Rb=this.src.length;J<Rb&&this.src.charCodeAt(J)===ja;J++);return J};ca.prototype.skipCharsBack=function(J,
ja,Rb){if(J<=Rb)return J;for(;J>Rb;)if(ja!==this.src.charCodeAt(--J))return J+1;return J};ca.prototype.getLines=function(J,ja,Rb,Q){var nb,Ia,lb=J;if(J>=ja)return"";var fb=Array(ja-J);for(J=0;lb<ja;lb++,J++){var kb=0;var kc=nb=this.bMarks[lb];for(Ia=lb+1<ja||Q?this.eMarks[lb]+1:this.eMarks[lb];nb<Ia&&kb<Rb;){var Mc=this.src.charCodeAt(nb);if(Tm(Mc))9===Mc?kb+=4-(kb+this.bsCount[lb])%4:kb++;else if(nb-kc<this.tShift[lb])kb++;else break;nb++}fb[J]=kb>Rb?Array(kb-Rb+1).join(" ")+this.src.slice(nb,Ia):
this.src.slice(nb,Ia)}return fb.join("")};ca.prototype.Token=Ce;var ar=$q=ca,Um={},br=ol,Nn=[["table",wp,["paragraph","reference"]],["code",Pq],["fence",Mn,["paragraph","reference","blockquote","list"]],["blockquote",xp,["paragraph","reference","blockquote","list"]],["hr",Go,["paragraph","reference","blockquote","list"]],["list",Us,["paragraph","reference","blockquote"]],["reference",Vq],["html_block",Wq,["paragraph","reference","blockquote"]],["heading",Io,["paragraph","reference","blockquote"]],
["lheading",Yq],["paragraph",zp]];ma.prototype.tokenize=function(J,ja,Rb){for(var Q,nb=this.ruler.getRules(""),Ia=nb.length,lb=ja,fb=!1,kb=J.md.options.maxNesting;lb<Rb;){J.line=lb=J.skipEmptyLines(lb);if(lb>=Rb)break;if(J.sCount[lb]<J.blkIndent)break;if(J.level>=kb){J.line=Rb;break}for(Q=0;Q<Ia&&!(ja=nb[Q](J,lb,Rb,!1));Q++);J.tight=!fb;J.isEmpty(J.line-1)&&(fb=!0);lb=J.line;lb<Rb&&J.isEmpty(lb)&&(fb=!0,lb++,J.line=lb)}};ma.prototype.parse=function(J,ja,Rb,Q){J&&(J=new this.State(J,ja,Rb,Q),this.tokenize(J,
J.line,J.lineMax))};ma.prototype.State=ar;for(var Vm=Um=ma,Tl={},Ap=Tl=function(J,ja){for(var Rb=J.pos;Rb<J.posMax&&!u(J.src.charCodeAt(Rb));)Rb++;if(Rb===J.pos)return!1;ja||(J.pending+=J.src.slice(J.pos,Rb));J.pos=Rb;return!0},Bp={},Cp=Md.isSpace,cr=Bp=function(J,ja){var Rb=J.pos;if(10!==J.src.charCodeAt(Rb))return!1;var Q=J.pending.length-1;var nb=J.posMax;if(!ja)if(0<=Q&&32===J.pending.charCodeAt(Q))if(1<=Q&&32===J.pending.charCodeAt(Q-1)){for(ja=Q-1;1<=ja&&32===J.pending.charCodeAt(ja-1);)ja--;
J.pending=J.pending.slice(0,ja);J.push("hardbreak","br",0)}else J.pending=J.pending.slice(0,-1),J.push("softbreak","br",0);else J.push("softbreak","br",0);for(Rb++;Rb<nb&&Cp(J.src.charCodeAt(Rb));)Rb++;J.pos=Rb;return!0},Jo={},dr=Md.isSpace,On=[],Ko=0;256>Ko;Ko++)On.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(J){On[J.charCodeAt(0)]=1});var Lo=Jo=function(J,ja){var Rb=J.pos,Q=J.posMax;if(92!==J.src.charCodeAt(Rb))return!1;Rb++;if(Rb<Q){var nb=J.src.charCodeAt(Rb);if(256>
nb&&0!==On[nb])return ja||(J.pending+=J.src[Rb]),J.pos+=2,!0;if(10===nb){ja||J.push("hardbreak","br",0);for(Rb++;Rb<Q;){nb=J.src.charCodeAt(Rb);if(!dr(nb))break;Rb++}J.pos=Rb;return!0}}ja||(J.pending+="\\");J.pos++;return!0},er={},xc=er=function(J,ja){var Rb,Q,nb=J.pos;if(96!==J.src.charCodeAt(nb))return!1;var Ia=nb;nb++;for(Rb=J.posMax;nb<Rb&&96===J.src.charCodeAt(nb);)nb++;var lb=J.src.slice(Ia,nb);var fb=lb.length;if(J.backticksScanned&&(J.backticks[fb]||0)<=Ia)return ja||(J.pending+=lb),J.pos+=
fb,!0;for(Q=nb;-1!==(Ia=J.src.indexOf("`",Q));){for(Q=Ia+1;Q<Rb&&96===J.src.charCodeAt(Q);)Q++;var kb=Q-Ia;if(kb===fb)return ja||(ja=J.push("code_inline","code",0),ja.markup=lb,ja.content=J.src.slice(nb,Ia).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),J.pos=Q,!0;J.backticks[kb]=Ia}J.backticksScanned=!0;ja||(J.pending+=lb);J.pos+=fb;return!0},Bc={},Rc=Md.normalizeReference,Ec=Md.isSpace,Dc=Bc=function(J,ja){var Rb,Q;var nb=Rb="";var Ia=J.pos,lb=J.posMax,fb,kb=!0;if(91!==J.src.charCodeAt(J.pos))return!1;
var kc=J.pos+1;var Mc=J.md.helpers.parseLinkLabel(J,J.pos,!0);if(0>Mc)return!1;var Gc=Mc+1;if(Gc<lb&&40===J.src.charCodeAt(Gc)){kb=!1;for(Gc++;Gc<lb;Gc++){var Xc=J.src.charCodeAt(Gc);if(!Ec(Xc)&&10!==Xc)break}if(Gc>=lb)return!1;Xc=J.md.helpers.parseLinkDestination(J.src,Gc,J.posMax);if(Xc.ok){Rb=J.md.normalizeLink(Xc.str);J.md.validateLink(Rb)?Gc=Xc.pos:Rb="";for(fb=Gc;Gc<lb&&(Xc=J.src.charCodeAt(Gc),Ec(Xc)||10===Xc);Gc++);Xc=J.md.helpers.parseLinkTitle(J.src,Gc,J.posMax);if(Gc<lb&&fb!==Gc&&Xc.ok)for(nb=
Xc.str,Gc=Xc.pos;Gc<lb&&(Xc=J.src.charCodeAt(Gc),Ec(Xc)||10===Xc);Gc++);}if(Gc>=lb||41!==J.src.charCodeAt(Gc))kb=!0;Gc++}if(kb){if("undefined"===typeof J.env.references)return!1;Gc<lb&&91===J.src.charCodeAt(Gc)?(fb=Gc+1,Gc=J.md.helpers.parseLinkLabel(J,Gc),0<=Gc?Q=J.src.slice(fb,Gc++):Gc=Mc+1):Gc=Mc+1;Q||(Q=J.src.slice(kc,Mc));nb=J.env.references[Rc(Q)];if(!nb)return J.pos=Ia,!1;Rb=nb.href;nb=nb.title}ja||(J.pos=kc,J.posMax=Mc,ja=J.push("link_open","a",1),ja.attrs=Rb=[["href",Rb]],nb&&Rb.push(["title",
nb]),J.md.inline.tokenize(J),J.push("link_close","a",-1));J.pos=Gc;J.posMax=lb;return!0},sd={},ce=Md.normalizeReference,pe=Md.isSpace,He=sd=function(J,ja){var Rb;var Q="";var nb=J.pos,Ia=J.posMax;if(33!==J.src.charCodeAt(J.pos)||91!==J.src.charCodeAt(J.pos+1))return!1;var lb=J.pos+2;var fb=J.md.helpers.parseLinkLabel(J,J.pos+1,!1);if(0>fb)return!1;var kb=fb+1;if(kb<Ia&&40===J.src.charCodeAt(kb)){for(kb++;kb<Ia;kb++){var kc=J.src.charCodeAt(kb);if(!pe(kc)&&10!==kc)break}if(kb>=Ia)return!1;kc=J.md.helpers.parseLinkDestination(J.src,
kb,J.posMax);kc.ok&&(Q=J.md.normalizeLink(kc.str),J.md.validateLink(Q)?kb=kc.pos:Q="");for(Rb=kb;kb<Ia&&(kc=J.src.charCodeAt(kb),pe(kc)||10===kc);kb++);kc=J.md.helpers.parseLinkTitle(J.src,kb,J.posMax);if(kb<Ia&&Rb!==kb&&kc.ok)for(Rb=kc.str,kb=kc.pos;kb<Ia&&(kc=J.src.charCodeAt(kb),pe(kc)||10===kc);kb++);else Rb="";if(kb>=Ia||41!==J.src.charCodeAt(kb))return J.pos=nb,!1;kb++}else{if("undefined"===typeof J.env.references)return!1;kb<Ia&&91===J.src.charCodeAt(kb)?(Rb=kb+1,kb=J.md.helpers.parseLinkLabel(J,
kb),0<=kb?kc=J.src.slice(Rb,kb++):kb=fb+1):kb=fb+1;kc||(kc=J.src.slice(lb,fb));Rb=J.env.references[ce(kc)];if(!Rb)return J.pos=nb,!1;Q=Rb.href;Rb=Rb.title}ja||(ja=J.src.slice(lb,fb),J.md.inline.parse(ja,J.md,J.env,lb=[]),fb=J.push("image","img",0),fb.attrs=Q=[["src",Q],["alt",""]],fb.children=lb,fb.content=ja,Rb&&Q.push(["title",Rb]));J.pos=kb;J.posMax=Ia;return!0},Ze={},fg=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,
gg=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,Og=Ze=function(J,ja){var Rb,Q=J.pos;if(60!==J.src.charCodeAt(Q))return!1;var nb=J.pos;for(Rb=J.posMax;;){if(++Q>=Rb)return!1;var Ia=J.src.charCodeAt(Q);if(60===Ia)return!1;if(62===Ia)break}Ia=J.src.slice(nb+1,Q);if(gg.test(Ia)){nb=J.md.normalizeLink(Ia);if(!J.md.validateLink(nb))return!1;ja||(ja=J.push("link_open","a",1),ja.attrs=[["href",nb]],ja.markup="autolink",ja.info="auto",ja=J.push("text","",0),ja.content=J.md.normalizeLinkText(Ia),ja=
J.push("link_close","a",-1),ja.markup="autolink",ja.info="auto");J.pos+=Ia.length+2;return!0}if(fg.test(Ia)){nb=J.md.normalizeLink("mailto:"+Ia);if(!J.md.validateLink(nb))return!1;ja||(ja=J.push("link_open","a",1),ja.attrs=[["href",nb]],ja.markup="autolink",ja.info="auto",ja=J.push("text","",0),ja.content=J.md.normalizeLinkText(Ia),ja=J.push("link_close","a",-1),ja.markup="autolink",ja.info="auto");J.pos+=Ia.length+2;return!0}return!1},hh={},vg=hh=function(J,ja){var Rb=J.pos;if(!J.md.options.html)return!1;
var Q=J.posMax;if(60!==J.src.charCodeAt(Rb)||Rb+2>=Q)return!1;Q=J.src.charCodeAt(Rb+1);var nb;if(nb=33!==Q&&63!==Q&&47!==Q)Q|=32,nb=!(97<=Q&&122>=Q);if(nb)return!1;Q=J.src.slice(Rb).match(qg);if(!Q)return!1;ja||(ja=J.push("html_inline","",0),ja.content=J.src.slice(Rb,Rb+Q[0].length));J.pos+=Q[0].length;return!0},ph={},qj=Md.has,fj=Md.isValidEntityCode,Li=Md.fromCodePoint,pl=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Qk=/^&([a-z][a-z0-9]{1,31});/i,sm=ph=function(J,ja){var Rb=J.pos;var Q=J.posMax;if(38!==
J.src.charCodeAt(Rb))return!1;if(Rb+1<Q)if(Q=J.src.charCodeAt(Rb+1),35===Q){if(Rb=J.src.slice(Rb).match(pl))return ja||(ja="x"===Rb[1][0].toLowerCase()?parseInt(Rb[1].slice(1),16):parseInt(Rb[1],10),J.pending+=fj(ja)?Li(ja):Li(65533)),J.pos+=Rb[0].length,!0}else if((Rb=J.src.slice(Rb).match(Qk))&&qj(ti,Rb[1]))return ja||(J.pending+=ti[Rb[1]]),J.pos+=Rb[0].length,!0;ja||(J.pending+="&");J.pos++;return!0},Mo={},my=Mo=function(J){var ja,Rb=J.tokens_meta,Q=J.tokens_meta.length;fa(J,J.delimiters);for(ja=
0;ja<Q;ja++)Rb[ja]&&Rb[ja].delimiters&&fa(J,Rb[ja].delimiters)},jv={};jv=function(J){var ja,Rb=0,Q=J.tokens,nb=J.tokens.length;for(J=ja=0;J<nb;J++)0>Q[J].nesting&&Rb--,Q[J].level=Rb,0<Q[J].nesting&&Rb++,"text"===Q[J].type&&J+1<nb&&"text"===Q[J+1].type?Q[J+1].content=Q[J].content+Q[J+1].content:(J!==ja&&(Q[ja]=Q[J]),ja++);J!==ja&&(Q.length=ja)};var Xs={},kv=ol,Dp=[["text",Ap],["newline",cr],["escape",Lo],["backticks",xc],["strikethrough",function(J,ja){var Rb=J.src.charCodeAt(J.pos);if(ja||126!==Rb)return!1;
var Q=J.scanDelims(J.pos,!0);var nb=Q.length;var Ia=String.fromCharCode(Rb);if(2>nb)return!1;if(nb%2){var lb=J.push("text","",0);lb.content=Ia;nb--}for(ja=0;ja<nb;ja+=2)lb=J.push("text","",0),lb.content=Ia+Ia,J.delimiters.push({marker:Rb,length:0,token:J.tokens.length-1,end:-1,open:Q.can_open,close:Q.can_close});J.pos+=Q.length;return!0}],["emphasis",function(J,ja){var Rb=J.src.charCodeAt(J.pos);if(ja||95!==Rb&&42!==Rb)return!1;var Q=J.scanDelims(J.pos,42===Rb);for(ja=0;ja<Q.length;ja++){var nb=J.push("text",
"",0);nb.content=String.fromCharCode(Rb);J.delimiters.push({marker:Rb,length:Q.length,token:J.tokens.length-1,end:-1,open:Q.can_open,close:Q.can_close})}J.pos+=Q.length;return!0}],["link",Dc],["image",He],["autolink",Og],["html_inline",vg],["entity",sm]],fr=[["balance_pairs",my],["strikethrough",function(J){var ja,Rb=J.tokens_meta,Q=J.tokens_meta.length;O(J,J.delimiters);for(ja=0;ja<Q;ja++)Rb[ja]&&Rb[ja].delimiters&&O(J,Rb[ja].delimiters)}],["emphasis",function(J){var ja,Rb=J.tokens_meta,Q=J.tokens_meta.length;
P(J,J.delimiters);for(ja=0;ja<Q;ja++)Rb[ja]&&Rb[ja].delimiters&&P(J,Rb[ja].delimiters)}],["text_collapse",jv]];Qa.prototype.skipToken=function(J){var ja=J.pos,Rb=this.ruler.getRules(""),Q=Rb.length;var nb=J.md.options.maxNesting;var Ia=J.cache;if("undefined"!==typeof Ia[ja])J.pos=Ia[ja];else{if(J.level<nb)for(nb=0;nb<Q;nb++){J.level++;var lb=Rb[nb](J,!0);J.level--;if(lb)break}else J.pos=J.posMax;lb||J.pos++;Ia[ja]=J.pos}};Qa.prototype.tokenize=function(J){for(var ja,Rb,Q=this.ruler.getRules(""),nb=
Q.length,Ia=J.posMax,lb=J.md.options.maxNesting;J.pos<Ia;){if(J.level<lb)for(Rb=0;Rb<nb&&!(ja=Q[Rb](J,!1));Rb++);if(ja){if(J.pos>=Ia)break}else J.pending+=J.src[J.pos++]}J.pending&&J.pushPending()};Qa.prototype.parse=function(J,ja,Rb,Q){Q=new this.State(J,ja,Rb,Q);this.tokenize(Q);ja=this.ruler2.getRules("");Rb=ja.length;for(J=0;J<Rb;J++)ja[J](Q)};Qa.prototype.State=jf;var mv=Xs=Qa,ny={},oy=ny={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",
highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},nv={};nv={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:"blockquote code fence heading hr html_block lheading list reference paragraph".split(" ")},
inline:{rules:"autolink backticks emphasis entity escape html_inline image link newline text".split(" "),rules2:["balance_pairs","emphasis","text_collapse"]}}};var py={},Ep=Md,lv=el,qy=be,sy=vp,ty=Vm,uy=mv,vy="default"in pk?Dk:pk,Qn="default"in pf?bf:pf,ov="default"in km?ba:km,wy={default:lm,zero:oy,commonmark:nv},xy=/^(vbscript|javascript|file|data):/,yy=/^data:image\/(gif|png|jpeg|webp);/,pv=["http:","https:","mailto:"];mc.prototype.set=function(J){Ep.assign(this.options,J);return this};mc.prototype.configure=
function(J){var ja=this;if(Ep.isString(J)){var Rb=J;J=wy[Rb];if(!J)throw Error('Wrong `markdown-it` preset "'+Rb+'", check name');}if(!J)throw Error("Wrong `markdown-it` preset, can't be empty");J.options&&ja.set(J.options);J.components&&Object.keys(J.components).forEach(function(Q){J.components[Q].rules&&ja[Q].ruler.enableOnly(J.components[Q].rules);J.components[Q].rules2&&ja[Q].ruler2.enableOnly(J.components[Q].rules2)});return this};mc.prototype.enable=function(J,ja){var Rb=[];Array.isArray(J)||
(J=[J]);["core","block","inline"].forEach(function(nb){Rb=Rb.concat(this[nb].ruler.enable(J,!0))},this);Rb=Rb.concat(this.inline.ruler2.enable(J,!0));var Q=J.filter(function(nb){return 0>Rb.indexOf(nb)});if(Q.length&&!ja)throw Error("MarkdownIt. Failed to enable unknown rule(s): "+Q);return this};mc.prototype.disable=function(J,ja){var Rb=[];Array.isArray(J)||(J=[J]);["core","block","inline"].forEach(function(nb){Rb=Rb.concat(this[nb].ruler.disable(J,!0))},this);Rb=Rb.concat(this.inline.ruler2.disable(J,
!0));var Q=J.filter(function(nb){return 0>Rb.indexOf(nb)});if(Q.length&&!ja)throw Error("MarkdownIt. Failed to disable unknown rule(s): "+Q);return this};mc.prototype.use=function(J){var ja=[this].concat(Array.prototype.slice.call(arguments,1));J.apply(J,ja);return this};mc.prototype.parse=function(J,ja){if("string"!==typeof J)throw Error("Input data should be a String");J=new this.core.State(J,this,ja);this.core.process(J);return J.tokens};mc.prototype.render=function(J,ja){ja=ja||{};return this.renderer.render(this.parse(J,
ja),this.options,ja)};mc.prototype.parseInline=function(J,ja){J=new this.core.State(J,this,ja);J.inlineMode=!0;this.core.process(J);return J.tokens};mc.prototype.renderInline=function(J,ja){ja=ja||{};return this.renderer.render(this.parseInline(J,ja),this.options,ja)};var zy=py=mc,xi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,No={};(function(J,ja){No=ja()})(No,function(){function J(sc,Uc){Uc=null==Uc?sc.length-1:+Uc;return function(){for(var Cd=Math.max(arguments.length-
Uc,0),de=Array(Cd),se=0;se<Cd;se++)de[se]=arguments[se+Uc];switch(Uc){case 0:return sc.call(this||xi,de);case 1:return sc.call(this||xi,arguments[0],de);case 2:return sc.call(this||xi,arguments[0],arguments[1],de)}Cd=Array(Uc+1);for(se=0;se<Uc;se++)Cd[se]=arguments[se];Cd[Uc]=de;return sc.apply(this||xi,Cd)}}function ja(sc){var Uc=typeof sc;return"function"===Uc||"object"===Uc&&!!sc}function Rb(sc){return void 0===sc}function Q(sc){return!0===sc||!1===sc||"[object Boolean]"===Vn.call(sc)}function nb(sc){var Uc=
"[object "+sc+"]";return function(Cd){return Vn.call(Cd)===Uc}}function Ia(sc){return null!=sc&&Yj(sc.getInt8)&&Av(sc.buffer)}function lb(sc,Uc){return null!=sc&&nt.call(sc,Uc)}function fb(sc){return ut(sc)&&vv(sc)}function kb(sc){return function(){return sc}}function kc(sc){return function(Uc){Uc=sc(Uc);return"number"==typeof Uc&&0<=Uc&&Uc<=wv}}function Mc(sc){return function(Uc){return null==Uc?void 0:Uc[sc]}}function Gc(sc){return qt?qt(sc)&&!Pp(sc):Dv(sc)&&Ev.test(Vn.call(sc))}function Xc(sc){for(var Uc=
{},Cd=sc.length,de=0;de<Cd;++de)Uc[sc[de]]=!0;return{contains:function(se){return!0===Uc[se]},push:function(se){Uc[se]=!0;return sc.push(se)}}}function ad(sc,Uc){Uc=Xc(Uc);var Cd=tt.length,de=sc.constructor;de=Yj(de)&&de.prototype||Np;var se="constructor";for(lb(sc,se)&&!Uc.contains(se)&&Uc.push(se);Cd--;)se=tt[Cd],se in sc&&sc[se]!==de[se]&&!Uc.contains(se)&&Uc.push(se)}function he(sc){if(!ja(sc))return[];if(ot)return ot(sc);var Uc=[],Cd;for(Cd in sc)lb(sc,Cd)&&Uc.push(Cd);st&&ad(sc,Uc);return Uc}
function we(sc,Uc){var Cd=he(Uc),de=Cd.length;if(null==sc)return!de;sc=Object(sc);for(var se=0;se<de;se++){var Ke=Cd[se];if(Uc[Ke]!==sc[Ke]||!(Ke in sc))return!1}return!0}function $e(sc){if(sc instanceof $e)return sc;if(!((this||xi)instanceof $e))return new $e(sc);(this||xi)._wrapped=sc}function Qe(sc,Uc,Cd,de){if(sc===Uc)return 0!==sc||1/sc===1/Uc;if(null==sc||null==Uc)return!1;if(sc!==sc)return Uc!==Uc;var se=typeof sc;return"function"!==se&&"object"!==se&&"object"!=typeof Uc?!1:dg(sc,Uc,Cd,de)}
function dg(sc,Uc,Cd,de){sc instanceof $e&&(sc=sc._wrapped);Uc instanceof $e&&(Uc=Uc._wrapped);var se=Vn.call(sc);if(se!==Vn.call(Uc))return!1;if(xt&&"[object Object]"==se&&Pp(sc)){if(!Pp(Uc))return!1;se="[object DataView]"}switch(se){case "[object RegExp]":case "[object String]":return""+sc===""+Uc;case "[object Number]":return+sc!==+sc?+Uc!==+Uc:0===+sc?1/+sc===1/Uc:+sc===+Uc;case "[object Date]":case "[object Boolean]":return+sc===+Uc;case "[object Symbol]":return rr.valueOf.call(sc)===rr.valueOf.call(Uc);
case "[object ArrayBuffer]":case "[object DataView]":return dg(new Uint8Array(sc.buffer||sc,sc.byteOffset||0,bn(sc)),new Uint8Array(Uc.buffer||Uc,Uc.byteOffset||0,bn(Uc)),Cd,de)}se="[object Array]"===se;if(!se&&yt(sc)){if(bn(sc)!==bn(Uc))return!1;if(sc.buffer===Uc.buffer&&sc.byteOffset===Uc.byteOffset)return!0;se=!0}if(!se){if("object"!=typeof sc||"object"!=typeof Uc)return!1;var Ke=sc.constructor,Yf=Uc.constructor;if(Ke!==Yf&&!(Yj(Ke)&&Ke instanceof Ke&&Yj(Yf)&&Yf instanceof Yf)&&"constructor"in
sc&&"constructor"in Uc)return!1}Cd=Cd||[];de=de||[];for(Ke=Cd.length;Ke--;)if(Cd[Ke]===sc)return de[Ke]===Uc;Cd.push(sc);de.push(Uc);if(se){Ke=sc.length;if(Ke!==Uc.length)return!1;for(;Ke--;)if(!Qe(sc[Ke],Uc[Ke],Cd,de))return!1}else{se=he(sc);Ke=se.length;if(he(Uc).length!==Ke)return!1;for(;Ke--;)if(Yf=se[Ke],!lb(Uc,Yf)||!Qe(sc[Yf],Uc[Yf],Cd,de))return!1}Cd.pop();de.pop();return!0}function Cf(sc){if(!ja(sc))return[];var Uc=[],Cd;for(Cd in sc)Uc.push(Cd);st&&ad(sc,Uc);return Uc}function Fh(sc){var Uc=
Gk(sc);return function(Cd){if(null==Cd)return!1;var de=Cf(Cd);if(Gk(de))return!1;for(de=0;de<Uc;de++)if(!Yj(Cd[sc[de]]))return!1;return sc!==Bt||!Yj(Cd[zt])}}function ag(sc){for(var Uc=he(sc),Cd=Uc.length,de=Array(Cd),se=0;se<Cd;se++)de[se]=sc[Uc[se]];return de}function ng(sc){for(var Uc={},Cd=he(sc),de=0,se=Cd.length;de<se;de++)Uc[sc[Cd[de]]]=Cd[de];return Uc}function Gj(sc){var Uc=[],Cd;for(Cd in sc)Yj(sc[Cd])&&Uc.push(Cd);return Uc.sort()}function zj(sc,Uc){return function(Cd){var de=arguments.length;
Uc&&(Cd=Object(Cd));if(2>de||null==Cd)return Cd;for(var se=1;se<de;se++)for(var Ke=arguments[se],Yf=sc(Ke),Bg=Yf.length,ui=0;ui<Bg;ui++){var rj=Yf[ui];Uc&&void 0!==Cd[rj]||(Cd[rj]=Ke[rj])}return Cd}}function gl(){return function(){}}function og(sc){if(!ja(sc))return{};if(pt)return pt(sc);var Uc=gl();Uc.prototype=sc;sc=new Uc;Uc.prototype=null;return sc}function ek(sc){return ym(sc)?sc:[sc]}function bj(sc,Uc){for(var Cd=Uc.length,de=0;de<Cd;de++){if(null==sc)return;sc=sc[Uc[de]]}return Cd?sc:void 0}
function Ym(sc,Uc,Cd){sc=bj(sc,$e.toPath(Uc));return Rb(sc)?Cd:sc}function Pj(sc){return sc}function ge(sc){sc=Qp({},sc);return function(Uc){return we(Uc,sc)}}function Ed(sc){sc=$e.toPath(sc);return function(Uc){return bj(Uc,sc)}}function Kf(sc,Uc,Cd){if(void 0===Uc)return sc;switch(null==Cd?3:Cd){case 1:return function(de){return sc.call(Uc,de)};case 3:return function(de,se,Ke){return sc.call(Uc,de,se,Ke)};case 4:return function(de,se,Ke,Yf){return sc.call(Uc,de,se,Ke,Yf)}}return function(){return sc.apply(Uc,
arguments)}}function Di(sc,Uc,Cd){return null==sc?Pj:Yj(sc)?Kf(sc,Uc,Cd):ja(sc)&&!ym(sc)?ge(sc):Ed(sc)}function rk(sc,Uc){return Di(sc,Uc,Infinity)}function cj(sc,Uc,Cd){return $e.iteratee!==rk?$e.iteratee(sc,Uc):Di(sc,Uc,Cd)}function Hj(){}function vm(sc,Uc){null==Uc&&(Uc=sc,sc=0);return sc+Math.floor(Math.random()*(Uc-sc+1))}function Po(sc){var Uc=function(Ke){return sc[Ke]},Cd="(?:"+he(sc).join("|")+")",de=RegExp(Cd),se=RegExp(Cd,"g");return function(Ke){Ke=null==Ke?"":""+Ke;return de.test(Ke)?
Ke.replace(se,Uc):Ke}}function Zm(sc){return"\\"+Ov[sc]}function et(sc,Uc,Cd,de,se){if(!(de instanceof Uc))return sc.apply(Cd,se);Uc=og(sc.prototype);sc=sc.apply(Uc,se);return ja(sc)?sc:Uc}function $m(sc,Uc,Cd,de){de=de||[];if(!Uc&&0!==Uc)Uc=Infinity;else if(0>=Uc)return de.concat(sc);for(var se=de.length,Ke=0,Yf=Gk(sc);Ke<Yf;Ke++){var Bg=sc[Ke];if(sk(Bg)&&(ym(Bg)||wr(Bg)))if(1<Uc)$m(Bg,Uc-1,Cd,de),se=de.length;else for(var ui=0,rj=Bg.length;ui<rj;)de[se++]=Bg[ui++];else Cd||(de[se++]=Bg)}return de}
function lr(sc){return function(){return!sc.apply(this||xi,arguments)}}function ft(sc,Uc){var Cd;return function(){0<--sc&&(Cd=Uc.apply(this||xi,arguments));1>=sc&&(Uc=null);return Cd}}function Tn(sc,Uc,Cd){Uc=cj(Uc,Cd);Cd=he(sc);for(var de,se=0,Ke=Cd.length;se<Ke;se++)if(de=Cd[se],Uc(sc[de],de,sc))return de}function gt(sc){return function(Uc,Cd,de){Cd=cj(Cd,de);de=Gk(Uc);for(var se=0<sc?0:de-1;0<=se&&se<de;se+=sc)if(Cd(Uc[se],se,Uc))return se;return-1}}function ht(sc,Uc,Cd,de){Cd=cj(Cd,de,1);Uc=
Cd(Uc);de=0;for(var se=Gk(sc);de<se;){var Ke=Math.floor((de+se)/2);Cd(sc[Ke])<Uc?de=Ke+1:se=Ke}return de}function it(sc,Uc,Cd){return function(de,se,Ke){var Yf=0,Bg=Gk(de);if("number"==typeof Ke)0<sc?Yf=0<=Ke?Ke:Math.max(Ke+Bg,Yf):Bg=0<=Ke?Math.min(Ke+1,Bg):Ke+Bg+1;else if(Cd&&Ke&&Bg)return Ke=Cd(de,se),de[Ke]===se?Ke:-1;if(se!==se)return Ke=Uc(Vo.call(de,Yf,Bg),fb),0<=Ke?Ke+Yf:-1;for(Ke=0<sc?Yf:Bg-1;0<=Ke&&Ke<Bg;Ke+=sc)if(de[Ke]===se)return Ke;return-1}}function Ek(sc,Uc,Cd){Uc=(sk(sc)?Vp:Tn)(sc,
Uc,Cd);if(void 0!==Uc&&-1!==Uc)return sc[Uc]}function Fk(sc,Uc,Cd){Uc=Kf(Uc,Cd);var de;if(sk(sc))for(Cd=0,de=sc.length;Cd<de;Cd++)Uc(sc[Cd],Cd,sc);else{var se=he(sc);Cd=0;for(de=se.length;Cd<de;Cd++)Uc(sc[se[Cd]],se[Cd],sc)}return sc}function wm(sc,Uc,Cd){Uc=cj(Uc,Cd);Cd=!sk(sc)&&he(sc);for(var de=(Cd||sc).length,se=Array(de),Ke=0;Ke<de;Ke++){var Yf=Cd?Cd[Ke]:Ke;se[Ke]=Uc(sc[Yf],Yf,sc)}return se}function jt(sc){return function(Uc,Cd,de,se){var Ke=3<=arguments.length,Yf=Kf(Cd,se,4),Bg=de,ui=!sk(Uc)&&
he(Uc),rj=(ui||Uc).length,ie=0<sc?0:rj-1;Ke||(Bg=Uc[ui?ui[ie]:ie],ie+=sc);for(;0<=ie&&ie<rj;ie+=sc)Ke=ui?ui[ie]:ie,Bg=Yf(Bg,Uc[Ke],Ke,Uc);return Bg}}function Ro(sc,Uc,Cd){var de=[];Uc=cj(Uc,Cd);Fk(sc,function(se,Ke,Yf){Uc(se,Ke,Yf)&&de.push(se)});return de}function qv(sc,Uc,Cd){Uc=cj(Uc,Cd);Cd=!sk(sc)&&he(sc);for(var de=(Cd||sc).length,se=0;se<de;se++){var Ke=Cd?Cd[se]:se;if(!Uc(sc[Ke],Ke,sc))return!1}return!0}function rv(sc,Uc,Cd){Uc=cj(Uc,Cd);Cd=!sk(sc)&&he(sc);for(var de=(Cd||sc).length,se=0;se<
de;se++){var Ke=Cd?Cd[se]:se;if(Uc(sc[Ke],Ke,sc))return!0}return!1}function xm(sc,Uc,Cd,de){sk(sc)||(sc=ag(sc));if("number"!=typeof Cd||de)Cd=0;return 0<=Wp(sc,Uc,Cd)}function Lp(sc,Uc){return wm(sc,Ed(Uc))}function kt(sc,Uc,Cd){var de=-Infinity,se=-Infinity,Ke;if(null==Uc||"number"==typeof Uc&&"object"!=typeof sc[0]&&null!=sc){sc=sk(sc)?sc:ag(sc);for(var Yf=0,Bg=sc.length;Yf<Bg;Yf++)Cd=sc[Yf],null!=Cd&&Cd>de&&(de=Cd)}else Uc=cj(Uc,Cd),Fk(sc,function(ui,rj,ie){Ke=Uc(ui,rj,ie);if(Ke>se||-Infinity===
Ke&&-Infinity===de)de=ui,se=Ke});return de}function So(sc){return sc?ym(sc)?Vo.call(sc):tr(sc)?sc.match(Iy):sk(sc)?wm(sc,Pj):ag(sc):[]}function To(sc,Uc,Cd){if(null==Uc||Cd)return sk(sc)||(sc=ag(sc)),sc[vm(sc.length-1)];sc=So(sc);Cd=Gk(sc);Uc=Math.max(Math.min(Uc,Cd),0);--Cd;for(var de=0;de<Uc;de++){var se=vm(de,Cd),Ke=sc[de];sc[de]=sc[se];sc[se]=Ke}return sc.slice(0,Uc)}function Qj(sc,Uc){return function(Cd,de,se){var Ke=Uc?[[],[]]:{};de=cj(de,se);Fk(Cd,function(Yf,Bg){Bg=de(Yf,Bg,Cd);sc(Ke,Yf,Bg)});
return Ke}}function sv(sc,Uc,Cd){return Uc in Cd}function mr(sc,Uc,Cd){return Vo.call(sc,0,Math.max(0,sc.length-(null==Uc||Cd?1:Uc)))}function nr(sc,Uc,Cd){return null==sc||1>sc.length?null==Uc||Cd?void 0:[]:null==Uc||Cd?sc[0]:mr(sc,sc.length-Uc)}function Uo(sc,Uc,Cd){return Vo.call(sc,null==Uc||Cd?1:Uc)}function or(sc,Uc,Cd,de){Q(Uc)||(de=Cd,Cd=Uc,Uc=!1);null!=Cd&&(Cd=cj(Cd,de));de=[];for(var se=[],Ke=0,Yf=Gk(sc);Ke<Yf;Ke++){var Bg=sc[Ke],ui=Cd?Cd(Bg,Ke,sc):Bg;Uc&&!Cd?(Ke&&se===ui||de.push(Bg),se=
ui):Cd?xm(se,ui)||(se.push(ui),de.push(Bg)):xm(de,Bg)||de.push(Bg)}return de}function Mp(sc){for(var Uc=sc&&kt(sc,Gk).length||0,Cd=Array(Uc),de=0;de<Uc;de++)Cd[de]=Lp(sc,de);return Cd}function pr(sc,Uc){return sc._chain?$e(Uc).chain():Uc}function lt(sc){Fk(Gj(sc),function(Uc){var Cd=$e[Uc]=sc[Uc];$e.prototype[Uc]=function(){var de=[(this||xi)._wrapped];mt.apply(de,arguments);return pr(this||xi,Cd.apply($e,de))}});return $e}var qr="object"==typeof self&&self.self===self&&self||"object"==typeof xi&&
xi.global===xi&&xi||Function("return this")()||{},Un=Array.prototype,Np=Object.prototype,rr="undefined"!==typeof Symbol?Symbol.prototype:null,mt=Un.push,Vo=Un.slice,Vn=Np.toString,nt=Np.hasOwnProperty,sr="undefined"!==typeof ArrayBuffer,tv="undefined"!==typeof DataView,uv=Array.isArray,ot=Object.keys,pt=Object.create,qt=sr&&ArrayBuffer.isView,vv=isNaN,rt=isFinite,st=!{toString:null}.propertyIsEnumerable("toString"),tt="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" "),
wv=Math.pow(2,53)-1,tr=nb("String"),ut=nb("Number"),xv=nb("Date"),yv=nb("RegExp"),zv=nb("Error"),ur=nb("Symbol"),Av=nb("ArrayBuffer"),vt=nb("Function"),Bv=qr.document&&qr.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Bv&&(vt=function(sc){return"function"==typeof sc||!1});var Yj=vt,wt=nb("Object"),xt=tv&&wt(new DataView(new ArrayBuffer(8))),Op="undefined"!==typeof Map&&wt(new Map),Cv=nb("DataView"),Pp=xt?Ia:Cv,ym=uv||nb("Array"),vr=nb("Arguments");(function(){vr(arguments)||
(vr=function(sc){return lb(sc,"callee")})})();var wr=vr,bn=Mc("byteLength"),Dv=kc(bn),Ev=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,yt=sr?Gc:kb(!1),Gk=Mc("length");$e.VERSION="1.13.4";$e.prototype.value=function(){return(this||xi)._wrapped};$e.prototype.valueOf=$e.prototype.toJSON=$e.prototype.value;$e.prototype.toString=function(){return String((this||xi)._wrapped)};var zt="forEach",xr=["clear","delete"],At=["get","has","set"],Fv=xr.concat(zt,At),Bt=xr.concat(At),
Gv=["add"].concat(xr,zt,"has"),Hv=Op?Fh(Fv):nb("Map"),Iv=Op?Fh(Bt):nb("WeakMap"),Jv=Op?Fh(Gv):nb("Set"),Kv=nb("WeakSet"),Lv=zj(Cf),Qp=zj(he),yr=zj(Cf,!0);$e.toPath=ek;$e.iteratee=rk;var zm=Date.now||function(){return(new Date).getTime()},Ct={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Fy=Po(Ct),Mv=ng(Ct),Nv=Po(Mv),Dt=$e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Rp=/(.)^/,Ov={"'":"'","\\":"\\","\r":"r","\n":"n",
"\u2028":"u2028","\u2029":"u2029"},Pv=/\\|'|\r|\n|\u2028|\u2029/g,Et=/^\s*(\w|\$)+\s*$/,Qv=0,dn=J(function(sc,Uc){var Cd=dn.placeholder,de=function(){for(var se=0,Ke=Uc.length,Yf=Array(Ke),Bg=0;Bg<Ke;Bg++)Yf[Bg]=Uc[Bg]===Cd?arguments[se++]:Uc[Bg];for(;se<arguments.length;)Yf.push(arguments[se++]);return et(sc,de,this||xi,this||xi,Yf)};return de});dn.placeholder=$e;var Sp=J(function(sc,Uc,Cd){if(!Yj(sc))throw new TypeError("Bind must be called on a function");var de=J(function(se){return et(sc,de,
Uc,this||xi,Cd.concat(se))});return de}),sk=kc(Gk),Rv=J(function(sc,Uc){Uc=$m(Uc,!1,!1);var Cd=Uc.length;if(1>Cd)throw Error("bindAll must be passed function names");for(;Cd--;){var de=Uc[Cd];sc[de]=Sp(sc[de],sc)}return sc}),Tp=J(function(sc,Uc,Cd){return setTimeout(function(){return sc.apply(null,Cd)},Uc)}),Up=dn(Tp,$e,1),zr=dn(ft,2),Vp=gt(1),Ft=gt(-1),Wp=it(1,Vp,ht),Gy=it(-1,Ft),Am=jt(1),Ar=jt(-1),Hy=J(function(sc,Uc,Cd){if(Yj(Uc))var de=Uc;else{Uc=$e.toPath(Uc);var se=Uc.slice(0,-1);Uc=Uc[Uc.length-
1]}return wm(sc,function(Ke){var Yf=de;if(!Yf){se&&se.length&&(Ke=bj(Ke,se));if(null==Ke)return;Yf=Ke[Uc]}return null==Yf?Yf:Yf.apply(Ke,Cd)})}),Iy=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,Jy=Qj(function(sc,Uc,Cd){lb(sc,Cd)?sc[Cd].push(Uc):sc[Cd]=[Uc]}),Ky=Qj(function(sc,Uc,Cd){sc[Cd]=Uc}),Ly=Qj(function(sc,Uc,Cd){lb(sc,Cd)?sc[Cd]++:sc[Cd]=1}),My=Qj(function(sc,Uc,Cd){sc[Cd?0:1].push(Uc)},!0),Sv=J(function(sc,Uc){var Cd={},de=Uc[0];if(null==sc)return Cd;Yj(de)?(1<Uc.length&&
(de=Kf(de,Uc[1])),Uc=Cf(sc)):(de=sv,Uc=$m(Uc,!1,!1),sc=Object(sc));for(var se=0,Ke=Uc.length;se<Ke;se++){var Yf=Uc[se],Bg=sc[Yf];de(Bg,Yf,sc)&&(Cd[Yf]=Bg)}return Cd}),Tv=J(function(sc,Uc){var Cd=Uc[0],de;Yj(Cd)?(Cd=lr(Cd),1<Uc.length&&(de=Uc[1])):(Uc=wm($m(Uc,!1,!1),String),Cd=function(se,Ke){return!xm(Uc,Ke)});return Sv(sc,Cd,de)}),Wo=J(function(sc,Uc){Uc=$m(Uc,!0,!0);return Ro(sc,function(Cd){return!xm(Uc,Cd)})}),Br=J(function(sc,Uc){return Wo(sc,Uc)}),Gt=J(function(sc){return or($m(sc,!0,!0))}),
Uv=J(Mp);Fk("pop push reverse shift sort splice unshift".split(" "),function(sc){var Uc=Un[sc];$e.prototype[sc]=function(){var Cd=(this||xi)._wrapped;null!=Cd&&(Uc.apply(Cd,arguments),"shift"!==sc&&"splice"!==sc||0!==Cd.length||delete Cd[0]);return pr(this||xi,Cd)}});Fk(["concat","join","slice"],function(sc){var Uc=Un[sc];$e.prototype[sc]=function(){var Cd=(this||xi)._wrapped;null!=Cd&&(Cd=Uc.apply(Cd,arguments));return pr(this||xi,Cd)}});var Cr=lt({__proto__:null,VERSION:"1.13.4",restArguments:J,
isObject:ja,isNull:function(sc){return null===sc},isUndefined:Rb,isBoolean:Q,isElement:function(sc){return!(!sc||1!==sc.nodeType)},isString:tr,isNumber:ut,isDate:xv,isRegExp:yv,isError:zv,isSymbol:ur,isArrayBuffer:Av,isDataView:Pp,isArray:ym,isFunction:Yj,isArguments:wr,isFinite:function(sc){return!ur(sc)&&rt(sc)&&!isNaN(parseFloat(sc))},isNaN:fb,isTypedArray:yt,isEmpty:function(sc){if(null==sc)return!0;var Uc=Gk(sc);return"number"==typeof Uc&&(ym(sc)||tr(sc)||wr(sc))?0===Uc:0===Gk(he(sc))},isMatch:we,
isEqual:function(sc,Uc){return Qe(sc,Uc)},isMap:Hv,isWeakMap:Iv,isSet:Jv,isWeakSet:Kv,keys:he,allKeys:Cf,values:ag,pairs:function(sc){for(var Uc=he(sc),Cd=Uc.length,de=Array(Cd),se=0;se<Cd;se++)de[se]=[Uc[se],sc[Uc[se]]];return de},invert:ng,functions:Gj,methods:Gj,extend:Lv,extendOwn:Qp,assign:Qp,defaults:yr,create:function(sc,Uc){sc=og(sc);Uc&&Qp(sc,Uc);return sc},clone:function(sc){return ja(sc)?ym(sc)?sc.slice():Lv({},sc):sc},tap:function(sc,Uc){Uc(sc);return sc},get:Ym,has:function(sc,Uc){Uc=
$e.toPath(Uc);for(var Cd=Uc.length,de=0;de<Cd;de++){var se=Uc[de];if(!lb(sc,se))return!1;sc=sc[se]}return!!Cd},mapObject:function(sc,Uc,Cd){Uc=cj(Uc,Cd);Cd=he(sc);for(var de=Cd.length,se={},Ke=0;Ke<de;Ke++){var Yf=Cd[Ke];se[Yf]=Uc(sc[Yf],Yf,sc)}return se},identity:Pj,constant:kb,noop:Hj,toPath:ek,property:Ed,propertyOf:function(sc){return null==sc?Hj:function(Uc){return Ym(sc,Uc)}},matcher:ge,matches:ge,times:function(sc,Uc,Cd){var de=Array(Math.max(0,sc));Uc=Kf(Uc,Cd,1);for(Cd=0;Cd<sc;Cd++)de[Cd]=
Uc(Cd);return de},random:vm,now:zm,escape:Fy,unescape:Nv,templateSettings:Dt,template:function(sc,Uc,Cd){!Uc&&Cd&&(Uc=Cd);Uc=yr({},Uc,$e.templateSettings);Cd=RegExp([(Uc.escape||Rp).source,(Uc.interpolate||Rp).source,(Uc.evaluate||Rp).source].join("|")+"|$","g");var de=0,se="__p+='";sc.replace(Cd,function(Yf,Bg,ui,rj,ie){se+=sc.slice(de,ie).replace(Pv,Zm);de=ie+Yf.length;Bg?se+="'+\n((__t=("+Bg+"))==null?'':_.escape(__t))+\n'":ui?se+="'+\n((__t=("+ui+"))==null?'':__t)+\n'":rj&&(se+="';\n"+rj+"\n__p+='");
return Yf});se+="';\n";if(Uc=Uc.variable){if(!Et.test(Uc))throw Error("variable is not a bare identifier: "+Uc);}else se="with(obj||{}){\n"+se+"}\n",Uc="obj";se="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+se+"return __p;\n";try{var Ke=new Function(Uc,"_",se)}catch(Yf){throw Yf.source=se,Yf;}Cd=function(Yf){return Ke.call(this||xi,Yf,$e)};Cd.source="function("+Uc+"){\n"+se+"}";return Cd},result:function(sc,Uc,Cd){Uc=$e.toPath(Uc);var de=Uc.length;if(!de)return Yj(Cd)?
Cd.call(sc):Cd;for(var se=0;se<de;se++){var Ke=null==sc?void 0:sc[Uc[se]];void 0===Ke&&(Ke=Cd,se=de);sc=Yj(Ke)?Ke.call(sc):Ke}return sc},uniqueId:function(sc){var Uc=++Qv+"";return sc?sc+Uc:Uc},chain:function(sc){sc=$e(sc);sc._chain=!0;return sc},iteratee:rk,partial:dn,bind:Sp,bindAll:Rv,memoize:function(sc,Uc){var Cd=function(de){var se=Cd.cache,Ke=""+(Uc?Uc.apply(this||xi,arguments):de);lb(se,Ke)||(se[Ke]=sc.apply(this||xi,arguments));return se[Ke]};Cd.cache={};return Cd},delay:Tp,defer:Up,throttle:function(sc,
Uc,Cd){var de,se,Ke,Yf,Bg=0;Cd||(Cd={});var ui=function(){Bg=!1===Cd.leading?0:zm();de=null;Yf=sc.apply(se,Ke);de||(se=Ke=null)},rj=function(){var ie=zm();Bg||!1!==Cd.leading||(Bg=ie);var Dr=Uc-(ie-Bg);se=this||xi;Ke=arguments;0>=Dr||Dr>Uc?(de&&(clearTimeout(de),de=null),Bg=ie,Yf=sc.apply(se,Ke),de||(se=Ke=null)):de||!1===Cd.trailing||(de=setTimeout(ui,Dr));return Yf};rj.cancel=function(){clearTimeout(de);Bg=0;de=se=Ke=null};return rj},debounce:function(sc,Uc,Cd){var de,se,Ke,Yf,Bg,ui=function(){var ie=
zm()-se;Uc>ie?de=setTimeout(ui,Uc-ie):(de=null,Cd||(Yf=sc.apply(Bg,Ke)),de||(Ke=Bg=null))},rj=J(function(ie){Bg=this||xi;Ke=ie;se=zm();de||(de=setTimeout(ui,Uc),Cd&&(Yf=sc.apply(Bg,Ke)));return Yf});rj.cancel=function(){clearTimeout(de);de=Ke=Bg=null};return rj},wrap:function(sc,Uc){return dn(Uc,sc)},negate:lr,compose:function(){var sc=arguments,Uc=sc.length-1;return function(){for(var Cd=Uc,de=sc[Uc].apply(this||xi,arguments);Cd--;)de=sc[Cd].call(this||xi,de);return de}},after:function(sc,Uc){return function(){if(1>
--sc)return Uc.apply(this||xi,arguments)}},before:ft,once:zr,findKey:Tn,findIndex:Vp,findLastIndex:Ft,sortedIndex:ht,indexOf:Wp,lastIndexOf:Gy,find:Ek,detect:Ek,findWhere:function(sc,Uc){return Ek(sc,ge(Uc))},each:Fk,forEach:Fk,map:wm,collect:wm,reduce:Am,foldl:Am,inject:Am,reduceRight:Ar,foldr:Ar,filter:Ro,select:Ro,reject:function(sc,Uc,Cd){return Ro(sc,lr(cj(Uc)),Cd)},every:qv,all:qv,some:rv,any:rv,contains:xm,includes:xm,include:xm,invoke:Hy,pluck:Lp,where:function(sc,Uc){return Ro(sc,ge(Uc))},
max:kt,min:function(sc,Uc,Cd){var de=Infinity,se=Infinity,Ke;if(null==Uc||"number"==typeof Uc&&"object"!=typeof sc[0]&&null!=sc){sc=sk(sc)?sc:ag(sc);for(var Yf=0,Bg=sc.length;Yf<Bg;Yf++)Cd=sc[Yf],null!=Cd&&Cd<de&&(de=Cd)}else Uc=cj(Uc,Cd),Fk(sc,function(ui,rj,ie){Ke=Uc(ui,rj,ie);if(Ke<se||Infinity===Ke&&Infinity===de)de=ui,se=Ke});return de},shuffle:function(sc){return To(sc,Infinity)},sample:To,sortBy:function(sc,Uc,Cd){var de=0;Uc=cj(Uc,Cd);return Lp(wm(sc,function(se,Ke,Yf){return{value:se,index:de++,
criteria:Uc(se,Ke,Yf)}}).sort(function(se,Ke){var Yf=se.criteria,Bg=Ke.criteria;if(Yf!==Bg){if(Yf>Bg||void 0===Yf)return 1;if(Yf<Bg||void 0===Bg)return-1}return se.index-Ke.index}),"value")},groupBy:Jy,indexBy:Ky,countBy:Ly,partition:My,toArray:So,size:function(sc){return null==sc?0:sk(sc)?sc.length:he(sc).length},pick:Sv,omit:Tv,first:nr,head:nr,take:nr,initial:mr,last:function(sc,Uc,Cd){return null==sc||1>sc.length?null==Uc||Cd?void 0:[]:null==Uc||Cd?sc[sc.length-1]:Uo(sc,Math.max(0,sc.length-Uc))},
rest:Uo,tail:Uo,drop:Uo,compact:function(sc){return Ro(sc,Boolean)},flatten:function(sc,Uc){return $m(sc,Uc,!1)},without:Br,uniq:or,unique:or,union:Gt,intersection:function(sc){for(var Uc=[],Cd=arguments.length,de=0,se=Gk(sc);de<se;de++){var Ke=sc[de];if(!xm(Uc,Ke)){var Yf;for(Yf=1;Yf<Cd&&xm(arguments[Yf],Ke);Yf++);Yf===Cd&&Uc.push(Ke)}}return Uc},difference:Wo,unzip:Mp,transpose:Mp,zip:Uv,object:function(sc,Uc){for(var Cd={},de=0,se=Gk(sc);de<se;de++)Uc?Cd[sc[de]]=Uc[de]:Cd[sc[de][0]]=sc[de][1];
return Cd},range:function(sc,Uc,Cd){null==Uc&&(Uc=sc||0,sc=0);Cd||(Cd=Uc<sc?-1:1);Uc=Math.max(Math.ceil((Uc-sc)/Cd),0);for(var de=Array(Uc),se=0;se<Uc;se++,sc+=Cd)de[se]=sc;return de},chunk:function(sc,Uc){if(null==Uc||1>Uc)return[];for(var Cd=[],de=0,se=sc.length;de<se;)Cd.push(Vo.call(sc,de,de+=Uc));return Cd},mixin:lt,"default":$e});return Cr._=Cr});var Ay=No;No.noConflict;var JB={};var By=function(J,ja,Rb){var Q=J.utils.arrayReplaceAt;var nb=0;ja=Ay.extend({divWrap:!1,divClass:"checkbox",idPrefix:"checkbox"},
ja);var Ia=/\[(X|\s|_|\-)\]\s(.*)/i;var lb=function(kb,kc,Mc){var Gc=[];if(ja.divWrap){var Xc=new Mc("checkbox_open","div",1);Xc.attrs=[["class",ja.divClass]];Gc.push(Xc)}var ad=ja.idPrefix+nb;nb+=1;Xc=new Mc("checkbox_input","input",0);Xc.attrs=[["type","checkbox"],["id",ad]];!0===kb&&Xc.attrs.push(["checked","true"]);Gc.push(Xc);Xc=new Mc("label_open","label",1);Xc.attrs=[["for",ad]];Gc.push(Xc);Xc=new Mc("text","",0);Xc.content=kc;Gc.push(Xc);Gc.push(new Mc("label_close","label",-1));ja.divWrap&&
Gc.push(new Mc("checkbox_close","div",-1));return Gc};var fb=function(kb,kc){var Mc=kb.content.match(Ia);if(null===Mc)return kb;kb=!1;var Gc=Mc[1];Mc=Mc[2];if("X"===Gc||"x"===Gc)kb=!0;return lb(kb,Mc,kc)};return function(kb){var kc,Mc;var Gc=kb.tokens;var Xc=0;for(Mc=Gc.length;Xc<Mc;){if("inline"===Gc[Xc].type){var ad=Gc[Xc].children;for(kc=ad.length-1;0<=kc;){var he=ad[kc];Gc[Xc].children=ad=Q(ad,kc,fb(he,kb.Token));kc--}}Xc++}}};var Ys=JB=function(J,ja){J.core.ruler.push("checkbox",By(J,ja))},Oj=
window.lively.FreezerRuntime.recorderFor("lively.ide/md/compiler.js");Oj.externalizeLinksPlugin=function(J){var ja=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};ja=Object.assign({},J.options,{},ja);if(ja.externalizeLinks){ja=ja.externalizeLinks;var Rb=ja.internalDomains,Q=void 0===Rb?[]:Rb;Rb=ja.internalTarget;var nb=void 0===Rb?"_blank":Rb;Rb=ja.externalTarget;var Ia=void 0===Rb?"_blank":Rb;Rb=ja.internalRel;var lb=void 0===Rb?"":Rb;ja=ja.externalRel;var fb=void 0===ja?"":ja;J.core.ruler.push("external_links",
function(kb){function kc(Mc){Mc.children&&Mc.children.map(kc);if("link_open"===Mc.type){var Gc;Gc=(Gc=Mc.attrGet("href").split("//")[1])?(Gc=Gc.split("/")[0].toLowerCase())||null:null;var Xc=(Gc=null===Gc||-1!==Q.indexOf(Gc))?nb:Ia;"_self"!==Xc&&Mc.attrSet("target",Xc);if(Gc=Gc?lb:fb)Xc=Mc.attrGet("rel")||"",""!==Xc&&(Gc=Xc+" "+Gc),Mc.attrSet("rel",Gc)}}kb.tokens.map(kc)})}};Oj.addSourceLineMappingPlugin=function(J){var ja=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};ja=Object.assign({},
J.options,{},ja);ja.addSourceLineMapping&&(J.renderer.rules.paragraph_open=J.renderer.rules.heading_open=function(Rb,Q,nb,Ia,lb){if(Rb[Q].map&&0===Rb[Q].level){var fb=Xb(Rb[Q].map,2);var kb=fb[0];fb=fb[1];Rb[Q].attrJoin("class","markdown-line-marker");Rb[Q].attrSet("data-mdline",String(kb));Rb[Q].attrSet("data-htmlline",String(fb))}return lb.renderToken(Rb,Q,nb,Ia,lb)})};Oj.markdownIt=zy;Oj.markdownCheckbox=Ys;Oj.string=wb;(function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/md/compiler.js"),
Rb=ja.hasOwnProperty("MarkdownCompiler")&&"function"===typeof ja.MarkdownCompiler?ja.MarkdownCompiler:ja.MarkdownCompiler=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"compileToHTML",value:function(Q){var nb=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Ia=nb.linkedCSS,lb=nb.markdownWrapperTemplate;nb=Oj.markdownIt(nb).use(Oj.externalizeLinksPlugin).use(Oj.addSourceLineMappingPlugin).use(Oj.markdownCheckbox).render(Q);
lb&&(nb=Oj.string.format(lb,nb));if(Ia)for(var fb in Ia)nb='<link type="text/css" rel="stylesheet" id="'.concat(fb,'" href="').concat(Ia[fb],'">')+nb;return nb}},{key:"parse",value:function(Q,nb){var Ia=Oj.markdownIt(nb).use(Oj.externalizeLinksPlugin).use(Oj.markdownCheckbox);nb=Q.textString;Q=Ia.parse(Q.textString,{});var lb=nb.split("\n");nb=Q.filter(function(fb){return"heading_open"===fb.type}).map(function(fb,kb){kb=Xb(fb.map,1)[0];return{line:kb,depth:fb.level+1,string:lb[kb].trim()}});return{parsed:Q,
headings:nb}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownCompiler"}}],ja,{pathInPackage:function(){return"./md/compiler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:167,end:1288})})(void 0);Oj.mdCompiler=new Oj.MarkdownCompiler;var Fl=Oj.mdCompiler;Oj.mdCompiler=Fl;var Ff=window.lively.FreezerRuntime.recorderFor("lively.ide/md/snippets.js"),
Zs=[["table","| $0      | $1      |\n| ----------- | ----------- |\n| $2          | $3          |\n| $4          | $5          |"]];Ff.snippets=Zs;Ff.snippets=Zs;var Vj=window.lively.FreezerRuntime.recorderFor("lively.ide/md/mode.js");Vj.passIndent=Wb;Vj.innerMode=Ub;Vj.getMode=E;Vj.findModeByName=vc;Vj.defineMode=R;Vj.defineMIME=xb;Vj.copyState=sa;Vj.startState=Ga;Vj.defineMode("markdown",function(J,ja){function Rb(ge,Ed,Kf){Ed.f=Ed.inline=Kf;return Kf(ge,Ed)}function Q(ge){return!ge||!/\S/.test(ge.string)}
function nb(ge){ge.linkTitle=!1;ge.em=!1;ge.strong=!1;ge.strikethrough=!1;ge.quote=0;ge.indentedCode=!1;ge.f==lb&&(ge.f=Mc,ge.block=Ia);ge.trailingSpace=0;ge.trailingSpaceNewLine=!1;ge.prevLine=ge.thisLine;return ge.thisLine=null}function Ia(ge,Ed){var Kf=ge.sol(),Di=!1!==Ed.list,rk=Ed.indentedCode;Ed.indentedCode=!1;if(null===Ed.indentationDiff){var cj=Ed.indentation;Ed.indentationDiff=Ed.indentation;if(Di){for(Ed.list=null;cj<Ed.listStack[Ed.listStack.length-1];)Ed.listStack.pop(),Ed.listStack.length?
Ed.indentation=Ed.listStack[Ed.listStack.length-1]:Ed.list=!1;!1!==Ed.list&&(Ed.indentationDiff=cj-Ed.listStack[Ed.listStack.length-1])}}var Hj=null;if(4<=Ed.indentationDiff&&(rk||Q(Ed.prevLine)))return ge.skipToEnd(),Ed.indentedCode=!0,Cf.code;if(ge.eatSpace())return null;if((Hj=ge.match(zj))&&6>=Hj[1].length)return Ed.header=Hj[1].length,ja.highlightFormatting&&(Ed.formatting="header"),Ed.f=Ed.inline,kb(Ed);if(Q(Ed.prevLine)||Ed.quote||Di||rk||!(Hj=ge.match(gl))){if(ge.eat(">"))return Ed.quote=
Kf?1:Ed.quote+1,ja.highlightFormatting&&(Ed.formatting="quote"),ge.eatSpace(),kb(Ed);if("["===ge.peek())return Rb(ge,Ed,he);if(ge.match(ag,!0))return Ed.hr=!0,Cf.hr;if(Hj=ge.match(ng))return Kf=Hj[1]?"ol":"ul",Ed.indentation=cj+ge.current().length,Ed.list=!0,Ed.listStack.push(Ed.indentation),ja.taskLists&&ge.match(Gj,!1)&&(Ed.taskList=!0),Ed.f=Ed.inline,ja.highlightFormatting&&(Ed.formatting=["list","list-"+Kf]),kb(Ed);if(ja.fencedCodeBlocks&&(Hj=ge.match(ek,!0)))return Ed.fencedChars=Hj[1],Ed.localMode=
Vj.getMode(Hj[2]),Ed.localMode&&(Ed.localState=Vj.startState(Ed.localMode)),Ed.f=Ed.block=fb,ja.highlightFormatting&&(Ed.formatting="code-block"),Ed.code=-1,kb(Ed)}else return Ed.header="="==Hj[0].charAt(0)?1:2,ja.highlightFormatting&&(Ed.formatting="header"),Ed.f=Ed.inline,kb(Ed);return Rb(ge,Ed,Ed.inline)}function lb(ge,Ed){var Kf=Qe.token(ge,Ed.htmlState);if(!dg){var Di=Vj.innerMode(Qe,Ed.htmlState);if("xml"==Di.mode.name&&null===Di.state.tagStart&&!Di.state.context&&Di.state.tokenize.isInText||
Ed.md_inside&&-1<ge.current().indexOf(">"))Ed.f=Mc,Ed.block=Ia,Ed.htmlState=null}return Kf}function fb(ge,Ed){if(Ed.fencedChars&&ge.match(Ed.fencedChars))return ja.highlightFormatting&&(Ed.formatting="code-block"),ge=kb(Ed),Ed.localMode=Ed.localState=null,Ed.block=Ia,Ed.f=Mc,Ed.fencedChars=null,Ed.code=0,ge;if(Ed.fencedChars&&ge.skipTo(Ed.fencedChars))return"comment";if(Ed.localMode)return Ed.localMode.token(ge,Ed.localState);ge.skipToEnd();return Cf.code}function kb(ge){var Ed=[];if(ge.formatting){Ed.push(Cf.formatting);
"string"===typeof ge.formatting&&(ge.formatting=[ge.formatting]);for(var Kf=0;Kf<ge.formatting.length;Kf++)Ed.push(Cf.formatting+"-"+ge.formatting[Kf]),"header"===ge.formatting[Kf]&&Ed.push(Cf.formatting+"-"+ge.formatting[Kf]+"-"+ge.header),"quote"===ge.formatting[Kf]&&(!ja.maxBlockquoteDepth||ja.maxBlockquoteDepth>=ge.quote?Ed.push(Cf.formatting+"-"+ge.formatting[Kf]+"-"+ge.quote):Ed.push("error"))}if(ge.taskOpen)return Ed.push("meta"),Ed.length?Ed.join(" "):null;if(ge.taskClosed)return Ed.push("property"),
Ed.length?Ed.join(" "):null;ge.linkHref?Ed.push(Cf.linkHref,"url"):(ge.strong&&Ed.push(Cf.strong),ge.em&&Ed.push(Cf.em),ge.strikethrough&&Ed.push(Cf.strikethrough),ge.linkText&&Ed.push(Cf.linkText),ge.code&&Ed.push(Cf.code),ge.image&&Ed.push(Cf.image),ge.imageAltText&&Ed.push(Cf.imageAltText,"link"),ge.imageMarker&&Ed.push(Cf.imageMarker));ge.header&&Ed.push(Cf.header,Cf.header+"-"+ge.header);ge.quote&&(Ed.push(Cf.quote),!ja.maxBlockquoteDepth||ja.maxBlockquoteDepth>=ge.quote?Ed.push(Cf.quote+"-"+
ge.quote):Ed.push(Cf.quote+"-"+ja.maxBlockquoteDepth));!1!==ge.list&&((Kf=(ge.listStack.length-1)%3)?1===Kf?Ed.push(Cf.list2):Ed.push(Cf.list3):Ed.push(Cf.list1));ge.trailingSpaceNewLine?Ed.push("trailing-space-new-line"):ge.trailingSpace&&Ed.push("trailing-space-"+(ge.trailingSpace%2?"a":"b"));return Ed.length?Ed.join(" "):null}function kc(ge,Ed){if(ge.match(og,!0))return kb(Ed)}function Mc(ge,Ed){var Kf=Ed.text(ge,Ed);if("undefined"!==typeof Kf)return Kf;if(Ed.list)return Ed.list=null,kb(Ed);if(Ed.taskList)return"x"!==
ge.match(Gj,!0)[1]?Ed.taskOpen=!0:Ed.taskClosed=!0,ja.highlightFormatting&&(Ed.formatting="task"),Ed.taskList=!1,kb(Ed);Ed.taskOpen=!1;Ed.taskClosed=!1;if(Ed.header&&ge.match(/^#+$/,!0))return ja.highlightFormatting&&(Ed.formatting="header"),kb(Ed);Kf=ge.next();if(Ed.linkTitle){Ed.linkTitle=!1;var Di=Kf;"("===Kf&&(Di=")");Di=(Di+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");if(ge.match(new RegExp("^\\s*(?:[^"+Di+"\\\\]+|\\\\\\\\|\\\\.)"+Di),!0))return Cf.linkHref}if("`"===Kf){Kf=Ed.formatting;ja.highlightFormatting&&
(Ed.formatting="code");ge.eatWhile("`");ge=ge.current().length;if(0==Ed.code)return Ed.code=ge,kb(Ed);if(ge==Ed.code)return ge=kb(Ed),Ed.code=0,ge;Ed.formatting=Kf;return kb(Ed)}if(Ed.code)return kb(Ed);if("\\"===Kf&&(ge.next(),ja.highlightFormatting))return Kf=kb(Ed),Ed=Cf.formatting+"-escape",Kf?Kf+" "+Ed:Ed;if("!"===Kf&&ge.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return Ed.imageMarker=!0,Ed.image=!0,ja.highlightFormatting&&(Ed.formatting="image"),kb(Ed);if("["===Kf&&Ed.imageMarker&&ge.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,
!1))return Ed.imageMarker=!1,Ed.imageAltText=!0,ja.highlightFormatting&&(Ed.formatting="image"),kb(Ed);if("]"===Kf&&Ed.imageAltText)return ja.highlightFormatting&&(Ed.formatting="image"),Kf=kb(Ed),Ed.imageAltText=!1,Ed.image=!1,Ed.inline=Ed.f=Xc,Kf;if("["===Kf&&!Ed.image)return Ed.linkText=!0,ja.highlightFormatting&&(Ed.formatting="link"),kb(Ed);if("]"===Kf&&Ed.linkText)return ja.highlightFormatting&&(Ed.formatting="link"),Kf=kb(Ed),Ed.linkText=!1,Ed.inline=Ed.f=ge.match(/\(.*?\)| ?\[.*?\]/,!1)?Xc:
Mc,Kf;if("<"===Kf&&ge.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return Ed.f=Ed.inline=Gc,ja.highlightFormatting&&(Ed.formatting="link"),Kf=kb(Ed),(Kf?Kf+" ":"")+Cf.linkInline;if("<"===Kf&&ge.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return Ed.f=Ed.inline=Gc,ja.highlightFormatting&&(Ed.formatting="link"),Kf=kb(Ed),(Kf?Kf+" ":"")+Cf.linkEmail;if("<"===Kf&&ge.match(/^(!--|[a-z]+(?:\s+[a-z_:.\-]+(?:\s*=\s*[^ >]+)?)*\s*>)/i,!1))return Kf=ge.string.indexOf(">",ge.pos),-1!=Kf&&(Kf=ge.string.substring(ge.start,
Kf),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Kf)&&(Ed.md_inside=!0)),ge.backUp(1),Ed.htmlState=Vj.startState(Qe),Kf=lb,Ed.f=Ed.block=Kf,Kf(ge,Ed);if("<"===Kf&&ge.match(/^\/\w*?>/))return Ed.md_inside=!1,"tag";if("*"===Kf||"_"===Kf){for(var rk=1,cj=1==ge.pos?" ":ge.string.charAt(ge.pos-2);3>rk&&ge.eat(Kf);)rk++;var Hj=ge.peek()||" ",vm=!/\s/.test(Hj)&&(!bj.test(Hj)||/\s/.test(cj)||bj.test(cj)),Po=!/\s/.test(cj)&&(!bj.test(cj)||/\s/.test(Hj)||bj.test(Hj)),Zm=Di=null;rk%2&&(Ed.em||!vm||"*"!==Kf&&
Po&&!bj.test(cj)?Ed.em!=Kf||!Po||"*"!==Kf&&vm&&!bj.test(Hj)||(Di=!1):Di=!0);1<rk&&(Ed.strong||!vm||"*"!==Kf&&Po&&!bj.test(cj)?Ed.strong!=Kf||!Po||"*"!==Kf&&vm&&!bj.test(Hj)||(Zm=!1):Zm=!0);if(null!=Zm||null!=Di)return ja.highlightFormatting&&(Ed.formatting=null==Di?"strong":null==Zm?"em":"strong em"),!0===Di&&(Ed.em=Kf),!0===Zm&&(Ed.strong=Kf),ge=kb(Ed),!1===Di&&(Ed.em=!1),!1===Zm&&(Ed.strong=!1),ge}else if(" "===Kf&&(ge.eat("*")||ge.eat("_"))){if(" "===ge.peek())return kb(Ed);ge.backUp(1)}if(ja.strikethrough)if("~"===
Kf&&ge.eatWhile(Kf)){if(Ed.strikethrough)return ja.highlightFormatting&&(Ed.formatting="strikethrough"),ge=kb(Ed),Ed.strikethrough=!1,ge;if(ge.match(/^[^\s]/,!1))return Ed.strikethrough=!0,ja.highlightFormatting&&(Ed.formatting="strikethrough"),kb(Ed)}else if(" "===Kf&&ge.match(/^~~/,!0)){if(" "===ge.peek())return kb(Ed);ge.backUp(2)}" "===Kf&&(ge.match(/ +$/,!1)?Ed.trailingSpace++:Ed.trailingSpace&&(Ed.trailingSpaceNewLine=!0));return kb(Ed)}function Gc(ge,Ed){if(">"===ge.next())return Ed.f=Ed.inline=
Mc,ja.highlightFormatting&&(Ed.formatting="link"),ge=kb(Ed),(ge?ge+" ":"")+Cf.linkInline;ge.match(/^[^>]+/,!0);return Cf.linkInline}function Xc(ge,Ed){if(ge.eatSpace())return null;ge=ge.next();return"("===ge||"["===ge?(Ed.f=Ed.inline=ad("("===ge?")":"]"),ja.highlightFormatting&&(Ed.formatting="link-string"),Ed.linkHref=!0,kb(Ed)):"error"}function ad(ge){return function(Ed,Kf){if(Ed.next()===ge)return Kf.f=Kf.inline=Mc,ja.highlightFormatting&&(Kf.formatting="link-string"),Ed=kb(Kf),Kf.linkHref=!1,
Ed;Ed.match(Ym[ge]);Kf.linkHref=!0;return kb(Kf)}}function he(ge,Ed){return ge.match(/^([^\]\\]|\\.)*\]:/,!1)?(Ed.f=we,ge.next(),ja.highlightFormatting&&(Ed.formatting="link"),Ed.linkText=!0,kb(Ed)):Rb(ge,Ed,Mc)}function we(ge,Ed){if(ge.match(/^\]:/,!0))return Ed.f=Ed.inline=$e,ja.highlightFormatting&&(Ed.formatting="link"),ge=kb(Ed),Ed.linkText=!1,ge;ge.match(/^([^\]\\]|\\.)+/,!0);return Cf.linkText}function $e(ge,Ed){if(ge.eatSpace())return null;ge.match(/^[^\s]+/,!0);void 0===ge.peek()?Ed.linkTitle=
!0:ge.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);Ed.f=Ed.inline=Mc;return Cf.linkHref+" url"}var Qe=Vj.getMode(J,"text/html"),dg="null"==Qe.name;void 0===ja.highlightFormatting&&(ja.highlightFormatting=!1);void 0===ja.maxBlockquoteDepth&&(ja.maxBlockquoteDepth=0);void 0===ja.taskLists&&(ja.taskLists=!1);void 0===ja.strikethrough&&(ja.strikethrough=!1);void 0===ja.tokenTypeOverrides&&(ja.tokenTypeOverrides={});var Cf={header:"header",code:"comment",
quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"},Fh;for(Fh in Cf)Cf.hasOwnProperty(Fh)&&ja.tokenTypeOverrides[Fh]&&(Cf[Fh]=ja.tokenTypeOverrides[Fh]);var ag=/^([*\-_])(?:\s*\1){2,}\s*$/,ng=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,Gj=/^\[(x| )\](?=\s)/,zj=ja.allowAtxHeaderWithoutSpace?
/^(#+)/:/^(#+)(?: |$)/,gl=/^ *(?:={1,}|-{1,})\s*$/,og=/^[^#!\[\]*_\\<>` "'(~]+/,ek=new RegExp("^("+(!0===ja.fencedCodeBlocks?"~~~+|```+":ja.fencedCodeBlocks)+")[ \\t]*([\\w+#-]*)"),bj=/[!"#$%&'()*+,\-\.\/:;<=>?@\[\\\]^_`{|}~\u2014]/,Ym={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/},Pj={startState:function(){return{f:Ia,prevLine:null,thisLine:null,block:Ia,htmlState:null,indentation:0,inline:Mc,text:kc,formatting:!1,linkText:!1,linkHref:!1,
linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(ge){return{f:ge.f,prevLine:ge.prevLine,thisLine:ge.thisLine,block:ge.block,htmlState:ge.htmlState&&Vj.copyState(Qe,ge.htmlState),indentation:ge.indentation,localMode:ge.localMode,localState:ge.localMode?Vj.copyState(ge.localMode,ge.localState):null,inline:ge.inline,text:ge.text,formatting:!1,linkText:ge.linkText,
linkTitle:ge.linkTitle,code:ge.code,em:ge.em,strong:ge.strong,strikethrough:ge.strikethrough,header:ge.header,hr:ge.hr,taskList:ge.taskList,list:ge.list,listStack:ge.listStack.slice(0),quote:ge.quote,indentedCode:ge.indentedCode,trailingSpace:ge.trailingSpace,trailingSpaceNewLine:ge.trailingSpaceNewLine,md_inside:ge.md_inside,fencedChars:ge.fencedChars}},token:function(ge,Ed){Ed.formatting=!1;if(ge!=Ed.thisLine){Ed.header=0;Ed.hr=!1;if(ge.match(/^\s*$/,!0))return nb(Ed),null;Ed.prevLine=Ed.thisLine;
Ed.thisLine=ge;Ed.taskList=!1;Ed.trailingSpace=0;Ed.trailingSpaceNewLine=!1;Ed.f=Ed.block;if(Ed.f!=lb){var Kf=ge.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;Ed.indentation=Kf;Ed.indentationDiff=null;if(0<Kf)return null}}return Ed.f(ge,Ed)},innerMode:function(ge){return ge.block==lb?{state:ge.htmlState,mode:Qe}:ge.localState?{state:ge.localState,mode:ge.localMode}:{state:ge,mode:Pj}},indent:function(ge,Ed,Kf){return ge.block==lb?Qe.indent(ge.htmlState,Ed,Kf):ge.localState?ge.localMode.indent(ge.localState,
Ed,Kf):Vj.passIndent},blankLine:nb,getType:kb,closeBrackets:"()[]{}''\"\"``",fold:"markdown",blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e"};return Pj},"xml");Vj.defineMIME("text/x-markdown","markdown");var um=window.lively.FreezerRuntime.recorderFor("lively.ide/md/navigator.js");um.arr=nd;um.string=wb;var $s=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/md/navigator.js"),Rb=ja.hasOwnProperty("MarkdownNavigator")&&"function"===typeof ja.MarkdownNavigator?ja.MarkdownNavigator:
ja.MarkdownNavigator=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"ensureAST",value:function(Q){return Q.editorPlugin.parsedMarkdown()}},{key:"moveToHeading",value:function(Q,nb){nb&&(Q.cursorPosition={row:nb.line,column:0},Q.scrollCursorIntoView())}},{key:"backwardSexp",value:function(Q){var nb=Q.textString,Ia=this.ensureAST(Q).headings,lb=Q.cursorPosition,fb=this.headingOfLine(Ia,
lb.row);fb&&fb.line===lb.row&&0===lb.column&&(nb=this.siblingsBefore(nb,Ia,fb),fb=um.arr.last(nb));this.moveToHeading(Q,fb)}},{key:"forwardSexp",value:function(Q){var nb=Q.textString,Ia=this.ensureAST(Q).headings,lb=this.headingOfLine(Ia,Q.cursorPosition.row);nb=this.siblingsAfter(nb,Ia,lb);this.moveToHeading(Q,nb[0])}},{key:"backwardUpSexp",value:function(Q){var nb=this.ensureAST(Q).headings,Ia=this.headingOfLine(nb,Q.cursorPosition.row);nb=this.ownerHeadings(nb,Ia);this.moveToHeading(Q,um.arr.last(nb))}},
{key:"forwardDownSexp",value:function(Q){var nb=this.ensureAST(Q).headings,Ia=this.headingOfLine(nb,Q.cursorPosition.row);nb=this.rangeOfHeading(Q.textString,nb,Ia);this.moveToHeading(Q,nb.subheadings[1])}},{key:"expandRegion",value:function(Q,nb,Ia,lb){var fb=Q.cursorPosition;Ia=this.ensureAST(Q).headings;var kb=this.headingOfLine(Ia,fb.row);return!kb||kb&&kb.line===fb.row&&0===fb.column&&lb.range[0]!==lb.range[1]&&(fb=this.ownerHeadings(Ia,kb),kb=um.arr.last(fb),!kb)?lb:(nb=this.rangeOfHeading(nb,
Ia,kb))?{range:[Q.positionToIndex(nb.range.end),Q.positionToIndex(nb.range.start)],prev:lb}:lb}},{key:"contractRegion",value:function(Q,nb,Ia,lb){return lb.prev||lb}},{key:"ownerHeadings",value:function(Q,nb){if(1>=nb.depth)return[];var Ia=Q.slice(0,Q.indexOf(nb));if(!Ia.length)return[];Ia=Ia.reverse().find(function(lb){return lb.depth<nb.depth});return this.ownerHeadings(Q,Ia).concat([Ia])}},{key:"withSiblings",value:function(Q,nb,Ia){if(1===Ia.depth)return nb.filter(function(fb){return 1===fb.depth});
var lb=this.ownerHeadings(nb,Ia);return this.rangeOfHeading(Q,nb,um.arr.last(lb)).subheadings.filter(function(fb){return fb.depth===Ia.depth})}},{key:"siblingsBefore",value:function(Q,nb,Ia){Q=this.withSiblings(Q,nb,Ia);return Q.slice(0,Q.indexOf(Ia))}},{key:"siblingsAfter",value:function(Q,nb,Ia){Q=this.withSiblings(Q,nb,Ia);return Q.slice(Q.indexOf(Ia)+1)}},{key:"headingOfLine",value:function(Q,nb){for(var Ia,lb=0;lb<Q.length&&!(Q[lb].line>nb);lb++)Ia=Q[lb];return Ia}},{key:"rangeOfHeading",value:function(Q,
nb,Ia){Q=Array.isArray(Q)?Q:um.string.lines(Q);var lb=nb.find(function(kb){return Ia&&kb.line===Ia.line}),fb=nb.indexOf(lb);fb=nb.slice(fb+1).find(function(kb){return kb.depth<=Ia.depth});nb=nb.slice(nb.indexOf(lb),fb?nb.indexOf(fb):nb.length);return{range:{start:{row:lb.line,column:0},end:fb?{row:fb.line-1,column:Q[fb.line-1].length}:{row:Q.length-1,column:Q[Q.length-1].length}},subheadings:nb}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownNavigator"}}],ja,{pathInPackage:function(){return"./md/navigator.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:58,end:4663})}(void 0);um["default"]=$s;var aj=window.lively.FreezerRuntime.recorderFor("lively.ide/md/morphs.js");aj.HTMLMorph=Xa;aj.Morph=Za;aj.mdCompiler=Fl;aj.connect=gd;aj.fun=Sb;aj.rect=Tc;var gr=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/md/morphs.js"),
Rb=ja.hasOwnProperty("MarkdownPreviewMorph")&&"function"===typeof ja.MarkdownPreviewMorph?ja.MarkdownPreviewMorph:ja.MarkdownPreviewMorph=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"reset",value:function(){this.disconnectMarkdownScrollToHTMLScroll();this.disconnectHTMLScrollToMarkdownScroll();this.connectMarkdownScrollToHTMLScroll(!0);this.connectHTMLScrollToMarkdownScroll(!0)}},
{key:"___",value:function(){this.markdownToHTMLPositionMap.map(function(Q,nb){return"".concat(nb,": ").concat(Math.round(Q))}).join("\n")}},{key:"smoothScrollStart",value:function(Q,nb,Ia){var lb=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Date.now();this.debug&&console.log("[smoothScroll] start",nb);this._smoothScroll||(this._smoothScroll=[]);for(var fb=this._smoothScroll.length;fb--;)this._smoothScroll[fb][0]===Q&&this._smoothScroll.splice(fb,1);this._smoothScroll.push([Q,nb,Ia,lb]);
this.startStepping("smoothScrollStep")}},{key:"smoothScrollStep",value:function(){if(this._smoothScroll){for(var Q=this._smoothScroll.length;Q--;){var nb=this._smoothScroll[Q],Ia=Xb(nb,4),lb=Ia[0],fb=Ia[1],kb=Ia[2];Ia=Ia[3];lb=lb.env.renderer.getNodeForMorph(lb);var kc=Math.abs(lb.scrollTop-fb);1>kc||1E3<Date.now()-Ia?this._smoothScroll.splice(Q,1):(kb||(kb=nb[2]=kc/10),kc<kb&&(kb=kc),lb.scrollTop>fb&&(kb=-kb),lb.scrollTop+=kb,this.debug&&console.log("[smoothScroll] step",lb.scrollTop+kb))}this._smoothScroll.length||
(this._smoothScroll=null)}else this.debug&&console.log("[smoothScroll] stop"),this.stopSteppingScriptNamed("smoothScrollStep")}},{key:"computeMarkdownToHTMLPositionMap",value:function(){var Q=this.domNode.querySelectorAll(".markdown-line-marker");if(!Q.length)return[];var nb=this.markdownSource.split("\n").length,Ia=Q[0].parentElement.getBoundingClientRect(),lb=Ia.top;Ia=Ia.height;Q=Array.from(Q).reduce(function(kb,kc){var Mc=Number(kc.getAttribute("data-mdline"));kb[Mc]=kc.getBoundingClientRect().top-
lb;return kb},[]);Q[nb]=Ia;Q.join("\n");Q.slice(-15).join("\n");for(nb=0;nb<Q.length-1;nb++){for(Ia=nb+1;Ia<Q.length;Ia++)if(void 0!==Q[Ia]){var fb=Ia;break}Ia=(Q[fb]-Q[nb])/(fb-nb);for(nb+=1;nb<fb;nb++)Q[nb]=(Q[nb-1]||0)+Ia;nb=fb-1}return Q}},{key:"syncMarkdownScrollToHTMLScroll",value:function(){var Q=this,nb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;if(nb){var Ia=nb.whatsVisible,lb=Ia.startRow,fb=Ia.endRow;nb=nb.lineCount();Ia=fb-lb;fb=Math.round(lb+(fb-lb)/2);
var kb=this.markdownToHTMLPositionMap,kc=this.debug;lb<Ia/2?(lb*=2,kc&&console.log("[start] ".concat(fb," => ").concat(lb))):fb<nb/2-Ia/4||fb>nb/2+Ia/4?(lb=fb,kc&&console.log("[just centerRow] ".concat(fb," => ").concat(lb))):(lb=Math.round(nb/2-Ia/4+Ia/(1+Math.pow(Math.E,-.7*(fb-nb/2)))),kc&&console.log("[sigmoid center] ".concat(fb," => ").concat(lb)));"number"===typeof kb[lb]&&(this.htmlScrollToMarkdownScrollConnections().forEach(function(Mc){return Mc.activate()}),this.smoothScrollStart(this,
kb[lb]),aj.fun.waitFor(function(){return!Q._smoothScroll},function(){return Q.htmlScrollToMarkdownScrollConnections().forEach(function(Mc){return Mc.deactivate()})}))}}},{key:"syncHTMLScrollToMarkdownScroll",value:function(){var Q=this,nb=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;if(nb){var Ia=this.domNode.parentNode.scrollTop,lb=this.markdownToHTMLPositionMap.reduce(function(fb,kb,kc){var Mc=Math.abs(kb-Ia);return fb.delta<Mc?fb:{delta:Mc,height:kb,line:kc}},{delta:Infinity,
line:-1});this.markdownScrollToHTMLScrollConnections(nb).forEach(function(fb){return fb.activate()});lb=nb.charBoundsFromTextPosition({row:lb.line,column:0}).y;this.smoothScrollStart(nb,lb);aj.fun.waitFor(function(){return!Q._smoothScroll},function(){return Q.markdownScrollToHTMLScrollConnections(nb).forEach(function(fb){return fb.deactivate()})})}}},{key:"syncHTMLScrollToMarkdownScrollDebounced",value:function(Q){var nb=this;requestAnimationFrame(function(){return nb.syncHTMLScrollToMarkdownScroll(Q)})}},
{key:"syncMarkdownScrollToHTMLScrollDebounced",value:function(Q){var nb=this;requestAnimationFrame(function(){return nb.syncMarkdownScrollToHTMLScroll(Q)})}},{key:"htmlScrollToMarkdownScrollConnections",value:function(){return this.attributeConnections?this.attributeConnections.filter(function(Q){return Q.targetMethodName.startsWith("syncHTMLScrollToMarkdownScroll")}):[]}},{key:"markdownScrollToHTMLScrollConnections",value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;
return Q.attributeConnections?Q.attributeConnections.filter(function(nb){return nb.targetMethodName.startsWith("syncMarkdownScrollToHTMLScroll")}):[]}},{key:"autoRenderConnections",value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;return Q.attributeConnections?Q.attributeConnections.filter(function(nb){return nb.targetMethodName.startsWith("autoRender")}):[]}},{key:"connectHTMLScrollToMarkdownScroll",value:function(){aj.connect(this,"scroll",this,"syncHTMLScrollToMarkdownScroll"+
(0<arguments.length&&void 0!==arguments[0]&&arguments[0]?"Debounced":""),{converter:function(){}})}},{key:"disconnectHTMLScrollToMarkdownScroll",value:function(){this.htmlScrollToMarkdownScrollConnections().forEach(function(Q){return Q.disconnect()})}},{key:"connectMarkdownScrollToHTMLScroll",value:function(){aj.connect(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.markdownEditor,"scroll",this,"syncMarkdownScrollToHTMLScroll"+(0<arguments.length&&void 0!==arguments[0]&&arguments[0]?
"Debounced":""),{converter:function(){}})}},{key:"disconnectMarkdownScrollToHTMLScroll",value:function(){this.markdownScrollToHTMLScrollConnections(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor).forEach(function(Q){return Q.disconnect()})}},{key:"enableAutoRender",value:function(){aj.connect(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor,"textChange",this,"autoRender",{converter:function(){}})}},{key:"disableAutoRender",value:function(){this.autoRenderConnections(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor).forEach(function(Q){return Q.disconnect()})}},{key:"autoRender",value:function(){var Q=this;aj.fun.throttleNamed("autoRender"+this.id,300,function(){return Q.renderMarkdown()})()}},{key:"renderMarkdown",value:function(){0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.markdownEditor;this.markdownToHTMLPositionMap=null;var Q=this.markdownEditor;this.html=Q?Q.editorPlugin.renderedMarkdown():aj.mdCompiler.compileToHTML(this.markdownSource,
this.markdownOptions);this._smoothScroll=null;this.submorphs=[];return this.html}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownPreviewMorph"}},{key:"properties",get:function(){return{markdownEditor:{},markdownSource:{after:["markdownEditor"],get:function(){return this.markdownEditor.textString||this.getProperty("markdownSource")},set:function(Q){this.setProperty("markdownSource",Q);this.markdownEditor&&(this.markdownEditor.textString=Q)}},markdownOptions:{after:["markdownEditor"],
get:function(){var Q=this.markdownEditor;return Q&&Q.editorPlugin.markdownOptions||this.getProperty("markdownOptions")},set:function(Q){var nb=this.markdownEditor;nb?(nb.editorPlugin.markdownOptions=Q,this.setProperty("markdownOptions",null)):this.setProperty("markdownOptions",Q)}},markdownToHTMLPositionMap:{get:function(){var Q=this.getProperty("markdownToHTMLPositionMap");if(Q)return Q;this.setProperty("markdownToHTMLPositionMap",Q=this.computeMarkdownToHTMLPositionMap());return Q}}}}}],ja,{pathInPackage:function(){return"./md/morphs.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:247,end:11878})}(aj.HTMLMorph);aj.MarkdownPreviewMorph=gr;aj.MarkdownPreviewMorph=gr;var Ul=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/md/morphs.js"),Rb=ja.hasOwnProperty("MarkdownEditor")&&"function"===typeof ja.MarkdownEditor?ja.MarkdownEditor:ja.MarkdownEditor=
function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"onFocus",value:function(){this.mdEditorMorph.focus()}},{key:"reset",value:function(){aj.connect(this.get("edit css button"),"fire",this,"editCSS");aj.connect(this.get("link scroll checkbox"),"checked",this,"linkScroll");aj.connect(this.get("render while typing checkbox"),"checked",this,"autoRender");aj.connect(this.get("show preview checkbox"),
"checked",this,"showPreview");this.showPreview=!0;this.mdPreviewMorph.show()}},{key:"mdEditorMorph",get:function(){return this.getSubmorphNamed("editor")}},{key:"mdPreviewMorph",get:function(){return this.getSubmorphNamed(/markdown preview .*/)}},{key:"addPreview",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb;return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=fb.next){case 0:if(!this.mdPreviewMorph){fb.next=2;break}return fb.abrupt("return");case 2:return fb.next=
4,this.mdEditorMorph.execCommand("[markdown] convert to html",{openInWorld:!1});case 4:lb=fb.sent,this.addMorph(lb),lb.border=this.mdEditorMorph.border,this.mdEditorMorph.setBounds(aj.rect(this.get("show preview checkbox").bottomLeft.addXY(0,5),this.innerBounds().bottomCenter().addXY(-2,-5))),lb.setBounds(aj.rect(this.mdEditorMorph.topRight.addXY(4,0),this.innerBounds().bottomRight().addXY(-5,-5))),this.autoRender=this.autoRender,this.linkScroll=this.linkScroll,lb.cssDeclaration=this.css||"";case 12:case "end":return fb.stop()}},
Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"removePreview",value:function(){var Q=this.mdPreviewMorph;Q&&Q.remove();this.mdEditorMorph.setBounds(aj.rect(this.get("show preview checkbox").bottomLeft.addXY(0,5),this.innerBounds().bottomRight().addXY(-5,-5)))}},{key:"editCSS",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb;return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=fb.next){case 0:return fb.next=2,$world.editPrompt("edit css for markdown",
{requester:this,input:this.css||"",historyId:"markdowneditor-css-history",mode:"css"});case 2:lb=fb.sent;if(void 0!==lb){fb.next=5;break}return fb.abrupt("return");case 5:this.css=lb;case 6:case "end":return fb.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-S",win:"Control-S"},command:"save"}]}},{key:"commands",get:function(){var Q=this;return[{name:"save",exec:function(){var nb=Q.mdPreviewMorph;nb&&nb.renderMarkdown();
return!0}}]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownEditor"}},{key:"properties",get:function(){return{showPreview:{derived:!0,set:function(Q){(this.get("show preview checkbox").checked=Q)?this.addPreview():this.removePreview()},get:function(){return!!this.mdPreviewMorph}},linkScroll:{after:["showPreview"],derived:!0,set:function(Q){this.get("link scroll checkbox").checked=Q;var nb=this.mdPreviewMorph;nb&&(Q?(nb.connectHTMLScrollToMarkdownScroll(),nb.connectMarkdownScrollToHTMLScroll()):
(nb.disconnectHTMLScrollToMarkdownScroll(),nb.disconnectMarkdownScrollToHTMLScroll()))},get:function(){return this.get("link scroll checkbox").checked}},autoRender:{after:["showPreview"],derived:!0,set:function(Q){this.get("render while typing checkbox").checked=Q;var nb=this.mdPreviewMorph;nb&&(Q?nb.enableAutoRender():nb.disableAutoRender())},get:function(){return this.get("render while typing checkbox").checked}},css:{after:["showPreview"],set:function(Q){this.setProperty("css",Q);var nb=this.mdPreviewMorph;
nb&&(nb.cssDeclaration=Q)}}}}}],ja,{pathInPackage:function(){return"./md/morphs.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:11886,end:15564})}(aj.Morph);aj.MarkdownEditor=Ul;aj.MarkdownEditor=Ul;var hi=window.lively.FreezerRuntime.recorderFor("lively.ide/md/editor-plugin.js");hi.CodeMirrorEnabledEditorPlugin=Wa;hi.mdSnippets=
Zs;hi.tokenizeDocument=Oc;hi.arr=nd;hi.string=wb;hi.addOrChangeLinkedCSS=Cb;hi.mdCompiler=Fl;hi.MarkdownNavigator=$s;hi.MarkdownPreviewMorph=gr;hi.pt=Jc;hi.Color=Nd;hi.Snippet=pa;hi.commands=[{name:"[markdown] convert to html",exec:function(){var J=ic(regeneratorRuntime.mark(function Q(Rb){var nb,Ia,lb,fb,kb=arguments;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:return nb=1<kb.length&&void 0!==kb[1]?kb[1]:{},nb=Object.assign({extent:hi.pt(500,800),openInWorld:{title:"markdown rendering"},
markdownPreviewMorphName:null,markdownPreviewMorph:null},nb),Ia=nb.markdownPreviewMorph||Rb._mdPreviewMorph,lb=Rb.world()||Ia&&Ia.world(),fb=nb.markdownPreviewMorphName||'markdown preview for "'.concat(Rb.name,'"'),!Ia&&lb&&(Ia=Rb._mdPreviewMorph=lb.get(fb)),Ia||(Ia=Rb._mdPreviewMorph=new hi.MarkdownPreviewMorph({name:fb,markdownEditor:Rb,extent:nb.extent,clipMode:"auto"})),nb.openInWorld&&!Ia.world()&&Ia.openInWindow(nb.openInWorld).activate(),Ia.getWindow()&&$world.addMorph(Ia.getWindow()).activate(),
Ia.renderMarkdown(),kc.abrupt("return",Ia);case 11:case "end":return kc.stop()}},Q)}));return function(Rb){return J.apply(this,arguments)}}()},{name:"[markdown] scroll to cursor position in preview",exec:function(){var J=ic(regeneratorRuntime.mark(function Q(Rb){var nb,Ia,lb,fb,kb,kc,Mc,Gc,Xc;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:nb=Rb.editorPlugin,Ia=nb.getNavigator(),lb=nb.parsedMarkdown(),fb=lb.headings,kb=Ia.headingOfLine(fb,Rb.cursorPosition.row),kc=
Ia.rangeOfHeading(Rb.textString,fb,kb),Mc=Rb.textInRange(kc.range),Gc=hi.mdCompiler.compileToHTML(Mc,Object.assign({},nb.markdownOptions,{markdownWrapperTemplate:null})),Xc=Rb._mdPreviewMorph,Xc.html.indexOf(Gc);case 10:case "end":return ad.stop()}},Q)}));return function(Rb){return J.apply(this,arguments)}}()},{name:"[markdown] goto heading",exec:function(){var J=ic(regeneratorRuntime.mark(function Q(Rb){var nb,Ia,lb,fb,kb,kc,Mc,Gc,Xc,ad=arguments;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=
he.next){case 0:nb=1<ad.length&&void 0!==ad[1]?ad[1]:{};Ia=Rb.cursorPosition.row;lb=Rb.editorPlugin.parsedMarkdown();fb=lb.headings;if(fb.length){he.next=5;break}return he.abrupt("return",!0);case 5:kb=Ia>=hi.arr.last(fb).line?fb.length:fb.findIndex(function(we){return we.line>Ia});-1===kb&&(kb=0);kc=fb.map(function(we){return{isListItem:!0,string:we.line+":"+hi.string.indent(we.string," ",we.depth),value:we}});if(Mc=nb.choice){he.next=14;break}he.next=12;return Rb.world().filterableListPrompt("jump to heading",
kc,{requester:Rb,preselect:kb-1,multiSelect:!1});case 12:hi.__inter0__=he.sent,Gc=hi.__inter0__.selected,Xc=Xb(Gc,1),Mc=Xc[0];case 14:return Mc&&(Rb.saveMark(),Rb.cursorPosition={row:Mc.line,column:0},Rb.flash(Rb.lineRange(Mc.line),{id:"md heading",time:1E3,fill:hi.Color.rgb(200,235,255)})),he.abrupt("return",!0);case 16:case "end":return he.stop()}},Q)}));return function(Rb){return J.apply(this,arguments)}}()}];var Cy={html:!0,linkify:!0,typographer:!0,linkedCSS:{"github-markdown":"/lively.ide/md/github-markdown.css"},
markdownWrapperTemplate:'<div class="markdown-body" style="margin: 5px">\n%s\n</div>',addSourceLineMapping:!0,externalizeLinks:{}};hi.defaultMarkdownOptions=Cy;hi.defaultMarkdownOptions=Cy;var Sn=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/md/editor-plugin.js"),Rb=ja.hasOwnProperty("MarkdownEditorPlugin")&&"function"===typeof ja.MarkdownEditorPlugin?ja.MarkdownEditorPlugin:ja.MarkdownEditorPlugin=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Fd(Rb,J,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){Fd._get(Object.getPrototypeOf(Rb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this._markdownOptions=Object.assign({},hi.defaultMarkdownOptions);this._html=""}},{key:"markdownOptions",get:function(){return this._markdownOptions}},{key:"markdownOptions",set:function(Q){this._ast=null;return this._markdownOptions=Q}},{key:"isMarkdownEditorPlugin",get:function(){return!0}},{key:"shortName",
get:function(){return"md"}},{key:"longName",get:function(){return"markdown"}},{key:"openPairs",get:function(){return{"{":"}","[":"]","(":")",'"':'"',"'":"'","`":"`"}}},{key:"closePairs",get:function(){return{"}":"{","]":"[",")":"(",'"':'"',"'":"'","`":"`"}}},{key:"getNavigator",value:function(){return new hi.MarkdownNavigator}},{key:"getCommands",value:function(Q){return Q.concat(hi.commands)}},{key:"getKeyBindings",value:function(Q){return Q.concat([{keys:"Alt-G",command:"[markdown] convert to html"},
{keys:"Alt-J",command:"[markdown] goto heading"}])}},{key:"getMenuItems",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=fb.next){case 0:return fb.abrupt("return",[{command:"[markdown] convert to html",alias:"convert to html",target:this.textMorph},{command:"[markdown] goto heading",alias:"goto heading",target:this.textMorph},{isDivider:!0}].concat(Ia));case 1:case "end":return fb.stop()}},lb,this)}));return function(Ia){return Q.apply(this,
arguments)}}()},{key:"getSnippets",value:function(){return hi.mdSnippets.map(function(Q){Q=Xb(Q,2);return new hi.Snippet({trigger:Q[0],expansion:Q[1]})})}},{key:"onTextChange",value:function(Q){Fd._get(Object.getPrototypeOf(Rb.prototype),"onTextChange",this).call(this,Q);this._html=""}},{key:"highlight",value:function(){var Q=this.textMorph,nb=this.theme,Ia=this.mode,lb=this._tokenizerValidBefore;if(nb&&Q&&Q.document&&Ia){Q.fill=nb.background;var fb=Q.viewState;lb=hi.tokenizeDocument(Ia,Q.document,
fb.firstVisibleRow,fb.lastVisibleRow,lb);Ia=lb.lines;lb=lb.tokens;if(Ia.length){fb=Ia[0].row;for(var kb=[],kc=0;kc<lb.length;fb++,kc++)for(var Mc=lb[kc],Gc=0;Gc<Mc.length;Gc+=5){for(var Xc=Mc[Gc],ad=Mc[Gc+1],he=(Mc[Gc+2]||"").split(" "),we=void 0,$e=0;$e<he.length;$e++){var Qe=he[$e];Qe&&(we=Object.assign({},we,nb[Qe]))}we||(we=nb["default"]);we&&kb.push({start:{row:fb,column:Xc},end:{row:fb,column:ad}},we)}Q.setTextAttributesWithSortedRanges(kb);this._tokenizerValidBefore={row:hi.arr.last(Ia).row+
1,column:0}}if(this.checker)this.checker.onDocumentChange({},Q,this)}}},{key:"parsedMarkdown",value:function(){return this._ast||(this._ast=this.parse())}},{key:"renderedMarkdown",value:function(){return this._html||(this._html=this.render())}},{key:"parse",value:function(Q){Q=Q?Object.assign({},this._markdownOptions,{},Q):this._markdownOptions;return hi.mdCompiler.parse(this.textMorph,Q)}},{key:"render",value:function(Q){Q=Q?Object.assign({},this._markdownOptions,{},Q):this._markdownOptions;if(Q.linkedCSS)for(var nb in Q.linkedCSS)hi.addOrChangeLinkedCSS(nb,
Q.linkedCSS[nb]);return hi.mdCompiler.compileToHTML(this.textMorph.textString,Q)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MarkdownEditorPlugin"}}],ja,{pathInPackage:function(){return"./md/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3801,end:7921})}(hi.CodeMirrorEnabledEditorPlugin);hi["default"]=
Sn;var ir=window.lively.FreezerRuntime.recorderFor("lively.ide/css/editor-plugin.js");ir.CodeMirrorEnabledEditorPlugin=Wa;ir.getMode=E;var bt=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/css/editor-plugin.js"),Rb=ja.hasOwnProperty("CSSEditorPlugin")&&"function"===typeof ja.CSSEditorPlugin?ja.CSSEditorPlugin:ja.CSSEditorPlugin=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,
J,[{key:"shortName",get:function(){return"css"}},{key:"isCSSEditorPlugin",get:function(){return!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CSSEditorPlugin"}}],ja,{pathInPackage:function(){return"./css/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:150,end:306})}(ir.CodeMirrorEnabledEditorPlugin);
ir["default"]=bt;var hr=window.lively.FreezerRuntime.recorderFor("lively.ide/css/less/editor-plugin.js");hr.CSSEditorPlugin=bt;hr.getMode=E;var Wj=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/css/less/editor-plugin.js"),Rb=ja.hasOwnProperty("LESSEditorPlugin")&&"function"===typeof ja.LESSEditorPlugin?ja.LESSEditorPlugin:ja.LESSEditorPlugin=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Fd(Rb,J,[{key:"shortName",get:function(){return"text/x-less"}},{key:"isCSSEditorPlugin",get:function(){return!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LESSEditorPlugin"}}],ja,{pathInPackage:function(){return"./css/less/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:136,
end:287})}(hr.CSSEditorPlugin);hr["default"]=Wj;var ne=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js");ne.Color=Nd;ne.Rectangle=Da;ne.pt=Jc;ne.arr=nd;ne.tree=zb;ne.num=db;ne.date=ib;ne.Path=cb;ne.obj=Ea;ne.fun=Sb;ne.promise=W;ne.string=wb;ne.Morph=Za;ne.easings=T;ne.config=ia;ne.Icon=ub;ne.ViewModel=Bb;ne.part=rd;ne.TreeData=eb;ne.editableFiles=Be;ne.JavaScriptEditorPlugin=jb;ne.JSONEditorPlugin=Ig;ne.JSXEditorPlugin=fc;ne.EvalBackendChooser=Ma;ne.browserCommands=fe;ne.categorizer=
ka;ne.fuzzyParse=K;ne.testsFromSource=Vb;ne.modules=Lb;ne.DarkTheme=Kb;ne.DefaultTheme=Db;ne.objectReplacementChar=ya;ne.loadPart=pb;ne.serverInterfaceFor=Ra;ne.localInterface=N;ne.lint=va;ne.mdCompiler=Fl;ne.MarkdownEditorPlugin=Sn;ne.LESSEditorPlugin=Wj;ne.ColumnListDefault=bd;ne.ColumnListDark=Yd;ne.joinPath=La;ne.LoadingIndicator=ab;ne.noUpdate=Pc;ne.CSSEditorPlugin=bt;ne.HTMLEditorPlugin=aa;var Gp=Lc("a",{js:ne.Color.rgb(46,204,113),json:ne.Color.rgb(128,139,150),md:ne.Color.rgb(142,68,173),
less:ne.Color.rgbHex("1D365E"),cp:ne.Color.rgbHex("E67E22"),html:ne.Color.rgbHex("0091EA")});ne.COLORS=Gp;ne.COLORS=Gp;var Hp=Lc("P",function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),Rb=ja.hasOwnProperty("PackageControls")&&"function"===typeof ja.PackageControls?ja.PackageControls:ja.PackageControls=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,
J,[{key:"focusOn",value:function(Q){this._browser=Q}},{key:"onMouseUp",value:function(Q){Fd._get(Object.getPrototypeOf(Rb.prototype),"onMouseUp",this).call(this,Q);switch(Q.targetMorph.name){case "run all pkg tests":this._browser.execCommand("run all tests in package");break;case "add pkg":this._browser.execCommand("add package");break;case "remove pkg":this._browser.execCommand("remove package")}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PackageControls"}}],ja,{pathInPackage:function(){return"./js/browser/index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1971,end:2453})}(ne.Morph));ne.PackageControls=Hp;ne.PackageControls=Hp;var Ip=Lc("D",function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),Rb=ja.hasOwnProperty("DirectoryControls")&&"function"===typeof ja.DirectoryControls?ja.DirectoryControls:ja.DirectoryControls=
function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"focusOn",value:function(Q,nb){this._browser=Q;this._dir=nb}},{key:"onMouseUp",value:function(Q){Fd._get(Object.getPrototypeOf(Rb.prototype),"onMouseUp",this).call(this,Q);"remove selected"===Q.targetMorph.name&&this.removeSelected();"add file"===Q.targetMorph.name&&this.addFile(Q);"add folder"===Q.targetMorph.name&&this.addFolder()}},
{key:"addFolder",value:function(){this._browser.execCommand("create new folder",{dir:this._dir})}},{key:"addFile",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc;return regeneratorRuntime.wrap(function(Mc){for(;;)switch(Mc.prev=Mc.next){case 0:return kb={paddingTop:"4px",fontSize:14},Mc.next=3,this.world().openWorldMenu(Ia,[{title:"Select file type:"},{isDivider:!0},[[].concat(vd(ne.Icon.textAttribute("js-square",Object.assign({},kb,{fontColor:ne.COLORS.js}))),["  Javascript"]),
function(){fb="js"}],[[].concat(vd(ne.Icon.textAttribute("shapes",Object.assign({},kb,{fontColor:ne.COLORS.cp}))),["  Component"]),function(){fb="cp.js"}],[[].concat(vd(ne.Icon.textAttribute("code",Object.assign({},kb,{fontColor:ne.COLORS.json}))),[" JSON"]),function(){fb="json"}],[[].concat(vd(ne.Icon.textAttribute("markdown",Object.assign({},kb,{fontColor:ne.COLORS.md}))),[" Markdown"]),function(){fb="md"}],[[].concat(vd(ne.Icon.textAttribute("less",Object.assign({},kb,{fontColor:ne.COLORS.less}))),
[" Less (CSS)"]),function(){fb="less"}]]);case 3:return kc=Mc.sent,Mc.next=6,kc.whenFinished();case 6:if(fb){Mc.next=8;break}return Mc.abrupt("return");case 8:this._browser.execCommand("create new module",{dir:this._dir,type:fb});case 9:case "end":return Mc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"removeSelected",value:function(){this._browser.execCommand("remove selected entity",{dir:this._dir})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DirectoryControls"}}],
ja,{pathInPackage:function(){return"./js/browser/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2461,end:4329})}(ne.Morph));ne.DirectoryControls=Ip;ne.DirectoryControls=Ip;var Fp=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),Rb=ja.hasOwnProperty("PackageTreeData")&&"function"===
typeof ja.PackageTreeData?ja.PackageTreeData:ja.PackageTreeData=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"columnView",get:function(){return this.root.browser.ui.columnView}},{key:"systemInterface",get:function(){return this.root.browser.systemInterface}},{key:"editorPlugin",get:function(){return this.root.browser.editorPlugin}},{key:"display",value:function(Q){var nb=Q.type,
Ia=Q.pkg,lb=Q.isCollapsed,fb=Q.isDeclaration,kb=Q.lastModified,kc=Q.size,Mc=Q.name;if("package"===nb)return this.displayPackage(Ia);if(fb)return this.displayDeclaration(Q);Ia=kb?ne.date.format(kb,"yyyy-mm-dd HH:MM:ss"):" ".repeat(19);kc=kc?ne.num.humanReadableByteSize(kc):"";fb=this.columnView.isSelected(Q);switch(nb){case "md":var Gc=this.displayMarkdown(Mc,fb);break;case "js":case "mjs":case "cjs":Gc=this.displayModule(Mc,fb,Q.isLoaded);break;case "json":Gc=this.displayJson(Mc,fb);break;case "directory":Gc=
this.displayDirectory(Mc,!lb);break;case "less":Gc=this.displayLess(Mc,fb);break;case "css":Gc=this.displayCSS(Mc,fb);break;case "html":Gc=this.displayHTML(Mc,fb)}return[].concat(vd(Gc),["\t".concat(kc," ").concat(Ia),{paddingTop:"3px",opacity:.5,fontSize:"70%",textStyleClasses:["annotation"]}])}},{key:"displayDeclaration",value:function(Q){var nb=[];switch(Q.type){case "class-class-method":nb=["static ",{}];break;case "class-instance-method":case "function-decl":nb=ne.Icon.textAttribute("dice-d6",
{paddingLeft:"3px",paddingRight:"3px"});break;case "class-decl":nb=ne.Icon.textAttribute("sitemap");break;case "object-decl":nb=ne.Icon.textAttribute("atom",{paddingLeft:"2px",paddingRight:"2px"});break;case "array-decl":nb=ne.Icon.textAttribute("list-ol",{paddingLeft:"2px",paddingRight:"2px"});break;case "var-decl":nb=ne.Icon.textAttribute("asterisk",{paddingLeft:"2px",paddingRight:"2px"});break;case "class-class-getter":nb=ne.Icon.textAttribute("arrow-right",{paddingLeft:"2px",paddingRight:"2px"});
break;case "class-instance-getter":nb=["get ",null];break;case "class-instance-setter":nb=["set ",null];break;case "describe":nb=ne.Icon.textAttribute("vials");break;case "xdescribe":nb=ne.Icon.textAttribute("vials",{opacity:.5});break;case "it":nb=ne.Icon.textAttribute("vial");break;case "xit":nb=ne.Icon.textAttribute("vial",{opacity:.5});break;case "before":case "beforeEach":case "after":case "afterEach":nb=ne.Icon.textAttribute("hammer")}return[].concat(vd(nb),[" "+ne.string.truncate(Q.name||"[PARSE_ERROR]",
18,"\u2026"),null])}},{key:"displayPackage",value:function(Q){return[].concat(vd(ne.Icon.textAttribute("cube")),[" "+ne.string.truncate(Q.name,26,"\u2026"),{fontStyle:"git"===Q.kind?"italic":"normal"},"\t".concat(Q.kind),{paddingTop:"3px",opacity:.5,fontSize:"70%",textStyleClasses:["annotation"]}])}},{key:"displayDirectory",value:function(Q,nb){return[].concat(vd(ne.Icon.textAttribute(nb?"folder-open":"folder",{textStyleClasses:["far"]})),[" "+Q,null])}},{key:"displayModule",value:function(Q,nb,Ia){return[].concat(vd(ne.Icon.textAttribute(Q.endsWith(".cp.js")?
"shapes":"js-square",{fontColor:nb?ne.Color.white:Q.endsWith(".cp.js")?ne.COLORS.cp:ne.COLORS.js,opacity:Ia?1:.5})),[" "+ne.string.truncate(Q,24,"\u2026"),null])}},{key:"displayJson",value:function(Q,nb){return[].concat(vd(ne.Icon.textAttribute("cog",{fontColor:nb?ne.Color.white:ne.COLORS.json})),[" "+Q,null])}},{key:"displayMarkdown",value:function(Q,nb){return[].concat(vd(ne.Icon.textAttribute("markdown",{fontColor:nb?ne.Color.white:ne.COLORS.md})),[" "+Q,null])}},{key:"displayLess",value:function(Q,
nb){return[].concat(vd(ne.Icon.textAttribute("less",{fontColor:nb?ne.Color.white:ne.COLORS.less})),[" "+Q,null])}},{key:"displayCSS",value:function(Q,nb){return[].concat(vd(ne.Icon.textAttribute("css3-alt",{fontColor:nb?ne.Color.white:ne.COLORS.less})),[" "+Q,null])}},{key:"displayHTML",value:function(Q,nb){return[].concat(vd(ne.Icon.textAttribute("file-code",{fontColor:nb?ne.Color.white:ne.COLORS.html})),[" "+Q+" ",null])}},{key:"listModuleScope",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,
kb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:return kc.next=2,this.systemInterface.moduleRead(Ia);case 2:return fb=kc.sent,kb=ne.fuzzyParse(fb),kc.abrupt("return",ne.categorizer.findDecls(kb).filter(function(Mc){return!Mc.parent&&Mc.name}).map(function(Mc){Mc.isDeclaration=!0;Mc.isCollapsed=!0;return Mc}));case 5:case "end":return kc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"listJSONScope",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=
fb.next){case 0:return fb.next=2,this.systemInterface.runEval("\n      await listJSONScope('".concat(Ia,"');\n    "),{targetModule:"lively.ide/js/browser/tree.js",ackTimeout:3E4});case 2:return fb.abrupt("return",fb.sent.value);case 3:case "end":return fb.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"listMarkdownHeadings",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=
kc.next){case 0:return kc.t0=ne.mdCompiler,kc.next=3,this.systemInterface.moduleRead(Ia);case 3:return kc.t1=kc.sent,kc.t2={textString:kc.t1},fb=kc.t0.parse.call(kc.t0,kc.t2),kb=fb.headings,kc.abrupt("return",kb.map(function(Mc){Mc.isDeclaration=!0;Mc.isCollapsed=!0;Mc.name=Mc.string.replace(/^#+\s?/,"");return Mc}));case 8:case "end":return kc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"listAllPackages",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb;
return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=fb.next){case 0:return fb.next=2,this.systemInterface.getPackages();case 2:return lb=fb.sent,fb.abrupt("return",ne.arr.sortBy(lb.map(function(kb){var kc="git";kb.url.startsWith("local")&&(kc="local");kb.name.startsWith("lively")&&(kc="core");kb.kind=kc;return{url:kb.url+(kb.url.endsWith("/")?"":"/"),isCollapsed:!0,type:"package",name:kb.name,tooltip:kb.name,pkg:kb}}),function(kb){return{core:1,local:2,git:3}[kb.pkg.kind]}));case 4:case "end":return fb.stop()}},
Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"listEditableFilesInPackage",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=fb.next){case 0:return fb.next=2,this.listEditableFilesInDir(Ia);case 2:return fb.abrupt("return",fb.sent);case 3:case "end":return fb.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"getLoadedModuleUrls",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,
fb,kb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:return lb=this.root.subNodes.find(function(Mc){return!Mc.isCollapsed}),kc.next=3,this.systemInterface.resourcesOfPackage(lb.url,["assets","objectdb",".git"]);case 3:return fb=kc.sent,kc.next=6,this.systemInterface.getPackage(lb.url);case 6:return kb={},fb.forEach(function(Mc){kb[Mc.url]=Mc}),kc.abrupt("return",kb);case 9:case "end":return kc.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},
{key:"listEditableFilesInDir",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:return kc.next=2,this.systemInterface.runEval("\n      await listEditableFilesInDir('".concat(Ia,"');\n    "),{targetModule:"lively.ide/js/browser/tree.js",ackTimeout:3E4});case 2:return fb=kc.sent.value,kc.next=5,this.getLoadedModuleUrls();case 5:return kb=kc.sent,kc.abrupt("return",fb.map(function(Mc){Object.assign(Mc,
kb[Mc.url]||{});return Mc}));case 7:case "end":return kc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"isCollapsed",value:function(Q){return Q.isCollapsed}},{key:"collapse",value:function(){var Q=ic(regeneratorRuntime.mark(function fb(Ia,lb){return regeneratorRuntime.wrap(function(kb){for(;;)switch(kb.prev=kb.next){case 0:if(Ia!==this.root){kb.next=12;break}lb=!1;kb.next=4;return this.listAllPackages();case 4:Ia.subNodes=kb.sent;kb.t0=Ia.listControl;if(kb.t0){kb.next=
10;break}kb.next=9;return pd.import("./ui.cp-04e9d052.js").then(function(kc){return ne.part(kc.BrowserPackageControls)});case 9:kb.t0=kb.sent;case 10:Ia.listControl=kb.t0,Ia.listControl.focusOn(this.root.browser);case 12:Ia.isCollapsed=lb;Ia.isDirty=!0;if(lb){kb.next=56;break}if("package"!==Ia.type){kb.next=26;break}kb.next=18;return this.listEditableFilesInPackage(Ia.url);case 18:Ia.subNodes=kb.sent;kb.t1=Ia.listControl;if(kb.t1){kb.next=24;break}kb.next=23;return pd.import("./ui.cp-04e9d052.js").then(function(kc){return ne.part(kc.BrowserDirectoryControls)});
case 23:kb.t1=kb.sent;case 24:Ia.listControl=kb.t1,Ia.listControl.focusOn(this.root.browser,Ia.url);case 26:Ia.children&&(Ia.children.forEach(function(kc){kc.isDeclaration=!0;kc.isCollapsed=!0;kc.parent=Ia}),Ia.subNodes=Ia.children);if("directory"!==Ia.type){kb.next=38;break}kb.next=30;return this.listEditableFilesInDir(Ia.url);case 30:Ia.subNodes=kb.sent;kb.t2=Ia.listControl;if(kb.t2){kb.next=36;break}kb.next=35;return pd.import("./ui.cp-04e9d052.js").then(function(kc){return ne.part(kc.BrowserDirectoryControls)});
case 35:kb.t2=kb.sent;case 36:Ia.listControl=kb.t2,Ia.listControl.focusOn(this.root.browser,Ia.url);case 38:if("js"!==Ia.type){kb.next=42;break}kb.next=41;return this.listModuleScope(Ia.url);case 41:Ia.subNodes=kb.sent;case 42:if("md"!==Ia.type){kb.next=52;break}kb.prev=43;kb.next=46;return this.listMarkdownHeadings(Ia.url);case 46:Ia.subNodes=kb.sent;kb.next=52;break;case 49:kb.prev=49,kb.t3=kb["catch"](43),Ia.subNodes=[];case 52:if("json"!==Ia.type){kb.next=56;break}kb.next=55;return this.listJSONScope(Ia.url);
case 55:Ia.subNodes=kb.sent;case 56:case "end":return kb.stop()}},fb,this,[[43,49]])}));return function(Ia,lb){return Q.apply(this,arguments)}}()},{key:"getChildren",value:function(Q){var nb=this,Ia=Q.subNodes||[];Ia.forEach(function(lb){return nb.parentMap.set(lb,Q)});return Ia}},{key:"isLeaf",value:function(Q){var nb=Q.children;return Q.isDeclaration?!nb:!["package","directory","js","json","md"].includes(Q.type)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PackageTreeData"}}],
ja,{pathInPackage:function(){return"./js/browser/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4337,end:14596})}(ne.TreeData);ne.PackageTreeData=Fp;ne.PackageTreeData=Fp;var ct=function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),Rb=ja.hasOwnProperty("CodeDefTreeData")&&"function"===
typeof ja.CodeDefTreeData?ja.CodeDefTreeData:ja.CodeDefTreeData=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:Symbol["for"]("lively-instance-initialize"),value:function(Q){Q.forEach(function(nb){return nb.children&&(nb.isCollapsed=!0)});Fd._get(Object.getPrototypeOf(Rb.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,{name:"root",isCollapsed:!1,children:Q.filter(function(nb){return!nb.parent})});
this.defs=Q}},{key:"display",value:function(Q){var nb=String(Q.name);"class-instance-getter"===Q.type&&(nb="get "+nb);"class-instance-setter"===Q.type&&(nb="set "+nb);return nb}},{key:"isLeaf",value:function(Q){return!Q.children}},{key:"isCollapsed",value:function(Q){return Q.isCollapsed}},{key:"collapse",value:function(Q,nb){Q.isCollapsed=nb}},{key:"getChildren",value:function(Q){return this.isLeaf(Q)?null:this.isCollapsed(Q)?[]:Q.children}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CodeDefTreeData"}}],
ja,{pathInPackage:function(){return"./js/browser/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:14604,end:15426})}(ne.TreeData);ne.CodeDefTreeData=ct;ne.CodeDefTreeData=ct;var at=Lc("B",function(J){var ja=window.lively.FreezerRuntime.recorderFor("lively.ide/js/browser/index.js"),Rb=ja.hasOwnProperty("BrowserModel")&&"function"===
typeof ja.BrowserModel?ja.BrowserModel:ja.BrowserModel=function(Q){if(!Q||!Q[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Fd(Rb,J,[{key:"serializeBrowser",value:function(Q){Q=this.browserSpec().map(function(nb){return JSON.stringify(nb,function(Ia,lb){return"systemInterface"===Ia?"__LIVELY-INTERFACE-PLACEHOLDER__":"scroll"===Ia?"__LIVELY-SCROLL-PLACEHOLDER__":"module"===Ia?ne.obj.select(lb,["pathInModule","packageName",
"name"]):lb}).replace(JSON.stringify("__LIVELY-SCROLL-PLACEHOLDER__"),nb.content.spec.scroll.toString()).replace(JSON.stringify("__LIVELY-INTERFACE-PLACEHOLDER__"),"localInterface")});Q="["+Q.join(",")+"]";return{__expr__:"let b = part(SystemBrowser); b.browserFromSpec(".concat(Q,"); b;"),bindings:{"lively.morphic":["part"],"lively.ide/js/browser/ui.cp.js":["SystemBrowser"],"lively-system-interface":["localInterface"],"lively.graphics":["pt"]}}}},{key:"ensureColumnViewData",value:function(){var Q=
ic(regeneratorRuntime.mark(function Ia(){var lb;return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=fb.next){case 0:lb=this.ui.columnView;if(lb.treeData){fb.next=4;break}fb.next=4;return lb.setTreeData(new ne.PackageTreeData({browser:this}));case 4:case "end":return fb.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"viewDidLoad",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb;return regeneratorRuntime.wrap(function(kb){for(;;)switch(kb.prev=
kb.next){case 0:this.state={packageUpdateInProgress:null,moduleUpdateInProgress:null,selectedPackage:null,sourceHash:ne.string.hashCode(""),moduleChangeWarning:null,isSaving:!1,history:{left:[],right:[],navigationInProgress:null}};this.refreshHistoryButtons();this.relayout();this.ui.metaInfoText.reset();lb=this.ui.sourceEditor;lb.plugins.length||lb.addPlugin(new ne.JavaScriptEditorPlugin(ne.config.codeEditor.defaultTheme));if(!this._serializedState){kb.next=11;break}fb=this._serializedState;delete this._serializedState;
kb.next=11;return this.browse(fb);case 11:this.ui.evalBackendButton.target=this.view,(new ne.EvalBackendChooser).buildEvalBackendDropdownFor(this,this.ui.evalBackendButton),this.ui.tabs.addTab("Browser Tab",null),this.ui.verticalResizer.movedVerticallyBy(0);case 15:case "end":return kb.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"relayout",value:function(){var Q=this.ui,nb=Q.columnView,Ia=Q.sourceEditor,lb=Q.headerButtons,fb=Q.verticalResizer,kb=Q.smiley;Q=Q.tabs;
var kc=Math.ceil(lb.height),Mc=Q.visible?Q.height:0;lb.visible=400<this.view.width;lb.visible?(nb.top=Q.visible?kc+Q.height:kc,Q.visible&&(Q.top=kc),nb.height=fb.top-kc-Mc):(nb.top=Q.visible?Q.height:0,Q.visible&&(Q.top=0),nb.height=fb.top-Mc);kb.center=Ia.center}},{key:"isBrowser",get:function(){return!0}},{key:"selectedModule",get:function(){var Q=this;return this.ui.columnView.getExpandedPath().find(function(nb){return Q.isModule(nb)})}},{key:"selectedModule",set:function(Q){var nb=this.ui.columnView;
Q?this.selectModuleNamed("string"===typeof Q?Q:Q.url||Q.id):nb.setExpandedPath()}},{key:"selectedPackage",get:function(){return this.state&&this.state.selectedPackage}},{key:"selectedPackage",set:function(Q){this.selectPackageNamed(Q?"string"===typeof Q?Q:Q.url||Q.address:null)}},{key:"selectedCodeEntity",get:function(){var Q=this.ui.columnView.getExpandedPath().filter(function(nb){return nb.isDeclaration});return 1<Q.length?Q:ne.arr.last(Q)}},{key:"selectedDirectory",get:function(){return this.ui.columnView.getExpandedPath().reverse().find(function(Q){return["package",
"directory"].includes(Q.type)})}},{key:"isModule",value:function(Q){return Q&&ne.editableFiles.includes(Q.type)}},{key:"updateSource",value:function(Q,nb){var Ia=this.ui.sourceEditor;Ia.textString!==Q&&(Ia.textString=Q);Q=Q.split(ne.objectReplacementChar).join("");this.state.sourceHash=ne.string.hashCode(Q);this.indicateNoUnsavedChanges();this.state.moduleChangeWarning=null;nb&&(Ia.cursorPosition=nb)}},{key:"indicateUnsavedChanges",value:function(){this.prohibitKeyboardNavigation();Object.assign(this.ui.sourceEditor,
{padding:ne.Rectangle.inset(2,58,2,0),border:{width:2,color:ne.Color.red}})}},{key:"indicateNoUnsavedChanges",value:function(){this.allowKeyboardNavigation();Object.assign(this.ui.sourceEditor,{padding:ne.Rectangle.inset(4,60,4,0),border:{width:0,color:ne.Color.transparent}})}},{key:"hasUnsavedChanges",value:function(Q){var nb=this.ui.sourceEditor.textString;nb=nb.split(ne.objectReplacementChar).join("");return Q&&nb!==Q?!0:this.state.sourceHash!==ne.string.hashCode(nb)}},{key:"updateUnsavedChangeIndicatorDebounced",
value:function(){var Q=this;ne.fun.debounceNamed(this.id+"-updateUnsavedChangeIndicatorDebounced",20,function(){return Q.updateUnsavedChangeIndicator()})()}},{key:"updateUnsavedChangeIndicator",value:function(){this[this.hasUnsavedChanges()?"indicateUnsavedChanges":"indicateNoUnsavedChanges"]()}},{key:"prohibitKeyboardNavigation",value:function(){var Q=this.ui.columnView;Q.treeData.listNavigationProhibited=!0;Q.lists.forEach(function(nb){return nb.arrowNavigationProhibited=!0})}},{key:"allowKeyboardNavigation",
value:function(){var Q=this.ui.columnView;Q.treeData.listNavigationProhibited=!1;Q.lists.forEach(function(nb){return nb.arrowNavigationProhibited=!1})}},{key:"setEvalBackend",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb;return regeneratorRuntime.wrap(function(kb){for(;;)switch(kb.prev=kb.next){case 0:Ia=Ia||"local";fb=this.systemInterface;if(Ia===fb.name){kb.next=7;break}this.editorPlugin.setSystemInterfaceNamed(Ia);kb.next=6;return this.toggleWindowStyle();case 6:this.browse(this.browseSpec());
case 7:case "end":return kb.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"toggleWindowStyle",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc,Gc,Xc,ad=arguments;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:lb=0<ad.length&&void 0!==ad[0]?ad[0]:!0;fb=1E3;kb=ne.easings.outExpo;Mc=this.ui;Gc=Mc.columnView;Xc=Mc.sourceEditor;Gc.reset();he.t0=this.editorPlugin.runEval;if(!he.t0){he.next=10;break}he.next=
9;return this.editorPlugin.runEval("System.get('@system-env').node");case 9:he.t0=he.sent.value;case 10:if(!he.t0){he.next=15;break}kc=ne.DarkTheme.instance;Gc.listMaster=ne.ColumnListDark;he.next=17;break;case 15:kc=ne.DefaultTheme.instance,Gc.listMaster=ne.ColumnListDefault;case 17:this.editorPlugin.theme=kc,lb&&(Xc.animate({fill:kc.background,duration:fb,easing:kb}),Gc.animate({fill:kc.background,duration:fb,easing:kb})),this.editorPlugin.highlight(),this.relayout();case 21:case "end":return he.stop()}},
Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"packageResources",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb;return regeneratorRuntime.wrap(function(kb){for(;;)switch(kb.prev=kb.next){case 0:return fb=(ne.Path("lively.ide.exclude").get(Ia)||[]).map(function(kc){return kc.includes("*")?new RegExp(kc.replace(/\*/g,".*")):kc}),fb.push(".git","node_modules",".module_cache","assets"),kb.prev=2,kb.next=5,this.systemInterface.resourcesOfPackage(Ia.address,
fb);case 5:return kb.t0=function(kc){var Mc=kc.url;return(Mc.endsWith(".js")||Mc.endsWith(".json")||Mc.endsWith(".jsx"))&&!fb.some(function(Gc){return Gc instanceof RegExp?Gc.test(Mc):Mc.includes(Gc)})},kb.t1=function(kc){kc.name=kc.url;return kc},kb.abrupt("return",kb.sent.filter(kb.t0).map(kb.t1));case 10:return kb.prev=10,kb.t2=kb["catch"](2),this.view.showError(kb.t2),kb.abrupt("return",[]);case 14:case "end":return kb.stop()}},lb,this,[[2,10]])}));return function(Ia){return Q.apply(this,arguments)}}()},
{key:"browseSpec",value:function(){var Q=this.selectedCodeEntity?Array.isArray(this.selectedCodeEntity)?ne.arr.last(this.selectedCodeEntity).name:this.selectedCodeEntity.name:null;return{packageName:this.selectedPackage?this.selectedPackage.name:"lively.morphic",textPosition:this.ui.sourceEditor.selection.start,scroll:this.ui.sourceEditor.scroll,moduleName:this.selectedModule?this.selectedModule.nameInPackage:null,codeEntity:Q,systemInterface:this.systemInterface}}},{key:"browserSpec",value:function(){this.ui.tabs.selectedTab.content=
{spec:this.browseSpec(),history:this.state.history};return this.ui.tabs.tabs.map(function(Q){return Q.viewModel.spec})}},{key:"browserFromSpec",value:function(Q){var nb=this;ne.noUpdate(function(){nb.ui.tabs.loadFromSpec(Q)});var Ia=this.ui.tabs.selectedTab;this.state.history=Ia.content.history;this.refreshHistoryButtons();this.browse(Ia.content.spec);return this.view}},{key:"browse",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc,Gc,Xc,ad,he,we,$e,Qe,dg,Cf,Fh,ag=
arguments;return regeneratorRuntime.wrap(function(ng){for(;;)switch(ng.prev=ng.next){case 0:return lb=0<ag.length&&void 0!==ag[0]?ag[0]:{},fb=1<ag.length?ag[1]:void 0,kb=lb.packageName,kc=lb.moduleName,Mc=lb.textPosition,Gc=lb.codeEntity,Xc=lb.scroll,ad=lb.systemInterface,he=this.ui.sourceEditor,ng.next=6,this.ensureColumnViewData();case 6:if(!fb&&!ad){ng.next=16;break}ng.prev=7;this.systemInterface=fb||ad;if(!this.ui.evalBackendList){ng.next=12;break}ng.next=12;return this.ui.evalBackendList.updateFromTarget();
case 12:ng.next=16;break;case 14:ng.prev=14,ng.t0=ng["catch"](7);case 16:return ng.next=18,this.toggleWindowStyle(!1);case 18:if(!kb){ng.next=26;break}ng.next=21;return this.selectPackageNamed(kb);case 21:if(!kc){ng.next=24;break}ng.next=24;return this.selectModuleNamed(kc,!1);case 24:ng.next=53;break;case 26:if(!kc){ng.next=53;break}we=this.systemInterface;ng.next=30;return we.getModule(kc);case 30:$e=ng.sent;if(!$e){ng.next=38;break}kc=$e.id;ng.next=35;return we.getPackageForModule($e.id);case 35:Qe=
ng.sent;ng.next=47;break;case 38:return dg=kc.split("/"),Cf=dg.shift(),Fh=dg.join("/"),ng.next=43,we.getPackage(Cf);case 43:return Qe=ng.sent,ng.next=46,we.getModule("".concat(Qe.url,"/").concat(Fh));case 46:$e=ng.sent;case 47:if(!$e||!Qe){ng.next=53;break}kc=$e.id;ng.next=51;return this.selectPackageNamed(Qe.url);case 51:return ng.next=53,this.selectModuleNamed(kc,!1);case 53:if(!Gc){ng.next=56;break}ng.next=56;return this.selectCodeEntityInColumnView(Gc,!1);case 56:if(!Mc){ng.next=62;break}if(!this.world()){ng.next=
60;break}ng.next=60;return ne.promise.delay(10);case 60:he.cursorPosition=Mc,he.centerRow(Mc.row);case 62:if(!Xc){ng.next=67;break}if(!this.world()){ng.next=66;break}ng.next=66;return ne.promise.delay(10);case 66:he.scroll=Xc;case 67:if(!this.selectedModule){ng.next=70;break}ng.next=70;return this.prepareCodeEditorForModule(this.selectedModule);case 70:return ng.abrupt("return",this.view);case 71:case "end":return ng.stop()}},Ia,this,[[7,14]])}));return function(){return Q.apply(this,arguments)}}()},
{key:"whenPackageUpdated",value:function(){return this.state.packageUpdateInProgress||Promise.resolve()}},{key:"whenModuleUpdated",value:function(){this.reactivateEditor();return this.state.moduleUpdateInProgress||Promise.resolve()}},{key:"selectPackageNamed",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc,Xc=arguments;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:return fb=1<Xc.length&&void 0!==Xc[1]?Xc[1]:!1,Ia=Ia||"lively.morphic",
ad.next=4,this.systemInterface.getPackage(Ia);case 4:return kb=ad.sent,kc=this.ui.columnView,Mc=kc.treeData,ad.next=9,kc.setExpandedPath(function(he){return he===Mc.root||he.ur===kb.address+"/"},Mc.root,!1);case 9:if(!fb){ad.next=14;break}Gc=kc.treeData.root.subNodes.find(function(he){return Ia===he.name});ad.next=13;return kc.selectNode(Gc);case 13:kc.submorphs.forEach(function(he){he.scrollSelectionIntoView()});case 14:return ad.next=16,this.onPackageSelected(kb);case 16:return ad.next=18,this.whenPackageUpdated();
case 18:return ad.abrupt("return",kb);case 19:case "end":return ad.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"onPackageSelected",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:this.switchMode("js");this.state.selectedPackage=Ia;this.state.packageUpdateInProgress||(fb=ne.promise.deferred(),this.state.packageUpdateInProgress=fb.promise);try{kb=this.view.getWindow(),
Ia?(kb.title="browser - "+Ia.name,this.ui.tabs.selectedTab.caption.includes(Ia.name)||(this.ui.tabs.selectedTab.caption=Ia.name)):(this.updateSource(""),kb.title="browser")}finally{fb&&(this.state.packageUpdateInProgress=null,fb.resolve(Ia))}case 4:case "end":return kc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"indicateFrozenModuleIfNeeded",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc;return regeneratorRuntime.wrap(function(Mc){for(;;)switch(Mc.prev=
Mc.next){case 0:return lb=this.ui.metaInfoText,Mc.next=3,this.systemInterface.getModule(this.selectedModule.url);case 3:if(fb=Mc.sent){Mc.next=6;break}return Mc.abrupt("return");case 6:kb=fb["package"]().name,kc=fb.pathInPackage(),fb._frozenModule&&lb.showFrozen('The module "'.concat(kb,"/").concat(kc,'" you are viewing is frozen. You are not able to make changes to this module unless you reload the world with dynamic load enabled for the package "').concat(kb,'".'));case 9:case "end":return Mc.stop()}},
Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"getDisplayedModuleNodes",value:function(){return this.ui.columnView.submorphs.filter(function(Q){return["directory","package"].includes(Q._managedNode.type)}).map(function(Q){return Q.items.map(function(nb){return nb.value})}).flat()}},{key:"selectModuleNamed",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc,Xc,ad,he=arguments;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=
we.next){case 0:fb=1<he.length&&void 0!==he[1]?he[1]:!0;kb=this.ui.columnView;kc=this.getDisplayedModuleNodes().find(function($e){var Qe=$e.nameInPackage;return Ia===$e.url||Ia===Qe});if(!kc){we.next=7;break}we.next=6;return kb.selectNode(kc,fb);case 6:kb.submorphs.forEach(function($e){$e.scrollSelectionIntoView()});case 7:if(kc){we.next=33;break}Mc=this.systemInterface;Gc=this.state.selectedPackage;we.next=12;return Mc.doesModuleExist(Ia);case 12:if(!we.sent){we.next=16;break}Xc=Gc&&!Ia.startsWith(Gc.url)?
Gc.url+"/"+Ia:Ia;we.next=23;break;case 16:we.t0=Gc;if(!we.t0){we.next=21;break}we.next=20;return Mc.doesModuleExist(Gc.url+"/"+Ia,!0);case 20:we.t0=we.sent;case 21:if(!we.t0){we.next=23;break}Xc=Gc.url+"/"+Ia;case 23:if(!Xc){we.next=33;break}ad=kb.treeData;we.next=27;return kb.setExpandedPath(function($e){return $e===ad.root||Xc.startsWith($e.url)},ad.root,!1);case 27:return we.t1=this,we.next=30,this.systemInterface.moduleRead(Xc);case 30:we.t2=we.sent,we.t3={row:0,column:0},we.t1.updateSource.call(we.t1,
we.t2,we.t3);case 33:return this.ui.sourceEditor.undoManager.reset(),we.next=36,this.whenModuleUpdated();case 36:return we.abrupt("return",kc);case 37:case "end":return we.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"searchForModuleAndSelect",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc;return regeneratorRuntime.wrap(function(Xc){for(;;)switch(Xc.prev=Xc.next){case 0:fb=this.selectedModule;if(!fb||fb.url!==Ia){Xc.next=3;
break}return Xc.abrupt("return",fb);case 3:return kb=this.systemInterface,Xc.next=6,kb.getModules();case 6:kc=Xc.sent;Mc=kc.find(function(ad){return ad.name===Ia});Xc.t0=Mc;if(!Xc.t0){Xc.next=13;break}Xc.next=12;return kb.getPackageForModule(Mc.name);case 12:Xc.t0=Xc.sent;case 13:if(Gc=Xc.t0){Xc.next=16;break}return Xc.abrupt("return",null);case 16:return Xc.next=18,this.selectPackageNamed(Gc.address);case 18:return Xc.next=20,this.selectModuleNamed(Mc.name);case 20:return Xc.next=22,this.prepareCodeEditorForModule(this.selectedModule);
case 22:return Xc.abrupt("return",this.selectedModule);case 23:case "end":return Xc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"warnForUnsavedChanges",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){return regeneratorRuntime.wrap(function(lb){for(;;)switch(lb.prev=lb.next){case 0:return lb.next=2,this.world().confirm(["Discard Changes\n",{},"The unsaved changes to this module are going to be discarded.\nAre you sure you want to proceed?",{fontSize:16,
fontWeight:"normal"}],{requester:this.view,width:350});case 2:return lb.abrupt("return",lb.sent);case 3:case "end":return lb.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"loadES6Mocha",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb;return regeneratorRuntime.wrap(function(kb){for(;;)switch(kb.prev=kb.next){case 0:return kb.next=2,this.systemInterface.runEval("\n      const g = typeof global !== 'undefined' ? global : window;\n     !!g.Mocha && !!g.chai\n    ",
{targetModule:this.selectedModule.url});case 2:lb=kb.sent;fb=lb.value;if(!fb){kb.next=6;break}return kb.abrupt("return");case 6:return kb.next=8,this.systemInterface.importPackage("mocha-es6");case 8:return kb.next=10,this.systemInterface.runEval("\n      const g = typeof global !== 'undefined' ? global : window;\n      const promise = await System.import('lively.lang/promise.js')\n      promise.waitFor(30 * 1000, () =>  !!g.Mocha && !!g.chai);\n    ",{targetModule:this.selectedModule.url});case 10:case "end":return kb.stop()}},
Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"onListSelectionChange",value:function(Q){Q=ne.arr.last(Q);this.isModule(Q)&&(this.ui.sourceEditor.opacity=1,this.ui.sourceEditor.readOnly=!1,this.onModuleSelected(Q));if("package"===Q.type)this.onPackageSelected(Q.pkg);if(Q.isDeclaration)this.onCodeEntitySelected(Q);["directory","package"].includes(Q.type)&&this.deactivateEditor()}},{key:"deactivateEditor",value:function(){var Q=this.ui,nb=Q.sourceEditor;Q=Q.metaInfoText;nb.opacity=
.7;nb.readOnly=!0;this.updateSource("");Q.showInactive()}},{key:"reactivateEditor",value:function(){var Q=this.ui,nb=Q.sourceEditor;Q=Q.metaInfoText;nb.opacity=1;nb.readOnly=!1;Q.showDefault()}},{key:"onModuleSelected",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc,Xc,ad,he,we,$e;return regeneratorRuntime.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:fb=this.selectedPackage;kb=this.view.getWindow();if(!this._return){Qe.next=4;break}return Qe.abrupt("return");
case 4:if(!this.selectedModule||!this.hasUnsavedChanges()){Qe.next=16;break}Qe.next=7;return this.warnForUnsavedChanges();case 7:if(kc=Qe.sent){Qe.next=16;break}this._return=!0;Qe.next=12;return this.state.history.navigationInProgress;case 12:return Qe.next=14,this.selectModuleNamed(ne.arr.last(this.state.history.left).module.url);case 14:return this._return=!1,Qe.abrupt("return");case 16:this.state.moduleChangeWarning=null;if(Ia){Qe.next=24;break}this.updateSource("");kb&&(kb.title="browser - "+
(fb&&fb.name||""));this.ui.tabs.selectedTab.caption.includes(fb.name)||(this.ui.tabs.selectedTab.caption=fb.name);this.updateCodeEntities(null);this.ui.metaInfoText.textString="";return Qe.abrupt("return");case 24:if(fb){Qe.next=27;break}this.showError(Error("Browser>>onModuleSelected called but no package selected!"+Ia));return Qe.abrupt("return");case 27:return this.state.moduleUpdateInProgress||(Mc=ne.promise.deferred(),this.state.moduleUpdateInProgress=Mc.promise),Qe.prev=28,Gc=this.systemInterface,
Xc=this.view.getWindow(),Qe.t0=this,Qe.next=34,Gc.moduleRead(Ia.url);case 34:Qe.t1=Qe.sent;if(!Qe.t0.isTestModule.call(Qe.t0,Qe.t1)){Qe.next=38;break}Qe.next=38;return this.loadES6Mocha();case 38:if(Ia.isLoaded||!Ia.name.endsWith(".js")){Qe.next=63;break}Qe.prev=39;Qe.next=42;return Gc.importModule(Ia.url);case 42:Qe.next=47;break;case 44:Qe.prev=44,Qe.t2=Qe["catch"](39),ad=Qe.t2;case 47:return ad&&this.view.showError(ad),Qe.next=50,Gc.getPackage(fb.address);case 50:he=Qe.sent;we=he.modules.map(function(dg){return dg.name}).includes(Ia.url);
if(!we){Qe.next=63;break}Object.assign(fb,he);Ia.isLoaded=!0;Qe.next=57;return this.updateModuleList();case 57:return this.state.moduleUpdateInProgress=null,Qe.next=60,this.selectModuleNamed(Ia.url);case 60:return Ia=this.selectedModule,Mc&&(this.state.moduleUpdateInProgress=Mc.promise),Qe.abrupt("return");case 63:return Xc&&(Xc.title="browser - [".concat(fb.name,"] ").concat(Ia.nameInPackage)),this.ui.tabs.selectedTab.caption="[".concat(fb.name,"] ").concat(Ia.nameInPackage),Qe.next=67,Gc.moduleRead(Ia.url);
case 67:return $e=Qe.sent,this.updateSource($e,{row:0,column:0}),this.ui.sourceEditor.scroll=ne.pt(0,0),this.ui.sourceEditor.undoManager.reset(),Qe.next=73,this.prepareCodeEditorForModule(Ia);case 73:this.historyRecord(),this.ui.metaInfoText.showDefault(),Ia.isLoaded=!0,this.updateModuleList();case 77:return Qe.prev=77,this.indicateFrozenModuleIfNeeded(),Mc&&(this.state.moduleUpdateInProgress=null,Mc.resolve(Ia)),Qe.finish(77);case 81:case "end":return Qe.stop()}},lb,this,[[28,,77,81],[39,44]])}));
return function(Ia){return Q.apply(this,arguments)}}()},{key:"closeStatusMessage",value:function(){this.ui.metaInfoText.showDefault()}},{key:"openStatusMessage",value:function(){this.ui.metaInfoText.showInfoInWorkspace()}},{key:"switchMode",value:function(Q){var nb=ne.JavaScriptEditorPlugin;switch(Q){case "json":nb=ne.JSONEditorPlugin;break;case "jsx":nb=ne.JSXEditorPlugin;break;case "md":nb=ne.MarkdownEditorPlugin;break;case "less":nb=ne.LESSEditorPlugin;break;case "css":nb=ne.CSSEditorPlugin;break;
case "html":nb=ne.HTMLEditorPlugin}this.editorPlugin.constructor!==nb&&(Q=this.editorPlugin.evalEnvironment,this.ui.sourceEditor.removePlugin(this.editorPlugin),this.ui.sourceEditor.addPlugin(new nb(ne.config.codeEditor.defaultTheme)),this.editorPlugin.evalEnvironment||(this.editorPlugin.evalEnvironment={systemInterface:ne.localInterface}),Object.assign(this.editorPlugin.evalEnvironment,Q),this.editorPlugin.highlight())}},{key:"prepareCodeEditorForModule",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,
kb,kc,Mc,Gc,Xc;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:return fb=this.systemInterface,ad.next=3,fb.moduleFormat(Ia.url);case 3:ad.t0=ad.sent;if(ad.t0){ad.next=6;break}ad.t0="esm";case 6:return kb=ad.t0,kc=this.selectedPackage,Mc=Ia.name.match(/\.([^\.]+)$/)||[],Gc=Xb(Mc,2),Xc=Gc[1],this.switchMode(Xc),Object.assign(this.editorPlugin.evalEnvironment,{targetModule:Ia.url,context:this.ui.sourceEditor,format:kb}),this.editorPlugin._tokenizerValidBefore={row:0,
column:0},this.editorPlugin.requestHighlight(!0),ad.next=15,this.updateTestUI(Ia);case 15:this.ui.metaInfoText.setPath(["[".concat(kc.name,"]"),{nativeCursor:"pointer",textDecoration:"underline",doit:{code:'$world.execCommand("open file browser", {location: "'.concat(kc.url,'"})')}}," ",{},Ia.nameInPackage||"",{}]);case 16:case "end":return ad.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"updateFocusedCodeEntityDebounced",value:function(){var Q=this;ne.fun.debounceNamed(this.id+
"updateFocusedCodeEntityDebounced",20,function(){return Q.updateFocusedCodeEntity()})()}},{key:"updateFocusedCodeEntity",value:function(){var Q=this.ui,nb=Q.sourceEditor;Q=Q.metaInfoText;var Ia=nb.positionToIndex(nb.cursorPosition),lb=ne.arr.last(this.renderedCodeEntities().filter(function(kc){if(kc.node){kc=kc.node;var Mc=kc.end;return kc.start<Ia&&Ia<Mc}}))||{},fb=lb.parent;lb=lb.name;for(var kb=fb?[fb.name,""]:[];fb&&(fb=fb.parent);)kb.unshift(fb.name);lb&&600<this.view.width&&Q.setPath([].concat(vd(Q.getPath().slice(0,
6)),[" - ".concat(kb.join(">>")).concat(lb,":").concat(nb.cursorPosition.row),{fontSize:12,paddingTop:"2px"}]))}},{key:"onCodeEntitySelected",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc;return regeneratorRuntime.wrap(function(Gc){for(;;)switch(Gc.prev=Gc.next){case 0:if(Ia){Gc.next=2;break}return Gc.abrupt("return");case 2:fb=this.ui.sourceEditor;if("js"===this.selectedModule.type||"json"===this.selectedModule.type)kb=this.selectedModule.type,kc=fb.indexToPosition("js"===
kb?Ia.node.start:Ia.start),Mc=fb.indexToPosition("js"===kb?Ia.node.end:Ia.end),fb.cursorPosition=kc,fb.flash({start:kc,end:Mc},{id:"codeentity",time:1E3,fill:ne.Color.rgb(200,235,255)}),fb.centerRange({start:kc,end:Mc}),fb.scrollDown(-60);"md"===this.selectedModule.type&&fb.execCommand("[markdown] goto heading",{choice:Ia});case 5:case "end":return Gc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"findCodeEntity",value:function(Q){var nb=Q.name,Ia=Q.type,lb=(Q=
Q.parent)?this.findCodeEntity(Q):null;return(Q=this.renderedCodeEntities())?Q.find(function(fb){return lb&&fb.parent!==lb||fb.name!==nb?!1:!Ia||fb.type===Ia||"method"===Ia&&fb.type.includes("method")?!0:!1}):null}},{key:"renderedCodeEntities",value:function(){var Q=this.ui.columnView,nb=this.selectedModule,Ia=Q&&Q.treeData;return Ia&&nb?ne.tree.filter(nb,function(lb){return lb.isDeclaration},function(lb){!lb.subNodes&&lb.children&&(lb.subNodes=lb.children,lb.subNodes.forEach(function(fb){return fb.isDeclaration=
!0}));return Ia.getChildren(lb)}):[]}},{key:"selectCodeEntityInColumnView",value:function(){var Q=ic(regeneratorRuntime.mark(function fb(Ia,lb){var kb,kc,Mc,Gc;return regeneratorRuntime.wrap(function(Xc){for(;;)switch(Xc.prev=Xc.next){case 0:"string"===typeof Ia&&(Ia={name:Ia});kc=[this.selectedModule];if(!ne.obj.isArray(Ia)){Xc.next=7;break}for(Ia=Ia.map(function(ad){return"string"===typeof ad?{name:ad}:ad});Mc=Ia.shift();)Mc.parent=ne.arr.last(kc),kc.push(kb=this.findCodeEntity(Mc));Xc.next=12;
break;case 7:if(Gc=kb=this.findCodeEntity(Ia)){Xc.next=11;break}return Xc.abrupt("return");case 11:for(;Gc=Gc.parent;)kc.push(Gc);case 12:return Xc.next=14,this.ui.columnView.setExpandedPath(function(ad){return ad.name===kb.name||!!kc.find(function(he){return he.type===ad.type&&he.name===ad.name})},this.selectedModule,lb);case 14:return Xc.abrupt("return",kb);case 15:case "end":return Xc.stop()}},fb,this)}));return function(Ia,lb){return Q.apply(this,arguments)}}()},{key:"selectCodeEntity",value:function(){var Q=
ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc=arguments;return regeneratorRuntime.wrap(function(Mc){for(;;)switch(Mc.prev=Mc.next){case 0:return fb=1<kc.length&&void 0!==kc[1]?kc[1]:!0,Mc.next=3,this.selectCodeEntityInColumnView(Ia,fb);case 3:return kb=Mc.sent,this.onListSelectionChange(this.ui.columnView.getExpandedPath()),Mc.abrupt("return",kb);case 6:case "end":return Mc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"updateModuleList",value:function(){var Q=
ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:fb=this.ui.columnView;if(!Ia){kc.next=5;break}kb=fb.treeData.parentNode(Ia);kc.next=5;return fb.treeData.collapse(kb,!1);case 5:return kc.next=7,fb.refresh(!1);case 7:case "end":return kc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"updateCodeEntities",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb=this,
kb,kc;return regeneratorRuntime.wrap(function(Mc){for(;;)switch(Mc.prev=Mc.next){case 0:return kb=this.ui.columnView,kc=kb.getExpandedPath().find(function(Gc){return fb.isModule(Gc)}),kc.subNodes=null,Mc.next=5,kb.treeData.collapse(kc,!1);case 5:return Mc.next=7,kb.refresh(!1);case 7:case "end":return Mc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"isTestModule",value:function(Q){return(Q=ne.testsFromSource(Q))&&0<Q.length}},{key:"isMarkdown",value:function(Q){return"md"===
Q.type}},{key:"updateTestUI",value:function(Q){var nb=this.ui;Q=nb.metaInfoText;nb=nb.sourceEditor;var Ia=!1;if(this.editorPlugin.isJSEditorPlugin)try{var lb=this.editorPlugin.getNavigator().ensureAST(nb);Ia=this.isTestModule(lb||nb.textString)}catch(fb){console.warn("sytem browser updateTestUI: ".concat(fb)),Ia=!1}Q.toggleTestButton(Ia)}},{key:"runOnServer",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb;return regeneratorRuntime.wrap(function(kb){for(;;)switch(kb.prev=kb.next){case 0:return kb.next=
2,ne.serverInterfaceFor(ne.config.remotes.server).runEval("\n        ".concat(Ia,"\n    "),{targetModule:"lively://PackageBrowser/eval"});case 2:fb=kb.sent;if(!fb.isError){kb.next=5;break}throw fb.value;case 5:return kb.abrupt("return",fb.value);case 6:case "end":return kb.stop()}},lb)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"getInstalledPackagesList",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc,Gc;return regeneratorRuntime.wrap(function(Xc){for(;;)switch(Xc.prev=
Xc.next){case 0:return Xc.next=2,this.runOnServer('\n      let r = System.get("@lively-env").packageRegistry;\n      r.toJSON();');case 2:lb=Xc.sent;fb=[];for(kb in lb.packageMap)for(Mc in kc=lb.packageMap[kb].versions,kc)Gc=kc[Mc],fb.push(Gc);return Xc.abrupt("return",fb);case 6:case "end":return Xc.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"updatePackageDependencies",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){return regeneratorRuntime.wrap(function(lb){for(;;)switch(lb.prev=
lb.next){case 0:case "end":return lb.stop()}},Ia)}));return function(){return Q.apply(this,arguments)}}()},{key:"installPackage",value:function(){var Q=ic(regeneratorRuntime.mark(function kb(Ia,lb,fb){var kc,Mc,Gc,Xc;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:return ad.next=2,ne.loadPart("package install indicator");case 2:if(kc=ad.sent)Mc=this.ui.sourceEditor,Mc.insertText([kc,{}],Mc.indexToPosition(fb-1)),kc.showInstallationProgress();ad.prev=4;ad.next=7;return this.runOnServer('        \n        async function installPackage(name, version) {\n          let Module = System._nodeRequire("module"),\n              flatn = Module._load("flatn")\n        \n          let env = process.env,\n              devPackageDirs = env.FLATN_DEV_PACKAGE_DIRS.split(":").filter(Boolean),\n              packageCollectionDirs = env.FLATN_PACKAGE_COLLECTION_DIRS.split(":").filter(Boolean),\n              packageDirs = env.FLATN_PACKAGE_DIRS.split(":").filter(Boolean),\n              packageMap = flatn.PackageMap.ensure(packageCollectionDirs, packageDirs, devPackageDirs);\n              buildFailed;\n\n          await flatn.installPackage(\n            name + "@" + version,\n            System.baseURL.replace("file://", "") + "custom-npm-modules",\n            packageMap,\n            undefined,\n            /*isDev = */false,\n            /*verbose = */true\n          );\n          try {          \n            await flatn.installDependenciesOfPackage(\n               packageMap.lookup(name, version),\n               System.baseURL.replace("file://", "") + \'dev-deps\',\n               packageMap,\n               [\'devDependencies\'],\n               true\n            );\n          } catch(e) {\n            // install scripts dont really work sometimes so\n            // dont let that disrup the normal install process\n            buildFailed = e.message;\n          }\n        \n          let r = System.get("@lively-env").packageRegistry\n          await r.update();\n          return { pkgRegistry: r, buildFailed };\n        }\n        await installPackage("'.concat(Ia,
'", "').concat(lb,'");   \n    '));case 7:Gc=ad.sent;Xc=Gc.pkgRegistry;System.get("@lively-env").packageRegistry.updateFromJSON(Xc);kc&&kc.showInstallationComplete();ad.next=16;break;case 13:ad.prev=13,ad.t0=ad["catch"](4),kc&&kc.showError();case 16:ad.prev=16;if(!kc){ad.next=23;break}ad.next=20;return ne.promise.delay(2E3);case 20:return ad.next=22,kc.reset();case 22:kc.remove();case 23:return ad.finish(16);case 24:case "end":return ad.stop()}},kb,this,[[4,13,16,24]])}));return function(Ia,lb,fb){return Q.apply(this,
arguments)}}()},{key:"save",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc,Gc,Xc,ad,he,we,$e,Qe,dg,Cf,Fh,ag,ng,Gj,zj,gl=arguments;return regeneratorRuntime.wrap(function(og){for(;;)switch(og.prev=og.next){case 0:lb=0<gl.length&&void 0!==gl[0]?gl[0]:0;fb=this.ui;kb=fb.sourceEditor;kc=fb.metaInfoText;Mc=this.state;Gc=this.systemInterface;if(Xc=this.selectedModule){og.next=5;break}return og.abrupt("return");case 5:if(!ne.modules.module(Xc.url)._frozenModule){og.next=
11;break}kc.showError("Cannot alter frozen Modules!");og.next=9;return ne.promise.delay(5E3);case 9:return kc.showFrozen(),og.abrupt("return");case 11:ad=kb.textString.split(ne.objectReplacementChar).join("");he=[];if(Mc.sourceHash===ne.string.hashCode(ad)||!Mc.moduleChangeWarning||Mc.moduleChangeWarning!==Xc.url){og.next=20;break}og.next=16;return this.world().confirm(["Change Conflict\n",null,"The module ".concat(Xc.url," you are trying to save changed elsewhere!\nOverwrite those changes?"),{fontSize:16,
fontWeight:"normal"}],{requester:this.view,width:350});case 16:if(we=og.sent){og.next=19;break}return og.abrupt("return");case 19:Mc.moduleChangeWarning=null;case 20:return og.next=22,Gc.moduleFormat(Xc.url);case 22:if(og.t0=og.sent,og.t0){og.next=25;break}case 25:$e=Xc.name.match(/\.([^\.]+)$/)||[];Qe=Xb($e,2);dg=Qe[1];Mc.isSaving=!0;og.prev=27;kb.cleanupSnippetsExpansions();if("js"===dg||"jsx"===dg){og.next=46;break}if("package.json"!==Xc.nameInPackage){og.next=36;break}og.next=33;return Gc.packageConfChange(ad,
Xc.url);case 33:this.updatePackageDependencies();og.next=43;break;case 36:"less"===dg&&$world.getSubmorphsByStyleClassName("HTMLMorph").forEach(function(ek){ek.updateLessIfNeeded()});if("md"!==dg){og.next=41;break}if(!(this.editorPlugin.isMarkdownEditorPlugin&&this.editorPlugin.textMorph._mdPreviewMorph&&this.editorPlugin.textMorph._mdPreviewMorph.owner.owner)){og.next=41;break}og.next=41;return this.renderMarkdown();case 41:return og.next=43,Gc.coreInterface.resourceWrite(Xc.url,ad);case 43:kc.showSaved();
og.next=65;break;case 46:if(!ne.config.systemBrowser.fixUndeclaredVarsOnSave){og.next=53;break}og.next=49;return kb.execCommand("[javascript] fix undeclared variables");case 49:if(Cf=og.sent){og.next=52;break}return og.abrupt("return");case 52:ad=kb.textString;case 53:return og.next=55,ne.lint(ad);case 55:Fh=og.sent;ad=Fh[0];he=Fh[1];if(!Xc.isLoaded){og.next=63;break}og.next=61;return Gc.interactivelyChangeModule(Xc.url,ad,{targetModule:Xc.url,doEval:!0});case 61:og.next=65;break;case 63:return og.next=
65,Gc.coreInterface.resourceWrite(Xc.url,ad);case 65:return ag=kb.cursorPosition,this.updateSource(ad),og.next=69,this.updateCodeEntities(Xc);case 69:return og.next=71,this.updateTestUI(Xc);case 71:kb.focus();kb.cursorPosition=ag;og.next=85;break;case 75:og.prev=75;og.t1=og["catch"](27);if(!(0<lb||og.t1 instanceof SyntaxError)){og.next=80;break}kc.showError(og.t1);return og.abrupt("return");case 80:return og.next=82,this.reloadModule(!1);case 82:return ng=og.sent,kb.textString=ad,og.abrupt("return",
!ng||ng instanceof Error?kc.showError(og.t1):this.save(lb+1));case 85:return og.prev=85,this.state.isSaving=!1,og.finish(85);case 88:if(!(0<he.length)){og.next=94;break}Gj=he.map(function(ek){return'"'.concat(ek.message,'" on line ').concat(ek.line)});zj=["Saved with warnings:"].concat(Gj).join("\n");kc.showWarning(zj);og.next=94;return ne.promise.delay(5E3);case 94:kc.showSaved();case 95:case "end":return og.stop()}},Ia,this,[[27,75,85,88]])}));return function(){return Q.apply(this,arguments)}}()},
{key:"reloadModule",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc,Gc,Xc,ad,he=arguments;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:lb=0<he.length&&void 0!==he[0]?he[0]:!1;fb=this.selectedModule;kb=this.systemInterface;kc=this.ui.sourceEditor;Mc=kc.scroll;Gc=kc.cursorPosition;if(fb){we.next=5;break}return we.abrupt("return",null);case 5:return Xc=!!lb,ad=!!lb,we.prev=7,we.next=10,kb.interactivelyReloadModule(null,fb.url,Xc,
ad);case 10:return we.next=12,this.selectModuleNamed(fb.nameInPackage);case 12:kc.scroll=Mc;kc.cursorPosition=Gc;we.next=19;break;case 16:return we.prev=16,we.t0=we["catch"](7),we.abrupt("return",Error("Error while reloading ".concat(fb.name,":\n").concat(we.t0.stack||we.t0)));case 19:return we.abrupt("return",fb);case 20:case "end":return we.stop()}},Ia,this,[[7,16]])}));return function(){return Q.apply(this,arguments)}}()},{key:"historyBackward",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,
fb,kb,kc,Mc;return regeneratorRuntime.wrap(function(Gc){for(;;)switch(Gc.prev=Gc.next){case 0:if(!(2>this.state.history.left.length)){Gc.next=2;break}return Gc.abrupt("return");case 2:return lb=this.state.history.left.pop(),fb=ne.arr.last(this.state.history.left),this.state.history.right.unshift(lb),this.refreshHistoryButtons(),kb=this.historyGetLocation(),kc=kb.scroll,Mc=kb.cursor,lb.scroll=kc,lb.cursor=Mc,Gc.prev=9,Gc.next=12,this.historySetLocation(fb);case 12:Gc.next=19;break;case 14:throw Gc.prev=
14,Gc.t0=Gc["catch"](9),this.state.history.left.push(fb),this.state.history.right.unshift(),Gc.t0;case 19:case "end":return Gc.stop()}},Ia,this,[[9,14]])}));return function(){return Q.apply(this,arguments)}}()},{key:"historyForward",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc;return regeneratorRuntime.wrap(function(Gc){for(;;)switch(Gc.prev=Gc.next){case 0:lb=ne.arr.last(this.state.history.left);if(fb=this.state.history.right.shift()){Gc.next=4;break}return Gc.abrupt("return");
case 4:return this.state.history.left.push(fb),this.refreshHistoryButtons(),lb&&(kb=this.historyGetLocation(),kc=kb.scroll,Mc=kb.cursor,lb.scroll=kc,lb.cursor=Mc),Gc.prev=7,Gc.next=10,this.historySetLocation(fb);case 10:Gc.next=17;break;case 12:throw Gc.prev=12,Gc.t0=Gc["catch"](7),this.state.history.left.pop(),this.state.history.right.unshift(fb),Gc.t0;case 17:case "end":return Gc.stop()}},Ia,this,[[7,12]])}));return function(){return Q.apply(this,arguments)}}()},{key:"historyGetLocation",value:function(){var Q=
this.ui.sourceEditor;return{"package":this.selectedPackage,module:this.selectedModule,cursor:Q.cursorPosition,scroll:Q.scroll}}},{key:"historyRecord",value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(!this.state.history.navigationInProgress){this.state.history.right.length=0;var nb=this.historyGetLocation(),Ia;if(Q){for(;(Ia=this.state.history.right[0])&&Ia.module&&nb.module&&Ia.module.url===nb.module.url;)this.state.history.right.shift();this.state.history.right.unshift(nb)}else{for(;(Ia=
ne.arr.last(this.state.history.left))&&Ia.module&&nb.module&&Ia.module.url===nb.module.url;)this.state.history.left.pop();this.state.history.left.push(nb)}this.refreshHistoryButtons()}}},{key:"refreshHistoryButtons",value:function(){var Q=this.ui,nb=Q.goBack;Q=Q.goForward;2>this.state.history.left.length?nb.disable():nb.enable();0===this.state.history.right.length?Q.disable():Q.enable()}},{key:"historyReset",value:function(){this.state.history.left=[];this.state.history.right=[];this.state.history.navigationInProgress=
null}},{key:"historySetLocation",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc;return regeneratorRuntime.wrap(function(Xc){for(;;)switch(Xc.prev=Xc.next){case 0:if(Ia){Xc.next=2;break}return Xc.abrupt("return");case 2:fb=this.state.history;if(!fb.navigationInProgress){Xc.next=8;break}Xc.next=6;return fb.navigationInProgress;case 6:return this.historySetLocation(Ia),Xc.abrupt("return");case 8:return kb=ne.promise.deferred(),kc=kb.promise,Mc=kb.resolve,fb.navigationInProgress=
kc,Xc.prev=10,Gc=this.ui.sourceEditor,Xc.next=14,this.whenPackageUpdated();case 14:return Xc.next=16,this.whenModuleUpdated();case 16:if(this.selectedPackage&&Ia["package"].address===this.selectedPackage.address){Xc.next=19;break}Xc.next=19;return this.selectPackageNamed(Ia["package"].address);case 19:if(this.selectedModule&&Ia.module.url===this.selectedModule.url){Xc.next=22;break}Xc.next=22;return this.selectModuleNamed(Ia.module.url);case 22:Gc.cursorPosition=Ia.cursor,Gc.scroll=Ia.scroll,Gc.scrollCursorIntoView();
case 25:return Xc.prev=25,fb.navigationInProgress=null,Mc(),Xc.finish(25);case 29:case "end":return Xc.stop()}},lb,this,[[10,,25,29]])}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"makeTabsNotCloseable",value:function(){this.ui.tabs.tabs.forEach(function(Q){return Q.closeable=!1})}},{key:"adaptViewForTabs",value:function(){this.ui.columnView.top+=32}},{key:"browsedTabChanged",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc;return regeneratorRuntime.wrap(function(Gc){for(;;)switch(Gc.prev=
Gc.next){case 0:fb=Ia.curr;if(kb=Ia.prev){Gc.next=4;break}fb.closeable=!1;return Gc.abrupt("return");case 4:this.ui.tabs.tabs.forEach(function(Xc){return Xc.closeable=!0});if(!this.selectedModule||!this.hasUnsavedChanges()){Gc.next=13;break}Gc.next=8;return this.warnForUnsavedChanges();case 8:if(kc=Gc.sent){Gc.next=13;break}kb.setProperty("selected",!0);fb.closeSilently();return Gc.abrupt("return");case 13:return kb.content={spec:this.browseSpec(),history:this.state.history},kb.caption.includes("Browser Tab")&&
(kb.caption="[".concat(kb.content.packageName,"]").concat(kb.content.mdouleName?"- "+kb.content.moduleName:"")),fb.content||(fb.content={spec:{packageName:"lively.morphic",moduleName:"morph.js",scroll:ne.pt(0,0)},history:{left:[],right:[],navigationInProgress:null}},fb.caption="[lively.morphic] - morph.js"),Mc=ne.LoadingIndicator.open("Preparing Editor"),this.state.history=fb.content.history,this.refreshHistoryButtons(),Gc.next=21,this.browse(fb.content.spec);case 21:Mc.remove();case 22:case "end":return Gc.stop()}},
lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"onModuleChanged",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb=this,kb,kc,Mc;return regeneratorRuntime.wrap(function(Gc){for(;;)switch(Gc.prev=Gc.next){case 0:if(!this.state.isSaving){Gc.next=2;break}return Gc.abrupt("return");case 2:kb=ne.modules.module(Ia.module);kc=this.selectedModule;if(Mc=this.selectedPackage){Gc.next=6;break}return Gc.abrupt("return");case 6:if(kb["package"]()&&kb["package"]().address===
Mc.address){Gc.next=8;break}return Gc.abrupt("return");case 8:if(!kc||kc.url!==kb.id){Gc.next=20;break}if(!this.hasUnsavedChanges()){Gc.next=18;break}this.addModuleChangeWarning(kb.id);Gc.t0=ne.string;Gc.next=14;return kb.source();case 14:Gc.t1=Gc.sent;this.state.sourceHash=Gc.t0.hashCode.call(Gc.t0,Gc.t1);Gc.next=20;break;case 18:return Gc.next=20,this.ui.sourceEditor.saveExcursion(function(){return fb.onModuleSelected(kc)});case 20:case "end":return Gc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,
arguments)}}()},{key:"onModuleLoaded",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb;return regeneratorRuntime.wrap(function(kc){for(;;)switch(kc.prev=kc.next){case 0:if(!this.state.isSaving){kc.next=2;break}return kc.abrupt("return");case 2:fb=ne.modules.module(Ia.module),(kb=this.selectedPackage)&&fb["package"]()&&fb["package"]();case 5:case "end":return kc.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"addModuleChangeWarning",value:function(Q){this.state.moduleChangeWarning=
Q}},{key:"setStatusMessage",value:function(){var Q=this.ui.sourceEditor;return Q.setStatusMessage.apply(Q,arguments)}},{key:"onWindowClose",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb;return regeneratorRuntime.wrap(function(fb){for(;;)switch(fb.prev=fb.next){case 0:lb=!0;if(!this.hasUnsavedChanges()){fb.next=5;break}fb.next=4;return this.warnForUnsavedChanges();case 4:lb=fb.sent;case 5:return fb.abrupt("return",lb);case 6:case "end":return fb.stop()}},Ia,this)}));return function(){return Q.apply(this,
arguments)}}()},{key:"focus",value:function(Q){this.ui.sourceEditor.focus()}},{key:"focusSourceEditor",value:function(){this.ui.sourceEditor.focus();this.ui.sourceEditor.show()}},{key:"focusColumnView",value:function(){this.models.columnView.focusActiveList()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"browser save"},{keys:"Alt-Up",command:"focus list with selection"},{keys:"F1",command:"focus module list"},{keys:"F2",command:"focus code entities"},{keys:"F3|Alt-Down",
command:"focus source editor"},{keys:"F4",command:"resize editor panel"},{keys:"Alt-R",command:"reload module"},{keys:"Alt-Ctrl-R",command:{command:"reload module",args:{hard:!0}}},{keys:"Alt-L",command:"load or add module"},{keys:"Ctrl-C Ctrl-T",command:"run all tests in module"},{keys:"Ctrl-C T",command:"run tests at point"},{keys:"Ctrl-C B E F",command:"run setup code of tests (before and beforeEach)"},{keys:"Ctrl-C A F T",command:"run teardown code of tests (after and afterEach)"},{keys:"Alt-P",
command:"browser history backward"},{keys:"Alt-N",command:"browser history forward"},{keys:"Alt-H",command:"browser history browse"},{keys:"Meta-Shift-L b a c k e n d",command:"activate eval backend dropdown list"},{keys:"Alt-J",command:"jump to codeentity"},{keys:"Meta-N",command:"open new tab"}].concat(this.ui.tabs.keybindings)}},{key:"commands",get:function(){return ne.browserCommands(this).concat(ne.EvalBackendChooser["default"].activateEvalBackendCommand(this)).concat(this.ui.tabs.commands)}},
{key:"renderMarkdown",value:function(){this.ui.sourceEditor.execCommand("[markdown] convert to html")}},{key:"interactivelyJumpToCodeentity",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc,Gc,Xc,ad,he;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:lb=this.ui;fb=lb.sourceEditor;kb=lb.columnView;if(!this.isTestModule(fb.textString)){we.next=3;break}return we.abrupt("return",this.execCommand("jump to test"));case 3:if(!this.isMarkdown(this.selectedModule)){we.next=
5;break}return we.abrupt("return",fb.execCommand("[markdown] goto heading"));case 5:return kc=this.renderedCodeEntities(),Mc=kc.indexOf(kb._selectedNode),Gc=kc.map(function($e){var Qe=$e.name,dg=$e.type,Cf=$e.parent;return{isListItem:!0,label:["".concat(Cf?Cf.name+">>":"").concat(Qe),null,"".concat(dg),{fontSize:"70%",textStyleClasses:["annotation"]}],value:$e}}),we.next=10,this.world().filterableListPrompt("Select item",Gc,{preselect:Mc,requester:this.view,historyId:"js-browser-codeentity-jump-hist"});
case 10:if(Xc=we.sent,ad=Xb(Xc.selected,1),he=ad[0])fb.saveMark(),this.selectCodeEntity(he);case 14:case "end":return we.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"interactivelyJumpToTest",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,fb,kb,kc,Mc,Gc,Xc,ad,he,we,$e,Qe,dg,Cf,Fh,ag;return regeneratorRuntime.wrap(function(ng){for(;;)switch(ng.prev=ng.next){case 0:lb=this.selectedModule;fb=this.ui.sourceEditor;if(lb){ng.next=3;break}return ng.abrupt("return",
!0);case 3:return kb=fb.textString,kc=[],Mc=[],Gc=kb.split("\n"),Xc=fb.cursorPosition.row,ad=0,ng.next=11,pd.import("mocha-es6");case 11:return he=ng.sent,we=he.loadTestModuleAndExtractTestState,ng.next=15,we(lb.url,Mc);case 15:$e=Mc[0].tests.filter(function(Gj){return Gj.fullTitle});Qe=function(Gj){var zj=$e[Gj],gl=zj.depth,og=zj.fullTitle,ek=zj.title,bj=zj.type,Ym="suite"===bj?"describe":"it",Pj=zj.row=Gc.findIndex(function(ge){return ge.match(new RegExp("".concat(Ym,'.*".*').concat(ek,'.*"')))});
Pj<=Xc&&(ad=Gj);kc.push({isListItem:!0,value:zj,label:["".concat("\u2002".repeat(gl-1)).concat(og),null,"line ".concat(Pj," ").concat(bj),{fontSize:"70%",textStyleClasses:["annotation"]}]})};for(dg=0;dg<$e.length;dg++)Qe(dg);ng.next=20;return this.world().filterableListPrompt("tests of ".concat(lb.nameInPackage),kc,{requester:this.view,preselect:ad});case 20:Cf=ng.sent;Fh=Xb(Cf.selected,1);if(ag=Fh[0])fb.saveMark(),fb.cursorPosition={row:ag.row,column:0},fb.execCommand("goto line start"),fb.centerRow(ag.row);
return ng.abrupt("return",!0);case 25:case "end":return ng.stop()}},Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"interactivelyAddOrLoadModule",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc;return regeneratorRuntime.wrap(function(Xc){for(;;)switch(Xc.prev=Xc.next){case 0:return fb=this.selectedPackage,kb=this.selectedModule,kc=this.systemInterface,Mc=this.view,Xc.prev=4,Xc.next=7,kc.interactivelyAddModule(Mc,kb?kb.name:fb?fb.address:
null);case 7:Gc=Xc.sent;Xc.next=14;break;case 10:return Xc.prev=10,Xc.t0=Xc["catch"](4),"Canceled"===Xc.t0?Mc.setStatusMessage(Xc.t0):this.world().inform("Error while trying to load modules:\n".concat(Xc.t0.stack||Xc.t0),{requester:Mc}),Xc.abrupt("return");case 14:return Gc.forEach(function(ad){var he=ad.name;return(ad=ad.error)?Mc.showError("Error while loading module ".concat(he,": ").concat(ad.stack||ad)):Mc.setStatusMessage("Module ".concat(he," loaded"))}),Xc.next=17,this.updateModuleList(fb);
case 17:return Gc.length&&this.selectModuleNamed(Gc[0].name),Xc.abrupt("return",!0);case 19:case "end":return Xc.stop()}},lb,this,[[4,10]])}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"interactivelyCreateNewFolder",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc,Xc;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:fb=this.ui.columnView;kb=fb.treeData;if(Ia){ad.next=4;break}return ad.abrupt("return");case 4:return kc=
this.systemInterface.coreInterface,ad.next=7,this.world().prompt("Enter folder name",{requester:this.view});case 7:if(Mc=ad.sent){ad.next=10;break}return ad.abrupt("return");case 10:return Gc=ne.joinPath(Ia,Mc),Gc.endsWith("/")||(Gc+="/"),ad.next=14,kc.resourceMkdir(Gc);case 14:Xc=fb.getExpandedPath().find(function(he){return he.url===Ia});if(!Xc){ad.next=18;break}ad.next=18;return kb.collapse(Xc,!1);case 18:fb.selectNode(Xc.subNodes.find(function(he){return he.url===Gc}));case 19:case "end":return ad.stop()}},
lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"interactivelyAddNewModule",value:function(){var Q=ic(regeneratorRuntime.mark(function fb(Ia,lb){var kb,kc,Mc,Gc,Xc,ad;return regeneratorRuntime.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:kb=this.ui.columnView;kc=kb.treeData;if(Ia){he.next=4;break}return he.abrupt("return");case 4:Mc=this.systemInterface.coreInterface;Gc="";if(!lb){he.next=13;break}he.next=9;return this.world().prompt(["Enter module name",null],
{requester:this.view});case 9:(Gc=he.sent)&&(Gc=Gc.replace(/(\.js|\.md|\.json)$/,"")+"."+lb);he.next=19;break;case 13:if(void 0===Gc||Gc.match(/(\.js|\.md|\.json)$/)){he.next=19;break}he.next=16;return this.world().prompt(["Enter module name\n",null,"Supported file types are:\n",{fontSize:16,fontWeight:"normal"},"markdown (.md)\nJavascript (.js)\nJSON (.json)",{fontWeight:"normal",fontSize:16,fontStyle:"italic"}],{requester:this.view});case 16:Gc=he.sent;he.next=13;break;case 19:if(Gc){he.next=21;
break}return he.abrupt("return");case 21:return Xc=ne.joinPath(Ia,Gc),he.next=24,Mc.resourceEnsureExistance(Xc);case 24:ad=kb.getExpandedPath().find(function(we){return we.url===Ia});if(!ad){he.next=28;break}he.next=28;return kc.collapse(ad,!1);case 28:kb.selectNode(ad.subNodes.find(function(we){return we.url===Xc}));case 29:case "end":return he.stop()}},fb,this)}));return function(Ia,lb){return Q.apply(this,arguments)}}()},{key:"interactivelyBrowseHistory",value:function(){var Q=ic(regeneratorRuntime.mark(function Ia(){var lb,
fb,kb,kc,Mc,Gc,Xc,ad,he,we,$e,Qe;return regeneratorRuntime.wrap(function(dg){for(;;)switch(dg.prev=dg.next){case 0:return lb=this.state.history,fb=lb.left,kb=lb.right,kc=ne.arr.last(fb),Mc=fb.indexOf(kc),Gc=fb.concat(kb).map(function(Cf){return{isListItem:!0,string:Cf.module?Cf.module.nameInPackage:Cf["package"]?Cf["package"].name||Cf["package"].address:"strange location",value:Cf}}),dg.next=6,this.world().filterableListPrompt("Jumpt to location",Gc,{preselect:Mc,requester:this.view});case 6:Xc=dg.sent;
ad=Xb(Xc.selected,1);he=ad[0];if(!he){dg.next=14;break}fb.includes(he)?(this.state.history.left=fb.slice(0,fb.indexOf(he)+1),this.state.history.right=fb.slice(fb.indexOf(he)+1).concat(kb)):kb.includes(he)&&(this.state.history.left=fb.concat(kb.slice(0,kb.indexOf(he)+1)),this.state.history.right=kb.slice(kb.indexOf(he)+1));kc&&(we=this.historyGetLocation(),$e=we.scroll,Qe=we.cursor,kc.scroll=$e,kc.cursor=Qe);dg.next=14;return this.historySetLocation(he);case 14:return dg.abrupt("return",!0);case 15:case "end":return dg.stop()}},
Ia,this)}));return function(){return Q.apply(this,arguments)}}()},{key:"interactivelyRemoveSelectedItem",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc,Xc,ad,he,we,$e,Qe,dg,Cf,Fh;return regeneratorRuntime.wrap(function(ag){for(;;)switch(ag.prev=ag.next){case 0:fb=this.selectedPackage;kb=this.ui.columnView;kc=this.systemInterface;Mc=kc.coreInterface;Gc=kb.treeData;if(Ia&&fb){ag.next=5;break}return ag.abrupt("return");case 5:Xc=kb.getExpandedPath().find(function(ng){return ng.url===
Ia});ad=Xc.subNodes.find(function(ng){return!ng.isCollapsed});he={fontSize:16,fontWeight:"normal "};if(ad){ag.next=10;break}return ag.abrupt("return");case 10:if(!this.isModule(ad)){ag.next=23;break}if(!ad.url.match(/(\.md|\.less)$/)){ag.next=22;break}ag.next=14;return this.world().confirm(["Really remove file?\n",{},"You are about to remove the file:\n",he,ad.url,Object.assign({},he,{fontStyle:"italic"})],{lineWrapping:!1,requester:this.view});case 14:if(!ag.sent){ag.next=19;break}ag.next=17;return Mc.resourceRemove(ad.url);
case 17:ag.next=20;break;case 19:return ag.abrupt("return");case 20:ag.next=23;break;case 22:return ag.abrupt("return",this.execCommand("remove module",{mod:ad}));case 23:if("directory"!==ad.type){ag.next=52;break}ag.next=26;return this.world().confirm(["Folder removal\n",{},"You are about to remove a folder containing several modules. ",he,"All of these modules will be immediately unloaded from the system.\n",he,"This may potentially crash the system, especially if the modules in question are currently in use by one or more objects. Proceed with caution.",
he],{width:400,requester:this.view});case 26:if(we=ag.sent){ag.next=29;break}return ag.abrupt("return");case 29:return ag.next=31,Mc.getPackage(fb.address);case 31:$e=ag.sent,Qe=$e.modules.filter(function(ng){return ng.name.startsWith(ad.url)}),dg=sb(Qe),ag.prev=34,dg.s();case 36:if((Cf=dg.n()).done){ag.next=42;break}Fh=Cf.value;ag.next=40;return this.execCommand("remove module",{mod:Fh});case 40:ag.next=36;break;case 42:ag.next=47;break;case 44:ag.prev=44,ag.t0=ag["catch"](34),dg.e(ag.t0);case 47:return ag.prev=
47,dg.f(),ag.finish(47);case 50:return ag.next=52,Mc.resourceRemove(ad.url);case 52:if(!Xc){ag.next=55;break}ag.next=55;return Gc.collapse(Xc,!1);case 55:this.updateModuleList();case 56:case "end":return ag.stop()}},lb,this,[[34,44,47,50]])}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"onContextMenu",value:function(){var Q=ic(regeneratorRuntime.mark(function lb(Ia){var fb,kb,kc,Mc,Gc,Xc;return regeneratorRuntime.wrap(function(ad){for(;;)switch(ad.prev=ad.next){case 0:Ia.stop();
fb=Ia.targetMorph;kb=this.ui;kc=kb.sourceEditor;Mc=kb.moduleList;Gc=kb.codeEntityTree;Xc=[];if(![kc,Mc,Gc].includes(fb)){ad.next=13;break}ad.t0=Xc.push;ad.t1=Xc;ad.t2=vd;ad.next=10;return fb.menuItems();case 10:ad.t3=ad.sent,ad.t4=(0,ad.t2)(ad.t3),ad.t0.apply.call(ad.t0,ad.t1,ad.t4);case 13:return ad.t5=this,ad.t6=[],ad.t7=Xc,ad.t8=vd,ad.next=19,this.menuItems();case 19:ad.t9=ad.sent,ad.t10=(0,ad.t8)(ad.t9),ad.t11=ad.t6.concat.call(ad.t6,ad.t7,ad.t10),ad.t12=Ia,ad.t5.openMenu.call(ad.t5,ad.t11,ad.t12);
case 24:case "end":return ad.stop()}},lb,this)}));return function(Ia){return Q.apply(this,arguments)}}()},{key:"browseSnippetForSelection",value:function(){var Q=this.selectedPackage,nb=this.selectedModule,Ia=this.selectedCodeEntity,lb=this.systemInterface,fb='$world.execCommand("open browser", {';nb?(fb+='moduleName: "'.concat(nb.nameInPackage,'", '),Q&&(fb+='packageName: "'.concat(Q.name,'", '))):Q&&(fb+=' packageName: "'.concat(Q.name,'", '));Ia&&(fb+="codeEntity: ".concat(ne.obj.isArray(Ia)?JSON.stringify(Ia.map(function(kb){return ne.obj.select(kb,
["name","type"])})):'"'.concat(Ia.name,'"')));"local"!==lb.name&&(fb+=', systemInterface: "'.concat(lb.name,'"'));return fb+"});"}},{key:"menuItems",value:function(){var Q=this.selectedPackage,nb=this.selectedModule;return[].concat(vd(Fd._get(Object.getPrototypeOf(Rb.prototype),"menuItems",this).call(this)),[Q&&{command:"open browse snippet",target:this},nb&&{command:"open selected module in text editor",target:this}]).filter(Boolean)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"BrowserModel"}},
{key:"properties",get:function(){return{systemInterface:{derived:!0,readOnly:!0,after:["editorPlugin"],get:function(){var Q=this.editorPlugin.evalEnvironment;try{return this.editorPlugin.systemInterface()}catch(nb){return Q.systemInterface}},set:function(Q){this.editorPlugin.setSystemInterfaceNamed(Q)}},associatedSearchPanel:{derived:!0,get:function(){return this.state.associatedSearchPanel},set:function(Q){this.state.associatedSearchPanel=Q}},editorPlugin:{readOnly:!0,derived:!0,get:function(){return this.ui.sourceEditor.pluginFind(function(Q){return Q.isEditorPlugin})}},
expose:{get:function(){return["isBrowser","focus","keybindings","browse","browserFromSpec","browseSnippetForSelection","commands","systemInterface","selectedModule","selectedPackage","selectedCodeEntity","selectCodeEntity","selectPackageNamed","setEvalBackend","editorPlugin","isTestModule","reloadModule","renderedCodeEntities","focusSourceEditor","historyBackward","historyForward","save","hasUnsavedChanges","interactivelyBrowseHistory","interactivelyAddNewModule","interactivelyCreateNewFolder","interactivelyRemoveSelectedItem",
"searchForModuleAndSelect","updateModuleList","onWindowClose","onModuleLoaded","onModuleChanged",{method:"serializeBrowser",as:"__serialize__"}]}},bindings:{get:function(){return[{signal:"extent",handler:"relayout"},{model:"global search",signal:"fire",handler:"execCommand",converter:function(){return"open code search"}},{model:"go back",signal:"fire",handler:"execCommand",converter:function(){return"browser history backward"}},{model:"go forward",signal:"fire",handler:"execCommand",converter:function(){return"browser history forward"}},
{model:"browse history",signal:"fire",handler:"execCommand",converter:function(){return"browser history browse"}},{model:"browse modules",signal:"fire",handler:"execCommand",converter:function(){return"choose and browse module"}},{model:"add tab",signal:"fire",handler:"execCommand",converter:function(){return"open new tab"}},{target:"run tests in module",signal:"onMouseDown",handler:"execCommand",converter:function(){return"run all tests in module"}},{target:"jump to entity",signal:"onMouseDown",
handler:"execCommand",converter:function(){return"jump to codeentity"}},{target:"export to html",signal:"onMouseDown",handler:"renderMarkdown"},{target:"copy to clipboard",signal:"onMouseDown",handler:"execCommand",converter:function(){return"open browse snippet"}},{target:"freeze button",signal:"onMouseDown",handler:"execCommand",converter:function(){return"freeze selected module"}},{target:"open in editor",signal:"onMouseDown",handler:"execCommand",converter:function(){return"open selected module in text editor"}},
{target:"close button",signal:"onMouseDown",handler:"closeStatusMessage"},{target:"open in workspace",signal:"onMouseDown",handler:"openStatusMessage"},{model:"column view",signal:"selectionChange",handler:"onListSelectionChange"},{target:"source editor",signal:"textChange",handler:"updateUnsavedChangeIndicatorDebounced"},{target:"source editor",signal:"onMouseDown",handler:"updateFocusedCodeEntity"},{model:"tabs",signal:"onSelectedTabChange",handler:"browsedTabChanged"},{model:"tabs",signal:"oneTabRemaining",
handler:"makeTabsNotCloseable"},{model:"tabs",signal:"becameVisible",handler:"relayout"},{model:"tabs",signal:"becameInvisible",handler:"relayout"},{signal:"onWindowActivated",handler:"allowKeyboardNavigation"},{signal:"onWindowDeactivated",handler:"prohibitKeyboardNavigation"}]}}}}}],ja,{pathInPackage:function(){return"./js/browser/index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:15434,end:81471})}(ne.ViewModel));ne.BrowserModel=at;ne.BrowserModel=at;var jr=Object.freeze({__proto__:null,COLORS:Gp,PackageControls:Hp,DirectoryControls:Ip,PackageTreeData:Fp,CodeDefTreeData:ct,BrowserModel:at});Lc("i",jr)}}});