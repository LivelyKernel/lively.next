System.register(["./__root_module__-cc486366.js"],function(ta){var mb,tb,Tb,Jb,rd,yc,vd,zc,Ec,Mc,zd,ne,De,Xd,Qb,qc,ld,Pb,ud,Ed,vc,ac,Eb,ec,wc,fd,cd,pc,cb,fb,ya,Ea,Ba,xa,Qa,wb,fc,$a,ib,ab,U,ua,M;return{setters:[function(ea){mb=ea.ax;tb=ea.a3;Tb=ea.C;Jb=ea.ab;rd=ea.a8;yc=ea.$;vd=ea.a7;zc=ea.a1;Ec=ea.a2;Mc=ea.aa;zd=ea.aA;ne=ea.as;De=ea.an;Xd=ea.aX;Qb=ea.au;qc=ea.aj;ld=ea.aY;Pb=ea.aw;ud=ea.az;Ed=ea.aZ;vc=ea.aD;ac=ea.ac;Eb=ea.aq;ec=ea.g;wc=ea.am;fd=ea.P;cd=ea.a_;pc=ea.at;cb=ea.a6;fb=ea.av;ya=ea.a$;
Ea=ea.r;Ba=ea.ap;xa=ea.b0;Qa=ea.b1;wb=ea.b2;fc=ea.ad;$a=ea.b3;ib=ea.ar;ab=ea.b4;U=ea.b5;ua=ea.b6;M=ea.aS}],execute:function(){function ea(aa){(aa=Ub.cachedGuideLines.get(aa))&&aa.forEach(function(na){return na.remove()})}function Ka(aa,na,gb,H,ha){na=void 0===na?!0:na;gb=void 0===gb?!0:gb;H=void 0===H?10:H;ha=void 0===ha?100:ha;if(na||gb){var Ga=aa.owner,lb=Ga.world();Ga=Ga.getGlobalTransform();var Sb=aa.owner.submorphs.filter(function(Wa){return Wa!==aa&&!Wa.isEpiMorph&&Wa.visible&&Wa.reactsToPointer}),
Ab=Ub.findAlignedMorphs(aa,Sb,H,ha,"left top right bottom hCenter vCenter".split(" "),"left top right bottom hCenter vCenter".split(" "));ha=[];var sc=0,Fc=0,Fd=0,Ee=0;Ga.e-=lb.scroll.x;Ga.f-=lb.scroll.y;if(Ab){Ab=$jscomp.makeIterator(Ab);for(var Cd=Ab.next();!Cd.done;Cd=Ab.next()){Cd=$jscomp.makeIterator(Cd.value);Cd.next();var ce=Cd.next().value;Cd=ce.vertical;ce=$jscomp.makeIterator(ce.horizontal);for(var je=ce.next();!je.done;je=ce.next()){je=je.value;var Fe=je.edgeAVal,Pc=je.refPointsA,fe=je.refPointsB,
ie=je.edgeBVal,ef=Math.ceil(H-je.delta),ff=Math.min(Pc.top,fe.top);Pc=Math.max(Pc.bottom,fe.bottom);je.maxDist>H&&(ef-=H/2);sc<ef&&(sc=ef,Fd=ie-Fe);ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ub.guideWidth,start:Ga.transformPoint(Ub.pt(ie,ff)),end:Ga.transformPoint(Ub.pt(ie,Pc)),fill:Ub.guideColor,guideType:"h",priority:ef})}Cd=$jscomp.makeIterator(Cd);for(ce=Cd.next();!ce.done;ce=Cd.next())ce=ce.value,je=ce.edgeAVal,ff=ce.refPointsA,Pc=ce.refPointsB,Fe=ce.edgeBVal,ie=Math.ceil(H-
ce.delta),ef=Math.min(ff.left,Pc.left),ff=Math.max(ff.right,Pc.right),ce.maxDist>H&&(ie-=H/2),Fc<ie&&Math.abs(Fe-je)<=H&&(Fc=ie,Ee=Fe-je),ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ub.guideWidth,start:Ga.transformPoint(Ub.pt(ef,Fe)),end:Ga.transformPoint(Ub.pt(ff,Fe)),fill:Ub.guideColor,guideType:"v",priority:ie})}}if(!sc||!Fc){Sb=[aa].concat($jscomp.arrayFromIterable(Sb));je=Ub.computeClosestMorphs(Sb);ce=je[0];Sb=ce.l;Ab=ce.r;Cd=ce.t;ce=ce.b;var Nf;if(Sb||Ab||Cd||ce){var Vb=(Sb||
Ab||Cd||ce).refPointsA;for(Fe=1;Fe<je.length&&(Pc=je[Fe],ie=Pc.l,ef=Pc.r,ff=Pc.t,Pc=Pc.b,sc||(Sb&&ie&&Sb.index!==ie.index&&Math.abs(ie.dist-Sb.dist)<=H?Nf=Object.assign({neighbor:Fe,direction:"left"},ie):Ab&&ef&&Ab!==ef.index&&Math.abs(ef.dist-Ab.dist)<=H&&(Nf=Object.assign({neighbor:Fe,direction:"right"},ef))),Fc||(Cd&&ff&&Cd.index!==ff.index&&Math.abs(ff.dist-Cd.dist)<=H?Nf=Object.assign({neighbor:Fe,direction:"top"},ff):ce&&Pc&&ce.index!==Pc.index&&Math.abs(Pc.dist-ce.dist)<=H&&(Nf=Object.assign({neighbor:Fe,
direction:"bottom"},Pc))),!Nf);Fe++);}if(Nf){var ng=Nf;H=ng.direction;ff=ng.dist;var og=Vb.left;fe=Vb.top;var hg=Vb.bottom,Re=Vb.right,za=Vb.width,Pa=Vb.height;Pc=ng.refPointsA;Vb=Pc.left;je=Pc.top;Fe=Pc.bottom;ie=Pc.right;ef=Pc.width;Pc=Pc.height;var qb=ng.refPointsB,R=qb.left;ng=qb.top;var wa=qb.bottom;qb=qb.right;Re="left"===H?og:"right"===H?Re:og+za/2;hg="bottom"===H?hg:"top"===H?fe:fe+Pa/2;og="left"===H?Re-ff:"right"===H?Re+ff:og+za/2;ff="bottom"===H?hg+ff:"top"===H?hg-ff:fe+Pa/2;fe="left"===
H?qb:"right"===H?R:Vb+ef/2;za="bottom"===H?ng:"top"===H?wa:je+Pc/2;!gb||sc||"right"!==H&&"left"!==H||(sc=10,Fd=(Nf.dist-(Ab||Sb).dist)*("right"===H?-1:1),Re+=Fd,og+=Fd);!gb||Fc||"top"!==H&&"bottom"!==H||(Fc=10,Ee=((Cd||ce).dist-Nf.dist)*("top"===H?-1:1),hg+=Ee,ff+=Ee);ha.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ga.transformPoint(Ub.pt("left"===H?Vb:"right"===H?ie:Vb+ef/2,"bottom"===H?Fe:"top"===H?je:je+Pc/2)),end:Ga.transformPoint(Ub.pt(fe,za)),fill:Ub.Color.orange,height:Ub.guideWidth,
guideType:H,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ga.transformPoint(Ub.pt(Re,hg)),end:Ga.transformPoint(Ub.pt(og,ff)),fill:Ub.Color.orange,height:Ub.guideWidth,guideType:H,priority:10})}}gb&&(Fd||Ee)&&aa.moveBy(Ub.pt(Fd,Ee));if(na){ha=ha.filter(function(Wa){var hb=Wa.guideType;Wa=Wa.priority;return"h"===hb?Wa===sc:"v"===hb?Wa===Fc:!0});(na=Ub.cachedGuideLines.get(aa))||Ub.cachedGuideLines.set(aa,na=[]);for(gb=0;gb<ha.length;gb++)Nf=void 0,na[gb]?Nf=Object.assign(na[gb],ha[gb]):
(Nf=Ub.morph(ha[gb]),na.push(Nf)),Nf.owner||lb.addMorph(Nf);na.slice(gb).forEach(function(Wa){return Wa.remove()});Ub.fun.debounceNamed(aa.id+"-drag-guides-cleanup",1300,function(){var Wa=Ub.cachedGuideLines.get(aa);Wa&&Wa.forEach(function(hb){return hb.remove()})})()}}}function Za(aa,na,gb,H,ha,Ga){gb=void 0===gb?!0:gb;H=void 0===H?!0:H;ha=void 0===ha?5:ha;Ga=void 0===Ga?100:Ga;if(gb||H){var lb=aa.owner,Sb=lb.world(),Ab=lb.getGlobalTransform(),sc=aa.owner.submorphs.filter(function(hg){return hg!==
aa&&!hg.isEpiMorph&&hg.visible&&hg.reactsToPointer});lb=(na.includes("left")||na.includes("right")?"x":"")+(na.includes("top")||na.includes("bottom")?"y":"");var Fc=Ub.findMorphsWithSimilarWidthOrHeight(aa,lb,sc,ha,Ga),Fd=-Infinity,Ee=-Infinity,Cd=0,ce=0,je=0,Fe=0,Pc=0,fe=0;lb=[];Ab.e-=Sb.scroll.x;Ab.f-=Sb.scroll.y;if(Fc){Fc=$jscomp.makeIterator(Fc);for(var ie=Fc.next();!ie.done;ie=Fc.next()){ie=$jscomp.makeIterator(ie.value);ie.next();var ef=ie.next().value;ie=ef.similarIn;var ff=ef.delta,Nf=ef.refPointsA,
Vb=ef.refPointsB;ef=ha-ff+(Ga-ef.minDist);"width"===ie?Fd<ef&&(Fd=ef,na.includes("left")&&(ce=-ff),na.includes("right")&&(Cd=ff)):Ee<ef&&(Ee=ef,na.includes("top")&&(je=-ff),na.includes("bottom")&&(Fe=ff));ff={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ub.guideWidth,fill:Ub.guideColor,guideType:ie,priority:ef,start:Ab.transformPoint("width"===ie?Ub.pt(Nf.left,Nf.top+Nf.height/2):Ub.pt(Nf.left+Nf.width/2,Nf.top)),end:Ab.transformPoint("width"===ie?Ub.pt(Nf.right,Nf.top+Nf.height/2):Ub.pt(Nf.left+
Nf.width/2,Nf.bottom))};ie=Object.assign({},ff,{start:Ab.transformPoint("width"===ie?Ub.pt(Vb.left,Vb.top+Vb.height/2):Ub.pt(Vb.left+Vb.width/2,Vb.top)),end:Ab.transformPoint("width"===ie?Ub.pt(Vb.right,Vb.top+Vb.height/2):Ub.pt(Vb.left+Vb.width/2,Vb.bottom))});lb.push(ff,ie)}}if(Ga=Ub.findAlignedMorphs(aa,sc,ha,Ga,na,void 0))for(Ga=$jscomp.makeIterator(Ga),sc=Ga.next();!sc.done;sc=Ga.next()){sc=$jscomp.makeIterator(sc.value);sc.next();Fc=sc.next().value;sc=Fc.vertical;Fc=$jscomp.makeIterator(Fc.horizontal);
for(ie=Fc.next();!ie.done;ie=Fc.next()){ie=ie.value;Vb=ie.edgeAVal;var ng=ie.refPointsA,og=ie.refPointsB;ff=ie.edgeBVal;Nf=Math.ceil(ha-ie.delta);ef=Math.min(ng.top,og.top);ng=Math.max(ng.bottom,og.bottom);ie.maxDist>ha&&(Nf-=ha/2);Pc<Nf&&(Pc=Nf,na.includes("left")&&(ce=-(ff-Vb)),na.includes("right")&&(Cd=+(ff-Vb)));lb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ub.guideWidth,start:Ab.transformPoint(Ub.pt(ff,ef)),end:Ab.transformPoint(Ub.pt(ff,ng)),fill:Ub.guideColor,guideType:"h",priority:Nf})}sc=
$jscomp.makeIterator(sc);for(Fc=sc.next();!Fc.done;Fc=sc.next())Fc=Fc.value,ie=Fc.edgeAVal,ef=Fc.refPointsA,ng=Fc.refPointsB,Vb=Fc.edgeBVal,ff=Math.ceil(ha-Fc.delta),Nf=Math.min(ef.left,ng.left),ef=Math.max(ef.right,ng.right),Fc.maxDist>ha&&(ff-=ha/2),fe<ff&&Math.abs(Vb-ie)<=ha&&(fe=ff,na.includes("top")&&(je=Vb-ie),na.includes("bottom")&&(Fe=Vb-ie)),lb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Ub.guideWidth,start:Ab.transformPoint(Ub.pt(Nf,Vb)),end:Ab.transformPoint(Ub.pt(ef,Vb)),
fill:Ub.guideColor,guideType:"v",priority:ff})}H&&(ce&&(aa.left+=ce,aa.right-=ce),je&&(aa.top+=je,aa.bottom-=je),Cd&&(aa.width+=Cd),Fe&&(aa.height+=Fe));if(gb){lb=lb.filter(function(hg){var Re=hg.guideType;hg=hg.priority;return"width"===Re?hg===Fd:"height"===Re?hg===Ee:"v"===Re?hg===fe:"h"===Re?hg===Pc:!1});(na=Ub.cachedGuideLines.get(aa))||Ub.cachedGuideLines.set(aa,na=[]);for(gb=0;gb<lb.length;gb++)H=void 0,na[gb]?H=Object.assign(na[gb],lb[gb]):(H=Ub.morph(lb[gb]),na.push(H)),H.owner||Sb.addMorph(H);
na.slice(gb).forEach(function(hg){return hg.remove()});Ub.fun.debounceNamed(aa.id+"-drag-guides-cleanup",1300,function(){var hg=Ub.cachedGuideLines.get(aa);hg&&hg.forEach(function(Re){return Re.remove()})})()}}}function $b(aa,na){na=void 0===na?!1:na;var gb=vb.MorphicEnv.default().world;if(null===aa||void 0===aa)aa=String(aa);if(aa.isMorph)return vb.showRect(aa.world(),aa.globalBounds().translatedBy(aa.world().scroll.negated()),na);if(aa.isPoint)return vb.showRect(gb,new vb.Rectangle(aa.x-5,aa.y-
5,10,10));if(aa.isLine)return vb.showLine(gb,aa);if(aa.isRectangle)return vb.showRect(gb,aa);if("undefined"!==typeof vb.Element&&aa instanceof vb.Element)return vb.showRect(gb,vb.Rectangle.fromElement(aa));if("number"===typeof aa||"symbol"===typeof aa||"boolean"===typeof aa||"undefined"!==typeof vb.Node&&aa instanceof vb.Node||aa instanceof RegExp)aa=String(aa);"object"===typeof aa&&(aa=vb.obj.inspect(aa,{maxDepth:1}));return"string"===typeof aa&&1===arguments.length?gb.setStatusMessage(aa):gb.setStatusMessage(vb.string.formatFromArray(Array.from(arguments)))}
function Qc(aa,na,gb){gb=void 0===gb?3E3:gb;var H,ha,Ga,lb,Sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress){if(!(aa&&aa.world()&&na&&na.world()))return Ab.return(null);H=aa.owner.worldPoint(aa.center);ha=na.owner.worldPoint(na.center);Ga=H.lineTo(ha).sampleN(2)[1];lb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:vb.Color.red,fill:vb.Color.red,cx:5,cy:5,r:4}]};Sb=$world.addMorph(new vb.Path({position:Ga,
renderOnGPU:!0,vertices:[vb.pt(0),vb.pt(0)],borderWidth:2,startMarker:lb,endMarker:lb,borderColor:vb.Color.red}));return Ab.yield(Sb.whenRendered(),2)}if(3!=Ab.nextAddress)return Ab.yield(Sb.animate({opacity:1,customTween:function(sc){var Fc=Sb.center;Sb.vertices=[vb.pt(0).interpolate(sc,H.subPt(Ga)),vb.pt(0).interpolate(sc,ha.subPt(Ga))];Sb.center=Fc},duration:400}),3);gb&&setTimeout(function(){return Sb.fadeOut()},gb);return Ab.return(Sb)})}ta({a:Ka,d:Qc,r:ea,s:$b});var Ub=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Ub.removeSnapToGuidesOf=ea;Ub.showAndSnapToGuides=Ka;Ub.showAndSnapToResizeGuides=Za;Ub.computeRefPoints=function(aa){var na=aa.x,gb=aa.y,H=aa.width;aa=aa.height;return{left:na,top:gb,hCenter:na+H/2,vCenter:gb+aa/2,right:na+H,bottom:gb+aa,width:H,height:aa}};Ub.findEdgesInAlignment=function(aa,na,gb,H,ha,Ga,lb,Sb,Ab,sc){gb=void 0===gb?15:gb;Ga=void 0===Ga?0:Ga;lb=void 0===lb?0:lb;Sb=void 0===Sb?0:Sb;Ab=void 0===Ab?0:Ab;sc=void 0===sc?0:sc;for(var Fc=[],Fd=[],Ee=0;Ee<Ub.edges.length;Ee++){var Cd=$jscomp.makeIterator(Ub.edges[Ee]),
ce=Cd.next().value,je=Cd.next().value;Cd=Cd.next().value;var Fe=aa[je],Pc=na[Cd],fe=Math.max(Fe,Pc)-Math.min(Fe,Pc);fe>gb||!(H&&!H.includes(je)||ha&&!ha.includes(Cd))&&("vertical"===ce?Fc:Fd).push({delta:fe,edgeA:je,edgeB:Cd,edgeAVal:Fe,edgeBVal:Pc,refPointsA:aa,refPointsB:na,distLeft:Ga,distTop:lb,distRight:Sb,distBottom:Ab,maxDist:sc})}return Fc.length||Fd.length?{vertical:Fc,horizontal:Fd}:null};Ub.findAlignedMorphs=function(aa,na,gb,H,ha,Ga){gb=void 0===gb?15:gb;H=void 0===H?Infinity:H;for(var lb,
Sb=Ub.computeRefPoints(aa.bounds()),Ab=0;Ab<na.length;Ab++){var sc=na[Ab];if(sc!==aa){var Fc=Ub.computeRefPoints(sc.bounds()),Fd=Math.max(0,Sb.left-Fc.right),Ee=Math.max(0,Fc.left-Sb.right),Cd=Math.max(0,Sb.top-Fc.bottom),ce=Math.max(0,Fc.top-Sb.bottom);Math.max(ce,Cd,Ee,Fd)>H||!(Fc=Ub.findEdgesInAlignment(Sb,Fc,gb,ha,Ga,Fd,Cd,Ee,ce,Math.max(ce,Cd,Ee,Fd)))||(lb||(lb=new Map),lb.set(sc,Fc))}}aa=aa.owner;na=Ub.computeRefPoints(aa.innerBounds());if(gb=Ub.findEdgesInAlignment(Sb,na,gb))lb||(lb=new Map),
lb.set(aa,gb);return lb};Ub.findMorphsWithSimilarWidthOrHeight=function(aa,na,gb,H,ha){H=void 0===H?15:H;ha=void 0===ha?Infinity:ha;for(var Ga,lb=Ub.computeRefPoints(aa.bounds()),Sb=0;Sb<gb.length;Sb++){var Ab=gb[Sb];if(Ab!==aa){var sc=Ub.computeRefPoints(Ab.bounds()),Fc=Math.max(0,lb.left-sc.right),Fd=Math.max(0,sc.left-lb.right),Ee=Math.max(0,lb.top-sc.bottom),Cd=Math.max(0,sc.top-lb.bottom),ce=Math.min(Cd,Ee,Fd,Fc),je=Math.max(Cd,Ee,Fd,Fc);if(!(Math.max(Cd,Ee,Fd,Fc)>ha)){Fd=lb;Fc=Fd.width;Fd=Fd.height;
Cd=sc;Ee=Cd.width;Cd=Cd.height;var Fe=Ee-Fc,Pc=Cd-Fd;("x"===na||"xy"===na)&&Math.abs(Fe)<=H&&(Ga||(Ga=new Map),Ga.set(Ab,{similarIn:"width",minDist:ce,maxDist:je,refPointsA:lb,refPointsB:sc,valA:Fc,valB:Ee,delta:Fe}));("y"===na||"xy"===na)&&Math.abs(Pc)<=H&&(Ga||(Ga=new Map),Ga.set(Ab,{similarIn:"height",minDist:ce,maxDist:je,refPointsA:lb,refPointsB:sc,valA:Fd,valB:Cd,delta:Pc}))}}}return Ga};Ub.closest=function(aa,na,gb,H,ha,Ga,lb,Sb){Sb=void 0===Sb?!0:Sb;var Ab=H[aa],sc=ha[aa],Fc=Ga[aa];na=lb[aa];
for(var Fd,Ee,Cd,ce,je=0;je<ha.length;je++)aa===je||Ab<ha[je]||Fd&&ha[Fd.index]>=ha[je]||Sb&&lb[aa]<Ga[je]||Ga[aa]>lb[je]||(Fd={index:je,dist:Ab-ha[je],refPointsA:gb[aa],refPointsB:gb[je]});for(Ab=0;Ab<H.length;Ab++)aa===Ab||sc>H[Ab]||Ee&&H[Ee.index]<=H[Ab]||Sb&&lb[aa]<Ga[Ab]||Ga[aa]>lb[Ab]||(Ee={index:Ab,dist:H[Ab]-sc,refPointsA:gb[aa],refPointsB:gb[Ab]});for(sc=0;sc<lb.length;sc++)aa===sc||Fc<lb[sc]||Cd&&lb[Cd.index]>=lb[sc]||Sb&&H[aa]>ha[sc]||ha[aa]<H[sc]||(Cd={index:sc,dist:Fc-lb[sc],refPointsA:gb[aa],
refPointsB:gb[sc]});for(lb=0;lb<Ga.length;lb++)aa===lb||na>Ga[lb]||ce&&Ga[ce.index]<=Ga[lb]||Sb&&H[aa]>ha[lb]||ha[aa]<H[lb]||(ce={index:lb,dist:Ga[lb]-na,refPointsA:gb[aa],refPointsB:gb[lb]});return{l:Fd,r:Ee,t:Cd,b:ce}};Ub.computeClosestMorphs=function(aa){for(var na=[],gb=[],H=[],ha=[],Ga=[],lb=[],Sb=0;Sb<aa.length;Sb++){var Ab=Ub.computeRefPoints(aa[Sb].bounds());Ga.push(Ab);var sc=Ab.right,Fc=Ab.top,Fd=Ab.bottom;na.push(Ab.left);gb.push(sc);H.push(Fc);ha.push(Fd)}for(Sb=0;Sb<aa.length;Sb++)lb.push(Ub.closest(Sb,
aa,Ga,na,gb,H,ha));return lb};Ub.fun=mb;Ub.pt=tb;Ub.Color=Tb;Ub.morph=Jb;Ub.cachedGuideLines=new WeakMap;Ub.guideWidth=1;Ub.guideColor=Ub.Color.orange.lighter();Ub.removeSnapToGuidesOf=ea;Ub.removeSnapToGuidesOf=ea;Ub.showAndSnapToGuides=Ka;Ub.showAndSnapToGuides=Ka;Ub.showAndSnapToResizeGuides=Za;Ub.showAndSnapToResizeGuides=Za;Ub.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var vb=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");vb.show=$b;vb.showRect=function(aa,na,gb){var H=
vb.BoundsMarker.highlightBounds(na);return gb?vb.showInLoop(aa,H,na):vb.showThenHide(aa,H)};vb.showInLoop=function(aa,na,gb){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){switch(ha.nextAddress){case 1:return vb.showThenHide(aa,na,!1),ha.yield(vb.promise.delay(300),2);case 2:H=!1,vb.once(aa,"onMouseDown",function(){return H=!0}),vb.once(aa,"hideMarkers",function(){return H=!0});case 3:if(H){ha.jumpTo(4);break}return ha.yield(na.retract(gb),3);case 4:na.fadeOut(2E3),ha.jumpToEnd()}})};
vb.showThenHide=function(aa,na,gb){gb=void 0===gb?3:gb;if(aa){var H=Array.isArray(na)?na:[na];H.forEach(function(ha){return aa.addMorph(ha)});gb&&setTimeout(function(){return H.forEach(function(ha){return ha.fadeOut(2E3)})},1E3*gb);return na}};vb.showLine=function(aa,na,gb){gb=void 0===gb?3E3:gb;var H=na.start;na=na.end.subPt(H);var ha=aa.addMorph({position:H,rotation:na.theta(),border:{width:1,color:vb.Color.red},width:na.fastR(),height:0});gb&&setTimeout(function(){return ha.fadeOut()},gb);return ha};
vb.showConnector=Qc;vb.obj=rd;vb.promise=yc;vb.string=vd;vb.pt=tb;vb.Color=Tb;vb.Rectangle=zc;vb.rect=Ec;vb.morph=Jb;vb.easings=Mc;vb.Path=zd;vb.Icon=ne;vb.Morph=De;vb.MorphicEnv=Xd;vb.connect=Qb;vb.once=qc;vb.disconnect=ld;vb.show=$b;vb.show=$b;(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),gb=na.hasOwnProperty("BoundsMarker")&&"function"===typeof na.BoundsMarker?na.BoundsMarker:na.BoundsMarker=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(gb,aa,[{key:Symbol.for("lively-instance-initialize"),value:function(){Pb._get(Object.getPrototypeOf(gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:vb.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(H){H=H.insetBy(-2);H=Math.min(H.width,H.height);return Math.max(4,Math.floor(10>H/10?H/2-5:H/10))}},{key:"createMarkerEdge",value:function(){return vb.morph({fill:vb.Color.red,
reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var H=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),ha=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Ga=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),lb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),Sb=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Ab=this.bottomRightV||(this.bottomRightV=
this.addMorph(this.createMarkerEdge())),sc=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Fc=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[H,ha,Ga,lb,Sb,Ab,sc,Fc]}},{key:"alignWithMorph",value:function(H){return this.alignWithBounds(H.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(H){this.alignWithRect(H.insetBy(-20));return this.alignWithRect(H,!0)}},{key:"alignWithRect",value:function(H,
ha){var Ga=this.ensureMarkerCorners(),lb=this.markerLength(H),Sb=[H.topLeft().addXY(0,0).extent(vb.pt(lb,5)),H.topLeft().addXY(0,0).extent(vb.pt(5,lb)),H.topRight().addXY(-lb,0).extent(vb.pt(lb,5)),H.topRight().addXY(-5,0).extent(vb.pt(5,lb)),H.bottomRight().addXY(-5,-lb).extent(vb.pt(5,lb)),H.bottomRight().addXY(-lb,-5).extent(vb.pt(lb,5)),H.bottomLeft().addXY(0,-5).extent(vb.pt(lb,5)),H.bottomLeft().addXY(0,-lb).extent(vb.pt(5,lb))];Ga.forEach(function(Ab,sc){return Ab.setBounds(Sb[sc])});ha&&(this.adjustOrigin(H.center()),
this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(H){var ha=this,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return lb.yield(ha.animate({scale:Math.max(30/H.width,1.05)}),2);Ga=ha.center;return lb.yield(ha.animate({center:Ga,scale:1,duration:300,easing:vb.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(H){return(new this).alignWithMorph(H)}},
{key:"highlightBounds",value:function(H){return(new this).alignWithBounds(H)}}],na,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2332,end:6009})})(vb.Morph);var pd=ta("S",function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),gb=na.hasOwnProperty("StatusMessage")&&
"function"===typeof na.StatusMessage?na.StatusMessage:na.StatusMessage=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"relayout",value:function(){this.title=vb.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(H,ha){this.message=H;this.color=ha}},{key:"slideTo",
value:function(H){var ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ha.sliding=ha.animate({position:H,duration:500}),Ga.yield(ha.sliding,2);ha.sliding=!1;Ga.jumpToEnd()})}},{key:"expand",value:function(){var H=this,ha,Ga,lb,Sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress)return H.expandable?H.sliding?Ab.yield(H.sliding,2):Ab.jumpTo(2):Ab.return();ha=H.world();if(!ha||H.isMaximized)return Ab.return();H.isMaximized=
!0;H.stayOpen=!0;Ga=H.getSubmorphNamed("message text");Ga.lineWrapping=!1;Object.assign(Ga,{clipMode:"auto",fixedWidth:!0,selectable:!0});H.expandedContent&&(Ga.value=H.expandedContent);Ga.fit();lb=Ga.textBounds().extent();Sb=ha.visibleBounds();lb.y>Sb.extent().y&&(lb.y=Sb.extent().y-20);lb.x>Sb.extent().x&&(lb.x=Sb.extent().x-20);lb=H.extent.maxPt(lb);H.animate({extent:lb,center:Sb.center(),duration:200});H.relayout();H.focus();Ab.jumpToEnd()})}},{key:"fit",value:function(){var H=this.getSubmorphNamed("message text");
H&&(this.extent=vb.pt(100,35).maxPt(H.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var H=this.getSubmorphNamed("message text");H&&H.focus()}},{key:"onMouseUp",value:function(H){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:vb.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=
!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(H){this.setProperty("message",H);var ha=this.getSubmorphNamed("message text");if(ha){ha.value=H;var Ga=ha.documentEndPosition;Ga.row>this.maxLines&&(ha.replace({start:{row:this.maxLines,column:0},end:Ga},"...\n"),this.expandedContent||(this.expandedContent=H));Ga=ha.documentEndPosition;0!==Ga.column&&
ha.insertText("\n",Ga)}}},title:{isStyleProp:!0,derived:!0,set:function(H){this.getSubmorphNamed("message title").value=H},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(H){this.get("message icon").fontColor=H;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=H)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=
[{name:"message icon",type:"label",value:vb.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];vb.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");vb.connect(this,"extent",this,"relayout")}}}}}],na,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:6053,end:10382})}(vb.Morph));vb.StatusMessage=pd;vb.StatusMessage=pd;vb.StatusMessage=pd;var $c=ta("b",function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),gb=na.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof na.StatusMessageForMorph?na.StatusMessageForMorph:na.StatusMessageForMorph=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"alignAtBottomOf",
value:function(H){var ha=this.world();ha&&(this.bringToFront(),this.fit(),this.width=H.bounds().width,this.relayout(),H.world()&&(this.position=H.owner.worldPoint(H.bounds().bottomLeft())),H=ha.visibleBounds(),H=this.bounds().top()+this.height-H.bottom(),0<H&&this.moveBy(vb.pt(0,-H)))}},{key:"onMouseUp",value:function(H){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},
removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var H=this.getProperty("targetMorph");return H&&$world.getMorphWithId(H)},set:function(H){this.setProperty("targetMorph",H?H.id:null);this.alignAtBottomOf(H)}},expandable:{after:["submorphs"],set:function(H){this.setProperty("expandable",H);if(H){var ha=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});vb.connect(ha,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),vb.disconnect(ha,"fire",this,"expand"))}}}}}],na,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10607,end:12475})}(vb.StatusMessage));vb.StatusMessageForMorph=$c;vb.StatusMessageForMorph=$c;vb.StatusMessageForMorph=$c;vb.showConnector=Qc;vb.showConnector=
Qc;var Ta=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ta.Morph=De;Ta.Label=ud;Ta.StyleSheet=Ed;Ta.HorizontalLayout=vc;Ta.Path=zd;Ta.Text=ac;Ta.GridLayout=Eb;Ta.morph=Jb;Ta.Icon=ne;Ta.createMorphSnapshot=ec;Ta.Color=Tb;Ta.pt=tb;Ta.rect=Ec;Ta.Rectangle=zc;Ta.LinearGradient=wc;Ta.obj=rd;Ta.PropertyPath=fd;Ta.promise=yc;Ta.properties=cd;Ta.num=pc;Ta.arr=cb;Ta.connect=Qb;Ta.signal=fb;Ta.disconnect=ld;Ta.disconnectAll=ya;Ta.once=qc;Ta.showAndSnapToGuides=Ka;Ta.showAndSnapToResizeGuides=Za;
Ta.removeSnapToGuidesOf=ea;Ta.resource=Ea;Ta.show=$b;Ta.haloBlue=Ta.Color.rgb(23,160,251);Ta.componentAccent=Ta.Color.magenta;Ta.derivedAccent=Ta.Color.purple;var nb=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("Halo")&&"function"===typeof na.Halo?na.Halo:na.Halo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"relayout",value:function(){this.alignWithTarget()}},
{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(H){H.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var H=this;setTimeout(function(){H.target.owner||H.remove()})}},{key:"initLayout",value:function(){var H=this.layout=new Ta.GridLayout({autoAssign:!1,fitToCell:!1,
columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name",
"name","name","name","name",null]]});H.col(1).row(7).group.align="center";H.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},
{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||this.addMorphBack(Ta.morph({name:"border-box",fill:Ta.Color.transparent,borderColor:this.target.isComponent?Ta.componentAccent:Ta.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(H){this.state||(this.state={});this.state.pointerId=H}},{key:"prepareTarget",
value:function(H){if(!Ta.obj.isArray(H))return H;if(1>=H.length)return H[0];H=H[0].world().addMorph(new Ta.MultiSelectionTarget({selectedMorphs:H}));H.alignWithSelection();H.modifiesSelectedMorphs=!0;return H}},{key:"refocus",value:function(H){this.target=H;this.alignWithTarget()}},{key:"alignWithTarget",value:function(H){if((!H||["extent","position","scale","rotation"].includes(H.prop))&&!this.active&&this.target){H=this.target.world()||$world;var ha=H.visibleBounds(),Ga=this.target.globalBounds(),
lb=Ga.insetBy(-36).intersection(ha);ha=Ga.intersection(ha);this.layout&&this.layout.disable();this.setBounds(lb.translatedBy(H.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,ha));this.state.activeButton?(this.buttonControls.forEach(function(Sb){return Sb.visible=!1}),this.ensureResizeHandles().forEach(function(Sb){return Sb.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),
this.ensureResizeHandles().forEach(function(Sb){return Sb.visible=!0}),this.buttonControls.forEach(function(Sb){Sb.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(Sb){return Sb.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var H=this.target;H&&(Ta.disconnect(H,"onChange",this,"alignWithTarget"),Ta.disconnect(H,"onOwnerChanged",
this,"removeIfDetached"),H instanceof Ta.MultiSelectionTarget?(H.modifiesSelectedMorphs=!1,H.remove()):"function"===typeof H.detachedHalo&&H.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();Pb._get(Object.getPrototypeOf(gb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",value:function(H){return H}},{key:"propertyDisplay",get:function(){return Ta.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ta.NameHaloItem.for(this)}},{key:"closeHalo",
value:function(){return Ta.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Ta.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Ta.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ta.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ta.InspectHaloItem.for(this)}},{key:"editHalo",value:function(){return Ta.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ta.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ta.CopyHaloItem.for(this)}},
{key:"originHalo",value:function(){return Ta.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Ta.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(H){return H.isHaloItem&&!H.isResizeHandle})}},{key:"addMorphToSelection",value:function(H){var ha=this,Ga,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sb){if(1==Sb.nextAddress){Ga=ha.world();lb=ha.target.isMorphSelection?ha.target.selectedMorphs:[ha.target];
if(lb.includes(H))return Sb.return();ha.remove();return Sb.yield(Ga.showHaloForSelection([].concat($jscomp.arrayFromIterable(lb),[H]),ha.state.pointerId),2)}return Sb.return(Sb.yieldResult)})}},{key:"removeMorphFromSelection",value:function(H){var ha=this,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress){Ga=ha.world();ha.remove();if(!ha.target.isMorphSelection)return lb.jumpTo(0);Ta.arr.remove(ha.target.selectedMorphs,H);return lb.yield(Ga.showHaloForSelection(ha.target.selectedMorphs,
ha.state.pointerId),3)}return lb.return(lb.yieldResult)})}},{key:"isAlreadySelected",value:function(H){return this.target==H||this.target.isMorphSelection&&this.target.selectsMorph(H)}},{key:"updateBoundsFor",value:function(H,ha,Ga,lb,Sb){var Ab={topLeft:Ta.rect(-1,-1,1,1),topCenter:ha?Ta.rect(1,-1,0,1):Ta.rect(0,-1,0,1),topRight:Ta.rect(0,-1,1,1),rightCenter:ha?Ta.rect(0,1,1,1):Ta.rect(0,0,1,0),bottomRight:Ta.rect(0,0,1,1),bottomCenter:ha?Ta.rect(1,0,0,1):Ta.rect(0,0,0,1),bottomLeft:Ta.rect(-1,0,
1,1),leftCenter:ha?Ta.rect(-1,1,1,0):Ta.rect(-1,0,1,0)}[H];Sb=Ab.x;var sc=Ab.y,Fc=Ab.width;Ab=Ab.height;Ga=ha?this.proportionalDelta(H,Ga,lb):Ga;H=Ta.rect(Ga.x*Sb,Ga.y*sc,Ga.x*Fc,Ga.y*Ab);this.active=!0;this.target.setBounds(lb.insetByRect(H));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());this.active=!1;this.alignWithTarget();this.world().withTopBarDo(function(Fd){if(Fd.activeSideBars.includes("Styling Palette"))Fd.stylingPalette.onHierarchyChange()})}},
{key:"proportionalDelta",value:function(H,ha,Ga){var lb=Ga.width,Sb=Ga.height;Ga={topLeft:Ta.pt(-1,-1),topCenter:Ta.pt(0,-1),topRight:Ta.pt(1,-1),leftCenter:Ta.pt(-1,0),rightCenter:Ta.pt(1,0),bottomLeft:Ta.pt(-1,1),bottomCenter:Ta.pt(0,1),bottomRight:Ta.pt(1,1)};var Ab=lb/Math.max(lb,Sb),sc=Sb/Math.max(Sb,lb);lb={topLeft:Ta.pt(-Ab,-sc),topCenter:Ta.pt(1/(2*Sb/lb),-1),topRight:Ta.pt(Ab,-sc),leftCenter:Ta.pt(-1,Sb/(2*lb)),rightCenter:Ta.pt(1,Sb/(3*lb)),bottomLeft:Ta.pt(-Ab,sc),bottomCenter:Ta.pt(1/
(2*Sb/lb),1),bottomRight:Ta.pt(Ab,sc)};Ga=Ga[H];return lb[H].scaleBy(Ga.dotProduct(ha)/Ga.dotProduct(Ga))}},{key:"ensureResizeHandles",value:function(){return Ta.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(H){H=H.valueForPropertyDisplay();"undefined"!==typeof H?this.propertyDisplay.displayProperty(H):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(H,ha){if(!Ta.rect(0).sides.includes(ha)){var Ga=this.getSubmorphNamed("diagonal");if(H){H=this.target.globalBounds();
var lb=H.width,Sb=H.height;H=this.localize(Ta.pt(H.x,H.y)).extent(Ta.pt(lb,Sb)).scaleRectTo(this.innerBounds());lb={topLeft:[Ta.pt(lb,Sb),Ta.pt(0,0)],topRight:[Ta.pt(0,Sb),Ta.pt(lb,0)],bottomRight:[Ta.pt(0,0),Ta.pt(lb,Sb)],bottomLeft:[Ta.pt(lb,0),Ta.pt(0,Sb)]};Ga?Ga.setBounds(H):(Ga=$jscomp.makeIterator(lb[ha]),ha=Ga.next().value,Ga=Ga.next().value,lb=new Ta.LinearGradient({stops:[{offset:0,color:Ta.Color.orange.withA(0)},{offset:.2,color:Ta.Color.orange},{offset:.8,color:Ta.Color.orange},{offset:1,
color:Ta.Color.orange.withA(0)}]}),Ga=this.addMorphBack(new Ta.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:H,borderColor:lb,vertices:[ha,Ga]})),Ga.setBounds(H),Ga.animate({opacity:1,duration:500}))}else Ga&&Ga.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(H,ha){var Ga=this.getSubmorphNamed("rotationIndicator");H&&ha?(H=this.getSubmorphNamed("origin").center,Ga=Ga||this.addMorphBack(new Ta.Path({name:"rotationIndicator",borderColor:Ta.haloBlue,borderWidth:1,
vertices:[]})),Ga.setBounds(ha.bounds().union(this.innerBounds())),Ga.vertices=[Ga.localizePointFrom(H,this),Ga.localizePointFrom(ha.center,this)]):Ga&&Ga.remove()}},{key:"toggleMorphHighlighter",value:function(H,ha,Ga){Ga=void 0===Ga?!1:Ga;if(ha)if(ha.onHaloGrabover)ha.onHaloGrabover(H);else Ga=Ta.MorphHighlighter.for(this,ha,Ga),H&&ha&&ha!=this.world()?Ga&&Ga.show(ha):Ga&&Ga.deactivate()}},{key:"onMouseDown",value:function(H){var ha=H.state.clickedOnMorph;if(!H.isCommandKey()&&ha==this.borderBox)return this.remove();
if(H.isShiftDown()&&H.isCommandKey())H=this.target.isMorphSelection?this.target.morphBeneath(H.position):this.morphBeneath(H.position),this.isAlreadySelected(H)?this.removeMorphFromSelection(H):this.addMorphToSelection(H);else{if(ha==this.borderBox&&H.isCommandKey()){var Ga=H.world.morphsContainingPoint(H.position).filter(function(lb){return lb.halosEnabled});(Ga=Ga.slice(Ga.indexOf(this.target)+1)[0]||Ga[0]||H.world)&&H.world.showHaloFor(Ga,H.domEvt.pointerId);this.remove()}ha==this&&H.isCommandKey()&&
(Ga=this.morphBeneath(H.position),H.world.showHaloFor(Ga,H.domEvt.pointerId));ha==this&&this.remove()}}},{key:"onContextMenu",value:function(H){var ha=this;Promise.resolve($world.defaultMenuItems(this.target)).then(function(Ga){return ha.target.openMenu(Ga,H)}).catch(function(Ga){return $world.logError(Ga)})}},{key:"onKeyUp",value:function(H){this.changingName||this.buttonControls.map(function(ha){return ha.onKeyUp(H)})}},{key:"getMesh",value:function(H,ha){var Ga=H.x;H=H.y;ha=void 0===ha?Ta.pt(0,
0):ha;var lb=this.world().visibleBounds(),Sb=lb.height;lb=lb.width;var Ab={borderStyle:"dotted",borderWidth:2,borderColor:Ta.Color.orange};Ab=this.get("mesh")||this.addMorph(new Ta.Morph({name:"mesh",styleClasses:["halo-mesh"],extent:Ta.pt(lb,Sb),fill:null,submorphs:[new Ta.Path(Object.assign({name:"vertical"},Ab)),new Ta.Path(Object.assign({name:"horizontal"},Ab))]}));Ab.globalPosition=ha;Ab.getSubmorphNamed("vertical").vertices=[Ta.pt(Ga,0).subPt(ha),Ta.pt(Ga,Sb).subPt(ha)];Ab.getSubmorphNamed("horizontal").vertices=
[Ta.pt(0,H).subPt(ha),Ta.pt(lb,H).subPt(ha)];return Ab}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ta.Color.transparent},resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,
get:function(){return 40>this.target.bounds().extent().dist(Ta.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(H){this.state||(this.state={});var ha=!!this.state.target;this.detachFromTarget();H=this.prepareTarget(H);this.state.target=H;ha&&this.alignWithTarget();Ta.connect(H,"onChange",this,"alignWithTarget");Ta.connect(H,"onOwnerChanged",this,"removeIfDetached")}}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:979,end:17523})}(Ta.Morph);nb=Ta.Halo;var xc=ta("H",nb);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof na.HaloPropertyDisplay?na.HaloPropertyDisplay:na.HaloPropertyDisplay=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(gb,aa,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},{key:"displayProperty",value:function(H){var ha=this.halo.state.activeButton;H=String(H);this.visible=!0;this.textString=H;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(ha.bounds())&&(this.position=Ta.pt(ha.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=
this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",get:function(){return Ta.pt(25,0)}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Ta.Color.black.withA(.7)},borderRadius:{defaultValue:7},
padding:{defaultValue:Ta.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ta.Color.white},position:{defaultValue:this.defaultPosition}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17713,end:19051})})(Ta.Label);
(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof na.MultiSelectionTarget?na.MultiSelectionTarget:na.MultiSelectionTarget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(H){return this.selectedMorphs.includes(H)}},
{key:"alignWithSelection",value:function(){var H=this.selectedMorphs.map(function(ha){return ha.globalBounds()}).reduce(function(ha,Ga){return ha.union(Ga)});this.setBounds(H)}},{key:"onGrab",value:function(H){this.grabbingHand=H.hand;this.selectionGrabbed=!0;H.hand.grab(this.selectedMorphs);Ta.once(H.hand,"dropMorphsOn",this,"onGrabEnd");Ta.connect(H.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Ta.disconnectAll(this.grabbingHand)}},{key:"updateExtent",
value:function(H){var ha=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Ga){return Ga.resizeBy(ha)})}},{key:"updatePosition",value:function(H){if(!this.selectionGrabbed){var ha=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Ga){return Ga.moveBy(ha)})}}},{key:"updateRotation",value:function(H){var ha=this,Ga=H.value-H.prevValue;this.selectedMorphs.forEach(function(lb){var Sb=lb.origin;lb.adjustOrigin(lb.localize(ha.worldPoint(Ta.pt(0,0))));lb.rotation+=Ga;lb.adjustOrigin(Sb)})}},
{key:"updateScale",value:function(H){var ha=this,Ga=H.value-H.prevValue;this.selectedMorphs.forEach(function(lb){var Sb=lb.origin;lb.adjustOrigin(lb.localize(ha.worldPoint(Ta.pt(0,0))));lb.scale+=Ga;lb.adjustOrigin(Sb)})}},{key:"onChange",value:function(H){Pb._get(Object.getPrototypeOf(gb.prototype),"onChange",this).call(this,H);if(this.modifiesSelectedMorphs){switch(H.prop){case "extent":this.updateExtent(H);break;case "scale":this.updateScale(H);break;case "position":this.updatePosition(H);break;
case "rotation":this.updateRotation(H)}return H}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19119,end:21390})})(Ta.Morph);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("HaloItem")&&"function"===typeof na.HaloItem?na.HaloItem:na.HaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},
{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ta.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ta.pt(24,24)},halo:{}}}},{key:"for",
value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({halo:H,name:this.morphName}))}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21554,end:22227})})(Ta.Morph);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("NameHolder")&&
"function"===typeof na.NameHolder?na.NameHolder:na.NameHolder=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onHoverIn",value:function(H){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ta.Color.orange)}},{key:"onHoverOut",value:function(H){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=
Ta.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(H){"Enter"==H.keyCombo?(this.accept(),this.halo.focus(),H.stop()):Pb._get(Object.getPrototypeOf(gb.prototype),"onKeyDown",this).call(this,H)}},{key:"onMouseUp",value:function(){Ta.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(H){this.nameHolder.fontColor=Ta.Color.white;this.halo.toggleMorphHighlighter(!1,
this.target)}},{key:"onKeyUp",value:function(H){H=this.nameHolder.textString;var ha=this.target.owner;this.validName=!ha||!ha.getSubmorphNamed(H)||this.target.name==H;Ta.signal(this,"valid",[this.validName,H])}},{key:"update",value:function(){var H=this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return H.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},
{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(H){if(!this.forceUniqueName||this.validName)this.target.name=H,Ta.signal(this,"active",[!1,this])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Ta.Color.transparent},
forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ta.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Ta.Text({fill:Ta.Color.transparent,fontColor:Ta.Color.white,fontWeight:"bold",active:!0}));Ta.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22262,end:24844})})(Ta.Morph);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("NameHaloItem")&&"function"===typeof na.NameHaloItem?na.NameHaloItem:na.NameHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,
[{key:Symbol.for("lively-instance-initialize"),value:function(H){Pb._get(Object.getPrototypeOf(gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.initComponentLink();this.initNameHolders();this.validityIndicator=Ta.Icon.makeLabel("check",{fontColor:Ta.Color.green,fontSize:15,padding:Ta.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Ta.componentAccent:Ta.haloBlue;this.alignInHalo()}},{key:"initComponentLink",value:function(){var H=this,ha=this.halo.target;if(ha&&
!ha.isMorphSelection&&ha.master){var Ga=ha.master.determineMaster(ha),lb=Ga&&!!Ga.world(),Sb=Ga?ha.master.getWorldUrlFor(Ga):"this project";ha=this.addMorph(Ta.Icon.makeLabel(Sb?"external-link-alt":"exclamation-triangle",{nativeCursor:"pointer",fontColor:Ta.Color.white,padding:Ta.rect(8,0,-8,0),name:"master link",tooltip:"Located in "+Sb}));Sb&&Ta.connect(ha,"onMouseDown",function(){lb?H.showLocalMaster(Ga):window.open(Sb)})}}},{key:"showLocalMaster",value:function(H){var ha;if(ha=H.getWindow())ha.activate(),
ha.minimized&&(ha.minimized=!1);H.show()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(H){return{target:H,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var H=this;this.nameHolders=this.targets().map(function(ha){ha=new Ta.NameHolder({halo:H.halo,highlightOnHover:ha.highlightOnHover,target:ha.target});Ta.connect(ha,"active",H,"toggleActive");
Ta.connect(ha,"valid",H,"toggleNameValid");return ha});this.submorphs=[].concat($jscomp.arrayFromIterable(this.submorphs),$jscomp.arrayFromIterable(Ta.arr.interpose(this.nameHolders,{extent:Ta.pt(1,28),fill:Ta.Color.black.withA(.4)})))}},{key:"toggleActive",value:function(H){var ha=$jscomp.makeIterator(H);H=ha.next().value;var Ga=ha.next().value;if(this.halo.changingName!==H){this.halo.changingName=H;if(ha=this.get("master link"))ha.visible=ha.isLayoutable=!H;H?(this.nameHolders.forEach(function(lb){return lb!=
Ga&&lb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),this.fill=Ta.Color.darkGray,setTimeout(function(){return Ga.nameHolder.selectAll()})):(this.fill=Ta.haloBlue,this.nameHolders.forEach(function(lb){return lb!=Ga&&lb.activate()}),this.borderWidth=0,this.validityIndicator.remove());this.alignInHalo()}}},{key:"toggleNameValid",value:function(H){var ha=$jscomp.makeIterator(H);H=ha.next().value;ha=ha.next().value;(this.validName=H)?(this.conflictingMorph=null,this.borderColor=
Ta.Color.green,this.validityIndicator.nativeCursor="auto",this.validityIndicator.fontColor=Ta.Color.green,Ta.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(ha),this.borderColor=Ta.Color.red,this.validityIndicator.fontColor=Ta.Color.red,this.validityIndicator.nativeCursor="pointer",Ta.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ta.arr.zip(this.targets(),this.nameHolders).map(function(ha){var Ga=$jscomp.makeIterator(ha);
ha=Ga.next().value.target;Ga=Ga.next().value;Ga.target=ha;Ga.update()});var H=this.halo.innerBounds().bottomCenter().addPt(Ta.pt(0,2));this.topCenter=Ta.pt(Math.max(H.x,30),Math.max(H.y,80))}},{key:"onMouseDown",value:function(H){var ha=this,Ga=this.conflictingMorph;Ga&&(this.halo.toggleMorphHighlighter(!0,Ga),setTimeout(function(){return ha.halo.toggleMorphHighlighter(!1,Ga)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:4},fill:{defaultValue:Ta.haloBlue},borderColor:{defaultValue:Ta.Color.green},layout:{initialize:function(){this.layout=new Ta.HorizontalLayout({resizeContainer:!0,spacing:0,align:"center",orderByIndex:!0})}}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:24846,end:29313})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("CloseHaloItem")&&"function"===typeof na.CloseHaloItem?na.CloseHaloItem:na.CloseHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"update",value:function(){var H=this.halo,ha=H.target.owner;ha.undoStart("close-halo");H.target.selectedMorphs?
H.target.selectedMorphs.forEach(function(Ga){return Ga.remove()}):H.target.remove();ha.undoStop("close-halo");H.remove()}},{key:"onMouseDown",value:function(H){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-trash"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],na,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:29315,end:29940})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("GrabHaloItem")&&"function"===typeof na.GrabHaloItem?na.GrabHaloItem:na.GrabHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(gb,aa,[{key:"adjustTarget",value:function(H,ha){Ta.PropertyPath("owner.layout.autoResize").get(H)&&!H.globalBounds().insetBy(10).containsPoint(ha)&&(H=H.owner);return H}},{key:"valueForPropertyDisplay",value:function(){var H=this.hand,ha=this.halo,Ga=this.prevDropTarget,lb=H.world(),Sb=H.findDropTarget(H.globalPosition,[ha.target],function(Ab){return!Ab.isHaloItem&&!Ab.ownerChain().some(function(sc){return sc.isHaloItem||!sc.visible||0==sc.opacity})});if(Sb)return Sb=this.adjustTarget(Sb,
H.globalPosition),ha.toggleMorphHighlighter(Sb&&Sb!=lb,Sb,!0),Ga&&Ga!=Sb&&ha.toggleMorphHighlighter(!1,Ga),(this.prevDropTarget=Sb)&&Sb.name}},{key:"init",value:function(H){var ha=this.halo,Ga=ha.target.undoStart("grab-halo");Ga&&Ga.addTarget(ha.target.owner);this.hand=H;ha.target.onGrab({halo:ha,hand:H,isShiftDown:function(){return!1}});ha.state.activeButton=this;this.opacity=.3;var lb=Ta.connect(H,"update",this,"update");Ta.once(ha.target,"remove",function(){return lb.disconnect()})}},{key:"stop",
value:function(H){var ha=this.halo,Ga=this.prevDropTarget,lb=ha.target.undoInProgress,Sb=H.hand.findDropTarget(H.hand.globalPosition,[ha.target],function(Ab){return!Ab.isHaloItem&&!Ab.ownerChain().some(function(sc){return sc.isHaloItem})});Sb=this.adjustTarget(Sb,H.hand.globalPosition);Ta.disconnect(H.hand,"update",this,"update");Ta.MorphHighlighter.interceptDrop(ha,Sb,ha.target);lb.addTarget(Sb);Sb.onDrop(H);ha.state.activeButton=null;ha.alignWithTarget();ha.toggleMorphHighlighter(!1,Ga);Ta.MorphHighlighter.removeHighlighters(ha);
ha.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],
na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:29942,end:32470})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("DragHaloItem")&&"function"===typeof na.DragHaloItem?na.DragHaloItem:na.DragHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(H){var ha=this.halo.getSubmorphNamed("mesh");if(H)return ha=this.halo.getMesh(this.halo.target.worldPoint(Ta.pt(0,0))),this.focus(),ha;ha&&ha.remove()}},{key:"init",value:function(){var H=this.halo.target;H.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=H.position;
this.targetTransform=H.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);Ta.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(H,ha,Ga){ha=void 0===ha?!1:ha;Ga=void 0===Ga?!1:Ga;this.actualPos=H=this.actualPos.addPt(this.targetTransform.transformDirection(H));ha&&(H=H.griddedBy(Ta.pt(10,10)));this.halo.target.position=H;this.updateAlignmentGuide(ha);
this.world().withTopBarDo(function(lb){if(lb.activeSideBars.includes("Styling Palette"))lb.stylingPalette.onHierarchyChange()});ha||Ta.showAndSnapToGuides(this.halo.target,!0,Ga,5,500)}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta,H.isAltDown(),H.isCtrlDown())}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onKeyUp",value:function(H){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},
{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:32472,end:34470})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("InspectHaloItem")&&"function"===typeof na.InspectHaloItem?na.InspectHaloItem:na.InspectHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){var ha=this;(function(){var Ga,lb,Sb,Ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sc){if(1==
sc.nextAddress)return sc.yield(System.import("lively.ide/js/inspector.js"),2);Ga=sc.yieldResult;lb=Ga.default;(Sb=ha.world().getSubmorphsByStyleClassName("Inspector").find(function(Fc){return Fc.targetObject==ha.halo.target}))&&(Ab=Sb.getWindow())?(Ab.minimized=!1,Ab.activate(),Ab.animate({center:ha.world().visibleBounds().center(),duration:200})):lb.openInWindow({targetObject:ha.halo.target});ha.halo.remove();sc.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},
{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34472,end:35389})})(Ta.HaloItem);
(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("EditHaloItem")&&"function"===typeof na.EditHaloItem?na.EditHaloItem:na.EditHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){var ha=this;(H=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Ga){return Ga.target==ha.halo.target}))?(H=H.getWindow(),
H.bringToFront(),H.minimized=!1,H.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],na,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:35391,end:36171})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("RotateHaloItem")&&"function"===typeof na.RotateHaloItem?na.RotateHaloItem:na.RotateHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(gb,aa,[{key:Symbol.for("lively-instance-initialize"),value:function(H){Pb._get(Object.getPrototypeOf(gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(H){this.setProperty("angle",H)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(H){this.setProperty("scaleGauge",H)}},{key:"initRotation",
get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(H){this.setProperty("initRotation",H)}},{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target;return this.scaleGauge?H.scale.toFixed(4).toString():Ta.num.toDegrees(H.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(H){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=H;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,
this)}},{key:"initScale",value:function(H){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=H.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(H){this.scaleGauge=null;H=this.initRotation+(H-this.angle);H=Ta.num.toRadians(Ta.num.detent(Ta.num.toDegrees(H),10,45));this.halo.target.rotation=H;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(H){var ha=this.scaleGauge,Ga=this.halo;ha||(ha=
this.scaleGauge=H.scaleBy(1/Ga.target.scale));this.angle=H.theta();this.initRotation=Ga.target.rotation;Ga.target.scale=Ta.num.detent(H.dist(Ta.pt(0,0))/ha.dist(Ta.pt(0,0)),.1,.5);Ga.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(H){this.styleClasses=
["fas",H?"fa-search-plus":"fa-redo"];this.tooltip=H?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(H){this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.initScale(H.position.subPt(this.halo.target.globalPosition)):this.init(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(H){this.globalPosition=
H.position.addPt(Ta.pt(-10,-10));this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.updateScale(H.position.subPt(this.halo.target.globalPosition)):this.update(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(H){this.adaptAppearance(H.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(H){this.adaptAppearance(H.isShiftDown())}},{key:"onKeyUp",value:function(H){this.adaptAppearance(H.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:36173,end:39650})})(Ta.HaloItem);Ta.nameNumberRe=/(.+)([0-9]+)$/;(function(aa){var na=
lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("ComponentHaloItem")&&"function"===typeof na.ComponentHaloItem?na.ComponentHaloItem:na.ComponentHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"updateComponentIndicator",value:function(){var H=this.world(),ha=this.halo.target;this.halo.remove();H.showHaloFor(ha)}},{key:"checkForDuplicateNamesInHierarchy",value:function(){var H=
this,ha,Ga,lb,Sb,Ab,sc,Fc,Fd,Ee,Cd,ce,je;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){switch(Fe.nextAddress){case 1:ha=H.halo.target;Ga=H.world();lb=[];ha.withAllSubmorphsDoExcluding(function(Pc){Pc!=ha&&lb.push(Pc)},function(Pc){return Pc.master&&Pc!=ha});Sb=Ta.arr.groupBy(lb,function(Pc){return Pc.name});Ab={fontWeight:"normal",fontSize:16};if(!Object.values(Sb).find(function(Pc){return 1<Pc.length})){Fe.jumpTo(2);break}sc=Ta.arr.sum(Object.values(Sb).filter(function(Pc){return 1<
Pc.length}).map(function(Pc){return Pc.length}));return Fe.yield(Ga.confirm(["Ambigous Names in Submorph Hierarchy  ",{}].concat($jscomp.arrayFromIterable(Ta.Icon.textAttribute("exclamation-triangle",{fontColor:Ta.Color.rgb(230,126,34),fontSize:30,lineHeight:"40px"})),["\nThe morph you are about to turn into a component has "+sc+" morphs within its submorph hierarchy, that have ambigous names. This can lead to incorrect applications of style properties when you create derived instances from this component.\n\n",
Object.assign({},Ab,{textAlign:"left"}),"Usually ambigous names are caused if your component is in some kind of intermittent state, where it already displays an example state or code has run that automatically created interface elements. This can be fixed by resetting the submorphs of this morph, usually by implementing a ",Object.assign({},Ab,{textAlign:"left",fontStyle:"italic"}),"reset()",Object.assign({},Ab,{fontStyle:"italic",fontFamily:"IBM Plex Mono"}),' routine you can invoke to put the morph into some kind of "neutral" state. Alternatively you can go ahead and rename the duplicate morphs to have proper unique names. If you have a hard time giving the conflicting morphs appropriate names, this can be an indication that the component you are declaring is too large, and you need to decompose your component into subcomponents further.',
Object.assign({},Ab,{textAlign:"left",fontStyle:"italic"})]),{width:600,confirmLabel:"PROCEED TO RENAME",rejectLabel:"CANCEL",align:"left"}),3);case 3:if(Fc=Fe.yieldResult,!Fc)return Fe.return();case 2:Ee=Fe.forIn(Sb);case 4:if(null==(Fd=Ee.getNext())){Fe.jumpTo(6);break}if(2>Sb[Fd].length){Fe.jumpTo(4);break}Cd=Sb[Fd];case 7:if(!(1<Cd.length)){Fe.jumpTo(4);break}ce=Cd[0];Ta.show(ce,!0);return Fe.yield(Ga.prompt(["Name Collision\n",{},"The name of\n",Ab,ce.toString(),Object.assign({},Ab,{fontStyle:"italic",
fontWeight:"bold"}),"\nis not unique within the submorph hierachy of\n",Object.assign({},Ab),ha.name,Object.assign({},Ab,{fontStyle:"italic",fontWeight:"bold"}),"\nThere "+(2<Cd.length?"are "+(Cd.length-1)+" other morphs":"is one other morph")+" with the exact same name located in this component.",Ab," Duplicate names can cause errors when applying styles to derived morphs of this master component, so it is essential that there is no name ambiguity. Please enter a new name for this or the other conflicting morphs:",
Ab],{input:ce.name,lineWrapping:!0,width:500,fontSize:12,rejectLabel:"IGNORE",confirmLabel:"RENAME",errorMessage:"Provided name is not unique",validate:function(Pc){return!Object.keys(Sb).includes(Pc)}}),9);case 9:je=Fe.yieldResult;Ta.signal(Ga,"hideMarkers");je&&(ce.name=je);if(je in Sb){Fe.jumpTo(7);break}else if(!je){Cd=Ta.arr.rotate(Cd);Fe.jumpTo(7);break}Ta.arr.remove(Cd,ce);Fe.jumpTo(7);break;case 6:return Fe.return(!0)}})}},{key:"onMouseDown",value:function(){var H=this,ha,Ga,lb,Sb,Ab,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fc){switch(Fc.nextAddress){case 1:ha=
H.halo.target;Ga=!ha.isComponent;lb=$world.getAllNamed(ha.name).length;if(!(Ga&&1<lb)){Fc.jumpTo(2);break}return Fc.yield($world.prompt(["Name Conflict\n",{},"The morph's name you are about to turn into a component is already used by "+(lb-1)+" other morph"+(2<lb?"s":"")+". Please enter a ",{fontWeight:"normal"},"unique identifier",{fontStyle:"italic"}," for this component within this project.",{fontWeight:"normal",fontSize:16}],{input:ha.name,lineWrapping:!0,width:400,errorMessage:"Identifier not unique",
validate:function(Fd){return 0==$world.getAllNamed(Fd).length}}),3);case 3:Sb=Fc.yieldResult;if(!Sb)return Fc.return();ha.name=Sb;case 2:Ab=ha;if(!(sc=Ga)){Fc.jumpTo(4);break}return Fc.yield(H.checkForDuplicateNamesInHierarchy(),5);case 5:sc=Fc.yieldResult;case 4:Ab.isComponent=sc,Ga?Ta.arr.pushIfNotIncluded(ha.world().localComponents,ha):Ta.arr.remove(ha.world().localComponents,ha),H.world()?H.updateComponentIndicator():ha.world().showHaloFor(ha),Fc.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:39691,end:45760})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("CopyHaloItem")&&"function"===typeof na.CopyHaloItem?na.CopyHaloItem:na.CopyHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"init",value:function(H){function ha(Fd,Ee){return Ee.match(Ta.nameNumberRe)?
Ee.replace(Ta.nameNumberRe,function(Cd,ce,je){je||(je="0");for(Cd=Number(je);Fd.get(ce+ ++Cd););return ce+Cd}):Ee+"1"}var Ga=this.halo,lb=Ga.target,Sb=Ga.world(),Ab=lb instanceof Ta.MultiSelectionTarget;Ga.remove();Ta.connect(H,"update",this,"update");if(Ab){var sc=lb.selectedMorphs.map(function(Fd){return Sb.addMorph(Fd.copy())});Ab=sc.map(function(Fd){Fd.name=ha(lb,Fd.name);return Fd.position});sc[0].undoStart("copy-halo");Sb.addMorph(Ga);Ga.refocus(sc);H.grab(Ga.target);Ga.target.onGrab({halo:Ga,
hand:H,isShiftDown:function(){return!1}});Ab.forEach(function(Fd,Ee){return sc[Ee].globalPosition=Fd});Ga.alignWithTarget()}else{Ab=lb.globalPosition;var Fc=lb.copy();lb.isComponent&&(Fc.isComponent=!1,Fc.withAllSubmorphsDoExcluding(function(Fd){Fd!=Fc&&Fd.master||delete Fd._parametrizedProps},function(Fd){return Fd.master&&Fd!=Fc}),Fc.master=lb);Fc.name=ha(lb,lb.name);Sb.addMorph(Fc);Fc.globalPosition=Ab;Fc.undoStart("copy-halo");H.grab(Fc);Sb.addMorph(Ga);Ga.visible=!1}}},{key:"stop",value:function(H){var ha=
this.halo,Ga=$jscomp.makeIterator(H.grabbedMorphs).next().value,lb=H.findDropTarget(H.globalPosition,[ha.target],function(Ab){return!Ab.isHaloItem&&!Ab.ownerChain().some(function(sc){return sc.isHaloItem})}),Sb=ha.target.undoInProgress;Ta.disconnect(H,"update",this,"update");Sb.addTarget(lb);H.dropMorphsOn(lb);ha.target.undoStop("copy-halo");ha.remove();H.world().showHaloFor(Ga)}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H.hand)}},{key:"update",
value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var H=this,ha,Ga,lb,Sb,Ab,sc,Fc,Fd,Ee,Cd,ce,je,Fe,Pc,fe;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ie){switch(ie.nextAddress){case 1:ha=H;Ga=ha.halo;if(Ga.nameHalo().nameHolders.find(function(ef){return ef.nameHolder===$world.focusedMorph}))return ie.return();lb=Ga.target;Sb=Ga.world();Ab=lb instanceof Ta.MultiSelectionTarget;sc=lb.globalBounds().topLeft();Fc=Ab?lb.selectedMorphs:[lb];Fd=[];Ee=
'<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Ga.remove();ie.setCatchFinallyBlocks(2);Cd=$jscomp.makeIterator(Fc);ce=Cd.next();case 4:if(ce.done)return Ee+="</body></html>",Pc=JSON.stringify(Fd),ie.yield(H.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:Ee},{type:"application/morphic",data:Pc}]),8);je=ce.value;return ie.yield(Ta.createMorphSnapshot(je,
{addPreview:!1,testLoad:!1}),7);case 7:Fe=ie.yieldResult;Fe.copyMeta={offset:je.worldPoint(Ta.pt(0,0)).subPt(sc)};Fd.push(Fe);Ee+=je.renderPreview();ce=Cd.next();ie.jumpTo(4);break;case 8:ie.leaveTryBlock(3);break;case 2:return fe=ie.enterCatchBlock(),Sb.logError(fe),ie.return();case 3:Sb.addMorph(Ga),Ga.refocus(Fc),Ga.setStatusMessage("copied"),ie.jumpToEnd()}})}},{key:"onMouseUp",value:function(H){var ha=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){H.stop();return Ga.yield(ha.copyToClipBoard(),
0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:45762,end:49796})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("OriginHaloItem")&&"function"===typeof na.OriginHaloItem?na.OriginHaloItem:na.OriginHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"fill",get:function(){return Ta.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Ta.pt(15,
15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(H){var ha=this.halo,Ga=ha.target.origin,lb=ha.target.worldPoint(Ga);H=ha.target.localize(lb.addPt(H)).subPt(ha.target.scroll).subPt(Ga);ha.target.adjustOrigin(ha.target.origin.addPt(H))}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},
{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ta.componentAccent:Ta.haloBlue}}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49798,end:51459})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("ResizeHandle")&&"function"===typeof na.ResizeHandle?na.ResizeHandle:na.ResizeHandle=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target.extent,
ha=H.y;return H.x.toFixed(1)+"x"+ha.toFixed(1)}},{key:"positionInHalo",value:function(){var H=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ta.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),H=H.insetBy(-4));return H.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(H){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(H){this.init(H.position,H.isShiftDown())}},{key:"onDragEnd",value:function(H){this.stop(H.isShiftDown())}},{key:"onDrag",value:function(H){this.update(H.position,H.isShiftDown(),H.isAltDown(),H.isCtrlDown());this.focus()}},{key:"init",value:function(H,ha){ha=void 0===ha?!1:ha;var Ga=this.halo.target,lb=Ga.origin,Sb=Ga.position;Ga=Ga.extent;this.startPos=H;this.startBounds=Sb.subPt(lb).extent(Ga);this.startOrigin=
this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();H=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ta.num.toRadians(H%45);this.halo.toggleDiagonal(ha,this.corner)}},{key:"update",value:function(H,ha,Ga,lb){ha=void 0===ha?!1:ha;Ga=void 0===Ga?!1:Ga;lb=void 0===lb?!1:lb;var Sb=this.corner,Ab=this.tfm;H=this.startPos.subPt(H);Ab=Ab.transformDirection(Ta.pt(H.x,
H.y));Ga&&(Ab=Ab.griddedBy(Ta.pt(10,10)));this.halo.updateBoundsFor(Sb,ha,Ab,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(ha,Sb);this.updateAlignmentGuide(Ga);ha=[];Sb=Sb.toLowerCase();Sb.includes("left")&&ha.push("left");Sb.includes("top")&&ha.push("top");Sb.includes("bottom")&&ha.push("bottom");Sb.includes("right")&&ha.push("right");Ta.showAndSnapToResizeGuides(this.halo.target,ha,!0,lb,5,200)}},{key:"stop",value:function(H){H=this.halo;H.layout=this.savedLayout;H.state.activeButton=
null;H.alignWithTarget();H.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ta.removeSnapToGuidesOf(H.target)}},{key:"updateAlignmentGuide",value:function(H){var ha=this.halo.getSubmorphNamed("mesh");if(H)return H=this.halo.target.extent,H=Ta.pt(H.x%10,H.y%10),ha=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),H),this.focus(),ha;ha&&ha.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},
draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(H){0<H&&(H-=360);H=-8-(H/45).toFixed();0==H&&(H=8);return Ta.arr.zip(Ta.arr.rotate([["topLeft",function(ha){return ha.negated()}],["topCenter",function(ha){return ha.withX(0).negated()}],["topRight",function(ha){return ha.withX(0).negated()}],["rightCenter",function(ha){return Ta.pt(0,0)}],["bottomRight",function(ha){return Ta.pt(0,0)}],["bottomCenter",function(ha){return Ta.pt(0,
0)}],["bottomLeft",function(ha){return ha.withY(0).negated()}],["leftCenter",function(ha){return ha.withY(0).negated()}]],H),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(H){var ha=this;if(!H.target)return[];var Ga=H.target.getGlobalTransform().getRotation();return Ta.arr.compact(this.getResizeParts(Ga).map(function(lb){var Sb=
$jscomp.makeIterator(lb),Ab=$jscomp.makeIterator(Sb.next().value);lb=Ab.next().value;Ab.next();Ab.next();Ab=$jscomp.makeIterator(Sb.next().value);Sb=Ab.next().value;Ab=Ab.next().value;return ha.for(H,lb,Ab,Sb)})).map(function(lb){return lb.alignInHalo()})}},{key:"for",value:function(H,ha,Ga,lb){var Sb="Resize "+ha;H=H.getSubmorphNamed(Sb)||new this({name:Sb,halo:H,corner:ha,tooltip:"Resize "+ha,extent:Ta.pt(10,10),borderWidth:1,borderRadius:0,borderColor:H.target.isComponent?Ta.componentAccent:Ta.haloBlue,
fill:Ta.Color.white});return Object.assign(H,{nativeCursor:lb,location:Ga})}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:51518,end:56816})})(Ta.HaloItem);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("MenuHaloItem")&&"function"===
typeof na.MenuHaloItem?na.MenuHaloItem:na.MenuHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){var ha=this,Ga,lb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sb){if(1==Sb.nextAddress)return Ga=ha.halo.target,ha.halo.remove(),Sb.yield(Ga.menuItems(),2);lb=Sb.yieldResult;Ga.world().openMenu(lb).hasFixedPosition=ha.halo.hasFixedPosition;Sb.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:56818,end:57340})})(Ta.HaloItem);var bb=ta("M",function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),gb=na.hasOwnProperty("MorphHighlighter")&&"function"===typeof na.MorphHighlighter?na.MorphHighlighter:na.MorphHighlighter=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),
this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&
this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(H){this.layoutHalo&&this.layoutHalo.handleDrop(H)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ta.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Ta.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(H){var ha=this;this.setProperty("highlightedSides",H);this.submorphs=H.map(function(Ga){return{type:"ellipse",
isHaloItem:!0,fill:Ta.Color.orange,center:ha.innerBounds()[Ga]()}});this.addMorph({type:"label",name:"name tag",padding:Ta.Rectangle.inset(5,5,5,5),fontColor:Ta.Color.white,fill:Ta.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(H){H=void 0===H?$world:H;var ha=H._morphHighlighters,Ga;for(Ga in ha)ha[Ga].remove();
delete H._morphHighlighters}},{key:"for",value:function(H,ha,Ga,lb){Ga=void 0===Ga?!1:Ga;lb=void 0===lb?[]:lb;var Sb=H._morphHighlighters=H._morphHighlighters||{};Ta.properties.forEachOwn(Sb,function(Ab,sc){return sc.alignWithHalo()});if(!ha||ha.ownerChain().find(function(Ab){return Ab.isHaloItem}))return null;Sb[ha.id]=Sb[ha.id]||new this({targetId:ha.id,halo:H,showLayout:Ga});H.addMorph(Sb[ha.id]);Sb[ha.id].highlightedSides=lb;return Sb[ha.id]}},{key:"interceptDrop",value:function(H,ha,Ga){(H=H._morphHighlighters=
H._morphHighlighters||{},H[ha.id])&&H[ha.id].handleDrop(Ga)}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:57529,end:61140})}(Ta.Morph));Ta.MorphHighlighter=bb;Ta.MorphHighlighter=bb;Ta.MorphHighlighter=bb;var Bc=ta("I",function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
gb=na.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof na.InteractiveMorphSelector?na.InteractiveMorphSelector:na.InteractiveMorphSelector=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:Symbol.for("lively-instance-initialize"),value:function(H,ha,Ga){H=void 0===H?$world:H;this.controllingMorph=void 0===ha?null:ha;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=
H;this.filterFn=Ga;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var H=Ta.promise.deferred();H.promise.resolve=H.resolve;this.whenDone=H.promise;this.selectorMorph=Ta.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ta.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ta.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Ta.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();
this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var H=this.world.firstHand.globalPosition;this.selectorMorph.center=H;this.selectorMorph.focus();var ha=this.selectorMorph.morphBeneath(H),Ga,lb=this.possibleTarget,Sb=this.controllingMorph,Ab=this.filterFn,sc=this.world,Fc=this.morphHighlighter;for(Fc==ha?ha=Fc.morphBeneath(H):ha&&ha.isEpiMorph&&(ha=ha.morphBeneath(H));ha&&(Ga=[ha].concat($jscomp.arrayFromIterable(ha.ownerChain())).find(function(Fd){return!Fd.visible}));)ha=
Ga=Ga.morphBeneath(H);if(ha&&Ab&&!Ab(ha))for(;ha&&![ha].concat($jscomp.arrayFromIterable(ha.ownerChain())).find(Ab);)ha=ha.morphBeneath(H);!ha||ha==lb||Sb&&ha.ownerChain().includes(Sb.getWindow())||(Fc&&Fc.deactivate(),(this.possibleTarget=lb=ha)&&!lb.isWorld&&(H=this.morphHighlighter=Ta.MorphHighlighter.for(sc,ha))&&H.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ta.MorphHighlighter.removeHighlighters(this.world);
Ta.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(H,ha,Ga){H=new this(H,ha,Ga);H.selectNewTarget();return H.whenDone}}],na,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:61149,end:63904})}(void 0));Ta.InteractiveMorphSelector=Bc;Ta.InteractiveMorphSelector=Bc;Ta.InteractiveMorphSelector=Bc;Ta.default=nb;var uc=lively.FreezerRuntime.recorderFor("lively.ide/index.js");uc.info="import via sub modules";uc.info="import via sub modules";uc.info="import via sub modules";nb=ta("v",{});uc.valueWidgets=nb;uc.valueWidgets=nb;uc.valueWidgets=nb;var Sa=ta("p",{});uc.popovers=Sa;uc.popovers=Sa;uc.popovers=
Sa;var Da=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Da.Morph=De;Da.VerticalLayout=Ba;Da.StyleSheet=Ed;Da.Icon=ne;Da.CustomLayout=xa;Da.Color=Tb;Da.rect=Ec;Da.pt=tb;Da.connect=Qb;Da.Path=fd;Da.duration=300;uc=ta("P",function(aa){var na=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),gb=na.hasOwnProperty("Popover")&&"function"===typeof na.Popover?na.Popover:na.Popover=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(gb,aa,[{key:"relayout",value:function(H){var ha=this.get("body"),Ga=this.get("arrow"),lb=this.get("close button");Ga=Ga.height;H?(ha.animate({topCenter:Da.pt(0,Ga),duration:200}),lb.animate({topRight:ha.topRight.addXY(8,-8),duration:200})):(ha.topCenter=Da.pt(0,Ga),lb.topRight=ha.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},
hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Da.pt(200,200),fill:Da.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(H){var ha=this;this.get("body").addMorph(H);this.whenRendered().then(function(){return ha.relayout()})}},submorphs:{initialize:function(){var H=
this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Da.pt(0,0),borderColor:Da.Color.transparent,vertices:[Da.pt(-10,0),Da.pt(0,-15),Da.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(Da.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:Da.pt(16,16),borderColor:Da.Color.transparent}];var ha=$jscomp.makeIterator(this.submorphs);ha.next();var Ga=ha.next().value;ha=ha.next().value;Da.connect(ha,"fire",this,"close");Da.connect(Ga,"extent",
this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return H.animated=!0},1E3)}}}}}],na,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(Da.Morph));Da.Popover=uc;Da.Popover=uc;Da.Popover=uc;var Ya=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");
Ya.Morph=De;Ya.TilingLayout=Qa;Ya.morph=Jb;Ya.Label=ud;Ya.HorizontalLayout=vc;Ya.Icon=ne;Ya.InputLine=wb;Ya.config=fc;Ya.connect=Qb;Ya.signal=fb;Ya.Color=Tb;Ya.LinearGradient=wc;Ya.pt=tb;Ya.rect=Ec;Ya.num=pc;Ya.obj=rd;Ya.popovers=Sa;Ya.ValueScrubber=$a;Ya.Popover=uc;(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof na.ContextSensitiveWidget?na.ContextSensitiveWidget:na.ContextSensitiveWidget=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Ya.Color.transparent},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Ya.Color.white:Ya.Color.black}},layout:{initialize:function(){this.layout=new Ya.HorizontalLayout}},
context:{serialize:!1}}}}],na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2441})})(Ya.Morph);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("ShortcutWidget")&&"function"===typeof na.ShortcutWidget?na.ShortcutWidget:
na.ShortcutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){H.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],
set:function(H){this.setProperty("title",H);this.getSubmorphNamed("valueString").value=H}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(ha){return ha.fontColor=H})}},submorphs:{initialize:function(){this.submorphs=[Ya.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:Ya.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Ya.rect(0,
0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2443,end:3793})})(Ya.ContextSensitiveWidget);Sa=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("LayoutWidget")&&
"function"===typeof na.LayoutWidget?na.LayoutWidget:na.LayoutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var H=this,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ha=new Ya.popovers.LayoutPopover({hasFixedPosition:!!H.ownerChain().find(function(lb){return lb.hasFixedPosition}),
container:H.context}),Ga.yield(ha.fadeIntoWorld(H.globalBounds().center()),2);Ya.connect(ha,"layoutChanged",H,"layoutChanged");Ya.signal(H,"openWidget",ha);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],na,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3802,end:4623})}(Ya.ShortcutWidget);Ya.LayoutWidget=Sa;Ya.LayoutWidget=Sa;Ya.LayoutWidget=Sa;Sa=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("ColorWidget")&&"function"===typeof na.ColorWidget?na.ColorWidget:na.ColorWidget=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"relayout",value:function(H){H?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var H=this.color;if(2*H.stops.length==this.submorphs.length-3){var ha;for(ha in this.color.stops){var Ga=
H.stops[ha];var lb=Ga.color,Sb=Ga.offset,Ab=$jscomp.makeIterator(this.submorphs[2+2*ha].submorphs).next().value;Ga=this.submorphs[3+2*ha];Ab.fill=lb;Ga.value=(100*Sb).toFixed()+"%"+(ha<H.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},
{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=Ya.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Ya.pt(15,15),fill:Ya.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Ya.pt(5,7.5),fill:Ya.Color.white,borderColor:Ya.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Ya.pt(0,0),Ya.pt(10,10)],borderColor:Ya.Color.red}]}]},
{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Ya.pt(15,15),fill:Ya.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Ya.pt(5,7.5),fill:this.color,borderColor:Ya.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Ya.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var H=
this.color,ha=[{type:"label",padding:Ya.rect(0,0,5,0),value:"linearGradient"==H.type?Ya.num.toDegrees(H.vectorAsAngle()).toFixed()+"\u00b0,":""}],Ga;for(Ga in H.stops){var lb=H.stops[Ga],Sb=lb.color;lb=lb.offset;ha.push({extent:Ya.pt(this.fontSize,this.fontSize),fill:Ya.Color.transparent,layout:new Ya.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:Sb}]});ha.push({type:"label",padding:Ya.rect(0,0,5,0),value:(100*lb).toFixed()+"%"+(Ga<H.stops.length-1?",":"")})}return ha}},
{key:"onMouseDown",value:function(H){this.openFillEditor()}},{key:"update",value:function(H){this.color=H}},{key:"openFillEditor",value:function(){var H=this,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ha=new Ya.popovers.FillPopover({hasFixedPosition:!!H.ownerChain().find(function(lb){return lb.hasFixedPosition}),handleMorph:H.context,fillValue:H.color,title:"Fill Control",gradientEnabled:H.gradientEnabled}),Ga.yield(ha.fadeIntoWorld(H.globalBounds().center()),
2);Ya.connect(ha,"fillValue",H,"update");Ya.signal(H,"openWidget",ha);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Ya.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:Ya.Color.white},nonSelectionFontColor:{defaultValue:Ya.Color.black},color:{defaultValue:Ya.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],
set:function(H){this.getProperty("isSelected")!=H&&(this.getSubmorphNamed("valueString").fontColor=H?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",H))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){Ya.connect(this,"color",this,"relayout",{converter:function(H,ha){return(ha&&ha.isColor)!=(H&&H.isColor)}});this.relayout(!0)}}}}}],na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4687,end:10140})}(Ya.ContextSensitiveWidget);Ya.ColorWidget=Sa;Ya.ColorWidget=Sa;Ya.ColorWidget=Sa;Sa=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("BooleanWidget")&&"function"===typeof na.BooleanWidget?na.BooleanWidget:na.BooleanWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){this.boolean=!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:Ya.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(H){this.setProperty("boolean",H);this.value=Ya.obj.safeToString(H);this.fontColor=this.boolean?Ya.Color.green:Ya.Color.red}}}}}],na,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10149,end:10634})}(Ya.Label);Ya.BooleanWidget=Sa;Ya.BooleanWidget=Sa;Ya.BooleanWidget=Sa;Sa=ta("N",function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("NumberWidget")&&"function"===typeof na.NumberWidget?na.NumberWidget:na.NumberWidget=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){Pb._get(Object.getPrototypeOf(gb.prototype),"onMouseDown",this).call(this,H);"up"==H.targetMorph.name&&this.increment();"down"==H.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Ya.obj.dissoc(Pb._get(Object.getPrototypeOf(gb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(H,
ha){ha=void 0===ha?!0:ha;this.setProperty("number",ha?H/this.scaleFactor:H);Ya.signal(this,"number",this.number);this.relayout(ha)}},{key:"relayoutButtons",value:function(){var H=this.getSubmorphNamed("up"),ha=this.getSubmorphNamed("down");this.getSubmorphNamed("value");H.height=ha.height=(this.height-2)/2;H.width=ha.width=20}},{key:"onChange",value:function(H){Pb._get(Object.getPrototypeOf(gb.prototype),"onChange",this).call(this,H);"extent"!=H.prop||this.autofit||this.relayout()}},{key:"relayout",
value:function(H){var ha=this.getSubmorphNamed("value");ha&&(this.autofit?(H||(ha.value=this.number*this.scaleFactor),ha.fit(),this.height=ha.height,this.width=ha.width+20):H||(ha.width=this.width-20),this.relayoutButtons(),H||(ha.value=Ya.num.roundTo(this.number*this.scaleFactor,1),ha.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,ha.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,ha.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||
this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(H){this.setProperty("autofit",H);this.getSubmorphNamed("value").scaleToBounds=!H}},
number:{defaultValue:0,after:["unit","autofit"],set:function(H){this.setProperty("number",H);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(H){this.setProperty("floatingPoint",H);this.get("value").floatingPoint=H},get:function(){var H=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&H&&!!H[1]}},padding:{isStyleProp:!0,defaultValue:Ya.rect(5,3,0,0),after:["submorphs"],
set:function(H){this.setProperty("padding",H);this.getSubmorphNamed("value").padding=H}},extent:{defaultValue:Ya.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(H){this.get("value").baseFactor=H}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,
defaultValue:Ya.Color.rgbHex("#0086b3"),set:function(H){this.setProperty("fontColor",H)}},isSelected:{set:function(H){this.getProperty("isSelected")!=H&&(H?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",H))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(H){this.setProperty("fontFamily",H)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(H){this.setProperty("fontSize",
H)}},layout:{initialize:function(){this.layout=new Ya.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var H=this;this.submorphs=[new Ya.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),Ya.Icon.makeLabel("sort-up",{name:"up"}),Ya.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];Ya.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return H.relayout()})}}}}}],
na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10643,end:16590})}(Ya.Morph));Ya.NumberWidget=Sa;Ya.NumberWidget=Sa;Ya.NumberWidget=Sa;uc=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("ShadowWidget")&&"function"===typeof na.ShadowWidget?
na.ShadowWidget:na.ShadowWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ha=new Ya.popovers.ShadowPopover({hasFixedPosition:!!H.ownerChain().find(function(lb){return lb.hasFixedPosition}),shadowValue:H.shadowValue}),
Ga.yield(ha.fadeIntoWorld(H.globalBounds().center()),2);Ya.connect(ha,"shadowValue",H,"shadowValue");Ya.connect(H,"shadowValue",H,"update");Ya.signal(H,"openWidget",ha);Ga.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},
{key:"updateShadowDisplay",value:function(){var H=this.shadowValue,ha=H.blur,Ga=H.spread,lb=H.distance;H=H.color;var Sb=$jscomp.makeIterator(this.submorphs),Ab=Sb.next().value,sc=Sb.next().value;sc=$jscomp.makeIterator(sc.submorphs).next().value;Sb=Sb.next().value;Ab.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";sc.fill=H;Sb.value=", "+ha+"px, "+lb+"px, "+Ga+"px)"}},{key:"initShadowDisplay",value:function(){var H=this.shadowValue,ha=H.blur,Ga=H.spread,lb=H.distance;H=H.color;this.submorphs=
[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Ya.morph({fill:Ya.Color.transparent,extent:Ya.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Ya.pt(this.fontSize,this.fontSize),position:Ya.pt(2,2),fill:H,borderColor:Ya.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+ha+"px, "+lb+"px, "+Ga+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},
{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(H){this.setProperty("shadowValue",H);this.renderShadowDisplay()}},fill:{defaultValue:Ya.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(ha){return ha.fontColor=H})}},isSelected:{defaultValue:!1,set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Ya.Color.white:Ya.Color.black}},
layout:{initialize:function(){this.layout=new Ya.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16599,end:19722})}(Ya.Morph);Ya.ShadowWidget=uc;Ya.ShadowWidget=uc;Ya.ShadowWidget=uc;uc=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),
gb=na.hasOwnProperty("PointWidget")&&"function"===typeof na.PointWidget?na.PointWidget:na.PointWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ha=new Ya.popovers.PointPopover({pointValue:H.pointValue,
hasFixedPosition:!!H.ownerChain().find(function(lb){return lb.hasFixedPosition})}),Ga.yield(ha.fadeIntoWorld(H.globalBounds().center()),2);Ya.connect(ha,"pointValue",H,"pointValue");Ya.signal(H,"openWidget",ha);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,
defaultValue:Ya.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Ya.Color.black},fontFamily:{defaultValue:Ya.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(H){var ha=Ya.Color.rgbHex("#0086b3");this.setProperty("pointValue",H);this.textAndAttributes=["pt(",null,H.x.toFixed(),{fontColor:ha},",",{},H.y.toFixed(),{fontColor:ha},")",null];this.fixedHeight=this.fixedWidth=
!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19731,end:21375})}(Ya.Label);Ya.PointWidget=uc;Ya.PointWidget=uc;Ya.PointWidget=uc;uc=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),
gb=na.hasOwnProperty("PaddingWidget")&&"function"===typeof na.PaddingWidget?na.PaddingWidget:na.PaddingWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ha=new Ya.popovers.RectanglePopover({hasFixedPosition:!!H.ownerChain().find(function(lb){return lb.hasFixedPosition}),
rectangle:H.rectangle}),ha.relayout(),Ga.yield(ha.fadeIntoWorld(H.globalBounds().center()),2);Ya.connect(ha,"rectangle",H,"rectangle");Ya.signal(H,"openWidget",ha);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Ya.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",
H);this.fontColor=H?Ya.Color.white:Ya.Color.black}},rectangle:{defaultValue:Ya.rect(0),set:function(H){this.setProperty("rectangle",H);this.value=Ya.obj.safeToString(H)}}}}}],na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21384,end:22445})}(Ya.Label);Ya.PaddingWidget=uc;Ya.PaddingWidget=
uc;Ya.PaddingWidget=uc;uc=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("IconWidget")&&"function"===typeof na.IconWidget?na.IconWidget:na.IconWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==
Ga.nextAddress)return ha=new Ya.popovers.IconPopover({hasFixedPosition:!!H.ownerChain().find(function(lb){return lb.hasFixedPosition})}),Ga.yield(ha.fadeIntoWorld(H.globalBounds().center()),2);Ya.connect(ha,"select",H,"iconValue",{converter:function(lb){return lb&&Ya.Icon.makeLabel(lb).value},varMapping:{Icon:Ya.Icon}});Ya.signal(H,"openWidget",ha);Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Ya.Color.gray.darker()},
fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},set:function(H){this.value=H||"No Icon"}}}}}],na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22454,end:23385})}(Ya.Label);Ya.IconWidget=uc;Ya.IconWidget=
uc;Ya.IconWidget=uc;uc=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),gb=na.hasOwnProperty("StringWidget")&&"function"===typeof na.StringWidget?na.StringWidget:na.StringWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"truncate",value:function(H){return 200<H.length?H.slice(0,20)+"...":H}},{key:"onFocus",value:function(H){var ha=this,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==
lb.nextAddress)return Pb._get(Object.getPrototypeOf(gb.prototype),"onFocus",ha).call(ha,H),ha.readOnly?lb.return():ha.stringTooLong?lb.yield(ha.world().editPrompt("edit string",{requester:ha,input:ha.stringValue}),2):(ha.borderColor=Ya.Color.white.withA(.9),ha.textString=ha.stringValue,lb.return());Ga=lb.yieldResult;if("string"===typeof Ga)ha.onInput(Ga);lb.jumpToEnd()})}},{key:"onBlur",value:function(H){Pb._get(Object.getPrototypeOf(gb.prototype),"onBlur",this).call(this,H);this.readOnly||(this.borderColor=
Ya.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(H){this.owner.focus();Ya.signal(this,"inputAccepted",H);this.stringValue=H}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Ya.Color.transparent},fontColor:{defaultValue:Ya.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Ya.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},
borderWidth:{defaultValue:1},padding:{defaultValue:Ya.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(H){this.setProperty("stringValue",H);this.textString=this.truncate(H);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Ya.Color.white:Ya.Color.blue}}}}}],
na,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23394,end:25345})}(Ya.InputLine);Ya.StringWidget=uc;Ya.StringWidget=uc;Ya.StringWidget=uc;Ya.valueWidgets=nb;Object.assign(Ya.valueWidgets,{NumberWidget:Ya.NumberWidget,StringWidget:Ya.StringWidget,IconWidget:Ya.IconWidget,PaddingWidget:Ya.PaddingWidget,
ShadowWidget:Ya.ShadowWidget,PointWidget:Ya.PointWidget,BooleanWidget:Ya.BooleanWidget,LayoutWidget:Ya.LayoutWidget,ColorWidget:Ya.ColorWidget});var Na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Na.Ellipse=ib;Na.Icon=ne;Na.Morph=De;Na.Path=zd;Na.Text=ac;Na.HorizontalLayout=vc;Na.VerticalLayout=Ba;Na.morph=Jb;Na.Color=Tb;Na.pt=tb;Na.rect=Ec;Na.Rectangle=zc;Na.arr=cb;Na.connect=Qb;Na.disconnect=ld;Na.LabeledCheckBox=ab;Na.DropDownSelector=U;Na.Button=ua;Na.Menu=M;Na.NumberWidget=Sa;
Na.InteractiveMorphSelector=Bc;Na.easings=Mc;(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),gb=na.hasOwnProperty("AxisHalo")&&"function"===typeof na.AxisHalo?na.AxisHalo:na.AxisHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ha=H.halo;H=H.targetAxis;Pb._get(Object.getPrototypeOf(gb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,{fill:Na.Color.transparent,halo:ha,targetAxis:H,container:ha.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(H){this._forceMenuHidden=H;this.axisMenu.visible=!H}},
{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&
!0}},{key:"onHoverOut",value:function(H){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var H=this,ha=this,Ga=this.proportionViewer();return this.halo.addGuide(new Na.Morph({nativeCursor:this.getResizeCursor(),fill:Na.Color.transparent,submorphs:[this.devider(),Ga],alignWithTarget:function(){this.setBounds(ha.getProportionSliderBounds(this))},onDragStart:function(){Ga.visible=!0},onDrag:function(lb){H.adjustStretch(H.getDelta(lb));
H.halo.alignWithTarget()},onDragEnd:function(){Ga.visible=!1}}))}},{key:"devider",value:function(){return new Na.Morph({visible:!this.lastAxis,fill:Na.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var H=this,ha=this,Ga=this.minSpaceVisualizer(),lb=this.minViewer();return this.halo.addGuide(new Na.Ellipse({nativeCursor:this.getResizeCursor(),fill:Na.Color.green,extent:Na.pt(10,10),visible:!1,submorphs:[Ga,lb],becomesActiveOnHover:!0,
alignWithTarget:function(){this.position=ha.getMinSliderPosition()},requestToShow:function(){this.visible=!ha.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){ha.forceMenuHidden=!0;lb.visible=!0;this.active=Ga.visible=!0},onDrag:function(Sb){H.targetAxis.min+=-H.getDelta(Sb);H.halo.alignWithTarget()},onDragEnd:function(){ha.forceMenuHidden=!1;lb.visible=!1;this.active=Ga.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},
{key:"minViewer",value:function(){var H=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+H.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new Na.Path(Object.assign({position:Na.pt(-1,-1),borderStyle:"dashed",borderColor:Na.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var H=this,ha=this.minSpaceBorder();return this.halo.addGuide(new Na.Morph({fill:Na.Color.green.withA(.1),
visible:!1,isHaloItem:!0,submorphs:[ha],alignWithTarget:function(){this.extent=H.getMinSpaceExtent();this.topLeft=Na.pt(5,5)}}))}},{key:"axisMenu",value:function(){var H=this.lockButton(),ha=this.menuButton(),Ga=this;return new Na.Morph({layout:this.getMenuLayout(),submorphs:[H,ha],fill:Na.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Ga.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var H=this;return this.halo.addGuide(new Na.Morph({fill:Na.Color.transparent,
extent:Na.pt(25,25),submorphs:[{center:Na.pt(12.5,12.5),fill:Na.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){H.targetAxis.fixed?(this.fontColor=Na.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=Na.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){H.targetAxis.fixed=!H.targetAxis.fixed;H.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var H=this,
ha=this;return new Na.Morph({fill:Na.Color.transparent,extent:Na.pt(25,25),submorphs:[{fill:Na.Color.transparent,styleClasses:["fa","fa-cog"],center:Na.pt(12.5,12.5)}],onMouseDown:function(Ga){ha.forceMenuVisible=!0;this.addMorph(Ga.state.menu=new Na.Menu({position:Na.pt(15,15),items:[["Remove "+ha.subject,function(){H.targetAxis.remove();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+ha.subject+" before",function(){H.targetAxis.addBefore();H.halo.initGuides();H.halo.alignWithTarget()}],
["Insert "+ha.subject+" after",function(){H.targetAxis.addAfter();H.halo.initGuides();H.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(H){var ha=H.position;H=H.alignWithTarget;return this.halo.addGuide(new Na.Text({styleClasses:["Halo"],padding:Na.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Na.Color.white,fill:Na.Color.black.withA(.5),position:ha,alignWithTarget:H,readOnly:!0}))}},{key:"proportionViewer",value:function(){var H=this;return this.viewer({position:this.getProportionViewerPosition(),
alignWithTarget:function(){this.textString=H.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(Na.Morph);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
gb=na.hasOwnProperty("RowHalo")&&"function"===typeof na.RowHalo?na.RowHalo:na.RowHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ha=H.row;H=H.halo;Pb._get(Object.getPrototypeOf(gb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.row(ha),halo:H})}},{key:"subject",get:function(){return"row"}},
{key:"adjustStretch",value:function(H){this.targetAxis.height+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Na.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Na.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.height?Na.pt(2,5):Na.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Na.VerticalLayout}},
{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Na.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Na.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return Na.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Na.pt(this.container.width+50,2),vertices:[Na.pt(0,1),Na.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Na.pt(40,
20)}},{key:"getProportionSliderBounds",value:function(H){return Na.pt(0,H.owner.height-5).extent(Na.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Na.pt(15,4).extent(Na.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:7981,end:9208})})(Na.AxisHalo);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),gb=na.hasOwnProperty("ColumnHalo")&&"function"===typeof na.ColumnHalo?na.ColumnHalo:na.ColumnHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ha=H.col;H=H.halo;Pb._get(Object.getPrototypeOf(gb.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.col(ha),halo:H})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(H){this.targetAxis.width+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Na.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return Na.pt(this.targetAxis.length-
10,40)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.width?Na.pt(5,3):Na.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Na.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Na.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Na.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return Na.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",
value:function(){return{extent:Na.pt(2,this.container.height+50),vertices:[Na.pt(1,0),Na.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Na.pt(20,40)}},{key:"getProportionSliderBounds",value:function(H){return Na.pt(H.owner.width-5,0).extent(Na.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Na.pt(4,15).extent(Na.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],na,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(Na.AxisHalo);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),gb=na.hasOwnProperty("CellGuide")&&"function"===typeof na.CellGuide?na.CellGuide:na.CellGuide=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return Pb(gb,aa,[{key:"menuItems",value:function(){var H=this,ha=Na.Icon.textAttribute("check-square-o"),Ga=Na.Icon.textAttribute("square-o");ha[1].textStyleClasses.push("annotation");Ga[1].textStyleClasses.push("annotation");Ga[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ga:ha)),function(){H.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?ha:Ga)),function(){H.cellGroup.resize=
!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Na.Rectangle).sides),$jscomp.arrayFromIterable((new Na.Rectangle).corners)).map(function(lb){return[[lb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(H.cellGroup.align==lb?ha:Ga),["  ",null]),function(){return H.cellGroup.align=lb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var lb=H.cellGroup.morph;lb&&(H.world().firstHand.grab(lb),H.world().firstHand.longClickGrab=!0,lb.position=Na.pt(0))}]]:
[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(Na.Morph);(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
gb=na.hasOwnProperty("LayoutHalo")&&"function"===typeof na.LayoutHalo?na.LayoutHalo:na.LayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Na.Color.orange},
borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(Na.Morph);nb=ta("G",function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),gb=na.hasOwnProperty("GridLayoutHalo")&&"function"===
typeof na.GridLayoutHalo?na.GridLayoutHalo:na.GridLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"previewDrop",value:function(H){1>H.length||(H=this.cellGuides.find(function(ha){return ha.fullContainsWorldPoint($world.firstHand.position)}),H!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=H)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(H){var ha=
this;this.currentCell&&H.whenRendered().then(function(){return ha.currentCell.cellGroup.morph=H})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var H=this.target,ha=new Na.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Na.Color.transparent,checked:H.compensateOrigin}),Ga=new Na.LabeledCheckBox({label:"Resize Submorphs",fill:Na.Color.transparent,name:"fitToCell",checked:H.fitToCell});Na.connect(ha,
"checked",H,"compensateOrigin");Na.connect(Ga,"checked",H,"fitToCell");Na.connect(ha,"checked",this,"alignWithTarget");return[ha,Ga]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Na.arr.reverse(this.guides).forEach(function(H){return H.alignWithTarget()})}},{key:"addMissingGuides",
value:function(){var H=this;Na.arr.withoutAll(this.target.cellGroups,this.guides.map(function(ha){return ha.cellGroup})).forEach(function(ha){return H.addMorph(H.cellGuide(ha))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var H=this,ha=this.addMorph({fill:Na.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Ga){ha.addMorph(H.cellGuide(Ga))});
this.cellGuides=ha.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(H){H.isHaloItem=!0;this.guides.push(H);return H}},{key:"initRowGuides",value:function(){var H=this,ha=this;this.addGuide(this.addMorph(new Na.Morph({width:25,fill:Na.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Na.pt(-5,0),alignWithTarget:function(){this.height=ha.container.height}})));Na.arr.range(0,this.target.rowCount-1).forEach(function(Ga){H.addMorph(new Na.RowHalo({row:Ga,
halo:H}))})}},{key:"initColumnGuides",value:function(){var H=this,ha=this;this.addGuide(this.addMorph(new Na.Morph({height:25,fill:Na.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:Na.pt(0,-5),alignWithTarget:function(){this.width=ha.container.width}})));Na.arr.range(0,this.target.columnCount-1).forEach(function(Ga){H.addMorph(new Na.ColumnHalo({col:Ga,halo:H}))})}},{key:"resizer",value:function(){var H=this;return this.addGuide(new Na.Morph({fill:Na.Color.transparent,
extent:Na.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(ha){H.container.resizeBy(ha.state.dragDelta);H.alignWithTarget()},alignWithTarget:function(){this.bottomRight=H.extent}}))}},{key:"cellResizer",value:function(H,ha){var Ga=this,lb="topLeft"==ha?"bottomRight":"topLeft";return new Na.Ellipse({borderWidth:1,visible:!1,borderColor:Na.Color.black,nativeCursor:"nwse-resize",removeCell:function(Sb){H.disconnect(Sb);Ga.alignWithTarget()},addCell:function(Sb){H.connect(Sb);Ga.alignWithTarget()},
start:function(){this.fixpointCell=H[lb];this.draggedDelta=H.bounds().partNamed(ha);this.debugMorph=Ga.addMorph(new Na.Morph({fill:Na.Color.orange.withA(.5)}))},update:function(Sb){var Ab=this;this.draggedDelta=this.draggedDelta.addPt(Sb);var sc=Na.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(sc);Ga.cells.forEach(function(Fc){var Fd=sc.intersection(Fc.bounds()).area()/Fc.bounds().area();H.includes(Fc)&&.1>Fd&&Ab.removeCell(Fc);!H.includes(Fc)&&
Fd>1/3&&Ab.addCell(Fc)})},onDragEnd:function(Sb){this.debugMorph.remove()},onDragStart:function(Sb){this.start(Sb.position)},onDrag:function(Sb){this.update(Sb.state.dragDelta)}})}},{key:"cellGuide",value:function(H){var ha=this,Ga=this.cellResizer(H,"topLeft"),lb=this.cellResizer(H,"bottomRight");return this.addGuide(new Na.CellGuide({cellGroup:H,bounds:H.bounds(),fill:Na.Color.transparent,borderColor:Na.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Ga,lb],onMouseDown:function(Sb){this.becomeActive()},
deactivate:function(){this.borderColor=Na.Color.orange;this.fill=Na.Color.transparent;this.submorphs.forEach(function(Sb){Sb.visible=!1})},becomeActive:function(){ha.guides.forEach(function(Sb){Sb.isCell&&Sb.deactivate()});this.borderColor=Na.Color.rgbHex("#1565C0");this.fill=Na.Color.rgbHex("#1565C0").withA(.3);ha.addMorph(this.remove());this.submorphs.forEach(function(Sb){Sb.visible=!0})},startPreview:function(Sb){this.fill=Na.Color.orange.withA(.7)},stopPreview:function(Sb){this.fill=Na.Color.transparent},
onDrop:function(Sb){var Ab=$jscomp.makeIterator(Sb.hand.grabbedMorphs).next().value;Sb.hand.dropMorphsOn(ha.container);H.morph=Ab},alignWithTarget:function(){H.bounds().isNonEmpty()?(this.setBounds(H.bounds()),Ga.center=this.innerBounds().topLeft(),lb.center=this.innerBounds().bottomRight()):(Na.arr.remove(ha.guides,this),this.remove())}}))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Na.Color.transparent},
cells:{derived:!0,get:function(){return Na.arr.flatten(this.target.col(0).items.map(function(H){return H.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(Na.LayoutHalo));Na.GridLayoutHalo=nb;Na.GridLayoutHalo=
nb;Na.GridLayoutHalo=nb;Sa=function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),gb=na.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof na.TilingLayoutHalo?na.TilingLayoutHalo:na.TilingLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"remove",value:function(){Pb._get(Object.getPrototypeOf(gb.prototype),"remove",this).call(this);this.removePreviews();return this}},
{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(H){}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"previewDrop",value:function(H){var ha=this;0<this.previews.length||(this.previews=H.map(function(Ga){return ha.container.addMorph({type:Na.DropPreview,bounds:Ga.bounds()})}),this.previews.forEach(function(Ga){Ga.step()}))}},{key:"updateSpacing",value:function(H){this.target.spacing=
H}},{key:"updateAxis",value:function(H){this.target.axis=H}},{key:"updateAlign",value:function(H){this.target.align=H}},{key:"optionControls",value:function(){var H=this.target,ha=new Na.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.axis,values:["row","column"]}),Ga=new Na.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.align,values:["left","center"]});H=new Na.NumberWidget({min:0,number:H.spacing,padding:Na.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Na.Color.gray,
unit:"px"});Na.connect(H,"update",this,"updateSpacing");Na.connect(Ga,"update",this,"updateAlign");Na.connect(ha,"update",this,"updateAxis");var lb={type:"label",padding:Na.rect(0,5,5,5),fill:Na.Color.transparent,fontColor:Na.Color.gray.darker(),readOnly:!0};return[[Object.assign({},lb,{textString:"Submorph Spacing"}),H],[Object.assign({},lb,{textString:"Tiling Align"}),Ga],[Object.assign({},lb,{textString:"Tiling Axis"}),ha]].map(function(Sb){return{submorphs:Sb,fill:null,layout:new Na.HorizontalLayout({spacing:3})}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Na.Color.transparent},previews:{defaultValue:[]}}}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(Na.LayoutHalo);Na.TilingLayoutHalo=
Sa;Na.TilingLayoutHalo=Sa;Na.TilingLayoutHalo=Sa;(function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),gb=na.hasOwnProperty("DropPreview")&&"function"===typeof na.DropPreview?na.DropPreview:na.DropPreview=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var H=this,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==
Ga.nextAddress)return ha=Na.easings.inOutQuad,Ga.yield(H.animate({opacity:.5,duration:(H.pulseDuration-10)/2,easing:ha}),2);if(3!=Ga.nextAddress)return Ga.yield(H.animate({opacity:1,duration:(H.pulseDuration-10)/2,easing:ha}),3);H.stopped||H.step();Ga.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Na.Color.orange.withA(.3)},
hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Na.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(Na.Morph);Sa=ta("F",function(aa){var na=
lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),gb=na.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof na.FlexLayoutHalo?na.FlexLayoutHalo:na.FlexLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"handleDrop",value:function(H){}},{key:"previewDrop",value:function(H){var ha=this;0<this.previews.length||(this.previews=H.map(function(Ga){return ha.container.addMorph({type:Na.DropPreview,
position:ha.container.localize(ha.world().firstHand.position),extent:Ga.bounds().extent()})}),this.previews.forEach(function(Ga){Ga.step()}))}},{key:"remove",value:function(){Pb._get(Object.getPrototypeOf(gb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"onDrop",value:function(H){this.removePreviews();H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},
{key:"updateAutoResizePolicy",value:function(H){H&&(this.originalExtent=this.container.extent);this.target.autoResize=H;H||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(H){this.target.resizeSubmorphs=H;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(H){this.target.align=H}},{key:"updateDirectionPolicy",value:function(H){this.target.direction=H}},{key:"updateSpacing",value:function(H){this.target.spacing=
H}},{key:"optionControls",value:function(){var H=this.target,ha=H.possibleAlignValues?{fill:Na.Color.transparent,layout:new Na.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Na.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:H.align,values:H.possibleAlignValues})]}:null,Ga=H.possibleDirectionValues?{fill:Na.Color.transparent,layout:new Na.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",
value:"direction: "},new Na.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:H.direction,values:H.possibleDirectionValues})]}:null,lb=new Na.NumberWidget({fill:Na.Color.white,borderWidth:1,borderRadius:4,padding:Na.rect(5,4,0,0),borderColor:Na.Color.gray,min:0,number:H.spacing,unit:"px"}),Sb=new Na.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Na.Color.transparent,checked:H.autoResize});H=new Na.LabeledCheckBox({label:"Resize Submorphs",
name:"resizeSubmorphs",alignCheckBox:"right",fill:Na.Color.transparent,checked:H.resizeSubmorphs});Na.connect(lb,"update",this,"updateSpacing");Na.connect(Sb,"checked",this,"updateAutoResizePolicy");Na.connect(H,"checked",this,"updateResizeSubmorphsPolicy");ha&&Na.connect(ha.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Ga&&Na.connect(Ga.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[Sb,H].concat($jscomp.arrayFromIterable([ha,Ga].filter(Boolean)),[{fill:Na.Color.transparent,
layout:new Na.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Na.Color.gray.darker(),padding:Na.rect(0,5,5,5)},lb]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Na.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(Na.LayoutHalo));Na.FlexLayoutHalo=Sa;Na.FlexLayoutHalo=Sa;Na.FlexLayoutHalo=Sa;uc=ta("c",function(aa){var na=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),gb=na.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof na.ProportionalLayoutHalo?na.ProportionalLayoutHalo:na.ProportionalLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pb(gb,aa,[{key:"handleDrop",value:function(H){}},{key:"onDrop",value:function(H){H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(H){var ha={};this.target.changeSettingsFor(H.submorph,(ha[H.axis]=H.policy,ha),!0)}},{key:"onSubmorphSettingsDragStart",value:function(H,ha){var Ga=this;H.stop();
var lb=this.target.settingsFor(ha);ha="";for(var Sb in lb)ha+=Sb+":"+lb[Sb]+" ";var Ab=Na.morph({type:"label",value:ha,isLayoutable:!1});Ab.wantsToBeDroppedOn=function(sc){return Ga.target.layoutableSubmorphs.includes(sc)};Ab.onBeingDroppedOn=function(sc,Fc){Ab.remove();if(sc=Ga.target.layoutableSubmorphs.includes(Fc)?Fc:H.world.morphsContainingPoint(H.hand.position).find(function(Fd){return Ga.target.layoutableSubmorphs.includes(Fd)}))Ga.updateSubmorphProportionalLayoutSettings({policy:lb.x,axis:"x",
submorph:sc}),Ga.updateSubmorphProportionalLayoutSettings({policy:lb.y,axis:"y",submorph:sc}),sc.show(),$world.setStatusMessage("layout settings applied")};H.hand.grab(Ab)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var H=this,ha,Ga,lb,Sb,Ab,sc,Fc,Fd,Ee,Cd,ce,je;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fe){switch(Fe.nextAddress){case 1:return ha=H.target.layoutableSubmorphs,H.env.eventDispatcher.isKeyPressed("Shift")?(lb=ha.map(function(Pc){return{isListItem:!0,
string:String(Pc),value:Pc}}),Fe.yield($world.listPrompt("Select morph",lb,{requester:H,onSelection:function(Pc){return Pc.show()}}),5)):Fe.yield(Na.InteractiveMorphSelector.selectMorph(H.world(),H,function(Pc){return ha.includes(Pc)}),4);case 4:Ga=Fe.yieldResult;Fe.jumpTo(3);break;case 5:Sb=Fe.yieldResult,Ab=$jscomp.makeIterator(Sb.selected),Ga=Ab.next().value;case 3:if(!Ga)return Fe.return();sc=H.state.popover.get("controlContainer");Fc=sc.getAllNamed(/submorph config/);Fd=["move","resize","scale",
"fixed"];Ee=H.target.settingsFor(Ga);Fc.length||(sc.submorphs=[].concat($jscomp.arrayFromIterable(sc.submorphs),[{name:"submorph config X-Axis policy",position:Na.pt(0,H.height),fill:Na.Color.transparent,layout:new Na.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Na.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:Ee.x,values:Fd})]},{name:"submorph config Y-Axis policy",position:Na.pt(0,
H.height),fill:Na.Color.transparent,layout:new Na.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Na.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:Ee.y,values:Fd})]},Na.morph({position:Na.pt(0,H.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Cd=sc.getSubmorphNamed("x-axis policy selector");ce=sc.getSubmorphNamed("y-axis policy selector");je=sc.getSubmorphNamed("dragme");
Na.disconnect(Cd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Na.disconnect(ce,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Cd.selectedValue=Ee.x;ce.selectedValue=Ee.y;Na.connect(je,"onDragStart",H,"onSubmorphSettingsDragStart",{updater:function(Pc,fe){return Pc(fe,Ga)},varMapping:{submorph:Ga}});Na.connect(Cd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Pc){return{policy:Pc,axis:"x",submorph:Ga}},varMapping:{submorph:Ga}});Na.connect(ce,
"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Pc){return{policy:Pc,axis:"y",submorph:Ga}},varMapping:{submorph:Ga}});Fe.jumpToEnd()}})}},{key:"optionControls",value:function(H){this.state.popover=H;var ha=this.target;H=new Na.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Na.Color.transparent,checked:ha.xAxisEnabled});ha=new Na.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Na.Color.transparent,checked:ha.yAxisEnabled});
var Ga=new Na.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Na.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});Na.connect(H,"checked",this,"updateXAxisEnabled");Na.connect(ha,"checked",this,"updateYAxisEnabled");Na.connect(Ga,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Ga]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:Na.Color.transparent}}}}],na,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(Na.LayoutHalo));Na.ProportionalLayoutHalo=uc;Na.ProportionalLayoutHalo=uc;Na.ProportionalLayoutHalo=uc;var oc=lively.FreezerRuntime.recorderFor("lively.halos/index.js");oc.Halo=
xc;oc.MorphHighlighter=bb;oc.InteractiveMorphSelector=Bc;oc.StatusMessage=pd;oc.StatusMessageForMorph=$c;oc.show=$b;oc.showConnector=Qc;oc.ProportionalLayoutHalo=uc;oc.GridLayoutHalo=nb;oc.FlexLayoutHalo=Sa;oc.showAndSnapToGuides=Ka;oc.removeSnapToGuidesOf=ea;oc.StatusMessage=pd;oc.StatusMessage=pd;oc.StatusMessageForMorph=$c;oc.StatusMessageForMorph=$c;oc.show=$b;oc.show=$b;oc.showConnector=Qc;oc.showConnector=Qc;oc.Halo=xc;oc.Halo=xc;oc.MorphHighlighter=bb;oc.MorphHighlighter=bb;oc.InteractiveMorphSelector=
Bc;oc.InteractiveMorphSelector=Bc;oc.ProportionalLayoutHalo=uc;oc.ProportionalLayoutHalo=uc;oc.GridLayoutHalo=nb;oc.GridLayoutHalo=nb;oc.FlexLayoutHalo=Sa;oc.FlexLayoutHalo=Sa;oc.showAndSnapToGuides=Ka;oc.showAndSnapToGuides=Ka;oc.removeSnapToGuidesOf=ea;oc.removeSnapToGuidesOf=ea;pd=Object.freeze({__proto__:null,StatusMessage:pd,StatusMessageForMorph:$c,show:$b,showConnector:Qc,Halo:xc,MorphHighlighter:bb,InteractiveMorphSelector:Bc,ProportionalLayoutHalo:uc,GridLayoutHalo:nb,FlexLayoutHalo:Sa,showAndSnapToGuides:Ka,
removeSnapToGuidesOf:ea,SvgStyleHalo:void 0});ta("i",pd);ta("_",void 0)}}});