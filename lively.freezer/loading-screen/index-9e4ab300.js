System.register(["./__root_module__-f9290433.js"],function(sa){var db,Eb,Vb,Wb,wd,Ic,Ad,Jc,Mc,bd,ed,Od,qd,Xc,Ra,wb,mc,dc,Rc,Tc,zc,Fc,Jb,Ac,Bc,fd,Qb,xb,eb,vb,Va,lb,yb,Zb,Sb,$a,bb,Kb,wc,fc,bc,Tb;return{setters:[function(I){db=I.ar;Eb=I.a1;Vb=I.C;Wb=I.al;wd=I.ag;Ic=I.av;Ad=I.aS;Jc=I.az;Mc=I.aw;bd=I.a7;ed=I.aj;Od=I.am;qd=I.h;Xc=I.a0;Ra=I.$;wb=I.af;mc=I.a5;dc=I.P;Rc=I._;Tc=I.aT;zc=I.an;Fc=I.a4;Jb=I.ao;Ac=I.ap;Bc=I.aU;fd=I.aV;Qb=I.as;xb=I.aq;eb=I.s;vb=I.at;Va=I.aW;lb=I.ai;yb=I.aX;Zb=I.aY;Sb=I.aZ;$a=
I.a8;bb=I.a_;Kb=I.ak;wc=I.a$;fc=I.b0;bc=I.b1;Tb=I.aO}],execute:function(){function I(da){(da=nb.cachedGuideLines.get(da))&&da.forEach(function(ra){return ra.remove()})}function T(da,ra,sb,H,fa){ra=void 0===ra?!0:ra;sb=void 0===sb?!0:sb;H=void 0===H?10:H;fa=void 0===fa?100:fa;if(ra||sb){var Fa=da.owner,qb=Fa.world();Fa=Fa.getGlobalTransform();var nc=da.owner.submorphs.filter(function(Vc){return Vc!==da&&!Vc.isEpiMorph&&Vc.visible&&Vc.reactsToPointer}),xc=nb.findAlignedMorphs(da,nc,H,fa,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));fa=[];var Bd=0,Cd=0,ue=0,jd=0;Fa.e-=qb.scroll.x;Fa.f-=qb.scroll.y;if(xc){xc=$jscomp.makeIterator(xc);for(var Gd=xc.next();!Gd.done;Gd=xc.next()){Gd=$jscomp.makeIterator(Gd.value);Gd.next();var re=Gd.next().value;Gd=re.vertical;re=$jscomp.makeIterator(re.horizontal);for(var He=re.next();!He.done;He=re.next()){He=He.value;var yf=He.edgeAVal,tf=He.refPointsA,yc=He.refPointsB,Ie=He.edgeBVal,mf=Math.ceil(H-He.delta),Jf=Math.min(tf.top,yc.top);tf=Math.max(tf.bottom,
yc.bottom);He.maxDist>H&&(mf-=H/2);Bd<mf&&(Bd=mf,ue=Ie-yf);fa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:nb.guideWidth,start:Fa.transformPoint(nb.pt(Ie,Jf)),end:Fa.transformPoint(nb.pt(Ie,tf)),fill:nb.guideColor,guideType:"h",priority:mf})}Gd=$jscomp.makeIterator(Gd);for(re=Gd.next();!re.done;re=Gd.next())re=re.value,He=re.edgeAVal,Jf=re.refPointsA,tf=re.refPointsB,yf=re.edgeBVal,Ie=Math.ceil(H-re.delta),mf=Math.min(Jf.left,tf.left),Jf=Math.max(Jf.right,tf.right),re.maxDist>H&&(Ie-=
H/2),Cd<Ie&&Math.abs(yf-He)<=H&&(Cd=Ie,jd=yf-He),fa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:nb.guideWidth,start:Fa.transformPoint(nb.pt(mf,yf)),end:Fa.transformPoint(nb.pt(Jf,yf)),fill:nb.guideColor,guideType:"v",priority:Ie})}}if(!Bd||!Cd){nc=[da].concat($jscomp.arrayFromIterable(nc));He=nb.computeClosestMorphs(nc);re=He[0];nc=re.l;xc=re.r;Gd=re.t;re=re.b;var Be;if(nc||xc||Gd||re){var xa=(nc||xc||Gd||re).refPointsA;for(yf=1;yf<He.length&&(tf=He[yf],Ie=tf.l,mf=tf.r,Jf=tf.t,tf=tf.b,
Bd||(nc&&Ie&&nc.index!==Ie.index&&Math.abs(Ie.dist-nc.dist)<=H?Be=Object.assign({neighbor:yf,direction:"left"},Ie):xc&&mf&&xc!==mf.index&&Math.abs(mf.dist-xc.dist)<=H&&(Be=Object.assign({neighbor:yf,direction:"right"},mf))),Cd||(Gd&&Jf&&Gd.index!==Jf.index&&Math.abs(Jf.dist-Gd.dist)<=H?Be=Object.assign({neighbor:yf,direction:"top"},Jf):re&&tf&&re.index!==tf.index&&Math.abs(tf.dist-re.dist)<=H&&(Be=Object.assign({neighbor:yf,direction:"bottom"},tf))),!Be);yf++);}if(Be){var Na=Be;H=Na.direction;Jf=
Na.dist;var ub=xa.left;yc=xa.top;var Q=xa.bottom,wa=xa.right,Xa=xa.width,ib=xa.height;tf=Na.refPointsA;xa=tf.left;He=tf.top;yf=tf.bottom;Ie=tf.right;mf=tf.width;tf=tf.height;var rc=Na.refPointsB,cc=rc.left;Na=rc.top;var ad=rc.bottom;rc=rc.right;wa="left"===H?ub:"right"===H?wa:ub+Xa/2;Q="bottom"===H?Q:"top"===H?yc:yc+ib/2;ub="left"===H?wa-Jf:"right"===H?wa+Jf:ub+Xa/2;Jf="bottom"===H?Q+Jf:"top"===H?Q-Jf:yc+ib/2;yc="left"===H?rc:"right"===H?cc:xa+mf/2;Xa="bottom"===H?Na:"top"===H?ad:He+tf/2;!sb||Bd||
"right"!==H&&"left"!==H||(Bd=10,ue=(Be.dist-(xc||nc).dist)*("right"===H?-1:1),wa+=ue,ub+=ue);!sb||Cd||"top"!==H&&"bottom"!==H||(Cd=10,jd=((Gd||re).dist-Be.dist)*("top"===H?-1:1),Q+=jd,Jf+=jd);fa.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Fa.transformPoint(nb.pt("left"===H?xa:"right"===H?Ie:xa+mf/2,"bottom"===H?yf:"top"===H?He:He+tf/2)),end:Fa.transformPoint(nb.pt(yc,Xa)),fill:nb.Color.orange,height:nb.guideWidth,guideType:H,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Fa.transformPoint(nb.pt(wa,
Q)),end:Fa.transformPoint(nb.pt(ub,Jf)),fill:nb.Color.orange,height:nb.guideWidth,guideType:H,priority:10})}}sb&&(ue||jd)&&da.moveBy(nb.pt(ue,jd));if(ra){fa=fa.filter(function(Vc){var Yc=Vc.guideType;Vc=Vc.priority;return"h"===Yc?Vc===Bd:"v"===Yc?Vc===Cd:!0});(ra=nb.cachedGuideLines.get(da))||nb.cachedGuideLines.set(da,ra=[]);for(sb=0;sb<fa.length;sb++)Be=void 0,ra[sb]?Be=Object.assign(ra[sb],fa[sb]):(Be=nb.morph(fa[sb]),ra.push(Be)),Be.owner||qb.addMorph(Be);ra.slice(sb).forEach(function(Vc){return Vc.remove()});
nb.fun.debounceNamed(da.id+"-drag-guides-cleanup",1300,function(){var Vc=nb.cachedGuideLines.get(da);Vc&&Vc.forEach(function(Yc){return Yc.remove()})})()}}}function qa(da,ra,sb,H,fa,Fa){sb=void 0===sb?!0:sb;H=void 0===H?!0:H;fa=void 0===fa?5:fa;Fa=void 0===Fa?100:Fa;if(sb||H){var qb=da.owner,nc=qb.world(),xc=qb.getGlobalTransform(),Bd=da.owner.submorphs.filter(function(Q){return Q!==da&&!Q.isEpiMorph&&Q.visible&&Q.reactsToPointer});qb=(ra.includes("left")||ra.includes("right")?"x":"")+(ra.includes("top")||
ra.includes("bottom")?"y":"");var Cd=nb.findMorphsWithSimilarWidthOrHeight(da,qb,Bd,fa,Fa),ue=-Infinity,jd=-Infinity,Gd=0,re=0,He=0,yf=0,tf=0,yc=0;qb=[];xc.e-=nc.scroll.x;xc.f-=nc.scroll.y;if(Cd){Cd=$jscomp.makeIterator(Cd);for(var Ie=Cd.next();!Ie.done;Ie=Cd.next()){Ie=$jscomp.makeIterator(Ie.value);Ie.next();var mf=Ie.next().value;Ie=mf.similarIn;var Jf=mf.delta,Be=mf.refPointsA,xa=mf.refPointsB;mf=fa-Jf+(Fa-mf.minDist);"width"===Ie?ue<mf&&(ue=mf,ra.includes("left")&&(re=-Jf),ra.includes("right")&&
(Gd=Jf)):jd<mf&&(jd=mf,ra.includes("top")&&(He=-Jf),ra.includes("bottom")&&(yf=Jf));Jf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:nb.guideWidth,fill:nb.guideColor,guideType:Ie,priority:mf,start:xc.transformPoint("width"===Ie?nb.pt(Be.left,Be.top+Be.height/2):nb.pt(Be.left+Be.width/2,Be.top)),end:xc.transformPoint("width"===Ie?nb.pt(Be.right,Be.top+Be.height/2):nb.pt(Be.left+Be.width/2,Be.bottom))};Ie=Object.assign({},Jf,{start:xc.transformPoint("width"===Ie?nb.pt(xa.left,xa.top+xa.height/
2):nb.pt(xa.left+xa.width/2,xa.top)),end:xc.transformPoint("width"===Ie?nb.pt(xa.right,xa.top+xa.height/2):nb.pt(xa.left+xa.width/2,xa.bottom))});qb.push(Jf,Ie)}}if(Fa=nb.findAlignedMorphs(da,Bd,fa,Fa,ra,void 0))for(Fa=$jscomp.makeIterator(Fa),Bd=Fa.next();!Bd.done;Bd=Fa.next()){Bd=$jscomp.makeIterator(Bd.value);Bd.next();Cd=Bd.next().value;Bd=Cd.vertical;Cd=$jscomp.makeIterator(Cd.horizontal);for(Ie=Cd.next();!Ie.done;Ie=Cd.next()){Ie=Ie.value;xa=Ie.edgeAVal;var Na=Ie.refPointsA,ub=Ie.refPointsB;
Jf=Ie.edgeBVal;Be=Math.ceil(fa-Ie.delta);mf=Math.min(Na.top,ub.top);Na=Math.max(Na.bottom,ub.bottom);Ie.maxDist>fa&&(Be-=fa/2);tf<Be&&(tf=Be,ra.includes("left")&&(re=-(Jf-xa)),ra.includes("right")&&(Gd=+(Jf-xa)));qb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:nb.guideWidth,start:xc.transformPoint(nb.pt(Jf,mf)),end:xc.transformPoint(nb.pt(Jf,Na)),fill:nb.guideColor,guideType:"h",priority:Be})}Bd=$jscomp.makeIterator(Bd);for(Cd=Bd.next();!Cd.done;Cd=Bd.next())Cd=Cd.value,Ie=Cd.edgeAVal,
mf=Cd.refPointsA,Na=Cd.refPointsB,xa=Cd.edgeBVal,Jf=Math.ceil(fa-Cd.delta),Be=Math.min(mf.left,Na.left),mf=Math.max(mf.right,Na.right),Cd.maxDist>fa&&(Jf-=fa/2),yc<Jf&&Math.abs(xa-Ie)<=fa&&(yc=Jf,ra.includes("top")&&(He=xa-Ie),ra.includes("bottom")&&(yf=xa-Ie)),qb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:nb.guideWidth,start:xc.transformPoint(nb.pt(Be,xa)),end:xc.transformPoint(nb.pt(mf,xa)),fill:nb.guideColor,guideType:"v",priority:Jf})}H&&(re&&(da.left+=re,da.right-=re),He&&(da.top+=
He,da.bottom-=He),Gd&&(da.width+=Gd),yf&&(da.height+=yf));if(sb){qb=qb.filter(function(Q){var wa=Q.guideType;Q=Q.priority;return"width"===wa?Q===ue:"height"===wa?Q===jd:"v"===wa?Q===yc:"h"===wa?Q===tf:!1});(ra=nb.cachedGuideLines.get(da))||nb.cachedGuideLines.set(da,ra=[]);for(sb=0;sb<qb.length;sb++)H=void 0,ra[sb]?H=Object.assign(ra[sb],qb[sb]):(H=nb.morph(qb[sb]),ra.push(H)),H.owner||nc.addMorph(H);ra.slice(sb).forEach(function(Q){return Q.remove()});nb.fun.debounceNamed(da.id+"-drag-guides-cleanup",
1300,function(){var Q=nb.cachedGuideLines.get(da);Q&&Q.forEach(function(wa){return wa.remove()})})()}}}function Ga(da,ra){ra=void 0===ra?!1:ra;var sb=za.MorphicEnv.default().world;if(null===da||void 0===da)da=String(da);if(da.isMorph)return za.showRect(da.world(),da.globalBounds().translatedBy(da.world().scroll.negated()),ra);if(da.isPoint)return za.showRect(sb,new za.Rectangle(da.x-5,da.y-5,10,10));if(da.isLine)return za.showLine(sb,da);if(da.isRectangle)return za.showRect(sb,da);if("undefined"!==
typeof za.Element&&da instanceof za.Element)return za.showRect(sb,za.Rectangle.fromElement(da));if("number"===typeof da||"symbol"===typeof da||"boolean"===typeof da||"undefined"!==typeof za.Node&&da instanceof za.Node||da instanceof RegExp)da=String(da);"object"===typeof da&&(da=za.obj.inspect(da,{maxDepth:1}));return"string"===typeof da&&1===arguments.length?sb.setStatusMessage(da):sb.setStatusMessage(za.string.formatFromArray(Array.from(arguments)))}function Mb(da,ra,sb){sb=void 0===sb?3E3:sb;var H,
fa,Fa,qb,nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xc){if(1==xc.nextAddress){if(!(da&&da.world()&&ra&&ra.world()))return xc.return(null);H=da.owner.worldPoint(da.center);fa=ra.owner.worldPoint(ra.center);Fa=H.lineTo(fa).sampleN(2)[1];qb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:za.Color.red,fill:za.Color.red,cx:5,cy:5,r:4}]};nc=$world.addMorph(new za.Path({position:Fa,renderOnGPU:!0,vertices:[za.pt(0),
za.pt(0)],borderWidth:2,startMarker:qb,endMarker:qb,borderColor:za.Color.red}));return xc.yield(nc.whenRendered(),2)}if(3!=xc.nextAddress)return xc.yield(nc.animate({opacity:1,customTween:function(Bd){var Cd=nc.center;nc.vertices=[za.pt(0).interpolate(Bd,H.subPt(Fa)),za.pt(0).interpolate(Bd,fa.subPt(Fa))];nc.center=Cd},duration:400}),3);sb&&setTimeout(function(){return nc.fadeOut()},sb);return xc.return(nc)})}sa({a:T,d:Mb,r:I,s:Ga});var nb=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
nb.removeSnapToGuidesOf=I;nb.showAndSnapToGuides=T;nb.showAndSnapToResizeGuides=qa;nb.computeRefPoints=function(da){var ra=da.x,sb=da.y,H=da.width;da=da.height;return{left:ra,top:sb,hCenter:ra+H/2,vCenter:sb+da/2,right:ra+H,bottom:sb+da,width:H,height:da}};nb.findEdgesInAlignment=function(da,ra,sb,H,fa,Fa,qb,nc,xc,Bd){sb=void 0===sb?15:sb;Fa=void 0===Fa?0:Fa;qb=void 0===qb?0:qb;nc=void 0===nc?0:nc;xc=void 0===xc?0:xc;Bd=void 0===Bd?0:Bd;for(var Cd=[],ue=[],jd=0;jd<nb.edges.length;jd++){var Gd=$jscomp.makeIterator(nb.edges[jd]),
re=Gd.next().value,He=Gd.next().value;Gd=Gd.next().value;var yf=da[He],tf=ra[Gd],yc=Math.max(yf,tf)-Math.min(yf,tf);yc>sb||!(H&&!H.includes(He)||fa&&!fa.includes(Gd))&&("vertical"===re?Cd:ue).push({delta:yc,edgeA:He,edgeB:Gd,edgeAVal:yf,edgeBVal:tf,refPointsA:da,refPointsB:ra,distLeft:Fa,distTop:qb,distRight:nc,distBottom:xc,maxDist:Bd})}return Cd.length||ue.length?{vertical:Cd,horizontal:ue}:null};nb.findAlignedMorphs=function(da,ra,sb,H,fa,Fa){sb=void 0===sb?15:sb;H=void 0===H?Infinity:H;for(var qb,
nc=nb.computeRefPoints(da.bounds()),xc=0;xc<ra.length;xc++){var Bd=ra[xc];if(Bd!==da){var Cd=nb.computeRefPoints(Bd.bounds()),ue=Math.max(0,nc.left-Cd.right),jd=Math.max(0,Cd.left-nc.right),Gd=Math.max(0,nc.top-Cd.bottom),re=Math.max(0,Cd.top-nc.bottom);Math.max(re,Gd,jd,ue)>H||!(Cd=nb.findEdgesInAlignment(nc,Cd,sb,fa,Fa,ue,Gd,jd,re,Math.max(re,Gd,jd,ue)))||(qb||(qb=new Map),qb.set(Bd,Cd))}}da=da.owner;ra=nb.computeRefPoints(da.innerBounds());if(sb=nb.findEdgesInAlignment(nc,ra,sb))qb||(qb=new Map),
qb.set(da,sb);return qb};nb.findMorphsWithSimilarWidthOrHeight=function(da,ra,sb,H,fa){H=void 0===H?15:H;fa=void 0===fa?Infinity:fa;for(var Fa,qb=nb.computeRefPoints(da.bounds()),nc=0;nc<sb.length;nc++){var xc=sb[nc];if(xc!==da){var Bd=nb.computeRefPoints(xc.bounds()),Cd=Math.max(0,qb.left-Bd.right),ue=Math.max(0,Bd.left-qb.right),jd=Math.max(0,qb.top-Bd.bottom),Gd=Math.max(0,Bd.top-qb.bottom),re=Math.min(Gd,jd,ue,Cd),He=Math.max(Gd,jd,ue,Cd);if(!(Math.max(Gd,jd,ue,Cd)>fa)){ue=qb;Cd=ue.width;ue=ue.height;
Gd=Bd;jd=Gd.width;Gd=Gd.height;var yf=jd-Cd,tf=Gd-ue;("x"===ra||"xy"===ra)&&Math.abs(yf)<=H&&(Fa||(Fa=new Map),Fa.set(xc,{similarIn:"width",minDist:re,maxDist:He,refPointsA:qb,refPointsB:Bd,valA:Cd,valB:jd,delta:yf}));("y"===ra||"xy"===ra)&&Math.abs(tf)<=H&&(Fa||(Fa=new Map),Fa.set(xc,{similarIn:"height",minDist:re,maxDist:He,refPointsA:qb,refPointsB:Bd,valA:ue,valB:Gd,delta:tf}))}}}return Fa};nb.closest=function(da,ra,sb,H,fa,Fa,qb,nc){nc=void 0===nc?!0:nc;var xc=H[da],Bd=fa[da],Cd=Fa[da];ra=qb[da];
for(var ue,jd,Gd,re,He=0;He<fa.length;He++)da===He||xc<fa[He]||ue&&fa[ue.index]>=fa[He]||nc&&qb[da]<Fa[He]||Fa[da]>qb[He]||(ue={index:He,dist:xc-fa[He],refPointsA:sb[da],refPointsB:sb[He]});for(xc=0;xc<H.length;xc++)da===xc||Bd>H[xc]||jd&&H[jd.index]<=H[xc]||nc&&qb[da]<Fa[xc]||Fa[da]>qb[xc]||(jd={index:xc,dist:H[xc]-Bd,refPointsA:sb[da],refPointsB:sb[xc]});for(Bd=0;Bd<qb.length;Bd++)da===Bd||Cd<qb[Bd]||Gd&&qb[Gd.index]>=qb[Bd]||nc&&H[da]>fa[Bd]||fa[da]<H[Bd]||(Gd={index:Bd,dist:Cd-qb[Bd],refPointsA:sb[da],
refPointsB:sb[Bd]});for(qb=0;qb<Fa.length;qb++)da===qb||ra>Fa[qb]||re&&Fa[re.index]<=Fa[qb]||nc&&H[da]>fa[qb]||fa[da]<H[qb]||(re={index:qb,dist:Fa[qb]-ra,refPointsA:sb[da],refPointsB:sb[qb]});return{l:ue,r:jd,t:Gd,b:re}};nb.computeClosestMorphs=function(da){for(var ra=[],sb=[],H=[],fa=[],Fa=[],qb=[],nc=0;nc<da.length;nc++){var xc=nb.computeRefPoints(da[nc].bounds());Fa.push(xc);var Bd=xc.right,Cd=xc.top,ue=xc.bottom;ra.push(xc.left);sb.push(Bd);H.push(Cd);fa.push(ue)}for(nc=0;nc<da.length;nc++)qb.push(nb.closest(nc,
da,Fa,ra,sb,H,fa));return qb};nb.fun=db;nb.pt=Eb;nb.Color=Vb;nb.morph=Wb;nb.cachedGuideLines=new WeakMap;nb.guideWidth=1;nb.guideColor=nb.Color.orange.lighter();nb.removeSnapToGuidesOf=I;nb.removeSnapToGuidesOf=I;nb.showAndSnapToGuides=T;nb.showAndSnapToGuides=T;nb.showAndSnapToResizeGuides=qa;nb.showAndSnapToResizeGuides=qa;nb.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Ha=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ha.Morph=wd;Ha.Label=Ic;Ha.StyleSheet=Ad;Ha.HorizontalLayout=
Jc;Ha.Path=Mc;Ha.Text=bd;Ha.GridLayout=ed;Ha.morph=Wb;Ha.Icon=Od;Ha.createMorphSnapshot=qd;Ha.Color=Vb;Ha.pt=Eb;Ha.rect=Xc;Ha.Rectangle=Ra;Ha.LinearGradient=wb;Ha.obj=mc;Ha.PropertyPath=dc;Ha.promise=Rc;Ha.properties=Tc;Ha.num=zc;Ha.arr=Fc;Ha.connect=Jb;Ha.signal=Ac;Ha.disconnect=Bc;Ha.disconnectAll=fd;Ha.once=Qb;Ha.showAndSnapToGuides=T;Ha.showAndSnapToResizeGuides=qa;Ha.removeSnapToGuidesOf=I;Ha.haloBlue=Ha.Color.rgb(23,160,251);Ha.componentAccent=Ha.Color.magenta;Ha.derivedAccent=Ha.Color.purple;
var kb=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("Halo")&&"function"===typeof ra.Halo?ra.Halo:ra.Halo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",
get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(H){H.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var H=this;setTimeout(function(){H.target.owner||H.remove()})}},{key:"initLayout",value:function(){var H=this.layout=new Ha.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},
4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});H.col(1).row(7).group.align="center";H.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=
[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||
this.addMorphBack(Ha.morph({name:"border-box",fill:Ha.Color.transparent,borderColor:this.target.isComponent?Ha.componentAccent:Ha.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(H){this.state||(this.state={});this.state.pointerId=H}},{key:"prepareTarget",value:function(H){if(!Ha.obj.isArray(H))return H;if(1>=H.length)return H[0];H=H[0].world().addMorph(new Ha.MultiSelectionTarget({selectedMorphs:H}));H.alignWithSelection();
H.modifiesSelectedMorphs=!0;return H}},{key:"refocus",value:function(H){this.target=H;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var H=this.target.world()||$world,fa=H.visibleBounds(),Fa=this.target.globalBounds(),qb=Fa.insetBy(-36).intersection(fa);fa=Fa.intersection(fa);this.layout&&this.layout.disable();this.setBounds(qb.translatedBy(H.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,fa));this.state.activeButton?(this.buttonControls.forEach(function(nc){return nc.visible=
!1}),this.ensureResizeHandles().forEach(function(nc){return nc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(nc){return nc.visible=!0}),this.buttonControls.forEach(function(nc){nc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(nc){return nc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();
this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var H=this.target;H&&(Ha.disconnect(H,"onChange",this,"alignWithTarget"),Ha.disconnect(H,"onOwnerChanged",this,"removeIfDetached"),H instanceof Ha.MultiSelectionTarget?(H.modifiesSelectedMorphs=!1,H.remove()):"function"===typeof H.detachedHalo&&H.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();xb._get(Object.getPrototypeOf(sb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",
value:function(H){return H}},{key:"propertyDisplay",get:function(){return Ha.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ha.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Ha.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Ha.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Ha.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ha.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ha.InspectHaloItem.for(this)}},
{key:"editHalo",value:function(){return Ha.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ha.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ha.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Ha.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Ha.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(H){return H.isHaloItem&&!H.isResizeHandle})}},{key:"addMorphToSelection",
value:function(H){var fa=this,Fa,qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nc){return 1==nc.nextAddress?(Fa=fa.world(),qb=fa.target.isMorphSelection?fa.target.selectedMorphs:[fa.target],fa.remove(),nc.yield(Fa.showHaloForSelection([].concat($jscomp.arrayFromIterable(qb),[H]),fa.state.pointerId),2)):nc.return(nc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(H){var fa=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress){Fa=
fa.world();fa.remove();if(!fa.target.isMorphSelection)return qb.jumpTo(0);Ha.arr.remove(fa.target.selectedMorphs,H);return qb.yield(Fa.showHaloForSelection(fa.target.selectedMorphs,fa.state.pointerId),3)}return qb.return(qb.yieldResult)})}},{key:"isAlreadySelected",value:function(H){return this.target==H||this.target.isMorphSelection&&this.target.selectsMorph(H)}},{key:"updateBoundsFor",value:function(H,fa,Fa,qb,nc){var xc={topLeft:Ha.rect(-1,-1,1,1),topCenter:fa?Ha.rect(1,-1,0,1):Ha.rect(0,-1,0,
1),topRight:Ha.rect(0,-1,1,1),rightCenter:fa?Ha.rect(0,1,1,1):Ha.rect(0,0,1,0),bottomRight:Ha.rect(0,0,1,1),bottomCenter:fa?Ha.rect(1,0,0,1):Ha.rect(0,0,0,1),bottomLeft:Ha.rect(-1,0,1,1),leftCenter:fa?Ha.rect(-1,1,1,0):Ha.rect(-1,0,1,0)}[H];nc=xc.x;var Bd=xc.y,Cd=xc.width;xc=xc.height;Fa=fa?this.proportionalDelta(H,Fa,qb):Fa;H=Ha.rect(Fa.x*nc,Fa.y*Bd,Fa.x*Cd,Fa.y*xc);this.active=!0;this.target.setBounds(qb.insetByRect(H));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());
this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(H,fa,Fa){var qb=Fa.width,nc=Fa.height;Fa={topLeft:Ha.pt(-1,-1),topCenter:Ha.pt(0,-1),topRight:Ha.pt(1,-1),leftCenter:Ha.pt(-1,0),rightCenter:Ha.pt(1,0),bottomLeft:Ha.pt(-1,1),bottomCenter:Ha.pt(0,1),bottomRight:Ha.pt(1,1)};var xc=qb/Math.max(qb,nc),Bd=nc/Math.max(nc,qb);qb={topLeft:Ha.pt(-xc,-Bd),topCenter:Ha.pt(1/(2*nc/qb),-1),topRight:Ha.pt(xc,-Bd),leftCenter:Ha.pt(-1,nc/(2*qb)),rightCenter:Ha.pt(1,nc/(3*qb)),bottomLeft:Ha.pt(-xc,
Bd),bottomCenter:Ha.pt(1/(2*nc/qb),1),bottomRight:Ha.pt(xc,Bd)};Fa=Fa[H];return qb[H].scaleBy(Fa.dotProduct(fa)/Fa.dotProduct(Fa))}},{key:"ensureResizeHandles",value:function(){return Ha.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(H){H=H.valueForPropertyDisplay();"undefined"!==typeof H?this.propertyDisplay.displayProperty(H):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(H,fa){if(!Ha.rect(0).sides.includes(fa)){var Fa=this.getSubmorphNamed("diagonal");
if(H){H=this.target.globalBounds();var qb=H.width,nc=H.height;H=this.localize(Ha.pt(H.x,H.y)).extent(Ha.pt(qb,nc)).scaleRectTo(this.innerBounds());qb={topLeft:[Ha.pt(qb,nc),Ha.pt(0,0)],topRight:[Ha.pt(0,nc),Ha.pt(qb,0)],bottomRight:[Ha.pt(0,0),Ha.pt(qb,nc)],bottomLeft:[Ha.pt(qb,0),Ha.pt(0,nc)]};Fa?Fa.setBounds(H):(Fa=$jscomp.makeIterator(qb[fa]),fa=Fa.next().value,Fa=Fa.next().value,qb=new Ha.LinearGradient({stops:[{offset:0,color:Ha.Color.orange.withA(0)},{offset:.2,color:Ha.Color.orange},{offset:.8,
color:Ha.Color.orange},{offset:1,color:Ha.Color.orange.withA(0)}]}),Fa=this.addMorphBack(new Ha.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:H,borderColor:qb,vertices:[fa,Fa]})),Fa.setBounds(H),Fa.animate({opacity:1,duration:500}))}else Fa&&Fa.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(H,fa){var Fa=this.getSubmorphNamed("rotationIndicator");H&&fa?(H=this.getSubmorphNamed("origin").center,Fa=Fa||this.addMorphBack(new Ha.Path({name:"rotationIndicator",
borderColor:Ha.haloBlue,borderWidth:1,vertices:[]})),Fa.setBounds(fa.bounds().union(this.innerBounds())),Fa.vertices=[Fa.localizePointFrom(H,this),Fa.localizePointFrom(fa.center,this)]):Fa&&Fa.remove()}},{key:"toggleMorphHighlighter",value:function(H,fa,Fa){Fa=void 0===Fa?!1:Fa;if(fa.onHaloGrabover)fa.onHaloGrabover(H);else Fa=Ha.MorphHighlighter.for(this,fa,Fa),H&&fa&&fa!=this.world()?Fa&&Fa.show(fa):Fa&&Fa.deactivate()}},{key:"onMouseDown",value:function(H){var fa=H.state.clickedOnMorph;if(!H.isCommandKey()&&
fa==this.borderBox)return this.remove();if(H.isShiftDown()&&H.isCommandKey())H=this.target.isMorphSelection?this.target.morphBeneath(H.position):this.morphBeneath(H.position),this.isAlreadySelected(H)?this.removeMorphFromSelection(H):this.addMorphToSelection(H);else{if(fa==this.borderBox&&H.isCommandKey()){var Fa=H.world.morphsContainingPoint(H.position).filter(function(qb){return qb.halosEnabled});(Fa=Fa.slice(Fa.indexOf(this.target)+1)[0]||Fa[0]||H.world)&&H.world.showHaloFor(Fa,H.domEvt.pointerId);
this.remove()}fa==this&&H.isCommandKey()&&(Fa=this.morphBeneath(H.position),H.world.showHaloFor(Fa,H.domEvt.pointerId));fa==this&&this.remove()}}},{key:"onKeyUp",value:function(H){this.changingName||this.buttonControls.map(function(fa){return fa.onKeyUp(H)})}},{key:"getMesh",value:function(H,fa){var Fa=H.x;H=H.y;fa=void 0===fa?Ha.pt(0,0):fa;var qb=this.world().visibleBounds(),nc=qb.height;qb=qb.width;var xc={borderStyle:"dotted",borderWidth:2,borderColor:Ha.Color.orange};xc=this.get("mesh")||this.addMorph(new Ha.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:Ha.pt(qb,nc),fill:null,submorphs:[new Ha.Path(Object.assign({name:"vertical"},xc)),new Ha.Path(Object.assign({name:"horizontal"},xc))]}));xc.globalPosition=fa;xc.getSubmorphNamed("vertical").vertices=[Ha.pt(Fa,0).subPt(fa),Ha.pt(Fa,nc).subPt(fa)];xc.getSubmorphNamed("horizontal").vertices=[Ha.pt(0,H).subPt(fa),Ha.pt(qb,H).subPt(fa)];return xc}}],[{key:"className",get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ha.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Ha.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(H){this.state||(this.state={});var fa=!!this.state.target;
this.detachFromTarget();H=this.prepareTarget(H);this.state.target=H;fa&&this.alignWithTarget();Ha.connect(H,"onChange",this,"alignWithTarget");Ha.connect(H,"onOwnerChanged",this,"removeIfDetached")}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:895,end:16994})}(Ha.Morph);kb=Ha.Halo;
var Qc=sa("H",kb);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof ra.HaloPropertyDisplay?ra.HaloPropertyDisplay:ra.HaloPropertyDisplay=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(H){var fa=this.halo.state.activeButton;H=String(H);this.visible=!0;this.textString=H;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(fa.bounds())&&(this.position=Ha.pt(fa.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:"className",get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",
get:function(){return Ha.pt(25,0)}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Ha.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ha.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ha.Color.white},position:{defaultValue:this.defaultPosition}}}}],
ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17185,end:18532})})(Ha.Label);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof ra.MultiSelectionTarget?ra.MultiSelectionTarget:ra.MultiSelectionTarget=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(H){return this.selectedMorphs.includes(H)}},{key:"alignWithSelection",value:function(){var H=this.selectedMorphs.map(function(fa){return fa.globalBounds()}).reduce(function(fa,Fa){return fa.union(Fa)});this.setBounds(H)}},{key:"onGrab",
value:function(H){this.grabbingHand=H.hand;this.selectionGrabbed=!0;H.hand.grab(this.selectedMorphs);Ha.once(H.hand,"dropMorphsOn",this,"onGrabEnd");Ha.connect(H.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Ha.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(H){var fa=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Fa){return Fa.resizeBy(fa)})}},{key:"updatePosition",value:function(H){if(!this.selectionGrabbed){var fa=
H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Fa){return Fa.moveBy(fa)})}}},{key:"updateRotation",value:function(H){var fa=this,Fa=H.value-H.prevValue;this.selectedMorphs.forEach(function(qb){var nc=qb.origin;qb.adjustOrigin(qb.localize(fa.worldPoint(Ha.pt(0,0))));qb.rotation+=Fa;qb.adjustOrigin(nc)})}},{key:"updateScale",value:function(H){var fa=this,Fa=H.value-H.prevValue;this.selectedMorphs.forEach(function(qb){var nc=qb.origin;qb.adjustOrigin(qb.localize(fa.worldPoint(Ha.pt(0,
0))));qb.scale+=Fa;qb.adjustOrigin(nc)})}},{key:"onChange",value:function(H){xb._get(Object.getPrototypeOf(sb.prototype),"onChange",this).call(this,H);if(this.modifiesSelectedMorphs){switch(H.prop){case "extent":this.updateExtent(H);break;case "scale":this.updateScale(H);break;case "position":this.updatePosition(H);break;case "rotation":this.updateRotation(H)}return H}}}],[{key:"className",get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18600,end:20818})})(Ha.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("HaloItem")&&"function"===typeof ra.HaloItem?
ra.HaloItem:ra.HaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:"className",get:function(){return"HaloItem"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ha.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ha.pt(24,24)},halo:{}}}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({halo:H,name:this.morphName}))}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20984,end:21661})})(Ha.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("NameHolder")&&"function"===typeof ra.NameHolder?ra.NameHolder:ra.NameHolder=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onHoverIn",value:function(H){this.highlightOnHover&&this.nameHolder.active&&
(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ha.Color.orange)}},{key:"onHoverOut",value:function(H){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Ha.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(H){"Enter"==H.keyCombo?(this.accept(),H.stop()):xb._get(Object.getPrototypeOf(sb.prototype),"onKeyDown",
this).call(this,H)}},{key:"onMouseUp",value:function(){Ha.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(H){this.nameHolder.fontColor=Ha.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(H){H=this.nameHolder.textString;var fa=this.target.owner;this.validName=!fa||!fa.getSubmorphNamed(H)||this.target.name==H;Ha.signal(this,"valid",[this.validName,H])}},{key:"update",value:function(){var H=this;this.nameHolder.textString!==this.target.name&&
(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return H.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(H){if(!this.forceUniqueName||this.validName)this.target.name=H,Ha.signal(this,"active",[!1,this])}}],
[{key:"className",get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Ha.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ha.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Ha.Text({fill:Ha.Color.transparent,
fontColor:Ha.Color.white,fontWeight:"bold",active:!0}));Ha.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21698,end:24232})})(Ha.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("NameHaloItem")&&
"function"===typeof ra.NameHaloItem?ra.NameHaloItem:ra.NameHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){xb._get(Object.getPrototypeOf(sb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.initNameHolders();this.validityIndicator=Ha.Icon.makeLabel("check",{fontColor:Ha.Color.green,fontSize:15,padding:Ha.rect(4,
6,4,0)});this.fill=this.halo.target.isComponent?Ha.componentAccent:Ha.haloBlue;this.alignInHalo()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(H){return{target:H,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var H=this;this.nameHolders=this.targets().map(function(fa){fa=new Ha.NameHolder({halo:H.halo,highlightOnHover:fa.highlightOnHover,
target:fa.target});Ha.connect(fa,"active",H,"toggleActive");Ha.connect(fa,"valid",H,"toggleNameValid");return fa});this.submorphs=Ha.arr.interpose(this.nameHolders,{extent:Ha.pt(1,28),fill:Ha.Color.black.withA(.4)})}},{key:"toggleActive",value:function(H){H=$jscomp.makeIterator(H);var fa=H.next().value,Fa=H.next().value;this.halo.changingName!==fa&&((this.halo.changingName=fa)?(this.nameHolders.forEach(function(qb){return qb!=Fa&&qb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),
this.fill=Ha.Color.darkGray,setTimeout(function(){return Fa.nameHolder.selectAll()})):(this.fill=Ha.haloBlue,this.nameHolders.forEach(function(qb){return qb!=Fa&&qb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus()),this.alignInHalo())}},{key:"toggleNameValid",value:function(H){var fa=$jscomp.makeIterator(H);H=fa.next().value;fa=fa.next().value;(this.validName=H)?(this.conflictingMorph=null,this.borderColor=Ha.Color.green,this.validityIndicator.nativeCursor="auto",
this.validityIndicator.fontColor=Ha.Color.green,Ha.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(fa),this.borderColor=Ha.Color.red,this.validityIndicator.fontColor=Ha.Color.red,this.validityIndicator.nativeCursor="pointer",Ha.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ha.arr.zip(this.targets(),this.nameHolders).map(function(fa){var Fa=$jscomp.makeIterator(fa);fa=Fa.next().value.target;Fa=Fa.next().value;Fa.target=
fa;Fa.update()});var H=this.halo.innerBounds().bottomCenter().addPt(Ha.pt(0,2));this.topCenter=Ha.pt(Math.max(H.x,30),Math.max(H.y,80))}},{key:"onMouseDown",value:function(H){var fa=this,Fa=this.conflictingMorph;Fa&&(this.halo.toggleMorphHighlighter(!0,Fa),setTimeout(function(){return fa.halo.toggleMorphHighlighter(!1,Fa)},1E3))}}],[{key:"className",get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},
fill:{defaultValue:Ha.haloBlue},borderColor:{defaultValue:Ha.Color.green},layout:{initialize:function(){this.layout=new Ha.HorizontalLayout({resizeContainer:!0,spacing:0})}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24234,end:27401})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
sb=ra.hasOwnProperty("CloseHaloItem")&&"function"===typeof ra.CloseHaloItem?ra.CloseHaloItem:ra.CloseHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"update",value:function(){var H=this.halo,fa=H.target.owner;fa.undoStart("close-halo");H.target.selectedMorphs?H.target.selectedMorphs.forEach(function(Fa){return Fa.remove()}):H.target.remove();fa.undoStop("close-halo");H.remove()}},{key:"onMouseDown",
value:function(H){this.update()}}],[{key:"className",get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-times"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27404,end:28010})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("GrabHaloItem")&&"function"===typeof ra.GrabHaloItem?ra.GrabHaloItem:ra.GrabHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"adjustTarget",value:function(H,fa){Ha.PropertyPath("owner.layout.autoResize").get(H)&&
!H.globalBounds().insetBy(10).containsPoint(fa)&&(H=H.owner);return H}},{key:"valueForPropertyDisplay",value:function(){var H=this.hand,fa=this.halo,Fa=this.prevDropTarget,qb=H.world(),nc=H.findDropTarget(H.globalPosition,[fa.target],function(xc){return!xc.isHaloItem&&!xc.ownerChain().some(function(Bd){return Bd.isHaloItem||!Bd.visible||0==Bd.opacity})});nc=this.adjustTarget(nc,H.globalPosition);fa.toggleMorphHighlighter(nc&&nc!=qb,nc,!0);Fa&&Fa!=nc&&fa.toggleMorphHighlighter(!1,Fa);return(this.prevDropTarget=
nc)&&nc.name}},{key:"init",value:function(H){var fa=this.halo,Fa=fa.target.undoStart("grab-halo");Fa&&Fa.addTarget(fa.target.owner);this.hand=H;fa.target.onGrab({halo:fa,hand:H,isShiftDown:function(){return!1}});fa.state.activeButton=this;this.opacity=.3;var qb=Ha.connect(H,"update",this,"update");Ha.once(fa.target,"remove",function(){return qb.disconnect()})}},{key:"stop",value:function(H){var fa=this.halo,Fa=this.prevDropTarget,qb=fa.target.undoInProgress,nc=H.hand.findDropTarget(H.hand.globalPosition,
[fa.target],function(xc){return!xc.isHaloItem&&!xc.ownerChain().some(function(Bd){return Bd.isHaloItem})});nc=this.adjustTarget(nc,H.hand.globalPosition);Ha.disconnect(H.hand,"update",this,"update");Ha.MorphHighlighter.interceptDrop(fa,nc,fa.target);qb.addTarget(nc);nc.onDrop(H);fa.state.activeButton=null;fa.alignWithTarget();fa.toggleMorphHighlighter(!1,Fa);Ha.MorphHighlighter.removeHighlighters(fa);fa.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H)}}],[{key:"className",get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28013,end:30518})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("DragHaloItem")&&"function"===typeof ra.DragHaloItem?ra.DragHaloItem:ra.DragHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},
{key:"updateAlignmentGuide",value:function(H){var fa=this.halo.getSubmorphNamed("mesh");if(H)return fa=this.halo.getMesh(this.halo.target.worldPoint(Ha.pt(0,0))),this.focus(),fa;fa&&fa.remove()}},{key:"init",value:function(){var H=this.halo.target;H.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=H.position;this.targetTransform=H.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.updateAlignmentGuide(!1);Ha.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(H,fa,Fa){fa=void 0===fa?!1:fa;Fa=void 0===Fa?!1:Fa;this.actualPos=H=this.actualPos.addPt(this.targetTransform.transformDirection(H));fa&&(H=H.griddedBy(Ha.pt(10,10)));this.halo.target.position=H;this.updateAlignmentGuide(fa);fa||Ha.showAndSnapToGuides(this.halo.target,!0,Fa,5,500)}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta,H.isAltDown(),
H.isCtrlDown())}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onKeyUp",value:function(H){this.updateAlignmentGuide(!1)}}],[{key:"className",get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],ra,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:30521,end:32332})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("InspectHaloItem")&&"function"===typeof ra.InspectHaloItem?ra.InspectHaloItem:ra.InspectHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onMouseDown",value:function(H){var fa=this;(function(){var Fa,qb,nc,xc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if(1==Bd.nextAddress)return Bd.yield(System.import("lively.ide/js/inspector.js"),2);Fa=Bd.yieldResult;qb=Fa.default;(nc=fa.world().getSubmorphsByStyleClassName("Inspector").find(function(Cd){return Cd.targetObject==fa.halo.target}))&&(xc=nc.getWindow())?(xc.minimized=!1,xc.animate({center:fa.world().visibleBounds().center(),
duration:200})):qb.openInWindow({targetObject:fa.halo.target});fa.halo.remove();Bd.jumpToEnd()})})()}}],[{key:"className",get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32335,end:33237})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("EditHaloItem")&&"function"===typeof ra.EditHaloItem?ra.EditHaloItem:ra.EditHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,
da,[{key:"onMouseDown",value:function(H){var fa=this;(H=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Fa){return Fa.target==fa.halo.target}))?(H=H.getWindow(),H.bringToFront(),H.minimized=!1,H.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:"className",get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33240,end:34022})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("RotateHaloItem")&&"function"===
typeof ra.RotateHaloItem?ra.RotateHaloItem:ra.RotateHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){xb._get(Object.getPrototypeOf(sb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(H){this.setProperty("angle",
H)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(H){this.setProperty("scaleGauge",H)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(H){this.setProperty("initRotation",H)}},{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target;return this.scaleGauge?H.scale.toFixed(4).toString():Ha.num.toDegrees(H.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(H){this.detachFromLayout();
this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=H;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(H){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=H.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(H){this.scaleGauge=null;H=this.initRotation+(H-this.angle);H=Ha.num.toRadians(Ha.num.detent(Ha.num.toDegrees(H),
10,45));this.halo.target.rotation=H;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(H){var fa=this.scaleGauge,Fa=this.halo;fa||(fa=this.scaleGauge=H.scaleBy(1/Fa.target.scale));this.angle=H.theta();this.initRotation=Fa.target.rotation;Fa.target.scale=Ha.num.detent(H.dist(Ha.pt(0,0))/fa.dist(Ha.pt(0,0)),.1,.5);Fa.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(H){this.styleClasses=["fas",H?"fa-search-plus":"fa-redo"];this.tooltip=H?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(H){this.adaptAppearance(H.isShiftDown());
H.isShiftDown()?this.initScale(H.position.subPt(this.halo.target.globalPosition)):this.init(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(H){this.globalPosition=H.position.addPt(Ha.pt(-10,-10));this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.updateScale(H.position.subPt(this.halo.target.globalPosition)):this.update(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(H){this.adaptAppearance(H.isShiftDown());
this.stop()}},{key:"onKeyDown",value:function(H){this.adaptAppearance(H.isShiftDown())}},{key:"onKeyUp",value:function(H){this.adaptAppearance(H.isShiftDown())}}],[{key:"className",get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34024,end:37468})})(Ha.HaloItem);Ha.nameNumberRe=/(.+)([0-9]+)$/;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("ComponentHaloItem")&&"function"===typeof ra.ComponentHaloItem?ra.ComponentHaloItem:ra.ComponentHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"updateComponentIndicator",
value:function(){var H=this.world(),fa=this.halo.target;this.halo.remove();H.showHaloFor(fa)}},{key:"onMouseDown",value:function(){this.halo.target.isComponent=!this.halo.target.isComponent;this.updateComponentIndicator()}}],[{key:"className",get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=
this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37510,end:38256})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("CopyHaloItem")&&"function"===typeof ra.CopyHaloItem?
ra.CopyHaloItem:ra.CopyHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"init",value:function(H){function fa(ue,jd){return jd.match(Ha.nameNumberRe)?jd.replace(Ha.nameNumberRe,function(Gd,re,He){He||(He="0");for(Gd=Number(He);ue.get(re+ ++Gd););return re+Gd}):jd+"1"}var Fa=this.halo,qb=Fa.target,nc=Fa.world(),xc=qb instanceof Ha.MultiSelectionTarget;Fa.remove();Ha.connect(H,"update",this,
"update");if(xc){var Bd=qb.selectedMorphs.map(function(ue){return nc.addMorph(ue.copy())});xc=Bd.map(function(ue){ue.name=fa(qb,ue.name);return ue.position});Bd[0].undoStart("copy-halo");nc.addMorph(Fa);Fa.refocus(Bd);H.grab(Fa.target);Fa.target.onGrab({halo:Fa,hand:H,isShiftDown:function(){return!1}});xc.forEach(function(ue,jd){return Bd[jd].globalPosition=ue});Fa.alignWithTarget()}else{xc=qb.globalPosition;var Cd=qb.copy();qb.isComponent&&(Cd.isComponent=!1,Cd.withAllSubmorphsDoExcluding(function(ue){ue!=
Cd&&ue.master||delete ue._parametrizedProps},function(ue){return ue.master&&ue!=Cd}),Cd.master=qb);Cd.name=fa(qb,qb.name);nc.addMorph(Cd);Cd.globalPosition=xc;Cd.undoStart("copy-halo");H.grab(Cd);nc.addMorph(Fa);Fa.visible=!1}}},{key:"stop",value:function(H){var fa=this.halo,Fa=$jscomp.makeIterator(H.grabbedMorphs).next().value,qb=H.findDropTarget(H.globalPosition,[fa.target],function(xc){return!xc.isHaloItem&&!xc.ownerChain().some(function(Bd){return Bd.isHaloItem})}),nc=fa.target.undoInProgress;
Ha.disconnect(H,"update",this,"update");nc.addTarget(qb);H.dropMorphsOn(qb);fa.target.undoStop("copy-halo");fa.remove();H.world().showHaloFor(Fa)}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var H=this,fa,Fa,qb,nc,xc,Bd,Cd,ue,jd,Gd,re,He,yf,tf,yc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){switch(Ie.nextAddress){case 1:fa=
H;Fa=fa.halo;if(Fa.nameHalo().nameHolders.find(function(mf){return mf.nameHolder===$world.focusedMorph}))return Ie.return();qb=Fa.target;nc=Fa.world();xc=qb instanceof Ha.MultiSelectionTarget;Bd=qb.globalBounds().topLeft();Cd=xc?qb.selectedMorphs:[qb];ue=[];jd='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Fa.remove();Ie.setCatchFinallyBlocks(2);
Gd=$jscomp.makeIterator(Cd);re=Gd.next();case 4:if(re.done)return jd+="</body></html>",tf=JSON.stringify(ue),Ie.yield(H.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:jd},{type:"application/morphic",data:tf}]),8);He=re.value;return Ie.yield(Ha.createMorphSnapshot(He,{addPreview:!1,testLoad:!1}),7);case 7:yf=Ie.yieldResult;yf.copyMeta={offset:He.worldPoint(Ha.pt(0,0)).subPt(Bd)};ue.push(yf);jd+=He.renderPreview();re=Gd.next();Ie.jumpTo(4);break;case 8:Ie.leaveTryBlock(3);break;case 2:return yc=
Ie.enterCatchBlock(),nc.logError(yc),Ie.return();case 3:nc.addMorph(Fa),Fa.refocus(Cd),Fa.setStatusMessage("copied"),Ie.jumpToEnd()}})}},{key:"onMouseUp",value:function(H){var fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){H.stop();return Fa.yield(fa.copyToClipBoard(),0)})}}],[{key:"className",get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},
styleClasses:{defaultValue:["far","fa-clone"]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38258,end:42247})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("OriginHaloItem")&&"function"===typeof ra.OriginHaloItem?
ra.OriginHaloItem:ra.OriginHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"fill",get:function(){return Ha.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Ha.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",
value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(H){var fa=this.halo,Fa=fa.target.origin,qb=fa.target.worldPoint(Fa);
H=fa.target.localize(qb.addPt(H)).subPt(fa.target.scroll).subPt(Fa);fa.target.adjustOrigin(fa.target.origin.addPt(H))}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta)}}],[{key:"className",get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},
draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ha.componentAccent:Ha.haloBlue}}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42250,end:43881})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
sb=ra.hasOwnProperty("ResizeHandle")&&"function"===typeof ra.ResizeHandle?ra.ResizeHandle:ra.ResizeHandle=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target.extent,fa=H.y;return H.x.toFixed(1)+"x"+fa.toFixed(1)}},{key:"positionInHalo",value:function(){var H=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ha.Rectangle.prototype.sides.includes(this.location)&&
(this.visible=!1),H=H.insetBy(-4));return H.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(H){this.init(H.position,H.isShiftDown())}},{key:"onDragEnd",
value:function(H){this.stop(H.isShiftDown())}},{key:"onDrag",value:function(H){this.update(H.position,H.isShiftDown(),H.isAltDown(),H.isCtrlDown());this.focus()}},{key:"init",value:function(H,fa){fa=void 0===fa?!1:fa;var Fa=this.halo.target,qb=Fa.origin,nc=Fa.position;Fa=Fa.extent;this.startPos=H;this.startBounds=nc.subPt(qb).extent(Fa);this.startOrigin=this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();
H=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ha.num.toRadians(H%45);this.halo.toggleDiagonal(fa,this.corner)}},{key:"update",value:function(H,fa,Fa,qb){fa=void 0===fa?!1:fa;Fa=void 0===Fa?!1:Fa;qb=void 0===qb?!1:qb;var nc=this.corner,xc=this.tfm;H=this.startPos.subPt(H);xc=xc.transformDirection(Ha.pt(H.x,H.y));Fa&&(xc=xc.griddedBy(Ha.pt(10,10)));this.halo.updateBoundsFor(nc,fa,xc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(fa,nc);this.updateAlignmentGuide(Fa);
fa=[];nc=nc.toLowerCase();nc.includes("left")&&fa.push("left");nc.includes("top")&&fa.push("top");nc.includes("bottom")&&fa.push("bottom");nc.includes("right")&&fa.push("right");Ha.showAndSnapToResizeGuides(this.halo.target,fa,!0,qb,5,200)}},{key:"stop",value:function(H){H=this.halo;H.layout=this.savedLayout;H.state.activeButton=null;H.alignWithTarget();H.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ha.removeSnapToGuidesOf(H.target)}},{key:"updateAlignmentGuide",value:function(H){var fa=this.halo.getSubmorphNamed("mesh");
if(H)return H=this.halo.target.extent,H=Ha.pt(H.x%10,H.y%10),fa=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),H),this.focus(),fa;fa&&fa.remove()}}],[{key:"className",get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(H){0<H&&(H-=360);H=-8-(H/45).toFixed();0==H&&(H=8);return Ha.arr.zip(Ha.arr.rotate([["topLeft",
function(fa){return fa.negated()}],["topCenter",function(fa){return fa.withX(0).negated()}],["topRight",function(fa){return fa.withX(0).negated()}],["rightCenter",function(fa){return Ha.pt(0,0)}],["bottomRight",function(fa){return Ha.pt(0,0)}],["bottomCenter",function(fa){return Ha.pt(0,0)}],["bottomLeft",function(fa){return fa.withY(0).negated()}],["leftCenter",function(fa){return fa.withY(0).negated()}]],H),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize",
"rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(H){var fa=this;if(!H.target)return[];var Fa=H.target.getGlobalTransform().getRotation();return Ha.arr.compact(this.getResizeParts(Fa).map(function(qb){var nc=$jscomp.makeIterator(qb),xc=$jscomp.makeIterator(nc.next().value);qb=xc.next().value;xc.next();xc.next();xc=$jscomp.makeIterator(nc.next().value);nc=xc.next().value;xc=xc.next().value;
return fa.for(H,qb,xc,nc)})).map(function(qb){return qb.alignInHalo()})}},{key:"for",value:function(H,fa,Fa,qb){var nc="Resize "+fa;H=H.getSubmorphNamed(nc)||new this({name:nc,halo:H,corner:fa,tooltip:"Resize "+fa,extent:Ha.pt(10,10),borderWidth:1,borderRadius:0,borderColor:H.target.isComponent?Ha.componentAccent:Ha.haloBlue,fill:Ha.Color.white});return Object.assign(H,{nativeCursor:qb,location:Fa})}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:43941,end:49204})})(Ha.HaloItem);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("MenuHaloItem")&&"function"===typeof ra.MenuHaloItem?ra.MenuHaloItem:ra.MenuHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,
da,[{key:"onMouseDown",value:function(H){var fa=this,Fa,qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(nc){if(1==nc.nextAddress)return Fa=fa.halo.target,fa.halo.remove(),nc.yield(Fa.menuItems(),2);qb=nc.yieldResult;Fa.world().openMenu(qb).hasFixedPosition=fa.halo.hasFixedPosition;nc.jumpToEnd()})}}],[{key:"className",get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},
styleClasses:{defaultValue:["fas","fa-bars"]}}}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49207,end:49718})})(Ha.HaloItem);var qc=sa("M",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("MorphHighlighter")&&"function"===typeof ra.MorphHighlighter?
ra.MorphHighlighter:ra.MorphHighlighter=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=
this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(H){this.layoutHalo&&
this.layoutHalo.handleDrop(H)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:"className",get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ha.Color.orange.withA(.3)},
borderWidth:{defaultValue:2},borderColor:{defaultValue:Ha.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(H){var fa=this;this.setProperty("highlightedSides",H);this.submorphs=H.map(function(Fa){return{type:"ellipse",isHaloItem:!0,fill:Ha.Color.orange,center:fa.innerBounds()[Fa]()}});this.addMorph({type:"label",name:"name tag",padding:Ha.Rectangle.inset(5,5,5,5),fontColor:Ha.Color.white,fill:Ha.Color.orange,
borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(H){H=void 0===H?$world:H;var fa=H._morphHighlighters,Fa;for(Fa in fa)fa[Fa].remove();delete H._morphHighlighters}},{key:"for",value:function(H,fa,Fa,qb){Fa=void 0===Fa?!1:Fa;qb=void 0===qb?[]:qb;var nc=H._morphHighlighters=H._morphHighlighters||{};Ha.properties.forEachOwn(nc,
function(xc,Bd){return Bd.alignWithHalo()});if(!fa||fa.ownerChain().find(function(xc){return xc.isHaloItem}))return null;nc[fa.id]=nc[fa.id]||new this({targetId:fa.id,halo:H,showLayout:Fa});H.addMorph(nc[fa.id]);nc[fa.id].highlightedSides=qb;return nc[fa.id]}},{key:"interceptDrop",value:function(H,fa,Fa){(H=H._morphHighlighters=H._morphHighlighters||{},H[fa.id])&&H[fa.id].handleDrop(Fa)}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49908,end:53420})}(Ha.Morph));Ha.MorphHighlighter=qc;Ha.MorphHighlighter=qc;Ha.MorphHighlighter=qc;var Cb=sa("I",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),sb=ra.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof ra.InteractiveMorphSelector?ra.InteractiveMorphSelector:ra.InteractiveMorphSelector=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H,fa,Fa){H=void 0===H?$world:H;this.controllingMorph=void 0===fa?null:fa;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=H;this.filterFn=Fa;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var H=Ha.promise.deferred();H.promise.resolve=H.resolve;this.whenDone=
H.promise;this.selectorMorph=Ha.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ha.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ha.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Ha.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var H=this.world.firstHand.globalPosition;this.selectorMorph.center=H;this.selectorMorph.focus();
var fa=this.selectorMorph.morphBeneath(H),Fa,qb=this.possibleTarget,nc=this.controllingMorph,xc=this.filterFn,Bd=this.world,Cd=this.morphHighlighter;for(Cd==fa?fa=Cd.morphBeneath(H):fa&&fa.isEpiMorph&&(fa=fa.morphBeneath(H));fa&&(Fa=[fa].concat($jscomp.arrayFromIterable(fa.ownerChain())).find(function(ue){return!ue.visible}));)fa=Fa=Fa.morphBeneath(H);if(fa&&xc&&!xc(fa))for(;fa&&![fa].concat($jscomp.arrayFromIterable(fa.ownerChain())).find(xc);)fa=fa.morphBeneath(H);!fa||fa==qb||nc&&fa.ownerChain().includes(nc.getWindow())||
(Cd&&Cd.deactivate(),(this.possibleTarget=qb=fa)&&!qb.isWorld&&(H=this.morphHighlighter=Ha.MorphHighlighter.for(Bd,fa))&&H.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ha.MorphHighlighter.removeHighlighters(this.world);Ha.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:"className",get:function(){return"InteractiveMorphSelector"}},
{key:"selectMorph",value:function(H,fa,Fa){H=new this(H,fa,Fa);H.selectNewTarget();return H.whenDone}}],ra,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53429,end:56174})}(void 0));Ha.InteractiveMorphSelector=Cb;Ha.InteractiveMorphSelector=Cb;Ha.InteractiveMorphSelector=Cb;Ha.default=kb;var za=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js");za.show=Ga;za.showRect=function(da,ra,sb){var H=za.BoundsMarker.highlightBounds(ra);return sb?za.showInLoop(da,H,ra):za.showThenHide(da,H)};za.showInLoop=function(da,ra,sb){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){switch(fa.nextAddress){case 1:return za.showThenHide(da,ra,!1),fa.yield(za.promise.delay(300),2);case 2:H=!1,za.once(da,"onMouseDown",function(){return H=!0});case 3:if(H){fa.jumpTo(4);break}return fa.yield(ra.retract(sb),
3);case 4:ra.fadeOut(2E3),fa.jumpToEnd()}})};za.showThenHide=function(da,ra,sb){sb=void 0===sb?3:sb;if(da){var H=Array.isArray(ra)?ra:[ra];H.forEach(function(fa){return da.addMorph(fa)});sb&&setTimeout(function(){return H.forEach(function(fa){return fa.fadeOut(2E3)})},1E3*sb);return ra}};za.showLine=function(da,ra,sb){sb=void 0===sb?3E3:sb;var H=ra.start;ra=ra.end.subPt(H);var fa=da.addMorph({position:H,rotation:ra.theta(),border:{width:1,color:za.Color.red},width:ra.fastR(),height:0});sb&&setTimeout(function(){return fa.fadeOut()},
sb);return fa};za.showConnector=Mb;za.obj=mc;za.promise=Rc;za.string=eb;za.pt=Eb;za.Color=Vb;za.Rectangle=Ra;za.rect=Xc;za.morph=Wb;za.easings=vb;za.Path=Mc;za.Icon=Od;za.Morph=wd;za.MorphicEnv=Va;za.connect=Jb;za.once=Qb;za.disconnect=Bc;za.show=Ga;za.show=Ga;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),sb=ra.hasOwnProperty("BoundsMarker")&&"function"===typeof ra.BoundsMarker?ra.BoundsMarker:ra.BoundsMarker=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:Symbol.for("lively-instance-initialize"),value:function(){xb._get(Object.getPrototypeOf(sb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:za.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(H){H=H.insetBy(-2);H=Math.min(H.width,H.height);return Math.max(4,Math.floor(10>H/10?H/
2-5:H/10))}},{key:"createMarkerEdge",value:function(){return za.morph({fill:za.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var H=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),fa=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Fa=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),qb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),nc=this.bottomRightH||(this.bottomRightH=
this.addMorph(this.createMarkerEdge())),xc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),Bd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),Cd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[H,fa,Fa,qb,nc,xc,Bd,Cd]}},{key:"alignWithMorph",value:function(H){return this.alignWithBounds(H.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(H){this.alignWithRect(H.insetBy(-20));
return this.alignWithRect(H,!0)}},{key:"alignWithRect",value:function(H,fa){var Fa=this.ensureMarkerCorners(),qb=this.markerLength(H),nc=[H.topLeft().addXY(0,0).extent(za.pt(qb,5)),H.topLeft().addXY(0,0).extent(za.pt(5,qb)),H.topRight().addXY(-qb,0).extent(za.pt(qb,5)),H.topRight().addXY(-5,0).extent(za.pt(5,qb)),H.bottomRight().addXY(-5,-qb).extent(za.pt(5,qb)),H.bottomRight().addXY(-qb,-5).extent(za.pt(qb,5)),H.bottomLeft().addXY(0,-5).extent(za.pt(qb,5)),H.bottomLeft().addXY(0,-qb).extent(za.pt(5,
qb))];Fa.forEach(function(xc,Bd){return xc.setBounds(nc[Bd])});fa&&(this.adjustOrigin(H.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(H){var fa=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return qb.yield(fa.animate({scale:Math.max(30/H.width,1.05)}),2);Fa=fa.center;return qb.yield(fa.animate({center:Fa,scale:1,duration:300,easing:za.easings.inOutExpo}),0)})}}],[{key:"className",
get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(H){return(new this).alignWithMorph(H)}},{key:"highlightBounds",value:function(H){return(new this).alignWithBounds(H)}}],ra,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2261,end:5920})})(za.Morph);kb=sa("S",function(da){var ra=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),sb=ra.hasOwnProperty("StatusMessage")&&"function"===typeof ra.StatusMessage?ra.StatusMessage:ra.StatusMessage=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"relayout",value:function(){this.title=za.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},
{key:"setMessage",value:function(H,fa){this.message=H;this.color=fa}},{key:"slideTo",value:function(H){var fa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return fa.sliding=fa.animate({position:H,duration:500}),Fa.yield(fa.sliding,2);fa.sliding=!1;Fa.jumpToEnd()})}},{key:"expand",value:function(){var H=this,fa,Fa,qb,nc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xc){if(1==xc.nextAddress)return H.expandable?H.sliding?xc.yield(H.sliding,2):
xc.jumpTo(2):xc.return();fa=H.world();if(!fa||H.isMaximized)return xc.return();H.isMaximized=!0;H.stayOpen=!0;Fa=H.getSubmorphNamed("message text");Fa.lineWrapping=!1;Object.assign(Fa,{clipMode:"auto",fixedWidth:!0,selectable:!0});H.expandedContent&&(Fa.value=H.expandedContent);Fa.fit();qb=Fa.textBounds().extent();nc=fa.visibleBounds();qb.y>nc.extent().y&&(qb.y=nc.extent().y-20);qb.x>nc.extent().x&&(qb.x=nc.extent().x-20);qb=H.extent.maxPt(qb);H.animate({extent:qb,center:nc.center(),duration:200});
H.relayout();H.focus();xc.jumpToEnd()})}},{key:"fit",value:function(){var H=this.getSubmorphNamed("message text");H&&(this.extent=za.pt(100,35).maxPt(H.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var H=this.getSubmorphNamed("message text");H&&H.focus()}},{key:"onMouseUp",value:function(H){this.expand()}}],[{key:"className",get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:za.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},
isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(H){this.setProperty("message",H);var fa=this.getSubmorphNamed("message text");if(fa){fa.value=H;var Fa=fa.documentEndPosition;Fa.row>this.maxLines&&(fa.replace({start:{row:this.maxLines,column:0},end:Fa},"...\n"),this.expandedContent||
(this.expandedContent=H));Fa=fa.documentEndPosition;0!==Fa.column&&fa.insertText("\n",Fa)}}},title:{isStyleProp:!0,derived:!0,set:function(H){this.getSubmorphNamed("message title").value=H},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(H){this.get("message icon").fontColor=H;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=
H)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:za.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];za.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");za.connect(this,"extent",this,"relayout")}}}}}],ra,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:5964,end:10242})}(za.Morph));za.StatusMessage=kb;za.StatusMessage=kb;za.StatusMessage=kb;var Ca=sa("b",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),sb=ra.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof ra.StatusMessageForMorph?ra.StatusMessageForMorph:ra.StatusMessageForMorph=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return xb(sb,da,[{key:"alignAtBottomOf",value:function(H){var fa=this.world();fa&&(this.bringToFront(),this.fit(),this.width=H.bounds().width,this.relayout(),H.world()&&(this.position=H.owner.worldPoint(H.bounds().bottomLeft())),H=fa.visibleBounds(),H=this.bounds().top()+this.height-H.bottom(),0<H&&this.moveBy(za.pt(0,-H)))}},{key:"onMouseUp",value:function(H){}}],[{key:"className",get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},
renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var H=this.getProperty("targetMorph");return H&&$world.getMorphWithId(H)},set:function(H){this.setProperty("targetMorph",H?H.id:null);this.alignAtBottomOf(H)}},expandable:{after:["submorphs"],set:function(H){this.setProperty("expandable",H);if(H){var fa=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});za.connect(fa,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),za.disconnect(fa,"fire",this,"expand"))}}}}}],ra,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10467,end:12318})}(za.StatusMessage));za.StatusMessageForMorph=Ca;za.StatusMessageForMorph=Ca;za.StatusMessageForMorph=Ca;za.showConnector=Mb;za.showConnector=
Mb;var ma=lively.FreezerRuntime.recorderFor("lively.ide/index.js");ma.info="import via sub modules";ma.info="import via sub modules";ma.info="import via sub modules";var la=sa("v",{});ma.valueWidgets=la;ma.valueWidgets=la;ma.valueWidgets=la;var va=sa("p",{});ma.popovers=va;ma.popovers=va;ma.popovers=va;var cb=lively.FreezerRuntime.recorderFor("lively.components/popup.js");cb.Morph=wd;cb.VerticalLayout=lb;cb.StyleSheet=Ad;cb.Icon=Od;cb.CustomLayout=yb;cb.Color=Vb;cb.rect=Xc;cb.pt=Eb;cb.connect=Jb;
cb.Path=dc;cb.duration=300;ma=sa("P",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),sb=ra.hasOwnProperty("Popover")&&"function"===typeof ra.Popover?ra.Popover:ra.Popover=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"relayout",value:function(H){var fa=this.get("body"),Fa=this.get("arrow"),qb=this.get("close button");Fa=Fa.height;H?(fa.animate({topCenter:cb.pt(0,
Fa),duration:200}),qb.animate({topRight:fa.topRight.addXY(8,-8),duration:200})):(fa.topCenter=cb.pt(0,Fa),qb.topRight=fa.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:"className",get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:cb.pt(200,
200),fill:cb.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(H){var fa=this;this.get("body").addMorph(H);this.whenRendered().then(function(){return fa.relayout()})}},submorphs:{initialize:function(){var H=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:cb.pt(0,0),borderColor:cb.Color.transparent,vertices:[cb.pt(-10,0),cb.pt(0,-15),cb.pt(10,0)]},{name:"body"},{name:"close button",
type:"button",label:Object.assign(cb.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:cb.pt(16,16),borderColor:cb.Color.transparent}];var fa=$jscomp.makeIterator(this.submorphs);fa.next();var Fa=fa.next().value;fa=fa.next().value;cb.connect(fa,"fire",this,"close");cb.connect(Fa,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return H.animated=!0},1E3)}}}}}],ra,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(cb.Morph));cb.Popover=ma;cb.Popover=ma;cb.Popover=ma;var fb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");fb.Morph=wd;fb.TilingLayout=Zb;fb.morph=Wb;fb.Label=Ic;fb.HorizontalLayout=Jc;fb.Icon=Od;fb.InputLine=Sb;fb.config=$a;fb.connect=Jb;fb.signal=Ac;fb.Color=Vb;fb.LinearGradient=wb;fb.pt=Eb;fb.rect=Xc;fb.num=zc;fb.obj=
mc;fb.popovers=va;fb.ValueScrubber=bb;fb.Popover=ma;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof ra.ContextSensitiveWidget?ra.ContextSensitiveWidget:ra.ContextSensitiveWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,void 0,[{key:"className",get:function(){return"ContextSensitiveWidget"}},
{key:"properties",get:function(){return{fill:{defaultValue:fb.Color.transparent},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?fb.Color.white:fb.Color.black}},layout:{initialize:function(){this.layout=new fb.HorizontalLayout}},context:{serialize:!1}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2439})})(fb.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("ShortcutWidget")&&"function"===typeof ra.ShortcutWidget?ra.ShortcutWidget:ra.ShortcutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onMouseDown",value:function(H){this.openPopover()}},
{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){H.jumpToEnd()})}}],[{key:"className",get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(H){this.setProperty("title",H);this.getSubmorphNamed("valueString").value=H}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(fa){return fa.fontColor=H})}},submorphs:{initialize:function(){this.submorphs=
[fb.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:fb.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:fb.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:2441,end:3667})})(fb.ContextSensitiveWidget);va=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("LayoutWidget")&&"function"===typeof ra.LayoutWidget?ra.LayoutWidget:ra.LayoutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+
" Layout":"No Layout"}},{key:"openPopover",value:function(){var H=this,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return fa=new fb.popovers.LayoutPopover({hasFixedPosition:!!H.ownerChain().find(function(qb){return qb.hasFixedPosition}),container:H.context}),Fa.yield(fa.fadeIntoWorld(H.globalBounds().center()),2);fb.connect(fa,"layoutChanged",H,"layoutChanged");fb.signal(H,"openWidget",fa);Fa.jumpToEnd()})}}],[{key:"className",get:function(){return"LayoutWidget"}},
{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3676,end:4493})}(fb.ShortcutWidget);
fb.LayoutWidget=va;fb.LayoutWidget=va;fb.LayoutWidget=va;ma=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("ColorWidget")&&"function"===typeof ra.ColorWidget?ra.ColorWidget:ra.ColorWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"relayout",value:function(H){H?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():
this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var H=this.color;if(2*H.stops.length==this.submorphs.length-3){var fa;for(fa in this.color.stops){var Fa=H.stops[fa];var qb=Fa.color,nc=Fa.offset,xc=$jscomp.makeIterator(this.submorphs[2+2*fa].submorphs).next().value;Fa=this.submorphs[3+2*fa];xc.fill=qb;Fa.value=(100*nc).toFixed()+"%"+(fa<H.stops.length-1?",":"")}}else this.submorphs=
this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=fb.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:fb.pt(15,
15),fill:fb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:fb.pt(5,7.5),fill:fb.Color.white,borderColor:fb.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[fb.pt(0,0),fb.pt(10,10)],borderColor:fb.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:fb.pt(15,15),fill:fb.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:fb.pt(5,7.5),fill:this.color,borderColor:fb.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:fb.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var H=this.color,fa=[{type:"label",padding:fb.rect(0,0,5,0),value:"linearGradient"==H.type?fb.num.toDegrees(H.vectorAsAngle()).toFixed()+"\u00b0,":""}],Fa;for(Fa in H.stops){var qb=H.stops[Fa],nc=qb.color;qb=qb.offset;fa.push({extent:fb.pt(this.fontSize,
this.fontSize),fill:fb.Color.transparent,layout:new fb.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:nc}]});fa.push({type:"label",padding:fb.rect(0,0,5,0),value:(100*qb).toFixed()+"%"+(Fa<H.stops.length-1?",":"")})}return fa}},{key:"onMouseDown",value:function(H){this.openFillEditor()}},{key:"update",value:function(H){this.color=H}},{key:"openFillEditor",value:function(){var H=this,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return fa=
new fb.popovers.FillPopover({hasFixedPosition:!!H.ownerChain().find(function(qb){return qb.hasFixedPosition}),handleMorph:H.context,fillValue:H.color,title:"Fill Control",gradientEnabled:H.gradientEnabled}),Fa.yield(fa.fadeIntoWorld(H.globalBounds().center()),2);fb.connect(fa,"fillValue",H,"update");fb.signal(H,"openWidget",fa);Fa.jumpToEnd()})}}],[{key:"className",get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new fb.HorizontalLayout({direction:"centered"})}},
selectionFontColor:{defaultValue:fb.Color.white},nonSelectionFontColor:{defaultValue:fb.Color.black},color:{defaultValue:fb.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(H){this.getProperty("isSelected")!=H&&(this.getSubmorphNamed("valueString").fontColor=H?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",H))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){fb.connect(this,
"color",this,"relayout",{converter:function(H,fa){return(fa&&fa.isColor)!=(H&&H.isColor)}});this.relayout(!0)}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4557,end:9992})}(fb.ContextSensitiveWidget);fb.ColorWidget=ma;fb.ColorWidget=ma;fb.ColorWidget=ma;var ec=function(da){var ra=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("BooleanWidget")&&"function"===typeof ra.BooleanWidget?ra.BooleanWidget:ra.BooleanWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onMouseDown",value:function(H){this.boolean=!this.boolean}}],[{key:"className",get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:fb.config.codeEditor.defaultStyle.fontFamily},
nativeCursor:{defaultValue:"pointer"},boolean:{set:function(H){this.setProperty("boolean",H);this.value=fb.obj.safeToString(H);this.fontColor=this.boolean?fb.Color.green:fb.Color.red}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10001,end:10481})}(fb.Label);fb.BooleanWidget=
ec;fb.BooleanWidget=ec;fb.BooleanWidget=ec;var Nc=sa("N",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("NumberWidget")&&"function"===typeof ra.NumberWidget?ra.NumberWidget:ra.NumberWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onMouseDown",value:function(H){xb._get(Object.getPrototypeOf(sb.prototype),"onMouseDown",this).call(this,
H);"up"==H.targetMorph.name&&this.increment();"down"==H.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return fb.obj.dissoc(xb._get(Object.getPrototypeOf(sb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(H,fa){fa=void 0===fa?!0:fa;this.setProperty("number",fa?H/this.scaleFactor:H);fb.signal(this,"number",this.number);this.relayout(fa)}},{key:"relayoutButtons",value:function(){var H=this.getSubmorphNamed("up"),fa=this.getSubmorphNamed("down");this.getSubmorphNamed("value");
H.height=fa.height=(this.height-2)/2;H.width=fa.width=20}},{key:"onChange",value:function(H){xb._get(Object.getPrototypeOf(sb.prototype),"onChange",this).call(this,H);"extent"!=H.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(H){var fa=this.getSubmorphNamed("value");fa&&(this.autofit?(H||(fa.value=this.number*this.scaleFactor),fa.fit(),this.height=fa.height,this.width=fa.width+20):H||(fa.width=this.width-20),this.relayoutButtons(),H||(fa.value=fb.num.roundTo(this.number*this.scaleFactor,
1),fa.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,fa.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,fa.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:"className",get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{},
autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(H){this.setProperty("autofit",H);this.getSubmorphNamed("value").scaleToBounds=!H}},number:{defaultValue:0,after:["unit","autofit"],set:function(H){this.setProperty("number",H);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(H){this.setProperty("floatingPoint",H);this.get("value").floatingPoint=H},get:function(){var H=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);
return this.getProperty("floatingPoint")||1==this.scaleFactor&&H&&!!H[1]}},padding:{isStyleProp:!0,defaultValue:fb.rect(5,3,0,0),after:["submorphs"],set:function(H){this.setProperty("padding",H);this.getSubmorphNamed("value").padding=H}},extent:{defaultValue:fb.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(H){this.get("value").baseFactor=H}},
styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:fb.Color.rgbHex("#0086b3"),set:function(H){this.setProperty("fontColor",H)}},isSelected:{set:function(H){this.getProperty("isSelected")!=H&&(H?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",H))}},fontFamily:{defaultValue:"Sans-Serif",
isStyleProp:!0,set:function(H){this.setProperty("fontFamily",H)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(H){this.setProperty("fontSize",H)}},layout:{initialize:function(){this.layout=new fb.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var H=this;this.submorphs=[new fb.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),fb.Icon.makeLabel("sort-up",
{name:"up"}),fb.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];fb.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return H.relayout()})}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10490,end:16340})}(fb.Morph));fb.NumberWidget=
Nc;fb.NumberWidget=Nc;fb.NumberWidget=Nc;var pd=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("ShadowWidget")&&"function"===typeof ra.ShadowWidget?ra.ShadowWidget:ra.ShadowWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==
Fa.nextAddress)return fa=new fb.popovers.ShadowPopover({hasFixedPosition:!!H.ownerChain().find(function(qb){return qb.hasFixedPosition}),shadowValue:H.shadowValue}),Fa.yield(fa.fadeIntoWorld(H.globalBounds().center()),2);fb.connect(fa,"shadowValue",H,"shadowValue");fb.connect(H,"shadowValue",H,"update");fb.signal(H,"openWidget",fa);Fa.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():
this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var H=this.shadowValue,fa=H.blur,Fa=H.spread,qb=H.distance;H=H.color;var nc=$jscomp.makeIterator(this.submorphs),xc=nc.next().value,Bd=nc.next().value;Bd=$jscomp.makeIterator(Bd.submorphs).next().value;nc=nc.next().value;xc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Bd.fill=H;nc.value=", "+
fa+"px, "+qb+"px, "+Fa+"px)"}},{key:"initShadowDisplay",value:function(){var H=this.shadowValue,fa=H.blur,Fa=H.spread,qb=H.distance;H=H.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},fb.morph({fill:fb.Color.transparent,extent:fb.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:fb.pt(this.fontSize,this.fontSize),position:fb.pt(2,2),fill:H,borderColor:fb.Color.black,borderWidth:1}]}),{name:"valueString",
type:"label",opacity:.7,reactsToPointer:!1,value:", "+fa+"px, "+qb+"px, "+Fa+"px)"}]}}],[{key:"className",get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(H){this.setProperty("shadowValue",H);this.renderShadowDisplay()}},fill:{defaultValue:fb.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(fa){return fa.fontColor=
H})}},isSelected:{defaultValue:!1,set:function(H){this.setProperty("isSelected",H);this.fontColor=H?fb.Color.white:fb.Color.black}},layout:{initialize:function(){this.layout=new fb.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:16349,end:19359})}(fb.Morph);fb.ShadowWidget=pd;fb.ShadowWidget=pd;fb.ShadowWidget=pd;var Yd=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("PointWidget")&&"function"===typeof ra.PointWidget?ra.PointWidget:ra.PointWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",
value:function(){var H=this,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return fa=new fb.popovers.PointPopover({pointValue:H.pointValue,hasFixedPosition:!!H.ownerChain().find(function(qb){return qb.hasFixedPosition})}),Fa.yield(fa.fadeIntoWorld(H.globalBounds().center()),2);fb.connect(fa,"pointValue",H,"pointValue");fb.signal(H,"openWidget",fa);Fa.jumpToEnd()})}}],[{key:"className",get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",
set:function(H){this.setProperty("isSelected",H);this.fontColor=H?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:fb.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:fb.Color.black},fontFamily:{defaultValue:fb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(H){var fa=fb.Color.rgbHex("#0086b3");this.setProperty("pointValue",
H);this.textAndAttributes=["pt(",null,H.x.toFixed(),{fontColor:fa},",",{},H.y.toFixed(),{fontColor:fa},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19368,end:20996})}(fb.Label);
fb.PointWidget=Yd;fb.PointWidget=Yd;fb.PointWidget=Yd;var uc=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("PaddingWidget")&&"function"===typeof ra.PaddingWidget?ra.PaddingWidget:ra.PaddingWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=
this,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return fa=new fb.popovers.RectanglePopover({hasFixedPosition:!!H.ownerChain().find(function(qb){return qb.hasFixedPosition}),rectangle:H.rectangle}),fa.relayout(),Fa.yield(fa.fadeIntoWorld(H.globalBounds().center()),2);fb.connect(fa,"rectangle",H,"rectangle");fb.signal(H,"openWidget",fa);Fa.jumpToEnd()})}}],[{key:"className",get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},
styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:fb.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?fb.Color.white:fb.Color.black}},rectangle:{defaultValue:fb.rect(0),set:function(H){this.setProperty("rectangle",H);this.value=fb.obj.safeToString(H)}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21005,end:22054})}(fb.Label);fb.PaddingWidget=uc;fb.PaddingWidget=uc;fb.PaddingWidget=uc;var Qd=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("IconWidget")&&"function"===typeof ra.IconWidget?ra.IconWidget:ra.IconWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"onMouseDown",
value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return fa=new fb.popovers.IconPopover({hasFixedPosition:!!H.ownerChain().find(function(qb){return qb.hasFixedPosition})}),Fa.yield(fa.fadeIntoWorld(H.globalBounds().center()),2);fb.connect(fa,"select",H,"iconValue",{converter:function(qb){return qb&&fb.Icon.makeLabel(qb).value},varMapping:{Icon:Od}});fb.signal(H,"openWidget",
fa);Fa.jumpToEnd()})}}],[{key:"className",get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:fb.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},set:function(H){this.value=H||"No Icon"}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22063,end:22959})}(fb.Label);fb.IconWidget=Qd;fb.IconWidget=Qd;fb.IconWidget=Qd;var cd=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),sb=ra.hasOwnProperty("StringWidget")&&"function"===typeof ra.StringWidget?ra.StringWidget:ra.StringWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"truncate",
value:function(H){return 200<H.length?H.slice(0,20)+"...":H}},{key:"onFocus",value:function(H){var fa=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){if(1==qb.nextAddress)return xb._get(Object.getPrototypeOf(sb.prototype),"onFocus",fa).call(fa,H),fa.readOnly?qb.return():fa.stringTooLong?qb.yield(fa.world().editPrompt("edit string",{requester:fa,input:fa.stringValue}),2):(fa.borderColor=fb.Color.white.withA(.9),fa.textString=fa.stringValue,qb.return());Fa=qb.yieldResult;if("string"===
typeof Fa)fa.onInput(Fa);qb.jumpToEnd()})}},{key:"onBlur",value:function(H){xb._get(Object.getPrototypeOf(sb.prototype),"onBlur",this).call(this,H);this.readOnly||(this.borderColor=fb.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(H){this.owner.focus();fb.signal(this,"inputAccepted",H);this.stringValue=H}}],[{key:"className",get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:fb.Color.transparent},fontColor:{defaultValue:fb.Color.blue},
nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:fb.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:fb.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(H){this.setProperty("stringValue",H);this.textString=this.truncate(H);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},
isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?fb.Color.white:fb.Color.blue}}}}}],ra,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22968,end:24888})}(fb.InputLine);fb.StringWidget=cd;fb.StringWidget=cd;fb.StringWidget=cd;fb.valueWidgets=
la;Object.assign(fb.valueWidgets,{NumberWidget:Nc,StringWidget:cd,IconWidget:Qd,PaddingWidget:uc,ShadowWidget:pd,PointWidget:Yd,BooleanWidget:ec,LayoutWidget:va,ColorWidget:ma});var zb=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");zb.Ellipse=Kb;zb.Icon=Od;zb.Morph=wd;zb.Path=Mc;zb.Text=bd;zb.HorizontalLayout=Jc;zb.VerticalLayout=lb;zb.morph=Wb;zb.Color=Vb;zb.pt=Eb;zb.rect=Xc;zb.Rectangle=Ra;zb.arr=Fc;zb.connect=Jb;zb.disconnect=Bc;zb.LabeledCheckBox=wc;zb.DropDownSelector=fc;zb.Button=
bc;zb.Menu=Tb;zb.NumberWidget=Nc;zb.InteractiveMorphSelector=Cb;zb.easings=vb;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("AxisHalo")&&"function"===typeof ra.AxisHalo?ra.AxisHalo:ra.AxisHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var fa=H.halo;H=H.targetAxis;xb._get(Object.getPrototypeOf(sb.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,{fill:zb.Color.transparent,halo:fa,targetAxis:H,container:fa.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(H){this._forceMenuHidden=
H;this.axisMenu.visible=!H}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=
!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(H){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var H=this,fa=this,Fa=this.proportionViewer();return this.halo.addGuide(new zb.Morph({nativeCursor:this.getResizeCursor(),fill:zb.Color.transparent,submorphs:[this.devider(),Fa],alignWithTarget:function(){this.setBounds(fa.getProportionSliderBounds(this))},onDragStart:function(){Fa.visible=!0},onDrag:function(qb){H.adjustStretch(H.getDelta(qb));
H.halo.alignWithTarget()},onDragEnd:function(){Fa.visible=!1}}))}},{key:"devider",value:function(){return new zb.Morph({visible:!this.lastAxis,fill:zb.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var H=this,fa=this,Fa=this.minSpaceVisualizer(),qb=this.minViewer();return this.halo.addGuide(new zb.Ellipse({nativeCursor:this.getResizeCursor(),fill:zb.Color.green,extent:zb.pt(10,10),visible:!1,submorphs:[Fa,qb],becomesActiveOnHover:!0,
alignWithTarget:function(){this.position=fa.getMinSliderPosition()},requestToShow:function(){this.visible=!fa.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){fa.forceMenuHidden=!0;qb.visible=!0;this.active=Fa.visible=!0},onDrag:function(nc){H.targetAxis.min+=-H.getDelta(nc);H.halo.alignWithTarget()},onDragEnd:function(){fa.forceMenuHidden=!1;qb.visible=!1;this.active=Fa.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},
{key:"minViewer",value:function(){var H=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+H.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new zb.Path(Object.assign({position:zb.pt(-1,-1),borderStyle:"dashed",borderColor:zb.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var H=this,fa=this.minSpaceBorder();return this.halo.addGuide(new zb.Morph({fill:zb.Color.green.withA(.1),
visible:!1,isHaloItem:!0,submorphs:[fa],alignWithTarget:function(){this.extent=H.getMinSpaceExtent();this.topLeft=zb.pt(5,5)}}))}},{key:"axisMenu",value:function(){var H=this.lockButton(),fa=this.menuButton(),Fa=this;return new zb.Morph({layout:this.getMenuLayout(),submorphs:[H,fa],fill:zb.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Fa.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var H=this;return this.halo.addGuide(new zb.Morph({fill:zb.Color.transparent,
extent:zb.pt(25,25),submorphs:[{center:zb.pt(12.5,12.5),fill:zb.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){H.targetAxis.fixed?(this.fontColor=zb.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=zb.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){H.targetAxis.fixed=!H.targetAxis.fixed;H.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var H=this,
fa=this;return new zb.Morph({fill:zb.Color.transparent,extent:zb.pt(25,25),submorphs:[{fill:zb.Color.transparent,styleClasses:["fa","fa-cog"],center:zb.pt(12.5,12.5)}],onMouseDown:function(Fa){fa.forceMenuVisible=!0;this.addMorph(Fa.state.menu=new zb.Menu({position:zb.pt(15,15),items:[["Remove "+fa.subject,function(){H.targetAxis.remove();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+fa.subject+" before",function(){H.targetAxis.addBefore();H.halo.initGuides();H.halo.alignWithTarget()}],
["Insert "+fa.subject+" after",function(){H.targetAxis.addAfter();H.halo.initGuides();H.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(H){var fa=H.position;H=H.alignWithTarget;return this.halo.addGuide(new zb.Text({styleClasses:["Halo"],padding:zb.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:zb.Color.white,fill:zb.Color.black.withA(.5),position:fa,alignWithTarget:H,readOnly:!0}))}},{key:"proportionViewer",value:function(){var H=this;return this.viewer({position:this.getProportionViewerPosition(),
alignWithTarget:function(){this.textString=H.targetAxis.length.toFixed(1)+"px"}})}}],[{key:"className",get:function(){return"AxisHalo"}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(zb.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
sb=ra.hasOwnProperty("RowHalo")&&"function"===typeof ra.RowHalo?ra.RowHalo:ra.RowHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var fa=H.row;H=H.halo;xb._get(Object.getPrototypeOf(sb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.row(fa),halo:H})}},{key:"subject",get:function(){return"row"}},
{key:"adjustStretch",value:function(H){this.targetAxis.height+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return zb.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return zb.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.height?zb.pt(2,5):zb.pt(26,10)}},{key:"getMenuLayout",value:function(){return new zb.VerticalLayout}},
{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return zb.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return zb.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return zb.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:zb.pt(this.container.width+50,2),vertices:[zb.pt(0,1),zb.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return zb.pt(40,
20)}},{key:"getProportionSliderBounds",value:function(H){return zb.pt(0,H.owner.height-5).extent(zb.pt(40,10))}},{key:"getDeviderBounds",value:function(){return zb.pt(15,4).extent(zb.pt(25,2))}}],[{key:"className",get:function(){return"RowHalo"}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:7981,end:9208})})(zb.AxisHalo);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("ColumnHalo")&&"function"===typeof ra.ColumnHalo?ra.ColumnHalo:ra.ColumnHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var fa=H.col;H=H.halo;xb._get(Object.getPrototypeOf(sb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,{targetAxis:H.target.col(fa),halo:H})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(H){this.targetAxis.width+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return zb.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return zb.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>
H.width?zb.pt(5,3):zb.pt(8,26)}},{key:"getMenuLayout",value:function(){return new zb.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return zb.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return zb.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return zb.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:zb.pt(2,this.container.height+
50),vertices:[zb.pt(1,0),zb.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return zb.pt(20,40)}},{key:"getProportionSliderBounds",value:function(H){return zb.pt(H.owner.width-5,0).extent(zb.pt(10,40))}},{key:"getDeviderBounds",value:function(){return zb.pt(4,15).extent(zb.pt(2,25))}}],[{key:"className",get:function(){return"ColumnHalo"}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(zb.AxisHalo);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("CellGuide")&&"function"===typeof ra.CellGuide?ra.CellGuide:ra.CellGuide=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"menuItems",
value:function(){var H=this,fa=zb.Icon.textAttribute("check-square-o"),Fa=zb.Icon.textAttribute("square-o");fa[1].textStyleClasses.push("annotation");Fa[1].textStyleClasses.push("annotation");Fa[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Fa:fa)),function(){H.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?fa:Fa)),function(){H.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new zb.Rectangle).sides),
$jscomp.arrayFromIterable((new zb.Rectangle).corners)).map(function(qb){return[[qb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(H.cellGroup.align==qb?fa:Fa),["  ",null]),function(){return H.cellGroup.align=qb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var qb=H.cellGroup.morph;qb&&(H.world().firstHand.grab(qb),H.world().firstHand.longClickGrab=!0,qb.position=zb.pt(0))}]]:[])}}],[{key:"className",get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],
ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(zb.Morph);(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("LayoutHalo")&&"function"===typeof ra.LayoutHalo?ra.LayoutHalo:ra.LayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,void 0,[{key:"className",get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:zb.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(zb.Morph);la=sa("G",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("GridLayoutHalo")&&"function"===typeof ra.GridLayoutHalo?ra.GridLayoutHalo:ra.GridLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return xb(sb,da,[{key:"previewDrop",value:function(H){1>H.length||(H=this.cellGuides.find(function(fa){return fa.fullContainsWorldPoint($world.firstHand.position)}),H!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=H)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(H){var fa=this;this.currentCell&&H.whenRendered().then(function(){return fa.currentCell.cellGroup.morph=H})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();
this.focus()}},{key:"optionControls",value:function(){var H=this.target,fa=new zb.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:zb.Color.transparent,checked:H.compensateOrigin}),Fa=new zb.LabeledCheckBox({label:"Resize Submorphs",fill:zb.Color.transparent,name:"fitToCell",checked:H.fitToCell});zb.connect(fa,"checked",H,"compensateOrigin");zb.connect(Fa,"checked",H,"fitToCell");zb.connect(fa,"checked",this,"alignWithTarget");return[fa,Fa]}},{key:"isLayoutHalo",get:function(){return!1}},
{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();zb.arr.reverse(this.guides).forEach(function(H){return H.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var H=this;zb.arr.withoutAll(this.target.cellGroups,this.guides.map(function(fa){return fa.cellGroup})).forEach(function(fa){return H.addMorph(H.cellGuide(fa))})}},
{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var H=this,fa=this.addMorph({fill:zb.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Fa){fa.addMorph(H.cellGuide(Fa))});this.cellGuides=fa.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(H){H.isHaloItem=!0;this.guides.push(H);return H}},{key:"initRowGuides",
value:function(){var H=this,fa=this;this.addGuide(this.addMorph(new zb.Morph({width:25,fill:zb.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:zb.pt(-5,0),alignWithTarget:function(){this.height=fa.container.height}})));zb.arr.range(0,this.target.rowCount-1).forEach(function(Fa){H.addMorph(new zb.RowHalo({row:Fa,halo:H}))})}},{key:"initColumnGuides",value:function(){var H=this,fa=this;this.addGuide(this.addMorph(new zb.Morph({height:25,fill:zb.Color.gray.withA(.7),borderRadius:15,
width:this.container.width,bottomLeft:zb.pt(0,-5),alignWithTarget:function(){this.width=fa.container.width}})));zb.arr.range(0,this.target.columnCount-1).forEach(function(Fa){H.addMorph(new zb.ColumnHalo({col:Fa,halo:H}))})}},{key:"resizer",value:function(){var H=this;return this.addGuide(new zb.Morph({fill:zb.Color.transparent,extent:zb.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(fa){H.container.resizeBy(fa.state.dragDelta);H.alignWithTarget()},alignWithTarget:function(){this.bottomRight=
H.extent}}))}},{key:"cellResizer",value:function(H,fa){var Fa=this,qb="topLeft"==fa?"bottomRight":"topLeft";return new zb.Ellipse({borderWidth:1,visible:!1,borderColor:zb.Color.black,nativeCursor:"nwse-resize",removeCell:function(nc){H.disconnect(nc);Fa.alignWithTarget()},addCell:function(nc){H.connect(nc);Fa.alignWithTarget()},start:function(){this.fixpointCell=H[qb];this.draggedDelta=H.bounds().partNamed(fa);this.debugMorph=Fa.addMorph(new zb.Morph({fill:zb.Color.orange.withA(.5)}))},update:function(nc){var xc=
this;this.draggedDelta=this.draggedDelta.addPt(nc);var Bd=zb.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Bd);Fa.cells.forEach(function(Cd){var ue=Bd.intersection(Cd.bounds()).area()/Cd.bounds().area();H.includes(Cd)&&.1>ue&&xc.removeCell(Cd);!H.includes(Cd)&&ue>1/3&&xc.addCell(Cd)})},onDragEnd:function(nc){this.debugMorph.remove()},onDragStart:function(nc){this.start(nc.position)},onDrag:function(nc){this.update(nc.state.dragDelta)}})}},{key:"cellGuide",
value:function(H){var fa=this,Fa=this.cellResizer(H,"topLeft"),qb=this.cellResizer(H,"bottomRight");return this.addGuide(new zb.CellGuide({cellGroup:H,bounds:H.bounds(),fill:zb.Color.transparent,borderColor:zb.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Fa,qb],onMouseDown:function(nc){this.becomeActive()},deactivate:function(){this.borderColor=zb.Color.orange;this.fill=zb.Color.transparent;this.submorphs.forEach(function(nc){nc.visible=!1})},becomeActive:function(){fa.guides.forEach(function(nc){nc.isCell&&
nc.deactivate()});this.borderColor=zb.Color.rgbHex("#1565C0");this.fill=zb.Color.rgbHex("#1565C0").withA(.3);fa.addMorph(this.remove());this.submorphs.forEach(function(nc){nc.visible=!0})},startPreview:function(nc){this.fill=zb.Color.orange.withA(.7)},stopPreview:function(nc){this.fill=zb.Color.transparent},onDrop:function(nc){var xc=$jscomp.makeIterator(nc.hand.grabbedMorphs).next().value;nc.hand.dropMorphsOn(fa.container);H.morph=xc},alignWithTarget:function(){H.bounds().isNonEmpty()?(this.setBounds(H.bounds()),
Fa.center=this.innerBounds().topLeft(),qb.center=this.innerBounds().bottomRight()):(zb.arr.remove(fa.guides,this),this.remove())}}))}}],[{key:"className",get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:zb.Color.transparent},cells:{derived:!0,get:function(){return zb.arr.flatten(this.target.col(0).items.map(function(H){return H.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],ra,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(zb.LayoutHalo));zb.GridLayoutHalo=la;zb.GridLayoutHalo=la;zb.GridLayoutHalo=la;va=function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof ra.TilingLayoutHalo?ra.TilingLayoutHalo:ra.TilingLayoutHalo=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"remove",value:function(){xb._get(Object.getPrototypeOf(sb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(H){}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},
{key:"previewDrop",value:function(H){var fa=this;0<this.previews.length||(this.previews=H.map(function(Fa){return fa.container.addMorph({type:zb.DropPreview,bounds:Fa.bounds()})}),this.previews.forEach(function(Fa){Fa.step()}))}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"updateAxis",value:function(H){this.target.axis=H}},{key:"updateAlign",value:function(H){this.target.align=H}},{key:"optionControls",value:function(){var H=this.target,fa=new zb.DropDownSelector({borderRadius:2,
padding:3,selectedValue:H.axis,values:["row","column"]}),Fa=new zb.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.align,values:["left","center"]});H=new zb.NumberWidget({min:0,number:H.spacing,padding:zb.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:zb.Color.gray,unit:"px"});zb.connect(H,"update",this,"updateSpacing");zb.connect(Fa,"update",this,"updateAlign");zb.connect(fa,"update",this,"updateAxis");var qb={type:"label",padding:zb.rect(0,5,5,5),fill:zb.Color.transparent,fontColor:zb.Color.gray.darker(),
readOnly:!0};return[[Object.assign({},qb,{textString:"Submorph Spacing"}),H],[Object.assign({},qb,{textString:"Tiling Align"}),Fa],[Object.assign({},qb,{textString:"Tiling Axis"}),fa]].map(function(nc){return{submorphs:nc,fill:null,layout:new zb.HorizontalLayout({spacing:3})}})}}],[{key:"className",get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:zb.Color.transparent},previews:{defaultValue:[]}}}}],ra,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(zb.LayoutHalo);zb.TilingLayoutHalo=va;zb.TilingLayoutHalo=va;zb.TilingLayoutHalo=va;(function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("DropPreview")&&"function"===typeof ra.DropPreview?ra.DropPreview:ra.DropPreview=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var H=this,fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return fa=zb.easings.inOutQuad,Fa.yield(H.animate({opacity:.5,duration:(H.pulseDuration-10)/2,easing:fa}),2);if(3!=Fa.nextAddress)return Fa.yield(H.animate({opacity:1,duration:(H.pulseDuration-
10)/2,easing:fa}),3);H.stopped||H.step();Fa.jumpToEnd()})}}],[{key:"className",get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:zb.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:zb.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],ra,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(zb.Morph);va=sa("F",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof ra.FlexLayoutHalo?ra.FlexLayoutHalo:ra.FlexLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"handleDrop",value:function(H){}},{key:"previewDrop",value:function(H){var fa=this;0<this.previews.length||(this.previews=H.map(function(Fa){return fa.container.addMorph({type:zb.DropPreview,position:fa.container.localize(fa.world().firstHand.position),extent:Fa.bounds().extent()})}),this.previews.forEach(function(Fa){Fa.step()}))}},{key:"remove",value:function(){xb._get(Object.getPrototypeOf(sb.prototype),
"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"onDrop",value:function(H){this.removePreviews();H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(H){H&&(this.originalExtent=this.container.extent);this.target.autoResize=H;H||(this.container.extent=this.originalExtent||
this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(H){this.target.resizeSubmorphs=H;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(H){this.target.align=H}},{key:"updateDirectionPolicy",value:function(H){this.target.direction=H}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"optionControls",value:function(){var H=this.target,fa=H.possibleAlignValues?{fill:zb.Color.transparent,layout:new zb.HorizontalLayout({spacing:3,
direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new zb.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:H.align,values:H.possibleAlignValues})]}:null,Fa=H.possibleDirectionValues?{fill:zb.Color.transparent,layout:new zb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new zb.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:H.direction,values:H.possibleDirectionValues})]}:
null,qb=new zb.NumberWidget({fill:zb.Color.white,borderWidth:1,borderRadius:4,padding:zb.rect(5,4,0,0),borderColor:zb.Color.gray,min:0,number:H.spacing,unit:"px"}),nc=new zb.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:zb.Color.transparent,checked:H.autoResize});H=new zb.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:zb.Color.transparent,checked:H.resizeSubmorphs});zb.connect(qb,"update",this,"updateSpacing");zb.connect(nc,
"checked",this,"updateAutoResizePolicy");zb.connect(H,"checked",this,"updateResizeSubmorphsPolicy");fa&&zb.connect(fa.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Fa&&zb.connect(Fa.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[nc,H].concat($jscomp.arrayFromIterable([fa,Fa].filter(Boolean)),[{fill:zb.Color.transparent,layout:new zb.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:zb.Color.gray.darker(),padding:zb.rect(0,5,5,5)},qb]}])}}],
[{key:"className",get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:zb.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,
end:26761})}(zb.LayoutHalo));zb.FlexLayoutHalo=va;zb.FlexLayoutHalo=va;zb.FlexLayoutHalo=va;ma=sa("c",function(da){var ra=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),sb=ra.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof ra.ProportionalLayoutHalo?ra.ProportionalLayoutHalo:ra.ProportionalLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return xb(sb,da,[{key:"handleDrop",value:function(H){}},
{key:"onDrop",value:function(H){H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(H){var fa={};this.target.changeSettingsFor(H.submorph,(fa[H.axis]=H.policy,fa),!0)}},{key:"onSubmorphSettingsDragStart",value:function(H,fa){var Fa=this;H.stop();var qb=this.target.settingsFor(fa);fa="";for(var nc in qb)fa+=nc+":"+qb[nc]+" ";var xc=zb.morph({type:"label",value:fa,
isLayoutable:!1});xc.wantsToBeDroppedOn=function(Bd){return Fa.target.layoutableSubmorphs.includes(Bd)};xc.onBeingDroppedOn=function(Bd,Cd){xc.remove();if(Bd=Fa.target.layoutableSubmorphs.includes(Cd)?Cd:H.world.morphsContainingPoint(H.hand.position).find(function(ue){return Fa.target.layoutableSubmorphs.includes(ue)}))Fa.updateSubmorphProportionalLayoutSettings({policy:qb.x,axis:"x",submorph:Bd}),Fa.updateSubmorphProportionalLayoutSettings({policy:qb.y,axis:"y",submorph:Bd}),Bd.show(),$world.setStatusMessage("layout settings applied")};
H.hand.grab(xc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var H=this,fa,Fa,qb,nc,xc,Bd,Cd,ue,jd,Gd,re,He;return $jscomp.asyncExecutePromiseGeneratorProgram(function(yf){switch(yf.nextAddress){case 1:return fa=H.target.layoutableSubmorphs,H.env.eventDispatcher.isKeyPressed("Shift")?(qb=fa.map(function(tf){return{isListItem:!0,string:String(tf),value:tf}}),yf.yield($world.listPrompt("Select morph",qb,{requester:H,onSelection:function(tf){return tf.show()}}),5)):yf.yield(zb.InteractiveMorphSelector.selectMorph(H.world(),
H,function(tf){return fa.includes(tf)}),4);case 4:Fa=yf.yieldResult;yf.jumpTo(3);break;case 5:nc=yf.yieldResult,xc=$jscomp.makeIterator(nc.selected),Fa=xc.next().value;case 3:if(!Fa)return yf.return();Bd=H.state.popover.get("controlContainer");Cd=Bd.getAllNamed(/submorph config/);ue=["move","resize","scale","fixed"];jd=H.target.settingsFor(Fa);Cd.length||(Bd.submorphs=[].concat($jscomp.arrayFromIterable(Bd.submorphs),[{name:"submorph config X-Axis policy",position:zb.pt(0,H.height),fill:zb.Color.transparent,
layout:new zb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new zb.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:jd.x,values:ue})]},{name:"submorph config Y-Axis policy",position:zb.pt(0,H.height),fill:zb.Color.transparent,layout:new zb.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new zb.DropDownSelector({name:"y-axis policy selector",
borderRadius:2,padding:3,selectedValue:jd.y,values:ue})]},zb.morph({position:zb.pt(0,H.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Gd=Bd.getSubmorphNamed("x-axis policy selector");re=Bd.getSubmorphNamed("y-axis policy selector");He=Bd.getSubmorphNamed("dragme");zb.disconnect(Gd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");zb.disconnect(re,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Gd.selectedValue=jd.x;re.selectedValue=jd.y;zb.connect(He,
"onDragStart",H,"onSubmorphSettingsDragStart",{updater:function(tf,yc){return tf(yc,Fa)},varMapping:{submorph:Fa}});zb.connect(Gd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(tf){return{policy:tf,axis:"x",submorph:Fa}},varMapping:{submorph:Fa}});zb.connect(re,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(tf){return{policy:tf,axis:"y",submorph:Fa}},varMapping:{submorph:Fa}});yf.jumpToEnd()}})}},{key:"optionControls",value:function(H){this.state.popover=
H;var fa=this.target;H=new zb.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:zb.Color.transparent,checked:fa.xAxisEnabled});fa=new zb.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:zb.Color.transparent,checked:fa.yAxisEnabled});var Fa=new zb.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(zb.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});zb.connect(H,"checked",this,"updateXAxisEnabled");
zb.connect(fa,"checked",this,"updateYAxisEnabled");zb.connect(Fa,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Fa]}}],[{key:"className",get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:zb.Color.transparent}}}}],ra,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(zb.LayoutHalo));zb.ProportionalLayoutHalo=ma;zb.ProportionalLayoutHalo=ma;zb.ProportionalLayoutHalo=ma;ec=lively.FreezerRuntime.recorderFor("lively.halos/index.js");ec.Halo=Qc;ec.MorphHighlighter=qc;ec.InteractiveMorphSelector=Cb;ec.StatusMessage=kb;ec.StatusMessageForMorph=Ca;ec.show=Ga;ec.showConnector=Mb;ec.ProportionalLayoutHalo=ma;ec.GridLayoutHalo=la;ec.FlexLayoutHalo=va;ec.showAndSnapToGuides=T;ec.removeSnapToGuidesOf=
I;ec.StatusMessage=kb;ec.StatusMessage=kb;ec.StatusMessageForMorph=Ca;ec.StatusMessageForMorph=Ca;ec.show=Ga;ec.show=Ga;ec.showConnector=Mb;ec.showConnector=Mb;ec.Halo=Qc;ec.Halo=Qc;ec.MorphHighlighter=qc;ec.MorphHighlighter=qc;ec.InteractiveMorphSelector=Cb;ec.InteractiveMorphSelector=Cb;ec.ProportionalLayoutHalo=ma;ec.ProportionalLayoutHalo=ma;ec.GridLayoutHalo=la;ec.GridLayoutHalo=la;ec.FlexLayoutHalo=va;ec.FlexLayoutHalo=va;ec.showAndSnapToGuides=T;ec.showAndSnapToGuides=T;ec.removeSnapToGuidesOf=
I;ec.removeSnapToGuidesOf=I;Qc=Object.freeze({__proto__:null,StatusMessage:kb,StatusMessageForMorph:Ca,show:Ga,showConnector:Mb,Halo:Qc,MorphHighlighter:qc,InteractiveMorphSelector:Cb,ProportionalLayoutHalo:ma,GridLayoutHalo:la,FlexLayoutHalo:va,showAndSnapToGuides:T,removeSnapToGuidesOf:I,SvgStyleHalo:void 0});sa("i",Qc);sa("_",void 0)}}});