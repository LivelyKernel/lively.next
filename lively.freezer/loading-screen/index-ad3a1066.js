System.register(["./__root_module__-c4d7431e.js"],function(ta){var nb,Bb,Vb,Qb,Dd,Ic,ud,Nc,Jc,Xc,id,Fd,nd,Yc,Ta,sb,dc,ac,Vc,Hd,hc,kc,xb,yb,wc,Kc,zb,ab,Kb,nc,da,qa,Va,cb,kb,Ma,Oa,lb,Wb,Nb,rc,xc;return{setters:[function(I){nb=I.as;Bb=I.a2;Vb=I.C;Qb=I.am;Dd=I.ah;Ic=I.aw;ud=I.aT;Nc=I.aA;Jc=I.ax;Xc=I.a8;id=I.ak;Fd=I.an;nd=I.h;Yc=I.a1;Ta=I.a0;sb=I.ag;dc=I.a6;ac=I.P;Vc=I._;Hd=I.aU;hc=I.ao;kc=I.a5;xb=I.ap;yb=I.aq;wc=I.aV;Kc=I.aW;zb=I.at;ab=I.ar;Kb=I.s;nc=I.au;da=I.aX;qa=I.aj;Va=I.aY;cb=I.aZ;kb=I.a_;Ma=
I.a9;Oa=I.a$;lb=I.al;Wb=I.b0;Nb=I.b1;rc=I.b2;xc=I.aP}],execute:function(){function I(fa){(fa=ub.cachedGuideLines.get(fa))&&fa.forEach(function(ma){return ma.remove()})}function T(fa,ma,tb,H,ka){ma=void 0===ma?!0:ma;tb=void 0===tb?!0:tb;H=void 0===H?10:H;ka=void 0===ka?100:ka;if(ma||tb){var Ca=fa.owner,rb=Ca.world();Ca=Ca.getGlobalTransform();var sc=fa.owner.submorphs.filter(function(Uc){return Uc!==fa&&!Uc.isEpiMorph&&Uc.visible&&Uc.reactsToPointer}),Ac=ub.findAlignedMorphs(fa,sc,H,ka,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));ka=[];var Bd=0,kd=0,ue=0,td=0;Ca.e-=rb.scroll.x;Ca.f-=rb.scroll.y;if(Ac){Ac=$jscomp.makeIterator(Ac);for(var Nd=Ac.next();!Nd.done;Nd=Ac.next()){Nd=$jscomp.makeIterator(Nd.value);Nd.next();var Ve=Nd.next().value;Nd=Ve.vertical;Ve=$jscomp.makeIterator(Ve.horizontal);for(var Ke=Ve.next();!Ke.done;Ke=Ve.next()){Ke=Ke.value;var vf=Ke.edgeAVal,Ye=Ke.refPointsA,zc=Ke.refPointsB,Ze=Ke.edgeBVal,If=Math.ceil(H-Ke.delta),Kf=Math.min(Ye.top,zc.top);Ye=Math.max(Ye.bottom,
zc.bottom);Ke.maxDist>H&&(If-=H/2);Bd<If&&(Bd=If,ue=Ze-vf);ka.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ub.guideWidth,start:Ca.transformPoint(ub.pt(Ze,Kf)),end:Ca.transformPoint(ub.pt(Ze,Ye)),fill:ub.guideColor,guideType:"h",priority:If})}Nd=$jscomp.makeIterator(Nd);for(Ve=Nd.next();!Ve.done;Ve=Nd.next())Ve=Ve.value,Ke=Ve.edgeAVal,Kf=Ve.refPointsA,Ye=Ve.refPointsB,vf=Ve.edgeBVal,Ze=Math.ceil(H-Ve.delta),If=Math.min(Kf.left,Ye.left),Kf=Math.max(Kf.right,Ye.right),Ve.maxDist>H&&(Ze-=
H/2),kd<Ze&&Math.abs(vf-Ke)<=H&&(kd=Ze,td=vf-Ke),ka.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ub.guideWidth,start:Ca.transformPoint(ub.pt(If,vf)),end:Ca.transformPoint(ub.pt(Kf,vf)),fill:ub.guideColor,guideType:"v",priority:Ze})}}if(!Bd||!kd){sc=[fa].concat($jscomp.arrayFromIterable(sc));Ke=ub.computeClosestMorphs(sc);Ve=Ke[0];sc=Ve.l;Ac=Ve.r;Nd=Ve.t;Ve=Ve.b;var Ce;if(sc||Ac||Nd||Ve){var wa=(sc||Ac||Nd||Ve).refPointsA;for(vf=1;vf<Ke.length&&(Ye=Ke[vf],Ze=Ye.l,If=Ye.r,Kf=Ye.t,Ye=Ye.b,
Bd||(sc&&Ze&&sc.index!==Ze.index&&Math.abs(Ze.dist-sc.dist)<=H?Ce=Object.assign({neighbor:vf,direction:"left"},Ze):Ac&&If&&Ac!==If.index&&Math.abs(If.dist-Ac.dist)<=H&&(Ce=Object.assign({neighbor:vf,direction:"right"},If))),kd||(Nd&&Kf&&Nd.index!==Kf.index&&Math.abs(Kf.dist-Nd.dist)<=H?Ce=Object.assign({neighbor:vf,direction:"top"},Kf):Ve&&Ye&&Ve.index!==Ye.index&&Math.abs(Ye.dist-Ve.dist)<=H&&(Ce=Object.assign({neighbor:vf,direction:"bottom"},Ye))),!Ce);vf++);}if(Ce){var La=Ce;H=La.direction;Kf=
La.dist;var pb=wa.left;zc=wa.top;var S=wa.bottom,xa=wa.right,Xa=wa.width,gb=wa.height;Ye=La.refPointsA;wa=Ye.left;Ke=Ye.top;vf=Ye.bottom;Ze=Ye.right;If=Ye.width;Ye=Ye.height;var oc=La.refPointsB,cc=oc.left;La=oc.top;var $c=oc.bottom;oc=oc.right;xa="left"===H?pb:"right"===H?xa:pb+Xa/2;S="bottom"===H?S:"top"===H?zc:zc+gb/2;pb="left"===H?xa-Kf:"right"===H?xa+Kf:pb+Xa/2;Kf="bottom"===H?S+Kf:"top"===H?S-Kf:zc+gb/2;zc="left"===H?oc:"right"===H?cc:wa+If/2;Xa="bottom"===H?La:"top"===H?$c:Ke+Ye/2;!tb||Bd||
"right"!==H&&"left"!==H||(Bd=10,ue=(Ce.dist-(Ac||sc).dist)*("right"===H?-1:1),xa+=ue,pb+=ue);!tb||kd||"top"!==H&&"bottom"!==H||(kd=10,td=((Nd||Ve).dist-Ce.dist)*("top"===H?-1:1),S+=td,Kf+=td);ka.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ca.transformPoint(ub.pt("left"===H?wa:"right"===H?Ze:wa+If/2,"bottom"===H?vf:"top"===H?Ke:Ke+Ye/2)),end:Ca.transformPoint(ub.pt(zc,Xa)),fill:ub.Color.orange,height:ub.guideWidth,guideType:H,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Ca.transformPoint(ub.pt(xa,
S)),end:Ca.transformPoint(ub.pt(pb,Kf)),fill:ub.Color.orange,height:ub.guideWidth,guideType:H,priority:10})}}tb&&(ue||td)&&fa.moveBy(ub.pt(ue,td));if(ma){ka=ka.filter(function(Uc){var Wc=Uc.guideType;Uc=Uc.priority;return"h"===Wc?Uc===Bd:"v"===Wc?Uc===kd:!0});(ma=ub.cachedGuideLines.get(fa))||ub.cachedGuideLines.set(fa,ma=[]);for(tb=0;tb<ka.length;tb++)Ce=void 0,ma[tb]?Ce=Object.assign(ma[tb],ka[tb]):(Ce=ub.morph(ka[tb]),ma.push(Ce)),Ce.owner||rb.addMorph(Ce);ma.slice(tb).forEach(function(Uc){return Uc.remove()});
ub.fun.debounceNamed(fa.id+"-drag-guides-cleanup",1300,function(){var Uc=ub.cachedGuideLines.get(fa);Uc&&Uc.forEach(function(Wc){return Wc.remove()})})()}}}function ua(fa,ma,tb,H,ka,Ca){tb=void 0===tb?!0:tb;H=void 0===H?!0:H;ka=void 0===ka?5:ka;Ca=void 0===Ca?100:Ca;if(tb||H){var rb=fa.owner,sc=rb.world(),Ac=rb.getGlobalTransform(),Bd=fa.owner.submorphs.filter(function(S){return S!==fa&&!S.isEpiMorph&&S.visible&&S.reactsToPointer});rb=(ma.includes("left")||ma.includes("right")?"x":"")+(ma.includes("top")||
ma.includes("bottom")?"y":"");var kd=ub.findMorphsWithSimilarWidthOrHeight(fa,rb,Bd,ka,Ca),ue=-Infinity,td=-Infinity,Nd=0,Ve=0,Ke=0,vf=0,Ye=0,zc=0;rb=[];Ac.e-=sc.scroll.x;Ac.f-=sc.scroll.y;if(kd){kd=$jscomp.makeIterator(kd);for(var Ze=kd.next();!Ze.done;Ze=kd.next()){Ze=$jscomp.makeIterator(Ze.value);Ze.next();var If=Ze.next().value;Ze=If.similarIn;var Kf=If.delta,Ce=If.refPointsA,wa=If.refPointsB;If=ka-Kf+(Ca-If.minDist);"width"===Ze?ue<If&&(ue=If,ma.includes("left")&&(Ve=-Kf),ma.includes("right")&&
(Nd=Kf)):td<If&&(td=If,ma.includes("top")&&(Ke=-Kf),ma.includes("bottom")&&(vf=Kf));Kf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:ub.guideWidth,fill:ub.guideColor,guideType:Ze,priority:If,start:Ac.transformPoint("width"===Ze?ub.pt(Ce.left,Ce.top+Ce.height/2):ub.pt(Ce.left+Ce.width/2,Ce.top)),end:Ac.transformPoint("width"===Ze?ub.pt(Ce.right,Ce.top+Ce.height/2):ub.pt(Ce.left+Ce.width/2,Ce.bottom))};Ze=Object.assign({},Kf,{start:Ac.transformPoint("width"===Ze?ub.pt(wa.left,wa.top+wa.height/
2):ub.pt(wa.left+wa.width/2,wa.top)),end:Ac.transformPoint("width"===Ze?ub.pt(wa.right,wa.top+wa.height/2):ub.pt(wa.left+wa.width/2,wa.bottom))});rb.push(Kf,Ze)}}if(Ca=ub.findAlignedMorphs(fa,Bd,ka,Ca,ma,void 0))for(Ca=$jscomp.makeIterator(Ca),Bd=Ca.next();!Bd.done;Bd=Ca.next()){Bd=$jscomp.makeIterator(Bd.value);Bd.next();kd=Bd.next().value;Bd=kd.vertical;kd=$jscomp.makeIterator(kd.horizontal);for(Ze=kd.next();!Ze.done;Ze=kd.next()){Ze=Ze.value;wa=Ze.edgeAVal;var La=Ze.refPointsA,pb=Ze.refPointsB;
Kf=Ze.edgeBVal;Ce=Math.ceil(ka-Ze.delta);If=Math.min(La.top,pb.top);La=Math.max(La.bottom,pb.bottom);Ze.maxDist>ka&&(Ce-=ka/2);Ye<Ce&&(Ye=Ce,ma.includes("left")&&(Ve=-(Kf-wa)),ma.includes("right")&&(Nd=+(Kf-wa)));rb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ub.guideWidth,start:Ac.transformPoint(ub.pt(Kf,If)),end:Ac.transformPoint(ub.pt(Kf,La)),fill:ub.guideColor,guideType:"h",priority:Ce})}Bd=$jscomp.makeIterator(Bd);for(kd=Bd.next();!kd.done;kd=Bd.next())kd=kd.value,Ze=kd.edgeAVal,
If=kd.refPointsA,La=kd.refPointsB,wa=kd.edgeBVal,Kf=Math.ceil(ka-kd.delta),Ce=Math.min(If.left,La.left),If=Math.max(If.right,La.right),kd.maxDist>ka&&(Kf-=ka/2),zc<Kf&&Math.abs(wa-Ze)<=ka&&(zc=Kf,ma.includes("top")&&(Ke=wa-Ze),ma.includes("bottom")&&(vf=wa-Ze)),rb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:ub.guideWidth,start:Ac.transformPoint(ub.pt(Ce,wa)),end:Ac.transformPoint(ub.pt(If,wa)),fill:ub.guideColor,guideType:"v",priority:Kf})}H&&(Ve&&(fa.left+=Ve,fa.right-=Ve),Ke&&(fa.top+=
Ke,fa.bottom-=Ke),Nd&&(fa.width+=Nd),vf&&(fa.height+=vf));if(tb){rb=rb.filter(function(S){var xa=S.guideType;S=S.priority;return"width"===xa?S===ue:"height"===xa?S===td:"v"===xa?S===zc:"h"===xa?S===Ye:!1});(ma=ub.cachedGuideLines.get(fa))||ub.cachedGuideLines.set(fa,ma=[]);for(tb=0;tb<rb.length;tb++)H=void 0,ma[tb]?H=Object.assign(ma[tb],rb[tb]):(H=ub.morph(rb[tb]),ma.push(H)),H.owner||sc.addMorph(H);ma.slice(tb).forEach(function(S){return S.remove()});ub.fun.debounceNamed(fa.id+"-drag-guides-cleanup",
1300,function(){var S=ub.cachedGuideLines.get(fa);S&&S.forEach(function(xa){return xa.remove()})})()}}}function Da(fa,ma){ma=void 0===ma?!1:ma;var tb=Ga.MorphicEnv.default().world;if(null===fa||void 0===fa)fa=String(fa);if(fa.isMorph)return Ga.showRect(fa.world(),fa.globalBounds().translatedBy(fa.world().scroll.negated()),ma);if(fa.isPoint)return Ga.showRect(tb,new Ga.Rectangle(fa.x-5,fa.y-5,10,10));if(fa.isLine)return Ga.showLine(tb,fa);if(fa.isRectangle)return Ga.showRect(tb,fa);if("undefined"!==
typeof Ga.Element&&fa instanceof Ga.Element)return Ga.showRect(tb,Ga.Rectangle.fromElement(fa));if("number"===typeof fa||"symbol"===typeof fa||"boolean"===typeof fa||"undefined"!==typeof Ga.Node&&fa instanceof Ga.Node||fa instanceof RegExp)fa=String(fa);"object"===typeof fa&&(fa=Ga.obj.inspect(fa,{maxDepth:1}));return"string"===typeof fa&&1===arguments.length?tb.setStatusMessage(fa):tb.setStatusMessage(Ga.string.formatFromArray(Array.from(arguments)))}function Lb(fa,ma,tb){tb=void 0===tb?3E3:tb;var H,
ka,Ca,rb,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ac){if(1==Ac.nextAddress){if(!(fa&&fa.world()&&ma&&ma.world()))return Ac.return(null);H=fa.owner.worldPoint(fa.center);ka=ma.owner.worldPoint(ma.center);Ca=H.lineTo(ka).sampleN(2)[1];rb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Ga.Color.red,fill:Ga.Color.red,cx:5,cy:5,r:4}]};sc=$world.addMorph(new Ga.Path({position:Ca,renderOnGPU:!0,vertices:[Ga.pt(0),
Ga.pt(0)],borderWidth:2,startMarker:rb,endMarker:rb,borderColor:Ga.Color.red}));return Ac.yield(sc.whenRendered(),2)}if(3!=Ac.nextAddress)return Ac.yield(sc.animate({opacity:1,customTween:function(Bd){var kd=sc.center;sc.vertices=[Ga.pt(0).interpolate(Bd,H.subPt(Ca)),Ga.pt(0).interpolate(Bd,ka.subPt(Ca))];sc.center=kd},duration:400}),3);tb&&setTimeout(function(){return sc.fadeOut()},tb);return Ac.return(sc)})}ta({a:T,d:Lb,r:I,s:Da});var ub=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
ub.removeSnapToGuidesOf=I;ub.showAndSnapToGuides=T;ub.showAndSnapToResizeGuides=ua;ub.computeRefPoints=function(fa){var ma=fa.x,tb=fa.y,H=fa.width;fa=fa.height;return{left:ma,top:tb,hCenter:ma+H/2,vCenter:tb+fa/2,right:ma+H,bottom:tb+fa,width:H,height:fa}};ub.findEdgesInAlignment=function(fa,ma,tb,H,ka,Ca,rb,sc,Ac,Bd){tb=void 0===tb?15:tb;Ca=void 0===Ca?0:Ca;rb=void 0===rb?0:rb;sc=void 0===sc?0:sc;Ac=void 0===Ac?0:Ac;Bd=void 0===Bd?0:Bd;for(var kd=[],ue=[],td=0;td<ub.edges.length;td++){var Nd=$jscomp.makeIterator(ub.edges[td]),
Ve=Nd.next().value,Ke=Nd.next().value;Nd=Nd.next().value;var vf=fa[Ke],Ye=ma[Nd],zc=Math.max(vf,Ye)-Math.min(vf,Ye);zc>tb||!(H&&!H.includes(Ke)||ka&&!ka.includes(Nd))&&("vertical"===Ve?kd:ue).push({delta:zc,edgeA:Ke,edgeB:Nd,edgeAVal:vf,edgeBVal:Ye,refPointsA:fa,refPointsB:ma,distLeft:Ca,distTop:rb,distRight:sc,distBottom:Ac,maxDist:Bd})}return kd.length||ue.length?{vertical:kd,horizontal:ue}:null};ub.findAlignedMorphs=function(fa,ma,tb,H,ka,Ca){tb=void 0===tb?15:tb;H=void 0===H?Infinity:H;for(var rb,
sc=ub.computeRefPoints(fa.bounds()),Ac=0;Ac<ma.length;Ac++){var Bd=ma[Ac];if(Bd!==fa){var kd=ub.computeRefPoints(Bd.bounds()),ue=Math.max(0,sc.left-kd.right),td=Math.max(0,kd.left-sc.right),Nd=Math.max(0,sc.top-kd.bottom),Ve=Math.max(0,kd.top-sc.bottom);Math.max(Ve,Nd,td,ue)>H||!(kd=ub.findEdgesInAlignment(sc,kd,tb,ka,Ca,ue,Nd,td,Ve,Math.max(Ve,Nd,td,ue)))||(rb||(rb=new Map),rb.set(Bd,kd))}}fa=fa.owner;ma=ub.computeRefPoints(fa.innerBounds());if(tb=ub.findEdgesInAlignment(sc,ma,tb))rb||(rb=new Map),
rb.set(fa,tb);return rb};ub.findMorphsWithSimilarWidthOrHeight=function(fa,ma,tb,H,ka){H=void 0===H?15:H;ka=void 0===ka?Infinity:ka;for(var Ca,rb=ub.computeRefPoints(fa.bounds()),sc=0;sc<tb.length;sc++){var Ac=tb[sc];if(Ac!==fa){var Bd=ub.computeRefPoints(Ac.bounds()),kd=Math.max(0,rb.left-Bd.right),ue=Math.max(0,Bd.left-rb.right),td=Math.max(0,rb.top-Bd.bottom),Nd=Math.max(0,Bd.top-rb.bottom),Ve=Math.min(Nd,td,ue,kd),Ke=Math.max(Nd,td,ue,kd);if(!(Math.max(Nd,td,ue,kd)>ka)){ue=rb;kd=ue.width;ue=ue.height;
Nd=Bd;td=Nd.width;Nd=Nd.height;var vf=td-kd,Ye=Nd-ue;("x"===ma||"xy"===ma)&&Math.abs(vf)<=H&&(Ca||(Ca=new Map),Ca.set(Ac,{similarIn:"width",minDist:Ve,maxDist:Ke,refPointsA:rb,refPointsB:Bd,valA:kd,valB:td,delta:vf}));("y"===ma||"xy"===ma)&&Math.abs(Ye)<=H&&(Ca||(Ca=new Map),Ca.set(Ac,{similarIn:"height",minDist:Ve,maxDist:Ke,refPointsA:rb,refPointsB:Bd,valA:ue,valB:Nd,delta:Ye}))}}}return Ca};ub.closest=function(fa,ma,tb,H,ka,Ca,rb,sc){sc=void 0===sc?!0:sc;var Ac=H[fa],Bd=ka[fa],kd=Ca[fa];ma=rb[fa];
for(var ue,td,Nd,Ve,Ke=0;Ke<ka.length;Ke++)fa===Ke||Ac<ka[Ke]||ue&&ka[ue.index]>=ka[Ke]||sc&&rb[fa]<Ca[Ke]||Ca[fa]>rb[Ke]||(ue={index:Ke,dist:Ac-ka[Ke],refPointsA:tb[fa],refPointsB:tb[Ke]});for(Ac=0;Ac<H.length;Ac++)fa===Ac||Bd>H[Ac]||td&&H[td.index]<=H[Ac]||sc&&rb[fa]<Ca[Ac]||Ca[fa]>rb[Ac]||(td={index:Ac,dist:H[Ac]-Bd,refPointsA:tb[fa],refPointsB:tb[Ac]});for(Bd=0;Bd<rb.length;Bd++)fa===Bd||kd<rb[Bd]||Nd&&rb[Nd.index]>=rb[Bd]||sc&&H[fa]>ka[Bd]||ka[fa]<H[Bd]||(Nd={index:Bd,dist:kd-rb[Bd],refPointsA:tb[fa],
refPointsB:tb[Bd]});for(rb=0;rb<Ca.length;rb++)fa===rb||ma>Ca[rb]||Ve&&Ca[Ve.index]<=Ca[rb]||sc&&H[fa]>ka[rb]||ka[fa]<H[rb]||(Ve={index:rb,dist:Ca[rb]-ma,refPointsA:tb[fa],refPointsB:tb[rb]});return{l:ue,r:td,t:Nd,b:Ve}};ub.computeClosestMorphs=function(fa){for(var ma=[],tb=[],H=[],ka=[],Ca=[],rb=[],sc=0;sc<fa.length;sc++){var Ac=ub.computeRefPoints(fa[sc].bounds());Ca.push(Ac);var Bd=Ac.right,kd=Ac.top,ue=Ac.bottom;ma.push(Ac.left);tb.push(Bd);H.push(kd);ka.push(ue)}for(sc=0;sc<fa.length;sc++)rb.push(ub.closest(sc,
fa,Ca,ma,tb,H,ka));return rb};ub.fun=nb;ub.pt=Bb;ub.Color=Vb;ub.morph=Qb;ub.cachedGuideLines=new WeakMap;ub.guideWidth=1;ub.guideColor=ub.Color.orange.lighter();ub.removeSnapToGuidesOf=I;ub.removeSnapToGuidesOf=I;ub.showAndSnapToGuides=T;ub.showAndSnapToGuides=T;ub.showAndSnapToResizeGuides=ua;ub.showAndSnapToResizeGuides=ua;ub.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Ja=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ja.Morph=Dd;Ja.Label=Ic;Ja.StyleSheet=ud;Ja.HorizontalLayout=
Nc;Ja.Path=Jc;Ja.Text=Xc;Ja.GridLayout=id;Ja.morph=Qb;Ja.Icon=Fd;Ja.createMorphSnapshot=nd;Ja.Color=Vb;Ja.pt=Bb;Ja.rect=Yc;Ja.Rectangle=Ta;Ja.LinearGradient=sb;Ja.obj=dc;Ja.PropertyPath=ac;Ja.promise=Vc;Ja.properties=Hd;Ja.num=hc;Ja.arr=kc;Ja.connect=xb;Ja.signal=yb;Ja.disconnect=wc;Ja.disconnectAll=Kc;Ja.once=zb;Ja.showAndSnapToGuides=T;Ja.showAndSnapToResizeGuides=ua;Ja.removeSnapToGuidesOf=I;Ja.haloBlue=Ja.Color.rgb(23,160,251);Ja.componentAccent=Ja.Color.magenta;Ja.derivedAccent=Ja.Color.purple;
var Rb=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("Halo")&&"function"===typeof ma.Halo?ma.Halo:ma.Halo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",
get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(H){H.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var H=this;setTimeout(function(){H.target.owner||H.remove()})}},{key:"initLayout",value:function(){var H=this.layout=new Ja.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},
4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});H.col(1).row(7).group.align="center";H.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=
[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||
this.addMorphBack(Ja.morph({name:"border-box",fill:Ja.Color.transparent,borderColor:this.target.isComponent?Ja.componentAccent:Ja.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(H){this.state||(this.state={});this.state.pointerId=H}},{key:"prepareTarget",value:function(H){if(!Ja.obj.isArray(H))return H;if(1>=H.length)return H[0];H=H[0].world().addMorph(new Ja.MultiSelectionTarget({selectedMorphs:H}));H.alignWithSelection();
H.modifiesSelectedMorphs=!0;return H}},{key:"refocus",value:function(H){this.target=H;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var H=this.target.world()||$world,ka=H.visibleBounds(),Ca=this.target.globalBounds(),rb=Ca.insetBy(-36).intersection(ka);ka=Ca.intersection(ka);this.layout&&this.layout.disable();this.setBounds(rb.translatedBy(H.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,ka));this.state.activeButton?(this.buttonControls.forEach(function(sc){return sc.visible=
!1}),this.ensureResizeHandles().forEach(function(sc){return sc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(sc){return sc.visible=!0}),this.buttonControls.forEach(function(sc){sc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(sc){return sc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();
this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var H=this.target;H&&(Ja.disconnect(H,"onChange",this,"alignWithTarget"),Ja.disconnect(H,"onOwnerChanged",this,"removeIfDetached"),H instanceof Ja.MultiSelectionTarget?(H.modifiesSelectedMorphs=!1,H.remove()):"function"===typeof H.detachedHalo&&H.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();ab._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",
value:function(H){return H}},{key:"propertyDisplay",get:function(){return Ja.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ja.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Ja.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Ja.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Ja.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ja.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ja.InspectHaloItem.for(this)}},
{key:"editHalo",value:function(){return Ja.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ja.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ja.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Ja.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Ja.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(H){return H.isHaloItem&&!H.isResizeHandle})}},{key:"addMorphToSelection",
value:function(H){var ka=this,Ca,rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sc){return 1==sc.nextAddress?(Ca=ka.world(),rb=ka.target.isMorphSelection?ka.target.selectedMorphs:[ka.target],ka.remove(),sc.yield(Ca.showHaloForSelection([].concat($jscomp.arrayFromIterable(rb),[H]),ka.state.pointerId),2)):sc.return(sc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(H){var ka=this,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress){Ca=
ka.world();ka.remove();if(!ka.target.isMorphSelection)return rb.jumpTo(0);Ja.arr.remove(ka.target.selectedMorphs,H);return rb.yield(Ca.showHaloForSelection(ka.target.selectedMorphs,ka.state.pointerId),3)}return rb.return(rb.yieldResult)})}},{key:"isAlreadySelected",value:function(H){return this.target==H||this.target.isMorphSelection&&this.target.selectsMorph(H)}},{key:"updateBoundsFor",value:function(H,ka,Ca,rb,sc){var Ac={topLeft:Ja.rect(-1,-1,1,1),topCenter:ka?Ja.rect(1,-1,0,1):Ja.rect(0,-1,0,
1),topRight:Ja.rect(0,-1,1,1),rightCenter:ka?Ja.rect(0,1,1,1):Ja.rect(0,0,1,0),bottomRight:Ja.rect(0,0,1,1),bottomCenter:ka?Ja.rect(1,0,0,1):Ja.rect(0,0,0,1),bottomLeft:Ja.rect(-1,0,1,1),leftCenter:ka?Ja.rect(-1,1,1,0):Ja.rect(-1,0,1,0)}[H];sc=Ac.x;var Bd=Ac.y,kd=Ac.width;Ac=Ac.height;Ca=ka?this.proportionalDelta(H,Ca,rb):Ca;H=Ja.rect(Ca.x*sc,Ca.y*Bd,Ca.x*kd,Ca.y*Ac);this.active=!0;this.target.setBounds(rb.insetByRect(H));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());
this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(H,ka,Ca){var rb=Ca.width,sc=Ca.height;Ca={topLeft:Ja.pt(-1,-1),topCenter:Ja.pt(0,-1),topRight:Ja.pt(1,-1),leftCenter:Ja.pt(-1,0),rightCenter:Ja.pt(1,0),bottomLeft:Ja.pt(-1,1),bottomCenter:Ja.pt(0,1),bottomRight:Ja.pt(1,1)};var Ac=rb/Math.max(rb,sc),Bd=sc/Math.max(sc,rb);rb={topLeft:Ja.pt(-Ac,-Bd),topCenter:Ja.pt(1/(2*sc/rb),-1),topRight:Ja.pt(Ac,-Bd),leftCenter:Ja.pt(-1,sc/(2*rb)),rightCenter:Ja.pt(1,sc/(3*rb)),bottomLeft:Ja.pt(-Ac,
Bd),bottomCenter:Ja.pt(1/(2*sc/rb),1),bottomRight:Ja.pt(Ac,Bd)};Ca=Ca[H];return rb[H].scaleBy(Ca.dotProduct(ka)/Ca.dotProduct(Ca))}},{key:"ensureResizeHandles",value:function(){return Ja.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(H){H=H.valueForPropertyDisplay();"undefined"!==typeof H?this.propertyDisplay.displayProperty(H):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(H,ka){if(!Ja.rect(0).sides.includes(ka)){var Ca=this.getSubmorphNamed("diagonal");
if(H){H=this.target.globalBounds();var rb=H.width,sc=H.height;H=this.localize(Ja.pt(H.x,H.y)).extent(Ja.pt(rb,sc)).scaleRectTo(this.innerBounds());rb={topLeft:[Ja.pt(rb,sc),Ja.pt(0,0)],topRight:[Ja.pt(0,sc),Ja.pt(rb,0)],bottomRight:[Ja.pt(0,0),Ja.pt(rb,sc)],bottomLeft:[Ja.pt(rb,0),Ja.pt(0,sc)]};Ca?Ca.setBounds(H):(Ca=$jscomp.makeIterator(rb[ka]),ka=Ca.next().value,Ca=Ca.next().value,rb=new Ja.LinearGradient({stops:[{offset:0,color:Ja.Color.orange.withA(0)},{offset:.2,color:Ja.Color.orange},{offset:.8,
color:Ja.Color.orange},{offset:1,color:Ja.Color.orange.withA(0)}]}),Ca=this.addMorphBack(new Ja.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:H,borderColor:rb,vertices:[ka,Ca]})),Ca.setBounds(H),Ca.animate({opacity:1,duration:500}))}else Ca&&Ca.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(H,ka){var Ca=this.getSubmorphNamed("rotationIndicator");H&&ka?(H=this.getSubmorphNamed("origin").center,Ca=Ca||this.addMorphBack(new Ja.Path({name:"rotationIndicator",
borderColor:Ja.haloBlue,borderWidth:1,vertices:[]})),Ca.setBounds(ka.bounds().union(this.innerBounds())),Ca.vertices=[Ca.localizePointFrom(H,this),Ca.localizePointFrom(ka.center,this)]):Ca&&Ca.remove()}},{key:"toggleMorphHighlighter",value:function(H,ka,Ca){Ca=void 0===Ca?!1:Ca;if(ka.onHaloGrabover)ka.onHaloGrabover(H);else Ca=Ja.MorphHighlighter.for(this,ka,Ca),H&&ka&&ka!=this.world()?Ca&&Ca.show(ka):Ca&&Ca.deactivate()}},{key:"onMouseDown",value:function(H){var ka=H.state.clickedOnMorph;if(!H.isCommandKey()&&
ka==this.borderBox)return this.remove();if(H.isShiftDown()&&H.isCommandKey())H=this.target.isMorphSelection?this.target.morphBeneath(H.position):this.morphBeneath(H.position),this.isAlreadySelected(H)?this.removeMorphFromSelection(H):this.addMorphToSelection(H);else{if(ka==this.borderBox&&H.isCommandKey()){var Ca=H.world.morphsContainingPoint(H.position).filter(function(rb){return rb.halosEnabled});(Ca=Ca.slice(Ca.indexOf(this.target)+1)[0]||Ca[0]||H.world)&&H.world.showHaloFor(Ca,H.domEvt.pointerId);
this.remove()}ka==this&&H.isCommandKey()&&(Ca=this.morphBeneath(H.position),H.world.showHaloFor(Ca,H.domEvt.pointerId));ka==this&&this.remove()}}},{key:"onKeyUp",value:function(H){this.changingName||this.buttonControls.map(function(ka){return ka.onKeyUp(H)})}},{key:"getMesh",value:function(H,ka){var Ca=H.x;H=H.y;ka=void 0===ka?Ja.pt(0,0):ka;var rb=this.world().visibleBounds(),sc=rb.height;rb=rb.width;var Ac={borderStyle:"dotted",borderWidth:2,borderColor:Ja.Color.orange};Ac=this.get("mesh")||this.addMorph(new Ja.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:Ja.pt(rb,sc),fill:null,submorphs:[new Ja.Path(Object.assign({name:"vertical"},Ac)),new Ja.Path(Object.assign({name:"horizontal"},Ac))]}));Ac.globalPosition=ka;Ac.getSubmorphNamed("vertical").vertices=[Ja.pt(Ca,0).subPt(ka),Ja.pt(Ca,sc).subPt(ka)];Ac.getSubmorphNamed("horizontal").vertices=[Ja.pt(0,H).subPt(ka),Ja.pt(rb,H).subPt(ka)];return Ac}}],[{key:"className",get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ja.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Ja.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(H){this.state||(this.state={});var ka=!!this.state.target;
this.detachFromTarget();H=this.prepareTarget(H);this.state.target=H;ka&&this.alignWithTarget();Ja.connect(H,"onChange",this,"alignWithTarget");Ja.connect(H,"onOwnerChanged",this,"removeIfDetached")}}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:895,end:16994})}(Ja.Morph);Rb=Ja.Halo;
var Mc=ta("H",Rb);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof ma.HaloPropertyDisplay?ma.HaloPropertyDisplay:ma.HaloPropertyDisplay=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(H){var ka=this.halo.state.activeButton;H=String(H);this.visible=!0;this.textString=H;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(ka.bounds())&&(this.position=Ja.pt(ka.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:"className",get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},{key:"defaultPosition",
get:function(){return Ja.pt(25,0)}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Ja.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ja.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ja.Color.white},position:{defaultValue:this.defaultPosition}}}}],
ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17185,end:18532})})(Ja.Label);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof ma.MultiSelectionTarget?ma.MultiSelectionTarget:ma.MultiSelectionTarget=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(H){return this.selectedMorphs.includes(H)}},{key:"alignWithSelection",value:function(){var H=this.selectedMorphs.map(function(ka){return ka.globalBounds()}).reduce(function(ka,Ca){return ka.union(Ca)});this.setBounds(H)}},{key:"onGrab",
value:function(H){this.grabbingHand=H.hand;this.selectionGrabbed=!0;H.hand.grab(this.selectedMorphs);Ja.once(H.hand,"dropMorphsOn",this,"onGrabEnd");Ja.connect(H.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Ja.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(H){var ka=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Ca){return Ca.resizeBy(ka)})}},{key:"updatePosition",value:function(H){if(!this.selectionGrabbed){var ka=
H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Ca){return Ca.moveBy(ka)})}}},{key:"updateRotation",value:function(H){var ka=this,Ca=H.value-H.prevValue;this.selectedMorphs.forEach(function(rb){var sc=rb.origin;rb.adjustOrigin(rb.localize(ka.worldPoint(Ja.pt(0,0))));rb.rotation+=Ca;rb.adjustOrigin(sc)})}},{key:"updateScale",value:function(H){var ka=this,Ca=H.value-H.prevValue;this.selectedMorphs.forEach(function(rb){var sc=rb.origin;rb.adjustOrigin(rb.localize(ka.worldPoint(Ja.pt(0,
0))));rb.scale+=Ca;rb.adjustOrigin(sc)})}},{key:"onChange",value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),"onChange",this).call(this,H);if(this.modifiesSelectedMorphs){switch(H.prop){case "extent":this.updateExtent(H);break;case "scale":this.updateScale(H);break;case "position":this.updatePosition(H);break;case "rotation":this.updateRotation(H)}return H}}}],[{key:"className",get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18600,end:20818})})(Ja.Morph);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("HaloItem")&&"function"===typeof ma.HaloItem?
ma.HaloItem:ma.HaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:"className",get:function(){return"HaloItem"}},
{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ja.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ja.pt(24,24)},halo:{}}}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({halo:H,name:this.morphName}))}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:20984,end:21661})})(Ja.Morph);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("NameHolder")&&"function"===typeof ma.NameHolder?ma.NameHolder:ma.NameHolder=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"onHoverIn",value:function(H){this.highlightOnHover&&this.nameHolder.active&&
(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ja.Color.orange)}},{key:"onHoverOut",value:function(H){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Ja.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(H){"Enter"==H.keyCombo?(this.accept(),H.stop()):ab._get(Object.getPrototypeOf(tb.prototype),"onKeyDown",
this).call(this,H)}},{key:"onMouseUp",value:function(){Ja.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(H){this.nameHolder.fontColor=Ja.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(H){H=this.nameHolder.textString;var ka=this.target.owner;this.validName=!ka||!ka.getSubmorphNamed(H)||this.target.name==H;Ja.signal(this,"valid",[this.validName,H])}},{key:"update",value:function(){var H=this;this.nameHolder.textString!==this.target.name&&
(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return H.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(H){if(!this.forceUniqueName||this.validName)this.target.name=H,Ja.signal(this,"active",[!1,this])}}],
[{key:"className",get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Ja.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ja.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=this.addMorph(new Ja.Text({fill:Ja.Color.transparent,
fontColor:Ja.Color.white,fontWeight:"bold",active:!0}));Ja.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21698,end:24232})})(Ja.Morph);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("NameHaloItem")&&
"function"===typeof ma.NameHaloItem?ma.NameHaloItem:ma.NameHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:Symbol.for("lively-instance-initialize"),value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.initNameHolders();this.validityIndicator=Ja.Icon.makeLabel("check",{fontColor:Ja.Color.green,fontSize:15,padding:Ja.rect(4,
6,4,0)});this.fill=this.halo.target.isComponent?Ja.componentAccent:Ja.haloBlue;this.alignInHalo()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(H){return{target:H,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var H=this;this.nameHolders=this.targets().map(function(ka){ka=new Ja.NameHolder({halo:H.halo,highlightOnHover:ka.highlightOnHover,
target:ka.target});Ja.connect(ka,"active",H,"toggleActive");Ja.connect(ka,"valid",H,"toggleNameValid");return ka});this.submorphs=Ja.arr.interpose(this.nameHolders,{extent:Ja.pt(1,28),fill:Ja.Color.black.withA(.4)})}},{key:"toggleActive",value:function(H){H=$jscomp.makeIterator(H);var ka=H.next().value,Ca=H.next().value;this.halo.changingName!==ka&&((this.halo.changingName=ka)?(this.nameHolders.forEach(function(rb){return rb!=Ca&&rb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),
this.fill=Ja.Color.darkGray,setTimeout(function(){return Ca.nameHolder.selectAll()})):(this.fill=Ja.haloBlue,this.nameHolders.forEach(function(rb){return rb!=Ca&&rb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus()),this.alignInHalo())}},{key:"toggleNameValid",value:function(H){var ka=$jscomp.makeIterator(H);H=ka.next().value;ka=ka.next().value;(this.validName=H)?(this.conflictingMorph=null,this.borderColor=Ja.Color.green,this.validityIndicator.nativeCursor="auto",
this.validityIndicator.fontColor=Ja.Color.green,Ja.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(ka),this.borderColor=Ja.Color.red,this.validityIndicator.fontColor=Ja.Color.red,this.validityIndicator.nativeCursor="pointer",Ja.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ja.arr.zip(this.targets(),this.nameHolders).map(function(ka){var Ca=$jscomp.makeIterator(ka);ka=Ca.next().value.target;Ca=Ca.next().value;Ca.target=
ka;Ca.update()});var H=this.halo.innerBounds().bottomCenter().addPt(Ja.pt(0,2));this.topCenter=Ja.pt(Math.max(H.x,30),Math.max(H.y,80))}},{key:"onMouseDown",value:function(H){var ka=this,Ca=this.conflictingMorph;Ca&&(this.halo.toggleMorphHighlighter(!0,Ca),setTimeout(function(){return ka.halo.toggleMorphHighlighter(!1,Ca)},1E3))}}],[{key:"className",get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},
fill:{defaultValue:Ja.haloBlue},borderColor:{defaultValue:Ja.Color.green},layout:{initialize:function(){this.layout=new Ja.HorizontalLayout({resizeContainer:!0,spacing:0})}}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24234,end:27401})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=ma.hasOwnProperty("CloseHaloItem")&&"function"===typeof ma.CloseHaloItem?ma.CloseHaloItem:ma.CloseHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"update",value:function(){var H=this.halo,ka=H.target.owner;ka.undoStart("close-halo");H.target.selectedMorphs?H.target.selectedMorphs.forEach(function(Ca){return Ca.remove()}):H.target.remove();ka.undoStop("close-halo");H.remove()}},{key:"onMouseDown",
value:function(H){this.update()}}],[{key:"className",get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-times"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27404,end:28010})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("GrabHaloItem")&&"function"===typeof ma.GrabHaloItem?ma.GrabHaloItem:ma.GrabHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"adjustTarget",value:function(H,ka){Ja.PropertyPath("owner.layout.autoResize").get(H)&&
!H.globalBounds().insetBy(10).containsPoint(ka)&&(H=H.owner);return H}},{key:"valueForPropertyDisplay",value:function(){var H=this.hand,ka=this.halo,Ca=this.prevDropTarget,rb=H.world(),sc=H.findDropTarget(H.globalPosition,[ka.target],function(Ac){return!Ac.isHaloItem&&!Ac.ownerChain().some(function(Bd){return Bd.isHaloItem||!Bd.visible||0==Bd.opacity})});sc=this.adjustTarget(sc,H.globalPosition);ka.toggleMorphHighlighter(sc&&sc!=rb,sc,!0);Ca&&Ca!=sc&&ka.toggleMorphHighlighter(!1,Ca);return(this.prevDropTarget=
sc)&&sc.name}},{key:"init",value:function(H){var ka=this.halo,Ca=ka.target.undoStart("grab-halo");Ca&&Ca.addTarget(ka.target.owner);this.hand=H;ka.target.onGrab({halo:ka,hand:H,isShiftDown:function(){return!1}});ka.state.activeButton=this;this.opacity=.3;var rb=Ja.connect(H,"update",this,"update");Ja.once(ka.target,"remove",function(){return rb.disconnect()})}},{key:"stop",value:function(H){var ka=this.halo,Ca=this.prevDropTarget,rb=ka.target.undoInProgress,sc=H.hand.findDropTarget(H.hand.globalPosition,
[ka.target],function(Ac){return!Ac.isHaloItem&&!Ac.ownerChain().some(function(Bd){return Bd.isHaloItem})});sc=this.adjustTarget(sc,H.hand.globalPosition);Ja.disconnect(H.hand,"update",this,"update");Ja.MorphHighlighter.interceptDrop(ka,sc,ka.target);rb.addTarget(sc);sc.onDrop(H);ka.state.activeButton=null;ka.alignWithTarget();ka.toggleMorphHighlighter(!1,Ca);Ja.MorphHighlighter.removeHighlighters(ka);ka.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H)}}],[{key:"className",get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28013,end:30518})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("DragHaloItem")&&"function"===typeof ma.DragHaloItem?ma.DragHaloItem:ma.DragHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},
{key:"updateAlignmentGuide",value:function(H){var ka=this.halo.getSubmorphNamed("mesh");if(H)return ka=this.halo.getMesh(this.halo.target.worldPoint(Ja.pt(0,0))),this.focus(),ka;ka&&ka.remove()}},{key:"init",value:function(){var H=this.halo.target;H.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=H.position;this.targetTransform=H.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.updateAlignmentGuide(!1);Ja.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(H,ka,Ca){ka=void 0===ka?!1:ka;Ca=void 0===Ca?!1:Ca;this.actualPos=H=this.actualPos.addPt(this.targetTransform.transformDirection(H));ka&&(H=H.griddedBy(Ja.pt(10,10)));this.halo.target.position=H;this.updateAlignmentGuide(ka);ka||Ja.showAndSnapToGuides(this.halo.target,!0,Ca,5,500)}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta,H.isAltDown(),
H.isCtrlDown())}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onKeyUp",value:function(H){this.updateAlignmentGuide(!1)}}],[{key:"className",get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],ma,{pathInPackage:function(){return"morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:30521,end:32332})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("InspectHaloItem")&&"function"===typeof ma.InspectHaloItem?ma.InspectHaloItem:ma.InspectHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"onMouseDown",value:function(H){var ka=this;(function(){var Ca,rb,sc,Ac;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bd){if(1==Bd.nextAddress)return Bd.yield(System.import("lively.ide/js/inspector.js"),2);Ca=Bd.yieldResult;rb=Ca.default;(sc=ka.world().getSubmorphsByStyleClassName("Inspector").find(function(kd){return kd.targetObject==ka.halo.target}))&&(Ac=sc.getWindow())?(Ac.minimized=!1,Ac.animate({center:ka.world().visibleBounds().center(),
duration:200})):rb.openInWindow({targetObject:ka.halo.target});ka.halo.remove();Bd.jumpToEnd()})})()}}],[{key:"className",get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32335,end:33237})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("EditHaloItem")&&"function"===typeof ma.EditHaloItem?ma.EditHaloItem:ma.EditHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,
fa,[{key:"onMouseDown",value:function(H){var ka=this;(H=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Ca){return Ca.target==ka.halo.target}))?(H=H.getWindow(),H.bringToFront(),H.minimized=!1,H.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:"className",get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},
draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:33240,end:34022})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("RotateHaloItem")&&"function"===
typeof ma.RotateHaloItem?ma.RotateHaloItem:ma.RotateHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:Symbol.for("lively-instance-initialize"),value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(H){this.setProperty("angle",
H)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(H){this.setProperty("scaleGauge",H)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(H){this.setProperty("initRotation",H)}},{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target;return this.scaleGauge?H.scale.toFixed(4).toString():Ja.num.toDegrees(H.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(H){this.detachFromLayout();
this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=H;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(H){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=H.scaleBy(1/this.halo.target.scale);this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(H){this.scaleGauge=null;H=this.initRotation+(H-this.angle);H=Ja.num.toRadians(Ja.num.detent(Ja.num.toDegrees(H),
10,45));this.halo.target.rotation=H;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(H){var ka=this.scaleGauge,Ca=this.halo;ka||(ka=this.scaleGauge=H.scaleBy(1/Ca.target.scale));this.angle=H.theta();this.initRotation=Ca.target.rotation;Ca.target.scale=Ja.num.detent(H.dist(Ja.pt(0,0))/ka.dist(Ja.pt(0,0)),.1,.5);Ca.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();
this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(H){this.styleClasses=["fas",H?"fa-search-plus":"fa-redo"];this.tooltip=H?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(H){this.adaptAppearance(H.isShiftDown());
H.isShiftDown()?this.initScale(H.position.subPt(this.halo.target.globalPosition)):this.init(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(H){this.globalPosition=H.position.addPt(Ja.pt(-10,-10));this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.updateScale(H.position.subPt(this.halo.target.globalPosition)):this.update(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(H){this.adaptAppearance(H.isShiftDown());
this.stop()}},{key:"onKeyDown",value:function(H){this.adaptAppearance(H.isShiftDown())}},{key:"onKeyUp",value:function(H){this.adaptAppearance(H.isShiftDown())}}],[{key:"className",get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34024,end:37468})})(Ja.HaloItem);Ja.nameNumberRe=/(.+)([0-9]+)$/;(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("ComponentHaloItem")&&"function"===typeof ma.ComponentHaloItem?ma.ComponentHaloItem:ma.ComponentHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"updateComponentIndicator",
value:function(){var H=this.world(),ka=this.halo.target;this.halo.remove();H.showHaloFor(ka)}},{key:"onMouseDown",value:function(){this.halo.target.isComponent=!this.halo.target.isComponent;this.updateComponentIndicator()}}],[{key:"className",get:function(){return"ComponentHaloItem"}},{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=
this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37510,end:38256})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("CopyHaloItem")&&"function"===typeof ma.CopyHaloItem?
ma.CopyHaloItem:ma.CopyHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"init",value:function(H){function ka(ue,td){return td.match(Ja.nameNumberRe)?td.replace(Ja.nameNumberRe,function(Nd,Ve,Ke){Ke||(Ke="0");for(Nd=Number(Ke);ue.get(Ve+ ++Nd););return Ve+Nd}):td+"1"}var Ca=this.halo,rb=Ca.target,sc=Ca.world(),Ac=rb instanceof Ja.MultiSelectionTarget;Ca.remove();Ja.connect(H,"update",this,
"update");if(Ac){var Bd=rb.selectedMorphs.map(function(ue){return sc.addMorph(ue.copy())});Ac=Bd.map(function(ue){ue.name=ka(rb,ue.name);return ue.position});Bd[0].undoStart("copy-halo");sc.addMorph(Ca);Ca.refocus(Bd);H.grab(Ca.target);Ca.target.onGrab({halo:Ca,hand:H,isShiftDown:function(){return!1}});Ac.forEach(function(ue,td){return Bd[td].globalPosition=ue});Ca.alignWithTarget()}else{Ac=rb.globalPosition;var kd=rb.copy();rb.isComponent&&(kd.isComponent=!1,kd.withAllSubmorphsDoExcluding(function(ue){ue!=
kd&&ue.master||delete ue._parametrizedProps},function(ue){return ue.master&&ue!=kd}),kd.master=rb);kd.name=ka(rb,rb.name);sc.addMorph(kd);kd.globalPosition=Ac;kd.undoStart("copy-halo");H.grab(kd);sc.addMorph(Ca);Ca.visible=!1}}},{key:"stop",value:function(H){var ka=this.halo,Ca=$jscomp.makeIterator(H.grabbedMorphs).next().value,rb=H.findDropTarget(H.globalPosition,[ka.target],function(Ac){return!Ac.isHaloItem&&!Ac.ownerChain().some(function(Bd){return Bd.isHaloItem})}),sc=ka.target.undoInProgress;
Ja.disconnect(H,"update",this,"update");sc.addTarget(rb);H.dropMorphsOn(rb);ka.target.undoStop("copy-halo");ka.remove();H.world().showHaloFor(Ca)}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H.hand)}},{key:"update",value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var H=this,ka,Ca,rb,sc,Ac,Bd,kd,ue,td,Nd,Ve,Ke,vf,Ye,zc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ze){switch(Ze.nextAddress){case 1:ka=
H;Ca=ka.halo;if(Ca.nameHalo().nameHolders.find(function(If){return If.nameHolder===$world.focusedMorph}))return Ze.return();rb=Ca.target;sc=Ca.world();Ac=rb instanceof Ja.MultiSelectionTarget;Bd=rb.globalBounds().topLeft();kd=Ac?rb.selectedMorphs:[rb];ue=[];td='<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Ca.remove();Ze.setCatchFinallyBlocks(2);
Nd=$jscomp.makeIterator(kd);Ve=Nd.next();case 4:if(Ve.done)return td+="</body></html>",Ye=JSON.stringify(ue),Ze.yield(H.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:td},{type:"application/morphic",data:Ye}]),8);Ke=Ve.value;return Ze.yield(Ja.createMorphSnapshot(Ke,{addPreview:!1,testLoad:!1}),7);case 7:vf=Ze.yieldResult;vf.copyMeta={offset:Ke.worldPoint(Ja.pt(0,0)).subPt(Bd)};ue.push(vf);td+=Ke.renderPreview();Ve=Nd.next();Ze.jumpTo(4);break;case 8:Ze.leaveTryBlock(3);break;case 2:return zc=
Ze.enterCatchBlock(),sc.logError(zc),Ze.return();case 3:sc.addMorph(Ca),Ca.refocus(kd),Ca.setStatusMessage("copied"),Ze.jumpToEnd()}})}},{key:"onMouseUp",value:function(H){var ka=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){H.stop();return Ca.yield(ka.copyToClipBoard(),0)})}}],[{key:"className",get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},
styleClasses:{defaultValue:["far","fa-clone"]}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:38258,end:42247})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("OriginHaloItem")&&"function"===typeof ma.OriginHaloItem?
ma.OriginHaloItem:ma.OriginHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"fill",get:function(){return Ja.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Ja.pt(15,15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",
value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(H){var ka=this.halo,Ca=ka.target.origin,rb=ka.target.worldPoint(Ca);
H=ka.target.localize(rb.addPt(H)).subPt(ka.target.scroll).subPt(Ca);ka.target.adjustOrigin(ka.target.origin.addPt(H))}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta)}}],[{key:"className",get:function(){return"OriginHaloItem"}},{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},
draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ja.componentAccent:Ja.haloBlue}}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42250,end:43881})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=ma.hasOwnProperty("ResizeHandle")&&"function"===typeof ma.ResizeHandle?ma.ResizeHandle:ma.ResizeHandle=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target.extent,ka=H.y;return H.x.toFixed(1)+"x"+ka.toFixed(1)}},{key:"positionInHalo",value:function(){var H=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ja.Rectangle.prototype.sides.includes(this.location)&&
(this.visible=!1),H=H.insetBy(-4));return H.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(H){this.init(H.position,H.isShiftDown())}},{key:"onDragEnd",
value:function(H){this.stop(H.isShiftDown())}},{key:"onDrag",value:function(H){this.update(H.position,H.isShiftDown(),H.isAltDown(),H.isCtrlDown());this.focus()}},{key:"init",value:function(H,ka){ka=void 0===ka?!1:ka;var Ca=this.halo.target,rb=Ca.origin,sc=Ca.position;Ca=Ca.extent;this.startPos=H;this.startBounds=sc.subPt(rb).extent(Ca);this.startOrigin=this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();
H=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ja.num.toRadians(H%45);this.halo.toggleDiagonal(ka,this.corner)}},{key:"update",value:function(H,ka,Ca,rb){ka=void 0===ka?!1:ka;Ca=void 0===Ca?!1:Ca;rb=void 0===rb?!1:rb;var sc=this.corner,Ac=this.tfm;H=this.startPos.subPt(H);Ac=Ac.transformDirection(Ja.pt(H.x,H.y));Ca&&(Ac=Ac.griddedBy(Ja.pt(10,10)));this.halo.updateBoundsFor(sc,ka,Ac,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(ka,sc);this.updateAlignmentGuide(Ca);
ka=[];sc=sc.toLowerCase();sc.includes("left")&&ka.push("left");sc.includes("top")&&ka.push("top");sc.includes("bottom")&&ka.push("bottom");sc.includes("right")&&ka.push("right");Ja.showAndSnapToResizeGuides(this.halo.target,ka,!0,rb,5,200)}},{key:"stop",value:function(H){H=this.halo;H.layout=this.savedLayout;H.state.activeButton=null;H.alignWithTarget();H.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ja.removeSnapToGuidesOf(H.target)}},{key:"updateAlignmentGuide",value:function(H){var ka=this.halo.getSubmorphNamed("mesh");
if(H)return H=this.halo.target.extent,H=Ja.pt(H.x%10,H.y%10),ka=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),H),this.focus(),ka;ka&&ka.remove()}}],[{key:"className",get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(H){0<H&&(H-=360);H=-8-(H/45).toFixed();0==H&&(H=8);return Ja.arr.zip(Ja.arr.rotate([["topLeft",
function(ka){return ka.negated()}],["topCenter",function(ka){return ka.withX(0).negated()}],["topRight",function(ka){return ka.withX(0).negated()}],["rightCenter",function(ka){return Ja.pt(0,0)}],["bottomRight",function(ka){return Ja.pt(0,0)}],["bottomCenter",function(ka){return Ja.pt(0,0)}],["bottomLeft",function(ka){return ka.withY(0).negated()}],["leftCenter",function(ka){return ka.withY(0).negated()}]],H),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize",
"rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(H){var ka=this;if(!H.target)return[];var Ca=H.target.getGlobalTransform().getRotation();return Ja.arr.compact(this.getResizeParts(Ca).map(function(rb){var sc=$jscomp.makeIterator(rb),Ac=$jscomp.makeIterator(sc.next().value);rb=Ac.next().value;Ac.next();Ac.next();Ac=$jscomp.makeIterator(sc.next().value);sc=Ac.next().value;Ac=Ac.next().value;
return ka.for(H,rb,Ac,sc)})).map(function(rb){return rb.alignInHalo()})}},{key:"for",value:function(H,ka,Ca,rb){var sc="Resize "+ka;H=H.getSubmorphNamed(sc)||new this({name:sc,halo:H,corner:ka,tooltip:"Resize "+ka,extent:Ja.pt(10,10),borderWidth:1,borderRadius:0,borderColor:H.target.isComponent?Ja.componentAccent:Ja.haloBlue,fill:Ja.Color.white});return Object.assign(H,{nativeCursor:rb,location:Ca})}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:43941,end:49204})})(Ja.HaloItem);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("MenuHaloItem")&&"function"===typeof ma.MenuHaloItem?ma.MenuHaloItem:ma.MenuHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,
fa,[{key:"onMouseDown",value:function(H){var ka=this,Ca,rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sc){if(1==sc.nextAddress)return Ca=ka.halo.target,ka.halo.remove(),sc.yield(Ca.menuItems(),2);rb=sc.yieldResult;Ca.world().openMenu(rb).hasFixedPosition=ka.halo.hasFixedPosition;sc.jumpToEnd()})}}],[{key:"className",get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},
styleClasses:{defaultValue:["fas","fa-bars"]}}}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49207,end:49718})})(Ja.HaloItem);var Rc=ta("M",function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("MorphHighlighter")&&"function"===typeof ma.MorphHighlighter?
ma.MorphHighlighter:ma.MorphHighlighter=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=
this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(H){this.layoutHalo&&
this.layoutHalo.handleDrop(H)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:"className",get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ja.Color.orange.withA(.3)},
borderWidth:{defaultValue:2},borderColor:{defaultValue:Ja.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(H){var ka=this;this.setProperty("highlightedSides",H);this.submorphs=H.map(function(Ca){return{type:"ellipse",isHaloItem:!0,fill:Ja.Color.orange,center:ka.innerBounds()[Ca]()}});this.addMorph({type:"label",name:"name tag",padding:Ja.Rectangle.inset(5,5,5,5),fontColor:Ja.Color.white,fill:Ja.Color.orange,
borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(H){H=void 0===H?$world:H;var ka=H._morphHighlighters,Ca;for(Ca in ka)ka[Ca].remove();delete H._morphHighlighters}},{key:"for",value:function(H,ka,Ca,rb){Ca=void 0===Ca?!1:Ca;rb=void 0===rb?[]:rb;var sc=H._morphHighlighters=H._morphHighlighters||{};Ja.properties.forEachOwn(sc,
function(Ac,Bd){return Bd.alignWithHalo()});if(!ka||ka.ownerChain().find(function(Ac){return Ac.isHaloItem}))return null;sc[ka.id]=sc[ka.id]||new this({targetId:ka.id,halo:H,showLayout:Ca});H.addMorph(sc[ka.id]);sc[ka.id].highlightedSides=rb;return sc[ka.id]}},{key:"interceptDrop",value:function(H,ka,Ca){(H=H._morphHighlighters=H._morphHighlighters||{},H[ka.id])&&H[ka.id].handleDrop(Ca)}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:49908,end:53420})}(Ja.Morph));Ja.MorphHighlighter=Rc;Ja.MorphHighlighter=Rc;Ja.MorphHighlighter=Rc;var yc=ta("I",function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=ma.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof ma.InteractiveMorphSelector?ma.InteractiveMorphSelector:ma.InteractiveMorphSelector=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:Symbol.for("lively-instance-initialize"),value:function(H,ka,Ca){H=void 0===H?$world:H;this.controllingMorph=void 0===ka?null:ka;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=H;this.filterFn=Ca;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var H=Ja.promise.deferred();H.promise.resolve=H.resolve;this.whenDone=
H.promise;this.selectorMorph=Ja.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ja.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ja.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Ja.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var H=this.world.firstHand.globalPosition;this.selectorMorph.center=H;this.selectorMorph.focus();
var ka=this.selectorMorph.morphBeneath(H),Ca,rb=this.possibleTarget,sc=this.controllingMorph,Ac=this.filterFn,Bd=this.world,kd=this.morphHighlighter;for(kd==ka?ka=kd.morphBeneath(H):ka&&ka.isEpiMorph&&(ka=ka.morphBeneath(H));ka&&(Ca=[ka].concat($jscomp.arrayFromIterable(ka.ownerChain())).find(function(ue){return!ue.visible}));)ka=Ca=Ca.morphBeneath(H);if(ka&&Ac&&!Ac(ka))for(;ka&&![ka].concat($jscomp.arrayFromIterable(ka.ownerChain())).find(Ac);)ka=ka.morphBeneath(H);!ka||ka==rb||sc&&ka.ownerChain().includes(sc.getWindow())||
(kd&&kd.deactivate(),(this.possibleTarget=rb=ka)&&!rb.isWorld&&(H=this.morphHighlighter=Ja.MorphHighlighter.for(Bd,ka))&&H.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ja.MorphHighlighter.removeHighlighters(this.world);Ja.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:"className",get:function(){return"InteractiveMorphSelector"}},
{key:"selectMorph",value:function(H,ka,Ca){H=new this(H,ka,Ca);H.selectNewTarget();return H.whenDone}}],ma,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53429,end:56174})}(void 0));Ja.InteractiveMorphSelector=yc;Ja.InteractiveMorphSelector=yc;Ja.InteractiveMorphSelector=yc;Ja.default=Rb;var Ga=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Ga.show=Da;Ga.showRect=function(fa,ma,tb){var H=Ga.BoundsMarker.highlightBounds(ma);return tb?Ga.showInLoop(fa,H,ma):Ga.showThenHide(fa,H)};Ga.showInLoop=function(fa,ma,tb){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ka){switch(ka.nextAddress){case 1:return Ga.showThenHide(fa,ma,!1),ka.yield(Ga.promise.delay(300),2);case 2:H=!1,Ga.once(fa,"onMouseDown",function(){return H=!0});case 3:if(H){ka.jumpTo(4);break}return ka.yield(ma.retract(tb),
3);case 4:ma.fadeOut(2E3),ka.jumpToEnd()}})};Ga.showThenHide=function(fa,ma,tb){tb=void 0===tb?3:tb;if(fa){var H=Array.isArray(ma)?ma:[ma];H.forEach(function(ka){return fa.addMorph(ka)});tb&&setTimeout(function(){return H.forEach(function(ka){return ka.fadeOut(2E3)})},1E3*tb);return ma}};Ga.showLine=function(fa,ma,tb){tb=void 0===tb?3E3:tb;var H=ma.start;ma=ma.end.subPt(H);var ka=fa.addMorph({position:H,rotation:ma.theta(),border:{width:1,color:Ga.Color.red},width:ma.fastR(),height:0});tb&&setTimeout(function(){return ka.fadeOut()},
tb);return ka};Ga.showConnector=Lb;Ga.obj=dc;Ga.promise=Vc;Ga.string=Kb;Ga.pt=Bb;Ga.Color=Vb;Ga.Rectangle=Ta;Ga.rect=Yc;Ga.morph=Qb;Ga.easings=nc;Ga.Path=Jc;Ga.Icon=Fd;Ga.Morph=Dd;Ga.MorphicEnv=da;Ga.connect=xb;Ga.once=zb;Ga.disconnect=wc;Ga.show=Da;Ga.show=Da;(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=ma.hasOwnProperty("BoundsMarker")&&"function"===typeof ma.BoundsMarker?ma.BoundsMarker:ma.BoundsMarker=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:Symbol.for("lively-instance-initialize"),value:function(){ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Ga.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",get:function(){return!0}},{key:"markerLength",value:function(H){H=H.insetBy(-2);H=Math.min(H.width,H.height);return Math.max(4,Math.floor(10>H/10?H/
2-5:H/10))}},{key:"createMarkerEdge",value:function(){return Ga.morph({fill:Ga.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var H=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),ka=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Ca=this.topRightH||(this.topRightH=this.addMorph(this.createMarkerEdge())),rb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),sc=this.bottomRightH||(this.bottomRightH=
this.addMorph(this.createMarkerEdge())),Ac=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),Bd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),kd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[H,ka,Ca,rb,sc,Ac,Bd,kd]}},{key:"alignWithMorph",value:function(H){return this.alignWithBounds(H.globalBounds().translatedBy($world.scroll.negated()))}},{key:"alignWithBounds",value:function(H){this.alignWithRect(H.insetBy(-20));
return this.alignWithRect(H,!0)}},{key:"alignWithRect",value:function(H,ka){var Ca=this.ensureMarkerCorners(),rb=this.markerLength(H),sc=[H.topLeft().addXY(0,0).extent(Ga.pt(rb,5)),H.topLeft().addXY(0,0).extent(Ga.pt(5,rb)),H.topRight().addXY(-rb,0).extent(Ga.pt(rb,5)),H.topRight().addXY(-5,0).extent(Ga.pt(5,rb)),H.bottomRight().addXY(-5,-rb).extent(Ga.pt(5,rb)),H.bottomRight().addXY(-rb,-5).extent(Ga.pt(rb,5)),H.bottomLeft().addXY(0,-5).extent(Ga.pt(rb,5)),H.bottomLeft().addXY(0,-rb).extent(Ga.pt(5,
rb))];Ca.forEach(function(Ac,Bd){return Ac.setBounds(sc[Bd])});ka&&(this.adjustOrigin(H.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(H){var ka=this,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress)return rb.yield(ka.animate({scale:Math.max(30/H.width,1.05)}),2);Ca=ka.center;return rb.yield(ka.animate({center:Ca,scale:1,duration:300,easing:Ga.easings.inOutExpo}),0)})}}],[{key:"className",
get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(H){return(new this).alignWithMorph(H)}},{key:"highlightBounds",value:function(H){return(new this).alignWithBounds(H)}}],ma,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:2261,end:5920})})(Ga.Morph);Rb=ta("S",function(fa){var ma=
lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=ma.hasOwnProperty("StatusMessage")&&"function"===typeof ma.StatusMessage?ma.StatusMessage:ma.StatusMessage=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"relayout",value:function(){this.title=Ga.string.truncate(this.message,(this.width/15).toFixed(),"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},
{key:"setMessage",value:function(H,ka){this.message=H;this.color=ka}},{key:"slideTo",value:function(H){var ka=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return ka.sliding=ka.animate({position:H,duration:500}),Ca.yield(ka.sliding,2);ka.sliding=!1;Ca.jumpToEnd()})}},{key:"expand",value:function(){var H=this,ka,Ca,rb,sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ac){if(1==Ac.nextAddress)return H.expandable?H.sliding?Ac.yield(H.sliding,2):
Ac.jumpTo(2):Ac.return();ka=H.world();if(!ka||H.isMaximized)return Ac.return();H.isMaximized=!0;H.stayOpen=!0;Ca=H.getSubmorphNamed("message text");Ca.lineWrapping=!1;Object.assign(Ca,{clipMode:"auto",fixedWidth:!0,selectable:!0});H.expandedContent&&(Ca.value=H.expandedContent);Ca.fit();rb=Ca.textBounds().extent();sc=ka.visibleBounds();rb.y>sc.extent().y&&(rb.y=sc.extent().y-20);rb.x>sc.extent().x&&(rb.x=sc.extent().x-20);rb=H.extent.maxPt(rb);H.animate({extent:rb,center:sc.center(),duration:200});
H.relayout();H.focus();Ac.jumpToEnd()})}},{key:"fit",value:function(){var H=this.getSubmorphNamed("message text");H&&(this.extent=Ga.pt(100,35).maxPt(H.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var H=this.getSubmorphNamed("message text");H&&H.focus()}},{key:"onMouseUp",value:function(H){this.expand()}}],[{key:"className",get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Ga.pt(200,100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},
isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(H){this.setProperty("message",H);var ka=this.getSubmorphNamed("message text");if(ka){ka.value=H;var Ca=ka.documentEndPosition;Ca.row>this.maxLines&&(ka.replace({start:{row:this.maxLines,column:0},end:Ca},"...\n"),this.expandedContent||
(this.expandedContent=H));Ca=ka.documentEndPosition;0!==Ca.column&&ka.insertText("\n",Ca)}}},title:{isStyleProp:!0,derived:!0,set:function(H){this.getSubmorphNamed("message title").value=H},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(H){this.get("message icon").fontColor=H;this.get("message icon")._parametrizedProps&&(this.get("message icon")._parametrizedProps.fontColor=
H)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Ga.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Ga.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Ga.connect(this,"extent",this,"relayout")}}}}}],ma,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:5964,end:10242})}(Ga.Morph));Ga.StatusMessage=Rb;Ga.StatusMessage=Rb;Ga.StatusMessage=Rb;var qc=ta("b",function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=ma.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof ma.StatusMessageForMorph?ma.StatusMessageForMorph:ma.StatusMessageForMorph=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ab(tb,fa,[{key:"alignAtBottomOf",value:function(H){var ka=this.world();ka&&(this.bringToFront(),this.fit(),this.width=H.bounds().width,this.relayout(),H.world()&&(this.position=H.owner.worldPoint(H.bounds().bottomLeft())),H=ka.visibleBounds(),H=this.bounds().top()+this.height-H.bottom(),0<H&&this.moveBy(Ga.pt(0,-H)))}},{key:"onMouseUp",value:function(H){}}],[{key:"className",get:function(){return"StatusMessageForMorph"}},{key:"properties",get:function(){return{slidable:{defaultValue:!1},
renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var H=this.getProperty("targetMorph");return H&&$world.getMorphWithId(H)},set:function(H){this.setProperty("targetMorph",H?H.id:null);this.alignAtBottomOf(H)}},expandable:{after:["submorphs"],set:function(H){this.setProperty("expandable",H);if(H){var ka=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",type:"button"});Ga.connect(ka,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&
(this.getSubmorphNamed("expand button").remove(),Ga.disconnect(ka,"fire",this,"expand"))}}}}}],ma,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10467,end:12318})}(Ga.StatusMessage));Ga.StatusMessageForMorph=qc;Ga.StatusMessageForMorph=qc;Ga.StatusMessageForMorph=qc;Ga.showConnector=Lb;Ga.showConnector=
Lb;var Za=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Za.info="import via sub modules";Za.info="import via sub modules";Za.info="import via sub modules";var Pa=ta("v",{});Za.valueWidgets=Pa;Za.valueWidgets=Pa;Za.valueWidgets=Pa;var Qa=ta("p",{});Za.popovers=Qa;Za.popovers=Qa;Za.popovers=Qa;var Hb=lively.FreezerRuntime.recorderFor("lively.components/popup.js");Hb.Morph=Dd;Hb.VerticalLayout=qa;Hb.StyleSheet=ud;Hb.Icon=Fd;Hb.CustomLayout=Va;Hb.Color=Vb;Hb.rect=Yc;Hb.pt=Bb;Hb.connect=xb;
Hb.Path=ac;Hb.duration=300;Za=ta("P",function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),tb=ma.hasOwnProperty("Popover")&&"function"===typeof ma.Popover?ma.Popover:ma.Popover=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"relayout",value:function(H){var ka=this.get("body"),Ca=this.get("arrow"),rb=this.get("close button");Ca=Ca.height;H?(ka.animate({topCenter:Hb.pt(0,
Ca),duration:200}),rb.animate({topRight:ka.topRight.addXY(8,-8),duration:200})):(ka.topCenter=Hb.pt(0,Ca),rb.topRight=ka.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:"className",get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:Hb.pt(200,
200),fill:Hb.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(H){var ka=this;this.get("body").addMorph(H);this.whenRendered().then(function(){return ka.relayout()})}},submorphs:{initialize:function(){var H=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:Hb.pt(0,0),borderColor:Hb.Color.transparent,vertices:[Hb.pt(-10,0),Hb.pt(0,-15),Hb.pt(10,0)]},{name:"body"},{name:"close button",
type:"button",label:Object.assign(Hb.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:Hb.pt(16,16),borderColor:Hb.Color.transparent}];var ka=$jscomp.makeIterator(this.submorphs);ka.next();var Ca=ka.next().value;ka=ka.next().value;Hb.connect(ka,"fire",this,"close");Hb.connect(Ca,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return H.animated=!0},1E3)}}}}}],ma,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(Hb.Morph));Hb.Popover=Za;Hb.Popover=Za;Hb.Popover=Za;var Gb=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");Gb.Morph=Dd;Gb.TilingLayout=cb;Gb.morph=Qb;Gb.Label=Ic;Gb.HorizontalLayout=Nc;Gb.Icon=Fd;Gb.InputLine=kb;Gb.config=Ma;Gb.connect=xb;Gb.signal=yb;Gb.Color=Vb;Gb.LinearGradient=sb;Gb.pt=Bb;Gb.rect=Yc;Gb.num=hc;Gb.obj=
dc;Gb.popovers=Qa;Gb.ValueScrubber=Oa;Gb.Popover=Za;(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof ma.ContextSensitiveWidget?ma.ContextSensitiveWidget:ma.ContextSensitiveWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,void 0,[{key:"className",get:function(){return"ContextSensitiveWidget"}},
{key:"properties",get:function(){return{fill:{defaultValue:Gb.Color.transparent},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Gb.Color.white:Gb.Color.black}},layout:{initialize:function(){this.layout=new Gb.HorizontalLayout}},context:{serialize:!1}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2439})})(Gb.Morph);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("ShortcutWidget")&&"function"===typeof ma.ShortcutWidget?ma.ShortcutWidget:ma.ShortcutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"onMouseDown",value:function(H){this.openPopover()}},
{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){H.jumpToEnd()})}}],[{key:"className",get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(H){this.setProperty("title",H);this.getSubmorphNamed("valueString").value=H}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(ka){return ka.fontColor=H})}},submorphs:{initialize:function(){this.submorphs=
[Gb.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:Gb.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:Gb.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:2441,end:3667})})(Gb.ContextSensitiveWidget);Qa=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("LayoutWidget")&&"function"===typeof ma.LayoutWidget?ma.LayoutWidget:ma.LayoutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+
" Layout":"No Layout"}},{key:"openPopover",value:function(){var H=this,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return ka=new Gb.popovers.LayoutPopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition}),container:H.context}),Ca.yield(ka.fadeIntoWorld(H.globalBounds().center()),2);Gb.connect(ka,"layoutChanged",H,"layoutChanged");Gb.signal(H,"openWidget",ka);Ca.jumpToEnd()})}}],[{key:"className",get:function(){return"LayoutWidget"}},
{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3676,end:4493})}(Gb.ShortcutWidget);
Gb.LayoutWidget=Qa;Gb.LayoutWidget=Qa;Gb.LayoutWidget=Qa;Za=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("ColorWidget")&&"function"===typeof ma.ColorWidget?ma.ColorWidget:ma.ColorWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"relayout",value:function(H){H?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():
this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var H=this.color;if(2*H.stops.length==this.submorphs.length-3){var ka;for(ka in this.color.stops){var Ca=H.stops[ka];var rb=Ca.color,sc=Ca.offset,Ac=$jscomp.makeIterator(this.submorphs[2+2*ka].submorphs).next().value;Ca=this.submorphs[3+2*ka];Ac.fill=rb;Ca.value=(100*sc).toFixed()+"%"+(ka<H.stops.length-1?",":"")}}else this.submorphs=
this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=Gb.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:Gb.pt(15,
15),fill:Gb.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:Gb.pt(5,7.5),fill:Gb.Color.white,borderColor:Gb.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[Gb.pt(0,0),Gb.pt(10,10)],borderColor:Gb.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:Gb.pt(15,15),fill:Gb.Color.transparent,submorphs:[{styleClasses:["colorValue"],
name:"color box",center:Gb.pt(5,7.5),fill:this.color,borderColor:Gb.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:Gb.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var H=this.color,ka=[{type:"label",padding:Gb.rect(0,0,5,0),value:"linearGradient"==H.type?Gb.num.toDegrees(H.vectorAsAngle()).toFixed()+"\u00b0,":""}],Ca;for(Ca in H.stops){var rb=H.stops[Ca],sc=rb.color;rb=rb.offset;ka.push({extent:Gb.pt(this.fontSize,
this.fontSize),fill:Gb.Color.transparent,layout:new Gb.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:sc}]});ka.push({type:"label",padding:Gb.rect(0,0,5,0),value:(100*rb).toFixed()+"%"+(Ca<H.stops.length-1?",":"")})}return ka}},{key:"onMouseDown",value:function(H){this.openFillEditor()}},{key:"update",value:function(H){this.color=H}},{key:"openFillEditor",value:function(){var H=this,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return ka=
new Gb.popovers.FillPopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition}),handleMorph:H.context,fillValue:H.color,title:"Fill Control",gradientEnabled:H.gradientEnabled}),Ca.yield(ka.fadeIntoWorld(H.globalBounds().center()),2);Gb.connect(ka,"fillValue",H,"update");Gb.signal(H,"openWidget",ka);Ca.jumpToEnd()})}}],[{key:"className",get:function(){return"ColorWidget"}},{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new Gb.HorizontalLayout({direction:"centered"})}},
selectionFontColor:{defaultValue:Gb.Color.white},nonSelectionFontColor:{defaultValue:Gb.Color.black},color:{defaultValue:Gb.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(H){this.getProperty("isSelected")!=H&&(this.getSubmorphNamed("valueString").fontColor=H?this.selectionFontColor:this.nonSelectionFontColor,this.setProperty("isSelected",H))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){Gb.connect(this,
"color",this,"relayout",{converter:function(H,ka){return(ka&&ka.isColor)!=(H&&H.isColor)}});this.relayout(!0)}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:4557,end:9992})}(Gb.ContextSensitiveWidget);Gb.ColorWidget=Za;Gb.ColorWidget=Za;Gb.ColorWidget=Za;var ad=function(fa){var ma=
lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("BooleanWidget")&&"function"===typeof ma.BooleanWidget?ma.BooleanWidget:ma.BooleanWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"onMouseDown",value:function(H){this.boolean=!this.boolean}}],[{key:"className",get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:Gb.config.codeEditor.defaultStyle.fontFamily},
nativeCursor:{defaultValue:"pointer"},boolean:{set:function(H){this.setProperty("boolean",H);this.value=Gb.obj.safeToString(H);this.fontColor=this.boolean?Gb.Color.green:Gb.Color.red}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10001,end:10481})}(Gb.Label);Gb.BooleanWidget=
ad;Gb.BooleanWidget=ad;Gb.BooleanWidget=ad;var Td=ta("N",function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("NumberWidget")&&"function"===typeof ma.NumberWidget?ma.NumberWidget:ma.NumberWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"onMouseDown",value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),"onMouseDown",this).call(this,
H);"up"==H.targetMorph.name&&this.increment();"down"==H.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return Gb.obj.dissoc(ab._get(Object.getPrototypeOf(tb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(H,ka){ka=void 0===ka?!0:ka;this.setProperty("number",ka?H/this.scaleFactor:H);Gb.signal(this,"number",this.number);this.relayout(ka)}},{key:"relayoutButtons",value:function(){var H=this.getSubmorphNamed("up"),ka=this.getSubmorphNamed("down");this.getSubmorphNamed("value");
H.height=ka.height=(this.height-2)/2;H.width=ka.width=20}},{key:"onChange",value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),"onChange",this).call(this,H);"extent"!=H.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(H){var ka=this.getSubmorphNamed("value");ka&&(this.autofit?(H||(ka.value=this.number*this.scaleFactor),ka.fit(),this.height=ka.height,this.width=ka.width+20):H||(ka.width=this.width-20),this.relayoutButtons(),H||(ka.value=Gb.num.roundTo(this.number*this.scaleFactor,
1),ka.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,ka.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,ka.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||this.update(this.number-1/this.scaleFactor,!1)}}],[{key:"className",get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",
isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(H){this.setProperty("autofit",H);this.getSubmorphNamed("value").scaleToBounds=!H}},number:{defaultValue:0,after:["unit","autofit"],set:function(H){this.setProperty("number",H);this.relayout(!1)}},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(H){this.setProperty("floatingPoint",H);this.get("value").floatingPoint=H},get:function(){var H=
/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&H&&!!H[1]}},padding:{isStyleProp:!0,defaultValue:Gb.rect(5,3,0,0),after:["submorphs"],set:function(H){this.setProperty("padding",H);this.getSubmorphNamed("value").padding=H}},extent:{defaultValue:Gb.pt(70,25)},scaleFactor:{defaultValue:1,get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(H){this.get("value").baseFactor=
H}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:Gb.Color.rgbHex("#0086b3"),set:function(H){this.setProperty("fontColor",H)}},isSelected:{set:function(H){this.getProperty("isSelected")!=H&&(H?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",H))}},
fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(H){this.setProperty("fontFamily",H)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(H){this.setProperty("fontSize",H)}},layout:{initialize:function(){this.layout=new Gb.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min","max"],initialize:function(){var H=this;this.submorphs=[new Gb.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),
Gb.Icon.makeLabel("sort-up",{name:"up"}),Gb.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];Gb.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return H.relayout()})}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10490,end:16426})}(Gb.Morph));
Gb.NumberWidget=Td;Gb.NumberWidget=Td;Gb.NumberWidget=Td;var Zd=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("ShadowWidget")&&"function"===typeof ma.ShadowWidget?ma.ShadowWidget:ma.ShadowWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,
ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return ka=new Gb.popovers.ShadowPopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition}),shadowValue:H.shadowValue}),Ca.yield(ka.fadeIntoWorld(H.globalBounds().center()),2);Gb.connect(ka,"shadowValue",H,"shadowValue");Gb.connect(H,"shadowValue",H,"update");Gb.signal(H,"openWidget",ka);Ca.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",
value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var H=this.shadowValue,ka=H.blur,Ca=H.spread,rb=H.distance;H=H.color;var sc=$jscomp.makeIterator(this.submorphs),Ac=sc.next().value,Bd=sc.next().value;Bd=$jscomp.makeIterator(Bd.submorphs).next().value;sc=sc.next().value;
Ac.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";Bd.fill=H;sc.value=", "+ka+"px, "+rb+"px, "+Ca+"px)"}},{key:"initShadowDisplay",value:function(){var H=this.shadowValue,ka=H.blur,Ca=H.spread,rb=H.distance;H=H.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},Gb.morph({fill:Gb.Color.transparent,extent:Gb.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:Gb.pt(this.fontSize,this.fontSize),position:Gb.pt(2,
2),fill:H,borderColor:Gb.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+ka+"px, "+rb+"px, "+Ca+"px)"}]}}],[{key:"className",get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(H){this.setProperty("shadowValue",H);this.renderShadowDisplay()}},fill:{defaultValue:Gb.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,
set:function(H){this.submorphs.forEach(function(ka){return ka.fontColor=H})}},isSelected:{defaultValue:!1,set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Gb.Color.white:Gb.Color.black}},layout:{initialize:function(){this.layout=new Gb.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16435,end:19445})}(Gb.Morph);Gb.ShadowWidget=Zd;Gb.ShadowWidget=Zd;Gb.ShadowWidget=Zd;var Ue=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("PointWidget")&&"function"===typeof ma.PointWidget?ma.PointWidget:ma.PointWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"onMouseDown",
value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return ka=new Gb.popovers.PointPopover({pointValue:H.pointValue,hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition})}),Ca.yield(ka.fadeIntoWorld(H.globalBounds().center()),2);Gb.connect(ka,"pointValue",H,"pointValue");Gb.signal(H,"openWidget",ka);Ca.jumpToEnd()})}}],[{key:"className",get:function(){return"PointWidget"}},
{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:Gb.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Gb.Color.black},fontFamily:{defaultValue:Gb.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],
set:function(H){var ka=Gb.Color.rgbHex("#0086b3");this.setProperty("pointValue",H);this.textAndAttributes=["pt(",null,H.x.toFixed(),{fontColor:ka},",",{},H.y.toFixed(),{fontColor:ka},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:19454,end:21082})}(Gb.Label);Gb.PointWidget=Ue;Gb.PointWidget=Ue;Gb.PointWidget=Ue;var Fc=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("PaddingWidget")&&"function"===typeof ma.PaddingWidget?ma.PaddingWidget:ma.PaddingWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"onMouseDown",value:function(H){this.openPopover()}},
{key:"openPopover",value:function(){var H=this,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return ka=new Gb.popovers.RectanglePopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition}),rectangle:H.rectangle}),ka.relayout(),Ca.yield(ka.fadeIntoWorld(H.globalBounds().center()),2);Gb.connect(ka,"rectangle",H,"rectangle");Gb.signal(H,"openWidget",ka);Ca.jumpToEnd()})}}],[{key:"className",get:function(){return"PaddingWidget"}},
{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:Gb.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Gb.Color.white:Gb.Color.black}},rectangle:{defaultValue:Gb.rect(0),set:function(H){this.setProperty("rectangle",H);this.value=Gb.obj.safeToString(H)}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21091,end:22140})}(Gb.Label);Gb.PaddingWidget=Fc;Gb.PaddingWidget=Fc;Gb.PaddingWidget=Fc;var Md=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("IconWidget")&&"function"===typeof ma.IconWidget?ma.IconWidget:ma.IconWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ab(tb,fa,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==Ca.nextAddress)return ka=new Gb.popovers.IconPopover({hasFixedPosition:!!H.ownerChain().find(function(rb){return rb.hasFixedPosition})}),Ca.yield(ka.fadeIntoWorld(H.globalBounds().center()),2);Gb.connect(ka,"select",H,"iconValue",{converter:function(rb){return rb&&Gb.Icon.makeLabel(rb).value},
varMapping:{Icon:Fd}});Gb.signal(H,"openWidget",ka);Ca.jumpToEnd()})}}],[{key:"className",get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:Gb.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},set:function(H){this.value=H||"No Icon"}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22149,end:23045})}(Gb.Label);Gb.IconWidget=Md;Gb.IconWidget=Md;Gb.IconWidget=Md;var fd=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=ma.hasOwnProperty("StringWidget")&&"function"===typeof ma.StringWidget?ma.StringWidget:ma.StringWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ab(tb,fa,[{key:"truncate",value:function(H){return 200<H.length?H.slice(0,20)+"...":H}},{key:"onFocus",value:function(H){var ka=this,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress)return ab._get(Object.getPrototypeOf(tb.prototype),"onFocus",ka).call(ka,H),ka.readOnly?rb.return():ka.stringTooLong?rb.yield(ka.world().editPrompt("edit string",{requester:ka,input:ka.stringValue}),2):(ka.borderColor=Gb.Color.white.withA(.9),ka.textString=ka.stringValue,
rb.return());Ca=rb.yieldResult;if("string"===typeof Ca)ka.onInput(Ca);rb.jumpToEnd()})}},{key:"onBlur",value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),"onBlur",this).call(this,H);this.readOnly||(this.borderColor=Gb.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(H){this.owner.focus();Gb.signal(this,"inputAccepted",H);this.stringValue=H}}],[{key:"className",get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:Gb.Color.transparent},
fontColor:{defaultValue:Gb.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:Gb.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:Gb.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(H){this.setProperty("stringValue",H);this.textString=this.truncate(H);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,
get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?Gb.Color.white:Gb.Color.blue}}}}}],ma,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23054,end:24974})}(Gb.InputLine);Gb.StringWidget=
fd;Gb.StringWidget=fd;Gb.StringWidget=fd;Gb.valueWidgets=Pa;Object.assign(Gb.valueWidgets,{NumberWidget:Td,StringWidget:fd,IconWidget:Md,PaddingWidget:Fc,ShadowWidget:Zd,PointWidget:Ue,BooleanWidget:ad,LayoutWidget:Qa,ColorWidget:Za});var Ib=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");Ib.Ellipse=lb;Ib.Icon=Fd;Ib.Morph=Dd;Ib.Path=Jc;Ib.Text=Xc;Ib.HorizontalLayout=Nc;Ib.VerticalLayout=qa;Ib.morph=Qb;Ib.Color=Vb;Ib.pt=Bb;Ib.rect=Yc;Ib.Rectangle=Ta;Ib.arr=kc;Ib.connect=xb;Ib.disconnect=
wc;Ib.LabeledCheckBox=Wb;Ib.DropDownSelector=Nb;Ib.Button=rc;Ib.Menu=xc;Ib.NumberWidget=Td;Ib.InteractiveMorphSelector=yc;Ib.easings=nc;(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("AxisHalo")&&"function"===typeof ma.AxisHalo?ma.AxisHalo:ma.AxisHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ka=
H.halo;H=H.targetAxis;ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:Ib.Color.transparent,halo:ka,targetAxis:H,container:ka.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},
{key:"forceMenuHidden",set:function(H){this._forceMenuHidden=H;this.axisMenu.visible=!H}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",
value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(H){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var H=this,ka=this,Ca=this.proportionViewer();return this.halo.addGuide(new Ib.Morph({nativeCursor:this.getResizeCursor(),fill:Ib.Color.transparent,submorphs:[this.devider(),Ca],alignWithTarget:function(){this.setBounds(ka.getProportionSliderBounds(this))},
onDragStart:function(){Ca.visible=!0},onDrag:function(rb){H.adjustStretch(H.getDelta(rb));H.halo.alignWithTarget()},onDragEnd:function(){Ca.visible=!1}}))}},{key:"devider",value:function(){return new Ib.Morph({visible:!this.lastAxis,fill:Ib.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var H=this,ka=this,Ca=this.minSpaceVisualizer(),rb=this.minViewer();return this.halo.addGuide(new Ib.Ellipse({nativeCursor:this.getResizeCursor(),
fill:Ib.Color.green,extent:Ib.pt(10,10),visible:!1,submorphs:[Ca,rb],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=ka.getMinSliderPosition()},requestToShow:function(){this.visible=!ka.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){ka.forceMenuHidden=!0;rb.visible=!0;this.active=Ca.visible=!0},onDrag:function(sc){H.targetAxis.min+=-H.getDelta(sc);H.halo.alignWithTarget()},onDragEnd:function(){ka.forceMenuHidden=!1;
rb.visible=!1;this.active=Ca.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var H=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+H.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new Ib.Path(Object.assign({position:Ib.pt(-1,-1),borderStyle:"dashed",borderColor:Ib.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",
value:function(){var H=this,ka=this.minSpaceBorder();return this.halo.addGuide(new Ib.Morph({fill:Ib.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[ka],alignWithTarget:function(){this.extent=H.getMinSpaceExtent();this.topLeft=Ib.pt(5,5)}}))}},{key:"axisMenu",value:function(){var H=this.lockButton(),ka=this.menuButton(),Ca=this;return new Ib.Morph({layout:this.getMenuLayout(),submorphs:[H,ka],fill:Ib.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=
this.owner.extent.subPt(Ca.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var H=this;return this.halo.addGuide(new Ib.Morph({fill:Ib.Color.transparent,extent:Ib.pt(25,25),submorphs:[{center:Ib.pt(12.5,12.5),fill:Ib.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){H.targetAxis.fixed?(this.fontColor=Ib.Color.red,this.submorphs[0].styleClasses=["fa","fa-lock"]):(this.fontColor=Ib.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},
toggleLock:function(){H.targetAxis.fixed=!H.targetAxis.fixed;H.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var H=this,ka=this;return new Ib.Morph({fill:Ib.Color.transparent,extent:Ib.pt(25,25),submorphs:[{fill:Ib.Color.transparent,styleClasses:["fa","fa-cog"],center:Ib.pt(12.5,12.5)}],onMouseDown:function(Ca){ka.forceMenuVisible=!0;this.addMorph(Ca.state.menu=new Ib.Menu({position:Ib.pt(15,15),items:[["Remove "+ka.subject,function(){H.targetAxis.remove();H.halo.initGuides();H.halo.alignWithTarget()}],
["Insert "+ka.subject+" before",function(){H.targetAxis.addBefore();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+ka.subject+" after",function(){H.targetAxis.addAfter();H.halo.initGuides();H.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(H){var ka=H.position;H=H.alignWithTarget;return this.halo.addGuide(new Ib.Text({styleClasses:["Halo"],padding:Ib.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:Ib.Color.white,fill:Ib.Color.black.withA(.5),position:ka,alignWithTarget:H,
readOnly:!0}))}},{key:"proportionViewer",value:function(){var H=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=H.targetAxis.length.toFixed(1)+"px"}})}}],[{key:"className",get:function(){return"AxisHalo"}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:660,end:7979})})(Ib.Morph);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("RowHalo")&&"function"===typeof ma.RowHalo?ma.RowHalo:ma.RowHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var ka=H.row;H=H.halo;ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,{targetAxis:H.target.row(ka),halo:H})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(H){this.targetAxis.height+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return Ib.pt(-45,this.axisOffset()+10)}},{key:"fetchExtent",value:function(){return Ib.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>
H.height?Ib.pt(2,5):Ib.pt(26,10)}},{key:"getMenuLayout",value:function(){return new Ib.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return Ib.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return Ib.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return Ib.pt(this.container.width+45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:Ib.pt(this.container.width+
50,2),vertices:[Ib.pt(0,1),Ib.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return Ib.pt(40,20)}},{key:"getProportionSliderBounds",value:function(H){return Ib.pt(0,H.owner.height-5).extent(Ib.pt(40,10))}},{key:"getDeviderBounds",value:function(){return Ib.pt(15,4).extent(Ib.pt(25,2))}}],[{key:"className",get:function(){return"RowHalo"}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(Ib.AxisHalo);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("ColumnHalo")&&"function"===typeof ma.ColumnHalo?ma.ColumnHalo:ma.ColumnHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:Symbol.for("lively-instance-initialize"),
value:function(H){var ka=H.col;H=H.halo;ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.col(ka),halo:H})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(H){this.targetAxis.width+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.x}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return Ib.pt(this.axisOffset()+
10,-45)}},{key:"fetchExtent",value:function(){return Ib.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.width?Ib.pt(5,3):Ib.pt(8,26)}},{key:"getMenuLayout",value:function(){return new Ib.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return Ib.pt(20,50)}},{key:"getMinSliderPosition",value:function(){return Ib.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",
value:function(){return Ib.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:Ib.pt(2,this.container.height+50),vertices:[Ib.pt(1,0),Ib.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return Ib.pt(20,40)}},{key:"getProportionSliderBounds",value:function(H){return Ib.pt(H.owner.width-5,0).extent(Ib.pt(10,40))}},{key:"getDeviderBounds",value:function(){return Ib.pt(4,15).extent(Ib.pt(2,25))}}],[{key:"className",
get:function(){return"ColumnHalo"}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(Ib.AxisHalo);(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("CellGuide")&&"function"===typeof ma.CellGuide?ma.CellGuide:ma.CellGuide=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"menuItems",value:function(){var H=this,ka=Ib.Icon.textAttribute("check-square-o"),Ca=Ib.Icon.textAttribute("square-o");ka[1].textStyleClasses.push("annotation");Ca[1].textStyleClasses.push("annotation");Ca[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Ca:ka)),function(){H.cellGroup.resize=
!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?ka:Ca)),function(){H.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new Ib.Rectangle).sides),$jscomp.arrayFromIterable((new Ib.Rectangle).corners)).map(function(rb){return[[rb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(H.cellGroup.align==rb?ka:Ca),["  ",null]),function(){return H.cellGroup.align=rb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var rb=
H.cellGroup.morph;rb&&(H.world().firstHand.grab(rb),H.world().firstHand.longClickGrab=!0,rb.position=Ib.pt(0))}]]:[])}}],[{key:"className",get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(Ib.Morph);
(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("LayoutHalo")&&"function"===typeof ma.LayoutHalo?ma.LayoutHalo:ma.LayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,void 0,[{key:"className",get:function(){return"LayoutHalo"}},{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},
isHaloItem:{defaultValue:!0},borderColor:{defaultValue:Ib.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:11724,end:12137})})(Ib.Morph);Pa=ta("G",function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
tb=ma.hasOwnProperty("GridLayoutHalo")&&"function"===typeof ma.GridLayoutHalo?ma.GridLayoutHalo:ma.GridLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"previewDrop",value:function(H){1>H.length||(H=this.cellGuides.find(function(ka){return ka.fullContainsWorldPoint($world.firstHand.position)}),H!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=H)&&this.currentCell.startPreview())}},
{key:"handleDrop",value:function(H){var ka=this;this.currentCell&&H.whenRendered().then(function(){return ka.currentCell.cellGroup.morph=H})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var H=this.target,ka=new Ib.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:Ib.Color.transparent,checked:H.compensateOrigin}),Ca=new Ib.LabeledCheckBox({label:"Resize Submorphs",fill:Ib.Color.transparent,
name:"fitToCell",checked:H.fitToCell});Ib.connect(ka,"checked",H,"compensateOrigin");Ib.connect(Ca,"checked",H,"fitToCell");Ib.connect(ka,"checked",this,"alignWithTarget");return[ka,Ca]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());this.extent=this.container.extent;this.addMissingGuides();Ib.arr.reverse(this.guides).forEach(function(H){return H.alignWithTarget()})}},
{key:"addMissingGuides",value:function(){var H=this;Ib.arr.withoutAll(this.target.cellGroups,this.guides.map(function(ka){return ka.cellGroup})).forEach(function(ka){return H.addMorph(H.cellGuide(ka))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",value:function(){var H=this,ka=this.addMorph({fill:Ib.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Ca){ka.addMorph(H.cellGuide(Ca))});
this.cellGuides=ka.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(H){H.isHaloItem=!0;this.guides.push(H);return H}},{key:"initRowGuides",value:function(){var H=this,ka=this;this.addGuide(this.addMorph(new Ib.Morph({width:25,fill:Ib.Color.gray.withA(.7),borderRadius:15,height:this.container.height,topRight:Ib.pt(-5,0),alignWithTarget:function(){this.height=ka.container.height}})));Ib.arr.range(0,this.target.rowCount-1).forEach(function(Ca){H.addMorph(new Ib.RowHalo({row:Ca,
halo:H}))})}},{key:"initColumnGuides",value:function(){var H=this,ka=this;this.addGuide(this.addMorph(new Ib.Morph({height:25,fill:Ib.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:Ib.pt(0,-5),alignWithTarget:function(){this.width=ka.container.width}})));Ib.arr.range(0,this.target.columnCount-1).forEach(function(Ca){H.addMorph(new Ib.ColumnHalo({col:Ca,halo:H}))})}},{key:"resizer",value:function(){var H=this;return this.addGuide(new Ib.Morph({fill:Ib.Color.transparent,
extent:Ib.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(ka){H.container.resizeBy(ka.state.dragDelta);H.alignWithTarget()},alignWithTarget:function(){this.bottomRight=H.extent}}))}},{key:"cellResizer",value:function(H,ka){var Ca=this,rb="topLeft"==ka?"bottomRight":"topLeft";return new Ib.Ellipse({borderWidth:1,visible:!1,borderColor:Ib.Color.black,nativeCursor:"nwse-resize",removeCell:function(sc){H.disconnect(sc);Ca.alignWithTarget()},addCell:function(sc){H.connect(sc);Ca.alignWithTarget()},
start:function(){this.fixpointCell=H[rb];this.draggedDelta=H.bounds().partNamed(ka);this.debugMorph=Ca.addMorph(new Ib.Morph({fill:Ib.Color.orange.withA(.5)}))},update:function(sc){var Ac=this;this.draggedDelta=this.draggedDelta.addPt(sc);var Bd=Ib.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(Bd);Ca.cells.forEach(function(kd){var ue=Bd.intersection(kd.bounds()).area()/kd.bounds().area();H.includes(kd)&&.1>ue&&Ac.removeCell(kd);!H.includes(kd)&&
ue>1/3&&Ac.addCell(kd)})},onDragEnd:function(sc){this.debugMorph.remove()},onDragStart:function(sc){this.start(sc.position)},onDrag:function(sc){this.update(sc.state.dragDelta)}})}},{key:"cellGuide",value:function(H){var ka=this,Ca=this.cellResizer(H,"topLeft"),rb=this.cellResizer(H,"bottomRight");return this.addGuide(new Ib.CellGuide({cellGroup:H,bounds:H.bounds(),fill:Ib.Color.transparent,borderColor:Ib.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Ca,rb],onMouseDown:function(sc){this.becomeActive()},
deactivate:function(){this.borderColor=Ib.Color.orange;this.fill=Ib.Color.transparent;this.submorphs.forEach(function(sc){sc.visible=!1})},becomeActive:function(){ka.guides.forEach(function(sc){sc.isCell&&sc.deactivate()});this.borderColor=Ib.Color.rgbHex("#1565C0");this.fill=Ib.Color.rgbHex("#1565C0").withA(.3);ka.addMorph(this.remove());this.submorphs.forEach(function(sc){sc.visible=!0})},startPreview:function(sc){this.fill=Ib.Color.orange.withA(.7)},stopPreview:function(sc){this.fill=Ib.Color.transparent},
onDrop:function(sc){var Ac=$jscomp.makeIterator(sc.hand.grabbedMorphs).next().value;sc.hand.dropMorphsOn(ka.container);H.morph=Ac},alignWithTarget:function(){H.bounds().isNonEmpty()?(this.setBounds(H.bounds()),Ca.center=this.innerBounds().topLeft(),rb.center=this.innerBounds().bottomRight()):(Ib.arr.remove(ka.guides,this),this.remove())}}))}}],[{key:"className",get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ib.Color.transparent},cells:{derived:!0,
get:function(){return Ib.arr.flatten(this.target.col(0).items.map(function(H){return H.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(Ib.LayoutHalo));Ib.GridLayoutHalo=Pa;Ib.GridLayoutHalo=Pa;
Ib.GridLayoutHalo=Pa;Qa=function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof ma.TilingLayoutHalo?ma.TilingLayoutHalo:ma.TilingLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"remove",value:function(){ab._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this);this.removePreviews();return this}},
{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(H){}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"previewDrop",value:function(H){var ka=this;0<this.previews.length||(this.previews=H.map(function(Ca){return ka.container.addMorph({type:Ib.DropPreview,bounds:Ca.bounds()})}),this.previews.forEach(function(Ca){Ca.step()}))}},{key:"updateSpacing",value:function(H){this.target.spacing=
H}},{key:"updateAxis",value:function(H){this.target.axis=H}},{key:"updateAlign",value:function(H){this.target.align=H}},{key:"optionControls",value:function(){var H=this.target,ka=new Ib.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.axis,values:["row","column"]}),Ca=new Ib.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.align,values:["left","center"]});H=new Ib.NumberWidget({min:0,number:H.spacing,padding:Ib.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:Ib.Color.gray,
unit:"px"});Ib.connect(H,"update",this,"updateSpacing");Ib.connect(Ca,"update",this,"updateAlign");Ib.connect(ka,"update",this,"updateAxis");var rb={type:"label",padding:Ib.rect(0,5,5,5),fill:Ib.Color.transparent,fontColor:Ib.Color.gray.darker(),readOnly:!0};return[[Object.assign({},rb,{textString:"Submorph Spacing"}),H],[Object.assign({},rb,{textString:"Tiling Align"}),Ca],[Object.assign({},rb,{textString:"Tiling Axis"}),ka]].map(function(sc){return{submorphs:sc,fill:null,layout:new Ib.HorizontalLayout({spacing:3})}})}}],
[{key:"className",get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ib.Color.transparent},previews:{defaultValue:[]}}}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(Ib.LayoutHalo);Ib.TilingLayoutHalo=Qa;Ib.TilingLayoutHalo=
Qa;Ib.TilingLayoutHalo=Qa;(function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("DropPreview")&&"function"===typeof ma.DropPreview?ma.DropPreview:ma.DropPreview=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var H=this,ka;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){if(1==
Ca.nextAddress)return ka=Ib.easings.inOutQuad,Ca.yield(H.animate({opacity:.5,duration:(H.pulseDuration-10)/2,easing:ka}),2);if(3!=Ca.nextAddress)return Ca.yield(H.animate({opacity:1,duration:(H.pulseDuration-10)/2,easing:ka}),3);H.stopped||H.step();Ca.jumpToEnd()})}}],[{key:"className",get:function(){return"DropPreview"}},{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:Ib.Color.orange.withA(.3)},
hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:Ib.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(Ib.Morph);Qa=ta("F",function(fa){var ma=
lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof ma.FlexLayoutHalo?ma.FlexLayoutHalo:ma.FlexLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"handleDrop",value:function(H){}},{key:"previewDrop",value:function(H){var ka=this;0<this.previews.length||(this.previews=H.map(function(Ca){return ka.container.addMorph({type:Ib.DropPreview,
position:ka.container.localize(ka.world().firstHand.position),extent:Ca.bounds().extent()})}),this.previews.forEach(function(Ca){Ca.step()}))}},{key:"remove",value:function(){ab._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"onDrop",value:function(H){this.removePreviews();H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},
{key:"updateAutoResizePolicy",value:function(H){H&&(this.originalExtent=this.container.extent);this.target.autoResize=H;H||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(H){this.target.resizeSubmorphs=H;this.alignWithTarget()}},{key:"updateAlignmentPolicy",value:function(H){this.target.align=H}},{key:"updateDirectionPolicy",value:function(H){this.target.direction=H}},{key:"updateSpacing",value:function(H){this.target.spacing=
H}},{key:"optionControls",value:function(){var H=this.target,ka=H.possibleAlignValues?{fill:Ib.Color.transparent,layout:new Ib.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new Ib.DropDownSelector({name:"alignment",borderRadius:2,padding:3,selectedValue:H.align,values:H.possibleAlignValues})]}:null,Ca=H.possibleDirectionValues?{fill:Ib.Color.transparent,layout:new Ib.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",
value:"direction: "},new Ib.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:H.direction,values:H.possibleDirectionValues})]}:null,rb=new Ib.NumberWidget({fill:Ib.Color.white,borderWidth:1,borderRadius:4,padding:Ib.rect(5,4,0,0),borderColor:Ib.Color.gray,min:0,number:H.spacing,unit:"px"}),sc=new Ib.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:Ib.Color.transparent,checked:H.autoResize});H=new Ib.LabeledCheckBox({label:"Resize Submorphs",
name:"resizeSubmorphs",alignCheckBox:"right",fill:Ib.Color.transparent,checked:H.resizeSubmorphs});Ib.connect(rb,"update",this,"updateSpacing");Ib.connect(sc,"checked",this,"updateAutoResizePolicy");Ib.connect(H,"checked",this,"updateResizeSubmorphsPolicy");ka&&Ib.connect(ka.submorphs[1],"selectedValue",this,"updateAlignmentPolicy");Ca&&Ib.connect(Ca.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[sc,H].concat($jscomp.arrayFromIterable([ka,Ca].filter(Boolean)),[{fill:Ib.Color.transparent,
layout:new Ib.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:Ib.Color.gray.darker(),padding:Ib.rect(0,5,5,5)},rb]}])}}],[{key:"className",get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Ib.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(Ib.LayoutHalo));Ib.FlexLayoutHalo=Qa;Ib.FlexLayoutHalo=Qa;Ib.FlexLayoutHalo=Qa;Za=ta("c",function(fa){var ma=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=ma.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof ma.ProportionalLayoutHalo?ma.ProportionalLayoutHalo:ma.ProportionalLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,fa,[{key:"handleDrop",value:function(H){}},{key:"onDrop",value:function(H){H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",value:function(H){var ka={};this.target.changeSettingsFor(H.submorph,(ka[H.axis]=H.policy,ka),!0)}},{key:"onSubmorphSettingsDragStart",value:function(H,ka){var Ca=this;H.stop();
var rb=this.target.settingsFor(ka);ka="";for(var sc in rb)ka+=sc+":"+rb[sc]+" ";var Ac=Ib.morph({type:"label",value:ka,isLayoutable:!1});Ac.wantsToBeDroppedOn=function(Bd){return Ca.target.layoutableSubmorphs.includes(Bd)};Ac.onBeingDroppedOn=function(Bd,kd){Ac.remove();if(Bd=Ca.target.layoutableSubmorphs.includes(kd)?kd:H.world.morphsContainingPoint(H.hand.position).find(function(ue){return Ca.target.layoutableSubmorphs.includes(ue)}))Ca.updateSubmorphProportionalLayoutSettings({policy:rb.x,axis:"x",
submorph:Bd}),Ca.updateSubmorphProportionalLayoutSettings({policy:rb.y,axis:"y",submorph:Bd}),Bd.show(),$world.setStatusMessage("layout settings applied")};H.hand.grab(Ac)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var H=this,ka,Ca,rb,sc,Ac,Bd,kd,ue,td,Nd,Ve,Ke;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vf){switch(vf.nextAddress){case 1:return ka=H.target.layoutableSubmorphs,H.env.eventDispatcher.isKeyPressed("Shift")?(rb=ka.map(function(Ye){return{isListItem:!0,
string:String(Ye),value:Ye}}),vf.yield($world.listPrompt("Select morph",rb,{requester:H,onSelection:function(Ye){return Ye.show()}}),5)):vf.yield(Ib.InteractiveMorphSelector.selectMorph(H.world(),H,function(Ye){return ka.includes(Ye)}),4);case 4:Ca=vf.yieldResult;vf.jumpTo(3);break;case 5:sc=vf.yieldResult,Ac=$jscomp.makeIterator(sc.selected),Ca=Ac.next().value;case 3:if(!Ca)return vf.return();Bd=H.state.popover.get("controlContainer");kd=Bd.getAllNamed(/submorph config/);ue=["move","resize","scale",
"fixed"];td=H.target.settingsFor(Ca);kd.length||(Bd.submorphs=[].concat($jscomp.arrayFromIterable(Bd.submorphs),[{name:"submorph config X-Axis policy",position:Ib.pt(0,H.height),fill:Ib.Color.transparent,layout:new Ib.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new Ib.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:td.x,values:ue})]},{name:"submorph config Y-Axis policy",position:Ib.pt(0,
H.height),fill:Ib.Color.transparent,layout:new Ib.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new Ib.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:td.y,values:ue})]},Ib.morph({position:Ib.pt(0,H.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Nd=Bd.getSubmorphNamed("x-axis policy selector");Ve=Bd.getSubmorphNamed("y-axis policy selector");Ke=Bd.getSubmorphNamed("dragme");
Ib.disconnect(Nd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Ib.disconnect(Ve,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Nd.selectedValue=td.x;Ve.selectedValue=td.y;Ib.connect(Ke,"onDragStart",H,"onSubmorphSettingsDragStart",{updater:function(Ye,zc){return Ye(zc,Ca)},varMapping:{submorph:Ca}});Ib.connect(Nd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Ye){return{policy:Ye,axis:"x",submorph:Ca}},varMapping:{submorph:Ca}});Ib.connect(Ve,
"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Ye){return{policy:Ye,axis:"y",submorph:Ca}},varMapping:{submorph:Ca}});vf.jumpToEnd()}})}},{key:"optionControls",value:function(H){this.state.popover=H;var ka=this.target;H=new Ib.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:Ib.Color.transparent,checked:ka.xAxisEnabled});ka=new Ib.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:Ib.Color.transparent,checked:ka.yAxisEnabled});
var Ca=new Ib.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(Ib.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});Ib.connect(H,"checked",this,"updateXAxisEnabled");Ib.connect(ka,"checked",this,"updateYAxisEnabled");Ib.connect(Ca,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Ca]}}],[{key:"className",get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},fill:{defaultValue:Ib.Color.transparent}}}}],
ma,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(Ib.LayoutHalo));Ib.ProportionalLayoutHalo=Za;Ib.ProportionalLayoutHalo=Za;Ib.ProportionalLayoutHalo=Za;ad=lively.FreezerRuntime.recorderFor("lively.halos/index.js");ad.Halo=Mc;ad.MorphHighlighter=Rc;ad.InteractiveMorphSelector=
yc;ad.StatusMessage=Rb;ad.StatusMessageForMorph=qc;ad.show=Da;ad.showConnector=Lb;ad.ProportionalLayoutHalo=Za;ad.GridLayoutHalo=Pa;ad.FlexLayoutHalo=Qa;ad.showAndSnapToGuides=T;ad.removeSnapToGuidesOf=I;ad.StatusMessage=Rb;ad.StatusMessage=Rb;ad.StatusMessageForMorph=qc;ad.StatusMessageForMorph=qc;ad.show=Da;ad.show=Da;ad.showConnector=Lb;ad.showConnector=Lb;ad.Halo=Mc;ad.Halo=Mc;ad.MorphHighlighter=Rc;ad.MorphHighlighter=Rc;ad.InteractiveMorphSelector=yc;ad.InteractiveMorphSelector=yc;ad.ProportionalLayoutHalo=
Za;ad.ProportionalLayoutHalo=Za;ad.GridLayoutHalo=Pa;ad.GridLayoutHalo=Pa;ad.FlexLayoutHalo=Qa;ad.FlexLayoutHalo=Qa;ad.showAndSnapToGuides=T;ad.showAndSnapToGuides=T;ad.removeSnapToGuidesOf=I;ad.removeSnapToGuidesOf=I;Mc=Object.freeze({__proto__:null,StatusMessage:Rb,StatusMessageForMorph:qc,show:Da,showConnector:Lb,Halo:Mc,MorphHighlighter:Rc,InteractiveMorphSelector:yc,ProportionalLayoutHalo:Za,GridLayoutHalo:Pa,FlexLayoutHalo:Qa,showAndSnapToGuides:T,removeSnapToGuidesOf:I,SvgStyleHalo:void 0});
ta("i",Mc);ta("_",void 0)}}});