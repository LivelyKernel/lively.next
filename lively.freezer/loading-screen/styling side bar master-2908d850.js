System.register("./__root_module__-3d4e820f.js kld-intersections ./index-da7fb446.js ./index-a37f4074.js ./index-cbb45750.js ./color-picker-f9cd23a8.js ./index-68e171ef.js".split(" "),function(){var ra,kb,zb,Sb,Mb,Fd,Jc,wd,Kc,Fc,Wc,hd,Id,nd,Xc,Na,nb,Pb,Wb,Pc,Bd,Hb;return{setters:[function(Ub){ra=Ub.ai;kb=Ub.aA;zb=Ub.an;Sb=Ub.ao;Mb=Ub.av;Fd=Ub.a3;Jc=Ub.C;wd=Ub.at;Kc=Ub.aq;Fc=Ub.bp;Wc=Ub.as;hd=Ub.a7;Id=Ub.s;nd=Ub.bQ;Xc=Ub.au;Na=Ub.ar;nb=Ub.r;Pb=Ub.a6;Wb=Ub.P;Pc=Ub.bT;Bd=Ub.bU},function(){},function(){},
function(){},function(){},function(Ub){Hb=Ub.S},function(){}],execute:function(){var Ub=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Ub.Morph=ra;Ub.touchInputDevice=kb;Ub.morph=zb;Ub.Icon=Sb;Ub.easings=Mb;Ub.pt=Fd;Ub.Color=Jc;Ub.fun=wd;Ub.connect=Kc;Ub.TreeData=Fc;var vb=function($a){var dc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),oc=dc.hasOwnProperty("SettingsTree")&&"function"===typeof dc.SettingsTree?dc.SettingsTree:dc.SettingsTree=function(sa){sa&&sa[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Wc(oc,$a,[{key:"display",value:function(sa){return sa.panel?[sa.panel,{}]:sa.name}},{key:"collapse",value:function(sa,Ca){sa.isCollapsed=Ca}},{key:"isCollapsed",value:function(sa){return sa.isCollapsed}},{key:"isLeaf",value:function(sa){return!sa.children}},{key:"getChildren",value:function(sa){return sa.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,
children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},
{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Ub.morph({height:20}),
{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]}]})}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-58"}}},{start:284,end:2453})}(Ub.TreeData);Ub.SettingsTree=vb;Ub.SettingsTree=vb;Ub.SettingsTree=vb;vb=function($a){var dc=
lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),oc=dc.hasOwnProperty("StylingSideBar")&&"function"===typeof dc.StylingSideBar?dc.StylingSideBar:dc.StylingSideBar=function(sa){sa&&sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Wc(oc,$a,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(sa){sa.nodes.forEach(function(Ca){return sa.treeData.root==
Ca?sa.uncollapse(Ca):sa.collapse(Ca)})})}},{key:"onWorldResize",value:function(sa){sa=void 0===sa?!0:sa;if(this.respondsToVisibleWindow){var Ca=$world.visibleBounds(),bb=navigator.standalone&&Ub.touchInputDevice?25:0,rb=this.getSubmorphNamed("horizontal resizer");this.height=Ca.height-bb;this.top=bb+Ca.top();rb.height=this.height;rb.left=0;rb.top=0;sa&&(this.visible?this.topRight=Ca.topRight():this.topLeft=Ca.topRight())}}},{key:"toggle",value:function(sa){var Ca=this,bb,rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qb){switch(qb.nextAddress){case 1:bb=
$world.visibleBounds();rb=navigator.standalone&&Ub.touchInputDevice?25:0;Ca.height=bb.height-rb;Ca.top=rb+bb.top();if(sa)return $world.addMorph(Ca,$world.get("lively top bar")),Ca.left=bb.width,Ca.visible=!0,qb.yield(Ca.whenRendered(),5);Ca.detachFromWorld($world);return qb.yield(Ca.animate({opacity:0,left:bb.width,duration:300}),4);case 4:Ca.visible=!1;Ca.remove();qb.jumpTo(0);break;case 5:return Ca.onWorldResize(!1),qb.yield(Ca.animate({opacity:1,easing:Ub.easings.outCirc,right:bb.width,duration:300}),
6);case 6:Ca.attachToWorld($world),qb.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var sa=this.withAllSubmorphsSelect(function(qb){return qb.anchors&&qb.anchors.filter(function(Sa){return!Sa.id}).length}),Ca={},bb=$jscomp.makeIterator(sa),rb=bb.next();!rb.done;Ca={$jscomp$loop$prop$m$2284:Ca.$jscomp$loop$prop$m$2284},rb=bb.next())Ca.$jscomp$loop$prop$m$2284=rb.value,Ca.$jscomp$loop$prop$m$2284.anchors.forEach(function(qb){return function(Sa){return!Sa.id&&qb.$jscomp$loop$prop$m$2284.removeAnchor(Sa)}}(Ca));
return sa.length}},{key:"attachToWorld",value:function(sa){Ub.connect(sa,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(sa){var Ca=this;sa.attributeConnections.forEach(function(bb){bb.targetObj===Ca&&bb.disconnect()})}},{key:"focusMorph",value:function(sa){sa.isMorph&&sa.ownerChain().includes(this)||((sa.isLabel||sa.isText||sa.isButton)&&this.richTextControl.focusOn(sa,!1),Object.values(this.controls).forEach(function(Ca){return Ca&&Ca.focusOn(sa)}))}},
{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(sa){return sa&&sa.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"StylingSideBar",version:"0.1.1-58"}}},{start:2470,end:5340})}(Ub.Morph);vb=Ub.StylingSideBar;Ub.default=vb;var kc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");kc.Morph=ra;kc.obj=hd;kc.string=Id;kc.connect=Kc;kc.noUpdate=nd;kc.once=Xc;vb=function($a){var dc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),oc=dc.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof dc.ShapeFormatStyler?dc.ShapeFormatStyler:dc.ShapeFormatStyler=function(sa){sa&&
sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Wc(oc,$a,[{key:Symbol.for("lively-instance-initialize"),value:function(sa){Wc._get(Object.getPrototypeOf(oc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,sa);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var sa=this.ui,Ca={},bb=$jscomp.makeIterator(Object.entries(this.uiSpec)),rb=bb.next();!rb.done;Ca={$jscomp$loop$prop$control$2286:Ca.$jscomp$loop$prop$control$2286,
$jscomp$loop$prop$prop$2287:Ca.$jscomp$loop$prop$prop$2287},rb=bb.next()){var qb=$jscomp.makeIterator(rb.value);rb=qb.next().value;qb=$jscomp.makeIterator(qb.next().value);qb.next();var Sa=qb.next().value;Ca.$jscomp$loop$prop$prop$2287=qb.next().value;Ca.$jscomp$loop$prop$control$2286=sa[rb];kc.connect(Ca.$jscomp$loop$prop$control$2286,Sa,this,"updateTarget",{updater:function(Ta){return function(sb,Zb){Ta.$jscomp$loop$prop$control$2286._updating=!0;sb(Ta.$jscomp$loop$prop$prop$2287,Zb);Ta.$jscomp$loop$prop$control$2286._updating=
!1}}(Ca),varMapping:{prop:Ca.$jscomp$loop$prop$prop$2287,control:Ca.$jscomp$loop$prop$control$2286}})}}},{key:"update",value:function(){var sa=this,Ca=this.target,bb=Ca.clipMode,rb=Ca.fill,qb=Ca.dropShadow,Sa=Ca.opacity,Ta=Ca.height,sb=Ca.width;Ca=this.ui;var Zb=Ca.clipModeSelector,rc=Ca.fillPicker,Xb=Ca.opacityField,wc=Ca.shadowPicker,I=Ca.heightField,T=Ca.widthField;kc.noUpdate(function(){sa.updateControl(wc,"shadowValue",qb);sa.updateControl(Zb,"selection",bb);sa.updateControl(rc,"colorValue",
rb);sa.updateControl(Xb,"number",Sa);sa.updateControl(I,"number",Ta);sa.updateControl(T,"number",sb)})}},{key:"updateTarget",value:function(sa,Ca){this.target[sa]=Ca;this.update()}},{key:"updateControl",value:function(sa,Ca,bb){sa._updating||kc.obj.equals(sa[Ca],bb)||(sa[Ca]=bb)}},{key:"updateMultiValue",value:function(sa,Ca,bb){var rb=this.ui,qb=rb[this.join(sa)],Sa=qb.get("multi value indicator"),Ta=kc.obj.values(Ca).some(function(sb){return!kc.obj.isFunction(sb)&&!kc.obj.equals(sb,Ca.valueOf())});
Sa.left=0;qb.visible=qb.isLayoutable=!Ta;if(Ta&&Sa.visible!=Ta)kc.once(Sa,"onMouseDown",qb,bb,{converter:function(){return Ca.valueOf()},varMapping:{value:Ca}});Sa.visible=Sa.isLayoutable=Ta;Sa.left=Ta?200:0;this.updateControl(qb,bb,Ca.valueOf());qb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Sa=qb.next();!Sa.done;Sa=qb.next())Sa=Sa.value,Ta=rb[this.join(sa,Sa)],this.updateControl(Ta,bb,Ca[Sa])}},{key:"lower",value:function(sa){return sa.charAt(0).toLowerCase()+sa.slice(1)}},{key:"join",
value:function(sa,Ca){return this.lower(kc.string.camelCaseString(sa+(Ca?" "+Ca:"")))}},{key:"unwrap",value:function(sa,Ca,bb){var rb={};rb=(rb[this.lower(kc.string.camelCaseString(sa))]=[sa,Ca,bb],rb);for(var qb=$jscomp.makeIterator(["top","left","bottom","right"]),Sa=qb.next();!Sa.done;Sa=qb.next()){Sa=Sa.value;var Ta=sa+" "+Sa;rb[this.lower(kc.string.camelCaseString(Ta))]=[Ta,Ca,this.join(bb,Sa)]}return rb}},{key:"focusOn",value:function(sa){var Ca=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==
rb.nextAddress)return!sa||Ca.isAncestorOf(sa)||Ca.target===sa||kc.obj.isArray(sa)||(Ca.target=sa),bb=Ca.visible,Ca.visible=!0,rb.yield(Ca.whenRendered(),2);if(3!=rb.nextAddress)return Ca.update(),rb.yield(Ca.whenRendered(),3);Ca.getSubmorphsByStyleClassName("NumberWidget").map(function(qb){return qb.relayout()});Ca.visible=bb;rb.jumpToEnd()})}},{key:"onHoverIn",value:function(sa){this.watchForTarget=!1}},{key:"onHoverOut",value:function(sa){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"]})}},ui:{readOnly:!0,get:function(){var sa=this,Ca=
this.uiSpec;return this._ui||(this._ui=kc.obj.extract(Ca,kc.obj.keys(Ca),function(bb,rb){bb=$jscomp.makeIterator(rb).next().value;return sa.getSubmorphNamed(bb)}))}}}}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-144"}}},{start:176,end:4600})}(kc.Morph);vb=kc.ShapeFormatStyler;kc.default=
vb;var xc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");xc.Morph=ra;xc.ShadowPopover=Hb;xc.connect=Kc;xc.signal=Na;vb=function($a){var dc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),oc=dc.hasOwnProperty("ShadowWidget")&&"function"===typeof dc.ShadowWidget?dc.ShadowWidget:dc.ShadowWidget=function(sa){sa&&sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Wc(oc,$a,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,
duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(sa){this.openPopover()}},{key:"update",value:function(sa){var Ca=this.submorphs[0];Ca&&(Ca.dropShadow=sa)}},{key:"openPopover",value:function(){var sa=this,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Ca=new xc.ShadowPopover({hasFixedPosition:!!sa.ownerChain().find(function(rb){return rb.hasFixedPosition}),
shadowValue:sa.shadowValue}),bb.yield(Ca.fadeIntoWorld(sa.globalBounds().center()),2);xc.connect(Ca,"shadowValue",sa,"shadowValue");xc.connect(sa,"shadowValue",sa,"update");xc.signal(sa,"openWidget",Ca);bb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(sa){this.setProperty("shadowValue",sa);this.update(sa)}}}}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(xc.Morph);vb=xc.ShadowWidget;xc.default=vb;var Dc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");Dc.Morph=ra;Dc.obj=hd;Dc.string=Id;Dc.connect=Kc;Dc.noUpdate=nd;Dc.once=Xc;vb=function($a){var dc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),oc=dc.hasOwnProperty("BorderFormatStyler")&&"function"===typeof dc.BorderFormatStyler?
dc.BorderFormatStyler:dc.BorderFormatStyler=function(sa){sa&&sa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Wc(oc,$a,[{key:"setupUI",value:function(){var sa=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(Ca){var bb=Dc.string.camelCaseString(Ca.name);bb=bb[0].toLowerCase()+bb.slice(1);sa.ui[bb]=Ca})}},{key:"cleanupAnchors",value:function(){var sa=this.withAllSubmorphsSelect(function(rb){return rb.anchors&&
rb.anchors.filter(function(qb){return!qb.id})}),Ca={};sa=$jscomp.makeIterator(sa);for(var bb=sa.next();!bb.done;Ca={$jscomp$loop$prop$m$2289:Ca.$jscomp$loop$prop$m$2289},bb=sa.next())Ca.$jscomp$loop$prop$m$2289=bb.value,Ca.$jscomp$loop$prop$m$2289.anchors.forEach(function(rb){return function(qb){return!qb.id&&rb.$jscomp$loop$prop$m$2289.removeAnchor(qb)}}(Ca))}},{key:Symbol.for("lively-instance-initialize"),value:function(sa){Wc._get(Object.getPrototypeOf(oc.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,sa);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var sa=this.ui,Ca={},bb=$jscomp.makeIterator(Object.entries(this.uiSpec)),rb=bb.next();!rb.done;Ca={$jscomp$loop$prop$control$2291:Ca.$jscomp$loop$prop$control$2291,$jscomp$loop$prop$prop$2292:Ca.$jscomp$loop$prop$prop$2292},rb=bb.next()){var qb=$jscomp.makeIterator(rb.value);rb=qb.next().value;qb=$jscomp.makeIterator(qb.next().value);qb.next();var Sa=qb.next().value;Ca.$jscomp$loop$prop$prop$2292=
qb.next().value;Ca.$jscomp$loop$prop$control$2291=sa[rb];Dc.connect(Ca.$jscomp$loop$prop$control$2291,Sa,this,"updateTarget",{updater:function(Ta){return function(sb,Zb){Ta.$jscomp$loop$prop$control$2291._updating=!0;sb(Ta.$jscomp$loop$prop$prop$2292,Zb);Ta.$jscomp$loop$prop$control$2291._updating=!1}}(Ca),varMapping:{prop:Ca.$jscomp$loop$prop$prop$2292,control:Ca.$jscomp$loop$prop$control$2291}})}}},{key:"update",value:function(){var sa=this,Ca=this.target,bb=Ca.borderStyle,rb=Ca.borderColor,qb=
Ca.borderRadius,Sa=Ca.borderWidth;Dc.noUpdate(function(){sa.updateMultiValue("border style selector",bb,"selection");sa.updateMultiValue("border color picker",rb,"colorValue");sa.updateMultiValue("border radius field",qb,"number");sa.updateMultiValue("border width field",Sa,"number")})}},{key:"updateTarget",value:function(sa,Ca){this.target[sa]=Ca;this.update()}},{key:"updateControl",value:function(sa,Ca,bb){sa._updating||Dc.obj.equals(sa[Ca],bb)||(sa[Ca]=bb)}},{key:"updateMultiValue",value:function(sa,
Ca,bb){var rb=this.ui,qb=rb[this.join(sa)],Sa=qb.get("multi value indicator"),Ta=Dc.obj.values(Ca).some(function(sb){return!Dc.obj.isFunction(sb)&&!Dc.obj.equals(sb,Ca.valueOf())});qb.visible=qb.isLayoutable=!Ta;if(Ta&&Sa.visible!=Ta)Dc.once(Sa,"onMouseDown",qb,bb,{converter:function(){return Ca.valueOf()},varMapping:{value:Ca}});Sa.visible=Sa.isLayoutable=Ta;this.updateControl(qb,bb,Ca.valueOf());qb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Sa=qb.next();!Sa.done;Sa=qb.next())Sa=Sa.value,
Ta=rb[this.join(sa,Sa)],this.updateControl(Ta,bb,Ca[Sa])}},{key:"lower",value:function(sa){return sa.charAt(0).toLowerCase()+sa.slice(1)}},{key:"join",value:function(sa,Ca){return this.lower(Dc.string.camelCaseString(sa+(Ca?" "+Ca:"")))}},{key:"unwrap",value:function(sa,Ca,bb){var rb={};rb=(rb[this.lower(Dc.string.camelCaseString(sa))]=[sa,Ca,bb],rb);for(var qb=$jscomp.makeIterator(["top","left","bottom","right"]),Sa=qb.next();!Sa.done;Sa=qb.next()){Sa=Sa.value;var Ta=sa+" "+Sa;rb[this.lower(Dc.string.camelCaseString(Ta))]=
[Ta,Ca,this.join(bb,Sa)]}return rb}},{key:"attachToWorld",value:function(){Dc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(sa){var Ca=this,bb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rb){if(1==rb.nextAddress)return!sa||Ca.isAncestorOf(sa)||Ca.target===sa||Dc.obj.isArray(sa)||(Ca.target=sa),bb=Ca.visible,Ca.visible=!0,rb.yield(Ca.whenRendered(),2);if(3!=rb.nextAddress)return Ca.update(),rb.yield(Ca.whenRendered(),3);Ca.getSubmorphsByStyleClassName("NumberWidget").map(function(qb){return qb.relayout()});
Ca.visible=bb;rb.jumpToEnd()})}},{key:"onHoverIn",value:function(sa){this.watchForTarget=!1}},{key:"onHoverOut",value:function(sa){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),
{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(Dc.Morph);vb=Dc.BorderFormatStyler;Dc.default=
vb;var Gb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");Gb.Morph=ra;Gb.resource=nb;Gb.arr=Pb;Gb.obj=hd;Gb.string=Id;Gb.Path=Wb;Gb.connect=Kc;Gb.getMastersMenu=Pc;Gb.resolvedMasters=Bd;vb=function($a){var dc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),oc=dc.hasOwnProperty("MasterComponentControl")&&"function"===typeof dc.MasterComponentControl?dc.MasterComponentControl:dc.MasterComponentControl=function(sa){sa&&sa[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Wc(oc,$a,[{key:"focusOn",value:function(sa){this.target=sa;this.update()}},{key:"onMouseUp",value:function(sa){var Ca=this,bb,rb,qb,Sa,Ta,sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zb){if(1==Zb.nextAddress){"auto master selection"==sa.targetMorph.name&&(bb="auto");"hover master selection"==sa.targetMorph.name&&(bb="hover");"click master selection"==sa.targetMorph.name&&(bb="click");Ca.refreshButtons();
if(!Ca.target)return Zb.return();rb=$jscomp.makeIterator(["auto","hover","click"]);for(qb=rb.next();!qb.done;qb=rb.next())Sa=qb.value,Ca.target.master&&Ca.target.master[Sa]&&!Ca.get(Sa+" master checkbox").checked&&Ca.adjustMasterComponent(Sa,null);if(!bb)return Zb.jumpTo(0);Ta=Ca;sb=Ta.openMenu;return Zb.yield(Ca.getMastersMenu(bb),3)}sb.call(Ta,Zb.yieldResult,sa);Zb.jumpToEnd()})}},{key:"getMastersMenu",value:function(sa){var Ca=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){return 1==
bb.nextAddress?bb.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(Gb.resolvedMasters)),[Ca.world().name]).map(function(rb){var qb,Sa,Ta;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sb){return 1==sb.nextAddress?(qb=rb,Sa=Ca,Ta=Sa.componentsToMenu,sb.yield(Gb.resource("styleguide://"+rb+"/").dirList(),2)):sb.return([qb,Ta.call(Sa,sb.yieldResult,sa)])})})),2):bb.return(bb.yieldResult)})}},{key:"componentsToMenu",value:function(sa,Ca,bb,rb){var qb=this;bb=void 0===bb?
null:bb;rb=void 0===rb?1:rb;bb||(bb=sa.map(function(Ta){return{name:Gb.arr.last(Ta.name.split("/")),path:Ta.name.split("/"),value:Ta}}));if(0==bb.length||100<rb)return[];var Sa=this;return Gb.arr.flatten(Object.entries(Gb.arr.groupBy(bb,function(Ta){return Ta.path[rb-1]})).map(function(Ta){var sb=$jscomp.makeIterator(Ta);Ta=sb.next().value;sb=sb.next().value;var Zb=$jscomp.makeIterator(Gb.arr.partition(sb,function(rc){return rc.path.length<=rb}));sb=Zb.next().value;Zb=Zb.next().value;Ta=[Ta,qb.componentsToMenu(null,
Ca,Zb,rb+1)];return[].concat($jscomp.arrayFromIterable(sb.map(function(rc){return[rc.name,function(){Sa.adjustMasterComponent(Ca,rc.value)}]})),$jscomp.arrayFromIterable(Ta[1].length?[Ta]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(sa){var Ca=this,bb,rb,qb,Sa,Ta,sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zb){if(1==Zb.nextAddress)return bb=Ca.world().metadata.commit.name,rb=Gb.resource("styleguide://"+bb+"/"),Zb.yield(rb.dirList(),2);if(3!=Zb.nextAddress)return qb=
Zb.yieldResult,Zb.yield(Gb.resource("styleguide://System/").dirList(),3);Sa=Zb.yieldResult;Ta=Ca.componentsToMenu(qb,sa);sb=Ca.componentsToMenu(Sa,sa);return Zb.return([].concat($jscomp.arrayFromIterable(0<Ta.length?[].concat($jscomp.arrayFromIterable(Ta),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(sb)))})}},{key:"adjustMasterComponent",value:function(sa,Ca){if(this.target.master)this.target.master[sa]=Ca;else if(Ca){var bb={};this.target.master=(bb[sa]=Ca,bb)}sa=this.target.master;Ca=sa.hover;
bb=sa.click;sa.auto||Ca||bb||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(rb){return delete rb._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(sa,Ca,bb,rb){var qb=this;bb=void 0===bb?null:bb;rb=void 0===rb?1:rb;bb||(bb=sa.map(function(Ta){return{name:Gb.arr.last(Ta.name.split("/")),path:Ta.name.split("/"),value:Ta}}));if(0==bb.length||100<rb)return[];var Sa=this;return Gb.arr.flatten(Object.entries(Gb.arr.groupBy(bb,
function(Ta){return Ta.path[rb-1]})).map(function(Ta){var sb=$jscomp.makeIterator(Ta);Ta=sb.next().value;sb=sb.next().value;var Zb=$jscomp.makeIterator(Gb.arr.partition(sb,function(rc){return rc.path.length<=rb}));sb=Zb.next().value;Zb=Zb.next().value;Ta=[Ta,qb.componentsToMenu(null,Ca,Zb,rb+1)];return[].concat($jscomp.arrayFromIterable(sb.map(function(rc){return[rc.name,function(){Sa.adjustMasterComponent(Ca,rc.value)}]})),$jscomp.arrayFromIterable(Ta[1].length?[Ta]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var sa=
$jscomp.makeIterator(["auto","hover","click"]),Ca=sa.next();!Ca.done;Ca=sa.next()){Ca=Ca.value;var bb=this.getSubmorphNamed(Ca+" master selection"),rb=this.getSubmorphNamed(Ca+" master checkbox");Gb.Path(["master",Ca]).get(this.target)?rb.checked=!0:rb.checked=!1;bb.label=Gb.string.truncateLeft(Gb.Path(["master",Ca,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var sa=$jscomp.makeIterator(["auto","hover","click"]),Ca=sa.next();!Ca.done;Ca=
sa.next()){Ca=Ca.value;var bb=this.getSubmorphNamed(Ca+" master selection"),rb=this.getSubmorphNamed(Ca+" master checkbox");bb=bb.deactivated=!rb.checked;this.getSubmorphNamed(Ca+" master selection").opacity=bb?.5:1}sa=this.getSubmorphNamed("overridden props list");sa.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!sa.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(sa){return sa.master}).find(Boolean)}},
{key:"clearSelectedProperty",value:function(){var sa=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[sa]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var sa=this.getMasterForTarget();return sa&&sa._overriddenProps?(sa=sa._overriddenProps.get(this.target))?Object.keys(sa):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],dc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",version:"0.1.1-108"}}},{start:315,end:6096})}(Gb.Morph);vb=Gb.MasterComponentControl;Gb.default=vb}}});
