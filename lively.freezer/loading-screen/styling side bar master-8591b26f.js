System.register("./__root_module__-28353364.js ./index-2245b428.js ./color-picker-93cc3061.js ./index-d97c8020.js ./index-0def8bbc.js ./index-1b8f3abf.js".split(" "),function(){var Ia,mb,vb,Vb,Eb,Jc,Bc,Uc,tc,oc,sc,Tc,Fd,Rd,ee,Dc,rd,Ab,qc,Xc,zc,ed,wd,xb,hc,Cc,ic,Qc,jb,fb,Ob,Cb,ob,bc;return{setters:[function(Ma){Ia=Ma.f;mb=Ma.s;vb=Ma.Y;Vb=Ma.aw;Eb=Ma.a;Jc=Ma.K;Bc=Ma.g;Uc=Ma.af;tc=Ma.aa;oc=Ma.m;sc=Ma.M;Tc=Ma.I;Fd=Ma.b;Rd=Ma.R;ee=Ma.C;Dc=Ma.c;rd=Ma._;Ab=Ma.o;qc=Ma.bH;Xc=Ma.bE;zc=Ma.a4;ed=Ma.i;wd=
Ma.t;xb=Ma.e;hc=Ma.bB;Cc=Ma.d;ic=Ma.bO;Qc=Ma.r;jb=Ma.P;fb=Ma.bP;Ob=Ma.bQ},function(Ma){Cb=Ma.I},function(Ma){ob=Ma.a;bc=Ma.S},function(){},function(){},function(){}],execute:function(){var Ma=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");Ma.fun=Ia;Ma.string=mb;Ma.obj=vb;Ma.properties=Vb;Ma.arr=Eb;Ma.Text=Jc;Ma.config=Bc;Ma.HorizontalLayout=Uc;Ma.VerticalLayout=tc;Ma.morph=oc;Ma.Morph=sc;Ma.Icon=Tc;Ma.pt=Fd;Ma.Rectangle=Rd;Ma.Color=ee;Ma.connect=Dc;Ma.disconnect=rd;Ma.once=Ab;Ma.noUpdate=
qc;Ma.ColorPicker=ob;Ma.DropDownList=Xc;Ma.loadObjectFromPartsbinFolder=zc;Ma.cachedControls=new WeakMap;var Db=function(Kb){var za=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),bb=za.hasOwnProperty("RichTextControl")&&"function"===typeof za.RichTextControl?za.RichTextControl:za.RichTextControl=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(bb,Kb,[{key:"toggleButton",value:function(P,X){P.master=
X?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var P=this.ui.fontSelection;P.items=Ma.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable(Ma.config.text.basicFontItems)));this.target&&(P.selection=this.target.fontFamily||P.items[0].value,Ma.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",value:function(P){P=
void 0===P?!!this.world():P;var X=this.target,ya=X.world()||$world,Ga=this.globalBounds();X=(X.selection.isEmpty()?X.globalBounds():X.getGlobalTransform().transformRectToRect(X.selectionBounds().translatedBy(X.scroll.negated()))).bottomCenter().subPt(Ga.topCenter());ya=ya.visibleBounds().translateForInclusion(Ga.translatedBy(X)).topLeft().subPt(Ga.topLeft());ya=this.position.addPt(ya);P?this.animate({duration:300,position:ya}):this.position=ya}},{key:"removeFocus",value:function(){var P=this;this.target&&
this.target.attributeConnections&&this.target.attributeConnections.forEach(function(X){return X.targetObj===P&&X.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(P,X){X=void 0===X?!0:X;var ya=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return ya.target&&Ma.disconnect(ya.target,"selectionChange",ya,"update"),ya.target=P,ya.reset(),ya.update(),Ga.yield(ya.whenRendered(),2);ya.ui.fontSizeField.relayout();
X&&ya.alignAtTarget();Ga.jumpToEnd()})}},{key:"setupConnections",value:function(){Ma.connect(this.ui.paddingField,"number",this,"setPadding");Ma.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");Ma.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");Ma.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");Ma.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var P=this,X=this.target,ya=this.updateSpec,Ga=X.selection;
Ga=!X.readOnly&&Ga?Ga.isEmpty()?X.textAttributeAt(Ga.start):X.getStyleInRange(Ga):{};var wa=this.managedProps,ja=Ma.obj.select(X,wa);X=$jscomp.makeIterator(Object.entries(Ma.obj.select(Ga||{},wa)));for(Ga=X.next();!Ga.done;Ga=X.next())wa=$jscomp.makeIterator(Ga.value),Ga=wa.next().value,wa=wa.next().value,"undefined"!==typeof wa&&(ja[Ga]=wa);Ma.noUpdate(function(){for(var lb=$jscomp.makeIterator(Object.entries(P.ui)),Ja=lb.next();!Ja.done;Ja=lb.next()){var Xb=$jscomp.makeIterator(Ja.value);Ja=Xb.next().value;
Xb=Xb.next().value;if(ya[Ja])ya[Ja](ja,Xb)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(P,X){var ya=this.target,Ga=ya.selection;ya.isLabel||Ga&&Ga.isEmpty()?ya[P]="function"===typeof X?X(ya[P]):X:(ya.undoManager.group(),ya.changeStyleProperty(P,function(wa){return"function"===typeof X?X(wa):X}),ya.undoManager.group())}},{key:"changeFont",value:function(P){var X=this,ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return X._last=
P,(ya="custom..."===P)?Ga.yield($world.prompt("Enter font family name",{requester:X.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Ga.jumpTo(2);if(2!=Ga.nextAddress&&(P=Ga.yieldResult,!P))return Ga.return();X.changeAttributeInSelectionOrMorph("fontFamily",P);Ga.jumpToEnd()})}},{key:"setPadding",value:function(P){this.target.padding=Ma.Rectangle.inset(P)}},{key:"setPaddingTop",value:function(P){var X=this.target.padding;this.target.padding=Ma.Rectangle.inset(X.left(),P,
X.right(),X.bottom())}},{key:"setPaddingLeft",value:function(P){var X=this.target.padding;this.target.padding=Ma.Rectangle.inset(P,X.top(),X.right(),X.bottom())}},{key:"setPaddingRight",value:function(P){var X=this.target.padding;this.target.padding=Ma.Rectangle.inset(X.left(),X.top(),P,X.bottom())}},{key:"setPaddingBottom",value:function(P){var X=this.target.padding;this.target.padding=Ma.Rectangle.inset(X.left(),X.top(),X.right(),P)}},{key:"setLineWrapping",value:function(P){this.target.lineWrapping=
P}},{key:"changeFontWeight",value:function(P){this.changeAttributeInSelectionOrMorph("fontWeight",P)}},{key:"changeTextAlign",value:function(P){this.changeAttributeInSelectionOrMorph("textAlign",P)}},{key:"changeFontColor",value:function(P){this.changeAttributeInSelectionOrMorph("fontColor",P)}},{key:"changeFontSize",value:function(P){this.changeAttributeInSelectionOrMorph("fontSize",P)}},{key:"changeFixedWidth",value:function(P){this.target.fixedWidth=P}},{key:"changeFixedHeight",value:function(P){this.target.fixedHeight=
P}},{key:"changeLink",value:function(){var P=this,X,ya,Ga,wa,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(lb){if(1==lb.nextAddress)return X=P.target,ya=X.selection,Ga=X.getStyleInRange(ya),wa=Ga.link,lb.yield(P.world().prompt("Set link",{input:wa||"https://"}),2);ja=lb.yieldResult;X.undoManager.group();X.setStyleInRange({link:ja||void 0},ya);X.undoManager.group();P.autoRemove&&P.remove();lb.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",
function(P){return"underline"===P?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(P){return"italic"===P?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(P){return"bold"===P||"700"===P?"normal":"bold"})}},{key:"copyStyle",value:function(){var P=this,X=this.target,ya=this.ui.applyStyleButton;X=X.selection.isEmpty()?X.defaultTextStyle:X.getStyleInRange(X.selection);
var Ga=JSON.stringify(X,null,2);this.constructor.copiedStyle=X;ya.tooltip="paste style\n"+Ga;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Ga},{type:"application/morphic-text-style",styleString:Ga}]).then(function(){return P.setStatusMessage("Copied style\n"+Ga)}).catch(function(wa){return P.showError(wa)})}},{key:"pasteStyle",value:function(){var P=this,X=this.target,ya=this.constructor.copiedStyle;X.selection.isEmpty()?Object.assign(X,ya):X.selections.forEach(function(Ga){return X.addTextAttribute(P.constructor.copiedStyle,
Ga)});this.update()}},{key:"clearStyle",value:function(){var P=this.target;P.selections.forEach(function(X){return P.resetStyleInRange(X)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var P=this.defaultSpec,X=this.uiSpec;P=this.addMorph({name:"config panel",layout:new Ma.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(P).map(function(ya){var Ga=
X.rows.some(function(wa){return wa.some(function(ja){return ja===ya})});return{type:"labeledcheckbox",label:ya,name:ya,checked:Ga}})),[{layout:new Ma.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});P.center=this.innerBounds().center();Ma.connect(P.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");Ma.connect(P.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",
value:function(){var P=this.getSubmorphNamed("config panel");P&&(P.remove(),P.submorphs.filter(function(X){return"LabeledCheckBox"===X.constructor.name}))}},{key:"configureCanceled",value:function(){var P=this.getSubmorphNamed("config panel");P&&P.remove()}},{key:"close",value:function(){var P=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(X){return X.targetObj===P&&X.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,
"updateTarget")}},{key:"updateTarget",value:function(){var P=this.world();P&&(P=P.focusedMorph)&&(P.isLabel||P.isText)&&!this.isAncestorOf(P)&&this.target!==P&&this.focusOn(P,!1)}},{key:"onMouseUp",value:function(P){var X=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ya){if(1==ya.nextAddress)return ya.yield(X.whenRendered(),2);X.update();ya.jumpToEnd()})}},{key:"attachToWorld",value:function(){Ma.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var P=
this;return Object.assign({fontSelection:function(X,ya){var Ga=X.fontFamily;(X=Ga&&ya.items.find(function(wa){return wa.value.toLowerCase()===Ga.toLowerCase()}))?ya.selection=X.value:Ga&&(ya.items=ya.items.concat({isListItem:!0,label:[Ga,{fontFamily:Ga}],value:Ga}),ya.selection=Ma.arr.last(ya.items))},fontWeightSelection:function(X,ya){ya.selection="normal"==X.fontWeight?"Medium":X.fontWeight?Ma.string.capitalize(X.fontWeight):"Medium"},boldButton:function(X,ya){P.toggleButton(ya,"bold"===X.fontWeight)},
italicButton:function(X,ya){P.toggleButton(ya,"italic"===X.fontStyle)},underlineButton:function(X,ya){P.toggleButton(ya,"underline"===X.textDecoration)},linkButton:function(X,ya){P.toggleButton(ya,!!X.link)},colorPicker:function(X,ya){ya.colorValue=X.fontColor},fontSizeField:function(X,ya){ya.number=X.fontSize},fixedWidthControl:function(X,ya){X.isText?ya.enable():ya.disable();ya.checked=X.fixedWidth},fixedHeightControl:function(X,ya){X.isText?ya.enable():ya.disable();ya.checked=X.fixedHeight},lineWrappingControl:function(X,
ya){var Ga=$jscomp.makeIterator(ya.submorphs);ya=Ga.next().value;Ga=Ga.next().value;ya.checked=!!X.lineWrapping;X.isText?ya.enable():ya.disable();Ga.deactivated=!X.lineWrapping;Ga.deactivated?Ga.opacity=.5:(Ga.opacity=1,Ga.selection=X.lineWrapping)},paddingControl:function(X,ya){var Ga=X.padding,wa=Ga.left();X=Ga.top();var ja=Ga.right();Ga=Ga.bottom();var lb=!Ma.arr.every([wa,X,ja,Ga],function(Ja){return Ja==wa});ya.get("multi value indicator").visible=lb;Ma.connect(ya.get("multi value indicator"),
"onMouseDown",ya.get("padding field"),"number",{converter:"() => left",varMapping:{left:wa}});ya.get("padding field").number=wa;ya.get("padding field").visible=!lb;try{ya.get("padding field top").number=X,ya.get("padding field left").number=wa,ya.get("padding field right").number=ja,ya.get("padding field bottom").number=Ga}catch(Ja){}}},["left","center","right","block"].reduce(function(X,ya){X[ya+"Align"]=function(Ga,wa){wa.deactivated=!Ga.isText;P.toggleButton(wa,Ga.textAlign==ya)};return X},{}))}},
ui:{get:function(){var P=this,X={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",
fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return Ma.obj.extract(X,Ma.obj.keys(X),function(ya,Ga){return P.getSubmorphNamed(Ga)})}}}}},{key:"openDebouncedFor",value:function(P){var X=P.selection;if(X.isEmpty()){var ya=Ma.cachedControls.get(P);
ya&&(ya.update(),ya.alignAtTarget(),ya.world()||P.world().addMorph(ya))}else Ma.fun.debounceNamed(P.id+"openRichTextControl",600,function(){var Ga=Ma.cachedControls.get(P);X.isEmpty()?Ga&&Ga.removeFocus():(Ga&&Ga.world()||(Ga=new Ma.RichTextControl,Ma.cachedControls.set(P,Ga)),P.world().addMorph(Ga),Ga.focusOn(P,!0),Ga.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(P){var X=Ma.cachedControls.get(P);X?X.update():(X=new Ma.RichTextControl,Ma.cachedControls.set(P,X),X.focusOn(P,!0),
X.alwaysTargetFocusedMorph());X.alignAtTarget();X.world()||P.world().addMorph(X);return X}}],za,{pathInPackage:function(){return"text/ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17713})}(Ma.Morph);Ma.RichTextControl=Db;Ma.RichTextControl=Db;Ma.RichTextControl=Db;var gb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");
gb.Morph=sc;gb.touchInputDevice=wd;gb.morph=oc;gb.Icon=Tc;gb.easings=xb;gb.pt=Fd;gb.Color=ee;gb.fun=Ia;gb.connect=Dc;gb.TreeData=hc;Db=function(Kb){var za=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),bb=za.hasOwnProperty("SettingsTree")&&"function"===typeof za.SettingsTree?za.SettingsTree:za.SettingsTree=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(bb,Kb,[{key:"display",value:function(P){return P.panel?
[P.panel,{}]:P.name}},{key:"collapse",value:function(P,X){P.isCollapsed=X}},{key:"isCollapsed",value:function(P){return P.isCollapsed}},{key:"isLeaf",value:function(P){return!P.children}},{key:"getChildren",value:function(P){var X=this;return P===this.root?P.children.filter(function(ya){return X.target&&ya.applicabilityCheck?eval(ya.applicabilityCheck)(X.target):!0}):P.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,
children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(gb.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:gb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(gb.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:gb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(gb.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:gb.morph({})}]},
{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(gb.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:gb.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},gb.morph({height:20}),{}],children:[{panel:gb.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},gb.morph({height:20}),{}],children:[{panel:gb.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},gb.morph({height:20}),
{}],children:[{panel:gb.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},gb.morph({height:20}),{}],children:[{panel:gb.morph({})}]}]})}}],za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-67"}}},{start:284,end:2663})}(gb.TreeData);gb.SettingsTree=Db;gb.SettingsTree=Db;gb.SettingsTree=Db;Db=function(Kb){var za=
lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),bb=za.hasOwnProperty("StylingSideBar")&&"function"===typeof za.StylingSideBar?za.StylingSideBar:za.StylingSideBar=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(bb,Kb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(P){P.nodes.forEach(function(X){return P.treeData.root==
X?P.uncollapse(X):P.collapse(X)})})}},{key:"onWorldResize",value:function(P){P=void 0===P?!0:P;if(this.respondsToVisibleWindow){var X=$world.visibleBounds(),ya=navigator.standalone&&gb.touchInputDevice?25:0,Ga=this.getSubmorphNamed("horizontal resizer");this.height=X.height-ya;this.top=ya+X.top();Ga.height=this.height;Ga.left=0;Ga.top=0;P&&(this.visible?this.topRight=X.topRight():this.topLeft=X.topRight())}}},{key:"toggle",value:function(P){var X=this,ya,Ga;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){switch(wa.nextAddress){case 1:ya=
$world.visibleBounds().withTopLeft(gb.pt(0,0));Ga=navigator.standalone&&gb.touchInputDevice?25:0;X.height=ya.height-Ga;X.top=Ga+ya.top();if(P)return $world.addMorph(X,$world.get("lively top bar")),X.topLeft=ya.topRight(),X.visible=!0,wa.yield(X.whenRendered(),5);X.detachFromWorld($world);return wa.yield(X.animate({opacity:0,topLeft:ya.topRight(),duration:300}),4);case 4:X.visible=!1;X.remove();wa.jumpTo(0);break;case 5:return X.onWorldResize(!1),wa.yield(X.animate({opacity:1,easing:gb.easings.outCirc,
topRight:ya.topRight(),duration:300}),6);case 6:X.attachToWorld($world),wa.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var P=this.withAllSubmorphsSelect(function(wa){return wa.anchors&&wa.anchors.filter(function(ja){return!ja.id}).length}),X={},ya=$jscomp.makeIterator(P),Ga=ya.next();!Ga.done;X={$jscomp$loop$prop$m$2757:X.$jscomp$loop$prop$m$2757},Ga=ya.next())X.$jscomp$loop$prop$m$2757=Ga.value,X.$jscomp$loop$prop$m$2757.anchors.forEach(function(wa){return function(ja){return!ja.id&&
wa.$jscomp$loop$prop$m$2757.removeAnchor(ja)}}(X));return P.length}},{key:"attachToWorld",value:function(P){gb.connect(P,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(P){var X=this;P.attributeConnections.forEach(function(ya){ya.targetObj===X&&ya.disconnect()})}},{key:"focusMorph",value:function(P){if(!P.isMorph||!P.ownerChain().includes(this)){(P.isLabel||P.isText||P.isButton)&&this.richTextControl.focusOn(P,!1);var X=this.getSubmorphNamed("style settings tree");
X.treeData.target=P;X.update(!0);Object.values(this.controls).forEach(function(ya){return ya&&ya.focusOn(P)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(P){return P&&P.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-67"}}},{start:2682,end:5749})}(gb.Morph);Db=gb.StylingSideBar;gb.default=Db;var zb=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");zb.Morph=sc;zb.obj=vb;zb.string=mb;zb.connect=Dc;zb.noUpdate=qc;zb.once=Ab;Db=function(Kb){var za=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),bb=za.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof za.ShapeFormatStyler?
za.ShapeFormatStyler:za.ShapeFormatStyler=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(bb,Kb,[{key:Symbol.for("lively-instance-initialize"),value:function(P){ed._get(Object.getPrototypeOf(bb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,P);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var P=this.ui,X={},ya=$jscomp.makeIterator(Object.entries(this.uiSpec)),
Ga=ya.next();!Ga.done;X={$jscomp$loop$prop$control$2759:X.$jscomp$loop$prop$control$2759,$jscomp$loop$prop$prop$2760:X.$jscomp$loop$prop$prop$2760},Ga=ya.next()){var wa=$jscomp.makeIterator(Ga.value);Ga=wa.next().value;wa=$jscomp.makeIterator(wa.next().value);wa.next();var ja=wa.next().value;X.$jscomp$loop$prop$prop$2760=wa.next().value;X.$jscomp$loop$prop$control$2759=P[Ga];zb.connect(X.$jscomp$loop$prop$control$2759,ja,this,"updateTarget",{updater:function(lb){return function(Ja,Xb){lb.$jscomp$loop$prop$control$2759._updating=
!0;Ja(lb.$jscomp$loop$prop$prop$2760,Xb);lb.$jscomp$loop$prop$control$2759._updating=!1}}(X),varMapping:{prop:X.$jscomp$loop$prop$prop$2760,control:X.$jscomp$loop$prop$control$2759}})}}},{key:"update",value:function(){var P=this,X=this.target,ya=X.top,Ga=X.left,wa=X.isImage,ja=X.isLabel,lb=X.imageUrl,Ja=X.textString,Xb=X.clipMode,Kc=X.fill,Hb=X.dropShadow,Oc=X.opacity,qb=X.height,xd=X.width;X=this.ui;var he=X.clipModeSelector,xc=X.fillPicker,rb=X.opacityField,Ld=X.shadowPicker,sb=X.heightField,hb=
X.widthField,Ba=X.posXField,J=X.posYField,ta=X.imageUrlInput,Ta=X.labelContentInput;zb.noUpdate(function(){P.updateControl(Ld,"shadowValue",Hb);P.updateControl(he,"selection",Xb);P.updateControl(xc,"colorValue",Kc);P.updateControl(rb,"number",Oc);P.updateControl(sb,"number",qb);P.updateControl(hb,"number",xd);P.updateControl(Ba,"number",Ga);P.updateControl(J,"number",ya);xc.context=P.target;wa&&P.updateControl(ta,"input",lb);ta.owner.isLayoutable=ta.owner.visible=!!wa;ja&&P.updateControl(Ta,"input",
Ja);Ta.owner.isLayoutable=Ta.owner.visible=!!ja;var tb=P.getSubmorphNamed("special controls");(tb.visible=!!ja||!!wa)?P.height=tb.bottom:P.height=tb.top})}},{key:"updateTarget",value:function(P,X){this.target[P]=X;this.update()}},{key:"updateControl",value:function(P,X,ya){P._updating||zb.obj.equals(P[X],ya)||(P[X]=ya)}},{key:"updateMultiValue",value:function(P,X,ya){var Ga=this.ui,wa=Ga[this.join(P)],ja=wa.get("multi value indicator"),lb=zb.obj.values(X).some(function(Ja){return!zb.obj.isFunction(Ja)&&
!zb.obj.equals(Ja,X.valueOf())});ja.left=0;wa.visible=wa.isLayoutable=!lb;if(lb&&ja.visible!=lb)zb.once(ja,"onMouseDown",wa,ya,{converter:function(){return X.valueOf()},varMapping:{value:X}});ja.visible=ja.isLayoutable=lb;ja.left=lb?200:0;this.updateControl(wa,ya,X.valueOf());wa=$jscomp.makeIterator(["top","left","bottom","right"]);for(ja=wa.next();!ja.done;ja=wa.next())ja=ja.value,lb=Ga[this.join(P,ja)],this.updateControl(lb,ya,X[ja])}},{key:"lower",value:function(P){return P.charAt(0).toLowerCase()+
P.slice(1)}},{key:"join",value:function(P,X){return this.lower(zb.string.camelCaseString(P+(X?" "+X:"")))}},{key:"unwrap",value:function(P,X,ya){var Ga={};Ga=(Ga[this.lower(zb.string.camelCaseString(P))]=[P,X,ya],Ga);for(var wa=$jscomp.makeIterator(["top","left","bottom","right"]),ja=wa.next();!ja.done;ja=wa.next()){ja=ja.value;var lb=P+" "+ja;Ga[this.lower(zb.string.camelCaseString(lb))]=[lb,X,this.join(ya,ja)]}return Ga}},{key:"focusOn",value:function(P){var X=this,ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==
Ga.nextAddress)return!P||X.isAncestorOf(P)||X.target===P||zb.obj.isArray(P)||(X.target=P),ya=X.visible,X.visible=!0,Ga.yield(X.whenRendered(),2);if(3!=Ga.nextAddress)return X.update(),Ga.yield(X.whenRendered(),3);X.getSubmorphsByStyleClassName("NumberWidget").map(function(wa){return wa.relayout()});X.visible=ya;Ga.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(P){this.watchForTarget=!1}},{key:"onHoverOut",value:function(P){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var P=this,X=this.uiSpec;return this._ui||(this._ui=zb.obj.extract(X,zb.obj.keys(X),function(ya,Ga){ya=$jscomp.makeIterator(Ga).next().value;return P.getSubmorphNamed(ya)}))}}}}}],za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(zb.Morph);Db=zb.ShapeFormatStyler;zb.default=Db;var ec=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");ec.Morph=sc;ec.ShadowPopover=bc;ec.connect=Dc;ec.signal=Cc;Db=function(Kb){var za=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),bb=za.hasOwnProperty("ShadowWidget")&&"function"===typeof za.ShadowWidget?za.ShadowWidget:
za.ShadowWidget=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(bb,Kb,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(P){this.openPopover()}},{key:"update",value:function(P){var X=this.submorphs[0];
X&&(X.dropShadow=P)}},{key:"openPopover",value:function(){var P=this,X;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ya){if(1==ya.nextAddress)return X=new ec.ShadowPopover({hasFixedPosition:!!P.ownerChain().find(function(Ga){return Ga.hasFixedPosition}),shadowValue:P.shadowValue}),ya.yield(X.fadeIntoWorld(P.globalBounds().center()),2);ec.connect(X,"shadowValue",P,"shadowValue");ec.connect(P,"shadowValue",P,"update");ec.signal(P,"openWidget",X);ya.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(P){this.setProperty("shadowValue",P);this.update(P)}}}}}],za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(ec.Morph);Db=ec.ShadowWidget;ec.default=Db;var rc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
rc.Morph=sc;rc.obj=vb;rc.string=mb;rc.connect=Dc;rc.noUpdate=qc;rc.once=Ab;Db=function(Kb){var za=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),bb=za.hasOwnProperty("BorderFormatStyler")&&"function"===typeof za.BorderFormatStyler?za.BorderFormatStyler:za.BorderFormatStyler=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(bb,Kb,[{key:"setupUI",value:function(){var P=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(X){var ya=
rc.string.camelCaseString(X.name);ya=ya[0].toLowerCase()+ya.slice(1);P.ui[ya]=X})}},{key:"cleanupAnchors",value:function(){var P=this.withAllSubmorphsSelect(function(Ga){return Ga.anchors&&Ga.anchors.filter(function(wa){return!wa.id})}),X={};P=$jscomp.makeIterator(P);for(var ya=P.next();!ya.done;X={$jscomp$loop$prop$m$2762:X.$jscomp$loop$prop$m$2762},ya=P.next())X.$jscomp$loop$prop$m$2762=ya.value,X.$jscomp$loop$prop$m$2762.anchors.forEach(function(Ga){return function(wa){return!wa.id&&Ga.$jscomp$loop$prop$m$2762.removeAnchor(wa)}}(X))}},
{key:Symbol.for("lively-instance-initialize"),value:function(P){ed._get(Object.getPrototypeOf(bb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,P);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var P=this.ui,X={},ya=$jscomp.makeIterator(Object.entries(this.uiSpec)),Ga=ya.next();!Ga.done;X={$jscomp$loop$prop$control$2764:X.$jscomp$loop$prop$control$2764,$jscomp$loop$prop$prop$2765:X.$jscomp$loop$prop$prop$2765},Ga=ya.next()){var wa=
$jscomp.makeIterator(Ga.value);Ga=wa.next().value;wa=$jscomp.makeIterator(wa.next().value);wa.next();var ja=wa.next().value;X.$jscomp$loop$prop$prop$2765=wa.next().value;X.$jscomp$loop$prop$control$2764=P[Ga];rc.connect(X.$jscomp$loop$prop$control$2764,ja,this,"updateTarget",{updater:function(lb){return function(Ja,Xb){lb.$jscomp$loop$prop$control$2764._updating=!0;Ja(lb.$jscomp$loop$prop$prop$2765,Xb);lb.$jscomp$loop$prop$control$2764._updating=!1}}(X),varMapping:{prop:X.$jscomp$loop$prop$prop$2765,
control:X.$jscomp$loop$prop$control$2764}})}}},{key:"update",value:function(){var P=this,X=this.target,ya=X.borderStyle,Ga=X.borderColor,wa=X.borderRadius,ja=X.borderWidth;rc.noUpdate(function(){P.updateMultiValue("border style selector",ya,"selection");P.updateMultiValue("border color picker",Ga,"colorValue");P.updateMultiValue("border radius field",wa,"number");P.updateMultiValue("border width field",ja,"number")})}},{key:"updateTarget",value:function(P,X){this.target[P]=X;this.update()}},{key:"updateControl",
value:function(P,X,ya){P._updating||rc.obj.equals(P[X],ya)||(P[X]=ya)}},{key:"updateMultiValue",value:function(P,X,ya){var Ga=this.ui,wa=Ga[this.join(P)],ja=wa.get("multi value indicator"),lb=rc.obj.values(X).some(function(Ja){return!rc.obj.isFunction(Ja)&&!rc.obj.equals(Ja,X.valueOf())});wa.visible=wa.isLayoutable=!lb;if(lb&&ja.visible!=lb)rc.once(ja,"onMouseDown",wa,ya,{converter:function(){return X.valueOf()},varMapping:{value:X}});ja.visible=ja.isLayoutable=lb;this.updateControl(wa,ya,X.valueOf());
wa=$jscomp.makeIterator(["top","left","bottom","right"]);for(ja=wa.next();!ja.done;ja=wa.next())ja=ja.value,lb=Ga[this.join(P,ja)],this.updateControl(lb,ya,X[ja])}},{key:"lower",value:function(P){return P.charAt(0).toLowerCase()+P.slice(1)}},{key:"join",value:function(P,X){return this.lower(rc.string.camelCaseString(P+(X?" "+X:"")))}},{key:"unwrap",value:function(P,X,ya){var Ga={};Ga=(Ga[this.lower(rc.string.camelCaseString(P))]=[P,X,ya],Ga);for(var wa=$jscomp.makeIterator(["top","left","bottom",
"right"]),ja=wa.next();!ja.done;ja=wa.next()){ja=ja.value;var lb=P+" "+ja;Ga[this.lower(rc.string.camelCaseString(lb))]=[lb,X,this.join(ya,ja)]}return Ga}},{key:"attachToWorld",value:function(){rc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(P){var X=this,ya;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ga){if(1==Ga.nextAddress)return!P||X.isAncestorOf(P)||X.target===P||rc.obj.isArray(P)||(X.target=P),ya=X.visible,X.visible=!0,Ga.yield(X.whenRendered(),
2);if(3!=Ga.nextAddress)return X.update(),Ga.yield(X.whenRendered(),3);X.getSubmorphsByStyleClassName("NumberWidget").map(function(wa){return wa.relayout()});X.visible=ya;Ga.jumpToEnd()})}},{key:"onHoverIn",value:function(P){this.watchForTarget=!1}},{key:"onHoverOut",value:function(P){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||
(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(rc.Morph);Db=rc.BorderFormatStyler;rc.default=Db;var Qb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");Qb.Morph=sc;Qb.morph=oc;Qb.layouts=ic;Qb.string=mb;Qb.connect=Dc;Qb.noUpdate=qc;Qb.InteractiveMorphSelector=Cb;Qb.Color=ee;Qb.pt=Fd;Db=function(Kb){var za=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),bb=za.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof za.ShapeLayoutControl?
za.ShapeLayoutControl:za.ShapeLayoutControl=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(bb,Kb,[{key:"focusOn",value:function(P){this.target=P;this.update(!1)}},{key:"setupConnections",value:function(){var P=this.ui;Qb.connect(P.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");Qb.connect(P.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");Qb.connect(P.xAxisPolicyControl,
"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});Qb.connect(P.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var X={},ya=$jscomp.makeIterator(this.managedProps),Ga=ya.next();!Ga.done;X=
{$jscomp$loop$prop$prop$2767:X.$jscomp$loop$prop$prop$2767},Ga=ya.next()){var wa=$jscomp.makeIterator(Ga.value),ja=wa.next().value;Ga=wa.next().value;wa.next().value||(X.$jscomp$loop$prop$prop$2767=this.join(ja),wa=P[this.join(ja,"control")],Qb.connect(wa,Ga,this,"updateLayout",{updater:function(lb){return function(Ja,Xb){Ja(lb.$jscomp$loop$prop$prop$2767,Xb)}}(X),varMapping:{prop:X.$jscomp$loop$prop$prop$2767}}))}}},{key:"lower",value:function(P){return P.charAt(0).toLowerCase()+P.slice(1)}},{key:"join",
value:function(P,X){return this.lower(Qb.string.camelCaseString(P+(X?" "+X:"")))}},{key:"updateLayoutOfTarget",value:function(P){P=Qb.layouts[Qb.string.camelCaseString(P)];this.target.layout=P?new P({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(P,X){this.target.layout[P]=X}},{key:"update",value:function(P){var X=this;this.target&&Qb.noUpdate(function(){for(var ya=X.ui,Ga=X.target.layout||{name:function(){return"No"}},wa=$jscomp.makeIterator(X.managedProps),ja=wa.next();!ja.done;ja=
wa.next()){var lb=$jscomp.makeIterator(ja.value);ja=lb.next().value;var Ja=lb.next().value;lb.next();lb=ya[X.join(ja,"control")];var Xb=ya[X.join(ja,"label")];if(Ja)if("type"===ja)lb.selection=Ga.name()+" Layout";else{var Kc=Ga[X.join(ja)],Hb="undefined"!==typeof Kc;if(Hb){switch(ja){case "align":lb.items=Ga.possibleAlignValues;break;case "direction":lb.items=Ga.possibleDirectionValues;break;case "axis":lb.items=Ga.possibleAxisValues}lb[Ja]=Kc}Xb.isLayoutable=Xb.visible=Hb}}X.showGridLayoutControl("Grid"===
Ga.name());X.showProportionalControl("Proportional"===Ga.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(P){var X={};this.target.layout.changeSettingsFor(P.submorph,(X[P.axis]=P.policy,X),!0)}},{key:"onSubmorphSettingsDragStart",value:function(P){var X=this;P.stop();var ya=this.target.layout,Ga=ya.settingsFor(this.selectedSubmorph),wa=[],ja;for(ja in Ga)wa=[].concat($jscomp.arrayFromIterable(wa),[ja+": ",{fontWeight:"bold"},Ga[ja]+" ",{}]);var lb=Qb.morph({type:"label",
fontColor:Qb.Color.white,value:wa,fill:Qb.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});lb.wantsToBeDroppedOn=function(Ja){return ya.layoutableSubmorphs.includes(Ja)};lb.onBeingDroppedOn=function(Ja,Xb){lb.remove();if(Ja=ya.layoutableSubmorphs.includes(Xb)?Xb:P.world.morphsContainingPoint(P.hand.position).find(function(Kc){return ya.layoutableSubmorphs.includes(Kc)}))X.updateSubmorphProportionalLayoutSettings({policy:Ga.x,axis:"x",submorph:Ja}),X.updateSubmorphProportionalLayoutSettings({policy:Ga.y,
axis:"y",submorph:Ja}),Ja.show(),$world.setStatusMessage("layout settings applied")};P.hand.grab(lb);lb.moveBy(Qb.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var P=this,X,ya,Ga,wa,ja,lb,Ja,Xb,Kc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Hb){switch(Hb.nextAddress){case 1:return X=P.target.layout.layoutableSubmorphs,P.manageFocus=!0,P.env.eventDispatcher.isKeyPressed("Shift")?(Ga=X.map(function(Oc){return{isListItem:!0,string:String(Oc),value:Oc}}),Hb.yield($world.listPrompt("Select morph",
Ga,{onSelection:function(Oc){return Oc.show()}}),5)):Hb.yield(Qb.InteractiveMorphSelector.selectMorph(P.world(),P,function(Oc){return X.includes(Oc)}),4);case 4:ya=Hb.yieldResult;Hb.jumpTo(3);break;case 5:wa=Hb.yieldResult,ja=$jscomp.makeIterator(wa.selected),ya=ja.next().value;case 3:P.manageFocus=!1;P.selectedSubmorph=ya;if(!ya)return Hb.return();lb=P.ui;Ja=lb.xAxisPolicyControl;Xb=lb.yAxisPolicyControl;Kc=P.target.layout.settingsFor(ya);Qb.noUpdate(function(){Ja.selection=Kc.x;Xb.selection=Kc.y});
Hb.jumpToEnd()}})}},{key:"showProportionalControl",value:function(P){var X=this.ui;[X.submorphSettingsControl,X.dragmeControl,X.xAxisPolicyControl,X.xAxisPolicyLabel,X.yAxisPolicyControl,X.yAxisPolicyLabel].forEach(function(ya){ya.isLayoutable=P;ya.visible=P})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(P){var X=this.ui.configureGridLayoutControl;X.visible=X.isLayoutable=P}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,
!0]]}},ui:{readOnly:!0,get:function(){for(var P={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},X=$jscomp.makeIterator(this.managedProps),ya=X.next();!ya.done;ya=X.next()){var Ga=$jscomp.makeIterator(ya.value).next().value;ya=Ga+" label";Ga+=" control";P[this.join(ya)]=this.getSubmorphNamed(ya);P[this.join(Ga)]=this.getSubmorphNamed(Ga)}return P}}}}}],za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(Qb.Morph);Db=Qb.ShapeLayoutControl;Qb.default=Db;var Lb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");Lb.Morph=sc;Lb.resource=Qc;Lb.arr=Eb;Lb.obj=vb;Lb.string=mb;Lb.Path=jb;Lb.connect=Dc;Lb.getMastersMenu=fb;Lb.resolvedMasters=Ob;Db=function(Kb){var za=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),
bb=za.hasOwnProperty("MasterComponentControl")&&"function"===typeof za.MasterComponentControl?za.MasterComponentControl:za.MasterComponentControl=function(P){P&&P[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ed(bb,Kb,[{key:"focusOn",value:function(P){this.target=P;this.update()}},{key:"onMouseUp",value:function(P){var X=this,ya,Ga,wa,ja,lb,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){if(1==Xb.nextAddress){"auto master selection"==
P.targetMorph.name&&(ya="auto");"hover master selection"==P.targetMorph.name&&(ya="hover");"click master selection"==P.targetMorph.name&&(ya="click");X.refreshButtons();if(!X.target)return Xb.return();Ga=$jscomp.makeIterator(["auto","hover","click"]);for(wa=Ga.next();!wa.done;wa=Ga.next())ja=wa.value,X.target.master&&X.target.master[ja]&&!X.get(ja+" master checkbox").checked&&X.adjustMasterComponent(ja,null);if(!ya)return Xb.jumpTo(0);lb=X;Ja=lb.openMenu;return Xb.yield(X.getMastersMenu(ya),3)}Ja.call(lb,
Xb.yieldResult,P);Xb.jumpToEnd()})}},{key:"getMastersMenu",value:function(P){var X=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ya){return 1==ya.nextAddress?ya.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(Lb.resolvedMasters)),[X.world().name]).map(function(Ga){var wa,ja,lb,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){return 1==Xb.nextAddress?(ja=(wa=Ga==X.world().name)?"This World":Ga,lb=X,Ja=lb.componentsToMenu,Xb.yield(Lb.resource("styleguide://"+
Ga+"/").dirList(),2)):Xb.return([ja,Ja.call(lb,Xb.yieldResult,P)])})})),2):ya.return(ya.yieldResult)})}},{key:"componentsToMenu",value:function(P,X,ya,Ga){var wa=this;ya=void 0===ya?null:ya;Ga=void 0===Ga?1:Ga;ya||(ya=P.map(function(lb){return{name:Lb.arr.last(lb.name.split("/")),path:lb.name.split("/"),value:lb}}));if(0==ya.length||100<Ga)return[];var ja=this;return Lb.arr.flatten(Object.entries(Lb.arr.groupBy(ya,function(lb){return lb.path[Ga-1]})).map(function(lb){var Ja=$jscomp.makeIterator(lb);
lb=Ja.next().value;Ja=Ja.next().value;var Xb=$jscomp.makeIterator(Lb.arr.partition(Ja,function(Kc){return Kc.path.length<=Ga}));Ja=Xb.next().value;Xb=Xb.next().value;lb=[lb,wa.componentsToMenu(null,X,Xb,Ga+1)];return[].concat($jscomp.arrayFromIterable(Ja.map(function(Kc){return[Kc.name,function(){ja.adjustMasterComponent(X,Kc.value)}]})),$jscomp.arrayFromIterable(lb[1].length?[lb]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(P){var X=this,ya,Ga,wa,ja,lb,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xb){if(1==
Xb.nextAddress)return ya=X.world().metadata.commit.name,Ga=Lb.resource("styleguide://"+ya+"/"),Xb.yield(Ga.dirList(),2);if(3!=Xb.nextAddress)return wa=Xb.yieldResult,Xb.yield(Lb.resource("styleguide://System/").dirList(),3);ja=Xb.yieldResult;lb=X.componentsToMenu(wa,P);Ja=X.componentsToMenu(ja,P);return Xb.return([].concat($jscomp.arrayFromIterable(0<lb.length?[].concat($jscomp.arrayFromIterable(lb),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(Ja)))})}},{key:"adjustMasterComponent",value:function(P,
X){if(this.target.master)this.target.master[P]=X;else if(X){var ya={};this.target.master=(ya[P]=X,ya)}P=this.target.master;X=P.hover;ya=P.click;P.auto||X||ya||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(Ga){return delete Ga._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(P,X,ya,Ga){var wa=this;ya=void 0===ya?null:ya;Ga=void 0===Ga?1:Ga;ya||(ya=P.map(function(lb){return{name:Lb.arr.last(lb.name.split("/")),path:lb.name.split("/"),
value:lb}}));if(0==ya.length||100<Ga)return[];var ja=this;return Lb.arr.flatten(Object.entries(Lb.arr.groupBy(ya,function(lb){return lb.path[Ga-1]})).map(function(lb){var Ja=$jscomp.makeIterator(lb);lb=Ja.next().value;Ja=Ja.next().value;var Xb=$jscomp.makeIterator(Lb.arr.partition(Ja,function(Kc){return Kc.path.length<=Ga}));Ja=Xb.next().value;Xb=Xb.next().value;lb=[lb,wa.componentsToMenu(null,X,Xb,Ga+1)];return[].concat($jscomp.arrayFromIterable(Ja.map(function(Kc){return[Kc.name,function(){ja.adjustMasterComponent(X,
Kc.value)}]})),$jscomp.arrayFromIterable(lb[1].length?[lb]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var P=$jscomp.makeIterator(["auto","hover","click"]),X=P.next();!X.done;X=P.next()){X=X.value;var ya=this.getSubmorphNamed(X+" master selection"),Ga=this.getSubmorphNamed(X+" master checkbox");Lb.Path(["master",X]).get(this.target)?Ga.checked=!0:Ga.checked=!1;ya.label=Lb.string.truncateLeft(Lb.Path(["master",X,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},
{key:"refreshButtons",value:function(){for(var P=$jscomp.makeIterator(["auto","hover","click"]),X=P.next();!X.done;X=P.next()){X=X.value;var ya=this.getSubmorphNamed(X+" master selection"),Ga=this.getSubmorphNamed(X+" master checkbox");ya=ya.deactivated=!Ga.checked;this.getSubmorphNamed(X+" master selection").opacity=ya?.5:1}P=this.getSubmorphNamed("overridden props list");P.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!P.selection}},{key:"getMasterForTarget",
value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(P){return P.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var P=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[P]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var P=this.getMasterForTarget();return P&&P._overriddenProps?(P=P._overriddenProps.get(this.target))?
Object.keys(P):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",version:"0.1.1-110"}}},{start:315,end:6250})}(Lb.Morph);Db=Lb.MasterComponentControl;Lb.default=Db}}});