System.register(["./__root_module__-b4667baa.js"],function(ta){var lb,yb,Qb,Kb,yd,Cc,rd,Fc,Dc,Rc,$c,Hd,gd,Uc,Pa,mb,Nb,Ub,Ic,wd,Eb,Sb,sb,ec,rc,yc,Db,ab,Zb,kc,ua,Ga,cb,rb,pb,Ta,Ua,ob,Wb,lc,Lb,qc;return{setters:[function(I){lb=I.at;yb=I.a3;Qb=I.C;Kb=I.an;yd=I.ai;Cc=I.ax;rd=I.aU;Fc=I.aB;Dc=I.ay;Rc=I.a9;$c=I.al;Hd=I.ao;gd=I.h;Uc=I.a2;Pa=I.a1;mb=I.ah;Nb=I.a7;Ub=I.P;Ic=I.$;wd=I.aV;Eb=I.ap;Sb=I.a6;sb=I.aq;ec=I.ar;rc=I.aW;yc=I.aX;Db=I.au;ab=I.as;Zb=I.s;kc=I.av;ua=I.aY;Ga=I.ak;cb=I.aZ;rb=I.a_;pb=I.a$;Ta=
I.aa;Ua=I.b0;ob=I.am;Wb=I.b1;lc=I.b2;Lb=I.b3;qc=I.aQ}],execute:function(){function I(ja){(ja=Pb.cachedGuideLines.get(ja))&&ja.forEach(function(oa){return oa.remove()})}function V(ja,oa,tb,H,la){oa=void 0===oa?!0:oa;tb=void 0===tb?!0:tb;H=void 0===H?10:H;la=void 0===la?100:la;if(oa||tb){var Fa=ja.owner,kb=Fa.world();Fa=Fa.getGlobalTransform();var fc=ja.owner.submorphs.filter(function(Pc){return Pc!==ja&&!Pc.isEpiMorph&&Pc.visible&&Pc.reactsToPointer}),Bc=Pb.findAlignedMorphs(ja,fc,H,la,"left top right bottom hCenter vCenter".split(" "),
"left top right bottom hCenter vCenter".split(" "));la=[];var xd=0,pd=0,le=0,nd=0;Fa.e-=kb.scroll.x;Fa.f-=kb.scroll.y;if(Bc){Bc=$jscomp.makeIterator(Bc);for(var Rd=Bc.next();!Rd.done;Rd=Bc.next()){Rd=$jscomp.makeIterator(Rd.value);Rd.next();var be=Rd.next().value;Rd=be.vertical;be=$jscomp.makeIterator(be.horizontal);for(var Ce=be.next();!Ce.done;Ce=be.next()){Ce=Ce.value;var hf=Ce.edgeAVal,Le=Ce.refPointsA,pc=Ce.refPointsB,Ie=Ce.edgeBVal,rf=Math.ceil(H-Ce.delta),sf=Math.min(Le.top,pc.top);Le=Math.max(Le.bottom,
pc.bottom);Ce.maxDist>H&&(rf-=H/2);xd<rf&&(xd=rf,le=Ie-hf);la.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,start:Fa.transformPoint(Pb.pt(Ie,sf)),end:Fa.transformPoint(Pb.pt(Ie,Le)),fill:Pb.guideColor,guideType:"h",priority:rf})}Rd=$jscomp.makeIterator(Rd);for(be=Rd.next();!be.done;be=Rd.next())be=be.value,Ce=be.edgeAVal,sf=be.refPointsA,Le=be.refPointsB,hf=be.edgeBVal,Ie=Math.ceil(H-be.delta),rf=Math.min(sf.left,Le.left),sf=Math.max(sf.right,Le.right),be.maxDist>H&&(Ie-=
H/2),pd<Ie&&Math.abs(hf-Ce)<=H&&(pd=Ie,nd=hf-Ce),la.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,start:Fa.transformPoint(Pb.pt(rf,hf)),end:Fa.transformPoint(Pb.pt(sf,hf)),fill:Pb.guideColor,guideType:"v",priority:Ie})}}if(!xd||!pd){fc=[ja].concat($jscomp.arrayFromIterable(fc));Ce=Pb.computeClosestMorphs(fc);be=Ce[0];fc=be.l;Bc=be.r;Rd=be.t;be=be.b;var re;if(fc||Bc||Rd||be){var va=(fc||Bc||Rd||be).refPointsA;for(hf=1;hf<Ce.length&&(Le=Ce[hf],Ie=Le.l,rf=Le.r,sf=Le.t,Le=Le.b,
xd||(fc&&Ie&&fc.index!==Ie.index&&Math.abs(Ie.dist-fc.dist)<=H?re=Object.assign({neighbor:hf,direction:"left"},Ie):Bc&&rf&&Bc!==rf.index&&Math.abs(rf.dist-Bc.dist)<=H&&(re=Object.assign({neighbor:hf,direction:"right"},rf))),pd||(Rd&&sf&&Rd.index!==sf.index&&Math.abs(sf.dist-Rd.dist)<=H?re=Object.assign({neighbor:hf,direction:"top"},sf):be&&Le&&be.index!==Le.index&&Math.abs(Le.dist-be.dist)<=H&&(re=Object.assign({neighbor:hf,direction:"bottom"},Le))),!re);hf++);}if(re){var Ma=re;H=Ma.direction;sf=
Ma.dist;var jb=va.left;pc=va.top;var R=va.bottom,wa=va.right,Za=va.width,eb=va.height;Le=Ma.refPointsA;va=Le.left;Ce=Le.top;hf=Le.bottom;Ie=Le.right;rf=Le.width;Le=Le.height;var hc=Ma.refPointsB,ic=hc.left;Ma=hc.top;var Qc=hc.bottom;hc=hc.right;wa="left"===H?jb:"right"===H?wa:jb+Za/2;R="bottom"===H?R:"top"===H?pc:pc+eb/2;jb="left"===H?wa-sf:"right"===H?wa+sf:jb+Za/2;sf="bottom"===H?R+sf:"top"===H?R-sf:pc+eb/2;pc="left"===H?hc:"right"===H?ic:va+rf/2;Za="bottom"===H?Ma:"top"===H?Qc:Ce+Le/2;!tb||xd||
"right"!==H&&"left"!==H||(xd=10,le=(re.dist-(Bc||fc).dist)*("right"===H?-1:1),wa+=le,jb+=le);!tb||pd||"top"!==H&&"bottom"!==H||(pd=10,nd=((Rd||be).dist-re.dist)*("top"===H?-1:1),R+=nd,sf+=nd);la.push({type:"line",epiMorph:!0,hasFixedPosition:!0,start:Fa.transformPoint(Pb.pt("left"===H?va:"right"===H?Ie:va+rf/2,"bottom"===H?hf:"top"===H?Ce:Ce+Le/2)),end:Fa.transformPoint(Pb.pt(pc,Za)),fill:Pb.Color.orange,height:Pb.guideWidth,guideType:H,priority:10},{type:"line",epiMorph:!0,hasFixedPosition:!0,start:Fa.transformPoint(Pb.pt(wa,
R)),end:Fa.transformPoint(Pb.pt(jb,sf)),fill:Pb.Color.orange,height:Pb.guideWidth,guideType:H,priority:10})}}tb&&(le||nd)&&ja.moveBy(Pb.pt(le,nd));if(oa){la=la.filter(function(Pc){var Nc=Pc.guideType;Pc=Pc.priority;return"h"===Nc?Pc===xd:"v"===Nc?Pc===pd:!0});(oa=Pb.cachedGuideLines.get(ja))||Pb.cachedGuideLines.set(ja,oa=[]);for(tb=0;tb<la.length;tb++)re=void 0,oa[tb]?re=Object.assign(oa[tb],la[tb]):(re=Pb.morph(la[tb]),oa.push(re)),re.owner||kb.addMorph(re);oa.slice(tb).forEach(function(Pc){return Pc.remove()});
Pb.fun.debounceNamed(ja.id+"-drag-guides-cleanup",1300,function(){var Pc=Pb.cachedGuideLines.get(ja);Pc&&Pc.forEach(function(Nc){return Nc.remove()})})()}}}function ra(ja,oa,tb,H,la,Fa){tb=void 0===tb?!0:tb;H=void 0===H?!0:H;la=void 0===la?5:la;Fa=void 0===Fa?100:Fa;if(tb||H){var kb=ja.owner,fc=kb.world(),Bc=kb.getGlobalTransform(),xd=ja.owner.submorphs.filter(function(R){return R!==ja&&!R.isEpiMorph&&R.visible&&R.reactsToPointer});kb=(oa.includes("left")||oa.includes("right")?"x":"")+(oa.includes("top")||
oa.includes("bottom")?"y":"");var pd=Pb.findMorphsWithSimilarWidthOrHeight(ja,kb,xd,la,Fa),le=-Infinity,nd=-Infinity,Rd=0,be=0,Ce=0,hf=0,Le=0,pc=0;kb=[];Bc.e-=fc.scroll.x;Bc.f-=fc.scroll.y;if(pd){pd=$jscomp.makeIterator(pd);for(var Ie=pd.next();!Ie.done;Ie=pd.next()){Ie=$jscomp.makeIterator(Ie.value);Ie.next();var rf=Ie.next().value;Ie=rf.similarIn;var sf=rf.delta,re=rf.refPointsA,va=rf.refPointsB;rf=la-sf+(Fa-rf.minDist);"width"===Ie?le<rf&&(le=rf,oa.includes("left")&&(be=-sf),oa.includes("right")&&
(Rd=sf)):nd<rf&&(nd=rf,oa.includes("top")&&(Ce=-sf),oa.includes("bottom")&&(hf=sf));sf={type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,fill:Pb.guideColor,guideType:Ie,priority:rf,start:Bc.transformPoint("width"===Ie?Pb.pt(re.left,re.top+re.height/2):Pb.pt(re.left+re.width/2,re.top)),end:Bc.transformPoint("width"===Ie?Pb.pt(re.right,re.top+re.height/2):Pb.pt(re.left+re.width/2,re.bottom))};Ie=Object.assign({},sf,{start:Bc.transformPoint("width"===Ie?Pb.pt(va.left,va.top+va.height/
2):Pb.pt(va.left+va.width/2,va.top)),end:Bc.transformPoint("width"===Ie?Pb.pt(va.right,va.top+va.height/2):Pb.pt(va.left+va.width/2,va.bottom))});kb.push(sf,Ie)}}if(Fa=Pb.findAlignedMorphs(ja,xd,la,Fa,oa,void 0))for(Fa=$jscomp.makeIterator(Fa),xd=Fa.next();!xd.done;xd=Fa.next()){xd=$jscomp.makeIterator(xd.value);xd.next();pd=xd.next().value;xd=pd.vertical;pd=$jscomp.makeIterator(pd.horizontal);for(Ie=pd.next();!Ie.done;Ie=pd.next()){Ie=Ie.value;va=Ie.edgeAVal;var Ma=Ie.refPointsA,jb=Ie.refPointsB;
sf=Ie.edgeBVal;re=Math.ceil(la-Ie.delta);rf=Math.min(Ma.top,jb.top);Ma=Math.max(Ma.bottom,jb.bottom);Ie.maxDist>la&&(re-=la/2);Le<re&&(Le=re,oa.includes("left")&&(be=-(sf-va)),oa.includes("right")&&(Rd=+(sf-va)));kb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,start:Bc.transformPoint(Pb.pt(sf,rf)),end:Bc.transformPoint(Pb.pt(sf,Ma)),fill:Pb.guideColor,guideType:"h",priority:re})}xd=$jscomp.makeIterator(xd);for(pd=xd.next();!pd.done;pd=xd.next())pd=pd.value,Ie=pd.edgeAVal,
rf=pd.refPointsA,Ma=pd.refPointsB,va=pd.edgeBVal,sf=Math.ceil(la-pd.delta),re=Math.min(rf.left,Ma.left),rf=Math.max(rf.right,Ma.right),pd.maxDist>la&&(sf-=la/2),pc<sf&&Math.abs(va-Ie)<=la&&(pc=sf,oa.includes("top")&&(Ce=va-Ie),oa.includes("bottom")&&(hf=va-Ie)),kb.push({type:"line",epiMorph:!0,hasFixedPosition:!0,height:Pb.guideWidth,start:Bc.transformPoint(Pb.pt(re,va)),end:Bc.transformPoint(Pb.pt(rf,va)),fill:Pb.guideColor,guideType:"v",priority:sf})}H&&(be&&(ja.left+=be,ja.right-=be),Ce&&(ja.top+=
Ce,ja.bottom-=Ce),Rd&&(ja.width+=Rd),hf&&(ja.height+=hf));if(tb){kb=kb.filter(function(R){var wa=R.guideType;R=R.priority;return"width"===wa?R===le:"height"===wa?R===nd:"v"===wa?R===pc:"h"===wa?R===Le:!1});(oa=Pb.cachedGuideLines.get(ja))||Pb.cachedGuideLines.set(ja,oa=[]);for(tb=0;tb<kb.length;tb++)H=void 0,oa[tb]?H=Object.assign(oa[tb],kb[tb]):(H=Pb.morph(kb[tb]),oa.push(H)),H.owner||fc.addMorph(H);oa.slice(tb).forEach(function(R){return R.remove()});Pb.fun.debounceNamed(ja.id+"-drag-guides-cleanup",
1300,function(){var R=Pb.cachedGuideLines.get(ja);R&&R.forEach(function(wa){return wa.remove()})})()}}}function ya(ja,oa){oa=void 0===oa?!1:oa;var tb=Ha.MorphicEnv.default().world;if(null===ja||void 0===ja)ja=String(ja);if(ja.isMorph)return Ha.showRect(ja.world(),ja.globalBounds().translatedBy(ja.world().scroll.negated()),oa);if(ja.isPoint)return Ha.showRect(tb,new Ha.Rectangle(ja.x-5,ja.y-5,10,10));if(ja.isLine)return Ha.showLine(tb,ja);if(ja.isRectangle)return Ha.showRect(tb,ja);if("undefined"!==
typeof Ha.Element&&ja instanceof Ha.Element)return Ha.showRect(tb,Ha.Rectangle.fromElement(ja));if("number"===typeof ja||"symbol"===typeof ja||"boolean"===typeof ja||"undefined"!==typeof Ha.Node&&ja instanceof Ha.Node||ja instanceof RegExp)ja=String(ja);"object"===typeof ja&&(ja=Ha.obj.inspect(ja,{maxDepth:1}));return"string"===typeof ja&&1===arguments.length?tb.setStatusMessage(ja):tb.setStatusMessage(Ha.string.formatFromArray(Array.from(arguments)))}function Gb(ja,oa,tb){tb=void 0===tb?3E3:tb;var H,
la,Fa,kb,fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bc){if(1==Bc.nextAddress){if(!(ja&&ja.world()&&oa&&oa.world()))return Bc.return(null);H=ja.owner.worldPoint(ja.center);la=oa.owner.worldPoint(oa.center);Fa=H.lineTo(la).sampleN(2)[1];kb={tagName:"marker",markerHeight:5,markerWidth:5,orient:"auto",refX:1,refY:5,viewBox:"0 0 10 10",children:[{tagName:"circle",stroke:Ha.Color.red,fill:Ha.Color.red,cx:5,cy:5,r:4}]};fc=$world.addMorph(new Ha.Path({position:Fa,renderOnGPU:!0,vertices:[Ha.pt(0),
Ha.pt(0)],borderWidth:2,startMarker:kb,endMarker:kb,borderColor:Ha.Color.red}));return Bc.yield(fc.whenRendered(),2)}if(3!=Bc.nextAddress)return Bc.yield(fc.animate({opacity:1,customTween:function(xd){var pd=fc.center;fc.vertices=[Ha.pt(0).interpolate(xd,H.subPt(Fa)),Ha.pt(0).interpolate(xd,la.subPt(Fa))];fc.center=pd},duration:400}),3);tb&&setTimeout(function(){return fc.fadeOut()},tb);return Bc.return(fc)})}ta({a:V,d:Gb,r:I,s:ya});var Pb=lively.FreezerRuntime.recorderFor("lively.halos/drag-guides.js");
Pb.removeSnapToGuidesOf=I;Pb.showAndSnapToGuides=V;Pb.showAndSnapToResizeGuides=ra;Pb.computeRefPoints=function(ja){var oa=ja.x,tb=ja.y,H=ja.width;ja=ja.height;return{left:oa,top:tb,hCenter:oa+H/2,vCenter:tb+ja/2,right:oa+H,bottom:tb+ja,width:H,height:ja}};Pb.findEdgesInAlignment=function(ja,oa,tb,H,la,Fa,kb,fc,Bc,xd){tb=void 0===tb?15:tb;Fa=void 0===Fa?0:Fa;kb=void 0===kb?0:kb;fc=void 0===fc?0:fc;Bc=void 0===Bc?0:Bc;xd=void 0===xd?0:xd;for(var pd=[],le=[],nd=0;nd<Pb.edges.length;nd++){var Rd=$jscomp.makeIterator(Pb.edges[nd]),
be=Rd.next().value,Ce=Rd.next().value;Rd=Rd.next().value;var hf=ja[Ce],Le=oa[Rd],pc=Math.max(hf,Le)-Math.min(hf,Le);pc>tb||!(H&&!H.includes(Ce)||la&&!la.includes(Rd))&&("vertical"===be?pd:le).push({delta:pc,edgeA:Ce,edgeB:Rd,edgeAVal:hf,edgeBVal:Le,refPointsA:ja,refPointsB:oa,distLeft:Fa,distTop:kb,distRight:fc,distBottom:Bc,maxDist:xd})}return pd.length||le.length?{vertical:pd,horizontal:le}:null};Pb.findAlignedMorphs=function(ja,oa,tb,H,la,Fa){tb=void 0===tb?15:tb;H=void 0===H?Infinity:H;for(var kb,
fc=Pb.computeRefPoints(ja.bounds()),Bc=0;Bc<oa.length;Bc++){var xd=oa[Bc];if(xd!==ja){var pd=Pb.computeRefPoints(xd.bounds()),le=Math.max(0,fc.left-pd.right),nd=Math.max(0,pd.left-fc.right),Rd=Math.max(0,fc.top-pd.bottom),be=Math.max(0,pd.top-fc.bottom);Math.max(be,Rd,nd,le)>H||!(pd=Pb.findEdgesInAlignment(fc,pd,tb,la,Fa,le,Rd,nd,be,Math.max(be,Rd,nd,le)))||(kb||(kb=new Map),kb.set(xd,pd))}}ja=ja.owner;oa=Pb.computeRefPoints(ja.innerBounds());if(tb=Pb.findEdgesInAlignment(fc,oa,tb))kb||(kb=new Map),
kb.set(ja,tb);return kb};Pb.findMorphsWithSimilarWidthOrHeight=function(ja,oa,tb,H,la){H=void 0===H?15:H;la=void 0===la?Infinity:la;for(var Fa,kb=Pb.computeRefPoints(ja.bounds()),fc=0;fc<tb.length;fc++){var Bc=tb[fc];if(Bc!==ja){var xd=Pb.computeRefPoints(Bc.bounds()),pd=Math.max(0,kb.left-xd.right),le=Math.max(0,xd.left-kb.right),nd=Math.max(0,kb.top-xd.bottom),Rd=Math.max(0,xd.top-kb.bottom),be=Math.min(Rd,nd,le,pd),Ce=Math.max(Rd,nd,le,pd);if(!(Math.max(Rd,nd,le,pd)>la)){le=kb;pd=le.width;le=le.height;
Rd=xd;nd=Rd.width;Rd=Rd.height;var hf=nd-pd,Le=Rd-le;("x"===oa||"xy"===oa)&&Math.abs(hf)<=H&&(Fa||(Fa=new Map),Fa.set(Bc,{similarIn:"width",minDist:be,maxDist:Ce,refPointsA:kb,refPointsB:xd,valA:pd,valB:nd,delta:hf}));("y"===oa||"xy"===oa)&&Math.abs(Le)<=H&&(Fa||(Fa=new Map),Fa.set(Bc,{similarIn:"height",minDist:be,maxDist:Ce,refPointsA:kb,refPointsB:xd,valA:le,valB:Rd,delta:Le}))}}}return Fa};Pb.closest=function(ja,oa,tb,H,la,Fa,kb,fc){fc=void 0===fc?!0:fc;var Bc=H[ja],xd=la[ja],pd=Fa[ja];oa=kb[ja];
for(var le,nd,Rd,be,Ce=0;Ce<la.length;Ce++)ja===Ce||Bc<la[Ce]||le&&la[le.index]>=la[Ce]||fc&&kb[ja]<Fa[Ce]||Fa[ja]>kb[Ce]||(le={index:Ce,dist:Bc-la[Ce],refPointsA:tb[ja],refPointsB:tb[Ce]});for(Bc=0;Bc<H.length;Bc++)ja===Bc||xd>H[Bc]||nd&&H[nd.index]<=H[Bc]||fc&&kb[ja]<Fa[Bc]||Fa[ja]>kb[Bc]||(nd={index:Bc,dist:H[Bc]-xd,refPointsA:tb[ja],refPointsB:tb[Bc]});for(xd=0;xd<kb.length;xd++)ja===xd||pd<kb[xd]||Rd&&kb[Rd.index]>=kb[xd]||fc&&H[ja]>la[xd]||la[ja]<H[xd]||(Rd={index:xd,dist:pd-kb[xd],refPointsA:tb[ja],
refPointsB:tb[xd]});for(kb=0;kb<Fa.length;kb++)ja===kb||oa>Fa[kb]||be&&Fa[be.index]<=Fa[kb]||fc&&H[ja]>la[kb]||la[ja]<H[kb]||(be={index:kb,dist:Fa[kb]-oa,refPointsA:tb[ja],refPointsB:tb[kb]});return{l:le,r:nd,t:Rd,b:be}};Pb.computeClosestMorphs=function(ja){for(var oa=[],tb=[],H=[],la=[],Fa=[],kb=[],fc=0;fc<ja.length;fc++){var Bc=Pb.computeRefPoints(ja[fc].bounds());Fa.push(Bc);var xd=Bc.right,pd=Bc.top,le=Bc.bottom;oa.push(Bc.left);tb.push(xd);H.push(pd);la.push(le)}for(fc=0;fc<ja.length;fc++)kb.push(Pb.closest(fc,
ja,Fa,oa,tb,H,la));return kb};Pb.fun=lb;Pb.pt=yb;Pb.Color=Qb;Pb.morph=Kb;Pb.cachedGuideLines=new WeakMap;Pb.guideWidth=1;Pb.guideColor=Pb.Color.orange.lighter();Pb.removeSnapToGuidesOf=I;Pb.removeSnapToGuidesOf=I;Pb.showAndSnapToGuides=V;Pb.showAndSnapToGuides=V;Pb.showAndSnapToResizeGuides=ra;Pb.showAndSnapToResizeGuides=ra;Pb.edges=[["vertical","top","top"],["vertical","vCenter","top"],["vertical","bottom","top"],["vertical","top","vCenter"],["vertical","vCenter","vCenter"],["vertical","bottom",
"vCenter"],["vertical","top","bottom"],["vertical","vCenter","bottom"],["vertical","bottom","bottom"],["horizontal","left","left"],["horizontal","hCenter","left"],["horizontal","right","left"],["horizontal","left","hCenter"],["horizontal","hCenter","hCenter"],["horizontal","right","hCenter"],["horizontal","left","right"],["horizontal","hCenter","right"],["horizontal","right","right"]];var Ca=lively.FreezerRuntime.recorderFor("lively.halos/morph.js");Ca.Morph=yd;Ca.Label=Cc;Ca.StyleSheet=rd;Ca.HorizontalLayout=
Fc;Ca.Path=Dc;Ca.Text=Rc;Ca.GridLayout=$c;Ca.morph=Kb;Ca.Icon=Hd;Ca.createMorphSnapshot=gd;Ca.Color=Qb;Ca.pt=yb;Ca.rect=Uc;Ca.Rectangle=Pa;Ca.LinearGradient=mb;Ca.obj=Nb;Ca.PropertyPath=Ub;Ca.promise=Ic;Ca.properties=wd;Ca.num=Eb;Ca.arr=Sb;Ca.connect=sb;Ca.signal=ec;Ca.disconnect=rc;Ca.disconnectAll=yc;Ca.once=Db;Ca.showAndSnapToGuides=V;Ca.showAndSnapToResizeGuides=ra;Ca.removeSnapToGuidesOf=I;Ca.haloBlue=Ca.Color.rgb(23,160,251);Ca.componentAccent=Ca.Color.magenta;Ca.derivedAccent=Ca.Color.purple;
var Yb=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("Halo")&&"function"===typeof oa.Halo?oa.Halo:oa.Halo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"relayout",value:function(){this.alignWithTarget()}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-C",win:"Ctrl-C"},command:{command:"clipboard copy",passEvent:!0}}]}},{key:"commands",
get:function(){return[{name:"clipboard copy",doc:"copy selected morph(s) to clipboard",scrollCursorIntoView:!1,exec:function(H){H.copyHalo().copyToClipBoard()}}]}},{key:"removeIfDetached",value:function(){var H=this;setTimeout(function(){H.target.owner||H.remove()})}},{key:"initLayout",value:function(){var H=this.layout=new Ca.GridLayout({autoAssign:!1,fitToCell:!1,columns:[0,{fixed:36,paddingRight:10},2,{fixed:26},4,{fixed:26},6,{fixed:36,paddingLeft:10}],rows:[0,{fixed:36,paddingBottom:10},2,{fixed:26},
4,{fixed:26},6,{fixed:26},7,{fixed:36,paddingTop:10}],grid:[["menu",null,"grab",null,"drag",null,"close"],[null,null,null,null,null,null,null],["copy",null,null,null,null,null,"edit"],[null,null,null,null,null,null,null],["component",null,null,null,null,null,"inspect"],[null,null,null,null,null,null,null],["rotate",null,null,null,null,null,"resize"],[null,"name","name","name","name","name",null]]});H.col(1).row(7).group.align="center";H.col(1).row(7).group.resize=!1}},{key:"initButtons",value:function(){this.submorphs=
[].concat($jscomp.arrayFromIterable(this.ensureResizeHandles()),$jscomp.arrayFromIterable(this.resizeOnly?[]:[this.closeHalo(),this.dragHalo(),this.grabHalo(),this.menuHalo(),this.inspectHalo(),this.editHalo(),this.copyHalo(),this.componentHalo(),this.rotateHalo(),this.nameHalo(),this.originHalo()]))}},{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"isHalo",get:function(){return!0}},{key:"borderBox",get:function(){return this.getSubmorphNamed("border-box")||
this.addMorphBack(Ca.morph({name:"border-box",fill:Ca.Color.transparent,borderColor:this.target.isComponent?Ca.componentAccent:Ca.haloBlue,borderWidth:1}))}},{key:"pointerId",get:function(){return this.state?this.state.pointerId:null}},{key:"pointerId",set:function(H){this.state||(this.state={});this.state.pointerId=H}},{key:"prepareTarget",value:function(H){if(!Ca.obj.isArray(H))return H;if(1>=H.length)return H[0];H=H[0].world().addMorph(new Ca.MultiSelectionTarget({selectedMorphs:H}));H.alignWithSelection();
H.modifiesSelectedMorphs=!0;return H}},{key:"refocus",value:function(H){this.target=H;this.alignWithTarget()}},{key:"alignWithTarget",value:function(){if(!this.active&&this.target){var H=this.target.world()||$world,la=H.visibleBounds(),Fa=this.target.globalBounds(),kb=Fa.insetBy(-36).intersection(la);la=Fa.intersection(la);this.layout&&this.layout.disable();this.setBounds(kb.translatedBy(H.scroll.negated()));this.borderBox.setBounds($world.transformRectToMorph(this,la));this.state.activeButton?(this.buttonControls.forEach(function(fc){return fc.visible=
!1}),this.ensureResizeHandles().forEach(function(fc){return fc.visible=!1}),this.state.activeButton.visible=!0,this.updatePropertyDisplay(this.state.activeButton)):(this.changingName&&this.nameHalo().toggleActive([!1]),this.ensureResizeHandles().forEach(function(fc){return fc.visible=!0}),this.buttonControls.forEach(function(fc){fc.visible=!0}),this.propertyDisplay.disable());this.nameHalo().alignInHalo();this.ensureResizeHandles().forEach(function(fc){return fc.alignInHalo()});this.resizeOnly||this.originHalo().alignInHalo();
this.layout&&this.layout.enable();return this}}},{key:"detachFromTarget",value:function(){var H=this.target;H&&(Ca.disconnect(H,"onChange",this,"alignWithTarget"),Ca.disconnect(H,"onOwnerChanged",this,"removeIfDetached"),H instanceof Ca.MultiSelectionTarget?(H.modifiesSelectedMorphs=!1,H.remove()):"function"===typeof H.detachedHalo&&H.detachedHalo(this))}},{key:"remove",value:function(){this.detachFromTarget();ab._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this)}},{key:"morphsContainingPoint",
value:function(H){return H}},{key:"propertyDisplay",get:function(){return Ca.HaloPropertyDisplay.for(this)}},{key:"nameHalo",value:function(){return Ca.NameHaloItem.for(this)}},{key:"closeHalo",value:function(){return Ca.CloseHaloItem.for(this)}},{key:"grabHalo",value:function(){return Ca.GrabHaloItem.for(this)}},{key:"dragHalo",value:function(){return Ca.DragHaloItem.for(this)}},{key:"menuHalo",value:function(){return Ca.MenuHaloItem.for(this)}},{key:"inspectHalo",value:function(){return Ca.InspectHaloItem.for(this)}},
{key:"editHalo",value:function(){return Ca.EditHaloItem.for(this)}},{key:"rotateHalo",value:function(){return Ca.RotateHaloItem.for(this)}},{key:"copyHalo",value:function(){return Ca.CopyHaloItem.for(this)}},{key:"originHalo",value:function(){return Ca.OriginHaloItem.for(this)}},{key:"componentHalo",value:function(){return Ca.ComponentHaloItem.for(this)}},{key:"buttonControls",get:function(){return this.submorphs.filter(function(H){return H.isHaloItem&&!H.isResizeHandle})}},{key:"addMorphToSelection",
value:function(H){var la=this,Fa,kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){if(1==fc.nextAddress){Fa=la.world();kb=la.target.isMorphSelection?la.target.selectedMorphs:[la.target];if(kb.includes(H))return fc.return();la.remove();return fc.yield(Fa.showHaloForSelection([].concat($jscomp.arrayFromIterable(kb),[H]),la.state.pointerId),2)}return fc.return(fc.yieldResult)})}},{key:"removeMorphFromSelection",value:function(H){var la=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kb){if(1==
kb.nextAddress){Fa=la.world();la.remove();if(!la.target.isMorphSelection)return kb.jumpTo(0);Ca.arr.remove(la.target.selectedMorphs,H);return kb.yield(Fa.showHaloForSelection(la.target.selectedMorphs,la.state.pointerId),3)}return kb.return(kb.yieldResult)})}},{key:"isAlreadySelected",value:function(H){return this.target==H||this.target.isMorphSelection&&this.target.selectsMorph(H)}},{key:"updateBoundsFor",value:function(H,la,Fa,kb,fc){var Bc={topLeft:Ca.rect(-1,-1,1,1),topCenter:la?Ca.rect(1,-1,0,
1):Ca.rect(0,-1,0,1),topRight:Ca.rect(0,-1,1,1),rightCenter:la?Ca.rect(0,1,1,1):Ca.rect(0,0,1,0),bottomRight:Ca.rect(0,0,1,1),bottomCenter:la?Ca.rect(1,0,0,1):Ca.rect(0,0,0,1),bottomLeft:Ca.rect(-1,0,1,1),leftCenter:la?Ca.rect(-1,1,1,0):Ca.rect(-1,0,1,0)}[H];fc=Bc.x;var xd=Bc.y,pd=Bc.width;Bc=Bc.height;Fa=la?this.proportionalDelta(H,Fa,kb):Fa;H=Ca.rect(Fa.x*fc,Fa.y*xd,Fa.x*pd,Fa.y*Bc);this.active=!0;this.target.setBounds(kb.insetByRect(H));(this.target.isPolygon||this.target.isPath)&&this.target.moveBy(this.target.origin.negated());
this.active=!1;this.alignWithTarget()}},{key:"proportionalDelta",value:function(H,la,Fa){var kb=Fa.width,fc=Fa.height;Fa={topLeft:Ca.pt(-1,-1),topCenter:Ca.pt(0,-1),topRight:Ca.pt(1,-1),leftCenter:Ca.pt(-1,0),rightCenter:Ca.pt(1,0),bottomLeft:Ca.pt(-1,1),bottomCenter:Ca.pt(0,1),bottomRight:Ca.pt(1,1)};var Bc=kb/Math.max(kb,fc),xd=fc/Math.max(fc,kb);kb={topLeft:Ca.pt(-Bc,-xd),topCenter:Ca.pt(1/(2*fc/kb),-1),topRight:Ca.pt(Bc,-xd),leftCenter:Ca.pt(-1,fc/(2*kb)),rightCenter:Ca.pt(1,fc/(3*kb)),bottomLeft:Ca.pt(-Bc,
xd),bottomCenter:Ca.pt(1/(2*fc/kb),1),bottomRight:Ca.pt(Bc,xd)};Fa=Fa[H];return kb[H].scaleBy(Fa.dotProduct(la)/Fa.dotProduct(Fa))}},{key:"ensureResizeHandles",value:function(){return Ca.ResizeHandle.resizersFor(this)}},{key:"updatePropertyDisplay",value:function(H){H=H.valueForPropertyDisplay();"undefined"!==typeof H?this.propertyDisplay.displayProperty(H):this.propertyDisplay.disable()}},{key:"toggleDiagonal",value:function(H,la){if(!Ca.rect(0).sides.includes(la)){var Fa=this.getSubmorphNamed("diagonal");
if(H){H=this.target.globalBounds();var kb=H.width,fc=H.height;H=this.localize(Ca.pt(H.x,H.y)).extent(Ca.pt(kb,fc)).scaleRectTo(this.innerBounds());kb={topLeft:[Ca.pt(kb,fc),Ca.pt(0,0)],topRight:[Ca.pt(0,fc),Ca.pt(kb,0)],bottomRight:[Ca.pt(0,0),Ca.pt(kb,fc)],bottomLeft:[Ca.pt(kb,0),Ca.pt(0,fc)]};Fa?Fa.setBounds(H):(Fa=$jscomp.makeIterator(kb[la]),la=Fa.next().value,Fa=Fa.next().value,kb=new Ca.LinearGradient({stops:[{offset:0,color:Ca.Color.orange.withA(0)},{offset:.2,color:Ca.Color.orange},{offset:.8,
color:Ca.Color.orange},{offset:1,color:Ca.Color.orange.withA(0)}]}),Fa=this.addMorphBack(new Ca.Path({opacity:0,name:"diagonal",borderStyle:"dotted",borderWidth:5,bounds:H,borderColor:kb,vertices:[la,Fa]})),Fa.setBounds(H),Fa.animate({opacity:1,duration:500}))}else Fa&&Fa.fadeOut(500)}}},{key:"toggleRotationIndicator",value:function(H,la){var Fa=this.getSubmorphNamed("rotationIndicator");H&&la?(H=this.getSubmorphNamed("origin").center,Fa=Fa||this.addMorphBack(new Ca.Path({name:"rotationIndicator",
borderColor:Ca.haloBlue,borderWidth:1,vertices:[]})),Fa.setBounds(la.bounds().union(this.innerBounds())),Fa.vertices=[Fa.localizePointFrom(H,this),Fa.localizePointFrom(la.center,this)]):Fa&&Fa.remove()}},{key:"toggleMorphHighlighter",value:function(H,la,Fa){Fa=void 0===Fa?!1:Fa;if(la.onHaloGrabover)la.onHaloGrabover(H);else Fa=Ca.MorphHighlighter.for(this,la,Fa),H&&la&&la!=this.world()?Fa&&Fa.show(la):Fa&&Fa.deactivate()}},{key:"onMouseDown",value:function(H){var la=H.state.clickedOnMorph;if(!H.isCommandKey()&&
la==this.borderBox)return this.remove();if(H.isShiftDown()&&H.isCommandKey())H=this.target.isMorphSelection?this.target.morphBeneath(H.position):this.morphBeneath(H.position),this.isAlreadySelected(H)?this.removeMorphFromSelection(H):this.addMorphToSelection(H);else{if(la==this.borderBox&&H.isCommandKey()){var Fa=H.world.morphsContainingPoint(H.position).filter(function(kb){return kb.halosEnabled});(Fa=Fa.slice(Fa.indexOf(this.target)+1)[0]||Fa[0]||H.world)&&H.world.showHaloFor(Fa,H.domEvt.pointerId);
this.remove()}la==this&&H.isCommandKey()&&(Fa=this.morphBeneath(H.position),H.world.showHaloFor(Fa,H.domEvt.pointerId));la==this&&this.remove()}}},{key:"onKeyUp",value:function(H){this.changingName||this.buttonControls.map(function(la){return la.onKeyUp(H)})}},{key:"getMesh",value:function(H,la){var Fa=H.x;H=H.y;la=void 0===la?Ca.pt(0,0):la;var kb=this.world().visibleBounds(),fc=kb.height;kb=kb.width;var Bc={borderStyle:"dotted",borderWidth:2,borderColor:Ca.Color.orange};Bc=this.get("mesh")||this.addMorph(new Ca.Morph({name:"mesh",
styleClasses:["halo-mesh"],extent:Ca.pt(kb,fc),fill:null,submorphs:[new Ca.Path(Object.assign({name:"vertical"},Bc)),new Ca.Path(Object.assign({name:"horizontal"},Bc))]}));Bc.globalPosition=la;Bc.getSubmorphNamed("vertical").vertices=[Ca.pt(Fa,0).subPt(la),Ca.pt(Fa,fc).subPt(la)];Bc.getSubmorphNamed("horizontal").vertices=[Ca.pt(0,H).subPt(la),Ca.pt(kb,H).subPt(la)];return Bc}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Halo"}},{key:"properties",get:function(){return{fill:{defaultValue:Ca.Color.transparent},
resizeOnly:{defaultValue:!1},pointerId:{},hasFixedPosition:{defaultValue:!0},respondsToVisibleWindow:{defaultValue:!0},submorphs:{after:["target"],initialize:function(){this.initButtons();this.alignWithTarget()}},layout:{after:["submorphs"],initialize:function(){this.initLayout()}},hasTinyTarget:{derived:!0,get:function(){return 40>this.target.bounds().extent().dist(Ca.pt(0))}},target:{get:function(){return this.state?this.state.target:null},set:function(H){this.state||(this.state={});var la=!!this.state.target;
this.detachFromTarget();H=this.prepareTarget(H);this.state.target=H;la&&this.alignWithTarget();Ca.connect(H,"onChange",this,"alignWithTarget");Ca.connect(H,"onOwnerChanged",this,"removeIfDetached")}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:895,end:17042})}(Ca.Morph);Yb=Ca.Halo;
var jd=ta("H",Yb);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("HaloPropertyDisplay")&&"function"===typeof oa.HaloPropertyDisplay?oa.HaloPropertyDisplay:oa.HaloPropertyDisplay=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"isHaloItem",get:function(){return!1}},{key:"halo",get:function(){return this.owner}},{key:"displayedValue",value:function(){return this.textString}},
{key:"displayProperty",value:function(H){var la=this.halo.state.activeButton;H=String(H);this.visible=!0;this.textString=H;this.position=this.constructor.defaultPosition;this.bounds().insetBy(10).intersects(la.bounds())&&(this.position=Ca.pt(la.topRight.x+10,this.position.y))}},{key:"disable",value:function(){this.position=this.constructor.defaultPosition;this.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HaloPropertyDisplay"}},{key:"morphName",get:function(){return"propertyDisplay"}},
{key:"defaultPosition",get:function(){return Ca.pt(25,0)}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({name:this.morphName}))}},{key:"properties",get:function(){return{name:{defaultValue:this.name},fill:{defaultValue:Ca.Color.black.withA(.7)},borderRadius:{defaultValue:7},padding:{defaultValue:Ca.Rectangle.inset(5)},visible:{defaultValue:!1},readOnly:{defaultValue:!0},fontSize:{defaultValue:12},fontColor:{defaultValue:Ca.Color.white},position:{defaultValue:this.defaultPosition}}}}],
oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:17233,end:18580})})(Ca.Label);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("MultiSelectionTarget")&&"function"===typeof oa.MultiSelectionTarget?oa.MultiSelectionTarget:oa.MultiSelectionTarget=
function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"isHaloItem",get:function(){return!0}},{key:"isMorphSelection",get:function(){return!0}},{key:"selectsMorph",value:function(H){return this.selectedMorphs.includes(H)}},{key:"alignWithSelection",value:function(){var H=this.selectedMorphs.map(function(la){return la.globalBounds()}).reduce(function(la,Fa){return la.union(Fa)});this.setBounds(H)}},{key:"onGrab",
value:function(H){this.grabbingHand=H.hand;this.selectionGrabbed=!0;H.hand.grab(this.selectedMorphs);Ca.once(H.hand,"dropMorphsOn",this,"onGrabEnd");Ca.connect(H.hand,"position",this,"alignWithSelection")}},{key:"onGrabEnd",value:function(){this.selectionGrabbed=!1;Ca.disconnectAll(this.grabbingHand)}},{key:"updateExtent",value:function(H){var la=H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Fa){return Fa.resizeBy(la)})}},{key:"updatePosition",value:function(H){if(!this.selectionGrabbed){var la=
H.value.subPt(H.prevValue);this.selectedMorphs.forEach(function(Fa){return Fa.moveBy(la)})}}},{key:"updateRotation",value:function(H){var la=this,Fa=H.value-H.prevValue;this.selectedMorphs.forEach(function(kb){var fc=kb.origin;kb.adjustOrigin(kb.localize(la.worldPoint(Ca.pt(0,0))));kb.rotation+=Fa;kb.adjustOrigin(fc)})}},{key:"updateScale",value:function(H){var la=this,Fa=H.value-H.prevValue;this.selectedMorphs.forEach(function(kb){var fc=kb.origin;kb.adjustOrigin(kb.localize(la.worldPoint(Ca.pt(0,
0))));kb.scale+=Fa;kb.adjustOrigin(fc)})}},{key:"onChange",value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),"onChange",this).call(this,H);if(this.modifiesSelectedMorphs){switch(H.prop){case "extent":this.updateExtent(H);break;case "scale":this.updateScale(H);break;case "position":this.updatePosition(H);break;case "rotation":this.updateRotation(H)}return H}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelectionTarget"}},{key:"properties",get:function(){return{visible:{defaultValue:!1},
modifiesSelectedMorphs:{defaultValue:!1},selectedMorphs:{defaultValue:[]},halosEnabled:{defaultValue:!1}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:18648,end:20919})})(Ca.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("HaloItem")&&
"function"===typeof oa.HaloItem?oa.HaloItem:oa.HaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"isEpiMorph",get:function(){return!0}},{key:"isHaloItem",get:function(){return!0}},{key:"menuItems",value:function(){return[]}},{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"stop",value:function(){}},{key:"valueForPropertyDisplay",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"HaloItem"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:15},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:Ca.Color.gray.withA(.7)},grabbable:{defaultValue:!1},extent:{defaultValue:Ca.pt(24,24)},halo:{}}}},{key:"for",value:function(H){return H.getSubmorphNamed(this.morphName)||H.addMorph(new this({halo:H,name:this.morphName}))}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21085,end:21762})})(Ca.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("NameHolder")&&"function"===typeof oa.NameHolder?oa.NameHolder:oa.NameHolder=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"onHoverIn",
value:function(H){this.highlightOnHover&&this.nameHolder.active&&(this.halo.toggleMorphHighlighter(!0,this.target),this.nameHolder.fontColor=Ca.Color.orange)}},{key:"onHoverOut",value:function(H){this.highlightOnHover&&(this.halo.toggleMorphHighlighter(!1,this.target),this.nameHolder.fontColor=Ca.Color.darkgray)}},{key:"accept",value:function(){this.target.name!==this.nameHolder.textString&&this.updateName(this.nameHolder.textString)}},{key:"onKeyDown",value:function(H){"Enter"==H.keyCombo?(this.accept(),
H.stop()):ab._get(Object.getPrototypeOf(tb.prototype),"onKeyDown",this).call(this,H)}},{key:"onMouseUp",value:function(){Ca.signal(this,"active",[!0,this])}},{key:"onMouseDown",value:function(H){this.nameHolder.fontColor=Ca.Color.white;this.halo.toggleMorphHighlighter(!1,this.target)}},{key:"onKeyUp",value:function(H){H=this.nameHolder.textString;var la=this.target.owner;this.validName=!la||!la.getSubmorphNamed(H)||this.target.name==H;Ca.signal(this,"valid",[this.validName,H])}},{key:"update",value:function(){var H=
this;this.nameHolder.textString!==this.target.name&&(this.nameHolder.textString=this.target.name,this.whenRendered().then(function(){return H.nameHolder.fit()}))}},{key:"activate",value:function(){this.nameHolder.readOnly=!1;this.nameHolder.active=!0;this.nameHolder.animate({opacity:1})}},{key:"deactivate",value:function(){this.nameHolder.readOnly=!0;this.nameHolder.active=!1;this.nameHolder.animate({opacity:.3})}},{key:"updateName",value:function(H){if(!this.forceUniqueName||this.validName)this.target.name=
H,Ca.signal(this,"active",[!1,this])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHolder"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Click to edit the morph's name"},draggable:{defaultValue:!1},fill:{defaultValue:Ca.Color.transparent},forceUniqueName:{defaultValue:!1},halo:{},layout:{after:["nameHolder"],initialize:function(){this.layout=new Ca.HorizontalLayout({resizeContainer:!0,spacing:7})}},nameHolder:{after:["submorphs"],initialize:function(){this.nameHolder=
this.addMorph(new Ca.Text({fill:Ca.Color.transparent,fontColor:Ca.Color.white,fontWeight:"bold",active:!0}));Ca.connect(this.nameHolder,"onBlur",this,"accept")}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21799,end:24333})})(Ca.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=oa.hasOwnProperty("NameHaloItem")&&"function"===typeof oa.NameHaloItem?oa.NameHaloItem:oa.NameHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,H);this.initNameHolders();this.validityIndicator=Ca.Icon.makeLabel("check",{fontColor:Ca.Color.green,
fontSize:15,padding:Ca.rect(4,6,4,0)});this.fill=this.halo.target.isComponent?Ca.componentAccent:Ca.haloBlue;this.alignInHalo()}},{key:"targets",value:function(){return this.halo.target?this.halo.target.isMorphSelection?this.halo.target.selectedMorphs.map(function(H){return{target:H,highlightOnHover:!0}}):[{target:this.halo.target,highlightOnHover:!1}]:[]}},{key:"initNameHolders",value:function(){var H=this;this.nameHolders=this.targets().map(function(la){la=new Ca.NameHolder({halo:H.halo,highlightOnHover:la.highlightOnHover,
target:la.target});Ca.connect(la,"active",H,"toggleActive");Ca.connect(la,"valid",H,"toggleNameValid");return la});this.submorphs=Ca.arr.interpose(this.nameHolders,{extent:Ca.pt(1,28),fill:Ca.Color.black.withA(.4)})}},{key:"toggleActive",value:function(H){H=$jscomp.makeIterator(H);var la=H.next().value,Fa=H.next().value;this.halo.changingName!==la&&((this.halo.changingName=la)?(this.nameHolders.forEach(function(kb){return kb!=Fa&&kb.deactivate()}),this.borderWidth=3,this.addMorph(this.validityIndicator),
this.fill=Ca.Color.darkGray,setTimeout(function(){return Fa.nameHolder.selectAll()})):(this.fill=Ca.haloBlue,this.nameHolders.forEach(function(kb){return kb!=Fa&&kb.activate()}),this.borderWidth=0,this.validityIndicator.remove(),this.halo.focus()),this.alignInHalo())}},{key:"toggleNameValid",value:function(H){var la=$jscomp.makeIterator(H);H=la.next().value;la=la.next().value;(this.validName=H)?(this.conflictingMorph=null,this.borderColor=Ca.Color.green,this.validityIndicator.nativeCursor="auto",
this.validityIndicator.fontColor=Ca.Color.green,Ca.Icon.setIcon(this.validityIndicator,"check")):(this.conflictingMorph=this.get(la),this.borderColor=Ca.Color.red,this.validityIndicator.fontColor=Ca.Color.red,this.validityIndicator.nativeCursor="pointer",Ca.Icon.setIcon(this.validityIndicator,"exclamation-circle"))}},{key:"alignInHalo",value:function(){Ca.arr.zip(this.targets(),this.nameHolders).map(function(la){var Fa=$jscomp.makeIterator(la);la=Fa.next().value.target;Fa=Fa.next().value;Fa.target=
la;Fa.update()});var H=this.halo.innerBounds().bottomCenter().addPt(Ca.pt(0,2));this.topCenter=Ca.pt(Math.max(H.x,30),Math.max(H.y,80))}},{key:"onMouseDown",value:function(H){var la=this,Fa=this.conflictingMorph;Fa&&(this.halo.toggleMorphHighlighter(!0,Fa),setTimeout(function(){return la.halo.toggleMorphHighlighter(!1,Fa)},1E3))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NameHaloItem"}},{key:"morphName",get:function(){return"name"}},{key:"properties",get:function(){return{borderRadius:{defaultValue:4},
fill:{defaultValue:Ca.haloBlue},borderColor:{defaultValue:Ca.Color.green},layout:{initialize:function(){this.layout=new Ca.HorizontalLayout({resizeContainer:!0,spacing:0})}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:24335,end:27502})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=oa.hasOwnProperty("CloseHaloItem")&&"function"===typeof oa.CloseHaloItem?oa.CloseHaloItem:oa.CloseHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"update",value:function(){var H=this.halo,la=H.target.owner;la.undoStart("close-halo");H.target.selectedMorphs?H.target.selectedMorphs.forEach(function(Fa){return Fa.remove()}):H.target.remove();la.undoStop("close-halo");H.remove()}},{key:"onMouseDown",
value:function(H){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CloseHaloItem"}},{key:"morphName",get:function(){return"close"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["fas","fa-times"]},draggable:{defaultValue:!1},tooltip:{defaultValue:"Remove this morph from the world"}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:27505,end:28111})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("GrabHaloItem")&&"function"===typeof oa.GrabHaloItem?oa.GrabHaloItem:oa.GrabHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"adjustTarget",value:function(H,la){Ca.PropertyPath("owner.layout.autoResize").get(H)&&
!H.globalBounds().insetBy(10).containsPoint(la)&&(H=H.owner);return H}},{key:"valueForPropertyDisplay",value:function(){var H=this.hand,la=this.halo,Fa=this.prevDropTarget,kb=H.world(),fc=H.findDropTarget(H.globalPosition,[la.target],function(Bc){return!Bc.isHaloItem&&!Bc.ownerChain().some(function(xd){return xd.isHaloItem||!xd.visible||0==xd.opacity})});fc=this.adjustTarget(fc,H.globalPosition);la.toggleMorphHighlighter(fc&&fc!=kb,fc,!0);Fa&&Fa!=fc&&la.toggleMorphHighlighter(!1,Fa);return(this.prevDropTarget=
fc)&&fc.name}},{key:"init",value:function(H){var la=this.halo,Fa=la.target.undoStart("grab-halo");Fa&&Fa.addTarget(la.target.owner);this.hand=H;la.target.onGrab({halo:la,hand:H,isShiftDown:function(){return!1}});la.state.activeButton=this;this.opacity=.3;var kb=Ca.connect(H,"update",this,"update");Ca.once(la.target,"remove",function(){return kb.disconnect()})}},{key:"stop",value:function(H){var la=this.halo,Fa=this.prevDropTarget,kb=la.target.undoInProgress,fc=H.hand.findDropTarget(H.hand.globalPosition,
[la.target],function(Bc){return!Bc.isHaloItem&&!Bc.ownerChain().some(function(xd){return xd.isHaloItem})});fc=this.adjustTarget(fc,H.hand.globalPosition);Ca.disconnect(H.hand,"update",this,"update");Ca.MorphHighlighter.interceptDrop(la,fc,la.target);kb.addTarget(fc);fc.onDrop(H);la.state.activeButton=null;la.alignWithTarget();la.toggleMorphHighlighter(!1,Fa);Ca.MorphHighlighter.removeHighlighters(la);la.target.undoStop("grab-halo");this.opacity=1}},{key:"update",value:function(){this.halo.alignWithTarget()}},
{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GrabHaloItem"}},{key:"morphName",get:function(){return"grab"}},{key:"properties",get:function(){return{styleClasses:{defaultValue:["far","fa-hand-rock"]},tooltip:{defaultValue:"Grab the morph"},draggable:{defaultValue:!0}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:28114,end:30619})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("DragHaloItem")&&"function"===typeof oa.DragHaloItem?oa.DragHaloItem:oa.DragHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,
ja,[{key:"valueForPropertyDisplay",value:function(){return this.halo.target.position}},{key:"updateAlignmentGuide",value:function(H){var la=this.halo.getSubmorphNamed("mesh");if(H)return la=this.halo.getMesh(this.halo.target.worldPoint(Ca.pt(0,0))),this.focus(),la;la&&la.remove()}},{key:"init",value:function(){var H=this.halo.target;H.undoStart("drag-halo");this.halo.state.activeButton=this;this.actualPos=H.position;this.targetTransform=H.owner.getGlobalTransform().inverse()}},{key:"stop",value:function(){this.halo.target.undoStop("drag-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget();this.updateAlignmentGuide(!1);Ca.removeSnapToGuidesOf(this.halo.target)}},{key:"update",value:function(H,la,Fa){la=void 0===la?!1:la;Fa=void 0===Fa?!1:Fa;this.actualPos=H=this.actualPos.addPt(this.targetTransform.transformDirection(H));la&&(H=H.griddedBy(Ca.pt(10,10)));this.halo.target.position=H;this.updateAlignmentGuide(la);la||Ca.showAndSnapToGuides(this.halo.target,!0,Fa,5,500)}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDrag",
value:function(H){this.update(H.state.dragDelta,H.isAltDown(),H.isCtrlDown())}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onKeyUp",value:function(H){this.updateAlignmentGuide(!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DragHaloItem"}},{key:"morphName",get:function(){return"drag"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},styleClasses:{defaultValue:["fas","fa-arrows-alt"]},tooltip:{defaultValue:"Change the morph's position. Press (alt) while dragging to align the morph's position along a grid."}}}}],
oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:30622,end:32433})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("InspectHaloItem")&&"function"===typeof oa.InspectHaloItem?oa.InspectHaloItem:oa.InspectHaloItem=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){var la=this;(function(){var Fa,kb,fc,Bc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xd){if(1==xd.nextAddress)return xd.yield(System.import("lively.ide/js/inspector.js"),2);Fa=xd.yieldResult;kb=Fa.default;(fc=la.world().getSubmorphsByStyleClassName("Inspector").find(function(pd){return pd.targetObject==la.halo.target}))&&
(Bc=fc.getWindow())?(Bc.minimized=!1,Bc.animate({center:la.world().visibleBounds().center(),duration:200})):kb.openInWindow({targetObject:la.halo.target});la.halo.remove();xd.jumpToEnd()})})()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InspectHaloItem"}},{key:"morphName",get:function(){return"inspect"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Inspect the morph's local state"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-cogs"]}}}}],
oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:32436,end:33338})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("EditHaloItem")&&"function"===typeof oa.EditHaloItem?oa.EditHaloItem:oa.EditHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){var la=this;(H=this.world().getSubmorphsByStyleClassName("ObjectEditor").find(function(Fa){return Fa.target==la.halo.target}))?(H=H.getWindow(),H.bringToFront(),H.minimized=!1,H.animate({center:this.world().visibleBounds().center(),duration:200})):$world.execCommand("open object editor",{target:this.halo.target});this.halo.remove()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"EditHaloItem"}},{key:"morphName",get:function(){return"edit"}},{key:"properties",get:function(){return{tooltip:{defaultValue:"Edit the morph's definition"},draggable:{defaultValue:!1},styleClasses:{defaultValue:["fas","fa-wrench"]}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},
{start:33341,end:34123})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("RotateHaloItem")&&"function"===typeof oa.RotateHaloItem?oa.RotateHaloItem:oa.RotateHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,H);this.adaptAppearance(!1)}},{key:"angle",get:function(){return this.getProperty("angle")||0}},{key:"angle",set:function(H){this.setProperty("angle",H)}},{key:"scaleGauge",get:function(){return this.getProperty("scaleGauge")||null}},{key:"scaleGauge",set:function(H){this.setProperty("scaleGauge",H)}},{key:"initRotation",get:function(){return this.getProperty("initRotation")||0}},{key:"initRotation",set:function(H){this.setProperty("initRotation",H)}},{key:"valueForPropertyDisplay",
value:function(){var H=this.halo.target;return this.scaleGauge?H.scale.toFixed(4).toString():Ca.num.toDegrees(H.rotation).toFixed(1)+"\u00b0"}},{key:"init",value:function(H){this.detachFromLayout();this.halo.target.undoStart("rotate-halo");this.halo.state.activeButton=this;this.angle=H;this.initRotation=this.halo.target.rotation;this.halo.toggleRotationIndicator(!0,this)}},{key:"initScale",value:function(H){this.detachFromLayout();this.halo.state.activeButton=this;this.scaleGauge=H.scaleBy(1/this.halo.target.scale);
this.halo.toggleRotationIndicator(!0,this)}},{key:"update",value:function(H){this.scaleGauge=null;H=this.initRotation+(H-this.angle);H=Ca.num.toRadians(Ca.num.detent(Ca.num.toDegrees(H),10,45));this.halo.target.rotation=H;this.halo.toggleRotationIndicator(!0,this)}},{key:"updateScale",value:function(H){var la=this.scaleGauge,Fa=this.halo;la||(la=this.scaleGauge=H.scaleBy(1/Fa.target.scale));this.angle=H.theta();this.initRotation=Fa.target.rotation;Fa.target.scale=Ca.num.detent(H.dist(Ca.pt(0,0))/
la.dist(Ca.pt(0,0)),.1,.5);Fa.toggleRotationIndicator(!0,this)}},{key:"stop",value:function(){this.attachToLayout();this.scaleGauge=null;this.halo.state.activeButton=null;this.halo.alignWithTarget();this.halo.toggleRotationIndicator(!1,this);this.halo.target.undoStop("rotate-halo");this.halo.ensureResizeHandles()}},{key:"adaptAppearance",value:function(H){this.styleClasses=["fas",H?"fa-search-plus":"fa-redo"];this.tooltip=H?"Scale morph":"Rotate morph"}},{key:"detachFromLayout",value:function(){this.savedLayout=
this.halo.layout;this.halo.layout=null}},{key:"attachToLayout",value:function(){this.halo.layout=this.savedLayout}},{key:"onDragStart",value:function(H){this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.initScale(H.position.subPt(this.halo.target.globalPosition)):this.init(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDrag",value:function(H){this.globalPosition=H.position.addPt(Ca.pt(-10,-10));this.adaptAppearance(H.isShiftDown());H.isShiftDown()?this.updateScale(H.position.subPt(this.halo.target.globalPosition)):
this.update(H.position.subPt(this.halo.target.globalPosition).theta())}},{key:"onDragEnd",value:function(H){this.adaptAppearance(H.isShiftDown());this.stop()}},{key:"onKeyDown",value:function(H){this.adaptAppearance(H.isShiftDown())}},{key:"onKeyUp",value:function(H){this.adaptAppearance(H.isShiftDown())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RotateHaloItem"}},{key:"morphName",get:function(){return"rotate"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0}}}}],
oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:34125,end:37569})})(Ca.HaloItem);Ca.nameNumberRe=/(.+)([0-9]+)$/;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("ComponentHaloItem")&&"function"===typeof oa.ComponentHaloItem?oa.ComponentHaloItem:
oa.ComponentHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"updateComponentIndicator",value:function(){var H=this.world(),la=this.halo.target;this.halo.remove();H.showHaloFor(la)}},{key:"onMouseDown",value:function(){this.halo.target.isComponent=!this.halo.target.isComponent;this.updateComponentIndicator()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentHaloItem"}},
{key:"morphName",get:function(){return"component"}},{key:"properties",get:function(){return{tooltip:{get:function(){return this.halo.target.isComponent?"Retract Component":"Turn into Component"}},styleClasses:{initialize:function(){this.styleClasses=this.halo.target.isComponent?["fas","fa-eraser"]:["fas","fa-cube"]}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:37611,end:38357})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("CopyHaloItem")&&"function"===typeof oa.CopyHaloItem?oa.CopyHaloItem:oa.CopyHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"init",value:function(H){function la(le,nd){return nd.match(Ca.nameNumberRe)?
nd.replace(Ca.nameNumberRe,function(Rd,be,Ce){Ce||(Ce="0");for(Rd=Number(Ce);le.get(be+ ++Rd););return be+Rd}):nd+"1"}var Fa=this.halo,kb=Fa.target,fc=Fa.world(),Bc=kb instanceof Ca.MultiSelectionTarget;Fa.remove();Ca.connect(H,"update",this,"update");if(Bc){var xd=kb.selectedMorphs.map(function(le){return fc.addMorph(le.copy())});Bc=xd.map(function(le){le.name=la(kb,le.name);return le.position});xd[0].undoStart("copy-halo");fc.addMorph(Fa);Fa.refocus(xd);H.grab(Fa.target);Fa.target.onGrab({halo:Fa,
hand:H,isShiftDown:function(){return!1}});Bc.forEach(function(le,nd){return xd[nd].globalPosition=le});Fa.alignWithTarget()}else{Bc=kb.globalPosition;var pd=kb.copy();kb.isComponent&&(pd.isComponent=!1,pd.withAllSubmorphsDoExcluding(function(le){le!=pd&&le.master||delete le._parametrizedProps},function(le){return le.master&&le!=pd}),pd.master=kb);pd.name=la(kb,kb.name);fc.addMorph(pd);pd.globalPosition=Bc;pd.undoStart("copy-halo");H.grab(pd);fc.addMorph(Fa);Fa.visible=!1}}},{key:"stop",value:function(H){var la=
this.halo,Fa=$jscomp.makeIterator(H.grabbedMorphs).next().value,kb=H.findDropTarget(H.globalPosition,[la.target],function(Bc){return!Bc.isHaloItem&&!Bc.ownerChain().some(function(xd){return xd.isHaloItem})}),fc=la.target.undoInProgress;Ca.disconnect(H,"update",this,"update");fc.addTarget(kb);H.dropMorphsOn(kb);la.target.undoStop("copy-halo");la.remove();H.world().showHaloFor(Fa)}},{key:"onDragStart",value:function(H){this.init(H.hand)}},{key:"onDragEnd",value:function(H){this.stop(H.hand)}},{key:"update",
value:function(){this.halo.alignWithTarget()}},{key:"copyToClipBoard",value:function(){var H=this,la,Fa,kb,fc,Bc,xd,pd,le,nd,Rd,be,Ce,hf,Le,pc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ie){switch(Ie.nextAddress){case 1:la=H;Fa=la.halo;if(Fa.nameHalo().nameHolders.find(function(rf){return rf.nameHolder===$world.focusedMorph}))return Ie.return();kb=Fa.target;fc=Fa.world();Bc=kb instanceof Ca.MultiSelectionTarget;xd=kb.globalBounds().topLeft();pd=Bc?kb.selectedMorphs:[kb];le=[];nd=
'<!DOCTYPE html>\n          <html lang="en">\n          <head>\n            <meta charset="utf-8">\n            '+document.querySelector("#lively-morphic-css").outerHTML+"\n          </head>\n          <body>";Fa.remove();Ie.setCatchFinallyBlocks(2);Rd=$jscomp.makeIterator(pd);be=Rd.next();case 4:if(be.done)return nd+="</body></html>",Le=JSON.stringify(le),Ie.yield(H.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/html",data:nd},{type:"application/morphic",data:Le}]),8);Ce=be.value;return Ie.yield(Ca.createMorphSnapshot(Ce,
{addPreview:!1,testLoad:!1}),7);case 7:hf=Ie.yieldResult;hf.copyMeta={offset:Ce.worldPoint(Ca.pt(0,0)).subPt(xd)};le.push(hf);nd+=Ce.renderPreview();be=Rd.next();Ie.jumpTo(4);break;case 8:Ie.leaveTryBlock(3);break;case 2:return pc=Ie.enterCatchBlock(),fc.logError(pc),Ie.return();case 3:fc.addMorph(Fa),Fa.refocus(pd),Fa.setStatusMessage("copied"),Ie.jumpToEnd()}})}},{key:"onMouseUp",value:function(H){var la=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){H.stop();return Fa.yield(la.copyToClipBoard(),
0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CopyHaloItem"}},{key:"morphName",get:function(){return"copy"}},{key:"properties",get:function(){return{draggable:{defaultValue:!0},tooltip:{defaultValue:"Copy morph"},styleClasses:{defaultValue:["far","fa-clone"]}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:38359,end:42348})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("OriginHaloItem")&&"function"===typeof oa.OriginHaloItem?oa.OriginHaloItem:oa.OriginHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"fill",get:function(){return Ca.Color.white.interpolate(.2,this.borderColorTop)}},{key:"extent",get:function(){return Ca.pt(15,
15)}},{key:"tooltip",get:function(){return"Change the morph's origin"}},{key:"computePositionAtTarget",value:function(){return this.halo.localize(this.halo.target.globalPosition)}},{key:"alignInHalo",value:function(){this.visible=!this.halo.hasTinyTarget;this.center=this.computePositionAtTarget()}},{key:"valueForPropertyDisplay",value:function(){return this.halo.target.origin}},{key:"init",value:function(){this.halo.target.undoStart("origin-halo");this.halo.state.activeButton=this}},{key:"stop",value:function(){this.halo.target.undoStop("origin-halo");
this.halo.state.activeButton=null;this.halo.alignWithTarget()}},{key:"update",value:function(H){var la=this.halo,Fa=la.target.origin,kb=la.target.worldPoint(Fa);H=la.target.localize(kb.addPt(H)).subPt(la.target.scroll).subPt(Fa);la.target.adjustOrigin(la.target.origin.addPt(H))}},{key:"onDragStart",value:function(H){this.init()}},{key:"onDragEnd",value:function(H){this.stop()}},{key:"onDrag",value:function(H){this.update(H.state.dragDelta)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OriginHaloItem"}},
{key:"morphName",get:function(){return"origin"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:3},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0},borderColor:{after:["halo"],initialize:function(){this.borderColor=this.halo.target.isComponent?Ca.componentAccent:Ca.haloBlue}}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:42351,end:43982})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("ResizeHandle")&&"function"===typeof oa.ResizeHandle?oa.ResizeHandle:oa.ResizeHandle=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"valueForPropertyDisplay",value:function(){var H=this.halo.target.extent,
la=H.y;return H.x.toFixed(1)+"x"+la.toFixed(1)}},{key:"positionInHalo",value:function(){var H=this.halo.borderBox.bounds();this.halo.hasTinyTarget&&(Ca.Rectangle.prototype.sides.includes(this.location)&&(this.visible=!1),H=H.insetBy(-4));return H.partNamed(this.location)}},{key:"alignInHalo",value:function(){this.center=this.positionInHalo();return this}},{key:"onKeyUp",value:function(H){this.halo.state.activeButton==this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onKeyDown",value:function(H){this.halo.state.activeButton==
this&&this.halo.toggleDiagonal(H.isShiftDown(),this.corner)}},{key:"onDragStart",value:function(H){this.init(H.position,H.isShiftDown())}},{key:"onDragEnd",value:function(H){this.stop(H.isShiftDown())}},{key:"onDrag",value:function(H){this.update(H.position,H.isShiftDown(),H.isAltDown(),H.isCtrlDown());this.focus()}},{key:"init",value:function(H,la){la=void 0===la?!1:la;var Fa=this.halo.target,kb=Fa.origin,fc=Fa.position;Fa=Fa.extent;this.startPos=H;this.startBounds=fc.subPt(kb).extent(Fa);this.startOrigin=
this.halo.target.origin;this.savedLayout=this.halo.layout;this.halo.layout=null;this.halo.state.activeButton=this;this.tfm=this.halo.target.getGlobalTransform().inverse();H=this.halo.target.getGlobalTransform().getRotation();this.offsetRotation=Ca.num.toRadians(H%45);this.halo.toggleDiagonal(la,this.corner)}},{key:"update",value:function(H,la,Fa,kb){la=void 0===la?!1:la;Fa=void 0===Fa?!1:Fa;kb=void 0===kb?!1:kb;var fc=this.corner,Bc=this.tfm;H=this.startPos.subPt(H);Bc=Bc.transformDirection(Ca.pt(H.x,
H.y));Fa&&(Bc=Bc.griddedBy(Ca.pt(10,10)));this.halo.updateBoundsFor(fc,la,Bc,this.startBounds,this.startOrigin);this.halo.toggleDiagonal(la,fc);this.updateAlignmentGuide(Fa);la=[];fc=fc.toLowerCase();fc.includes("left")&&la.push("left");fc.includes("top")&&la.push("top");fc.includes("bottom")&&la.push("bottom");fc.includes("right")&&la.push("right");Ca.showAndSnapToResizeGuides(this.halo.target,la,!0,kb,5,200)}},{key:"stop",value:function(H){H=this.halo;H.layout=this.savedLayout;H.state.activeButton=
null;H.alignWithTarget();H.toggleDiagonal(!1);this.updateAlignmentGuide(!1);Ca.removeSnapToGuidesOf(H.target)}},{key:"updateAlignmentGuide",value:function(H){var la=this.halo.getSubmorphNamed("mesh");if(H)return H=this.halo.target.extent,H=Ca.pt(H.x%10,H.y%10),la=this.halo.getMesh(this.globalPosition.addPt(this.extent.scaleBy(.5)),H),this.focus(),la;la&&la.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ResizeHandle"}},{key:"properties",get:function(){return{corner:{},location:{},
draggable:{defaultValue:!0},isResizeHandle:{readOnly:!0,get:function(){return!0}}}}},{key:"getResizeParts",value:function(H){0<H&&(H-=360);H=-8-(H/45).toFixed();0==H&&(H=8);return Ca.arr.zip(Ca.arr.rotate([["topLeft",function(la){return la.negated()}],["topCenter",function(la){return la.withX(0).negated()}],["topRight",function(la){return la.withX(0).negated()}],["rightCenter",function(la){return Ca.pt(0,0)}],["bottomRight",function(la){return Ca.pt(0,0)}],["bottomCenter",function(la){return Ca.pt(0,
0)}],["bottomLeft",function(la){return la.withY(0).negated()}],["leftCenter",function(la){return la.withY(0).negated()}]],H),[["nwse-resize","topLeft"],["ns-resize","topCenter"],["nesw-resize","topRight"],["ew-resize","rightCenter"],["nwse-resize","bottomRight"],["ns-resize","bottomCenter"],["nesw-resize","bottomLeft"],["ew-resize","leftCenter"]])}},{key:"resizersFor",value:function(H){var la=this;if(!H.target)return[];var Fa=H.target.getGlobalTransform().getRotation();return Ca.arr.compact(this.getResizeParts(Fa).map(function(kb){var fc=
$jscomp.makeIterator(kb),Bc=$jscomp.makeIterator(fc.next().value);kb=Bc.next().value;Bc.next();Bc.next();Bc=$jscomp.makeIterator(fc.next().value);fc=Bc.next().value;Bc=Bc.next().value;return la.for(H,kb,Bc,fc)})).map(function(kb){return kb.alignInHalo()})}},{key:"for",value:function(H,la,Fa,kb){var fc="Resize "+la;H=H.getSubmorphNamed(fc)||new this({name:fc,halo:H,corner:la,tooltip:"Resize "+la,extent:Ca.pt(10,10),borderWidth:1,borderRadius:0,borderColor:H.target.isComponent?Ca.componentAccent:Ca.haloBlue,
fill:Ca.Color.white});return Object.assign(H,{nativeCursor:kb,location:Fa})}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:44042,end:49305})})(Ca.HaloItem);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("MenuHaloItem")&&"function"===
typeof oa.MenuHaloItem?oa.MenuHaloItem:oa.MenuHaloItem=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){var la=this,Fa,kb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fc){if(1==fc.nextAddress)return Fa=la.halo.target,la.halo.remove(),fc.yield(Fa.menuItems(),2);kb=fc.yieldResult;Fa.world().openMenu(kb).hasFixedPosition=la.halo.hasFixedPosition;fc.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuHaloItem"}},{key:"morphName",get:function(){return"menu"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},tooltip:{defaultValue:"Opens the morph menu"},styleClasses:{defaultValue:["fas","fa-bars"]}}}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:49308,end:49819})})(Ca.HaloItem);var Kc=ta("M",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),tb=oa.hasOwnProperty("MorphHighlighter")&&"function"===typeof oa.MorphHighlighter?oa.MorphHighlighter:oa.MorphHighlighter=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"alignWithHalo",value:function(){this.target&&(this.position=this.halo.localize(this.target.globalBounds().topLeft()),
this.halo.isWorld&&(this.position=this.position.subPt(this.halo.scroll)),this.extent=this.target.globalBounds().extent(),this.get("name tag").value=this.target.name,this.get("name tag").topCenter=this.innerBounds().insetBy(-10).bottomCenter())}},{key:"show",value:function(){if(this.target&&this.target.layout&&this.showLayout&&(this.layoutHalo=this.layoutHalo||this.world().showLayoutHaloFor(this.target,this.pointerId))&&this.layoutHalo.previewDrop){this.visible=!1;this.alignWithHalo();this.halo.get("grab").hand.grabbedMorphs&&
this.layoutHalo.previewDrop(this.halo.get("grab").hand.grabbedMorphs);return}this.visible=!0;this.alignWithHalo()}},{key:"handleDrop",value:function(H){this.layoutHalo&&this.layoutHalo.handleDrop(H)}},{key:"deactivate",value:function(){this.layoutHalo&&(this.layoutHalo.remove(),this.layoutHalo=null);this.visible=!1;this.alignWithHalo();this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphHighlighter"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},
name:{defaultValue:"morphHighlighter"},styleClasses:{defaultValue:["inactive"]},reactsToPointer:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},fill:{defaultValue:Ca.Color.orange.withA(.3)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Ca.Color.orange},halo:{},epiMorph:{defaultValue:!0},isHighlighter:{readOnly:!0,defaultValue:!0},highlightedSides:{defaultValue:[],set:function(H){var la=this;this.setProperty("highlightedSides",H);this.submorphs=H.map(function(Fa){return{type:"ellipse",
isHaloItem:!0,fill:Ca.Color.orange,center:la.innerBounds()[Fa]()}});this.addMorph({type:"label",name:"name tag",padding:Ca.Rectangle.inset(5,5,5,5),fontColor:Ca.Color.white,fill:Ca.Color.orange,borderRadius:3});this.alignWithHalo()}},showLayout:{defaultValue:!1},targetId:{},target:{readOnly:!0,derived:!0,get:function(){return(this.world()||this.env.world).getMorphWithId(this.targetId)}}}}},{key:"removeHighlighters",value:function(H){H=void 0===H?$world:H;var la=H._morphHighlighters,Fa;for(Fa in la)la[Fa].remove();
delete H._morphHighlighters}},{key:"for",value:function(H,la,Fa,kb){Fa=void 0===Fa?!1:Fa;kb=void 0===kb?[]:kb;var fc=H._morphHighlighters=H._morphHighlighters||{};Ca.properties.forEachOwn(fc,function(Bc,xd){return xd.alignWithHalo()});if(!la||la.ownerChain().find(function(Bc){return Bc.isHaloItem}))return null;fc[la.id]=fc[la.id]||new this({targetId:la.id,halo:H,showLayout:Fa});H.addMorph(fc[la.id]);fc[la.id].highlightedSides=kb;return fc[la.id]}},{key:"interceptDrop",value:function(H,la,Fa){(H=H._morphHighlighters=
H._morphHighlighters||{},H[la.id])&&H[la.id].handleDrop(Fa)}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:50009,end:53521})}(Ca.Morph));Ca.MorphHighlighter=Kc;Ca.MorphHighlighter=Kc;Ca.MorphHighlighter=Kc;var zc=ta("I",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/morph.js"),
tb=oa.hasOwnProperty("InteractiveMorphSelector")&&"function"===typeof oa.InteractiveMorphSelector?oa.InteractiveMorphSelector:oa.InteractiveMorphSelector=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(H,la,Fa){H=void 0===H?$world:H;this.controllingMorph=void 0===la?null:la;this.possibleTarget=this.morphHighlighter=this.selectorMorph=null;this.world=
H;this.filterFn=Fa;this.whenDone=null}},{key:"selectNewTarget",value:function(){this.targetObject=null;var H=Ca.promise.deferred();H.promise.resolve=H.resolve;this.whenDone=H.promise;this.selectorMorph=Ca.Icon.makeLabel("crosshairs",{fontSize:20,hasFixedPosition:!0,epiMorph:!0}).openInWorld();Ca.connect(this.world.firstHand,"position",this,"scanForTargetAt");Ca.once(this.selectorMorph,"onMouseDown",this,"selectTarget");Ca.once(this.selectorMorph,"onKeyDown",this,"stopSelect");this.selectorMorph.focus();
this.scanForTargetAt(this.world.firstHand.position)}},{key:"scanForTargetAt",value:function(){var H=this.world.firstHand.globalPosition;this.selectorMorph.center=H;this.selectorMorph.focus();var la=this.selectorMorph.morphBeneath(H),Fa,kb=this.possibleTarget,fc=this.controllingMorph,Bc=this.filterFn,xd=this.world,pd=this.morphHighlighter;for(pd==la?la=pd.morphBeneath(H):la&&la.isEpiMorph&&(la=la.morphBeneath(H));la&&(Fa=[la].concat($jscomp.arrayFromIterable(la.ownerChain())).find(function(le){return!le.visible}));)la=
Fa=Fa.morphBeneath(H);if(la&&Bc&&!Bc(la))for(;la&&![la].concat($jscomp.arrayFromIterable(la.ownerChain())).find(Bc);)la=la.morphBeneath(H);!la||la==kb||fc&&la.ownerChain().includes(fc.getWindow())||(pd&&pd.deactivate(),(this.possibleTarget=kb=la)&&!kb.isWorld&&(H=this.morphHighlighter=Ca.MorphHighlighter.for(xd,la))&&H.show())}},{key:"selectTarget",value:function(){this.targetObject=this.possibleTarget;this.stopSelect()}},{key:"stopSelect",value:function(){Ca.MorphHighlighter.removeHighlighters(this.world);
Ca.disconnect(this.world.firstHand,"position",this,"scanForTargetAt");this.selectorMorph.remove();this.whenDone&&this.whenDone.resolve(this.targetObject)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveMorphSelector"}},{key:"selectMorph",value:function(H,la,Fa){H=new this(H,la,Fa);H.selectNewTarget();return H.whenDone}}],oa,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:53530,end:56275})}(void 0));Ca.InteractiveMorphSelector=zc;Ca.InteractiveMorphSelector=zc;Ca.InteractiveMorphSelector=zc;Ca.default=Yb;var Ha=lively.FreezerRuntime.recorderFor("lively.halos/markers.js");Ha.show=ya;Ha.showRect=function(ja,oa,tb){var H=Ha.BoundsMarker.highlightBounds(oa);return tb?Ha.showInLoop(ja,H,oa):Ha.showThenHide(ja,H)};Ha.showInLoop=function(ja,oa,tb){var H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(la){switch(la.nextAddress){case 1:return Ha.showThenHide(ja,
oa,!1),la.yield(Ha.promise.delay(300),2);case 2:H=!1,Ha.once(ja,"onMouseDown",function(){return H=!0});case 3:if(H){la.jumpTo(4);break}return la.yield(oa.retract(tb),3);case 4:oa.fadeOut(2E3),la.jumpToEnd()}})};Ha.showThenHide=function(ja,oa,tb){tb=void 0===tb?3:tb;if(ja){var H=Array.isArray(oa)?oa:[oa];H.forEach(function(la){return ja.addMorph(la)});tb&&setTimeout(function(){return H.forEach(function(la){return la.fadeOut(2E3)})},1E3*tb);return oa}};Ha.showLine=function(ja,oa,tb){tb=void 0===tb?
3E3:tb;var H=oa.start;oa=oa.end.subPt(H);var la=ja.addMorph({position:H,rotation:oa.theta(),border:{width:1,color:Ha.Color.red},width:oa.fastR(),height:0});tb&&setTimeout(function(){return la.fadeOut()},tb);return la};Ha.showConnector=Gb;Ha.obj=Nb;Ha.promise=Ic;Ha.string=Zb;Ha.pt=yb;Ha.Color=Qb;Ha.Rectangle=Pa;Ha.rect=Uc;Ha.morph=Kb;Ha.easings=kc;Ha.Path=Dc;Ha.Icon=Hd;Ha.Morph=yd;Ha.MorphicEnv=ua;Ha.connect=sb;Ha.once=Db;Ha.disconnect=rc;Ha.show=ya;Ha.show=ya;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),
tb=oa.hasOwnProperty("BoundsMarker")&&"function"===typeof oa.BoundsMarker?oa.BoundsMarker:oa.BoundsMarker=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(){ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{borderWidth:0,fill:Ha.Color.transparent,reactsToPointer:!1,hasFixedPosition:!0})}},{key:"isEpiMorph",
get:function(){return!0}},{key:"markerLength",value:function(H){H=H.insetBy(-2);H=Math.min(H.width,H.height);return Math.max(4,Math.floor(10>H/10?H/2-5:H/10))}},{key:"createMarkerEdge",value:function(){return Ha.morph({fill:Ha.Color.red,reactsToPointer:!1,borderRadius:10})}},{key:"ensureMarkerCorners",value:function(){var H=this.topLeftH||(this.topLeftH=this.addMorph(this.createMarkerEdge())),la=this.topLeftV||(this.topLeftV=this.addMorph(this.createMarkerEdge())),Fa=this.topRightH||(this.topRightH=
this.addMorph(this.createMarkerEdge())),kb=this.topRightV||(this.topRightV=this.addMorph(this.createMarkerEdge())),fc=this.bottomRightH||(this.bottomRightH=this.addMorph(this.createMarkerEdge())),Bc=this.bottomRightV||(this.bottomRightV=this.addMorph(this.createMarkerEdge())),xd=this.bottomLeftH||(this.bottomLeftH=this.addMorph(this.createMarkerEdge())),pd=this.bottomLeftV||(this.bottomLeftV=this.addMorph(this.createMarkerEdge()));return[H,la,Fa,kb,fc,Bc,xd,pd]}},{key:"alignWithMorph",value:function(H){return this.alignWithBounds(H.globalBounds().translatedBy($world.scroll.negated()))}},
{key:"alignWithBounds",value:function(H){this.alignWithRect(H.insetBy(-20));return this.alignWithRect(H,!0)}},{key:"alignWithRect",value:function(H,la){var Fa=this.ensureMarkerCorners(),kb=this.markerLength(H),fc=[H.topLeft().addXY(0,0).extent(Ha.pt(kb,5)),H.topLeft().addXY(0,0).extent(Ha.pt(5,kb)),H.topRight().addXY(-kb,0).extent(Ha.pt(kb,5)),H.topRight().addXY(-5,0).extent(Ha.pt(5,kb)),H.bottomRight().addXY(-5,-kb).extent(Ha.pt(5,kb)),H.bottomRight().addXY(-kb,-5).extent(Ha.pt(kb,5)),H.bottomLeft().addXY(0,
-5).extent(Ha.pt(kb,5)),H.bottomLeft().addXY(0,-kb).extent(Ha.pt(5,kb))];Fa.forEach(function(Bc,xd){return Bc.setBounds(fc[xd])});la&&(this.adjustOrigin(H.center()),this.opacity=0,this.scale=1.5,this.animate({opacity:1,scale:1,duration:300}));return this}},{key:"retract",value:function(H){var la=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kb){if(1==kb.nextAddress)return kb.yield(la.animate({scale:Math.max(30/H.width,1.05)}),2);Fa=la.center;return kb.yield(la.animate({center:Fa,
scale:1,duration:300,easing:Ha.easings.inOutExpo}),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BoundsMarker"}},{key:"highlightMorph",value:function(H){return(new this).alignWithMorph(H)}},{key:"highlightBounds",value:function(H){return(new this).alignWithBounds(H)}}],oa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:2261,end:5920})})(Ha.Morph);Yb=ta("S",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=oa.hasOwnProperty("StatusMessage")&&"function"===typeof oa.StatusMessage?oa.StatusMessage:oa.StatusMessage=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"relayout",value:function(){this.title=Ha.string.truncate(this.message,(this.width/15).toFixed(),
"...")}},{key:"isEpiMorph",value:function(){return!0}},{key:"isStatusMessage",value:function(){return!0}},{key:"setMessage",value:function(H,la){this.message=H;this.color=la}},{key:"slideTo",value:function(H){var la=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return la.sliding=la.animate({position:H,duration:500}),Fa.yield(la.sliding,2);la.sliding=!1;Fa.jumpToEnd()})}},{key:"expand",value:function(){var H=this,la,Fa,kb,fc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Bc){if(1==
Bc.nextAddress)return H.expandable?H.sliding?Bc.yield(H.sliding,2):Bc.jumpTo(2):Bc.return();la=H.world();if(!la||H.isMaximized)return Bc.return();H.isMaximized=!0;H.stayOpen=!0;Fa=H.getSubmorphNamed("message text");Fa.lineWrapping=!1;Object.assign(Fa,{clipMode:"auto",fixedWidth:!0,selectable:!0});H.expandedContent&&(Fa.value=H.expandedContent);Fa.fit();kb=Fa.textBounds().extent();fc=la.visibleBounds();kb.y>fc.extent().y&&(kb.y=fc.extent().y-20);kb.x>fc.extent().x&&(kb.x=fc.extent().x-20);kb=H.extent.maxPt(kb);
H.animate({extent:kb,center:fc.center(),duration:200});H.relayout();H.focus();Bc.jumpToEnd()})}},{key:"fit",value:function(){var H=this.getSubmorphNamed("message text");H&&(this.extent=Ha.pt(100,35).maxPt(H.textBounds().extent()),this.relayout())}},{key:"focus",value:function(){var H=this.getSubmorphNamed("message text");H&&H.focus()}},{key:"onMouseUp",value:function(H){this.expand()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessage"}},{key:"properties",get:function(){return{extent:{defaultValue:Ha.pt(200,
100)},stayOpen:{defaultValue:!1},slidable:{defaultValue:!0},isMaximized:{defaultValue:!1},expandable:{initialize:function(){this.expandable=!0}},maxLines:{defaultValue:Infinity},name:{defaultValue:"messageMorph"},master:{initialize:function(){this.master={auto:"styleguide://System/message"}}},message:{after:["submorphs","extent"],set:function(H){this.setProperty("message",H);var la=this.getSubmorphNamed("message text");if(la){la.value=H;var Fa=la.documentEndPosition;Fa.row>this.maxLines&&(la.replace({start:{row:this.maxLines,
column:0},end:Fa},"...\n"),this.expandedContent||(this.expandedContent=H));Fa=la.documentEndPosition;0!==Fa.column&&la.insertText("\n",Fa)}}},title:{isStyleProp:!0,derived:!0,set:function(H){this.getSubmorphNamed("message title").value=H},get:function(){return this.getSubmorphNamed("message title").value}},color:{after:["submorphs"],derived:!0,get:function(){return this.get("message icon").fontColor},set:function(H){this.get("message icon").fontColor=H;this.get("message icon")._parametrizedProps&&
(this.get("message icon")._parametrizedProps.fontColor=H)}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[{name:"message icon",type:"label",value:Ha.Icon.textAttribute("check-circle")},{name:"message text",type:"text"},{name:"message title",type:"label"},{name:"close button",type:"button"}];Ha.connect(this.getSubmorphNamed("close button"),"fire",this,"remove");Ha.connect(this,"extent",this,"relayout")}}}}}],oa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:5964,end:10242})}(Ha.Morph));Ha.StatusMessage=Yb;Ha.StatusMessage=Yb;Ha.StatusMessage=Yb;var Ec=ta("b",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/markers.js"),tb=oa.hasOwnProperty("StatusMessageForMorph")&&"function"===typeof oa.StatusMessageForMorph?oa.StatusMessageForMorph:oa.StatusMessageForMorph=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"alignAtBottomOf",value:function(H){var la=this.world();la&&(this.bringToFront(),this.fit(),this.width=H.bounds().width,this.relayout(),H.world()&&(this.position=H.owner.worldPoint(H.bounds().bottomLeft())),H=la.visibleBounds(),H=this.bounds().top()+this.height-H.bottom(),0<H&&this.moveBy(Ha.pt(0,-H)))}},{key:"onMouseUp",value:function(H){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StatusMessageForMorph"}},
{key:"properties",get:function(){return{slidable:{defaultValue:!1},renderOnGPU:{defaultValue:!0},removeOnTargetMorphChange:{defaultValue:!0},targetMorph:{defaultValue:null,get:function(){var H=this.getProperty("targetMorph");return H&&$world.getMorphWithId(H)},set:function(H){this.setProperty("targetMorph",H?H.id:null);this.alignAtBottomOf(H)}},expandable:{after:["submorphs"],set:function(H){this.setProperty("expandable",H);if(H){var la=this.getSubmorphNamed("expand button")||this.addMorph({name:"expand button",
type:"button"});Ha.connect(la,"fire",this,"expand")}else this.getSubmorphNamed("expand button")&&(this.getSubmorphNamed("expand button").remove(),Ha.disconnect(la,"fire",this,"expand"))}}}}}],oa,{pathInPackage:function(){return"markers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10467,end:12318})}(Ha.StatusMessage));Ha.StatusMessageForMorph=
Ec;Ha.StatusMessageForMorph=Ec;Ha.StatusMessageForMorph=Ec;Ha.showConnector=Gb;Ha.showConnector=Gb;var Wa=lively.FreezerRuntime.recorderFor("lively.ide/index.js");Wa.info="import via sub modules";Wa.info="import via sub modules";Wa.info="import via sub modules";var cd=ta("v",{});Wa.valueWidgets=cd;Wa.valueWidgets=cd;Wa.valueWidgets=cd;var Na=ta("p",{});Wa.popovers=Na;Wa.popovers=Na;Wa.popovers=Na;var bb=lively.FreezerRuntime.recorderFor("lively.components/popup.js");bb.Morph=yd;bb.VerticalLayout=
Ga;bb.StyleSheet=rd;bb.Icon=Hd;bb.CustomLayout=cb;bb.Color=Qb;bb.rect=Uc;bb.pt=yb;bb.connect=sb;bb.Path=Ub;bb.duration=300;Wa=ta("P",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.components/popup.js"),tb=oa.hasOwnProperty("Popover")&&"function"===typeof oa.Popover?oa.Popover:oa.Popover=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"relayout",value:function(H){var la=this.get("body"),
Fa=this.get("arrow"),kb=this.get("close button");Fa=Fa.height;H?(la.animate({topCenter:bb.pt(0,Fa),duration:200}),kb.animate({topRight:la.topRight.addXY(8,-8),duration:200})):(la.topCenter=bb.pt(0,Fa),kb.topRight=la.topRight.addXY(8,-8))}},{key:"close",value:function(){this.fadeOut(300)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Popover"}},{key:"properties",get:function(){return{epiMorph:{defaultValue:!0},hasFixedPosition:{defaultValue:!0},master:{initialize:function(){this.master=
{auto:"styleguide://SystemWidgets/popover/light"}}},targetMorph:{derived:!0,after:["submorphs"],defaultValue:{extent:bb.pt(200,200),fill:bb.Color.transparent,submorphs:[{name:"placeholder",type:"label",value:"No Target Specified"}]},get:function(){return this.get("body").submorphs[0]},set:function(H){var la=this;this.get("body").addMorph(H);this.whenRendered().then(function(){return la.relayout()})}},submorphs:{initialize:function(){var H=this;this.submorphs=[{type:"polygon",name:"arrow",topCenter:bb.pt(0,
0),borderColor:bb.Color.transparent,vertices:[bb.pt(-10,0),bb.pt(0,-15),bb.pt(10,0)]},{name:"body"},{name:"close button",type:"button",label:Object.assign(bb.Icon.makeLabel("times-circle"),{fontSize:18}),tooltip:"close",fill:null,extent:bb.pt(16,16),borderColor:bb.Color.transparent}];var la=$jscomp.makeIterator(this.submorphs);la.next();var Fa=la.next().value;la=la.next().value;bb.connect(la,"fire",this,"close");bb.connect(Fa,"extent",this,"relayout",{converter:"() => target.animated"});setTimeout(function(){return H.animated=
!0},1E3)}}}}}],oa,{pathInPackage:function(){return"popup.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:247,end:2617})}(bb.Morph));bb.Popover=Wa;bb.Popover=Wa;bb.Popover=Wa;var db=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js");db.Morph=yd;db.TilingLayout=rb;db.morph=Kb;db.Label=Cc;db.HorizontalLayout=Fc;db.Icon=
Hd;db.InputLine=pb;db.config=Ta;db.connect=sb;db.signal=ec;db.Color=Qb;db.LinearGradient=mb;db.pt=yb;db.rect=Uc;db.num=Eb;db.obj=Nb;db.popovers=Na;db.ValueScrubber=Ua;db.Popover=Wa;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("ContextSensitiveWidget")&&"function"===typeof oa.ContextSensitiveWidget?oa.ContextSensitiveWidget:oa.ContextSensitiveWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ab(tb,ja,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ContextSensitiveWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:db.Color.transparent},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?db.Color.white:db.Color.black}},layout:{initialize:function(){this.layout=new db.HorizontalLayout}},context:{serialize:!1}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1872,end:2439})})(db.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("ShortcutWidget")&&"function"===typeof oa.ShortcutWidget?oa.ShortcutWidget:oa.ShortcutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,
ja,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(H){H.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShortcutWidget"}},{key:"properties",get:function(){return{title:{defaultValue:"No Title",after:["submorphs"],set:function(H){this.setProperty("title",H);this.getSubmorphNamed("valueString").value=H}},nativeCursor:{defaultValue:"pointer"},fontColor:{derived:!0,
set:function(H){this.submorphs.forEach(function(la){return la.fontColor=H})}},submorphs:{initialize:function(){this.submorphs=[db.Icon.makeLabel("arrow-right",{styleClasses:["TreeLabel"],fontSize:15,padding:db.rect(1,1,4,1)}),{type:"label",value:this.title,styleClasses:["TreeLabel"],fontWeight:"bold",name:"valueString",opacity:.8,borderRadius:5,padding:db.rect(0,0,0,2),nativeCursor:"pointer",fontSize:12,borderWidth:0}]}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:2441,end:3667})})(db.ContextSensitiveWidget);Na=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("LayoutWidget")&&"function"===typeof oa.LayoutWidget?oa.LayoutWidget:oa.LayoutWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ab(tb,ja,[{key:"layoutChanged",value:function(){this.title=this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}},{key:"openPopover",value:function(){var H=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return la=new db.popovers.LayoutPopover({hasFixedPosition:!!H.ownerChain().find(function(kb){return kb.hasFixedPosition}),container:H.context}),Fa.yield(la.fadeIntoWorld(H.globalBounds().center()),2);db.connect(la,"layoutChanged",
H,"layoutChanged");db.signal(H,"openWidget",la);Fa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutWidget"}},{key:"properties",get:function(){return{title:{after:["submorphs"],initialize:function(){this.title=this.context&&this.context.layout?"Configure "+this.context.layout.name()+" Layout":"No Layout"}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3676,end:4493})}(db.ShortcutWidget);db.LayoutWidget=Na;db.LayoutWidget=Na;db.LayoutWidget=Na;Wa=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("ColorWidget")&&"function"===typeof oa.ColorWidget?oa.ColorWidget:oa.ColorWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"relayout",
value:function(H){H?this.submorphs=this.color?this.color.isGradient?this.renderGradientValue():this.renderColorValue():this.renderNoColor():this.color&&(this.color.isGradient?this.updateGradientValue():this.updateColorValue())}},{key:"updateGradientValue",value:function(){var H=this.color;if(2*H.stops.length==this.submorphs.length-3){var la;for(la in this.color.stops){var Fa=H.stops[la];var kb=Fa.color,fc=Fa.offset,Bc=$jscomp.makeIterator(this.submorphs[2+2*la].submorphs).next().value;Fa=this.submorphs[3+
2*la];Bc.fill=kb;Fa.value=(100*fc).toFixed()+"%"+(la<H.stops.length-1?",":"")}}else this.submorphs=this.renderGradientValue()}},{key:"renderGradientValue",value:function(){return[{type:"label",styleClasses:["TreeLabel"],value:this.color.type+"(",name:"valueString"}].concat($jscomp.arrayFromIterable(this.renderStops()),[{type:"label",styleClasses:["TreeLabel"],value:")"}])}},{key:"updateColorValue",value:function(){this.getSubmorphNamed("color box").fill=this.color;this.getSubmorphNamed("valueString").value=
db.obj.safeToString(this.color)}},{key:"renderNoColor",value:function(){return[{extent:db.pt(15,15),fill:db.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:db.pt(5,7.5),fill:db.Color.white,borderColor:db.Color.gray.darker(),borderWidth:1,submorphs:[{type:"path",name:"no fill",vertices:[db.pt(0,0),db.pt(10,10)],borderColor:db.Color.red}]}]},{type:"label",value:"No Color",fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderColorValue",value:function(){return[{extent:db.pt(15,
15),fill:db.Color.transparent,submorphs:[{styleClasses:["colorValue"],name:"color box",center:db.pt(5,7.5),fill:this.color,borderColor:db.Color.gray.darker(),nativeCursor:"pointer",borderWidth:1}]},{type:"label",value:db.obj.safeToString(this.color),fontSize:14,name:"valueString",styleClasses:["TreeLabel"]}]}},{key:"renderStops",value:function(){var H=this.color,la=[{type:"label",padding:db.rect(0,0,5,0),value:"linearGradient"==H.type?db.num.toDegrees(H.vectorAsAngle()).toFixed()+"\u00b0,":""}],Fa;
for(Fa in H.stops){var kb=H.stops[Fa],fc=kb.color;kb=kb.offset;la.push({extent:db.pt(this.fontSize,this.fontSize),fill:db.Color.transparent,layout:new db.HorizontalLayout({spacing:3}),submorphs:[{styleClasses:["colorValue"],fill:fc}]});la.push({type:"label",padding:db.rect(0,0,5,0),value:(100*kb).toFixed()+"%"+(Fa<H.stops.length-1?",":"")})}return la}},{key:"onMouseDown",value:function(H){this.openFillEditor()}},{key:"update",value:function(H){this.color=H}},{key:"openFillEditor",value:function(){var H=
this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return la=new db.popovers.FillPopover({hasFixedPosition:!!H.ownerChain().find(function(kb){return kb.hasFixedPosition}),handleMorph:H.context,fillValue:H.color,title:"Fill Control",gradientEnabled:H.gradientEnabled}),Fa.yield(la.fadeIntoWorld(H.globalBounds().center()),2);db.connect(la,"fillValue",H,"update");db.signal(H,"openWidget",la);Fa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorWidget"}},
{key:"properties",get:function(){return{layout:{initialize:function(){this.layout=new db.HorizontalLayout({direction:"centered"})}},selectionFontColor:{defaultValue:db.Color.white},nonSelectionFontColor:{defaultValue:db.Color.black},color:{defaultValue:db.Color.blue},gradientEnabled:{defaultValue:!1},fontSize:{defaultValue:14},isSelected:{after:["submorphs"],set:function(H){this.getProperty("isSelected")!=H&&(this.getSubmorphNamed("valueString").fontColor=H?this.selectionFontColor:this.nonSelectionFontColor,
this.setProperty("isSelected",H))}},submorphs:{after:["nonSelectionFontColor","selectionFontColor"],initialize:function(){db.connect(this,"color",this,"relayout",{converter:function(H,la){return(la&&la.isColor)!=(H&&H.isColor)}});this.relayout(!0)}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:4557,end:9992})}(db.ContextSensitiveWidget);db.ColorWidget=Wa;db.ColorWidget=Wa;db.ColorWidget=Wa;var Sc=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("BooleanWidget")&&"function"===typeof oa.BooleanWidget?oa.BooleanWidget:oa.BooleanWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){this.boolean=
!this.boolean}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BooleanWidget"}},{key:"properties",get:function(){return{fontFamily:{defaultValue:db.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"pointer"},boolean:{set:function(H){this.setProperty("boolean",H);this.value=db.obj.safeToString(H);this.fontColor=this.boolean?db.Color.green:db.Color.red}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10001,end:10481})}(db.Label);db.BooleanWidget=Sc;db.BooleanWidget=Sc;db.BooleanWidget=Sc;var Fd=ta("N",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("NumberWidget")&&"function"===typeof oa.NumberWidget?oa.NumberWidget:oa.NumberWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),"onMouseDown",this).call(this,H);"up"==H.targetMorph.name&&this.increment();"down"==H.targetMorph.name&&this.decrement()}},{key:"spec",value:function(){return db.obj.dissoc(ab._get(Object.getPrototypeOf(tb.prototype),"spec",this).call(this),["submorphs"])}},{key:"update",value:function(H,la){la=void 0===la?!0:la;this.setProperty("number",la?H/this.scaleFactor:H);db.signal(this,"number",this.number);
this.relayout(la)}},{key:"relayoutButtons",value:function(){var H=this.getSubmorphNamed("up"),la=this.getSubmorphNamed("down");this.getSubmorphNamed("value");H.height=la.height=(this.height-2)/2;H.width=la.width=20}},{key:"onChange",value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),"onChange",this).call(this,H);"extent"!=H.prop||this.autofit||this.relayout()}},{key:"relayout",value:function(H){var la=this.getSubmorphNamed("value");la&&(this.autofit?(H||(la.value=this.number*this.scaleFactor),
la.fit(),this.height=la.height,this.width=la.width+20):H||(la.width=this.width-20),this.relayoutButtons(),H||(la.value=db.num.roundTo(this.number*this.scaleFactor,1),la.min=-Infinity!=this.min?this.min*this.scaleFactor:this.min,la.max=Infinity!=this.max?this.max*this.scaleFactor:this.max,la.unit=this.unit))}},{key:"increment",value:function(){void 0!=this.max&&this.number>=this.max||this.update(this.number+1/this.scaleFactor,!1)}},{key:"decrement",value:function(){void 0!=this.min&&this.number<=this.min||
this.update(this.number-1/this.scaleFactor,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"NumberWidget"}},{key:"properties",get:function(){return{unit:{type:"Enum",isStyleProp:!0,values:["px","%","pt",""]},autofit:{defaultValue:!0,after:["submorphs","extent"],set:function(H){this.setProperty("autofit",H);this.getSubmorphNamed("value").scaleToBounds=!H}},number:{defaultValue:0,after:["unit","autofit"],set:function(H){this.setProperty("number",H);this.relayout(!1)}},min:{defaultValue:-Infinity},
max:{defaultValue:Infinity},floatingPoint:{after:["number","submorphs"],set:function(H){this.setProperty("floatingPoint",H);this.get("value").floatingPoint=H},get:function(){var H=/[+-]?([0-9]*[.])?[0-9]+/.exec(this.number);return this.getProperty("floatingPoint")||1==this.scaleFactor&&H&&!!H[1]}},padding:{isStyleProp:!0,defaultValue:db.rect(5,3,0,0),after:["submorphs"],set:function(H){this.setProperty("padding",H);this.getSubmorphNamed("value").padding=H}},extent:{defaultValue:db.pt(70,25)},scaleFactor:{defaultValue:1,
get:function(){return this.getProperty("scaleFactor")||1}},baseFactor:{after:["submorphs"],derived:!0,get:function(){return this.get("value").baseFactor},set:function(H){this.get("value").baseFactor=H}},styleClasses:{defaultValue:["unfocused"]},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/number field/light"}}},fontColor:{isStyleProp:!0,defaultValue:db.Color.rgbHex("#0086b3"),set:function(H){this.setProperty("fontColor",H)}},isSelected:{set:function(H){this.getProperty("isSelected")!=
H&&(H?(this.addStyleClass("selected"),this.removeStyleClass("unselected")):(this.removeStyleClass("selected"),this.addStyleClass("unselected")),this.setProperty("isSelected",H))}},fontFamily:{defaultValue:"Sans-Serif",isStyleProp:!0,set:function(H){this.setProperty("fontFamily",H)}},fontSize:{defaultValue:15,isStyleProp:!0,set:function(H){this.setProperty("fontSize",H)}},layout:{initialize:function(){this.layout=new db.TilingLayout({axis:"column",orderByIndex:!0,align:"center"})}},submorphs:{after:["min",
"max"],initialize:function(){var H=this;this.submorphs=[new db.ValueScrubber({name:"value",unit:this.unit,floatingPoint:this.floatingPoint,scaleToBounds:!1,min:this.min,max:this.max}),db.Icon.makeLabel("sort-up",{name:"up"}),db.Icon.makeLabel("sort-up",{name:"down",rotation:Math.PI})];db.connect(this.get("value"),"scrub",this,"update");this.whenRendered().then(function(){return H.relayout()})}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10490,end:16426})}(db.Morph));db.NumberWidget=Fd;db.NumberWidget=Fd;db.NumberWidget=Fd;var Pd=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("ShadowWidget")&&"function"===typeof oa.ShadowWidget?oa.ShadowWidget:oa.ShadowWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return la=new db.popovers.ShadowPopover({hasFixedPosition:!!H.ownerChain().find(function(kb){return kb.hasFixedPosition}),shadowValue:H.shadowValue}),Fa.yield(la.fadeIntoWorld(H.globalBounds().center()),2);db.connect(la,"shadowValue",H,"shadowValue");db.connect(H,"shadowValue",H,
"update");db.signal(H,"openWidget",la);Fa.jumpToEnd()})}},{key:"update",value:function(){this.renderShadowDisplay()}},{key:"renderShadowDisplay",value:function(){this.shadowValue?1<this.submorphs.length?this.updateShadowDisplay():this.initShadowDisplay():this.submorphs=[{opacity:.8,reactsToPointer:!1,styleClasses:["TreeLabel"],name:"valueString",type:"label",value:"No Shadow"}]}},{key:"updateShadowDisplay",value:function(){var H=this.shadowValue,la=H.blur,Fa=H.spread,kb=H.distance;H=H.color;var fc=
$jscomp.makeIterator(this.submorphs),Bc=fc.next().value,xd=fc.next().value;xd=$jscomp.makeIterator(xd.submorphs).next().value;fc=fc.next().value;Bc.value=(this.shadowValue.inset?"inset":"drop")+"-shadow(";xd.fill=H;fc.value=", "+la+"px, "+kb+"px, "+Fa+"px)"}},{key:"initShadowDisplay",value:function(){var H=this.shadowValue,la=H.blur,Fa=H.spread,kb=H.distance;H=H.color;this.submorphs=[{name:"valueString",opacity:.7,reactsToPointer:!1,type:"label",value:(this.shadowValue.inset?"inset":"drop")+"-shadow("},
db.morph({fill:db.Color.transparent,extent:db.pt(this.fontSize+6,this.fontSize+4),submorphs:[{extent:db.pt(this.fontSize,this.fontSize),position:db.pt(2,2),fill:H,borderColor:db.Color.black,borderWidth:1}]}),{name:"valueString",type:"label",opacity:.7,reactsToPointer:!1,value:", "+la+"px, "+kb+"px, "+Fa+"px)"}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{after:["submorphs"],defaultValue:null,set:function(H){this.setProperty("shadowValue",
H);this.renderShadowDisplay()}},fill:{defaultValue:db.Color.transparent},nativeCursor:{defaultValue:"pointer"},fontSize:{defaultValue:12},fontColor:{derived:!0,set:function(H){this.submorphs.forEach(function(la){return la.fontColor=H})}},isSelected:{defaultValue:!1,set:function(H){this.setProperty("isSelected",H);this.fontColor=H?db.Color.white:db.Color.black}},layout:{initialize:function(){this.layout=new db.HorizontalLayout}},submorphs:{initialize:function(){this.update()}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16435,end:19445})}(db.Morph);db.ShadowWidget=Pd;db.ShadowWidget=Pd;db.ShadowWidget=Pd;var ae=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("PointWidget")&&"function"===typeof oa.PointWidget?oa.PointWidget:oa.PointWidget=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return la=new db.popovers.PointPopover({pointValue:H.pointValue,hasFixedPosition:!!H.ownerChain().find(function(kb){return kb.hasFixedPosition})}),Fa.yield(la.fadeIntoWorld(H.globalBounds().center()),
2);db.connect(la,"pointValue",H,"pointValue");db.signal(H,"openWidget",la);Fa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PointWidget"}},{key:"properties",get:function(){return{isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?this.selectionFontColor:this.nonSelectionFontColor}},selectionFontColor:{isStyleProp:!0,defaultValue:db.Color.white},nonSelectionFontColor:{isStyleProp:!0,defaultValue:db.Color.black},fontFamily:{defaultValue:db.config.codeEditor.defaultStyle.fontFamily},
nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},pointValue:{after:["textAndAttributes"],set:function(H){var la=db.Color.rgbHex("#0086b3");this.setProperty("pointValue",H);this.textAndAttributes=["pt(",null,H.x.toFixed(),{fontColor:la},",",{},H.y.toFixed(),{fontColor:la},")",null];this.fixedHeight=this.fixedWidth=!0;this.height=20;this.width=this.textString.length*this.fontSize}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:19454,end:21082})}(db.Label);db.PointWidget=ae;db.PointWidget=ae;db.PointWidget=ae;var tc=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("PaddingWidget")&&"function"===typeof oa.PaddingWidget?oa.PaddingWidget:oa.PaddingWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return la=new db.popovers.RectanglePopover({hasFixedPosition:!!H.ownerChain().find(function(kb){return kb.hasFixedPosition}),rectangle:H.rectangle}),la.relayout(),Fa.yield(la.fadeIntoWorld(H.globalBounds().center()),2);db.connect(la,"rectangle",H,"rectangle");db.signal(H,"openWidget",
la);Fa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PaddingWidget"}},{key:"properties",get:function(){return{nativeCursor:{defaultValue:"pointer"},styleClasses:{defaultValue:["TreeLabel"]},fontFamily:{defaultValue:db.config.codeEditor.defaultStyle.fontFamily},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?db.Color.white:db.Color.black}},rectangle:{defaultValue:db.rect(0),set:function(H){this.setProperty("rectangle",
H);this.value=db.obj.safeToString(H)}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:21091,end:22140})}(db.Label);db.PaddingWidget=tc;db.PaddingWidget=tc;db.PaddingWidget=tc;var Kd=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("IconWidget")&&
"function"===typeof oa.IconWidget?oa.IconWidget:oa.IconWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"onMouseDown",value:function(H){this.openPopover()}},{key:"openPopover",value:function(){var H=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return la=new db.popovers.IconPopover({hasFixedPosition:!!H.ownerChain().find(function(kb){return kb.hasFixedPosition})}),
Fa.yield(la.fadeIntoWorld(H.globalBounds().center()),2);db.connect(la,"select",H,"iconValue",{converter:function(kb){return kb&&db.Icon.makeLabel(kb).value},varMapping:{Icon:Hd}});db.signal(H,"openWidget",la);Fa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IconWidget"}},{key:"properties",get:function(){return{fontColor:{defaultValue:db.Color.gray.darker()},fontFamily:{defaultValue:"FontAwesome"},nativeCursor:{defaultValue:"pointer"},iconValue:{derived:!0,get:function(){return this.value},
set:function(H){this.value=H||"No Icon"}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:22149,end:23045})}(db.Label);db.IconWidget=Kd;db.IconWidget=Kd;db.IconWidget=Kd;var Yc=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.ide/value-widgets.js"),tb=oa.hasOwnProperty("StringWidget")&&
"function"===typeof oa.StringWidget?oa.StringWidget:oa.StringWidget=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"truncate",value:function(H){return 200<H.length?H.slice(0,20)+"...":H}},{key:"onFocus",value:function(H){var la=this,Fa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kb){if(1==kb.nextAddress)return ab._get(Object.getPrototypeOf(tb.prototype),"onFocus",la).call(la,H),la.readOnly?
kb.return():la.stringTooLong?kb.yield(la.world().editPrompt("edit string",{requester:la,input:la.stringValue}),2):(la.borderColor=db.Color.white.withA(.9),la.textString=la.stringValue,kb.return());Fa=kb.yieldResult;if("string"===typeof Fa)la.onInput(Fa);kb.jumpToEnd()})}},{key:"onBlur",value:function(H){ab._get(Object.getPrototypeOf(tb.prototype),"onBlur",this).call(this,H);this.readOnly||(this.borderColor=db.Color.transparent,this.onInput(this.textString))}},{key:"onInput",value:function(H){this.owner.focus();
db.signal(this,"inputAccepted",H);this.stringValue=H}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StringWidget"}},{key:"properties",get:function(){return{fill:{defaultValue:db.Color.transparent},fontColor:{defaultValue:db.Color.blue},nativeCursor:{defaultValue:"auto"},borderColor:{defaultValue:db.Color.transparent},borderStyle:{defaultValue:"dashed"},borderRadius:{defaultValue:4},borderWidth:{defaultValue:1},padding:{defaultValue:db.rect(0,0,0,0)},fixedWidth:{defaultValue:!1},
fixedHeight:{defaultValue:!1},stringValue:{after:["textString"],set:function(H){this.setProperty("stringValue",H);this.textString=this.truncate(H);this.nativeCursor=this.stringTooLong?"pointer":"auto"}},stringTooLong:{readOnly:!0,get:function(){return this.stringValue.includes("\n")}},isSelected:{defaultValue:"false",set:function(H){this.setProperty("isSelected",H);this.fontColor=H?db.Color.white:db.Color.blue}}}}}],oa,{pathInPackage:function(){return"value-widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:23054,end:24974})}(db.InputLine);db.StringWidget=Yc;db.StringWidget=Yc;db.StringWidget=Yc;db.valueWidgets=cd;Object.assign(db.valueWidgets,{NumberWidget:Fd,StringWidget:Yc,IconWidget:Kd,PaddingWidget:tc,ShadowWidget:Pd,PointWidget:ae,BooleanWidget:Sc,LayoutWidget:Na,ColorWidget:Wa});var ub=lively.FreezerRuntime.recorderFor("lively.halos/layout.js");ub.Ellipse=
ob;ub.Icon=Hd;ub.Morph=yd;ub.Path=Dc;ub.Text=Rc;ub.HorizontalLayout=Fc;ub.VerticalLayout=Ga;ub.morph=Kb;ub.Color=Qb;ub.pt=yb;ub.rect=Uc;ub.Rectangle=Pa;ub.arr=Sb;ub.connect=sb;ub.disconnect=rc;ub.LabeledCheckBox=Wb;ub.DropDownSelector=lc;ub.Button=Lb;ub.Menu=qc;ub.NumberWidget=Fd;ub.InteractiveMorphSelector=zc;ub.easings=kc;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("AxisHalo")&&"function"===typeof oa.AxisHalo?oa.AxisHalo:oa.AxisHalo=function(H){H&&
H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var la=H.halo;H=H.targetAxis;ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{fill:ub.Color.transparent,halo:la,targetAxis:H,container:la.container});this.initialize()}},{key:"initialize",value:function(){this.setBounds(this.fetchBounds());this.minSlider=
this.minSlider();this.axisMenu=this.axisMenu();this.proportionSlider=this.proportionSlider();this.proportionSlider.addMorph(this.minSlider);this.submorphs=[this.proportionSlider,this.axisMenu];this.halo.addGuide(this)}},{key:"forceMenuHidden",set:function(H){this._forceMenuHidden=H;this.axisMenu.visible=!H}},{key:"forceMenuHidden",get:function(){return this._forceMenuHidden}},{key:"lastAxis",get:function(){return!this.targetAxis.after}},{key:"fetchBounds",value:function(){return this.fetchPosition().extent(this.fetchExtent())}},
{key:"alignWithTarget",value:function(){this.extent=this.fetchExtent();this.position=this.fetchPosition();this.proportionSlider.alignWithTarget();this.axisMenu.alignWithTarget()}},{key:"onHoverIn",value:function(){this.minSlider.requestToShow();this.axisMenu.visible=!this.forceMenuHidden&&!0}},{key:"onHoverOut",value:function(H){this.minSlider.requestToHide();this.axisMenu.visible=this.forceMenuVisible||!1}},{key:"proportionSlider",value:function(){var H=this,la=this,Fa=this.proportionViewer();return this.halo.addGuide(new ub.Morph({nativeCursor:this.getResizeCursor(),
fill:ub.Color.transparent,submorphs:[this.devider(),Fa],alignWithTarget:function(){this.setBounds(la.getProportionSliderBounds(this))},onDragStart:function(){Fa.visible=!0},onDrag:function(kb){H.adjustStretch(H.getDelta(kb));H.halo.alignWithTarget()},onDragEnd:function(){Fa.visible=!1}}))}},{key:"devider",value:function(){return new ub.Morph({visible:!this.lastAxis,fill:ub.Color.black.withA(.5),bounds:this.getDeviderBounds(),draggable:!1,reactsToPointer:!1})}},{key:"minSlider",value:function(){var H=
this,la=this,Fa=this.minSpaceVisualizer(),kb=this.minViewer();return this.halo.addGuide(new ub.Ellipse({nativeCursor:this.getResizeCursor(),fill:ub.Color.green,extent:ub.pt(10,10),visible:!1,submorphs:[Fa,kb],becomesActiveOnHover:!0,alignWithTarget:function(){this.position=la.getMinSliderPosition()},requestToShow:function(){this.visible=!la.targetAxis.fixed},requestToHide:function(){this.active?this.shouldHide=!0:this.visible=!1},onDragStart:function(){la.forceMenuHidden=!0;kb.visible=!0;this.active=
Fa.visible=!0},onDrag:function(fc){H.targetAxis.min+=-H.getDelta(fc);H.halo.alignWithTarget()},onDragEnd:function(){la.forceMenuHidden=!1;kb.visible=!1;this.active=Fa.visible=!1;this.shouldHide&&(this.shouldHide=this.visible=!1)}}))}},{key:"minViewer",value:function(){var H=this;return this.viewer({position:this.getMinViewerPosition(),alignWithTarget:function(){this.textString="min: "+H.targetAxis.min.toFixed()+"px !"}})}},{key:"minSpaceBorder",value:function(){return new ub.Path(Object.assign({position:ub.pt(-1,
-1),borderStyle:"dashed",borderColor:ub.Color.green,borderWidth:2},this.getMinSpaceBorder()))}},{key:"minSpaceVisualizer",value:function(){var H=this,la=this.minSpaceBorder();return this.halo.addGuide(new ub.Morph({fill:ub.Color.green.withA(.1),visible:!1,isHaloItem:!0,submorphs:[la],alignWithTarget:function(){this.extent=H.getMinSpaceExtent();this.topLeft=ub.pt(5,5)}}))}},{key:"axisMenu",value:function(){var H=this.lockButton(),la=this.menuButton(),Fa=this;return new ub.Morph({layout:this.getMenuLayout(),
submorphs:[H,la],fill:ub.Color.transparent,visible:!1,becomesActiveOnHover:!0,alignWithTarget:function(){this.bottomRight=this.owner.extent.subPt(Fa.getMenuOffset(this))}})}},{key:"lockButton",value:function(){var H=this;return this.halo.addGuide(new ub.Morph({fill:ub.Color.transparent,extent:ub.pt(25,25),submorphs:[{center:ub.pt(12.5,12.5),fill:ub.Color.transparent,styleClasses:["fa","fa-unlock"]}],alignWithTarget:function(){H.targetAxis.fixed?(this.fontColor=ub.Color.red,this.submorphs[0].styleClasses=
["fa","fa-lock"]):(this.fontColor=ub.Color.green,this.submorphs[0].styleClasses=["fa","fa-unlock"])},onMouseDown:function(){this.toggleLock()},toggleLock:function(){H.targetAxis.fixed=!H.targetAxis.fixed;H.halo.alignWithTarget()}}))}},{key:"menuButton",value:function(){var H=this,la=this;return new ub.Morph({fill:ub.Color.transparent,extent:ub.pt(25,25),submorphs:[{fill:ub.Color.transparent,styleClasses:["fa","fa-cog"],center:ub.pt(12.5,12.5)}],onMouseDown:function(Fa){la.forceMenuVisible=!0;this.addMorph(Fa.state.menu=
new ub.Menu({position:ub.pt(15,15),items:[["Remove "+la.subject,function(){H.targetAxis.remove();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+la.subject+" before",function(){H.targetAxis.addBefore();H.halo.initGuides();H.halo.alignWithTarget()}],["Insert "+la.subject+" after",function(){H.targetAxis.addAfter();H.halo.initGuides();H.halo.alignWithTarget()}]]}))}})}},{key:"viewer",value:function(H){var la=H.position;H=H.alignWithTarget;return this.halo.addGuide(new ub.Text({styleClasses:["Halo"],
padding:ub.Rectangle.inset(6),visible:!1,borderRadius:10,fontColor:ub.Color.white,fill:ub.Color.black.withA(.5),position:la,alignWithTarget:H,readOnly:!0}))}},{key:"proportionViewer",value:function(){var H=this;return this.viewer({position:this.getProportionViewerPosition(),alignWithTarget:function(){this.textString=H.targetAxis.length.toFixed(1)+"px"}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AxisHalo"}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:660,end:7979})})(ub.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("RowHalo")&&"function"===typeof oa.RowHalo?oa.RowHalo:oa.RowHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:Symbol.for("lively-instance-initialize"),
value:function(H){var la=H.row;H=H.halo;ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.row(la),halo:H})}},{key:"subject",get:function(){return"row"}},{key:"adjustStretch",value:function(H){this.targetAxis.height+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.y}},{key:"axisOffset",value:function(){return this.targetAxis.origin.position.y}},{key:"fetchPosition",value:function(){return ub.pt(-45,this.axisOffset()+
10)}},{key:"fetchExtent",value:function(){return ub.pt(40,this.targetAxis.length-10)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.height?ub.pt(2,5):ub.pt(26,10)}},{key:"getMenuLayout",value:function(){return new ub.VerticalLayout}},{key:"getResizeCursor",value:function(){return"row-resize"}},{key:"getMinViewerPosition",value:function(){return ub.pt(50,20)}},{key:"getMinSliderPosition",value:function(){return ub.pt(0,-this.targetAxis.min)}},{key:"getMinSpaceExtent",value:function(){return ub.pt(this.container.width+
45,this.targetAxis.min)}},{key:"getMinSpaceBorder",value:function(){return{extent:ub.pt(this.container.width+50,2),vertices:[ub.pt(0,1),ub.pt(this.container.width+50,1)]}}},{key:"getProportionViewerPosition",value:function(){return ub.pt(40,20)}},{key:"getProportionSliderBounds",value:function(H){return ub.pt(0,H.owner.height-5).extent(ub.pt(40,10))}},{key:"getDeviderBounds",value:function(){return ub.pt(15,4).extent(ub.pt(25,2))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RowHalo"}}],
oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:7981,end:9208})})(ub.AxisHalo);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("ColumnHalo")&&"function"===typeof oa.ColumnHalo?oa.ColumnHalo:oa.ColumnHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:Symbol.for("lively-instance-initialize"),value:function(H){var la=H.col;H=H.halo;ab._get(Object.getPrototypeOf(tb.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{targetAxis:H.target.col(la),halo:H})}},{key:"subject",get:function(){return"column"}},{key:"adjustStretch",value:function(H){this.targetAxis.width+=H}},{key:"getDelta",value:function(H){return H.state.dragDelta.x}},{key:"axisOffset",
value:function(){return this.targetAxis.origin.position.x}},{key:"fetchPosition",value:function(){return ub.pt(this.axisOffset()+10,-45)}},{key:"fetchExtent",value:function(){return ub.pt(this.targetAxis.length-10,40)}},{key:"getMenuOffset",value:function(H){return this.targetAxis.length>H.width?ub.pt(5,3):ub.pt(8,26)}},{key:"getMenuLayout",value:function(){return new ub.HorizontalLayout}},{key:"getResizeCursor",value:function(){return"col-resize"}},{key:"getMinViewerPosition",value:function(){return ub.pt(20,
50)}},{key:"getMinSliderPosition",value:function(){return ub.pt(-this.targetAxis.min,0)}},{key:"getMinSpaceExtent",value:function(){return ub.pt(this.targetAxis.min,this.container.height+45)}},{key:"getMinSpaceBorder",value:function(){return{extent:ub.pt(2,this.container.height+50),vertices:[ub.pt(1,0),ub.pt(1,this.container.height+50)]}}},{key:"getProportionViewerPosition",value:function(){return ub.pt(20,40)}},{key:"getProportionSliderBounds",value:function(H){return ub.pt(H.owner.width-5,0).extent(ub.pt(10,
40))}},{key:"getDeviderBounds",value:function(){return ub.pt(4,15).extent(ub.pt(2,25))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColumnHalo"}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:9210,end:10442})})(ub.AxisHalo);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
tb=oa.hasOwnProperty("CellGuide")&&"function"===typeof oa.CellGuide?oa.CellGuide:oa.CellGuide=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"menuItems",value:function(){var H=this,la=ub.Icon.textAttribute("check-square-o"),Fa=ub.Icon.textAttribute("square-o");la[1].textStyleClasses.push("annotation");Fa[1].textStyleClasses.push("annotation");Fa[1].paddingRight="2px";return[["Resize Policy",[[["Rigid  ",
null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?Fa:la)),function(){H.cellGroup.resize=!1}],[["Space Filling  ",null].concat($jscomp.arrayFromIterable(this.cellGroup.resize?la:Fa)),function(){H.cellGroup.resize=!0}]]],["Align at...",["center"].concat($jscomp.arrayFromIterable((new ub.Rectangle).sides),$jscomp.arrayFromIterable((new ub.Rectangle).corners)).map(function(kb){return[[kb,{paddingRight:"2px"}].concat($jscomp.arrayFromIterable(H.cellGroup.align==kb?la:Fa),["  ",null]),function(){return H.cellGroup.align=
kb}]})]].concat(this.cellGroup.morph?[["Release Morph from Cell",function(){var kb=H.cellGroup.morph;kb&&(H.world().firstHand.grab(kb),H.world().firstHand.longClickGrab=!0,kb.position=ub.pt(0))}]]:[])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGuide"}},{key:"properties",get:function(){return{cellGroup:{}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:10444,end:11722})})(ub.Morph);(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("LayoutHalo")&&"function"===typeof oa.LayoutHalo?oa.LayoutHalo:oa.LayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutHalo"}},
{key:"properties",get:function(){return{container:{},target:{},pointerId:{},halosEnabled:{defaultValue:!1},isEpiMorph:{defaultValue:!0},isHaloItem:{defaultValue:!0},borderColor:{defaultValue:ub.Color.orange},borderWidth:{defaultValue:2},styleClasses:{defaultValue:["Halo"]}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",
version:"0.1.0"}}},{start:11724,end:12137})})(ub.Morph);cd=ta("G",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("GridLayoutHalo")&&"function"===typeof oa.GridLayoutHalo?oa.GridLayoutHalo:oa.GridLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"previewDrop",value:function(H){1>H.length||(H=this.cellGuides.find(function(la){return la.fullContainsWorldPoint($world.firstHand.position)}),
H!=this.currentCell&&this.currentCell&&this.currentCell.stopPreview(),(this.currentCell=H)&&this.currentCell.startPreview())}},{key:"handleDrop",value:function(H){var la=this;this.currentCell&&H.whenRendered().then(function(){return la.currentCell.cellGroup.morph=H})}},{key:"initialize",value:function(){this.initGuides();this.alignWithTarget();this.focus()}},{key:"optionControls",value:function(){var H=this.target,la=new ub.LabeledCheckBox({name:"compensateOrigin",label:"Compensate Origin",fill:ub.Color.transparent,
checked:H.compensateOrigin}),Fa=new ub.LabeledCheckBox({label:"Resize Submorphs",fill:ub.Color.transparent,name:"fitToCell",checked:H.fitToCell});ub.connect(la,"checked",H,"compensateOrigin");ub.connect(Fa,"checked",H,"fitToCell");ub.connect(la,"checked",this,"alignWithTarget");return[la,Fa]}},{key:"isLayoutHalo",get:function(){return!1}},{key:"alignWithTarget",value:function(){this.target.apply();this.position=this.container.globalPosition;this.target.compensateOrigin&&this.moveBy(this.container.origin.negated());
this.extent=this.container.extent;this.addMissingGuides();ub.arr.reverse(this.guides).forEach(function(H){return H.alignWithTarget()})}},{key:"addMissingGuides",value:function(){var H=this;ub.arr.withoutAll(this.target.cellGroups,this.guides.map(function(la){return la.cellGroup})).forEach(function(la){return H.addMorph(H.cellGuide(la))})}},{key:"initGuides",value:function(){this.submorphs=[];this.guides=[];this.initCellGuides();this.initColumnGuides();this.initRowGuides()}},{key:"initCellGuides",
value:function(){var H=this,la=this.addMorph({fill:ub.Color.transparent,borderRadius:this.borderRadius,extent:this.extent});this.target.cellGroups.forEach(function(Fa){la.addMorph(H.cellGuide(Fa))});this.cellGuides=la.submorphs;this.addMorph(this.resizer())}},{key:"addGuide",value:function(H){H.isHaloItem=!0;this.guides.push(H);return H}},{key:"initRowGuides",value:function(){var H=this,la=this;this.addGuide(this.addMorph(new ub.Morph({width:25,fill:ub.Color.gray.withA(.7),borderRadius:15,height:this.container.height,
topRight:ub.pt(-5,0),alignWithTarget:function(){this.height=la.container.height}})));ub.arr.range(0,this.target.rowCount-1).forEach(function(Fa){H.addMorph(new ub.RowHalo({row:Fa,halo:H}))})}},{key:"initColumnGuides",value:function(){var H=this,la=this;this.addGuide(this.addMorph(new ub.Morph({height:25,fill:ub.Color.gray.withA(.7),borderRadius:15,width:this.container.width,bottomLeft:ub.pt(0,-5),alignWithTarget:function(){this.width=la.container.width}})));ub.arr.range(0,this.target.columnCount-
1).forEach(function(Fa){H.addMorph(new ub.ColumnHalo({col:Fa,halo:H}))})}},{key:"resizer",value:function(){var H=this;return this.addGuide(new ub.Morph({fill:ub.Color.transparent,extent:ub.pt(25,25),nativeCursor:"nwse-resize",onDrag:function(la){H.container.resizeBy(la.state.dragDelta);H.alignWithTarget()},alignWithTarget:function(){this.bottomRight=H.extent}}))}},{key:"cellResizer",value:function(H,la){var Fa=this,kb="topLeft"==la?"bottomRight":"topLeft";return new ub.Ellipse({borderWidth:1,visible:!1,
borderColor:ub.Color.black,nativeCursor:"nwse-resize",removeCell:function(fc){H.disconnect(fc);Fa.alignWithTarget()},addCell:function(fc){H.connect(fc);Fa.alignWithTarget()},start:function(){this.fixpointCell=H[kb];this.draggedDelta=H.bounds().partNamed(la);this.debugMorph=Fa.addMorph(new ub.Morph({fill:ub.Color.orange.withA(.5)}))},update:function(fc){var Bc=this;this.draggedDelta=this.draggedDelta.addPt(fc);var xd=ub.Rectangle.unionPts([this.draggedDelta]).union(this.fixpointCell.bounds());this.debugMorph.setBounds(xd);
Fa.cells.forEach(function(pd){var le=xd.intersection(pd.bounds()).area()/pd.bounds().area();H.includes(pd)&&.1>le&&Bc.removeCell(pd);!H.includes(pd)&&le>1/3&&Bc.addCell(pd)})},onDragEnd:function(fc){this.debugMorph.remove()},onDragStart:function(fc){this.start(fc.position)},onDrag:function(fc){this.update(fc.state.dragDelta)}})}},{key:"cellGuide",value:function(H){var la=this,Fa=this.cellResizer(H,"topLeft"),kb=this.cellResizer(H,"bottomRight");return this.addGuide(new ub.CellGuide({cellGroup:H,bounds:H.bounds(),
fill:ub.Color.transparent,borderColor:ub.Color.orange,borderWidth:1,isHaloItem:!0,isCell:!0,draggable:!1,submorphs:[Fa,kb],onMouseDown:function(fc){this.becomeActive()},deactivate:function(){this.borderColor=ub.Color.orange;this.fill=ub.Color.transparent;this.submorphs.forEach(function(fc){fc.visible=!1})},becomeActive:function(){la.guides.forEach(function(fc){fc.isCell&&fc.deactivate()});this.borderColor=ub.Color.rgbHex("#1565C0");this.fill=ub.Color.rgbHex("#1565C0").withA(.3);la.addMorph(this.remove());
this.submorphs.forEach(function(fc){fc.visible=!0})},startPreview:function(fc){this.fill=ub.Color.orange.withA(.7)},stopPreview:function(fc){this.fill=ub.Color.transparent},onDrop:function(fc){var Bc=$jscomp.makeIterator(fc.hand.grabbedMorphs).next().value;fc.hand.dropMorphsOn(la.container);H.morph=Bc},alignWithTarget:function(){H.bounds().isNonEmpty()?(this.setBounds(H.bounds()),Fa.center=this.innerBounds().topLeft(),kb.center=this.innerBounds().bottomRight()):(ub.arr.remove(la.guides,this),this.remove())}}))}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:ub.Color.transparent},cells:{derived:!0,get:function(){return ub.arr.flatten(this.target.col(0).items.map(function(H){return H.row(0).items}))}},submorphs:{initialize:function(){this.initialize()}}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:12146,end:19501})}(ub.LayoutHalo));ub.GridLayoutHalo=cd;ub.GridLayoutHalo=cd;ub.GridLayoutHalo=cd;Na=function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("TilingLayoutHalo")&&"function"===typeof oa.TilingLayoutHalo?oa.TilingLayoutHalo:oa.TilingLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ab(tb,ja,[{key:"remove",value:function(){ab._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"handleDrop",value:function(H){}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},{key:"previewDrop",value:function(H){var la=this;0<this.previews.length||(this.previews=H.map(function(Fa){return la.container.addMorph({type:ub.DropPreview,
bounds:Fa.bounds()})}),this.previews.forEach(function(Fa){Fa.step()}))}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"updateAxis",value:function(H){this.target.axis=H}},{key:"updateAlign",value:function(H){this.target.align=H}},{key:"optionControls",value:function(){var H=this.target,la=new ub.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.axis,values:["row","column"]}),Fa=new ub.DropDownSelector({borderRadius:2,padding:3,selectedValue:H.align,values:["left","center"]});
H=new ub.NumberWidget({min:0,number:H.spacing,padding:ub.rect(5,3,0,0),borderRadius:3,borderWidth:1,borderColor:ub.Color.gray,unit:"px"});ub.connect(H,"update",this,"updateSpacing");ub.connect(Fa,"update",this,"updateAlign");ub.connect(la,"update",this,"updateAxis");var kb={type:"label",padding:ub.rect(0,5,5,5),fill:ub.Color.transparent,fontColor:ub.Color.gray.darker(),readOnly:!0};return[[Object.assign({},kb,{textString:"Submorph Spacing"}),H],[Object.assign({},kb,{textString:"Tiling Align"}),Fa],
[Object.assign({},kb,{textString:"Tiling Axis"}),la]].map(function(fc){return{submorphs:fc,fill:null,layout:new ub.HorizontalLayout({spacing:3})}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayoutHalo"}},{key:"properties",get:function(){return{fill:{defaultValue:ub.Color.transparent},previews:{defaultValue:[]}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:19510,end:21708})}(ub.LayoutHalo);ub.TilingLayoutHalo=Na;ub.TilingLayoutHalo=Na;ub.TilingLayoutHalo=Na;(function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("DropPreview")&&"function"===typeof oa.DropPreview?oa.DropPreview:oa.DropPreview=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,
[{key:"clear",value:function(){this.stopped=!0;this.remove()}},{key:"step",value:function(){var H=this,la;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fa){if(1==Fa.nextAddress)return la=ub.easings.inOutQuad,Fa.yield(H.animate({opacity:.5,duration:(H.pulseDuration-10)/2,easing:la}),2);if(3!=Fa.nextAddress)return Fa.yield(H.animate({opacity:1,duration:(H.pulseDuration-10)/2,easing:la}),3);H.stopped||H.step();Fa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropPreview"}},
{key:"properties",get:function(){return{isHaloItem:{readOnly:!0,get:function(){return!0}},epiMorph:{readOnly:!0,get:function(){return!0}},fill:{defaultValue:ub.Color.orange.withA(.3)},hasFixedPosition:{defaultValue:!0},borderColor:{defaultValue:ub.Color.orange},borderWidth:{defaultValue:2},borderStyle:{defaultValue:"dashed"},pulseDuration:{defaultValue:2E3}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:21710,end:22534})})(ub.Morph);Na=ta("F",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),tb=oa.hasOwnProperty("FlexLayoutHalo")&&"function"===typeof oa.FlexLayoutHalo?oa.FlexLayoutHalo:oa.FlexLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"handleDrop",value:function(H){}},{key:"previewDrop",
value:function(H){var la=this;0<this.previews.length||(this.previews=H.map(function(Fa){return la.container.addMorph({type:ub.DropPreview,position:la.container.localize(la.world().firstHand.position),extent:Fa.bounds().extent()})}),this.previews.forEach(function(Fa){Fa.step()}))}},{key:"remove",value:function(){ab._get(Object.getPrototypeOf(tb.prototype),"remove",this).call(this);this.removePreviews();return this}},{key:"removePreviews",value:function(){this.previews.forEach(function(H){return H.clear()})}},
{key:"onDrop",value:function(H){this.removePreviews();H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateAutoResizePolicy",value:function(H){H&&(this.originalExtent=this.container.extent);this.target.autoResize=H;H||(this.container.extent=this.originalExtent||this.container.extent);this.alignWithTarget()}},{key:"updateResizeSubmorphsPolicy",value:function(H){this.target.resizeSubmorphs=H;this.alignWithTarget()}},
{key:"updateAlignmentPolicy",value:function(H){this.target.align=H}},{key:"updateDirectionPolicy",value:function(H){this.target.direction=H}},{key:"updateSpacing",value:function(H){this.target.spacing=H}},{key:"optionControls",value:function(){var H=this.target,la=H.possibleAlignValues?{fill:ub.Color.transparent,layout:new ub.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"align: "},new ub.DropDownSelector({name:"alignment",borderRadius:2,padding:3,
selectedValue:H.align,values:H.possibleAlignValues})]}:null,Fa=H.possibleDirectionValues?{fill:ub.Color.transparent,layout:new ub.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"direction: "},new ub.DropDownSelector({name:"direction",borderRadius:2,padding:3,selectedValue:H.direction,values:H.possibleDirectionValues})]}:null,kb=new ub.NumberWidget({fill:ub.Color.white,borderWidth:1,borderRadius:4,padding:ub.rect(5,4,0,0),borderColor:ub.Color.gray,
min:0,number:H.spacing,unit:"px"}),fc=new ub.LabeledCheckBox({name:"autoResize",label:"Resize Container",alignCheckBox:"right",fill:ub.Color.transparent,checked:H.autoResize});H=new ub.LabeledCheckBox({label:"Resize Submorphs",name:"resizeSubmorphs",alignCheckBox:"right",fill:ub.Color.transparent,checked:H.resizeSubmorphs});ub.connect(kb,"update",this,"updateSpacing");ub.connect(fc,"checked",this,"updateAutoResizePolicy");ub.connect(H,"checked",this,"updateResizeSubmorphsPolicy");la&&ub.connect(la.submorphs[1],
"selectedValue",this,"updateAlignmentPolicy");Fa&&ub.connect(Fa.submorphs[1],"selectedValue",this,"updateDirectionPolicy");return[fc,H].concat($jscomp.arrayFromIterable([la,Fa].filter(Boolean)),[{fill:ub.Color.transparent,layout:new ub.HorizontalLayout,submorphs:[{type:"label",value:"Submorph Spacing",fontColor:ub.Color.gray.darker(),padding:ub.rect(0,5,5,5)},kb]}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FlexLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:ub.Color.transparent},halosEnabled:{defaultValue:!1},previews:{defaultValue:[]}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:22543,end:26761})}(ub.LayoutHalo));ub.FlexLayoutHalo=Na;ub.FlexLayoutHalo=Na;ub.FlexLayoutHalo=Na;Wa=ta("c",function(ja){var oa=lively.FreezerRuntime.recorderFor("lively.halos/layout.js"),
tb=oa.hasOwnProperty("ProportionalLayoutHalo")&&"function"===typeof oa.ProportionalLayoutHalo?oa.ProportionalLayoutHalo:oa.ProportionalLayoutHalo=function(H){H&&H[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ab(tb,ja,[{key:"handleDrop",value:function(H){}},{key:"onDrop",value:function(H){H.hand.dropMorphsOn(this.container)}},{key:"alignWithTarget",value:function(){this.setBounds(this.container.globalBounds())}},{key:"updateSubmorphProportionalLayoutSettings",
value:function(H){var la={};this.target.changeSettingsFor(H.submorph,(la[H.axis]=H.policy,la),!0)}},{key:"onSubmorphSettingsDragStart",value:function(H,la){var Fa=this;H.stop();var kb=this.target.settingsFor(la);la="";for(var fc in kb)la+=fc+":"+kb[fc]+" ";var Bc=ub.morph({type:"label",value:la,isLayoutable:!1});Bc.wantsToBeDroppedOn=function(xd){return Fa.target.layoutableSubmorphs.includes(xd)};Bc.onBeingDroppedOn=function(xd,pd){Bc.remove();if(xd=Fa.target.layoutableSubmorphs.includes(pd)?pd:H.world.morphsContainingPoint(H.hand.position).find(function(le){return Fa.target.layoutableSubmorphs.includes(le)}))Fa.updateSubmorphProportionalLayoutSettings({policy:kb.x,
axis:"x",submorph:xd}),Fa.updateSubmorphProportionalLayoutSettings({policy:kb.y,axis:"y",submorph:xd}),xd.show(),$world.setStatusMessage("layout settings applied")};H.hand.grab(Bc)}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var H=this,la,Fa,kb,fc,Bc,xd,pd,le,nd,Rd,be,Ce;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hf){switch(hf.nextAddress){case 1:return la=H.target.layoutableSubmorphs,H.env.eventDispatcher.isKeyPressed("Shift")?(kb=la.map(function(Le){return{isListItem:!0,
string:String(Le),value:Le}}),hf.yield($world.listPrompt("Select morph",kb,{requester:H,onSelection:function(Le){return Le.show()}}),5)):hf.yield(ub.InteractiveMorphSelector.selectMorph(H.world(),H,function(Le){return la.includes(Le)}),4);case 4:Fa=hf.yieldResult;hf.jumpTo(3);break;case 5:fc=hf.yieldResult,Bc=$jscomp.makeIterator(fc.selected),Fa=Bc.next().value;case 3:if(!Fa)return hf.return();xd=H.state.popover.get("controlContainer");pd=xd.getAllNamed(/submorph config/);le=["move","resize","scale",
"fixed"];nd=H.target.settingsFor(Fa);pd.length||(xd.submorphs=[].concat($jscomp.arrayFromIterable(xd.submorphs),[{name:"submorph config X-Axis policy",position:ub.pt(0,H.height),fill:ub.Color.transparent,layout:new ub.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph X-Axis policy: "},new ub.DropDownSelector({name:"x-axis policy selector",borderRadius:2,padding:3,selectedValue:nd.x,values:le})]},{name:"submorph config Y-Axis policy",position:ub.pt(0,
H.height),fill:ub.Color.transparent,layout:new ub.HorizontalLayout({spacing:3,direction:"centered",align:"center"}),submorphs:[{type:"label",value:"submorph Y-Axis policy: "},new ub.DropDownSelector({name:"y-axis policy selector",borderRadius:2,padding:3,selectedValue:nd.y,values:le})]},ub.morph({position:ub.pt(0,H.height+20),draggable:!0,name:"dragme",type:"label",value:"drag me to copy"})]));Rd=xd.getSubmorphNamed("x-axis policy selector");be=xd.getSubmorphNamed("y-axis policy selector");Ce=xd.getSubmorphNamed("dragme");
ub.disconnect(Rd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");ub.disconnect(be,"selectedValue",H,"updateSubmorphProportionalLayoutSettings");Rd.selectedValue=nd.x;be.selectedValue=nd.y;ub.connect(Ce,"onDragStart",H,"onSubmorphSettingsDragStart",{updater:function(Le,pc){return Le(pc,Fa)},varMapping:{submorph:Fa}});ub.connect(Rd,"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Le){return{policy:Le,axis:"x",submorph:Fa}},varMapping:{submorph:Fa}});ub.connect(be,
"selectedValue",H,"updateSubmorphProportionalLayoutSettings",{converter:function(Le){return{policy:Le,axis:"y",submorph:Fa}},varMapping:{submorph:Fa}});hf.jumpToEnd()}})}},{key:"optionControls",value:function(H){this.state.popover=H;var la=this.target;H=new ub.LabeledCheckBox({name:"x-axis",label:"X-Axis",alignCheckBox:"right",fill:ub.Color.transparent,checked:la.xAxisEnabled});la=new ub.LabeledCheckBox({name:"y-axis",label:"Y-Axis",alignCheckBox:"right",fill:ub.Color.transparent,checked:la.yAxisEnabled});
var Fa=new ub.Button({name:"modify submorph settings button",label:[].concat($jscomp.arrayFromIterable(ub.Icon.textAttribute("crosshairs")),["\u00a0Change submorph settings"])});ub.connect(H,"checked",this,"updateXAxisEnabled");ub.connect(la,"checked",this,"updateYAxisEnabled");ub.connect(Fa,"fire",this,"chooseSubmorphToChangeLayoutSettings");return[Fa]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayoutHalo"}},{key:"properties",get:function(){return{reactsToPointer:{defaultValue:!1},
fill:{defaultValue:ub.Color.transparent}}}}],oa,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.halos",version:"0.1.0"}}},{start:26771,end:32465})}(ub.LayoutHalo));ub.ProportionalLayoutHalo=Wa;ub.ProportionalLayoutHalo=Wa;ub.ProportionalLayoutHalo=Wa;Sc=lively.FreezerRuntime.recorderFor("lively.halos/index.js");Sc.Halo=jd;
Sc.MorphHighlighter=Kc;Sc.InteractiveMorphSelector=zc;Sc.StatusMessage=Yb;Sc.StatusMessageForMorph=Ec;Sc.show=ya;Sc.showConnector=Gb;Sc.ProportionalLayoutHalo=Wa;Sc.GridLayoutHalo=cd;Sc.FlexLayoutHalo=Na;Sc.showAndSnapToGuides=V;Sc.removeSnapToGuidesOf=I;Sc.StatusMessage=Yb;Sc.StatusMessage=Yb;Sc.StatusMessageForMorph=Ec;Sc.StatusMessageForMorph=Ec;Sc.show=ya;Sc.show=ya;Sc.showConnector=Gb;Sc.showConnector=Gb;Sc.Halo=jd;Sc.Halo=jd;Sc.MorphHighlighter=Kc;Sc.MorphHighlighter=Kc;Sc.InteractiveMorphSelector=
zc;Sc.InteractiveMorphSelector=zc;Sc.ProportionalLayoutHalo=Wa;Sc.ProportionalLayoutHalo=Wa;Sc.GridLayoutHalo=cd;Sc.GridLayoutHalo=cd;Sc.FlexLayoutHalo=Na;Sc.FlexLayoutHalo=Na;Sc.showAndSnapToGuides=V;Sc.showAndSnapToGuides=V;Sc.removeSnapToGuidesOf=I;Sc.removeSnapToGuidesOf=I;jd=Object.freeze({__proto__:null,StatusMessage:Yb,StatusMessageForMorph:Ec,show:ya,showConnector:Gb,Halo:jd,MorphHighlighter:Kc,InteractiveMorphSelector:zc,ProportionalLayoutHalo:Wa,GridLayoutHalo:cd,FlexLayoutHalo:Na,showAndSnapToGuides:V,
removeSnapToGuidesOf:I,SvgStyleHalo:void 0});ta("i",jd);ta("_",void 0)}}});