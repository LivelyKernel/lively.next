System.register("./__rootModule___commonjs-entry-71573ff5.js ./index-d18accbd.js ./index-ca98f65e.js ./loading-indicator.cp-b18e3b89.js ./index-c79abca0.js ./messages.cp-7a7411e4.js ./index-5053c530.js ./code-search.cp-0ec09b89.js ./list.cp-8569fe93.js ./user-ui-0154f489.js ./popups.cp-68dc8a4a.js lively.collab @babel/plugin-syntax-import-meta ./tooltips.cp-6a2406c0.js ./value-widgets-6cb12552.js rollup @rollup/plugin-json ./editor-plugin-0a8dd45b.js ./ui.cp-6289a670.js ./index-1c08552a.js ./interface-dc23a2c8.js ./editor-modes-5e094c88.js ./helpers-ae531c72.js @rollup/plugin-commonjs rollup-plugin-polyfill-node ./service-worker-8e670339.js ./object-classes-c0823978.js".split(" "),function(Lc,
pd){var Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,Xb,Nb,bc,hb,cb,Hb,ec,ub,yb,ba,wb,Xa,Za,Sb,Cb,Da,zb,db,ib,Ea,W,T,ia,ka,K,ya,pb,La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub,vc,Oc,aa,Ma,qb,Vb,Lb,Kb,Db,Ra,N,va,Wa,pa,tb,ab,Ob,yc,Ta,Bd,Eb,fe,Od,Hd,Qc,Xd,oc,rf,Dd,ld,Td;return{setters:[function(gb){Nd=gb.a$;Tc=gb._;Jc=gb.o;$d=gb.e;Bb=gb.t;rd=gb.q;Id=gb.W;Ac=gb.a;Pc=gb.H;gd=gb.J;nd=gb.M;Fd=gb.I;ic=gb.T;vd=gb.L;sb=gb.aZ;Xb=gb.S;Nb=gb.c;bc=gb.p;hb=gb.w;cb=gb.C;Hb=gb.K;ec=gb.r;ub=gb.b;yb=gb.j;ba=gb.d;wb=gb.f;Xa=gb.aq;
Za=gb.b8;Sb=gb.k;Cb=gb.i;Da=gb.x;zb=gb.G;db=gb.y;ib=gb.R;Ea=gb.F;W=gb.l;T=gb.B;ia=gb.b9;ka=gb.m;K=gb.A;ya=gb.b1;pb=gb.ba;La=gb.bb;eb=gb.bc;jb=gb.a3;E=gb.v;Wb=gb.D;R=gb.z;xb=gb.g;Ja=gb.aG;Ga=gb.O;sa=gb.a2;Ub=gb.bd;vc=gb.a8;Oc=gb.b7;aa=gb.be},function(gb){Ma=gb.G;qb=gb.R;Vb=gb.P;Lb=gb.e;Kb=gb.p;Db=gb.W;Ra=gb.M},function(gb){N=gb.m;va=gb.B},function(gb){Wa=gb.L},function(gb){pa=gb.s;tb=gb.a;ab=gb.r;Ob=gb.H;yc=gb.M;Ta=gb.P;Bd=gb.G;Eb=gb.F},function(gb){fe=gb.StatusMessageDefault;Od=gb.StatusMessageConfirm;
Hd=gb.StatusMessageError},function(gb){Qc=gb.i},function(gb){Xd=gb.C},function(gb){oc=gb.c},function(gb){rf=gb.UserUI},function(gb){Dd=gb.b;ld=gb.c},function(gb){Td=gb.CommentData},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function gb(){}function Vc(fd,ua,Ab){return vb.apply(this,arguments)}function vb(){vb=Tc(regeneratorRuntime.mark(function za(ua,
Ab,Fa){var Ka;return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:if(!Ab.startsWith("image/")){Ib.next=5;break}Ib.next=3;return cc.fileReadAsDataURL(ua);case 3:return Ka=Ib.sent,Ib.abrupt("return",new cc.Image({imageUrl:Ka,autoResize:!0,name:ua.name}));case 5:return Ib.abrupt("return",null);case 6:case "end":return Ib.stop()}},za)}));return vb.apply(this,arguments)}var cc=window.lively.FreezerRuntime.recorderFor("lively.morphic/events/html-drop-handler.js");cc.uploadItem=
gb;cc.uploadFile=Vc;cc.fileReadAsDataURL=function(fd){return new Promise(function(ua,Ab){Ab=new FileReader;Ab.onload=function(Fa){return ua(Fa.target.result)};Ab.readAsDataURL(fd)})};cc.Image=Nd;cc.uploadItem=gb;cc.uploadFile=Vc;var ob=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js");ob.InputLine=Jc;ob.easings=$d;ob.touchInputDevice=Bb;ob.morph=rd;ob.World=Id;ob.MorphicDB=Ac;ob.HorizontalLayout=Pc;ob.Image=Nd;ob.HTMLMorph=gd;ob.Morph=nd;ob.Icon=Fd;ob.TilingLayout=
ic;ob.Label=vd;ob.ProportionalLayout=sb;ob.ShadowObject=Xb;ob.component=Nb;ob.part=bc;ob.connect=hb;ob.moduleManager=N;ob.Color=cb;ob.LinearGradient=Hb;ob.rect=ec;ob.pt=ub;ob.arr=yb;ob.promise=ba;ob.fun=wb;ob.graph=Xa;ob.date=Za;ob.string=Sb;ob.GreenButton=Ma;ob.RedButton=qb;ob.PlainButton=Vb;ob.DropDownList=oc;ob.MorphList=Lb;ob.LoadingIndicator=Wa;ob.UserUI=rf;ob.Spinner=Dd;ob.SystemList=ld;ob.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
ob.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js"),Ab=ua.hasOwnProperty("WorldVersion")&&"function"===typeof ua.WorldVersion?ua.WorldVersion:ua.WorldVersion=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,[{key:"update",value:function(){var Fa=Da(this.submorphs,2),za=Fa[1];Fa[0].imageUrl=this.commit.preview||ob.missingSVG;za.textAndAttributes=
this.info;za.fontColor=this.selected?ob.Color.white:ob.Color.darkGray}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:ob.Color.transparent},info:{derived:!0,get:function(){var Fa=this.commit,za=Fa.message,Ka=Fa.name,Ib=Fa.timestamp;return["".concat(Fa._id.slice(0,6)," "),{fontWeight:"bold"},"".concat(ob.string.truncate(za.split("\n")[0],40)," "),{}," (".concat(Ka," "),{},"".concat(ob.date.format(new Date(Ib),
"yyyy-mm-dd HH:MM Z")),{}]}},selected:{set:function(Fa){this.setProperty("selected",Fa);this.update()}},layout:{initialize:function(){this.layout=new ob.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:ob.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"IBM Plex Sans",fontColor:ob.Color.gray}]}}}}}],ua,{pathInPackage:function(){return"./studio/world-browser.cp.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1908,end:3486})})(ob.Morph);var ac=function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js"),Ab=ua.hasOwnProperty("WorldVersionViewer")&&"function"===typeof ua.WorldVersionViewer?ua.WorldVersionViewer:ua.WorldVersionViewer=function(Fa){if(!Fa||
!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(Fa){switch(Fa.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var Fa=
Tc(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb,da,wa,ca;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:Ib=this.get("version list").selection;C=ob.LoadingIndicator.open("Loading ".concat(Ib.name,"..."));Pb=$world;da=this.db||ob.MorphicDB["default"];wa=Ib._id;ma.prev=5;if(!wa){ma.next=12;break}ma.next=9;return ob.World.loadFromCommit(wa,void 0,{morphicDB:da});case 9:ma.t0=ma.sent;ma.next=15;break;case 12:return ma.next=14,ob.World.loadFromDB(Ib.name,Ib.ref,void 0,
{morphicDB:da});case 14:ma.t0=ma.sent;case 15:return ca=ma.t0,ma.abrupt("return",ca);case 19:ma.prev=19,ma.t1=ma["catch"](5),console.error(ma.t1),Pb.showError("Error loading world:"+ma.t1);case 23:return ma.prev=23,C.remove(),ma.finish(23);case 26:case "end":return ma.stop()}},Ka,this,[[5,19,23,26]])}));return function(){return Fa.apply(this,arguments)}}()},{key:"revertToSelectedCommit",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb,da,wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:if(Ib=this.get("version list").selection){ca.next=3;break}return ca.abrupt("return");case 3:return C=this.db||ob.MorphicDB["default"],Pb=Ib._id,da=Ib.name,wa=Ib.type,ca.next=7,C.revert(wa,da,Pb,"HEAD");case 7:return ca.abrupt("return",this.initializeFromStartCommit(Ib,C,{showRevertButton:!0}));case 8:case "end":return ca.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"initializeFromStartCommit",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ib(Ka){var C,
Pb,da,wa,ca,ma,u,O,P,fa,Qa,Ua,Gb,ta,mc,pc,zd,Pd,bd,Yd,le,Be,Ne,Re,nf,af=arguments;return regeneratorRuntime.wrap(function(yf){for(;;)switch(yf.prev=yf.next){case 0:return C=1<af.length&&void 0!==af[1]?af[1]:ob.MorphicDB["default"],Pb=2<af.length&&void 0!==af[2]?af[2]:{},da=Pb.showRefs,wa=void 0===da?!0:da,ca=this.startCommit=Ka,ma=ca._id,u=ca.type,O=ca.name,P=this.getSubmorphNamed("version list spinner"),P.visible=!0,P.center=this.get("version list").center,this.db=C,yf.next=10,C.history(u,O);case 10:fa=
yf.sent,Qa=fa.refs,Ua=fa.history,Gb=ma,ta=ob.graph.invert(Ua),mc=ob.graph.hull(ta,ma),pc={_id:!0},zd=[Ka],Pd=zb(mc),yf.prev=19,Pd.s();case 21:if((bd=Pd.n()).done){yf.next=30;break}Yd=bd.value;yf.next=25;return C.log(Yd,void 0,!0,pc);case 25:le=yf.sent,zd.push.apply(zd,db(le)),le.forEach(function(Ig){return pc[Ig._id]=!0});case 28:yf.next=21;break;case 30:yf.next=35;break;case 32:yf.prev=32,yf.t0=yf["catch"](19),Pd.e(yf.t0);case 35:return yf.prev=35,Pd.f(),yf.finish(35);case 38:return Be=ob.arr.max(zd,
function(Ig){return Ig.timestamp}),Gb=Be._id,yf.next=42,C.log(Gb,void 0,!0);case 42:Ne=yf.sent;if(wa)for(Re in Qa);nf=Ne.map(function(Ig){var re=new ob.WorldVersion({reactsToPointer:!1,commit:Ig});re.update();return{isListItem:!0,morph:re,value:Ig}});this.get("version list").items=nf;P.visible=!1;case 50:case "end":return yf.stop()}},Ib,this,[[19,32,35,38]])}));return function(Ka){return Fa.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],
ua,{pathInPackage:function(){return"./studio/world-browser.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:3503,end:7492})}(ob.Morph);(function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js"),Ab=ua.hasOwnProperty("TitleWrapper")&&"function"===typeof ua.TitleWrapper?ua.TitleWrapper:
ua.TitleWrapper=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,[{key:"startMovingRight",value:function(){var Fa=this;this.animate({customTween:function(za){Fa._hoverDelta=za}})}},{key:"stopMovingRight",value:function(){var Fa=this;this.animate({customTween:function(za){Fa._hoverDelta=1-za}})}},{key:"startMovingLeft",value:function(){var Fa=this;this.animate({customTween:function(za){Fa._hoverDelta=
-za}})}},{key:"stopMovingLeft",value:function(){var Fa=this;this.animate({customTween:function(za){Fa._hoverDelta=-1+za}})}},{key:"startOnce",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ib(Ka){return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!this._fn){C.next=2;break}return C.abrupt("return");case 2:return this._fn=Ka,C.next=5,Ka();case 5:this._fn=null;case 6:case "end":return C.stop()}},Ib,this)}));return function(Ka){return Fa.apply(this,arguments)}}()},
{key:"updateTitle",value:function(){var Fa=this;if(this.title){var za=Da(this.submorphs,1)[0];za.left+=this._hoverDelta;za.right<this.width-20&&-1===this._hoverDelta?this.startOnce(Tc(regeneratorRuntime.mark(function Ib(){return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Fa.stopMovingLeft();case 2:return C.next=4,Fa.startMovingRight();case 4:case "end":return C.stop()}},Ib)}))):20<za.left&&1===this._hoverDelta&&this.startOnce(Tc(regeneratorRuntime.mark(function C(){return regeneratorRuntime.wrap(function(Pb){for(;;)switch(Pb.prev=
Pb.next){case 0:return Pb.next=2,Fa.stopMovingRight();case 2:return Pb.next=4,Fa.startMovingLeft();case 4:case "end":return Pb.stop()}},C)})))}}},{key:"startShowingFullTitle",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C;return regeneratorRuntime.wrap(function(Pb){for(;;)switch(Pb.prev=Pb.next){case 0:if(this.title){Pb.next=2;break}return Pb.abrupt("return");case 2:return Ib=Da(this.submorphs,1),C=Ib[0],C.textString=this.title,Pb.next=6,C.whenRendered();case 6:this._hoverDelta=
0,this.startStepping("updateTitle"),C.right>this.width&&this.startMovingLeft();case 9:case "end":return Pb.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"stopShowingFullTitle",value:function(){if(this.title){var Fa=this.submorphs[0];Fa.textString=ob.string.truncate(this.title,18,"...");this.stopStepping("updateTitle");this._hoverDelta=0;Fa.left=0}}},{key:"onHoverIn",value:function(Fa){Cb._get(Object.getPrototypeOf(Ab.prototype),"onHoverIn",this).call(this,Fa);this.startShowingFullTitle()}},
{key:"onHoverOut",value:function(Fa){Cb._get(Object.getPrototypeOf(Ab.prototype),"onHoverOut",this).call(this,Fa);this.stopShowingFullTitle()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TitleWrapper"}},{key:"properties",get:function(){return{title:{derived:!0,set:function(Fa){this.setProperty("title",Fa);Fa&&(this.submorphs[0].textString=ob.string.truncate(Fa,18,"..."))}}}}}],ua,{pathInPackage:function(){return"./studio/world-browser.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:7494,end:9715})})(ob.Morph);(function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js"),Ab=ua.hasOwnProperty("StaticText")&&"function"===typeof ua.StaticText?ua.StaticText:ua.StaticText=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Cb(Ab,fd,[{key:"refresh",value:function(){this.html='<span style="line-height: 1.3; font-size: '.concat(this.fontSize,"px; color: ").concat(this.fontColor,"; font-family: ").concat(this.fontFamily,'">').concat(this.value,"</span>")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"StaticText"}},{key:"properties",get:function(){return{html:{isStyleProp:!1},fontSize:{type:"Number",set:function(Fa){this.setProperty("fontSize",Fa);this.refresh()}},fontColor:{type:"Color",
set:function(Fa){this.setProperty("fontColor",Fa);this.refresh()}},fontFamily:{type:"Enum",set:function(Fa){this.setProperty("fontFamily",Fa);this.refresh()}},value:{set:function(Fa){this.setProperty("value",Fa);this.refresh()}}}}}],ua,{pathInPackage:function(){return"./studio/world-browser.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:9717,end:10605})})(ob.HTMLMorph);(function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js"),Ab=ua.hasOwnProperty("SearchInputLine")&&"function"===typeof ua.SearchInputLine?ua.SearchInputLine:ua.SearchInputLine=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,[{key:"fuzzyMatch",value:function(Fa){var za=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:this.parseInput();if(za.lowercasedTokens.every(function(Ib){return Fa.toLowerCase().includes(Ib)}))return!0;var Ka=Fa.toLowerCase();return 3>=ob.arr.sum(za.lowercasedTokens.map(function(Ib){return ob.string.levenshtein(Ka,Ib)}))}},{key:"fuzzyFilter",value:function(Fa){var za=this,Ka=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(C){return C},Ib=this.parseInput();return Fa.filter(function(C){return za.fuzzyMatch(Ka(C),Ib)})}},{key:"parseInput",value:function(){var Fa=
Array.from(this.textString).reduce(function(Ka,Ib){if("\\"===Ib&&!Ka.escaped)return Ka.escaped=!0,Ka;" "!==Ib||Ka.escaped?(Ka.spaceSeen=!1,Ka.current+=Ib):(!Ka.spaceSeen&&Ka.current&&(Ka.tokens.push(Ka.current),Ka.current=""),Ka.spaceSeen=!0);Ka.escaped=!1;return Ka},{tokens:[],current:"",escaped:!1,spaceSeen:!1});Fa.current&&Fa.tokens.push(Fa.current);var za=Fa.tokens.map(function(Ka){return Ka.toLowerCase()});return{tokens:Fa.tokens,lowercasedTokens:za}}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"SearchInputLine"}}],ua,{pathInPackage:function(){return"./studio/world-browser.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:10607,end:12093})})(ob.InputLine);(function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js"),Ab=ua.hasOwnProperty("WorldDashboard")&&"function"===
typeof ua.WorldDashboard?ua.WorldDashboard:ua.WorldDashboard=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,[{key:"onLoad",value:function(){if(!this.isComponent&&"undefined"!==typeof localStorage){var Fa=localStorage.getItem("lively.morphic-projects-filter");Fa&&this.ui.sortSelector.selection!==Fa&&(this.ui.sortSelector.selection=Fa);this.initConnections()}}},{key:"initConnections",
value:function(){var Fa=this.ui,za=Fa.searchField,Ka=Fa.newProjectButton;ob.connect(Fa.sortSelector.viewModel,"selection",this,"update");ob.connect(za,"inputChanged",this,"updateList");ob.connect(Ka,"onMouseDown",this,"createNewProject")}},{key:"onMouseDown",value:function(Fa){Cb._get(Object.getPrototypeOf(Ab.prototype),"onMouseDown",this).call(this,Fa);Fa.targetMorph===this.ui.closeButton&&this.remove()}},{key:"focus",value:function(){this.ui.searchField.focus()}},{key:"update",value:function(){this.displayWorlds();
if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-projects-filter",this.ui.sortSelector.selection)}catch(Fa){console.error(Fa)}}},{key:"beforePublish",value:function(){this.reset()}},{key:"reset",value:function(){this.ui.worldList.items=[];this.ui.noWorldWarning.visible=!1}},{key:"relayout",value:function(){this.alignInWorld()}},{key:"alignInWorld",value:function(){var Fa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$world;this.owner!==Fa&&Fa.addMorph(this);this.center=
Fa.visibleBounds().center()}},{key:"sortAndFilterPreviews",value:function(Fa){var za=ob.UserUI.getCurrentUser();Fa=this.ui.searchField.fuzzyFilter(Fa,function(Ka){return Ka._commit.name+Ka._commit.description});switch(this.ui.sortSelector.selection){case "RECENT":return ob.arr.sortBy(Fa,function(Ka){return-Ka._commit.timestamp});case "TEMPLATES":return Fa;case "MY PROJECTS":return Fa.filter(function(Ka){return Ka._commit.author.name===za.name});case "PUBLISHED":return Fa}}},{key:"updateList",value:function(){var Fa=
this;this.previews&&ob.fun.debounceNamed("update world list",150,function(){Fa.ui.worldList.items=Fa.sortAndFilterPreviews(Fa.previews)})()}},{key:"displayWorlds",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C;return regeneratorRuntime.wrap(function(Pb){for(;;)switch(Pb.prev=Pb.next){case 0:return this.reset(),Ib=this.ui.loadingIndicator,Ib.animate({opacity:1,duration:300}),Pb.next=5,this.db.latestCommits("world");case 5:return C=Pb.sent,this.previews=C.map(function(da){var wa=
ob.part(ob.Placeholder);wa._commit=da;wa.displayPreview=Tc(regeneratorRuntime.mark(function ma(){var u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return u=ob.part(ob.WorldPreviewTile),u.dropShadow=null,u._commit=da,u.opacity=0,wa.addMorph(u),u.displayPreview(),u.position=ob.pt(0,0),O.next=9,wa.whenRendered();case 9:wa.layout=new ob.HorizontalLayout({autoResize:!0,reactToSubmorphAnimations:!0});case 10:case "end":return O.stop()}},ma)}));return wa}),Pb.next=9,Ib.animate({opacity:0,
duration:300});case 9:this.updateList(),0===C.length&&(this.ui.noWorldWarning.center=this.innerBounds().center(),this.ui.noWorldWarning.animate({visible:!0,duration:300}));case 11:case "end":return Pb.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"createNewProject",value:function(){document.location="/worlds/load?name=__newWorld__"}},{key:"allFontsLoaded",value:function(){return this.ui.newProjectButton.submorphs[0].whenFontLoaded()}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"WorldDashboard"}},{key:"properties",get:function(){return{showCloseButton:{derived:!0,get:function(){return this.ui.closeButton.visible},set:function(Fa){this.ui.closeButton.visible=Fa}},db:{serialize:!1,get:function(){return ob.MorphicDB["default"]}},ui:{derived:!0,get:function(){return{worldList:this.getSubmorphNamed("world list"),sortSelector:this.getSubmorphNamed("search selector"),searchField:this.getSubmorphNamed("search field"),closeButton:this.getSubmorphNamed("close button"),
loadingIndicator:this.getSubmorphNamed("loading indicator"),noWorldWarning:this.getSubmorphNamed("no world warning"),newProjectButton:this.getSubmorphNamed("new project button")}}}}}}],ua,{pathInPackage:function(){return"./studio/world-browser.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:12095,end:16817})})(ob.Morph);(function(fd){var ua=
window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js"),Ab=ua.hasOwnProperty("GrowingWorldList")&&"function"===typeof ua.GrowingWorldList?ua.GrowingWorldList:ua.GrowingWorldList=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,[{key:"onLoad",value:function(){this.clipMode="auto"}},{key:"onScroll",value:function(Fa){Cb._get(Object.getPrototypeOf(Ab.prototype),
"onScroll",this).call(this,Fa);this.update()}},{key:"onChange",value:function(Fa){Cb._get(Object.getPrototypeOf(Ab.prototype),"onChange",this).call(this,Fa);"extent"===Fa.prop&&this.update(!0)}},{key:"onHoverIn",value:function(Fa){this.clipMode="auto"}},{key:"onHoverOut",value:function(Fa){ob.touchInputDevice||(this.clipMode="hidden")}},{key:"update",value:function(Fa){var za=this.items;if(za&&0!==za.length){var Ka=this.scrollContainer,Ib=Ka.layout.spacing;Ka.extent=this.extent;var C=this.ui,Pb=C.bufferTop;
C=C.bufferBottom;Pb=Pb||Ka.addMorph({fill:null,name:"buffer top",height:10});C=C||Ka.addMorph({fill:null,name:"buffer bottom",height:10});Pb.width=C.width=this.width-100;Ka.layout.disable();var da=za[0];Ib=za.slice(0,Math.floor(this.width/(da.width+Ib))*(Math.ceil((this.scroll.y+this.height)/(da.height+Ib))+1)).filter(function(u){return u.owner!==Ka});var wa=this.scroll.y+2*this.height;da=zb(Ib);var ca;try{var ma=function(){var u=ca.value;wa++;u.top=wa;Ka.addMorph(u);u._initialized||u.whenRendered().then(Tc(regeneratorRuntime.mark(function P(){return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=
fa.next){case 0:return u._initialized=!0,fa.next=3,u.displayPreview();case 3:case "end":return fa.stop()}},P)})))};for(da.s();!(ca=da.n()).done;)ma()}catch(u){da.e(u)}finally{da.f()}Fa&&(Pb.position=ob.pt(0,0),za.forEach(function(u,O){return u.position=ob.pt(O+1,O+1)}),C.position=ob.pt(za.length+2,za.length+2));Ka.layout.enable();if(Fa||0<Ib.length)C.top=this.submorphBounds().height,Ka.layout.apply()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"GrowingWorldList"}},{key:"properties",
get:function(){return{scrollContainer:{get:function(){return this.getSubmorphNamed("scroll container")||this.addMorph({name:"scroll container",fill:null,reactsToPointer:!1,renderOnGPU:!0,layout:new ob.TilingLayout({spacing:25,align:"center",autoResize:!0})})}},ui:{get:function(){return{bufferTop:this.getSubmorphNamed("buffer top"),bufferBottom:this.getSubmorphNamed("buffer bottom")}}},items:{after:["layout","scrollContainer"],set:function(Fa){this.setProperty("items",Fa);var za=this.scrollContainer;
za.layout&&za.layout.disable();var Ka=this.ui,Ib=Ka.bufferTop;Ka=Ka.bufferBottom;ob.arr.withoutAll(za.submorphs,[].concat(db(Fa),[Ib,Ka])).forEach(function(C){return C.remove()});this.update(!0)}}}}}],ua,{pathInPackage:function(){return"./studio/world-browser.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:16819,end:20521})})(ob.Morph);
var ae=function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/studio/world-browser.cp.js"),Ab=ua.hasOwnProperty("WorldPreview")&&"function"===typeof ua.WorldPreview?ua.WorldPreview:ua.WorldPreview=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=
!1}},{key:"displayPreview",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return Ib.next=2,this.initWithCommit(this._commit);case 2:case "end":return Ib.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"initWithCommit",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ib(Ka){var C,Pb,da,wa,ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=
O.next){case 0:return C=this.ui,Pb=C.preview,da=C.timestamp,wa=C.title,ca=C.description,ma=C.previewContainer,this.opacity=.5,ma.opacity=0,O.next=5,this.whenRendered();case 5:return this._commit=Ka,Pb.imageUrl=Ka.preview||ob.missingSVG,u=Ka.author.name,u=u.startsWith("guest-")?"guest":u,da.value=[u,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},ob.date.format(Ka.timestamp," - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],wa.title=Ka.name,ca.value=Ka.description,O.next=14,this.whenRendered();
case 14:ma.opacity=1,this.animate({opacity:1,duration:300});case 16:case "end":return O.stop()}},Ib,this)}));return function(Ka){return Fa.apply(this,arguments)}}()},{key:"openAnimated",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb=arguments;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return Ib=0<Pb.length&&void 0!==Pb[0]?Pb[0]:$world.visibleBounds(),C=ob.morph(Object.assign({},this.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[this.ui.spinner.spec()]})).openInWorld(),
C.hasFixedPosition=!0,C.globalPosition=this.globalPosition,C.opacity=0,da.next=7,C.whenRendered();case 7:return da.next=9,C.animate({opacity:1,duration:300});case 9:return C.dropShadow=!1,C.animate({bounds:Ib,borderRadius:0,duration:500,easing:ob.easings.inOutQuint}),C.respondsToVisibleWindow=!0,da.next=15,C.ui.spinner.animate({center:C.innerBounds().center(),easing:ob.easings.inOutQuint,duration:500});case 15:return da.abrupt("return",C);case 16:case "end":return da.stop()}},Ka,this)}));return function(){return Fa.apply(this,
arguments)}}()},{key:"openWorld",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return Ib.next=2,this.openAnimated();case 2:this.loadWorld();case 3:case "end":return Ib.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"loadWorld",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb,da,wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=
ca.next){case 0:Ib=this._commit;C=Ib._id;Pb=Ib.name;if(!lively.FreezerRuntime){ca.next=6;break}da=ob.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3});this.transitionToLivelyWorld(document.location.origin,this._commit,da);ca.next=10;break;case 6:return wa=ob.LoadingIndicator.open("loading "+Pb),ca.next=9,ob.World.loadFromCommit(C,void 0,{morphicDB:ob.MorphicDB["default"],moduleManager:ob.moduleManager});case 9:wa.remove();case 10:case "end":return ca.stop()}},Ka,this)}));
return function(){return Fa.apply(this,arguments)}}()},{key:"transitionToLivelyWorld",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Pb(Ka,Ib,C){var da,wa,ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,pd.import("./bootstrap-17e87dea.js");case 2:return da=O.sent,wa=da.bootstrap,O.next=6,pd.import("./loading-screen.cp-8b7813c4.js");case 6:return ca=O.sent,ma=ca.ProgressIndicator,u=ob.part(ma,{opacity:0,hasFixedPosition:!0}).openInWorld(),
u.startStepping("updateProgressBar"),O.next=12,wa({commit:Ib,loadingIndicator:C,progress:u});case 12:case "end":return O.stop()}},Pb)}));return function(Ka,Ib,C){return Fa.apply(this,arguments)}}()},{key:"showVersions",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return Ib=ob.easings.inOutExpo,C=this.ui.previewContainer,Pb=ob.part(ob.VersionContainer,{name:"version container",position:ob.pt(0,
0)}),this.addMorph(Pb),Pb.reactsToPointer=Pb.visible=!0,Pb.initializeFromStartCommit(this._commit),this.animate({width:515,duration:200,easing:Ib}),C.animate({opacity:0,duration:200}),da.next=11,Pb.animate({opacity:1,duration:200});case 11:C.reactsToPointer=C.visible=!1;case 12:case "end":return da.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"hideVersions",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb,da;return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=
wa.next){case 0:return Ib=ob.easings.inOutExpo,C=this.ui,Pb=C.previewContainer,da=C.versionContainer,Pb.reactsToPointer=Pb.visible=!0,this.animate({width:245,duration:200,easing:Ib}),Pb.animate({opacity:1,duration:200}),wa.next=8,da.animate({opacity:0,duration:200});case 8:da.reset(),da.remove();case 10:case "end":return wa.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"toggleDeleteButton",value:function(Fa){this.ui.deleteButton.visible=Fa}},{key:"onHoverIn",value:function(Fa){this.toggleDeleteButton(!0)}},
{key:"onHoverOut",value:function(Fa){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,$world.confirm(["Delete World\n",{},"Do you really want to remove this world from the database? This step can not be undone.",{fontWeight:"normal",fontSize:16}]);case 2:Ib=C.sent;if(!Ib){C.next=6;break}C.next=6;return this.confirmDelete();case 6:case "end":return C.stop()}},
Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"confirmDelete",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return Ib.next=2,ob.MorphicDB["default"].commit(Object.assign({},this._commit,{content:void 0,snapshot:null}));case 2:this.isComponent||this.owner.isWorld||this.owner.remove();case 3:case "end":return Ib.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},
{key:"onMouseUp",value:function(Fa){var za=this.ui,Ka=za.openButton,Ib=za.versionButton,C=za.deleteButton,Pb=za.closeVersionsButton,da=za.cancelDeleteButton;za=za.confirmDeleteButton;switch(Fa.targetMorph){case Ka:this.openWorld();break;case Ib:this.showVersions();break;case C:this.tryToDelete();break;case Pb:this.hideVersions();break;case za:this.confirmDelete();break;case da:this.cancelDelete()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"WorldPreview"}},{key:"properties",
get:function(){return{ui:{readOnly:!0,get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title wrapper"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),
deleteButton:this.getSubmorphNamed("delete button"),closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],ua,{pathInPackage:function(){return"./studio/world-browser.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:20530,end:27672})}(ob.Morph);ob.WorldPreview=ae;ob.WorldPreview=ae;ob.Placeholder=ob.component["for"](function(){return ob.component({reactsToPointer:!1,fill:ob.Color.transparent,clipMode:"hidden",dropShadow:new ob.ShadowObject({distance:20,rotation:75,color:ob.Color.rgba(0,0,0,.11),blur:50}),extent:ob.pt(245,368.2)})},{module:"lively.ide/studio/world-browser.cp.js",
"export":"Placeholder",range:{start:27679,end:27933}},ob.Placeholder);ob.VersionContainer=ob.component["for"](function(){return ob.component({type:ob.WorldVersionViewer,name:"version container",draggable:!0,extent:ob.pt(515.7,365.6),fill:ob.Color.rgb(253,254,254),grabbable:!0,position:ob.pt(1472.2,114.6),submorphs:[{type:ob.MorphList,name:"version list",clipMode:"hidden",master:ob.SystemList,extent:ob.pt(475.6,285),itemHeight:45,padding:ob.rect(1,1,0,-1),position:ob.pt(20.1,16.8),touchInput:!1},ob.part(ob.Spinner,
{name:"version list spinner",extent:ob.pt(55.3,66.9),position:ob.pt(244,166.1),scale:.5,visible:!1}),ob.part(ob.PlainButton,{name:"close versions button",dropShadow:new ob.ShadowObject({distance:3,color:ob.Color.rgba(0,0,0,.26),blur:10}),extent:ob.pt(84,31),fill:ob.Color.rgb(81,90,90),position:ob.pt(20.7,317.2),submorphs:[{name:"label",fontFamily:'"IBM Plex Sans"',fontWeight:600,textAndAttributes:["CLOSE",null]}]}),ob.part(ob.RedButton,{name:"revert button",extent:ob.pt(84,31),position:ob.pt(312.4,
316.2),submorphs:[{name:"label",fontWeight:600,textAndAttributes:["REVERT",null]}]}),ob.part(ob.GreenButton,{name:"visit button",dropShadow:new ob.ShadowObject({distance:3,color:ob.Color.rgba(0,0,0,.26),blur:10}),extent:ob.pt(84,31),label:"VISIT",position:ob.pt(413,315.6),submorphs:[{name:"label",fontWeight:600,textAndAttributes:["VISIT",null]}]})]})},{module:"lively.ide/studio/world-browser.cp.js","export":"VersionContainer",range:{start:27976,end:29578}},ob.VersionContainer);ob.WorldPreviewTile=
ob.component["for"](function(){return ob.component({type:ob.WorldPreview,name:"world preview",borderRadius:5,clipMode:"hidden",dropShadow:new ob.ShadowObject({distance:20,rotation:75,color:ob.Color.rgba(0,0,0,.11),blur:50}),extent:ob.pt(245,368.2),fill:ob.Color.rgb(253,254,254),position:ob.pt(1109.2,43.8),reactsToPointer:!1,submorphs:[{name:"preview container",extent:ob.pt(244.5,130),fill:ob.Color.rgba(46,75,223,0),position:ob.pt(0,0),submorphs:[ob.part(ob.PlainButton,{name:"version button",extent:ob.pt(85,
31),position:ob.pt(148,316.7),submorphs:[{name:"label",fontFamily:'"IBM Plex Sans"',fontWeight:600,textAndAttributes:["VERSIONS",null]}]}),ob.part(ob.GreenButton,{name:"open button",extent:ob.pt(122,30),position:ob.pt(14.6,317),submorphs:[{name:"label",fontWeight:600,textAndAttributes:["OPEN PROJECT",null]}]}),ob.part(ob.Spinner,{name:"spinner",extent:ob.pt(55.3,66.9),position:ob.pt(111.3,158.1),visible:!1}),{name:"preview frame",borderColor:ob.Color.rgb(23,160,251),clipMode:"hidden",extent:ob.pt(210.4,
184),fill:ob.Color.rgba(0,0,0,0),position:ob.pt(16,16.2),submorphs:[{type:ob.Image,name:"preview",extent:ob.pt(210,216.6),imageUrl:"",naturalExtent:ob.pt(200,200),reactsToPointer:!1}]},{type:ob.Label,name:"delete button",dropShadow:!1,fontColor:ob.Color.rgb(231,76,60),fontSize:25.108,nativeCursor:"pointer",position:ob.pt(212.1,11.9),textAndAttributes:ob.Icon.textAttribute("trash-alt"),visible:!1},{type:ob.Label,name:"timestamp",borderRadius:30,fill:ob.Color.rgba(0,0,0,.36),fontColor:ob.Color.rgb(253,
254,254),fontSize:17,nativeCursor:"pointer",padding:ob.rect(10,3,0,2),position:ob.pt(16.7,167.8),reactsToPointer:!1,textAndAttributes:["robin.schreiber",{fontSize:13,fontWeight:"bold",paddingTop:"1px"}," - 3.1.19 19:30",{fontSize:12,fontWeight:"bold",paddingTop:"2px"}]},{type:ob.StaticText,name:"description",clipMode:"hidden",extent:ob.pt(199.9,70.3),fill:ob.Color.rgba(255,255,255,0),fontColor:ob.Color.rgb(97,106,107),fontFamily:"IBM Plex Sans, Sans-Serif",fontSize:17,html:'<span style="line-height: 1.3; font-size: 17px; color: rgb(97,106,107); font-family: IBM Plex Sans, Sans-Serif">An interactive essay abouy eyesight.</span>',
position:ob.pt(18.9,238.9),reactsToPointer:!1,renderOnGPU:!0,value:"An interactive essay abouy eyesight."},{type:ob.TitleWrapper,name:"title wrapper",borderColor:ob.Color.rgb(23,160,251),clipMode:"hidden",extent:ob.pt(217.4,32.5),fill:ob.Color.rgba(0,0,0,0),position:ob.pt(12.3,205.3),submorphs:[{type:ob.Label,name:"title",fill:ob.Color.rgba(255,255,255,0),fontColor:ob.Color.rgb(64,64,64),fontSize:22,fontWeight:"bold",nativeCursor:"pointer",padding:ob.rect(4,3,1,0),reactsToPointer:!1,textAndAttributes:["Title",
null]}]}]}]})},{module:"lively.ide/studio/world-browser.cp.js","export":"WorldPreviewTile",range:{start:29627,end:33199}},ob.WorldPreviewTile);ob.WorldBrowser=ob.component["for"](function(){return ob.component({type:ob.WorldDashboard,name:"world browser",borderRadius:10,clipMode:"hidden",draggable:!0,dropShadow:new ob.ShadowObject({color:ob.Color.rgba(0,0,0,.52),blur:15}),extent:ob.pt(870,570),fill:ob.Color.rgb(112,123,124),layout:new ob.ProportionalLayout({lastExtent:{x:870,y:570},reactToSubmorphAnimations:!1,
submorphSettings:[["fader bottom",{x:"resize",y:"move"}],["go back button",{x:"fixed",y:"move"}],["dropdown list",{x:"move",y:"fixed"}],["search-input",{x:"move",y:"fixed"}],["fader top",{x:"resize",y:"fixed"}],["world list",{x:"resize",y:"resize"}],["world search",{x:"move",y:"fixed"}],["search field",{x:"move",y:"fixed"}],["close button",{x:"fixed",y:"move"}],["search selector",{x:"move",y:"fixed"}]]}),position:ob.pt(1182.2,536.7),renderOnGPU:!0,submorphs:[{type:ob.Label,name:"no world warning",
fontColor:ob.Color.rgb(189,195,199),fontSize:30,fontWeight:"bold",position:ob.pt(170.8,265.5),textAndAttributes:["There are no projects yet. Create one!",null],visible:!1},{type:ob.GrowingWorldList,name:"world list",clipMode:"hidden",extent:ob.pt(869.6,568.7),fill:ob.Color.rgba(46,75,223,0),items:[],scrollContainer:null,submorphs:[{name:"scroll container",extent:ob.pt(868.9,75),fill:ob.Color.transparent,layout:new ob.TilingLayout({align:"center",hugContentsVertically:!0,orderByIndex:!0,padding:ob.rect(0,
0,0,30),reactToSubmorphAnimations:!0,spacing:25}),reactsToPointer:!1,submorphs:[{name:"buffer top",extent:ob.pt(768.9,10),fill:ob.Color.transparent},{name:"buffer bottom",extent:ob.pt(768.9,10),fill:ob.Color.transparent}]}]},{name:"fader top",extent:ob.pt(871.9,63.9),fill:new ob.LinearGradient({stops:[{offset:0,color:ob.Color.rgb(112,123,124)},{offset:1,color:ob.Color.rgba(112,123,124,0)}],vector:ob.rect(0,0,0,1)}),submorphs:[ob.part(ob.GreenButton,{name:"new project button",extent:ob.pt(145,30),
position:ob.pt(19.8,17),submorphs:[{name:"label",fontWeight:600,textAndAttributes:[].concat(db(ob.Icon.textAttribute("plus-circle",{paddingTop:"2px",paddingRight:"5px"})),[" NEW PROJECT"])}]})]},{type:ob.SearchInputLine,name:"search field",borderColor:ob.Color.rgb(189,195,199),borderRadius:30,dropShadow:new ob.ShadowObject({distance:1,color:ob.Color.rgba(0,0,0,.26)}),extent:ob.pt(285.1,34),fill:ob.Color.rgb(234,237,237),fixedHeight:!1,fontColor:ob.Color.rgb(64,64,64),fontSize:17,padding:ob.rect(12,
5,-4,0),placeholder:"Search Projects",position:ob.pt(574.3,13.6),selectionColor:ob.Color.rgba(52,152,219,.25)},{name:"fader bottom",extent:ob.pt(871.9,63.9),fill:new ob.LinearGradient({stops:[{offset:0,color:ob.Color.rgb(112,123,124)},{offset:.9073299632352941,color:ob.Color.rgba(127,127,127,0)}],vector:ob.rect(.498247508317511,.9999969287634702,.003504983364977972,-.9999938575269406)}),position:ob.pt(0,506)},{name:"close button",nativeCursor:"pointer",borderColor:ob.Color.rgb(66,73,73),dropShadow:new ob.ShadowObject({distance:3,
color:ob.Color.rgba(0,0,0,.26),blur:10}),extent:ob.pt(94.6,30),fill:ob.Color.rgb(81,90,90),label:"CLOSE",position:ob.pt(14.9,531),borderRadius:5,borderWidth:1,submorphs:[{type:ob.Label,name:"label",fontColor:ob.Color.rgb(215,219,221),fontWeight:"bold",position:ob.pt(28.8,7.5),reactsToPointer:!1,textAndAttributes:["CLOSE",null]}]},{name:"loading indicator",layout:new ob.TilingLayout({align:"center",axisAlign:"center",hugContentsHorizontally:!0,hugContentsVertically:!0,orderByIndex:!0,padding:ob.rect(10,
5,0,0),spacing:7,wrapSubmorphs:!1}),borderRadius:30,extent:ob.pt(90.5,10),fill:ob.Color.rgba(0,0,0,.36),opacity:1,position:ob.pt(353.5,253),submorphs:[ob.part(ob.Spinner,{name:"loading spinner",cssDeclaration:'\n           .lds-spinner {\n            color: official;\n            display: inline-block;\n            position: relative;\n            width: 64px;\n            height: 64px;\n          }\n          .lds-spinner div {\n            transform-origin: 32px 32px;\n            animation: lds-spinner .6s linear infinite;\n          }\n          .white-spinner div:after {\n            content: " ";\n            display: block;\n            position: absolute;\n            top: 3px;\n            left: 29px;\n            width: 5px;\n            height: 14px;\n            border-radius: 20%;\n            background: white;\n          }\n          .lds-spinner div:nth-child(1) {\n            transform: rotate(0deg);\n            animation-delay: -.55s;\n          }\n          .lds-spinner div:nth-child(2) {\n            transform: rotate(30deg);\n            animation-delay: -.5s;\n          }\n          .lds-spinner div:nth-child(3) {\n            transform: rotate(60deg);\n            animation-delay: -0.45s;\n          }\n          .lds-spinner div:nth-child(4) {\n            transform: rotate(90deg);\n            animation-delay: -0.4s;\n          }\n          .lds-spinner div:nth-child(5) {\n            transform: rotate(120deg);\n            animation-delay: -0.35s;\n          }\n          .lds-spinner div:nth-child(6) {\n            transform: rotate(150deg);\n            animation-delay: -0.3s;\n          }\n          .lds-spinner div:nth-child(7) {\n            transform: rotate(180deg);\n            animation-delay: -0.25s;\n          }\n          .lds-spinner div:nth-child(8) {\n            transform: rotate(210deg);\n            animation-delay: -0.2s;\n          }\n          .lds-spinner div:nth-child(9) {\n            transform: rotate(240deg);\n            animation-delay: -0.15s;\n          }\n          .lds-spinner div:nth-child(10) {\n            transform: rotate(270deg);\n            animation-delay: -0.1s;\n          }\n          .lds-spinner div:nth-child(11) {\n            transform: rotate(300deg);\n            animation-delay: -0.05s;\n          }\n          .lds-spinner div:nth-child(12) {\n            transform: rotate(330deg);\n            animation-delay: 0s;\n          }\n          @keyframes lds-spinner {\n            0% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0;\n            }\n          }',
extent:ob.pt(68.2,70.2)}),{type:ob.Label,name:"loading label",fontColor:ob.Color.rgb(253,254,254),fontFamily:'"IBM Plex Sans"',fontSize:23,fontWeight:"500",reactsToPointer:!1,textString:"Loading..."}]},ob.part(ob.DropDownList,{name:"search selector",position:ob.pt(432.9,17),borderColor:ob.Color.rgb(66,73,73),dropShadow:new ob.ShadowObject({distance:1,color:ob.Color.rgba(0,0,0,.26)}),extent:ob.pt(125.6,29.6),fill:ob.Color.rgb(81,90,90),viewModel:{items:["MY PROJECTS","TEMPLATES","PUBLISHED","RECENT"],
openListInWorld:!0,selection:"MY PROJECTS",listMaster:ob.SystemList},submorphs:[{name:"label",fontSize:12,fontWeight:600,fontColor:ob.Color.rgb(215,219,221),textAndAttributes:["MY PROJECTS",null," ",null,"\uf0d7",{fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:"900",paddingRight:"0px",paddingTop:"0px",textStyleClasses:["fa","annotation"]}]}]})]})},{module:"lively.ide/studio/world-browser.cp.js","export":"WorldBrowser",range:{start:33244,end:41688}},ob.WorldBrowser);ae=ob.WorldBrowser;
var qe=ob.WorldPreviewTile,lc=ob.VersionContainer;ob.WorldBrowser=ae;ob.WorldPreviewTile=qe;ob.VersionContainer=lc;ob["default"]=ac;var nc=window.lively.FreezerRuntime.recorderFor("lively.ide/world-commands.js");nc.Rectangle=ib;nc.rect=ec;nc.Color=cb;nc.pt=ub;nc.tree=Ea;nc.date=Za;nc.Path=W;nc.arr=yb;nc.string=Sb;nc.obj=T;nc.inspect=ia;nc.morph=rd;nc.Text=ka;nc.config=K;nc.part=bc;nc.KeyHandler=ya;nc.loadObjectFromPartsbinFolder=pb;nc.loadPart=La;nc.interactivelySaveWorld=eb;nc.show=pa;nc.showAndSnapToGuides=
tb;nc.removeSnapToGuidesOf=ab;nc.LoadingIndicator=Wa;nc.createMorphSnapshot=jb;nc.interactivelyFreezeWorld=Qc;nc.BrowserModuleTranslationCache=va;nc.modules=N;nc.once=E;nc.CodeSearch=Xd;nc.WorldBrowser=ae;nc.commands=[{name:"clear storage and reload",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Ab(){var Fa,za;return regeneratorRuntime.wrap(function(Ka){for(;;)switch(Ka.prev=Ka.next){case 0:return Ka.next=2,$world.confirm(["Caution\n",{},"Proceeding will clear all local storage and reload the page! Make sure if you want to save your world before you continue.",
{fontSize:15,fontWeight:"normal"}],{width:400});case 2:if(Fa=Ka.sent)localStorage.clear(),za=new nc.BrowserModuleTranslationCache("2"),za.closeDb(),za.deleteDb(),window.location.reload(!0);case 4:case "end":return Ka.stop()}},Ab)}));return function(){return fd.apply(this,arguments)}}()},{name:"undo",exec:function(fd){if(fd.focusedMorph&&fd.focusedMorph!==fd&&fd.focusedMorph.undoManager)return!1;fd.env.undoManager.undo();return!0}},{name:"redo",exec:function(fd){if(fd.focusedMorph&&fd.focusedMorph!==
fd&&fd.focusedMorph.undoManager)return!1;fd.env.undoManager.redo();return!0}},{name:"run command",handlesCount:!0,exec:function(){var fd=Tc(regeneratorRuntime.mark(function Ka(Ab,Fa,za){var Ib,C,Pb,da,wa,ca;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return Ib=Ab.focusedMorph||Ab,C=nc.KeyHandler.generateCommandToKeybindingMap(Ib,!0).map(function(u){var O=u.prettyKeys,P=u.command.name,fa=u.target.constructor.name;O=O?O.join(", "):"";return{isListItem:!0,value:u,
label:["".concat(fa),{fontSize:"80%",textStyleClasses:["v-center-text"],paddingRight:"10px"},"".concat(P),null],annotation:[O,{fontSize:"80%",textStyleClasses:["truncated-text"],paddingRight:"5px",maxWidth:140}]}}),ma.next=4,Ab.filterableListPrompt("Run command",C,{historyId:"lively.morphic-run command",requester:Ib,extent:nc.pt(700,600),prompt:Ab._cachedRunCommandPrompt});case 4:return Pb=ma.sent,da=Pb.prompt,wa=Da(Pb.selected,1),ca=wa[0],Ab._cachedRunCommandPrompt=da,ma.abrupt("return",ca?ca.target.execCommand(ca.command,
Fa,za):!0);case 10:case "end":return ma.stop()}},Ka)}));return function(Ab,Fa,za){return fd.apply(this,arguments)}}()},{name:"show command history",exec:function(fd,ua){var Ab=fd.commandHandler;ua=nc.arr.sortBy(Ab.history,function(Fa){return-Fa.time}).map(function(Fa){return{isListItem:!0,string:Ab.printCommand(Fa),value:Fa}});$world.editListPrompt("select commands",ua,{multiSelect:!0,requester:fd});return!0}},{name:"show halo for focused morph",exec:function(fd){var ua=fd.focusedMorph;fd.showHaloFor(ua.getWindow()||
ua,fd.firstHand.pointerId);return!0}},{name:"show morph",exec:function(fd,ua){fd=ua.loop;nc.show(ua.morph,void 0===fd?!1:fd)}},{name:"show and snap to guides",exec:function(fd,ua){nc.showAndSnapToGuides(ua.target,ua.showGuides,ua.snap)}},{name:"remove snap to guides",exec:function(fd,ua){nc.removeSnapToGuidesOf(ua)}},{name:"copy morph",exec:function(fd){var ua=fd.focusedMorph;if(!ua||ua===fd)return $world.setStatusMessage("no morph selected"),!0;fd=ua.getWindow()||ua;ua=fd.copy();ua.openInWorld(fd.globalPosition.addXY(10,
10));ua.isWindow&&ua.activate();return ua}},{name:"select morph",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O,P,fa=arguments;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return za=1<fa.length&&void 0!==fa[1]?fa[1]:{root:Ab,selectionFn:null,justReturn:!1,requester:Ab,filterFn:null,prependItems:[],prompt:null,remote:!1},Ka=0,Ib=za.filterFn||function(){return!0},C=za.selectionFn||function(Ua,Gb,ta){return Ab.filterableListPrompt(Ua,
Gb,ta)},Qa.next=6,pd.import("./object-classes-c0823978.js");case 6:return Pb=Qa.sent,da=Pb["default"],wa=nc.arr.compact(nc.tree.map(za.root||Ab,function(Ua,Gb){if(!Ib(Ua))return null;var ta=!!da.lookupPackageForObject(Ua);return{isListItem:!0,label:["".concat(String(++Ka)).concat("\u2003".repeat(Gb)),{fontSize:"80%",textStyleClasses:["v-center-text"],paddingRight:"10px"},"".concat(Ua),{fontWeight:ta?"bolder":"normal",fontStyle:ta?"normal":"italic",fontFamily:"Inconsolata",fontSize:16},ta?" [Object Class]":
"",{opacity:.5}],value:Ua}},function(Ua){return Ib(Ua)?Ua.submorphs:[]})),ca=["show halo","open object editor","open object inspector"],Qa.next=12,C(za.prompt||"Choose morph",(za.prependItems||[]).concat(wa),{historyId:"lively.morphic-select morph",onSelection:function(Ua){(void 0).lastSelectionHalo&&(void 0).lastSelectionHalo.remove();Ua&&Ua.show&&ma!==Ua&&((void 0).lastSelectionHalo=Ua.show(),ma=Ua)},selectedAction:"show halo",actions:ca});case 12:u=Qa.sent;O=u.selected;P=u.action;if(!za.justReturn){Qa.next=
17;break}return Qa.abrupt("return",O);case 17:return O.forEach(function(Ua){P===ca[0]?Ab.showHaloFor(Ua):P===ca[1]?Ab.execCommand("open object editor",{target:Ua}):P===ca[2]&&Ab.execCommand("open object inspector",{target:Ua})}),Qa.abrupt("return",O);case 19:case "end":return Qa.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"print morph(s)",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O,P,fa,Qa;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=
Ua.next){case 0:za=!1,Ka=[];case 2:if(za){Ua.next=14;break}Ua.next=5;return Ab.execCommand("select morph",{justReturn:!0});case 5:return Ib=Ua.sent,C=Da(Ib,1),Pb=C[0],Ka.push(Pb),Ua.next=11,Ab.confirm("Select additional morphs?",{rejectLabel:"NO"});case 11:za=!Ua.sent;Ua.next=2;break;case 14:return da=nc.LoadingIndicator.open("printing morph..."),Ua.next=17,pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(Gb){return Gb.cd});case 17:return wa=Ua.sent,ca=wa["default"],ma=ca["default"](),
Ua.next=22,ma.listPeers(!0);case 22:return u=Ua.sent,O=u.find(function(Gb){return"pdf printer"===Gb.type}),P={ackTimeout:3E4},Ua.t0=ma,Ua.t1=O.id,Ua.next=29,Promise.all(Ka.map(function(Gb){return nc.createMorphSnapshot(Gb,{addPreview:!1,testLoad:!1})}));case 29:return Ua.t2=Ua.sent,Ua.t3=P,Ua.next=33,Ua.t0.sendToAndWait.call(Ua.t0,Ua.t1,"[PDF printer] print",Ua.t2,Ua.t3);case 33:fa=Ua.sent;Qa=fa.error||fa.data.error;if(!Qa){Ua.next=38;break}Ab.showError(Qa);throw Qa;case 38:Ab.serveFileAsDownload(fa.data,
{fileName:Ka[0].name+(1<Ka.length?".etc":"")+".pdf",type:"application/pdf"}),da.remove();case 40:case "end":return Ua.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"escape",exec:function(fd,ua,Ab,Fa){ua=fd.env.eventDispatcher.eventState;ua.menu&&ua.menu.remove();ua=fd.halos();ua.forEach(function(za){return za.remove()});fd.hands.forEach(function(za){return za.cancelGrab(!0,Fa)});fd=nc.arr.last(ua)&&nc.arr.last(ua).target||fd.focusedMorph||fd;fd.focus();fd.isText&&
fd.selection.disableMultiSelect&&fd.selection.disableMultiSelect();return!1}},{name:"move or resize halo target",exec:function(fd){var ua=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{direction:"left",offset:1,what:"move"},Ab=fd.halos()[0];if(!Ab||Ab.changingName||fd.focusedMorph!==Ab)return!1;var Fa=ua.direction,za=ua.offset;ua=ua.what;var Ka=Ab.target;za=za||1;switch(Fa){case "left":Ka["move"===ua?"left":"width"]-=za;break;case "right":Ka["move"===ua?"left":"width"]+=za;break;case "up":Ka["move"===
ua?"top":"height"]-=za;break;case "down":Ka["move"===ua?"top":"height"]+=za}Ab.alignWithTarget();return!0}},{name:"close halo target",exec:function(fd){var ua=fd.halos()[0],Ab=$world.focusedMorph;if(!ua||ua.changingName||Ab.isText||Ab.isNumberWidget)return!1;ua.target.selectedMorphs?(ua.target.selectedMorphs.forEach(function(Fa){return Fa.abandon()}),fd.halos()[0].remove()):ua.target.abandon();return!0}},{name:"resize manually",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,
Ka,Ib,C,Pb,da=arguments;return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:za=1<da.length&&void 0!==da[1]?da[1]:{};C=Ab.windowBounds();Pb=Ab.bounds();wa.t0=Number;wa.t1=za.width;if(wa.t1){wa.next=9;break}wa.next=8;return Ab.prompt("Enter world width",{input:Math.max(Pb.width,C.width),requester:Ab});case 8:wa.t1=wa.sent;case 9:wa.t2=wa.t1;Ka=(0,wa.t0)(wa.t2);if("number"!==typeof Ka){wa.next=20;break}wa.t3=Number;wa.t4=za.height;if(wa.t4){wa.next=18;break}wa.next=17;return Ab.prompt("Enter world height",
{input:Math.max(Pb.height,C.height),requester:Ab});case 17:wa.t4=wa.sent;case 18:wa.t5=wa.t4,Ib=(0,wa.t3)(wa.t5);case 20:return"number"!==typeof Ka||isNaN(Ka)||"number"!==typeof Ib||isNaN(Ib)||(Ab.extent=nc.pt(Ka,Ib)),wa.abrupt("return",!0);case 22:case "end":return wa.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"resize windows to fit visible world bounds",exec:function(fd){var ua=fd.getWindows().filter(function(Ka){return!Ka.minimized});if(!ua.length)return!0;fd=
fd.visibleBoundsExcludingTopBar();var Ab=ua.reduce(function(Ka,Ib){return Ib.bounds().union(Ka)},new nc.Rectangle(0,0,0,0)),Fa=fd.width/Ab.width,za=fd.height/Ab.height;ua.forEach(function(Ka){var Ib=Ka.bounds();Ka.setBounds(new nc.Rectangle(Ib.x*Fa,Ib.y*za,Ib.width*Fa,Ib.height*za))});return!0}},{name:"window switcher",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:za=Ab.activePrompt();
if(!za||"lively.morphic-window switcher"!==za.historyId){ca.next=4;break}za.focus();return ca.abrupt("return",za.get("list").execCommand("select down"));case 4:return Ka=Ab.submorphs.filter(function(ma){return ma.isWindow}).reverse().map(function(ma){return{isListItem:!0,string:ma.title||String(ma),value:ma}}),Ka.forEach(function(ma){ma.value.opacity=.5;ma.value.blur=1}),ca.next=8,Ab.filterableListPrompt("Choose window",Ka,{preselect:1,requester:Ab,historyId:"lively.morphic-window switcher",onSelection:function(ma){Ib&&
(Ib.minimized=C,Ib.blur=1,Ib.animate({opacity:.3,duration:200}));if(Ib=ma)ma.animate({opacity:1,duration:200}),ma.blur=0,C=ma.minimized,ma.minimized=!1},width:1*Ab.visibleBounds().extent().x/3,itemPadding:nc.Rectangle.inset(4)});case 8:return Pb=ca.sent,da=Da(Pb.selected,1),wa=da[0],Ka.forEach(function(ma){ma.value.opacity=1;ma.value.blur=0}),wa&&(wa.activate(),wa.minimized=!1),ca.abrupt("return",!0);case 13:case "end":return ca.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},
{name:"close active window or morph",exec:function(fd){var ua=fd.focusedMorph;if(!ua)return!0;var Ab=ua.getWindow();fd.undoStart("window close");Ab?Ab.close():(nc.arr.last(nc.arr.without(ua.ownerChain(),fd)).remove(),(Ab=fd.activeWindow())&&Ab.activate());fd.undoStop("window close");return!0}},{name:"toggle minimize active window",exec:function(fd){(fd=fd.activeWindow())&&fd.toggleMinimize();return!0}},{name:"toggle minimize all windows",exec:function(fd){(fd=fd.getWindows())&&fd.map(function(ua){return ua.toggleMinimize()});
return!0}},{name:"toggle minimize all except active window",exec:function(fd){(fd=fd.getWindows().filter(function(ua){return!ua.isActive()}))&&fd.map(function(ua){return ua.toggleMinimize()});return!0}},{name:"close all except active window",exec:function(fd){(fd=fd.getWindows().filter(function(ua){return!ua.isActive()}))&&fd.map(function(ua){return ua.close()});return!0}},{name:"close all like this window",exec:function(fd){var ua=fd.getWindows().filter(function(Ab){return Ab.isActive()})[0].name.replace("window for",
"");fd.getWindows().filter(function(Ab){return Ab.name.replace("window for","")===ua}).map(function(Ab){return Ab.close()});return!0}},{name:"close all windows",exec:function(fd){(fd=fd.getWindows())&&fd.map(function(ua){return ua.close()});return!0}},{name:"open status message of focused morph",exec:function(fd){var ua=fd.focusedMorph;fd=ua?fd.visibleStatusMessagesFor(ua):[];if(fd=Da(fd,1)[0])fd.expand(),fd.focus();return fd||!0}},{name:"resize active window",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,
Ka,Ib,C,Pb,da,wa,ca,ma,u,O,P=arguments;return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:O=function(Qa,Ua){switch(Qa){case "full":return Pb;case "col1":case "left":return ca.withTopLeft(Pb.topLeft());case "col2":case "center":return ca.withCenter(Pb.center());case "col3":case "right":return ca.translatedBy(nc.pt(Pb.width-wa,0));case "top":return Pb.divide([nc.rect(0,0,1,.5)])[0];case "bottom":return Pb.divide([nc.rect(0,.5,1,.5)])[0];case "reset":return C._normalBounds||
nc.pt(500,400).extentAsRectangle().withCenter(Ua.center());default:return Ua}};u=function(){u=Tc(regeneratorRuntime.mark(function Ua(){var Gb,ta,mc;return regeneratorRuntime.wrap(function(pc){for(;;)switch(pc.prev=pc.next){case 0:return pc.next=2,Ab.filterableListPrompt("How to resize the window?","full center right left bottom top reset".split(" "),{requester:Ab});case 2:return Gb=pc.sent,ta=Da(Gb.selected,1),mc=ta[0],pc.abrupt("return",mc);case 6:case "end":return pc.stop()}},Ua)}));return u.apply(this,
arguments)};ma=function(){return u.apply(this,arguments)};za=1<P.length&&void 0!==P[1]?P[1]:{how:null,window:null};Ka=za.window;Ib=za.how;if(C=Ka||Ab.activeWindow()){fa.next=8;break}return fa.abrupt("return");case 8:Pb=Ab.visibleBoundsExcludingTopBar().insetBy(15);da=C.bounds();C._normalBounds||(C._normalBounds=da);wa=Math.min(700,Math.max(1E3,Pb.width/3));ca=Pb.withWidth(wa);if(Ib){fa.next=18;break}fa.next=17;return ma();case 17:Ib=fa.sent;case 18:if(Ib){fa.next=20;break}return fa.abrupt("return");
case 20:return C.setBounds(O(Ib,Pb)),"reset"===Ib&&delete C._normalBounds,fa.abrupt("return",!0);case 23:case "end":return fa.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"[recovery] show last object editor saves",exec:function(fd,ua){return fd.execCommand("[recovery] show last doits",Object.assign({},ua,{title:"logged ObjectEditor save",logAccessFn:function(){return JSON.parse(localStorage["oe helper"]).saves}}))}},{name:"[recovery] show last doits",description:"browse a list of your last doits",
exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O,P,fa,Qa=arguments;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:za=1<Qa.length&&void 0!==Qa[1]?Qa[1]:{};(Ka=za.logAccessFn)||(Ka=function(){return JSON.parse(localStorage["lively.next-js-ide-doitlog"])});try{Ib=Ka()}catch(Gb){}if(Ib){Ua.next=6;break}return Ua.abrupt("return",Ab.inform("no log yet"));case 6:return C=nc.arr.sortBy(Ib.map(function(Gb,ta){var mc="string"===
typeof Gb?Gb:Gb.source;Gb="string"===typeof Gb?ta:Gb.time||ta;ta=nc.date.format(new Date(Gb),"yy-mm-dd HH:MM");return{time:Gb,source:mc,printedTime:ta}}),function(Gb){return-Gb.time}),Pb=C.map(function(Gb,ta){return{isListItem:!0,string:"[".concat(Gb.printedTime,"] ").concat(Gb.source.slice(0,100).replace(/\n/g,"").trim()),value:Gb}}),Ua.next=10,Ab.filterableListPrompt("select doit code",Pb,{multiSelect:!0,requester:Ab});case 10:da=Ua.sent;wa=da.selected;if(!wa.length){Ua.next=17;break}ca=[];ma=zb(wa);
try{for(ma.s();!(u=ma.n()).done;)O=u.value,P=O.source,fa=O.printedTime,ca.push("// ".concat(fa,"\n").concat(P))}catch(Gb){ma.e(Gb)}finally{ma.f()}return Ua.abrupt("return",Ab.execCommand("open workspace",Object.assign({title:"logged doits",mode:"js"},za,{content:ca.join("\n\n")})));case 17:return Ua.abrupt("return",!0);case 18:case "end":return Ua.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open loading indicator",exec:function(fd,ua){fd={};"object"===Wb(ua)&&(fd=
ua,ua=fd.label);return nc.LoadingIndicator.open(ua,fd)}},{name:"open workspace",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O,P,fa=arguments;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:za=1<fa.length&&void 0!==fa[1]?fa[1]:{};Ib=(Ka=3<fa.length?fa[3]:void 0)&&Ab.relayCommandExecutionToFocusedMorph(Ka);if(!Ib){Qa.next=6;break}return Qa.abrupt("return",Ib);case 6:C=za.language||za.mode||"javascript";Pb={javascript:"lively.ide/js/workspace.js",
shell:"lively.ide/shell/workspace.js",html:"lively.ide/html/workspace.js",py:"lively.ide/py/workspace.js",md:"lively.ide/md/workspace.js",sql:"lively.ide/sql/workspace.js",css:"lively.ide/css/workspace.js",less:"lively.ide/css/less/workspace.js",text:null};da=Object.keys(nc.config.ide.modes.aliases).reduce(function(Ua,Gb){return Object.assign(Ua,R({},nc.config.ide.modes.aliases[Gb],Gb))},{});if(!za.askForMode){Qa.next=17;break}ma=Object.keys(Pb).concat("javascript console");Qa.next=13;return Ab.filterableListPrompt("Open workspace for...",
ma);case 13:nc.__inter0__=Qa.sent;wa=nc.__inter0__.selected;ca=Da(wa,1);if(C=ca[0]){Qa.next=17;break}return Qa.abrupt("return",!0);case 17:if("javascript console"!==C){Qa.next=19;break}return Qa.abrupt("return",Ab.execCommand("open console",za));case 19:za=Object.assign({content:""},za,{mode:C,language:C});u=Pb[za.language]||Pb[da[za.language]];if("text"!==C&&u){Qa.next=23;break}return Qa.abrupt("return",Ab.execCommand("open text window",Object.assign({},nc.config.codeEditor.modes.text,{},za)));case 23:return Qa.next=
25,System["import"](u);case 25:return O=Qa.sent,P=O["default"],Qa.abrupt("return",(new P({title:za.title||za.language+" workspace",center:Ab.center,content:za.content,target:za.target,systemInterface:za.systemInterface||za.backend})).activate());case 28:case "end":return Qa.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open console",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za;return regeneratorRuntime.wrap(function(Ka){for(;;)switch(Ka.prev=
Ka.next){case 0:return Ka.next=3,nc.loadObjectFromPartsbinFolder("Console");case 3:return za=Ka.sent,Ka.abrupt("return",za.openInWorldNearHand());case 5:case "end":return Ka.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open shell workspace",exec:function(fd,ua){return fd.execCommand("open workspace",Object.assign({},ua,{language:"shell"}))}},{name:"open javascript workspace",exec:function(fd,ua){return fd.execCommand("open workspace",Object.assign({},ua,{language:"javascript"}))}},
{name:"open shell terminal",exec:function(){var fd=Tc(regeneratorRuntime.mark(function za(Ab,Fa){var Ka,Ib;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,pd.import("./terminal-dc164e8b.js");case 2:return Ka=C.sent,Ib=Ka["default"],C.abrupt("return",Ib.open(Fa).openInWorldNearHand());case 5:case "end":return C.stop()}},za)}));return function(Ab,Fa){return fd.apply(this,arguments)}}()},{name:"open text window",exec:function(fd){var ua=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{},Ab=ua.title,Fa=ua.extent,za=ua.content,Ka=ua.mode,Ib=ua.name,C=ua.rangesAndStyles;Ab=Ab||"text window";za=za||"";Fa=Fa||nc.pt(500,400);Ib=Ib||"text workspace";za="string"===typeof za?[za,null]:za;ua=new nc.Text(Object.assign({padding:nc.Rectangle.inset(3)},nc.obj.dissoc(ua,["title","content"]),{textAndAttributes:za,clipMode:"auto",name:Ib,extent:Fa}));C&&ua.setTextAttributesWithSortedRanges(C);Ka&&ua.changeEditorMode(Ka);return fd.openInWindow(ua,{title:Ab}).activate()}},
{name:"merge and open in window",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib=arguments;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return za=1<Ib.length&&void 0!==Ib[1]?Ib[1]:{a:"",b:"",format:null,extent:nc.pt(500,600)},C.next=3,nc.loadObjectFromPartsbinFolder("text merger");case 3:return Ka=C.sent,C.abrupt("return",Ka.targetMorph.open(za.a,za.b,za));case 5:case "end":return C.stop()}},Fa)}));return function(Ab){return fd.apply(this,
arguments)}}()},{name:"diff and open in window",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O,P,fa,Qa,Ua=arguments;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:return Qa=function(){Qa=Tc(regeneratorRuntime.mark(function Pd(mc,pc,zd){var bd,Yd,le,Be,Ne,Re,nf,af,yf,Ig,re,Ld;return regeneratorRuntime.wrap(function(fc){for(;;)switch(fc.prev=fc.next){case 0:bd=zd.format;Yd=null;if("patch"!==bd){fc.next=12;break}Be=
zd.headerA;Ne=zd.headerB;Re=zd.filenameA;nf=zd.filenameB;af=zd.context;le=[u.createTwoFilesPatch(Re||"a",nf||"b",mc,pc,Be,Ne,"number"===typeof af?{context:af}:void 0),{}];fc.next=7;return pd.import("./editor-plugin-8acb3af6.js");case 7:yf=fc.sent;Ig=yf["default"];Yd=new Ig;fc.next=14;break;case 12:O=u[bd](mc,pc,zd),le=O.flatMap(function(wd){wd.count;var Ie=wd.added;return[wd.value,wd.removed?{fontWeight:"normal",textDecoration:"line-through",fontColor:nc.Color.red}:Ie?{fontWeight:"bold",textDecoration:"",
fontColor:nc.Color.green}:{fontWeight:"normal",textDecoration:"",fontColor:nc.Color.darkGray}]});case 14:return re=Ab.execCommand("open text window",zd),Ld=re.targetMorph,re.extent=ma||nc.pt(300,200).maxPt(Ld.textBounds().extent()),Ld.textAndAttributes=le,Yd&&Ld.addPlugin(Yd),fc.abrupt("return",Ld);case 20:case "end":return fc.stop()}},Pd)}));return Qa.apply(this,arguments)},fa=function(ta,mc,pc){return Qa.apply(this,arguments)},P=function(ta,mc){if(nc.obj.isPrimitive(ta)||ta instanceof RegExp||nc.obj.isPrimitive(mc)||
mc instanceof RegExp)ta=String(ta),mc=String(mc);if("string"!==typeof ta||"string"!==typeof mc)try{return JSON.stringify(ta),JSON.stringify(mc),{format:"diffJson",a:ta,b:mc}}catch(pc){ta=String(ta),mc=String(mc)}return{format:"diffLines",a:ta,b:mc}},za=1<Ua.length&&void 0!==Ua[1]?Ua[1]:{},Ka=za.a,Ib=void 0===Ka?"":Ka,C=za.b,Pb=void 0===C?"":C,da=za.format,wa=void 0===da?null:da,ca=za.extent,ma=void 0===ca?ub(500,600):ca,wa?(Ib=String(Ib),Pb=String(Pb)):(nc.__inter1__=P(Ib,Pb),Ib=nc.__inter1__.a,Pb=
nc.__inter1__.b,wa=nc.__inter1__.format),Gb.next=8,pd.import("./diff@5.0-976ac4cc.js");case 8:return u=Gb.sent,Gb.next=11,fa(Ib,Pb,Object.assign({fontFamily:"monospace"},za,{format:wa}));case 11:return O=Gb.sent,Gb.abrupt("return",O);case 13:case "end":return Gb.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"merge workspaces",exec:function(fd,ua){return fd.execCommand("diff workspace",Object.assign({},ua,{merge:!0}))}},{name:"diff workspaces",exec:function(){var fd=
Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O=arguments;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:u=function(){u=Tc(regeneratorRuntime.mark(function Gb(Qa,Ua){var ta,mc,pc,zd;return regeneratorRuntime.wrap(function(Pd){for(;;)switch(Pd.prev=Pd.next){case 0:return ta=Qa.map(function(bd){return{isListItem:!0,value:bd,string:bd.name||String(bd)}}),Pd.next=3,Ab.filterableListPrompt("choose text: ",ta,{onSelection:function(bd){bd&&bd.show()}});
case 3:return mc=Pd.sent,pc=Da(mc.selected,1),zd=pc[0],Pd.abrupt("return",zd);case 7:case "end":return Pd.stop()}},Gb)}));return u.apply(this,arguments)};ma=function(fa,Qa){return u.apply(this,arguments)};ca=function(){ca=Tc(regeneratorRuntime.mark(function Gb(Qa,Ua){var ta;return regeneratorRuntime.wrap(function(mc){for(;;)switch(mc.prev=mc.next){case 0:return mc.next=2,nc.loadObjectFromPartsbinFolder("text merger");case 2:return ta=mc.sent,mc.abrupt("return",ta.targetMorph.open(Qa.textString,Ua.textString));
case 4:case "end":return mc.stop()}},Gb)}));return ca.apply(this,arguments)};wa=function(fa,Qa){return ca.apply(this,arguments)};da=function(fa,Qa){var Ua=fa.pluginFind(function(ta){return ta.evalEnvironment});Ua=Ua&&Ua.evalEnvironment.targetModule||"no file";var Gb=Qa.pluginFind(function(ta){return ta.evalEnvironment});return Ab.execCommand("diff and open in window",{a:fa.textString,b:Qa.textString,filenameA:Ua,filenameB:Gb&&Gb.evalEnvironment.targetModule||"no file"})};za=1<O.length&&void 0!==O[1]?
O[1]:{};Ka=za.editor1;Ib=za.editor2;C=za.merge;Pb=[];Ka&&Ib||(Pb=Ab.withAllSubmorphsSelect(function(fa){return fa.isText&&!fa.isInputLine&&!fa.isUsedAsEpiMorph()}).reverse());if(Ka){P.next=13;break}P.next=12;return ma(Pb);case 12:Ka=P.sent;case 13:if(Ka){P.next=15;break}return P.abrupt("return",Ab.setStatusMessage("Canceled"));case 15:if(Ib){P.next=19;break}P.next=18;return ma(nc.arr.without(Pb,Ka));case 18:Ib=P.sent;case 19:if(Ib){P.next=21;break}return P.abrupt("return",Ab.setStatusMessage("Canceled"));
case 21:return P.abrupt("return",C?wa(Ka,Ib):da(Ka,Ib));case 22:case "end":return P.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"search workspaces",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Ab(){var Fa,za,Ka,Ib,C,Pb,da,wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return wa=function(ma){return $world.withAllSubmorphsDo(function(u){u.isWindow&&u.minimized&&u.targetMorph&&u.targetMorph.isText&&(u=u.targetMorph);
if(!u.textString||!u.isText||u.isUsedAsEpiMorph())return null;var O=u.textString.toLowerCase();return ma.every(function(P){return O.includes(P)})?u:null}).filter(Boolean)},da=function(ma,u){return ma.map(function(O){var P=O.world()?O.getWindow():$world.withAllSubmorphsDetect(function(Gb){return Gb.isWindow&&Gb.targetMorph===rd}),fa=0,Qa=nc.string.lines(O.textString).find(function(Gb,ta){Gb=Gb.toLowerCase();fa=ta;return u.every(function(mc){return Gb.includes(mc)})}),Ua=P?P.title:O.toString();return Qa?
{isListItem:!0,string:Ua+" | "+Qa,value:{window:P,morph:O,row:fa}}:null}).filter(Boolean)},ca.next=4,$world.filterableListPrompt("search workspaces",[],{historyId:"lively.morphic-ide-search-workspaces-hist",customize:function(ma){ma.getSubmorphNamed("list").updateFilter=function(){var u=this.parseInput();if(!(3>u.input.length)){var O=wa(u.lowercasedTokens);this.listMorph.items=da(O,u.lowercasedTokens)}}}});case 4:Fa=ca.sent;za=Da(Fa.selected,1);Ka=za[0];if(!Ka){ca.next=13;break}Ib=Ka.morph;C=Ka.window;
Pb=Ka.row;C&&(C.minimized&&C.toggleMinimize(),C.activate());(C||Ib).show();this.cursorPosition={row:Pb,column:0};return ca.abrupt("return",Ib);case 13:return ca.abrupt("return",null);case 14:case "end":return ca.stop()}},Ab,this)}));return function(){return fd.apply(this,arguments)}}()},{name:"open PartsBin",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C;return regeneratorRuntime.wrap(function(Pb){for(;;)switch(Pb.prev=Pb.next){case 0:return za=nc.LoadingIndicator.open("Loading Partsbin..."),
Pb.next=3,pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(da){return da.ch});case 3:return Ka=Pb.sent,Ib=Ka.loadPart,Pb.next=7,Ib("PartsBin");case 7:return C=Pb.sent,C.openInWorldNearHand(),C.targetMorph.selectedCategory="*basics*",C.focus(),za.remove(),C.getWindow().activate(),Pb.abrupt("return",C);case 14:case "end":return Pb.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"browse and load component",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,
Ka,Ib,C,Pb;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return za=nc.LoadingIndicator.open("loading component browser"),da.next=3,pd.import("./component-browser.cp-ada124da.js");case 3:Ka=da.sent;Ib=Ka.ComponentBrowser;if(Ab._componentsBrowser){da.next=8;break}da.next=8;return za.whenRendered();case 8:return C=Ab._componentsBrowser||(Ab._componentsBrowser=nc.part(Ib)),za.remove(),da.next=12,C.activate();case 12:(Pb=da.sent)&&!Pb.world()&&Pb.openInWorld();case 14:case "end":return da.stop()}},
Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"load object from PartsBin",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u=arguments;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:za=1<u.length&&void 0!==u[1]?u[1]:{};Ib=za.name;C=za.open;Pb=void 0===C?!0:C;if(!Ib){O.next=12;break}O.next=5;return pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(P){return P.ch});case 5:return da=
O.sent,wa=da.loadObjectFromPartsbinFolder,O.next=9,wa(Ib);case 9:Ka=O.sent;O.next=19;break;case 12:return O.next=14,pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(P){return P.ch});case 14:return ca=O.sent,ma=ca.interactivelyLoadObjectFromPartsBinFolder,O.next=18,ma();case 18:Ka=O.sent;case 19:return Ka&&Pb&&Ka.openInWorldNearHand(),O.abrupt("return",Ka);case 21:case "end":return O.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open object drawer",
exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka;return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return Ib.next=2,pd.import("./object-drawer-e46b69f1.js");case 2:return za=Ib.sent,Ka=za["default"],Ib.abrupt("return",(new Ka).openInWorldNearHand());case 5:case "end":return Ib.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open object editor",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,
Ka,Ib,C,Pb=arguments;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:za=1<Pb.length&&void 0!==Pb[1]?Pb[1]:{target:null,selectedClass:null,selectedMethod:null,evalEnvironment:null};if(za.target){da.next=4;break}Ab.setStatusMessage("No target for ObjectEditor");return da.abrupt("return",null);case 4:return Ka=za.loadingIndicator=nc.LoadingIndicator.open("Open Object Editor..."),da.next=7,pd.import("./ui.cp-8512c1d3.js");case 7:return Ib=da.sent,da.next=10,Ib.open(za);
case 10:return C=da.sent,Ka.remove(),da.abrupt("return",C);case 13:case "end":return da.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open object inspector",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka=arguments;return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:za=1<Ka.length&&void 0!==Ka[1]?Ka[1]:{target:null};if(za.target){Ib.next=4;break}Ab.setStatusMessage("no target for Inspector");return Ib.abrupt("return",
null);case 4:return Ib.abrupt("return",nc.inspect(za.target));case 5:case "end":return Ib.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"inspect server",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return da.next=2,pd.import("./ui.cp-6289a670.js").then(function(wa){return wa.I});case 2:return za=da.sent,da.next=5,pd.import("./index-1c08552a.js");
case 5:return Ka=da.sent,Ib=Ka.serverInterfaceFor,C=Ib(System.baseURL+"eval"),Pb={format:"esm",context:"global",targetModule:"lively://lively.next-workspace/world",sourceURL:"inspect-server_"+Date.now(),systemInterface:C},da.next=11,C.runEval('\n           import LivelyServer from "lively.server/server.js";\n           let server = LivelyServer.servers.values().next().value;\n        ',Pb);case 11:za.openInWindow({remoteTarget:{code:"server",evalEnvironment:Pb}});case 12:case "end":return da.stop()}},
Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open scene graph inspector",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib=arguments;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return za=1<Ib.length&&void 0!==Ib[1]?Ib[1]:{target:null},C.next=3,nc.loadObjectFromPartsbinFolder("scene graph inspector");case 3:return Ka=C.sent,Ka.targetMorph=za.target||Ab,C.abrupt("return",Ka.openInWindow({title:"morph graph"}));
case 6:case "end":return C.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open browser",progressIndicator:"opening browser...",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa=arguments;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:za=1<wa.length&&void 0!==wa[1]?wa[1]:{packageName:"lively.morphic",moduleName:"morph.js",scroll:nc.pt(0,0)};Ib=(Ka=3<wa.length?wa[3]:void 0)&&Ab.relayCommandExecutionToFocusedMorph(Ka);
if(!Ib){ca.next=6;break}return ca.abrupt("return",Ib);case 6:return ca.next=8,pd.import("./ui.cp-04e9d052.js");case 8:C=ca.sent;if(!za){ca.next=16;break}da=nc.obj.select(za,"packageName moduleName textPosition codeEntity systemInterface scroll".split(" "));ca.next=13;return C.browse(da,{extent:nc.pt(700,600)});case 13:Pb=ca.sent;ca.next=19;break;case 16:return ca.next=18,C.open();case 18:Pb=ca.sent;case 19:return Pb.getWindow().activate(),ca.abrupt("return",Pb);case 21:case "end":return ca.stop()}},
Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"choose and browse package resources",progressIndicator:"browsing resources...",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O,P,fa,Qa,Ua,Gb,ta,mc,pc,zd,Pd=arguments;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:za=1<Pd.length&&void 0!==Pd[1]?Pd[1]:{browser:null,systemInterface:null};Ib=(Ka=3<Pd.length?Pd[3]:void 0)&&Ab.relayCommandExecutionToFocusedMorph(Ka);
if(!Ib){bd.next=6;break}return bd.abrupt("return",Ib);case 6:return C=(C=za.browser||Ab.focusedMorph&&Ab.focusedMorph.ownerChain().find(function(Yd){return Yd.isBrowser}))&&C.isBrowser?C.getWindow():null,bd.next=10,pd.import("./index-1c08552a.js");case 10:return Pb=bd.sent,da=Pb.localInterface,wa=za&&za.systemInterface?za.systemInterface:C?C.systemInterface:da,bd.next=15,wa.getPackages({excluded:nc.config.ide.js.ignoredPackages});case 15:ca=bd.sent,ma=[],u=zb(ca),bd.prev=18,P=regeneratorRuntime.mark(function le(){var Be,
Ne;return regeneratorRuntime.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Be=O.value,Ne=(nc.Path("lively.ide.exclude").get(Be)||[]).map(function(nf){return nf.includes("*")?new RegExp(nf.replace(/\*/g,".*")):nf}),Ne.push(".git","node_modules",".module_cache"),Re.t0=ma.push,Re.t1=ma,Re.t2=db,Re.next=8,wa.resourcesOfPackage(Be,Ne);case 8:Re.t3=function(nf){var af=nf.url;return!af.endsWith("/")&&!Ne.some(function(yf){return yf instanceof RegExp?yf.test(af):af.includes(yf)})},Re.t4=
function(nf,af){return nf.isLoaded&&!af.isLoaded?-1:!nf.isLoaded&&af.isLoaded?1:nf.nameInPackage.toLowerCase()<af.nameInPackage.toLowerCase()?-1:nf.nameInPackage.toLowerCase()===af.nameInPackage.toLowerCase()?0:1},Re.t5=function(nf){return{isListItem:!0,string:"[".concat(Be.name,"] ").concat(nf.nameInPackage).concat(nf.isLoaded?"":" [not loaded]"),value:nf}},Re.t6=Re.sent.filter(Re.t3).sort(Re.t4).map(Re.t5),Re.t7=(0,Re.t2)(Re.t6),Re.t0.apply.call(Re.t0,Re.t1,Re.t7);case 14:case "end":return Re.stop()}},
le)}),u.s();case 21:if((O=u.n()).done){bd.next=25;break}return bd.delegateYield(P(),"t0",23);case 23:bd.next=21;break;case 25:bd.next=30;break;case 27:bd.prev=27,bd.t1=bd["catch"](18),u.e(bd.t1);case 30:return bd.prev=30,u.f(),bd.finish(30);case 33:return bd.next=35,Ab.filterableListPrompt("Choose module to open",ma,{historyId:"lively.morphic-choose and browse package resources",requester:C,width:700,multiSelect:!0,fuzzy:"value.shortName"});case 35:return fa=bd.sent,Qa=fa.selected,Ua=nc.arr.partition(Qa,
function(le){return le.url.match(/\.js(on)?/)}),Gb=Da(Ua,2),ta=Gb[0],mc=Gb[1],bd.next=40,pd.import("./index-02a2847a.js").then(function(le){return le.i});case 40:return pc=bd.sent,zd=pc["default"],bd.next=44,Promise.all(ta.map(function(le){return zd.browse({packageName:le["package"],moduleName:le.url},C,wa).then(function(Be){return Be.activate()})}));case 44:if(!mc.length){bd.next=47;break}bd.next=47;return Promise.all(mc.map(function(le){return Ab.execCommand("open file",{url:le.url})}));case 47:return bd.abrupt("return",
!0);case 48:case "end":return bd.stop()}},Fa,null,[[18,27,30,33]])}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"choose and browse module",progressIndicator:"browsing module...",handlesCount:!0,exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O,P,fa,Qa,Ua,Gb,ta,mc,pc,zd,Pd=arguments;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:za=1<Pd.length&&void 0!==Pd[1]?Pd[1]:{browser:void 0,systemInterface:void 0};
Ka=2<Pd.length?Pd[2]:void 0;if(za.browser){bd.next=7;break}C=(Ib=Ab.focusedMorph)&&Ib.getWindow();if(!(C&&C.targetMorph&&C.targetMorph.isFileBrowser)){bd.next=7;break}return bd.abrupt("return",C.targetMorph.execCommand("find file and select",za,Ka));case 7:return Pb=za.browser||Ib&&Ib.ownerChain().find(function(Yd){return Yd.isBrowser}),bd.next=10,pd.import("./ui.cp-04e9d052.js");case 10:return da=bd.sent,bd.next=13,pd.import("./index-1c08552a.js");case 13:return wa=bd.sent,ca=wa.localInterface,ma=
za&&za.systemInterface?za.systemInterface:Pb?Pb.systemInterface:ca,u="local"===ma.name?"":" on [".concat(nc.string.truncate(ma.name,35,"..."),"]"),bd.next=19,ma.getPackages();case 19:O=bd.sent,P=[],fa=zb(O),bd.prev=22,fa.s();case 24:if((Qa=fa.n()).done){bd.next=48;break}Ua=Qa.value;Gb=nc.Path("lively.ide.exclude").get(Ua)||[];Gb=Gb.map(function(Yd){return Yd.includes("*")?new RegExp(Yd.replace(/\*/g,".*")):Yd});ta=zb(Ua.modules);bd.prev=29;pc=function(){var Yd=mc.value;if(Gb.some(function(Be){return Be instanceof
RegExp?Be.test(Yd.name):Yd.name.includes(Be)}))return"continue";var le=ma.shortModuleName(Yd.name,Ua);P.push({isListItem:!0,string:"[".concat(Ua.name,"] ").concat(le),value:{"package":Ua,module:Yd,shortName:le}})};ta.s();case 32:if((mc=ta.n()).done){bd.next=38;break}zd=pc();if("continue"!==zd){bd.next=36;break}return bd.abrupt("continue",36);case 36:bd.next=32;break;case 38:bd.next=43;break;case 40:bd.prev=40,bd.t0=bd["catch"](29),ta.e(bd.t0);case 43:return bd.prev=43,ta.f(),bd.finish(43);case 46:bd.next=
24;break;case 48:bd.next=53;break;case 50:bd.prev=50,bd.t1=bd["catch"](22),fa.e(bd.t1);case 53:return bd.prev=53,fa.f(),bd.finish(53);case 56:return P=nc.arr.sortBy(P,function(Yd){return Yd.string}),Tc(regeneratorRuntime.mark(function le(){var Be,Ne,Re,nf,af,yf,Ig,re,Ld;return regeneratorRuntime.wrap(function(fc){for(;;)switch(fc.prev=fc.next){case 0:return Be=Pb||Ib,fc.next=3,Ab.filterableListPrompt("Choose module to open".concat(u),P,{historyId:"lively.morphic-choose and browse module",requester:Be,
height:Math.min(Be.height,700),width:500,multiSelect:!0,listFontColor:"white",fuzzy:"value.shortName"});case 3:Ne=fc.sent,Re=Ne.selected,nf=0;case 6:if(!(nf<Re.length)){fc.next=17;break}af=Re[nf];yf=af["package"];Ig=af.shortName;re={packageName:yf.name,moduleName:Ig};fc.next=11;return da.browse(re,0===nf?Pb:void 0,ma);case 11:Ld=fc.sent,Ld.moveBy(nc.pt(20*nf,20*nf)),Ld.getWindow().activate();case 14:nf++;fc.next=6;break;case 17:case "end":return fc.stop()}},le)}))(),bd.abrupt("return",!0);case 59:case "end":return bd.stop()}},
Fa,null,[[22,50,53,56],[29,40,43,46]])}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open code search",progressIndicator:"opening code search...",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u=arguments;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:za=1<u.length&&void 0!==u[1]?u[1]:{browser:null,systemInterface:null,input:null};Ka=Ab.focusedMorph?Ab.focusedMorph.ownerChain():[];Ib=za.browser||
Ka.find(function(P){return P.isBrowser});C=nc.LoadingIndicator.open("loading code search");if(!Ib||!Ib.isBrowser){O.next=10;break}if(!Ib.associatedSearchPanel){O.next=8;break}C.remove();return O.abrupt("return",Ib.associatedSearchPanel.getWindow().activate());case 8:O.next=11;break;case 10:Ib=null;case 11:return O.next=13,pd.import("./index-1c08552a.js");case 13:return Pb=O.sent,da=Pb.localInterface,wa=za.systemInterface||Ib&&Ib.systemInterface,wa||(wa=(ca=Ka.find(function(P){return P.isText&&P.editorPlugin&&
P.editorPlugin.isJSEditorPlugin}))?ca.editorPlugin.systemInterface():da),ma=nc.part(nc.CodeSearch),Object.assign(ma,{browser:Ib,input:za.input,systemInterface:wa}),ma.openInWindow(),ma.focus(),C.remove(),Ib&&(Ib.associatedSearchPanel=ma),O.abrupt("return",ma);case 24:case "end":return O.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open grep search",progressIndicator:"opening code search...",exec:function(){var fd=Tc(regeneratorRuntime.mark(function za(Ab,Fa){var Ka;
return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return Ib.next=2,nc.loadObjectFromPartsbinFolder("grep search");case 2:return Ka=Ib.sent,Ib.abrupt("return",Ka.openInWorldNearHand(Ab).activate());case 4:case "end":return Ib.stop()}},za)}));return function(Ab,Fa){return fd.apply(this,arguments)}}()},{name:"open test runner",progressIndicator:"opening test runner...",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka;return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=
Ib.next){case 0:return Ib.next=2,pd.import("./test-runner-849f8d86.js");case 2:return za=Ib.sent,Ka=za["default"],Ib.next=6,Ka.open();case 6:return Ib.abrupt("return",Ib.sent);case 7:case "end":return Ib.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open file browser",progressIndicator:"opening file browser...",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca=arguments;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=
ma.next){case 0:return za=1<ca.length&&void 0!==ca[1]?ca[1]:{},ma.next=3,pd.import("./http-file-browser-a81ac122.js");case 3:return Ka=ma.sent,Ib=Ka["default"],C=za.location,Pb=za.url,wa=(da=za.file)?Ib.forFile(da,C):Ib.forLocation(Pb||C||document.location.origin),ma.abrupt("return",Ab.openInWindow(wa).activate());case 8:case "end":return ma.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"open file",progressIndicator:"opening file...",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,
Ka,Ib,C,Pb,da,wa,ca,ma=arguments;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:za=1<ma.length&&void 0!==ma[1]?ma[1]:{url:null,lineNumber:null,reuse:!1};Ka=za.url;Ib=za.lineNumber;C=za.reuse;Pb=Ab.commandHandler.progressIndicator;if(Ka){u.next=9;break}Pb.visible=!1;u.next=7;return Ab.prompt("Enter file location",{historyId:"lively.morphic-text editor url",useLastInput:!0});case 7:Ka=u.sent,Pb.visible=!0;case 9:if(!C){u.next=14;break}da=nc.arr.findAndGet(Ab.getWindows(),
function(O){return(O=O.targetMorph)&&O.isTextEditor&&O.location.split(":")[0]===Ka?O:null});if(!da){u.next=14;break}"number"===typeof Ib&&(da.lineNumber=Ib);return u.abrupt("return",da.getWindow().activate());case 14:return Ib&&(Ka+=":"+Ib),u.next=17,pd.import("./text-editor-408ce72a.js");case 17:return wa=u.sent,ca=wa["default"],u.abrupt("return",Ka?ca.openURL(Ka,nc.obj.dissoc(za,["url"])):null);case 20:case "end":return u.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},
{name:"open file for EDITOR",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb=arguments;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return za=1<Pb.length&&void 0!==Pb[1]?Pb[1]:{url:null,lineNumber:null},da.next=3,pd.import("./text-editor-408ce72a.js");case 3:return Ka=da.sent,Ib=Ka["default"],C=za.url,da.next=8,Ib.openAsEDITOR(C,{});case 8:return da.abrupt("return",da.sent);case 9:case "end":return da.stop()}},Fa)}));return function(Ab){return fd.apply(this,
arguments)}}()},{name:"open subserver controller",exec:function(){var fd=Tc(regeneratorRuntime.mark(function za(Ab,Fa){var Ka;return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return Ib.next=2,nc.loadPart("subserver controller");case 2:return Ka=Ib.sent,Ib.abrupt("return",Ka.openInWorld());case 4:case "end":return Ib.stop()}},za)}));return function(Ab,Fa){return fd.apply(this,arguments)}}()},{name:"[lively.installer] publish new version of a package",exec:function(){var fd=
Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka;return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return Ib.next=2,lively.modules.registerPackage(document.location.origin+"/lively.installer");case 2:return Ib.next=4,pd.import("./publish-new-package-version-11004979.js");case 4:return za=Ib.sent,Ka=za["default"],Ib.next=8,Ka();case 8:return Ib.abrupt("return",!0);case 9:case "end":return Ib.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},
{name:"report a bug",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){return regeneratorRuntime.wrap(function(za){for(;;)switch(za.prev=za.next){case 0:return window.open("https://github.com/LivelyKernel/lively.next/issues/new","_blank"),za.abrupt("return",!0);case 2:case "end":return za.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"fix font metric",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){return regeneratorRuntime.wrap(function(za){for(;;)switch(za.prev=
za.next){case 0:return Ab.env.fontMetric.reset(),Ab.withAllSubmorphsDo(function(Ka){return Ka.isText&&Ka.textLayout&&Ka.textLayout.reset()}),za.abrupt("return",!0);case 3:case "end":return za.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"delete change history",exec:function(fd){var ua=fd.env,Ab=ua.printStatus();ua.deleteHistory();fd.setStatusMessage(Ab);fd._componentsBrowser&&fd._componentsBrowser.reset();return!0}},{name:"install global inspect and show",exec:function(fd){window.show=
nc.show;window.inspect=nc.inspect;fd.setStatusMessage("inspect() and show() are now globally available");return!0}},{name:"save world",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Ib(Ab,Fa,za,Ka){var C,Pb,da;return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:C=Ka&&Ab.relayCommandExecutionToFocusedMorph(Ka);if(!C){wa.next=3;break}return wa.abrupt("return",C);case 3:return Fa=Object.assign({confirmOverwrite:!0,showSaveDialog:!0,moduleManager:nc.modules},
Fa),Pb=Ab.focusedMorph,wa.next=7,nc.interactivelySaveWorld(Ab,Fa);case 7:return da=wa.sent,Pb&&Pb.focus(),wa.abrupt("return",da);case 10:case "end":return wa.stop()}},Ib)}));return function(Ab,Fa,za,Ka){return fd.apply(this,arguments)}}()},{name:"freeze world",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){return regeneratorRuntime.wrap(function(za){for(;;)switch(za.prev=za.next){case 0:return za.next=2,nc.interactivelyFreezeWorld(Ab);case 2:case "end":return za.stop()}},Fa)}));
return function(Ab){return fd.apply(this,arguments)}}()},{name:"save this world",exec:function(fd,ua,Ab,Fa){return fd.execCommand("save world",Object.assign({confirmOverwrite:!0},ua,{showSaveDialog:!1}))}},{name:"load world",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da,wa,ca,ma,u,O=arguments;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:za=1<O.length&&void 0!==O[1]?O[1]:{};Ka=za.id;Ib=za.commit;C=za.name;Pb=za.ref;da=za.world;
wa=Ab.constructor;if(!da){P.next=5;break}return P.abrupt("return",wa.loadWorld(da,Ab,{moduleManager:nc.modules}));case 5:if(!Ka&&!Ib){P.next=7;break}return P.abrupt("return",wa.loadFromCommit(Ka||Ib,Ab,{moduleManager:nc.modules}));case 7:if(!C){P.next=9;break}return P.abrupt("return",wa.loadFromDB(C,Pb,Ab,{moduleManager:nc.modules}));case 9:return ca=nc.LoadingIndicator.open("loading project browser..."),P.next=12,ca.whenRendered();case 12:return ma=nc.morph({fill:nc.Color.black.withA(.5),extent:Ab.extent,
name:"dark overlay",opacity:0,reactsToPointer:!1,renderOnGPU:!0,halosEnabled:!1}),ma.openInWorld(nc.pt(0,0)),ma.animate({opacity:1,duration:300}),u=Ab.get("a project browser")||nc.part(nc.WorldBrowser,{name:"a project browser"}),u.name="a project browser",u.hasFixedPosition=!0,u.epiMorph=!0,u.bringToFront().alignInWorld(Ab),u.update(),u.focus(),nc.once(u,"remove",function(){return ma.animate({opacity:0}).then(function(){return ma.remove()})}),ca.remove(),P.abrupt("return",u);case 25:case "end":return P.stop()}},
Fa)}));return function(Ab){return fd.apply(this,arguments)}}()},{name:"add external package dependency to object",exec:function(){var fd=Tc(regeneratorRuntime.mark(function Fa(Ab){var za,Ka,Ib,C,Pb,da=arguments;return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:return za=1<da.length&&void 0!==da[1]?da[1]:{},Ka=za.target||Ab,Ib=Ka.metadata&&Ka.metadata.externalPackages||[],wa.next=5,Ab.editListPrompt("modify package dependencies of "+Ka,Ib);case 5:C=wa.sent;if(Pb=C.list){wa.next=
9;break}return wa.abrupt("return");case 9:return Pb.length?(Ka.metadata||(Ka.metadata={}),Ka.metadata.externalPackages=Pb):Ka.metadata&&delete Ka.metadata.externalPackages,wa.abrupt("return",!0);case 11:case "end":return wa.stop()}},Fa)}));return function(Ab){return fd.apply(this,arguments)}}()}];ac=nc.commands;nc["default"]=ac;var Yc=window.lively.FreezerRuntime.recorderFor("lively.ide/world.js");Yc.resource=xb;Yc.Rectangle=ib;Yc.Color=cb;Yc.pt=ub;Yc.arr=yb;Yc.fun=wb;Yc.obj=T;Yc.promise=ba;Yc.PropertyPath=
W;Yc.once=E;Yc.GridLayout=Ja;Yc.MorphicDB=Ac;Yc.easings=$d;Yc.HTMLMorph=gd;Yc.Text=ka;Yc.touchInputDevice=Bb;Yc.Icon=Fd;Yc.Morph=nd;Yc.VerticalLayout=Ga;Yc.HorizontalLayout=Pc;Yc.ProportionalLayout=sb;Yc.Image=Nd;Yc.inspect=ia;Yc.config=K;Yc.World=Id;Yc.loadMorphFromSnapshot=sa;Yc.loadObjectFromPartsbinFolder=pb;Yc.loadPart=La;Yc.uploadFile=Vc;Yc.prompts=Kb;Yc.moduleManager=N;Yc.LoadingIndicator=Wa;Yc.Halo=Ob;Yc.MorphHighlighter=yc;Yc.ProportionalLayoutHalo=Ta;Yc.GridLayoutHalo=Bd;Yc.FlexLayoutHalo=
Eb;Yc.Window=Db;Yc.Menu=Ra;Yc.completions=Ub;Yc.runEval=vc;Yc.getClassName=Oc;Yc.serialize=aa;Yc.StatusMessageDefault=fe;Yc.StatusMessageConfirm=Od;Yc.StatusMessageError=Hd;Yc.part=bc;Yc.worldCommands=ac;Yc.CommentData=Td;ac=Lc("LivelyWorld",function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/world.js"),Ab=ua.hasOwnProperty("LivelyWorld")&&"function"===typeof ua.LivelyWorld?ua.LivelyWorld:ua.LivelyWorld=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Cb(Ab,fd,[{key:"isIDEWorld",get:function(){return!0}},{key:"visibleBoundsExcludingTopBar",value:function(){var Fa=$world.getSubmorphNamed("lively top bar"),za=this.visibleBounds();return Fa?new Yc.Rectangle(za.x,za.y+Fa.height,za.width,za.height-Fa.height):za}},{key:"getListedComponents",value:function(){var Fa=this,za=this.withAllSubmorphsSelect(function(Ka){return Ka.isComponent&&!Fa.hiddenComponents.includes(Ka.name)});return Yc.arr.uniq([].concat(db(za),db(this.localComponents)))}},
{key:"activeWindow",value:function(){return this.getWindows().reverse().find(function(Fa){return Fa.isActive()})}},{key:"getWindows",value:function(){return this.submorphs.filter(function(Fa){return Fa.isWindow})}},{key:"activePrompt",value:function(){return this.getPrompts().reverse().find(function(Fa){return Fa.isActive()})}},{key:"getPrompts",value:function(){return this.submorphs.filter(function(Fa){return Fa.isPrompt})}},{key:"openInWindow",value:function(Fa){var za=(new Yc.Window(Object.assign({},
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{title:Fa.name,name:"window for "+Fa.name},{extent:Fa.extent.addXY(0,25),targetMorph:Fa}))).openInWorld();za.ensureNotOverTheTop();return za}},{key:"withTopBarDo",value:function(Fa){var za=this.get("lively top bar");if(za)return Fa(za.viewModel)}},{key:"onTopBarLoaded",value:function(){}},{key:"onKeyUp",value:function(Fa){this.withTopBarDo(function(za){return za.onKeyUp(Fa)})}},{key:"onKeyDown",value:function(Fa){Cb._get(Object.getPrototypeOf(Ab.prototype),
"onKeyDown",this).call(this,Fa);Fa.targetMorph===this&&this.withTopBarDo(function(za){return za.onKeyDown(Fa)})}},{key:"onMouseDown",value:function(Fa){Cb._get(Object.getPrototypeOf(Ab.prototype),"onMouseDown",this).call(this,Fa);var za=Fa.state.clickedOnMorph,Ka=this.activeWindow();Ka&&za===this&&Ka.deactivate();this.handleHaloCycle(Fa);Fa.state.menu&&Fa.state.menu.remove();this._tooltipViewer.mouseDown(Fa)}},{key:"onMouseUp",value:function(Fa){Fa.isCommandKey()&&Fa.stop();if(Fa.isAltDown()&&Yc.config.altClickDefinesThat){var za=
this.morphsContainingPoint(Fa.position)[0];za.owner.isHalo&&(za=za.owner.target);setTimeout(function(){return System.global.that=za},100);za.show();Fa.stop();console.log('Set global "that" to '.concat(za))}}},{key:"onDrag",value:function(Fa){}},{key:"whenReady",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){return regeneratorRuntime.wrap(function(Ib){for(;;)switch(Ib.prev=Ib.next){case 0:return Ib.next=2,this._styleLoading;case 2:return Ib.abrupt("return",!0);case 3:case "end":return Ib.stop()}},
Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"onLoad",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib=this;return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:this.opacity=0,this.onWindowResize(),lively.modules&&lively.modules.removeHook("fetch",window.__logFetch),this.animate({opacity:1,blur:3,duration:1E3,easing:Yc.easings.inOutExpo}).then(Tc(regeneratorRuntime.mark(function da(){var wa,ca;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=
ma.next){case 0:if(!(wa=window.worldLoadingIndicator)){ma.next=8;break}ca=wa.world();if(!ca||ca.env===Ib.env){ma.next=8;break}wa.withAllSubmorphsDo(function(u){return u._env=Ib.env});Ib.addMorph(wa);ma.next=7;return ca.whenRendered();case 7:ca.env.renderer.stopRenderWorldLoop();case 8:case "end":return ma.stop()}},da)}))),this.animate({blur:0,duration:1E3,easing:Yc.easings.inOutExpo}),document.body.style.overflowX="visible",document.body.style.overflowY="visible";case 7:case "end":return C.stop()}},
Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"isNotUnique",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ib(Ka){return regeneratorRuntime.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Yc.MorphicDB["default"].exists("world",Ka);case 2:C.t0=C.sent.exists;if(C.t0){C.next=12;break}C.t1=Yc;C.next=7;return System.decanonicalize("lively.morphic/styleguides");case 7:return C.t2=C.sent,C.t3=Ka+".json",C.next=11,C.t1.resource.call(C.t1,C.t2).join(C.t3).exists();
case 11:C.t0=C.sent;case 12:return C.abrupt("return",C.t0);case 13:case "end":return C.stop()}},Ib)}));return function(Ka){return Fa.apply(this,arguments)}}()},{key:"askForName",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return da.next=2,this.whenRendered();case 2:if(Ib){da.next=23;break}da.next=5;return this.prompt(["New Project\n",{},"Enter a name for this project:",{fontWeight:"normal"}],
{width:400,hasFixedPosition:!0,forceConfirm:!0});case 5:return Ib=da.sent,da.next=8,this.isNotUnique(Ib);case 8:if(!da.sent){da.next=21;break}da.next=11;return this.confirm("This Project name is already taken. Do you want to override it?",{hasFixedPosition:!0,width:400});case 11:C=da.sent;if(!C){da.next=20;break}da.next=15;return this.confirm("The old project will be lost! Are you sure you want to override?",{hasFixedPosition:!0,width:400});case 15:Pb=da.sent;if(!Pb){da.next=20;break}da.next=19;return Yc.MorphicDB["default"]["delete"]("world",
Ib);case 19:return da.abrupt("return",Ib);case 20:Ib=!1;case 21:da.next=2;break;case 23:return da.abrupt("return",Ib);case 24:case "end":return da.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"onWindowResize",value:function(Fa){Cb._get(Object.getPrototypeOf(Ab.prototype),"onWindowResize",this).call(this,Fa);"elastic"===this.resizePolicy&&this.execCommand("resize to fit window")}},{key:"nativeDrop_ensureUploadIndicator",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib=
this,C;return regeneratorRuntime.wrap(function(Pb){for(;;)switch(Pb.prev=Pb.next){case 0:return this._cachedDragIndicator||(this._cachedDragIndicator=Yc.loadObjectFromPartsbinFolder("upload-indicator")),Pb.next=3,this._cachedDragIndicator;case 3:C=Pb.sent,C.world()||C.openInWorld(),Yc.fun.debounceNamed("remove-upload-indicator",1E3,function(){Ib.nativeDrop_removeUploadIndicator()})();case 6:case "end":return Pb.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"nativeDrop_removeUploadIndicator",
value:function(){this._cachedDragIndicator&&this._cachedDragIndicator.then(function(Fa){return Fa.remove()})}},{key:"onNativeDragover",value:function(Fa){Fa.targetMorph===this&&this.nativeDrop_ensureUploadIndicator()}},{key:"onNativeDrop",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ib(Ka){var C=this,Pb,da,wa,ca,ma,u,O,P,fa,Qa,Ua,Gb,ta,mc,pc,zd,Pd,bd,Yd,le,Be,Ne,Re,nf,af,yf,Ig,re,Ld,fc,wd,Ie,ff,Pe,Gf,Vf,cd,Y;return regeneratorRuntime.wrap(function(Ba){for(;;)switch(Ba.prev=Ba.next){case 0:this.nativeDrop_removeUploadIndicator();
if(Ka.targetMorph===this){Ba.next=3;break}return Ba.abrupt("return");case 3:Pb=Ka.domEvt;da=Pb.dataTransfer.files;wa=document.location.origin;if(!da.length){Ba.next=94;break}ca=this.getCurrentUser();ma=ca.isGuestUser?"uploads/":"users/"+$world.getCurrentUser().name+"/uploads";if(!Ka.isAltDown()){Ba.next=15;break}Ba.next=12;return this.prompt("Choose upload location",{history:"lively.morphic-html-drop-file-upload-location",input:ma});case 12:if(ma=Ba.sent){Ba.next=15;break}return Ba.abrupt("return",
this.setStatusMessage("Canceled upload"));case 15:return Ba.next=17,this.confirm("Upload ".concat(da.length," file").concat(1<da.length?"s":"","?"));case 17:if(u=Ba.sent){Ba.next=20;break}return Ba.abrupt("return");case 20:O=new FormData;for(P=0;P<da.length;P++)O.append("file",da[P],da[P].name);Ua=Yc.LoadingIndicator.open("Uploading File");Ba.prev=23;Gb={};ta=function(mb){mb=mb.loaded/mb.total;Ua.progress=mb;Ua.status="Uploaded "+(100*mb).toFixed()+"%"};ca.isGuestUser||(Gb.Authorization="Bearer ".concat(ca.token));
fa=Yc.resource(System.baseURL,{headers:Gb,onProgress:ta,onLoad:function(mb){return Qa=mb}});fa=fa.join("/upload?uploadPath=".concat(encodeURIComponent(ma)));Ba.next=31;return fa.write(O);case 31:Ba.next=36;break;case 33:return Ba.prev=33,Ba.t0=Ba["catch"](23),Ba.abrupt("return",this.showError("Upload failed: ".concat(Ba.t0.message,"\n")));case 36:Ua.remove();Ba.prev=37;this.setStatusMessage("Uploaded ".concat(Qa.uploadedFiles.length," file"));mc=Qa.uploadedFiles.map(function(mb){var Ca=Yc.resource(wa).join(mb.path);
return Object.assign({},mb,{url:Ca.url,name:Ca.name()})});pc=[];zd=[];Pd=[];bd=zb(mc);try{for(bd.s();!(Yd=bd.n()).done;)le=Yd.value,le.type.startsWith("image/")?pc.push(le):le.type.startsWith("video")?zd.push(le):Pd.push(le)}catch(mb){bd.e(mb)}finally{bd.f()}if(!zd.length){Ba.next=67;break}Be=zb(zd);Ba.prev=47;Be.s();case 49:if((Ne=Be.n()).done){Ba.next=59;break}Re=Ne.value;Ba.t1=Object;Ba.next=54;return Yc.loadObjectFromPartsbinFolder("video morph");case 54:Ba.t2=Ba.sent,Ba.t3={videoURL:Re.url,name:Re.name},
Ba.t1.assign.call(Ba.t1,Ba.t2,Ba.t3).openInWorld();case 57:Ba.next=49;break;case 59:Ba.next=64;break;case 61:Ba.prev=61,Ba.t4=Ba["catch"](47),Be.e(Ba.t4);case 64:return Ba.prev=64,Be.f(),Ba.finish(64);case 67:pc.length&&pc.forEach(function(mb){var Ca=new Yc.Image({imageUrl:mb.url,autoResize:!0,name:mb.name});Ca.whenLoaded().then(Tc(regeneratorRuntime.mark(function Fc(){return regeneratorRuntime.wrap(function(ud){for(;;)switch(ud.prev=ud.next){case 0:return Ca.extent=Ca.naturalExtent.scaleBy(.8*C.visibleBounds().height/
Ca.height),Ca.openInWorld(),ud.next=4,Ca.whenRendered();case 4:Ca.center=C.visibleBounds().center();case 5:case "end":return ud.stop()}},Fc)})))});if(!Pd.length){Ba.next=88;break}nf=zb(Pd);Ba.prev=70;nf.s();case 72:if((af=nf.n()).done){Ba.next=80;break}yf=af.value;Ba.next=76;return this.confirm("open file ".concat(yf.name," (").concat(yf.type,")?"));case 76:(Ig=Ba.sent)&&this.execCommand("open file",{url:yf.url});case 78:Ba.next=72;break;case 80:Ba.next=85;break;case 82:Ba.prev=82,Ba.t5=Ba["catch"](70),
nf.e(Ba.t5);case 85:return Ba.prev=85,nf.f(),Ba.finish(85);case 88:Ba.next=93;break;case 90:Ba.prev=90,Ba.t6=Ba["catch"](37),this.showError(Ba.t6);case 93:return Ba.abrupt("return");case 94:re=Pb.dataTransfer.types;if(!re.includes("text/html")){Ba.next=112;break}Ld=Pb.dataTransfer.getData("text/html");fc=(new DOMParser).parseFromString(Ld,"text/html");wd=fc.querySelectorAll("img");if(1!==wd.length||!wd[0].src||!re.includes("text/uri-list")){Ba.next=105;break}Ie=wd[0].src;ff=new Yc.Image({imageUrl:Ie,
autoResize:!0,name:Yc.arr.last(Ie.split("/"))});ff.whenLoaded().then(function(){return ff.openInWorld()});Ba.next=111;break;case 105:return Ba.t7=Object,Ba.next=108,Yc.loadObjectFromPartsbinFolder("html-morph");case 108:Ba.t8=Ba.sent,Ba.t9={html:Ld},Ba.t7.assign.call(Ba.t7,Ba.t8,Ba.t9).openInWorld();case 111:return Ba.abrupt("return");case 112:Pe=0;case 113:if(!(Pe<Pb.dataTransfer.items.length)){Ba.next=132;break}Gf=Pb.dataTransfer.items[Pe];if("file"!==Gf.kind){Ba.next=128;break}Vf=Gf.getAsFile();
Ba.next=119;return this.confirm("Upload ".concat(Vf.name,"?"));case 119:cd=Ba.sent;if(!cd){Ba.next=126;break}Ba.next=123;return Yc.uploadFile(Vf,Vf.type);case 123:(Y=Ba.sent)&&Y.openInWorld(),Y.center=this.visibleBounds().center();case 126:Ba.next=129;break;case 128:"string"===Gf.kind&&Gf.getAsString(function(mb){return Yc.inspect(mb)});case 129:Pe++;Ba.next=113;break;case 132:case "end":return Ba.stop()}},Ib,this,[[23,33],[37,90],[47,61,64,67],[70,82,85,88]])}));return function(Ka){return Fa.apply(this,
arguments)}}()},{key:"menuItems",value:function(){var Fa=this;return[{title:"World menu"},{command:"undo",target:this},{command:"redo",target:this},{isDivider:!0},["Debugging",[{command:"delete change history",target:this},{command:"fix font metric",target:this},{command:"inspect server",target:this}]],["Tools",[{command:"open javascript workspace",target:this},{command:"open browser",target:this},{command:"choose and browse module",target:this},{command:"open code search",target:this},{command:"open file browser",
target:this},{command:"open shell workspace",target:this,tooltip:"Opens a workspace like interface\nthat allows you to trigger shell comands\nvia select + eval by pressing either ".concat((new Yc.Text).keysForCommand("doit")," or ").concat((new Yc.Text).keysForCommand("printit"))},{command:"open shell terminal",target:this,tooltip:"Opens a classic remote shell interface,\nthat allows you to send commands to a\nbash session running on the server.\nAlso comes with advanced git support."},{command:"open workspace",
args:{askForMode:!0},target:this}]],{isDivider:!0},{command:"run command",target:this},{command:"select morph",target:this},{command:"window switcher",target:this},["Exported Components",[["Toggle Select All",function(){0===Fa.getListedComponents().length?Fa.hiddenComponents=[]:Fa.hiddenComponents=Fa.withAllSubmorphsSelect(function(za){return za.isComponent}).map(function(za){return za.name})}]].concat(db(this.withAllSubmorphsSelect(function(za){return za.isComponent}).map(function(za){var Ka=Fa.hiddenComponents.includes(za.name);
return[[].concat(db(Yc.Icon.textAttribute(Ka?"square":"check-square")),["  "+za.name,{}]),function(){Fa.hiddenComponents=Ka?Yc.arr.without(Fa.hiddenComponents,za.name):[za.name].concat(db(Fa.hiddenComponents))}]})))],["Resize","static"===this.resizePolicy?[{command:"resize to fit window",target:this},{command:"resize manually",target:this},["switch to automatic resizing of world",function(){return Fa.resizePolicy="elastic"}]]:[["switch to manual resizing of world",function(){return Fa.resizePolicy=
"static"}]]],["Troubleshooting",[{command:"report a bug",target:this},{command:"clear storage and reload",target:this}]],{isDivider:!0},["Windows",[{command:"toggle minimize all windows",target:this},{command:"close all windows",target:this}]],{isDivider:!0},{command:"save world",target:this},{command:"load world",target:this}]}},{key:"openWorldMenu",value:function(Fa,za){var Ka=this.env.eventDispatcher.eventState;Ka.menu&&Ka.menu.remove();return Ka.menu=za&&za.length?Yc.Menu.openAtHand(za,{hand:Fa&&
Fa.hand||this.firstHand}):null}},{key:"onPaste",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ib(Ka){var C,Pb,da,wa,ca,ma,u,O,P,fa,Qa;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:Ua.prev=0;Pb=Ka.domEvt.clipboardData;if(!Pb.types.includes("application/morphic")){Ua.next=31;break}Ka.stop();da=JSON.parse(Pb.getData("application/morphic"));wa=[];Array.isArray(da)||(da=[da]);C=Yc.LoadingIndicator.open("pasting morphs...");ca=zb(da);Ua.prev=9;ca.s();case 11:if((ma=
ca.n()).done){Ua.next=21;break}u=ma.value;Ua.next=15;return Yc.loadMorphFromSnapshot(u,{moduleManager:Yc.moduleManager});case 15:O=Ua.sent,O.openInWorld(Ka.hand.position),u.copyMeta&&u.copyMeta.offset&&(P=u.copyMeta.offset,fa=P.x,Qa=P.y,O.moveBy(Yc.pt(fa,Qa))),wa.push(O);case 19:Ua.next=11;break;case 21:Ua.next=26;break;case 23:Ua.prev=23,Ua.t0=Ua["catch"](9),ca.e(Ua.t0);case 26:return Ua.prev=26,ca.f(),Ua.finish(26);case 29:this.halos().forEach(function(Gb){return Gb.remove()}),this.showHaloFor(wa);
case 31:Ua.next=36;break;case 33:Ua.prev=33,Ua.t1=Ua["catch"](0),this.showError(Ua.t1);case 36:return Ua.prev=36,C&&C.remove(),Ua.finish(36);case 39:case "end":return Ua.stop()}},Ib,this,[[0,33,36,39],[9,23,26,29]])}));return function(Ka){return Fa.apply(this,arguments)}}()},{key:"addCommentFor",value:function(){var Fa=Tc(regeneratorRuntime.mark(function C(Ka,Ib){var Pb,da,wa,ca=arguments;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return Pb=2<ca.length&&void 0!==
ca[2]?ca[2]:Yc.pt(0,0),da=new Yc.CommentData(Ib,Pb),this.morphCommentMap.has(Ka)?this.morphCommentMap.set(Ka,this.morphCommentMap.get(Ka).concat([da])):this.morphCommentMap.set(Ka,[da]),(wa=$world.getSubmorphNamed("Comment Browser"))&&wa.viewModel.addCommentForMorph(da,Ka),ma.abrupt("return",da);case 6:case "end":return ma.stop()}},C,this)}));return function(Ka,Ib){return Fa.apply(this,arguments)}}()},{key:"removeCommentFor",value:function(Fa,za){var Ka=$world.getSubmorphNamed("Comment Browser");
Ka&&Ka.viewModel.removeCommentForMorph(za,Fa);this.morphCommentMap.set(Fa,Yc.arr.without(this.morphCommentMap.get(Fa),za))}},{key:"emptyCommentsFor",value:function(Fa){var za=$world.getSubmorphNamed("Comment Browser");this.morphCommentMap.has(Fa)&&(za&&this.morphCommentMap.get(Fa).forEach(function(Ka){return za.viewModel.removeCommentForMorph(Ka,Fa)}),this.morphCommentMap.set(Fa,[]))}},{key:"commands",get:function(){return Yc.worldCommands.concat(Cb._get(Object.getPrototypeOf(Ab.prototype),"commands",
this)).concat([{name:"open in prototype box",exec:function(){var Fa=Tc(regeneratorRuntime.mark(function C(Ka,Ib){var Pb;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return da.next=2,Yc.loadPart("prototype box");case 2:Pb=da.sent,Pb.wrapProto(Ib.target);case 4:case "end":return da.stop()}},C)}));return function(Ka,Ib){return Fa.apply(this,arguments)}}()}])}},{key:"keybindings",get:function(){return Cb._get(Object.getPrototypeOf(Ab.prototype),"keybindings",this).concat(Yc.config.globalKeyBindings)}},
{key:"keybindings",set:function(Fa){Cb._set(Object.getPrototypeOf(Ab.prototype),"keybindings",Fa,this)}},{key:"halos",value:function(){return this.submorphs.filter(function(Fa){return Fa.isHalo})}},{key:"haloForPointerId",value:function(Fa){return this.submorphs.find(function(za){return za.isHalo&&za.state&&za.state.pointerId===Fa})}},{key:"showHaloFor",value:function(Fa){var za=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.firstHand&&this.firstHand.pointerId,Ka=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:!0;if(Yc.Halo)return za="function"===typeof Fa.createHalo?Fa.createHalo(Yc.Halo,za):new Yc.Halo({pointerId:za,target:Fa}),this.addMorph(za),Ka&&za.focus(),za.alignWithTarget(),za}},{key:"showHaloForSelection",value:function(Fa,za){return 0<Fa.length&&this.showHaloFor(Fa,za)}},{key:"layoutHaloForPointerId",value:function(){var Fa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.firstHand&&this.firstHand.pointerId;return this.submorphs.find(function(za){return za.isLayoutHalo&&
za.state&&za.state.pointerId===Fa})}},{key:"showLayoutHaloFor",value:function(Fa){var za=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.firstHand&&this.firstHand.pointerId,Ka=Fa===this?null:Fa.owner===this?Fa:Fa.ownerChain().slice(-2)[0];Ka=Ka?this.submorphs.indexOf(Ka)+1:this.submorphs.length;switch(Fa.layout.constructor){case Yc.ProportionalLayout:var Ib=new Yc.ProportionalLayoutHalo({container:Fa,pointerId:za});break;case Yc.HorizontalLayout:case Yc.VerticalLayout:Ib=new Yc.FlexLayoutHalo({container:Fa,
pointerId:za});break;case Yc.GridLayout:Ib=new Yc.GridLayoutHalo({container:this.container,pointerId:za})}return Ib&&this.addMorphAt(Ib,Ka)}},{key:"highlightMorph",value:function(Fa,za){return Yc.MorphHighlighter["for"](Fa,za,2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,3<arguments.length&&void 0!==arguments[3]?arguments[3]:[])}},{key:"removeHighlighters",value:function(){return Yc.MorphHighlighter.removeHighlighters(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this)}},{key:"visibleStatusMessages",
value:function(){return this.submorphs.filter(function(Fa){return Fa.isStatusMessage})}},{key:"visibleStatusMessagesFor",value:function(Fa){return this.submorphs.filter(function(za){return za.isStatusMessage&&za.targetMorph===Fa})}},{key:"logErrorPreperation",value:function(Fa){var za=String(Fa),Ka=Fa.stack||"";Ka&&Fa.message!==Fa.stack&&(Ka=String(Ka),0===Ka.indexOf(za)&&(Ka=Ka.slice(za.length)),za+="\n"+Ka);return za}},{key:"logError",value:function(Fa){this.setStatusMessage(this.logErrorPreperation(Fa),
Yc.StatusMessageError)}},{key:"showError",value:function(Fa){return this.logError(Fa)}},{key:"showErrorFor",value:function(Fa,za){return this.setStatusMessageFor(Fa,this.logErrorPreperation(za),Yc.StatusMessageError)}},{key:"setStatusMessageFor",value:function(Fa,za,Ka){var Ib=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5E3,C=4<arguments.length?arguments[4]:void 0;Ka||(Ka=Yc.StatusMessageDefault);this.visibleStatusMessagesFor(Fa).forEach(function(Pb){return Pb.remove()});C=Yc.part(Ka,{epiMorph:!0,
viewModel:Object.assign({slidable:!1,message:za},C)});this.openStatusMessage(C,Ib);C.alignAtBottomOf(Fa);C.targetMorph=Fa;C.fadeIn(300);if(C.removeOnTargetMorphChange&&Fa.isText)Yc.once(Fa,"selectionChange",C,"fadeOut",{converter:function(){return 200},garbageCollect:!0});return C}},{key:"setStatusMessage",value:function(Fa,za){var Ka=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5E3,Ib=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};za||(za=Yc.StatusMessageDefault);console[za===
Yc.StatusMessageError?"error":"log"](Fa);return Yc.config.verboseLogging?this.openStatusMessage(Yc.part(za,Object.assign({epiMorph:!0,viewModel:{message:Fa},hasFixedPosition:!0,width:300},Ib)),Ka):null}},{key:"openStatusMessage",value:function(Fa,za){this.addMorph(Fa);if(Fa.slidable){var Ka=this.visibleStatusMessages(),Ib=zb(Ka),C;try{for(Ib.s();!(C=Ib.n()).done;){var Pb=C.value;if(Ka.length<=(Yc.config.maxStatusMessages||0))break;!Pb.stayOpen&&Pb.slidable&&(Pb.remove(),Yc.arr.remove(Ka,Pb))}}catch(da){Ib.e(da)}finally{Ib.f()}Yc.arr.without(Ka,
Fa).forEach(function(){var da=Tc(regeneratorRuntime.mark(function ma(ca){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:!ca.isMaximized&&ca.slidable&&ca.slideTo(ca.position.subPt(Yc.pt(0,Fa.height+10)));case 1:case "end":return u.stop()}},ma)}));return function(ca){return da.apply(this,arguments)}}());Ka=this.visibleBounds().bottomRight().addXY(-20,-20);Fa.align(Fa.bounds().bottomRight(),Ka);Fa.topRight=Ka.addPt(Yc.pt(0,40));Fa.animate({bottomRight:Ka,duration:500})}"number"===
typeof za&&setTimeout(function(){return Fa.stayOpen||Fa.fadeOut()},za);return Fa}},{key:"addProgressBar",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ka(){var Ib,C,Pb,da,wa=arguments;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:return Ib=0<wa.length&&void 0!==wa[0]?wa[0]:{},C=Ib.location,Pb=void 0===C?"center":C,ca.next=4,Yc.loadObjectFromPartsbinFolder("progress bar");case 4:return da=ca.sent,Object.assign(da,{progress:0},Yc.obj.dissoc(Ib,["location"])),
this.addMorph(da),da.align(da[Pb],this.visibleBounds()[Pb]()),ca.abrupt("return",da);case 9:case "end":return ca.stop()}},Ka,this)}));return function(){return Fa.apply(this,arguments)}}()},{key:"withProgressBarDo",value:function(){var Fa=Tc(regeneratorRuntime.mark(function C(Ka,Ib){var Pb;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return da.next=2,this.addProgressBar(Ib);case 2:return Pb=da.sent,da.prev=3,da.next=6,Ka(Pb);case 6:return da.abrupt("return",da.sent);
case 7:return da.prev=7,Pb.remove(),da.finish(7);case 10:case "end":return da.stop()}},C,this,[[3,,7,10]])}));return function(Ka,Ib){return Fa.apply(this,arguments)}}()},{key:"openPrompt",value:function(){var Fa=Tc(regeneratorRuntime.mark(function Ib(Ka){var C=this,Pb,da,wa,ca=arguments;return regeneratorRuntime.wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return Pb=1<ca.length&&void 0!==ca[1]?ca[1]:{requester:null,animated:!1},da=this.focusedMorph,wa=this.visibleBounds(),ma.abrupt("return",
this.withRequesterDo(Pb.requester,function(){var u=Tc(regeneratorRuntime.mark(function fa(P){return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return Ka.openInWorld(),Ka.center=P,Ka.height>wa.height&&(Ka.height=wa.height-5),"function"===typeof Pb.customize&&Pb.customize(Ka),Pb.animated&&C.previousPrompt&&C.previousPrompt.world()&&C.previousPrompt.transitionTo&&C.previousPrompt.transitionTo(Ka),C.previousPrompt=Ka,Qa.abrupt("return",Yc.promise["finally"](Ka.activate(Pb),
function(){return da&&da.focus()}));case 7:case "end":return Qa.stop()}},fa)}));return function(P){return u.apply(this,arguments)}}()));case 4:case "end":return ma.stop()}},Ib,this)}));return function(Ka){return Fa.apply(this,arguments)}}()},{key:"withRequesterDo",value:function(){var Fa=Tc(regeneratorRuntime.mark(function C(Ka,Ib){var Pb,da,wa;return regeneratorRuntime.wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:da=this.visibleBounds().center();if(!Ka){ca.next=8;break}da=Ka.globalBounds().center();
Ka.isWorld&&(da=Ka.visibleBounds().center());if(!(Pb=Ka.getWindow())){ca.next=8;break}ca.next=7;return Pb.toggleFader(!0);case 7:da=Pb.globalBounds().center();case 8:return ca.next=10,Ib(da);case 10:return wa=ca.sent,Pb&&Pb.toggleFader(!1),ca.abrupt("return",wa);case 13:case "end":return ca.stop()}},C,this)}));return function(Ka,Ib){return Fa.apply(this,arguments)}}()},{key:"inform",value:function(){var Fa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{fontSize:16,requester:null,animated:!0};
return this.openPrompt(Yc.part(Yc.prompts.InformPrompt,{viewModel:Object.assign({label:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"no message"},Fa)}),Fa)}},{key:"prompt",value:function(Fa){var za=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{requester:null,input:"",historyId:null,useLastInput:!1,selectInput:!1};return this.openPrompt(Yc.part(Yc.prompts.TextPrompt,{viewModel:Object.assign({label:Fa},za)}),za)}},{key:"editPrompt",value:function(Fa){var za=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{requester:null,input:"",historyId:null,useLastInput:!1,textStyle:null,mode:null,evalEnvironment:null};return this.openPrompt(Yc.part(Yc.prompts.EditPrompt,{viewModel:Object.assign({label:Fa},za)}),za)}},{key:"passwordPrompt",value:function(Fa){var za=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{requester:null,input:""};return this.openPrompt(Yc.part(Yc.prompts.PasswordPrompt,{viewModel:Object.assign({label:Fa},za)}),za)}},{key:"confirm",value:function(Fa){var za=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{requester:null,animated:!0};return this.openPrompt(Yc.part(Yc.prompts.ConfirmPrompt,{viewModel:Object.assign({label:Fa},za)}),za)}},{key:"multipleChoicePrompt",value:function(Fa){var za=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{requester:null,animated:!0,choices:[]};return this.openPrompt(Yc.part(Yc.prompts.MultipleChoicePrompt,{viewModel:Object.assign({label:Fa},za)}),za)}},{key:"listPrompt",value:function(){var Fa=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:"",za=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],Ka=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{requester:null,onSelection:null,preselect:0};return this.openPrompt(Yc.part(Yc.prompts.ListPrompt,{viewModel:Object.assign({filterable:!1,padding:Yc.Rectangle.inset(3),label:Fa,items:za},Ka)}),Ka)}},{key:"filterableListPrompt",value:function(){var Fa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",za=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:[],Ka=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{requester:null,onSelection:null,preselect:0,multiSelect:!1,historyId:null,fuzzy:!1,actions:["default"],selectedAction:"default",theme:"dark"};if(Ka.prompt)return Ka.prompt.items=za,Ka.prompt.ui.list.selectedIndex=Ka.preselect||0,this.openPrompt(Ka.prompt.view,Ka);Fa=Yc.part(Yc.prompts.ListPrompt,{viewModel:Object.assign({filterable:!0,padding:Yc.Rectangle.inset(3),label:Fa,items:za},Ka)});return this.openPrompt(Fa,Ka)}},{key:"editListPrompt",
value:function(){var Fa=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{requester:null,multiSelect:!0,historyId:null};return this.openPrompt(Yc.part(Yc.prompts.EditListPrompt,{viewModel:Object.assign({label:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",multiSelect:!0,items:1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],padding:Yc.Rectangle.inset(3)},Fa)}),Fa)}},{key:"showLoadingIndicatorFor",value:function(Fa,za){return this.addMorph(Yc.LoadingIndicator.open(za,{center:Fa.globalBounds().center()}))}},
{key:"defaultMenuItems",value:function(Fa,za){function Ka(O){var P=this,fa=C.morphsContainingPoint(da.worldPoint(Yc.pt(0,0)));fa.pop();var Qa=fa.indexOf(da);fa=fa.slice(Qa+1);return fa.map(function(Ua){return[String(Ua),O.bind(P,Ua)]})}var Ib=this,C=this,Pb=[],da=Fa;this.reset&&"function"===typeof this.reset&&Pb.push(["Reset",function(){Ib.reset()}]);Pb.push(["Open in...",[["Window",function(){da.openInWindow()}]]]);Pb.push(["Add morph to...",{getItems:Ka.bind(da,function(O){return O.addMorph(da)})}]);
Pb.push(["Get halo on...",{getItems:Ka.bind(da,function(O){return O.world().showHaloFor(O)})}]);da.owner&&1<da.owner.submorphs.length&&Pb.push(["Arrange morph",[["Bring to front",function(){return da.owner.addMorph(da)}],["Send to back",function(){return da.owner.addMorphBack(da)}],["Fit to submorphs",Tc(regeneratorRuntime.mark(function P(){var fa,Qa,Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:return Gb.next=2,da.world().prompt("Padding around submorphs:",
{input:"Rectangle.inset(5)",historyId:"lively.morphic-fit-to-submorphs-padding-hist",requester:da});case 2:fa=Gb.sent;if("string"===typeof fa){Gb.next=5;break}return Gb.abrupt("return");case 5:return Gb.next=7,Yc.runEval(fa,{topLevelVarRecorder:{Rectangle:Yc.Rectangle}});case 7:Qa=Gb.sent,fa=(Ua=Qa.value)&&Ua.isRectangle?Ua:Yc.Rectangle.inset(0),da.undoStart("fitToSubmorphs"),da.fitToSubmorphs(fa),da.undoStop("fitToSubmorphs");case 13:case "end":return Gb.stop()}},P)}))]].concat(db(Yc.PropertyPath("master.auto").get(da)?
[["Adjust to Master Component Submorph Hierarchy",function(){return da.master.reconcileSubmorphs()}]]:[]))]);this.submorphs.length&&Pb.push(["Select all submorphs",function(){return da.world().showHaloFor(da.submorphs.slice())}]);var wa=[];da.startSteppingScripts?wa.push(["Start stepping",function(){da.startSteppingScripts()}]):wa.push(["Start stepping",Tc(regeneratorRuntime.mark(function fa(){var Qa,Ua,Gb,ta,mc,pc,zd,Pd,bd,Yd,le,Be,Ne,Re,nf,af,yf,Ig,re,Ld,fc,wd,Ie,ff;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=
Pe.next){case 0:return Qa=[],Pe.t0=zb,Pe.next=4,Yc.completions.getCompletions(function(){return da},"");case 4:Pe.t1=Pe.sent.completions,Ua=(0,Pe.t0)(Pe.t1),Pe.prev=6,Ua.s();case 8:if((Gb=Ua.n()).done){Pe.next=34;break}ta=Gb.value;mc=Da(ta,2);pc=mc[0];zd=mc[1];Pd=zb(zd);Pe.prev=12;Pd.s();case 14:if((bd=Pd.n()).done){Pe.next=24;break}Yd=bd.value;if(!Yd.startsWith("_")&&!Yd.startsWith("$")){Pe.next=18;break}return Pe.abrupt("continue",22);case 18:le=Yd.match(/^([^\(]+)\(?([^\)]+)?\)?$/)||[];Be=Da(le,
3);Ne=Be[1];Re=Be[2];if(Ne&&"function"===typeof da[Ne]){Pe.next=21;break}return Pe.abrupt("continue",22);case 21:Qa.push({isListItem:!0,string:"".concat(pc," ").concat(Yd),value:{selector:Ne,args:Re}});case 22:Pe.next=14;break;case 24:Pe.next=29;break;case 26:Pe.prev=26,Pe.t2=Pe["catch"](12),Pd.e(Pe.t2);case 29:return Pe.prev=29,Pd.f(),Pe.finish(29);case 32:Pe.next=8;break;case 34:Pe.next=39;break;case 36:Pe.prev=36,Pe.t3=Pe["catch"](6),Ua.e(Pe.t3);case 39:return Pe.prev=39,Ua.f(),Pe.finish(39);case 42:return Pe.next=
44,$world.filterableListPrompt("Select method to start",Qa,{requester:da,historyId:"lively.morphic-start-stepping-chooser"});case 44:nf=Pe.sent;af=Da(nf.selected,1);if(yf=af[0]){Pe.next=49;break}return Pe.abrupt("return");case 49:return Pe.next=51,$world.prompt("Steptime in ms (how of the method will be called)?",{input:100});case 51:Ig=Pe.sent;Ig=Number(Ig);if(!isNaN(Ig)){Pe.next=55;break}return Pe.abrupt("return");case 55:re=[Ig,yf.selector];if(!yf.args){Pe.next=70;break}Ld={targetModule:"lively://lively.morphic-stepping-args/eval.js"};
Pe.next=60;return $world.editPrompt("Arguments to pass",{input:"[".concat(yf.args,"]"),mode:"js",evalEnvironment:Ld});case 60:return fc=Pe.sent,Pe.next=63,Yc.runEval(fc,Ld);case 63:wd=Pe.sent;Ie=wd.value;ff=wd.isError;if(!ff){Pe.next=69;break}$world.inform("Error evaluating the arguments: ".concat(Ie));return Pe.abrupt("return");case 69:Array.isArray(Ie)&&re.push.apply(re,db(Ie));case 70:da.startStepping.apply(da,re);case 71:case "end":return Pe.stop()}},fa,null,[[6,36,39,42],[12,26,29,32]])}))]);
0!==da.tickingScripts.length&&wa.push(["Stop stepping",function(){return da.stopStepping()}]);0!==wa.length&&Pb.push(["Stepping",wa]);Pb.push(["Change Tooltip",Tc(regeneratorRuntime.mark(function Qa(){return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:return Ua.next=2,da.world().prompt("Enter Tooltip",{placeholder:"Description",input:da.tooltip||""});case 2:da.tooltip=Ua.sent;case 3:case "end":return Ua.stop()}},Qa)}))]);var ca=["Morphic properties",[]];Pb.push(ca);
Pb.push(["display serialization info",Tc(regeneratorRuntime.mark(function Ua(){var Gb,ta,mc;return regeneratorRuntime.wrap(function(pc){for(;;)switch(pc.prev=pc.next){case 0:return pc.next=2,pd.import("./debugging-088083aa.js");case 2:Gb=pc.sent,ta=Gb.SnapshotInspector,mc=Yc.serialize(da),ta.forSnapshot(mc).openSummary();case 6:case "end":return pc.stop()}},Ua)}))]);Pb.push(["display object report",Tc(regeneratorRuntime.mark(function Gb(){var ta,mc,pc;return regeneratorRuntime.wrap(function(zd){for(;;)switch(zd.prev=
zd.next){case 0:return zd.next=2,pd.import("./debugging-088083aa.js");case 2:ta=zd.sent,mc=ta.SnapshotInspector,pc=Yc.serialize(da),mc.forSnapshot(pc).openObjectReport();case 6:case "end":return zd.stop()}},Gb)}))]);var ma=Yc.Icon.textAttribute("check-square"),u=Yc.Icon.textAttribute("square");Object.assign(ma[1],{"float":"none",display:"inline"});["grabbable","draggable","acceptsDrops","halosEnabled"].forEach(function(Gb){return ca[1].push([[].concat(db(Fa[Gb]?ma:u),[" "+Gb,{"float":"none"}]),function(){return Fa[Gb]=
!Fa[Gb]}])});Pb.push(["export to HTML",Tc(regeneratorRuntime.mark(function ta(){var mc,pc;return regeneratorRuntime.wrap(function(zd){for(;;)switch(zd.prev=zd.next){case 0:return zd.next=2,pd.import("./html-generator-e89b06c0.js");case 2:return mc=zd.sent,pc=mc.generateHTML,zd.t0=Yc.HTMLMorph,zd.t1="exported-"+Fa.name,zd.next=8,pc(Fa,null,{isFragment:!0,addStyles:!1});case 8:zd.t2=zd.sent,zd.t3={name:zd.t1,html:zd.t2},(new zd.t0(zd.t3)).openInWorld();case 11:case "end":return zd.stop()}},ta)}))]);
Pb.push(["Remove Morph",function(){return da.abandon(!0)}]);Pb.push(["Open Inspector",function(){return da.inspect()}]);Pb.push({isDivider:!0});Pb.push(["Add comment",Tc(regeneratorRuntime.mark(function mc(){var pc,zd,Pd,bd;return regeneratorRuntime.wrap(function(Yd){for(;;)switch(Yd.prev=Yd.next){case 0:return Yd.next=2,$world.prompt("Enter comment");case 2:pc=Yd.sent;if(!pc){Yd.next=11;break}zd=Yc.pt(0,0);za&&!za.halo&&(Pd=da.localize(za.position).x/da.width,bd=da.localize(za.position).y/da.height,
zd=Yc.pt(Pd,bd));Yd.next=8;return $world.addCommentFor(da,pc,zd);case 8:$world.setStatusMessage("Comment saved",Yc.StatusMessageConfirm);Yd.next=12;break;case 11:$world.setStatusMessage("Comment not saved",Yc.StatusMessageError);case 12:case "end":return Yd.stop()}},mc)}))]);return Pb}},{key:"defaultConnectionMenuItems",value:function(Fa){return Fa.attributeConnections&&Fa.attributeConnections.length?Fa.attributeConnections.map(function(za){return[String(za),[["show",Tc(regeneratorRuntime.mark(function Ib(){var C,
Pb;return regeneratorRuntime.wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return da.next=2,pd.import("./fabrik-d8273ca3.js");case 2:C=da.sent,Pb=C.interactivelyShowConnection,Pb(za);case 5:case "end":return da.stop()}},Ib)}))],["edit",Tc(regeneratorRuntime.mark(function C(){var Pb,da;return regeneratorRuntime.wrap(function(wa){for(;;)switch(wa.prev=wa.next){case 0:return wa.next=2,pd.import("./fabrik-d8273ca3.js");case 2:Pb=wa.sent,da=Pb.interactivelyReEvaluateConnection,da(za);case 5:case "end":return wa.stop()}},
C)}))],["disconnect",function(){za.disconnect();$world.setStatusMessage("disconnected "+za)}]]]}):null}},{key:"defaultSourceDataBindings",value:function(Fa){var za=Fa.propertiesAndPropertySettings().properties,Ka=Yc.arr.groupByKey(Object.keys(za).map(function(C){C=Object.assign({name:C},za[C]);return C.group&&C.group.startsWith("_")?null:C}).filter(Boolean),"group");Fa=["core","geometry","interaction","styling","layouting"];var Ib=[];Fa.forEach(function(C){return Ib.push(Ka[C])});Yc.arr.withoutAll(Ka.keys(),
Fa).forEach(function(C){return Ib.push(Ka[C])});return Ib}},{key:"targetDataBindings",value:function(Fa){for(var za=[],Ka=Fa;Ka!==Object.prototype;){var Ib=Ka===Fa?String(this):Yc.getClassName(Ka),C=null,Pb=Yc.obj.getOwnPropertyDescriptors(Ka),da=Object.getPrototypeOf(Ka),wa;for(wa in Pb){var ca=Pb[wa].value;"function"!==typeof ca||ca===Ka.constructor||wa.startsWith("$")||wa.startsWith("_")||(C||(C=[]),ca=Yc.fun.argumentNames(ca),C.push({group:Ib+" methods",signature:"".concat(wa,"(").concat(ca.join(", "),
")"),name:wa}))}C&&za.push(C);Ka=da}return this.defaultSourceDataBindings(Fa).concat(za)}},{key:"defaultConnectMenuItems",value:function(Fa,za){var Ka=this,Ib=this.defaultSourceDataBindings(za),C=za.world();Ib=Ib.map(function(Pb){return[Pb[0].group||"uncategorized",Pb.map(function(da){return[da.name,Fa?function(){return Fa(da.name,za,da)}:Tc(regeneratorRuntime.mark(function ca(){var ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,pd.import("./fabrik-d8273ca3.js");
case 2:ma=O.sent,u=ma.interactiveConnectGivenSource,u(za,da.name);case 5:case "end":return O.stop()}},ca)}))]})]});C&&Ib.push(["custom...",Fa?function(){return Fa("custom...",za,null)}:Tc(regeneratorRuntime.mark(function da(){var wa,ca,ma;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,pd.import("./fabrik-d8273ca3.js");case 2:return wa=u.sent,ca=wa.interactiveConnectGivenSource,u.next=6,C.prompt("Enter custom connection point",{requester:za,historyId:"lively.morphic-custom-connection-points",
useLastInput:!0});case 6:(ma=u.sent)&&ca(Ka,ma);case 8:case "end":return u.stop()}},da)}))]);return Ib}},{key:"updateVisibleWindowMorphs",value:function(){var Fa=this;Cb._get(Object.getPrototypeOf(Ab.prototype),"updateVisibleWindowMorphs",this).call(this);this.halos().forEach(function(za){za.maskBounds=Fa.visibleBounds()})}},{key:"handleHaloCycle",value:function(Fa){var za=Fa.state.clickedOnMorph,Ka=Fa.isCommandKey(),Ib=Fa.isShiftDown(),C;Ka&&!za.isHalo&&(Ka=C=Fa.world.morphsContainingPoint(Fa.position),
C=C.filter(function(Pb){return Pb.halosEnabled}),Ka=Ka.filter(function(Pb){return Pb.halosEnabled}),C=Ka[0]||C[0]);Ib&&!za.isHaloItem&&C&&Fa.halo&&Fa.halo.borderBox!==C?Fa.halo.addMorphToSelection(C):(za=Fa.halo&&!Fa.targetMorphs.find(function(Pb){return Pb.isHaloItem||Pb.keepHalo&&Pb.keepHalo(Fa)}),Ib=Fa.layoutHalo&&!Fa.targetMorphs.find(function(Pb){return Pb.isHaloItem}),Ka=(!Fa.halo||za)&&C,Ib&&Fa.layoutHalo.remove(),za&&(Fa.halo.remove(),this.withTopBarDo(function(Pb){Pb.stylingPalette&&Pb.stylingPalette.clearFocus();
Pb.sideBar&&Pb.sideBar.clearFocus()})),Ka&&(Fa.stop(),this.showHaloFor(C,Fa.domEvt.pointerId)))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LivelyWorld"}},{key:"properties",get:function(){return{localComponents:{initialize:function(){var Fa=this;this.whenRendered().then(function(){Fa.localComponents?Fa.localComponents.forEach(function(){var za=Tc(regeneratorRuntime.mark(function C(Ib){var Pb,da,wa,ca,ma,u;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(Ib.owner){O.next=
23;break}Pb=Ib.withAllSubmorphsSelect(function(P){return P.master&&!P.master._appliedMaster});da=zb(Pb);O.prev=3;da.s();case 5:if((wa=da.n()).done){O.next=11;break}ca=wa.value;O.next=9;return ca.master.applyIfNeeded(!0);case 9:O.next=5;break;case 11:O.next=16;break;case 13:O.prev=13,O.t0=O["catch"](3),da.e(O.t0);case 16:return O.prev=16,da.f(),O.finish(16);case 19:ma=Fa.withAllSubmorphsSelect(function(P){return P.master&&P.master.uses(Ib)}),u=Fa.localComponents.filter(function(P){return P.master&&
P.master.uses(Ib)}),ma.forEach(function(P){P.requestMasterStyling()}),u.forEach(function(P){return P.master.applyIfNeeded(!0)});case 23:case "end":return O.stop()}},C,null,[[3,13,16,19]])}));return function(Ib){return za.apply(this,arguments)}}()):Fa.localComponents=Fa.withAllSubmorphsSelect(function(za){return za.isComponent})})}},name:{set:function(Fa){this.setProperty("name",Fa);document.title="lively.next - ".concat(Fa)}},hiddenComponents:{initialize:function(){this.hiddenComponents=[]}},fill:{defaultValue:Yc.Color.rgb(81,
90,90)},draggable:{readOnly:!0,get:function(){return!Yc.touchInputDevice}},morphCommentMap:{initialize:function(){this.morphCommentMap=new Map},doc:"Stores a mapping from Morphs to an Array with their comments (if they have any)."}}}}],ua,{pathInPackage:function(){return"./world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1392,
end:47806})}(Yc.World));Yc.LivelyWorld=ac;Yc.LivelyWorld=ac;ac=Lc("SelectionElement",function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/world.js"),Ab=ua.hasOwnProperty("SelectionElement")&&"function"===typeof ua.SelectionElement?ua.SelectionElement:ua.SelectionElement=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,void 0,[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"SelectionElement"}},{key:"properties",get:function(){return{borderColor:{defaultValue:Yc.Color.red},borderWidth:{defaultValue:1},fill:{defaultValue:Yc.Color.transparent},epiMorph:{defaultValue:!0},isSelectionElement:{readOnly:!0,get:function(){return!0}}}}}],ua,{pathInPackage:function(){return"./world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",
version:"0.1.0"}}},{start:47814,end:48251})}(Yc.Morph));Yc.SelectionElement=ac;Yc.SelectionElement=ac;ac=Lc("Selection",function(fd){var ua=window.lively.FreezerRuntime.recorderFor("lively.ide/world.js"),Ab=ua.hasOwnProperty("Selection")&&"function"===typeof ua.Selection?ua.Selection:ua.Selection=function(Fa){if(!Fa||!Fa[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Cb(Ab,fd,void 0,[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"Selection"}},{key:"properties",get:function(){return{fill:{defaultValue:Yc.Color.gray.withA(.2)},borderWidth:{defaultValue:2},borderColor:{defaultValue:Yc.Color.gray},isSelectionElement:{readOnly:!0,get:function(){return!0}}}}}],ua,{pathInPackage:function(){return"./world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:48259,end:48640})}(Yc.Morph));Yc.Selection=ac;Yc.Selection=ac}}});