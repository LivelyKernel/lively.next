System.register("./__root_module__-c4f77fb9.js kld-intersections ./index-f69ab412.js ./index-cb8cbefd.js ./index-2a389db9.js ./color-picker-362ec312.js ./editor-plugin-f1f42a9c.js ./index-d5709707.js ./editor-plugin-29e6a287.js ./index-a9da81db.js".split(" "),function(){var ra,jb,pb,Ub,Jb,jd,uc,nd,wc,Cc,Mc,Bd,re,Ce,be,Sb,qc,od,Tb,wd,Fd,fc,ic,Ab,jc,Bc,ad,bd,ob,kb,tb,Aa,Fa,Ba,wa,Na,La,Wa,Gb,Rb,Bb,ba;return{setters:[function(xa){ra=xa.aw;jb=xa.an;pb=xa.aC;Ub=xa.aa;Jb=xa.a3;jd=xa.ax;uc=xa.au;nd=
xa.aj;wc=xa.C;Cc=xa.a2;Mc=xa.a6;Bd=xa.$;re=xa.a_;Ce=xa.P;be=xa.a8;Sb=xa.aD;qc=xa.ap;od=xa.aZ;Tb=xa.as;wd=xa.aq;Fd=xa.ab;fc=xa.bp;ic=xa.br;Ab=xa.bO;jc=xa.b4;Bc=xa.bk;ad=xa.aP;bd=xa.l;ob=xa.a1;kb=xa.bP;tb=xa.aY;Aa=xa.a$;Fa=xa.at;Ba=xa.a4;wa=xa.aV;Na=xa.av;La=xa.bQ},function(){},function(){},function(){},function(xa){Wa=xa.d;Gb=xa.s;Rb=xa.I;Bb=xa.M},function(){},function(xa){ba=xa.I},function(){},function(){},function(){}],execute:function(){function xa(ab){var Dc=ab.sourceObj,Hc=ab.targetObj;Dc.isMorph&&
Hc.isMorph?(Dc.show(),Hc.show(),Ua.showConnector&&Ua.showConnector(Dc,Hc)):Ua.show(String(ab))}function M(ab){var Dc=ab.sourceObj,Hc=ab.sourceAttrName,Xa=ab.targetObj,bb=ab.targetMethodName,cb=ab.getConverter();ab=ab.getUpdater();return Ua.printConnectionElements(Dc,Hc,Xa,bb,cb,ab)}function ha(ab,Dc,Hc,Xa,bb,cb){ab="/* global connect, source, target */\nconnect(source, '"+Dc+"', target, '"+Xa+"'";if(bb||cb)ab+=", {\n";bb&&(ab+="  converter: "+bb);bb&&cb&&(ab+=",");bb&&(ab+="\n");cb&&(ab+="  updater: "+
cb+"\n");if(bb||cb)ab+="}";return ab+");"}function Ka(ab,Dc){var Hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Xa){if(1==Xa.nextAddress)return Xa.yield(Ua.InteractiveMorphSelector.selectMorph(),2);Hc=Xa.yieldResult;return Xa.return(Hc?Ua.interactiveConnectGivenSourceAndTarget(ab,Dc,Hc):null)})}function $a(ab,Dc,Hc,Xa){var bb,cb,Sc,sd,Ud;return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){switch(hc.nextAddress){case 1:bb=Hc&&Hc.world().targetDataBindings(Hc);cb=ab.world();
if(!bb||!bb.length)return cb.setStatusMessage("connect canceled"),hc.return();if(Dc){hc.jumpTo(2);break}Sc=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Ua.arr.flatten(ab.world().targetDataBindings(ab)).map(function(Ed){return{isListItem:!0,string:Ed.signature||Ed.name,value:Ed}})));return hc.yield(cb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",
{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],Sc,{filterable:!0}),3);case 3:Dc=hc.yieldResult;if("canceled"==Dc.status)return hc.return();Dc=Dc.selected[0];Dc=Dc.custom?"sourceAttribute":Dc.name;case 2:return sd=[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Ua.arr.flatten(bb).map(function(Ed){return{isListItem:!0,value:Ed,string:Ed.signature||Ed.name}}))),hc.yield(cb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],sd,{filterable:!0}),4);case 4:Ud=hc.yieldResult;if("canceled"==Ud.status)return hc.return();Ud=Ud.selected[0];return hc.yield(Ua.interactivelyEvaluateConnection({sourceObj:ab,sourceAttr:Dc,targetObj:Hc,targetAttr:Ud.custom?"targetAttribute":Ud.name,onConnect:Xa,prompt:"Edit and confirm connection:"}),0)}})}function $b(ab,Dc,Hc,Xa){Dc=void 0===Dc?"confirm connection":Dc;var bb,cb,Sc,sd,Ud,hc,Ed;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ac){bb=
ab;cb=bb.sourceObj;Sc=bb.sourceAttrName;sd=bb.targetObj;Ud=bb.targetMethodName;hc=ab.getConverter();Ed=ab.getUpdater();return Ac.return(Ua.interactivelyEvaluateConnection({sourceObj:cb,sourceAttr:Sc,targetObj:sd,targetAttr:Ud,converter:hc,updater:Ed,prompt:Dc,highlight:Hc,onConnect:Xa}))})}function Tc(ab,Dc,Hc,Xa,bb){Xa=void 0===Xa?{}:Xa;bb=Ua.rect(0).sides.concat(Ua.rect(0).corners);Hc=Hc||new Ua.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Ua.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Ua.Color.transparent,
nativeCursor:"auto"},end:{fill:Ua.Color.orange}}},Xa,{hasFixedPosition:!0}));Hc.startPoint.attachTo(ab,"rightCenter");Dc.isMorph?(Xa=Dc.globalBounds().partNameNearest(bb,ab.globalPosition),ab.globalPosition.equals(Dc.globalBounds().partNamed(Xa))&&Dc.globalBounds().partNameNearest(Ua.arr.without(bb,Xa),ab.globalPosition),Hc.endPoint.attachTo(Dc,"leftCenter")):(bb=ab.globalBounds().topRight().addPt(Ua.pt(100,0)),Dc=Ua.morph({type:"label",value:Dc.toString(),styleClasses:["Tooltip"],padding:Ua.rect(8,
4)}).openInWorld(bb),Dc.position=ab.world().bounds().translateForInclusion(Dc.bounds()).topLeft(),Ua.once(Hc,"remove",Dc,"remove"),Hc.endPoint.attachTo(Dc,"leftCenter"));return Hc}function Yb(ab){var Dc,Hc,Xa,bb,cb,Sc,sd,Ud,hc,Ed,Ac,Jd,ka,Ra,Ha,Ya,H,ea,Oa,sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Lb){switch(Lb.nextAddress){case 1:Dc=ab;Hc=Dc.sourceObj;Xa=Dc.sourceAttr;bb=Dc.targetObj;cb=Dc.targetAttr;Sc=Dc.converter;sd=Dc.updater;Ud=Dc.prompt;hc=void 0===Dc.highlight?!0:Dc.highlight;
Ed=Dc.onConnect;Ac="lively://lively.bindings-interactive-connect/x"+Hc.id;Jd={context:window,format:"esm",targetModule:Ac,classTransform:Ua.classToFunctionTransform};ka=Ua.printConnectionElements(Hc,Xa,bb,cb,Sc,sd);bb.isMorph&&Hc.isMorph&&(Ra=bb.propertiesAndPropertySettings().properties[cb]||{type:typeof bb[cb]},Ha=Ra.type,Ya=Hc.propertiesAndPropertySettings().properties[Xa]||{type:typeof Hc[Xa]},H=Ya.type,H!==Ha&&(Ud="Edit and confirm connection:"));ea={};Object.assign(lively.modules.module(Ac).recorder,
(ea.source=Hc,ea.target=bb,ea.connect=uc,ea.once=nd,ea[Xa]=Hc[Xa],ea));if(!Ud){Oa=ka;Lb.jumpTo(2);break}return Lb.yield($world.editPrompt(Ud,{input:ka,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Jd,animated:!1}),3);case 3:if(Oa=Lb.yieldResult,!Oa)return $world.setStatusMessage("connect canceled"),Lb.return();case 2:return Lb.yield(lively.vm.runEval(Oa,Jd),4);case 4:sb=Lb.yieldResult;if(sb.isError)return $world.logError(sb.value),Lb.return(Yb({sourceObj:Hc,
sourceAttr:Xa,targetObj:bb,targetAttr:cb,converter:Sc,updater:sd,prompt:"confirm connection",highlight:hc,onConnect:Ed}));hc&&($world.setStatusMessage("connected!",Ua.Color.green),Ua.interactivelyShowConnection(sb.value));"function"===typeof Ed&&Ed(sb);Lb.jumpToEnd()}})}var ub=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");ub.Inspector=ba;var qd=function(ab){var Dc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Hc=Dc.hasOwnProperty("ProtoInspector")&&"function"===typeof Dc.ProtoInspector?
Dc.ProtoInspector:Dc.ProtoInspector=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(Hc,ab,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(ub.Inspector);qd=ub.ProtoInspector;ub.default=qd;var Uc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");Uc.Morph=jb;Uc.touchInputDevice=pb;Uc.easings=Ub;Uc.pt=Jb;Uc.fun=jd;Uc.connect=uc;ub=function(ab){var Dc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Hc=Dc.hasOwnProperty("MorphicSideBar")&&"function"===typeof Dc.MorphicSideBar?Dc.MorphicSideBar:Dc.MorphicSideBar=function(Xa){Xa&&
Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(Hc,ab,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",value:function(Xa){Xa=void 0===Xa?!0:Xa;if(this.respondsToVisibleWindow){var bb=$world.visibleBounds(),cb=navigator.standalone&&Uc.touchInputDevice?25:0;this.height=bb.height-cb;this.top=cb+bb.top();cb=this.get("horizontal resizer");cb.height=this.height;cb.top=0;Xa&&(this.visible?this.topLeft=
bb.topLeft():this.topRight=bb.topLeft())}}},{key:"switchMode",value:function(Xa){"inspector"==Xa&&this.showInspector();"connections"==Xa&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(Xa){var bb=this,cb,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sd){switch(sd.nextAddress){case 1:cb=
$world.visibleBounds();Sc=navigator.standalone&&Uc.touchInputDevice?25:0;bb.height=cb.height-Sc;bb.top=Sc+cb.top();if(Xa)return $world.addMorph(bb,$world.get("lively top bar")),bb.topRight=cb.topLeft(),bb.attachToWorld($world),bb.visible=!0,sd.yield(bb.whenRendered(),5);bb.detachFromWorld($world);return sd.yield(bb.animate({opacity:0,topRight:cb.topLeft(),duration:300}),4);case 4:bb.visible=!1;bb.remove();sd.jumpTo(0);break;case 5:return bb.onWorldResize(!1),bb.get("scene graph").adjustProportions(),
sd.yield(bb.animate({opacity:1,easing:Uc.easings.outCirc,topLeft:cb.topLeft(),duration:300}),6);case 6:bb.get("scene graph").refresh(),sd.jumpToEnd()}})}},{key:"attachToWorld",value:function(Xa){Uc.connect(Xa,"onChange",this,"onHierarchyChange",{garbageCollect:!0});Uc.connect(Xa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});Uc.connect(Xa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Xa){var bb=this;Xa.attributeConnections.forEach(function(cb){cb.targetObj===
bb&&cb.disconnect()})}},{key:"selectNode",value:function(Xa){this.getSubmorphNamed("scene graph").selectMorphInTarget(Xa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(Xa)}},{key:"onHierarchyChange",value:function(Xa){var bb=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if("addMorphAt"===Xa.selector||"removeMorph"===Xa.selector||"name"===Xa.prop){cb=bb._sceneGraph||(bb._sceneGraph=bb.getSubmorphNamed("scene graph"));if(!cb||!cb.owner.visible||Xa.target&&
Xa.target.isHand||Xa.target&&cb.ignoreMorph(Xa.target)||Xa.args&&!Xa.args[0].isHalo&&cb.ignoreMorph(Xa.args[0])||Xa.target.ownerChain().find(function(sd){return cb.ignoreMorph(sd)}))return Sc.return();Uc.fun.debounceNamed("scene-graph-update",50,function(){return cb.refresh()})()}Sc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Dc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},{start:226,end:3668})}(Uc.Morph);ub=Uc.MorphicSideBar;Uc.default=ub;var Ua=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Ua.interactivelyShowConnection=xa;Ua.printConnection=M;Ua.printConnectionElements=ha;Ua.interactiveConnectGivenSource=Ka;Ua.interactiveConnectGivenSourceAndTarget=
$a;Ua.interactivelyReEvaluateConnection=$b;Ua.visualizeConnection=Tc;Ua.interactivelyEvaluateConnection=Yb;Ua.connect=uc;Ua.once=nd;Ua.Color=wc;Ua.rect=Cc;Ua.pt=Jb;Ua.arr=Mc;Ua.promise=Bd;Ua.properties=re;Ua.Path=Ce;Ua.obj=be;Ua.HorizontalLayout=Sb;Ua.Morph=jb;Ua.VerticalLayout=qc;Ua.StyleSheet=od;Ua.Icon=Tb;Ua.GridLayout=wd;Ua.morph=Fd;Ua.TreeData=fc;Ua.Tree=ic;Ua.Leash=Ab;Ua.LabeledCheckBox=jc;Ua.SearchField=Bc;Ua.showConnector=Wa;Ua.show=Gb;Ua.InteractiveMorphSelector=Rb;Ua.MorphHighlighter=Bb;
Ua.Window=ad;Ua.classToFunctionTransform=bd;Ua.interactivelyShowConnection=xa;Ua.interactivelyShowConnection=xa;Ua.printConnection=M;Ua.printConnection=M;Ua.printConnectionElements=ha;Ua.printConnectionElements=ha;Ua.interactiveConnectGivenSource=Ka;Ua.interactiveConnectGivenSource=Ka;Ua.interactiveConnectGivenSourceAndTarget=$a;Ua.interactiveConnectGivenSourceAndTarget=$a;Ua.interactivelyReEvaluateConnection=$b;Ua.interactivelyReEvaluateConnection=$b;Ua.visualizeConnection=Tc;Ua.visualizeConnection=
Tc;Ua.interactivelyEvaluateConnection=Yb;Ua.interactivelyEvaluateConnection=Yb;var lb=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");lb.Tree=ic;lb.TreeData=fc;lb.morph=Fd;lb.Icon=Tb;lb.HorizontalLayout=Sb;lb.easings=Ub;lb.Morph=jb;lb.Color=wc;lb.Rectangle=ob;lb.rect=Cc;lb.pt=Jb;lb.connect=uc;lb.noUpdate=kb;lb.disconnect=tb;lb.disconnectAll=Aa;lb.once=nd;lb.arr=Mc;lb.num=Fa;lb.fun=jd;lb.tree=Ba;lb.promise=Bd;lb.ConnectionHalo=_missingExportShim;lb.getClassName=wa;ub=function(ab){var Dc=
lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hc=Dc.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Dc.InteractiveTreeContainer?Dc.InteractiveTreeContainer:Dc.InteractiveTreeContainer=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(Hc,ab,[{key:"onChildRemoved",value:function(Xa){}},{key:"onChildAdded",value:function(Xa){}},{key:"toggleSelected",value:function(Xa){if(this.tree){var bb=
this.tree,cb=bb.selectionFontColor,Sc=bb.nonSelectionFontColor;this.submorphs.filter(function(sd){return!sd._isControlElement&&sd.styleClasses.includes("Label")}).forEach(function(sd){sd.fontColor=Xa?cb:Sc})}}},{key:"onGrab",value:function(Xa){var bb=this.tree,cb=this.node;this.fill=lb.Color.gray.withA(.5);this.fontColor=bb.selectionFontColor;this.opacity=.8;ra._get(Object.getPrototypeOf(Hc.prototype),"onGrab",this).call(this,Xa);cb&&(this.toggleSelected(!1),bb.collapse(cb),bb.treeData.parentNode(cb).container.onChildRemoved(this),
this._data=bb.treeData.remove(cb),cb.container.target.remove(),bb.update(!0))}},{key:"wantsToBeDroppedOn",value:function(Xa){this.showPreviewOn(Xa);return!0}},{key:"showPreviewOn",value:function(Xa){if(Xa.isContainer)var bb=Xa.tree;Xa.isTree&&(bb=Xa);bb&&bb.showDropPreviewFor&&bb.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(Xa){var bb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return bb.tree.treeData.add(Xa._data,bb.node,bb.node.children[0]),
bb.tree.uncollapse(bb.node),bb.tree.treeData.remove(bb.tree._previewNode),cb.yield(bb.tree.whenRendered(),2);bb.tree.update(!0);bb.onChildAdded(Xa);cb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(Xa,bb){var cb=this;debugger;this.tree._dropInProgress=!0;ra._get(Object.getPrototypeOf(Hc.prototype),"onBeingDroppedOn",this).call(this,Xa,bb);Xa=function(){cb.fill=lb.Color.gray.withA(.5);cb.opacity=1;cb.tree._dropInProgress=!1;cb.tree.refresh()};bb.isTree?bb.insertAtPlaceholder(this).then(Xa):
bb.isContainer?bb.insertAsChild(this).then(Xa):Xa()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:lb.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var Xa=this,bb=this.tree.treeData;return bb&&bb.asList().find(function(cb){return cb.container===Xa})}}}}}],Dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:498,end:2975})}(lb.Morph);lb.InteractiveTreeContainer=ub;lb.InteractiveTreeContainer=ub;lb.InteractiveTreeContainer=ub;ub=function(ab){var Dc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hc=Dc.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Dc.InteractiveTreeData?Dc.InteractiveTreeData:Dc.InteractiveTreeData=function(Xa){Xa&&
Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(Hc,ab,[{key:"display",value:function(Xa){return[Xa.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(Xa){return Xa.isCollapsed}},{key:"collapse",value:function(Xa,bb){Xa.isCollapsed=bb}},{key:"getChildren",value:function(Xa){var bb=this;return Xa.isLeaf?null:Xa.children.filter(function(cb){return cb&&(bb.filterActive?cb.visible:!0)})}},{key:"isLeaf",value:function(Xa){var bb=
this;return!Xa.children||0==Xa.children.filter(function(cb){return cb&&(bb.filterActive?cb.visible:!0)}).length}},{key:"add",value:function(Xa,bb,cb){bb=void 0===bb?this.root:bb;bb.children||(bb.children=[]);cb?lb.arr.pushAt(bb.children,Xa,bb.children.indexOf(cb)):bb.children.push(Xa);bb.isLeaf=!1}},{key:"replace",value:function(Xa,bb){var cb=this.parentNode(Xa);Xa=cb.children.indexOf(Xa);cb.children[Xa]=bb}},{key:"next",value:function(Xa){var bb=this.parentNode(Xa);return bb&&bb.children[bb.children.indexOf(Xa)+
1]}},{key:"isBefore",value:function(Xa,bb){this.next(Xa)===bb}},{key:"isAfter",value:function(Xa,bb){this.next(bb)===Xa}},{key:"addBefore",value:function(Xa,bb){this.add(Xa,this.parentNode(bb),bb)}},{key:"addAfter",value:function(Xa,bb){var cb=this.parentNode(bb);bb=cb.children.indexOf(bb)+1;this.add(Xa,cb,cb.children[bb])}},{key:"remove",value:function(Xa){var bb=this.parentNode(Xa);if(bb)return lb.arr.remove(bb.children,Xa),bb.children==[]&&(bb.children=null),Xa}},{key:"filter",value:function(Xa,
bb){bb=void 0===bb?1:bb;var cb=this,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sd){if(1==sd.nextAddress)return sd.yield(cb.uncollapseAll(function(Ud,hc){return hc<bb+1}),2);Sc=cb.filterActive;cb.filterActive=!1;cb.asListWithIndexAndDepth(!1).reverse().forEach(function(Ud){var hc=Ud.node;if(0==Ud.depth)return hc.visible=!0;hc.visible=Xa(hc);hc.visible||hc.isCollapsed||!hc.children.find(function(Ed){return Ed.visible})?hc.container.opacity=1:(hc.visible=!0,hc.container.opacity=.5);
return hc.visible});cb.filterActive=Sc;sd.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:2984,end:5441})}(lb.TreeData);lb.InteractiveTreeData=ub;lb.InteractiveTreeData=ub;lb.InteractiveTreeData=
ub;ub=function(ab){var Dc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hc=Dc.hasOwnProperty("InteractiveTree")&&"function"===typeof Dc.InteractiveTree?Dc.InteractiveTree:Dc.InteractiveTree=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(Hc,ab,[{key:"update",value:function(Xa){var bb=this;ra._get(Object.getPrototypeOf(Hc.prototype),"update",this).call(this,Xa);this.treeData&&this.relayoutContainers();
Xa&&this.embeddedMorphs.forEach(function(cb){cb.isContainer&&(cb.fill=lb.Color.transparent,cb.fontFamily=bb.fontFamily,cb.fontSize=bb.fontSize)})}},{key:"onDrop",value:function(Xa){ra._get(Object.getPrototypeOf(Hc.prototype),"onDrop",this).call(this,Xa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(Xa){}},{key:"onDropHoverUpdate",value:function(Xa){}},{key:"onDropHoverOut",value:function(Xa){}},{key:"onHoverOut",value:function(Xa){var bb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){ra._get(Object.getPrototypeOf(Hc.prototype),
"onHoverOut",bb).call(bb,Xa);bb._previewNode&&bb._previewNode.container.world()&&bb.treeData.remove(bb._previewNode);bb.resetContainerSelection();bb.update(!0);cb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(Xa){var bb=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if(1==Sc.nextAddress)return cb=bb.treeData.parentNode(bb._previewNode),bb.treeData.replace(bb._previewNode,Xa._data),bb.treeData.remove(bb._previewNode),Sc.yield(bb.whenRendered(),2);bb.update(!0);
cb.container.onChildAdded(Xa);Sc.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var Xa=this;if(!this._scrollingUp){this._scrollingUp=!0;var bb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Xa._scrollingUp&&0<Xa.scroll.y?cb.yield(Xa.animate({scroll:Xa.scroll.subXY(0,30),duration:300,easing:lb.easings.linear}),3):(Xa._scrollingUp=!1,cb.jumpTo(0));bb();cb.jumpToEnd()})};bb()}}},{key:"scrollDownSlowly",value:function(){var Xa=this;if(!this._scrollingDown){this._scrollingDown=
!0;var bb=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return Xa._scrollingDown&&Xa.scroll.y<Xa.scrollExtent.y-Xa.height?cb.yield(Xa.animate({scroll:Xa.scroll.addXY(0,30),duration:300,easing:lb.easings.linear}),3):(Xa._scrollingDown=!1,cb.jumpTo(0));bb();cb.jumpToEnd()})};bb()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(Xa){Xa.isContainer&&
(Xa.fill=lb.Color.transparent)})}},{key:"showDropPreviewFor",value:function(Xa){var bb=this;Xa=this.localize(Xa.globalBounds().center());var cb=this.textPositionFromPoint(Xa),Sc=this.treeData.asListWithIndexAndDepth(function(Jd){Jd=Jd.node;return Jd!=bb._previewNode&&Jd.container.world()}),sd=(Sc.find(function(Jd){return Jd.i-1===cb.row})||{}).node,Ud=sd&&sd.container,hc=this.ensurePlaceholder(),Ed=!!hc.container.world(),Ac=Xa.subPt(this.scroll).subPt(this.scrollbarOffset);10>Ac.y?this.scrollUpSlowly():
Ac.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Ud){if(Sc.length>cb.row||lb.arr.last(this.treeData.root.children)===hc)return;this.treeData.remove(hc);this.treeData.add(hc);this.update(!0)}if(Ud){Sc=this.textLayout.boundsFor(this,cb);if(4>Math.abs(Sc.top()-Xa.y)){if(this.treeData.isBefore(hc,sd))return;this.treeData.remove(hc);this.treeData.addBefore(hc,sd)}else if(4>Math.abs(Sc.bottom()-Xa.y)&&(sd.isCollapsed||this.treeData.isLeaf(sd))){if(this.treeData.isAfter(hc,
sd))return;this.treeData.remove(hc);this.treeData.addAfter(hc,sd)}else{Ud.fill=lb.Color.gray;if(!Ed)return;this.treeData.remove(hc)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var Xa=lb.pt(this.width-100,this.document.getLine(0).height);this._previewNode||(this._previewNode={container:lb.morph({acceptsDrops:!1,reactsToPointer:!1,fill:lb.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=Xa;return this._previewNode}},{key:"relayoutContainers",
value:function(){var Xa=this;this.charBoundsFromTextPosition({row:0,column:6});this.textLayout.charBoundsOfRow(this,0).map(function(bb){return bb.height});this.treeData.asListWithIndexAndDepth().forEach(function(bb){var cb=bb.node;bb=bb.i;cb.container.nativeCursor="grab";cb.container.width=Xa.width-25-cb.container.left;cb.container.toggleSelected&&cb.container.toggleSelected(bb==Xa.selectedIndex)});this.anchors.forEach(function(bb){return bb.position=bb.position})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"InteractiveTree"}}],Dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:5450,end:10824})}(lb.Tree);lb.InteractiveTree=ub;lb.InteractiveTree=ub;lb.InteractiveTree=ub;ub=function(ab){var Dc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hc=Dc.hasOwnProperty("SceneGraphTree")&&
"function"===typeof Dc.SceneGraphTree?Dc.SceneGraphTree:Dc.SceneGraphTree=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(Hc,ab,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(Xa){var bb=this.treeData.asList().find(function(cb){return cb.container.target===Xa});bb&&this.selectedNode!=bb&&this.selectPath(this.treeData.pathOf(bb))}},{key:"onLoad",
value:function(){var Xa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress){if(Xa.ownerChain().find(function(cb){return cb.isComponent}))return bb.return();Xa.submorphs=[];return bb.yield(Xa.whenRendered(),2)}Xa.get("inspector").makeEditorVisible(!0);Xa.get("inspector").makeEditorVisible(!1);Xa.setTarget($world);bb.jumpToEnd()})}},{key:"adjustProportions",value:function(Xa){Xa=(Xa?Xa.state.dragDelta:{y:0}).y;var bb=this.get("inspector"),cb=this.get("scene graph resizer"),
Sc=this.get("mode selector"),sd=this.get("connections tree");this.height+=Xa;bb.height-=Xa;sd.height-=Xa;cb.top=this.bottom;cb.left=0;Sc.top=cb.bottom;sd.top=bb.top=Sc.bottom+5}},{key:"reset",value:function(){var Xa=this;this.treeData=new lb.InteractiveTreeData({children:[],container:lb.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(bb){return null==bb.id}).forEach(function(bb){return Xa.removeAnchor(bb)})}},{key:"setTarget",value:function(Xa){this.target=
Xa;this.treeData=this.getTreeFromSubmorphHierarchy(Xa);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(Xa){var bb=this;if(Xa===this._previewNode)return!1;if(Xa.container.nameNeedsUpdate)return!0;var cb=Xa.container.target.submorphs.filter(function(Sc){return!bb.ignoreMorph(Sc)});return cb.length!=Xa.children.length||cb.map(function(Sc){return Sc.name}).join("")!=Xa.children.map(function(Sc){return Sc.target?Sc.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(Xa){var bb=
this,cb=Xa.container.target.submorphs.map(function(Ed){return Ed.__scene_graph_target__?Ed.__scene_graph_target__():Ed}).filter(function(Ed){return!bb.ignoreMorph(Ed)}),Sc=[],sd={},Ud;for(Ud in cb){sd.$jscomp$loop$prop$m$2561=cb[Ud];var hc=lb.arr.without(Xa.children,this._previewNode).find(function(Ed){return function(Ac){return Ac.container.target.id==Ed.$jscomp$loop$prop$m$2561.id}}(sd));Sc[Ud]=hc?hc:this.readMorphHierarchy(sd.$jscomp$loop$prop$m$2561);sd={$jscomp$loop$prop$m$2561:sd.$jscomp$loop$prop$m$2561}}return Sc}},
{key:"refresh",value:function(){var Xa=this;if(!this._updating&&!this._dropInProgress){var bb=!1;lb.tree.prewalk(this.treeData.root,function(cb){Xa.isNodeOutOfSync(cb)&&(bb=!0,cb.name=cb.container.target.name,cb.container.refresh(),cb.children=Xa.getNewChildren(cb))},function(cb){return cb.children});this.update(bb)}}},{key:"ignoreMorph",value:function(Xa){return Xa.isMorph?Xa.isContainer||Xa.isWindow||Xa.getWindow()||Xa.isEpiMorph||Xa.isHand||["lively.halos"].includes(Xa.constructor[Symbol.for("lively-module-meta")].package.name)||
["MorphicSideBar","SideBarToggler","UserFlap","Menu"].includes(Xa.constructor.name):!1}},{key:"onDropHoverOut",value:function(Xa){var bb=Xa.hand.grabbedMorphs[0];Xa=Xa.hand.findDropTarget();if(!(Xa===this||Xa&&Xa.ownerChain().includes(this))&&bb&&bb.isContainer)bb.onDragOutside()}},{key:"onDropHoverIn",value:function(Xa){var bb=Xa.hand.grabbedMorphs[0];bb&&!bb.isContainer&&($world.halos().forEach(function(cb){return cb.remove()}),bb.remove(),Object.assign(bb,Xa.hand._grabbedMorphProperties.get(bb).pointerAndShadow),
bb=this.renderContainerFor(bb,!1),Xa.hand.grab(bb),bb.leftCenter=lb.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",value:function(Xa){return new lb.InteractiveTreeData(this.readMorphHierarchy(Xa))}},{key:"readMorphHierarchy",value:function(Xa){var bb=this;return lb.tree.mapTree(Xa,function(cb,Sc){return{name:cb.name,isCollapsed:!0,container:bb.renderContainerFor(cb),visible:!0,children:Sc}},function(cb){return cb.submorphs.filter(function(Sc){return cb.isWorld?!bb.ignoreMorph(Sc):!0})})}},{key:"renderContainerFor",
value:function(Xa,bb){Xa=void 0===Xa?lb.morph({name:"root"}):Xa;bb=new lb.MorphContainer({tree:this,fill:void 0===bb||bb?lb.Color.transparent:lb.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:Xa,opacity:Xa.visible?1:.5});Xa._data?(bb._data=Xa._data,Xa._data.container=bb):bb._data={name:Xa.name,isCollapsed:!0,container:bb,children:[]};return bb}},{key:"collapseAll",value:function(){var Xa=this;this.treeData.asList().forEach(function(bb){return bb!=Xa.treeData.root?
bb.isCollapsed=!0:bb.isCollapsed=!1})}},{key:"filterMorphs",value:function(Xa){var bb=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if(1==Sc.nextAddress)return cb=Xa.tokens[0],bb.treeData.filterActive||(bb._collapseState=new WeakMap(bb.treeData.asList().map(function(sd){return[sd,sd.isCollapsed]}))),bb.treeData.filterActive=!!cb,Sc.yield(bb.treeData.filter(function(sd){var Ud=!cb||sd.container.target.name.includes(cb);sd.container.highlightTerm(cb);return Ud},3),2);bb.treeData.filterActive||
bb.treeData.asList().forEach(function(sd){return sd.isCollapsed=bb._collapseState.has(sd)?bb._collapseState.get(sd):!0});bb.refresh();Sc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",get:function(){return{target:{serialize:!1}}}}],Dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1103"}}},{start:10833,end:17410})}(lb.InteractiveTree);lb.SceneGraphTree=ub;lb.SceneGraphTree=ub;lb.SceneGraphTree=ub;ub=function(ab){var Dc=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Hc=Dc.hasOwnProperty("MorphContainer")&&"function"===typeof Dc.MorphContainer?Dc.MorphContainer:Dc.MorphContainer=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(Hc,ab,[{key:"refresh",value:function(){var Xa=
this,bb,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){bb=Xa.target;if(!bb)return Sc.return();Xa.reactsToPointer=!0;Xa.dropShadow=!1;Xa.submorphs=[Xa.getLabel(),bb.layout&&Xa.getLayoutControls(),Xa.getConnectionControls()].filter(Boolean).map(function(sd,Ud){sd.fitIfNeeded();sd.left=cb?cb.right+5:0;sd.top=2;return cb=sd});Xa.height=20;Xa.opacity=bb.visible?1:.5;Sc.jumpToEnd()})}},{key:"getLabel",value:function(){var Xa=this.getSubmorphNamed("name label")||lb.morph({type:"label",
name:"name label",reactsToPointer:!1,padding:lb.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),bb=Xa.textString.slice(2,-1);bb&&bb==this.target.name||(Xa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return Xa}},{key:"getIcon",value:function(Xa){return lb.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[lb.getClassName(Xa)]||
"codepen",{paddingTop:"4px",fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var Xa=this.getSubmorphNamed("layout label")||lb.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:lb.Rectangle.inset(4,2,4,2),fill:lb.Color.orange,fontColor:lb.Color.white});Xa._isControlElement=!0;Xa.textString!=this.target.layout.name()&&(Xa.value=this.target.layout.name());return Xa}},{key:"getConnectionControls",value:function(){this.connectionCount=
this.target.attributeConnections?this.target.attributeConnections.filter(function(cb){return!cb.targetObj.isHalo}).length:0;var Xa=this.getSubmorphNamed("connections label")||lb.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:lb.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:lb.Color.red,fontColor:lb.Color.white});Xa._isControlElement=!0;Xa.visible=!this.connectionHalo&&!!this.connectionCount;var bb=this.connectionCount?this.connectionCount+" connection"+
(1<this.connectionCount?"s":""):"Manage Connections";Xa.textString!=bb&&(Xa.value=bb);return Xa}},{key:"highlightTerm",value:function(Xa){var bb=this.submorphs[0],cb=bb.textAndAttributes.slice(0,2),Sc=bb.textString.slice(1).split(Xa);bb.textAndAttributes=1===Sc.length?[].concat($jscomp.arrayFromIterable(cb),[Sc[0]]):[].concat($jscomp.arrayFromIterable(cb),$jscomp.arrayFromIterable(lb.arr.flatten(lb.arr.interpose(Sc.map(function(sd){return[sd,{}]}),[Xa,{fontWeight:"900"}]))))}},{key:"getClassControls",
value:function(){}},{key:"wantsToBeDroppedOn",value:function(Xa){var bb=ra._get(Object.getPrototypeOf(Hc.prototype),"wantsToBeDroppedOn",this).call(this,Xa);if(![Xa].concat($jscomp.arrayFromIterable(Xa.ownerChain())).includes(this.tree))this.onDragOutside();return bb}},{key:"onGrab",value:function(Xa){var bb=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if(1==Sc.nextAddress)return bb.tree._dropInProgress=!0,cb=bb.target.globalPosition,ra._get(Object.getPrototypeOf(Hc.prototype),
"onGrab",bb).call(bb,Xa),bb._data.globalTargetPosition=cb,Sc.yield(bb.whenRendered(),2);if(bb.tree.fullContainsWorldPoint(bb.globalPosition))bb.leftCenter=lb.pt(-20,0);else bb.onDragOutside();bb.tree._dropInProgress=!1;Sc.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=lb.fun.createQueue("container-hover-queue",function(Xa,bb){var cb,Sc,sd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ud){if(1==Ud.nextAddress)return cb=
Xa.target,Sc=cb.opacity,sd=cb.scale,Xa.target.opacity=0,Xa.target.scale=.5,$world.halos().forEach(function(hc){return hc.remove()}),$world.firstHand.grab(Xa.target),Xa.target._data=Xa._data,Xa.remove(),Xa.target.position=lb.pt(0,0),Ud.yield(Xa.target.animate({opacity:Sc,scale:sd,duration:200}),2);bb();Ud.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(Xa){var bb=this.node.children.indexOf(Xa.node||Xa._data)+1;bb=this.node.children[bb];Xa.target.remove();bb?(bb=this.target.submorphs.indexOf(bb.container.target),
this.target.addMorphAt(Xa.target,bb)):this.target.addMorph(Xa.target);Xa._data.globalTargetPosition&&(Xa.target.position=this.target.localize(Xa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(Xa){}},{key:"toggleConnectionControl",value:function(Xa){this.getSubmorphNamed("connections label").visible=Xa}},{key:"toggleSelected",value:function(Xa){var bb=this,cb,Sc,sd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ud){if(1==Ud.nextAddress)return ra._get(Object.getPrototypeOf(Hc.prototype),
"toggleSelected",bb).call(bb,Xa),bb._active===Xa?Ud.return():(bb._active=Xa)&&bb.target&&bb.target.isMorph&&bb.world()?Ud.yield(bb.target.whenRendered(),3):Ud.jumpTo(0);bb.get("inspector").targetObject=bb.target;bb.get("connections tree").inspectConnectionsOf(bb.target);if(bb.connectionHalo)return Ud.return();cb=$jscomp.makeIterator(bb.world().halos());for(Sc=cb.next();!Sc.done;Sc=cb.next()){sd=Sc.value;if(sd.target===bb.target)return Ud.return();sd.remove()}lb.noUpdate({sourceObj:bb.world(),targetObj:bb.sideBar,
sourceAttribute:"showHaloFor",targetAttribute:"selectNode"},function(){return bb.world().showHaloFor(bb.target)});Ud.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(Xa){this.submorphs[0].fontFamily=Xa}},fontColor:{after:["submorphs"],derived:!0,set:function(Xa){this.submorphs[0].fontColor=Xa}},fontSize:{derived:!0,set:function(Xa){this.submorphs[0].fontSize=
Xa}},target:{serialize:!1},dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Dc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1103"}}},{start:17420,end:25092})}(lb.InteractiveTreeContainer);lb.MorphContainer=ub;lb.MorphContainer=ub;lb.MorphContainer=ub;var xc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");xc.visualizeConnection=function(ab,Dc,Hc,Xa,bb){Xa=void 0===Xa?{}:Xa;bb=xc.rect(0).sides.concat(xc.rect(0).corners);
Hc=Hc||new xc.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:xc.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:xc.Color.transparent,nativeCursor:"auto"},end:{fill:xc.Color.orange}}},Xa,{hasFixedPosition:!0}));Hc.startPoint.attachTo(ab,"rightCenter");Dc.isMorph?(Xa=Dc.globalBounds().partNameNearest(bb,ab.globalPosition),ab.globalPosition.equals(Dc.globalBounds().partNamed(Xa))&&Dc.globalBounds().partNameNearest(xc.arr.without(bb,Xa),ab.globalPosition),Hc.endPoint.attachTo(Dc,
"leftCenter")):(bb=ab.globalBounds().topRight().addPt(xc.pt(100,0)),Dc=xc.morph({type:"label",value:Dc.toString(),styleClasses:["Tooltip"],padding:xc.rect(8,4)}).openInWorld(bb),Dc.position=ab.world().bounds().translateForInclusion(Dc.bounds()).topLeft(),xc.once(Hc,"remove",Dc,"remove"),Hc.endPoint.attachTo(Dc,"leftCenter"));return Hc};xc.startConnecting=function(ab,Dc){ab.animate({opacity:.8,duration:300});ab.startPoint.attachTo(Dc,"center");ab.vertices[0].position=xc.pt(2,2)};xc.stopConnecting=
function(ab,Dc,Hc,Xa){function bb(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ud){if(1==Ud.nextAddress)return Ud.yield(ab.animate({opacity:0,duration:300}),2);ab.startPoint.clearConnection();ab.endPoint.clearConnection();ab.remove();Ud.jumpToEnd()})}Xa=void 0===Xa?!1:Xa;var cb,Sc,sd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ud){return 1==Ud.nextAddress?(cb=ab,Sc=cb.endPoint,(sd=Sc.connectedMorph)&&"MorphContainer"==sd.constructor.className&&(sd=sd.target),sd?Ud.yield(xc.interactiveConnectGivenSourceAndTarget(Hc,
Xa,sd),2):Ud.jumpTo(2)):Ud.yield(bb(),0)})};xc.editConnection=function(ab){var Dc=ab.connection,Hc=ab.connectionPoint,Xa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bb){if(1==bb.nextAddress)return Xa=xc.visualizeConnection(Hc,Dc.targetObj,!1,{borderColor:xc.Color.gray.darker(),endpointStyle:{start:{fill:xc.Color.transparent,nativeCursor:"auto"},end:{fill:xc.Color.gray.darker()}}}),bb.yield(xc.interactivelyReEvaluateConnection(Dc,"Edit Connection",!1),2);Xa.remove();bb.jumpToEnd()})};
xc.Tree=ic;xc.TreeData=fc;xc.Icon=Tb;xc.morph=Fd;xc.pt=Jb;xc.Rectangle=ob;xc.rect=Cc;xc.Color=wc;xc.arr=Mc;xc.connect=uc;xc.signal=Na;xc.Leash=Ab;xc.once=La;xc.interactivelyReEvaluateConnection=$b;xc.interactiveConnectGivenSource=Ka;xc.interactiveConnectGivenSourceAndTarget=$a;(function(ab){var Dc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Hc=Dc.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Dc.ConnectionsTreeData?Dc.ConnectionsTreeData:Dc.ConnectionsTreeData=function(Xa){Xa&&
Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return ra(Hc,ab,[{key:"parseMorphConnections",value:function(Xa){for(var bb={},cb=$jscomp.makeIterator(void 0===Xa.attributeConnections?[]:Xa.attributeConnections),Sc=cb.next();!Sc.done;Sc=cb.next())Sc=Sc.value,Sc.targetObj.isHalo||(bb[Sc.sourceAttrName]=bb[Sc.sourceAttrName]||[{name:["      New Connection  ",{fontColor:xc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Xa,Sc.sourceAttrName),
{}]}],xc.arr.pushAt(bb[Sc.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(Sc)))},0));return{children:Object.entries(bb).map(function(sd){var Ud=$jscomp.makeIterator(sd);sd=Ud.next().value;Ud=Ud.next().value;return{name:[sd,{fontWeight:"bold"}," ",{},xc.morph({fill:xc.Color.white,opacity:.7,value:""+(Ud.length-1),borderRadius:15,fontWeight:"bold",padding:xc.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Ud}}).concat([{name:["New Connection  ",
{fontColor:xc.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(Xa),{}]}])}}},{key:"renderExistingConnection",value:function(Xa){var bb=this,cb=xc.morph({type:"label",fontColor:xc.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(xc.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},Xa.targetMethodName,{}])}),Sc=this.renderDeadPin(),sd=Sc.submorphs[0];xc.connect(cb,"onHoverIn",function(){cb.fontColor=xc.Color.orange;cb._leash=xc.visualizeConnection(sd,
Xa.targetObj,cb._leash);sd.fill=xc.Color.orange;sd.border={color:xc.Color.orange,width:3}});xc.connect(cb,"onMouseDown",function(Ud){return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){if(1==hc.nextAddress)return Ud.stop(),hc.yield(xc.interactivelyReEvaluateConnection(Xa),2);xc.signal(bb,"refresh");hc.jumpToEnd()})});xc.connect(cb,"onHoverOut",function(){cb.fontColor=xc.Color.gray;sd.fill=xc.Color.gray;sd.border={color:xc.Color.white,width:1};cb._leash.remove();cb._leash=void 0});return[cb,
{},"  ",{}].concat($jscomp.arrayFromIterable(xc.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){Xa.disconnect();xc.signal(bb,"refresh")}})),["  ",{},Sc,{}])}},{key:"renderDeadPin",value:function(){var Xa=xc.morph({type:"ellipse",fill:xc.Color.gray,extent:xc.pt(10,10),center:xc.pt(8,12),borderWidth:1});return xc.morph({extent:xc.pt(20,20),fill:xc.Color.transparent,reactsToPointer:!1,submorphs:[Xa]})}},{key:"renderPin",value:function(Xa,bb){var cb=this,Sc=xc.morph({type:"ellipse",
fill:xc.Color.gray.withA(.5),extent:xc.pt(10,10),center:xc.pt(8,12),draggable:!1,borderWidth:1}),sd=new xc.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:xc.Color.gray.darker(),endpointStyle:{fill:xc.Color.gray.darker()},position:xc.pt(1,1),vertices:[xc.pt(0,0),xc.pt(0,0)],canConnectTo:function(Ud){return"MorphContainer"==Ud.constructor.className||2>xc.arr.intersect([Ud].concat($jscomp.arrayFromIterable(Ud.ownerChain())),[Sc].concat($jscomp.arrayFromIterable(Sc.ownerChain()))).length}});
Sc.addMorph(sd);xc.connect(sd.endPoint,"onDragStart",function(){xc.startConnecting(sd,Sc)});xc.connect(sd.endPoint,"onDragEnd",function(Ud){return $jscomp.asyncExecutePromiseGeneratorProgram(function(hc){if(1==hc.nextAddress)return Sc.center=xc.pt(8,12),hc.yield(xc.stopConnecting(sd,Sc,Xa,bb),2);xc.signal(cb,"refresh");hc.jumpToEnd()})});return xc.morph({extent:xc.pt(20,20),fill:xc.Color.transparent,reactsToPointer:!1,submorphs:[Sc]})}},{key:"display",value:function(Xa){return Xa.name}},{key:"collapse",
value:function(Xa,bb){Xa.isCollapsed=bb}},{key:"isCollapsed",value:function(Xa){return Xa.isCollapsed}},{key:"isLeaf",value:function(Xa){return!Xa.children}},{key:"getChildren",value:function(Xa){return Xa.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(Xa){var bb=new this;bb.root=bb.parseMorphConnections(Xa);return bb}}],Dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3524,end:8076})})(xc.TreeData);ub=function(ab){var Dc=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Hc=Dc.hasOwnProperty("ConnectionsTree")&&"function"===typeof Dc.ConnectionsTree?Dc.ConnectionsTree:Dc.ConnectionsTree=function(Xa){Xa&&Xa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return ra(Hc,ab,[{key:"inspectConnectionsOf",value:function(Xa){if(this.targetMorph=Xa)this.treeData=xc.ConnectionsTreeData.for(Xa),xc.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=xc.ConnectionsTreeData.for(this.targetMorph),xc.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},{key:"properties",get:function(){return{}}}],Dc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8093,end:8646})}(xc.Tree);ub=xc.ConnectionsTree;xc.default=ub}}});