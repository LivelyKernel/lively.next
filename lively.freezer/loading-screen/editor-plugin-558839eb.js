System.register(["./__root_module__-b4667baa.js","kld-intersections","./index-82fc4eeb.js","./editor-plugin-44123d71.js","./index-3aad35e9.js"],function(ta){var lb,yb,Qb,Kb,yd,Cc,rd,Fc,Dc,Rc,$c,Hd,gd,Uc,Pa,mb,Nb,Ub,Ic,wd,Eb,Sb,sb,ec;return{setters:[function(rc){lb=rc.as;yb=rc.bA;Qb=rc.bB;Kb=rc.bC;yd=rc.F;Cc=rc.aq;rd=rc.aW;Fc=rc.s;Dc=rc.ab;Rc=rc.bn;$c=rc.a6;Hd=rc.$;gd=rc.bD;Uc=rc.bu},function(){},function(rc){Pa=rc.s},function(rc){mb=rc.p;Nb=rc.d;Ub=rc.a;Ic=rc.r;wd=rc.C},function(rc){Eb=rc.localInterface;
Sb=rc.systemInterfaceNamed;sb=rc.serverInterfaceFor;ec=rc.l2lInterfaceFor}],execute:function(){var rc=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");rc.warnStyle={"border-bottom":"2px dotted orange"};rc.errorStyle={"background-color":"red"};var yc=function(lc){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),qc=Lb.hasOwnProperty("JavaScriptChecker")&&"function"===typeof Lb.JavaScriptChecker?Lb.JavaScriptChecker:Lb.JavaScriptChecker=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(qc,lc,[{key:"uninstall",value:function(I){var V=I.text||I;(V.markers||[]).forEach(function(ra){return ra.id.startsWith("js-checker-")&&V.removeMarker(ra)});V.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(I,V){return[].concat($jscomp.arrayFromIterable(I.embeddedMorphMap.values())).find(function(ra){return V.containsPosition(ra.anchor.position)})}},{key:"onDocumentChange",value:function(I,
V,ra){var ya=V.document;try{var Gb=ra.parse()}catch(Pb){Gb=Pb}Gb&&(I=(V.markers||[]).filter(function(Pb){return Pb.id.startsWith("js-checker-")}),ra=ra.undeclaredVariables().map(function(Pb,Ca){var Yb=Pb.start;Pb=Pb.end;Yb=ya.indexToPosition(Yb);Pb=ya.indexToPosition(Pb);return V.addMarker({id:"js-checker-"+Ca,style:rc.warnStyle,range:{start:Yb,end:Pb},type:"js-undeclared-var"})}),I.slice(ra.length).forEach(function(Pb){return V.removeMarker(Pb)}),Gb.parseError?(I=Gb.parseError.loc,ra=I.column,I=
I.line-1,Gb=ya.indexToPosition(Gb.parseError.pos),ra=Gb.column,I=Gb.row,Gb={start:{column:ra-1,row:I},end:{column:ra+1,row:I}},this.hasEmbeddedMorphInRange(V,Gb)||V.addMarker({id:"js-syntax-error",range:Gb,style:rc.errorStyle,type:"js-syntax-error"})):V.removeMarker("js-syntax-error"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],Lb,{pathInPackage:function(){return"js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:118,end:1882})}(void 0),Db=yc=rc.JavaScriptChecker;rc.default=yc;var ab=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");ab.query=yb;ab.fuzzyParse=Qb;ab.acorn=Kb;ab.custom=yd;var Zb=function(lc){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),qc=Lb.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof Lb.JavaScriptNavigator?Lb.JavaScriptNavigator:Lb.JavaScriptNavigator=function(I){I&&I[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(qc,lc,[{key:"ensureAST",value:function(I){return this.parse(I.textString)}},{key:"parse",value:function(I){return ab.fuzzyParse(I)}},{key:"move",value:function(I,V){var ra=!!V.activeMark||!V.selection.isEmpty(),ya=V.selection,Gb=V.positionToIndex(ya.lead);I=this[I](V.textString,Gb);I=V.indexToPosition(I);ya.lead=I;ra||(ya.anchor=I);V.scrollCursorIntoView()}},{key:"forwardSexp",value:function(I){this.move("_forwardSexp",
I)}},{key:"backwardSexp",value:function(I){this.move("_backwardSexp",I)}},{key:"backwardUpSexp",value:function(I){this.move("_backwardUpSexp",I)}},{key:"forwardDownSexp",value:function(I){this.move("_forwardDownSexp",I)}},{key:"_forwardSexp",value:function(I,V){I=this.parse(I);I=ab.custom.findNodesIncluding(I,V).reverse().find(function(ya){return ya.end!==V});if(!I)return V;if("BlockStatement"===I.type){var ra=I.body.find(function(ya){return ya.start>V});if(ra)return ra.start}return I.end}},{key:"_backwardSexp",
value:function(I,V){I=this.parse(I);I=ab.custom.findNodesIncluding(I,V).reverse().find(function(ya){return ya.start!==V});if(!I)return V;if("BlockStatement"===I.type){var ra=I.body.slice().reverse().find(function(ya){return ya.end<V});if(ra)return ra.end}return I?I.start:V}},{key:"_backwardUpSexp",value:function(I,V){I=this.parse(I);return(I=ab.custom.findNodesIncluding(I,V).reverse().find(function(ra){return ra.start!==V}))?I.start:V}},{key:"_forwardDownSexp",value:function(I,V){I=this.parse(I);
return(I=ab.custom.findNodeAfter(I,V,function(ra,ya){return ya.start>V}))?I.node.start:V}},{key:"markDefun",value:function(I){var V=this.rangeForFunctionOrDefinition(I.textString,[I.positionToIndex(I.selection.range.start),I.positionToIndex(I.selection.range.end)]);V&&I.execCommand("expandRegion",{start:V[0],end:V[1]})}},{key:"rangeForNodesMatching",value:function(I,V,ra){I=this.parse(I);return(V=ab.custom.findNodesIncluding(I,V).reverse().find(ra))?[V.start,V.end]:null}},{key:"rangeForFunctionOrDefinition",
value:function(I,V){var ra=V[0]===V[1];return this.rangeForNodesMatching(I,V[1],function(ya){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(ya.type)&&(ra&&ya.end!==V[1]||!ra&&ya.start<V[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(I,V){"number"!==typeof V&&(V=I.positionToIndex(V));I=this.ensureAST(I);var ra=ab.query.nodesAt(V,I).reverse(),ya=ra.find(function(Pb){return"Identifier"===Pb.type});if(!ya&&((ra=ra[0])&&ra.type.includes("Specifier")&&
ra.local&&"Identifier"===ra.local.type&&(ya=ra.local),!ya))return;V=(ra=ab.query.findDeclarationClosestToIndex(I,ya.name,V))?ab.query.scopeAtIndex(I,ra.start):ab.query.scopeAtIndex(I,V);var Gb=ab.query.findReferencesAndDeclsInScope(V,ya.name).refs;return{parsed:I,scope:V,id:ya,name:ya.name,decl:ra,refs:Gb}}},{key:"expandRegion",value:function(I,V,ra,ya){function Gb(jd){jd=I.positionToIndex({column:0,row:Ca.row});return{range:[jd+Yb.start,jd+Yb.start+Yb.value.length],prev:ya}}var Pb=ya.range[0]!==
ya.range[1],Ca=I.indexToPosition(ya.range[0]),Yb=I.tokenAt(Ca);if(!Pb&&Yb&&["keyword","identifier"].includes(Yb.type))return Gb();ra=ra||this.parse(V);V=ab.query.nodesAtIndex(ra,ya.range[0]).reverse().find(function(jd){return jd.start<ya.range[0]||jd.end>ya.range[1]});if(!V)return ya;ra=V.start;Pb=V.end;return"Literal"===V.type&&(V.raw||"").match(/^['"`]/)&&ya.range[0]!==V.start&&ya.range[1]!==V.end&&(V.start+1<ya.range[0]||V.end-1>ya.range[1])?{range:[ra+1,Pb-1],prev:ya}:{range:[ra,Pb],prev:ya}}},
{key:"contractRegion",value:function(I,V,ra,ya){return ya.prev||ya}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],Lb,{pathInPackage:function(){return"js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:121,end:6658})}(void 0);yc=Zb=ab.JavaScriptNavigator;ab.default=Zb;var kc=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js");
kc.addIndexToTextPos=function(lc,Lb,qc){return lc.indexToPosition(lc.positionToIndex(Lb)+qc)};kc.connect=Cc;kc.disconnect=rd;kc.string=Fc;kc.KeyHandler=Dc;kc.Range=Rc;Zb=function(lc){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/text/snippets.js"),qc=Lb.hasOwnProperty("Snippet")&&"function"===typeof Lb.Snippet?Lb.Snippet:Lb.Snippet=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(qc,lc,[{key:Symbol.for("lively-instance-initialize"),
value:function(I){I=void 0===I?{trigger:null,expansion:""}:I;var V=I.expansion;this.trigger=I.trigger;this.expansion=V;this.resetExpansionState()}},{key:"isTextSnippet",get:function(){return!0}},{key:"attach",value:function(I){this.isExpanding&&(this.textMorph=I,kc.connect(this.textMorph,"selectionChange",this,"onCursorMove"))}},{key:"detach",value:function(I){this.isExpanding&&(kc.disconnect(I,"selectionChange",this,"onCursorMove"),this.textMorph=null)}},{key:"onCursorMove",value:function(){var I=
this.expansionState,V=I.startAnchor,ra=I.endAnchor;I.isExpanding?kc.Range.fromPositions(V.position,ra.position).containsPosition(this.textMorph.cursorPosition)||this.resetExpansionState():this.resetExpansionState()}},{key:"resetExpansionState",value:function(){var I=this.textMorph;if(I){var V=this.expansionState||{},ra=V.marker,ya=V.startAnchor,Gb=V.endAnchor;V=V.steps;ya&&I.removeAnchor(ya);Gb&&I.removeAnchor(Gb);ra&&I.removeMarker(ra);V.forEach(function(Pb){return I.removeAnchor(Pb.anchor)})}this.expansionState=
{stepIndex:-1,steps:[],isExpanding:!1,startMarker:null,endMarker:null};I&&I.removePlugin(this)}},{key:"isExpanding",get:function(){return this.expansionState.isExpanding}},{key:"createExpansionSteps",value:function(I){var V=[],ra=0;kc.string.reMatches(I,/\$[0-9]+|\$\{[0-9]+:[^\}]*\}/g).forEach(function(ya){var Gb=ya.start,Pb=ya.end;ya=ya.match;var Ca="";ya.startsWith("${")?(Ca=$jscomp.makeIterator(ya.match(/^\$\{([0-9]+):([^\}]*)\}/)),Ca.next(),ya=Ca.next().value,Ca=Ca.next().value,ya=Number(ya)):
ya=Number(ya.replace(/^\$/,""));I=I.slice(0,Gb-ra)+Ca+I.slice(Pb-ra);V[ya]={index:Gb-ra,prefill:Ca,anchor:null};ra+=Pb-Gb-Ca.length});return{steps:V,expansion:I}}},{key:"expandAtCursor",value:function(I){var V=I.selection,ra=I.cursorPosition.column,ya=this.expansion;this.trigger&&(ra-=this.trigger.length);if(ra=Math.max(0,ra))ya=kc.string.lines(ya),ya=[ya[0]].concat($jscomp.arrayFromIterable(ya.slice(1).map(function(Kc){return kc.string.indent(Kc," ",ra)}))),ya=ya.join("\n");var Gb=this.createExpansionSteps(ya);
ya=Gb.expansion;Gb=Gb.steps;this.trigger&&V.growLeft(this.trigger.length);V.text=ya;var Pb=V.start;ya=V.end;V.collapseToEnd();if(Gb.length){var Ca=kc.string.newUUID();Gb.forEach(function(Kc,zc){return Kc.anchor=I.addAnchor(Object.assign({id:"snippet-step-"+zc+"-"+Ca},kc.addIndexToTextPos(I,Pb,Kc.index)))});var Yb=I.addAnchor(Object.assign({id:"snippet-start-"+Ca},Pb,{insertBehavior:"stay"})),jd=I.addAnchor(Object.assign({id:"snippet-end-"+Ca},ya));this.expansionState={marker:I.addMarker({id:"snippet-marker-"+
Ca,get range(){return{start:Yb.position,end:jd.position}},style:{"border-radius":"4px","background-color":"rgba(30, 200, 140, 0.3)","box-shadow":"0 0 4px rgba(30, 200, 140, 0.3)","pointer-events":"none",content:"fooooo"}}),startAnchor:Yb,endAnchor:jd,stepIndex:0,steps:Gb,isExpanding:!0};I.addPlugin(this);this.nextStep()}}},{key:"nextStep",value:function(){var I=this.expansionState,V=I.steps,ra=this.textMorph;if(I.isExpanding&&ra){ra=ra.selection;I=V[I.stepIndex];var ya=I.prefill;ra.lead=ra.anchor=
I.anchor.position;ra.growRight(ya.length);this.expansionState.stepIndex++;this.expansionState.stepIndex>=V.length&&(this.resetExpansionState(),console.log("[snippet] expansion of "+this.expansion+" done"))}}},{key:"canExpand",value:function(I,V){V=I.positionToIndex(I.cursorPosition);return I.textString.slice(V-this.trigger.length,V)===this.trigger}},{key:"tryTrigger",value:function(I,V){if(!this.canExpand(I,I.cursorPosition))return!1;this.expandAtCursor(I);return!0}},{key:"getCommands",value:function(I){var V=
this;return I.concat([{name:"[snippet] next expansion step",exec:function(ra){V.nextStep();return!0}},{name:"[snippet] cancel expansion",exec:function(ra){V.resetExpansionState();return!0}}])}},{key:"getKeyHandlers",value:function(I){return I.concat(kc.KeyHandler.withBindings([{keys:"Tab",command:"[snippet] next expansion step"},{keys:"Escape",command:"[snippet] cancel expansion"}]))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Snippet"}}],Lb,{pathInPackage:function(){return"text/snippets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:356,end:5934})}(void 0);kc.Snippet=Zb;kc.Snippet=Zb;kc.Snippet=Zb;var ua=[{name:"get snippets",exec:function(lc){return lc.pluginCollect("getSnippets",[])}}];kc.snippetCommands=ua;kc.snippetCommands=ua;kc.snippetCommands=ua;var Ga=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js");
Ga.buildEvalOpts=function(lc,Lb){return lc.plugins.find(function(qc){return qc.isJSEditorPlugin}).sanatizedJsEnv(Lb)};Ga.Snippet=Zb;ua=function(lc){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),qc=Lb.hasOwnProperty("ModuleTopLevelVarCompleter")&&"function"===typeof Lb.ModuleTopLevelVarCompleter?Lb.ModuleTopLevelVarCompleter:Lb.ModuleTopLevelVarCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return lb(qc,lc,[{key:"compute",value:function(I,V){var ra,ya,Gb,Pb,Ca,Yb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(jd){if(1==jd.nextAddress){ya=(ra=I.pluginFind(function(Kc){return Kc.isJSEditorPlugin}))&&ra.systemInterface();if(!ya)return jd.return([]);Gb=Ga.buildEvalOpts(I);Pb=Gb.targetModule;return"local"===ya.name?(Ca=Object.getOwnPropertyNames(ya.getModule(Pb).recorder),jd.jumpTo(2)):jd.yield(ya.runEval('\n        var result, livelySystem = typeof System !== "undefined"\n                      && System.get(System.decanonicalize("lively-system-interface"));\n        if (livelySystem) {\n          result = JSON.stringify(\n            Object.getOwnPropertyNames(livelySystem.localInterface.getModule("'+
Pb+'").recorder));\n        } else {\n          var G = typeof window !== "undefined" ?\n            window : typeof global !== "undefined" ? global : this;\n          result = JSON.stringify(Object.getOwnPropertyNames(G));\n        }\n        result;\n      ',{targetModule:"lively://module-recorder-completer"}),3)}if(2!=jd.nextAddress){Yb=jd.yieldResult;if(Yb.isError)return jd.return([]);Ca=JSON.parse(Yb.value)}Ca=Ca.filter(function(Kc){return!Kc.startsWith("defVar_")&&!["System","__currentLivelyModule",
"initializeES6ClassForLively","_moduleExport","_moduleImport"].includes(Kc)});return jd.return(Ca.map(function(Kc){return{priority:1100,completion:Kc}}))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleTopLevelVarCompleter"}}],Lb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:222,end:1678})}(void 0);Ga.ModuleTopLevelVarCompleter=ua;Ga.ModuleTopLevelVarCompleter=ua;Ga.ModuleTopLevelVarCompleter=ua;ua=function(lc){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),qc=Lb.hasOwnProperty("DynamicJavaScriptCompleter")&&"function"===typeof Lb.DynamicJavaScriptCompleter?Lb.DynamicJavaScriptCompleter:Lb.DynamicJavaScriptCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return lb(qc,lc,[{key:"isValidPrefix",value:function(I){return/\.[a-z0-9_]*$/i.test(I)}},{key:"isMethodCallCompletion",value:function(I){return I.endsWith(")")&&0<I.indexOf("(")}},{key:"isValidIdentifier",value:function(I){if("string"!==typeof I)return!1;this.isMethodCallCompletion(I)&&(I=I.slice(0,I.indexOf("(")));return/^[a-z_\$][0-9a-z_\$]*$/i.test(I)?!0:!1}},{key:"wrapInBrackets",value:function(I){if(!isNaN(Number(I))||I.startsWith("Symbol."))return"["+I+"]";var V="";this.isMethodCallCompletion(I)&&
(V=I.slice(I.indexOf("(")),I=I.slice(0,I.indexOf("(")));return'["'+I.replace(/"/g,'\\"')+'"]'+V}},{key:"compute",value:function(I){var V=this,ra,ya,Gb,Pb,Ca,Yb,jd,Kc,zc,Ha,Ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){if(1==Wa.nextAddress){ra=I.selection;ra.isEmpty()?(ya=I.getLine(ra.lead.row),ya=ya.slice(ya.lastIndexOf(":")+1,ra.lead.column)):ya=ra.text.slice(Math.max(0,ra.text.indexOf(":")),0);if(!V.isValidPrefix(ya))return Wa.return([]);Pb=(Gb=I.pluginFind(function(cd){return cd.isJSEditorPlugin}))&&
Gb.systemInterface();if(!Pb)return Wa.return([]);Ca=Ga.buildEvalOpts(I);return Wa.yield(Pb.dynamicCompletionsForPrefix(Ca.targetModule,ya,Ca),2)}Yb=Wa.yieldResult;jd=Yb.isError;Kc=Yb.value;zc=Yb.completions;Ha=Yb.prefix;if(jd)return console.warn("javascript completer encountered error: "+(Kc.stack||Kc)),Wa.return([]);zc.reduce(function(cd,Na){Na=$jscomp.makeIterator(Na);Na.next();Na=Na.next().value;return cd+Na.length},0);Ec=zc.reduce(function(cd,Na,bb){Na=$jscomp.makeIterator(Na);var db=Na.next().value;
Na=Na.next().value;return cd.concat(Na.map(function(Sc){var Fd=V.isValidIdentifier(Sc);return{info:db,completion:Sc,prefix:Fd?Ha:"."+Ha,customInsertionFn:Fd?V.isMethodCallCompletion(Sc)?function(Pd,ae,tc,Kd){ae=Kd.start;Kd=Kd.end;Pd=Pd.replace(/\((.*)\)/,function(Yc){return"("+Yc.slice(1,-1).split(", ").map(function(ub,ja){return"${"+ja+":"+ub+"}"}).join(", ")+")"});Pd=new Ga.Snippet({expansion:Pd});tc.replace({start:ae,end:Kd},"");Pd.expandAtCursor(tc)}:null:function(Pd,ae,tc,Kd){Pd=Kd.start;Kd=
Kd.end;ae={row:Pd.row,column:Pd.column-1};Kd="."===tc.textInRange({start:ae,end:Pd})?{start:ae,end:Kd}:{start:Pd,end:Kd};tc.replace(Kd,V.wrapInBrackets(Sc))}}}))},[]);Ec.forEach(function(cd,Na){return Object.assign(cd,{priority:2E3+Ec.length-Na})});return Wa.return(Ec)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DynamicJavaScriptCompleter"}}],Lb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:1687,end:5122})}(void 0);Ga.DynamicJavaScriptCompleter=ua;Ga.DynamicJavaScriptCompleter=ua;Ga.DynamicJavaScriptCompleter=ua;Ga.keywords="arguments boolean break case catch class const continue debugger default delete eval export import extends false true finally instanceof static super this throw typeof while with yield await Array Date eval function hasOwnProperty Infinity isFinite isNaN isPrototypeOf length Math NaN name Number Object prototype String toString undefined valueOf alert assign clearInterval clearTimeout decodeURI decodeURIComponent document encodeURI encodeURIComponent escape navigator parseFloat parseInt setInterval setTimeout window document requestAnimationFrame cancelAnimationFrame".split(" ");
ua=function(lc){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/completers.js"),qc=Lb.hasOwnProperty("JavaScriptKeywordCompleter")&&"function"===typeof Lb.JavaScriptKeywordCompleter?Lb.JavaScriptKeywordCompleter:Lb.JavaScriptKeywordCompleter=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(qc,lc,[{key:"compute",value:function(I,V){return Ga.keywords.map(function(ra){return{completion:ra,priority:0}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptKeywordCompleter"}}],Lb,{pathInPackage:function(){return"js/completers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:6125,end:6262})}(void 0);Ga.JavaScriptKeywordCompleter=ua;Ga.JavaScriptKeywordCompleter=ua;Ga.JavaScriptKeywordCompleter=ua;ua=[new Ga.DynamicJavaScriptCompleter,
new Ga.JavaScriptKeywordCompleter,new Ga.ModuleTopLevelVarCompleter];Ga.completers=ua;Ga.completers=ua;Ga.completers=ua;var cb=lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");cb.Snippet=Zb;var rb=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],
["importd",'import ${0:name} from "${1:module}";'],["import*",'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],
["do","do {${1:/* code */}} while (${0:/* condition */});"],["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],
["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],
["ll","lively.lang."],["lls","lively.lang.string."],["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],
["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"]];cb.snippets=rb;cb.snippets=rb;cb.snippets=rb;var pb=lively.FreezerRuntime.recorderFor("lively.ide/js/commands.js");pb.getEvalEnv=function(lc){return(lc=lc.pluginFind(function(Lb){return Lb.isJSEditorPlugin}))?lc.evalEnvironment:null};pb.setEvalEnv=function(lc,Lb){(lc=lc.pluginFind(function(qc){return qc.isJSEditorPlugin}))&&Object.assign(lc.evalEnvironment,Lb);return lc.evalEnvironment};
pb.pToI=function(lc,Lb){return lc.positionToIndex(Lb)};pb.iToP=function(lc,Lb){return lc.indexToPosition(Lb)};pb.arr=$c;pb.promise=Hd;pb.string=Fc;pb.show=Pa;pb.Range=Rc;pb.query=yb;pb.BaseVisitor=gd;cb=[{name:"undefine variable",doc:"Finds the variable at cursor position (or position passed) and undefines it in the module toplevel scope.",exec:function(lc,Lb){Lb=void 0===Lb?{varName:null,position:null}:Lb;var qc,I,V,ra,ya,Gb,Pb,Ca,Yb,jd;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kc){switch(Kc.nextAddress){case 1:qc=
Lb;I=qc.varName;V=qc.position;if(!I){V||(V=lc.cursorPosition);ra=lc.pluginInvokeFirst("getNavigator");ya=ra.ensureAST(lc);Gb=pb.query.nodesAt(lc.positionToIndex(V),ya).reverse().find(function(zc){return"Identifier"===zc.type});if(!Gb)return lc.showError(Error("no identifier found!")),Kc.return(!0);I=Gb.name}Lb=lc.pluginFind(function(zc){return zc.isJSEditorPlugin}).sanatizedJsEnv();Pb='lively.modules.module("'+Lb.targetModule+'").undefine("'+I+'")';Kc.setCatchFinallyBlocks(2);return Kc.yield(lc.doEval(null,
Lb,Pb),4);case 4:Ca=Kc.yieldResult;Yb=Ca.error?Ca.error:Ca.isError?Ca.value:null;Kc.leaveTryBlock(3);break;case 2:Yb=jd=Kc.enterCatchBlock();case 3:return Yb?lc.showError(Yb):lc.setStatusMessage(I+" undefined"),Kc.return(!0)}})}},{name:"change doitContext",exec:function(lc){var Lb,qc,I,V,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ya){if(1==ya.nextAddress)return Lb=$jscomp,qc=Lb.makeIterator,ya.yield(lc.world().execCommand("select morph",{prompt:"select morph for doitContext",justReturn:!0,
prependItems:["reset"],filterFn:function(Gb){return!Gb.isUsedAsEpiMorph()}}),2);I=qc.call(Lb,ya.yieldResult);if(V=I.next().value)ra="reset"===V,lc.doitContext=ra?null:V,lc.setStatusMessage(ra?"doitContext is now\n"+V:"doitContext reset");return ya.return(!0)})}},{name:"change eval backend",exec:function(lc,Lb){Lb=void 0===Lb?{backend:void 0}:Lb;var qc,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(V){if(1==V.nextAddress)return qc=Lb,I=qc.backend,void 0!==I?V.jumpTo(2):V.yield(lc.world().prompt("choose eval backend",
{historyId:"js-eval-backend-history"}),3);if(2!=V.nextAddress&&(I=V.yieldResult,!I))return lc.setStatusMessage("Canceled"),V.return(!0);"local"===I&&(I=null);lc.setStatusMessage("Eval backend is now "+(I||"local"));return V.return(pb.setEvalEnv(lc,{remote:I}))})}},{name:"copy current module name to clipboard",exec:function(lc){var Lb=lc.evalEnvironment.targetModule;lc.setStatusMessage(Lb?Lb:"Cannot find module name");lc.env.eventDispatcher.killRing.add(lc);lc.env.eventDispatcher.doCopy(Lb);return!0}}];
pb.jsEditorCommands=cb;pb.jsEditorCommands=cb;pb.jsEditorCommands=cb;var Ta=[{name:"[javascript] list errors and warnings",exec:function(lc){var Lb,qc,I,V,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ya){if(1==ya.nextAddress){Lb=(lc.markers||[]).filter(function(Gb){Gb=Gb.type;return"js-undeclared-var"===Gb||"js-syntax-error"===Gb});if(!Lb.length)return pb.show("no warnings or errors"),ya.return(!0);qc=Lb.map(function(Gb){var Pb=Gb.range;return{isListItem:!0,string:"["+Gb.type.split("-").slice(1).join(" ")+
"] "+lc.textInRange(Pb),value:Pb}});return ya.yield(lc.world().filterableListPrompt("jump to warning or error",qc),2)}I=ya.yieldResult;V=$jscomp.makeIterator(I.selected);if(ra=V.next().value)lc.saveMark(),lc.selection=ra,lc.centerRow(ra.start.row);return ya.return(!0)})}},{name:"[javascript] inject import",exec:function(lc,Lb){Lb=void 0===Lb?{gotoImport:!1,insertImportAtCursor:!0}:Lb;var qc,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){switch(ra.nextAddress){case 1:return ra.yield(pb.promise.delay(0),
2);case 2:return ra.yield(System.import("lively.ide/js/import-helper.js"),3);case 3:return qc=ra.yieldResult,I=qc.interactivelyInjectImportIntoText,ra.yield(I(lc,Lb),4);case 4:return(V=ra.yieldResult)||lc.setStatusMessage("canceled"),ra.return(V)}})}},{name:"[javascript] fix undeclared variables",exec:function(lc,Lb){Lb=void 0===Lb?{ignore:[],autoApplyIfSingleChoice:!1,requester:lc}:Lb;var qc,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return ra.yield(System.import("lively.ide/js/import-helper.js"),
2);if(3!=ra.nextAddress)return qc=ra.yieldResult,I=qc.interactivlyFixUndeclaredVariables,ra.yield(I(lc,Lb),3);V=ra.yieldResult;lc.focus();return ra.return(V)})}},{name:"[javascript] remove unused imports",exec:function(lc,Lb){Lb=void 0===Lb?{query:!0}:Lb;var qc,I,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return ra.yield(System.import("lively.ide/js/import-helper.js"),2);if(3!=ra.nextAddress)return qc=ra.yieldResult,I=qc.cleanupUnusedImports,ra.yield(I(lc,
Lb),3);V=ra.yieldResult;lc.setStatusMessage(V);return ra.return(!0)})}},{name:"[javascript] eslint report",exec:function(lc){var Lb,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==I.nextAddress)return I.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Lb=I.yieldResult;qc=Lb.default;try{return I.return(qc.reportOnMorph(lc))}catch(V){lc.showError(V)}I.jumpToEnd()})}},{name:"[javascript] eslint preview fixes",exec:function(lc){var Lb,qc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(I){if(1==
I.nextAddress)return I.yield(System.import("lively.ide/js/eslint/lively-interface.js"),2);Lb=I.yieldResult;qc=Lb.default;try{return I.return(qc.previewFixesOnMorph(lc))}catch(V){lc.showError(V)}I.jumpToEnd()})}},{name:"[javascript] auto format code",handlesCount:!0,exec:function(lc,Lb,qc){function I(Wa,cd){cd||(cd=Ca(Wa,{allowReturnOutsideFunction:!0}));var Na=pb.string.lineRanges(Wa),bb=Wa.split("\n"),db=[],Sc=new pb.BaseVisitor,Fd=Sc.visitVariableDeclaration;Sc.visitVariableDeclaration=function(Kd,
Yc,ub){if(1<Kd.declarations.length)for(var ja=pb.string.findLineWithIndexInLineRanges(Na,Kd.start),oa=Kd.declarations[0].start-Na[ja][0],tb={},H=1;H<Kd.declarations.length;tb={$jscomp$loop$prop$actionType$2254:tb.$jscomp$loop$prop$actionType$2254,$jscomp$loop$prop$arg$2255:tb.$jscomp$loop$prop$arg$2255},H++){var la=Kd.declarations[H],Fa=pb.string.findLineWithIndexInLineRanges(Na,la.start);if(ja!==Fa){var kb=bb[Fa].match(/\s*/)[0].length;kb=oa-kb;0!==kb&&(la=pb.string.findLineWithIndexInLineRanges(Na,
la.end),tb.$jscomp$loop$prop$actionType$2254=0<kb?"insert":"delete",tb.$jscomp$loop$prop$arg$2255=0<kb?" ".repeat(kb):-kb,db.push.apply(db,$jscomp.arrayFromIterable(pb.arr.range(Fa,la).map(function(fc){return function(Bc){return[fc.$jscomp$loop$prop$actionType$2254,Na[Bc][0],fc.$jscomp$loop$prop$arg$2255]}}(tb)))))}}return Fd.call(Sc,Kd,Yc,ub)};Sc.accept(cd,{},[]);for(cd=db.length;cd--;){var Pd=$jscomp.makeIterator(db[cd]),ae=Pd.next().value,tc=Pd.next().value;Pd=Pd.next().value;"insert"===ae?Wa=
Wa.slice(0,tc)+Pd+Wa.slice(tc):"delete"===ae&&(Wa=Wa.slice(0,tc)+Wa.slice(tc+Pd))}return Wa}var V,ra,ya,Gb,Pb,Ca,Yb,jd,Kc,zc,Ha,Ec;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Wa){switch(Wa.nextAddress){case 1:return V=qc?qc:Math.floor(lc.width/lc.defaultCharExtent().width),Lb=Object.assign({printWidth:V,tabWidth:2,useTabs:!1,bracketSpacing:!1},Lb),ra=lively.modules.module,ya=System.normalizeSync("prettier/standalone.js"),Wa.yield(ra(ya).load({format:"global",instrument:!1}),2);case 2:return Gb=
Wa.yieldResult,Wa.yield(ra("lively.ast/lib/acorn-extension.js").load(),3);case 3:return Wa.yield(ra("lively.ast").load(),4);case 4:return Pb=Wa.yieldResult,Ca=Pb.parse,Wa.yield(ra("lively.ast/lib/query.js").load(),5);case 5:return Wa.yield(System.import("jsdiff",System.decanonicalize("lively.morphic")),6);case 6:return Yb=Wa.yieldResult,jd=lc.selection.isEmpty()?lc.documentRange:lc.selection.range,Kc=lc.positionToIndex(jd.start),zc=lc.positionToIndex(jd.end),Ha=Gb.format(lc.textString,Object.assign({},
Lb,{rangeStart:Kc,rangeEnd:zc,parser:function(cd,Na,bb){return Ca(cd,{allowReturnOutsideFunction:!0})}})),lc.undoManager.group(),Ec=Yb.diffChars(lc.textString,Ha),lc.applyJsDiffPatch(Ec),lc.selection.text=I(lc.selection.text),lc.undoManager.group(),Wa.return(!0)}})}}];pb.jsIdeCommands=Ta;pb.jsIdeCommands=Ta;pb.jsIdeCommands=Ta;var Ua=[{name:"selectDefinition",readOnly:!0,bindKey:"Alt-.",exec:function(lc,Lb){Lb=lc.pluginInvokeFirst("getNavigator");if(!Lb)return!0;Lb=Lb.resolveIdentifierAt(lc,lc.cursorPosition);
if(!Lb||!Lb.id)return pb.show("No symbol identifier selected"),!0;if(!Lb.decl)return pb.show("Cannot find declaration of "+Lb.name),!0;lc.saveMark();lc.selection={start:lc.indexToPosition(Lb.decl.start),end:lc.indexToPosition(Lb.decl.end)};lc.scrollCursorIntoView();return!0}},{name:"selectSymbolReferenceOrDeclarationNext",readOnly:!0,multiSelectAction:"single",exec:function(lc){lc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"next"})}},{name:"selectSymbolReferenceOrDeclarationPrev",
readOnly:!0,multiSelectAction:"single",exec:function(lc){lc.execCommand("selectSymbolReferenceOrDeclaration",{direction:"prev"})}},{name:"selectSymbolReferenceOrDeclaration",doc:"Finds the name of the currently selected symbol and will use the JS ast to select references and declarations whose name matches the symbol in the current scope.",readOnly:!0,multiSelectAction:"single",exec:function(lc,Lb){Lb=void 0===Lb?{direction:null}:Lb;var qc=lc.pluginInvokeFirst("getNavigator");if(!qc)return!0;qc=qc.resolveIdentifierAt(lc,
lc.cursorPosition);if(!qc||!qc.refs)return pb.show("No symbol identifier selected"),!0;var I=lc.selection;qc=qc.refs.map(function(ra){var ya=ra.end;return pb.Range.fromPositions(pb.iToP(lc,ra.start),pb.iToP(lc,ya))}).concat(qc.decl?pb.Range.fromPositions(pb.iToP(lc,qc.decl.start),pb.iToP(lc,qc.decl.end)):[]).sort(pb.Range.compare);if(!qc.length)return!0;var V=qc.map(String).indexOf(String(I.range));if("next"===Lb.direction||"prev"===Lb.direction)-1===V&&qc.length?qc=[qc[0]]:(Lb=V+("next"===Lb.direction?
1:-1),0>Lb?Lb=qc.length-1:Lb>=qc.length&&(Lb=0),qc=[qc[Lb]]);qc.forEach(function(ra){var ya=I.selections.findIndex(function(Pb){return Pb.range.equals(ra)}),Gb=I.selections.length-1;-1<ya?pb.arr.swap(I.selections,ya,Gb):I.addRange(ra,!1)});I.mergeSelections();return!0}}];pb.astEditorCommands=Ua;pb.astEditorCommands=Ua;pb.astEditorCommands=Ua;lively.modules&&!lively.FreezerRuntime&&lively.modules.module("lively.ide/js/editor-plugin.js").reload({reloadDeps:!1,resetEnv:!1});var ob=lively.FreezerRuntime.recorderFor("lively.ide/js/mode.js");
ob.expressionAllowed=function(lc,Lb,qc){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(Lb.lastType)||"quasi"==Lb.lastType&&/\{\s*$/.test(lc.string.slice(0,lc.pos-(qc||0)))};ob.passIndent=mb;ob.defineMode=Nb;ob.defineMIME=Ub;ob.registerHelper=Ic;ob.defaultConfig={indentUnit:2};ob.defaultParserConfig={name:"javascript",statementIndent:2,jsonld:!1,json:!1,typescript:!1,wordCharacters:/[\w$\xa1-\uffff]/,globalVars:[],localVars:[],doubleIndentSwitch:null};ob.defineMode("javascript",
function(lc,Lb){function qc(Bb,Mc,gc){ii=Bb;Di=gc;return Mc}function I(Bb,Mc){var gc=Bb.next();if('"'==gc||"'"==gc)return Mc.tokenize=V(gc),Mc.tokenize(Bb,Mc);if("."==gc&&Bb.match(/^\d+(?:[eE][+\-]?\d+)?/))return qc("number","number");if("."==gc&&Bb.match(".."))return qc("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(gc))return qc(gc);if("="==gc&&Bb.eat(">"))return qc("=>","operator");if("0"==gc&&Bb.eat(/x/i))return Bb.eatWhile(/[\da-f]/i),qc("number","number");if("0"==gc&&Bb.eat(/o/i))return Bb.eatWhile(/[0-7]/i),
qc("number","number");if("0"==gc&&Bb.eat(/b/i))return Bb.eatWhile(/[01]/i),qc("number","number");if(/\d/.test(gc))return Bb.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),qc("number","number");if("/"==gc){if(Bb.eat("*"))return Mc.tokenize=ra,ra(Bb,Mc);if(Bb.eat("/"))return Bb.skipToEnd(),qc("comment","comment");if(ob.expressionAllowed(Bb,Mc,1)){a:for(var id=Mc=!1;null!=(gc=Bb.next());){if(!Mc){if("/"==gc&&!id)break a;"["==gc?id=!0:id&&"]"==gc&&(id=!1)}Mc=!Mc&&"\\"==gc}Bb.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);
return qc("regexp","string-2")}Bb.eatWhile(Ni);return qc("operator","operator",Bb.current())}if("`"==gc)return Mc.tokenize=ya,ya(Bb,Mc);if("#"==gc)return Bb.skipToEnd(),qc("error","error");if(Ni.test(gc))return">"==gc&&Mc.lexical&&">"==Mc.lexical.type||Bb.eatWhile(Ni),qc("operator","operator",Bb.current());if(mk.test(gc))return Bb.eatWhile(mk),Bb=Bb.current(),(gc=pj.propertyIsEnumerable(Bb)&&pj[Bb])&&"."!=Mc.lastType?qc(gc.type,gc.style,Bb):qc("variable","variable",Bb)}function V(Bb){return function(Mc,
gc){var id=!1,Cf;if(Gg&&"@"==Mc.peek()&&Mc.match(nk))return gc.tokenize=I,qc("jsonld-keyword","meta");for(;null!=(Cf=Mc.next())&&(Cf!=Bb||id);)id=!id&&"\\"==Cf;id||(gc.tokenize=I);return qc("string","string")}}function ra(Bb,Mc){for(var gc=!1,id;id=Bb.next();){if("/"==id&&gc){Mc.tokenize=I;break}gc="*"==id}return qc("comment","comment")}function ya(Bb,Mc){for(var gc=!1,id;null!=(id=Bb.next());){if(!gc&&("`"==id||"$"==id&&Bb.eat("{"))){Mc.tokenize=I;break}gc=!gc&&"\\"==id}return qc("quasi","string-2",
Bb.current())}function Gb(Bb,Mc){Mc.fatArrowAt&&(Mc.fatArrowAt=null);var gc=Bb.string.indexOf("=>",Bb.start);if(!(0>gc)){if(wi){var id=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Bb.string.slice(Bb.start,gc));id&&(gc=id.index)}id=0;var Cf=!1;for(--gc;0<=gc;--gc){var Lf=Bb.string.charAt(gc),xi="([{}])".indexOf(Lf);if(0<=xi&&3>xi){if(!id){++gc;break}if(0==--id){"("==Lf&&(Cf=!0);break}}else if(3<=xi&&6>xi)++id;else if(mk.test(Lf))Cf=!0;else{if(/["'\/]/.test(Lf))return;if(Cf&&!id){++gc;break}}}Cf&&
!id&&(Mc.fatArrowAt=gc)}}function Pb(Bb,Mc,gc,id,Cf,Lf){this.indented=Bb;this.column=Mc;this.type=gc;this.prev=Cf;this.info=Lf;null!=id&&(this.align=id)}function Ca(){for(var Bb=arguments.length-1;0<=Bb;Bb--)Ue.cc.push(arguments[Bb])}function Yb(){Ca.apply(null,arguments);return!0}function jd(Bb){function Mc(id){for(;id;id=id.next)if(id.name==Bb)return!0;return!1}var gc=Ue.state;Ue.marked="def";gc.context?Mc(gc.localVars)||(gc.localVars={name:Bb,next:gc.localVars}):!Mc(gc.globalVars)&&Lb.globalVars&&
(gc.globalVars={name:Bb,next:gc.globalVars})}function Kc(){Ue.state.context={prev:Ue.state.context,vars:Ue.state.localVars};Ue.state.localVars=sj}function zc(){Ue.state.localVars=Ue.state.context.vars;Ue.state.context=Ue.state.context.prev}function Ha(Bb,Mc){var gc=function(){var id=Ue.state,Cf=id.indented;if("stat"==id.lexical.type)Cf=id.lexical.indented;else for(var Lf=id.lexical;Lf&&")"==Lf.type&&Lf.align;Lf=Lf.prev)Cf=Lf.indented;id.lexical=new Pb(Cf,Ue.stream.column(),Bb,null,id.lexical,Mc)};
gc.lex=!0;return gc}function Ec(){var Bb=Ue.state;Bb.lexical.prev&&(")"==Bb.lexical.type&&(Bb.indented=Bb.lexical.indented),Bb.lexical=Bb.lexical.prev)}function Wa(Bb){function Mc(gc){return gc==Bb?Yb():";"==Bb?Ca():Yb(Mc)}return Mc}function cd(Bb,Mc){return"var"==Bb?Yb(Ha("vardef",Mc.length),pc,Wa(";"),Ec):"keyword a"==Bb?Yb(Ha("form"),db,cd,Ec):"keyword b"==Bb?Yb(Ha("form"),cd,Ec):"{"==Bb?Yb(Ha("}"),le,Ec):";"==Bb?Yb():"if"==Bb?("else"==Ue.state.lexical.info&&Ue.state.cc[Ue.state.cc.length-1]==
Ec&&Ue.state.cc.pop()(),Yb(Ha("form"),db,cd,Ec,va)):"function"==Bb?Yb(eb):"for"==Bb?Yb(Ha("form"),Ma,cd,Ec):"variable"==Bb?wi&&"type"==Mc?(Ue.marked="keyword",Yb(Rd,Wa("operator"),Rd,Wa(";"))):Yb(Ha("stat"),la):"switch"==Bb?Yb(Ha("form"),db,Wa("{"),Ha("}","switch"),le,Ec,Ec):"case"==Bb?Yb(Na,Wa(":")):"default"==Bb?Yb(Wa(":")):"catch"==Bb?Yb(Ha("form"),Kc,Wa("("),hc,Wa(")"),cd,Ec,zc):"class"==Bb?Yb(Ha("form"),Qc,Ec):"export"==Bb?Yb(Ha("stat"),ie,Ec):"import"==Bb?Yb(Ha("stat"),lg,Ec):"module"==Bb?Yb(Ha("form"),
Ie,Wa("{"),Ha("}"),le,Ec,Ec):"async"==Bb?Yb(cd):"@"==Mc?Yb(Na,cd):Ca(Ha("stat"),Na,Wa(";"),Ec)}function Na(Bb){return Sc(Bb,!1)}function bb(Bb){return Sc(Bb,!0)}function db(Bb){return"("!=Bb?Ca():Yb(Ha(")"),Na,Wa(")"),Ec)}function Sc(Bb,Mc){if(Ue.state.fatArrowAt==Ue.stream.start){var gc=Mc?ja:ub;if("("==Bb)return Yb(Kc,Ha(")"),xd(Ie,")"),Ec,Wa("=>"),gc,zc);if("variable"==Bb)return Ca(Kc,Ie,Wa("=>"),gc,zc)}gc=Mc?tc:ae;return Xl.hasOwnProperty(Bb)?Yb(gc):"function"==Bb?Yb(eb,gc):"class"==Bb?Yb(Ha("form"),
ic,Ec):"keyword c"==Bb||"async"==Bb?Yb(Mc?Pd:Fd):"("==Bb?Yb(Ha(")"),Fd,Wa(")"),Ec,gc):"operator"==Bb||"spread"==Bb?Yb(Mc?bb:Na):"["==Bb?Yb(Ha("]"),Zi,Ec,gc):"{"==Bb?pd(kb,"}",null,gc):"quasi"==Bb?Ca(Kd,gc):"new"==Bb?Yb(oa(Mc)):Yb()}function Fd(Bb){return Bb.match(/[;\}\)\],]/)?Ca():Ca(Na)}function Pd(Bb){return Bb.match(/[;\}\)\],]/)?Ca():Ca(bb)}function ae(Bb,Mc){return","==Bb?Yb(Na):tc(Bb,Mc,!1)}function tc(Bb,Mc,gc){var id=0==gc?ae:tc,Cf=0==gc?Na:bb;if("=>"==Bb)return Yb(Kc,gc?ja:ub,zc);if("operator"==
Bb)return/\+\+|--/.test(Mc)?Yb(id):"?"==Mc?Yb(Na,Wa(":"),Cf):Yb(Cf);if("quasi"==Bb)return Ca(Kd,id);if(";"!=Bb){if("("==Bb)return pd(bb,")","call",id);if("."==Bb)return Yb(Fa,id);if("["==Bb)return Yb(Ha("]"),Fd,Wa("]"),Ec,id)}}function Kd(Bb,Mc){return"quasi"!=Bb?Ca():"${"!=Mc.slice(Mc.length-2)?Yb(Kd):Yb(Na,Yc)}function Yc(Bb){if("}"==Bb)return Ue.marked="string-2",Ue.state.tokenize=ya,Yb(Kd)}function ub(Bb){Gb(Ue.stream,Ue.state);return Ca("{"==Bb?cd:Na)}function ja(Bb){Gb(Ue.stream,Ue.state);return Ca("{"==
Bb?cd:bb)}function oa(Bb){return function(Mc){return"."==Mc?Yb(Bb?H:tb):Ca(Bb?bb:Na)}}function tb(Bb,Mc){if("target"==Mc)return Ue.marked="keyword",Yb(ae)}function H(Bb,Mc){if("target"==Mc)return Ue.marked="keyword",Yb(tc)}function la(Bb){return":"==Bb?Yb(Ec,cd):Ca(ae,Wa(";"),Ec)}function Fa(Bb){if("variable"==Bb)return Ue.marked="property",Yb()}function kb(Bb,Mc){if("async"==Bb)return Ue.marked="property",Yb(kb);if("variable"==Bb||"keyword"==Ue.style)return Ue.marked="property","get"==Mc||"set"==
Mc?Yb(fc):Yb(Bc);if("number"==Bb||"string"==Bb)return Ue.marked=Gg?"property":Ue.style+" property",Yb(Bc);if("jsonld-keyword"==Bb)return Yb(Bc);if("modifier"==Bb)return Yb(kb);if("["==Bb)return Yb(Na,Wa("]"),Bc);if("spread"==Bb)return Yb(Na);if(":"==Bb)return Ca(Bc)}function fc(Bb){if("variable"!=Bb)return Ca(Bc);Ue.marked="property";return Yb(eb)}function Bc(Bb){if(":"==Bb)return Yb(bb);if("("==Bb)return Ca(eb)}function xd(Bb,Mc,gc){function id(Cf,Lf){return(gc?-1<gc.indexOf(Cf):","==Cf)?(Cf=Ue.state.lexical,
"call"==Cf.info&&(Cf.pos=(Cf.pos||0)+1),Yb(function(xi,rl){return xi==Mc||rl==Mc?Ca():Ca(Bb)},id)):Cf==Mc||Lf==Mc?Yb():Yb(Wa(Mc))}return function(Cf,Lf){return Cf==Mc||Lf==Mc?Yb():Ca(Bb,id)}}function pd(Bb,Mc,gc){for(var id=3;id<arguments.length;id++)Ue.cc.push(arguments[id]);return Yb(Ha(Mc,gc),xd(Bb,Mc),Ec)}function le(Bb){return"}"==Bb?Yb():Ca(cd,le)}function nd(Bb,Mc){if(wi){if(":"==Bb)return Yb(Rd);if("?"==Mc)return Yb(nd)}}function Rd(Bb){if("variable"==Bb)return Ue.marked="variable-3",Yb(Le);
if("string"==Bb||"number"==Bb||"atom"==Bb)return Yb(Le);if("{"==Bb)return Yb(Ha("}"),xd(Ce,"}",",;"),Ec);if("("==Bb)return Yb(xd(hf,")"),be)}function be(Bb){if("=>"==Bb)return Yb(Rd)}function Ce(Bb,Mc){if("variable"==Bb||"keyword"==Ue.style)return Ue.marked="property",Yb(Ce);if("?"==Mc)return Yb(Ce);if(":"==Bb)return Yb(Rd)}function hf(Bb){if("variable"==Bb)return Yb(hf);if(":"==Bb)return Yb(Rd)}function Le(Bb,Mc){if("<"==Mc)return Yb(Ha(">"),xd(Rd,">"),Ec,Le);if("|"==Mc||"."==Bb)return Yb(Rd);if("["==
Bb)return Yb(Wa("]"),Le);if("extends"==Mc)return Yb(Rd)}function pc(){return Ca(Ie,nd,sf,re)}function Ie(Bb,Mc){if("modifier"==Bb)return Yb(Ie);if("variable"==Bb)return jd(Mc),Yb();if("spread"==Bb)return Yb(Ie);if("["==Bb)return pd(Ie,"]");if("{"==Bb)return pd(rf,"}")}function rf(Bb,Mc){if("variable"==Bb&&!Ue.stream.match(/^\s*:/,!1))return jd(Mc),Yb(sf);"variable"==Bb&&(Ue.marked="property");return"spread"==Bb?Yb(Ie):"}"==Bb?Ca():Yb(Wa(":"),Ie,sf)}function sf(Bb,Mc){if("="==Mc)return Yb(bb)}function re(Bb){if(","==
Bb)return Yb(pc)}function va(Bb,Mc){if("keyword b"==Bb&&"else"==Mc)return Yb(Ha("form","else"),cd,Ec)}function Ma(Bb){if("("==Bb)return Yb(Ha(")"),jb,Wa(")"),Ec)}function jb(Bb){return"var"==Bb?Yb(pc,Wa(";"),wa):";"==Bb?Yb(wa):"variable"==Bb?Yb(R):Ca(Na,Wa(";"),wa)}function R(Bb,Mc){return"in"==Mc||"of"==Mc?(Ue.marked="keyword",Yb(Na)):Yb(ae,wa)}function wa(Bb,Mc){return";"==Bb?Yb(Za):"in"==Mc||"of"==Mc?(Ue.marked="keyword",Yb(Na)):Ca(Na,Wa(";"),Za)}function Za(Bb){")"!=Bb&&Yb(Na)}function eb(Bb,
Mc){if("*"==Mc)return Ue.marked="keyword",Yb(eb);if("variable"==Bb)return jd(Mc),Yb(eb);if("("==Bb)return Yb(Kc,Ha(")"),xd(hc,")"),Ec,nd,cd,zc);if(wi&&"<"==Mc)return Yb(Ha(">"),xd(Rd,">"),Ec,eb)}function hc(Bb){return"spread"==Bb?Yb(hc):Ca(Ie,nd,sf)}function ic(Bb,Mc){return"variable"==Bb?Qc(Bb,Mc):Pc(Bb,Mc)}function Qc(Bb,Mc){if("variable"==Bb)return jd(Mc),Yb(Pc)}function Pc(Bb,Mc){if("<"==Mc)return Yb(Ha(">"),xd(Rd,">"),Ec,Pc);if("extends"==Mc||"implements"==Mc||wi&&","==Bb)return Yb(wi?Rd:Na,
Pc);if("{"==Bb)return Yb(Ha("}"),Nc,Ec)}function Nc(Bb,Mc){if("variable"==Bb||"keyword"==Ue.style){if(("async"==Mc||"static"==Mc||"get"==Mc||"set"==Mc||wi&&("public"==Mc||"private"==Mc||"protected"==Mc||"readonly"==Mc||"abstract"==Mc))&&Ue.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return Ue.marked="keyword",Yb(Nc);Ue.marked="property";return Yb(wi?He:eb,Nc)}if("["==Bb)return Yb(Na,Wa("]"),wi?He:eb,Nc);if("*"==Mc)return Ue.marked="keyword",Yb(Nc);if(";"==Bb)return Yb(Nc);if("}"==Bb)return Yb();if("@"==
Mc)return Yb(Na,Nc)}function He(Bb,Mc){return"?"==Mc?Yb(He):":"==Bb?Yb(Rd,sf):"="==Mc?Yb(bb):Ca(eb)}function ie(Bb,Mc){return"*"==Mc?(Ue.marked="keyword",Yb(wg,Wa(";"))):"default"==Mc?(Ue.marked="keyword",Yb(Na,Wa(";"))):"{"==Bb?Yb(xd(df,"}"),wg,Wa(";")):Ca(cd)}function df(Bb,Mc){if("as"==Mc)return Ue.marked="keyword",Yb(Wa("variable"));if("variable"==Bb)return Ca(bb,df)}function lg(Bb){return"string"==Bb?Yb():Ca(rh,Cg,wg)}function rh(Bb,Mc){if("{"==Bb)return pd(rh,"}");"variable"==Bb&&jd(Mc);"*"==
Mc&&(Ue.marked="keyword");return Yb(Wh)}function Cg(Bb){if(","==Bb)return Yb(rh,Cg)}function Wh(Bb,Mc){if("as"==Mc)return Ue.marked="keyword",Yb(rh)}function wg(Bb,Mc){if("from"==Mc)return Ue.marked="keyword",Yb(Na)}function Zi(Bb){return"]"==Bb?Yb():Ca(xd(bb,"]"))}lc=Object.assign({},ob.defaultConfig,{},lc);Lb=Object.assign({},ob.defaultParserConfig,{},Lb);var Mf=lc.indentUnit,Ei=Lb.statementIndent,Gg=Lb.jsonld,ri=Lb.json||Gg,wi=Lb.typescript,mk=Lb.wordCharacters||/[\w$\xa1-\uffff]/,pj=function(){function Bb(rl){return{type:rl,
style:"keyword"}}var Mc=Bb("keyword a"),gc=Bb("keyword b"),id=Bb("keyword c"),Cf=Bb("operator"),Lf={type:"atom",style:"atom"};Mc={"if":Bb("if"),"while":Mc,"with":Mc,"else":gc,"do":gc,"try":gc,"finally":gc,"return":id,"break":id,"continue":id,"new":Bb("new"),"delete":id,"throw":id,"debugger":id,"var":Bb("var"),"const":Bb("var"),let:Bb("var"),"function":Bb("function"),"catch":Bb("catch"),"for":Bb("for"),"switch":Bb("switch"),"case":Bb("case"),"default":Bb("default"),"in":Cf,"typeof":Cf,"instanceof":Cf,
"true":Lf,"false":Lf,"null":Lf,undefined:Lf,NaN:Lf,Infinity:Lf,"this":Bb("this"),"class":Bb("class"),"super":Bb("atom"),yield:id,"export":Bb("export"),"import":Bb("import"),"extends":id,await:id,async:Bb("async")};if(wi){gc={type:"variable",style:"variable-3"};id={"interface":Bb("class"),"implements":id,namespace:id,module:Bb("module"),"enum":Bb("module"),"public":Bb("modifier"),"private":Bb("modifier"),"protected":Bb("modifier"),"abstract":Bb("modifier"),as:Cf,string:gc,number:gc,"boolean":gc,any:gc};
for(var xi in id)Mc[xi]=id[xi]}return Mc}(),Ni=/[+\-*&%=<>!?|~^@]/,nk=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,ii,Di,Xl={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Ue={state:null,column:null,marked:null,cc:null},sj={name:"this",next:{name:"arguments"}};Ec.lex=!0;return{startState:function(Bb){Bb={tokenize:I,lastType:"sof",cc:[],lexical:new Pb((Bb||0)-Mf,0,"block",!1),localVars:Lb.localVars,context:Lb.localVars&&{vars:Lb.localVars},
indented:Bb||0};Lb.globalVars&&"object"==typeof Lb.globalVars&&(Bb.globalVars=Lb.globalVars);return Bb},token:function(Bb,Mc){Bb.sol()&&(Mc.lexical.hasOwnProperty("align")||(Mc.lexical.align=!1),Mc.indented=Bb.indentation(),Gb(Bb,Mc));if(Mc.tokenize!=ra&&Bb.eatSpace())return null;var gc=Mc.tokenize(Bb,Mc);if("comment"==ii)return gc;Mc.lastType="operator"!=ii||"++"!=Di&&"--"!=Di?ii:"incdec";a:{var id=ii,Cf=Di,Lf=Mc.cc;Ue.state=Mc;Ue.stream=Bb;Ue.marked=null;Ue.cc=Lf;Ue.style=gc;Mc.lexical.hasOwnProperty("align")||
(Mc.lexical.align=!0);for(Bb=0;;){if(1E5<Bb++)throw Error("endless");if((Lf.length?Lf.pop():ri?Na:cd)(id,Cf)){for(;Lf.length&&Lf[Lf.length-1].lex;)Lf.pop()();if(Ue.marked){gc=Ue.marked;break a}if(id="variable"==id)b:{for(id=Mc.localVars;id;id=id.next)if(id.name==Cf){id=!0;break b}for(Mc=Mc.context;Mc;Mc=Mc.prev)for(id=Mc.vars;id;id=id.next)if(id.name==Cf){id=!0;break b}id=void 0}if(id){gc="variable-2";break a}break a}}}return gc},indent:function(Bb,Mc){if(Bb.tokenize==ra)return ob.passIndent;if(Bb.tokenize!=
I)return 0;var gc=Mc&&Mc.charAt(0),id=Bb.lexical,Cf;if(!/^\s*else\b/.test(Mc))for(var Lf=Bb.cc.length-1;0<=Lf;--Lf){var xi=Bb.cc[Lf];if(xi==Ec)id=id.prev;else if(xi!=va)break}for(;!("stat"!=id.type&&"form"!=id.type||"}"!=gc&&(!(Cf=Bb.cc[Bb.cc.length-1])||Cf!=ae&&Cf!=tc||/^[,\.=+\-*:?[\(]/.test(Mc)));)id=id.prev;Ei&&")"==id.type&&"stat"==id.prev.type&&(id=id.prev);Cf=id.type;Lf=gc==Cf;return(xi=Bb._string)&&xi.trimLeft().startsWith("?")&&":"===gc?xi.indexOf("?"):xi&&":"===Bb.lastType&&"}"!==id.type?
xi.match(/^\s*/)[0].length:"vardef"==Cf?(Mc=id.indented+id.info+2+Bb.localVars.name.length,"?"===gc||":"===gc||"|"===gc||"&"===gc?Mc:","==Bb.lastType?id.indented+id.info+1:"operator"==Bb.lastType?Mc+3:id.indented):"form"==Cf&&"{"==gc?id.indented:"form"==Cf?id.indented+Mf:"stat"==Cf?(gc=id.indented,Bb="operator"==Bb.lastType||","==Bb.lastType||Ni.test(Mc.charAt(0))||/[,.]/.test(Mc.charAt(0)),gc+(Bb?Ei||Mf:0)):"switch"!=id.info||Lf||0==Lb.doubleIndentSwitch?id.align?id.column+(Lf?0:1):id.indented+(Lf?
0:Mf):id.indented+(/^(?:case|default)\b/.test(Mc)?Mf:2*Mf)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:ri?null:"/*",blockCommentEnd:ri?null:"*/",lineComment:ri?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:ri?"json":"javascript",jsonldMode:Gg,jsonMode:ri,expressionAllowed:ob.expressionAllowed,skipExpression:function(Bb){var Mc=Bb.cc[Bb.cc.length-1];Mc!=Na&&Mc!=bb||Bb.cc.pop()}}});ob.registerHelper("wordChars","javascript",/[\w$]/);ob.defineMIME("text/javascript",
"javascript");ob.defineMIME("text/ecmascript","javascript");ob.defineMIME("application/javascript","javascript");ob.defineMIME("application/x-javascript","javascript");ob.defineMIME("application/ecmascript","javascript");ob.defineMIME("application/json",{name:"javascript",json:!0});ob.defineMIME("application/x-json",{name:"javascript",json:!0});ob.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});ob.defineMIME("text/typescript",{name:"javascript",typescript:!0});ob.defineMIME("application/typescript",
{name:"javascript",typescript:!0});var Wb=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Wb.string=Fc;Wb.JavaScriptChecker=Db;Wb.JavaScriptNavigator=yc;Wb.completers=ua;Wb.jsSnippets=rb;Wb.jsIdeCommands=Ta;Wb.jsEditorCommands=cb;Wb.astEditorCommands=Ua;Wb.CodeMirrorEnabledEditorPlugin=wd;Wb.Snippet=Zb;Wb.parser=Uc;Wb.localInterface=Eb;Wb.systemInterfaceNamed=Sb;Wb.serverInterfaceFor=sb;Wb.l2lInterfaceFor=ec;Db=function(lc){var Lb=lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),
qc=Lb.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof Lb.JavaScriptEditorPlugin?Lb.JavaScriptEditorPlugin:Lb.JavaScriptEditorPlugin=function(I){I&&I[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return lb(qc,lc,[{key:Symbol.for("lively-instance-initialize"),value:function(){lb._get(Object.getPrototypeOf(qc.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.checker=new Wb.JavaScriptChecker;this.evalEnvironment=
{format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(I){lb._get(Object.getPrototypeOf(qc.prototype),"attach",this).call(this,I);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:I})}},{key:"detach",value:function(I){this.checker.uninstall(this.textMorph);lb._get(Object.getPrototypeOf(qc.prototype),"detach",this).call(this,
I)}},{key:"getNavigator",value:function(){return new Wb.JavaScriptNavigator}},{key:"getCompleters",value:function(I){return Wb.completers.concat(I)}},{key:"getCommands",value:function(I){return[].concat($jscomp.arrayFromIterable(lb._get(Object.getPrototypeOf(qc.prototype),"getCommands",this).call(this,I)),$jscomp.arrayFromIterable(Wb.jsIdeCommands),$jscomp.arrayFromIterable(Wb.jsEditorCommands),$jscomp.arrayFromIterable(Wb.astEditorCommands))}},{key:"getKeyBindings",value:function(I){return[].concat($jscomp.arrayFromIterable(I),
[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},
command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(I){var V=this,ra,ya,Gb,Pb,Ca;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){ra=V.textMorph;ya=[{command:"doit",target:ra,showKeyShortcuts:!0},{command:"inspectit",target:ra,showKeyShortcuts:!0},{command:"printit",target:ra,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",
target:ra,showKeyShortcuts:!0},{command:"eval all",target:ra,showKeyShortcuts:!0},{command:"text completion",alias:"code completion",target:ra,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:ra,showKeyShortcuts:!0},{isDivider:!0}];V.evalEnvironment.targetModule&&ya.push({command:"[javascript] inject import",alias:"add import",target:ra},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:ra},{command:"[javascript] remove unused imports",
alias:"remove unused imports",target:ra});Gb=V.getNavigator();(Pb=Gb.resolveIdentifierAt(ra,ra.cursorPosition))&&ya.push({command:"selectDefinition",alias:'jump to definition of "'+Pb.name+'"',target:ra},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'+Pb.name+'"',target:ra});(Ca=ra.selection.text.trim())&&ya.push({command:"open code search",alias:'code search for "'+Wb.string.truncate(Ca,30)+'"',target:ra.world(),args:{input:Ca,backend:V.backend()}});ya.push({isDivider:!0});
return Yb.return(ya.concat(I))})}},{key:"getSnippets",value:function(){return Wb.jsSnippets.map(function(I){var V=$jscomp.makeIterator(I);I=V.next().value;V=V.next().value;return new Wb.Snippet({trigger:I,expansion:V})})}},{key:"sanatizedJsEnv",value:function(I){I=Object.assign({},this.evalEnvironment,{},I);I.format||(I.formatd="esm");I.context||(I.context=this.textMorph);I.sourceURL||(I.sourceURL=I.targetModule+"_doit_"+Date.now());I.systemInterface||(I.systemInterface=Wb.localInterface);return I}},
{key:"backend",value:function(I){I=this.sanatizedJsEnv(I);return I.remote?I.remote:"local"}},{key:"systemInterface",value:function(I){return this.sanatizedJsEnv(I).systemInterface||Wb.localInterface}},{key:"setSystemInterface",value:function(I){return this.evalEnvironment.systemInterface=I}},{key:"setSystemInterfaceNamed",value:function(I){return this.setSystemInterface(Wb.systemInterfaceNamed(I))}},{key:"runEval",value:function(I,V){V=this.sanatizedJsEnv(V);return this.systemInterface(V).runEval(I,
V)}},{key:"parser",get:function(){return Wb.parser}},{key:"parse",value:function(I){I=void 0===I?null:I;if(this._ast&&this._ast._astType===I)return this._ast;var V=this.parser,ra=this.textMorph.textString;if(!V)return null;var ya={withComments:!0,allowReturnOutsideFunction:!0};I&&(ya.type=I);if(ra.startsWith("#!")){var Gb=ra.indexOf("\n");ra=" ".repeat(Gb)+ra.slice(Gb)}V=V.fuzzyParse(ra,ya);V._astType=I;return this._ast=V}},{key:"undeclaredVariables",value:function(I){var V=this.parser,ra=this.evalEnvironment.knownGlobals||
[];I=this.parse(void 0===I?null:I);return V&&I?V.query.findGlobalVarRefs(I,{jslintGlobalComment:!0}).filter(function(ya){return!ra.includes(ya.name)}):[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],Lb,{pathInPackage:function(){return"js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:662,end:6694})}(Wb.CodeMirrorEnabledEditorPlugin);Db=Wb.JavaScriptEditorPlugin;ta("default",Db);Wb.default=Db}}});System.register("10",[],function(){return{execute:function(){lively.FreezerRuntime.recorderFor("lively.shell/index.js")}}});