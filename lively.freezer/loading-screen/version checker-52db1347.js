System.register(["./__root_module__-28353364.js","./index-113b6183.js","./index-4fd2821f.js"],function(){var Ia,mb,vb,Vb,Eb;return{setters:[function(Jc){Ia=Jc.M;mb=Jc.bc;vb=Jc.r;Vb=Jc.i},function(Jc){Eb=Jc.e},function(){}],execute:function(){var Jc=lively.FreezerRuntime.recorderFor("VersionChecker/index.js");Jc.Morph=Ia;Jc.runCommand=mb;Jc.evalOnServer=Eb;Jc.resource=vb;var Bc=function(Uc){var tc=lively.FreezerRuntime.recorderFor("VersionChecker/index.js"),oc=tc.hasOwnProperty("VersionChecker")&&
"function"===typeof tc.VersionChecker?tc.VersionChecker:tc.VersionChecker=function(sc){sc&&sc[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Vb(oc,Uc,[{key:"onLoad",value:function(){this.isComponent||this.withAllSubmorphsDo(function(sc){return sc.halosEnabled=!1})}},{key:"checkVersion",value:function(){this.reset();this.checkIfUpToDate()}},{key:"onMouseDown",value:function(sc){Vb._get(Object.getPrototypeOf(oc.prototype),"onMouseDown",
this).call(this,sc);this.isComponent||this.checkVersion()}},{key:"relayout",value:function(){this.bottomLeft=this.world().visibleBounds().insetBy(10).bottomLeft()}},{key:"checkIfUpToDate",value:function(){var sc=this,Tc,Fd,Rd,ee,Dc,rd,Ab;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qc){switch(qc.nextAddress){case 1:return Tc="git rev-parse master",qc.yield(Jc.evalOnServer("System.baseURL").then(function(Xc){return Xc.replace("file://","")}),2);case 2:return Fd=qc.yieldResult,qc.yield(Jc.runCommand("git fetch",
{cwd:Fd}).whenDone(),3);case 3:return qc.yield(Jc.runCommand(Tc,{cwd:Fd}).whenDone(),4);case 4:return Rd=qc.yieldResult,ee=Rd.stdout,Dc=ee.split("\n")[0],qc.yield(Jc.resource("https://api.github.com/repos/LivelyKernel/lively.next/commits/master").readJson(),5);case 5:return rd=qc.yieldResult,Ab=rd.sha,Dc!=Ab?qc.return(sc.showOutdated(Dc.slice(0,6))):qc.return(sc.showUpToDate(Dc.slice(0,6)))}})}},{key:"showOutdated",value:function(sc){var Tc=this.ui,Fd=Tc.checking,Rd=Tc.outdated;Tc.status.value=["Version: ",
{},"["+sc+"]",{fontWeight:"bold"}," (Please update!)"];Fd.visible=Fd.isLayoutable=!1;Rd.visible=Rd.isLayoutable=!0}},{key:"showUpToDate",value:function(sc){var Tc=this.ui,Fd=Tc.checking,Rd=Tc.latest;Tc.status.value=["Version: ",{},"["+sc+"]",{fontWeight:"bold"}];Fd.visible=Fd.isLayoutable=!1;Rd.visible=Rd.isLayoutable=!0}},{key:"reset",value:function(){var sc=this.ui,Tc=sc.checking,Fd=sc.outdated,Rd=sc.latest;sc.status.value="Checking version...";Tc.visible=Tc.isLayoutable=!0;Fd.visible=Rd.visible=
Fd.isLayoutable=Rd.isLayoutable=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VersionChecker"}},{key:"properties",get:function(){return{isEpiMorph:{derived:!0,get:function(){return!this.isComponent}},respondsToVisibleWindow:{derived:!0,get:function(){return!this.isComponent}},ui:{derived:!0,get:function(){return{status:this.get("version status label"),checking:this.get("loading indicator"),outdated:this.get("icon outdated"),latest:this.get("icon latest")}}}}}}],tc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"VersionChecker",version:"0.1.1-20"}}},{start:232,end:2729})}(Jc.Morph);Bc=Jc.VersionChecker;Jc.default=Bc}}});System.register("18",["./__root_module__-28353364.js","./object-classes-d1bf095f.js","./user-ui-49874e7c.js","./index-2112d28c.js"],function(){return{setters:[function(){},function(){},function(){},function(){}],execute:function(){}}});