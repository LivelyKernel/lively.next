System.register("./__root_module__-89b08ab2.js kld-intersections ./index-08f1886d.js ./index-4f78f9ac.js ./index-1502344e.js ./color-picker-5aa8abd6.js ./index-2d2ce42c.js".split(" "),function(){var ta,nb,xb,Ob,Hb,qd,Dc,hd,Hc,Fc,Sc,ad,Jd,ed,sc,Sa,ob,$b,Sb,Bc,id,Xb;return{setters:[function(Ub){ta=Ub.aj;nb=Ub.aB;xb=Ub.ao;Ob=Ub.ap;Hb=Ub.aw;qd=Ub.a3;Dc=Ub.C;hd=Ub.au;Hc=Ub.ar;Fc=Ub.bq;Sc=Ub.at;ad=Ub.a7;Jd=Ub.s;ed=Ub.bS;sc=Ub.av;Sa=Ub.as;ob=Ub.r;$b=Ub.a6;Sb=Ub.P;Bc=Ub.bV;id=Ub.bW},function(){},function(){},
function(){},function(){},function(Ub){Xb=Ub.S},function(){}],execute:function(){var Ub=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Ub.Morph=ta;Ub.touchInputDevice=nb;Ub.morph=xb;Ub.Icon=Ob;Ub.easings=Hb;Ub.pt=qd;Ub.Color=Dc;Ub.fun=hd;Ub.connect=Hc;Ub.TreeData=Fc;var ub=function(bb){var pb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),pc=pb.hasOwnProperty("SettingsTree")&&"function"===typeof pb.SettingsTree?pb.SettingsTree:pb.SettingsTree=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sc(pc,bb,[{key:"display",value:function(ab){return ab.panel?[ab.panel,{}]:ab.name}},{key:"collapse",value:function(ab,cb){ab.isCollapsed=cb}},{key:"isCollapsed",value:function(ab){return ab.isCollapsed}},{key:"isLeaf",value:function(ab){return!ab.children}},{key:"getChildren",value:function(ab){return ab.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,
children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]},
{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Ub.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Ub.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Ub.morph({height:20}),
{}],children:[{panel:Ub.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Ub.morph({height:20}),{}],children:[{panel:Ub.morph({})}]}]})}}],pb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-59"}}},{start:284,end:2453})}(Ub.TreeData);Ub.SettingsTree=ub;Ub.SettingsTree=ub;Ub.SettingsTree=ub;ub=function(bb){var pb=
lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),pc=pb.hasOwnProperty("StylingSideBar")&&"function"===typeof pb.StylingSideBar?pb.StylingSideBar:pb.StylingSideBar=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sc(pc,bb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(ab){ab.nodes.forEach(function(cb){return ab.treeData.root==
cb?ab.uncollapse(cb):ab.collapse(cb)})})}},{key:"onWorldResize",value:function(ab){ab=void 0===ab?!0:ab;if(this.respondsToVisibleWindow){var cb=$world.visibleBounds(),Pa=navigator.standalone&&Ub.touchInputDevice?25:0,Za=this.getSubmorphNamed("horizontal resizer");this.height=cb.height-Pa;this.top=Pa+cb.top();Za.height=this.height;Za.left=0;Za.top=0;ab&&(this.visible?this.topRight=cb.topRight():this.topLeft=cb.topRight())}}},{key:"toggle",value:function(ab){var cb=this,Pa,Za;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){switch(eb.nextAddress){case 1:Pa=
$world.visibleBounds();Za=navigator.standalone&&Ub.touchInputDevice?25:0;cb.height=Pa.height-Za;cb.top=Za+Pa.top();if(ab)return $world.addMorph(cb,$world.get("lively top bar")),cb.topLeft=Pa.topRight(),cb.visible=!0,eb.yield(cb.whenRendered(),5);cb.detachFromWorld($world);return eb.yield(cb.animate({opacity:0,topLeft:Pa.topRight(),duration:300}),4);case 4:cb.visible=!1;cb.remove();eb.jumpTo(0);break;case 5:return cb.onWorldResize(!1),eb.yield(cb.animate({opacity:1,easing:Ub.easings.outCirc,topRight:Pa.topRight(),
duration:300}),6);case 6:cb.attachToWorld($world),eb.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var ab=this.withAllSubmorphsSelect(function(eb){return eb.anchors&&eb.anchors.filter(function(Na){return!Na.id}).length}),cb={},Pa=$jscomp.makeIterator(ab),Za=Pa.next();!Za.done;cb={$jscomp$loop$prop$m$2421:cb.$jscomp$loop$prop$m$2421},Za=Pa.next())cb.$jscomp$loop$prop$m$2421=Za.value,cb.$jscomp$loop$prop$m$2421.anchors.forEach(function(eb){return function(Na){return!Na.id&&eb.$jscomp$loop$prop$m$2421.removeAnchor(Na)}}(cb));
return ab.length}},{key:"attachToWorld",value:function(ab){Ub.connect(ab,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(ab){var cb=this;ab.attributeConnections.forEach(function(Pa){Pa.targetObj===cb&&Pa.disconnect()})}},{key:"focusMorph",value:function(ab){ab.isMorph&&ab.ownerChain().includes(this)||((ab.isLabel||ab.isText||ab.isButton)&&this.richTextControl.focusOn(ab,!1),Object.values(this.controls).forEach(function(cb){return cb&&cb.focusOn(ab)}))}},
{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(ab){return ab&&ab.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],pb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"StylingSideBar",version:"0.1.1-59"}}},{start:2470,end:5364})}(Ub.Morph);ub=Ub.StylingSideBar;Ub.default=ub;var hc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");hc.Morph=ta;hc.obj=ad;hc.string=Jd;hc.connect=Hc;hc.noUpdate=ed;hc.once=sc;ub=function(bb){var pb=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),pc=pb.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof pb.ShapeFormatStyler?pb.ShapeFormatStyler:pb.ShapeFormatStyler=function(ab){ab&&
ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sc(pc,bb,[{key:Symbol.for("lively-instance-initialize"),value:function(ab){Sc._get(Object.getPrototypeOf(pc.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ab);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var ab=this.ui,cb={},Pa=$jscomp.makeIterator(Object.entries(this.uiSpec)),Za=Pa.next();!Za.done;cb={$jscomp$loop$prop$control$2423:cb.$jscomp$loop$prop$control$2423,
$jscomp$loop$prop$prop$2424:cb.$jscomp$loop$prop$prop$2424},Za=Pa.next()){var eb=$jscomp.makeIterator(Za.value);Za=eb.next().value;eb=$jscomp.makeIterator(eb.next().value);eb.next();var Na=eb.next().value;cb.$jscomp$loop$prop$prop$2424=eb.next().value;cb.$jscomp$loop$prop$control$2423=ab[Za];hc.connect(cb.$jscomp$loop$prop$control$2423,Na,this,"updateTarget",{updater:function(Da){return function(mb,Zb){Da.$jscomp$loop$prop$control$2423._updating=!0;mb(Da.$jscomp$loop$prop$prop$2424,Zb);Da.$jscomp$loop$prop$control$2423._updating=
!1}}(cb),varMapping:{prop:cb.$jscomp$loop$prop$prop$2424,control:cb.$jscomp$loop$prop$control$2423}})}}},{key:"update",value:function(){var ab=this,cb=this.target,Pa=cb.clipMode,Za=cb.fill,eb=cb.dropShadow,Na=cb.opacity,Da=cb.height,mb=cb.width;cb=this.ui;var Zb=cb.clipModeSelector,dc=cb.fillPicker,Mb=cb.opacityField,Yb=cb.shadowPicker,I=cb.heightField,W=cb.widthField;hc.noUpdate(function(){ab.updateControl(Yb,"shadowValue",eb);ab.updateControl(Zb,"selection",Pa);ab.updateControl(dc,"colorValue",
Za);ab.updateControl(Mb,"number",Na);ab.updateControl(I,"number",Da);ab.updateControl(W,"number",mb)})}},{key:"updateTarget",value:function(ab,cb){this.target[ab]=cb;this.update()}},{key:"updateControl",value:function(ab,cb,Pa){ab._updating||hc.obj.equals(ab[cb],Pa)||(ab[cb]=Pa)}},{key:"updateMultiValue",value:function(ab,cb,Pa){var Za=this.ui,eb=Za[this.join(ab)],Na=eb.get("multi value indicator"),Da=hc.obj.values(cb).some(function(mb){return!hc.obj.isFunction(mb)&&!hc.obj.equals(mb,cb.valueOf())});
Na.left=0;eb.visible=eb.isLayoutable=!Da;if(Da&&Na.visible!=Da)hc.once(Na,"onMouseDown",eb,Pa,{converter:function(){return cb.valueOf()},varMapping:{value:cb}});Na.visible=Na.isLayoutable=Da;Na.left=Da?200:0;this.updateControl(eb,Pa,cb.valueOf());eb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Na=eb.next();!Na.done;Na=eb.next())Na=Na.value,Da=Za[this.join(ab,Na)],this.updateControl(Da,Pa,cb[Na])}},{key:"lower",value:function(ab){return ab.charAt(0).toLowerCase()+ab.slice(1)}},{key:"join",
value:function(ab,cb){return this.lower(hc.string.camelCaseString(ab+(cb?" "+cb:"")))}},{key:"unwrap",value:function(ab,cb,Pa){var Za={};Za=(Za[this.lower(hc.string.camelCaseString(ab))]=[ab,cb,Pa],Za);for(var eb=$jscomp.makeIterator(["top","left","bottom","right"]),Na=eb.next();!Na.done;Na=eb.next()){Na=Na.value;var Da=ab+" "+Na;Za[this.lower(hc.string.camelCaseString(Da))]=[Da,cb,this.join(Pa,Na)]}return Za}},{key:"focusOn",value:function(ab){var cb=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){if(1==
Za.nextAddress)return!ab||cb.isAncestorOf(ab)||cb.target===ab||hc.obj.isArray(ab)||(cb.target=ab),Pa=cb.visible,cb.visible=!0,Za.yield(cb.whenRendered(),2);if(3!=Za.nextAddress)return cb.update(),Za.yield(cb.whenRendered(),3);cb.getSubmorphsByStyleClassName("NumberWidget").map(function(eb){return eb.relayout()});cb.visible=Pa;Za.jumpToEnd()})}},{key:"onHoverIn",value:function(ab){this.watchForTarget=!1}},{key:"onHoverOut",value:function(ab){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"]})}},ui:{readOnly:!0,get:function(){var ab=this,cb=
this.uiSpec;return this._ui||(this._ui=hc.obj.extract(cb,hc.obj.keys(cb),function(Pa,Za){Pa=$jscomp.makeIterator(Za).next().value;return ab.getSubmorphNamed(Pa)}))}}}}}],pb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-144"}}},{start:176,end:4600})}(hc.Morph);ub=hc.ShapeFormatStyler;hc.default=
ub;var wc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");wc.Morph=ta;wc.ShadowPopover=Xb;wc.connect=Hc;wc.signal=Sa;ub=function(bb){var pb=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),pc=pb.hasOwnProperty("ShadowWidget")&&"function"===typeof pb.ShadowWidget?pb.ShadowWidget:pb.ShadowWidget=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sc(pc,bb,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,
duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(ab){this.openPopover()}},{key:"update",value:function(ab){var cb=this.submorphs[0];cb&&(cb.dropShadow=ab)}},{key:"openPopover",value:function(){var ab=this,cb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){if(1==Pa.nextAddress)return cb=new wc.ShadowPopover({hasFixedPosition:!!ab.ownerChain().find(function(Za){return Za.hasFixedPosition}),
shadowValue:ab.shadowValue}),Pa.yield(cb.fadeIntoWorld(ab.globalBounds().center()),2);wc.connect(cb,"shadowValue",ab,"shadowValue");wc.connect(ab,"shadowValue",ab,"update");wc.signal(ab,"openWidget",cb);Pa.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(ab){this.setProperty("shadowValue",ab);this.update(ab)}}}}}],pb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(wc.Morph);ub=wc.ShadowWidget;wc.default=ub;var bd=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");bd.Morph=ta;bd.obj=ad;bd.string=Jd;bd.connect=Hc;bd.noUpdate=ed;bd.once=sc;ub=function(bb){var pb=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),pc=pb.hasOwnProperty("BorderFormatStyler")&&"function"===typeof pb.BorderFormatStyler?
pb.BorderFormatStyler:pb.BorderFormatStyler=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sc(pc,bb,[{key:"setupUI",value:function(){var ab=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(cb){var Pa=bd.string.camelCaseString(cb.name);Pa=Pa[0].toLowerCase()+Pa.slice(1);ab.ui[Pa]=cb})}},{key:"cleanupAnchors",value:function(){var ab=this.withAllSubmorphsSelect(function(Za){return Za.anchors&&
Za.anchors.filter(function(eb){return!eb.id})}),cb={};ab=$jscomp.makeIterator(ab);for(var Pa=ab.next();!Pa.done;cb={$jscomp$loop$prop$m$2426:cb.$jscomp$loop$prop$m$2426},Pa=ab.next())cb.$jscomp$loop$prop$m$2426=Pa.value,cb.$jscomp$loop$prop$m$2426.anchors.forEach(function(Za){return function(eb){return!eb.id&&Za.$jscomp$loop$prop$m$2426.removeAnchor(eb)}}(cb))}},{key:Symbol.for("lively-instance-initialize"),value:function(ab){Sc._get(Object.getPrototypeOf(pc.prototype),Symbol.for("lively-instance-initialize"),
this).call(this,ab);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var ab=this.ui,cb={},Pa=$jscomp.makeIterator(Object.entries(this.uiSpec)),Za=Pa.next();!Za.done;cb={$jscomp$loop$prop$control$2428:cb.$jscomp$loop$prop$control$2428,$jscomp$loop$prop$prop$2429:cb.$jscomp$loop$prop$prop$2429},Za=Pa.next()){var eb=$jscomp.makeIterator(Za.value);Za=eb.next().value;eb=$jscomp.makeIterator(eb.next().value);eb.next();var Na=eb.next().value;cb.$jscomp$loop$prop$prop$2429=
eb.next().value;cb.$jscomp$loop$prop$control$2428=ab[Za];bd.connect(cb.$jscomp$loop$prop$control$2428,Na,this,"updateTarget",{updater:function(Da){return function(mb,Zb){Da.$jscomp$loop$prop$control$2428._updating=!0;mb(Da.$jscomp$loop$prop$prop$2429,Zb);Da.$jscomp$loop$prop$control$2428._updating=!1}}(cb),varMapping:{prop:cb.$jscomp$loop$prop$prop$2429,control:cb.$jscomp$loop$prop$control$2428}})}}},{key:"update",value:function(){var ab=this,cb=this.target,Pa=cb.borderStyle,Za=cb.borderColor,eb=
cb.borderRadius,Na=cb.borderWidth;bd.noUpdate(function(){ab.updateMultiValue("border style selector",Pa,"selection");ab.updateMultiValue("border color picker",Za,"colorValue");ab.updateMultiValue("border radius field",eb,"number");ab.updateMultiValue("border width field",Na,"number")})}},{key:"updateTarget",value:function(ab,cb){this.target[ab]=cb;this.update()}},{key:"updateControl",value:function(ab,cb,Pa){ab._updating||bd.obj.equals(ab[cb],Pa)||(ab[cb]=Pa)}},{key:"updateMultiValue",value:function(ab,
cb,Pa){var Za=this.ui,eb=Za[this.join(ab)],Na=eb.get("multi value indicator"),Da=bd.obj.values(cb).some(function(mb){return!bd.obj.isFunction(mb)&&!bd.obj.equals(mb,cb.valueOf())});eb.visible=eb.isLayoutable=!Da;if(Da&&Na.visible!=Da)bd.once(Na,"onMouseDown",eb,Pa,{converter:function(){return cb.valueOf()},varMapping:{value:cb}});Na.visible=Na.isLayoutable=Da;this.updateControl(eb,Pa,cb.valueOf());eb=$jscomp.makeIterator(["top","left","bottom","right"]);for(Na=eb.next();!Na.done;Na=eb.next())Na=Na.value,
Da=Za[this.join(ab,Na)],this.updateControl(Da,Pa,cb[Na])}},{key:"lower",value:function(ab){return ab.charAt(0).toLowerCase()+ab.slice(1)}},{key:"join",value:function(ab,cb){return this.lower(bd.string.camelCaseString(ab+(cb?" "+cb:"")))}},{key:"unwrap",value:function(ab,cb,Pa){var Za={};Za=(Za[this.lower(bd.string.camelCaseString(ab))]=[ab,cb,Pa],Za);for(var eb=$jscomp.makeIterator(["top","left","bottom","right"]),Na=eb.next();!Na.done;Na=eb.next()){Na=Na.value;var Da=ab+" "+Na;Za[this.lower(bd.string.camelCaseString(Da))]=
[Da,cb,this.join(Pa,Na)]}return Za}},{key:"attachToWorld",value:function(){bd.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(ab){var cb=this,Pa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Za){if(1==Za.nextAddress)return!ab||cb.isAncestorOf(ab)||cb.target===ab||bd.obj.isArray(ab)||(cb.target=ab),Pa=cb.visible,cb.visible=!0,Za.yield(cb.whenRendered(),2);if(3!=Za.nextAddress)return cb.update(),Za.yield(cb.whenRendered(),3);cb.getSubmorphsByStyleClassName("NumberWidget").map(function(eb){return eb.relayout()});
cb.visible=Pa;Za.jumpToEnd()})}},{key:"onHoverIn",value:function(ab){this.watchForTarget=!1}},{key:"onHoverOut",value:function(ab){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),
{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],pb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(bd.Morph);ub=bd.BorderFormatStyler;bd.default=
ub;var cd=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");cd.Morph=ta;cd.resource=ob;cd.arr=$b;cd.obj=ad;cd.string=Jd;cd.Path=Sb;cd.connect=Hc;cd.getMastersMenu=Bc;cd.resolvedMasters=id;ub=function(bb){var pb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),pc=pb.hasOwnProperty("MasterComponentControl")&&"function"===typeof pb.MasterComponentControl?pb.MasterComponentControl:pb.MasterComponentControl=function(ab){ab&&ab[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Sc(pc,bb,[{key:"focusOn",value:function(ab){this.target=ab;this.update()}},{key:"onMouseUp",value:function(ab){var cb=this,Pa,Za,eb,Na,Da,mb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zb){if(1==Zb.nextAddress){"auto master selection"==ab.targetMorph.name&&(Pa="auto");"hover master selection"==ab.targetMorph.name&&(Pa="hover");"click master selection"==ab.targetMorph.name&&(Pa="click");cb.refreshButtons();
if(!cb.target)return Zb.return();Za=$jscomp.makeIterator(["auto","hover","click"]);for(eb=Za.next();!eb.done;eb=Za.next())Na=eb.value,cb.target.master&&cb.target.master[Na]&&!cb.get(Na+" master checkbox").checked&&cb.adjustMasterComponent(Na,null);if(!Pa)return Zb.jumpTo(0);Da=cb;mb=Da.openMenu;return Zb.yield(cb.getMastersMenu(Pa),3)}mb.call(Da,Zb.yieldResult,ab);Zb.jumpToEnd()})}},{key:"getMastersMenu",value:function(ab){var cb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pa){return 1==
Pa.nextAddress?Pa.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(cd.resolvedMasters)),[cb.world().name]).map(function(Za){var eb,Na,Da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(mb){return 1==mb.nextAddress?(eb=Za,Na=cb,Da=Na.componentsToMenu,mb.yield(cd.resource("styleguide://"+Za+"/").dirList(),2)):mb.return([eb,Da.call(Na,mb.yieldResult,ab)])})})),2):Pa.return(Pa.yieldResult)})}},{key:"componentsToMenu",value:function(ab,cb,Pa,Za){var eb=this;Pa=void 0===Pa?
null:Pa;Za=void 0===Za?1:Za;Pa||(Pa=ab.map(function(Da){return{name:cd.arr.last(Da.name.split("/")),path:Da.name.split("/"),value:Da}}));if(0==Pa.length||100<Za)return[];var Na=this;return cd.arr.flatten(Object.entries(cd.arr.groupBy(Pa,function(Da){return Da.path[Za-1]})).map(function(Da){var mb=$jscomp.makeIterator(Da);Da=mb.next().value;mb=mb.next().value;var Zb=$jscomp.makeIterator(cd.arr.partition(mb,function(dc){return dc.path.length<=Za}));mb=Zb.next().value;Zb=Zb.next().value;Da=[Da,eb.componentsToMenu(null,
cb,Zb,Za+1)];return[].concat($jscomp.arrayFromIterable(mb.map(function(dc){return[dc.name,function(){Na.adjustMasterComponent(cb,dc.value)}]})),$jscomp.arrayFromIterable(Da[1].length?[Da]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(ab){var cb=this,Pa,Za,eb,Na,Da,mb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zb){if(1==Zb.nextAddress)return Pa=cb.world().metadata.commit.name,Za=cd.resource("styleguide://"+Pa+"/"),Zb.yield(Za.dirList(),2);if(3!=Zb.nextAddress)return eb=
Zb.yieldResult,Zb.yield(cd.resource("styleguide://System/").dirList(),3);Na=Zb.yieldResult;Da=cb.componentsToMenu(eb,ab);mb=cb.componentsToMenu(Na,ab);return Zb.return([].concat($jscomp.arrayFromIterable(0<Da.length?[].concat($jscomp.arrayFromIterable(Da),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(mb)))})}},{key:"adjustMasterComponent",value:function(ab,cb){if(this.target.master)this.target.master[ab]=cb;else if(cb){var Pa={};this.target.master=(Pa[ab]=cb,Pa)}ab=this.target.master;cb=ab.hover;
Pa=ab.click;ab.auto||cb||Pa||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(Za){return delete Za._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(ab,cb,Pa,Za){var eb=this;Pa=void 0===Pa?null:Pa;Za=void 0===Za?1:Za;Pa||(Pa=ab.map(function(Da){return{name:cd.arr.last(Da.name.split("/")),path:Da.name.split("/"),value:Da}}));if(0==Pa.length||100<Za)return[];var Na=this;return cd.arr.flatten(Object.entries(cd.arr.groupBy(Pa,
function(Da){return Da.path[Za-1]})).map(function(Da){var mb=$jscomp.makeIterator(Da);Da=mb.next().value;mb=mb.next().value;var Zb=$jscomp.makeIterator(cd.arr.partition(mb,function(dc){return dc.path.length<=Za}));mb=Zb.next().value;Zb=Zb.next().value;Da=[Da,eb.componentsToMenu(null,cb,Zb,Za+1)];return[].concat($jscomp.arrayFromIterable(mb.map(function(dc){return[dc.name,function(){Na.adjustMasterComponent(cb,dc.value)}]})),$jscomp.arrayFromIterable(Da[1].length?[Da]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var ab=
$jscomp.makeIterator(["auto","hover","click"]),cb=ab.next();!cb.done;cb=ab.next()){cb=cb.value;var Pa=this.getSubmorphNamed(cb+" master selection"),Za=this.getSubmorphNamed(cb+" master checkbox");cd.Path(["master",cb]).get(this.target)?Za.checked=!0:Za.checked=!1;Pa.label=cd.string.truncateLeft(cd.Path(["master",cb,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var ab=$jscomp.makeIterator(["auto","hover","click"]),cb=ab.next();!cb.done;cb=
ab.next()){cb=cb.value;var Pa=this.getSubmorphNamed(cb+" master selection"),Za=this.getSubmorphNamed(cb+" master checkbox");Pa=Pa.deactivated=!Za.checked;this.getSubmorphNamed(cb+" master selection").opacity=Pa?.5:1}ab=this.getSubmorphNamed("overridden props list");ab.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!ab.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(ab){return ab.master}).find(Boolean)}},
{key:"clearSelectedProperty",value:function(){var ab=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[ab]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var ab=this.getMasterForTarget();return ab&&ab._overriddenProps?(ab=ab._overriddenProps.get(this.target))?Object.keys(ab):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],pb,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",version:"0.1.1-108"}}},{start:315,end:6096})}(cd.Morph);ub=cd.MasterComponentControl;cd.default=ub}}});
