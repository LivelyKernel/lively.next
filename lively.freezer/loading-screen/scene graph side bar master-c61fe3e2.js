System.register("./__root_module__-be0d56fe.js ./index-2aae95d3.js ./index-6e2ebca5.js ./editor-plugin-d9aace66.js ./editor-plugin-53ceab1d.js ./index-a225ba89.js ./index-57c34f7a.js ./index-0f8df4ee.js".split(" "),function(){var Pa,Lb,Vb,Dc,jc,qd,id,Cd,bd,Wc,Zc,zd,me,te,Je,jd,Zd,gc,$c,Bd,fd,Jd,fe,Zb,Gc,xd,Ic,Ad,Mb,mb,Ac,vc,ec;return{setters:[function(Bc){Pa=Bc.i;Lb=Bc.M;Vb=Bc.t;Dc=Bc.e;jc=Bc.b;qd=Bc.f;id=Bc.c;Cd=Bc.o;bd=Bc.C;Wc=Bc.$;Zc=Bc.a;zd=Bc.m;me=Bc.bF;te=Bc.J;Je=Bc.bC;jd=Bc.bz;Zd=Bc.I;
gc=Bc.af;$c=Bc.R;Bd=Bc.bB;fd=Bc._;Jd=Bc.ax;fe=Bc.Y;Zb=Bc.ac;Gc=Bc.a0;xd=Bc.p;Ic=Bc.Z;Ad=Bc.bG;Mb=Bc.d},function(Bc){mb=Bc.e;Ac=Bc.s;vc=Bc.I},function(){},function(Bc){ec=Bc.I},function(){},function(){},function(){},function(){}],execute:function(){function Bc(Ba){var Ja=Ba.sourceObj,Fb=Ba.targetObj;Ja.isMorph&&Fb.isMorph?(Ja.show(),Fb.show(),Qa.showConnector&&Qa.showConnector(Ja,Fb)):Qa.show(String(Ba))}function Ua(Ba){var Ja=Ba.sourceObj,Fb=Ba.sourceAttrName,wa=Ba.targetObj,Ka=Ba.targetMethodName,
Rb=Ba.getConverter();Ba=Ba.getUpdater();return Qa.printConnectionElements(Ja,Fb,wa,Ka,Rb,Ba)}function hc(Ba,Ja,Fb,wa,Ka,Rb){Ba="/* global connect, source, target */\nconnect(source, '"+Ja+"', target, '"+wa+"'";if(Ka||Rb)Ba+=", {\n";Ka&&(Ba+="  converter: "+Ka);Ka&&Rb&&(Ba+=",");Ka&&(Ba+="\n");Rb&&(Ba+="  updater: "+Rb+"\n");if(Ka||Rb)Ba+="}";return Ba+");"}function Eb(Ba,Ja){var Fb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wa){if(1==wa.nextAddress)return wa.yield(Qa.InteractiveMorphSelector.selectMorph(),
2);Fb=wa.yieldResult;return wa.return(Fb?Qa.interactiveConnectGivenSourceAndTarget(Ba,Ja,Fb):null)})}function qc(Ba,Ja,Fb,wa){var Ka,Rb,eb,Sc,Ob;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){switch(pd.nextAddress){case 1:Ka=Fb&&Fb.world().targetDataBindings(Fb);Rb=Ba.world();if(!Ka||!Ka.length)return Rb.setStatusMessage("connect canceled"),pd.return();if(Ja){pd.jumpTo(2);break}eb=[{isListItem:!0,string:"[Enter custom attribute..]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Qa.arr.flatten(Ba.world().targetDataBindings(Ba)).map(function(Uc){return{isListItem:!0,
string:Uc.signature||Uc.name,value:Uc}})));return pd.yield(Rb.listPrompt(["Select Source Attribute\n",{},"Choose the attribute of the morph that is supposed to invoke the connection. This can be a method, property or a custom signal that is invoked upon the morph.",{paddingTop:"10px",fontSize:14,textAlign:"left",fontWeight:"normal"}],eb,{filterable:!0}),3);case 3:Ja=pd.yieldResult;if("canceled"==Ja.status)return pd.return();Ja=Ja.selected[0];Ja=Ja.custom?"sourceAttribute":Ja.name;case 2:return Sc=
[{isListItem:!0,string:"[Enter custom attribute...]",value:{custom:!0}}].concat($jscomp.arrayFromIterable(Qa.arr.flatten(Ka).map(function(Uc){return{isListItem:!0,value:Uc,string:Uc.signature||Uc.name}}))),pd.yield(Rb.listPrompt(["Select Target Attribute\n",{},"Choose the attribute of the morph that is supposed to invoked once the connection is triggered. This can be either a method or a property of the morph. When selecting a property, keep in mind that the value of the source attribute will be assigned to the property or passed to the method as an argument.",
{fontSize:14,textAlign:"left",fontWeight:"normal",paddingTop:"10px"}],Sc,{filterable:!0}),4);case 4:Ob=pd.yieldResult;if("canceled"==Ob.status)return pd.return();Ob=Ob.selected[0];return pd.yield(Qa.interactivelyEvaluateConnection({sourceObj:Ba,sourceAttr:Ja,targetObj:Fb,targetAttr:Ob.custom?"targetAttribute":Ob.name,onConnect:wa,prompt:"Edit and confirm connection:"}),0)}})}function Cc(Ba,Ja,Fb,wa){Ja=void 0===Ja?"confirm connection":Ja;var Ka,Rb,eb,Sc,Ob,pd,Uc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kc){Ka=
Ba;Rb=Ka.sourceObj;eb=Ka.sourceAttrName;Sc=Ka.targetObj;Ob=Ka.targetMethodName;pd=Ba.getConverter();Uc=Ba.getUpdater();return Kc.return(Qa.interactivelyEvaluateConnection({sourceObj:Rb,sourceAttr:eb,targetObj:Sc,targetAttr:Ob,converter:pd,updater:Uc,prompt:Ja,highlight:Fb,onConnect:wa}))})}function Yc(Ba,Ja,Fb,wa,Ka){wa=void 0===wa?{}:wa;Ka=Qa.rect(0).sides.concat(Qa.rect(0).corners);Fb=Fb||new Qa.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:Qa.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:Qa.Color.transparent,
nativeCursor:"auto"},end:{fill:Qa.Color.orange}}},wa,{hasFixedPosition:!0}));Fb.startPoint.attachTo(Ba,"rightCenter");Ja.isMorph?(wa=Ja.globalBounds().partNameNearest(Ka,Ba.globalPosition),Ba.globalPosition.equals(Ja.globalBounds().partNamed(wa))&&Ja.globalBounds().partNameNearest(Qa.arr.without(Ka,wa),Ba.globalPosition),Fb.endPoint.attachTo(Ja,"leftCenter")):(Ka=Ba.globalBounds().topRight().addPt(Qa.pt(100,0)),Ja=Qa.morph({type:"label",value:Ja.toString(),styleClasses:["Tooltip"],padding:Qa.rect(8,
4)}).openInWorld(Ka),Ja.position=Ba.world().bounds().translateForInclusion(Ja.bounds()).topLeft(),Qa.once(Fb,"remove",Ja,"remove"),Fb.endPoint.attachTo(Ja,"leftCenter"));return Fb}function rd(Ba){var Ja,Fb,wa,Ka,Rb,eb,Sc,Ob,pd,Uc,Kc,Hb,$d,Tb,Gb,La,da,Ha,bb,Qb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(uc){switch(uc.nextAddress){case 1:Ja=Ba;Fb=Ja.sourceObj;wa=Ja.sourceAttr;Ka=Ja.targetObj;Rb=Ja.targetAttr;eb=Ja.converter;Sc=Ja.updater;Ob=Ja.prompt;pd=void 0===Ja.highlight?!0:Ja.highlight;
Uc=Ja.onConnect;Kc="lively://lively.bindings-interactive-connect/x"+Fb.id;Hb={context:window,format:"esm",targetModule:Kc,classTransform:Qa.classToFunctionTransform};$d=Qa.printConnectionElements(Fb,wa,Ka,Rb,eb,Sc);Ka.isMorph&&Fb.isMorph&&(Tb=Ka.propertiesAndPropertySettings().properties[Rb]||{type:typeof Ka[Rb]},Gb=Tb.type,La=Fb.propertiesAndPropertySettings().properties[wa]||{type:typeof Fb[wa]},da=La.type,da!==Gb&&(Ob=["Edit and confirm connection:\n",{},"Source: ",{fontSize:14,fontWeight:"normal"},
Fb.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"},"\nTarget: ",{fontSize:14,fontWeight:"normal"},Ka.toString(),{fontSize:14,fontWeight:"normal",fontStyle:"italic"}]));Ha={};Object.assign(lively.modules.module(Kc).recorder,(Ha.source=Fb,Ha.target=Ka,Ha.connect=Qa.connect,Ha.once=Qa.once,Ha[wa]=Fb[wa],Ha));if(!Ob){bb=$d;uc.jumpTo(2);break}return uc.yield($world.editPrompt(Ob,{input:$d,historyId:"lively.bindings-interactive-morph-connect",mode:"js",requester:$world,evalEnvironment:Hb,
animated:!1}),3);case 3:if(bb=uc.yieldResult,!bb)return $world.setStatusMessage("connect canceled"),uc.return();case 2:return uc.yield(lively.vm.runEval(bb,Hb),4);case 4:Qb=uc.yieldResult;if(Qb.isError)return $world.logError(Qb.value),uc.return(rd({sourceObj:Fb,sourceAttr:wa,targetObj:Ka,targetAttr:Rb,converter:eb,updater:Sc,prompt:"confirm connection",highlight:pd,onConnect:Uc}));pd&&($world.setStatusMessage("connected!",Qa.Color.green),Qa.interactivelyShowConnection(Qb.value));"function"===typeof Uc&&
Uc(Qb);uc.jumpToEnd()}})}var fc=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js");fc.Inspector=ec;var xc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("ProtoInspector/index.js"),Fb=Ja.hasOwnProperty("ProtoInspector")&&"function"===typeof Ja.ProtoInspector?Ja.ProtoInspector:Ja.ProtoInspector=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,void 0,[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ProtoInspector"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoInspector",version:"0.1.1-0"}}},{start:68,end:210})}(fc.Inspector);xc=fc.ProtoInspector;fc.default=xc;var bc=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js");
bc.Morph=Lb;bc.touchInputDevice=Vb;bc.easings=Dc;bc.pt=jc;bc.fun=qd;bc.connect=id;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("MorphicSideBar/index.js"),Fb=Ja.hasOwnProperty("MorphicSideBar")&&"function"===typeof Ja.MorphicSideBar?Ja.MorphicSideBar:Ja.MorphicSideBar=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"onWorldResize",
value:function(wa){wa=void 0===wa?!0:wa;if(this.respondsToVisibleWindow){var Ka=$world.visibleBounds(),Rb=navigator.standalone&&bc.touchInputDevice?25:0;this.height=Ka.height-Rb;this.top=Rb+Ka.top();Rb=this.get("horizontal resizer");Rb.height=this.height;Rb.top=0;wa&&(this.visible?this.topLeft=Ka.topLeft():this.topRight=Ka.topLeft())}}},{key:"switchMode",value:function(wa){"inspector"==wa&&this.showInspector();"connections"==wa&&this.showConnections()}},{key:"showInspector",value:function(){this.get("inspector").visible=
!0;this.get("connections tree").visible=!1}},{key:"showConnections",value:function(){this.get("inspector").visible=!1;this.get("connections tree").visible=!0}},{key:"toggle",value:function(wa){var Ka=this,Rb,eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){switch(Sc.nextAddress){case 1:Rb=$world.visibleBounds();eb=navigator.standalone&&bc.touchInputDevice?25:0;Ka.height=Rb.height-eb;Ka.top=eb+Rb.top();if(wa)return $world.addMorph(Ka,$world.get("lively top bar")),Ka.topRight=Rb.topLeft(),
Ka.attachToWorld($world),Ka.visible=!0,Sc.yield(Ka.whenRendered(),5);Ka.detachFromWorld($world);return Sc.yield(Ka.animate({opacity:0,topRight:Rb.topLeft(),duration:300}),4);case 4:Ka.visible=!1;Ka.remove();Sc.jumpTo(0);break;case 5:return Ka.onWorldResize(!1),Ka.get("scene graph").adjustProportions(),Sc.yield(Ka.animate({opacity:1,easing:bc.easings.outCirc,topLeft:Rb.topLeft(),duration:300}),6);case 6:Ka.get("scene graph").refresh(),Sc.jumpToEnd()}})}},{key:"attachToWorld",value:function(wa){bc.connect(wa,
"onChange",this,"onHierarchyChange",{garbageCollect:!0});bc.connect(wa,"onSubmorphChange",this,"onHierarchyChange",{garbageCollect:!0});bc.connect(wa,"showHaloFor",this,"selectNode",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(wa){var Ka=this;wa.attributeConnections.forEach(function(Rb){Rb.targetObj===Ka&&Rb.disconnect()})}},{key:"selectNode",value:function(wa){this.getSubmorphNamed("scene graph").selectMorphInTarget(wa);this.getSubmorphNamed("connections tree").inspectConnectionsOf(wa)}},
{key:"onHierarchyChange",value:function(wa){var Ka=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if("addMorphAt"===wa.selector||"removeMorph"===wa.selector||"name"===wa.prop){Rb=Ka._sceneGraph||(Ka._sceneGraph=Ka.getSubmorphNamed("scene graph"));if(!Rb||!Rb.owner.visible||wa.target&&wa.target.isHand||wa.target&&Rb.ignoreMorph(wa.target)||wa.args&&!wa.args[0].isHalo&&Rb.ignoreMorph(wa.args[0])||wa.target.ownerChain().find(function(Sc){return Rb.ignoreMorph(Sc)}))return eb.return();
bc.fun.debounceNamed("scene-graph-update",50,function(){return Rb.refresh()})()}eb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicSideBar"}},{key:"properties",get:function(){return{isHaloItem:{get:function(){return!1}}}}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MorphicSideBar",version:"0.1.1-76"}}},
{start:226,end:3668})}(bc.Morph);fc=bc.MorphicSideBar;bc.default=fc;var Qa=lively.FreezerRuntime.recorderFor("lively.ide/fabrik.js");Qa.interactivelyShowConnection=Bc;Qa.printConnection=Ua;Qa.printConnectionElements=hc;Qa.interactiveConnectGivenSource=Eb;Qa.interactiveConnectGivenSourceAndTarget=qc;Qa.interactivelyReEvaluateConnection=Cc;Qa.visualizeConnection=Yc;Qa.interactivelyEvaluateConnection=rd;Qa.connect=id;Qa.once=Cd;Qa.Color=bd;Qa.rect=Wc;Qa.pt=jc;Qa.arr=Zc;Qa.morph=zd;Qa.Leash=me;Qa.showConnector=
mb;Qa.show=Ac;Qa.InteractiveMorphSelector=vc;Qa.classToFunctionTransform=te;Qa.interactivelyShowConnection=Bc;Qa.interactivelyShowConnection=Bc;Qa.printConnection=Ua;Qa.printConnection=Ua;Qa.printConnectionElements=hc;Qa.printConnectionElements=hc;Qa.interactiveConnectGivenSource=Eb;Qa.interactiveConnectGivenSource=Eb;Qa.interactiveConnectGivenSourceAndTarget=qc;Qa.interactiveConnectGivenSourceAndTarget=qc;Qa.interactivelyReEvaluateConnection=Cc;Qa.interactivelyReEvaluateConnection=Cc;Qa.visualizeConnection=
Yc;Qa.visualizeConnection=Yc;Qa.interactivelyEvaluateConnection=rd;Qa.interactivelyEvaluateConnection=rd;var Da=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js");Da.Tree=Je;Da.TreeData=jd;Da.morph=zd;Da.Icon=Zd;Da.HorizontalLayout=gc;Da.easings=Dc;Da.Morph=Lb;Da.Color=bd;Da.Rectangle=$c;Da.rect=Wc;Da.pt=jc;Da.connect=id;Da.noUpdate=Bd;Da.disconnect=fd;Da.disconnectAll=Jd;Da.once=Cd;Da.arr=Zc;Da.obj=fe;Da.num=Zb;Da.fun=qd;Da.tree=Gc;Da.promise=xd;Da.ConnectionHalo=_missingExportShim;Da.getClassName=
Ic;Da.TextLayout=Ad;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("InteractiveTreeContainer")&&"function"===typeof Ja.InteractiveTreeContainer?Ja.InteractiveTreeContainer:Ja.InteractiveTreeContainer=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"onChildRemoved",value:function(wa){}},{key:"onChildAdded",value:function(wa){}},{key:"toggleSelected",
value:function(wa){if(this.tree){var Ka=this.tree,Rb=Ka.selectionFontColor,eb=Ka.nonSelectionFontColor;this.submorphs.filter(function(Sc){return!Sc._isControlElement&&Sc.styleClasses.includes("Label")}).forEach(function(Sc){Sc.fontColor=wa?Rb:eb})}}},{key:"onGrab",value:function(wa){var Ka=this.tree,Rb=this.node;this.fill=Da.Color.gray.withA(.5);this.fontColor=Ka.selectionFontColor;this.opacity=.8;Pa._get(Object.getPrototypeOf(Fb.prototype),"onGrab",this).call(this,wa);Rb&&(this.toggleSelected(!1),
Ka.collapse(Rb),Ka.treeData.parentNode(Rb).container.onChildRemoved(this),this._data=Ka.treeData.remove(Rb),Rb.container.target.remove(),Ka.update(!0))}},{key:"wantsToBeDroppedOn",value:function(wa){this.showPreviewOn(wa);return!0}},{key:"showPreviewOn",value:function(wa){if(wa.isContainer)var Ka=wa.tree;wa.isTree&&(Ka=wa);Ka&&Ka.showDropPreviewFor&&Ka.showDropPreviewFor(this)}},{key:"insertAsChild",value:function(wa){var Ka=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==
Rb.nextAddress)return Ka.tree.treeData.add(wa._data,Ka.node,Ka.node.children[0]),Ka.tree.uncollapse(Ka.node),Ka.tree.treeData.remove(Ka.tree._previewNode),Rb.yield(Ka.tree.whenRendered(),2);Ka.tree.update(!0);Ka.onChildAdded(wa);Rb.jumpToEnd()})}},{key:"onBeingDroppedOn",value:function(wa,Ka){var Rb=this;this.tree._dropInProgress=!0;Pa._get(Object.getPrototypeOf(Fb.prototype),"onBeingDroppedOn",this).call(this,wa,Ka);wa=function(){Rb.fill=Da.Color.gray.withA(.5);Rb.opacity=1;Rb.tree._dropInProgress=
!1;Rb.tree.refresh()};Ka.isTree?Ka.insertAtPlaceholder(this).then(wa):Ka.isContainer?Ka.insertAsChild(this).then(wa):wa()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeContainer"}},{key:"properties",get:function(){return{fill:{defaultValue:Da.Color.transparent},isContainer:{get:function(){return!0}},tree:{},node:{readOnly:!0,get:function(){var wa=this,Ka=this.tree.treeData;return Ka&&Ka.asList().find(function(Rb){return Rb.container===wa})}}}}}],Ja,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:559,end:3022})}(Da.Morph);Da.InteractiveTreeContainer=fc;Da.InteractiveTreeContainer=fc;Da.InteractiveTreeContainer=fc;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("InteractiveTreeData")&&"function"===typeof Ja.InteractiveTreeData?
Ja.InteractiveTreeData:Ja.InteractiveTreeData=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"display",value:function(wa){wa.container||(wa.container=wa.getContainer());return[wa.container||"<NO CONTAINER>",{}]}},{key:"isCollapsed",value:function(wa){return wa.isCollapsed}},{key:"collapse",value:function(wa,Ka){wa.isCollapsed=Ka}},{key:"getChildren",value:function(wa){return wa.isLeaf?null:this.filterActive?
wa.children.filter(function(Ka){return Ka&&Ka.visible}):wa.children}},{key:"isLeaf",value:function(wa){return 0==(this.getChildren(wa)||[]).length}},{key:"add",value:function(wa,Ka,Rb){Ka=void 0===Ka?this.root:Ka;Ka.children||(Ka.children=[]);Rb?Da.arr.pushAt(Ka.children,wa,Ka.children.indexOf(Rb)):Ka.children.push(wa);Ka.isLeaf=!1}},{key:"replace",value:function(wa,Ka){var Rb=this.parentNode(wa);wa=Rb.children.indexOf(wa);Rb.children[wa]=Ka}},{key:"next",value:function(wa){var Ka=this.parentNode(wa);
return Ka&&Ka.children[Ka.children.indexOf(wa)+1]}},{key:"isBefore",value:function(wa,Ka){this.next(wa)===Ka}},{key:"isAfter",value:function(wa,Ka){this.next(Ka)===wa}},{key:"addBefore",value:function(wa,Ka){this.add(wa,this.parentNode(Ka),Ka)}},{key:"addAfter",value:function(wa,Ka){var Rb=this.parentNode(Ka);Ka=Rb.children.indexOf(Ka)+1;this.add(wa,Rb,Rb.children[Ka])}},{key:"remove",value:function(wa){var Ka=this.parentNode(wa);if(Ka)return Da.arr.remove(Ka.children,wa),Ka.children==[]&&(Ka.children=
null),wa}},{key:"filter",value:function(wa,Ka){Ka=void 0===Ka?1:Ka;var Rb=this,eb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sc){if(1==Sc.nextAddress)return Sc.yield(Rb.uncollapseAll(function(Ob,pd){return pd<Ka+1}),2);eb=Rb.filterActive;Rb.filterActive=!1;Rb.asListWithIndexAndDepth(!1).reverse().forEach(function(Ob){var pd=Ob.node;if(0==Ob.depth)return pd.visible=!0;pd.visible=wa(pd);!pd.isCollapsed&&pd.children.find(function(Uc){return Uc.visible})?(pd.visible=!0,pd.container.opacity=
.5):pd.container.opacity=1;return pd.visible});Rb.filterActive=eb;Sc.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTreeData"}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:3031,end:5513})}(Da.TreeData);Da.InteractiveTreeData=fc;Da.InteractiveTreeData=
fc;Da.InteractiveTreeData=fc;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("InteractiveTree")&&"function"===typeof Ja.InteractiveTree?Ja.InteractiveTree:Ja.InteractiveTree=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"update",value:function(wa){var Ka=this;Pa._get(Object.getPrototypeOf(Fb.prototype),"update",this).call(this,wa);this.treeData&&
this.relayoutContainers();wa&&this.embeddedMorphs.forEach(function(Rb){Rb.isContainer&&(Da.obj.equals(Rb.fill,Da.Color.transparent)||(Rb.fill=Da.Color.transparent),Rb.fontFamily!=Ka.fontFamily&&(Rb.fontFamily=Ka.fontFamily),Rb.fontSize!=Ka.fontSize&&(Rb.fontSize=Ka.fontSize))})}},{key:"onDrop",value:function(wa){Pa._get(Object.getPrototypeOf(Fb.prototype),"onDrop",this).call(this,wa);this.treeData.remove(this._previewNode);this.update(!0)}},{key:"onDropHoverIn",value:function(wa){}},{key:"onDropHoverUpdate",
value:function(wa){}},{key:"onDropHoverOut",value:function(wa){}},{key:"onHoverOut",value:function(wa){var Ka=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){Pa._get(Object.getPrototypeOf(Fb.prototype),"onHoverOut",Ka).call(Ka,wa);Ka._previewNode&&Ka._previewNode.container.world()&&Ka.treeData.remove(Ka._previewNode);Ka.resetContainerSelection();Ka.update(!0);Rb.jumpToEnd()})}},{key:"insertAtPlaceholder",value:function(wa){var Ka=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==
eb.nextAddress)return Rb=Ka.treeData.parentNode(Ka._previewNode),Ka.treeData.replace(Ka._previewNode,wa._data),Ka.treeData.remove(Ka._previewNode),eb.yield(Ka.whenRendered(),2);Ka.update(!0);Rb.container.onChildAdded(wa);eb.jumpToEnd()})}},{key:"scrollUpSlowly",value:function(){var wa=this;if(!this._scrollingUp){this._scrollingUp=!0;var Ka=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==Rb.nextAddress)return wa._scrollingUp&&0<wa.scroll.y?Rb.yield(wa.animate({scroll:wa.scroll.subXY(0,
30),duration:300,easing:Da.easings.linear}),3):(wa._scrollingUp=!1,Rb.jumpTo(0));Ka();Rb.jumpToEnd()})};Ka()}}},{key:"scrollDownSlowly",value:function(){var wa=this;if(!this._scrollingDown){this._scrollingDown=!0;var Ka=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rb){if(1==Rb.nextAddress)return wa._scrollingDown&&wa.scroll.y<wa.scrollExtent.y-wa.height?Rb.yield(wa.animate({scroll:wa.scroll.addXY(0,30),duration:300,easing:Da.easings.linear}),3):(wa._scrollingDown=!1,Rb.jumpTo(0));
Ka();Rb.jumpToEnd()})};Ka()}}},{key:"stopScrollingSlowly",value:function(){this._scrollingUp=this._scrollingDown=!1}},{key:"resetContainerSelection",value:function(){this.embeddedMorphs.forEach(function(wa){wa.isContainer&&(wa.fill=Da.Color.transparent)})}},{key:"showDropPreviewFor",value:function(wa){var Ka=this;wa=this.localize(wa.globalBounds().center());var Rb=this.textPositionFromPoint(wa),eb=this.treeData.asListWithIndexAndDepth(function(Hb){Hb=Hb.node;return Hb!=Ka._previewNode&&Hb.container&&
Hb.container.world()}),Sc=(eb.find(function(Hb){return Hb.i-1===Rb.row})||{}).node,Ob=Sc&&Sc.container,pd=this.ensurePlaceholder(),Uc=!!pd.container.world(),Kc=wa.subPt(this.scroll).subPt(this.scrollbarOffset);10>Kc.y?this.scrollUpSlowly():Kc.y>this.height-50?this.scrollDownSlowly():this.stopScrollingSlowly();this.resetContainerSelection();if(!Ob){if(eb.length>Rb.row||Da.arr.last(this.treeData.root.children)===pd)return;this.treeData.remove(pd);this.treeData.add(pd);this.update(!0)}if(Ob){eb=this.textLayout.boundsFor(this,
Rb);if(4>Math.abs(eb.top()-wa.y)){if(this.treeData.isBefore(pd,Sc))return;this.treeData.remove(pd);this.treeData.addBefore(pd,Sc)}else if(4>Math.abs(eb.bottom()-wa.y)&&(Sc.isCollapsed||this.treeData.isLeaf(Sc))){if(this.treeData.isAfter(pd,Sc))return;this.treeData.remove(pd);this.treeData.addAfter(pd,Sc)}else{Ob.fill=Da.Color.gray;if(!Uc)return;this.treeData.remove(pd)}this.update(!0)}}},{key:"ensurePlaceholder",value:function(){var wa=Da.pt(this.width-100,this.document.getLine(0).height);this._previewNode||
(this._previewNode={container:Da.morph({acceptsDrops:!1,reactsToPointer:!1,fill:Da.Color.gray,borderRadius:5}),isCollapsed:!0,isLeaf:!0});this._previewNode.container.extent=wa;return this._previewNode}},{key:"relayoutContainers",value:function(){for(var wa=this.selectedIndex,Ka=$jscomp.makeIterator(this.treeData.asListWithIndexAndDepth()),Rb=Ka.next();!Rb.done;Rb=Ka.next()){var eb=Rb.value;Rb=eb.node;eb=eb.i;if(Rb.container&&this.isLineVisible(eb)){Rb.container.nativeCursor="grab";var Sc=this.width-
25-Rb.container.left;Rb.container.width!=Sc&&(Rb.container.width=Sc);Rb.container.toggleSelected&&Rb.container.toggleSelected(eb==wa);Rb.container.isContainer&&Rb.container.getLabel().fitIfNeeded()}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveTree"}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",
version:"0.1.1-1107"}}},{start:5522,end:11115})}(Da.Tree);Da.InteractiveTree=fc;Da.InteractiveTree=fc;Da.InteractiveTree=fc;(function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("SceneGraphTreeLayout")&&"function"===typeof Ja.SceneGraphTreeLayout?Ja.SceneGraphTreeLayout:Ja.SceneGraphTreeLayout=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"estimateExtentOfLine",
value:function(wa,Ka,Rb){Rb=void 0===Rb?wa.getGlobalTransform():Rb;(Rb=Ka.textAndAttributes.find(function(eb){return eb.isMorph}))&&Ka.changeExtent(wa.width,Rb.height)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTreeLayout"}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},
{start:11117,end:11389})})(Da.TextLayout);fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("SceneGraphTree")&&"function"===typeof Ja.SceneGraphTree?Ja.SceneGraphTree:Ja.SceneGraphTree=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"beforePublish",value:function(){this.submorphs=[];this.reset()}},{key:"selectMorphInTarget",value:function(wa){var Ka=
this.treeData.asList().find(function(Rb){return Rb.container&&Rb.container.target===wa});Ka&&this.selectedNode!=Ka&&this.selectPath(this.treeData.pathOf(Ka))}},{key:"onLoad",value:function(){var wa=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return wa.textLayout=new Da.SceneGraphTreeLayout(wa),Ka.yield(wa.whenRendered(),2);if(3!=Ka.nextAddress){if(wa.ownerChain().find(function(Rb){return Rb.isComponent}))return Ka.return();wa.submorphs=[];return Ka.yield(wa.whenRendered(),
3)}wa.get("inspector").makeEditorVisible(!0);wa.get("inspector").makeEditorVisible(!1);wa.setTarget($world);Ka.jumpToEnd()})}},{key:"adjustProportions",value:function(wa){wa=(wa?wa.state.dragDelta:{y:0}).y;var Ka=this.get("inspector"),Rb=this.get("scene graph resizer"),eb=this.get("mode selector"),Sc=this.get("connections tree");this.height+=wa;Ka.height-=wa;Sc.height-=wa;Rb.top=this.bottom;Rb.left=0;eb.top=Rb.bottom;Sc.top=Ka.top=eb.bottom+5}},{key:"reset",value:function(){var wa=this;this.treeData=
new Da.InteractiveTreeData({children:[],container:Da.morph()});this.get("inspector").targetObject={};this.selectedNode=null;this.anchors.filter(function(Ka){return null==Ka.id}).forEach(function(Ka){return wa.removeAnchor(Ka)})}},{key:"setTarget",value:function(wa){this.target=wa;this.treeData=this.getTreeFromSubmorphHierarchy(wa);this.uncollapse(this.treeData.root)}},{key:"isNodeOutOfSync",value:function(wa){var Ka=this;if(wa===this._previewNode)return!1;if(wa.container.nameNeedsUpdate)return!0;
var Rb=wa.container.target.submorphs.filter(function(eb){return!Ka.ignoreMorph(eb)});return Rb.length!=wa.children.length||Rb.map(function(eb){return eb.name}).join("")!=wa.children.map(function(eb){return eb.target?eb.target.name:""}).join("")?!0:!1}},{key:"getNewChildren",value:function(wa){var Ka=this,Rb=wa.container.target.submorphs.map(function(Uc){return Uc.__scene_graph_target__?Uc.__scene_graph_target__():Uc}).filter(function(Uc){return!Ka.ignoreMorph(Uc)}),eb=[],Sc={},Ob;for(Ob in Rb){Sc.$jscomp$loop$prop$m$2981=
Rb[Ob];var pd=Da.arr.without(wa.children,this._previewNode).find(function(Uc){return function(Kc){return Kc.container&&Kc.container.target.id==Uc.$jscomp$loop$prop$m$2981.id}}(Sc));eb[Ob]=pd?pd:this.readMorphHierarchy(Sc.$jscomp$loop$prop$m$2981);Sc={$jscomp$loop$prop$m$2981:Sc.$jscomp$loop$prop$m$2981}}return eb}},{key:"refresh",value:function(){var wa=this;if(!this._updating&&!this._dropInProgress){var Ka=!1;Da.tree.prewalk(this.treeData.root,function(Rb){Rb.container&&wa.isNodeOutOfSync(Rb)&&(console.log("change node",
Rb),Ka=!0,Rb.name=Rb.container.target.name,Rb.container.refresh(),Rb.children=wa.getNewChildren(Rb))},function(Rb){return Rb.children});this.update(Ka)}}},{key:"ignoreMorph",value:function(wa){return wa.isMorph?wa.isContainer||wa.isWindow||wa.getWindow()||wa.isEpiMorph||wa.isHand||["lively.halos"].includes(wa.constructor[Symbol.for("lively-module-meta")].package.name)||["MorphicSideBar","SideBarToggler","UserFlap","Menu","CommentIndicator"].includes(wa.constructor.name):!1}},{key:"onDropHoverOut",
value:function(wa){var Ka=wa.hand.grabbedMorphs[0];wa=wa.hand.findDropTarget();if(!(wa===this||wa&&wa.ownerChain().includes(this))&&Ka&&Ka.isContainer)Ka.onDragOutside()}},{key:"onDropHoverIn",value:function(wa){var Ka=wa.hand.grabbedMorphs[0];Ka&&!Ka.isContainer&&($world.halos().forEach(function(Rb){return Rb.remove()}),Ka.remove(),Object.assign(Ka,wa.hand._grabbedMorphProperties.get(Ka).pointerAndShadow),Ka=this.renderContainerFor(Ka,!1),wa.hand.grab(Ka),Ka.leftCenter=Da.pt(-20,0))}},{key:"getTreeFromSubmorphHierarchy",
value:function(wa){return new Da.InteractiveTreeData(this.readMorphHierarchy(wa))}},{key:"readMorphHierarchy",value:function(wa){var Ka=this;return Da.tree.mapTree(wa,function(Rb,eb){return{name:Rb.name,isCollapsed:!0,getContainer:function(){return Ka.renderContainerFor(Rb)},visible:!0,children:eb}},function(Rb){return Rb.submorphs.filter(function(eb){return Rb.isWorld?!Ka.ignoreMorph(eb):!0})})}},{key:"renderContainerFor",value:function(wa,Ka){wa=void 0===wa?Da.morph({name:"root"}):wa;Ka=void 0===
Ka?!0:Ka;var Rb=new Da.MorphContainer({tree:this,fill:Ka?Da.Color.transparent:Da.Color.gray.withA(.5),fontColor:this.nonSelectionFontColor,fontFamily:this.fontFamily,target:wa,opacity:wa.visible?1:.5});Ka||(Rb.layout=new Da.HorizontalLayout({spacing:2,align:"center"}));wa._data?(Rb._data=wa._data,wa._data.container=Rb):Rb._data={name:wa.name,isCollapsed:!0,container:Rb,children:[]};Rb.whenRendered().then(function(){return Rb.refresh()});return Rb}},{key:"collapseAll",value:function(){var wa=this;
this.treeData.asList().forEach(function(Ka){return Ka!=wa.treeData.root?Ka.isCollapsed=!0:Ka.isCollapsed=!1})}},{key:"filterMorphs",value:function(wa){var Ka=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return Rb=wa.tokens[0],Ka.treeData.filterActive||Ka._collapseState||(Ka._collapseState=new WeakMap(Ka.treeData.asList().map(function(Sc){return[Sc,Sc.isCollapsed]}))),Ka.treeData.filterActive=!!Rb,eb.yield(Ka.treeData.filter(function(Sc){var Ob=!!Rb&&
Sc.name.includes(Rb);Sc.container||(Sc.container=Sc.getContainer());Ob?Sc.container.highlightTerm(Rb):Sc.container.highlightTerm();return Ob},3),2);Ka.treeData.filterActive||(Ka.treeData.asList().forEach(function(Sc){Sc.container&&Sc.container.highlightTerm();Sc.visible=!0;Sc.isCollapsed=Ka._collapseState.has(Sc)?Ka._collapseState.get(Sc):!0}),Ka._collapseState=null);Ka.refresh();eb.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SceneGraphTree"}},{key:"properties",
get:function(){return{target:{serialize:!1},textLayout:{initialize:function(){this.textLayout=new Da.SceneGraphTreeLayout(this)}}}}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:11398,end:18901})}(Da.InteractiveTree);Da.SceneGraphTree=fc;Da.SceneGraphTree=fc;Da.SceneGraphTree=
fc;fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("InteractiveTree/index.js"),Fb=Ja.hasOwnProperty("MorphContainer")&&"function"===typeof Ja.MorphContainer?Ja.MorphContainer:Ja.MorphContainer=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"refresh",value:function(){var wa=this,Ka,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){Ka=wa.target;if(!Ka)return eb.return();
wa.reactsToPointer=!0;wa.dropShadow=!1;wa.submorphs=[wa.getLabel(),0<Ka.comments.length&&wa.getCommentControls(),Ka.layout&&wa.getLayoutControls(),wa.getConnectionControls()].filter(Boolean).map(function(Sc,Ob){Sc.fitIfNeeded();Sc.left=Rb?Rb.right+5:0;Sc.top=2;return Rb=Sc});wa.height=20;wa.opacity=Ka.visible?1:.5;eb.jumpToEnd()})}},{key:"applyLayoutIfNeeded",value:function(){}},{key:"getLabel",value:function(){var wa=this.getSubmorphNamed("name label")||Da.morph({type:"label",name:"name label",reactsToPointer:!1,
padding:Da.rect(0,0,0,0),acceptsDrops:!1,fontSize:this.tree.fontSize}),Ka=wa.textString.slice(2,-1);Ka&&Ka==this.target.name||(wa.value=[].concat($jscomp.arrayFromIterable(this.getIcon(this.target)),[" "+this.target.name+" "]));return wa}},{key:"getIcon",value:function(wa){return Da.Icon.textAttribute({Morph:"square",Ellipse:"circle",Text:"font",Label:"tag",Polygon:"draw-polygon",Path:"bezier-curve",Image:"image",Canvas:"chess-board",HTMLMorph:"code"}[Da.getClassName(wa)]||"codepen",{paddingTop:"4px",
fontSize:this.tree.fontSize-2,opacity:.6})}},{key:"getLayoutControls",value:function(){var wa=this.getSubmorphNamed("layout label")||Da.morph({type:"label",name:"layout label",borderRadius:3,acceptsDrops:!1,padding:Da.Rectangle.inset(4,2,4,2),fill:Da.Color.orange,fontColor:Da.Color.white});wa._isControlElement=!0;wa.textString!=this.target.layout.name()&&(wa.value=this.target.layout.name());return wa}},{key:"getCommentControls",value:function(){var wa=this.getSubmorphNamed("comment label")||Da.morph({type:"label",
name:"comment label",tooltip:"Open comment browser to browse all comments",borderRadius:3,acceptsDrops:!1,padding:Da.Rectangle.inset(4,2,4,2),fill:Da.Color.rgb(241,196,15),fontColor:Da.Color.black});wa._isControlElement=!0;var Ka=this.target.comments.length+" comment"+(1==this.target.comments.length?"":"s");wa.textString!=Ka&&(wa.value=Ka);return wa}},{key:"getConnectionControls",value:function(){this.connectionCount=this.target.attributeConnections?this.target.attributeConnections.filter(function(Rb){return!Rb.targetObj.isHalo}).length:
0;var wa=this.getSubmorphNamed("connections label")||Da.morph({acceptsDrops:!1,borderRadius:3,type:"label",name:"connections label",padding:Da.Rectangle.inset(4,2,4,2),nativeCursor:"pointer",fill:Da.Color.red,fontColor:Da.Color.white});wa._isControlElement=!0;wa.visible=!this.connectionHalo&&!!this.connectionCount;var Ka=this.connectionCount?this.connectionCount+" connection"+(1<this.connectionCount?"s":""):"Manage Connections";wa.textString!=Ka&&(wa.value=Ka);return wa}},{key:"highlightTerm",value:function(wa){var Ka=
this.submorphs[0],Rb=Ka.textAndAttributes.slice(0,2),eb=Ka.textString.slice(1).split(wa);1===eb.length?Ka.textAndAttributes=[].concat($jscomp.arrayFromIterable(Rb),[eb[0]]):(Ka.textAndAttributes=[].concat($jscomp.arrayFromIterable(Rb),$jscomp.arrayFromIterable(Da.arr.flatten(Da.arr.interpose(eb.map(function(Sc){return[Sc,{}]}),[wa,{fontWeight:"900"}])))),Ka.whenRendered().then(function(){Ka.fitIfNeeded()}))}},{key:"getClassControls",value:function(){}},{key:"wantsToBeDroppedOn",value:function(wa){var Ka=
Pa._get(Object.getPrototypeOf(Fb.prototype),"wantsToBeDroppedOn",this).call(this,wa);if(![wa].concat($jscomp.arrayFromIterable(wa.ownerChain())).includes(this.tree))this.onDragOutside();return Ka}},{key:"onGrab",value:function(wa){var Ka=this,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return Ka.tree._dropInProgress=!0,Rb=Ka.target.globalPosition,Pa._get(Object.getPrototypeOf(Fb.prototype),"onGrab",Ka).call(Ka,wa),Ka._data.globalTargetPosition=Rb,eb.yield(Ka.whenRendered(),
2);if(Ka.tree.fullContainsWorldPoint(Ka.globalPosition))Ka.leftCenter=Da.pt(-20,0);else Ka.onDragOutside();Ka.tree._dropInProgress=!1;eb.jumpToEnd()})}},{key:"onDragOutside",value:function(){this._draggedOutside||(this._draggedOutside=!0,this.queue||(this.queue=Da.fun.createQueue("container-hover-queue",function(wa,Ka){var Rb,eb,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ob){if(1==Ob.nextAddress)return Rb=wa.target,eb=Rb.opacity,Sc=Rb.scale,wa.target.opacity=0,wa.target.scale=
.5,$world.halos().forEach(function(pd){return pd.remove()}),$world.firstHand.grab(wa.target),wa.target._data=wa._data,wa.remove(),wa.target.position=Da.pt(0,0),Ob.yield(wa.target.animate({opacity:eb,scale:Sc,duration:200}),2);Ka();Ob.jumpToEnd()})})),this.queue.push(this))}},{key:"onChildAdded",value:function(wa){var Ka=this.node.children.indexOf(wa.node||wa._data)+1;Ka=this.node.children[Ka];wa.target.remove();Ka?(Ka=this.target.submorphs.indexOf(Ka.container.target),this.target.addMorphAt(wa.target,
Ka)):this.target.addMorph(wa.target);wa._data.globalTargetPosition&&(wa.target.position=this.target.localize(wa._data.globalTargetPosition))}},{key:"onChildRemoved",value:function(wa){}},{key:"toggleConnectionControl",value:function(wa){this.getSubmorphNamed("connections label").visible=wa}},{key:"toggleSelected",value:function(wa){var Ka=this,Rb,eb,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ob){if(1==Ob.nextAddress){if(Ka._active===wa)return Ob.return();Ka._active=wa;Pa._get(Object.getPrototypeOf(Fb.prototype),
"toggleSelected",Ka).call(Ka,wa);return wa&&Ka.target&&Ka.target.isMorph&&Ka.world()?Ob.yield(Ka.target.whenRendered(),3):Ob.jumpTo(0)}Ka.get("inspector").targetObject=Ka.target;Ka.get("connections tree").inspectConnectionsOf(Ka.target);if(Ka.connectionHalo)return Ob.return();Rb=$jscomp.makeIterator(Ka.world().halos());for(eb=Rb.next();!eb.done;eb=Rb.next()){Sc=eb.value;if(Sc.target===Ka.target)return Ob.return();Sc.remove()}Da.noUpdate({sourceObj:Ka.world(),targetObj:Ka.sideBar,sourceAttribute:"showHaloFor",
targetAttribute:"selectNode"},function(){return Ka.world().showHaloFor(Ka.target)});Ob.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphContainer"}},{key:"properties",get:function(){return{fontFamily:{after:["submorphs"],derived:!0,set:function(wa){this.submorphs[0].fontFamily=wa}},fontColor:{after:["submorphs"],derived:!0,set:function(wa){this.submorphs[0].fontColor=wa}},fontSize:{derived:!0,set:function(wa){this.submorphs[0].fontSize=wa}},target:{serialize:!1},
dragTriggerDistance:{defaultValue:15},borderRadius:{defaultValue:4},nameNeedsUpdate:{derived:!0,get:function(){return!this.target||this.submorphs[0].textString.slice(2,-1)==this.target.name&&this.connectionCount==(this.target.attributeConnections||[]).length?!1:!0}},grabbable:{defaultValue:!0},draggable:{defaultValue:!0},submorphs:{after:["target","tree"],initialize:function(){this.refresh()}},sideBar:{derived:!0,get:function(){return this.owner.owner}}}}}],Ja,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"InteractiveTree",version:"0.1.1-1107"}}},{start:18910,end:27456})}(Da.InteractiveTreeContainer);Da.MorphContainer=fc;Da.MorphContainer=fc;Da.MorphContainer=fc;var ja=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js");ja.visualizeConnection=function(Ba,Ja,Fb,wa,Ka){wa=void 0===wa?{}:wa;Ka=ja.rect(0).sides.concat(ja.rect(0).corners);
Fb=Fb||new ja.Leash(Object.assign({isSmooth:!0,styleClasses:["Halo"],borderColor:ja.Color.orange,epiMorph:!0,endpointStyle:{start:{fill:ja.Color.transparent,nativeCursor:"auto"},end:{fill:ja.Color.orange}}},wa,{hasFixedPosition:!0}));Fb.startPoint.attachTo(Ba,"rightCenter");Ja.isMorph?(wa=Ja.globalBounds().partNameNearest(Ka,Ba.globalPosition),Ba.globalPosition.equals(Ja.globalBounds().partNamed(wa))&&Ja.globalBounds().partNameNearest(ja.arr.without(Ka,wa),Ba.globalPosition),Fb.endPoint.attachTo(Ja,
"leftCenter")):(Ka=Ba.globalBounds().topRight().addPt(ja.pt(100,0)),Ja=ja.morph({type:"label",value:Ja.toString(),styleClasses:["Tooltip"],padding:ja.rect(8,4)}).openInWorld(Ka),Ja.position=Ba.world().bounds().translateForInclusion(Ja.bounds()).topLeft(),ja.once(Fb,"remove",Ja,"remove"),Fb.endPoint.attachTo(Ja,"leftCenter"));return Fb};ja.startConnecting=function(Ba,Ja){Ba.animate({opacity:.8,duration:300});Ba.startPoint.attachTo(Ja,"center");Ba.vertices[0].position=ja.pt(2,2)};ja.stopConnecting=
function(Ba,Ja,Fb,wa){function Ka(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ob){if(1==Ob.nextAddress)return Ob.yield(Ba.animate({opacity:0,duration:300}),2);Ba.startPoint.clearConnection();Ba.endPoint.clearConnection();Ba.remove();Ob.jumpToEnd()})}wa=void 0===wa?!1:wa;var Rb,eb,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ob){return 1==Ob.nextAddress?(Rb=Ba,eb=Rb.endPoint,(Sc=eb.connectedMorph)&&"MorphContainer"==ja.getClassName(Sc)&&(Sc=Sc.target),Sc?Ob.yield(ja.interactiveConnectGivenSourceAndTarget(Fb,
wa,Sc),2):Ob.jumpTo(2)):Ob.yield(Ka(),0)})};ja.editConnection=function(Ba){var Ja=Ba.connection,Fb=Ba.connectionPoint,wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return wa=ja.visualizeConnection(Fb,Ja.targetObj,!1,{borderColor:ja.Color.gray.darker(),endpointStyle:{start:{fill:ja.Color.transparent,nativeCursor:"auto"},end:{fill:ja.Color.gray.darker()}}}),Ka.yield(ja.interactivelyReEvaluateConnection(Ja,"Edit Connection",!1),2);wa.remove();Ka.jumpToEnd()})};
ja.Tree=Je;ja.TreeData=jd;ja.Icon=Zd;ja.morph=zd;ja.pt=jc;ja.Rectangle=$c;ja.rect=Wc;ja.Color=bd;ja.arr=Zc;ja.connect=id;ja.signal=Mb;ja.Leash=me;ja.once=Cd;ja.interactivelyReEvaluateConnection=Cc;ja.interactiveConnectGivenSource=Eb;ja.interactiveConnectGivenSourceAndTarget=qc;ja.getClassName=Ic;(function(Ba){var Ja=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Fb=Ja.hasOwnProperty("ConnectionsTreeData")&&"function"===typeof Ja.ConnectionsTreeData?Ja.ConnectionsTreeData:Ja.ConnectionsTreeData=
function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"parseMorphConnections",value:function(wa){for(var Ka={},Rb=$jscomp.makeIterator(void 0===wa.attributeConnections?[]:wa.attributeConnections),eb=Rb.next();!eb.done;eb=Rb.next())eb=eb.value,eb.targetObj.isHalo||(Ka[eb.sourceAttrName]=Ka[eb.sourceAttrName]||[{name:["      New Connection  ",{fontColor:ja.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(wa,
eb.sourceAttrName),{}]}],ja.arr.pushAt(Ka[eb.sourceAttrName],{name:[].concat($jscomp.arrayFromIterable(this.renderExistingConnection(eb)))},0));return{children:Object.entries(Ka).map(function(Sc){var Ob=$jscomp.makeIterator(Sc);Sc=Ob.next().value;Ob=Ob.next().value;return{name:[Sc,{fontWeight:"bold"}," ",{},ja.morph({fill:ja.Color.white,opacity:.7,value:""+(Ob.length-1),borderRadius:15,fontWeight:"bold",padding:ja.Rectangle.inset(5,0,5,0),type:"label"}),{paddingTop:"4px"}],children:Ob}}).concat([{name:["New Connection  ",
{fontColor:ja.Color.white.withA(.5),fontStyle:"italic"},this.renderPin(wa),{}]}])}}},{key:"renderExistingConnection",value:function(wa){var Ka=this,Rb=ja.morph({type:"label",fontColor:ja.Color.gray,fontSize:16,nativeCursor:"pointer",value:[].concat($jscomp.arrayFromIterable(ja.Icon.textAttribute("long-arrow-alt-right",{paddingTop:"4px"})),["  ",{},wa.targetMethodName,{}])}),eb=this.renderDeadPin(),Sc=eb.submorphs[0];ja.connect(Rb,"onHoverIn",function(){Rb.fontColor=ja.Color.orange;Rb._leash=ja.visualizeConnection(Sc,
wa.targetObj,Rb._leash);Sc.fill=ja.Color.orange;Sc.border={color:ja.Color.orange,width:3}});ja.connect(Rb,"onMouseDown",function(Ob){return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==pd.nextAddress)return Ob.stop(),pd.yield(ja.interactivelyReEvaluateConnection(wa),2);ja.signal(Ka,"refresh");pd.jumpToEnd()})});ja.connect(Rb,"onHoverOut",function(){Rb.fontColor=ja.Color.gray;Sc.fill=ja.Color.gray;Sc.border={color:ja.Color.white,width:1};Rb._leash.remove();Rb._leash=void 0});return[Rb,
{},"  ",{}].concat($jscomp.arrayFromIterable(ja.Icon.textAttribute("times",{nativeCursor:"pointer ",onMouseDown:function(){wa.disconnect();ja.signal(Ka,"refresh")}})),["  ",{},eb,{}])}},{key:"renderDeadPin",value:function(){var wa=ja.morph({type:"ellipse",fill:ja.Color.gray,extent:ja.pt(10,10),center:ja.pt(8,12),borderWidth:1});return ja.morph({extent:ja.pt(20,20),fill:ja.Color.transparent,reactsToPointer:!1,submorphs:[wa]})}},{key:"renderPin",value:function(wa,Ka){var Rb=this,eb=ja.morph({type:"ellipse",
fill:ja.Color.gray.withA(.5),extent:ja.pt(10,10),center:ja.pt(8,12),draggable:!1,borderWidth:1}),Sc=new ja.Leash({opacity:0,styleClasses:["Halo"],isSmooth:!0,epiMorph:!0,hasFixedPosition:!0,borderColor:ja.Color.gray.darker(),endpointStyle:{fill:ja.Color.gray.darker()},position:ja.pt(1,1),vertices:[ja.pt(0,0),ja.pt(0,0)],getLabelFor:function(Ob){return"MorphContainer"==ja.getClassName(Ob)?Ob.target.name:Ob.name},canConnectTo:function(Ob){return"MorphContainer"==ja.getClassName(Ob)||2>ja.arr.intersect([Ob].concat($jscomp.arrayFromIterable(Ob.ownerChain())),
[eb].concat($jscomp.arrayFromIterable(eb.ownerChain()))).length}});eb.addMorph(Sc);ja.connect(Sc.endPoint,"onDragStart",function(){ja.startConnecting(Sc,eb)});ja.connect(Sc.endPoint,"onDragEnd",function(Ob){return $jscomp.asyncExecutePromiseGeneratorProgram(function(pd){if(1==pd.nextAddress)return eb.center=ja.pt(8,12),pd.yield(ja.stopConnecting(Sc,eb,wa,Ka),2);ja.signal(Rb,"refresh");pd.jumpToEnd()})});return ja.morph({extent:ja.pt(20,20),fill:ja.Color.transparent,reactsToPointer:!1,submorphs:[eb]})}},
{key:"display",value:function(wa){return wa.name}},{key:"collapse",value:function(wa,Ka){wa.isCollapsed=Ka}},{key:"isCollapsed",value:function(wa){return wa.isCollapsed}},{key:"isLeaf",value:function(wa){return!wa.children}},{key:"getChildren",value:function(wa){return wa.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTreeData"}},{key:"for",value:function(wa){var Ka=new this;Ka.root=Ka.parseMorphConnections(wa);return Ka}}],Ja,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:3534,end:8251})})(ja.TreeData);fc=function(Ba){var Ja=lively.FreezerRuntime.recorderFor("ConnectionsTree/index.js"),Fb=Ja.hasOwnProperty("ConnectionsTree")&&"function"===typeof Ja.ConnectionsTree?Ja.ConnectionsTree:Ja.ConnectionsTree=function(wa){wa&&wa[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Pa(Fb,Ba,[{key:"inspectConnectionsOf",value:function(wa){if(this.targetMorph=wa)this.treeData=ja.ConnectionsTreeData.for(wa),ja.connect(this.treeData,"refresh",this,"refresh")}},{key:"refresh",value:function(){this.targetMorph&&(this.treeData=ja.ConnectionsTreeData.for(this.targetMorph),ja.connect(this.treeData,"refresh",this,"refresh"))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConnectionsTree"}},
{key:"properties",get:function(){return{}}}],Ja,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ConnectionsTree",version:"0.1.1-16"}}},{start:8268,end:8821})}(ja.Tree);fc=ja.ConnectionsTree;ja.default=fc}}});