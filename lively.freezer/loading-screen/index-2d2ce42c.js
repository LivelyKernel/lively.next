System.register(["./__root_module__-89b08ab2.js","./index-1502344e.js","./color-picker-5aa8abd6.js"],function(){var ta,nb,xb,Ob,Hb,qd,Dc,hd,Hc,Fc,Sc,ad,Jd,ed,sc,Sa,ob,$b,Sb,Bc,id,Xb,Ub,ub,hc,wc,bd,cd;return{setters:[function(bb){ta=bb.au;nb=bb.s;xb=bb.a7;Ob=bb.aW;Hb=bb.a6;qd=bb.a9;Dc=bb.aa;hd=bb.aC;Hc=bb.al;Fc=bb.ao;Sc=bb.aj;ad=bb.ap;Jd=bb.a3;ed=bb.a1;sc=bb.C;Sa=bb.ar;ob=bb.av;$b=bb.bS;Sb=bb.bt;Bc=bb.ac;id=bb.at;Xb=bb.bi;Ub=bb.bs;ub=bb.bq;hc=bb.bU},function(bb){wc=bb.N;bd=bb.I},function(bb){cd=
bb.a}],execute:function(){var bb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");bb.fun=ta;bb.string=nb;bb.obj=xb;bb.properties=Ob;bb.arr=Hb;bb.Text=qd;bb.config=Dc;bb.HorizontalLayout=hd;bb.VerticalLayout=Hc;bb.morph=Fc;bb.Morph=Sc;bb.Icon=ad;bb.pt=Jd;bb.Rectangle=ed;bb.Color=sc;bb.connect=Sa;bb.once=ob;bb.noUpdate=$b;bb.ColorPicker=cd;bb.DropDownList=Sb;bb.loadObjectFromPartsbinFolder=Bc;bb.cachedControls=new WeakMap;var pb=function(Pa){var Za=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),
eb=Za.hasOwnProperty("RichTextControl")&&"function"===typeof Za.RichTextControl?Za.RichTextControl:Za.RichTextControl=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return id(eb,Pa,[{key:"toggleButton",value:function(Na,Da){Na.master=Da?{auto:"styleguide://SystemIDE/selected button"}:{auto:"styleguide://System/dark button"}}},{key:"reset",value:function(){var Na=this.ui.fontSelection;Na.items=bb.RichTextControl.basicFontItems();
Na.selection=Na.items[0].value;bb.connect(this.target,"selectionChange",this,"update")}},{key:"alignAtTarget",value:function(Na){Na=void 0===Na?!!this.world():Na;var Da=this.target,mb=Da.world()||$world,Zb=this.globalBounds();Da=(Da.selection.isEmpty()?Da.globalBounds():Da.getGlobalTransform().transformRectToRect(Da.selectionBounds().translatedBy(Da.scroll.negated()))).bottomCenter().subPt(Zb.topCenter());mb=mb.visibleBounds().translateForInclusion(Zb.translatedBy(Da)).topLeft().subPt(Zb.topLeft());
mb=this.position.addPt(mb);Na?this.animate({duration:300,position:mb}):this.position=mb}},{key:"removeFocus",value:function(){this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(Na,Da){Da=void 0===Da?!0:Da;var mb=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zb){if(1==Zb.nextAddress)return mb.target=Na,mb.update(),Zb.yield(mb.whenRendered(),2);mb.ui.fontSizeField.relayout();Da&&mb.alignAtTarget();Zb.jumpToEnd()})}},{key:"setupConnections",
value:function(){bb.connect(this.ui.paddingField,"number",this,"setPadding");bb.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");bb.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");bb.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");bb.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var Na=this,Da=this.target,mb=this.updateSpec,Zb=Da.selection;Zb=Zb?Zb.isEmpty()?Da.textAttributeAt(Zb.start):Da.getStyleInRange(Zb):
{};var dc=this.managedProps,Mb=bb.obj.select(Da,dc);Da=$jscomp.makeIterator(Object.entries(bb.obj.select(Zb||{},dc)));for(Zb=Da.next();!Zb.done;Zb=Da.next())dc=$jscomp.makeIterator(Zb.value),Zb=dc.next().value,dc=dc.next().value,"undefined"!==typeof dc&&(Mb[Zb]=dc);bb.noUpdate(function(){for(var Yb=$jscomp.makeIterator(Object.entries(Na.ui)),I=Yb.next();!I.done;I=Yb.next()){var W=$jscomp.makeIterator(I.value);I=W.next().value;W=W.next().value;if(mb[I])mb[I](Mb,W)}})}},{key:"relayout",value:function(){}},
{key:"changeAttributeInSelectionOrMorph",value:function(Na,Da){var mb=this.target,Zb=mb.selection;mb.isLabel||Zb.isEmpty()?mb[Na]="function"===typeof Da?Da(mb[Na]):Da:(mb.undoManager.group(),mb.changeStyleProperty(Na,function(dc){return"function"===typeof Da?Da(dc):Da}),mb.undoManager.group())}},{key:"changeFont",value:function(Na){var Da=this,mb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zb){if(1==Zb.nextAddress)return Da._last=Na,(mb="custom..."===Na)?Zb.yield($world.prompt("Enter font family name",
{requester:Da.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Zb.jumpTo(2);if(2!=Zb.nextAddress&&(Na=Zb.yieldResult,!Na))return Zb.return();Da.changeAttributeInSelectionOrMorph("fontFamily",Na);Zb.jumpToEnd()})}},{key:"setPadding",value:function(Na){this.target.padding=bb.Rectangle.inset(Na)}},{key:"setPaddingTop",value:function(Na){var Da=this.target.padding;this.target.padding=bb.Rectangle.inset(Da.left(),Na,Da.right(),Da.bottom())}},{key:"setPaddingLeft",value:function(Na){var Da=
this.target.padding;this.target.padding=bb.Rectangle.inset(Na,Da.top(),Da.right(),Da.bottom())}},{key:"setPaddingRight",value:function(Na){var Da=this.target.padding;this.target.padding=bb.Rectangle.inset(Da.left(),Da.top(),Na,Da.bottom())}},{key:"setPaddingBottom",value:function(Na){var Da=this.target.padding;this.target.padding=bb.Rectangle.inset(Da.left(),Da.top(),Da.right(),Na)}},{key:"setLineWrapping",value:function(Na){this.target.lineWrapping=Na}},{key:"changeFontWeight",value:function(Na){this.changeAttributeInSelectionOrMorph("fontWeight",
Na)}},{key:"changeTextAlign",value:function(Na){this.changeAttributeInSelectionOrMorph("textAlign",Na)}},{key:"changeFontColor",value:function(Na){this.changeAttributeInSelectionOrMorph("fontColor",Na)}},{key:"changeFontSize",value:function(Na){this.changeAttributeInSelectionOrMorph("fontSize",Na)}},{key:"changeFixedWidth",value:function(Na){this.target.fixedWidth=Na}},{key:"changeFixedHeight",value:function(Na){this.target.fixedHeight=Na}},{key:"changeLink",value:function(){var Na=this,Da,mb,Zb,
dc,Mb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yb){if(1==Yb.nextAddress)return Da=Na.target,mb=Da.selection,Zb=Da.getStyleInRange(mb),dc=Zb.link,Yb.yield(Na.world().prompt("Set link",{input:dc||"https://"}),2);Mb=Yb.yieldResult;Da.undoManager.group();Da.setStyleInRange({link:Mb||void 0},mb);Da.undoManager.group();Na.autoRemove&&Na.remove();Yb.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(Na){return"underline"===
Na?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(Na){return"italic"===Na?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(Na){return"bold"===Na||"700"===Na?"normal":"bold"})}},{key:"copyStyle",value:function(){var Na=this,Da=this.target,mb=this.ui.applyStyleButton;Da=Da.selection.isEmpty()?Da.defaultTextStyle:Da.getStyleInRange(Da.selection);var Zb=JSON.stringify(Da,
null,2);this.constructor.copiedStyle=Da;mb.tooltip="paste style\n"+Zb;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Zb},{type:"application/morphic-text-style",styleString:Zb}]).then(function(){return Na.setStatusMessage("Copied style\n"+Zb)}).catch(function(dc){return Na.showError(dc)})}},{key:"pasteStyle",value:function(){var Na=this,Da=this.target,mb=this.constructor.copiedStyle;Da.selection.isEmpty()?Object.assign(Da,mb):Da.selections.forEach(function(Zb){return Da.addTextAttribute(Na.constructor.copiedStyle,
Zb)});this.update()}},{key:"clearStyle",value:function(){var Na=this.target;Na.selections.forEach(function(Da){return Na.resetStyleInRange(Da)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var Na=this.defaultSpec,Da=this.uiSpec;Na=this.addMorph({name:"config panel",layout:new bb.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(Na).map(function(mb){var Zb=
Da.rows.some(function(dc){return dc.some(function(Mb){return Mb===mb})});return{type:"labeledcheckbox",label:mb,name:mb,checked:Zb}})),[{layout:new bb.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});Na.center=this.innerBounds().center();bb.connect(Na.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");bb.connect(Na.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",
value:function(){var Na=this.getSubmorphNamed("config panel");Na&&(Na.remove(),Na.submorphs.filter(function(Da){return"LabeledCheckBox"===Da.constructor.name}))}},{key:"configureCanceled",value:function(){var Na=this.getSubmorphNamed("config panel");Na&&Na.remove()}},{key:"close",value:function(){var Na=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(Da){return Da.targetObj===Na&&Da.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",
value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var Na=this.world();Na&&(Na=Na.focusedMorph)&&(Na.isLabel||Na.isText)&&!this.isAncestorOf(Na)&&this.target!==Na&&this.focusOn(Na,!1)}},{key:"onMouseUp",value:function(Na){var Da=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(mb){if(1==mb.nextAddress)return mb.yield(Da.whenRendered(),2);Da.update();mb.jumpToEnd()})}},{key:"attachToWorld",value:function(){bb.connect($world,"onMouseDown",
this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var Na=this;return Object.assign({fontSelection:function(Da,mb){var Zb=
Da.fontFamily;(Da=Zb&&mb.items.find(function(dc){return dc.value.toLowerCase()===Zb.toLowerCase()}))?mb.selection=Da.value:Zb&&(mb.items=mb.items.concat({isListItem:!0,label:[Zb,{fontFamily:Zb}],value:Zb}),mb.selection=bb.arr.last(mb.items));mb.fit();mb.width=Math.max(mb.width,170)},fontWeightSelection:function(Da,mb){mb.selection="normal"==Da.fontWeight?"Medium":Da.fontWeight?bb.string.capitalize(Da.fontWeight):"Medium"},boldButton:function(Da,mb){Na.toggleButton(mb,"bold"===Da.fontWeight)},italicButton:function(Da,
mb){Na.toggleButton(mb,"italic"===Da.fontStyle)},underlineButton:function(Da,mb){Na.toggleButton(mb,"underline"===Da.textDecoration)},linkButton:function(Da,mb){Na.toggleButton(mb,!!Da.link)},colorPicker:function(Da,mb){mb.colorValue=Da.fontColor},fontSizeField:function(Da,mb){mb.number=Da.fontSize},fixedWidthControl:function(Da,mb){Da.isText?mb.enable():mb.disable();mb.checked=Da.fixedWidth},fixedHeightControl:function(Da,mb){Da.isText?mb.enable():mb.disable();mb.checked=Da.fixedHeight},lineWrappingControl:function(Da,
mb){var Zb=$jscomp.makeIterator(mb.submorphs);mb=Zb.next().value;Zb=Zb.next().value;mb.checked=!!Da.lineWrapping;Zb.deactivated=!Da.lineWrapping;Zb.deactivated?Zb.opacity=.5:(Zb.opacity=1,Zb.selection=Da.lineWrapping)},paddingControl:function(Da,mb){var Zb=Da.padding,dc=Zb.left();Da=Zb.top();var Mb=Zb.right();Zb=Zb.bottom();var Yb=!bb.arr.every([dc,Da,Mb,Zb],function(I){return I==dc});mb.get("multi value indicator").visible=Yb;bb.connect(mb.get("multi value indicator"),"onMouseDown",mb.get("padding field"),
"number",{converter:"() => left",varMapping:{left:dc}});mb.get("padding field").number=dc;mb.get("padding field").visible=!Yb;mb.get("padding field top").number=Da;mb.get("padding field left").number=dc;mb.get("padding field right").number=Mb;mb.get("padding field bottom").number=Zb}},["left","center","right","block"].reduce(function(Da,mb){Da[mb+"Align"]=function(Zb,dc){Na.toggleButton(dc,Zb.textAlign==mb)};return Da},{}))}},ui:{get:function(){var Na=this,Da={fontSelection:"font selection",fontWeightSelection:"font weight selection",
boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",
paddingField:"padding field",paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return bb.obj.extract(Da,bb.obj.keys(Da),function(mb,Zb){return Na.getSubmorphNamed(Zb)})}}}}},{key:"openDebouncedFor",value:function(Na){var Da=Na.selection;if(Da.isEmpty()){var mb=bb.cachedControls.get(Na);mb&&(mb.update(),mb.alignAtTarget(),mb.world()||Na.world().addMorph(mb))}else bb.fun.debounceNamed(Na.id+"openRichTextControl",
600,function(){var Zb=bb.cachedControls.get(Na);Da.isEmpty()?Zb&&Zb.removeFocus():(Zb&&Zb.world()||(Zb=new bb.RichTextControl,bb.cachedControls.set(Na,Zb)),Na.world().addMorph(Zb),Zb.focusOn(Na,!0),Zb.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(Na){var Da=bb.cachedControls.get(Na);Da?Da.update():(Da=new bb.RichTextControl,bb.cachedControls.set(Na,Da),Da.focusOn(Na,!0),Da.alwaysTargetFocusedMorph());Da.alignAtTarget();Da.world()||Na.world().addMorph(Da);return Da}}],Za,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:624,end:16944})}(bb.Morph);bb.RichTextControl=pb;bb.RichTextControl=pb;bb.RichTextControl=pb;pb=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js");pb.SearchField=Xb;var pc=function(Pa){var Za=lively.FreezerRuntime.recorderFor("ProtoSearchField/index.js"),eb=Za.hasOwnProperty("ProtoSearchField")&&
"function"===typeof Za.ProtoSearchField?Za.ProtoSearchField:Za.ProtoSearchField=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return id(eb,Pa,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoSearchField"}},{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoSearchField",version:"0.1.1-0"}}},{start:76,end:221})}(pb.SearchField);pc=pb.ProtoSearchField;pb.default=pc;var ab=lively.FreezerRuntime.recorderFor("ProtoTree/index.js");ab.Tree=Ub;ab.TreeData=ub;pb=function(Pa){var Za=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),eb=Za.hasOwnProperty("TestTreeData")&&"function"===typeof Za.TestTreeData?Za.TestTreeData:Za.TestTreeData=function(Na){Na&&
Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return id(eb,Pa,[{key:"display",value:function(Na){return Na.name}},{key:"isCollapsed",value:function(Na){return Na.isCollapsed}},{key:"collapse",value:function(Na,Da){Na.isCollapsed=Da}},{key:"getChildren",value:function(Na){return Na.isLeaf?null:Na.isCollapsed?[]:Na.children}},{key:"isLeaf",value:function(Na){return Na.isLeaf}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TestTreeData"}}],
Za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:113,end:417})}(ab.TreeData);ab.TestTreeData=pb;ab.TestTreeData=pb;ab.TestTreeData=pb;pb=function(Pa){var Za=lively.FreezerRuntime.recorderFor("ProtoTree/index.js"),eb=Za.hasOwnProperty("ProtoTree")&&"function"===typeof Za.ProtoTree?Za.ProtoTree:
Za.ProtoTree=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return id(eb,Pa,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoTree"}},{key:"properties",get:function(){return{treeData:{initialize:function(){this.treeData=new ab.TestTreeData({name:"root",isCollapsed:!1,isLeaf:!1,children:[{name:"child 1",isLeaf:!0},{name:"child 2",isLeaf:!1,isCollapsed:!0,children:[{name:"child 2 - 1",isLeaf:!0}]},
{name:"child 3",isLeaf:!1,isCollapsed:!1,children:[{name:"child 3 - 1",isLeaf:!0},{name:"child 3 - 2",isLeaf:!0}]},{name:"child 4",isLeaf:!0}]})}},master:{initialize:function(){}}}}}],Za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoTree",version:"0.1.1-2"}}},{start:434,end:1297})}(ab.Tree);pb=ab.ProtoTree;ab.default=pb;pb=
lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js");pb.NumberWidget=wc;pc=function(Pa){var Za=lively.FreezerRuntime.recorderFor("ProtoNumberWidget/index.js"),eb=Za.hasOwnProperty("ProtoNumberWidget")&&"function"===typeof Za.ProtoNumberWidget?Za.ProtoNumberWidget:Za.ProtoNumberWidget=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return id(eb,Pa,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProtoNumberWidget"}},
{key:"properties",get:function(){return{master:{initialize:function(){}}}}}],Za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ProtoNumberWidget",version:"0.1.1-0"}}},{start:76,end:224})}(pb.NumberWidget);pc=pb.ProtoNumberWidget;pb.default=pc;pb=lively.FreezerRuntime.recorderFor("FrameResizer/index.js");pb.Morph=Sc;pc=function(Pa){var Za=
lively.FreezerRuntime.recorderFor("FrameResizer/index.js"),eb=Za.hasOwnProperty("FrameResizer")&&"function"===typeof Za.FrameResizer?Za.FrameResizer:Za.FrameResizer=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return id(eb,Pa,[{key:"onDrag",value:function(Na){var Da=this.owner.left;Na=Na.positionIn(this).x;Na*="left"==this.direction?-1:1;this.owner.width+=Na;350>this.owner.width&&(Na+=350-this.owner.width,this.owner.width=
350);this.owner.left="left"==this.direction?Da-Na:Da}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FrameResizer"}},{key:"properties",get:function(){return{direction:{type:"Enum",values:["left","right"]}}}}],Za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"FrameResizer",version:"0.1.1-24"}}},{start:56,end:840})}(pb.Morph);
pc=pb.FrameResizer;pb.default=pc;var cb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");cb.Morph=Sc;cb.morph=Fc;cb.layouts=hc;cb.string=nb;cb.connect=Sa;cb.noUpdate=$b;cb.InteractiveMorphSelector=bd;cb.Color=sc;cb.pt=Jd;pb=function(Pa){var Za=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),eb=Za.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof Za.ShapeLayoutControl?Za.ShapeLayoutControl:Za.ShapeLayoutControl=function(Na){Na&&Na[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return id(eb,Pa,[{key:"focusOn",value:function(Na){this.target=Na;this.update(!1)}},{key:"setupConnections",value:function(){var Na=this.ui;cb.connect(Na.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");cb.connect(Na.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");cb.connect(Na.xAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',
varMapping:{self:this}});cb.connect(Na.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var Da={},mb=$jscomp.makeIterator(this.managedProps),Zb=mb.next();!Zb.done;Da={$jscomp$loop$prop$prop$2419:Da.$jscomp$loop$prop$prop$2419},Zb=mb.next()){var dc=$jscomp.makeIterator(Zb.value),Mb=dc.next().value;Zb=dc.next().value;dc.next().value||
(Da.$jscomp$loop$prop$prop$2419=this.join(Mb),dc=Na[this.join(Mb,"control")],cb.connect(dc,Zb,this,"updateLayout",{updater:function(Yb){return function(I,W){I(Yb.$jscomp$loop$prop$prop$2419,W)}}(Da),varMapping:{prop:Da.$jscomp$loop$prop$prop$2419}}))}}},{key:"lower",value:function(Na){return Na.charAt(0).toLowerCase()+Na.slice(1)}},{key:"join",value:function(Na,Da){return this.lower(cb.string.camelCaseString(Na+(Da?" "+Da:"")))}},{key:"updateLayoutOfTarget",value:function(Na){Na=cb.layouts[cb.string.camelCaseString(Na)];
this.target.layout=Na?new Na({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(Na,Da){this.target.layout[Na]=Da}},{key:"update",value:function(Na){var Da=this;this.target&&cb.noUpdate(function(){for(var mb=Da.ui,Zb=Da.target.layout||{name:function(){return"No"}},dc=$jscomp.makeIterator(Da.managedProps),Mb=dc.next();!Mb.done;Mb=dc.next()){var Yb=$jscomp.makeIterator(Mb.value);Mb=Yb.next().value;var I=Yb.next().value;Yb.next();Yb=mb[Da.join(Mb,"control")];var W=mb[Da.join(Mb,
"label")];if(I)if("type"===Mb)Yb.selection=Zb.name()+" Layout";else{var sa=Zb[Da.join(Mb)],xa="undefined"!==typeof sa;if(xa){switch(Mb){case "align":Yb.items=Zb.possibleAlignValues;break;case "direction":Yb.items=Zb.possibleDirectionValues;break;case "axis":Yb.items=Zb.possibleAxisValues}Yb[I]=sa}W.isLayoutable=W.visible=xa}}Da.showGridLayoutControl("Grid"===Zb.name());Da.showProportionalControl("Proportional"===Zb.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(Na){var Da=
{};this.target.layout.changeSettingsFor(Na.submorph,(Da[Na.axis]=Na.policy,Da),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Na){var Da=this;Na.stop();var mb=this.target.layout,Zb=mb.settingsFor(this.selectedSubmorph),dc=[],Mb;for(Mb in Zb)dc=[].concat($jscomp.arrayFromIterable(dc),[Mb+": ",{fontWeight:"bold"},Zb[Mb]+" ",{}]);var Yb=cb.morph({type:"label",fontColor:cb.Color.white,value:dc,fill:cb.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Yb.wantsToBeDroppedOn=function(I){return mb.layoutableSubmorphs.includes(I)};
Yb.onBeingDroppedOn=function(I,W){Yb.remove();if(I=mb.layoutableSubmorphs.includes(W)?W:Na.world.morphsContainingPoint(Na.hand.position).find(function(sa){return mb.layoutableSubmorphs.includes(sa)}))Da.updateSubmorphProportionalLayoutSettings({policy:Zb.x,axis:"x",submorph:I}),Da.updateSubmorphProportionalLayoutSettings({policy:Zb.y,axis:"y",submorph:I}),I.show(),$world.setStatusMessage("layout settings applied")};Na.hand.grab(Yb);Yb.moveBy(cb.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",
value:function(){var Na=this,Da,mb,Zb,dc,Mb,Yb,I,W,sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xa){switch(xa.nextAddress){case 1:return Da=Na.target.layout.layoutableSubmorphs,Na.manageFocus=!0,Na.env.eventDispatcher.isKeyPressed("Shift")?(Zb=Da.map(function(Eb){return{isListItem:!0,string:String(Eb),value:Eb}}),xa.yield($world.listPrompt("Select morph",Zb,{onSelection:function(Eb){return Eb.show()}}),5)):xa.yield(cb.InteractiveMorphSelector.selectMorph(Na.world(),Na,function(Eb){return Da.includes(Eb)}),
4);case 4:mb=xa.yieldResult;xa.jumpTo(3);break;case 5:dc=xa.yieldResult,Mb=$jscomp.makeIterator(dc.selected),mb=Mb.next().value;case 3:Na.manageFocus=!1;Na.selectedSubmorph=mb;if(!mb)return xa.return();Yb=Na.ui;I=Yb.xAxisPolicyControl;W=Yb.yAxisPolicyControl;sa=Na.target.layout.settingsFor(mb);cb.noUpdate(function(){I.selection=sa.x;W.selection=sa.y});xa.jumpToEnd()}})}},{key:"showProportionalControl",value:function(Na){var Da=this.ui;[Da.submorphSettingsControl,Da.dragmeControl,Da.xAxisPolicyControl,
Da.xAxisPolicyLabel,Da.yAxisPolicyControl,Da.yAxisPolicyLabel].forEach(function(mb){mb.isLayoutable=Na;mb.visible=Na})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(Na){var Da=this.ui.configureGridLayoutControl;Da.visible=Da.isLayoutable=Na}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",
!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,!0]]}},ui:{readOnly:!0,get:function(){for(var Na={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},
Da=$jscomp.makeIterator(this.managedProps),mb=Da.next();!mb.done;mb=Da.next()){var Zb=$jscomp.makeIterator(mb.value).next().value;mb=Zb+" label";Zb+=" control";Na[this.join(mb)]=this.getSubmorphNamed(mb);Na[this.join(Zb)]=this.getSubmorphNamed(Zb)}return Na}}}}}],Za,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",
version:"0.1.1-166"}}},{start:345,end:7771})}(cb.Morph);pb=cb.ShapeLayoutControl;cb.default=pb}}});