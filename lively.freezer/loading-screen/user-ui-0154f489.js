System.register("./__rootModule___commonjs-entry-71573ff5.js ./index-d18accbd.js ./object-classes-c0823978.js @babel/plugin-syntax-import-meta ./loading-indicator.cp-b18e3b89.js ./tooltips.cp-6a2406c0.js ./index-ca98f65e.js".split(" "),function(Lc,pd){var Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,Xb,Nb,bc,hb,cb,Hb,ec,ub,yb,ba,wb,Xa,Za,Sb;return{setters:[function(Cb){Nd=Cb.a0;Tc=Cb.D;Jc=Cb.d;$d=Cb.j;Bb=Cb.k;rd=Cb.g;Id=Cb.b;Ac=Cb.R;Pc=Cb.C;gd=Cb.w;nd=Cb.v;Fd=Cb.h;ic=Cb.q;vd=Cb.e;sb=Cb.t;Xb=Cb.I;
Nb=Cb.A;bc=Cb.M;hb=Cb.p;cb=Cb.a1;Hb=Cb.a2;ec=Cb.a3;ub=Cb.a4;yb=Cb.a5;ba=Cb._;wb=Cb.i;Xa=Cb.y},function(Cb){Za=Cb.M},function(Cb){Sb=Cb["default"]},function(){},function(){},function(){},function(){}],execute:function(){function Cb(){Cb=ba(regeneratorRuntime.mark(function T(Ea,W){var ia,ka,K,ya;return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=pb.next){case 0:return ia=db.morph({type:"text",textAlign:"center",textString:W,fill:null,padding:db.Rectangle.inset(10),fontSize:30,fontColor:"white",
fontWeight:"bold",readOnly:!0,grabbable:!1}),ka=Math.max(Ea.width+40,ia.width),K=Math.max(120,ia.height),ya=Ea.addMorph({extent:db.pt(ka,K),border:{radius:8},name:"notification",center:Ea.innerBounds().center(),origin:db.pt(ka/2,K/2),fill:db.Color.gray,scale:.1,grabbable:!1,submorphs:[ia]}),ya.submorphs[0].center=ya.innerBounds().center().subPt(db.pt(ka/2,K/2)),pb.next=7,ya.animate({scale:1,duration:400});case 7:return pb.next=9,db.promise.delay(800);case 9:return pb.next=11,ya.animate({opacity:0,
duration:400});case 11:ya.remove();case 12:case "end":return pb.stop()}},T)}));return Cb.apply(this,arguments)}var Da={},zb=window.lively.FreezerRuntime.recorderFor("https://apis.google.com/js/platform.js");zb.commonjsHelpers=Nd;zb.platform=Da;(function(){function ib(xc,Bc){if(Error.captureStackTrace)Error.captureStackTrace(this,ib);else{var Rc=Error().stack;Rc&&(this.stack=Rc)}xc&&(this.message=String(xc));void 0!==Bc&&(this.cause=Bc)}function Ea(xc,Bc){xc=xc.split("%s");for(var Rc="",Ec=xc.length-
1,Dc=0;Dc<Ec;Dc++)Rc+=xc[Dc]+(Dc<Bc.length?Bc[Dc]:"%s");ib.call(this,Rc+xc[Ec])}function W(xc,Bc,Rc,Ec){var Dc="Assertion failed";if(Rc){Dc+=": "+Rc;var sd=Ec}else xc&&(Dc+=": "+xc,sd=Bc);throw new Ea(""+Dc,sd||[]);}function T(xc){var Bc=xc.length;if(0<Bc){for(var Rc=Array(Bc),Ec=0;Ec<Bc;Ec++)Rc[Ec]=xc[Ec];return Rc}return[]}function ia(xc,Bc){for(var Rc in xc)Bc.call(void 0,xc[Rc],Rc,xc)}function ka(xc){if(0!==xc.indexOf("GCSC"))return null;var Bc={X:!1};xc=xc.substr(4);if(!xc)return Bc;var Rc=xc.charAt(0);
xc=xc.substr(1);var Ec=xc.lastIndexOf("_");if(-1==Ec)return Bc;var Dc=Cp(xc.substr(Ec+1));if(null==Dc)return Bc;xc=xc.substring(0,Ec);if("_"!==xc.charAt(0))return Bc;Ec="E"===Rc&&Dc.l;return!Ec&&("U"!==Rc||Dc.l)||Ec&&!Ap?Bc:{X:!0,l:Ec,na:xc.substr(1),domain:Dc.domain,o:Dc.o}}var K=function(xc){var Bc=0;return function(){return Bc<xc.length?{done:!1,value:xc[Bc++]}:{done:!0}}},ya="function"==typeof Object.defineProperties?Object.defineProperty:function(xc,Bc,Rc){if(xc==Array.prototype||xc==Object.prototype)return xc;
xc[Bc]=Rc.value;return xc},pb=function(xc){xc=["object"==("undefined"===typeof globalThis?"undefined":Tc(globalThis))&&globalThis,xc,"object"==("undefined"===typeof window?"undefined":Tc(window))&&window,"object"==("undefined"===typeof self?"undefined":Tc(self))&&self,"object"==Tc(zb.commonjsHelpers.commonjsGlobal)&&zb.commonjsHelpers.commonjsGlobal];for(var Bc=0;Bc<xc.length;++Bc){var Rc=xc[Bc];if(Rc&&Rc.Math==Math)return Rc}throw Error("Cannot find global object");}(this),La=function(xc,Bc){if(Bc)a:{var Rc=
pb;xc=xc.split(".");for(var Ec=0;Ec<xc.length-1;Ec++){var Dc=xc[Ec];if(!(Dc in Rc))break a;Rc=Rc[Dc]}xc=xc[xc.length-1];Ec=Rc[xc];Bc=Bc(Ec);Bc!=Ec&&null!=Bc&&ya(Rc,xc,{configurable:!0,writable:!0,value:Bc})}};La("Symbol",function(xc){if(xc)return xc;var Bc=function(Dc,sd){this.da=Dc;ya(this,"description",{configurable:!0,writable:!0,value:sd})};Bc.prototype.toString=function(){return this.da};var Rc="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",Ec=0;return function ce(sd){if(this instanceof ce)throw new TypeError("Symbol is not a constructor");
return new Bc(Rc+(sd||"")+"_"+Ec++,sd)}});La("Symbol.iterator",function(xc){if(xc)return xc;xc=Symbol("Symbol.iterator");for(var Bc="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Rc=0;Rc<Bc.length;Rc++){var Ec=pb[Bc[Rc]];"function"===typeof Ec&&"function"!=typeof Ec.prototype[xc]&&ya(Ec.prototype,xc,{configurable:!0,writable:!0,value:function(){return eb(K(this))}})}return xc});var eb=function(xc){xc={next:xc};xc[Symbol.iterator]=
function(){return this};return xc},jb=function(xc,Bc,Rc){if(null==xc)throw new TypeError("The 'this' value for String.prototype."+Rc+" must not be null or undefined");if(Bc instanceof RegExp)throw new TypeError("First argument to String.prototype."+Rc+" must not be a regular expression");return xc+""};La("String.prototype.endsWith",function(xc){return xc?xc:function(Bc,Rc){var Ec=jb(this,Bc,"endsWith");Bc+="";void 0===Rc&&(Rc=Ec.length);Rc=Math.max(0,Math.min(Rc|0,Ec.length));for(var Dc=Bc.length;0<
Dc&&0<Rc;)if(Ec[--Rc]!=Bc[--Dc])return!1;return 0>=Dc}});var E=function(xc,Bc){xc instanceof String&&(xc+="");var Rc=0,Ec=!1,Dc={next:function(){if(!Ec&&Rc<xc.length){var sd=Rc++;return{value:Bc(sd,xc[sd]),done:!1}}Ec=!0;return{done:!0,value:void 0}}};Dc[Symbol.iterator]=function(){return Dc};return Dc};La("Array.prototype.keys",function(xc){return xc?xc:function(){return E(this,function(Bc){return Bc})}});La("Object.is",function(xc){return xc?xc:function(Bc,Rc){return Bc===Rc?0!==Bc||1/Bc===1/Rc:
Bc!==Bc&&Rc!==Rc}});La("Array.prototype.includes",function(xc){return xc?xc:function(Bc,Rc){var Ec=this;Ec instanceof String&&(Ec=String(Ec));var Dc=Ec.length;Rc=Rc||0;for(0>Rc&&(Rc=Math.max(Rc+Dc,0));Rc<Dc;Rc++){var sd=Ec[Rc];if(sd===Bc||Object.is(sd,Bc))return!0}return!1}});La("String.prototype.includes",function(xc){return xc?xc:function(Bc,Rc){return-1!==jb(this,Bc,"includes").indexOf(Bc,Rc||0)}});window.gapi=window.gapi||{};window.gapi.ma=(new Date).getTime();var Wb=this||self,R=function(xc){var Bc=
Tc(xc);return"object"!=Bc?Bc:xc?Array.isArray(xc)?"array":Bc:"null"},xb=function(xc){var Bc=R(xc);return"array"==Bc||"object"==Bc&&"number"==typeof xc.length},Ja=function(xc){var Bc=Tc(xc);return"object"==Bc&&null!=xc||"function"==Bc},Ga="closure_uid_"+(1E9*Math.random()>>>0),sa=0,Ub=function(xc,Bc,Rc){return xc.call.apply(xc.bind,arguments)},vc=function(xc,Bc,Rc){if(!xc)throw Error();if(2<arguments.length){var Ec=Array.prototype.slice.call(arguments,2);return function(){var Dc=Array.prototype.slice.call(arguments);
Array.prototype.unshift.apply(Dc,Ec);return xc.apply(Bc,Dc)}}return function(){return xc.apply(Bc,arguments)}},Oc=function(xc,Bc,Rc){Oc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ub:vc;return Oc.apply(null,arguments)},aa=function(xc,Bc){function Rc(){}Rc.prototype=Bc.prototype;xc.ra=Bc.prototype;xc.prototype=new Rc;xc.prototype.constructor=xc;xc.B=function(Ec,Dc,sd){for(var ce=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)ce[pe-2]=arguments[pe];
return Bc.prototype[Dc].apply(Ec,ce)}},Ma=function(xc){return xc},qb=function(xc){var Bc=null,Rc=Wb.trustedTypes;if(!Rc||!Rc.createPolicy)return Bc;try{Bc=Rc.createPolicy(xc,{createHTML:Ma,createScript:Ma,createScriptURL:Ma})}catch(Ec){Wb.console&&Wb.console.error(Ec.message)}return Bc};aa(ib,Error);ib.prototype.name="CustomError";var Vb;aa(Ea,ib);Ea.prototype.name="AssertionError";var Lb=function(xc,Bc,Rc){xc||W("",null,Bc,Array.prototype.slice.call(arguments,2));return xc},Kb=function(xc,Bc){throw new Ea("Failure"+
(xc?": "+xc:""),Array.prototype.slice.call(arguments,1));},Db=function(xc,Bc,Rc){"string"!==typeof xc&&W("Expected string but got %s: %s.",[R(xc),xc],Bc,Array.prototype.slice.call(arguments,2))},Ra=Array.prototype.forEach?function(xc,Bc){Lb(null!=xc.length);Array.prototype.forEach.call(xc,Bc,void 0)}:function(xc,Bc){for(var Rc=xc.length,Ec="string"===typeof xc?xc.split(""):xc,Dc=0;Dc<Rc;Dc++)Dc in Ec&&Bc.call(void 0,Ec[Dc],Dc,xc)},N,va=function(xc,Bc){this.S=xc===tb&&Bc||"";this.ea=pa};va.prototype.F=
!0;va.prototype.D=function(){return this.S};va.prototype.toString=function(){return"Const{"+this.S+"}"};var Wa=function(xc){if(xc instanceof va&&xc.constructor===va&&xc.ea===pa)return xc.S;Kb("expected object of type Const, got '"+xc+"'");return"type_error:Const"},pa={},tb={},ab=function(xc,Bc){this.P=Bc===Bd?xc:""};ab.prototype.toString=function(){return this.P.toString()};ab.prototype.F=!0;ab.prototype.D=function(){return this.P.toString()};var Ob=function(xc){if(xc instanceof ab&&xc.constructor===
ab)return xc.P;Kb("expected object of type SafeUrl, got '"+xc+"' of type "+R(xc));return"type_error:SafeUrl"},yc=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,Ta=function(xc){if(xc instanceof ab)return xc;xc="object"==Tc(xc)&&xc.F?xc.D():String(xc);Lb(yc.test(xc),"%s does not match the safe URL pattern",xc)||(xc="about:invalid#zClosurez");return new ab(xc,Bd)},Bd={},Eb={},fe=function(xc,Bc){this.O=Bc===Eb?xc:"";this.F=!0};fe.prototype.D=function(){return this.O.toString()};fe.prototype.toString=
function(){return this.O.toString()};var Od=function(xc,Bc){a:{try{var Rc=xc&&xc.ownerDocument,Ec=Rc&&(Rc.defaultView||Rc.parentWindow);Ec=Ec||Wb;if(Ec.Element&&Ec.Location){Rc=Ec;break a}}catch(sd){}Rc=null}if(Rc&&"undefined"!=typeof Rc[Bc]&&(!xc||!(xc instanceof Rc[Bc])&&(xc instanceof Rc.Location||xc instanceof Rc.Element))){if(Ja(xc))try{var Dc=xc.constructor.displayName||xc.constructor.name||Object.prototype.toString.call(xc)}catch(sd){Dc="<object could not be stringified>"}else Dc=void 0===
xc?"undefined":null===xc?"null":Tc(xc);Kb("Argument is not a %s (or a non-Element, non-Location mock); got: %s",Bc,Dc)}return xc},Hd=function(xc,Bc){ia(Bc,function(Rc,Ec){Rc&&"object"==Tc(Rc)&&Rc.F&&(Rc=Rc.D());"style"==Ec?xc.style.cssText=Rc:"class"==Ec?xc.className=Rc:"for"==Ec?xc.htmlFor=Rc:Qc.hasOwnProperty(Ec)?xc.setAttribute(Qc[Ec],Rc):0==Ec.lastIndexOf("aria-",0)||0==Ec.lastIndexOf("data-",0)?xc.setAttribute(Ec,Rc):xc[Ec]=Rc})},Qc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",
frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Xd=function(xc,Bc,Rc,Ec){function Dc(pe){pe&&Bc.appendChild("string"===typeof pe?xc.createTextNode(pe):pe)}for(;Ec<Rc.length;Ec++){var sd=Rc[Ec];if(!xb(sd)||Ja(sd)&&0<sd.nodeType)Dc(sd);else{a:{if(sd&&"number"==typeof sd.length){if(Ja(sd)){var ce="function"==typeof sd.item||"string"==typeof sd.item;break a}if("function"===typeof sd){ce=
"function"==typeof sd.item;break a}}ce=!1}Ra(ce?T(sd):sd,Dc)}}},oc=function(xc,Bc){Bc=String(Bc);"application/xhtml+xml"===xc.contentType&&(Bc=Bc.toLowerCase());return xc.createElement(Bc)},rf=function(xc){Lb(xc,"Node cannot be null or undefined.");return 9==xc.nodeType?xc:xc.ownerDocument||xc.document},Dd=function(xc){this.C=xc||Wb.document||document};var ld=Dd.prototype;ld.getElementsByTagName=function(xc,Bc){return(Bc||this.C).getElementsByTagName(String(xc))};ld.ha=function(xc,Bc,Rc){var Ec=this.C,
Dc=arguments,sd=Dc[1],ce=oc(Ec,String(Dc[0]));sd&&("string"===typeof sd?ce.className=sd:Array.isArray(sd)?ce.className=sd.join(" "):Hd(ce,sd));2<Dc.length&&Xd(Ec,ce,Dc,2);return ce};ld.createElement=function(xc){return oc(this.C,xc)};ld.createTextNode=function(xc){return this.C.createTextNode(String(xc))};ld.appendChild=function(xc,Bc){Lb(null!=xc&&null!=Bc,"goog.dom.appendChild expects non-null arguments");xc.appendChild(Bc)};ld.append=function(xc,Bc){Xd(rf(xc),xc,arguments,1)};ld.canHaveChildren=
function(xc){if(1!=xc.nodeType)return!1;switch(xc.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};ld.removeNode=function(xc){return xc&&xc.parentNode?xc.parentNode.removeChild(xc):null};ld.contains=
function(xc,Bc){if(!xc||!Bc)return!1;if(xc.contains&&1==Bc.nodeType)return xc==Bc||xc.contains(Bc);if("undefined"!=typeof xc.compareDocumentPosition)return xc==Bc||!!(xc.compareDocumentPosition(Bc)&16);for(;Bc&&xc!=Bc;)Bc=Bc.parentNode;return Bc==xc};var Td=window,gb=document,Vc=Td.location,vb=function(){},cc=/\[native code\]/,ob=function(xc,Bc,Rc){return xc[Bc]=xc[Bc]||Rc},ac=function(xc){for(var Bc=0;Bc<this.length;Bc++)if(this[Bc]===xc)return Bc;return-1},ae=function(xc){xc=xc.sort();for(var Bc=
[],Rc=void 0,Ec=0;Ec<xc.length;Ec++){var Dc=xc[Ec];Dc!=Rc&&Bc.push(Dc);Rc=Dc}return Bc},qe=/&/g,lc=/</g,nc=/>/g,Yc=/"/g,fd=/'/g,ua=function(xc){return String(xc).replace(qe,"&amp;").replace(lc,"&lt;").replace(nc,"&gt;").replace(Yc,"&quot;").replace(fd,"&#39;")},Ab=function(){var xc;if((xc=Object.create)&&cc.test(xc))xc=xc(null);else{xc={};for(var Bc in xc)xc[Bc]=void 0}return xc},Fa=function(xc,Bc){return Object.prototype.hasOwnProperty.call(xc,Bc)},za=function(xc){if(cc.test(Object.keys))return Object.keys(xc);
var Bc=[],Rc;for(Rc in xc)Fa(xc,Rc)&&Bc.push(Rc);return Bc},Ka=function(xc,Bc){xc=xc||{};for(var Rc in xc)Fa(xc,Rc)&&(Bc[Rc]=xc[Rc])},Ib=function(xc){return function(){Td.setTimeout(xc,0)}},C=function(xc,Bc){if(!xc)throw Error(Bc||"");},Pb=ob(Td,"gapi",{}),da=function(xc,Bc,Rc){var Ec=new RegExp("([#].*&|[#])"+Bc+"=([^&#]*)","g");Bc=new RegExp("([?#].*&|[?#])"+Bc+"=([^&#]*)","g");if(xc=xc&&(Ec.exec(xc)||Bc.exec(xc)))try{Rc=decodeURIComponent(xc[2])}catch(Dc){}return Rc},wa=new RegExp(/^/.source+/([a-zA-Z][-+.a-zA-Z0-9]*:)?/.source+
/(\/\/[^\/?#]*)?/.source+/([^?#]*)?/.source+/(\?([^#]*))?/.source+/(#((#|[^#])*))?/.source+/$/.source),ca=/[\ud800-\udbff][\udc00-\udfff]|[^!-~]/g,ma=new RegExp(/(%([^0-9a-fA-F%]|[0-9a-fA-F]([^0-9a-fA-F%])?)?)*/.source+/%($|[^0-9a-fA-F]|[0-9a-fA-F]($|[^0-9a-fA-F]))/.source,"g"),u=/%([a-f]|[0-9a-fA-F][a-f])/g,O=/^(https?|ftp|file|chrome-extension):$/i,P=function(xc){xc=String(xc);xc=xc.replace(ca,function(Dc){try{return encodeURIComponent(Dc)}catch(sd){return encodeURIComponent(Dc.replace(/^[^%]+$/g,
"\ufffd"))}}).replace(ma,function(Dc){return Dc.replace(/%/g,"%25")}).replace(u,function(Dc){return Dc.toUpperCase()});xc=xc.match(wa)||[];var Bc=Ab(),Rc=function(Dc){return Dc.replace(/\\/g,"%5C").replace(/\^/g,"%5E").replace(/`/g,"%60").replace(/\{/g,"%7B").replace(/\|/g,"%7C").replace(/\}/g,"%7D")},Ec=!!(xc[1]||"").match(O);Bc.B=Rc((xc[1]||"")+(xc[2]||"")+(xc[3]||(xc[2]&&Ec?"/":"")));Ec=function(Dc){return Rc(Dc.replace(/\?/g,"%3F").replace(/#/g,"%23"))};Bc.query=xc[5]?[Ec(xc[5])]:[];Bc.j=xc[7]?
[Ec(xc[7])]:[];return Bc},fa=function(xc){return xc.B+(0<xc.query.length?"?"+xc.query.join("&"):"")+(0<xc.j.length?"#"+xc.j.join("&"):"")},Qa=function(xc,Bc){var Rc=[];if(xc)for(var Ec in xc)if(Fa(xc,Ec)&&null!=xc[Ec]){var Dc=Bc?Bc(xc[Ec]):xc[Ec];Rc.push(encodeURIComponent(Ec)+"="+encodeURIComponent(Dc))}return Rc},Ua=function(xc,Bc,Rc,Ec){xc=P(xc);xc.query.push.apply(xc.query,Qa(Bc,Ec));xc.j.push.apply(xc.j,Qa(Rc,Ec));return fa(xc)},Gb=new RegExp(/\/?\??#?/.source+"("+/[\/?#]/i.source+"|"+/[\uD800-\uDBFF]/i.source+
"|"+/%[c-f][0-9a-f](%[89ab][0-9a-f]){0,2}(%[89ab]?)?/i.source+"|"+/%[0-9a-f]?/i.source+")$","i"),ta=function(xc,Bc){var Rc=P(Bc);Bc=Rc.B;Rc.query.length&&(Bc+="?"+Rc.query.join(""));Rc.j.length&&(Bc+="#"+Rc.j.join(""));var Ec="";2E3<Bc.length&&(Ec=Bc,Bc=Bc.substr(0,2E3),Bc=Bc.replace(Gb,""),Ec=Ec.substr(Bc.length));var Dc=xc.createElement("div");xc=xc.createElement("a");Rc=P(Bc);Bc=Rc.B;Rc.query.length&&(Bc+="?"+Rc.query.join(""));Rc.j.length&&(Bc+="#"+Rc.j.join(""));Bc=new ab(Bc,Bd);Od(xc,"HTMLAnchorElement");
Bc=Bc instanceof ab?Bc:Ta(Bc);xc.href=Ob(Bc);Dc.appendChild(xc);Bc=Dc.innerHTML;Rc=new va(tb,"Assignment to self.");Db(Wa(Rc),"must provide justification");Lb(!/^[\s\xa0]*$/.test(Wa(Rc)),"must provide non-empty justification");void 0===N&&(N=qb("gapi#html"));Bc=(Rc=N)?Rc.createHTML(Bc):Bc;Bc=new fe(Bc,Eb);if(void 0!==Dc.tagName){if("script"===Dc.tagName.toLowerCase())throw Error("Use setTextContent with a SafeScript.");if("style"===Dc.tagName.toLowerCase())throw Error("Use setTextContent with a SafeStyleSheet.");
}Bc instanceof fe&&Bc.constructor===fe?Bc=Bc.O:(Kb("expected object of type SafeHtml, got '"+Bc+"' of type "+R(Bc)),Bc="type_error:SafeHtml");Dc.innerHTML=Bc;Bc=String(Dc.firstChild.href);Dc.parentNode&&Dc.parentNode.removeChild(Dc);Rc=P(Bc+Ec);Ec=Rc.B;Rc.query.length&&(Ec+="?"+Rc.query.join(""));Rc.j.length&&(Ec+="#"+Rc.j.join(""));return Ec},mc=/^https?:\/\/[^\/%\\?#\s]+\/[^\s]*$/i,pc=function(xc,Bc,Rc,Ec){if(Td[Rc+"EventListener"])Td[Rc+"EventListener"](xc,Bc,!1);else if(Td[Ec+"tachEvent"])Td[Ec+
"tachEvent"]("on"+xc,Bc)},zd=function(){var xc=gb.readyState;return"complete"===xc||"interactive"===xc&&-1==navigator.userAgent.indexOf("MSIE")},Pd=function(xc){var Bc=Ho;if(!zd())try{Bc()}catch(Rc){}bd(xc)},bd=function(xc){if(zd())xc();else{var Bc=!1,Rc=function(){if(!Bc)return Bc=!0,xc.apply(this,arguments)};Td.addEventListener?(Td.addEventListener("load",Rc,!1),Td.addEventListener("DOMContentLoaded",Rc,!1)):Td.attachEvent&&(Td.attachEvent("onreadystatechange",function(){zd()&&Rc.apply(this,arguments)}),
Td.attachEvent("onload",Rc))}},Yd=function(xc){for(;xc.firstChild;)xc.removeChild(xc.firstChild)},le={button:!0,div:!0,span:!0},Be={};Be=ob(Td,"___jsl",Ab());ob(Be,"I",0);ob(Be,"hel",10);var Ne=function(xc){return Be.dpo?Be.h:da(xc,"jsh",Be.h)},Re=function(xc){var Bc=ob(Be,"sws",[]);Bc.push.apply(Bc,xc)},nf=function(xc){return ob(Be,"watt",Ab())[xc]},af=function(xc){var Bc=ob(Be,"PQ",[]);Be.PQ=[];var Rc=Bc.length;if(0===Rc)xc();else for(var Ec=0,Dc=function(){++Ec===Rc&&xc()},sd=0;sd<Rc;sd++)Bc[sd](Dc)},
yf=function(xc){return ob(ob(Be,"H",Ab()),xc,Ab())},Ig=ob(Be,"perf",Ab()),re=ob(Ig,"g",Ab()),Ld=ob(Ig,"i",Ab());ob(Ig,"r",[]);Ab();Ab();var fc=function(xc,Bc,Rc){var Ec=Ig.r;"function"===typeof Ec?Ec(xc,Bc,Rc):Ec.push([xc,Bc,Rc])},wd=function(xc,Bc,Rc){re[xc]=!Bc&&re[xc]||Rc||(new Date).getTime();fc(xc)},Ie=function(xc,Bc,Rc){Bc&&0<Bc.length&&(Bc=ff(Bc),Rc&&0<Rc.length&&(Bc+="___"+ff(Rc)),28<Bc.length&&(Bc=Bc.substr(0,28)+(Bc.length-28)),Rc=Bc,Bc=ob(Ld,"_p",Ab()),ob(Bc,Rc,Ab())[xc]=(new Date).getTime(),
fc(xc,"_p",Rc))},ff=function(xc){return xc.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},Pe=Ab(),Gf=[],Vf=function(xc){throw Error("Bad hint: "+xc);};Gf.push(["jsl",function(xc){for(var Bc in xc)if(Fa(xc,Bc)){var Rc=xc[Bc];"object"==Tc(Rc)?Be[Bc]=ob(Be,Bc,[]).concat(Rc):ob(Be,Bc,Rc)}if(Bc=xc.u)xc=ob(Be,"us",[]),xc.push(Bc),(Bc=/^https:(.*)$/.exec(Bc))&&xc.push("http:"+Bc[1])}]);var cd=/^(\/[a-zA-Z0-9_\-]+)+$/,Y=[/\/amp\//,/\/amp$/,/^\/amp$/],Ba=/^[a-zA-Z0-9\-_\.,!]+$/,mb=/^gapi\.loaded_[0-9]+$/,
Ca=/^[a-zA-Z0-9,._-]+$/,Cc=function(xc,Bc,Rc,Ec,Dc){var sd=xc.split(";"),ce=sd.shift(),pe=Pe[ce],He=null;pe?He=pe(sd,Bc,Rc,Ec):Vf("no hint processor for: "+ce);He||Vf("failed to generate load url");Bc=He;Rc=Bc.match(We);(Ec=Bc.match(qd))&&1===Ec.length&&xe.test(Bc)&&Rc&&1===Rc.length||Vf("failed sanity: "+xc);try{xc="?";if(Dc&&0<Dc.length){Rc=Bc=0;for(Ec={};Rc<Dc.length;){var Ze=Dc[Rc++];sd=void 0;sd=Ja(Ze)?"o"+(Object.prototype.hasOwnProperty.call(Ze,Ga)&&Ze[Ga]||(Ze[Ga]=++sa)):Tc(Ze).charAt(0)+
Ze;Object.prototype.hasOwnProperty.call(Ec,sd)||(Ec[sd]=!0,Dc[Bc++]=Ze)}Dc.length=Bc;He=He+"?le="+Dc.join(",");xc="&"}if(Be.rol){var fg=Be.ol;fg&&fg.length&&(He=""+He+xc+"ol="+fg.length)}}catch(gg){}return He},Fc=function(xc,Bc,Rc,Ec){xc=ud(xc);mb.test(Rc)||Vf("invalid_callback");Bc=ke(Bc);Ec=Ec&&Ec.length?ke(Ec):null;var Dc=function(sd){return encodeURIComponent(sd).replace(/%2C/g,",")};return[encodeURIComponent(xc.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",Dc(xc.version),"/m=",Dc(Bc),
Ec?"/exm="+Dc(Ec):"","/rt=j/sv=1/d=1/ed=1",xc.U?"/am="+Dc(xc.U):"",xc.aa?"/rs="+Dc(xc.aa):"",xc.ca?"/t="+Dc(xc.ca):"","/cb=",Dc(Rc)].join("")},ud=function(xc){"/"!==xc.charAt(0)&&Vf("relative path");for(var Bc=xc.substring(1).split("/"),Rc=[];Bc.length;){xc=Bc.shift();if(!xc.length||0==xc.indexOf("."))Vf("empty/relative directory");else if(0<xc.indexOf("=")){Bc.unshift(xc);break}Rc.push(xc)}xc={};for(var Ec=0,Dc=Bc.length;Ec<Dc;++Ec){var sd=Bc[Ec].split("="),ce=decodeURIComponent(sd[0]),pe=decodeURIComponent(sd[1]);
2==sd.length&&ce&&pe&&(xc[ce]=xc[ce]||pe)}Bc="/"+Rc.join("/");cd.test(Bc)||Vf("invalid_prefix");Rc=0;for(Ec=Y.length;Rc<Ec;++Rc)Y[Rc].test(Bc)&&Vf("invalid_prefix");Rc=ze(xc,"k",!0);Ec=ze(xc,"am");Dc=ze(xc,"rs");xc=ze(xc,"t");return{pathPrefix:Bc,version:Rc,U:Ec,aa:Dc,ca:xc}},ke=function(xc){for(var Bc=[],Rc=0,Ec=xc.length;Rc<Ec;++Rc){var Dc=xc[Rc].replace(/\./g,"_").replace(/-/g,"_");Ca.test(Dc)&&Bc.push(Dc)}return Bc.join(",")},ze=function(xc,Bc,Rc){xc=xc[Bc];!xc&&Rc&&Vf("missing: "+Bc);if(xc){if(Ba.test(xc))return xc;
Vf("invalid: "+Bc)}return null},xe=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,qd=/\/cb=/g,We=/\/\//g;Pe.m=function(xc,Bc,Rc,Ec){(xc=xc[0])||Vf("missing_hint");return"https://apis.google.com"+Fc(xc,Bc,Rc,Ec)};var of=decodeURI("%73cript"),Ef=/^[-+_0-9\/A-Za-z]+={0,2}$/,v=function(xc,Bc){for(var Rc=[],Ec=0;Ec<xc.length;++Ec){var Dc=xc[Ec];Dc&&0>ac.call(Bc,Dc)&&Rc.push(Dc)}return Rc},na=function(){var xc=Be.nonce;return void 0!==xc?xc&&xc===String(xc)&&xc.match(Ef)?xc:
Be.nonce=null:gb.querySelector?(xc=gb.querySelector("script[nonce]"))?(xc=xc.nonce||xc.getAttribute("nonce")||"",xc&&xc===String(xc)&&xc.match(Ef)?Be.nonce=xc:Be.nonce=null):null:null},Hc=function(xc){if("loading"!=gb.readyState)Nc(xc);else{var Bc=na(),Rc="";null!==Bc&&(Rc=' nonce="'+Bc+'"');xc="<"+of+' src="'+encodeURI(xc)+'"'+Rc+"></"+of+">";gb.write(pf?pf.createHTML(xc):xc)}},Nc=function(xc){var Bc=gb.createElement(of);Bc.setAttribute("src",pf?pf.createScriptURL(xc):xc);xc=na();null!==xc&&Bc.setAttribute("nonce",
xc);Bc.async="true";(xc=gb.getElementsByTagName(of)[0])?xc.parentNode.insertBefore(Bc,xc):(gb.head||gb.body||gb.documentElement).appendChild(Bc)},Ud=function(xc,Bc,Rc){mg(function(){var Ec=Bc===Ne(Vc.href)?ob(Pb,"_",Ab()):Ab();Ec=ob(yf(Bc),"_",Ec);xc(Ec)},Rc)},ue=function(xc,Bc){var Rc=Bc||{};"function"==typeof Bc&&(Rc={},Rc.callback=Bc);var Ec=(Bc=Rc)&&Bc._c;if(Ec)for(var Dc=0;Dc<Gf.length;Dc++){var sd=Gf[Dc][0],ce=Gf[Dc][1];ce&&Fa(Ec,sd)&&ce(Ec[sd],xc,Bc)}Bc=[];xc?Bc=xc.split(":"):Rc.features&&
(Bc=Rc.features);if(!(xc=Rc.h)&&(xc=Ne(Vc.href),!xc))throw Error("Bad hint: !hint");bf(Bc||[],Rc,xc)},bf=function(xc,Bc,Rc){xc=ae(xc)||[];var Ec=Bc.callback,Dc=Bc.config,sd=Bc.timeout,ce=Bc.ontimeout,pe=Bc.onerror,He=void 0;"function"==typeof pe&&(He=pe);var Ze=null,fg=!1;if(sd&&!ce||!sd&&ce)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";pe=ob(yf(Rc),"r",[]).sort();var gg=ob(yf(Rc),"L",[]).sort(),Og=Be.le,hh=[].concat(pe),vg=function(pl,Qk){if(fg)return 0;Td.clearTimeout(Ze);
gg.push.apply(gg,ph);var sm=((Pb||{}).config||{}).update;sm?sm(Dc):Dc&&ob(Be,"cu",[]).push(Dc);if(Qk){Ie("me0",pl,hh);try{Ud(Qk,Rc,He)}finally{Ie("me1",pl,hh)}}return 1};0<sd&&(Ze=Td.setTimeout(function(){fg=!0;ce()},sd));var ph=v(xc,gg);if(ph.length){ph=v(xc,pe);var qj=ob(Be,"CP",[]),fj=qj.length;qj[fj]=function(pl){if(!pl)return 0;Ie("ml1",ph,hh);var Qk=function(Mo){qj[fj]=null;vg(ph,pl)&&af(function(){Ec&&Ec();Mo()})},sm=function(){var Mo=qj[fj+1];Mo&&Mo()};0<fj&&qj[fj-1]?qj[fj]=function(){Qk(sm)}:
Qk(sm)};if(ph.length){var Li="loaded_"+Be.I++;Pb[Li]=function(pl){qj[fj](pl);Pb[Li]=null};xc=Cc(Rc,ph,"gapi."+Li,pe,Og);pe.push.apply(pe,ph);Ie("ml0",ph,hh);Bc.sync||Td.___gapisync?Hc(xc):Nc(xc)}else qj[fj](vb)}else vg(ph)&&Ec&&Ec()},pf=qb("gapi#gapi"),mg=function(xc,Bc){if(Be.hee&&0<Be.hel)try{return xc()}catch(Rc){Bc&&Bc(Rc),Be.hel--,ue("debug_error",function(){try{window.___jsl.hefn(Rc)}catch(Ec){throw Rc;}})}else try{return xc()}catch(Rc){throw Bc&&Bc(Rc),Rc;}},Zd=Pb.load;Zd&&ob(Be,"ol",[]).push(Zd);
Pb.load=function(xc,Bc){return mg(function(){return ue(xc,Bc)})};var tg=function(xc){var Bc=window.___jsl=window.___jsl||{};Bc[xc]=Bc[xc]||[];return Bc[xc]},Sg=function(xc){var Bc=window.___jsl=window.___jsl||{};Bc.cfg=!xc&&Bc.cfg||{};return Bc.cfg},oh=function(xc){return"object"===Tc(xc)&&/\[native code\]/.test(xc.push)},Hf=function Dc(Bc,Rc,Ec){if(Rc&&"object"===Tc(Rc))for(var sd in Rc)!Object.prototype.hasOwnProperty.call(Rc,sd)||Ec&&"___goc"===sd&&"undefined"===typeof Rc[sd]||(Bc[sd]&&Rc[sd]&&
"object"===Tc(Bc[sd])&&"object"===Tc(Rc[sd])&&!oh(Bc[sd])&&!oh(Rc[sd])?Dc(Bc[sd],Rc[sd]):Rc[sd]&&"object"===Tc(Rc[sd])?(Bc[sd]=oh(Rc[sd])?[]:{},Dc(Bc[sd],Rc[sd])):Bc[sd]=Rc[sd])},Bh=function(Bc){if(Bc&&!/^\s+$/.test(Bc)){for(;0==Bc.charCodeAt(Bc.length-1);)Bc=Bc.substring(0,Bc.length-1);try{var Rc=window.JSON.parse(Bc)}catch(Ec){}if("object"===Tc(Rc))return Rc;try{Rc=(new Function("return ("+Bc+"\n)"))()}catch(Ec){}if("object"===Tc(Rc))return Rc;try{Rc=(new Function("return ({"+Bc+"\n})"))()}catch(Ec){}return"object"===
Tc(Rc)?Rc:{}}},ah=function(Bc,Rc){var Ec={___goc:void 0};Bc.length&&Bc[Bc.length-1]&&Object.hasOwnProperty.call(Bc[Bc.length-1],"___goc")&&"undefined"===typeof Bc[Bc.length-1].___goc&&(Ec=Bc.pop());Hf(Ec,Rc);Bc.push(Ec)},th=function(Bc){Sg(!0);var Rc=window.___gcfg,Ec=tg("cu"),Dc=window.___gu;Rc&&Rc!==Dc&&(ah(Ec,Rc),window.___gu=Rc);Rc=tg("cu");var sd=document.scripts||document.getElementsByTagName("script")||[];Dc=[];var ce=[];ce.push.apply(ce,tg("us"));for(var pe=0;pe<sd.length;++pe)for(var He=
sd[pe],Ze=0;Ze<ce.length;++Ze)He.src&&0==He.src.indexOf(ce[Ze])&&Dc.push(He);0==Dc.length&&0<sd.length&&sd[sd.length-1].src&&Dc.push(sd[sd.length-1]);for(sd=0;sd<Dc.length;++sd)Dc[sd].getAttribute("gapi_processed")||(Dc[sd].setAttribute("gapi_processed",!0),(ce=Dc[sd])?(pe=ce.nodeType,ce=3==pe||4==pe?ce.nodeValue:ce.textContent||""):ce=void 0,(ce=Bh(ce))&&Rc.push(ce));Bc&&ah(Ec,Bc);Dc=tg("cd");Bc=0;for(Rc=Dc.length;Bc<Rc;++Bc)Hf(Sg(),Dc[Bc],!0);Dc=tg("ci");Bc=0;for(Rc=Dc.length;Bc<Rc;++Bc)Hf(Sg(),
Dc[Bc],!0);Bc=0;for(Rc=Ec.length;Bc<Rc;++Bc)Hf(Sg(),Ec[Bc],!0)},Xg=function(Bc){var Rc=Sg();if(!Bc)return Rc;Bc=Bc.split("/");for(var Ec=0,Dc=Bc.length;Rc&&"object"===Tc(Rc)&&Ec<Dc;++Ec)Rc=Rc[Bc[Ec]];return Ec===Bc.length&&void 0!==Rc?Rc:void 0},ti=function(Bc,Rc){var Ec;if("string"===typeof Bc){var Dc=Ec={};Bc=Bc.split("/");for(var sd=0,ce=Bc.length;sd<ce-1;++sd)Dc=Dc[Bc[sd]]={};Dc[Bc[sd]]=Rc}else Ec=Bc;th(Ec)},Af=function(){var Bc=window.__GOOGLEAPIS;Bc&&(Bc.googleapis&&!Bc["googleapis.config"]&&
(Bc["googleapis.config"]=Bc.googleapis),ob(Be,"ci",[]).push(Bc),window.__GOOGLEAPIS=void 0)},vh={callback:1,clientid:1,cookiepolicy:1,openidrealm:-1,includegrantedscopes:-1,requestvisibleactions:1,scope:1},Md=!1,Bf=Ab(),xg=function(){if(!Md){for(var Bc=document.getElementsByTagName("meta"),Rc=0;Rc<Bc.length;++Rc){var Ec=Bc[Rc].name.toLowerCase();if(0==Ec.lastIndexOf("google-signin-",0)){Ec=Ec.substring(14);var Dc=Bc[Rc].content;vh[Ec]&&Dc&&(Bf[Ec]=Dc)}}if(window.self!==window.top){Bc=document.location.toString();
for(var sd in vh)0<vh[sd]&&(Rc=da(Bc,sd,""))&&(Bf[sd]=Rc)}Md=!0}sd=Ab();Ka(Bf,sd);return sd},df=function(Bc){return!!(Bc.clientid&&Bc.scope&&Bc.callback)},y=function(){this.i=window.console};y.prototype.log=function(Bc){this.i&&this.i.log&&this.i.log(Bc)};y.prototype.error=function(Bc){this.i&&(this.i.error?this.i.error(Bc):this.i.log&&this.i.log(Bc))};y.prototype.warn=function(Bc){this.i&&(this.i.warn?this.i.warn(Bc):this.i.log&&this.i.log(Bc))};y.prototype.debug=function(){};var A=new y,H=function(){return!!Be.oa},
Z=function(){},M=ob(Be,"rw",Ab()),qa=function(Bc){for(var Rc in M)Bc(M[Rc])},Pa=function(Bc,Rc){(Bc=M[Bc])&&Bc.state<Rc&&(Bc.state=Rc)},Yb=function(Bc){var Rc=window.___jsl=window.___jsl||{};Rc.cfg=Rc.cfg||{};Rc=Rc.cfg;if(!Bc)return Rc;Bc=Bc.split("/");for(var Ec=0,Dc=Bc.length;Rc&&"object"===Tc(Rc)&&Ec<Dc;++Ec)Rc=Rc[Bc[Ec]];return Ec===Bc.length&&void 0!==Rc?Rc:void 0},$b=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/u\/(\d)\//,zc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/b\/(\d{10,21})\//,
id=function(){var Bc=Yb("googleapis.config/sessionIndex");"string"===typeof Bc&&254<Bc.length&&(Bc=null);null==Bc&&(Bc=window.__X_GOOG_AUTHUSER);"string"===typeof Bc&&254<Bc.length&&(Bc=null);if(null==Bc){var Rc=window.google;Rc&&(Bc=Rc.authuser)}"string"===typeof Bc&&254<Bc.length&&(Bc=null);null==Bc&&(Rc=window.location.href,Bc=da(Rc,"authuser")||null,null==Bc&&(Bc=(Bc=Rc.match($b))?Bc[1]:null));if(null==Bc)return null;Bc=String(Bc);254<Bc.length&&(Bc=null);return Bc},jd=function(){var Bc=Yb("googleapis.config/sessionDelegate");
"string"===typeof Bc&&21<Bc.length&&(Bc=null);null==Bc&&(Bc=(Bc=window.location.href.match(zc))?Bc[1]:null);if(null==Bc)return null;Bc=String(Bc);21<Bc.length&&(Bc=null);return Bc},kd,be,te=void 0,Ce=function(Bc){try{return Wb.JSON.parse.call(Wb.JSON,Bc)}catch(Rc){return!1}},me=function(Bc){return Object.prototype.toString.call(Bc)},ve=me(0),qg=me(new Date(0)),Eg=me(!0),Wf=me(""),$f=me({}),Lf=me([]),jf=function Dc(Rc,Ec){if(Ec)for(var sd=0,ce=Ec.length;sd<ce;++sd)if(Rc===Ec[sd])throw new TypeError("Converting circular structure to JSON");
ce=Tc(Rc);if("undefined"!==ce){sd=Array.prototype.slice.call(Ec||[],0);sd[sd.length]=Rc;Ec=[];var pe=me(Rc);if(null!=Rc&&"function"===typeof Rc.toJSON&&(Object.prototype.hasOwnProperty.call(Rc,"toJSON")||(pe!==Lf||Rc.constructor!==Array&&Rc.constructor!==Object)&&(pe!==$f||Rc.constructor!==Array&&Rc.constructor!==Object)&&pe!==Wf&&pe!==ve&&pe!==Eg&&pe!==qg))return Dc(Rc.toJSON.call(Rc),sd);if(null==Rc)Ec[Ec.length]="null";else if(pe===ve)Rc=Number(Rc),isNaN(Rc)||isNaN(Rc-Rc)?Rc="null":-0===Rc&&0>
1/Rc&&(Rc="-0"),Ec[Ec.length]=String(Rc);else if(pe===Eg)Ec[Ec.length]=String(!!Number(Rc));else{if(pe===qg)return Dc(Rc.toISOString.call(Rc),sd);if(pe===Lf&&me(Rc.length)===ve){Ec[Ec.length]="[";var He=0;for(ce=Number(Rc.length)>>0;He<ce;++He)He&&(Ec[Ec.length]=","),Ec[Ec.length]=Dc(Rc[He],sd)||"null";Ec[Ec.length]="]"}else if(pe==Wf&&me(Rc.length)===ve){Ec[Ec.length]='"';He=0;for(sd=Number(Rc.length)>>0;He<sd;++He)ce=String.prototype.charAt.call(Rc,He),pe=String.prototype.charCodeAt.call(Rc,He),
Ec[Ec.length]="\b"===ce?"\\b":"\f"===ce?"\\f":"\n"===ce?"\\n":"\r"===ce?"\\r":"\t"===ce?"\\t":"\\"===ce||'"'===ce?"\\"+ce:31>=pe?"\\u"+(pe+65536).toString(16).substr(1):32<=pe&&65535>=pe?ce:"\ufffd";Ec[Ec.length]='"'}else if("object"===ce){Ec[Ec.length]="{";ce=0;for(He in Rc)Object.prototype.hasOwnProperty.call(Rc,He)&&(pe=Dc(Rc[He],sd),void 0!==pe&&(ce++&&(Ec[Ec.length]=","),Ec[Ec.length]=Dc(He),Ec[Ec.length]=":",Ec[Ec.length]=pe));Ec[Ec.length]="}"}else return}return Ec.join("")}},wh=/[\0-\x07\x0b\x0e-\x1f]/,
yg=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*[\0-\x1f]/,Gg=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\[^\\\/"bfnrtu]/,zf=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\u([0-9a-fA-F]{0,3}[^0-9a-fA-F])/,Kh=/"([^\0-\x1f\\"]|\\[\\\/"bfnrt]|\\u[0-9a-fA-F]{4})*"/g,cg=/-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][-+]?[0-9]+)?/g,Ag=/[ \t\n\r]+/g,Uf=/[^"]:/,Lh=/""/g,Mj=/true|false|null/g,Dl=/00/,El=/[\{]([^0\}]|0[^:])/,pj=/(^|\[)[,:]|[,:](\]|\}|[,:]|$)/,Dk=/[^\[,:][\[\{]/,pk=/^(\{|\}|\[|\]|,|:|0)+/,km=/\u2028/g,
Pm=/\u2029/g,lm=function(Rc){Rc=String(Rc);if(wh.test(Rc)||yg.test(Rc)||Gg.test(Rc)||zf.test(Rc))return!1;var Ec=Rc.replace(Kh,'""');Ec=Ec.replace(cg,"0");Ec=Ec.replace(Ag,"");if(Uf.test(Ec))return!1;Ec=Ec.replace(Lh,"0");Ec=Ec.replace(Mj,"0");if(Dl.test(Ec)||El.test(Ec)||pj.test(Ec)||Dk.test(Ec)||!Ec||Ec.replace(pk,""))return!1;Rc=Rc.replace(km,"\\u2028").replace(Pm,"\\u2029");Ec=void 0;try{Ec=te?[Ce(Rc)]:eval("(function (var_args) {\n  return Array.prototype.slice.call(arguments, 0);\n})(\n"+Rc+
"\n)")}catch(Dc){return!1}return Ec&&1===Ec.length?Ec[0]:!1},Qm=function(){var Rc=((Wb.document||{}).scripts||[]).length;if((void 0===kd||void 0===te||be!==Rc)&&-1!==be){kd=te=!1;be=-1;try{try{te=!!Wb.JSON&&'{"a":[3,true,"1970-01-01T00:00:00.000Z"]}'===Wb.JSON.stringify.call(Wb.JSON,{a:[3,!0,new Date(0)],c:function(){}})&&!0===Ce("true")&&3===Ce('[{"a":3}]')[0].a}catch(Ec){}kd=te&&!Ce("[00]")&&!Ce('"\u0007"')&&!Ce('"\\0"')&&!Ce('"\\v"')}finally{be=Rc}}},mm=function(Rc){if(-1===be)return!1;Qm();return(kd?
Ce:lm)(Rc)},Pl=function(Rc){if(-1!==be)return Qm(),te?Wb.JSON.stringify.call(Wb.JSON,Rc):jf(Rc)},Fn=!Date.prototype.toISOString||"function"!==typeof Date.prototype.toISOString||"1970-01-01T00:00:00.000Z"!==(new Date(0)).toISOString(),Gn=function(){var Rc=Date.prototype.getUTCFullYear.call(this);return[0>Rc?"-"+String(1E6-Rc).substr(1):9999>=Rc?String(1E4+Rc).substr(1):"+"+String(1E6+Rc).substr(1),"-",String(101+Date.prototype.getUTCMonth.call(this)).substr(1),"-",String(100+Date.prototype.getUTCDate.call(this)).substr(1),
"T",String(100+Date.prototype.getUTCHours.call(this)).substr(1),":",String(100+Date.prototype.getUTCMinutes.call(this)).substr(1),":",String(100+Date.prototype.getUTCSeconds.call(this)).substr(1),".",String(1E3+Date.prototype.getUTCMilliseconds.call(this)).substr(1),"Z"].join("")};Date.prototype.toISOString=Fn?Gn:Date.prototype.toISOString;var dl=function(){this.blockSize=64;this.g=[];this.L=[];this.fa=[];this.H=[];this.H[0]=128;for(var Rc=1;Rc<this.blockSize;++Rc)this.H[Rc]=0;this.J=this.v=0;this.reset()};
aa(dl,function(){this.blockSize=-1});dl.prototype.reset=function(){this.g[0]=1732584193;this.g[1]=4023233417;this.g[2]=2562383102;this.g[3]=271733878;this.g[4]=3285377520;this.J=this.v=0};var el=function(Rc,Ec,Dc){Dc||(Dc=0);var sd=Rc.fa;if("string"===typeof Ec)for(var ce=0;16>ce;ce++)sd[ce]=Ec.charCodeAt(Dc)<<24|Ec.charCodeAt(Dc+1)<<16|Ec.charCodeAt(Dc+2)<<8|Ec.charCodeAt(Dc+3),Dc+=4;else for(ce=0;16>ce;ce++)sd[ce]=Ec[Dc]<<24|Ec[Dc+1]<<16|Ec[Dc+2]<<8|Ec[Dc+3],Dc+=4;for(ce=16;80>ce;ce++){var pe=sd[ce-
3]^sd[ce-8]^sd[ce-14]^sd[ce-16];sd[ce]=(pe<<1|pe>>>31)&4294967295}Ec=Rc.g[0];Dc=Rc.g[1];var He=Rc.g[2],Ze=Rc.g[3],fg=Rc.g[4];for(ce=0;80>ce;ce++){if(40>ce)if(20>ce){pe=Ze^Dc&(He^Ze);var gg=1518500249}else pe=Dc^He^Ze,gg=1859775393;else 60>ce?(pe=Dc&He|Ze&(Dc|He),gg=2400959708):(pe=Dc^He^Ze,gg=3395469782);pe=(Ec<<5|Ec>>>27)+pe+fg+gg+sd[ce]&4294967295;fg=Ze;Ze=He;He=(Dc<<30|Dc>>>2)&4294967295;Dc=Ec;Ec=pe}Rc.g[0]=Rc.g[0]+Ec&4294967295;Rc.g[1]=Rc.g[1]+Dc&4294967295;Rc.g[2]=Rc.g[2]+He&4294967295;Rc.g[3]=
Rc.g[3]+Ze&4294967295;Rc.g[4]=Rc.g[4]+fg&4294967295};dl.prototype.update=function(Rc,Ec){if(null!=Rc){void 0===Ec&&(Ec=Rc.length);for(var Dc=Ec-this.blockSize,sd=0,ce=this.L,pe=this.v;sd<Ec;){if(0==pe)for(;sd<=Dc;)el(this,Rc,sd),sd+=this.blockSize;if("string"===typeof Rc)for(;sd<Ec;){if(ce[pe]=Rc.charCodeAt(sd),++pe,++sd,pe==this.blockSize){el(this,ce);pe=0;break}}else for(;sd<Ec;)if(ce[pe]=Rc[sd],++pe,++sd,pe==this.blockSize){el(this,ce);pe=0;break}}this.v=pe;this.J+=Ec}};dl.prototype.digest=function(){var Rc=
[],Ec=8*this.J;56>this.v?this.update(this.H,56-this.v):this.update(this.H,this.blockSize-(this.v-56));for(var Dc=this.blockSize-1;56<=Dc;Dc--)this.L[Dc]=Ec&255,Ec/=256;el(this,this.L);for(Dc=Ec=0;5>Dc;Dc++)for(var sd=24;0<=sd;sd-=8)Rc[Ec]=this.g[Dc]>>sd&255,++Ec;return Rc};var nm=function(){this.R=new dl};nm.prototype.reset=function(){this.R.reset()};var ol=Td.crypto,om=!1,fl=0,Hn=0,pm=1,qm=0,Ql="",Rl=function Dc(Ec){Ec=Ec||Td.event;var sd=Ec.screenX+Ec.clientX<<16;sd+=Ec.screenY+Ec.clientY;sd*=(new Date).getTime()%
1E6;pm=pm*sd%qm;0<fl&&++Hn==fl&&pc("mousemove",Dc,"remove","de")},Rd=function(Ec){var Dc=new nm;Ec=unescape(encodeURIComponent(Ec));for(var sd=[],ce=0,pe=Ec.length;ce<pe;++ce)sd.push(Ec.charCodeAt(ce));Dc.R.update(sd);Dc=Dc.R.digest();Ec="";for(sd=0;sd<Dc.length;sd++)Ec+="0123456789ABCDEF".charAt(Math.floor(Dc[sd]/16))+"0123456789ABCDEF".charAt(Dc[sd]%16);return Ec};(om=!!ol&&"function"==typeof ol.getRandomValues)||(qm=1E6*(screen.width*screen.width+screen.height),Ql=Rd(gb.cookie+"|"+gb.location+
"|"+(new Date).getTime()+"|"+Math.random()),fl=Yb("random/maxObserveMousemove")||0,0!=fl&&pc("mousemove",Rl,"add","at"));var Je=function(){var Ec=Be.onl;if(!Ec){Ec=Ab();Be.onl=Ec;var Dc=Ab();Ec.e=function(sd){var ce=Dc[sd];ce&&(delete Dc[sd],ce())};Ec.a=function(sd,ce){Dc[sd]=ce};Ec.r=function(sd){delete Dc[sd]}}return Ec},Ve=function(Ec,Dc){Dc=Dc.onload;return"function"===typeof Dc?(Je().a(Ec,Dc),Dc):null},lf=function(Ec){C(/^\w+$/.test(Ec),"Unsupported id - "+Ec);return'onload="window.___jsl.onl.e(&#34;'+
Ec+'&#34;)"'},fh=function(Ec){Je().r(Ec)},Wh={allowtransparency:"true",frameborder:"0",hspace:"0",marginheight:"0",marginwidth:"0",scrolling:"no",style:"",tabindex:"0",vspace:"0",width:"100%"},ki={allowtransparency:!0,onload:!0},qk=0,Nj=function(Ec){C(!Ec||mc.test(Ec),"Illegal url for new iframe - "+Ec)},kj=function(Ec,Dc,sd,ce,pe){Nj(sd.src);var He,Ze=Ve(ce,sd),fg=Ze?lf(ce):"";try{document.all&&(He=Ec.createElement('<iframe frameborder="'+ua(String(sd.frameborder))+'" scrolling="'+ua(String(sd.scrolling))+
'" '+fg+' name="'+ua(String(sd.name))+'"/>'))}catch(Og){}finally{He||(He=(Ec?new Dd(rf(Ec)):Vb||(Vb=new Dd)).ha("IFRAME"),Ze&&(He.onload=function(){He.onload=null;Ze.call(this)},fh(ce)))}He.setAttribute("ng-non-bindable","");for(var gg in sd)Ec=sd[gg],"style"===gg&&"object"===Tc(Ec)?Ka(Ec,He.style):ki[gg]||He.setAttribute(gg,String(Ec));(gg=pe&&pe.beforeNode||null)||pe&&pe.dontclear||Yd(Dc);Dc.insertBefore(He,gg);He=gg?gg.previousSibling:Dc.lastChild;sd.allowtransparency&&(He.allowTransparency=!0);
return He},dk=/^:[\w]+$/,Tj=/:([a-zA-Z_]+):/g,Rm=function(){var Ec=id()||"0",Dc=jd(),sd=id()||Ec,ce=jd(),pe="";sd&&(pe+="u/"+encodeURIComponent(String(sd))+"/");ce&&(pe+="b/"+encodeURIComponent(String(ce))+"/");sd=pe||null;(pe=(ce=!1===Yb("isLoggedIn"))?"_/im/":"")&&(sd="");var He=Yb("iframes/:socialhost:"),Ze=Yb("iframes/:im_socialhost:");return{socialhost:He,ctx_socialhost:ce?Ze:He,session_index:Ec,session_delegate:Dc,session_prefix:sd,im_prefix:pe}},up=function(Ec,Dc){return Rm()[Dc]||""},Jq=function(Ec){return function(Dc,
sd){return Ec?Rm()[sd]||Ec[sd]||"":Rm()[sd]||""}},In=function(Ec){var Dc;Ec.match(/^https?%3A/i)&&(Dc=decodeURIComponent(Ec));return ta(document,Dc?Dc:Ec)},Eo=function(Ec){Ec=Ec||"canonical";for(var Dc=document.getElementsByTagName("link"),sd=0,ce=Dc.length;sd<ce;sd++){var pe=Dc[sd],He=pe.getAttribute("rel");if(He&&He.toLowerCase()==Ec&&(pe=pe.getAttribute("href"))&&(pe=In(pe))&&null!=pe.match(/^https?:\/\/[\w\-_\.]+/i))return pe}return window.location.href},Fo={se:"0"},Kq={post:!0},Lq={style:"position:absolute;top:-10000px;width:450px;margin:0px;border-style:none"},
Mq="onPlusOne _ready _close _open _resizeMe _renderstart oncircled drefresh erefresh".split(" "),Jn=ob(Be,"WI",Ab()),vp=function(Ec,Dc,sd){var ce,pe={},He=ce=Ec;"plus"==Ec&&Dc.action&&(ce=Ec+"_"+Dc.action,He=Ec+"/"+Dc.action);(ce=Xg("iframes/"+ce+"/url"))||(ce=":im_socialhost:/:session_prefix::im_prefix:_/widget/render/"+He+"?usegapi=1");for(var Ze in Fo)pe[Ze]=Ze+"/"+(Dc[Ze]||Fo[Ze])+"/";pe=ta(gb,ce.replace(Tj,Jq(pe)));Ze="iframes/"+Ec+"/params/";He={};Ka(Dc,He);(ce=Xg("lang")||Xg("gwidget/lang"))&&
(He.hl=ce);Kq[Ec]||(He.origin=window.location.origin||window.location.protocol+"//"+window.location.host);He.exp=Xg(Ze+"exp");if(Ze=Xg(Ze+"location"))for(ce=0;ce<Ze.length;ce++){var fg=Ze[ce];He[fg]=Td.location[fg]}switch(Ec){case "plus":case "follow":Ze=He.href;ce=Dc.action?void 0:"publisher";Ze=(Ze="string"==typeof Ze?Ze:void 0)?In(Ze):Eo(ce);He.url=Ze;delete He.href;break;case "plusone":Ze=(Ze=Dc.href)?In(Ze):Eo();He.url=Ze;Ze=Dc.db;ce=Xg();null==Ze&&ce&&(Ze=ce.db,null==Ze&&(Ze=ce.gwidget&&ce.gwidget.db));
He.db=Ze||void 0;Ze=Dc.ecp;ce=Xg();null==Ze&&ce&&(Ze=ce.ecp,null==Ze&&(Ze=ce.gwidget&&ce.gwidget.ecp));He.ecp=Ze||void 0;delete He.href;break;case "signin":He.url=Eo()}Be.ILI&&(He.iloader="1");delete He["data-onload"];delete He.rd;for(var gg in Fo)He[gg]&&delete He[gg];He.gsrc=Xg("iframes/:source:");gg=Xg("inline/css");"undefined"!==typeof gg&&0<sd&&gg>=sd&&(He.ic="1");gg=/^#|^fr-/;sd={};for(var Og in He)Fa(He,Og)&&gg.test(Og)&&(sd[Og.replace(gg,"")]=He[Og],delete He[Og]);Og="q"==Xg("iframes/"+Ec+
"/params/si")?He:sd;gg=xg();for(var hh in gg)!Fa(gg,hh)||Fa(He,hh)||Fa(sd,hh)||(Og[hh]=gg[hh]);hh=[].concat(Mq);(Og=Xg("iframes/"+Ec+"/methods"))&&"object"===Tc(Og)&&cc.test(Og.push)&&(hh=hh.concat(Og));for(var vg in Dc)Fa(Dc,vg)&&/^on/.test(vg)&&("plus"!=Ec||"onconnect"!=vg)&&(hh.push(vg),delete He[vg]);delete He.callback;sd._methods=hh.join(",");return Ua(pe,He,sd)},Nq=["style","data-gapiscan"],Kn=function(Ec){for(var Dc=Ab(),sd=0!=Ec.nodeName.toLowerCase().indexOf("g:"),ce=0,pe=Ec.attributes.length;ce<
pe;ce++){var He=Ec.attributes[ce],Ze=He.name,fg=He.value;0<=ac.call(Nq,Ze)||sd&&0!=Ze.indexOf("data-")||"null"===fg||"specified"in He&&!He.specified||(sd&&(Ze=Ze.substr(5)),Dc[Ze.toLowerCase()]=fg)}Ec=Ec.style;(sd=wp(Ec&&Ec.height))&&(Dc.height=String(sd));(Ec=wp(Ec&&Ec.width))&&(Dc.width=String(Ec));return Dc},wp=function(Ec){var Dc=void 0;"number"===typeof Ec?Dc=Ec:"string"===typeof Ec&&(Dc=parseInt(Ec,10));return Dc},Oq=function(){var Ec=Be.drw;qa(function(Dc){if(Ec!==Dc.id&&4!=Dc.state&&"share"!=
Dc.type){var sd=Dc.id,ce=Dc.type,pe=Dc.url;Dc=Dc.userParams;var He=gb.getElementById(sd);if(He){var Ze=vp(ce,Dc,0);Ze?(He=He.parentNode,pe.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")!==Ze.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")&&(Dc.dontclear=!0,Dc.rd=!0,Dc.ri=!0,Dc.type=ce,yp(He,Dc),(ce=M[He.lastChild.id])&&(ce.oid=sd),Pa(sd,4))):delete M[sd]}else delete M[sd]}})},Pq=/(?:^|\s)g-((\S)*)(?:$|\s)/,Qq={plusone:!0,autocomplete:!0,profile:!0,signin:!0,signin2:!0};var Mn=ob(Be,"SW",Ab());var ai=ob(Be,
"SA",Ab());var Sm=ob(Be,"SM",Ab());var xp=ob(Be,"FW",[]);var Rq=null;var Sq=function(Ec,Dc){return("string"===typeof Ec?document.getElementById(Ec):Ec)||Dc},Go=function(Ec,Dc){Tq(void 0,!1,Ec,Dc)},Tq=function(Ec,Dc,sd,ce){wd("ps0",!0);sd=Sq(sd,gb);var pe=gb.documentMode;if(sd.querySelectorAll&&(!pe||8<pe)){pe=ce?[ce]:za(Mn).concat(za(ai)).concat(za(Sm));for(var He=[],Ze=0;Ze<pe.length;Ze++){var fg=pe[Ze];He.push(".g-"+fg,"g\\:"+fg)}pe=sd.querySelectorAll(He.join(","))}else pe=sd.getElementsByTagName("*");
sd=Ab();for(He=0;He<pe.length;He++){var gg=Ze=pe[He];fg=ce;var Og=gg.nodeName.toLowerCase(),hh=void 0;if(gg.getAttribute("data-gapiscan"))fg=null;else{var vg=Og.indexOf("g:");0==vg?hh=Og.substr(2):(vg=(vg=String(gg.className||gg.getAttribute("class")))&&Pq.exec(vg))&&(hh=vg[1]);fg=!hh||!(Mn[hh]||ai[hh]||Sm[hh])||fg&&hh!==fg?null:hh}fg&&(Qq[fg]||0==Ze.nodeName.toLowerCase().indexOf("g:")||0!=za(Kn(Ze)).length)&&(Ze.setAttribute("data-gapiscan",!0),ob(sd,fg,[]).push(Ze))}if(Dc)for(var ph in sd)for(Dc=
sd[ph],ce=0;ce<Dc.length;ce++)Dc[ce].setAttribute("data-onload",!0);for(var qj in sd)xp.push(qj);wd("ps1",!0);if((ph=xp.join(":"))||Ec)try{Pb.load(ph,Ec)}catch(Li){A.log(Li);return}if(Vq(Rq||{}))for(var fj in sd){Ec=sd[fj];qj=0;for(Dc=Ec.length;qj<Dc;qj++)Ec[qj].removeAttribute("data-gapiscan");rm(fj)}else{ce=[];for(fj in sd)for(Ec=sd[fj],qj=0,Dc=Ec.length;qj<Dc;qj++)pe=Ec[qj],Sl(fj,pe,Kn(pe),ce,Dc);Nh(ph,ce)}},Uq=function(Ec){var Dc=ob(Pb,Ec,{});Dc.go||(Dc.go=function(sd){return Go(sd,Ec)},Dc.render=
function(sd,ce){ce=ce||{};ce.type=Ec;return yp(sd,ce)})},Us=function(Ec){Mn[Ec]=!0},Vs=function(Ec){ai[Ec]=!0},Ws=function(Ec){Sm[Ec]=!0},rm=function(Ec,Dc){var sd=nf(Ec);Dc&&sd?(sd(Dc),(sd=Dc.iframeNode)&&sd.setAttribute("data-gapiattached",!0)):Pb.load(Ec,function(){var ce=nf(Ec),pe=Dc&&Dc.iframeNode,He=Dc&&Dc.userParams;pe&&ce?(ce(Dc),pe.setAttribute("data-gapiattached",!0)):(ce=Pb[Ec].go,"signin2"==Ec?ce(pe,He):ce(pe&&pe.parentNode,He))})},Vq=function(){return!1},Nh=function(){},Sl=function(Ec,
Dc,sd,ce,pe,He){switch(Wq(Dc,Ec,He)){case 0:Ec=Sm[Ec]?Ec+"_annotation":Ec;ce={};ce.iframeNode=Dc;ce.userParams=sd;rm(Ec,ce);break;case 1:if(Dc.parentNode){for(var Ze in sd){if(He=Fa(sd,Ze))He=sd[Ze],He=!!He&&"object"===Tc(He)&&(!He.toString||He.toString===Object.prototype.toString||He.toString===Array.prototype.toString);if(He)try{sd[Ze]=Pl(sd[Ze])}catch(pl){delete sd[Ze]}}var fg=!0;sd.dontclear&&(fg=!1);delete sd.dontclear;Z();He=vp(Ec,sd,pe);Ze={allowPost:1,attributes:Lq};Ze.dontclear=!fg;pe={};
pe.userParams=sd;pe.url=He;pe.type=Ec;if(sd.rd)var gg=Dc;else gg=document.createElement("div"),Dc.setAttribute("data-gapistub",!0),gg.style.cssText="position:absolute;width:450px;left:-10000px;",Dc.parentNode.insertBefore(gg,Dc);pe.siteElement=gg;gg.id||(Dc=gg,ob(Jn,Ec,0),fg="___"+Ec+"_"+Jn[Ec]++,Dc.id=fg);Dc=Ab();Dc[">type"]=Ec;Ka(sd,Dc);fg=He;sd=gg;He=Ze||{};Dc=He.attributes||{};C(!(He.allowPost||He.forcePost)||!Dc.onload,"onload is not supported by post iframe (allowPost or forcePost)");Ze=Dc=
fg;dk.test(Dc)&&(Ze=Yb("iframes/"+Ze.substring(1)+"/url"),C(!!Ze,"Unknown iframe url config for - "+Dc));fg=ta(gb,Ze.replace(Tj,up));Dc=sd.ownerDocument||gb;gg=0;do Ze=He.id||["I",qk++,"_",(new Date).getTime()].join("");while(Dc.getElementById(Ze)&&5>++gg);C(5>gg,"Error creating iframe id");gg={};var Og={};Dc.documentMode&&9>Dc.documentMode&&(gg.hostiemode=Dc.documentMode);Ka(He.queryParams||{},gg);Ka(He.fragmentParams||{},Og);var hh=He.pfname,vg=Ab();Yb("iframes/dropLegacyIdParam")||(vg.id=Ze);vg._gfid=
Ze;vg.parent=Dc.location.protocol+"//"+Dc.location.host;var ph=da(Dc.location.href,"parent");hh=hh||"";!hh&&ph&&(ph=da(Dc.location.href,"_gfid","")||da(Dc.location.href,"id",""),hh=da(Dc.location.href,"pfname",""),hh=ph?hh+"/"+ph:"");hh||(ph=mm(da(Dc.location.href,"jcp","")))&&"object"==Tc(ph)&&(hh=(hh=ph.id)?ph.pfname+"/"+hh:"");vg.pfname=hh;He.connectWithJsonParam&&(ph={},ph.jcp=Pl(vg),vg=ph);ph=da(fg,"rpctoken")||gg.rpctoken||Og.rpctoken;if(!ph){if(!(ph=He.rpctoken)){ph=String;hh=Math;var qj=hh.round;
if(om){var fj=new Td.Uint32Array(1);ol.getRandomValues(fj);fj=Number("0."+fj[0])}else fj=pm,fj+=parseInt(Ql.substr(0,20),16),Ql=Rd(Ql),fj/=qm+Math.pow(16,20);ph=ph(qj.call(hh,1E8*fj))}vg.rpctoken=ph}He.rpctoken=ph;Ka(vg,He.connectWithQueryParams?gg:Og);ph=Dc.location.href;vg=Ab();(hh=da(ph,"_bsh",Be.bsh))&&(vg._bsh=hh);(ph=Ne(ph))&&(vg.jsh=ph);He.hintInFragment?Ka(vg,Og):Ka(vg,gg);fg=Ua(fg,gg,Og,He.paramsSerializer);Og=Ab();Ka(Wh,Og);Ka(He.attributes,Og);Og.name=Og.id=Ze;Og.src=fg;He.eurl=fg;gg=He||
{};vg=!!gg.allowPost;if(gg.forcePost||vg&&2E3<fg.length){gg=P(fg);Og.src="";He.dropDataPostorigin||(Og["data-postorigin"]=fg);fg=kj(Dc,sd,Og,Ze);if(-1!=navigator.userAgent.indexOf("WebKit")){var Li=fg.contentWindow.document;Li.open();Og=Li.createElement("div");vg={};ph=Ze+"_inner";vg.name=ph;vg.src="";vg.style="display:none";kj(Dc,Og,vg,ph,He)}Og=(He=gg.query[0])?He.split("&"):[];He=[];for(vg=0;vg<Og.length;vg++)ph=Og[vg].split("=",2),He.push([decodeURIComponent(ph[0]),decodeURIComponent(ph[1])]);
gg.query=[];Og=fa(gg);C(mc.test(Og),"Invalid URL: "+Og);gg=Dc.createElement("form");gg.method="POST";gg.target=Ze;gg.style.display="none";Ze=Og instanceof ab?Og:Ta(Og);Od(gg,"HTMLFormElement").action=Ob(Ze);for(Ze=0;Ze<He.length;Ze++)Og=Dc.createElement("input"),Og.type="hidden",Og.name=He[Ze][0],Og.value=He[Ze][1],gg.appendChild(Og);sd.appendChild(gg);gg.submit();gg.parentNode.removeChild(gg);Li&&Li.close();Li=fg}else Li=kj(Dc,sd,Og,Ze,He);pe.iframeNode=Li;pe.id=Li.getAttribute("id");Li=pe.id;sd=
Ab();sd.id=Li;sd.userParams=pe.userParams;sd.url=pe.url;sd.type=pe.type;sd.state=1;M[Li]=sd;Li=pe}else Li=null;Li&&((pe=Li.id)&&ce.push(pe),rm(Ec,Li))}},Wq=function(Ec,Dc,sd){if(Ec&&1===Ec.nodeType&&Dc){if(sd)return 1;if(Sm[Dc]){if(le[Ec.nodeName.toLowerCase()])return(Ec=Ec.innerHTML)&&Ec.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")?0:1}else{if(ai[Dc])return 0;if(Mn[Dc])return 1}}return null},yp=function(Ec,Dc){var sd=Dc.type;delete Dc.type;var ce=Sq(Ec);if(ce){Ec={};for(var pe in Dc)Fa(Dc,pe)&&(Ec[pe.toLowerCase()]=
Dc[pe]);Ec.rd=1;(Dc=!!Ec.ri)&&delete Ec.ri;pe=[];Sl(sd,ce,Ec,pe,0,Dc);Nh(sd,pe)}else A.log("string"==="gapi."+sd+".render: missing element "+Tc(Ec)?Ec:"")};ob(Pb,"platform",{}).go=Go;Vq=function(Ec){for(var Dc=["_c","jsl","h"],sd=0;sd<Dc.length&&Ec;sd++)Ec=Ec[Dc[sd]];Dc=Ne(Vc.href);return!Ec||0!=Ec.indexOf("n;")&&0!=Dc.indexOf("n;")&&Ec!==Dc};Nh=function(Ec,Dc){$q(Ec,Dc)};var Ho=function(Ec){Tq(Ec,!0)},Io=function(Ec,Dc){Dc=Dc||[];for(var sd=0;sd<Dc.length;++sd)Ec(Dc[sd]);for(Ec=0;Ec<Dc.length;Ec++)Uq(Dc[Ec])};
Gf.push(["platform",function(Ec,Dc,sd){Rq=sd;(Dc||sd.features)&&xp.push(Dc||sd.features.join(":"));Io(Us,Ec);Io(Vs,sd._c.annotation);Io(Ws,sd._c.bimodal);Af();th();if("explicit"!=Xg("parsetags")){Re(Ec);df(xg())&&!Xg("disableRealtimeCallback")&&Z();if(sd&&(Ec=sd.callback)){var ce=Ib(Ec);delete sd.callback}Pd(function(){Ho(ce)})}}]);Pb._pl=!0;var Xq=function sd(Dc){if(Dc=(Dc=M[Dc])?Dc.oid:void 0){var ce=gb.getElementById(Dc);ce&&ce.parentNode.removeChild(ce);delete M[Dc];sd(Dc)}},Yq=/^\{h:'/,Zq=/^!_/,
zp="",$q=function(Dc,sd){function ce(){pc("message",pe,"remove","de")}function pe(Ze){var fg=Ze.data,gg=Ze.origin;if(Tm(fg,sd)){var Og=He;He=!1;Og&&wd("rqe");ar(Dc,function(){Og&&wd("rqd");ce();for(var hh=ob(Be,"RPMQ",[]),vg=0;vg<hh.length;vg++)hh[vg]({data:fg,origin:gg})})}}if(0!==sd.length){zp=da(Vc.href,"pfname","");var He=!0;pc("message",pe,"add","at");ue(Dc,ce)}},Tm=function(Dc,sd){Dc=String(Dc);if(Yq.test(Dc))return!0;var ce=!1;Zq.test(Dc)&&(ce=!0,Dc=Dc.substr(2));if(!/^\{/.test(Dc))return!1;
var pe=mm(Dc);if(!pe)return!1;Dc=pe.f;if(pe.s&&Dc&&-1!=ac.call(sd,Dc)){if("_renderstart"===pe.s||pe.s===zp+"/"+Dc+"::_renderstart")if(pe=pe.a&&pe.a[ce?0:1],sd=gb.getElementById(Dc),Pa(Dc,2),pe&&sd&&pe.width&&pe.height){a:{ce=sd.parentNode;Dc=pe||{};if(H()){var He=sd.id;if(He){pe=(pe=M[He])?pe.state:void 0;if(1===pe||4===pe)break a;Xq(He)}}(pe=ce.nextSibling)&&pe.getAttribute&&pe.getAttribute("data-gapistub")&&(ce.parentNode.removeChild(pe),ce.style.cssText="");pe=Dc.width;var Ze=Dc.height,fg=ce.style;
fg.textIndent="0";fg.margin="0";fg.padding="0";fg.background="transparent";fg.borderStyle="none";fg.cssFloat="none";fg.styleFloat="none";fg.lineHeight="normal";fg.fontSize="1px";fg.verticalAlign="baseline";ce=ce.style;ce.display="inline-block";fg=sd.style;fg.position="static";fg.left="0";fg.top="0";fg.visibility="visible";pe&&(ce.width=fg.width=pe+"px");Ze&&(ce.height=fg.height=Ze+"px");Dc.verticalAlign&&(ce.verticalAlign=Dc.verticalAlign);He&&Pa(He,3)}sd["data-csi-wdt"]=(new Date).getTime()}return!0}return!1},
ar=function(Dc,sd){ue(Dc,sd)},Um=function(Dc,sd){this.N=Dc;Dc=sd||{};this.ia=Number(Dc.maxAge)||0;this.W=Dc.domain;this.Y=Dc.path;this.ja=!!Dc.secure};Um.prototype.read=function(){for(var Dc=this.N+"=",sd=document.cookie.split(/;\s*/),ce=0;ce<sd.length;++ce){var pe=sd[ce];if(0==pe.indexOf(Dc))return pe.substr(Dc.length)}};Um.prototype.write=function(Dc,sd){if(!Nn.test(this.N))throw"Invalid cookie name";if(!br.test(Dc))throw"Invalid cookie value";Dc=this.N+"="+Dc;this.W&&(Dc+=";domain="+this.W);this.Y&&
(Dc+=";path="+this.Y);sd="number"===typeof sd?sd:this.ia;if(0<=sd){var ce=new Date;ce.setSeconds(ce.getSeconds()+sd);Dc+=";expires="+ce.toUTCString()}this.ja&&(Dc+=";secure");document.cookie=Dc;return!0};Um.prototype.clear=function(){this.write("",0)};var br=/^[-+/_=.:|%&a-zA-Z0-9@]*$/,Nn=/^[A-Z_][A-Z0-9_]{0,63}$/;Um.iterate=function(Dc){for(var sd=document.cookie.split(/;\s*/),ce=0;ce<sd.length;++ce){var pe=sd[ce].split("="),He=pe.shift();Dc(He,pe.join("="))}};var Vm=function(Dc){this.G=Dc};Vm.prototype.read=
function(){if(Tl.hasOwnProperty(this.G))return Tl[this.G]};Vm.prototype.write=function(Dc){Tl[this.G]=Dc;return!0};Vm.prototype.clear=function(){delete Tl[this.G]};var Tl={};Vm.iterate=function(Dc){for(var sd in Tl)Tl.hasOwnProperty(sd)&&Dc(sd,Tl[sd])};var Ap="https:"===window.location.protocol,Bp=Ap||"http:"===window.location.protocol?Um:Vm,Cp=function(Dc){var sd=Dc.substr(1),ce="",pe=window.location.hostname;if(""!==sd){ce=parseInt(sd,10);if(isNaN(ce))return null;sd=pe.split(".");if(sd.length<ce-
1)return null;sd.length==ce-1&&(pe="."+pe)}else pe="";return{l:"S"==Dc.charAt(0),domain:pe,o:ce}},cr=function(){var Dc,sd=null;Bp.iterate(function(ce,pe){0===ce.indexOf("G_AUTHUSER_")&&(ce=Cp(ce.substring(11)),!Dc||ce.l&&!Dc.l||ce.l==Dc.l&&ce.o>Dc.o)&&(Dc=ce,sd=pe)});return{ga:Dc,K:sd}},Jo=function(Dc){if(!Dc)return[];Dc=Dc.split("=");return Dc[1]?Dc[1].split("|"):[]},dr=function(Dc){Dc=Dc.split(":");return{clientId:Dc[0].split("=")[1],la:Jo(Dc[1]),qa:Jo(Dc[2]),pa:Jo(Dc[3])}},On=function(){var Dc=
cr(),sd=Dc.ga;Dc=Dc.K;if(null!==Dc){var ce;Bp.iterate(function(Ze,fg){(Ze=ka(Ze))&&Ze.X&&Ze.l==sd.l&&Ze.o==sd.o&&(ce=fg)});if(ce){var pe=dr(ce),He=pe&&pe.la[Number(Dc)];pe=pe&&pe.clientId;if(He)return{K:Dc,ka:He,clientId:pe}}}return null},Ko=function(){this.V=er};ld=Ko.prototype;ld.ba=function(){this.M||(this.A=0,this.M=!0,this.Z())};ld.Z=function(){this.M&&(this.V()?this.A=this.T:this.A=Math.min(2*(this.A||this.T),120),window.setTimeout(Oc(this.Z,this),1E3*this.A))};ld.A=0;ld.T=2;ld.V=null;ld.M=
!1;var Lo=null;H=function(){return Be.oa=!0};Z=function(){Be.oa=!0;var Dc=On();(Dc=Dc&&Dc.K)&&ti("googleapis.config/sessionIndex",Dc);Lo||(Lo=ob(Be,"ss",new Ko));Dc=Lo;Dc.ba&&Dc.ba()};var er=function(){var Dc=On(),sd=Dc&&Dc.ka||null,ce=Dc&&Dc.clientId;ue("auth",{callback:function(){var pe=Td.gapi.auth,He={client_id:ce,session_state:sd};pe.checkSessionState(He,function(Ze){var fg=He.session_state,gg=!!Xg("isLoggedIn");Ze=Xg("debug/forceIm")?!1:fg&&Ze||!fg&&!Ze;if(gg=gg!==Ze)ti("isLoggedIn",Ze),Z(),
Oq(),Ze||((Ze=pe.signOut)?Ze():(Ze=pe.setToken)&&Ze(null));Ze=xg();var Og=Xg("savedUserState");fg=pe._guss(Ze.cookiepolicy);Og=Og!=fg&&"undefined"!=typeof Og;ti("savedUserState",fg);(gg||Og)&&df(Ze)&&!Xg("disableRealtimeCallback")&&pe._pimf(Ze,!0)})}});return!0};Gf.unshift(["url",function(Dc,sd,ce){!Dc||sd&&""!==sd||!Dc.endsWith(".js")||(Dc=Dc.substring(0,Dc.length-3),sd=Dc.lastIndexOf("/")+1,sd>=Dc.length||(Dc=Dc.substr(sd).split(":").filter(function(pe){return!["api","platform"].includes(pe)}),
ce.features=Dc))}]);wd("bs0",!0,window.gapi._bs);wd("bs1",!0);delete window.gapi._bs;window.gapi.load("",{callback:window.gapi_onload,_c:{url:"https://apis.google.com/js/platform.js",jsl:{ci:{"oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:1,forceIm:!1,rethrowException:!0,host:"https://apis.google.com"},enableMultilogin:!0,
"googleapis.config":{auth:{useFirstPartyAuthV2:!0},root:"https://content.googleapis.com","root-1p":"https://clients6.google.com"},inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"en",iframes:{youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},
plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},savetoandroidpay:{url:"https://pay.google.com/gp/v/widget/save"},blogger:{params:{location:["search",
"hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",
shortlists:{url:""},hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},
share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},
url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},":signuphost:":"https://plus.google.com",ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},
sharetoclassroom:{url:"https://classroom.google.com/sharewidget?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},
zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://workspace.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},savetowallet:{url:"https://pay.google.com/gp/v/widget/save"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"}}},
h:"m;/_/scs/abc-static/_/js/k=gapi.lb.en.z9QjrzsHcOc.O/d=1/rs=AHpOoo8359JQqZQ0dzCVJ5Ui3CZcERHEWA/m=__features__",u:"https://apis.google.com/js/platform.js",hee:!0,dpo:!1,le:["scs"]},platform:"backdrop blogger comments commentcount community donation family_creation follow hangout health page partnersbadge person playemm playreview plus plusone post ratingbadge savetoandroidpay savetodrive savetowallet sharetoclassroom shortlists signin2 surveyoptin visibility youtube ytsubscribe zoomableimage".split(" "),
annotation:["interactivepost","recobar","signin2","autocomplete","profile"]}})}).call(zb.commonjsHelpers.commonjsGlobal);zb.__moduleExports=Da;zb.platform=Da;zb["default"]=Da;zb.platform=Da;var db=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js");db.notify=function(ib,Ea){return Cb.apply(this,arguments)};db.promise=Jc;db.arr=$d;db.string=Bb;db.resource=rd;db.pt=Id;db.Rectangle=Ac;db.Color=Pc;db.connect=gd;db.once=nd;db.signal=Fd;db.morph=ic;db.easings=vd;db.touchInputDevice=
sb;db.Icon=Xb;db.config=Nb;db.Morph=bc;db.part=hb;db.Menu=Za;db.pathForBrowserHistory=cb;db.loadMorphFromSnapshot=Hb;db.createMorphSnapshot=ec;db.UserRegistry=ub;db.ClientUser=yb;db.gapi=Da.gapi;db.ObjectPackage=Sb;Da=Lc("UserUI",{getCurrentUser:function(){return db.UserRegistry.current.loadUserFromLocalStorage(db.config.users.authServerURL)},showUserFlap:function(){var ib=arguments;return ba(regeneratorRuntime.mark(function W(){var T,ia,ka,K,ya;return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=
pb.next){case 0:return T=0<ib.length&&void 0!==ib[0]?ib[0]:$world,pb.next=3,pd.import("./top-bar.cp-e232b59f.js");case 3:return ia=pb.sent,ka=ia.TopBar,K=db.part(ka),K.epiMorph=!0,K.name="lively top bar",K.hasFixedPosition=!0,K.respondsToVisibleWindow=!0,K.openInWorld(),K.relayout(),K.top=-K.height,ya=K.dropShadow,K.dropShadow=null,K.attachToTarget(T),$world.onTopBarLoaded(),pd.import("./__rootModule___commonjs-entry-71573ff5.js").then(function(La){return La.cd}),ba(regeneratorRuntime.mark(function eb(){var jb,
E,Wb,R,xb,Ja,Ga;return regeneratorRuntime.wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:return K.showCurrentUser(),sa.next=3,K.whenRendered();case 3:return sa.next=5,K.animate({position:db.pt(0,0),dropShadow:ya,duration:500});case 5:if(T.metadata){sa.next=17;break}T.animate({customTween:function(Ub){K.blur=T.blur=3*Ub},duration:500});sa.next=9;return T.askForName();case 9:return jb=sa.sent,T.name=jb,T.changeMetaData("commit",{name:jb}),window.history&&window.history.pushState({},"lively.next",
db.pathForBrowserHistory(jb)),E=db.ObjectPackage.withId(db.string.camelCaseString(jb)),sa.next=16,E.adoptObject(T);case 16:T.animate({customTween:function(Ub){K.blur=T.blur=3*(1-Ub)},duration:500});case 17:return sa.next=19,pd.import("./version-checker.cp-8e9b8092.js");case 19:return Wb=sa.sent,R=Wb.LivelyVersionChecker,xb=db.part(R),xb.name="lively version checker",xb.openInWorld(),xb.relayout(),xb.checkVersion(),sa.next=28,pd.import("./sidebar-flap.cp-dae59486.js");case 28:Ja=sa.sent,Ga=Ja.Flap,
db.part(Ga,{viewModel:{target:"scene graph"}}).openInWorld(),db.part(Ga,{viewModel:{target:"properties panel"}}).openInWorld();case 32:case "end":return sa.stop()}},eb)}))(),pb.abrupt("return",K);case 20:case "end":return pb.stop()}},W)}))()},hideUserFlap:function(){var ib=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$world;ib.submorphs.filter(function(Ea){return"user flap"===Ea.name&&Ea.owner==ib}).forEach(function(Ea){return Ea.remove()})},showWidget:function(ib){var Ea=arguments,W=this;
return ba(regeneratorRuntime.mark(function ia(){var ka,K,ya,pb,La,eb;return regeneratorRuntime.wrap(function(jb){for(;;)switch(jb.prev=jb.next){case 0:return ka=1<Ea.length&&void 0!==Ea[1]?Ea[1]:{},K=ka.modal,ya=void 0===K?!0:K,pb=ka.user,La=void 0===pb?W.getCurrentUser():pb,jb.next=4,W.loadMorph(ib);case 4:return eb=jb.sent,jb.abrupt("return",eb.run(ya,ka.world,La));case 6:case "end":return jb.stop()}},ia)}))()},showUserInfo:function(){var ib=arguments,Ea=this;return ba(regeneratorRuntime.mark(function T(){var ia;
return regeneratorRuntime.wrap(function(ka){for(;;)switch(ka.prev=ka.next){case 0:return ia=0<ib.length&&void 0!==ib[0]?ib[0]:{},ka.next=3,Ea.showWidget("user info",ia);case 3:return ka.abrupt("return",ka.sent);case 4:case "end":return ka.stop()}},T)}))()},showLogin:function(){var ib=arguments,Ea=this;return ba(regeneratorRuntime.mark(function T(){var ia;return regeneratorRuntime.wrap(function(ka){for(;;)switch(ka.prev=ka.next){case 0:return ia=0<ib.length&&void 0!==ib[0]?ib[0]:{},ka.abrupt("return",
Ea.showWidget("login widget",ia));case 2:case "end":return ka.stop()}},T)}))()},showRegister:function(){var ib=arguments,Ea=this;return ba(regeneratorRuntime.mark(function T(){var ia;return regeneratorRuntime.wrap(function(ka){for(;;)switch(ka.prev=ka.next){case 0:return ia=0<ib.length&&void 0!==ib[0]?ib[0]:{},ka.abrupt("return",Ea.showWidget("register widget",ia));case 2:case "end":return ka.stop()}},T)}))()},loadMorph:function(ib,Ea){return ba(regeneratorRuntime.mark(function T(){var ia,ka;return regeneratorRuntime.wrap(function(K){for(;;)switch(K.prev=
K.next){case 0:K.t0=ib;K.next="login widget"===K.t0?3:"user info"===K.t0?6:"register widget"===K.t0?9:12;break;case 3:return K.next=5,db.resource("part://SystemUserUI/login widget").read();case 5:return K.abrupt("return",K.sent);case 6:return K.next=8,db.resource("part://SystemUserUI/user info").read();case 8:return K.abrupt("return",K.sent);case 9:return K.next=11,db.resource("part://SystemUserUI/register widget").read();case 11:return K.abrupt("return",K.sent);case 12:return ia=System.decanonicalize("lively.user/morphic/".concat(ib,
".json")),K.next=15,db.resource(ia).readJson();case 15:return ka=K.sent,K.abrupt("return",db.loadMorphFromSnapshot(ka,Ea));case 17:case "end":return K.stop()}},T)}))()}});db.UserUI=Da;db.UserUI=Da;(function(ib){var Ea=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),W=Ea.hasOwnProperty("UserWidget")&&"function"===typeof Ea.UserWidget?Ea.UserWidget:Ea.UserWidget=function(T){if(!T||!T[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return wb(W,ib,[{key:"run",value:function(){var T=this,ia=1<arguments.length&&void 0!==arguments[1]?arguments[1]:$world,ka=2<arguments.length?arguments[2]:void 0;if(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)var K=ia.addMorph({name:this.name+" overlay",hasFixedPosition:!0,grabbable:!1,draggable:!1,extent:ia.extent,fill:db.Color.black.withA(.4)});this.epiMorph=this.hasFixedPosition=!0;this.activate(ka);return(new Promise(function(ya,pb){db.once(T,"resolved",ya)})).then(function(ya){T.remove();
K&&K.remove();return ya})}},{key:"activate",value:function(T){T=$world;T.addMorph(this);this.align(this.worldPoint(this.innerBounds().center()),T.visibleBounds().center());this.focus()}},{key:"onKeyDown",value:function(T){"Enter"===T.keyCombo&&(this.onEnterPressed(),T.stop());"Escape"===T.keyCombo&&(this.onEscapePressed(),T.stop());"Tab"===T.keyCombo&&(this.focusNext(),T.stop());"Shift-Tab"===T.keyCombo&&(this.focusPrev(),T.stop())}},{key:"focusOrder",value:function(){return[]}},{key:"focusNext",
value:function(){var T=this.focusOrder(),ia=this.world().focusedMorph;ia=T.indexOf(ia)+1;ia>T.length-1&&(ia=0);T[ia].focus()}},{key:"focusPrev",value:function(){var T=this.focusOrder(),ia=this.world().focusedMorph;ia=T.indexOf(ia)-1;0>ia&&(ia=T.length-1);T[ia].focus()}},{key:"onEscapePressed",value:function(){this.close()}},{key:"onEnterPressed",value:function(){}},{key:"close",value:function(){}},{key:"_save",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K;return regeneratorRuntime.wrap(function(ya){for(;;)switch(ya.prev=
ya.next){case 0:return ya.next=2,db.createMorphSnapshot(this);case 2:return K=ya.sent,ya.next=5,lively.modules.module("lively.user/morphic/".concat(this.name,".json")).changeSource(JSON.stringify(K,null,2),{doEval:!1});case 5:case "end":return ya.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"_htmlExport",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K,ya,pb,La,eb,jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return K=
lively.modules.module,ya=K("lively.user/html/".concat(this.name,".html")).id,pb=db.resource(ya),E.next=5,K("lively.morphic/rendering/html-generator.js").load();case 5:return La=E.sent,eb=La.generateHTML,E.next=9,eb(this,pb,{isFragment:!0,addStyles:!1});case 9:return jb=E.sent,E.abrupt("return",{resource:pb,html:jb});case 11:case "end":return E.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"htmlExport_transformNode",value:function(T){this.focusOrder().forEach(function(ia,
ka){return T.querySelector("#"+ia.id).tabIndex=ka+1});return T}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UserWidget"}},{key:"properties",get:function(){return{user:{}}}}],Ea,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:5808,end:8653})})(db.Morph);Da=
Lc("UserInfoWidget",function(ib){var Ea=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),W=Ea.hasOwnProperty("UserInfoWidget")&&"function"===typeof Ea.UserInfoWidget?Ea.UserInfoWidget:Ea.UserInfoWidget=function(T){if(!T||!T[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return wb(W,ib,[{key:"ui",get:function(){return{userNameInput:this.getSubmorphNamed("user name input"),passwordInput:this.getSubmorphNamed("password input"),
passwordInput2:this.getSubmorphNamed("password input 2"),emailInput:this.getSubmorphNamed("email input"),saveButton:this.getSubmorphNamed("save button"),logoutButton:this.getSubmorphNamed("logout button"),closeButton:this.getSubmorphNamed("close button"),userAvatar:this.getSubmorphNamed("user avatar")}}},{key:"activate",value:function(T){wb._get(Object.getPrototypeOf(W.prototype),"activate",this).call(this,T);this.displayUser(T)}},{key:"focus",value:function(){this.ui.userNameInput.focus()}},{key:"focusOrder",
value:function(){var T=this.ui;return[T.userNameInput,T.emailInput,T.passwordInput,T.passwordInput2]}},{key:"onEnterPressed",value:function(){this.trySave()}},{key:"reset",value:function(){this.withAllSubmorphsDo(function(T){T.draggable=!1;T.grabbable=!1});db.connect(this.ui.saveButton,"fire",this,"trySave");db.connect(this.ui.logoutButton,"fire",this,"logout");db.connect(this.ui.closeButton,"onMouseDown",this,"close");this.ui.userNameInput.readOnly=!0;this.ui.userNameInput.selectable=!0;db.notify(this,
"OK")}},{key:"displayUser",value:function(T){T=(this.user=T)||{};var ia=T.email,ka=this.ui,K=ka.emailInput,ya=ka.passwordInput,pb=ka.passwordInput2,La=ka.userAvatar;ka.userNameInput.input=T.name||"";K.input=ia||"";ya.input="";pb.input="";La.imageUrl=db.resource("https://s.gravatar.com/avatar").join(db.string.md5(ia||"")).withQuery({s:320}).url}},{key:"trySave",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K,ya,pb,La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub;return regeneratorRuntime.wrap(function(vc){for(;;)switch(vc.prev=
vc.next){case 0:K=this.user;ya=this.ui;pb=ya.emailInput;La=ya.passwordInput;eb=ya.passwordInput2;if(K){vc.next=3;break}return vc.abrupt("return",this.showError("no user object"));case 3:jb=pb.input;E=La.input;Wb=eb.input;if(K.email!=jb||E||Wb){vc.next=9;break}return vc.abrupt("return",db.signal(this,"resolved",K));case 9:if(!E&&!Wb){vc.next=22;break}if(E===Wb){vc.next=12;break}return vc.abrupt("return",this.world().inform("Passwords do not match!",{requester:this}));case 12:return vc.next=14,this.world().passwordPrompt("To set a new password, please enter your old one",
{requester:this});case 14:if(R=vc.sent){vc.next=17;break}return vc.abrupt("return",this.world().inform("Old password needed to change password, aborting!",{requester:this}));case 17:return vc.next=19,K.checkPassword(R);case 19:if(xb=vc.sent){vc.next=22;break}return vc.abrupt("return",this.world().inform("Old password is not correct, aborting!",{requester:this}));case 22:return Ja={},E&&(Ja.password=E),jb&&(Ja.email=jb),vc.next=27,K.modify(Ja);case 27:Ga=vc.sent;sa=Ga.status;Ub=Ga.error;if(!Ub){vc.next=
32;break}return vc.abrupt("return",this.world().inform("Failed to modify: "+Ub,{requester:this}));case 32:return vc.next=34,db.UserRegistry.current.saveUserToLocalStorage(K);case 34:return vc.next=36,db.notify(this,sa);case 36:this.displayUser(K),db.signal(this,"resolved",K);case 38:case "end":return vc.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"logout",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K;return regeneratorRuntime.wrap(function(ya){for(;;)switch(ya.prev=
ya.next){case 0:return ya.next=2,db.UserRegistry.current.logout(this.user);case 2:return this.displayUser(this.user),this.remove(),ya.next=6,db.UserUI.showLogin({modal:!1});case 6:K=ya.sent,db.signal(this,"resolved",K);case 8:case "end":return ya.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"close",value:function(){db.signal(this,"resolved",this.user)}},{key:"onMouseUp",value:function(T){var ia=this.ui,ka=ia.closeButton;ia=ia.saveButton;switch(T.targetMorph){case ka:this.close();
break;case ia:this.trySave()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UserInfoWidget"}}],Ea,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:8662,end:12859})}(db.UserWidget));db.UserInfoWidget=Da;db.UserInfoWidget=Da;Da=Lc("LoginWidget",function(ib){var Ea=
window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),W=Ea.hasOwnProperty("LoginWidget")&&"function"===typeof Ea.LoginWidget?Ea.LoginWidget:Ea.LoginWidget=function(T){if(!T||!T[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return wb(W,ib,[{key:"ui",get:function(){return{userNameInput:this.getSubmorphNamed("user name input"),passwordInput:this.getSubmorphNamed("password input"),loginButton:this.getSubmorphNamed("login button"),
registerButton:this.getSubmorphNamed("register button"),guestButton:this.getSubmorphNamed("guest button"),emailLoginForm:this.getSubmorphNamed("email login form"),googleLogin:this.getSubmorphNamed("google login"),emailLogin:this.getSubmorphNamed("email login"),appleLogin:this.getSubmorphNamed("apple login")}}},{key:"signInWithGoogle",value:function(){db.gapi.load("auth2",ba(regeneratorRuntime.mark(function ia(){var ka;return regeneratorRuntime.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return db.gapi.auth2.init({client_id:"CLIENT_ID.apps.googleusercontent.com"}),
ka=db.gapi.auth2.getAuthInstance(),K.next=4,ka.signIn();case 4:case 5:case "end":return K.stop()}},ia)})))}},{key:"signInWithEmail",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K,ya,pb,La,eb,jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:K=this.ui,ya=K.emailLoginForm,pb=K.googleLogin,La=K.emailLogin,eb=K.appleLogin,jb=db.easings.inOutExpo,[pb,La,eb].map(function(Wb){return Wb.animate({visible:!1,isLayoutable:!1,easing:jb,duration:300})}),ya.animate({visible:!0,
isLayoutable:!0,easing:jb,duration:300});case 5:case "end":return E.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"focus",value:function(){this.ui.userNameInput.focus()}},{key:"focusOrder",value:function(){return[this.ui.userNameInput,this.ui.passwordInput]}},{key:"reset",value:function(){this.withAllSubmorphsDo(function(jb){jb.draggable=!1;jb.grabbable=!1});var T=this.ui,ia=T.registerButton,ka=T.userNameInput,K=T.appleLogin,ya=T.passwordInput,pb=T.emailLoginForm,
La=T.googleLogin,eb=T.emailLogin;db.connect(T.loginButton,"fire",this,"tryLogin");db.connect(ia,"fire",this,"switchToRegisterWidget");db.connect(eb,"fire",this,"signInWithEmail");db.connect(La,"fire",this,"loginWithGoogle");ka.input="";ya.input="";pb.isLayoutable=pb.visible=!1;[eb,K,La].map(function(jb){return jb.visible=jb.isLayoutable=!0})}},{key:"onEnterPressed",value:function(){this.tryLogin()}},{key:"tryLogin",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K,ya,pb,La,eb,
jb,E;return regeneratorRuntime.wrap(function(Wb){for(;;)switch(Wb.prev=Wb.next){case 0:K=this.ui;ya=K.userNameInput;pb=K.passwordInput;La=ya.input;eb=pb.input;if(La){Wb.next=5;break}return Wb.abrupt("return");case 5:return jb=db.ClientUser.named(La,db.config.users.authServerURL),Wb.prev=6,Wb.next=9,db.UserRegistry.current.login(jb,eb);case 9:Wb.next=14;break;case 11:Wb.prev=11,Wb.t0=Wb["catch"](6),E=Wb.t0.message;case 14:if(!E){Wb.next=19;break}db.signal(this,"loginFailed",E);E.includes("No user")&&
this.indicateError(this.ui.userNameInput,E);E.includes("does not match")&&this.indicateError(this.ui.passwordInput,"Password incorrect");return Wb.abrupt("return");case 19:db.notify(this,"logged in"),db.signal(this,"loginSucceeded",jb),db.signal(this,"resolved",jb);case 22:case "end":return Wb.stop()}},ka,this,[[6,11]])}));return function(){return T.apply(this,arguments)}}()},{key:"switchToRegisterWidget",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K;return regeneratorRuntime.wrap(function(ya){for(;;)switch(ya.prev=
ya.next){case 0:return ya.next=2,db.UserUI.showRegister({modal:!1});case 2:(K=ya.sent)&&db.signal(this,"resolved",K);case 4:case "end":return ya.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"continueAsGuest",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K,ya,pb;return regeneratorRuntime.wrap(function(La){for(;;)switch(La.prev=La.next){case 0:K=db.UserRegistry.current;ya=K.loadUserFromLocalStorage(db.config.users.authServerURL);if(!ya.isGuestUser){La.next=
6;break}La.t0=ya;La.next=9;break;case 6:return La.next=8,K.login(db.ClientUser.guest);case 8:La.t0=La.sent;case 9:pb=La.t0,db.signal(this,"resolved",pb);case 11:case "end":return La.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"indicateError",value:function(T,ia){T.indicateError(ia)}},{key:"clearErrors",value:function(){this.ui.userNameInput.clearError();this.ui.passwordInput.clearError()}},{key:"onMouseUp",value:function(T){var ia=this.ui,ka=ia.loginButton;ia=ia.registerButton;
switch(T.targetMorph){case ka:this.tryLogin();break;case ia:this.switchToRegisterWidget()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LoginWidget"}}],Ea,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:12867,end:16867})}(db.UserWidget));db.LoginWidget=Da;
db.LoginWidget=Da;Da=Lc("RegisterWidget",function(ib){var Ea=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),W=Ea.hasOwnProperty("RegisterWidget")&&"function"===typeof Ea.RegisterWidget?Ea.RegisterWidget:Ea.RegisterWidget=function(T){if(!T||!T[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return wb(W,ib,[{key:"ui",get:function(){return{userNameInput:this.getSubmorphNamed("user name input"),emailInput:this.getSubmorphNamed("email input"),
passwordInput:this.getSubmorphNamed("password input"),passwordInput2:this.getSubmorphNamed("password input 2"),registerButton:this.getSubmorphNamed("register button"),cancelButton:this.getSubmorphNamed("cancel button")}}},{key:"onEnterPressed",value:function(){this.tryRegister()}},{key:"focus",value:function(){this.ui.userNameInput.focus()}},{key:"focusOrder",value:function(){return[this.ui.userNameInput,this.ui.emailInput,this.ui.passwordInput,this.ui.passwordInput2]}},{key:"reset",value:function(){this.withAllSubmorphsDo(function(T){T.draggable=
!1;T.grabbable=!1});db.connect(this.ui.registerButton,"fire",this,"tryRegister");db.connect(this.ui.cancelButton,"fire",this,"close");this.ui.userNameInput.readOnly=!0;this.ui.userNameInput.selectable=!0;db.notify(this,"OK")}},{key:"displayUser",value:function(T){this.user=T}},{key:"tryRegister",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K,ya,pb,La,eb,jb,E,Wb,R,xb,Ja;return regeneratorRuntime.wrap(function(Ga){for(;;)switch(Ga.prev=Ga.next){case 0:K=this.ui;ya=K.userNameInput;
pb=K.emailInput;La=K.passwordInput;eb=K.passwordInput2;jb=ya.input;E=pb.input;Wb=La.input;R=eb.input;if(jb&&Wb&&R&&E){Ga.next=11;break}jb||ya.indicateError("Please enter a user name!");E||pb.indicateError("Please enter E-Mail address!");Wb||La.indicateError("Please enter a password!");R||eb.indicateError("Please repeat your password!");return Ga.abrupt("return");case 11:if(Wb===R){Ga.next=14;break}eb.indicateError("Passwords do not match!");return Ga.abrupt("return");case 14:return xb=db.ClientUser.named(jb,
db.config.users.authServerURL),E&&(xb.email=E),Ga.prev=16,Ga.next=19,db.UserRegistry.current.register(xb,Wb);case 19:Ga.next=24;break;case 21:Ga.prev=21,Ga.t0=Ga["catch"](16),Ja=Ga.t0;case 24:if(!Ja){Ga.next=26;break}return Ga.abrupt("return",this.world().inform("Failed to register: "+Ja,{requester:this}));case 26:return Ga.next=28,db.notify(this,"registered");case 28:this.displayUser(xb),db.signal(this,"resolved",xb);case 30:case "end":return Ga.stop()}},ka,this,[[16,21]])}));return function(){return T.apply(this,
arguments)}}()},{key:"close",value:function(){db.signal(this,"resolved",this.user)}},{key:"onMouseUp",value:function(T){var ia=this.ui,ka=ia.registerButton;ia=ia.cancelButton;switch(T.targetMorph){case ka:this.tryRegister();break;case ia:this.close()}}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"RegisterWidget"}}],Ea,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:16875,end:19798})}(db.UserWidget));db.RegisterWidget=Da;db.RegisterWidget=Da;Da=Lc("UserFlap",function(ib){var Ea=window.lively.FreezerRuntime.recorderFor("lively.user/morphic/user-ui.js"),W=Ea.hasOwnProperty("UserFlap")&&"function"===typeof Ea.UserFlap?Ea.UserFlap:Ea.UserFlap=function(T){if(!T||!T[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return wb(W,
ib,[{key:"isUserFlap",get:function(){return!0}},{key:"isMaximized",get:function(){return 3<this.submorphs.length}},{key:"onLoad",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){return regeneratorRuntime.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.whenRendered();case 2:if(![this].concat(Xa(this.ownerChain())).find(function(ya){return ya.isComponent})){K.next=4;break}return K.abrupt("return");case 4:this.showUser(this.currentUser());case 5:case "end":return K.stop()}},
ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"open",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){return regeneratorRuntime.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return this.openInWorld(),this.showUser(this.currentUser(),!1),this.alignInWorld(!1),this.hasFixedPosition=!0,K.abrupt("return",this);case 5:case "end":return K.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"onMouseDown",value:function(){var T=ba(regeneratorRuntime.mark(function K(ka){var ya,
pb;return regeneratorRuntime.wrap(function(La){for(;;)switch(La.prev=La.next){case 0:ya=ka.targetMorph.name;pb=this.currentUser();La.t0=ya;La.next="profile item"===La.t0?5:"logout item"===La.t0?6:"login item"===La.t0?11:"register item"===La.t0?14:"user flap"===La.t0?16:"keyboard input"===La.t0?18:20;break;case 5:return La.abrupt("return",this.showUserInfo(pb));case 6:return La.next=8,this.minimize();case 8:return La.next=10,this.logout(pb);case 10:return La.abrupt("return");case 11:return La.next=
13,this.showLogin(pb);case 13:return La.abrupt("return");case 14:return this.showRegister(),La.abrupt("break",20);case 16:return this.maximize(),La.abrupt("break",20);case 18:return this.toggleKeyboardInput(),La.abrupt("break",20);case 20:case "end":return La.stop()}},K,this)}));return function(ka){return T.apply(this,arguments)}}()},{key:"toggleKeyboardInput",value:function(){var T=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!db.touchInputDevice;db.touchInputDevice=T;var ia=this.get("keyboard input");
T?(ia.fontColor=db.Color.rgb(0,176,255),ia.dropShadow=this.haloShadow):(ia.fontColor=this.fontColor,ia.dropShadow=!1)}},{key:"currentUser",value:function(){return db.UserRegistry.current.loadUserFromLocalStorage(db.config.users.authServerURL)}},{key:"onUserChanged",value:function(T){this.showUser(T.user||{name:"???"},!1)}},{key:"onWorldResize",value:function(T){!this.isComponent&&this.alignInWorld()}},{key:"relayout",value:function(){this.alignInWorld()}},{key:"alignInWorld",value:function(){var T=
ba(regeneratorRuntime.mark(function K(ka){var ya;return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=pb.next){case 0:return pb.next=2,this.whenRendered();case 2:this.hasFixedPosition&&this.owner.isWorld?this.topRight=db.pt(this.world().visibleBounds().width,0):this.owner.isWorld&&(ya=$world.visibleBounds().topRight().withY(0).subXY(10,0),ka?this.animate({topRight:ya,duration:200}):this.topRight=ya);case 3:case "end":return pb.stop()}},K,this)}));return function(ka){return T.apply(this,
arguments)}}()},{key:"minimize",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K;return regeneratorRuntime.wrap(function(ya){for(;;)switch(ya.prev=ya.next){case 0:if(K=this.getSubmorphNamed("user menu")){ya.next=3;break}return ya.abrupt("return");case 3:return ya.next=5,K.animate({opacity:0,scale:.8,duration:200});case 5:K.visible=!1;case 6:case "end":return ya.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"ensureMenu",value:function(){var T=
ba(regeneratorRuntime.mark(function ka(){var K,ya;return regeneratorRuntime.wrap(function(pb){for(;;)switch(pb.prev=pb.next){case 0:if(!this._menuFetch){pb.next=4;break}pb.next=3;return this._menuFetch;case 3:return pb.abrupt("return",pb.sent);case 4:K=db.promise.deferred();this._menuFetch=K.promise;pb.t0=this.getSubmorphNamed("user menu");if(pb.t0){pb.next=13;break}pb.t1=this;pb.next=11;return db.resource("part://SystemIDE/user menu master").read();case 11:pb.t2=pb.sent,pb.t0=pb.t1.addMorph.call(pb.t1,
pb.t2);case 13:ya=pb.t0,ya.name="user menu",ya.visible=!1,ya.opacity=0,ya.scale=.8,ya.position=this.getSubmorphNamed("avatar").bottomCenter.addXY(0,10),K.resolve(ya);case 20:case "end":return pb.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"maximize",value:function(){var T=ba(regeneratorRuntime.mark(function ka(){var K;return regeneratorRuntime.wrap(function(ya){for(;;)switch(ya.prev=ya.next){case 0:if(K=this.getSubmorphNamed("user menu")){ya.next=5;break}ya.next=
4;return this.ensureMenu();case 4:K=ya.sent;case 5:return K.right=this.width-5,K.visible=!0,ya.next=9,K.animate({opacity:1,scale:1,duration:200});case 9:case "end":return ya.stop()}},ka,this)}));return function(){return T.apply(this,arguments)}}()},{key:"changeWidthAndHeight",value:function(){var T=ba(regeneratorRuntime.mark(function pb(ka,K,ya){return regeneratorRuntime.wrap(function(La){for(;;)switch(La.prev=La.next){case 0:if(!ya){La.next=5;break}La.next=3;return this.animate({position:this.position.addXY(this.width-
ka,0),extent:db.pt(ka,K),duration:200});case 3:La.next=7;break;case 5:this.extent=db.pt(ka,K),this.position=this.position.addXY(this.width-ka,0);case 7:case "end":return La.stop()}},pb,this)}));return function(ka,K,ya){return T.apply(this,arguments)}}()},{key:"showMenuItems",value:function(T){var ia=this;db.arr.withoutAll(["login item","logout item","profile item","register item"],T).map(function(ka){return ia.getSubmorphNamed(ka)}).forEach(function(ka){ka.visible=!1;ka.bringToFront()});T.map(function(ka){return ia.getSubmorphNamed(ka)}).forEach(function(ka){ka.visible=
!0})}},{key:"showUser",value:function(){var T=ba(regeneratorRuntime.mark(function K(ka){var ya,pb,La,eb,jb;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return ya=this.getSubmorphNamed("label"),pb=this.getSubmorphNamed("user menu"),La=this.getSubmorphNamed("avatar"),this.getSubmorphNamed("login item"),this.getSubmorphNamed("logout item"),this.getSubmorphNamed("profile item"),eb=String(ka.name),jb=db.resource("https://s.gravatar.com/avatar").join(db.string.md5(ka.email||
"")).withQuery({s:160}).url,E.next=11,this.ensureMenu();case 11:eb.startsWith("guest-")?(this.showMenuItems(["login item","register item"]),eb="guest"):this.showMenuItems(["logout item","profile item"]);ya.value=eb;La.imageUrl=jb;if(!pb){E.next=18;break}E.next=17;return pb.master.whenApplied();case 17:pb.position=La.bottomCenter.addXY(0,10);case 18:return E.next=20,this.whenRendered();case 20:this.alignInWorld();case 21:case "end":return E.stop()}},K,this)}));return function(ka){return T.apply(this,
arguments)}}()},{key:"showRegister",value:function(){return db.UserUI.showRegister()}},{key:"showUserInfo",value:function(T){return db.UserUI.showUserInfo({user:T})}},{key:"showLogin",value:function(T){return db.UserUI.showLogin({user:T})}},{key:"logout",value:function(T){return db.UserRegistry.current.logout(T)}},{key:"onBlur",value:function(){var T=ba(regeneratorRuntime.mark(function K(ka){return regeneratorRuntime.wrap(function(ya){for(;;)switch(ya.prev=ya.next){case 0:return this.minimize(),ya.next=
3,this.whenRendered();case 3:this.world().focusedMorph.ownerChain().includes(this)&&this.focus();case 4:case "end":return ya.stop()}},K,this)}));return function(ka){return T.apply(this,arguments)}}()},{key:"showMenu",value:function(){var T=ba(regeneratorRuntime.mark(function K(ka){var ya=this,pb,La,eb,jb,E,Wb=arguments;return regeneratorRuntime.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return pb=1<Wb.length&&void 0!==Wb[1]?Wb[1]:!1,La=this.getSubmorphNamed("label"),eb=this.getSubmorphNamed("avatar"),
jb=["open chat",ba(regeneratorRuntime.mark(function Ja(){return regeneratorRuntime.wrap(function(Ga){for(;;)switch(Ga.prev=Ga.next){case 0:case "end":return Ga.stop()}},Ja)}))],E=Object.assign(db.Menu.forItems(ka.isGuestUser?[jb,["login",ba(regeneratorRuntime.mark(function Ga(){return regeneratorRuntime.wrap(function(sa){for(;;)switch(sa.prev=sa.next){case 0:ya.minimize(),ya.showLogin(ka);case 2:case "end":return sa.stop()}},Ga)}))]]:[["show user info",function(){ya.minimize();ya.showUserInfo(ka)}],
jb,["logout",ba(regeneratorRuntime.mark(function sa(){return regeneratorRuntime.wrap(function(Ub){for(;;)switch(Ub.prev=Ub.next){case 0:return Ub.next=2,ya.minimize();case 2:ya.logout(ka);case 3:case "end":return Ub.stop()}},sa)}))]]),{name:"menu",position:db.pt(10,5),dropShadow:!1,opacity:pb?0:1,borderWidth:0,fontSize:12,fontFamily:"Helvetica Neue, Verdana, Sans Serif"}),eb.visible=!1,La.visible=!1,this.addMorph(E),pb&&E.animate({opacity:1,duration:200}),R.next=11,this.changeWidthAndHeight(E.width+
20,E.height+10,pb);case 11:case "end":return R.stop()}},K,this)}));return function(ka){return T.apply(this,arguments)}}()},{key:"updateNetworkIndicator",value:function(T){var ia="red";T&&(T.isOnline()&&(ia="yellow"),T.isRegistered()&&(ia="green"));this.get("network-indicator").animate({fill:db.Color[ia],duration:300})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"UserFlap"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.submorphs=[{type:"label",
name:"label",fontSize:12,fontFamliy:"Helvetica Neue, Verdana, Sans Serif",fontWeight:"bold",padding:db.Rectangle.inset(4),reactsToPointer:!1},db.Icon.makeLabel("user",{name:"avatar",fontColor:db.Color.black.withA(.3),fontSize:12,clipMode:"hidden",padding:db.Rectangle.inset(2,2,4,0),borderWidth:1,borderColor:db.Color.black.withA(.3),extent:db.pt(20,20),borderRadius:10}),{name:"network-indicator",fill:db.Color.red,borderRadius:5,extent:db.pt(5,5),position:db.pt(5,8),reactsToPointer:!1}]}},fontColor:{after:["submorphs"],
set:function(T){this.setProperty("fontColor",T)}},name:{initialize:function(){this.name="user flap"}},epiMorph:{defaultValue:!0},clipMode:{defaultValue:"hidden"},draggable:{defaultValue:!1},grabbable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},fill:{defaultValue:db.Color.white},borderRadius:{defaultValue:10},nativeCursor:{defaultValue:"pointer"},respondsToVisibleWindow:{defaultValue:!0},haloColor:{readOnly:!0,get:function(){return db.Color.rgb(0,176,255)}},haloShadow:{readOnly:!0,get:function(){return{distance:2,
rotation:45,color:db.Color.rgba(64,196,255,.4),inset:!1,blur:6,spread:0,fast:!1}}}}}}],Ea,{pathInPackage:function(){return"./morphic/user-ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.user",version:"0.2.0"}}},{start:19806,end:28887})}(db.Morph));db.UserFlap=Da;db.UserFlap=Da}}});