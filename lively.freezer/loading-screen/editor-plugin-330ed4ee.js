System.register("./__rootModule___commonjs-entry-71573ff5.js ./mode-9e103dc6.js ./editor-plugin-0a8dd45b.js ./index-1c08552a.js @babel/plugin-syntax-import-meta ./index-c79abca0.js ./index-ca98f65e.js ./index-d18accbd.js ./loading-indicator.cp-b18e3b89.js ./tooltips.cp-6a2406c0.js ./value-widgets-6cb12552.js ./editor-modes-5e094c88.js ./ui.cp-6289a670.js ./list.cp-8569fe93.js ./popups.cp-68dc8a4a.js ./interface-dc23a2c8.js".split(" "),function(Lc){var pd,Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,
sb,Xb,Nb,bc,hb,cb,Hb,ec,ub;return{setters:[function(yb){pd=yb.i;Nd=yb.y;Tc=yb.ag;Jc=yb.ap;$d=yb.bI;Bb=yb.bJ;rd=yb.bK;Id=yb.a7;Ac=yb.G;Pc=yb.D;gd=yb.k;nd=yb.aV;Fd=yb.x;ic=yb._},function(yb){vd=yb.c;sb=yb.j;Xb=yb.a;Nb=yb.b;bc=yb.S},function(yb){hb=yb.CodeMirrorEnabledEditorPlugin},function(yb){cb=yb.localInterface;Hb=yb.systemInterfaceNamed;ec=yb.serverInterfaceFor;ub=yb.l2lInterfaceFor},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},
function(){},function(){},function(){}],execute:function(){var yb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js");yb.defaultWarnStyle={"border-bottom":"2px dotted orange"};yb.defaultErrorStyle={"background-color":"red"};var ba=function(Da){var zb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/checker.js"),db=zb.hasOwnProperty("JavaScriptChecker")&&"function"===typeof zb.JavaScriptChecker?zb.JavaScriptChecker:zb.JavaScriptChecker=function(ib){if(!ib||!ib[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return pd(db,Da,[{key:"uninstall",value:function(ib){var Ea=ib.text||ib;(Ea.markers||[]).forEach(function(W){return W.id.startsWith("js-checker-")&&Ea.removeMarker(W)});Ea.removeMarker("js-syntax-error")}},{key:"hasEmbeddedMorphInRange",value:function(ib,Ea){return Nd(ib.embeddedMorphMap.values()).find(function(W){return Ea.containsPosition(W.anchor.position)})}},{key:"onDocumentChange",value:function(ib,Ea,W){var T=Ea.document,ia=W.theme;try{var ka=W.parse()}catch(K){ka=K}ka&&(ib=(Ea.markers||
[]).filter(function(K){return K.id.startsWith("js-checker-")}),W=W.undeclaredVariables().map(function(K,ya){var pb=K.start,La=K.end;K.name;K.type;pb=T.indexToPosition(pb);La=T.indexToPosition(La);return Ea.addMarker({id:"js-checker-"+ya,style:ia?ia.warning:yb.defaultWarnStyle,range:{start:pb,end:La},type:"js-undeclared-var"})}),ib.slice(W.length).forEach(function(K){return Ea.removeMarker(K)}),ka.parseError?(ib=ka.parseError.loc,W=ib.column,ib=ib.line-1,yb.__inter0__=T.indexToPosition(ka.parseError.pos),
W=yb.__inter0__.column,ib=yb.__inter0__.row,ka={start:{column:W-1,row:ib},end:{column:W+1,row:ib}},this.hasEmbeddedMorphInRange(Ea,ka)||Ea.addMarker({id:"js-syntax-error",range:ka,style:ia?ia.error:yb.defaultErrorStyle,type:"js-syntax-error"})):Ea.removeMarker("js-syntax-error"))}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JavaScriptChecker"}}],zb,{pathInPackage:function(){return"./js/checker.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:143,end:2234})}(void 0);yb["default"]=ba;var wb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js");wb.query=Tc;wb.fuzzyParse=Jc;wb.acorn=$d;wb.custom=Bb;wb.walk=rd;var Xa=function(Da){var zb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/navigator.js"),db=zb.hasOwnProperty("JavaScriptNavigator")&&"function"===typeof zb.JavaScriptNavigator?zb.JavaScriptNavigator:zb.JavaScriptNavigator=function(ib){if(!ib||
!ib[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return pd(db,Da,[{key:"ensureAST",value:function(ib){return this.parse(ib.textString)}},{key:"parse",value:function(ib){return wb.fuzzyParse(ib)}},{key:"move",value:function(ib,Ea){var W=!!Ea.activeMark||!Ea.selection.isEmpty(),T=Ea.selection,ia=Ea.positionToIndex(T.lead);ib=this[ib](Ea.textString,ia);ib=Ea.indexToPosition(ib);T.isBackwards;T.lead=ib;W||(T.anchor=ib);Ea.scrollCursorIntoView()}},
{key:"forwardSexp",value:function(ib){this.move("_forwardSexp",ib)}},{key:"backwardSexp",value:function(ib){this.move("_backwardSexp",ib)}},{key:"backwardUpSexp",value:function(ib){this.move("_backwardUpSexp",ib)}},{key:"forwardDownSexp",value:function(ib){this.move("_forwardDownSexp",ib)}},{key:"_forwardSexp",value:function(ib,Ea){ib=this.parse(ib);ib=wb.custom.findNodesIncluding(ib,Ea).reverse().find(function(T){return T.end!==Ea});if(!ib)return Ea;if("BlockStatement"===ib.type){var W=ib.body.find(function(T){return T.start>
Ea});if(W)return W.start}return ib.end}},{key:"_backwardSexp",value:function(ib,Ea){ib=this.parse(ib);ib=wb.custom.findNodesIncluding(ib,Ea).reverse().find(function(T){return T.start!==Ea});if(!ib)return Ea;if("BlockStatement"===ib.type){var W=ib.body.slice().reverse().find(function(T){return T.end<Ea});if(W)return W.end}return ib?ib.start:Ea}},{key:"_backwardUpSexp",value:function(ib,Ea){ib=this.parse(ib);return(ib=wb.custom.findNodesIncluding(ib,Ea).reverse().find(function(W){return W.start!==Ea}))?
ib.start:Ea}},{key:"_forwardDownSexp",value:function(ib,Ea){ib=this.parse(ib);return(ib=wb.walk.findNodeAfter(ib,Ea,function(W,T){return T.start>Ea}))?ib.node.start:Ea}},{key:"markDefun",value:function(ib){var Ea=this.rangeForFunctionOrDefinition(ib.textString,[ib.positionToIndex(ib.selection.range.start),ib.positionToIndex(ib.selection.range.end)]);Ea&&ib.execCommand("expandRegion",{start:Ea[0],end:Ea[1]})}},{key:"rangeForNodesMatching",value:function(ib,Ea,W){ib=this.parse(ib);return(Ea=wb.custom.findNodesIncluding(ib,
Ea).reverse().find(W))?[Ea.start,Ea.end]:null}},{key:"rangeForFunctionOrDefinition",value:function(ib,Ea){var W=Ea[0]===Ea[1];return this.rangeForNodesMatching(ib,Ea[1],function(T){return["AssignmentExpression","FunctionDeclaration","FunctionExpression","MethodDefinition"].includes(T.type)&&(W&&T.end!==Ea[1]||!W&&T.start<Ea[0])?!0:!1})}},{key:"resolveIdentifierAt",value:function(ib,Ea){"number"!==typeof Ea&&(Ea=ib.positionToIndex(Ea));ib=this.ensureAST(ib);var W=wb.query.nodesAt(Ea,ib).reverse(),
T=W.find(function(ka){return"Identifier"===ka.type});if(!T&&((W=W[0])&&W.type.includes("Specifier")&&W.local&&"Identifier"===W.local.type&&(T=W.local),!T))return;Ea=(W=wb.query.findDeclarationClosestToIndex(ib,T.name,Ea))?wb.query.scopeAtIndex(ib,W.start):wb.query.scopeAtIndex(ib,Ea);var ia=wb.query.findReferencesAndDeclsInScope(Ea,T.name).refs;return{parsed:ib,scope:Ea,id:T,name:T.name,decl:W,refs:ia}}},{key:"expandRegion",value:function(ib,Ea,W,T){function ia(pb){pb=ib.positionToIndex({column:0,
row:K.row});return{range:[pb+ya.start,pb+ya.start+ya.value.length],prev:T}}var ka=T.range[0]!==T.range[1],K=ib.indexToPosition(T.range[0]),ya=ib.tokenAt(K);if(!ka&&ya&&["keyword","identifier"].includes(ya.type))return ia();W=W||this.parse(Ea);Ea=wb.query.nodesAtIndex(W,T.range[0]).reverse().find(function(pb){return pb.start<T.range[0]||pb.end>T.range[1]});if(!Ea)return T;W=Ea.start;ka=Ea.end;return"Literal"===Ea.type&&(Ea.raw||"").match(/^['"`]/)&&T.range[0]!==Ea.start&&T.range[1]!==Ea.end&&(Ea.start+
1<T.range[0]||Ea.end-1>T.range[1])?{range:[W+1,ka-1],prev:T}:{range:[W,ka],prev:T}}},{key:"contractRegion",value:function(ib,Ea,W,T){return T.prev||T}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JavaScriptNavigator"}}],zb,{pathInPackage:function(){return"./js/navigator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},
{start:125,end:6937})}(void 0);wb["default"]=Xa;var Za=window.lively.FreezerRuntime.recorderFor("lively.ide/js/snippets.js");Za.parseFunction=Id;var Sb=[["typef",'typeof ${0:object} === "function"$1'],["types",'typeof ${0:object} === "string"$1'],["typen",'typeof ${0:object} === "number"$1'],["typeu",'typeof ${0:object} === "undefined"$1'],["typenu",'typeof ${0:object} !== "undefined"$1'],["import",'import { ${0:name} } from "${1:module}";'],["importd",'import ${0:name} from "${1:module}";'],["import*",
'import * as ${0:name} from "${1:module}";'],["subclass","class ${0:name} extends ${1:base} {\n  constructor(${2:args}) {\n    super(${3:args})\n    $4\n  }\n}"],["class","class ${0:name} {\n  constructor(${1:args}) {\n    $2\n  }\n}"],["switch","switch (${0:expression}) {\n  case '${2:case}':\n    ${3:// code}\n    break;\n    $4\n    default:\n    ${1:// code}\n}"],["tryf","try {${0:/* code */}} finally {}"],["try","try {${0:/* code */}} catch (err) {}"],["do","do {${1:/* code */}} while (${0:/* condition */});"],
["fori","for (let ${0:prop} in ${1:obj}) {\n  ${2:obj[prop]}\n}"],["foro","for (let ${0:value} of ${1:iterable}) {\n  ${2:value}\n}"],["for-","for (let ${0:i} = ${1:list}.length; ${2:i}--; ) {\n  $3\n}"],["for","for (let ${0:i} = 0; ${1:i} < ${3:list}.length; ${2:i}++) {\n  $4\n}"],["Prom","new Promise((resolve, reject) => {$0})"],["keys","Object.keys($0)"],["assign","Object.assign(${0:dest}, ${1:source})"],["stringi","JSON.stringify(${0:object})"],["forE","forEach(${0:ea} => $1)"],["map","map(${0:ea} => $1)"],
["reduce","reduce((${1:all}, ${2:ea}) => {$3}, ${0:init})"],["from","Array.from(${0:list})"],["last","arr.last(${0:list})"],["pluck",'arr.pluck(${0:list}, "${1:key}")'],["sortBy","arr.sortBy(${0:list}, ($1) => $2)"],["join",'join("\\n")'],["con","connect(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["once","once(${0:source}, '${1:sourceAttr}', ${2:target}, '${3:targetAttr}');"],["sig","signal(${0:source}, '${1:sourceAttr}', ${2:value});"],["ll","lively.lang."],["lls","lively.lang.string."],
["lla","lively.lang.arr."],["llo","lively.lang.obj."],["llf","lively.lang.fun."],["llp","lively.lang.promise."],["withA","withAllSubmorphsDo(ea => { return ${0:ea}; })"],["$w","$world"],["$m","$morph('${0:name}')"],["get",'get("${0:name}")'],["vm","viewModel"],["$","${$0}"],["cl","console.log($0)"],["cw","console.warn($0)"],["ce","console.error($0)"],["s","show(`$0`);"],["l2lC",'import L2LClient from "lively.2lively/client.js";\nlet l2lClient = L2LClient.default();$0'],["afun","async function ${0:functionName}($1) {$2}"],
["fun","function ${0:functionName}($1) {$2}"],["fn","function($0) {$1}"],["f","($0) => $1"],["aw","await $0"],["docstring",function(Da){try{var zb=function(){for(var db=Da.split("\n"),ib=db[1],Ea=0,W="",T=1;;){var ia=db[T];Nd(ia).forEach(function(ya){"{"===ya&&Ea++;"}"===ya&&Ea--});T++;W+=ia;if(0===Ea)break}db=/return/m.test(W);ib=ib.replace("get ","function ");ib=ib.replace("set ","function ");ib=ib.replace("function ","");ib=ib.replace("async ","");ib=ib.match(/.* \(.*\).*$/gm)[0];ib=ib.substring(0,
ib.lastIndexOf(" "));ib=eval("(function "+ib+"{})");T=Za.parseFunction(ib).params.map(function(ya){if("Identifier"===ya.type)return ya.name;if("AssignmentPattern"===ya.type)return ya.left.name;if("RestElement"===ya.type)return ya.argument.name});ib="\n/**\n * ${0:description}\n";W=1;T=Ac(T);var ka;try{for(T.s();!(ka=T.n()).done;){var K=ka.value;ib=ib.concat(" * @param {${"+W++ +":type}} "+K+" - ${"+W++ +":description}\n")}}catch(ya){T.e(ya)}finally{T.f()}db&&(ib=ib.concat(" * @returns {${"+W++ +":type}} ${"+
W++ +":description}\n"));ib=ib.concat(" */");return{v:ib}}();if("object"===Pc(zb))return zb.v}catch(db){return"\n/**\n * ${0:description}\n */"}}],["fdesl","/* eslint-disable ${0:rule} */"],["desl","// eslint-disable-line ${0:rule}"]];Za.snippets=Sb;Za.snippets=Sb;var Cb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js");Cb.string=gd;Cb.JavaScriptChecker=ba;Cb.JavaScriptNavigator=Xa;Cb.completers=vd;Cb.jsSnippets=Sb;Cb.jsIdeCommands=sb;Cb.jsEditorCommands=Xb;Cb.astEditorCommands=
Nb;Cb.CodeMirrorEnabledEditorPlugin=hb;Cb.Snippet=bc;Cb.parser=nd;Cb.localInterface=cb;Cb.systemInterfaceNamed=Hb;Cb.serverInterfaceFor=ec;Cb.l2lInterfaceFor=ub;ba=Lc("default",function(Da){var zb=window.lively.FreezerRuntime.recorderFor("lively.ide/js/editor-plugin.js"),db=zb.hasOwnProperty("JavaScriptEditorPlugin")&&"function"===typeof zb.JavaScriptEditorPlugin?zb.JavaScriptEditorPlugin:zb.JavaScriptEditorPlugin=function(ib){if(!ib||!ib[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return pd(db,Da,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){pd._get(Object.getPrototypeOf(db.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this);this.checker=new Cb.JavaScriptChecker;this.evalEnvironment={format:"esm",targetModule:null,context:null}}},{key:"isJSEditorPlugin",get:function(){return!0}},{key:"shortName",get:function(){return"js"}},{key:"longName",get:function(){return"javascript"}},{key:"attach",value:function(ib){pd._get(Object.getPrototypeOf(db.prototype),
"attach",this).call(this,ib);this.evalEnvironment=Object.assign({},this.evalEnvironment,{context:ib})}},{key:"detach",value:function(ib){this.checker.uninstall(this.textMorph);pd._get(Object.getPrototypeOf(db.prototype),"detach",this).call(this,ib)}},{key:"getNavigator",value:function(){return new Cb.JavaScriptNavigator}},{key:"getCompleters",value:function(ib){return Cb.completers.concat(ib)}},{key:"getCommands",value:function(ib){return[].concat(Nd(pd._get(Object.getPrototypeOf(db.prototype),"getCommands",
this).call(this,ib)),Nd(Cb.jsIdeCommands),Nd(Cb.jsEditorCommands),Nd(Cb.astEditorCommands))}},{key:"getKeyBindings",value:function(ib){return[].concat(Nd(ib),[{keys:"Shift-Tab",command:{command:"[javascript] auto format code"}},{keys:"Ctrl-C E",command:"[javascript] list errors and warnings"},{keys:{mac:"Meta-Shift-L L I N T R",win:"Ctrl-Shift-L L I N T R"},command:"[javascript] eslint report"},{keys:{mac:"Meta-Shift-L L I N T P",win:"Ctrl-Shift-L L I N T P"},command:"[javascript] eslint preview fixes"},
{keys:{mac:"Meta-Shift-L L I N T F",win:"Ctrl-Shift-L L I N T F"},command:"[javascript] eslint fix"},{keys:{mac:"Meta-Shift-L M O D E",win:"Ctrl-Shift-L M O D E"},command:"change editor mode"},{keys:"Ctrl-C I",command:"[javascript] inject import"},{keys:"Ctrl-C C I",command:"[javascript] fix undeclared variables"}])}},{key:"getMenuItems",value:function(){var ib=ic(regeneratorRuntime.mark(function T(W){var ia,ka,K,ya,pb;return regeneratorRuntime.wrap(function(La){for(;;)switch(La.prev=La.next){case 0:return ia=
this.textMorph,ka=[{command:"doit",target:ia,showKeyShortcuts:!0},{command:"inspectit",target:ia,showKeyShortcuts:!0},{command:"editit",target:ia,showKeyShortcuts:!0},{command:"printit",target:ia,showKeyShortcuts:!0},{command:"print inspectit",alias:"print inspect",target:ia,showKeyShortcuts:!0},{command:"log it",target:ia,showKeyShortcuts:!0},{command:"eval all",target:ia,showKeyShortcuts:!0},{command:"text completion",alias:"code completion",target:ia,showKeyShortcuts:!0},{command:"blame line",
target:ia,showKeyShortcuts:!0},{command:"[javascript] list errors and warnings",alias:"list errors and warnings",target:ia,showKeyShortcuts:!0},{isDivider:!0}],this.evalEnvironment.targetModule&&ka.push({command:"[javascript] inject import",alias:"add import",target:ia},{command:"[javascript] fix undeclared variables",alias:"fix undeclared variables",target:ia},{command:"[javascript] remove unused imports",alias:"remove unused imports",target:ia}),K=this.getNavigator(),(ya=K.resolveIdentifierAt(ia,
ia.cursorPosition))&&ka.push({command:"selectDefinition",alias:'jump to definition of "'.concat(ya.name,'"'),target:ia},{command:"selectSymbolReferenceOrDeclaration",alias:'select all occurrences of "'.concat(ya.name,'"'),target:ia}),(pb=ia.selection.text.trim())&&ka.push({command:"open code search",alias:'code search for "'.concat(Cb.string.truncate(pb,30),'"'),target:ia.world(),args:{input:pb,backend:this.backend()}}),ka.push({isDivider:!0}),La.abrupt("return",ka.concat(W));case 10:case "end":return La.stop()}},
T,this)}));return function(W){return ib.apply(this,arguments)}}()},{key:"getSnippets",value:function(){return Cb.jsSnippets.map(function(ib){ib=Fd(ib,2);return new Cb.Snippet({trigger:ib[0],expansion:ib[1]})})}},{key:"sanatizedJsEnv",value:function(ib){ib=Object.assign({},this.evalEnvironment,{},ib);ib.format||(ib.formatd="esm");ib.context||(ib.context=this.textMorph);ib.sourceURL||(ib.sourceURL=ib.targetModule+"_doit_"+Date.now());ib.systemInterface||(ib.systemInterface=Cb.localInterface);return ib}},
{key:"backend",value:function(ib){ib=this.sanatizedJsEnv(ib);return ib.remote?ib.remote:"local"}},{key:"systemInterface",value:function(ib){return this.sanatizedJsEnv(ib).systemInterface||Cb.localInterface}},{key:"setSystemInterface",value:function(ib){return this.evalEnvironment.systemInterface=ib}},{key:"setSystemInterfaceNamed",value:function(ib){return this.setSystemInterface(Cb.systemInterfaceNamed(ib))}},{key:"runEval",value:function(ib,Ea){Ea=this.sanatizedJsEnv(Ea);return this.systemInterface(Ea).runEval(ib,
Ea)}},{key:"parser",get:function(){return Cb.parser}},{key:"parse",value:function(){var ib=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(this._ast&&this._ast._astType===ib)return this._ast;var Ea=this.parser,W=this.textMorph.textString;if(!Ea)return null;var T={withComments:!0,allowReturnOutsideFunction:!0};ib&&(T.type=ib);if(W.startsWith("#!")){var ia=W.indexOf("\n");W=" ".repeat(ia)+W.slice(ia)}Ea=Ea.fuzzyParse(W,T);Ea._astType=ib;return this._ast=Ea}},{key:"undeclaredVariables",
value:function(){var ib=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,Ea=this.parser;this.textMorph.document;var W=this.evalEnvironment.knownGlobals||[];ib=this.parse(ib);return Ea&&ib?Ea.query.findGlobalVarRefs(ib,{jslintGlobalComment:!0}).filter(function(T){return!W.includes(T.name)}):[]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"JavaScriptEditorPlugin"}}],zb,{pathInPackage:function(){return"./js/editor-plugin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.ide",version:"0.1.0"}}},{start:646,end:7565})}(Cb.CodeMirrorEnabledEditorPlugin));Cb["default"]=ba}}});