System.register("./__root_module__-be0d56fe.js ./index-2aae95d3.js ./color-picker-f9089dd8.js ./index-a225ba89.js ./index-57c34f7a.js ./index-0f8df4ee.js".split(" "),function(){var Pa,Lb,Vb,Dc,jc,qd,id,Cd,bd,Wc,Zc,zd,me,te,Je,jd,Zd,gc,$c,Bd,fd,Jd,fe,Zb,Gc,xd,Ic,Ad,Mb,mb,Ac,vc,ec,Bc;return{setters:[function(Ua){Pa=Ua.f;Lb=Ua.s;Vb=Ua.Y;Dc=Ua.aw;jc=Ua.a;qd=Ua.K;id=Ua.g;Cd=Ua.af;bd=Ua.aa;Wc=Ua.m;Zc=Ua.M;zd=Ua.I;me=Ua.b;te=Ua.R;Je=Ua.C;jd=Ua.c;Zd=Ua._;gc=Ua.o;$c=Ua.bB;Bd=Ua.bD;fd=Ua.a4;Jd=Ua.i;fe=
Ua.t;Zb=Ua.e;Gc=Ua.bz;xd=Ua.d;Ic=Ua.bN;Ad=Ua.r;Mb=Ua.P;mb=Ua.bO;Ac=Ua.bP},function(Ua){vc=Ua.I},function(Ua){ec=Ua.a;Bc=Ua.S},function(){},function(){},function(){}],execute:function(){var Ua=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");Ua.fun=Pa;Ua.string=Lb;Ua.obj=Vb;Ua.properties=Dc;Ua.arr=jc;Ua.Text=qd;Ua.config=id;Ua.HorizontalLayout=Cd;Ua.VerticalLayout=bd;Ua.morph=Wc;Ua.Morph=Zc;Ua.Icon=zd;Ua.pt=me;Ua.Rectangle=te;Ua.Color=Je;Ua.connect=jd;Ua.disconnect=Zd;Ua.once=gc;Ua.noUpdate=
$c;Ua.ColorPicker=ec;Ua.DropDownList=Bd;Ua.loadObjectFromPartsbinFolder=fd;Ua.cachedControls=new WeakMap;var hc=function(xc){var bc=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),Qa=bc.hasOwnProperty("RichTextControl")&&"function"===typeof bc.RichTextControl?bc.RichTextControl:bc.RichTextControl=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Qa,xc,[{key:"toggleButton",value:function(Da,ja){Da.master=
ja?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var Da=this.ui.fontSelection;Da.items=Ua.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable(Ua.config.text.basicFontItems)));this.target&&(Da.selection=this.target.fontFamily||Da.items[0].value,Ua.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",value:function(Da){Da=
void 0===Da?!!this.world():Da;var ja=this.target,Ba=ja.world()||$world,Ja=this.globalBounds();ja=(ja.selection.isEmpty()?ja.globalBounds():ja.getGlobalTransform().transformRectToRect(ja.selectionBounds().translatedBy(ja.scroll.negated()))).bottomCenter().subPt(Ja.topCenter());Ba=Ba.visibleBounds().translateForInclusion(Ja.translatedBy(ja)).topLeft().subPt(Ja.topLeft());Ba=this.position.addPt(Ba);Da?this.animate({duration:300,position:Ba}):this.position=Ba}},{key:"removeFocus",value:function(){var Da=
this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ja){return ja.targetObj===Da&&ja.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(Da,ja){ja=void 0===ja?!0:ja;var Ba=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return Ba.target&&Ua.disconnect(Ba.target,"selectionChange",Ba,"update"),Ba.target=Da,Ba.reset(),Ba.update(),Ja.yield(Ba.whenRendered(),
2);Ba.ui.fontSizeField.relayout();ja&&Ba.alignAtTarget();Ja.jumpToEnd()})}},{key:"setupConnections",value:function(){Ua.connect(this.ui.paddingField,"number",this,"setPadding");Ua.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");Ua.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");Ua.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");Ua.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var Da=this,ja=
this.target,Ba=this.updateSpec,Ja=ja.selection;Ja=!ja.readOnly&&Ja?Ja.isEmpty()?ja.textAttributeAt(Ja.start):ja.getStyleInRange(Ja):{};var Fb=this.managedProps,wa=Ua.obj.select(ja,Fb);ja=$jscomp.makeIterator(Object.entries(Ua.obj.select(Ja||{},Fb)));for(Ja=ja.next();!Ja.done;Ja=ja.next())Fb=$jscomp.makeIterator(Ja.value),Ja=Fb.next().value,Fb=Fb.next().value,"undefined"!==typeof Fb&&(wa[Ja]=Fb);Ua.noUpdate(function(){for(var Ka=$jscomp.makeIterator(Object.entries(Da.ui)),Rb=Ka.next();!Rb.done;Rb=
Ka.next()){var eb=$jscomp.makeIterator(Rb.value);Rb=eb.next().value;eb=eb.next().value;if(Ba[Rb])Ba[Rb](wa,eb)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(Da,ja){var Ba=this.target,Ja=Ba.selection;Ba.isLabel||Ja&&Ja.isEmpty()?Ba[Da]="function"===typeof ja?ja(Ba[Da]):ja:(Ba.undoManager.group(),Ba.changeStyleProperty(Da,function(Fb){return"function"===typeof ja?ja(Fb):ja}),Ba.undoManager.group())}},{key:"changeFont",value:function(Da){var ja=this,
Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return ja._last=Da,(Ba="custom..."===Da)?Ja.yield($world.prompt("Enter font family name",{requester:ja.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):Ja.jumpTo(2);if(2!=Ja.nextAddress&&(Da=Ja.yieldResult,!Da))return Ja.return();ja.changeAttributeInSelectionOrMorph("fontFamily",Da);Ja.jumpToEnd()})}},{key:"setPadding",value:function(Da){this.target.padding=Ua.Rectangle.inset(Da)}},{key:"setPaddingTop",
value:function(Da){var ja=this.target.padding;this.target.padding=Ua.Rectangle.inset(ja.left(),Da,ja.right(),ja.bottom())}},{key:"setPaddingLeft",value:function(Da){var ja=this.target.padding;this.target.padding=Ua.Rectangle.inset(Da,ja.top(),ja.right(),ja.bottom())}},{key:"setPaddingRight",value:function(Da){var ja=this.target.padding;this.target.padding=Ua.Rectangle.inset(ja.left(),ja.top(),Da,ja.bottom())}},{key:"setPaddingBottom",value:function(Da){var ja=this.target.padding;this.target.padding=
Ua.Rectangle.inset(ja.left(),ja.top(),ja.right(),Da)}},{key:"setLineWrapping",value:function(Da){this.target.lineWrapping=Da}},{key:"changeFontWeight",value:function(Da){this.changeAttributeInSelectionOrMorph("fontWeight",Da)}},{key:"changeTextAlign",value:function(Da){this.changeAttributeInSelectionOrMorph("textAlign",Da)}},{key:"changeFontColor",value:function(Da){this.changeAttributeInSelectionOrMorph("fontColor",Da)}},{key:"changeFontSize",value:function(Da){this.changeAttributeInSelectionOrMorph("fontSize",
Da)}},{key:"changeFixedWidth",value:function(Da){this.target.fixedWidth=Da}},{key:"changeFixedHeight",value:function(Da){this.target.fixedHeight=Da}},{key:"changeLink",value:function(){var Da=this,ja,Ba,Ja,Fb,wa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ka){if(1==Ka.nextAddress)return ja=Da.target,Ba=ja.selection,Ja=ja.getStyleInRange(Ba),Fb=Ja.link,Ka.yield(Da.world().prompt("Set link",{input:Fb||"https://"}),2);wa=Ka.yieldResult;ja.undoManager.group();ja.setStyleInRange({link:wa||
void 0},Ba);ja.undoManager.group();Da.autoRemove&&Da.remove();Ka.jumpToEnd()})}},{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(Da){return"underline"===Da?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(Da){return"italic"===Da?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(Da){return"bold"===Da||"700"===
Da?"normal":"bold"})}},{key:"copyStyle",value:function(){var Da=this,ja=this.target,Ba=this.ui.applyStyleButton;ja=ja.selection.isEmpty()?ja.defaultTextStyle:ja.getStyleInRange(ja.selection);var Ja=JSON.stringify(ja,null,2);this.constructor.copiedStyle=ja;Ba.tooltip="paste style\n"+Ja;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:Ja},{type:"application/morphic-text-style",styleString:Ja}]).then(function(){return Da.setStatusMessage("Copied style\n"+Ja)}).catch(function(Fb){return Da.showError(Fb)})}},
{key:"pasteStyle",value:function(){var Da=this,ja=this.target,Ba=this.constructor.copiedStyle;ja.selection.isEmpty()?Object.assign(ja,Ba):ja.selections.forEach(function(Ja){return ja.addTextAttribute(Da.constructor.copiedStyle,Ja)});this.update()}},{key:"clearStyle",value:function(){var Da=this.target;Da.selections.forEach(function(ja){return Da.resetStyleInRange(ja)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();
var Da=this.defaultSpec,ja=this.uiSpec;Da=this.addMorph({name:"config panel",layout:new Ua.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(Da).map(function(Ba){var Ja=ja.rows.some(function(Fb){return Fb.some(function(wa){return wa===Ba})});return{type:"labeledcheckbox",label:Ba,name:Ba,checked:Ja}})),[{layout:new Ua.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});
Da.center=this.innerBounds().center();Ua.connect(Da.getSubmorphNamed("OK button"),"fire",this,"configureAccepted");Ua.connect(Da.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var Da=this.getSubmorphNamed("config panel");Da&&(Da.remove(),Da.submorphs.filter(function(ja){return"LabeledCheckBox"===ja.constructor.name}))}},{key:"configureCanceled",value:function(){var Da=this.getSubmorphNamed("config panel");Da&&Da.remove()}},{key:"close",
value:function(){var Da=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(ja){return ja.targetObj===Da&&ja.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var Da=this.world();Da&&(Da=Da.focusedMorph)&&(Da.isLabel||Da.isText)&&!this.isAncestorOf(Da)&&this.target!==Da&&this.focusOn(Da,!1)}},{key:"onMouseUp",value:function(Da){var ja=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return Ba.yield(ja.whenRendered(),2);ja.update();Ba.jumpToEnd()})}},{key:"attachToWorld",value:function(){Ua.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},
selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},updateSpec:{get:function(){var Da=this;return Object.assign({fontSelection:function(ja,Ba){var Ja=ja.fontFamily;(ja=Ja&&Ba.items.find(function(Fb){return Fb.value.toLowerCase()===Ja.toLowerCase()}))?Ba.selection=ja.value:Ja&&(Ba.items=
Ba.items.concat({isListItem:!0,label:[Ja,{fontFamily:Ja}],value:Ja}),Ba.selection=Ua.arr.last(Ba.items))},fontWeightSelection:function(ja,Ba){Ba.selection="normal"==ja.fontWeight?"Medium":ja.fontWeight?Ua.string.capitalize(ja.fontWeight):"Medium"},boldButton:function(ja,Ba){Da.toggleButton(Ba,"bold"===ja.fontWeight)},italicButton:function(ja,Ba){Da.toggleButton(Ba,"italic"===ja.fontStyle)},underlineButton:function(ja,Ba){Da.toggleButton(Ba,"underline"===ja.textDecoration)},linkButton:function(ja,
Ba){Da.toggleButton(Ba,!!ja.link)},colorPicker:function(ja,Ba){Ba.colorValue=ja.fontColor},fontSizeField:function(ja,Ba){Ba.number=ja.fontSize},fixedWidthControl:function(ja,Ba){ja.isText?Ba.enable():Ba.disable();Ba.checked=ja.fixedWidth},fixedHeightControl:function(ja,Ba){ja.isText?Ba.enable():Ba.disable();Ba.checked=ja.fixedHeight},lineWrappingControl:function(ja,Ba){var Ja=$jscomp.makeIterator(Ba.submorphs);Ba=Ja.next().value;Ja=Ja.next().value;Ba.checked=!!ja.lineWrapping;ja.isText?Ba.enable():
Ba.disable();Ja.deactivated=!ja.lineWrapping;Ja.deactivated?Ja.opacity=.5:(Ja.opacity=1,Ja.selection=ja.lineWrapping)},paddingControl:function(ja,Ba){var Ja=ja.padding,Fb=Ja.left();ja=Ja.top();var wa=Ja.right();Ja=Ja.bottom();var Ka=!Ua.arr.every([Fb,ja,wa,Ja],function(Rb){return Rb==Fb});Ba.get("multi value indicator").visible=Ka;Ua.connect(Ba.get("multi value indicator"),"onMouseDown",Ba.get("padding field"),"number",{converter:"() => left",varMapping:{left:Fb}});try{Ba.get("padding field").number=
Fb,Ba.get("padding field").visible=!Ka,Ba.get("padding field top").number=ja,Ba.get("padding field left").number=Fb,Ba.get("padding field right").number=wa,Ba.get("padding field bottom").number=Ja}catch(Rb){}}},["left","center","right","block"].reduce(function(ja,Ba){ja[Ba+"Align"]=function(Ja,Fb){Fb.deactivated=!Ja.isText;Da.toggleButton(Fb,Ja.textAlign==Ba)};return ja},{}))}},ui:{get:function(){var Da=this,ja={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",
italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",
paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return Ua.obj.extract(ja,Ua.obj.keys(ja),function(Ba,Ja){return Da.getSubmorphNamed(Ja)})}}}}},{key:"openDebouncedFor",value:function(Da){var ja=Da.selection;if(ja.isEmpty()){var Ba=Ua.cachedControls.get(Da);Ba&&(Ba.update(),Ba.alignAtTarget(),Ba.world()||Da.world().addMorph(Ba))}else Ua.fun.debounceNamed(Da.id+"openRichTextControl",600,function(){var Ja=
Ua.cachedControls.get(Da);ja.isEmpty()?Ja&&Ja.removeFocus():(Ja&&Ja.world()||(Ja=new Ua.RichTextControl,Ua.cachedControls.set(Da,Ja)),Da.world().addMorph(Ja),Ja.focusOn(Da,!0),Ja.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(Da){var ja=Ua.cachedControls.get(Da);ja?ja.update():(ja=new Ua.RichTextControl,Ua.cachedControls.set(Da,ja),ja.focusOn(Da,!0),ja.alwaysTargetFocusedMorph());ja.alignAtTarget();ja.world()||Da.world().addMorph(ja);return ja}}],bc,{pathInPackage:function(){return"text/ui.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17716})}(Ua.Morph);Ua.RichTextControl=hc;Ua.RichTextControl=hc;Ua.RichTextControl=hc;var Eb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");Eb.Morph=Zc;Eb.touchInputDevice=fe;Eb.morph=Wc;Eb.Icon=zd;Eb.easings=Zb;Eb.pt=me;Eb.Color=Je;Eb.fun=Pa;Eb.connect=jd;Eb.TreeData=
Gc;hc=function(xc){var bc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Qa=bc.hasOwnProperty("SettingsTree")&&"function"===typeof bc.SettingsTree?bc.SettingsTree:bc.SettingsTree=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Qa,xc,[{key:"display",value:function(Da){return Da.panel?[Da.panel,{}]:Da.name}},{key:"collapse",value:function(Da,ja){Da.isCollapsed=ja}},{key:"isCollapsed",value:function(Da){return Da.isCollapsed}},
{key:"isLeaf",value:function(Da){return!Da.children}},{key:"getChildren",value:function(Da){var ja=this;return Da===this.root?Da.children.filter(function(Ba){return ja.target&&Ba.applicabilityCheck?eval(Ba.applicabilityCheck)(ja.target):!0}):Da.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("font")),
[" Rich Text",{fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(Eb.Icon.textAttribute("grip-vertical")),
[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:Eb.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},Eb.morph({height:20}),{}],children:[{panel:Eb.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},Eb.morph({height:20}),
{}],children:[{panel:Eb.morph({})}]}]})}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:284,end:2663})}(Eb.TreeData);Eb.SettingsTree=hc;Eb.SettingsTree=hc;Eb.SettingsTree=hc;hc=function(xc){var bc=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Qa=bc.hasOwnProperty("StylingSideBar")&&
"function"===typeof bc.StylingSideBar?bc.StylingSideBar:bc.StylingSideBar=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Qa,xc,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(Da){Da.nodes.forEach(function(ja){return Da.treeData.root==ja?Da.uncollapse(ja):Da.collapse(ja)})})}},{key:"onWorldResize",value:function(Da){Da=
void 0===Da?!0:Da;if(this.respondsToVisibleWindow){var ja=$world.visibleBounds(),Ba=navigator.standalone&&Eb.touchInputDevice?25:0,Ja=this.getSubmorphNamed("horizontal resizer");this.height=ja.height-Ba;this.top=Ba+ja.top();Ja.height=this.height;Ja.left=0;Ja.top=0;Da&&(this.visible?this.topRight=ja.topRight():this.topLeft=ja.topRight())}}},{key:"toggle",value:function(Da){var ja=this,Ba,Ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fb){switch(Fb.nextAddress){case 1:Ba=$world.visibleBounds();
Ja=navigator.standalone&&Eb.touchInputDevice?25:0;ja.height=Ba.height-Ja;ja.top=Ja+Ba.top();if(Da)return $world.addMorph(ja,$world.get("lively top bar")),ja.topLeft=Ba.topRight(),ja.visible=!0,Fb.yield(ja.whenRendered(),5);ja.detachFromWorld($world);return Fb.yield(ja.animate({opacity:0,topLeft:Ba.topRight(),duration:300}),4);case 4:ja.visible=!1;ja.remove();Fb.jumpTo(0);break;case 5:return ja.onWorldResize(!1),Fb.yield(ja.animate({opacity:1,easing:Eb.easings.outCirc,topRight:Ba.topRight(),duration:300}),
6);case 6:ja.attachToWorld($world),Fb.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var Da=this.withAllSubmorphsSelect(function(Fb){return Fb.anchors&&Fb.anchors.filter(function(wa){return!wa.id}).length}),ja={},Ba=$jscomp.makeIterator(Da),Ja=Ba.next();!Ja.done;ja={$jscomp$loop$prop$m$2986:ja.$jscomp$loop$prop$m$2986},Ja=Ba.next())ja.$jscomp$loop$prop$m$2986=Ja.value,ja.$jscomp$loop$prop$m$2986.anchors.forEach(function(Fb){return function(wa){return!wa.id&&Fb.$jscomp$loop$prop$m$2986.removeAnchor(wa)}}(ja));
return Da.length}},{key:"attachToWorld",value:function(Da){Eb.connect(Da,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(Da){var ja=this;Da.attributeConnections.forEach(function(Ba){Ba.targetObj===ja&&Ba.disconnect()})}},{key:"focusMorph",value:function(Da){if(!Da.isMorph||!Da.ownerChain().includes(this)){(Da.isLabel||Da.isText||Da.isButton)&&this.richTextControl.focusOn(Da,!1);var ja=this.getSubmorphNamed("style settings tree");ja.treeData.target=Da;ja.update(!0);
Object.values(this.controls).forEach(function(Ba){return Ba&&Ba.focusOn(Da)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(Da){return Da&&Da.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:2682,end:5727})}(Eb.Morph);hc=Eb.StylingSideBar;Eb.default=hc;var qc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");qc.Morph=Zc;qc.obj=Vb;qc.string=Lb;qc.connect=jd;qc.noUpdate=$c;qc.once=gc;hc=function(xc){var bc=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),Qa=bc.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof bc.ShapeFormatStyler?
bc.ShapeFormatStyler:bc.ShapeFormatStyler=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Qa,xc,[{key:Symbol.for("lively-instance-initialize"),value:function(Da){Jd._get(Object.getPrototypeOf(Qa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Da);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Da=this.ui,ja={},Ba=$jscomp.makeIterator(Object.entries(this.uiSpec)),
Ja=Ba.next();!Ja.done;ja={$jscomp$loop$prop$control$2988:ja.$jscomp$loop$prop$control$2988,$jscomp$loop$prop$prop$2989:ja.$jscomp$loop$prop$prop$2989},Ja=Ba.next()){var Fb=$jscomp.makeIterator(Ja.value);Ja=Fb.next().value;Fb=$jscomp.makeIterator(Fb.next().value);Fb.next();var wa=Fb.next().value;ja.$jscomp$loop$prop$prop$2989=Fb.next().value;ja.$jscomp$loop$prop$control$2988=Da[Ja];qc.connect(ja.$jscomp$loop$prop$control$2988,wa,this,"updateTarget",{updater:function(Ka){return function(Rb,eb){Ka.$jscomp$loop$prop$control$2988._updating=
!0;Rb(Ka.$jscomp$loop$prop$prop$2989,eb);Ka.$jscomp$loop$prop$control$2988._updating=!1}}(ja),varMapping:{prop:ja.$jscomp$loop$prop$prop$2989,control:ja.$jscomp$loop$prop$control$2988}})}}},{key:"update",value:function(){var Da=this,ja=this.target,Ba=ja.top,Ja=ja.left,Fb=ja.isImage,wa=ja.isLabel,Ka=ja.imageUrl,Rb=ja.textString,eb=ja.clipMode,Sc=ja.fill,Ob=ja.dropShadow,pd=ja.opacity,Uc=ja.height,Kc=ja.width;ja=this.ui;var Hb=ja.clipModeSelector,$d=ja.fillPicker,Tb=ja.opacityField,Gb=ja.shadowPicker,
La=ja.heightField,da=ja.widthField,Ha=ja.posXField,bb=ja.posYField,Qb=ja.imageUrlInput,uc=ja.labelContentInput;qc.noUpdate(function(){Da.updateControl(Gb,"shadowValue",Ob);Da.updateControl(Hb,"selection",eb);Da.updateControl($d,"colorValue",Sc);Da.updateControl(Tb,"number",pd);Da.updateControl(La,"number",Uc);Da.updateControl(da,"number",Kc);Da.updateControl(Ha,"number",Ja);Da.updateControl(bb,"number",Ba);$d.context=Da.target;Fb&&Da.updateControl(Qb,"input",Ka);Qb.owner.isLayoutable=Qb.owner.visible=
!!Fb;wa&&Da.updateControl(uc,"input",Rb);uc.owner.isLayoutable=uc.owner.visible=!!wa;var Tc=Da.getSubmorphNamed("special controls");(Tc.visible=!!wa||!!Fb)?Da.height=Tc.bottom:Da.height=Tc.top})}},{key:"updateTarget",value:function(Da,ja){this.target[Da]=ja;this.update()}},{key:"updateControl",value:function(Da,ja,Ba){Da._updating||qc.obj.equals(Da[ja],Ba)||(Da[ja]=Ba)}},{key:"updateMultiValue",value:function(Da,ja,Ba){var Ja=this.ui,Fb=Ja[this.join(Da)],wa=Fb.get("multi value indicator"),Ka=qc.obj.values(ja).some(function(Rb){return!qc.obj.isFunction(Rb)&&
!qc.obj.equals(Rb,ja.valueOf())});wa.left=0;Fb.visible=Fb.isLayoutable=!Ka;if(Ka&&wa.visible!=Ka)qc.once(wa,"onMouseDown",Fb,Ba,{converter:function(){return ja.valueOf()},varMapping:{value:ja}});wa.visible=wa.isLayoutable=Ka;wa.left=Ka?200:0;this.updateControl(Fb,Ba,ja.valueOf());Fb=$jscomp.makeIterator(["top","left","bottom","right"]);for(wa=Fb.next();!wa.done;wa=Fb.next())wa=wa.value,Ka=Ja[this.join(Da,wa)],this.updateControl(Ka,Ba,ja[wa])}},{key:"lower",value:function(Da){return Da.charAt(0).toLowerCase()+
Da.slice(1)}},{key:"join",value:function(Da,ja){return this.lower(qc.string.camelCaseString(Da+(ja?" "+ja:"")))}},{key:"unwrap",value:function(Da,ja,Ba){var Ja={};Ja=(Ja[this.lower(qc.string.camelCaseString(Da))]=[Da,ja,Ba],Ja);for(var Fb=$jscomp.makeIterator(["top","left","bottom","right"]),wa=Fb.next();!wa.done;wa=Fb.next()){wa=wa.value;var Ka=Da+" "+wa;Ja[this.lower(qc.string.camelCaseString(Ka))]=[Ka,ja,this.join(Ba,wa)]}return Ja}},{key:"focusOn",value:function(Da){var ja=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==
Ja.nextAddress)return!Da||ja.isAncestorOf(Da)||ja.target===Da||qc.obj.isArray(Da)||(ja.target=Da),Ba=ja.visible,ja.visible=!0,Ja.yield(ja.whenRendered(),2);if(3!=Ja.nextAddress)return ja.update(),Ja.yield(ja.whenRendered(),3);ja.getSubmorphsByStyleClassName("NumberWidget").map(function(Fb){return Fb.relayout()});ja.visible=Ba;Ja.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(Da){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Da){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var Da=this,ja=this.uiSpec;return this._ui||(this._ui=qc.obj.extract(ja,qc.obj.keys(ja),function(Ba,Ja){Ba=$jscomp.makeIterator(Ja).next().value;return Da.getSubmorphNamed(Ba)}))}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(qc.Morph);hc=qc.ShapeFormatStyler;qc.default=hc;var Cc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");Cc.Morph=Zc;Cc.ShadowPopover=Bc;Cc.connect=jd;Cc.signal=xd;hc=function(xc){var bc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),Qa=bc.hasOwnProperty("ShadowWidget")&&"function"===typeof bc.ShadowWidget?bc.ShadowWidget:
bc.ShadowWidget=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Qa,xc,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(Da){this.openPopover()}},{key:"update",value:function(Da){var ja=this.submorphs[0];
ja&&(ja.dropShadow=Da)}},{key:"openPopover",value:function(){var Da=this,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){if(1==Ba.nextAddress)return ja=new Cc.ShadowPopover({hasFixedPosition:!!Da.ownerChain().find(function(Ja){return Ja.hasFixedPosition}),shadowValue:Da.shadowValue}),Ba.yield(ja.fadeIntoWorld(Da.globalBounds().center()),2);Cc.connect(ja,"shadowValue",Da,"shadowValue");Cc.connect(Da,"shadowValue",Da,"update");Cc.signal(Da,"openWidget",ja);Ba.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(Da){this.setProperty("shadowValue",Da);this.update(Da)}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(Cc.Morph);hc=Cc.ShadowWidget;Cc.default=hc;var Yc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
Yc.Morph=Zc;Yc.obj=Vb;Yc.string=Lb;Yc.connect=jd;Yc.noUpdate=$c;Yc.once=gc;hc=function(xc){var bc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),Qa=bc.hasOwnProperty("BorderFormatStyler")&&"function"===typeof bc.BorderFormatStyler?bc.BorderFormatStyler:bc.BorderFormatStyler=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Qa,xc,[{key:"setupUI",value:function(){var Da=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(ja){var Ba=
Yc.string.camelCaseString(ja.name);Ba=Ba[0].toLowerCase()+Ba.slice(1);Da.ui[Ba]=ja})}},{key:"cleanupAnchors",value:function(){var Da=this.withAllSubmorphsSelect(function(Ja){return Ja.anchors&&Ja.anchors.filter(function(Fb){return!Fb.id})}),ja={};Da=$jscomp.makeIterator(Da);for(var Ba=Da.next();!Ba.done;ja={$jscomp$loop$prop$m$2991:ja.$jscomp$loop$prop$m$2991},Ba=Da.next())ja.$jscomp$loop$prop$m$2991=Ba.value,ja.$jscomp$loop$prop$m$2991.anchors.forEach(function(Ja){return function(Fb){return!Fb.id&&
Ja.$jscomp$loop$prop$m$2991.removeAnchor(Fb)}}(ja))}},{key:Symbol.for("lively-instance-initialize"),value:function(Da){Jd._get(Object.getPrototypeOf(Qa.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Da);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var Da=this.ui,ja={},Ba=$jscomp.makeIterator(Object.entries(this.uiSpec)),Ja=Ba.next();!Ja.done;ja={$jscomp$loop$prop$control$2993:ja.$jscomp$loop$prop$control$2993,$jscomp$loop$prop$prop$2994:ja.$jscomp$loop$prop$prop$2994},
Ja=Ba.next()){var Fb=$jscomp.makeIterator(Ja.value);Ja=Fb.next().value;Fb=$jscomp.makeIterator(Fb.next().value);Fb.next();var wa=Fb.next().value;ja.$jscomp$loop$prop$prop$2994=Fb.next().value;ja.$jscomp$loop$prop$control$2993=Da[Ja];Yc.connect(ja.$jscomp$loop$prop$control$2993,wa,this,"updateTarget",{updater:function(Ka){return function(Rb,eb){Ka.$jscomp$loop$prop$control$2993._updating=!0;Rb(Ka.$jscomp$loop$prop$prop$2994,eb);Ka.$jscomp$loop$prop$control$2993._updating=!1}}(ja),varMapping:{prop:ja.$jscomp$loop$prop$prop$2994,
control:ja.$jscomp$loop$prop$control$2993}})}}},{key:"update",value:function(){var Da=this,ja=this.target,Ba=ja.borderStyle,Ja=ja.borderColor,Fb=ja.borderRadius,wa=ja.borderWidth;Yc.noUpdate(function(){Da.updateMultiValue("border style selector",Ba,"selection");Da.updateMultiValue("border color picker",Ja,"colorValue");Da.updateMultiValue("border radius field",Fb,"number");Da.updateMultiValue("border width field",wa,"number")})}},{key:"updateTarget",value:function(Da,ja){this.target[Da]=ja;this.update()}},
{key:"updateControl",value:function(Da,ja,Ba){Da._updating||Yc.obj.equals(Da[ja],Ba)||(Da[ja]=Ba)}},{key:"updateMultiValue",value:function(Da,ja,Ba){var Ja=this.ui,Fb=Ja[this.join(Da)],wa=Fb.get("multi value indicator"),Ka=Yc.obj.values(ja).some(function(Rb){return!Yc.obj.isFunction(Rb)&&!Yc.obj.equals(Rb,ja.valueOf())});Fb.visible=Fb.isLayoutable=!Ka;if(Ka&&wa.visible!=Ka)Yc.once(wa,"onMouseDown",Fb,Ba,{converter:function(){return ja.valueOf()},varMapping:{value:ja}});wa.visible=wa.isLayoutable=
Ka;this.updateControl(Fb,Ba,ja.valueOf());Fb=$jscomp.makeIterator(["top","left","bottom","right"]);for(wa=Fb.next();!wa.done;wa=Fb.next())wa=wa.value,Ka=Ja[this.join(Da,wa)],this.updateControl(Ka,Ba,ja[wa])}},{key:"lower",value:function(Da){return Da.charAt(0).toLowerCase()+Da.slice(1)}},{key:"join",value:function(Da,ja){return this.lower(Yc.string.camelCaseString(Da+(ja?" "+ja:"")))}},{key:"unwrap",value:function(Da,ja,Ba){var Ja={};Ja=(Ja[this.lower(Yc.string.camelCaseString(Da))]=[Da,ja,Ba],Ja);
for(var Fb=$jscomp.makeIterator(["top","left","bottom","right"]),wa=Fb.next();!wa.done;wa=Fb.next()){wa=wa.value;var Ka=Da+" "+wa;Ja[this.lower(Yc.string.camelCaseString(Ka))]=[Ka,ja,this.join(Ba,wa)]}return Ja}},{key:"attachToWorld",value:function(){Yc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(Da){var ja=this,Ba;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ja){if(1==Ja.nextAddress)return!Da||ja.isAncestorOf(Da)||ja.target===Da||
Yc.obj.isArray(Da)||(ja.target=Da),Ba=ja.visible,ja.visible=!0,Ja.yield(ja.whenRendered(),2);if(3!=Ja.nextAddress)return ja.update(),Ja.yield(ja.whenRendered(),3);ja.getSubmorphsByStyleClassName("NumberWidget").map(function(Fb){return Fb.relayout()});ja.visible=Ba;Ja.jumpToEnd()})}},{key:"onHoverIn",value:function(Da){this.watchForTarget=!1}},{key:"onHoverOut",value:function(Da){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",
get:function(){return{uiSpec:{derived:!0,serialize:!1,get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(Yc.Morph);hc=Yc.BorderFormatStyler;Yc.default=hc;var rd=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");rd.Morph=Zc;rd.morph=Wc;rd.layouts=Ic;rd.string=Lb;rd.connect=jd;rd.noUpdate=$c;rd.InteractiveMorphSelector=vc;rd.Color=Je;rd.pt=me;hc=function(xc){var bc=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),
Qa=bc.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof bc.ShapeLayoutControl?bc.ShapeLayoutControl:bc.ShapeLayoutControl=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Qa,xc,[{key:"focusOn",value:function(Da){this.target=Da;this.update(!1)}},{key:"setupConnections",value:function(){var Da=this.ui;rd.connect(Da.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");rd.connect(Da.dragmeControl,
"onDragStart",this,"onSubmorphSettingsDragStart");rd.connect(Da.xAxisPolicyControl,"selection",this,"updateSubmorphConstraintLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});rd.connect(Da.yAxisPolicyControl,"selection",this,"updateSubmorphConstraintLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});
for(var ja={},Ba=$jscomp.makeIterator(this.managedProps),Ja=Ba.next();!Ja.done;ja={$jscomp$loop$prop$prop$2996:ja.$jscomp$loop$prop$prop$2996},Ja=Ba.next()){var Fb=$jscomp.makeIterator(Ja.value),wa=Fb.next().value;Ja=Fb.next().value;Fb.next().value||(ja.$jscomp$loop$prop$prop$2996=this.join(wa),Fb=Da[this.join(wa,"control")],rd.connect(Fb,Ja,this,"updateLayout",{updater:function(Ka){return function(Rb,eb){Rb(Ka.$jscomp$loop$prop$prop$2996,eb)}}(ja),varMapping:{prop:ja.$jscomp$loop$prop$prop$2996}}))}}},
{key:"lower",value:function(Da){return Da.charAt(0).toLowerCase()+Da.slice(1)}},{key:"join",value:function(Da,ja){return this.lower(rd.string.camelCaseString(Da+(ja?" "+ja:"")))}},{key:"updateLayoutOfTarget",value:function(Da){Da=rd.layouts[rd.string.camelCaseString(Da)];this.target.layout=Da?new Da({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(Da,ja){this.target.layout[Da]=ja}},{key:"update",value:function(Da){var ja=this;this.target&&rd.noUpdate(function(){for(var Ba=
ja.ui,Ja=ja.target.layout||{name:function(){return"No"}},Fb=$jscomp.makeIterator(ja.managedProps),wa=Fb.next();!wa.done;wa=Fb.next()){var Ka=$jscomp.makeIterator(wa.value);wa=Ka.next().value;var Rb=Ka.next().value;Ka.next();Ka=Ba[ja.join(wa,"control")];var eb=Ba[ja.join(wa,"label")];if(Rb)if("type"===wa)Ka.selection=Ja.name()+" Layout";else{var Sc=Ja[ja.join(wa)],Ob="undefined"!==typeof Sc;if(Ob){switch(wa){case "align":Ka.items=Ja.possibleAlignValues;break;case "direction":Ka.items=Ja.possibleDirectionValues;
break;case "axis":Ka.items=Ja.possibleAxisValues}Ka[Rb]=Sc}eb.isLayoutable=eb.visible=Ob}}ja.showGridLayoutControl("Grid"===Ja.name());ja.showProportionalControl("Proportional"===Ja.name())})}},{key:"updateSubmorphConstraintLayoutSettings",value:function(Da){var ja={};this.target.layout.changeSettingsFor(Da.submorph,(ja[Da.axis]=Da.policy,ja),!0)}},{key:"onSubmorphSettingsDragStart",value:function(Da){var ja=this;Da.stop();var Ba=this.target.layout,Ja=Ba.settingsFor(this.selectedSubmorph),Fb=[],
wa;for(wa in Ja)Fb=[].concat($jscomp.arrayFromIterable(Fb),[wa+": ",{fontWeight:"bold"},Ja[wa]+" ",{}]);var Ka=rd.morph({type:"label",fontColor:rd.Color.white,value:Fb,fill:rd.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});Ka.wantsToBeDroppedOn=function(Rb){return Ba.layoutableSubmorphs.includes(Rb)};Ka.onBeingDroppedOn=function(Rb,eb){Ka.remove();if(Rb=Ba.layoutableSubmorphs.includes(eb)?eb:Da.world.morphsContainingPoint(Da.hand.position).find(function(Sc){return Ba.layoutableSubmorphs.includes(Sc)}))ja.updateSubmorphConstraintLayoutSettings({policy:Ja.x,
axis:"x",submorph:Rb}),ja.updateSubmorphConstraintLayoutSettings({policy:Ja.y,axis:"y",submorph:Rb}),Rb.show(),$world.setStatusMessage("layout settings applied")};Da.hand.grab(Ka);Ka.moveBy(rd.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var Da=this,ja,Ba,Ja,Fb,wa,Ka,Rb,eb,Sc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ob){switch(Ob.nextAddress){case 1:return ja=Da.target.layout.layoutableSubmorphs,Da.manageFocus=!0,Da.env.eventDispatcher.isKeyPressed("Shift")?
(Ja=ja.map(function(pd){return{isListItem:!0,string:String(pd),value:pd}}),Ob.yield($world.listPrompt("Select morph",Ja,{onSelection:function(pd){return pd.show()}}),5)):Ob.yield(rd.InteractiveMorphSelector.selectMorph(Da.world(),Da,function(pd){return ja.includes(pd)}),4);case 4:Ba=Ob.yieldResult;Ob.jumpTo(3);break;case 5:Fb=Ob.yieldResult,wa=$jscomp.makeIterator(Fb.selected),Ba=wa.next().value;case 3:Da.manageFocus=!1;Da.selectedSubmorph=Ba;if(!Ba)return Ob.return();Ka=Da.ui;Rb=Ka.xAxisPolicyControl;
eb=Ka.yAxisPolicyControl;Sc=Da.target.layout.settingsFor(Ba);rd.noUpdate(function(){Rb.selection=Sc.x;eb.selection=Sc.y});Ob.jumpToEnd()}})}},{key:"showProportionalControl",value:function(Da){var ja=this.ui;[ja.submorphSettingsControl,ja.dragmeControl,ja.xAxisPolicyControl,ja.xAxisPolicyLabel,ja.yAxisPolicyControl,ja.yAxisPolicyLabel].forEach(function(Ba){Ba.isLayoutable=Da;Ba.visible=Da})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",
value:function(Da){var ja=this.ui.configureGridLayoutControl;ja.visible=ja.isLayoutable=Da}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations",
"checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,!0]]}},ui:{readOnly:!0,get:function(){for(var Da={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},ja=$jscomp.makeIterator(this.managedProps),Ba=ja.next();!Ba.done;Ba=ja.next()){var Ja=$jscomp.makeIterator(Ba.value).next().value;Ba=Ja+" label";Ja+=" control";Da[this.join(Ba)]=this.getSubmorphNamed(Ba);Da[this.join(Ja)]=
this.getSubmorphNamed(Ja)}return Da}}}}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(rd.Morph);hc=rd.ShapeLayoutControl;rd.default=hc;var fc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");fc.Morph=Zc;fc.resource=Ad;fc.arr=jc;fc.obj=Vb;
fc.string=Lb;fc.Path=Mb;fc.connect=jd;fc.getMastersMenu=mb;fc.resolvedMasters=Ac;hc=function(xc){var bc=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),Qa=bc.hasOwnProperty("MasterComponentControl")&&"function"===typeof bc.MasterComponentControl?bc.MasterComponentControl:bc.MasterComponentControl=function(Da){Da&&Da[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return Jd(Qa,xc,[{key:"focusOn",value:function(Da){this.target=
Da;this.update()}},{key:"onMouseUp",value:function(Da){var ja=this,Ba,Ja,Fb,wa,Ka,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress){"auto master selection"==Da.targetMorph.name&&(Ba="auto");"hover master selection"==Da.targetMorph.name&&(Ba="hover");"click master selection"==Da.targetMorph.name&&(Ba="click");ja.refreshButtons();if(!ja.target)return eb.return();Ja=$jscomp.makeIterator(["auto","hover","click"]);for(Fb=Ja.next();!Fb.done;Fb=Ja.next())wa=Fb.value,
ja.target.master&&ja.target.master[wa]&&!ja.get(wa+" master checkbox").checked&&ja.adjustMasterComponent(wa,null);if(!Ba)return eb.jumpTo(0);Ka=ja;Rb=Ka.openMenu;return eb.yield(ja.getMastersMenu(Ba),3)}Rb.call(Ka,eb.yieldResult,Da);eb.jumpToEnd()})}},{key:"getMastersMenu",value:function(Da){var ja=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ba){return 1==Ba.nextAddress?Ba.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(fc.resolvedMasters)),[ja.world().name]).map(function(Ja){var Fb,
wa,Ka,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){return 1==eb.nextAddress?(wa=(Fb=Ja==ja.world().name)?"This World":Ja,Ka=ja,Rb=Ka.componentsToMenu,eb.yield(fc.resource("styleguide://"+Ja+"/").dirList(),2)):eb.return([wa,Rb.call(Ka,eb.yieldResult,Da)])})})),2):Ba.return(Ba.yieldResult)})}},{key:"componentsToMenu",value:function(Da,ja,Ba,Ja){var Fb=this;Ba=void 0===Ba?null:Ba;Ja=void 0===Ja?1:Ja;Ba||(Ba=Da.map(function(Ka){return{name:fc.arr.last(Ka.name.split("/")),path:Ka.name.split("/"),
value:Ka}}));if(0==Ba.length||100<Ja)return[];var wa=this;return fc.arr.flatten(Object.entries(fc.arr.groupBy(Ba,function(Ka){return Ka.path[Ja-1]})).map(function(Ka){var Rb=$jscomp.makeIterator(Ka);Ka=Rb.next().value;Rb=Rb.next().value;var eb=$jscomp.makeIterator(fc.arr.partition(Rb,function(Sc){return Sc.path.length<=Ja}));Rb=eb.next().value;eb=eb.next().value;Ka=[Ka,Fb.componentsToMenu(null,ja,eb,Ja+1)];return[].concat($jscomp.arrayFromIterable(Rb.map(function(Sc){return[Sc.name,function(){wa.adjustMasterComponent(ja,
Sc.value)}]})),$jscomp.arrayFromIterable(Ka[1].length?[Ka]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(Da){var ja=this,Ba,Ja,Fb,wa,Ka,Rb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(eb){if(1==eb.nextAddress)return Ba=ja.world().metadata.commit.name,Ja=fc.resource("styleguide://"+Ba+"/"),eb.yield(Ja.dirList(),2);if(3!=eb.nextAddress)return Fb=eb.yieldResult,eb.yield(fc.resource("styleguide://System/").dirList(),3);wa=eb.yieldResult;Ka=ja.componentsToMenu(Fb,Da);Rb=ja.componentsToMenu(wa,
Da);return eb.return([].concat($jscomp.arrayFromIterable(0<Ka.length?[].concat($jscomp.arrayFromIterable(Ka),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(Rb)))})}},{key:"adjustMasterComponent",value:function(Da,ja){if(this.target.master)this.target.master[Da]=ja;else if(ja){var Ba={};this.target.master=(Ba[Da]=ja,Ba)}Da=this.target.master;ja=Da.hover;Ba=Da.click;Da.auto||ja||Ba||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(Ja){return delete Ja._parametrizedProps});
this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(Da,ja,Ba,Ja){var Fb=this;Ba=void 0===Ba?null:Ba;Ja=void 0===Ja?1:Ja;Ba||(Ba=Da.map(function(Ka){return{name:fc.arr.last(Ka.name.split("/")),path:Ka.name.split("/"),value:Ka}}));if(0==Ba.length||100<Ja)return[];var wa=this;return fc.arr.flatten(Object.entries(fc.arr.groupBy(Ba,function(Ka){return Ka.path[Ja-1]})).map(function(Ka){var Rb=$jscomp.makeIterator(Ka);Ka=Rb.next().value;Rb=Rb.next().value;var eb=$jscomp.makeIterator(fc.arr.partition(Rb,
function(Sc){return Sc.path.length<=Ja}));Rb=eb.next().value;eb=eb.next().value;Ka=[Ka,Fb.componentsToMenu(null,ja,eb,Ja+1)];return[].concat($jscomp.arrayFromIterable(Rb.map(function(Sc){return[Sc.name,function(){wa.adjustMasterComponent(ja,Sc.value)}]})),$jscomp.arrayFromIterable(Ka[1].length?[Ka]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var Da=$jscomp.makeIterator(["auto","hover","click"]),ja=Da.next();!ja.done;ja=Da.next()){ja=ja.value;var Ba=this.getSubmorphNamed(ja+" master selection"),
Ja=this.getSubmorphNamed(ja+" master checkbox");fc.Path(["master",ja]).get(this.target)?Ja.checked=!0:Ja.checked=!1;Ba.label=fc.string.truncateLeft(fc.Path(["master",ja,"name"]).get(this.target)||"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var Da=$jscomp.makeIterator(["auto","hover","click"]),ja=Da.next();!ja.done;ja=Da.next()){ja=ja.value;var Ba=this.getSubmorphNamed(ja+" master selection"),Ja=this.getSubmorphNamed(ja+" master checkbox");Ba=Ba.deactivated=
!Ja.checked;this.getSubmorphNamed(ja+" master selection").opacity=Ba?.5:1}Da=this.getSubmorphNamed("overridden props list");Da.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=!Da.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(Da){return Da.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var Da=this.getSubmorphNamed("overridden props list").selection;
this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[Da]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var Da=this.getMasterForTarget();return Da&&Da._overriddenProps?(Da=Da._overriddenProps.get(this.target))?Object.keys(Da):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],bc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"MasterComponentControl",version:"0.1.1-110"}}},{start:315,end:6250})}(fc.Morph);hc=fc.MasterComponentControl;fc.default=hc}}});