System.register(["./__rootModule___commonjs-entry-71573ff5.js","@babel/plugin-syntax-import-meta"],function(Lc,pd){var Nd,Tc,Jc,$d;return{setters:[function(Bb){Nd=Bb._;Tc=Bb.G;Jc=Bb.j;$d=Bb.aE},function(){}],execute:function(){function Bb(gd){return rd.apply(this,arguments)}function rd(){rd=Nd(regeneratorRuntime.mark(function Fd(nd){var ic,vd,sb=arguments;return regeneratorRuntime.wrap(function(Xb){for(;;)switch(Xb.prev=Xb.next){case 0:return ic=1<sb.length&&void 0!==sb[1]?sb[1]:[],Xb.next=3,pd.import("mocha-es6/index.js");
case 3:return vd=Xb.sent,Xb.abrupt("return",vd.loadTestModuleAndExtractTestState(nd,ic));case 5:case "end":return Xb.stop()}},Fd)}));return rd.apply(this,arguments)}function Id(gd,nd,Fd,ic){return Ac.apply(this,arguments)}function Ac(){Ac=Nd(regeneratorRuntime.mark(function sb(nd,Fd,ic,vd){var Xb,Nb,bc,hb,cb,Hb;return regeneratorRuntime.wrap(function(ec){for(;;)switch(ec.prev=ec.next){case 0:Hb=function(ub){return new Promise(function(yb,ba){var wb=Pc.arr.compact(ub.suite.suites).map(function(Za){return Za.file}),
Xa=Pc.chain(Fd).filter(function(Za){return wb.includes(Za.file)}).pluck("tests").flat().value();if(!Xa||!Xa.length)return ba(Error("Trying to run tests of ".concat(wb.join(", ")," but cannot find them in loaded tests!")));ub.reporter(function(Za){Za.on("test",function(Sb){try{var Cb=Xa.find(function(Da){return Da.fullTitle===Sb.fullTitle()});Cb.state="running";"function"===typeof ic&&ic(Cb,"test")}catch(Da){"function"===typeof vd&&vd(Da,"test")}});Za.on("pass",function(Sb){try{var Cb=Xa.find(function(Da){return Da.fullTitle===
Sb.fullTitle()});Cb.state="succeeded";Cb.duration=Sb.duration;"function"===typeof ic&&ic(Cb,"pass")}catch(Da){"function"===typeof vd&&vd(Da,"pass")}});Za.on("fail",function(Sb,Cb){try{var Da=function(ib,Ea,W){ib.state="failed";ib.duration=ib.duration;ib.error=Ea},zb=Xa.find(function(ib){return ib.fullTitle===Sb.fullTitle()});if(zb)Da(zb,Cb,Sb.duration);else{var db=Pc.arr.invoke(Sb.parent.tests,"fullTitle");Xa.filter(function(ib){return db.includes(ib.fullTitle)}).forEach(function(ib){return Da(ib,
Cb,Sb.duration)})}"function"===typeof ic&&ic(zb,"fail")}catch(ib){"function"===typeof vd&&vd(ib,"fail")}})});ub.run(function(Za){return yb({testsByFile:Fd,mocha:ub})})})},Xb=Tc(Fd),ec.prev=2,Xb.s();case 4:if((Nb=Xb.n()).done){ec.next=15;break}bc=Nb.value.file;ec.next=8;return Pc.loadMochaTestFile(bc,Fd);case 8:return hb=ec.sent,cb=hb.mocha,nd&&(cb=cb.grep(nd)),ec.next=13,Hb(cb);case 13:ec.next=4;break;case 15:ec.next=20;break;case 17:ec.prev=17,ec.t0=ec["catch"](2),Xb.e(ec.t0);case 20:return ec.prev=
20,Xb.f(),ec.finish(20);case 23:return ec.abrupt("return",{mocha:cb,testsByFile:Fd});case 24:case "end":return ec.stop()}},sb,null,[[2,17,20,23]])}));return Ac.apply(this,arguments)}Lc({loadMochaTestFile:Bb,runMochaTests:Id});var Pc=window.lively.FreezerRuntime.recorderFor("lively-system-interface/commands/mocha-tests.js");Pc.loadMochaTestFile=Bb;Pc.runMochaTests=Id;Pc.arr=Jc;Pc.chain=$d;Pc.loadMochaTestFile=Bb;Pc.runMochaTests=Id}}});