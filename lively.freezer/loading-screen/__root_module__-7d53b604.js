System.register(["lively.collab","kld-intersections"],function(wa,bb){var ib,Qb,Ib;return{setters:[function(ed){ib=ed.Comment;Qb=ed.CommentBrowser},function(ed){Ib=ed.default}],execute:function(){function ed(g,c,h){h=h||0;var d=[];if(g<=c)for(0>=h&&(h=-h||1);g<=c;g+=h)d.push(g);else for(0<=h&&(h=-h||-1);g>=c;g+=h)d.push(g);return d}function qc(g,c){for(var h=Array(g);0<g;)h[--g]=c;return h}function pd(g,c){for(var h=Array(g);0<g;)h[--g]=c(g);return h}function uc(g,c,h){for(var d=[],k=0;k<g.length;k++){var n=
g[k];c.call(h,n)&&d.push(n)}return d}function Ac(g,c,h,d){d=void 0===d?!1:d;if(g&&qb.isArray(g)){for(var k=0,n=g.length-1;k<=n;){var b=k+Math.floor((n-k)/2),e=h?h(g[b]):g[b];if(e===c)return g[b];e>c?n=b-1:k=b+1}if(d){if(!g[k])return g[n];if(!g[n])return g[k];d=h?h(g[k]):g[k];h=h?h(g[n]):g[n];return 0>Math.abs(d-c)-Math.abs(h-c)?g[k]:g[n]}}}function dd(g,c){var h;g.find(function(d,k){return h=c(d,k)});return h}function Ad(g,c){return g.filter(function(h){return!!h[c]})}function le(g,c,h){"string"===
typeof c&&(c=new RegExp(c,"i"));return qb.filter(g,qb.filter.test.bind(c))}function Le(g,c){return qb.filter(g,function(h,d){return!!c[d]})}function ae(g,c,h){return qb.filter(g,function(d,k){return!c.call(h,d,k)})}function lc(g,c){return qb.filter(g,function(h){return!h[c]})}function Wc(g,c){return qb.filter(g,function(h){return h!==c})}function Ed(g,c){return qb.filter(g,function(h){return-1===c.indexOf(h)})}function Tb(g,c){if(!g.length)return g;var h=[g[0]];if(c)for(c=1;c<g.length;c++){var d=
g[c];d!==h[h.length]&&h.push(d)}else for(c=1;c<g.length;c++)d=g[c],-1===h.indexOf(d)&&h.push(d);return h}function Bd(g,c,h){for(var d=g.slice(),k=d.length;k--;)for(var n=g[k],b=k+1;b<d.length;b++)c.call(h,n,d[b])&&d.splice(b--,1);return d}function Sd(g,c){for(var h={},d=[],k=0;k<g.length;k++){var n=g[k];h[n[c]]||(h[n[c]]=!0,d.push(n))}return d}function hc(g){return qb.filter(g,Boolean)}function mc(g){for(var c=0,h=0,d=g.length;c<d;)g.hasOwnProperty(c)&&(g[h++]=g[c]),c++;for(;h++<d;)g.pop();return g}
function Hb(g,c,h){return g.forEach(c,h)}function ec(){var g=Array.from(arguments),c=g.shift(),h="function"===typeof qb.last(g)?g.pop():function(k){return k},d=[c].concat(g).map(function(k){return Array.from(k)});return c.map(function(k,n){return h(qb.pluck(d,n),n)})}function vc(g,c){if("number"===typeof c){if(0>=c)return g;c--}return g.reduce(function(h,d){return h.concat(Array.isArray(d)?vc(d,c):[d])},[])}function gd(g,c,h){for(var d=[],k=0;k<g.length;k++)d.push.apply(d,c.call(h,g[k],k));return d}
function Zc(g,c){return g.reduce(function(h,d){0<h.length&&h.push(c);h.push(d);return h},[])}function Za(g,c){return qb.interpose(g,c)}function Xa(g,c,h){return g.map(c,h)}function jb(g,c,h,d,k,n,b,e){return g.map(function(l){return l[c](h,d,k,n,b,e)})}function Fa(g,c){return g.map(function(h){return h[c]})}function Ea(g,c,h,d){return g.reduce(c,h,d)}function ka(g,c,h,d){return g.reduceRight(c,h,d)}function ja(g,c,h){return g.some(c,h)}function Ca(g,c,h){return g.every(c,h)}function mb(g,c){var h=
g.length;if(!c||h!==c.length)return!1;for(var d=0;d<h;d++){if(g[d]&&c[d]&&g[d].equals&&c[d].equals)if(g[d].equals(c[d]))continue;else return!1;if(g[d]!=c[d])return!1}return!0}function Ub(g,c){var h=g.length;if(!c||h!==c.length)return!1;for(var d=0;d<h;d++)if(!qb.objectEquals(g[d],c[d]))return!1;return!0}function Ya(g,c){if(c)for(c=1;c<g.length;c++){if(g[c-1]<g[c])return!1}else for(c=1;c<g.length;c++)if(g[c-1]>g[c])return!1;return!0}function $a(g,c){return g.sort(c)}function Ua(g,c,h){return qb.pluck(g.map(function(d,
k){return{value:d,criteria:c.call(h,d,k)}}).sort(function(d,k){d=d.criteria;k=k.criteria;return d<k?-1:d>k?1:0}),"value")}function U(g,c){return qb.sortBy(g,function(h){return h[c]})}function Ba(g){return g.reverse()}function K(g){return g.slice().reverse()}function V(g,c,h){h=h||String;return g.map(function(d){return h(d).match(c)})}function ra(g){return g[0]}function Ja(g){return g[g.length-1]}function hb(g,c){return qb.filter(qb.uniq(g),function(h){return-1<c.indexOf(h)})}function dc(g,c){g=g.slice();
for(var h=0;h<c.length;h++){var d=c[h];-1===g.indexOf(d)&&g.push(d)}return g}function na(g,c,h){g.splice(h,0,c)}function oa(g,c){g.splice(c,1)}function wb(g,c){var h=g.indexOf(c);0<=h&&qb.removeAt(g,h);return c}function fc(g,c){g.push.apply(g,c);return g}function Qa(g,c,h){g.splice.apply(g,[h,0].concat(c))}function Lc(g,c){g.includes(c)||g.push(c)}function ld(g,c,h){g.splice(h,1,c)}function od(g){g.length=0;return g}function Be(g,c){for(var h=0;h<g.length;h++)if(!c.includes(g[h]))return!1;return!0}
function sd(g,c,h,d){h=h||qb.NullFunction;d=d||qb.GLOBAL;c=c||function(k,n,b){n.call(d,k,b)};return g.reduceRight(function(k,n,b){return function(){c.call(d,k,n,b)}},h)()}function Ze(g,c,h,d,k,n){d=d||function(){};return g.clone().reverse().reduce(function(b,e,l){return function(){c.call(k||qb.GLOBAL,e,l);n&&0!==l%n?b():b.delay(h)}},d)()}function Hf(){var g=Array.from(arguments),c=g.shift(),h=c.length,d=!1;if(1===g.length){var k=g[0].progressBar;var n=g[0].iterator;var b=g[0].labelFunction;var e=
g[0].whenDone;var l=g[0].context}else k=g[0],n=g[1],b=g[2],e=g[3],l=g[4];l||(l="undefined"!==typeof window?window:global);b||(b=function(a){return a});k||(d=!0,k=(g=("undefined"!==typeof window?window:global).lively&&lively.morphic&&lively.morphic.World.current())?g.addProgressBar():{value:null,label:null,remove:function(){}});k.value=0;c.reduceRight(function(a,f,m){return function(){try{k.value=m/h,b&&(k.label=b.call(l,f,m)),n.call(l,f,m)}catch(q){console.error("Error in forEachShowingProgress at %s (%s)\n%s\n%s",
m,f,q,q.stack)}qb.delay(a,0)}},function(){k.value=1;d&&function(){k.remove()}.delay(0);e&&e.call(l)})();return c}function sc(g,c,h){0>c&&(c=g.length+c);0>h&&(h=g.length+h);var d=g[c];g[c]=g[h];g[h]=d;return g}function Yb(g,c){c=c||1;return g.slice(c).concat(g.slice(0,c))}function Ce(g,c,h){return qb.Group.fromArray(g,c,h)}function Wb(g,c){return qb.groupBy(g,function(h){return h[c]})}function cb(g,c,h){c=c||function(n){return n};var d=[],k=[];g.forEach(function(n,b){(c.call(h,n,b)?d:k).push(n)});
return[d,k]}function Xb(g,c,h){function d(n,b){if(!b.length)return[n,[]];var e=b[0];b=b.slice(1);var l=n.concat([e]);if(c.call(h,l))return d(l,b);n=d(n,b);return[n[0],[e].concat(n[1])]}function k(n,b){if(!b.length)return n;b=d([],b);if(!b[0].length)throw Error("Batchify constrained does not ensure consumption of at least one item per batch!");return k(n.concat([b[0]]),b[1])}return k([],g)}function H(g,c){c=c||1;return qb.range(0,Math.ceil(g.length/c)-1).map(function(h){return g.slice(h*c,h*c+c)},
g)}function pa(g,c){for(var h=g.map(function(b,e){return b[c[e]]}),d=c.slice(),k=g.length;k--;0<=k){var n=d[k]+1;if(g[k][n]){d[k]=n;break}else if(0===k){d=void 0;break}else d[k]=0}return[h,d]}function Sa(g){for(var c=g.reduce(function(n,b){return n*b.length},1),h=g.map(function(n){return 0}),d=Array(c),k=0;k<c;k++)h=qb.combinationsPick(g,h),d[k]=h[0],h=h[1];return d}function rb(g,c){return g.slice(0,c)}function Sb(g,c){return g.slice(c)}function Eb(g,c,h){for(var d=0;d<g.length&&c.call(h,g[d],d);d++);
return g.slice(0,d)}function Mc(g,c,h){for(var d=0;d<g.length&&c.call(h,g[d],d);d++);return g.slice(d)}function Fc(g){for(var c=qb.range(0,g.length-1),h=Array(g.length),d=0;d<g.length;d++){var k=c.splice(Math.round(Math.random()*(c.length-1)),1);h[k]=g[d]}return h}function xd(g,c,h){c=c||function(k){return k};var d;g.reduce(function(k,n,b){b=c.call(h,n,b);if("number"!==typeof b||b<=k)return k;d=n;return b},-Infinity);return d}function Ve(g,c,h){c=c||function(d){return d};return qb.max(g,function(d,
k){return-c.call(h,d,k)})}function Kd(g){for(var c=0,h=0;h<g.length;h++)c+=g[h];return c}function fe(g,c){return g.reduce(function(h,d){return d===c?h+1:h},0)}function ge(g){return g.length}function te(g,c){if("undefined"===typeof c||"number"===typeof c){var h=c||Math.ceil(Math.log(g.length)/Math.log(2)+1),d=Math.ceil(Math.round(g.length/h));return qb.range(0,h-1).map(function(k){return g.slice(k*d,(k+1)*d)})}if(c instanceof Array)return g.reduce(function(k,n){if(n<c[1])return k[0].push(n),k;for(var b=
1;b<c.length;b++)if(n>=c[b]&&(!c[b+1]||n<=c[b+1]))return k[b].push(n),k;throw Error("Histogram creation: Cannot group data "+n+" into thresholds "+c);},qb.range(1,c.length).map(function(){return[]}))}function Kc(g){return[].concat(g)}function ef(g){return qb.from(g)}function Ue(g,c,h){return g.forEach(c,h)}function Se(g,c,h){return g.every(c,h)}function vf(g,c,h){return g.some(c,h)}function Df(g,c,h){return g.map(c,h)}function $b(g,c,h){return qb.filter(g,c,h)}function Og(g,c,h,d){d&&(h=h.bind(d));
return g.reduce(h,c)}function ph(g,c,h){function d(b,e){if(!n&&(b||e)){n=!0;try{h(b,k)}catch(l){console.error("Error in mapAsyncSeries - callback invocation error:\n"+(l.stack||l))}}}var k=[],n=!1;return g.reduceRight(function(b,e,l){if(!n)return function(a,f){if(a)return d(a);0<l&&k.push(f);try{c(e,l,qb.once(b))}catch(m){d(m)}}},function(b,e){k.push(e);d(b,!0)})()}function pg(g,c,h,d){function k(){for(;f<c.parallel&&a<g.length;)m[a++]()}function n(q,r){if(!(-1<e.indexOf(q)||(e.push(q),f--,l)))if(!r&&
e.length<g.length)k();else{l=!0;try{d&&d(r,b)}catch(u){console.error("Error in mapAsync - main callback invocation error:\n"+(u.stack||u))}}}"function"===typeof c&&(d=h,h=c,c=null);c=c||{};if(!g.length)return d&&d(null,[]);c.parallel||(c.parallel=Infinity);var b=[],e=[],l=!1,a=0,f=0,m=g.map(function(q,r){return function(){f++;try{h(q,r,qb.once(function(u,v){b[r]=u||v;n(r,u)}))}catch(u){n(r,u)}}});return k()}function Je(){return function(){}}function ya(){return function(g){return g}}function Oa(){return function(){return null}}
function nb(){return function(){return!1}}function R(){return function(){return!0}}function xa(){return function(){throw Error("Not yet implemented");}}function Va(g){var c=[],h;for(h in g)g.__lookupGetter__(h)||"function"!==typeof g[h]||c.push(h);return c}function eb(g){var c=[],h;for(h in g)!g.__lookupGetter__(h)&&g.hasOwnProperty(h)&&"function"===typeof g[h]&&c.push(h);return c}function ac(g){if(g.superclass)return[];var c=g.toString();g="";var h=c.match(/(?:\(([^\)]*)\)|([^\(\)-+!]+))\s*=>/);
h?g=h[1]||h[2]||"":(c=c.match(/^[\s\(]*function[^(]*\(([^)]*)\)/))&&c[1]&&(g=c[1]);return g.replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",").map(function(d){return d.trim()}).filter(function(d){return!!d})}function Db(g){var c="";g.declaredClass?c+=g.declaredClass+">>":g.declaredObject&&(c+=g.declaredObject+".");return c+(g.methodName||g.displayName||g.name||"anonymous")}function xc(g){g=String(g).replace(/^function[^\{]+\{\s*/,"").replace(/\}$/,"").trim();for(var c=
g.split(/\n|\r/),h,d=0;d<c.length;d++){var k=c[d].match(/^(\s+)[^\s]/);k&&(void 0===h||k[1].length<h.length)&&(h=k[1])}return h?g.replace(new RegExp("^"+h,"gm"),""):g}function Jc(g){var c=Date.now();g();return Date.now()-c}function Bc(g,c){for(var h=Date.now(),d=0;d<c;d++)g();return(Date.now()-h)/c}function re(g,c){var h=Array.prototype.slice.call(arguments),d=h.shift();c=1E3*h.shift();return setTimeout(function(){return d.apply(d,h)},c)}function of(g,c){var h,d,k,n,b,e,l=Cc.debounce(c,function(){b=
n=!1});return function(){h=this;d=arguments;k||(k=setTimeout(function(){k=null;b&&g.apply(h,d);l()},c));n?b=!0:e=g.apply(h,d);l();n=!0;return e}}function Ye(g,c,h){var d;return function(){var k=this,n=arguments;h&&!d&&c.apply(k,n);clearTimeout(d);d=setTimeout(function(){d=null;h||c.apply(k,n)},g)}}function Bg(g,c,h){var d=Cc._throttledByName;return d[g]?d[g]:d[g]=Cc.throttle(function(){Cc.debounceNamed(g,c,function(){delete d[g]})();return h.apply(this,arguments)},c)}function Bh(g,c,h,d){var k=Cc._debouncedByName;
return k[g]?k[g]:k[g]=Cc.debounce(c,function(){delete k[g];return h.apply(this,arguments)},d)}function Cf(g,c){var h=Cc._queues,d=h[g]||(h[g]={_workerActive:!1,worker:c,tasks:[],drain:null,push:function(k){d.tasks.push(k);d._workerActive||d.activateWorker()},pushAll:function(k){k.forEach(function(n){d.tasks.push(n)});d._workerActive||d.activateWorker()},pushNoActivate:function(k){d.tasks.push(k)},handleError:function(k){k&&console.error("Error in queue: "+k)},activateWorker:function(){function k(e){d.handleError(e);
d.activateWorker()}var n=d.tasks,b=d._workerActive;if(0===n.length)b&&(d._workerActive=!1,"function"===typeof d.drain&&d.drain()),delete h[g];else{b||(d._workerActive=!0);try{d.worker(n.shift(),k)}catch(e){k(e)}}}});return d}function hg(g,c,h){function d(){a&&clearTimeout(a);e=!0;delete n[g]}function k(f){e||(d(),b.callbacks.forEach(function(m){try{m.apply(null,f)}catch(q){console.error("Error when invoking callbacks in queueUntil ["+g+"]:\n"+String(q.stack||q))}}))}var n=Cc._queueUntilCallbacks,
b=n[g];if(b)return b;var e=!1,l=!1;if(h)var a=setTimeout(function(){e||k([Error("timeout")])},h);b=n[g]={callbacks:[],cancel:function(){l=!0;d()},whenDone:function(f){b.callbacks.push(f);return b}};setTimeout(function(){if(!l)try{c(function(){k(arguments)})}catch(f){k([f])}},0);return b}function wf(){var g=Array.prototype.slice,c=g.call(arguments),h=Cc._composeAsyncDefaultEndCallback,d=h,k,n,b=new Promise(function(e,l){k=e;n=l});return c.reverse().reduce(function(e,l,a){var f=!1;return function(){function m(){f=
!0;var u=g.call(arguments),v=u.shift();v?(d(v),n(v)):e.apply(null,u)}var q=g.call(arguments);if(d===h&&a===c.length-1){for(;q.length&&"function"!==typeof q[q.length-1];)q.pop();"function"===typeof q[q.length-1]&&(d=q.pop())}if("function"===typeof l)try{var r=l.apply(this,q.concat([m]));r&&"function"===typeof r.then&&"function"===typeof r.catch&&r.then(function(u){return m(null,u)}).catch(function(u){return m(u)})}catch(u){console.error("composeAsync: ",u.stack||u),f||(d(u),n(u))}else l&&"function"===
typeof l.then&&"function"===typeof l.catch?l.then(function(u){m(null,u)}).catch(function(u){m(u)}):(q=Error("Invalid argument to composeAsync: "+l),d(q),n(q));return b}},function(){var e=g.call(arguments);d.apply(null,[null].concat(e));k(e[0])})}function tj(){return Array.prototype.slice.call(arguments).reverse().reduce(function(g,c){return function(){return g(c.apply(this,arguments))}},function(g){return g})}function Pf(g){return function(){var c=Array.prototype.slice.call(arguments);c=[c[1],c[0]].concat(c.slice(2));
return g.apply(null,c)}}function Qi(g){g=g||function(){};return function(){var c=Cc.arr.from(arguments);g.apply(null,[null].concat(c))}}function Te(g,c,h){var d=Date.now(),k=50;h||(h=c,c=g,g=void 0);(function b(){if(c())return h();if(g){var e=Date.now()-d;e=g-e;if(0>=e)return h(Error("timeout"));e<k&&(k=e)}setTimeout(b,k)})()}function cj(g,c,h){function d(b,e,l,a){if(n.length){var f=null;b=n.indexOf(b);-1<b&&n.splice(b,1);l?(n.length=0,f=Error("in waitForAll at"+("number"===typeof e?" "+e:"")+": \n"+
(l.stack||String(l)))):a&&(k[e]=a);n.length||setTimeout(function(){h(f,k)},0)}}h||(h=c,c=g,g=null);g=g||{};var k=c.map(function(){return null});if(c.length){var n=Array.prototype.slice.call(c);c.forEach(function(b,e){try{b(function(){var l=Array.prototype.slice.call(arguments),a=l.shift();d(b,e,a,l)})}catch(l){d(b,e,l,null)}});g.timeout&&setTimeout(function(){if(n.length){var b=k.map(function(e,l){return null===e&&l}).filter(function(e){return"number"===typeof e}).join(", ");d(null,null,Error("waitForAll timed out, functions at "+
b+" not done"),null)}},g.timeout)}else h(null,k)}function Uj(g,c,h,d){function k(){return g.apply(this,n.concat(Array.prototype.slice.call(arguments)))}if(1>=arguments.length)return arguments[0];var n=Array.prototype.slice.call(arguments);g=n.shift();k.isWrapper=!0;k.originalFunction=g;return k}function Ml(g,c){var h=function(){var d=Array.prototype.slice.call(arguments);d=c.isWrapper?d:[g.bind(this)].concat(d);return c.apply(this,d)};h.isWrapper=!0;h.originalFunction=g;return h}function Vm(g){for(;g.originalFunction;)g=
g.originalFunction;return g}function Nl(g){var c=[];do c.push(g),g=g.originalFunction;while(g);return c}function zk(g,c,h){h.originalFunction=g[c];var d=g.hasOwnProperty(c);g[c]=function(){d?g[c]=h.originalFunction:delete g[c];return h.apply(this,arguments)};return g}function Lk(g){if(g){if("function"!==typeof g)throw Error("once() expecting a function");var c=!1,h;return function(){if(c)return h;c=!0;return h=g.apply(this,arguments)}}}function Pi(){var g=!1;return Array.prototype.slice.call(arguments).map(function(c){return function(){if(!g)return g=
!0,c.apply(this,arguments)}})}function Ig(g,c){var h=Array.prototype.slice.call(arguments),d=Cc._eitherNameRegistry;g=h.shift();var k=d[g]||(d[g]={wasCalled:!1,callsLeft:0});k.callsLeft++;return function(){k.callsLeft--;0>=k.callsLeft&&delete d[g];if(!k.wasCalled)return k.wasCalled=!0,c.apply(this,arguments)}}function ne(g){return eval(g)}function Mk(g){return Cc.evalJS("("+g.toString()+");")}function tb(g,c){return Cc.Closure.fromFunction(g,c).recreateFunc()}function zc(g,c,h,d){var k=h||g.name;
if(!k)throw Error("Function that wants to be a script needs a name: "+this);h=Object.getPrototypeOf(c);var n={this:c};d&&(n=Cc.objectMerge([n,d]));h&&h[k]&&(n.$super=Cc.Closure.fromFunction(function(){try{return Object.getPrototypeOf(c)[k].apply(c,arguments)}catch(b){return"undefined"!==typeof $world?$world.logError(b,"Error in $super call"):console.error("Error in $super call: "+b+"\n"+b.stack),null}},{obj:c,name:k}).recreateFunc());return Cc.addToObject(Cc.asScript(g,n),c,k)}function zd(g,c,h){g.displayName=
h;var d=c.attributeConnections?c.attributeConnections.filter(function(k){return"update"===k.getSourceAttrName()}):[];d&&d.forEach(function(k){k.disconnect()});c[h]=g;typeof c&&(g.declaredObject=Cc.safeToString(c));"undefined"!==typeof lively&&c&&lively.Tracing&&lively.Tracing.stackTracingEnabled&&lively.Tracing.instrumentMethod(c,h,{declaredObject:Cc.safeToString(c)});d&&d.forEach(function(k){k.connect()});return g}function td(g,c){return Cc.Closure.fromFunction(g,c||{}).recreateFunc()}function cf(g,
c,h){g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=h)}function $f(g){return g.hasLivelyClosure?g.livelyClosure.varMapping:g.isWrapper?g.originalFunction.varMapping:g.varMapping?g.varMapping:{}}function dj(g,c,h){g[c]=h;g.hasLivelyClosure&&(g.livelyClosure.funcProperties[c]=h)}function vm(g){for(var c=[],h=g.prototype;h;)c=Object.keys(h).reduce(function(d,k){"function"===typeof h[k]&&-1===d.indexOf(k)&&d.push(k);return d},c),h=Object.getPrototypeOf(h);return c}function Up(g){return Object.keys(g.prototype).filter(function(c){return"function"===
typeof g.prototype[c]})}function wr(g,c){var h=function(d){var k=Array.prototype.slice.call(arguments);k.shift();try{return d.apply(g,k)}catch(n){if("undefined"!==typeof lively&&lively.morphic&&lively.morphic.World&&lively.morphic.World.current())throw lively.morphic.World.current().logError(n),n;c?console.warn("ERROR: %s.%s(%s): err: %s %s",g,c,k,n,n.stack||""):console.warn("ERROR: %s %s",n,n.stack||"");throw n;}};h.methodName="$logErrorsAdvice";h=Cc.wrap(g,h);h.originalFunction=g;h.methodName="$logErrorsWrapper";
return h}function Wm(g,c){var h=function(d){var k=Array.prototype.slice.call(arguments);k.shift();try{var n=d.apply(g,k)}catch(b){throw console.warn("failed to load "+c+": "+b),"undefined"!==typeof lively&&lively.lang.Execution&&lively.lang.Execution.showStack(),b;}console.log("completed "+c);return n};h.methodName="$logCompletionAdvice::"+c;h=Cc.wrap(g,h);h.methodName="$logCompletionWrapper::"+c;h.originalFunction=g;return h}function co(g,c){var h=function(k){var n=Array.prototype.slice.call(arguments);
n.shift();d=k.apply(g,n);c?console.warn("%s(%s) -> %s",Cc.qualifiedMethodName(g),n,d):console.log("%s(%s) -> %s",Cc.qualifiedMethodName(g),n,d);return d};h.methodName="$logCallsAdvice::"+Cc.qualifiedMethodName(g);var d=Cc.wrap(g,h);d.originalFunction=g;d.methodName="$logCallsWrapper::"+Cc.qualifiedMethodName(g);return d}function sm(g,c){return Cc.wrap(g,function(h){var d=Array.prototype.slice.call(arguments);d.shift();c.push(d);d=h.apply(g,d);c.pop();return d})}function vn(){try{throw Error();}catch(g){return String(g.stack).split(/\n/).slice(2).map(function(c){return c.replace(/^\s*at\s*([^\s]+).*/,
"$1")}).join("\n")}}function Vp(g){if(g&&Array.isArray(g))return"["+g.map(Vp)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function fo(g){return Array.isArray(g)}function Qo(g){return g&&1==g.nodeType}function wn(g){return g instanceof Function}function eo(g){return"boolean"===typeof g}function Xm(g){return"string"===typeof g}function Ro(g){return"number"===typeof g}function Wp(g){return"undefined"===typeof g}function Xp(g){return g instanceof
RegExp}function pc(g){return"object"===typeof g}function Ym(g){if(!g)return!0;switch(typeof g){case "string":case "number":case "boolean":return!0}return!1}function Zp(g){for(var c in g)if(g.hasOwnProperty(c))return!1;return!0}function Pl(g,c){if(g===c)return!0;if(!g||!c)return g==c;if(Array.isArray(g))return vd.arrayDeepEquals(g,c);switch(g.constructor){case String:case Date:case Boolean:case Number:return g==c}if("function"===typeof g.isEqualNode)return g.isEqualNode(c);if("function"===typeof g.equals)return g.equals(c);
var h=[],d;for(d in g)if(h.push(d),"function"!==typeof g[d]&&!Pl(g[d],c[d]))return!1;for(d in c)if(-1===h.indexOf(d)&&"function"!==typeof c[d]&&!Pl(c[d],g[d]))return!1;return!0}function Yp(g){return g?Object.keys(g).map(function(c){return g[c]}):[]}function go(g,c){for(var h={},d=0;d<c.length;d++)h[c[d]]=g[c[d]];return h}function fl(g,c){g=g||{};g=vd.getOwnPropertyDescriptors(g);for(var h=0;h<c.length;h++)c[h]in g&&delete g[c[h]];return Object.defineProperties({},g)}function Kk(g,c,h,d){c=vd.functionFromString(c);
return vd.asScriptOf(c,g,h,d)}function um(g,c){for(var h=null,d=1;d<arguments.length;d++)if("string"===typeof arguments[d])h=arguments[d],g.categories||(g.categories={}),g.categories[h]||(g.categories[h]=[]),h=g.categories[h];else{c=arguments[d];for(var k in c){var n=c.__lookupGetter__(k),b=c.__lookupSetter__(k);n&&g.__defineGetter__(k,n);b&&g.__defineSetter__(k,b);n||b||(n=c[k],g[k]=n,h&&h.push(k),"function"===typeof n&&(n.displayName||(n.displayName=k),"undefined"!==typeof lively&&lively.Module&&
lively.Module.current&&(n.sourceModule=lively.Module.current())))}}return g}function xn(g){if(vd.isPrimitive(g))return g;if(Array.isArray(g))return Array.prototype.slice.call(g);var c={},h;for(h in g)g.hasOwnProperty(h)&&(c[h]=g[h]);return c}function Gi(g,c,h){for(var d={},k=0;k<c.length;k++)c[k]in g&&(d[c[k]]=h?h(c[k],g[c[k]]):g[c[k]]);return d}function jk(g,c,h){c=c||{};h=h||0;if(c.customPrinter){var d=c._ignoreSignal||(c._ignoreSignal={}),k=c.customPrinter(g,d,function(q){return jk(q,c,h+1)});
if(k!==d)return k}if(!g)return vd.print(g);if("function"===typeof g)return c.printFunctionSource?String(g):"function"+(g.name?" "+g.name:"")+"("+vd.argumentNames(g).join(",")+") {/*...*/}";switch(g.constructor){case String:case Boolean:case RegExp:case Number:return vd.print(g)}if("function"===typeof g.serializeExpr)return g.serializeExpr();var n=g&&Array.isArray(g);d=n?"[":"{";k=n?"]":"}";if(c.maxDepth&&h>=c.maxDepth)return d+"/*...*/"+k;var b=[];if(n)b=g.map(function(q){return jk(q,c,h+1)});else for(var e=
Object.keys(g).sort(function(q,r){var u="function"===typeof g[q];return u===("function"===typeof g[r])?q<r?-1:q>r?1:0:u?1:-1}),l=0;l<e.length;l++){if(l>(c.maxNumberOfKeys||Infinity)){e=e.length-l;b.push("..."+e+" hidden "+(1<e?"entries":"entry")+"...");break}var a=e[l];n&&jk(g[a],c,h+1);var f=jk(g[a],c,h+1);b.push((c.escapeKeys?JSON.stringify(a):a)+": "+f)}if(0===b.length)return d+k;e=b.join(", ");l=(!n||c.newLineInArrays)&&(!c.minLengthForNewLine||e.length>=c.minLengthForNewLine);var m=vd.indent("",
c.indent||"  ",h);a=vd.indent("",c.indent||"  ",h+1);f=l&&!n?"\n"+a:"";n=l&&!n?"\n"+m:"";l&&(e=b.join(","+(l?"\n"+a:"")));return d+f+e+n+k}function wm(g){return 1<arguments.length?wm(Array.prototype.slice.call(arguments)):Array.isArray(g[0])?Array.prototype.concat.apply([],g):g.reduce(function(c,h){for(var d in h)h.hasOwnProperty(d)&&(c[d]=h[d]);return c},{})}function Zm(g,c){if(!g)return c;if(!c)return g;if(Array.isArray(g)){if(!Array.isArray(c))return c;var h=g.map(function(d,k){return Zm(d,c[k])});
c.length>g.length&&(h=h.concat(c.slice(g.length)));return h}return"object"!==typeof g||"object"!==typeof c?c:Object.keys(g).concat(Object.keys(c)).reduce(function(d,k){d[k]=g[k]?c[k]?"object"!==typeof g[k]||"object"!==typeof c[k]?c[k]:Zm(g[k],c[k]):g[k]:c[k];return d},{})}function yn(g,c){c=[];for(var h in g){var d=g[h],k=d.hasOwnProperty("before")?d.before:d.before=[];d=d.hasOwnProperty("after")?d.after:d.after=[];for(var n=k.length;n--;){var b=k[n],e=g[b];e?(e.hasOwnProperty("after")||(e.after=
[]),e.after.push(h)):(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized before "+b+" but that property cannot be found.")),k.splice(n,1))}for(k=d.length;k--;)n=d[k],g[n]||(console.warn("[initializeProperties] "+this+" sortProperties: Property "+(h+" requires to be initialized after "+n+" but that property cannot be found.")),d.splice(k,1));c.push(h)}h=[];d=[];for(k=c.length+1;c.length;){if(k===c.length)throw Error("Circular dependencies in handler order, could not resolve properties "+
c.map(function(l){var a=g[l].before,f=g[l].after;if(!(a&&a.length||f&&f.length))return"";l+="\n";a&&a.length&&(l+="  - before "+a.join(",")+"\n");f&&f.length&&(l+="  - after "+f.join(",")+"\n");return l}).join(""));k=c.length;n=[];for(b=c.length;b--;)e=c[b],vd.isSubset(g[e].after,d)&&(c.splice(b,1),d.push(e),n.push(e));h.push(n)}return vd.flatten(h,1)}function ik(g){return Object.create(g)}function zn(g,c){for(var h=[];g;)g.hasOwnProperty(c)&&h.unshift(g[c]),g=Object.getPrototypeOf(g);return h}function ho(g,
c){return vd.merge(vd.valuesInPropertyHierarchy(g,c))}function So(g){if(!g||"object"!==typeof g||g instanceof RegExp)return g;var c=Array.isArray(g)?Array(g.length):{},h;for(h in g)g.hasOwnProperty(h)&&(c[h]=So(g[h]));return c}function gl(g){return null===g?"null":"undefined"===typeof g?"undefined":g.constructor.name}function hl(g){function c(d,k,n,b){if(d.constructor.name===k){h+=n;if(d.length||Object.keys(d).length)h+="...";h+=b}}if(!vd.isMutableType(g))return vd.safeToString(g);if("Object"!==g.constructor.name&&
!Array.isArray(g)&&g.constructor.name)return g.constructor.name?g.constructor.name:Object.prototype.toString.call(g).split(" ")[1].split("]")[0];var h="";c(g,"Object","{","}");c(g,"Array","[","]");return h}function Rl(g){return-1===["null","undefined","Boolean","Number","String"].indexOf(vd.typeStringOf(g))}function Ql(g){try{return(g?g.toString():String(g)).replace("\n","")}catch(c){return"<error printing object>"}}function Jk(g){switch(typeof g){case "string":return new String(g);case "boolean":return new Boolean(g);
case "number":return new Number(g);default:return g}}function il(g,c){c=void 0===c?"_":c;var h=1;do var d=c+"-"+h++;while(d in g);return d}function xm(){return gc.formatFromArray(Array.prototype.slice.call(arguments))}function Ak(g){function c(q,r){return""+q}function h(q,r){return q.toString()}function d(q,r){return gc.inspectObject(q)}var k=g.shift();k||console.log("Error in Strings>>formatFromArray, first arg is undefined");var n={s:c,d:h,i:h,f:function(q,r,u){return-1<u?q.toFixed(u):q.toString()},
o:d},b=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;k=function(q){for(var r=[],u=b.exec(q);u;u=b.exec(q)){var v=u[8]||u[5];v=v in n?n[v]:d;var y=u[3]?parseInt(u[3]):"."==u[4]?-1:0;r.push(q.substr(0,"%"==u[0][0]?u.index:u.index+1));r.push({appender:v,precision:y});q=q.substr(u.index+u[0].length)}q&&r.push(q.toString());return r}(k);for(var e="",l=0,a=0;a<k.length;++a){var f=k[a];if(f&&"object"===typeof f){var m=g[l++];e+=(f.appender||c)(m,e,f.precision)}else e+=""+f}return e}function jl(g,
c,h){if(!h||0>=h)return g;for(var d="";0<h;)h--,d+=c;return gc.lines(g).map(function(k){return d+k}).join("\n")}function la(g,c){c||(c="  ");return gc.min(g.match(new RegExp("^("+c+")*","gm")).map(function(h){return Math.floor(h.length/c.length)}))}function Da(g,c,h){c||(c="  ");h||(h=0);var d=gc.minIndent(g,c);if(d===h)return g;if(d<h)return gc.indent(g,c,h-d);var k=c.repeat(d-h);return gc.lines(g).map(function(n){return n.slice(k.length)}).join("\n")}function Wa(g){return'"'+g.replace(/"/g,'\\"')+
'"'}function Ka(g){return gc.articles.articlize(g)}function Jb(g){return gc.articles.find(g)}function Gb(g){if(g&&Array.isArray(g))return"["+g.map(Gb)+"]";if("string"!==typeof g)return String(g);g=String(g);g=g.replace(/\n/g,"\\n\\\n");g=g.replace(/(")/g,"\\$1");return'"'+g+'"'}function Rb(g,c){c=c||0;return g.reduce(function(h,d){return h+(Array.isArray(d)?Rb(d,c+1):gc.indent(d+"\n","  ",c))},"")}function cc(g,c,h){return h?" ".repeat(c)+g:g+" ".repeat(c)}function $c(g,c){function h(e){return n?
!1:b?!0:c&&Array.isArray(c.align)&&"right"===c.align[e]}var d=[],k=c&&c.separator||" ",n=!c||!c.align||"left"===c.align,b=c&&"right"===c.align;g.forEach(function(e){e.forEach(function(l,a){void 0===d[a]&&(d[a]=0);d[a]=Math.max(d[a],String(l).length)})});return g.map(function(e){return e.map(function(l,a){l=String(l);return gc.pad(l,d[a]-l.length,h(a))}).join(k)}).join("\n")}function Re(g,c,h,d){function k(b,e,l){n[e]=d.repeat(b)+c(l,b);l=h(l,b);var a=e+1;if(!l||!l.length)return a;var f=a,m=l.length-
1;l.forEach(function(q,r){a=k(b+1,a,q);q=m===r;var u=n[f].split(""),v=b*d.length+d.length;for(r=b*d.length+1;r<v;r++)u[r]="-";q&&(u[b*d.length]="\\");n[f]=u.join("");q||n.slice(f,a).forEach(function(y,z){y=y.split("");y[b*d.length]="|";n[f+z]=y.join("")});f=a});return a}var n=[];d=d||"  ";k(0,0,g);return n.join("\n")}function Ne(g){return g.split("")}function Ng(g){return g.split(/\n\r?/)}function yf(g,c){var h=c?c.sep:"\n\n";return c&&c.keepEmptyLines?g.split("\n").concat("").reduce(function(d,k){var n=
d[0];d=d[1];/^\s*$/.test(d)===/^\s*$/.test(k)?d+="\n"+k:(d.length&&n.push(d),d=k);return[n,d]},[[],""])[0]:g.split(new RegExp(h+"+"))}function ch(g){return gc.lines(g).compact()}function di(g,c){return g.split(c||/\s+/).filter(function(h){return!/^\s*$/.test(h)})}function sj(g,c){c=c||{};var h=c.cellSplitter||/\s+/,d=/^\s*$/;c=c.hasOwnProperty("convertTypes")?!!c.convertTypes:!0;g=gc.lines(g);for(var k=[],n=0;n<g.length;n++){var b=gc.tokens(g[n],h);c&&(b=b.map(function(e){if(e.match(d))return e;var l=
Number(e);if(!isNaN(l))return l;l=new Date(e);return isNaN(+l)?e.trim():l}));0<b.length&&k.push(b)}return k}function Ol(g){if("undefined"===typeof document)throw Error("Cannot unescapeCharacterEntities");var c=document.createElement("div");c.innerHTML=g;return c.textContent}function tm(g,c){return(g=g.trim().match(/([^?#]*)(#.*)?$/))?g[1].split(c||"&").inject({},function(h,d){if((d=d.split("="))[0]){var k=decodeURIComponent(d.shift());d=1<d.length?d.join("="):d[0];void 0!=d&&(d=decodeURIComponent(d));
k in h?(Array.isArray(h[k])||(h[k]=[h[k]]),h[k].push(d)):h[k]=d}return h}):{}}function Ss(g){return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(c,h){return String.fromCharCode("0x"+h)}))}function $p(g){return decodeURIComponent(atob(g).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function aq(g){var c=g.match(gc.urlStartRe),h=(c=c?c[0]:null)?g.slice(c.length):g;do g=h,h=g.replace(gc.pathDoubleDotRe,"");while(h!=g);h=h.replace(gc.pathDoubleSlashRe,
"$1/");h=h.replace(gc.pathDotRe,"/");c&&(h=c+h);return h}function rf(){return gc.normalizePath(Array.prototype.slice.call(arguments).reduce(function(g,c){return"string"===typeof c?g.replace(/\/*$/,"")+"/"+c.replace(/^\/*/,""):g}))}function ym(){return gc.newUUIDTemplate.replace(gc.newUUIDRe,gc.newUUIDReplacer).toUpperCase()}function zf(g,c){return"data:"+(c||"text/plain")+";base64,"+gc.base64EncodeUnicode(g)}function bq(g){var c=0,h=g.length;if(0==h)return c;for(var d=0;d<h;d++){var k=g.charCodeAt(d);
c=(c<<5)-c+k;c&=c}return c}function Ts(g){function c(l,a,f,m,q,r){a=b(b(a,l),b(m,r));return b(a<<q|a>>>32-q,f)}function h(l,a,f,m,q,r,u){return c(a&f|~a&m,l,a,q,r,u)}function d(l,a,f,m,q,r,u){return c(a&m|f&~m,l,a,q,r,u)}function k(l,a,f,m,q,r,u){return c(f^(a|~m),l,a,q,r,u)}function n(l,a){var f=l[0],m=l[1],q=l[2],r=l[3];f=h(f,m,q,r,a[0],7,-680876936);r=h(r,f,m,q,a[1],12,-389564586);q=h(q,r,f,m,a[2],17,606105819);m=h(m,q,r,f,a[3],22,-1044525330);f=h(f,m,q,r,a[4],7,-176418897);r=h(r,f,m,q,a[5],12,
1200080426);q=h(q,r,f,m,a[6],17,-1473231341);m=h(m,q,r,f,a[7],22,-45705983);f=h(f,m,q,r,a[8],7,1770035416);r=h(r,f,m,q,a[9],12,-1958414417);q=h(q,r,f,m,a[10],17,-42063);m=h(m,q,r,f,a[11],22,-1990404162);f=h(f,m,q,r,a[12],7,1804603682);r=h(r,f,m,q,a[13],12,-40341101);q=h(q,r,f,m,a[14],17,-1502002290);m=h(m,q,r,f,a[15],22,1236535329);f=d(f,m,q,r,a[1],5,-165796510);r=d(r,f,m,q,a[6],9,-1069501632);q=d(q,r,f,m,a[11],14,643717713);m=d(m,q,r,f,a[0],20,-373897302);f=d(f,m,q,r,a[5],5,-701558691);r=d(r,f,m,
q,a[10],9,38016083);q=d(q,r,f,m,a[15],14,-660478335);m=d(m,q,r,f,a[4],20,-405537848);f=d(f,m,q,r,a[9],5,568446438);r=d(r,f,m,q,a[14],9,-1019803690);q=d(q,r,f,m,a[3],14,-187363961);m=d(m,q,r,f,a[8],20,1163531501);f=d(f,m,q,r,a[13],5,-1444681467);r=d(r,f,m,q,a[2],9,-51403784);q=d(q,r,f,m,a[7],14,1735328473);m=d(m,q,r,f,a[12],20,-1926607734);f=c(m^q^r,f,m,a[5],4,-378558);r=c(f^m^q,r,f,a[8],11,-2022574463);q=c(r^f^m,q,r,a[11],16,1839030562);m=c(q^r^f,m,q,a[14],23,-35309556);f=c(m^q^r,f,m,a[1],4,-1530992060);
r=c(f^m^q,r,f,a[4],11,1272893353);q=c(r^f^m,q,r,a[7],16,-155497632);m=c(q^r^f,m,q,a[10],23,-1094730640);f=c(m^q^r,f,m,a[13],4,681279174);r=c(f^m^q,r,f,a[0],11,-358537222);q=c(r^f^m,q,r,a[3],16,-722521979);m=c(q^r^f,m,q,a[6],23,76029189);f=c(m^q^r,f,m,a[9],4,-640364487);r=c(f^m^q,r,f,a[12],11,-421815835);q=c(r^f^m,q,r,a[15],16,530742520);m=c(q^r^f,m,q,a[2],23,-995338651);f=k(f,m,q,r,a[0],6,-198630844);r=k(r,f,m,q,a[7],10,1126891415);q=k(q,r,f,m,a[14],15,-1416354905);m=k(m,q,r,f,a[5],21,-57434055);
f=k(f,m,q,r,a[12],6,1700485571);r=k(r,f,m,q,a[3],10,-1894986606);q=k(q,r,f,m,a[10],15,-1051523);m=k(m,q,r,f,a[1],21,-2054922799);f=k(f,m,q,r,a[8],6,1873313359);r=k(r,f,m,q,a[15],10,-30611744);q=k(q,r,f,m,a[6],15,-1560198380);m=k(m,q,r,f,a[13],21,1309151649);f=k(f,m,q,r,a[4],6,-145523070);r=k(r,f,m,q,a[11],10,-1120210379);q=k(q,r,f,m,a[2],15,718787259);m=k(m,q,r,f,a[9],21,-343485551);l[0]=b(f,l[0]);l[1]=b(m,l[1]);l[2]=b(q,l[2]);l[3]=b(r,l[3])}var b=function(l,a){var f=(l&65535)+(a&65535);return(l>>
16)+(a>>16)+(f>>16)<<16|f&65535},e="0123456789abcdef".split("");return function(l){for(var a=l.length,f=0;f<a;f++){for(var m=f,q=l[f],r="",u=0;4>u;u++)r+=e[q>>8*u+4&15]+e[q>>8*u&15];l[m]=r}return l.join("")}(function(l){var a=l.length,f=[1732584193,-271733879,-1732584194,271733878],m;for(m=64;m<=a;m+=64){var q,r=l.substring(m-64,m),u=[];for(q=0;64>q;q+=4)u[q>>2]=r.charCodeAt(q)+(r.charCodeAt(q+1)<<8)+(r.charCodeAt(q+2)<<16)+(r.charCodeAt(q+3)<<24);n(f,u)}l=l.substring(m-64);q=[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0];r=l.length;for(m=0;m<r;m++)q[m>>2]|=l.charCodeAt(m)<<(m%4<<3);q[m>>2]|=128<<(m%4<<3);if(55<m)for(n(f,q),m=16;m--;)q[m]=0;q[14]=8*a;n(f,q);return f}(g))}function Us(g,c){var h=[];g.replace(c,function(d,k){h.push({match:d,start:k,end:k+d.length})});return h}function Vs(g,c,h){function d(b,e){if(e.constructor!==RegExp){if(0===b.indexOf(e))return{match:e,rest:b.slice(e.length)};for(var l=0;l<e.length;l++)if(e[l]!=b[l])return{match:null,pos:l};return{match:null}}return(e=gc.reMatches(b,e))&&
e.length&&0===e[0].start?{match:e[0].match,rest:b.slice(e[0].end)}:{match:null}}function k(b){var e=gc.reMatches(b,/__\//g),l=gc.reMatches(b,/\/__/g);if(e.length!==l.length)throw Error("pattern invalid: "+b+" cannot be split into __/.../__ embedded RegExps\nstarts: "+JSON.stringify(e)+"\nvs ends:\n"+JSON.stringify(l));var a=0;return e.reduce(function(f,m,q){var r=l[q];q=f.pop();m=m.start-a;r=r.end-a;var u;var v=u=3;q=[q.slice(0,m),q.slice(m+u,r-v),q.slice(r)];q[0].length&&(f.push(q[0]),a+=q[0].length);
try{q[1].length&&(f.push(new RegExp(q[1])),a+=q[1].length+3+3)}catch(y){throw Error("Cannot create pattern re from: "+gc.inspectObject(q));}q[2].length&&f.push(q[2]);return f},[b])}function n(b,e){e=k(e);a:{for(var l=b,a=0,f=0;f<e.length;f++){var m=e[f];l=d(l,m);if(!l.match){e={matched:!1,pos:a+(l.pos||0),pattern:m};break a}a+=l.match.length;l=l.rest}e=l.length?{matched:!1,pos:a}:{matched:!0}}if(e.matched)return e;e.error=b.slice(0,e.pos)+"<--UNMATCHED--\x3e"+b.slice(e.pos);return e}h=h||{};h.normalizeWhiteSpace&&
(g=g.replace(/\s+/g," "));h.ignoreIndent&&(g=g.replace(/^\s+/gm,""),c=c.replace(/^\s+/gm,""));return g==c?{matched:!0}:n(g,c)}function Ws(g,c,h){g=g.slice(c);return"string"===typeof h?(g=g.indexOf(h),-1===g?null:g+c):h.constructor===RegExp?(c=gc.reMatches(g,h),c[0]?c[0].start:null):null}function Bk(g,c,h){g=g.slice(0,c);return"string"===typeof h?(g=g.lastIndexOf(h),-1===g?null:g):h.constructor===RegExp?(g=gc.reMatches(g,h),gc.last(g)?gc.last(g).start:null):null}function zm(g){var c=gc.lineRanges(g);
return function(h){for(var d=0;d<c.length;d++){var k=c[d];if(h>=k[0]&&h<k[1])return d}return-1}}function An(g){return function(c){return gc.lineRanges(g)[c]}}function Ck(g){for(var c=0,h=gc.lines(g),d=[],k=0;k<h.length;k++)g=c+h[k].length+1,d.push([c,g]),c=g;return d}function xr(g,c){var h=g.length;if(0===h)return-1;for(var d=0;;){var k=d+Math.floor((h-d)/2),n=$jscomp.makeIterator(g[k]),b=n.next().value;n=n.next().value;if(c<b){if(0===k)break;h=k}else if(c>n)d=k;else return k}return-1}function cq(g,
c,h){h=void 0===h?0:h;g=this.substring(h||0).search(c);return 0<=g?g+(h||0):g}function $m(g,c,h){h=void 0===h?g.length:h;c=c.global?c:new RegExp(c.source,"g"+(c.ignoreCase?"i":"")+(c.multiLine?"m":""));g=this.substring(0,h+1);h=-1;for(var d=0,k;null!=(k=c.exec(g));)h=k.index,c.lastIndex=++d;return h}function rw(g,c){return"undefined"===typeof gc.JsDiff?"diff not supported":gc.JsDiff.convertChangesToXML(gc.JsDiff.diffWordsWithSpace(g,c))}function Xs(g){return""==g}function yr(g){g=g[0];return"A"===
g||"E"===g||"I"===g||"O"===g||"U"===g||"a"===g||"e"===g||"i"===g||"o"===g||"u"===g||!1}function Ys(g,c){var h=parseFloat(g);return isNaN(h)?g:h.toFixed(c)}function dq(g){return g.length?g.charAt(0).toUpperCase()+g.slice(1):g}function Sl(g){return g.split(" ").map(gc.capitalize).join("")}function an(g){var c=g.split("-"),h=c.length;if(1==h)return c[0];g="-"==g.charAt(0)?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(var d=1;d<h;d++)g+=c[d].charAt(0).toUpperCase()+c[d].substring(1);return g}
function Dk(g,c,h){c=c||30;h=void 0===h?"...":h;return g.length>c?g.slice(0,c-h.length)+h:String(g)}function Am(g,c,h){c=c||30;return g.length>c?(void 0===h?"...":h)+g.slice(-c):String(g)}function eq(g){return g.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function Fu(g){return g.slice(0,g.length-1)+String.fromCharCode(g.charCodeAt(g.length-1)+1)}function Gu(g){return g.charCodeAt(0)-48}function Hu(g,c){for(var h=[],d=0;d<g.length;d++){h[d]=[];for(var k=0;k<c.length;k++)h[d][k]=
0}for(d=0;d<g.length;d++)h[d][0]=0;for(d=1;d<g.length;d++)for(k=1;k<c.length;k++)h[d][k]=g[d-1]==c[k-1]?h[d-1][k-1]+1:0;for(var n=k=d=-1,b=0;b<g.length;b++)for(var e=0;e<c.length;e++){var l=h[b][e];d<l&&(d=l,k=b-l,n=e-l)}return{length:d,indexA:k,indexB:n,string:0<d?g.slice(k,k+d):""}}function sw(g,c){return"insert"===c.action?g.slice(0,c.start)+c.lines.join("\n")+g.slice(c.start):"remove"===c.action?g.slice(0,c.start)+g.slice(c.end):g}function Iu(g,c){return c.reduce(function(h,d){return gc.applyChange(g,
d)},g)}function io(g,c){if(0===g.length)return c.length;if(0===c.length)return g.length;var h;if(g.length>c.length){var d=g;g=c;c=d}var k=Array(g.length+1);for(d=0;d<=g.length;d++)k[d]=d;for(d=1;d<=c.length;d++){var n=d;for(h=1;h<=g.length;h++){var b=c[d-1]===g[h-1]?k[h-1]:Math.min(k[h-1]+1,Math.min(n+1,k[h]+1));k[h-1]=n;n=b}k[g.length]=n}return k[g.length]}function Ju(g,c){g=g||0;return Math.round(Math.random()*((c||100)-g)+g)}function Ku(g){return Math.floor(Math.random()*g)}function Lu(g){if(1E3>
g)return String(Math.round(100*g)/100)+"B";g/=1024;return 1E3>g?String(Math.round(100*g)/100)+"KB":String(Math.round(g/1024*100)/100)+"MB"}function zr(g){return g.reduce(function(c,h){return c+h},0)/g.length}function Mu(g,c,h){return(g-c)/h+c}function Nu(g){var c=g.sort(function(h,d){return d-h});g=g.length;return 0===g%2?.5*(c[g/2-1]+c[g/2]):c[(g-1)/2]}function Ou(g,c,h,d){d=d||0;if(c<h)var k=h;else k=c,c=h;return 0<=k-g+d&&0>=c-g-d}function Ar(g,c,h){return Math.max(c,Math.min(h,g))}function Nk(g){return g.sort(function(c,
h){return c-h})}function Pu(g,c){c=c||"px";if((g=g.match(/([0-9\.]+)\s*(.*)/))&&g[1]){var h=parseFloat(g[1]);return Af.convertLength(h,g[2],c)}}function Br(g){if(!isFinite(g))return 0;for(var c=1,h=0;Math.round(g*c)/c!==g;)c*=10,h++;return h}function Qu(g,c){c=1/c;return Math.round(g*c)/c}function tw(g,c,h,d){var k=Af.roundTo(g,h);return Math.abs(g-k)<c/2?k:d?g:k+(g-(g<k?k-c/2:k+c/2))*h/(h-c)}function uw(g){return 180*g/Math.PI%360}function vw(g){return g/180*Math.PI}function Zs(g,c,h){c=void 0===
c?5:c;h=void 0===h?3E4:h;g=Math.min(h,c*Math.pow(2,g));return Math.min(h,c+Math.random()*(3*(g/2+Math.round(g/2*Math.random()))-c))}function $s(g,c,h){return c+g*(h-c)}function at(g,c){var h=[],d;for(d in g)(g.__lookupGetter__(d)||"function"!==typeof g[d])&&(c?c(d,g):1)&&h.push(d);return h}function Ru(g,c){return Object.getOwnPropertyNames(g).reduce(function(h,d){(c?c(g,d):1)&&h.push(d);return h},[])}function Su(g){var c=[],h;for(h in g)g.hasOwnProperty(h)&&(g.__lookupGetter__(h)||"function"!==g[h])&&
c.push(h);return c}function Tu(g,c,h){var d=[],k;for(k in g)if(g.hasOwnProperty(k)){var n=g[k];"function"!==n&&d.push(c.call(h||this,k,n))}return d}function Uu(g,c){for(var h in g)if(g[h]===c)return h}function Vu(g){var c=[],h;for(h in g)c.push(g[h]);return c}function fq(g){var c=[],h;for(h in g)g.hasOwnProperty(h)&&c.push(g[h]);return c}function gq(g,c){for(var h in g)if(c(g,h))return!0;return!1}function bt(g,c){var h=[],d;for(d in g)(c?c(g,d):1)&&h.push(d);return h}function hq(g){return Object.keys(g).sort().join("").hashCode()}
function Bm(g,c,h){return jo.dateFormat(g,c,h)}function Cm(g,c){return c&&c instanceof Date&&c.getTime()===g.getTime()}function kl(g,c,h){h=void 0===h?{}:h;if(!(c instanceof Date)||c<g)return"";if(c===g)return"now";var d="min",k="sec",n="hour",b="day",e=Math.round((c-g)/1E3);g=e%60;c=Math.floor(e/60)%60;var l=Math.floor(e/60/60)%24;e=Math.floor(e/60/60/24);var a=[];0<e&&(a.push(e),1<e&&(b+="s"),a.push(b));if(h.forceHours||0<l&&2>e)a.push(l),1<l&&(n+="s"),a.push(n);if(h.forceMinutes||0<c&&3>l&&0===
e)a.push(c),1<c&&(d+="s"),a.push(d);if(h.forceSeconds||0<g&&3>c&&0===l&&0===e)a.push(g),1<g&&(k+="s"),a.push(k);return a.join(" ")}function oe(g){return"function"===typeof g?oe.convertCallbackFun(g):Promise.resolve(g)}function ko(g,c){return new Promise(function(h){return setTimeout(h,g,c)})}function bn(g,c){return new Promise(function(h,d){return setTimeout(d,g,c)})}function ct(g,c){return new Promise(function(h,d){var k=!1;setTimeout(function(){return!k&&(k=!0)&&d(Error("Promise timed out"))},g);
c.then(function(n){return!k&&(k=!0)&&h(n)},function(n){return!k&&(k=!0)&&d(n)})})}function ww(g){var c=Date.now();return Promise.resolve(g).then(function(){return Date.now()-c})}function iq(g,c,h){"function"===typeof g&&(c=g,g=void 0);return new Promise(function(d,k){var n=!1,b=!1,e,l,a=setInterval(function(){if(n)clearInterval(a),delete Ef.waitForClosures[a];else{try{l=c()}catch(f){e=f}if(l||e||b)return n=!0,clearInterval(a),delete Ef.waitForClosures[a],e?k(e):b?"undefined"===typeof h?k(Error("timeout")):
d(h):d(l)}},10);Ef.waitForClosures[a]=a;"number"===typeof g&&setTimeout(function(){return b=!0},g)})}function xw(){var g,c,h=new Promise(function(d,k){g=d;c=k});return{resolve:g,reject:c,promise:h}}function dt(g){return function(){var c=Array.from(arguments),h=this;return new Promise(function(d,k){c.push(function(n,b){return n?k(n):d(b)});g.apply(h,c)})}}function et(g){return function(){var c=Array.from(arguments),h=this;return new Promise(function(d,k){c.push(function(){var n=Array.from(arguments),
b=n.shift();return b?k(b):d(n)});g.apply(h,c)})}}function ny(g,c,h,d,k){var n=g.shift();if(n)try{Promise.resolve(n(c,h)).then(function(b){return ny(g,b,h,d,k)}).catch(function(b){k(b)})}catch(b){k(b)}else d(c)}function yw(g){return new Promise(function(c,h){return Ef._chainResolveNext(g.slice(),void 0,{},c,h)})}function oy(g,c){return Promise.resolve(g).then(function(h){try{c()}catch(d){console.error("Error in promise finally: "+d.stack||d)}return h}).catch(function(h){try{c()}catch(d){console.error("Error in promise finally: "+
d.stack||d)}throw h;})}function ft(g,c){function h(){c--;try{var f=b++;g[f]().then(function(m){c++;k[f]=m;0===--e?l():d()}).catch(function(m){return a(m)})}catch(m){a(m)}}function d(){for(;!n&&0<e&&b<g.length&&0<c;)h()}c=void 0===c?Infinity:c;if(!g.length)return Promise.resolve([]);var k=[],n=null,b=0,e=g.length,l,a;return new Promise(function(f,m){l=function(){return f(k)};a=function(q){return m(n=q)};d()})}function Cg(g,c){if(g instanceof Cg)return g;if(!(this instanceof Cg))return new Cg(g,c);
this.setSplitter(c||".");this.fromPath(g)}function Wu(g){var c={},h;for(h in g)c[h]=g[h].slice();return c}function gt(g,c){var h={},d;for(d in g)if(!c.includes(d)){h[d]=[];for(var k=g[d],n=0;n<k.length;n++){var b=k[n];c.includes(b)||h[d].push(b)}}return h}function jq(g,c,h,d){h=void 0===h?[]:h;d=void 0===d?Infinity:d;if(!Array.isArray(g[c]))return[];for(var k=[],n={},b={},e=0;e<h.length;e++)b[h[e]]=!0;c=g[c].slice();e={};for(var l=c.length;l--;){var a=c[l];a in b?c.splice(l,1):e[a]=1}if(h)for(;0!==
c.length;)for(h=0;h<c.length;h++)if(a=c.shift(),!(a in n||a in b)&&(l=e[a]||0,!(l>d)&&(k.push(a),n[a]=!0,a=g[a])))for(var f=0;f<a.length;f++){var m=a[f];m in n||m in e||(e[m]=l+1,c.push(m))}return k}function Xu(g,c,h,d){d=void 0===d?Infinity:d;h&&(g=mi.without(g,h));c=[c];h=0;for(var k={};c.length&&h++<d;){var n=c.shift();if(!k[n]){var b=g[n]||[];k[n]=b;c.push.apply(c,$jscomp.arrayFromIterable(b))}}return k}function Cr(g){var c={},h;for(h in g)for(var d=g[h],k=0;k<d.length;k++){var n=d[k];c[n]?c[n].push(h):
c[n]=[h]}return c}function To(g,c){c=[];var h={},d={},k={};for(f in g){h.hasOwnProperty(f)||(h[f]=!0,c.push(f));var n=g[f],b={};if(n){d[f]=[];n=$jscomp.makeIterator(n);for(var e=n.next();!e.done;e=n.next())if(e=e.value,!b.hasOwnProperty(e)&&f!==e){var l=k[e]||(k[e]=[]);l.includes(f)||l.push(f);b[e]=!0;d[f].push(e);h.hasOwnProperty(e)||(h[e]=!0,c.push(e))}}}for(g=[];c.length;){h=Infinity;var a=[];b=[];n=[];for(e=0;e<c.length;e++){var f=c[e];l=d[f]||[];l.length>h||(l.length!==h||l.some(function(m){return a.includes(m)})?
(h=l.length,a=[f],b=[e],n=(k[f]||[]).slice()):(a.push(f),b.push(e),n.push.apply(n,$jscomp.arrayFromIterable(k[f]||[]))))}for(e=b.length;e--;)f=c[b[e]],k[f]=[],c.splice(b[e],1);h=$jscomp.makeIterator(n);for(f=h.next();!f.done;f=h.next())f=f.value,d[f]=d[f].filter(function(m){return!a.includes(m)});g.push(a)}return g}function Uo(g,c,h,d,k,n){function b(a){-1<e.indexOf(a)||(d=g.call(n,d,a,l++),e=e.concat([a]),mi.withoutAll(c[a]||[],e).forEach(function(f){return b(f)}))}var e=k||[],l=0;b(h);return d}
function ht(g){g=void 0===g?10:g;for(var c={},h=mi.range(1,g).map(String),d=0;d<h.length;d++){var k=Math.floor(Math.random()*g);c[h[d]]=mi.shuffle(h).slice(0,k)}return c}function Yu(g){return Array.isArray(g)&&2<=g.length&&g[0]<=g[1]}function Zu(g){return g.sort(jh.compare)}function lo(g,c){return g[0]<c[0]?g[1]<c[0]?-3:g[1]===c[0]?-2:-1:g[0]===c[0]?g[1]===c[1]?0:g[1]<c[1]?-1:1:-1*lo(c,g)}function $u(g,c,h){switch(this.compare(g,c)){case -3:case 3:return null;case 0:return h&&h(g,c,g),g;case 2:case 1:var d=
g;g=c;c=d;case -2:case -1:return d=[g[0],Math.max(g[1],c[1])],h&&h(g,c,d),d;default:throw Error("Interval compare failed");}}function it(g,c){for(var h=[],d=g.length;0<d;){var k=g.shift();d--;for(var n=0;n<d;n++){var b=jh.coalesce(k,g[n],c);b&&(k=b,g.splice(n,1),d--,n--)}h.push(k)}return this.sort(h)}function Vo(g,c,h){for(var d=[];0<g.length;){var k=g.shift(),n=c.map(function(b){b=jh.compare(k,b);return-1===b||0===b||1===b});d.push(h(k,n[0]));d.push(k)}return d}function jt(g,c,h,d,k,n){n=n||jh.GLOBAL;
h=this.sort(h);for(var b,e=[];b=h.shift();)if(!(b[1]<g)){b[0]<g&&(b=Array.prototype.slice.call(b),b[0]=g);var l=c<b[0]?c:b[0];g<l&&e.push(d.call(n,[g,l],!0));c<b[1]&&(b=Array.prototype.slice.call(b),b[1]=c);if(b[0]===b[1]){var a;k&&(a=e.slice(-1)[0])&&k.call(n,a,b,a)}else e.push(d.call(n,b,!1));g=b[1];if(g>=c)break}g<c&&e.push(d.call(n,[g,c],!0));return e}function av(g,c,h){return jh.intervalsInRangeDo(g,c,jh.coalesceOverlapping(Array.prototype.slice.call(h)),function(d,k){return k?d:null}).filter(Boolean)}
function bv(g,c){var h=0,d,k;return c.map(function(n){for(;k=g[h];)if(k[0]<n[0])h++;else break;if(k&&k[0]===n[0]){for(d=h;k=g[d];)if(k[1]<n[1])d++;else break;if(k&&k[1]===n[1])return jh.range(h,d)}return[]})}function cv(g,c,h){h=h||0;h+c>g.length&&(h-=h+c-g.length);return{array:g,from:h,to:h+c}}function zw(g){return g.array.slice(g.from,g.to)}function kq(g,c){return c<g.from||c>=g.to?null:c-g.from}function Dr(g,c){return 0>c||c>g.to-g.from?null:g.from+c}function Bn(g,c){if(!(c in g.array))return null;
var h=0;c<g.from&&(h=-g.from+c);c>=g.to&&(h=c-g.to+1);return 0===h?g:cn.create(g.array,g.to-g.from,g.from+h)}function Er(g,c,h){return(g=g[c])?g[h]:void 0}function lq(g,c,h,d){(g=g[c])&&(g[h]=d);return d}function dv(g,c){return g[c]}function mo(g,c,h){return g[c]=h}function Aw(g,c){return g.reduce(function(h,d){h.push(d[c]);return h},[])}function kt(g,c,h){return g.map(function(d,k){return d[c]?d[c]=h[k]:void 0})}function Bw(g,c,h){for(var d=Array(g);0<g;)d[--g]=Dg.arrayWithN(c,h);return d}function Tl(g,
c,h,d){for(var k=Array(g),n=0;n<g;n++){k[n]=Array(c);for(var b=0;b<c;b++)k[n][b]=h.call(d||this,n,b)}return k}function Fr(g,c,h){g.forEach(function(d,k){d.forEach(function(n,b){c.call(h||this,n,k,b)})})}function Gr(g,c,h){var d=Array(g.length);g.forEach(function(k,n){d[n]=Array(k.length);k.forEach(function(b,e){d[n][e]=c.call(h||this,b,n,e)})});return d}function Wo(g){for(var c=g[0],h=Array(g.length-1),d=1;d<g.length;d++)for(var k=h[d-1]={},n=0;n<c.length;n++)k[c[n]]=g[d][n];return h}function mq(g,
c){Array.isArray(g)||(g=[g]);var h=[[]],d=h[0],k=g.reduce(function(n,b){return n.concat([Object.keys(b).reduce(function(e,l){var a=d.indexOf(l);-1===a&&(a=d.length,d.push(l));e[a]=b[l];return e},[])])},[]);c=1===arguments.length?null:c;k.forEach(function(n){for(var b=0;b<d.length;b++)n[b]||(n[b]=c)});return h.concat(k)}function Nj(g,c,h,d,k){d=void 0===d?{i:0}:d;k=void 0===k?0:k;var n=d.i++;c(g,n,k);(h(g,n,k)||[]).forEach(function(b){return Nj(b,c,h,d,k+1)})}function nq(g,c,h,d,k){d=void 0===d?{i:0}:
d;k=void 0===k?0:k;var n=d.i++;(h(g,n,k)||[]).forEach(function(b){return nq(b,c,h,d,k)});c(g,n,k)}function Cn(g,c,h){if(c(g))return g;if((g=h(g))&&g.length)for(var d=0;d<g.length;d++){var k=Cn(g[d],c,h);if(k)return k}}function oq(g,c,h){var d=[];c(g)&&d.push(g);return d.concat(Gj.flatten((h(g)||[]).map(function(k){return oq(k,c,h)})))}function no(g,c,h,d){d=void 0===d?0:d;return[c(g,d)].concat(Gj.flatten((h(g)||[]).map(function(k){return no(k,c,h,d+1)})))}function lt(g,c,h,d){d=void 0===d?0:d;var k=
(h(g)||[]).map(function(n){return lt(n,c,h,d+1)});return c(g,k,d)}function mt(g){var c=[{name:"send",args:["msg","callback"]},{name:"listen",args:["messenger","callback"]},{name:"close",args:["messenger","callback"]},{name:"isOnline",args:[]}],h=c.map(function(b){return b.name}).concat("id sendHeartbeat heartbeatInterval ignoreUnknownMessages allowConcurrentSends sendTimeout services".split(" "));c.forEach(function(b){if(!g[b.name])throw b="message implementation needs function "+b.name+"("+b.args.join(",")+
")",Error(b);});c=g.sendHeartbeat&&(g.heartbeatInterval||1E3);var d=g.hasOwnProperty("ignoreUnknownMessages")?g.ignoreUnknownMessages:!1,k={_outgoing:[],_inflight:[],_id:g.id||kk.newUUID(),_ignoreUnknownMessages:d,_services:{},_messageCounter:0,_messageResponseCallbacks:{},_whenOnlineCallbacks:[],_statusWatcherProc:null,_startHeartbeatProcessProc:null,_listenInProgress:null,_heartbeatInterval:c,_status:kk.OFFLINE,_runWhenOnlineCallbacks:function(){var b=k._whenOnlineCallbacks.slice();k._whenOnlineCallbacks=
[];b.forEach(function(e){try{e.call(null,null,k)}catch(l){console.error("error in _runWhenOnlineCallbacks: %s",l)}})},_ensureStatusWatcher:function(){k._statusWatcherProc||(k._statusWatcherProc=setInterval(function(){k.isOnline()&&k._whenOnlineCallbacks.length&&k._runWhenOnlineCallbacks();var b=k._status;k._status=k.isOnline()?kk.ONLINE:kk.OFFLINE;k._status!==kk.ONLINE&&k._statusWatcherProc&&k.reconnect();if(k._status!==b&&k.onStatusChange)k.onStatusChange()},20))},_addMissingData:function(b){if(!b.target)throw Error("Message needs target!");
if(!b.action)throw Error("Message needs action!");b.data||(b.data=null);b.messageId||(b.messageId=kk.newUUID());b.sender=k.id();b.messageIndex=k._messageCounter++;return b},_queueSend:function(b,e){if(e&&"function"!==typeof e)throw Error("Expecing a when send callback, got: "+e);k._outgoing.push([b,e])},_deliverMessageQueue:function(){function b(a){if(-1!==k._inflight.indexOf(a)){var f=a[0],m=a[1];m&&(k._messageResponseCallbacks[f.messageId]=m);g.send.call(k,f,function(q){kk.remove(k._inflight,a);
q&&e(q,a);k._deliverMessageQueue()})}}function e(a,f){var m=f[1];delete k._messageResponseCallbacks[f[0].messageId];console.error(a);m&&m(a)}if(g.allowConcurrentSends||!k._inflight.length){var l=k._outgoing.shift();l&&(k._inflight.push(l),k.isOnline()?b(l):k.whenOnline(function(){b(l)}),function(a){"number"===typeof g.sendTimeout&&setTimeout(function(){-1!==k._inflight.indexOf(a)&&(kk.remove(k._inflight,a),e(Error("Timeout sending message"),a),k._deliverMessageQueue())},g.sendTimeout)}(l),g.allowConcurrentSends&&
k._outgoing.length&&k._deliverMessageQueue())}},_startHeartbeatProcess:function(){k._startHeartbeatProcessProc||(k._startHeartbeatProcessProc=setTimeout(function(){g.sendHeartbeat.call(k,function(b,e){k._startHeartbeatProcessProc=null;k._startHeartbeatProcess()})},k._heartbeatInterval))},id:function(){return k._id},isOnline:function(){return g.isOnline.call(k)},heartbeatEnabled:function(){return"number"===typeof k._heartbeatInterval},listen:function(b){if(!k._listenInProgress)return k._listenInProgress=
!0,k._ensureStatusWatcher(),g.listen.call(k,function(e){k._listenInProgress=null;b&&b(e);k.heartbeatEnabled()&&k._startHeartbeatProcess()})},reconnect:function(){if(k._status!==kk.ONLINE)return k.listen(),k},send:function(b,e){k._addMissingData(b);k._queueSend(b,e);k._deliverMessageQueue();return b},sendTo:function(b,e,l,a){return k.send({target:b,action:e,data:l},a)},onMessage:function(b){k.emit("message",b);if(b.inResponseTo){var e=k._messageResponseCallbacks[b.inResponseTo];e&&!b.expectMoreResponses&&
delete k._messageResponseCallbacks[b.inResponseTo];e&&e(null,b)}else if(e=k._services[b.action])try{e.call(null,b,k)}catch(l){e=String(l.stack||l),console.error("Error invoking service: "+e),k.answer(b,{error:e})}else k._ignoreUnknownMessages||k.answer(b,{error:String(Error("messageNotUnderstood: "+b.action))})},answer:function(b,e,l,a){"function"===typeof l&&(a=l,l=!1);b={target:b.sender,action:b.action+"Result",inResponseTo:b.messageId,data:e};l&&(b.expectMoreResponses=!0);return k.send(b,a)},close:function(b){clearInterval(k._statusWatcherProc);
k._statusWatcherProc=null;g.close.call(k,function(e){k._status=kk.OFFLINE;b&&b(e)});return k},whenOnline:function(b){k._whenOnlineCallbacks.push(b);k.isOnline()&&k._runWhenOnlineCallbacks();return k},outgoingMessages:function(){return kk.pluck(k._inflight.concat(k._outgoing),0)},addServices:function(b){Object.assign(k._services,b);return k}};g.services&&k.addServices(g.services);kk.makeEmitter(k);for(var n in g)-1===h.indexOf(n)&&g.hasOwnProperty(n)&&(k[n]=g[n]);return k}function nt(g,c,h){h||(h=
c,c=g,g=null);g=g||{};var d=g.args||[];g=Eg.create(g);g.run.apply(g,[c].concat(d).concat(h));return g}function Pg(g){g=g||{};g.useMessenger=!0;var c=g.workerId||Eg.newUUID(),h=Eg.messengerCreate({sendTimeout:5E3,send:function(d,k){h.worker.postMessage(d);k()},listen:function(d){var k=h.worker=Eg.isNodejs?Eg.NodejsWorker.create(g):Eg.BrowserWorker.create(g);k.on("message",function(n){h.onMessage(n)});k.on("ready",function(){Eg.NodejsWorker.debug&&console.log("WORKER READY!!!")});k.on("close",function(){Eg.NodejsWorker.debug&&
console.log("WORKER CLOSED...!!!")});k.once("ready",d)},close:function(d){return h.worker.ready?h.sendTo(c,"close",{},function(k,n){(k=k||n.data.error)&&console.error("Error in worker messenger close: "+k.stack||k);if(k)d(k);else{var b=!1;h.worker.once("close",function(){b=!0});Eg.waitFor(1E3,function(){return!!b},d)}}):d(null)},isOnline:function(){return h.worker&&h.worker.ready}});Object.assign(h,{eval:function(d,k){h.sendTo(c,"remoteEval",{expr:d},function(n,b){k(n,b?b.data.result:null)})},run:function(){var d=
Array.prototype.slice.call(arguments),k=d.shift(),n=d.pop();if("function"!==typeof k)throw Error("run: no function that should run in worker passed");if("function"!==typeof n)throw Error("run: no callback passed");return h.sendTo(c,"run",{func:String(k),args:d},function(b,e){n(b||e.data.error,e?e.data.result:null)})}});h.listen();return h}function ev(){if(!Vc.isNode||Vc.GLOBAL.lively||Vc.GLOBAL.lively)if(Vc.livelyLang._prevLivelyGlobal=Vc.GLOBAL.lively,Vc.GLOBAL.lively||(Vc.GLOBAL.lively={}),Vc.GLOBAL.lively.lang)for(var g in Vc.livelyLang)Vc.GLOBAL.lively.lang[g]=
Vc.livelyLang[g];else Vc.GLOBAL.lively.lang=Vc.livelyLang}function Ri(g){if(!g)return g;if(Array.isArray(g))return Vc.createChain(Vc.arr,g);if("Date"===g.constructor.name)return Vc.createChain(Vc.date,g);switch(typeof g){case "string":return Vc.createChain(Vc.string,g);case "object":return Vc.createChain(Vc.obj,g);case "function":return Vc.createChain(Vc.fun,g);case "number":return Vc.createChain(Vc.num,g)}throw Error("Chain for object "+g+" ("+g.constructor.name+") no supported");}function Ul(){Vc.isNode||
(Vc.livelyLang._prevLivelyGlobal?delete Vc.GLOBAL.lively.lang:delete Vc.GLOBAL.lively);return Vc.livelyLang}function Cw(){Object.assign(Vc.livelyLang,{worker:Vc.worker,messenger:Vc.messenger,events:Vc.events,tree:Vc.tree,grid:Vc.grid,arrayProjection:Vc.arrayProjection,interval:Vc.interval,graph:Vc.graph,date:Vc.date,properties:Vc.properties,obj:Vc.obj,arr:Vc.arr,fun:Vc.fun,num:Vc.num,string:Vc.string,Closure:Vc.Closure,promise:Vc.promise,Path:Vc.Path,Group:Vc.Group});Vc.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=Vc.Path(g.target);c.isIn(Vc.GLOBAL)||c.set(Vc.GLOBAL,{},!0);var h=Vc.Path(g.sources[0]);g.methods.forEach(function(d){Vc.installProperty(h.concat([d]),c.concat([d]))});g.alias&&g.alias.forEach(function(d){Vc.installProperty(h.concat([d[1]]),c.concat([d[0]]))})}else if("installObject"===g.action)c=Vc.Path(g.target),g=Vc.Path(g.source).get(Vc.livelyLang),c.set(Vc.GLOBAL,g,!0);else throw Error("Cannot deal with global setup action: "+g.action);})}function pq(){Vc.globalInterfaceSpec.forEach(function(g){if("installMethods"===
g.action){var c=Vc.Path(g.target),h=Vc.Path(g.source).get(Vc.livelyLang),d=c.get(Vc.GLOBAL);d&&(g.methods.filter(function(k){return h===d[k]}).forEach(function(k){delete d[k]}),g.alias&&g.alias.filter(function(k){return h===d[k]}).forEach(function(k){delete d[k[0]]}))}else if("installObject"===g.action)c=Vc.Path(g.target),c.del(Vc.GLOBAL);else throw Error("Cannot deal with global setup action: "+g.action);})}function Xo(g){return function(c,h,d,k){null==d&&(d=g);null==k&&(k=d);null==h&&(h=Fh.unit(c));
var n=Fh.unit(c);if(n===h)return c;var b=Fh.unitLess(c);"px"!==Fh.unit(d)&&console.warn("Parameter fromContext must resolve to a value in pixel units.");"px"!==Fh.unit(k)&&console.warn("Parameter toContext must resolve to a value in pixel units.");if("px"!==n)if("em"===n)b=Fh.unitLess(c)*Fh.unitLess(d);else if("rem"===n)b=Fh.unitLess(c)*Fh.unitLess(g);else if("ex"===n)b=Fh.unitLess(c)*Fh.unitLess(d)*2;else return"ch"===n||"vw"===n||"vh"===n||"vmin"===n?console.warn(n+" units can't be reliably converted; Returning original value."):
console.warn(n+" is an unknown or unsupported length unit; Returning original value."),c;d=b;if("px"!==h)if("em"===h)d=b/Fh.unitLess(k);else if("rem"===h)d=b/Fh.unitLess(g);else if("ex"===h)d=b/Fh.unitLess(k)/2;else return"ch"===h||"vw"===h||"vh"===h||"vmin"===h?console.warn(h+" units can't be reliably converted; Returning original value."):console.warn(h+" is an unknown or unsupported length unit; Returning original value."),c;return parseFloat(d.toFixed(5))+h}}function Hj(g){return Number(Fh.parseCssLength(g,
"px").slice(0,-2))}function Ff(g,c,h,d){if("number"===typeof g){var k=g;g=c;c=d}else k=g.x,g=g.y,h=c.x-k,c=c.y-g;return new id.Rectangle(k,g,h,c)}function nf(g,c){return new id.Point(g,c)}function Dn(g){return(g=g.match(AT))?{scheme:g[1],auth:g[2],host:g[3],port:g[4],path:g[5]}:null}function oo(g){var c="";g.scheme&&(c+=g.scheme+":");c+="//";g.auth&&(c+=g.auth+"@");g.host&&(c+=g.host);g.port&&(c+=":"+g.port);g.path&&(c+=g.path);return c}function Vl(g){var c=g,h=Dn(g);if(h){if(!h.path)return g;c=h.path}g=
ll.isAbsolute(c);c=c.split(/\/+/);for(var d,k=0,n=c.length-1;0<=n;n--)d=c[n],"."===d?c.splice(n,1):".."===d?k++:0<k&&(""===d?(c.splice(n+1,k),k=0):(c.splice(n,2),k--));c=c.join("/");""===c&&(c=g?"/":".");return h?(h.path=c,oo(h)):c}function Dw(g,c){""===g&&(g=".");""===c&&(c=".");var h=Dn(c),d=Dn(g);d&&(g=d.path||"/");if(h&&!h.scheme)return d&&(h.scheme=d.scheme),oo(h);if(h||c.match(g7))return c;if(d&&!d.host&&!d.path)return d.host=c,oo(d);g="/"===c.charAt(0)?c:Vl(g.replace(/\/+$/,"")+"/"+c);return d?
(d.path=g,oo(d)):g}function Jg(g){return g}function qg(g){return xA(g)?"$"+g:g}function ot(g){return xA(g)?g.slice(1):g}function xA(g){if(!g)return!1;var c=g.length;if(9>c||95!==g.charCodeAt(c-1)||95!==g.charCodeAt(c-2)||111!==g.charCodeAt(c-3)||116!==g.charCodeAt(c-4)||111!==g.charCodeAt(c-5)||114!==g.charCodeAt(c-6)||112!==g.charCodeAt(c-7)||95!==g.charCodeAt(c-8)||95!==g.charCodeAt(c-9))return!1;for(c-=10;0<=c;c--)if(36!==g.charCodeAt(c))return!1;return!0}function O(g,c){return g===c?0:null===
g?1:null===c?-1:g>c?1:-1}function da(){(this||Dm)._array=[];(this||Dm)._set=py?new Map:Object.create(null)}function La(){(this||qq)._array=[];(this||qq)._sorted=!0;(this||qq)._last={generatedLine:-1,generatedColumn:0}}function ab(g){g||(g={});(this||kh)._file=Ok.getArg(g,"file",null);(this||kh)._sourceRoot=Ok.getArg(g,"sourceRoot",null);(this||kh)._skipValidation=Ok.getArg(g,"skipValidation",!1);(this||kh)._sources=new fG;(this||kh)._names=new fG;(this||kh)._mappings=new h7;(this||kh)._sourcesContents=
null}function Fb(g,c,h,d,k,n){var b=Math.floor((c-g)/2)+g,e=k(h,d[b],!0);return 0===e?b:0<e?1<c-b?Fb(b,c,h,d,k,n):n==gG.LEAST_UPPER_BOUND?c<d.length?c:-1:b:1<b-g?Fb(g,b,h,d,k,n):n==gG.LEAST_UPPER_BOUND?b:0>g?-1:g}function Vb(g,c,h){var d=g[c];g[c]=g[h];g[h]=d}function Rc(g,c,h,d){if(h<d){var k=h-1;Vb(g,Math.round(h+Math.random()*(d-h)),d);for(var n=g[d],b=h;b<d;b++)0>=c(g[b],n)&&(k+=1,Vb(g,k,b));Vb(g,k+1,b);k+=1;Rc(g,c,h,k-1);Rc(g,c,k+1,d)}}function Cd(g,c){var h=g;"string"===typeof g&&(h=sf.parseSourceMapInput(g));
return null!=h.sections?new ff(h,c):new Vd(h,c)}function Vd(g,c){var h=g;"string"===typeof g&&(h=sf.parseSourceMapInput(g));g=sf.getArg(h,"version");var d=sf.getArg(h,"sources"),k=sf.getArg(h,"names",[]),n=sf.getArg(h,"sourceRoot",null),b=sf.getArg(h,"sourcesContent",null),e=sf.getArg(h,"mappings");h=sf.getArg(h,"file",null);if(g!=(this||ee)._version)throw Error("Unsupported version: "+g);n&&(n=sf.normalize(n));d=d.map(String).map(sf.normalize).map(function(l){return n&&sf.isAbsolute(n)&&sf.isAbsolute(l)?
sf.relative(n,l):l});(this||ee)._names=yA.fromArray(k.map(String),!0);(this||ee)._sources=yA.fromArray(d,!0);(this||ee)._absoluteSources=(this||ee)._sources.toArray().map(function(l){return sf.computeSourceURL(n,l,c)});(this||ee).sourceRoot=n;(this||ee).sourcesContent=b;(this||ee)._mappings=e;(this||ee)._sourceMapURL=c;(this||ee).file=h}function kf(){(this||ee).generatedLine=0;(this||ee).generatedColumn=0;(this||ee).source=null;(this||ee).originalLine=null;(this||ee).originalColumn=null;(this||ee).name=
null}function ff(g,c){var h=g;"string"===typeof g&&(h=sf.parseSourceMapInput(g));g=sf.getArg(h,"version");h=sf.getArg(h,"sections");if(g!=(this||ee)._version)throw Error("Unsupported version: "+g);(this||ee)._sources=new yA;(this||ee)._names=new yA;var d={line:-1,column:0};(this||ee)._sections=h.map(function(k){if(k.url)throw Error("Support for url field in sections not implemented.");var n=sf.getArg(k,"offset"),b=sf.getArg(n,"line"),e=sf.getArg(n,"column");if(b<d.line||b===d.line&&e<d.column)throw Error("Section offsets must be ordered and non-overlapping.");
d=n;return{generatedOffset:{generatedLine:b+1,generatedColumn:e+1},consumer:new Cd(sf.getArg(k,"map"),c)}})}function Rf(g,c,h,d,k){(this||Xh).children=[];(this||Xh).sourceContents={};(this||Xh).line=null==g?null:g;(this||Xh).column=null==c?null:c;(this||Xh).source=null==h?null:h;(this||Xh).name=null==k?null:k;(this||Xh).$$$isSourceNode$$$=!0;null!=d&&this.add(d)}function rg(g,c){c=void 0===c?{}:c;var h=Object.assign({indent:{style:"  ",base:0,adjustMultilineComment:!1,optsIndent:c&&c.format&&c.format.indent||
{}},quotes:"double"},Yo.obj.dissoc(c&&c.format||{},["indent"]));c=Object.assign({format:h,comment:!1},Yo.obj.dissoc(c,["format"]));return Yo.es.generate(g,c)}function lh(g,c){for(var h=65536,d=0;d<c.length;d+=2){h+=c[d];if(h>g)return!1;h+=c[d+1];if(h>=g)return!0}}function Hi(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&i7.test(String.fromCharCode(g)):!1===c?!1:lh(g,BT)}function xg(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&j7.test(String.fromCharCode(g)):
!1===c?!1:lh(g,BT)||lh(g,k7)}function yg(g,c){return new ti(g,{beforeExpr:!0,binop:c})}function ag(g,c){void 0===c&&(c={});c.keyword=g;return hG[g]=new ti(g,c)}function ml(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function Em(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function Zo(g,c){for(var h=1,d=0;;){zA.lastIndex=d;var k=zA.exec(g);if(k&&k.index<c)++h,d=k.index+k[0].length;else return new AA(h,c-d)}}function pt(g){var c={},h;for(h in iG)c[h]=g&&jG.call(g,h)?g[h]:iG[h];"latest"===
c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!CT&&"object"===typeof console&&console.warn&&(CT=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(DT(c.onToken)){var d=c.onToken;c.onToken=function(k){return d.push(k)}}DT(c.onComment)&&(c.onComment=Si(c,c.onComment));return c}function Si(g,
c){return function(h,d,k,n,b,e){h={type:h?"Block":"Line",value:d,start:k,end:n};g.locations&&(h.loc=new SC(this,b,e));g.ranges&&(h.range=[k,n]);c.push(h)}}function po(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function TC(g,c,h,d){g.type=c;g.end=h;this.options.locations&&(g.loc.end=d);this.options.ranges&&(g.range[1]=h);return g}function qy(g){g=ET[g]={binary:Em(l7[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:Em("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:Em(m7[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function rq(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function UC(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function ei(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function Ti(g){return ei(g)||sq(g)}function sq(g){return 48<=
g&&57>=g}function uj(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function BA(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function yc(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function Fm(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function $o(g){return"string"===typeof g?function(c){return c===g}:g?g:function(){return!0}}function Ew(g,c){c=Object.create(c||ue);for(var h in g)c[h]=
g[h];return c}function Hr(g,c,h){h(g,c)}function ap(g,c,h){}function bp(g,c){for(var h=65536,d=0;d<c.length;d+=2){h+=c[d];if(h>g)return!1;h+=c[d+1];if(h>=g)return!0}}function Gm(g,c){return 65>g?36===g:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&n7.test(String.fromCharCode(g)):!1===c?!1:bp(g,FT)}function Ir(g,c){return 48>g?36===g:58>g?!0:65>g?!1:91>g?!0:97>g?95===g:123>g?!0:65535>=g?170<=g&&o7.test(String.fromCharCode(g)):!1===c?!1:bp(g,FT)||bp(g,p7)}function dn(g,c){return new zi(g,{beforeExpr:!0,
binop:c})}function Gh(g,c){void 0===c&&(c={});c.keyword=g;return xM[g]=new zi(g,c)}function cp(g,c){return 10===g||13===g||!c&&(8232===g||8233===g)}function tq(g){return new RegExp("^(?:"+g.replace(/ /g,"|")+")$")}function uq(g,c){for(var h=1,d=0;;){ry.lastIndex=d;var k=ry.exec(g);if(k&&k.index<c)++h,d=k.index+k[0].length;else return new VC(h,c-d)}}function CA(g){var c={},h;for(h in kG)c[h]=g&&lG.call(g,h)?g[h]:kG[h];"latest"===c.ecmaVersion?c.ecmaVersion=1E8:null==c.ecmaVersion?(!GT&&"object"===
typeof console&&console.warn&&(GT=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),c.ecmaVersion=11):2015<=c.ecmaVersion&&(c.ecmaVersion-=2009);null==c.allowReserved&&(c.allowReserved=5>c.ecmaVersion);if(HT(c.onToken)){var d=c.onToken;c.onToken=function(k){return d.push(k)}}HT(c.onComment)&&(c.onComment=fv(c,c.onComment));return c}function fv(g,c){return function(h,d,k,n,b,e){h={type:h?"Block":"Line",value:d,start:k,
end:n};g.locations&&(h.loc=new DA(this,b,e));g.ranges&&(h.range=[k,n]);c.push(h)}}function qt(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function rt(g,c,h,d){g.type=c;g.end=h;this.options.locations&&(g.loc.end=d);this.options.ranges&&(g.range[1]=h);return g}function mh(g){g=IT[g]={binary:tq(q7[g]+" Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
nonBinary:{General_Category:tq("Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu"),
Script:tq(r7[g])}};g.nonBinary.Script_Extensions=g.nonBinary.Script;g.nonBinary.gc=g.nonBinary.General_Category;g.nonBinary.sc=g.nonBinary.Script;g.nonBinary.scx=g.nonBinary.Script_Extensions}function En(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function nl(g){return 36===g||40<=g&&43>=g||46===g||63===g||91<=g&&94>=g||123<=g&&125>=g}function st(g){return 65<=g&&90>=g||97<=g&&122>=g||95===g}function gv(g){return st(g)||Jr(g)}function Jr(g){return 48<=
g&&57>=g}function vq(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g}function ma(g){return 65<=g&&70>=g?10+(g-65):97<=g&&102>=g?10+(g-97):g-48}function wq(g){return"function"!==typeof BigInt?null:BigInt(g.replace(/_/g,""))}function lk(g){if(65535>=g)return String.fromCharCode(g);g-=65536;return String.fromCharCode((g>>10)+55296,(g&1023)+56320)}function Ek(g){return"\u2716"===g.name}function tt(){}function Ld(g){return 14>g&&8<g||32===g||160===g||cp(g)}function ze(g,c,h,d){var k=[];d=d||pe.walk.make(pe.custom.withMemberExpression);
Object.keys(pe.walk.base).forEach(function(n){var b=d[n];d[n]=function(e,l,a){pe.arr.pushIfNotIncluded(k,e);return b(e,l,a)}});d.Property=function(n,b,e){pe.arr.pushIfNotIncluded(k,n);e(n.key,b,"Expression");e(n.value,b,"Expression")};d.LabeledStatement=function(n,b,e){n.label&&e(n.label,b,"Expression");e(n.body,b,"Statement")};pe.walk.findNodeAround(g,c,h,d);return k}function Ga(g,c){function h(k){return null===k?null:d[k.type](k,h)}var d=pe.obj.extend({Program:function(k,n){return{start:k.start,
end:k.end,type:"Program",body:k.body.map(n),source:k.source,astIndex:k.astIndex}},FunctionDeclaration:function(k,n){return{start:k.start,end:k.end,type:"FunctionDeclaration",id:n(k.id),params:k.params.map(n),body:n(k.body),source:k.source,astIndex:k.astIndex}},BlockStatement:function(k,n){return{start:k.start,end:k.end,type:"BlockStatement",body:k.body.map(n),source:k.source,astIndex:k.astIndex}},ExpressionStatement:function(k,n){return{start:k.start,end:k.end,type:"ExpressionStatement",expression:n(k.expression),
source:k.source,astIndex:k.astIndex}},CallExpression:function(k,n){return{start:k.start,end:k.end,type:"CallExpression",callee:n(k.callee),arguments:k.arguments.map(n),source:k.source,astIndex:k.astIndex}},MemberExpression:function(k,n){return{start:k.start,end:k.end,type:"MemberExpression",object:n(k.object),property:n(k.property),computed:k.computed,source:k.source,astIndex:k.astIndex}},NewExpression:function(k,n){return{start:k.start,end:k.end,type:"NewExpression",callee:n(k.callee),arguments:k.arguments.map(n),
source:k.source,astIndex:k.astIndex}},VariableDeclaration:function(k,n){return{start:k.start,end:k.end,type:"VariableDeclaration",declarations:k.declarations.map(n),kind:k.kind,source:k.source,astIndex:k.astIndex}},VariableDeclarator:function(k,n){return{start:k.start,end:k.end,type:"VariableDeclarator",id:n(k.id),init:n(k.init),source:k.source,astIndex:k.astIndex}},FunctionExpression:function(k,n){return{start:k.start,end:k.end,type:"FunctionExpression",id:n(k.id),params:k.params.map(n),body:n(k.body),
source:k.source,astIndex:k.astIndex}},IfStatement:function(k,n){return{start:k.start,end:k.end,type:"IfStatement",test:n(k.test),consequent:n(k.consequent),alternate:n(k.alternate),source:k.source,astIndex:k.astIndex}},ConditionalExpression:function(k,n){return{start:k.start,end:k.end,type:"ConditionalExpression",test:n(k.test),consequent:n(k.consequent),alternate:n(k.alternate),source:k.source,astIndex:k.astIndex}},SwitchStatement:function(k,n){return{start:k.start,end:k.end,type:"SwitchStatement",
discriminant:n(k.discriminant),cases:k.cases.map(n),source:k.source,astIndex:k.astIndex}},SwitchCase:function(k,n){return{start:k.start,end:k.end,type:"SwitchCase",test:n(k.test),consequent:k.consequent.map(n),source:k.source,astIndex:k.astIndex}},BreakStatement:function(k,n){return{start:k.start,end:k.end,type:"BreakStatement",label:k.label,source:k.source,astIndex:k.astIndex}},ContinueStatement:function(k,n){return{start:k.start,end:k.end,type:"ContinueStatement",label:k.label,source:k.source,astIndex:k.astIndex}},
TryStatement:function(k,n){return{start:k.start,end:k.end,type:"TryStatement",block:n(k.block),handler:n(k.handler),finalizer:n(k.finalizer),guardedHandlers:k.guardedHandlers.map(n),source:k.source,astIndex:k.astIndex}},CatchClause:function(k,n){return{start:k.start,end:k.end,type:"CatchClause",param:n(k.param),guard:n(k.guard),body:n(k.body),source:k.source,astIndex:k.astIndex}},ThrowStatement:function(k,n){return{start:k.start,end:k.end,type:"ThrowStatement",argument:n(k.argument),source:k.source,
astIndex:k.astIndex}},ForStatement:function(k,n){return{start:k.start,end:k.end,type:"ForStatement",init:n(k.init),test:n(k.test),update:n(k.update),body:n(k.body),source:k.source,astIndex:k.astIndex}},ForInStatement:function(k,n){return{start:k.start,end:k.end,type:"ForInStatement",left:n(k.left),right:n(k.right),body:n(k.body),source:k.source,astIndex:k.astIndex}},WhileStatement:function(k,n){return{start:k.start,end:k.end,type:"WhileStatement",test:n(k.test),body:n(k.body),source:k.source,astIndex:k.astIndex}},
DoWhileStatement:function(k,n){return{start:k.start,end:k.end,type:"DoWhileStatement",test:n(k.test),body:n(k.body),source:k.source,astIndex:k.astIndex}},WithStatement:function(k,n){return{start:k.start,end:k.end,type:"WithStatement",object:n(k.object),body:n(k.body),source:k.source,astIndex:k.astIndex}},UnaryExpression:function(k,n){return{start:k.start,end:k.end,type:"UnaryExpression",argument:n(k.argument),operator:k.operator,prefix:k.prefix,source:k.source,astIndex:k.astIndex}},BinaryExpression:function(k,
n){return{start:k.start,end:k.end,type:"BinaryExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},LogicalExpression:function(k,n){return{start:k.start,end:k.end,type:"LogicalExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},AssignmentExpression:function(k,n){return{start:k.start,end:k.end,type:"AssignmentExpression",left:n(k.left),operator:k.operator,right:n(k.right),source:k.source,astIndex:k.astIndex}},
UpdateExpression:function(k,n){return{start:k.start,end:k.end,type:"UpdateExpression",argument:n(k.argument),operator:k.operator,prefix:k.prefix,source:k.source,astIndex:k.astIndex}},ReturnStatement:function(k,n){return{start:k.start,end:k.end,type:"ReturnStatement",argument:n(k.argument),source:k.source,astIndex:k.astIndex}},Identifier:function(k,n){return{start:k.start,end:k.end,type:"Identifier",name:k.name,source:k.source,astIndex:k.astIndex}},Literal:function(k,n){return{start:k.start,end:k.end,
type:"Literal",value:k.value,raw:k.raw,source:k.source,astIndex:k.astIndex}},ObjectExpression:function(k,n){return{start:k.start,end:k.end,type:"ObjectExpression",properties:k.properties.map(function(b){return{key:n(b.key),value:n(b.value),kind:b.kind}}),source:k.source,astIndex:k.astIndex}},ArrayExpression:function(k,n){return{start:k.start,end:k.end,type:"ArrayExpression",elements:k.elements.map(n),source:k.source,astIndex:k.astIndex}},SequenceExpression:function(k,n){return{start:k.start,end:k.end,
type:"SequenceExpression",expressions:k.expressions.map(n),source:k.source,astIndex:k.astIndex}},EmptyStatement:function(k,n){return{start:k.start,end:k.end,type:"EmptyStatement",source:k.source,astIndex:k.astIndex}},ThisExpression:function(k,n){return{start:k.start,end:k.end,type:"ThisExpression",source:k.source,astIndex:k.astIndex}},DebuggerStatement:function(k,n){return{start:k.start,end:k.end,type:"DebuggerStatement",source:k.source,astIndex:k.astIndex}},LabeledStatement:function(k,n){return{start:k.start,
end:k.end,type:"LabeledStatement",label:k.label,body:n(k.body),source:k.source,astIndex:k.astIndex}}},c||{});return h(g)}function ol(g,c,h){if(!c)return[];g=pe.findNodesIncluding(g,c.start);var d=g.indexOf(c);g=g.slice(0,d);g=pe.arr.detect(g.reverse(),function(k){return Array.isArray(k.body)}).body;if(!h)return pe.arr.without(g,c);c=g.indexOf(c);return"before"===h?g.slice(0,c):g.slice(c+1)}function dp(g,c,h){g.astIndex||null!=h&&!h||pe.addAstIndex(g);var d=null;pe.withMozillaAstDo(g,null,function(k,
n,b){d||n.astIndex<c||(n.astIndex===c?d=n:k())});return d}function ut(g,c,h){h||(h=c,c=g,g=null);g||(g={});c.astIndex||pe.addAstIndex(c);var d,k=!1,n="EmptyStatement BlockStatement ExpressionStatement IfStatement LabeledStatement BreakStatement ContinueStatement WithStatement SwitchStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration".split(" ");pe.withMozillaAstDo(c,
{},function(b,e,l,a){if(!(k||e.astIndex<h.astIndex)){if(e===h||e.astIndex===h.astIndex)if(k=!0,g.asPath)d=a;else{e=pe.Path(a);do d=e.get(c),e=e.slice(0,e.size()-1);while(-1==n.indexOf(d.type)&&0<e.size())}!k&&b()}});return d}function hv(g){pe.withMozillaAstDo(g,{index:0},function(c,h,d){c();h.astIndex=d.index++});return g}function sy(g,c){"string"===typeof g&&(c=g,g=Fg.parse(g));c&&Fg.AllNodesVisitor.run(g,function(h,d,k){return!h.source&&(h.source=c.slice(h.start,h.end))});return g}function xq(g,
c){c=void 0===c?{}:c;var h=Fg.parse("("+g+")",c);Fg.AllNodesVisitor.run(h,function(d,k,n){if(!d._positionFixed){d._positionFixed=!0;if(d.start||0===d.start)d.start+=-1,d.end+=-1;c.addSource&&!d.source&&(d.source=g.slice(d.start,d.end))}});return h.body[0].expression}function en(g,c){c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.sourceType=c.sourceType||"module";c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?
c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;var h;"LabeledStatement"===c.type&&(h="$={"+g+"}");try{var d=Fg.parse(h||g,c);h?d=null:c.addSource&&Fg.addSource(d,g)}catch(n){var k=n}k&&void 0!==k.raisedAt?(h&&(k.pos-=3,k.raisedAt-=3,k.loc.column-=3),h=""+g.slice(k.raisedAt-20,k.raisedAt),h=h+"<-error->"+g.slice(k.raisedAt,k.raisedAt+20),c.verbose&&console.log("parse error: "+h),k.parseErrorSource=h):k&&c.verbose&&
console.log(""+k+k.stack);d||(d=Fg.loose.parse(g,c),c.addSource&&Fg.addSource(d,g),d.isFuzzy=!0,d.parseError=k);return d}function sg(g,c){function h(m){m=k(d(m));b.allComments=m.comments}function d(m){n.forEach(function(q){var r=Fg.arr.detect(Fg.nodesAt(q.start,b).reverse(),function(u){return"BlockStatement"===u.type||"Program"===u.type});r||(r=b);r.comments||(r.comments=[]);r.comments.push(q);m.nodesWithComments.push(r)});return m}function k(m){m.nodesWithComments.forEach(function(q){Fg.arr.clone(q.comments).reduce(function(r,
u){if(u.isBlock)return r.lastComment=null,r;if(!r.lastComment)return r.lastComment=u,r;var v=r.lastComment;if(Fg.arr.detect(q.body,function(z){return z.start>=v.end&&z.end<=u.start}))return r.lastComment=u,r;var y=g.slice(v.end,u.start);if(/[\n\r][\n\r]+/.test(y))return r.lastComment=u,r;v.text+="\n"+u.text;v.end=u.end;Fg.arr.remove(q.comments,u);Fg.arr.remove(m.comments,u);return r},{lastComment:null})});return m}c=c||{};c.ecmaVersion=c.ecmaVersion||11;c.allowAwaitOutsideFunction=!0;c.sourceType=
c.sourceType||"module";c.hasOwnProperty("allowImportExportEverywhere")||(c.allowImportExportEverywhere=!0);c.plugins=c.plugins||{};c.plugins.jsx=c.plugins.hasOwnProperty("jsx")?c.plugins.jsx:!0;c.plugins.asyncawait=c.plugins.hasOwnProperty("asyncawait")?c.plugins.asyncawait:{inAsyncFunction:!0};c.plugins.objectSpread=c.plugins.hasOwnProperty("objectSpread")?c.plugins.objectSpread:!0;if(c.withComments){delete c.withComments;var n=[];c.onComment=function(m,q,r,u,v,y){n.push({isBlock:m,text:q,node:null,
start:r,end:u,line:v,column:y})}}try{var b=Fg.acorn.parse(g,c)}catch(m){if("undefined"!==typeof SyntaxError&&m instanceof SyntaxError&&m.loc){var e=g.split("\n"),l=m,a=l.loc;c=a.line;a=a.column;var f=l.pos;e=e[c-1];l="Syntax error at line "+c+" column "+a+" (index "+f+') "'+l.message+'"\nsource: '+e.slice(0,a)+"<--SyntaxError--\x3e"+e.slice(a);l=new SyntaxError(l);l.loc={line:c,column:a};l.pos=f;throw l;}throw m;}c.addSource&&Fg.addSource(b,g);c.addAstIndex&&!b.hasOwnProperty("astIndex")&&Fg.addAstIndex(b);
b&&n&&h({ast:b,comments:n,nodesWithComments:[]});return b}function qo(g){return ie.identifierRe.test(g)&&-1===g.indexOf("-")}function Ij(g){return"this"===g?{type:"ThisExpression"}:{name:String(g),type:"Identifier"}}function ep(g){return{type:"Literal",value:g}}function fn(g){return{type:"ExpressionStatement",expression:g}}function vt(g){return{type:"ReturnStatement",argument:g}}function pl(){return{type:"EmptyStatement"}}function Fw(g,c,h){return{left:g,right:h,operator:c,type:"BinaryExpression"}}
function ql(g,c,h){for(var d=[],k=2;k<arguments.length;++k)d[k-2]=arguments[k];k=g.arrow;var n=g.id,b=g.expression,e=g.generator;c=void 0===c?[]:c;c=c.map(function(l){return"string"===typeof l?ie.id(l):l});return{type:(k?"Arrow":"")+"FunctionExpression",id:n?"string"===typeof n?ie.id(n):n:void 0,params:c,body:b&&1===d.length?d[0]:{body:d,type:"BlockStatement"},expression:b||!1,generator:e||!1}}function mk(g,c){for(var h=[],d=1;d<arguments.length;++d)h[d-1]=arguments[d];"string"===typeof g&&(g=ie.id(g));
return{type:"CallExpression",callee:g,arguments:h}}function Kr(g,c,h){"string"===typeof g&&(g={name:g,type:"Identifier"});return{type:"VariableDeclaration",kind:h||"var",declarations:[{type:"VariableDeclarator",id:g,init:c}]}}function Lr(g,c,h){"string"===typeof g&&(g=ie.id(g));"string"===typeof c?(h||ie.isIdentifier(c)||(h=!0),c=h?ie.literal(c):ie.id(c)):"number"===typeof c?(c=ie.literal(c),h=!0):"Literal"===c.type&&(h=!0);return{type:"MemberExpression",computed:!!h,object:g,property:c}}function Gw(g,
c){for(var h=[],d=1;d<arguments.length;++d)h[d-1]=arguments[d];return h.reduce(function(k,n){return ie.member(k,n)},"object"===typeof g?g:ie.id(g))}function ty(g,c){return{type:"AssignmentExpression",operator:"=",right:c?"string"===typeof c?ie.id(c):c:ie.id("undefined"),left:"string"===typeof g?ie.id(g):g}}function uy(g){for(var c=[],h=0;h<arguments.length;++h)c[h-0]=arguments[h];return{body:Array.isArray(c[0])?c[0]:c,type:"BlockStatement"}}function qh(g){for(var c=[],h=0;h<arguments.length;++h)c[h-
0]=arguments[h];return Object.assign(ie.block.apply(ie,$jscomp.arrayFromIterable(c)),{sourceType:"module",type:"Program"})}function vy(g,c,h,d){for(var k=[],n=3;n<arguments.length;++n)k[n-3]=arguments[n];Array.isArray(h)||(k.unshift(h),h=null);return{block:ie.block(k),finalizer:h?ie.block(h):null,handler:{body:ie.block(c),param:ie.id(g),type:"CatchClause"},type:"TryStatement"}}function EA(g,c){return{type:"Property",key:g,computed:"Identifier"!==g.type,shorthand:!1,value:c}}function Mr(g){for(var c=
[],h=0;h<g.length;h+=2){var d=g[h];"string"===typeof d&&(d=ie.id(d));c.push(ie.prop(d,g[h+1]))}return{properties:c,type:"ObjectExpression"}}function FA(g,c,h){c=void 0===c?ie.block():c;h=void 0===h?ie.block():h;return{consequent:c,alternate:h,test:g,type:"IfStatement"}}function yq(g,c,h){return{type:"ForInStatement",left:"string"===typeof g?ie.varDecl(g):g,right:"string"===typeof c?ie.id(c):c,body:h}}function ro(g,c,h){c=void 0===c?ie.id("undefined"):c;h=void 0===h?ie.id("undefined"):h;return{consequent:c,
alternate:h,test:g,type:"ConditionalExpression"}}function zq(g,c,h){return{operator:g,left:c,right:h,type:"LogicalExpression"}}function Hm(g){var c=new cd.ScopeVisitor,h=c.newScope(g,null);c.accept(g,h,[]);return h}function Pk(g,c){return cd.withMozillaAstDo(g,[],function(h,d,k){d.start<=c&&c<=d.end&&(k.push(d),h());return k})}function GA(g,c){return cd.tree.filter(cd.scopes(g),function(h){h=h.node;var d=h.start,k=h.end;"FunctionDeclaration"===h.type&&(d=h.params.length?h.params[0].start:h.body.start,
k=h.body.end);return d<=c&&c<=k},function(h){return h.subScopes})}function Wl(g,c){return cd.arr.last(cd.scopesAtIndex(g,c))}function nj(g,c){return cd.arr.filter(cd.nodesAt(g,c),function(h){return"Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type})}function Hw(g){return cd.withMozillaAstDo(g,{root:g,result:[]},function(c,h,d){d.result.push(h);if(h!==d.root&&("Program"===h.type||"FunctionDeclaration"===h.type||"FunctionExpression"===h.type))return d;c();return d}).result}
function Nr(g,c,h){h=void 0===h?[]:h;c&&g.node.id&&g.node.id.name&&h.push(g.node.id);cd.helpers.declIds(g.params,h);for(c=0;c<g.funcDecls.length;c++){var d=g.funcDecls[c].id;d&&h.push(d)}cd.helpers.varDeclIds(g,h);h.push.apply(h,$jscomp.arrayFromIterable(g.catches));for(c=0;c<g.classDecls.length;c++)(d=g.classDecls[c].id)&&h.push(d);h.push.apply(h,$jscomp.arrayFromIterable(g.importSpecifiers));return cd.arr.compact(h)}function Iw(g,c){for(var h=[],d=$jscomp.makeIterator(cd.declarationsOfScope(g,!0)),
k=d.next();!k.done;k=d.next())h.push(k.value.name);c&&cd._findJsLintGlobalDeclarations("Program"===g.node.type?g.node:g.node.body,h);return h}function wt(g,c){c=void 0===c?[]:c;if(!g||!g.comments)return c;g=$jscomp.makeIterator(g.comments);for(var h=g.next();!h.done;h=g.next())if(h=h.value.text.trim(),h.startsWith("global")){h=$jscomp.makeIterator(h.replace(cd.globalDeclRe,"").split(","));for(var d=h.next();!d.done;d=h.next())c.push(d.value.trim())}return c}function Im(g){return cd.FindToplevelFuncDeclVisitor.run(g)}
function xt(g,c){if(0==c.length)return[null,null];var h=$jscomp.makeIterator(c);c=h.next().value;h=$jscomp.arrayFromIterator(h);var d=c.decls||cd.declarationsWithIdsOfScope(c);c.decls=d;return d.find(function(k){k=$jscomp.makeIterator(k);k.next();return k.next().value.name==g})||xt(g,h)}function iv(g){function c(d,k){var n=[d].concat(k);d.refs.forEach(function(b){var e=$jscomp.makeIterator(cd.resolveReference(b.name,n)),l=e.next().value;e=e.next().value;h.set(b,{decl:l,declId:e,ref:b})});d.subScopes.forEach(function(b){return c(b,
n)})}if(g.referencesResolvedSafely)return g;var h=g.resolvedRefMap||(g.resolvedRefMap=new Map);c(g,[]);g.referencesResolvedSafely=!0;return g}function wy(g,c){c=$jscomp.makeIterator(c.resolvedRefMap.values());for(var h=c.next();!h.done;h=c.next()){h=h.value;var d=h.ref,k=d.end;if(d.start<=g&&g<=k)return h}}function Qk(g,c){function h(b){var e=cd._declaredVarNames(b,d);return cd.arr.filter(b.subScopes.map(h).reduce(function(l,a){return l.concat(a)},b.refs),function(l){return-1===e.indexOf(l.name)})}
c=c||{};c.withComments=!0;"string"===typeof g&&(g=cd.parse(g,c));g=cd.scopes(g);var d=!!c.jslintGlobalComment;c=cd._declaredVarNames(g,d);var k=g.refs.concat(cd.arr.flatten(g.subScopes.map(h))),n=cd.arr.withoutAll(k.map(function(b){return b.name}),c);return{scope:g,varDecls:g.varDecls,funcDecls:cd.arr.filter(g.funcDecls,function(b){return b.id}),classDecls:cd.arr.filter(g.classDecls,function(b){return b.id}),declaredNames:c,undeclaredNames:n,refs:k,thisRefs:g.thisRefs}}function Aq(g,c){g=cd.topLevelDeclsAndRefs(g,
c);var h=g.declaredNames.concat(cd.knownGlobals);return cd.arr.filter(g.refs,function(d){return-1===h.indexOf(d.name)})}function HA(g,c,h,d){if(!c&&!g)throw Error("Need at least ast or code");c=c||cd.stringify(g);g=g&&g.loc?g:cd.parse(c,{locations:!0});return cd.withMozillaAstDo(g,[],function(k,n,b){h.every(function(e){return cd.num.between(e,n.loc.start.line,n.loc.end.line)})&&(cd.arr.pushIfNotIncluded(b,n),k());return b})}function xy(g,c,h,d){h=void 0===h?!0:h;d=void 0===d?{refs:[],decls:[]}:d;
if("this"===c)return d.refs.push.apply(d.refs,$jscomp.arrayFromIterable(g.thisRefs)),d;var k=cd.__varDeclIdsFor(g,c);if(!h&&k.length)return d;h=$jscomp.makeIterator(g.refs);for(var n=h.next();!n.done;n=h.next())n=n.value,n.name===c&&d.refs.push(n);d.decls.push.apply(d.decls,$jscomp.arrayFromIterable(k));g=$jscomp.makeIterator(g.subScopes);for(k=g.next();!k.done;k=g.next())xy(k.value,c,!1,d);return d}function IA(g,c,h){var d=null;cd.arr.detect(cd.scopesAtIndex(g,h).reverse(),function(k){k=cd.declarationsOfScope(k,
!0);var n=cd.arr.pluck(k,"name").indexOf(c);if(-1===n)return!1;d=k[n];return!0});return d}function so(g,c){c="string"===typeof c?cd.parse(c):c;return cd.custom.findNodesIncluding(c,g)}function jv(g,c,h){var d=cd.nodesAt(c.start,g).reverse().find(function(n){return cd.arr.include(cd._stmtTypes,n.type)});if(h&&h.asPath){c=new cd.BaseVisitor;var k;c.accept=cd.fun.wrap(c.accept,function(n,b,e,l){if(b===d)throw k=l,Error("stop search");return n(b,e,l)});try{c.accept(g,{},[])}catch(n){}return k}return d}
function kv(g){var c=[];g=g.node.body||[];for(var h=0;h<g.length;h++){var d=g[h];if("ImportDeclaration"===d.type)if(0===d.specifiers.length)c.push({local:null,imported:null,fromModule:d.source.value,node:d});else{var k=d.source?d.source.value:"unknown module";c.push.apply(c,$jscomp.arrayFromIterable(d.specifiers.map(function(n){return{local:n.local?n.local.name:null,imported:"ImportNamespaceSpecifier"===n.type?"*":"ImportDefaultSpecifier"===n.type?"default":"ImportSpecifier"===n.type?n.imported.name:
null,fromModule:k,node:d}})))}}return c}function Jw(g,c){(void 0===c?0:c)&&cd.resolveReferences(g);c=[];for(var h={},d=$jscomp.makeIterator(g.exportDecls),k=d.next();!k.done;h={$jscomp$loop$prop$node$2628:h.$jscomp$loop$prop$node$2628},k=d.next()){h.$jscomp$loop$prop$node$2628=k.value;var n=cd.statementOf(g.node,h.$jscomp$loop$prop$node$2628);if(n){var b=n.source?n.source.value:null;"ExportAllDeclaration"===n.type?c.push({local:null,exported:"*",imported:"*",fromModule:b,node:h.$jscomp$loop$prop$node$2628,
type:"all"}):"ExportDefaultDeclaration"===n.type?cd.helpers.isDeclaration(n.declaration)?c.push({local:n.declaration.id?n.declaration.id.name:null,exported:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2628,decl:n.declaration,declId:n.declaration.id}):"Identifier"===n.declaration.type?(k=g.resolvedRefMap.get(n.declaration)||{},c.push({local:n.declaration.name,exported:"default",
fromModule:null,node:h.$jscomp$loop$prop$node$2628,type:"id",decl:k.decl,declId:k.declId})):c.push({local:null,exported:"default",fromModule:null,node:h.$jscomp$loop$prop$node$2628,type:"expr",decl:n.declaration,declId:n.declaration}):n.specifiers&&n.specifiers.length?c.push.apply(c,$jscomp.arrayFromIterable(n.specifiers.map(function(e){return function(l){if(b){var a=e.$jscomp$loop$prop$node$2628;var f=l.exported}else l.local&&(a=(f=g.resolvedRefMap.get(l.local))?f.decl:null,f=f?f.declId:null);return{local:!b&&
l.local?l.local.name:null,exported:l.exported?l.exported.name:null,imported:b&&l.local?l.local.name:null,fromModule:b||null,type:"id",node:e.$jscomp$loop$prop$node$2628,decl:a,declId:f}}}(h)))):n.declaration&&n.declaration.declarations?c.push.apply(c,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(e){return function(l){return{local:l.id?l.id.name:"default",exported:l.id?l.id.name:"default",type:n.declaration.kind,fromModule:null,node:e.$jscomp$loop$prop$node$2628,decl:l,declId:l.id}}}(h)))):
n.declaration&&c.push({local:n.declaration.id?n.declaration.id.name:"default",exported:n.declaration.id?n.declaration.id.name:"default",type:"FunctionDeclaration"===n.declaration.type?"function":"ClassDeclaration"===n.declaration.type?"class":null,fromModule:null,node:h.$jscomp$loop$prop$node$2628,decl:n.declaration,declId:n.declaration.id})}}return cd.arr.uniqBy(c,function(e,l){return e.local==l.local&&e.exported==l.exported&&e.fromModule==l.fromModule})}function lv(g){return(new fp.ObjectSpreadTransformer).accept(g,
{},[])}function yy(g,c){if(g.start===c.start&&g.end===c.end)return 0;if(g.end<=c.start)return-1;if(g.start>=c.end||g.start<=c.start&&g.end>=c.end)return 1;if(c.start<=g.start&&c.end>=g.end)return-1;throw Error("Comparing nodes");}function Or(g,c,h){h="object"===typeof h?h:{changes:[],source:h};var d=!1,k=h.changes.reduce(function(b,e){if(b.end<e.pos)return b;var l=e.pos<b.start;d=d||e.pos>=b.start&&e.pos<=b.end;if("add"===e.type)return{start:l?b.start+e.string.length:b.start,end:b.end+e.string.length};
if("del"===e.type)return{start:l?b.start-e.length:b.start,end:b.end-e.length};throw Error("Cannot deal with change "+yd.obj.inspect(e));},{start:g.start,end:g.end}),n=h.source;g=c(g,n.slice(k.start,k.end),d);g="string"===typeof g?g:Array.isArray(g)?g.map(yd._node2string).join("\n"+yd._findIndentAt(n,k.start)):g=yd._node2string(g);k=[{type:"del",pos:k.start,length:k.end-k.start},{type:"add",pos:k.start,string:g}];return{changes:h.changes.concat(k),source:yd._applyChanges(k,n)}}function Bq(g,c){g=g.sort(function(k,
n){return yd._compareNodesForReplacement(k.target,n.target)});c="object"===typeof c?c:{changes:[],source:c};for(var h=0;h<g.length;h++){var d=g[h];c=yd.replaceNode(d.target,d.replacementFunc,c)}return c}function yt(g,c,h,d){d="object"===typeof g?g:null;g="string"===typeof g?g:d.source||yd._node2string(d);return yd.replaceNode(c,h,g)}function Pr(g,c){c=void 0===c?[]:c;c.push.apply(c,$jscomp.arrayFromIterable(g.varDecls));g=$jscomp.makeIterator(g.subScopes);for(var h=g.next();!h.done;h=g.next())Pr(h.value,
c);return c}function JA(g){var c="object"===typeof g?g:yd.parse(g);g="string"===typeof g?g:c.source||yd._node2string(c);c=yd.scopes(c);var h=yd.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var d=h.next();!d.done;d=h.next())c.push({target:d.value,replacementFunc:function(k,n,b){b&&(k=yd.parse(n).body[0]);return k.declarations.map(function(e){return{type:"VariableDeclaration",kind:"var",declarations:[e]}})}});return yd.replaceNodes(c,g)}function gn(g){var c="object"===typeof g?g:yd.parse(g);
g="string"===typeof g?g:c.source||yd._node2string(c);c=yd.scopes(c);var h=yd.__findVarDecls(c);c=[];h=$jscomp.makeIterator(h);for(var d=h.next();!d.done;d=h.next())c.push({target:d.value,replacementFunc:function(k,n,b){b&&(k=yd.parse(n).body[0]);n=[];k=$jscomp.makeIterator(k.declarations);for(b=k.next();!b.done;b=k.next()){var e=b.value;b={type:"Identifier",name:"__temp"};n.push({type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:b,init:e.init}]});e=$jscomp.makeIterator(yd.helpers.objPropertiesAsList(e.id,
[],!1));for(var l=e.next();!l.done;l=e.next())l=l.value.key,n.push(yd.varDecl(l[l.length-2],yd.memberChain.apply(yd,[b.name].concat($jscomp.arrayFromIterable(l))),"var"))}return n}});return yd.replaceNodes(c,g)}function Qr(g,c){c=c||{};var h=yd.parse(g,c),d=yd.arr.last(h.body);if("ExpressionStatement"!==d.type)return c.asAST?h:g;h.body.splice(h.body.length-1,1,yd.returnStmt(d.expression));return c.asAST?h:yd.stringify(h)}function Rr(g,c){c=c||{};g=yd.returnLastStatement(g,c);return c.asAST?yd.program(yd.funcExpr.apply(yd,
[{id:c.id||void 0},[]].concat($jscomp.arrayFromIterable(g.body)))):"function"+(c.id?" "+c.id:"")+"() {\n"+g+"\n}"}function Cq(g,c){"string"===typeof g&&(g=yd.parse(g));c=c||{};var h="Program"===g.type,d=c.startFuncNode||yd.id("__start_execution");c=c.endFuncNode||yd.id("__end_execution");var k=yd.topLevelFuncDecls(g),n=g.body,b=[];k.forEach(function(e){var l=e.node;yd.Path(e.path).set(g,yd.exprStmt(l.id));b.push(l)});n.unshift(yd.exprStmt(yd.funcCall(d)));d=yd.arr.last(n);"ExpressionStatement"===
d.type?(n.pop(),n.push(yd.exprStmt(yd.funcCall(c,yd.id("null"),d.expression)))):"VariableDeclaration"===d.type&&"Identifier"===yd.arr.last(d.declarations).id.type?n.push(yd.exprStmt(yd.funcCall(c,yd.id("null"),yd.arr.last(d.declarations).id))):n.push(yd.exprStmt(yd.funcCall(c,yd.id("null"),yd.id("undefined"))));b.push(yd.tryStmt.apply(yd,["err",[yd.exprStmt(yd.funcCall(c,yd.id("err"),yd.id("undefined")))]].concat($jscomp.arrayFromIterable(n))));return h?yd.program.apply(yd,$jscomp.arrayFromIterable(b)):
yd.block.apply(yd,$jscomp.arrayFromIterable(b))}function gp(g){if(!yd.isProbablySingleExpressionRe.test(g)||30<g.split("\n").length)return g;try{var c=yd.fuzzyParse(g);1===c.body.length&&("FunctionDeclaration"===c.body[0].type||"BlockStatement"===c.body[0].type&&"LabeledStatement"===c.body[0].body[0].type)&&(g="("+g.replace(/;\s*$/,"")+")")}catch(h){"undefined"!==typeof $world?$world.logError(h):console.error("Eval preprocess error: %s",h.stack||h)}return g}function mv(g,c){var h=gf.statementOf(g,
c,{asPath:!0}).slice(0,-2);h=gf.Path(h).get(g);return h.comments&&h.comments.length?gf.chain(gf.extractComments(g)).reversed().detect(function(d){return d.followingNode===c}).value():null}function Sr(g,c){function h(r){return gf.arr.detect(r.node.body,function(u){return u.start>r.comment.end})}function d(r){return{type:"unknown",comment:r.comment.text}}function k(r){r=gf.Path(r.path.slice(0,-1)).get(f);return{name:r.id?r.id.name:"<error: no name for function>",args:gf.arr.pluck(r.params,"name")}}
function n(r){for(var u=gf.Path(r.path.slice(0,-2)).get(f),v=u.key?u.key.name:"<error: no name for method>",y=r.path.slice(),z="<error: no object found for method>";y.length&&"init"!==gf.arr.last(y);)y.pop();y.length&&(z=gf.Path(y.slice(0,-1).concat(["id","name"])).get(f));if(gf.string.startsWith(z,"<error")){for(y=r.path.slice();y.length&&"right"!==gf.arr.last(y);)y.pop();y.length&&(z=gf.Path(y.slice(0,-1).concat(["left"])).get(f),z=m.slice(z.start,z.end))}gf.string.startsWith(z,"<error")&&(y=r.path.slice(),
(r=(r=gf.Path(y.slice(0,-6)).get(f))&&"CallExpression"===r.type&&r.arguments[0])&&(z=m.slice(r.start,r.end)));return{name:v,args:gf.arr.pluck(u.value.params,"name"),objectName:z}}function b(r){r=gf.Path(r.path.slice(0,-1)).get(f);if("FunctionExpression"!==r.type&&"FunctionDeclaration"!==r.type)return{};var u=gf.statementOf(f,r);if("ExpressionStatement"!==u.type||"AssignmentExpression"!==u.expression.type)return{};var v=m.slice(u.expression.left.object.start,u.expression.left.object.end);return{name:m.slice(u.expression.left.property.start,
u.expression.left.property.end),objectName:v,args:gf.arr.pluck(r.params,"name")}}function e(r){var u=r.path.slice(0,-3);var v=gf.Path(u).get(f);if(v&&"Property"===v.type){var y=gf.arr.pluck(v.value.callee.params,"name");var z=v.key?v.key.name:"<error: no name for method>"}z||(u=r.path.slice(0,-2),(v=gf.Path(u).get(f))&&"Property"===v.type&&(y=gf.arr.pluck(v.value.params,"name"),z=v.key?v.key.name:"<error: no name for method>"));z||(z="<error: no name for method>",y=[],u=r.path);v=gf.arr.clone(u);
for(r="<error: no object found for method>";v.length&&"init"!==gf.arr.last(v);)v.pop();v.length&&(r=gf.Path(v.slice(0,-1).concat(["id","name"])).get(f));if(gf.string.startsWith(r,"<error")){for(v=gf.arr.clone(u);v.length&&"right"!==gf.arr.last(v);)v.pop();v.length&&(r=gf.Path(v.slice(0,-1).concat(["left"])).get(f),r=m.slice(r.start,r.end))}gf.string.startsWith(r,"<error")&&(v=gf.arr.clone(u),(u=(u=gf.Path(v.slice(0,-4)).get(f))&&"CallExpression"===u.type&&u.arguments[0])&&(r=m.slice(u.start,u.end)));
return{name:z,args:y,objectName:r}}function l(r){return r&&"VariableDeclaration"===r.type&&1===r.declarations.length}function a(r){return"AssignmentExpression"!==r.type?!1:"ObjectExpression"===r.right.type?!0:"AssignmentExpression"===r.right.type?a(r.right):!1}var f="string"===typeof g?gf.parse(g,{withComments:!0}):g,m=c||("string"===typeof g?g:gf.stringify(g)),q=gf.arr.sortBy(function(r){var u=[],v=new gf.Visitor;v.accept=gf.fun.wrap(v.accept,function(y,z,B,C){z.comments&&gf.arr.pushAll(u,z.comments.map(function(G){return{path:C,
comment:G,node:z}}));return y(z,B,C)});v.accept(r,u,[]);return u}(f),function(r){return r.comment.start});return q.map(function(r,u){if(gf.arr.equals(r.path.slice(-2),["value","body"]))return gf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},n(r)]);var v=r.path.slice(-5);gf.arr.removeAt(v,1);if(gf.arr.equals(v,["properties","value","callee","body"]))return gf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},e(r)]);if((v=gf.Path(r.path.slice(0,-1)).get(f))&&"FunctionDeclaration"===
v.type)return gf.obj.merge([r,r.comment,{type:"function",comment:r.comment.text},k(r)]);if(gf.arr.equals(r.path.slice(-2),["right","body"]))return gf.obj.merge([r,r.comment,{type:"method",comment:r.comment.text},b(r)]);v=h(r);return v?(u=q[u+1])&&u.comment.start<=v.start?gf.obj.merge([r,r.comment,{followingNode:v},d(r)]):l(v)&&("ObjectExpression"===v.declarations[0].init.type||a(v.declarations[0].init))?gf.obj.merge([r,r.comment,{followingNode:v},{type:"object",comment:r.comment.text},{name:v.declarations[0].id.name}]):
l(v)?gf.obj.merge([r,r.comment,{followingNode:v},{type:"var",comment:r.comment.text},{name:v.declarations[0].id.name}]):gf.obj.merge([r,r.comment,{followingNode:v},d(r)]):gf.obj.merge([r,r.comment,{followingNode:v},d(r)])})}function nv(g,c){c=c||Yg.obj.merge({hideOneLiners:!1},c);"string"===typeof g&&(g=Yg.parse(g,{addSource:!0}));for(var h=[],d=$jscomp.makeIterator("Program"===g.type?g.body:g.body.body),k=d.next();!k.done;k=d.next()){k=k.value;k=Yg.unwrapExport(k);var n=Yg.functionWrapper(k,c)||
Yg.varDefs(k)||Yg.funcDef(k)||Yg.es6ClassDef(k)||Yg.someObjectExpressionCall(k);if(n){if(c.hideOneLiners)if(g.loc)n=Yg.arr.filter(n,function(e){return!e.node.loc||e.node.loc.start.line!==e.node.loc.end.line});else if(g.source){k=[];n=$jscomp.makeIterator(n);for(var b=n.next();!b.done;b=n.next())b=b.value,(b.parent&&k.includes(b.parent)||(b.node.source||"").includes("\n"))&&k.push(b);n=k}h.push.apply(h,$jscomp.arrayFromIterable(n))}}return h}function rl(g){return Yg.arr.flatmap(g,function(c){return c?
"Identifier"===c.type?[c]:"RestElement"===c.type?[c.argument]:"ObjectPattern"===c.type?rl(Yg.arr.pluck(c.properties,"value")):"ArrayPattern"===c.type?rl(c.elements):[]:[]})}function ov(g){return tf.isValidIdentifierRe.test(g)}function to(){return"undefined"!==typeof System?System.global:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof Global?Global:"undefined"!==typeof self?self:function(){return this}()}function zy(g,c){c=String(c).match(/function\s*[a-zA-Z0-9_$]*\s*\(([^\)]*)\)/);
return g+"("+(c&&c[1]||"")+")"}function sl(g){return g===g||g===Array||g===Function||g===String||g===Boolean||g===Date||g===RegExp||g===Number||g===Promise?!0:g instanceof Function&&(void 0!==g.superclass||void 0!==g._superclass)}function pv(g,c){return g.map(function(h){return h[c]})}function qv(g){if(Symbol.keyFor(g))return'Symbol.for("'+Symbol.keyFor(g)+'")';if(Zg.knownSymbols.get(g))return Zg.knownSymbols.get(g);String(g).match(Zg.symMatcher);return String(g)}function rv(g){if(!g)return String(g);
if(Array.isArray(g))return"["+g.map(rv).join(",")+"]";if("symbol"===typeof g)return Zg.printSymbol(g);try{return String(g)}catch(c){throw Error("Cannot print object: "+c.stack);}}function Kw(g,c){c=void 0===c?{}:c;var h=g.value,d=g.isPromise,k=g.promisedValue,n=g.promiseStatus;return g.isError||h instanceof Error?(c=String(h),(k=h.stack||"")&&h.message!==h.stack&&(k=String(k),0===k.indexOf(c)&&(k=k.slice(c.length)),c+="\n"+k),c):d?(g=Zg.string.print(n),c="pending"===n?void 0:Kw({value:k},c),"Promise({status: "+
g+", "+(void 0===h?"":"value: "+c)+"})"):h instanceof Promise?'Promise({status: "unknown"})':c.inspect?Zg.printInspectEvalValue(h,c.inspectDepth||2):String(h)}function Lw(g,c){var h="";return Promise.resolve().then(function(){var d=c.lastIndexOf(".");0<=d?(h=c.slice(d+1),c=c.slice(0,d)):(h=c,c='(typeof window === "undefined" ? global : window)');return g(c)}).then(function(d){return{evalResult:d,startLetters:h,code:c}})}function Dq(g,c,h){g=Ch.getObjectForCompletion(g,c).then(function(d){var k=d.evalResult;
d={completions:Ch.descriptorsOfObjAndProtoProperties(k&&k.isEvalResult?k.value:k),startLetters:d.startLetters,code:d.code};k&&k.isPromise&&("fulfilled"===k.promiseStatus?d.promiseResolvedCompletions=Ch.descriptorsOfObjAndProtoProperties(k.promisedValue):"rejected"===k.promiseStatus&&(d.promiseRejectedCompletions=Ch.descriptorsOfObjAndProtoProperties(k.promisedValue)));return d});"function"===typeof h&&g.then(function(d){return h(null,d)}).catch(function(d){return h(d)});return g}function hp(g,c,h){c||
(c={type:"Identifier",name:"__rec"});h=Object.assign({ignoreUndeclaredExcept:null,includeRefs:null,excludeRefs:h&&h.exclude||[],includeDecls:null,excludeDecls:h&&h.exclude||[],recordDefRanges:!1,es6ExportFuncId:null,es6ImportFuncId:null,captureObj:c,moduleExportFunc:{name:h&&h.es6ExportFuncId||"_moduleExport",type:"Identifier"},moduleImportFunc:{name:h&&h.es6ImportFuncId||"_moduleImport",type:"Identifier"},declarationWrapper:void 0,classTransform:function(k){return k}},h);c=g;if(h.ignoreUndeclaredExcept){var d=
Lb.topLevelDeclsAndRefs(g);h.excludeRefs=Lb.arr.withoutAll(d.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeRefs);h.excludeDecls=Lb.arr.withoutAll(d.undeclaredNames,h.ignoreUndeclaredExcept).concat(h.excludeDecls)}h.excludeRefs=h.excludeRefs.concat(h.captureObj.name);h.excludeDecls=h.excludeDecls.concat(h.captureObj.name);h.recordDefRanges&&Lb.computeDefRanges(c,h);h.excludeRefs=h.excludeRefs.concat(Lb.additionalIgnoredRefs(g,h));h.excludeDecls=h.excludeDecls.concat(Lb.additionalIgnoredDecls(g,
h));c=Lb.fixDefaultAsyncFunctionExportForRegeneratorBug(c,h);h.es6ExportFuncId&&(h.excludeRefs.push(h.es6ExportFuncId),h.excludeRefs.push(h.es6ImportFuncId),c=Lb.es6ModuleTransforms(c,h));c=Lb.replaceRefs(c,h);c=Lb.replaceVarDecls(c,h);c=Lb.clearEmptyExports(c,h);c=Lb.replaceClassDecls(c,h);c=Lb.splitExportDeclarations(c,h);c=Lb.insertCapturesForExportDeclarations(c,h);c=Lb.insertCapturesForImportDeclarations(c,h);c=Lb.insertDeclarationsForExports(c,h);c=Lb.putFunctionDeclsInFront(c,h);return c=Lb.transformImportMeta(c,
h)}function Tr(g,c,h){h=Object.assign({captureObj:c||{type:"Identifier",name:"__rec"},exclude:[],declarationWrapper:void 0},h);c=Lb.Path("body.0.expression").get(g);if("System"!==c.callee.object.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+Lb.stringify(g).slice(0,300)+"...");if("register"!==c.callee.property.name)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call: "+Lb.stringify(g).slice(0,
300)+"...");c=Lb.Path("arguments.1.body.body").get(c);var d=Lb.arr.last(c);if("ReturnStatement"!==d.type)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at return statement: "+Lb.stringify(g).slice(0,300)+"...");var k=d.argument.properties.find(function(n){return"setters"===n.key.name});if(!k)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding setters: "+Lb.stringify(g).slice(0,300)+
"...");d=d.argument.properties.find(function(n){return"execute"===n.key.name});if(!d)throw Error("rewriteToRegisterModuleToCaptureSetters: input doesn't seem to be a System.register call, at finding execute: "+Lb.stringify(g).slice(0,300)+"...");k.value.elements.forEach(function(n){n.params[0]=Lb.assign(n.params[0],Lb.nodes.objectLiteral({}));n.body.body=n.body.body.map(function(b){if("ExpressionStatement"!==b.type||"AssignmentExpression"!==b.expression.type||"Identifier"!==b.expression.left.type||
Lb.arr.include(h.exclude,b.expression.left.name))return b;var e=b.expression.left;b=h.declarationWrapper?Lb.declarationWrapperCall(h.declarationWrapper,null,Lb.literal(e.name),Lb.literal("var"),b.expression,h.captureObj,h):b.expression;return Lb.exprStmt(Lb.assign(Lb.member(h.captureObj,e),b))})});(k=d.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.captureObj.name}))||(k=d.value.body.body.find(function(n){return"VariableDeclaration"===
n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.captureObj.name}));k&&(Lb.arr.remove(d.value.body.body,k),Lb.arr.pushAt(c,k,c.length-1));h.sourceAccessorName&&((k=d.value.body.body.find(function(n){return"ExpressionStatement"===n.type&&"AssignmentExpression"==n.expression.type&&n.expression.left.name===h.sourceAccessorName}))||(k=d.value.body.body.find(function(n){return"VariableDeclaration"===n.type&&n.declarations[0].id&&n.declarations[0].id.name===h.sourceAccessorName})),k&&(Lb.arr.remove(d.value.body.body,
k),Lb.arr.pushAt(c,k,c.length-1)));return g}function Mw(g,c){var h=Lb.stringify(c.captureObj),d=0;g.body=g.body.reduce(function(k,n){var b=[n],e="",l=!1;if("ExportNamedDeclaration"===n.type){if(n.source){var a=n.specifiers.map(function(f){return[f.local.name,f.exported.name]});e="import { "+a.map(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;return f===m?m:f+" as "+m}).join(",")+" } from "+n.source.raw+";\n";l="export { "+a.map(function(f){f=$jscomp.makeIterator(f);f.next();
return f.next().value}).join(",")+" };\n"}else n.declaration?(a=n.declaration.declarations||[],a=a.map(function(f){return[f.id.name,f.id.name]})):a=n.specifiers.map(function(f){return[f.exported.name,f.local.name]});l&&(b=[],e+=l);b=b.concat(Lb.parse(e+a.map(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;return h+"."+f+" = "+m+";\n"+(h+"."+m+" = "+m+";\n")}).join("\n")))}"ExportAllDeclaration"===n.type&&(d++,b=b.concat(Lb.parse("\n       import * as __captured"+d+"__ from "+
n.source.raw+";\n       Object.assign("+h+", __captured"+d+"__);\n      ")));return k.concat(b)},[]);return g}function KA(g){(this||Ay).__wrapped__=g;(this||Ay).__actions__=[];(this||Ay).__dir__=1;(this||Ay).__filtered__=!1;(this||Ay).__iteratees__=[];(this||Ay).__takeCount__=4294967295;(this||Ay).__views__=[]}function Fn(g,c){(this||WC).__wrapped__=g;(this||WC).__actions__=[];(this||WC).__chain__=!!c;(this||WC).__index__=0;(this||WC).__values__=void 0}function LA(g){if(s7(g)&&!t7(g)&&!(g instanceof
u7)){if(g instanceof JT)return g;if(v7.call(g,"__wrapped__"))return w7(g)}return new JT(g)}function XC(g,c,h,d,k,n,b,e,l,a){function f(){for(var z=arguments.length,B=Array(z),C=z;C--;)B[C]=arguments[C];if(u)var G=x7(f),F=y7(B,G);d&&(B=z7(B,d,k,u));n&&(B=A7(B,n,b,u));z-=F;if(u&&z<a)return C=B7(B,G),C7(g,c,XC,f.placeholder,h,B,C,e,l,a-z);C=q?h:this||mG;G=r?C[g]:g;z=B.length;e?B=D7(B,e):v&&1<z&&B.reverse();m&&l<z&&(B.length=l);(this||mG)&&(this||mG)!==E7&&(this||mG)instanceof f&&(G=y||KT(G));return G.apply(C,
B)}var m=c&128,q=c&1,r=c&2,u=c&24,v=c&512,y=r?void 0:KT(g);return f}function zt(g){return g&&g.__esModule?g:{default:g}}function Jm(g){if(Array.isArray(g)){for(var c=0,h=Array(g.length);c<g.length;c++)h[c]=g[c];return h}return Array.from(g)}function Gn(g,c){c=void 0===c?"__lvVarRecorder":c;Ii.ensureJSXPlugin();"function"===typeof g&&(g=String(g));if(lively.FreezerRuntime)return g.split(c+".").join("");g="string"===typeof g?Ii.parseFunction(g):g;g=Ii.ReplaceVisitor.run(g,function(h){return"MemberExpression"===
h.type&&"Identifier"===h.object.type&&h.object.name===c?h.property:h});return Ii.stringify(g)}function ip(g){if("undefined"===typeof babel)return console.warn("[lively.freezer] Skipped async/await transpilation because babel not loaded."),g;Ii.ensureJSXPlugin();Ii.ensureOptionalCatchBinding();Ii.ensureImportMeta();g=babel.transform(g,{sourceMap:void 0,inputSourceMap:void 0,babelrc:!1,presets:[["es2015",{modules:!1}]],plugins:["transform-exponentiation-operator","transform-async-to-generator","syntax-object-rest-spread",
"transform-object-rest-spread"],code:!0,ast:!1}).code;g=g.replace(/\}\)\.call\(undefined\);$/,"}).call(this)");g.startsWith("(function")&&g.endsWith(");")&&(g=g.slice(1,-2));return g}function nk(g,c){g=Lf.transform.transformSingleExpression(g);g=Lf.parse(g,{withComments:!0});c=Lf.processInlineCodeTransformOptions(g,c);var h=Lf.query.topLevelDeclsAndRefs(g),d=h.classDecls,k=h.funcDecls;h=h.varDecls;var n={};c.hasOwnProperty("evalId")&&(n.evalId=c.evalId);c.sourceAccessorName&&(n.sourceAccessorName=
c.sourceAccessorName);[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(k)).forEach(function(l){return l["x-lively-object-meta"]=Object.assign({},n,{start:l.start,end:l.end})});h.forEach(function(l){return l.declarations.forEach(function(a){return a["x-lively-object-meta"]=Object.assign({},n,{start:a.start,end:a.end})})});g=Lf.transform.objectSpreadTransform(g);!c.topLevelVarRecorder&&c.topLevelVarRecorderName&&(d=Lf.getGlobal(),c.topLevelVarRecorder="GLOBAL"===c.topLevelVarRecorderName?
Lf.getGlobal():Lf.Path(c.topLevelVarRecorderName).get(d));if(c.topLevelVarRecorder){d=(c.dontTransform||[]).concat(["arguments"]);k=c.recordGlobals?null:Lf.arr.withoutAll(Object.keys(c.topLevelVarRecorder),d);h=Lf.id(c.varRecorderName||"__lvVarRecorder");var b=void 0;if(c.declarationWrapperName||"function"===typeof c.declarationCallback){var e=c.declarationWrapperName||Lf.defaultDeclarationWrapperName;c.declarationWrapper=Lf.member(Lf.id(c.varRecorderName||"__lvVarRecorder"),Lf.literal(e),!0);c.declarationCallback&&
(c.topLevelVarRecorder[e]=c.declarationCallback)}if(c.hasOwnProperty("transformES6Classes")?c.transformES6Classes:1)b={currentModuleAccessor:c.currentModuleAccessor,classHolder:h,functionNode:Lf.member(h,Lf.defaultClassToFunctionConverterName),declarationWrapper:c.declarationWrapper,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,transform:c.classTransform};g=Lf.capturing.rewriteToCaptureTopLevelVariables(g,h,{es6ImportFuncId:c.es6ImportFuncId,es6ExportFuncId:c.es6ExportFuncId,ignoreUndeclaredExcept:k,
exclude:d,declarationWrapper:c.declarationWrapper||void 0,classToFunction:b,evalId:c.evalId,sourceAccessorName:c.sourceAccessorName,keepTopLevelVarDecls:c.keepTopLevelVarDecls})}c.wrapInStartEndCall&&(g=Lf.transform.wrapInStartEndCall(g,{startFuncNode:c.startFuncNode,endFuncNode:c.endFuncNode}));g=Lf.stringify(g);c.jsx&&(g=Lf.es5Transpilation(g));c.sourceURL&&(g+="\n//# sourceURL="+c.sourceURL.replace(/\s/g,"_"));return g}function uo(g,c){c=void 0===c?{}:c;if(!c.topLevelVarRecorder)return g;if("function"===
typeof c.declarationCallback||c.declarationWrapperName){var h=c.declarationWrapperName||Lf.defaultDeclarationWrapperName;c.declarationWrapper=Lf.member(Lf.id(c.varRecorderName),Lf.literal(h),!0);c.declarationCallback&&(c.topLevelVarRecorder[h]=c.declarationCallback)}g=Lf.parse(g);h=(c.dontTransform||[]).concat(["arguments"]);c.recordGlobals||Lf.arr.withoutAll(Object.keys(c.topLevelVarRecorder),h);c=Lf.capturing.rewriteToRegisterModuleToCaptureSetters(g,Lf.id(c.varRecorderName||"__lvVarRecorder"),
Object.assign({exclude:h},c));return Lf.stringify(c)}function Nw(g,c,h){"function"===typeof c&&2===arguments.length&&(h=c,c=null);var d=new bg.EvalResult,k=!1,n=!1;c=bg._normalizeEvalOptions(c);var b=bg.promise.deferred(),e=c.topLevelVarRecorder||bg.getGlobal(),l=g;c.wrapInStartEndCall&&(e[bg.startEvalFunctionName]&&console.warn(d.addWarning("startEvalFunctionName "+bg.startEvalFunctionName+" already exists in recorder!")),e[bg.endEvalFunctionName]&&console.warn(d.addWarning("endEvalFunctionName "+
bg.endEvalFunctionName+" already exists in recorder!")),e[bg.startEvalFunctionName]=function(){if(k)console.warn(d.addWarning("onEvalStartCalled multiple times!"));else if(k=!0,"function"===typeof c.onStartEval)c.onStartEval()},e[bg.endEvalFunctionName]=function(m,q){n?console.warn(d.addWarning("onEvalEndCalled multiple times!")):(n=!0,bg.finishEval(m,q,d,c,e,b,h))});try{g=bg.evalCodeTransform(g,c),c.header&&(g=c.header+g),c.footer&&(g+=c.footer),c.transpiler&&(g=c.transpiler(g,c.transpilerOptions))}catch(m){console.warn(d.addWarning("lively.vm evalCodeTransform not working: "+
m))}try{"undefined"!==typeof $world&&$world.get("log")&&($world.get("log").textString=g);var a=bg._eval.call(c.context,g,c.topLevelVarRecorder,c.originalSource||l)}catch(m){var f=m}if(c.wrapInStartEndCall){if(f&&!n)e[bg.endEvalFunctionName](f,void 0)}else bg.finishEval(f,f||a,d,c,e,b,h);return c.sync?d:b.promise}function Rk(g,c){c=Object.assign(c||{},{sync:!0});return bg.runEval(g,c)}function Hn(g,c,h){If.getEnv(h).emitter.on(g,c);return c}function In(g,c,h){If.getEnv(h).emitter.once(g,c);return c}
function Jn(g,c,h,d){c=void 0===c?{}:c;h=void 0===h?Date.now():h;c=Object.assign({type:g,time:h},c);h=If.getEnv(d);d=h.emitter;h=h.notifications;d.emit(g,c);d.isLogging&&If.log(c);d.isRecording&&If.record(h,c);return c}function vo(g,c,h){If.getEnv(h).emitter.removeListener(g,c);return c}function sv(g,c){If.getEnv(c).emitter.removeAllListeners(g)}function Ur(g){If.getEnv(g).emitter.isRecording=!0}function Vr(g){If.getEnv(g).emitter.isRecording=!1}function tv(g){g=If.getEnv(g).notifications;g.splice(0,
g.length)}function Ow(g){return If.getEnv(g).notifications}function At(g){If.getEnv(g).emitter.isLogging=!0}function Pw(g){If.getEnv(g).emitter.isLogging=!1}function wo(g,c,h){h=Object.assign({targetModule:null,parentModule:null,es6Transpile:!0,transpiler:null,transpilerOptions:null,format:"esm"},h);g.debug&&console.log("[lively.module] runEval: "+c.slice(0,100).replace(/\n/mg," ")+"...");var d=h,k=d.format,n=d.targetModule;n=g.decanonicalize(n||"*scratch*",d.parentModule);h.targetModule=n;k&&((d=
g.getConfig().meta[n])||(d={}),d[n]||(d[n]={}),d[n].format||(d[n].format=k,g.config(d)));k=g.get("@lively-env").moduleEnv(n);d=k.recorder;var b=k.recorderName,e=k.dontTransform,l=nh.getEs6Transpiler(g,h,k),a="var _moduleExport = "+b+"._moduleExport,\n    _moduleImport = "+(b+"._moduleImport;\n");h=Object.assign({waitForPromise:!0,sync:!1,evalId:h.evalId||k.nextEvalId(),sourceAccessorName:(h.hasOwnProperty("embedOriginalCode")?h.embedOriginalCode:1)?"__lvOriginalCode":void 0,originalSource:c},h,{header:a,
recordGlobals:!0,dontTransform:e,varRecorderName:b,topLevelVarRecorder:d,sourceURL:h.sourceURL||h.targetModule,context:h.context||d,wrapInStartEndCall:!0,es6ExportFuncId:"_moduleExport",es6ImportFuncId:"_moduleImport",transpiler:l,declarationWrapperName:k.varDefinitionCallbackName,currentModuleAccessor:nh.funcCall(nh.member(nh.funcCall(nh.member(nh.member("__lvVarRecorder","System"),"get"),nh.literal("@lively-env")),"moduleEnv"),nh.literal(h.targetModule))});if(!h.sync&&!h.importsEnsured&&nh.hasUnimportedImports(g,
c,n))return nh.ensureImportsAreImported(g,c,n).catch(function(f){return null}).then(function(f){return wo(g,f,Object.assign({},h,{importsEnsured:!0}))});if(!k.record()){if(!h.sync&&!h._moduleImported)return g.import(n).catch(function(f){return null}).then(function(){return wo(g,c,Object.assign({},h,{_moduleImported:!0}))});k.ensureRecord()}if(h.es6Transpile&&h.transpiler instanceof Promise)if(h.sync||h._transpilerLoaded)console.warn("[lively.vm] sync eval requested but transpiler is not yet loaded, will continue without transpilation!"),
h.transpiler=null;else return h.transpiler.catch(function(f){return console.error(f)}).then(function(f){return wo(g,c,Object.assign({},h,{transpiler:f,_transpilerLoaded:!0}))});g.debug&&console.log("[lively.module] runEval in module "+n+" started");nh.emit("lively.vm/doitrequest",{code:c,waitForPromise:h.waitForPromise,targetModule:h.targetModule},Date.now(),g);g.get("@lively-env").evaluationStart(n);n=nh.vmRunEval(c,h);return h.sync?nh.evalEnd(g,c,h,n):Promise.resolve(n).then(function(f){return nh.evalEnd(g,
c,h,f)})}function Wr(g,c){var h=c=Object.assign({format:"esm",System:null,targetModule:null},c),d=h.format,k=h.System;h=h.targetModule;k||"undefined"===typeof System||(k=System);return!k&&h?Promise.reject(Error("options to runEval have targetModule but cannot find system loader!")):h&&["esm","es6","register"].includes(d)?Oj.esmEval.runEval(k,g,c):Oj.globalEval.runEval(g,c)}function Bt(g,c){return Oj.globalEval.syncEval(g,c)}function uv(g){return ve.withSuperclasses(g).slice(1)}function MA(g){var c=
[];do c.push(g),g=g[ve.superclassSymbol];while(g&&g.name);return c.map(function(h){return h.name}).join("->")}function De(g){for(var c=[];g;)c.push(g),g=g[ve.superclassSymbol];return c}function YC(g,c){do if(g===c)return!0;while(g=g[ve.superclassSymbol]);return!1}function ZC(g,c){if(g.constructor===c&&g.__proto__===c.prototype)return g;g.constructor=c;g.__proto__=c.prototype;return g}function $C(g){return g&&"function"===typeof g}function Qw(g){var c=ve.RuntimeSourceDescriptor.for(g),h=c.ast;c=c.type;
if("ClassDeclaration"!==c)throw Error("Expected class but got "+c);return ve.Path("body.body").get(h).map(function(d){var k=d.static,n=d.kind;d=d.key;var b=d.value;d=d.name||b;b=ve.isOverridden(g,d);var e=k?g:g.prototype;e="get"===n?e.__lookupGetter__(d):"set"===n?e.__lookupSetter__(d):e[d];return{static:k,name:d,value:e,kind:n,owner:g,overridden:b}})}function By(g){return ve.runtimeNonStaticMembers(g).concat(ve.runtimeNonStaticMembers(g))}function Cy(g){var c=ve.obj.getOwnPropertyDescriptors(g);
return ve.arr.withoutAll(Object.keys(c),["prototype","name","length","toString"]).map(function(h){var d=c[h],k="function"===typeof d.value?"method":"get"in d?"get":"set"in d?"set":"unknown";return{static:!0,name:h,value:"method"===k?d.value:"get"===k?d.get:"set"===k?d.set:null,kind:k,owner:g}})}function Dy(g){return ve.arr.uniq(ve.arr.flatmap(ve.arr.without(ve.withSuperclasses(g),Object),function(c){return ve.runtimeStaticClassMembers(c)}))}function ck(g){var c=Ph.propertiesAndSettingsInHierarchyOf(g),
h=c.properties;c=c.propertySettings;g[Ph.propertiesAndSettingsCacheSym]={properties:h,order:Ph.obj.sortKeysWithBeforeAndAfterConstraints(h),propertySettings:c,classHierarchy:Ph.getClassHierarchy(g)};h&&"object"===typeof h?Ph.prepareClassForProperties(g,c,h):console.warn("Class "+g.name+" indicates it has managed properties but its properties accessor ("+(Ph.defaultPropertiesKey+") does not return a valid property descriptor map"))}function Vj(g,c){c!==g.constructor&&(g.constructor=c,hf.setPrototypeOf(g,
c.prototype))}function dk(g,c){c=c?"function"===typeof c?c:c.value?c.value:Object:Object;var h=g&&g[hf.superclassSymbol];h&&h===c||(hf.ensureInitializeStub(c),g[hf.superclassSymbol]=c,hf.setPrototypeOf(g.prototype,c.prototype),c!==Object&&hf.setPrototypeOf(g,c));return c}function zb(g,c,h,d,k,n,b){h=void 0===h?[]:h;d=void 0===d?[]:d;k=void 0===k?{}:k;var e=g.name,l=e&&k.hasOwnProperty(e)&&k[e];k=l&&l[hf.superclassSymbol];l&&"function"===typeof l&&k||(l=g);hf.setSuperclass(l,c);hf.installMethods(l,
h,d);l[hf.objMetaSymbol]=b;n&&(g=n.package(),b=l[hf.moduleMetaSymbol],k=Date.now(),l[hf.moduleMetaSymbol]={package:g?{name:g.name,version:g.version}:{},pathInPackage:g?n.pathInPackage():n.id,lastChange:b&&b.lastChange&&k<=b.lastChange?b.lastChange+1:k,lastSuperclassChange:0},c&&c.referencedAs&&(l.hasOwnProperty(hf.moduleSubscribeToToplevelChangesSym)&&n.unsubscribeFromToplevelDefinitionChanges(l[hf.moduleSubscribeToToplevelChangesSym]),l[hf.moduleSubscribeToToplevelChangesSym]=n.subscribeToToplevelDefinitionChanges(function(a,
f){if(a===c.referencedAs){a=f&&f[hf.moduleMetaSymbol];var m=l[hf.moduleMetaSymbol];if(a){if(a.lastChange===m.lastSuperclassChange)return;m.lastSuperclassChange=a.lastChange}hf.setSuperclass(l,f);hf.installMethods(l,h,d);hf.prepareClassForManagedPropertiesAfterCreation(l)}})));l.toString=function(){var a=String(this.prototype[hf.initializeSymbol]).match(hf.constructorArgMatcher),f=this[hf.superclassSymbol];return"class "+this.name+" "+(f?"extends "+f.name:"")+" {\n  constructor"+((a?a[0]:"()")+" { /*...*/ }\n}")};
hf.prepareClassForManagedPropertiesAfterCreation(l);return l}function Ey(g){g=new Sc.Color(g);return{red:g.red()/255,green:g.green()/255,blue:g.blue()/255,alpha:g.alpha()}}function Oe(g,c,h,d,k){"function"!==typeof h||"undefined"!==typeof d&&"object"!==typeof d||(k=d,d="call",k||(k={}),k.updater||(k.updater=function(l,a){return l(null,a)}));var n=g.getConnectionPoints&&g.getConnectionPoints()||g.connections,b=(n=n&&n[c])&&n.map&&lively.morphic&&lively.morphic.GeometryConnection||n&&n.connectionClassType&&
lively.Class.forName(n.connectionClassType)||ig.AttributeConnection;"function"===typeof k&&(console.warn("Directly passing a converter function to connect() is deprecated! Use spec object instead!"),k={converter:k});n&&(k=ig.obj.merge(n,k));b=new b(g,c,h,d,k);var e=b.getExistingConnection();if(e)return e.resetSpec(),e.init(g,c,h,d,k),e;k=b.connect();if("function"===typeof g.onConnect)g.onConnect(c,h,d);n&&n.updateOnConnect&&b.update(g[c]);return k}function xo(g,c,h,d){"function"!==typeof h||"undefined"!==
typeof d&&"object"!==typeof d||(d="call");if(g.attributeConnections){for(var k=$jscomp.makeIterator(g.attributeConnections.slice()),n=k.next();!n.done;n=k.next())n=n.value,n.getSourceAttrName()==c&&n.getTargetObj()===h&&n.getTargetMethodName()==d&&n.disconnect();if("function"==typeof g.onDisconnect)g.onDisconnect(c,h,d)}}function jp(g){for(var c;g.attributeConnections&&(c=g.attributeConnections[0]);)c.disconnect()}function kp(g,c,h,d,k){"function"!==typeof h||"undefined"!==typeof d&&"object"!==typeof d?
k=k||{}:(k=d,d="call",k=k||{},k.updater||(k.updater=function(n,b){return n(null,b)}));k=k||{};k.removeAfterUpdate=!0;return ig.connect(g,c,h,d,k)}function oj(g,c,h){var d=g.attributeConnections;if(d){g=g[c];for(var k=0,n=d.length;k<n;k++){var b=d[k];b.getSourceAttrName()==c&&b.update(h,g)}}}function Kn(g,c,h,d){if(null!=g[c])h[d](g[c]);else ig.connect(g,c,h,d,{removeAfterUpdate:!0})}function hn(g,c,h,d){for(var k={key:c.pop(),whenDefined:function(n){ig.callWhenNotNull(n,this.key,h,d)}};0<c.length;)k=
{key:c.pop(),next:k,whenDefined:function(n){ig.callWhenNotNull(n,this.key,this.next,"whenDefined")}};k.whenDefined(g)}function Ct(g,c){var h=!1;c||"function"!==typeof g||(c=g,h=!0);if(h){g=ig.AttributeConnection.prototype;g.isActive||(g.isActive=0);g.isActive++;try{var d=c()}finally{g.isActive--,0>=g.isActive&&delete g.isActive}}else{h=g.sourceObj;var k=g.sourceAttribute,n=g.targetObj,b=g.targetAttribute;g=n&&b?function(e){return e.getSourceAttrName()===k&&n===e.getTargetObj()&&b===e.getTargetMethodName()}:
function(e){return e.getSourceAttrName()===k};(g=h.attributeConnections&&h.attributeConnections.filter(g))&&ig.arr.invoke(g,"activate");try{d=c()}finally{g&&ig.arr.invoke(g,"deactivate")}}return d}function NA(g){if(null==g)return!0;g=typeof g;return"boolean"===g||"number"===g||"string"===g?!0:!1}function yo(g){return g.constructor[ni.classNameProp]||g.constructor.name}function Dt(g){if(g&&g.constructor){var c=ni.getClassName(g);if(c){if(g=g.constructor[ni.moduleMetaInClassProp],"Object"!==c||g)return g&&
(delete g.lastChange,delete g.lastSuperclassChange),{className:c,module:g}}else console.warn("Cannot serialize class info of anonymous class of instance "+g)}}function Eq(g){var c=g.module;if(c){var h=c.pathInPackage;if(c.package&&c.package.name&&"no group"!==c.package.name){var d=System.decanonicalize(c.package.name.replace(/\/*$/,"/"));h=ni.string.joinPath(d,h)}d=System.get("@lively-env");if(c=d.moduleEnv(h)||d.moduleEnv(c.pathInPackage))return c.recorder[g.className];console.warn("Trying to deserialize instance of class "+
g.className+" but the module "+h+" is not yet loaded")}return System.global[g.className]}function lp(g,c,h){c=void 0===c?function(a){return a}:c;h=void 0===h?{}:h;var d=new Hh.ExpressionSerializer,k=h,n=h.isMorph?h.propertiesAndPropertySettings().order:[];n=n.length?n:Hh.obj.keys(g);for(var b=$jscomp.makeIterator(n),e=b.next();!e.done;e=b.next()){e=e.value;var l=g[e];if("_env"===e||"env"===e||"__connections__"===e||"__refs__"===e)return;Hh.obj.isString(l)&&d.isSerializedExpression(l)&&(l=d.deserializeExpr(l));
["borderColor","borderWidth","borderStyle","borderRadius"].includes(e)&&(l=lp(l,c));l&&l._id&&(l=c(lp(l,c)));k[e]=l}g.submorphs&&(k.submorphs=g.submorphs.map(function(a){return lp(a,c)}));if(h)for(d=$jscomp.makeIterator(n.filter(function(a){return!!g[a]})),e=d.next();!e.done;e=d.next())n=e.value,h[n]=k[n];if(g.__refs__)for(h=$jscomp.makeIterator(g.__refs__),d=h.next();!d.done;d=h.next())n=$jscomp.makeIterator(d.value),d=n.next().value,n=n.next().value,Hh.Path(d).set(k,Hh.Path(n).get(k));if(g.__connections__)for(h=
$jscomp.makeIterator(g.__connections__),d=h.next();!d.done;d=h.next())d=d.value,Hh.connect(Hh.Path(d.pathToSource).get(k),d.sourceAttrName,Hh.Path(d.pathToTarget).get(k),d.targetMethodName,Object.assign({},Hh.obj.select(d,["garbageCollect","converterString","updaterString","varMapping"])));return k}function Ln(g,c){var h=c=void 0===c?{}:c,d=void 0===h.keepFunctions?!0:h.keepFunctions,k=void 0===h.skipAttributes?[]:h.skipAttributes,n=void 0===h.keepConnections?!0:h.keepConnections,b=void 0===h.asExpression?
!1:h.asExpression;c=void 0===h.root?!0:h.root;var e=void 0===h.path?"":h.path,l=void 0===h.skipUnchangedFromDefault?!1:h.skipUnchangedFromDefault,a=void 0===h.nestedExpressions?{}:h.nestedExpressions,f=void 0===h.objToPath?new WeakMap:h.objToPath,m=void 0===h.objRefs?[]:h.objRefs;h=void 0===h.connections?[]:h.connections;var q={skipAttributes:k,skipUnchangedFromDefault:l,root:!1,keepFunctions:d,asExpression:b,nestedExpressions:a,connections:h,objRefs:m,objToPath:f,keepConnections:n};if(f.has(g))return m.push([e,
f.get(g)]),null;f.set(g,e);b&&(d=!1);var r=new Hh.ExpressionSerializer,u=function(qa,D){try{if(D=D.__serialize__(),b){var P=Hh.string.newUUID();a[P]=D;D=P}else D=D.__expr__?r.exprStringEncode(D):D}catch(J){console.log("[export to JSON] failed converting "+qa+" to serialized expression")}return D},v={};f.set(g,e);n&&g.attributeConnections&&h.push.apply(h,$jscomp.arrayFromIterable(g.attributeConnections));g.isText&&(v.textAndAttributes=g.textAndAttributes.map(function(qa,D){return qa&&qa.isMorph?Ln(qa,
Object.assign({},q,{path:e?e+".textAndAttributes."+D:"textAndAttributes."+D})):qa}));g.submorphs&&0<g.submorphs.length&&(v.submorphs=g.submorphs.map(function(qa,D){return Ln(qa,Object.assign({},q,{path:e?e+".submorphs."+D:"submorphs."+D}))}).filter(Boolean));var y={};for(L in g.spec(l)){y.$jscomp$loop$prop$name$2633=L;l=g[y.$jscomp$loop$prop$name$2633];!l||"object"!==typeof l||Array.isArray(l)||l.isMorph||f.set(l,e?e+"."+y.$jscomp$loop$prop$name$2633:y.$jscomp$loop$prop$name$2633);if("submorphs"!==
y.$jscomp$loop$prop$name$2633&&!k.includes(y.$jscomp$loop$prop$name$2633))if("metadata"===y.$jscomp$loop$prop$name$2633&&Hh.Path("commit.__serialize__").get(l))v[y.$jscomp$loop$prop$name$2633]=Object.assign({},l,{commit:u(y.$jscomp$loop$prop$name$2633+".commit",l.commit)});else if(["borderColor","borderWidth","borderStyle","borderRadius"].includes(y.$jscomp$loop$prop$name$2633)){for(var z={},B=$jscomp.makeIterator(["top","left","right","bottom"]),C=B.next();!C.done;C=B.next()){C=C.value;var G=l[C];
if(G&&G.__serialize__&&(G=G.__serialize__())&&G.__expr__)if(b){var F=Hh.string.newUUID();a[F]=G;G=F}else G=r.exprStringEncode(G);z[C]=G}v[y.$jscomp$loop$prop$name$2633]=z}else if(l&&l.isMorph)v[y.$jscomp$loop$prop$name$2633]=Ln(l,Object.assign({},q,{path:e?e+"."+y.$jscomp$loop$prop$name$2633:y.$jscomp$loop$prop$name$2633}));else if(l&&l.__serialize__)v[y.$jscomp$loop$prop$name$2633]=u(y.$jscomp$loop$prop$name$2633,l);else if(Array.isArray(l))v[y.$jscomp$loop$prop$name$2633]=l.map(function(qa){return function(D,
P){return D&&D.isMorph?Ln(D,Object.assign({},q,{path:e?e+"."+qa.$jscomp$loop$prop$name$2633+"."+P:qa.$jscomp$loop$prop$name$2633+"."+P})):D&&D.__serialize__?u(qa.$jscomp$loop$prop$name$2633+"."+P,D):D}}(y));else{if(l&&!Hh.obj.isString(l)&&!Hh.obj.isNumber(l)&&0<Hh.properties.allOwnPropertiesOrFunctions(l).length)for(var N in l)l[N]&&l[N].isMorph&&(l[N]=Ln(l[N],Object.assign({},q,{path:e?e+"."+y.$jscomp$loop$prop$name$2633+"."+N:y.$jscomp$loop$prop$name$2633+"."+N})));v[y.$jscomp$loop$prop$name$2633]=
l}y={$jscomp$loop$prop$name$2633:y.$jscomp$loop$prop$name$2633}}g.isText&&delete v.textString;b||(v._id=g._id);d?(v.type=g.constructor,Object.keys(g).forEach(function(qa){return"function"===typeof g[qa]&&(v[qa]=g[qa])})):(v.styleSheets&&(v.styleSheets=[]),v.type=Hh.getSerializableClassMeta(g));if(n&&c){var L=[];N=$jscomp.makeIterator(h);for(d=N.next();!d.done;d=N.next())B=d=d.value,k=B.sourceAttrName,n=B.targetMethodName,z=B.targetObj,h=B.updaterString,y=B.converterString,l=B.garbageCollect,B=f.get(B.sourceObj),
z=f.get(z),"string"===typeof B&&"string"===typeof z?L.push({pathToSource:B,pathToTarget:z,garbageCollect:l,updaterString:h,converterString:y,sourceAttrName:k,targetMethodName:n,varMapping:{properties:Hh.properties}}):console.log("skipping:",d);b||(v.__connections__=L)}if(b&&c){c="morph("+Hh.obj.inspect(v)+")";var S={"lively.morphic":["morph"]},ha;for(ha in a)c=c.replace('"'+ha+'"',a[ha].__expr__),Object.entries(a[ha].bindings||{}).forEach(function(qa){var D=$jscomp.makeIterator(qa);qa=D.next().value;
D=D.next().value;S[qa]=S[qa]?Hh.arr.uniq([].concat($jscomp.arrayFromIterable(S[qa]),$jscomp.arrayFromIterable(D))):D});return{__expr__:c,bindings:S}}c&&(v.__refs__=m);return v}function aD(g){var c={},h;for(h in g)c[h]=Me.referencesOfId(g,h);return c}function Fy(g){return g&&g.__ref__}function bD(g,c){var h={};return Me.referencesOfId((h[g.id]=g.currentSnapshot,h),g.id,c)}function Kg(g,c,h){g=g[c];c=[];for(var d in g.props){var k=g.props[d]||{},n=k.value;k=k.verbatim;Array.isArray(n)?c.push.apply(c,
$jscomp.arrayFromIterable(Me.referencesInArray(n,h&&d))):!k&&n&&Me.isReference(n)&&c.push(h?{key:d,id:n.id}:n.id)}if(g.hasOwnProperty("entries"))for(d=0;d<g.entries.length;d++)n=g.entries[d],Array.isArray(n)?c.push.apply(c,$jscomp.arrayFromIterable(Me.referencesInArray(n,h&&n))):n&&Me.isReference(n)&&c.push(h?{key:n,id:n.id}:n.id);return c}function cD(g,c){for(var h=[],d=0;d<g.length;d++){var k=g[d];Array.isArray(k)?h.push.apply(h,$jscomp.arrayFromIterable(cD(k,c?c+"["+d+"]":void 0))):k&&Me.isReference(k)&&
h.push(c?{key:c+"["+d+"]",id:k.id}:k.id)}return h}function Gy(g,c){return(g[c][Me.ClassHelper.classMetaForSerializationProp]||{}).module||{}}function Xr(g,c){return Me.referencesOfId(g,c).map(function(h){return h+":"+Me.classNameOfId(g,h)})}function Hy(g,c){return(g[c][Me.ClassHelper.classMetaForSerializationProp]||{}).className||"Object"}function vv(g,c,h,d){function k(u,v,y){if(!f)if(50<y)alert(""+l);else if(u===v)l.push(u),f=l.slice();else if(!a[u]){a[u]=!0;l.push(u);u=Me.referencesOfId(g,u);for(var z=
0;z<u.length;z++)k(u[z],v,y+1);l.pop()}}d=void 0===d?{}:d;var n=void 0===d.showPath?!0:d.showPath,b=d.hasOwnProperty("showClassNames")?d.showClassNames:!n,e=d.hasOwnProperty("showPropNames")?d.showPropNames:n;d=d.hasOwnProperty("hideId")?d.hideId:n;var l=[],a={},f;k(c,h,0);if(!f)return null;if(!b&&!e)return f;c=[];for(h=0;h<f.length-1;h++){var m=f[h],q=f[h+1],r=[];d||r.push(m);b&&r.push((g[m][Me.ClassHelper.classMetaForSerializationProp]||{}).className||"Object");e&&(m=Me.referencesOfId(g,m,!0).find(function(u){return u.id===
q})||{key:"????"},r.push(m.key));c.push(r.join(":"))}n&&(c="."+c.join("."));return c}function mp(g,c,h){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Me.Path(h).parts();var d=g[c];for(c=0;;){if(1E3<c++)throw"stop";var k=h.shift();if(!k)break;if(!d.props||!d.props[k])throw Error("Property "+k+" not found for ref "+JSON.stringify(d));d=d.props[k].value;if(!d)throw Error("Property "+k+" has no value");for(;Array.isArray(d);)d=d[h.shift()];if(!d||!d.__ref__)return d;d=g[d.id]}return d}function Iy(g,
c,h,d){h=h.replace(/^\./,"");h=h.replace(/\[([^\]])+\]/g,".$1");h=Me.Path(h).parts();g=g[c];c=h.shift();if(!g.props||!g.props[c])throw Error("Property "+c+" not found for ref "+JSON.stringify(g));var k=(g.props[c]||{}).value;if(!k)throw Error("Property "+c+" has no value");if(h.length){var n=Me.Path(h).get(k);Me.Path(h).set(k,d(g,c,n))}else g.props[c].value=d(g,c,k)}function Yr(g,c){var h=Me.arr.withoutAll(Object.keys(c),g),d=h.filter(function(n){if("AttributeConnection"===Me.classNameOfId(c,n))return c[n].props.garbageCollect.value}),
k=Me.referenceGraph(Me.obj.dissoc(Object.assign({},c),d));g.forEach(function(n){n=Me.graph.subgraphReachableBy(k,n);for(var b=h.length;b--;)h[b]in n&&h.splice(b,1)});h.forEach(function(n){return delete c[n]});return h}function OA(g){var c={},h;for(h in g){c.$jscomp$loop$prop$id$922$2635=h;if("AttributeConnection"===Me.classNameOfId(g,c.$jscomp$loop$prop$id$922$2635)){var d=g[c.$jscomp$loop$prop$id$922$2635];if(!g[Me.Path("props.targetObj.value.id").get(d)]){if(d=g[Me.Path("props.sourceObj.value.id").get(d)])d.props.attributeConnections.value=
d.props.attributeConnections.value.filter(function(k){return function(n){return n.id!=k.$jscomp$loop$prop$id$922$2635}}(c));delete g[c.$jscomp$loop$prop$id$922$2635]}}c={$jscomp$loop$prop$id$922$2635:c.$jscomp$loop$prop$id$922$2635}}}function np(g,c){c=void 0===c?Me.defaultExprSerializer:c;g.snapshot&&(g=g.snapshot);for(var h=[],d=0,k=Object.keys(g);d<k.length;d++){var n=g[k[d]];if(n.__expr__)(n=c.requiredModulesOf__expr__(n.__expr__))&&h.push.apply(h,$jscomp.arrayFromIterable(n));else{var b=Me.ClassHelper.sourceModulesInObjRef(n);
b&&b.length&&h.push.apply(h,$jscomp.arrayFromIterable(b.map(function(a){return(a.package&&a.package.name||"")+"/"+a.pathInPackage})));if(n.props)for(var e in n.props){b=n.props[e].value;if("string"===typeof b){var l=c.requiredModulesOf__expr__(b);l&&h.push.apply(h,$jscomp.arrayFromIterable(l))}Me.obj.isArray(b)&&b.forEach(function(a){"string"===typeof a&&(a=c.requiredModulesOf__expr__(a))&&h.push.apply(h,$jscomp.arrayFromIterable(a))})}}}return h=Me.arr.uniq(h)}function PA(){throw Error("setTimeout has not been defined");
}function dD(){throw Error("clearTimeout has not been defined");}function nG(g){if(Rw===setTimeout)return setTimeout(g,0);if((Rw===PA||!Rw)&&setTimeout)return Rw=setTimeout,setTimeout(g,0);try{return Rw(g,0)}catch(c){try{return Rw.call(null,g,0)}catch(h){return Rw.call(this||QA,g,0)}}}function oG(){RA&&Jy&&(RA=!1,Jy.length?wv=Jy.concat(wv):pG=-1,wv.length&&qG())}function qG(){if(!RA){var g=nG(oG);RA=!0;for(var c=wv.length;c;){Jy=wv;for(wv=[];++pG<c;)Jy&&Jy[pG].run();pG=-1;c=wv.length}Jy=null;RA=!1;
(function(h){if(Sw===clearTimeout)return clearTimeout(h);if((Sw===dD||!Sw)&&clearTimeout)return Sw=clearTimeout,clearTimeout(h);try{Sw(h)}catch(d){try{return Sw.call(null,h)}catch(k){return Sw.call(this||QA,h)}}})(g)}}function Yh(g,c){(this||QA).fun=g;(this||QA).array=c}function ok(){}function Xl(){if(LT)return MT;LT=!0;return MT={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}}function xv(){if(NT)return OT;NT=!0;
var g=Qh;return OT="object"===typeof g&&g.env&&g.env.NODE_DEBUG&&/\bsemver\b/i.test(g.env.NODE_DEBUG)?function(c){for(var h=[],d=0;d<arguments.length;++d)h[d-0]=arguments[d];return console.error.apply(console,["SEMVER"].concat($jscomp.arrayFromIterable(h)))}:function(){}}function xb(){if(PT)return Et;PT=!0;var g=Xl().MAX_SAFE_COMPONENT_LENGTH,c=xv();Et=Et={};var h=Et.re=[],d=Et.src=[],k=Et.t={},n=0,b=function(e,l,a){var f=n++;c(f,l);k[e]=f;d[f]=l;h[f]=new RegExp(l,a?"g":void 0)};b("NUMERICIDENTIFIER",
"0|[1-9]\\d*");b("NUMERICIDENTIFIERLOOSE","[0-9]+");b("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");b("MAINVERSION","("+d[k.NUMERICIDENTIFIER]+")\\.("+(d[k.NUMERICIDENTIFIER]+")\\.(")+(d[k.NUMERICIDENTIFIER]+")"));b("MAINVERSIONLOOSE","("+d[k.NUMERICIDENTIFIERLOOSE]+")\\.("+(d[k.NUMERICIDENTIFIERLOOSE]+")\\.(")+(d[k.NUMERICIDENTIFIERLOOSE]+")"));b("PRERELEASEIDENTIFIER","(?:"+d[k.NUMERICIDENTIFIER]+"|"+d[k.NONNUMERICIDENTIFIER]+")");b("PRERELEASEIDENTIFIERLOOSE","(?:"+d[k.NUMERICIDENTIFIERLOOSE]+
"|"+d[k.NONNUMERICIDENTIFIER]+")");b("PRERELEASE","(?:-("+d[k.PRERELEASEIDENTIFIER]+"(?:\\."+d[k.PRERELEASEIDENTIFIER]+")*))");b("PRERELEASELOOSE","(?:-?("+d[k.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+d[k.PRERELEASEIDENTIFIERLOOSE]+")*))");b("BUILDIDENTIFIER","[0-9A-Za-z-]+");b("BUILD","(?:\\+("+d[k.BUILDIDENTIFIER]+"(?:\\."+d[k.BUILDIDENTIFIER]+")*))");b("FULLPLAIN","v?"+d[k.MAINVERSION]+d[k.PRERELEASE]+"?"+d[k.BUILD]+"?");b("FULL","^"+d[k.FULLPLAIN]+"$");b("LOOSEPLAIN","[v=\\s]*"+d[k.MAINVERSIONLOOSE]+
d[k.PRERELEASELOOSE]+"?"+d[k.BUILD]+"?");b("LOOSE","^"+d[k.LOOSEPLAIN]+"$");b("GTLT","((?:<|>)?=?)");b("XRANGEIDENTIFIERLOOSE",d[k.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*");b("XRANGEIDENTIFIER",d[k.NUMERICIDENTIFIER]+"|x|X|\\*");b("XRANGEPLAIN","[v=\\s]*("+d[k.XRANGEIDENTIFIER]+")(?:\\.("+(d[k.XRANGEIDENTIFIER]+")(?:\\.(")+(d[k.XRANGEIDENTIFIER]+")(?:")+(d[k.PRERELEASE]+")?"+d[k.BUILD]+"?)?)?"));b("XRANGEPLAINLOOSE","[v=\\s]*("+d[k.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+(d[k.XRANGEIDENTIFIERLOOSE]+")(?:\\.(")+
(d[k.XRANGEIDENTIFIERLOOSE]+")(?:")+(d[k.PRERELEASELOOSE]+")?"+d[k.BUILD]+"?)?)?"));b("XRANGE","^"+d[k.GTLT]+"\\s*"+d[k.XRANGEPLAIN]+"$");b("XRANGELOOSE","^"+d[k.GTLT]+"\\s*"+d[k.XRANGEPLAINLOOSE]+"$");b("COERCE","(^|[^\\d])(\\d{1,"+g+"})(?:\\.(\\d{1,"+(g+"}))?(?:\\.(\\d{1,")+(g+"}))?(?:$|[^\\d])"));b("COERCERTL",d[k.COERCE],!0);b("LONETILDE","(?:~>?)");b("TILDETRIM","(\\s*)"+d[k.LONETILDE]+"\\s+",!0);Et.tildeTrimReplace="$1~";b("TILDE","^"+d[k.LONETILDE]+d[k.XRANGEPLAIN]+"$");b("TILDELOOSE","^"+
d[k.LONETILDE]+d[k.XRANGEPLAINLOOSE]+"$");b("LONECARET","(?:\\^)");b("CARETTRIM","(\\s*)"+d[k.LONECARET]+"\\s+",!0);Et.caretTrimReplace="$1^";b("CARET","^"+d[k.LONECARET]+d[k.XRANGEPLAIN]+"$");b("CARETLOOSE","^"+d[k.LONECARET]+d[k.XRANGEPLAINLOOSE]+"$");b("COMPARATORLOOSE","^"+d[k.GTLT]+"\\s*("+d[k.LOOSEPLAIN]+")$|^$");b("COMPARATOR","^"+d[k.GTLT]+"\\s*("+d[k.FULLPLAIN]+")$|^$");b("COMPARATORTRIM","(\\s*)"+d[k.GTLT]+"\\s*("+d[k.LOOSEPLAIN]+"|"+d[k.XRANGEPLAIN]+")",!0);Et.comparatorTrimReplace="$1$2$3";
b("HYPHENRANGE","^\\s*("+d[k.XRANGEPLAIN]+")\\s+-\\s+("+(d[k.XRANGEPLAIN]+")\\s*$"));b("HYPHENRANGELOOSE","^\\s*("+d[k.XRANGEPLAINLOOSE]+")\\s+-\\s+("+(d[k.XRANGEPLAINLOOSE]+")\\s*$"));b("STAR","(<|>)?=?\\s*\\*");b("GTE0","^\\s*>=\\s*0.0.0\\s*$");b("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");return Et}function Yl(){if(QT)return RT;QT=!0;var g=["includePrerelease","loose","rtl"];return RT=function(c){return c?"object"!==typeof c?{loose:!0}:g.filter(function(h){return c[h]}).reduce(function(h,d){h[d]=!0;return h},
{}):{}}}function Ft(){if(ST)return TT;ST=!0;var g=/^[0-9]+$/,c=function(h,d){var k=g.test(h),n=g.test(d);k&&n&&(h=+h,d=+d);return h===d?0:k&&!n?-1:n&&!k?1:h<d?-1:1};return TT={compareIdentifiers:c,rcompareIdentifiers:function(h,d){return c(d,h)}}}function tl(){if(UT)return VT;UT=!0;var g=xv(),c=Xl(),h=c.MAX_LENGTH,d=c.MAX_SAFE_INTEGER;c=xb();var k=c.re,n=c.t,b=Yl(),e=Ft().compareIdentifiers,l=function(a,f){f=b(f);if(a instanceof l){if(a.loose===!!f.loose&&a.includePrerelease===!!f.includePrerelease)return a;
a=a.version}else if("string"!==typeof a)throw new TypeError("Invalid Version: "+a);if(a.length>h)throw new TypeError("version is longer than "+h+" characters");g("SemVer",a,f);this.options=f;this.loose=!!f.loose;this.includePrerelease=!!f.includePrerelease;f=a.trim().match(f.loose?k[n.LOOSE]:k[n.FULL]);if(!f)throw new TypeError("Invalid Version: "+a);this.raw=a;this.major=+f[1];this.minor=+f[2];this.patch=+f[3];if(this.major>d||0>this.major)throw new TypeError("Invalid major version");if(this.minor>
d||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>d||0>this.patch)throw new TypeError("Invalid patch version");this.prerelease=f[4]?f[4].split(".").map(function(m){if(/^[0-9]+$/.test(m)){var q=+m;if(0<=q&&q<d)return q}return m}):[];this.build=f[5]?f[5].split("."):[];this.format()};l.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;this.prerelease.length&&(this.version+="-"+this.prerelease.join("."));return this.version};l.prototype.toString=
function(){return this.version};l.prototype.compare=function(a){g("SemVer.compare",this.version,this.options,a);if(!(a instanceof l)){if("string"===typeof a&&a===this.version)return 0;a=new l(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)};l.prototype.compareMain=function(a){a instanceof l||(a=new l(a,this.options));return e(this.major,a.major)||e(this.minor,a.minor)||e(this.patch,a.patch)};l.prototype.comparePre=function(a){a instanceof l||(a=new l(a,this.options));
if(this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;var f=0;do{var m=this.prerelease[f],q=a.prerelease[f];g("prerelease compare",f,m,q);if(void 0===m&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===m)return-1;if(m!==q)return e(m,q)}while(++f)};l.prototype.compareBuild=function(a){a instanceof l||(a=new l(a,this.options));var f=0;do{var m=this.build[f],q=a.build[f];g("prerelease compare",
f,m,q);if(void 0===m&&void 0===q)return 0;if(void 0===q)return 1;if(void 0===m)return-1;if(m!==q)return e(m,q)}while(++f)};l.prototype.inc=function(a,f){switch(a){case "premajor":this.minor=this.patch=this.prerelease.length=0;this.major++;this.inc("pre",f);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",f);break;case "prepatch":this.prerelease.length=0;this.inc("patch",f);this.inc("pre",f);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",f);
this.inc("pre",f);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(a=this.prerelease.length;0<=--a;)"number"===typeof this.prerelease[a]&&(this.prerelease[a]++,
a=-2);-1===a&&this.prerelease.push(0)}f&&(this.prerelease[0]===f?isNaN(this.prerelease[1])&&(this.prerelease=[f,0]):this.prerelease=[f,0]);break;default:throw Error("invalid increment argument: "+a);}this.format();this.raw=this.version;return this};return VT=l}function ul(){if(WT)return XT;WT=!0;var g=Xl().MAX_LENGTH,c=xb(),h=c.re,d=c.t,k=tl(),n=Yl();return XT=function(b,e){e=n(e);if(b instanceof k)return b;if("string"!==typeof b||b.length>g||!(e.loose?h[d.LOOSE]:h[d.FULL]).test(b))return null;try{return new k(b,
e)}catch(l){return null}}}function rG(){if(YT)return ZT;YT=!0;var g=ul();return ZT=function(c,h){return(c=g(c,h))?c.version:null}}function SA(){if($T)return aU;$T=!0;var g=tl();return aU=function(c,h,d,k){"string"===typeof d&&(k=d,d=void 0);try{return(new g(c,d)).inc(h,k).version}catch(n){return null}}}function op(){if(bU)return cU;bU=!0;var g=tl();return cU=function(c,h,d){return(new g(c,d)).compare(new g(h,d))}}function TA(){if(dU)return eU;dU=!0;var g=op();return eU=function(c,h,d){return 0===
g(c,h,d)}}function Tw(){if(fU)return gU;fU=!0;var g=ul(),c=TA();return gU=function(h,d){if(c(h,d))return null;h=g(h);d=g(d);var k=h.prerelease.length||d.prerelease.length,n=k?"pre":"",b;for(b in h)if(("major"===b||"minor"===b||"patch"===b)&&h[b]!==d[b])return n+b;return k?"prerelease":""}}function Ky(){if(hU)return iU;hU=!0;var g=tl();return iU=function(c,h){return(new g(c,h)).major}}function UA(){if(jU)return kU;jU=!0;var g=tl();return kU=function(c,h){return(new g(c,h)).minor}}function sG(){if(lU)return mU;
lU=!0;var g=ul();return mU=function(c,h){return(c=g(c,h))&&c.prerelease.length?c.prerelease:null}}function Jj(){if(nU)return oU;nU=!0;var g=op();return oU=function(c,h,d){return g(h,c,d)}}function Fq(){if(pU)return qU;pU=!0;var g=tl();return qU=function(c,h,d){c=new g(c,d);h=new g(h,d);return c.compare(h)||c.compareBuild(h)}}function Km(){if(rU)return sU;rU=!0;var g=Fq();return sU=function(c,h){return c.sort(function(d,k){return g(k,d,h)})}}function VA(){if(tU)return uU;tU=!0;var g=op();return uU=
function(c,h,d){return 0<g(c,h,d)}}function Qg(){if(vU)return wU;vU=!0;var g=op();return wU=function(c,h,d){return 0>g(c,h,d)}}function Ly(){if(xU)return yU;xU=!0;var g=op();return yU=function(c,h,d){return 0<=g(c,h,d)}}function tG(){if(zU)return AU;zU=!0;var g=op();return AU=function(c,h,d){return 0!==g(c,h,d)}}function eD(){if(BU)return CU;BU=!0;var g=op();return CU=function(c,h,d){return 0>=g(c,h,d)}}function Uw(){if(DU)return EU;DU=!0;var g=TA(),c=tG(),h=VA(),d=Ly(),k=Qg(),n=eD();return EU=function(b,
e,l,a){switch(e){case "===":return"object"===typeof b&&(b=b.version),"object"===typeof l&&(l=l.version),b===l;case "!==":return"object"===typeof b&&(b=b.version),"object"===typeof l&&(l=l.version),b!==l;case "":case "=":case "==":return g(b,l,a);case "!=":return c(b,l,a);case ">":return h(b,l,a);case ">=":return d(b,l,a);case "<":return k(b,l,a);case "<=":return n(b,l,a);default:throw new TypeError("Invalid operator: "+e);}}}function fD(){if(FU)return GU;FU=!0;var g=tl(),c=ul(),h=xb(),d=h.re,k=h.t;
return GU=function(n,b){if(n instanceof g)return n;"number"===typeof n&&(n=String(n));if("string"!==typeof n)return null;b=b||{};var e=null;if(b.rtl){for(var l;(l=d[k.COERCERTL].exec(n))&&(!e||e.index+e[0].length!==n.length);)e&&l.index+l[0].length===e.index+e[0].length||(e=l),d[k.COERCERTL].lastIndex=l.index+l[1].length+l[2].length;d[k.COERCERTL].lastIndex=-1}else e=n.match(d[k.COERCE]);return null===e?null:c(e[2]+"."+(e[3]||"0")+"."+(e[4]||"0"),b)}}function dh(g){var c=this;c instanceof dh||(c=
new dh);c.tail=null;c.head=null;c.length=0;if(g&&"function"===typeof g.forEach)g.forEach(function(k){c.push(k)});else if(0<arguments.length)for(var h=0,d=arguments.length;h<d;h++)c.push(arguments[h]);return c}function Lg(g,c,h,d){if(!(this instanceof Lg))return new Lg(g,c,h,d);this.list=d;this.value=g;c?(c.next=this,this.prev=c):this.prev=null;h?(h.prev=this,this.next=h):this.next=null}function pp(){if(HU)return yM;HU=!0;var g=function(F,N){var L=this;N=h(N);if(F instanceof g)return F.loose===!!N.loose&&
F.includePrerelease===!!N.includePrerelease?F:new g(F.raw,N);if(F instanceof d)return this.raw=F.value,this.set=[[F]],this.format(),this;this.options=N;this.loose=!!N.loose;this.includePrerelease=!!N.includePrerelease;this.raw=F;this.set=F.split(/\s*\|\|\s*/).map(function(S){return L.parseRange(S.trim())}).filter(function(S){return S.length});if(!this.set.length)throw new TypeError("Invalid SemVer Range: "+F);if(1<this.set.length)if(F=this.set[0],this.set=this.set.filter(function(S){return"<0.0.0-0"!==
S[0].value}),0===this.set.length)this.set=[F];else if(1<this.set.length)for(F=$jscomp.makeIterator(this.set),N=F.next();!N.done;N=F.next())if(N=N.value,1===N.length&&""===N[0].value){this.set=[N];break}this.format()};g.prototype.format=function(){return this.range=this.set.map(function(F){return F.join(" ").trim()}).join("||").trim()};g.prototype.toString=function(){return this.range};g.prototype.parseRange=function(F){var N=this;F=F.trim();var L="parseRange:"+Object.keys(this.options).join(",")+
":"+F,S=c.get(L);if(S)return S;S=this.options.loose;F=F.replace(S?e[l.HYPHENRANGELOOSE]:e[l.HYPHENRANGE],G(this.options.includePrerelease));k("hyphen replace",F);F=F.replace(e[l.COMPARATORTRIM],a);k("comparator trim",F,e[l.COMPARATORTRIM]);F=F.replace(e[l.TILDETRIM],f);F=F.replace(e[l.CARETTRIM],m);F=F.split(/\s+/).join(" ");var ha=S?e[l.COMPARATORLOOSE]:e[l.COMPARATOR];S=F.split(" ").map(function(D){var P=D;D=N.options;k("comp",P,D);P=y(P,D);k("caret",P);P=u(P,D);k("tildes",P);P=B(P,D);k("xrange",
P);k("replaceStars",P,D);P=P.trim().replace(e[l.STAR],"");k("stars",P);return P}).join(" ").split(/\s+/).map(function(D){var P=N.options;k("replaceGTE0",D,P);return D.trim().replace(e[P.includePrerelease?l.GTE0PRE:l.GTE0],"")}).filter(this.options.loose?function(D){return!!D.match(ha)}:function(){return!0}).map(function(D){return new d(D,N.options)});F=new Map;S=$jscomp.makeIterator(S);for(var qa=S.next();!qa.done;qa=S.next()){qa=qa.value;if("<0.0.0-0"===qa.value)return[qa];F.set(qa.value,qa)}1<F.size&&
F.has("")&&F.delete("");F=[].concat($jscomp.arrayFromIterable(F.values()));c.set(L,F);return F};g.prototype.intersects=function(F,N){if(!(F instanceof g))throw new TypeError("a Range is required");return this.set.some(function(L){return q(L,N)&&F.set.some(function(S){return q(S,N)&&L.every(function(ha){return S.every(function(qa){return ha.intersects(qa,N)})})})})};g.prototype.test=function(F){if(!F)return!1;if("string"===typeof F)try{F=new n(F,this.options)}catch(D){return!1}for(var N=0;N<this.set.length;N++){a:{var L=
this.set[N];for(var S=F,ha=this.options,qa=0;qa<L.length;qa++)if(!L[qa].test(S)){L=!1;break a}if(S.prerelease.length&&!ha.includePrerelease){for(ha=0;ha<L.length;ha++)if(k(L[ha].semver),L[ha].semver!==d.ANY&&0<L[ha].semver.prerelease.length&&(qa=L[ha].semver,qa.major===S.major&&qa.minor===S.minor&&qa.patch===S.patch)){L=!0;break a}L=!1}else L=!0}if(L)return!0}return!1};yM=g;var c=new F7({max:1E3}),h=Yl(),d=yv(),k=xv(),n=tl(),b=xb(),e=b.re,l=b.t,a=b.comparatorTrimReplace,f=b.tildeTrimReplace,m=b.caretTrimReplace,
q=function(F,N){var L=!0;F=F.slice();for(var S=F.pop();L&&F.length;)L=F.every(function(ha){return S.intersects(ha,N)}),S=F.pop();return L},r=function(F){return!F||"x"===F.toLowerCase()||"*"===F},u=function(F,N){return F.trim().split(/\s+/).map(function(L){return v(L,N)}).join(" ")},v=function(F,N){return F.replace(N.loose?e[l.TILDELOOSE]:e[l.TILDE],function(L,S,ha,qa,D){k("tilde",F,L,S,ha,qa,D);r(S)?L="":r(ha)?L=">="+S+".0.0 <"+(+S+1)+".0.0-0":r(qa)?L=">="+S+"."+ha+".0 <"+S+"."+(+ha+1)+".0-0":D?(k("replaceTilde pr",
D),L=">="+S+"."+ha+"."+qa+"-"+D+" <"+S+"."+(+ha+1)+".0-0"):L=">="+S+"."+ha+"."+qa+" <"+S+"."+(+ha+1)+".0-0";k("tilde return",L);return L})},y=function(F,N){return F.trim().split(/\s+/).map(function(L){return z(L,N)}).join(" ")},z=function(F,N){k("caret",F,N);var L=N.includePrerelease?"-0":"";return F.replace(N.loose?e[l.CARETLOOSE]:e[l.CARET],function(S,ha,qa,D,P){k("caret",F,S,ha,qa,D,P);r(ha)?S="":r(qa)?S=">="+ha+".0.0"+L+" <"+(+ha+1)+".0.0-0":r(D)?S="0"===ha?">="+ha+"."+qa+".0"+L+" <"+ha+"."+(+qa+
1)+".0-0":">="+ha+"."+qa+".0"+L+" <"+(+ha+1)+".0.0-0":P?(k("replaceCaret pr",P),S="0"===ha?"0"===qa?">="+ha+"."+qa+"."+D+"-"+P+" <"+ha+"."+qa+"."+(+D+1)+"-0":">="+ha+"."+qa+"."+D+"-"+P+" <"+ha+"."+(+qa+1)+".0-0":">="+ha+"."+qa+"."+D+"-"+P+" <"+(+ha+1)+".0.0-0"):(k("no pr"),S="0"===ha?"0"===qa?">="+ha+"."+qa+"."+D+L+" <"+ha+"."+qa+"."+(+D+1)+"-0":">="+ha+"."+qa+"."+D+L+" <"+ha+"."+(+qa+1)+".0-0":">="+ha+"."+qa+"."+D+" <"+(+ha+1)+".0.0-0");k("caret return",S);return S})},B=function(F,N){k("replaceXRanges",
F,N);return F.split(/\s+/).map(function(L){return C(L,N)}).join(" ")},C=function(F,N){F=F.trim();return F.replace(N.loose?e[l.XRANGELOOSE]:e[l.XRANGE],function(L,S,ha,qa,D,P){k("xRange",F,L,S,ha,qa,D,P);var J=r(ha),M=J||r(qa);D=M||r(D);"="===S&&D&&(S="");P=N.includePrerelease?"-0":"";J?L=">"===S||"<"===S?"<0.0.0-0":"*":S&&D?(M&&(qa=0),D=0,">"===S?(S=">=",M?(ha=+ha+1,qa=0):qa=+qa+1,D=0):"<="===S&&(S="<",M?ha=+ha+1:qa=+qa+1),"<"===S&&(P="-0"),L=S+ha+"."+qa+"."+D+P):M?L=">="+ha+".0.0"+P+" <"+(+ha+1)+
".0.0-0":D&&(L=">="+ha+"."+qa+".0"+P+" <"+ha+"."+(+qa+1)+".0-0");k("xRange return",L);return L})},G=function(F){return function(N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra){L=r(S)?"":r(ha)?">="+S+".0.0"+(F?"-0":""):r(qa)?">="+S+"."+ha+".0"+(F?"-0":""):D?">="+L:">="+L+(F?"-0":"");J=r(M)?"":r(X)?"<"+(+M+1)+".0.0-0":r(T)?"<"+M+"."+(+X+1)+".0-0":fa?"<="+M+"."+X+"."+T+"-"+fa:F?"<"+M+"."+X+"."+(+T+1)+"-0":"<="+J;return(L+" "+J).trim()}};return yM}function yv(){if(IU)return zM;IU=!0;var g=Symbol("SemVer ANY"),c=function(f,
m){m=h(m);if(f instanceof c){if(f.loose===!!m.loose)return f;f=f.value}e("comparator",f,m);this.options=m;this.loose=!!m.loose;this.parse(f);this.value=this.semver===g?"":this.operator+this.semver.version;e("comp",this)};c.prototype.parse=function(f){var m=f.match(this.options.loose?k[n.COMPARATORLOOSE]:k[n.COMPARATOR]);if(!m)throw new TypeError("Invalid comparator: "+f);this.operator=void 0!==m[1]?m[1]:"";"="===this.operator&&(this.operator="");this.semver=m[2]?new l(m[2],this.options.loose):g};
c.prototype.toString=function(){return this.value};c.prototype.test=function(f){e("Comparator.test",f,this.options.loose);if(this.semver===g||f===g)return!0;if("string"===typeof f)try{f=new l(f,this.options)}catch(m){return!1}return b(f,this.operator,this.semver,this.options)};c.prototype.intersects=function(f,m){if(!(f instanceof c))throw new TypeError("a Comparator is required");m&&"object"===typeof m||(m={loose:!!m,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new a(f.value,
m)).test(this.value);if(""===f.operator)return""===f.value?!0:(new a(this.value,m)).test(f.semver);var q=(">="===this.operator||">"===this.operator)&&(">="===f.operator||">"===f.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===f.operator||"<"===f.operator),u=this.semver.version===f.semver.version,v=(">="===this.operator||"<="===this.operator)&&(">="===f.operator||"<="===f.operator),y=b(this.semver,"<",f.semver,m)&&(">="===this.operator||">"===this.operator)&&("<="===f.operator||"<"===
f.operator);f=b(this.semver,">",f.semver,m)&&("<="===this.operator||"<"===this.operator)&&(">="===f.operator||">"===f.operator);return q||r||u&&v||y||f};$jscomp.global.Object.defineProperties(c,{ANY:{configurable:!0,enumerable:!0,get:function(){return g}}});zM=c;var h=Yl(),d=xb(),k=d.re,n=d.t,b=Uw(),e=xv(),l=tl(),a=pp();return zM}function qp(){if(JU)return KU;JU=!0;var g=pp();return KU=function(c,h,d){try{h=new g(h,d)}catch(k){return!1}return h.test(c)}}function AM(){if(LU)return MU;LU=!0;var g=tl(),
c=pp();return MU=function(h,d,k){var n=null,b=null,e=null;try{e=new c(d,k)}catch(l){return null}h.forEach(function(l){!e.test(l)||n&&-1!==b.compare(l)||(n=l,b=new g(n,k))});return n}}function My(){if(NU)return OU;NU=!0;var g=tl(),c=pp(),h=VA();return OU=function(d,k){d=new c(d,k);k=new g("0.0.0");if(d.test(k))return k;k=new g("0.0.0-0");if(d.test(k))return k;k=null;for(var n={},b=0;b<d.set.length;n={$jscomp$loop$prop$setMin$2637:n.$jscomp$loop$prop$setMin$2637},++b){var e=d.set[b];n.$jscomp$loop$prop$setMin$2637=
null;e.forEach(function(l){return function(a){var f=new g(a.semver.version);switch(a.operator){case ">":0===f.prerelease.length?f.patch++:f.prerelease.push(0),f.raw=f.format();case "":case ">=":if(!l.$jscomp$loop$prop$setMin$2637||h(f,l.$jscomp$loop$prop$setMin$2637))l.$jscomp$loop$prop$setMin$2637=f;break;case "<":case "<=":break;default:throw Error("Unexpected operation: "+a.operator);}}}(n));!n.$jscomp$loop$prop$setMin$2637||k&&!h(k,n.$jscomp$loop$prop$setMin$2637)||(k=n.$jscomp$loop$prop$setMin$2637)}return k&&
d.test(k)?k:null}}function Ny(){if(PU)return QU;PU=!0;var g=pp();return QU=function(c,h){try{return(new g(c,h)).range||"*"}catch(d){return null}}}function zo(){if(RU)return SU;RU=!0;var g=pp();return SU=function(c,h,d){c=new g(c,d);h=new g(h,d);return c.intersects(h)}}function Wj(){if(TU)return UU;TU=!0;var g=ul();return UU=function(c,h){return(c=g(c.trim().replace(/^[=v]+/,""),h))?c.version:null}}function WA(){if(VU)return WU;VU=!0;var g=tl();return WU=function(c,h){return(new g(c,h)).patch}}function BM(){if(XU)return YU;
XU=!0;var g=op();return YU=function(c,h){return g(c,h,!0)}}function CM(){if(ZU)return $U;ZU=!0;var g=Fq();return $U=function(c,h){return c.sort(function(d,k){return g(d,k,h)})}}function uG(){if(aV)return bV;aV=!0;var g=pp();return bV=function(c,h){return(new g(c,h)).set.map(function(d){return d.map(function(k){return k.value}).join(" ").trim().split(" ")})}}function Tf(){if(cV)return dV;cV=!0;var g=tl(),c=pp();return dV=function(h,d,k){var n=null,b=null,e=null;try{e=new c(d,k)}catch(l){return null}h.forEach(function(l){!e.test(l)||
n&&1!==b.compare(l)||(n=l,b=new g(n,k))});return n}}function rp(){if(eV)return fV;eV=!0;var g=tl(),c=yv(),h=c.ANY,d=pp(),k=qp(),n=VA(),b=Qg(),e=eD(),l=Ly();return fV=function(a,f,m,q){a=new g(a,q);f=new d(f,q);switch(m){case ">":var r=n;m=e;var u=b;var v=">";var y=">=";break;case "<":r=b;m=l;u=n;v="<";y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"');}if(k(a,f,q))return!1;for(var z={},B=0;B<f.set.length;z={$jscomp$loop$prop$high$2639:z.$jscomp$loop$prop$high$2639,$jscomp$loop$prop$low$2640:z.$jscomp$loop$prop$low$2640},
++B){var C=f.set[B];z.$jscomp$loop$prop$high$2639=null;z.$jscomp$loop$prop$low$2640=null;C.forEach(function(G){return function(F){F.semver===h&&(F=new c(">=0.0.0"));G.$jscomp$loop$prop$high$2639=G.$jscomp$loop$prop$high$2639||F;G.$jscomp$loop$prop$low$2640=G.$jscomp$loop$prop$low$2640||F;r(F.semver,G.$jscomp$loop$prop$high$2639.semver,q)?G.$jscomp$loop$prop$high$2639=F:u(F.semver,G.$jscomp$loop$prop$low$2640.semver,q)&&(G.$jscomp$loop$prop$low$2640=F)}}(z));if(z.$jscomp$loop$prop$high$2639.operator===
v||z.$jscomp$loop$prop$high$2639.operator===y||(!z.$jscomp$loop$prop$low$2640.operator||z.$jscomp$loop$prop$low$2640.operator===v)&&m(a,z.$jscomp$loop$prop$low$2640.semver)||z.$jscomp$loop$prop$low$2640.operator===y&&u(a,z.$jscomp$loop$prop$low$2640.semver))return!1}return!0}}function XA(){if(gV)return hV;gV=!0;var g=rp();return hV=function(c,h,d){return g(c,h,">",d)}}function Lh(){if(iV)return jV;iV=!0;var g=rp();return jV=function(c,h,d){return g(c,h,"<",d)}}function vG(){if(kV)return lV;kV=!0;
var g=qp(),c=op();return lV=function(h,d,k){var n=[],b=null,e=null;h=h.sort(function(f,m){return c(f,m,k)});for(var l=$jscomp.makeIterator(h),a=l.next();!a.done;a=l.next())a=a.value,g(a,d,k)?(e=a,b||(b=a)):(e&&n.push([b,e]),b=e=null);b&&n.push([b,null]);b=[];n=$jscomp.makeIterator(n);for(e=n.next();!e.done;e=n.next())l=$jscomp.makeIterator(e.value),e=l.next().value,l=l.next().value,e===l?b.push(e):l||e!==h[0]?l?e===h[0]?b.push("<="+l):b.push(e+" - "+l):b.push(">="+e):b.push("*");h=b.join(" || ");
return h.length<("string"===typeof d.raw?d.raw:String(d)).length?h:d}}function Gq(){if(mV)return nV;mV=!0;var g=pp(),c=yv(),h=c.ANY,d=qp(),k=op(),n=function(l,a,f){if(l===a)return!0;if(1===l.length&&l[0].semver===h){if(1===a.length&&a[0].semver===h)return!0;l=f.includePrerelease?[new c(">=0.0.0-0")]:[new c(">=0.0.0")]}if(1===a.length&&a[0].semver===h){if(f.includePrerelease)return!0;a=[new c(">=0.0.0")]}var m=new Set,q,r,u=$jscomp.makeIterator(l);for(l=u.next();!l.done;l=u.next())l=l.value,">"===
l.operator||">="===l.operator?q=b(q,l,f):"<"===l.operator||"<="===l.operator?r=e(r,l,f):m.add(l.semver);if(1<m.size)return null;if(q&&r){var v=k(q.semver,r.semver,f);if(0<v||0===v&&(">="!==q.operator||"<="!==r.operator))return null}for(l=$jscomp.makeIterator(m).next();!l.done;){v=l.value;if(q&&!d(v,String(q),f)||r&&!d(v,String(r),f))return null;q=$jscomp.makeIterator(a);for(l=q.next();!l.done;l=q.next())if(!d(v,String(l.value),f))return!1;return!0}m=r&&!f.includePrerelease&&r.semver.prerelease.length?
r.semver:!1;u=q&&!f.includePrerelease&&q.semver.prerelease.length?q.semver:!1;m&&1===m.prerelease.length&&"<"===r.operator&&0===m.prerelease[0]&&(m=!1);a=$jscomp.makeIterator(a);for(l=a.next();!l.done;l=a.next()){l=l.value;var y=y||">"===l.operator||">="===l.operator;var z=z||"<"===l.operator||"<="===l.operator;if(q)if(u&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===u.major&&l.semver.minor===u.minor&&l.semver.patch===u.patch&&(u=!1),">"===l.operator||">="===l.operator){var B=
b(q,l,f);if(B===l&&B!==q)return!1}else if(">="===q.operator&&!d(q.semver,String(l),f))return!1;if(r)if(m&&l.semver.prerelease&&l.semver.prerelease.length&&l.semver.major===m.major&&l.semver.minor===m.minor&&l.semver.patch===m.patch&&(m=!1),"<"===l.operator||"<="===l.operator){if(B=e(r,l,f),B===l&&B!==r)return!1}else if("<="===r.operator&&!d(r.semver,String(l),f))return!1;if(!l.operator&&(r||q)&&0!==v)return!1}return q&&z&&!r&&0!==v||r&&y&&!q&&0!==v||u||m?!1:!0},b=function(l,a,f){if(!l)return a;f=
k(l.semver,a.semver,f);return 0<f?l:0>f?a:">"===a.operator&&">="===l.operator?a:l},e=function(l,a,f){if(!l)return a;f=k(l.semver,a.semver,f);return 0>f?l:0<f?a:"<"===a.operator&&"<="===l.operator?a:l};return nV=function(l,a,f){f=void 0===f?{}:f;if(l===a)return!0;l=new g(l,f);a=new g(a,f);var m=!1;l=$jscomp.makeIterator(l.set);var q=l.next();a:for(;!q.done;q=l.next()){q=q.value;for(var r=$jscomp.makeIterator(a.set),u=r.next();!u.done;u=r.next())if(u=n(q,u.value,f),m=m||null!==u,u)continue a;if(m)return!1}return!0}}
function zv(g){g=Object.assign({plugins:We.allPlugins,reinitializeIds:!1,skipMigrations:!0},g);if(g.reinitializeIds&&"function"!==typeof g.reinitializeIds)throw Error("serializer option 'reinitializeIds' needs to be a function(id, ref) => id");return g}function Hq(g,c){c=We.normalizeOptions(c);var h=c.objPool||new We.ObjectPool(c);c=">="+We.serializerVersion.replace(We.majorAndMinorVersionRe,"");g=h.snapshotObject(g);We.removeUnreachableObjects([g.id],g.snapshot);We.clearDanglingConnections(g.snapshot);
g.requiredVersion=c;return g}function Oy(g,c){c=We.normalizeOptions(c);var h=g.requiredVersion;h&&!We.semver.satisfies(We.serializerVersion,h)&&console.warn("[lively.serializer deserialization] snapshot requires version "+(h+" but serializer has incompatible version ")+(We.serializerVersion+". Deserialization might fail...!"));return(c.objPool||new We.ObjectPool(c)).resolveFromSnapshotAndId(g)}function Py(g,c,h){function d(){var e=We.deserialize(g,h);We.runMigrations(n,"objectConverter",g,k);return e}
h=We.normalizeOptions(h);c.length&&(h.skipMigrations=!1);var k=h.objPool||(h.objPool=new We.ObjectPool(h));c=We.normalizeMigrations(c);var n=c.after,b;We.runMigrations(c.before,"snapshotConverter",g,k);"function"===typeof h.onDeserializationStart&&(b=h.onDeserializationStart(g,h));return b instanceof Promise?b.then(d):d()}function Qy(g,c){return We.deserialize(We.serialize(g,c),c)}function DM(g){return"[object Array]"===G7.call(g)}function Mn(g,c,h){(this||EM).type=Number(g);(this||EM).vNode=c;(this||
EM).patch=h}function wG(g,c){var h=g.vnode;h||(h=g.vnode=g.render(c));if(!(H7(h)||I7(h)||J7(h)))throw Error("thunk did not return a valid node");return h}function xG(g,c){var h;for(h in g){if(!(h in c)){var d=d||{};d[h]=void 0}var k=g[h],n=c[h];if(k!==n)if(oV(k)&&oV(n))if(Sk(n)!==Sk(k))d=d||{},d[h]=n;else if(K7(n))d=d||{},d[h]=n;else{if(k=xG(k,n))d=d||{},d[h]=k}else d=d||{},d[h]=n}for(var b in c)b in g||(d=d||{},d[b]=c[b]);return d}function Sk(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);
if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function yG(g,c){var h={a:g};Lm(g,c,h,0);return h}function Lm(g,c,h,d){if(g!==c){var k=h[d],n=!1;if(zG(g)||zG(c))gD(g,c,h,d);else if(null==c)AG(g)||(hD(g,h,d),Zr(g,h,d),k=h[d]),k=sp(k,new Xj(Xj.REMOVE,g,c));else if(Ry(c))if(Ry(g))if(g.tagName===c.tagName&&g.namespace===c.namespace&&g.key===c.key){var b=L7(g.properties,c.properties);b&&(k=sp(k,new Xj(Xj.PROPS,g,b)));b=d;var e=g.children;c=c.children;var l=BG(c),a=l.keys,
f=l.free;if(f.length===c.length)c={children:c,moves:null};else{l=BG(e);var m=l.keys;if(l.free.length===e.length)c={children:c,moves:null};else{l=[];for(var q=0,r=f.length,u=0,v=0;v<e.length;v++){var y=e[v];y.key?a.hasOwnProperty(y.key)?(y=a[y.key],l.push(c[y])):(u++,l.push(null)):q<r?(y=f[q++],l.push(c[y])):(u++,l.push(null))}f=q>=f.length?c.length:f[q];for(q=0;q<c.length;q++)r=c[q],r.key?m.hasOwnProperty(r.key)||l.push(r):q>=f&&l.push(r);m=l.slice();f=0;q=[];r=[];for(y=0;y<c.length;){var z=c[y];
for(v=m[f];null===v&&m.length;)q.push(Sy(m,f,null)),v=m[f];v&&v.key===z.key?(f++,y++):z.key?(v&&v.key?a[v.key]!==y+1?(q.push(Sy(m,f,v.key)),(v=m[f])&&v.key===z.key?f++:r.push({key:z.key,to:y})):r.push({key:z.key,to:y}):r.push({key:z.key,to:y}),y++):v&&v.key&&q.push(Sy(m,f,v.key))}for(;f<m.length;)v=m[f],q.push(Sy(m,f,v&&v.key));c=q.length!==u||r.length?{children:l,moves:{removes:q,inserts:r}}:{children:l,moves:null}}}a=c.children;l=e.length;u=a.length;l=l>u?l:u;for(u=0;u<l;u++)m=e[u],f=a[u],b+=1,
m?Lm(m,f,h,b):f&&(k=sp(k,new Xj(Xj.INSERT,null,f))),Ry(m)&&m.count&&(b+=m.count);c.moves&&(k=sp(k,new Xj(Xj.ORDER,g,c.moves)))}else k=sp(k,new Xj(Xj.VNODE,g,c)),n=!0;else k=sp(k,new Xj(Xj.VNODE,g,c)),n=!0;else pV(c)?pV(g)?g.text!==c.text&&(k=sp(k,new Xj(Xj.VTEXT,g,c))):(k=sp(k,new Xj(Xj.VTEXT,g,c)),n=!0):AG(c)&&(AG(g)||(n=!0),k=sp(k,new Xj(Xj.WIDGET,g,c)));k&&(h[d]=k);n&&(hD(g,h,d),Zr(g,h,d))}}function Zr(g,c,h){if(AG(g))"function"===typeof g.destroy&&(c[h]=sp(c[h],new Xj(Xj.REMOVE,g,null)));else if(Ry(g)&&
(g.hasWidgets||g.hasThunks)){g=g.children;for(var d=g.length,k=0;k<d;k++){var n=g[k];h+=1;Zr(n,c,h);Ry(n)&&n.count&&(h+=n.count)}}else zG(g)&&gD(g,null,c,h)}function gD(g,c,h,d){g=M7(g,c);g=yG(g.a,g.b);a:{for(k in g)if("a"!==k){var k=!0;break a}k=!1}k&&(h[d]=new Xj(Xj.THUNK,null,g))}function hD(g,c,h){if(Ry(g)){if(g.hooks){var d=c[h],k=Xj.PROPS,n=g.hooks,b={},e;for(e in n)b[e]=void 0;c[h]=sp(d,new Xj(k,g,b))}if(g.descendantHooks||g.hasThunks)for(g=g.children,d=g.length,k=0;k<d;k++)n=g[k],h+=1,hD(n,
c,h),Ry(n)&&n.count&&(h+=n.count)}else zG(g)&&gD(g,null,c,h)}function Sy(g,c,h){g.splice(c,1);return{from:c,key:h}}function BG(g){for(var c={},h=[],d=g.length,k=0;k<d;k++){var n=g[k];n.key?c[n.key]=k:h.push(k)}return{keys:c,free:h}}function sp(g,c){return g?(N7(g)?g.push(c):g=[g,c],g):c}function CG(g,c,h,d){if(d)if(d=d[c],qV(d))d.unhook&&d.unhook(g,c,h);else if("attributes"===c)for(var k in d)g.removeAttribute(k);else if("style"===c)for(var n in d)g.style[n]="";else g[c]="string"===typeof d?"":null}
function iD(g){if(Object.getPrototypeOf)return Object.getPrototypeOf(g);if(g.__proto__)return g.__proto__;if(g.constructor)return g.constructor.prototype}function DG(g,c){var h=c?c.document||rV:rV,d=c?c.warn:null;g=O7(g).a;if(P7(g))return g.init();if(Q7(g))return h.createTextNode(g.text);if(!R7(g))return d&&d("Item is not a valid virtual dom node",g),null;h=null===g.namespace?h.createElement(g.tagName):h.createElementNS(g.namespace,g.tagName);S7(h,g.properties);g=g.children;for(d=0;d<g.length;d++){var k=
DG(g[d],c);k&&h.appendChild(k)}return h}function jD(g,c,h,d,k){d=d||{};if(g){EG(h,k,k)&&(d[k]=g);var n=c.children;if(n){g=g.childNodes;for(var b=0;b<c.children.length;b++){k+=1;var e=n[b]||T7,l=k+(e.count||0);EG(h,k,l)&&jD(g[b],e,h,d,k);k=l}}}return d}function EG(g,c,h){if(0===g.length)return!1;for(var d=0,k=g.length-1,n,b;d<=k;){n=(k+d)/2>>0;b=g[n];if(d===k)return b>=c&&b<=h;if(b<c)d=n+1;else if(b>h)k=n-1;else return!0}return!1}function FM(g,c){return g>c?1:-1}function FG(g,c){"function"===typeof c.destroy&&
U7(c)&&c.destroy(g)}function GG(g,c,h){h=h||{};h.patch=h.patch&&h.patch!==GG?h.patch:YA;h.render=h.render||V7;return h.patch(g,c,h)}function YA(g,c,h){var d=[];for(k in c)"a"!==k&&d.push(Number(k));if(0===d.length)return g;var k=W7(g,c.a,d);var n=g.ownerDocument;h.document||n===X7||(h.document=n);for(n=0;n<d.length;n++){var b=d[n];var e=k[b],l=c[b],a=h;if(e)if(Y7(l))for(var f=0;f<l.length;f++)b=sV(l[f],e,a),e===g&&(g=b);else b=sV(l,e,a),e===g&&(g=b)}return g}function ZA(g,c,h,d,k){(this||Gt).tagName=
g;(this||Gt).properties=c||Z7;(this||Gt).children=h||$7;(this||Gt).key=null!=d?String(d):void 0;(this||Gt).namespace="string"===typeof k?k:null;g=h&&h.length||0;d=0;var n=k=!1,b=!1,e;for(a in c)if(c.hasOwnProperty(a)){var l=c[a];a8(l)&&l.unhook&&(e||(e={}),e[a]=l)}for(c=0;c<g;c++){var a=h[c];b8(a)?(d+=a.count||0,!k&&a.hasWidgets&&(k=!0),!n&&a.hasThunks&&(n=!0),b||!a.hooks&&!a.descendantHooks||(b=!0)):!k&&c8(a)?"function"===typeof a.destroy&&(k=!0):!n&&d8(a)&&(n=!0)}(this||Gt).count=g+d;(this||Gt).hasWidgets=
k;(this||Gt).hasThunks=n;(this||Gt).hooks=e;(this||Gt).descendantHooks=b}function kD(g){(this||e8).text=String(g)}function Ht(g){if(!(this instanceof Ht))return new Ht(g);this.value=g}function Ai(g){if(!(this instanceof Ai))return new Ai(g);this.value=g}function HG(g,c,h,d){if("string"===typeof g)c.push(new tV(g));else if("number"===typeof g)c.push(new tV(String(g)));else if(lD(g))c.push(g);else if(uV(g))for(var k=0;k<g.length;k++)HG(g[k],c,h,d);else if(null!==g&&void 0!==g)throw c={tagName:h,properties:d},
h=Error(),h.type="virtual-hyperscript.unexpected.virtual-element",h.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+IG(g)+".\nThe parent vnode is:\n"+IG(c),h.foreignObject=g,h.parentVnode=c,h;}function lD(g){return f8(g)||g8(g)||h8(g)||i8(g)}function IG(g){try{return JSON.stringify(g,null,"    ")}catch(c){return String(g)}}function $A(g,c){if(3===g.nodeType)return new vV(g.nodeValue);if(1===g.nodeType||9===g.nodeType){var h="http://www.w3.org/1999/xhtml"!==
g.namespaceURI?g.namespaceURI:null,d=c&&g.getAttribute(c)?g.getAttribute(c):null,k=g.tagName;var n,b={};if(g.hasAttributes()){if(g.namespaceURI&&"http://www.w3.org/1999/xhtml"!==g.namespaceURI)var e=g.namespaceURI;for(var l=0;l<g.attributes.length;l++){if("style"==g.attributes[l].name){var a=g.style;var f={};for(n=0;n<a.length;++n){var m=a.item(n);f[m]=String(a[m]);-1<f[m].indexOf("url")&&(f[m]=f[m].replace(/"/g,""))}a="style";m=n=void 0}else e?(n=g.attributes[l],a=n.name,f=n.value,n=j8[n.name]||
"",m=void 0):(n=void 0,f=g.attributes[l],a=wV[f.name]?wV[f.name]:f.name,0===a.indexOf("data-")||0===a.indexOf("aria-")?(f=f.value,n=!0):f=f.value,m=n||!1,n=void 0);n?b[a]={namespace:n,value:f}:m?(b.attributes||(b.attributes={}),b.attributes[a]=f):b[a]=f}}e=[];for(l=0;l<g.childNodes.length;l++)e.push($A(g.childNodes[l],c));return new k8(k,b,e,d,h)}return new vV("")}function Bi(g){var c={};xh.addFill(g,c);xh.addTransform(g,c);xh.addTransformOrigin(g,c);xh.addDisplay(g,c);xh.addExtentStyle(g,c);xh.addBorder(g,
c);xh.addBorderRadius(g,c);xh.addShadowStyle(g,c);g.grayscale&&(c.filter=(c.filter||"")+" grayscale("+100*g.grayscale+"%)");g.blur&&(c.filter=(c.filter||"")+" blur("+g.blur+"px)");null!=g.opacity&&(c.opacity=g.opacity);g.draggable&&!g.isWorld&&(c["touch-action"]="none");return c}function Rd(g,c){var h=g.position,d=g.origin,k=g.scale,n=g.rotation,b=g.flipped,e=g.tilted,l=g.perspective,a=g.owner,f=Math.round(h.x-d.x-(g._skipWrapping&&a?a.borderWidthLeft:0));h=Math.round(h.y-d.y-(g._skipWrapping&&a?
a.borderWidthTop:0));if(g=g.renderOnGPU||g.dropShadow&&!g.dropShadow.fast||0<g.grayscale)c.willChange="transform";a&&a.isText||g?c.transform="translate("+f+"px, "+h+"px)":(c.transform="",c.top=h+"px",c.left=f+"px");c.transform+=" rotate("+n.toFixed(2)+"rad) scale("+k.toFixed(5)+","+k.toFixed(5)+")";l&&(c.perspective=l+"px");b&&(c.transform+=" rotateY("+180*b+"deg)");e&&(c.transform+=" rotateX("+180*e+"deg)")}function Vw(g,c){var h=g.width;g=g.height;c.width=h||1;c.height=g||1;c.viewBox=[0,0,h||1,
g||1].join(" ");return c}function Dd(g){var c="";if(0<g.length){var h=g[0];var d=h.position;var k=d.y;d=d.x;c+="M "+d+" "+k+" "}for(var n=1;n<g.length-1;n++){var b=g[n],e=b.position,l=e.x;e=e.y;var a=b,f=a.controlPoints.previous;c=a.isSmooth?c+("C "+(d+h.controlPoints.next.x)+" "+(k+h.controlPoints.next.y)+" "+(l+f.x)+" "+(e+f.y)+" "+l+" "+e+" "):c+("L "+l+" "+e+" ");h=b;d=l;k=e}0<g.length&&(b=g[g.length-1].position,n=b.x,b=b.y,g=g[g.length-1],l=g.controlPoints.previous,c=g.isSmooth?c+("C "+(d+h.controlPoints.next.x)+
" "+(k+h.controlPoints.next.y)+" "+(n+l.x)+" "+(b+l.y)+" "+n+" "+b):c+("L "+n+" "+b));return c}function $r(g,c){var h=g.id,d=g.vertices,k=g.fill,n=g.borderColor,b=g.borderWidth;d.length&&(c.d=xh.getSvgVertices(d));xh.addSvgBorderStyle(g,c);c["stroke-width"]=b.valueOf();c.fill=k?k.isGradient?"url(#gradient-fill"+h+")":k.toString():"transparent";c.stroke=n.valueOf().isGradient?"url(#gradient-borderColor"+h+")":n.valueOf().toString();return c}function nc(g){var c=g.reactsToPointer,h=g.nativeCursor,d=
g.clipMode,k=Yd.styleProps(g);g=g._animationQueue.maskedProps("css");"backgroundImage"in g&&delete k.background;"visible"!==d&&(k.overflow=d,k["-webkit-overflow-scrolling"]="touch",k["overflow-anchor"]="none");Object.assign(k,g);k.position="absolute";k["pointer-events"]=c?"auto":"none";k.cursor=h;return k}function Av(g,c){this.morph=g;this.type=c}function It(g,c){c={animation:new Yd.Animation(g),key:g.id,id:g.id,attributes:{},className:(g.hideScrollbars?g.styleClasses.concat("hiddenScrollbar"):g.styleClasses).join(" "),
draggable:!1,"morph-after-render-hook":new Yd.MorphAfterRenderHook(g,c)};c.attributes["touch-action"]=Yd.bowser.ios&&g.draggable&&!g.isWorld?"none":Yd.bowser.ios&&"visible"!=g.clipMode&&!g.isWorld?"auto":"manipulation";return c}function Ww(g){var c=new Yd.SvgAnimation(g,"svg"),h={};Yd.addSvgAttributes(g,h);Object.assign(h,g._animationQueue.maskedProps("svg"));return{animation:c,attributes:h}}function Bv(g){var c=new Yd.SvgAnimation(g,"path"),h={mask:0!==g.drawnProportion?"url(#mask"+g.id+")":""};
Yd.addPathAttributes(g,h);Object.assign(h,g._animationQueue.maskedProps("path"));return{animation:c,attributes:h}}function Xw(g,c,h){var d=h=h.valueOf(),k=d.bounds,n=d.focus,b=d.vector;d=d.stops;var e=c.x;c=c.y;g={namespace:"http://www.w3.org/2000/svg",attributes:{id:"gradient-"+g,gradientUnits:"userSpaceOnUse",r:"50%"}};b&&(g.attributes.gradientTransform="rotate("+Yd.num.toDegrees(b.extent().theta())+", "+e/2+", "+c/2+")");n&&k&&(b=k.width,k=k.height,g.attributes.gradientTransform="matrix(\n"+b/
e+", 0, 0, "+k/c+",\n"+(e/2-b/e*(e/2)+n.x*e-e/2)+",\n"+(c/2-k/c*(c/2)+n.y*c-c/2)+")");return Yd.h(h.type,g,d.map(function(l){return Yd.h("stop",{namespace:"http://www.w3.org/2000/svg",attributes:{offset:100*l.offset+"%","stop-opacity":l.color.a,"stop-color":l.color.withA(1).toString()}})}))}function Yw(g,c){c=void 0===c?g.env.renderer:c;return Yd.createNode(g.render(c),c.domEnvironment)}function Zw(g,c){var h=c.renderMap.get(g),d=c.getNodeForMorph(g);if(d&&h){var k=c.render(g),n=Yd.diff(h,k);if(g=
c.renderMap.get(g.owner))g=g.children[0].children,h=g.indexOf(h),g[h]=k,Yd.patch(d,n)}}function $w(g,c){if(g.needsRerender()){var h=!1,d=c.domNode,k=c.renderMap.get(g)||d&&(h=!0)&&Yd.parser(d)||c.render(g),n=c.render(g);h&&(k.key=n.key);h=Yd.diff(k,n);d=d||(c.domNode=Yd.createNode(k,c.domEnvironment));d.parentNode||Yd.initDOMState(c,g);Yd.patch(d,h);c.renderFixedMorphs(n.fixedMorphs,g)}}function md(g,c,h){return(((1-3*h+3*c)*g+(3*h-6*c))*g+3*c)*g}function mD(g){return g}function tp(g){return Fe.obj.isFunction(g)?
g:Fe.Bezier.apply(Fe,$jscomp.arrayFromIterable(eval("(["+g.match(/\((.*)\)/)[1]+"])")))}function jd(g){var c=0,h=0;do c+=g.offsetTop||0,h+=g.offsetLeft||0,g=g.offsetParent;while(g);return{top:c,left:h}}function ax(){return System.get("@system-env").browser?tg.createDOMEnvironment_browser():tg.createDOMEnvironment_node()}function bx(){return tg._defaultEnv||(tg._defaultEnv=System.get("@system-env").browser?new tg.DomEnvironment(window,document,function(){}):tg.createDOMEnvironment())}function oi(g,
c,h){g=void 0===g?"lively-css":g;h=void 0===h?document:h;var d=h.getElementById(g);return d?tg.setCSSDef(d,c,h):tg.addCSSDef(g,c,h)}function Iq(g,c,h,d){h=void 0===h?document:h;d=void 0===d?!0:d;var k=h.getElementById(g),n=!1;return k?d&&k.getAttribute("href")!==c?(k.setAttribute("href",c),k.onload=function(){return n=!0},tg.promise.waitFor(3E4,function(){return!!n&&k})):Promise.resolve():(k=h.createElement("link"),k.type="text/css",k.rel="stylesheet",k.setAttribute("id",g),k.setAttribute("href",
c),k.onload=function(){return n=!0},h.head.appendChild(k),tg.promise.waitFor(3E4,function(){return!!n&&k}))}function Hc(g,c){return Array.isArray(g)?g.reduce(function(h,d){return Hc(d,h)},c):"string"===typeof g?c.filter(function(h){return h.path()!==g&&h.name()!==g}):g instanceof RegExp?c.filter(function(h){return!g.test(h.path())&&!g.test(h.name())}):"function"===typeof g?c.filter(function(h){return!g(h)}):c}function Ao(g){g=$jscomp.makeIterator(g.split("?"));g.next();var c=g.next().value;g={};if(!c)return g;
if(c=c.split("&"))for(var h=0;h<c.length;h++){var d=c[h].split("="),k=d[0],n=!0;if(1<d.length)if(n=decodeURIComponent(d.slice(1).join("=")),"undefined"===n)n=void 0;else if(n.match(/^(true|false|null|[0-9"[{].*)$/))try{n=JSON.parse(n)}catch(b){"["===n[0]&&(n=n.slice(1,-1).split(","))}g[k]=n}return g}function Jt(g){return Object.keys(g).map(function(c){return c+"="+encodeURIComponent(String(g[c]))}).join("&")}function Cv(g){var c=g;do g=c,c=g.replace(Ke.pathDoubleDotRe,"");while(c!=g);c=c.replace(Ke.pathDoubleSlashRe,
"$1/");return c=c.replace(Ke.pathDotRe,"/")}function aB(g,c){var h=g.match(Ke.urlRe),d=c.match(Ke.urlRe),k=!0;if(h&&!d||!h&&d)k=!1;if(h&&d){var n=h[1];var b=h[2];var e=d[1];var l=d[2];n!==e?k=!1:b!==l?k=!1:(g=h[3],c=d[3])}if(!k)throw Error("[relativePathBetween] incompatible paths: "+g+" vs. "+c);g=Ke.withRelativePartsResolved(g);c=Ke.withRelativePartsResolved(c);if(g==c)return"";h=Ke._relativePathBetween_checkPathes(c,g);if(!h)throw Error("pathname differs in relativePathFrom "+g+" vs "+c);return h}
function Y(g,c){return Ke.withRelativePartsResolved(g.replace(Ke.slashEndRe,"")+"/"+c.replace(Ke.slashStartRe,""))}function p(g){return g.startsWith("/")?g.replace(Ke.slashEndRe,"").split("/").slice(0,-1).join("/")+"/":""}function t(g){var c=[];for(g=Ke.parent(g);g&&(c.unshift(g),g=Ke.parent(g),"/"!==g););return c}function x(g,c){if(!g)throw Error("lively.resource resource constructor: expects url but got "+g);if(g.isResource)return g;g=String(g);for(var h=0;h<Ke.extensions.length;h++)if(Ke.extensions[h].matches(g))return new Ke.extensions[h].resourceClass(g,
c);throw Error("Cannot find resource type for url "+g);}function w(g,c,h){var d,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return d=x(g,h).asDirectory(),e.yield(d.ensureExistance(),2);case 2:n=e.forIn(c);case 3:if(null==(k=n.getNext())){e.jumpTo(5);break}if(!c.hasOwnProperty(k)){e.jumpTo(3);break}b=d.join(k);return"object"===typeof c[k]?e.yield(w(b,c[k],h),9):e.yield(b.write(c[k]),8);case 8:e.jumpTo(7);break;case 9:case 7:e.jumpTo(3);break;case 5:return e.return(d)}})}
function A(g){var c=g.name;Ke.extensions=Ke.extensions.filter(function(h){return h.name!==c}).concat(g)}function E(g){var c="string"===typeof g?g:g.name;Ke.extensions=Ke.extensions.filter(function(h){return h.name!==c})}function I(g,c){var h=void 0===g.useProxy?!0:g.useProxy,d=void 0===g.useCors?!0:g.useCors,k=g.url,n=g.onLoad,b=g.headers,e=g.onProgress,l=new Jf.XMLHttpRequest,a=Jf.promise.deferred();l.open("PUT",k);h&&(Object.assign(b,{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":k}),
k=g.proxyDomain||Jf.defaultOrigin());for(var f in b)l.setRequestHeader(f,b[f]);l.upload.addEventListener("progress",e);l.responseType="json";l.onload=function(){n(l.response);a.resolve(l)};d&&(l.withCredentials=!0);l.send(c);return a.promise}function Q(g,c,h){c=void 0===c?"infinity":c;var d,k,n,b,e,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(g.dirList(c,h),2);case 2:d=v.yieldResult,k={},n=$jscomp.makeIterator(d),b=n.next();
case 3:if(b.done){v.jumpTo(5);break}e=b.value;if(e.isDirectory()){l={};v.jumpTo(6);break}return v.yield(e.read(),7);case 7:l=v.yieldResult;case 6:a=l;f=e.asFile().relativePathFrom(g).split("/");m=k;q=$jscomp.makeIterator(f.slice(0,-1));for(r=q.next();!r.done;r=q.next())u=r.value,m[u]||(m[u]={}),m=m[u];m[f[f.length-1]]=a;b=n.next();v.jumpTo(3);break;case 5:return v.return(k)}})}function ca(g){var c,h,d,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return c=
document.head,h=c.namespaceURI,d=$g.newUUID(),k=document.createElementNS(h,"script"),k.setAttribute("type","module"),c.appendChild(k),k.innerText="import m from '"+g+"'; window['"+d+"'] = m;",k.setAttributeNS(null,"async",!0),b.yield($g.waitFor(3E4,function(){return window[d]}),2);n=b.yieldResult;delete window[d];k.remove();return b.return(n)})}function W(g,c){var h=document.head,d=h.namespaceURI;return new Promise(function(k,n){var b=document.createElementNS(d,"script");b.setAttribute("type","text/ecmascript");
h.appendChild(b);b.setAttributeNS(null,"id",g);"http://www.w3.org/2000/svg"===b.namespaceURI?b.setAttributeNS("http://www.w3.org/1999/xlink","href",g):b.setAttribute("src",g);b.onload=k;b.onerror=n;b.setAttributeNS(null,"async",!0)})}function va(){var g,c,h,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:if("fetch"in System.global&&"Headers"in System.global)return k.return(Promise.resolve());g=System.decanonicalize("lively.resources");if(System.get("@system-env").node){k.setCatchFinallyBlocks(5);
c=System._nodeRequire("fetch-ponyfill");k.leaveTryBlock(3);break}return k.yield(System.import("fetch-ponyfill",g),4);case 4:c=k.yieldResult;k.jumpTo(3);break;case 5:return k.enterCatchBlock(),k.yield(System.normalize("fetch-ponyfill",g),7);case 7:return h=k.yieldResult.replace("file://",""),k.yield(System.import(h),8);case 8:d=k.yieldResult,c=d.default;case 3:Object.assign(System.global,c()),k.jumpToEnd()}})}function Na(g){return g&&g.split(",").map(function(c){c=c.split(" ").filter(function(h){return""!=
h}).join(" ");c.includes(" ")&&(c.startsWith("'")&&(c=c.slice(1)),c.endsWith("'")&&(c=c.slice(0,-1)),c.startsWith('"')||(c='"'+c),c.endsWith('"')||(c+='"'));return c}).join(",")}function fb(g,c){c||(c="undefined"!==typeof document?document.location.search:"");c=(c=c.trim())&&"?"!==c?rh.parseQuery(c):{};g.endsWith(".json")?(c.file=g,delete c.name):(delete c.file,c.name=g);return"/worlds/load?"+rh.stringifyQuery(c)}function kb(g){Object.assign(rh.nameToClassMapping,g)}function sb(g,c){g=void 0===g?
{}:g;c=void 0===c?{restore:!1}:c;var h=rh.nameToClassMapping.default;g.type&&("function"===typeof g.type&&(h=g.type),"object"===typeof g.type?h=rh.locateClass(g.type):"string"===typeof g.type&&(h=rh.nameToClassMapping[g.type.toLowerCase()]||h));var d={};return c.restore?(new h((d[Symbol.for("lively-instance-restorer")]=!0,d))).initFromJSON(g):new h(g)}function bc(g){return("function"===typeof g?g[Symbol.for("__LivelyClassName__")]:"string"===typeof g?g.toLowerCase():"")+"_"+rh.string.newUUID().replace(/-/g,
"_")}function Mb(g,c){if("string"===typeof g)return g;if(!g||"object"!==typeof g)return null;switch(c){case "ios":return g.ios||g.mac;case "mac":return g.mac||g.ios;case "win":case "windows":case "windowsphone":return g.win||g.windows;case "linux":return g.linux||g.win||g.windows;case "chromeos":return g.chromeos||g.linux||g.win||g.windows;case "android":return g.android||g.linux||g.win||g.windows;default:return g.linux||g.win||g.windows}}function ic(g,c,h,d){d=void 0===d?h.name:d;(g[c]=Bo.fun.wrap(g[c],
h)).hookFunc=h;h.hookName=d}function rc(g,c,h){for(var d=[],k=g[c];k;)d.push(k),k=k.originalFunction;k="string"===typeof h?d.find(function(n){return n.hookFunc&&n.hookFunc.hookName===h}):d.find(function(n){return n.hookFunc===h});if(!k)return!1;Bo.arr.remove(d,k);g[c]=d.reduceRight(function(n,b){return Bo.fun.wrap(n,b.hookFunc||b)});return!0}function Nc(g,c,h){for(g=g[c];g;){if(g.hookFunc&&("string"===typeof h&&g.hookFunc.hookName===h||g.hookFunc===h))return!0;g=g.originalFunction}return!1}function wc(g){if(g.loads){var c=
g.loads;return Dv.arr.uniq(Object.keys(Dv.loadedModules(g)).concat(Object.keys(c))).reduce(function(h,d){var k=c[d]?c[d].depMap:{};h[d]=Object.keys(k).map(function(n){var b=k[n];return"@empty"===b?b+"/"+n:b});return h},{})}return Object.keys(g._loader.moduleRecords).reduce(function(h,d){h[d]=g._loader.moduleRecords[d].dependencies.filter(Boolean).map(function(k){return k.name});return h},{})}function rd(g,c,h,d,k){var n=g.get("@lively-env").pendingExportChanges;(g=jn.module(g,c).record())&&(h in g.exports||
k)&&((n[c]||(n[c]={}))[h]=d)}function ce(g,c){var h=g.get("@lively-env").pendingExportChanges[c];h&&(jn.clearPendingModuleExportChanges(g,c),jn.updateModuleExports(g,c,h))}function qd(g,c,h,d,k){var n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:e.setCatchFinallyBlocks(2);g.debug&&console.log("[module change] "+c+" "+h.slice(0,50).replace(/\n/g,"")+" "+d);if(!d||"es6"===d||"esm"===d||"register"===d||"defined"===d)return e.yield(ej.moduleSourceChangeEsm(g,
c,h,k),8);if("global"!==d)throw Error("moduleSourceChange is not supported for module "+c+" with format "+d);return e.yield(ej.moduleSourceChangeGlobal(g,c,h,k),7);case 7:n=e.yieldResult;e.jumpTo(5);break;case 8:n=e.yieldResult;case 5:return ej.emit("lively.modules/modulechanged",{module:c,newSource:h,options:k},Date.now(),g),e.return(n);case 2:throw b=e.enterCatchBlock(),ej.emit("lively.modules/modulechanged",{module:c,newSource:h,error:b,options:k},Date.now(),g),b;}})}function ad(g){return/\.js/i.test(g)}
function je(g){return Zl.isJsFile(g)?g.replace(/\/[^\/]*$/,""):g.replace(/\/$/,"")}function Qd(g){return/^[^:\\]+:\/\//.test(g)}function Id(g){var c=g.match(/^([^:]+:\/\/)(.*)/);if(!c)return g;g=c[1];var h=c=c[2];do c=h,h=c.replace(/\/[^\/]+\/\.\./,"");while(h!=c);h=h.replace(/(^|[^:])[\/]+/g,"$1/");h=h.replace(/\/\.\//g,"/");return g+h}function Zd(g,c,h){h=void 0===h?!1:h;var d=ke.classHolder.PackageRegistry.ofSystem(g),k=d.allPackageURLs();g=h?c:ke.normalizePackageURL(g,c,k);return{pkg:d.findPackageWithURL(g),
url:g,allPackageURLs:k,registry:d}}function se(g,c,h){g=ke.lookupPackage(g,c,void 0===h?!1:h);c=g.url;h=g.registry;return g.pkg||h.addPackageAt(c,"devPackageDirs")}function xe(g,c,h){g=ke.lookupPackage(g,c,void 0===h?!1:h);if(h=g.pkg)return h;throw Error("[getPackage] package "+c+" (as "+g.url+") not found");}function $e(g,c,h){return ke.getPackage(g,h).updateConfig(c)}function ug(g,c){return Promise.resolve(ke.ensurePackage(g,c)).then(function(h){return h.import()})}function Ji(g,c){return(g=ke.lookupPackage(g,
c).pkg)?g.remove():null}function Ci(g,c,h){return ke.getPackage(g,c).reload(h)}function Rh(g,c,h){return Promise.resolve(ke.ensurePackage(g,c)).then(function(d){return d.register(h)})}function jg(g){return ke.Package.allPackages(g).map(function(c){return c.asSpec()})}function fi(g,c){g="string"===typeof g?Dc.parse(g):g;c.scope=Dc.query.resolveReferences(Dc.query.scopes(g));return Dc.ClassReplaceVisitor.run(g,c)}function Nn(g,c,h){h=On.ensureParent(g,c);var d=g.System._nodeRequire("module");c.startsWith(".")&&
(c=On.relative(g,c));return d._load(c,h)}function ui(g,c,h){h=On.ensureParent(g,c);var d=g.System._nodeRequire("module");c.startsWith(".")&&(c=On.relative(g,c));return d._resolveFilename(c,h)}function Co(g,c,h){var d=he.livelySystemEnv(g);c=g.decanonicalize(c,h);return d.loadedModules[c]||(d.loadedModules[c]=new he.ModuleInterface(g,c))}function as(g,c,h){h=void 0===h?!1:h;var d=he.livelySystemEnv(g);return(h?c:g.normalizeSync(c))in d.loadedModules}function bs(g,c,h){h=void 0===h?!1:h;var d,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress){he.livelySystemEnv(g);d=h?c:g.normalizeSync(c);if(he.isModuleLoaded(g,d,!0))return b.return(!0);k=he.Package.forModuleId(g,d);return k&&"no group"!==k.name?b.yield(k.hasResource(d),3):(n=g.resource(d).exists(),b.jumpTo(2))}2!=b.nextAddress&&(n=b.yieldResult);return b.return(n)})}function Kt(){return Md.exceptions}function cs(g){return Md.exceptions=g}function Rg(g,c,h,d,k){c=String(c);g=d.sourceAccessorName;var n=d.recorder,b=d.recorderName,e=d.dontTransform,l=d.varDefinitionCallbackName,
a=void 0===d.embedOriginalCode?!0:d.embedOriginalCode;g=a?g:void 0;d={topLevelVarRecorder:n,varRecorderName:b,sourceAccessorName:g,dontTransform:e,jsx:h.endsWith(".jsx"),recordGlobals:!0,keepPreviouslyDeclaredValues:!0,declarationWrapperName:l,evalId:d.nextEvalId(),classTransform:Md.classToFunctionTransform,currentModuleAccessor:Md.funcCall(Md.member(Md.funcCall(Md.member(Md.member("__lvVarRecorder","System"),"get"),Md.literal("@lively-env")),"moduleEnv"),Md.literal(h))};n=k?'console.log("[lively.modules] executing module '+
h+'");\n':"";e="";"System.global"===b?delete d.declarationWrapperName:(n+='SystemJS.get("@lively-env").evaluationStart("'+h+'");\nvar '+(b+' = SystemJS.get("@lively-env").moduleEnv("'+h+'").recorder;\n')+(a?"\nvar "+g+" = "+JSON.stringify(c)+";\n":""),e+='\nSystemJS.get("@lively-env").evaluationEnd("'+h+'");');try{var f=n+Md.evalCodeTransform(c,d)+e;k&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=f);return{source:f,options:d}}catch(m){return console.error("Error in prepareCodeForCustomCompile of "+
h+" "+m.stack),{source:c,options:d}}}function fj(g,c,h,d,k,n){c=String(c);g=Object.assign({},k,{classTransform:Md.classToFunctionTransform,topLevelVarRecorder:d.recorder,varRecorderName:d.recorderName,dontTransform:d.dontTransform,recordGlobals:!0,declarationWrapperName:d.varDefinitionCallbackName,currentModuleAccessor:Md.funcCall(Md.member(Md.funcCall(Md.member(Md.member("__lvVarRecorder","System"),"get"),Md.literal("@lively-env")),"moduleEnv"),Md.literal(h))});try{var b=Md.evalCodeTransformOfSystemRegisterSetters(c,
g);n&&"undefined"!==typeof $world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString+=b);return b}catch(e){return console.error("Error in prepareTranslatedCodeForSetterCapture",e.stack),c}}function vi(g,c){return g.translate(c).then(function(h){var d=Md.parse(h).body.find(function(n){return n.expression&&"CallExpression"===n.expression.type&&"register"===n.expression.callee.property.name});if(!d)throw Error("Cannot find register call in translated source of "+c.name);var k=
d.expression;d=k.arguments[0].elements.map(function(n){return n.value});k=k.arguments[1];h=h.slice(k.start,k.end);h=eval('var __moduleName = "'+c.name+'";('+h+");\n//# sourceURL="+c.name+"\n");g.debug&&"undefined"!==$world&&$world.get("log")&&$world.get("log").isText&&($world.get("log").textString=h);return{localDeps:d,declare:h}})}function $l(g,c){return g.translate(c).then(function(h){return{translated:h}})}function cx(g){Md.isHookInstalled(g,"translate","lively_modules_translate_hook")||Md.installHook(g,
"translate",function(c,h){return Md.customTranslate.call(g,c,h)},"lively_modules_translate_hook")}function dx(g){Md.removeHook(g,"translate","lively_modules_translate_hook")}function Mg(g){g.resource=kg.resource;kg.isHookInstalled(g,"fetch",kg.fetchResource)&&kg.removeHook(g,"fetch","fetchResource");kg.installHook(g,"fetch",kg.fetchResource);kg.isHookInstalled(g,"resource","livelyProtocol")&&kg.removeHook(g,"fetch","livelyProtocol");kg.installHook(g,"resource",kg.livelyProtocol)}function vl(g){kg.removeHook(g,
"fetch","fetchResource");kg.removeHook(g,"resource","livelyProtocol");delete g.resource}function Pn(g){Xc.isHookInstalled(g,"normalize","normalizeHook")||Xc.installHook(g,"normalize",Xc.normalizeHook,"normalizeHook");Xc.isHookInstalled(g,"decanonicalize","decanonicalizeHook")||Xc.installHook(g,"decanonicalize",Xc.decanonicalizeHook,"decanonicalizeHook");Xc.isHookInstalled(g,"normalizeSync","decanonicalizeHook")||Xc.installHook(g,"normalizeSync",Xc.decanonicalizeHook,"decanonicalizeHook");Xc.isHookInstalled(g,
"newModule","newModule_volatile")||Xc.installHook(g,"newModule",Xc.newModule_volatile,"newModule_volatile");Xc.isHookInstalled(g,"instantiate","instantiate_triggerOnLoadCallbacks")||Xc.installHook(g,"instantiate",Xc.instantiate_triggerOnLoadCallbacks,"instantiate_triggerOnLoadCallbacks");Xc.isHookInstalled(g,"locate","locateHook")||Xc.installHook(g,"locate",Xc.locateHook,"locateHook")}function ex(g){Xc.removeHook(g,"normalize","normalizeHook");Xc.removeHook(g,"decanonicalize","decanonicalizeHook");
Xc.removeHook(g,"normalizeSync","decanonicalizeHook");Xc.removeHook(g,"newModule","newModule_volatile");Xc.removeHook(g,"instantiate","instantiate_triggerOnLoadCallbacks");Xc.removeHook(g,"locate","locateHook")}function JG(g){return{moduleEnv:function(c){return Xc.classHolder.module(g,c)},get itself(){return g.get(g.decanonicalize("lively.modules/index.js"))},evaluationStart:function(c){Xc.classHolder.module(g,c).evaluationStart()},evaluationEnd:function(c){Xc.classHolder.module(g,c).evaluationEnd()},
dumpConfig:function(){return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,defaultJSExtensions:g.defaultJSExtensions,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths},null,2)},get packageRegistry(){return g["__lively.modules__packageRegistry"]},set packageRegistry(c){g["__lively.modules__packageRegistry"]=c},packages:g["__lively.modules__packages"]||(g["__lively.modules__packages"]={}),loadedModules:g["__lively.modules__loadedModules"]||(g["__lively.modules__loadedModules"]=
{}),pendingExportChanges:g["__lively.modules__pendingExportChanges"]||(g["__lively.modules__pendingExportChanges"]={}),notifications:g["__lively.modules__notifications"]||(g["__lively.modules__notifications"]=[]),notificationSubscribers:g["__lively.modules__notificationSubscribers"]||(g["__lively.modules__notificationSubscribers"]={}),options:g["__lively.modules__options"]||(g["__lively.modules__options"]=Xc.obj.deepCopy(Xc.defaultOptions)),onLoadCallbacks:g["__lively.modules__onLoadCallbacks"]||
(g["__lively.modules__onLoadCallbacks"]=[]),modulePackageMapCache:g["__lively.modules__modulePackageMapCache"]}}function Ty(g,c){return g&&"string"!==typeof g?g:Xc.systems()[g]||(Xc.systems()[g]=Xc.makeSystem(c))}function Uy(g){g=g&&"string"!==typeof g?Xc.nameOfSystem(g):g;delete Xc.systems()[g]}function KG(g,c){g.trace=!0;c=c||{};var h=c.hasOwnProperty("useModuleTranslationCache")?c.useModuleTranslationCache:!Xc.urlQuery().noModuleCache;g.useModuleTranslationCache=h;g.set("@lively-env",g.newModule(Xc.livelySystemEnv(g)));
"undefined"!==typeof Xc.WorkerGlobalScope&&g.set("@system-env",g.newModule(Object.assign({},g.get("@system-env"),{browser:!0,worker:!0,location:Xc.location})));(h="undefined"!==typeof Xc.process&&Xc.process.versions&&Xc.process.versions.electron)&&g.set("@system-env",g.newModule(Object.assign({electron:h},g.get("@system-env"))));Xc.wrapResource(g);Xc.wrapModuleLoad(g);Xc.wrapModuleResolution(g);h&&(h=["electron"].reduce(function(d,k){d[k]="@node/"+k;return d},{}),c.map=Xc.obj.merge(h,c.map));Xc.isNode&&
(h="addons assert buffer child_process cluster console crypto dgram dns domain events fs http https module net os path punycode querystring readline repl stream stringdecoder timers tls tty url util v8 vm zlib constants".split(" ").reduce(function(d,k){d[k]="@node/"+k;return d},{}),c.map=Xc.obj.merge(h,c.map));c.packageConfigPaths=c.packageConfigPaths||["./node_modules/*/package.json"];c.transpiler||"traceur"!==g.transpiler||(h=Xc.GLOBAL.System,"lively.transpiler"===h.transpiler?(g.set("lively.transpiler",
h.get("lively.transpiler")),g._loader.transpilerPromise=h._loader.transpilerPromise,g.config({transpiler:"lively.transpiler",babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)})):g.config({map:{"plugin-babel":h.map["plugin-babel"],"systemjs-babel-build":h.map["systemjs-babel-build"]},transpiler:h.transpiler,babelOptions:Object.assign(h.babelOptions||{},c.babelOptions)}));g.config(c);return g}function LG(g){g=Xc.getSystem(g);return JSON.stringify({baseURL:g.baseURL,transpiler:g.transpiler,
defaultJSExtensions:g.defaultJSExtensions,defaultExtension:g.defaultExtension,map:g.map,meta:g.meta,packages:g.packages,paths:g.paths,packageConfigPaths:g.packageConfigPaths,bundles:g.bundles},null,2)}function MG(g,c,h){var d=g.decanonicalize(c);if(g.get(d))try{h(Xc.classHolder.module(g,d))}catch(k){console.error(k)}else g.get("@lively-env").onLoadCallbacks.push({moduleName:c,resolved:!1,callback:h})}function NG(g){return g.get("@lively-env").loadedModules}function OG(g){var c=g.loads?Object.keys(g.loads):
Object.keys(g._loader.moduleRecords);return Xc.arr.uniq(c.concat(Object.keys(Xc.loadedModules(g))))}function GM(g,c,h){return Promise.all(Xc.obj.values(Xc.loadedModules(g)).map(function(d){return d.search(c,h)})).then(function(d){return Xc.arr.flatten(d,1)})}function nD(g,c,h,d){c=void 0===c?{maxDepth:0,excludes:[]}:c;h=void 0===h?{}:h;d=void 0===d?0:d;var k,n,b,e,l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:k=c;n=k.maxDepth;b=k.excludes;
if(0<n&&d>n)return z.return(h);z.setCatchFinallyBlocks(2);e=JSON;l=e.parse;return z.yield(wl.resource(g).join("package.json").read(),4);case 4:a=l.call(e,z.yieldResult);f=a.name+"@"+a.version;if(h[f]||b.includes(a.name))return z.return(h);h[f]=Object.assign({url:g},wl.obj.select(a,["name","version","dependencies","devDependencies","main"]));z.leaveTryBlock(3);break;case 2:return z.enterCatchBlock(),z.return(h);case 3:return z.setCatchFinallyBlocks(5),z.yield(wl.resource(g).join("node_modules").dirList(1),
7);case 7:m=z.yieldResult;z.leaveTryBlock(6);break;case 5:return z.enterCatchBlock(),z.return(h);case 6:q=$jscomp.makeIterator(m),r=q.next();case 8:if(r.done){z.jumpTo(10);break}v=u=r.value;y=v.url;return z.yield(nD(y,c,h,d+1),11);case 11:h=z.yieldResult;r=q.next();z.jumpTo(8);break;case 10:return z.return(h)}})}function PG(g,c){var h=Object.assign({},g.dependencies,{},g.devDependencies);return Object.keys(h).reduce(function(d,k){var n=h[k],b=wl.obj.values(c).find(function(l){var a=l.version;return l.name===
k&&lively.modules.semver.satisfies(a,n)})||{},e=b.name;b=b.version;d[k]=e?e+"@"+b:void 0;return d},{})}function QG(g){function c(k,n){var b=k+"@"+n;if(b in d)return d[b];var e=h.find(function(a){var f=a.version;return a.name===k&&lively.modules.semver.satisfies(f,n)})||{},l=e.name;e=e.version;return d[b]=l?l+"@"+e:void 0}var h=wl.obj.values(g),d={};return Object.keys(g).reduce(function(k,n){var b=g[n],e=Object.assign({},b.dependencies,{},b.devDependencies);k[n]=Object.keys(e).map(function(l){return c(l,
e[l])}).filter(function(l){return!!l});return k},{})}function RG(g,c){tc.defaultSystem=g;c&&(tc.GLOBAL.System=g);return g}function SG(){tc._wrapModuleResolution(tc.defaultSystem)}function TG(){tc._unwrapModuleResolution(tc.defaultSystem)}function UG(){return Object.keys(tc.requireMap())}function oD(g){return tc._module(tc.defaultSystem,g)}function VG(g,c){return tc._isModuleLoaded(tc.defaultSystem,g,c)}function WG(g,c){return tc._doesModuleExist(tc.defaultSystem,g,c)}function XG(){return tc._printSystemConfig(tc.defaultSystem)}
function YG(g,c){return tc._whenLoaded(tc.defaultSystem,g,c)}function ZG(g){return tc._importPackage(tc.defaultSystem,g)}function $G(g,c){return tc._registerPackage(tc.defaultSystem,g,c)}function aH(g){return tc._removePackage(tc.defaultSystem,g)}function bH(g,c){return tc._reloadPackage(tc.defaultSystem,g,c)}function cH(){return tc.getPackageSpecs(tc.defaultSystem)}function dH(g,c){return tc._getPackage(tc.defaultSystem,g,void 0===c?!1:c)}function eH(g){return tc.Package.forModuleId(tc.defaultSystem,
g)}function fH(g){return tc._ensurePackage(tc.defaultSystem,g)}function gH(g,c){return tc._applyPackageConfig(tc.defaultSystem,g,c)}function hH(g,c){return tc._lookupPackage(tc.defaultSystem,g,void 0===c?!1:c)}function iH(g,c,h){return tc._moduleSourceChange(tc.defaultSystem,g,c,h)}function jH(){return tc.computeRequireMap(tc.defaultSystem)}function kH(g,c){return tc._isHookInstalled(tc.defaultSystem,g,c)}function lH(g,c){return tc._installHook(tc.defaultSystem,g,c)}function mH(g,c){return tc._removeHook(tc.defaultSystem,
g,c)}function nH(){tc._wrapModuleLoad(tc.defaultSystem)}function oH(){tc._unwrapModuleLoad(tc.defaultSystem)}function HM(g){return g&&g.__ref__}function pH(){IM=!0;for(var g,c,h=pD.length;h;){c=pD;pD=[];for(g=-1;++g<h;)c[g]();h=pD.length}IM=!1}function bB(g,c,h){var d=h[h.length-1];g===d.element&&(h.pop(),d=h[h.length-1]);h=d.element;d=d.index;Array.isArray(h)?h.push(g):d===c.length-2?(c=c.pop(),h[c]=g):c.push(g)}function gj(){gj.init.call(this)}function qH(g){if("function"!=typeof g)throw new TypeError('The "listener" argument must be of type Function. Received type '+
typeof g);}function xV(g,c,h,d){var k,n,b;if(qH(h),void 0===(n=g._events)?(n=g._events=Object.create(null),g._eventsCount=0):(void 0!==n.newListener&&(g.emit("newListener",c,h.listener?h.listener:h),n=g._events),b=n[c]),void 0===b)n[c]=h,++g._eventsCount;else if("function"==typeof b?b=n[c]=d?[h,b]:[b,h]:d?b.unshift(h):b.push(h),0<(k=void 0===g._maxListeners?gj.defaultMaxListeners:g._maxListeners)&&b.length>k&&!b.warned)b.warned=!0,h=Error("Possible EventEmitter memory leak detected. "+b.length+" "+
String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit"),h.name="MaxListenersExceededWarning",h.emitter=g,h.type=c,h.count=b.length,console&&console.warn&&console.warn(h);return g}function l8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yV(g,c,h){g={fired:!1,wrapFn:void 0,target:g,type:c,listener:h};c=l8.bind(g);return c.listener=
h,g.wrapFn=c,c}function zV(g,c,h){g=g._events;if(void 0===g)return[];c=g[c];if(void 0===c)h=[];else if("function"==typeof c)h=h?[c.listener||c]:[c];else if(h)for(h=Array(c.length),g=0;g<h.length;++g)h[g]=c[g].listener||c[g];else h=AV(c,c.length);return h}function BV(g){var c=this._events;if(void 0!==c){g=c[g];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function AV(g,c){for(var h=Array(c),d=0;d<c;++d)h[d]=g[d];return h}function cB(g){return g&&"object"===typeof g&&"default"in
g?g["default"]:g}function fx(){this._store={}}function qD(g){this._store=new fx;if(g&&Array.isArray(g))for(var c=0,h=g.length;c<h;c++)this.add(g[c])}function xl(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var h=[];var d=0;for(c=g.length;d<c;d++)h[d]=xl(g[d]);return h}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?
g=g.slice(0):(d=new ArrayBuffer(g.byteLength),h=new Uint8Array(d),g=new Uint8Array(g),h.set(g),g=d):(d=g.size,h=g.type,g="function"===typeof g.slice?g.slice(0,d,h):g.webkitSlice(0,d,h)),g;h=Object.getPrototypeOf(g);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&CV.call(h)==m8);if(!h)return g;h={};for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(c=xl(g[d]),"undefined"!==typeof c&&(h[d]=c));return h}function DV(g){var c=!1;return dB(function(h){if(c)throw Error("once called more than once");
c=!0;g.apply(this,h)})}function EV(g){return dB(function(c){c=xl(c);var h=this,d="function"===typeof c[c.length-1]?c.pop():!1,k=new Promise(function(n,b){var e;try{var l=DV(function(a,f){a?b(a):n(f)});c.push(l);(e=g.apply(h,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});d&&k.then(function(n){d(null,n)},d);return k})}function n8(g,c,h){if(g.constructor.listeners("debug").length){for(var d=["api",g.name,c],k=0;k<h.length-1;k++)d.push(h[k]);g.constructor.emit("debug",d);var n=h[h.length-1];h[h.length-
1]=function(b,e){var l=["api",g.name,c];l=l.concat(b?["error",b]:["success",e]);g.constructor.emit("debug",l);n(b,e)}}}function Tk(g,c){return EV(dB(function(h){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var d=this;n8(d,g,h);return this.taskqueue.isReady?c.apply(this,h):new Promise(function(k,n){d.taskqueue.addTask(function(b){b?n(b):k(d[g].apply(d,h))})})}))}function rD(g,c){for(var h={},d=0,k=c.length;d<
k;d++){var n=c[d];n in g&&(h[n]=g[n])}return h}function FV(g){return g}function o8(g){return[{ok:g}]}function GV(g,c,h){function d(){var r=[];f.forEach(function(u){u.docs.forEach(function(v){r.push({id:u.id,docs:[v]})})});h(null,{results:r})}function k(){if(!(q>=m.length)){var r=m.slice(q,Math.min(q+6,m.length));n(r,q);q+=r.length}}function n(r,u){r.forEach(function(v,y){var z=u+y;y=e.get(v);var B=rD(y[0],["atts_since","attachments"]);B.open_revs=y.map(function(G){return G.rev});B.open_revs=B.open_revs.filter(FV);
var C=FV;0===B.open_revs.length&&(delete B.open_revs,C=o8);["revs","attachments","binary","ajax","latest"].forEach(function(G){G in c&&(B[G]=c[G])});g.get(v,B,function(G,F){G=G?[{error:G}]:C(F);f[z]={id:v,docs:G};++a===l&&d();k()})})}var b=c.docs,e=new up;b.forEach(function(r){e.has(r.id)?e.get(r.id).push(r):e.set(r.id,[r])});var l=e.size,a=0,f=Array(l),m=[];e.forEach(function(r,u){m.push(u)});var q=0;k()}function p8(g){sD&&addEventListener("storage",function(c){g.emit(c.key)})}function eB(){Do.EventEmitter.call(this);
this._listeners={};p8(this)}function Jq(g){if("undefined"!==typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function q8(g){var c=0;g||(c=2E3);g=parseInt(g,10)||0;c=parseInt(c,10);c=c!==c||c<=g?(g||1)<<1:c+1;6E5<c&&(g=3E5,c=6E5);return~~((c-g)*Math.random()+g)}function JM(g,c){Jq("info","The above "+g+" is totally normal. "+c)}function vj(g,c,h){Error.call(this,h);this.status=g;this.name=c;this.message=h;this.error=!0}function Dh(g,
c){function h(d){for(var k in g)"function"!==typeof g[k]&&(this[k]=g[k]);void 0!==d&&(this.reason=d)}h.prototype=vj.prototype;return new h(c)}function fB(g){if("object"!==typeof g){var c=g;g=HV;g.data=c}"error"in g&&"conflict"===g.error&&(g.name="conflict",g.status=409);"name"in g||(g.name=g.error||"unknown");"status"in g||(g.status=500);"message"in g||(g.message=g.message||g.reason);return g}function KM(g){var c={},h=g.filter&&"function"===typeof g.filter;c.query=g.query_params;return function(d){d.doc||
(d.doc={});var k;if(k=h)try{k=!(0,g.filter)(d.doc,c)}catch(b){k=Dh(rH,"Filter function threw: "+b.toString())}if("object"===typeof k)return k;if(k)return!1;if(!g.include_docs)delete d.doc;else if(!g.attachments)for(var n in d.doc._attachments)d.doc._attachments.hasOwnProperty(n)&&(d.doc._attachments[n].stub=!0);return!0}}function sH(g){for(var c=[],h=0,d=g.length;h<d;h++)c=c.concat(g[h]);return c}function IV(g){var c;g?"string"!==typeof g?c=Dh(JV):/^_/.test(g)&&!/^_(design|local)/.test(g)&&(c=Dh(r8)):
c=Dh(s8);if(c)throw c;}function Lt(g){return"boolean"===typeof g._remote?g._remote:"function"===typeof g.type?(Jq("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===g.type()):!1}function LM(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function KV(g){return(g=LM(g))?g.join("/"):null}function LV(g){g=t8.exec(g);for(var c={},h=14;h--;){var d=MV[h],k=g[h]||"",n=-1!==["user","password"].indexOf(d);c[d]=n?decodeURIComponent(k):
k}c.queryKey={};c[MV[12]].replace(u8,function(b,e,l){e&&(c.queryKey[e]=l)});return c}function MM(g,c){var h=[],d=[],k;for(k in c)c.hasOwnProperty(k)&&(h.push(k),d.push(c[k]));h.push(g);return Function.apply(null,h).apply(null,d)}function tH(g,c,h){return new Promise(function(d,k){g.get(c,function(n,b){if(n){if(404!==n.status)return k(n);b={}}n=b._rev;b=h(b);if(!b)return d({updated:!1,rev:n});b._id=c;b._rev=n;d(v8(g,b,h))})})}function v8(g,c,h){return g.put(c).then(function(d){return{updated:!0,rev:d.rev}},
function(d){if(409!==d.status)throw d;return tH(g,c._id,h)})}function NM(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(k){if("TypeError"!==k.name)throw k;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),d=0;d<g.length;d+=1)h.append(g[d]);return h.getBlob(c.type)}}function OM(g,c){for(var h=g.length,d=new ArrayBuffer(h),k=new Uint8Array(d),n=0;n<h;n++)k[n]=g.charCodeAt(n);
return NM([d],{type:c})}function PM(g,c){return OM(atob(g),c)}function NV(g,c){var h=new FileReader,d="function"===typeof h.readAsBinaryString;h.onloadend=function(k){var n=k.target.result||"";if(d)return c(n);k="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)k+=String.fromCharCode(n[e]);c(k)};d?h.readAsBinaryString(g):h.readAsArrayBuffer(g)}function OV(g,c){NV(g,function(h){c(h)})}function QM(g,c){OV(g,function(h){c(btoa(h))})}function w8(g,c){var h=new FileReader;h.onloadend=function(d){d=
d.target.result||new ArrayBuffer(0);c(d)};h.readAsArrayBuffer(g)}function x8(g,c,h){return g.webkitSlice?g.webkitSlice(c,h):g.slice(c,h)}function y8(g,c,h,d,k){if(0<h||d<c.size)c=x8(c,h,d);w8(c,function(n){g.append(n);k()})}function z8(g,c,h,d,k){if(0<h||d<c.length)c=c.substring(h,d);g.appendBinary(c);k()}function RM(g,c){function h(){A8(k)}function d(){var q=f.end(!0);q=btoa(q);c(q);f.destroy()}function k(){var q=a*e,r=q+e;a++;a<l?m(f,g,q,r,h):m(f,g,q,r,d)}var n="string"===typeof g,b=n?g.length:
g.size,e=Math.min(32768,b),l=Math.ceil(b/e),a=0,f=n?new uH:new uH.ArrayBuffer,m=n?z8:y8;k()}function PV(g,c){g=xl(g);if(!c)return QV.v4().replace(/-/g,"").toLowerCase();delete g._rev_tree;return uH.hash(JSON.stringify(g))}function Vy(g){g=g.rev_tree.slice();for(var c;c=g.pop();){var h=c.ids,d=h[2];c=c.pos;if(d.length){h=0;for(var k=d.length;h<k;h++)g.push({pos:c+1,ids:d[h]})}else if(d=!!h[1].deleted,h=h[0],!n||(e!==d?e:b!==c?b<c:n<h)){var n=h;var b=c;var e=d}}return b+"-"+n}function Wy(g,c){g=g.slice();
for(var h;h=g.pop();){var d=h.pos,k=h.ids,n=k[2];h=c(0===n.length,d,k[0],h.ctx,k[1]);k=0;for(var b=n.length;k<b;k++)g.push({pos:d+1,ids:n[k],ctx:h})}}function B8(g,c){return g.pos-c.pos}function SM(g){var c=[];Wy(g,function(d,k,n,b,e){d&&c.push({rev:k+"-"+n,pos:k,opts:e})});c.sort(B8).reverse();g=0;for(var h=c.length;g<h;g++)delete c[g].pos;return c}function TM(g){var c=Vy(g);g=SM(g.rev_tree);for(var h=[],d=0,k=g.length;d<k;d++){var n=g[d];n.rev===c||n.opts.deleted||h.push(n.rev)}return h}function C8(g){var c=
[];Wy(g.rev_tree,function(h,d,k,n,b){"available"!==b.status||h||(c.push(d+"-"+k),b.status="missing")});return c}function RV(g){var c=[];g=g.slice();for(var h;h=g.pop();){var d=h.pos,k=h.ids,n=k[0],b=k[1];k=k[2];var e=0===k.length;h=h.history?h.history.slice():[];h.push({id:n,opts:b});e&&c.push({pos:d+1-h.length,ids:h});n=0;for(b=k.length;n<b;n++)g.push({pos:d+1,ids:k[n],history:h})}return c.reverse()}function D8(g,c){return g.pos-c.pos}function SV(g,c){for(var h,d,k=g.length;c<k;c++){var n=g[c];n=
[n.id,n.opts,[]];d?(d[2].push(n),d=n):h=d=n}return h}function E8(g,c){return g[0]<c[0]?-1:1}function TV(g,c){c=[{tree1:g,tree2:c}];for(var h=!1;0<c.length;){var d=c.pop(),k=d.tree1;d=d.tree2;if(k[1].status||d[1].status)k[1].status="available"===k[1].status||"available"===d[1].status?"available":"missing";for(var n=0;n<d[2].length;n++)if(k[2][0]){for(var b=!1,e=0;e<k[2].length;e++)k[2][e][0]===d[2][n][0]&&(c.push({tree1:k[2][e],tree2:d[2][n]}),b=!0);if(!b){h="new_branch";b=k[2];e=d[2][n];for(var l,
a=b,f=e,m=E8,q=0,r=a.length;q<r;)l=q+r>>>1,0>m(a[l],f)?q=l+1:r=l;b.splice(q,0,e)}}else h="new_leaf",k[2][0]=d[2][n]}return{conflicts:h,tree:g}}function UV(g,c,h){var d=[],k=!1,n=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,e=g.length;b<e;b++){var l=g[b];if(l.pos===c.pos&&l.ids[0]===c.ids[0])n=TV(l.ids,c.ids),d.push({pos:l.pos,ids:n.tree}),k=k||n.conflicts,n=!0;else if(!0!==h){var a=l.pos<c.pos?l:c,f=l.pos<c.pos?c:l,m=[],q=[];for(q.push({ids:a.ids,diff:f.pos-a.pos,parent:null,
parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===f.ids[0]&&m.push(r);else for(var u=r.ids[2],v=0,y=u.length;v<y;v++)q.push({ids:u[v],diff:r.diff-1,parent:r.ids,parentIdx:v})}(m=m[0])?(n=TV(m.ids,f.ids),m.parent[2][m.parentIdx]=n.tree,d.push({pos:a.pos,ids:a.ids}),k=k||n.conflicts,n=!0):d.push(l)}else d.push(l)}n||d.push(c);d.sort(D8);return{tree:d,conflicts:k||"internal_node"}}function F8(g,c){g=RV(g);for(var h,d,k=0,n=g.length;k<n;k++){var b=g[k],e=b.ids;if(e.length>c){h||(h=
{});var l=e.length-c;var a={pos:b.pos+l,ids:SV(e,l)};for(var f=0;f<l;f++)h[b.pos+f+"-"+e[f].id]=!0}else a={pos:b.pos,ids:SV(e,0)};d=d?UV(d,a,!0).tree:[a]}h&&Wy(d,function(m,q,r){delete h[q+"-"+r]});return{tree:d,revs:h?Object.keys(h):[]}}function VV(g,c,h){g=UV(g,c);h=F8(g.tree,h);return{tree:h.tree,stemmedRevs:h.revs,conflicts:g.conflicts}}function G8(g){return g.ids}function Ev(g,c){c||(c=Vy(g));c=c.substring(c.indexOf("-")+1);g=g.rev_tree.map(G8);for(var h;h=g.pop();){if(h[0]===c)return!!h[1].deleted;
g=g.concat(h[2])}}function Xy(g){return/^_local/.test(g)}function H8(g,c){for(var h=c.rev_tree.slice(),d;d=h.pop();){var k=d.pos,n=d.ids,b=n[0],e=n[1];n=n[2];var l=0===n.length;d=d.history?d.history.slice():[];d.push({id:b,pos:k,opts:e});if(l)for(e=0,l=d.length;e<l;e++){var a=d[e];if(a.pos+"-"+a.id===g)return k+"-"+b}b=0;for(e=n.length;b<e;b++)h.push({pos:k+1,ids:n[b],history:d})}throw Error("Unable to resolve latest revision for id "+c.id+", rev "+g);}function tD(g,c,h){function d(){k.cancel()}Do.EventEmitter.call(this);
var k=this;this.db=g;c=c?xl(c):{};var n=c.complete=DV(function(e,l){e?(l=k,0<("listenerCount"in l?l.listenerCount("error"):Do.EventEmitter.listenerCount(l,"error"))&&k.emit("error",e)):k.emit("complete",l);k.removeAllListeners();g.removeListener("destroyed",d)});h&&(k.on("complete",function(e){h(null,e)}),k.on("error",h));g.once("destroyed",d);c.onChange=function(e,l,a){if(!k.isCancelled)try{k.emit("change",e,l,a)}catch(f){Jq("error",'Error in .on("change", function):',f)}};var b=new Promise(function(e,
l){c.complete=function(a,f){a?l(a):e(f)}});k.once("cancel",function(){g.removeListener("destroyed",d);c.complete(null,{status:"cancelled"})});this.then=b.then.bind(b);this["catch"]=b["catch"].bind(b);this.then(function(e){n(null,e)},n);g.taskqueue.isReady?k.validateChanges(c):g.taskqueue.addTask(function(e){e?c.complete(e):k.isCancelled?k.emit("cancel"):k.validateChanges(c)})}function I8(g,c,h){var d=[{rev:g._rev}];"all_docs"===h.style&&(d=SM(c.rev_tree).map(function(k){return{rev:k.rev}}));d={id:c.id,
changes:d,doc:g};Ev(c,g._rev)&&(d.deleted=!0);h.conflicts&&(d.doc._conflicts=TM(c),d.doc._conflicts.length||delete d.doc._conflicts);return d}function UM(g,c){return function(h,d){h||d[0]&&d[0].error?(h=h||d[0],h.docId=c,g(h)):g(null,d.length?d[0]:d)}}function J8(g){for(var c=0;c<g.length;c++){var h=g[c];if(h._deleted)delete h._attachments;else if(h._attachments)for(var d=Object.keys(h._attachments),k=0;k<d.length;k++){var n=d[k];h._attachments[n]=rD(h._attachments[n],"data digest content_type length revpos stub".split(" "))}}}
function K8(g,c){var h=g._id;var d=c._id;h=h<d?-1:h>d?1:0;if(0!==h)return h;g=g._revisions?g._revisions.start:0;c=c._revisions?c._revisions.start:0;return g<c?-1:g>c?1:0}function L8(g){var c={},h=[];Wy(g,function(d,k,n,b){k=k+"-"+n;d&&(c[k]=0);void 0!==b&&h.push({from:b,to:k});return k});h.reverse();h.forEach(function(d){c[d.from]=void 0===c[d.from]?1+c[d.to]:Math.min(c[d.from],1+c[d.to])});return c}function M8(g){var c="limit"in g?g.keys.slice(g.skip,g.limit+g.skip):0<g.skip?g.keys.slice(g.skip):
g.keys;g.keys=c;g.skip=0;delete g.limit;g.descending&&(c.reverse(),g.descending=!1)}function WV(g){var c=g._compactionQueue[0],h=c.opts,d=c.callback;g.get("_local/compaction").catch(function(){return!1}).then(function(k){k&&k.last_seq&&(h.last_seq=k.last_seq);g._compact(h,function(n,b){n?d(n):d(null,b);Mt(function(){g._compactionQueue.shift();g._compactionQueue.length&&WV(g)})})})}function Pj(){Do.EventEmitter.call(this);for(var g in Pj.prototype)"function"===typeof this[g]&&(this[g]=this[g].bind(this))}
function uD(){this.failed=this.isReady=!1;this.queue=[]}function N8(g,c){var h=g.match(/([a-z-]*):\/\/(.*)/);if(h)return{name:/https?/.test(h[1])?h[1]+"://"+h[2]:h[2],adapter:h[1]};var d=yh.adapters,k=yh.preferredAdapters;h=yh.prefix;c=c.adapter;if(!c)for(var n=0;n<k.length;++n)if(c=k[n],"idb"===c&&"websql"in d&&sD&&localStorage["_pouch__websqldb_"+h+g])Jq("log",'PouchDB is downgrading "'+g+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');else break;d=d[c];return{name:(d&&
"use_prefix"in d?d.use_prefix:1)?h+g:g,adapter:c}}function O8(g){function c(d){g.removeListener("closed",h);d||g.constructor.emit("destroyed",g.name)}function h(){g.removeListener("destroyed",c);g.constructor.emit("unref",g)}g.once("destroyed",c);g.once("closed",h);g.constructor.emit("ref",g)}function yh(g,c){if(!(this instanceof yh))return new yh(g,c);var h=this;c=c||{};g&&"object"===typeof g&&(c=g,g=c.name,delete c.name);void 0===c.deterministic_revs&&(c.deterministic_revs=!0);this.__opts=c=xl(c);
h.auto_compaction=c.auto_compaction;h.prefix=yh.prefix;if("string"!==typeof g)throw Error("Missing/invalid DB name");var d=N8((c.prefix||"")+g,c);c.name=d.name;c.adapter=c.adapter||d.adapter;h.name=g;h._adapter=c.adapter;yh.emit("debug",["adapter","Picked adapter: ",c.adapter]);if(!yh.adapters[c.adapter]||!yh.adapters[c.adapter].valid())throw Error("Invalid Adapter: "+c.adapter);Pj.call(h);h.taskqueue=new uD;h.adapter=c.adapter;yh.adapters[c.adapter].call(h,c,function(k){if(k)return h.taskqueue.fail(k);
O8(h);h.emit("created",h);yh.emit("created",h.name);h.taskqueue.ready(h)})}function XV(g,c){for(var h=0,d=c.length;h<d&&(g=g[c[h]],g);h++);return g}function YV(g){for(var c=[],h="",d=0,k=g.length;d<k;d++){var n=g[d];"."===n?0<d&&"\\"===g[d-1]?h=h.substring(0,h.length-1)+".":(c.push(h),h=""):h+=n}c.push(h);return c}function P8(g){return g[Object.keys(g)[0]]}function vD(g){var c={};g.forEach(function(h){Object.keys(h).forEach(function(d){var k=h[d];"object"!==typeof k&&(k={$eq:k});if(-1<ZV.indexOf(d))c[d]=
k instanceof Array?k.map(function(b){return vD([b])}):vD([k]);else{var n=c[d]=c[d]||{};Object.keys(k).forEach(function(b){var e=k[b];"$gt"===b||"$gte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$gte?"$gte"===b?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):"undefined"!==typeof n.$gt?"$gte"===b?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[b]=e):"$lt"===b||"$lte"===b?"undefined"===typeof n.$eq&&("undefined"!==typeof n.$lte?"$lte"===b?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,
n.$lt=e):"undefined"!==typeof n.$lt?"$lte"===b?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[b]=e):"$ne"===b?"$ne"in n?n.$ne.push(e):n.$ne=[e]:"$eq"===b?(delete n.$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,n.$eq=e):n[b]=e})}})});return c}function $V(g){for(var c in g){if(Array.isArray(g))for(var h in g)g[h].$and&&(g[h]=vD(g[h].$and));var d=g[c];"object"===typeof d&&$V(d)}return g}function aW(g,c){for(var h in g){"$and"===h&&(c=!0);var d=g[h];"object"===typeof d&&(c=aW(d,c))}return c}
function Q8(g){var c=xl(g);g=!1;aW(c,!1)&&(c=$V(c),"$and"in c&&(c=vD(c.$and)),g=!0);["$or","$nor"].forEach(function(b){b in c&&c[b].forEach(function(e){for(var l=Object.keys(e),a=0;a<l.length;a++){var f=l[a],m=e[f];if("object"!==typeof m||null===m)e[f]={$eq:m}}})});"$not"in c&&(c.$not=vD([c.$not]));for(var h=Object.keys(c),d=0;d<h.length;d++){var k=h[d],n=c[k];"object"!==typeof n||null===n?n={$eq:n}:"$ne"in n&&!g&&(n.$ne=[n.$ne]);c[k]=n}return c}function am(g,c){if(g===c)return 0;g=Yy(g);c=Yy(c);
var h=VM(g),d=VM(c);if(0!==h-d)return h-d;switch(typeof g){case "number":return g-c;case "boolean":return g<c?-1:1;case "string":return g===c?0:g>c?1:-1}if(Array.isArray(g))a:{h=Math.min(g.length,c.length);for(d=0;d<h;d++){var k=am(g[d],c[d]);if(0!==k){g=k;break a}}g=g.length===c.length?0:g.length>c.length?1:-1}else a:{h=Object.keys(g);d=Object.keys(c);k=Math.min(h.length,d.length);for(var n=0;n<k;n++){var b=am(h[n],d[n]);if(0!==b){g=b;break a}b=am(g[h[n]],c[d[n]]);if(0!==b){g=b;break a}}g=h.length===
d.length?0:h.length>d.length?1:-1}return g}function Yy(g){switch(typeof g){case "undefined":return null;case "number":if(Infinity===g||-Infinity===g||isNaN(g))return null;break;case "object":var c=g;if(Array.isArray(g)){var h=g.length;g=Array(h);for(var d=0;d<h;d++)g[d]=Yy(c[d])}else{if(g instanceof Date)return g.toJSON();if(null!==g)for(h in g={},c)c.hasOwnProperty(h)&&(d=c[h],"undefined"!==typeof d&&(g[h]=Yy(d)))}}return g}function R8(g){if(null!==g)switch(typeof g){case "boolean":return g?1:0;
case "number":if(0===g)g="1";else{var c=g.toExponential().split(/e\+?/),h=parseInt(c[1],10);g=0>g;h=((g?-h:h)- -324).toString();for(var d="",k=3-h.length;d.length<k;)d+="0";h=(g?"0":"2")+(""+(d+h));c=Math.abs(parseFloat(c[0]));g&&(c=10-c);g=c.toFixed(20);g=g.replace(/\.?0+$/,"");g=h+=""+g}return g;case "string":return g.replace(/\u0002/g,"\u0002\u0002").replace(/\u0001/g,"\u0001\u0002").replace(/\u0000/g,"\u0001\u0001");case "object":var n=Array.isArray(g);c=n?g:Object.keys(g);h=-1;d=c.length;k="";
if(n)for(;++h<d;)k+=ds(c[h]);else for(;++h<d;)n=c[h],k+=ds(n)+ds(g[n]);return k}return""}function ds(g){g=Yy(g);return VM(g)+""+R8(g)+"\x00"}function VM(g){var c=["boolean","number","string","object"].indexOf(typeof g);if(~c)return null===g?1:Array.isArray(g)?5:3>c?c+2:c+3;if(Array.isArray(g))return 5}function S8(g){function c(h){return g.map(function(d){d=Object.keys(d)[0];d=YV(d);return XV(h,d)})}return function(h,d){var k=c(h.doc),n=c(d.doc);k=am(k,n);if(0!==k)return k;h=h.doc._id;d=d.doc._id;
return h<d?-1:h>d?1:0}}function T8(g,c,h){g=g.filter(function(k){return gB(k.doc,c.selector,h)});if(c.sort){var d=S8(c.sort);g=g.sort(d);"string"!==typeof c.sort[0]&&"desc"===P8(c.sort[0])&&(g=g.reverse())}if("limit"in c||"skip"in c)d=c.skip||0,g=g.slice(d,("limit"in c?c.limit:g.length)+d);return g}function gB(g,c,h){return h.every(function(d){var k=c[d],n=YV(d),b=XV(g,n);return-1<ZV.indexOf(d)?U8(d,k,g):WM(k,g,n,b)})}function WM(g,c,h,d){return g?"object"===typeof g?Object.keys(g).every(function(k){var n=
g[k];if(!bW[k])throw Error('unknown operator "'+k+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return bW[k](c,n,h,d)}):g===d:!0}function U8(g,c,h){return"$or"===g?c.some(function(d){return gB(h,d,Object.keys(d))}):"$not"===g?!gB(h,c,Object.keys(c)):!c.find(function(d){return gB(h,d,Object.keys(d))})}function wD(g){return"undefined"!==typeof g&&null!==g}function Zy(g){return"undefined"!==typeof g}function cW(g,
c){return c.some(function(h){return g instanceof Array?-1<g.indexOf(h):g===h})}function V8(g,c){return c.every(function(h){return-1<g.indexOf(h)})}function W8(g,c){switch(c){case "null":return null===g;case "boolean":return"boolean"===typeof g;case "number":return"number"===typeof g;case "string":return"string"===typeof g;case "array":return g instanceof Array;case "object":return"[object Object]"==={}.toString.call(g)}throw Error(c+" not supported as a type.Please use one of object, string, array, number, boolean or null.");
}function X8(g,c){if(g.selector&&g.filter&&"_selector"!==g.filter)return c(Error('selector invalid for filter "'+("string"===typeof g.filter?g.filter:"function")+'"'));c()}function Y8(g){g.view&&!g.filter&&(g.filter="_view");g.selector&&!g.filter&&(g.filter="_selector");g.filter&&"string"===typeof g.filter&&("_view"===g.filter?g.view=KV(g.view):g.filter=KV(g.filter))}function Z8(g,c){return c.filter&&"string"===typeof c.filter&&!c.doc_ids&&!Lt(g.db)}function $8(g,c){var h=c.complete;if("_view"===
c.filter){if(!c.view||"string"!==typeof c.view){var d=Dh(rH,"`view` filter parameter not found or invalid.");return h(d)}var k=LM(c.view);g.db.get("_design/"+k[0],function(b,e){if(g.isCancelled)return h(null,{status:"cancelled"});if(b)return h(fB(b));b=e&&e.views&&e.views[k[1]]&&e.views[k[1]].map;if(!b)return h(Dh(es,e.views?"missing json key: "+k[1]:"missing json key: views"));e=['return function(doc) {\n  "use strict";\n  var emitted = false;\n  var emit = function (a, b) {\n    emitted = true;\n  };',
"  var view = "+b+";","  view(doc);\n  if (emitted) {\n    return true;\n  }\n};"].join("\n");e=MM(e,{});c.filter=e;g.doChanges(c)})}else if(c.selector)c.filter=function(b){var e=c.selector;if("object"!==typeof e)throw Error("Selector error: expected a JSON object");e=Q8(e);return(b=T8([{doc:b}],{selector:e},Object.keys(e)))&&1===b.length},g.doChanges(c);else{var n=LM(c.filter);g.db.get("_design/"+n[0],function(b,e){if(g.isCancelled)return h(null,{status:"cancelled"});if(b)return h(fB(b));b=e&&e.filters&&
e.filters[n[1]];if(!b)return h(Dh(es,e&&e.filters?"missing json key: "+n[1]:"missing json key: filters"));c.filter=MM('"use strict";\nreturn '+b+";",{});g.doChanges(c)})}}function dW(g){return g.reduce(function(c,h){c[h]=!0;return c},{})}function eW(g){if(!/^\d+-/.test(g))return Dh(fW);var c=g.indexOf("-"),h=g.substring(0,c);g=g.substring(c+1);return{prefix:parseInt(h,10),id:g}}function gW(g,c,h){h||(h={deterministic_revs:!0});var d={status:"available"};g._deleted&&(d.deleted=!0);if(c){g._id||(g._id=
vH());var k=PV(g,h.deterministic_revs);if(g._rev){c=eW(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[k,d,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[k,d,[]]}],n=1}else{if(g._revisions){k=g._revisions;n=k.start-k.ids.length+1;k=k.ids;c=[k[0],d,[]];h=1;for(var b=k.length;h<b;h++)c=[k[h],{status:"missing"},[c]];g._rev_tree=[{pos:n,ids:c}];n=g._revisions.start;k=g._revisions.ids[0]}if(!g._rev_tree){c=eW(g._rev);if(c.error)return c;n=c.prefix;k=c.id;g._rev_tree=
[{pos:n,ids:[k,d,[]]}]}}IV(g._id);g._rev=n+"-"+k;d={metadata:{},data:{}};for(var e in g)if(Object.prototype.hasOwnProperty.call(g,e)){if((n="_"===e[0])&&!a9[e])throw g=Dh(hW,e),g.message=hW.message+": "+e,g;n&&!b9[e]?d.metadata[e.slice(1)]=g[e]:d.data[e]=g[e]}return d}function c9(g,c,h){try{var d=atob(g.data)}catch(k){d={error:Dh(iW,"Attachment is not a valid base64 string")}}if(d.error)return h(d.error);g.length=d.length;g.data="blob"===c?OM(d,g.content_type):"base64"===c?btoa(d):d;RM(d,function(k){g.digest=
"md5-"+k;h()})}function d9(g,c,h){RM(g.data,function(d){g.digest="md5-"+d;g.length=g.data.size||g.data.length||0;"binary"===c?OV(g.data,function(k){g.data=k;h()}):"base64"===c?QM(g.data,function(k){g.data=k;h()}):h()})}function e9(g,c,h){if(g.stub)return h();"string"===typeof g.data?c9(g,c,h):d9(g,c,h)}function f9(g,c,h){function d(){k++;g.length===k&&(n?h(n):h())}if(!g.length)return h();var k=0,n;g.forEach(function(b){function e(m){n=m;a++;a===l.length&&d()}var l=b.data&&b.data._attachments?Object.keys(b.data._attachments):
[],a=0;if(!l.length)return d();for(var f in b.data._attachments)b.data._attachments.hasOwnProperty(f)&&e9(b.data._attachments[f],c,e)})}function g9(g,c,h,d,k,n,b,e,l){g=g||1E3;var a=e.new_edits,f=new up,m=0,q=c.length;c.forEach(function(r,u){if(r._id&&Xy(r._id))h[r._deleted?"_removeLocal":"_putLocal"](r,{ctx:k},function(y,z){n[u]=y||z;++m===q&&l&&l()});else{var v=r.metadata.id;f.has(v)?(q--,f.get(v).push([r,u])):f.set(v,[[r,u]])}});f.forEach(function(r,u){function v(){++z<r.length?y():++m===q&&l&&
l()}function y(){var B=r[z],C=B[0];B=B[1];if(d.has(u)){var G=g,F=d.get(u);b:{var N=C.metadata.rev;var L=F.rev_tree.slice();var S=N.split("-");N=parseInt(S[0],10);S=S[1];for(var ha;ha=L.pop();){if(ha.pos===N&&ha.ids[0]===S){L=!0;break b}for(var qa=ha.ids[2],D=0,P=qa.length;D<P;D++)L.push({pos:ha.pos+1,ids:qa[D]})}L=!1}L&&!a?(n[B]=C,v()):(S=F.winningRev||Vy(F),L="deleted"in F?F.deleted:Ev(F,S),N="deleted"in C.metadata?C.metadata.deleted:Ev(C.metadata),ha=/^1-/.test(C.metadata.rev),L&&!N&&a&&ha&&(ha=
C.data,ha._rev=S,ha._id=C.metadata.id,C=gW(ha,a)),S=VV(F.rev_tree,C.metadata.rev_tree[0],G),a&&(L&&N&&"new_leaf"!==S.conflicts||!L&&"new_leaf"!==S.conflicts||L&&!N&&"new_branch"===S.conflicts)?(C=Dh(hB),n[B]=C,v()):(G=C.metadata.rev,C.metadata.rev_tree=S.tree,C.stemmedRevs=S.stemmedRevs||[],F.rev_map&&(C.metadata.rev_map=F.rev_map),F=Vy(C.metadata),N=Ev(C.metadata,F),L=L===N?0:L<N?-1:1,G=G===F?N:Ev(C.metadata,G),b(C,F,N,G,!0,L,B,v)))}else F=VV([],C.metadata.rev_tree[0],g),C.metadata.rev_tree=F.tree,
C.stemmedRevs=F.stemmedRevs||[],F=Vy(C.metadata),G=Ev(C.metadata,F),"was_delete"in e&&G?(n[B]=Dh(es,"deleted"),v()):a&&"missing"===C.metadata.rev_tree[0].ids[1].status?(C=Dh(hB),n[B]=C,v()):b(C,F,G,G,!1,G?0:1,B,v)}var z=0;y()})}function Nt(g){return function(c){var h="unknown_error";c.target&&c.target.error&&(h=c.target.error.name||c.target.error.message);g(Dh(XM,h,c.type))}}function YM(g,c,h){try{var d=JSON.stringify(g)}catch(k){d=jW.stringify(g)}return{data:d,winningRev:c,deletedOrLocal:h?"1":"0",
seq:g.seq,id:g.id}}function $y(g){if(!g)return null;var c=g.data;try{var h=JSON.parse(c)}catch(d){h=jW.parse(c)}h.winningRev=g.winningRev;h.deleted="1"===g.deletedOrLocal;h.seq=g.seq;return h}function wH(g){if(!g)return g;var c=g._doc_id_rev.lastIndexOf(":");g._id=g._doc_id_rev.substring(0,c-1);g._rev=g._doc_id_rev.substring(c+1);delete g._doc_id_rev;return g}function kW(g,c,h,d){h?g?"string"!==typeof g?d(g):d(PM(g,c)):d(NM([""],{type:c})):g?"string"!==typeof g?NV(g,function(k){d(btoa(k))}):d(g):
d("")}function lW(g,c,h,d){function k(e,l){var a=e._attachments[l];e=a.digest;h.objectStore("attach-store").get(e).onsuccess=function(f){a.body=f.target.result.body;++b===n.length&&d&&d()}}var n=Object.keys(g._attachments||{});if(!n.length)return d&&d();var b=0;n.forEach(function(e){c.attachments&&c.include_docs?k(g,e):(g._attachments[e].stub=!0,++b===n.length&&d&&d())})}function ZM(g,c){return Promise.all(g.map(function(h){if(h.doc&&h.doc._attachments){var d=Object.keys(h.doc._attachments);return Promise.all(d.map(function(k){var n=
h.doc._attachments[k];if("body"in n){var b=n.body,e=n.content_type;return new Promise(function(l){kW(b,e,c,function(a){h.doc._attachments[k]=iB(rD(n,["digest","content_type"]),{data:a});l()})})}}))}}))}function mW(g,c,h){function d(){k.length&&k.forEach(function(a){e.index("digestSeq").count(IDBKeyRange.bound(a+"::",a+"::\uffff",!1,!1)).onsuccess=function(f){f.target.result||b.delete(a)}})}var k=[],n=h.objectStore("by-sequence"),b=h.objectStore("attach-store"),e=h.objectStore("attach-seq-store"),
l=g.length;g.forEach(function(a){n.index("_doc_id_rev").getKey(c+"::"+a).onsuccess=function(f){f=f.target.result;"number"!==typeof f?(l--,l||d()):(n.delete(f),e.index("seq").openCursor(IDBKeyRange.only(f)).onsuccess=function(m){if(m=m.target.result){var q=m.value.digestSeq.split("::")[0];k.push(q);e.delete(m.primaryKey);m.continue()}else l--,l||d()})}})}function fs(g,c,h){try{return{txn:g.transaction(c,h)}}catch(d){return{error:d}}}function h9(g,c,h,d,k,n){function b(){var gb=fs(k,"document-store by-sequence attach-store local-store attach-seq-store meta-store".split(" "),
"readwrite");if(gb.error)return n(gb.error);G=gb.txn;G.onabort=Nt(n);G.ontimeout=Nt(n);G.oncomplete=m;F=G.objectStore("document-store");N=G.objectStore("by-sequence");L=G.objectStore("attach-store");S=G.objectStore("attach-seq-store");ha=G.objectStore("meta-store");ha.get("meta-store").onsuccess=function(ea){D=ea.target.result;a()};r(function(ea){if(ea)return Ra=!0,n(ea);f()})}function e(){M=!0;a()}function l(){g9(g.revs_limit,C,d,fa,G,T,u,h,e)}function a(){D&&M&&(D.docCount+=X,ha.put(D))}function f(){function gb(ob){(ob=
$y(ob.target.result))&&fa.set(ob.id,ob);++ea===C.length&&l()}if(C.length)for(var ea=0,aa=0,ia=C.length;aa<ia;aa++){var Aa=C[aa];Aa._id&&Xy(Aa._id)?++ea===C.length&&l():F.get(Aa.metadata.id).onsuccess=gb}}function m(){Ra||(xD.notify(d._meta.name),n(null,T))}function q(gb,ea){L.get(gb).onsuccess=function(aa){aa.target.result?ea():(aa=Dh(i9,"unknown stub attachment with digest "+gb),aa.status=412,ea(aa))}}function r(gb){var ea=[];C.forEach(function(Aa){Aa.data&&Aa.data._attachments&&Object.keys(Aa.data._attachments).forEach(function(ob){ob=
Aa.data._attachments[ob];ob.stub&&ea.push(ob.digest)})});if(!ea.length)return gb();var aa=0,ia;ea.forEach(function(Aa){q(Aa,function(ob){ob&&!ia&&(ia=ob);++aa===ea.length&&gb(ia)})})}function u(gb,ea,aa,ia,Aa,ob,Nb,Ab){gb.metadata.winningRev=ea;gb.metadata.deleted=aa;var Kb=gb.data;Kb._id=gb.metadata.id;Kb._rev=gb.metadata.rev;ia&&(Kb._deleted=!0);if(Kb._attachments&&Object.keys(Kb._attachments).length)return y(gb,ea,aa,Aa,Nb,Ab);X+=ob;a();v(gb,ea,aa,Aa,Nb,Ab)}function v(gb,ea,aa,ia,Aa,ob){function Nb(Gc){var Yc=
gb.stemmedRevs||[];ia&&d.auto_compaction&&(Yc=Yc.concat(C8(gb.metadata)));Yc&&Yc.length&&mW(Yc,gb.metadata.id,G);jc.seq=Gc.target.result;Gc=YM(jc,ea,aa);F.put(Gc).onsuccess=Ab}function Ab(){T[Aa]={ok:!0,id:jc.id,rev:jc.rev};fa.set(gb.metadata.id,gb.metadata);z(gb,jc.seq,ob)}var Kb=gb.data,jc=gb.metadata;Kb._doc_id_rev=jc.id+"::"+jc.rev;delete Kb._id;delete Kb._rev;var ub=N.put(Kb);ub.onsuccess=Nb;ub.onerror=function(Gc){Gc.preventDefault();Gc.stopPropagation();N.index("_doc_id_rev").getKey(Kb._doc_id_rev).onsuccess=
function(Yc){N.put(Kb,Yc.target.result).onsuccess=Nb}}}function y(gb,ea,aa,ia,Aa,ob){function Nb(){Kb===jc.length&&v(gb,ea,aa,ia,Aa,ob)}function Ab(){Kb++;Nb()}var Kb=0,jc=Object.keys(gb.data._attachments);jc.forEach(function(ub){ub=gb.data._attachments[ub];if(ub.stub)Kb++,Nb();else{var Gc=ub.data;delete ub.data;ub.revpos=parseInt(ea,10);B(ub.digest,Gc,Ab)}})}function z(gb,ea,aa){function ia(){++ob===Nb.length&&aa()}function Aa(Kb){Kb=S.put({seq:ea,digestSeq:gb.data._attachments[Kb].digest+"::"+ea});
Kb.onsuccess=ia;Kb.onerror=function(jc){jc.preventDefault();jc.stopPropagation();ia()}}var ob=0,Nb=Object.keys(gb.data._attachments||{});if(!Nb.length)return aa();for(var Ab=0;Ab<Nb.length;Ab++)Aa(Nb[Ab])}function B(gb,ea,aa){L.count(gb).onsuccess=function(ia){if(ia.target.result)return aa();L.put({digest:gb,body:ea}).onsuccess=aa}}var C=c.docs,G,F,N,L,S,ha,qa,D;c=0;for(var P=C.length;c<P;c++){var J=C[c];J._id&&Xy(J._id)||(J=C[c]=gW(J,h.new_edits,g),J.error&&!qa&&(qa=J))}if(qa)return n(qa);var M=
!1,X=0,T=Array(C.length),fa=new up,Ra=!1;f9(C,d._meta.blobSupport?"blob":"base64",function(gb){if(gb)return n(gb);b()})}function nW(g,c,h,d,k){function n(q){f=q.target.result;a&&k(a,f,m)}function b(q){a=q.target.result;f&&k(a,f,m)}function e(){if(!a.length)return k();var q=a[a.length-1];if(c&&c.upper)try{var r=IDBKeyRange.bound(q,c.upper,!0,c.upperOpen)}catch(u){if("DataError"===u.name&&0===u.code)return k()}else r=IDBKeyRange.lowerBound(q,!0);c=r;f=a=null;g.getAll(c,d).onsuccess=n;g.getAllKeys(c,
d).onsuccess=b}function l(q){q=q.target.result;if(!q)return k();k([q.key],[q.value],q)}-1===d&&(d=1E3);var a,f;if("function"===typeof g.getAll&&"function"===typeof g.getAllKeys&&1<d&&!h){var m={"continue":e};g.getAll(c,d).onsuccess=n;g.getAllKeys(c,d).onsuccess=b}else h?g.openCursor(c,"prev").onsuccess=l:g.openCursor(c).onsuccess=l}function j9(g,c,h){if("function"===typeof g.getAll)g.getAll(c).onsuccess=h;else{var d=[];g.openCursor(c).onsuccess=function(k){(k=k.target.result)?(d.push(k.value),k.continue()):
h({target:{result:d}})}}}function k9(g,c,h){var d=Array(g.length),k=0;g.forEach(function(n,b){c.get(n).onsuccess=function(e){d[b]=e.target.result?e.target.result:{key:n,error:"not_found"};k++;k===g.length&&h(g,d,{})}})}function l9(g,c,h,d,k){try{if(g&&c)return k?IDBKeyRange.bound(c,g,!h,!1):IDBKeyRange.bound(g,c,!1,!h);if(g)return k?IDBKeyRange.upperBound(g):IDBKeyRange.lowerBound(g);if(c)return k?IDBKeyRange.lowerBound(c,!h):IDBKeyRange.upperBound(c,!h);if(d)return IDBKeyRange.only(d)}catch(n){return{error:n}}return null}
function m9(g,c,h){function d(L,S){L.openCursor(null,"prev").onsuccess=function(ha){ha=ha.target.result;var qa=void 0;ha&&ha.key&&(qa=ha.key);return S({target:{result:[qa]}})}}function k(L,S,ha){C.get(L.id+"::"+ha).onsuccess=function(qa){S.doc=wH(qa.target.result)||{};g.conflicts&&(qa=TM(L),qa.length&&(S.doc._conflicts=qa));lW(S.doc,g,B)}}function n(L){for(var S=0,ha=L.length;S<ha&&G.length!==u;S++){var qa=L[S];if(qa.error&&q)G.push(qa);else{var D=$y(qa);qa=D.winningRev;var P={id:D.id,key:D.id,value:{rev:qa}};
D.deleted?q&&(G.push(P),P.value.deleted=!0,P.doc=null):0>=r--&&(G.push(P),g.include_docs&&k(D,P,qa))}}}function b(L,S,ha){ha&&(n(S),G.length<u&&ha.continue())}function e(L){L=L.target.result;g.descending&&(L=L.reverse());n(L)}function l(){var L={total_rows:F,offset:g.skip,rows:G};g.update_seq&&void 0!==N&&(L.update_seq=N);h(null,L)}var a="startkey"in g?g.startkey:!1,f="endkey"in g?g.endkey:!1,m="key"in g?g.key:!1,q="keys"in g?g.keys:!1,r=g.skip||0,u="number"===typeof g.limit?g.limit:-1,v=!1!==g.inclusive_end,
y,z;if(!q&&(z=(y=l9(a,f,v,m,g.descending))&&y.error)&&("DataError"!==z.name||0!==z.code))return h(Dh(XM,z.name,z.message));a=["document-store","by-sequence","meta-store"];g.attachments&&a.push("attach-store");c=fs(c,a,"readonly");if(c.error)return h(c.error);var B=c.txn;B.oncomplete=function(){g.attachments?ZM(G,g.binary).then(l):l()};B.onabort=Nt(h);c=B.objectStore("document-store");a=B.objectStore("by-sequence");f=B.objectStore("meta-store");var C=a.index("_doc_id_rev"),G=[],F,N;f.get("meta-store").onsuccess=
function(L){F=L.target.result.docCount};g.update_seq&&d(a,function(L){L.target.result&&0<L.target.result.length&&(N=L.target.result[0])});if(!z&&0!==u){if(q)return k9(g.keys,c,b);if(-1===u)return j9(c,y,e);nW(c,y,g.descending,u+r,b)}}function n9(g){return(new Promise(function(c){var h=NM([""]);h=g.objectStore("detect-blob-support").put(h,"key");h.onsuccess=function(){var d=navigator.userAgent.match(/Chrome\/(\d+)/),k=navigator.userAgent.match(/Edge\//);c(k||!d||43<=parseInt(d[1],10))};h.onerror=g.onabort=
function(d){d.preventDefault();d.stopPropagation();c(!1)}})).catch(function(){return!1})}function o9(g,c){g.objectStore("document-store").index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(h){c(h.target.result)}}function p9(g,c,h,d){try{g(c,h)}catch(k){d.emit("error",k)}}function oW(){!$M&&aN.length&&($M=!0,aN.shift()())}function q9(g,c,h){aN.push(function(){g(function(d,k){p9(c,d,k,h);$M=!1;Mt(function(){oW()})})});oW()}function r9(g,c,h,d){function k(B,C,G,F){if(G.seq!==C)return F();
if(G.winningRev===B._rev)return F(G,B);z.get(B._id+"::"+G.winningRev).onsuccess=function(N){F(G,wH(N.target.result))}}function n(B,C,G){if(l&&!l.has(B._id))return G();var F=u.get(B._id);if(F)return k(B,C,F,G);y.get(B._id).onsuccess=function(N){F=$y(N.target.result);u.set(B._id,F);k(B,C,F,G)}}function b(){g.complete(null,{results:m,last_seq:a})}g=xl(g);if(g.continuous){var e=h+":"+vH();xD.addListener(h,e,c,g);xD.notify(h);return{cancel:function(){xD.removeListener(h,e)}}}var l=g.doc_ids&&new yD(g.doc_ids);
g.since=g.since||0;var a=g.since,f="limit"in g?g.limit:-1;0===f&&(f=1);var m=[],q=0,r=KM(g),u=new up;c=["document-store","by-sequence"];g.attachments&&c.push("attach-store");d=fs(d,c,"readonly");if(d.error)return g.complete(d.error);var v=d.txn;v.onabort=Nt(g.complete);v.oncomplete=function(){!g.continuous&&g.attachments?ZM(m).then(b):b()};d=v.objectStore("by-sequence");var y=v.objectStore("document-store");var z=d.index("_doc_id_rev");c=g.since&&!g.descending?IDBKeyRange.lowerBound(g.since,!0):null;
nW(d,c,g.descending,f,function(B,C,G){function F(qa,D){var P=g.processChange(D,qa,g);a=P.seq=qa.seq;qa=r(P);if("object"===typeof qa)return Promise.reject(qa);if(!qa)return Promise.resolve();q++;g.return_docs&&m.push(P);return g.attachments&&g.include_docs?new Promise(function(J){lW(D,g,v,function(){ZM([P],g.binary).then(function(){J(P)})})}):Promise.resolve(P)}function N(){for(var qa=[],D=0,P=L.length;D<P&&q!==f;D++){var J=L[D];J&&qa.push(F(S[D],J))}Promise.all(qa).then(function(M){for(var X=0,T=
M.length;X<T;X++)if(M[X])g.onChange(M[X])}).catch(g.complete);q!==f&&G.continue()}if(G&&B.length){var L=Array(B.length),S=Array(B.length),ha=0;C.forEach(function(qa,D){qa=wH(qa);n(qa,B[D],function(P,J){S[D]=P;L[D]=J;++ha===B.length&&N()})})}})}function pW(g,c){var h=this;q9(function(d){s9(h,g,d)},c,h.constructor)}function s9(g,c,h){function d(q){var r=q.createObjectStore("document-store",{keyPath:"id"});q.createObjectStore("by-sequence",{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",
{unique:!0});q.createObjectStore("attach-store",{keyPath:"digest"});q.createObjectStore("meta-store",{keyPath:"id",autoIncrement:!1});q.createObjectStore("detect-blob-support");r.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1});q.createObjectStore("local-store",{keyPath:"_id"});q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function k(q,r){var u=q.objectStore("document-store");u.createIndex("deletedOrLocal",
"deletedOrLocal",{unique:!1});u.openCursor().onsuccess=function(v){if(v=v.target.result){var y=v.value,z=Ev(y);y.deletedOrLocal=z?"1":"0";u.put(y);v.continue()}else r()}}function n(q,r){var u=q.objectStore("local-store"),v=q.objectStore("document-store"),y=q.objectStore("by-sequence");v.openCursor().onsuccess=function(z){var B=z.target.result;if(B){var C=B.value;z=C.id;var G=Xy(z);C=Vy(C);if(G){var F=z+"::"+C;G=z+"::";C=z+"::~";z=y.index("_doc_id_rev");G=IDBKeyRange.bound(G,C,!1,!1);var N=z.openCursor(G);
N.onsuccess=function(L){(N=L.target.result)?(L=N.value,L._doc_id_rev===F&&u.put(L),y.delete(N.primaryKey),N.continue()):(v.delete(B.primaryKey),B.continue())}}else B.continue()}else r&&r()}}function b(q){q=q.createObjectStore("attach-seq-store",{autoIncrement:!0});q.createIndex("seq","seq");q.createIndex("digestSeq","digestSeq",{unique:!0})}function e(q,r){var u=q.objectStore("by-sequence"),v=q.objectStore("attach-store"),y=q.objectStore("attach-seq-store");v.count().onsuccess=function(z){if(!z.target.result)return r();
u.openCursor().onsuccess=function(B){B=B.target.result;if(!B)return r();for(var C=B.value,G=B.primaryKey,F=Object.keys(C._attachments||{}),N={},L=0;L<F.length;L++)N[C._attachments[F[L]].digest]=!0;C=Object.keys(N);for(L=0;L<C.length;L++)y.put({seq:G,digestSeq:C[L]+"::"+G});B.continue()}}}function l(q){function r(y){return y.data?$y(y):(y.deleted="1"===y.deletedOrLocal,y)}var u=q.objectStore("by-sequence"),v=q.objectStore("document-store");v.openCursor().onsuccess=function(y){function z(){var G=YM(C,
C.winningRev,C.deleted);v.put(G).onsuccess=function(){B.continue()}}var B=y.target.result;if(B){var C=r(B.value);C.winningRev=C.winningRev||Vy(C);if(C.seq)return z();(function(){var G=C.id+"::",F=C.id+"::\uffff",N=0;u.index("_doc_id_rev").openCursor(IDBKeyRange.bound(G,F)).onsuccess=function(L){L=L.target.result;if(!L)return C.seq=N,z();var S=L.primaryKey;S>N&&(N=S);L.continue()}})()}}}var a=c.name,f=null;g._meta=null;g._remote=!1;g.type=function(){return"idb"};g._id=EV(function(q){q(null,g._meta.instanceId)});
g._bulkDocs=function(q,r,u){h9(c,q,r,g,f,u)};g._get=function(q,r,u){function v(){u(B,{doc:y,metadata:z,ctx:C})}var y,z,B,C=r.ctx;if(!C){var G=fs(f,["document-store","by-sequence","attach-store"],"readonly");if(G.error)return u(G.error);C=G.txn}C.objectStore("document-store").get(q).onsuccess=function(F){z=$y(F.target.result);if(!z)return B=Dh(es,"missing"),v();if(r.rev)var N=r.latest?H8(r.rev,z):r.rev;else if(N=z.winningRev,Ev(z))return B=Dh(es,"deleted"),v();F=C.objectStore("by-sequence");N=z.id+
"::"+N;F.index("_doc_id_rev").get(N).onsuccess=function(L){(y=L.target.result)&&(y=wH(y));if(!y)return B=Dh(es,"missing"),v();v()}}};g._getAttachment=function(q,r,u,v,y){if(v.ctx)q=v.ctx;else{q=fs(f,["document-store","by-sequence","attach-store"],"readonly");if(q.error)return y(q.error);q=q.txn}r=u.digest;var z=u.content_type;q.objectStore("attach-store").get(r).onsuccess=function(B){kW(B.target.result.body,z,v.binary,function(C){y(null,C)})}};g._info=function(q){var r,u,v=fs(f,["meta-store","by-sequence"],
"readonly");if(v.error)return q(v.error);v=v.txn;v.objectStore("meta-store").get("meta-store").onsuccess=function(y){u=y.target.result.docCount};v.objectStore("by-sequence").openCursor(null,"prev").onsuccess=function(y){r=(y=y.target.result)?y.key:0};v.oncomplete=function(){q(null,{doc_count:u,update_seq:r,idb_attachment_format:g._meta.blobSupport?"binary":"base64"})}};g._allDocs=function(q,r){m9(q,f,r)};g._changes=function(q){return r9(q,g,a,f)};g._close=function(q){f.close();jB.delete(a);q()};g._getRevisionTree=
function(q,r){var u=fs(f,["document-store"],"readonly");if(u.error)return r(u.error);u.txn.objectStore("document-store").get(q).onsuccess=function(v){(v=$y(v.target.result))?r(null,v.rev_tree):r(Dh(es))}};g._doCompaction=function(q,r,u){var v=fs(f,["document-store","by-sequence","attach-store","attach-seq-store"],"readwrite");if(v.error)return u(v.error);var y=v.txn;y.objectStore("document-store").get(q).onsuccess=function(z){z=$y(z.target.result);Wy(z.rev_tree,function(G,F,N,L,S){-1!==r.indexOf(F+
"-"+N)&&(S.status="missing")});mW(r,q,y);var B=z.winningRev,C=z.deleted;y.objectStore("document-store").put(YM(z,B,C))};y.onabort=Nt(u);y.oncomplete=function(){u()}};g._getLocal=function(q,r){var u=fs(f,["local-store"],"readonly");if(u.error)return r(u.error);q=u.txn.objectStore("local-store").get(q);q.onerror=Nt(r);q.onsuccess=function(v){(v=v.target.result)?(delete v._doc_id_rev,r(null,v)):r(Dh(es))}};g._putLocal=function(q,r,u){"function"===typeof r&&(u=r,r={});delete q._revisions;var v=q._rev,
y=q._id;q._rev=v?"0-"+(parseInt(v.split("-")[1],10)+1):"0-1";var z=r.ctx,B;if(!z){z=fs(f,["local-store"],"readwrite");if(z.error)return u(z.error);z=z.txn;z.onerror=Nt(u);z.oncomplete=function(){B&&u(null,B)}}var C=z.objectStore("local-store");v?(y=C.get(y),y.onsuccess=function(G){(G=G.target.result)&&G._rev===v?C.put(q).onsuccess=function(){B={ok:!0,id:q._id,rev:q._rev};r.ctx&&u(null,B)}:u(Dh(hB))}):(y=C.add(q),y.onerror=function(G){u(Dh(hB));G.preventDefault();G.stopPropagation()},y.onsuccess=function(){B=
{ok:!0,id:q._id,rev:q._rev};r.ctx&&u(null,B)})};g._removeLocal=function(q,r,u){"function"===typeof r&&(u=r,r={});var v=r.ctx;if(!v){v=fs(f,["local-store"],"readwrite");if(v.error)return u(v.error);v=v.txn;v.oncomplete=function(){y&&u(null,y)}}var y,z=q._id,B=v.objectStore("local-store");v=B.get(z);v.onerror=Nt(u);v.onsuccess=function(C){(C=C.target.result)&&C._rev===q._rev?(B.delete(z),y={ok:!0,id:z,rev:"0-0"},r.ctx&&u(null,y)):u(Dh(es))}};g._destroy=function(q,r){xD.removeAllListeners(a);(q=bN.get(a))&&
q.result&&(q.result.close(),jB.delete(a));q=indexedDB.deleteDatabase(a);q.onsuccess=function(){bN.delete(a);sD&&a in localStorage&&delete localStorage[a];r(null,{ok:!0})};q.onerror=Nt(r)};var m=jB.get(a);if(m)return f=m.idb,g._meta=m.global,Mt(function(){h(null,g)});m=indexedDB.open(a,5);bN.set(a,m);m.onupgradeneeded=function(q){function r(){var B=y[z-1];z++;B&&B(v,r)}var u=q.target.result;if(1>q.oldVersion)return d(u);var v=q.currentTarget.transaction;3>q.oldVersion&&u.createObjectStore("local-store",
{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0});4>q.oldVersion&&b(u);var y=[k,n,e,l],z=q.oldVersion;r()};m.onsuccess=function(q){function r(){"undefined"!==typeof C&&y&&(g._meta={name:a,instanceId:G,blobSupport:C},jB.set(a,{idb:f,global:g._meta}),h(null,g))}function u(){if("undefined"!==typeof B&&"undefined"!==typeof z){var F=a+"_id";F in z?G=z[F]:z[F]=G=vH();z.docCount=B;v.objectStore("meta-store").put(z)}}f=q.target.result;f.onversionchange=function(){f.close();jB.delete(a)};
f.onabort=function(F){Jq("error","Database has a global failure",F.target.error);f.close();jB.delete(a)};var v=f.transaction(["meta-store","detect-blob-support","document-store"],"readwrite"),y=!1,z,B,C,G;v.objectStore("meta-store").get("meta-store").onsuccess=function(F){z=F.target.result||{id:"meta-store"};u()};o9(v,function(F){B=F;u()});cN||(cN=n9(v));cN.then(function(F){C=F;r()});v.oncomplete=function(){y=!0;r()};v.onabort=Nt(h)};m.onerror=function(q){(q=q.target.error&&q.target.error.message)?
-1!==q.indexOf("stored database is a higher version")&&(q=Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):q="Failed to open indexedDB, are you in private browsing mode?";Jq("error",q);h(Dh(XM,q))}}function t9(g,c){return new Promise(function(h,d){function k(){l++;g[a++]().then(b,e)}function n(){if(++f===m)q?d(q):h();else for(;l<c&&a<m;)k()}function b(){l--;n()}function e(r){l--;q=q||r;n()}for(var l=0,a=0,f=0,m=g.length,q;l<
c&&a<m;)k()})}function dN(g){var c=(g=g.doc||g.ok)&&g._attachments;c&&Object.keys(c).forEach(function(h){h=c[h];h.data=PM(h.data,h.content_type)})}function az(g){return/^_design/.test(g)?"_design/"+encodeURIComponent(g.slice(8)):/^_local/.test(g)?"_local/"+encodeURIComponent(g.slice(7)):encodeURIComponent(g)}function qW(g){return g._attachments&&Object.keys(g._attachments)?Promise.all(Object.keys(g._attachments).map(function(c){var h=g._attachments[c];if(h.data&&"string"!==typeof h.data)return(new Promise(function(d){QM(h.data,
d)})).then(function(d){h.data=d})})):Promise.resolve()}function u9(g,c){if(c.prefix){var h=LV(c.prefix).protocol;h="http"===h||"https"===h}else h=!1;h&&(g=c.name.substr(c.prefix.length),g=c.prefix.replace(/\/?$/,"/")+encodeURIComponent(g));c=LV(g);if(c.user||c.password)c.auth={username:c.user,password:c.password};g=c.path.replace(/(^\/|\/$)/g,"").split("/");c.db=g.pop();-1===c.db.indexOf("%")&&(c.db=encodeURIComponent(c.db));c.path=g.join("/");return c}function yl(g,c){return xH(g,g.db+"/"+c)}function xH(g,
c){return g.protocol+"://"+g.host+(g.port?":"+g.port:"")+"/"+g.path+(g.path?"/":"")+c}function yH(g){return"?"+Object.keys(g).map(function(c){return c+"="+encodeURIComponent(g[c])}).join("&")}function v9(g){var c="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",h=-1!==c.indexOf("msie"),d=-1!==c.indexOf("trident");c=-1!==c.indexOf("edge");g=!("method"in g)||"GET"===g.method;return(h||d||c)&&g}function eN(g,c){function h(m,q){return Tk(m,dB(function(r){k().then(function(){return q.apply(this,
r)}).catch(function(u){r.pop()(u)})})).bind(b)}function d(m,q,r){var u={};q=q||{};q.headers=q.headers||new kB;q.headers.get("Content-Type")||q.headers.set("Content-Type","application/json");q.headers.get("Accept")||q.headers.set("Accept","application/json");return a(m,q).then(function(v){u.ok=v.ok;u.status=v.status;return v.json()}).then(function(v){u.data=v;if(!u.ok){u.data.status=u.status;v=fB(u.data);if(r)return r(v);throw v;}Array.isArray(u.data)&&(u.data=u.data.map(function(y){return y.error||
y.missing?fB(y):y}));if(r)r(null,u.data);else return u})}function k(){if(g.skip_setup)return Promise.resolve();if(f)return f;f=d(l).catch(function(m){return m&&m.status&&404===m.status?(JM(404,"PouchDB is just detecting if the remote exists."),d(l,{method:"PUT"})):Promise.reject(m)}).catch(function(m){return m&&m.status&&412===m.status?!0:Promise.reject(m)});f.catch(function(){f=null});return f}function n(m){return m.split("/").map(encodeURIComponent).join("/")}var b=this,e=u9(g.name,g),l=yl(e,"");
g=xl(g);var a=function(m,q){q=q||{};q.headers=q.headers||new kB;q.credentials="include";if(g.auth||e.auth){var r=g.auth||e.auth;r=btoa(unescape(encodeURIComponent(r.username+":"+r.password)));q.headers.set("Authorization","Basic "+r)}var u=g.headers||{};Object.keys(u).forEach(function(v){q.headers.append(v,u[v])});v9(q)&&(m+=(-1===m.indexOf("?")?"?":"&")+"_nonce="+Date.now());return(g.fetch||rW)(m,q)},f;Mt(function(){c(null,b)});b._remote=!0;b.type=function(){return"http"};b.id=h("id",function(m){a(xH(e,
"")).then(function(q){return q.json()}).catch(function(){return{}}).then(function(q){q=q&&q.uuid?q.uuid+e.db:yl(e,"");m(null,q)})});b.compact=h("compact",function(m,q){"function"===typeof m&&(q=m,m={});m=xl(m);d(yl(e,"_compact"),{method:"POST"}).then(function(){function r(){b.info(function(u,v){v&&!v.compact_running?q(null,{ok:!0}):setTimeout(r,m.interval||200)})}r()})});b.bulkGet=Tk("bulkGet",function(m,q){function r(B){var C={};m.revs&&(C.revs=!0);m.attachments&&(C.attachments=!0);m.latest&&(C.latest=
!0);d(yl(e,"_bulk_get"+yH(C)),{method:"POST",body:JSON.stringify({docs:m.docs})}).then(function(G){m.attachments&&m.binary&&G.data.results.forEach(function(F){F.docs.forEach(dN)});B(null,G.data)}).catch(B)}function u(){function B(S){return function(ha,qa){F[S]=qa.results;++G===C&&q(null,{results:sH(F)})}}for(var C=Math.ceil(m.docs.length/50),G=0,F=Array(C),N=0;N<C;N++){var L=rD(m,["revs","attachments","binary","latest"]);L.docs=m.docs.slice(50*N,Math.min(m.docs.length,50*(N+1)));GV(v,L,B(N))}}var v=
this,y=xH(e,""),z=fN[y];"boolean"!==typeof z?r(function(B,C){B?(fN[y]=!1,JM(B.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),u()):(fN[y]=!0,q(null,C))}):z?r(q):u()});b._info=function(m){k().then(function(){return a(yl(e,""))}).then(function(q){return q.json()}).then(function(q){q.host=yl(e,"");m(null,q)}).catch(m)};b.fetch=function(m,q){return k().then(function(){var r="/"===m.substring(0,1)?xH(e,m.substring(1)):yl(e,m);return a(r,q)})};b.get=h("get",function(m,q,r){function u(z){function B(F){var N=
C[F];F=az(z._id)+"/"+n(F)+"?rev="+z._rev;return a(yl(e,F)).then(function(L){return"buffer"in L?L.buffer():L.blob()}).then(function(L){if(q.binary){var S=Object.getOwnPropertyDescriptor(L.__proto__,"type");if(!S||S.set)L.type=N.content_type;return L}return new Promise(function(ha){QM(L,ha)})}).then(function(L){delete N.stub;delete N.length;N.data=L})}var C=z._attachments,G=C&&Object.keys(C);if(C&&G.length)return G=G.map(function(F){return function(){return B(F)}}),t9(G,5)}function v(z){return Array.isArray(z)?
Promise.all(z.map(function(B){if(B.ok)return u(B.ok)})):u(z)}"function"===typeof q&&(r=q,q={});q=xl(q);var y={};q.revs&&(y.revs=!0);q.revs_info&&(y.revs_info=!0);q.latest&&(y.latest=!0);q.open_revs&&("all"!==q.open_revs&&(q.open_revs=JSON.stringify(q.open_revs)),y.open_revs=q.open_revs);q.rev&&(y.rev=q.rev);q.conflicts&&(y.conflicts=q.conflicts);q.update_seq&&(y.update_seq=q.update_seq);m=az(m);y=yl(e,m+yH(y));d(y).then(function(z){return Promise.resolve().then(function(){if(q.attachments)return v(z.data)}).then(function(){r(null,
z.data)})}).catch(function(z){z.docId=m;r(z)})});b.remove=h("remove",function(m,q,r,u){"string"===typeof q?(m={_id:m,_rev:q},"function"===typeof r&&(u=r,r={})):"function"===typeof q?(u=q,r={}):(u=r,r=q);q=m._rev||r.rev;q=yl(e,az(m._id))+"?rev="+q;d(q,{method:"DELETE"},u).catch(u)});b.getAttachment=h("getAttachment",function(m,q,r,u){"function"===typeof r&&(u=r,r={});r=r.rev?"?rev="+r.rev:"";m=yl(e,az(m))+"/"+n(q)+r;var v;a(m,{method:"GET"}).then(function(y){v=y.headers.get("content-type");if(y.ok)return"undefined"===
typeof zH||zH.browser||"function"!==typeof y.buffer?y.blob():y.buffer();throw y;}).then(function(y){"undefined"===typeof zH||zH.browser||(y.type=v);u(null,y)}).catch(function(y){u(y)})});b.removeAttachment=h("removeAttachment",function(m,q,r,u){m=yl(e,az(m)+"/"+n(q))+"?rev="+r;d(m,{method:"DELETE"},u).catch(u)});b.putAttachment=h("putAttachment",function(m,q,r,u,v,y){"function"===typeof v&&(y=v,v=u,u=r,r=null);m=az(m)+"/"+n(q);m=yl(e,m);r&&(m+="?rev="+r);if("string"===typeof u){try{var z=atob(u)}catch(B){return y(Dh(iW,
"Attachment is not a valid base64 string"))}u=z?OM(z,v):""}d(m,{headers:new kB({"Content-Type":v}),method:"PUT",body:u},y).catch(y)});b._bulkDocs=function(m,q,r){m.new_edits=q.new_edits;k().then(function(){return Promise.all(m.docs.map(qW))}).then(function(){return d(yl(e,"_bulk_docs"),{method:"POST",body:JSON.stringify(m)},r)}).catch(r)};b._put=function(m,q,r){k().then(function(){return qW(m)}).then(function(){return d(yl(e,az(m._id)),{method:"PUT",body:JSON.stringify(m)})}).then(function(u){r(null,
u.data)}).catch(function(u){u.docId=m&&m._id;r(u)})};b.allDocs=h("allDocs",function(m,q){"function"===typeof m&&(q=m,m={});m=xl(m);var r={},u="GET";m.conflicts&&(r.conflicts=!0);m.update_seq&&(r.update_seq=!0);m.descending&&(r.descending=!0);m.include_docs&&(r.include_docs=!0);m.attachments&&(r.attachments=!0);m.key&&(r.key=JSON.stringify(m.key));m.start_key&&(m.startkey=m.start_key);m.startkey&&(r.startkey=JSON.stringify(m.startkey));m.end_key&&(m.endkey=m.end_key);m.endkey&&(r.endkey=JSON.stringify(m.endkey));
"undefined"!==typeof m.inclusive_end&&(r.inclusive_end=!!m.inclusive_end);"undefined"!==typeof m.limit&&(r.limit=m.limit);"undefined"!==typeof m.skip&&(r.skip=m.skip);r=yH(r);if("undefined"!==typeof m.keys){u="POST";var v={keys:m.keys}}d(yl(e,"_all_docs"+r),{method:u,body:JSON.stringify(v)}).then(function(y){m.include_docs&&m.attachments&&m.binary&&y.data.rows.forEach(dN);q(null,y.data)}).catch(q)});b._changes=function(m){var q="batch_size"in m?m.batch_size:25;m=xl(m);!m.continuous||"heartbeat"in
m||(m.heartbeat=1E4);var r="timeout"in m?m.timeout:3E4;"timeout"in m&&m.timeout&&5E3>r-m.timeout&&(r=m.timeout+5E3);"heartbeat"in m&&m.heartbeat&&5E3>r-m.heartbeat&&(r=m.heartbeat+5E3);var u={};"timeout"in m&&m.timeout&&(u.timeout=m.timeout);var v="undefined"!==typeof m.limit?m.limit:!1,y=v;m.style&&(u.style=m.style);if(m.include_docs||m.filter&&"function"===typeof m.filter)u.include_docs=!0;m.attachments&&(u.attachments=!0);m.continuous&&(u.feed="longpoll");m.seq_interval&&(u.seq_interval=m.seq_interval);
m.conflicts&&(u.conflicts=!0);m.descending&&(u.descending=!0);m.update_seq&&(u.update_seq=!0);"heartbeat"in m&&m.heartbeat&&(u.heartbeat=m.heartbeat);m.filter&&"string"===typeof m.filter&&(u.filter=m.filter);m.view&&"string"===typeof m.view&&(u.filter="_view",u.view=m.view);if(m.query_params&&"object"===typeof m.query_params)for(var z in m.query_params)m.query_params.hasOwnProperty(z)&&(u[z]=m.query_params[z]);var B="GET";if(m.doc_ids){u.filter="_doc_ids";B="POST";var C={doc_ids:m.doc_ids}}else m.selector&&
(u.filter="_selector",B="POST",C={selector:m.selector});var G=new w9,F,N=function(ha,qa){if(!m.aborted){u.since=ha;"object"===typeof u.since&&(u.since=JSON.stringify(u.since));m.descending?v&&(u.limit=y):u.limit=!v||y>q?q:y;var D=yl(e,"_changes"+yH(u)),P={signal:G.signal,method:B,body:JSON.stringify(C)};F=ha;m.aborted||k().then(function(){return d(D,P,qa)}).catch(qa)}},L={results:[]},S=function(ha,qa){if(!m.aborted){var D=0;if(qa&&qa.results){D=qa.results.length;L.last_seq=qa.last_seq;var P=null,
J=null;"number"===typeof qa.pending&&(P=qa.pending);if("string"===typeof L.last_seq||"number"===typeof L.last_seq)J=L.last_seq;qa.results=qa.results.filter(function(M){y--;var X=KM(m)(M);X&&(m.include_docs&&m.attachments&&m.binary&&dN(M),m.return_docs&&L.results.push(M),m.onChange(M,P,J));return X})}else if(ha){m.aborted=!0;m.complete(ha);return}qa&&qa.last_seq&&(F=qa.last_seq);ha=v&&0>=y||qa&&D<q||m.descending;(!m.continuous||v&&0>=y)&&ha?m.complete(null,L):Mt(function(){N(F,S)})}};N(m.since||0,
S);return{cancel:function(){m.aborted=!0;G.abort()}}};b.revsDiff=h("revsDiff",function(m,q,r){"function"===typeof q&&(r=q);d(yl(e,"_revs_diff"),{method:"POST",body:JSON.stringify(m)},r).catch(r)});b._close=function(m){m()};b._destroy=function(m,q){d(yl(e,""),{method:"DELETE"}).then(function(r){q(null,r)}).catch(function(r){404===r.status?q(null,{ok:!0}):q(r)})}}function bz(g){this.status=400;this.name="query_parse_error";this.message=g;this.error=!0;try{Error.captureStackTrace(this,bz)}catch(c){}}
function AH(g){this.status=404;this.name="not_found";this.message=g;this.error=!0;try{Error.captureStackTrace(this,AH)}catch(c){}}function BH(g){this.status=500;this.name="invalid_value";this.message=g;this.error=!0;try{Error.captureStackTrace(this,BH)}catch(c){}}function sW(g,c){c&&g.then(function(h){Mt(function(){c(null,h)})},function(h){Mt(function(){c(h)})});return g}function x9(g){return dB(function(c){var h=c.pop();c=g.apply(this,c);"function"===typeof h&&sW(c,h);return c})}function y9(g,c){return g.then(function(h){return c().then(function(){return h})},
function(h){return c().then(function(){throw h;})})}function gN(g,c){return function(){var h=arguments,d=this;return g.add(function(){return c.apply(d,h)})}}function tW(g){g=new yD(g);var c=Array(g.size),h=-1;g.forEach(function(d){c[++h]=d});return c}function hN(g){var c=Array(g.size),h=-1;g.forEach(function(d,k){c[++h]=k});return c}function uW(g){return new BH("builtin "+g+" function requires map values to be numbers or number arrays")}function iN(g){for(var c=0,h=0,d=g.length;h<d;h++){var k=g[h];
if("number"!==typeof k)if(Array.isArray(k)){c="number"===typeof c?[c]:c;for(var n=0,b=k.length;n<b;n++){var e=k[n];if("number"!==typeof e)throw uW("_sum");"undefined"===typeof c[n]?c.push(e):c[n]+=e}}else throw uW("_sum");else"number"===typeof c?c+=k:c[0]+=k}return c}function vW(g,c){return MM("return ("+g.replace(/;\s*$/,"")+");",{emit:c,sum:iN,log:z9,isArray:A9,toJSON:B9})}function zD(){this.promise=new Promise(function(g){g()})}function wW(g){if(!g)return"undefined";switch(typeof g){case "function":return g.toString();
case "string":return g.toString();default:return JSON.stringify(g)}}function C9(g,c){return wW(g)+wW(c)+"undefined"}function xW(g,c,h,d,k,n){var b=C9(h,d);if(!k){var e=g._cachedViews=g._cachedViews||{};if(e[b])return e[b]}var l=g.info().then(function(a){var f=a.db_name+"-mrview-"+(k?"temp":uH.hash(b));return tH(g,"_local/"+n,function(m){m.views=m.views||{};var q=c;-1===q.indexOf("/")&&(q=c+"/"+c);q=m.views[q]=m.views[q]||{};if(!q[f])return q[f]=!0,m}).then(function(){return g.registerDependentDatabase(f).then(function(m){m=
m.db;m.auto_compaction=!0;var q={name:f,db:m,sourceDB:g,adapter:g.adapter,mapFun:h,reduceFun:d};return q.db.get("_local/lastSeq").catch(function(r){if(404!==r.status)throw r;}).then(function(r){q.seq=r?r.seq:0;if(e)q.db.once("destroyed",function(){delete e[b]});return q})})})});e&&(e[b]=l);return l}function jN(g){return-1===g.indexOf("/")?[g,g]:g.split("/")}function D9(g){return 1===g.length&&/^1-/.test(g[0].rev)}function yW(g,c){try{g.emit("error",c)}catch(h){Jq("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),
Jq("error",c)}}function zW(g,c){var h=Object.keys(c._attachments);return Promise.all(h.map(function(d){return g.getAttachment(c._id,d,{rev:c._rev})}))}function E9(g,c,h){var d=Lt(c)&&!Lt(g),k=Object.keys(h._attachments);return d?g.get(h._id).then(function(n){return Promise.all(k.map(function(b){return n._attachments&&n._attachments[b]&&n._attachments[b].digest===h._attachments[b].digest?g.getAttachment(n._id,b):c.getAttachment(h._id,b)}))}).catch(function(n){if(404!==n.status)throw n;return zW(c,
h)}):zW(c,h)}function F9(g){var c=[];Object.keys(g).forEach(function(h){g[h].missing.forEach(function(d){c.push({id:h,rev:d})})});return{docs:c,revs:!0,latest:!0}}function G9(g,c,h,d){function k(e){return g.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(l){if(d.cancelled)throw Error("cancelled");l.rows.forEach(function(a){var f;(f=a.deleted||!a.doc||!/^1-/.test(a.value.rev))||(f=a.doc,f=f._attachments&&0<Object.keys(f._attachments).length);f||(f=a.doc,f=f._conflicts&&0<f._conflicts.length);
f||(a.doc._conflicts&&delete a.doc._conflicts,n.push(a.doc),delete h[a.id])})})}h=xl(h);var n=[],b=!0;return Promise.resolve().then(function(){var e=Object.keys(h).filter(function(l){l=h[l].missing;return 1===l.length&&/^1-/.test(l[0])});if(0<e.length)return k(e)}).then(function(){var e=F9(h);if(e.docs.length)return g.bulkGet(e).then(function(l){if(d.cancelled)throw Error("cancelled");return Promise.all(l.results.map(function(a){return Promise.all(a.docs.map(function(f){var m=f.ok;f.error&&(b=!1);
return m&&m._attachments?E9(c,g,m).then(function(q){var r=Object.keys(m._attachments);q.forEach(function(u,v){v=m._attachments[r[v]];delete v.stub;delete v.length;v.data=u});return m}):m}))})).then(function(a){n=n.concat(sH(a).filter(Boolean))})})}).then(function(){return{ok:b,docs:n}})}function kN(g,c,h,d,k){return g.get(c).catch(function(n){if(404===n.status)return"http"!==g.adapter&&"https"!==g.adapter||JM(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:d,_id:c,history:[],
replicator:"pouchdb",version:1};throw n;}).then(function(n){if(!k.cancelled&&n.last_seq!==h)return n.history=(n.history||[]).filter(function(b){return b.session_id!==d}),n.history.unshift({last_seq:h,session_id:d}),n.history=n.history.slice(0,5),n.version=1,n.replicator="pouchdb",n.session_id=d,n.last_seq=h,g.put(n).catch(function(b){if(409===b.status)return kN(g,c,h,d,k);throw b;})})}function AD(g,c,h,d,k){this.src=g;this.target=c;this.id=h;this.returnValue=d;this.opts=k||{}}function AW(g,c){var h=
g[0],d=g.slice(1),k=c[0],n=c.slice(1);return h&&0!==c.length?lN(h.session_id,c)?{last_seq:h.last_seq,history:g}:lN(k.session_id,d)?{last_seq:k.last_seq,history:n}:AW(d,n):{last_seq:0,history:[]}}function lN(g,c){var h=c[0],d=c.slice(1);return g&&0!==c.length?g===h.session_id?!0:lN(g,d):!1}function BW(g){return"number"===typeof g.status&&4===Math.floor(g.status/100)}function H9(g,c,h,d){if(!1===g.retry)c.emit("error",h),c.removeAllListeners();else{"function"!==typeof g.back_off_function&&(g.back_off_function=
q8);c.emit("requestError",h);if("active"===c.state||"pending"===c.state){c.emit("paused",h);c.state="stopped";var k=function(){g.current_back_off=0};c.once("paused",function(){c.removeListener("active",k)});c.once("active",k)}g.current_back_off=g.current_back_off||0;g.current_back_off=g.back_off_function(g.current_back_off);setTimeout(d,g.current_back_off)}}function I9(g){return Object.keys(g).sort(am).reduce(function(c,h){c[h]=g[h];return c},{})}function J9(g,c,h){var d=h.doc_ids?h.doc_ids.sort(am):
"",k=h.filter?h.filter.toString():"",n="",b="",e="";h.selector&&(e=JSON.stringify(h.selector));h.filter&&h.query_params&&(n=JSON.stringify(I9(h.query_params)));h.filter&&"_view"===h.filter&&(b=h.view.toString());return Promise.all([g.id(),c.id()]).then(function(l){var a=l[0]+l[1]+k+b+n+d+e;return new Promise(function(f){RM(a,f)})}).then(function(l){l=l.replace(/\//g,".").replace(/\+/g,"_");return"_local/"+l})}function CW(g,c,h,d,k){function n(){return Ra?Promise.resolve():J9(g,c,h).then(function(ia){fa=
ia;Ra=new AD(g,c,fa,d,!1===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===h.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===h.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0})})}function b(){gb=[];if(0!==F.docs.length){var ia=F.docs;return c.bulkDocs({docs:ia,new_edits:!1},{timeout:h.timeout}).then(function(Aa){if(d.cancelled)throw r(),Error("cancelled");var ob=Object.create(null);
Aa.forEach(function(Nb){Nb.error&&(ob[Nb.id]=Nb)});Aa=Object.keys(ob).length;k.doc_write_failures+=Aa;k.docs_written+=ia.length-Aa;ia.forEach(function(Nb){var Ab=ob[Nb._id];if(Ab)if(k.errors.push(Ab),Nb=(Ab.name||"").toLowerCase(),"unauthorized"===Nb||"forbidden"===Nb)d.emit("denied",xl(Ab));else throw Ab;else gb.push(Nb)})},function(Aa){k.doc_write_failures+=ia.length;throw Aa;})}}function e(){if(F.error)throw Error("There was a problem getting docs.");k.last_seq=qa=F.seq;var ia=xl(k);gb.length&&
(ia.docs=gb,"number"===typeof F.pending&&(ia.pending=F.pending,delete F.pending),d.emit("change",ia));L=!0;return Ra.writeCheckpoint(F.seq,ea).then(function(){L=!1;if(d.cancelled)throw r(),Error("cancelled");F=void 0;z()}).catch(function(Aa){C(Aa);throw Aa;})}function l(){var ia={};F.changes.forEach(function(Aa){"_user/"!==Aa.id&&(ia[Aa.id]=Aa.changes.map(function(ob){return ob.rev}))});return c.revsDiff(ia).then(function(Aa){if(d.cancelled)throw r(),Error("cancelled");F.diffs=Aa})}function a(){return G9(g,
c,F.diffs,d).then(function(ia){F.error=!ia.ok;ia.docs.forEach(function(Aa){delete F.diffs[Aa._id];k.docs_read++;F.docs.push(Aa)})})}function f(){d.cancelled||F||(0===G.length?m(!0):(F=G.shift(),l().then(a).then(b).then(e).then(f).catch(function(ia){q("batch processing terminated with error",ia)})))}function m(ia){if(0===N.changes.length){if(0===G.length&&!F){if(D&&aa.live||S)d.state="pending",d.emit("paused");S&&r()}}else if(ia||S||N.changes.length>=P){G.push(N);N={seq:0,changes:[],docs:[]};if("pending"===
d.state||"stopped"===d.state)d.state="active",d.emit("active");f()}}function q(ia,Aa){ha||(Aa.message||(Aa.message=ia),k.ok=!1,k.status="aborting",G=[],N={seq:0,changes:[],docs:[]},r(Aa))}function r(ia){if(!ha){if(d.cancelled&&(k.status="cancelled",L))return;k.status=k.status||"complete";k.end_time=(new Date).toISOString();k.last_seq=qa;ha=!0;if(ia){ia=Dh(ia);ia.result=k;var Aa=(ia.name||"").toLowerCase();"unauthorized"===Aa||"forbidden"===Aa?(d.emit("error",ia),d.removeAllListeners()):H9(h,d,ia,
function(){CW(g,c,h,d)})}else d.emit("complete",k),d.removeAllListeners()}}function u(ia,Aa,ob){if(d.cancelled)return r();"number"===typeof Aa&&(N.pending=Aa);KM(h)(ia)&&(N.seq=ia.seq||ob,N.changes.push(ia),Mt(function(){m(0===G.length&&aa.live)}))}function v(ia){M=!1;if(d.cancelled)return r();if(0<ia.results.length)aa.since=ia.results[ia.results.length-1].seq,z(),m(!0);else{var Aa=function(){D?(aa.live=!0,z()):S=!0;m(!0)};F||0!==ia.results.length?Aa():(L=!0,Ra.writeCheckpoint(ia.last_seq,ea).then(function(){L=
!1;k.last_seq=qa=ia.last_seq;Aa()}).catch(C))}}function y(ia){M=!1;if(d.cancelled)return r();q("changes rejected",ia)}function z(){function ia(){ob.cancel()}function Aa(){d.removeListener("cancel",ia)}if(!M&&!S&&G.length<J){M=!0;d._changes&&(d.removeListener("cancel",d._abortChanges),d._changes.cancel());d.once("cancel",ia);var ob=g.changes(aa).on("change",u);ob.then(Aa,Aa);ob.then(v).catch(y);h.retry&&(d._changes=ob,d._abortChanges=ia)}}function B(){n().then(function(){if(d.cancelled)r();else return Ra.getCheckpoint().then(function(ia){qa=
ia;aa={since:qa,limit:P,batch_size:P,style:"all_docs",doc_ids:X,selector:T,return_docs:!0};h.filter&&("string"!==typeof h.filter?aa.include_docs=!0:aa.filter=h.filter);"heartbeat"in h&&(aa.heartbeat=h.heartbeat);"timeout"in h&&(aa.timeout=h.timeout);h.query_params&&(aa.query_params=h.query_params);h.view&&(aa.view=h.view);z()})}).catch(function(ia){q("getCheckpoint rejected with ",ia)})}function C(ia){L=!1;q("writeCheckpoint completed with error",ia)}var G=[],F,N={seq:0,changes:[],docs:[]},L=!1,S=
!1,ha=!1,qa=0,D=h.continuous||h.live||!1,P=h.batch_size||100,J=h.batches_limit||10,M=!1,X=h.doc_ids,T=h.selector,fa,Ra,gb=[],ea=vH();k=k||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var aa={};d.ready(g,c);d.cancelled?r():(d._addedListeners||(d.once("cancel",r),"function"===typeof h.complete&&(d.once("error",h.complete),d.once("complete",function(ia){h.complete(null,ia)})),d._addedListeners=!0),"undefined"===typeof h.since?B():n().then(function(){L=
!0;return Ra.writeCheckpoint(h.since,ea)}).then(function(){L=!1;d.cancelled?r():(qa=h.since,B())}).catch(C))}function CH(){Do.EventEmitter.call(this);this.cancelled=!1;this.state="pending";var g=this,c=new Promise(function(h,d){g.once("complete",h);g.once("error",d)});g.then=function(h,d){return c.then(h,d)};g.catch=function(h){return c.catch(h)};g.catch(function(){})}function DH(g,c){var h=c.PouchConstructor;return"string"===typeof g?new h(g,c):g}function mN(g,c,h,d){"function"===typeof h&&(d=h,
h={});"undefined"===typeof h&&(h={});if(h.doc_ids&&!Array.isArray(h.doc_ids))throw Dh(rH,"`doc_ids` filter parameter is not a list.");h.complete=d;h=xl(h);h.continuous=h.continuous||h.live;h.retry="retry"in h?h.retry:!1;h.PouchConstructor=h.PouchConstructor||this;d=new CH(h);g=DH(g,h);c=DH(c,h);CW(g,c,h,d);return d}function K9(g,c,h,d){"function"===typeof h&&(d=h,h={});"undefined"===typeof h&&(h={});h=xl(h);h.PouchConstructor=h.PouchConstructor||this;g=DH(g,h);c=DH(c,h);return new nN(g,c,h,d)}function nN(g,
c,h,d){function k(C){u.emit("change",{direction:"pull",change:C})}function n(C){u.emit("change",{direction:"push",change:C})}function b(C){u.emit("denied",{direction:"push",doc:C})}function e(C){u.emit("denied",{direction:"pull",doc:C})}function l(){u.pushPaused=!0;u.pullPaused&&u.emit("paused")}function a(){u.pullPaused=!0;u.pushPaused&&u.emit("paused")}function f(){u.pushPaused=!1;u.pullPaused&&u.emit("active",{direction:"push"})}function m(){u.pullPaused=!1;u.pushPaused&&u.emit("active",{direction:"pull"})}
function q(C){return function(G,F){var N="denied"===G&&(F===e||F===b),L="paused"===G&&(F===a||F===l),S="active"===G&&(F===m||F===f);if("change"===G&&(F===k||F===n)||N||L||S)G in z||(z[G]={}),z[G][C]=!0,2===Object.keys(z[G]).length&&u.removeAllListeners(G)}}function r(C,G,F){if(-1==C.listeners(G).indexOf(F))C.on(G,F)}var u=this;this.canceled=!1;var v=h.push?iB({},h,h.push):h,y=h.pull?iB({},h,h.pull):h;this.push=mN(g,c,v);this.pull=mN(c,g,y);this.pullPaused=this.pushPaused=!0;var z={};h.live&&(this.push.on("complete",
u.pull.cancel.bind(u.pull)),this.pull.on("complete",u.push.cancel.bind(u.push)));this.on("newListener",function(C){"change"===C?(r(u.pull,"change",k),r(u.push,"change",n)):"denied"===C?(r(u.pull,"denied",e),r(u.push,"denied",b)):"active"===C?(r(u.pull,"active",m),r(u.push,"active",f)):"paused"===C&&(r(u.pull,"paused",a),r(u.push,"paused",l))});this.on("removeListener",function(C){"change"===C?(u.pull.removeListener("change",k),u.push.removeListener("change",n)):"denied"===C?(u.pull.removeListener("denied",
e),u.push.removeListener("denied",b)):"active"===C?(u.pull.removeListener("active",m),u.push.removeListener("active",f)):"paused"===C&&(u.pull.removeListener("paused",a),u.push.removeListener("paused",l))});this.pull.on("removeListener",q("pull"));this.push.on("removeListener",q("push"));var B=Promise.all([this.push,this.pull]).then(function(C){C={push:C[0],pull:C[1]};u.emit("complete",C);d&&d(null,C);u.removeAllListeners();return C},function(C){u.cancel();d?d(C):u.emit("error",C);u.removeAllListeners();
if(d)throw C;});this.then=function(C,G){return B.then(C,G)};this.catch=function(C){return B.catch(C)}}function gx(){this._store={}}function BD(g){this._store=new gx;if(g&&Array.isArray(g))for(var c=0,h=g.length;c<h;c++)this.add(g[c])}function L9(){lB&&cz&&(lB=!1,cz.length?hx=cz.concat(hx):CD=-1,hx.length&&DW())}function DW(){if(!lB){oN=!1;lB=!0;for(var g=hx.length,c=setTimeout(L9);g;){cz=hx;for(hx=[];cz&&++CD<g;)cz[CD].run();CD=-1;g=hx.length}cz=null;CD=-1;lB=!1;clearTimeout(c)}}function EW(g,c){this.fun=
g;this.array=c}function wj(g,c,h){Error.call(this,h);this.status=g;this.name=c;this.message=h;this.error=!0}function dz(g){return g.call.bind(g)}function DD(g,c){if("object"!=typeof g)return!1;try{return c(g),!0}catch(h){return!1}}function FW(g){return Eo&&vp?void 0!==Kq(g):GW(g)||HW(g)||IW(g)||JW(g)||KW(g)||LW(g)||MW(g)||NW(g)||OW(g)||PW(g)||QW(g)}function GW(g){return Eo&&vp?"Uint8Array"===Kq(g):"[object Uint8Array]"===ek(g)||M9(g)&&void 0!==g.buffer}function HW(g){return Eo&&vp?"Uint8ClampedArray"===
Kq(g):"[object Uint8ClampedArray]"===ek(g)}function IW(g){return Eo&&vp?"Uint16Array"===Kq(g):"[object Uint16Array]"===ek(g)}function JW(g){return Eo&&vp?"Uint32Array"===Kq(g):"[object Uint32Array]"===ek(g)}function KW(g){return Eo&&vp?"Int8Array"===Kq(g):"[object Int8Array]"===ek(g)}function LW(g){return Eo&&vp?"Int16Array"===Kq(g):"[object Int16Array]"===ek(g)}function MW(g){return Eo&&vp?"Int32Array"===Kq(g):"[object Int32Array]"===ek(g)}function NW(g){return Eo&&vp?"Float32Array"===Kq(g):"[object Float32Array]"===
ek(g)}function OW(g){return Eo&&vp?"Float64Array"===Kq(g):"[object Float64Array]"===ek(g)}function PW(g){return Eo&&vp?"BigInt64Array"===Kq(g):"[object BigInt64Array]"===ek(g)}function QW(g){return Eo&&vp?"BigUint64Array"===Kq(g):"[object BigUint64Array]"===ek(g)}function EH(g){return"[object Map]"===ek(g)}function FH(g){return"[object Set]"===ek(g)}function GH(g){return"[object WeakMap]"===ek(g)}function pN(g){return"[object WeakSet]"===ek(g)}function HH(g){return"[object ArrayBuffer]"===ek(g)}function RW(g){return"undefined"!=
typeof ArrayBuffer&&(HH.working?HH(g):g instanceof ArrayBuffer)}function IH(g){return"[object DataView]"===ek(g)}function SW(g){return"undefined"!=typeof DataView&&(IH.working?IH(g):g instanceof DataView)}function JH(g){return"[object SharedArrayBuffer]"===ek(g)}function TW(g){return"undefined"!=typeof SharedArrayBuffer&&(JH.working?JH(g):g instanceof SharedArrayBuffer)}function UW(g){return DD(g,N9)}function VW(g){return DD(g,O9)}function WW(g){return DD(g,P9)}function XW(g){return YW&&DD(g,Q9)}
function ZW(g){return qN&&DD(g,R9)}function ix(g,c){var h={seen:[],stylize:S9};return 3<=arguments.length&&(h.depth=arguments[2]),4<=arguments.length&&(h.colors=arguments[3]),rN(c)?h.showHidden=c:c&&Sg._extend(h,c),ez(h.showHidden)&&(h.showHidden=!1),ez(h.depth)&&(h.depth=2),ez(h.colors)&&(h.colors=!1),ez(h.customInspect)&&(h.customInspect=!0),h.colors&&(h.stylize=T9),KH(h,g,h.depth)}function T9(g,c){return(c=ix.styles[c])?"\u001b["+ix.colors[c][0]+"m"+g+"\u001b["+ix.colors[c][1]+"m":g}function S9(g,
c){return g}function KH(g,c,h){if(g.customInspect&&c&&LH(c.inspect)&&c.inspect!==Sg.inspect&&(!c.constructor||c.constructor.prototype!==c)){var d=c.inspect(h,g);return MH(d)||(d=KH(g,d,h)),d}var k=function(a,f){if(ez(f))return a.stylize("undefined","undefined");if(MH(f))return f="'"+JSON.stringify(f).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(f,"string");if($W(f))return a.stylize(""+f,"number");if(rN(f))return a.stylize(""+f,"boolean");if(null===f)return a.stylize("null",
"null")}(g,c);if(k)return k;k=Object.keys(c);var n=function(a){var f={};return a.forEach(function(m,q){f[m]=!0}),f}(k);if(g.showHidden&&(k=Object.getOwnPropertyNames(c)),ED(c)&&(0<=k.indexOf("message")||0<=k.indexOf("description")))return sN(c);if(0===k.length){if(LH(c))return g.stylize("[Function"+(c.name?": "+c.name:"")+"]","special");if(FD(c))return g.stylize(RegExp.prototype.toString.call(c),"regexp");if(NH(c))return g.stylize(Date.prototype.toString.call(c),"date");if(ED(c))return sN(c)}var b=
"",e=!1,l=["{","}"];(aX(c)&&(e=!0,l=["[","]"]),LH(c))&&(b=" [Function"+(c.name?": "+c.name:"")+"]");return FD(c)&&(b=" "+RegExp.prototype.toString.call(c)),NH(c)&&(b=" "+Date.prototype.toUTCString.call(c)),ED(c)&&(b=" "+sN(c)),0!==k.length||e&&0!=c.length?0>h?FD(c)?g.stylize(RegExp.prototype.toString.call(c),"regexp"):g.stylize("[Object]","special"):(g.seen.push(c),d=e?function(a,f,m,q,r){for(var u=[],v=0,y=f.length;v<y;++v)Object.prototype.hasOwnProperty.call(f,String(v))?u.push(tN(a,f,m,q,String(v),
!0)):u.push("");return r.forEach(function(z){z.match(/^\d+$/)||u.push(tN(a,f,m,q,z,!0))}),u}(g,c,h,n,k):k.map(function(a){return tN(g,c,h,n,a,e)}),g.seen.pop(),function(a,f,m){var q=0;return 60<a.reduce(function(r,u){return q++,0<=u.indexOf("\n")&&q++,r+u.replace(/\u001b\[\d\d?m/g,"").length+1},0)?m[0]+(""===f?"":f+"\n ")+" "+a.join(",\n  ")+" "+m[1]:m[0]+f+" "+a.join(", ")+" "+m[1]}(d,b,l)):l[0]+b+l[1]}function sN(g){return"["+Error.prototype.toString.call(g)+"]"}function tN(g,c,h,d,k,n){var b,e,
l;if((l=Object.getOwnPropertyDescriptor(c,k)||{value:c[k]}).get?e=l.set?g.stylize("[Getter/Setter]","special"):g.stylize("[Getter]","special"):l.set&&(e=g.stylize("[Setter]","special")),Object.prototype.hasOwnProperty.call(d,k)||(b="["+k+"]"),e||(0>g.seen.indexOf(l.value)?-1<(e=null===h?KH(g,l.value,null):KH(g,l.value,h-1)).indexOf("\n")&&(e=n?e.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+e.split("\n").map(function(a){return"   "+a}).join("\n")):e=g.stylize("[Circular]","special")),
ez(b)){if(n&&k.match(/^\d+$/))return e;(b=JSON.stringify(""+k)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(b=b.substr(1,b.length-2),b=g.stylize(b,"name")):(b=b.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),b=g.stylize(b,"string"))}return b+": "+e}function aX(g){return Array.isArray(g)}function rN(g){return"boolean"==typeof g}function $W(g){return"number"==typeof g}function MH(g){return"string"==typeof g}function ez(g){return void 0===g}function FD(g){return mB(g)&&"[object RegExp]"===
Object.prototype.toString.call(g)}function mB(g){return"object"==typeof g&&null!==g}function NH(g){return mB(g)&&"[object Date]"===Object.prototype.toString.call(g)}function ED(g){return mB(g)&&("[object Error]"===Object.prototype.toString.call(g)||g instanceof Error)}function LH(g){return"function"==typeof g}function uN(g){return 10>g?"0"+g.toString(10):g.toString(10)}function U9(){var g=new Date,c=[uN(g.getHours()),uN(g.getMinutes()),uN(g.getSeconds())].join(":");return[g.getDate(),V9[g.getMonth()],
c].join(" ")}function W9(g,c){if(!g){var h=Error("Promise was rejected with a falsy value");h.reason=g;g=h}return c(g)}function bX(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");return-1===g&&(g=c),[g,g===c?0:4-g%4]}function X9(g,c,h){for(var d,k=[],n=c;n<h;n+=3)c=(g[n]<<16&16711680)+(g[n+1]<<8&65280)+(255&g[n+2]),k.push(Ot[(d=c)>>18&63]+Ot[d>>12&63]+Ot[d>>6&63]+Ot[63&d]);return k.join("")}function Fv(g){if(2147483647<g)throw new RangeError('The value "'+
g+'" is invalid for option "size"');g=new Uint8Array(g);return Object.setPrototypeOf(g,$d.prototype),g}function $d(g,c,h){if("number"==typeof g){if("string"==typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return vN(g)}return cX(g,c,h)}function cX(g,c,h){if("string"==typeof g)return function(k,n){"string"==typeof n&&""!==n||(n="utf8");if(!$d.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var b=0|dX(k,n),e=Fv(b);k=e.write(k,n);k!==b&&(e=
e.slice(0,k));return e}(g,c);if(ArrayBuffer.isView(g))return wN(g);if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Gv(g,ArrayBuffer)||g&&Gv(g.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(Gv(g,SharedArrayBuffer)||g&&Gv(g.buffer,SharedArrayBuffer)))return Y9(g,c,h);if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
var d=g.valueOf&&g.valueOf();if(null!=d&&d!==g)return $d.from(d,c,h);if(d=function(k){if($d.isBuffer(k)){var n=0|xN(k.length),b=Fv(n);return 0===b.length||k.copy(b,0,0,n),b}if(void 0!==k.length)return(n="number"!=typeof k.length)||(n=k.length,n=n!=n),n?Fv(0):wN(k);if("Buffer"===k.type&&Array.isArray(k.data))return wN(k.data)}(g))return d;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof g[Symbol.toPrimitive])return $d.from(g[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof g);}function eX(g){if("number"!=typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+g+'" is invalid for option "size"');}function vN(g){return eX(g),Fv(0>g?0:0|xN(g))}function wN(g){for(var c=0>g.length?0:0|xN(g.length),h=Fv(c),d=0;d<c;d+=1)h[d]=255&g[d];return h}function Y9(g,c,h){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');
var d;return d=void 0===c&&void 0===h?new Uint8Array(g):void 0===h?new Uint8Array(g,c):new Uint8Array(g,c,h),Object.setPrototypeOf(d,$d.prototype),d}function xN(g){if(2147483647<=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(2147483647).toString(16)+" bytes");return 0|g}function dX(g,c){if($d.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Gv(g,ArrayBuffer))return g.byteLength;if("string"!=typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof g);var h=g.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return yN(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return fX(g).length;default:if(k)return d?-1:yN(g).length;c=(""+c).toLowerCase();k=!0}}function Z9(g,c,h){var d=!1;if(((void 0===c||0>c)&&(c=0),c>this.length)||((void 0===h||h>this.length)&&
(h=this.length),0>=h)||(h>>>=0)<=(c>>>=0))return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;(!c||0>c)&&(c=0);(!h||0>h||h>g)&&(h=g);for(g="";c<h;++c)g+=$9[this[c]];return g;case "utf8":case "utf-8":return gX(this,c,h);case "ascii":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(127&this[c]);return g;case "latin1":case "binary":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return 0===c&&h===this.length?zN.fromByteArray(this):
zN.fromByteArray(this.slice(c,h));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(g=0;g<c.length;g+=2)h+=String.fromCharCode(c[g]+256*c[g+1]);return h;default:if(d)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();d=!0}}function fz(g,c,h){var d=g[c];g[c]=g[h];g[h]=d}function hX(g,c,h,d,k){if(0===g.length)return-1;"string"==typeof h?(d=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);var n=h=+h;if(n!=n&&(h=k?0:g.length-1),0>h&&(h=g.length+
h),h>=g.length){if(k)return-1;h=g.length-1}else if(0>h){if(!k)return-1;h=0}if("string"==typeof c&&(c=$d.from(c,d)),$d.isBuffer(c))return 0===c.length?-1:iX(g,c,h,d,k);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?k?Uint8Array.prototype.indexOf.call(g,c,h):Uint8Array.prototype.lastIndexOf.call(g,c,h):iX(g,[c],h,d,k);throw new TypeError("val must be string, number or Buffer");}function iX(g,c,h,d,k){function n(a,f){return 1===b?a[f]:a.readUInt16BE(f*b)}var b=1,
e=g.length,l=c.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>g.length||2>c.length)return-1;b=2;e/=2;l/=2;h/=2}if(k)for(d=-1;h<e;h++)if(n(g,h)===n(c,-1===d?0:h-d)){if(-1===d&&(d=h),h-d+1===l)return d*b}else-1!==d&&(h-=h-d),d=-1;else for(h+l>e&&(h=e-l);0<=h;h--){e=!0;for(d=0;d<l;d++)if(n(g,h+d)!==n(c,d)){e=!1;break}if(e)return h}return-1}function jX(g,c,h,d){for(var k=[],n=0;n<c.length;++n)k.push(255&c.charCodeAt(n));return OH(k,g,h,d)}
function gX(g,c,h){h=Math.min(g.length,h);for(var d=[];c<h;){var k,n,b=g[c],e=null,l=239<b?4:223<b?3:191<b?2:1;if(c+l<=h)switch(l){case 1:128>b&&(e=b);break;case 2:128==(192&(k=g[c+1]))&&127<(n=(31&b)<<6|63&k)&&(e=n);break;case 3:k=g[c+1];var a=g[c+2];128==(192&k)&&128==(192&a)&&2047<(n=(15&b)<<12|(63&k)<<6|63&a)&&(55296>n||57343<n)&&(e=n);break;case 4:k=g[c+1];a=g[c+2];var f=g[c+3];128==(192&k)&&128==(192&a)&&128==(192&f)&&65535<(n=(15&b)<<18|(63&k)<<12|(63&a)<<6|63&f)&&1114112>n&&(e=n)}null===e?
(e=65533,l=1):65535<e&&(e-=65536,d.push(e>>>10&1023|55296),e=56320|1023&e);d.push(e);c+=l}g=d.length;if(4096>=g)d=String.fromCharCode.apply(String,d);else{h="";for(k=0;k<g;)h+=String.fromCharCode.apply(String,d.slice(k,k+=4096));d=h}return d}function bm(g,c,h){if(0!=g%1||0>g)throw new RangeError("offset is not uint");if(g+c>h)throw new RangeError("Trying to access beyond buffer length");}function Fo(g,c,h,d,k,n){if(!$d.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+d>g.length)throw new RangeError("Index out of range");}function kX(g,c,h,d,k,n){if(h+d>g.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function lX(g,c,h,d,k){return c=+c,h>>>=0,k||kX(g,0,h,4),nB.write(g,c,h,d,23,4),h+4}function mX(g,c,h,d,k){return c=+c,h>>>=0,k||kX(g,0,h,8),nB.write(g,c,h,d,52,8),h+8}function yN(g,c){var h;c=c||1/0;for(var d=g.length,k=null,n=[],b=0;b<
d;++b){if(55295<(h=g.charCodeAt(b))&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}if(b+1===d){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=65536+(k-55296<<10|h-56320)}else k&&-1<(c-=3)&&n.push(239,191,189);if(k=null,128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,63&h|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,63&h|128)}else{if(!(1114112>h))throw Error("Invalid code point");
if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}}return n}function fX(g){return zN.toByteArray(function(c){if(2>(c=(c=c.split("=")[0]).trim().replace(a$,"")).length)return"";for(;0!=c.length%4;)c+="=";return c}(g))}function OH(g,c,h,d){for(var k=0;k<d&&!(k+h>=c.length||k>=g.length);++k)c[k+h]=g[k];return k}function Gv(g,c){return g instanceof c||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===c.name}function nX(g,c){for(var h in g)c[h]=g[h]}function gz(g,
c,h){return Pt(g,c,h)}function GD(g){switch(this.encoding=function(c){var h=function(d){if(!d)return"utf8";for(var k;;)switch(d){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return d;default:if(k)return;d=(""+d).toLowerCase();k=!0}}(c);if("string"!=typeof h&&(AN.isEncoding===oX||!oX(c)))throw Error("Unknown encoding: "+c);return h||c}(g),this.encoding){case "utf16le":this.text=
b$;this.end=c$;g=4;break;case "utf8":this.fillLast=d$;g=4;break;case "base64":this.text=e$;this.end=f$;g=3;break;default:return this.write=g$,this.end=h$,void 0}this.lastTotal=this.lastNeed=0;this.lastChar=AN.allocUnsafe(g)}function BN(g){return 127>=g?0:6==g>>5?2:14==g>>4?3:30==g>>3?4:2==g>>6?-1:-2}function d$(g){var c=this.lastTotal-this.lastNeed;a:if(128!=(192&g[0]))var h=(this.lastNeed=0,"\ufffd");else{if(1<this.lastNeed&&1<g.length){if(128!=(192&g[1])){h=(this.lastNeed=1,"\ufffd");break a}if(2<
this.lastNeed&&2<g.length&&128!=(192&g[2])){h=(this.lastNeed=2,"\ufffd");break a}}h=void 0}return void 0!==h?h:this.lastNeed<=g.length?(g.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,c,0,g.length),this.lastNeed-=g.length,void 0)}function b$(g,c){if(0==(g.length-c)%2){if(c=g.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=
g[g.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",c,g.length-1)}function c$(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function e$(g,c){var h=(g.length-c)%3;return 0===h?g.toString("base64",c):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",
c,g.length-h))}function f$(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function g$(g){return g.toString(this.encoding)}function h$(g){return g&&g.length?this.write(g):""}function Lq(g,c,h){h||(h=Error);var d=function(k,n,b){return b.call(this,"string"==typeof c?c:c(k,n,b))||this};$jscomp.inherits(d,h);d.prototype.name=h.name;d.prototype.code=g;pX[g]=d}function qX(g,c){if(Array.isArray(g)){var h=g.length;return g=g.map(function(d){return String(d)}),
2<h?"one of "+c+" "+g.slice(0,h-1).join(", ")+", or "+g[h-1]:2===h?"one of "+c+" "+g[0]+" or "+g[1]:"of "+c+" "+g[0]}return"of "+c+" "+String(g)}function CN(g){try{if(!DN.localStorage)return!1}catch(c){return!1}g=DN.localStorage[g];return null!=g&&"true"===String(g).toLowerCase()}function rX(g,c){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(g);c&&(d=d.filter(function(k){return Object.getOwnPropertyDescriptor(g,k).enumerable}));h.push.apply(h,d)}return h}
function i$(g,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(g,d.key,d)}}function sX(g,c){EN(g,c);PH(g)}function PH(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function EN(g,c){g.emit("error",c)}function j$(){}function jx(g,c,h){return c in g?Object.defineProperty(g,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):g[c]=h,g}function kx(g,
c){return{value:g,done:c}}function k$(g){var c=g[lx];if(null!==c){var h=g[hz].read();null!==h&&(g[iz]=null,g[lx]=null,g[jz]=null,c(kx(h,!1)))}}function l$(g){tX.nextTick(k$,g)}function uX(){function g(ea,aa,ia){z=z||HD();ea=ea||{};"boolean"!=typeof ia&&(ia=aa instanceof z);this.objectMode=!!ea.objectMode;ia&&(this.objectMode=this.objectMode||!!ea.readableObjectMode);this.highWaterMark=P(this,ea,"readableHighWaterMark",ia);this.buffer=new D;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=
null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==ea.emitClose;this.autoDestroy=!!ea.autoDestroy;this.destroyed=!1;this.defaultEncoding=ea.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ea.encoding&&(S||(S=oB.StringDecoder),this.decoder=new S(ea.encoding),this.encoding=ea.encoding)}function c(ea){if(z=z||HD(),!(this instanceof
c))return new c(ea);this._readableState=new g(ea,this,this instanceof z);this.readable=!0;ea&&("function"==typeof ea.read&&(this._read=ea.read),"function"==typeof ea.destroy&&(this._destroy=ea.destroy));C.call(this)}function h(ea,aa,ia,Aa,ob){L("readableAddChunk",aa);var Nb,Ab=ea._readableState;if(null===aa)Ab.reading=!1,function(Kb,jc){if(L("onEofChunk"),!jc.ended){if(jc.decoder){var ub=jc.decoder.end();ub&&ub.length&&(jc.buffer.push(ub),jc.length+=jc.objectMode?1:ub.length)}jc.ended=!0;jc.sync?
n(Kb):(jc.needReadable=!1,jc.emittedReadable||(jc.emittedReadable=!0,b(Kb)))}}(ea,Ab);else if(ob||(Nb=function(Kb,jc){var ub;var Gc=jc;G.isBuffer(Gc)||Gc instanceof F||"string"==typeof jc||void 0===jc||Kb.objectMode||(ub=new M("chunk",["string","Buffer","Uint8Array"],jc));return ub}(Ab,aa)),Nb)Ra(ea,Nb);else if(Ab.objectMode||aa&&0<aa.length)if("string"==typeof aa||Ab.objectMode||Object.getPrototypeOf(aa)===G.prototype||(aa=G.from(aa)),Aa)Ab.endEmitted?Ra(ea,new fa):d(ea,Ab,aa,!0);else if(Ab.ended)Ra(ea,
new X);else{if(Ab.destroyed)return!1;Ab.reading=!1;Ab.decoder&&!ia?(aa=Ab.decoder.write(aa),Ab.objectMode||0!==aa.length?d(ea,Ab,aa,!1):e(ea,Ab)):d(ea,Ab,aa,!1)}else Aa||(Ab.reading=!1,e(ea,Ab));return!Ab.ended&&(Ab.length<Ab.highWaterMark||0===Ab.length)}function d(ea,aa,ia,Aa){aa.flowing&&0===aa.length&&!aa.sync?(aa.awaitDrain=0,ea.emit("data",ia)):(aa.length+=aa.objectMode?1:ia.length,Aa?aa.buffer.unshift(ia):aa.buffer.push(ia),aa.needReadable&&n(ea));e(ea,aa)}function k(ea,aa){if(0>=ea||0===aa.length&&
aa.ended)ea=0;else if(aa.objectMode)ea=1;else if(ea!=ea)ea=aa.flowing&&aa.length?aa.buffer.head.data.length:aa.length;else{if(ea>aa.highWaterMark){var ia=ea;var Aa=(1073741824<=ia?ia=1073741824:(ia--,ia|=ia>>>1,ia|=ia>>>2,ia|=ia>>>4,ia|=ia>>>8,ia|=ia>>>16,ia++),ia);aa.highWaterMark=Aa}ea=ea<=aa.length?ea:aa.ended?aa.length:(aa.needReadable=!0,0)}return ea}function n(ea){var aa=ea._readableState;L("emitReadable",aa.needReadable,aa.emittedReadable);aa.needReadable=!1;aa.emittedReadable||(L("emitReadable",
aa.flowing),aa.emittedReadable=!0,B.nextTick(b,ea))}function b(ea){var aa=ea._readableState;L("emitReadable_",aa.destroyed,aa.length,aa.ended);aa.destroyed||!aa.length&&!aa.ended||(ea.emit("readable"),aa.emittedReadable=!1);aa.needReadable=!aa.flowing&&!aa.ended&&aa.length<=aa.highWaterMark;q(ea)}function e(ea,aa){aa.readingMore||(aa.readingMore=!0,B.nextTick(l,ea,aa))}function l(ea,aa){for(;!aa.reading&&!aa.ended&&(aa.length<aa.highWaterMark||aa.flowing&&0===aa.length);){var ia=aa.length;if(L("maybeReadMore read 0"),
ea.read(0),ia===aa.length)break}aa.readingMore=!1}function a(ea){var aa=ea._readableState;aa.readableListening=0<ea.listenerCount("readable");aa.resumeScheduled&&!aa.paused?aa.flowing=!0:0<ea.listenerCount("data")&&ea.resume()}function f(ea){L("readable nexttick read 0");ea.read(0)}function m(ea,aa){L("resume",aa.reading);aa.reading||ea.read(0);aa.resumeScheduled=!1;ea.emit("resume");q(ea);aa.flowing&&!aa.reading&&ea.read(0)}function q(ea){var aa=ea._readableState;for(L("flow",aa.flowing);aa.flowing&&
null!==ea.read(););}function r(ea,aa){return 0===aa.length?null:(aa.objectMode?ia=aa.buffer.shift():!ea||ea>=aa.length?(ia=aa.decoder?aa.buffer.join(""):1===aa.buffer.length?aa.buffer.first():aa.buffer.concat(aa.length),aa.buffer.clear()):ia=aa.buffer.consume(ea,aa.decoder),ia);var ia}function u(ea){var aa=ea._readableState;L("endReadable",aa.endEmitted);aa.endEmitted||(aa.ended=!0,B.nextTick(v,aa,ea))}function v(ea,aa){if(L("endReadableNT",ea.endEmitted,ea.length),!ea.endEmitted&&0===ea.length&&
(ea.endEmitted=!0,aa.readable=!1,aa.emit("end"),ea.autoDestroy))ea=aa._writableState,(!ea||ea.autoDestroy&&ea.finished)&&aa.destroy()}function y(ea,aa){for(var ia=0,Aa=ea.length;ia<Aa;ia++)if(ea[ia]===aa)return ia;return-1}if(vX)return FN;vX=!0;var z,B=Qh;FN=c;c.ReadableState=g;Qt.EventEmitter;var C=QH,G=eh.Buffer,F=m$.Uint8Array||function(){},N=Sg;var L=N&&N.debuglog?N.debuglog("stream"):function(){};var S,ha,qa,D=n$;N=wX;var P=xX.getHighWaterMark,J=gs.codes,M=J.ERR_INVALID_ARG_TYPE,X=J.ERR_STREAM_PUSH_AFTER_EOF,
T=J.ERR_METHOD_NOT_IMPLEMENTED,fa=J.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;oh(c,C);var Ra=N.errorOrDestroy,gb=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ea){this._readableState&&(this._readableState.destroyed=ea)}});c.prototype.destroy=N.destroy;c.prototype._undestroy=N.undestroy;c.prototype._destroy=function(ea,aa){aa(ea)};c.prototype.push=function(ea,
aa){var ia,Aa=this._readableState;return Aa.objectMode?ia=!0:"string"==typeof ea&&((aa=aa||Aa.defaultEncoding)!==Aa.encoding&&(ea=G.from(ea,aa),aa=""),ia=!0),h(this,ea,aa,!1,ia)};c.prototype.unshift=function(ea){return h(this,ea,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(ea){S||(S=oB.StringDecoder);ea=new S(ea);this._readableState.decoder=ea;this._readableState.encoding=this._readableState.decoder.encoding;for(var aa=this._readableState.buffer.head,
ia="";null!==aa;)ia+=ea.write(aa.data),aa=aa.next;return this._readableState.buffer.clear(),""!==ia&&this._readableState.buffer.push(ia),this._readableState.length=ia.length,this};return c.prototype.read=function(ea){L("read",ea);ea=parseInt(ea,10);var aa=this._readableState,ia=ea;if(0!==ea&&(aa.emittedReadable=!1),0===ea&&aa.needReadable&&((0!==aa.highWaterMark?aa.length>=aa.highWaterMark:0<aa.length)||aa.ended))return L("read: emitReadable",aa.length,aa.ended),0===aa.length&&aa.ended?u(this):n(this),
null;if(0===(ea=k(ea,aa))&&aa.ended)return 0===aa.length&&u(this),null;var Aa,ob=aa.needReadable;return L("need readable",ob),(0===aa.length||aa.length-ea<aa.highWaterMark)&&L("length less than watermark",ob=!0),aa.ended||aa.reading?L("reading or ended",!1):ob&&(L("do read"),aa.reading=!0,aa.sync=!0,0===aa.length&&(aa.needReadable=!0),this._read(aa.highWaterMark),aa.sync=!1,aa.reading||(ea=k(ia,aa))),null===(Aa=0<ea?r(ea,aa):null)?(aa.needReadable=aa.length<=aa.highWaterMark,ea=0):(aa.length-=ea,
aa.awaitDrain=0),0===aa.length&&(aa.ended||(aa.needReadable=!0),ia!==ea&&aa.ended&&u(this)),null!==Aa&&this.emit("data",Aa),Aa},c.prototype._read=function(ea){Ra(this,new T("_read()"))},c.prototype.pipe=function(ea,aa){function ia(sa,ua){L("onunpipe");sa===ub&&ua&&!1===ua.hasUnpiped&&(ua.hasUnpiped=!0,L("cleanup"),ea.removeListener("close",Ab),ea.removeListener("finish",Kb),ea.removeListener("drain",Yc),ea.removeListener("error",Nb),ea.removeListener("unpipe",ia),ub.removeListener("end",Aa),ub.removeListener("end",
jc),ub.removeListener("data",ob),Z=!0,!Gc.awaitDrain||ea._writableState&&!ea._writableState.needDrain||Yc())}function Aa(){L("onend");ea.end()}function ob(sa){L("ondata");sa=ea.write(sa);L("dest.write",sa);!1===sa&&((1===Gc.pipesCount&&Gc.pipes===ea||1<Gc.pipesCount&&-1!==y(Gc.pipes,ea))&&!Z&&(L("false write response, pause",Gc.awaitDrain),Gc.awaitDrain++),ub.pause())}function Nb(sa){L("onerror",sa);jc();ea.removeListener("error",Nb);0===ea.listeners("error").length&&Ra(ea,sa)}function Ab(){ea.removeListener("finish",
Kb);jc()}function Kb(){L("onfinish");ea.removeListener("close",Ab);jc()}function jc(){L("unpipe");ub.unpipe(ea)}var ub=this,Gc=this._readableState;switch(Gc.pipesCount){case 0:Gc.pipes=ea;break;case 1:Gc.pipes=[Gc.pipes,ea];break;default:Gc.pipes.push(ea)}Gc.pipesCount+=1;L("pipe count=%d opts=%j",Gc.pipesCount,aa);aa=aa&&!1===aa.end||ea===B.stdout||ea===B.stderr?jc:Aa;Gc.endEmitted?B.nextTick(aa):ub.once("end",aa);ea.on("unpipe",ia);var Yc=function(sa){return function(){var ua=sa._readableState;
L("pipeOnDrain",ua.awaitDrain);ua.awaitDrain&&ua.awaitDrain--;0===ua.awaitDrain&&sa.listeners("data").length&&(ua.flowing=!0,q(sa))}}(ub);ea.on("drain",Yc);var Z=!1;return ub.on("data",ob),function(sa,ua,db){if("function"==typeof sa.prependListener)return sa.prependListener(ua,db);sa._events&&sa._events[ua]?Array.isArray(sa._events[ua])?sa._events[ua].unshift(db):sa._events[ua]=[db,sa._events[ua]]:sa.on(ua,db)}(ea,"error",Nb),ea.once("close",Ab),ea.once("finish",Kb),ea.emit("pipe",ub),Gc.flowing||
(L("pipe resume"),ub.resume()),ea},c.prototype.unpipe=function(ea){var aa=this._readableState,ia={hasUnpiped:!1};if(0===aa.pipesCount)return this;if(1===aa.pipesCount)return ea&&ea!==aa.pipes||(ea||(ea=aa.pipes),aa.pipes=null,aa.pipesCount=0,aa.flowing=!1,ea&&ea.emit("unpipe",this,ia)),this;if(!ea){ea=aa.pipes;ia=aa.pipesCount;aa.pipes=null;aa.pipesCount=0;aa.flowing=!1;for(aa=0;aa<ia;aa++)ea[aa].emit("unpipe",this,{hasUnpiped:!1});return this}var Aa=y(aa.pipes,ea);return-1===Aa||(aa.pipes.splice(Aa,
1),--aa.pipesCount,1===aa.pipesCount&&(aa.pipes=aa.pipes[0]),ea.emit("unpipe",this,ia)),this},c.prototype.on=function(ea,aa){aa=C.prototype.on.call(this,ea,aa);var ia=this._readableState;return"data"===ea?(ia.readableListening=0<this.listenerCount("readable"),!1!==ia.flowing&&this.resume()):"readable"===ea&&(ia.endEmitted||ia.readableListening||(ia.readableListening=ia.needReadable=!0,ia.flowing=!1,ia.emittedReadable=!1,L("on readable",ia.length,ia.reading),ia.length?n(this):ia.reading||B.nextTick(f,
this))),aa},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(ea,aa){aa=C.prototype.removeListener.call(this,ea,aa);return"readable"===ea&&B.nextTick(a,this),aa},c.prototype.removeAllListeners=function(ea){var aa=C.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ea&&void 0!==ea||B.nextTick(a,this),aa},c.prototype.resume=function(){var ea=this._readableState;ea.flowing||(L("resume"),ea.flowing=!ea.readableListening,ea.resumeScheduled||(ea.resumeScheduled=
!0,B.nextTick(m,this,ea)));return ea.paused=!1,this},c.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(ea){var aa=this,ia=this._readableState,Aa=!1,ob;for(ob in ea.on("end",function(){if(L("wrapped end"),ia.decoder&&!ia.ended){var Nb=ia.decoder.end();Nb&&Nb.length&&aa.push(Nb)}aa.push(null)}),ea.on("data",
function(Nb){(L("wrapped data"),ia.decoder&&(Nb=ia.decoder.write(Nb)),ia.objectMode&&null==Nb)||(ia.objectMode||Nb&&Nb.length)&&(aa.push(Nb)||(Aa=!0,ea.pause()))}),ea)void 0===this[ob]&&"function"==typeof ea[ob]&&(this[ob]=function(Nb){return function(){return ea[Nb].apply(ea,arguments)}}(ob));for(ob=0;ob<gb.length;ob++)ea.on(gb[ob],this.emit.bind(this,gb[ob]));return this._read=function(Nb){L("wrapped _read",Nb);Aa&&(Aa=!1,ea.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=
function(){return void 0===ha&&(ha=o$),ha(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ea){this._readableState&&(this._readableState.flowing=
ea)}}),c._fromList=r,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(ea,aa){return void 0===qa&&(qa=yX),qa(c,ea,aa)}),FN}function p$(){function g(J){var M=this;this.entry=this.next=null;this.finish=function(){var X=M.entry;for(M.entry=null;X;){var T=X.callback;J.pendingcb--;T(void 0);X=X.next}J.corkedRequestsFree.next=M;!0}}function c(){}function h(J,M,X){f=f||HD();J=J||{};"boolean"!=
typeof X&&(X=M instanceof f);this.objectMode=!!J.objectMode;X&&(this.objectMode=this.objectMode||!!J.writableObjectMode);this.highWaterMark=B(this,J,"writableHighWaterMark",X);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==J.decodeStrings;this.defaultEncoding=J.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(T){!function(fa,Ra){var gb=fa._writableState,ea=
gb.sync,aa=gb.writecb;if("function"!=typeof aa)throw new N;(function(ia){ia.writing=!1;ia.writecb=null;ia.length-=ia.writelen;ia.writelen=0}(gb),Ra)?!function(ia,Aa,ob,Nb,Ab){--Aa.pendingcb;ob?(m.nextTick(Ab,Nb),m.nextTick(a,ia,Aa),ia._writableState.errorEmitted=!0,P(ia,Nb)):(Ab(Nb),ia._writableState.errorEmitted=!0,P(ia,Nb),a(ia,Aa))}(fa,gb,ea,Ra,aa):((Ra=e(gb)||fa.destroyed)||gb.corked||gb.bufferProcessing||!gb.bufferedRequest||b(fa,gb),ea?m.nextTick(n,fa,gb,Ra,aa):n(fa,gb,Ra,aa))}(M,T)};this.writecb=
null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==J.emitClose;this.autoDestroy=!!J.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function d(J){var M=this instanceof(f=f||HD());if(!M&&!y.call(d,this))return new d(J);this._writableState=new h(J,this,M);this.writable=!0;J&&("function"==typeof J.write&&(this._write=J.write),"function"==typeof J.writev&&(this._writev=J.writev),
"function"==typeof J.destroy&&(this._destroy=J.destroy),"function"==typeof J.final&&(this._final=J.final));r.call(this)}function k(J,M,X,T,fa,Ra,gb){M.writelen=T;M.writecb=gb;M.writing=!0;M.sync=!0;M.destroyed?M.onwrite(new S("write")):X?J._writev(fa,M.onwrite):J._write(fa,Ra,M.onwrite);M.sync=!1}function n(J,M,X,T){X||(0===M.length&&M.needDrain&&(M.needDrain=!1,J.emit("drain")),!0);M.pendingcb--;T();a(J,M)}function b(J,M){M.bufferProcessing=!0;var X=M.bufferedRequest;if(J._writev&&X&&X.next){var T=
Array(M.bufferedRequestCount),fa=M.corkedRequestsFree;fa.entry=X;for(var Ra=0,gb=!0;X;)T[Ra]=X,X.isBuf||(gb=!1),X=X.next,Ra+=1;T.allBuffers=gb;k(J,M,!0,M.length,T,"",fa.finish);M.pendingcb++;M.lastBufferedRequest=null;fa.next?(M.corkedRequestsFree=fa.next,fa.next=null):M.corkedRequestsFree=new g(M);M.bufferedRequestCount=0}else{for(;X&&(T=X.chunk,k(J,M,!1,M.objectMode?1:T.length,T,X.encoding,X.callback),X=X.next,M.bufferedRequestCount--,!M.writing););null===X&&(M.lastBufferedRequest=null)}M.bufferedRequest=
X;M.bufferProcessing=!1}function e(J){return J.ending&&0===J.length&&null===J.bufferedRequest&&!J.finished&&!J.writing}function l(J,M){J._final(function(X){M.pendingcb--;X&&P(J,X);M.prefinished=!0;J.emit("prefinish");a(J,M)})}function a(J,M){var X=e(M),T;if(T=X)M.prefinished||M.finalCalled||("function"!=typeof J._final||M.destroyed?(M.prefinished=!0,J.emit("prefinish")):(M.pendingcb++,M.finalCalled=!0,m.nextTick(l,J,M))),T=(!0,0===M.pendingcb&&(M.finished=!0,J.emit("finish"),M.autoDestroy));T&&(M=
J._readableState,(!M||M.autoDestroy&&M.endEmitted)&&J.destroy());return X}if(zX)return GN;zX=!0;var f,m=Qh;GN=d;d.WritableState=h;var q={deprecate:AX},r=QH,u=eh.Buffer,v=q$.Uint8Array||function(){},y,z=wX,B=xX.getHighWaterMark,C=gs.codes,G=C.ERR_INVALID_ARG_TYPE,F=C.ERR_METHOD_NOT_IMPLEMENTED,N=C.ERR_MULTIPLE_CALLBACK,L=C.ERR_STREAM_CANNOT_PIPE,S=C.ERR_STREAM_DESTROYED,ha=C.ERR_STREAM_NULL_VALUES,qa=C.ERR_STREAM_WRITE_AFTER_END,D=C.ERR_UNKNOWN_ENCODING,P=z.errorOrDestroy;return oh(d,r),h.prototype.getBuffer=
function(){for(var J=this.bufferedRequest,M=[];J;)M.push(J),J=J.next;return M},function(){try{Object.defineProperty(h.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(J){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(d,Symbol.hasInstance,{value:function(J){return!!y.call(this,
J)||this===d&&J&&J._writableState instanceof h}})):y=function(J){return J instanceof this},d.prototype.pipe=function(){P(this,new L)},d.prototype.write=function(J,M,X){var T,fa=this._writableState,Ra=!1,gb=!fa.objectMode&&(T=J,u.isBuffer(T)||T instanceof v);return gb&&!u.isBuffer(J)&&(J=u.from(J)),"function"==typeof M&&(X=M,M=null),gb?M="buffer":M||(M=fa.defaultEncoding),"function"!=typeof X&&(X=c),fa.ending?function(ea,aa){var ia=new qa;P(ea,ia);m.nextTick(aa,ia)}(this,X):(gb||function(ea,aa,ia,
Aa){var ob;return null===ia?ob=new ha:"string"==typeof ia||aa.objectMode||(ob=new G("chunk",["string","Buffer"],ia)),!ob||(P(ea,ob),m.nextTick(Aa,ob),!1)}(this,fa,J,X))&&(fa.pendingcb++,Ra=function(ea,aa,ia,Aa,ob,Nb){if(!ia){var Ab=Aa;aa.objectMode||!1===aa.decodeStrings||"string"!=typeof Ab||(Ab=u.from(Ab,ob));Aa!==Ab&&(ia=!0,ob="buffer",Aa=Ab)}var Kb=aa.objectMode?1:Aa.length;aa.length+=Kb;(Ab=aa.length<aa.highWaterMark)||(aa.needDrain=!0);aa.writing||aa.corked?(ea=aa.lastBufferedRequest,aa.lastBufferedRequest=
{chunk:Aa,encoding:ob,isBuf:ia,callback:Nb,next:null},ea?ea.next=aa.lastBufferedRequest:aa.bufferedRequest=aa.lastBufferedRequest,aa.bufferedRequestCount+=1):k(ea,aa,!1,Kb,Aa,ob,Nb);return Ab}(this,fa,gb,J,M,X)),Ra},d.prototype.cork=function(){this._writableState.corked++},d.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,J.writing||J.corked||J.bufferProcessing||!J.bufferedRequest||b(this,J))},d.prototype.setDefaultEncoding=function(J){if("string"==typeof J&&(J=J.toLowerCase()),
!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((J+"").toLowerCase())))throw new D(J);return this._writableState.defaultEncoding=J,this},Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),d.prototype._write=function(J,M,X){X(new F("_write()"))},
d.prototype._writev=null,d.prototype.end=function(J,M,X){var T=this._writableState;"function"==typeof J?(X=J,J=null,M=null):"function"==typeof M&&(X=M,M=null);null!=J&&this.write(J,M);T.corked&&(T.corked=1,this.uncork());T.ending||(J=X,T.ending=!0,a(this,T),J&&(T.finished?m.nextTick(J):this.once("finish",J)),T.ended=!0,this.writable=!1);return this},Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}}),d.prototype.destroy=z.destroy,d.prototype._undestroy=z.undestroy,d.prototype._destroy=function(J,M){M(J)},GN}function HD(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&
(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||d.nextTick(h,this)}function h(a){a.end()}if(BX)return HN;BX=!0;var d=Qh,k=Object.keys||function(a){var f=[],m;for(m in a)f.push(m);return f};HN=g;var n=uX(),b=p$();oh(g,n);k=k(b.prototype);for(var e=0;e<k.length;e++){var l=k[e];g.prototype[l]||(g.prototype[l]=b.prototype[l])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,
"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&
(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),HN}function r$(){}function CX(g,c){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(g);c&&(d=d.filter(function(k){return Object.getOwnPropertyDescriptor(g,k).enumerable}));h.push.apply(h,d)}return h}function s$(g,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(g,d.key,d)}}function DX(g,c){IN(g,c);RH(g)}
function RH(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function IN(g,c){g.emit("error",c)}function mx(g,c,h){return c in g?Object.defineProperty(g,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):g[c]=h,g}function nx(g,c){return{value:g,done:c}}function t$(g){var c=g[ox];if(null!==c){var h=g[kz].read();null!==h&&(g[lz]=null,g[ox]=null,g[mz]=null,c(nx(h,!1)))}}function u$(g){EX.nextTick(t$,g)}function v$(){function g(ea,aa,
ia){z=z||SH();ea=ea||{};"boolean"!=typeof ia&&(ia=aa instanceof z);this.objectMode=!!ea.objectMode;ia&&(this.objectMode=this.objectMode||!!ea.readableObjectMode);this.highWaterMark=P(this,ea,"readableHighWaterMark",ia);this.buffer=new D;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==ea.emitClose;this.autoDestroy=
!!ea.autoDestroy;this.destroyed=!1;this.defaultEncoding=ea.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ea.encoding&&(S||(S=oB.StringDecoder),this.decoder=new S(ea.encoding),this.encoding=ea.encoding)}function c(ea){if(z=z||SH(),!(this instanceof c))return new c(ea);this._readableState=new g(ea,this,this instanceof z);this.readable=!0;ea&&("function"==typeof ea.read&&(this._read=ea.read),"function"==typeof ea.destroy&&(this._destroy=ea.destroy));C.call(this)}
function h(ea,aa,ia,Aa,ob){L("readableAddChunk",aa);var Nb,Ab=ea._readableState;if(null===aa)Ab.reading=!1,function(Kb,jc){if(L("onEofChunk"),!jc.ended){if(jc.decoder){var ub=jc.decoder.end();ub&&ub.length&&(jc.buffer.push(ub),jc.length+=jc.objectMode?1:ub.length)}jc.ended=!0;jc.sync?n(Kb):(jc.needReadable=!1,jc.emittedReadable||(jc.emittedReadable=!0,b(Kb)))}}(ea,Ab);else if(ob||(Nb=function(Kb,jc){var ub;var Gc=jc;G.isBuffer(Gc)||Gc instanceof F||"string"==typeof jc||void 0===jc||Kb.objectMode||
(ub=new M("chunk",["string","Buffer","Uint8Array"],jc));return ub}(Ab,aa)),Nb)Ra(ea,Nb);else if(Ab.objectMode||aa&&0<aa.length)if("string"==typeof aa||Ab.objectMode||Object.getPrototypeOf(aa)===G.prototype||(aa=G.from(aa)),Aa)Ab.endEmitted?Ra(ea,new fa):d(ea,Ab,aa,!0);else if(Ab.ended)Ra(ea,new X);else{if(Ab.destroyed)return!1;Ab.reading=!1;Ab.decoder&&!ia?(aa=Ab.decoder.write(aa),Ab.objectMode||0!==aa.length?d(ea,Ab,aa,!1):e(ea,Ab)):d(ea,Ab,aa,!1)}else Aa||(Ab.reading=!1,e(ea,Ab));return!Ab.ended&&
(Ab.length<Ab.highWaterMark||0===Ab.length)}function d(ea,aa,ia,Aa){aa.flowing&&0===aa.length&&!aa.sync?(aa.awaitDrain=0,ea.emit("data",ia)):(aa.length+=aa.objectMode?1:ia.length,Aa?aa.buffer.unshift(ia):aa.buffer.push(ia),aa.needReadable&&n(ea));e(ea,aa)}function k(ea,aa){if(0>=ea||0===aa.length&&aa.ended)ea=0;else if(aa.objectMode)ea=1;else if(ea!=ea)ea=aa.flowing&&aa.length?aa.buffer.head.data.length:aa.length;else{if(ea>aa.highWaterMark){var ia=ea;var Aa=(1073741824<=ia?ia=1073741824:(ia--,ia|=
ia>>>1,ia|=ia>>>2,ia|=ia>>>4,ia|=ia>>>8,ia|=ia>>>16,ia++),ia);aa.highWaterMark=Aa}ea=ea<=aa.length?ea:aa.ended?aa.length:(aa.needReadable=!0,0)}return ea}function n(ea){var aa=ea._readableState;L("emitReadable",aa.needReadable,aa.emittedReadable);aa.needReadable=!1;aa.emittedReadable||(L("emitReadable",aa.flowing),aa.emittedReadable=!0,B.nextTick(b,ea))}function b(ea){var aa=ea._readableState;L("emitReadable_",aa.destroyed,aa.length,aa.ended);aa.destroyed||!aa.length&&!aa.ended||(ea.emit("readable"),
aa.emittedReadable=!1);aa.needReadable=!aa.flowing&&!aa.ended&&aa.length<=aa.highWaterMark;q(ea)}function e(ea,aa){aa.readingMore||(aa.readingMore=!0,B.nextTick(l,ea,aa))}function l(ea,aa){for(;!aa.reading&&!aa.ended&&(aa.length<aa.highWaterMark||aa.flowing&&0===aa.length);){var ia=aa.length;if(L("maybeReadMore read 0"),ea.read(0),ia===aa.length)break}aa.readingMore=!1}function a(ea){var aa=ea._readableState;aa.readableListening=0<ea.listenerCount("readable");aa.resumeScheduled&&!aa.paused?aa.flowing=
!0:0<ea.listenerCount("data")&&ea.resume()}function f(ea){L("readable nexttick read 0");ea.read(0)}function m(ea,aa){L("resume",aa.reading);aa.reading||ea.read(0);aa.resumeScheduled=!1;ea.emit("resume");q(ea);aa.flowing&&!aa.reading&&ea.read(0)}function q(ea){var aa=ea._readableState;for(L("flow",aa.flowing);aa.flowing&&null!==ea.read(););}function r(ea,aa){return 0===aa.length?null:(aa.objectMode?ia=aa.buffer.shift():!ea||ea>=aa.length?(ia=aa.decoder?aa.buffer.join(""):1===aa.buffer.length?aa.buffer.first():
aa.buffer.concat(aa.length),aa.buffer.clear()):ia=aa.buffer.consume(ea,aa.decoder),ia);var ia}function u(ea){var aa=ea._readableState;L("endReadable",aa.endEmitted);aa.endEmitted||(aa.ended=!0,B.nextTick(v,aa,ea))}function v(ea,aa){if(L("endReadableNT",ea.endEmitted,ea.length),!ea.endEmitted&&0===ea.length&&(ea.endEmitted=!0,aa.readable=!1,aa.emit("end"),ea.autoDestroy))ea=aa._writableState,(!ea||ea.autoDestroy&&ea.finished)&&aa.destroy()}function y(ea,aa){for(var ia=0,Aa=ea.length;ia<Aa;ia++)if(ea[ia]===
aa)return ia;return-1}if(FX)return JN;FX=!0;var z,B=Qh;JN=c;c.ReadableState=g;Qt.EventEmitter;var C=QH,G=eh.Buffer,F=w$.Uint8Array||function(){},N=Sg;var L=N&&N.debuglog?N.debuglog("stream"):function(){};var S,ha,qa,D=x$;N=GX;var P=HX.getHighWaterMark,J=gs.codes,M=J.ERR_INVALID_ARG_TYPE,X=J.ERR_STREAM_PUSH_AFTER_EOF,T=J.ERR_METHOD_NOT_IMPLEMENTED,fa=J.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;oh(c,C);var Ra=N.errorOrDestroy,gb=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ea){this._readableState&&(this._readableState.destroyed=ea)}});c.prototype.destroy=N.destroy;c.prototype._undestroy=N.undestroy;c.prototype._destroy=function(ea,aa){aa(ea)};c.prototype.push=function(ea,aa){var ia,Aa=this._readableState;return Aa.objectMode?ia=!0:"string"==typeof ea&&((aa=aa||Aa.defaultEncoding)!==Aa.encoding&&(ea=G.from(ea,aa),aa=""),ia=!0),h(this,ea,aa,!1,ia)};
c.prototype.unshift=function(ea){return h(this,ea,null,!0,!1)};c.prototype.isPaused=function(){return!1===this._readableState.flowing};c.prototype.setEncoding=function(ea){S||(S=oB.StringDecoder);ea=new S(ea);this._readableState.decoder=ea;this._readableState.encoding=this._readableState.decoder.encoding;for(var aa=this._readableState.buffer.head,ia="";null!==aa;)ia+=ea.write(aa.data),aa=aa.next;return this._readableState.buffer.clear(),""!==ia&&this._readableState.buffer.push(ia),this._readableState.length=
ia.length,this};return c.prototype.read=function(ea){L("read",ea);ea=parseInt(ea,10);var aa=this._readableState,ia=ea;if(0!==ea&&(aa.emittedReadable=!1),0===ea&&aa.needReadable&&((0!==aa.highWaterMark?aa.length>=aa.highWaterMark:0<aa.length)||aa.ended))return L("read: emitReadable",aa.length,aa.ended),0===aa.length&&aa.ended?u(this):n(this),null;if(0===(ea=k(ea,aa))&&aa.ended)return 0===aa.length&&u(this),null;var Aa,ob=aa.needReadable;return L("need readable",ob),(0===aa.length||aa.length-ea<aa.highWaterMark)&&
L("length less than watermark",ob=!0),aa.ended||aa.reading?L("reading or ended",!1):ob&&(L("do read"),aa.reading=!0,aa.sync=!0,0===aa.length&&(aa.needReadable=!0),this._read(aa.highWaterMark),aa.sync=!1,aa.reading||(ea=k(ia,aa))),null===(Aa=0<ea?r(ea,aa):null)?(aa.needReadable=aa.length<=aa.highWaterMark,ea=0):(aa.length-=ea,aa.awaitDrain=0),0===aa.length&&(aa.ended||(aa.needReadable=!0),ia!==ea&&aa.ended&&u(this)),null!==Aa&&this.emit("data",Aa),Aa},c.prototype._read=function(ea){Ra(this,new T("_read()"))},
c.prototype.pipe=function(ea,aa){function ia(sa,ua){L("onunpipe");sa===ub&&ua&&!1===ua.hasUnpiped&&(ua.hasUnpiped=!0,L("cleanup"),ea.removeListener("close",Ab),ea.removeListener("finish",Kb),ea.removeListener("drain",Yc),ea.removeListener("error",Nb),ea.removeListener("unpipe",ia),ub.removeListener("end",Aa),ub.removeListener("end",jc),ub.removeListener("data",ob),Z=!0,!Gc.awaitDrain||ea._writableState&&!ea._writableState.needDrain||Yc())}function Aa(){L("onend");ea.end()}function ob(sa){L("ondata");
sa=ea.write(sa);L("dest.write",sa);!1===sa&&((1===Gc.pipesCount&&Gc.pipes===ea||1<Gc.pipesCount&&-1!==y(Gc.pipes,ea))&&!Z&&(L("false write response, pause",Gc.awaitDrain),Gc.awaitDrain++),ub.pause())}function Nb(sa){L("onerror",sa);jc();ea.removeListener("error",Nb);0===ea.listeners("error").length&&Ra(ea,sa)}function Ab(){ea.removeListener("finish",Kb);jc()}function Kb(){L("onfinish");ea.removeListener("close",Ab);jc()}function jc(){L("unpipe");ub.unpipe(ea)}var ub=this,Gc=this._readableState;switch(Gc.pipesCount){case 0:Gc.pipes=
ea;break;case 1:Gc.pipes=[Gc.pipes,ea];break;default:Gc.pipes.push(ea)}Gc.pipesCount+=1;L("pipe count=%d opts=%j",Gc.pipesCount,aa);aa=aa&&!1===aa.end||ea===B.stdout||ea===B.stderr?jc:Aa;Gc.endEmitted?B.nextTick(aa):ub.once("end",aa);ea.on("unpipe",ia);var Yc=function(sa){return function(){var ua=sa._readableState;L("pipeOnDrain",ua.awaitDrain);ua.awaitDrain&&ua.awaitDrain--;0===ua.awaitDrain&&sa.listeners("data").length&&(ua.flowing=!0,q(sa))}}(ub);ea.on("drain",Yc);var Z=!1;return ub.on("data",
ob),function(sa,ua,db){if("function"==typeof sa.prependListener)return sa.prependListener(ua,db);sa._events&&sa._events[ua]?Array.isArray(sa._events[ua])?sa._events[ua].unshift(db):sa._events[ua]=[db,sa._events[ua]]:sa.on(ua,db)}(ea,"error",Nb),ea.once("close",Ab),ea.once("finish",Kb),ea.emit("pipe",ub),Gc.flowing||(L("pipe resume"),ub.resume()),ea},c.prototype.unpipe=function(ea){var aa=this._readableState,ia={hasUnpiped:!1};if(0===aa.pipesCount)return this;if(1===aa.pipesCount)return ea&&ea!==aa.pipes||
(ea||(ea=aa.pipes),aa.pipes=null,aa.pipesCount=0,aa.flowing=!1,ea&&ea.emit("unpipe",this,ia)),this;if(!ea){ea=aa.pipes;ia=aa.pipesCount;aa.pipes=null;aa.pipesCount=0;aa.flowing=!1;for(aa=0;aa<ia;aa++)ea[aa].emit("unpipe",this,{hasUnpiped:!1});return this}var Aa=y(aa.pipes,ea);return-1===Aa||(aa.pipes.splice(Aa,1),--aa.pipesCount,1===aa.pipesCount&&(aa.pipes=aa.pipes[0]),ea.emit("unpipe",this,ia)),this},c.prototype.on=function(ea,aa){aa=C.prototype.on.call(this,ea,aa);var ia=this._readableState;return"data"===
ea?(ia.readableListening=0<this.listenerCount("readable"),!1!==ia.flowing&&this.resume()):"readable"===ea&&(ia.endEmitted||ia.readableListening||(ia.readableListening=ia.needReadable=!0,ia.flowing=!1,ia.emittedReadable=!1,L("on readable",ia.length,ia.reading),ia.length?n(this):ia.reading||B.nextTick(f,this))),aa},c.prototype.addListener=c.prototype.on,c.prototype.removeListener=function(ea,aa){aa=C.prototype.removeListener.call(this,ea,aa);return"readable"===ea&&B.nextTick(a,this),aa},c.prototype.removeAllListeners=
function(ea){var aa=C.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ea&&void 0!==ea||B.nextTick(a,this),aa},c.prototype.resume=function(){var ea=this._readableState;ea.flowing||(L("resume"),ea.flowing=!ea.readableListening,ea.resumeScheduled||(ea.resumeScheduled=!0,B.nextTick(m,this,ea)));return ea.paused=!1,this},c.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=
!1,this.emit("pause")),this._readableState.paused=!0,this},c.prototype.wrap=function(ea){var aa=this,ia=this._readableState,Aa=!1,ob;for(ob in ea.on("end",function(){if(L("wrapped end"),ia.decoder&&!ia.ended){var Nb=ia.decoder.end();Nb&&Nb.length&&aa.push(Nb)}aa.push(null)}),ea.on("data",function(Nb){(L("wrapped data"),ia.decoder&&(Nb=ia.decoder.write(Nb)),ia.objectMode&&null==Nb)||(ia.objectMode||Nb&&Nb.length)&&(aa.push(Nb)||(Aa=!0,ea.pause()))}),ea)void 0===this[ob]&&"function"==typeof ea[ob]&&
(this[ob]=function(Nb){return function(){return ea[Nb].apply(ea,arguments)}}(ob));for(ob=0;ob<gb.length;ob++)ea.on(gb[ob],this.emit.bind(this,gb[ob]));return this._read=function(Nb){L("wrapped _read",Nb);Aa&&(Aa=!1,ea.resume())},this},"function"==typeof Symbol&&(c.prototype[Symbol.asyncIterator]=function(){return void 0===ha&&(ha=y$),ha(this)}),Object.defineProperty(c.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(c.prototype,
"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(c.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ea){this._readableState&&(this._readableState.flowing=ea)}}),c._fromList=r,Object.defineProperty(c.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(c.from=function(ea,aa){return void 0===qa&&(qa=
yX),qa(c,ea,aa)}),JN}function IX(){function g(J){var M=this;this.entry=this.next=null;this.finish=function(){var X=M.entry;for(M.entry=null;X;){var T=X.callback;J.pendingcb--;T(void 0);X=X.next}J.corkedRequestsFree.next=M;!0}}function c(){}function h(J,M,X){f=f||SH();J=J||{};"boolean"!=typeof X&&(X=M instanceof f);this.objectMode=!!J.objectMode;X&&(this.objectMode=this.objectMode||!!J.writableObjectMode);this.highWaterMark=B(this,J,"writableHighWaterMark",X);this.destroyed=this.finished=this.ended=
this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==J.decodeStrings;this.defaultEncoding=J.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(T){!function(fa,Ra){var gb=fa._writableState,ea=gb.sync,aa=gb.writecb;if("function"!=typeof aa)throw new N;(function(ia){ia.writing=!1;ia.writecb=null;ia.length-=ia.writelen;ia.writelen=0}(gb),Ra)?!function(ia,Aa,ob,Nb,Ab){--Aa.pendingcb;ob?(m.nextTick(Ab,Nb),m.nextTick(a,
ia,Aa),ia._writableState.errorEmitted=!0,P(ia,Nb)):(Ab(Nb),ia._writableState.errorEmitted=!0,P(ia,Nb),a(ia,Aa))}(fa,gb,ea,Ra,aa):((Ra=e(gb)||fa.destroyed)||gb.corked||gb.bufferProcessing||!gb.bufferedRequest||b(fa,gb),ea?m.nextTick(n,fa,gb,Ra,aa):n(fa,gb,Ra,aa))}(M,T)};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==J.emitClose;this.autoDestroy=!!J.autoDestroy;this.bufferedRequestCount=
0;this.corkedRequestsFree=new g(this)}function d(J){var M=this instanceof(f=f||SH());if(!M&&!y.call(d,this))return new d(J);this._writableState=new h(J,this,M);this.writable=!0;J&&("function"==typeof J.write&&(this._write=J.write),"function"==typeof J.writev&&(this._writev=J.writev),"function"==typeof J.destroy&&(this._destroy=J.destroy),"function"==typeof J.final&&(this._final=J.final));r.call(this)}function k(J,M,X,T,fa,Ra,gb){M.writelen=T;M.writecb=gb;M.writing=!0;M.sync=!0;M.destroyed?M.onwrite(new S("write")):
X?J._writev(fa,M.onwrite):J._write(fa,Ra,M.onwrite);M.sync=!1}function n(J,M,X,T){X||(0===M.length&&M.needDrain&&(M.needDrain=!1,J.emit("drain")),!0);M.pendingcb--;T();a(J,M)}function b(J,M){M.bufferProcessing=!0;var X=M.bufferedRequest;if(J._writev&&X&&X.next){var T=Array(M.bufferedRequestCount),fa=M.corkedRequestsFree;fa.entry=X;for(var Ra=0,gb=!0;X;)T[Ra]=X,X.isBuf||(gb=!1),X=X.next,Ra+=1;T.allBuffers=gb;k(J,M,!0,M.length,T,"",fa.finish);M.pendingcb++;M.lastBufferedRequest=null;fa.next?(M.corkedRequestsFree=
fa.next,fa.next=null):M.corkedRequestsFree=new g(M);M.bufferedRequestCount=0}else{for(;X&&(T=X.chunk,k(J,M,!1,M.objectMode?1:T.length,T,X.encoding,X.callback),X=X.next,M.bufferedRequestCount--,!M.writing););null===X&&(M.lastBufferedRequest=null)}M.bufferedRequest=X;M.bufferProcessing=!1}function e(J){return J.ending&&0===J.length&&null===J.bufferedRequest&&!J.finished&&!J.writing}function l(J,M){J._final(function(X){M.pendingcb--;X&&P(J,X);M.prefinished=!0;J.emit("prefinish");a(J,M)})}function a(J,
M){var X=e(M),T;if(T=X)M.prefinished||M.finalCalled||("function"!=typeof J._final||M.destroyed?(M.prefinished=!0,J.emit("prefinish")):(M.pendingcb++,M.finalCalled=!0,m.nextTick(l,J,M))),T=(!0,0===M.pendingcb&&(M.finished=!0,J.emit("finish"),M.autoDestroy));T&&(M=J._readableState,(!M||M.autoDestroy&&M.endEmitted)&&J.destroy());return X}if(JX)return KN;JX=!0;var f,m=Qh;KN=d;d.WritableState=h;var q={deprecate:AX},r=QH,u=eh.Buffer,v=z$.Uint8Array||function(){},y,z=GX,B=HX.getHighWaterMark,C=gs.codes,
G=C.ERR_INVALID_ARG_TYPE,F=C.ERR_METHOD_NOT_IMPLEMENTED,N=C.ERR_MULTIPLE_CALLBACK,L=C.ERR_STREAM_CANNOT_PIPE,S=C.ERR_STREAM_DESTROYED,ha=C.ERR_STREAM_NULL_VALUES,qa=C.ERR_STREAM_WRITE_AFTER_END,D=C.ERR_UNKNOWN_ENCODING,P=z.errorOrDestroy;return oh(d,r),h.prototype.getBuffer=function(){for(var J=this.bufferedRequest,M=[];J;)M.push(J),J=J.next;return M},function(){try{Object.defineProperty(h.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.",
"DEP0003")})}catch(J){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(d,Symbol.hasInstance,{value:function(J){return!!y.call(this,J)||this===d&&J&&J._writableState instanceof h}})):y=function(J){return J instanceof this},d.prototype.pipe=function(){P(this,new L)},d.prototype.write=function(J,M,X){var T,fa=this._writableState,Ra=!1,gb=!fa.objectMode&&(T=J,u.isBuffer(T)||T instanceof
v);return gb&&!u.isBuffer(J)&&(J=u.from(J)),"function"==typeof M&&(X=M,M=null),gb?M="buffer":M||(M=fa.defaultEncoding),"function"!=typeof X&&(X=c),fa.ending?function(ea,aa){var ia=new qa;P(ea,ia);m.nextTick(aa,ia)}(this,X):(gb||function(ea,aa,ia,Aa){var ob;return null===ia?ob=new ha:"string"==typeof ia||aa.objectMode||(ob=new G("chunk",["string","Buffer"],ia)),!ob||(P(ea,ob),m.nextTick(Aa,ob),!1)}(this,fa,J,X))&&(fa.pendingcb++,Ra=function(ea,aa,ia,Aa,ob,Nb){if(!ia){var Ab=Aa;aa.objectMode||!1===
aa.decodeStrings||"string"!=typeof Ab||(Ab=u.from(Ab,ob));Aa!==Ab&&(ia=!0,ob="buffer",Aa=Ab)}var Kb=aa.objectMode?1:Aa.length;aa.length+=Kb;(Ab=aa.length<aa.highWaterMark)||(aa.needDrain=!0);aa.writing||aa.corked?(ea=aa.lastBufferedRequest,aa.lastBufferedRequest={chunk:Aa,encoding:ob,isBuf:ia,callback:Nb,next:null},ea?ea.next=aa.lastBufferedRequest:aa.bufferedRequest=aa.lastBufferedRequest,aa.bufferedRequestCount+=1):k(ea,aa,!1,Kb,Aa,ob,Nb);return Ab}(this,fa,gb,J,M,X)),Ra},d.prototype.cork=function(){this._writableState.corked++},
d.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,J.writing||J.corked||J.bufferProcessing||!J.bufferedRequest||b(this,J))},d.prototype.setDefaultEncoding=function(J){if("string"==typeof J&&(J=J.toLowerCase()),!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((J+"").toLowerCase())))throw new D(J);return this._writableState.defaultEncoding=J,this},Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&
this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),d.prototype._write=function(J,M,X){X(new F("_write()"))},d.prototype._writev=null,d.prototype.end=function(J,M,X){var T=this._writableState;"function"==typeof J?(X=J,J=null,M=null):"function"==typeof M&&(X=M,M=null);null!=J&&this.write(J,M);T.corked&&(T.corked=1,this.uncork());T.ending||(J=X,T.ending=!0,a(this,T),J&&(T.finished?m.nextTick(J):
this.once("finish",J)),T.ended=!0,this.writable=!1);return this},Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}}),d.prototype.destroy=z.destroy,d.prototype._undestroy=z.undestroy,d.prototype._destroy=function(J,M){M(J)},
KN}function SH(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||d.nextTick(h,this)}function h(a){a.end()}if(KX)return LN;KX=!0;var d=Qh,k=Object.keys||function(a){var f=[],m;for(m in a)f.push(m);return f};LN=g;var n=v$(),b=IX();oh(g,n);k=k(b.prototype);for(var e=
0;e<k.length;e++){var l=k[e];g.prototype[l]||(g.prototype[l]=b.prototype[l])}return Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),LN}function A$(g,c){var h=this._transformState;h.transforming=!1;var d=h.writecb;if(null===d)return this.emit("error",new B$);h.writechunk=null;h.writecb=null;null!=c&&this.push(c);d(g);
g=this._readableState;g.reading=!1;(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function Rt(g){if(!(this instanceof Rt))return new Rt(g);TH.call(this,g);this._transformState={afterTransform:A$.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;g&&("function"==typeof g.transform&&(this._transform=g.transform),"function"==typeof g.flush&&(this._flush=g.flush));this.on("prefinish",
C$)}function C$(){var g=this;"function"!=typeof this._flush||this._readableState.destroyed?LX(this,null,null):this._flush(function(c,h){LX(g,c,h)})}function LX(g,c,h){if(c)return g.emit("error",c);if(null!=h&&g.push(h),g._writableState.length)throw new D$;if(g._transformState.transforming)throw new E$;return g.push(null)}function ID(g){if(!(this instanceof ID))return new ID(g);MX.call(this,g)}function NX(g){if(g)throw g;}function F$(g,c,h,d){d=function(b){var e=!1;return function(){e||(e=!0,b.apply(void 0,
arguments))}}(d);var k=!1;g.on("close",function(){k=!0});void 0===MN&&(MN=NN);MN(g,{readable:c,writable:h},function(b){if(b)return d(b);k=!0;d()});var n=!1;return function(b){if(!k&&!n)return n=!0,g.setHeader&&"function"==typeof g.abort?g.abort():"function"==typeof g.destroy?g.destroy():(d(b||new G$("pipe")),void 0)}}function OX(g){g()}function H$(g,c){return g.pipe(c)}function Mq(){ON.call(this||PN)}function UH(){}function Hv(g){PX.call(this);this._block=VH.allocUnsafe(g);this._blockSize=g;this._blockOffset=
0;this._length=[0,0,0,0];this._finalized=!1}function pB(){QX.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878}function WH(g,c){return g<<c|g>>>32-c}function kn(g,c,h,d,k,n,b){return WH(g+(c&h|~c&d)+k+n|0,b)+c|0}function ln(g,c,h,d,k,n,b){return WH(g+(c&d|h&~d)+k+n|0,b)+c|0}function mn(g,c,h,d,k,n,b){return WH(g+(c^h^d)+k+n|0,b)+c|0}function nn(g,c,h,d,k,n,b){return WH(g+(h^(c|~d))+k+n|0,b)+c|0}function qB(){RX.call(this,64);this._a=1732584193;this._b=4023233417;
this._c=2562383102;this._d=271733878;this._e=3285377520}function Nq(g,c){return g<<c|g>>>32-c}function Iv(g,c){(this||Qj)._block=SX.alloc(g);(this||Qj)._finalSize=c;(this||Qj)._blockSize=g;(this||Qj)._len=0}function rB(){this.init();(this||fh)._w=I$;TX.call(this||fh,64,56)}function JD(){this.init();(this||hj)._w=J$;UX.call(this||hj,64,56)}function KD(){this.init();(this||ij)._w=K$;VX.call(this||ij,64,56)}function XH(){this.init();(this||cm)._w=L$;M$.call(this||cm,64,56)}function sB(){this.init();
(this||me)._w=N$;WX.call(this||me,128,112)}function dm(g,c){return g>>>0<c>>>0?1:0}function YH(){this.init();(this||Ki)._w=O$;P$.call(this||Ki,128,112)}function em(g){XX.call(this||pk);(this||pk).hashMode="string"==typeof g;(this||pk).hashMode?(this||pk)[g]=(this||pk)._finalOrDigest:(this||pk).final=(this||pk)._finalOrDigest;(this||pk)._final&&((this||pk).__final=(this||pk)._final,(this||pk)._final=null);(this||pk)._decoder=null;(this||pk)._encoding=null}function ZH(g){YX.call(this,"digest");this._hash=
g}function $H(g,c){ZX.call(this,"digest");"string"==typeof c&&(c=nz.from(c));this._alg=g;this._key=c;64<c.length?c=g(c):64>c.length&&(c=nz.concat([c,Q$],64));g=this._ipad=nz.allocUnsafe(64);for(var h=this._opad=nz.allocUnsafe(64),d=0;64>d;d++)g[d]=54^c[d],h[d]=92^c[d];this._hash=[g]}function LD(g,c){$X.call(this,"digest");"string"==typeof c&&(c=MD.from(c));var h="sha512"===g||"sha384"===g?128:64;(this._alg=g,this._key=c,c.length>h)?c=("rmd160"===g?new QN:RN(g)).update(c).digest():c.length<h&&(c=MD.concat([c,
R$],h));for(var d=this._ipad=MD.allocUnsafe(h),k=this._opad=MD.allocUnsafe(h),n=0;n<h;n++)d[n]=54^c[n],k[n]=92^c[n];this._hash="rmd160"===g?new QN:RN(g);this._hash.update(d)}function aY(g,c){if("string"!=typeof g&&!S$.isBuffer(g))throw new TypeError(c+" must be a buffer or string");}function bY(g,c,h){var d=function(l){function a(f){return T$(l).update(f).digest()}return"rmd160"===l||"ripemd160"===l?function(f){return(new U$).update(f).digest()}:"md5"===l?V$:a}(g),k="sha512"===g||"sha384"===g?128:
64;c.length>k?c=d(c):c.length<k&&(c=hs.concat([c,W$],k));for(var n=hs.allocUnsafe(k+aI[g]),b=hs.allocUnsafe(k+aI[g]),e=0;e<k;e++)n[e]=54^c[e],b[e]=92^c[e];c=hs.allocUnsafe(k+h+4);n.copy(c,0,0,k);(this||is).ipad1=c;(this||is).ipad2=n;(this||is).opad=b;(this||is).alg=g;(this||is).blocksize=k;(this||is).hash=d;(this||is).size=aI[g]}function cY(g,c,h,d,k){return ND.importKey("raw",g,{name:"PBKDF2"},!1,["deriveBits"]).then(function(n){return ND.deriveBits({name:"PBKDF2",salt:c,iterations:h,hash:{name:k}},
n,d<<3)}).then(function(n){return tB.from(n)})}function dY(g,c){if(!g)throw Error(c||"Assertion failed");}function wp(g){this.options=g;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=Array(this.blockSize);this.bufferOff=0}function X$(){this.tmp=Array(2);this.keys=null}function Oq(g){eY.call(this,g);var c=new X$;this._desState=c;this.deriveKeys(c,g.key)}function Y$(g){Z$.equal(g.length,8,"Invalid IV length");this.iv=Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=g[c]}function $$(g,
c){aaa.equal(c.length,24,"Invalid key length");var h=c.slice(0,8),d=c.slice(8,16);c=c.slice(16,24);this.ciphers="encrypt"===g?[px.create({type:"encrypt",key:h}),px.create({type:"decrypt",key:d}),px.create({type:"encrypt",key:c})]:[px.create({type:"decrypt",key:c}),px.create({type:"encrypt",key:d}),px.create({type:"decrypt",key:h})]}function St(g){fY.call(this,g);this._edeState=new $$(this.type,this.options.key)}function bI(g){gY.call(this||cI);var c=g.mode.toLowerCase(),h=OD[c];var d=g.decrypt?"decrypt":
"encrypt";var k=g.key;oz.isBuffer(k)||(k=oz.from(k));"des-ede"!==c&&"des-ede-cbc"!==c||(k=oz.concat([k,k.slice(0,8)]));g=g.iv;oz.isBuffer(g)||(g=oz.from(g));(this||cI)._des=h.create({key:k,iv:g,type:d})}function hY(g,c,h){var d=c.length,k=baa(c,g._cache);return g._cache=g._cache.slice(d),g._prev=PD.concat([g._prev,h?c:k]),k}function caa(g){return g._prev=g._cipher.encryptBlock(g._prev),g._prev}function SN(g){dI.isBuffer(g)||(g=dI.from(g));for(var c=g.length/4|0,h=Array(c),d=0;d<c;d++)h[d]=g.readUInt32BE(4*
d);return h}function TN(g){for(;0<g.length;g++)g[0]=0}function iY(g,c,h,d,k){var n=h[0],b=h[1],e=h[2];h=h[3];var l=g[0]^c[0],a=g[1]^c[1],f=g[2]^c[2];g=g[3]^c[3];for(var m=4,q=1;q<k;q++){var r=n[l>>>24]^b[a>>>16&255]^e[f>>>8&255]^h[255&g]^c[m++];var u=n[a>>>24]^b[f>>>16&255]^e[g>>>8&255]^h[255&l]^c[m++];var v=n[f>>>24]^b[g>>>16&255]^e[l>>>8&255]^h[255&a]^c[m++];var y=n[g>>>24]^b[l>>>16&255]^e[a>>>8&255]^h[255&f]^c[m++];l=r;a=u;f=v;g=y}return r=(d[l>>>24]<<24|d[a>>>16&255]<<16|d[f>>>8&255]<<8|d[255&
g])^c[m++],u=(d[a>>>24]<<24|d[f>>>16&255]<<16|d[g>>>8&255]<<8|d[255&l])^c[m++],v=(d[f>>>24]<<24|d[g>>>16&255]<<16|d[l>>>8&255]<<8|d[255&a])^c[m++],y=(d[g>>>24]<<24|d[l>>>16&255]<<16|d[a>>>8&255]<<8|d[255&f])^c[m++],[r>>>0,u>>>0,v>>>0,y>>>0]}function Pq(g){(this||Qq)._key=SN(g);this._reset()}function jY(g){var c=uB.allocUnsafe(16);return c.writeUInt32BE(g[0]>>>0,0),c.writeUInt32BE(g[1]>>>0,4),c.writeUInt32BE(g[2]>>>0,8),c.writeUInt32BE(g[3]>>>0,12),c}function QD(g){(this||Mm).h=g;(this||Mm).state=
uB.alloc(16,0);(this||Mm).cache=uB.allocUnsafe(0)}function qx(g,c,h,d){kY.call(this||Tg);var k=Go.alloc(4,0);(this||Tg)._cipher=new daa.AES(c);var n=(this||Tg)._cipher.encryptBlock(k);(this||Tg)._ghash=new lY(n);c=this||Tg;k=h;if(12===k.length)c=(c._finID=Go.concat([k,Go.from([0,0,0,1])]),Go.concat([k,Go.from([0,0,0,2])]));else{h=new lY(n);n=k.length;var b=n%16;h.update(k);b&&(b=16-b,h.update(Go.alloc(b,0)));h.update(Go.alloc(8,0));k=8*n;n=Go.alloc(8);n.writeUIntBE(k,0,8);h.update(n);c._finID=h.state;
c=Go.from(c._finID);c=(eaa(c),c)}(this||Tg)._prev=Go.from(c);(this||Tg)._cache=Go.allocUnsafe(0);(this||Tg)._secCache=Go.allocUnsafe(0);(this||Tg)._decrypt=d;(this||Tg)._alen=0;(this||Tg)._len=0;(this||Tg)._mode=g;(this||Tg)._authTag=null;(this||Tg)._called=!1}function RD(g,c,h,d){mY.call(this||js);(this||js)._cipher=new faa.AES(c);(this||js)._prev=UN.from(h);(this||js)._cache=UN.allocUnsafe(0);(this||js)._secCache=UN.allocUnsafe(0);(this||js)._decrypt=d;(this||js)._mode=g}function SD(g,c,h){nY.call(this||
Li);(this||Li)._cache=new eI;(this||Li)._last=void 0;(this||Li)._cipher=new gaa.AES(c);(this||Li)._prev=vB.from(h);(this||Li)._mode=g;(this||Li)._autopadding=!0}function eI(){(this||Li).cache=vB.allocUnsafe(0)}function oY(g,c,h){g=pY[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof h&&(h=vB.from(h)),"GCM"!==g.mode&&h.length!==g.iv)throw new TypeError("invalid iv length "+h.length);if("string"==typeof c&&(c=vB.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+
c.length);return"stream"===g.type?new haa(g.module,c,h,!0):"auth"===g.type?new iaa(g.module,c,h,!0):new SD(g.module,c,h)}function TD(g,c,h){qY.call(this||xj);(this||xj)._cache=new fI;(this||xj)._cipher=new jaa.AES(c);(this||xj)._prev=Jv.from(h);(this||xj)._mode=g;(this||xj)._autopadding=!0}function fI(){(this||xj).cache=Jv.allocUnsafe(0)}function rY(g,c,h){g=sY[g.toLowerCase()];if(!g)throw new TypeError("invalid suite type");if("string"==typeof c&&(c=Jv.from(c)),c.length!==g.key/8)throw new TypeError("invalid key length "+
c.length);if("string"==typeof h&&(h=Jv.from(h)),"GCM"!==g.mode&&h.length!==g.iv)throw new TypeError("invalid iv length "+h.length);return"stream"===g.type?new kaa(g.module,c,h):"auth"===g.type?new laa(g.module,c,h):new TD(g.module,c,h)}function VN(g,c,h){if(g=g.toLowerCase(),rx[g])return WN.createCipheriv(g,c,h);if(Kv[g])return new tY({key:c,iv:h,mode:g});throw new TypeError("invalid suite type");}function XN(g,c,h){if(g=g.toLowerCase(),rx[g])return WN.createDecipheriv(g,c,h);if(Kv[g])return new tY({key:c,
iv:h,mode:g,decrypt:!0});throw new TypeError("invalid suite type");}function sx(g){(this||gI).rand=g}function tx(g){(this||uY).rand=g||new maa.Rand}function YN(g){if(null!==ZN)var c=ZN;else{c=[2];for(var h=1,d=3;1048576>d;d+=2){for(var k=Math.ceil(Math.sqrt(d)),n=0;n<h&&c[n]<=k&&0!=d%c[n];n++);h!==n&&c[n]<=k||(c[h++]=d)}c=(ZN=c,c)}for(h=0;h<c.length;h++)if(0===g.modn(c[h]))return 0===g.cmpn(c[h]);return!0}function $N(g){var c=on.mont(g);return 0===aO.toRed(c).redPow(g.subn(1)).fromRed().cmpn(1)}function UD(g,
c){if(16>g)return new on(2===c||5===c?[140,123]:[140,39]);var h,d;for(c=new on(c);;){for(h=new on(naa(Math.ceil(g/8)));h.bitLength()>g;)h.ishrn(1);if(h.isEven()&&h.iadd(oaa),h.testn(1)||h.iadd(aO),c.cmp(aO)){if(!c.cmp(paa))for(;h.mod(qaa).cmp(raa);)h.iadd(vY)}else for(;h.mod(saa).cmp(taa);)h.iadd(vY);if(YN(d=h.shrn(1))&&YN(h)&&$N(d)&&$N(h)&&wY.test(d)&&wY.test(h))return h}}function uaa(g,c){return c=c||"utf8",Tt.isBuffer(g)||(g=new Tt(g,c)),(this||gi)._pub=new Rq(g),this||gi}function vaa(g,c){return c=
c||"utf8",Tt.isBuffer(g)||(g=new Tt(g,c)),(this||gi)._priv=new Rq(g),this||gi}function ks(g,c,h){this.setGenerator(c);(this||gi).__prime=new Rq(g);(this||gi)._prime=Rq.mont((this||gi).__prime);(this||gi)._primeLen=g.length;(this||gi)._pub=void 0;(this||gi)._priv=void 0;(this||gi)._primeCode=void 0;h?((this||gi).setPublicKey=uaa,(this||gi).setPrivateKey=vaa):(this||gi)._primeCode=8}function hI(g,c){g=new Tt(g.toArray());return c?g.toString(c):g}function iI(g,c){var h=xY(c);var d=h.toRed(ux.mont(c.modulus)).redPow(new ux(c.publicExponent)).fromRed();
h=h.invm(c.modulus);var k=c.modulus.byteLength();g=(ux.mont(c.modulus),(new ux(g)).mul(d).umod(c.modulus));var n=g.toRed(ux.mont(c.prime1)),b=g.toRed(ux.mont(c.prime2));d=c.coefficient;var e=c.prime1;g=c.prime2;n=n.redPow(c.exponent1);b=b.redPow(c.exponent2);n=n.fromRed();b=b.fromRed();d=n.isub(b).imul(d).umod(e);return d.imul(g),b.iadd(d),new waa(b.imul(h).umod(c.modulus).toArray(!1,k))}function xY(g){for(var c=g.modulus.byteLength(),h=new ux(yY(c));0<=h.cmp(g.modulus)||!h.umod(g.prime1)||!h.umod(g.prime2);)h=
new ux(yY(c));return h}function zY(g){return 1===g.length?"0"+g:g}function AY(g){for(var c="",h=0;h<g.length;h++)c+=zY(g[h].toString(16));return c}function pz(g,c){if(g instanceof pz)return g;this._importDER(g,c)||(xaa(g.r&&g.s,"Signature without r or s"),this.r=new jI(g.r,16),this.s=new jI(g.s,16),void 0===g.recoveryParam?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}function yaa(){this.place=0}function bO(g,c){var h=g[c.place++];if(!(128&h))return h;h&=15;for(var d=0,k=0,n=c.place;k<
h;k++,n++)d<<=8,d|=g[n];return c.place=n,d}function BY(g){for(var c=0,h=g.length-1;!(g[c]||128&g[c+1])&&c<h;)c++;return 0===c?g:g.slice(c)}function cO(g,c){if(128>c)return g.push(c),void 0;var h=1+(Math.log(c)/Math.LN2>>>3);for(g.push(128|h);--h;)g.push(c>>>(h<<3)&255);g.push(c)}function CY(g){return(g>>>24|g>>>8&65280|g<<8&16711680|(255&g)<<24)>>>0}function DY(g){return 1===g.length?"0"+g:g}function EY(g){return 7===g.length?"0"+g:6===g.length?"00"+g:5===g.length?"000"+g:4===g.length?"0000"+g:3===
g.length?"00000"+g:2===g.length?"000000"+g:1===g.length?"0000000"+g:g}function kI(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}function Sq(){if(!(this instanceof Sq))return new Sq;FY.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,
4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=zaa;this.W=Array(160)}function ls(){if(!(this instanceof ls))return new ls;GY.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=Aaa;this.W=Array(64)}function Ut(){if(!(this instanceof Ut))return new Ut;HY.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=Array(80)}function Lv(){if(!(this instanceof
Lv))return new Lv;IY.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}function Mv(){if(!(this instanceof Mv))return new Mv;JY.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}function Vt(){if(!(this instanceof Vt))return new Vt;KY.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];
this.endian="little"}function LY(g,c,h,d){return 15>=g?c^h^d:31>=g?c&h|~c&d:47>=g?(c|~h)^d:63>=g?c&d|h&~d:c^(h|~d)}function wB(g,c,h){if(!(this instanceof wB))return new wB(g,c,h);this.Hash=g;this.blockSize=g.blockSize/8;this.outSize=g.outSize/8;this.outer=this.inner=null;this._init(Baa.toArray(c,h))}function Nv(g){if(!(this instanceof Nv))return new Nv(g);this.hash=g.hash;this.predResist=!!g.predResist;this.outLen=this.hash.outSize;this.minEntropy=g.minEntropy||this.hash.hmacStrength;this.V=this.K=
this.reseedInterval=this._reseed=null;var c=qz.toArray(g.entropy,g.entropyEnc||"hex"),h=qz.toArray(g.nonce,g.nonceEnc||"hex");g=qz.toArray(g.pers,g.persEnc||"hex");MY(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(c,h,g)}function ms(g,c){this.type=g;this.p=new rz(c.p,16);this.red=c.prime?rz.red(c.prime):rz.mont(this.p);this.zero=(new rz(0)).toRed(this.red);this.one=(new rz(1)).toRed(this.red);this.two=(new rz(2)).toRed(this.red);this.n=c.n&&new rz(c.n,
16);this.g=c.g&&this.pointFromJSON(c.g,c.gRed);this._wnafT1=Array(4);this._wnafT2=Array(4);this._wnafT3=Array(4);this._wnafT4=Array(4);this._bitLength=this.n?this.n.bitLength():0;g=this.n&&this.p.div(this.n);!g||0<g.cmpn(100)?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function Tq(g,c){this.curve=g;this.type=c;this.precomputed=null}function Uq(g){xB.call(this,"short",g);this.a=(new qk(g.a,16)).toRed(this.red);this.b=(new qk(g.b,16)).toRed(this.red);this.tinv=this.two.redInvm();
this.zeroA=0===this.a.fromRed().cmpn(0);this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3);this.endo=this._getEndomorphism(g);this._endoWnafT1=Array(4);this._endoWnafT2=Array(4)}function fm(g,c,h,d){xB.BasePoint.call(this,g,"affine");null===c&&null===h?(this.x=null,this.y=null,this.inf=!0):(this.x=new qk(c,16),this.y=new qk(h,16),d&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),
this.inf=!1)}function Nm(g,c,h,d){xB.BasePoint.call(this,g,"jacobian");null===c&&null===h&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new qk(0)):(this.x=new qk(c,16),this.y=new qk(h,16),this.z=new qk(d,16));this.x.red||(this.x=this.x.toRed(this.curve.red));this.y.red||(this.y=this.y.toRed(this.curve.red));this.z.red||(this.z=this.z.toRed(this.curve.red));this.zOne=this.z===this.curve.one}function yB(g){lI.call(this,"mont",g);this.a=(new zB(g.a,16)).toRed(this.red);this.b=(new zB(g.b,
16)).toRed(this.red);this.i4=(new zB(4)).toRed(this.red).redInvm();this.two=(new zB(2)).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}function gm(g,c,h){lI.BasePoint.call(this,g,"projective");null===c&&null===h?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new zB(c,16),this.z=new zB(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}function Wt(g){this.extended=this.mOneA=(this.twisted=1!=(0|g.a))&&-1==(0|g.a);mI.call(this,
"edwards",g);this.a=(new Ov(g.a,16)).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=(new Ov(g.c,16)).toRed(this.red);this.c2=this.c.redSqr();this.d=(new Ov(g.d,16)).toRed(this.red);this.dd=this.d.redAdd(this.d);Caa(!this.twisted||0===this.c.fromRed().cmpn(1));this.oneC=1==(0|g.c)}function Kj(g,c,h,d,k){mI.BasePoint.call(this,g,"projective");null===c&&null===h&&null===d?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Ov(c,
16),this.y=new Ov(h,16),this.z=d?new Ov(d,16):this.curve.one,this.t=k&&new Ov(k,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}function NY(g){"short"===g.type?this.curve=new dO.short(g):"edwards"===
g.type?this.curve=new dO.edwards(g):this.curve=new dO.mont(g);this.g=this.curve.g;this.n=this.curve.n;this.hash=g.hash;OY(this.g.validate(),"Invalid curve");OY(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function vx(g,c){Object.defineProperty(eO,g,{configurable:!0,enumerable:!0,get:function(){var h=new NY(c);return Object.defineProperty(eO,g,{configurable:!0,enumerable:!0,value:h}),h}})}function hm(g,c){this.ec=g;this.pub=this.priv=null;c.priv&&this._importPrivate(c.priv,c.privEnc);
c.pub&&this._importPublic(c.pub,c.pubEnc)}function Vq(g){if(!(this instanceof Vq))return new Vq(g);"string"==typeof g&&(PY(fO.hasOwnProperty(g),"Unknown curve "+g),g=fO[g]);g instanceof fO.PresetCurve&&(g={curve:g});this.curve=g.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=g.curve.g;this.g.precompute(g.curve.n.bitLength()+1);this.hash=g.hash||g.curve.hash}function zl(g,c){this.eddsa=g;this._secret=QY(c.secret);g.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=QY(c.pub)}
function wx(g,c){this.eddsa=g;"object"!=typeof c&&(c=Daa(c));Array.isArray(c)&&(c={R:c.slice(0,g.encodingLength),S:c.slice(g.encodingLength)});Eaa(c.R&&c.S,"Signature without R or S");g.isPoint(c.R)&&(this._R=c.R);c.S instanceof Faa&&(this._S=c.S);this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded;this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}function Ho(g){if(Gaa("ed25519"===g,"only tested with ed25519 so far"),!(this instanceof Ho))return new Ho(g);this.curve=g=Haa[g].curve;this.g=g.g;this.g.precompute(g.n.bitLength()+
1);this.pointClass=g.point().constructor;this.encodingLength=Math.ceil(g.n.bitLength()/8);this.hash=Iaa.sha512}function Wq(g){(this||Al)._reporterState={obj:null,path:[],options:g||{},errors:[]}}function AB(g,c){(this||Al).path=g;this.rethrow(c)}function RY(){function g(n,b){if(d.call(this||zg,b),!k.isBuffer(n))return this.error("Input not Buffer"),void 0;(this||zg).base=n;(this||zg).offset=0;(this||zg).length=n.length}function c(n,b){if(Array.isArray(n))(this||zg).length=0,(this||zg).value=n.map(function(e){return e instanceof
c||(e=new c(e,b)),(this||zg).length+=e.length,e},this||zg);else if("number"==typeof n){if(!(0<=n&&255>=n))return b.error("non-byte EncoderBuffer value");(this||zg).value=n;(this||zg).length=1}else if("string"==typeof n)(this||zg).value=n,(this||zg).length=k.byteLength(n);else{if(!k.isBuffer(n))return b.error("Unsupported type: "+typeof n);(this||zg).value=n;(this||zg).length=n.length}}if(SY)return nI;SY=!0;var h=oh,d=VD().Reporter,k=eh.Buffer;return h(g,d),nI.DecoderBuffer=g,g.prototype.save=function(){return{offset:(this||
zg).offset,reporter:d.prototype.save.call(this||zg)}},g.prototype.restore=function(n){var b=new g((this||zg).base);return b.offset=n.offset,b.length=(this||zg).offset,(this||zg).offset=n.offset,d.prototype.restore.call(this||zg,n.reporter),b},g.prototype.isEmpty=function(){return(this||zg).offset===(this||zg).length},g.prototype.readUInt8=function(n){return(this||zg).offset+1<=(this||zg).length?(this||zg).base.readUInt8((this||zg).offset++,!0):this.error(n||"DecoderBuffer overrun")},g.prototype.skip=
function(n,b){if(!((this||zg).offset+n<=(this||zg).length))return this.error(b||"DecoderBuffer overrun");b=new g((this||zg).base);return b._reporterState=(this||zg)._reporterState,b.offset=(this||zg).offset,b.length=(this||zg).offset+n,(this||zg).offset+=n,b},g.prototype.raw=function(n){return(this||zg).base.slice(n?n.offset:(this||zg).offset,(this||zg).length)},nI.EncoderBuffer=c,c.prototype.join=function(n,b){return n||(n=new k((this||zg).length)),b||(b=0),0===(this||zg).length||(Array.isArray((this||
zg).value)?(this||zg).value.forEach(function(e){e.join(n,b);b+=e.length}):("number"==typeof(this||zg).value?n[b]=(this||zg).value:"string"==typeof(this||zg).value?n.write((this||zg).value,b):k.isBuffer((this||zg).value)&&(this||zg).value.copy(n,b),b+=(this||zg).length)),n},nI}function VD(){if(TY)return gO;TY=!0;var g=gO;return g.Reporter=UY.Reporter,g.DecoderBuffer=RY().DecoderBuffer,g.EncoderBuffer=RY().EncoderBuffer,g.Node=function(){function c(a,f){var m={};(this||Uf)._baseState=m;m.enc=a;m.parent=
f||null;m.children=null;m.tag=null;m.args=null;m.reverseArgs=null;m.choice=null;m.optional=!1;m.any=!1;m.obj=!1;m.use=null;m.useDecoder=null;m.key=null;m.default=null;m.explicit=null;m.implicit=null;m.contains=null;m.parent||(m.children=[],this._wrap())}if(VY)return hO;VY=!0;var h=VD().Reporter,d=VD().EncoderBuffer,k=VD().DecoderBuffer,n=Xq,b="seq seqof set setof objid bool gentime utctime null_ enum int objDesc bitstr bmpstr charstr genstr graphstr ia5str iso646str numstr octstr printstr t61str unistr utf8str videostr".split(" "),
e="key obj use optional explicit implicit def choice any contains".split(" ").concat(b);hO=c;var l="enc parent children tag args reverseArgs choice optional any obj use alteredUse key default explicit implicit contains".split(" ");return c.prototype.clone=function(){var a=(this||Uf)._baseState,f={};l.forEach(function(q){f[q]=a[q]});var m=new (this||Uf).constructor(f.parent);return m._baseState=f,m},c.prototype._wrap=function(){var a=(this||Uf)._baseState;e.forEach(function(f){(this||Uf)[f]=function(){var m=
new (this||Uf).constructor(this||Uf);return a.children.push(m),m[f].apply(m,arguments)}},this||Uf)},c.prototype._init=function(a){var f=(this||Uf)._baseState;n(null===f.parent);a.call(this||Uf);f.children=f.children.filter(function(m){return m._baseState.parent===(this||Uf)},this||Uf);n.equal(f.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var f=(this||Uf)._baseState,m=a.filter(function(q){return q instanceof(this||Uf).constructor},this||Uf);a=a.filter(function(q){return!(q instanceof
(this||Uf).constructor)},this||Uf);0!==m.length&&(n(null===f.children),f.children=m,m.forEach(function(q){q._baseState.parent=this||Uf},this||Uf));0!==a.length&&(n(null===f.args),f.args=a,f.reverseArgs=a.map(function(q){if("object"!=typeof q||q.constructor!==Object)return q;var r={};return Object.keys(q).forEach(function(u){u==(0|u)&&(u|=0);r[q[u]]=u}),r}))},"_peekTag _decodeTag _use _decodeStr _decodeObjid _decodeTime _decodeNull _decodeInt _decodeBool _decodeList _encodeComposite _encodeStr _encodeObjid _encodeTime _encodeNull _encodeInt _encodeBool".split(" ").forEach(function(a){c.prototype[a]=
function(){throw Error(a+" not implemented for encoding: "+(this||Uf)._baseState.enc);}}),b.forEach(function(a){c.prototype[a]=function(){var f=(this||Uf)._baseState,m=Array.prototype.slice.call(arguments);return n(null===f.tag),f.tag=a,this._useArgs(m),this||Uf}}),c.prototype.use=function(a){n(a);var f=(this||Uf)._baseState;return n(null===f.use),f.use=a,this||Uf},c.prototype.optional=function(){return(this||Uf)._baseState.optional=!0,this||Uf},c.prototype.def=function(a){var f=(this||Uf)._baseState;
return n(null===f.default),f.default=a,f.optional=!0,this||Uf},c.prototype.explicit=function(a){var f=(this||Uf)._baseState;return n(null===f.explicit&&null===f.implicit),f.explicit=a,this||Uf},c.prototype.implicit=function(a){var f=(this||Uf)._baseState;return n(null===f.explicit&&null===f.implicit),f.implicit=a,this||Uf},c.prototype.obj=function(){var a=(this||Uf)._baseState,f=Array.prototype.slice.call(arguments);return a.obj=!0,0!==f.length&&this._useArgs(f),this||Uf},c.prototype.key=function(a){var f=
(this||Uf)._baseState;return n(null===f.key),f.key=a,this||Uf},c.prototype.any=function(){return(this||Uf)._baseState.any=!0,this||Uf},c.prototype.choice=function(a){var f=(this||Uf)._baseState;return n(null===f.choice),f.choice=a,this._useArgs(Object.keys(a).map(function(m){return a[m]})),this||Uf},c.prototype.contains=function(a){var f=(this||Uf)._baseState;return n(null===f.use),f.contains=a,this||Uf},c.prototype._decode=function(a,f){var m=(this||Uf)._baseState;if(null===m.parent)return a.wrapResult(m.children[0]._decode(a,
f));var q,r=m.default,u=!0,v=null;if(null!==m.key&&(v=a.enterKey(m.key)),m.optional){var y=null;if(null!==m.explicit?y=m.explicit:null!==m.implicit?y=m.implicit:null!==m.tag&&(y=m.tag),null!==y||m.any){if(u=this._peekTag(a,y,m.any),a.isError(u))return u}else{var z=a.save();try{null===m.choice?this._decodeGeneric(m.tag,a,f):this._decodeChoice(a,f),u=!0}catch(C){u=!1}a.restore(z)}}if(m.obj&&u&&(q=a.enterObject()),u){if(null!==m.explicit){y=this._decodeTag(a,m.explicit);if(a.isError(y))return y;a=y}y=
a.offset;if(null===m.use&&null===m.choice){m.any&&(z=a.save());var B=this._decodeTag(a,null!==m.implicit?m.implicit:m.tag,m.any);if(a.isError(B))return B;m.any?r=a.raw(z):a=B}if(f&&f.track&&null!==m.tag&&f.track(a.path(),y,a.length,"tagged"),f&&f.track&&null!==m.tag&&f.track(a.path(),a.offset,a.length,"content"),r=m.any?r:null===m.choice?this._decodeGeneric(m.tag,a,f):this._decodeChoice(a,f),a.isError(r))return r;(m.any||null!==m.choice||null===m.children||m.children.forEach(function(C){C._decode(a,
f)}),!m.contains||"octstr"!==m.tag&&"bitstr"!==m.tag)||(r=new k(r),r=this._getUse(m.contains,a._reporterState.obj)._decode(r,f))}return m.obj&&u&&(r=a.leaveObject(q)),null===m.key||null===r&&!0!==u?null!==v&&a.exitKey(v):a.leaveKey(v,m.key,r),r},c.prototype._decodeGeneric=function(a,f,m){var q=(this||Uf)._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(f,a,q.args[0],m):/str$/.test(a)?this._decodeStr(f,a,m):"objid"===a&&q.args?this._decodeObjid(f,q.args[0],q.args[1],
m):"objid"===a?this._decodeObjid(f,null,null,m):"gentime"===a||"utctime"===a?this._decodeTime(f,a,m):"null_"===a?this._decodeNull(f,m):"bool"===a?this._decodeBool(f,m):"objDesc"===a?this._decodeStr(f,a,m):"int"===a||"enum"===a?this._decodeInt(f,q.args&&q.args[0],m):null!==q.use?this._getUse(q.use,f._reporterState.obj)._decode(f,m):f.error("unknown tag: "+a)},c.prototype._getUse=function(a,f){var m=(this||Uf)._baseState;return m.useDecoder=this._use(a,f),n(null===m.useDecoder._baseState.parent),m.useDecoder=
m.useDecoder._baseState.children[0],m.implicit!==m.useDecoder._baseState.implicit&&(m.useDecoder=m.useDecoder.clone(),m.useDecoder._baseState.implicit=m.implicit),m.useDecoder},c.prototype._decodeChoice=function(a,f){var m=(this||Uf)._baseState,q=null,r=!1;return Object.keys(m.choice).some(function(u){var v=a.save(),y=m.choice[u];try{var z=y._decode(a,f);if(a.isError(z))return!1;q={type:u,value:z};r=!0}catch(B){return a.restore(v),!1}return!0},this||Uf),r?q:a.error("Choice not matched")},c.prototype._createEncoderBuffer=
function(a){return new d(a,(this||Uf).reporter)},c.prototype._encode=function(a,f,m){var q=(this||Uf)._baseState;if(null===q.default||q.default!==a)if(a=this._encodeValue(a,f,m),void 0!==a&&!this._skipDefault(a,f,m))return a},c.prototype._encodeValue=function(a,f,m){var q=(this||Uf)._baseState;if(null===q.parent)return q.children[0]._encode(a,f||new h);var r=null;if((this||Uf).reporter=f,q.optional&&void 0===a){if(null===q.default)return;a=q.default}var u=null,v=!1;if(q.any)r=this._createEncoderBuffer(a);
else if(q.choice)r=this._encodeChoice(a,f);else if(q.contains)u=this._getUse(q.contains,m)._encode(a,f),v=!0;else if(q.children)u=q.children.map(function(z){if("null_"===z._baseState.tag)return z._encode(null,f,a);if(null===z._baseState.key)return f.error("Child should have a key");var B=f.enterKey(z._baseState.key);if("object"!=typeof a)return f.error("Child expected, but input is not object");z=z._encode(a[z._baseState.key],f,a);return f.leaveKey(B),z},this||Uf).filter(function(z){return z}),u=
this._createEncoderBuffer(u);else if("seqof"===q.tag||"setof"===q.tag){if(!q.args||1!==q.args.length)return f.error("Too many args for : "+q.tag);if(!Array.isArray(a))return f.error("seqof/setof, but data is not Array");u=this.clone();u._baseState.implicit=null;u=this._createEncoderBuffer(a.map(function(z){return this._getUse((this||Uf)._baseState.args[0],a)._encode(z,f)},u))}else null!==q.use?r=this._getUse(q.use,m)._encode(a,f):(u=this._encodePrimitive(q.tag,a),v=!0);if(!q.any&&null===q.choice){m=
null!==q.implicit?q.implicit:q.tag;var y=null===q.implicit?"universal":"context";null===m?null===q.use&&f.error("Tag could be omitted only for .use()"):null===q.use&&(r=this._encodeComposite(m,v,y,u))}return null!==q.explicit&&(r=this._encodeComposite(q.explicit,!1,"context",r)),r},c.prototype._encodeChoice=function(a,f){var m=(this||Uf)._baseState,q=m.choice[a.type];return q||n(!1,a.type+" not found in "+JSON.stringify(Object.keys(m.choice))),q._encode(a.value,f)},c.prototype._encodePrimitive=function(a,
f){var m=(this||Uf)._baseState;if(/str$/.test(a))return this._encodeStr(f,a);if("objid"===a&&m.args)return this._encodeObjid(f,m.reverseArgs[0],m.args[1]);if("objid"===a)return this._encodeObjid(f,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(f,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(f,m.args&&m.reverseArgs[0]);if("bool"===a)return this._encodeBool(f);if("objDesc"===a)return this._encodeStr(f,a);throw Error("Unsupported tag: "+
a);},c.prototype._isNumstr=function(a){return/^[0-9 ]*$/.test(a)},c.prototype._isPrintstr=function(a){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(a)},hO}(),gO}function WY(){if(XY)return iO;XY=!0;var g=iO;return g._reverse=function(c){var h={};return Object.keys(c).forEach(function(d){(0|d)==d&&(d|=0);h[c[d]]=d}),h},g.der=function(){if(YY)return xx;YY=!0;var c=WY();return xx.tagClass={0:"universal",1:"application",2:"context",3:"private"},xx.tagClassByName=c._reverse(xx.tagClass),xx.tag={0:"end",
1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},xx.tagByName=c._reverse(xx.tag),xx}(),iO}function ZY(){function g(a){(this||yx).enc="der";(this||yx).name=a.name;(this||yx).entity=a;(this||yx).tree=new c;(this||yx).tree._init(a.body)}
function c(a){b.Node.call(this||yx,"der",a)}function h(a,f){var m=a.readUInt8(f);if(a.isError(m))return m;var q=l.tagClass[m>>6],r=0==(32&m);if(31==(31&m)){var u=m;for(m=0;128==(128&u);){if(u=a.readUInt8(f),a.isError(u))return u;m<<=7;m|=127&u}}else m&=31;return{cls:q,primitive:r,tag:m,tagStr:l.tag[m]}}function d(a,f,m){var q=a.readUInt8(m);if(a.isError(q))return q;if(!f&&128===q)return null;if(0==(128&q))return q;f=127&q;if(4<f)return a.error("length octect is too long");for(var r=q=0;r<f;r++){q<<=
8;var u=a.readUInt8(m);if(a.isError(u))return u;q|=u}return q}if($Y)return jO;$Y=!0;var k=oh,n=oI(),b=n.base,e=n.bignum,l=n.constants.der;return jO=g,g.prototype.decode=function(a,f){return a instanceof b.DecoderBuffer||(a=new b.DecoderBuffer(a,f)),(this||yx).tree._decode(a,f)},k(c,b.Node),c.prototype._peekTag=function(a,f,m){if(a.isEmpty())return!1;var q=a.save(),r=h(a,'Failed to peek tag: "'+f+'"');return a.isError(r)?r:(a.restore(q),r.tag===f||r.tagStr===f||r.tagStr+"of"===f||m)},c.prototype._decodeTag=
function(a,f,m){var q=h(a,'Failed to decode tag of "'+f+'"');if(a.isError(q))return q;var r=d(a,q.primitive,'Failed to get length of "'+f+'"');if(a.isError(r))return r;if(!m&&q.tag!==f&&q.tagStr!==f&&q.tagStr+"of"!==f)return a.error('Failed to match tag: "'+f+'"');if(q.primitive||null!==r)return a.skip(r,'Failed to match body of: "'+f+'"');m=a.save();q=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+(this||yx).tag+'"');return a.isError(q)?q:(r=a.offset-m.offset,a.restore(m),a.skip(r,
'Failed to match body of: "'+f+'"'))},c.prototype._skipUntilEnd=function(a,f){for(;;){var m=h(a,f);if(a.isError(m))return m;var q,r=d(a,m.primitive,f);if(a.isError(r))return r;if(q=m.primitive||null!==r?a.skip(r):this._skipUntilEnd(a,f),a.isError(q))return q;if("end"===m.tagStr)break}},c.prototype._decodeList=function(a,f,m,q){for(f=[];!a.isEmpty();){var r=this._peekTag(a,"end");if(a.isError(r))return r;var u=m.decode(a,"der",q);if(a.isError(u)&&r)break;f.push(u)}return f},c.prototype._decodeStr=
function(a,f){if("bitstr"===f)return f=a.readUInt8(),a.isError(f)?f:{unused:f,data:a.raw()};if("bmpstr"===f){f=a.raw();if(1==f.length%2)return a.error("Decoding of string type: bmpstr length mismatch");a="";for(var m=0;m<f.length/2;m++)a+=String.fromCharCode(f.readUInt16BE(2*m));return a}return"numstr"===f?(f=a.raw().toString("ascii"),this._isNumstr(f)?f:a.error("Decoding of string type: numstr unsupported characters")):"octstr"===f||"objDesc"===f?a.raw():"printstr"===f?(f=a.raw().toString("ascii"),
this._isPrintstr(f)?f:a.error("Decoding of string type: printstr unsupported characters")):/str$/.test(f)?a.raw().toString():a.error("Decoding of string type: "+f+" unsupported")},c.prototype._decodeObjid=function(a,f,m){for(var q=[],r=0;!a.isEmpty();){var u=a.readUInt8();r<<=7;r|=127&u;0==(128&u)&&(q.push(r),r=0)}128&u&&q.push(r);a=q[0]/40|0;r=q[0]%40;if(m=m?q:[a,r].concat(q.slice(1)),f)q=f[m.join(" ")],void 0===q&&(q=f[m.join(".")]),void 0!==q&&(m=q);return m},c.prototype._decodeTime=function(a,
f){var m=a.raw().toString();if("gentime"===f){a=0|m.slice(0,4);f=0|m.slice(4,6);var q=0|m.slice(6,8),r=0|m.slice(8,10),u=0|m.slice(10,12);m=0|m.slice(12,14)}else{if("utctime"!==f)return a.error("Decoding "+f+" time is not supported yet");a=0|m.slice(0,2);f=0|m.slice(2,4);q=0|m.slice(4,6);r=0|m.slice(6,8);u=0|m.slice(8,10);m=0|m.slice(10,12);a=70>a?2E3+a:1900+a}return Date.UTC(a,f-1,q,r,u,m,0)},c.prototype._decodeNull=function(a){return null},c.prototype._decodeBool=function(a){var f=a.readUInt8();
return a.isError(f)?f:0!==f},c.prototype._decodeInt=function(a,f){a=a.raw();a=new e(a);return f&&(a=f[a.toString(10)]||a),a},c.prototype._use=function(a,f){return"function"==typeof a&&(a=a(f)),a._getDecoder("der").tree},jO}function Jaa(){if(aZ)return kO;aZ=!0;var g=kO;return g.der=ZY(),g.pem=function(){function c(n){k.call(this||lO,n);(this||lO).enc="pem"}if(bZ)return mO;bZ=!0;var h=oh,d=eh.Buffer,k=ZY();return h(c,k),mO=c,c.prototype.decode=function(n,b){n=n.toString().split(/[\r\n]+/g);for(var e=
b.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,f=-1,m=0;m<n.length;m++){var q=n[m].match(l);if(null!==q&&q[2]===e){if(-1!==a){if("END"!==q[1])break;f=m;break}if("BEGIN"!==q[1])break;a=m}}if(-1===a||-1===f)throw Error("PEM section not found for: "+e);n=n.slice(a+1,f).join("");n.replace(/[^a-z0-9\+\/=]+/gi,"");n=new d(n,"base64");return k.prototype.decode.call(this||lO,n,b)},mO}(),kO}function cZ(){function g(l){(this||Bl).enc="der";(this||Bl).name=l.name;(this||Bl).entity=l;(this||Bl).tree=
new c;(this||Bl).tree._init(l.body)}function c(l){b.Node.call(this||Bl,"der",l)}function h(l){return 10>l?"0"+l:l}if(dZ)return nO;dZ=!0;var d=oh,k=eh.Buffer,n=oI(),b=n.base,e=n.constants.der;return nO=g,g.prototype.encode=function(l,a){return(this||Bl).tree._encode(l,a).join()},d(c,b.Node),c.prototype._encodeComposite=function(l,a,f,m){var q;a:{var r=l;l=(this||Bl).reporter;"seqof"===r?r="seq":"setof"===r&&(r="set");if(e.tagByName.hasOwnProperty(r))r=e.tagByName[r];else if("number"!=typeof r||(0|
r)!==r){f=l.error("Unknown tag: "+r);break a}31<=r?f=l.error("Multi-octet tag encoding unsupported"):(a||(r|=32),f=r|e.tagClassByName[f||"universal"]<<6)}if(128>m.length)return(q=new k(2))[0]=f,q[1]=m.length,this._createEncoderBuffer([q,m]);l=1;for(a=m.length;256<=a;a>>=8)l++;(q=new k(2+l))[0]=f;q[1]=128|l;a=1+l;for(f=m.length;0<f;a--,f>>=8)q[a]=255&f;return this._createEncoderBuffer([q,m])},c.prototype._encodeStr=function(l,a){if("bitstr"===a)return this._createEncoderBuffer([0|l.unused,l.data]);
if("bmpstr"===a){a=new k(2*l.length);for(var f=0;f<l.length;f++)a.writeUInt16BE(l.charCodeAt(f),2*f);return this._createEncoderBuffer(a)}return"numstr"===a?this._isNumstr(l)?this._createEncoderBuffer(l):(this||Bl).reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===a?this._isPrintstr(l)?this._createEncoderBuffer(l):(this||Bl).reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):
/str$/.test(a)||"objDesc"===a?this._createEncoderBuffer(l):(this||Bl).reporter.error("Encoding of string type: "+a+" unsupported")},c.prototype._encodeObjid=function(l,a,f){if("string"==typeof l){if(!a)return(this||Bl).reporter.error("string objid given, but no values map found");if(!a.hasOwnProperty(l))return(this||Bl).reporter.error("objid not found in values map");l=a[l].split(/[\s\.]+/g);for(a=0;a<l.length;a++)l[a]|=0}else if(Array.isArray(l))for(l=l.slice(),a=0;a<l.length;a++)l[a]|=0;if(!Array.isArray(l))return(this||
Bl).reporter.error("objid() should be either array or string, got: "+JSON.stringify(l));if(!f){if(40<=l[1])return(this||Bl).reporter.error("Second objid identifier OOB");l.splice(0,2,40*l[0]+l[1])}var m=0;for(a=0;a<l.length;a++)for(f=l[a],m++;128<=f;f>>=7)m++;m=new k(m);var q=m.length-1;for(a=l.length-1;0<=a;a--)for(f=l[a],m[q--]=127&f;0<(f>>=7);)m[q--]=128|127&f;return this._createEncoderBuffer(m)},c.prototype._encodeTime=function(l,a){var f;l=new Date(l);return"gentime"===a?f=[h(l.getFullYear()),
h(l.getUTCMonth()+1),h(l.getUTCDate()),h(l.getUTCHours()),h(l.getUTCMinutes()),h(l.getUTCSeconds()),"Z"].join(""):"utctime"===a?f=[h(l.getFullYear()%100),h(l.getUTCMonth()+1),h(l.getUTCDate()),h(l.getUTCHours()),h(l.getUTCMinutes()),h(l.getUTCSeconds()),"Z"].join(""):(this||Bl).reporter.error("Encoding "+a+" time is not supported yet"),this._encodeStr(f,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(l,a){if("string"==typeof l){if(!a)return(this||
Bl).reporter.error("String int or enum given, but no values map");if(!a.hasOwnProperty(l))return(this||Bl).reporter.error("Values map doesn't contain: "+JSON.stringify(l));l=a[l]}"number"==typeof l||k.isBuffer(l)||(a=l.toArray(),!l.sign&&128&a[0]&&a.unshift(0),l=new k(a));if(k.isBuffer(l)){var f=l.length;0===l.length&&f++;f=new k(f);return l.copy(f),0===l.length&&(f[0]=0),this._createEncoderBuffer(f)}if(128>l)return this._createEncoderBuffer(l);if(256>l)return this._createEncoderBuffer([0,l]);f=1;
for(a=l;256<=a;a>>=8)f++;for(a=(f=Array(f)).length-1;0<=a;a--)f[a]=255&l,l>>=8;return 128&f[0]&&f.unshift(0),this._createEncoderBuffer(new k(f))},c.prototype._encodeBool=function(l){return this._createEncoderBuffer(l?255:0)},c.prototype._use=function(l,a){return"function"==typeof l&&(l=l(a)),l._getEncoder("der").tree},c.prototype._skipDefault=function(l,a,f){var m=(this||Bl)._baseState;if(null===m.default)return!1;l=l.join();if(void 0===m.defaultBuffer&&(m.defaultBuffer=this._encodeValue(m.default,
a,f).join()),l.length!==m.defaultBuffer.length)return!1;for(a=0;a<l.length;a++)if(l[a]!==m.defaultBuffer[a])return!1;return!0},nO}function Kaa(){if(eZ)return oO;eZ=!0;var g=oO;return g.der=cZ(),g.pem=function(){function c(k){d.call(this||pO,k);(this||pO).enc="pem"}if(fZ)return qO;fZ=!0;var h=oh,d=cZ();return h(c,d),qO=c,c.prototype.encode=function(k,n){k=d.prototype.encode.call(this||pO,k).toString("base64");for(var b=["-----BEGIN "+n.label+"-----"],e=0;e<k.length;e+=64)b.push(k.slice(e,e+64));return b.push("-----END "+
n.label+"-----"),b.join("\n")},qO}(),oO}function oI(){if(gZ)return rO;gZ=!0;var g=rO;return g.bignum=Uk,g.define=function(){function c(k,n){(this||xp).name=k;(this||xp).body=n;(this||xp).decoders={};(this||xp).encoders={}}if(hZ)return sO;hZ=!0;var h=oI(),d=oh;return sO.define=function(k,n){return new c(k,n)},c.prototype._createNamed=function(k){try{var n=sz.runInThisContext("(function "+(this||xp).name+"(entity) {\n  this._initNamed(entity);\n})")}catch(b){n=function(e){this._initNamed(e)}}return d(n,
k),n.prototype._initNamed=function(b){k.call(this||xp,b)},new n(this||xp)},c.prototype._getDecoder=function(k){return k=k||"der",(this||xp).decoders.hasOwnProperty(k)||((this||xp).decoders[k]=this._createNamed(h.decoders[k])),(this||xp).decoders[k]},c.prototype.decode=function(k,n,b){return this._getDecoder(n).decode(k,b)},c.prototype._getEncoder=function(k){return k=k||"der",(this||xp).encoders.hasOwnProperty(k)||((this||xp).encoders[k]=this._createNamed(h.encoders[k])),(this||xp).encoders[k]},c.prototype.encode=
function(k,n,b){return this._getEncoder(n).encode(k,b)},sO}().define,g.base=VD(),g.constants=WY(),g.decoders=Jaa(),g.encoders=Kaa(),rO}function BB(g){var c;"object"!=typeof g||tO.isBuffer(g)||(c=g.passphrase,g=g.key);"string"==typeof g&&(g=tO.from(g));var h=c;g=g.toString();var d=g.match(Laa);if(d){var k="aes"+d[1],n=pI.from(d[2],"hex");var b=pI.from(d[3].replace(/[\r\n]/g,""),"base64");d=WD(h,n.slice(0,8),parseInt(d[1],10)).key;h=[];k=yp.createDecipheriv(k,d,n);h.push(k.update(b));h.push(k.final());
b=pI.concat(h)}else b=g.match(Maa),b=new pI(b[2].replace(/[\r\n]/g,""),"base64");g=g.match(Naa)[1];switch(g){case "CERTIFICATE":var e=Io.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case "PUBLIC KEY":switch(e||(e=Io.PublicKey.decode(b,"der")),c=e.algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Io.RSAPublicKey.decode(e.subjectPublicKey.data,"der");case "1.2.840.10045.2.1":return e.subjectPrivateKey=e.subjectPublicKey,{type:"ec",data:e};case "1.2.840.10040.4.1":return e.algorithm.params.pub_key=
Io.DSAparam.decode(e.subjectPublicKey.data,"der"),{type:"dsa",data:e.algorithm.params};default:throw Error("unknown key id "+c);}case "ENCRYPTED PRIVATE KEY":h=Io.EncryptedPrivateKey.decode(b,"der"),b=c,k=h.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(h.algorithm.decrypt.kde.kdeparams.iters.toString(),10),e=Oaa[h.algorithm.decrypt.cipher.algo.join(".")],g=h.algorithm.decrypt.cipher.iv,c=h.subjectPrivateKey,h=parseInt(e.split("-")[1],10)/8,b=Paa.pbkdf2Sync(b,k,n,h,"sha1"),e=Qaa.createDecipheriv(e,
b,g),g=[],b=(g.push(e.update(c)),g.push(e.final()),tO.concat(g));case "PRIVATE KEY":switch(c=(e=Io.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case "1.2.840.113549.1.1.1":return Io.RSAPrivateKey.decode(e.subjectPrivateKey,"der");case "1.2.840.10045.2.1":return{curve:e.algorithm.curve,privateKey:Io.ECPrivateKey.decode(e.subjectPrivateKey,"der").privateKey};case "1.2.840.10040.4.1":return e.algorithm.params.priv_key=Io.DSAparam.decode(e.subjectPrivateKey,"der"),{type:"dsa",params:e.algorithm.params};
default:throw Error("unknown key id "+c);}case "RSA PUBLIC KEY":return Io.RSAPublicKey.decode(b,"der");case "RSA PRIVATE KEY":return Io.RSAPrivateKey.decode(b,"der");case "DSA PRIVATE KEY":return{type:"dsa",params:Io.DSAPrivateKey.decode(b,"der")};case "EC PRIVATE KEY":return{curve:(b=Io.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw Error("unknown key type "+g);}}function iZ(g,c,h,d){if((g=new pn(g.toArray())).length<c.byteLength()){var k=new pn(c.byteLength()-
g.length);k.fill(0);g=pn.concat([k,g])}k=h.length;h=(h=uO(h,c)).mod(c);h=new pn(h.toArray());h.length<c.byteLength()&&(c=new pn(c.byteLength()-h.length),c.fill(0),h=pn.concat([c,h]));c=h;h=new pn(k);h.fill(1);k=new pn(k);return k.fill(0),k=tz(d,k).update(h).update(new pn([0])).update(g).update(c).digest(),h=tz(d,k).update(h).digest(),{k:k=tz(d,k).update(h).update(new pn([1])).update(g).update(c).digest(),v:tz(d,k).update(h).digest()}}function uO(g,c){var h=new qI(g);g=(g.length<<3)-c.bitLength();
return 0<g&&h.ishrn(g),h}function jZ(g,c,h){var d;do{for(d=new pn(0);8*d.length<g.bitLength();)c.v=tz(h,c.k).update(c.v).digest(),d=pn.concat([d,c.v]);d=uO(d,g);c.k=tz(h,c.k).update(c.v).update(new pn([0])).digest();c.v=tz(h,c.k).update(c.v).digest()}while(-1!==d.cmp(g));return d}function kZ(g,c){if(0>=g.cmpn(0))throw Error("invalid sig");if(g.cmp(c)>=c)throw Error("invalid sig");}function XD(g){rI.Writable.call(this||rk);g=uz[g];if(!g)throw Error("Unknown message digest");(this||rk)._hashType=g.hash;
(this||rk)._hash=lZ(g.hash);(this||rk)._tag=g.id;(this||rk)._signType=g.sign}function YD(g){rI.Writable.call(this||rk);g=uz[g];if(!g)throw Error("Unknown message digest");(this||rk)._hash=lZ(g.hash);(this||rk)._tag=g.id;(this||rk)._signType=g.sign}function mZ(g){return new XD(g)}function nZ(g){return new YD(g)}function vz(g){(this||Cl).curveType=zp[g];(this||Cl).curveType||((this||Cl).curveType={name:g});(this||Cl).curve=new Raa.ec((this||Cl).curveType.name);(this||Cl).keys=void 0}function vO(g,c,
h){Array.isArray(g)||(g=g.toArray());g=new Pv(g);h&&g.length<h&&(h=new Pv(h-g.length),h.fill(0),g=Pv.concat([h,g]));return c?g.toString(c):g}function oZ(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function pZ(g,c){if("number"!=typeof g||g!=g)throw new TypeError("offset must be a number");if(g>qZ||0>g)throw new TypeError("offset must be a uint32");if(g>rZ||g>c)throw new RangeError("offset out of range");}function sZ(g,
c,h){if("number"!=typeof g||g!=g)throw new TypeError("size must be a number");if(g>qZ||0>g)throw new TypeError("size must be a uint32");if(g+c>h||g>rZ)throw new RangeError("buffer too small");}function tZ(g,c,h,d){return wO.browser?(h=new Uint8Array(g.buffer,c,h),xO.getRandomValues(h),d?(wO.nextTick(function(){d(null,g)}),void 0):g):d?(uZ(h,function(k,n){if(k)return d(k);n.copy(g,c);d(null,g)}),void 0):(uZ(h).copy(g,c),g)}function Saa(g){var c=[];g.replace(/[a-fA-F0-9]{2}/g,function(h){c.push(parseInt(h,
16))});return c}function sI(g){return g&&g.__esModule?g:{default:g}}function vZ(g,c){g=g||[];c=c||{};try{return new Blob(g,c)}catch(k){if("TypeError"!==k.name)throw k;for(var h=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),d=0;d<g.length;d+=1)h.append(g[d]);return h.getBlob(c.type)}}function wZ(g){for(var c=g.length,h=new ArrayBuffer(c),d=new Uint8Array(h),k=0;k<c;k++)d[k]=g.charCodeAt(k);
return h}function xZ(g,c){return vZ([wZ(g)],{type:c})}function yZ(g,c){var h=new FileReader,d="function"===typeof h.readAsBinaryString;h.onloadend=function(k){var n=k.target.result||"";if(d)return c(n);k="";n=new Uint8Array(n);for(var b=n.byteLength,e=0;e<b;e++)k+=String.fromCharCode(n[e]);c(k)};d?h.readAsBinaryString(g):h.readAsArrayBuffer(g)}function zZ(g,c){yZ(g,function(h){c(h)})}function Taa(g,c,h){return g.webkitSlice?g.webkitSlice(c,h):g.slice(c,h)}function Uaa(g,c,h,d,k){if(0<h||d<c.size)c=
Taa(c,h,d);AZ.readAsArrayBuffer(c,function(n){g.append(n);k()})}function Vaa(g,c,h,d,k){if(0<h||d<c.length)c=c.substring(h,d);g.appendBinary(c);k()}function tI(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function ZD(g){var c;if(!g||"object"!==typeof g)return g;if(Array.isArray(g)){var h=[];var d=0;for(c=g.length;d<c;d++)h[d]=ZD(g[d]);return h}if(g instanceof Date)return g.toISOString();if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer||"undefined"!==typeof Blob&&g instanceof
Blob)return g instanceof ArrayBuffer?"function"===typeof g.slice?g=g.slice(0):(d=new ArrayBuffer(g.byteLength),h=new Uint8Array(d),g=new Uint8Array(g),h.set(g),g=d):(d=g.size,h=g.type,g="function"===typeof g.slice?g.slice(0,d,h):g.webkitSlice(0,d,h)),g;h=Object.getPrototypeOf(g);null===h?h=!0:(h=h.constructor,h="function"==typeof h&&h instanceof h&&BZ.call(h)==Waa);if(!h)return g;h={};for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(c=ZD(g[d]),"undefined"!==typeof c&&(h[d]=c));return h}function CZ(g){var c=
!1;return yO(function(h){if(c)throw Error("once called more than once");c=!0;g.apply(this,h)})}function DZ(g){return yO(function(c){c=ZD(c);var h=this,d="function"===typeof c[c.length-1]?c.pop():!1,k=new Promise(function(n,b){var e;try{var l=CZ(function(a,f){a?b(a):n(f)});c.push(l);(e=g.apply(h,c))&&"function"===typeof e.then&&n(e)}catch(a){b(a)}});d&&k.then(function(n){d(null,n)},d);return k})}function Xaa(g,c,h){if(g.constructor.listeners("debug").length){for(var d=["api",g.name,c],k=0;k<h.length-
1;k++)d.push(h[k]);g.constructor.emit("debug",d);var n=h[h.length-1];h[h.length-1]=function(b,e){var l=["api",g.name,c];l=l.concat(b?["error",b]:["success",e]);g.constructor.emit("debug",l);n(b,e)}}}function zO(g,c){for(var h={},d=0,k=c.length;d<k;d++){var n=c[d];n in g&&(h[n]=g[n])}return h}function EZ(g){return g}function Yaa(g){return[{ok:g}]}function Zaa(g){uI&&addEventListener("storage",function(c){g.emit(c.key)})}function CB(){vI.call(this);this._listeners={};Zaa(this)}function AO(g){if("undefined"!==
typeof console&&"function"===typeof console[g]){var c=Array.prototype.slice.call(arguments,1);console[g].apply(console,c)}}function FZ(g){if(!g)return null;var c=g.split("/");return 2===c.length?c:1===c.length?[g,g]:null}function GZ(g,c,h){return new Promise(function(d,k){g.get(c,function(n,b){if(n){if(404!==n.status)return k(n);b={}}n=b._rev;b=h(b);if(!b)return d({updated:!1,rev:n});b._id=c;b._rev=n;d($aa(g,b,h))})})}function $aa(g,c,h){return g.put(c).then(function(d){return{updated:!0,rev:d.rev}},
function(d){if(409!==d.status)throw d;return GZ(g,c._id,h)})}function HZ(g){var c=g.length;if(0<c%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("=");-1===g&&(g=c);return[g,g===c?0:4-g%4]}function aba(g,c,h){for(var d=[],k=c;k<h;k+=3)c=(g[k]<<16&16711680)+(g[k+1]<<8&65280)+(g[k+2]&255),d.push(Xt[c>>18&63]+Xt[c>>12&63]+Xt[c>>6&63]+Xt[c&63]);return d.join("")}function Qv(g){if(g>BO)throw new RangeError('The value "'+g+'" is invalid for option "size"');g=new Uint8Array(g);
Object.setPrototypeOf(g,Nd.prototype);return g}function Nd(g,c,h){if("number"===typeof g){if("string"===typeof c)throw new TypeError('The "string" argument must be of type string. Received type number');return CO(g)}return IZ(g,c,h)}function IZ(g,c,h){if("string"===typeof g){var d=c;if("string"!==typeof d||""===d)d="utf8";if(!Nd.isEncoding(d))throw new TypeError("Unknown encoding: "+d);c=JZ(g,d)|0;h=Qv(c);g=h.write(g,d);g!==c&&(h=h.slice(0,g));return h}if(ArrayBuffer.isView(g))return Yt(g,Uint8Array)?
(g=new Uint8Array(g),g=KZ(g.buffer,g.byteOffset,g.byteLength)):g=DO(g),g;if(null==g)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Yt(g,ArrayBuffer)||g&&Yt(g.buffer,ArrayBuffer)||"undefined"!==typeof SharedArrayBuffer&&(Yt(g,SharedArrayBuffer)||g&&Yt(g.buffer,SharedArrayBuffer)))return KZ(g,c,h);if("number"===typeof g)throw new TypeError('The "value" argument must not be of type number. Received type number');
d=g.valueOf&&g.valueOf();if(null!=d&&d!==g)return Nd.from(d,c,h);if(d=bba(g))return d;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof g[Symbol.toPrimitive])return Nd.from(g[Symbol.toPrimitive]("string"),c,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);}function LZ(g){if("number"!==typeof g)throw new TypeError('"size" argument must be of type number');if(0>g)throw new RangeError('The value "'+
g+'" is invalid for option "size"');}function CO(g){LZ(g);return Qv(0>g?0:EO(g)|0)}function DO(g){for(var c=0>g.length?0:EO(g.length)|0,h=Qv(c),d=0;d<c;d+=1)h[d]=g[d]&255;return h}function KZ(g,c,h){if(0>c||g.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<c+(h||0))throw new RangeError('"length" is outside of buffer bounds');g=void 0===c&&void 0===h?new Uint8Array(g):void 0===h?new Uint8Array(g,c):new Uint8Array(g,c,h);Object.setPrototypeOf(g,Nd.prototype);
return g}function bba(g){if(Nd.isBuffer(g)){var c=EO(g.length)|0,h=Qv(c);if(0===h.length)return h;g.copy(h,0,0,c);return h}if(void 0!==g.length)return(c="number"!==typeof g.length)||(c=g.length,c=c!==c),c?Qv(0):DO(g);if("Buffer"===g.type&&Array.isArray(g.data))return DO(g.data)}function EO(g){if(g>=BO)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+BO.toString(16)+" bytes");return g|0}function JZ(g,c){if(Nd.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Yt(g,
ArrayBuffer))return g.byteLength;if("string"!==typeof g)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);var h=g.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===h)return 0;for(var k=!1;;)switch(c){case "ascii":case "latin1":case "binary":return h;case "utf8":case "utf-8":return FO(g).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*h;case "hex":return h>>>1;case "base64":return wI.toByteArray(MZ(g)).length;
default:if(k)return d?-1:FO(g).length;c=(""+c).toLowerCase();k=!0}}function cba(g,c,h){var d=!1;if(void 0===c||0>c)c=0;if(c>this.length)return"";if(void 0===h||h>this.length)h=this.length;if(0>=h)return"";h>>>=0;c>>>=0;if(h<=c)return"";for(g||(g="utf8");;)switch(g){case "hex":g=this.length;if(!c||0>c)c=0;if(!h||0>h||h>g)h=g;for(g="";c<h;++c)g+=dba[this[c]];return g;case "utf8":case "utf-8":return NZ(this,c,h);case "ascii":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]&127);
return g;case "latin1":case "binary":g="";for(h=Math.min(this.length,h);c<h;++c)g+=String.fromCharCode(this[c]);return g;case "base64":return c=0===c&&h===this.length?wI.fromByteArray(this):wI.fromByteArray(this.slice(c,h)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(c,h);h="";for(g=0;g<c.length-1;g+=2)h+=String.fromCharCode(c[g]+256*c[g+1]);return h;default:if(d)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase();d=!0}}function wz(g,c,h){var d=g[c];g[c]=
g[h];g[h]=d}function OZ(g,c,h,d,k){if(0===g.length)return-1;"string"===typeof h?(d=h,h=0):2147483647<h?h=2147483647:-2147483648>h&&(h=-2147483648);h=+h;h!==h&&(h=k?0:g.length-1);0>h&&(h=g.length+h);if(h>=g.length){if(k)return-1;h=g.length-1}else if(0>h)if(k)h=0;else return-1;"string"===typeof c&&(c=Nd.from(c,d));if(Nd.isBuffer(c))return 0===c.length?-1:PZ(g,c,h,d,k);if("number"===typeof c)return c&=255,"function"===typeof Uint8Array.prototype.indexOf?k?Uint8Array.prototype.indexOf.call(g,c,h):Uint8Array.prototype.lastIndexOf.call(g,
c,h):PZ(g,[c],h,d,k);throw new TypeError("val must be string, number or Buffer");}function PZ(g,c,h,d,k){function n(a,f){return 1===b?a[f]:a.readUInt16BE(f*b)}var b=1,e=g.length,l=c.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>g.length||2>c.length)return-1;b=2;e/=2;l/=2;h/=2}if(k)for(d=-1;h<e;h++)if(n(g,h)===n(c,-1===d?0:h-d)){if(-1===d&&(d=h),h-d+1===l)return d*b}else-1!==d&&(h-=h-d),d=-1;else for(h+l>e&&(h=e-l);0<=h;h--){e=!0;for(d=
0;d<l;d++)if(n(g,h+d)!==n(c,d)){e=!1;break}if(e)return h}return-1}function NZ(g,c,h){h=Math.min(g.length,h);for(var d=[];c<h;){var k=g[c],n=null,b=239<k?4:223<k?3:191<k?2:1;if(c+b<=h)switch(b){case 1:128>k&&(n=k);break;case 2:var e=g[c+1];128===(e&192)&&(k=(k&31)<<6|e&63,127<k&&(n=k));break;case 3:e=g[c+1];var l=g[c+2];128===(e&192)&&128===(l&192)&&(k=(k&15)<<12|(e&63)<<6|l&63,2047<k&&(55296>k||57343<k)&&(n=k));break;case 4:e=g[c+1];l=g[c+2];var a=g[c+3];128===(e&192)&&128===(l&192)&&128===(a&192)&&
(k=(k&15)<<18|(e&63)<<12|(l&63)<<6|a&63,65535<k&&1114112>k&&(n=k))}null===n?(n=65533,b=1):65535<n&&(n-=65536,d.push(n>>>10&1023|55296),n=56320|n&1023);d.push(n);c+=b}g=d.length;if(g<=QZ)d=String.fromCharCode.apply(String,d);else{h="";for(c=0;c<g;)h+=String.fromCharCode.apply(String,d.slice(c,c+=QZ));d=h}return d}function im(g,c,h){if(0!==g%1||0>g)throw new RangeError("offset is not uint");if(g+c>h)throw new RangeError("Trying to access beyond buffer length");}function Jo(g,c,h,d,k,n){if(!Nd.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');
if(c>k||c<n)throw new RangeError('"value" argument is out of bounds');if(h+d>g.length)throw new RangeError("Index out of range");}function RZ(g,c,h,d,k,n){if(h+d>g.length)throw new RangeError("Index out of range");if(0>h)throw new RangeError("Index out of range");}function SZ(g,c,h,d,k){c=+c;h>>>=0;k||RZ(g,c,h,4);DB.write(g,c,h,d,23,4);return h+4}function TZ(g,c,h,d,k){c=+c;h>>>=0;k||RZ(g,c,h,8);DB.write(g,c,h,d,52,8);return h+8}function MZ(g){g=g.split("=")[0];g=g.trim().replace(eba,"");if(2>g.length)return"";
for(;0!==g.length%4;)g+="=";return g}function FO(g,c){c=c||Infinity;for(var h,d=g.length,k=null,n=[],b=0;b<d;++b){h=g.charCodeAt(b);if(55295<h&&57344>h){if(!k){if(56319<h){-1<(c-=3)&&n.push(239,191,189);continue}else if(b+1===d){-1<(c-=3)&&n.push(239,191,189);continue}k=h;continue}if(56320>h){-1<(c-=3)&&n.push(239,191,189);k=h;continue}h=(k-55296<<10|h-56320)+65536}else k&&-1<(c-=3)&&n.push(239,191,189);k=null;if(128>h){if(0>--c)break;n.push(h)}else if(2048>h){if(0>(c-=2))break;n.push(h>>6|192,h&
63|128)}else if(65536>h){if(0>(c-=3))break;n.push(h>>12|224,h>>6&63|128,h&63|128)}else if(1114112>h){if(0>(c-=4))break;n.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw Error("Invalid code point");}return n}function xI(g,c,h,d){for(var k=0;k<d&&!(k+h>=c.length||k>=g.length);++k)c[k+h]=g[k];return k}function Yt(g,c){return g instanceof c||null!=g&&null!=g.constructor&&null!=g.constructor.name&&g.constructor.name===c.name}function zx(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");
(this||Rv).db=g;(this||Rv)._ended=!1;(this||Rv)._nexting=!1}function ns(g){if("object"!==typeof g||null===g)throw new TypeError("First argument must be an abstract-leveldown compliant store");(this||Dl).db=g;(this||Dl)._operations=[];(this||Dl)._written=!1}function Yj(g){(this||Ap).status="new";(this||Ap).supports=fba(g,{status:!0})}function UZ(g,c){var h={},d;for(d in c)if(gba.call(c,d)){var k=c[d];-1!==hba.indexOf(d)&&(k=g._serializeKey(k));h[d]=k}return h}function EB(g,c){VZ.call(this||os,g);(this||
os)._options=c;(this||os)._iterator=null;(this||os)._operations=[]}function xz(g){WZ.call(this||jm,g.supports||{});iba.forEach(function(c){"function"!==typeof g[c]||(this||jm).supports.additionalMethods[c]||((this||jm).supports.additionalMethods[c]=!0)},this||jm);(this||jm)._db=g;(this||jm)._operations=[];XZ(this||jm)}function jba(g){YZ.concat("iterator").forEach(function(c){g["_"+c]=function(){return(this||jm)._db[c].apply((this||jm)._db,arguments)}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=
function(){return(this||jm)._db[c].apply((this||jm)._db,arguments)}})}function XZ(g){YZ.forEach(function(c){g["_"+c]=function(){(this||jm)._operations.push({method:c,args:arguments})}});Object.keys(g.supports.additionalMethods).forEach(function(c){g[c]=function(){(this||jm)._operations.push({method:c,args:arguments})}});g._iterator=function(c){c=new ZZ(g,c);(this||jm)._operations.push({iterator:c});return c}}function $Z(){if(a_)return b_;a_=!0;return b_=Qt.EventEmitter}function FB(){function g(d,
k,n){n||(n=Error);var b=function(e,l,a){return n.call(this,"string"===typeof k?k:k(e,l,a))||this};$jscomp.inherits(b,n);b.prototype.name=n.name;b.prototype.code=d;h[d]=b}function c(d,k){if(Array.isArray(d)){var n=d.length;d=d.map(function(b){return String(b)});return 2<n?"one of "+k+" "+d.slice(0,n-1).join(", ")+", or "+d[n-1]:2===n?"one of "+k+" "+d[0]+" or "+d[1]:"of "+k+" "+d[0]}return"of "+k+" "+String(d)}if(c_)return GO;c_=!0;var h={};g("ERR_INVALID_OPT_VALUE",function(d,k){return'The value "'+
k+'" is invalid for option "'+d+'"'},TypeError);g("ERR_INVALID_ARG_TYPE",function(d,k,n){var b;if(b="string"===typeof k)b="not "===k.substr(0,4);b?(b="must not be",k=k.replace(/^not /,"")):b="must be";var e=void 0;if(void 0===e||e>d.length)e=d.length;" argument"===d.substring(e-9,e)?d="The "+d+" "+b+" "+c(k,"type"):(e=void 0,"number"!==typeof e&&(e=0),e=e+1>d.length?!1:-1!==d.indexOf(".",e),d='The "'+d+'" '+(e?"property":"argument")+" "+b+" "+c(k,"type"));return d+(". Received type "+typeof n)},TypeError);
g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");g("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"});g("ERR_STREAM_PREMATURE_CLOSE","Premature close");g("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"});g("ERR_MULTIPLE_CALLBACK","Callback called multiple times");g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");g("ERR_STREAM_WRITE_AFTER_END","write after end");g("ERR_STREAM_NULL_VALUES","May not write null values to stream",
TypeError);g("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError);g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");GO.codes=h;return GO}function HO(g){try{if(!IO.localStorage)return!1}catch(c){return!1}g=IO.localStorage[g];return null==g?!1:"true"===String(g).toLowerCase()}function d_(g,c){for(var h in g)c[h]=g[h]}function yz(g,c,h){return Zt(g,c,h)}function kba(g){if(!g)return"utf8";for(var c;;)switch(g){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";
case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return g;default:if(c)return;g=(""+g).toLowerCase();c=!0}}function $D(g){var c=kba(g);if("string"!==typeof c&&(JO.isEncoding===e_||!e_(g)))throw Error("Unknown encoding: "+g);this.encoding=c||g;switch(this.encoding){case "utf16le":this.text=lba;this.end=mba;g=4;break;case "utf8":this.fillLast=nba;g=4;break;case "base64":this.text=oba;this.end=pba;g=3;break;default:this.write=qba;this.end=rba;return}this.lastTotal=this.lastNeed=
0;this.lastChar=JO.allocUnsafe(g)}function KO(g){return 127>=g?0:6===g>>5?2:14===g>>4?3:30===g>>3?4:2===g>>6?-1:-2}function sba(g,c,h){var d=c.length-1;if(d<h)return 0;var k=KO(c[d]);if(0<=k)return 0<k&&(g.lastNeed=k-1),k;if(--d<h||-2===k)return 0;k=KO(c[d]);if(0<=k)return 0<k&&(g.lastNeed=k-2),k;if(--d<h||-2===k)return 0;k=KO(c[d]);return 0<=k?(0<k&&(2===k?k=0:g.lastNeed=k-3),k):0}function nba(g){var c=this.lastTotal-this.lastNeed;a:if(128!==(g[0]&192)){this.lastNeed=0;var h="\ufffd"}else{if(1<this.lastNeed&&
1<g.length){if(128!==(g[1]&192)){this.lastNeed=1;h="\ufffd";break a}if(2<this.lastNeed&&2<g.length&&128!==(g[2]&192)){this.lastNeed=2;h="\ufffd";break a}}h=void 0}if(void 0!==h)return h;if(this.lastNeed<=g.length)return g.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,c,0,g.length);this.lastNeed-=g.length}function lba(g,c){if(0===(g.length-c)%2){if(c=g.toString("utf16le",c)){var h=c.charCodeAt(c.length-1);if(55296<=h&&56319>=h)return this.lastNeed=
2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],c.slice(0,-1)}return c}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=g[g.length-1];return g.toString("utf16le",c,g.length-1)}function mba(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):g}function oba(g,c){var h=(g.length-c)%3;if(0===h)return g.toString("base64",c);this.lastNeed=3-h;this.lastTotal=3;1===h?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=
g[g.length-2],this.lastChar[1]=g[g.length-1]);return g.toString("base64",c,g.length-h)}function pba(g){g=g&&g.length?this.write(g):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function qba(g){return g.toString(this.encoding)}function rba(g){return g&&g.length?this.write(g):""}function LO(){function g(k){var n=!1;return function(){if(!n){n=!0;for(var b=arguments.length,e=Array(b),l=0;l<b;l++)e[l]=arguments[l];k.apply(this,e)}}}function c(){}function h(k,n,b){if("function"===
typeof n)return h(k,null,n);n||(n={});b=g(b||c);var e=n.readable||!1!==n.readable&&k.readable,l=n.writable||!1!==n.writable&&k.writable,a=function(){k.writable||m()},f=k._writableState&&k._writableState.finished,m=function(){l=!1;f=!0;e||b.call(k)},q=k._readableState&&k._readableState.endEmitted,r=function(){e=!1;q=!0;l||b.call(k)},u=function(z){b.call(k,z)},v=function(){var z;if(e&&!q)return k._readableState&&k._readableState.ended||(z=new d),b.call(k,z);if(l&&!f)return k._writableState&&k._writableState.ended||
(z=new d),b.call(k,z)},y=function(){k.req.on("finish",m)};if(k.setHeader&&"function"===typeof k.abort)if(k.on("complete",m),k.on("abort",v),k.req)y();else k.on("request",y);else l&&!k._writableState&&(k.on("end",a),k.on("close",a));k.on("end",r);k.on("finish",m);if(!1!==n.error)k.on("error",u);k.on("close",v);return function(){k.removeListener("complete",m);k.removeListener("abort",v);k.removeListener("request",y);k.req&&k.req.removeListener("finish",m);k.removeListener("end",a);k.removeListener("close",
a);k.removeListener("finish",m);k.removeListener("end",r);k.removeListener("error",u);k.removeListener("close",v)}}if(f_)return g_;f_=!0;var d=FB().codes.ERR_STREAM_PREMATURE_CLOSE;return g_=h}function tba(){if(h_)return i_;h_=!0;return i_=function(){throw Error("Readable.from is not available in the browser");}}function uba(){function g(e,l){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);l&&(f=f.filter(function(m){return Object.getOwnPropertyDescriptor(e,
m).enumerable}));a.push.apply(a,f)}return a}function c(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?arguments[l]:{};l%2?g(Object(a),!0).forEach(function(f){var m=a[f];f in e?Object.defineProperty(e,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):e[f]=m}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach(function(f){Object.defineProperty(e,f,Object.getOwnPropertyDescriptor(a,f))})}return e}function h(e,l){for(var a=
0;a<l.length;a++){var f=l[a];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(e,f.key,f)}}function d(e,l,a){l&&h(e.prototype,l);a&&h(e,a);return e}if(j_)return k_;j_=!0;var k=eh.Buffer,n=l_.inspect,b=n&&n.custom||"inspect";return k_=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}d(e,[{key:"push",value:function(l){l={data:l,next:null};0<this.length?this.tail.next=
l:this.head=l;this.tail=l;++this.length}},{key:"unshift",value:function(l){l={data:l,next:this.head};0===this.length&&(this.tail=l);this.head=l;++this.length}},{key:"shift",value:function(){if(0!==this.length){var l=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return l}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(l){if(0===this.length)return"";for(var a=this.head,f=""+a.data;a=a.next;)f+=l+a.data;return f}},
{key:"concat",value:function(l){if(0===this.length)return k.alloc(0);l=k.allocUnsafe(l>>>0);for(var a=this.head,f=0;a;)k.prototype.copy.call(a.data,l,f),f+=a.data.length,a=a.next;return l}},{key:"consume",value:function(l,a){l<this.head.data.length?(a=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):a=l===this.head.data.length?this.shift():a?this._getString(l):this._getBuffer(l);return a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var a=
this.head,f=1,m=a.data;for(l-=m.length;a=a.next;){var q=a.data,r=l>q.length?q.length:l;m=r===q.length?m+q:m+q.slice(0,l);l-=r;if(0===l){r===q.length?(++f,this.head=a.next?a.next:this.tail=null):(this.head=a,a.data=q.slice(r));break}++f}this.length-=f;return m}},{key:"_getBuffer",value:function(l){var a=k.allocUnsafe(l),f=this.head,m=1;f.data.copy(a);for(l-=f.data.length;f=f.next;){var q=f.data,r=l>q.length?q.length:l;q.copy(a,a.length-l,0,r);l-=r;if(0===l){r===q.length?(++m,this.head=f.next?f.next:
this.tail=null):(this.head=f,f.data=q.slice(r));break}++m}this.length-=m;return a}},{key:b,value:function(l,a){return n(this,c({},a,{depth:0,customInspect:!1}))}}]);return e}()}function m_(){function g(k,n){h(k,n);c(k)}function c(k){k._writableState&&!k._writableState.emitClose||k._readableState&&!k._readableState.emitClose||k.emit("close")}function h(k,n){k.emit("error",n)}if(n_)return o_;n_=!0;var d=Qh;return o_={destroy:function(k,n){var b=this,e=this._writableState&&this._writableState.destroyed;
if(this._readableState&&this._readableState.destroyed||e)return n?n(k):k&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(h,this,k)):d.nextTick(h,this,k)),this;this._readableState&&(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(k||null,function(l){!n&&l?b._writableState?b._writableState.errorEmitted?d.nextTick(c,b):(b._writableState.errorEmitted=!0,d.nextTick(g,b,l)):d.nextTick(g,b,l):
n?(d.nextTick(c,b),n(l)):d.nextTick(c,b)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(k,
n){var b=k._readableState,e=k._writableState;b&&b.autoDestroy||e&&e.autoDestroy?k.destroy(n):k.emit("error",n)}}}function p_(){if(q_)return r_;q_=!0;var g=FB().codes.ERR_INVALID_OPT_VALUE;return r_={getHighWaterMark:function(c,h,d,k){h=null!=h.highWaterMark?h.highWaterMark:k?h[d]:null;if(null!=h){if(!isFinite(h)||Math.floor(h)!==h||0>h)throw new g(k?d:"highWaterMark",h);return Math.floor(h)}return c.objectMode?16:16384}}}function s_(){function g(J){var M=this;this.entry=this.next=null;this.finish=
function(){var X=M.entry;for(M.entry=null;X;){var T=X.callback;J.pendingcb--;T(void 0);X=X.next}J.corkedRequestsFree.next=M}}function c(){}function h(J,M,X){m=m||GB();J=J||{};"boolean"!==typeof X&&(X=M instanceof m);this.objectMode=!!J.objectMode;X&&(this.objectMode=this.objectMode||!!J.writableObjectMode);this.highWaterMark=z(this,J,"writableHighWaterMark",X);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==J.decodeStrings;this.defaultEncoding=
J.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(T){var fa=M._writableState,Ra=fa.sync,gb=fa.writecb;if("function"!==typeof gb)throw new F;fa.writing=!1;fa.writecb=null;fa.length-=fa.writelen;fa.writelen=0;T?(--fa.pendingcb,Ra?(f.nextTick(gb,T),f.nextTick(a,M,fa),M._writableState.errorEmitted=!0,D(M,T)):(gb(T),M._writableState.errorEmitted=!0,D(M,T),a(M,fa))):((T=e(fa)||M.destroyed)||fa.corked||fa.bufferProcessing||!fa.bufferedRequest||
b(M,fa),Ra?f.nextTick(n,M,fa,T,gb):n(M,fa,T,gb))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==J.emitClose;this.autoDestroy=!!J.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new g(this)}function d(J){m=m||GB();var M=this instanceof m;if(!M&&!P.call(d,this))return new d(J);this._writableState=new h(J,this,M);this.writable=!0;J&&("function"===typeof J.write&&(this._write=
J.write),"function"===typeof J.writev&&(this._writev=J.writev),"function"===typeof J.destroy&&(this._destroy=J.destroy),"function"===typeof J.final&&(this._final=J.final));r.call(this)}function k(J,M,X,T,fa,Ra,gb){M.writelen=T;M.writecb=gb;M.writing=!0;M.sync=!0;if(M.destroyed)M.onwrite(new L("write"));else X?J._writev(fa,M.onwrite):J._write(fa,Ra,M.onwrite);M.sync=!1}function n(J,M,X,T){!X&&0===M.length&&M.needDrain&&(M.needDrain=!1,J.emit("drain"));M.pendingcb--;T();a(J,M)}function b(J,M){M.bufferProcessing=
!0;var X=M.bufferedRequest;if(J._writev&&X&&X.next){var T=Array(M.bufferedRequestCount),fa=M.corkedRequestsFree;fa.entry=X;for(var Ra=0,gb=!0;X;)T[Ra]=X,X.isBuf||(gb=!1),X=X.next,Ra+=1;T.allBuffers=gb;k(J,M,!0,M.length,T,"",fa.finish);M.pendingcb++;M.lastBufferedRequest=null;fa.next?(M.corkedRequestsFree=fa.next,fa.next=null):M.corkedRequestsFree=new g(M);M.bufferedRequestCount=0}else{for(;X&&(T=X.chunk,k(J,M,!1,M.objectMode?1:T.length,T,X.encoding,X.callback),X=X.next,M.bufferedRequestCount--,!M.writing););
null===X&&(M.lastBufferedRequest=null)}M.bufferedRequest=X;M.bufferProcessing=!1}function e(J){return J.ending&&0===J.length&&null===J.bufferedRequest&&!J.finished&&!J.writing}function l(J,M){J._final(function(X){M.pendingcb--;X&&D(J,X);M.prefinished=!0;J.emit("prefinish");a(J,M)})}function a(J,M){var X=e(M);X&&(M.prefinished||M.finalCalled||("function"!==typeof J._final||M.destroyed?(M.prefinished=!0,J.emit("prefinish")):(M.pendingcb++,M.finalCalled=!0,f.nextTick(l,J,M))),0===M.pendingcb&&(M.finished=
!0,J.emit("finish"),M.autoDestroy&&(M=J._readableState,(!M||M.autoDestroy&&M.endEmitted)&&J.destroy())));return X}if(t_)return MO;t_=!0;var f=Qh;MO=d;var m;d.WritableState=h;var q={deprecate:vba},r=$Z(),u=eh.Buffer,v=wba.Uint8Array||function(){},y=m_(),z=p_().getHighWaterMark,B=FB().codes,C=B.ERR_INVALID_ARG_TYPE,G=B.ERR_METHOD_NOT_IMPLEMENTED,F=B.ERR_MULTIPLE_CALLBACK,N=B.ERR_STREAM_CANNOT_PIPE,L=B.ERR_STREAM_DESTROYED,S=B.ERR_STREAM_NULL_VALUES,ha=B.ERR_STREAM_WRITE_AFTER_END,qa=B.ERR_UNKNOWN_ENCODING,
D=y.errorOrDestroy;Rj(d,r);h.prototype.getBuffer=function(){for(var J=this.bufferedRequest,M=[];J;)M.push(J),J=J.next;return M};(function(){try{Object.defineProperty(h.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(J){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]){var P=Function.prototype[Symbol.hasInstance];
Object.defineProperty(d,Symbol.hasInstance,{value:function(J){return P.call(this,J)?!0:this!==d?!1:J&&J._writableState instanceof h}})}else P=function(J){return J instanceof this};d.prototype.pipe=function(){D(this,new N)};d.prototype.write=function(J,M,X){var T=this._writableState,fa=!1,Ra;if(Ra=!T.objectMode)Ra=J,Ra=u.isBuffer(Ra)||Ra instanceof v;Ra&&!u.isBuffer(J)&&(J=u.from(J));"function"===typeof M&&(X=M,M=null);Ra?M="buffer":M||(M=T.defaultEncoding);"function"!==typeof X&&(X=c);if(T.ending)T=
X,X=new ha,D(this,X),f.nextTick(T,X);else{var gb;if(!(gb=Ra)){gb=J;var ea=X,aa;null===gb?aa=new S:"string"===typeof gb||T.objectMode||(aa=new C("chunk",["string","Buffer"],gb));aa?(D(this,aa),f.nextTick(ea,aa),gb=!1):gb=!0}gb&&(T.pendingcb++,fa=Ra,fa||(aa=J,T.objectMode||!1===T.decodeStrings||"string"!==typeof aa||(aa=u.from(aa,M)),J!==aa&&(fa=!0,M="buffer",J=aa)),Ra=T.objectMode?1:J.length,T.length+=Ra,aa=T.length<T.highWaterMark,aa||(T.needDrain=!0),T.writing||T.corked?(Ra=T.lastBufferedRequest,
T.lastBufferedRequest={chunk:J,encoding:M,isBuf:fa,callback:X,next:null},Ra?Ra.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1):k(this,T,!1,Ra,J,M,X),fa=aa)}return fa};d.prototype.cork=function(){this._writableState.corked++};d.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,J.writing||J.corked||J.bufferProcessing||!J.bufferedRequest||b(this,J))};d.prototype.setDefaultEncoding=function(J){"string"===typeof J&&(J=J.toLowerCase());
if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((J+"").toLowerCase())))throw new qa(J);this._writableState.defaultEncoding=J;return this};Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});d.prototype._write=function(J,M,X){X(new G("_write()"))};
d.prototype._writev=null;d.prototype.end=function(J,M,X){var T=this._writableState;"function"===typeof J?(X=J,M=J=null):"function"===typeof M&&(X=M,M=null);null!==J&&void 0!==J&&this.write(J,M);T.corked&&(T.corked=1,this.uncork());if(!T.ending){J=X;T.ending=!0;a(this,T);if(J)if(T.finished)f.nextTick(J);else this.once("finish",J);T.ended=!0;this.writable=!1}return this};Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(d.prototype,
"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}});d.prototype.destroy=y.destroy;d.prototype._undestroy=y.undestroy;d.prototype._destroy=function(J,M){M(J)};return MO}function GB(){function g(a){if(!(this instanceof g))return new g(a);n.call(this,a);b.call(this,a);this.allowHalfOpen=!0;a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===
a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||d.nextTick(h,this)}function h(a){a.end()}if(u_)return NO;u_=!0;var d=Qh,k=Object.keys||function(a){var f=[],m;for(m in a)f.push(m);return f};NO=g;var n=v_(),b=s_();Rj(g,n);k=k(b.prototype);for(var e=0;e<k.length;e++){var l=k[e];g.prototype[l]||(g.prototype[l]=b.prototype[l])}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});
Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&&
void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}});return NO}function xba(){function g(z,B,C){B in z?Object.defineProperty(z,B,{value:C,enumerable:!0,configurable:!0,writable:!0}):z[B]=C;return z}function c(z,B){return{value:z,done:B}}function h(z){var B=z[l];if(null!==B){var C=z[u].read();null!==C&&(z[q]=null,z[l]=null,z[a]=null,B(c(C,!1)))}}function d(z){n.nextTick(h,z)}function k(z,B){return function(C,G){z.then(function(){if(B[m])C(c(void 0,!0));
else B[r](C,G)},G)}}if(w_)return x_;w_=!0;var n=Qh,b,e=LO(),l=Symbol("lastResolve"),a=Symbol("lastReject"),f=Symbol("error"),m=Symbol("ended"),q=Symbol("lastPromise"),r=Symbol("handlePromise"),u=Symbol("stream"),v=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((b={get stream(){return this[u]},next:function(){var z=this,B=this[f];if(null!==B)return Promise.reject(B);if(this[m])return Promise.resolve(c(void 0,!0));if(this[u].destroyed)return new Promise(function(C,G){n.nextTick(function(){z[f]?
G(z[f]):C(c(void 0,!0))})});if(B=this[q])B=new Promise(k(B,this));else{B=this[u].read();if(null!==B)return Promise.resolve(c(B,!1));B=new Promise(this[r])}return this[q]=B}},g(b,Symbol.asyncIterator,function(){return this}),g(b,"return",function(){var z=this;return new Promise(function(B,C){z[u].destroy(null,function(G){G?C(G):B(c(void 0,!0))})})}),b),v);return x_=function(z){var B,C=Object.create(y,(B={},g(B,u,{value:z,writable:!0}),g(B,l,{value:null,writable:!0}),g(B,a,{value:null,writable:!0}),
g(B,f,{value:null,writable:!0}),g(B,m,{value:z._readableState.endEmitted,writable:!0}),g(B,r,{value:function(G,F){var N=C[u].read();N?(C[q]=null,C[l]=null,C[a]=null,G(c(N,!1))):(C[l]=G,C[a]=F)},writable:!0}),B));C[q]=null;e(z,function(G){if(G&&"ERR_STREAM_PREMATURE_CLOSE"!==G.code){var F=C[a];null!==F&&(C[q]=null,C[l]=null,C[a]=null,F(G));C[f]=G}else G=C[l],null!==G&&(C[q]=null,C[l]=null,C[a]=null,G(c(void 0,!0))),C[m]=!0});z.on("readable",d.bind(null,C));return C}}function v_(){function g(ia,Aa,
ob){if("function"===typeof ia.prependListener)return ia.prependListener(Aa,ob);if(ia._events&&ia._events[Aa])Array.isArray(ia._events[Aa])?ia._events[Aa].unshift(ob):ia._events[Aa]=[ob,ia._events[Aa]];else ia.on(Aa,ob)}function c(ia,Aa,ob){G=G||GB();ia=ia||{};"boolean"!==typeof ob&&(ob=Aa instanceof G);this.objectMode=!!ia.objectMode;ob&&(this.objectMode=this.objectMode||!!ia.readableObjectMode);this.highWaterMark=D(this,ia,"readableHighWaterMark",ob);this.buffer=new qa;this.length=0;this.pipes=null;
this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.paused=!0;this.emitClose=!1!==ia.emitClose;this.autoDestroy=!!ia.autoDestroy;this.destroyed=!1;this.defaultEncoding=ia.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;ia.encoding&&(fa||(fa=OO.StringDecoder),this.decoder=new fa(ia.encoding),this.encoding=ia.encoding)}function h(ia){G=
G||GB();if(!(this instanceof h))return new h(ia);this._readableState=new c(ia,this,this instanceof G);this.readable=!0;ia&&("function"===typeof ia.read&&(this._read=ia.read),"function"===typeof ia.destroy&&(this._destroy=ia.destroy));F.call(this)}function d(ia,Aa,ob,Nb,Ab){ha("readableAddChunk",Aa);var Kb=ia._readableState;if(null===Aa)Kb.reading=!1,ha("onEofChunk"),Kb.ended||(Kb.decoder&&(Aa=Kb.decoder.end())&&Aa.length&&(Kb.buffer.push(Aa),Kb.length+=Kb.objectMode?1:Aa.length),Kb.ended=!0,Kb.sync?
b(ia):(Kb.needReadable=!1,Kb.emittedReadable||(Kb.emittedReadable=!0,e(ia))));else{if(!Ab){Ab=Aa;var jc;N.isBuffer(Ab)||Ab instanceof L||"string"===typeof Ab||void 0===Ab||Kb.objectMode||(jc=new J("chunk",["string","Buffer","Uint8Array"],Ab));var ub=jc}if(ub)ea(ia,ub);else if(Kb.objectMode||Aa&&0<Aa.length)if("string"===typeof Aa||Kb.objectMode||Object.getPrototypeOf(Aa)===N.prototype||(Aa=N.from(Aa)),Nb)Kb.endEmitted?ea(ia,new T):k(ia,Kb,Aa,!0);else if(Kb.ended)ea(ia,new M);else{if(Kb.destroyed)return!1;
Kb.reading=!1;Kb.decoder&&!ob?(Aa=Kb.decoder.write(Aa),Kb.objectMode||0!==Aa.length?k(ia,Kb,Aa,!1):l(ia,Kb)):k(ia,Kb,Aa,!1)}else Nb||(Kb.reading=!1,l(ia,Kb))}return!Kb.ended&&(Kb.length<Kb.highWaterMark||0===Kb.length)}function k(ia,Aa,ob,Nb){Aa.flowing&&0===Aa.length&&!Aa.sync?(Aa.awaitDrain=0,ia.emit("data",ob)):(Aa.length+=Aa.objectMode?1:ob.length,Nb?Aa.buffer.unshift(ob):Aa.buffer.push(ob),Aa.needReadable&&b(ia));l(ia,Aa)}function n(ia,Aa){if(0>=ia||0===Aa.length&&Aa.ended)return 0;if(Aa.objectMode)return 1;
if(ia!==ia)return Aa.flowing&&Aa.length?Aa.buffer.head.data.length:Aa.length;if(ia>Aa.highWaterMark){var ob=ia;1073741824<=ob?ob=1073741824:(ob--,ob|=ob>>>1,ob|=ob>>>2,ob|=ob>>>4,ob|=ob>>>8,ob|=ob>>>16,ob++);Aa.highWaterMark=ob}return ia<=Aa.length?ia:Aa.ended?Aa.length:(Aa.needReadable=!0,0)}function b(ia){var Aa=ia._readableState;ha("emitReadable",Aa.needReadable,Aa.emittedReadable);Aa.needReadable=!1;Aa.emittedReadable||(ha("emitReadable",Aa.flowing),Aa.emittedReadable=!0,C.nextTick(e,ia))}function e(ia){var Aa=
ia._readableState;ha("emitReadable_",Aa.destroyed,Aa.length,Aa.ended);Aa.destroyed||!Aa.length&&!Aa.ended||(ia.emit("readable"),Aa.emittedReadable=!1);Aa.needReadable=!Aa.flowing&&!Aa.ended&&Aa.length<=Aa.highWaterMark;u(ia)}function l(ia,Aa){Aa.readingMore||(Aa.readingMore=!0,C.nextTick(a,ia,Aa))}function a(ia,Aa){for(;!Aa.reading&&!Aa.ended&&(Aa.length<Aa.highWaterMark||Aa.flowing&&0===Aa.length);){var ob=Aa.length;ha("maybeReadMore read 0");ia.read(0);if(ob===Aa.length)break}Aa.readingMore=!1}
function f(ia){return function(){var Aa=ia._readableState;ha("pipeOnDrain",Aa.awaitDrain);Aa.awaitDrain&&Aa.awaitDrain--;0===Aa.awaitDrain&&ia.listeners("data").length&&(Aa.flowing=!0,u(ia))}}function m(ia){var Aa=ia._readableState;Aa.readableListening=0<ia.listenerCount("readable");Aa.resumeScheduled&&!Aa.paused?Aa.flowing=!0:0<ia.listenerCount("data")&&ia.resume()}function q(ia){ha("readable nexttick read 0");ia.read(0)}function r(ia,Aa){ha("resume",Aa.reading);Aa.reading||ia.read(0);Aa.resumeScheduled=
!1;ia.emit("resume");u(ia);Aa.flowing&&!Aa.reading&&ia.read(0)}function u(ia){var Aa=ia._readableState;for(ha("flow",Aa.flowing);Aa.flowing&&null!==ia.read(););}function v(ia,Aa){if(0===Aa.length)return null;Aa.objectMode?ia=Aa.buffer.shift():!ia||ia>=Aa.length?(ia=Aa.decoder?Aa.buffer.join(""):1===Aa.buffer.length?Aa.buffer.first():Aa.buffer.concat(Aa.length),Aa.buffer.clear()):ia=Aa.buffer.consume(ia,Aa.decoder);return ia}function y(ia){var Aa=ia._readableState;ha("endReadable",Aa.endEmitted);Aa.endEmitted||
(Aa.ended=!0,C.nextTick(z,Aa,ia))}function z(ia,Aa){ha("endReadableNT",ia.endEmitted,ia.length);ia.endEmitted||0!==ia.length||(ia.endEmitted=!0,Aa.readable=!1,Aa.emit("end"),ia.autoDestroy&&(ia=Aa._writableState,(!ia||ia.autoDestroy&&ia.finished)&&Aa.destroy()))}function B(ia,Aa){for(var ob=0,Nb=ia.length;ob<Nb;ob++)if(ia[ob]===Aa)return ob;return-1}if(y_)return PO;y_=!0;var C=Qh;PO=h;var G;h.ReadableState=c;var F=$Z(),N=eh.Buffer,L=yba.Uint8Array||function(){},S=l_;var ha=S&&S.debuglog?S.debuglog("stream"):
function(){};var qa=uba();S=m_();var D=p_().getHighWaterMark,P=FB().codes,J=P.ERR_INVALID_ARG_TYPE,M=P.ERR_STREAM_PUSH_AFTER_EOF,X=P.ERR_METHOD_NOT_IMPLEMENTED,T=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,fa,Ra,gb;Rj(h,F);var ea=S.errorOrDestroy,aa=["error","close","destroy","pause","resume"];Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(ia){this._readableState&&(this._readableState.destroyed=
ia)}});h.prototype.destroy=S.destroy;h.prototype._undestroy=S.undestroy;h.prototype._destroy=function(ia,Aa){Aa(ia)};h.prototype.push=function(ia,Aa){var ob=this._readableState;if(ob.objectMode)var Nb=!0;else"string"===typeof ia&&(Aa=Aa||ob.defaultEncoding,Aa!==ob.encoding&&(ia=N.from(ia,Aa),Aa=""),Nb=!0);return d(this,ia,Aa,!1,Nb)};h.prototype.unshift=function(ia){return d(this,ia,null,!0,!1)};h.prototype.isPaused=function(){return!1===this._readableState.flowing};h.prototype.setEncoding=function(ia){fa||
(fa=OO.StringDecoder);ia=new fa(ia);this._readableState.decoder=ia;this._readableState.encoding=this._readableState.decoder.encoding;for(var Aa=this._readableState.buffer.head,ob="";null!==Aa;)ob+=ia.write(Aa.data),Aa=Aa.next;this._readableState.buffer.clear();""!==ob&&this._readableState.buffer.push(ob);this._readableState.length=ob.length;return this};h.prototype.read=function(ia){ha("read",ia);ia=parseInt(ia,10);var Aa=this._readableState,ob=ia;0!==ia&&(Aa.emittedReadable=!1);if(0===ia&&Aa.needReadable&&
((0!==Aa.highWaterMark?Aa.length>=Aa.highWaterMark:0<Aa.length)||Aa.ended))return ha("read: emitReadable",Aa.length,Aa.ended),0===Aa.length&&Aa.ended?y(this):b(this),null;ia=n(ia,Aa);if(0===ia&&Aa.ended)return 0===Aa.length&&y(this),null;var Nb=Aa.needReadable;ha("need readable",Nb);if(0===Aa.length||Aa.length-ia<Aa.highWaterMark)Nb=!0,ha("length less than watermark",Nb);Aa.ended||Aa.reading?ha("reading or ended",!1):Nb&&(ha("do read"),Aa.reading=!0,Aa.sync=!0,0===Aa.length&&(Aa.needReadable=!0),
this._read(Aa.highWaterMark),Aa.sync=!1,Aa.reading||(ia=n(ob,Aa)));Nb=0<ia?v(ia,Aa):null;null===Nb?(Aa.needReadable=Aa.length<=Aa.highWaterMark,ia=0):(Aa.length-=ia,Aa.awaitDrain=0);0===Aa.length&&(Aa.ended||(Aa.needReadable=!0),ob!==ia&&Aa.ended&&y(this));null!==Nb&&this.emit("data",Nb);return Nb};h.prototype._read=function(ia){ea(this,new X("_read()"))};h.prototype.pipe=function(ia,Aa){function ob(db,Cb){ha("onunpipe");db===Yc&&Cb&&!1===Cb.hasUnpiped&&(Cb.hasUnpiped=!0,ha("cleanup"),ia.removeListener("close",
jc),ia.removeListener("finish",ub),ia.removeListener("drain",sa),ia.removeListener("error",Kb),ia.removeListener("unpipe",ob),Yc.removeListener("end",Nb),Yc.removeListener("end",Gc),Yc.removeListener("data",Ab),ua=!0,!Z.awaitDrain||ia._writableState&&!ia._writableState.needDrain||sa())}function Nb(){ha("onend");ia.end()}function Ab(db){ha("ondata");db=ia.write(db);ha("dest.write",db);!1===db&&((1===Z.pipesCount&&Z.pipes===ia||1<Z.pipesCount&&-1!==B(Z.pipes,ia))&&!ua&&(ha("false write response, pause",
Z.awaitDrain),Z.awaitDrain++),Yc.pause())}function Kb(db){ha("onerror",db);Gc();ia.removeListener("error",Kb);0===ia.listeners("error").length&&ea(ia,db)}function jc(){ia.removeListener("finish",ub);Gc()}function ub(){ha("onfinish");ia.removeListener("close",jc);Gc()}function Gc(){ha("unpipe");Yc.unpipe(ia)}var Yc=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=ia;break;case 1:Z.pipes=[Z.pipes,ia];break;default:Z.pipes.push(ia)}Z.pipesCount+=1;ha("pipe count=%d opts=%j",Z.pipesCount,
Aa);Aa=Aa&&!1===Aa.end||ia===C.stdout||ia===C.stderr?Gc:Nb;if(Z.endEmitted)C.nextTick(Aa);else Yc.once("end",Aa);ia.on("unpipe",ob);var sa=f(Yc);ia.on("drain",sa);var ua=!1;Yc.on("data",Ab);g(ia,"error",Kb);ia.once("close",jc);ia.once("finish",ub);ia.emit("pipe",Yc);Z.flowing||(ha("pipe resume"),Yc.resume());return ia};h.prototype.unpipe=function(ia){var Aa=this._readableState,ob={hasUnpiped:!1};if(0===Aa.pipesCount)return this;if(1===Aa.pipesCount){if(ia&&ia!==Aa.pipes)return this;ia||(ia=Aa.pipes);
Aa.pipes=null;Aa.pipesCount=0;Aa.flowing=!1;ia&&ia.emit("unpipe",this,ob);return this}if(!ia){ia=Aa.pipes;ob=Aa.pipesCount;Aa.pipes=null;Aa.pipesCount=0;Aa.flowing=!1;for(Aa=0;Aa<ob;Aa++)ia[Aa].emit("unpipe",this,{hasUnpiped:!1});return this}var Nb=B(Aa.pipes,ia);if(-1===Nb)return this;Aa.pipes.splice(Nb,1);--Aa.pipesCount;1===Aa.pipesCount&&(Aa.pipes=Aa.pipes[0]);ia.emit("unpipe",this,ob);return this};h.prototype.on=function(ia,Aa){Aa=F.prototype.on.call(this,ia,Aa);var ob=this._readableState;"data"===
ia?(ob.readableListening=0<this.listenerCount("readable"),!1!==ob.flowing&&this.resume()):"readable"!==ia||ob.endEmitted||ob.readableListening||(ob.readableListening=ob.needReadable=!0,ob.flowing=!1,ob.emittedReadable=!1,ha("on readable",ob.length,ob.reading),ob.length?b(this):ob.reading||C.nextTick(q,this));return Aa};h.prototype.addListener=h.prototype.on;h.prototype.removeListener=function(ia,Aa){Aa=F.prototype.removeListener.call(this,ia,Aa);"readable"===ia&&C.nextTick(m,this);return Aa};h.prototype.removeAllListeners=
function(ia){var Aa=F.prototype.removeAllListeners.apply(this,arguments);"readable"!==ia&&void 0!==ia||C.nextTick(m,this);return Aa};h.prototype.resume=function(){var ia=this._readableState;ia.flowing||(ha("resume"),ia.flowing=!ia.readableListening,ia.resumeScheduled||(ia.resumeScheduled=!0,C.nextTick(r,this,ia)));ia.paused=!1;return this};h.prototype.pause=function(){ha("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(ha("pause"),this._readableState.flowing=
!1,this.emit("pause"));this._readableState.paused=!0;return this};h.prototype.wrap=function(ia){var Aa=this,ob=this._readableState,Nb=!1;ia.on("end",function(){ha("wrapped end");if(ob.decoder&&!ob.ended){var Kb=ob.decoder.end();Kb&&Kb.length&&Aa.push(Kb)}Aa.push(null)});ia.on("data",function(Kb){ha("wrapped data");ob.decoder&&(Kb=ob.decoder.write(Kb));ob.objectMode&&(null===Kb||void 0===Kb)||!(ob.objectMode||Kb&&Kb.length)||Aa.push(Kb)||(Nb=!0,ia.pause())});for(var Ab in ia)void 0===this[Ab]&&"function"===
typeof ia[Ab]&&(this[Ab]=function(Kb){return function(){return ia[Kb].apply(ia,arguments)}}(Ab));for(Ab=0;Ab<aa.length;Ab++)ia.on(aa[Ab],this.emit.bind(this,aa[Ab]));this._read=function(Kb){ha("wrapped _read",Kb);Nb&&(Nb=!1,ia.resume())};return this};"function"===typeof Symbol&&(h.prototype[Symbol.asyncIterator]=function(){void 0===Ra&&(Ra=xba());return Ra(this)});Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(h.prototype,
"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(h.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ia){this._readableState&&(this._readableState.flowing=ia)}});h._fromList=v;Object.defineProperty(h.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(h.from=function(ia,Aa){void 0===gb&&(gb=tba());
return gb(h,ia,Aa)});return PO}function z_(){function g(f,m){var q=this._transformState;q.transforming=!1;var r=q.writecb;if(null===r)return this.emit("error",new b);q.writechunk=null;q.writecb=null;null!=m&&this.push(m);r(f);f=this._readableState;f.reading=!1;(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function c(f){if(!(this instanceof c))return new c(f);a.call(this,f);this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,
writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;f&&("function"===typeof f.transform&&(this._transform=f.transform),"function"===typeof f.flush&&(this._flush=f.flush));this.on("prefinish",h)}function h(){var f=this;"function"!==typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(m,q){d(f,m,q)})}function d(f,m,q){if(m)return f.emit("error",m);null!=q&&f.push(q);if(f._writableState.length)throw new l;if(f._transformState.transforming)throw new e;
return f.push(null)}if(A_)return QO;A_=!0;QO=c;var k=FB().codes,n=k.ERR_METHOD_NOT_IMPLEMENTED,b=k.ERR_MULTIPLE_CALLBACK,e=k.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=k.ERR_TRANSFORM_WITH_LENGTH_0,a=GB();Rj(c,a);c.prototype.push=function(f,m){this._transformState.needTransform=!1;return a.prototype.push.call(this,f,m)};c.prototype._transform=function(f,m,q){q(new n("_transform()"))};c.prototype._write=function(f,m,q){var r=this._transformState;r.writecb=q;r.writechunk=f;r.writeencoding=m;r.transforming||
(f=this._readableState,(r.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark))};c.prototype._read=function(f){f=this._transformState;null===f.writechunk||f.transforming?f.needTransform=!0:(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform))};c.prototype._destroy=function(f,m){a.prototype._destroy.call(this,f,function(q){m(q)})};return QO}function HB(g,c){if(!((this||ps)instanceof HB))return new HB(g,c);c=c||{};B_.call(this||ps,zba(c,
{objectMode:!0}));(this||ps)._iterator=g;(this||ps)._options=c;this.on("end",(this||ps).destroy.bind(this||ps,null,null))}function C_(g,c,h){c&&"string"!=typeof c&&(c=c.message||c.name);Aba(this||Vk,{type:g,name:g,cause:"string"!=typeof c?c:h,message:c},"ewr")}function RO(g,c){Error.call(this||Vk);Error.captureStackTrace&&Error.captureStackTrace(this||Vk,(this||Vk).constructor);C_.call(this||Vk,"CustomError",g,c)}function Bba(g,c,h){var d=function(k,n){C_.call(this||Vk,c,k,n);"FilesystemError"==c&&
((this||Vk).code=(this||Vk).cause.code,(this||Vk).path=(this||Vk).cause.path,(this||Vk).errno=(this||Vk).cause.errno,(this||Vk).message=(g.errno[(this||Vk).cause.errno]?g.errno[(this||Vk).cause.errno].description:(this||Vk).cause.message)+((this||Vk).cause.path?" ["+(this||Vk).cause.path+"]":""));Error.call(this||Vk);Error.captureStackTrace&&Error.captureStackTrace(this||Vk,d)};d.prototype=h?new h:new RO;return d}function aE(g){(this||Wk).db=(this||Wk)._levelup=g;(this||Wk).batch=g.db.batch();(this||
Wk).ops=[];(this||Wk).length=0}function D_(g,c){if(null==g)throw new TypeError("Cannot convert first argument to object");for(var h=Object(g),d=1;d<arguments.length;d++){var k=arguments[d];if(null!=k)for(var n=Object.keys(Object(k)),b=0,e=n.length;b<e;b++){var l=n[b],a=Object.getOwnPropertyDescriptor(k,l);void 0!==a&&a.enumerable&&(h[l]=k[l])}}return h}function E_(){function g(l){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&
"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(l)}function c(l){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(l)}function h(l,a){return(h=Object.setPrototypeOf||function(f,m){return f.__proto__=m,f})(l,a)}function d(l,a,f){f||(f=Error);f=function(m){function q(r,u,v){if(!(this instanceof q))throw new TypeError("Cannot call a class as a function");!0;r=c(q).call(this,"string"==typeof a?a:
a(r,u,v));if(!r||"object"!==g(r)&&"function"!=typeof r){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");r=this}return r.code=l,r}return!function(r,u){if("function"!=typeof u&&null!==u)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(u&&u.prototype,{constructor:{value:r,writable:!0,configurable:!0}});u&&h(r,u)}(q,m),q}(f);e[l]=f}function k(l,a){if(Array.isArray(l)){var f=l.length;return l=l.map(function(m){return String(m)}),
2<f?"one of ".concat(a," ").concat(l.slice(0,f-1).join(", "),", or ")+l[f-1]:2===f?"one of ".concat(a," ").concat(l[0]," or ").concat(l[1]):"of ".concat(a," ").concat(l[0])}return"of ".concat(a," ").concat(String(l))}if(F_)return SO;F_=!0;var n,b,e={};return d("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),d("ERR_INVALID_ARG_TYPE",function(l,a,f){var m;if(void 0===n&&(n=TO()),n("string"==typeof l,"'name' must be a string"),"string"==typeof a&&"not "===a.substr(0,4)?(m="must not be",
a=a.replace(/^not /,"")):m="must be",function(r,u,v){return(void 0===v||v>r.length)&&(v=r.length),r.substring(v-u.length,v)===u}(l," argument"))l="The ".concat(l," ").concat(m," ").concat(k(a,"type"));else{var q=function(r,u,v){return"number"!=typeof v&&(v=0),!(v+u.length>r.length)&&-1!==r.indexOf(u,v)}(l,".")?"property":"argument";l='The "'.concat(l,'" ').concat(q," ").concat(m," ").concat(k(a,"type"))}return l+=". Received type ".concat(g(f))},TypeError),d("ERR_INVALID_ARG_VALUE",function(l,a){var f=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===b&&(b=Sg);var m=b.inspect(a);return 128<m.length&&(m="".concat(m.slice(0,128),"...")),"The argument '".concat(l,"' ").concat(f,". Received ").concat(m)},TypeError),d("ERR_INVALID_RETURN_VALUE",function(l,a,f){var m;return m=f&&f.constructor&&f.constructor.name?"instance of ".concat(f.constructor.name):"type ".concat(g(f)),"Expected ".concat(l,' to be returned from the "').concat(a,'"')+" function but got ".concat(m,".")},
TypeError),d("ERR_MISSING_ARGS",function(){for(var l=arguments.length,a=Array(l),f=0;f<l;f++)a[f]=arguments[f];void 0===n&&(n=TO());n(0<a.length,"At least one arg needs to be specified");l="The ";f=a.length;switch(a=a.map(function(m){return'"'.concat(m,'"')}),f){case 1:l+="".concat(a[0]," argument");break;case 2:l+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:l+=a.slice(0,f-1).join(", "),l+=", and ".concat(a[f-1]," arguments")}return"".concat(l," must be specified")},TypeError),
SO.codes=e,SO}function Cba(){function g(F,N){for(var L=0;L<N.length;L++){var S=N[L];S.enumerable=S.enumerable||!1;S.configurable=!0;"value"in S&&(S.writable=!0);Object.defineProperty(F,S.key,S)}}function c(F,N){return!N||"object"!==l(N)&&"function"!=typeof N?h(F):N}function h(F){if(void 0===F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function d(F){var N="function"==typeof Map?new Map:void 0;return(d=function(L){function S(){return n(L,arguments,
e(this).constructor)}if(null===L||(ha=L,-1===Function.toString.call(ha).indexOf("[native code]")))return L;var ha;if("function"!=typeof L)throw new TypeError("Super expression must either be null or a function");if(void 0!==N){if(N.has(L))return N.get(L);N.set(L,S)}return S.prototype=Object.create(L.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),b(S,L)})(F)}function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==
typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(F){return!1}}function n(F,N,L){return(n=k()?Reflect.construct:function(S,ha,qa){var D=[null];D.push.apply(D,ha);S=new (Function.bind.apply(S,D));return qa&&b(S,qa.prototype),S}).apply(null,arguments)}function b(F,N){return(b=Object.setPrototypeOf||function(L,S){return L.__proto__=S,L})(F,N)}function e(F){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||
Object.getPrototypeOf(N)})(F)}function l(F){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(F)}function a(F,N,L){return(void 0===L||L>F.length)&&(L=F.length),F.substring(L-N.length,L)===N}function f(F){var N=Object.keys(F),L=Object.create(Object.getPrototypeOf(F));return N.forEach(function(S){L[S]=F[S]}),Object.defineProperty(L,"message",
{value:F.message}),L}function m(F){return u(F,{compact:!1,customInspect:!1,depth:1E3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function q(F,N,L){var S="",ha="",qa=0,D="",P=!1,J=m(F),M=J.split("\n"),X=m(N).split("\n"),T=0,fa="";if("strictEqual"===L&&"object"===l(F)&&"object"===l(N)&&null!==F&&null!==N&&(L="strictEqualObject"),1===M.length&&1===X.length&&M[0]!==X[0]){var Ra=M[0].length+X[0].length;if(10>=Ra){if(!("object"===l(F)&&null!==F||"object"===l(N)&&
null!==N||0===F&&0===N))return"".concat(G[L],"\n\n")+"".concat(M[0]," !== ").concat(X[0],"\n")}else if("strictEqualObject"!==L&&Ra<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;M[0][T]===X[0][T];)T++;2<T&&(fa="\n  ".concat(function(ia,Aa){if(Aa=Math.floor(Aa),0==ia.length||0==Aa)return"";var ob=ia.length*Aa;for(Aa=Math.floor(Math.log(Aa)/Math.log(2));Aa;)ia+=ia,Aa--;return ia+ia.substring(0,ob-ia.length)}(" ",T),"^"),T=0)}}F=M[M.length-1];for(N=X[X.length-1];F===N&&(2>T++?D="\n  ".concat(F).concat(D):
S=F,M.pop(),X.pop(),0!==M.length&&0!==X.length);)F=M[M.length-1],N=X[X.length-1];F=Math.max(M.length,X.length);if(0===F){S=J.split("\n");if(30<S.length)for(S[26]="".concat(y,"...").concat(C);27<S.length;)S.pop();return"".concat(G.notIdentical,"\n\n").concat(S.join("\n"),"\n")}3<T&&(D="\n".concat(y,"...").concat(C).concat(D),P=!0);""!==S&&(D="\n  ".concat(S).concat(D),S="");J=0;L=G[L]+"\n".concat(z,"+ actual").concat(C," ").concat(B,"- expected").concat(C);N=" ".concat(y,"...").concat(C," Lines skipped");
for(T=0;T<F;T++){Ra=T-qa;if(M.length<T+1)1<Ra&&2<T&&(4<Ra?(ha+="\n".concat(y,"...").concat(C),P=!0):3<Ra&&(ha+="\n  ".concat(X[T-2]),J++),ha+="\n  ".concat(X[T-1]),J++),qa=T,S+="\n".concat(B,"-").concat(C," ").concat(X[T]),J++;else if(X.length<T+1)1<Ra&&2<T&&(4<Ra?(ha+="\n".concat(y,"...").concat(C),P=!0):3<Ra&&(ha+="\n  ".concat(M[T-2]),J++),ha+="\n  ".concat(M[T-1]),J++),qa=T,ha+="\n".concat(z,"+").concat(C," ").concat(M[T]),J++;else{var gb=X[T],ea=M[T],aa=ea!==gb&&(!a(ea,",")||ea.slice(0,-1)!==
gb);aa&&a(gb,",")&&gb.slice(0,-1)===ea&&(aa=!1,ea+=",");aa?(1<Ra&&2<T&&(4<Ra?(ha+="\n".concat(y,"...").concat(C),P=!0):3<Ra&&(ha+="\n  ".concat(M[T-2]),J++),ha+="\n  ".concat(M[T-1]),J++),qa=T,ha+="\n".concat(z,"+").concat(C," ").concat(ea),S+="\n".concat(B,"-").concat(C," ").concat(gb),J+=2):(ha+=S,S="",1!==Ra&&0!==T||(ha+="\n  ".concat(ea),J++))}if(20<J&&T<F-2)return"".concat(L).concat(N,"\n").concat(ha,"\n").concat(y,"...").concat(C).concat(S,"\n")+"".concat(y,"...").concat(C)}return"".concat(L).concat(P?
N:"","\n").concat(ha).concat(S).concat(D).concat(fa)}if(G_)return H_;G_=!0;var r=Qh,u=Sg.inspect,v=E_().codes.ERR_INVALID_ARG_TYPE,y="",z="",B="",C="",G={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',
notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};return H_=function(F){function N(S){if(!(this instanceof N))throw new TypeError("Cannot call a class as a function");if(!0,"object"!==l(S)||null===S)throw new v("options","Object",
S);var ha=S.message,qa=S.operator,D=S.stackStartFn,P=S.actual;S=S.expected;var J=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=ha)var M=c(this,e(N).call(this,String(ha)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(y="\u001b[34m",z="\u001b[32m",C="\u001b[39m",B="\u001b[31m"):(y="",z="",C="",B="")),"object"===l(P)&&null!==P&&"object"===l(S)&&null!==S&&"stack"in P&&P instanceof Error&&"stack"in S&&S instanceof Error&&(P=f(P),S=f(S)),"deepStrictEqual"===
qa||"strictEqual"===qa)M=c(this,e(N).call(this,q(P,S,qa)));else if("notDeepStrictEqual"===qa||"notStrictEqual"===qa){M=G[qa];var X=m(P).split("\n");if("notStrictEqual"===qa&&"object"===l(P)&&null!==P&&(M=G.notStrictEqualObject),30<X.length)for(X[26]="".concat(y,"...").concat(C);27<X.length;)X.pop();M=1===X.length?c(this,e(N).call(this,"".concat(M," ").concat(X[0]))):c(this,e(N).call(this,"".concat(M,"\n\n").concat(X.join("\n"),"\n")))}else{M=m(P);X="";var T=G[qa];"notDeepEqual"===qa||"notEqual"===
qa?1024<(M="".concat(G[qa],"\n\n").concat(M)).length&&(M="".concat(M.slice(0,1021),"...")):(X="".concat(m(S)),512<M.length&&(M="".concat(M.slice(0,509),"...")),512<X.length&&(X="".concat(X.slice(0,509),"...")),"deepEqual"===qa||"equal"===qa?M="".concat(T,"\n\n").concat(M,"\n\nshould equal\n\n"):X=" ".concat(qa," ").concat(X));M=c(this,e(N).call(this,"".concat(M).concat(X)))}return Error.stackTraceLimit=J,M.generatedMessage=!ha,Object.defineProperty(h(M),"name",{value:"AssertionError [ERR_ASSERTION]",
enumerable:!1,writable:!0,configurable:!0}),M.code="ERR_ASSERTION",M.actual=P,M.expected=S,M.operator=qa,Error.captureStackTrace&&Error.captureStackTrace(h(M),D),M.stack,M.name="AssertionError",c(M)}var L;return!function(S,ha){if("function"!=typeof ha&&null!==ha)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(ha&&ha.prototype,{constructor:{value:S,writable:!0,configurable:!0}});ha&&b(S,ha)}(N,F),L=[{key:"toString",value:function(){return"".concat(this.name,
" [").concat(this.code,"]: ").concat(this.message)}},{key:u.custom,value:function(S,ha){return u(this,function(qa){for(var D=1;D<arguments.length;D++){var P=null!=arguments[D]?arguments[D]:{},J=Object.keys(P);"function"==typeof Object.getOwnPropertySymbols&&(J=J.concat(Object.getOwnPropertySymbols(P).filter(function(M){return Object.getOwnPropertyDescriptor(P,M).enumerable})));J.forEach(function(M){var X=P[M];M in qa?Object.defineProperty(qa,M,{value:X,enumerable:!0,configurable:!0,writable:!0}):
qa[M]=X})}return qa}({},ha,{customInspect:!1,depth:0}))}}],g(N.prototype,L),N}(d(Error))}function I_(g,c){if(!(g=function(h){if(Array.isArray(h))return h}(g)||function(h,d){var k=[],n=!0,b=!1,e=void 0;try{for(var l,a=h[Symbol.iterator]();!(n=(l=a.next()).done)&&(k.push(l.value),!d||k.length!==d);n=!0);}catch(f){b=!0,e=f}finally{try{n||null==a.return||a.return()}finally{if(b)throw e;}}return k}(g,c)))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}function qs(g){return(qs=
"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(g)}function UO(g){return g.call.bind(g)}function Dba(g){if(0===g.length||10<g.length)return!0;for(var c=0;c<g.length;c++){var h=g.charCodeAt(c);if(48>h||57<h)return!0}return 10===g.length&&g>=Math.pow(2,32)}function yI(g){return Object.keys(g).filter(Dba).concat(zI(g).filter(Object.prototype.propertyIsEnumerable.bind(g)))}
function J_(g,c){if(g===c)return 0;for(var h=g.length,d=c.length,k=0,n=Math.min(h,d);k<n;++k)if(g[k]!==c[k]){h=g[k];d=c[k];break}return h<d?-1:d<h?1:0}function Yq(g,c,h,d){if(g===c)return 0!==g||!h||K_(g,c);if(h){if("object"!==qs(g))return"number"==typeof g&&VO(g)&&VO(c);if("object"!==qs(c)||null===g||null===c||Object.getPrototypeOf(g)!==Object.getPrototypeOf(c))return!1}else{if(null===g||"object"!==qs(g))return(null===c||"object"!==qs(c))&&g==c;if(null===c||"object"!==qs(c))return!1}var k=L_(g);
if(k!==L_(c))return!1;if(Array.isArray(g)){if(g.length!==c.length)return!1;k=yI(g);var n=yI(c);return k.length===n.length&&bE(g,c,h,d,1,k)}if("[object Object]"===k&&(!AI(g)&&AI(c)||!BI(g)&&BI(c)))return!1;if(M_(g)){if(!M_(c)||Date.prototype.getTime.call(g)!==Date.prototype.getTime.call(c))return!1}else if(N_(g)){if(!N_(c)||(Eba?g.source!==c.source||g.flags!==c.flags:RegExp.prototype.toString.call(g)!==RegExp.prototype.toString.call(c)))return!1}else if(Fba(g)||g instanceof Error){if(g.message!==c.message||
g.name!==c.name)return!1}else{if(Gba(g)){if(h||!Hba(g)&&!Iba(g)){if(!function(b,e){return b.byteLength===e.byteLength&&0===J_(new Uint8Array(b.buffer,b.byteOffset,b.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(g,c))return!1}else if(!function(b,e){if(b.byteLength!==e.byteLength)return!1;for(var l=0;l<b.byteLength;l++)if(b[l]!==e[l])return!1;return!0}(g,c))return!1;k=yI(g);n=yI(c);return k.length===n.length&&bE(g,c,h,d,0,k)}if(BI(g))return!(!BI(c)||g.size!==c.size)&&bE(g,c,h,d,2);
if(AI(g))return!(!AI(c)||g.size!==c.size)&&bE(g,c,h,d,3);if(Jba(g)){if(g.byteLength!==c.byteLength||0!==J_(new Uint8Array(g),new Uint8Array(c)))return!1}else if(Kba(g)&&!function(b,e){return O_(b)?O_(e)&&K_(Number.prototype.valueOf.call(b),Number.prototype.valueOf.call(e)):P_(b)?P_(e)&&String.prototype.valueOf.call(b)===String.prototype.valueOf.call(e):Q_(b)?Q_(e)&&Boolean.prototype.valueOf.call(b)===Boolean.prototype.valueOf.call(e):R_(b)?R_(e)&&BigInt.prototype.valueOf.call(b)===BigInt.prototype.valueOf.call(e):
Lba(e)&&Symbol.prototype.valueOf.call(b)===Symbol.prototype.valueOf.call(e)}(g,c))return!1}return bE(g,c,h,d,0)}function S_(g,c){return c.filter(function(h){return CI(g,h)})}function bE(g,c,h,d,k,n){if(5===arguments.length){n=Object.keys(g);var b=Object.keys(c);if(n.length!==b.length)return!1}for(var e=0;e<n.length;e++)if(!cE(c,n[e]))return!1;if(h&&5===arguments.length)if(b=zI(g),0!==b.length){var l=0;for(e=0;e<b.length;e++){var a=b[e];if(CI(g,a)){if(!CI(c,a))return!1;n.push(a);l++}else if(CI(c,a))return!1}e=
zI(c);if(b.length!==e.length&&S_(c,e).length!==l)return!1}else if(b=zI(c),0!==b.length&&0!==S_(c,b).length)return!1;if(0===n.length&&(0===k||1===k&&0===g.length||0===g.size))return!0;if(void 0===d)d={val1:new Map,val2:new Map,position:0};else{b=d.val1.get(g);if(void 0!==b&&(l=d.val2.get(c),void 0!==l))return b===l;d.position++}d.val1.set(g,d.position);d.val2.set(c,d.position);b=Mba(g,c,h,n,d,k);return d.val1.delete(g),d.val2.delete(c),b}function T_(g,c,h,d){for(var k=DI(g),n=0;n<k.length;n++){var b=
k[n];if(Yq(c,b,h,d))return g.delete(b),!0}return!1}function U_(g){switch(qs(g)){case "undefined":return null;case "object":return;case "symbol":return!1;case "string":g=+g;case "number":if(VO(g))return!1}return!0}function V_(g,c,h,d,k,n){for(var b=DI(g),e=0;e<b.length;e++){var l=b[e];if(Yq(h,l,k,n)&&Yq(d,c.get(l),k,n))return g.delete(l),!0}return!1}function Mba(g,c,h,d,k,n){var b=0;if(2===n){if(!function(e,l,a,f){for(var m=null,q=DI(e),r=0;r<q.length;r++){var u=q[r];if("object"===qs(u)&&null!==u)null===
m&&(m=new Set),m.add(u);else if(!l.has(u)){if(a)return!1;var v=e,y=l,z=U_(u);if(null!=z?!z:!y.has(z)||v.has(z))return!1;null===m&&(m=new Set);m.add(u)}}if(null!==m){l=DI(l);for(q=0;q<l.length;q++)if(r=l[q],"object"===qs(r)&&null!==r){if(!T_(m,r,a,f))return!1}else if(!a&&!e.has(r)&&!T_(m,r,a,f))return!1;return 0===m.size}return!0}(g,c,h,k))return!1}else if(3===n){if(!function(e,l,a,f){for(var m=null,q=W_(e),r=0;r<q.length;r++){var u=I_(q[r],2),v=u[0],y=u[1];if("object"===qs(v)&&null!==v)null===m&&
(m=new Set),m.add(v);else if(u=l.get(v),void 0===u&&!l.has(v)||!Yq(y,u,a,f)){if(a)return!1;u=e;var z=l,B=f,C=U_(v);if(null!=C)u=C;else{var G=z.get(C);u=!(void 0===G&&!z.has(C)||!Yq(y,G,!1,B))&&!u.has(C)&&Yq(y,G,!1,B)}if(!u)return!1;null===m&&(m=new Set);m.add(v)}}if(null!==m){l=W_(l);for(q=0;q<l.length;q++)if(r=I_(l[q],2),r=(v=r[0],r[1]),"object"===qs(v)&&null!==v){if(!V_(m,e,v,r,a,f))return!1}else if(!(a||e.has(v)&&Yq(e.get(v),r,!1,f)||V_(m,e,v,r,!1,f)))return!1;return 0===m.size}return!0}(g,c,h,
k))return!1}else if(1===n)for(;b<g.length;b++){if(!cE(g,b)){if(cE(c,b))return!1;for(d=Object.keys(g);b<d.length;b++)if(n=d[b],!cE(c,n)||!Yq(g[n],c[n],h,k))return!1;return d.length===Object.keys(c).length}if(!cE(c,b)||!Yq(g[b],c[b],h,k))return!1}for(b=0;b<d.length;b++)if(n=d[b],!Yq(g[n],c[n],h,k))return!1;return!0}function TO(){function g(M){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==typeof Symbol&&X.constructor===
Symbol&&X!==Symbol.prototype?"symbol":typeof X})(M)}function c(){r=X_.isDeepEqual;u=X_.isDeepStrictEqual}function h(M){if(M.message instanceof Error)throw M.message;throw new F(M);}function d(M,X,T,fa){if(!T){var Ra=!1;if(0===X)Ra=!0,fa="No value argument passed to `assert.ok()`";else if(fa instanceof Error)throw fa;M=new F({actual:T,expected:!0,message:fa,operator:"==",stackStartFn:M});throw M.generatedMessage=Ra,M;}}function k(){for(var M=arguments.length,X=Array(M),T=0;T<M;T++)X[T]=arguments[T];
d.apply(void 0,[k,X.length].concat(X))}function n(M,X,T,fa){if("function"!=typeof X){if(S(X))return X.test(M);if(2===arguments.length)throw new z("expected",["Function","RegExp"],X);if("object"!==g(M)||null===M){var Ra=new F({actual:M,expected:X,message:T,operator:"deepStrictEqual",stackStartFn:fa});throw Ra.operator=fa.name,Ra;}var gb=Object.keys(X);if(X instanceof Error)gb.push("name","message");else if(0===gb.length)throw new B("error",X,"may not be an empty object");return void 0===r&&c(),gb.forEach(function(ea){if(!("string"==
typeof M[ea]&&S(X[ea])&&X[ea].test(M[ea])||ea in M&&u(M[ea],X[ea]))){if(!T){ea=new J(M,gb);var aa=new J(X,gb,M);ea=new F({actual:ea,expected:aa,operator:"deepStrictEqual",stackStartFn:fa});throw ea.actual=M,ea.expected=X,ea.operator=fa.name,ea;}h({actual:M,expected:X,message:T,operator:fa.name,stackStartFn:fa})}}),!0}return void 0!==X.prototype&&M instanceof X||!Error.isPrototypeOf(X)&&!0===X.call({},M)}function b(M){if("function"!=typeof M)throw new z("fn","Function",M);try{M()}catch(X){return X}return P}
function e(M){return L(M)||null!==M&&"object"===g(M)&&"function"==typeof M.then&&"function"==typeof M.catch}function l(M){return Promise.resolve().then(function(){var X;if("function"==typeof M){if(!e(X=M()))throw new C("instance of Promise","promiseFn",X);}else{if(!e(M))throw new z("promiseFn",["Function","Promise"],M);X=M}return Promise.resolve().then(function(){return X}).then(function(){return P}).catch(function(T){return T})})}function a(M,X,T,fa){if("string"==typeof T){if(4===arguments.length)throw new z("error",
["Object","Error","Function","RegExp"],T);if("object"===g(X)&&null!==X){if(X.message===T)throw new y("error/message",'The error message "'.concat(X.message,'" is identical to the message.'));}else if(X===T)throw new y("error/message",'The error "'.concat(X,'" is identical to the message.'));fa=T;T=void 0}else if(null!=T&&"object"!==g(T)&&"function"!=typeof T)throw new z("error",["Object","Error","Function","RegExp"],T);if(X===P){var Ra="";T&&T.name&&(Ra+=" (".concat(T.name,")"));Ra+=fa?": ".concat(fa):
".";h({actual:void 0,expected:T,operator:M.name,message:"Missing expected ".concat("rejects"===M.name?"rejection":"exception").concat(Ra),stackStartFn:M})}if(T&&!n(X,T,fa,M))throw X;}function f(M,X,T,fa){if(X!==P){if("string"==typeof T&&(fa=T,T=void 0),!T||n(X,T))fa=fa?": ".concat(fa):".",h({actual:X,expected:T,operator:M.name,message:"Got unwanted ".concat("doesNotReject"===M.name?"rejection":"exception").concat(fa,"\n")+'Actual message: "'.concat(X&&X.message,'"'),stackStartFn:M});throw X;}}function m(){for(var M=
arguments.length,X=Array(M),T=0;T<M;T++)X[T]=arguments[T];d.apply(void 0,[m,X.length].concat(X))}if(Y_)return WO;Y_=!0;var q=Qh,r,u,v=E_().codes,y=v.ERR_AMBIGUOUS_ARGUMENT,z=v.ERR_INVALID_ARG_TYPE,B=v.ERR_INVALID_ARG_VALUE,C=v.ERR_INVALID_RETURN_VALUE,G=v.ERR_MISSING_ARGS,F=Cba(),N=Sg.inspect;v=Sg.types;var L=v.isPromise,S=v.isRegExp;v=Object.assign?Object.assign:Nba.assign;var ha=Object.is?Object.is:Z_,qa=!1,D=WO=k,P={};D.fail=function ea(X,T,fa,Ra,gb){var aa=arguments.length;if(0===aa)var ia="Failed";
else 1===aa?(fa=X,X=void 0):(!1===qa&&(qa=!0,(q.emitWarning?q.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===aa&&(Ra="!="));if(fa instanceof Error)throw fa;aa={actual:X,expected:T,operator:void 0===Ra?"fail":Ra,stackStartFn:gb||ea};void 0!==fa&&(aa.message=fa);aa=new F(aa);throw ia&&(aa.message=ia,aa.generatedMessage=!0),aa;};D.AssertionError=F;D.ok=
k;D.equal=function gb(T,fa,Ra){if(2>arguments.length)throw new G("actual","expected");T!=fa&&h({actual:T,expected:fa,message:Ra,operator:"==",stackStartFn:gb})};D.notEqual=function ea(fa,Ra,gb){if(2>arguments.length)throw new G("actual","expected");fa==Ra&&h({actual:fa,expected:Ra,message:gb,operator:"!=",stackStartFn:ea})};D.deepEqual=function aa(Ra,gb,ea){if(2>arguments.length)throw new G("actual","expected");void 0===r&&c();r(Ra,gb)||h({actual:Ra,expected:gb,message:ea,operator:"deepEqual",stackStartFn:aa})};
D.notDeepEqual=function ia(gb,ea,aa){if(2>arguments.length)throw new G("actual","expected");void 0===r&&c();r(gb,ea)&&h({actual:gb,expected:ea,message:aa,operator:"notDeepEqual",stackStartFn:ia})};D.deepStrictEqual=function Aa(ea,aa,ia){if(2>arguments.length)throw new G("actual","expected");void 0===r&&c();u(ea,aa)||h({actual:ea,expected:aa,message:ia,operator:"deepStrictEqual",stackStartFn:Aa})};D.notDeepStrictEqual=function ob(aa,ia,Aa){if(2>arguments.length)throw new G("actual","expected");void 0===
r&&c();u(aa,ia)&&h({actual:aa,expected:ia,message:Aa,operator:"notDeepStrictEqual",stackStartFn:ob})};D.strictEqual=function Nb(ia,Aa,ob){if(2>arguments.length)throw new G("actual","expected");ha(ia,Aa)||h({actual:ia,expected:Aa,message:ob,operator:"strictEqual",stackStartFn:Nb})};D.notStrictEqual=function Ab(Aa,ob,Nb){if(2>arguments.length)throw new G("actual","expected");ha(Aa,ob)&&h({actual:Aa,expected:ob,message:Nb,operator:"notStrictEqual",stackStartFn:Ab})};var J=function Kb(ob,Nb,Ab){var jc=
this;if(!(this instanceof Kb))throw new TypeError("Cannot call a class as a function");!0;Nb.forEach(function(ub){ub in ob&&(void 0!==Ab&&"string"==typeof Ab[ub]&&S(ob[ub])&&ob[ub].test(Ab[ub])?jc[ub]=Ab[ub]:jc[ub]=ob[ub])})};return D.throws=function Ab(Nb){for(var Kb=arguments.length,jc=Array(1<Kb?Kb-1:0),ub=1;ub<Kb;ub++)jc[ub-1]=arguments[ub];a.apply(void 0,[Ab,b(Nb)].concat(jc))},D.rejects=function Kb(Ab){for(var jc=arguments.length,ub=Array(1<jc?jc-1:0),Gc=1;Gc<jc;Gc++)ub[Gc-1]=arguments[Gc];
return l(Ab).then(function(Yc){return a.apply(void 0,[Kb,Yc].concat(ub))})},D.doesNotThrow=function jc(Kb){for(var ub=arguments.length,Gc=Array(1<ub?ub-1:0),Yc=1;Yc<ub;Yc++)Gc[Yc-1]=arguments[Yc];f.apply(void 0,[jc,b(Kb)].concat(Gc))},D.doesNotReject=function ub(jc){for(var Gc=arguments.length,Yc=Array(1<Gc?Gc-1:0),Z=1;Z<Gc;Z++)Yc[Z-1]=arguments[Z];return l(jc).then(function(sa){return f.apply(void 0,[ub,sa].concat(Yc))})},D.ifError=function Gc(ub){if(null!=ub){var Yc="ifError got unwanted exception: ";
"object"===g(ub)&&"string"==typeof ub.message?0===ub.message.length&&ub.constructor?Yc+=ub.constructor.name:Yc+=ub.message:Yc+=N(ub);Yc=new F({actual:ub,expected:null,operator:"ifError",message:Yc,stackStartFn:Gc});ub=ub.stack;if("string"==typeof ub){ub=ub.split("\n");ub.shift();for(var Z=Yc.stack.split("\n"),sa=0;sa<ub.length;sa++){var ua=Z.indexOf(ub[sa]);if(-1!==ua){Z=Z.slice(0,ua);break}}Yc.stack="".concat(Z.join("\n"),"\n").concat(ub.join("\n"))}throw Yc;}},D.strict=v(m,D,{equal:D.strictEqual,
deepEqual:D.deepStrictEqual,notEqual:D.notStrictEqual,notDeepEqual:D.notDeepStrictEqual}),D.strict.strict=D.strict,WO}function yj(g,c,h){if(!((this||sh)instanceof yj))return new yj(g,c,h);var d=this||sh;EI.call(this||sh);this.setMaxListeners(Infinity);"function"===typeof c&&(h=c,c={});c=c||{};if(!g||"object"!==typeof g){g=new Oba("First argument must be an abstract-leveldown compliant store");if("function"===typeof h)return FI.nextTick(h,g);throw g;}Pba.strictEqual(typeof g.status,"string",".status required, old abstract-leveldown");
(this||sh).options=IB(c);(this||sh)._db=g;(this||sh).db=new $_(g);this.open(h||function(k){k&&d.emit("error",k)});(this||sh).supports=Qba((this||sh).db.supports,{status:!1,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});Object.keys((this||sh).supports.additionalMethods).forEach(function(k){null==(this||sh)[k]&&((this||sh)[k]=function(){return(this||sh).db[k].apply((this||sh).db,arguments)})},this||sh)}function dE(g,c){if(!g._isOpening()&&!g.isOpen())return FI.nextTick(c,new a0("Database is not open")),
!0}function $t(g,c){return Object.hasOwnProperty.call(g,c)&&c}function Rba(g){return g}function GI(g){return g}function XO(g){return void 0===g||null===g||YO.isBuffer(g)}function Qn(g){if(!((this||Sv)instanceof Qn))return new Qn(g);(this||Sv).opts=g||{};(this||Sv).encodings=ZO}function Sba(g){return g.toString((this||Mf).encoding)}function Tba(g){(this||Mf).charReceived=g.length%2;(this||Mf).charLength=(this||Mf).charReceived?2:0}function Uba(g){(this||Mf).charReceived=g.length%3;(this||Mf).charLength=
(this||Mf).charReceived?3:0}function b0(){function g(z,B,C){(this||th).chunk=z;(this||th).encoding=B;(this||th).callback=C}function c(z,B){var C=JB();z=z||{};var G=z.highWaterMark,F=z.objectMode?16:16384;(this||th).highWaterMark=G||0===G?G:F;(this||th).objectMode=!!z.objectMode;B instanceof C&&((this||th).objectMode=(this||th).objectMode||!!z.writableObjectMode);(this||th).highWaterMark=~~(this||th).highWaterMark;(this||th).needDrain=!1;(this||th).ending=!1;(this||th).ended=!1;(this||th).finished=
!1;(this||th).decodeStrings=!1!==z.decodeStrings;(this||th).defaultEncoding=z.defaultEncoding||"utf8";(this||th).length=0;(this||th).writing=!1;(this||th).corked=0;(this||th).sync=!0;(this||th).bufferProcessing=!1;(this||th).onwrite=function(N){a(B,N)};(this||th).writecb=null;(this||th).writelen=0;(this||th).buffer=[];(this||th).pendingcb=0;(this||th).prefinished=!1;(this||th).errorEmitted=!1}function h(z){var B=JB();if(!((this||th)instanceof h||(this||th)instanceof B))return new h(z);(this||th)._writableState=
new c(z,this||th);(this||th).writable=!0;y.call(this||th)}function d(z,B,C){var G=Error("write after end");z.emit("error",G);r.nextTick(function(){C(G)})}function k(z,B,C,G){var F=!0;if(!(v.isBuffer(C)||v.isString(C)||v.isNullOrUndefined(C)||B.objectMode)){var N=new TypeError("Invalid non-string/buffer chunk");z.emit("error",N);r.nextTick(function(){G(N)});F=!1}return F}function n(z,B,C,G,F){var N=G;!B.objectMode&&!1!==B.decodeStrings&&v.isString(C)&&(C=new u(C,N));v.isBuffer(C)&&(G="buffer");N=B.objectMode?
1:C.length;B.length+=N;var L=B.length<B.highWaterMark;L||(B.needDrain=!0);B.writing||B.corked?B.buffer.push(new g(C,G,F)):b(z,B,!1,N,C,G,F);return L}function b(z,B,C,G,F,N,L){B.writelen=G;B.writecb=L;B.writing=!0;B.sync=!0;C?z._writev(F,B.onwrite):z._write(F,N,B.onwrite);B.sync=!1}function e(z,B,C,G,F){C?r.nextTick(function(){B.pendingcb--;F(G)}):(B.pendingcb--,F(G));z._writableState.errorEmitted=!0;z.emit("error",G)}function l(z){z.writing=!1;z.writecb=null;z.length-=z.writelen;z.writelen=0}function a(z,
B){var C=z._writableState,G=C.sync,F=C.writecb;l(C);if(B)e(z,C,G,B,F);else{var N=C.ending&&0===C.length&&!C.finished&&!C.writing;N||C.corked||C.bufferProcessing||!C.buffer.length||m(z,C);G?r.nextTick(function(){f(z,C,N,F)}):f(z,C,N,F)}}function f(z,B,C,G){!C&&0===B.length&&B.needDrain&&(B.needDrain=!1,z.emit("drain"));B.pendingcb--;G();q(z,B)}function m(z,B){B.bufferProcessing=!0;if(z._writev&&1<B.buffer.length){for(var C=[],G=0;G<B.buffer.length;G++)C.push(B.buffer[G].callback);B.pendingcb++;b(z,
B,!0,B.length,B.buffer,"",function(L){for(var S=0;S<C.length;S++)B.pendingcb--,C[S](L)});B.buffer=[]}else{for(G=0;G<B.buffer.length;G++){var F=B.buffer[G],N=F.chunk;b(z,B,!1,B.objectMode?1:N.length,N,F.encoding,F.callback);if(B.writing){G++;break}}G<B.buffer.length?B.buffer=B.buffer.slice(G):B.buffer.length=0}B.bufferProcessing=!1}function q(z,B){var C=B.ending&&0===B.length&&!B.finished&&!B.writing;C&&(0===B.pendingcb?(B.prefinished||(B.prefinished=!0,z.emit("prefinish")),B.finished=!0,z.emit("finish")):
B.prefinished||(B.prefinished=!0,z.emit("prefinish")));return C}if(c0)return $O;c0=!0;var r=Qh;$O=h;var u=eh.Buffer;h.WritableState=c;var v=Xk;v.inherits=Rj;var y=zz;v.inherits(h,y);h.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};h.prototype.write=function(z,B,C){var G=(this||th)._writableState,F=!1;v.isFunction(B)&&(C=B,B=null);v.isBuffer(z)?B="buffer":B||(B=G.defaultEncoding);v.isFunction(C)||(C=function(){});G.ended?d(this||th,G,C):k(this||th,G,z,C)&&(G.pendingcb++,
F=n(this||th,G,z,B,C));return F};h.prototype.cork=function(){(this||th)._writableState.corked++};h.prototype.uncork=function(){var z=(this||th)._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.finished||z.bufferProcessing||!z.buffer.length||m(this||th,z))};h.prototype._write=function(z,B,C){C(Error("not implemented"))};h.prototype._writev=null;h.prototype.end=function(z,B,C){var G=(this||th)._writableState;v.isFunction(z)?(C=z,B=z=null):v.isFunction(B)&&(C=B,B=null);v.isNullOrUndefined(z)||
this.write(z,B);G.corked&&(G.corked=1,this.uncork());if(!G.ending&&!G.finished){z=this||th;G.ending=!0;q(z,G);if(C)if(G.finished)r.nextTick(C);else z.once("finish",C);G.ended=!0}};return $O}function JB(){function g(e){if(!((this||rs)instanceof g))return new g(e);n.call(this||rs,e);b.call(this||rs,e);e&&!1===e.readable&&((this||rs).readable=!1);e&&!1===e.writable&&((this||rs).writable=!1);(this||rs).allowHalfOpen=!0;e&&!1===e.allowHalfOpen&&((this||rs).allowHalfOpen=!1);this.once("end",c)}function c(){(this||
rs).allowHalfOpen||(this||rs)._writableState.ended||h.nextTick((this||rs).end.bind(this||rs))}if(d0)return aP;d0=!0;var h=Qh;aP=g;var d=Object.keys||function(e){var l=[],a;for(a in e)l.push(a);return l},k=Xk;k.inherits=Rj;var n=e0(),b=b0();k.inherits(g,n);(function(e,l){for(var a=0,f=e.length;a<f;a++)l(e[a],a)})(d(b.prototype),function(e){g.prototype[e]||(g.prototype[e]=b.prototype[e])});return aP}function e0(){function g(F,N){var L=JB();F=F||{};var S=F.highWaterMark,ha=F.objectMode?16:16384;(this||
Xe).highWaterMark=S||0===S?S:ha;(this||Xe).highWaterMark=~~(this||Xe).highWaterMark;(this||Xe).buffer=[];(this||Xe).length=0;(this||Xe).pipes=null;(this||Xe).pipesCount=0;(this||Xe).flowing=null;(this||Xe).ended=!1;(this||Xe).endEmitted=!1;(this||Xe).reading=!1;(this||Xe).sync=!0;(this||Xe).needReadable=!1;(this||Xe).emittedReadable=!1;(this||Xe).readableListening=!1;(this||Xe).objectMode=!!F.objectMode;N instanceof L&&((this||Xe).objectMode=(this||Xe).objectMode||!!F.readableObjectMode);(this||Xe).defaultEncoding=
F.defaultEncoding||"utf8";(this||Xe).ranOut=!1;(this||Xe).awaitDrain=0;(this||Xe).readingMore=!1;(this||Xe).decoder=null;(this||Xe).encoding=null;F.encoding&&(C||(C=bP.StringDecoder),(this||Xe).decoder=new C(F.encoding),(this||Xe).encoding=F.encoding)}function c(F){JB();if(!((this||Xe)instanceof c))return new c(F);(this||Xe)._readableState=new g(F,this||Xe);(this||Xe).readable=!0;z.call(this||Xe)}function h(F,N,L,S,ha){var qa=L;var D=null;B.isBuffer(qa)||B.isString(qa)||B.isNullOrUndefined(qa)||N.objectMode||
(D=new TypeError("Invalid non-string/buffer chunk"));(qa=D)?F.emit("error",qa):B.isNullOrUndefined(L)?(N.reading=!1,N.ended||(N.decoder&&!N.ended&&(L=N.decoder.end())&&L.length&&(N.buffer.push(L),N.length+=N.objectMode?1:L.length),N.ended=!0,k(F))):N.objectMode||L&&0<L.length?N.ended&&!ha?(L=Error("stream.push() after EOF"),F.emit("error",L)):N.endEmitted&&ha?(L=Error("stream.unshift() after end event"),F.emit("error",L)):(!N.decoder||ha||S||(L=N.decoder.write(L)),ha||(N.reading=!1),N.flowing&&0===
N.length&&!N.sync?(F.emit("data",L),F.read(0)):(N.length+=N.objectMode?1:L.length,ha?N.buffer.unshift(L):N.buffer.push(L),N.needReadable&&k(F)),b(F,N)):ha||(N.reading=!1);return!N.ended&&(N.needReadable||N.length<N.highWaterMark||0===N.length)}function d(F,N){if(0===N.length&&N.ended)return 0;if(N.objectMode)return 0===F?0:1;if(isNaN(F)||B.isNull(F))return N.flowing&&N.buffer.length?N.buffer[0].length:N.length;if(0>=F)return 0;if(F>N.highWaterMark){var L=F;if(8388608<=L)L=8388608;else{L--;for(var S=
1;32>S;S<<=1)L|=L>>S;L++}N.highWaterMark=L}if(F>N.length){if(N.ended)return N.length;N.needReadable=!0;return 0}return F}function k(F){var N=F._readableState;N.needReadable=!1;N.emittedReadable||(G("emitReadable",N.flowing),N.emittedReadable=!0,N.sync?r.nextTick(function(){n(F)}):n(F))}function n(F){G("emit readable");F.emit("readable");a(F)}function b(F,N){N.readingMore||(N.readingMore=!0,r.nextTick(function(){for(var L=N.length;!N.reading&&!N.flowing&&!N.ended&&N.length<N.highWaterMark&&(G("maybeReadMore read 0"),
F.read(0),L!==N.length);)L=N.length;N.readingMore=!1}))}function e(F){return function(){var N=F._readableState;G("pipeOnDrain",N.awaitDrain);N.awaitDrain&&N.awaitDrain--;0===N.awaitDrain&&y.listenerCount(F,"data")&&(N.flowing=!0,a(F))}}function l(F,N){N.resumeScheduled||(N.resumeScheduled=!0,r.nextTick(function(){N.resumeScheduled=!1;F.emit("resume");a(F);N.flowing&&!N.reading&&F.read(0)}))}function a(F){var N=F._readableState;G("flow",N.flowing);if(N.flowing){do var L=F.read();while(null!==L&&N.flowing)
}}function f(F,N){var L=N.buffer,S=N.length,ha=!!N.decoder;N=!!N.objectMode;if(0===L.length)return null;if(0===S)S=null;else if(N)S=L.shift();else if(!F||F>=S)S=ha?L.join(""):v.concat(L,S),L.length=0;else if(F<L[0].length)N=L[0],S=N.slice(0,F),L[0]=N.slice(F);else if(F===L[0].length)S=L.shift();else{S=ha?"":new v(F);for(var qa=0,D=0,P=L.length;D<P&&qa<F;D++){N=L[0];var J=Math.min(F-qa,N.length);ha?S+=N.slice(0,J):N.copy(S,qa,0,J);J<N.length?L[0]=N.slice(J):L.shift();qa+=J}}return S}function m(F){var N=
F._readableState;if(0<N.length)throw Error("endReadable called on non-empty stream");N.endEmitted||(N.ended=!0,r.nextTick(function(){N.endEmitted||0!==N.length||(N.endEmitted=!0,F.readable=!1,F.emit("end"))}))}function q(F,N){for(var L=0,S=F.length;L<S;L++)N(F[L],L)}if(f0)return cP;f0=!0;var r=Qh;cP=c;var u=Vba,v=eh.Buffer;c.ReadableState=g;var y=Qt.EventEmitter;y.listenerCount||(y.listenerCount=function(F,N){return F.listeners(N).length});var z=zz,B=Xk;B.inherits=Rj;var C,G=Wba;G=G&&G.debuglog?G.debuglog("stream"):
function(){};B.inherits(c,z);c.prototype.push=function(F,N){var L=(this||Xe)._readableState;B.isString(F)&&!L.objectMode&&(N=N||L.defaultEncoding,N!==L.encoding&&(F=new v(F,N),N=""));return h(this||Xe,L,F,N,!1)};c.prototype.unshift=function(F){return h(this||Xe,(this||Xe)._readableState,F,"",!0)};c.prototype.setEncoding=function(F){C||(C=bP.StringDecoder);(this||Xe)._readableState.decoder=new C(F);(this||Xe)._readableState.encoding=F;return this||Xe};c.prototype.read=function(F){G("read",F);var N=
(this||Xe)._readableState,L=F;if(!B.isNumber(F)||0<F)N.emittedReadable=!1;if(0===F&&N.needReadable&&(N.length>=N.highWaterMark||N.ended))return G("read: emitReadable",N.length,N.ended),0===N.length&&N.ended?m(this||Xe):k(this||Xe),null;F=d(F,N);if(0===F&&N.ended)return 0===N.length&&m(this||Xe),null;var S=N.needReadable;G("need readable",S);if(0===N.length||N.length-F<N.highWaterMark)S=!0,G("length less than watermark",S);if(N.ended||N.reading)S=!1,G("reading or ended",S);S&&(G("do read"),N.reading=
!0,N.sync=!0,0===N.length&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1);S&&!N.reading&&(F=d(L,N));S=0<F?f(F,N):null;B.isNull(S)&&(N.needReadable=!0,F=0);N.length-=F;0!==N.length||N.ended||(N.needReadable=!0);L!==F&&N.ended&&0===N.length&&m(this||Xe);B.isNull(S)||this.emit("data",S);return S};c.prototype._read=function(F){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(F,N){function L(Ra){G("onunpipe");Ra===X&&ha()}function S(){G("onend");F.end()}function ha(){G("cleanup");
F.removeListener("close",P);F.removeListener("finish",J);F.removeListener("drain",fa);F.removeListener("error",D);F.removeListener("unpipe",L);X.removeListener("end",S);X.removeListener("end",ha);X.removeListener("data",qa);!T.awaitDrain||F._writableState&&!F._writableState.needDrain||fa()}function qa(Ra){G("ondata");!1===F.write(Ra)&&(G("false write response, pause",X._readableState.awaitDrain),X._readableState.awaitDrain++,X.pause())}function D(Ra){G("onerror",Ra);M();F.removeListener("error",D);
0===y.listenerCount(F,"error")&&F.emit("error",Ra)}function P(){F.removeListener("finish",J);M()}function J(){G("onfinish");F.removeListener("close",P);M()}function M(){G("unpipe");X.unpipe(F)}var X=this||Xe,T=(this||Xe)._readableState;switch(T.pipesCount){case 0:T.pipes=F;break;case 1:T.pipes=[T.pipes,F];break;default:T.pipes.push(F)}T.pipesCount+=1;G("pipe count=%d opts=%j",T.pipesCount,N);N=N&&!1===N.end||F===r.stdout||F===r.stderr?ha:S;if(T.endEmitted)r.nextTick(N);else X.once("end",N);F.on("unpipe",
L);var fa=e(X);F.on("drain",fa);X.on("data",qa);if(F._events&&F._events.error)u(F._events.error)?F._events.error.unshift(D):F._events.error=[D,F._events.error];else F.on("error",D);F.once("close",P);F.once("finish",J);F.emit("pipe",X);T.flowing||(G("pipe resume"),X.resume());return F};c.prototype.unpipe=function(F){var N=(this||Xe)._readableState;if(0===N.pipesCount)return this||Xe;if(1===N.pipesCount){if(F&&F!==N.pipes)return this||Xe;F||(F=N.pipes);N.pipes=null;N.pipesCount=0;N.flowing=!1;F&&F.emit("unpipe",
this||Xe);return this||Xe}if(!F){F=N.pipes;var L=N.pipesCount;N.pipes=null;N.pipesCount=0;N.flowing=!1;for(var S=0;S<L;S++)F[S].emit("unpipe",this||Xe);return this||Xe}a:{S=N.pipes;L=0;for(var ha=S.length;L<ha;L++)if(S[L]===F){S=L;break a}S=-1}if(-1===S)return this||Xe;N.pipes.splice(S,1);--N.pipesCount;1===N.pipesCount&&(N.pipes=N.pipes[0]);F.emit("unpipe",this||Xe);return this||Xe};c.prototype.on=function(F,N){N=z.prototype.on.call(this||Xe,F,N);"data"===F&&!1!==(this||Xe)._readableState.flowing&&
this.resume();if("readable"===F&&(this||Xe).readable&&(F=(this||Xe)._readableState,!F.readableListening))if(F.readableListening=!0,F.emittedReadable=!1,F.needReadable=!0,F.reading)F.length&&k(this||Xe);else{var L=this||Xe;r.nextTick(function(){G("readable nexttick read 0");L.read(0)})}return N};c.prototype.addListener=c.prototype.on;c.prototype.resume=function(){var F=(this||Xe)._readableState;F.flowing||(G("resume"),F.flowing=!0,F.reading||(G("resume read 0"),this.read(0)),l(this||Xe,F));return this||
Xe};c.prototype.pause=function(){G("call pause flowing=%j",(this||Xe)._readableState.flowing);!1!==(this||Xe)._readableState.flowing&&(G("pause"),(this||Xe)._readableState.flowing=!1,this.emit("pause"));return this||Xe};c.prototype.wrap=function(F){var N=(this||Xe)._readableState,L=!1,S=this||Xe;F.on("end",function(){G("wrapped end");if(N.decoder&&!N.ended){var qa=N.decoder.end();qa&&qa.length&&S.push(qa)}S.push(null)});F.on("data",function(qa){G("wrapped data");N.decoder&&(qa=N.decoder.write(qa));
qa&&(N.objectMode||qa.length)&&!S.push(qa)&&(L=!0,F.pause())});for(var ha in F)B.isFunction(F[ha])&&B.isUndefined((this||Xe)[ha])&&((this||Xe)[ha]=function(qa){return function(){return F[qa].apply(F,arguments)}}(ha));q(["error","close","destroy","pause","resume"],function(qa){F.on(qa,S.emit.bind(S,qa))});S._read=function(qa){G("wrapped _read",qa);L&&(L=!1,F.resume())};return S};c._fromList=f;return cP}function g0(){function g(n,b){(this||km).afterTransform=function(e,l){var a=b._transformState;a.transforming=
!1;var f=a.writecb;f?(a.writechunk=null,a.writecb=null,k.isNullOrUndefined(l)||b.push(l),f&&f(e),e=b._readableState,e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&b._read(e.highWaterMark),e=void 0):e=b.emit("error",Error("no writecb in Transform class"));return e};(this||km).needTransform=!1;(this||km).transforming=!1;(this||km).writecb=null;(this||km).writechunk=null}function c(n){if(!((this||km)instanceof c))return new c(n);d.call(this||km,n);(this||km)._transformState=new g(n,this||km);
var b=this||km;(this||km)._readableState.needReadable=!0;(this||km)._readableState.sync=!1;this.once("prefinish",function(){k.isFunction((this||km)._flush)?this._flush(function(e){h(b,e)}):h(b)})}function h(n,b){if(b)return n.emit("error",b);b=n._transformState;if(n._writableState.length)throw Error("calling transform done when ws.length != 0");if(b.transforming)throw Error("calling transform done when still transforming");return n.push(null)}if(h0)return dP;h0=!0;dP=c;var d=JB(),k=Xk;k.inherits=
Rj;k.inherits(c,d);c.prototype.push=function(n,b){(this||km)._transformState.needTransform=!1;return d.prototype.push.call(this||km,n,b)};c.prototype._transform=function(n,b,e){throw Error("not implemented");};c.prototype._write=function(n,b,e){var l=(this||km)._transformState;l.writecb=e;l.writechunk=n;l.writeencoding=b;l.transforming||(n=(this||km)._readableState,(l.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};c.prototype._read=function(n){n=(this||km)._transformState;
k.isNull(n.writechunk)||!n.writecb||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};return dP}function Xba(){function g(d){if(!((this||i0)instanceof g))return new g(d);c.call(this||i0,d)}if(j0)return eP;j0=!0;eP=g;var c=g0(),h=Xk;h.inherits=Rj;h.inherits(g,c);g.prototype._transform=function(d,k,n){n(null,d)};return eP}function eE(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function Yba(g){var c={},h;for(h in g)c[h]=
g[h];return c}function Zba(g,c,h){g.open(function(){});return{apply:function(d,k,n){k=k||{};for(var b=[],e=-1,l=d.length;++e<l;){var a=d[e],f=a,m=a.prefix;m&&m.options&&(f.keyEncoding=f.keyEncoding||m.options.keyEncoding,f.valueEncoding=f.valueEncoding||m.options.valueEncoding);f=a;m=a.prefix;m="function"===typeof m.prefix?m.prefix():m;f.prefix=m;b.push({key:c.encode([a.prefix,h.encodeKey(a.key,k,a)]),value:"del"!==a.type&&h.encodeValue(a.value,k,a),type:a.type})}g.db.batch(b,k,n)},get:function(d,
k,n,b){n.asBuffer=h.valueAsBuffer(n);return g.db.get(c.encode([k,h.encodeKey(d,n,void 0)]),n,function(e,l){e?b(e):b(null,h.decodeValue(l,n))})},createDecoder:function(d){return function(k,n){return{key:h.decodeKey(c.decode(k)[1],d),value:h.decodeValue(n,d)}}},isClosed:function(){return g.isClosed()},close:function(d){return g.close(d)},iterator:function(d){var k=Yba(d||{}),n=d.prefix||[];$ba.toLtgt(d,k,function(b){return c.encode([n,h.encodeKey(b,k,{})])},c.lowerBound,c.upperBound);k.prefix=null;
k.keyAsBuffer=k.valueAsBuffer=!1;"number"!==typeof k.limit&&(k.limit=-1);k.keyAsBuffer=c.buffer;k.valueAsBuffer=h.valueAsBuffer(k);return function(b){return{next:function(e){return b.next(e)},end:function(e){b.end(e)}}}(g.db.iterator(k))}}}function fP(){Error.call(this)}function Ax(g,c){if(!(this instanceof Ax))return new Ax(g,c);k0.call(this,{objectMode:!0,highWaterMark:g.highWaterMark});this._waiting=!1;this._options=g;this._makeData=c}function KB(g){l0.call(this||Tv,g);(this||Tv)._destroyed=!1}
function aca(g,c,h){h(null,g)}function gP(g){return function(c,h,d){"function"==typeof c&&(d=h,h=c,c={});"function"!=typeof h&&(h=aca);"function"!=typeof d&&(d=null);return g(c,h,d)}}function Mi(g){this._capacity=m0(g);this._front=this._length=0;if(n0(g)){for(var c=g.length,h=0;h<c;++h)this[h]=g[h];this._length=c}}function m0(g){if("number"!==typeof g)if(n0(g))g=g.length;else return 16;g=Math.min(Math.max(16,g),1073741824);g=(g>>>0)-1;g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;return(g|g>>16)+1}function hP(g){g=
g.rev_tree.slice();for(var c;c=g.pop();){var h=c.ids,d=h[2];c=c.pos;if(d.length){h=0;for(var k=d.length;h<k;h++)g.push({pos:c+1,ids:d[h]})}else if(d=!!h[1].deleted,h=h[0],!n||(e!==d?e:b!==c?b<c:n<h)){var n=h;var b=c;var e=d}}return b+"-"+n}function HI(g,c){g=g.slice();for(var h;h=g.pop();){var d=h.pos,k=h.ids,n=k[2];h=c(0===n.length,d,k[0],h.ctx,k[1]);k=0;for(var b=n.length;k<b;k++)g.push({pos:d+1,ids:n[k],ctx:h})}}function bca(g,c){return g.pos-c.pos}function o0(g){var c=[];HI(g,function(d,k,n,b,
e){d&&c.push({rev:k+"-"+n,pos:k,opts:e})});c.sort(bca).reverse();g=0;for(var h=c.length;g<h;g++)delete c[g].pos;return c}function p0(g){var c=[];g=g.slice();for(var h;h=g.pop();){var d=h.pos,k=h.ids,n=k[0],b=k[1];k=k[2];var e=0===k.length;h=h.history?h.history.slice():[];h.push({id:n,opts:b});e&&c.push({pos:d+1-h.length,ids:h});n=0;for(b=k.length;n<b;n++)g.push({pos:d+1,ids:k[n],history:h})}return c.reverse()}function cca(g,c){return g.pos-c.pos}function q0(g,c){for(var h,d,k=g.length;c<k;c++){var n=
g[c];n=[n.id,n.opts,[]];d?(d[2].push(n),d=n):h=d=n}return h}function dca(g,c){return g[0]<c[0]?-1:1}function r0(g,c){c=[{tree1:g,tree2:c}];for(var h=!1;0<c.length;){var d=c.pop(),k=d.tree1;d=d.tree2;if(k[1].status||d[1].status)k[1].status="available"===k[1].status||"available"===d[1].status?"available":"missing";for(var n=0;n<d[2].length;n++)if(k[2][0]){for(var b=!1,e=0;e<k[2].length;e++)k[2][e][0]===d[2][n][0]&&(c.push({tree1:k[2][e],tree2:d[2][n]}),b=!0);if(!b){h="new_branch";b=k[2];e=d[2][n];for(var l,
a=b,f=e,m=dca,q=0,r=a.length;q<r;)l=q+r>>>1,0>m(a[l],f)?q=l+1:r=l;b.splice(q,0,e)}}else h="new_leaf",k[2][0]=d[2][n]}return{conflicts:h,tree:g}}function s0(g,c,h){var d=[],k=!1,n=!1;if(!g.length)return{tree:[c],conflicts:"new_leaf"};for(var b=0,e=g.length;b<e;b++){var l=g[b];if(l.pos===c.pos&&l.ids[0]===c.ids[0])n=r0(l.ids,c.ids),d.push({pos:l.pos,ids:n.tree}),k=k||n.conflicts,n=!0;else if(!0!==h){var a=l.pos<c.pos?l:c,f=l.pos<c.pos?c:l,m=[],q=[];for(q.push({ids:a.ids,diff:f.pos-a.pos,parent:null,
parentIdx:null});0<q.length;){var r=q.pop();if(0===r.diff)r.ids[0]===f.ids[0]&&m.push(r);else for(var u=r.ids[2],v=0,y=u.length;v<y;v++)q.push({ids:u[v],diff:r.diff-1,parent:r.ids,parentIdx:v})}(m=m[0])?(n=r0(m.ids,f.ids),m.parent[2][m.parentIdx]=n.tree,d.push({pos:a.pos,ids:a.ids}),k=k||n.conflicts,n=!0):d.push(l)}else d.push(l)}n||d.push(c);d.sort(cca);return{tree:d,conflicts:k||"internal_node"}}function eca(g,c){g=p0(g);for(var h,d,k=0,n=g.length;k<n;k++){var b=g[k],e=b.ids;if(e.length>c){h||(h=
{});var l=e.length-c;var a={pos:b.pos+l,ids:q0(e,l)};for(var f=0;f<l;f++)h[b.pos+f+"-"+e[f].id]=!0}else a={pos:b.pos,ids:q0(e,0)};d=d?s0(d,a,!0).tree:[a]}h&&HI(d,function(m,q,r){delete h[q+"-"+r]});return{tree:d,revs:h?Object.keys(h):[]}}function fca(g){return g.ids}function t0(g){return g.reduce(function(c,h){c[h]=!0;return c},{})}function u0(g){if(!/^\d+-/.test(g))return Bp.createError(Bp.INVALID_REV);var c=g.indexOf("-"),h=g.substring(0,c);g=g.substring(c+1);return{prefix:parseInt(h,10),id:g}}
function v0(g,c,h){h||(h={deterministic_revs:!0});var d={status:"available"};g._deleted&&(d.deleted=!0);if(c){g._id||(g._id=Az.uuid());var k=Az.rev(g,h.deterministic_revs);if(g._rev){c=u0(g._rev);if(c.error)return c;g._rev_tree=[{pos:c.prefix,ids:[c.id,{status:"missing"},[[k,d,[]]]]}];var n=c.prefix+1}else g._rev_tree=[{pos:1,ids:[k,d,[]]}],n=1}else{if(g._revisions){k=g._revisions;n=k.start-k.ids.length+1;k=k.ids;c=[k[0],d,[]];h=1;for(var b=k.length;h<b;h++)c=[k[h],{status:"missing"},[c]];g._rev_tree=
[{pos:n,ids:c}];n=g._revisions.start;k=g._revisions.ids[0]}if(!g._rev_tree){c=u0(g._rev);if(c.error)return c;n=c.prefix;k=c.id;g._rev_tree=[{pos:n,ids:[k,d,[]]}]}}Az.invalidIdError(g._id);g._rev=n+"-"+k;d={metadata:{},data:{}};for(var e in g)if(Object.prototype.hasOwnProperty.call(g,e)){if((n="_"===e[0])&&!gca[e])throw g=Bp.createError(Bp.DOC_VALIDATION,e),g.message=Bp.DOC_VALIDATION.message+": "+e,g;n&&!hca[e]?d.metadata[e.slice(1)]=g[e]:d.data[e]=g[e]}return d}function ica(g,c,h){try{var d=fE.atob(g.data)}catch(k){d=
{error:Bp.createError(Bp.BAD_ARG,"Attachment is not a valid base64 string")}}if(d.error)return h(d.error);g.length=d.length;g.data="blob"===c?fE.binaryStringToBlobOrBuffer(d,g.content_type):"base64"===c?fE.btoa(d):d;w0.binaryMd5(d,function(k){g.digest="md5-"+k;h()})}function jca(g,c,h){w0.binaryMd5(g.data,function(d){g.digest="md5-"+d;g.length=g.data.size||g.data.length||0;"binary"===c?fE.blobOrBufferToBinaryString(g.data,function(k){g.data=k;h()}):"base64"===c?fE.blobOrBufferToBase64(g.data,function(k){g.data=
k;h()}):h()})}function kca(g,c,h){if(g.stub)return h();"string"===typeof g.data?ica(g,c,h):jca(g,c,h)}function x0(g,c,h,d,k,n,b,e){if(Ko.revExists(c.rev_tree,h.metadata.rev)&&!e)return d[k]=h,n();var l=c.winningRev||Ko.winningRev(c),a="deleted"in c?c.deleted:Ko.isDeleted(c,l),f="deleted"in h.metadata?h.metadata.deleted:Ko.isDeleted(h.metadata),m=/^1-/.test(h.metadata.rev);a&&!f&&e&&m&&(m=h.data,m._rev=l,m._id=h.metadata.id,h=v0(m,e));g=Ko.merge(c.rev_tree,h.metadata.rev_tree[0],g);if(e&&(a&&f&&"new_leaf"!==
g.conflicts||!a&&"new_leaf"!==g.conflicts||a&&!f&&"new_branch"===g.conflicts))return h=Bp.createError(Bp.REV_CONFLICT),d[k]=h,n();d=h.metadata.rev;h.metadata.rev_tree=g.tree;h.stemmedRevs=g.stemmedRevs||[];c.rev_map&&(h.metadata.rev_map=c.rev_map);c=Ko.winningRev(h.metadata);e=Ko.isDeleted(h.metadata,c);a=a===e?0:a<e?-1:1;d=d===c?e:Ko.isDeleted(h.metadata,d);b(h,c,e,d,!0,a,k,n)}function gE(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function y0(g,c){g=new Uint8Array(g);return hE.blob([g],
{type:c})}function lca(g,c){hE.readAsBinaryString(g,c)}function z0(g,c){c=c.prefix()[0];g=g._cache;var h=g.get(c);h||(h=new ss.Map,g.set(c,h));return h}function Bz(){this._batch=[];this._cache=new ss.Map}function iP(g){return"winningRev"in g?g.winningRev:iE.winningRev(g)}function mca(g,c,h){var d=g.content_type;return new Promise(function(k,n){c.binaryStore.get(g.digest,function(b,e){if(b){if("NotFoundError"!==b.name)return n(b);b=h.binary?hE.binaryStringToBlobOrBuffer("",d):""}else b=h.binary?y0(e,
d):e.toString("base64");delete g.stub;delete g.length;g.data=b;k()})})}function jP(g,c,h){var d=[];g.forEach(function(k){k.doc&&k.doc._attachments&&Object.keys(k.doc._attachments).forEach(function(n){n=k.doc._attachments[n];"data"in n||d.push(n)})});return Promise.all(d.map(function(k){return mca(k,c,h)}))}function kP(g){(this||Cz).db=g;(this||Cz)._ended=!1;(this||Cz)._nexting=!1}function Bx(g){(this||Zj)._db=g;(this||Zj)._operations=[];(this||Zj)._written=!1}function Rn(g){if(!arguments.length||
void 0===g)throw Error("constructor requires at least a location argument");if("string"!=typeof g)throw Error("constructor requires a location string argument");(this||Fk).location=g;(this||Fk).status="new"}function Cp(g,c,h,d,k,n){this._color=g;this.key=c;this.value=h;this.left=d;this.right=k;this._count=n}function au(g){return new Cp(g._color,g.key,g.value,g.left,g.right,g._count)}function Cx(g,c){return new Cp(g,c.key,c.value,c.left,c.right,c._count)}function ak(g){g._count=1+(g.left?g.left._count:
0)+(g.right?g.right._count:0)}function LB(g,c){this._compare=g;this.root=c}function lP(g,c){if(c.left){var h=lP(g,c.left);if(h)return h}if(h=g(c.key,c.value))return h;if(c.right)return lP(g,c.right)}function mP(g,c,h,d){if(0>=c(g,d.key)){if(d.left){var k=mP(g,c,h,d.left);if(k)return k}if(k=h(d.key,d.value))return k}if(d.right)return mP(g,c,h,d.right)}function nP(g,c,h,d,k){var n=h(g,k.key),b=h(c,k.key);if(0>=n&&(k.left&&(n=nP(g,c,h,d,k.left))||0<b&&(n=d(k.key,k.value))))return n;if(0<b&&k.right)return nP(g,
c,h,d,k.right)}function Dp(g,c){this.tree=g;this._stack=c}function A0(g,c){g.key=c.key;g.value=c.value;g.left=c.left;g.right=c.right;g._color=c._color;g._count=c._count}function nca(g,c){return g<c?-1:g>c?1:0}function B0(g,c){for(var h in g)c[h]=g[h]}function MB(g,c,h){return Uv(g,c,h)}function oca(g){return 0<Ep.compare(g,(this||Pe)._end)}function pca(g){return 0<=Ep.compare(g,(this||Pe)._end)}function qca(g){return 0>Ep.compare(g,(this||Pe)._end)}function rca(g){return 0>=Ep.compare(g,(this||Pe)._end)}
function II(g,c){C0.call(this||Pe,g);(this||Pe)._limit=c.limit;-1===(this||Pe)._limit&&((this||Pe)._limit=Infinity);g=g._store[g._location];(this||Pe).keyAsBuffer=!1!==c.keyAsBuffer;(this||Pe).valueAsBuffer=!1!==c.valueAsBuffer;(this||Pe)._reverse=c.reverse;(this||Pe)._options=c;(this||Pe)._done=0;(this||Pe)._reverse?((this||Pe)._incr="prev",(this||Pe)._start=Ep.upperBound(c),(this||Pe)._end=Ep.lowerBound(c),"undefined"===typeof(this||Pe)._start?(this||Pe)._tree=g.end:Ep.upperBoundInclusive(c)?(this||
Pe)._tree=g.le((this||Pe)._start):(this||Pe)._tree=g.lt((this||Pe)._start),(this||Pe)._end&&(Ep.lowerBoundInclusive(c)?(this||Pe)._test=pca:(this||Pe)._test=oca)):((this||Pe)._incr="next",(this||Pe)._start=Ep.lowerBound(c),(this||Pe)._end=Ep.upperBound(c),"undefined"===typeof(this||Pe)._start?(this||Pe)._tree=g.begin:Ep.lowerBoundInclusive(c)?(this||Pe)._tree=g.ge((this||Pe)._start):(this||Pe)._tree=g.gt((this||Pe)._start),(this||Pe)._end&&(Ep.upperBoundInclusive(c)?(this||Pe)._test=rca:(this||Pe)._test=
qca))}function Lo(g){if(!((this||Pe)instanceof Lo))return new Lo(g);D0.call(this||Pe,"string"===typeof g?g:"");(this||Pe)._location=(this||Pe).location?"$"+(this||Pe).location:"_tree";(this||Pe)._store=(this||Pe).location?NB:this||Pe;(this||Pe)._store[(this||Pe)._location]=(this||Pe)._store[(this||Pe)._location]||sca(Ep.compare)}function E0(g){return g&&"object"===typeof g&&"default"in g?g["default"]:g}function oP(g,c){g=tca.assign({db:uca},g);vca.call(this,g,c)}function pP(g){g&&(g.__serialize__=
function(){return{__expr__:'({type: "'+g.type+'", name: "'+g.name+'", _id: "'+g._id+'"})'}});return g}function jE(g){var c,h,d,k,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){if(!g||cg.obj.isEmpty(g))return l.return(!1);if(g&&g._rev)return l.return(g);c=g;h=c.type;d=c.name;k=c._id;l.setFinallyBlock(2);n=Object;b=n.assign;e=g;return l.yield(cg.MorphicDB.default.fetchCommit(h,d,k),4)}2!=l.nextAddress&&b.call(n,e,l.yieldResult);l.enterFinallyBlock();return l.return(g)})}
function kE(g){return Object.values(g).filter(function(c){return 1==hd.Path("props.isComponent.value").get(c)}).map(function(c){return c.props.name.value})}function JI(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:return g.label="loading System Elements",g.progress=0,g.status="core elements...",c.yield(hd.resource("styleguide://System/buttons/light").read(),2);case 2:return g.progress=.2,g.status="top bar...",c.yield(hd.resource("styleguide://SystemIDE/lively top bar master").read(),
3);case 3:return g.progress=.4,g.status="scene graph...",c.yield(hd.resource("styleguide://SystemIDE/styling side bar master").read(),4);case 4:return g.progress=.6,g.status="styling palette...",c.yield(hd.resource("styleguide://SystemIDE/scene graph side bar master").read(),5);case 5:return g.progress=.8,g.status="world loader...",c.yield(hd.resource("styleguide://partial freezing/project browser").read(),6);case 6:return g.progress=1,c.yield(hd.promise.delay(500),0)}})}function qP(g){delete hd.fetchedSnapshots[g]}
function lE(g,c){return Td.serialize(g,Td.normalizeOptions(c))}function mE(g,c){c=void 0===c?{}:c;return Td.deserializeWithMigrations(g,c.migrations||Td.migrations,Td.normalizeOptions(c))}function rP(g){var c,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(c=Td,h=c.loadMorphFromSnapshot,d.yield(g.readJson(),2)):d.return(h.call(c,d.yieldResult))})}function sP(g,c,h){g=void 0===g?Td.MorphicEnv.default().world:g;var d,k,n,b,e,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:d=
h||{};k=void 0===d.showIndicator?!0:d.showIndicator;n=void 0===d.changeName?!0:d.changeName;b=void 0===d.changeBrowserURL?!0:d.changeBrowserURL;c||(e=Td.resource(document.location.href),l=e.name(),c=e.join("../"+l.replace(/\.[^\.]+/,"-world.json")).withRelativePartsResolved());"string"===typeof c&&(c=Td.resource(c));n&&(g.name=c.nameWithoutExt());b&&(a=encodeURI(h.pathForBrowserHistory||Td.pathForBrowserHistory(c.path())),window.location.pathname!==a&&window.history.pushState({},"lively.next",a));
if(!k){u.jumpTo(2);break}return u.yield(System.import("lively.components/loading-indicator.js"),3);case 3:return m=u.yieldResult,q=m.LoadingIndicator,f=q.open("string"===typeof k?k:"Snapshotting..."),u.yield(f.whenRendered(),4);case 4:return u.yield(Td.promise.delay(100),2);case 2:return u.setFinallyBlock(6),u.yield(Td.createMorphSnapshot(g,h),8);case 8:return r=u.yieldResult,f.label="Uploading...",u.yield(f.whenRendered(),9);case 9:return u.return(c.writeJson(r));case 6:u.enterFinallyBlock(),f&&
f.remove(),u.leaveFinallyBlock(0)}})}function KI(g,c){if(void 0===c||!c)return Td.deserializeMorph(Td.serializeMorph(g),{migrations:Td.migrations,reinitializeIds:!0});c=g.comments;g.comments=[];var h=[];g.attributeConnections&&(h=g.attributeConnections.filter(function(k){return k.targetObj.isCommentIndicator}),g.attributeConnections=g.attributeConnections.filter(function(k){return!(k.targetObj.isCommentIndicator||k.targetObj.isHalo)}));var d=Td.serializeMorph(g);g.comments=c;g.attributeConnections&&
(g.attributeConnections=g.attributeConnections.concat(h));return Td.deserializeMorph(d,{migrations:Td.migrations,reinitializeIds:!0})}function Dz(g,c){c=void 0===c?{}:c;var h,d,k,n,b,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:System.get("@system-env");h=c;d=void 0===h.addPreview?!1:h.addPreview;k=void 0===h.previewWidth?100:h.previewWidth;n=void 0===h.previewHeight?100:h.previewHeight;b=void 0===h.previewType?
"png":h.previewType;e=void 0===h.testLoad?!0:h.testLoad;l=void 0===h.addPackages?!0:h.addPackages;a=void 0===h.ignoreMorphs?[]:h.ignoreMorphs;f=void 0===h.frozenSnapshot?!1:h.frozenSnapshot;m=Td.serializeMorph(g,{frozenSnapshot:f});if(!l){qa.jumpTo(2);break}return qa.yield(Td.findRequiredPackagesOfSnapshot(m),3);case 3:q=qa.yieldResult,r=q.packages,u=q.depMap,m.packages=r,v=Td.findLocalComponents(m.snapshot),Object.values(r["local://lively-object-modules/"]||{}).forEach(function(D){Object.entries(D).forEach(function(P){var J=
$jscomp.makeIterator(P);P=J.next().value;J=J.next().value;if(!P.endsWith(".json")){var M=Td.ast.parse(J),X=[],T=Td.Path("metadata.commit.name").get($world);Td.ast.AllNodesVisitor.run(M,function(fa,Ra){"Literal"===fa.type&&"string"===typeof fa.value&&(fa.value.match(/^styleguide:\/\/\$world\/.+/)&&!v.includes(fa.value.replace("styleguide://$world/",""))&&X.push({target:fa,replacementFunc:function(){return JSON.stringify(fa.value.replace("$world",T))}}),fa.value.match(/^part:\/\/\$world\/.+/)&&!v.includes(fa.value.replace("part://$world/",
""))&&X.push({target:fa,replacementFunc:function(){return JSON.stringify(fa.value.replace("$world",T))}}))});D[P]=Td.ast.transform.replaceNodes(X,J).source}})}),m.packageDepMap=u;case 2:if(!d){qa.jumpTo(4);break}return qa.yield(System.import("lively.morphic/rendering/morph-to-image.js"),5);case 5:return y=qa.yieldResult,z=y.renderMorphToDataURI,B=k||g.width,C=n||g.height,G=b||"png",qa.setCatchFinallyBlocks(6),F=m,qa.yield(z(g,{width:B,height:C,type:G,ignoreMorphs:[]}),8);case 8:F.preview=qa.yieldResult;
qa.leaveTryBlock(4);break;case 6:return N=qa.enterCatchBlock(),console.error("Error generating morph preview: "+N),L=m,qa.yield(z(Td.morph({fill:g.fill,width:B,height:C}),{width:B,height:C,type:G,ignoreMorphs:a}),9);case 9:L.preview=qa.yieldResult;case 4:m.preview||(m.preview="");if(!e){qa.jumpTo(10);break}qa.setCatchFinallyBlocks(11);return qa.yield(Td.loadMorphFromSnapshot(m,{highlightBuggyMorphs:!0,rootObject:g}),13);case 13:S=qa.yieldResult;if(!S||!S.isMorph)throw Error("reloading snapshot does not create a morph!");
qa.leaveTryBlock(10);break;case 11:throw ha=qa.enterCatchBlock(),Error("Error snapshotting morph: Cannot recreate morph from snapshot!\n"+ha.stack);case 10:return qa.return(m)}})}function bu(g,c){return Td.deserializeMorph(g,Object.assign({reinitializeIds:!0,ignoreClassNotFound:!1,onDeserializationStart:Td.loadPackagesAndModulesOfSnapshot,migrations:Td.migrations},c))}function F0(g,c){var h,d,k,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:if(!g.isDirectory())return e=
c,l=g.name(),a.yield(g.read(),9);h=c[g.name()]={};return a.yield(g.dirList(),4);case 4:d=a.yieldResult,k=$jscomp.makeIterator(d),n=k.next();case 5:if(n.done)return a.return(c);b=n.value;return a.yield(F0(b,h),6);case 6:n=k.next();a.jumpTo(5);break;case 9:return e[l]=a.yieldResult,a.return(c)}})}function G0(g,c){c=void 0===c?[]:c;var h=[];if(g.hasOwnProperty("package.json")){var d=c.slice(1).reduceRight(function(n,b){return n.join(b)},Td.resource(c[0])).url;h.push({files:g,url:d,requiredPackages:g.requiredPackages})}for(var k in g)"object"===
typeof g[k]&&h.push.apply(h,$jscomp.arrayFromIterable(G0(g[k],c.concat(k))));return h}function tP(g){var c=Td.findPackagesInFileSpec(g.packages),h={};g=g.packageDepMap;if(!g)return c;c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())d=d.value,h[d.url]=d;return Td.arr.flatten(Td.graph.sortByReference(g)).map(function(k){return h[k]})}function nE(g){var c,h,d,k,n,b,e,l,a,f,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){switch(B.nextAddress){case 1:if(!g.packagesToRegister){B.jumpTo(2);
break}c=$jscomp.makeIterator(g.packagesToRegister);h=c.next();case 3:if(h.done){B.jumpTo(2);break}d=h.value;B.setCatchFinallyBlocks(6);return B.yield(Td.registerPackage(d),8);case 8:B.leaveTryBlock(4);break;case 6:B.enterCatchBlock(),console.error("Failed to register package "+d);case 4:h=c.next();B.jumpTo(3);break;case 2:if(!g.packages){B.jumpTo(9);break}k=Td.packagesOfSnapshot(g);n=$jscomp.makeIterator(k);b=n.next();case 10:if(b.done){B.jumpTo(9);break}l=e=b.value;a=l.files;f=l.url;if(q=(m=Td.lookupPackage(f))&&
m.pkg){r=q.version;u=JSON.parse(a["package.json"]);v=u.version;try{if(v&&r&&Td.semver.lte(v,r,!0)){console.log("[load morph] Package "+f+" is loaded in version "+r+(" which is newer than "+v+". Will NOT load older variant."));B.jumpTo(11);break}}catch(C){console.warn("Error in package version comparison: ",C)}}return B.yield(Td.createFiles(f,a),13);case 13:return B.yield(Td.ensurePackage(f),14);case 14:return q=B.yieldResult,B.yield(q.reload({forgetEnv:!1,forgetDeps:!1}),15);case 15:return B.yield(System.import("lively.classes/object-classes.js"),
16);case 16:y=B.yieldResult,z=y.default,Td.objectScriptingEnabled=!!z,Td.objectScriptingEnabled&&z.withId(q.name);case 11:b=n.next();B.jumpTo(10);break;case 9:return B.yield(Promise.all(Td.requiredModulesOfSnapshot(g).map(function(C){return(System.get(C)?null:System.import(C)).catch(function(G){return console.error("Error loading "+C,G)})})),0)}})}function LI(g){var c,h,d,k,n,b,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra,gb,ea,aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ia){switch(ia.nextAddress){case 1:c=
{},h=g.snapshot,d=[],k={},n=!0,b={},e={},a=ia.forIn(h);case 2:if(null==(l=a.getNext())){ia.jumpTo(4);break}f=h[l]["lively.serializer-class-info"];if(!(f&&f.module&&f.module.package)){ia.jumpTo(5);break}m=Td.getPackage(f.module.package.name);if(!m.address.startsWith("local://")){ia.jumpTo(5);break}return ia.yield(System.import("lively.classes/object-classes.js"),7);case 7:return q=ia.yieldResult,e.$jscomp$loop$prop$ObjectPackage$2650=q.default,ia.yield(System.import("lively.classes/util.js"),8);case 8:r=
ia.yieldResult,u=r.withSuperclasses,Td.objectScriptingEnabled=!!e.$jscomp$loop$prop$ObjectPackage$2650,v=e.$jscomp$loop$prop$ObjectPackage$2650.forSystemPackage(m),y=v.objectModule.systemModule._recorder[f.className],z=u(y),z.forEach(function(Aa){return function(ob){(ob=Aa.$jscomp$loop$prop$ObjectPackage$2650.lookupPackageForClass(ob))&&d.push(ob.systemPackage)}}(e));case 5:if(B=h[l].props.metadata)if(C=void 0,B.value&&B.value.__ref__?(G=h[B.value.id],G.props.externalPackages&&(C=G.props.externalPackages.value)):
C=B.externalPackages,C)for(n=!0,F=0;F<C.length;F++)k[C[F]]=!0;e={$jscomp$loop$prop$ObjectPackage$2650:e.$jscomp$loop$prop$ObjectPackage$2650};ia.jumpTo(2);break;case 4:n&&(g.packagesToRegister=Object.keys(k)),N=[],L=$jscomp.makeIterator(d),S=L.next();case 9:if(S.done)return d=[].concat($jscomp.arrayFromIterable(N),$jscomp.arrayFromIterable(d)),ia.yield(Promise.all(d.map(function(Aa){var ob,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){if(1==Ab.nextAddress)return ob=Td.resource(Aa.address).asDirectory(),
Ab.yield(Td.resourceToJSON(ob,{}),2);Nb=Ab.yieldResult;c[ob.parent().url]||(c[ob.parent().url]={});Object.assign(c[ob.parent().url],Nb);b[Aa.url]||(b[Aa.url]=[]);Ab.jumpToEnd()})})),16);ha=S.value;qa=$jscomp.makeIterator(ha.modules());D=qa.next();case 12:if(D.done){S=L.next();ia.jumpTo(9);break}P=D.value;if(P.id.endsWith(".json")){ia.jumpTo(13);break}J=$jscomp;M=J.makeIterator;return ia.yield(P.imports(),15);case 15:for(X=M.call(J,ia.yieldResult),T=X.next();!T.done;T=X.next())if(Ra=fa=T.value,gb=
Ra.fromModule,ea=Td.module(gb).package())aa=ea.config,aa.lively&&aa.lively.isObjectPackage&&(N.push(ea),b[ha.url]?Td.arr.pushIfNotIncluded(b[ha.url],ea.url):b[ha.url]=[ea.url]);case 13:D=qa.next();ia.jumpTo(12);break;case 16:return ia.return({packages:c,depMap:b})}})}function wca(g,c){var h={};c.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(d,k,n){k&&(h[k]=n)});return h}function xca(g){g=String(g);if(!(100<g.length)&&(g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(g))){var c=
parseFloat(g[1]);switch((g[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return c*yca;case "days":case "day":case "d":return c*oE;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}function MI(g,c,h){if(!(g<c))return g<
1.5*c?Math.floor(g/c)+" "+h:Math.ceil(g/c)+" "+h+"s"}function zca(g){var c=0,h;for(h in g)c=(c<<5)-c+g.charCodeAt(h),c|=0;return Mh.colors[Math.abs(c)%Mh.colors.length]}function uP(g){function c(){if(c.enabled){var d=+new Date;c.diff=d-(h||d);c.prev=h;h=c.curr=d;var k=Array(arguments.length);for(d=0;d<k.length;d++)k[d]=arguments[d];k[0]=Mh.coerce(k[0]);"string"!==typeof k[0]&&k.unshift("%O");var n=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,function(b,e){if("%%"===b)return b;n++;e=Mh.formatters[e];"function"===
typeof e&&(b=e.call(c,k[n]),k.splice(n,1),n--);return b});Mh.formatArgs.call(c,k);(c.log||Mh.log||console.log.bind(console)).apply(c,k)}}var h;c.namespace=g;c.enabled=Mh.enabled(g);c.useColors=Mh.useColors();c.color=zca(g);c.destroy=Aca;"function"===typeof Mh.init&&Mh.init(c);Mh.instances.push(c);return c}function Aca(){var g=Mh.instances.indexOf(this||Bca);return-1!==g?(Mh.instances.splice(g,1),!0):!1}function H0(){try{var g=qn.storage.debug}catch(c){}!g&&"undefined"!==typeof vP&&"env"in vP&&(g=
vP.env.DEBUG);return g}function Fp(g){if(g){for(var c in Fp.prototype)g[c]=Fp.prototype[c];return g}}function wP(g,c){if(!g)return g;if(I0(g)){var h={_placeholder:!0,num:c.length};c.push(g);return h}if(xP(g)){h=Array(g.length);for(var d=0;d<g.length;d++)h[d]=wP(g[d],c);return h}if("object"===typeof g&&!(g instanceof Date)){h={};for(d in g)h[d]=wP(g[d],c);return h}return g}function yP(g,c){if(!g)return g;if(g&&g._placeholder)return c[g.num];if(xP(g))for(var h=0;h<g.length;h++)g[h]=yP(g[h],c);else if("object"===
typeof g)for(h in g)g[h]=yP(g[h],c);return g}function J0(){}function K0(g){var c=""+g.type;if(zj.BINARY_EVENT===g.type||zj.BINARY_ACK===g.type)c+=g.attachments+"-";g.nsp&&"/"!==g.nsp&&(c+=g.nsp+",");null!=g.id&&(c+=g.id);if(null!=g.data){try{var h=JSON.stringify(g.data)}catch(d){h=!1}if(!1!==h)c+=h;else return Cca}zP("encoded %j as %s",g,c);return c}function Dca(g,c){AP.removeBlobs(g,function(h){var d=AP.deconstructPacket(h);h=K0(d.packet);d=d.buffers;d.unshift(h);c(d)})}function NI(){(this||Om).reconstructor=
null}function BP(g){(this||Om).reconPack=g;(this||Om).buffers=[]}function OI(g){if(!g||"object"!==typeof g)return!1;if(Eca(g)){for(var c=0,h=g.length;c<h;c++)if(OI(g[c]))return!0;return!1}if("function"===typeof CP&&CP.isBuffer&&CP.isBuffer(g)||"function"===typeof ArrayBuffer&&g instanceof ArrayBuffer||Fca&&g instanceof Blob||Gca&&g instanceof File)return!0;if(g.toJSON&&"function"===typeof g.toJSON&&1===arguments.length)return OI(g.toJSON(),!0);for(c in g)if(Object.prototype.hasOwnProperty.call(g,
c)&&OI(g[c]))return!0;return!1}function Hca(){}function L0(g){return g.map(function(c){if(c.buffer instanceof ArrayBuffer){var h=c.buffer;if(c.byteLength!==h.byteLength){var d=new Uint8Array(c.byteLength);d.set(new Uint8Array(h,c.byteOffset,c.byteLength));h=d.buffer}return h}return c})}function M0(g,c){c=c||{};var h=new OB;L0(g).forEach(function(d){h.append(d)});return c.type?h.getBlob(c.type):h.getBlob()}function N0(g,c){return new Blob(L0(g),c||{})}function O0(g){for(var c=[],h=0,d=g.length,k,n;h<
d;)k=g.charCodeAt(h++),55296<=k&&56319>=k&&h<d?(n=g.charCodeAt(h++),56320==(n&64512)?c.push(((k&1023)<<10)+(n&1023)+65536):(c.push(k),h--)):c.push(k);return c}function P0(g,c){if(55296<=g&&57343>=g){if(c)throw Error("Lone surrogate U+"+g.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function PB(){if(Dx>=PI)throw Error("Invalid byte index");var g=QI[Dx]&255;Dx++;if(128==(g&192))return g&63;throw Error("Invalid continuation byte");}function Ica(g){if(Dx>PI)throw Error("Invalid byte index");
if(Dx==PI)return!1;var c=QI[Dx]&255;Dx++;if(0==(c&128))return c;if(192==(c&224)){var h=PB();c=(c&31)<<6|h;if(128<=c)return c;throw Error("Invalid continuation byte");}if(224==(c&240)){h=PB();var d=PB();c=(c&15)<<12|h<<6|d;if(2048<=c)return P0(c,g)?c:65533;throw Error("Invalid continuation byte");}if(240==(c&248)&&(h=PB(),d=PB(),g=PB(),c=(c&7)<<18|h<<12|d<<6|g,65536<=c&&1114111>=c))return c;throw Error("Invalid UTF-8 detected");}function Jca(g,c,h){if(!c)return Di.encodeBase64Packet(g,h);var d=new FileReader;
d.onload=function(){Di.encodePacket({type:g.type,data:d.result},c,!0,h)};return d.readAsArrayBuffer(g.data)}function DP(g,c,h){var d=Array(g.length);h=Kca(g.length,h);for(var k=function(b,e,l){c(e,function(a,f){d[b]=f;l(a,d)})},n=0;n<g.length;n++)k(n,g[n],h)}function EP(g){var c="";do c=Q0[g%64]+c,g=Math.floor(g/64);while(0<g);return c}function FP(){var g=EP(+new Date);return g!==R0?(S0=0,R0=g):g+"."+EP(S0++)}function cu(g){(this||Zh).path=g.path;(this||Zh).hostname=g.hostname;(this||Zh).port=g.port;
(this||Zh).secure=g.secure;(this||Zh).query=g.query;(this||Zh).timestampParam=g.timestampParam;(this||Zh).timestampRequests=g.timestampRequests;(this||Zh).readyState="";(this||Zh).agent=g.agent||!1;(this||Zh).socket=g.socket;(this||Zh).enablesXDR=g.enablesXDR;(this||Zh).withCredentials=g.withCredentials;(this||Zh).pfx=g.pfx;(this||Zh).key=g.key;(this||Zh).passphrase=g.passphrase;(this||Zh).cert=g.cert;(this||Zh).ca=g.ca;(this||Zh).ciphers=g.ciphers;(this||Zh).rejectUnauthorized=g.rejectUnauthorized;
(this||Zh).forceNode=g.forceNode;(this||Zh).isReactNative=g.isReactNative;(this||Zh).extraHeaders=g.extraHeaders;(this||Zh).localAddress=g.localAddress}function du(g){var c=g&&g.forceBase64;if(!Lca||c)(this||wi).supportsBinary=!1;T0.call(this||wi,g)}function U0(){}function QB(g){V0.call(this||qe,g);(this||qe).requestTimeout=g.requestTimeout;(this||qe).extraHeaders=g.extraHeaders;if("undefined"!==typeof location){var c="https:"===location.protocol,h=location.port;h||(h=c?443:80);(this||qe).xd="undefined"!==
typeof location&&g.hostname!==location.hostname||h!==g.port;(this||qe).xs=g.secure!==c}}function El(g){(this||qe).method=g.method||"GET";(this||qe).uri=g.uri;(this||qe).xd=!!g.xd;(this||qe).xs=!!g.xs;(this||qe).async=!1!==g.async;(this||qe).data=void 0!==g.data?g.data:null;(this||qe).agent=g.agent;(this||qe).isBinary=g.isBinary;(this||qe).supportsBinary=g.supportsBinary;(this||qe).enablesXDR=g.enablesXDR;(this||qe).withCredentials=g.withCredentials;(this||qe).requestTimeout=g.requestTimeout;(this||
qe).pfx=g.pfx;(this||qe).key=g.key;(this||qe).passphrase=g.passphrase;(this||qe).cert=g.cert;(this||qe).ca=g.ca;(this||qe).ciphers=g.ciphers;(this||qe).rejectUnauthorized=g.rejectUnauthorized;(this||qe).extraHeaders=g.extraHeaders;this.create()}function W0(){for(var g in El.requests)El.requests.hasOwnProperty(g)&&El.requests[g].abort()}function Mca(){}function RB(g){GP.call(this||hi,g);(this||hi).query=(this||hi).query||{};RI||(RI=X0.___eio=X0.___eio||[]);(this||hi).index=RI.length;var c=this||hi;
RI.push(function(h){c.onData(h)});(this||hi).query.j=(this||hi).index;"function"===typeof addEventListener&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=Mca)},!1)}function Zq(g){g&&g.forceBase64&&((this||Vf).supportsBinary=!1);(this||Vf).perMessageDeflate=g.perMessageDeflate;(this||Vf).usingBrowserWebSocket=SI&&!g.forceNode;(this||Vf).protocols=g.protocols;(this||Vf).usingBrowserWebSocket||(SB=Y0);HP.call(this||Vf,g)}function ii(g,c){if(!((this||bd)instanceof ii))return new ii(g,
c);c=c||{};g&&"object"===typeof g&&(c=g,g=null);g?(g=Z0(g),c.hostname=g.host,c.secure="https"===g.protocol||"wss"===g.protocol,c.port=g.port,g.query&&(c.query=g.query)):c.host&&(c.hostname=Z0(c.host).host);(this||bd).secure=null!=c.secure?c.secure:"undefined"!==typeof location&&"https:"===location.protocol;c.hostname&&!c.port&&(c.port=(this||bd).secure?"443":"80");(this||bd).agent=c.agent||!1;(this||bd).hostname=c.hostname||("undefined"!==typeof location?location.hostname:"localhost");(this||bd).port=
c.port||("undefined"!==typeof location&&location.port?location.port:(this||bd).secure?443:80);(this||bd).query=c.query||{};"string"===typeof(this||bd).query&&((this||bd).query=Nca.decode((this||bd).query));(this||bd).upgrade=!1!==c.upgrade;(this||bd).path=(c.path||"/engine.io").replace(/\/$/,"")+"/";(this||bd).forceJSONP=!!c.forceJSONP;(this||bd).jsonp=!1!==c.jsonp;(this||bd).forceBase64=!!c.forceBase64;(this||bd).enablesXDR=!!c.enablesXDR;(this||bd).withCredentials=!1!==c.withCredentials;(this||
bd).timestampParam=c.timestampParam||"t";(this||bd).timestampRequests=c.timestampRequests;(this||bd).transports=c.transports||["polling","websocket"];(this||bd).transportOptions=c.transportOptions||{};(this||bd).readyState="";(this||bd).writeBuffer=[];(this||bd).prevBufferLen=0;(this||bd).policyPort=c.policyPort||843;(this||bd).rememberUpgrade=c.rememberUpgrade||!1;(this||bd).binaryType=null;(this||bd).onlyBinaryUpgrades=c.onlyBinaryUpgrades;(this||bd).perMessageDeflate=!1!==c.perMessageDeflate?c.perMessageDeflate||
{}:!1;!0===(this||bd).perMessageDeflate&&((this||bd).perMessageDeflate={});(this||bd).perMessageDeflate&&null==(this||bd).perMessageDeflate.threshold&&((this||bd).perMessageDeflate.threshold=1024);(this||bd).pfx=c.pfx||null;(this||bd).key=c.key||null;(this||bd).passphrase=c.passphrase||null;(this||bd).cert=c.cert||null;(this||bd).ca=c.ca||null;(this||bd).ciphers=c.ciphers||null;(this||bd).rejectUnauthorized=void 0===c.rejectUnauthorized?!0:c.rejectUnauthorized;(this||bd).forceNode=!!c.forceNode;(this||
bd).isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();if("undefined"===typeof self||(this||bd).isReactNative)c.extraHeaders&&0<Object.keys(c.extraHeaders).length&&((this||bd).extraHeaders=c.extraHeaders),c.localAddress&&((this||bd).localAddress=c.localAddress);(this||bd).id=null;(this||bd).upgrades=null;(this||bd).pingInterval=null;(this||bd).pingTimeout=null;(this||bd).pingIntervalTimer=null;(this||bd).pingTimeoutTimer=
null;this.open()}function sk(g,c,h){(this||Ae).io=g;(this||Ae).nsp=c;(this||Ae).json=this||Ae;(this||Ae).ids=0;(this||Ae).acks={};(this||Ae).receiveBuffer=[];(this||Ae).sendBuffer=[];(this||Ae).connected=!1;(this||Ae).disconnected=!0;(this||Ae).flags={};h&&h.query&&((this||Ae).query=h.query);(this||Ae).io.autoConnect&&this.open()}function TB(g){g=g||{};(this||Sn).ms=g.min||100;(this||Sn).max=g.max||1E4;(this||Sn).factor=g.factor||2;(this||Sn).jitter=0<g.jitter&&1>=g.jitter?g.jitter:0;(this||Sn).attempts=
0}function Ei(g,c){if(!((this||wd)instanceof Ei))return new Ei(g,c);g&&"object"===typeof g&&(c=g,g=void 0);c=c||{};c.path=c.path||"/socket.io";(this||wd).nsps={};(this||wd).subs=[];(this||wd).opts=c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);(this||wd).backoff=new Oca({min:this.reconnectionDelay(),
max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);(this||wd).readyState="closed";(this||wd).uri=g;(this||wd).connecting=[];(this||wd).lastPing=null;(this||wd).encoding=!1;(this||wd).packetBuffer=[];g=c.parser||Pca;(this||wd).encoder=new g.Encoder;(this||wd).decoder=new g.Decoder;(this||wd).autoConnect=!1!==c.autoConnect;(this||wd).autoConnect&&this.open()}function $0(g,c){"object"===typeof g&&(c=g,g=void 0);c=c||{};g=Qca(g);var h=g.source,
d=g.id,k=g.path;k=pE[d]&&k in pE[d].nsps;c.forceNew||c["force new connection"]||!1===c.multiplex||k?(a1("ignoring socket cache for %s",h),h=b1(h,c)):(pE[d]||(a1("new io instance for %s",h),pE[d]=b1(h,c)),h=pE[d]);g.query&&!c.query&&(c.query=g.query);return h.socket(g.path,c)}function Ez(g,c){c=void 0===c?{}:c;var h=c.l2lClient;if(!h)throw Error("lively.shell client side runCommand needs opts.l2lClient!");Qf.ClientCommand.installLively2LivelyServices(h);h=new Qf.ClientCommand(h);h.spawn(Object.assign({command:g},
Qf.obj.dissoc(c,["l2lClient"])));return h}function qE(g){return Qf.dirCache[g.trackerId]?Qf.dirCache[g.trackerId]:Promise.resolve().then(function(){var c,h,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(g.sendToAndWait(g.trackerId,"lively.shell.info",{}),2);c=k.yieldResult;h=c.data;d=h.defaultDirectory;return k.return(Qf.dirCache[g.trackerId]=d)})})}function rE(g){var c,h,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(g.sendToAndWait(g.trackerId,
"lively.shell.env",{}),2);c=k.yieldResult;h=c.data;d=h.env;return k.return(d)})}function TI(g,c){c=(c=void 0===c?{}:c)||{};var h=Qf.runCommand('cat "'+g+'"',c);return h.whenDone().then(function(){if(h.exitCode)throw Error("Read "+g+" failed: "+h.stderr);return h.output})}function UI(g,c,h){!h&&c&&c.content&&(h=c,c=h.content);var d=Qf.runCommand('tee "'+g+'"',Object.assign({stdin:c||""},h));return d.whenDone().then(function(){if(d.exitCode)throw Error("Write "+g+" failed: "+d.stderr);return d})}function VI(g,
c){c=void 0===c?{}:c;return Sh._runCommand(g,Object.assign({l2lClient:Sh.L2LClient.ensure(Sh.defaultConnection)},c))}function WI(){return Sh._defaultDirectory(Sh.L2LClient.ensure(Sh.defaultConnection))}function IP(){return Sh._env(Sh.L2LClient.ensure(Sh.defaultConnection))}function JP(g){function c(){0<d.length&&h.push(d);d=""}for(var h=[],d="",k="normal",n=0,b;b=g[n];n++)if("normal"===k&&/\s/.test(b))c();else{if('"'===b||"'"===b){if("normal"===k){k=b;continue}if(k===b){k="normal";continue}}"\\"===
b&&k===g[n+1]&&(n++,b=g[n]);d+=b}c();return h}function KP(g,c,h){var d=h=void 0===h?{}:h,k=d.exclusions,n=void 0===d.fileTypes?[]:d.fileTypes,b=void 0===d.sizeLimit?"+1M":d.sizeLimit;h=void 0===d.charsBefore?80:d.charsBefore;d=void 0===d.charsAfter?80:d.charsAfter;k||(k=Sh.defaultGrepExclusions);k=(k=[k.length?"-iname "+k.map(JSON.stringify).join(" -o -iname "):"",b?"-size "+b:""].filter(Boolean).join(" -o "))?"\\( "+k+" \\) -prune -o":"";n=(n=n.length?"-iname "+n.map(JSON.stringify).join(" -o -iname "):
"")?"-a \\( "+n+" \\)":"";b='find %s %s -type f %s -a -print0 | xargs -0 grep -IinH -o ".\\{0,%s\\}%s.\\{0,%s\\}" '.replace(/([\(\);])/g,"\\$1");g=Sh.string.format(b,c,k,n,h,g,d);var e=Sh.runCommand(g);e.whenDone().then(function(l){var a=l.exitCode;a&&1!==a||(e.results=l.stdout.split("\n").map(function(f){f=f.match(/(.*):([0-9]+):(.*)/);if(!f)return null;var m=$jscomp.makeIterator(f);m.next();f=m.next().value;var q=m.next().value;m=m.next().value;return{filename:f,lineno:Number(q)-1,match:m}}).filter(Boolean))});
return e}function XI(g,c){var h,d,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return h=Eh.fileInfoCommandString(g,c),d=Eh.runCommand(h,c),e.yield(d.whenDone(),2);if(k=0!=d.exitCode?d.output:null)throw k;n=$jscomp.makeIterator(Eh.parseDirectoryListFromLs(d.stdout,c.rootDirectory||"."));b=n.next().value;return e.return(b)})}function LP(g,c){return Eh.string.lines(g).map(function(h){return h.trim().length?(new Eh.FileInfo(c)).readFromDirectoryListLine(h):
null}).filter(Boolean)}function YI(g,c){var h,d,k,n,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){h=Object.assign({findFilesGroup:"default-find-files-process"},c);d=h.findFilesGroup;k=h.rootDirectory;b=n=Eh.findFilesProcesses[d]||(Eh.findFilesProcesses[d]={promiseState:null,commands:[]});e=b.commands;l=b.promiseState;l||(n.promiseState=l=Eh.promise.deferred());a=Eh.findFilesCommandString(g,c);e.forEach(function(q){return q.kill()});f=Eh.runCommand(a,c);e.push(f);f.whenDone().then(function(){Eh.arr.remove(e,
f);if(e.some(function(r){return r.startTime>f.startTime}))console.log("[findFiles] command "+f+" exited but a newer findFiles command was started for group "+d+", discarding output");else{var q=0!=f.exitCode?f.output:null;q&&console.warn(q);q=q?[]:Eh.parseDirectoryListFromLs(f.stdout,k)||[];l.resolve(q);Object.assign(n,{promiseState:null,commands:[]})}}).catch(function(q){return console.error(q)});return m.return(l.promise)})}function MP(g){function c(h){return Array.prototype.concat.apply([h],h.children?
h.children.map(c):[])}return c(g).map(function(h){var d=h.fullPath.replace(/^\//,"");return{fileName:d,path:d,rootDirectory:"./",isDirectory:h.isDirectory,isLink:void 0,lastModified:void 0,linkCount:void 0,mode:void 0,size:void 0,group:void 0,user:void 0}})}function NP(g){return[]}function ZI(g,c){c=void 0===c?{}:c;var h,d,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return h=c.morphicDB||de.MorphicDB.default,b.yield(h.load("part","string"===typeof g?
g:g.name,c,"string"===typeof g?void 0:g),2);case 2:d=b.yieldResult;if(!d.isWindow||!d.targetMorph){b.jumpTo(3);break}k=d.targetMorph;return b.yield(de.ensureCommitInfo(d.metadata&&d.metadata.commit),4);case 4:(n=b.yieldResult)&&k.changeMetaData("commit",n,!0,!1);case 3:return b.return(d)}})}function OP(g,c,h,d,k,n){var b,e,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:v.setCatchFinallyBlocks(2);if(g.isMorph){v.jumpTo(4);break}if("function"!==
typeof g.beforePublish){v.jumpTo(5);break}return v.yield(g.beforePublish(c,g),5);case 4:b=[],g.withAllSubmorphsDo(function(y){"function"===typeof y.beforePublish&&b.push(y)}),e=$jscomp.makeIterator(b),l=e.next();case 8:if(l.done){v.jumpTo(5);break}a=l.value;return v.yield(a.beforePublish(),9);case 9:l=e.next();v.jumpTo(8);break;case 5:v.leaveTryBlock(3);break;case 2:f=v.enterCatchBlock(),m="Error in beforePublish of "+g+"\n"+f.stack,"function"===typeof g.world&&g.world()?g.world().logError(Error(m)):
console.error(m);case 3:return q=Object.assign({previewWidth:100,previewHeight:100,previewType:"png"},h),r=h.morphicDB||de.MorphicDB.default,v.yield(r.snapshotAndCommit("part",c,g,q,d,k,n),12);case 12:return u=v.yieldResult,de.emit("lively.partsbin/partpublished",u),v.return(u)}})}function sE(g,c){c=void 0===c?{}:c;var h,d,k,n,b,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra,gb,ea,aa,ia,Aa,ob,Nb,Ab,Kb,jc,ub,Gc,Yc,Z,sa,ua,db,Cb,Pc,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kc){switch(kc.nextAddress){case 1:return h=
c,d=void 0===h.showPublishDialog?!0:h.showPublishDialog,k=void 0===h.notifications?!0:h.notifications,n=void 0===h.loadingIndicator?!0:h.loadingIndicator,b=void 0===h.preferWindow?!0:h.preferWindow,a=g,f=g.world()||g.env.world,m=g.name,q=[],r="",kc.yield(de.ensureCommitInfo(de.Path("metadata.commit").get(g)||de.Path("metadata.commit").get(a)),2);case 2:u=kc.yieldResult;v=c.morphicDB||de.MorphicDB.default;u||(u={type:"part",name:g.name,author:f.getCurrentUser(),tags:[],description:"no description"});
if(!d){u&&(y=u,m=y.name,q=y.tags,r=y.description);kc.jumpTo(3);break}z=f;B=z.openPrompt;return kc.yield(de.loadPart("publish part dialog"),5);case 5:return kc.yield(B.call(z,kc.yieldResult,{part:g}),4);case 4:C=kc.yieldResult;G=C.db;F=C.commit;if(!F)return kc.return(null);G&&(c.morphicDB=v=G);N=F;m=N.name;q=N.tags;r=N.description;case 3:if(!n){kc.jumpTo(6);break}L=$world.execCommand("open loading indicator","saving "+m+"...");return kc.yield(de.promise.delay(80),6);case 6:kc.setCatchFinallyBlocks(8,
9);S="HEAD";ha=u?u.name:g.name;if(ha===m){qa=u?u._id:void 0;kc.jumpTo(11);break}return kc.yield(v.exists("part",m),12);case 12:D=kc.yieldResult;P=D.exists;J=D.commitId;if(!P){kc.jumpTo(13);break}return kc.yield(f.confirm('A part "'+m+'" already exists, overwrite?'),14);case 14:M=kc.yieldResult;if(!M)return kc.return(null);qa=J;case 13:a.name=m;case 11:return b&&!g.isWindow&&(X=g.getWindow())&&X.targetMorph===g&&(g=X,l=X.metadata,e=!0),T={author:g.world().getCurrentUser(),message:"published",tags:q,
description:r},kc.yield(de.savePart(g,m,c,T,S,qa),15);case 15:fa=kc.yieldResult;if(!e){kc.jumpTo(16);break}if(a.metadata)return gb=a.metadata,kc.yield(de.ensureCommitInfo(X.metadata.commit),20);Ra=a;return kc.yield(de.ensureCommitInfo(X.metadata.commit),19);case 19:Ra.metadata={commit:kc.yieldResult};kc.jumpTo(18);break;case 20:gb.commit=kc.yieldResult;case 18:X.metadata=l;case 16:return k&&g.setStatusMessage("saved part "+m),kc.return(fa);case 9:kc.enterFinallyBlock();L&&L.remove();kc.leaveFinallyBlock(0);
break;case 8:ea=kc.enterCatchBlock();aa=$jscomp.makeIterator(ea.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);aa.next();aa.next();ia=aa.next().value;Aa=aa.next().value;if(!ia||!Aa){kc.jumpTo(21);break}ob=$jscomp;Nb=ob.makeIterator;return kc.yield(v.log(Aa,1,!0),22);case 22:return Ab=Nb.call(ob,kc.yieldResult),jc=Kb=Ab.next().value,ub=jc.author,Gc=ub.name,Yc=jc.timestamp,Z='The current version of part "'+m+'" is not the most recent!\nA newer version by '+
(Gc+" was saved on ")+(de.date.format(new Date(Yc),"yyyy-mm-dd HH:MM")+". Overwrite?"),kc.yield(f.confirm(["Version Mismatch\n",{},Z,{fontWeight:"normal",fontSize:16}]),23);case 23:sa=kc.yieldResult;if(!sa)return kc.return(null);ua=de.obj.dissoc(Kb,["preview"]);a.changeMetaData("commit",ua,!0,!1);return kc.return(sE(a,Object.assign({},c,{morphicDB:v,showPublishDialog:!1})));case 21:db=$jscomp.makeIterator(ea.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but no version entry exists/)||
[]);db.next();db.next();Cb=db.next().value;if(!Cb){kc.jumpTo(24);break}Pc="Part "+m+" no longer exist in the object database.\nDo you still want to publish it?";return kc.yield(f.confirm(Pc),25);case 25:Oc=kc.yieldResult;if(!Oc)return kc.return(null);a.changeMetaData("commit",null,!0,!1);return kc.return(sE(a,Object.assign({},c,{morphicDB:v,showPublishDialog:!1})));case 24:throw console.error(ea),k&&f.logError("Error saving part: "+ea),ea;}})}function PP(g){g=void 0===g?{}:g;var c,h,d,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return c=g.morphicDB||de.MorphicDB.default,e.yield(c.latestCommits("part"),2);if(3!=e.nextAddress)return h=e.yieldResult,d=h.map(function(l){return{isListItem:!0,string:l.name,value:l}}),e.yield($world.filterableListPrompt("Select part to load",d,{fuzzy:!0}),3);k=e.yieldResult;n=$jscomp.makeIterator(k.selected);b=n.next().value;return e.return(b?de.loadPart(b):null)})}function QP(g){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield($world.prompt("Enter part name to publish object under",
{input:g.name||"part-name",historyId:"lively.partsbin-partname-publish-to-folder-input-hist"}),2);c=h.yieldResult;if(!c)throw"canceled";return h.return(de.saveObjectToPartsbinFolder(g,c,{previewWidth:g.width,previewHeight:g.height}))})}function RP(g,c,h){h=void 0===h?{}:h;var d,k,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:h=Object.assign({preferWindow:!0},h);h.preferWindow&&(g=(d=g.getWindow())&&d.targetMorph===g?d:g);q.setCatchFinallyBlocks(2);
if(g.isMorph){q.jumpTo(4);break}if("function"!==typeof g.beforePublish){q.jumpTo(5);break}return q.yield(g.beforePublish(c,g),5);case 4:k=[],g.withAllSubmorphsDo(function(r){"function"===typeof r.beforePublish&&k.push(r)}),n=$jscomp.makeIterator(k),b=n.next();case 8:if(b.done){q.jumpTo(5);break}e=b.value;return q.yield(e.beforePublish(),9);case 9:b=n.next();q.jumpTo(8);break;case 5:q.leaveTryBlock(3);break;case 2:l=q.enterCatchBlock(),a="Error in beforePublish of "+g+"\n"+l.stack,"function"===typeof g.world&&
g.world()?g.world().logError(Error(a)):console.error(a);case 3:return q.yield(de.resource(h.partsbinFolder).ensureExistance(),12);case 12:return f=de.resource(h.partsbinFolder).join(c+".json"),q.yield(de.createMorphSnapshot(g,h),13);case 13:return m=q.yieldResult,q.yield(f.write(JSON.stringify(m,null,2)),14);case 14:return q.return({partName:c,url:f.url})}})}function $I(g,c){c=void 0===c?{}:c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h.return(de.loadPart(g,c))})}function SP(g){return new de.CommitEditor(g)}
function aJ(g,c,h){var d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){d=g.isResource?g:jf.resource(System.decanonicalize(g));k=d.nameWithoutExt();return n.return(jf.loadWorldFromDB(k,void 0,c,h))})}function bJ(g,c,h){var d,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return d=jf.MorphicDB.default,b.yield(d.load("world",void 0,h,g),2);k=b.yieldResult;n="undefined"!==typeof document?document.location.search:"";h=Object.assign({pathForBrowserHistory:jf.pathForBrowserHistory(k.name,
n)},h);return b.return(jf.loadWorld(k,c,h))})}function cJ(g,c,h,d){var k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return k=jf.MorphicDB.default,e.yield(k.load("world",g,d,void 0,c||void 0),2);n=e.yieldResult;b="undefined"!==typeof document?document.location.search:"";d=Object.assign({pathForBrowserHistory:jf.pathForBrowserHistory(g,b)},d);return e.return(jf.loadWorld(n,h,d))})}function dJ(g,c,h){h=void 0===h?{}:h;var d,k,n,b,e,l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:d=
h;k=d.env;n=d.root;b=void 0===d.verbose?!0:d.verbose;e=void 0===d.localconfig?!0:d.localconfig;l=void 0===d.l2l?!0:d.l2l;a=void 0===d.shell?!0:d.shell;f=void 0===d.worldLoadDialog?!1:d.worldLoadDialog;m=void 0===d.showUserFlap?"undefined"===typeof g.showsUserFlap?!0:g.showsUserFlap:d.showUserFlap;k=k||(c?c.env:jf.MorphicEnv.default());q=k.domEnv.document||document;r=q.getElementById("dom-loading-indicator");z.setCatchFinallyBlocks(2,3);if(!(u=l)){z.jumpTo(5);break}return z.yield(jf.setupLively2Lively(g),
6);case 6:u=z.yieldResult;case 5:v=u;if(!v||!a){z.jumpTo(7);break}return z.yield(jf.setupLivelyShell({l2lClient:v}),7);case 7:b&&r&&(r.style.display="");if(!e){z.jumpTo(9);break}return z.yield(jf.loadLocalConfig(),10);case 10:case 9:return z.yield(k.setWorld(g,n),11);case 11:f&&g.execCommand("load world");h.pathForBrowserHistory&&window.history.pushState({},"lively.next",h.pathForBrowserHistory);g.showsUserFlap=m;if(c)c.onUnload();jf.emit("world/loaded",g);return z.return(g);case 3:z.enterFinallyBlock();
r&&(r.style.display="none");z.leaveFinallyBlock(0);break;case 2:y=z.enterCatchBlock();console.error("Error loading world: ",y);if(!c){z.jumpTo(12);break}return z.yield(k.setWorld(c),13);case 13:c.showError(y);case 12:throw y;}})}function UB(g,c){var h,d,k,n,b,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra,gb,ea,aa,ia,Aa,ob,Nb,Ab,Kb,jc,ub,Gc,Yc,Z,sa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ua){switch(ua.nextAddress){case 1:return c=Object.assign({showSaveDialog:!0,useExpectedCommit:!0,
errorOnMissingExpectedCommit:!1,confirmOverwrite:!0},c),h=g.name,d=[],k="",ua.yield(jf.ensureCommitInfo(jf.Path("metadata.commit").get(g)),2);case 2:n=ua.yieldResult;b=c.morphicdb||jf.MorphicDB.default;e="";l="db";if(!c.showSaveDialog){n&&(a=n,h=a.name,d=a.tags,k=a.description);ua.jumpTo(3);break}return ua.yield(jf.resource("part://SystemDialogs/save world dialog").read(),4);case 4:return f=ua.yieldResult,ua.yield(g.openPrompt(f,{targetWorld:g}),5);case 5:if(m=ua.yieldResult,q=m.commit,r=m.db,u=m.mode,
v=m.filePath,r&&(b=r),l=u,e=v,y=q||{},h=y.name,d=y.tags,k=y.description,!h)return ua.return(null);case 3:return z=$world.execCommand("open loading indicator","saving "+h+"..."),ua.yield(jf.promise.delay(80),6);case 6:if("json"!=l){ua.jumpTo(7);break}B=jf.resource(System.baseURL).join(e).withRelativePartsResolved();return ua.yield(B.exists(),8);case 8:return ua.yieldResult?(z.visible=!1,ua.yield($world.confirm(["File Conflict\n",{},"The file you want to save the world to\n",{fontSize:15,fontWeight:"normal"},
B.url,{textStyle:"italic",fontSize:15,fontWeight:"normal"},"\n already exists. Overwrite?",{fontSize:15,fontWeight:"normal"}],{lineWrapping:!1}),12)):ua.yield(B.ensureExistance(),10);case 12:C=ua.yieldResult;if(!C)return z.remove(),ua.return();z.visible=!0;case 10:return g.changeMetaData("file",e,!1,!1),ua.yield(jf.createMorphSnapshot(g),13);case 13:return G=ua.yieldResult,ua.yield(B.writeJson(G),14);case 14:return F=JSON.stringify(G),N=e.replace(".json",".br.json"),L=jf,S=L.resource,ua.yield(jf.defaultDirectory(jf.ShellClientResource.defaultL2lClient),
16);case 16:return ua.yield(S.call(L,ua.yieldResult+"/..").join(N).withRelativePartsResolved().brotli(F),15);case 15:return jf.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),z.remove(),g.setStatusMessage("saved world "+h+" to file: "+B.url),ua.return();case 7:ua.setCatchFinallyBlocks(17,18);ha={previewWidth:200,previewHeight:200,previewType:"png",ignoreMorphs:[z]};qa="HEAD";D=n?n.name:g.name;if(!c.useExpectedCommit){ua.jumpTo(20);break}if(D===h||!c.confirmOverwrite){P=
n?n._id:void 0;ua.jumpTo(20);break}return ua.yield(b.exists("world",h),22);case 22:J=ua.yieldResult;M=J.exists;X=J.commitId;if(!M){ua.jumpTo(23);break}z.center=g.windowBounds().center();z.visible=!1;return ua.yield(g.confirm(["The world\n",{fontWeight:"normal"},'"'+h+'"',{},"\nalready exists, overwrite?",{fontWeight:"normal"}],{hasFixedPosition:!0,width:350}),24);case 24:T=ua.yieldResult;z.visible=!0;if(!T)return ua.return(null);P=X;case 23:g.name=h;case 20:return fa={author:g.getCurrentUser(),message:"world save",
tags:d,description:k},ua.yield(b.snapshotAndCommit("world",h,g,ha,fa,qa,P),25);case 25:return Ra=ua.yieldResult,window.history&&(gb=jf.pathForBrowserHistory(h),window.history.pushState({},"lively.next",gb)),jf.resource(System.baseURL).join("/subserver/ComponentsBrowser/refresh").join(h).read(),g.setStatusMessage("saved world "+h),g.get("world-list")&&g.get("world-list").onWorldSaved(h),ua.return(Ra);case 18:ua.enterFinallyBlock();z.remove();ua.leaveFinallyBlock(0);break;case 17:ea=ua.enterCatchBlock();
if(ea.message.includes("but no version entry exists")&&!c.errorOnMissingExpectedCommit)return ua.return(UB(g,Object.assign({},c,{morphicdb:b,useExpectedCommit:!1,showSaveDialog:!1})));aa=$jscomp.makeIterator(ea.message.match(/Trying to store "([^"]+)" on top of expected version ([^\s]+) but ref HEAD is of version ([^\s!]+)/)||[]);aa.next();aa.next();ia=aa.next().value;Aa=aa.next().value;if(!ia||!Aa){ua.jumpTo(26);break}ob=$jscomp;Nb=ob.makeIterator;return ua.yield(b.log(Aa,1,!0),27);case 27:Ab=Nb.call(ob,
ua.yieldResult);Kb=Ab.next().value;jc=!0;if(!c.confirmOverwrite){ua.jumpTo(28);break}ub=Kb;Gc=ub.author;Yc=Gc.name;Z=ub.timestamp;sa="The current version of world "+h+" is not the most recent!\nA newer version by "+(Yc+" was saved on ")+(jf.date.format(new Date(Z),"yyyy-mm-dd HH:MM")+". Overwrite?");return ua.yield(g.confirm(["Version Conflict\n",null,sa,{fontSize:16,fontWeight:"normal"}],{width:600}),29);case 29:jc=ua.yieldResult;case 28:if(!jc)return ua.return(null);g.changeMetaData("commit",jf.obj.dissoc(Kb,
["preview"]),!0,!1);return ua.return(UB(g,Object.assign({},c,{morphicdb:b,showSaveDialog:!1})));case 26:console.error(ea),g.logError("Error saving world: "+ea),ua.jumpTo(18)}})}function TP(g,c){var h=g.row;g=g.column;var d=c.row;c=c.column;return h<d?-2:h===d?g<c?-1:g===c?0:1:2}function eu(g,c){return 0>fk.comparePosition(g,c)}function VB(g,c){return 0>=fk.comparePosition(g,c)}function fu(g,c){return 0===fk.comparePosition(g,c)}function WB(g,c){return fk.lessPosition(g,c)?g:c}function XB(g,c){return fk.lessPosition(g,
c)?c:g}function UP(g,c){if(!g||!c)return g==c;var h=!0,d={},k;for(k in g)if(d[k]=!0,!c.hasOwnProperty(k)||g[k]!==c[k]){h=!1;break}if(h)for(var n in c)if(!(d[n]||g.hasOwnProperty(n)&&g[n]===c[n])){h=!1;break}return h}function eJ(g,c,h,d,k){k=void 0===k?"":k;var n="string"!==typeof g,b="string"!==typeof h;if(n||b){var e=[];n?e.push(g,c):e.push(g+k,c);b?e.push(h,d):e.push(h+k,d);return e}return!c&&!d||c==d?[g+k+h,c]:c&&d?Gg.shallowEquals(c,d)?[g+k+h,c]:[g+k,c,h,d]:[g+k,c,h,d]}function fJ(g,c){c=void 0===
c?"":c;if(2>=g.length)return g;var h=[],d=$jscomp.makeIterator(g),k=d.next().value,n=d.next().value;for(d=2;d<g.length;d+=2)n=Gg.concatAttributePair(k,n,g[d],g[d+1],c),2>=n.length?(k=n[0],n=n[1]):(h.push.apply(h,$jscomp.arrayFromIterable(n.slice(0,-2))),n=$jscomp.makeIterator(n.slice(-2)),k=n.next().value,n=n.next().value);h.push(k,n);return h}function gJ(g,c){for(var h=0,d=0;d<g.length;d+=2){var k=g[d],n=h+("string"===typeof k?k.length:1);if(n<c)h=n;else{if(h===c)return[g.slice(0,d),g.slice(d)];
if(n===c)return[g.slice(0,d+2),g.slice(d+2)];if("string"!==typeof k)throw Error("Assuming text is a string for splitting it, got "+k+" instead!");var b=g[d+1],e=c-h;n=[].concat($jscomp.arrayFromIterable(g.slice(0,d)),[k.slice(0,e),b]);g=k.length===e?g.slice(d+2):[k.slice(c-h),b].concat($jscomp.arrayFromIterable(g.slice(d+2)));return[n,g]}}return[g,[]]}function hJ(g,c){var h=g;g=0;for(var d=[],k=0;k<c.length;k++){var n=$jscomp.makeIterator(Gg.splitTextAndAttributesAt(h,c[k]-g));h=n.next().value;n=
n.next().value;d.push(h);for(var b=0;b<h.length;b+=2)g+="string"===typeof h[b]?h[b].length:1;h=n}d.push(h);return d}function iJ(g,c,h){h=void 0===h?!1:h;if(!g.length||2===g.length&&""==g[0])return h?c:c.slice();if(!c.length||2===c.length&&""==c[0])return h?g:g.slice();g=h?g:g.slice();for(h=0;h<c.length;h+=2)g.push(c[h],c[h+1]);return g}function jJ(g,c,h){var d=c.start;c=c.end;if(Gg.eqPosition(d,c))return null;Gg.lessPosition(c,d)&&(c=$jscomp.makeIterator([c,d]),d=c.next().value,c=c.next().value);
var k=d;d=k.row;var n=k.column;k=c;c=k.row;k=k.column;var b=g.getLine(d),e=b.textAndAttributes,l=0;n=$jscomp.makeIterator(Gg.splitTextAndAttributesAt(e,n));g=n.next().value;n=n.next().value;e.length=0;Gg.textAndAttributesDo(g,function(m,q){l+="string"===typeof m?m.length:1;e.push(m,q)});if(d===c){var a=$jscomp.makeIterator(Gg.splitTextAndAttributesAt(n,k-l));n=a.next().value;a=a.next().value}Gg.textAndAttributesDo(n,function(m,q){return e.push(m,h(b,q))});d===c&&Gg.textAndAttributesDo(a,function(m,
q){return e.push(m,q)});b._textAttributes=null;b.textAndAttributes=Gg.joinTextAttributes(e);if(d!==c){a={};for(d+=1;d<c;a={$jscomp$loop$prop$textAndAttributes$1531$2659:a.$jscomp$loop$prop$textAndAttributes$1531$2659},d++)b=b.nextLine(),a.$jscomp$loop$prop$textAndAttributes$1531$2659=b.textAndAttributes,g=a.$jscomp$loop$prop$textAndAttributes$1531$2659.slice(),a.$jscomp$loop$prop$textAndAttributes$1531$2659.length=0,Gg.textAndAttributesDo(g,function(m){return function(q,r){return m.$jscomp$loop$prop$textAndAttributes$1531$2659.push(q,
h(b,r))}}(a)),b._textAttributes=null,b.textAndAttributes=Gg.joinTextAttributes(a.$jscomp$loop$prop$textAndAttributes$1531$2659);b=b.nextLine();var f=b.textAndAttributes;d=$jscomp.makeIterator(Gg.splitTextAndAttributesAt(f,k));a=d.next().value;d=d.next().value;f.length=0;Gg.textAndAttributesDo(a,function(m,q){return f.push(m,h(b,q))});Gg.textAndAttributesDo(d,function(m,q){return f.push(m,q)});b._textAttributes=null;b.textAndAttributes=Gg.joinTextAttributes(f)}}function kJ(g,c){var h=g.column;g=g.row;
var d=[],k=[];c=$jscomp.makeIterator(Gg.splitTextAndAttributesIntoLines(c));for(var n=c.next();!n.done;n=c.next()){n=n.value;for(var b=0;b<n.length;b+=2){var e=n[b];e=h+("string"===typeof e?e.length:1);d.push({start:{row:g,column:h},end:{row:g,column:e}});k.push(n[b],n[b+1]);h=e}h=0;g++}return{ranges:d,textAndAttributes:k}}function tE(g,c){c=void 0===c?"\n":c;if(!g.length)return[];for(var h=[],d=[],k=0;k<g.length;k+=2){var n=g[k],b=g[k+1];if("string"!==typeof n)d.push(n,b);else for(;n.length;){var e=
n.indexOf(c);if(-1===e){d.push(n,b);break}0<e&&d.push(n.slice(0,e),b);h.push(d);n=n.slice(e+1);d=[]}}d.length?h.push(d):(d=$jscomp.makeIterator(g.slice(-2)),g=d.next().value,d=d.next().value,"string"===typeof g&&g.endsWith(c)&&h.push(["",d]));return h}function lJ(g,c){c=void 0===c?g.textAndAttributesInRange(g.selection.range):c;var h=new g.constructor(Object.assign({},g.defaultTextStyle,{width:g.width,textAndAttributes:c}));c=h.textRenderer.directRenderTextLayerFn(h);g=h.textRenderer.directRenderLineFn(h);
c=c();var d=System.global&&System.global.getComputedStyle?System.global.getComputedStyle(c):null;d&&(c.ownerDocument.body.appendChild(c),c.style.whiteSpace=d.whiteSpace,c.style.overflowWrap=d.overflowWrap,c.style.wordBreak=d.wordBreak,c.style.minWidth=d.minWidth,c.parentNode.removeChild(c));h=$jscomp.makeIterator(h.document.lines);for(d=h.next();!d.done;d=h.next())c.appendChild(g(d.value));return c.outerHTML}function Vv(g){return g?g.replace(/^\s+|\s+$/g,""):""}function VP(g,c){var h=g&&"string"===
typeof g.type,d=h?g:c,k;for(k in g){var n=g[k];Array.isArray(n)?n.forEach(function(b){VP(b,d)}):n&&"object"===typeof n&&VP(n,d)}h&&Object.defineProperty(g,"parent",{configurable:!0,writable:!0,enumerable:!1,value:c||null});return g}function mJ(g){(this||Rca).options=g||{}}function Yk(g){g=g||{};c1.call(this||Ex,g);(this||Ex).indentation=g.indent}function Fz(g){throw new RangeError(Sca[g]);}function d1(g,c){var h=g.split("@"),d="";1<h.length&&(d=h[0]+"@",g=h[1]);g=g.replace(Tca,".").split(".");h=[];
for(var k=g.length;k--;)h[k]=c(g[k]);c=h.join(".");return d+c}function e1(g){for(var c=[],h=0,d=g.length;h<d;){var k=g.charCodeAt(h++);if(55296<=k&&56319>=k&&h<d){var n=g.charCodeAt(h++);56320==(64512&n)?c.push(((1023&k)<<10)+(1023&n)+65536):(c.push(k),h--)}else c.push(k)}return c}function $q(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function uE(g,c,h){if(g&&gu.isObject(g)&&g instanceof $q)return g;
var d=new $q;return d.parse(g,c,h),d}function hu(g){if("string"!=typeof g)throw new TypeError("Path must be a string. Received "+JSON.stringify(g));}function f1(g,c){for(var h,d="",k=0,n=-1,b=0,e=0;e<=g.length;++e){if(e<g.length)h=g.charCodeAt(e);else{if(47===h)break;h=47}if(47===h){if(n!==e-1&&1!==b)if(n!==e-1&&2===b){if(2>d.length||2!==k||46!==d.charCodeAt(d.length-1)||46!==d.charCodeAt(d.length-2))if(2<d.length){if(n=d.lastIndexOf("/"),n!==d.length-1){-1===n?(d="",k=0):k=(d=d.slice(0,n)).length-
1-d.lastIndexOf("/");n=e;b=0;continue}}else if(2===d.length||1===d.length){d="";k=0;n=e;b=0;continue}c&&(0<d.length?d+="/..":d="..",k=2)}else 0<d.length?d+="/"+g.slice(n+1,e):d=g.slice(n+1,e),k=e-n-1;n=e;b=0}else 46===h&&-1!==b?++b:b=-1}return d}function WP(g,c){try{return decodeURIComponent(g.join(""))}catch(d){}if(1===g.length)return g;c=c||1;var h=g.slice(0,c);g=g.slice(c);return Array.prototype.concat.call([],WP(h),WP(g))}function XP(){return Array.prototype.reduce.call(arguments,function(g,c){return Uca.resolve(g,
c)})}function g1(g){return"\\"===Vca.sep?g.replace(/\\/g,"/").replace(/^[a-z]:\/?/i,"/"):g}function vE(g){return Wca(g.replace(/\+/g,"%2B"))}function nJ(g,c,h){Xca.nextTick(function(){g(c,h)})}function YB(g,c){try{return JSON.parse(g.replace(/^\)\]\}'/,""))}catch(h){throw h.sourceMapData=c,h;}}function h1(g,c,h){c=vE(c);try{return String(g(c))}catch(d){throw d.sourceMapData=h,d;}}function i1(g,c,h,d){try{var k=j1(g,c)}catch(n){return nJ(d,n)}if(!k||k.map)return nJ(d,null,k);g=vE(k.url);h(g,function(n,
b){if(n)return n.sourceMapData=k,d(n);k.map=String(b);try{k.map=YB(k.map,k)}catch(e){return d(e)}d(null,k)})}function k1(g,c,h){g=j1(g,c);if(!g||g.map)return g;g.map=h1(h,g.url,g);g.map=YB(g.map,g);return g}function j1(g,c){c=g1(c);g=(g=g.match(Yca))?g[1]||g[2]||"":null;if(!g)return null;var h=g.match(Zca);if(h){var d=h[1]||"text/plain",k=h[2]||"";h=h[3]||"";c={sourceMappingURL:g,url:null,sourcesRelativeTo:c,map:h};if(!$ca.test(d)){var n=Error("Unuseful data uri mime type: "+d);n.sourceMapData=c;
throw n;}try{if(";base64"===k)if("undefined"===typeof TextDecoder||"undefined"===typeof Uint8Array)n=l1(h);else{var b=l1(h),e=b.length,l=new Uint8Array(e);for(g=0;g<e;g++)l[g]=b.charCodeAt(g);n=(new TextDecoder(ada,{fatal:!0})).decode(l)}else n=decodeURIComponent(h);c.map=YB(n,c)}catch(a){throw a.sourceMapData=c,a;}return c}n=XP(c,g);return{sourceMappingURL:g,url:n,sourcesRelativeTo:n,map:null}}function m1(g,c,h,d,k){"function"===typeof d&&(k=d,d={});var n=g.sources?g.sources.length:0,b={sourcesResolved:[],
sourcesContent:[]};if(0===n)nJ(k,null,b);else{var e=function(){n--;0===n&&k(null,b)};n1(g,c,d,function(l,a,f){b.sourcesResolved[f]=l;"string"===typeof a?(b.sourcesContent[f]=a,nJ(e,null)):(l=vE(l),h(l,function(m,q){b.sourcesContent[f]=m?m:String(q);e()}))})}}function o1(g,c,h,d){var k={sourcesResolved:[],sourcesContent:[]};if(!g.sources||0===g.sources.length)return k;n1(g,c,d,function(n,b,e){k.sourcesResolved[e]=n;if(null!==h)if("string"===typeof b)k.sourcesContent[e]=b;else{n=vE(n);try{k.sourcesContent[e]=
String(h(n))}catch(l){k.sourcesContent[e]=l}}});return k}function n1(g,c,h,d){h=h||{};c=g1(c);for(var k,n,b=0,e=g.sources.length;b<e;b++)k=null,"string"===typeof h.sourceRoot?k=h.sourceRoot:"string"===typeof g.sourceRoot&&!1!==h.sourceRoot&&(k=g.sourceRoot),k=null===k||""===k?XP(c,g.sources[b]):XP(c,k.replace(bda,"/"),g.sources[b]),n=(g.sourcesContent||[])[b],d(k,n,b)}function lm(g){p1.call(this||YP,g)}function oJ(g){if(g&&g.isListItem&&"string"===typeof g.string)return g;if(!g||!g.isListItem)return{isListItem:!0,
string:String(g),value:g};var c=g.string||g.label||"no item.string";g.string=c&&"string"!==typeof c?Array.isArray(c)?c.map(function(h,d){return 0==d%2?String(h):""}).join(""):String(c):String(c);return g}function pJ(g){var c=g.filePath,h=g.worldName,d=g.snapshot,k=g.commit,n=g.loadingIndicator,b=g.progress,e=void 0===g.logError?function(X){return console.log(X)}:g.logError,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:return X.setCatchFinallyBlocks(2),
l=JSON.parse(localStorage.getItem("lively.load-config")||'{"lively.lang":"dynamic","lively.ast":"dynamic","lively.source-transform":"dynamic","lively.classes":"dynamic","lively.vm":"dynamic","lively.modules":"dynamic","lively.user":"dynamic","lively.storage":"dynamic","lively.morphic":"dynamic"}'),b.opacity=0,b.hasFixedPosition=!0,b.openInWorld(),b.bottomCenter=n.topCenter,X.yield(Od.polyfills(),4);case 4:return a=$world.env,Od.doBootstrap?X.yield(Od.bootstrapLivelySystem(n,b,l),8):X.yield(Od.fastPrepLivelySystem(n),
7);case 7:X.jumpTo(6);break;case 8:case 6:return n.label="Loading lively.2lively...",X.yield(lively.modules.registerPackage("lively.2lively"),9);case 9:Od.askBeforeQuit&&window.addEventListener("beforeunload",function(T){return T.returnValue="Really?"},!0);if("dynamic"!=l["lively.morphic"]||Od.fastLoad){f=lively.morphic;X.jumpTo(10);break}n.label="Loading lively.morphic...";return X.yield(lively.modules.importPackage("lively.morphic"),11);case 11:f=X.yieldResult,b.finishPackage({packageName:"lively.morphic",
loaded:!0});case 10:n.label="Loading world...";window.onresize=null;window.loadCompiledFrozenPart=lively.modules.module("lively.morphic/partsbin.js")._recorder.loadPart;lively.FreezerRuntime=!1;m=document.location;window.worldLoadingIndicator=n;X.setCatchFinallyBlocks(12);q={root:$world.env.renderer.rootNode,verbose:!0,localconfig:!0,l2l:!0,shell:!0};if(d)return d.startsWith("http")||(d=Od.resource(System.baseURL).join(d).url),X.yield(lively.modules.module("lively.morphic/world.js").recorder,33);
if(k)return X.yield(f.World.loadFromCommit(k,void 0,Object.assign({},q,{browserURL:"/worlds/load?name="+k.name})),15);if(h)return"__newWorld__"==h?Object.values(l).every(function(T){return"frozen"==T})||Od.fastLoad?X.yield(lively.modules.module("lively.ide/world.js").recorder,29):X.yield(lively.modules.System.import("lively.ide/world.js"),27):X.yield(f.World.loadFromDB(h,void 0,void 0,Object.assign({},q,{browserURL:"/worlds/load?name="+h.replace(/\.json($|\?)/,"")})),15);if(!c){X.jumpTo(15);break}return X.yield(f.World.loadFromResource(Od.resource(System.baseURL).join(c),
void 0,Object.assign({},q,{browserURL:"/worlds/load?file="+c})),15);case 27:return v=X.yieldResult,r=v.LivelyWorld,X.yield(lively.modules.System.import("lively.morphic/world-loading.js"),28);case 28:y=X.yieldResult;u=y.loadWorld;X.jumpTo(26);break;case 29:return z=X.yieldResult,r=z.LivelyWorld,X.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,30);case 30:B=X.yieldResult,u=B.loadWorld;case 26:return X.yield(u(new r({openNewProjectPrompt:!0}),void 0,q),15);case 33:return N=X.yieldResult,
C=N.World,X.yield(lively.modules.module("lively.morphic/world-loading.js").recorder,34);case 34:return L=X.yieldResult,F=L.loadWorld,X.yield(lively.modules.module("lively.morphic/serialization.js").recorder,35);case 35:return S=X.yieldResult,ha=G=S.loadMorphFromSnapshot,X.yield(Od.resource(d).readJson(),37);case 37:return X.yield(ha(X.yieldResult),36);case 36:return qa=X.yieldResult,X.yield(F(new C({showsUserFlap:!1,extent:$world.extent}),void 0,q),38);case 38:D=X.yieldResult,D.addMorph(qa),D.onWindowResize();
case 15:X.leaveTryBlock(13,2);break;case 12:P=X.enterCatchBlock(2),window.__loadError__=P;case 13:return b.finishPackage({packageName:"world",loaded:!0}),b.fadeIntoBack(),window.addEventListener("popstate",function(T){document.location==m&&document.location.reload()}),Od.worldLoaded=!0,X.yield($world.whenReady(),39);case 39:return n.remove(),X.yield(a.renderer.worldMorph.whenRendered(),40);case 40:"dynamic"!=l["lively.morphic"]||Od.fastLoad||(a.renderer.clear(),a.fontMetric.uninstall(),a.eventDispatcher.uninstall());
X.leaveTryBlock(0);break;case 2:throw J=X.enterCatchBlock(),J.originalErr&&(J=J.originalErr),M=J.message,J.stack!==J.message&&(M+=J.stack.includes(J.message)?J.stack.replace(J.message,"\n"):J.stack),e(M),J;}})}wa({$:oe,B:lv,D:Mw,F:Lc,G:Ce,H:uc,J:Se,K:Bd,M:vc,N:an,O:Ja,P:Cg,Q:Eq,R:Xm,S:ec,U:np,V:LI,W:wb,X:Hq,Z:nE,_:VI,a:Kg,a2:Ff,a3:nf,aF:Oe,aG:oj,aJ:zb,ab:sb,af:$I,ag:ZI,ah:UB,ak:kp,b:Fy,b0:bu,bA:Bt,bC:en,bF:ov,bG:xq,bL:Vj,bO:fb,bQ:Ct,bR:Lk,bV:function(g){g=void 0===g?document.body:g;var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){ar.default().world||
(c=window.$world=window.$$world=new Wv({name:q1.name,extent:nf(window.innerWidth,window.innerHeight)}),ar.default().setWorldRenderedOn(c,g,window.prerenderNode));window.$world.dontRecordChangesWhile(function(){var d=Oy(q1,{reinitializeIds:function(k){return k}});if(d.isWorld)d.position=nf(0,0),ar.default().setWorldRenderedOn(d,g,window.prerenderNode),"elastic"===d.resizePolicy&&d.execCommand("resize to fit window");else try{g!=document.body?(new window.ResizeObserver(function(k){return d.execCommand("resize on client",
k[0])})).observe(g):window.onresize=lively.FreezerRuntime.resizeHandler=function(){return d.execCommand("resize on client")},d.openInWorld(nf(0,0)),d.execCommand("resize on client",g)}catch(k){d.position=nf(0,0)}});h.jumpToEnd()})},bd:Wr,be:yo,bf:JI,bh:xo,bj:jp,br:w,bv:Ri,bx:ym,c:Hy,e:ip,f:Yr,g:Dz,h:tj,i:hb,j:Gn,k:oD,l:fi,m:Gy,n:ed,o:hc,p:sg,q:fl,r:x,s:lE,t:rg,u:Tb,v:Yp,w:Ed,x:Bq,y:Hm,z:hp});var ZB=lively.FreezerRuntime.recorderFor("lively.lang/closure.js");ZB.evalJS=ne;ZB.parameterRegex=/function[^\(]*\(([^\)]*)\)|\(?([^\)=]*)\)?\s*=>/;
var Fi=function(g,c,h,d){this.originalFunc=g;this.varMapping=c||{};this.setFuncSource(h||g);this.setFuncProperties(g||d)};Fi.fromFunction=function(g,c){return new this(g,c||{})};Fi.fromSource=function(g,c){return new this(null,c||{},g)};Fi.prototype.setFuncSource=function(g){return this.source=g="undefined"!==typeof lively&&lively.sourceTransform&&"function"===typeof lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder?lively.sourceTransform.stringifyFunctionWithoutToplevelRecorder(g):
String(g)};Fi.prototype.getFuncSource=function(){return this.source||this.setFuncSource(this.originalFunc)};Fi.prototype.hasFuncSource=function(){return this.source&&!0};Fi.prototype.getFunc=function(){return this.originalFunc||this.recreateFunc()};Fi.prototype.getFuncProperties=function(){return this.funcProperties||(this.funcProperties={})};Fi.prototype.setFuncProperties=function(g){var c=this.getFuncProperties(),h;for(h in g)g.hasOwnProperty(h)&&(c[h]=g[h])};Fi.prototype.lookup=function(g){return this.varMapping[g]};
Fi.prototype.parameterNames=function(g){return"undefined"!==typeof lively&&lively.ast&&lively.ast.parseFunction?(lively.ast.parseFunction(g).params||[]).map(function(c){return"Identifier"===c.type?c.name:c.left&&"Identifier"===c.left.type?c.left.name:null}).filter(Boolean):(g=ZB.parameterRegex.exec(g))?(g[1]||g[2]||"").split(",").map(function(c){return c.trim()}):[]};Fi.prototype.firstParameter=function(g){return this.parameterNames(g)[0]||null};Fi.prototype.recreateFunc=function(){return this.recreateFuncFromSource(this.getFuncSource(),
this.originalFunc)};Fi.prototype.recreateFuncFromSource=function(g,c){c=[];var h="$super"===this.firstParameter(g);for(d in this.varMapping)this.varMapping.hasOwnProperty(d)&&"this"!=d&&c.push("var "+d+" = this.varMapping."+d+";\n");var d="";0<c.length&&(d+=c.join("\n"));h&&(d+="(function superWrapperForClosure() { return ");d+="("+g+")";h&&(d+=".apply(this, [$super.bind(this)].concat(Array.from(arguments))) })");try{var k=ZB.evalJS.call(this,d)||this.couldNotCreateFunc(d);this.addFuncProperties(k);
return this.originalFunc=k}catch(n){throw g="Cannot create function "+n+" src: "+d,console.error(g),Error(g);}};Fi.prototype.addFuncProperties=function(g){var c=this.getFuncProperties(),h;for(h in c)c.hasOwnProperty(h)&&(g[h]=c[h]);this.addClosureInformation(g)};Fi.prototype.couldNotCreateFunc=function(g){var c="Could not recreate closure from source: \n"+g;console.error(c);return function(){throw Error(c);}};Fi.prototype.asFunction=function(){return this.recreateFunc()};Fi.prototype.addClosureInformation=
function(g){g.hasLivelyClosure=!0;g.livelyClosure=this;return g};$jscomp.global.Object.defineProperties(Fi.prototype,{isLivelyClosure:{configurable:!0,enumerable:!0,get:function(){return!0}},doNotSerialize:{configurable:!0,enumerable:!0,get:function(){return["originalFunc"]}}});wa("bp",Fi);ZB.Closure=Fi;ZB.default=Fi;var Fx=lively.FreezerRuntime.recorderFor("lively.lang/Group.js");Fx.groupBy=Ce;var Pm=function(){};Pm.fromArray=function(g,c,h){for(var d=new Fx.Group,k=0,n=g.length;k<n;k++){var b=c.call(h,
g[k],k);Fx.Group.prototype.hasOwnProperty(b)&&(b="_"+b);d[b]||(d[b]=[]);d[b].push(g[k])}return d};Pm.prototype.toArray=function(){return this.reduceGroups(function(g,c,h){return g.concat([h])},[])};Pm.prototype.forEach=function(g,c){var h=this;Object.keys(h).forEach(function(d){h[d].forEach(g.bind(c,d))});return h};Pm.prototype.forEachGroup=function(g,c){var h=this;Object.keys(h).forEach(function(d){g.call(c,d,h[d])});return h};Pm.prototype.map=function(g,c){var h=new Fx.Group;this.forEachGroup(function(d,
k){h[d]=k.map(g.bind(c,d))});return h};Pm.prototype.mapGroups=function(g,c){var h=new Fx.Group;this.forEachGroup(function(d,k){h[d]=g.call(c,d,k)});return h};Pm.prototype.keys=function(){return Object.keys(this)};Pm.prototype.reduceGroups=function(g,c,h){this.forEachGroup(function(d,k){c=g.call(h,c,d,k)});return c};Pm.prototype.count=function(){return this.reduceGroups(function(g,c,h){g[c]=h.length;return g},{})};$jscomp.global.Object.defineProperties(Pm,{by:{configurable:!0,enumerable:!0,get:function(){return Fx.groupBy}}});
Fx.Group=Pm;Fx.default=Pm;var qb=lively.FreezerRuntime.recorderFor("lively.lang/array.js");qb.range=ed;qb.withN=qc;qb.genN=pd;qb.filter=uc;qb.binarySearchFor=Ac;qb.findAndGet=dd;qb.filterByKey=Ad;qb.grep=le;qb.mask=Le;qb.reject=ae;qb.rejectByKey=lc;qb.without=Wc;qb.withoutAll=Ed;qb.uniq=Tb;qb.uniqBy=Bd;qb.uniqByKey=Sd;qb.compact=hc;qb.mutableCompact=mc;qb.forEach=Hb;qb.zip=ec;qb.flatten=vc;qb.flatmap=gd;qb.interpose=Zc;qb.delimWith=Za;qb.map=Xa;qb.invoke=jb;qb.pluck=Fa;qb.reduce=Ea;qb.reduceRight=
ka;qb.some=ja;qb.every=Ca;qb.equals=mb;qb.deepEquals=Ub;qb.isSorted=Ya;qb.sort=$a;qb.sortBy=Ua;qb.sortByKey=U;qb.reverse=Ba;qb.reversed=K;qb.reMatches=V;qb.first=ra;qb.last=Ja;qb.intersect=hb;qb.union=dc;qb.pushAt=na;qb.removeAt=oa;qb.remove=wb;qb.pushAll=fc;qb.pushAllAt=Qa;qb.pushIfNotIncluded=Lc;qb.replaceAt=ld;qb.clear=od;qb.isSubset=Be;qb.doAndContinue=sd;qb.nestedDelay=Ze;qb.forEachShowingProgress=Hf;qb.swap=sc;qb.rotate=Yb;qb.groupBy=Ce;qb.groupByKey=Wb;qb.partition=cb;qb.batchify=Xb;qb.toTuples=
H;qb.combinationsPick=pa;qb.combinations=Sa;qb.take=rb;qb.drop=Sb;qb.takeWhile=Eb;qb.dropWhile=Mc;qb.shuffle=Fc;qb.max=xd;qb.min=Ve;qb.sum=Kd;qb.count=fe;qb.size=ge;qb.histogram=te;qb.clone=Kc;qb.toArray=ef;qb.each=Ue;qb.all=Se;qb.any=vf;qb.collect=Df;qb.findAll=$b;qb.inject=Og;qb.mapAsyncSeries=ph;qb.mapAsync=pg;qb.objectEquals=Pl;qb.delay=re;qb.once=Lk;qb.NullFunction=Oa;qb.Group=Pm;qb.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;qb.features={from:!!Array.from,
filter:!!Array.prototype.filter,find:!!Array.prototype.find,findIndex:!!Array.prototype.findIndex,includes:!!Array.prototype.includes};qb.from=qb.features.from?Array.from:function(g){if(!g)return[];if(Array.isArray(g))return g;if(g.toArray)return g.toArray();for(var c=g.length,h=Array(c);c--;)h[c]=g[c];return h};qb.detect=qb.features.find?function(g,c,h){return g.find(c,h)}:function(g,c,h){for(var d,k=0,n=g.length;k<n;k++)if(d=g[k],c.call(h,d,k))return d};qb.findIndex=qb.features.findIndex?function(g,
c,h){return g.findIndex(c,h)}:function(g,c,h){var d=-1;return g.find(function(k,n){d=n;return c.call(k,h)})?d:-1};qb.isArray=Array.isArray;qb.includes=qb.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1!==g.indexOf(c)};qb.include=qb.includes;qb.permutations=function(){function g(c,h){return c.length?qb.flatmap(c,function(d,k){return g(c.slice(0,k).concat(c.slice(k+1)),h.concat([d]))}):[h]}return function(c){return g(c,[])}}();qb.features.from||(Array.from=qb.from);qb.features.filter||
(Array.prototype.filter=function(g,c){return qb.filter(this,g,c)});qb.features.find||(Array.prototype.find=function(g,c){return qb.detect(this,g,c)});qb.features.findIndex||(Array.prototype.findIndex=function(g,c){return qb.findIndex(this,g,c)});qb.features.includes||(Array.prototype.includes=function(g){return qb.includes(this,g)});var ZP=qb.from,$P=qb.detect,aQ=qb.findIndex,bQ=wa("d",qb.isArray),cQ=qb.includes,dQ=qb.include,eQ=qb.permutations;qb.range=ed;qb.range=ed;qb.from=ZP;qb.from=ZP;qb.withN=
qc;qb.withN=qc;qb.genN=pd;qb.genN=pd;qb.filter=uc;qb.filter=uc;qb.detect=$P;qb.detect=$P;qb.binarySearchFor=Ac;qb.binarySearchFor=Ac;qb.findIndex=aQ;qb.findIndex=aQ;qb.findAndGet=dd;qb.findAndGet=dd;qb.filterByKey=Ad;qb.filterByKey=Ad;qb.grep=le;qb.grep=le;qb.mask=Le;qb.mask=Le;qb.reject=ae;qb.reject=ae;qb.rejectByKey=lc;qb.rejectByKey=lc;qb.without=Wc;qb.without=Wc;qb.withoutAll=Ed;qb.withoutAll=Ed;qb.uniq=Tb;qb.uniq=Tb;qb.uniqBy=Bd;qb.uniqBy=Bd;qb.uniqByKey=Sd;qb.uniqByKey=Sd;qb.compact=hc;qb.compact=
hc;qb.mutableCompact=mc;qb.mutableCompact=mc;qb.forEach=Hb;qb.forEach=Hb;qb.zip=ec;qb.zip=ec;qb.flatten=vc;qb.flatten=vc;qb.flatmap=gd;qb.flatmap=gd;qb.interpose=Zc;qb.interpose=Zc;qb.delimWith=Za;qb.delimWith=Za;qb.map=Xa;qb.map=Xa;qb.invoke=jb;qb.invoke=jb;qb.pluck=Fa;qb.pluck=Fa;qb.reduce=Ea;qb.reduce=Ea;qb.reduceRight=ka;qb.reduceRight=ka;qb.isArray=bQ;qb.isArray=bQ;qb.includes=cQ;qb.includes=cQ;qb.include=dQ;qb.include=dQ;qb.some=ja;qb.some=ja;qb.every=Ca;qb.every=Ca;qb.equals=mb;qb.equals=mb;
qb.deepEquals=Ub;qb.deepEquals=Ub;qb.isSorted=Ya;qb.isSorted=Ya;qb.sort=$a;qb.sort=$a;qb.sortBy=Ua;qb.sortBy=Ua;qb.sortByKey=U;qb.sortByKey=U;qb.reverse=Ba;qb.reverse=Ba;qb.reversed=K;qb.reversed=K;qb.reMatches=V;qb.reMatches=V;qb.first=ra;qb.first=ra;qb.last=Ja;qb.last=Ja;qb.intersect=hb;qb.intersect=hb;qb.union=dc;qb.union=dc;qb.pushAt=na;qb.pushAt=na;qb.removeAt=oa;qb.removeAt=oa;qb.remove=wb;qb.remove=wb;qb.pushAll=fc;qb.pushAll=fc;qb.pushAllAt=Qa;qb.pushAllAt=Qa;qb.pushIfNotIncluded=Lc;qb.pushIfNotIncluded=
Lc;qb.replaceAt=ld;qb.replaceAt=ld;qb.clear=od;qb.clear=od;qb.isSubset=Be;qb.isSubset=Be;qb.doAndContinue=sd;qb.doAndContinue=sd;qb.nestedDelay=Ze;qb.nestedDelay=Ze;qb.forEachShowingProgress=Hf;qb.forEachShowingProgress=Hf;qb.swap=sc;qb.swap=sc;qb.rotate=Yb;qb.rotate=Yb;qb.groupBy=Ce;qb.groupBy=Ce;qb.groupByKey=Wb;qb.groupByKey=Wb;qb.partition=cb;qb.partition=cb;qb.batchify=Xb;qb.batchify=Xb;qb.toTuples=H;qb.toTuples=H;qb.permutations=eQ;qb.permutations=eQ;qb.combinationsPick=pa;qb.combinationsPick=
pa;qb.combinations=Sa;qb.combinations=Sa;qb.take=rb;qb.take=rb;qb.drop=Sb;qb.drop=Sb;qb.takeWhile=Eb;qb.takeWhile=Eb;qb.dropWhile=Mc;qb.dropWhile=Mc;qb.shuffle=Fc;qb.shuffle=Fc;qb.max=xd;qb.max=xd;qb.min=Ve;qb.min=Ve;qb.sum=Kd;qb.sum=Kd;qb.count=fe;qb.count=fe;qb.size=ge;qb.size=ge;qb.histogram=te;qb.histogram=te;qb.clone=Kc;qb.clone=Kc;qb.toArray=ef;qb.toArray=ef;qb.each=Ue;qb.each=Ue;qb.all=Se;qb.all=Se;qb.any=vf;qb.any=vf;qb.collect=Df;qb.collect=Df;qb.findAll=$b;qb.findAll=$b;qb.inject=Og;qb.inject=
Og;qb.mapAsyncSeries=ph;qb.mapAsyncSeries=ph;qb.mapAsync=pg;qb.mapAsync=pg;var Qe=Object.freeze({__proto__:null,range:ed,from:ZP,withN:qc,genN:pd,filter:uc,detect:$P,binarySearchFor:Ac,findIndex:aQ,findAndGet:dd,filterByKey:Ad,grep:le,mask:Le,reject:ae,rejectByKey:lc,without:Wc,withoutAll:Ed,uniq:Tb,uniqBy:Bd,uniqByKey:Sd,compact:hc,mutableCompact:mc,forEach:Hb,zip:ec,flatten:vc,flatmap:gd,interpose:Zc,delimWith:Za,map:Xa,invoke:jb,pluck:Fa,reduce:Ea,reduceRight:ka,isArray:bQ,includes:cQ,include:dQ,
some:ja,every:Ca,equals:mb,deepEquals:Ub,isSorted:Ya,sort:$a,sortBy:Ua,sortByKey:U,reverse:Ba,reversed:K,reMatches:V,first:ra,last:Ja,intersect:hb,union:dc,pushAt:na,removeAt:oa,remove:wb,pushAll:fc,pushAllAt:Qa,pushIfNotIncluded:Lc,replaceAt:ld,clear:od,isSubset:Be,doAndContinue:sd,nestedDelay:Ze,forEachShowingProgress:Hf,swap:sc,rotate:Yb,groupBy:Ce,groupByKey:Wb,partition:cb,batchify:Xb,toTuples:H,permutations:eQ,combinationsPick:pa,combinations:Sa,take:rb,drop:Sb,takeWhile:Eb,dropWhile:Mc,shuffle:Fc,
max:xd,min:Ve,sum:Kd,count:fe,size:ge,histogram:te,clone:Kc,toArray:ef,each:Ue,all:Se,any:vf,collect:Df,findAll:$b,inject:Og,mapAsyncSeries:ph,mapAsync:pg});wa("a6",Qe);var Cc=lively.FreezerRuntime.recorderFor("lively.lang/function.js");Cc.Empty=Je;Cc.K=ya;Cc.Null=Oa;Cc.False=nb;Cc.True=R;Cc.notYetImplemented=xa;Cc.all=Va;Cc.own=eb;Cc.argumentNames=ac;Cc.qualifiedMethodName=Db;Cc.extractBody=xc;Cc.timeToRun=Jc;Cc.timeToRunN=Bc;Cc.delay=re;Cc.throttle=of;Cc.debounce=Ye;Cc.throttleNamed=Bg;Cc.debounceNamed=
Bh;Cc.createQueue=Cf;Cc.workerWithCallbackQueue=hg;Cc._composeAsyncDefaultEndCallback=function(g,c){g&&console.error("lively.lang.composeAsync error",g)};Cc.composeAsync=wf;Cc.compose=tj;Cc.flip=Pf;Cc.withNull=Qi;Cc.waitFor=Te;Cc.waitForAll=cj;Cc.curry=Uj;Cc.wrap=Ml;Cc.getOriginal=Vm;Cc.wrapperChain=Nl;Cc.replaceMethodForOneCall=zk;Cc.once=Lk;Cc.either=Pi;Cc.eitherNamed=Ig;Cc.evalJS=ne;Cc.fromString=Mk;Cc.asScript=tb;Cc.asScriptOf=zc;Cc.addToObject=zd;Cc.binds=td;Cc.setLocalVarValue=cf;Cc.getVarMapping=
$f;Cc.setProperty=dj;Cc.functionNames=vm;Cc.localFunctionNames=Up;Cc.logErrors=wr;Cc.logCompletion=Wm;Cc.logCalls=co;Cc.traceCalls=sm;Cc.webkitStack=vn;Cc.objectMerge=wm;Cc.safeToString=Ql;Cc.Closure=Fi;Cc.arr=Qe;Cc._throttledByName={};Cc._debouncedByName={};Cc._queues={};Cc._queueUntilCallbacks={};Cc._eitherNameRegistry={};Cc.Empty=Je;Cc.Empty=Je;Cc.K=ya;Cc.K=ya;Cc.Null=Oa;Cc.Null=Oa;Cc.False=nb;Cc.False=nb;Cc.True=R;Cc.True=R;Cc.notYetImplemented=xa;Cc.notYetImplemented=xa;Cc.withNull=Qi;Cc.withNull=
Qi;Cc.all=Va;Cc.all=Va;Cc.own=eb;Cc.own=eb;Cc.argumentNames=ac;Cc.argumentNames=ac;Cc.qualifiedMethodName=Db;Cc.qualifiedMethodName=Db;Cc.extractBody=xc;Cc.extractBody=xc;Cc.timeToRun=Jc;Cc.timeToRun=Jc;Cc.timeToRunN=Bc;Cc.timeToRunN=Bc;Cc.delay=re;Cc.delay=re;Cc.throttle=of;Cc.throttle=of;Cc.debounce=Ye;Cc.debounce=Ye;Cc.throttleNamed=Bg;Cc.throttleNamed=Bg;Cc.debounceNamed=Bh;Cc.debounceNamed=Bh;Cc.createQueue=Cf;Cc.createQueue=Cf;Cc.workerWithCallbackQueue=hg;Cc.workerWithCallbackQueue=hg;Cc.composeAsync=
wf;Cc.composeAsync=wf;Cc.compose=tj;Cc.compose=tj;Cc.waitFor=Te;Cc.waitFor=Te;Cc.waitForAll=cj;Cc.waitForAll=cj;Cc.flip=Pf;Cc.flip=Pf;Cc.curry=Uj;Cc.curry=Uj;Cc.wrap=Ml;Cc.wrap=Ml;Cc.binds=td;Cc.binds=td;Cc.getOriginal=Vm;Cc.getOriginal=Vm;Cc.wrapperChain=Nl;Cc.wrapperChain=Nl;Cc.replaceMethodForOneCall=zk;Cc.replaceMethodForOneCall=zk;Cc.once=Lk;Cc.once=Lk;Cc.either=Pi;Cc.either=Pi;Cc.eitherNamed=Ig;Cc.eitherNamed=Ig;Cc.evalJS=ne;Cc.evalJS=ne;Cc.fromString=Mk;Cc.fromString=Mk;Cc.asScript=tb;Cc.asScript=
tb;Cc.asScriptOf=zc;Cc.asScriptOf=zc;Cc.addToObject=zd;Cc.addToObject=zd;Cc.setLocalVarValue=cf;Cc.setLocalVarValue=cf;Cc.getVarMapping=$f;Cc.getVarMapping=$f;Cc.setProperty=dj;Cc.setProperty=dj;Cc.functionNames=vm;Cc.functionNames=vm;Cc.localFunctionNames=Up;Cc.localFunctionNames=Up;Cc.logErrors=wr;Cc.logErrors=wr;Cc.logCompletion=Wm;Cc.logCompletion=Wm;Cc.logCalls=co;Cc.logCalls=co;Cc.traceCalls=sm;Cc.traceCalls=sm;Cc.webkitStack=vn;Cc.webkitStack=vn;var Zk=Object.freeze({__proto__:null,Empty:Je,
K:ya,Null:Oa,False:nb,True:R,notYetImplemented:xa,withNull:Qi,all:Va,own:eb,argumentNames:ac,qualifiedMethodName:Db,extractBody:xc,timeToRun:Jc,timeToRunN:Bc,delay:re,throttle:of,debounce:Ye,throttleNamed:Bg,debounceNamed:Bh,createQueue:Cf,workerWithCallbackQueue:hg,composeAsync:wf,compose:tj,waitFor:Te,waitForAll:cj,flip:Pf,curry:Uj,wrap:Ml,binds:td,getOriginal:Vm,wrapperChain:Nl,replaceMethodForOneCall:zk,once:Lk,either:Pi,eitherNamed:Ig,evalJS:ne,fromString:Mk,asScript:tb,asScriptOf:zc,addToObject:zd,
setLocalVarValue:cf,getVarMapping:$f,setProperty:dj,functionNames:vm,localFunctionNames:Up,logErrors:wr,logCompletion:Wm,logCalls:co,traceCalls:sm,webkitStack:vn});wa("aO",Zk);var vd=lively.FreezerRuntime.recorderFor("lively.lang/object.js");vd.print=Vp;vd.indent=function(g,c,h){if(!h||0>=h)return g;for(;0<h;)h--,g=c+g;return g};vd.isArray=fo;vd.isElement=Qo;vd.isFunction=wn;vd.isBoolean=eo;vd.isString=Xm;vd.isNumber=Ro;vd.isUndefined=Wp;vd.isRegExp=Xp;vd.isObject=pc;vd.isPrimitive=Ym;vd.isEmpty=
Zp;vd.equals=Pl;vd.values=Yp;vd.select=go;vd.dissoc=fl;vd.addScript=Kk;vd.extend=um;vd.clone=xn;vd.extract=Gi;vd.inspect=jk;vd.merge=wm;vd.deepMerge=Zm;vd.sortKeysWithBeforeAndAfterConstraints=yn;vd.inherit=ik;vd.valuesInPropertyHierarchy=zn;vd.mergePropertyInHierarchy=ho;vd.deepCopy=So;vd.typeStringOf=gl;vd.shortPrintStringOf=hl;vd.isMutableType=Rl;vd.safeToString=Ql;vd.asObject=Jk;vd.newKeyIn=il;vd.functionFromString=Mk;vd.asScriptOf=zc;vd.argumentNames=ac;vd.arrayDeepEquals=Ub;vd.isSubset=Be;vd.flatten=
vc;vd.getOwnPropertyDescriptors="function"===typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors:function(g){var c={},h;for(h in g)Object.prototype.hasOwnProperty.call(g,h)&&Object.defineProperty(c,h,{configurable:!0,enumerable:!0,writable:!0,value:Object.getOwnPropertyDescriptor(g,h)});return c};vd.keys=Object.keys;var fQ=vd.keys,gQ=vd.getOwnPropertyDescriptors;vd.isArray=fo;vd.isArray=fo;vd.isElement=Qo;vd.isElement=Qo;vd.isFunction=wn;vd.isFunction=wn;vd.isBoolean=eo;vd.isBoolean=
eo;vd.isString=Xm;vd.isString=Xm;vd.isNumber=Ro;vd.isNumber=Ro;vd.isUndefined=Wp;vd.isUndefined=Wp;vd.isRegExp=Xp;vd.isRegExp=Xp;vd.isObject=pc;vd.isObject=pc;vd.isPrimitive=Ym;vd.isPrimitive=Ym;vd.isEmpty=Zp;vd.isEmpty=Zp;vd.equals=Pl;vd.equals=Pl;vd.keys=fQ;vd.keys=fQ;vd.values=Yp;vd.values=Yp;vd.select=go;vd.select=go;vd.dissoc=fl;vd.dissoc=fl;vd.addScript=Kk;vd.addScript=Kk;vd.extend=um;vd.extend=um;vd.clone=xn;vd.clone=xn;vd.extract=Gi;vd.extract=Gi;vd.inspect=jk;vd.inspect=jk;vd.merge=wm;vd.merge=
wm;vd.deepMerge=Zm;vd.deepMerge=Zm;vd.inherit=ik;vd.inherit=ik;vd.valuesInPropertyHierarchy=zn;vd.valuesInPropertyHierarchy=zn;vd.mergePropertyInHierarchy=ho;vd.mergePropertyInHierarchy=ho;vd.sortKeysWithBeforeAndAfterConstraints=yn;vd.sortKeysWithBeforeAndAfterConstraints=yn;vd.deepCopy=So;vd.deepCopy=So;vd.typeStringOf=gl;vd.typeStringOf=gl;vd.shortPrintStringOf=hl;vd.shortPrintStringOf=hl;vd.isMutableType=Rl;vd.isMutableType=Rl;vd.safeToString=Ql;vd.safeToString=Ql;vd.asObject=Jk;vd.asObject=Jk;
vd.newKeyIn=il;vd.newKeyIn=il;vd.getOwnPropertyDescriptors=gQ;vd.getOwnPropertyDescriptors=gQ;var lf=Object.freeze({__proto__:null,isArray:fo,isElement:Qo,isFunction:wn,isBoolean:eo,isString:Xm,isNumber:Ro,isUndefined:Wp,isRegExp:Xp,isObject:pc,isPrimitive:Ym,isEmpty:Zp,equals:Pl,keys:fQ,values:Yp,select:go,dissoc:fl,addScript:Kk,extend:um,clone:xn,extract:Gi,inspect:jk,merge:wm,deepMerge:Zm,inherit:ik,valuesInPropertyHierarchy:zn,mergePropertyInHierarchy:ho,sortKeysWithBeforeAndAfterConstraints:yn,
deepCopy:So,typeStringOf:gl,shortPrintStringOf:hl,isMutableType:Rl,safeToString:Ql,asObject:Jk,newKeyIn:il,getOwnPropertyDescriptors:gQ});wa("a8",lf);var hQ={};(function(){var g=[].slice;var c={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},
7:{_:"an"},8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},"\u00a3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},
g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{"\u00ed":{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},"\u00c1":{_:"an"},"\u00e1":{";":{_:"an"}},"\u00e0":{_:"an"},"\u00c4":{_:"an"},"\u0101":{_:"an"},
"\u00c5":{_:"an"},"\u00e6":{_:"an"},"\u00c6":{n:{_:"a"},_:"an"},D:{"\u00fa":{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},"\u00e9":{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},
_:"a"},_:"an"},"\u00c9":{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},
I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},"\u03c3":{_:"an"}},G:{h:{a:{e:{_:"an"},
i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},
a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},
i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\u00a3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},"\u0130":{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},
p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},
S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},
"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"}," ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},
R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\u00b2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},
S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\u00d7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},
c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},"\u00d3":{_:"an"},"\u00d6":{_:"an"},"\u00f6":{_:"an"},
"\u014c":{_:"an"},"\u014d":{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},
f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},
":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},
C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},
R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},"\u00e0":{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},
n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},
d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},
t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},"\u00fc":{_:"an"},"\u00dc":{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},_:"an"},Y:{p:{_:"an"}},"\u03b1":{_:"an"},"\u03b5":{_:"an"},"\u03c9":{_:"an"}};var h=function(d,k,n){null==k&&(k=c);null==n&&(n="a");if(null==d)return n;
var b=d.slice(0,1);k=k[b];return null!=b&&null!=k?h(d.slice(1),k,k._||n):n};hQ={find:h,articlize:function(){var d=1<=arguments.length?g.call(arguments,0):[];var k;var n=[];var b=0;for(k=d.length;b<k;b++){var e=d[b];null!=e&&n.push(h(e)+" "+e)}return 1===d.length?n[0]:n}}}).call(hQ);var cda=hQ,gc=lively.FreezerRuntime.recorderFor("lively.lang/string.js");gc.format=xm;gc.formatFromArray=Ak;gc.indent=jl;gc.minIndent=la;gc.changeIndent=Da;gc.quote=Wa;gc.articlize=Ka;gc.findArticle=Jb;gc.print=Gb;gc.printNested=
Rb;gc.pad=cc;gc.printTable=$c;gc.printTree=Re;gc.toArray=Ne;gc.lines=Ng;gc.paragraphs=yf;gc.nonEmptyLines=ch;gc.tokens=di;gc.tableize=sj;gc.unescapeCharacterEntities=Ol;gc.toQueryParams=tm;gc.base64EncodeUnicode=Ss;gc.base64DecodeUnicode=$p;gc.normalizePath=aq;gc.joinPath=rf;gc.newUUID=ym;gc.createDataURI=zf;gc.hashCode=bq;gc.md5=Ts;gc.reMatches=Us;gc.stringMatch=Vs;gc.peekRight=Ws;gc.peekLeft=Bk;gc.lineIndexComputer=zm;gc.lineNumberToIndexesComputer=An;gc.lineRanges=Ck;gc.findLineWithIndexInLineRanges=
xr;gc.regexIndexOf=cq;gc.regexLastIndexOf=$m;gc.diff=rw;gc.empty=Xs;gc.startsWithVowel=yr;gc.withDecimalPrecision=Ys;gc.capitalize=dq;gc.camelCaseString=Sl;gc.camelize=an;gc.truncate=Dk;gc.truncateLeft=Am;gc.regExpEscape=eq;gc.succ=Fu;gc.digitValue=Gu;gc.longestCommonSubstring=Hu;gc.applyChange=sw;gc.applyChanges=Iu;gc.levenshtein=io;gc.inspectObject=jk;gc.min=Ve;gc.last=Ja;gc.articles=cda;gc.features={repeat:!!String.prototype.repeat,includes:!!String.prototype.includes,startsWith:!!String.prototype.startsWith,
endsWith:!!String.prototype.endsWith};gc.pathDotRe=/\/\.\//g;gc.pathDoubleDotRe=/\/[^\/]+\/\.\./;gc.pathDoubleSlashRe=/(^|[^:])[\/]+/g;gc.urlStartRe=/^[a-z0-9-_\.]+:\/\//;gc.newUUIDTemplate="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";gc.newUUIDRe=/[xy]/g;gc.newUUIDReplacer=function(g){var c=16*Math.random()|0;return("x"==g?c:c&3|8).toString(16)};gc.includes=gc.features.includes?function(g,c){return g.includes(c)}:function(g,c){return-1<g.indexOf(c)};gc.include=gc.includes;gc.startsWith=gc.features.startsWith?
function(g,c){return g.startsWith(c)}:function(g,c){return 0===g.indexOf(c)};gc.endsWith=gc.features.endsWith?function(g,c){return g.endsWith(c)}:function(g,c){var h=g.length-c.length;return 0<=h&&g.lastIndexOf(c)===h};gc.times=gc.features.repeat?function(g,c){return g.repeat(c)}:function(g,c){return 1>c?"":Array(c+1).join(g)};var iQ=gc.includes,jQ=gc.include,kQ=gc.startsWith,lQ=gc.endsWith,mQ=gc.times;gc.format=xm;gc.format=xm;gc.formatFromArray=Ak;gc.formatFromArray=Ak;gc.indent=jl;gc.indent=jl;
gc.minIndent=la;gc.minIndent=la;gc.changeIndent=Da;gc.changeIndent=Da;gc.quote=Wa;gc.quote=Wa;gc.articlize=Ka;gc.articlize=Ka;gc.findArticle=Jb;gc.findArticle=Jb;gc.print=Gb;gc.print=Gb;gc.printNested=Rb;gc.printNested=Rb;gc.pad=cc;gc.pad=cc;gc.printTable=$c;gc.printTable=$c;gc.printTree=Re;gc.printTree=Re;gc.toArray=Ne;gc.toArray=Ne;gc.lines=Ng;gc.lines=Ng;gc.paragraphs=yf;gc.paragraphs=yf;gc.nonEmptyLines=ch;gc.nonEmptyLines=ch;gc.tokens=di;gc.tokens=di;gc.tableize=sj;gc.tableize=sj;gc.unescapeCharacterEntities=
Ol;gc.unescapeCharacterEntities=Ol;gc.base64EncodeUnicode=Ss;gc.base64EncodeUnicode=Ss;gc.base64DecodeUnicode=$p;gc.base64DecodeUnicode=$p;gc.toQueryParams=tm;gc.toQueryParams=tm;gc.normalizePath=aq;gc.normalizePath=aq;gc.joinPath=rf;gc.joinPath=rf;gc.newUUID=ym;gc.newUUID=ym;gc.createDataURI=zf;gc.createDataURI=zf;gc.hashCode=bq;gc.hashCode=bq;gc.md5=Ts;gc.md5=Ts;gc.reMatches=Us;gc.reMatches=Us;gc.stringMatch=Vs;gc.stringMatch=Vs;gc.peekRight=Ws;gc.peekRight=Ws;gc.peekLeft=Bk;gc.peekLeft=Bk;gc.lineIndexComputer=
zm;gc.lineIndexComputer=zm;gc.lineNumberToIndexesComputer=An;gc.lineNumberToIndexesComputer=An;gc.findLineWithIndexInLineRanges=xr;gc.findLineWithIndexInLineRanges=xr;gc.regexIndexOf=cq;gc.regexIndexOf=cq;gc.regexLastIndexOf=$m;gc.regexLastIndexOf=$m;gc.lineRanges=Ck;gc.lineRanges=Ck;gc.diff=rw;gc.diff=rw;gc.empty=Xs;gc.empty=Xs;gc.includes=iQ;gc.includes=iQ;gc.include=jQ;gc.include=jQ;gc.startsWith=kQ;gc.startsWith=kQ;gc.startsWithVowel=yr;gc.startsWithVowel=yr;gc.endsWith=lQ;gc.endsWith=lQ;gc.withDecimalPrecision=
Ys;gc.withDecimalPrecision=Ys;gc.capitalize=dq;gc.capitalize=dq;gc.camelCaseString=Sl;gc.camelCaseString=Sl;gc.camelize=an;gc.camelize=an;gc.truncate=Dk;gc.truncate=Dk;gc.truncateLeft=Am;gc.truncateLeft=Am;gc.regExpEscape=eq;gc.regExpEscape=eq;gc.succ=Fu;gc.succ=Fu;gc.digitValue=Gu;gc.digitValue=Gu;gc.times=mQ;gc.times=mQ;gc.longestCommonSubstring=Hu;gc.longestCommonSubstring=Hu;gc.applyChange=sw;gc.applyChange=sw;gc.applyChanges=Iu;gc.applyChanges=Iu;gc.levenshtein=io;gc.levenshtein=io;var Hg=Object.freeze({__proto__:null,
format:xm,formatFromArray:Ak,indent:jl,minIndent:la,changeIndent:Da,quote:Wa,articlize:Ka,findArticle:Jb,print:Gb,printNested:Rb,pad:cc,printTable:$c,printTree:Re,toArray:Ne,lines:Ng,paragraphs:yf,nonEmptyLines:ch,tokens:di,tableize:sj,unescapeCharacterEntities:Ol,base64EncodeUnicode:Ss,base64DecodeUnicode:$p,toQueryParams:tm,normalizePath:aq,joinPath:rf,newUUID:ym,createDataURI:zf,hashCode:bq,md5:Ts,reMatches:Us,stringMatch:Vs,peekRight:Ws,peekLeft:Bk,lineIndexComputer:zm,lineNumberToIndexesComputer:An,
findLineWithIndexInLineRanges:xr,regexIndexOf:cq,regexLastIndexOf:$m,lineRanges:Ck,diff:rw,empty:Xs,includes:iQ,include:jQ,startsWith:kQ,startsWithVowel:yr,endsWith:lQ,withDecimalPrecision:Ys,capitalize:dq,camelCaseString:Sl,camelize:an,truncate:Dk,truncateLeft:Am,regExpEscape:eq,succ:Fu,digitValue:Gu,times:mQ,longestCommonSubstring:Hu,applyChange:sw,applyChanges:Iu,levenshtein:io});wa("a7",Hg);var Af=lively.FreezerRuntime.recorderFor("lively.lang/number.js");Af.random=Ju;Af.randomSmallerInteger=
Ku;Af.humanReadableByteSize=Lu;Af.average=zr;Af.averageInc=Mu;Af.median=Nu;Af.between=Ou;Af.clamp=Ar;Af.sort=Nk;Af.parseLength=Pu;Af.precision=Br;Af.roundTo=Qu;Af.detent=tw;Af.toDegrees=uw;Af.toRadians=vw;Af.backoff=Zs;Af.interpolate=$s;Af.normalRandom=function(g,c){var h,d=!1;return function(k,n){if(d)return d=!1,h*n+k;do{var b=2*Math.random()-1;var e=2*Math.random()-1;var l=b*b+e*e}while(1<=l||0==l);l=Math.sqrt(-2*Math.log(l)/l);h=e*l;d=!0;return k+n*b*l}}();Af.convertLength=function(){function g(c,
h){if("cm"===h)return c;if("mm"===h)return.1*c;if("in"===h)return 2.54*c;if("px"===h)return c*g(1/96,"in");if("pt"===h)return c*g(1/72,"in");if("pc"===h)return c*g(12,"pt")}return function n(h,d,k){return d===k?h:"cm"===k?g(h,d):"cm"===d?h/g(1,k):n(n(h,d,"cm"),"cm",k)}}();var nQ=Af.normalRandom,oQ=Af.convertLength;Af.random=Ju;Af.random=Ju;Af.normalRandom=nQ;Af.normalRandom=nQ;Af.randomSmallerInteger=Ku;Af.randomSmallerInteger=Ku;Af.humanReadableByteSize=Lu;Af.humanReadableByteSize=Lu;Af.average=
zr;Af.average=zr;Af.averageInc=Mu;Af.averageInc=Mu;Af.median=Nu;Af.median=Nu;Af.between=Ou;Af.between=Ou;Af.sort=Nk;Af.sort=Nk;Af.parseLength=Pu;Af.parseLength=Pu;Af.convertLength=oQ;Af.convertLength=oQ;Af.roundTo=Qu;Af.roundTo=Qu;Af.detent=tw;Af.detent=tw;Af.toDegrees=uw;Af.toDegrees=uw;Af.toRadians=vw;Af.toRadians=vw;Af.backoff=Zs;Af.backoff=Zs;Af.interpolate=$s;Af.interpolate=$s;Af.clamp=Ar;Af.clamp=Ar;Af.precision=Br;Af.precision=Br;var Gk=Object.freeze({__proto__:null,random:Ju,normalRandom:nQ,
randomSmallerInteger:Ku,humanReadableByteSize:Lu,average:zr,averageInc:Mu,median:Nu,between:Ou,sort:Nk,parseLength:Pu,convertLength:oQ,roundTo:Qu,detent:tw,toDegrees:uw,toRadians:vw,backoff:Zs,interpolate:$s,clamp:Ar,precision:Br});wa("aH",Gk);var Ui=lively.FreezerRuntime.recorderFor("lively.lang/properties.js");Ui.all=at;Ui.allOwnPropertiesOrFunctions=Ru;Ui.own=Su;Ui.forEachOwn=Tu;Ui.nameFor=Uu;Ui.values=Vu;Ui.ownValues=fq;Ui.any=gq;Ui.allProperties=bt;Ui.hash=hq;Ui.all=at;Ui.all=at;Ui.allOwnPropertiesOrFunctions=
Ru;Ui.allOwnPropertiesOrFunctions=Ru;Ui.own=Su;Ui.own=Su;Ui.forEachOwn=Tu;Ui.forEachOwn=Tu;Ui.nameFor=Uu;Ui.nameFor=Uu;Ui.values=Vu;Ui.values=Vu;Ui.ownValues=fq;Ui.ownValues=fq;Ui.any=gq;Ui.any=gq;Ui.allProperties=bt;Ui.allProperties=bt;Ui.hash=hq;Ui.hash=hq;var Gp=Object.freeze({__proto__:null,all:at,allOwnPropertiesOrFunctions:Ru,own:Su,forEachOwn:Tu,nameFor:Uu,values:Vu,ownValues:fq,any:gq,allProperties:bt,hash:hq});wa("bi",Gp);var jo=lively.FreezerRuntime.recorderFor("lively.lang/date.js");jo.format=
Bm;jo.equals=Cm;jo.relativeTo=kl;jo.dateFormat=function(){var g=function(){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,k=function(n,b){n=String(n);for(b=b||2;n.length<b;)n="0"+n;return n};return function(n,b,e){var l=g;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(b=n,n=void 0);
n=n?new Date(n):new Date;if(isNaN(n))throw SyntaxError("invalid date");b=String(l.masks[b]||b||l.masks.default);"UTC:"==b.slice(0,4)&&(b=b.slice(4),e=!0);var a=e?"getUTC":"get",f=n[a+"Date"](),m=n[a+"Day"](),q=n[a+"Month"](),r=n[a+"FullYear"](),u=n[a+"Hours"](),v=n[a+"Minutes"](),y=n[a+"Seconds"]();a=n[a+"Milliseconds"]();var z=e?0:n.getTimezoneOffset(),B={d:f,dd:k(f),ddd:l.i18n.dayNames[m],dddd:l.i18n.dayNames[m+7],m:q+1,mm:k(q+1),mmm:l.i18n.monthNames[q],mmmm:l.i18n.monthNames[q+12],yy:String(r).slice(2),
yyyy:r,h:u%12||12,hh:k(u%12||12),H:u,HH:k(u),M:v,MM:k(v),s:y,ss:k(y),l:k(a,3),L:k(99<a?Math.round(a/10):a),t:12>u?"a":"p",tt:12>u?"am":"pm",T:12>u?"A":"P",TT:12>u?"AM":"PM",Z:e?"UTC":(String(n).match(h)||[""]).pop().replace(d,""),o:(0<z?"-":"+")+k(100*Math.floor(Math.abs(z)/60)+Math.abs(z)%60,4),S:["th","st","nd","rd"][3<f%10?0:(10!=f%100-f%10)*f%10]};return b.replace(c,function(C){return C in B?B[C]:C.slice(1,C.length-1)})}}();g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",
longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};g.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
return g}();var pQ=jo.dateFormat;jo.format=Bm;jo.format=Bm;jo.equals=Cm;jo.equals=Cm;jo.relativeTo=kl;jo.relativeTo=kl;jo.dateFormat=pQ;jo.dateFormat=pQ;var iu=Object.freeze({__proto__:null,format:Bm,equals:Cm,relativeTo:kl,dateFormat:pQ});wa("a5",iu);var Ef=lively.FreezerRuntime.recorderFor("lively.lang/promise.js");Ef.promise=oe;Ef.delay=ko;Ef.delayReject=bn;Ef.timeout=ct;Ef.timeToRun=ww;Ef.clearPendingWaitFors=function(){Object.kets(Ef.waitForClosures).forEach(function(g){delete Ef.waitForClosures[g];
clearInterval(g)})};Ef.waitFor=iq;Ef.deferred=xw;Ef.convertCallbackFun=dt;Ef.convertCallbackFunWithManyArgs=et;Ef._chainResolveNext=ny;Ef.chain=yw;Ef.promise_finally=oy;Ef.parallel=ft;Ef.newUUID=ym;Ef.pushIfNotIncluded=Lc;Ef.removeAt=oa;Ef.waitForClosures={};Object.assign(Ef.promise,{delay:Ef.delay,delayReject:Ef.delayReject,timeout:Ef.timeout,waitFor:Ef.waitFor,deferred:Ef.deferred,convertCallbackFun:Ef.convertCallbackFun,convertCallbackFunWithManyArgs:Ef.convertCallbackFunWithManyArgs,chain:Ef.chain,
finally:Ef.promise_finally,parallel:Ef.parallel});Ef.promise=oe;Ef.promise=oe;Ef.delay=ko;Ef.delay=ko;Ef.delayReject=bn;Ef.delayReject=bn;Ef.timeout=ct;Ef.timeout=ct;Ef.timeToRun=ww;Ef.timeToRun=ww;Ef.waitFor=iq;Ef.waitFor=iq;Ef.deferred=xw;Ef.deferred=xw;Ef.convertCallbackFun=dt;Ef.convertCallbackFun=dt;Ef.convertCallbackFunWithManyArgs=et;Ef.convertCallbackFunWithManyArgs=et;Ef.chain=yw;Ef.chain=yw;Ef.finally=oy;Ef.promise_finally=oy;Ef.parallel=ft;Ef.parallel=ft;Ef.default=oe;var ju=lively.FreezerRuntime.recorderFor("lively.lang/Path.js");
ju.Path=Cg;ju.inspect=jk;Object.assign(ju.Path.prototype,{get isPathAccessor(){return!0},fromPath:function(g){"string"===typeof g&&""!==g&&g!==this.splitter?(this._parts=g.split(this.splitter),this._path=g):Array.isArray(g)?(this._parts=[].concat(g),this._path=g.join(this.splitter)):(this._parts=[],this._path="");return this},setSplitter:function(g){g&&(this.splitter=g);return this},map:function(g){this._mapper=g;return this},parts:function(){return this._parts},size:function(){return this._parts.length},
slice:function(g,c){return ju.Path(this.parts().slice(g,c))},normalizePath:function(){return this._path},isRoot:function(g){return 0===this._parts.length},isIn:function(g){return this.isRoot()?!0:(g=this.get(g,-1))&&g.hasOwnProperty(this._parts[this._parts.length-1])},equals:function(g){return g&&g.isPathAccessor&&this.parts().equals(g.parts())},isParentPathOf:function(g){g=g&&g.isPathAccessor?g:ju.Path(g);var c=this.parts();g=g.parts();for(var h=0;h<c.length;h++)if(c[h]!=g[h])return!1;return!0},
relativePathTo:function(g){g=ju.Path(g);return this.isParentPathOf(g)?g.slice(this.size(),g.size()):void 0},del:function(g){if(this.isRoot())return!1;for(var c=0;c<this._parts.length-1;c++){var h=this._parts[c];if(g.hasOwnProperty(h))g=g[h];else return!1}return delete g[this._parts[this._parts.length-1]]},withParentAndKeyDo:function(g,c,h){if(this.isRoot())return h(null,null);for(var d=0;d<this._parts.length-1;d++){var k=this._parts[d];if(!g.hasOwnProperty(k)||"object"!==typeof g[k]&&"function"!==
typeof g[k])if(c)g=g[k]={};else return h(null,k);else g=g[k]}return h(g,this._parts[this._parts.length-1])},set:function(g,c,h){return this.withParentAndKeyDo(g,h,function(d,k){return d?d[k]=c:void 0})},defineProperty:function(g,c,h){return this.withParentAndKeyDo(g,h,function(d,k){return d?Object.defineProperty(d,k,c):void 0})},get:function(g,c){var h=this;return(c?this._parts.slice(0,c):this._parts).reduce(function(d,k){return d?h._mapper?h._mapper(k,d[k]):d[k]:d},g)},concat:function(g,c){return ju.Path(this.parts().concat(ju.Path(g,
c).parts()))},toString:function(){return this.normalizePath()},serializeExpr:function(){return"lively.lang.Path("+ju.inspect(this.parts())+")"},watch:function(g){if(g&&!this.isRoot()){var c=g.target,h=this.get(c,-1),d=this.parts().slice(-1)[0],k="propertyWatcher$"+d,n=h&&h.hasOwnProperty(k),b=g.uninstall,e=g.haltWhenChanged,l=g.showStack,a=h.__lookupGetter__(d),f=h.__lookupSetter__(d);c&&d&&h&&(b?n&&(delete h[d],h[d]=h[k],delete h[k]):n||(a||f?console.log(h+'["'+d+'"] is a getter/setter, watching not support'):
(h[k]=h[d],h.__defineSetter__(d,function(m){var q=h[k];if(g.onSet)g.onSet(m,q);q=h+"."+d+" changed: "+q+" -> "+m;l&&(q+="\n"+("undefined"!==typeof lively?lively.printStack():console.trace()));g.verbose&&console.log(q);if(e)debugger;return h[k]=m}),h.__defineGetter__(d,function(){if(g.onGet)g.onGet(h[k]);return h[k]}),console.log("Watcher for "+h+"."+d+" installed"))))}},debugFunctionWrapper:function(g){var c=g.target,h=this.get(c,-1),d=this.parts().slice(-1)[0],k=void 0===g.haltWhenChanged?!0:g.haltWhenChanged,
n=h&&d&&h[d],b=n&&n.isDebugFunctionWrapper;c&&d&&n&&h&&(g.uninstall?b&&(h[d]=h[d].debugTargetFunction,console.log("Uninstalled debugFunctionWrapper for "+h+"."+d)):b?console.log("debugFunctionWrapper for "+h+"."+d+" already installed"):(g=h[d]=n.wrap(function(e){var l=Array.from(arguments);if(k)debugger;return l.shift().apply(h,l)}),g.isDebugFunctionWrapper=!0,g.debugTargetFunction=n,console.log("debugFunctionWrapper for "+h+"."+d+" installed")))}});ju.default=Cg;var mi=lively.FreezerRuntime.recorderFor("lively.lang/graph.js");
mi.clone=Wu;mi.without=gt;mi.hull=jq;mi.subgraphReachableBy=Xu;mi.invert=Cr;mi.sortByReference=To;mi.reduce=Uo;mi.random=ht;mi.range=ed;mi.shuffle=Fc;mi.withoutAll=Ed;mi.flatten=vc;mi.uniq=Tb;mi.values=Yp;mi.clone=Wu;mi.clone=Wu;mi.without=gt;mi.without=gt;mi.hull=jq;mi.hull=jq;mi.subgraphReachableBy=Xu;mi.subgraphReachableBy=Xu;mi.invert=Cr;mi.invert=Cr;mi.sortByReference=To;mi.sortByReference=To;mi.reduce=Uo;mi.reduce=Uo;mi.random=ht;mi.random=ht;var Xv=Object.freeze({__proto__:null,clone:Wu,without:gt,
hull:jq,subgraphReachableBy:Xu,invert:Cr,sortByReference:To,reduce:Uo,random:ht}),jh=lively.FreezerRuntime.recorderFor("lively.lang/interval.js");jh.isInterval=Yu;jh.sort=Zu;jh.compare=lo;jh.coalesce=$u;jh.coalesceOverlapping=it;jh.mergeOverlapping=Vo;jh.intervalsInRangeDo=jt;jh.intervalsInbetween=av;jh.mapToMatchingIndexes=bv;jh.benchmark=function(){function g(c,h,d){return c.name+" "+jh.timeToRunN(function(){return c.apply(null,h,1E5)},d)+"ms"}return["Friday, 20. July 2012:\ncoalesceOverlapping: 0.0003ms\nintervalsInbetween: 0.002ms\nmapToMatchingIndexes: 0.02ms",
"vs.\n"+new Date+":",g(jh.coalesceOverlapping,[[[9,10],[1,8],[3,7],[15,20],[14,21]]],1E5),g(jh.intervalsInbetween,[0,10,[[8,10],[0,2],[3,5]]],1E5),g(jh.mapToMatchingIndexes,[jh.range(0,1E3).map(function(c){return[c,c+1]}),[[4,8],[500,504],[900,1004]]],1E3)].join("\n")};jh.range=ed;jh.timeToRunN=Bc;jh.GLOBAL="undefined"!==typeof System?System.global:"undefined"!==typeof window?window:global;jh.isInterval=Yu;jh.isInterval=Yu;jh.sort=Zu;jh.sort=Zu;jh.compare=lo;jh.compare=lo;jh.coalesce=$u;jh.coalesce=
$u;jh.coalesceOverlapping=it;jh.coalesceOverlapping=it;jh.mergeOverlapping=Vo;jh.mergeOverlapping=Vo;jh.intervalsInRangeDo=jt;jh.intervalsInRangeDo=jt;jh.intervalsInbetween=av;jh.intervalsInbetween=av;jh.mapToMatchingIndexes=bv;jh.mapToMatchingIndexes=bv;var qJ=Object.freeze({__proto__:null,isInterval:Yu,sort:Zu,compare:lo,coalesce:$u,coalesceOverlapping:it,mergeOverlapping:Vo,intervalsInRangeDo:jt,intervalsInbetween:av,mapToMatchingIndexes:bv}),cn=lively.FreezerRuntime.recorderFor("lively.lang/array-projection.js");
cn.create=cv;cn.toArray=zw;cn.originalToProjectedIndex=kq;cn.projectedToOriginalIndex=Dr;cn.transformToIncludeIndex=Bn;cn.create=cv;cn.create=cv;cn.toArray=zw;cn.toArray=zw;cn.originalToProjectedIndex=kq;cn.originalToProjectedIndex=kq;cn.projectedToOriginalIndex=Dr;cn.projectedToOriginalIndex=Dr;cn.transformToIncludeIndex=Bn;cn.transformToIncludeIndex=Bn;var rJ=Object.freeze({__proto__:null,create:cv,toArray:zw,originalToProjectedIndex:kq,projectedToOriginalIndex:Dr,transformToIncludeIndex:Bn}),Dg=
lively.FreezerRuntime.recorderFor("lively.lang/grid.js");Dg.get=Er;Dg.set=lq;Dg.getRow=dv;Dg.setRow=mo;Dg.getCol=Aw;Dg.setCol=kt;Dg.create=Bw;Dg.mapCreate=Tl;Dg.forEach=Fr;Dg.map=Gr;Dg.toObjects=Wo;Dg.tableFromObjects=mq;Dg.benchmark=function(){var g=[],c=Dg.create(1E3,200,1);var h=Dg.timeToRunN(function(){Dg.forEach(c,function(k){})},10);g.push("forEach: "+h.toFixed(2)+"ms");h=Dg.timeToRunN(function(){Dg.map(c,function(k,n,b){return n+b+Math.round(100*Math.random())})},10);g.push("map: "+h.toFixed(2)+
"ms");var d=Dg.create(1E3,2E3);h=Dg.timeToRunN(function(){d=Array(1E3);for(var k=0;1E3>k;k++)d[k]=Array(2E3);Dg.forEach(c,function(n,b,e){d[b][e]=b+e+Math.round(100*Math.random())})},10);g.push("map with forEach: "+h+"ms");g.push("--= 2012-09-22 =--\nforEach: 14.9ms\nmap: 19.8ms\nmap with forEach: 38.7ms\n");return g.join("\n")};Dg.arrayWithN=qc;Dg.timeToRunN=Bc;Dg.get=Er;Dg.get=Er;Dg.set=lq;Dg.set=lq;Dg.getRow=dv;Dg.getRow=dv;Dg.setRow=mo;Dg.setRow=mo;Dg.getCol=Aw;Dg.getCol=Aw;Dg.setCol=kt;Dg.setCol=
kt;Dg.create=Bw;Dg.create=Bw;Dg.mapCreate=Tl;Dg.mapCreate=Tl;Dg.forEach=Fr;Dg.forEach=Fr;Dg.map=Gr;Dg.map=Gr;Dg.toObjects=Wo;Dg.toObjects=Wo;Dg.tableFromObjects=mq;Dg.tableFromObjects=mq;var $B=Object.freeze({__proto__:null,get:Er,set:lq,getRow:dv,setRow:mo,getCol:Aw,setCol:kt,create:Bw,mapCreate:Tl,forEach:Fr,map:Gr,toObjects:Wo,tableFromObjects:mq}),Gj=lively.FreezerRuntime.recorderFor("lively.lang/tree.js");Gj.prewalk=Nj;Gj.postwalk=nq;Gj.find=Cn;Gj.filter=oq;Gj.map=no;Gj.mapTree=lt;Gj.flatten=
vc;Gj.detect=Gj.find;var qQ=Gj.detect;Gj.prewalk=Nj;Gj.prewalk=Nj;Gj.postwalk=nq;Gj.postwalk=nq;Gj.find=Cn;Gj.find=Cn;Gj.detect=qQ;Gj.detect=qQ;Gj.filter=oq;Gj.filter=oq;Gj.map=no;Gj.map=no;Gj.mapTree=lt;Gj.mapTree=lt;var Yv=Object.freeze({__proto__:null,prewalk:Nj,postwalk:nq,find:Cn,detect:qQ,filter:oq,map:no,mapTree:lt});wa("a4",Yv);var ku=lively.FreezerRuntime.recorderFor("lively.lang/events.js");ku.isNode="undefined"!==typeof ku.process&&ku.process.versions&&ku.process.versions.node;ku.makeEmitter=
ku.isNode?function(g,c){if(g.on&&g.removeListener)return g;var h="undefined"!==typeof System?System._nodeRequire("events"):ku.require("events");Object.assign(g,h.EventEmitter.prototype);h.EventEmitter.call(g);c&&c.maxListenerLimit&&g.setMaxListeners(c.maxListenerLimit);return g}:function(g){if(g.on&&g.removeListener)return g;g.listeners={};g.on=function(c,h){h&&(g.listeners[c]||(g.listeners[c]=[]),g.listeners[c].push(h))};g.once=function(c,h){function d(){g.removeListener(c,d);h.apply(this,arguments)}
if(h)g.on(c,d)};g.removeListener=function(c,h){g.listeners[c]&&(g.listeners[c]=g.listeners[c].filter(function(d){return d!==h}))};g.removeAllListeners=function(c){g.listeners[c]&&(g.listeners[c]=[])};g.emit=function(){var c=Array.prototype.slice.call(arguments),h=c.shift();(h=g.listeners[h])&&h.length&&h.forEach(function(d){try{d.apply(null,c)}catch(k){console.error("Error in event handler: %s",k.stack||String(k))}})};return g};var wE=ku.makeEmitter;ku.makeEmitter=wE;ku.makeEmitter=wE;var Gx=Object.freeze({__proto__:null,
makeEmitter:wE}),kk=lively.FreezerRuntime.recorderFor("lively.lang/messenger.js");kk.create=mt;kk.remove=wb;kk.pluck=Fa;kk.makeEmitter=wE;kk.newUUID=ym;kk.OFFLINE="offline";kk.ONLINE="online";kk.CONNECTING="connecting";kk.create=mt;kk.create=mt;var sJ=Object.freeze({__proto__:null,create:mt}),Eg=lively.FreezerRuntime.recorderFor("lively.lang/worker.js");Eg.fork=nt;Eg.create=Pg;Eg.makeEmitter=wE;Eg.newUUID=ym;Eg.waitFor=Te;Eg.messengerCreate=mt;Eg.Closure=Fi;Eg.isNodejs="undefined"!==typeof require&&
"undefined"!==typeof process;Eg.WorkerSetup={loadDependenciesBrowser:function(g){importScripts.apply("undefined"!==typeof self?self:this,g.scriptsToLoad||[])},loadDependenciesNodejs:function(g){(global.lively||(global.lively={})).lang=require(require("path").join(g.libLocation,"index"))},initBrowserGlobals:function(g){remoteWorker.send=function(c){postMessage(c)};g="undefined"!==typeof self?self:this;g=g.Global=g;g.window=g;g.console=g.console||function(){var c={};["log","error","warn"].forEach(function(h){c[h]=
function(){for(var d=arguments[0],k=1;k<arguments.length;k++)d=d.replace("%s",arguments[k]);remoteWorker.send({type:h,message:["[",h.toUpperCase(),"] ",d].join("")})}});return c}()},initOnMessageHandler:function(g){function c(h){h=h.data.data?h.data:h;if(remoteWorker.messenger)remoteWorker.messenger.onMessage(h);else"close"==h.action&&(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())}if(remoteWorker.on)remoteWorker.on("message",c);else remoteWorker.onmessage=c},initWorkerInterface:function(g){remoteWorker.callStringifiedFunction=
function(c,h,d){try{var k=eval("("+c+")")}catch(e){d(Error("Cannot create function from string: "+e.stack||e));return}c=k.length===h.length+1;var n=lively.lang.fun.once(function(e,l){remoteWorker.isBusy=!1;d(e,l)});remoteWorker.isBusy=!0;c&&h.push(n);try{var b=k.apply(remoteWorker,h.concat([n]))}catch(e){n(e,null);return}c||n(null,b)};remoteWorker.httpRequest=function(c){if(c.url){var h=new XMLHttpRequest,d=c.method||"GET";h.onreadystatechange=function(){4===h.readyState&&c.done&&c.done(h)};h.open(d,
c.url);h.send()}else console.log("Error, httpRequest needs url")};remoteWorker.terminateIfNotBusyIn=function(c){setTimeout(function(){remoteWorker.isBusy?remoteWorker.terminateIfNotBusyIn(c):(remoteWorker.send({type:"closed",workerReady:!1}),remoteWorker.close())},c)}},initWorkerMessenger:function(g){if(!g.useMessenger)return null;if(!lively.lang.messenger)throw Error("worker.create requires messenger.js to be loaded!");if(!lively.lang.events)throw Error("worker.create requires events.js to be loaded!");
return remoteWorker.messenger=lively.lang.messenger.create({services:{remoteEval:function(c,h){try{var d=eval(c.data.expr)}catch(k){d=k.stack||k}h.answer(c,{result:String(d)})},run:function(c,h){var d=c.data.func,k=c.data.args;d?remoteWorker.callStringifiedFunction(d,k,function(n,b){h.answer(c,{error:n?String(n):null,result:b})}):h.answer(c,{error:"no funcString"})},close:function(c,h){h.answer(c,{status:"OK"});remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}},isOnline:function(){return!0},
send:function(c,h){remoteWorker.send(c);h()},listen:function(c){c()},close:function(c){remoteWorker.send({type:"closed",workerReady:!1});remoteWorker.close()}})}};Eg.BrowserWorker={create:function(g){g=g||{};if(!g.libLocation&&!g.scriptsToLoad){var c=document.querySelector('script[src$="worker.js"]');if(!c)throw Error('Cannot find library path to start worker. Use worker.create({libLocation: "..."}) to explicitly define the path!');g.libLocation=c.src.replace(/worker.js$/,"")}c=String(function(){self.onmessage=
function(h){if("setup"!==h.data.action)throw Error("expected setup to be first message but got "+JSON.stringify(h.data));h=h.data.options||{};initBrowserGlobals(h);loadDependenciesBrowser(h);initOnMessageHandler(h);initWorkerInterface(h);initWorkerMessenger(h);postMessage({workerReady:!0})};__FUNCTIONDECLARATIONS__}).split("__lvVarRecorder.").join("").replace("__FUNCTIONDECLARATIONS__",[Eg.WorkerSetup.initBrowserGlobals,Eg.WorkerSetup.loadDependenciesBrowser,Eg.WorkerSetup.initOnMessageHandler,Eg.WorkerSetup.initWorkerInterface,
Eg.WorkerSetup.initWorkerMessenger].join("\n"));c="("+Eg.Closure.fromSource(c).getFuncSource()+")();";c=new Worker(function(h){try{var d=new Blob([h],{type:"text/javascript"})}catch(k){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,d=new BlobBuilder,d.append(h),d=d.getBlob()}return("undefined"!==typeof webkitURL?webkitURL:URL).createObjectURL(d)}(c));(function(h,d){Eg.makeEmitter(d);h.scriptsToLoad||(h.scriptsToLoad="base.js events.js object.js collection.js function.js string.js number.js date.js messenger.js worker.js".split(" ").map(function(n){return h.libLocation+
n}));var k=Object.keys(h).reduce(function(n,b){"function"!==typeof h[b]&&(n[b]=h[b]);return n},{});d.onmessage=function(n){void 0!==n.data.workerReady?(d.ready=!!n.data.workerReady,d.ready?d.emit("ready"):d.emit("close")):d.emit("message",n.data)};d.errors=[];d.onerror=function(n){console.error(n);d.errors.push(n);d.emit("error",n)};d.postMessage({action:"setup",options:k})})(g,c);return c}};Eg.NodejsWorker={debug:!1,initCodeFileCreated:!1,create:function(g){g=g||{};var c,h=Eg.makeEmitter({ready:!1,
errors:[],postMessage:function(d){c?h.ready?c.send(d):h.emit("error",Error("nodejs worker process not ready or already closed")):h.emit("error",Error("nodejs worker process not yet created"))}});Eg.NodejsWorker.startWorker(g,function(d,k){d?(h.ready=!1,h.emit("error",d)):(c=k,c.on("message",function(n){Eg.NodejsWorker.debug&&console.log("[WORKER PARENT] got message:",n);h.emit("message",n)}),c.on("close",function(){console.log("[WORKER PARENT] worker closed");h.emit("close")}),c.on("error",function(n){console.log("[WORKER PARENT] error ",
n);h.errors.push(n);h.emit("error",n)}),h.ready=!0,h.emit("ready"))});return h},workerSetupFunction:function(){var g=process;console.log("[WORKER] Starting init");g.on("message",function(c){if("setup"!==c.action)throw Error("expected setup to be first message but got "+JSON.stringify(c.data));g.removeAllListeners("message");c=c.data.options||{};console.log("[WORKER] running setup with options",c);loadDependenciesNodejs(c);initOnMessageHandler(c);initWorkerInterface(c);initWorkerMessenger(c);g.send({workerReady:!0})});
__FUNCTIONDECLARATIONS__},ensureInitCodeFile:function(g,c,h){var d=require("path"),k=require("os"),n=require("fs");k=d.join(k.tmpDir(),"lively-nodejs-workers/");var b=d.join(k,"nodejs-worker-init.js");Eg.NodejsWorker.initCodeFileCreated?n.exists(b,function(e){e?h(null,b):Eg.NodejsWorker.createWorkerCodeFile(g,b,c,h)}):Eg.NodejsWorker.createWorkerCodeFile(g,b,c,h)},createWorkerCodeFile:function(g,c,h,d){g=require("path");var k=require("fs"),n=require("child_process").exec;n("mkdir -p "+g.dirname(c),
function(b,e,l){b?d(Error(["[WORKER PARENT] Could not create worker temp dir:",e,l].join("\n"))):k.writeFile(c,h,function(a){Eg.NodejsWorker.debug&&console.log("worker code file %s created",c);Eg.NodejsWorker.initCodeFileCreated=!0;d(a,c)})})},startWorker:function(g,c){var h=require("util"),d=require("child_process").fork,k=String(Eg.NodejsWorker.workerSetupFunction).replace("__FUNCTIONDECLARATIONS__",[Eg.WorkerSetup.loadDependenciesNodejs,Eg.WorkerSetup.initOnMessageHandler,Eg.WorkerSetup.initWorkerInterface,
Eg.WorkerSetup.initWorkerMessenger].join("\n"));h=h.format("(%s)();\n",k);Eg.NodejsWorker.ensureInitCodeFile(g,h,function(n,b){if(n)return c(n);var e=d(b,{});Eg.NodejsWorker.debug&&console.log("worker forked");e.on("message",function(l){"pong"===l.action?console.log("[WORKER pong] ",l):"log"===l.action&&console.log("[Message from WORKER] ",l.data)});e.once("message",function(l){Eg.NodejsWorker.debug&&console.log("worker setup done");c(null,e,l)});e.on("close",function(){Eg.NodejsWorker.debug&&console.log("[WORKER PARENT] worker closed")});
e.send({action:"setup",data:{options:g}});global.WORKER=e})}};Eg.fork=nt;Eg.fork=nt;Eg.create=Pg;Eg.create=Pg;var tJ=Object.freeze({__proto__:null,fork:nt,create:Pg}),Vc=lively.FreezerRuntime.recorderFor("lively.lang/index.js");Vc.createLivelyLangObject=function(){return{chain:Vc.chain,noConflict:Vc.noConflict,installGlobals:Vc.installGlobals,uninstallGlobals:Vc.uninstallGlobals,globalInterfaceSpec:Vc.globalInterfaceSpec,toString:function(){return"[object lively.lang]"}}};Vc.globalInstall=ev;Vc.chain=
Ri;Vc.createChain=function(g,c){return Object.keys(g).reduce(function(h,d){h[d]=function(){var k=Array.prototype.slice.call(arguments);k=g[d].apply(null,[c].concat(k));return Vc.chain(k)};return h},{value:function(){return c}})};Vc.noConflict=Ul;Vc.installGlobals=Cw;Vc.installProperty=function(g,c){if(!g.isIn(Vc.livelyLang))throw c=Error("property not provided by lively.lang: "+g),console.error(c.stack||c),c;g=g.get(Vc.livelyLang);if("function"===typeof g&&"prototype"===c.slice(-2,-1).toString()){var h=
g;g=function(){var d=Array.prototype.slice.call(arguments);d.unshift(this);return h.apply(null,d)};g.toString=function(){return h.toString()}}c.set(Vc.GLOBAL,g,!0)};Vc.uninstallGlobals=pq;Vc.string=Hg;Vc.num=Gk;Vc.fun=Zk;Vc.Closure=Fi;Vc.arr=Qe;Vc.obj=lf;Vc.properties=Gp;Vc.date=iu;Vc.promise=oe;Vc.Path=Cg;Vc.graph=Xv;Vc.interval=qJ;Vc.arrayProjection=rJ;Vc.Group=Pm;Vc.grid=$B;Vc.tree=Yv;Vc.events=Gx;Vc.messenger=sJ;Vc.worker=tJ;Vc.worker=tJ;Vc.worker=tJ;Vc.messenger=sJ;Vc.messenger=sJ;Vc.events=
Gx;Vc.events=Gx;Vc.tree=Yv;Vc.tree=Yv;Vc.grid=$B;Vc.grid=$B;Vc.arrayProjection=rJ;Vc.arrayProjection=rJ;Vc.interval=qJ;Vc.interval=qJ;Vc.graph=Xv;Vc.graph=Xv;Vc.date=iu;Vc.date=iu;Vc.properties=Gp;Vc.properties=Gp;Vc.obj=lf;Vc.obj=lf;Vc.arr=Qe;Vc.arr=Qe;Vc.fun=Zk;Vc.fun=Zk;Vc.num=Gk;Vc.num=Gk;Vc.string=Hg;Vc.string=Hg;Vc.Closure=Fi;Vc.Closure=Fi;Vc.promise=oe;Vc.promise=oe;Vc.Path=Cg;Vc.Path=Cg;Vc.Group=Pm;Vc.Group=Pm;Vc.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:
"undefined"!==typeof self?self:void 0;Vc.isNode="undefined"!==typeof Vc.process&&Vc.process.env&&"function"===typeof Vc.process.exit;Vc.globalInterfaceSpec=[{action:"installMethods",target:"Array",sources:["arr"],methods:["from","genN","range","withN"]},{action:"installMethods",target:"Array.prototype",sources:["arr"],methods:"all any batchify clear clone collect compact delimWith detect doAndContinue each equals filterByKey findAll first flatten forEachShowingProgress grep groupBy groupByKey histogram include inject intersect invoke last mapAsync mapAsyncSeries mask max min mutableCompact nestedDelay partition pluck pushAll pushAllAt pushAt pushIfNotIncluded reMatches reject rejectByKey remove removeAt replaceAt rotate shuffle size sortBy sortByKey sum swap toArray toTuples union uniq uniqBy without withoutAll zip".split(" "),
alias:[["select","filter"]]},{action:"installMethods",target:"Date",sources:["date"],methods:[]},{action:"installMethods",target:"Date.prototype",sources:["date"],methods:["equals","format","relativeTo"]},{action:"installMethods",target:"Function",sources:["fun"],methods:["fromString"]},{action:"installMethods",target:"Function.prototype",sources:["fun"],methods:"addToObject argumentNames asScript asScriptOf binds curry delay functionNames localFunctionNames getOriginal getVarMapping logCalls logCompletion logErrors qualifiedMethodName setProperty traceCalls wrap".split(" ")},
{action:"installMethods",target:"Number",sources:["num"],methods:[]},{action:"installMethods",target:"Number.prototype",sources:["num"],methods:["detent","randomSmallerInteger","roundTo","toDegrees","toRadians"]},{action:"installMethods",target:"Object",sources:["obj"],methods:"addScript clone deepCopy extend inherit isArray isBoolean isElement isEmpty isFunction isNumber isObject isRegExp isString isUndefined merge mergePropertyInHierarchy values valuesInPropertyHierarchy".split(" ")},{action:"installMethods",
target:"Object.prototype",sources:["obj"],methods:[]},{action:"installMethods",target:"String.prototype",sources:["string"],methods:"camelize capitalize digitValue empty hashCode include pad regExpEscape startsWithVowel succ times toArray toQueryParams truncate".split(" ")},{action:"installObject",target:"Numbers",source:"num",methods:"average between convertLength humanReadableByteSize median normalRandom parseLength random sort".split(" ")},{action:"installObject",target:"Properties",source:"properties",
methods:"all allOwnPropertiesOrFunctions allProperties any forEachOwn hash nameFor own ownValues values".split(" ")},{action:"installObject",target:"Strings",source:"string",methods:"camelCaseString createDataURI diff format formatFromArray indent lineIndexComputer lines md5 newUUID nonEmptyLines pad paragraphs peekLeft peekRight print printNested printTable printTree quote reMatches stringMatch tableize tokens unescapeCharacterEntities withDecimalPrecision".split(" ")},{action:"installObject",target:"Objects",
source:"obj",methods:"asObject equals inspect isMutableType safeToString shortPrintStringOf typeStringOf".split(" ")},{action:"installObject",target:"Functions",source:"fun",methods:"all compose composeAsync createQueue debounce debounceNamed either extractBody flip notYetImplemented once own throttle throttleNamed timeToRun timeToRunN waitFor workerWithCallbackQueue wrapperChain".split(" ")},{action:"installObject",target:"Grid",source:"grid"},{action:"installObject",target:"Interval",source:"interval"},
{action:"installObject",target:"lively.ArrayProjection",source:"arrayProjection"},{action:"installObject",target:"lively.Closure",source:"Closure"},{action:"installObject",target:"lively.Grouping",source:"Group"},{action:"installObject",target:"lively.PropertyPath",source:"Path"},{action:"installObject",target:"lively.Worker",source:"worker"},{action:"installObject",target:"lively.Class",source:"classHelper"}];var uJ=Vc.createLivelyLangObject();Vc.livelyLang=uJ;Vc.livelyLang=uJ;Vc.livelyLang=uJ;Vc.globalInstall=
ev;Vc.globalInstall=ev;Vc.chain=Ri;Vc.chain=Ri;Vc.noConflict=Ul;Vc.noConflict=Ul;Vc.installGlobals=Cw;Vc.installGlobals=Cw;Vc.uninstallGlobals=pq;Vc.uninstallGlobals=pq;var r1=Object.freeze({__proto__:null,worker:tJ,messenger:sJ,events:Gx,tree:Yv,grid:$B,arrayProjection:rJ,interval:qJ,graph:Xv,date:iu,properties:Gp,obj:lf,arr:Qe,fun:Zk,num:Gk,string:Hg,Closure:Fi,promise:oe,Path:Cg,Group:Pm,livelyLang:uJ,globalInstall:ev,chain:Ri,noConflict:Ul,installGlobals:Cw,uninstallGlobals:pq}),Fh=lively.FreezerRuntime.recorderFor("lively.graphics/convert-css-length.js");
Fh.parseUnit=function(g,c){c||(c=[0,""]);g=String(g);var h=parseFloat(g,10);c[0]=h;c[1]=g.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return c};Fh.unit=function(g){return Fh.parseUnit(g)[1]};Fh.unitLess=function(g){return Fh.parseUnit(g)[0]};Fh.genericCssLengthParser=Xo;Fh.cssLengthToPixels=Hj;Fh.baseFontSize="16px";if(System.get("@system-env").browser)try{Fh.newBaseFontSize=Fh.genericCssLengthParser(Fh.baseFontSize)(window.getComputedStyle(document.body).fontSize),Fh.newBaseFontSize&&"NaN"!==Fh.newBaseFontSize.slice(0,
3)&&(Fh.baseFontSize=Fh.newBaseFontSize)}catch(g){}Fh.genericCssLengthParser=Xo;Fh.genericCssLengthParser=Xo;var rQ=Fh.genericCssLengthParser(Fh.baseFontSize);Fh.parseCssLength=rQ;Fh.parseCssLength=rQ;Fh.parseCssLength=rQ;Fh.cssLengthToPixels=Hj;Fh.cssLengthToPixels=Hj;var id=lively.FreezerRuntime.recorderFor("lively.graphics/geometry-2d.js");id.rect=Ff;id.pt=nf;id.num=Gk;id.string=Hg;id.grid=$B;id.cssLengthToPixels=Hj;var Gf=function(g,c){this.x=g||0;this.y=c||0};Gf.ensure=function(g){return g instanceof
id.Point?g:new id.Point(g.x,g.y)};Gf.polar=function(g,c){return new id.Point(g*Math.cos(c),g*Math.sin(c))};Gf.random=function(g){return new id.Point(id.num.randomSmallerInteger(g.x),id.num.randomSmallerInteger(g.y))};Gf.fromLiteral=function(g){return id.pt(g.x,g.y)};Gf.fromTuple=function(g){return id.pt(g[0],g[1])};Gf.prototype.getX=function(){return this.x};Gf.prototype.getY=function(){return this.y};Gf.prototype.toFixed=function(g){return new id.Point(this.x.toFixed(g),this.y.toFixed(g))};Gf.prototype.addPt=
function(g){return new id.Point(this.x+g.x,this.y+g.y)};Gf.prototype.addXY=function(g,c){return new id.Point(this.x+g,this.y+c)};Gf.prototype.midPt=function(g){return new id.Point((this.x+g.x)/2,(this.y+g.y)/2)};Gf.prototype.subPt=function(g){return new id.Point(this.x-g.x,this.y-g.y)};Gf.prototype.subXY=function(g,c){return new id.Point(this.x-g,this.y-c)};Gf.prototype.scaleBy=function(g,c){return new id.Point(this.x*g,this.y*(c||g))};Gf.prototype.scaleByPt=function(g){return new id.Point(this.x*
g.x,this.y*g.y)};Gf.prototype.negated=function(){return new id.Point(-this.x,-this.y)};Gf.prototype.inverted=function(){return new id.Point(1/this.x,1/this.y)};Gf.prototype.invertedSafely=function(){return new id.Point(this.x&&1/this.x,this.y&&1/this.y)};Gf.prototype.lessPt=function(g){return this.x<g.x&&this.y<g.y};Gf.prototype.leqPt=function(g){return this.x<=g.x&&this.y<=g.y};Gf.prototype.eqPt=function(g){return this.x==g.x&&this.y==g.y};Gf.prototype.equals=function(g){return this.x==g.x&&this.y==
g.y};Gf.prototype.withX=function(g){return id.pt(g,this.y)};Gf.prototype.withY=function(g){return id.pt(this.x,g)};Gf.prototype.copy=function(){return new id.Point(this.x,this.y)};Gf.prototype.minPt=function(g,c){c||(c=new id.Point(0,0));c.x=Math.min(this.x,g.x);c.y=Math.min(this.y,g.y);return c};Gf.prototype.maxPt=function(g,c){c||(c=new id.Point(0,0));c.x=Math.max(this.x,g.x);c.y=Math.max(this.y,g.y);return c};Gf.prototype.random=function(){return id.Point.random(this)};Gf.prototype.normalized=
function(){var g=this.r();return id.pt(this.x/g,this.y/g)};Gf.prototype.fastNormalized=function(){var g=this.fastR();return id.pt(this.x/g,this.y/g)};Gf.prototype.dotProduct=function(g){return this.x*g.x+this.y*g.y};Gf.prototype.matrixTransform=function(g,c){var h=g.a*this.x+g.c*this.y+g.e;g=g.b*this.x+g.d*this.y+g.f;return c?Object.assign(c,{x:h,y:g}):id.pt(h,g)};Gf.prototype.matrixTransformDirection=function(g,c){var h=g.a*this.x+g.c*this.y;g=g.b*this.x+g.d*this.y;return c?Object.assign(c,{x:h,
y:g}):id.pt(h,g)};Gf.prototype.griddedBy=function(g){return id.pt(this.x-this.x%g.x,this.y-this.y%g.y)};Gf.prototype.roundTo=function(g){return new id.Point(id.num.roundTo(this.x,g),id.num.roundTo(this.y,g))};Gf.prototype.dist=function(g){var c=this.x-g.x;g=this.y-g.y;return Math.sqrt(c*c+g*g)};Gf.prototype.distSquared=function(g){var c=this.x-g.x;g=this.y-g.y;return c*c+g*g};Gf.prototype.nearestPointOnLineBetween=function(g,c){if(g.x==c.x)return id.pt(g.x,this.y);if(g.y==c.y)return id.pt(this.x,
g.y);var h=g.x;g=g.y;var d=c.x-h;c=c.y-g;var k=((this.y-g)/d+(this.x-h)/c)/(d/c+c/d);return id.pt(h+k*d,g+k*c)};Gf.prototype.interpolate=function(g,c,h){return void 0===h||h?id.pt(id.num.interpolate(g,this.x,c.x),id.num.interpolate(g,this.y,c.y)):id.Point.polar(id.num.interpolate(g,this.r(),c.r()),id.num.interpolate(g,this.theta(),c.theta()))};Gf.prototype.r=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Gf.prototype.fastR=function(){for(var g=this.x*this.x+this.y*this.y,c=17,h=0;6>h;h++)c=
(c+g/c)/2;return c};Gf.prototype.theta=function(){return Math.atan2(this.y,this.x)};Gf.prototype.asRectangle=function(){return new id.Rectangle(this.x,this.y,0,0)};Gf.prototype.extent=function(g){return new id.Rectangle(this.x,this.y,g.x,g.y)};Gf.prototype.extentAsRectangle=function(){return new id.Rectangle(0,0,this.x,this.y)};Gf.prototype.lineTo=function(g){return new id.Line(this,g)};Gf.prototype.toTuple=function(){return[this.x,this.y]};Gf.prototype.toLiteral=function(){return{x:this.x,y:this.y}};
Gf.prototype.toString=function(g){return void 0===g||g?id.string.format("pt(%1.f,%1.f)",this.x,this.y):id.string.format("pt(%10.d,%10.d)",this.x,this.y)};Gf.prototype.inspect=function(){return JSON.stringify(this)};Gf.prototype.__serialize__=function(){return{__expr__:this.toString(!1),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}};$jscomp.global.Object.defineProperties(Gf.prototype,{isPoint:{configurable:!0,enumerable:!0,get:function(){return!0}}});wa("ar",Gf);id.Point=Gf;var Pd=function(g,
c,h,d){this.x=g||0;this.y=c||0;this.width=h||0;this.height=d||0};Pd.fromAny=function(g,c){return id.rect(g.minPt(c),g.maxPt(c))};Pd.fromLiteral=function(g){return new id.Rectangle(g.x,g.y,g.width,g.height)};Pd.fromTuple=function(g){return new id.Rectangle(g[0],g[1],g[2],g[3])};Pd.unionPts=function(g){for(var c=g[0],h=g[0],d=1;d<g.length;d++)c=c.minPt(g[d]),h=h.maxPt(g[d]);return id.rect(c,h)};Pd.ensure=function(g){return g instanceof id.Rectangle?g:new id.Rectangle(g.x,g.y,g.width,g.height)};Pd.fromElement=
function(g){if("function"===typeof g.getBoundingClientRect){var c=g.getBoundingClientRect();return id.rect(c.left,c.top,c.width,c.height)}if("http://www.w3.org/1999/xhtml"==g.namespaceURI){c=id.cssLengthToPixels(g.style.left||"0px");var h=id.cssLengthToPixels(g.style.top||"0px"),d=id.cssLengthToPixels(g.style.width||"0px");g=id.cssLengthToPixels(g.style.hieght||"0px");return new id.Rectangle(c,h,d,g)}if("http://www.w3.org/2000/svg"==g.namespaceURI)return new id.Rectangle(g.x.baseVal.value,g.y.baseVal.value,
g.width.baseVal.value,g.height.baseVal.value);throw Error("Cannot create Rectangle from "+g);};Pd.inset=function(g,c,h,d){void 0===c&&(c=g);void 0===h&&(h=g);void 0===d&&(d=c);return new id.Rectangle(g,c,h-g,d-c)};Pd.prototype.getX=function(){return this.x};Pd.prototype.getY=function(){return this.y};Pd.prototype.getWidth=function(){return this.width};Pd.prototype.getHeight=function(){return this.height};Pd.prototype.copy=function(){return new id.Rectangle(this.x,this.y,this.width,this.height)};Pd.prototype.toFixed=
function(g){return new id.Rectangle(this.x.toFixed(g),this.y.toFixed(g),this.width.toFixed(g),this.height.toFixed(g))};Pd.prototype.withWidth=function(g){return new id.Rectangle(this.x,this.y,g,this.height)};Pd.prototype.withHeight=function(g){return new id.Rectangle(this.x,this.y,this.width,g)};Pd.prototype.withX=function(g){return new id.Rectangle(g,this.y,this.width,this.height)};Pd.prototype.withY=function(g){return new id.Rectangle(this.x,g,this.width,this.height)};Pd.prototype.withExtent=function(g){return new id.Rectangle(this.x,
this.y,g.x,g.y)};Pd.prototype.withTopLeft=function(g){return id.Rectangle.fromAny(g,this.bottomRight())};Pd.prototype.withTopRight=function(g){return id.Rectangle.fromAny(this.bottomLeft(),g)};Pd.prototype.withBottomRight=function(g){return id.Rectangle.fromAny(g,this.topLeft())};Pd.prototype.withBottomLeft=function(g){return id.Rectangle.fromAny(g,this.topRight())};Pd.prototype.withLeftCenter=function(g){return new id.Rectangle(g.x,this.y,this.width+(this.x-g.x),this.height)};Pd.prototype.withRightCenter=
function(g){return new id.Rectangle(this.x,this.y,g.x-this.x,this.height)};Pd.prototype.withTopCenter=function(g){return new id.Rectangle(this.x,g.y,this.width,this.height+(this.y-g.y))};Pd.prototype.withBottomCenter=function(g){return new id.Rectangle(this.x,this.y,this.width,g.y-this.y)};Pd.prototype.withCenter=function(g){return new id.Rectangle(g.x-this.width/2,g.y-this.height/2,this.width,this.height)};Pd.prototype.insetBy=function(g){return new id.Rectangle(this.x+g,this.y+g,this.width-2*g,
this.height-2*g)};Pd.prototype.insetByPt=function(g){return new id.Rectangle(this.x+g.x,this.y+g.y,this.width-2*g.x,this.height-2*g.y)};Pd.prototype.grid=function(g,c){var h=this.width/c,d=this.height/g;return id.grid.mapCreate(g,c,function(k,n){return new id.Rectangle(h*n,d*k,h,d)})};Pd.prototype.divide=function(g){var c=this;return g.map(function(h){return id.rect(c.x+c.width*h.x,c.y+c.height*h.y,c.width*h.width,c.height*h.height)})};Pd.prototype.toTuple=function(){return[this.x,this.y,this.width,
this.height]};Pd.prototype.lineTo=function(g){var c=this.center(),h=g.center();h=c.lineTo(h);c=this.lineIntersection(h)[0];g=g.lineIntersection(h)[0];return c&&g&&c.lineTo(g)};Pd.prototype.equals=function(g){return g?this.x==g.x&&this.y==g.y&&this.width==g.width&&this.height==g.height:!1};Pd.prototype.inspect=function(){return JSON.stringify(this)};Pd.prototype.topLeft=function(){return new id.Point(this.x,this.y)};Pd.prototype.topRight=function(){return new id.Point(this.maxX(),this.y)};Pd.prototype.bottomRight=
function(){return new id.Point(this.maxX(),this.maxY())};Pd.prototype.bottomLeft=function(){return new id.Point(this.x,this.maxY())};Pd.prototype.leftCenter=function(){return new id.Point(this.x,this.center().y)};Pd.prototype.rightCenter=function(){return new id.Point(this.maxX(),this.center().y)};Pd.prototype.topCenter=function(){return new id.Point(this.center().x,this.y)};Pd.prototype.bottomCenter=function(){return new id.Point(this.center().x,this.maxY())};Pd.prototype.extent=function(){return new id.Point(this.width,
this.height)};Pd.prototype.center=function(){return new id.Point(this.x+this.width/2,this.y+this.height/2)};Pd.prototype.topEdge=function(){return new id.Line(this.topLeft(),this.topRight())};Pd.prototype.bottomEdge=function(){return new id.Line(this.bottomLeft(),this.bottomRight())};Pd.prototype.leftEdge=function(){return new id.Line(this.topLeft(),this.bottomLeft())};Pd.prototype.rightEdge=function(){return new id.Line(this.topRight(),this.bottomRight())};Pd.prototype.edges=function(){return[this.topEdge(),
this.rightEdge(),this.bottomEdge(),this.leftEdge()]};Pd.prototype.allPoints=function(){for(var g=this.x,c=this.y,h=this.width,d=this.height,k=[],n=c;n<c+d;n++)for(var b=g;b<g+h;b++)k.push(id.pt(b,n));return k};Pd.prototype.isNonEmpty=function(g){return 0<this.width&&0<this.height};Pd.prototype.containsRect=function(g){return this.x<=g.x&&this.y<=g.y&&g.maxX()<=this.maxX()&&g.maxY()<=this.maxY()};Pd.prototype.intersects=function(g){return this.intersection(g).isNonEmpty()};Pd.prototype.containsPoint=
function(g){return this.x<=g.x&&g.x<=this.x+this.width&&this.y<=g.y&&g.y<=this.y+this.height};Pd.prototype.translatedBy=function(g){return new id.Rectangle(this.x+g.x,this.y+g.y,this.width,this.height)};Pd.prototype.scaleByRect=function(g){return new id.Rectangle(this.x+g.x*this.width,this.y+g.y*this.height,g.width*this.width,g.height*this.height)};Pd.prototype.scaleRectIn=function(g){return new id.Rectangle((this.x-g.x)/g.width,(this.y-g.y)/g.height,this.width/g.width,this.height/g.height)};Pd.prototype.scaleRectTo=
function(g){var c,h;this.width>this.height?h=this.width:c=this.height;g=h?g.width/h:g.height/c;return this.withExtent(this.extent().scaleBy(g)).withCenter(this.center())};Pd.prototype.expandBy=function(g){return this.insetBy(0-g)};Pd.prototype.translateForInclusion=function(g){var c=g.x,h=g.y,d=c+g.width,k=h+g.height;d>this.right()&&(c-=d-this.right());k>this.bottom()&&(h-=k-this.bottom());c<this.x&&(c=this.x);h<this.y&&(h=this.y);return id.rect(c,h,g.width,g.height)};Pd.prototype.transformRectForInclusion=
function(g){var c=this.topLeft().maxPt(g.topLeft());g=c.addPt(g.extent());g=this.bottomRight().minPt(g);return id.rect(c,g)};Pd.prototype.insetByRect=function(g){return new id.Rectangle(this.x+g.left(),this.y+g.top(),this.width-(g.left()+g.right()),this.height-(g.top()+g.bottom()))};Pd.prototype.outsetByRect=function(g){return new id.Rectangle(this.x-g.left(),this.y-g.top(),this.width+(g.left()+g.right()),this.height+(g.top()+g.bottom()))};Pd.prototype.interpolate=function(g,c){var h=this.topLeft(),
d=this.bottomRight(),k=c.topLeft();c=c.bottomRight();return id.Rectangle.fromAny(h.interpolate(g,k),d.interpolate(g,c))};Pd.prototype.intersection=function(g){var c=Math.max(this.x,g.x),h=Math.max(this.y,g.y);return new id.Rectangle(c,h,Math.min(this.x+this.width,g.x+g.width)-c,Math.min(this.y+this.height,g.y+g.height)-h)};Pd.prototype.union=function(g){return id.rect(this.topLeft().minPt(g.topLeft()),this.bottomRight().maxPt(g.bottomRight()))};Pd.prototype.lineIntersection=function(g){return this.edges().map(function(c){return c.intersection(g)}).filter(function(c){return!!c})};
Pd.prototype.dist=function(g){var c=this.closestPointToPt(g.center());g=g.closestPointToPt(c);return c.dist(g)};Pd.prototype.relativeToAbsPoint=function(g){return new id.Point(this.x+this.width*g.x,this.y+this.height*g.y)};Pd.prototype.closestPointToPt=function(g){return id.pt(Math.min(Math.max(this.x,g.x),this.maxX()),Math.min(Math.max(this.y,g.y),this.maxY()))};Pd.prototype.maxX=function(){return this.x+this.width};Pd.prototype.maxY=function(){return this.y+this.height};Pd.prototype.realWidth=function(){return 0>
this.x?-this.x+this.width:this.width};Pd.prototype.realHeight=function(){return 0>this.y?-this.y+this.height:this.height};Pd.prototype.area=function(){return(0>this.width&&0>this.height?-1:1)*this.width*this.height};Pd.prototype.randomPoint=function(){return id.Point.random(id.pt(this.width,this.height)).addPt(this.topLeft())};Pd.prototype.constrainPt=function(g){return g.maxPt(this.topLeft()).minPt(this.bottomRight())};Pd.prototype.left=function(){return this.x};Pd.prototype.right=function(){return this.maxX()};
Pd.prototype.top=function(){return this.y};Pd.prototype.bottom=function(){return this.maxY()};Pd.prototype.toInsetTuple=function(){return[this.left(),this.top(),this.right(),this.bottom()]};Pd.prototype.toAttributeValue=function(g){g=.01;var c=[this.left()];this.top()===this.bottom()&&this.left()===this.right()?this.top()===this.left()&&c.push(this.top()):c=c.concat([this.top(),this.right(),this.bottom()]);return c.invoke("roundTo",g||.01)};Pd.prototype.toLiteral=function(){return{x:this.x,y:this.y,
width:this.width,height:this.height}};Pd.prototype.partNamed=function(g){return this[g].call(this)};Pd.prototype.withPartNamed=function(g,c){return this[this.setterName(g)].call(this,c)};Pd.prototype.setterName=function(g){return"with"+g[0].toUpperCase()+g.slice(1)};Pd.prototype.partNameNear=function(g,c,h){g=this.partNameNearest(g,c);return c.dist(this.partNamed(g))<h?g:null};Pd.prototype.partNameNearest=function(g,c){for(var h=1E99,d,k=0;k<g.length;k++){d=g[k];var n=c.dist(this.partNamed(d));if(n<
h){var b=d;h=n}}return b};Pd.prototype.toString=function(){return id.string.format("rect(%s,%s,%s,%s)",this.x,this.y,this.width,this.height)};Pd.prototype.__serialize__=function(){return{__expr__:this.toString(),bindings:{"lively.graphics/geometry-2d.js":["rect"]}}};$jscomp.global.Object.defineProperties(Pd.prototype,{corners:{configurable:!0,enumerable:!0,get:function(){return["topLeft","topRight","bottomRight","bottomLeft"]}},sides:{configurable:!0,enumerable:!0,get:function(){return["leftCenter",
"rightCenter","topCenter","bottomCenter"]}},isRectangle:{configurable:!0,enumerable:!0,get:function(){return!0}}});wa("a1",Pd);id.Rectangle=Pd;var Aj=function(g,c,h){g?g instanceof id.Point?(c=c||0,void 0===h&&(h=id.pt(1,1)),this.a=this.ensureNumber(h.x*Math.cos(c)),this.b=this.ensureNumber(h.y*Math.sin(c)),this.c=this.ensureNumber(h.x*-Math.sin(c)),this.d=this.ensureNumber(h.y*Math.cos(c)),this.e=this.ensureNumber(g.x),this.f=this.ensureNumber(g.y),1<this.a&&(this.a=Math.round(this.a*Math.pow(10,
2))/Math.pow(10,2)),1<this.d&&(this.d=Math.round(this.d*Math.pow(10,2))/Math.pow(10,2))):this.fromMatrix(g):(this.a=this.d=1,this.b=this.c=this.e=this.f=0)};Aj.prototype.copy=function(){return new id.Transform(this)};Aj.prototype.fromMatrix=function(g){this.a=this.ensureNumber(g.a);this.b=this.ensureNumber(g.b);this.c=this.ensureNumber(g.c);this.d=this.ensureNumber(g.d);this.e=this.ensureNumber(g.e);this.f=this.ensureNumber(g.f)};Aj.prototype.getRotation=function(){var g=id.num.toDegrees(Math.atan2(-this.c,
this.a));return Math.abs(g)<this.eps?0:g};Aj.prototype.getScale=function(){var g=this.a,c=this.c;g=Math.sqrt(g*g+c*c);return Math.abs(g-1)<this.eps?1:g};Aj.prototype.getScalePoint=function(){var g=this.a,c=this.b,h=this.c,d=this.d,k=Math.atan2(-h,g);return id.pt(Math.sqrt(g*g+h*h),Math.abs(c)>Math.abs(d)?c/Math.sin(k):d/Math.cos(k))};Aj.prototype.getTranslation=function(){return id.pt(this.e,this.f)};Aj.prototype.isTranslation=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d};Aj.prototype.toSVGAttributeValue=
function(){var g=this.getTranslation();g="translate("+g.x+","+g.y+")";var c=this.getRotation(),h=this.getScalePoint();0!=c&&(g+=" rotate("+this.getRotation()+")");if(1!=h.x||1!=h.y)g+=" scale("+h.x+","+h.y+")";return g};Aj.prototype.toCSSValue=function(g){var c="",h=this.getTranslation();c+="translate("+h.x.toFixed(2)+"px,"+h.y.toFixed(2)+"px)";if(g){h=g.width/2;var d=g.height/2;c+=" translate("+h.toFixed(2)+"px,"+d.toFixed(2)+"px)"}0!=this.getRotation()&&(c+=" rotate("+this.getRotation().toFixed(2)+
"deg)");g&&(h=g.width/2,d=g.height/2,c+=" translate("+(-1*h).toFixed(2)+"px,"+(-1*d).toFixed(2)+"px)");g=this.getScalePoint();if(1!=g.x||1!=g.y)c+=" scale("+g.x.toFixed(2)+","+g.y.toFixed(2)+")";return c};Aj.prototype.toCSSTransformString=function(){var g=this.getRotation(),c=this.getScale();return"translate("+this.e+"px,"+this.f+"px) rotate("+g+"deg) scale("+c+","+c+")"};Aj.prototype.toString=function(){return this.toCSSTransformString()};Aj.prototype.toMatrix=function(){return this.copy()};Aj.prototype.transformPoint=
function(g,c){return g.matrixTransform(this,c)};Aj.prototype.transformDirection=function(g,c){return g.matrixTransformDirection(this,c)};Aj.prototype.matrixTransformForMinMax=function(g,c,h){var d=this.a*g.x+this.c*g.y+this.e;g=this.b*g.x+this.d*g.y+this.f;d>h.x&&(h.x=d);g>h.y&&(h.y=g);d<c.x&&(c.x=d);g<c.y&&(c.y=g)};Aj.prototype.transformRectToRect=function(g){var c=id.pt(Infinity,Infinity),h=id.pt(-Infinity,-Infinity);this.matrixTransformForMinMax(g.topLeft(),c,h);this.matrixTransformForMinMax(g.bottomRight(),
c,h);this.isTranslation()||(this.matrixTransformForMinMax(g.topRight(),c,h),this.matrixTransformForMinMax(g.bottomLeft(),c,h));return id.rect(c,h)};Aj.prototype.preConcatenate=function(g){var c=this.matrix_||this.toMatrix();this.a=g.a*c.a+g.c*c.b;this.b=g.b*c.a+g.d*c.b;this.c=g.a*c.c+g.c*c.d;this.d=g.b*c.c+g.d*c.d;this.e=g.a*c.e+g.c*c.f+g.e;this.f=g.b*c.e+g.d*c.f+g.f;this.matrix_=this.toMatrix();return this};Aj.prototype.invert=function(){var g=this.copy(),c=1/(g.a*g.d-g.c*g.b);this.a=g.d*c;this.b=
-g.b*c;this.c=-g.c*c;this.d=g.a*c;this.e=(g.c*g.f-g.e*g.d)*c;this.f=-(g.a*g.f-g.b*g.e)*c;return this};Aj.prototype.inverse=function(){var g=this.matrix_||this.toMatrix();g=new this.constructor(g);g.invert();return g};Aj.prototype.ensureNumber=function(g){if(isNaN(g))throw Error("not a number");return g};Aj.prototype.__serialize__=function(){return{__expr__:"new Transform({a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", e: "+this.e+", f: "+this.f+"})",bindings:{"lively.graphics/geometry-2d.js":["Transform"]}}};
$jscomp.global.Object.defineProperties(Aj.prototype,{exp:{configurable:!0,enumerable:!0,get:function(){return 1E-4}},isTransform:{configurable:!0,enumerable:!0,get:function(){return!0}}});id.Transform=Aj;var Fl=function(g,c){this.start=g;this.end=c};Fl.fromCoords=function(g,c,h,d){return new id.Line(id.pt(g,c),id.pt(h,d))};Fl.prototype.withStart=function(g){return new id.Line(g,this.end)};Fl.prototype.withEnd=function(g){return new id.Line(this.start,g)};Fl.prototype.sampleN=function(g){g=g||10;for(var c=
this.end.subPt(this.start).scaleBy(1/g),h=[],d=0;d<=g;d++)h.push(this.start.addPt(c.scaleBy(d)));return h};Fl.prototype.sample=function(g){return this.sampleN(this.length()/g)};Fl.prototype.length=function(){return this.start.dist(this.end)};Fl.prototype.equals=function(g){return g?this.start.eqPt(g.start)&&this.end.eqPt(g.end):!1};Fl.prototype.distanceFromLine=function(g){var c=this.start.x,h=this.start.y,d=this.end.x,k=this.end.y;return Math.abs((k-h)*g.x-(d-c)*g.y+d*h-k*c)/Math.sqrt(Math.pow(k-
h,2)+Math.pow(d-c,2))};Fl.prototype.includesPoint=function(g,c){var h=this.start.x,d=this.start.y,k=this.end.x,n=this.end.y,b=g.x;g=g.y;var e=0===(k-h)*(g-d)-(b-h)*(n-d);if(c||!e)return e;c=Math.min(d,n);e=Math.max(h,k);d=Math.max(d,n);return Math.min(h,k)<=b&&b<=e&&c<=g&&g<=d};Fl.prototype.intersection=function(g,c){var h=this.start,d=this.end,k=g.start,n=g.end;g=h.x;h=h.y;var b=d.x;d=d.y;var e=k.x;k=k.y;var l=n.x;n=n.y;var a=((g*d-h*b)*(e-l)-(g-b)*(e*n-k*l))/((g-b)*(k-n)-(h-d)*(e-l)),f=((g*d-h*
b)*(k-n)-(h-d)*(e*n-k*l))/((g-b)*(k-n)-(h-d)*(e-l));return Infinity!==a&&Infinity!==f&&(c||id.num.between(a,g,b,1E-4)&&id.num.between(f,h,d,1E-4)&&id.num.between(a,e,l,1E-4)&&id.num.between(f,k,n,1E-4))?id.pt(a,f):null};Fl.prototype.perpendicularLine=function(g,c,h){g=void 0===g?0:g;c=void 0===c?1:c;h=void 0===h?"cc":h;var d=this.start,k=this.toVector();g=d.addPt(k.scaleBy(g));h=k.theta()+("cc"===h?-1:1)*Math.PI/2;return new id.Line(g,g.addPt(id.Point.polar(c,h)))};Fl.prototype.toVector=function(){return this.end.subPt(this.start)};
Fl.prototype.toString=function(){return id.string.format("Line((%s,%s), (%s,%s))",this.start.x,this.start.y,this.end.x,this.end.y)};Fl.prototype.__serialize__=function(){return{__expr__:"Line.fromCoords("+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+")",bindings:{"lively.graphics/geometry-2d.js":["Line"]}}};$jscomp.global.Object.defineProperties(Fl.prototype,{isLine:{configurable:!0,enumerable:!0,get:function(){return!0}}});id.Line=Fl;id.rect=Ff;id.rect=Ff;id.pt=nf;id.pt=nf;var dda=
Object.freeze({__proto__:null,Point:Gf,Rectangle:Pd,Transform:Aj,Line:Fl,rect:Ff,pt:nf}),s1=lively.FreezerRuntime.recorderFor("lively.ast/generated/estree-visitor.js"),Gd=function(){};Gd.prototype.accept=function(g,c,h){if(!g)throw Error("Undefined AST node in Visitor.accept:\n  "+h.join(".")+"\n  "+g);if(!g.type)throw Error("Strangee AST node without type in Visitor.accept:\n  "+h.join(".")+"\n  "+JSON.stringify(g));switch(g.type){case "Node":return this.visitNode(g,c,h);case "SourceLocation":return this.visitSourceLocation(g,
c,h);case "Position":return this.visitPosition(g,c,h);case "Program":return this.visitProgram(g,c,h);case "Function":return this.visitFunction(g,c,h);case "Statement":return this.visitStatement(g,c,h);case "Directive":return this.visitDirective(g,c,h);case "SwitchCase":return this.visitSwitchCase(g,c,h);case "CatchClause":return this.visitCatchClause(g,c,h);case "VariableDeclarator":return this.visitVariableDeclarator(g,c,h);case "Expression":return this.visitExpression(g,c,h);case "Property":return this.visitProperty(g,
c,h);case "Pattern":return this.visitPattern(g,c,h);case "Super":return this.visitSuper(g,c,h);case "SpreadElement":return this.visitSpreadElement(g,c,h);case "TemplateElement":return this.visitTemplateElement(g,c,h);case "Class":return this.visitClass(g,c,h);case "ClassBody":return this.visitClassBody(g,c,h);case "MethodDefinition":return this.visitMethodDefinition(g,c,h);case "ModuleDeclaration":return this.visitModuleDeclaration(g,c,h);case "ModuleSpecifier":return this.visitModuleSpecifier(g,
c,h);case "JSXEmptyExpression":return this.visitJSXEmptyExpression(g,c,h);case "JSXExpressionContainer":return this.visitJSXExpressionContainer(g,c,h);case "JSXSpreadChild":return this.visitJSXSpreadChild(g,c,h);case "JSXBoundaryElement":return this.visitJSXBoundaryElement(g,c,h);case "JSXAttribute":return this.visitJSXAttribute(g,c,h);case "JSXText":return this.visitJSXText(g,c,h);case "JSXOpeningFragment":return this.visitJSXOpeningFragment(g,c,h);case "JSXClosingFragment":return this.visitJSXClosingFragment(g,
c,h);case "Identifier":return this.visitIdentifier(g,c,h);case "Literal":return this.visitLiteral(g,c,h);case "ExpressionStatement":return this.visitExpressionStatement(g,c,h);case "BlockStatement":return this.visitBlockStatement(g,c,h);case "EmptyStatement":return this.visitEmptyStatement(g,c,h);case "DebuggerStatement":return this.visitDebuggerStatement(g,c,h);case "WithStatement":return this.visitWithStatement(g,c,h);case "ReturnStatement":return this.visitReturnStatement(g,c,h);case "LabeledStatement":return this.visitLabeledStatement(g,
c,h);case "BreakStatement":return this.visitBreakStatement(g,c,h);case "ContinueStatement":return this.visitContinueStatement(g,c,h);case "IfStatement":return this.visitIfStatement(g,c,h);case "SwitchStatement":return this.visitSwitchStatement(g,c,h);case "ThrowStatement":return this.visitThrowStatement(g,c,h);case "TryStatement":return this.visitTryStatement(g,c,h);case "WhileStatement":return this.visitWhileStatement(g,c,h);case "DoWhileStatement":return this.visitDoWhileStatement(g,c,h);case "ForStatement":return this.visitForStatement(g,
c,h);case "ForInStatement":return this.visitForInStatement(g,c,h);case "Declaration":return this.visitDeclaration(g,c,h);case "ThisExpression":return this.visitThisExpression(g,c,h);case "ArrayExpression":return this.visitArrayExpression(g,c,h);case "ObjectExpression":return this.visitObjectExpression(g,c,h);case "FunctionExpression":return this.visitFunctionExpression(g,c,h);case "UnaryExpression":return this.visitUnaryExpression(g,c,h);case "UpdateExpression":return this.visitUpdateExpression(g,
c,h);case "BinaryExpression":return this.visitBinaryExpression(g,c,h);case "AssignmentExpression":return this.visitAssignmentExpression(g,c,h);case "LogicalExpression":return this.visitLogicalExpression(g,c,h);case "MemberExpression":return this.visitMemberExpression(g,c,h);case "ConditionalExpression":return this.visitConditionalExpression(g,c,h);case "CallExpression":return this.visitCallExpression(g,c,h);case "NewExpression":return this.visitNewExpression(g,c,h);case "SequenceExpression":return this.visitSequenceExpression(g,
c,h);case "ArrowFunctionExpression":return this.visitArrowFunctionExpression(g,c,h);case "YieldExpression":return this.visitYieldExpression(g,c,h);case "TemplateLiteral":return this.visitTemplateLiteral(g,c,h);case "TaggedTemplateExpression":return this.visitTaggedTemplateExpression(g,c,h);case "AssignmentProperty":return this.visitAssignmentProperty(g,c,h);case "ObjectPattern":return this.visitObjectPattern(g,c,h);case "ArrayPattern":return this.visitArrayPattern(g,c,h);case "RestElement":return this.visitRestElement(g,
c,h);case "AssignmentPattern":return this.visitAssignmentPattern(g,c,h);case "ClassExpression":return this.visitClassExpression(g,c,h);case "MetaProperty":return this.visitMetaProperty(g,c,h);case "ImportDeclaration":return this.visitImportDeclaration(g,c,h);case "ImportSpecifier":return this.visitImportSpecifier(g,c,h);case "ImportDefaultSpecifier":return this.visitImportDefaultSpecifier(g,c,h);case "ImportNamespaceSpecifier":return this.visitImportNamespaceSpecifier(g,c,h);case "ExportNamedDeclaration":return this.visitExportNamedDeclaration(g,
c,h);case "ExportSpecifier":return this.visitExportSpecifier(g,c,h);case "AnonymousDefaultExportedFunctionDeclaration":return this.visitAnonymousDefaultExportedFunctionDeclaration(g,c,h);case "AnonymousDefaultExportedClassDeclaration":return this.visitAnonymousDefaultExportedClassDeclaration(g,c,h);case "ExportDefaultDeclaration":return this.visitExportDefaultDeclaration(g,c,h);case "ExportAllDeclaration":return this.visitExportAllDeclaration(g,c,h);case "AwaitExpression":return this.visitAwaitExpression(g,
c,h);case "JSXMemberExpression":return this.visitJSXMemberExpression(g,c,h);case "JSXNamespacedName":return this.visitJSXNamespacedName(g,c,h);case "JSXOpeningElement":return this.visitJSXOpeningElement(g,c,h);case "JSXClosingElement":return this.visitJSXClosingElement(g,c,h);case "JSXSpreadAttribute":return this.visitJSXSpreadAttribute(g,c,h);case "JSXElement":return this.visitJSXElement(g,c,h);case "JSXFragment":return this.visitJSXFragment(g,c,h);case "ImportExpression":return this.visitImportExpression(g,
c,h);case "RegExpLiteral":return this.visitRegExpLiteral(g,c,h);case "FunctionBody":return this.visitFunctionBody(g,c,h);case "FunctionDeclaration":return this.visitFunctionDeclaration(g,c,h);case "VariableDeclaration":return this.visitVariableDeclaration(g,c,h);case "ForOfStatement":return this.visitForOfStatement(g,c,h);case "ClassDeclaration":return this.visitClassDeclaration(g,c,h);case "JSXIdentifier":return this.visitJSXIdentifier(g,c,h);case "BigIntLiteral":return this.visitBigIntLiteral(g,
c,h)}throw Error("No visit function in AST visitor Visitor for:\n  "+h.join(".")+"\n  "+JSON.stringify(g));};Gd.prototype.visitNode=function(g,c,h){return g};Gd.prototype.visitSourceLocation=function(g,c,h){g.start=this.accept(g.start,c,h.concat(["start"]));g.end=this.accept(g.end,c,h.concat(["end"]));return g};Gd.prototype.visitPosition=function(g,c,h){return g};Gd.prototype.visitProgram=function(g,c,h){for(var d=[],k=0;k<g.body.length;k++){var n=g.body[k];n=n?this.accept(n,c,h.concat(["body",k])):
n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.body=d;return g};Gd.prototype.visitFunction=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var d=[],k=0;k<g.params.length;k++){var n=g.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitStatement=function(g,c,h){return g};Gd.prototype.visitDirective=function(g,c,h){g.expression=this.accept(g.expression,
c,h.concat(["expression"]));return g};Gd.prototype.visitSwitchCase=function(g,c,h){g.test&&(g.test=this.accept(g.test,c,h.concat(["test"])));for(var d=[],k=0;k<g.consequent.length;k++){var n=g.consequent[k];n=n?this.accept(n,c,h.concat(["consequent",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.consequent=d;return g};Gd.prototype.visitCatchClause=function(g,c,h){g.param&&(g.param=this.accept(g.param,c,h.concat(["param"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitVariableDeclarator=
function(g,c,h){g.id=this.accept(g.id,c,h.concat(["id"]));g.init&&(g.init=this.accept(g.init,c,h.concat(["init"])));return g};Gd.prototype.visitExpression=function(g,c,h){return g};Gd.prototype.visitProperty=function(g,c,h){g.key=this.accept(g.key,c,h.concat(["key"]));g.value=this.accept(g.value,c,h.concat(["value"]));return g};Gd.prototype.visitPattern=function(g,c,h){return g};Gd.prototype.visitSuper=function(g,c,h){return g};Gd.prototype.visitSpreadElement=function(g,c,h){g.argument=this.accept(g.argument,
c,h.concat(["argument"]));return g};Gd.prototype.visitTemplateElement=function(g,c,h){return g};Gd.prototype.visitClass=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitClassBody=function(g,c,h){for(var d=[],k=0;k<g.body.length;k++){var n=g.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?d.push.apply(d,n):
d.push(n)}g.body=d;return g};Gd.prototype.visitMethodDefinition=function(g,c,h){g.key=this.accept(g.key,c,h.concat(["key"]));g.value=this.accept(g.value,c,h.concat(["value"]));return g};Gd.prototype.visitModuleDeclaration=function(g,c,h){return g};Gd.prototype.visitModuleSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Gd.prototype.visitJSXEmptyExpression=function(g,c,h){return g};Gd.prototype.visitJSXExpressionContainer=function(g,c,h){g.expression=this.accept(g.expression,
c,h.concat(["expression"]));return g};Gd.prototype.visitJSXSpreadChild=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Gd.prototype.visitJSXBoundaryElement=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));return g};Gd.prototype.visitJSXAttribute=function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));g.value&&(g.value=this.accept(g.value,c,h.concat(["value"])));return g};Gd.prototype.visitJSXText=function(g,c,h){return g};Gd.prototype.visitJSXOpeningFragment=
function(g,c,h){return g};Gd.prototype.visitJSXClosingFragment=function(g,c,h){return g};Gd.prototype.visitIdentifier=function(g,c,h){return g};Gd.prototype.visitLiteral=function(g,c,h){return g};Gd.prototype.visitExpressionStatement=function(g,c,h){g.expression=this.accept(g.expression,c,h.concat(["expression"]));return g};Gd.prototype.visitBlockStatement=function(g,c,h){for(var d=[],k=0;k<g.body.length;k++){var n=g.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?d.push.apply(d,
n):d.push(n)}g.body=d;return g};Gd.prototype.visitEmptyStatement=function(g,c,h){return g};Gd.prototype.visitDebuggerStatement=function(g,c,h){return g};Gd.prototype.visitWithStatement=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitReturnStatement=function(g,c,h){g.argument&&(g.argument=this.accept(g.argument,c,h.concat(["argument"])));return g};Gd.prototype.visitLabeledStatement=function(g,c,h){g.label=
this.accept(g.label,c,h.concat(["label"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitBreakStatement=function(g,c,h){g.label&&(g.label=this.accept(g.label,c,h.concat(["label"])));return g};Gd.prototype.visitContinueStatement=function(g,c,h){g.label&&(g.label=this.accept(g.label,c,h.concat(["label"])));return g};Gd.prototype.visitIfStatement=function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.consequent=this.accept(g.consequent,c,h.concat(["consequent"]));
g.alternate&&(g.alternate=this.accept(g.alternate,c,h.concat(["alternate"])));return g};Gd.prototype.visitSwitchStatement=function(g,c,h){g.discriminant=this.accept(g.discriminant,c,h.concat(["discriminant"]));for(var d=[],k=0;k<g.cases.length;k++){var n=g.cases[k];n=n?this.accept(n,c,h.concat(["cases",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.cases=d;return g};Gd.prototype.visitThrowStatement=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Gd.prototype.visitTryStatement=
function(g,c,h){g.block=this.accept(g.block,c,h.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,h.concat(["handler"])));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,h.concat(["finalizer"])));return g};Gd.prototype.visitWhileStatement=function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitDoWhileStatement=function(g,c,h){g.body=this.accept(g.body,c,h.concat(["body"]));g.test=this.accept(g.test,
c,h.concat(["test"]));return g};Gd.prototype.visitForStatement=function(g,c,h){g.init&&(g.init=this.accept(g.init,c,h.concat(["init"])));g.test&&(g.test=this.accept(g.test,c,h.concat(["test"])));g.update&&(g.update=this.accept(g.update,c,h.concat(["update"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitForInStatement=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));g.body=this.accept(g.body,c,h.concat(["body"]));
return g};Gd.prototype.visitDeclaration=function(g,c,h){return g};Gd.prototype.visitThisExpression=function(g,c,h){return g};Gd.prototype.visitArrayExpression=function(g,c,h){if(g.elements){for(var d=[],k=0;k<g.elements.length;k++){var n=g.elements[k];n=n?this.accept(n,c,h.concat(["elements",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.elements=d}return g};Gd.prototype.visitObjectExpression=function(g,c,h){for(var d=[],k=0;k<g.properties.length;k++){var n=g.properties[k];n=n?this.accept(n,
c,h.concat(["properties",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.properties=d;return g};Gd.prototype.visitFunctionExpression=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var d=[],k=0;k<g.params.length;k++){var n=g.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitUnaryExpression=function(g,c,h){g.argument=this.accept(g.argument,
c,h.concat(["argument"]));return g};Gd.prototype.visitUpdateExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Gd.prototype.visitBinaryExpression=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Gd.prototype.visitAssignmentExpression=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Gd.prototype.visitLogicalExpression=
function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Gd.prototype.visitMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.property=this.accept(g.property,c,h.concat(["property"]));return g};Gd.prototype.visitConditionalExpression=function(g,c,h){g.test=this.accept(g.test,c,h.concat(["test"]));g.alternate=this.accept(g.alternate,c,h.concat(["alternate"]));g.consequent=this.accept(g.consequent,
c,h.concat(["consequent"]));return g};Gd.prototype.visitCallExpression=function(g,c,h){g.callee=this.accept(g.callee,c,h.concat(["callee"]));for(var d=[],k=0;k<g.arguments.length;k++){var n=g.arguments[k];n=n?this.accept(n,c,h.concat(["arguments",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.arguments=d;return g};Gd.prototype.visitNewExpression=function(g,c,h){g.callee=this.accept(g.callee,c,h.concat(["callee"]));for(var d=[],k=0;k<g.arguments.length;k++){var n=g.arguments[k];n=n?this.accept(n,
c,h.concat(["arguments",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.arguments=d;return g};Gd.prototype.visitSequenceExpression=function(g,c,h){for(var d=[],k=0;k<g.expressions.length;k++){var n=g.expressions[k];n=n?this.accept(n,c,h.concat(["expressions",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.expressions=d;return g};Gd.prototype.visitArrowFunctionExpression=function(g,c,h){g.body=this.accept(g.body,c,h.concat(["body"]));g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var d=
[],k=0;k<g.params.length;k++){var n=g.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;return g};Gd.prototype.visitYieldExpression=function(g,c,h){g.argument&&(g.argument=this.accept(g.argument,c,h.concat(["argument"])));return g};Gd.prototype.visitTemplateLiteral=function(g,c,h){for(var d=[],k=0;k<g.quasis.length;k++){var n=g.quasis[k];n=n?this.accept(n,c,h.concat(["quasis",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.quasis=
d;d=[];for(k=0;k<g.expressions.length;k++)n=(n=g.expressions[k])?this.accept(n,c,h.concat(["expressions",k])):n,Array.isArray(n)?d.push.apply(d,n):d.push(n);g.expressions=d;return g};Gd.prototype.visitTaggedTemplateExpression=function(g,c,h){g.tag=this.accept(g.tag,c,h.concat(["tag"]));g.quasi=this.accept(g.quasi,c,h.concat(["quasi"]));return g};Gd.prototype.visitAssignmentProperty=function(g,c,h){g.value=this.accept(g.value,c,h.concat(["value"]));g.key=this.accept(g.key,c,h.concat(["key"]));return g};
Gd.prototype.visitObjectPattern=function(g,c,h){for(var d=[],k=0;k<g.properties.length;k++){var n=g.properties[k];n=n?this.accept(n,c,h.concat(["properties",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.properties=d;return g};Gd.prototype.visitArrayPattern=function(g,c,h){if(g.elements){for(var d=[],k=0;k<g.elements.length;k++){var n=g.elements[k];n=n?this.accept(n,c,h.concat(["elements",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.elements=d}return g};Gd.prototype.visitRestElement=
function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Gd.prototype.visitAssignmentPattern=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));g.right=this.accept(g.right,c,h.concat(["right"]));return g};Gd.prototype.visitClassExpression=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitMetaProperty=
function(g,c,h){g.meta=this.accept(g.meta,c,h.concat(["meta"]));g.property=this.accept(g.property,c,h.concat(["property"]));return g};Gd.prototype.visitImportDeclaration=function(g,c,h){for(var d=[],k=0;k<g.specifiers.length;k++){var n=g.specifiers[k];n=n?this.accept(n,c,h.concat(["specifiers",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.specifiers=d;g.source=this.accept(g.source,c,h.concat(["source"]));return g};Gd.prototype.visitImportSpecifier=function(g,c,h){g.imported=this.accept(g.imported,
c,h.concat(["imported"]));g.local=this.accept(g.local,c,h.concat(["local"]));return g};Gd.prototype.visitImportDefaultSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Gd.prototype.visitImportNamespaceSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Gd.prototype.visitExportNamedDeclaration=function(g,c,h){g.declaration&&(g.declaration=this.accept(g.declaration,c,h.concat(["declaration"])));for(var d=[],k=0;k<g.specifiers.length;k++){var n=
g.specifiers[k];n=n?this.accept(n,c,h.concat(["specifiers",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.specifiers=d;g.source&&(g.source=this.accept(g.source,c,h.concat(["source"])));return g};Gd.prototype.visitExportSpecifier=function(g,c,h){g.exported=this.accept(g.exported,c,h.concat(["exported"]));g.local=this.accept(g.local,c,h.concat(["local"]));return g};Gd.prototype.visitAnonymousDefaultExportedFunctionDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));
for(var d=[],k=0;k<g.params.length;k++){var n=g.params[k];n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitAnonymousDefaultExportedClassDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitExportDefaultDeclaration=
function(g,c,h){g.declaration=this.accept(g.declaration,c,h.concat(["declaration"]));return g};Gd.prototype.visitExportAllDeclaration=function(g,c,h){g.source=this.accept(g.source,c,h.concat(["source"]));return g};Gd.prototype.visitAwaitExpression=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Gd.prototype.visitJSXMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.property=this.accept(g.property,c,h.concat(["property"]));
return g};Gd.prototype.visitJSXNamespacedName=function(g,c,h){g.namespace=this.accept(g.namespace,c,h.concat(["namespace"]));g.name=this.accept(g.name,c,h.concat(["name"]));return g};Gd.prototype.visitJSXOpeningElement=function(g,c,h){for(var d=[],k=0;k<g.attributes.length;k++){var n=g.attributes[k];n=n?this.accept(n,c,h.concat(["attributes",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.attributes=d;g.name=this.accept(g.name,c,h.concat(["name"]));return g};Gd.prototype.visitJSXClosingElement=
function(g,c,h){g.name=this.accept(g.name,c,h.concat(["name"]));return g};Gd.prototype.visitJSXSpreadAttribute=function(g,c,h){g.argument=this.accept(g.argument,c,h.concat(["argument"]));return g};Gd.prototype.visitJSXElement=function(g,c,h){g.openingElement=this.accept(g.openingElement,c,h.concat(["openingElement"]));for(var d=[],k=0;k<g.children.length;k++){var n=g.children[k];n=n?this.accept(n,c,h.concat(["children",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.children=d;g.closingElement&&
(g.closingElement=this.accept(g.closingElement,c,h.concat(["closingElement"])));return g};Gd.prototype.visitJSXFragment=function(g,c,h){g.openingFragment=this.accept(g.openingFragment,c,h.concat(["openingFragment"]));for(var d=[],k=0;k<g.children.length;k++){var n=g.children[k];n=n?this.accept(n,c,h.concat(["children",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.children=d;g.closingFragment=this.accept(g.closingFragment,c,h.concat(["closingFragment"]));return g};Gd.prototype.visitImportExpression=
function(g,c,h){g.source=this.accept(g.source,c,h.concat(["source"]));return g};Gd.prototype.visitRegExpLiteral=function(g,c,h){return g};Gd.prototype.visitFunctionBody=function(g,c,h){for(var d=[],k=0;k<g.body.length;k++){var n=g.body[k];n=n?this.accept(n,c,h.concat(["body",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.body=d;return g};Gd.prototype.visitFunctionDeclaration=function(g,c,h){g.id&&(g.id=this.accept(g.id,c,h.concat(["id"])));for(var d=[],k=0;k<g.params.length;k++){var n=g.params[k];
n=n?this.accept(n,c,h.concat(["params",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.params=d;g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitVariableDeclaration=function(g,c,h){for(var d=[],k=0;k<g.declarations.length;k++){var n=g.declarations[k];n=n?this.accept(n,c,h.concat(["declarations",k])):n;Array.isArray(n)?d.push.apply(d,n):d.push(n)}g.declarations=d;return g};Gd.prototype.visitForOfStatement=function(g,c,h){g.left=this.accept(g.left,c,h.concat(["left"]));
g.right=this.accept(g.right,c,h.concat(["right"]));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitClassDeclaration=function(g,c,h){g.id=this.accept(g.id,c,h.concat(["id"]));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Gd.prototype.visitJSXIdentifier=function(g,c,h){return g};Gd.prototype.visitBigIntLiteral=function(g,c,h){return g};wa("bE",Gd);s1.Visitor=Gd;s1.default=Gd;var Ug=
lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitors.js");Ug.obj=lf;Ug.Path=Cg;Ug.Visitor=Gd;var aC=function(){return Ug.Visitor.apply(this,arguments)||this};$jscomp.inherits(aC,Ug.Visitor);aC.prototype.accept=function(g,c,h){var d=h.map(function(n){return"string"===typeof n?"."+n:"["+n+"]"}).join(""),k=[];h=Ug.Visitor.prototype.accept.call(this,g,{index:c.index,tree:k},h);c.tree.push({node:g,path:d,index:c.index++,children:k});return h};Ug.PrinterVisitor=aC;var Lj=function(){return Ug.Visitor.apply(this,
arguments)||this};$jscomp.inherits(Lj,Ug.Visitor);Lj.prototype.recordNotEqual=function(g,c,h,d){h.comparisons.errors.push({node1:g,node2:c,path:h.completePath,msg:d})};Lj.prototype.compareType=function(g,c,h){return this.compareField("type",g,c,h)};Lj.prototype.compareField=function(g,c,h,d){h=Ug.Path(d.completePath.join(".")).get(h);if(c&&h&&c[g]===h[g]||c&&"*"===c[g]||h&&"*"===h[g])return!0;var k=d.completePath.join(".")+"."+g;this.recordNotEqual(c,h,d,c?h?k+" is not equal: "+c[g]+" vs. "+h[g]:
"node2 not defined but node1 ("+k+") is: "+c[g]:"node1 on "+k+" not defined");return!1};Lj.prototype.accept=function(g,c,h,d){var k=Ug.Path(d.join(".")).get(c);if("*"!==g&&"*"!==k&&(h={completePath:d,comparisons:h.comparisons},this.compareType(g,c,h)))this["visit"+g.type](g,c,h,d)};Lj.prototype.visitFunction=function(g,c,h,d){g.generator&&this.compareField("generator",g,c,h);g.expression&&this.compareField("expression",g,c,h);return Ug.Visitor.prototype.visitFunction.call(this,g,c,h,d)};Lj.prototype.visitSwitchStatement=
function(g,c,h,d){g.lexical&&this.compareField("lexical",g,c,h);return Ug.Visitor.prototype.visitSwitchStatement.call(this,g,c,h,d)};Lj.prototype.visitForInStatement=function(g,c,h,d){g.each&&this.compareField("each",g,c,h);return Ug.Visitor.prototype.visitForInStatement.call(this,g,c,h,d)};Lj.prototype.visitFunctionDeclaration=function(g,c,h,d){g.generator&&this.compareField("generator",g,c,h);g.expression&&this.compareField("expression",g,c,h);return Ug.Visitor.prototype.visitFunctionDeclaration.call(this,
g,c,h,d)};Lj.prototype.visitVariableDeclaration=function(g,c,h,d){this.compareField("kind",g,c,h);return Ug.Visitor.prototype.visitVariableDeclaration.call(this,g,c,h,d)};Lj.prototype.visitUnaryExpression=function(g,c,h,d){this.compareField("operator",g,c,h);g.prefix&&this.compareField("prefix",g,c,h);return Ug.Visitor.prototype.visitUnaryExpression.call(this,g,c,h,d)};Lj.prototype.visitBinaryExpression=function(g,c,h,d){this.compareField("operator",g,c,h);return Ug.Visitor.prototype.visitBinaryExpression.call(this,
g,c,h,d)};Lj.prototype.visitAssignmentExpression=function(g,c,h,d){this.compareField("operator",g,c,h);return Ug.Visitor.prototype.visitAssignmentExpression.call(this,g,c,h,d)};Lj.prototype.visitUpdateExpression=function(g,c,h,d){this.compareField("operator",g,c,h);g.prefix&&this.compareField("prefix",g,c,h);return Ug.Visitor.prototype.visitUpdateExpression.call(this,g,c,h,d)};Lj.prototype.visitLogicalExpression=function(g,c,h,d){this.compareField("operator",g,c,h);return Ug.Visitor.prototype.visitLogicalExpression.call(this,
g,c,h,d)};Lj.prototype.visitMemberExpression=function(g,c,h,d){g.computed&&this.compareField("computed",g,c,h);return Ug.Visitor.prototype.visitMemberExpression.call(this,g,c,h,d)};Lj.prototype.visitComprehensionBlock=function(g,c,h,d){g.each&&this.compareField("each",g,c,h);return Ug.Visitor.prototype.visitComprehensionBlock.call(this,g,c,h,d)};Lj.prototype.visitIdentifier=function(g,c,h,d){this.compareField("name",g,c,h);return Ug.Visitor.prototype.visitIdentifier.call(this,g,c,h,d)};Lj.prototype.visitLiteral=
function(g,c,h,d){this.compareField("value",g,c,h);return Ug.Visitor.prototype.visitLiteral.call(this,g,c,h,d)};Lj.prototype.visitClassDeclaration=function(g,c,h,d){this.compareField("id",g,c,h);g.superClass&&this.compareField("superClass",g,c,h);this.compareField("body",g,c,h);return Ug.Visitor.prototype.visitClassDeclaration.call(this,g,c,h,d)};Lj.prototype.visitClassBody=function(g,c,h,d){this.compareField("body",g,c,h);return Ug.Visitor.prototype.visitClassBody.call(this,g,c,h,d)};Lj.prototype.visitMethodDefinition=
function(g,c,h,d){this.compareField("static",g,c,h);this.compareField("computed",g,c,h);this.compareField("kind",g,c,h);this.compareField("key",g,c,h);this.compareField("value",g,c,h);return Ug.Visitor.prototype.visitMethodDefinition.call(this,g,c,h,d)};Ug.ComparisonVisitor=Lj;var Ni=function(){return Ug.Visitor.apply(this,arguments)||this};$jscomp.inherits(Ni,Ug.Visitor);Ni.prototype.newScope=function(g,c){g={node:g,varDecls:[],varDeclPaths:[],funcDecls:[],funcDeclPaths:[],classDecls:[],classDeclPaths:[],
classExprs:[],classExprPaths:[],methodDecls:[],methodDeclPaths:[],importSpecifiers:[],importSpecifierPaths:[],exportDecls:[],exportDeclPaths:[],refs:[],thisRefs:[],params:[],catches:[],subScopes:[],resolvedRefMap:new Map};c&&c.subScopes.push(g);return g};Ni.prototype.visitVariableDeclaration=function(g,c,h){c.varDecls.push(g);c.varDeclPaths.push(h);return Ug.Visitor.prototype.visitVariableDeclaration.call(this,g,c,h)};Ni.prototype.visitVariableDeclarator=function(g,c,h){g.init&&(g.init=this.accept(g.init,
c,h.concat(["init"])));return g};Ni.prototype.visitFunction=function(g,c,h){var d=this,k=this.newScope(g,c);g.params.forEach(function(n,b){"AssignmentPattern"===n.type&&d.accept(n.right,k,h.concat("params",b,"right"))});k.params=Array.prototype.slice.call(g.params);return k};Ni.prototype.visitFunctionDeclaration=function(g,c,h){var d=this.visitFunction(g,c,h);c.funcDecls.push(g);c.funcDeclPaths.push(h);var k=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,e){b=k.accept(b,d,h.concat(["defaults",
e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=k.accept(g.rest,d,h.concat(["rest"])));g.body=k.accept(g.body,d,h.concat(["body"]));g.loc&&(g.loc=k.accept(g.loc,d,h.concat(["loc"])));return g};Ni.prototype.visitFunctionExpression=function(g,c,h){var d=this.visitFunction(g,c,h),k=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,e){b=k.accept(b,d,h.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=k.accept(g.rest,
d,h.concat(["rest"])));g.body=k.accept(g.body,d,h.concat(["body"]));g.loc&&(g.loc=k.accept(g.loc,d,h.concat(["loc"])));return g};Ni.prototype.visitArrowFunctionExpression=function(g,c,h){var d=this.visitFunction(g,c,h),k=this;g.defaults&&(g.defaults=g.defaults.reduce(function(n,b,e){b=k.accept(b,d,h.concat(["defaults",e]));Array.isArray(b)?n.push.apply(n,b):n.push(b);return n},[]));g.rest&&(g.rest=k.accept(g.rest,d,h.concat(["rest"])));g.body=k.accept(g.body,d,h.concat(["body"]));g.loc&&(g.loc=k.accept(g.loc,
d,h.concat(["loc"])));return g};Ni.prototype.visitIdentifier=function(g,c,h){c.refs.push(g);return Ug.Visitor.prototype.visitIdentifier.call(this,g,c,h)};Ni.prototype.visitMemberExpression=function(g,c,h){g.object=this.accept(g.object,c,h.concat(["object"]));g.computed&&(g.property=this.accept(g.property,c,h.concat(["property"])));return g};Ni.prototype.visitProperty=function(g,c,h){g.computed&&(g.key=this.accept(g.key,c,h.concat(["key"])));g.value=this.accept(g.value,c,h.concat(["value"]));return g};
Ni.prototype.visitThisExpression=function(g,c,h){c.thisRefs.push(g);return Ug.Visitor.prototype.visitThisExpression.call(this,g,c,h)};Ni.prototype.visitTryStatement=function(g,c,h){g.block=this.accept(g.block,c,h.concat(["block"]));g.handler&&(g.handler=this.accept(g.handler,c,h.concat(["handler"])),c.catches.push(g.handler.param));g.finalizer&&(g.finalizer=this.accept(g.finalizer,c,h.concat(["finalizer"])));return g};Ni.prototype.visitLabeledStatement=function(g,c,h){g.body=this.accept(g.body,c,
h.concat(["body"]));return g};Ni.prototype.visitClassDeclaration=function(g,c,h){c.classDecls.push(g);c.classDeclPaths.push(h);g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));return g};Ni.prototype.visitClassExpression=function(g,c,h){g.id&&(c.classExprs.push(g),c.classExprPaths.push(h));g.superClass&&(g.superClass=this.accept(g.superClass,c,h.concat(["superClass"])));g.body=this.accept(g.body,c,h.concat(["body"]));
return g};Ni.prototype.visitMethodDefinition=function(g,c,h){g.value=this.accept(g.value,c,h.concat(["value"]));return g};Ni.prototype.visitMetaProperty=function(g,c,h){return g};Ni.prototype.visitBreakStatement=function(g,c,h){return g};Ni.prototype.visitContinueStatement=function(g,c,h){return g};Ni.prototype.visitImportSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(h);return g};Ni.prototype.visitImportDefaultSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);
c.importSpecifierPaths.push(h);return g};Ni.prototype.visitImportNamespaceSpecifier=function(g,c,h){c.importSpecifiers.push(g.local);c.importSpecifierPaths.push(h);return g};Ni.prototype.visitExportSpecifier=function(g,c,h){g.local=this.accept(g.local,c,h.concat(["local"]));return g};Ni.prototype.visitExportNamedDeclaration=function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);g.source||Ug.Visitor.prototype.visitExportNamedDeclaration.call(this,g,c,h);return g};Ni.prototype.visitExportDefaultDeclaration=
function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);return Ug.Visitor.prototype.visitExportDefaultDeclaration.call(this,g,c,h)};Ni.prototype.visitExportAllDeclaration=function(g,c,h){c.exportDecls.push(g);c.exportDeclPaths.push(h);return Ug.Visitor.prototype.visitExportAllDeclaration.call(this,g,c,h)};Ug.ScopeVisitor=Ni;Ug.BaseVisitor=Gd;Ug.Visitor=Gd;Ug.PrinterVisitor=aC;Ug.PrinterVisitor=aC;Ug.ComparisonVisitor=Lj;Ug.ComparisonVisitor=Lj;Ug.ScopeVisitor=Ni;Ug.ScopeVisitor=Ni;var Wf=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sQ={};(function h(c){function d(B){var C={},G;for(G in B)if(B.hasOwnProperty(G)){var F=B[G];C[G]="object"===typeof F&&null!==F?d(F):F}return C}function k(B,C){var G;var F=B.length;for(G=0;F;){var N=F>>>1;var L=G+N;C(B[L])?F=N:(G=L+1,F-=N+1)}return G}function n(B,C){(this||Wf).parent=B;(this||Wf).key=C}function b(B,C,G,F){(this||Wf).node=B;(this||Wf).path=C;(this||Wf).wrap=G;(this||Wf).ref=F}function e(){}function l(B){return null==
B?!1:"object"===typeof B&&"string"===typeof B.type}function a(B,C){for(var G=B.length-1;0<=G;--G)if(B[G].node===C)return!0;return!1}function f(B,C){return(new e).traverse(B,C)}function m(B,C){var G=k(C,function(F){return F.range[0]>B.range[0]});B.extendedRange=[B.range[0],B.range[1]];G!==C.length&&(B.extendedRange[1]=C[G].range[0]);--G;0<=G&&(B.extendedRange[0]=C[G].range[1]);return B}var q={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",
ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",
ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",
ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};var r={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],
BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],
DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter",
"body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],
ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],
VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};var u={};var v={};var y={};var z={Break:u,Skip:v,Remove:y};n.prototype.replace=function(B){(this||Wf).parent[(this||Wf).key]=B};n.prototype.remove=function(){if(Array.isArray((this||Wf).parent))return(this||Wf).parent.splice((this||Wf).key,1),!0;this.replace(null);return!1};e.prototype.path=function(){function B(ha,qa){if(Array.isArray(qa))for(G=
0,F=qa.length;G<F;++G)ha.push(qa[G]);else ha.push(qa)}var C,G,F;if(!(this||Wf).__current.path)return null;var N=[];var L=2;for(C=(this||Wf).__leavelist.length;L<C;++L){var S=(this||Wf).__leavelist[L];B(N,S.path)}B(N,(this||Wf).__current.path);return N};e.prototype.type=function(){return this.current().type||(this||Wf).__current.wrap};e.prototype.parents=function(){var B;var C=[];var G=1;for(B=(this||Wf).__leavelist.length;G<B;++G)C.push((this||Wf).__leavelist[G].node);return C};e.prototype.current=
function(){return(this||Wf).__current.node};e.prototype.__execute=function(B,C){var G=void 0;var F=(this||Wf).__current;(this||Wf).__current=C;(this||Wf).__state=null;B&&(G=B.call(this||Wf,C.node,(this||Wf).__leavelist[(this||Wf).__leavelist.length-1].node));(this||Wf).__current=F;return G};e.prototype.notify=function(B){(this||Wf).__state=B};e.prototype.skip=function(){this.notify(v)};e.prototype["break"]=function(){this.notify(u)};e.prototype.remove=function(){this.notify(y)};e.prototype.__initialize=
function(B,C){(this||Wf).visitor=C;(this||Wf).root=B;(this||Wf).__worklist=[];(this||Wf).__leavelist=[];(this||Wf).__current=null;(this||Wf).__state=null;(this||Wf).__fallback=null;"iteration"===C.fallback?(this||Wf).__fallback=Object.keys:"function"===typeof C.fallback&&((this||Wf).__fallback=C.fallback);(this||Wf).__keys=r;C.keys&&((this||Wf).__keys=Object.assign(Object.create((this||Wf).__keys),C.keys))};e.prototype.traverse=function(B,C){var G,F,N;this.__initialize(B,C);var L={};var S=(this||
Wf).__worklist;var ha=(this||Wf).__leavelist;S.push(new b(B,null,null,null));for(ha.push(new b(null,null,null,null));S.length;)if(B=S.pop(),B===L){B=ha.pop();var qa=this.__execute(C.leave,B);if((this||Wf).__state===u||qa===u)break}else if(B.node){qa=this.__execute(C.enter,B);if((this||Wf).__state===u||qa===u)break;S.push(L);ha.push(B);if((this||Wf).__state!==v&&qa!==v){qa=B.node;var D=qa.type||B.wrap;var P=(this||Wf).__keys[D];if(!P)if((this||Wf).__fallback)P=this.__fallback(qa);else throw Error("Unknown node type "+
D+".");for(G=P.length;0<=--G;){var J=P[G];if(N=qa[J])if(Array.isArray(N))for(F=N.length;0<=--F;){if(N[F]&&!a(ha,N[F])){if(D!==q.ObjectExpression&&D!==q.ObjectPattern||"properties"!==P[G])if(l(N[F]))B=new b(N[F],[J,F],null,null);else continue;else B=new b(N[F],[J,F],"Property",null);S.push(B)}}else l(N)&&!a(ha,N)&&S.push(new b(N,J,null,null))}}}};e.prototype.replace=function(B,C){function G(T){if(T.ref.remove()){var fa=T.ref.key;var Ra=T.ref.parent;for(T=ha.length;T--;){var gb=ha[T];if(gb.ref&&gb.ref.parent===
Ra){if(gb.ref.key<fa)break;--gb.ref.key}}}}var F,N,L;this.__initialize(B,C);var S={};var ha=(this||Wf).__worklist;var qa=(this||Wf).__leavelist;var D={root:B};var P=new b(B,null,null,new n(D,"root"));ha.push(P);for(qa.push(P);ha.length;)if(P=ha.pop(),P===S){P=qa.pop();var J=this.__execute(C.leave,P);void 0!==J&&J!==u&&J!==v&&J!==y&&P.ref.replace(J);(this||Wf).__state!==y&&J!==y||G(P);if((this||Wf).__state===u||J===u)break}else{J=this.__execute(C.enter,P);void 0!==J&&J!==u&&J!==v&&J!==y&&(P.ref.replace(J),
P.node=J);if((this||Wf).__state===y||J===y)G(P),P.node=null;if((this||Wf).__state===u||J===u)break;if(B=P.node)if(ha.push(S),qa.push(P),(this||Wf).__state!==v&&J!==v){J=B.type||P.wrap;var M=(this||Wf).__keys[J];if(!M)if((this||Wf).__fallback)M=this.__fallback(B);else throw Error("Unknown node type "+J+".");for(F=M.length;0<=--F;){var X=M[F];if(L=B[X])if(Array.isArray(L))for(N=L.length;0<=--N;){if(L[N]){if(J!==q.ObjectExpression&&J!==q.ObjectPattern||"properties"!==M[F])if(l(L[N]))P=new b(L[N],[X,
N],null,new n(L,N));else continue;else P=new b(L[N],[X,N],"Property",new n(L,N));ha.push(P)}}else l(L)&&ha.push(new b(L,X,null,new n(B,X)))}}}return D.root};c.Syntax=q;c.traverse=f;c.replace=function(B,C){return(new e).replace(B,C)};c.attachComments=function(B,C,G){var F=[],N;if(!B.range)throw Error("attachComments needs range information");if(!G.length){if(C.length){var L=0;for(N=C.length;L<N;L+=1)G=d(C[L]),G.extendedRange=[0,B.range[0]],F.push(G);B.leadingComments=F}return B}L=0;for(N=C.length;L<
N;L+=1)F.push(m(d(C[L]),G));var S=0;f(B,{enter:function(ha){for(var qa;S<F.length;){qa=F[S];if(qa.extendedRange[1]>ha.range[0])break;qa.extendedRange[1]===ha.range[0]?(ha.leadingComments||(ha.leadingComments=[]),ha.leadingComments.push(qa),F.splice(S,1)):S+=1}if(S===F.length)return z.Break;if(F[S].extendedRange[0]>ha.range[1])return z.Skip}});S=0;f(B,{leave:function(ha){for(var qa;S<F.length;){qa=F[S];if(ha.range[1]<qa.extendedRange[0])break;ha.range[1]===qa.extendedRange[0]?(ha.trailingComments||
(ha.trailingComments=[]),ha.trailingComments.push(qa),F.splice(S,1)):S+=1}if(S===F.length)return z.Break;if(F[S].extendedRange[0]>ha.range[1])return z.Skip}});return B};c.VisitorKeys=r;c.VisitorOption=z;c.Controller=e;c.cloneEnvironment=function(){return h({})};return c})(sQ);var t1={};(function(){function c(d){if(null==d)return!1;switch(d.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "DebuggerStatement":case "DoWhileStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "IfStatement":case "LabeledStatement":case "ReturnStatement":case "SwitchStatement":case "ThrowStatement":case "TryStatement":case "VariableDeclaration":case "WhileStatement":case "WithStatement":return!0}return!1}
function h(d){switch(d.type){case "IfStatement":return null!=d.alternate?d.alternate:d.consequent;case "LabeledStatement":case "ForStatement":case "ForInStatement":case "WhileStatement":case "WithStatement":return d.body}return null}t1={isExpression:function(d){if(null==d)return!1;switch(d.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "ConditionalExpression":case "FunctionExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "NewExpression":case "ObjectExpression":case "SequenceExpression":case "ThisExpression":case "UnaryExpression":case "UpdateExpression":return!0}return!1},
isStatement:c,isIterationStatement:function(d){if(null==d)return!1;switch(d.type){case "DoWhileStatement":case "ForInStatement":case "ForStatement":case "WhileStatement":return!0}return!1},isSourceElement:function(d){return c(d)||null!=d&&"FunctionDeclaration"===d.type},isProblematicIfStatement:function(d){if("IfStatement"!==d.type||null==d.alternate)return!1;d=d.consequent;do{if("IfStatement"===d.type&&null==d.alternate)return!0;d=h(d)}while(d);return!1},trailingStatement:h}})();var eda=t1,u1={};
(function(){function c(f){if(65535>=f)return String.fromCharCode(f);var m=String.fromCharCode(Math.floor((f-65536)/1024)+55296);f=String.fromCharCode((f-65536)%1024+56320);return m+f}var h;var d=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var k=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
var n=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/;
var b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
var e=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];var l=Array(128);for(h=0;128>h;++h)l[h]=97<=h&&122>=h||65<=h&&90>=h||36===h||95===h;var a=Array(128);for(h=0;128>h;++h)a[h]=97<=h&&122>=h||65<=h&&90>=h||48<=h&&57>=h||36===h||95===h;u1={isDecimalDigit:function(f){return 48<=f&&57>=f},isHexDigit:function(f){return 48<=f&&57>=f||97<=f&&102>=f||65<=f&&70>=f},isOctalDigit:function(f){return 48<=f&&55>=f},isWhiteSpace:function(f){return 32===f||9===f||11===f||12===
f||160===f||5760<=f&&0<=e.indexOf(f)},isLineTerminator:function(f){return 10===f||13===f||8232===f||8233===f},isIdentifierStartES5:function(f){return 128>f?l[f]:d.test(c(f))},isIdentifierPartES5:function(f){return 128>f?a[f]:k.test(c(f))},isIdentifierStartES6:function(f){return 128>f?l[f]:n.test(c(f))},isIdentifierPartES6:function(f){return 128>f?a[f]:b.test(c(f))}}})();var v1=u1,w1={};(function(){function c(l,a){return a||"yield"!==l?h(l,a):!1}function h(l,a){if(a)a:switch(l){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "let":a=
!0;break a;default:a=!1}if(a)return!0;switch(l.length){case 2:return"if"===l||"in"===l||"do"===l;case 3:return"var"===l||"for"===l||"new"===l||"try"===l;case 4:return"this"===l||"else"===l||"case"===l||"void"===l||"with"===l||"enum"===l;case 5:return"while"===l||"break"===l||"catch"===l||"throw"===l||"const"===l||"yield"===l||"class"===l||"super"===l;case 6:return"return"===l||"typeof"===l||"delete"===l||"switch"===l||"export"===l||"import"===l;case 7:return"default"===l||"finally"===l||"extends"===
l;case 8:return"function"===l||"continue"===l||"debugger"===l;case 10:return"instanceof"===l;default:return!1}}function d(l,a){return"null"===l||"true"===l||"false"===l||c(l,a)}function k(l,a){return"null"===l||"true"===l||"false"===l||h(l,a)}function n(l){var a;if(0===l.length)return!1;var f=l.charCodeAt(0);if(!e.isIdentifierStartES5(f))return!1;var m=1;for(a=l.length;m<a;++m)if(f=l.charCodeAt(m),!e.isIdentifierPartES5(f))return!1;return!0}function b(l){var a;if(0===l.length)return!1;var f=e.isIdentifierStartES6;
var m=0;for(a=l.length;m<a;++m){var q=l.charCodeAt(m);if(55296<=q&&56319>=q){++m;if(m>=a)return!1;var r=l.charCodeAt(m);if(!(56320<=r&&57343>=r))return!1;q=1024*(q-55296)+(r-56320)+65536}if(!f(q))return!1;f=e.isIdentifierPartES6}return!0}var e=v1;w1={isKeywordES5:c,isKeywordES6:h,isReservedWordES5:d,isReservedWordES6:k,isRestrictedWord:function(l){return"eval"===l||"arguments"===l},isIdentifierNameES5:n,isIdentifierNameES6:b,isIdentifierES5:function(l,a){return n(l)&&!d(l,a)},isIdentifierES6:function(l,
a){return b(l)&&!k(l,a)}}})();var fda=w1,xE={};xE.ast=eda;xE.code=v1;xE.keyword=fda;var ll={getArg:function(c,h,d){if(h in c)return c[h];if(3===arguments.length)return d;throw Error('"'+h+'" is a required argument.');}},AT=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,g7=/^data:.+,.+$/;ll.urlParse=Dn;ll.urlGenerate=oo;ll.normalize=Vl;ll.join=Dw;ll.isAbsolute=function(c){return"/"===c.charAt(0)||AT.test(c)};ll.relative=function(c,h){""===c&&(c=".");c=c.replace(/\/$/,"");for(var d=
0;0!==h.indexOf(c+"/");){var k=c.lastIndexOf("/");if(0>k)return h;c=c.slice(0,k);if(c.match(/^([^\/]+:\/)?\/*$/))return h;++d}return Array(d+1).join("../")+h.substr(c.length+1)};var x1=!("__proto__"in Object.create(null));ll.toSetString=x1?Jg:qg;ll.fromSetString=x1?Jg:ot;ll.compareByOriginalPositions=function(c,h,d){var k=O(c.source,h.source);if(0!==k)return k;k=c.originalLine-h.originalLine;if(0!==k)return k;k=c.originalColumn-h.originalColumn;if(0!==k||d)return k;k=c.generatedColumn-h.generatedColumn;
if(0!==k)return k;k=c.generatedLine-h.generatedLine;return 0!==k?k:O(c.name,h.name)};ll.compareByGeneratedPositionsDeflated=function(c,h,d){var k=c.generatedLine-h.generatedLine;if(0!==k)return k;k=c.generatedColumn-h.generatedColumn;if(0!==k||d)return k;k=O(c.source,h.source);if(0!==k)return k;k=c.originalLine-h.originalLine;if(0!==k)return k;k=c.originalColumn-h.originalColumn;return 0!==k?k:O(c.name,h.name)};ll.compareByGeneratedPositionsInflated=function(c,h){var d=c.generatedLine-h.generatedLine;
if(0!==d)return d;d=c.generatedColumn-h.generatedColumn;if(0!==d)return d;d=O(c.source,h.source);if(0!==d)return d;d=c.originalLine-h.originalLine;if(0!==d)return d;d=c.originalColumn-h.originalColumn;return 0!==d?d:O(c.name,h.name)};ll.parseSourceMapInput=function(c){return JSON.parse(c.replace(/^\)]}'[^\n]*\n/,""))};ll.computeSourceURL=function(c,h,d){h=h||"";c&&("/"!==c[c.length-1]&&"/"!==h[0]&&(c+="/"),h=c+h);if(d){c=Dn(d);if(!c)throw Error("sourceMapURL could not be parsed");c.path&&(d=c.path.lastIndexOf("/"),
0<=d&&(c.path=c.path.substring(0,d+1)));h=Dw(oo(c),h)}return Vl(h)};var vJ={},y1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");vJ.encode=function(c){if(0<=c&&c<y1.length)return y1[c];throw new TypeError("Must be between 0 and 63: "+c);};vJ.decode=function(c){return 65<=c&&90>=c?c-65:97<=c&&122>=c?c-97+26:48<=c&&57>=c?c-48+52:43==c?62:47==c?63:-1};var bC={encode:function(c){var h="",d=0>c?(-c<<1)+1:c<<1;do c=d&31,d>>>=5,0<d&&(c|=32),h+=vJ.encode(c);while(0<d);return h},
decode:function(c,h,d){var k=c.length,n=0,b=0;do{if(h>=k)throw Error("Expected more digits in base 64 VLQ value.");var e=vJ.decode(c.charCodeAt(h++));if(-1===e)throw Error("Invalid base64 digit: "+c.charAt(h-1));var l=!!(e&32);e&=31;n+=e<<b;b+=5}while(l);c=n>>1;d.value=1===(n&1)?-c:c;d.rest=h}},Dm="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,tQ=ll,uQ=Object.prototype.hasOwnProperty,py="undefined"!==typeof Map;da.fromArray=function(c,h){for(var d=new da,k=0,n=c.length;k<
n;k++)d.add(c[k],h);return d};da.prototype.size=function(){return py?(this||Dm)._set.size:Object.getOwnPropertyNames((this||Dm)._set).length};da.prototype.add=function(c,h){var d=py?c:tQ.toSetString(c),k=py?this.has(c):uQ.call((this||Dm)._set,d),n=(this||Dm)._array.length;k&&!h||(this||Dm)._array.push(c);k||(py?(this||Dm)._set.set(c,n):(this||Dm)._set[d]=n)};da.prototype.has=function(c){if(py)return(this||Dm)._set.has(c);c=tQ.toSetString(c);return uQ.call((this||Dm)._set,c)};da.prototype.indexOf=
function(c){if(py){var h=(this||Dm)._set.get(c);if(0<=h)return h}else if(h=tQ.toSetString(c),uQ.call((this||Dm)._set,h))return(this||Dm)._set[h];throw Error('"'+c+'" is not in the set.');};da.prototype.at=function(c){if(0<=c&&c<(this||Dm)._array.length)return(this||Dm)._array[c];throw Error("No element indexed by "+c);};da.prototype.toArray=function(){return(this||Dm)._array.slice()};var qq="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,z1=ll;La.prototype.unsortedForEach=
function(c,h){(this||qq)._array.forEach(c,h)};La.prototype.add=function(c){var h=(this||qq)._last,d=h.generatedLine,k=c.generatedLine,n=h.generatedColumn,b=c.generatedColumn;k>d||k==d&&b>=n||0>=z1.compareByGeneratedPositionsInflated(h,c)?(this||qq)._last=c:(this||qq)._sorted=!1;(this||qq)._array.push(c)};La.prototype.toArray=function(){(this||qq)._sorted||((this||qq)._array.sort(z1.compareByGeneratedPositionsInflated),(this||qq)._sorted=!0);return(this||qq)._array};var kh="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,Ok=ll,fG=da,h7=La;ab.prototype._version=3;ab.fromSourceMap=function(c){var h=c.sourceRoot,d=new ab({file:c.file,sourceRoot:h});c.eachMapping(function(k){var n={generated:{line:k.generatedLine,column:k.generatedColumn}};null!=k.source&&(n.source=k.source,null!=h&&(n.source=Ok.relative(h,n.source)),n.original={line:k.originalLine,column:k.originalColumn},null!=k.name&&(n.name=k.name));d.addMapping(n)});c.sources.forEach(function(k){var n=k;null!==h&&
(n=Ok.relative(h,k));d._sources.has(n)||d._sources.add(n);n=c.sourceContentFor(k);null!=n&&d.setSourceContent(k,n)});return d};ab.prototype.addMapping=function(c){var h=Ok.getArg(c,"generated"),d=Ok.getArg(c,"original",null),k=Ok.getArg(c,"source",null);c=Ok.getArg(c,"name",null);(this||kh)._skipValidation||this._validateMapping(h,d,k,c);null!=k&&(k=String(k),(this||kh)._sources.has(k)||(this||kh)._sources.add(k));null!=c&&(c=String(c),(this||kh)._names.has(c)||(this||kh)._names.add(c));(this||kh)._mappings.add({generatedLine:h.line,
generatedColumn:h.column,originalLine:null!=d&&d.line,originalColumn:null!=d&&d.column,source:k,name:c})};ab.prototype.setSourceContent=function(c,h){null!=(this||kh)._sourceRoot&&(c=Ok.relative((this||kh)._sourceRoot,c));null!=h?((this||kh)._sourcesContents||((this||kh)._sourcesContents=Object.create(null)),(this||kh)._sourcesContents[Ok.toSetString(c)]=h):(this||kh)._sourcesContents&&(delete (this||kh)._sourcesContents[Ok.toSetString(c)],0===Object.keys((this||kh)._sourcesContents).length&&((this||
kh)._sourcesContents=null))};ab.prototype.applySourceMap=function(c,h,d){var k=h;if(null==h){if(null==c.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');k=c.file}var n=(this||kh)._sourceRoot;null!=n&&(k=Ok.relative(n,k));var b=new fG,e=new fG;(this||kh)._mappings.unsortedForEach(function(l){if(l.source===k&&null!=l.originalLine){var a=c.originalPositionFor({line:l.originalLine,column:l.originalColumn});
null!=a.source&&(l.source=a.source,null!=d&&(l.source=Ok.join(d,l.source)),null!=n&&(l.source=Ok.relative(n,l.source)),l.originalLine=a.line,l.originalColumn=a.column,null!=a.name&&(l.name=a.name))}a=l.source;null==a||b.has(a)||b.add(a);l=l.name;null==l||e.has(l)||e.add(l)},this||kh);(this||kh)._sources=b;(this||kh)._names=e;c.sources.forEach(function(l){var a=c.sourceContentFor(l);null!=a&&(null!=d&&(l=Ok.join(d,l)),null!=n&&(l=Ok.relative(n,l)),this.setSourceContent(l,a))},this||kh)};ab.prototype._validateMapping=
function(c,h,d,k){if(h&&"number"!==typeof h.line&&"number"!==typeof h.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(c&&"line"in c&&"column"in c&&0<c.line&&0<=c.column&&!h&&!d&&!k||c&&"line"in c&&"column"in c&&h&&"line"in h&&"column"in h&&0<c.line&&0<=c.column&&0<h.line&&0<=h.column&&
d))throw Error("Invalid mapping: "+JSON.stringify({generated:c,source:d,original:h,name:k}));};ab.prototype._serializeMappings=function(){for(var c=0,h=1,d=0,k=0,n=0,b=0,e="",l,a,f,m=(this||kh)._mappings.toArray(),q=0,r=m.length;q<r;q++){a=m[q];l="";if(a.generatedLine!==h)for(c=0;a.generatedLine!==h;)l+=";",h++;else if(0<q){if(!Ok.compareByGeneratedPositionsInflated(a,m[q-1]))continue;l+=","}l+=bC.encode(a.generatedColumn-c);c=a.generatedColumn;null!=a.source&&(f=(this||kh)._sources.indexOf(a.source),
l+=bC.encode(f-b),b=f,l+=bC.encode(a.originalLine-1-k),k=a.originalLine-1,l+=bC.encode(a.originalColumn-d),d=a.originalColumn,null!=a.name&&(a=(this||kh)._names.indexOf(a.name),l+=bC.encode(a-n),n=a));e+=l}return e};ab.prototype._generateSourcesContent=function(c,h){return c.map(function(d){if(!(this||kh)._sourcesContents)return null;null!=h&&(d=Ok.relative(h,d));d=Ok.toSetString(d);return Object.prototype.hasOwnProperty.call((this||kh)._sourcesContents,d)?(this||kh)._sourcesContents[d]:null},this||
kh)};ab.prototype.toJSON=function(){var c={version:(this||kh)._version,sources:(this||kh)._sources.toArray(),names:(this||kh)._names.toArray(),mappings:this._serializeMappings()};null!=(this||kh)._file&&(c.file=(this||kh)._file);null!=(this||kh)._sourceRoot&&(c.sourceRoot=(this||kh)._sourceRoot);(this||kh)._sourcesContents&&(c.sourcesContent=this._generateSourcesContent(c.sources,c.sourceRoot));return c};ab.prototype.toString=function(){return JSON.stringify(this.toJSON())};var gG={GREATEST_LOWER_BOUND:1,
LEAST_UPPER_BOUND:2,search:function(c,h,d,k){if(0===h.length)return-1;c=Fb(-1,h.length,c,h,d,k||gG.GREATEST_LOWER_BOUND);if(0>c)return-1;for(;0<=c-1&&0===d(h[c],h[c-1],!0);)--c;return c}},ee="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sf=ll,vQ=gG,yA=da,yE=function(c,h){Rc(c,h,0,c.length-1)};Cd.fromSourceMap=function(c,h){return Vd.fromSourceMap(c,h)};Cd.prototype._version=3;Cd.prototype.__generatedMappings=null;Object.defineProperty(Cd.prototype,"_generatedMappings",
{configurable:!0,enumerable:!0,get:function(){(this||ee).__generatedMappings||this._parseMappings((this||ee)._mappings,(this||ee).sourceRoot);return(this||ee).__generatedMappings}});Cd.prototype.__originalMappings=null;Object.defineProperty(Cd.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){(this||ee).__originalMappings||this._parseMappings((this||ee)._mappings,(this||ee).sourceRoot);return(this||ee).__originalMappings}});Cd.prototype._charIsMappingSeparator=function(c,
h){c=c.charAt(h);return";"===c||","===c};Cd.prototype._parseMappings=function(c,h){throw Error("Subclasses must implement _parseMappings");};Cd.GENERATED_ORDER=1;Cd.ORIGINAL_ORDER=2;Cd.GREATEST_LOWER_BOUND=1;Cd.LEAST_UPPER_BOUND=2;Cd.prototype.eachMapping=function(c,h,d){h=h||null;switch(d||Cd.GENERATED_ORDER){case Cd.GENERATED_ORDER:d=(this||ee)._generatedMappings;break;case Cd.ORIGINAL_ORDER:d=(this||ee)._originalMappings;break;default:throw Error("Unknown order of iteration.");}var k=(this||ee).sourceRoot;
d.map(function(n){var b=null===n.source?null:(this||ee)._sources.at(n.source);b=sf.computeSourceURL(k,b,(this||ee)._sourceMapURL);return{source:b,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:(this||ee)._names.at(n.name)}},this||ee).forEach(c,h)};Cd.prototype.allGeneratedPositionsFor=function(c){var h=sf.getArg(c,"line"),d={source:sf.getArg(c,"source"),originalLine:h,originalColumn:sf.getArg(c,"column",
0)};d.source=this._findSourceIndex(d.source);if(0>d.source)return[];var k=[];d=this._findMapping(d,(this||ee)._originalMappings,"originalLine","originalColumn",sf.compareByOriginalPositions,vQ.LEAST_UPPER_BOUND);if(0<=d){var n=(this||ee)._originalMappings[d];if(void 0===c.column)for(h=n.originalLine;n&&n.originalLine===h;)k.push({line:sf.getArg(n,"generatedLine",null),column:sf.getArg(n,"generatedColumn",null),lastColumn:sf.getArg(n,"lastGeneratedColumn",null)}),n=(this||ee)._originalMappings[++d];
else for(c=n.originalColumn;n&&n.originalLine===h&&n.originalColumn==c;)k.push({line:sf.getArg(n,"generatedLine",null),column:sf.getArg(n,"generatedColumn",null),lastColumn:sf.getArg(n,"lastGeneratedColumn",null)}),n=(this||ee)._originalMappings[++d]}return k};Vd.prototype=Object.create(Cd.prototype);Vd.prototype.consumer=Cd;Vd.prototype._findSourceIndex=function(c){var h=c;null!=(this||ee).sourceRoot&&(h=sf.relative((this||ee).sourceRoot,h));if((this||ee)._sources.has(h))return(this||ee)._sources.indexOf(h);
for(h=0;h<(this||ee)._absoluteSources.length;++h)if((this||ee)._absoluteSources[h]==c)return h;return-1};Vd.fromSourceMap=function(c,h){var d=Object.create(Vd.prototype),k=d._names=yA.fromArray(c._names.toArray(),!0),n=d._sources=yA.fromArray(c._sources.toArray(),!0);d.sourceRoot=c._sourceRoot;d.sourcesContent=c._generateSourcesContent(d._sources.toArray(),d.sourceRoot);d.file=c._file;d._sourceMapURL=h;d._absoluteSources=d._sources.toArray().map(function(q){return sf.computeSourceURL(d.sourceRoot,
q,h)});c=c._mappings.toArray().slice();for(var b=d.__generatedMappings=[],e=d.__originalMappings=[],l=0,a=c.length;l<a;l++){var f=c[l],m=new kf;m.generatedLine=f.generatedLine;m.generatedColumn=f.generatedColumn;f.source&&(m.source=n.indexOf(f.source),m.originalLine=f.originalLine,m.originalColumn=f.originalColumn,f.name&&(m.name=k.indexOf(f.name)),e.push(m));b.push(m)}yE(d.__originalMappings,sf.compareByOriginalPositions);return d};Vd.prototype._version=3;Object.defineProperty(Vd.prototype,"sources",
{get:function(){return(this||ee)._absoluteSources.slice()}});Vd.prototype._parseMappings=function(c,h){h=1;for(var d=0,k=0,n=0,b=0,e=0,l=c.length,a=0,f={},m={},q=[],r=[],u,v,y,z,B;a<l;)if(";"===c.charAt(a))h++,a++,d=0;else if(","===c.charAt(a))a++;else{u=new kf;u.generatedLine=h;for(z=a;z<l&&!this._charIsMappingSeparator(c,z);z++);v=c.slice(a,z);if(y=f[v])a+=v.length;else{for(y=[];a<z;)bC.decode(c,a,m),B=m.value,a=m.rest,y.push(B);if(2===y.length)throw Error("Found a source, but no line and column");
if(3===y.length)throw Error("Found a source and line, but no column");f[v]=y}u.generatedColumn=d+y[0];d=u.generatedColumn;1<y.length&&(u.source=b+y[1],b+=y[1],u.originalLine=k+y[2],k=u.originalLine,u.originalLine+=1,u.originalColumn=n+y[3],n=u.originalColumn,4<y.length&&(u.name=e+y[4],e+=y[4]));r.push(u);"number"===typeof u.originalLine&&q.push(u)}yE(r,sf.compareByGeneratedPositionsDeflated);(this||ee).__generatedMappings=r;yE(q,sf.compareByOriginalPositions);(this||ee).__originalMappings=q};Vd.prototype._findMapping=
function(c,h,d,k,n,b){if(0>=c[d])throw new TypeError("Line must be greater than or equal to 1, got "+c[d]);if(0>c[k])throw new TypeError("Column must be greater than or equal to 0, got "+c[k]);return vQ.search(c,h,n,b)};Vd.prototype.computeColumnSpans=function(){for(var c=0;c<(this||ee)._generatedMappings.length;++c){var h=(this||ee)._generatedMappings[c];if(c+1<(this||ee)._generatedMappings.length){var d=(this||ee)._generatedMappings[c+1];if(h.generatedLine===d.generatedLine){h.lastGeneratedColumn=
d.generatedColumn-1;continue}}h.lastGeneratedColumn=Infinity}};Vd.prototype.originalPositionFor=function(c){var h={generatedLine:sf.getArg(c,"line"),generatedColumn:sf.getArg(c,"column")};c=this._findMapping(h,(this||ee)._generatedMappings,"generatedLine","generatedColumn",sf.compareByGeneratedPositionsDeflated,sf.getArg(c,"bias",Cd.GREATEST_LOWER_BOUND));if(0<=c&&(c=(this||ee)._generatedMappings[c],c.generatedLine===h.generatedLine)){h=sf.getArg(c,"source",null);null!==h&&(h=(this||ee)._sources.at(h),
h=sf.computeSourceURL((this||ee).sourceRoot,h,(this||ee)._sourceMapURL));var d=sf.getArg(c,"name",null);null!==d&&(d=(this||ee)._names.at(d));return{source:h,line:sf.getArg(c,"originalLine",null),column:sf.getArg(c,"originalColumn",null),name:d}}return{source:null,line:null,column:null,name:null}};Vd.prototype.hasContentsOfAllSources=function(){return(this||ee).sourcesContent?(this||ee).sourcesContent.length>=(this||ee)._sources.size()&&!(this||ee).sourcesContent.some(function(c){return null==c}):
!1};Vd.prototype.sourceContentFor=function(c,h){if(!(this||ee).sourcesContent)return null;var d=this._findSourceIndex(c);if(0<=d)return(this||ee).sourcesContent[d];null!=(this||ee).sourceRoot&&(c=sf.relative((this||ee).sourceRoot,c));var k;if(null!=(this||ee).sourceRoot&&(k=sf.urlParse((this||ee).sourceRoot))){d=c.replace(/^file:\/\//,"");if("file"==k.scheme&&(this||ee)._sources.has(d))return(this||ee).sourcesContent[(this||ee)._sources.indexOf(d)];if((!k.path||"/"==k.path)&&(this||ee)._sources.has("/"+
c))return(this||ee).sourcesContent[(this||ee)._sources.indexOf("/"+c)]}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};Vd.prototype.generatedPositionFor=function(c){var h=sf.getArg(c,"source");h=this._findSourceIndex(h);if(0>h)return{line:null,column:null,lastColumn:null};h={source:h,originalLine:sf.getArg(c,"line"),originalColumn:sf.getArg(c,"column")};c=this._findMapping(h,(this||ee)._originalMappings,"originalLine","originalColumn",sf.compareByOriginalPositions,sf.getArg(c,"bias",
Cd.GREATEST_LOWER_BOUND));return 0<=c&&(c=(this||ee)._originalMappings[c],c.source===h.source)?{line:sf.getArg(c,"generatedLine",null),column:sf.getArg(c,"generatedColumn",null),lastColumn:sf.getArg(c,"lastGeneratedColumn",null)}:{line:null,column:null,lastColumn:null}};ff.prototype=Object.create(Cd.prototype);ff.prototype.constructor=Cd;ff.prototype._version=3;Object.defineProperty(ff.prototype,"sources",{get:function(){for(var c=[],h=0;h<(this||ee)._sections.length;h++)for(var d=0;d<(this||ee)._sections[h].consumer.sources.length;d++)c.push((this||
ee)._sections[h].consumer.sources[d]);return c}});ff.prototype.originalPositionFor=function(c){var h={generatedLine:sf.getArg(c,"line"),generatedColumn:sf.getArg(c,"column")},d=vQ.search(h,(this||ee)._sections,function(k,n){var b=k.generatedLine-n.generatedOffset.generatedLine;return b?b:k.generatedColumn-n.generatedOffset.generatedColumn});return(d=(this||ee)._sections[d])?d.consumer.originalPositionFor({line:h.generatedLine-(d.generatedOffset.generatedLine-1),column:h.generatedColumn-(d.generatedOffset.generatedLine===
h.generatedLine?d.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}};ff.prototype.hasContentsOfAllSources=function(){return(this||ee)._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})};ff.prototype.sourceContentFor=function(c,h){for(var d=0;d<(this||ee)._sections.length;d++){var k=(this||ee)._sections[d].consumer.sourceContentFor(c,!0);if(k)return k}if(h)return null;throw Error('"'+c+'" is not in the SourceMap.');};ff.prototype.generatedPositionFor=
function(c){for(var h=0;h<(this||ee)._sections.length;h++){var d=(this||ee)._sections[h];if(-1!==d.consumer._findSourceIndex(sf.getArg(c,"source"))){var k=d.consumer.generatedPositionFor(c);if(k)return{line:k.line+(d.generatedOffset.generatedLine-1),column:k.column+(d.generatedOffset.generatedLine===k.line?d.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}};ff.prototype._parseMappings=function(c,h){(this||ee).__generatedMappings=[];(this||ee).__originalMappings=[];for(c=0;c<(this||
ee)._sections.length;c++){h=(this||ee)._sections[c];for(var d=h.consumer._generatedMappings,k=0;k<d.length;k++){var n=d[k],b=h.consumer._sources.at(n.source);b=sf.computeSourceURL(h.consumer.sourceRoot,b,(this||ee)._sourceMapURL);(this||ee)._sources.add(b);b=(this||ee)._sources.indexOf(b);var e=null;n.name&&(e=h.consumer._names.at(n.name),(this||ee)._names.add(e),e=(this||ee)._names.indexOf(e));n={source:b,generatedLine:n.generatedLine+(h.generatedOffset.generatedLine-1),generatedColumn:n.generatedColumn+
(h.generatedOffset.generatedLine===n.generatedLine?h.generatedOffset.generatedColumn-1:0),originalLine:n.originalLine,originalColumn:n.originalColumn,name:e};(this||ee).__generatedMappings.push(n);"number"===typeof n.originalLine&&(this||ee).__originalMappings.push(n)}}yE((this||ee).__generatedMappings,sf.compareByGeneratedPositionsDeflated);yE((this||ee).__originalMappings,sf.compareByOriginalPositions)};var Xh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,wJ=ll,
gda=/(\r?\n)/;Rf.fromStringWithSourceMap=function(c,h,d){function k(q,r){if(null===q||void 0===q.source)n.add(r);else{var u=d?wJ.join(d,q.source):q.source;n.add(new Rf(q.originalLine,q.originalColumn,u,r,q.name))}}var n=new Rf,b=c.split(gda),e=0,l=function(){var q=e<b.length?b[e++]:void 0,r=(e<b.length?b[e++]:void 0)||"";return q+r},a=1,f=0,m=null;h.eachMapping(function(q){if(null!==m)if(a<q.generatedLine)k(m,l()),a++,f=0;else{var r=b[e]||"",u=r.substr(0,q.generatedColumn-f);b[e]=r.substr(q.generatedColumn-
f);f=q.generatedColumn;k(m,u);m=q;return}for(;a<q.generatedLine;)n.add(l()),a++;f<q.generatedColumn&&(r=b[e]||"",n.add(r.substr(0,q.generatedColumn)),b[e]=r.substr(q.generatedColumn),f=q.generatedColumn);m=q},this||Xh);e<b.length&&(m&&k(m,l()),n.add(b.splice(e).join("")));h.sources.forEach(function(q){var r=h.sourceContentFor(q);null!=r&&(null!=d&&(q=wJ.join(d,q)),n.setSourceContent(q,r))});return n};Rf.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(h){this.add(h)},this||Xh);else if(c.$$$isSourceNode$$$||
"string"===typeof c)c&&(this||Xh).children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Xh};Rf.prototype.prepend=function(c){if(Array.isArray(c))for(var h=c.length-1;0<=h;h--)this.prepend(c[h]);else if(c.$$$isSourceNode$$$||"string"===typeof c)(this||Xh).children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this||Xh};Rf.prototype.walk=function(c){for(var h,
d=0,k=(this||Xh).children.length;d<k;d++)h=(this||Xh).children[d],h.$$$isSourceNode$$$?h.walk(c):""!==h&&c(h,{source:(this||Xh).source,line:(this||Xh).line,column:(this||Xh).column,name:(this||Xh).name})};Rf.prototype.join=function(c){var h,d=(this||Xh).children.length;if(0<d){var k=[];for(h=0;h<d-1;h++)k.push((this||Xh).children[h]),k.push(c);k.push((this||Xh).children[h]);(this||Xh).children=k}return this||Xh};Rf.prototype.replaceRight=function(c,h){var d=(this||Xh).children[(this||Xh).children.length-
1];d.$$$isSourceNode$$$?d.replaceRight(c,h):"string"===typeof d?(this||Xh).children[(this||Xh).children.length-1]=d.replace(c,h):(this||Xh).children.push("".replace(c,h));return this||Xh};Rf.prototype.setSourceContent=function(c,h){(this||Xh).sourceContents[wJ.toSetString(c)]=h};Rf.prototype.walkSourceContents=function(c){for(var h=0,d=(this||Xh).children.length;h<d;h++)(this||Xh).children[h].$$$isSourceNode$$$&&(this||Xh).children[h].walkSourceContents(c);var k=Object.keys((this||Xh).sourceContents);
h=0;for(d=k.length;h<d;h++)c(wJ.fromSetString(k[h]),(this||Xh).sourceContents[k[h]])};Rf.prototype.toString=function(){var c="";this.walk(function(h){c+=h});return c};Rf.prototype.toStringWithSourceMap=function(c){var h="",d=1,k=0,n=new ab(c),b=!1,e=null,l=null,a=null,f=null;this.walk(function(m,q){h+=m;null!==q.source&&null!==q.line&&null!==q.column?(e===q.source&&l===q.line&&a===q.column&&f===q.name||n.addMapping({source:q.source,original:{line:q.line,column:q.column},generated:{line:d,column:k},
name:q.name}),e=q.source,l=q.line,a=q.column,f=q.name,b=!0):b&&(n.addMapping({generated:{line:d,column:k}}),e=null,b=!1);for(var r=0,u=m.length;r<u;r++)10===m.charCodeAt(r)?(d++,k=0,r+1===u?(e=null,b=!1):b&&n.addMapping({source:q.source,original:{line:q.line,column:q.column},generated:{line:d,column:k},name:q.name})):k++});this.walkSourceContents(function(m,q){n.setSourceContent(m,q)});return{code:h,map:n}};var Gl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,rn=
{};(function(){function c(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:"\n",space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function h(Z,
sa){var ua="";for(sa|=0;0<sa;sa>>>=1,Z+=Z)sa&1&&(ua+=Z);return ua}function d(Z){var sa=Z.length;return sa&&Kb.code.isLineTerminator(Z.charCodeAt(sa-1))}function k(Z,sa){for(var ua in sa)sa.hasOwnProperty(ua)&&(Z[ua]=sa[ua]);return Z}function n(Z,sa){function ua(Pc){return"object"===typeof Pc&&Pc instanceof Object&&!(Pc instanceof RegExp)}var db;for(db in sa)if(sa.hasOwnProperty(db)){var Cb=sa[db];ua(Cb)?ua(Z[db])?n(Z[db],Cb):Z[db]=n({},Cb):Z[db]=Cb}return Z}function b(Z,sa){return 8232===(Z&-2)?(sa?
"u":"\\u")+(8232===Z?"2028":"2029"):10===Z||13===Z?(sa?"":"\\")+(10===Z?"n":"r"):String.fromCharCode(Z)}function e(Z,sa){if(8===Z)return"\\b";if(12===Z)return"\\f";if(9===Z)return"\\t";var ua=Z.toString(16).toUpperCase();return D||255<Z?"\\u"+"0000".slice(ua.length)+ua:0!==Z||Kb.code.isDecimalDigit(sa)?11===Z?"\\x0B":"\\x"+"00".slice(ua.length)+ua:"\\0"}function l(Z){if(92===Z)return"\\\\";if(10===Z)return"\\n";if(13===Z)return"\\r";if(8232===Z)return"\\u2028";if(8233===Z)return"\\u2029";throw Error("Incorrectly classified character");
}function a(Z){var sa,ua="";var db=0;for(sa=Z.length;db<sa;++db){var Cb=Z[db];ua+=Array.isArray(Cb)?a(Cb):Cb}return ua}function f(Z,sa){if(!ob)return Array.isArray(Z)?a(Z):Z;if(null==sa){if(Z instanceof S)return Z;sa={}}return null==sa.loc?new S(null,null,ob,Z,sa.name||null):new S(sa.loc.start.line,sa.loc.start.column,!0===ob?sa.loc.source||null:ob,Z,sa.name||null)}function m(){return fa?fa:" "}function q(Z,sa){var ua=f(Z).toString();if(0===ua.length)return[sa];var db=f(sa).toString();if(0===db.length)return[Z];
ua=ua.charCodeAt(ua.length-1);db=db.charCodeAt(0);return(43===ua||45===ua)&&ua===db||Kb.code.isIdentifierPartES5(ua)&&Kb.code.isIdentifierPartES5(db)||47===ua&&105===db?[Z,m(),sa]:Kb.code.isWhiteSpace(ua)||Kb.code.isLineTerminator(ua)||Kb.code.isWhiteSpace(db)||Kb.code.isLineTerminator(db)?[Z,sa]:[Z,fa,sa]}function r(Z){var sa=ha;ha+=qa;Z(ha);ha=sa}function u(Z,sa){if("Line"===Z.type){if(d(Z.value))return"//"+Z.value;sa="//"+Z.value;Ab||(sa+="\n");return sa}if(ia.format.indent.adjustMultilineComment&&
/[\n\r]/.test(Z.value)){var ua,db;Z=("/*"+Z.value+"*/").split(/\r\n|[\r\n]/);var Cb=Number.MAX_VALUE;var Pc=1;for(ua=Z.length;Pc<ua;++Pc){var Oc=Z[Pc];for(db=0;db<Oc.length&&Kb.code.isWhiteSpace(Oc.charCodeAt(db));)++db;Cb>db&&(Cb=db)}"undefined"!==typeof sa?(Oc=ha,"*"===Z[1][Cb]&&(sa+=" "),ha=sa):(Cb&1&&--Cb,Oc=ha);Pc=1;for(ua=Z.length;Pc<ua;++Pc)sa=f([ha,Z[Pc].slice(Cb)]),Z[Pc]=ob?sa.join(""):sa;ha=Oc;return Z.join("\n")}return"/*"+Z.value+"*/"}function v(Z,sa){var ua;if(Z.leadingComments&&0<Z.leadingComments.length){var db=
sa;if(Ab){var Cb=Z.leadingComments[0];sa=[];var Pc=Cb.extendedRange;var Oc=Cb.range;var kc=Nb.substring(Pc[0],Oc[0]);var be=(kc.match(/\n/g)||[]).length;0<be?(sa.push(h("\n",be)),sa.push([ha,u(Cb)])):(sa.push(kc),sa.push(u(Cb)));be=Oc;kc=1;for(ua=Z.leadingComments.length;kc<ua;kc++)Cb=Z.leadingComments[kc],Oc=Cb.range,be=Nb.substring(be[1],Oc[0]),be=(be.match(/\n/g)||[]).length,sa.push(h("\n",be)),sa.push([ha,u(Cb)]),be=Oc;kc=Nb.substring(Oc[1],Pc[1]);be=(kc.match(/\n/g)||[]).length;sa.push(h("\n",
be))}else for(Cb=Z.leadingComments[0],sa=[],ea&&Z.type===jc.Program&&0===Z.body.length&&sa.push("\n"),sa.push(u(Cb)),d(f(sa).toString())||sa.push("\n"),kc=1,ua=Z.leadingComments.length;kc<ua;++kc)Cb=Z.leadingComments[kc],Cb=[u(Cb)],d(f(Cb).toString())||Cb.push("\n"),sa.push([ha,Cb]);sa.push([ha,db])}if(Z.trailingComments)if(Ab)Cb=Z.trailingComments[0],Pc=Cb.extendedRange,Oc=Cb.range,kc=Nb.substring(Pc[0],Oc[0]),be=(kc.match(/\n/g)||[]).length,0<be?(sa.push(h("\n",be)),sa.push([ha,u(Cb)])):(sa.push(kc),
sa.push(u(Cb)));else{db=!d(f(sa).toString());kc=f([ha,sa,qa]).toString();for(ua=kc.length-1;0<=ua&&!Kb.code.isLineTerminator(kc.charCodeAt(ua));--ua);Pc=h(" ",kc.length-1-ua);kc=0;for(ua=Z.trailingComments.length;kc<ua;++kc)Cb=Z.trailingComments[kc],db?(sa=0===kc?[sa,qa]:[sa,Pc],sa.push(u(Cb,Pc))):sa=[sa,[ha,u(Cb)]],kc===ua-1||d(f(sa).toString())||(sa=[sa,"\n"])}return sa}function y(Z,sa,ua){for(var db=0;Z<sa;Z++)"\n"===Nb[Z]&&db++;for(Z=1;Z<db;Z++)ua.push(T)}function z(Z,sa,ua){return sa<ua?["(",
Z,")"]:Z}function B(Z){var sa;var ua=Z.split(/\r\n|\n/);Z=1;for(sa=ua.length;Z<sa;Z++)ua[Z]=T+ha+ua[Z];return ua}function C(){}function G(Z){return f(Z.name,Z)}function F(Z,sa){return Z.async?"async"+(sa?m():fa):""}function N(Z){return Z.generator&&!ia.moz.starlessGenerator?"*"+fa:""}function L(Z){var sa=Z.value,ua="";sa.async&&(ua+=F(sa,!Z.computed));sa.generator&&(ua+=N(sa)?"*":"");return ua}var S,ha,qa,D,P,J,M,X,T,fa,Ra,gb,ea,aa,ia,Aa,ob,Nb,Ab;var Kb=xE;var jc=sQ.Syntax;var ub={Sequence:0,Yield:1,
Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21};var Gc={"||":ub.LogicalOR,"&&":ub.LogicalAND,"|":ub.BitwiseOR,"^":ub.BitwiseXOR,"&":ub.BitwiseAND,"==":ub.Equality,"!=":ub.Equality,"===":ub.Equality,"!==":ub.Equality,is:ub.Equality,isnt:ub.Equality,"<":ub.Relational,
">":ub.Relational,"<=":ub.Relational,">=":ub.Relational,"in":ub.Relational,"instanceof":ub.Relational,"<<":ub.BitwiseSHIFT,">>":ub.BitwiseSHIFT,">>>":ub.BitwiseSHIFT,"+":ub.Additive,"-":ub.Additive,"*":ub.Multiplicative,"%":ub.Multiplicative,"/":ub.Multiplicative,"**":ub.Exponentiation};C.prototype.maybeBlock=function(Z,sa){var ua,db=this||Gl;var Cb=!ia.comment||!Z.leadingComments;if(Z.type===jc.BlockStatement&&Cb)return[fa,this.generateStatement(Z,sa)];if(Z.type===jc.EmptyStatement&&Cb)return";";
r(function(){ua=[T,[ha,db.generateStatement(Z,sa)]]});return ua};C.prototype.maybeBlockSuffix=function(Z,sa){var ua=d(f(sa).toString());return Z.type!==jc.BlockStatement||ia.comment&&Z.leadingComments||ua?ua?[sa,ha]:[sa,T,ha]:[sa,fa]};C.prototype.generatePattern=function(Z,sa,ua){return Z.type===jc.Identifier?G(Z):this.generateExpression(Z,sa,ua)};C.prototype.generateFunctionParams=function(Z){var sa;var ua=!1;if(Z.type!==jc.ArrowFunctionExpression||Z.rest||Z.defaults&&0!==Z.defaults.length||1!==
Z.params.length||Z.params[0].type!==jc.Identifier){var db=Z.type===jc.ArrowFunctionExpression?[F(Z,!1)]:[];db.push("(");Z.defaults&&(ua=!0);var Cb=0;for(sa=Z.params.length;Cb<sa;++Cb)ua&&Z.defaults[Cb]?db.push(this.generateAssignment(Z.params[Cb],Z.defaults[Cb],"=",ub.Assignment,7)):db.push(this.generatePattern(Z.params[Cb],ub.Assignment,7)),Cb+1<sa&&db.push(","+fa);Z.rest&&(Z.params.length&&db.push(","+fa),db.push("..."),db.push(G(Z.rest)));db.push(")")}else db=[F(Z,!0),G(Z.params[0])];return db};
C.prototype.generateFunctionBody=function(Z){var sa=this.generateFunctionParams(Z);Z.type===jc.ArrowFunctionExpression&&(sa.push(fa),sa.push("=>"));Z.expression?(sa.push(fa),Z=this.generateExpression(Z.body,ub.Assignment,7),"{"===Z.toString().charAt(0)&&(Z=["(",Z,")"]),sa.push(Z)):sa.push(this.maybeBlock(Z.body,9));return sa};C.prototype.generateIterationForStatement=function(Z,sa,ua){var db=["for"+(sa.await?m()+"await":"")+fa+"("],Cb=this||Gl;r(function(){sa.left.type===jc.VariableDeclaration?r(function(){db.push(sa.left.kind+
m());db.push(Cb.generateStatement(sa.left.declarations[0],0))}):db.push(Cb.generateExpression(sa.left,ub.Call,7));db=q(db,Z);db=[q(db,Cb.generateExpression(sa.right,ub.Assignment,7)),")"]});db.push(this.maybeBlock(sa.body,ua));return db};C.prototype.generatePropertyKey=function(Z,sa){var ua=[];sa&&ua.push("[");ua.push(this.generateExpression(Z,ub.Assignment,7));sa&&ua.push("]");return ua};C.prototype.generateAssignment=function(Z,sa,ua,db,Cb){ub.Assignment<db&&(Cb|=1);return z([this.generateExpression(Z,
ub.Call,Cb),fa+ua+fa,this.generateExpression(sa,ub.Assignment,Cb)],ub.Assignment,db)};C.prototype.semicolon=function(Z){return!gb&&Z&32?"":";"};C.Statement={BlockStatement:function(Z,sa){var ua,db,Cb=["{",T],Pc=this||Gl;r(function(){0===Z.body.length&&Ab&&(ua=Z.range,2<ua[1]-ua[0]&&(db=Nb.substring(ua[0]+1,ua[1]-1),"\n"===db[0]&&(Cb=["{"]),Cb.push(db)));var Oc;var kc=1;sa&8&&(kc|=16);var be=0;for(Oc=Z.body.length;be<Oc;++be){Ab&&(0===be&&(Z.body[0].leadingComments&&(ua=Z.body[0].leadingComments[0].extendedRange,
db=Nb.substring(ua[0],ua[1]),"\n"===db[0]&&(Cb=["{"])),Z.body[0].leadingComments||y(Z.range[0],Z.body[0].range[0],Cb)),0<be&&(Z.body[be-1].trailingComments||Z.body[be].leadingComments||y(Z.body[be-1].range[1],Z.body[be].range[0],Cb)));be===Oc-1&&(kc|=32);var Ud=Z.body[be].leadingComments&&Ab?Pc.generateStatement(Z.body[be],kc):[ha,Pc.generateStatement(Z.body[be],kc)];Cb.push(Ud);d(f(Ud).toString())||(Ab&&be<Oc-1?Z.body[be+1].leadingComments||Cb.push(T):Cb.push(T));Ab&&be===Oc-1&&(Z.body[be].trailingComments||
y(Z.body[be].range[1],Z.range[1],Cb))}});Cb.push([ha,"}"]);return Cb},BreakStatement:function(Z,sa){return Z.label?"break "+Z.label.name+this.semicolon(sa):"break"+this.semicolon(sa)},ContinueStatement:function(Z,sa){return Z.label?"continue "+Z.label.name+this.semicolon(sa):"continue"+this.semicolon(sa)},ClassBody:function(Z,sa){var ua=["{",T],db=this||Gl;r(function(Cb){var Pc;var Oc=0;for(Pc=Z.body.length;Oc<Pc;++Oc)ua.push(Cb),ua.push(db.generateExpression(Z.body[Oc],ub.Sequence,7)),Oc+1<Pc&&ua.push(T)});
d(f(ua).toString())||ua.push(T);ua.push(ha);ua.push("}");return ua},ClassDeclaration:function(Z,sa){sa=["class"];Z.id&&(sa=q(sa,this.generateExpression(Z.id,ub.Sequence,7)));if(Z.superClass){var ua=q("extends",this.generateExpression(Z.superClass,ub.Unary,7));sa=q(sa,ua)}sa.push(fa);sa.push(this.generateStatement(Z.body,33));return sa},DirectiveStatement:function(Z,sa){if(ia.raw&&Z.raw)return Z.raw+this.semicolon(sa);Z=Z.directive;var ua;var db="double"===M?'"':"'";var Cb=0;for(ua=Z.length;Cb<ua;++Cb){var Pc=
Z.charCodeAt(Cb);if(39===Pc){db='"';break}else if(34===Pc){db="'";break}else 92===Pc&&++Cb}return db+Z+db+this.semicolon(sa)},DoWhileStatement:function(Z,sa){var ua=q("do",this.maybeBlock(Z.body,1));ua=this.maybeBlockSuffix(Z.body,ua);return q(ua,["while"+fa+"(",this.generateExpression(Z.test,ub.Sequence,7),")"+this.semicolon(sa)])},CatchClause:function(Z,sa){var ua,db=this||Gl;r(function(){if(Z.param){if(ua=["catch"+fa+"(",db.generateExpression(Z.param,ub.Sequence,7),")"],Z.guard){var Cb=db.generateExpression(Z.guard,
ub.Sequence,7);ua.splice(2,0," if ",Cb)}}else ua=["catch"]});ua.push(this.maybeBlock(Z.body,1));return ua},DebuggerStatement:function(Z,sa){return"debugger"+this.semicolon(sa)},EmptyStatement:function(Z,sa){return";"},ExportDefaultDeclaration:function(Z,sa){var ua=["export"];var db=sa&32?33:1;ua=q(ua,"default");return ua=C.Statement.hasOwnProperty(Z.declaration.type)?q(ua,this.generateStatement(Z.declaration,db)):q(ua,this.generateExpression(Z.declaration,ub.Assignment,7)+this.semicolon(sa))},ExportNamedDeclaration:function(Z,
sa){var ua=["export"],db=this||Gl;var Cb=sa&32?33:1;if(Z.declaration)return q(ua,this.generateStatement(Z.declaration,Cb));Z.specifiers&&(0===Z.specifiers.length?ua=q(ua,"{"+fa+"}"):Z.specifiers[0].type===jc.ExportBatchSpecifier?ua=q(ua,this.generateExpression(Z.specifiers[0],ub.Sequence,7)):(ua=q(ua,"{"),r(function(Pc){var Oc;ua.push(T);var kc=0;for(Oc=Z.specifiers.length;kc<Oc;++kc)ua.push(Pc),ua.push(db.generateExpression(Z.specifiers[kc],ub.Sequence,7)),kc+1<Oc&&ua.push(","+T)}),d(f(ua).toString())||
ua.push(T),ua.push(ha+"}")),Z.source?ua=q(ua,["from"+fa,this.generateExpression(Z.source,ub.Sequence,7),this.semicolon(sa)]):ua.push(this.semicolon(sa)));return ua},ExportAllDeclaration:function(Z,sa){return["export"+fa,"*"+fa,"from"+fa,this.generateExpression(Z.source,ub.Sequence,7),this.semicolon(sa)]},ExpressionStatement:function(Z,sa){function ua(kc){if("class"!==kc.slice(0,5))return!1;kc=kc.charCodeAt(5);return 123===kc||Kb.code.isWhiteSpace(kc)||Kb.code.isLineTerminator(kc)}function db(kc){if("function"!==
kc.slice(0,8))return!1;kc=kc.charCodeAt(8);return 40===kc||Kb.code.isWhiteSpace(kc)||42===kc||Kb.code.isLineTerminator(kc)}function Cb(kc){var be;if("async"!==kc.slice(0,5)||!Kb.code.isWhiteSpace(kc.charCodeAt(5)))return!1;var Ud=6;for(be=kc.length;Ud<be&&Kb.code.isWhiteSpace(kc.charCodeAt(Ud));++Ud);if(Ud===be||"function"!==kc.slice(Ud,Ud+8))return!1;kc=kc.charCodeAt(Ud+8);return 40===kc||Kb.code.isWhiteSpace(kc)||42===kc||Kb.code.isLineTerminator(kc)}var Pc=[this.generateExpression(Z.expression,
ub.Sequence,7)];var Oc=f(Pc).toString();123===Oc.charCodeAt(0)||ua(Oc)||db(Oc)||Cb(Oc)||aa&&sa&16&&Z.expression.type===jc.Literal&&"string"===typeof Z.expression.value?Pc=["(",Pc,")"+this.semicolon(sa)]:Pc.push(this.semicolon(sa));return Pc},ImportDeclaration:function(Z,sa){var ua=this||Gl;if(0===Z.specifiers.length)return["import",fa,this.generateExpression(Z.source,ub.Sequence,7),this.semicolon(sa)];var db=["import"];var Cb=0;Z.specifiers[Cb].type===jc.ImportDefaultSpecifier&&(db=q(db,[this.generateExpression(Z.specifiers[Cb],
ub.Sequence,7)]),++Cb);Z.specifiers[Cb]&&(0!==Cb&&db.push(","),Z.specifiers[Cb].type===jc.ImportNamespaceSpecifier?db=q(db,[fa,this.generateExpression(Z.specifiers[Cb],ub.Sequence,7)]):(db.push(fa+"{"),1===Z.specifiers.length-Cb?(db.push(fa),db.push(this.generateExpression(Z.specifiers[Cb],ub.Sequence,7)),db.push(fa+"}"+fa)):(r(function(Pc){var Oc;db.push(T);var kc=Cb;for(Oc=Z.specifiers.length;kc<Oc;++kc)db.push(Pc),db.push(ua.generateExpression(Z.specifiers[kc],ub.Sequence,7)),kc+1<Oc&&db.push(","+
T)}),d(f(db).toString())||db.push(T),db.push(ha+"}"+fa))));return db=q(db,["from"+fa,this.generateExpression(Z.source,ub.Sequence,7),this.semicolon(sa)])},VariableDeclarator:function(Z,sa){sa=sa&1?7:6;return Z.init?[this.generateExpression(Z.id,ub.Assignment,sa),fa,"=",fa,this.generateExpression(Z.init,ub.Assignment,sa)]:this.generatePattern(Z.id,ub.Assignment,sa)},VariableDeclaration:function(Z,sa){function ua(){Pc=Z.declarations[0];ia.comment&&Pc.leadingComments?(kc.push("\n"),kc.push([ha,Oc.generateStatement(Pc,
be)])):(kc.push(m()),kc.push(Oc.generateStatement(Pc,be)));db=1;for(Cb=Z.declarations.length;db<Cb;++db)Pc=Z.declarations[db],ia.comment&&Pc.leadingComments?(kc.push(","+T),kc.push([ha,Oc.generateStatement(Pc,be)])):(kc.push(","+fa),kc.push(Oc.generateStatement(Pc,be)))}var db,Cb,Pc,Oc=this||Gl;var kc=[Z.kind];var be=sa&1?1:0;1<Z.declarations.length?r(ua):ua();kc.push(this.semicolon(sa));return kc},ThrowStatement:function(Z,sa){return[q("throw",this.generateExpression(Z.argument,ub.Sequence,7)),this.semicolon(sa)]},
TryStatement:function(Z,sa){var ua;sa=["try",this.maybeBlock(Z.block,1)];sa=this.maybeBlockSuffix(Z.block,sa);if(Z.handlers){var db=0;for(ua=Z.handlers.length;db<ua;++db)if(sa=q(sa,this.generateStatement(Z.handlers[db],1)),Z.finalizer||db+1!==ua)sa=this.maybeBlockSuffix(Z.handlers[db].body,sa)}else{var Cb=Z.guardedHandlers||[];db=0;for(ua=Cb.length;db<ua;++db)if(sa=q(sa,this.generateStatement(Cb[db],1)),Z.finalizer||db+1!==ua)sa=this.maybeBlockSuffix(Cb[db].body,sa);if(Z.handler)if(Array.isArray(Z.handler))for(db=
0,ua=Z.handler.length;db<ua;++db){if(sa=q(sa,this.generateStatement(Z.handler[db],1)),Z.finalizer||db+1!==ua)sa=this.maybeBlockSuffix(Z.handler[db].body,sa)}else sa=q(sa,this.generateStatement(Z.handler,1)),Z.finalizer&&(sa=this.maybeBlockSuffix(Z.handler.body,sa))}Z.finalizer&&(sa=q(sa,["finally",this.maybeBlock(Z.finalizer,1)]));return sa},SwitchStatement:function(Z,sa){var ua,db,Cb=this||Gl;r(function(){ua=["switch"+fa+"(",Cb.generateExpression(Z.discriminant,ub.Sequence,7),")"+fa+"{"+T]});if(Z.cases){var Pc=
1;var Oc=0;for(db=Z.cases.length;Oc<db;++Oc)Oc===db-1&&(Pc|=32),sa=[ha,this.generateStatement(Z.cases[Oc],Pc)],ua.push(sa),d(f(sa).toString())||ua.push(T)}ua.push([ha,"}"]);return ua},SwitchCase:function(Z,sa){var ua,db,Cb,Pc,Oc,kc=this||Gl;r(function(){ua=Z.test?[q("case",kc.generateExpression(Z.test,ub.Sequence,7)),":"]:["default:"];Cb=0;(Pc=Z.consequent.length)&&Z.consequent[0].type===jc.BlockStatement&&(db=kc.maybeBlock(Z.consequent[0],1),ua.push(db),Cb=1);Cb===Pc||d(f(ua).toString())||ua.push(T);
for(Oc=1;Cb<Pc;++Cb)Cb===Pc-1&&sa&32&&(Oc|=32),db=[ha,kc.generateStatement(Z.consequent[Cb],Oc)],ua.push(db),Cb+1===Pc||d(f(db).toString())||ua.push(T)});return ua},IfStatement:function(Z,sa){var ua=this||Gl;r(function(){Cb=["if"+fa+"(",ua.generateExpression(Z.test,ub.Sequence,7),")"]});var db=1;sa&32&&(db|=32);if(Z.alternate){Cb.push(this.maybeBlock(Z.consequent,1));var Cb=this.maybeBlockSuffix(Z.consequent,Cb);Cb=Z.alternate.type===jc.IfStatement?q(Cb,["else ",this.generateStatement(Z.alternate,
db)]):q(Cb,q("else",this.maybeBlock(Z.alternate,db)))}else Cb.push(this.maybeBlock(Z.consequent,db));return Cb},ForStatement:function(Z,sa){var ua,db=this||Gl;r(function(){ua=["for"+fa+"("];Z.init?Z.init.type===jc.VariableDeclaration?ua.push(db.generateStatement(Z.init,0)):(ua.push(db.generateExpression(Z.init,ub.Sequence,6)),ua.push(";")):ua.push(";");Z.test&&(ua.push(fa),ua.push(db.generateExpression(Z.test,ub.Sequence,7)));ua.push(";");Z.update&&(ua.push(fa),ua.push(db.generateExpression(Z.update,
ub.Sequence,7)));ua.push(")")});ua.push(this.maybeBlock(Z.body,sa&32?33:1));return ua},ForInStatement:function(Z,sa){return this.generateIterationForStatement("in",Z,sa&32?33:1)},ForOfStatement:function(Z,sa){return this.generateIterationForStatement("of",Z,sa&32?33:1)},LabeledStatement:function(Z,sa){return[Z.label.name+":",this.maybeBlock(Z.body,sa&32?33:1)]},Program:function(Z,sa){var ua;var db=Z.body.length;sa=[ea&&0<db?"\n":""];var Cb=17;for(ua=0;ua<db;++ua){ea||ua!==db-1||(Cb|=32);Ab&&(0===
ua&&(Z.body[0].leadingComments||y(Z.range[0],Z.body[ua].range[0],sa)),0<ua&&(Z.body[ua-1].trailingComments||Z.body[ua].leadingComments||y(Z.body[ua-1].range[1],Z.body[ua].range[0],sa)));var Pc=[ha,this.generateStatement(Z.body[ua],Cb)];sa.push(Pc);ua+1<db&&!d(f(Pc).toString())&&(Ab?Z.body[ua+1].leadingComments||sa.push(T):sa.push(T));Ab&&ua===db-1&&(Z.body[ua].trailingComments||y(Z.body[ua].range[1],Z.range[1],sa))}return sa},FunctionDeclaration:function(Z,sa){return[F(Z,!0),"function",N(Z)||m(),
Z.id?G(Z.id):"",this.generateFunctionBody(Z)]},ReturnStatement:function(Z,sa){return Z.argument?[q("return",this.generateExpression(Z.argument,ub.Sequence,7)),this.semicolon(sa)]:["return"+this.semicolon(sa)]},WhileStatement:function(Z,sa){var ua,db=this||Gl;r(function(){ua=["while"+fa+"(",db.generateExpression(Z.test,ub.Sequence,7),")"]});ua.push(this.maybeBlock(Z.body,sa&32?33:1));return ua},WithStatement:function(Z,sa){var ua,db=this||Gl;r(function(){ua=["with"+fa+"(",db.generateExpression(Z.object,
ub.Sequence,7),")"]});ua.push(this.maybeBlock(Z.body,sa&32?33:1));return ua}};k(C.prototype,C.Statement);C.Expression={SequenceExpression:function(Z,sa,ua){var db;ub.Sequence<sa&&(ua|=1);var Cb=[];var Pc=0;for(db=Z.expressions.length;Pc<db;++Pc)Cb.push(this.generateExpression(Z.expressions[Pc],ub.Assignment,ua)),Pc+1<db&&Cb.push(","+fa);return z(Cb,ub.Sequence,sa)},AssignmentExpression:function(Z,sa,ua){return this.generateAssignment(Z.left,Z.right,Z.operator,sa,ua)},ArrowFunctionExpression:function(Z,
sa,ua){return z(this.generateFunctionBody(Z),ub.ArrowFunction,sa)},ConditionalExpression:function(Z,sa,ua){ub.Conditional<sa&&(ua|=1);return z([this.generateExpression(Z.test,ub.LogicalOR,ua),fa+"?"+fa,this.generateExpression(Z.consequent,ub.Assignment,ua),fa+":"+fa,this.generateExpression(Z.alternate,ub.Assignment,ua)],ub.Conditional,sa)},LogicalExpression:function(Z,sa,ua){return this.BinaryExpression(Z,sa,ua)},BinaryExpression:function(Z,sa,ua){var db=Gc[Z.operator];var Cb="**"===Z.operator?ub.Postfix:
db;var Pc="**"===Z.operator?db:db+1;db<sa&&(ua|=1);Cb=this.generateExpression(Z.left,Cb,ua);var Oc=Cb.toString();Oc=47===Oc.charCodeAt(Oc.length-1)&&Kb.code.isIdentifierPartES5(Z.operator.charCodeAt(0))?[Cb,m(),Z.operator]:q(Cb,Z.operator);Cb=this.generateExpression(Z.right,Pc,ua);"/"===Z.operator&&"/"===Cb.toString().charAt(0)||"<"===Z.operator.slice(-1)&&"!--"===Cb.toString().slice(0,3)?(Oc.push(m()),Oc.push(Cb)):Oc=q(Oc,Cb);return"in"!==Z.operator||ua&1?z(Oc,db,sa):["(",Oc,")"]},CallExpression:function(Z,
sa,ua){var db;var Cb=[this.generateExpression(Z.callee,ub.Call,3)];Z.optional&&Cb.push("?.");Cb.push("(");var Pc=0;for(db=Z.arguments.length;Pc<db;++Pc)Cb.push(this.generateExpression(Z.arguments[Pc],ub.Assignment,7)),Pc+1<db&&Cb.push(","+fa);Cb.push(")");return ua&2?z(Cb,ub.Call,sa):["(",Cb,")"]},ChainExpression:function(Z,sa,ua){ub.OptionalChaining<sa&&(ua|=2);Z=this.generateExpression(Z.expression,ub.OptionalChaining,ua);return z(Z,ub.OptionalChaining,sa)},NewExpression:function(Z,sa,ua){var db=
Z.arguments.length;var Cb=q("new",this.generateExpression(Z.callee,ub.New,ua&4&&!Ra&&0===db?5:1));if(!(ua&4)||Ra||0<db){Cb.push("(");for(ua=0;ua<db;++ua)Cb.push(this.generateExpression(Z.arguments[ua],ub.Assignment,7)),ua+1<db&&Cb.push(","+fa);Cb.push(")")}return z(Cb,ub.New,sa)},MemberExpression:function(Z,sa,ua){var db=[this.generateExpression(Z.object,ub.Call,ua&2?3:1)];Z.computed?(Z.optional&&db.push("?."),db.push("["),db.push(this.generateExpression(Z.property,ub.Sequence,ua&2?7:5)),db.push("]")):
(Z.optional||Z.object.type!==jc.Literal||"number"!==typeof Z.object.value||(ua=f(db).toString(),0>ua.indexOf(".")&&!/[eExX]/.test(ua)&&Kb.code.isDecimalDigit(ua.charCodeAt(ua.length-1))&&!(2<=ua.length&&48===ua.charCodeAt(0))&&db.push(" ")),db.push(Z.optional?"?.":"."),db.push(G(Z.property)));return z(db,ub.Member,sa)},MetaProperty:function(Z,sa,ua){ua=[];ua.push("string"===typeof Z.meta?Z.meta:G(Z.meta));ua.push(".");ua.push("string"===typeof Z.property?Z.property:G(Z.property));return z(ua,ub.Member,
sa)},UnaryExpression:function(Z,sa,ua){var db=this.generateExpression(Z.argument,ub.Unary,7);if(""===fa)ua=q(Z.operator,db);else if(ua=[Z.operator],2<Z.operator.length)ua=q(ua,db);else{Z=f(ua).toString();var Cb=Z.charCodeAt(Z.length-1);Z=db.toString().charCodeAt(0);((43===Cb||45===Cb)&&Cb===Z||Kb.code.isIdentifierPartES5(Cb)&&Kb.code.isIdentifierPartES5(Z))&&ua.push(m());ua.push(db)}return z(ua,ub.Unary,sa)},YieldExpression:function(Z,sa,ua){ua=Z.delegate?"yield*":"yield";Z.argument&&(ua=q(ua,this.generateExpression(Z.argument,
ub.Yield,7)));return z(ua,ub.Yield,sa)},AwaitExpression:function(Z,sa,ua){Z=q(Z.all?"await*":"await",this.generateExpression(Z.argument,ub.Await,7));return z(Z,ub.Await,sa)},UpdateExpression:function(Z,sa,ua){return Z.prefix?z([Z.operator,this.generateExpression(Z.argument,ub.Unary,7)],ub.Unary,sa):z([this.generateExpression(Z.argument,ub.Postfix,7),Z.operator],ub.Postfix,sa)},FunctionExpression:function(Z,sa,ua){sa=[F(Z,!0),"function"];Z.id?(sa.push(N(Z)||m()),sa.push(G(Z.id))):sa.push(N(Z)||fa);
sa.push(this.generateFunctionBody(Z));return sa},ArrayPattern:function(Z,sa,ua){return this.ArrayExpression(Z,sa,ua,!0)},ArrayExpression:function(Z,sa,ua,db){var Cb=this||Gl;if(!Z.elements.length)return"[]";var Pc=db?!1:1<Z.elements.length;var Oc=["[",Pc?T:""];r(function(kc){var be;var Ud=0;for(be=Z.elements.length;Ud<be;++Ud)Z.elements[Ud]?(Oc.push(Pc?kc:""),Oc.push(Cb.generateExpression(Z.elements[Ud],ub.Assignment,7))):(Pc&&Oc.push(kc),Ud+1===be&&Oc.push(",")),Ud+1<be&&Oc.push(","+(Pc?T:fa))});
Pc&&!d(f(Oc).toString())&&Oc.push(T);Oc.push(Pc?ha:"");Oc.push("]");return Oc},RestElement:function(Z,sa,ua){return"..."+this.generatePattern(Z.argument)},ClassExpression:function(Z,sa,ua){sa=["class"];Z.id&&(sa=q(sa,this.generateExpression(Z.id,ub.Sequence,7)));Z.superClass&&(ua=q("extends",this.generateExpression(Z.superClass,ub.Unary,7)),sa=q(sa,ua));sa.push(fa);sa.push(this.generateStatement(Z.body,33));return sa},MethodDefinition:function(Z,sa,ua){sa=Z["static"]?["static"+fa]:[];Z="get"===Z.kind||
"set"===Z.kind?[q(Z.kind,this.generatePropertyKey(Z.key,Z.computed)),this.generateFunctionBody(Z.value)]:[L(Z),this.generatePropertyKey(Z.key,Z.computed),this.generateFunctionBody(Z.value)];return q(sa,Z)},Property:function(Z,sa,ua){return"get"===Z.kind||"set"===Z.kind?[Z.kind,m(),this.generatePropertyKey(Z.key,Z.computed),this.generateFunctionBody(Z.value)]:Z.shorthand?"AssignmentPattern"===Z.value.type?this.AssignmentPattern(Z.value,ub.Sequence,7):this.generatePropertyKey(Z.key,Z.computed):Z.method?
[L(Z),this.generatePropertyKey(Z.key,Z.computed),this.generateFunctionBody(Z.value)]:[this.generatePropertyKey(Z.key,Z.computed),":"+fa,this.generateExpression(Z.value,ub.Assignment,7)]},ObjectExpression:function(Z,sa,ua){var db,Cb,Pc=this||Gl;if(!Z.properties.length)return"{}";var Oc=1<Z.properties.length;r(function(){Cb=Pc.generateExpression(Z.properties[0],ub.Sequence,7)});if(!Oc&&!/[\r\n]/g.test(f(Cb).toString()))return["{",fa,Cb,fa,"}"];r(function(kc){var be;db=["{",T,kc,Cb];if(Oc){db.push(","+
T);var Ud=1;for(be=Z.properties.length;Ud<be;++Ud)db.push(kc),db.push(Pc.generateExpression(Z.properties[Ud],ub.Sequence,7)),Ud+1<be&&db.push(","+T)}});d(f(db).toString())||db.push(T);db.push(ha);db.push("}");return db},AssignmentPattern:function(Z,sa,ua){return this.generateAssignment(Z.left,Z.right,"=",sa,ua)},ObjectPattern:function(Z,sa,ua){var db=this||Gl;if(!Z.properties.length)return"{}";var Cb=!1;if(1===Z.properties.length){var Pc=Z.properties[0];Pc.type===jc.Property&&Pc.value.type!==jc.Identifier&&
(Cb=!0)}else for(sa=0,ua=Z.properties.length;sa<ua;++sa)if(Pc=Z.properties[sa],Pc.type===jc.Property&&!Pc.shorthand){Cb=!0;break}var Oc=["{",Cb?T:""];r(function(kc){var be;var Ud=0;for(be=Z.properties.length;Ud<be;++Ud)Oc.push(Cb?kc:""),Oc.push(db.generateExpression(Z.properties[Ud],ub.Sequence,7)),Ud+1<be&&Oc.push(","+(Cb?T:fa))});Cb&&!d(f(Oc).toString())&&Oc.push(T);Oc.push(Cb?ha:"");Oc.push("}");return Oc},ThisExpression:function(Z,sa,ua){return"this"},Super:function(Z,sa,ua){return"super"},Identifier:function(Z,
sa,ua){return G(Z)},ImportDefaultSpecifier:function(Z,sa,ua){return G(Z.id||Z.local)},ImportNamespaceSpecifier:function(Z,sa,ua){sa=["*"];(Z=Z.id||Z.local)&&sa.push(fa+"as"+m()+G(Z));return sa},ImportSpecifier:function(Z,sa,ua){sa=Z.imported;ua=[sa.name];(Z=Z.local)&&Z.name!==sa.name&&ua.push(m()+"as"+m()+G(Z));return ua},ExportSpecifier:function(Z,sa,ua){sa=Z.local;ua=[sa.name];(Z=Z.exported)&&Z.name!==sa.name&&ua.push(m()+"as"+m()+G(Z));return ua},Literal:function(Z,sa,ua){if(Z.hasOwnProperty("raw")&&
Aa&&ia.raw)try{var db=Aa(Z.raw).body[0].expression;if(db.type===jc.Literal&&db.value===Z.value)return Z.raw}catch(Ud){}if(Z.regex)return"/"+Z.regex.pattern+"/"+Z.regex.flags;if(null===Z.value)return"null";if("string"===typeof Z.value){Z=Z.value;sa="";var Cb=0,Pc=0,Oc;ua=0;for(db=Z.length;ua<db;++ua){var kc=Z.charCodeAt(ua);if(39===kc)++Cb;else if(34===kc)++Pc;else if(47===kc&&D)sa+="\\";else if(Kb.code.isLineTerminator(kc)||92===kc){sa+=l(kc);continue}else if(!Kb.code.isIdentifierPartES5(kc)&&(D&&
32>kc||!D&&!X&&(32>kc||126<kc))){sa+=e(kc,Z.charCodeAt(ua+1));continue}sa+=String.fromCharCode(kc)}var be=(Oc=!("double"===M||"auto"===M&&Pc<Cb))?"'":'"';if(Oc?Cb:Pc){Z=sa;sa=be;ua=0;for(db=Z.length;ua<db;++ua){kc=Z.charCodeAt(ua);if(39===kc&&Oc||34===kc&&!Oc)sa+="\\";sa+=String.fromCharCode(kc)}Z=sa+be}else Z=be+sa+be;return Z}if("number"===typeof Z.value){Z=Z.value;if(Z!==Z)throw Error("Numeric literal whose value is NaN");if(0>Z||0===Z&&0>1/Z)throw Error("Numeric literal whose value is negative");
if(Z===1/0)Z=D?"null":P?"1e400":"1e+400";else{sa=""+Z;if(P&&!(3>sa.length)){ua=sa.indexOf(".");D||48!==sa.charCodeAt(0)||1!==ua||(ua=0,sa=sa.slice(1));db=sa;sa=sa.replace("e+","e");kc=0;0<(Cb=db.indexOf("e"))&&(kc=+db.slice(Cb+1),db=db.slice(0,Cb));0<=ua&&(kc-=db.length-ua-1,db=+(db.slice(0,ua)+db.slice(ua+1))+"");for(Cb=0;48===db.charCodeAt(db.length+Cb-1);)--Cb;0!==Cb&&(kc-=Cb,db=db.slice(0,Cb));0!==kc&&(db+="e"+kc);(db.length<sa.length||J&&1E12<Z&&Math.floor(Z)===Z&&(db="0x"+Z.toString(16)).length<
sa.length)&&+db===Z&&(sa=db)}Z=sa}return Z}if("boolean"===typeof Z.value)return Z.value?"true":"false";Z=Z.value;sa=Z.toString();if(Z.source)if(ua=sa.match(/\/([^/]*)$/)){ua=ua[1];sa="";Oc=Pc=!1;db=0;for(kc=Z.source.length;db<kc;++db)Cb=Z.source.charCodeAt(db),Oc?(sa+=b(Cb,Oc),Oc=!1):(Pc?93===Cb&&(Pc=!1):47===Cb?sa+="\\":91===Cb&&(Pc=!0),sa+=b(Cb,Oc),Oc=92===Cb);Z="/"+sa+"/"+ua}else Z=sa;else Z=sa;return Z},GeneratorExpression:function(Z,sa,ua){return this.ComprehensionExpression(Z,sa,ua)},ComprehensionExpression:function(Z,
sa,ua){var db,Cb,Pc=this||Gl;var Oc=Z.type===jc.GeneratorExpression?["("]:["["];if(ia.moz.comprehensionExpressionStartsWithAssignment){var kc=this.generateExpression(Z.body,ub.Assignment,7);Oc.push(kc)}Z.blocks&&r(function(){db=0;for(Cb=Z.blocks.length;db<Cb;++db)kc=Pc.generateExpression(Z.blocks[db],ub.Sequence,7),0<db||ia.moz.comprehensionExpressionStartsWithAssignment?Oc=q(Oc,kc):Oc.push(kc)});Z.filter&&(Oc=q(Oc,"if"+fa),kc=this.generateExpression(Z.filter,ub.Sequence,7),Oc=q(Oc,["(",kc,")"]));
ia.moz.comprehensionExpressionStartsWithAssignment||(kc=this.generateExpression(Z.body,ub.Assignment,7),Oc=q(Oc,kc));Oc.push(Z.type===jc.GeneratorExpression?")":"]");return Oc},ComprehensionBlock:function(Z,sa,ua){sa=Z.left.type===jc.VariableDeclaration?[Z.left.kind,m(),this.generateStatement(Z.left.declarations[0],0)]:this.generateExpression(Z.left,ub.Call,7);sa=q(sa,Z.of?"of":"in");sa=q(sa,this.generateExpression(Z.right,ub.Sequence,7));return["for"+fa+"(",sa,")"]},SpreadElement:function(Z,sa,ua){return["...",
this.generateExpression(Z.argument,ub.Assignment,7)]},TaggedTemplateExpression:function(Z,sa,ua){var db=3;ua&2||(db=1);Z=[this.generateExpression(Z.tag,ub.Call,db),this.generateExpression(Z.quasi,ub.Primary,4)];return z(Z,ub.TaggedTemplate,sa)},TemplateElement:function(Z,sa,ua){return Z.value.raw},TemplateLiteral:function(Z,sa,ua){var db;sa=["`"];ua=0;for(db=Z.quasis.length;ua<db;++ua)sa.push(this.generateExpression(Z.quasis[ua],ub.Primary,7)),ua+1<db&&(sa.push("${"+fa),sa.push(this.generateExpression(Z.expressions[ua],
ub.Sequence,7)),sa.push(fa+"}"));sa.push("`");return sa},ModuleSpecifier:function(Z,sa,ua){return this.Literal(Z,sa,ua)},ImportExpression:function(Z,sa,ua){return z(["import(",this.generateExpression(Z.source,ub.Assignment,7),")"],ub.Call,sa)}};k(C.prototype,C.Expression);C.prototype.generateExpression=function(Z,sa,ua){var db=Z.type||jc.Property;if(ia.verbatim&&Z.hasOwnProperty(ia.verbatim))return db=Z[ia.verbatim],"string"===typeof db?ua=z(B(db),ub.Sequence,sa):(ua=B(db.content),db=null!=db.precedence?
db.precedence:ub.Sequence,ua=z(ua,db,sa)),f(ua,Z);sa=this[db](Z,sa,ua);ia.comment&&(sa=v(Z,sa));return f(sa,Z)};C.prototype.generateStatement=function(Z,sa){sa=this[Z.type](Z,sa);ia.comment&&(sa=v(Z,sa));var ua=f(sa).toString();Z.type!==jc.Program||ea||""!==T||"\n"!==ua.charAt(ua.length-1)||(sa=ob?f(sa).replaceRight(/\s+$/,""):ua.replace(/\s+$/,""));return f(sa,Z)};var Yc=c().format;rn.version="2.0.0";rn.generate=function(Z,sa){var ua=c();null!=sa?("string"===typeof sa.indent&&(ua.format.indent.style=
sa.indent),"number"===typeof sa.base&&(ua.format.indent.base=sa.base),sa=n(ua,sa),qa=sa.format.indent.style,ha="string"===typeof sa.base?sa.base:h(qa,sa.format.indent.base)):(sa=ua,qa=sa.format.indent.style,ha=h(qa,sa.format.indent.base));D=sa.format.json;P=sa.format.renumber;J=D?!1:sa.format.hexadecimal;M=D?"double":sa.format.quotes;X=sa.format.escapeless;T=sa.format.newline;fa=sa.format.space;sa.format.compact&&(T=fa=qa=ha="");Ra=sa.format.parentheses;gb=sa.format.semicolons;ea=sa.format.safeConcatenation;
aa=sa.directive;Aa=D?null:sa.parse;ob=sa.sourceMap;Nb=sa.sourceCode;Ab=sa.format.preserveBlankLines&&null!==Nb;ia=sa;ob&&(S=rn.browser?Gl.sourceMap.SourceNode:Rf);ua=new C;if(C.Statement.hasOwnProperty(Z.type))Z=ua.generateStatement(Z,1);else if(C.Expression.hasOwnProperty(Z.type))Z=ua.generateExpression(Z,ub.Sequence,7);else throw Error("Unknown node type: "+Z.type);if(!ob)return Z={code:Z.toString(),map:null},sa.sourceMapWithCode?Z:Z.code;Z=Z.toStringWithSourceMap({file:sa.file,sourceRoot:sa.sourceMapRoot});
sa.sourceContent&&Z.map.setSourceContent(sa.sourceMap,sa.sourceContent);return sa.sourceMapWithCode?Z:Z.map.toString()};rn.attachComments=sQ.attachComments;rn.Precedence=n({},ub);rn.browser=!1;rn.FORMAT_MINIFY={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1};rn.FORMAT_DEFAULTS=Yc})();var hda=Object.freeze({__proto__:null,"default":rn,FORMAT_DEFAULTS:rn.FORMAT_DEFAULTS,FORMAT_MINIFY:rn.FORMAT_MINIFY,Precedence:rn.Precedence,attachComments:rn.attachComments,
browser:rn.browser,generate:rn.generate,version:rn.version}),Yo=lively.FreezerRuntime.recorderFor("lively.ast/lib/stringify.js");Yo.stringify=rg;Yo.obj=lf;Yo.escodegen=hda;Yo.es=Yo.escodegen.escodegen||Yo.escodegen;var cC=Yo.es;Yo.escodegen=cC;Yo.es=cC;Yo.default=rg;var wQ={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",
6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ida={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this","5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},
jda=/^in(stanceof)?$/,xQ="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
A1="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
i7=new RegExp("["+xQ+"]"),j7=new RegExp("["+xQ+A1+"]");xQ=A1=null;var BT=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,
2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,
3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],k7=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,
2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,
787719,239],ti=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},br={beforeExpr:!0},Hp={startsExpr:!0},hG={},yb={num:new ti("num",Hp),regexp:new ti("regexp",Hp),string:new ti("string",Hp),name:new ti("name",Hp),eof:new ti("eof"),bracketL:new ti("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new ti("]"),braceL:new ti("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ti("}"),parenL:new ti("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ti(")"),comma:new ti(",",br),semi:new ti(";",br),colon:new ti(":",br),dot:new ti("."),question:new ti("?",br),questionDot:new ti("?."),arrow:new ti("=>",br),template:new ti("template"),invalidTemplate:new ti("invalidTemplate"),ellipsis:new ti("...",br),backQuote:new ti("`",Hp),dollarBraceL:new ti("${",{beforeExpr:!0,startsExpr:!0}),eq:new ti("=",{beforeExpr:!0,
isAssign:!0}),assign:new ti("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ti("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ti("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:yg("||",1),logicalAND:yg("&&",2),bitwiseOR:yg("|",3),bitwiseXOR:yg("^",4),bitwiseAND:yg("&",5),equality:yg("==/!=/===/!==",6),relational:yg("</>/<=/>=",7),bitShift:yg("<</>>/>>>",8),plusMin:new ti("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:yg("%",10),star:yg("*",10),slash:yg("/",10),starstar:new ti("**",
{beforeExpr:!0}),coalesce:yg("??",1),_break:ag("break"),_case:ag("case",br),_catch:ag("catch"),_continue:ag("continue"),_debugger:ag("debugger"),_default:ag("default",br),_do:ag("do",{isLoop:!0,beforeExpr:!0}),_else:ag("else",br),_finally:ag("finally"),_for:ag("for",{isLoop:!0}),_function:ag("function",Hp),_if:ag("if"),_return:ag("return",br),_switch:ag("switch"),_throw:ag("throw",br),_try:ag("try"),_var:ag("var"),_const:ag("const"),_while:ag("while",{isLoop:!0}),_with:ag("with"),_new:ag("new",{beforeExpr:!0,
startsExpr:!0}),_this:ag("this",Hp),_super:ag("super",Hp),_class:ag("class",Hp),_extends:ag("extends",br),_export:ag("export"),_import:ag("import",Hp),_null:ag("null",Hp),_true:ag("true",Hp),_false:ag("false",Hp),_in:ag("in",{beforeExpr:!0,binop:7}),_instanceof:ag("instanceof",{beforeExpr:!0,binop:7}),_typeof:ag("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ag("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ag("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ip=/\r\n?|\n|\u2028|\u2029/,
zA=new RegExp(Ip.source,"g"),yQ=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,cr=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,B1=Object.prototype,jG=B1.hasOwnProperty,kda=B1.toString,DT=Array.isArray||function(c){return"[object Array]"===kda.call(c)},AA=function(c,h){this.line=c;this.column=h};AA.prototype.offset=function(c){return new AA(this.line,this.column+c)};var SC=function(c,h,d){this.start=h;this.end=d;null!==c.sourceFile&&(this.source=c.sourceFile)},iG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},CT=!1,tk=function(c,h,d){this.options=c=pt(c);this.sourceFile=c.sourceFile;this.keywords=Em(ida[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var k="";!0!==c.allowReserved&&(k=wQ[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(k+=" await"));this.reservedWords=Em(k);k=(k?k+" ":"")+wQ.strict;this.reservedWordsStrict=Em(k);this.reservedWordsStrictBind=Em(k+" "+wQ.strictBind);this.input=String(h);this.containsEsc=!1;d?(this.pos=d,this.lineStart=this.input.lastIndexOf("\n",d-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ip).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=yb.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports={};0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},Hx={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};tk.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};Hx.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Hx.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};Hx.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};Hx.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};Hx.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Hx.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Hx.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};tk.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var d=0;d<c.length;d++)h=c[d](h);return h};tk.parse=function(c,h){return(new this(h,
c)).parse()};tk.parseExpressionAt=function(c,h,d){c=new this(d,c,h);c.nextToken();return c.parseExpression()};tk.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(tk.prototype,Hx);var Tn=tk.prototype,lda=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Tn.strictDirective=function(c){for(;;){cr.lastIndex=c;c+=cr.exec(this.input)[0].length;var h=lda.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){cr.lastIndex=c+h[0].length;c=cr.exec(this.input);h=c.index+
c[0].length;var d=this.input.charAt(h);return";"===d||"}"===d||Ip.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(d)||"!"===d&&"="===this.input.charAt(h+1))}c+=h[0].length;cr.lastIndex=c;c+=cr.exec(this.input)[0].length;";"===this.input[c]&&c++}};Tn.eat=function(c){return this.type===c?(this.next(),!0):!1};Tn.isContextual=function(c){return this.type===yb.name&&this.value===c&&!this.containsEsc};Tn.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Tn.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};Tn.canInsertSemicolon=function(){return this.type===yb.eof||this.type===yb.braceR||Ip.test(this.input.slice(this.lastTokEnd,this.start))};Tn.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Tn.semicolon=function(){this.eat(yb.semi)||this.insertSemicolon()||this.unexpected()};Tn.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);h||this.next();return!0}};Tn.expect=function(c){this.eat(c)||this.unexpected()};Tn.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Tn.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Tn.checkExpressionErrors=function(c,h){if(!c)return!1;var d=c.shorthandAssign;
c=c.doubleProto;if(!h)return 0<=d||0<=c;0<=d&&this.raise(d,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Tn.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Tn.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var uh=tk.prototype;uh.parseTopLevel=function(c){var h={};c.body||(c.body=[]);for(;this.type!==yb.eof;){var d=this.parseStatement(null,!0,h);c.body.push(d)}if(this.inModule)for(h=0,d=Object.keys(this.undefinedExports);h<d.length;h+=1){var k=d[h];this.raiseRecoverable(this.undefinedExports[k].start,"Export '"+k+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=this.options.sourceType;
return this.finishNode(c,"Program")};var zQ={kind:"loop"},mda={kind:"switch"};uh.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;cr.lastIndex=this.pos;var h=cr.exec(this.input);h=this.pos+h[0].length;var d=this.input.charCodeAt(h);if(91===d)return!0;if(c)return!1;if(123===d)return!0;if(Hi(d,!0)){for(c=h+1;xg(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(h,c);if(!jda.test(c))return!0}return!1};uh.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual("async"))return!1;
cr.lastIndex=this.pos;var c=cr.exec(this.input);c=this.pos+c[0].length;return!Ip.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!xg(this.input.charAt(c+8)))};uh.parseStatement=function(c,h,d){var k=this.type,n=this.startNode();if(this.isLet(c)){k=yb._var;var b="let"}switch(k){case yb._break:case yb._continue:return this.parseBreakContinueStatement(n,k.keyword);case yb._debugger:return this.parseDebuggerStatement(n);case yb._do:return this.parseDoStatement(n);
case yb._for:return this.parseForStatement(n);case yb._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case yb._class:return c&&this.unexpected(),this.parseClass(n,!0);case yb._if:return this.parseIfStatement(n);case yb._return:return this.parseReturnStatement(n);case yb._switch:return this.parseSwitchStatement(n);case yb._throw:return this.parseThrowStatement(n);case yb._try:return this.parseTryStatement(n);
case yb._const:case yb._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case yb._while:return this.parseWhileStatement(n);case yb._with:return this.parseWithStatement(n);case yb.braceL:return this.parseBlock(!0,n);case yb.semi:return this.parseEmptyStatement(n);case yb._export:case yb._import:if(10<this.options.ecmaVersion&&k===yb._import&&(cr.lastIndex=this.pos,c=cr.exec(this.input),c=this.input.charCodeAt(this.pos+c[0].length),40===c||46===c))return this.parseExpressionStatement(n,
this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return k===yb._import?this.parseImport(n):this.parseExport(n,d);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;d=this.parseExpression();return k===yb.name&&"Identifier"===
d.type&&this.eat(yb.colon)?this.parseLabeledStatement(n,h,d,c):this.parseExpressionStatement(n,d)}};uh.parseBreakContinueStatement=function(c,h){var d="break"===h;this.next();this.eat(yb.semi)||this.insertSemicolon()?c.label=null:this.type!==yb.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var k=0;k<this.labels.length;++k){var n=this.labels[k];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(d||"loop"===n.kind))break;if(c.label&&d)break}}k===this.labels.length&&
this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,d?"BreakStatement":"ContinueStatement")};uh.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};uh.parseDoStatement=function(c){this.next();this.labels.push(zQ);c.body=this.parseStatement("do");this.labels.pop();this.expect(yb._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(yb.semi):this.semicolon();return this.finishNode(c,"DoWhileStatement")};uh.parseForStatement=
function(c){this.next();var h=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(zQ);this.enterScope(0);this.expect(yb.parenL);if(this.type===yb.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var d=this.isLet();if(this.type===yb._var||this.type===yb._const||d){var k=this.startNode();d=d?"let":this.value;this.next();this.parseVar(k,!0,d);this.finishNode(k,"VariableDeclaration");
if((this.type===yb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===k.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===yb._in?-1<h&&this.unexpected(h):c.await=-1<h),this.parseForIn(c,k);-1<h&&this.unexpected(h);return this.parseFor(c,k)}k=new po;d=this.parseExpression(!0,k);if(this.type===yb._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===yb._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(d,
!1,k),this.checkLValPattern(d),this.parseForIn(c,d);this.checkExpressionErrors(k,!0);-1<h&&this.unexpected(h);return this.parseFor(c,d)};uh.parseFunctionStatement=function(c,h,d){this.next();return this.parseFunction(c,zE|(d?0:AQ),!1,h)};uh.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(yb._else)?this.parseStatement("if"):null;return this.finishNode(c,"IfStatement")};uh.parseReturnStatement=function(c){this.inFunction||
this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(yb.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};uh.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(yb.braceL);this.labels.push(mda);this.enterScope(0);for(var h,d=!1;this.type!==yb.braceR;)if(this.type===yb._case||this.type===
yb._default){var k=this.type===yb._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();k?h.test=this.parseExpression():(d&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),d=!0,h.test=null);this.expect(yb.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,"SwitchStatement")};uh.parseThrowStatement=
function(c){this.next();Ip.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var nda=[];uh.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===yb._catch){var h=this.startNode();this.next();if(this.eat(yb.parenL)){h.param=this.parseBindingAtom();var d="Identifier"===h.param.type;this.enterScope(d?32:
0);this.checkLValPattern(h.param,d?4:2);this.expect(yb.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,"CatchClause")}c.finalizer=this.eat(yb._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};uh.parseVarStatement=function(c,h){this.next();this.parseVar(c,!1,h);this.semicolon();return this.finishNode(c,
"VariableDeclaration")};uh.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(zQ);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};uh.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};uh.parseEmptyStatement=function(c){this.next();return this.finishNode(c,
"EmptyStatement")};uh.parseLabeledStatement=function(c,h,d,k){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===h&&this.raise(d.start,"Label '"+h+"' is already declared");n=this.type.isLoop?"loop":this.type===yb._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var e=this.labels[b];if(e.statementStart===c.start)e.statementStart=this.start,e.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(k?-1===k.indexOf("label")?k+"label":k:"label");
this.labels.pop();c.label=d;return this.finishNode(c,"LabeledStatement")};uh.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};uh.parseBlock=function(c,h,d){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(yb.braceL);for(c&&this.enterScope(0);this.type!==yb.braceR;){var k=this.parseStatement(null);h.body.push(k)}d&&(this.strict=!1);this.next();c&&this.exitScope();return this.finishNode(h,"BlockStatement")};
uh.parseFor=function(c,h){c.init=h;this.expect(yb.semi);c.test=this.type===yb.semi?null:this.parseExpression();this.expect(yb.semi);c.update=this.type===yb.parenR?null:this.parseExpression();this.expect(yb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};uh.parseForIn=function(c,h){var d=this.type===yb._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!d||8>this.options.ecmaVersion||this.strict||"var"!==
h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(d?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=d?this.parseExpression():this.parseMaybeAssign();this.expect(yb.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,d?"ForInStatement":"ForOfStatement")};uh.parseVar=function(c,h,d){c.declarations=[];for(c.kind=d;;){var k=this.startNode();this.parseVarId(k,d);this.eat(yb.eq)?k.init=this.parseMaybeAssign(h):
"const"!==d||this.type===yb._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===k.id.type||h&&(this.type===yb._in||this.isContextual("of"))?k.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(k,"VariableDeclarator"));if(!this.eat(yb.comma))break}return c};uh.parseVarId=function(c,h){c.id=this.parseBindingAtom();this.checkLValPattern(c.id,"var"===h?1:2,!1)};var zE=1,AQ=2;uh.parseFunction=
function(c,h,d,k){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!k)this.type===yb.star&&h&AQ&&this.unexpected(),c.generator=this.eat(yb.star);8<=this.options.ecmaVersion&&(c.async=!!k);h&zE&&(c.id=h&4&&this.type!==yb.name?null:this.parseIdent(),!c.id||h&AQ||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));k=this.yieldPos;var n=this.awaitPos,b=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|
(c.async?4:0)|(c.generator?8:0));h&zE||(c.id=this.type===yb.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,d,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,h&zE?"FunctionDeclaration":"FunctionExpression")};uh.parseFunctionParams=function(c){this.expect(yb.parenL);c.params=this.parseBindingList(yb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};uh.parseClass=function(c,h){this.next();var d=this.strict;
this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var k=this.startNode(),n=!1;k.body=[];for(this.expect(yb.braceL);this.type!==yb.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(k.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=d;this.next();c.body=this.finishNode(k,"ClassBody");return this.finishNode(c,h?"ClassDeclaration":"ClassExpression")};uh.parseClassElement=function(c){var h=
this;if(this.eat(yb.semi))return null;var d=this.startNode(),k=function(l,a){void 0===a&&(a=!1);var f=h.start,m=h.startLoc;if(!h.eatContextual(l))return!1;if(!(h.type===yb.parenL||a&&h.canInsertSemicolon()))return!0;d.key&&h.unexpected();d.computed=!1;d.key=h.startNodeAt(f,m);d.key.name=l;h.finishNode(d.key,"Identifier");return!1};d.kind="method";d.static=k("static");var n=this.eat(yb.star),b=!1;n||(8<=this.options.ecmaVersion&&k("async",!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(yb.star)):
k("get")?d.kind="get":k("set")&&(d.kind="set"));d.key||this.parsePropertyName(d);k=d.key;var e=!1;d.computed||d.static||!("Identifier"===k.type&&"constructor"===k.name||"Literal"===k.type&&"constructor"===k.value)?d.static&&"Identifier"===k.type&&"prototype"===k.name&&this.raise(k.start,"Classes may not have a static property named prototype"):("method"!==d.kind&&this.raise(k.start,"Constructor can't have get/set modifier"),n&&this.raise(k.start,"Constructor can't be a generator"),b&&this.raise(k.start,
"Constructor can't be an async method"),d.kind="constructor",e=c);this.parseClassMethod(d,n,b,e);"get"===d.kind&&0!==d.value.params.length&&this.raiseRecoverable(d.value.start,"getter should have no params");"set"===d.kind&&1!==d.value.params.length&&this.raiseRecoverable(d.value.start,"setter should have exactly one param");"set"===d.kind&&"RestElement"===d.value.params[0].type&&this.raiseRecoverable(d.value.params[0].start,"Setter cannot use rest params");return d};uh.parseClassMethod=function(c,
h,d,k){c.value=this.parseMethod(h,d,k);return this.finishNode(c,"MethodDefinition")};uh.parseClassId=function(c,h){this.type===yb.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};uh.parseClassSuper=function(c){c.superClass=this.eat(yb._extends)?this.parseExprSubscripts():null};uh.parseExport=function(c,h){this.next();if(this.eat(yb.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=this.parseIdent(!0),this.checkExport(h,
c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==yb.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(yb._default)){this.checkExport(h,"default",this.lastTokStart);var d;this.type===yb._function||(d=this.isAsyncFunction())?(h=this.startNode(),this.next(),d&&this.next(),c.declaration=this.parseFunction(h,zE|4,!1,d)):this.type===yb._class?(d=this.startNode(),c.declaration=this.parseClass(d,
"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(h);if(this.eatContextual("from"))this.type!==
yb.string&&this.unexpected(),c.source=this.parseExprAtom();else{d=0;for(h=c.specifiers;d<h.length;d+=1){var k=h[d];this.checkUnreserved(k.local);this.checkLocalExport(k.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};uh.checkExport=function(c,h,d){c&&(jG.call(c,h)&&this.raiseRecoverable(d,"Duplicate export '"+h+"'"),c[h]=!0)};uh.checkPatternExport=function(c,h){var d=h.type;if("Identifier"===d)this.checkExport(c,h.name,h.start);else if("ObjectPattern"===d)for(d=
0,h=h.properties;d<h.length;d+=1)this.checkPatternExport(c,h[d]);else if("ArrayPattern"===d)for(d=0,h=h.elements;d<h.length;d+=1){var k=h[d];k&&this.checkPatternExport(c,k)}else"Property"===d?this.checkPatternExport(c,h.value):"AssignmentPattern"===d?this.checkPatternExport(c,h.left):"RestElement"===d?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===d&&this.checkPatternExport(c,h.expression)};uh.checkVariableExport=function(c,h){if(c)for(var d=0;d<h.length;d+=1)this.checkPatternExport(c,
h[d].id)};uh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};uh.parseExportSpecifiers=function(c){var h=[],d=!0;for(this.expect(yb.braceL);!this.eat(yb.braceR);){if(d)d=!1;else if(this.expect(yb.comma),this.afterTrailingComma(yb.braceR))break;var k=this.startNode();k.local=this.parseIdent(!0);k.exported=this.eatContextual("as")?this.parseIdent(!0):
k.local;this.checkExport(c,k.exported.name,k.exported.start);h.push(this.finishNode(k,"ExportSpecifier"))}return h};uh.parseImport=function(c){this.next();this.type===yb.string?(c.specifiers=nda,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===yb.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};uh.parseImportSpecifiers=function(){var c=[],h=!0;if(this.type===yb.name){var d=
this.startNode();d.local=this.parseIdent();this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportDefaultSpecifier"));if(!this.eat(yb.comma))return c}if(this.type===yb.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(yb.braceL);!this.eat(yb.braceR);){if(h)h=!1;else if(this.expect(yb.comma),this.afterTrailingComma(yb.braceR))break;d=this.startNode();
d.imported=this.parseIdent(!0);this.eatContextual("as")?d.local=this.parseIdent():(this.checkUnreserved(d.imported),d.local=d.imported);this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportSpecifier"))}return c};uh.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};uh.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===typeof c.expression.value&&
('"'===this.input[c.start]||"'"===this.input[c.start])};var ts=tk.prototype;ts.toAssignable=function(c,h,d){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";d&&this.checkPatternErrors(d,!0);d=0;for(var k=c.properties;d<k.length;d+=
1){var n=k[d];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";d&&this.checkPatternErrors(d,!0);this.toAssignableList(c.elements,h);break;case "SpreadElement":c.type="RestElement";this.toAssignable(c.argument,
h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,d);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else d&&this.checkPatternErrors(d,!0);return c};ts.toAssignableList=function(c,h){for(var d=c.length,k=0;k<d;k++){var n=c[k];n&&this.toAssignable(n,h)}d&&(d=c[d-1],6===this.options.ecmaVersion&&h&&d&&"RestElement"===d.type&&"Identifier"!==d.argument.type&&this.unexpected(d.argument.start));return c};ts.parseSpread=function(c){var h=this.startNode();this.next();h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,
"SpreadElement")};ts.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==yb.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};ts.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case yb.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(yb.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case yb.braceL:return this.parseObj(!0)}return this.parseIdent()};
ts.parseBindingList=function(c,h,d){for(var k=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(yb.comma),h&&this.type===yb.comma)k.push(null);else if(d&&this.afterTrailingComma(c))break;else if(this.type===yb.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);k.push(h);this.type===yb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);k.push(b)}return k};
ts.parseBindingListItem=function(c){return c};ts.parseMaybeDefault=function(c,h,d){d=d||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(yb.eq))return d;c=this.startNodeAt(c,h);c.left=d;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};ts.checkLValSimple=function(c,h,d){void 0===h&&(h=0);var k=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(k?"Binding ":"Assigning to ")+c.name+
" in strict mode");k&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),d&&(jG.call(d,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),d[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":k&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return k&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,d);default:this.raise(c.start,(k?"Binding":"Assigning to")+" rvalue")}};ts.checkLValPattern=function(c,h,d){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var k=0;for(c=c.properties;k<c.length;k+=1)this.checkLValInnerPattern(c[k],h,d);break;case "ArrayPattern":k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&this.checkLValInnerPattern(n,h,d)}break;default:this.checkLValSimple(c,h,d)}};ts.checkLValInnerPattern=
function(c,h,d){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,d);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,d);break;case "RestElement":this.checkLValPattern(c.argument,h,d);break;default:this.checkLValPattern(c,h,d)}};var Ih=tk.prototype;Ih.checkPropClash=function(c,h,d){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var k=c.key;switch(k.type){case "Identifier":var n=
k.name;break;case "Literal":n=String(k.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(d?0>d.doubleProto&&(d.doubleProto=k.start):this.raiseRecoverable(k.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(d=h[n])?("init"===c?this.strict&&d.init||d.get||d.set:d.init||d[c])&&this.raiseRecoverable(k.start,"Redefinition of property"):d=h[n]={init:!1,get:!1,set:!1},d[c]=!0)}};Ih.parseExpression=function(c,h){var d=this.start,k=this.startLoc,
n=this.parseMaybeAssign(c,h);if(this.type===yb.comma){d=this.startNodeAt(d,k);for(d.expressions=[n];this.eat(yb.comma);)d.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(d,"SequenceExpression")}return n};Ih.parseMaybeAssign=function(c,h,d){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var k=!1,n=-1,b=-1;h?(n=h.parenthesizedAssign,b=h.trailingComma,h.parenthesizedAssign=h.trailingComma=-1):(h=new po,k=!0);var e=this.start,l=this.startLoc;
if(this.type===yb.parenL||this.type===yb.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,h);d&&(a=d.call(this,a,e,l));if(this.type.isAssign)return d=this.startNodeAt(e,l),d.operator=this.value,this.type===yb.eq&&(a=this.toAssignable(a,!1,h)),k||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=a.start&&(h.shorthandAssign=-1),this.type===yb.eq?this.checkLValPattern(a):this.checkLValSimple(a),d.left=a,this.next(),d.right=this.parseMaybeAssign(c),this.finishNode(d,
"AssignmentExpression");k&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<b&&(h.trailingComma=b);return a};Ih.parseMaybeConditional=function(c,h){var d=this.start,k=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(yb.question)?(h=this.startNodeAt(d,k),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(yb.colon),h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};Ih.parseExprOps=function(c,h){var d=this.start,
k=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===d&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,d,k,-1,c)};Ih.parseExprOp=function(c,h,d,k,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==yb._in)&&b>k){var e=this.type===yb.logicalOR||this.type===yb.logicalAND,l=this.type===yb.coalesce;l&&(b=yb.logicalAND.binop);var a=this.value;this.next();var f=this.start,m=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),f,m,b,n);c=this.buildBinary(h,
d,c,b,a,e||l);(e&&this.type===yb.coalesce||l&&(this.type===yb.logicalOR||this.type===yb.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,d,k,n)}return c};Ih.buildBinary=function(c,h,d,k,n,b){c=this.startNodeAt(c,h);c.left=d;c.operator=n;c.right=k;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};Ih.parseMaybeUnary=function(c,h){var d=this.start,k=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();h=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===yb.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):h=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(d,k),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!h&&this.eat(yb.starstar)?this.buildBinary(d,k,n,this.parseMaybeUnary(null,!1),"**",!1):n};Ih.parseExprSubscripts=function(c){var h=this.start,d=this.startLoc,k=this.parseExprAtom(c);if("ArrowFunctionExpression"===
k.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return k;h=this.parseSubscripts(k,h,d);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&(c.parenthesizedBind=-1));return h};Ih.parseSubscripts=function(c,h,d,k){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===c.start,b=!1;;){var e=this.parseSubscript(c,
h,d,k,n,b);e.optional&&(b=!0);if(e===c||"ArrowFunctionExpression"===e.type)return b&&(c=this.startNodeAt(h,d),c.expression=e,e=this.finishNode(c,"ChainExpression")),e;c=e}};Ih.parseSubscript=function(c,h,d,k,n,b){var e=11<=this.options.ecmaVersion,l=e&&this.eat(yb.questionDot);k&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(yb.bracketL);if(a||l&&this.type!==yb.parenL&&this.type!==yb.backQuote||this.eat(yb.dot))h=this.startNodeAt(h,
d),h.object=c,h.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!a,a&&this.expect(yb.bracketR),e&&(h.optional=l),c=this.finishNode(h,"MemberExpression");else if(!k&&this.eat(yb.parenL)){k=new po;b=this.yieldPos;var f=this.awaitPos,m=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(yb.parenR,8<=this.options.ecmaVersion,!1,k);if(n&&!l&&!this.canInsertSemicolon()&&this.eat(yb.arrow))return this.checkPatternErrors(k,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=f,this.awaitIdentPos=m,this.parseArrowExpression(this.startNodeAt(h,d),a,!0);this.checkExpressionErrors(k,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=f||this.awaitPos;this.awaitIdentPos=m||this.awaitIdentPos;h=this.startNodeAt(h,d);h.callee=c;h.arguments=a;e&&(h.optional=l);c=this.finishNode(h,"CallExpression")}else this.type===
yb.backQuote&&((l||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),e=this.startNodeAt(h,d),e.tag=c,e.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(e,"TaggedTemplateExpression"));return c};Ih.parseExprAtom=function(c){this.type===yb.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case yb._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),
this.type!==yb.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==yb.dot&&this.type!==yb.bracketL&&this.type!==yb.parenL&&this.unexpected(),this.finishNode(h,"Super");case yb._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case yb.name:c=this.start;var d=this.startLoc,k=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!k&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(yb._function))return this.parseFunction(this.startNodeAt(c,
d),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(yb.arrow))return this.parseArrowExpression(this.startNodeAt(c,d),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===yb.name&&!k)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(yb.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,d),[n],!0)}return n;case yb.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case yb.num:case yb.string:return this.parseLiteral(this.value);
case yb._null:case yb._true:case yb._false:return h=this.startNode(),h.value=this.type===yb._null?null:this.type===yb._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case yb.parenL:return d=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=d),0>c.parenthesizedBind&&(c.parenthesizedBind=d)),h;case yb.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(yb.bracketR,
!0,!0,c),this.finishNode(h,"ArrayExpression");case yb.braceL:return this.parseObj(!1,c);case yb._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case yb._class:return this.parseClass(this.startNode(),!1);case yb._new:return this.parseNew();case yb.backQuote:return this.parseTemplate();case yb._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Ih.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);switch(this.type){case yb.parenL:return this.parseDynamicImport(c);case yb.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};Ih.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(yb.parenR)){var h=this.start;this.eat(yb.comma)&&this.eat(yb.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,
"ImportExpression")};Ih.parseImportMeta=function(c){this.next();var h=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"!==this.options.sourceType&&this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,"MetaProperty")};Ih.parseLiteral=function(c){var h=
this.startNode();h.value=c;h.raw=this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};Ih.parseParenExpression=function(){this.expect(yb.parenL);var c=this.parseExpression();this.expect(yb.parenR);return c};Ih.parseParenAndDistinguishExpression=function(c){var h=this.start,d=this.startLoc,k=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();var n=this.start,b=
this.startLoc,e=[],l=!0,a=!1,f=new po,m=this.yieldPos,q=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==yb.parenR;)if(l?l=!1:this.expect(yb.comma),k&&this.afterTrailingComma(yb.parenR,!0)){a=!0;break}else if(this.type===yb.ellipsis){var r=this.start;e.push(this.parseParenItem(this.parseRestBinding()));this.type===yb.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else e.push(this.parseMaybeAssign(!1,f,this.parseParenItem));k=this.start;l=this.startLoc;
this.expect(yb.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(yb.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=q,this.parseParenArrowList(h,d,e);e.length&&!a||this.unexpected(this.lastTokStart);r&&this.unexpected(r);this.checkExpressionErrors(f,!0);this.yieldPos=m||this.yieldPos;this.awaitPos=q||this.awaitPos;1<e.length?(c=this.startNodeAt(n,b),c.expressions=e,this.finishNodeAt(c,"SequenceExpression",k,l)):c=e[0]}else c=this.parseParenExpression();
return this.options.preserveParens?(h=this.startNodeAt(h,d),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};Ih.parseParenItem=function(c){return c};Ih.parseParenArrowList=function(c,h,d){return this.parseArrowExpression(this.startNodeAt(c,h),d)};var oda=[];Ih.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(yb.dot))return c.meta=h,h=this.containsEsc,
c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var d=this.startLoc,k=this.type===yb._import;c.callee=this.parseSubscripts(this.parseExprAtom(),h,d,!0);k&&"ImportExpression"===
c.callee.type&&this.raise(h,"Cannot use new with import()");this.eat(yb.parenL)?c.arguments=this.parseExprList(yb.parenR,8<=this.options.ecmaVersion,!1):c.arguments=oda;return this.finishNode(c,"NewExpression")};Ih.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===yb.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,
"\n"),cooked:this.value};this.next();h.tail=this.type===yb.backQuote;return this.finishNode(h,"TemplateElement")};Ih.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var d=this.parseTemplateElement({isTagged:c});for(h.quasis=[d];!d.tail;)this.type===yb.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(yb.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(yb.braceR),h.quasis.push(d=
this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(h,"TemplateLiteral")};Ih.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===yb.name||this.type===yb.num||this.type===yb.string||this.type===yb.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===yb.star)&&!Ip.test(this.input.slice(this.lastTokEnd,this.start))};Ih.parseObj=function(c,h){var d=this.startNode(),k=!0,n={};d.properties=[];for(this.next();!this.eat(yb.braceR);){if(k)k=
!1;else if(this.expect(yb.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(yb.braceR))break;var b=this.parseProperty(c,h);c||this.checkPropClash(b,n,h);d.properties.push(b)}return this.finishNode(d,c?"ObjectPattern":"ObjectExpression")};Ih.parseProperty=function(c,h){var d=this.startNode(),k;if(9<=this.options.ecmaVersion&&this.eat(yb.ellipsis)){if(c)return d.argument=this.parseIdent(!1),this.type===yb.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(d,
"RestElement");this.type===yb.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));d.argument=this.parseMaybeAssign(!1,h);this.type===yb.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(d,"SpreadElement")}if(6<=this.options.ecmaVersion){d.method=!1;d.shorthand=!1;if(c||h){var n=this.start;var b=this.startLoc}c||(k=this.eat(yb.star))}var e=this.containsEsc;this.parsePropertyName(d);if(!c&&!e&&
8<=this.options.ecmaVersion&&!k&&this.isAsyncProp(d)){var l=!0;k=9<=this.options.ecmaVersion&&this.eat(yb.star);this.parsePropertyName(d,h)}else l=!1;this.parsePropertyValue(d,c,k,l,n,b,h,e);return this.finishNode(d,"Property")};Ih.parsePropertyValue=function(c,h,d,k,n,b,e,l){(d||k)&&this.type===yb.colon&&this.unexpected();this.eat(yb.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,e),c.kind="init"):6<=this.options.ecmaVersion&&this.type===yb.parenL?(h&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(d,k)):h||l||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===yb.comma||this.type===yb.braceR||this.type===yb.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((d||k)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key)):
this.type===yb.eq&&e?(0>e.shorthandAssign&&(e.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((d||k)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};Ih.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(yb.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(yb.bracketR),c.key;c.computed=!1}return c.key=this.type===yb.num||this.type===yb.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Ih.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Ih.parseMethod=function(c,h,d){var k=this.startNode(),n=this.yieldPos,b=this.awaitPos,e=this.awaitIdentPos;this.initFunction(k);6<=this.options.ecmaVersion&&(k.generator=c);8<=this.options.ecmaVersion&&(k.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(k.generator?8:0)|64|(d?128:0));this.expect(yb.parenL);k.params=this.parseBindingList(yb.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(k,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=e;return this.finishNode(k,"FunctionExpression")};Ih.parseArrowExpression=function(c,h,d){var k=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((d?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!d);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};Ih.parseFunctionBody=function(c,h,d){var k=this.strict,n=!1;if(h&&this.type!==yb.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!k||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!k&&!n&&!h&&!d&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!k);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};Ih.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};Ih.checkParams=function(c,h){var d={},k=0;for(c=c.params;k<c.length;k+=1)this.checkLValInnerPattern(c[k],1,h?null:d)};Ih.parseExprList=function(c,h,d,k){for(var n=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(yb.comma),
h&&this.afterTrailingComma(c))break;if(d&&this.type===yb.comma)var e=null;else this.type===yb.ellipsis?(e=this.parseSpread(k),k&&this.type===yb.comma&&0>k.trailingComma&&(k.trailingComma=this.start)):e=this.parseMaybeAssign(!1,k);n.push(e)}return n};Ih.checkUnreserved=function(c){var h=c.start,d=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,d).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};Ih.parseIdent=function(c,h){h=this.startNode();this.type===yb.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,
"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};Ih.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===yb.semi||this.canInsertSemicolon()||this.type!==yb.star&&!this.type.startsExpr?
(h.delegate=!1,h.argument=null):(h.delegate=this.eat(yb.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};Ih.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var xJ=tk.prototype;xJ.raise=function(c,h){var d=Zo(this.input,c);h+=" ("+d.line+":"+d.column+")";h=new SyntaxError(h);h.pos=c;h.loc=d;h.raisedAt=this.pos;throw h;};xJ.raiseRecoverable=
xJ.raise;xJ.curPosition=function(){if(this.options.locations)return new AA(this.curLine,this.pos-this.lineStart)};var Ix=tk.prototype,pda=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};Ix.enterScope=function(c){this.scopeStack.push(new pda(c))};Ix.exitScope=function(){this.scopeStack.pop()};Ix.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};Ix.declareName=function(c,h,d){var k=!1;if(2===h)h=this.currentScope(),k=-1<h.lexical.indexOf(c)||
-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),k=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){k=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}k&&this.raiseRecoverable(d,"Identifier '"+c+"' has already been declared")};Ix.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};Ix.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Ix.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];
if(h.flags&3)return h}};Ix.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var AE=function(c,h,d){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new SC(c,d));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},BE=tk.prototype;BE.startNode=function(){return new AE(this,this.start,this.startLoc)};BE.startNodeAt=function(c,h){return new AE(this,
c,h)};BE.finishNode=function(c,h){return TC.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};BE.finishNodeAt=function(c,h,d,k){return TC.call(this,c,h,d,k)};BE.copyNode=function(c){var h=new AE(this,c.start,this.startLoc),d;for(d in c)h[d]=c[d];return h};var dr=function(c,h,d,k,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!d;this.override=k;this.generator=!!n},gk={b_stat:new dr("{",!1),b_expr:new dr("{",!0),b_tmpl:new dr("${",!1),p_stat:new dr("(",!1),p_expr:new dr("(",!0),q_tmpl:new dr("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new dr("function",!1),f_expr:new dr("function",!0),f_expr_gen:new dr("function",!0,!1,null,!0),f_gen:new dr("function",!1,!1,null,!0)},yJ=tk.prototype;yJ.initialContext=function(){return[gk.b_stat]};yJ.braceIsBlock=function(c){var h=this.curContext();return h===gk.f_expr||h===gk.f_stat?!0:c!==yb.colon||h!==gk.b_stat&&h!==gk.b_expr?c===yb._return||c===yb.name&&this.exprAllowed?Ip.test(this.input.slice(this.lastTokEnd,this.start)):c===yb._else||
c===yb.semi||c===yb.eof||c===yb.parenR||c===yb.arrow?!0:c===yb.braceL?h===gk.b_stat:c===yb._var||c===yb._const||c===yb.name?!1:!this.exprAllowed:!h.isExpr};yJ.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};yJ.updateContext=function(c){var h,d=this.type;d.keyword&&c===yb.dot?this.exprAllowed=!1:(h=d.updateContext)?h.call(this,c):this.exprAllowed=d.beforeExpr};yb.parenR.updateContext=yb.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===gk.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};yb.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?gk.b_stat:gk.b_expr);this.exprAllowed=!0};yb.dollarBraceL.updateContext=function(){this.context.push(gk.b_tmpl);this.exprAllowed=!0};yb.parenL.updateContext=function(c){this.context.push(c===yb._if||c===yb._for||c===yb._with||c===yb._while?
gk.p_stat:gk.p_expr);this.exprAllowed=!0};yb.incDec.updateContext=function(){};yb._function.updateContext=yb._class.updateContext=function(c){!c.beforeExpr||c===yb._else||c===yb.semi&&this.curContext()!==gk.p_stat||c===yb._return&&Ip.test(this.input.slice(this.lastTokEnd,this.start))||(c===yb.colon||c===yb.braceL)&&this.curContext()===gk.b_stat?this.context.push(gk.f_stat):this.context.push(gk.f_expr);this.exprAllowed=!1};yb.backQuote.updateContext=function(){this.curContext()===gk.q_tmpl?this.context.pop():
this.context.push(gk.q_tmpl);this.exprAllowed=!1};yb.star.updateContext=function(c){c===yb._function&&(c=this.context.length-1,this.context[c]=this.context[c]===gk.f_expr?gk.f_expr_gen:gk.f_gen);this.exprAllowed=!0};yb.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==yb.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var l7={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
m7={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
ET={};qy(9);qy(10);qy(11);qy(12);var dg=tk.prototype,Zv=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=ET[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
Zv.prototype.reset=function(c,h,d){var k=-1!==d.indexOf("u");this.start=c|0;this.source=h+"";this.flags=d;this.switchU=k&&6<=this.parser.options.ecmaVersion;this.switchN=k&&9<=this.parser.options.ecmaVersion};Zv.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};Zv.prototype.at=function(c,h){void 0===h&&(h=!1);var d=this.source,k=d.length;if(c>=k)return-1;var n=d.charCodeAt(c);if(!h&&!this.switchU||55295>=n||57344<=n||c+1>=k)return n;
c=d.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};Zv.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var d=this.source,k=d.length;if(c>=k)return k;var n=d.charCodeAt(c),b;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=k||56320>(b=d.charCodeAt(c+1))||57343<b?c+1:c+2};Zv.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};Zv.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};Zv.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};Zv.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};dg.validateRegExpFlags=function(c){for(var h=c.validFlags,d=c.flags,k=0;k<d.length;k++){var n=d.charAt(k);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<d.indexOf(n,k+1)&&this.raise(c.start,"Duplicate regular expression flag")}};dg.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};dg.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var h=0,d=c.backReferenceNames;h<
d.length;h+=1)-1===c.groupNames.indexOf(d[h])&&c.raise("Invalid named capture referenced")};dg.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};dg.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};dg.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};dg.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var d=!1;9<=this.options.ecmaVersion&&(d=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!d,!0}c.pos=h;return!1};dg.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};dg.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};dg.regexp_eatBracedQuantifier=function(c,h){var d=c.pos;if(c.eat(123)){var k=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(k=c.lastIntValue);if(c.eat(125))return-1!==k&&k<n&&!h&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=d}return!1};dg.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};dg.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};dg.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};dg.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};dg.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};dg.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};dg.regexp_eatSyntaxCharacter=function(c){var h=c.current();return UC(h)?(c.lastIntValue=h,c.advance(),!0):!1};dg.regexp_eatPatternCharacters=function(c){for(var h=c.pos,d=0;-1!==(d=c.current())&&
!UC(d);)c.advance();return c.pos!==h};dg.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};dg.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};dg.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};dg.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=rq(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=rq(c.lastIntValue);return!0}return!1};dg.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,d=11<=this.options.ecmaVersion,k=c.current(d);c.advance(d);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(k=c.lastIntValue);
d=k;if(Hi(d,!0)||36===d||95===d)return c.lastIntValue=k,!0;c.pos=h;return!1};dg.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,d=11<=this.options.ecmaVersion,k=c.current(d);c.advance(d);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(k=c.lastIntValue);d=k;if(xg(d,!0)||36===d||95===d||8204===d||8205===d)return c.lastIntValue=k,!0;c.pos=h;return!1};dg.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};dg.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var d=c.lastIntValue;if(c.switchU)return d>c.maxBackReference&&(c.maxBackReference=d),!0;if(d<=c.numCapturingParens)return!0;c.pos=h}return!1};dg.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};dg.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};dg.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};dg.regexp_eatZero=
function(c){return 48!==c.current()||sq(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};dg.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};dg.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};dg.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var d=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){d=c.lastIntValue;if(h&&55296<=d&&56319>=d){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var k=c.lastIntValue;if(56320<=k&&57343>=k)return c.lastIntValue=1024*(d-55296)+(k-56320)+65536,!0}c.pos=h;c.lastIntValue=d}return!0}if(k=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))k=c.lastIntValue,k=0<=k&&1114111>=k;
if(k)return!0;h&&c.raise("Invalid unicode escape");c.pos=d}return!1};dg.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};dg.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};dg.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};dg.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var d=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
d,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};dg.regexp_validateUnicodePropertyNameAndValue=function(c,h,d){jG.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(d)||c.raise("Invalid property value")};dg.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
dg.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";ei(h=c.current());)c.lastStringValue+=rq(h),c.advance();return""!==c.lastStringValue};dg.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";Ti(h=c.current());)c.lastStringValue+=rq(h),c.advance();return""!==c.lastStringValue};dg.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};dg.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};dg.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var d=c.lastIntValue;!c.switchU||-1!==h&&-1!==d||c.raise("Invalid character class");-1!==h&&-1!==d&&h>d&&c.raise("Range out of order in character class")}}};dg.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var d=c.current();(99===
d||48<=d&&55>=d)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};dg.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};dg.regexp_eatClassControlLetter=function(c){var h=
c.current();return sq(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};dg.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};dg.regexp_eatDecimalDigits=function(c){var h=c.pos,d;for(c.lastIntValue=0;sq(d=c.current());)c.lastIntValue=10*c.lastIntValue+(d-48),c.advance();return c.pos!==h};dg.regexp_eatHexDigits=function(c){var h=c.pos,d;for(c.lastIntValue=0;uj(d=c.current());)c.lastIntValue=
16*c.lastIntValue+BA(d),c.advance();return c.pos!==h};dg.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var d=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*d+c.lastIntValue:c.lastIntValue=8*h+d}else c.lastIntValue=h;return!0}return!1};dg.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};dg.regexp_eatFixedHexDigits=
function(c,h){for(var d=c.pos,k=c.lastIntValue=0;k<h;++k){var n=c.current();if(!uj(n))return c.pos=d,!1;c.lastIntValue=16*c.lastIntValue+BA(n);c.advance()}return!0};var zJ=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new SC(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},$h=tk.prototype;$h.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new zJ(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};$h.getToken=function(){this.next();return new zJ(this)};"undefined"!==typeof Symbol&&($h[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===yb.eof,value:h}}}});$h.curContext=function(){return this.context[this.context.length-1]};$h.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(yb.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};$h.readToken=function(c){return Hi(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};$h.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return(c<<10)+h-56613888};$h.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,d=this.input.indexOf("*/",this.pos+=2);-1===d&&this.raise(this.pos-2,"Unterminated comment");this.pos=d+2;if(this.options.locations){zA.lastIndex=h;for(var k;(k=zA.exec(this.input))&&k.index<this.pos;)++this.curLine,this.lineStart=k.index+k[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+2,d),h,this.pos,c,this.curPosition())};
$h.skipLineComment=function(c){for(var h=this.pos,d=this.options.onComment&&this.curPosition(),k=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!ml(k);)k=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,d,this.curPosition())};$h.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&yQ.test(String.fromCharCode(c)))++this.pos;else break a}}};$h.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var d=this.type;this.type=c;this.value=
h;this.updateContext(d)};$h.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(yb.ellipsis);++this.pos;return this.finishToken(yb.dot)};$h.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(yb.assign,2):this.finishOp(yb.slash,1)};
$h.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),d=1,k=42===c?yb.star:yb.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++d,k=yb.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(yb.assign,d+1):this.finishOp(k,d)};$h.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(yb.assign,3):this.finishOp(124===c?yb.logicalOR:yb.logicalAND,
2):61===h?this.finishOp(yb.assign,2):this.finishOp(124===c?yb.bitwiseOR:yb.bitwiseAND,1)};$h.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(yb.assign,2):this.finishOp(yb.bitwiseXOR,1)};$h.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Ip.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(yb.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===h?this.finishOp(yb.assign,2):this.finishOp(yb.plusMin,1)};$h.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),d=1;if(h===c)return d=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+d)?this.finishOp(yb.assign,d+1):this.finishOp(yb.bitShift,d);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===h&&(d=2);return this.finishOp(yb.relational,d)};$h.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(yb.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(yb.arrow)):this.finishOp(61===c?yb.eq:yb.prefix,1)};$h.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var d=this.input.charCodeAt(this.pos+
2);if(48>d||57<d)return this.finishOp(yb.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(yb.assign,3):this.finishOp(yb.coalesce,2)}return this.finishOp(yb.question,1)};$h.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(yb.parenL);case 41:return++this.pos,this.finishToken(yb.parenR);case 59:return++this.pos,this.finishToken(yb.semi);case 44:return++this.pos,this.finishToken(yb.comma);case 91:return++this.pos,
this.finishToken(yb.bracketL);case 93:return++this.pos,this.finishToken(yb.bracketR);case 123:return++this.pos,this.finishToken(yb.braceL);case 125:return++this.pos,this.finishToken(yb.braceR);case 58:return++this.pos,this.finishToken(yb.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(yb.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(yb.prefix,1)}this.raise(this.pos,"Unexpected character '"+Fm(c)+"'")};$h.finishOp=function(c,h){var d=this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,d)};$h.readRegexp=function(){for(var c,h,d=this.pos;;){this.pos>=this.input.length&&this.raise(d,"Unterminated regular expression");var k=this.input.charAt(this.pos);Ip.test(k)&&this.raise(d,"Unterminated regular expression");if(c)c=!1;else{if("["===k)h=
!0;else if("]"===k&&h)h=!1;else if("/"===k&&!h)break;c="\\"===k}++this.pos}c=this.input.slice(d,this.pos);++this.pos;k=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(k);k=this.regexpState||(this.regexpState=new Zv(this));k.reset(d,c,h);this.validateRegExpFlags(k);this.validateRegExpPattern(k);d=null;try{d=new RegExp(c,h)}catch(n){}return this.finishToken(yb.regexp,{pattern:c,flags:h,value:d})};$h.readInt=function(c,h,d){var k=12<=this.options.ecmaVersion&&void 0===h;d=d&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,e=0,l=0,a=null==h?Infinity:h;l<a;++l,++this.pos){var f=this.input.charCodeAt(this.pos);if(k&&95===f)d&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===e&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),e=f;else{var m=97<=f?f-97+10:65<=f?f-65+10:48<=f&&57>=f?f-48:Infinity;if(m>=c)break;e=f;
b=b*c+m}}k&&95===e&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?null:b};$h.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var d=this.readInt(c);null==d&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(d=yc(this.input.slice(h,this.pos)),++this.pos):Hi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(yb.num,d)};$h.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var d=2<=this.pos-h&&48===this.input.charCodeAt(h);d&&this.strict&&this.raise(h,"Invalid number");var k=this.input.charCodeAt(this.pos);if(!d&&!c&&11<=this.options.ecmaVersion&&110===k)return d=yc(this.input.slice(h,this.pos)),++this.pos,Hi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(yb.num,d);d&&/[89]/.test(this.input.slice(h,
this.pos))&&(d=!1);46!==k||d||(++this.pos,this.readInt(10),k=this.input.charCodeAt(this.pos));69!==k&&101!==k||d||(k=this.input.charCodeAt(++this.pos),43!==k&&45!==k||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));Hi(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);d=d?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(yb.num,d)};$h.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};$h.readString=function(c){for(var h="",d=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var k=this.input.charCodeAt(this.pos);if(k===c)break;92===k?(h+=this.input.slice(d,this.pos),h+=this.readEscapedChar(!1),d=
this.pos):(ml(k,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(d,this.pos++);return this.finishToken(yb.string,h)};var C1={};$h.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===C1)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};$h.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw C1;this.raise(c,h)};$h.readTmplToken=
function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var d=this.input.charCodeAt(this.pos);if(96===d||36===d&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===yb.template||this.type===yb.invalidTemplate)){if(36===d)return this.pos+=2,this.finishToken(yb.dollarBraceL);++this.pos;return this.finishToken(yb.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(yb.template,c)}if(92===d)c+=this.input.slice(h,
this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(ml(d)){c+=this.input.slice(h,this.pos);++this.pos;switch(d){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(d)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};$h.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(yb.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};$h.readEscapedChar=function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Fm(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var d=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],k=parseInt(d,8);255<k&&(d=d.slice(0,-1),k=parseInt(d,8));this.pos+=d.length-1;h=this.input.charCodeAt(this.pos);"0"===d&&56!==h&&57!==h||!this.strict&&
!c||this.invalidStringToken(this.pos-1-d.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(k)}return ml(h)?"":String.fromCharCode(h)}};$h.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};$h.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,d=this.pos,k=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(xg(n,
k))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(d,this.pos),d=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(h?Hi:xg)(n,k)||this.invalidStringToken(d,"Invalid Unicode escape"),c+=Fm(n),d=this.pos;else break;h=!1}return c+this.input.slice(d,this.pos)};$h.readWord=function(){var c=this.readWord1(),h=yb.name;this.keywords.test(c)&&(h=hG[c]);return this.finishToken(h,
c)};tk.acorn={Parser:tk,version:"8.0.4",defaultOptions:iG,Position:AA,SourceLocation:SC,getLineInfo:Zo,Node:AE,TokenType:ti,tokTypes:yb,keywordTypes:hG,TokContext:dr,tokContexts:gk,isIdentifierChar:xg,isIdentifierStart:Hi,Token:zJ,isNewLine:ml,lineBreak:Ip,lineBreakG:zA,nonASCIIwhitespace:yQ};var lu=Object.freeze({__proto__:null,Node:AE,Parser:tk,Position:AA,SourceLocation:SC,TokContext:dr,Token:zJ,TokenType:ti,defaultOptions:iG,getLineInfo:Zo,isIdentifierChar:xg,isIdentifierStart:Hi,isNewLine:ml,
keywordTypes:hG,lineBreak:Ip,lineBreakG:zA,nonASCIIwhitespace:yQ,parse:function(c,h){return tk.parse(c,h)},parseExpressionAt:function(c,h,d){return tk.parseExpressionAt(c,h,d)},tokContexts:gk,tokTypes:yb,tokenizer:function(c,h){return tk.tokenizer(c,h)},version:"8.0.4"});wa("bD",lu);var Gz=function(c,h){this.node=c;this.state=h},ue={};ue.Program=ue.BlockStatement=function(c,h,d){var k=0;for(c=c.body;k<c.length;k+=1)d(c[k],h,"Statement")};ue.Statement=Hr;ue.EmptyStatement=ap;ue.ExpressionStatement=
ue.ParenthesizedExpression=ue.ChainExpression=function(c,h,d){return d(c.expression,h,"Expression")};ue.IfStatement=function(c,h,d){d(c.test,h,"Expression");d(c.consequent,h,"Statement");c.alternate&&d(c.alternate,h,"Statement")};ue.LabeledStatement=function(c,h,d){return d(c.body,h,"Statement")};ue.BreakStatement=ue.ContinueStatement=ap;ue.WithStatement=function(c,h,d){d(c.object,h,"Expression");d(c.body,h,"Statement")};ue.SwitchStatement=function(c,h,d){d(c.discriminant,h,"Expression");var k=0;
for(c=c.cases;k<c.length;k+=1){var n=c[k];n.test&&d(n.test,h,"Expression");var b=0;for(n=n.consequent;b<n.length;b+=1)d(n[b],h,"Statement")}};ue.SwitchCase=function(c,h,d){c.test&&d(c.test,h,"Expression");var k=0;for(c=c.consequent;k<c.length;k+=1)d(c[k],h,"Statement")};ue.ReturnStatement=ue.YieldExpression=ue.AwaitExpression=function(c,h,d){c.argument&&d(c.argument,h,"Expression")};ue.ThrowStatement=ue.SpreadElement=function(c,h,d){return d(c.argument,h,"Expression")};ue.TryStatement=function(c,
h,d){d(c.block,h,"Statement");c.handler&&d(c.handler,h);c.finalizer&&d(c.finalizer,h,"Statement")};ue.CatchClause=function(c,h,d){c.param&&d(c.param,h,"Pattern");d(c.body,h,"Statement")};ue.WhileStatement=ue.DoWhileStatement=function(c,h,d){d(c.test,h,"Expression");d(c.body,h,"Statement")};ue.ForStatement=function(c,h,d){c.init&&d(c.init,h,"ForInit");c.test&&d(c.test,h,"Expression");c.update&&d(c.update,h,"Expression");d(c.body,h,"Statement")};ue.ForInStatement=ue.ForOfStatement=function(c,h,d){d(c.left,
h,"ForInit");d(c.right,h,"Expression");d(c.body,h,"Statement")};ue.ForInit=function(c,h,d){"VariableDeclaration"===c.type?d(c,h):d(c,h,"Expression")};ue.DebuggerStatement=ap;ue.FunctionDeclaration=function(c,h,d){return d(c,h,"Function")};ue.VariableDeclaration=function(c,h,d){var k=0;for(c=c.declarations;k<c.length;k+=1)d(c[k],h)};ue.VariableDeclarator=function(c,h,d){d(c.id,h,"Pattern");c.init&&d(c.init,h,"Expression")};ue.Function=function(c,h,d){c.id&&d(c.id,h,"Pattern");for(var k=0,n=c.params;k<
n.length;k+=1)d(n[k],h,"Pattern");d(c.body,h,c.expression?"Expression":"Statement")};ue.Pattern=function(c,h,d){"Identifier"===c.type?d(c,h,"VariablePattern"):"MemberExpression"===c.type?d(c,h,"MemberPattern"):d(c,h)};ue.VariablePattern=ap;ue.MemberPattern=Hr;ue.RestElement=function(c,h,d){return d(c.argument,h,"Pattern")};ue.ArrayPattern=function(c,h,d){var k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&d(n,h,"Pattern")}};ue.ObjectPattern=function(c,h,d){var k=0;for(c=c.properties;k<c.length;k+=
1){var n=c[k];"Property"===n.type?(n.computed&&d(n.key,h,"Expression"),d(n.value,h,"Pattern")):"RestElement"===n.type&&d(n.argument,h,"Pattern")}};ue.Expression=Hr;ue.ThisExpression=ue.Super=ue.MetaProperty=ap;ue.ArrayExpression=function(c,h,d){var k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&d(n,h,"Expression")}};ue.ObjectExpression=function(c,h,d){var k=0;for(c=c.properties;k<c.length;k+=1)d(c[k],h)};ue.FunctionExpression=ue.ArrowFunctionExpression=ue.FunctionDeclaration;ue.SequenceExpression=
function(c,h,d){var k=0;for(c=c.expressions;k<c.length;k+=1)d(c[k],h,"Expression")};ue.TemplateLiteral=function(c,h,d){for(var k=0,n=c.quasis;k<n.length;k+=1)d(n[k],h);k=0;for(c=c.expressions;k<c.length;k+=1)d(c[k],h,"Expression")};ue.TemplateElement=ap;ue.UnaryExpression=ue.UpdateExpression=function(c,h,d){d(c.argument,h,"Expression")};ue.BinaryExpression=ue.LogicalExpression=function(c,h,d){d(c.left,h,"Expression");d(c.right,h,"Expression")};ue.AssignmentExpression=ue.AssignmentPattern=function(c,
h,d){d(c.left,h,"Pattern");d(c.right,h,"Expression")};ue.ConditionalExpression=function(c,h,d){d(c.test,h,"Expression");d(c.consequent,h,"Expression");d(c.alternate,h,"Expression")};ue.NewExpression=ue.CallExpression=function(c,h,d){d(c.callee,h,"Expression");if(c.arguments){var k=0;for(c=c.arguments;k<c.length;k+=1)d(c[k],h,"Expression")}};ue.MemberExpression=function(c,h,d){d(c.object,h,"Expression");c.computed&&d(c.property,h,"Expression")};ue.ExportNamedDeclaration=ue.ExportDefaultDeclaration=
function(c,h,d){c.declaration&&d(c.declaration,h,"ExportNamedDeclaration"===c.type||c.declaration.id?"Statement":"Expression");c.source&&d(c.source,h,"Expression")};ue.ExportAllDeclaration=function(c,h,d){c.exported&&d(c.exported,h);d(c.source,h,"Expression")};ue.ImportDeclaration=function(c,h,d){for(var k=0,n=c.specifiers;k<n.length;k+=1)d(n[k],h);d(c.source,h,"Expression")};ue.ImportExpression=function(c,h,d){d(c.source,h,"Expression")};ue.ImportSpecifier=ue.ImportDefaultSpecifier=ue.ImportNamespaceSpecifier=
ue.Identifier=ue.Literal=ap;ue.TaggedTemplateExpression=function(c,h,d){d(c.tag,h,"Expression");d(c.quasi,h,"Expression")};ue.ClassDeclaration=ue.ClassExpression=function(c,h,d){return d(c,h,"Class")};ue.Class=function(c,h,d){c.id&&d(c.id,h,"Pattern");c.superClass&&d(c.superClass,h,"Expression");d(c.body,h)};ue.ClassBody=function(c,h,d){var k=0;for(c=c.body;k<c.length;k+=1)d(c[k],h)};ue.MethodDefinition=ue.Property=function(c,h,d){c.computed&&d(c.key,h,"Expression");d(c.value,h,"Expression")};var us=
Object.freeze({__proto__:null,ancestor:function(c,h,d,k,n){var b=[];d||(d=ue);(function m(l,a,f){f=f||l.type;var q=h[f],r=l!==b[b.length-1];r&&b.push(l);d[f](l,a,m);q&&q(l,a||b,b);r&&b.pop()})(c,k,n)},base:ue,findNodeAfter:function(c,h,d,k,n){d=$o(d);k||(k=ue);try{(function f(e,l,a){if(!(e.end<h)){a=a||e.type;if(e.start>=h&&d(a,e))throw new Gz(e,l);k[a](e,l,f)}})(c,n)}catch(b){if(b instanceof Gz)return b;throw b;}},findNodeAround:function(c,h,d,k,n){d=$o(d);k||(k=ue);try{(function f(e,l,a){a=a||e.type;
if(!(e.start>h||e.end<h)&&(k[a](e,l,f),d(a,e)))throw new Gz(e,l);})(c,n)}catch(b){if(b instanceof Gz)return b;throw b;}},findNodeAt:function(c,h,d,k,n,b){n||(n=ue);k=$o(k);try{(function m(l,a,f){f=f||l.type;if((null==h||l.start<=h)&&(null==d||l.end>=d))n[f](l,a,m);if(!(null!=h&&l.start!==h||null!=d&&l.end!==d)&&k(f,l))throw new Gz(l,a);})(c,b)}catch(e){if(e instanceof Gz)return e;throw e;}},findNodeBefore:function(c,h,d,k,n){d=$o(d);k||(k=ue);var b;(function m(l,a,f){l.start>h||(f=f||l.type,l.end<=
h&&(!b||b.node.end<l.end)&&d(f,l)&&(b=new Gz(l,a)),k[f](l,a,m))})(c,n);return b},full:function(c,h,d,k,n){d||(d=ue);var b;(function m(l,a,f){f=f||l.type;d[f](l,a,m);b!==l&&(h(l,a,f),b=l)})(c,k,n)},fullAncestor:function(c,h,d,k){d||(d=ue);var n=[],b;(function m(l,a,f){f=f||l.type;var q=l!==n[n.length-1];q&&n.push(l);d[f](l,a,m);b!==l&&(h(l,a||n,n,f),b=l);q&&n.pop()})(c,k)},make:Ew,recursive:function(c,h,d,k,n){var b=d?Ew(d,k||void 0):k;(function m(l,a,f){b[f||l.type](l,a,m)})(c,h,n)},simple:function(c,
h,d,k,n){d||(d=ue);(function f(e,l,a){a=a||e.type;var m=h[a];d[a](e,l,f);m&&m(e,l)})(c,k,n)}}),BQ={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},qda={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",
"5module":"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this export import",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"},rda=/^in(stanceof)?$/,CQ="\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08c7\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\u9ffc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7ca\ua7f5-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
D1="\u200c\u200d\u00b7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf\u1ac0\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",
n7=new RegExp("["+CQ+"]"),o7=new RegExp("["+CQ+D1+"]");CQ=D1=null;var FT=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,
2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,
3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],p7=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,
2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,
787719,239],zi=function(c,h){void 0===h&&(h={});this.label=c;this.keyword=h.keyword;this.beforeExpr=!!h.beforeExpr;this.startsExpr=!!h.startsExpr;this.isLoop=!!h.isLoop;this.isAssign=!!h.isAssign;this.prefix=!!h.prefix;this.postfix=!!h.postfix;this.binop=h.binop||null;this.updateContext=null},er={beforeExpr:!0},Jp={startsExpr:!0},xM={},Ha={num:new zi("num",Jp),regexp:new zi("regexp",Jp),string:new zi("string",Jp),name:new zi("name",Jp),eof:new zi("eof"),bracketL:new zi("[",{beforeExpr:!0,startsExpr:!0}),
bracketR:new zi("]"),braceL:new zi("{",{beforeExpr:!0,startsExpr:!0}),braceR:new zi("}"),parenL:new zi("(",{beforeExpr:!0,startsExpr:!0}),parenR:new zi(")"),comma:new zi(",",er),semi:new zi(";",er),colon:new zi(":",er),dot:new zi("."),question:new zi("?",er),questionDot:new zi("?."),arrow:new zi("=>",er),template:new zi("template"),invalidTemplate:new zi("invalidTemplate"),ellipsis:new zi("...",er),backQuote:new zi("`",Jp),dollarBraceL:new zi("${",{beforeExpr:!0,startsExpr:!0}),eq:new zi("=",{beforeExpr:!0,
isAssign:!0}),assign:new zi("_=",{beforeExpr:!0,isAssign:!0}),incDec:new zi("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new zi("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:dn("||",1),logicalAND:dn("&&",2),bitwiseOR:dn("|",3),bitwiseXOR:dn("^",4),bitwiseAND:dn("&",5),equality:dn("==/!=/===/!==",6),relational:dn("</>/<=/>=",7),bitShift:dn("<</>>/>>>",8),plusMin:new zi("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:dn("%",10),star:dn("*",10),slash:dn("/",10),starstar:new zi("**",
{beforeExpr:!0}),coalesce:dn("??",1),_break:Gh("break"),_case:Gh("case",er),_catch:Gh("catch"),_continue:Gh("continue"),_debugger:Gh("debugger"),_default:Gh("default",er),_do:Gh("do",{isLoop:!0,beforeExpr:!0}),_else:Gh("else",er),_finally:Gh("finally"),_for:Gh("for",{isLoop:!0}),_function:Gh("function",Jp),_if:Gh("if"),_return:Gh("return",er),_switch:Gh("switch"),_throw:Gh("throw",er),_try:Gh("try"),_var:Gh("var"),_const:Gh("const"),_while:Gh("while",{isLoop:!0}),_with:Gh("with"),_new:Gh("new",{beforeExpr:!0,
startsExpr:!0}),_this:Gh("this",Jp),_super:Gh("super",Jp),_class:Gh("class",Jp),_extends:Gh("extends",er),_export:Gh("export"),_import:Gh("import",Jp),_null:Gh("null",Jp),_true:Gh("true",Jp),_false:Gh("false",Jp),_in:Gh("in",{beforeExpr:!0,binop:7}),_instanceof:Gh("instanceof",{beforeExpr:!0,binop:7}),_typeof:Gh("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Gh("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Gh("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Kp=/\r\n?|\n|\u2028|\u2029/,
ry=new RegExp(Kp.source,"g"),E1=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,fr=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,F1=Object.prototype,lG=F1.hasOwnProperty,sda=F1.toString,HT=Array.isArray||function(c){return"[object Array]"===sda.call(c)},VC=function(c,h){this.line=c;this.column=h};VC.prototype.offset=function(c){return new VC(this.line,this.column+c)};var DA=function(c,h,d){this.start=h;this.end=d;null!==c.sourceFile&&(this.source=c.sourceFile)},kG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,
onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},GT=!1,Hl=function(c,h,d){this.options=c=CA(c);this.sourceFile=c.sourceFile;this.keywords=tq(qda[6<=c.ecmaVersion?6:"module"===c.sourceType?"5module":5]);var k="";!0!==c.allowReserved&&(k=BQ[6<=c.ecmaVersion?6:5===c.ecmaVersion?5:3],"module"===
c.sourceType&&(k+=" await"));this.reservedWords=tq(k);k=(k?k+" ":"")+BQ.strict;this.reservedWordsStrict=tq(k);this.reservedWordsStrictBind=tq(k+" "+BQ.strictBind);this.input=String(h);this.containsEsc=!1;d?(this.pos=d,this.lineStart=this.input.lastIndexOf("\n",d-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Kp).length):(this.pos=this.lineStart=0,this.curLine=1);this.type=Ha.eof;this.value=null;this.start=this.end=this.pos;this.startLoc=this.endLoc=this.curPosition();this.lastTokEndLoc=
this.lastTokStartLoc=null;this.lastTokStart=this.lastTokEnd=this.pos;this.context=this.initialContext();this.exprAllowed=!0;this.strict=(this.inModule="module"===c.sourceType)||this.strictDirective(this.pos);this.potentialArrowAt=-1;this.yieldPos=this.awaitPos=this.awaitIdentPos=0;this.labels=[];this.undefinedExports=Object.create(null);0===this.pos&&c.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2);this.scopeStack=[];this.enterScope(1);this.regexpState=null},Jx={inFunction:{configurable:!0},
inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},inNonArrowFunction:{configurable:!0}};Hl.prototype.parse=function(){var c=this.options.program||this.startNode();this.nextToken();return this.parseTopLevel(c)};Jx.inFunction.get=function(){return 0<(this.currentVarScope().flags&2)};Jx.inGenerator.get=function(){return 0<(this.currentVarScope().flags&8)};Jx.inAsync.get=function(){return 0<(this.currentVarScope().flags&
4)};Jx.allowSuper.get=function(){return 0<(this.currentThisScope().flags&64)};Jx.allowDirectSuper.get=function(){return 0<(this.currentThisScope().flags&128)};Jx.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Jx.inNonArrowFunction.get=function(){return 0<(this.currentThisScope().flags&2)};Hl.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var d=0;d<c.length;d++)h=c[d](h);return h};Hl.parse=function(c,h){return(new this(h,
c)).parse()};Hl.parseExpressionAt=function(c,h,d){c=new this(d,c,h);c.nextToken();return c.parseExpression()};Hl.tokenizer=function(c,h){return new this(h,c)};Object.defineProperties(Hl.prototype,Jx);var Un=Hl.prototype,tda=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Un.strictDirective=function(c){for(;;){fr.lastIndex=c;c+=fr.exec(this.input)[0].length;var h=tda.exec(this.input.slice(c));if(!h)return!1;if("use strict"===(h[1]||h[2])){fr.lastIndex=c+h[0].length;c=fr.exec(this.input);h=c.index+
c[0].length;var d=this.input.charAt(h);return";"===d||"}"===d||Kp.test(c[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(d)||"!"===d&&"="===this.input.charAt(h+1))}c+=h[0].length;fr.lastIndex=c;c+=fr.exec(this.input)[0].length;";"===this.input[c]&&c++}};Un.eat=function(c){return this.type===c?(this.next(),!0):!1};Un.isContextual=function(c){return this.type===Ha.name&&this.value===c&&!this.containsEsc};Un.eatContextual=function(c){if(!this.isContextual(c))return!1;this.next();return!0};Un.expectContextual=function(c){this.eatContextual(c)||
this.unexpected()};Un.canInsertSemicolon=function(){return this.type===Ha.eof||this.type===Ha.braceR||Kp.test(this.input.slice(this.lastTokEnd,this.start))};Un.insertSemicolon=function(){if(this.canInsertSemicolon()){if(this.options.onInsertedSemicolon)this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc);return!0}};Un.semicolon=function(){this.eat(Ha.semi)||this.insertSemicolon()||this.unexpected()};Un.afterTrailingComma=function(c,h){if(this.type===c){if(this.options.onTrailingComma)this.options.onTrailingComma(this.lastTokStart,
this.lastTokStartLoc);h||this.next();return!0}};Un.expect=function(c){this.eat(c)||this.unexpected()};Un.unexpected=function(c){this.raise(null!=c?c:this.start,"Unexpected token")};Un.checkPatternErrors=function(c,h){c&&(-1<c.trailingComma&&this.raiseRecoverable(c.trailingComma,"Comma is not permitted after the rest element"),c=h?c.parenthesizedAssign:c.parenthesizedBind,-1<c&&this.raiseRecoverable(c,"Parenthesized pattern"))};Un.checkExpressionErrors=function(c,h){if(!c)return!1;var d=c.shorthandAssign;
c=c.doubleProto;if(!h)return 0<=d||0<=c;0<=d&&this.raise(d,"Shorthand property assignments are valid only in destructuring patterns");0<=c&&this.raiseRecoverable(c,"Redefinition of __proto__ property")};Un.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value");this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Un.isSimpleAssignTarget=function(c){return"ParenthesizedExpression"===
c.type?this.isSimpleAssignTarget(c.expression):"Identifier"===c.type||"MemberExpression"===c.type};var vh=Hl.prototype;vh.parseTopLevel=function(c){var h=Object.create(null);c.body||(c.body=[]);for(;this.type!==Ha.eof;){var d=this.parseStatement(null,!0,h);c.body.push(d)}if(this.inModule)for(h=0,d=Object.keys(this.undefinedExports);h<d.length;h+=1){var k=d[h];this.raiseRecoverable(this.undefinedExports[k].start,"Export '"+k+"' is not defined")}this.adaptDirectivePrologue(c.body);this.next();c.sourceType=
this.options.sourceType;return this.finishNode(c,"Program")};var DQ={kind:"loop"},uda={kind:"switch"};vh.isLet=function(c){if(6>this.options.ecmaVersion||!this.isContextual("let"))return!1;fr.lastIndex=this.pos;var h=fr.exec(this.input);h=this.pos+h[0].length;var d=this.input.charCodeAt(h);if(91===d)return!0;if(c)return!1;if(123===d)return!0;if(Gm(d,!0)){for(c=h+1;Ir(this.input.charCodeAt(c),!0);)++c;c=this.input.slice(h,c);if(!rda.test(c))return!0}return!1};vh.isAsyncFunction=function(){if(8>this.options.ecmaVersion||
!this.isContextual("async"))return!1;fr.lastIndex=this.pos;var c=fr.exec(this.input);c=this.pos+c[0].length;return!Kp.test(this.input.slice(this.pos,c))&&"function"===this.input.slice(c,c+8)&&(c+8===this.input.length||!Ir(this.input.charAt(c+8)))};vh.parseStatement=function(c,h,d){var k=this.type,n=this.startNode();if(this.isLet(c)){k=Ha._var;var b="let"}switch(k){case Ha._break:case Ha._continue:return this.parseBreakContinueStatement(n,k.keyword);case Ha._debugger:return this.parseDebuggerStatement(n);
case Ha._do:return this.parseDoStatement(n);case Ha._for:return this.parseForStatement(n);case Ha._function:return c&&(this.strict||"if"!==c&&"label"!==c)&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n,!1,!c);case Ha._class:return c&&this.unexpected(),this.parseClass(n,!0);case Ha._if:return this.parseIfStatement(n);case Ha._return:return this.parseReturnStatement(n);case Ha._switch:return this.parseSwitchStatement(n);case Ha._throw:return this.parseThrowStatement(n);
case Ha._try:return this.parseTryStatement(n);case Ha._const:case Ha._var:return b=b||this.value,c&&"var"!==b&&this.unexpected(),this.parseVarStatement(n,b);case Ha._while:return this.parseWhileStatement(n);case Ha._with:return this.parseWithStatement(n);case Ha.braceL:return this.parseBlock(!0,n);case Ha.semi:return this.parseEmptyStatement(n);case Ha._export:case Ha._import:if(10<this.options.ecmaVersion&&k===Ha._import&&(fr.lastIndex=this.pos,c=fr.exec(this.input),c=this.input.charCodeAt(this.pos+
c[0].length),40===c||46===c))return this.parseExpressionStatement(n,this.parseExpression());this.options.allowImportExportEverywhere||(h||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'"));return k===Ha._import?this.parseImport(n):this.parseExport(n,d);default:if(this.isAsyncFunction())return c&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!c);h=this.value;
d=this.parseExpression();return k===Ha.name&&"Identifier"===d.type&&this.eat(Ha.colon)?this.parseLabeledStatement(n,h,d,c):this.parseExpressionStatement(n,d)}};vh.parseBreakContinueStatement=function(c,h){var d="break"===h;this.next();this.eat(Ha.semi)||this.insertSemicolon()?c.label=null:this.type!==Ha.name?this.unexpected():(c.label=this.parseIdent(),this.semicolon());for(var k=0;k<this.labels.length;++k){var n=this.labels[k];if(null==c.label||n.name===c.label.name){if(null!=n.kind&&(d||"loop"===
n.kind))break;if(c.label&&d)break}}k===this.labels.length&&this.raise(c.start,"Unsyntactic "+h);return this.finishNode(c,d?"BreakStatement":"ContinueStatement")};vh.parseDebuggerStatement=function(c){this.next();this.semicolon();return this.finishNode(c,"DebuggerStatement")};vh.parseDoStatement=function(c){this.next();this.labels.push(DQ);c.body=this.parseStatement("do");this.labels.pop();this.expect(Ha._while);c.test=this.parseParenExpression();6<=this.options.ecmaVersion?this.eat(Ha.semi):this.semicolon();
return this.finishNode(c,"DoWhileStatement")};vh.parseForStatement=function(c){this.next();var h=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;this.labels.push(DQ);this.enterScope(0);this.expect(Ha.parenL);if(this.type===Ha.semi)return-1<h&&this.unexpected(h),this.parseFor(c,null);var d=this.isLet();if(this.type===Ha._var||this.type===Ha._const||d){var k=this.startNode();d=d?"let":this.value;
this.next();this.parseVar(k,!0,d);this.finishNode(k,"VariableDeclaration");if((this.type===Ha._in||6<=this.options.ecmaVersion&&this.isContextual("of"))&&1===k.declarations.length)return 9<=this.options.ecmaVersion&&(this.type===Ha._in?-1<h&&this.unexpected(h):c.await=-1<h),this.parseForIn(c,k);-1<h&&this.unexpected(h);return this.parseFor(c,k)}k=new qt;d=this.parseExpression(!0,k);if(this.type===Ha._in||6<=this.options.ecmaVersion&&this.isContextual("of"))return 9<=this.options.ecmaVersion&&(this.type===
Ha._in?-1<h&&this.unexpected(h):c.await=-1<h),this.toAssignable(d,!1,k),this.checkLValPattern(d),this.parseForIn(c,d);this.checkExpressionErrors(k,!0);-1<h&&this.unexpected(h);return this.parseFor(c,d)};vh.parseFunctionStatement=function(c,h,d){this.next();return this.parseFunction(c,CE|(d?0:EQ),!1,h)};vh.parseIfStatement=function(c){this.next();c.test=this.parseParenExpression();c.consequent=this.parseStatement("if");c.alternate=this.eat(Ha._else)?this.parseStatement("if"):null;return this.finishNode(c,
"IfStatement")};vh.parseReturnStatement=function(c){this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function");this.next();this.eat(Ha.semi)||this.insertSemicolon()?c.argument=null:(c.argument=this.parseExpression(),this.semicolon());return this.finishNode(c,"ReturnStatement")};vh.parseSwitchStatement=function(c){this.next();c.discriminant=this.parseParenExpression();c.cases=[];this.expect(Ha.braceL);this.labels.push(uda);this.enterScope(0);for(var h,
d=!1;this.type!==Ha.braceR;)if(this.type===Ha._case||this.type===Ha._default){var k=this.type===Ha._case;h&&this.finishNode(h,"SwitchCase");c.cases.push(h=this.startNode());h.consequent=[];this.next();k?h.test=this.parseExpression():(d&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),d=!0,h.test=null);this.expect(Ha.colon)}else h||this.unexpected(),h.consequent.push(this.parseStatement(null));this.exitScope();h&&this.finishNode(h,"SwitchCase");this.next();this.labels.pop();return this.finishNode(c,
"SwitchStatement")};vh.parseThrowStatement=function(c){this.next();Kp.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw");c.argument=this.parseExpression();this.semicolon();return this.finishNode(c,"ThrowStatement")};var vda=[];vh.parseTryStatement=function(c){this.next();c.block=this.parseBlock();c.handler=null;if(this.type===Ha._catch){var h=this.startNode();this.next();if(this.eat(Ha.parenL)){h.param=this.parseBindingAtom();var d="Identifier"===
h.param.type;this.enterScope(d?32:0);this.checkLValPattern(h.param,d?4:2);this.expect(Ha.parenR)}else 10>this.options.ecmaVersion&&this.unexpected(),h.param=null,this.enterScope(0);h.body=this.parseBlock(!1);this.exitScope();c.handler=this.finishNode(h,"CatchClause")}c.finalizer=this.eat(Ha._finally)?this.parseBlock():null;c.handler||c.finalizer||this.raise(c.start,"Missing catch or finally clause");return this.finishNode(c,"TryStatement")};vh.parseVarStatement=function(c,h){this.next();this.parseVar(c,
!1,h);this.semicolon();return this.finishNode(c,"VariableDeclaration")};vh.parseWhileStatement=function(c){this.next();c.test=this.parseParenExpression();this.labels.push(DQ);c.body=this.parseStatement("while");this.labels.pop();return this.finishNode(c,"WhileStatement")};vh.parseWithStatement=function(c){this.strict&&this.raise(this.start,"'with' in strict mode");this.next();c.object=this.parseParenExpression();c.body=this.parseStatement("with");return this.finishNode(c,"WithStatement")};vh.parseEmptyStatement=
function(c){this.next();return this.finishNode(c,"EmptyStatement")};vh.parseLabeledStatement=function(c,h,d,k){for(var n=0,b=this.labels;n<b.length;n+=1)b[n].name===h&&this.raise(d.start,"Label '"+h+"' is already declared");n=this.type.isLoop?"loop":this.type===Ha._switch?"switch":null;for(b=this.labels.length-1;0<=b;b--){var e=this.labels[b];if(e.statementStart===c.start)e.statementStart=this.start,e.kind=n;else break}this.labels.push({name:h,kind:n,statementStart:this.start});c.body=this.parseStatement(k?
-1===k.indexOf("label")?k+"label":k:"label");this.labels.pop();c.label=d;return this.finishNode(c,"LabeledStatement")};vh.parseExpressionStatement=function(c,h){c.expression=h;this.semicolon();return this.finishNode(c,"ExpressionStatement")};vh.parseBlock=function(c,h,d){void 0===c&&(c=!0);void 0===h&&(h=this.startNode());h.body=[];this.expect(Ha.braceL);for(c&&this.enterScope(0);this.type!==Ha.braceR;){var k=this.parseStatement(null);h.body.push(k)}d&&(this.strict=!1);this.next();c&&this.exitScope();
return this.finishNode(h,"BlockStatement")};vh.parseFor=function(c,h){c.init=h;this.expect(Ha.semi);c.test=this.type===Ha.semi?null:this.parseExpression();this.expect(Ha.semi);c.update=this.type===Ha.parenR?null:this.parseExpression();this.expect(Ha.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,"ForStatement")};vh.parseForIn=function(c,h){var d=this.type===Ha._in;this.next();"VariableDeclaration"===h.type&&null!=h.declarations[0].init&&(!d||
8>this.options.ecmaVersion||this.strict||"var"!==h.kind||"Identifier"!==h.declarations[0].id.type)&&this.raise(h.start,(d?"for-in":"for-of")+" loop variable declaration may not have an initializer");c.left=h;c.right=d?this.parseExpression():this.parseMaybeAssign();this.expect(Ha.parenR);c.body=this.parseStatement("for");this.exitScope();this.labels.pop();return this.finishNode(c,d?"ForInStatement":"ForOfStatement")};vh.parseVar=function(c,h,d){c.declarations=[];for(c.kind=d;;){var k=this.startNode();
this.parseVarId(k,d);this.eat(Ha.eq)?k.init=this.parseMaybeAssign(h):"const"!==d||this.type===Ha._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"===k.id.type||h&&(this.type===Ha._in||this.isContextual("of"))?k.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected();c.declarations.push(this.finishNode(k,"VariableDeclarator"));if(!this.eat(Ha.comma))break}return c};vh.parseVarId=function(c,h){c.id=this.parseBindingAtom();
this.checkLValPattern(c.id,"var"===h?1:2,!1)};var CE=1,EQ=2;vh.parseFunction=function(c,h,d,k){this.initFunction(c);if(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!k)this.type===Ha.star&&h&EQ&&this.unexpected(),c.generator=this.eat(Ha.star);8<=this.options.ecmaVersion&&(c.async=!!k);h&CE&&(c.id=h&4&&this.type!==Ha.name?null:this.parseIdent(),!c.id||h&EQ||this.checkLValSimple(c.id,this.strict||c.generator||c.async?this.treatFunctionsAsVar?1:2:3));k=this.yieldPos;var n=this.awaitPos,b=
this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(c.async?4:0)|(c.generator?8:0));h&CE||(c.id=this.type===Ha.name?this.parseIdent():null);this.parseFunctionParams(c);this.parseFunctionBody(c,d,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,h&CE?"FunctionDeclaration":"FunctionExpression")};vh.parseFunctionParams=function(c){this.expect(Ha.parenL);c.params=this.parseBindingList(Ha.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams()};
vh.parseClass=function(c,h){this.next();var d=this.strict;this.strict=!0;this.parseClassId(c,h);this.parseClassSuper(c);var k=this.startNode(),n=!1;k.body=[];for(this.expect(Ha.braceL);this.type!==Ha.braceR;){var b=this.parseClassElement(null!==c.superClass);b&&(k.body.push(b),"MethodDefinition"===b.type&&"constructor"===b.kind&&(n&&this.raise(b.start,"Duplicate constructor in the same class"),n=!0))}this.strict=d;this.next();c.body=this.finishNode(k,"ClassBody");return this.finishNode(c,h?"ClassDeclaration":
"ClassExpression")};vh.parseClassElement=function(c){var h=this;if(this.eat(Ha.semi))return null;var d=this.startNode(),k=function(l,a){void 0===a&&(a=!1);var f=h.start,m=h.startLoc;if(!h.eatContextual(l))return!1;if(!(h.type===Ha.parenL||a&&h.canInsertSemicolon()))return!0;d.key&&h.unexpected();d.computed=!1;d.key=h.startNodeAt(f,m);d.key.name=l;h.finishNode(d.key,"Identifier");return!1};d.kind="method";d.static=k("static");var n=this.eat(Ha.star),b=!1;n||(8<=this.options.ecmaVersion&&k("async",
!0)?(b=!0,n=9<=this.options.ecmaVersion&&this.eat(Ha.star)):k("get")?d.kind="get":k("set")&&(d.kind="set"));d.key||this.parsePropertyName(d);k=d.key;var e=!1;d.computed||d.static||!("Identifier"===k.type&&"constructor"===k.name||"Literal"===k.type&&"constructor"===k.value)?d.static&&"Identifier"===k.type&&"prototype"===k.name&&this.raise(k.start,"Classes may not have a static property named prototype"):("method"!==d.kind&&this.raise(k.start,"Constructor can't have get/set modifier"),n&&this.raise(k.start,
"Constructor can't be a generator"),b&&this.raise(k.start,"Constructor can't be an async method"),d.kind="constructor",e=c);this.parseClassMethod(d,n,b,e);"get"===d.kind&&0!==d.value.params.length&&this.raiseRecoverable(d.value.start,"getter should have no params");"set"===d.kind&&1!==d.value.params.length&&this.raiseRecoverable(d.value.start,"setter should have exactly one param");"set"===d.kind&&"RestElement"===d.value.params[0].type&&this.raiseRecoverable(d.value.params[0].start,"Setter cannot use rest params");
return d};vh.parseClassMethod=function(c,h,d,k){c.value=this.parseMethod(h,d,k);return this.finishNode(c,"MethodDefinition")};vh.parseClassId=function(c,h){this.type===Ha.name?(c.id=this.parseIdent(),h&&this.checkLValSimple(c.id,2,!1)):(!0===h&&this.unexpected(),c.id=null)};vh.parseClassSuper=function(c){c.superClass=this.eat(Ha._extends)?this.parseExprSubscripts():null};vh.parseExport=function(c,h){this.next();if(this.eat(Ha.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?(c.exported=
this.parseIdent(!0),this.checkExport(h,c.exported.name,this.lastTokStart)):c.exported=null),this.expectContextual("from"),this.type!==Ha.string&&this.unexpected(),c.source=this.parseExprAtom(),this.semicolon(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ha._default)){this.checkExport(h,"default",this.lastTokStart);var d;this.type===Ha._function||(d=this.isAsyncFunction())?(h=this.startNode(),this.next(),d&&this.next(),c.declaration=this.parseFunction(h,CE|4,!1,d)):this.type===Ha._class?
(d=this.startNode(),c.declaration=this.parseClass(d,"nullableID")):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())c.declaration=this.parseStatement(null),"VariableDeclaration"===c.declaration.type?this.checkVariableExport(h,c.declaration.declarations):this.checkExport(h,c.declaration.id.name,c.declaration.id.start),c.specifiers=[],c.source=null;else{c.declaration=null;c.specifiers=this.parseExportSpecifiers(h);
if(this.eatContextual("from"))this.type!==Ha.string&&this.unexpected(),c.source=this.parseExprAtom();else{d=0;for(h=c.specifiers;d<h.length;d+=1){var k=h[d];this.checkUnreserved(k.local);this.checkLocalExport(k.local)}c.source=null}this.semicolon()}return this.finishNode(c,"ExportNamedDeclaration")};vh.checkExport=function(c,h,d){c&&(lG.call(c,h)&&this.raiseRecoverable(d,"Duplicate export '"+h+"'"),c[h]=!0)};vh.checkPatternExport=function(c,h){var d=h.type;if("Identifier"===d)this.checkExport(c,h.name,
h.start);else if("ObjectPattern"===d)for(d=0,h=h.properties;d<h.length;d+=1)this.checkPatternExport(c,h[d]);else if("ArrayPattern"===d)for(d=0,h=h.elements;d<h.length;d+=1){var k=h[d];k&&this.checkPatternExport(c,k)}else"Property"===d?this.checkPatternExport(c,h.value):"AssignmentPattern"===d?this.checkPatternExport(c,h.left):"RestElement"===d?this.checkPatternExport(c,h.argument):"ParenthesizedExpression"===d&&this.checkPatternExport(c,h.expression)};vh.checkVariableExport=function(c,h){if(c)for(var d=
0;d<h.length;d+=1)this.checkPatternExport(c,h[d].id)};vh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()};vh.parseExportSpecifiers=function(c){var h=[],d=!0;for(this.expect(Ha.braceL);!this.eat(Ha.braceR);){if(d)d=!1;else if(this.expect(Ha.comma),this.afterTrailingComma(Ha.braceR))break;var k=this.startNode();k.local=this.parseIdent(!0);k.exported=this.eatContextual("as")?
this.parseIdent(!0):k.local;this.checkExport(c,k.exported.name,k.exported.start);h.push(this.finishNode(k,"ExportSpecifier"))}return h};vh.parseImport=function(c){this.next();this.type===Ha.string?(c.specifiers=vda,c.source=this.parseExprAtom()):(c.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),c.source=this.type===Ha.string?this.parseExprAtom():this.unexpected());this.semicolon();return this.finishNode(c,"ImportDeclaration")};vh.parseImportSpecifiers=function(){var c=[],h=
!0;if(this.type===Ha.name){var d=this.startNode();d.local=this.parseIdent();this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportDefaultSpecifier"));if(!this.eat(Ha.comma))return c}if(this.type===Ha.star)return h=this.startNode(),this.next(),this.expectContextual("as"),h.local=this.parseIdent(),this.checkLValSimple(h.local,2),c.push(this.finishNode(h,"ImportNamespaceSpecifier")),c;for(this.expect(Ha.braceL);!this.eat(Ha.braceR);){if(h)h=!1;else if(this.expect(Ha.comma),this.afterTrailingComma(Ha.braceR))break;
d=this.startNode();d.imported=this.parseIdent(!0);this.eatContextual("as")?d.local=this.parseIdent():(this.checkUnreserved(d.imported),d.local=d.imported);this.checkLValSimple(d.local,2);c.push(this.finishNode(d,"ImportSpecifier"))}return c};vh.adaptDirectivePrologue=function(c){for(var h=0;h<c.length&&this.isDirectiveCandidate(c[h]);++h)c[h].directive=c[h].expression.raw.slice(1,-1)};vh.isDirectiveCandidate=function(c){return"ExpressionStatement"===c.type&&"Literal"===c.expression.type&&"string"===
typeof c.expression.value&&('"'===this.input[c.start]||"'"===this.input[c.start])};var vs=Hl.prototype;vs.toAssignable=function(c,h,d){if(6<=this.options.ecmaVersion&&c)switch(c.type){case "Identifier":this.inAsync&&"await"===c.name&&this.raise(c.start,"Cannot use 'await' as identifier inside an async function");break;case "ObjectPattern":case "ArrayPattern":case "AssignmentPattern":case "RestElement":break;case "ObjectExpression":c.type="ObjectPattern";d&&this.checkPatternErrors(d,!0);d=0;for(var k=
c.properties;d<k.length;d+=1){var n=k[d];this.toAssignable(n,h);"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case "Property":"init"!==c.kind&&this.raise(c.key.start,"Object pattern can't contain getter or setter");this.toAssignable(c.value,h);break;case "ArrayExpression":c.type="ArrayPattern";d&&this.checkPatternErrors(d,!0);this.toAssignableList(c.elements,h);break;case "SpreadElement":c.type="RestElement";
this.toAssignable(c.argument,h);"AssignmentPattern"===c.argument.type&&this.raise(c.argument.start,"Rest elements cannot have a default value");break;case "AssignmentExpression":"="!==c.operator&&this.raise(c.left.end,"Only '=' operator can be used for specifying default value.");c.type="AssignmentPattern";delete c.operator;this.toAssignable(c.left,h);break;case "ParenthesizedExpression":this.toAssignable(c.expression,h,d);break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");
break;case "MemberExpression":if(!h)break;default:this.raise(c.start,"Assigning to rvalue")}else d&&this.checkPatternErrors(d,!0);return c};vs.toAssignableList=function(c,h){for(var d=c.length,k=0;k<d;k++){var n=c[k];n&&this.toAssignable(n,h)}d&&(d=c[d-1],6===this.options.ecmaVersion&&h&&d&&"RestElement"===d.type&&"Identifier"!==d.argument.type&&this.unexpected(d.argument.start));return c};vs.parseSpread=function(c){var h=this.startNode();this.next();h.argument=this.parseMaybeAssign(!1,c);return this.finishNode(h,
"SpreadElement")};vs.parseRestBinding=function(){var c=this.startNode();this.next();6===this.options.ecmaVersion&&this.type!==Ha.name&&this.unexpected();c.argument=this.parseBindingAtom();return this.finishNode(c,"RestElement")};vs.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case Ha.bracketL:var c=this.startNode();this.next();c.elements=this.parseBindingList(Ha.bracketR,!0,!0);return this.finishNode(c,"ArrayPattern");case Ha.braceL:return this.parseObj(!0)}return this.parseIdent()};
vs.parseBindingList=function(c,h,d){for(var k=[],n=!0;!this.eat(c);)if(n?n=!1:this.expect(Ha.comma),h&&this.type===Ha.comma)k.push(null);else if(d&&this.afterTrailingComma(c))break;else if(this.type===Ha.ellipsis){h=this.parseRestBinding();this.parseBindingListItem(h);k.push(h);this.type===Ha.comma&&this.raise(this.start,"Comma is not permitted after the rest element");this.expect(c);break}else{var b=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(b);k.push(b)}return k};
vs.parseBindingListItem=function(c){return c};vs.parseMaybeDefault=function(c,h,d){d=d||this.parseBindingAtom();if(6>this.options.ecmaVersion||!this.eat(Ha.eq))return d;c=this.startNodeAt(c,h);c.left=d;c.right=this.parseMaybeAssign();return this.finishNode(c,"AssignmentPattern")};vs.checkLValSimple=function(c,h,d){void 0===h&&(h=0);var k=0!==h;switch(c.type){case "Identifier":this.strict&&this.reservedWordsStrictBind.test(c.name)&&this.raiseRecoverable(c.start,(k?"Binding ":"Assigning to ")+c.name+
" in strict mode");k&&(2===h&&"let"===c.name&&this.raiseRecoverable(c.start,"let is disallowed as a lexically bound name"),d&&(lG.call(d,c.name)&&this.raiseRecoverable(c.start,"Argument name clash"),d[c.name]=!0),5!==h&&this.declareName(c.name,h,c.start));break;case "ChainExpression":this.raiseRecoverable(c.start,"Optional chaining cannot appear in left-hand side");break;case "MemberExpression":k&&this.raiseRecoverable(c.start,"Binding member expression");break;case "ParenthesizedExpression":return k&&
this.raiseRecoverable(c.start,"Binding parenthesized expression"),this.checkLValSimple(c.expression,h,d);default:this.raise(c.start,(k?"Binding":"Assigning to")+" rvalue")}};vs.checkLValPattern=function(c,h,d){void 0===h&&(h=0);switch(c.type){case "ObjectPattern":var k=0;for(c=c.properties;k<c.length;k+=1)this.checkLValInnerPattern(c[k],h,d);break;case "ArrayPattern":k=0;for(c=c.elements;k<c.length;k+=1){var n=c[k];n&&this.checkLValInnerPattern(n,h,d)}break;default:this.checkLValSimple(c,h,d)}};vs.checkLValInnerPattern=
function(c,h,d){void 0===h&&(h=0);switch(c.type){case "Property":this.checkLValInnerPattern(c.value,h,d);break;case "AssignmentPattern":this.checkLValPattern(c.left,h,d);break;case "RestElement":this.checkLValPattern(c.argument,h,d);break;default:this.checkLValPattern(c,h,d)}};var Jh=Hl.prototype;Jh.checkPropClash=function(c,h,d){if(!(9<=this.options.ecmaVersion&&"SpreadElement"===c.type||6<=this.options.ecmaVersion&&(c.computed||c.method||c.shorthand))){var k=c.key;switch(k.type){case "Identifier":var n=
k.name;break;case "Literal":n=String(k.value);break;default:return}c=c.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===c&&(h.proto&&(d?0>d.doubleProto&&(d.doubleProto=k.start):this.raiseRecoverable(k.start,"Redefinition of __proto__ property")),h.proto=!0):(n="$"+n,(d=h[n])?("init"===c?this.strict&&d.init||d.get||d.set:d.init||d[c])&&this.raiseRecoverable(k.start,"Redefinition of property"):d=h[n]={init:!1,get:!1,set:!1},d[c]=!0)}};Jh.parseExpression=function(c,h){var d=this.start,k=this.startLoc,
n=this.parseMaybeAssign(c,h);if(this.type===Ha.comma){d=this.startNodeAt(d,k);for(d.expressions=[n];this.eat(Ha.comma);)d.expressions.push(this.parseMaybeAssign(c,h));return this.finishNode(d,"SequenceExpression")}return n};Jh.parseMaybeAssign=function(c,h,d){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(c);this.exprAllowed=!1}var k=!1,n=-1,b=-1;h?(n=h.parenthesizedAssign,b=h.trailingComma,h.parenthesizedAssign=h.trailingComma=-1):(h=new qt,k=!0);var e=this.start,l=this.startLoc;
if(this.type===Ha.parenL||this.type===Ha.name)this.potentialArrowAt=this.start;var a=this.parseMaybeConditional(c,h);d&&(a=d.call(this,a,e,l));if(this.type.isAssign)return d=this.startNodeAt(e,l),d.operator=this.value,this.type===Ha.eq&&(a=this.toAssignable(a,!1,h)),k||(h.parenthesizedAssign=h.trailingComma=h.doubleProto=-1),h.shorthandAssign>=a.start&&(h.shorthandAssign=-1),this.type===Ha.eq?this.checkLValPattern(a):this.checkLValSimple(a),d.left=a,this.next(),d.right=this.parseMaybeAssign(c),this.finishNode(d,
"AssignmentExpression");k&&this.checkExpressionErrors(h,!0);-1<n&&(h.parenthesizedAssign=n);-1<b&&(h.trailingComma=b);return a};Jh.parseMaybeConditional=function(c,h){var d=this.start,k=this.startLoc,n=this.parseExprOps(c,h);return this.checkExpressionErrors(h)?n:this.eat(Ha.question)?(h=this.startNodeAt(d,k),h.test=n,h.consequent=this.parseMaybeAssign(),this.expect(Ha.colon),h.alternate=this.parseMaybeAssign(c),this.finishNode(h,"ConditionalExpression")):n};Jh.parseExprOps=function(c,h){var d=this.start,
k=this.startLoc,n=this.parseMaybeUnary(h,!1);return this.checkExpressionErrors(h)?n:n.start===d&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,d,k,-1,c)};Jh.parseExprOp=function(c,h,d,k,n){var b=this.type.binop;if(null!=b&&(!n||this.type!==Ha._in)&&b>k){var e=this.type===Ha.logicalOR||this.type===Ha.logicalAND,l=this.type===Ha.coalesce;l&&(b=Ha.logicalAND.binop);var a=this.value;this.next();var f=this.start,m=this.startLoc;b=this.parseExprOp(this.parseMaybeUnary(null,!1),f,m,b,n);c=this.buildBinary(h,
d,c,b,a,e||l);(e&&this.type===Ha.coalesce||l&&(this.type===Ha.logicalOR||this.type===Ha.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses");return this.parseExprOp(c,h,d,k,n)}return c};Jh.buildBinary=function(c,h,d,k,n,b){c=this.startNodeAt(c,h);c.left=d;c.operator=n;c.right=k;return this.finishNode(c,b?"LogicalExpression":"BinaryExpression")};Jh.parseMaybeUnary=function(c,h){var d=this.start,k=this.startLoc;if(this.isContextual("await")&&
(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var n=this.parseAwait();h=!0}else if(this.type.prefix){n=this.startNode();var b=this.type===Ha.incDec;n.operator=this.value;n.prefix=!0;this.next();n.argument=this.parseMaybeUnary(null,!0);this.checkExpressionErrors(c,!0);b?this.checkLValSimple(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):h=!0;n=this.finishNode(n,b?"UpdateExpression":
"UnaryExpression")}else{n=this.parseExprSubscripts(c);if(this.checkExpressionErrors(c))return n;for(;this.type.postfix&&!this.canInsertSemicolon();)c=this.startNodeAt(d,k),c.operator=this.value,c.prefix=!1,c.argument=n,this.checkLValSimple(n),this.next(),n=this.finishNode(c,"UpdateExpression")}return!h&&this.eat(Ha.starstar)?this.buildBinary(d,k,n,this.parseMaybeUnary(null,!1),"**",!1):n};Jh.parseExprSubscripts=function(c){var h=this.start,d=this.startLoc,k=this.parseExprAtom(c);if("ArrowFunctionExpression"===
k.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return k;h=this.parseSubscripts(k,h,d);c&&"MemberExpression"===h.type&&(c.parenthesizedAssign>=h.start&&(c.parenthesizedAssign=-1),c.parenthesizedBind>=h.start&&(c.parenthesizedBind=-1),c.trailingComma>=h.start&&(c.trailingComma=-1));return h};Jh.parseSubscripts=function(c,h,d,k){for(var n=8<=this.options.ecmaVersion&&"Identifier"===c.type&&"async"===c.name&&this.lastTokEnd===c.end&&!this.canInsertSemicolon()&&5===c.end-c.start&&this.potentialArrowAt===
c.start,b=!1;;){var e=this.parseSubscript(c,h,d,k,n,b);e.optional&&(b=!0);if(e===c||"ArrowFunctionExpression"===e.type)return b&&(c=this.startNodeAt(h,d),c.expression=e,e=this.finishNode(c,"ChainExpression")),e;c=e}};Jh.parseSubscript=function(c,h,d,k,n,b){var e=11<=this.options.ecmaVersion,l=e&&this.eat(Ha.questionDot);k&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var a=this.eat(Ha.bracketL);if(a||l&&this.type!==Ha.parenL&&this.type!==Ha.backQuote||
this.eat(Ha.dot))h=this.startNodeAt(h,d),h.object=c,h.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!a,a&&this.expect(Ha.bracketR),e&&(h.optional=l),c=this.finishNode(h,"MemberExpression");else if(!k&&this.eat(Ha.parenL)){k=new qt;b=this.yieldPos;var f=this.awaitPos,m=this.awaitIdentPos;this.awaitIdentPos=this.awaitPos=this.yieldPos=0;a=this.parseExprList(Ha.parenR,8<=this.options.ecmaVersion,!1,k);if(n&&!l&&!this.canInsertSemicolon()&&this.eat(Ha.arrow))return this.checkPatternErrors(k,
!1),this.checkYieldAwaitInDefaultParams(),0<this.awaitIdentPos&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=b,this.awaitPos=f,this.awaitIdentPos=m,this.parseArrowExpression(this.startNodeAt(h,d),a,!0);this.checkExpressionErrors(k,!0);this.yieldPos=b||this.yieldPos;this.awaitPos=f||this.awaitPos;this.awaitIdentPos=m||this.awaitIdentPos;h=this.startNodeAt(h,d);h.callee=c;h.arguments=a;e&&(h.optional=l);c=this.finishNode(h,"CallExpression")}else this.type===
Ha.backQuote&&((l||b)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions"),e=this.startNodeAt(h,d),e.tag=c,e.quasi=this.parseTemplate({isTagged:!0}),c=this.finishNode(e,"TaggedTemplateExpression"));return c};Jh.parseExprAtom=function(c){this.type===Ha.slash&&this.readRegexp();var h=this.potentialArrowAt===this.start;switch(this.type){case Ha._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),h=this.startNode(),this.next(),
this.type!==Ha.parenL||this.allowDirectSuper||this.raise(h.start,"super() call outside constructor of a subclass"),this.type!==Ha.dot&&this.type!==Ha.bracketL&&this.type!==Ha.parenL&&this.unexpected(),this.finishNode(h,"Super");case Ha._this:return h=this.startNode(),this.next(),this.finishNode(h,"ThisExpression");case Ha.name:c=this.start;var d=this.startLoc,k=this.containsEsc,n=this.parseIdent(!1);if(8<=this.options.ecmaVersion&&!k&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(Ha._function))return this.parseFunction(this.startNodeAt(c,
d),0,!1,!0);if(h&&!this.canInsertSemicolon()){if(this.eat(Ha.arrow))return this.parseArrowExpression(this.startNodeAt(c,d),[n],!1);if(8<=this.options.ecmaVersion&&"async"===n.name&&this.type===Ha.name&&!k)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Ha.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(c,d),[n],!0)}return n;case Ha.regexp:return c=this.value,h=this.parseLiteral(c.value),h.regex={pattern:c.pattern,flags:c.flags},h;case Ha.num:case Ha.string:return this.parseLiteral(this.value);
case Ha._null:case Ha._true:case Ha._false:return h=this.startNode(),h.value=this.type===Ha._null?null:this.type===Ha._true,h.raw=this.type.keyword,this.next(),this.finishNode(h,"Literal");case Ha.parenL:return d=this.start,h=this.parseParenAndDistinguishExpression(h),c&&(0>c.parenthesizedAssign&&!this.isSimpleAssignTarget(h)&&(c.parenthesizedAssign=d),0>c.parenthesizedBind&&(c.parenthesizedBind=d)),h;case Ha.bracketL:return h=this.startNode(),this.next(),h.elements=this.parseExprList(Ha.bracketR,
!0,!0,c),this.finishNode(h,"ArrayExpression");case Ha.braceL:return this.parseObj(!1,c);case Ha._function:return h=this.startNode(),this.next(),this.parseFunction(h,0);case Ha._class:return this.parseClass(this.startNode(),!1);case Ha._new:return this.parseNew();case Ha.backQuote:return this.parseTemplate();case Ha._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.unexpected();default:this.unexpected()}};Jh.parseExprImport=function(){var c=this.startNode();this.containsEsc&&
this.raiseRecoverable(this.start,"Escape sequence in keyword import");var h=this.parseIdent(!0);switch(this.type){case Ha.parenL:return this.parseDynamicImport(c);case Ha.dot:return c.meta=h,this.parseImportMeta(c);default:this.unexpected()}};Jh.parseDynamicImport=function(c){this.next();c.source=this.parseMaybeAssign();if(!this.eat(Ha.parenR)){var h=this.start;this.eat(Ha.comma)&&this.eat(Ha.parenR)?this.raiseRecoverable(h,"Trailing comma is not allowed in import()"):this.unexpected(h)}return this.finishNode(c,
"ImportExpression")};Jh.parseImportMeta=function(c){this.next();var h=this.containsEsc;c.property=this.parseIdent(!0);"meta"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for import is 'import.meta'");h&&this.raiseRecoverable(c.start,"'import.meta' must not contain escaped characters");"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(c.start,"Cannot use 'import.meta' outside a module");return this.finishNode(c,
"MetaProperty")};Jh.parseLiteral=function(c){var h=this.startNode();h.value=c;h.raw=this.input.slice(this.start,this.end);110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,""));this.next();return this.finishNode(h,"Literal")};Jh.parseParenExpression=function(){this.expect(Ha.parenL);var c=this.parseExpression();this.expect(Ha.parenR);return c};Jh.parseParenAndDistinguishExpression=function(c){var h=this.start,d=this.startLoc,k=8<=this.options.ecmaVersion;if(6<=this.options.ecmaVersion){this.next();
var n=this.start,b=this.startLoc,e=[],l=!0,a=!1,f=new qt,m=this.yieldPos,q=this.awaitPos;for(this.awaitPos=this.yieldPos=0;this.type!==Ha.parenR;)if(l?l=!1:this.expect(Ha.comma),k&&this.afterTrailingComma(Ha.parenR,!0)){a=!0;break}else if(this.type===Ha.ellipsis){var r=this.start;e.push(this.parseParenItem(this.parseRestBinding()));this.type===Ha.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else e.push(this.parseMaybeAssign(!1,f,this.parseParenItem));k=this.start;
l=this.startLoc;this.expect(Ha.parenR);if(c&&!this.canInsertSemicolon()&&this.eat(Ha.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=q,this.parseParenArrowList(h,d,e);e.length&&!a||this.unexpected(this.lastTokStart);r&&this.unexpected(r);this.checkExpressionErrors(f,!0);this.yieldPos=m||this.yieldPos;this.awaitPos=q||this.awaitPos;1<e.length?(c=this.startNodeAt(n,b),c.expressions=e,this.finishNodeAt(c,"SequenceExpression",k,l)):c=e[0]}else c=
this.parseParenExpression();return this.options.preserveParens?(h=this.startNodeAt(h,d),h.expression=c,this.finishNode(h,"ParenthesizedExpression")):c};Jh.parseParenItem=function(c){return c};Jh.parseParenArrowList=function(c,h,d){return this.parseArrowExpression(this.startNodeAt(c,h),d)};var wda=[];Jh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var c=this.startNode(),h=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ha.dot))return c.meta=
h,h=this.containsEsc,c.property=this.parseIdent(!0),"target"!==c.property.name&&this.raiseRecoverable(c.property.start,"The only valid meta property for new is 'new.target'"),h&&this.raiseRecoverable(c.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction||this.raiseRecoverable(c.start,"'new.target' can only be used in functions"),this.finishNode(c,"MetaProperty");h=this.start;var d=this.startLoc,k=this.type===Ha._import;c.callee=this.parseSubscripts(this.parseExprAtom(),
h,d,!0);k&&"ImportExpression"===c.callee.type&&this.raise(h,"Cannot use new with import()");this.eat(Ha.parenL)?c.arguments=this.parseExprList(Ha.parenR,8<=this.options.ecmaVersion,!1):c.arguments=wda;return this.finishNode(c,"NewExpression")};Jh.parseTemplateElement=function(c){c=c.isTagged;var h=this.startNode();this.type===Ha.invalidTemplate?(c||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),h.value={raw:this.value,cooked:null}):h.value={raw:this.input.slice(this.start,
this.end).replace(/\r\n?/g,"\n"),cooked:this.value};this.next();h.tail=this.type===Ha.backQuote;return this.finishNode(h,"TemplateElement")};Jh.parseTemplate=function(c){void 0===c&&(c={});c=c.isTagged;void 0===c&&(c=!1);var h=this.startNode();this.next();h.expressions=[];var d=this.parseTemplateElement({isTagged:c});for(h.quasis=[d];!d.tail;)this.type===Ha.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ha.dollarBraceL),h.expressions.push(this.parseExpression()),this.expect(Ha.braceR),
h.quasis.push(d=this.parseTemplateElement({isTagged:c}));this.next();return this.finishNode(h,"TemplateLiteral")};Jh.isAsyncProp=function(c){return!c.computed&&"Identifier"===c.key.type&&"async"===c.key.name&&(this.type===Ha.name||this.type===Ha.num||this.type===Ha.string||this.type===Ha.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===Ha.star)&&!Kp.test(this.input.slice(this.lastTokEnd,this.start))};Jh.parseObj=function(c,h){var d=this.startNode(),k=!0,n={};d.properties=[];for(this.next();!this.eat(Ha.braceR);){if(k)k=
!1;else if(this.expect(Ha.comma),5<=this.options.ecmaVersion&&this.afterTrailingComma(Ha.braceR))break;var b=this.parseProperty(c,h);c||this.checkPropClash(b,n,h);d.properties.push(b)}return this.finishNode(d,c?"ObjectPattern":"ObjectExpression")};Jh.parseProperty=function(c,h){var d=this.startNode(),k;if(9<=this.options.ecmaVersion&&this.eat(Ha.ellipsis)){if(c)return d.argument=this.parseIdent(!1),this.type===Ha.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(d,
"RestElement");this.type===Ha.parenL&&h&&(0>h.parenthesizedAssign&&(h.parenthesizedAssign=this.start),0>h.parenthesizedBind&&(h.parenthesizedBind=this.start));d.argument=this.parseMaybeAssign(!1,h);this.type===Ha.comma&&h&&0>h.trailingComma&&(h.trailingComma=this.start);return this.finishNode(d,"SpreadElement")}if(6<=this.options.ecmaVersion){d.method=!1;d.shorthand=!1;if(c||h){var n=this.start;var b=this.startLoc}c||(k=this.eat(Ha.star))}var e=this.containsEsc;this.parsePropertyName(d);if(!c&&!e&&
8<=this.options.ecmaVersion&&!k&&this.isAsyncProp(d)){var l=!0;k=9<=this.options.ecmaVersion&&this.eat(Ha.star);this.parsePropertyName(d,h)}else l=!1;this.parsePropertyValue(d,c,k,l,n,b,h,e);return this.finishNode(d,"Property")};Jh.parsePropertyValue=function(c,h,d,k,n,b,e,l){(d||k)&&this.type===Ha.colon&&this.unexpected();this.eat(Ha.colon)?(c.value=h?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,e),c.kind="init"):6<=this.options.ecmaVersion&&this.type===Ha.parenL?(h&&
this.unexpected(),c.kind="init",c.method=!0,c.value=this.parseMethod(d,k)):h||l||!(5<=this.options.ecmaVersion)||c.computed||"Identifier"!==c.key.type||"get"!==c.key.name&&"set"!==c.key.name||this.type===Ha.comma||this.type===Ha.braceR||this.type===Ha.eq?6<=this.options.ecmaVersion&&!c.computed&&"Identifier"===c.key.type?((d||k)&&this.unexpected(),this.checkUnreserved(c.key),"await"!==c.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),c.kind="init",h?c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key)):
this.type===Ha.eq&&e?(0>e.shorthandAssign&&(e.shorthandAssign=this.start),c.value=this.parseMaybeDefault(n,b,this.copyNode(c.key))):c.value=this.copyNode(c.key),c.shorthand=!0):this.unexpected():((d||k)&&this.unexpected(),c.kind=c.key.name,this.parsePropertyName(c),c.value=this.parseMethod(!1),c.value.params.length!==("get"===c.kind?0:1)?(h=c.value.start,"get"===c.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")):"set"===
c.kind&&"RestElement"===c.value.params[0].type&&this.raiseRecoverable(c.value.params[0].start,"Setter cannot use rest params"))};Jh.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ha.bracketL))return c.computed=!0,c.key=this.parseMaybeAssign(),this.expect(Ha.bracketR),c.key;c.computed=!1}return c.key=this.type===Ha.num||this.type===Ha.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)};Jh.initFunction=function(c){c.id=null;6<=this.options.ecmaVersion&&
(c.generator=c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};Jh.parseMethod=function(c,h,d){var k=this.startNode(),n=this.yieldPos,b=this.awaitPos,e=this.awaitIdentPos;this.initFunction(k);6<=this.options.ecmaVersion&&(k.generator=c);8<=this.options.ecmaVersion&&(k.async=!!h);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;this.enterScope(2|(h?4:0)|(k.generator?8:0)|64|(d?128:0));this.expect(Ha.parenL);k.params=this.parseBindingList(Ha.parenR,!1,8<=this.options.ecmaVersion);this.checkYieldAwaitInDefaultParams();
this.parseFunctionBody(k,!1,!0);this.yieldPos=n;this.awaitPos=b;this.awaitIdentPos=e;return this.finishNode(k,"FunctionExpression")};Jh.parseArrowExpression=function(c,h,d){var k=this.yieldPos,n=this.awaitPos,b=this.awaitIdentPos;this.enterScope((d?4:0)|18);this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!d);this.awaitIdentPos=this.awaitPos=this.yieldPos=0;c.params=this.toAssignableList(h,!0);this.parseFunctionBody(c,!0,!1);this.yieldPos=k;this.awaitPos=n;this.awaitIdentPos=b;return this.finishNode(c,
"ArrowFunctionExpression")};Jh.parseFunctionBody=function(c,h,d){var k=this.strict,n=!1;if(h&&this.type!==Ha.braceL)c.body=this.parseMaybeAssign(),c.expression=!0,this.checkParams(c,!1);else{var b=7<=this.options.ecmaVersion&&!this.isSimpleParamList(c.params);(!k||b)&&(n=this.strictDirective(this.end))&&b&&this.raiseRecoverable(c.start,"Illegal 'use strict' directive in function with non-simple parameter list");b=this.labels;this.labels=[];n&&(this.strict=!0);this.checkParams(c,!k&&!n&&!h&&!d&&this.isSimpleParamList(c.params));
this.strict&&c.id&&this.checkLValSimple(c.id,5);c.body=this.parseBlock(!1,void 0,n&&!k);c.expression=!1;this.adaptDirectivePrologue(c.body.body);this.labels=b}this.exitScope()};Jh.isSimpleParamList=function(c){for(var h=0;h<c.length;h+=1)if("Identifier"!==c[h].type)return!1;return!0};Jh.checkParams=function(c,h){var d=Object.create(null),k=0;for(c=c.params;k<c.length;k+=1)this.checkLValInnerPattern(c[k],1,h?null:d)};Jh.parseExprList=function(c,h,d,k){for(var n=[],b=!0;!this.eat(c);){if(b)b=!1;else if(this.expect(Ha.comma),
h&&this.afterTrailingComma(c))break;if(d&&this.type===Ha.comma)var e=null;else this.type===Ha.ellipsis?(e=this.parseSpread(k),k&&this.type===Ha.comma&&0>k.trailingComma&&(k.trailingComma=this.start)):e=this.parseMaybeAssign(!1,k);n.push(e)}return n};Jh.checkUnreserved=function(c){var h=c.start,d=c.end;c=c.name;this.inGenerator&&"yield"===c&&this.raiseRecoverable(h,"Cannot use 'yield' as identifier inside a generator");this.inAsync&&"await"===c&&this.raiseRecoverable(h,"Cannot use 'await' as identifier inside an async function");
this.keywords.test(c)&&this.raise(h,"Unexpected keyword '"+c+"'");6>this.options.ecmaVersion&&-1!==this.input.slice(h,d).indexOf("\\")||!(this.strict?this.reservedWordsStrict:this.reservedWords).test(c)||(this.inAsync||"await"!==c||this.raiseRecoverable(h,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(h,"The keyword '"+c+"' is reserved"))};Jh.parseIdent=function(c,h){h=this.startNode();this.type===Ha.name?h.name=this.value:this.type.keyword?(h.name=this.type.keyword,
"class"!==h.name&&"function"!==h.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected();this.next(!!c);this.finishNode(h,"Identifier");c||(this.checkUnreserved(h),"await"!==h.name||this.awaitIdentPos||(this.awaitIdentPos=h.start));return h};Jh.parseYield=function(c){this.yieldPos||(this.yieldPos=this.start);var h=this.startNode();this.next();this.type===Ha.semi||this.canInsertSemicolon()||this.type!==Ha.star&&!this.type.startsExpr?
(h.delegate=!1,h.argument=null):(h.delegate=this.eat(Ha.star),h.argument=this.parseMaybeAssign(c));return this.finishNode(h,"YieldExpression")};Jh.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var c=this.startNode();this.next();c.argument=this.parseMaybeUnary(null,!0);return this.finishNode(c,"AwaitExpression")};var AJ=Hl.prototype;AJ.raise=function(c,h){var d=uq(this.input,c);h+=" ("+d.line+":"+d.column+")";h=new SyntaxError(h);h.pos=c;h.loc=d;h.raisedAt=this.pos;throw h;};AJ.raiseRecoverable=
AJ.raise;AJ.curPosition=function(){if(this.options.locations)return new VC(this.curLine,this.pos-this.lineStart)};var Kx=Hl.prototype,xda=function(c){this.flags=c;this.var=[];this.lexical=[];this.functions=[]};Kx.enterScope=function(c){this.scopeStack.push(new xda(c))};Kx.exitScope=function(){this.scopeStack.pop()};Kx.treatFunctionsAsVarInScope=function(c){return c.flags&2||!this.inModule&&c.flags&1};Kx.declareName=function(c,h,d){var k=!1;if(2===h)h=this.currentScope(),k=-1<h.lexical.indexOf(c)||
-1<h.functions.indexOf(c)||-1<h.var.indexOf(c),h.lexical.push(c),this.inModule&&h.flags&1&&delete this.undefinedExports[c];else if(4===h)this.currentScope().lexical.push(c);else if(3===h)h=this.currentScope(),k=this.treatFunctionsAsVar?-1<h.lexical.indexOf(c):-1<h.lexical.indexOf(c)||-1<h.var.indexOf(c),h.functions.push(c);else for(h=this.scopeStack.length-1;0<=h;--h){var n=this.scopeStack[h];if(-1<n.lexical.indexOf(c)&&!(n.flags&32&&n.lexical[0]===c)||!this.treatFunctionsAsVarInScope(n)&&-1<n.functions.indexOf(c)){k=
!0;break}n.var.push(c);this.inModule&&n.flags&1&&delete this.undefinedExports[c];if(n.flags&3)break}k&&this.raiseRecoverable(d,"Identifier '"+c+"' has already been declared")};Kx.checkLocalExport=function(c){-1===this.scopeStack[0].lexical.indexOf(c.name)&&-1===this.scopeStack[0].var.indexOf(c.name)&&(this.undefinedExports[c.name]=c)};Kx.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Kx.currentVarScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];
if(h.flags&3)return h}};Kx.currentThisScope=function(){for(var c=this.scopeStack.length-1;;c--){var h=this.scopeStack[c];if(h.flags&3&&!(h.flags&16))return h}};var Hz=function(c,h,d){this.type="";this.start=h;this.end=0;c.options.locations&&(this.loc=new DA(c,d));c.options.directSourceFile&&(this.sourceFile=c.options.directSourceFile);c.options.ranges&&(this.range=[h,0])},DE=Hl.prototype;DE.startNode=function(){return new Hz(this,this.start,this.startLoc)};DE.startNodeAt=function(c,h){return new Hz(this,
c,h)};DE.finishNode=function(c,h){return rt.call(this,c,h,this.lastTokEnd,this.lastTokEndLoc)};DE.finishNodeAt=function(c,h,d,k){return rt.call(this,c,h,d,k)};DE.copyNode=function(c){var h=new Hz(this,c.start,this.startLoc),d;for(d in c)h[d]=c[d];return h};var ws=function(c,h,d,k,n){this.token=c;this.isExpr=!!h;this.preserveSpace=!!d;this.override=k;this.generator=!!n},uk={b_stat:new ws("{",!1),b_expr:new ws("{",!0),b_tmpl:new ws("${",!1),p_stat:new ws("(",!1),p_expr:new ws("(",!0),q_tmpl:new ws("`",
!0,!0,function(c){return c.tryReadTemplateToken()}),f_stat:new ws("function",!1),f_expr:new ws("function",!0),f_expr_gen:new ws("function",!0,!1,null,!0),f_gen:new ws("function",!1,!1,null,!0)},BJ=Hl.prototype;BJ.initialContext=function(){return[uk.b_stat]};BJ.braceIsBlock=function(c){var h=this.curContext();return h===uk.f_expr||h===uk.f_stat?!0:c!==Ha.colon||h!==uk.b_stat&&h!==uk.b_expr?c===Ha._return||c===Ha.name&&this.exprAllowed?Kp.test(this.input.slice(this.lastTokEnd,this.start)):c===Ha._else||
c===Ha.semi||c===Ha.eof||c===Ha.parenR||c===Ha.arrow?!0:c===Ha.braceL?h===uk.b_stat:c===Ha._var||c===Ha._const||c===Ha.name?!1:!this.exprAllowed:!h.isExpr};BJ.inGeneratorContext=function(){for(var c=this.context.length-1;1<=c;c--){var h=this.context[c];if("function"===h.token)return h.generator}return!1};BJ.updateContext=function(c){var h,d=this.type;d.keyword&&c===Ha.dot?this.exprAllowed=!1:(h=d.updateContext)?h.call(this,c):this.exprAllowed=d.beforeExpr};Ha.parenR.updateContext=Ha.braceR.updateContext=
function(){if(1===this.context.length)this.exprAllowed=!0;else{var c=this.context.pop();c===uk.b_stat&&"function"===this.curContext().token&&(c=this.context.pop());this.exprAllowed=!c.isExpr}};Ha.braceL.updateContext=function(c){this.context.push(this.braceIsBlock(c)?uk.b_stat:uk.b_expr);this.exprAllowed=!0};Ha.dollarBraceL.updateContext=function(){this.context.push(uk.b_tmpl);this.exprAllowed=!0};Ha.parenL.updateContext=function(c){this.context.push(c===Ha._if||c===Ha._for||c===Ha._with||c===Ha._while?
uk.p_stat:uk.p_expr);this.exprAllowed=!0};Ha.incDec.updateContext=function(){};Ha._function.updateContext=Ha._class.updateContext=function(c){!c.beforeExpr||c===Ha._else||c===Ha.semi&&this.curContext()!==uk.p_stat||c===Ha._return&&Kp.test(this.input.slice(this.lastTokEnd,this.start))||(c===Ha.colon||c===Ha.braceL)&&this.curContext()===uk.b_stat?this.context.push(uk.f_stat):this.context.push(uk.f_expr);this.exprAllowed=!1};Ha.backQuote.updateContext=function(){this.curContext()===uk.q_tmpl?this.context.pop():
this.context.push(uk.q_tmpl);this.exprAllowed=!1};Ha.star.updateContext=function(c){c===Ha._function&&(c=this.context.length-1,this.context[c]=this.context[c]===uk.f_expr?uk.f_expr_gen:uk.f_gen);this.exprAllowed=!0};Ha.name.updateContext=function(c){var h=!1;6<=this.options.ecmaVersion&&c!==Ha.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(h=!0);this.exprAllowed=h};var q7={9:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",
10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",
12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},
r7={9:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",
10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",
11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",
12:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi"},
IT={};mh(9);mh(10);mh(11);mh(12);var eg=Hl.prototype,$v=function(c){this.parser=c;this.validFlags="gim"+(6<=c.options.ecmaVersion?"uy":"")+(9<=c.options.ecmaVersion?"s":"");this.unicodeProperties=IT[12<=c.options.ecmaVersion?12:c.options.ecmaVersion];this.flags=this.source="";this.start=0;this.switchN=this.switchU=!1;this.lastIntValue=this.pos=0;this.lastStringValue="";this.lastAssertionIsQuantifiable=!1;this.maxBackReference=this.numCapturingParens=0;this.groupNames=[];this.backReferenceNames=[]};
$v.prototype.reset=function(c,h,d){var k=-1!==d.indexOf("u");this.start=c|0;this.source=h+"";this.flags=d;this.switchU=k&&6<=this.parser.options.ecmaVersion;this.switchN=k&&9<=this.parser.options.ecmaVersion};$v.prototype.raise=function(c){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+c)};$v.prototype.at=function(c,h){void 0===h&&(h=!1);var d=this.source,k=d.length;if(c>=k)return-1;var n=d.charCodeAt(c);if(!h&&!this.switchU||55295>=n||57344<=n||c+1>=k)return n;
c=d.charCodeAt(c+1);return 56320<=c&&57343>=c?(n<<10)+c-56613888:n};$v.prototype.nextIndex=function(c,h){void 0===h&&(h=!1);var d=this.source,k=d.length;if(c>=k)return k;var n=d.charCodeAt(c),b;return!h&&!this.switchU||55295>=n||57344<=n||c+1>=k||56320>(b=d.charCodeAt(c+1))||57343<b?c+1:c+2};$v.prototype.current=function(c){void 0===c&&(c=!1);return this.at(this.pos,c)};$v.prototype.lookahead=function(c){void 0===c&&(c=!1);return this.at(this.nextIndex(this.pos,c),c)};$v.prototype.advance=function(c){void 0===
c&&(c=!1);this.pos=this.nextIndex(this.pos,c)};$v.prototype.eat=function(c,h){void 0===h&&(h=!1);return this.current(h)===c?(this.advance(h),!0):!1};eg.validateRegExpFlags=function(c){for(var h=c.validFlags,d=c.flags,k=0;k<d.length;k++){var n=d.charAt(k);-1===h.indexOf(n)&&this.raise(c.start,"Invalid regular expression flag");-1<d.indexOf(n,k+1)&&this.raise(c.start,"Duplicate regular expression flag")}};eg.validateRegExpPattern=function(c){this.regexp_pattern(c);!c.switchN&&9<=this.options.ecmaVersion&&
0<c.groupNames.length&&(c.switchN=!0,this.regexp_pattern(c))};eg.regexp_pattern=function(c){c.pos=0;c.lastIntValue=0;c.lastStringValue="";c.lastAssertionIsQuantifiable=!1;c.numCapturingParens=0;c.maxBackReference=0;c.groupNames.length=0;c.backReferenceNames.length=0;this.regexp_disjunction(c);c.pos!==c.source.length&&(c.eat(41)&&c.raise("Unmatched ')'"),(c.eat(93)||c.eat(125))&&c.raise("Lone quantifier brackets"));c.maxBackReference>c.numCapturingParens&&c.raise("Invalid escape");for(var h=0,d=c.backReferenceNames;h<
d.length;h+=1)-1===c.groupNames.indexOf(d[h])&&c.raise("Invalid named capture referenced")};eg.regexp_disjunction=function(c){for(this.regexp_alternative(c);c.eat(124);)this.regexp_alternative(c);this.regexp_eatQuantifier(c,!0)&&c.raise("Nothing to repeat");c.eat(123)&&c.raise("Lone quantifier brackets")};eg.regexp_alternative=function(c){for(;c.pos<c.source.length&&this.regexp_eatTerm(c););};eg.regexp_eatTerm=function(c){return this.regexp_eatAssertion(c)?(c.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(c)&&
c.switchU&&c.raise("Invalid quantifier"),!0):(c.switchU?this.regexp_eatAtom(c):this.regexp_eatExtendedAtom(c))?(this.regexp_eatQuantifier(c),!0):!1};eg.regexp_eatAssertion=function(c){var h=c.pos;c.lastAssertionIsQuantifiable=!1;if(c.eat(94)||c.eat(36))return!0;if(c.eat(92)){if(c.eat(66)||c.eat(98))return!0;c.pos=h}if(c.eat(40)&&c.eat(63)){var d=!1;9<=this.options.ecmaVersion&&(d=c.eat(60));if(c.eat(61)||c.eat(33))return this.regexp_disjunction(c),c.eat(41)||c.raise("Unterminated group"),c.lastAssertionIsQuantifiable=
!d,!0}c.pos=h;return!1};eg.regexp_eatQuantifier=function(c,h){void 0===h&&(h=!1);return this.regexp_eatQuantifierPrefix(c,h)?(c.eat(63),!0):!1};eg.regexp_eatQuantifierPrefix=function(c,h){return c.eat(42)||c.eat(43)||c.eat(63)||this.regexp_eatBracedQuantifier(c,h)};eg.regexp_eatBracedQuantifier=function(c,h){var d=c.pos;if(c.eat(123)){var k=-1;if(this.regexp_eatDecimalDigits(c)){var n=c.lastIntValue;c.eat(44)&&this.regexp_eatDecimalDigits(c)&&(k=c.lastIntValue);if(c.eat(125))return-1!==k&&k<n&&!h&&
c.raise("numbers out of order in {} quantifier"),!0}c.switchU&&!h&&c.raise("Incomplete quantifier");c.pos=d}return!1};eg.regexp_eatAtom=function(c){return this.regexp_eatPatternCharacters(c)||c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)};eg.regexp_eatReverseSolidusAtomEscape=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatAtomEscape(c))return!0;c.pos=h}return!1};eg.regexp_eatUncapturingGroup=
function(c){var h=c.pos;if(c.eat(40)){if(c.eat(63)&&c.eat(58)){this.regexp_disjunction(c);if(c.eat(41))return!0;c.raise("Unterminated group")}c.pos=h}return!1};eg.regexp_eatCapturingGroup=function(c){if(c.eat(40)){9<=this.options.ecmaVersion?this.regexp_groupSpecifier(c):63===c.current()&&c.raise("Invalid group");this.regexp_disjunction(c);if(c.eat(41))return c.numCapturingParens+=1,!0;c.raise("Unterminated group")}return!1};eg.regexp_eatExtendedAtom=function(c){return c.eat(46)||this.regexp_eatReverseSolidusAtomEscape(c)||
this.regexp_eatCharacterClass(c)||this.regexp_eatUncapturingGroup(c)||this.regexp_eatCapturingGroup(c)||this.regexp_eatInvalidBracedQuantifier(c)||this.regexp_eatExtendedPatternCharacter(c)};eg.regexp_eatInvalidBracedQuantifier=function(c){this.regexp_eatBracedQuantifier(c,!0)&&c.raise("Nothing to repeat");return!1};eg.regexp_eatSyntaxCharacter=function(c){var h=c.current();return nl(h)?(c.lastIntValue=h,c.advance(),!0):!1};eg.regexp_eatPatternCharacters=function(c){for(var h=c.pos,d=0;-1!==(d=c.current())&&
!nl(d);)c.advance();return c.pos!==h};eg.regexp_eatExtendedPatternCharacter=function(c){var h=c.current();return-1===h||36===h||40<=h&&43>=h||46===h||63===h||91===h||94===h||124===h?!1:(c.advance(),!0)};eg.regexp_groupSpecifier=function(c){c.eat(63)&&(this.regexp_eatGroupName(c)?(-1!==c.groupNames.indexOf(c.lastStringValue)&&c.raise("Duplicate capture group name"),c.groupNames.push(c.lastStringValue)):c.raise("Invalid group"))};eg.regexp_eatGroupName=function(c){c.lastStringValue="";if(c.eat(60)){if(this.regexp_eatRegExpIdentifierName(c)&&
c.eat(62))return!0;c.raise("Invalid capture group name")}return!1};eg.regexp_eatRegExpIdentifierName=function(c){c.lastStringValue="";if(this.regexp_eatRegExpIdentifierStart(c)){for(c.lastStringValue+=En(c.lastIntValue);this.regexp_eatRegExpIdentifierPart(c);)c.lastStringValue+=En(c.lastIntValue);return!0}return!1};eg.regexp_eatRegExpIdentifierStart=function(c){var h=c.pos,d=11<=this.options.ecmaVersion,k=c.current(d);c.advance(d);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(k=c.lastIntValue);
d=k;if(Gm(d,!0)||36===d||95===d)return c.lastIntValue=k,!0;c.pos=h;return!1};eg.regexp_eatRegExpIdentifierPart=function(c){var h=c.pos,d=11<=this.options.ecmaVersion,k=c.current(d);c.advance(d);92===k&&this.regexp_eatRegExpUnicodeEscapeSequence(c,d)&&(k=c.lastIntValue);d=k;if(Ir(d,!0)||36===d||95===d||8204===d||8205===d)return c.lastIntValue=k,!0;c.pos=h;return!1};eg.regexp_eatAtomEscape=function(c){if(this.regexp_eatBackReference(c)||this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)||
c.switchN&&this.regexp_eatKGroupName(c))return!0;c.switchU&&(99===c.current()&&c.raise("Invalid unicode escape"),c.raise("Invalid escape"));return!1};eg.regexp_eatBackReference=function(c){var h=c.pos;if(this.regexp_eatDecimalEscape(c)){var d=c.lastIntValue;if(c.switchU)return d>c.maxBackReference&&(c.maxBackReference=d),!0;if(d<=c.numCapturingParens)return!0;c.pos=h}return!1};eg.regexp_eatKGroupName=function(c){if(c.eat(107)){if(this.regexp_eatGroupName(c))return c.backReferenceNames.push(c.lastStringValue),
!0;c.raise("Invalid named reference")}return!1};eg.regexp_eatCharacterEscape=function(c){return this.regexp_eatControlEscape(c)||this.regexp_eatCControlLetter(c)||this.regexp_eatZero(c)||this.regexp_eatHexEscapeSequence(c)||this.regexp_eatRegExpUnicodeEscapeSequence(c,!1)||!c.switchU&&this.regexp_eatLegacyOctalEscapeSequence(c)||this.regexp_eatIdentityEscape(c)};eg.regexp_eatCControlLetter=function(c){var h=c.pos;if(c.eat(99)){if(this.regexp_eatControlLetter(c))return!0;c.pos=h}return!1};eg.regexp_eatZero=
function(c){return 48!==c.current()||Jr(c.lookahead())?!1:(c.lastIntValue=0,c.advance(),!0)};eg.regexp_eatControlEscape=function(c){var h=c.current();return 116===h?(c.lastIntValue=9,c.advance(),!0):110===h?(c.lastIntValue=10,c.advance(),!0):118===h?(c.lastIntValue=11,c.advance(),!0):102===h?(c.lastIntValue=12,c.advance(),!0):114===h?(c.lastIntValue=13,c.advance(),!0):!1};eg.regexp_eatControlLetter=function(c){var h=c.current();return 65<=h&&90>=h||97<=h&&122>=h?(c.lastIntValue=h%32,c.advance(),!0):
!1};eg.regexp_eatRegExpUnicodeEscapeSequence=function(c,h){void 0===h&&(h=!1);var d=c.pos;h=h||c.switchU;if(c.eat(117)){if(this.regexp_eatFixedHexDigits(c,4)){d=c.lastIntValue;if(h&&55296<=d&&56319>=d){h=c.pos;if(c.eat(92)&&c.eat(117)&&this.regexp_eatFixedHexDigits(c,4)){var k=c.lastIntValue;if(56320<=k&&57343>=k)return c.lastIntValue=1024*(d-55296)+(k-56320)+65536,!0}c.pos=h;c.lastIntValue=d}return!0}if(k=h&&c.eat(123)&&this.regexp_eatHexDigits(c)&&c.eat(125))k=c.lastIntValue,k=0<=k&&1114111>=k;
if(k)return!0;h&&c.raise("Invalid unicode escape");c.pos=d}return!1};eg.regexp_eatIdentityEscape=function(c){if(c.switchU)return this.regexp_eatSyntaxCharacter(c)?!0:c.eat(47)?(c.lastIntValue=47,!0):!1;var h=c.current();return 99===h||c.switchN&&107===h?!1:(c.lastIntValue=h,c.advance(),!0)};eg.regexp_eatDecimalEscape=function(c){c.lastIntValue=0;var h=c.current();if(49<=h&&57>=h){do c.lastIntValue=10*c.lastIntValue+(h-48),c.advance();while(48<=(h=c.current())&&57>=h);return!0}return!1};eg.regexp_eatCharacterClassEscape=
function(c){var h=c.current();if(100===h||68===h||115===h||83===h||119===h||87===h)return c.lastIntValue=-1,c.advance(),!0;if(c.switchU&&9<=this.options.ecmaVersion&&(80===h||112===h)){c.lastIntValue=-1;c.advance();if(c.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(c)&&c.eat(125))return!0;c.raise("Invalid property name")}return!1};eg.regexp_eatUnicodePropertyValueExpression=function(c){var h=c.pos;if(this.regexp_eatUnicodePropertyName(c)&&c.eat(61)){var d=c.lastStringValue;if(this.regexp_eatUnicodePropertyValue(c))return this.regexp_validateUnicodePropertyNameAndValue(c,
d,c.lastStringValue),!0}c.pos=h;return this.regexp_eatLoneUnicodePropertyNameOrValue(c)?(this.regexp_validateUnicodePropertyNameOrValue(c,c.lastStringValue),!0):!1};eg.regexp_validateUnicodePropertyNameAndValue=function(c,h,d){lG.call(c.unicodeProperties.nonBinary,h)||c.raise("Invalid property name");c.unicodeProperties.nonBinary[h].test(d)||c.raise("Invalid property value")};eg.regexp_validateUnicodePropertyNameOrValue=function(c,h){c.unicodeProperties.binary.test(h)||c.raise("Invalid property name")};
eg.regexp_eatUnicodePropertyName=function(c){var h;for(c.lastStringValue="";st(h=c.current());)c.lastStringValue+=En(h),c.advance();return""!==c.lastStringValue};eg.regexp_eatUnicodePropertyValue=function(c){var h;for(c.lastStringValue="";gv(h=c.current());)c.lastStringValue+=En(h),c.advance();return""!==c.lastStringValue};eg.regexp_eatLoneUnicodePropertyNameOrValue=function(c){return this.regexp_eatUnicodePropertyValue(c)};eg.regexp_eatCharacterClass=function(c){if(c.eat(91)){c.eat(94);this.regexp_classRanges(c);
if(c.eat(93))return!0;c.raise("Unterminated character class")}return!1};eg.regexp_classRanges=function(c){for(;this.regexp_eatClassAtom(c);){var h=c.lastIntValue;if(c.eat(45)&&this.regexp_eatClassAtom(c)){var d=c.lastIntValue;!c.switchU||-1!==h&&-1!==d||c.raise("Invalid character class");-1!==h&&-1!==d&&h>d&&c.raise("Range out of order in character class")}}};eg.regexp_eatClassAtom=function(c){var h=c.pos;if(c.eat(92)){if(this.regexp_eatClassEscape(c))return!0;if(c.switchU){var d=c.current();(99===
d||48<=d&&55>=d)&&c.raise("Invalid class escape");c.raise("Invalid escape")}c.pos=h}h=c.current();return 93!==h?(c.lastIntValue=h,c.advance(),!0):!1};eg.regexp_eatClassEscape=function(c){var h=c.pos;if(c.eat(98))return c.lastIntValue=8,!0;if(c.switchU&&c.eat(45))return c.lastIntValue=45,!0;if(!c.switchU&&c.eat(99)){if(this.regexp_eatClassControlLetter(c))return!0;c.pos=h}return this.regexp_eatCharacterClassEscape(c)||this.regexp_eatCharacterEscape(c)};eg.regexp_eatClassControlLetter=function(c){var h=
c.current();return Jr(h)||95===h?(c.lastIntValue=h%32,c.advance(),!0):!1};eg.regexp_eatHexEscapeSequence=function(c){var h=c.pos;if(c.eat(120)){if(this.regexp_eatFixedHexDigits(c,2))return!0;c.switchU&&c.raise("Invalid escape");c.pos=h}return!1};eg.regexp_eatDecimalDigits=function(c){var h=c.pos,d;for(c.lastIntValue=0;Jr(d=c.current());)c.lastIntValue=10*c.lastIntValue+(d-48),c.advance();return c.pos!==h};eg.regexp_eatHexDigits=function(c){var h=c.pos,d;for(c.lastIntValue=0;vq(d=c.current());)c.lastIntValue=
16*c.lastIntValue+ma(d),c.advance();return c.pos!==h};eg.regexp_eatLegacyOctalEscapeSequence=function(c){if(this.regexp_eatOctalDigit(c)){var h=c.lastIntValue;if(this.regexp_eatOctalDigit(c)){var d=c.lastIntValue;3>=h&&this.regexp_eatOctalDigit(c)?c.lastIntValue=64*h+8*d+c.lastIntValue:c.lastIntValue=8*h+d}else c.lastIntValue=h;return!0}return!1};eg.regexp_eatOctalDigit=function(c){var h=c.current();if(48<=h&&55>=h)return c.lastIntValue=h-48,c.advance(),!0;c.lastIntValue=0;return!1};eg.regexp_eatFixedHexDigits=
function(c,h){for(var d=c.pos,k=c.lastIntValue=0;k<h;++k){var n=c.current();if(!vq(n))return c.pos=d,!1;c.lastIntValue=16*c.lastIntValue+ma(n);c.advance()}return!0};var CJ=function(c){this.type=c.type;this.value=c.value;this.start=c.start;this.end=c.end;c.options.locations&&(this.loc=new DA(c,c.startLoc,c.endLoc));c.options.ranges&&(this.range=[c.start,c.end])},ai=Hl.prototype;ai.next=function(c){!c&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+
this.type.keyword);if(this.options.onToken)this.options.onToken(new CJ(this));this.lastTokEnd=this.end;this.lastTokStart=this.start;this.lastTokEndLoc=this.endLoc;this.lastTokStartLoc=this.startLoc;this.nextToken()};ai.getToken=function(){this.next();return new CJ(this)};"undefined"!==typeof Symbol&&(ai[Symbol.iterator]=function(){var c=this;return{next:function(){var h=c.getToken();return{done:h.type===Ha.eof,value:h}}}});ai.curContext=function(){return this.context[this.context.length-1]};ai.nextToken=
function(){var c=this.curContext();c&&c.preserveSpace||this.skipSpace();this.start=this.pos;this.options.locations&&(this.startLoc=this.curPosition());if(this.pos>=this.input.length)return this.finishToken(Ha.eof);if(c.override)return c.override(this);this.readToken(this.fullCharCodeAtPos())};ai.readToken=function(c){return Gm(c,6<=this.options.ecmaVersion)||92===c?this.readWord():this.getTokenFromCode(c)};ai.fullCharCodeAtPos=function(){var c=this.input.charCodeAt(this.pos);if(55295>=c||57344<=c)return c;
var h=this.input.charCodeAt(this.pos+1);return(c<<10)+h-56613888};ai.skipBlockComment=function(){var c=this.options.onComment&&this.curPosition(),h=this.pos,d=this.input.indexOf("*/",this.pos+=2);-1===d&&this.raise(this.pos-2,"Unterminated comment");this.pos=d+2;if(this.options.locations){ry.lastIndex=h;for(var k;(k=ry.exec(this.input))&&k.index<this.pos;)++this.curLine,this.lineStart=k.index+k[0].length}if(this.options.onComment)this.options.onComment(!0,this.input.slice(h+2,d),h,this.pos,c,this.curPosition())};
ai.skipLineComment=function(c){for(var h=this.pos,d=this.options.onComment&&this.curPosition(),k=this.input.charCodeAt(this.pos+=c);this.pos<this.input.length&&!cp(k);)k=this.input.charCodeAt(++this.pos);if(this.options.onComment)this.options.onComment(!1,this.input.slice(h+c,this.pos),h,this.pos,d,this.curPosition())};ai.skipSpace=function(){a:for(;this.pos<this.input.length;){var c=this.input.charCodeAt(this.pos);switch(c){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+
1)&&++this.pos;case 10:case 8232:case 8233:++this.pos;this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break a}break;default:if(8<c&&14>c||5760<=c&&E1.test(String.fromCharCode(c)))++this.pos;else break a}}};ai.finishToken=function(c,h){this.end=this.pos;this.options.locations&&(this.endLoc=this.curPosition());var d=this.type;this.type=c;this.value=
h;this.updateContext(d)};ai.readToken_dot=function(){var c=this.input.charCodeAt(this.pos+1);if(48<=c&&57>=c)return this.readNumber(!0);var h=this.input.charCodeAt(this.pos+2);if(6<=this.options.ecmaVersion&&46===c&&46===h)return this.pos+=3,this.finishToken(Ha.ellipsis);++this.pos;return this.finishToken(Ha.dot)};ai.readToken_slash=function(){var c=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===c?this.finishOp(Ha.assign,2):this.finishOp(Ha.slash,1)};
ai.readToken_mult_modulo_exp=function(c){var h=this.input.charCodeAt(this.pos+1),d=1,k=42===c?Ha.star:Ha.modulo;7<=this.options.ecmaVersion&&42===c&&42===h&&(++d,k=Ha.starstar,h=this.input.charCodeAt(this.pos+2));return 61===h?this.finishOp(Ha.assign,d+1):this.finishOp(k,d)};ai.readToken_pipe_amp=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?12<=this.options.ecmaVersion&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ha.assign,3):this.finishOp(124===c?Ha.logicalOR:Ha.logicalAND,
2):61===h?this.finishOp(Ha.assign,2):this.finishOp(124===c?Ha.bitwiseOR:Ha.bitwiseAND,1)};ai.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Ha.assign,2):this.finishOp(Ha.bitwiseXOR,1)};ai.readToken_plus_min=function(c){var h=this.input.charCodeAt(this.pos+1);return h===c?45!==h||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Kp.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Ha.incDec,2):(this.skipLineComment(3),
this.skipSpace(),this.nextToken()):61===h?this.finishOp(Ha.assign,2):this.finishOp(Ha.plusMin,1)};ai.readToken_lt_gt=function(c){var h=this.input.charCodeAt(this.pos+1),d=1;if(h===c)return d=62===c&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+d)?this.finishOp(Ha.assign,d+1):this.finishOp(Ha.bitShift,d);if(33===h&&60===c&&!this.inModule&&45===this.input.charCodeAt(this.pos+2)&&45===this.input.charCodeAt(this.pos+3))return this.skipLineComment(4),this.skipSpace(),
this.nextToken();61===h&&(d=2);return this.finishOp(Ha.relational,d)};ai.readToken_eq_excl=function(c){var h=this.input.charCodeAt(this.pos+1);return 61===h?this.finishOp(Ha.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===c&&62===h&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(Ha.arrow)):this.finishOp(61===c?Ha.eq:Ha.prefix,1)};ai.readToken_question=function(){var c=this.options.ecmaVersion;if(11<=c){var h=this.input.charCodeAt(this.pos+1);if(46===h){var d=this.input.charCodeAt(this.pos+
2);if(48>d||57<d)return this.finishOp(Ha.questionDot,2)}if(63===h)return 12<=c&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Ha.assign,3):this.finishOp(Ha.coalesce,2)}return this.finishOp(Ha.question,1)};ai.getTokenFromCode=function(c){switch(c){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ha.parenL);case 41:return++this.pos,this.finishToken(Ha.parenR);case 59:return++this.pos,this.finishToken(Ha.semi);case 44:return++this.pos,this.finishToken(Ha.comma);case 91:return++this.pos,
this.finishToken(Ha.bracketL);case 93:return++this.pos,this.finishToken(Ha.bracketR);case 123:return++this.pos,this.finishToken(Ha.braceL);case 125:return++this.pos,this.finishToken(Ha.braceR);case 58:return++this.pos,this.finishToken(Ha.colon);case 96:if(6>this.options.ecmaVersion)break;++this.pos;return this.finishToken(Ha.backQuote);case 48:c=this.input.charCodeAt(this.pos+1);if(120===c||88===c)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===c||79===c)return this.readRadixNumber(8);
if(98===c||66===c)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(c);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(c);case 124:case 38:return this.readToken_pipe_amp(c);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(c);case 60:case 62:return this.readToken_lt_gt(c);case 61:case 33:return this.readToken_eq_excl(c);
case 63:return this.readToken_question();case 126:return this.finishOp(Ha.prefix,1)}this.raise(this.pos,"Unexpected character '"+lk(c)+"'")};ai.finishOp=function(c,h){var d=this.input.slice(this.pos,this.pos+h);this.pos+=h;return this.finishToken(c,d)};ai.readRegexp=function(){for(var c,h,d=this.pos;;){this.pos>=this.input.length&&this.raise(d,"Unterminated regular expression");var k=this.input.charAt(this.pos);Kp.test(k)&&this.raise(d,"Unterminated regular expression");if(c)c=!1;else{if("["===k)h=
!0;else if("]"===k&&h)h=!1;else if("/"===k&&!h)break;c="\\"===k}++this.pos}c=this.input.slice(d,this.pos);++this.pos;k=this.pos;h=this.readWord1();this.containsEsc&&this.unexpected(k);k=this.regexpState||(this.regexpState=new $v(this));k.reset(d,c,h);this.validateRegExpFlags(k);this.validateRegExpPattern(k);d=null;try{d=new RegExp(c,h)}catch(n){}return this.finishToken(Ha.regexp,{pattern:c,flags:h,value:d})};ai.readInt=function(c,h,d){var k=12<=this.options.ecmaVersion&&void 0===h;d=d&&48===this.input.charCodeAt(this.pos);
for(var n=this.pos,b=0,e=0,l=0,a=null==h?Infinity:h;l<a;++l,++this.pos){var f=this.input.charCodeAt(this.pos);if(k&&95===f)d&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===e&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),e=f;else{var m=97<=f?f-97+10:65<=f?f-65+10:48<=f&&57>=f?f-48:Infinity;if(m>=c)break;e=f;
b=b*c+m}}k&&95===e&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits");return this.pos===n||null!=h&&this.pos-n!==h?null:b};ai.readRadixNumber=function(c){var h=this.pos;this.pos+=2;var d=this.readInt(c);null==d&&this.raise(this.start+2,"Expected number in radix "+c);11<=this.options.ecmaVersion&&110===this.input.charCodeAt(this.pos)?(d=wq(this.input.slice(h,this.pos)),++this.pos):Gm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");
return this.finishToken(Ha.num,d)};ai.readNumber=function(c){var h=this.pos;c||null!==this.readInt(10,void 0,!0)||this.raise(h,"Invalid number");var d=2<=this.pos-h&&48===this.input.charCodeAt(h);d&&this.strict&&this.raise(h,"Invalid number");var k=this.input.charCodeAt(this.pos);if(!d&&!c&&11<=this.options.ecmaVersion&&110===k)return d=wq(this.input.slice(h,this.pos)),++this.pos,Gm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ha.num,d);d&&/[89]/.test(this.input.slice(h,
this.pos))&&(d=!1);46!==k||d||(++this.pos,this.readInt(10),k=this.input.charCodeAt(this.pos));69!==k&&101!==k||d||(k=this.input.charCodeAt(++this.pos),43!==k&&45!==k||++this.pos,null===this.readInt(10)&&this.raise(h,"Invalid number"));Gm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");c=this.input.slice(h,this.pos);d=d?parseInt(c,8):parseFloat(c.replace(/_/g,""));return this.finishToken(Ha.num,d)};ai.readCodePoint=function(){if(123===this.input.charCodeAt(this.pos)){6>
this.options.ecmaVersion&&this.unexpected();var c=++this.pos;var h=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos);++this.pos;1114111<h&&this.invalidStringToken(c,"Code point out of bounds")}else h=this.readHexChar(4);return h};ai.readString=function(c){for(var h="",d=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var k=this.input.charCodeAt(this.pos);if(k===c)break;92===k?(h+=this.input.slice(d,this.pos),h+=this.readEscapedChar(!1),d=
this.pos):(cp(k,10<=this.options.ecmaVersion)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}h+=this.input.slice(d,this.pos++);return this.finishToken(Ha.string,h)};var G1={};ai.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(c){if(c===G1)this.readInvalidTemplateToken();else throw c;}this.inTemplateElement=!1};ai.invalidStringToken=function(c,h){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw G1;this.raise(c,h)};ai.readTmplToken=
function(){for(var c="",h=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var d=this.input.charCodeAt(this.pos);if(96===d||36===d&&123===this.input.charCodeAt(this.pos+1)){if(this.pos===this.start&&(this.type===Ha.template||this.type===Ha.invalidTemplate)){if(36===d)return this.pos+=2,this.finishToken(Ha.dollarBraceL);++this.pos;return this.finishToken(Ha.backQuote)}c+=this.input.slice(h,this.pos);return this.finishToken(Ha.template,c)}if(92===d)c+=this.input.slice(h,
this.pos),c+=this.readEscapedChar(!0),h=this.pos;else if(cp(d)){c+=this.input.slice(h,this.pos);++this.pos;switch(d){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:c+="\n";break;default:c+=String.fromCharCode(d)}this.options.locations&&(++this.curLine,this.lineStart=this.pos);h=this.pos}else++this.pos}};ai.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case "\\":++this.pos;break;case "$":if("{"!==this.input[this.pos+1])break;
case "`":return this.finishToken(Ha.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};ai.readEscapedChar=function(c){var h=this.input.charCodeAt(++this.pos);++this.pos;switch(h){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return lk(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;
case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),c)return this.invalidStringToken(this.pos-1,"Invalid escape sequence in template string"),null;default:if(48<=h&&55>=h){var d=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],k=parseInt(d,8);255<k&&(d=d.slice(0,-1),k=parseInt(d,8));this.pos+=d.length-1;h=this.input.charCodeAt(this.pos);"0"===d&&56!==h&&57!==h||!this.strict&&
!c||this.invalidStringToken(this.pos-1-d.length,c?"Octal literal in template string":"Octal literal in strict mode");return String.fromCharCode(k)}return cp(h)?"":String.fromCharCode(h)}};ai.readHexChar=function(c){var h=this.pos;c=this.readInt(16,c);null===c&&this.invalidStringToken(h,"Bad character escape sequence");return c};ai.readWord1=function(){this.containsEsc=!1;for(var c="",h=!0,d=this.pos,k=6<=this.options.ecmaVersion;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Ir(n,
k))this.pos+=65535>=n?1:2;else if(92===n)this.containsEsc=!0,c+=this.input.slice(d,this.pos),d=this.pos,117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,n=this.readCodePoint(),(h?Gm:Ir)(n,k)||this.invalidStringToken(d,"Invalid Unicode escape"),c+=lk(n),d=this.pos;else break;h=!1}return c+this.input.slice(d,this.pos)};ai.readWord=function(){var c=this.readWord1(),h=Ha.name;this.keywords.test(c)&&(h=xM[c]);return this.finishToken(h,
c)};Hl.acorn={Parser:Hl,version:"8.1.0",defaultOptions:kG,Position:VC,SourceLocation:DA,getLineInfo:uq,Node:Hz,TokenType:zi,tokTypes:Ha,keywordTypes:xM,TokContext:ws,tokContexts:uk,isIdentifierChar:Ir,isIdentifierStart:Gm,Token:CJ,isNewLine:cp,lineBreak:Kp,lineBreakG:ry,nonASCIIwhitespace:E1};var jj=function(c,h){void 0===h&&(h={});this.toks=this.constructor.BaseParser.tokenizer(c,h);this.options=this.toks.options;this.input=this.toks.input;this.tok=this.last={type:Ha.eof,start:0,end:0};this.tok.validateRegExpFlags=
tt;this.tok.validateRegExpPattern=tt;this.options.locations&&(c=this.toks.curPosition(),this.tok.loc=new DA(this.toks,c,c));this.ahead=[];this.context=[];this.curLineStart=this.curIndent=0;this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.inFunction=this.inAsync=!1};jj.prototype.startNode=function(){return new Hz(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)};jj.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:
this.tok.start};jj.prototype.startNodeAt=function(c){return this.options.locations?new Hz(this.toks,c[0],c[1]):new Hz(this.toks,c)};jj.prototype.finishNode=function(c,h){c.type=h;c.end=this.last.end;this.options.locations&&(c.loc.end=this.last.loc.end);this.options.ranges&&(c.range[1]=this.last.end);return c};jj.prototype.dummyNode=function(c){var h=this.startNode();h.type=c;h.end=h.start;this.options.locations&&(h.loc.end=h.loc.start);this.options.ranges&&(h.range[1]=h.start);this.last={type:Ha.name,
start:h.start,end:h.start,loc:h.loc};return h};jj.prototype.dummyIdent=function(){var c=this.dummyNode("Identifier");c.name="\u2716";return c};jj.prototype.dummyString=function(){var c=this.dummyNode("Literal");c.value=c.raw="\u2716";return c};jj.prototype.eat=function(c){return this.tok.type===c?(this.next(),!0):!1};jj.prototype.isContextual=function(c){return this.tok.type===Ha.name&&this.tok.value===c};jj.prototype.eatContextual=function(c){return this.tok.value===c&&this.eat(Ha.name)};jj.prototype.canInsertSemicolon=
function(){return this.tok.type===Ha.eof||this.tok.type===Ha.braceR||Kp.test(this.input.slice(this.last.end,this.tok.start))};jj.prototype.semicolon=function(){return this.eat(Ha.semi)};jj.prototype.expect=function(c){if(this.eat(c))return!0;for(var h=1;2>=h;h++)if(this.lookAhead(h).type===c){for(c=0;c<h;c++)this.next();return!0}};jj.prototype.pushCx=function(){this.context.push(this.curIndent)};jj.prototype.popCx=function(){this.curIndent=this.context.pop()};jj.prototype.lineEnd=function(c){for(;c<
this.input.length&&!cp(this.input.charCodeAt(c));)++c;return c};jj.prototype.indentationAfter=function(c){for(var h=0;;++c){var d=this.input.charCodeAt(c);if(32===d)++h;else if(9===d)h+=this.options.tabSize;else return h}};jj.prototype.closes=function(c,h,d,k){return this.tok.type===c||this.tok.type===Ha.eof?!0:d!==this.curLineStart&&this.curIndent<h&&this.tokenStartsLine()&&(!k||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<h)};jj.prototype.tokenStartsLine=function(){for(var c=
this.tok.start-1;c>=this.curLineStart;--c){var h=this.input.charCodeAt(c);if(9!==h&&32!==h)return!1}return!0};jj.prototype.extend=function(c,h){this[c]=h(this[c])};jj.prototype.parse=function(){this.next();return this.parseTopLevel()};jj.extend=function(){for(var c=[],h=arguments.length;h--;)c[h]=arguments[h];h=this;for(var d=0;d<c.length;d++)h=c[d](h);return h};jj.parse=function(c,h){return(new this(c,h)).parse()};jj.BaseParser=Hl;var DJ=jj.prototype;DJ.next=function(){this.last=this.tok;this.tok=
this.ahead.length?this.ahead.shift():this.readToken();if(this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}};DJ.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===Ha.dot&&"."===this.input.substr(this.toks.end,1)&&6<=this.options.ecmaVersion&&(this.toks.end++,this.toks.type=Ha.ellipsis),new CJ(this.toks)}catch(k){if(!(k instanceof
SyntaxError))throw k;var c=k.message,h=k.raisedAt,d=!0;if(/unterminated/i.test(c))if(h=this.lineEnd(k.pos+1),/string/.test(c))d={start:k.pos,end:h,type:Ha.string,value:this.input.slice(k.pos+1,h)};else if(/regular expr/i.test(c)){d=this.input.slice(k.pos,h);try{d=new RegExp(d)}catch(n){}d={start:k.pos,end:h,type:Ha.regexp,value:d}}else d=/template/.test(c)?{start:k.pos,end:h,type:Ha.template,value:this.input.slice(k.pos,h)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(c))for(;h<
this.input.length&&!Ld(this.input.charCodeAt(h));)++h;else if(/character escape|expected hexadecimal/i.test(c))for(;h<this.input.length&&(c=this.input.charCodeAt(h++),34!==c&&39!==c&&!cp(c)););else if(/unexpected character/i.test(c))h++,d=!1;else if(/regular expression/i.test(c))d=!0;else throw k;this.resetTo(h);!0===d&&(d={start:h,end:h,type:Ha.name,value:"\u2716"});if(d)return this.options.locations&&(d.loc=new DA(this.toks,uq(this.input,d.start),uq(this.input,d.end))),d}};DJ.resetTo=function(c){this.toks.pos=
c;var h=this.input.charAt(c-1);this.toks.exprAllowed=!h||/[[{(,;:?/*=+\-~!|&%^<>]/.test(h)||/[enwfd]/.test(h)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(c-10,c));if(this.options.locations){this.toks.curLine=1;this.toks.lineStart=ry.lastIndex=0;for(var d;(d=ry.exec(this.input))&&d.index<c;)++this.toks.curLine,this.toks.lineStart=d.index+d[0].length}};DJ.lookAhead=function(c){for(;c>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[c-
1]};var gr=jj.prototype;gr.parseTopLevel=function(){var c=this.startNodeAt(this.options.locations?[0,uq(this.input,0)]:0);for(c.body=[];this.tok.type!==Ha.eof;)c.body.push(this.parseStatement());this.toks.adaptDirectivePrologue(c.body);this.last=this.tok;c.sourceType=this.options.sourceType;return this.finishNode(c,"Program")};gr.parseStatement=function(){var c=this.tok.type,h=this.startNode();if(this.toks.isLet()){c=Ha._var;var d="let"}switch(c){case Ha._break:case Ha._continue:this.next();var k=
c===Ha._break;this.semicolon()||this.canInsertSemicolon()?h.label=null:(h.label=this.tok.type===Ha.name?this.parseIdent():null,this.semicolon());return this.finishNode(h,k?"BreakStatement":"ContinueStatement");case Ha._debugger:return this.next(),this.semicolon(),this.finishNode(h,"DebuggerStatement");case Ha._do:return this.next(),h.body=this.parseStatement(),h.test=this.eat(Ha._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(h,"DoWhileStatement");case Ha._for:this.next();
k=9<=this.options.ecmaVersion&&this.eatContextual("await");this.pushCx();this.expect(Ha.parenL);if(this.tok.type===Ha.semi)return this.parseFor(h,null);if((c=this.toks.isLet())||this.tok.type===Ha._var||this.tok.type===Ha._const)return c=this.parseVar(this.startNode(),!0,c?"let":this.tok.value),1!==c.declarations.length||this.tok.type!==Ha._in&&!this.isContextual("of")?this.parseFor(h,c):(9<=this.options.ecmaVersion&&this.tok.type!==Ha._in&&(h.await=k),this.parseForIn(h,c));c=this.parseExpression(!0);
return this.tok.type===Ha._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==Ha._in&&(h.await=k),this.parseForIn(h,this.toAssignable(c))):this.parseFor(h,c);case Ha._function:return this.next(),this.parseFunction(h,!0);case Ha._if:return this.next(),h.test=this.parseParenExpression(),h.consequent=this.parseStatement(),h.alternate=this.eat(Ha._else)?this.parseStatement():null,this.finishNode(h,"IfStatement");case Ha._return:return this.next(),this.eat(Ha.semi)||this.canInsertSemicolon()?
h.argument=null:(h.argument=this.parseExpression(),this.semicolon()),this.finishNode(h,"ReturnStatement");case Ha._switch:c=this.curIndent;d=this.curLineStart;this.next();h.discriminant=this.parseParenExpression();h.cases=[];this.pushCx();for(this.expect(Ha.braceL);!this.closes(Ha.braceR,c,d,!0);)if(this.tok.type===Ha._case||this.tok.type===Ha._default){var n=this.tok.type===Ha._case;k&&this.finishNode(k,"SwitchCase");h.cases.push(k=this.startNode());k.consequent=[];this.next();k.test=n?this.parseExpression():
null;this.expect(Ha.colon)}else k||(h.cases.push(k=this.startNode()),k.consequent=[],k.test=null),k.consequent.push(this.parseStatement());k&&this.finishNode(k,"SwitchCase");this.popCx();this.eat(Ha.braceR);return this.finishNode(h,"SwitchStatement");case Ha._throw:return this.next(),h.argument=this.parseExpression(),this.semicolon(),this.finishNode(h,"ThrowStatement");case Ha._try:return this.next(),h.block=this.parseBlock(),h.handler=null,this.tok.type===Ha._catch&&(k=this.startNode(),this.next(),
this.eat(Ha.parenL)?(k.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(Ha.parenR)):k.param=null,k.body=this.parseBlock(),h.handler=this.finishNode(k,"CatchClause")),h.finalizer=this.eat(Ha._finally)?this.parseBlock():null,h.handler||h.finalizer?this.finishNode(h,"TryStatement"):h.block;case Ha._var:case Ha._const:return this.parseVar(h,!1,d||this.tok.value);case Ha._while:return this.next(),h.test=this.parseParenExpression(),h.body=this.parseStatement(),this.finishNode(h,"WhileStatement");
case Ha._with:return this.next(),h.object=this.parseParenExpression(),h.body=this.parseStatement(),this.finishNode(h,"WithStatement");case Ha.braceL:return this.parseBlock();case Ha.semi:return this.next(),this.finishNode(h,"EmptyStatement");case Ha._class:return this.parseClass(!0);case Ha._import:return 10<this.options.ecmaVersion&&(k=this.lookAhead(1).type,k===Ha.parenL||k===Ha.dot)?(h.expression=this.parseExpression(),this.semicolon(),this.finishNode(h,"ExpressionStatement")):this.parseImport();
case Ha._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(h,!0,!0);k=this.parseExpression();if(Ek(k))return this.next(),this.tok.type===Ha.eof?this.finishNode(h,"EmptyStatement"):this.parseStatement();if(c===Ha.name&&"Identifier"===k.type&&this.eat(Ha.colon))return h.body=this.parseStatement(),h.label=k,this.finishNode(h,"LabeledStatement");h.expression=k;this.semicolon();return this.finishNode(h,"ExpressionStatement")}};gr.parseBlock=
function(){var c=this.startNode();this.pushCx();this.expect(Ha.braceL);var h=this.curIndent,d=this.curLineStart;for(c.body=[];!this.closes(Ha.braceR,h,d,!0);)c.body.push(this.parseStatement());this.popCx();this.eat(Ha.braceR);return this.finishNode(c,"BlockStatement")};gr.parseFor=function(c,h){c.init=h;c.test=c.update=null;this.eat(Ha.semi)&&this.tok.type!==Ha.semi&&(c.test=this.parseExpression());this.eat(Ha.semi)&&this.tok.type!==Ha.parenR&&(c.update=this.parseExpression());this.popCx();this.expect(Ha.parenR);
c.body=this.parseStatement();return this.finishNode(c,"ForStatement")};gr.parseForIn=function(c,h){var d=this.tok.type===Ha._in?"ForInStatement":"ForOfStatement";this.next();c.left=h;c.right=this.parseExpression();this.popCx();this.expect(Ha.parenR);c.body=this.parseStatement();return this.finishNode(c,d)};gr.parseVar=function(c,h,d){c.kind=d;this.next();c.declarations=[];do d=this.startNode(),d.id=6<=this.options.ecmaVersion?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),d.init=this.eat(Ha.eq)?
this.parseMaybeAssign(h):null,c.declarations.push(this.finishNode(d,"VariableDeclarator"));while(this.eat(Ha.comma));c.declarations.length||(d=this.startNode(),d.id=this.dummyIdent(),c.declarations.push(this.finishNode(d,"VariableDeclarator")));h||this.semicolon();return this.finishNode(c,"VariableDeclaration")};gr.parseClass=function(c){var h=this.startNode();this.next();h.id=this.tok.type===Ha.name?this.parseIdent():!0===c?this.dummyIdent():null;h.superClass=this.eat(Ha._extends)?this.parseExpression():
null;h.body=this.startNode();h.body.body=[];this.pushCx();var d=this.curIndent+1,k=this.curLineStart;this.eat(Ha.braceL);this.curIndent+1<d&&(d=this.curIndent,k=this.curLineStart);for(;!this.closes(Ha.braceR,d,k);)if(!this.semicolon()){var n=this.startNode(),b=void 0;6<=this.options.ecmaVersion&&(n.static=!1,b=this.eat(Ha.star));this.parsePropertyName(n);if(Ek(n.key))Ek(this.parseMaybeAssign())&&this.next(),this.eat(Ha.comma);else{"Identifier"!==n.key.type||n.computed||"static"!==n.key.name||this.tok.type===
Ha.parenL||this.tok.type===Ha.braceL?n.static=!1:(n.static=!0,b=this.eat(Ha.star),this.parsePropertyName(n));if(n.computed||"Identifier"!==n.key.type||"async"!==n.key.name||this.tok.type===Ha.parenL||this.canInsertSemicolon())var e=!1;else e=!0,b=9<=this.options.ecmaVersion&&this.eat(Ha.star),this.parsePropertyName(n);5<=this.options.ecmaVersion&&"Identifier"===n.key.type&&!n.computed&&("get"===n.key.name||"set"===n.key.name)&&this.tok.type!==Ha.parenL&&this.tok.type!==Ha.braceL?(n.kind=n.key.name,
this.parsePropertyName(n),n.value=this.parseMethod(!1)):(n.kind=n.computed||n.static||b||e||!("Identifier"===n.key.type&&"constructor"===n.key.name||"Literal"===n.key.type&&"constructor"===n.key.value)?"method":"constructor",n.value=this.parseMethod(b,e));h.body.body.push(this.finishNode(n,"MethodDefinition"))}}this.popCx();this.eat(Ha.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));this.semicolon();this.finishNode(h.body,"ClassBody");return this.finishNode(h,
c?"ClassDeclaration":"ClassExpression")};gr.parseFunction=function(c,h,d){var k=this.inAsync,n=this.inFunction;this.initFunction(c);6<=this.options.ecmaVersion&&(c.generator=this.eat(Ha.star));8<=this.options.ecmaVersion&&(c.async=!!d);this.tok.type===Ha.name?c.id=this.parseIdent():!0===h&&(c.id=this.dummyIdent());this.inAsync=c.async;this.inFunction=!0;c.params=this.parseFunctionParams();c.body=this.parseBlock();this.toks.adaptDirectivePrologue(c.body.body);this.inAsync=k;this.inFunction=n;return this.finishNode(c,
h?"FunctionDeclaration":"FunctionExpression")};gr.parseExport=function(){var c=this.startNode();this.next();if(this.eat(Ha.star))return 11<=this.options.ecmaVersion&&(this.eatContextual("as")?c.exported=this.parseExprAtom():c.exported=null),c.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(c,"ExportAllDeclaration");if(this.eat(Ha._default)){var h;if(this.tok.type===Ha._function||(h=this.toks.isAsyncFunction())){var d=this.startNode();this.next();h&&this.next();
c.declaration=this.parseFunction(d,"nullableID",h)}else this.tok.type===Ha._class?c.declaration=this.parseClass("nullableID"):(c.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(c,"ExportDefaultDeclaration")}this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(c.declaration=this.parseStatement(),c.specifiers=[],c.source=null):(c.declaration=null,c.specifiers=this.parseExportSpecifierList(),c.source=this.eatContextual("from")?this.parseExprAtom():null,
this.semicolon());return this.finishNode(c,"ExportNamedDeclaration")};gr.parseImport=function(){var c=this.startNode();this.next();if(this.tok.type===Ha.string)c.specifiers=[],c.source=this.parseExprAtom();else{if(this.tok.type===Ha.name&&"from"!==this.tok.value){var h=this.startNode();h.local=this.parseIdent();this.finishNode(h,"ImportDefaultSpecifier");this.eat(Ha.comma)}c.specifiers=this.parseImportSpecifiers();c.source=this.eatContextual("from")&&this.tok.type===Ha.string?this.parseExprAtom():
this.dummyString();h&&c.specifiers.unshift(h)}this.semicolon();return this.finishNode(c,"ImportDeclaration")};gr.parseImportSpecifiers=function(){var c=[];if(this.tok.type===Ha.star){var h=this.startNode();this.next();h.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent();c.push(this.finishNode(h,"ImportNamespaceSpecifier"))}else{h=this.curIndent;var d=this.curLineStart,k=this.nextLineStart;this.pushCx();this.eat(Ha.braceL);this.curLineStart>k&&(k=this.curLineStart);for(;!this.closes(Ha.braceR,
h+(this.curLineStart<=k?1:0),d);){var n=this.startNode();if(this.eat(Ha.star))n.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(n,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;n.imported=this.parseIdent();if(Ek(n.imported))break;n.local=this.eatContextual("as")?this.parseIdent():n.imported;this.finishNode(n,"ImportSpecifier")}c.push(n);this.eat(Ha.comma)}this.eat(Ha.braceR);this.popCx()}return c};gr.parseExportSpecifierList=function(){var c=
[],h=this.curIndent,d=this.curLineStart,k=this.nextLineStart;this.pushCx();this.eat(Ha.braceL);this.curLineStart>k&&(k=this.curLineStart);for(;!this.closes(Ha.braceR,h+(this.curLineStart<=k?1:0),d)&&!this.isContextual("from");){var n=this.startNode();n.local=this.parseIdent();if(Ek(n.local))break;n.exported=this.eatContextual("as")?this.parseIdent():n.local;this.finishNode(n,"ExportSpecifier");c.push(n);this.eat(Ha.comma)}this.eat(Ha.braceR);this.popCx();return c};var kj=jj.prototype;kj.checkLVal=
function(c){if(!c)return c;switch(c.type){case "Identifier":case "MemberExpression":return c;case "ParenthesizedExpression":return c.expression=this.checkLVal(c.expression),c;default:return this.dummyIdent()}};kj.parseExpression=function(c){var h=this.storeCurrentPos(),d=this.parseMaybeAssign(c);if(this.tok.type===Ha.comma){h=this.startNodeAt(h);for(h.expressions=[d];this.eat(Ha.comma);)h.expressions.push(this.parseMaybeAssign(c));return this.finishNode(h,"SequenceExpression")}return d};kj.parseParenExpression=
function(){this.pushCx();this.expect(Ha.parenL);var c=this.parseExpression();this.popCx();this.expect(Ha.parenR);return c};kj.parseMaybeAssign=function(c){if(this.toks.isContextual("yield"))return c=this.startNode(),this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!==Ha.star&&!this.tok.type.startsExpr?(c.delegate=!1,c.argument=null):(c.delegate=this.eat(Ha.star),c.argument=this.parseMaybeAssign()),this.finishNode(c,"YieldExpression");var h=this.storeCurrentPos(),d=this.parseMaybeConditional(c);
return this.tok.type.isAssign?(h=this.startNodeAt(h),h.operator=this.tok.value,h.left=this.tok.type===Ha.eq?this.toAssignable(d):this.checkLVal(d),this.next(),h.right=this.parseMaybeAssign(c),this.finishNode(h,"AssignmentExpression")):d};kj.parseMaybeConditional=function(c){var h=this.storeCurrentPos(),d=this.parseExprOps(c);return this.eat(Ha.question)?(h=this.startNodeAt(h),h.test=d,h.consequent=this.parseMaybeAssign(),h.alternate=this.expect(Ha.colon)?this.parseMaybeAssign(c):this.dummyIdent(),
this.finishNode(h,"ConditionalExpression")):d};kj.parseExprOps=function(c){var h=this.storeCurrentPos(),d=this.curIndent,k=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),h,-1,c,d,k)};kj.parseExprOp=function(c,h,d,k,n,b){if(this.curLineStart!==b&&this.curIndent<n&&this.tokenStartsLine())return c;var e=this.tok.type.binop;if(null!=e&&(!k||this.tok.type!==Ha._in)&&e>d){var l=this.startNodeAt(h);l.left=c;l.operator=this.tok.value;this.next();this.curLineStart!==b&&this.curIndent<n&&
this.tokenStartsLine()?l.right=this.dummyIdent():(c=this.storeCurrentPos(),l.right=this.parseExprOp(this.parseMaybeUnary(!1),c,e,k,n,b));this.finishNode(l,/&&|\|\||\?\?/.test(l.operator)?"LogicalExpression":"BinaryExpression");return this.parseExprOp(l,h,d,k,n,b)}return c};kj.parseMaybeUnary=function(c){var h=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)){var d=this.parseAwait();c=!0}else if(this.tok.type.prefix){d=
this.startNode();var k=this.tok.type===Ha.incDec;k||(c=!0);d.operator=this.tok.value;d.prefix=!0;this.next();d.argument=this.parseMaybeUnary(!0);k&&(d.argument=this.checkLVal(d.argument));d=this.finishNode(d,k?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===Ha.ellipsis)d=this.startNode(),this.next(),d.argument=this.parseMaybeUnary(c),d=this.finishNode(d,"SpreadElement");else for(d=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();)k=this.startNodeAt(h),k.operator=
this.tok.value,k.prefix=!1,k.argument=this.checkLVal(d),this.next(),d=this.finishNode(k,"UpdateExpression");return!c&&this.eat(Ha.starstar)?(c=this.startNodeAt(h),c.operator="**",c.left=d,c.right=this.parseMaybeUnary(!1),this.finishNode(c,"BinaryExpression")):d};kj.parseExprSubscripts=function(){var c=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),c,!1,this.curIndent,this.curLineStart)};kj.parseSubscripts=function(c,h,d,k,n){for(var b=11<=this.options.ecmaVersion,e=!1;;){if(this.curLineStart!==
n&&this.curIndent<=k&&this.tokenStartsLine())if(this.tok.type===Ha.dot&&this.curIndent===k)--k;else break;var l="Identifier"===c.type&&"async"===c.name&&!this.canInsertSemicolon(),a=b&&this.eat(Ha.questionDot);a&&(e=!0);if(a&&this.tok.type!==Ha.parenL&&this.tok.type!==Ha.bracketL&&this.tok.type!==Ha.backQuote||this.eat(Ha.dot)){var f=this.startNodeAt(h);f.object=c;this.curLineStart!==n&&this.curIndent<=k&&this.tokenStartsLine()?f.property=this.dummyIdent():f.property=this.parsePropertyAccessor()||
this.dummyIdent();f.computed=!1;b&&(f.optional=a);c=this.finishNode(f,"MemberExpression")}else if(this.tok.type===Ha.bracketL)this.pushCx(),this.next(),f=this.startNodeAt(h),f.object=c,f.property=this.parseExpression(),f.computed=!0,b&&(f.optional=a),this.popCx(),this.expect(Ha.bracketR),c=this.finishNode(f,"MemberExpression");else if(d||this.tok.type!==Ha.parenL)if(this.tok.type===Ha.backQuote)a=this.startNodeAt(h),a.tag=c,a.quasi=this.parseTemplate(),c=this.finishNode(a,"TaggedTemplateExpression");
else break;else{f=this.parseExprList(Ha.parenR);if(l&&this.eat(Ha.arrow))return this.parseArrowExpression(this.startNodeAt(h),f,!0);l=this.startNodeAt(h);l.callee=c;l.arguments=f;b&&(l.optional=a);c=this.finishNode(l,"CallExpression")}}e&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ChainExpression"));return c};kj.parseExprAtom=function(){switch(this.tok.type){case Ha._this:case Ha._super:var c=this.tok.type===Ha._this?"ThisExpression":"Super";var h=this.startNode();this.next();return this.finishNode(h,
c);case Ha.name:h=this.storeCurrentPos();c=this.parseIdent();var d=!1;if("async"===c.name&&!this.canInsertSemicolon()){if(this.eat(Ha._function))return this.parseFunction(this.startNodeAt(h),!1,!0);this.tok.type===Ha.name&&(c=this.parseIdent(),d=!0)}return this.eat(Ha.arrow)?this.parseArrowExpression(this.startNodeAt(h),[c],d):c;case Ha.regexp:return h=this.startNode(),c=this.tok.value,h.regex={pattern:c.pattern,flags:c.flags},h.value=c.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),
this.finishNode(h,"Literal");case Ha.num:case Ha.string:return h=this.startNode(),h.value=this.tok.value,h.raw=this.input.slice(this.tok.start,this.tok.end),this.tok.type===Ha.num&&110===h.raw.charCodeAt(h.raw.length-1)&&(h.bigint=h.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(h,"Literal");case Ha._null:case Ha._true:case Ha._false:return h=this.startNode(),h.value=this.tok.type===Ha._null?null:this.tok.type===Ha._true,h.raw=this.tok.type.keyword,this.next(),this.finishNode(h,"Literal");
case Ha.parenL:h=this.storeCurrentPos();this.next();c=this.parseExpression();this.expect(Ha.parenR);if(this.eat(Ha.arrow))return c=c.expressions||[c],c.length&&Ek(c[c.length-1])&&c.pop(),this.parseArrowExpression(this.startNodeAt(h),c);this.options.preserveParens&&(h=this.startNodeAt(h),h.expression=c,c=this.finishNode(h,"ParenthesizedExpression"));return c;case Ha.bracketL:return h=this.startNode(),h.elements=this.parseExprList(Ha.bracketR,!0),this.finishNode(h,"ArrayExpression");case Ha.braceL:return this.parseObj();
case Ha._class:return this.parseClass(!1);case Ha._function:return h=this.startNode(),this.next(),this.parseFunction(h,!1);case Ha._new:return this.parseNew();case Ha.backQuote:return this.parseTemplate();case Ha._import:return 11<=this.options.ecmaVersion?this.parseExprImport():this.dummyIdent();default:return this.dummyIdent()}};kj.parseExprImport=function(){var c=this.startNode(),h=this.parseIdent(!0);switch(this.tok.type){case Ha.parenL:return this.parseDynamicImport(c);case Ha.dot:return c.meta=
h,this.parseImportMeta(c);default:return c.name="import",this.finishNode(c,"Identifier")}};kj.parseDynamicImport=function(c){c.source=this.parseExprList(Ha.parenR)[0]||this.dummyString();return this.finishNode(c,"ImportExpression")};kj.parseImportMeta=function(c){this.next();c.property=this.parseIdent(!0);return this.finishNode(c,"MetaProperty")};kj.parseNew=function(){var c=this.startNode(),h=this.curIndent,d=this.curLineStart,k=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(Ha.dot))return c.meta=
k,c.property=this.parseIdent(!0),this.finishNode(c,"MetaProperty");k=this.storeCurrentPos();c.callee=this.parseSubscripts(this.parseExprAtom(),k,!0,h,d);c.arguments=this.tok.type===Ha.parenL?this.parseExprList(Ha.parenR):[];return this.finishNode(c,"NewExpression")};kj.parseTemplateElement=function(){var c=this.startNode();c.value=this.tok.type===Ha.invalidTemplate?{raw:this.tok.value,cooked:null}:{raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value};this.next();
c.tail=this.tok.type===Ha.backQuote;return this.finishNode(c,"TemplateElement")};kj.parseTemplate=function(){var c=this.startNode();this.next();c.expressions=[];var h=this.parseTemplateElement();for(c.quasis=[h];!h.tail;)this.next(),c.expressions.push(this.parseExpression()),this.expect(Ha.braceR)?h=this.parseTemplateElement():(h=this.startNode(),h.value={cooked:"",raw:""},h.tail=!0,this.finishNode(h,"TemplateElement")),c.quasis.push(h);this.expect(Ha.backQuote);return this.finishNode(c,"TemplateLiteral")};
kj.parseObj=function(){var c=this.startNode();c.properties=[];this.pushCx();var h=this.curIndent+1,d=this.curLineStart;this.eat(Ha.braceL);this.curIndent+1<h&&(h=this.curIndent,d=this.curLineStart);for(;!this.closes(Ha.braceR,h,d);){var k=this.startNode(),n=void 0,b=void 0;if(9<=this.options.ecmaVersion&&this.eat(Ha.ellipsis))k.argument=this.parseMaybeAssign(),c.properties.push(this.finishNode(k,"SpreadElement"));else{6<=this.options.ecmaVersion&&(b=this.storeCurrentPos(),k.method=!1,k.shorthand=
!1,n=this.eat(Ha.star));this.parsePropertyName(k);if(this.toks.isAsyncProp(k)){var e=!0;n=9<=this.options.ecmaVersion&&this.eat(Ha.star);this.parsePropertyName(k)}else e=!1;Ek(k.key)?Ek(this.parseMaybeAssign())&&this.next():(this.eat(Ha.colon)?(k.kind="init",k.value=this.parseMaybeAssign()):6<=this.options.ecmaVersion&&(this.tok.type===Ha.parenL||this.tok.type===Ha.braceL)?(k.kind="init",k.method=!0,k.value=this.parseMethod(n,e)):5<=this.options.ecmaVersion&&"Identifier"===k.key.type&&!k.computed&&
("get"===k.key.name||"set"===k.key.name)&&this.tok.type!==Ha.comma&&this.tok.type!==Ha.braceR&&this.tok.type!==Ha.eq?(k.kind=k.key.name,this.parsePropertyName(k),k.value=this.parseMethod(!1)):(k.kind="init",6<=this.options.ecmaVersion?this.eat(Ha.eq)?(n=this.startNodeAt(b),n.operator="=",n.left=k.key,n.right=this.parseMaybeAssign(),k.value=this.finishNode(n,"AssignmentExpression")):k.value=k.key:k.value=this.dummyIdent(),k.shorthand=!0),c.properties.push(this.finishNode(k,"Property")))}this.eat(Ha.comma)}this.popCx();
this.eat(Ha.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return this.finishNode(c,"ObjectExpression")};kj.parsePropertyName=function(c){if(6<=this.options.ecmaVersion){if(this.eat(Ha.bracketL)){c.computed=!0;c.key=this.parseExpression();this.expect(Ha.bracketR);return}c.computed=!1}var h=this.tok.type===Ha.num||this.tok.type===Ha.string?this.parseExprAtom():this.parseIdent();c.key=h||this.dummyIdent()};kj.parsePropertyAccessor=function(){if(this.tok.type===
Ha.name||this.tok.type.keyword)return this.parseIdent()};kj.parseIdent=function(){var c=this.tok.type===Ha.name?this.tok.value:this.tok.type.keyword;if(!c)return this.dummyIdent();var h=this.startNode();this.next();h.name=c;return this.finishNode(h,"Identifier")};kj.initFunction=function(c){c.id=null;c.params=[];6<=this.options.ecmaVersion&&(c.generator=!1,c.expression=!1);8<=this.options.ecmaVersion&&(c.async=!1)};kj.toAssignable=function(c,h){if(c&&"Identifier"!==c.type&&("MemberExpression"!==c.type||
h))if("ParenthesizedExpression"===c.type)this.toAssignable(c.expression,h);else{if(6>this.options.ecmaVersion)return this.dummyIdent();if("ObjectExpression"===c.type){c.type="ObjectPattern";for(var d=0,k=c.properties;d<k.length;d+=1)this.toAssignable(k[d],h)}else if("ArrayExpression"===c.type)c.type="ArrayPattern",this.toAssignableList(c.elements,h);else if("Property"===c.type)this.toAssignable(c.value,h);else if("SpreadElement"===c.type)c.type="RestElement",this.toAssignable(c.argument,h);else if("AssignmentExpression"===
c.type)c.type="AssignmentPattern",delete c.operator;else return this.dummyIdent()}return c};kj.toAssignableList=function(c,h){for(var d=0;d<c.length;d+=1)this.toAssignable(c[d],h);return c};kj.parseFunctionParams=function(c){c=this.parseExprList(Ha.parenR);return this.toAssignableList(c,!0)};kj.parseMethod=function(c,h){var d=this.startNode(),k=this.inAsync,n=this.inFunction;this.initFunction(d);6<=this.options.ecmaVersion&&(d.generator=!!c);8<=this.options.ecmaVersion&&(d.async=!!h);this.inAsync=
d.async;this.inFunction=!0;d.params=this.parseFunctionParams();d.body=this.parseBlock();this.toks.adaptDirectivePrologue(d.body.body);this.inAsync=k;this.inFunction=n;return this.finishNode(d,"FunctionExpression")};kj.parseArrowExpression=function(c,h,d){var k=this.inAsync,n=this.inFunction;this.initFunction(c);8<=this.options.ecmaVersion&&(c.async=!!d);this.inAsync=c.async;this.inFunction=!0;c.params=this.toAssignableList(h,!0);c.expression=this.tok.type!==Ha.braceL;c.expression?c.body=this.parseMaybeAssign():
(c.body=this.parseBlock(),this.toks.adaptDirectivePrologue(c.body.body));this.inAsync=k;this.inFunction=n;return this.finishNode(c,"ArrowFunctionExpression")};kj.parseExprList=function(c,h){this.pushCx();var d=this.curIndent,k=this.curLineStart,n=[];for(this.next();!this.closes(c,d+1,k);)if(this.eat(Ha.comma))n.push(h?null:this.dummyIdent());else{var b=this.parseMaybeAssign();if(Ek(b)){if(this.closes(c,d,k))break;this.next()}else n.push(b);this.eat(Ha.comma)}this.popCx();this.eat(c)||(this.last.end=
this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start));return n};kj.parseAwait=function(){var c=this.startNode();this.next();c.argument=this.parseMaybeUnary();return this.finishNode(c,"AwaitExpression")};kG.tabSize=4;var EJ=Object.freeze({__proto__:null,LooseParser:jj,isDummy:Ek,parse:function(c,h){return jj.parse(c,h)}}),pe=lively.FreezerRuntime.recorderFor("lively.ast/lib/acorn-extension.js");pe.forEachNode=function(c,h,d,k){k=k||{};var n=k.traversal||"preorder",b=pe.obj.clone(k.visitors?
k.visitors:pe.walk.make(pe.custom.visitors.withMemberExpression)),e="preorder"===n?function(l,a,f,m,q){h(f,d,m,a);return l(f,m+1,q)}:function(l,a,f,m,q){l=l(f,m+1,q);h(f,d,m,a);return l};Object.keys(b).forEach(function(l){var a=b[l];b[l]=function(f,m,q){return e(a,l,f,m,q)}});pe.walk.recursive(c,0,null,b);return c};pe.matchNodes=function(c,h,d,k){return pe.forEachNode(c,function(n,b,e,l){if(h[n.type])h[n.type](n,b,e,l)},d,k)};pe.findNodesIncluding=ze;pe.withParentInfo=function(c,h,d){function k(a){var f=
{id:pe.string.newUUID(),parentScope:a,containingScopes:[]};a&&a.containingScopes.push(f);return f}d=d||{};var n=pe.walk.make({Function:function(a,f,m){f&&f.scope&&(f.scope=k(f.scope));m(a.body,f,"ScopeBody")},VariableDeclarator:function(a,f,m){a.init&&m(a.init,f,"Expression")},VariableDeclaration:function(a,f,m){for(var q=0;q<a.declarations.length;++q){var r=a.declarations[q];r&&m(r,f,"VariableDeclarator")}},ObjectExpression:function(a,f,m){for(var q=0;q<a.properties.length;++q){var r=a.properties[q];
m(r.key,f,"Expression");m(r.value,f,"Expression")}},MemberExpression:function(a,f,m){m(a.object,f,"Expression");m(a.property,f,"Expression")}},pe.walk.base),b,e=[];pe.forEachNode(c,function(a){pe.arr.withoutAll(Object.keys(a),["end","start","type","source","raw"]).forEach(function(f){if(!a.__lookupGetter__(f)){var m=a[f];a.__defineGetter__(f,function(){b=f;return m});e.push([a,f,a[f]])}})},null,{visitors:n});var l=[];Object.keys(n).forEach(function(a){var f=n[a];n[a]=function(m,q,r){return a===m.type||
d.visitAllNodes?(l.push(h.call(null,m,{scope:q.scope,depth:q.depth,parent:q.parent,type:a,propertyInParent:b})),f(m,{scope:q.scope,parent:m,depth:q.depth+1},r)):f(m,q,r)}});pe.walk.recursive(c,{scope:k(),parent:null,propertyInParent:"",depth:0},null,n);e.forEach(function(a){delete a[0][a[1]];a[0][a[1]]=a[2]});return l};pe.copy=Ga;pe.findSiblings=ol;pe.findNodeByAstIndex=dp;pe.findStatementOfNode=ut;pe.addAstIndex=hv;pe.obj=lf;pe.arr=Qe;pe.string=Hg;pe.Path=Cg;pe.withMozillaAstDo=Iz;pe.GLOBAL="undefined"!==
typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;pe.acorn=lu;pe.walk=us;pe.loose=EJ;pe.custom={};pe.custom.forEachNode=pe.forEachNode;pe.custom.matchNodes=pe.matchNodes;pe.custom.findNodesIncluding=pe.findNodesIncluding;pe.custom.withParentInfo=pe.withParentInfo;pe.custom.copy=pe.copy;pe.custom.findSiblings=pe.findSiblings;pe.custom.findNodeByAstIndex=pe.findNodeByAstIndex;pe.custom.findStatementOfNode=pe.findStatementOfNode;pe.custom.addAstIndex=pe.addAstIndex;
var Lx=wa("E",pe.custom);pe.walk=us;pe.walk=us;pe.loose=EJ;pe.loose=EJ;pe.acorn=lu;pe.acorn=lu;pe.custom=Lx;pe.custom=Lx;pe.findStatementOfNode=ut;pe.findStatementOfNode=ut;pe.addAstIndex=hv;pe.addAstIndex=hv;pe.findNodesIncluding=ze;pe.findNodesIncluding=ze;pe.findSiblings=ol;pe.findSiblings=ol;pe.findNodeByAstIndex=dp;pe.findNodeByAstIndex=dp;pe.copy=Ga;pe.copy=Ga;pe.custom.visitors={stopAtFunctions:pe.walk.make(Object.assign({Function:function(){}},pe.walk.base)),withMemberExpression:pe.walk.make({MemberExpression:function(c,
h,d){d(c.object,h,"Expression");d(c.property,h,"Expression")}},pe.walk.base)};var ji=lively.FreezerRuntime.recorderFor("lively.ast/lib/visitors.js");ji.blockInliner=function(c){if(Array.isArray(c.body))for(var h=c.body.length-1;0<=h;h--){var d=c.body[h];"BlockStatement"===d.type&&d[ji.canBeInlinedSym]&&c.body.splice.apply(c.body,[h,1].concat(d.body))}return c};ji.block=function(c){return{type:"BlockStatement",body:c}};ji.Visitor=Gd;var xs=function(){return ji.Visitor.apply(this,arguments)||this};
$jscomp.inherits(xs,ji.Visitor);xs.prototype.accept=function(c,h,d){this.doFunc(c,h,d);return ji.Visitor.prototype.accept.call(this,c,h,d)};xs.run=function(c,h,d){var k=new this;k.doFunc=h;k.accept(c,d,[]);return d};wa("A",xs);ji.AllNodesVisitor=xs;var Jz=function(){return ji.Visitor.apply(this,arguments)||this};$jscomp.inherits(Jz,ji.Visitor);Jz.prototype.accept=function(c,h,d){switch(c.type){case "ArrowFunctionExpression":return c;case "FunctionExpression":return c;case "FunctionDeclaration":return h.unshift({node:c,
path:d}),c;default:return ji.Visitor.prototype.accept.call(this,c,h,d)}};Jz.run=function(c){var h=[];(new this).accept(c,h,[]);return h};ji.FindToplevelFuncDeclVisitor=Jz;ji.canBeInlinedSym=Symbol("canBeInlined");var hr=function(){return ji.Visitor.apply(this,arguments)||this};$jscomp.inherits(hr,ji.Visitor);hr.prototype.accept=function(c,h,d){c=this.replacer(ji.Visitor.prototype.accept.call(this,c,h,d));h={};return Array.isArray(c)?1===c.length?c[0]:Object.assign(ji.block(c),(h[ji.canBeInlinedSym]=
!0,h)):c};hr.prototype.visitBlockStatement=function(c,h,d){return ji.blockInliner(ji.Visitor.prototype.visitBlockStatement.call(this,c,h,d))};hr.prototype.visitProgram=function(c,h,d){return ji.blockInliner(ji.Visitor.prototype.visitProgram.call(this,c,h,d))};hr.run=function(c,h){var d=new this;d.replacer=h;return d.accept(c,null,[])};ji.ReplaceManyVisitor=hr;var ys=function(){return ji.Visitor.apply(this,arguments)||this};$jscomp.inherits(ys,ji.Visitor);ys.prototype.accept=function(c,h,d){return this.replacer(ji.Visitor.prototype.accept.call(this,
c,h,d),d)};ys.run=function(c,h){var d=new this;d.replacer=h;return d.accept(c,null,[])};ji.ReplaceVisitor=ys;ji.AllNodesVisitor=xs;ji.AllNodesVisitor=xs;ji.FindToplevelFuncDeclVisitor=Jz;ji.FindToplevelFuncDeclVisitor=Jz;ji.ReplaceVisitor=ys;ji.ReplaceVisitor=ys;ji.ReplaceManyVisitor=hr;ji.ReplaceManyVisitor=hr;var Fg=lively.FreezerRuntime.recorderFor("lively.ast/lib/parser.js");Fg.addSource=sy;Fg.nodesAt=function(c,h){h="string"===typeof h?this.parse(h):h;return Fg.findNodesIncluding(h,c)};Fg.parseFunction=
xq;Fg.fuzzyParse=en;Fg.acornParseAsyncAware=function(c,h){if(h.onComment){var d=h.onComment;h.onComment=function(b,e,l,a,f,m){return d.call(this,b,e,l-14,a-14,f,m)}}var k=Fg.acorn.parse("async () => {\n"+c+"\n}",h);if(k.loc)var n=k.loc.constructor;k={body:k.body[0].expression.body.body,sourceType:"module",type:"Program"};Fg.AllNodesVisitor.run(k,function(b,e,l){if(!b._positionFixed){b._positionFixed=!0;if(b.start||0===b.start)b.start-=14,b.end-=14;b.loc&&n&&(l=b.loc,e=l.start,l=l.end,b.loc=new n(h,
{column:e.column,line:e.line-1},{column:l.column,line:l.line-1}));h.addSource&&!b.source&&(b.source=c.slice(b.start,b.end))}});k.start=k.body[0].start;k.end=Fg.arr.last(k.body).end;h.addSource&&(k.source=c);k.body[0].loc&&n&&(k.loc=new n(h,k.body[0].loc.start,Fg.arr.last(k.body).loc.end));return k};Fg.parse=sg;Fg.arr=Qe;Fg.acorn=lu;Fg.loose=EJ;Fg.walk=us;Fg.addAstIndex=hv;Fg.findNodesIncluding=ze;Fg.custom=Lx;Fg.AllNodesVisitor=xs;Fg.walk=us;Fg.walk=us;Fg.parse=sg;Fg.parse=sg;Fg.parseFunction=xq;
Fg.parseFunction=xq;Fg.fuzzyParse=en;Fg.fuzzyParse=en;Fg.addSource=sy;Fg.addSource=sy;Fg.custom.addSource=Fg.addSource;var lg=lively.FreezerRuntime.recorderFor("lively.ast/lib/mozilla-ast-visitor-interface.js");lg.string=Hg;lg.Path=Cg;lg.BaseVisitor=Gd;lg.PrinterVisitor=aC;lg.ComparisonVisitor=Lj;lg.stringify=rg;lg.addAstIndex=hv;lg.parse=sg;lg.addSource=sy;lg.methods={withMozillaAstDo:function(c,h,d){var k=new lg.BaseVisitor,n=k.accept;k.accept=function(b,e,l){h=d(function(){n.call(k,b,e,l)},b,e,
l);return b};k.accept(c,h,[]);return h},printAst:function(c,h){h=h||{};var d=h.printSource||!1,k=h.printPositions||!1,n=h.printIndex||!1,b=[];if("string"===typeof c){var e=c;c=lg.parse(c)}else e=h.source||c.source;d&&!c.source&&(e||(e=lg.stringify(c),c=lg.parse(e)),lg.addSource(c,e));(new lg.PrinterVisitor).accept(c,{index:0,tree:b},[]);return lg.string.printTree(b[0],function(l){var a=l.path+":"+l.node.type,f=[];n&&f.push(l.index);k&&f.push(l.node.start+"-"+l.node.end);d&&(l=l.node.source||e.slice(l.node.start,
l.node.end),l=lg.string.print(l.truncate(60).replace(/\n/g,"").replace(/\s+/g," ")),f.push(l));f.length&&(a+="("+f.join(",")+")");return a},function(l){return l.children},"  ")},compareAst:function(c,h){if(!c||!h)throw Error("node"+(c?"1":"2")+" not defined");var d={completePath:[],comparisons:{errors:[]}};(new lg.ComparisonVisitor).accept(c,h,d,[]);return d.comparisons.errors.length?d.comparisons.errors.pluck("msg"):null},pathToNode:function(c,h,d){c.astIndex||lg.addAstIndex(c);d=new lg.BaseVisitor;
var k=null;(d.accept=function(n,b,e,l){if(!k)return b=b.concat(l),n.astIndex===h&&(k={pathString:b.map(function(a){return"string"===typeof a?"."+a:"["+a+"]"}).join(""),path:b,node:n}),this["visit"+n.type](n,b,e,l)}).call(d,c,[],{},[]);return k},rematchAstWithSource:function(c,h,d,k){d=!!d;h=lg.parse(h,d?{locations:!0}:void 0);var n=new lg.BaseVisitor;k&&(h=lg.Path(k).get(h));n.accept=function(b,e,l){l=l||[];var a=l.reduce(function(f,m){return f[m]},c);a.start=b.start;a.end=b.end;d&&(a.loc=b.loc);
return this["visit"+b.type](b,e,l)};n.accept(h)}};lg.withMozillaAstDo=lg.methods.withMozillaAstDo;lg.printAst=lg.methods.printAst;lg.compareAst=lg.methods.compareAst;lg.pathToNode=lg.methods.pathToNode;lg.rematchAstWithSource=lg.methods.rematchAstWithSource;var Iz=lg.withMozillaAstDo,EE=lg.printAst,FE=lg.compareAst,GE=lg.pathToNode,HE=lg.rematchAstWithSource;lg.BaseVisitor=Gd;lg.BaseVisitor=Gd;lg.withMozillaAstDo=Iz;lg.withMozillaAstDo=Iz;lg.printAst=EE;lg.printAst=EE;lg.compareAst=FE;lg.compareAst=
FE;lg.pathToNode=GE;lg.pathToNode=GE;lg.rematchAstWithSource=HE;lg.rematchAstWithSource=HE;var ie=lively.FreezerRuntime.recorderFor("lively.ast/lib/nodes.js");ie.isIdentifier=qo;ie.id=Ij;ie.literal=ep;ie.exprStmt=fn;ie.returnStmt=vt;ie.empty=pl;ie.binaryExpr=Fw;ie.funcExpr=ql;ie.funcCall=mk;ie.varDecl=Kr;ie.member=Lr;ie.memberChain=Gw;ie.assign=ty;ie.block=uy;ie.program=qh;ie.tryStmt=vy;ie.prop=EA;ie.objectLiteral=Mr;ie.ifStmt=FA;ie.forIn=yq;ie.conditional=ro;ie.logical=zq;ie.isIdentifier=qo;ie.isIdentifier=
qo;ie.id=Ij;ie.id=Ij;ie.literal=ep;ie.literal=ep;ie.objectLiteral=Mr;ie.objectLiteral=Mr;ie.prop=EA;ie.prop=EA;ie.exprStmt=fn;ie.exprStmt=fn;ie.returnStmt=vt;ie.returnStmt=vt;ie.empty=pl;ie.empty=pl;ie.binaryExpr=Fw;ie.binaryExpr=Fw;ie.funcExpr=ql;ie.funcExpr=ql;ie.funcCall=mk;ie.funcCall=mk;ie.varDecl=Kr;ie.varDecl=Kr;ie.member=Lr;ie.member=Lr;ie.memberChain=Gw;ie.memberChain=Gw;ie.assign=ty;ie.assign=ty;ie.block=uy;ie.block=uy;ie.program=qh;ie.program=qh;ie.tryStmt=vy;ie.tryStmt=vy;ie.ifStmt=FA;
ie.ifStmt=FA;ie.forIn=yq;ie.forIn=yq;ie.conditional=ro;ie.conditional=ro;ie.logical=zq;ie.logical=zq;ie.identifierRe=/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;var aw=Object.freeze({__proto__:null,isIdentifier:qo,id:Ij,literal:ep,objectLiteral:Mr,prop:EA,exprStmt:fn,returnStmt:vt,empty:pl,binaryExpr:Fw,funcExpr:ql,funcCall:mk,varDecl:Kr,member:Lr,memberChain:Gw,assign:ty,block:uy,program:qh,tryStmt:vy,ifStmt:FA,forIn:yq,conditional:ro,logical:zq}),cd=lively.FreezerRuntime.recorderFor("lively.ast/lib/query.js");
cd.scopes=Hm;cd.nodesAtIndex=Pk;cd.scopesAtIndex=GA;cd.scopeAtIndex=Wl;cd.scopesAtPos=nj;cd.nodesInScopeOf=Hw;cd.declarationsOfScope=Nr;cd.declarationsWithIdsOfScope=function(c){var h=cd.arr.compact(cd.helpers.declIds(c.params).concat(c.catches)),d=[].concat($jscomp.arrayFromIterable(c.node.id&&c.node.id.name?[c.node]:[]),$jscomp.arrayFromIterable(cd.arr.filter(c.funcDecls,function(k){return k.id})),$jscomp.arrayFromIterable(cd.arr.filter(c.classDecls,function(k){return k.id})));return h.map(function(k){return[k,
k]}).concat(d.map(function(k){return[k,k.id]})).concat(cd.helpers.varDecls(c)).concat(c.importSpecifiers.map(function(k){return[cd.statementOf(c.node,k),k]}))};cd._declaredVarNames=Iw;cd._findJsLintGlobalDeclarations=wt;cd.topLevelFuncDecls=Im;cd.resolveReference=xt;cd.resolveReferences=iv;cd.refWithDeclAt=wy;cd.topLevelDeclsAndRefs=Qk;cd.findGlobalVarRefs=Aq;cd.findNodesIncludingLines=HA;cd.__varDeclIdsFor=function(c,h){for(var d=[],k=$jscomp.makeIterator(c.params),n=k.next();!n.done;n=k.next())n=
n.value,n.name===h&&d.push(n);k=$jscomp.makeIterator(c.funcDecls);for(n=k.next();!n.done;n=k.next())n=n.value,n.id&&n.id.name===h&&d.push(n.id);k=$jscomp.makeIterator(c.classDecls);for(n=k.next();!n.done;n=k.next())n=n.value,n.id&&n.id.name===h&&d.push(n.id);k=$jscomp.makeIterator(c.importSpecifiers);for(n=k.next();!n.done;n=k.next())n=n.value,n.name===h&&d.push(n);c=$jscomp.makeIterator(cd.helpers.varDeclIds(c));for(n=c.next();!n.done;n=c.next())n=n.value,n.name===h&&d.push(n);return d};cd.findReferencesAndDeclsInScope=
xy;cd.findDeclarationClosestToIndex=IA;cd.nodesAt=so;cd.statementOf=jv;cd.imports=kv;cd.exports=Jw;cd.arr=Qe;cd.chain=Ri;cd.num=Gk;cd.tree=Yv;cd.fun=Zk;cd.obj=lf;cd.BaseVisitor=Gd;cd.ScopeVisitor=Ni;cd.FindToplevelFuncDeclVisitor=Jz;cd.withMozillaAstDo=Iz;cd.parse=sg;cd.acorn=lu;cd.walk=us;cd.custom=Lx;cd.stringify=rg;cd.helpers={declIds:function(c,h){h=void 0===h?[]:h;for(var d=0;d<c.length;d++){var k=c[d];if(k)if("Identifier"===k.type)h.push(k);else if("RestElement"===k.type)h.push(k.argument);
else if("AssignmentPattern"===k.type)cd.helpers.declIds([k.left],h);else if("ObjectPattern"===k.type)for(var n=0;n<k.properties.length;n++){var b=k.properties[n];cd.helpers.declIds([b.value||b],h)}else"ArrayPattern"===k.type&&cd.helpers.declIds(k.elements,h)}return h},varDecls:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);for(var d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value.declarations);for(var k=d.next();!k.done;k=d.next()){k=k.value;for(var n=$jscomp.makeIterator(cd.helpers.declIds([k.id])),
b=n.next();!b.done;b=n.next())h.push([k,b.value])}}return h},varDeclIds:function(c,h){h=void 0===h?[]:h;c=$jscomp.makeIterator(c.varDecls);for(var d=c.next();!d.done;d=c.next()){d=$jscomp.makeIterator(d.value.declarations);for(var k=d.next();!k.done;k=d.next())cd.helpers.declIds([k.value.id],h)}return h},objPropertiesAsList:function(c,h,d,k){k=void 0===k?[]:k;c=$jscomp.makeIterator(c.properties);for(var n=c.next();!n.done;n=c.next()){n=n.value;var b=n.key.name,e={key:h.concat([b]),value:n.value};
switch(n.value.type){case "ArrayExpression":case "ArrayPattern":d||k.push(e);for(e=0;e<n.value.elements.length;e++)cd.helpers.objPropertiesAsList(n.value.elements[e],h.concat([b,e]),d,k);break;case "ObjectExpression":case "ObjectPattern":d||k.push(e);cd.helpers.objPropertiesAsList(n.value,h.concat([b]),d,k);break;case "AssignmentPattern":d||k.push(e);cd.helpers.objPropertiesAsList(n.left,h.concat([b]),d,k);break;default:k.push(e)}}return k},isDeclaration:function(c){return"FunctionDeclaration"===
c.type||"VariableDeclaration"===c.type||"ClassDeclaration"===c.type}};cd.knownGlobals="closed true false null undefined arguments Object Function Array Number parseFloat parseInt Infinity NaN Boolean String Symbol Date Promise RegExp Error EvalError RangeError ReferenceError SyntaxError TypeError URIError JSON Math console ArrayBuffer Uint8Array Int8Array Uint16Array Int16Array Uint32Array Int32Array Float32Array Float64Array Uint8ClampedArray DataView Map Set WeakMap WeakSet Proxy Reflect decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape eval isFinite isNaN Intl navigator window document Blob setTimeout clearTimeout setInterval clearInterval requestAnimationFrame cancelAnimationFrame btoa atob sessionStorage localStorage $world lively System customElements performance addEventListener closed".split(" ");
cd.globalDeclRe=/^\s*global\s*/;cd._stmtTypes="EmptyStatement BlockStatement ExpressionStatement IfStatement BreakStatement ContinueStatement WithStatement ReturnStatement ThrowStatement TryStatement WhileStatement DoWhileStatement ForStatement ForInStatement ForOfStatement DebuggerStatement FunctionDeclaration VariableDeclaration ClassDeclaration ImportDeclaration ImportDeclaration ExportNamedDeclaration ExportDefaultDeclaration ExportAllDeclaration".split(" ");var FJ=cd.helpers,FQ=cd.knownGlobals;
cd.helpers=FJ;cd.helpers=FJ;cd.knownGlobals=FQ;cd.knownGlobals=FQ;cd.scopes=Hm;cd.scopes=Hm;cd.nodesAtIndex=Pk;cd.nodesAtIndex=Pk;cd.scopesAtIndex=GA;cd.scopesAtIndex=GA;cd.scopeAtIndex=Wl;cd.scopeAtIndex=Wl;cd.scopesAtPos=nj;cd.scopesAtPos=nj;cd.nodesInScopeOf=Hw;cd.nodesInScopeOf=Hw;cd.declarationsOfScope=Nr;cd.declarationsOfScope=Nr;cd._declaredVarNames=Iw;cd._declaredVarNames=Iw;cd._findJsLintGlobalDeclarations=wt;cd._findJsLintGlobalDeclarations=wt;cd.topLevelDeclsAndRefs=Qk;cd.topLevelDeclsAndRefs=
Qk;cd.topLevelFuncDecls=Im;cd.topLevelFuncDecls=Im;cd.findGlobalVarRefs=Aq;cd.findGlobalVarRefs=Aq;cd.findNodesIncludingLines=HA;cd.findNodesIncludingLines=HA;cd.findReferencesAndDeclsInScope=xy;cd.findReferencesAndDeclsInScope=xy;cd.findDeclarationClosestToIndex=IA;cd.findDeclarationClosestToIndex=IA;cd.nodesAt=so;cd.nodesAt=so;cd.statementOf=jv;cd.statementOf=jv;cd.resolveReferences=iv;cd.resolveReferences=iv;cd.refWithDeclAt=wy;cd.refWithDeclAt=wy;cd.imports=kv;cd.imports=kv;cd.exports=Jw;cd.exports=
Jw;var zs=Object.freeze({__proto__:null,helpers:FJ,knownGlobals:FQ,scopes:Hm,nodesAtIndex:Pk,scopesAtIndex:GA,scopeAtIndex:Wl,scopesAtPos:nj,nodesInScopeOf:Hw,declarationsOfScope:Nr,_declaredVarNames:Iw,_findJsLintGlobalDeclarations:wt,topLevelDeclsAndRefs:Qk,topLevelFuncDecls:Im,findGlobalVarRefs:Aq,findNodesIncludingLines:HA,findReferencesAndDeclsInScope:xy,findDeclarationClosestToIndex:IA,nodesAt:so,statementOf:jv,resolveReferences:iv,refWithDeclAt:wy,imports:kv,exports:Jw});wa("bB",zs);var fp=
lively.FreezerRuntime.recorderFor("lively.ast/lib/object-spread-transform.js");fp.objectSpreadTransform=lv;fp.Visitor=Gd;fp.funcCall=mk;fp.member=Lr;var GJ=function(){return fp.Visitor.apply(this,arguments)||this};$jscomp.inherits(GJ,fp.Visitor);GJ.prototype.accept=function(c,h,d){"ObjectExpression"===c.type&&(c=this.transformSpreadElement(c));return fp.Visitor.prototype.accept.call(this,c,h,d)};GJ.prototype.transformSpreadElement=function(c){var h=[],d=[h];c.properties.forEach(function(k){"SpreadElement"!==
k.type?(k.shorthand=!1,h.push(k)):(d.push(k),h=[],d.push(h))});if(1===d.length)return c;h.length||d.pop();return fp.funcCall.apply(fp,[fp.member("Object","assign")].concat($jscomp.arrayFromIterable(d.map(function(k){return"SpreadElement"===k.type?k.argument:{properties:k,type:"ObjectExpression"}}))))};fp.ObjectSpreadTransformer=GJ;fp.default=lv;var yd=lively.FreezerRuntime.recorderFor("lively.ast/lib/transform.js");yd._node2string=function(c){return c.source||yd.stringify(c)};yd._findIndentAt=function(c,
h){var d=yd.string.peekLeft(c,h,/\s+$/);c="number"===typeof d?c.slice(d,h):"";"\n"===c[0]&&(c=c.slice(1));return c};yd._applyChanges=function(c,h){for(var d=0;d<c.length;d++){var k=c[d];if("del"===k.type)h=h.slice(0,k.pos)+h.slice(k.pos+k.length);else if("add"===k.type)h=h.slice(0,k.pos)+k.string+h.slice(k.pos);else throw Error("Unexpected change "+yd.obj.inspect(k));}return h};yd._compareNodesForReplacement=yy;yd.replaceNode=Or;yd.replaceNodes=Bq;yd.replace=yt;yd.__findVarDecls=Pr;yd.oneDeclaratorPerVarDecl=
JA;yd.oneDeclaratorForVarsInDestructoring=gn;yd.returnLastStatement=Qr;yd.wrapInFunction=Rr;yd.wrapInStartEndCall=Cq;yd.transformSingleExpression=gp;yd.arr=Qe;yd.obj=lf;yd.string=Hg;yd.chain=Ri;yd.Path=Cg;yd.helpers=FJ;yd.scopes=Hm;yd.topLevelDeclsAndRefs=Qk;yd.topLevelFuncDecls=Im;yd.parse=sg;yd.fuzzyParse=en;yd.objectSpreadTransform=lv;yd.varDecl=Kr;yd.memberChain=Gw;yd.id=Ij;yd.exprStmt=fn;yd.funcCall=mk;yd.returnStmt=vt;yd.tryStmt=vy;yd.program=qh;yd.block=uy;yd.funcExpr=ql;yd.stringify=rg;yd.isProbablySingleExpressionRe=
/^\s*(\{|function\s*\()/;yd.replaceNode=Or;yd.replaceNode=Or;yd.replaceNodes=Bq;yd.replaceNodes=Bq;yd.replace=yt;yd.replace=yt;yd._compareNodesForReplacement=yy;yd._compareNodesForReplacement=yy;yd.oneDeclaratorPerVarDecl=JA;yd.oneDeclaratorPerVarDecl=JA;yd.oneDeclaratorForVarsInDestructoring=gn;yd.oneDeclaratorForVarsInDestructoring=gn;yd.returnLastStatement=Qr;yd.returnLastStatement=Qr;yd.wrapInFunction=Rr;yd.wrapInFunction=Rr;yd.wrapInStartEndCall=Cq;yd.wrapInStartEndCall=Cq;yd.transformSingleExpression=
gp;yd.transformSingleExpression=gp;yd.objectSpreadTransform=lv;yd.objectSpreadTransform=lv;var Kz=Object.freeze({__proto__:null,replaceNode:Or,replaceNodes:Bq,replace:yt,_compareNodesForReplacement:yy,oneDeclaratorPerVarDecl:JA,oneDeclaratorForVarsInDestructoring:gn,returnLastStatement:Qr,wrapInFunction:Rr,wrapInStartEndCall:Cq,transformSingleExpression:gp,objectSpreadTransform:lv});wa("bq",Kz);var gf=lively.FreezerRuntime.recorderFor("lively.ast/lib/comments.js");gf.getCommentPrecedingNode=mv;gf.extractComments=
Sr;gf.obj=lf;gf.string=Hg;gf.Path=Cg;gf.chain=Ri;gf.arr=Qe;gf.fun=Zk;gf.parse=sg;gf.statementOf=jv;gf.Visitor=Gd;gf.stringify=rg;gf.getCommentPrecedingNode=mv;gf.getCommentPrecedingNode=mv;gf.extractComments=Sr;gf.extractComments=Sr;var HJ=Object.freeze({__proto__:null,getCommentPrecedingNode:mv,extractComments:Sr}),Yg=lively.FreezerRuntime.recorderFor("lively.ast/lib/code-categorizer.js");Yg.findDecls=nv;Yg.es6ClassDef=function(c){if("ClassDeclaration"!==c.type)return null;var h={type:"class-decl",
name:c.id.name,node:c,children:[]};h.children.push.apply(h.children,$jscomp.arrayFromIterable(Yg.arr.compact(c.body.body.map(function(d,k){return Yg.es6ClassMethod(d,h,k)}))));return[h].concat($jscomp.arrayFromIterable(h.children))};Yg.es6ClassMethod=function(c,h,d){if("MethodDefinition"!==c.type)return null;var k;"constructor"===c.kind?k="class-constructor":"method"===c.kind?k=c.static?"class-class-method":"class-instance-method":"get"===c.kind?k=c.static?"class-class-getter":"class-instance-getter":
"set"===c.kind&&(k=c.static?"class-class-setter":"class-instance-setter");return k?{type:k,parent:h,node:c,name:c.key.name}:null};Yg.varDefs=function(c){if("VariableDeclaration"!==c.type)return null;var h=[],d={};c=$jscomp.makeIterator(Yg.withVarDeclIds(c));for(var k=c.next();!k.done;d={$jscomp$loop$prop$def$2631:d.$jscomp$loop$prop$def$2631},k=c.next())if(k=k.value,d.$jscomp$loop$prop$def$2631={name:k.id.name,node:k.node,type:"var-decl"},h.push(d.$jscomp$loop$prop$def$2631),d.$jscomp$loop$prop$def$2631.node.init){for(k=
d.$jscomp$loop$prop$def$2631.node.init;"AssignmentExpression"===k.type;)k=k.right;if("ObjectExpression"===k.type)d.$jscomp$loop$prop$def$2631.type="object-decl",d.$jscomp$loop$prop$def$2631.children=Yg.objectKeyValsAsDefs(k).map(function(n){return function(b){return Object.assign({},b,{type:"object-"+b.type,parent:n.$jscomp$loop$prop$def$2631})}}(d)),h.push.apply(h,$jscomp.arrayFromIterable(d.$jscomp$loop$prop$def$2631.children));else if(k=Yg.someObjectExpressionCall(k,d.$jscomp$loop$prop$def$2631))d.$jscomp$loop$prop$def$2631.children=
k.map(function(n){return function(b){return Object.assign({},b,{parent:n.$jscomp$loop$prop$def$2631})}}(d)),h.push.apply(h,$jscomp.arrayFromIterable(d.$jscomp$loop$prop$def$2631.children))}return h};Yg.funcDef=function(c){return"FunctionStatement"!==c.type&&"FunctionDeclaration"!==c.type||!c.id?null:[{name:c.id.name,node:c,type:"function-decl"}]};Yg.someObjectExpressionCall=function(c,h){"ExpressionStatement"===c.type&&(c=c.expression);return"CallExpression"!==c.type?null:(c=c.arguments.find(function(d){return"ObjectExpression"===
d.type}))?Yg.objectKeyValsAsDefs(c,h):null};Yg.functionWrapper=function(c,h){if(!Yg.isFunctionWrapper(c))return null;var d=Yg.Path("expression.arguments.0").get(c);h=d&&"FunctionExpression"===d.type&&5<Yg.string.lines(d.source||"").length?Yg.findDecls(d,h):Yg.findDecls(Yg.Path("expression.callee").get(c),h);var k={node:c,name:Yg.Path("expression.callee.id.name").get(c)};h.forEach(function(n){return n.parent||(n.parent=k)});return h};Yg.unwrapExport=function(c){return"ExportNamedDeclaration"!==c.type&&
"ExportDefaultDeclaration"!==c.type||!c.declaration?c:c.declaration};Yg.objectKeyValsAsDefs=function(c,h){return c.properties.map(function(d){return{name:d.key.name||d.key.value,type:"FunctionExpression"===d.value.type?"method":"property",node:d,parent:h}})};Yg.isFunctionWrapper=function(c){return"CallExpression"===Yg.Path("expression.type").get(c)&&"FunctionExpression"===Yg.Path("expression.callee.type").get(c)};Yg.declIds=rl;Yg.withVarDeclIds=function(c){return c.declarations.map(function(h){!h.source&&
h.init&&(h.source=h.id.name+" = "+h.init.source);return{node:h,id:h.id}})};Yg.parse=sg;Yg.arr=Qe;Yg.Path=Cg;Yg.string=Hg;Yg.obj=lf;Yg.findDecls=nv;Yg.findDecls=nv;var IE=Object.freeze({__proto__:null,findDecls:nv}),tf=lively.FreezerRuntime.recorderFor("lively.ast/index.js");tf.isValidIdentifier=ov;tf.BaseVisitor=Gd;tf.BaseVisitor=Gd;tf.withMozillaAstDo=Iz;tf.withMozillaAstDo=Iz;tf.printAst=EE;tf.printAst=EE;tf.compareAst=FE;tf.compareAst=FE;tf.pathToNode=GE;tf.pathToNode=GE;tf.rematchAstWithSource=
HE;tf.rematchAstWithSource=HE;tf.ReplaceManyVisitor=hr;tf.ReplaceManyVisitor=hr;tf.ReplaceVisitor=ys;tf.ReplaceVisitor=ys;tf.AllNodesVisitor=xs;tf.AllNodesVisitor=xs;tf.parse=sg;tf.parse=sg;tf.parseFunction=xq;tf.parseFunction=xq;tf.fuzzyParse=en;tf.fuzzyParse=en;tf.acorn=lu;tf.walk=us;tf.custom=Lx;tf.stringify=rg;tf.escodegen=cC;tf.escodegen=cC;tf.escodegen=cC;tf.acorn=lu;tf.acorn=lu;tf.walk=us;tf.walk=us;tf.nodes=aw;tf.query=zs;tf.transform=Kz;tf.comments=HJ;tf.categorizer=IE;tf.query=zs;tf.query=
zs;tf.transform=Kz;tf.transform=Kz;tf.comments=HJ;tf.comments=HJ;tf.categorizer=IE;tf.categorizer=IE;tf.stringify=rg;tf.stringify=rg;tf.nodes=aw;tf.nodes=aw;tf.custom=Lx;tf.custom=Lx;tf.isValidIdentifierRe=/^(?!(?:do|if|in|for|let|new|try|var|case|default|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/;
tf.isValidIdentifier=ov;tf.isValidIdentifier=ov;tf.parse=sg;tf.Node=tf.parse("").constructor;Object.defineProperty(tf.Node.prototype,"__serialize__",{configurable:!0,value:function(){return{__expr__:"("+JSON.stringify(this)+")"}}});var IJ=Object.freeze({__proto__:null,BaseVisitor:Gd,withMozillaAstDo:Iz,printAst:EE,compareAst:FE,pathToNode:GE,rematchAstWithSource:HE,ReplaceManyVisitor:hr,ReplaceVisitor:ys,AllNodesVisitor:xs,parse:sg,parseFunction:xq,fuzzyParse:en,escodegen:cC,acorn:lu,walk:us,query:zs,
transform:Kz,comments:HJ,categorizer:IE,stringify:rg,nodes:aw,custom:Lx,isValidIdentifier:ov});wa("bo",IJ);var Zg=lively.FreezerRuntime.recorderFor("lively.vm/lib/util.js");Zg.getGlobal=to;Zg.signatureOf=zy;Zg.isClass=sl;Zg.pluck=pv;Zg.printSymbol=qv;Zg.safeToString=rv;Zg.printEvalResult=Kw;Zg.obj=lf;Zg.string=Hg;Zg.getGlobal=to;Zg.getGlobal=to;Zg.signatureOf=zy;Zg.signatureOf=zy;Zg.isClass=sl;Zg.isClass=sl;Zg.pluck=pv;Zg.pluck=pv;Zg.knownSymbols=function(){return Object.getOwnPropertyNames(Symbol).filter(function(c){return"symbol"===
typeof Symbol[c]}).reduce(function(c,h){return c.set(Symbol[h],"Symbol."+h)},new Map)}();Zg.symMatcher=/^Symbol\((.*)\)$/;Zg.printSymbol=qv;Zg.printSymbol=qv;Zg.safeToString=rv;Zg.safeToString=rv;Zg.printEvalResult=Kw;Zg.printEvalResult=Kw;var GQ=function(){function c(n,b){"object"===typeof b&&(b=b.maxDepth||2);if(!n)return String(n);if("string"===typeof n)return b=n.includes("\n")?"`":'"',n=n.split("\n").slice(0,1E3).join("\n"),b+n+b;if(n instanceof Error)return n.stack||Zg.safeToString(n);if(!Zg.obj.isObject(n))return Zg.safeToString(n);
try{var e=Zg.obj.inspect(n,{customPrinter:d,maxNumberOfKeys:100,maxDepth:b,printFunctionSource:!0})}catch(l){}return"{}"===e?Zg.safeToString(n):e}function h(n,b){if("string"===typeof n||Array.isArray(n)||!k||"function"!==typeof n[k])return b;var e="function"===typeof n.entries,l=e?n.entries():n[k](),a=[];b=e?"{":"[";var f=e?"}":"]";n=n.constructor&&n.constructor.name||"Iterable";for(var m=0,q;10>m;m++){q=l.next();if(q.done)break;a.push(q.value)}l=a.map(function(r){return e?String(r[0])+": "+String(r[1]):
c(r,2)}).join(", ");return n+"("+b+l+f+")"}function d(n,b,e){if(!n)return b;if("symbol"===typeof n)return Zg.printSymbol(n);if("string"===typeof n)return Zg.string.print(Zg.string.truncate(n,100));if(n.isMorph)return Zg.safeToString(n);if(n instanceof Promise)return"Promise()";if("undefined"!==typeof Node&&n instanceof Node||"undefined"!==typeof ImageData&&n instanceof ImageData)return Zg.safeToString(n);var l=n.length||n.byteLength;if(void 0!==l&&10<l&&n.slice)return"["+("string"===typeof n||n.byteLength?
Zg.safeToString(n.slice(0,10)):n.slice(0,10).map(e))+",...]";n=h(n,b);return n!==b?n:b}var k="undefined"!==typeof Symbol&&Symbol.iterator;return c}();Zg.printInspectEvalValue=GQ;Zg.printInspectEvalValue=GQ;Zg.printInspectEvalValue=GQ;var Ch=lively.FreezerRuntime.recorderFor("lively.vm/lib/completions.js");Ch.getObjectForCompletion=Lw;Ch.propertyExtract=function(c,h,d){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h).map(Ch.printSymbol)).filter(function(k){return-1===c.indexOf(k)}).map(d).filter(function(k){return!!k}).sort(function(k,
n){return k.name<n.name?-1:k.name>n.name?1:0})};Ch.getMethodsOf=function(c,h){return Ch.propertyExtract(c,h,function(d){return h.__lookupGetter__&&h.__lookupGetter__(d)||"function"!==typeof h[d]?null:{name:d,completion:Ch.signatureOf(d,h[d])}})};Ch.getAttributesOf=function(c,h){return Ch.propertyExtract(c,h,function(d){return h.__lookupGetter__&&!h.__lookupGetter__(d)&&"function"===typeof h[d]?null:{name:d,completion:d}})};Ch.getProtoChain=function(c){for(var h=[];c;)h.push(c),c=c.__proto__;return h};
Ch.getDescriptorOf=function(c,h){function d(k,n){k.length>n&&(k=k.slice(0,n)+"...");return k.replace(/\n/g,"").replace(/\s+/g," ")}if(c===h){if("function"!==typeof c)return d(Ch.safeToString(c),50);h=c.toString();h=d(h.slice(h.indexOf("{")+1,h.lastIndexOf("}")),50);return Ch.signatureOf(c.displayName||c.name||"function",c)+" {"+h+"}"}return(c=h.hasOwnProperty("constructor")&&h.constructor)?"string"===typeof c.type&&c.type.length?d(c.type,50):"string"===typeof c.name&&c.name.length?d(c.name,50):"anonymous class":
"prototype"};Ch.getCompletionsOfObj=function(c,h){try{var d=[];var k=Ch.getProtoChain(c).map(function(b){var e=Ch.getDescriptorOf(c,b);b=Ch.getMethodsOf(d,b).concat(Ch.getAttributesOf(d,b));d=d.concat(Ch.pluck(b,"name"));return[e,Ch.pluck(b,"completion")]})}catch(b){var n=b}h(n,k)};Ch.descriptorsOfObjAndProtoProperties=function(c){var h=[];return Ch.getProtoChain(c).map(function(d){var k=Ch.getDescriptorOf(c,d);d=Ch.getMethodsOf(h,d).concat(Ch.getAttributesOf(h,d));h=h.concat(Ch.pluck(d,"name"));
return[k,Ch.pluck(d,"completion")]})};Ch.getCompletions=Dq;Ch.lang=r1;Ch.signatureOf=zy;Ch.pluck=pv;Ch.safeToString=rv;Ch.printSymbol=qv;Ch.getObjectForCompletion=Lw;Ch.getObjectForCompletion=Lw;Ch.getCompletions=Dq;Ch.getCompletions=Dq;var JE=Object.freeze({__proto__:null,getObjectForCompletion:Lw,getCompletions:Dq});wa("bc",JE);var Lb=lively.FreezerRuntime.recorderFor("lively.source-transform/capturing.js");Lb.rewriteToCaptureTopLevelVariables=hp;Lb.transformImportMeta=function(c,h){return Lb.ReplaceVisitor.run(c,
function(d){return"MetaProperty"==d.type&&"import"==d.meta.name?h.classToFunction.currentModuleAccessor?Lb.nodes.objectLiteral(["url",Lb.nodes.member(h.classToFunction.currentModuleAccessor,"id")]):Lb.parse('({url: eval("_context").id})').body[0].expression:d})};Lb.rewriteToRegisterModuleToCaptureSetters=Tr;Lb.clearEmptyExports=function(c,h){h=Lb.topLevelDeclsAndRefs(c);h=$jscomp.makeIterator(h.scope.exportDecls);for(var d=h.next();!d.done;d=h.next())d=d.value,d.declaration||!d.specifiers||d.specifiers.length||
Lb.arr.remove(c.body,d);return c};Lb.replaceRefs=function(c,h){var d=Lb.topLevelDeclsAndRefs(c),k=d.refs.filter(function(b){return Lb.shouldRefBeCaptured(b,d,h)}),n=[];c=Lb.ReplaceVisitor.run(c,function(b,e){if("Property"===b.type&&k.includes(b.key)&&b.shorthand)return Lb.prop(Lb.id(b.key.name),b.value);if("ExportNamedDeclaration"===b.type){e=b.declaration;var l=b.specifiers;e&&(e.id?n.push(e.id):e.declarations&&n.push.apply(n,$jscomp.arrayFromIterable(e.declarations.map(function(a){return a.id}))));
l&&l.forEach(function(a){return n.push(a.local)});return b}return"AssignmentExpression"===b.type&&k.includes(b.left)&&h.declarationWrapper?Object.assign({},b,{right:Lb.declarationWrapperCall(h.declarationWrapper,null,Lb.literal(b.left.name),Lb.literal("assignment"),b.right,h.captureObj,h)}):b});return Lb.ReplaceVisitor.run(c,function(b,e,l){return k.includes(b)&&!n.includes(b)?Lb.member(h.captureObj,b):b})};Lb.replaceVarDecls=function(c,h){var d=Lb.topLevelDeclsAndRefs(c);return Lb.ReplaceManyVisitor.run(c,
function(k){if(!d.varDecls.includes(k)||k.declarations.every(function(m){return!Lb.shouldDeclBeCaptured(m,h)}))return k;for(var n=[],b=0;b<k.declarations.length;b++){var e=k.declarations[b];if(Lb.shouldDeclBeCaptured(e,h)){var l=e.init||{operator:"||",type:"LogicalExpression",left:{computed:!1,object:h.captureObj,property:e.id,type:"MemberExpression"},right:{name:"undefined",type:"Identifier"}};l=h.declarationWrapper&&e.id.name?Lb.declarationWrapperCall(h.declarationWrapper,e,Lb.literal(e.id.name),
Lb.literal(k.kind),l,h.captureObj,h):l;if(e.id.type.includes("Pattern")){var a=Lb.generateUniqueName(d.declaredNames,"destructured_1"),f={type:"Identifier",name:a};e=Lb.transformPattern(e.id,{parent:f,declaredNames:d.declaredNames}).map(function(m){return m[Lb.annotationSym]&&m[Lb.annotationSym].capture?Lb.assignExpr(h.captureObj,m.declarations[0].id,h.declarationWrapper?Lb.declarationWrapperCall(h.declarationWrapper,null,Lb.literal(m.declarations[0].id.name),Lb.literal(k.kind),m.declarations[0].init,
h.captureObj,h):m.declarations[0].init,!1):m});d.declaredNames.push(a);n.push.apply(n,$jscomp.arrayFromIterable([Lb.varDecl(f,l,k.kind)].concat(e)))}else n.push(Lb.assignExpr(h.captureObj,e.id,l,!1)),h.keepTopLevelVarDecls&&n.push(Lb.varDecl(e.id,Lb.member(h.captureObj,e.id)))}else n.push({type:"VariableDeclaration",kind:k.kind||"var",declarations:[e]})}return n})};Lb.generateUniqueName=function(c,h){for(var d=1;-1<c.indexOf(h);){if(1E3<d)throw Error("Endless loop searching for unique variable "+
h);h=h.replace(/_[0-9]+$|$/,"_"+ ++d)}return h};Lb.additionalIgnoredDecls=function(c,h){h=Lb.topLevelDeclsAndRefs(c);for(var d=[],k=0;k<h.scope.varDecls.length;k++){var n=h.scope.varDecls[k],b=Lb.Path(h.scope.varDeclPaths[k]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type&&"ExportNamedDeclaration"!==b.type||d.push.apply(d,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(e){return e.name}).concat(d.map(function(e){return e.id.name}))};
Lb.additionalIgnoredRefs=function(c,h){h=Lb.topLevelDeclsAndRefs(c);for(var d=[],k=0;k<h.scope.varDecls.length;k++){var n=h.scope.varDecls[k],b=Lb.Path(h.scope.varDeclPaths[k]).slice(0,-1).get(c);"ForStatement"!==b.type&&"ForInStatement"!==b.type&&"ForOfStatement"!==b.type||d.push.apply(d,$jscomp.arrayFromIterable(n.declarations))}return h.scope.catches.map(function(e){return e.name}).concat(Lb.queryHelpers.declIds(d.map(function(e){return e.id})).map(function(e){return e.name}))};Lb.shouldDeclBeCaptured=
function(c,h){return-1===h.excludeDecls.indexOf(c.id.name)&&(!h.includeDecls||-1<h.includeDecls.indexOf(c.id.name))};Lb.shouldRefBeCaptured=function(c,h,d){if(h.scope.importSpecifiers.includes(c))return!1;for(var k=0;k<h.scope.exportDecls.length;k++){var n=h.scope.exportDecls[k];if(n.declarations&&n.declarations.includes(c)||n.declaration===c)return!1}return d.excludeRefs.includes(c.name)||d.includeRefs&&!d.includeRefs.includes(c.name)?!1:!0};Lb.replaceClassDecls=function(c,h){if(h.classToFunction)return h.classToFunction.transform(c,
h.classToFunction);var d=Lb.topLevelDeclsAndRefs(c);if(!d.classDecls.length)return c;for(var k=c.body.length-1;0<=k;k--){var n=c.body[k];n.id&&d.classDecls.includes(n)&&c.body.splice(k+1,0,Lb.assignExpr(h.captureObj,n.id,n.id,!1))}return c};Lb.splitExportDeclarations=function(c,h){h=c.body;for(var d=c.body=[],k=0;k<h.length;k++){var n=h[k];if("ExportNamedDeclaration"!==n.type||!n.declaration||"VariableDeclaration"!==n.declaration.type||1>=n.declaration.declarations.length)d.push(n);else for(var b=
n.declaration.declarations,e=0;e<b.length;e++)d.push({type:"ExportNamedDeclaration",specifiers:[],declaration:Lb.varDecl(b[e].id,b[e].init,n.declaration.kind)})}return c};Lb.insertCapturesForExportedImports=Mw;Lb.insertCapturesForExportDeclarations=function(c,h){for(var d=[],k=0;k<c.body.length;k++){var n=c.body[k];d.push(n);if(("ExportNamedDeclaration"===n.type||"ExportDefaultDeclaration"===n.type)&&n.declaration)if("ExportDefaultDeclaration"===n.type&&"Literal"===n.declaration.type){var b=n.declaration,
e=Lb.generateUniqueName(Lb.topLevelDeclsAndRefs(c).declaredNames,"$"+b.raw.split('"').join(""));n.declaration=Lb.id(e);Lb.arr.pushAt(d,Lb.assignExpr(h.captureObj,e,b.raw,!1),d.indexOf(n))}else n.declaration.declarations?d.push.apply(d,$jscomp.arrayFromIterable(n.declaration.declarations.map(function(l){var a=l.id;h.declarationWrapper&&(l.init.callee&&l.init.callee.name===h.declarationWrapper.name||(a=Lb.declarationWrapperCall(h.declarationWrapper,l,Lb.literal(l.id.name),Lb.literal("assignment"),l.id,
h.captureObj,h)));return Lb.assignExpr(h.captureObj,l.id,a,!1)}))):"FunctionDeclaration"!==n.declaration.type&&"ClassDeclaration"===n.declaration.type&&d.push(Lb.assignExpr(h.captureObj,n.declaration.id,n.declaration.id,!1))}c.body=d;return c};Lb.insertCapturesForImportDeclarations=function(c,h){c.body=c.body.reduce(function(d,k){return d.concat("ImportDeclaration"===k.type&&k.specifiers.length?[k].concat(k.specifiers.map(function(n){return Lb.assignExpr(h.captureObj,n.local,n.local,!1)})):[k])},
[]);return c};Lb.insertDeclarationsForExports=function(c,h){for(var d=Lb.topLevelDeclsAndRefs(c),k=[],n=0;n<c.body.length;n++){var b=c.body[n];h.classToFunction&&"ExportDefaultDeclaration"===b.type&&b.declaration&&!b.declaration.type.includes("Declaration")&&("Identifier"===b.declaration.type||b.declaration.id)?k=k.concat([Lb.varDeclOrAssignment(c,{type:"VariableDeclarator",id:b.declaration,init:Lb.member(h.captureObj,b.declaration)}),b]):"ExportNamedDeclaration"!==b.type||!b.specifiers.length||b.source?
k.push(b):k=k.concat(b.specifiers.map(function(e){return d.declaredNames.includes(e.local.name)?null:Lb.varDeclOrAssignment(c,{type:"VariableDeclarator",id:e.local,init:Lb.member(h.captureObj,e.local)})}).filter(Boolean)).concat(b)}c.body=k;return c};Lb.fixDefaultAsyncFunctionExportForRegeneratorBug=function(c,h){h=[];for(var d=0;d<c.body.length;d++){var k=c.body[d];"ExportDefaultDeclaration"===k.type&&"FunctionDeclaration"===k.declaration.type&&k.declaration.id&&k.declaration.async&&(h.push(k.declaration),
k.declaration={type:"Identifier",name:k.declaration.id.name});h.push(k)}c.body=h;return c};Lb.es6ModuleTransforms=function(c,h){c.body=c.body.reduce(function(d,k){if("ExportNamedDeclaration"===k.type)if(k.source){var n=e=k.source;var b=k.specifiers.map(function(l){return{type:"ExpressionStatement",expression:Lb.exportFromImport({type:"Literal",value:l.exported.name},{type:"Literal",value:l.local.name},e,h.moduleExportFunc,h.moduleImportFunc)}})}else b=k.declaration?(b=k.declaration.declarations)?
b.map(function(l){h.excludeDecls.push(l.id);return Lb.varDecl(l.id,Lb.assignExpr(h.captureObj,l.id,h.declarationWrapper?Lb.declarationWrapperCall(h.declarationWrapper,null,Lb.literal(l.id.name),Lb.literal(k.declaration.kind),l,h.captureObj,h):l.init,!1),k.declaration.kind)}).concat(b.map(function(l){return Lb.exportCallStmt(h.moduleExportFunc,l.id.name,l.id)})):[k.declaration].concat(Lb.exportCallStmt(h.moduleExportFunc,k.declaration.id.name,k.declaration.id)):k.specifiers.map(function(l){return Lb.exportCallStmt(h.moduleExportFunc,
l.exported.name,Lb.shouldDeclBeCaptured({id:l.local},h)?Lb.member(h.captureObj,l.local):l.local)});else if("ExportDefaultDeclaration"===k.type)b=k.declaration&&k.declaration.id?[k.declaration].concat(Lb.exportCallStmt(h.moduleExportFunc,"default",k.declaration.id)):[Lb.exportCallStmt(h.moduleExportFunc,"default",k.declaration)];else if("ExportAllDeclaration"===k.type){n={name:h.es6ExportFuncId+"__iterator__",type:"Identifier"};var e=k.source;b=[{type:"ForInStatement",body:{type:"ExpressionStatement",
expression:Lb.exportFromImport(n,n,e,h.moduleExportFunc,h.moduleImportFunc)},left:{type:"VariableDeclaration",kind:"var",declarations:[{type:"VariableDeclarator",id:n,init:null}]},right:Lb.importCall(null,e,h.moduleImportFunc)}];h.excludeRefs.push(n.name);h.excludeDecls.push(n.name)}else b="ImportDeclaration"===k.type?k.specifiers.length?k.specifiers.map(function(l){return Lb.varDeclAndImportCall(c,l.local,"ImportSpecifier"===l.type&&l.imported.name||"ImportDefaultSpecifier"===l.type&&"default"||
null,k.source,h.moduleImportFunc)}):Lb.importCallStmt(null,k.source,h.moduleImportFunc):[k];return d.concat(b)},[]);return c};Lb.putFunctionDeclsInFront=function(c,h){var d=Lb.topLevelDeclsAndRefs(c).scope,k=d.funcDecls;if(!k.length)return c;for(var n=[],b=k.length;b--;){var e=k[b];if(e.id&&Lb.shouldDeclBeCaptured(e,h)){var l=d.funcDeclPaths[b].slice(0,-1),a=Lb.Path(l).get(d.node);l={type:"Identifier",name:e.id.name};var f=h.declarationWrapper?Lb.declarationWrapperCall(h.declarationWrapper,e,Lb.literal(l.name),
Lb.literal("function"),l,h.captureObj,h):l,m=Object.assign({},e);Array.isArray(a)?a.splice(a.indexOf(e),1,Lb.exprStmt(e.id)):"ExportNamedDeclaration"===a.type?(a=d.node.body.indexOf(a),-1<a&&d.node.body.splice(a,1,{type:"ExportNamedDeclaration",specifiers:[{type:"ExportSpecifier",exported:e.id,local:e.id}]})):"ExportDefaultDeclaration"===a.type&&(a.declaration=e.id);n.unshift(Lb.assignExpr(h.captureObj,l,f,!1));n.unshift(m)}}c.body=n.concat(c.body);return c};Lb.computeDefRanges=function(c,h){c=Lb.topLevelDeclsAndRefs(c);
return Lb.chain(c.scope.varDecls).pluck("declarations").flatten().value().concat(c.scope.funcDecls.filter(function(d){return d.id})).reduce(function(d,k){d[k.id.name]||(d[k.id.name]=[]);d[k.id.name].push({type:k.type,start:k.start,end:k.end});return d},{})};Lb.transformPattern=function(c,h){return"ArrayPattern"===c.type?Lb.transformArrayPattern(c,h):"ObjectPattern"===c.type?Lb.transformObjectPattern(c,h):[]};Lb.transformArrayPattern=function(c,h){for(var d=h.declaredNames,k=Lb.annotationSym,n=[],
b=0;b<c.elements.length;b++){var e=c.elements[b];if("Identifier"===e.type)e=Lb.varDecl(e,Lb.member(h.parent,Lb.id(b),!0)),e[k]={capture:!0},n.push(e);else if("RestElement"===e.type)e=Lb.varDecl(e.argument,{type:"CallExpression",arguments:[{type:"Literal",value:b}],callee:Lb.member(h.parent,Lb.id("slice"),!1)}),e[k]={capture:!0},n.push(e);else if("AssignmentPattern"==e.type)e=Lb.varDecl(e.left,Lb.conditional(Lb.binaryExpr(Lb.member(h.parent,Lb.id(b),!0),"===",Lb.id("undefined")),e.right,Lb.member(h.parent,
Lb.id(b),!0))),e[k]={capture:!0},n.push(e);else{var l=Lb.id(Lb.generateUniqueName(d,h.parent.name+"$"+b)),a=Lb.varDecl(l,Lb.member(h.parent,b));d.push(l.name);n.push(a);n.push.apply(n,$jscomp.arrayFromIterable(Lb.transformPattern(e,{parent:l,declaredNames:d})))}}return n};Lb.transformObjectPattern=function(c,h){for(var d=h.declaredNames,k=Lb.annotationSym,n=[],b=0;b<c.properties.length;b++){var e=c.properties[b];if("RestElement"==e.type){var l=c.properties.map(function(m){return m.key&&m.key.name}).filter(Boolean),
a=Lb.nodes.varDecl(e.argument.name,Lb.nodes.objectLiteral([])),f=Lb.nodes.varDecl(e.argument.name,Lb.id(e.argument.name));e=Lb.nodes.exprStmt(Lb.nodes.funcCall(Lb.nodes.funcExpr({},[],Lb.nodes.forIn("__key",h.parent,Lb.nodes.block.apply(Lb.nodes,[].concat($jscomp.arrayFromIterable(l.length?l.map(function(m){return Lb.nodes.ifStmt(Lb.nodes.binaryExpr(Lb.nodes.id("__key"),"===",Lb.nodes.literal(m)),{type:"ContinueStatement",label:null},null)}):[]),[Lb.nodes.exprStmt(Lb.nodes.assign(Lb.nodes.member(e.argument.name,
Lb.nodes.id("__key"),!0),Lb.nodes.member(h.parent,Lb.nodes.id("__key"),!0)))]))))));f[k]={capture:!0};n.push(a,f,e)}else"Identifier"==e.value.type?(a=Lb.varDecl(e.value,Lb.member(h.parent,e.key)),a[k]={capture:!0},n.push(a)):"AssignmentPattern"==e.value.type?(a=Lb.varDecl(e.value.left,Lb.conditional(Lb.binaryExpr(Lb.member(h.parent,e.key),"===",Lb.id("undefined")),e.value.right,Lb.member(h.parent,e.key))),a[k]={capture:!0},n.push(a)):(a=Lb.id(Lb.generateUniqueName(d,h.parent.name+"$"+e.key.name)),
f=Lb.varDecl(a,Lb.member(h.parent,e.key)),f[k]={capture:!1},d.push(a.name),n.push.apply(n,$jscomp.arrayFromIterable([f].concat(Lb.transformPattern(e.value,{parent:a,declaredNames:d})))))}return n};Lb.varDeclOrAssignment=function(c,h,d){return-1<Lb.topLevelDeclsAndRefs(c).declaredNames.indexOf(h.id.name)?Lb.exprStmt(Lb.assign(h.id,h.init)):{declarations:[h],kind:d||"var",type:"VariableDeclaration"}};Lb.assignExpr=function(c,h,d,k){return Lb.exprStmt(Lb.assign(Lb.member(c,h,k),d||Lb.id("undefined")))};
Lb.exportFromImport=function(c,h,d,k,n){return Lb.exportCall(k,c,Lb.importCall(h,d,n))};Lb.varDeclAndImportCall=function(c,h,d,k,n){return Lb.varDecl(h,Lb.importCall(d,k,n))};Lb.importCall=function(c,h,d){"string"===typeof c&&(c=Lb.literal(c));return{arguments:[h].concat(c||[]),callee:d,type:"CallExpression"}};Lb.importCallStmt=function(c,h,d){return Lb.exprStmt(Lb.importCall(c,h,d))};Lb.exportCall=function(c,h,d){"string"===typeof h&&(h=Lb.literal(h));d=Lb.obj.deepCopy(d);return Lb.funcCall(c,h,
d)};Lb.exportCallStmt=function(c,h,d){return Lb.exprStmt(Lb.exportCall(c,h,d))};Lb.declarationWrapperCall=function(c,h,d,k,n,b,e){if(h){var l=[],a=!1;if(h["x-lively-object-meta"]){a=h["x-lively-object-meta"];h=a.start;var f=a.end,m=a.evalId,q=a.sourceAccessorName;a=!0;l.push("start",Lb.nodes.literal(h),"end",Lb.nodes.literal(f))}void 0===m&&e.hasOwnProperty("evalId")&&(m=e.evalId,a=!0);void 0===q&&e.hasOwnProperty("sourceAccessorName")&&(q=e.sourceAccessorName,a=!0);void 0!==m&&l.push("evalId",Lb.nodes.literal(m));
q&&l.push("moduleSource",Lb.nodes.id(q));if(a)return Lb.funcCall(c,d,k,n,b,Lb.nodes.objectLiteral(l))}return Lb.funcCall(c,d,k,n,b)};Lb.obj=lf;Lb.string=Hg;Lb.chain=Ri;Lb.arr=Qe;Lb.fun=Zk;Lb.Path=Cg;Lb.parse=sg;Lb.stringify=rg;Lb.query=zs;Lb.transform=Kz;Lb.nodes=aw;Lb.Visitor=Gd;Lb.ReplaceManyVisitor=hr;Lb.ReplaceVisitor=ys;var mu=Lb.nodes;Lb.member=mu.member;Lb.prop=mu.prop;Lb.varDecl=mu.varDecl;Lb.assign=mu.assign;Lb.id=mu.id;Lb.literal=mu.literal;Lb.exprStmt=mu.exprStmt;Lb.conditional=mu.conditional;
Lb.binaryExpr=mu.binaryExpr;Lb.funcCall=mu.funcCall;var H1=Lb.query;Lb.topLevelDeclsAndRefs=H1.topLevelDeclsAndRefs;Lb.queryHelpers=H1.helpers;var I1=Lb.transform;Lb.transformSingleExpression=I1.transformSingleExpression;Lb.wrapInStartEndCall=I1.wrapInStartEndCall;Lb.rewriteToCaptureTopLevelVariables=hp;Lb.rewriteToCaptureTopLevelVariables=hp;Lb.rewriteToRegisterModuleToCaptureSetters=Tr;Lb.rewriteToRegisterModuleToCaptureSetters=Tr;Lb.insertCapturesForExportedImports=Mw;Lb.insertCapturesForExportedImports=
Mw;Lb.annotationSym=Symbol("lively.ast-destructuring-transform");var KE=Object.freeze({__proto__:null,rewriteToCaptureTopLevelVariables:hp,rewriteToRegisterModuleToCaptureSetters:Tr,insertCapturesForExportedImports:Mw}),J1={__esModule:!0,default:function(){return{manipulateOptions:function(c,h){h.plugins.push("jsx")}}}},yda=J1=J1["default"],zda={},K1=zda=Array.isArray,JJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,L1={};L1="object"==typeof JJ&&JJ&&JJ.Object===
Object&&JJ;var Ada={},Bda="object"==typeof self&&self&&self.Object===Object&&self,Lz=Ada=L1||Bda||Function("return this")(),Cda={},KJ=Cda=Lz.Symbol,Dda={},M1=Object.prototype,Eda=M1.hasOwnProperty,Fda=M1.toString,LE=KJ?KJ.toStringTag:void 0,Gda=Dda=function(c){var h=Eda.call(c,LE),d=c[LE];try{c[LE]=void 0;var k=!0}catch(b){}var n=Fda.call(c);k&&(h?c[LE]=d:delete c[LE]);return n},N1={},Hda=Object.prototype.toString;N1=function(c){return Hda.call(c)};var Ida={},Jda=N1,O1=KJ?KJ.toStringTag:void 0,HQ=
Ida=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":O1&&O1 in Object(c)?Gda(c):Jda(c)},Kda={},IQ=Kda=function(c){return null!=c&&"object"==typeof c},Lda={},Mda=Lda=function(c){return"string"==typeof c||!K1(c)&&IQ(c)&&"[object String]"==HQ(c)},Nda={},JQ=Nda=function(c){return c},Oda={},Pda=Oda=function(c){return"symbol"==typeof c||IQ(c)&&"[object Symbol]"==HQ(c)},Qda={},dC=Qda=function(c){var h=typeof c;return null!=c&&("object"==h||"function"==h)},Rda={},Sda=Rda=function(c){if(!dC(c))return!1;
c=HQ(c);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c},P1={};P1=Lz["__core-js_shared__"];var Tda={},KQ=P1,Q1=function(){var c=/[^.]+$/.exec(KQ&&KQ.keys&&KQ.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Uda=Tda=function(c){return!!Q1&&Q1 in c},R1={},Vda=Function.prototype.toString;R1=function(c){if(null!=c){try{return Vda.call(c)}catch(h){}return c+""}return""};var Wda={},Xda=R1,Yda=/^\[object .+?Constructor\]$/,Zda=RegExp("^"+
Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$da=Wda=function(c){return!dC(c)||Uda(c)?!1:(Sda(c)?Zda:Yda).test(Xda(c))},S1={};S1=function(c,h){return null==c?void 0:c[h]};var aea={},bea=S1,T1=aea=function(c,h){c=bea(c,h);return $da(c)?c:void 0},cea={},U1=cea=function(){try{var c=T1(Object,"defineProperty");c({},"",{});return c}catch(h){}}(),dea={},V1=dea=function(c,
h){var d=-1,k=c.length;for(h||(h=Array(k));++d<k;)h[d]=c[d];return h},eea={},W1=Object.create,LQ=eea=function(){function c(){}return function(h){if(!dC(h))return{};if(W1)return W1(h);c.prototype=h;h=new c;c.prototype=void 0;return h}}(),fea={},gea=/^(?:0|[1-9]\d*)$/,hea=fea=function(c,h){var d=typeof c;h=null==h?9007199254740991:h;return!!h&&("number"==d||"symbol"!=d&&gea.test(c))&&-1<c&&0==c%1&&c<h},iea={},X1=iea=function(c,h,d){switch(d.length){case 0:return c.call(h);case 1:return c.call(h,d[0]);
case 2:return c.call(h,d[0],d[1]);case 3:return c.call(h,d[0],d[1],d[2])}return c.apply(h,d)},Y1={};Y1=function(c){return function(){return c}};var jea={},kea=Y1,lea=jea=U1?function(c,h){return U1(c,"toString",{configurable:!0,enumerable:!1,value:kea(h),writable:!0})}:JQ,mea={},nea=Date.now,Z1=mea=function(c){var h=0,d=0;return function(){var k=nea(),n=16-(k-d);d=k;if(0<n){if(800<=++h)return arguments[0]}else h=0;return c.apply(void 0,arguments)}},oea={},pea=oea=Z1(lea),qea={},$1=qea=T1(Lz,"WeakMap"),
rea={},sea=rea=function(c,h){for(var d=-1,k=null==c?0:c.length;++d<k&&!1!==h(c[d],d,c););return c},a2={},tea=/\s/;a2=function(c){for(var h=c.length;h--&&tea.test(c.charAt(h)););return h};var b2={},uea=a2,vea=/^\s+/;b2=function(c){return c?c.slice(0,uea(c)+1).replace(vea,""):c};var wea={},xea=b2,c2=0/0,yea=/^[-+]0x[0-9a-f]+$/i,zea=/^0b[01]+$/i,Aea=/^0o[0-7]+$/i,Bea=parseInt,Cea=wea=function(c){if("number"==typeof c)return c;if(Pda(c))return c2;dC(c)&&(c="function"==typeof c.valueOf?c.valueOf():c,c=
dC(c)?c+"":c);if("string"!=typeof c)return 0===c?c:+c;c=xea(c);var h=zea.test(c);return h||Aea.test(c)?Bea(c.slice(2),h?2:8):yea.test(c)?c2:+c},Dea={},Eea=Dea=function(c,h,d,k){var n=c.length;for(d+=k?1:-1;k?d--:++d<n;)if(h(c[d],d,c))return d;return-1},d2={},e2=1/0;d2=function(c){if(!c)return 0===c?c:0;c=Cea(c);return c===e2||c===-e2?1.7976931348623157E308*(0>c?-1:1):c===c?c:0};var Fea={},Gea=d2,f2=Fea=function(c){c=Gea(c);var h=c%1;return c===c?h?c-h:c:0},Hea={},Iea=Hea=function(c){return c!==c},
g2={};g2=function(c,h,d){--d;for(var k=c.length;++d<k;)if(c[d]===h)return d;return-1};var h2={},Jea=g2;h2=function(c,h,d){return h===h?Jea(c,h,d):Eea(c,Iea,d)};var Kea={},Lea=h2,Mea=Kea=function(c,h){return!(null==c||!c.length)&&-1<Lea(c,h,0)},Nea={},Oea=Nea=function(){},Pea={},MQ=Pea=function(){},Ay="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qea={};KA.prototype=LQ(MQ.prototype);var NQ=Qea=KA.prototype.constructor=KA,WC="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,Rea={};Fn.prototype=LQ(MQ.prototype);var i2=Rea=Fn.prototype.constructor=Fn,j2={};j2=function(c){if(c instanceof NQ)return c.clone();var h=new i2(c.__wrapped__,c.__chain__);h.__actions__=V1(c.__actions__);h.__index__=c.__index__;h.__values__=c.__values__;return h};var Sea={},u7=NQ,JT=i2,t7=K1,s7=IQ,w7=j2,v7=Object.prototype.hasOwnProperty;LA.prototype=MQ.prototype;var Tea=Sea=LA.prototype.constructor=LA,Uea={},LJ=Uea=$1&&new $1,Vea={},k2=Vea=LJ?function(c){return LJ.get(c)}:
Oea,l2={};l2={};var m2={},n2=l2,Wea=Object.prototype.hasOwnProperty;m2=function(c){for(var h=c.name+"",d=n2[h],k=Wea.call(n2,h)?d.length:0;k--;){var n=d[k],b=n.func;if(null==b||b==c)return n.name}return h};var Xea={},Yea=m2,Zea=Xea=function(c){var h=Yea(c),d=Tea[h];if("function"!=typeof d||!(h in NQ.prototype))return!1;if(c===d)return!0;h=k2(d);return!!h&&c===h[0]},$ea={},o2=$ea=LJ?function(c,h){LJ.set(c,h);return c}:JQ,afa={},MJ=afa=function(c){return function(){var h=arguments;switch(h.length){case 0:return new c;
case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var d=LQ(c.prototype);h=c.apply(d,h);return dC(h)?h:d}},NJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bfa={},cfa=bfa=function(c,h,d){function k(){return((this||NJ)&&(this||NJ)!==
Lz&&(this||NJ)instanceof k?b:c).apply(n?d:this||NJ,arguments)}var n=h&1,b=MJ(c);return k},dfa={},efa=Math.max,p2=dfa=function(c,h,d,k){var n=-1,b=c.length,e=d.length,l=-1,a=h.length,f=efa(b-e,0),m=Array(a+f);for(k=!k;++l<a;)m[l]=h[l];for(;++n<e;)if(k||n<b)m[d[n]]=c[n];for(;f--;)m[l++]=c[n++];return m},ffa={},gfa=Math.max,q2=ffa=function(c,h,d,k){var n=-1,b=c.length,e=-1,l=d.length,a=-1,f=h.length,m=gfa(b-l,0),q=Array(m+f);for(k=!k;++n<m;)q[n]=c[n];for(m=n;++a<f;)q[m+a]=h[a];for(;++e<l;)if(k||n<b)q[m+
d[e]]=c[n++];return q},hfa={},ifa=hfa=function(c,h){for(var d=c.length,k=0;d--;)c[d]===h&&++k;return k},jfa={},r2=jfa=Z1(o2),kfa={},lfa=/\{\n\/\* \[wrapped with (.+)\] \*/,mfa=/,? & /,nfa=kfa=function(c){return(c=c.match(lfa))?c[1].split(mfa):[]},ofa={},pfa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qfa=ofa=function(c,h){var d=h.length;if(!d)return c;var k=d-1;h[k]=(1<d?"& ":"")+h[k];h=h.join(2<d?", ":" ");return c.replace(pfa,"{\n/* [wrapped with "+h+"] */\n")},s2={},rfa=[["ary",128],["bind",1],
["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];s2=function(c,h){sea(rfa,function(d){var k="_."+d[0];h&d[1]&&!Mea(c,k)&&c.push(k)});return c.sort()};var sfa={},tfa=s2,t2=sfa=function(c,h,d){h+="";return pea(c,qfa(h,tfa(nfa(h),d)))},ufa={},u2=ufa=function(c,h,d,k,n,b,e,l,a,f){var m=h&8;h=(h|(m?32:64))&~(m?64:32);h&4||(h&=-4);n=[c,h,n,m?b:void 0,m?e:void 0,m?void 0:b,m?void 0:e,l,a,f];d=d.apply(void 0,n);Zea(c)&&r2(d,n);d.placeholder=k;return t2(d,
c,h)},vfa={},v2=vfa=function(c){return c.placeholder},wfa={},xfa=Math.min,yfa=wfa=function(c,h){for(var d=c.length,k=xfa(h.length,d),n=V1(c);k--;){var b=h[k];c[k]=hea(b,d)?n[b]:void 0}return c},zfa={},OJ=zfa=function(c,h){for(var d=-1,k=c.length,n=0,b=[];++d<k;){var e=c[d];if(e===h||"__lodash_placeholder__"===e)c[d]="__lodash_placeholder__",b[n++]=d}return b},mG="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Afa={},z7=p2,A7=q2,y7=ifa,KT=MJ,C7=u2,x7=v2,D7=yfa,B7=OJ,
E7=Lz,w2=Afa=XC,PJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Bfa={},Cfa=Bfa=function(c,h,d){function k(){for(var b=arguments.length,e=Array(b),l=b,a=v2(k);l--;)e[l]=arguments[l];l=3>b&&e[0]!==a&&e[b-1]!==a?[]:OJ(e,a);b-=l.length;return b<d?u2(c,h,w2,k.placeholder,void 0,e,l,void 0,void 0,d-b):X1((this||PJ)&&(this||PJ)!==Lz&&(this||PJ)instanceof k?n:c,this||PJ,e)}var n=MJ(c);return k},QJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,Dfa={},Efa=Dfa=function(c,h,d,k){function n(){for(var l=-1,a=arguments.length,f=-1,m=k.length,q=Array(m+a),r=(this||QJ)&&(this||QJ)!==Lz&&(this||QJ)instanceof n?e:c;++f<m;)q[f]=k[f];for(;a--;)q[f++]=arguments[++l];return X1(r,b?d:this||QJ,q)}var b=h&1,e=MJ(c);return n},x2={},Ffa=Math.min;x2=function(c,h){var d=c[1],k=h[1],n=d|k,b=128==k&&8==d||128==k&&256==d&&c[7].length<=h[8]||384==k&&h[7].length<=h[8]&&8==d;if(!(131>n||b))return c;k&1&&(c[2]=h[2],n|=d&1?0:4);if(d=h[3])b=c[3],c[3]=b?p2(b,
d,h[4]):d,c[4]=b?OJ(c[3],"__lodash_placeholder__"):h[4];if(d=h[5])b=c[5],c[5]=b?q2(b,d,h[6]):d,c[6]=b?OJ(c[5],"__lodash_placeholder__"):h[6];(d=h[7])&&(c[7]=d);k&128&&(c[8]=null==c[8]?h[8]:Ffa(c[8],h[8]));null==c[9]&&(c[9]=h[9]);c[0]=h[0];c[1]=n;return c};var y2={},Gfa=x2,z2=Math.max;y2=function(c,h,d,k,n,b,e,l){var a=h&2;if(!a&&"function"!=typeof c)throw new TypeError("Expected a function");var f=k?k.length:0;f||(h&=-97,k=n=void 0);e=void 0===e?e:z2(f2(e),0);l=void 0===l?l:f2(l);f-=n?n.length:0;
if(h&64){var m=k,q=n;k=n=void 0}var r=a?void 0:k2(c);b=[c,h,d,k,n,m,q,b,e,l];r&&Gfa(b,r);c=b[0];h=b[1];d=b[2];k=b[3];n=b[4];l=b[9]=void 0===b[9]?a?0:c.length:z2(b[9]-f,0);!l&&h&24&&(h&=-25);d=h&&1!=h?8==h||16==h?Cfa(c,h,l):32!=h&&33!=h||n.length?w2.apply(void 0,b):Efa(c,h,d,k):cfa(c,h,d);return t2((r?o2:r2)(d,b),c,h)};var Hfa={},Ifa=y2,Jfa=Hfa=function(c,h,d){h=d?void 0:h;h=c&&null==h?c.length:h;return Ifa(c,128,void 0,void 0,void 0,void 0,h)},OQ={};Object.defineProperty(OQ,"__esModule",{value:!0});
OQ.default=function(c){var h=c.types,d=function(n){return function(b){var e=n[b.type];if(e)return e(b);throw Error(b.type+" could not be transformed");}},k=function(n,b){var e=b.opts;b=e.useNew;var l=void 0===b?!1:b;b=e.module;var a=e.function;e=e.useVariables;var f=void 0===e?!1:e,m=e=void 0;!0===f?e=/^[A-Z]/:(0,Kfa.default)(f)&&(e=new RegExp(f));var q=l?h.newExpression:h.callExpression;m=function(r){return function(u){return q(r,[u])}};b?(l=n.scope.generateUidIdentifier(l?"JSXNode":"jsx"),m=m(l),
b=h.importDeclaration([h.importDefaultSpecifier(l)],h.stringLiteral(b)),n.findParent(function(r){return r.isProgram()}).unshiftContainer("body",b)):a?(n=a.split(".").map((0,A2.default)(h.identifier,1)).reduce((0,A2.default)(h.memberExpression,2)),m=m(n)):m=Lfa.default;return{variablesRegex:e,jsxObjectTransformer:m}};return{inherits:yda,visitor:{JSXElement:function(n,b){b.get("jsxConfig")||b.set("jsxConfig",k(n,b));var e=b.get("jsxConfig"),l=e.variablesRegex,a=e.jsxObjectTransformer,f=function(C){return h.stringLiteral(C.name)},
m=function(C){return h.stringLiteral(C.namespace.name+":"+C.name.name)},q=d({JSXIdentifier:function(C){return h.identifier(C.name)},JSXMemberExpression:function(C){return h.memberExpression(q(C.object),q(C.property))}}),r=d({JSXIdentifier:l?function(C){return l.test(C.name)?h.identifier(C.name):f(C)}:f,JSXNamespacedName:m,JSXMemberExpression:q});e=function(C){return C.expression};var u=d({JSXIdentifier:f,JSXNamespacedName:m,JSXMemberExpression:q}),v=d({StringLiteral:function(C){return C},JSXExpressionContainer:e}),
y=function(C){var G=[],F=[];C.forEach(function(N){switch(N.type){case "JSXAttribute":G||(G=[]);var L=u(N.name);L=Mfa.default.keyword.isIdentifierNameES6(L.value)?h.identifier(L.value):L;G.push(h.objectProperty(L,v(N.value)));break;case "JSXSpreadAttribute":G&&(F.push(h.objectExpression(G)),G=null);F.push(N.argument);break;default:throw Error(N.type+" cannot be used as a JSX attribute");}});G&&0<G.length&&F.push(h.objectExpression(G));return 0===F.length?h.objectExpression([]):1===F.length?F[0]:h.callExpression(b.addHelper("extends"),
F)};m=function(C){return a(h.objectExpression([h.objectProperty(h.identifier(Nfa),r(C.openingElement.name)),h.objectProperty(h.identifier(Ofa),y(C.openingElement.attributes)),h.objectProperty(h.identifier(Pfa),C.closingElement?B(C.children):h.nullLiteral())]))};var z=d({JSXText:function(C){if(b.opts.noTrim)return h.stringLiteral(C.value);C=C.value.replace(/\n\s*/g,"");return""===C?null:h.stringLiteral(C)},JSXElement:m,JSXExpressionContainer:e}),B=function(C){return h.arrayExpression(C.map(z).filter(Boolean).reduce(function(G,
F){var N=0<G.length?G[G.length-1]:null;return"StringLiteral"===F.type&&N&&"StringLiteral"===N.type?[].concat(Jm(G.slice(0,-1)),[h.stringLiteral(N.value+F.value)]):[].concat(Jm(G),[F])},[]))};n.replaceWith(m(n.node))}}}};var Kfa=zt(Mda),Lfa=zt(JQ),A2=zt(Jfa),Mfa=zt(xE),Nfa="elementName",Ofa="attributes",Pfa="children",ME={};Object.defineProperty(ME,"__esModule",{value:!0});ME.declare=function(c){return function(h,d,k){for(var n,b,e=$jscomp.makeIterator(Object.keys(B2)),l=e.next();!l.done;l=e.next())if(l=
l.value,!h[l]){if(null==b){b=h;var a=null;"string"===typeof b.version&&/^7\./.test(b.version)&&(a=Object.getPrototypeOf(b),!a||Object.prototype.hasOwnProperty.call(a,"version")&&Object.prototype.hasOwnProperty.call(a,"transform")&&Object.prototype.hasOwnProperty.call(a,"template")&&Object.prototype.hasOwnProperty.call(a,"types")||(a=null));b=Object.assign({},a,b)}b[l]=B2[l](b)}return c(null!=(n=b)?n:h,d||{},k)}};var B2={assertVersion:function(c){return function(h){var d=c.version;if("number"===typeof h){if(!Number.isInteger(h))throw Error("Expected string or integer value.");
h="^"+h+".0.0-0"}if("string"!==typeof h)throw Error("Expected string or integer value.");var k=Error.stackTraceLimit;"number"===typeof k&&25>k&&(Error.stackTraceLimit=25);var n="7."===d.slice(0,2)?Error('Requires Babel "^7.0.0-beta.41", but was loaded with "'+d+"\". You'll need to update your @babel/core version."):Error('Requires Babel "'+h+'", but was loaded with "'+d+'". If you are sure you have a compatible version of @babel/core, it is likely that something in your build process is loading the wrong version. Inspect the stack trace of this error to look for the first entry that doesn\'t mention "@babel/core" or "babel-core" to see what is calling Babel.');
"number"===typeof k&&(Error.stackTraceLimit=k);throw Object.assign(n,{code:"BABEL_VERSION_UNSUPPORTED",version:d,range:h});}},targets:function(){return function(){return{}}},assumption:function(){return function(){}}},Mz={};Object.defineProperty(Mz,"__esModule",{value:!0});Mz.default=void 0;var Qfa=(0,ME.declare)(function(c){c.assertVersion(7);return{name:"syntax-optional-catch-binding",manipulateOptions:function(h,d){d.plugins.push("optionalCatchBinding")}}});Mz.default=Qfa;var RJ={};Object.defineProperty(RJ,
"__esModule",{value:!0});RJ.default=void 0;var Rfa=Mz&&Mz.__esModule?Mz:{default:Mz},Sfa=(0,ME.declare)(function(c){c.assertVersion(7);return{name:"proposal-optional-catch-binding",inherits:Rfa.default,visitor:{CatchClause:function(h){if(!h.node.param){var d=h.scope.generateUidIdentifier("unused");h.get("param").replaceWith(d)}}}}});RJ.default=Sfa;var SJ={};Object.defineProperty(SJ,"__esModule",{value:!0});SJ.default=void 0;var Tfa=(0,ME.declare)(function(c){c.assertVersion(7);return{name:"syntax-import-meta",
manipulateOptions:function(h,d){d.plugins.push("importMeta")}}});SJ.default=Tfa;var Ii=lively.FreezerRuntime.recorderFor("lively.source-transform/index.js");Ii.ensureJSXPlugin=function(){Ii.transformJSX&&("undefined"===typeof babel||babel.availablePlugins["transform-jsx"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("transform-jsx",Ii.transformJSX.default))};Ii.ensureOptionalCatchBinding=function(){Ii.catchBinding&&("undefined"===typeof babel||babel.availablePlugins["optional-catch-binding"]||
(lively||global.lively).FreezerRuntime||babel.registerPlugin("optional-catch-binding",Ii.catchBinding.default))};Ii.ensureImportMeta=function(){Ii.importMeta&&("undefined"===typeof babel||babel.availablePlugins["syntax-import-meta"]||(lively||global.lively).FreezerRuntime||babel.registerPlugin("syntax-import-meta",Ii.importMeta.default))};Ii.stringifyFunctionWithoutToplevelRecorder=Gn;Ii.es5Transpilation=ip;Ii.capturing=KE;Ii.capturing=KE;Ii.capturing=KE;Ii.parseFunction=xq;Ii.stringify=rg;Ii.ReplaceVisitor=
ys;Ii.transformJSX=OQ;Ii.catchBinding=RJ;Ii.importMeta=SJ;Ii.stringifyFunctionWithoutToplevelRecorder=Gn;Ii.stringifyFunctionWithoutToplevelRecorder=Gn;Ii.es5Transpilation=ip;Ii.es5Transpilation=ip;var Ufa=Object.freeze({__proto__:null,capturing:KE,stringifyFunctionWithoutToplevelRecorder:Gn,es5Transpilation:ip}),Lf=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-support.js");Lf.processInlineCodeTransformOptions=function(c,h){if(!c.comments)return h;c=c.comments.find(function(k){return k.text.startsWith("lively.vm ")});
if(!c)return h;try{var d=eval("inlineOptions = {"+c.text.slice(10)+"};");return Object.assign(h,d)}catch(k){return h}};Lf.evalCodeTransform=nk;Lf.evalCodeTransformOfSystemRegisterSetters=uo;Lf.copyProperties=function(c,h,d){d=void 0===d?[]:d;Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c)).forEach(function(k){return-1===d.indexOf(k)&&Object.defineProperty(h,k,Object.getOwnPropertyDescriptor(c,k))})};Lf.arr=Qe;Lf.Path=Cg;Lf.parse=sg;Lf.stringify=rg;Lf.transform=Kz;Lf.query=zs;
Lf.nodes=aw;Lf.capturing=KE;Lf.es5Transpilation=ip;Lf.getGlobal=to;var TJ=Lf.nodes;Lf.id=TJ.id;Lf.literal=TJ.literal;Lf.member=TJ.member;Lf.objectLiteral=TJ.objectLiteral;Lf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Lf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Lf.defaultDeclarationWrapperName="lively.capturing-declaration-wrapper";Lf.defaultClassToFunctionConverterName="initializeES6ClassForLively";Lf.defaultClassToFunctionConverterName="initializeES6ClassForLively";
Lf.defaultClassToFunctionConverterName="initializeES6ClassForLively";Lf.evalCodeTransform=nk;Lf.evalCodeTransform=nk;Lf.evalCodeTransformOfSystemRegisterSetters=uo;Lf.evalCodeTransformOfSystemRegisterSetters=uo;var bg=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval.js");bg._normalizeEvalOptions=function(c){c||(c={});c=Object.assign({targetModule:null,sourceURL:c.targetModule,runtime:null,context:bg.getGlobal(),varRecorderName:bg.defaultTopLevelVarRecorderName,dontTransform:[],recordGlobals:null,
returnPromise:!0,promiseTimeout:200,waitForPromise:!0,wrapInStartEndCall:!1,onStartEval:null,onEndEval:null},c);if(c.targetModule){var h=c.runtime&&c.runtime.modules&&c.runtime.modules[c.targetModule];h&&(c=Object.assign(c,h))}c.wrapInStartEndCall&&(c.startFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",value:bg.startEvalFunctionName},computed:!0},c.endFuncNode={type:"MemberExpression",object:{type:"Identifier",name:c.varRecorderName},property:{type:"Literal",
value:bg.endEvalFunctionName},computed:!0});return c};bg.runEval=Nw;bg.finishEval=function(c,h,d,k,n,b,e){k.wrapInStartEndCall&&(delete n[bg.startEvalFunctionName],delete n[bg.endEvalFunctionName]);c?(d.isError=!0,d.value=c):d.value=h;d.value instanceof Promise&&(d.isPromise=!0);if(k.sync){if(d.processSync(k),"function"===typeof k.onEndEval)k.onEndEval(c,h)}else d.process(k).then(function(){"function"===typeof e&&e(null,d);"function"===typeof k.onEndEval&&k.onEndEval(c,h);return d},function(l){"function"===
typeof e&&e(l,void 0);"function"===typeof k.onEndEval&&k.onEndEval(l,void 0);return d}).then(b.resolve,b.reject)};bg.syncEval=Rk;bg.tryToWaitForPromise=function(c,h){console.assert(c.isPromise,"no promise in tryToWaitForPromise???");var d={},k=new Promise(function(n){return setTimeout(n,h,d)});return Promise.race([k,c.value]).then(function(n){return Object.assign(c,n!==d?{promiseStatus:"fulfilled",promisedValue:n}:{promiseStatus:"pending"})}).catch(function(n){return Object.assign(c,{promiseStatus:"rejected",
promisedValue:n})})};bg.arr=Qe;bg.obj=lf;bg.string=Hg;bg.Path=Cg;bg.promise=oe;bg.Closure=Fi;bg.evalCodeTransform=nk;bg.printEvalResult=Kw;bg.getGlobal=to;bg.defaultTopLevelVarRecorderName="__lvVarRecorder";bg.startEvalFunctionName="lively.vm-on-eval-start";bg.endEvalFunctionName="lively.vm-on-eval-end";bg._eval=bg.Closure.fromSource("function _eval(__lvEvalStatement, __lvVarRecorder/*needed as arg for capturing*/, __lvOriginalCode) {\n  return eval(__lvEvalStatement);\n}").getFunc();var NE=function(){this.isEvalResult=
!0;this.value=void 0;this.warnings=[];this.isPromise=this.isError=!1;this.promisedValue=void 0;this.promiseStatus="unknown"};NE.prototype.addWarning=function(c){this.warnings.push(c);return c};NE.prototype.printed=function(c){c=void 0===c?{}:c;this.value=bg.printEvalResult(this,c)};NE.prototype.processSync=function(c){if(c.inspect||c.asString)this.value=this.print(this.value,c);return this};NE.prototype.process=function(c){var h=this;if(h.isPromise&&c.waitForPromise)return bg.tryToWaitForPromise(h,
c.promiseTimeout).then(function(){(c.inspect||c.asString)&&h.printed(c);return h});(c.inspect||c.asString)&&h.printed(c);return Promise.resolve(h)};bg.EvalResult=NE;var eC=bg.defaultTopLevelVarRecorderName;bg.defaultTopLevelVarRecorderName=eC;bg.defaultTopLevelVarRecorderName=eC;bg.getGlobal=to;bg.getGlobal=to;bg.runEval=Nw;bg.runEval=Nw;bg.syncEval=Rk;bg.syncEval=Rk;var Vfa=Object.freeze({__proto__:null,defaultTopLevelVarRecorderName:eC,getGlobal:to,runEval:Nw,syncEval:Rk}),If=lively.FreezerRuntime.recorderFor("lively.notifications/index.js");
If.getEnv=function(c){if(void 0===c){if("undefined"===typeof System)return void 0!==If.env?If.env:If.env||(If.env={emitter:If.events.makeEmitter({},{maxListenerLimit:1E4}),notifications:[]});c=System}var h=c.get("@lively-env");h||c.set("@lively-env",c.newModule({options:{}}));h=h.options;if(!h)throw Error("@lively-env registered read-only");h.emitter||Object.assign(h,{emitter:c["__lively.notifications_emitter"]||(c["__lively.notifications_emitter"]=If.events.makeEmitter({},{maxListenerLimit:1E4})),
notifications:c["__lively.notifications_notifications"]||(c["__lively.notifications_notifications"]=[])});return{emitter:h.emitter,notifications:h.notifications}};If.subscribe=Hn;If.subscribeOnce=In;If.emit=Jn;If.unsubscribe=vo;If.unsubscribeAll=sv;If.record=function(c,h){c.push(h);c.limit&&c.splice(0,c.length-c.limit)};If.startRecording=Ur;If.stopRecording=Vr;If.clearRecord=tv;If.getRecord=Ow;If.log=function(c){var h=c.type+" ".repeat(Math.max(0,32-c.type.length));console.log(h+" "+If.obj.inspect(c,
{maxDepth:2}))};If.startLogging=At;If.stopLogging=Pw;If.events=Gx;If.obj=lf;If.env=null;If.subscribe=Hn;If.subscribe=Hn;If.subscribeOnce=In;If.subscribeOnce=In;If.emit=Jn;If.emit=Jn;If.unsubscribe=vo;If.unsubscribe=vo;If.unsubscribeAll=sv;If.unsubscribeAll=sv;If.startRecording=Ur;If.startRecording=Ur;If.stopRecording=Vr;If.stopRecording=Vr;If.clearRecord=tv;If.clearRecord=tv;If.getRecord=Ow;If.getRecord=Ow;If.startLogging=At;If.startLogging=At;If.stopLogging=Pw;If.stopLogging=Pw;var nh=lively.FreezerRuntime.recorderFor("lively.vm/lib/esm-eval.js");
nh.ensureImportsAreImported=function(c,h,d){var k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=nh.parse(h),n=k.body,b=n.filter(function(l){return"ImportDeclaration"===l.type}),e.yield(Promise.all(b.map(function(l){return c.normalize(l.source.value,d).then(function(a){l.source.value=a;return c.get(a)||c.import(a)})})).catch(function(l){console.error("Error ensuring imports: "+l.message);throw l;}),2)):e.return(nh.stringify(k))})};nh.hasUnimportedImports=
function(c,h,d){h=nh.parse(h).body.filter(function(k){return"ImportDeclaration"===k.type});return 0<nh.arr.uniq(h.map(function(k){return k.source.value})).filter(Boolean).filter(function(k){return!c.get(c.decanonicalize(k,d))}).length};nh.babelTranspilerForAsyncAwaitCode=function(c,h,d,k){return function(n,b){b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:d,code:!0,ast:!1},b);n=h.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};nh.babelPluginTranspilerForAsyncAwaitCode=function(c,h,d,k){return function(n,b){var e=c.babelOptions||{},l=[];l.push(h.presetES2015);e.stage3&&l.push({plugins:h.pluginsStage3});e.stage2&&l.push({plugins:h.pluginsStage2});e.stage1&&l.push({plugins:h.pluginsStage1});b=Object.assign({sourceMap:void 0,inputSourceMap:void 0,filename:d,babelrc:!1,presets:l,moduleIds:!1,code:!0,ast:!1},b);n=h.babel.transform("(async function(__rec) {\n"+n+"\n}).call(this);",b).code;return n=n.replace(/\}\)\.call\(undefined\);$/,
"}).call(this)")}};nh.getEs6Transpiler=function(c,h,d){if(h.transpiler)return h.transpiler;if(!h.es6Transpile)return null;if("babel"===c.transpiler){var k=c.global[c.transpiler]||c.get(c.decanonicalize(c.transpiler));return k?nh.babelTranspilerForAsyncAwaitCode(c,k,h.targetModule,d):c.import(c.transpiler).then(function(e){return nh.babelTranspilerForAsyncAwaitCode(c,e,h.targetModule,d)})}if("plugin-babel"===c.transpiler){k=c.decanonicalize("plugin-babel").split("/").slice(0,-1).concat("systemjs-babel-browser.js").join("/");
var n=c.get(k);return n?nh.babelPluginTranspilerForAsyncAwaitCode(c,n,h.targetModule,d):c.import(k).then(function(e){return nh.babelPluginTranspilerForAsyncAwaitCode(c,e,h.targetModule,d)})}if("lively.transpiler"===c.transpiler){var b=new (c.get(c.decanonicalize("lively.transpiler")).default)(c,h.targetModule,d);return function(e,l){return b.transpileDoit(e,l)}}throw Error("Sorry, currently only babel is supported as es6 transpiler for runEval!");};nh.runEval=wo;nh.evalEnd=function(c,h,d,k){c.get("@lively-env").evaluationEnd(d.targetModule);
c.debug&&console.log("[lively.module] runEval in module "+d.targetModule+" done");nh.emit("lively.vm/doitresult",{code:h,result:k,waitForPromise:d.waitForPromise,targetModule:d.targetModule},Date.now(),c);return k};nh.parse=sg;nh.nodes=aw;nh.stringify=rg;nh.emit=Jn;var UJ=nh.nodes;nh.funcCall=UJ.funcCall;nh.member=UJ.member;nh.id=UJ.id;nh.literal=UJ.literal;nh.arr=Qe;nh.vmRunEval=Nw;nh.runEval=wo;nh.runEval=wo;var Wfa=Object.freeze({__proto__:null,runEval:wo}),Vi=lively.FreezerRuntime.recorderFor("lively.vm/lib/eval-strategies.js");
Vi.obj=lf;var fC=function(){};fC.prototype.runEval=function(c,h){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Promise.reject("runEval(source, options) not yet implemented for "+d.constructor.name))})};fC.prototype.keysOfObject=function(c,h){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(Promise.reject("keysOfObject(prefix, options) not yet implemented for "+d.constructor.name))})};Vi.EvalStrategy=fC;var Nz=function(){return Vi.EvalStrategy.apply(this,
arguments)||this};$jscomp.inherits(Nz,Vi.EvalStrategy);Nz.prototype.runEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.return(Promise.resolve().then(function(){try{return Promise.resolve({value:eval(c)})}catch(k){return{isError:!0,value:k}}}))})};Nz.prototype.keysOfObject=function(c,h){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(lively.vm.completions.getCompletions(function(b){return d.runEval(b,
h)},c),2);k=n.yieldResult;return n.return({completions:k.completions,prefix:k.startLetters})})};Vi.SimpleEvalStrategy=Nz;var Mx=function(){return Vi.EvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Mx,Vi.EvalStrategy);Mx.prototype.normalizeOptions=function(c){if(!c.targetModule)throw Error("runEval called but options.targetModule not specified!");return Object.assign({sourceURL:c.targetModule+"_doit_"+Date.now()},c)};Mx.prototype.runEval=function(c,h){var d=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){h=
d.normalizeOptions(h);k=h.System||lively.modules.System;n={};k.config({meta:(n[h.targetModule]={format:"esm"},n)});return b.return(lively.vm.runEval(c,h))})};Mx.prototype.keysOfObject=function(c,h){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(lively.vm.completions.getCompletions(function(n){return lively.vm.runEval(n,h)},c),2);d=k.yieldResult;return k.return({completions:d.completions,prefix:d.startLetters})})};Vi.LivelyVmEvalStrategy=Mx;
var Nx=function(){return Vi.LivelyVmEvalStrategy.apply(this,arguments)||this};$jscomp.inherits(Nx,Vi.LivelyVmEvalStrategy);Nx.prototype.sourceForRemote=function(c,h,d){var k=Vi.obj.isString(d.context)?d.context:!1;d=Vi.obj.dissoc(d,["systemInterface","System","context","classTransform"]);return"\n(function() {\n  var arg = "+JSON.stringify(h)+",\n      options = "+JSON.stringify(d)+';\n  if (typeof lively === "undefined" || !lively.vm) {\n    return Promise.resolve({\n      isEvalResult: true,\n      isError: true,\n      value: \'lively.vm not available!\'\n    });\n  }\n  var hasSystem = typeof System !== "undefined"\n  options.context = '+
k+';\n  options.classTransform = lively.classes.classToFunctionTransform;\n  if (!options.context) {\n    options.context = hasSystem\n      ? System.global\n      : typeof window !== "undefined"\n          ? window\n          : typeof global !== "undefined"\n              ? global\n              : typeof self !== "undefined" ? self : this;\n  }\n  async function evalFunction(source, options) {\n    if (hasSystem) {\n      var conf = {meta: {}}; conf.meta[options.targetModule] = {format: "esm"};\n      System.config(conf);\n    } else {\n      options = Object.assign({topLevelVarRecorderName: "GLOBAL"}, options);\n      delete options.targetModule;\n    }\n    let res = await lively.vm.runEval(source, options);\n    try {\n       JSON.stringify(res.value);\n    } catch(e) {\n       res.value = String(res.value);\n    }\n    return res;\n  }\n  function keysOfObjectFunction(prefix, options) {\n    return lively.vm.completions.getCompletions(code => evalFunction(code, options), prefix)\n      .then(result => ({isEvalResult: true, completions: result.completions, prefix: result.startLetters}));\n  }\n  return '+
("eval"===c?"evalFunction":"keysOfObjectFunction")+"(arg, options)\n    .catch(err => ({isEvalResult: true, isError: true, value: String(err.stack || err)}));\n})();\n"};Nx.prototype.runEval=function(c,h){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d.remoteEval(d.sourceForRemote("eval",c,h),h))})};Nx.prototype.keysOfObject=function(c,h){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d.remoteEval(d.sourceForRemote("keysOfObject",
c,h),h))})};Nx.prototype.remoteEval=function(c,h){var d=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.setCatchFinallyBlocks(2),b.yield(d.basicRemoteEval(c,h),4);if(2!=b.nextAddress)return k=b.yieldResult,b.return("string"===typeof k?JSON.parse(k):k);n=b.enterCatchBlock();return b.return({isError:!0,value:"Remote eval failed: "+(k||n)})})};Nx.prototype.basicRemoteEval=function(c,h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){throw Error("Not yet implemented");
})};Vi.RemoteEvalStrategy=Nx;var nu=function(c){var h=Vi.RemoteEvalStrategy.call(this)||this;h.url=c||h.constructor.defaultURL;return h};$jscomp.inherits(nu,Vi.RemoteEvalStrategy);nu.prototype.normalizeOptions=function(c){c=Vi.RemoteEvalStrategy.prototype.normalizeOptions.call(this,c);return Object.assign({serverEvalURL:this.url},c,{context:null})};nu.prototype.basicRemoteEval=function(c,h){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(h=d.normalizeOptions(h),
k="basicRemoteEval_"+(System.get("@system-env").node?"node":"web"),n.yield(d[k]({method:"POST",body:c},h.serverEvalURL),2)):n.return(n.yieldResult)})};nu.prototype.basicRemoteEval_web=function(c,h){var d,k,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:d=$jscomp.makeIterator(h.match(/[^:]+:\/\/[^\/]+/)||[h]);k=d.next().value;n=System.get("@system-env").worker?window.location:document.location;if(b=n.origin!==k)c.headers=Object.assign({},c.headers,
{pragma:"no-cache","cache-control":"no-cache","x-lively-proxy-request":h}),h=n.origin;a.setCatchFinallyBlocks(2);return a.yield(window.fetch(h,c),4);case 4:e=a.yieldResult;a.leaveTryBlock(3);break;case 2:throw l=a.enterCatchBlock(),Error("Cannot reach server at "+h+": "+l.message);case 3:if(!e.ok)throw Error("Server at "+h+": "+e.statusText);return a.return(e.text())}})};nu.prototype.basicRemoteEval_node=function(c,h){var d,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){d=System._nodeRequire("url").parse;
k=System._nodeRequire(h.startsWith("https:")?"https":"http");n=Object.assign({method:c.method||"GET"},d(h));return b.return(new Promise(function(e,l){var a=k.request(n,function(f){f.setEncoding("utf8");var m="";f.on("data",function(q){return m+=q});f.on("end",function(){return e(m)});f.on("error",function(q){return l(q)})});a.on("error",function(f){return l(f)});a.end(c.body)}))})};$jscomp.global.Object.defineProperties(nu,{defaultURL:{configurable:!0,enumerable:!0,get:function(){return"http://localhost:3000/lively"}}});
Vi.HttpEvalStrategy=nu;var gC=function(c,h){var d=Vi.RemoteEvalStrategy.call(this)||this;d.l2lClient=c;d.targetId=h;return d};$jscomp.inherits(gC,Vi.RemoteEvalStrategy);gC.prototype.basicRemoteEval=function(c,h){var d=this,k,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return k=d,n=k.l2lClient,b=k.targetId,a.yield(n.sendToAndWait(b,"remote-eval",{source:c},{ackTimeout:h.ackTimeout||3500}),2);e=a.yieldResult;(l=e.data)&&l.value&&l.value.isEvalResult&&(l=
l.value);return a.return(l)})};Vi.L2LEvalStrategy=gC;Vi.EvalStrategy=fC;Vi.EvalStrategy=fC;Vi.SimpleEvalStrategy=Nz;Vi.SimpleEvalStrategy=Nz;Vi.LivelyVmEvalStrategy=Mx;Vi.LivelyVmEvalStrategy=Mx;Vi.HttpEvalStrategy=nu;Vi.HttpEvalStrategy=nu;Vi.L2LEvalStrategy=gC;Vi.L2LEvalStrategy=gC;var OE=Object.freeze({__proto__:null,RemoteEvalStrategy:Nx,EvalStrategy:fC,SimpleEvalStrategy:Nz,LivelyVmEvalStrategy:Mx,HttpEvalStrategy:nu,L2LEvalStrategy:gC});wa("bt",OE);var Oj=lively.FreezerRuntime.recorderFor("lively.vm/index.js");
Oj.runEval=Wr;Oj.syncEval=Bt;Oj.completions=JE;Oj.completions=JE;Oj.completions=JE;Oj.globalEval=Vfa;Oj.esmEval=Wfa;Oj.defaultTopLevelVarRecorderName=eC;Oj.defaultTopLevelVarRecorderName=eC;Oj.defaultClassToFunctionConverterName="initializeES6ClassForLively";Oj.defaultClassToFunctionConverterName="initializeES6ClassForLively";Oj.evalCodeTransform=nk;Oj.evalCodeTransform=nk;Oj.evalCodeTransformOfSystemRegisterSetters=uo;Oj.evalCodeTransformOfSystemRegisterSetters=uo;Oj.runEval=Wr;Oj.runEval=Wr;Oj.syncEval=
Bt;Oj.syncEval=Bt;Oj.evalStrategies=OE;Oj.evalStrategies=OE;Oj.evalStrategies=OE;var C2=Object.freeze({__proto__:null,completions:JE,defaultTopLevelVarRecorderName:eC,defaultClassToFunctionConverterName:"initializeES6ClassForLively",evalCodeTransform:nk,evalCodeTransformOfSystemRegisterSetters:uo,runEval:Wr,syncEval:Bt,evalStrategies:OE});wa("bs",C2);var Nh=lively.FreezerRuntime.recorderFor("lively.classes/source-descriptors.js");Nh.string=Hg;Nh.arr=Qe;Nh.parse=sg;Nh.query=zs;Nh.runEval=Wr;Nh.objMetaSym=
Symbol.for("lively-object-meta");Nh.moduleSym=Symbol.for("lively-module-meta");Nh.descriptorCache=new Map;var hC=function(c,h){c&&h?this.update(h,c):this.reset()};hC.prototype.reset=function(){this._sourceLocation=null;this._source="";this._ast=null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};hC.prototype.update=function(c,h){this._moduleSource===c&&h&&this._sourceLocation&&h.start===this._sourceLocation.start&&h.end===this._sourceLocation.end||
(this.reset(),this._moduleSource=c,this._sourceLocation=h)};hC.prototype.changeSource=function(c){var h=this.moduleSource,d=this.sourceLocation,k=d.start;d=d.end;h=h.slice(0,k)+c+h.slice(d);this.update(h,{start:k,end:k+c.length});this._source=c;return this};hC.prototype.toString=function(){var c=Nh.string.truncate(this._source||"NO SOURCE",35).replace(/\n/g,"");return this.constructor.name+"("+c+")"};$jscomp.global.Object.defineProperties(hC.prototype,{sourceLocation:{configurable:!0,enumerable:!0,
get:function(){if(!this._sourceLocation)throw Error("_sourceLocation not defined");return this._sourceLocation}},moduleSource:{configurable:!0,enumerable:!0,get:function(){if(!this._moduleSource)throw Error("_moduleSource not defined!");return this._moduleSource}},moduleAst:{configurable:!0,enumerable:!0,get:function(){return this._moduleAst||(this._moduleAst=Nh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){return this._moduleScope||(this._moduleScope=
Nh.query.topLevelDeclsAndRefs(this.ast).scope)}},moduleImports:{configurable:!0,enumerable:!0,get:function(){return this._moduleImports||(this._moduleImports=Nh.query.imports(this.moduleScope))}},ast:{configurable:!0,enumerable:!0,get:function(){if(this._ast)return this._ast;var c=Nh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},source:{configurable:!0,enumerable:!0,get:function(){if(this._source)return this._source;var c=this.sourceLocation;
return this._source=this.moduleSource.slice(c.start,c.end)}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=Nh.query.topLevelDeclsAndRefs(this.moduleAst).declaredNames,d=Nh.arr.uniq(this.moduleImports.map(function(n){return n.local})),k=Nh.arr.withoutAll(h,d);c=Nh.arr.withoutAll(Nh.query.findGlobalVarRefs(c).map(function(n){return n.name}),
h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:d,localDeclaredNames:k,undeclaredNames:c}}}});Nh.SourceDescriptor=hC;var Mo=function(c,h){this.obj=c;this.System=h;this.reset()};Mo.forObjectWithModuleSource=function(c,h,d){c=this.for(c,d);c.ensureSourceDescriptor(c.sourceLocation,h);return c};Mo.for=function(c,h){var d=Nh.descriptorCache.get(c);d||(d=new this(c,h),Nh.descriptorCache.set(c,d));return d};Mo.prototype.reset=function(){this._source="";this._ast=this._sourceLocation=
null;this._moduleSource="";this._declaredAndUndeclaredNames=this._moduleImports=this._moduleScope=this._moduleAst=null};Mo.prototype.resetIfChanged=function(){var c=this.meta.moduleSource;this._moduleSource&&c&&this._moduleSource!==c&&this.reset()};Mo.prototype.changeSourceSync=function(c){var h=this.System;this._basicChangeSource(c);this.module.changeSource(this.moduleSource,{doSave:!0});c=Nh.runEval(c,{sync:!0,targetModule:this.module.id,System:h});if(c.isError)throw c.value;return this};Mo.prototype.changeSource=
function(c){var h=this,d,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){return 1==n.nextAddress?(d=h,k=d.module,n.yield(k.changeSourceAction(function(b){if(b!==h.moduleSource)throw Error("source of module "+k.id+" and source of "+h+" don't match");h._basicChangeSource(c);return h.moduleSource}),2)):n.return(h)})};Mo.prototype._modifiedSource=function(c){var h=this.moduleSource,d=this.sourceLocation,k=d.start;d=d.end;return{moduleSource:h.slice(0,k)+c+h.slice(d),sourceLocation:{start:k,
end:k+c.length}}};Mo.prototype._renamedSource=function(c){var h=this.ast,d=h.type,k=h.id;h=k.start;k=k.end;if("ClassDeclaration"!==d)throw Error("Don't know how to rename "+d);return this._modifiedSource(this.source.slice(0,h)+c+this.source.slice(k))};Mo.prototype._basicChangeSource=function(c){var h=this.meta,d=this._modifiedSource(c),k=d.moduleSource;d=d.sourceLocation;this.reset();this.meta=Object.assign({},h,{moduleSource:k},d);this._sourceLocation=d;this._moduleSource=k;this._source=c;return this};
Mo.prototype.toString=function(){var c=Nh.string.truncate(this.source||String(this.obj),35).replace(/\n/g,"");try{var h=this.module.shortName()}catch(d){h="NO MODULE!"}return this.constructor.name+"("+c+" in "+h+")"};$jscomp.global.Object.defineProperties(Mo.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this._System||System},set:function(c){this._System=c}},module:{configurable:!0,enumerable:!0,get:function(){var c=this.obj,h=this.System;if(!c[Nh.moduleSym])throw Error("runtime object of source descriptor has no module data");
var d=c[Nh.moduleSym];c=d.package.name;d=d.pathInPackage;c=d.includes("://")?d:c+"/"+d;h=this.System._scripting.module(h,c);h._frozenModule||h._source||!this.moduleSource||h.setSource(this.moduleSource);return h}},meta:{configurable:!0,enumerable:!0,get:function(){var c=this.obj;if(!c[Nh.objMetaSym])throw Error("runtime object of source descriptor has no lively meta data");return c[Nh.objMetaSym]},set:function(c){this.obj[Nh.objMetaSym]=c;c.hasOwnProperty("start")&&c.hasOwnProperty("end")&&(this._sourceLocation=
{start:c.start,end:c.end});c.hasOwnProperty("moduleSource")&&(this._moduleSource=c.moduleSource)}},sourceLocation:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._sourceLocation)return this._sourceLocation;var c=this.meta,h=c.start;c=c.end;if(void 0===h||void 0===c)throw Error("lively meta data has no start/end");return this._sourceLocation={start:h,end:c}}},moduleSource:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._moduleSource)return this._moduleSource;
var c=this.meta.moduleSource;if(void 0===c)throw Error("lively meta data has no moduleSource");return this._moduleSource=c}},moduleAst:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleAst||(this._moduleAst=Nh.parse(this.moduleSource,{withComments:!0}))}},moduleScope:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();return this._moduleScope||(this._moduleScope=Nh.query.topLevelDeclsAndRefs(this.moduleAst).scope)}},moduleImports:{configurable:!0,
enumerable:!0,get:function(){this.resetIfChanged();return this._moduleImports||(this._moduleImports=Nh.query.imports(this.moduleScope))}},declaredAndUndeclaredNames:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._declaredAndUndeclaredNames)return this._declaredAndUndeclaredNames;var c=this.ast,h=Nh.query.topLevelDeclsAndRefs(this.moduleAst,{jslintGlobalComment:!0}).declaredNames,d=Nh.arr.uniq(this.moduleImports.map(function(n){return n.local})),k=Nh.arr.withoutAll(h,d);
c=Nh.arr.withoutAll(Nh.query.findGlobalVarRefs(c).map(function(n){return n.name}),h);return this._declaredAndUndeclaredNames={declaredNames:h,declaredImports:d,localDeclaredNames:k,undeclaredNames:c}}},source:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._source)return this._source;var c=this.sourceLocation;return this._source=this.moduleSource.slice(c.start,c.end)}},ast:{configurable:!0,enumerable:!0,get:function(){this.resetIfChanged();if(this._ast)return this._ast;
var c=Nh.parse(this.source,{withComments:!0}).body[0];"ExpressionStatement"===c.type&&(c=c.expression);return this._ast=c}},type:{configurable:!0,enumerable:!0,get:function(){return this.ast.type}},name:{configurable:!0,enumerable:!0,get:function(){if("ClassDeclaration"===this.type){var c=this.ast.id;return this.source.slice(c.start,c.end)}return"unknown"}}});wa("bJ",Mo);Nh.RuntimeSourceDescriptor=Mo;var ve=lively.FreezerRuntime.recorderFor("lively.classes/util.js");ve.superclasses=uv;ve.getClassHierarchy=
MA;ve.withSuperclasses=De;ve.inheritsFrom=YC;ve.changeClass=ZC;ve.isClass=$C;ve.isOverridden=function(c,h){for(;c!=Object;)if(c=c[Symbol.for("lively-instance-superclass")],c.prototype.hasOwnProperty(h))return!0;return!1};ve.lexicalClassMembers=Qw;ve.runtimeClassMembers=By;ve.runtimeClassMembersInProtoChain=function(c){return ve.arr.uniq(ve.arr.flatmap(ve.arr.without(ve.withSuperclasses(c),Object),function(h){return ve.runtimeClassMembers(h)}))};ve.runtimeNonStaticMembers=function(c){var h=c.prototype,
d=ve.obj.getOwnPropertyDescriptors(h);return ve.arr.withoutAll(Object.keys(d),["constructor"]).map(function(k){var n=d[k],b="function"===typeof n.value?"method":"get"in n?"get":"set"in n?"set":"unknown";return{static:!1,name:k,value:"method"===b?n.value:"get"===b?n.get:"set"===b?n.set:null,kind:b,owner:h}})};ve.runtimeNonstaticClassMembersInProtoChain=function(c){return ve.arr.uniq(ve.arr.flatmap(ve.arr.without(ve.withSuperclasses(c),Object),function(h){return ve.runtimeNonStaticMembers(h)}))};ve.runtimeStaticClassMembers=
Cy;ve.runtimeStaticClassMembersInProtoChain=Dy;ve.arr=Qe;ve.obj=lf;ve.Path=Cg;ve.RuntimeSourceDescriptor=Mo;ve.superclasses=uv;ve.superclasses=uv;var VJ=Symbol.for("lively-instance-initialize");ve.initializeSymbol=VJ;ve.initializeSymbol=VJ;ve.initializeSymbol=VJ;var PQ=Symbol.for("lively-instance-restorer");ve.instanceRestorerSymbol=PQ;ve.instanceRestorerSymbol=PQ;ve.instanceRestorerSymbol=PQ;var WJ=Symbol.for("lively-instance-superclass");ve.superclassSymbol=WJ;ve.superclassSymbol=WJ;ve.superclassSymbol=
WJ;var XJ=Symbol.for("lively-module-meta");ve.moduleMetaSymbol=XJ;ve.moduleMetaSymbol=XJ;ve.moduleMetaSymbol=XJ;var YJ=Symbol.for("lively-object-meta");ve.objMetaSymbol=YJ;ve.objMetaSymbol=YJ;ve.objMetaSymbol=YJ;var ZJ=Symbol.for("lively-klass-changes-subscriber");ve.moduleSubscribeToToplevelChangesSym=ZJ;ve.moduleSubscribeToToplevelChangesSym=ZJ;ve.moduleSubscribeToToplevelChangesSym=ZJ;ve.getClassHierarchy=MA;ve.getClassHierarchy=MA;ve.withSuperclasses=De;ve.withSuperclasses=De;ve.inheritsFrom=
YC;ve.inheritsFrom=YC;ve.changeClass=ZC;ve.changeClass=ZC;ve.isClass=$C;ve.isClass=$C;ve.lexicalClassMembers=Qw;ve.lexicalClassMembers=Qw;ve.runtimeClassMembers=By;ve.runtimeClassMembers=By;ve.runtimeStaticClassMembers=Cy;ve.runtimeStaticClassMembers=Cy;ve.runtimeStaticClassMembersInProtoChain=Dy;ve.runtimeStaticClassMembersInProtoChain=Dy;var QQ=wa("bK",function(){function c(e){return e.replace(b,function(l,a){return a[a.length-1].toUpperCase()})}var h="break case catch class const continue debugger default delete do else enum export extends false finally for function if implements import in instanceof interface let new null package private protected public return static switch super this throw true try typeof undefined var void while with yield".split(" "),
d={"~":"_tilde_","`":"_backtick_","!":"_exclamationmark_","@":"_at_","#":"_pound_","%":"_percent_","^":"_carat_","&":"_amperstand_","*":"_asterisk_","(":"_leftparen_",")":"_rightparen_","+":"_plus_","=":"_equals_","{":"_leftcurly_","}":"_rightcurly_","[":"_leftsquare_","]":"_rightsquare_","|":"_pipe_","-":"_dash_","\\":"_backslash_",'"':"_doublequote_","'":"_singlequote_",":":"_colon_",";":"_semicolon_","<":"_leftangle_",">":"_rightangle_",",":"_comma_",".":"_period_","?":"_questionmark_","/":"_forwardslash_",
"\t":"_tab_","\n":"_newline_","\r":"_carriagereturn_"},k={0:"_zero_",1:"_one_",2:"_two_",3:"_three_",4:"_four_",5:"_five_",6:"_siz_",7:"_seven_",8:"_eight_",9:"_nine_"},n=function(e){return d[e]||"ASCII_"+e.charCodeAt(0)},b=/([\s-]+.)/g;return function(e){e=c(e);return 0<=h.indexOf(e)?e:0===e.length?"_null_":e.replace(/^\d/,function(l){return k[l]}).replace(/[^\w\$_]/g,n)}}());ve.toJsIdentifier=QQ;ve.toJsIdentifier=QQ;ve.toJsIdentifier=QQ;var Ph=lively.FreezerRuntime.recorderFor("lively.classes/properties.js");
Ph.hasManagedProperties=function(c){return c.hasOwnProperty(Ph.defaultPropertiesKey)};Ph.prepareClassForManagedPropertiesAfterCreation=ck;Ph.prepareClassForProperties=function(c,h,d){Ph.ensurePropertyInitializer(c);var k=h.valueStoreProperty,n=h.defaultGetter,b=h.defaultSetter,e=c.prototype;Object.keys(d).forEach(function(l){var a=d[l],f=e.hasOwnProperty(l)&&e.__lookupGetter__(l);if(!f||f._wasGenerated)f=a.get||"function"===typeof n&&function(){return n.call(this,l)}||function(){return this[k][l]},
f._wasGenerated=!0,e.__defineGetter__(l,f);f=e.hasOwnProperty(l)&&e.__lookupSetter__(l);if(!f||f._wasGenerated)if(a.hasOwnProperty("set")||!a.readOnly)a=a.set||"function"===typeof b&&function(m){b.call(this,l,m)}||function(m){this[k][l]=m},a._wasGenerated=!0,e.__defineSetter__(l,a)})};Ph.ensurePropertyInitializer=function(c){Object.defineProperty(c.prototype,"propertiesAndPropertySettings",{enumerable:!1,configurable:!0,writable:!0,value:function(){var h=this.constructor,d=h[Ph.propertiesAndSettingsCacheSym];
if(d)if(d.classHierarchy!=Ph.getClassHierarchy(h)){var k=Ph.propertiesAndSettingsInHierarchyOf(h);d=k.properties;k=k.propertySettings;h[Ph.propertiesAndSettingsCacheSym]={properties:d,propertySettings:k,order:Ph.obj.sortKeysWithBeforeAndAfterConstraints(d),classHierarchy:Ph.getClassHierarchy(h)};Ph.prepareClassForProperties(h,k,d)}else return d;return h[Ph.propertiesAndSettingsCacheSym]||Ph.propertiesAndSettingsInHierarchyOf(h)}});Object.defineProperty(c.prototype,"initializeProperties",{enumerable:!1,
configurable:!0,writable:!0,value:function(h){var d=this.propertiesAndPropertySettings();Ph.prepareInstanceForProperties(this,d.propertySettings,d.properties,h,d.order);return this}})};Ph.propertiesAndSettingsInHierarchyOf=function(c){for(var h=Object.assign({},Ph.defaultPropertySettings),d={},k=Ph.obj.valuesInPropertyHierarchy(c,"propertySettings"),n=Ph.obj.valuesInPropertyHierarchy(c,"properties"),b=0;b<k.length;b++){var e=k[b];e&&"object"===typeof e&&Object.assign(h,e)}for(b=0;b<n.length;b++)if(k=
n[b],"object"!==typeof k)console.error("[initializeProperties] "+c+" encountered property declaration that is not a JS object: "+k);else for(var l in k)d.hasOwnProperty(l)?Object.assign(d[l],k[l]):d[l]=k[l];return{properties:d,propertySettings:h}};Ph.prepareInstanceForProperties=function(c,h,d,k,n){var b=h.valueStoreProperty;n=n||Ph.obj.sortKeysWithBeforeAndAfterConstraints(d);h=[];var e={};c.hasOwnProperty(b)||(c[b]={});for(var l=0;l<n.length;l++){var a=n[l],f=d[a],m=f.derived,q=!!f.foldable,r=f.hasOwnProperty("defaultValue")?
f.defaultValue:void 0;Array.isArray(r)&&(r=r.slice());m||q||(c[b][a]=r);var u=void 0;f.hasOwnProperty("initialize")?(u=e[a]={initialize:r},h.push(a)):m&&void 0!==r?(u=e[a]={derived:r},h.push(a)):q&&void 0!==r&&(u=e[a]={folded:r},h.push(a));k&&a in k&&(f.readOnly?console.warn("Trying to initialize read-only property "+a+" in "+c+", skipping setting value"):(u||(u=e[a]={},h.push(a)),u.value=k[a]))}for(l=0;l<h.length;l++)k=h[l],n=e[k],b=n.hasOwnProperty("value"),n.hasOwnProperty("initialize")?(d[k].initialize.call(c,
b?n.value:n.initialize),b&&(c[k]=n.value)):n.hasOwnProperty("derived")?c[k]=b?n.value:n.derived:n.hasOwnProperty("folded")?c[k]=b?n.value:n.folded:b&&(c[k]=n.value)};Ph.obj=lf;Ph.getClassHierarchy=MA;Ph.defaultPropertiesSettingKey="propertySettings";Ph.defaultPropertiesKey="properties";Ph.defaultInstanceInitializerMethod="initializeProperties";Ph.propertiesAndSettingsCacheSym=Symbol.for("lively.classes-properties-and-settings");Ph.defaultPropertySettings={defaultSetter:null,defaultGetter:null,valueStoreProperty:"_state"};
Ph.prepareClassForManagedPropertiesAfterCreation=ck;Ph.prepareClassForManagedPropertiesAfterCreation=ck;var hf=lively.FreezerRuntime.recorderFor("lively.classes/runtime.js");hf.adoptObject=Vj;hf.setSuperclass=dk;hf.installValueDescriptor=function(c,h,d){d=Object.assign(d,hf.defaultPropertyDescriptorForValue);d.value.displayName=d.key;if(d.needsDeclaringClass){var k=d.value.originalFunction||d.value;d.value=Object.assign(function(){return k.call.apply(k,[this,h].concat($jscomp.arrayFromIterable(arguments)))},
{originalFunction:k,toString:function(){return k.toString()},displayName:d.key})}Object.defineProperty(c,d.key,d)};hf.installGetterSetterDescriptor=function(c,h){h=Object.assign(h,hf.defaultPropertyDescriptorForGetterSetter);Object.defineProperty(c,h.key,h)};hf.installMethods=function(c,h,d){d&&d.forEach(function(e){e.value?hf.installValueDescriptor(c,c,e):hf.installGetterSetterDescriptor(c,e)});h&&h.forEach(function(e){e.value?hf.installValueDescriptor(c.prototype,c,e):hf.installGetterSetterDescriptor(c.prototype,
e)});c.prototype[hf.initializeSymbol]?Object.getOwnPropertySymbols(c.prototype).includes(hf.initializeSymbol)&&c.prototype[hf.initializeSymbol].isDefaultInitializer&&c[hf.superclassSymbol].prototype[hf.initializeSymbol]&&delete c.prototype[hf.initializeSymbol]:(Object.defineProperty(c.prototype,hf.initializeSymbol,{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),c.prototype[hf.initializeSymbol].isDefaultInitializer=!0,c.prototype[hf.initializeSymbol].displayName="lively-initialize");
h=h.map(function(e){return e.key}).concat(["constructor","arguments","caller"]);for(var k=Object.getOwnPropertyNames(c.prototype),n=0;n<k.length;n++){var b=k[n];h.includes(b)||delete c.prototype[b]}d=d.map(function(e){return e.key}).concat(["length","name","prototype","arguments","caller"]);h=Object.getOwnPropertyNames(c);for(k=0;k<h.length;k++)n=h[k],d.includes(n)||delete c[n]};hf.ensureInitializeStub=function(c){c===Object||c.prototype[hf.initializeSymbol]||(Object.defineProperty(c.prototype,hf.initializeSymbol,
{enumerable:!1,configurable:!0,writable:!0,value:function(){c.apply(this,arguments)}}),c.prototype[hf.initializeSymbol].displayName="lively-initialize-stub")};hf.initializeClass=zb;hf.prepareClassForManagedPropertiesAfterCreation=ck;hf.superclassSymbol=WJ;hf.moduleSubscribeToToplevelChangesSym=ZJ;hf.moduleMetaSymbol=XJ;hf.objMetaSymbol=YJ;hf.initializeSymbol=VJ;hf.constructorArgMatcher=/\([^\\)]*\)/;hf.defaultPropertyDescriptorForGetterSetter={enumerable:!1,configurable:!0};hf.defaultPropertyDescriptorForValue=
{enumerable:!1,configurable:!0,writable:!0};var $J="function"===typeof Object.setPrototypeOf?function(c,h){return Object.setPrototypeOf(c,h)}:function(c,h){return c.__proto__=h};hf.setPrototypeOf=$J;hf.setPrototypeOf=$J;hf.setPrototypeOf=$J;hf.adoptObject=Vj;hf.adoptObject=Vj;hf.setSuperclass=dk;hf.setSuperclass=dk;hf.initializeClass=zb;hf.initializeClass=zb;hf.initializeClass._get=function n(h,d,k){null===h&&(h=Function.prototype);var b=Object.getOwnPropertyDescriptor(h,d);if(void 0===b)return h=
Object.getPrototypeOf(h),null===h?void 0:n(h,d,k);if("value"in b)return b.value;d=b.get;return void 0===d?void 0:d.call(k)};hf.initializeClass._set=function e(d,k,n,b){var l=Object.getOwnPropertyDescriptor(d,k);void 0===l?(d=Object.getPrototypeOf(d),null!==d&&e(d,k,n,b)):"value"in l&&l.writable?l.value=n:(k=l.set,void 0!==k&&k.call(b,n));return n};var iC=Object.freeze({__proto__:null,setPrototypeOf:$J,adoptObject:Vj,setSuperclass:dk,initializeClass:zb}),Sc=lively.FreezerRuntime.recorderFor("lively.graphics/color-parser.js");
Sc.parse=Ey;Sc.Color=function(d){this._listeners={};this.subscribe(Sc.Events.RGB_UPDATED,this._RGBUpdated);this.subscribe(Sc.Events.HEX_UPDATED,this._HEXUpdated);this.subscribe(Sc.Events.HSL_UPDATED,this._HSLUpdated);this.subscribe(Sc.Events.HSV_UPDATED,this._HSVUpdated);this.subscribe(Sc.Events.INT_UPDATED,this._INTUpdated);this.parse(d)};Sc.parse=Ey;Sc.parse=Ey;Sc.Events={RGB_UPDATED:"RGBUpdated",HSL_UPDATED:"HSLUpdated",HSV_UPDATED:"HSVUpdated",HEX_UPDATED:"HexUpdated",INT_UPDATED:"IntUpdated",
UPDATED:"updated"};Sc.namedColors={transparent:"rgba(0, 0, 0, 0)",aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",
darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",
fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",
lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",
mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",
sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE"};Sc.absround=function(d){return.5+d<<0};Sc.hue2rgb=function(d,k,n){0>n&&(n+=1);1<n&&--n;return n<1/6?d+6*(k-d)*n:.5>n?k:n<2/3?d+(k-d)*(2/3-n)*6:d};Sc.p2v=function(d){return Sc.isPercent.test(d)?
Sc.absround(2.55*parseInt(d)):d};Sc.isHex=/^#?([0-9a-f]{3}|[0-9a-f]{6})$/i;Sc.isHSL=/^hsla?\((\d{1,3}?),\s*(\d{1,3}%),\s*(\d{1,3}%)(,\s*[01]?\.?\d*)?\)$/;Sc.isRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*[01]?\.?\d*)?\)$/;Sc.isPercent=/^\d+(\.\d+)*%$/;Sc.hexBit=/([0-9a-f])/gi;Sc.leadHex=/^#/;Sc.matchHSL=/^hsla?\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%(,\s*([01]?\.?\d*))?\)$/;Sc.matchRGB=/^rgba?\((\d{1,3}%?),\s*(\d{1,3}%?),\s*(\d{1,3}%?)(,\s*([01]?\.?\d*))?\)$/;Sc.Color.prototype._decimal=
0;Sc.Color.prototype._hex="#000000";Sc.Color.prototype._red=0;Sc.Color.prototype._green=0;Sc.Color.prototype._blue=0;Sc.Color.prototype._hue=0;Sc.Color.prototype._saturation=0;Sc.Color.prototype._lightness=0;Sc.Color.prototype._brightness=0;Sc.Color.prototype._alpha=1;Sc.Color.prototype.parse=function(d){if("undefined"===typeof d)return this;switch(!0){case isFinite(d):this.decimal(d);this.output=Sc.Color.INT;break;case d instanceof Sc.Color:this.copy(d);break;default:switch(typeof d){case "object":this.set(d);
break;case "string":switch(!0){case Sc.namedColors.hasOwnProperty(d):d=Sc.namedColors[d];d=d.replace(Sc.leadHex,"");this.decimal(parseInt(d,16));break;case Sc.isHex.test(d):d=d.replace(Sc.leadHex,"");3==d.length&&(d=d.replace(Sc.hexBit,"$1$1"));this.decimal(parseInt(d,16));break;case Sc.isRGB.test(d):d=d.match(Sc.matchRGB);this.red(Sc.p2v(d[1]));this.green(Sc.p2v(d[2]));this.blue(Sc.p2v(d[3]));this.alpha(parseFloat(d[5])||1);this.output=(Sc.isPercent.test(d[1])?2:1)+(d[5]?2:0);break;case Sc.isHSL.test(d):d=
d.match(Sc.matchHSL),this.hue(parseInt(d[1])),this.saturation(parseInt(d[2])),this.lightness(parseInt(d[3])),this.alpha(parseFloat(d[5])||1),this.output=d[5]?6:5}}}return this};Sc.Color.prototype.clone=function(){return new Sc.Color(this.decimal())};Sc.Color.prototype.copy=function(d){this.set(d.decimal());return this};Sc.Color.prototype.set=function(d,k){if(1==arguments.length)if("object"===typeof d)for(var n in d){if("function"===typeof this[n])this[n](d[n])}else isFinite(d)&&this.decimal(d);else if("function"===
typeof this[d])this[d](k);return this};Sc.Color.prototype.interpolate=function(d,k){d instanceof Sc.Color||(d=new Sc.Color(d));this._red=Sc.absround(+this._red+(d._red-this._red)*k);this._green=Sc.absround(+this._green+(d._green-this._green)*k);this._blue=Sc.absround(+this._blue+(d._blue-this._blue)*k);this._alpha=Sc.absround(+this._alpha+(d._alpha-this._alpha)*k);this.broadcast(Sc.Events.RGB_UPDATED);this.broadcast(Sc.Events.UPDATED);return this};Sc.Color.prototype._RGB2HSL=function(){var d=this._red/
255,k=this._green/255,n=this._blue/255,b=Math.max(d,k,n),e=Math.min(d,k,n),l=(b+e)/2;if(b==e)this._saturation=this._hue=0;else{var a=b-e;e=a/(.5>=l?b+e:2-b-e);this._hue=Sc.absround((b==d?(k-n)/a+(k<n?6:0):b==k?(n-d)/a+2:(d-k)/a+4)/6*360);this._saturation=Sc.absround(100*e)}this._lightness=Sc.absround(100*l);this._brightness=Sc.absround(100*b)};Sc.Color.prototype._HSL2RGB=function(){var d=this._hue/360,k=this._saturation/100,n=this._lightness/100;k=.5>n?n*(1+k):n+k-n*k;n=2*n-k;this._red=Sc.absround(255*
Sc.hue2rgb(n,k,d+1/3));this._green=Sc.absround(255*Sc.hue2rgb(n,k,d));this._blue=Sc.absround(255*Sc.hue2rgb(n,k,d-1/3))};Sc.Color.prototype._HSV2RGB=function(){var d=this._hue/360,k=this._saturation/100,n=this._brightness/100,b=0,e=0,l=0,a=Math.floor(6*d),f=6*d-a;d=n*(1-k);var m=n*(1-f*k);k=n*(1-(1-f)*k);switch(a%6){case 0:b=n;e=k;l=d;break;case 1:b=m;e=n;l=d;break;case 2:b=d;e=n;l=k;break;case 3:b=d;e=m;l=n;break;case 4:b=k;e=d;l=n;break;case 5:b=n,e=d,l=m}this._red=Sc.absround(255*b);this._green=
Sc.absround(255*e);this._blue=Sc.absround(255*l)};Sc.Color.prototype._INT2HEX=function(){var d=this._decimal.toString(16);d="000000".substr(0,6-d.length)+d;this._hex="#"+d.toUpperCase()};Sc.Color.prototype._INT2RGB=function(){this._red=this._decimal>>16;this._green=this._decimal>>8&255;this._blue=this._decimal&255};Sc.Color.prototype._HEX2INT=function(){this._decimal=parseInt(this._hex,16)};Sc.Color.prototype._RGB2INT=function(){this._decimal=this._red<<16|this._green<<8&65535|this._blue};Sc.Color.prototype._RGBUpdated=
function(){this._RGB2INT();this._RGB2HSL();this._INT2HEX()};Sc.Color.prototype._HSLUpdated=function(){this._HSL2RGB();this._RGB2INT();this._INT2HEX()};Sc.Color.prototype._HSVUpdated=function(){this._HSV2RGB();this._RGB2INT();this._INT2HEX()};Sc.Color.prototype._HEXUpdated=function(){this._HEX2INT();this._INT2RGB();this._RGB2HSL()};Sc.Color.prototype._INTUpdated=function(){this._INT2RGB();this._RGB2HSL();this._INT2HEX()};Sc.Color.prototype._broadcastUpdate=function(){this.broadcast(Sc.Events.UPDATED)};
Sc.Color.prototype.decimal=function(d){return this._handle("_decimal",d,Sc.Events.INT_UPDATED)};Sc.Color.prototype.hex=function(d){return this._handle("_hex",d,Sc.Events.HEX_UPDATED)};Sc.Color.prototype.red=function(d){return this._handle("_red",d,Sc.Events.RGB_UPDATED)};Sc.Color.prototype.green=function(d){return this._handle("_green",d,Sc.Events.RGB_UPDATED)};Sc.Color.prototype.blue=function(d){return this._handle("_blue",d,Sc.Events.RGB_UPDATED)};Sc.Color.prototype.hue=function(d){return this._handle("_hue",
d,Sc.Events.HSL_UPDATED)};Sc.Color.prototype.saturation=function(d){return this._handle("_saturation",d,Sc.Events.HSL_UPDATED)};Sc.Color.prototype.lightness=function(d){return this._handle("_lightness",d,Sc.Events.HSL_UPDATED)};Sc.Color.prototype.brightness=function(d){return this._handle("_brightness",d,Sc.Events.HSV_UPDATED)};Sc.Color.prototype.alpha=function(d){return this._handle("_alpha",d)};Sc.Color.prototype._handle=function(d,k,n){"undefined"!==typeof this[d]&&"undefined"!==typeof k&&(k!=
this[d]&&(this[d]=k,n&&this.broadcast(n)),this.broadcast(Sc.Events.UPDATED));return this[d]};Sc.Color.prototype.getHex=function(){return this._hex};Sc.Color.prototype.getRGB=function(){return"rgb("+[Sc.absround(this._red),Sc.absround(this._green),Sc.absround(this._blue)].join(", ")+")"};Sc.Color.prototype.getPRGB=function(){return"rgb("+[Sc.absround(100*this._red/255)+"%",Sc.absround(100*this._green/255)+"%",Sc.absround(100*this._blue/255)+"%"].join(", ")+")"};Sc.Color.prototype.getRGBA=function(){return"rgba("+
[Sc.absround(this._red),Sc.absround(this._green),Sc.absround(this._blue),this._alpha].join(", ")+")"};Sc.Color.prototype.getPRGBA=function(){return"rgba("+[Sc.absround(100*this._red/255)+"%",Sc.absround(100*this._green/255)+"%",Sc.absround(100*this._blue/255)+"%",this._alpha].join(", ")+")"};Sc.Color.prototype.getHSL=function(){return"hsl("+[Sc.absround(this._hue),Sc.absround(this._saturation)+"%",Sc.absround(this._lightness)+"%"].join(", ")+")"};Sc.Color.prototype.getHSLA=function(){return"hsla("+
[Sc.absround(this._hue),Sc.absround(this._saturation)+"%",Sc.absround(this._lightness)+"%",this._alpha].join(", ")+")"};Sc.Color.prototype.format=function(d){var k={r:this._red,g:this._green,b:this._blue,h:this._hue,s:this._saturation,l:this._lightness,v:this._brightness,a:this._alpha,x:this._hex,d:this._decimal},n;for(n in k)d=d.split("%"+n+"%").join(k[n]);return d};Sc.Color.prototype.output=0;Sc.Color.HEX=0;Sc.Color.RGB=1;Sc.Color.PRGB=2;Sc.Color.RGBA=3;Sc.Color.PRGBA=4;Sc.Color.HSL=5;Sc.Color.HSLA=
6;Sc.Color.INT=7;Sc.Color.prototype.toString=function(){switch(this.output){case 1:return this.getRGB();case 2:return this.getPRGB();case 3:return this.getRGBA();case 4:return this.getPRGBA();case 5:return this.getHSL();case 6:return this.getHSLA();case 7:return this._decimal}return this.getHex()};Sc.Color.prototype._listeners=null;Sc.Color.prototype._isSubscribed=function(d){return null!=this._listeners[d]};Sc.Color.prototype.subscribe=function(d,k){this._isSubscribed(d)||(this._listeners[d]=[]);
this._listeners[d].push(k)};Sc.Color.prototype.unsubscribe=function(d,k){if(this._isSubscribed(d))for(var n=this._listeners[d],b=0,e=n.length;b<e;b++)if(n[b]===k)return n.splice(b,1),this.unsubscribe(d,k)};Sc.Color.prototype.broadcast=function(d,k){if(this._isSubscribed(d)){d=this._listeners[d];for(var n=d.length,b=0;b<n;b++)d[b].apply(this,k)}};Sc.Color.prototype.tween=function(d,k){k instanceof Sc.Color||(k=new Sc.Color(k));var n=+new Date,b=this;this.broadcast("tweenStart");var e=setInterval(function(){var l=
Math.min(1,(+new Date-n)/d);b.interpolate(k,l);b.broadcast("tweenProgress");1==l&&(clearInterval(e),b.broadcast("tweenComplete"))},20);return e};Sc.Color.prototype.bind=function(d,k){var n=this;this.subscribe("updated",function(){d[k]=n.toString()})};Sc.Color.random=function(){return new Sc.Color(Sc.absround(16777215*Math.random()))};Sc.Color.bind=function(d,k){var n=new Sc.Color(d[k]);n.bind(d,k);return n};var fd=lively.FreezerRuntime.recorderFor("lively.graphics/color.js");fd.floor=function(d){return Math.floor(255.99*
d)};fd.pad=function(d,k,n){n=void 0===n?fd.arr.last:n;return[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(Array(Math.max(k-d.length,0)).fill(n(d))))};fd.num=Gk;fd.obj=lf;fd.arr=Qe;fd.parse=Ey;fd.Rectangle=Pd;fd.rect=Ff;fd.pt=nf;fd.Point=Gf;fd.rgbaRegex=/\s*rgba?\s*\(\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*,\s*(\d+)(%?)\s*(?:,\s*([0-9\.]+)\s*)?\)\s*/;var jC=function(){};jC.prototype.offsets=function(){return null};jC.prototype.stepCount=function(){return 0};jC.prototype.stepSize=function(){return 0};
jC.prototype.chord=function(d){var k=this,n=d.hue,b=d.saturation,e=d.brightness;return(this.offsets()||fd.arr.range(0,this.steps()).map(function(l){return l*k.stepSize()})).map(function(l){return fd.Color.hsb(n+l%360,b,e)})};$jscomp.global.Object.defineProperties(jC.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Color Harmony"}}});fd.ColorHarmony=jC;var Ox=function(){return fd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Ox,fd.ColorHarmony);Ox.prototype.steps=function(){return 1};
Ox.prototype.stepSize=function(){return 180};$jscomp.global.Object.defineProperties(Ox.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Complement"}}});wa("al",Ox);fd.Complementary=Ox;var Px=function(){return fd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Px,fd.ColorHarmony);Px.prototype.steps=function(){return 2};Px.prototype.stepSize=function(){return 120};$jscomp.global.Object.defineProperties(Px.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Triadic"}}});
wa("am",Px);fd.Triadic=Px;var Oz=function(){return fd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Oz,fd.ColorHarmony);Oz.prototype.offsets=function(){return[0,60,180,240]};$jscomp.global.Object.defineProperties(Oz.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Tetradic"}}});wa("an",Oz);fd.Tetradic=Oz;var Qx=function(){return fd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Qx,fd.ColorHarmony);Qx.prototype.steps=function(){return 3};Qx.prototype.stepSize=
function(){return 90};$jscomp.global.Object.defineProperties(Qx.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Quadratic"}}});wa("ao",Qx);fd.Quadratic=Qx;var Rx=function(){return fd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Rx,fd.ColorHarmony);Rx.prototype.steps=function(){return 5};Rx.prototype.offsets=function(){return[-60,-30,0,30,60]};$jscomp.global.Object.defineProperties(Rx.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Analogous"}}});
wa("ap",Rx);fd.Analogous=Rx;var Pz=function(){return fd.ColorHarmony.apply(this,arguments)||this};$jscomp.inherits(Pz,fd.ColorHarmony);Pz.prototype.offsets=function(){return[-30,-15,0,15,30]};$jscomp.global.Object.defineProperties(Pz.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"Neutral"}}});wa("aq",Pz);fd.Neutral=Pz;var xf=function(d,k,n,b){this.r=d||0;this.g=k||0;this.b=n||0;this.a=b||(0===b?0:1)};xf.random=function(d,k){void 0===d&&(d=0);void 0===k&&(k=255);return fd.Color.rgb(fd.num.random(d,
k),fd.num.random(d,k),fd.num.random(d,k))};xf.hsb=function(d,k,n){if(0==k)return new fd.Color(n,n,n);var b=d%360/60;d=Math.floor(b);var e=b-d;b=(1-k)*n;var l=(1-k*e)*n;k=(1-k*(1-e))*n;switch(d){case 0:return new fd.Color(n,k,b);case 1:return new fd.Color(l,n,b);case 2:return new fd.Color(b,n,k);case 3:return new fd.Color(b,l,n);case 4:return new fd.Color(k,b,n);case 5:return new fd.Color(n,b,l);default:return new fd.Color(0,0,0)}};xf.wheel=function(d){return fd.Color.wheelHsb(void 0===d?10:d,0,.9,
.7)};xf.wheelHsb=function(d,k,n,b){for(var e=Array(d),l=360/Math.max(d,1),a=0;a<d;a++)e[a]=fd.Color.hsb(k+a*l,n,b);return e};xf.rgb=function(d,k,n){return new fd.Color(d/255,k/255,n/255)};xf.rgbHex=function(d){return(d=this.parseHex(d))&&0<=d[0]&&0<=d[1]&&0<=d[2]?new fd.Color(d[0],d[1],d[2]):null};xf.rgba=function(d,k,n,b){return new fd.Color(d/255,k/255,n/255,b)};xf.fromLiteral=function(d){return new fd.Color(d.r,d.g,d.b,d.a)};xf.fromTuple=function(d){return new fd.Color(d[0],d[1],d[2],d[3])};xf.fromTuple8Bit=
function(d){return new fd.Color(d[0]/255,d[1]/255,d[2]/255,d[3]/255)};xf.fromString=function(d){return d&&"none"!==d?this.fromTuple(this.parse(d)):null};xf.parse=function(d){return d&&"none"!==d?(d=fd.parse(d),[d.red,d.green,d.blue,d.alpha]):null};xf.parseRGB=function(d){var k=d.match(this.rgbaRegex);if(k){d=parseInt(k[1])/(k[2]?100:255);var n=parseInt(k[3])/(k[4]?100:255),b=parseInt(k[5])/(k[6]?100:255);k=k[7]?parseFloat(k[7]):1;return[d,n,b,k]}return null};xf.parseHex=function(d){var k;var n="";
for(k=0;k<d.length;k++){var b=d[k].toLowerCase();if("a"==b||"b"==b||"c"==b||"d"==b||"e"==b||"f"==b||"0"==b||"1"==b||"2"==b||"3"==b||"4"==b||"5"==b||"6"==b||"7"==b||"8"==b||"9"==b)n+=b}if(6==n.length)k=n.substring(0,2),d=n.substring(2,4),n=n.substring(4,6);else if(3==n.length)k=n.substring(0,1),k+=k,d=n.substring(1,2),d+=d,n=n.substring(2,3),n+=n;else return null;k=parseInt(k,16)/255;d=parseInt(d,16)/255;n=parseInt(n,16)/255;return[k,d,n]};xf.prototype.grayValue=function(){return(this.r+this.g+this.b)/
3};xf.prototype.equals=function(d){return d?this.r===d.r&&this.g===d.g&&this.b===d.b&&this.a===d.a:!1};xf.prototype.darker=function(d){var k=this.mixedWith(fd.Color.black,.5);return 1<d?k.darker(d-1):k};xf.prototype.lighter=function(d){if(0==d)return this;var k=this.mixedWith(fd.Color.white,.5);return 1<d?k.lighter(d-1):k};xf.prototype.interpolate=function(d,k){if(k.isGradient)return k.interpolate(1-d,this);k=fd.obj.isArray(k)?k:k.toTuple();return fd.Color.fromTuple(this.toTuple().map(function(n,
b){return fd.num.interpolate(d,n,k[b])}))};xf.prototype.toString=function(){return 1===this.a?"rgb("+fd.floor(this.r)+","+fd.floor(this.g)+","+fd.floor(this.b)+")":this.toRGBAString()};xf.prototype.toRGBAString=function(){return"rgba("+Math.floor(255.99*this.r)+","+Math.floor(255.99*this.g)+","+Math.floor(255.99*this.b)+","+this.a+")"};xf.prototype.toHexString=function(){function d(k){for(;2>k.length;)k="0"+k;return k}return d(Math.floor(255.99*this.r).toString(16))+d(Math.floor(255.99*this.g).toString(16))+
d(Math.floor(255.99*this.b).toString(16))};xf.prototype.toTuple=function(){return[this.r,this.g,this.b,this.a]};xf.prototype.toTuple8Bit=function(){return[255*this.r,255*this.g,255*this.b,255*this.a]};xf.prototype.toHSB=function(){var d=Math.max(this.r,this.g,this.b),k=Math.min(this.r,this.g,this.b),n;d==k?n=0:d==this.r?n=(this.g-this.b)/(d-k)*60:d==this.g?n=60*(2+(this.b-this.r)/(d-k)):d==this.b&&(n=60*(4+(this.r-this.g)/(d-k)));return[(n+360)%360,0==d?0:(d-k)/d,d]};xf.prototype.withA=function(d){return new fd.Color(this.r,
this.g,this.b,d)};xf.prototype.mixedWith=function(d,k){var n=1-k;return new fd.Color(this.r*k+d.r*n,this.g*k+d.g*n,this.b*k+d.b*n,this.a*k+d.a*n)};xf.prototype.invert=function(){return fd.Color.rgb(255*(1-this.r),255*(1-this.g),255*(1-this.b))};xf.prototype.toCSSString=function(){return this.toRGBAString()};xf.prototype.__serialize__=function(){return{__expr__:"Color."+this.toString(),bindings:{"lively.graphics/color.js":["Color"]}}};xf.prototype.toJSExpr=function(){return"Color."+(this.name||this.toString())};
$jscomp.global.Object.defineProperties(xf.prototype,{isColor:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){var d=this,k=fd.Color.named;return Object.keys(k).find(function(n){return k[n].equals(d)})}}});$jscomp.global.Object.defineProperties(xf,{rgbaRegex:{configurable:!0,enumerable:!0,get:function(){return fd.rgbaRegex}},named:{configurable:!0,enumerable:!0,get:function(){return this._named?this._named:this._named={black:new fd.Color(0,
0,0),almostBlack:fd.Color.rgb(64,64,64),white:new fd.Color(1,1,1),gray:new fd.Color(.8,.8,.8),red:new fd.Color(.8,0,0),green:new fd.Color(0,.8,0),yellow:new fd.Color(.8,.8,0),blue:new fd.Color(0,0,.8),purple:new fd.Color(.5,0,.5),magenta:new fd.Color(1,0,1),pink:fd.Color.rgb(255,30,153),turquoise:fd.Color.rgb(0,240,255),tangerine:fd.Color.rgb(242,133,0),orange:fd.Color.rgb(255,153,0),cyan:fd.Color.rgb(0,255,255),brown:fd.Color.rgb(182,67,0),limeGreen:fd.Color.rgb(51,255,0),darkGray:fd.Color.rgb(102,
102,102),lightGray:fd.Color.rgb(230,230,230),veryLightGray:fd.Color.rgb(243,243,243),transparent:fd.Color.rgba(0,0,0,0),lively:fd.Color.rgb(245,124,0)}}}});wa("C",xf);fd.Color=xf;Object.assign(fd.Color,fd.Color.named);var bw=function(d){this.stops=d?d.map(function(k){return k}):[]};bw.create=function(d){var k=[],n;for(n in d)k.push({offset:Number(n),color:d[n]});return new this({stops:k})};bw.parse=function(d){return d.startsWith("radial-gradient")?fd.RadialGradient.parse(d):d.startsWith("linear-gradient")?
fd.LinearGradient.parse(d):fd.Color.fromTuple(fd.Color.parse(d))};bw.prototype.equals=function(d){return d&&d.isGradient?this.toString()==d.toString():!1};bw.prototype.getStopsLighter=function(d){return fd.arr.collect(this.stops,function(k){return{offset:k.offset,color:k.color.lighter(d)}})};bw.prototype.getStopsDarker=function(d){return fd.arr.collect(this.stops,function(k){return{offset:k.offset,color:k.color.darker(d)}})};bw.prototype.interpolateStops=function(d,k){var n=fd.pad(this.stops,k.length);
k=fd.pad(k,this.stops.length);var b=[],e;for(e=0;e<n.length;e++){var l=n[e];var a=l.color;var f=l.offset;var m=k[e];l=m.color;m=m.offset;b.push({color:a.interpolate(d,l),offset:fd.num.interpolate(d,f,m)})}return b};bw.prototype.__serialize__=function(){return{__expr__:this.toJSExpr(),bindings:{"lively.graphics/color.js":["Color","RadialGradient","LinearGradient"],"lively.graphics/geometry-2d.js":["pt","rect"]}}};$jscomp.global.Object.defineProperties(bw.prototype,{isGradient:{configurable:!0,enumerable:!0,
get:function(){return!0}}});fd.Gradient=bw;var Il=function(d){var k=void 0===d?{}:d;d=k.vector;k=fd.Gradient.call(this,k.stops)||this;k.vector=d;return k};$jscomp.inherits(Il,fd.Gradient);Il.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};Il.prototype.angleToRect=function(d){return fd.Point.polar(1,d).extentAsRectangle().withCenter(fd.pt(.5,.5))};Il.prototype.vectorAsAngle=function(){return this.vector.extent().theta()};Il.prototype.toString=function(){return this.toCSSString()};Il.prototype.lighter=
function(d){return new this.constructor({stops:this.getStopsLighter(d),vector:this.vector})};Il.prototype.darker=function(d){return new this.constructor({stops:this.getStopsDarker(d),vector:this.vector})};Il.prototype.interpolate=function(d,k,n){n=void 0===n?{width:1E3,height:1E3}:n;k.isColor&&(k=new fd.LinearGradient({vector:this.vector,stops:this.stops.map(function(b){return{color:k,offset:b.offset}})}));if("radialGradient"==k.type){if(.5>d)return new fd.LinearGradient({vector:this.vector.interpolate(d,
fd.rect(0,0,0,1)),stops:this.interpolateStops(d,k.stops.map(function(b,e){return{color:b.color,offset:1}}))});if(.5<=d)return new fd.RadialGradient({stops:this.interpolateStops(d,k.stops),focus:fd.pt(.5,0).interpolate(d,k.focus),bounds:fd.rect(0,0,100*n.width,2*n.height).interpolate(d,k.bounds)})}return new fd.LinearGradient({stops:this.interpolateStops(d,k.stops),vector:this.vector.interpolate(d,k.vector)})};Il.prototype.toCSSString=function(){var d="linear-gradient("+(fd.num.toDegrees(this.vectorAsAngle())+
90+"deg,")+this.stops.map(function(k){return k.color.toRGBAString()+" "+((100*k.offset).toFixed()+"%")}).join(",");return d+")"};Il.prototype.toJSExpr=function(){return"new LinearGradient({stops: ["+this.stops.map(function(d){return"{offset: "+d.offset+", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], vector: "+this.vector+"})"};$jscomp.global.Object.defineProperties(Il.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"linearGradient"}},vectors:{configurable:!0,enumerable:!0,
get:function(){return{northsouth:fd.rect(fd.pt(0,0),fd.pt(0,1)),northeast:fd.rect(fd.pt(1,0),fd.pt(0,1)),westeast:fd.rect(fd.pt(1,0),fd.pt(0,0)),southeast:fd.rect(fd.pt(1,1),fd.pt(0,0)),southnorth:fd.rect(fd.pt(0,1),fd.pt(0,0)),southwest:fd.rect(fd.pt(0,1),fd.pt(1,0)),eastwest:fd.rect(fd.pt(0,0),fd.pt(1,0)),northwest:fd.rect(fd.pt(0,0),fd.pt(1,1))}}},vector:{configurable:!0,enumerable:!0,get:function(){return this._vector},set:function(d){this._vector=d?"string"===typeof d?this.vectors[d.toLowerCase()]:
"number"===typeof d?this.angleToRect(d):d:this.vectors.northsouth}}});wa("aS",Il);fd.LinearGradient=Il;var Vn=function(d){var k=void 0===d?{}:d;d=k.focus;var n=k.bounds;k=fd.Gradient.call(this,k.stops)||this;k.focus=d||fd.pt(.5,.5);k.bounds=n||new fd.Rectangle(0,0,20,20);return k};$jscomp.inherits(Vn,fd.Gradient);Vn.parse=function(d){d.match(/\((.*)\)/)[1].split(",")};Vn.prototype.toString=function(){return this.toCSSString()};Vn.prototype.lighter=function(d){return new this.constructor({stops:this.getStopsLighter(d),
focus:this.focus,bounds:this.bounds})};Vn.prototype.darker=function(){return new this.constructor({stops:this.getStopsDarker(),focus:this.focus,bounds:this.bounds})};Vn.prototype.interpolate=function(d,k,n){n=void 0===n?{height:1E3,width:1E3}:n;k.isColor&&(k=new fd.RadialGradient({vector:this.vector,bounds:this.bounds,stops:this.stops.map(function(b){return{color:k,offset:b.offset}})}));return"linearGradient"==k.type?k.interpolate(1-d,this,n):new fd.RadialGradient({bounds:this.bounds.interpolate(d,
k.bounds),stops:this.interpolateStops(d,k.stops),focus:this.focus.interpolate(d,k.focus)})};Vn.prototype.toCSSString=function(){var d=this.focus.scaleBy(100),k=this.bounds.extent();d="radial-gradient("+k.x/2+"px "+k.y/2+"px at "+d.x+"% "+d.y+"%";for(k=0;k<this.stops.length;k++)d+=","+this.stops[k].color.toRGBAString()+" "+((100*this.stops[k].offset).toFixed()+"%");return d+")"};Vn.prototype.toJSExpr=function(){return"new RadialGradient({stops: ["+this.stops.map(function(d){return"{offset: "+d.offset+
", color: "+d.color.toJSExpr()+"}"}).join(", ")+"], bounds: "+this.bounds+", focus: "+this.focus.toString(!1)+"})"};$jscomp.global.Object.defineProperties(Vn.prototype,{type:{configurable:!0,enumerable:!0,get:function(){return"radialGradient"}}});wa("aU",Vn);fd.RadialGradient=Vn;var PE=wa("as","#1abc9c #e8f8f5 #d1f2eb #a3e4d7 #76d7c4 #48c9b0 #1abc9c #17a589 #148f77 #117864 #0e6251 #16a085 #e8f6f3 #d0ece7 #a2d9ce #73c6b6 #45b39d #16a085 #138d75 #117a65 #0e6655 #0b5345 #2ecc71 #eafaf1 #d5f5e3 #abebc6 #82e0aa #58d68d #2ecc71 #28b463 #239b56 #1d8348 #186a3b #27ae60 #e9f7ef #d4efdf #a9dfbf #7dcea0 #52be80 #27ae60 #229954 #1e8449 #196f3d #145a32 #3498db #ebf5fb #d6eaf8 #aed6f1 #85c1e9 #5dade2 #3498db #2e86c1 #2874a6 #21618c #1b4f72 #2980b9 #eaf2f8 #d4e6f1 #a9cce3 #7fb3d5 #5499c7 #2980b9 #2471a3 #1f618d #1a5276 #154360 #9b59b6 #f5eef8 #ebdef0 #d7bde2 #c39bd3 #af7ac5 #9b59b6 #884ea0 #76448a #633974 #512e5f #8e44ad #f4ecf7 #e8daef #d2b4de #bb8fce #a569bd #8e44ad #7d3c98 #6c3483 #5b2c6f #4a235a #34495e #ebedef #d6dbdf #aeb6bf #85929e #5d6d7e #34495e #2e4053 #283747 #212f3c #1b2631 #2c3e50 #eaecee #d5d8dc #abb2b9 #808b96 #566573 #2c3e50 #273746 #212f3d #1c2833 #17202a #f1c40f #fef9e7 #fcf3cf #f9e79f #f7dc6f #f4d03f #f1c40f #d4ac0d #b7950b #9a7d0a #7d6608 #f39c12 #fef5e7 #fdebd0 #fad7a0 #f8c471 #f5b041 #f39c12 #d68910 #b9770e #9c640c #7e5109 #e67e22 #fdf2e9 #fae5d3 #f5cba7 #f0b27a #eb984e #e67e22 #ca6f1e #af601a #935116 #784212 #d35400 #fbeee6 #f6ddcc #edbb99 #e59866 #dc7633 #d35400 #ba4a00 #a04000 #873600 #6e2c00 #e74c3c #fdedec #fadbd8 #f5b7b1 #f1948a #ec7063 #e74c3c #cb4335 #b03a2e #943126 #78281f #c0392b #f9ebea #f2d7d5 #e6b0aa #d98880 #cd6155 #c0392b #a93226 #922b21 #7b241c #641e16 #ecf0f1 #fdfefe #fbfcfc #f7f9f9 #f4f6f7 #f0f3f4 #ecf0f1 #d0d3d4 #b3b6b7 #979a9a #7b7d7d #bdc3c7 #f8f9f9 #f2f3f4 #e5e7e9 #d7dbdd #cacfd2 #bdc3c7 #a6acaf #909497 #797d7f #626567 #95a5a6 #f4f6f6 #eaeded #d5dbdb #bfc9ca #aab7b8 #95a5a6 #839192 #717d7e #5f6a6a #4d5656 #7f8c8d #f2f4f4 #e5e8e8 #ccd1d1 #b2babb #99a3a4 #7f8c8d #707b7c #616a6b #515a5a #424949".split(" "));
fd.flatDesignColors=PE;fd.flatDesignColors=PE;fd.flatDesignColors=PE;var QE=wa("at","#f44336 #ffebee #ffcdd2 #ef9a9a #e57373 #ef5350 #f44336 #e53935 #d32f2f #c62828 #b71c1c #ff8a80 #ff5252 #ff1744 #d50000 #e91e63 #fce4ec #f8bbd0 #f48fb1 #f06292 #ec407a #e91e63 #d81b60 #c2185b #ad1457 #880e4f #ff80ab #ff4081 #f50057 #c51162 #9c27b0 #f3e5f5 #e1bee7 #ce93d8 #ba68c8 #ab47bc #9c27b0 #8e24aa #7b1fa2 #6a1b9a #4a148c #ea80fc #e040fb #d500f9 #aa00ff #673ab7 #ede7f6 #d1c4e9 #b39ddb #9575cd #7e57c2 #673ab7 #5e35b1 #512da8 #4527a0 #311b92 #b388ff #7c4dff #651fff #6200ea #3f51b5 #e8eaf6 #c5cae9 #9fa8da #7986cb #5c6bc0 #3f51b5 #3949ab #303f9f #283593 #1a237e #8c9eff #536dfe #3d5afe #304ffe #2196f3 #e3f2fd #bbdefb #90caf9 #64b5f6 #42a5f5 #2196f3 #1e88e5 #1976d2 #1565c0 #0d47a1 #82b1ff #448aff #2979ff #2962ff #03a9f4 #e1f5fe #b3e5fc #81d4fa #4fc3f7 #29b6f6 #03a9f4 #039be5 #0288d1 #0277bd #01579b #80d8ff #40c4ff #00b0ff #0091ea #00bcd4 #e0f7fa #b2ebf2 #80deea #4dd0e1 #26c6da #00bcd4 #00acc1 #0097a7 #00838f #006064 #84ffff #18ffff #00e5ff #00b8d4 #009688 #e0f2f1 #b2dfdb #80cbc4 #4db6ac #26a69a #009688 #00897b #00796b #00695c #004d40 #a7ffeb #64ffda #1de9b6 #00bfa5 #4caf50 #e8f5e9 #c8e6c9 #a5d6a7 #81c784 #66bb6a #4caf50 #43a047 #388e3c #2e7d32 #1b5e20 #b9f6ca #69f0ae #00e676 #00c853 #8bc34a #f1f8e9 #dcedc8 #c5e1a5 #aed581 #9ccc65 #8bc34a #7cb342 #689f38 #558b2f #33691e #ccff90 #b2ff59 #76ff03 #64dd17 #cddc39 #f9fbe7 #f0f4c3 #e6ee9c #dce775 #d4e157 #cddc39 #c0ca33 #afb42b #9e9d24 #827717 #f4ff81 #eeff41 #c6ff00 #aeea00 #ffeb3b #fffde7 #fff9c4 #fff59d #fff176 #ffee58 #ffeb3b #fdd835 #fbc02d #f9a825 #f57f17 #ffff8d #ffff00 #ffea00 #ffd600 #ffc107 #fff8e1 #ffecb3 #ffe082 #ffd54f #ffca28 #ffc107 #ffb300 #ffa000 #ff8f00 #ff6f00 #ffe57f #ffd740 #ffc400 #ffab00 #ff9800 #fff3e0 #ffe0b2 #ffcc80 #ffb74d #ffa726 #ff9800 #fb8c00 #f57c00 #ef6c00 #e65100 #ffd180 #ffab40 #ff9100 #ff6d00 #ff5722 #fbe9e7 #ffccbc #ffab91 #ff8a65 #ff7043 #ff5722 #f4511e #e64a19 #d84315 #bf360c #ff9e80 #ff6e40 #ff3d00 #dd2c00 #795548 #efebe9 #d7ccc8 #bcaaa4 #a1887f #8d6e63 #795548 #6d4c41 #5d4037 #4e342e #3e2723 #9e9e9e #fafafa #f5f5f5 #eeeeee #e0e0e0 #bdbdbd #9e9e9e #757575 #616161 #424242 #212121 #607d8b #eceff1 #cfd8dc #b0bec5 #90a4ae #78909c #607d8b #546e7a #455a64 #37474f #263238 #ffffff #000000".split(" "));
fd.materialDesignColors=QE;fd.materialDesignColors=QE;fd.materialDesignColors=QE;var RE=wa("au","ccff00 ccff33 ccff66 ccff99 ccffcc ccffff ffffff ffffcc ffff99 ffff66 ffff33 ffff00 cccc00 cccc33 cccc66 cccc99 cccccc ccccff ffccff ffcccc ffcc99 ffcc66 ffcc33 ffcc00 cc9900 cc9933 cc9966 cc9999 cc99cc cc99ff ff99ff ff99cc ff9999 ff9966 ff9933 ff9900 cc6600 cc6633 cc6666 cc6699 cc66cc cc66ff ff66ff ff66cc ff6699 ff6666 ff6633 ff6600 cc3300 cc3333 cc3366 cc3399 cc33cc cc33ff ff33ff ff33cc ff3399 ff3366 ff3333 ff3300 cc0000 cc0033 cc0066 cc0099 cc00cc cc00ff ff00ff ff00cc ff0099 ff0066 ff0033 ff0000 660000 660033 660066 660099 6600cc 6600ff 9900ff 9900cc 990099 990066 990033 990000 663300 663333 663366 663399 6633cc 6633ff 9933ff 9933cc 993399 993366 993333 993300 666600 666633 666666 666699 6666cc 6666ff 9966ff 9966cc 996699 996666 996633 996600 669900 669933 669966 669999 6699cc 6699ff 9999ff 9999cc 999999 999966 999933 999900 66cc00 66cc33 66cc66 66cc99 66cccc 66ccff 99ccff 99cccc 99cc99 99cc66 99cc33 99cc00 66ff00 66ff33 66ff66 66ff99 66ffcc 66ffff 99ffff 99ffcc 99ff99 99ff66 99ff33 99ff00 00ff00 00ff33 00ff66 00ff99 00ffcc 00ffff 33ffff 33ffcc 33ff99 33ff66 33ff33 33ff00 00cc00 00cc33 00cc66 00cc99 00cccc 00ccff 33ccff 33cccc 33cc99 33cc66 33cc33 33cc00 009900 009933 009966 009999 0099cc 0099ff 3399ff 3399cc 339999 339966 339933 339900 006600 006633 006666 006699 0066cc 0066ff 3366ff 3366cc 336699 336666 336633 336600 003300 003333 003366 003399 0033cc 0033ff 3333ff 3333cc 333399 333366 333333 333300 000000 000033 000066 000099 0000cc 0000ff 3300ff 3300cc 330099 330066 330033 330000".split(" "));
fd.webSafeColors=RE;fd.webSafeColors=RE;fd.webSafeColors=RE;var Xfa=Object.freeze({__proto__:null,Complementary:Ox,Triadic:Px,Tetradic:Oz,Quadratic:Qx,Analogous:Rx,Neutral:Pz,Color:xf,LinearGradient:Il,RadialGradient:Vn,flatDesignColors:PE,materialDesignColors:QE,webSafeColors:RE}),D2=lively.FreezerRuntime.recorderFor("lively.graphics/index.js");Object.assign(D2,Xfa);Object.assign(D2,dda);var Yfa=Object.freeze({__proto__:null,Complementary:Ox,Triadic:Px,Tetradic:Oz,Quadratic:Qx,Analogous:Rx,Neutral:Pz,
Color:xf,LinearGradient:Il,RadialGradient:Vn,flatDesignColors:PE,materialDesignColors:QE,webSafeColors:RE,Point:Gf,Rectangle:Pd,Transform:Aj,Line:Fl,rect:Ff,pt:nf}),Zfa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,RQ={};!function(d,k){RQ?RQ=k():(this||Zfa)[d]=k()}("bowser",function(){function d(l){function a(J){return(J=l.match(J))&&1<J.length&&J[1]||""}function f(J){return(J=l.match(J))&&1<J.length&&J[2]||""}var m=a(/(ipod|iphone|ipad)/i).toLowerCase(),q=!/like android/i.test(l)&&
/android/i.test(l),r=/nexus\s*[0-6]\s*/i.test(l),u=!r&&/nexus\s*[0-9]+/i.test(l),v=/CrOS/.test(l),y=/silk/i.test(l),z=/sailfish/i.test(l),B=/tizen/i.test(l),C=/(web|hpw)os/i.test(l),G=/windows phone/i.test(l),F=!G&&/windows/i.test(l),N=!m&&!y&&/macintosh/i.test(l),L=!q&&!z&&!B&&!C&&/linux/i.test(l),S=a(/edge\/(\d+(\.\d+)?)/i),ha=a(/version\/(\d+(\.\d+)?)/i),qa=/tablet/i.test(l),D=!qa&&/[^-]mobi/i.test(l),P=/xbox/i.test(l);/opera|opr|opios/i.test(l)?v={name:"Opera",opera:!0,version:ha||a(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:
/coast/i.test(l)?v={name:"Opera Coast",coast:!0,version:ha||a(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(l)?v={name:"Yandex Browser",yandexbrowser:!0,version:ha||a(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(l)?v={name:"UC Browser",ucbrowser:!0,version:a(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(l)?v={name:"Maxthon",maxthon:!0,version:a(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(l)?v={name:"Epiphany",epiphany:!0,version:a(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:
/puffin/i.test(l)?v={name:"Puffin",puffin:!0,version:a(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(l)?v={name:"Sleipnir",sleipnir:!0,version:a(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(l)?v={name:"K-Meleon",kMeleon:!0,version:a(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:G?(v={name:"Windows Phone",windowsphone:!0},S?(v.msedge=!0,v.version=S):(v.msie=!0,v.version=a(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(l)?v={name:"Internet Explorer",msie:!0,version:a(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:
v?v={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(l)?v={name:"Microsoft Edge",msedge:!0,version:S}:/vivaldi/i.test(l)?v={name:"Vivaldi",vivaldi:!0,version:a(/vivaldi\/(\d+(\.\d+)?)/i)||ha}:z?v={name:"Sailfish",sailfish:!0,version:a(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(l)?v={name:"SeaMonkey",seamonkey:!0,version:a(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(l)?(v={name:"Firefox",
firefox:!0,version:a(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(l)&&(v.firefoxos=!0)):y?v={name:"Amazon Silk",silk:!0,version:a(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(l)?v={name:"PhantomJS",phantom:!0,version:a(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(l)?v={name:"SlimerJS",slimer:!0,version:a(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(l)||/rim\stablet/i.test(l)?v={name:"BlackBerry",blackberry:!0,version:ha||a(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:
C?(v={name:"WebOS",webos:!0,version:ha||a(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(l)&&(v.touchpad=!0)):/bada/i.test(l)?v={name:"Bada",bada:!0,version:a(/dolfin\/(\d+(\.\d+)?)/i)}:B?v={name:"Tizen",tizen:!0,version:a(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||ha}:/qupzilla/i.test(l)?v={name:"QupZilla",qupzilla:!0,version:a(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||ha}:/chromium/i.test(l)?v={name:"Chromium",chromium:!0,version:a(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||ha}:/chrome|crios|crmo/i.test(l)?
v={name:"Chrome",chrome:!0,version:a(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:q?v={name:"Android",version:ha}:/safari|applewebkit/i.test(l)?(v={name:"Safari",safari:!0},ha&&(v.version=ha)):m?(v={name:"iphone"==m?"iPhone":"ipad"==m?"iPad":"iPod"},ha&&(v.version=ha)):v=/googlebot/i.test(l)?{name:"Googlebot",googlebot:!0,version:a(/googlebot\/(\d+(\.\d+))/i)||ha}:{name:a(/^(.*)\/(.*) /),version:f(/^(.*)\/(.*) /)};!v.msedge&&/(apple)?webkit/i.test(l)?(/(apple)?webkit\/537\.36/i.test(l)?(v.name=v.name||
"Blink",v.blink=!0):(v.name=v.name||"Webkit",v.webkit=!0),!v.version&&ha&&(v.version=ha)):!v.opera&&/gecko\//i.test(l)&&(v.name=v.name||"Gecko",v.gecko=!0,v.version=v.version||a(/gecko\/(\d+(\.\d+)?)/i));v.msedge||!q&&!v.silk?m?(v[m]=!0,v.ios=!0):N?v.mac=!0:P?v.xbox=!0:F?v.windows=!0:L&&(v.linux=!0):v.android=!0;F="";v.windowsphone?F=a(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):m?(F=a(/os (\d+([_\s]\d+)*) like mac os x/i),F=F.replace(/[_\s]/g,".")):q?F=a(/android[ \/-](\d+(\.\d+)*)/i):v.webos?F=a(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):
v.blackberry?F=a(/rim\stablet\sos\s(\d+(\.\d+)*)/i):v.bada?F=a(/bada\/(\d+(\.\d+)*)/i):v.tizen&&(F=a(/tizen[\/\s](\d+(\.\d+)*)/i));F&&(v.osversion=F);F=F.split(".")[0];if(qa||u||"ipad"==m||q&&(3==F||4<=F&&!D)||v.silk)v.tablet=!0;else if(D||"iphone"==m||"ipod"==m||q||r||v.blackberry||v.webos||v.bada)v.mobile=!0;v.msedge||v.msie&&10<=v.version||v.yandexbrowser&&15<=v.version||v.vivaldi&&1<=v.version||v.chrome&&20<=v.version||v.firefox&&20<=v.version||v.safari&&6<=v.version||v.opera&&10<=v.version||
v.ios&&v.osversion&&6<=v.osversion.split(".")[0]||v.blackberry&&10.1<=v.version||v.chromium&&20<=v.version?v.a=!0:v.msie&&10>v.version||v.chrome&&20>v.version||v.firefox&&20>v.version||v.safari&&6>v.version||v.opera&&10>v.version||v.ios&&v.osversion&&6>v.osversion.split(".")[0]||v.chromium&&20>v.version?v.c=!0:v.x=!0;return v}function k(l,a){var f=[],m;if(Array.prototype.map)return Array.prototype.map.call(l,a);for(m=0;m<l.length;m++)f=a(l[m]);return f}function n(l){var a=Math.max(l[0].split(".").length,
l[1].split(".").length);for(l=k(l,function(f){var m=a-f.split(".").length;f+=Array(m+1).join(".0");return k(f.split("."),function(q){return Array(20-q.length).join("0")+q}).reverse()});0<=--a;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(0===a)return 0}else return-1}}function b(l,a,f){var m=e;"string"===typeof a&&(f=a,a=void 0);void 0===a&&(a=!1);f&&(m=d(f));f=""+m.version;for(var q in l)if(l.hasOwnProperty(q)&&m[q])return 0>n([f,l[q]]);return a}var e=d("undefined"!==typeof navigator?navigator.userAgent:
"");e.test=function(l){for(var a=0;a<l.length;++a){var f=l[a];if("string"===typeof f&&f in e)return!0}return!1};e.isUnsupportedBrowser=b;e.compareVersions=n;e.check=function(l,a,f){return!b(l,a,f)};e._detect=d;return e});var ir=RQ,$k=lively.FreezerRuntime.recorderFor("lively.morphic/config.js");$k.parseURLQuery=function(){if("undefined"===typeof document||!document.location)return{};var d=(document.location.hash||document.location.search).slice(1);d=d&&d.split("&");var k={};if(d)for(var n=0;n<d.length;n++){var b=
d[n].split("="),e=b[0],l=!0;if(1<b.length&&(l=decodeURIComponent(b.slice(1).join("=")),l.match(/^(true|false|null|[0-9"[{].*)$/)))try{l=JSON.parse(l)}catch(a){"["===l[0]&&(l=l.slice(1,-1).split(","))}k[e]=l}return k};$k.Rectangle=Pd;$k.Color=xf;$k.bowser=ir;$k.joinPath=rf;$k.isMac=!!$k.bowser.mac;$k.baseURL=window.SERVER_URL||System.baseURL||document.location.origin;"undefined"!==typeof $world&&$world.withAllSubmorphsDo(function(d){return d.hasOwnProperty("_cachedKeyhandlers")&&(d._cachedKeyhandlers=
null)});$k.config={onloadURLQuery:$k.parseURLQuery(),defaultShadow:{fast:!0,distance:18,blur:30,color:$k.Color.black.withA(.2),spread:0},undoLevels:20,halosEnabled:!0,altClickDefinesThat:!0,verboseLogging:!0,maxStatusMessages:5,repeatClickInterval:250,longClick:{minDur:500,maxDur:1E3,maxDist:2},showTooltipsAfter:.8,users:{authServerURL:"https://auth.lively-next.org",autoLoginAsGuest:!1},ide:{workerEnabled:!1,js:{ignoredPackages:["lively.web","no group",function(d){return d.includes("lively.morphic/objectdb")||
d.includes("lively.next-node_modules")||d.includes("node_modules")||d.includes("custom-npm-modules")||d.includes("mocha-es6")||d.includes("test-resources/es6")}]},modes:{aliases:{text:"text",sh:"shell",markdown:"md",javascript:"js",htmlmixed:"html",haskell:"hs",python:"py"}}},globalKeyBindings:[{keys:{mac:"Meta-Z",win:"Ctrl-Z"},command:"undo"},{keys:{mac:"Meta-Shift-Z",win:"Ctrl-Shift-Z"},command:"redo"},{keys:"Alt-X",command:"run command"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"save world"},
{keys:"Meta-Shift-L s a v e",command:"save this world"},{keys:"Meta-H",command:"show halo for focused morph"},{keys:"Meta-Shift-L C O P Y",command:"copy morph"},{keys:"Alt-M",command:"select morph"},{keys:"Escape",command:"escape"},{keys:{win:"Ctrl-Escape",mac:"Meta-Escape"},command:"close active window or morph"},{keys:"Alt-Shift-C",command:"toggle minimize active window"},{keys:{mac:"Meta-Shift-L W S",win:"Ctrl-Shift-L W S"},command:"search workspaces"},{keys:{mac:"Meta-O",win:"Ctrl-O"},command:"open status message of focused morph"},
{keys:{win:"Ctrl-K",mac:"Meta-K"},command:{command:"open javascript workspace",onlyWhenFocused:!1}},{keys:"Alt-Shift-1",command:{command:"open shell terminal",onlyWhenFocused:!1}},{keys:{win:"Ctrl-B",mac:"Meta-B"},command:{command:"open browser",onlyWhenFocused:!1}},{keys:{win:"Ctrl-P",mac:"Meta-P"},command:{command:"open PartsBin",onlyWhenFocused:!0}},{keys:"Alt-T",command:{command:"choose and browse module",onlyWhenFocused:!1}},{keys:"Alt-Shift-T",command:{command:"choose and browse package resources",
onlyWhenFocused:!1}},{keys:{mac:"Ctrl-X D"},command:"open file browser"},{keys:{mac:"Ctrl-X Ctrl-F"},command:"open file"},{keys:{win:"Ctrl-Shift-F",mac:"Meta-Shift-F"},command:{command:"open code search",onlyWhenFocused:!1}},{keys:"Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:1}}},{keys:"Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:1}}},{keys:"Up",command:{command:"move or resize halo target",args:{what:"move",
direction:"up",offset:1}}},{keys:"Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:1}}},{keys:"Meta-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:10}}},{keys:"Meta-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:10}}},{keys:"Meta-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:10}}},{keys:"Meta-Down",command:{command:"move or resize halo target",
args:{what:"move",direction:"down",offset:10}}},{keys:"Alt-Left",command:{command:"move or resize halo target",args:{what:"move",direction:"left",offset:100}}},{keys:"Alt-Right",command:{command:"move or resize halo target",args:{what:"move",direction:"right",offset:100}}},{keys:"Alt-Up",command:{command:"move or resize halo target",args:{what:"move",direction:"up",offset:100}}},{keys:"Alt-Down",command:{command:"move or resize halo target",args:{what:"move",direction:"down",offset:100}}},{keys:"Shift-Left",
command:{command:"move or resize halo target",args:{what:"resize",direction:"left",offset:1}}},{keys:"Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:1}}},{keys:"Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:1}}},{keys:"Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:1}}},{keys:"Meta-Shift-Left",command:{command:"move or resize halo target",
args:{what:"resize",direction:"left",offset:10}}},{keys:"Meta-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:10}}},{keys:"Meta-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:10}}},{keys:"Meta-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:10}}},{keys:"Alt-Shift-Left",command:{command:"move or resize halo target",args:{what:"resize",direction:"left",
offset:100}}},{keys:"Alt-Shift-Right",command:{command:"move or resize halo target",args:{what:"resize",direction:"right",offset:100}}},{keys:"Alt-Shift-Up",command:{command:"move or resize halo target",args:{what:"resize",direction:"up",offset:100}}},{keys:"Alt-Shift-Down",command:{command:"move or resize halo target",args:{what:"resize",direction:"down",offset:100}}},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"close halo target"},{keys:{win:"Ctrl-`|Alt-`",mac:"Meta-1"},command:"window switcher"},
{keys:{mac:"Meta-Shift-L R E S 1",win:"Ctrl-Shift-L R E S 1"},command:{command:"resize active window",args:{how:"col1"}}},{keys:{mac:"Meta-Shift-L R E S 2",win:"Ctrl-Shift-L R E S 2"},command:{command:"resize active window",args:{how:"col2"}}},{keys:{mac:"Meta-Shift-L R E S 3",win:"Ctrl-Shift-L R E S 3"},command:{command:"resize active window",args:{how:"col3"}}},{keys:{mac:"Meta-Shift-L R E S C",win:"Ctrl-Shift-L R E S C"},command:{command:"resize active window",args:{how:"center"}}},{keys:{mac:"Meta-Shift-L R E S L",
win:"Ctrl-Shift-L R E S L"},command:{command:"resize active window",args:{how:"left"}}},{keys:{mac:"Meta-Shift-L R E S R",win:"Ctrl-Shift-L R E S R"},command:{command:"resize active window",args:{how:"right"}}},{keys:{mac:"Meta-Shift-L R E S F",win:"Ctrl-Shift-L R E S F"},command:{command:"resize active window",args:{how:"full"}}},{keys:{mac:"Meta-Shift-L R E S T",win:"Ctrl-Shift-L R E S T"},command:{command:"resize active window",args:{how:"top"}}},{keys:{mac:"Meta-Shift-L R E S B",win:"Ctrl-Shift-L R E S B"},
command:{command:"resize active window",args:{how:"bottom"}}},{keys:{mac:"Meta-Shift-L R E S Escape",win:"Ctrl-Shift-L R E S Escape"},command:{command:"resize active window",args:{how:"reset"}}}],text:{basicFontItems:"Sans-serif;serif;Monospace;Arial Black;Arial Narrow;Comic Sans MS;Garamond;Tahoma;Trebuchet MS;Verdana;custom...".split(";"),cursorBlinkPeriod:.5,useSoftTabs:!0,tabWidth:2,markStackSize:16,undoLevels:50,clipboardBufferLength:100,useMultiSelect:!0,undoGroupDelay:600,defaultKeyBindings:[{keys:{win:"Ctrl-C",
mac:"Meta-C"},command:{command:"clipboard copy",passEvent:!0}},{keys:"Ctrl-W",command:{command:"manual clipboard copy",args:{delete:!0}}},{keys:"Alt-W",command:"manual clipboard copy"},{keys:"Ctrl-Y",command:"manual clipboard paste"},{keys:"Alt-Y",command:{command:"manual clipboard paste",args:{killRingCycleBack:!0}}},{keys:{win:"Ctrl-X",mac:"Meta-X"},command:{command:"clipboard cut",passEvent:!0}},{keys:{win:"Ctrl-V",mac:"Meta-V"},command:{command:"clipboard paste",passEvent:!0}},{keys:{win:"Ctrl-Z|Ctrl-Shift--",
mac:"Meta-Z|Ctrl-Shift--|Ctrl-x u"},command:"text undo"},{keys:{win:"Ctrl-Shift-Z",mac:"Meta-Shift-Z"},command:"text redo"},{keys:{win:"Ctrl-A|Ctrl-X H",mac:"Meta-A|Ctrl-X H"},command:"select all"},{keys:{win:"Alt-Enter",mac:"Meta-D|Alt-Enter"},command:"doit"},{keys:{mac:"Meta-Shift-L X B"},command:"eval all"},{keys:{win:"Alt-Ctrl-Enter",mac:"Meta-P"},command:"printit"},{keys:{win:"Alt-Ctrl-Shift-Enter",mac:"Meta-I"},command:"print inspectit"},{keys:{win:"Ctrl-Shift-I",mac:"Meta-Shift-I"},command:"inspectit"},
{keys:{win:"Ctrl-Shift-E",mac:"Meta-Shift-E"},command:"editit"},{keys:{win:"Ctrl-Shift-U",mac:"Meta-Shift-U"},command:"undefine variable"},{keys:"Backspace",command:"delete backwards"},{keys:"Shift-Backspace",command:"delete backwards"},{keys:{win:"Delete",mac:"Delete|Ctrl-D"},command:"delete"},{keys:{win:"Left|Ctrl-B",mac:"Left|Ctrl-B"},command:"go left"},{keys:{win:"Right|Ctrl-F",mac:"Right|Ctrl-F"},command:"go right"},{keys:{win:"Up|Ctrl-P",mac:"Up|Ctrl-P"},command:"go up"},{keys:{win:"Down|Ctrl-N",
mac:"Down|Ctrl-N"},command:"go down"},{keys:"Shift-Left",command:"select left"},{keys:"Shift-Right",command:"select right"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-Right",mac:"Alt-Right|Alt-F"},command:"goto word right"},{keys:{win:"Ctrl-Left",mac:"Alt-Left|Alt-B"},command:"goto word left"},{keys:{win:"Ctrl-Shift-Right",mac:"Alt-Shift-Right|Alt-Shift-F"},command:{command:"goto word right",args:{select:!0}}},{keys:{win:"Ctrl-Shift-Left",mac:"Alt-Shift-Left|Alt-Shift-B"},
command:{command:"goto word left",args:{select:!0}}},{keys:{win:"Ctrl-Backspace",mac:"Alt-Backspace"},command:"delete word left"},{keys:"Alt-D",command:"delete word right"},{keys:{win:"Alt-Ctrl-K",mac:"Alt-Ctrl-K"},command:"delete word right"},{keys:"Alt-Shift-2",command:"select word right"},{keys:"Ctrl-X Ctrl-X",command:"reverse selection"},{keys:{win:"Ctrl-Shift-L",mac:"Meta-L"},command:"select line"},{keys:{win:"Shift-Home",mac:"Shift-Home|Ctrl-Shift-A"},command:{command:"goto line start",args:{select:!0}}},
{keys:{win:"Home",mac:"Home|Ctrl-A"},command:{command:"goto line start",args:{select:!1}}},{keys:{win:"Shift-End",mac:"Shift-End|Ctrl-Shift-E"},command:{command:"goto line end",args:{select:!0}}},{keys:{win:"End",mac:"End|Ctrl-E"},command:{command:"goto line end",args:{select:!1}}},{keys:"Ctrl-C J",command:{command:"join line",args:{withLine:"before"}}},{keys:"Ctrl-C Shift-J",command:{command:"join line",args:{withLine:"after"}}},{keys:{win:"Ctrl-Shift-D",mac:"Meta-Shift-D|Ctrl-C P"},command:"duplicate line or selection"},
{keys:{win:"Ctrl-Shift-Backspace",mac:"Meta-Backspace"},command:"delete left until beginning of line"},{keys:"Ctrl-K",command:"delete emtpy line or until end of line"},{keys:{win:"Ctrl-Alt-Up|Ctrl-Alt-P",mac:"Ctrl-Meta-Up|Ctrl-Meta-P"},command:"move lines up"},{keys:{win:"Ctrl-Alt-Down|Ctrl-Alt-N",mac:"Ctrl-Meta-Down|Ctrl-Meta-N"},command:"move lines down"},{keys:{win:"PageDown",mac:"PageDown|Ctrl-V"},command:"goto page down"},{keys:{win:"PageUp",mac:"PageUp|Alt-V"},command:"goto page up"},{keys:{win:"Shift-PageDown",
mac:"Shift-PageDown"},command:"goto page down and select"},{keys:{win:"Shift-PageUp",mac:"Shift-PageUp"},command:"goto page up and select"},{keys:"Alt-Ctrl-,",command:"move cursor to screen top in 1/3 steps"},{keys:"Alt-Ctrl-.",command:"move cursor to screen bottom in 1/3 steps"},{keys:{win:"Alt-Left",mac:"Meta-Left"},command:"goto matching left"},{keys:{win:"Alt-Shift-Left",mac:"Meta-Shift-Left"},command:{command:"goto matching left",args:{select:!0}}},{keys:{win:"Alt-Right",mac:"Meta-Right"},command:"goto matching right"},
{keys:{win:"Alt-Shift-Right",mac:"Meta-Shift-Right"},command:{command:"goto matching right",args:{select:!0}}},{keys:"Alt-Ctrl-B",command:"goto matching left"},{keys:"Alt-Ctrl-F",command:"goto matching right"},{keys:"Ctrl-Up",command:"goto paragraph above"},{keys:"Ctrl-Down",command:"goto paragraph below"},{keys:{win:"Ctrl-Shift-Home",mac:"Meta-Shift-Up"},command:{command:"goto start",args:{select:!0}}},{keys:{win:"Ctrl-Shift-End",mac:"Meta-Shift-Down"},command:{command:"goto end",args:{select:!0}}},
{keys:{win:"Ctrl-Home",mac:"Meta-Up|Meta-Home|Alt-Shift-,"},command:"goto start"},{keys:{win:"Ctrl-End",mac:"Meta-Down|Meta-End|Alt-Shift-."},command:"goto end"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L|Alt-G G"},command:"goto line"},{keys:"Enter",command:"newline"},{keys:"Space",command:{command:"insertstring",args:{string:" ",undoGroup:!0}}},{keys:"Tab",command:{command:"tab - snippet expand or indent"}},{keys:{win:"Ctrl-]",mac:"Meta-]"},command:"indent"},
{keys:{win:"Ctrl-[",mac:"Meta-["},command:"outdent"},{keys:{win:"Ctrl-Enter",mac:"Meta-Enter"},command:{command:"insert line",args:{where:"below"}}},{keys:"Shift-Enter",command:{command:"insert line",args:{where:"above"}}},{keys:"Ctrl-O",command:"split line"},{keys:{mac:"Ctrl-X Ctrl-T"},command:"transpose chars"},{keys:{mac:"Ctrl-C Ctrl-U"},command:"uppercase"},{keys:{mac:"Ctrl-C Ctrl-L"},command:"lowercase"},{keys:{mac:"Meta-Shift-L W t"},command:"remove trailing whitespace"},{keys:{mac:"Ctrl-Space"},
command:"toggle active mark"},{keys:{mac:"Meta-Shift-L M O D E"},command:"change editor mode"},{keys:{mac:"Meta-Shift-L L T"},command:"toggle line wrapping"},{keys:"Esc|Ctrl-G",command:"cancel input"},{keys:{win:"Ctrl-/",mac:"Meta-/"},command:"toggle comment"},{keys:{win:"Alt-Ctrl-/",mac:"Alt-Meta-/|Alt-Meta-\u00f7"},command:"toggle block comment"},{keys:"Meta-Shift-L /  D",command:"comment box"},{keys:{win:"Ctrl-.",mac:"Meta-."},command:"[IyGotoChar] activate"},{keys:{win:"Ctrl-,",mac:"Meta-,"},
command:{command:"[IyGotoChar] activate",args:{backwards:!0}}},{keys:{win:"Ctrl-Space|Ctrl-Shift-P",mac:"Alt-Shift-Space|Alt-Space|Meta-Shift-P"},command:"text completion"},{keys:"\u00f7|Alt-/",command:"text completion first match"},{keys:"Alt-Q",command:"fit text to column"},{keys:{win:"Ctrl-F|Ctrl-G|F3",mac:"Meta-F|Meta-G|Ctrl-S"},command:"search in text"},{keys:{win:"Ctrl-Shift-F|Ctrl-Shift-G",mac:"Meta-Shift-F|Meta-Shift-G|Ctrl-R"},command:{command:"search in text",args:{backwards:!0}}},{keys:"Ctrl-Shift-/|Ctrl-C Ctrl-Shift-,",
command:"[multi select] all like this"},{keys:"Alt-Ctrl-P",command:"[multi select] add cursor above"},{keys:"Alt-Ctrl-N",command:"[multi select] add cursor below"},{keys:"Ctrl-Shift-,",command:"[multi select] more like this backward"},{keys:"Ctrl-Shift-.",command:"[multi select] more like this forward"},{keys:{mac:"Meta-Shift-,"},command:"[multi select] goto previous focused cursor"},{keys:{mac:"Meta-Shift-."},command:"[multi select] goto next focused cursor"},{keys:"Ctrl-Shift-;",command:"[multi select] remove focused cursor"},
{keys:"Alt-Ctrl-A",command:"[multi select] align cursors"},{keys:"Ctrl-X R",command:"[multi select] create rectangular selection"},{keys:{win:"Shift-Ctrl-S|Ctrl-Alt-Space",mac:"Ctrl-Command-space|Ctrl-Alt-Space"},command:"contractRegion"},{keys:{win:"Shift-Ctrl-E|Ctrl-Shift-Space",mac:"Shift-Command-Space|Ctrl-Shift-Space"},command:"expandRegion"},{keys:"Ctrl-Alt-h",command:"markDefun"},{keys:"Ctrl-Alt-d|Ctrl-Alt-Down",command:"forwardDownSexp"},{keys:"Ctrl-Alt-u|Ctrl-Alt-Up",command:"backwardUpSexp"},
{keys:"Ctrl-Alt-b|Ctrl-Alt-Left",command:"backwardSexp"},{keys:"Ctrl-Alt-f|Ctrl-Alt-Right",command:"forwardSexp"},{keys:"Alt-.",command:"selectDefinition"},{keys:"Ctrl-Shift-'",command:"selectSymbolReferenceOrDeclaration"},{keys:"Ctrl-Shift-[",command:"selectSymbolReferenceOrDeclarationPrev"},{keys:"Ctrl-Shift-]",command:"selectSymbolReferenceOrDeclarationNext"},{keys:{win:"Ctrl-=",mac:"Meta-="},command:"increase font size"},{keys:{win:"Ctrl--",mac:"Meta--"},command:"decrease font size"},{keys:"Alt-K",
command:"set link of selection"},{keys:"Alt-O",command:"set doit of selection"},{keys:{win:"Ctrl-\\",mac:"Meta-\\"},command:"reset text style"},{keys:{win:"Ctrl-Shift-L T U I",mac:"Meta-Shift-L T U I"},command:"open text attribute controls"},{keys:{win:"Ctrl-Shift-L T D",mac:"Meta-Shift-L T D"},command:"[todo] toggle todo marker"},{keys:{win:"Ctrl-Shift-L D A T E",mac:"Meta-Shift-L D A T E"},command:"insert date"},{keys:"Ctrl-C Ctrl-I",command:"change string inflection"},{keys:"Alt-Shift-4",command:"spell check word"},
{keys:"Alt-Shift-\\",command:"[shell] run shell command on region"},{keys:"Alt-Shift-;",command:"run code on text morph"},{keys:{win:"Ctrl-Shift-L O P E N",mac:"Meta-Shift-L O P E N"},command:"open file at cursor"},{keys:"Meta-F1",command:"report token at cursor"}]},codeEditor:{defaultTheme:"default",collapseSelection:!1,search:{maxCharsPerLine:1E4,fastHighlightLineCount:4E3,showTextMap:!0},defaultStyle:{fontFamily:"IBM Plex Mono",padding:$k.Rectangle.inset(4,2,4,2),fontSize:12,clipMode:"auto"},modes:{text:{style:{}}}},
systemBrowser:{fixUndeclaredVarsOnSave:!0},objectEditor:{fixUndeclaredVarsOnSave:!0},remotes:{server:System.get("@system-env").browser?document.location.origin+"/eval":null},css:{ibmPlex:$k.joinPath($k.baseURL,"lively.morphic/assets/ibm-plex/css/ibm-plex.css"),fontAwesome:$k.joinPath($k.baseURL,"/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css"),inconsolata:$k.joinPath($k.baseURL,"/lively.morphic/assets/inconsolata/inconsolata.css")}};var vk=wa("ad",$k.config);$k.default=vk;var ig=lively.FreezerRuntime.recorderFor("lively.bindings/index.js");
ig.connect=Oe;ig.disconnect=xo;ig.disconnectAll=jp;ig.once=kp;ig.signal=oj;ig.callWhenNotNull=Kn;ig.callWhenPathNotNull=hn;ig.noUpdate=Ct;ig.string=Hg;ig.arr=Qe;ig.Closure=Fi;ig.obj=lf;ig.stringifyFunctionWithoutToplevelRecorder=Gn;ig.connect=Oe;ig.connect=Oe;ig.disconnect=xo;ig.disconnect=xo;ig.disconnectAll=jp;ig.disconnectAll=jp;ig.once=kp;ig.once=kp;ig.signal=oj;ig.signal=oj;ig.noUpdate=Ct;ig.noUpdate=Ct;var aK=function(d){var k=lively.FreezerRuntime.recorderFor("lively.bindings/index.js"),n=
k.hasOwnProperty("AttributeConnection")&&"function"===typeof k.AttributeConnection?k.AttributeConnection:k.AttributeConnection=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a,f){this.init(b,e,l,a,f)}},{key:"init",value:function(b,e,l,a,f){this.doNotSerialize=["isActive","converter","updater","varMapping"];this.sourceObj=b;this.sourceAttrName=
e;this.targetObj=l;this.targetMethodName=a;this.varMapping={source:b,target:l};f=Object.assign({removeAfterUpdate:!1,forceAttributeConnection:!1,garbageCollect:!1,signalOnAssignment:!0},f);f.removeAfterUpdate&&(this.removeAfterUpdate=!0);f.forceAttributeConnection&&(this.forceAttributeConnection=!0);"boolean"===typeof f.garbageCollect&&(this.garbageCollect=f.garbageCollect);"boolean"===typeof f.signalOnAssignment&&(this.signalOnAssignment=f.signalOnAssignment);f.converter&&this.setConverter(f.converter);
f.updater&&this.setUpdater(f.updater);f.varMapping&&(this.varMapping=Object.assign(f.varMapping,this.varMapping));this.getSpec();return this}},{key:"__additionally_serialize__",value:function(b,e,l,a){ig.arr.equals(ig.arr.without(Object.keys(this.varMapping),"_rev"),["source","target"])?b.props.varMapping&&delete b.props.varMapping:a("varMapping",this.varMapping)}},{key:"__after_deserialize__",value:function(b,e){this.varMapping||(this.varMapping={});this.varMapping.source=this.sourceObj;this.varMapping.target=
this.targetObj;this.onSourceAndTargetRestored()}},{key:"onSourceAndTargetRestored",value:function(){this.sourceObj&&this.targetObj&&this.connect()}},{key:"copy",value:function(b){return ig.AttributeConnection.fromLiteral(this.toLiteral(),b)}},{key:"fixInstanceAfterCopyingFromSite",value:function(b,e,l){this.disconnect()}},{key:"clone",value:function(){var b=new this.constructor(this.getSourceObj(),this.getSourceAttrName(),this.getTargetObj(),this.getTargetMethodName(),this.getSpec());this.dependedBy&&
(b.dependedBy=this.dependedBy);return b}},{key:"getTargetObj",value:function(){return this.targetObj}},{key:"getSourceObj",value:function(){return this.sourceObj}},{key:"getSourceAttrName",value:function(){return this.sourceAttrName}},{key:"getTargetMethodName",value:function(){return this.targetMethodName}},{key:"getSourceValue",value:function(){return this.getSourceObj()[this.getSourceAttrName()]}},{key:"getPrivateSourceValue",value:function(){return this.sourceObj[this.privateAttrName(this.sourceAttrName)]}},
{key:"getConverter",value:function(){if(!this.converterString)return null;this.converter||(this.converter=ig.Closure.fromSource(this.converterString,this.varMapping).recreateFunc());return this.converter}},{key:"setConverter",value:function(b){delete this.converter;return this.converterString=b?String(b):null}},{key:"getUpdater",value:function(){if(!this.updaterString)return null;this.updater||(this.updater=ig.Closure.fromSource(this.updaterString,this.varMapping).recreateFunc());return this.updater}},
{key:"setUpdater",value:function(b){delete this.updater;return this.updaterString=b?ig.stringifyFunctionWithoutToplevelRecorder(b):null}},{key:"getSpec",value:function(){var b={};this.updaterString&&(b.updater=this.getUpdater());this.converterString&&(b.converter=this.getConverter());this.removeAfterUpdate&&(b.removeAfterUpdate=!0);this.forceAttributeConnection&&(b.forceAttributeConnection=!0);this.hasOwnProperty("garbageCollect")&&(b.garbageCollect=this.garbageCollect);this.hasOwnProperty("signalOnAssignment")&&
(b.signalOnAssignment=this.signalOnAssignment);return b}},{key:"resetSpec",value:function(){delete this.garbageCollect;delete this.signalOnAssignment;delete this.removeAfterUpdate;delete this.forceAttributeConnection;delete this.converter;delete this.converterString;delete this.updater;delete this.updaterString}},{key:"privateAttrName",value:function(b){return"$$"+b}},{key:"activate",value:function(){this.isActive=!0}},{key:"deactivate",value:function(){delete this.isActive}},{key:"connect",value:function(){var b=
this.getExistingConnection();b!==this&&(b&&b.disconnect(),this.addAttributeConnection());b=this.sourceObj;var e=this.sourceAttrName,l=this.forceAttributeConnection,a=b.__lookupSetter__(e),f=b.__lookupGetter__(e),m=!a&&!f&&(this.getSourceValue()||this.getPrivateSourceValue());"function"!==typeof m||l?this.addSourceObjGetterAndSetter(f,a):m.isWrapped||this.addConnectionWrapper(b,e,m);return this}},{key:"disconnect",value:function(){var b=this,e=this.sourceObj;if(!e||!e.attributeConnections)return this.removeSourceObjGetterAndSetter();
e.attributeConnections=e.attributeConnections.filter(function(a){return!b.isSimilarConnection(a)});var l=e.attributeConnections.filter(function(a){return b.getSourceAttrName()==a.getSourceAttrName()});0==e.attributeConnections.length&&delete e.attributeConnections;0==l.length&&this.removeSourceObjGetterAndSetter();return null}},{key:"update",value:function(b,e){if(this.isActive)return null;var l=this,a=this.getUpdater(),f=this.getConverter(),m=this.targetObj,q=this.targetMethodName;if(!m||!q)return e=
"Cannot update "+this.toString(b)+" because of no target ("+m+") or targetProp ("+q+") ",this.isWeakConnection&&this.disconnect(),console.error(e),null;var r=m[q],u=function(y,z,B,C,G,F){B=[y,z,B,C,G,F];f&&(b=f.call(l,y,z),y=B[0]=b);y="function"===typeof r?r.apply(m,B):m[q]=y;l.removeAfterUpdate&&l.disconnect();return y};try{return this.isActive=!0,a?a.call(this,u,b,e):u(b,e)}catch(y){var v=this.sourceObj&&"function"===typeof this.sourceObj.world&&this.sourceObj.world()||this.targetObj&&"function"===
typeof this.targetObj.world&&this.targetObj.world();v?v.logError(y,"AttributeConnection>>update: "):console.error("Error when trying to update "+this+" with value "+b+":\n"+y+"\n"+y.stack)}finally{delete this.isActive}return null}},{key:"addSourceObjGetterAndSetter",value:function(b,e){if(!(b&&b.isAttributeConnectionGetter||e&&e.isAttributeConnectionSetter)){var l=this.sourceObj,a=this.sourceAttrName,f=this.privateAttrName(a);l[f]&&console.warn("newAttrName "+f+" already exists.Are there already other connections?");
l.hasOwnProperty("doNotSerialize")||(l.doNotSerialize=[]);ig.arr.pushIfNotIncluded(l.doNotSerialize,f);l.hasOwnProperty("doNotCopyProperties")||(l.doNotCopyProperties=[]);ig.arr.pushIfNotIncluded(l.doNotCopyProperties,f);b&&(l.hasOwnProperty(a)?l.__defineGetter__(f,b):l.__defineGetter__(f,function(){return l.constructor.prototype.__lookupGetter__(a).bind(l)()}));e&&(l.hasOwnProperty(a)?l.__defineSetter__(f,e):l.__defineSetter__(f,function(m){l.constructor.prototype.__lookupSetter__(a).bind(l)(m)}));
b||e||!l.hasOwnProperty(a)||(l[f]=l[a]);l.__defineSetter__(a,function(m){var q=l[f];l[f]=m;if(void 0===l.attributeConnections)return console.error("Sth wrong with sourceObj, has no attributeConnections"),null;l.attributeConnections.forEach(function(r){r&&r.getSourceAttrName()===a&&r.signalOnAssignment&&r.update(m,q)});return m});l.__lookupSetter__(a).isAttributeConnectionSetter=!0;l.__defineGetter__(a,function(){return l[f]});l.__lookupGetter__(a).isAttributeConnectionGetter=!0}}},{key:"addConnectionWrapper",
value:function(b,e,l){if("function"!==typeof l)throw Error("addConnectionWrapper didnt get a method to wrap");var a;if(a=b.hasOwnProperty(e)){b[this.privateAttrName(e)]=l;var f=function(){return l}}else f=function(){return Object.getPrototypeOf(b)[e]};b[e]=function(){if(void 0===this.attributeConnections)throw Error("[lively.bindings] Something is wrong with connection source object, it has no attributeConnections");for(var m=this.attributeConnections.slice(),q=this[e].originalFunction.apply(this,
arguments),r=0;r<m.length;r++){var u=m[r];u.getSourceAttrName()===e&&u.update(arguments[0])}return q};b[e].isOwnProperty=a;b[e].isWrapped=!0;b[e].isConnectionWrapper=!0;Object.defineProperty(b[e],"originalFunction",{get:f});b[e].toString=function(){return"<Wrapped "+f()+">"}}},{key:"removeSourceObjGetterAndSetter",value:function(){var b=this.sourceAttrName,e=this.privateAttrName(b),l=this.sourceObj;if(l){if(l.__lookupGetter__(b)){if(delete l[b],l.hasOwnProperty(e)){try{l[b]=l[e]}catch(f){}delete l[e]}}else if(l[b]&&
l[b].isConnectionWrapper){var a=l[b];delete l[b];l[b]||(l[b]=a.originalFunction)}l.doNotSerialize&&l.doNotSerialize.includes(e)&&(l.doNotSerialize=ig.arr.without(l.doNotSerialize,e),0==l.doNotSerialize.length&&delete l.doNotSerialize);l.doNotCopyProperties&&l.doNotCopyProperties.includes(e)&&(l.doNotCopyProperties=ig.arr.without(l.doNotCopyProperties,e),0==l.doNotCopyProperties.length&&delete l.doNotCopyProperties)}}},{key:"addAttributeConnection",value:function(){this.sourceObj.attributeConnections||
(this.sourceObj.attributeConnections=[]);this.sourceObj.attributeConnections.push(this)}},{key:"getExistingConnection",value:function(){var b=this.sourceObj&&this.sourceObj.attributeConnections;if(!b)return null;for(var e=0,l=b.length;e<l;e++)if(this.isSimilarConnection(b[e]))return b[e];return null}},{key:"isRecursivelyActivated",value:function(){return this.isActive}},{key:"isSimilarConnection",value:function(b){return b&&b.constructor==this.constructor?this.sourceObj==b.sourceObj&&this.sourceAttrName==
b.sourceAttrName&&this.targetObj==b.targetObj&&this.targetMethodName==b.targetMethodName:!1}},{key:"toString",value:function(b){try{return ig.string.format("AttributeConnection(%s.%s %s %s.%s)",this.getSourceObj(),this.getSourceAttrName(),b?"--\x3e"+String(b)+"--\x3e":"--\x3e",this.getTargetObj(),this.getTargetMethodName())}catch(e){return"<Error in AttributeConnection>>toString>"}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AttributeConnection"}}],k,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.bindings",version:"0.1.2"}}},{start:221,end:16605})}(void 0);ig.AttributeConnection=aK;ig.AttributeConnection=aK;ig.AttributeConnection=aK;ig.callWhenNotNull=Kn;ig.callWhenNotNull=Kn;ig.callWhenPathNotNull=hn;ig.callWhenPathNotNull=hn;var $fa=Object.freeze({__proto__:null,connect:Oe,disconnect:xo,disconnectAll:jp,once:kp,
signal:oj,noUpdate:Ct,AttributeConnection:aK,callWhenNotNull:Kn,callWhenPathNotNull:hn});lively.FreezerRuntime.recorderFor("lively.serializer2/object-extensions.js");Object.defineProperty(Symbol.prototype,"__serialize__",{configurable:!0,value:function(){var d=function(){return Object.getOwnPropertyNames(Symbol).filter(function(n){return"symbol"===typeof Symbol[n]}).reduce(function(n,b){return n.set(Symbol[b],"Symbol."+b)},new Map)}(),k=/^Symbol\((.*)\)$/;return function(){var n="function"===typeof this[Symbol.toPrimitive]?
this[Symbol.toPrimitive]():this,b=Symbol.keyFor(n);if(b)return{__expr__:'Symbol.for("'+b+'")'};if(d.get(n))return{__expr__:d.get(n)};n=String(n).match(k);return{__expr__:n?'Symbol("'+n[1]+'")':"Symbol()"}}}()});Object.defineProperty(System,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System"}}});Object.defineProperty(System.global,"__serialize__",{configurable:!0,value:function(){return{__expr__:"System.global"}}});Object.defineProperty(Map.prototype,"__serialize__",{configurable:!0,
value:function(d,k,n){var b=d.add(this),e=b.currentRev,l=b.currentSnapshot,a=l.entries=[],f=0;k[b.id]=l;d.classHelper.addClassInfo(b,this,l);l=$jscomp.makeIterator(this);for(var m=l.next();!m.done;m=l.next()){var q=$jscomp.makeIterator(m.value);m=q.next().value;q=q.next().value;f++;m=b.snapshotProperty(b.id,m,n.concat("key",String(f)),k,d);q=b.snapshotProperty(b.id,q,n.concat("value",String(f)),k,d);a.push(m,q)}return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Map.prototype,"__deserialize__",
{configurable:!0,value:function(d,k,n,b,e){d=d.entries;for(var l=0;l<d.length;l+=2){var a=d[l+1],f=k.recreateProperty("key."+l,d[l],n,b,e.concat("key",l));a=k.recreateProperty("value."+l,a,n,b,e.concat("value",l));this.set(f,a)}}});Object.defineProperty(Set.prototype,"__serialize__",{configurable:!0,value:function(d,k,n){var b=d.add(this),e=b.currentRev,l=b.currentSnapshot,a=l.entries=[],f=0;k[b.id]=l;d.classHelper.addClassInfo(b,this,l);l=$jscomp.makeIterator(this);for(var m=l.next();!m.done;m=l.next())m=
m.value,f++,m=b.snapshotProperty(b.id,m,n.concat("entry",String(f)),k,d),a.push(m);return b.asRefForSerializedObjMap(e)}});Object.defineProperty(Set.prototype,"__deserialize__",{configurable:!0,value:function(d,k,n,b,e){d=d.entries;for(var l=0;l<d.length;l++){var a=k.recreateProperty("entry."+l,d[l],n,b,e.concat("key",l));this.add(a)}}});var SQ=lively.FreezerRuntime.recorderFor("lively.serializer2/util.js");SQ.isPrimitive=NA;SQ.isPrimitive=NA;SQ.isPrimitive=NA;var ni=lively.FreezerRuntime.recorderFor("lively.serializer2/class-helper.js");
ni.getClassName=yo;ni.getSerializableClassMeta=Dt;ni.locateClass=Eq;ni.arr=Qe;ni.string=Hg;ni.classMetaForSerializationProp="lively.serializer-class-info";ni.classSuperClassProp=Symbol.for("lively-instance-superclass");ni.classNameProp=Symbol.for("__LivelyClassName__");ni.moduleMetaInClassProp=Symbol.for("lively-module-meta");ni.getClassName=yo;ni.getClassName=yo;ni.getSerializableClassMeta=Dt;ni.getSerializableClassMeta=Dt;ni.locateClass=Eq;ni.locateClass=Eq;var ou=function(d){this.options=Object.assign({ignoreClassNotFound:!0},
d);this[Symbol.for("lively-instance-restorer")]=!0};ou.prototype.addClassInfo=function(d,k,n){(d=ni.getSerializableClassMeta(k))&&(n[ni.classMetaForSerializationProp]=d)};ou.prototype.restoreIfClassInstance=function(d,k){if(k.hasOwnProperty(ni.classMetaForSerializationProp)&&(d=k[ni.classMetaForSerializationProp],d.className)){k=ni.locateClass(d);if(!k||"function"!==typeof k){k="Trying to deserialize instance of "+JSON.stringify(d)+" but this class cannot be found!";if(!this.options.ignoreClassNotFound)throw Error(k);
console.error(k);return{isClassPlaceHolder:!0,className:d.className}}return k.hasOwnProperty(Symbol.for("lively-instance-superclass"))?new k(this):new k}};ou.sourceModulesInObjRef=function(d){var k=[];(d=d&&d[ni.classMetaForSerializationProp])&&d.module&&k.push(d.module);return k};ou.sourceModulesIn=function(d){var k=[];Object.keys(d).forEach(function(n){(n=d[n])&&n[ni.classMetaForSerializationProp]&&k.push(n[ni.classMetaForSerializationProp])});return ni.arr.uniqBy(k,function(n,b){var e=n.module,
l=b.module;return!e&&!l||e&&!l||!e&&l?n.className===b.className:n.className===b.className&&e.package.name==l.package.name&&e.package.pathInPackage==l.package.pathInPackage})};$jscomp.global.Object.defineProperties(ou.prototype,{sourceModuleNameProperty:{configurable:!0,enumerable:!0,get:function(){return"__SourceModuleName__"}}});$jscomp.global.Object.defineProperties(ou,{moduleMetaInClassProp:{configurable:!0,enumerable:!0,get:function(){return ni.moduleMetaInClassProp}},classMetaForSerializationProp:{configurable:!0,
enumerable:!0,get:function(){return ni.classMetaForSerializationProp}},classSuperClassProp:{configurable:!0,enumerable:!0,get:function(){return ni.classSuperClassProp}},classNameProperty:{configurable:!0,enumerable:!0,get:function(){return ni.classNameProp}}});ni.ClassHelper=ou;ni.default=ou;var Hh=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins/expression-serializer.js");Hh.deserializeSpec=lp;Hh.serializeSpec=Ln;Hh.string=Hg;Hh.Closure=Fi;Hh.Path=Cg;Hh.obj=lf;Hh.properties=Gp;Hh.arr=
Qe;Hh.getSerializableClassMeta=Dt;Hh.connect=Oe;var mm=function(d){this.prefix=Object.assign({prefix:"__lv_expr__"},d).prefix+":"};mm.prototype.isSerializedExpression=function(d){return 0===d.indexOf(this.prefix)};mm.prototype.requiredModulesOf__expr__=function(d){return this.isSerializedExpression(d)?(d=this.exprStringDecode(d).bindings)?Object.keys(d):null:null};mm.prototype.exprStringDecode=function(d){var k=d.indexOf(":");d.slice(0,k);d=d.slice(k+1);for(var n={},b=!1;d&&d.startsWith("{")&&0<=
(k=d.indexOf("}:"));){b=!0;var e=d.slice(1,k);d=d.slice(k+2);d.includes("https:")&&d.indexOf("https:")<d.indexOf(":")?(d=d.replace("https:","__HTTP_PLACEHOLDER__"),k=d.indexOf(":")-20+6,d=d.replace("__HTTP_PLACEHOLDER__","https:")):k=d.indexOf(":");var l=d.slice(0,k);e=e.split(",").filter(function(a){return!!a.trim()}).map(function(a){if(!a.includes(":"))return a;var f=$jscomp.makeIterator(a.split(":"));a=f.next().value;f=f.next().value;return{exported:a,local:f}});n[l]=e;d=d.slice(k+1)}return{__expr__:d,
bindings:b?n:null}};mm.prototype.exprStringEncode=function(d){var k=d.bindings;d=String(d.__expr__);if(k)for(var n=Object.keys(k),b=0;b<n.length;b++){var e=n[b],l=k[e];Array.isArray(l)&&(l=l.map(function(a){return"string"===typeof a?a:a.exported+":"+a.local}).join(","));d="{"+l+"}:"+e+":"+d}return this.prefix+d};mm.prototype.convert__expr__obj=function(d){console.assert("__expr__"in d,"obj has no property __expr__");return this.prefix+d.__expr__};mm.prototype.__eval__=function(d,k){return Hh.__eval__(d,
k)};mm.prototype.deserializeExpr=function(d){if(!d.startsWith(this.prefix))throw Error('"'+d+'" is not a serialized expression, missing prefix "'+this.prefix+'"');return this.deserializeExprObj(this.exprStringDecode(d))};mm.prototype.deserializeExprObj=function(d){var k=d.__expr__;d=d.bindings;var n={};if(d)for(var b=d?Object.keys(d):[],e=0;e<b.length;e++){var l=b[e],a=d[l];if(lively.FreezerRuntime){var f=lively.FreezerRuntime.get(lively.FreezerRuntime.decanonicalize(l));if(!f){var m=lively.FreezerRuntime.fetchStandaloneFor(l);
m&&(f=m.exports)}f.exports&&(f=f.exports)}else f=System.get(System.decanonicalize(l));if(!f)throw Error("[lively.serializer] expression eval: bindings specify to import "+l+" but this module is not loaded!\nSource: "+k);for(l=0;l<a.length;l++){var q=a[l],r=m=void 0;"string"===typeof q?r=m=q:"object"===typeof q&&(m=q.local,r=q.exported);n[m]=f[r];k="var "+m+" = __boundValues__."+m+";\n"+k}}return this.__eval__(k,n)};wa("a0",mm);Hh.ExpressionSerializer=mm;Hh.__eval__=Hh.Closure.fromSource("function __eval__(__source__, __boundValues__) { \n  return eval(__source__); \n}").getFunc();
Hh.deserializeSpec=lp;Hh.deserializeSpec=lp;Hh.serializeSpec=Ln;Hh.serializeSpec=Ln;Hh.default=mm;var pi=lively.FreezerRuntime.recorderFor("lively.serializer2/plugins.js");pi.obj=lf;pi.Plugin=function(){};var TQ=function(){};TQ.prototype.serializeObject=function(d,k,n,b,e){if("function"!==typeof d.__serialize__)return null;(d=d.__serialize__(n,b,e))&&d.hasOwnProperty("__expr__")&&(n=n.expressionSerializer.exprStringEncode(d),d=k?n:{__expr__:n});return d};TQ.prototype.deserializeObject=function(d,
k,n,b){return(k=n.__expr__)?d.expressionSerializer.deserializeExpr(k):null};pi.CustomSerializePlugin=TQ;var UQ=function(){};UQ.prototype.additionallySerialize=function(d,k,n,b){d.classHelper.addClassInfo(k,k.realObj,n)};UQ.prototype.deserializeObject=function(d,k,n,b){return d.classHelper.restoreIfClassInstance(k,n)};pi.ClassPlugin=UQ;var E2=function(){};E2.prototype.serializeObject=function(d,k,n,b,e){d&&d.isMorph&&(d.__isBeingSerialized__=!0);return null};pi.SerializationIndicationPlugin=E2;var F2=
function(){};F2.prototype.additionallySerialize=function(d,k,n,b){k.realObj&&k.realObj.isMorph&&(k.realObj.__isBeingSerialized__=!1)};pi.SerializationFinishPlugin=F2;var bK=function(){};bK.prototype.additionallySerialize=function(d,k,n,b){var e=k.realObj;e&&"function"===typeof e.__additionally_serialize__&&e.__additionally_serialize__(n,k,d,b)};bK.prototype.additionallyDeserializeBeforeProperties=function(d,k,n,b,e,l,a){"function"===typeof n.__deserialize__&&n.__deserialize__(e,k,l,d,a)};bK.prototype.additionallyDeserializeAfterProperties=
function(d,k,n,b,e,l){"function"===typeof n.__after_deserialize__&&n.__after_deserialize__(b,k,d)};pi.AdditionallySerializePlugin=bK;var G2=function(){};G2.prototype.propertiesToSerialize=function(d,k,n,b){return(d=k.realObj)&&d.__only_serialize__||null};pi.OnlySerializePropsPlugin=G2;var H2=function(){};H2.prototype.propertiesToSerialize=function(d,k,n,b){d=k.realObj;if(!d||!d.__dont_serialize__)return null;d=pi.obj.mergePropertyInHierarchy(d,"__dont_serialize__");k=[];for(n=0;n<b.length;n++){var e=
b[n];d.includes(e)||k.push(e)}return k};pi.DontSerializePropsPlugin=H2;var VQ=function(){};VQ.prototype.propertiesToSerialize=function(d,k,n,b){var e=k.realObj;k=e.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!k)return null;d=k.properties;n=k.propertySettings.valueStoreProperty||"_state";k=[];if(e[n]){if(e.__only_serialize__){for(var l=0;l<b.length;l++){e=b[l];var a=d[e];e!==n&&(a&&a&&(a.derived||a.readOnly||a.hasOwnProperty("serialize")&&!a.serialize)||k.push(e))}return k}n=
b.indexOf(n);-1<n&&b.splice(n,1);for(l in d)n=d[l],e=b.indexOf(l),n.derived||n.readOnly||n.hasOwnProperty("serialize")&&!n.serialize?-1<e&&b.splice(e,1):-1===e&&k.push(l);return k.concat(b)}};VQ.prototype.additionallyDeserializeBeforeProperties=function(d,k,n,b,e,l,a){var f=n.constructor[Symbol.for("lively.classes-properties-and-settings")];if(!f)return b;var m=f.order;f=f.propertySettings.valueStoreProperty||"_state";b=e.props;if(b[f])return b;b=pi.obj.clone(b);n.hasOwnProperty(f)||n.initializeProperties();
for(e=0;e<m.length;e++)f=m[e],b.hasOwnProperty(f)&&(k.recreatePropertyAndSetProperty(n,b,f,l,d,a),delete b[f]);return b};pi.LivelyClassPropertiesPlugin=VQ;var WQ={livelyClassPropertiesPlugin:new pi.LivelyClassPropertiesPlugin,dontSerializePropsPlugin:new pi.DontSerializePropsPlugin,onlySerializePropsPlugin:new pi.OnlySerializePropsPlugin,additionallySerializePlugin:new pi.AdditionallySerializePlugin,classPlugin:new pi.ClassPlugin,customSerializePlugin:new pi.CustomSerializePlugin,indicationPlugin:new pi.SerializationIndicationPlugin,
finishPlugin:new pi.SerializationFinishPlugin};pi.plugins=WQ;pi.plugins=WQ;pi.plugins=WQ;var pu=[pi.plugins.indicationPlugin,pi.plugins.customSerializePlugin,pi.plugins.classPlugin,pi.plugins.additionallySerializePlugin,pi.plugins.onlySerializePropsPlugin,pi.plugins.dontSerializePropsPlugin,pi.plugins.livelyClassPropertiesPlugin,pi.plugins.finishPlugin];pi.allPlugins=pu;pi.allPlugins=pu;pi.allPlugins=pu;var Oi=lively.FreezerRuntime.recorderFor("lively.serializer2/object-pool.js");Oi.__additionally_serialize__addObjectFunction=
function(d,k,n,b,e){e=void 0===e?[]:e;return function(l,a,f){f=void 0===f?!1:f;return k.props[l]=f?{value:a,verbatim:f}:{value:d.snapshotProperty(d.id,a,e.concat([l]),n,b)}}};Oi.arr=Qe;Oi.Path=Cg;Oi.obj=lf;Oi.string=Hg;Oi.isPrimitive=NA;Oi.ClassHelper=ou;Oi.ExpressionSerializer=mm;Oi.allPlugins=pu;Oi.debugSerialization=!1;Oi.debugDeserialization=!1;var xi=function(d){this.options=Object.assign({checkForLeaks:!1,ignoreClassNotFound:!0,idPropertyName:"id"},d);this.reset()};xi.withDefaultPlugins=function(d){return new this(Object.assign({plugins:Oi.allPlugins},
d))};xi.resolveFromSnapshotAndId=function(d,k){return(new this(k)).resolveFromSnapshotAndId(d)};xi.fromSnapshot=function(d,k){return(new this(k)).readSnapshot(d)};xi.withObject=function(d,k){k=new this(k);k.add(d);return k};xi.prototype.reset=function(){this.uuidGen=Oi.string.newUUID;this._obj_ref_map=new Map;this._id_ref_map={};var d=this.options;this.classHelper=new Oi.ClassHelper(d);this.expressionSerializer=new Oi.ExpressionSerializer;d.idPropertyName&&(this.idPropertyName=d.idPropertyName);d.uuidGen&&
(this.uuidGen=d.uuidGen);d.reinitializeIds&&(this.reinitializeIds=d.reinitializeIds);d.hasOwnProperty("ignoreClassNotFound")&&(this.classHelper.options.ignoreClassNotFound=d.ignoreClassNotFound);var k=this.plugins={serializeObject:[],additionallySerialize:[],propertiesToSerialize:[],deserializeObject:[],additionallyDeserializeBeforeProperties:[],additionallyDeserializeAfterProperties:[],afterDeserialization:[],beforeDeserialization:[],afterSerialization:[],beforeSerialization:[]};d.plugins&&d.plugins.forEach(function(n){"function"===
typeof n.serializeObject&&k.serializeObject.push(n);"function"===typeof n.additionallySerialize&&k.additionallySerialize.push(n);"function"===typeof n.propertiesToSerialize&&k.propertiesToSerialize.push(n);"function"===typeof n.deserializeObject&&k.deserializeObject.push(n);"function"===typeof n.additionallyDeserializeBeforeProperties&&k.additionallyDeserializeBeforeProperties.push(n);"function"===typeof n.additionallyDeserializeAfterProperties&&k.additionallyDeserializeAfterProperties.push(n);"function"===
typeof n.beforeDeserialization&&k.beforeDeserialization.push(n);"function"===typeof n.afterDeserialization&&k.afterDeserialization.push(n);"function"===typeof n.beforeSerialization&&k.beforeSerialization.push(n);"function"===typeof n.afterSerialization&&k.afterSerialization.push(n)})};xi.prototype.knowsId=function(d){return!!this._id_ref_map[d]};xi.prototype.refForId=function(d){return this._id_ref_map[d]};xi.prototype.resolveToObj=function(d){return(d=this._id_ref_map[d])?d.realObj:void 0};xi.prototype.ref=
function(d){return this._obj_ref_map.get(d)};xi.prototype.objects=function(){return Array.from(this._obj_ref_map.keys())};xi.prototype.objectRefs=function(){return Array.from(this._obj_ref_map.values())};xi.prototype.internalAddRef=function(d){d.realObj&&this._obj_ref_map.set(d.realObj,d);return this._id_ref_map[d.id]=d};xi.prototype.add=function(d){var k=this;if(!Oi.isPrimitive(d)){if(Array.isArray(d))return d.map(function(b){return k.add(b)});var n=d.__serialization_id_property__||this.idPropertyName;
return this.ref(d)||this.internalAddRef(new Oi.ObjectRef(d[n]||this.uuidGen(),d,void 0,this.idPropertyName))}};xi.prototype.snapshot=function(d){var k={};this.plugin_beforeSerialization(k,d);for(var n=0,b=Object.keys(this._id_ref_map);n<b.length;n++)this._id_ref_map[b[n]].snapshotObject(k,this);return k=this.plugin_afterSerialization(k,d)};xi.prototype.snapshotObject=function(d){d=this.add(d).id;var k=this.snapshot(d);return{id:d,snapshot:k}};xi.prototype.readSnapshot=function(d,k){if(d.hasOwnProperty("id"))throw Error("readSnapshot expects simple serialized object map, not id-snapshot pair!");
if(this.options.skipMigrations)Oi.ObjectRef.fromSnapshot(k,d,this,[],this.idPropertyName);else{k=0;for(var n=Object.keys(d);k<n.length;k++)this.resolveToObj(n[k])||Oi.ObjectRef.fromSnapshot(n[k],d,this,[],this.idPropertyName)}return this};xi.prototype.resolveFromSnapshotAndId=function(d){if(!d.hasOwnProperty("id"))throw Error("idAndSnapshot does not have id");if(!d.hasOwnProperty("snapshot"))throw Error("idAndSnapshot does not have snapshot");var k=d=this.plugin_beforeDeserialization(d),n=k.id;this.readSnapshot(k.snapshot,
n);this.plugin_afterDeserialization(d);return this.resolveToObj(n)};xi.prototype.plugin_beforeSerialization=function(d,k){for(var n=0;n<this.plugins.beforeSerialization.length;n++)this.plugins.beforeSerialization[n].beforeSerialization(this,d,k)};xi.prototype.plugin_afterSerialization=function(d,k){for(var n=0;n<this.plugins.afterSerialization.length;n++){var b=this.plugins.afterSerialization[n].afterSerialization(this,d,k);b&&(d=b)}return d};xi.prototype.plugin_beforeDeserialization=function(d){for(var k=
0;k<this.plugins.beforeDeserialization.length;k++){var n=this.plugins.beforeDeserialization[k].beforeDeserialization(this,d);n&&(d=n)}return d};xi.prototype.plugin_afterDeserialization=function(d){for(var k=0;k<this.plugins.afterDeserialization.length;k++)this.plugins.afterDeserialization[k].afterDeserialization(this,d)};xi.prototype.plugin_serializeObject=function(d,k,n,b){for(var e=0;e<this.plugins.serializeObject.length;e++){var l=this.plugins.serializeObject[e].serializeObject(d,k,this,n,b);if(l)return l}};
xi.prototype.plugin_propertiesToSerialize=function(d,k,n){for(var b=0;b<this.plugins.propertiesToSerialize.length;b++){var e=this.plugins.propertiesToSerialize[b].propertiesToSerialize(this,d,k,n);e&&(n=e)}return n};xi.prototype.plugin_additionallySerialize=function(d,k,n,b){n=this.plugins.additionallySerialize.length?Oi.__additionally_serialize__addObjectFunction(d,k,n,this,b):null;for(b=0;b<this.plugins.additionallySerialize.length;b++)this.plugins.additionallySerialize[b].additionallySerialize(this,
d,k,n)};xi.prototype.plugin_deserializeObject=function(d,k,n){for(var b=0;b<this.plugins.deserializeObject.length;b++){var e=this.plugins.deserializeObject[b].deserializeObject(this,d,k,n);if(e)return e}};xi.prototype.plugin_additionallyDeserializeBeforeProperties=function(d,k,n,b,e,l){for(var a=0;a<this.plugins.additionallyDeserializeBeforeProperties.length;a++){var f=this.plugins.additionallyDeserializeBeforeProperties[a].additionallyDeserializeBeforeProperties(this,d,k,n,b,e,l);f&&(n=f)}return n};
xi.prototype.plugin_additionallyDeserializeAfterProperties=function(d,k,n,b,e){for(var l=0;l<this.plugins.additionallyDeserializeAfterProperties.length;l++)this.plugins.additionallyDeserializeAfterProperties[l].additionallyDeserializeAfterProperties(this,d,k,n,b,e)};Oi.ObjectPool=xi;var jr=function(d,k,n,b){this.id=d;this.idPropertyName=void 0===b?"id":b;this.realObj=k;this.snapshotVersions=[];this.snapshots={};n&&(d=n.rev||0,this.snapshotVersions.push(d),this.snapshots[d]=n)};jr.fromSnapshot=function(d,
k,n,b,e){b=void 0===b?[]:b;d=new this(d,void 0,void 0,e);try{return n.internalAddRef(d).recreateObjFromSnapshot(k,n,b)}catch(l){if(n.options.highlightBuggyMorphs)for(;b.length;){if((k=Oi.Path(b).map(function(a,f){return"submorphs"==a?f.filter(function(m){return!m.isHand&&!m.isEpiMorph}):f}).get(n.options.rootObject))&&k.isMorph&&k.world()){k.show(!0);n.options.highlightBuggyMorphs=!1;break}b.pop()}throw l;}};jr.prototype.asRefForSerializedObjMap=function(d){return{__ref__:!0,id:this.id,rev:void 0===
d?"????":d}};jr.prototype.snapshotObject=function(d,k,n){n=void 0===n?[]:n;Oi.debugSerialization&&console.log("[serialize] "+n.join("."));if(100<n.length)throw Error("Stopping serializer, encountered a possibly infinit loop: "+n.join("."));var b=this.id,e=this.realObj,l=this.snapshots;if(!e)return console.error("Cannot marshall object ref "+b+", no real object!"),Object.assign({},this.asRefForSerializedObjMap(),{isMissing:!0});var a=e._rev||0;var f=this.asRefForSerializedObjMap(a);Oi.arr.pushIfNotIncluded(this.snapshotVersions,
a);if(l[a])return d[b]||(d[b]=l[a]),f;var m=typeof b;"number"===m&&(b=String(b),m="string");if("string"!==m)throw Error("Error snapshoting "+e+": id is not a string but "+(b+" (serialization path: ")+(n.join(".")+")"));if(m=k.plugin_serializeObject(e,!1,d,n))return l[a]=d[b]=m,f;m=Object.getOwnPropertyNames(e);var q={};l=l[a]=d[b]={rev:a,props:q};(a=k.plugin_propertiesToSerialize(this,l,m))&&(m=a);for(a=0;a<m.length;a++){var r=m[a];q[r]={value:this.snapshotProperty(b,e[r],n.concat([r]),d,k)}}k.plugin_additionallySerialize(this,
l,d,n);return f};jr.prototype.snapshotProperty=function(d,k,n,b,e){var l=this;if(Oi.isPrimitive(k))return k;var a=e.plugin_serializeObject(k,!0,b,n);if(a)return a;if("function"!==typeof k)return Array.isArray(k)?k.map(function(f,m){return l.snapshotProperty(d,f,n.concat(m),b,e)}):(k=e.add(k))&&k.isObjectRef?k.snapshotObject(b,e,n):k};jr.prototype.recreateObjFromSnapshot=function(d,k,n){if(this.realObj)return this;Oi.debugDeserialization&&console.log("[deserialize] "+this.id+" (via "+n.join(".")+")");
var b=d[this.id];if(!b)return console.error("Cannot recreateObjFromSnapshot ObjectRef "+(this.id+" b/c of missing snapshot in snapshot map!")),this;var e=b.rev,l;e=e||0;this.snapshotVersions.push(e);this.snapshots[e]=b;(l=k.plugin_deserializeObject(this,b,n))||(l={});"undefined"===typeof l._rev&&"object"===typeof l&&(l._rev=e||0);this.realObj=l;k.internalAddRef(this);if(!l)return this;e=b.props;var a=k.plugin_additionallyDeserializeBeforeProperties(this,l,e,b,d,n);a&&(e=a);if(e)for(var f in e)this.recreatePropertyAndSetProperty(l,
e,f,d,k,n);f=l.__serialization_id_property__||this.idPropertyName;k.reinitializeIds&&l.hasOwnProperty(f)&&(l[f]=k.reinitializeIds(this.id,this));k.plugin_additionallyDeserializeAfterProperties(this,l,b,d,n);return this};jr.prototype.recreatePropertyAndSetProperty=function(d,k,n,b,e,l){try{var a=k[n]||{value:"NON EXISTING"},f=a.value;d[n]=a.verbatim?f:this.recreateProperty(n,f,b,e,l.concat(n))}catch(q){try{var m=String(d)}catch(r){m="[some "+d.constructor.name+"]"}q.__seen?console.error("Error deserializing property "+
n+" of "+m):(d=n+" of "+m+" ("+JSON.stringify(f)+")",console.error("Error deserializing property "+d),q.__seen=!0)}};jr.prototype.recreateProperty=function(d,k,n,b,e){var l=this;if("string"===typeof k&&b.expressionSerializer.isSerializedExpression(k))return b.expressionSerializer.deserializeExpr(k);if(Oi.isPrimitive(k))return k;if(Array.isArray(k))return k.map(function(a,f){return l.recreateProperty(f,a,n,b,e.concat(f))});d=k.__serialization_id_property__||this.idPropertyName;return(b.refForId(k[d])||
Oi.ObjectRef.fromSnapshot(k[d],n,b,e,this.idPropertyName)).realObj};$jscomp.global.Object.defineProperties(jr.prototype,{isObjectRef:{configurable:!0,enumerable:!0,get:function(){return!0}},currentSnapshot:{configurable:!0,enumerable:!0,get:function(){if(this.snapshotVersions.length)var d=Oi.arr.last(this.snapshotVersions);else d=0,this.snapshotVersions.push(d);return this.snapshots[d]||(this.snapshots[d]={rev:d,props:{}})}},currentRev:{configurable:!0,enumerable:!0,get:function(){return this.snapshotVersions.length?
Oi.arr.last(this.snapshotVersions):0}}});Oi.ObjectRef=jr;var Me=lively.FreezerRuntime.recorderFor("lively.serializer2/snapshot-navigation.js");Me.referenceGraph=aD;Me.isReference=Fy;Me.referencesOfRef=bD;Me.referencesOfId=Kg;Me.referencesInArray=cD;Me.moduleOfId=Gy;Me.referencesAndClassNamesOfId=Xr;Me.classNameOfId=Hy;Me.findPathFromToId=vv;Me.lookupPath=mp;Me.modifyProperty=Iy;Me.removeUnreachableObjects=Yr;Me.clearDanglingConnections=OA;Me.requiredModulesOfSnapshot=np;Me.ClassHelper=ou;Me.Path=
Cg;Me.obj=lf;Me.arr=Qe;Me.graph=Xv;Me.ExpressionSerializer=mm;Me.referenceGraph=aD;Me.referenceGraph=aD;Me.isReference=Fy;Me.isReference=Fy;Me.referencesOfRef=bD;Me.referencesOfRef=bD;Me.referencesOfId=Kg;Me.referencesOfId=Kg;Me.moduleOfId=Gy;Me.moduleOfId=Gy;Me.referencesAndClassNamesOfId=Xr;Me.referencesAndClassNamesOfId=Xr;Me.classNameOfId=Hy;Me.classNameOfId=Hy;Me.findPathFromToId=vv;Me.findPathFromToId=vv;Me.lookupPath=mp;Me.lookupPath=mp;Me.modifyProperty=Iy;Me.modifyProperty=Iy;Me.removeUnreachableObjects=
Yr;Me.removeUnreachableObjects=Yr;Me.clearDanglingConnections=OA;Me.clearDanglingConnections=OA;Me.defaultExprSerializer=new Me.ExpressionSerializer;Me.requiredModulesOfSnapshot=np;Me.requiredModulesOfSnapshot=np;var I2,QA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Hk=I2={};try{var Rw="function"==typeof setTimeout?setTimeout:PA}catch(d){Rw=PA}try{var Sw="function"==typeof clearTimeout?clearTimeout:dD}catch(d){Sw=dD}!0;var Jy,wv=[],RA=!1,pG=-1;Hk.nextTick=function(d){var k=
Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];wv.push(new Yh(d,k));1!==wv.length||RA||nG(qG)};Yh.prototype.run=function(){(this||QA).fun.apply(null,(this||QA).array)};Hk.title="browser";Hk.browser=!0;Hk.env={};Hk.argv=[];Hk.version="";Hk.versions={};Hk.on=ok;Hk.addListener=ok;Hk.once=ok;Hk.off=ok;Hk.removeListener=ok;Hk.removeAllListeners=ok;Hk.emit=ok;Hk.prependListener=ok;Hk.prependOnceListener=ok;Hk.listeners=function(d){return[]};Hk.binding=
function(d){throw Error("process.binding is not supported");};Hk.cwd=function(){return"/"};Hk.chdir=function(d){throw Error("process.chdir is not supported");};Hk.umask=function(){return 0};var Qh=I2,MT={},LT=!1,OT={},NT=!1,Et={},PT=!1,RT={},QT=!1,TT={},ST=!1,VT={},UT=!1,XT={},WT=!1,ZT={},YT=!1,aU={},$T=!1,cU={},bU=!1,eU={},dU=!1,gU={},fU=!1,iU={},hU=!1,kU={},jU=!1,mU={},lU=!1,oU={},nU=!1,qU={},pU=!1,sU={},rU=!1,uU={},tU=!1,wU={},vU=!1,yU={},xU=!1,AU={},zU=!1,CU={},BU=!1,EU={},DU=!1,GU={},FU=!1,aga=
{},bga=aga=function(d){d.prototype[Symbol.iterator]=function n(){var b=this,e;return $jscomp.generator.createGenerator(n,function(l){1==l.nextAddress&&(e=b.head);if(3!=l.nextAddress)return e?l.yield(e.value,3):l.jumpTo(0);e=e.next;return l.jumpTo(2)})}},J2={};J2=dh;dh.Node=Lg;dh.create=dh;dh.prototype.removeNode=function(d){if(d.list!==this)throw Error("removing node which does not belong to this list");var k=d.next,n=d.prev;k&&(k.prev=n);n&&(n.next=k);d===this.head&&(this.head=k);d===this.tail&&
(this.tail=n);d.list.length--;d.next=null;d.prev=null;d.list=null;return k};dh.prototype.unshiftNode=function(d){if(d!==this.head){d.list&&d.list.removeNode(d);var k=this.head;d.list=this;if(d.next=k)k.prev=d;this.head=d;this.tail||(this.tail=d);this.length++}};dh.prototype.pushNode=function(d){if(d!==this.tail){d.list&&d.list.removeNode(d);var k=this.tail;d.list=this;if(d.prev=k)k.next=d;this.tail=d;this.head||(this.head=d);this.length++}};dh.prototype.push=function(){for(var d=0,k=arguments.length;d<
k;d++)this.tail=new Lg(arguments[d],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};dh.prototype.unshift=function(){for(var d=0,k=arguments.length;d<k;d++)this.head=new Lg(arguments[d],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};dh.prototype.pop=function(){if(this.tail){var d=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return d}};dh.prototype.shift=function(){if(this.head){var d=
this.head.value;(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return d}};dh.prototype.forEach=function(d,k){k=k||this;for(var n=this.head,b=0;null!==n;b++)d.call(k,n.value,b,this),n=n.next};dh.prototype.forEachReverse=function(d,k){k=k||this;for(var n=this.tail,b=this.length-1;null!==n;b--)d.call(k,n.value,b,this),n=n.prev};dh.prototype.get=function(d){for(var k=0,n=this.head;null!==n&&k<d;k++)n=n.next;if(k===d&&null!==n)return n.value};dh.prototype.getReverse=function(d){for(var k=
0,n=this.tail;null!==n&&k<d;k++)n=n.prev;if(k===d&&null!==n)return n.value};dh.prototype.map=function(d,k){k=k||this;for(var n=new dh,b=this.head;null!==b;)n.push(d.call(k,b.value,this)),b=b.next;return n};dh.prototype.mapReverse=function(d,k){k=k||this;for(var n=new dh,b=this.tail;null!==b;)n.push(d.call(k,b.value,this)),b=b.prev;return n};dh.prototype.reduce=function(d,k){var n=this.head;if(1<arguments.length)var b=k;else if(this.head)n=this.head.next,b=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");
for(var e=0;null!==n;e++)b=d(b,n.value,e),n=n.next;return b};dh.prototype.reduceReverse=function(d,k){var n=this.tail;if(1<arguments.length)var b=k;else if(this.tail)n=this.tail.prev,b=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var e=this.length-1;null!==n;e--)b=d(b,n.value,e),n=n.prev;return b};dh.prototype.toArray=function(){for(var d=Array(this.length),k=0,n=this.head;null!==n;k++)d[k]=n.value,n=n.next;return d};dh.prototype.toArrayReverse=function(){for(var d=
Array(this.length),k=0,n=this.tail;null!==n;k++)d[k]=n.value,n=n.prev;return d};dh.prototype.slice=function(d,k){k=k||this.length;0>k&&(k+=this.length);d=d||0;0>d&&(d+=this.length);var n=new dh;if(k<d||0>k)return n;0>d&&(d=0);k>this.length&&(k=this.length);for(var b=0,e=this.head;null!==e&&b<d;b++)e=e.next;for(;null!==e&&b<k;b++,e=e.next)n.push(e.value);return n};dh.prototype.sliceReverse=function(d,k){k=k||this.length;0>k&&(k+=this.length);d=d||0;0>d&&(d+=this.length);var n=new dh;if(k<d||0>k)return n;
0>d&&(d=0);k>this.length&&(k=this.length);for(var b=this.length,e=this.tail;null!==e&&b>k;b--)e=e.prev;for(;null!==e&&b>d;b--,e=e.prev)n.push(e.value);return n};dh.prototype.splice=function(d,k,n){for(var b=[],e=2;e<arguments.length;++e)b[e-2]=arguments[e];d>this.length&&(d=this.length-1);0>d&&(d=this.length+d);e=0;for(var l=this.head;null!==l&&e<d;e++)l=l.next;var a=[];for(e=0;l&&e<k;e++)a.push(l.value),l=this.removeNode(l);null===l&&(l=this.tail);l!==this.head&&l!==this.tail&&(l=l.prev);for(e=0;e<
b.length;e++){var f=b[e];l=l===this.head?new Lg(f,null,l,this):new Lg(f,l,l.next,this);null===l.next&&(this.tail=l);null===l.prev&&(this.head=l);this.length++}return a};dh.prototype.reverse=function(){for(var d=this.head,k=this.tail,n=d;null!==n;n=n.prev){var b=n.prev;n.prev=n.next;n.next=b}this.head=k;this.tail=d;return this};try{bga(dh)}catch(d){}var cga={},dga=J2,Qz=Symbol("max"),Lp=Symbol("length"),kC=Symbol("lengthCalculator"),SE=Symbol("allowStale"),Rz=Symbol("maxAge"),cw=Symbol("dispose"),
K2=Symbol("noDisposeOnSet"),nm=Symbol("lruList"),As=Symbol("cache"),L2=Symbol("updateAgeOnGet"),XQ=function(){return 1},Qm=function(d){"number"===typeof d&&(d={max:d});d||(d={});if(d.max&&("number"!==typeof d.max||0>d.max))throw new TypeError("max must be a non-negative number");this[Qz]=d.max||Infinity;var k=d.length||XQ;this[kC]="function"!==typeof k?XQ:k;this[SE]=d.stale||!1;if(d.maxAge&&"number"!==typeof d.maxAge)throw new TypeError("maxAge must be a number");this[Rz]=d.maxAge||0;this[cw]=d.dispose;
this[K2]=d.noDisposeOnSet||!1;this[L2]=d.updateAgeOnGet||!1;this.reset()};Qm.prototype.rforEach=function(d,k){k=k||this;for(var n=this[nm].tail;null!==n;){var b=n.prev;M2(this,d,n,k);n=b}};Qm.prototype.forEach=function(d,k){k=k||this;for(var n=this[nm].head;null!==n;){var b=n.next;M2(this,d,n,k);n=b}};Qm.prototype.keys=function(){return this[nm].toArray().map(function(d){return d.key})};Qm.prototype.values=function(){return this[nm].toArray().map(function(d){return d.value})};Qm.prototype.reset=function(){var d=
this;this[cw]&&this[nm]&&this[nm].length&&this[nm].forEach(function(k){return d[cw](k.key,k.value)});this[As]=new Map;this[nm]=new dga;this[Lp]=0};Qm.prototype.dump=function(){var d=this;return this[nm].map(function(k){return cK(d,k)?!1:{k:k.key,v:k.value,e:k.now+(k.maxAge||0)}}).toArray().filter(function(k){return k})};Qm.prototype.dumpLru=function(){return this[nm]};Qm.prototype.set=function(d,k,n){if((n=n||this[Rz])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");var b=n?Date.now():
0,e=this[kC](k,d);if(this[As].has(d)){if(e>this[Qz])return lC(this,this[As].get(d)),!1;var l=this[As].get(d).value;if(this[cw]&&!this[K2])this[cw](d,l.value);l.now=b;l.maxAge=n;l.value=k;this[Lp]+=e-l.length;l.length=e;this.get(d);TE(this);return!0}n=new ega(d,k,e,b,n);if(n.length>this[Qz]){if(this[cw])this[cw](d,k);return!1}this[Lp]+=n.length;this[nm].unshift(n);this[As].set(d,this[nm].head);TE(this);return!0};Qm.prototype.has=function(d){if(!this[As].has(d))return!1;d=this[As].get(d).value;return!cK(this,
d)};Qm.prototype.get=function(d){return YQ(this,d,!0)};Qm.prototype.peek=function(d){return YQ(this,d,!1)};Qm.prototype.pop=function(){var d=this[nm].tail;if(!d)return null;lC(this,d);return d.value};Qm.prototype.del=function(d){lC(this,this[As].get(d))};Qm.prototype.load=function(d){this.reset();for(var k=Date.now(),n=d.length-1;0<=n;n--){var b=d[n],e=b.e||0;0===e?this.set(b.k,b.v):(e-=k,0<e&&this.set(b.k,b.v,e))}};Qm.prototype.prune=function(){var d=this;this[As].forEach(function(k,n){return YQ(d,
n,!1)})};$jscomp.global.Object.defineProperties(Qm.prototype,{max:{configurable:!0,enumerable:!0,set:function(d){if("number"!==typeof d||0>d)throw new TypeError("max must be a non-negative number");this[Qz]=d||Infinity;TE(this)},get:function(){return this[Qz]}},allowStale:{configurable:!0,enumerable:!0,set:function(d){this[SE]=!!d},get:function(){return this[SE]}},maxAge:{configurable:!0,enumerable:!0,set:function(d){if("number"!==typeof d)throw new TypeError("maxAge must be a non-negative number");
this[Rz]=d;TE(this)},get:function(){return this[Rz]}},lengthCalculator:{configurable:!0,enumerable:!0,set:function(d){var k=this;"function"!==typeof d&&(d=XQ);d!==this[kC]&&(this[kC]=d,this[Lp]=0,this[nm].forEach(function(n){n.length=k[kC](n.value,n.key);k[Lp]+=n.length}));TE(this)},get:function(){return this[kC]}},length:{configurable:!0,enumerable:!0,get:function(){return this[Lp]}},itemCount:{configurable:!0,enumerable:!0,get:function(){return this[nm].length}}});var YQ=function(d,k,n){if(k=d[As].get(k)){var b=
k.value;if(cK(d,b)){if(lC(d,k),!d[SE])return}else n&&(d[L2]&&(k.value.now=Date.now()),d[nm].unshiftNode(k));return b.value}},cK=function(d,k){if(!k||!k.maxAge&&!d[Rz])return!1;var n=Date.now()-k.now;return k.maxAge?n>k.maxAge:d[Rz]&&n>d[Rz]},TE=function(d){if(d[Lp]>d[Qz])for(var k=d[nm].tail;d[Lp]>d[Qz]&&null!==k;){var n=k.prev;lC(d,k);k=n}},lC=function(d,k){if(k){var n=k.value;if(d[cw])d[cw](n.key,n.value);d[Lp]-=n.length;d[As].delete(n.key);d[nm].removeNode(k)}},ega=function(d,k,n,b,e){this.key=
d;this.value=k;this.length=n;this.now=b;this.maxAge=e||0},M2=function(d,k,n,b){var e=n.value;cK(d,e)&&(lC(d,n),d[SE]||(e=void 0));e&&k.call(b,e.value,e.key,d)},F7=cga=Qm,yM={},HU=!1,zM={},IU=!1,KU={},JU=!1,MU={},LU=!1,OU={},NU=!1,QU={},PU=!1,SU={},RU=!1,UU={},TU=!1,WU={},VU=!1,YU={},XU=!1,$U={},ZU=!1,bV={},aV=!1,dV={},cV=!1,fV={},eV=!1,hV={},gV=!1,jV={},iV=!1,lV={},kV=!1,nV={},mV=!1,N2={},O2=!1,UE=function(){if(O2)return N2;O2=!0;var d=xb();return N2={re:d.re,src:d.src,tokens:d.t,SEMVER_SPEC_VERSION:Xl().SEMVER_SPEC_VERSION,
SemVer:tl(),compareIdentifiers:Ft().compareIdentifiers,rcompareIdentifiers:Ft().rcompareIdentifiers,parse:ul(),valid:rG(),clean:Wj(),inc:SA(),diff:Tw(),major:Ky(),minor:UA(),patch:WA(),prerelease:sG(),compare:op(),rcompare:Jj(),compareLoose:BM(),compareBuild:Fq(),sort:CM(),rsort:Km(),gt:VA(),lt:Qg(),eq:TA(),neq:tG(),gte:Ly(),lte:eD(),cmp:Uw(),coerce:fD(),Comparator:yv(),Range:pp(),satisfies:qp(),toComparators:uG(),maxSatisfying:AM(),minSatisfying:Tf(),minVersion:My(),validRange:Ny(),outside:rp(),
gtr:XA(),ltr:Lh(),intersects:zo(),simplifyRange:vG(),subset:Gq()}}(),We=lively.FreezerRuntime.recorderFor("lively.serializer2/index.js");We.normalizeOptions=zv;We.normalizeMigrations=function(d){d=void 0===d?[]:d;return{before:d.filter(function(k){return"function"===typeof k.snapshotConverter}),after:d.filter(function(k){return"function"===typeof k.objectConverter})}};We.runMigrations=function(d,k,n,b){for(var e=0;e<d.length;e++){var l=d[e];try{n=l[k](n,b)}catch(a){console.error("migration "+l.name+
" failed:"),console.error(a)}}return n};We.serialize=Hq;We.deserialize=Oy;We.deserializeWithMigrations=Py;We.copy=Qy;We.ObjectPool=xi;We.serializerVersion="0.1.3";We.requiredModulesOfSnapshot=np;We.removeUnreachableObjects=Yr;We.clearDanglingConnections=OA;We.allPlugins=pu;We.semver=UE;We.normalizeOptions=zv;We.normalizeOptions=zv;We.majorAndMinorVersionRe=/\.[^\.]+$/;We.ObjectRef=jr;We.ObjectRef=jr;We.ObjectPool=xi;We.ObjectPool=xi;We.requiredModulesOfSnapshot=np;We.requiredModulesOfSnapshot=np;
We.removeUnreachableObjects=Yr;We.removeUnreachableObjects=Yr;We.serialize=Hq;We.serialize=Hq;We.deserialize=Oy;We.deserialize=Oy;We.deserializeWithMigrations=Py;We.deserializeWithMigrations=Py;We.copy=Qy;We.copy=Qy;We.ExpressionSerializer=mm;We.serializeSpec=Ln;We.deserializeSpec=lp;We.getSerializableClassMeta=Dt;We.locateClass=Eq;We.getClassName=yo;We.ExpressionSerializer=mm;We.ExpressionSerializer=mm;We.getSerializableClassMeta=Dt;We.getSerializableClassMeta=Dt;We.locateClass=Eq;We.locateClass=
Eq;We.serializeSpec=Ln;We.serializeSpec=Ln;We.deserializeSpec=lp;We.deserializeSpec=lp;We.getClassName=yo;We.getClassName=yo;We.allPlugins=pu;We.allPlugins=pu;var fga=Object.freeze({__proto__:null,normalizeOptions:zv,ObjectRef:jr,ObjectPool:xi,requiredModulesOfSnapshot:np,removeUnreachableObjects:Yr,serialize:Hq,deserialize:Oy,deserializeWithMigrations:Py,copy:Qy,ExpressionSerializer:mm,getSerializableClassMeta:Dt,locateClass:Eq,serializeSpec:Ln,deserializeSpec:lp,getClassName:yo,allPlugins:pu}),
gga={},G7=Object.prototype.toString,ZQ=gga=Array.isArray||DM,hga={},VE=hga="2",EM="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,P2={};Mn.NONE=0;Mn.VTEXT=1;Mn.VNODE=2;Mn.WIDGET=3;Mn.PROPS=4;Mn.ORDER=5;Mn.INSERT=6;Mn.REMOVE=7;Mn.THUNK=8;P2=Mn;Mn.prototype.version=VE;Mn.prototype.type="VirtualPatch";var dw=P2,iga={},WE=iga=function(d){return d&&"VirtualNode"===d.type&&d.version===VE},jga={},dK=jga=function(d){return d&&"VirtualText"===d.type&&d.version===VE},kga={},
Sx=kga=function(d){return d&&"Widget"===d.type},lga={},XE=lga=function(d){return d&&"Thunk"===d.type},mga={},H7=WE,I7=dK,J7=Sx,Q2=mga=function(d,k){var n=d,b=k;XE(k)&&(b=wG(k,d));XE(d)&&(n=wG(d,null));return{a:n,b:b}},nga={},eK=nga=function(d){return"object"===typeof d&&null!==d},oga={},YE=oga=function(d){return d&&("function"===typeof d.hook&&!d.hasOwnProperty("hook")||"function"===typeof d.unhook&&!d.hasOwnProperty("unhook"))},R2={},oV=eK,K7=YE;R2=xG;var S2={},N7=ZQ,Xj=dw,Ry=WE,pV=dK,AG=Sx,zG=XE,
M7=Q2,L7=R2;S2=yG;var pga={},qga=pga=S2,rga=Object.freeze({}),T2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,sga={},U2="undefined"!==typeof T2?T2:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var $Q=document;else($Q=U2["__GLOBAL_DOCUMENT_CACHE@4"])||($Q=U2["__GLOBAL_DOCUMENT_CACHE@4"]=rga);var V2=sga=$Q,tga={},qV=YE,W2=tga=function(d,k,n){for(var b in k){var e=k[b];if(void 0===e)CG(d,b,e,n);else if(qV(e))CG(d,b,e,n),e.hook&&e.hook(d,b,
n?n[b]:void 0);else if(eK(e)){var l=void 0,a=void 0,f=d,m=b,q=n?n[m]:void 0;if("attributes"===m)for(a in e)l=e[a],void 0===l?f.removeAttribute(a):f.setAttribute(a,l);else if(q&&eK(q)&&iD(q)!==iD(e))f[m]=e;else for(l in eK(f[m])||(f[m]={}),a="style"===m?"":void 0,e)q=e[l],f[m][l]=void 0===q?a:q}else d[b]=e}},uga={},rV=V2,S7=W2,R7=WE,Q7=dK,P7=Sx,O7=Q2,X2=uga=DG,vga={},wga=vga=function(d,k){return Sx(d)&&Sx(k)?"name"in d&&"name"in k?d.id===k.id:d.init===k.init:!1},xga={},T7={},yga=xga=function(d,k,n,
b){return n&&0!==n.length?(n.sort(FM),jD(d,k,n,b,0)):{}},Y2={},U7=Sx;Y2=function(d,k,n){var b=d.vNode,e=d.patch;switch(d.type){case dw.REMOVE:return(e=k.parentNode)&&e.removeChild(k),FG(k,b),null;case dw.INSERT:return e=n.render(e,n),k&&k.appendChild(e),k;case dw.VTEXT:return 3===k.nodeType?(k.replaceData(0,k.length,e.text),e=k):(b=k.parentNode,e=n.render(e,n),b&&e!==k&&b.replaceChild(e,k)),e;case dw.WIDGET:return e=(d=wga(b,e))?e.update(b,k)||k:n.render(e,n),(n=k.parentNode)&&e!==k&&n.replaceChild(e,
k),d||FG(k,b),e;case dw.VNODE:return b=k.parentNode,e=n.render(e,n),b&&e!==k&&b.replaceChild(e,k),e;case dw.ORDER:b=k.childNodes;n={};for(var l,a=0;a<e.removes.length;a++)l=e.removes[a],d=b[l.from],l.key&&(n[l.key]=d),k.removeChild(d);a=b.length;for(var f=0;f<e.inserts.length;f++)l=e.inserts[f],d=n[l.key],k.insertBefore(d,l.to>=a++?null:b[l.to]);return k;case dw.PROPS:return W2(k,e,b.properties),k;case dw.THUNK:return e=n.patch(k,e,n),k&&e&&k!==e&&k.parentNode&&k.parentNode.replaceChild(e,k),e;default:return k}};
var Z2={},X7=V2,Y7=ZQ,V7=X2,W7=yga,sV=Y2;Z2=GG;var zga={},Aga=zga=Z2,Gt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,$2={},b8=WE,c8=Sx,d8=XE,a8=YE;$2=ZA;var Z7={},$7=[];ZA.prototype.version=VE;ZA.prototype.type="VirtualNode";var aR=$2,e8="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,a3={};a3=kD;kD.prototype.version=VE;kD.prototype.type="VirtualText";var bR=a3,b3={};b3=function(d){var k=String.prototype.split,n=/()??/.exec("")[1]===
d;return function(b,e,l){if("[object RegExp]"!==Object.prototype.toString.call(e))return k.call(b,e,l);var a=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),m=0;e=new RegExp(e.source,f+"g");var q,r;b+="";n||(q=new RegExp("^"+e.source+"$(?!\\s)",f));for(l=l===d?4294967295:l>>>0;r=e.exec(b);){f=r.index+r[0].length;if(f>m){a.push(b.slice(m,r.index));!n&&1<r.length&&r[0].replace(q,function(){for(var v=1;v<arguments.length-2;v++)arguments[v]===d&&(r[v]=d)});1<r.length&&
r.index<b.length&&Array.prototype.push.apply(a,r.slice(1));var u=r[0].length;m=f;if(a.length>=l)break}e.lastIndex===r.index&&e.lastIndex++}m===b.length?(u||!e.test(""))&&a.push(""):a.push(b.slice(m));return a.length>l?a.slice(0,l):a}}();var Bga={},Cga=b3,Dga=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,Ega=/^\.|#/,Fga=Bga=function(d,k){if(!d)return"DIV";var n=!k.hasOwnProperty("id");d=Cga(d,Dga);var b=null;Ega.test(d[1])&&(b="DIV");var e,l;for(l=0;l<d.length;l++)if(e=d[l]){var a=e.charAt(0);if(b)if("."===
a){var f=f||[];f.push(e.substring(1,e.length))}else"#"===a&&n&&(k.id=e.substring(1,e.length));else b=e}f&&(k.className&&f.push(k.className),k.className=f.join(" "));return k.namespace?b:b.toUpperCase()},c3={};c3=Ht;Ht.prototype.hook=function(d,k){d[k]!==this.value&&(d[k]=this.value)};var Gga=c3,d3="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,e3={},cR="undefined"!==typeof window?window:"undefined"!==typeof d3?d3:{};e3=function(d,k){return d in cR?cR[d]:cR[d]=k};
var f3={},g3=e3;f3=function(d,k,n){var b="__INDIVIDUAL_ONE_VERSION_"+d,e=g3(b+"_ENFORCE_SINGLETON",k);if(e!==k)throw Error("Can only have one copy of "+d+".\nYou already have version "+e+" installed.\nThis means you cannot install version "+k);return g3(b,n)};var h3={};f3("ev-store","7");h3=function(d){var k=d["__EV_STORE_KEY@7"];k||(k=d["__EV_STORE_KEY@7"]={});return k};var i3={},j3=h3;i3=Ai;Ai.prototype.hook=function(d,k){d=j3(d);k=k.substr(3);d[k]=this.value};Ai.prototype.unhook=function(d,k){d=
j3(d);k=k.substr(3);d[k]=void 0};var k3={},uV=ZQ,tV=bR,f8=WE,g8=dK,h8=Sx,i8=XE,Hga=i3;k3=function(d,k,n){var b=[],e;if(e=!n)e="string"===typeof k||uV(k)||lD(k);if(e){n=k;var l={}}l=l||k||{};d=Fga(d,l);if(l.hasOwnProperty("key")){var a=l.key;l.key=void 0}if(l.hasOwnProperty("namespace")){var f=l.namespace;l.namespace=void 0}"INPUT"!==d||f||!l.hasOwnProperty("value")||void 0===l.value||YE(l.value)||(l.value=Gga(l.value));k=l;for(var m in k)k.hasOwnProperty(m)&&(e=k[m],YE(e)||"ev-"===m.substr(0,3)&&
(k[m]=Hga(e)));void 0!==n&&null!==n&&HG(n,b,d,l);return new aR(d,l,b,a,f)};var Iga={},Jga=Iga=k3,l3={};l3=X2;var Kga={},ZE=Kga={diff:qga,patch:Aga,h:Jga,create:l3,VNode:aR,VText:bR},Lga={},Mga=Lga={abbr:"abbr",accept:"accept","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",
challenge:"challenge",charset:"charset",checked:"checked",cite:"cite","class":"className",cols:"cols",colspan:"colSpan",command:"command",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime","default":"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",dropzone:"dropzone",enctype:"encType","for":"htmlFor",form:"form",formaction:"formAction",
formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameBorder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang","http-equiv":"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",ismap:"isMap",itemid:"itemId",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",manifest:"manifest",max:"max",maxlength:"maxLength",
media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",ping:"ping",placeholder:"placeholder",poster:"poster",preload:"preload",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",
shape:"shape",size:"size",sizes:"sizes",sortable:"sortable",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srcset:"srcSet",start:"start",step:"step",style:"style",tabindex:"tabIndex",target:"target",title:"title",translate:"translate",type:"type",typemustmatch:"typeMustMatch",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},m3={};m3={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,alphabetic:null,amplitude:null,"arabic-form":null,
ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,"class":null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,datatype:null,
defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusHighlight:null,focusable:null,"font-family":null,
"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,"in":null,in2:null,initialVisibility:null,
intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,
mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,patternContentUnits:null,
patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,role:null,rotate:null,
rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,
"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,"typeof":null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,
"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":"http://www.w3.org/1999/xlink","xlink:arcrole":"http://www.w3.org/1999/xlink","xlink:href":"http://www.w3.org/1999/xlink","xlink:role":"http://www.w3.org/1999/xlink",
"xlink:show":"http://www.w3.org/1999/xlink","xlink:title":"http://www.w3.org/1999/xlink","xlink:type":"http://www.w3.org/1999/xlink","xml:base":"http://www.w3.org/XML/1998/namespace","xml:id":"http://www.w3.org/XML/1998/namespace","xml:lang":"http://www.w3.org/XML/1998/namespace","xml:space":"http://www.w3.org/XML/1998/namespace",y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};var Nga={},k8=aR,vV=bR,dR,wV=Mga,j8=m3,Oga=Nga=function(d,k){if(!d)return $A(document.createTextNode(""));
if("string"===typeof d){if(!("DOMParser"in window))throw Error("DOMParser is not available, so parsing string to DOM node is not possible.");dR=dR||new DOMParser;d=dR.parseFromString(d,"text/html");d=d.body.firstChild?d.getElementsByTagName("body")[0].firstChild:d.head.firstChild&&("TITLE"!==d.head.firstChild.tagName||d.title)?d.head.firstChild:d.firstChild&&"HTML"!==d.firstChild.tagName?d.firstChild:document.createTextNode("")}if("object"!==typeof d||!d||!d.nodeType)throw Error("invalid dom node",
d);return $A(d,k)},xh=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/property-dom-mapping.js");xh.styleProps=Bi;xh.addTransform=Rd;xh.addTransformOrigin=function(d,k){if(d=d.origin)k.transformOrigin=d.x+"px "+d.y+"px"};xh.addDisplay=function(d,k){d=d.visible;null!=d&&(k.display=d?"":"none")};xh.addBorderRadius=function(d,k){var n=d.borderRadiusLeft,b=d.borderRadiusRight,e=d.borderRadiusBottom;d=d.borderRadiusTop;k.borderRadius=d+"px "+d+"px "+e+"px "+e+"px / "+n+"px "+b+"px "+b+"px "+
n+"px"};xh.addBorder=function(d,k){var n=d.borderWidthLeft,b=d.borderColorLeft,e=d.borderStyleLeft,l=d.borderWidthRight,a=d.borderColorRight,f=d.borderStyleRight,m=d.borderColor,q=d.borderWidthBottom,r=d.borderColorBottom,u=d.borderStyleBottom,v=d.borderWidthTop,y=d.borderColorTop;d=d.borderStyleTop;var z=function(B){return xh.bowser.safari?xh.string.camelize(B):B};k[z("border-left-style")]=""+e;k[z("border-right-style")]=""+f;k[z("border-bottom-style")]=""+u;k[z("border-top-style")]=""+d;k[z("border-left-width")]=
n+"px";k[z("border-right-width")]=l+"px";k[z("border-bottom-width")]=q+"px";k[z("border-top-width")]=v+"px";k[z("border-top-color")]=y?y.toString():"transparent";k[z("border-right-color")]=a?a.toString():"transparent";k[z("border-bottom-color")]=r?r.toString():"transparent";k[z("border-left-color")]=b?b.toString():"transparent";m&&m.isGradient&&(k["border-image"]=m.toString())};xh.addFill=function(d,k){(d=d.fill)?d.isGradient?k.backgroundImage=d.toString():k.background=d.toString():k.background=xh.Color.transparent.toString()};
xh.addExtentStyle=function(d,k){d=d.extent;k.width=d.x+"px";k.height=d.y+"px"};xh.shadowCss=function(d){return d.dropShadow?d.dropShadow.toFilterCss():""};xh.addShadowStyle=function(d,k){d.isSvgMorph||d.isImage?k.filter=xh.shadowCss(d):(d=d.dropShadow)&&d.fast||d&&d.inset?k.boxShadow=d?d.toCss():"none":k.filter=d?d.toFilterCss():""};xh.addSvgAttributes=Vw;xh.getSvgVertices=Dd;xh.addPathAttributes=$r;xh.addSvgBorderStyle=function(d,k){var n=d.borderStyle.valueOf();"dashed"===n?(d=d.borderWidth.valueOf(),
k["stroke-dasharray"]=1.61*d+" "+d):"dotted"===n&&(k["stroke-dasharray"]="1 "+2*d.borderWidth.valueOf(),k["stroke-linecap"]="round",k["stroke-linejoin"]="round");return k};xh.Color=xf;xh.string=Hg;xh.bowser=ir;xh.styleProps=Bi;xh.styleProps=Bi;xh.addTransform=Rd;xh.addTransform=Rd;xh.addSvgAttributes=Vw;xh.addSvgAttributes=Vw;xh.getSvgVertices=Dd;xh.getSvgVertices=Dd;xh.addPathAttributes=$r;xh.addPathAttributes=$r;var Yd=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js");
Yd.defaultStyle=nc;Yd.MorphAfterRenderHook=function(d,k){this.morph=d;this.renderer=k};Yd.Animation=function(d){this.morph=d};Yd.SvgAnimation=Av;Yd.defaultAttributes=It;Yd.svgAttributes=Ww;Yd.pathAttributes=Bv;Yd.renderGradient=Xw;Yd.initDOMState=function(d,k){d.rootNode.appendChild(d.domNode);d.ensureDefaultCSS().then(function(){return Yd.promise.delay(500)}).then(function(){return k.env.fontMetric&&k.env.fontMetric.reset()}).then(function(){return k.withAllSubmorphsDo(function(n){if(n.isText||n.isLabel){var b=
(n.metadata||{}).serializationInfo;b&&b.recoveredTextBounds||n.forceRerender()}})}).catch(function(n){return console.error(n)})};Yd.renderMorph=Yw;Yd.renderSubTree=Zw;Yd.renderRootMorph=$w;Yd.vdom=ZE;Yd.parser=Oga;Yd.num=Gk;Yd.obj=lf;Yd.arr=Qe;Yd.properties=Gp;Yd.promise=oe;Yd.Color=xf;Yd.RadialGradient=Vn;Yd.pt=nf;Yd.Point=Gf;Yd.LinearGradient=Il;Yd.rect=Ff;Yd.config=vk;Yd.styleProps=Bi;Yd.addSvgAttributes=Vw;Yd.addPathAttributes=$r;Yd.bowser=ir;var fK=Yd.vdom;Yd.h=fK.h;Yd.diff=fK.diff;Yd.patch=
fK.patch;Yd.createNode=fK.create;Yd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Yd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Yd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
var kr=wa("aM",function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/morphic-default.js"),n=k.hasOwnProperty("ShadowObject")&&"function"===typeof k.ShadowObject?k.ShadowObject:k.ShadowObject=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){Yd.obj.isBoolean(b)&&(b=Yd.config.defaultShadow);var e=b;b=e.rotation;var l=e.distance,
a=e.blur,f=e.color,m=e.morph,q=e.inset,r=e.spread;e=e.fast;this.rotation=Yd.obj.isNumber(b)?b:45;this.distance=Yd.obj.isNumber(l)?l:2;this.blur=Yd.obj.isNumber(a)?a:6;this.inset=q||!1;this.spread=r||0;this.color=f||Yd.Color.gray.darker();this.morph=m;this.fast=e}},{key:"__dont_serialize__",get:function(){return["morph"]}},{key:"distance",get:function(){return this._distance}},{key:"blur",get:function(){return this._blur}},{key:"rotation",get:function(){return this._rotation}},{key:"color",get:function(){return this._color}},
{key:"inset",get:function(){return this._inset}},{key:"inset",set:function(b){this._inset=b;this.morph&&(this.morph.dropShadow=this)}},{key:"distance",set:function(b){this._distance=b;this.morph&&(this.morph.dropShadow=this)}},{key:"blur",set:function(b){this._blur=b;this.morph&&(this.morph.dropShadow=this)}},{key:"rotation",set:function(b){this._rotation=b;this.morph&&(this.morph.dropShadow=this)}},{key:"color",set:function(b){this._color=b;this.morph&&(this.morph.dropShadow=this)}},{key:"isShadowObject",
get:function(){return!0}},{key:"__serialize__",value:function(){var b=this.toJson(),e=b.distance,l=b.rotation,a=b.color,f=b.inset,m=b.blur,q=b.spread;b=b.fast;a=a.toJSExpr();return{__expr__:"new ShadowObject({"+Object.entries({distance:e,rotation:l,color:a,inset:f,blur:m,spread:q,fast:b}).map(function(r){var u=$jscomp.makeIterator(r);r=u.next().value;u=u.next().value;return r+":"+u})+"})",bindings:{"lively.graphics/color.js":["Color"],"lively.morphic":["ShadowObject"]}}}},{key:"with",value:function(b){return new Yd.ShadowObject(Object.assign({distance:this.distance,
rotation:this.rotation,color:this.color,inset:this.inset,blur:this.blur,spread:this.spread,fast:this.fast},b))}},{key:"toCss",value:function(){var b=this.color,e=this.inset,l=this.blur,a=this.spread,f=Yd.Point.polar(this.distance,Yd.num.toRadians(this.rotation)),m=f.y;return(e?"inset":"")+" "+b.toString()+" "+f.x.toFixed(2)+"px "+m.toFixed(2)+"px "+l+"px "+a+"px"}},{key:"toJson",value:function(){return Yd.obj.select(this,"rotation distance blur color inset spread fast".split(" "))}},{key:"equals",
value:function(b){return!!b&&Yd.obj.equals(this.toJson(),b.toJson())}},{key:"toFilterCss",value:function(){var b=this.blur,e=this.color,l=Yd.Point.polar(this.distance,Yd.num.toRadians(this.rotation)),a=l.x;l=l.y;b=Yd.bowser.chrome?b/3:b/2;return"drop-shadow("+a.toFixed(2)+"px "+l.toFixed(2)+"px "+b.toFixed(2)+"px "+e.toString()+")"}},{key:"interpolate",value:function(b,e){return new Yd.ShadowObject({distance:Yd.num.interpolate(b,this.distance,e.distance),rotation:Yd.num.interpolate(b,this.rotation,
e.rotation),color:this.color.interpolate(b,e.color),blur:Yd.num.interpolate(b,this.blur,e.blur),spread:Yd.num.interpolate(b,this.spread,e.spread),inset:e.inset,fast:e.fast})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShadowObject"}}],k,{pathInPackage:function(){return"rendering/morphic-default.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:3438,end:7097})}(void 0));Yd.ShadowObject=kr;Yd.ShadowObject=kr;Yd.ShadowObject=kr;Yd.defaultStyle=nc;Yd.defaultStyle=nc;Yd.MorphAfterRenderHook.prototype.hook=function(d,k,n,b){var e=this;b=void 0===b?0:b;var l=!!d.parentNode;l&&(this.morph._submorphOrderChanged&&this.morph.submorphs.length?(this.morph._submorphOrderChanged=!1,this.updateScrollOfSubmorphs(this.morph,this.renderer)):this.morph.isClip()&&this.updateScroll(this.morph,d));l||3<b?(this.morph._rendering=!1,this.morph.onAfterRender(d)):
(b++,setTimeout(function(){return e.hook(d,k,n,b)},20*b))};Yd.MorphAfterRenderHook.prototype.updateScroll=function(d,k,n){var b=this,e=d.env.eventDispatcher.eventState.scroll.interactiveScrollInProgress;if(k&&e)return e.then(function(){return b.updateScroll(d,k,!0)});if(!d.isWorld&&k){e=d.scroll;var l=e.x,a=e.y;if(!d._animationQueue.animations.find(function(m){return m.animatedProps.scroll})){var f=d.isText&&d.viewState.fastScroll?k.querySelector(".scrollLayer"):k;!d._skipScrollUpdate&&f&&(f.scrollTop!==
a&&(f.scrollTop=a),f.scrollLeft!==l&&(f.scrollLeft=l),!n&&requestAnimationFrame(function(){f.scrollTop!==a&&(f.scrollTop=a);f.scrollLeft!==l&&(f.scrollLeft=l)},d.id))}}};Yd.MorphAfterRenderHook.prototype.unhook=function(d,k){};Yd.MorphAfterRenderHook.prototype.updateScrollOfSubmorphs=function(d,k){var n=this;d.submorphs.forEach(function(b){b.isClip()&&n.updateScroll(b,k.getNodeForMorph(b));n.updateScrollOfSubmorphs(b,k)})};Yd.Animation.prototype.hook=function(d){this.morph._animationQueue.startAnimationsFor(d)};
Yd.SvgAnimation=Av;Yd.SvgAnimation=Av;Yd.SvgAnimation.prototype.hook=function(d){this.morph._animationQueue.startSvgAnimationsFor(d,this.type)};Yd.defaultAttributes=It;Yd.defaultAttributes=It;Yd.svgAttributes=Ww;Yd.svgAttributes=Ww;Yd.pathAttributes=Bv;Yd.pathAttributes=Bv;Yd.renderGradient=Xw;Yd.renderGradient=Xw;Yd.renderMorph=Yw;Yd.renderMorph=Yw;Yd.renderSubTree=Zw;Yd.renderSubTree=Zw;Yd.renderRootMorph=$w;Yd.renderRootMorph=$w;var Zb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,eR={};!function(d,k){k(eR)}(eR,function(d){function k(ba){return 10===ba||13===ba||8232===ba||8233===ba||32===ba||9===ba||11===ba||12===ba||160===ba||5760<=ba&&0<=$E.indexOf(ba)}function n(ba){return 48<=ba&&57>=ba}function b(ba){(this||Zb).index=0;(this||Zb).path=ba;(this||Zb).max=ba.length;(this||Zb).result=[];(this||Zb).param=0;(this||Zb).err="";(this||Zb).segmentStart=0;(this||Zb).data=[]}function e(ba){for(;ba.index<ba.max&&k(ba.path.charCodeAt(ba.index));)ba.index++}function l(ba){var za,
ta=ba.index,Ia=ta,Ta=ba.max,Bb=!1,Ma=!1,vb=!1,lb=!1;if(Ia>=Ta)return void(ba.err="SvgPath: missed param (at pos "+Ia+")");if(za=ba.path.charCodeAt(Ia),43!==za&&45!==za||(Ia++,za=Ia<Ta?ba.path.charCodeAt(Ia):0),!n(za)&&46!==za)return void(ba.err="SvgPath: param should start with 0..9 or `.` (at pos "+Ia+")");if(46!==za){if(Bb=48===za,Ia++,za=Ia<Ta?ba.path.charCodeAt(Ia):0,Bb&&Ia<Ta&&za&&n(za))return void(ba.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+ta+")");for(;Ia<Ta&&
n(ba.path.charCodeAt(Ia));)Ia++,Ma=!0;za=Ia<Ta?ba.path.charCodeAt(Ia):0}if(46===za){lb=!0;for(Ia++;n(ba.path.charCodeAt(Ia));)Ia++,vb=!0;za=Ia<Ta?ba.path.charCodeAt(Ia):0}if(101===za||69===za){if(lb&&!Ma&&!vb||(Ia++,za=Ia<Ta?ba.path.charCodeAt(Ia):0,43!==za&&45!==za||Ia++,!(Ia<Ta&&n(ba.path.charCodeAt(Ia)))))return void(ba.err="SvgPath: invalid float exponent (at pos "+Ia+")");for(;Ia<Ta&&n(ba.path.charCodeAt(Ia));)Ia++}ba.index=Ia;ba.param=parseFloat(ba.path.slice(ta,Ia))+0}function a(){if(!((this||
Zb)instanceof a))return new a;(this||Zb).queue=[];(this||Zb).cache=null}function f(ba,za,ta,Ia){var Ta=(ba*ta+za*Ia)/(Math.sqrt(ba*ba+za*za)*Math.sqrt(ba*ba+za*za));return 1<Ta&&(Ta=1),-1>Ta&&(Ta=-1),(0>ba*Ia-za*ta?-1:1)*Math.acos(Ta)}function m(ba,za,ta,Ia,Ta,Bb,Ma,vb,lb,oc){var pb=oc*(ba-ta)/2+lb*(za-Ia)/2,kd=-lb*(ba-ta)/2+oc*(za-Ia)/2,Fd=Ma*Ma,Ge=vb*vb,He=pb*pb,Xd=kd*kd,Ie=Fd*Ge-Fd*Xd-Ge*He;0>Ie&&(Ie=0);Ie=Math.sqrt(Ie/(Fd*Xd+Ge*He))*(Ta===Bb?-1:1);Ta=Ie*Ma/vb*kd;Ie=Ie*-vb/Ma*pb;ba=oc*Ta-lb*Ie+
(ba+ta)/2;za=lb*Ta+oc*Ie+(za+Ia)/2;Ia=(pb-Ta)/Ma;lb=(kd-Ie)/vb;Ma=(-pb-Ta)/Ma;kd=(-kd-Ie)/vb;vb=f(1,0,Ia,lb);kd=f(Ia,lb,Ma,kd);return 0===Bb&&0<kd&&(kd-=aF),1===Bb&&0>kd&&(kd+=aF),[ba,za,vb,kd]}function q(ba,za){var ta=4/3*Math.tan(za/4),Ia=Math.cos(ba),Ta=Math.sin(ba),Bb=Math.cos(ba+za);ba=Math.sin(ba+za);return[Ia,Ta,Ia-Ta*ta,Ta+Ia*ta,Bb+ba*ta,ba-Bb*ta,Bb,ba]}function r(ba,za,ta){if(!((this||Zb)instanceof r))return new r(ba,za,ta);(this||Zb).rx=ba;(this||Zb).ry=za;(this||Zb).ax=ta}function u(ba){if(!((this||
Zb)instanceof u))return new u(ba);ba=new b(ba);var za=ba.max;for(e(ba);ba.index<za&&!ba.err.length;)a:{var ta,Ia=void 0,Ta=ba,Bb=Ta.max;Ta.segmentStart=Ta.index;var Ma=Ta.path.charCodeAt(Ta.index);b:{switch(32|Ma){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:Ma=!0;break b}Ma=!1}if(Ma){if(Ia=Tx[Ta.path[Ta.index].toLowerCase()],Ta.index++,e(Ta),Ta.data=[],Ia)for(Ma=!1;;){for(ta=Ia;0<ta;ta--){if(l(Ta),Ta.err.length)break a;Ta.data.push(Ta.param);e(Ta);
Ma=!1;Ta.index<Bb&&44===Ta.path.charCodeAt(Ta.index)&&(Ta.index++,e(Ta),Ma=!0)}if(!Ma){if(Ta.index>=Ta.max)break;ta=Ta.path.charCodeAt(Ta.index);if(!(48<=ta&&57>=ta||43===ta||45===ta||46===ta))break}}Bb=Ta;Ta=Bb.path[Bb.segmentStart];Ia=Ta.toLowerCase();Ma=Bb.data;if("m"===Ia&&2<Ma.length&&(Bb.result.push([Ta,Ma[0],Ma[1]]),Ma=Ma.slice(2),Ia="l",Ta="m"===Ta?"l":"L"),"r"===Ia)Bb.result.push([Ta].concat(Ma));else for(;Ma.length>=Tx[Ia]&&(Bb.result.push([Ta].concat(Ma.splice(0,Tx[Ia]))),Tx[Ia]););}else Ta.err=
"SvgPath: bad command "+Ta.path[Ta.index]+" (at pos "+Ta.index+")"}ba=(ba.err.length?ba.result=[]:ba.result.length&&(0>"mM".indexOf(ba.result[0][0])?(ba.err="SvgPath: string should start with `M` or `m`",ba.result=[]):ba.result[0][0]="M"),{err:ba.err,segments:ba.result});(this||Zb).segments=ba.segments;(this||Zb).err=ba.err;(this||Zb).__stack=[]}function v(ba,za,ta,Ia,Ta,Bb,Ma,vb){(this||Zb).a={x:ba,y:za};(this||Zb).b={x:ta,y:Ia};(this||Zb).c={x:Ta,y:Bb};(this||Zb).d={x:Ma,y:vb};null!==Ma&&void 0!==
Ma&&null!==vb&&void 0!==vb?((this||Zb).getArcLength=L,(this||Zb).getPoint=G,(this||Zb).getDerivative=z):((this||Zb).getArcLength=F,(this||Zb).getPoint=C,(this||Zb).getDerivative=y);this.init()}function y(ba,za,ta){return{x:2*(1-ta)*(ba[1]-ba[0])+2*ta*(ba[2]-ba[1]),y:2*(1-ta)*(za[1]-za[0])+2*ta*(za[2]-za[1])}}function z(ba,za,ta){return C([3*(ba[1]-ba[0]),3*(ba[2]-ba[1]),3*(ba[3]-ba[2])],[3*(za[1]-za[0]),3*(za[2]-za[1]),3*(za[3]-za[2])],ta)}function B(ba,za,ta,Ia,Ta){for(var Bb=1,Ma=ba/za,vb=(ba-ta(Ia,
Ta,Ma))/za;.001<Bb;){var lb=ta(Ia,Ta,Ma+vb),oc=ta(Ia,Ta,Ma-vb);lb=Math.abs(ba-lb)/za;oc=Math.abs(ba-oc)/za;lb<Bb?(Bb=lb,Ma+=vb):oc<Bb?(Bb=oc,Ma-=vb):vb/=2}return Ma}function C(ba,za,ta){return{x:(1-ta)*(1-ta)*ba[0]+2*(1-ta)*ta*ba[1]+ta*ta*ba[2],y:(1-ta)*(1-ta)*za[0]+2*(1-ta)*ta*za[1]+ta*ta*za[2]}}function G(ba,za,ta){return{x:(1-ta)*(1-ta)*(1-ta)*ba[0]+3*(1-ta)*(1-ta)*ta*ba[1]+3*(1-ta)*ta*ta*ba[2]+ta*ta*ta*ba[3],y:(1-ta)*(1-ta)*(1-ta)*za[0]+3*(1-ta)*(1-ta)*ta*za[1]+3*(1-ta)*ta*ta*za[2]+ta*ta*ta*za[3]}}
function F(ba,za,ta){void 0===ta&&(ta=1);var Ia=ba[0]-2*ba[1]+ba[2],Ta=za[0]-2*za[1]+za[2],Bb=2*ba[1]-2*ba[0],Ma=2*za[1]-2*za[0],vb=4*(Ia*Ia+Ta*Ta);if(0===vb)return ta*Math.sqrt(Math.pow(ba[2]-ba[0],2)+Math.pow(za[2]-za[0],2));ba=4*(Ia*Bb+Ta*Ma)/(2*vb);ta+=ba;Bb=(Bb*Bb+Ma*Ma)/vb-ba*ba;return Math.sqrt(vb)/2*(ta*Math.sqrt(ta*ta+Bb)-ba*Math.sqrt(ba*ba+Bb)+Bb*Math.log(Math.abs((ta+Math.sqrt(ta*ta+Bb))/(ba+Math.sqrt(ba*ba+Bb)))))}function N(ba,za,ta){var Ia,Ta=ta.length-1;if(0===Ta)return 0;if(0===ba){for(Ia=
ba=0;Ia<=Ta;Ia++)ba+=Pga[Ta][Ia]*Math.pow(1-za,Ta-Ia)*Math.pow(za,Ia)*ta[Ia];return ba}var Bb=Array(Ta);for(Ia=0;Ia<Ta;Ia++)Bb[Ia]=Ta*(ta[Ia+1]-ta[Ia]);return N(ba-1,za,Bb)}function L(ba,za,ta){var Ia,Ta;void 0===ta&&(ta=1);ta/=2;for(Ta=Ia=0;20>Ta;Ta++){var Bb=ta*Qga[20][Ta]+ta;var Ma=Rga[20][Ta],vb=za,lb=Bb;Bb=N(1,lb,ba);vb=N(1,lb,vb);Ia+=Ma*Math.sqrt(Bb*Bb+vb*vb)}return ta*Ia}function S(ba,za,ta,Ia){var Ta=ba*ta+za*Ia;return 1<Ta&&(Ta=1),-1>Ta&&(Ta=-1),(0>ba*Ia-za*ta?-1:1)*Math.acos(Ta)}function ha(ba,
za,ta,Ia,Ta,Bb,Ma,vb,lb,oc){var pb=oc*(ba-ta)/2+lb*(za-Ia)/2,kd=-lb*(ba-ta)/2+oc*(za-Ia)/2,Fd=Ma*Ma,Ge=vb*vb,He=pb*pb,Xd=kd*kd,Ie=Fd*Ge-Fd*Xd-Ge*He;0>Ie&&(Ie=0);Ie=Math.sqrt(Ie/(Fd*Xd+Ge*He))*(Ta===Bb?-1:1);Ta=Ie*Ma/vb*kd;Ie=Ie*-vb/Ma*pb;ba=oc*Ta-lb*Ie+(ba+ta)/2;za=lb*Ta+oc*Ie+(za+Ia)/2;Ia=(pb-Ta)/Ma;lb=(kd-Ie)/vb;Ma=(-pb-Ta)/Ma;kd=(-kd-Ie)/vb;vb=S(1,0,Ia,lb);kd=S(Ia,lb,Ma,kd);return 0===Bb&&0<kd&&(kd-=bF),1===Bb&&0>kd&&(kd+=bF),[ba,za,vb,kd]}function qa(ba,za){var ta=4/3*Math.tan(za/4),Ia=Math.cos(ba),
Ta=Math.sin(ba),Bb=Math.cos(ba+za);ba=Math.sin(ba+za);return[Ia,Ta,Ia-Ta*ta,Ta+Ia*ta,Bb+ba*ta,ba-Bb*ta,Bb,ba]}function D(ba,za,ta,Ia,Ta,Bb,Ma,vb,lb){var oc=0,pb=[],kd=[];Sga(ba,za,ta,Ia,Ta,Bb,Ma,vb,lb).forEach(function(Fd){Fd=new Bs(Fd[0],Fd[1],Fd[2],Fd[3],Fd[4],Fd[5],Fd[6],Fd[7]);var Ge=Fd.getTotalLength();oc+=Ge;pb.push(Ge);kd.push(Fd)});(this||Zb).length=oc;(this||Zb).partialLengths=pb;(this||Zb).curves=kd}function P(ba,za,ta,Ia){(this||Zb).x0=ba;(this||Zb).x1=za;(this||Zb).y0=ta;(this||Zb).y1=
Ia}function J(ba,za){return Math.sqrt((ba[0]-za[0])*(ba[0]-za[0])+(ba[1]-za[1])*(ba[1]-za[1]))}function M(ba,za,ta){return[ba[0]+(za[0]-ba[0])*ta,ba[1]+(za[1]-ba[1])*ta]}function X(ba,za,ta){var Ia=ba.map(function(Ta,Bb){return T(Ta,za[Bb])});return function(Ta){var Bb=Ia.map(function(Ma){return Ma(Ta)});return ta?ea(Bb):Bb}}function T(ba,za){return function(ta){return ba.map(function(Ia,Ta){return Ia+ta*(za[Ta]-Ia)})}}function fa(ba){return"number"==typeof ba&&isFinite(ba)}function Ra(ba){var za;
a:{for(za=0;za<ba.length-2;za++){var ta=ba[za],Ia=ba[za+1],Ta=ba[za+2];if(ta[0]*(Ia[1]-Ta[1])+Ia[0]*(Ta[1]-ta[1])+Ta[0]*(ta[1]-Ia[1])){za=!0;break a}}za=!1}if(za){Ta=-1;var Bb=ba.length,Ma=0,vb=0,lb=ba[Bb-1];for(za=0;++Ta<Bb;)ta=lb,lb=ba[Ta],za+=Ia=ta[0]*lb[1]-lb[0]*ta[1],Ma+=(ta[0]+lb[0])*Ia,vb+=(ta[1]+lb[1])*Ia;ba=(za*=3,[Ma/za,vb/za])}else ba=[(ba[0][0]+ba[ba.length-1][0])/2,(ba[0][1]+ba[ba.length-1][1])/2];return ba}function gb(ba){return ba.toString().split("M").map(function(za,ta){return za=
za.trim(),ta&&za?"M"+za:za}).filter(function(za){return za})}function ea(ba){return"M"+ba.join("L")+"Z"}function aa(ba,za){var ta=ba.length+za;za=Sz(ba)/za;for(var Ia=0,Ta=0,Bb=za/2;ba.length<ta;){var Ma=ba[Ia],vb=ba[(Ia+1)%ba.length],lb=J(Ma,vb);Bb<=Ta+lb?(ba.splice(Ia+1,0,lb?M(Ma,vb,(Bb-Ta)/lb):Ma.slice(0)),Bb+=za):(Ta+=lb,Ia++)}}function ia(ba,za){var ta;if("string"==typeof ba){ba=(new n3(ba)).abs();a:{var Ia=ba.segments||[];var Ta=[];if(Ia.length&&"M"===Ia[0][0]){for(var Bb=0;Bb<Ia.length;Bb++){var Ma=
Ia[Bb],vb=Ma[0],lb=Ma[1];Ma=Ma[2];if("M"===vb&&Bb||"Z"===vb)break;if("M"===vb||"L"===vb)Ta.push([lb,Ma]);else if("H"===vb)Ta.push([lb,Ta[Ta.length-1][1]]);else{if("V"!==vb){Ia=!1;break a}Ta.push([Ta[Ta.length-1][0],lb])}}Ia=!!Ta.length&&{ring:Ta}}else Ia=!1}if(!Ia){Ta=gb(ba)[0];ba=[];Ia=3;if(!Ta)throw new TypeError(fR);a:{if("undefined"!=typeof window&&window&&window.document)try{var oc=window.document.createElementNS("http://www.w3.org/2000/svg","path");var pb=(oc.setAttributeNS(null,"d",Ta),oc);
break a}catch(kd){}pb=Tga(Ta)}oc=pb;pb=oc.getTotalLength();za&&fa(za)&&0<za&&(Ia=Math.max(Ia,Math.ceil(pb/za)));for(Ta=0;Ta<Ia;Ta++)Bb=oc.getPointAtLength(pb*Ta/Ia),ba.push([Bb.x,Bb.y]);Ia={ring:ba,skipBisect:!0}}pb=Ia;ba=pb.ring;Ia=pb.skipBisect}else if(!Array.isArray(ba))throw new TypeError(fR);if(ta=ba.slice(0),!Aa(ta))throw new TypeError(fR);1<ta.length&&1E-9>J(ta[0],ta[ta.length-1])&&ta.pop();0<mC(ta)&&ta.reverse();if(!Ia&&za&&fa(za)&&0<za)for(void 0===za&&(za=1/0),pb=0;pb<ta.length;pb++)for(oc=
ta[pb],ba=pb===ta.length-1?ta[0]:ta[pb+1];J(oc,ba)>za;)ba=M(oc,ba,.5),ta.splice(pb+1,0,ba);return ta}function Aa(ba){return ba.every(function(za){return Array.isArray(za)&&2<=za.length&&fa(za[0])&&fa(za[1])})}function ob(ba,za,ta){var Ia;return Ia=ba.length-za.length,aa(ba,0>Ia?-1*Ia:0),aa(za,0<Ia?Ia:0),Uga(ba,za),X(ba,za,ta)}function Nb(ba,za,ta){ta=ta||2;var Ia=za&&za.length,Ta=Ia?za[0]*ta:ba.length,Bb=Ab(ba,0,Ta,ta,!0),Ma=[];if(!Bb)return Ma;var vb;if(Ia){var lb=ta,oc;var pb=[];Ia=0;for(oc=za.length;Ia<
oc;Ia++){var kd=za[Ia]*lb;var Fd=Ia<oc-1?za[Ia+1]*lb:ba.length;kd=Ab(ba,kd,Fd,lb,!1);kd===kd.next&&(kd.steiner=!0);pb.push(Z(kd))}pb.sort(ub);for(Ia=0;Ia<pb.length;Ia++){za=pb[Ia];lb=Bb;if(lb=Gc(za,lb))za=Oc(lb,za),Kb(za,za.next);Bb=Kb(Bb,Bb.next)}}if(ba.length>80*ta){var Ge=vb=ba[0];var He=Ia=ba[1];for(lb=ta;lb<Ta;lb+=ta)pb=ba[lb],za=ba[lb+1],pb<Ge&&(Ge=pb),za<He&&(He=za),pb>vb&&(vb=pb),za>Ia&&(Ia=za);vb=Math.max(vb-Ge,Ia-He)}return jc(Bb,Ma,ta,Ge,He,vb),Ma}function Ab(ba,za,ta,Ia,Ta){if(Ta===0<
ah(ba,za,ta,Ia))for(Ta=za;Ta<ta;Ta+=Ia)var Bb=kc(Ta,ba[Ta],ba[Ta+1],Bb);else for(Ta=ta-Ia;Ta>=za;Ta-=Ia)Bb=kc(Ta,ba[Ta],ba[Ta+1],Bb);return Bb&&db(Bb,Bb.next)&&(be(Bb),Bb=Bb.next),Bb}function Kb(ba,za){if(!ba)return ba;za||(za=ba);var ta=ba;do if(ba=!1,ta.steiner||!db(ta,ta.next)&&0!==ua(ta.prev,ta,ta.next))ta=ta.next;else{if(be(ta),(ta=za=ta.prev)===ta.next)return null;ba=!0}while(ba||ta!==za);return za}function jc(ba,za,ta,Ia,Ta,Bb,Ma){if(ba){if(!Ma&&Bb){var vb=ba,lb=vb;do null===lb.z&&(lb.z=Yc(lb.x,
lb.y,Ia,Ta,Bb)),lb.prevZ=lb.prev,lb=lb.nextZ=lb.next;while(lb!==vb);lb.prevZ.nextZ=null;lb.prevZ=null;vb=lb;var oc,pb,kd,Fd,Ge=1;do{lb=vb;var He=vb=null;for(kd=0;lb;){kd++;var Xd=lb;for(oc=Fd=0;oc<Ge&&(Fd++,Xd=Xd.nextZ);oc++);for(oc=Ge;0<Fd||0<oc&&Xd;)0===Fd?(pb=Xd,Xd=Xd.nextZ,oc--):0!==oc&&Xd?lb.z<=Xd.z?(pb=lb,lb=lb.nextZ,Fd--):(pb=Xd,Xd=Xd.nextZ,oc--):(pb=lb,lb=lb.nextZ,Fd--),He?He.nextZ=pb:vb=pb,pb.prevZ=He,He=pb;lb=Xd}He.nextZ=null;Ge*=2}while(1<kd)}for(lb=ba;ba.prev!==ba.next;){pb=ba.prev;vb=
ba.next;if(Bb)a:{Xd=ba;oc=Ia;var Ie=Ta,No=Bb;He=Xd.prev;kd=Xd;Fd=Xd.next;if(0<=ua(He,kd,Fd))Xd=!1;else{var Vga=He.x>kd.x?He.x>Fd.x?He.x:Fd.x:kd.x>Fd.x?kd.x:Fd.x,Wga=He.y>kd.y?He.y>Fd.y?He.y:Fd.y:kd.y>Fd.y?kd.y:Fd.y;Ge=Yc(He.x<kd.x?He.x<Fd.x?He.x:Fd.x:kd.x<Fd.x?kd.x:Fd.x,He.y<kd.y?He.y<Fd.y?He.y:Fd.y:kd.y<Fd.y?kd.y:Fd.y,oc,Ie,No);oc=Yc(Vga,Wga,oc,Ie,No);for(Ie=Xd.nextZ;Ie&&Ie.z<=oc;){if(Ie!==Xd.prev&&Ie!==Xd.next&&sa(He.x,He.y,kd.x,kd.y,Fd.x,Fd.y,Ie.x,Ie.y)&&0<=ua(Ie.prev,Ie,Ie.next)){Xd=!1;break a}Ie=
Ie.nextZ}for(Ie=Xd.prevZ;Ie&&Ie.z>=Ge;){if(Ie!==Xd.prev&&Ie!==Xd.next&&sa(He.x,He.y,kd.x,kd.y,Fd.x,Fd.y,Ie.x,Ie.y)&&0<=ua(Ie.prev,Ie,Ie.next)){Xd=!1;break a}Ie=Ie.prevZ}Xd=!0}}else a:if(Xd=ba,He=Xd.prev,kd=Xd,Fd=Xd.next,0<=ua(He,kd,Fd))Xd=!1;else{for(Ge=Xd.next.next;Ge!==Xd.prev;){if(sa(He.x,He.y,kd.x,kd.y,Fd.x,Fd.y,Ge.x,Ge.y)&&0<=ua(Ge.prev,Ge,Ge.next)){Xd=!1;break a}Ge=Ge.next}Xd=!0}if(Xd)za.push(pb.i/ta),za.push(ba.i/ta),za.push(vb.i/ta),be(ba),lb=ba=vb.next;else if((ba=vb)===lb){if(Ma)if(1===
Ma){Ma=za;pb=ta;vb=ba;do lb=vb.prev,Xd=vb.next.next,!db(lb,Xd)&&Cb(lb,vb,vb.next,Xd)&&Pc(lb,Xd)&&Pc(Xd,lb)&&(Ma.push(lb.i/pb),Ma.push(vb.i/pb),Ma.push(Xd.i/pb),be(vb),be(vb.next),vb=ba=Xd),vb=vb.next;while(vb!==ba);ba=vb;jc(ba,za,ta,Ia,Ta,Bb,2)}else{if(2===Ma)a:{Ma=ba;do{for(pb=Ma.next.next;pb!==Ma.prev;){if(vb=Ma.i!==pb.i){vb=Ma;lb=pb;if(Xd=vb.next.i!==lb.i&&vb.prev.i!==lb.i){b:{Xd=vb;do{if(Xd.i!==vb.i&&Xd.next.i!==vb.i&&Xd.i!==lb.i&&Xd.next.i!==lb.i&&Cb(Xd,Xd.next,vb,lb)){Xd=!0;break b}Xd=Xd.next}while(Xd!==
vb);Xd=!1}Xd=!Xd}if(Xd=Xd&&Pc(vb,lb)&&Pc(lb,vb)){Xd=vb;He=!1;kd=(vb.x+lb.x)/2;lb=(vb.y+lb.y)/2;do Xd.y>lb!=Xd.next.y>lb&&kd<(Xd.next.x-Xd.x)*(lb-Xd.y)/(Xd.next.y-Xd.y)+Xd.x&&(He=!He),Xd=Xd.next;while(Xd!==vb);Xd=He}vb=Xd}if(vb){ba=Oc(Ma,pb);Ma=Kb(Ma,Ma.next);ba=Kb(ba,ba.next);jc(Ma,za,ta,Ia,Ta,Bb);jc(ba,za,ta,Ia,Ta,Bb);break a}pb=pb.next}Ma=Ma.next}while(Ma!==ba)}}else jc(Kb(ba),za,ta,Ia,Ta,Bb,1);break}}}}function ub(ba,za){return ba.x-za.x}function Gc(ba,za){var ta=za,Ia=ba.x,Ta=ba.y,Bb=-1/0;do{if(Ta<=
ta.y&&Ta>=ta.next.y){var Ma=ta.x+(Ta-ta.y)*(ta.next.x-ta.x)/(ta.next.y-ta.y);if(Ma<=Ia&&Ma>Bb){if(Bb=Ma,Ma===Ia){if(Ta===ta.y)return ta;if(Ta===ta.next.y)return ta.next}var vb=ta.x<ta.next.x?ta:ta.next}}ta=ta.next}while(ta!==za);if(!vb)return null;if(Ia===Bb)return vb.prev;var lb;za=vb;Ma=vb.x;var oc=vb.y,pb=1/0;for(ta=vb.next;ta!==za;)Ia>=ta.x&&ta.x>=Ma&&sa(Ta<oc?Ia:Bb,Ta,Ma,oc,Ta<oc?Bb:Ia,Ta,ta.x,ta.y)&&((lb=Math.abs(Ta-ta.y)/(Ia-ta.x))<pb||lb===pb&&ta.x>vb.x)&&Pc(ta,ba)&&(vb=ta,pb=lb),ta=ta.next;
return vb}function Yc(ba,za,ta,Ia,Ta){return ba=32767*(ba-ta)/Ta,za=32767*(za-Ia)/Ta,ba=16711935&(ba|ba<<8),ba=252645135&(ba|ba<<4),ba=858993459&(ba|ba<<2),ba=1431655765&(ba|ba<<1),za=16711935&(za|za<<8),za=252645135&(za|za<<4),za=858993459&(za|za<<2),za=1431655765&(za|za<<1),ba|za<<1}function Z(ba){var za=ba,ta=ba;do za.x<ta.x&&(ta=za),za=za.next;while(za!==ba);return ta}function sa(ba,za,ta,Ia,Ta,Bb,Ma,vb){return 0<=(Ta-Ma)*(za-vb)-(ba-Ma)*(Bb-vb)&&0<=(ba-Ma)*(Ia-vb)-(ta-Ma)*(za-vb)&&0<=(ta-Ma)*
(Bb-vb)-(Ta-Ma)*(Ia-vb)}function ua(ba,za,ta){return(za.y-ba.y)*(ta.x-za.x)-(za.x-ba.x)*(ta.y-za.y)}function db(ba,za){return ba.x===za.x&&ba.y===za.y}function Cb(ba,za,ta,Ia){return!!(db(ba,za)&&db(ta,Ia)||db(ba,Ia)&&db(ta,za))||0<ua(ba,za,ta)!=0<ua(ba,za,Ia)&&0<ua(ta,Ia,ba)!=0<ua(ta,Ia,za)}function Pc(ba,za){return 0>ua(ba.prev,ba,ba.next)?0<=ua(ba,za,ba.next)&&0<=ua(ba,ba.prev,za):0>ua(ba,za,ba.prev)||0>ua(ba,ba.next,za)}function Oc(ba,za){var ta=new Ud(ba.i,ba.x,ba.y),Ia=new Ud(za.i,za.x,za.y),
Ta=ba.next,Bb=za.prev;return ba.next=za,za.prev=ba,ta.next=Ta,Ta.prev=ta,Ia.next=ta,ta.prev=Ia,Bb.next=Ia,Ia.prev=Bb,Ia}function kc(ba,za,ta,Ia){ba=new Ud(ba,za,ta);return Ia?(ba.next=Ia.next,ba.prev=Ia,Ia.next.prev=ba,Ia.next=ba):(ba.prev=ba,ba.next=ba),ba}function be(ba){ba.next.prev=ba.prev;ba.prev.next=ba.next;ba.prevZ&&(ba.prevZ.nextZ=ba.nextZ);ba.nextZ&&(ba.nextZ.prevZ=ba.prevZ)}function Ud(ba,za,ta){(this||Zb).i=ba;(this||Zb).x=za;(this||Zb).y=ta;(this||Zb).prev=null;(this||Zb).next=null;(this||
Zb).z=null;(this||Zb).prevZ=null;(this||Zb).nextZ=null;(this||Zb).steiner=!1}function ah(ba,za,ta,Ia){for(var Ta=0,Bb=ta-Ia;za<ta;za+=Ia)Ta+=(ba[Bb]-ba[za])*(ba[za+1]+ba[Bb+1]),Bb=za;return Ta}function vg(ba,za){var ta=za.id,Ia=za.bbox,Ta=null==za.properties?{}:za.properties;ba=ki(ba,za);return null==ta&&null==Ia?{type:"Feature",properties:Ta,geometry:ba}:null==Ia?{type:"Feature",id:ta,properties:Ta,geometry:ba}:{type:"Feature",id:ta,bbox:Ia,properties:Ta,geometry:ba}}function ki(ba,za){function ta(oc){return vb(oc)}
function Ia(oc){for(var pb=[],kd=0,Fd=oc.length;kd<Fd;++kd){var Ge=oc[kd],He=pb;He.length&&He.pop();for(var Xd=lb[0>Ge?~Ge:Ge],Ie=0,No=Xd.length;Ie<No;++Ie)He.push(vb(Xd[Ie],Ie));if(0>Ge)for(Ge=He,He=Ge.length,Xd=He-No;Xd<--He;)No=Ge[Xd],Ge[Xd++]=Ge[He],Ge[He]=No}return 2>pb.length&&pb.push(pb[0]),pb}function Ta(oc){for(oc=Ia(oc);4>oc.length;)oc.push(oc[0]);return oc}function Bb(oc){return oc.map(Ta)}function Ma(oc){var pb=oc.type;switch(pb){case "GeometryCollection":return{type:pb,geometries:oc.geometries.map(Ma)};
case "Point":oc=vb(oc.coordinates);break;case "MultiPoint":oc=oc.coordinates.map(ta);break;case "LineString":oc=Ia(oc.arcs);break;case "MultiLineString":oc=oc.arcs.map(Ia);break;case "Polygon":oc=Bb(oc.arcs);break;case "MultiPolygon":oc=oc.arcs.map(Bb);break;default:return null}return{type:pb,coordinates:oc}}var vb=Xga(ba.transform),lb=ba.arcs;return Ma(za)}function bi(ba,za){function ta(lb){switch(lb.type){case "GeometryCollection":lb.geometries.forEach(ta);break;case "Polygon":Ia(lb.arcs);break;
case "MultiPolygon":lb.arcs.forEach(Ia)}}function Ia(lb){lb.forEach(function(oc){oc.forEach(function(pb){(Bb[pb=0>pb?~pb:pb]||(Bb[pb]=[])).push(lb)})});Ma.push(lb)}function Ta(lb){lb=ki(ba,{type:"Polygon",arcs:[lb]}).coordinates[0];for(var oc,pb=-1,kd=lb.length,Fd=lb[kd-1],Ge=0;++pb<kd;)oc=Fd,Fd=lb[pb],Ge+=oc[0]*Fd[1]-oc[1]*Fd[0];return Math.abs(Ge)}var Bb={},Ma=[],vb=[];return za.forEach(ta),Ma.forEach(function(lb){if(!lb._){var oc=[],pb=[lb];lb._=1;for(vb.push(oc);lb=pb.pop();)oc.push(lb),lb.forEach(function(kd){kd.forEach(function(Fd){Bb[0>
Fd?~Fd:Fd].forEach(function(Ge){Ge._||(Ge._=1,pb.push(Ge))})})})}}),Ma.forEach(function(lb){delete lb._}),{type:"MultiPolygon",arcs:vb.map(function(lb){var oc=[];if(lb.forEach(function(He){He.forEach(function(Xd){Xd.forEach(function(Ie){2>Bb[0>Ie?~Ie:Ie].length&&oc.push(Ie)})})}),oc=Yga(ba,oc),1<(lb=oc.length))for(var pb,kd,Fd=1,Ge=Ta(oc[0]);Fd<lb;++Fd)(pb=Ta(oc[Fd]))>Ge&&(kd=oc[0],oc[0]=oc[Fd],oc[Fd]=kd,Ge=pb);return oc})}}function Wi(ba){return function(za,ta){return o3(ba(za),ta)}}function pj(ba,
za){var ta={},Ia={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return ba.forEach(function(Ta){var Bb=[];Ta.forEach(function(Ma,vb){vb=Ma[0]<Ma[1]?Ma.join(","):Ma[1]+","+Ma[0];Ma=Ma.map(function(lb){return za[lb]});vb in ta?Bb.push(~ta[vb]):(Bb.push(ta[vb]=Ia.arcs.length),Ia.arcs.push(Ma))});Ia.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(mC(Ta.map(function(Ma){return za[Ma[0]]}))),arcs:[Bb]})}),Ia.objects.triangles.geometries.sort(function(Ta,
Bb){return Ta.area-Bb.area}),Ia}function Bj(ba,za){for(var ta=ba.objects.triangles.geometries,Ia=p3(function(Ta){return Ta.area}).left;ta.length>za;)!function(){var Ta=ta[0],Bb=Zga(ta)[0][0],Ma=ta[Bb],vb=bi(ba,[Ta,Ma]);vb.area=Ta.area+Ma.area;vb.type="Polygon";vb.arcs=vb.arcs[0];ta.splice(Bb,1);ta.shift();ta.splice(Ia(ta,vb.area),0,vb)}();if(za>ta.length)throw new RangeError("Can't collapse topology into "+za+" pieces.");return $ga(ba,ba.objects.triangles).features.map(function(Ta){return Ta.geometry.coordinates[0].pop(),
Ta.geometry.coordinates[0]})}function Cj(ba){ba=aha(ba.reduce(function(Ta,Bb){return Ta.concat([Bb[0]],[Bb[1]])},[]));for(var za=[],ta=0,Ia=ba.length;ta<Ia;ta+=3)za.push([[ba[ta],ba[ta+1]],[ba[ta+1],ba[ta+2]],[ba[ta+2],ba[ta]]]);return za}function Th(ba,za,ta){function Ia(Ma,vb,lb){void 0===vb&&(vb=[]);void 0===lb&&(lb=0);for(var oc=0;oc<Ma.length;oc++){var pb=Ma.splice(oc,1),kd=ta[pb[0]][vb.length];lb+kd<Ta&&(Ma.length?Ia(Ma.slice(),vb.concat(pb),lb+kd):(Ta=lb+kd,Bb=vb.concat(pb)));Ma.length&&Ma.splice(oc,
0,pb[0])}}var Ta=1/0,Bb=ba.map(function(Ma,vb){return vb});return Ia(Bb),Bb}function Xi(ba,za,ta){void 0===ta&&(ta={});var Ia=ta.maxSegmentLength;void 0===Ia&&(Ia=10);var Ta=ta.string;void 0===Ta&&(Ta=!0);ta=ta.single;void 0===ta&&(ta=!1);var Bb=ia(ba,Ia);Bb.length<za.length+2&&aa(Bb,za.length+2-Bb.length);var Ma;Bb=bha(Bb,za.length);var vb=za.map(function(lb){return ia(lb,Ia)});ba="string"==typeof ba&&ba;return ta&&!za.every(function(lb){return"string"==typeof lb})||(Ma=za.slice(0)),Dj(Bb,vb,{match:!0,
string:Ta,single:ta,t0:ba,t1:Ma})}function Dj(ba,za,ta){void 0===ta&&(ta={});var Ia=ta.string,Ta=ta.single,Bb=ta.t0,Ma=ta.t1,vb=(ta=ta.match)?cha(ba,za):ba.map(function(pb,kd){return kd}),lb=vb.map(function(pb,kd){return ob(ba[pb],za[kd],Ia)});if(ta&&Array.isArray(Bb)&&(Bb=vb.map(function(pb){return Bb[pb]})),Ta&&Ia&&(Array.isArray(Bb)&&(Bb=Bb.join(" ")),Array.isArray(Ma)&&(Ma=Ma.join(" "))),Ta){var oc=Ia?function(pb){return lb.map(function(kd){return kd(pb)}).join(" ")}:function(pb){return lb.map(function(kd){return kd(pb)})};
return Ia&&(Bb||Ma)?function(pb){return 1E-4>pb&&Bb||1E-4>1-pb&&Ma||oc(pb)}:oc}return Ia?(Bb=Array.isArray(Bb)?Bb.map(function(pb){return"string"==typeof pb&&pb}):[],Ma=Array.isArray(Ma)?Ma.map(function(pb){return"string"==typeof pb&&pb}):[],lb.map(function(pb,kd){return Bb[kd]||Ma[kd]?function(Fd){return 1E-4>Fd&&Bb[kd]||1E-4>1-Fd&&Ma[kd]||pb(Fd)}:pb})):lb}function Yi(ba,za,ta,Ia,Ta){var Bb=Tc(ba,za,ta),Ma=ba-ta+","+za,vb="A"+ta+","+ta+",0,1,1,";return nC(Bb,Ia,"M"+Ma+vb+(ba+ta+","+za)+vb+Ma+"Z",
2*Math.PI*ta,Ta)}function Ej(ba,za,ta,Ia,Ta,Bb){var Ma=Uc(ba,za,ta,Ia),vb=ba+ta,lb=za+Ia;return nC(Ma,Ta,"M"+ba+","+za+"L"+vb+","+za+"L"+vb+","+lb+"L"+ba+","+lb+"Z",2*ta+2*Ia,Bb)}function nC(ba,za,ta,Ia,Ta){void 0===Ta&&(Ta={});var Bb=Ta.maxSegmentLength;void 0===Bb&&(Bb=10);Ta=Ta.string;void 0===Ta&&(Ta=!0);var Ma,vb;za=ia(za,Bb);return fa(Ia)&&za.length<Ia/Bb&&aa(za,Math.ceil(Ia/Bb-za.length)),Ma=ba(za),vb=X(Ma,za,Ta),Ta?function(lb){return 1E-4>lb?ta:vb(lb)}:vb}function Tc(ba,za,ta){return function(Ia){var Ta=
Ra(Ia),Bb=Sz(Ia.concat([Ia[0]])),Ma=Math.atan2(Ia[0][1]-Ta[1],Ia[0][0]-Ta[0]),vb=0;return Ia.map(function(lb,oc){var pb;return oc&&(vb+=J(lb,Ia[oc-1])),pb=Ma+2*Math.PI*(Bb?vb/Bb:oc/Ia.length),[Math.cos(pb)*ta+ba,Math.sin(pb)*ta+za]})}}function Uc(ba,za,ta,Ia){return function(Ta){var Bb=Ra(Ta),Ma=Sz(Ta.concat([Ta[0]]));Bb=Math.atan2(Ta[0][1]-Bb[1],Ta[0][0]-Bb[0]);var vb=0;0>Bb&&(Bb=2*Math.PI+Bb);var lb=Bb/(2*Math.PI);return Ta.map(function(oc,pb){pb&&(vb+=J(oc,Ta[pb-1]));oc=(lb+(Ma?vb/Ma:pb/Ta.length))%
1;oc=.125>=oc?[1,.5+4*oc]:.375>=oc?[1.5-4*oc,1]:.625>=oc?[0,2.5-4*oc]:.875>=oc?[4*oc-2.5,0]:[1,4*oc-3.5];return[ba+oc[0]*ta,za+oc[1]*Ia]})}}var mC=function(ba){for(var za,ta=-1,Ia=ba.length,Ta=ba[Ia-1],Bb=0;++ta<Ia;)za=Ta,Ta=ba[ta],Bb+=za[1]*Ta[0]-za[0]*Ta[1];return Bb/2},Sz=function(ba){var za=-1,ta=ba.length,Ia=ba[ta-1],Ta=Ia[0];Ia=Ia[1];for(var Bb=0;++za<ta;){var Ma=Ta;var vb=Ia;Ia=ba[za];Ta=Ia[0];Ia=Ia[1];Ma-=Ta;vb-=Ia;Bb+=Math.sqrt(Ma*Ma+vb*vb)}return Bb},Tx={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,
t:2,v:1,z:0},$E=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];a.prototype.matrix=function(ba){return 1===ba[0]&&0===ba[1]&&0===ba[2]&&1===ba[3]&&0===ba[4]&&0===ba[5]?this||Zb:((this||Zb).cache=null,(this||Zb).queue.push(ba),this||Zb)};a.prototype.translate=function(ba,za){return 0===ba&&0===za||((this||Zb).cache=null,(this||Zb).queue.push([1,0,0,1,ba,za])),this||Zb};a.prototype.scale=function(ba,za){return 1===ba&&1===za||((this||Zb).cache=null,(this||Zb).queue.push([ba,
0,0,za,0,0])),this||Zb};a.prototype.rotate=function(ba,za,ta){var Ia,Ta,Bb;return 0!==ba&&(this.translate(za,ta),Ia=ba*Math.PI/180,Ta=Math.cos(Ia),Bb=Math.sin(Ia),(this||Zb).queue.push([Ta,Bb,-Bb,Ta,0,0]),(this||Zb).cache=null,this.translate(-za,-ta)),this||Zb};a.prototype.skewX=function(ba){return 0!==ba&&((this||Zb).cache=null,(this||Zb).queue.push([1,0,Math.tan(ba*Math.PI/180),1,0,0])),this||Zb};a.prototype.skewY=function(ba){return 0!==ba&&((this||Zb).cache=null,(this||Zb).queue.push([1,Math.tan(ba*
Math.PI/180),0,1,0,0])),this||Zb};a.prototype.toArray=function(){var ba=this||Zb;if((this||Zb).cache)return(this||Zb).cache;if(!(this||Zb).queue.length)return(this||Zb).cache=[1,0,0,1,0,0],(this||Zb).cache;if((this||Zb).cache=(this||Zb).queue[0],1===(this||Zb).queue.length)return(this||Zb).cache;for(var za=1;za<(this||Zb).queue.length;za++){var ta=ba.cache,Ia=ba.queue[za];ba.cache=[ta[0]*Ia[0]+ta[2]*Ia[1],ta[1]*Ia[0]+ta[3]*Ia[1],ta[0]*Ia[2]+ta[2]*Ia[3],ta[1]*Ia[2]+ta[3]*Ia[3],ta[0]*Ia[4]+ta[2]*Ia[5]+
ta[4],ta[1]*Ia[4]+ta[3]*Ia[5]+ta[5]]}return(this||Zb).cache};a.prototype.calc=function(ba,za,ta){var Ia;return(this||Zb).queue.length?((this||Zb).cache||((this||Zb).cache=this.toArray()),Ia=(this||Zb).cache,[ba*Ia[0]+za*Ia[2]+(ta?0:Ia[4]),ba*Ia[1]+za*Ia[3]+(ta?0:Ia[5])]):[ba,za]};var cF={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},dF=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,eF=/[\s,]+/,fF=function(ba){var za,ta,Ia=new a;return ba.split(dF).forEach(function(Ta){if(Ta.length){if(void 0!==
cF[Ta])return void(za=Ta);switch(ta=Ta.split(eF).map(function(Bb){return+Bb||0}),za){case "matrix":return void(6===ta.length&&Ia.matrix(ta));case "scale":return void(1===ta.length?Ia.scale(ta[0],ta[0]):2===ta.length&&Ia.scale(ta[0],ta[1]));case "rotate":return void(1===ta.length?Ia.rotate(ta[0],0,0):3===ta.length&&Ia.rotate(ta[0],ta[1],ta[2]));case "translate":return void(1===ta.length?Ia.translate(ta[0],0):2===ta.length&&Ia.translate(ta[0],ta[1]));case "skewX":return void(1===ta.length&&Ia.skewX(ta[0]));
case "skewY":return void(1===ta.length&&Ia.skewY(ta[0]))}}}),Ia},aF=2*Math.PI,dha=function(ba,za,ta,Ia,Ta,Bb,Ma,vb,lb){var oc=Math.sin(lb*aF/360),pb=Math.cos(lb*aF/360);lb=pb*(ba-ta)/2+oc*(za-Ia)/2;var kd=-oc*(ba-ta)/2+pb*(za-Ia)/2;if(0===lb&&0===kd||0===Ma||0===vb)return[];Ma=Math.abs(Ma);vb=Math.abs(vb);lb=lb*lb/(Ma*Ma)+kd*kd/(vb*vb);1<lb&&(Ma*=Math.sqrt(lb),vb*=Math.sqrt(lb));var Fd=m(ba,za,ta,Ia,Ta,Bb,Ma,vb,oc,pb);ba=[];za=Fd[2];ta=Fd[3];Ia=Math.max(Math.ceil(Math.abs(ta)/(aF/4)),1);ta/=Ia;for(Ta=
0;Ta<Ia;Ta++)ba.push(q(za,ta)),za+=ta;return ba.map(function(Ge){for(var He=0;He<Ge.length;He+=2){var Xd=Ge[He+0],Ie=Ge[He+1];Xd*=Ma;Ie*=vb;var No=oc*Xd+pb*Ie;Ge[He+0]=pb*Xd-oc*Ie+Fd[0];Ge[He+1]=No+Fd[1]}return Ge})},q3=Math.PI/180;r.prototype.transform=function(ba){var za=Math.cos((this||Zb).ax*q3),ta=Math.sin((this||Zb).ax*q3),Ia=[(this||Zb).rx*(ba[0]*za+ba[2]*ta),(this||Zb).rx*(ba[1]*za+ba[3]*ta),(this||Zb).ry*(-ba[0]*ta+ba[2]*za),(this||Zb).ry*(-ba[1]*ta+ba[3]*za)];ba=Ia[0]*Ia[0]+Ia[2]*Ia[2];
za=Ia[1]*Ia[1]+Ia[3]*Ia[3];ta=((Ia[0]-Ia[3])*(Ia[0]-Ia[3])+(Ia[2]+Ia[1])*(Ia[2]+Ia[1]))*((Ia[0]+Ia[3])*(Ia[0]+Ia[3])+(Ia[2]-Ia[1])*(Ia[2]-Ia[1]));var Ta=(ba+za)/2;if(ta<1E-10*Ta)return(this||Zb).rx=(this||Zb).ry=Math.sqrt(Ta),(this||Zb).ax=0,this||Zb;Ia=Ia[0]*Ia[1]+Ia[2]*Ia[3];ta=Math.sqrt(ta);var Bb=Ta+ta/2;ta=Ta-ta/2;return(this||Zb).ax=1E-10>Math.abs(Ia)&&1E-10>Math.abs(Bb-za)?90:180*Math.atan(Math.abs(Ia)>Math.abs(Bb-za)?(Bb-ba)/Ia:Ia/(Bb-za))/Math.PI,0<=(this||Zb).ax?((this||Zb).rx=Math.sqrt(Bb),
(this||Zb).ry=Math.sqrt(ta)):((this||Zb).ax+=90,(this||Zb).rx=Math.sqrt(ta),(this||Zb).ry=Math.sqrt(Bb)),this||Zb};r.prototype.isDegenerate=function(){return(this||Zb).rx<1E-10*(this||Zb).ry||(this||Zb).ry<1E-10*(this||Zb).rx};u.prototype.__matrix=function(ba){var za,ta=this||Zb;ba.queue.length&&this.iterate(function(Ia,Ta,Bb,Ma){switch(Ia[0]){case "v":var vb=ba.calc(0,Ia[1],!0);Bb=0===vb[0]?["v",vb[1]]:["l",vb[0],vb[1]];break;case "V":vb=ba.calc(Bb,Ia[1],!1);Bb=vb[0]===ba.calc(Bb,Ma,!1)[0]?["V",
vb[1]]:["L",vb[0],vb[1]];break;case "h":vb=ba.calc(Ia[1],0,!0);Bb=0===vb[1]?["h",vb[0]]:["l",vb[0],vb[1]];break;case "H":vb=ba.calc(Ia[1],Ma,!1);Bb=vb[1]===ba.calc(Bb,Ma,!1)[1]?["H",vb[0]]:["L",vb[0],vb[1]];break;case "a":case "A":vb=ba.toArray();var lb=r(Ia[1],Ia[2],Ia[3]).transform(vb);if(0>vb[0]*vb[3]-vb[1]*vb[2]&&(Ia[5]=Ia[5]?"0":"1"),vb=ba.calc(Ia[6],Ia[7],"a"===Ia[0]),"A"===Ia[0]&&Ia[6]===Bb&&Ia[7]===Ma||"a"===Ia[0]&&0===Ia[6]&&0===Ia[7]){Bb=["a"===Ia[0]?"l":"L",vb[0],vb[1]];break}Bb=lb.isDegenerate()?
["a"===Ia[0]?"l":"L",vb[0],vb[1]]:[Ia[0],lb.rx,lb.ry,lb.ax,Ia[4],Ia[5],vb[0],vb[1]];break;case "m":vb=ba.calc(Ia[1],Ia[2],0<Ta);Bb=["m",vb[0],vb[1]];break;default:for(vb=Ia[0],Bb=[vb],Ma=vb.toLowerCase()===vb,za=1;za<Ia.length;za+=2)vb=ba.calc(Ia[za],Ia[za+1],Ma),Bb.push(vb[0],vb[1])}ta.segments[Ta]=Bb},!0)};u.prototype.__evaluateStack=function(){var ba,za=this||Zb;if((this||Zb).__stack.length){if(1===(this||Zb).__stack.length)return this.__matrix((this||Zb).__stack[0]),void((this||Zb).__stack=[]);
var ta=a();for(ba=(this||Zb).__stack.length;0<=--ba;)ta.matrix(za.__stack[ba].toArray());this.__matrix(ta);(this||Zb).__stack=[]}};u.prototype.toString=function(){var ba=this||Zb,za=[];this.__evaluateStack();for(var ta=0;ta<(this||Zb).segments.length;ta++){var Ia=ba.segments[ta][0];Ia=0<ta&&"m"!==Ia&&"M"!==Ia&&Ia===ba.segments[ta-1][0];za=za.concat(Ia?ba.segments[ta].slice(1):ba.segments[ta])}return za.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};u.prototype.translate=
function(ba,za){return(this||Zb).__stack.push(a().translate(ba,za||0)),this||Zb};u.prototype.scale=function(ba,za){return(this||Zb).__stack.push(a().scale(ba,za||0===za?za:ba)),this||Zb};u.prototype.rotate=function(ba,za,ta){return(this||Zb).__stack.push(a().rotate(ba,za||0,ta||0)),this||Zb};u.prototype.skewX=function(ba){return(this||Zb).__stack.push(a().skewX(ba)),this||Zb};u.prototype.skewY=function(ba){return(this||Zb).__stack.push(a().skewY(ba)),this||Zb};u.prototype.matrix=function(ba){return(this||
Zb).__stack.push(a().matrix(ba)),this||Zb};u.prototype.transform=function(ba){return ba.trim()?((this||Zb).__stack.push(fF(ba)),this||Zb):this||Zb};u.prototype.round=function(ba){var za,ta=0,Ia=0,Ta=0,Bb=0;return ba=ba||0,this.__evaluateStack(),(this||Zb).segments.forEach(function(Ma){var vb=Ma[0].toLowerCase()===Ma[0];switch(Ma[0]){case "H":case "h":return vb&&(Ma[1]+=Ta),Ta=Ma[1]-Ma[1].toFixed(ba),void(Ma[1]=+Ma[1].toFixed(ba));case "V":case "v":return vb&&(Ma[1]+=Bb),Bb=Ma[1]-Ma[1].toFixed(ba),
void(Ma[1]=+Ma[1].toFixed(ba));case "Z":case "z":return Ta=ta,void(Bb=Ia);case "M":case "m":return vb&&(Ma[1]+=Ta,Ma[2]+=Bb),Ta=Ma[1]-Ma[1].toFixed(ba),Bb=Ma[2]-Ma[2].toFixed(ba),ta=Ta,Ia=Bb,Ma[1]=+Ma[1].toFixed(ba),void(Ma[2]=+Ma[2].toFixed(ba));case "A":case "a":return vb&&(Ma[6]+=Ta,Ma[7]+=Bb),Ta=Ma[6]-Ma[6].toFixed(ba),Bb=Ma[7]-Ma[7].toFixed(ba),Ma[1]=+Ma[1].toFixed(ba),Ma[2]=+Ma[2].toFixed(ba),Ma[3]=+Ma[3].toFixed(ba+2),Ma[6]=+Ma[6].toFixed(ba),void(Ma[7]=+Ma[7].toFixed(ba));default:return za=
Ma.length,vb&&(Ma[za-2]+=Ta,Ma[za-1]+=Bb),Ta=Ma[za-2]-Ma[za-2].toFixed(ba),Bb=Ma[za-1]-Ma[za-1].toFixed(ba),void Ma.forEach(function(lb,oc){oc&&(Ma[oc]=+Ma[oc].toFixed(ba))})}}),this||Zb};u.prototype.iterate=function(ba,za){var ta,Ia=(this||Zb).segments,Ta={},Bb=!1,Ma=0,vb=0,lb=0,oc=0;if(za||this.__evaluateStack(),Ia.forEach(function(kd,Fd){var Ge=ba(kd,Fd,Ma,vb);Array.isArray(Ge)&&(Ta[Fd]=Ge,Bb=!0);Fd=kd[0]===kd[0].toLowerCase();switch(kd[0]){case "m":case "M":return Ma=kd[1]+(Fd?Ma:0),vb=kd[2]+
(Fd?vb:0),lb=Ma,void(oc=vb);case "h":case "H":return void(Ma=kd[1]+(Fd?Ma:0));case "v":case "V":return void(vb=kd[1]+(Fd?vb:0));case "z":case "Z":return Ma=lb,void(vb=oc);default:Ma=kd[kd.length-2]+(Fd?Ma:0),vb=kd[kd.length-1]+(Fd?vb:0)}}),!Bb)return this||Zb;var pb=[];for(za=0;za<Ia.length;za++)if(void 0!==Ta[za])for(ta=0;ta<Ta[za].length;ta++)pb.push(Ta[za][ta]);else pb.push(Ia[za]);return(this||Zb).segments=pb,this||Zb};u.prototype.abs=function(){return this.iterate(function(ba,za,ta,Ia){za=ba[0];
var Ta=za.toUpperCase();if(za!==Ta)switch(ba[0]=Ta,za){case "v":return void(ba[1]+=Ia);case "a":return ba[6]+=ta,void(ba[7]+=Ia);default:for(za=1;za<ba.length;za++)ba[za]+=za%2?ta:Ia}},!0),this||Zb};u.prototype.rel=function(){return this.iterate(function(ba,za,ta,Ia){var Ta=ba[0],Bb=Ta.toLowerCase();if(Ta!==Bb&&(0!==za||"M"!==Ta))switch(ba[0]=Bb,Ta){case "V":return void(ba[1]-=Ia);case "A":return ba[6]-=ta,void(ba[7]-=Ia);default:for(za=1;za<ba.length;za++)ba[za]-=za%2?ta:Ia}},!0),this||Zb};u.prototype.unarc=
function(){return this.iterate(function(ba,za,ta,Ia){var Ta,Bb,Ma,vb=[];za=ba[0];return"A"!==za&&"a"!==za?null:("a"===za?(Bb=ta+ba[6],Ma=Ia+ba[7]):(Bb=ba[6],Ma=ba[7]),Ta=dha(ta,Ia,Bb,Ma,ba[4],ba[5],ba[1],ba[2],ba[3]),0===Ta.length?[["a"===ba[0]?"l":"L",ba[6],ba[7]]]:(Ta.forEach(function(lb){vb.push(["C",lb[2],lb[3],lb[4],lb[5],lb[6],lb[7]])}),vb))}),this||Zb};u.prototype.unshort=function(){var ba,za,ta,Ia,Ta,Bb=(this||Zb).segments;return this.iterate(function(Ma,vb,lb,oc){var pb,kd=Ma[0],Fd=kd.toUpperCase();
vb&&("T"===Fd?(pb="t"===kd,ta=Bb[vb-1],"Q"===ta[0]?(ba=ta[1]-lb,za=ta[2]-oc):"q"===ta[0]?(ba=ta[1]-ta[3],za=ta[2]-ta[4]):(ba=0,za=0),Ia=-ba,Ta=-za,pb||(Ia+=lb,Ta+=oc),Bb[vb]=[pb?"q":"Q",Ia,Ta,Ma[1],Ma[2]]):"S"===Fd&&(pb="s"===kd,ta=Bb[vb-1],"C"===ta[0]?(ba=ta[3]-lb,za=ta[4]-oc):"c"===ta[0]?(ba=ta[3]-ta[5],za=ta[4]-ta[6]):(ba=0,za=0),Ia=-ba,Ta=-za,pb||(Ia+=lb,Ta+=oc),Bb[vb]=[pb?"c":"C",Ia,Ta,Ma[1],Ma[2],Ma[3],Ma[4]]))}),this||Zb};var n3=u,gR={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},eha=/([astvzqmhlc])([^astvzqmhlc]*)/gi,
gha=function(ba){var za=[];return ba.replace(eha,function(ta,Ia,Ta){ta=Ia.toLowerCase();Ta=(Ta=Ta.match(fha))?Ta.map(Number):[];for("m"===ta&&2<Ta.length&&(za.push([Ia].concat(Ta.splice(0,2))),ta="l",Ia="m"===Ia?"l":"L");0<=Ta.length;){if(Ta.length===gR[ta])return Ta.unshift(Ia),za.push(Ta);if(Ta.length<gR[ta])throw Error("malformed path data");za.push([Ia].concat(Ta.splice(0,gR[ta])))}}),za},fha=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,Bs=function(ba,za,ta,Ia,Ta,Bb,Ma,vb){return new v(ba,za,ta,Ia,Ta,
Bb,Ma,vb)};v.prototype={constructor:v,init:function(){(this||Zb).length=this.getArcLength([(this||Zb).a.x,(this||Zb).b.x,(this||Zb).c.x,(this||Zb).d.x],[(this||Zb).a.y,(this||Zb).b.y,(this||Zb).c.y,(this||Zb).d.y])},getTotalLength:function(){return(this||Zb).length},getPointAtLength:function(ba){ba=B(ba,(this||Zb).length,(this||Zb).getArcLength,[(this||Zb).a.x,(this||Zb).b.x,(this||Zb).c.x,(this||Zb).d.x],[(this||Zb).a.y,(this||Zb).b.y,(this||Zb).c.y,(this||Zb).d.y]);return this.getPoint([(this||
Zb).a.x,(this||Zb).b.x,(this||Zb).c.x,(this||Zb).d.x],[(this||Zb).a.y,(this||Zb).b.y,(this||Zb).c.y,(this||Zb).d.y],ba)},getTangentAtLength:function(ba){ba=B(ba,(this||Zb).length,(this||Zb).getArcLength,[(this||Zb).a.x,(this||Zb).b.x,(this||Zb).c.x,(this||Zb).d.x],[(this||Zb).a.y,(this||Zb).b.y,(this||Zb).c.y,(this||Zb).d.y]);ba=this.getDerivative([(this||Zb).a.x,(this||Zb).b.x,(this||Zb).c.x,(this||Zb).d.x],[(this||Zb).a.y,(this||Zb).b.y,(this||Zb).c.y,(this||Zb).d.y],ba);var za=Math.sqrt(ba.x*ba.x+
ba.y*ba.y);return 0<za?{x:ba.x/za,y:ba.y/za}:{x:0,y:0}},getPropertiesAtLength:function(ba){ba=B(ba,(this||Zb).length,(this||Zb).getArcLength,[(this||Zb).a.x,(this||Zb).b.x,(this||Zb).c.x,(this||Zb).d.x],[(this||Zb).a.y,(this||Zb).b.y,(this||Zb).c.y,(this||Zb).d.y]);var za=this.getDerivative([(this||Zb).a.x,(this||Zb).b.x,(this||Zb).c.x,(this||Zb).d.x],[(this||Zb).a.y,(this||Zb).b.y,(this||Zb).c.y,(this||Zb).d.y],ba);var ta=Math.sqrt(za.x*za.x+za.y*za.y);za=0<ta?{x:za.x/ta,y:za.y/ta}:{x:0,y:0};ba=
this.getPoint([(this||Zb).a.x,(this||Zb).b.x,(this||Zb).c.x,(this||Zb).d.x],[(this||Zb).a.y,(this||Zb).b.y,(this||Zb).c.y,(this||Zb).d.y],ba);return{x:ba.x,y:ba.y,tangentX:za.x,tangentY:za.y}}};var Qga=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,
-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,
.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,
-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,
.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,
-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,
.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,
-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,
.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,
-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,
.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,
-.9951872199970213,.9951872199970213]],Rga=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,
.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,
.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,
.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,
.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,
.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,
.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,
.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,
.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,
.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,
.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,
.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Pga=[[1],[1,1],[1,2,1],[1,3,3,1]],bF=2*Math.PI,Sga=function(ba,za,ta,Ia,Ta,Bb,Ma,vb,lb){var oc=Math.sin(Ta*bF/360),pb=Math.cos(Ta*bF/360);Ta=pb*(ba-vb)/2+oc*(za-lb)/2;var kd=-oc*(ba-vb)/2+pb*(za-lb)/2;if(0===Ta&&0===kd||0===ta||0===Ia)return[];ta=Math.abs(ta);Ia=Math.abs(Ia);Ta=Ta*Ta/(ta*ta)+kd*kd/(Ia*Ia);1<Ta&&(ta*=Math.sqrt(Ta),Ia*=Math.sqrt(Ta));var Fd=ha(ba,za,vb,lb,Bb,Ma,ta,Ia,oc,pb);ba=[];za=Fd[2];Bb=Fd[3];Ma=Math.max(Math.ceil(Math.abs(Bb)/
(bF/4)),1);Bb/=Ma;for(vb=0;vb<Ma;vb++)ba.push(qa(za,Bb)),za+=Bb;return ba.map(function(Ge){for(var He=0;He<Ge.length;He+=2){var Xd=Ge[He+0],Ie=Ge[He+1];Xd*=ta;Ie*=Ia;var No=oc*Xd+pb*Ie;Ge[He+0]=pb*Xd-oc*Ie+Fd[0];Ge[He+1]=No+Fd[1]}return Ge})},r3=function(ba,za,ta,Ia,Ta,Bb,Ma,vb,lb){return new D(ba,za,ta,Ia,Ta,Bb,Ma,vb,lb)};D.prototype={constructor:D,init:function(){},getTotalLength:function(){return(this||Zb).length},getPointAtLength:function(ba){var za=this||Zb;0>ba?ba=0:ba>(this||Zb).length&&(ba=
(this||Zb).length);for(var ta=(this||Zb).partialLengths.length-1;(this||Zb).partialLengths[ta]>=ba&&0<(this||Zb).partialLengths[ta];)ta--;ta<(this||Zb).partialLengths.length-1&&ta++;for(var Ia=0,Ta=0;Ta<ta;Ta++)Ia+=za.partialLengths[Ta];return(this||Zb).curves[ta].getPointAtLength(ba-Ia)},getTangentAtLength:function(ba){var za=this||Zb;0>ba?ba=0:ba>(this||Zb).length&&(ba=(this||Zb).length);for(var ta=(this||Zb).partialLengths.length-1;(this||Zb).partialLengths[ta]>=ba&&0<(this||Zb).partialLengths[ta];)ta--;
ta<(this||Zb).partialLengths.length-1&&ta++;for(var Ia=0,Ta=0;Ta<ta;Ta++)Ia+=za.partialLengths[Ta];return(this||Zb).curves[ta].getTangentAtLength(ba-Ia)},getPropertiesAtLength:function(ba){var za=this.getTangentAtLength(ba);ba=this.getPointAtLength(ba);return{x:ba.x,y:ba.y,tangentX:za.x,tangentY:za.y}}};var ew=function(ba,za,ta,Ia){return new P(ba,za,ta,Ia)};P.prototype.getTotalLength=function(){return Math.sqrt(Math.pow((this||Zb).x0-(this||Zb).x1,2)+Math.pow((this||Zb).y0-(this||Zb).y1,2))};P.prototype.getPointAtLength=
function(ba){ba/=Math.sqrt(Math.pow((this||Zb).x0-(this||Zb).x1,2)+Math.pow((this||Zb).y0-(this||Zb).y1,2));return{x:(this||Zb).x0+((this||Zb).x1-(this||Zb).x0)*ba,y:(this||Zb).y0+((this||Zb).y1-(this||Zb).y0)*ba}};P.prototype.getTangentAtLength=function(){var ba=Math.sqrt(((this||Zb).x1-(this||Zb).x0)*((this||Zb).x1-(this||Zb).x0)+((this||Zb).y1-(this||Zb).y0)*((this||Zb).y1-(this||Zb).y0));return{x:((this||Zb).x1-(this||Zb).x0)/ba,y:((this||Zb).y1-(this||Zb).y0)/ba}};P.prototype.getPropertiesAtLength=
function(ba){ba=this.getPointAtLength(ba);var za=this.getTangentAtLength();return{x:ba.x,y:ba.y,tangentX:za.x,tangentY:za.y}};var Tga=function(ba){function za(Ma){if(!Ma)return null;var vb;Ma=gha(Ma);for(var lb=[0,0],oc=[0,0],pb=0;pb<Ma.length;pb++)"M"===Ma[pb][0]?(lb=[Ma[pb][1],Ma[pb][2]],Ta.push(null)):"m"===Ma[pb][0]?(lb=[Ma[pb][1]+lb[0],Ma[pb][2]+lb[1]],Ta.push(null)):"L"===Ma[pb][0]?(ta+=Math.sqrt(Math.pow(lb[0]-Ma[pb][1],2)+Math.pow(lb[1]-Ma[pb][2],2)),Ta.push(new ew(lb[0],Ma[pb][1],lb[1],Ma[pb][2])),
lb=[Ma[pb][1],Ma[pb][2]]):"l"===Ma[pb][0]?(ta+=Math.sqrt(Math.pow(Ma[pb][1],2)+Math.pow(Ma[pb][2],2)),Ta.push(new ew(lb[0],Ma[pb][1]+lb[0],lb[1],Ma[pb][2]+lb[1])),lb=[Ma[pb][1]+lb[0],Ma[pb][2]+lb[1]]):"H"===Ma[pb][0]?(ta+=Math.abs(lb[0]-Ma[pb][1]),Ta.push(new ew(lb[0],Ma[pb][1],lb[1],lb[1])),lb[0]=Ma[pb][1]):"h"===Ma[pb][0]?(ta+=Math.abs(Ma[pb][1]),Ta.push(new ew(lb[0],lb[0]+Ma[pb][1],lb[1],lb[1])),lb[0]=Ma[pb][1]+lb[0]):"V"===Ma[pb][0]?(ta+=Math.abs(lb[1]-Ma[pb][1]),Ta.push(new ew(lb[0],lb[0],lb[1],
Ma[pb][1])),lb[1]=Ma[pb][1]):"v"===Ma[pb][0]?(ta+=Math.abs(Ma[pb][1]),Ta.push(new ew(lb[0],lb[0],lb[1],lb[1]+Ma[pb][1])),lb[1]=Ma[pb][1]+lb[1]):"z"===Ma[pb][0]||"Z"===Ma[pb][0]?(ta+=Math.sqrt(Math.pow(Ma[0][1]-lb[0],2)+Math.pow(Ma[0][2]-lb[1],2)),Ta.push(new ew(lb[0],Ma[0][1],lb[1],Ma[0][2])),lb=[Ma[0][1],Ma[0][2]]):"C"===Ma[pb][0]?(vb=new Bs(lb[0],lb[1],Ma[pb][1],Ma[pb][2],Ma[pb][3],Ma[pb][4],Ma[pb][5],Ma[pb][6]),ta+=vb.getTotalLength(),lb=[Ma[pb][5],Ma[pb][6]],Ta.push(vb)):"c"===Ma[pb][0]?(vb=new Bs(lb[0],
lb[1],lb[0]+Ma[pb][1],lb[1]+Ma[pb][2],lb[0]+Ma[pb][3],lb[1]+Ma[pb][4],lb[0]+Ma[pb][5],lb[1]+Ma[pb][6]),ta+=vb.getTotalLength(),lb=[Ma[pb][5]+lb[0],Ma[pb][6]+lb[1]],Ta.push(vb)):"S"===Ma[pb][0]?(vb=0<pb&&-1<["C","c","S","s"].indexOf(Ma[pb-1][0])?new Bs(lb[0],lb[1],2*lb[0]-Ma[pb-1][Ma[pb-1].length-4],2*lb[1]-Ma[pb-1][Ma[pb-1].length-3],Ma[pb][1],Ma[pb][2],Ma[pb][3],Ma[pb][4]):new Bs(lb[0],lb[1],lb[0],lb[1],Ma[pb][1],Ma[pb][2],Ma[pb][3],Ma[pb][4]),ta+=vb.getTotalLength(),lb=[Ma[pb][3],Ma[pb][4]],Ta.push(vb)):
"s"===Ma[pb][0]?(vb=0<pb&&-1<["C","c","S","s"].indexOf(Ma[pb-1][0])?new Bs(lb[0],lb[1],lb[0]+vb.d.x-vb.c.x,lb[1]+vb.d.y-vb.c.y,lb[0]+Ma[pb][1],lb[1]+Ma[pb][2],lb[0]+Ma[pb][3],lb[1]+Ma[pb][4]):new Bs(lb[0],lb[1],lb[0],lb[1],lb[0]+Ma[pb][1],lb[1]+Ma[pb][2],lb[0]+Ma[pb][3],lb[1]+Ma[pb][4]),ta+=vb.getTotalLength(),lb=[Ma[pb][3]+lb[0],Ma[pb][4]+lb[1]],Ta.push(vb)):"Q"===Ma[pb][0]?(vb=new Bs(lb[0],lb[1],Ma[pb][1],Ma[pb][2],Ma[pb][3],Ma[pb][4]),ta+=vb.getTotalLength(),Ta.push(vb),lb=[Ma[pb][3],Ma[pb][4]],
oc=[Ma[pb][1],Ma[pb][2]]):"q"===Ma[pb][0]?(vb=new Bs(lb[0],lb[1],lb[0]+Ma[pb][1],lb[1]+Ma[pb][2],lb[0]+Ma[pb][3],lb[1]+Ma[pb][4]),ta+=vb.getTotalLength(),oc=[lb[0]+Ma[pb][1],lb[1]+Ma[pb][2]],lb=[Ma[pb][3]+lb[0],Ma[pb][4]+lb[1]],Ta.push(vb)):"T"===Ma[pb][0]?(vb=0<pb&&-1<["Q","q","T","t"].indexOf(Ma[pb-1][0])?new Bs(lb[0],lb[1],2*lb[0]-oc[0],2*lb[1]-oc[1],Ma[pb][1],Ma[pb][2]):new ew(lb[0],Ma[pb][1],lb[1],Ma[pb][2]),Ta.push(vb),ta+=vb.getTotalLength(),oc=[2*lb[0]-oc[0],2*lb[1]-oc[1]],lb=[Ma[pb][1],Ma[pb][2]]):
"t"===Ma[pb][0]?(vb=0<pb&&-1<["Q","q","T","t"].indexOf(Ma[pb-1][0])?new Bs(lb[0],lb[1],2*lb[0]-oc[0],2*lb[1]-oc[1],lb[0]+Ma[pb][1],lb[1]+Ma[pb][2]):new ew(lb[0],lb[0]+Ma[pb][1],lb[1],lb[1]+Ma[pb][2]),ta+=vb.getTotalLength(),oc=[2*lb[0]-oc[0],2*lb[1]-oc[1]],lb=[Ma[pb][1]+lb[0],Ma[pb][2]+lb[0]],Ta.push(vb)):"A"===Ma[pb][0]?(vb=new r3(lb[0],lb[1],Ma[pb][1],Ma[pb][2],Ma[pb][3],Ma[pb][4],Ma[pb][5],Ma[pb][6],Ma[pb][7]),ta+=vb.getTotalLength(),lb=[Ma[pb][6],Ma[pb][7]],Ta.push(vb)):"a"===Ma[pb][0]&&(vb=new r3(lb[0],
lb[1],Ma[pb][1],Ma[pb][2],Ma[pb][3],Ma[pb][4],Ma[pb][5],lb[0]+Ma[pb][6],lb[1]+Ma[pb][7]),ta+=vb.getTotalLength(),lb=[lb[0]+Ma[pb][6],lb[1]+Ma[pb][7]],Ta.push(vb)),Ia.push(ta);return za}var ta=0,Ia=[],Ta=[];za.getTotalLength=function(){return ta};za.getPointAtLength=function(Ma){Ma=Bb(Ma);return Ta[Ma.i].getPointAtLength(Ma.fraction)};za.getTangentAtLength=function(Ma){Ma=Bb(Ma);return Ta[Ma.i].getTangentAtLength(Ma.fraction)};za.getPropertiesAtLength=function(Ma){Ma=Bb(Ma);return Ta[Ma.i].getPropertiesAtLength(Ma.fraction)};
var Bb=function(Ma){0>Ma?Ma=0:Ma>ta&&(Ma=ta);for(var vb=Ia.length-1;Ia[vb]>=Ma&&0<Ia[vb];)vb--;return vb++,{fraction:Ma-Ia[vb-1],i:vb}};return za(ba)},fR='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n',Uga=function(ba,za){for(var ta,Ia,Ta,Bb=ba.length,Ma=1/0,vb=0;vb<Bb;vb++)!function(lb){Ia=0;za.forEach(function(oc,
pb){oc=J(ba[(lb+pb)%Bb],oc);Ia+=oc*oc});Ia<Ma&&(Ma=Ia,ta=lb)}(vb);ta&&(Ta=ba.splice(0,ta),ba.splice.apply(ba,[ba.length,0].concat(Ta)))},aha=Nb;Nb.deviation=function(ba,za,ta,Ia){var Ta=za&&za.length,Bb=Math.abs(ah(ba,0,Ta?za[0]*ta:ba.length,ta));if(Ta){Ta=0;for(var Ma=za.length;Ta<Ma;Ta++)Bb-=Math.abs(ah(ba,za[Ta]*ta,Ta<Ma-1?za[Ta+1]*ta:ba.length,ta))}for(Ta=za=0;Ta<Ia.length;Ta+=3){Ma=Ia[Ta]*ta;var vb=Ia[Ta+1]*ta,lb=Ia[Ta+2]*ta;za+=Math.abs((ba[Ma]-ba[lb])*(ba[vb+1]-ba[Ma+1])-(ba[Ma]-ba[vb])*(ba[lb+
1]-ba[Ma+1]))}return 0===Bb&&0===za?0:Math.abs((za-Bb)/Bb)};Nb.flatten=function(ba){for(var za=ba[0][0].length,ta={vertices:[],holes:[],dimensions:za},Ia=0,Ta=0;Ta<ba.length;Ta++){for(var Bb=0;Bb<ba[Ta].length;Bb++)for(var Ma=0;Ma<za;Ma++)ta.vertices.push(ba[Ta][Bb][Ma]);0<Ta&&(Ia+=ba[Ta-1].length,ta.holes.push(Ia))}return ta};var hha=function(ba){return ba},Xga=function(ba){if(null==ba)return hha;var za,ta,Ia=ba.scale[0],Ta=ba.scale[1],Bb=ba.translate[0],Ma=ba.translate[1];return function(vb,lb){lb||
(za=ta=0);lb=2;var oc=vb.length,pb=Array(oc);pb[0]=(za+=vb[0])*Ia+Bb;for(pb[1]=(ta+=vb[1])*Ta+Ma;lb<oc;)pb[lb]=vb[lb],++lb;return pb}},$ga=function(ba,za){return"GeometryCollection"===za.type?{type:"FeatureCollection",features:za.geometries.map(function(ta){return vg(ba,ta)})}:vg(ba,za)},Yga=function(ba,za){function ta(oc){var pb,kd=ba.arcs[0>oc?~oc:oc],Fd=kd[0];return ba.transform?(pb=[0,0],kd.forEach(function(Ge){pb[0]+=Ge[0];pb[1]+=Ge[1]})):pb=kd[kd.length-1],0>oc?[pb,Fd]:[Fd,pb]}function Ia(oc,
pb){for(var kd in oc){var Fd=oc[kd];delete pb[Fd.start];delete Fd.start;delete Fd.end;Fd.forEach(function(Ge){Ta[0>Ge?~Ge:Ge]=1});vb.push(Fd)}}var Ta={},Bb={},Ma={},vb=[],lb=-1;return za.forEach(function(oc,pb){var kd,Fd=ba.arcs[0>oc?~oc:oc];3>Fd.length&&!Fd[1][0]&&!Fd[1][1]&&(kd=za[++lb],za[lb]=oc,za[pb]=kd)}),za.forEach(function(oc){var pb=ta(oc);var kd=pb[0],Fd=pb[1];(pb=Ma[kd])?(delete Ma[pb.end],pb.push(oc),pb.end=Fd,oc=Bb[Fd])?(delete Bb[oc.start],kd=oc===pb?pb:pb.concat(oc),Bb[kd.start=pb.start]=
Ma[kd.end=oc.end]=kd):Bb[pb.start]=Ma[pb.end]=pb:(pb=Bb[Fd])?(delete Bb[pb.start],pb.unshift(oc),pb.start=kd,oc=Ma[kd])?(delete Ma[oc.end],kd=oc===pb?pb:oc.concat(pb),Bb[kd.start=oc.start]=Ma[kd.end=pb.end]=kd):Bb[pb.start]=Ma[pb.end]=pb:(pb=[oc],Bb[pb.start=kd]=Ma[pb.end=Fd]=pb)}),Ia(Ma,Bb),Ia(Bb,Ma),za.forEach(function(oc){Ta[0>oc?~oc:oc]||vb.push([oc])}),vb},s3=function(ba,za){for(var ta=0,Ia=ba.length;ta<Ia;){var Ta=ta+Ia>>>1;ba[Ta]<za?ta=Ta+1:Ia=Ta}return ta},Zga=function(ba){function za(He,
Xd){He.forEach(function(Ie){0>Ie&&(Ie=~Ie);var No=Ta[Ie];No?No.push(Xd):Ta[Ie]=[Xd]})}function ta(He,Xd){He.forEach(function(Ie){za(Ie,Xd)})}function Ia(He,Xd){"GeometryCollection"===He.type?He.geometries.forEach(function(Ie){Ia(Ie,Xd)}):He.type in Ma&&Ma[He.type](He.arcs,Xd)}var Ta={},Bb=ba.map(function(){return[]}),Ma={LineString:za,MultiLineString:ta,Polygon:ta,MultiPolygon:function(He,Xd){He.forEach(function(Ie){ta(Ie,Xd)})}};ba.forEach(Ia);for(var vb in Ta){ba=Ta[vb];for(var lb=ba.length,oc=
0;oc<lb;++oc)for(var pb=oc+1;pb<lb;++pb){var kd,Fd=ba[oc],Ge=ba[pb];(kd=Bb[Fd])[vb=s3(kd,Ge)]!==Ge&&kd.splice(vb,0,Ge);(kd=Bb[Ge])[vb=s3(kd,Fd)]!==Fd&&kd.splice(vb,0,Fd)}}return Bb},o3=function(ba,za){return ba<za?-1:ba>za?1:ba>=za?0:NaN},p3=function(ba){return 1===ba.length&&(ba=Wi(ba)),{left:function(za,ta,Ia,Ta){null==Ia&&(Ia=0);for(null==Ta&&(Ta=za.length);Ia<Ta;){var Bb=Ia+Ta>>>1;0>ba(za[Bb],ta)?Ia=Bb+1:Ta=Bb}return Ia},right:function(za,ta,Ia,Ta){null==Ia&&(Ia=0);for(null==Ta&&(Ta=za.length);Ia<
Ta;){var Bb=Ia+Ta>>>1;0<ba(za[Bb],ta)?Ta=Bb:Ia=Bb+1}return Ia}}};p3(o3);var bha=function(ba,za){return Bj(pj(Cj(ba),ba),za)},cha=function(ba,za){if(8<ba.length)return ba.map(function(Ia,Ta){return Ta});var ta=ba.map(function(Ia){return za.map(function(Ta){Ta=J(Ra(Ia),Ra(Ta));return Ta*Ta})});return Th(ba,za,ta)};d.interpolate=function(ba,za,ta){void 0===ta&&(ta={});var Ia=ta.maxSegmentLength;void 0===Ia&&(Ia=10);ta=ta.string;void 0===ta&&(ta=!0);var Ta=ia(ba,Ia);Ia=ia(za,Ia);var Bb=ob(Ta,Ia,ta);return!ta||
"string"!=typeof ba&&"string"!=typeof za?Bb:function(Ma){return 1E-4>Ma&&"string"==typeof ba?ba:1E-4>1-Ma&&"string"==typeof za?za:Bb(Ma)}};d.separate=Xi;d.combine=function(ba,za,ta){void 0===ta&&(ta={});var Ia=ta.maxSegmentLength;void 0===Ia&&(Ia=10);var Ta=ta.string;void 0===Ta&&(Ta=!0);ta=ta.single;void 0===ta&&(ta=!1);var Bb=Xi(za,ba,{maxSegmentLength:Ia,string:Ta,single:ta});return ta?function(Ma){return Bb(1-Ma)}:Bb.map(function(Ma){return function(vb){return Ma(1-vb)}})};d.interpolateAll=function(ba,
za,ta){void 0===ta&&(ta={});var Ia=ta.maxSegmentLength;void 0===Ia&&(Ia=10);var Ta=ta.string;void 0===Ta&&(Ta=!0);ta=ta.single;if(void 0===ta&&(ta=!1),!Array.isArray(ba)||!Array.isArray(za)||ba.length!==za.length||!ba.length)throw new TypeError("flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).");var Bb,Ma,vb=function(oc){return ia(oc,Ia)},
lb=ba.map(vb);vb=za.map(vb);return ta?(ba.every(function(oc){return"string"==typeof oc})&&(Bb=ba.slice(0)),za.every(function(oc){return"string"==typeof oc})&&(Ma=za.slice(0))):(Bb=ba.slice(0),Ma=za.slice(0)),Dj(lb,vb,{string:Ta,single:ta,t0:Bb,t1:Ma,match:!1})};d.splitPathString=function(ba){return gb((new n3(ba)).abs())};d.toPathString=ea;d.fromCircle=Yi;d.toCircle=function(ba,za,ta,Ia,Ta){var Bb=Yi(za,ta,Ia,ba,Ta);return function(Ma){return Bb(1-Ma)}};d.fromRect=Ej;d.toRect=function(ba,za,ta,Ia,
Ta,Bb){var Ma=Ej(za,ta,Ia,Ta,ba,Bb);return function(vb){return Ma(1-vb)}};Object.defineProperty(d,"__esModule",{value:!0})});var iha={},jha="function"===typeof Float32Array,kha=iha=function(d,k,n,b){if(!(0<=d&&1>=d&&0<=n&&1>=n))throw Error("bezier x values must be in [0, 1] range");if(d===k&&n===b)return mD;for(var e=jha?new Float32Array(11):Array(11),l=0;11>l;++l)e[l]=md(.1*l,d,n);return function(a){if(0===a)return 0;if(1===a)return 1;for(var f=0,m=1;10!==m&&e[m]<=a;++m)f+=.1;--m;m=f+(a-e[m])/(e[m+
1]-e[m])*.1;var q=3*(1-3*n+3*d)*m*m+2*(3*n-6*d)*m+3*d;if(.001<=q){for(f=0;4>f;++f){q=3*(1-3*n+3*d)*m*m+2*(3*n-6*d)*m+3*d;if(0===q)break;var r=md(m,d,n)-a;m-=r/q}a=m}else if(0===q)a=m;else{m=f;f+=.1;var u=0;do r=m+(f-m)/2,q=md(r,d,n)-a,0<q?f=r:m=r;while(1E-7<Math.abs(q)&&10>++u);a=r}return md(a,k,b)}},Ob="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;!function(){var d={},k={};!function(n,b){function e(){(this||Ob)._delay=0;(this||Ob)._endDelay=0;(this||Ob)._fill="none";
(this||Ob)._iterationStart=0;(this||Ob)._iterations=1;(this||Ob)._duration=0;(this||Ob)._playbackRate=1;(this||Ob)._direction="normal";(this||Ob)._easing="linear";(this||Ob)._easingFunction=z}function l(){return n.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function a(M,X,T){var fa=new e;return X&&(fa.fill="both",fa.duration="auto"),"number"!=typeof M||isNaN(M)?void 0!==M&&Object.getOwnPropertyNames(M).forEach(function(Ra){"auto"==M[Ra]||("number"==
typeof fa[Ra]||"duration"==Ra)&&("number"!=typeof M[Ra]||isNaN(M[Ra]))||"fill"==Ra&&-1==v.indexOf(M[Ra])||"direction"==Ra&&-1==y.indexOf(M[Ra])||"playbackRate"==Ra&&1!==M[Ra]&&n.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead.")||(fa[Ra]=M[Ra])}):fa.duration=M,fa}function f(M,X,T,fa){return 0>M||1<M||0>T||1<T?z:function(Ra){if(0>=Ra){var gb=0;return 0<M?gb=X/M:!X&&0<T&&(gb=fa/T),gb*Ra}if(1<=Ra)return gb=0,1>T?gb=(fa-1)/(T-1):1==T&&1>M&&(gb=(X-1)/
(M-1)),1+gb*(Ra-1);gb=0;for(var ea=1;gb<ea;){var aa=(gb+ea)/2,ia=3*M*(1-aa)*(1-aa)*aa+3*T*(1-aa)*aa*aa+aa*aa*aa;if(1E-5>Math.abs(Ra-ia))break;ia<Ra?gb=aa:ea=aa}return 3*X*(1-aa)*(1-aa)*aa+3*fa*(1-aa)*aa*aa+aa*aa*aa}}function m(M,X){return function(T){if(1<=T)return 1;var fa=1/M;return(T+=X*fa)-T%fa}}function q(M){N||(N=document.createElement("div").style);N.animationTimingFunction="";N.animationTimingFunction=M;var X=N.animationTimingFunction;if(""==X&&l())throw new TypeError(M+" is not a valid value for easing");
return X}function r(M){if("linear"==M)return z;var X=L.exec(M);return X?f.apply(this||Ob,X.slice(1).map(Number)):(X=S.exec(M))?m(Number(X[1]),G):(X=ha.exec(M))?m(Number(X[1]),{start:B,middle:C,end:G}[X[2]]):F[M]||z}function u(M,X,T){if(null==X)return qa;var fa=T.delay+M+T.endDelay;return X<Math.min(T.delay,fa)?D:X>=Math.min(T.delay+M,fa)?P:J}var v=["backwards","forwards","both","none"],y=["reverse","alternate","alternate-reverse"],z=function(M){return M};e.prototype={_setMember:function(M,X){(this||
Ob)["_"+M]=X;(this||Ob)._effect&&((this||Ob)._effect._timingInput[M]=X,(this||Ob)._effect._timing=n.normalizeTimingInput((this||Ob)._effect._timingInput),(this||Ob)._effect.activeDuration=n.calculateActiveDuration((this||Ob)._effect._timing),(this||Ob)._effect._animation&&(this||Ob)._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return(this||Ob)._playbackRate},set delay(M){this._setMember("delay",M)},get delay(){return(this||Ob)._delay},set endDelay(M){this._setMember("endDelay",
M)},get endDelay(){return(this||Ob)._endDelay},set fill(M){this._setMember("fill",M)},get fill(){return(this||Ob)._fill},set iterationStart(M){if((isNaN(M)||0>M)&&l())throw new TypeError("iterationStart must be a non-negative number, received: "+M);this._setMember("iterationStart",M)},get iterationStart(){return(this||Ob)._iterationStart},set duration(M){if("auto"!=M&&(isNaN(M)||0>M)&&l())throw new TypeError("duration must be non-negative or auto, received: "+M);this._setMember("duration",M)},get duration(){return(this||
Ob)._duration},set direction(M){this._setMember("direction",M)},get direction(){return(this||Ob)._direction},set easing(M){(this||Ob)._easingFunction=r(q(M));this._setMember("easing",M)},get easing(){return(this||Ob)._easing},set iterations(M){if((isNaN(M)||0>M)&&l())throw new TypeError("iterations must be non-negative, received: "+M);this._setMember("iterations",M)},get iterations(){return(this||Ob)._iterations}};var B=1,C=.5,G=0,F={ease:f(.25,.1,.25,1),"ease-in":f(.42,0,1,1),"ease-out":f(0,0,.58,
1),"ease-in-out":f(.42,0,.58,1),"step-start":m(1,B),"step-middle":m(1,C),"step-end":m(1,G)},N=null,L=/cubic-bezier\(\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*,\s*(-?\d+\.?\d*|-?\.\d+)\s*\)/,S=/steps\(\s*(\d+)\s*\)/,ha=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,qa=0,D=1,P=2,J=3;n.cloneTimingInput=function(M){if("number"==typeof M)return M;var X={},T;for(T in M)X[T]=M[T];return X};n.makeTiming=a;n.numericTimingToObject=function(M){return"number"==typeof M&&
(M=isNaN(M)?{duration:0}:{duration:M}),M};n.normalizeTimingInput=function(M,X){return M=n.numericTimingToObject(M),a(M,X)};n.calculateActiveDuration=function(M){return Math.abs((0===M.duration||0===M.iterations?0:M.duration*M.iterations)/M.playbackRate)};n.calculateIterationProgress=function(M,X,T){var fa=u(M,X,T);a:{var Ra=T.fill;switch(fa){case D:M="backwards"==Ra||"both"==Ra?0:null;break a;case J:M=X-T.delay;break a;case P:M="forwards"==Ra||"both"==Ra?M:null;break a;case qa:M=null;break a}M=void 0}if(null===
M)return null;X=T.duration;Ra=T.iterationStart;X=(0===X?fa!==D&&(Ra+=T.iterations):Ra+=M/X,Ra);Ra=X===1/0?T.iterationStart%1:X%1;M=(0!==Ra||fa!==P||0===T.iterations||0===M&&0!==T.duration||(Ra=1),Ra);Ra=fa===P&&T.iterations===1/0?1/0:1===M?Math.floor(X)-1:Math.floor(X);X=fa=T.direction;"normal"!==fa&&"reverse"!==fa&&("alternate-reverse"===fa&&(Ra+=1),X="normal",Ra!==1/0&&0!=Ra%2&&(X="reverse"));return T._easingFunction("normal"===X?M:1-M)};n.calculatePhase=u;n.normalizeEasing=q;n.parseEasingFunction=
r}(d);(function(n,b){function e(m){var q=[],r;for(r in m)if(!(r in["easing","offset","composite"])){var u=m[r];Array.isArray(u)||(u=[u]);for(var v,y=u.length,z=0;z<y;z++)v={},v.offset="offset"in m?m.offset:1==y?1:z/(y-1),"easing"in m&&(v.easing=m.easing),"composite"in m&&(v.composite=m.composite),v[r]=u[z],q.push(v)}return q.sort(function(B,C){return B.offset-C.offset}),q}var l={background:"backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundAttachment backgroundOrigin backgroundClip backgroundColor".split(" "),
border:"borderTopColor borderTopStyle borderTopWidth borderRightColor borderRightStyle borderRightWidth borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth".split(" "),borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius",
"borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:"fontFamily fontSize fontStyle fontVariant fontWeight lineHeight".split(" "),margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle",
"outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},a=document.createElementNS("http://www.w3.org/1999/xhtml","div");b={thin:"1px",medium:"3px",thick:"5px"};var f={borderBottomWidth:b,borderLeftWidth:b,borderRightWidth:b,borderTopWidth:b,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:b,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};
n.convertToArrayForm=e;n.normalizeKeyframes=function(m){function q(){var z=r.length;null==r[z-1].offset&&(r[z-1].offset=1);1<z&&null==r[0].offset&&(r[0].offset=0);for(var B=0,C=r[0].offset,G=1;G<z;G++){var F=r[G].offset;if(null!=F){for(var N=1;N<G-B;N++)r[B+N].offset=C+(F-C)*N/(G-B);B=G;C=F}}}if(null==m)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&m[Symbol.iterator]&&(m=Array.from(m));Array.isArray(m)||(m=e(m));var r=m.map(function(z){var B={},C;for(C in z){var G=z[C];if("offset"==
C){if(null!=G){if(G=Number(G),!isFinite(G))throw new TypeError("Keyframe offsets must be numbers.");if(0>G||1<G)throw new TypeError("Keyframe offsets must be between 0 and 1.");}}else if("composite"==C){if("add"==G||"accumulate"==G)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=G)throw new TypeError("Invalid composite mode "+G+".");}else G="easing"==C?n.normalizeEasing(G):""+G;var F=void 0,N=C,L=G;G=B;var S=N;if("display"!==
S&&0!==S.lastIndexOf("animation",0)&&0!==S.lastIndexOf("transition",0))if(S=l[N])for(F in a.style[N]=L,S)N=S[F],L=a.style[N],G[N]=N in f?f[N][L]||L:L;else G[N]=N in f?f[N][L]||L:L}return void 0==B.offset&&(B.offset=null),void 0==B.easing&&(B.easing="linear"),B});m=!0;for(var u=-1/0,v=0;v<r.length;v++){var y=r[v].offset;if(null!=y){if(y<u)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");u=y}else m=!1}return r=r.filter(function(z){return 0<=z.offset&&1>=z.offset}),
m||q(),r}})(d);(function(n){var b={};n.isDeprecated=function(e,l,a,f){f=f?"are":"is";var m=new Date;l=new Date(l);return l.setMonth(l.getMonth()+3),!(m<l&&(e in b||console.warn("Web Animations: "+e+" "+f+" deprecated and will stop working on "+l.toDateString()+". "+a),b[e]=!0,1))};n.deprecated=function(e,l,a,f){var m=f?"are":"is";if(n.isDeprecated(e,l,a,f))throw Error(e+" "+m+" no longer supported. "+a);}})(d);(function(){if(document.documentElement.animate){var n=document.documentElement.animate([],
0),b=!0;if(n&&(b=!1,"play currentTime pause reverse playbackRate cancel finish startTime playState".split(" ").forEach(function(e){void 0===n[e]&&(b=!0)})),!b)return}!function(e,l,a){function f(q){for(var r={},u=0;u<q.length;u++)for(var v in q[u])if("offset"!=v&&"easing"!=v&&"composite"!=v){var y={offset:q[u].offset,easing:q[u].easing,value:q[u][v]};r[v]=r[v]||[];r[v].push(y)}for(var z in r)if(q=r[z],0!=q[0].offset||1!=q[q.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",
message:"Partial keyframes are not supported"};return r}function m(q){var r=[],u;for(u in q)for(var v=q[u],y=0;y<v.length-1;y++){var z=y,B=y+1,C=v[z].offset,G=v[B].offset,F=C,N=G;0==y&&(F=-1/0,0==G&&(B=z));y==v.length-2&&(N=1/0,1==C&&(z=B));r.push({applyFrom:F,applyTo:N,startOffset:v[z].offset,endOffset:v[B].offset,easingFunction:e.parseEasingFunction(v[z].easing),property:u,interpolation:l.propertyInterpolation(u,v[z].value,v[B].value)})}return r.sort(function(L,S){return L.startOffset-S.startOffset}),
r}l.convertEffectInput=function(q){q=e.normalizeKeyframes(q);var r=f(q),u=m(r);return function(v,y){if(null!=y)u.filter(function(B){return y>=B.applyFrom&&y<B.applyTo}).forEach(function(B){var C=y-B.startOffset,G=B.endOffset-B.startOffset;C=0==G?0:B.easingFunction(C/G);l.apply(v,B.property,B.interpolation(C))});else for(var z in r)"offset"!=z&&"easing"!=z&&"composite"!=z&&l.clear(v,z)}}}(d,k);(function(e,l,a){function f(r){return r.replace(/-(.)/g,function(u,v){return v.toUpperCase()})}var m={};l.addPropertiesHandler=
function(r,u,v){for(var y=0;y<v.length;y++){var z=r,B=u,C=f(v[y]);m[C]=m[C]||[];m[C].push([z,B])}};var q={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",
bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",
textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};l.propertyInterpolation=function(r,u,v){var y=r;/-/.test(r)&&!e.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(y=f(r));"initial"!=u&&"initial"!=v||("initial"==u&&(u=q[y]),"initial"==v&&(v=q[y]));r=u==v?[]:m[y];for(y=0;r&&y<r.length;y++){var z=r[y][0](u),B=r[y][0](v);if(void 0!==z&&void 0!==B&&(z=
r[y][1](z,B))){var C=l.Interpolation.apply(null,z);return function(G){return 0==G?u:1==G?v:C(G)}}}return l.Interpolation(!1,!0,function(G){return G?v:u})}})(d,k);(function(e,l,a){function f(m){var q=e.calculateActiveDuration(m),r=function(u){return e.calculateIterationProgress(q,u,m)};return r._totalDuration=m.delay+q+m.endDelay,r}l.KeyframeEffect=function(m,q,r,u){var v,y=f(e.normalizeTimingInput(r)),z=l.convertEffectInput(q);q=function(){z(m,v)};return q._update=function(B){return null!==(v=y(B))},
q._clear=function(){z(m,null)},q._hasSameTarget=function(B){return m===B},q._target=m,q._totalDuration=y._totalDuration,q._id=u,q}})(d,k);(function(e,l){function a(z,B,C){C.enumerable=!0;C.configurable=!0;Object.defineProperty(z,B,C)}function f(z){(this||Ob)._element=z;(this||Ob)._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style;(this||Ob)._style=z.style;(this||Ob)._length=0;(this||Ob)._isAnimatedProperty={};var B=window;z=!(!z.namespaceURI||-1==z.namespaceURI.indexOf("/svg"))&&
(q in B||(B[q]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(B.navigator.userAgent)),B[q]);(this||Ob)._updateSvgTransformAttr=z;(this||Ob)._savedTransformAttr=null;for(z=0;z<(this||Ob)._style.length;z++)B=(this||Ob)._style[z],(this||Ob)._surrogateStyle[B]=(this||Ob)._style[B];this._updateIndices()}function m(z){if(!z._webAnimationsPatchedStyle){var B=new f(z);try{a(z,"style",{get:function(){return B}})}catch(C){z.style._set=function(G,F){z.style[G]=F},z.style._clear=function(G){z.style[G]=""}}z._webAnimationsPatchedStyle=
z.style}}var q="_webAnimationsUpdateSvgTransformAttr";l={cssText:1,length:1,parentRule:1};var r={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},u={removeProperty:1,setProperty:1};f.prototype={get cssText(){return(this||Ob)._surrogateStyle.cssText},set cssText(z){for(var B={},C=0;C<(this||Ob)._surrogateStyle.length;C++)B[(this||Ob)._surrogateStyle[C]]=!0;(this||Ob)._surrogateStyle.cssText=z;this._updateIndices();for(C=0;C<(this||Ob)._surrogateStyle.length;C++)B[(this||
Ob)._surrogateStyle[C]]=!0;for(var G in B)(this||Ob)._isAnimatedProperty[G]||(this||Ob)._style.setProperty(G,(this||Ob)._surrogateStyle.getPropertyValue(G))},get length(){return(this||Ob)._surrogateStyle.length},get parentRule(){return(this||Ob)._style.parentRule},_updateIndices:function(){for(;(this||Ob)._length<(this||Ob)._surrogateStyle.length;)Object.defineProperty(this||Ob,(this||Ob)._length,{configurable:!0,enumerable:!1,get:function(z){return function(){return(this||Ob)._surrogateStyle[z]}}((this||
Ob)._length)}),(this||Ob)._length++;for(;(this||Ob)._length>(this||Ob)._surrogateStyle.length;)(this||Ob)._length--,Object.defineProperty(this||Ob,(this||Ob)._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(z,B){(this||Ob)._style[z]=B;(this||Ob)._isAnimatedProperty[z]=!0;(this||Ob)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(z)&&(null==(this||Ob)._savedTransformAttr&&((this||Ob)._savedTransformAttr=(this||Ob)._element.getAttribute("transform")),(this||Ob)._element.setAttribute("transform",
e.transformToSvgMatrix(B)))},_clear:function(z){(this||Ob)._style[z]=(this||Ob)._surrogateStyle[z];(this||Ob)._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(z)&&((this||Ob)._savedTransformAttr?(this||Ob)._element.setAttribute("transform",(this||Ob)._savedTransformAttr):(this||Ob)._element.removeAttribute("transform"),(this||Ob)._savedTransformAttr=null);delete (this||Ob)._isAnimatedProperty[z]}};for(var v in r)f.prototype[v]=function(z,B){return function(){var C=(this||Ob)._surrogateStyle[z].apply((this||
Ob)._surrogateStyle,arguments);return B&&((this||Ob)._isAnimatedProperty[arguments[0]]||(this||Ob)._style[z].apply((this||Ob)._style,arguments),this._updateIndices()),C}}(v,v in u);for(var y in document.documentElement.style)y in l||y in r||function(z){a(f.prototype,z,{get:function(){return(this||Ob)._surrogateStyle[z]},set:function(B){(this||Ob)._surrogateStyle[z]=B;this._updateIndices();(this||Ob)._isAnimatedProperty[z]||((this||Ob)._style[z]=B)}})}(y);e.apply=function(z,B,C){m(z);z.style._set(e.propertyName(B),
C)};e.clear=function(z,B){z._webAnimationsPatchedStyle&&z.style._clear(e.propertyName(B))}})(k);(function(e){window.Element.prototype.animate=function(l,a){var f="";return a&&a.id&&(f=a.id),e.timeline._play(e.KeyframeEffect(this||Ob,l,a,f))}})(k);(function(e,l){function a(f,m,q){if("number"==typeof f&&"number"==typeof m)return f*(1-q)+m*q;if("boolean"==typeof f&&"boolean"==typeof m)return.5>q?f:m;if(f.length==m.length){for(var r=[],u=0;u<f.length;u++)r.push(a(f[u],m[u],q));return r}throw"Mismatched interpolation arguments "+
f+":"+m;}e.Interpolation=function(f,m,q){return function(r){return q(a(f,m,r))}}})(k);(function(e,l){l=function(){function a(f,m){for(var q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;4>r;r++)for(var u=0;4>u;u++)for(var v=0;4>v;v++)q[r][u]+=m[r][v]*f[v][u];return q}return function(f,m,q,r,u){for(var v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],y=0;4>y;y++)v[y][3]=u[y];for(y=0;3>y;y++)for(u=0;3>u;u++)v[3][y]+=f[u]*v[u][y];f=r[0];y=r[1];u=r[2];r=r[3];var z=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
z[0][0]=1-2*(y*y+u*u);z[0][1]=2*(f*y-u*r);z[0][2]=2*(f*u+y*r);z[1][0]=2*(f*y+u*r);z[1][1]=1-2*(f*f+u*u);z[1][2]=2*(y*u-f*r);z[2][0]=2*(f*u-y*r);z[2][1]=2*(y*u+f*r);z[2][2]=1-2*(f*f+y*y);v=a(v,z);r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];q[2]&&(r[2][1]=q[2],v=a(v,r));q[1]&&(r[2][1]=0,r[2][0]=q[0],v=a(v,r));q[0]&&(r[2][0]=0,r[1][0]=q[0],v=a(v,r));for(y=0;3>y;y++)for(u=0;3>u;u++)v[y][u]*=m[y];return 0==v[0][2]&&0==v[0][3]&&0==v[1][2]&&0==v[1][3]&&0==v[2][0]&&0==v[2][1]&&1==v[2][2]&&0==v[2][3]&&0==
v[3][2]&&1==v[3][3]?[v[0][0],v[0][1],v[1][0],v[1][1],v[3][0],v[3][1]]:v[0].concat(v[1],v[2],v[3])}}();e.composeMatrix=l;e.quat=function(a,f,m){var q=e.dot(a,f);q=Math.max(Math.min(q,1),-1);var r=[];if(1===q)r=a;else for(var u=Math.acos(q),v=1*Math.sin(m*u)/Math.sqrt(1-q*q),y=0;4>y;y++)r.push(a[y]*(Math.cos(m*u)-q*v)+f[y]*v);return r}})(k);(function(e,l,a){e.sequenceNumber=0;var f=function(m,q,r){(this||Ob).target=m;(this||Ob).currentTime=q;(this||Ob).timelineTime=r;(this||Ob).type="finish";(this||
Ob).bubbles=!1;(this||Ob).cancelable=!1;(this||Ob).currentTarget=m;(this||Ob).defaultPrevented=!1;(this||Ob).eventPhase=Event.AT_TARGET;(this||Ob).timeStamp=Date.now()};l.Animation=function(m){(this||Ob).id="";m&&m._id&&((this||Ob).id=m._id);(this||Ob)._sequenceNumber=e.sequenceNumber++;(this||Ob)._currentTime=0;(this||Ob)._startTime=null;(this||Ob)._paused=!1;(this||Ob)._playbackRate=1;(this||Ob)._inTimeline=!0;(this||Ob)._finishedFlag=!0;(this||Ob).onfinish=null;(this||Ob)._finishHandlers=[];(this||
Ob)._effect=m;(this||Ob)._inEffect=(this||Ob)._effect._update(0);(this||Ob)._idle=!0;(this||Ob)._currentTimePending=!1};l.Animation.prototype={_ensureAlive:function(){0>(this||Ob).playbackRate&&0===(this||Ob).currentTime?(this||Ob)._inEffect=(this||Ob)._effect._update(-1):(this||Ob)._inEffect=(this||Ob)._effect._update((this||Ob).currentTime);(this||Ob)._inTimeline||!(this||Ob)._inEffect&&(this||Ob)._finishedFlag||((this||Ob)._inTimeline=!0,l.timeline._animations.push(this||Ob))},_tickCurrentTime:function(m,
q){m!=(this||Ob)._currentTime&&((this||Ob)._currentTime=m,(this||Ob)._isFinished&&!q&&((this||Ob)._currentTime=0<(this||Ob)._playbackRate?(this||Ob)._totalDuration:0),this._ensureAlive())},get currentTime(){return(this||Ob)._idle||(this||Ob)._currentTimePending?null:(this||Ob)._currentTime},set currentTime(m){m=+m;isNaN(m)||(l.restart(),(this||Ob)._paused||null==(this||Ob)._startTime||((this||Ob)._startTime=(this||Ob)._timeline.currentTime-m/(this||Ob)._playbackRate),(this||Ob)._currentTimePending=
!1,(this||Ob)._currentTime!=m&&((this||Ob)._idle&&((this||Ob)._idle=!1,(this||Ob)._paused=!0),this._tickCurrentTime(m,!0),l.applyDirtiedAnimation(this||Ob)))},get startTime(){return(this||Ob)._startTime},set startTime(m){m=+m;isNaN(m)||(this||Ob)._paused||(this||Ob)._idle||((this||Ob)._startTime=m,this._tickCurrentTime(((this||Ob)._timeline.currentTime-(this||Ob)._startTime)*(this||Ob).playbackRate),l.applyDirtiedAnimation(this||Ob))},get playbackRate(){return(this||Ob)._playbackRate},set playbackRate(m){if(m!=
(this||Ob)._playbackRate){var q=(this||Ob).currentTime;(this||Ob)._playbackRate=m;(this||Ob)._startTime=null;"paused"!=(this||Ob).playState&&"idle"!=(this||Ob).playState&&((this||Ob)._finishedFlag=!1,(this||Ob)._idle=!1,this._ensureAlive(),l.applyDirtiedAnimation(this||Ob));null!=q&&((this||Ob).currentTime=q)}},get _isFinished(){return!(this||Ob)._idle&&(0<(this||Ob)._playbackRate&&(this||Ob)._currentTime>=(this||Ob)._totalDuration||0>(this||Ob)._playbackRate&&0>=(this||Ob)._currentTime)},get _totalDuration(){return(this||
Ob)._effect._totalDuration},get playState(){return(this||Ob)._idle?"idle":null==(this||Ob)._startTime&&!(this||Ob)._paused&&0!=(this||Ob).playbackRate||(this||Ob)._currentTimePending?"pending":(this||Ob)._paused?"paused":(this||Ob)._isFinished?"finished":"running"},_rewind:function(){if(0<=(this||Ob)._playbackRate)(this||Ob)._currentTime=0;else{if(!((this||Ob)._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");
(this||Ob)._currentTime=(this||Ob)._totalDuration}},play:function(){(this||Ob)._paused=!1;((this||Ob)._isFinished||(this||Ob)._idle)&&(this._rewind(),(this||Ob)._startTime=null);(this||Ob)._finishedFlag=!1;(this||Ob)._idle=!1;this._ensureAlive();l.applyDirtiedAnimation(this||Ob)},pause:function(){(this||Ob)._isFinished||(this||Ob)._paused||(this||Ob)._idle?(this||Ob)._idle&&(this._rewind(),(this||Ob)._idle=!1):(this||Ob)._currentTimePending=!0;(this||Ob)._startTime=null;(this||Ob)._paused=!0},finish:function(){(this||
Ob)._idle||((this||Ob).currentTime=0<(this||Ob)._playbackRate?(this||Ob)._totalDuration:0,(this||Ob)._startTime=(this||Ob)._totalDuration-(this||Ob).currentTime,(this||Ob)._currentTimePending=!1,l.applyDirtiedAnimation(this||Ob))},cancel:function(){(this||Ob)._inEffect&&((this||Ob)._inEffect=!1,(this||Ob)._idle=!0,(this||Ob)._paused=!1,(this||Ob)._finishedFlag=!0,(this||Ob)._currentTime=0,(this||Ob)._startTime=null,(this||Ob)._effect._update(null),l.applyDirtiedAnimation(this||Ob))},reverse:function(){(this||
Ob).playbackRate*=-1;this.play()},addEventListener:function(m,q){"function"==typeof q&&"finish"==m&&(this||Ob)._finishHandlers.push(q)},removeEventListener:function(m,q){"finish"==m&&(m=(this||Ob)._finishHandlers.indexOf(q),0<=m&&(this||Ob)._finishHandlers.splice(m,1))},_fireEvents:function(m){if((this||Ob)._isFinished){if(!(this||Ob)._finishedFlag){var q=new f(this||Ob,(this||Ob)._currentTime,m),r=(this||Ob)._finishHandlers.concat((this||Ob).onfinish?[(this||Ob).onfinish]:[]);setTimeout(function(){r.forEach(function(u){u.call(q.target,
q)})},0);(this||Ob)._finishedFlag=!0}}else(this||Ob)._finishedFlag=!1},_tick:function(m,q){(this||Ob)._idle||(this||Ob)._paused||(null==(this||Ob)._startTime?q&&((this||Ob).startTime=m-(this||Ob)._currentTime/(this||Ob).playbackRate):(this||Ob)._isFinished||this._tickCurrentTime((m-(this||Ob)._startTime)*(this||Ob).playbackRate));q&&((this||Ob)._currentTimePending=!1,this._fireEvents(m))},get _needsTick(){return(this||Ob).playState in{pending:1,running:1}||!(this||Ob)._finishedFlag},_targetAnimations:function(){var m=
(this||Ob)._effect._target;return m._activeAnimations||(m._activeAnimations=[]),m._activeAnimations},_markTarget:function(){var m=this._targetAnimations();-1===m.indexOf(this||Ob)&&m.push(this||Ob)},_unmarkTarget:function(){var m=this._targetAnimations(),q=m.indexOf(this||Ob);-1!==q&&m.splice(q,1)}}})(d,k);(function(e,l,a){function f(L){var S=y;y=[];L<N.currentTime&&(L=N.currentTime);N._animations.sort(m);N._animations=u(L,!0,N._animations)[0];S.forEach(function(ha){ha[1](L)});r()}function m(L,S){return L._sequenceNumber-
S._sequenceNumber}function q(){(this||Ob)._animations=[];(this||Ob).currentTime=window.performance&&performance.now?performance.now():0}function r(){G.forEach(function(L){L()});G.length=0}function u(L,S,ha){F=!0;C=!1;l.timeline.currentTime=L;B=!1;var qa=[],D=[],P=[],J=[];return ha.forEach(function(M){M._tick(L,S);M._inEffect?(D.push(M._effect),M._markTarget()):(qa.push(M._effect),M._unmarkTarget());M._needsTick&&(B=!0);var X=M._inEffect||M._needsTick;(M._inTimeline=X)?P.push(M):J.push(M)}),G.push.apply(G,
qa),G.push.apply(G,D),B&&requestAnimationFrame(function(){}),F=!1,[P,J]}var v=window.requestAnimationFrame,y=[],z=0;window.requestAnimationFrame=function(L){var S=z++;return 0==y.length&&v(f),y.push([S,L]),S};window.cancelAnimationFrame=function(L){y.forEach(function(S){S[0]==L&&(S[1]=function(){})})};q.prototype={_play:function(L){L._timing=e.normalizeTimingInput(L.timing);L=new l.Animation(L);return L._idle=!1,L._timeline=this||Ob,(this||Ob)._animations.push(L),l.restart(),l.applyDirtiedAnimation(L),
L}};var B=!1,C=!1;l.restart=function(){return B||(B=!0,requestAnimationFrame(function(){}),C=!0),C};l.applyDirtiedAnimation=function(L){F||(L._markTarget(),L=L._targetAnimations(),L.sort(m),u(l.timeline.currentTime,!1,L.slice())[1].forEach(function(S){S=N._animations.indexOf(S);-1!==S&&N._animations.splice(S,1)}),r())};var G=[],F=!1,N=new q;l.timeline=N})(d,k);(function(e,l){function a(v,y){for(var z=0,B=0;B<v.length;B++)z+=v[B]*y[B];return z}function f(v,y){return[v[0]*y[0]+v[4]*y[1]+v[8]*y[2]+v[12]*
y[3],v[1]*y[0]+v[5]*y[1]+v[9]*y[2]+v[13]*y[3],v[2]*y[0]+v[6]*y[1]+v[10]*y[2]+v[14]*y[3],v[3]*y[0]+v[7]*y[1]+v[11]*y[2]+v[15]*y[3],v[0]*y[4]+v[4]*y[5]+v[8]*y[6]+v[12]*y[7],v[1]*y[4]+v[5]*y[5]+v[9]*y[6]+v[13]*y[7],v[2]*y[4]+v[6]*y[5]+v[10]*y[6]+v[14]*y[7],v[3]*y[4]+v[7]*y[5]+v[11]*y[6]+v[15]*y[7],v[0]*y[8]+v[4]*y[9]+v[8]*y[10]+v[12]*y[11],v[1]*y[8]+v[5]*y[9]+v[9]*y[10]+v[13]*y[11],v[2]*y[8]+v[6]*y[9]+v[10]*y[10]+v[14]*y[11],v[3]*y[8]+v[7]*y[9]+v[11]*y[10]+v[15]*y[11],v[0]*y[12]+v[4]*y[13]+v[8]*y[14]+
v[12]*y[15],v[1]*y[12]+v[5]*y[13]+v[9]*y[14]+v[13]*y[15],v[2]*y[12]+v[6]*y[13]+v[10]*y[14]+v[14]*y[15],v[3]*y[12]+v[7]*y[13]+v[11]*y[14]+v[15]*y[15]]}function m(v){return 2*((v.deg||0)/360+(v.grad||0)/400+(v.turn||0))*Math.PI+(v.rad||0)}function q(v){switch(v.t){case "rotatex":return v=m(v.d[0]),[1,0,0,0,0,Math.cos(v),Math.sin(v),0,0,-Math.sin(v),Math.cos(v),0,0,0,0,1];case "rotatey":return v=m(v.d[0]),[Math.cos(v),0,-Math.sin(v),0,0,1,0,0,Math.sin(v),0,Math.cos(v),0,0,0,0,1];case "rotate":case "rotatez":return v=
m(v.d[0]),[Math.cos(v),Math.sin(v),0,0,-Math.sin(v),Math.cos(v),0,0,0,0,1,0,0,0,0,1];case "rotate3d":var y=v.d[0],z=v.d[1],B=v.d[2];v=m(v.d[3]);var C=y*y+z*z+B*B;0===C?(y=1,B=z=0):1!==C&&(C=Math.sqrt(C),y/=C,z/=C,B/=C);C=Math.sin(v/2);v=C*Math.cos(v/2);C*=C;return[1-2*(z*z+B*B)*C,2*(y*z*C+B*v),2*(y*B*C-z*v),0,2*(y*z*C-B*v),1-2*(y*y+B*B)*C,2*(z*B*C+y*v),0,2*(y*B*C+z*v),2*(z*B*C-y*v),1-2*(y*y+z*z)*C,0,0,0,0,1];case "scale":return[v.d[0],0,0,0,0,v.d[1],0,0,0,0,1,0,0,0,0,1];case "scalex":return[v.d[0],
0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "scaley":return[1,0,0,0,0,v.d[0],0,0,0,0,1,0,0,0,0,1];case "scalez":return[1,0,0,0,0,1,0,0,0,0,v.d[0],0,0,0,0,1];case "scale3d":return[v.d[0],0,0,0,0,v.d[1],0,0,0,0,v.d[2],0,0,0,0,1];case "skew":return y=m(v.d[0]),z=m(v.d[1]),[1,Math.tan(z),0,0,Math.tan(y),1,0,0,0,0,1,0,0,0,0,1];case "skewx":return v=m(v.d[0]),[1,0,0,0,Math.tan(v),1,0,0,0,0,1,0,0,0,0,1];case "skewy":return v=m(v.d[0]),[1,Math.tan(v),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case "translate":return y=v.d[0].px||
0,z=v.d[1].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,z,0,1];case "translatex":return y=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,0,0,1];case "translatey":return z=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,z,0,1];case "translatez":return B=v.d[0].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,B,1];case "translate3d":return y=v.d[0].px||0,z=v.d[1].px||0,B=v.d[2].px||0,[1,0,0,0,0,1,0,0,0,0,1,0,y,z,B,1];case "perspective":return[1,0,0,0,0,1,0,0,0,0,1,v.d[0].px?-1/v.d[0].px:0,0,0,0,1];case "matrix":return[v.d[0],v.d[1],0,0,v.d[2],
v.d[3],0,0,0,0,1,0,v.d[4],v.d[5],0,1];case "matrix3d":return v.d}}function r(v){return 0===v.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:v.map(q).reduce(f)}var u=function(){function v(C){return C[0][0]*C[1][1]*C[2][2]+C[1][0]*C[2][1]*C[0][2]+C[2][0]*C[0][1]*C[1][2]-C[0][2]*C[1][1]*C[2][0]-C[1][2]*C[2][1]*C[0][0]-C[2][2]*C[0][1]*C[1][0]}function y(C){var G=z(C);return[C[0]/G,C[1]/G,C[2]/G]}function z(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2])}function B(C,G,F,N){return[F*C[0]+N*G[0],F*C[1]+N*
G[1],F*C[2]+N*G[2]]}return function(C){C=[C.slice(0,4),C.slice(4,8),C.slice(8,12),C.slice(12,16)];if(1!==C[3][3])return null;for(var G=[],F=0;4>F;F++)G.push(C[F].slice());for(F=0;3>F;F++)G[F][3]=0;if(0===v(G))return null;var N=[];if(C[0][3]||C[1][3]||C[2][3]){N.push(C[0][3]);N.push(C[1][3]);N.push(C[2][3]);N.push(C[3][3]);var L=1/v(G),S=G[0][0],ha=G[0][1];F=G[0][2];var qa=G[1][0],D=G[1][1],P=G[1][2],J=G[2][0],M=G[2][1],X=G[2][2];L=[[(D*X-P*M)*L,(F*M-ha*X)*L,(ha*P-F*D)*L,0],[(P*J-qa*X)*L,(S*X-F*J)*
L,(F*qa-S*P)*L,0],[(qa*M-D*J)*L,(J*ha-S*M)*L,(S*D-ha*qa)*L,0]];S=[];for(ha=0;3>ha;ha++){for(qa=F=0;3>qa;qa++)F+=G[3][qa]*L[qa][ha];S.push(F)}G=(S.push(1),L.push(S),L);G=[[G[0][0],G[1][0],G[2][0],G[3][0]],[G[0][1],G[1][1],G[2][1],G[3][1]],[G[0][2],G[1][2],G[2][2],G[3][2]],[G[0][3],G[1][3],G[2][3],G[3][3]]];L=[];for(S=0;4>S;S++){for(F=ha=0;4>F;F++)ha+=N[F]*G[F][S];L.push(ha)}N=L}else N=[0,0,0,1];G=C[3].slice(0,3);L=[];L.push(C[0].slice(0,3));S=[];S.push(z(L[0]));L[0]=y(L[0]);ha=[];L.push(C[1].slice(0,
3));ha.push(a(L[0],L[1]));L[1]=B(L[1],L[0],1,-ha[0]);S.push(z(L[1]));L[1]=y(L[1]);ha[0]/=S[1];L.push(C[2].slice(0,3));ha.push(a(L[0],L[2]));L[2]=B(L[2],L[0],1,-ha[1]);ha.push(a(L[1],L[2]));L[2]=B(L[2],L[1],1,-ha[2]);S.push(z(L[2]));L[2]=y(L[2]);ha[1]/=S[2];ha[2]/=S[2];C=L[1];F=L[2];if(0>a(L[0],[C[1]*F[2]-C[2]*F[1],C[2]*F[0]-C[0]*F[2],C[0]*F[1]-C[1]*F[0]]))for(F=0;3>F;F++)S[F]*=-1,L[F][0]*=-1,L[F][1]*=-1,L[F][2]*=-1;var T,fa;C=L[0][0]+L[1][1]+L[2][2]+1;return 1E-4<C?(T=.5/Math.sqrt(C),fa=[(L[2][1]-
L[1][2])*T,(L[0][2]-L[2][0])*T,(L[1][0]-L[0][1])*T,.25/T]):L[0][0]>L[1][1]&&L[0][0]>L[2][2]?(T=2*Math.sqrt(1+L[0][0]-L[1][1]-L[2][2]),fa=[.25*T,(L[0][1]+L[1][0])/T,(L[0][2]+L[2][0])/T,(L[2][1]-L[1][2])/T]):L[1][1]>L[2][2]?(T=2*Math.sqrt(1+L[1][1]-L[0][0]-L[2][2]),fa=[(L[0][1]+L[1][0])/T,.25*T,(L[1][2]+L[2][1])/T,(L[0][2]-L[2][0])/T]):(T=2*Math.sqrt(1+L[2][2]-L[0][0]-L[1][1]),fa=[(L[0][2]+L[2][0])/T,(L[1][2]+L[2][1])/T,.25*T,(L[1][0]-L[0][1])/T]),[G,S,ha,fa,N]}}();e.dot=a;e.makeMatrixDecomposition=
function(v){return[u(r(v))]};e.transformListToMatrix=r})(k);(function(e){function l(q,r){var u=q.exec(r);if(u)return u=q.ignoreCase?u[0].toLowerCase():u[0],[u,r.substr(u.length)]}function a(q,r){r=r.replace(/^\s*/,"");if(q=q(r))return[q[0],q[1].replace(/^\s*/,"")]}function f(q,r){for(var u=q,v=r;u&&v;)u>v?u%=v:v%=u;return q*r/(u+v)}function m(q,r,u,v,y){for(var z=[],B=[],C=[],G=f(v.length,y.length),F=0;F<G;F++){var N=r(v[F%v.length],y[F%y.length]);if(!N)return;z.push(N[0]);B.push(N[1]);C.push(N[2])}return[z,
B,function(L){L=L.map(function(S,ha){return C[ha](S)}).join(u);return q?q(L):L}]}e.consumeToken=l;e.consumeTrimmed=a;e.consumeRepeated=function(q,r,u){q=a.bind(null,q);for(var v=[];;){var y=q(u);if(!y||(v.push(y[0]),u=y[1],!(y=l(r,u))||""==y[1]))return[v,u];u=y[1]}};e.consumeParenthesised=function(q,r){for(var u=0,v=0;v<r.length&&(!/\s|,/.test(r[v])||0!=u);v++)if("("==r[v])u++;else if(")"==r[v]&&(u--,0==u&&v++,0>=u))break;q=q(r.substr(0,v));return void 0==q?void 0:[q,r.substr(v)]};e.ignore=function(q){return function(r){r=
q(r);return r&&(r[0]=void 0),r}};e.optional=function(q,r){return function(u){return q(u)||[r,u]}};e.consumeList=function(q,r){for(var u=[],v=0;v<q.length;v++){r=e.consumeTrimmed(q[v],r);if(!r||""==r[0])return;void 0!==r[0]&&u.push(r[0]);r=r[1]}if(""==r)return u};e.mergeNestedRepeated=m.bind(null,null);e.mergeWrappedNestedRepeated=m;e.mergeList=function(q,r,u){for(var v=[],y=[],z=[],B=0,C=0;C<u.length;C++)if("function"==typeof u[C]){var G=u[C](q[B],r[B++]);v.push(G[0]);y.push(G[1]);z.push(G[2])}else!function(F){v.push(!1);
y.push(!1);z.push(function(){return u[F]})}(C);return[v,y,function(F){for(var N="",L=0;L<F.length;L++)N+=z[L](F[L]);return N}]}})(k);(function(e){function l(f){var m={inset:!1,lengths:[],color:null};if((f=e.consumeRepeated(function(q){var r=e.consumeToken(/^inset/i,q);return r?(m.inset=!0,r):(r=e.consumeLengthOrPercent(q))?(m.lengths.push(r[0]),r):(r=e.consumeColor(q),r?(m.color=r[0],r):void 0)},/^/,f))&&f[0].length)return[m,f[1]]}var a=function(f,m,q,r){function u(G){return{inset:G,color:[0,0,0,
0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var v=[],y=[],z=0;z<q.length||z<r.length;z++){var B=q[z]||u(r[z].inset),C=r[z]||u(q[z].inset);v.push(B);y.push(C)}return e.mergeNestedRepeated(f,m,v,y)}.bind(null,function(f,m){for(;f.lengths.length<Math.max(f.lengths.length,m.lengths.length);)f.lengths.push({px:0});for(;m.lengths.length<Math.max(f.lengths.length,m.lengths.length);)m.lengths.push({px:0});if(f.inset==m.inset&&!!f.color==!!m.color){for(var q,r=[],u=[[],0],v=[[],0],y=0;y<f.lengths.length;y++){var z=
e.mergeDimensions(f.lengths[y],m.lengths[y],2==y);u[0].push(z[0]);v[0].push(z[1]);r.push(z[2])}f.color&&m.color&&(m=e.mergeColors(f.color,m.color),u[1]=m[0],v[1]=m[1],q=m[2]);return[u,v,function(B){for(var C=f.inset?"inset ":" ",G=0;G<r.length;G++)C+=r[G](B[0][G])+" ";return q&&(C+=q(B[1])),C}]}},", ");e.addPropertiesHandler(function(f){if((f=e.consumeRepeated(l,/^,/,f))&&""==f[1])return f[0]},a,["box-shadow","text-shadow"])})(k);(function(e,l){function a(u){return u.toFixed(3).replace(/0+$/,"").replace(/\.$/,
"")}function f(u,v,y){return Math.min(v,Math.max(u,y))}function m(u){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(u))return Number(u)}function q(u,v){return function(y,z){return[y,z,function(B){return a(f(u,v,B))}]}}function r(u){u=u.trim().split(/\s*[\s,]\s*/);if(0!==u.length){for(var v=[],y=0;y<u.length;y++){var z=m(u[y]);if(void 0===z)return;v.push(z)}return v}}e.clamp=f;e.addPropertiesHandler(r,function(u,v){if(u.length==v.length)return[u,v,function(y){return y.map(a).join(" ")}]},["stroke-dasharray"]);
e.addPropertiesHandler(m,q(0,1/0),["border-image-width","line-height"]);e.addPropertiesHandler(m,q(0,1),["opacity","shape-image-threshold"]);e.addPropertiesHandler(m,function(u,v){if(0!=u)return q(0,1/0)(u,v)},["flex-grow","flex-shrink"]);e.addPropertiesHandler(m,function(u,v){return[u,v,function(y){return Math.round(f(1,1/0,y))}]},["orphans","widows"]);e.addPropertiesHandler(m,function(u,v){return[u,v,Math.round]},["z-index"]);e.parseNumber=m;e.parseNumberList=r;e.mergeNumbers=function(u,v){return[u,
v,a]};e.numberToString=a})(k);(function(e,l){e.addPropertiesHandler(String,function(a,f){if("visible"==a||"visible"==f)return[0,1,function(m){return 0>=m?a:1<=m?f:"visible"}]},["visibility"])})(k);(function(e,l){function a(q){q=q.trim();m.fillStyle="#000";m.fillStyle=q;var r=m.fillStyle;if(m.fillStyle="#fff",m.fillStyle=q,r==m.fillStyle)return m.fillRect(0,0,1,1),q=m.getImageData(0,0,1,1).data,m.clearRect(0,0,1,1),r=q[3]/255,[q[0]*r,q[1]*r,q[2]*r,r]}function f(q,r){return[q,r,function(u){if(u[3])for(var v=
0;3>v;v++)u[v]=Math.round(Math.max(0,Math.min(255,u[v]/u[3])));return u[3]=e.numberToString(e.clamp(0,1,u[3])),"rgba("+u.join(",")+")"}]}l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=l.height=1;var m=l.getContext("2d");e.addPropertiesHandler(a,f,"background-color border-bottom-color border-left-color border-right-color border-top-color color fill flood-color lighting-color outline-color stop-color stroke text-decoration-color".split(" "));e.consumeColor=e.consumeParenthesised.bind(null,
a);e.mergeColors=f})(k);(function(e,l){function a(y){function z(){var L=N.exec(y);F=L?L[0]:void 0}function B(){if("("!==F){var L=Number(F);return z(),L}z();L=G();return")"!==F?NaN:(z(),L)}function C(){for(var L=B();"*"===F||"/"===F;){var S=F;z();var ha=B();"*"===S?L*=ha:L/=ha}return L}function G(){for(var L=C();"+"===F||"-"===F;){var S=F;z();var ha=C();"+"===S?L+=ha:L-=ha}return L}var F,N=/([\+\-\w\.]+|[\(\)\*\/])/g;return z(),G()}function f(y,z){if("0"==(z=z.trim().toLowerCase())&&0<="px".search(y))return{px:0};
if(/^[^(]*$|^calc/.test(z)){z=z.replace(/calc\(/g,"(");var B={};z=z.replace(y,function(L){return B[L]=null,"U"+L});y="U("+y.source+")";for(var C=z.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+y,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),G=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],F=0;F<G.length;)G[F].test(C)?(C=C.replace(G[F],"$1"),F=0):F++;if("D"==C){for(var N in B){C=a(z.replace(new RegExp("U"+N,"g"),"").replace(new RegExp(y,"g"),"*0"));if(!isFinite(C))return;
B[N]=C}return B}}}function m(y,z){return q(y,z,!0)}function q(y,z,B){var C,G=[];for(C in y)G.push(C);for(C in z)0>G.indexOf(C)&&G.push(C);return y=G.map(function(F){return y[F]||0}),z=G.map(function(F){return z[F]||0}),[y,z,function(F){var N=F.map(function(L,S){return 1==F.length&&B&&(L=Math.max(L,0)),e.numberToString(L)+G[S]}).join(" + ");return 1<F.length?"calc("+N+")":N}]}var r=f.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc/g);l=f.bind(null,/px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|%/g);
var u=f.bind(null,/deg|rad|grad|turn/g);e.parseLength=r;e.parseLengthOrPercent=l;e.consumeLengthOrPercent=e.consumeParenthesised.bind(null,l);e.parseAngle=u;e.mergeDimensions=q;r=e.consumeParenthesised.bind(null,r);r=e.consumeRepeated.bind(void 0,r,/^/);var v=e.consumeRepeated.bind(void 0,r,/^,/);e.consumeSizePairList=v;r=e.mergeNestedRepeated.bind(void 0,m," ");u=e.mergeNestedRepeated.bind(void 0,r,",");e.mergeNonNegativeSizePair=r;e.addPropertiesHandler(function(y){if((y=v(y))&&""==y[1])return y[0]},
u,["background-size"]);e.addPropertiesHandler(l,m,"border-bottom-width border-image-width border-left-width border-right-width border-top-width flex-basis font-size height line-height max-height max-width outline-width width".split(" "));e.addPropertiesHandler(l,q,"border-bottom-left-radius border-bottom-right-radius border-top-left-radius border-top-right-radius bottom left letter-spacing margin-bottom margin-left margin-right margin-top min-height min-width outline-offset padding-bottom padding-left padding-right padding-top perspective right shape-margin stroke-dashoffset text-indent top vertical-align word-spacing".split(" "))})(k);
(function(e,l){function a(m){return e.consumeLengthOrPercent(m)||e.consumeToken(/^auto/,m)}function f(m){if((m=e.consumeList([e.ignore(e.consumeToken.bind(null,/^rect/)),e.ignore(e.consumeToken.bind(null,/^\(/)),e.consumeRepeated.bind(null,a,/^,/),e.ignore(e.consumeToken.bind(null,/^\)/))],m))&&4==m[0].length)return m[0]}l=e.mergeWrappedNestedRepeated.bind(null,function(m){return"rect("+m+")"},function(m,q){return"auto"==m||"auto"==q?[!0,!1,function(r){r=r?m:q;if("auto"==r)return"auto";r=e.mergeDimensions(r,
r);return r[2](r[0])}]:e.mergeDimensions(m,q)},", ");e.parseBox=f;e.mergeBoxes=l;e.addPropertiesHandler(f,l,["clip"])})(k);(function(e,l){function a(C){return function(G){var F=0;return C.map(function(N){return N===v?G[F++]:N})}}function f(C){return C}function m(C){if("none"==(C=C.toLowerCase().trim()))return[];for(var G,F=/\s*(\w+)\(([^)]*)\)/g,N=[],L=0;(G=F.exec(C))&&G.index==L;){L=G.index+G[0].length;var S=G[1],ha=B[S];if(!ha)break;G=G[2].split(",");ha=ha[0];if(ha.length<G.length)break;for(var qa=
[],D=0;D<ha.length;D++){var P=G[D];var J=ha[D];if(void 0===(P=P?{A:function(M){return"0"==M.trim()?z:e.parseAngle(M)},N:e.parseNumber,T:e.parseLengthOrPercent,L:e.parseLength}[J.toUpperCase()](P):{a:z,n:qa[0],t:y}[J]))return;qa.push(P)}if(N.push({t:S,d:qa}),F.lastIndex==C.length)return N}}function q(C){return C.toFixed(6).replace(".000000","")}function r(C,G){if(C.decompositionPair!==G){C.decompositionPair=G;var F=e.makeMatrixDecomposition(C)}if(G.decompositionPair!==C){G.decompositionPair=C;var N=
e.makeMatrixDecomposition(G)}return null==F[0]||null==N[0]?[[!1],[!0],function(L){return L?G[0].d:C[0].d}]:(F[0].push(0),N[0].push(1),[F,N,function(L){var S=e.quat(F[0][3],N[0][3],L[5]);return e.composeMatrix(L[0],L[1],L[2],S,L[4]).map(q).join(",")}])}function u(C){return C.replace(/(x|y|z|3d)?$/,"3d")}var v=null,y={px:0},z={deg:0},B={matrix:["NNNNNN",[v,v,0,0,v,v,0,0,0,0,1,0,v,v,0,1],f],matrix3d:["NNNNNNNNNNNNNNNN",f],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],
scale:["Nn",a([v,v,1]),f],scalex:["N",a([v,1,1]),a([v,1])],scaley:["N",a([1,v,1]),a([1,v])],scalez:["N",a([1,1,v])],scale3d:["NNN",f],skew:["Aa",null,f],skewx:["A",null,a([v,z])],skewy:["A",null,a([z,v])],translate:["Tt",a([v,v,y]),f],translatex:["T",a([v,y,y]),a([v,y])],translatey:["T",a([y,v,y]),a([y,v])],translatez:["L",a([y,y,v])],translate3d:["TTL",f]};e.addPropertiesHandler(m,function(C,G){var F=e.makeMatrixDecomposition&&!0,N=!1;if(!C.length||!G.length){C.length||(N=!0,C=G,G=[]);for(var L=
0;L<C.length;L++){var S=C[L].t,ha=C[L].d,qa="scale"==S.substr(0,5)?1:0;G.push({t:S,d:ha.map(function(ea){if("number"==typeof ea)return qa;var aa={},ia;for(ia in ea)aa[ia]=qa;return aa})})}}ha=[];var D=[],P=[];if(C.length!=G.length){if(!F)return;var J=r(C,G);ha=[J[0]];D=[J[1]];P=[["matrix",[J[2]]]]}else for(L=0;L<C.length;L++){S=C[L].t;var M=G[L].t,X=C[L].d,T=G[L].d;J=B[S];var fa=B[M];if("perspective"==S&&"perspective"==M||!("matrix"!=S&&"matrix3d"!=S||"matrix"!=M&&"matrix3d"!=M)){if(!F)return;J=r([C[L]],
[G[L]]);ha.push(J[0]);D.push(J[1]);P.push(["matrix",[J[2]]])}else{if(S!=M)if(J[2]&&fa[2]&&S.replace(/[xy]/,"")==M.replace(/[xy]/,""))S=S.replace(/[xy]/,""),X=J[2](X),T=fa[2](T);else{if(!J[1]||!fa[1]||u(S)!=u(M)){if(!F)return;J=r(C,G);ha=[J[0]];D=[J[1]];P=[["matrix",[J[2]]]];break}S=u(S);X=J[1](X);T=fa[1](T)}fa=[];M=[];for(var Ra=[],gb=0;gb<X.length;gb++)J=("number"==typeof X[gb]?e.mergeNumbers:e.mergeDimensions)(X[gb],T[gb]),fa[gb]=J[0],M[gb]=J[1],Ra.push(J[2]);ha.push(fa);D.push(M);P.push([S,Ra])}}N&&
(C=ha,ha=D,D=C);return[ha,D,function(ea){return ea.map(function(aa,ia){aa=aa.map(function(Aa,ob){return P[ia][1][ob](Aa)}).join(",");return"matrix"==P[ia][0]&&16==aa.split(",").length&&(P[ia][0]="matrix3d"),P[ia][0]+"("+aa+")"}).join(" ")}]},["transform"]);e.transformToSvgMatrix=function(C){C=e.transformListToMatrix(m(C));return"matrix("+q(C[0])+" "+q(C[1])+" "+q(C[4])+" "+q(C[5])+" "+q(C[12])+" "+q(C[13])+")"}})(k);(function(e){function l(a){return a=100*Math.round(a/100),a=e.clamp(100,900,a),400===
a?"normal":700===a?"bold":String(a)}e.addPropertiesHandler(function(a){a=Number(a);if(!(isNaN(a)||100>a||900<a||0!=a%100))return a},function(a,f){return[a,f,l]},["font-weight"])})(k);(function(e){function l(r){return e.consumeToken(/^(left|center|right|top|bottom)\b/i,r)||e.consumeLengthOrPercent(r)}function a(r,u){if((u=e.consumeRepeated(l,/^/,u))&&""==u[1]&&(u=u[0],u[0]=u[0]||"center",u[1]=u[1]||"center",3==r&&(u[2]=u[2]||{px:0}),u.length==r)){if(/top|bottom/.test(u[0])||/left|right/.test(u[1]))r=
u[0],u[0]=u[1],u[1]=r;if(/left|right|center|Object/.test(u[0])&&/top|bottom|center|Object/.test(u[1]))return u.map(function(v){return"object"==typeof v?v:m[v]})}}function f(r){if(r=e.consumeRepeated(l,/^/,r)){for(var u=r[0],v=[{"%":50},{"%":50}],y=0,z=!1,B=0;B<u.length;B++){var C=u[B];if("string"==typeof C)z=/bottom|right/.test(C),y={left:0,right:0,center:y,top:1,bottom:1}[C],v[y]=m[C],"center"==C&&y++;else{if(z){z=void 0;var G={};for(z in C)G[z]=-C[z];C=G;C["%"]=(C["%"]||0)+100}v[y]=C;y++;z=!1}}return[v,
r[1]]}}var m={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},q=e.mergeNestedRepeated.bind(null,e.mergeDimensions," ");e.addPropertiesHandler(a.bind(null,3),q,["transform-origin"]);e.addPropertiesHandler(a.bind(null,2),q,["perspective-origin"]);e.consumePosition=f;e.mergeOffsetList=q;q=e.mergeNestedRepeated.bind(null,q,", ");e.addPropertiesHandler(function(r){if((r=e.consumeRepeated(f,/^,/,r))&&""==r[1])return r[0]},q,["background-position","object-position"])})(k);(function(e){var l=
e.consumeParenthesised.bind(null,e.parseLengthOrPercent),a=e.consumeRepeated.bind(void 0,l,/^/),f=e.mergeNestedRepeated.bind(void 0,e.mergeDimensions," "),m=e.mergeNestedRepeated.bind(void 0,f,",");e.addPropertiesHandler(function(q){var r=e.consumeToken(/^circle/,q);return r&&r[0]?["circle"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),l,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],r[1])):(r=e.consumeToken(/^ellipse/,
q))&&r[0]?["ellipse"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),a,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],r[1])):(q=e.consumeToken(/^polygon/,q))&&q[0]?["polygon"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),e.optional(e.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),e.consumeSizePairList,e.ignore(e.consumeToken.bind(void 0,/^\)/))],q[1])):void 0},function(q,r){if(q[0]===
r[0])return"circle"==q[0]?e.mergeList(q.slice(1),r.slice(1),["circle(",e.mergeDimensions," at ",e.mergeOffsetList,")"]):"ellipse"==q[0]?e.mergeList(q.slice(1),r.slice(1),["ellipse(",e.mergeNonNegativeSizePair," at ",e.mergeOffsetList,")"]):"polygon"==q[0]&&q[1]==r[1]?e.mergeList(q.slice(2),r.slice(2),["polygon(",q[1],m,")"]):void 0},["shape-outside"])})(k);(function(e,l){function a(q,r){r.concat([q]).forEach(function(u){u in document.documentElement.style&&(f[q]=u);m[u]=q})}var f={},m={};a("transform",
["webkitTransform","msTransform"]);a("transformOrigin",["webkitTransformOrigin"]);a("perspective",["webkitPerspective"]);a("perspectiveOrigin",["webkitPerspectiveOrigin"]);e.propertyName=function(q){return f[q]||q};e.unprefixedPropertyName=function(q){return m[q]||q}})(k)})();(function(){if(void 0===document.createElement("div").animate([]).oncancel){var n=window.performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};var b=function(l,a,f){(this||Ob).target=
l;(this||Ob).currentTime=a;(this||Ob).timelineTime=f;(this||Ob).type="cancel";(this||Ob).bubbles=!1;(this||Ob).cancelable=!1;(this||Ob).currentTarget=l;(this||Ob).defaultPrevented=!1;(this||Ob).eventPhase=Event.AT_TARGET;(this||Ob).timeStamp=Date.now()},e=window.Element.prototype.animate;window.Element.prototype.animate=function(l,a){l=e.call(this||Ob,l,a);l._cancelHandlers=[];l.oncancel=null;var f=l.cancel;l.cancel=function(){f.call(this||Ob);var r=new b(this||Ob,null,n()),u=(this||Ob)._cancelHandlers.concat((this||
Ob).oncancel?[(this||Ob).oncancel]:[]);setTimeout(function(){u.forEach(function(v){v.call(r.target,r)})},0)};var m=l.addEventListener;l.addEventListener=function(r,u){"function"==typeof u&&"cancel"==r?(this||Ob)._cancelHandlers.push(u):m.call(this||Ob,r,u)};var q=l.removeEventListener;return l.removeEventListener=function(r,u){"cancel"==r?(r=(this||Ob)._cancelHandlers.indexOf(u),0<=r&&(this||Ob)._cancelHandlers.splice(r,1)):q.call(this||Ob,r,u)},l}}})();(function(n){var b=document.documentElement,
e=null,l=!1;try{var a="0"==getComputedStyle(b).getPropertyValue("opacity")?"1":"0";e=b.animate({opacity:[a,a]},{duration:1});e.currentTime=0;l=getComputedStyle(b).getPropertyValue("opacity")==a}catch(m){}finally{e&&e.cancel()}if(!l){var f=window.Element.prototype.animate;window.Element.prototype.animate=function(m,q){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&m[Symbol.iterator]&&(m=Array.from(m)),Array.isArray(m)||null===m||(m=n.convertToArrayForm(m)),f.call(this||Ob,m,q)}}})(d)}();
var Fe=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js");Fe.convertToSvgEasing=function(d){for(var k in Fe.easings)if(Fe.easings[k]===d){if(k.includes("inOut"))return k.replace("inOut","").toLowerCase()+"InOut";if(k.includes("out"))return k.replace("out","").toLowerCase()+"Out";if(k.includes("in"))return k.replace("in","").toLowerCase()+"In"}};Fe.stringToEasing=tp;Fe.obj=lf;Fe.promise=oe;Fe.fun=Zk;Fe.num=Gk;Fe.properties=Gp;Fe.arr=Qe;Fe.string=Hg;Fe.Color=xf;Fe.styleProps=
Bi;Fe.addPathAttributes=$r;Fe.addSvgAttributes=Vw;Fe.flubber=eR;Fe.Bezier=kha;Fe.ShadowObject=kr;var lr=wa("aa",{inQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",inCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",inQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",inQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",inSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",inExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",inCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",inBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",
outQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",outCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",outQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",outQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",outSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",outExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",outCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",outBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",inOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",inOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",
inOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",inOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",inOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)",inOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",inOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",inOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",linear:"cubic-bezier(0.5, 0.5, 0.5, 0.5)"});Fe.easings=lr;Fe.easings=lr;Fe.easings=lr;Fe.stringToEasing=tp;Fe.stringToEasing=tp;var gK=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),
n=k.hasOwnProperty("AnimationQueue")&&"function"===typeof k.AnimationQueue?k.AnimationQueue:k.AnimationQueue=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.morph=b;this.animations=[]}},{key:"maskedProps",value:function(b){return 0<this.animations.length?Fe.obj.merge(this.animations.map(function(e){return e.getAnimationProps(b)[0]})):{}}},
{key:"animationsActive",get:function(){return!0}},{key:"registerAnimation",value:function(b){var e=this,l=new Fe.PropertyAnimation(this,this.morph,b);this.morph.makeDirty();return this.morph.withMetaDo({animation:l},function(){var a=l.affectsMorph&&e.animations.find(function(m){return m.equals(l)});if(!a){var f;if(f=e.animations.find(function(m){return m.canMerge(l)}))return f.mergeWith(l),f;if(l.affectsMorph)return l.assignProps(),e.animations.push(l),l}return a})}},{key:"startAnimationsFor",value:function(b){for(var e=
0;e<this.animations.length;e++)this.animations[e].start(b)}},{key:"startSvgAnimationsFor",value:function(b,e){this.animations.forEach(function(l){return l.startSvg(b,e)})}},{key:"removeAnimation",value:function(b){Fe.arr.remove(this.animations,b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AnimationQueue"}}],k,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2443,end:3747})}(void 0);Fe.AnimationQueue=gK;Fe.AnimationQueue=gK;Fe.AnimationQueue=gK;var hR=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/animations.js"),n=k.hasOwnProperty("PropertyAnimation")&&"function"===typeof k.PropertyAnimation?k.PropertyAnimation:k.PropertyAnimation=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){var a=this;this.queue=b;this.morph=e;if(e.isPath&&"fill"in l){var f=e.fill||Fe.Color.transparent,m=l.fill;l.customTween=Fe.fun.compose(function(y){e.fill=f.interpolate(y,m);return y},l.customTween||function(y){});delete l.fill;e.fill=f}if("dropShadow"in l){var q=e.dropShadow||new Fe.ShadowObject({blur:0,distance:0,spread:0}),r=l.dropShadow;l.customTween=Fe.fun.compose(function(y){e.dropShadow=q.interpolate(y,r||new Fe.ShadowObject({blur:0,
distance:0,spread:0}));1==y&&(e.dropShadow=r);return y},l.customTween||function(y){});delete l.dropShadow;e.dropShadow=q}if("visible"in l&&l.visible!=e.visible){var u=void 0===b.originalOpacity?e.opacity:b.originalOpacity;b.originalOpacity=u;var v=l.visible;l.customTween=Fe.fun.compose(function(y){if(a._otherVisibleTransformationInProgress)return y;0==y&&1==v&&(e.visible=!0);e.opacity=v?Fe.num.interpolate(y,0,u):Fe.num.interpolate(y,u,0);1==y&&(e.visible=v,e.opacity=u,delete b.originalOpacity);return y},
l.customTween||function(y){});this.queue.animations.forEach(function(y){return y._otherVisibleTransformationInProgress=!0});delete l.visible}this.config=this.convertBounds(l);this.needsAnimation={svg:e.isSvgMorph,path:e.isPath};this.capturedProperties=Fe.obj.select(this.morph,this.propsToCapture)}},{key:"propsToCapture",get:function(){return["fill","origin"]}},{key:"asPromise",value:function(){var b=this;return this._promise||(this._promise=new Promise(function(e,l){b.resolveCallback=function(){b.onFinish(b);
b.subAnimations?b.subAnimations.then(e):e(b.morph)}}))}},{key:"finish",value:function(b){var e=this;this.config.scale&&this.morph.whenRendered().then(function(){return e.morph.withAllSubmorphsDo(function(l){return l.isText&&l.invalidateTextLayout(!0,!0)})});this.needsAnimation[b]=!1;Fe.arr.any(Fe.obj.values(this.needsAnimation),Boolean)||(this.queue.removeAnimation(this),this.resolveCallback?this.resolveCallback():this.onFinish())}},{key:"convertBounds",value:function(b){var e=b.bounds,l=b.origin,
a=b.rotation,f=b.scale;l=l||this.morph.origin;a=a||this.morph.rotation;f=f||this.morph.scale;return e?Object.assign({},Fe.obj.dissoc(b,["bounds"]),{origin:l,rotation:a,scale:f,position:e.topLeft().addPt(l),extent:e.extent()}):b}},{key:"equals",value:function(b){return!this.config.customTween&&!b.config.customTweem&&Fe.obj.equals(this.animatedProps,b.animatedProps)}},{key:"canMerge",value:function(b){return this.easing==b.easing&&this.duration==b.duration}},{key:"mergeWith",value:function(b){var e=
this.config.customTween;Object.assign(this.morph,b.animatedProps);Object.assign(this.config,b.config);this.config.customTween=function(l){e&&e(l);b.config.customTween&&b.config.customTween(l);return l};this.afterProps=this.gatherAnimationProps()}},{key:"affectsMorph",get:function(){var b=this;return!!this.config.customTween||Fe.properties.any(this.animatedProps,function(e,l){return!Fe.obj.equals(e[l],b.morph[l])})}},{key:"animatedProps",get:function(){return Fe.obj.dissoc(this.config,["customTween",
"easing","onFinish","duration"])}},{key:"easing",get:function(){return this.config.easing||Fe.easings.inOutQuad}},{key:"onFinish",get:function(){return this.config.onFinish||function(){}}},{key:"setonFinish",value:function(b){this.config.onFinish=b}},{key:"duration",get:function(){return this.config.duration||1E3}},{key:"getChangedProps",value:function(b,e){var l=[],a;for(a in b)Fe.obj.equals(e[a],b[a])&&l.push(a);return[Fe.obj.dissoc(b,l),Fe.obj.dissoc(e,l)]}},{key:"getAnimationProps",value:function(b){var e=
$jscomp.makeIterator(this.getChangedProps(this.beforeProps[b],this.afterProps[b])),l=e.next().value;e=e.next().value;var a=this.capturedProperties.fill,f=this.config.fill;this.morph.isPolygon&&"css"==b&&(a=f=!1,delete l.background,delete e.background,delete l.backgroundImage,delete e.backgroundImage);"none"==l.filter&&e.boxShadow&&(delete l.filter,l.boxShadow="none");"none"==e.filter&&l.boxShadow&&(delete e.filter,e.boxShadow="none");a&&f&&(a.isGradient||f.isGradient)&&(this.tweenGradient=this.interpolate("gradient",
a,f));b=$jscomp.makeIterator(Fe.arr.union(Fe.obj.keys(l),Fe.obj.keys(e)));for(a=b.next();!a.done;a=b.next())a=a.value,a in l||(l[a]=e[a]),a in e||(e[a]=l[a]);return[Fe.obj.isEmpty(l)?!1:l,Fe.obj.isEmpty(e)?!1:e]}},{key:"gatherAnimationProps",value:function(){var b=this.morph,e=b.isSvgMorph,l=b.isPath,a=b.isPolygon,f={};f.css=Fe.styleProps(this.morph);e&&(f.svg=Fe.addSvgAttributes(b,{}));l&&(f.path=Fe.addPathAttributes(b,{}));a&&(f.polygon=Fe.addPathAttributes(b,{}));return f}},{key:"assignProps",
value:function(){var b=this.morph.styleClasses;this.beforeProps=this.gatherAnimationProps();Object.assign(this.morph,this.animatedProps);this.afterProps=this.gatherAnimationProps();this.config.styleClasses&&(this.morph._animatedStyleClasses={removed:Fe.arr.withoutAll(b,this.morph.styleClasses),added:Fe.arr.withoutAll(this.morph.styleClasses,b),animation:this})}},{key:"interpolate",value:function(b,e,l){var a=this;switch(b){case "scrollTop":case "scrollLeft":return function(f){return Fe.num.interpolate(f,
e,l)};case "d":return Fe.flubber.interpolate(e,l);case "stroke-width":return function(f){return Fe.num.interpolate(f,e,l)};case "stroke":return function(f){return Fe.Color.fromString(e).interpolate(f,Fe.Color.fromString(l),a.morph.bounds())};case "gradient":return function(f){return e.interpolate(f,l,a.morph.bounds())};case "fill":return e=Fe.Color.fromString(e),l=Fe.Color.fromString(l),function(f){return e.interpolate(f,l)}}}},{key:"startSvg",value:function(b,e){var l=this;if(this.needsAnimation[e]){this.needsAnimation[e]=
!1;var a=$jscomp.makeIterator(this.getAnimationProps(e)),f=a.next().value;a=a.next().value;var m={},q=Fe.stringToEasing(this.easing),r;for(r in f)m[r]=this.interpolate(r,f[r],a[r]);var u,v=function(y){u||(u=y);y-=u;if(1<y/l.duration)return l.finish(e);for(var z in m)m[z]&&b.setAttribute(z,m[z](q(y/l.duration)));requestAnimationFrame(v)};requestAnimationFrame(v)}}},{key:"start",value:function(b){if(!this.active)try{this.active=!0;var e=$jscomp.makeIterator(this.getAnimationProps("css")),l=e.next().value,
a=e.next().value;b&&this.tween(b,l,a);if(this.config.origin){var f=this.capturedProperties.origin,m=this.config.origin,q=b.childNodes[0];q&&this.tween(q,q.style.top?{left:f.x+"px",top:f.y+"px"}:{transform:"translate3d("+f.x+"px, "+f.y+"px, 0px)"},q.style.top?{left:f.x+"px",top:f.y+"px"}:{transform:"translate3d("+m.x+"px, "+m.y+"px, 0px)"})}}catch(r){this.active=!1}}},{key:"tween",value:function(b,e,l,a){var f=this;a=void 0===a?!0:a;var m=this.animatedProps.scroll,q=this.config.customTween,r=!1,u=
function(){a&&(f.finish("css"),f.morph.makeDirty())};if(q){var v,y=Fe.stringToEasing(this.easing),z=function(T){v||(v=T);var fa=Math.min(1,(T-v)/f.duration);f.morph.dontRecordChangesWhile(function(){return q(y(fa))});if(1<=fa)return f.finish("css");requestAnimationFrame(z)};requestAnimationFrame(z);r=!0}if(m){var B,C=this.morph.env.eventDispatcher.eventState;r=Fe.promise.deferred();var G=r.promise,F=r.resolve,N=this.interpolate("scrollLeft",b.scrollLeft,m.x),L=this.interpolate("scrollTop",b.scrollTop,
m.y),S=Fe.stringToEasing(this.easing),ha=function(T){B||(B=T);T-=B;var fa=Math.min(1,T/f.duration);b.scrollTop=L(S(fa));b.scrollLeft=N(S(fa));if(1<=T/f.duration)return C.scroll.interactiveScrollInProgress=null,F(),f.finish("css");requestAnimationFrame(ha)};G.debounce=function(){};requestAnimationFrame(ha);r=!0}if(this.tweenGradient&&!this.morph.isPolygon){var qa,D=Fe.stringToEasing(this.easing),P=function(T){qa||(qa=T);T-=qa;if(1<=T/f.duration)return f.finish("css");b.style.setProperty("background-image",
f.tweenGradient(D(T/f.duration)));requestAnimationFrame(P)};delete e.backgroundImage;delete l.backgroundImage;delete e.background;delete l.background;requestAnimationFrame(P);r=!0}else this.tweenGradient&&(r=!0);if(b&&e&&l){m={};G={};for(var J in e)m[Fe.string.camelize(J)]=e[J];for(var M in l)G[Fe.string.camelize(M)]=l[M];try{var X=b.animate([m,G],{duration:this.duration,easing:this.easing,fill:"forwards",composite:"replace"});X.onfinish=function(){u();setTimeout(function(){return X.cancel()},200)};
r=!0}catch(T){r=!1}}r||u()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PropertyAnimation"}}],k,{pathInPackage:function(){return"rendering/animations.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3756,end:17169})}(void 0);Fe.PropertyAnimation=hR;Fe.PropertyAnimation=hR;Fe.PropertyAnimation=hR;var tg=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js");
tg.cumulativeOffset=jd;tg.createIFrame=function(d,k,n){k=void 0===k?"about:blank":k;n=void 0===n?new tg.Rectangle(0,0,700,700):n;return new Promise(function(b,e){if(!d)throw Error("Need parent element!");var l=document.createElement("iframe");l.style.position="absolute";l.style.top=n.top()+"px";l.style.left=n.left()+"px";l.style.width=n.width+"px";l.style.height=n.height+"px";l.src=k;var a=!1;l.onload=function(f){a=!0;l.onload=null;b(l)};tg.promise.waitFor(1E3,function(){return!!a}).catch(function(f){return e(Error("iframe load timeout"))});
d.appendChild(l)})};tg.requestAnimationFramePolyfill=function(d){for(var k=0,n=["ms","moz","webkit","o"],b=0;b<n.length&&!d.requestAnimationFrame;++b)d.requestAnimationFrame=d[n[b]+"RequestAnimationFrame"],d.cancelAnimationFrame=d[n[b]+"CancelAnimationFrame"]||d[n[b]+"CancelRequestAnimationFrame"];d.requestAnimationFrame||(d.requestAnimationFrame=function(e,l){var a=Date.now(),f=Math.max(0,16-(a-k));l=d.setTimeout(function(){e(a+f)},f);k=a+f;return l});d.cancelAnimationFrame||(d.cancelAnimationFrame=
function(e){clearTimeout(e)})};tg.createDOMEnvironment_browser=function(){var d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(d=tg.IFramedDomEnvironment,k.yield(tg.createIFrame(document.body),2)):k.return(new d(k.yieldResult))})};tg.createDOMEnvironment_node=function(){System.decanonicalize("lively.morphic/").replace(/file:\/\//,"");var d=System._nodeRequire("jsdom"),k=d.createVirtualConsole().sendTo(console);return new Promise(function(n,b){d.env("<div></div>",
["https://code.jquery.com/pep/0.4.1/pep.js"],{virtualConsole:k},function(e,l){return e?b(e):n(new tg.DomEnvironment(l,l.document,function(){return l.close()}))})})};tg.createDOMEnvironment=ax;tg.defaultDOMEnv=bx;tg.setCSSDef=function(d,k,n){tg.arr.from(d.childNodes).forEach(function(b){return d.removeChild(b)});k=n.createTextNode(k);d.styleSheet?d.styleSheet.cssText=k.nodeValue:d.appendChild(k);return d};tg.addCSSDef=function(d,k,n){var b=n.createElement("style");b.type="text/css";d&&b.setAttribute("id",
d);tg.setCSSDef(b,k,n);n.head.appendChild(b);return b};tg.addOrChangeCSSDeclaration=oi;tg.addOrChangeLinkedCSS=Iq;tg.promise=oe;tg.obj=lf;tg.arr=Qe;tg.Rectangle=Pd;tg.cumulativeOffset=jd;tg.cumulativeOffset=jd;tg.createDOMEnvironment=ax;tg.createDOMEnvironment=ax;(function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=k.hasOwnProperty("DomEnvironment")&&"function"===typeof k.DomEnvironment?k.DomEnvironment:k.DomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){tg.requestAnimationFramePolyfill(b);this.window=b;this.document=e;this.destroyFn=l}},{key:"destroy",value:function(){"function"===typeof this.destroyFn&&this.destroyFn()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DomEnvironment"}}],k,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3079,end:3372})})(void 0);(function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/dom-helper.js"),n=k.hasOwnProperty("IFramedDomEnvironment")&&"function"===typeof k.IFramedDomEnvironment?k.IFramedDomEnvironment:k.IFramedDomEnvironment=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b.contentWindow,b.contentWindow.document,function(){b.contentWindow&&b.contentWindow.close();b.parentNode&&b.parentNode.removeChild(b)});this.iframe=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFramedDomEnvironment"}}],k,{pathInPackage:function(){return"rendering/dom-helper.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3374,end:3718})})(tg.DomEnvironment);tg._defaultEnv=tg._defaultEnv||void 0;tg.defaultDOMEnv=bx;tg.defaultDOMEnv=bx;tg.addOrChangeCSSDeclaration=oi;tg.addOrChangeCSSDeclaration=oi;tg.addOrChangeLinkedCSS=Iq;tg.addOrChangeLinkedCSS=Iq;var hK=function(){return function(d){d=void 0===d?window.document:d;return function(k,n,b){var e=n||void 0;"undefined"===typeof b&&
(b=n,e=void 0);var l=k.split(".");if(1<l.length)for(k=l.shift(),n=0;n<l.length;n++){var a=l[n],f;-1<(f=a.indexOf("#"))&&(a.slice(f+1),a.slice(0,f))}n=k.split("#");1<n.length&&(k=n[0]);k=d.createElement(k);if(e){for(var m in e)"style"!==m&&"dataset"!==m&&"attributes"!==m&&(k[m]=e[m]);if(m=e.style)for(var q in m)k.style[q]=m[q];if(q=e.dataset)if(k.dataset)for(var r in q)k.dataset[r]=q[r];else for(r in q)k.setAttribute("data-"+r,q[r]);if(e=e.attributes)for(var u in e)e[u]&&tg.obj.isBoolean(e[u])?k.toggleAttribute(u):
k.setAttribute(u,e[u])}b||(b="");if("string"===typeof b)k.appendChild(d.createTextNode(b));else if(Array.isArray(b))for(n=0;n<b.length;n++)u=b[n],k.appendChild("string"===typeof u?d.createTextNode(u):u);else k.appendChild("string"===typeof b?d.createTextNode(b):b);return k}}}();tg.hyperscriptFnForDocument=hK;tg.hyperscriptFnForDocument=hK;tg.hyperscriptFnForDocument=hK;var Ke=lively.FreezerRuntime.recorderFor("lively.resources/src/helpers.js");Ke.applyExclude=Hc;Ke.parseQuery=Ao;Ke.stringifyQuery=
Jt;Ke.withRelativePartsResolved=Cv;Ke._relativePathBetween_checkPathes=function(d,k){d.startsWith("/")&&(d=d.slice(1));k.startsWith("/")&&(k=k.slice(1));d=d.split("/");k=k.split("/");for(var n=0;n<k.length&&d[n]&&d[n]==k[n];n++);return"../".repeat(Math.max(0,k.length-n-1))+d.splice(n,d.length).join("/")};Ke.relativePathBetween=aB;Ke.join=Y;Ke.parent=p;Ke.parents=t;Ke.resource=x;Ke.createFiles=w;Ke.registerExtension=A;Ke.unregisterExtension=E;Ke.applyExclude=Hc;Ke.applyExclude=Hc;Ke.parseQuery=Ao;
Ke.parseQuery=Ao;Ke.stringifyQuery=Jt;Ke.stringifyQuery=Jt;Ke.slashEndRe=/\/+$/;Ke.slashStartRe=/^\/+/;Ke.protocolRe=/^[a-z0-9-_\.]+:/;Ke.urlRe=/^([^:\/]+):\/\/([^\/]*)(.*)/;Ke.slashslashRe=/^\/\/[^\/]+/;Ke.pathDotRe=/\/\.\//g;Ke.pathDoubleDotRe=/\/[^\/]+\/\.\./;Ke.pathDoubleSlashRe=/(^|[^:])[\/]+/g;Ke.withRelativePartsResolved=Cv;Ke.withRelativePartsResolved=Cv;Ke.relativePathBetween=aB;Ke.relativePathBetween=aB;Ke.join=Y;Ke.join=Y;Ke.parent=p;Ke.parent=p;Ke.parents=t;Ke.parents=t;var Tz=Ke.extensions||
[];Ke.extensions=Tz;Ke.extensions=Tz;Ke.extensions=Tz;Ke.resource=x;Ke.resource=x;Ke.createFiles=w;Ke.createFiles=w;Ke.registerExtension=A;Ke.registerExtension=A;Ke.unregisterExtension=E;Ke.unregisterExtension=E;var iK=/^file:\/\/\/[a-z]:\//i;Ke.windowsURLPrefixRe=iK;Ke.windowsURLPrefixRe=iK;Ke.windowsURLPrefixRe=iK;var jK=/^[a-z]:\//i;Ke.windowsPathPrefixRe=jK;Ke.windowsPathPrefixRe=jK;Ke.windowsPathPrefixRe=jK;var kK=/^[a-z]:\/$/i;Ke.windowsRootPathRe=kK;Ke.windowsRootPathRe=kK;Ke.windowsRootPathRe=
kK;var qi=lively.FreezerRuntime.recorderFor("lively.resources/src/resource.js");qi.nyi=function(d,k){throw Error(k+" for "+d.constructor.name+" not yet implemented");};qi.resource=x;qi.parseQuery=Ao;qi.withRelativePartsResolved=Cv;qi.relativePathBetween=aB;qi.windowsPathPrefixRe=jK;qi.stringifyQuery=Jt;qi.slashEndRe=/\/+$/;qi.slashStartRe=/^\/+/;qi.protocolRe=/^[a-z0-9-_\.]+:/;qi.slashslashRe=/^\/\/[^\/]+/;var Nf=function(d,k){if(!d)throw Error("Cannot create resource without url");this.url=String(d);
this.binary=!1;this.linkCount=this._isLink=this._isDirectory=this.mode=this.group=this.user=this.contentType=this.type=this.size=this.etag=this.created=this.lastModified=void 0};Nf.fromProps=function(d){d=void 0===d?{}:d;return(new this(d.url)).assignProperties(d)};Nf.prototype.equals=function(d){if(!d||this.constructor!==d.constructor)return!1;var k=this.url;d=d.url;"/"===k[k.length-1]&&(k=k.slice(0,-1));"/"===d[d.length-1]&&(d=d.slice(0,-1));return k===d};Nf.prototype.toString=function(){return this.constructor.name+
'("'+this.url+'")'};Nf.prototype.newResource=function(d){return qi.resource(d,this)};Nf.prototype.path=function(){var d=this.url.replace(qi.protocolRe,"").replace(qi.slashslashRe,"");return""===d?"/":d};Nf.prototype.pathWithoutQuery=function(){return this.path().split("?")[0]};Nf.prototype.name=function(){var d=this.path(),k=d.lastIndexOf("?");-1<k&&(d=d.slice(0,k));d.endsWith("/")&&(d=d.slice(0,-1));d=d.split("/");return decodeURIComponent(d[d.length-1])};Nf.prototype.ext=function(){var d=this.url;
if(d.endsWith("/"))return"";d=$jscomp.makeIterator(d.match(/\.([^\/\.]+$)/)||["",""]);d.next();return d.next().value.toLowerCase()};Nf.prototype.nameWithoutExt=function(){var d=this.name(),k=d.lastIndexOf(".");0<k&&(d=d.slice(0,k));return d};Nf.prototype.scheme=function(){return this.url.split(":")[0]};Nf.prototype.host=function(){var d=this.url.indexOf("://");if(-1===d)return null;d=this.url.slice(d+3);var k=d.indexOf("/");return d.slice(0,-1<k?k:d.length)};Nf.prototype.schemeAndHost=function(){return this.isRoot()?
this.asFile().url:this.url.slice(0,this.url.length-this.path().length)};Nf.prototype.parent=function(){return this.isRoot()?null:this.newResource(this.url.split("?")[0].replace(qi.slashEndRe,"").split("/").slice(0,-1).join("/")+"/")};Nf.prototype.parents=function(){for(var d=[],k=this.parent();k;)d.unshift(k),k=k.parent();return d};Nf.prototype.isParentOf=function(d){var k=this;return d.schemeAndHost()===this.schemeAndHost()&&d.parents().some(function(n){return n.equals(k)})};Nf.prototype.query=function(){return qi.parseQuery(this.url)};
Nf.prototype.withQuery=function(d){var k=Object.assign({},this.query(),{},d);d=$jscomp.makeIterator(this.url.split("?")).next().value;k=qi.stringifyQuery(k);return this.newResource(d+"?"+k)};Nf.prototype.commonDirectory=function(d){if(d.schemeAndHost()!==this.schemeAndHost())return null;if(this.isDirectory()&&this.equals(d))return this;if(this.isRoot())return this.asDirectory();if(d.isRoot())return d.asDirectory();d=d.parents();for(var k=this.parents(),n=this.root(),b=0;b<k.length;b++){var e=k[b],
l=d[b];if(!l||!e.equals(l))break;n=e}return n};Nf.prototype.withRelativePartsResolved=function(){var d=this.path(),k=qi.withRelativePartsResolved(d);if(k===d)return this;k.startsWith("/")&&(k=k.slice(1));k[1]===":".startsWith("/")?k=k.slice(1):":"===k[1]&&k.match(qi.windowsPathPrefixRe)&&(k=k.slice(3));return this.newResource(this.root().url+k)};Nf.prototype.relativePathFrom=function(d){return qi.relativePathBetween(d.url,this.url)};Nf.prototype.withPath=function(d){return(this.isRoot()?this:this.root()).join(d)};
Nf.prototype.join=function(d){return this.newResource(this.url.replace(qi.slashEndRe,"")+"/"+d.replace(qi.slashStartRe,""))};Nf.prototype.isRoot=function(){return"/"===this.path()};Nf.prototype.isFile=function(){return!this.isRoot()&&!this.url.match(qi.slashEndRe)};Nf.prototype.isDirectory=function(){return!this.isFile()};Nf.prototype.asDirectory=function(){return this.url.endsWith("/")?this:this.newResource(this.url.replace(qi.slashEndRe,"")+"/")};Nf.prototype.root=function(){if(this.isRoot())return this;
var d=this.url.slice(0,-this.path().length);return this.newResource(d+"/")};Nf.prototype.asFile=function(){return this.url.endsWith("/")?this.newResource(this.url.replace(qi.slashEndRe,"")):this};Nf.prototype.assignProperties=function(d){for(var k in d)if("url"!==k){var n=k;if("isLink"===k||"isDirectory"===k)n="_"+k;this[n]=d[k]}return this};Nf.prototype.ensureExistance=function(d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.yield(k.exists(),
2);case 2:return n.yieldResult?n.return(k):n.yield(k.parent().ensureExistance(),3);case 3:return k.isFile()?n.yield(k.write(d||""),5):n.yield(k.mkdir(),5);case 5:return n.return(k)}})};Nf.prototype.copyTo=function(d,k){k=void 0===k?!0:k;var n=this,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:if(n.isFile()){l=d.isFile()?d:d.join(n.name());if(!k){m.jumpTo(8);break}return m.yield(l.parent().ensureExistance(),8)}if(!d.isDirectory())throw Error("Cannot copy a directory to a file!");
return m.yield(n.dirList("infinity"),4);case 4:return b=m.yieldResult,e=b.map(function(q){return d.join(q.relativePathFrom(n))}),m.yield(d.ensureExistance(),5);case 5:return m.yield(b.reduceRight(function(q,r,u){return function(){return Promise.resolve(r.isDirectory()&&e[u].ensureExistance()).then(q)}},function(){return Promise.resolve()})(),6);case 6:return m.yield(b.reduceRight(function(q,r,u){return function(){return Promise.resolve(r.isFile()&&r.copyTo(e[u],!1)).then(q)}},function(){return Promise.resolve()})(),
3);case 8:return a=l,f=a.write,m.yield(n.read(),11);case 11:return m.yield(f.call(a,m.yieldResult),3);case 3:return m.return(n)}})};Nf.prototype.rename=function(d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(k.copyTo(d),2);k.remove();return n.return(d)})};Nf.prototype.beBinary=function(d){return this.setBinary(!0)};Nf.prototype.setBinary=function(d){this.binary=d;return this};Nf.prototype.read=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){qi.nyi(d,
"read");k.jumpToEnd()})};Nf.prototype.write=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){qi.nyi(d,"write");k.jumpToEnd()})};Nf.prototype.mkdir=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){qi.nyi(d,"mkdir");k.jumpToEnd()})};Nf.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){qi.nyi(d,"exists");k.jumpToEnd()})};Nf.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){qi.nyi(d,
"remove");k.jumpToEnd()})};Nf.prototype.dirList=function(d,k){var n=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){qi.nyi(n,"dirList");b.jumpToEnd()})};Nf.prototype.readProperties=function(d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){qi.nyi(k,"readProperties");n.jumpToEnd()})};Nf.prototype.writeJson=function(d,k){return this.write((void 0===k?0:k)?JSON.stringify(d,null,2):JSON.stringify(d))};Nf.prototype.readJson=function(d){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==
e.nextAddress?(n=JSON,b=n.parse,e.yield(k.read(),2)):e.return(b.call(n,e.yieldResult))})};Nf.prototype.__serialize__=function(){return{__expr__:'var r = null; try { r = resource("'+this.url+'");} catch (err) {}; r',bindings:{"lively.resources":["resource"]}}};$jscomp.global.Object.defineProperties(Nf.prototype,{isResource:{configurable:!0,enumerable:!0,get:function(){return!0}},canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!1}}});qi.Resource=Nf;qi.default=Nf;var Jf=lively.FreezerRuntime.recorderFor("lively.resources/src/http-resource.js");
Jf.davNs=function(d){return(d=d.match(/\/([a-z]+?):multistatus/i))?d[1]:"d"};Jf.propfindRequestPayload=function(){return'<?xml version="1.0" encoding="utf-8" ?>\n    <D:propfind xmlns:D="DAV:">\n      <D:prop>\n        <D:creationdate/>\n        <D:getcontentlength/>\n        <D:getcontenttype/>\n        <D:getetag/>\n        <D:getlastmodified/>\n        <D:resourcetype/>\n      </D:prop>\n    </D:propfind>'};Jf.readPropertyNode=function(d,k){k=void 0===k?{}:k;var n=d.tagName.replace(/[^:]+:/,"");
n=Jf.propertyNodeMap[n];d=d.textContent;switch(n){case "lastModified":case "created":d=new Date(d);break;case "size":d=Number(d)}k[n]=d;return k};Jf.readXMLPropfindResult=function(d){var k=(new Jf.DOMParser).parseFromString(d,"text/xml");d=Jf.davNs(d);k=(new Jf.XPathQuery("/"+d+":multistatus/"+d+":response")).findAll(k.documentElement);var n=new Jf.XPathQuery(d+":href"),b=new Jf.XPathQuery(d+":propstat/"+d+":prop");return k.map(function(e){var l=b.findFirst(e);l=Array.from(l.childNodes).reduce(function(a,
f){return Jf.readPropertyNode(f,a)},{});e=n.findFirst(e);l.url=e.textContent||e.text;return l})};Jf.defaultOrigin=function(){return System.baseURL||document.location.origin};Jf.makeRequest=function(d,k,n,b,e){b=void 0===b?{}:b;e=d.url;var l=d.useCors,a=d.useProxy,f=d.headers;l="undefined"!==typeof l?l:!0;k={method:void 0===k?"GET":k};if("undefined"!==typeof a?a:1)Object.assign(b,{"cache-control":"no-cache","x-lively-proxy-request":e}),e=d.proxyDomain||Jf.defaultOrigin();l&&(k.mode="cors");n&&(k.body=
n);k.redirect="follow";k.headers=Object.assign({},b,{},f);return fetch(e,k)};Jf.upload=I;Jf.Resource=Nf;Jf.applyExclude=Hc;Jf.promise=oe;Jf.num=Gk;var gF=function(d){this.expression=d;this.contextNode=null;this.xpe=new Jf.XPathEvaluator};gF.prototype.establishContext=function(d){this.nsResolver||(d=d.ownerDocument?d.ownerDocument.documentElement:d.documentElement,d!==this.contextNode&&(this.contextNode=d,this.nsResolver=this.xpe.createNSResolver(d)))};gF.prototype.manualNSLookup=function(){this.nsResolver=
function(d){return Jf.Namespace[d.toUpperCase()]||null};return this};gF.prototype.findAll=function(d,k){this.establishContext(d);d=this.xpe.evaluate(this.expression,d,this.nsResolver,Jf.XPathResult.ANY_TYPE,null);for(var n=[],b;b=d.iterateNext();)n.push(b);return 0<n.length||void 0===k?n:k};gF.prototype.findFirst=function(d){this.establishContext(d);return this.xpe.evaluate(this.expression,d,this.nsResolver,Jf.XPathResult.ANY_TYPE,null).iterateNext()};Jf.XPathQuery=gF;Jf.propertyNodeMap={getlastmodified:"lastModified",
creationDate:"created",getetag:"etag",getcontentlength:"size",resourcetype:"type",getcontenttype:"contentType"};Jf.binaryExtensions="3ds 3g2 3gp 7z a aac adp ai aif aiff alz ape apk ar arj asf au avi bak bh bin bk bmp btif bz2 bzip2 cab caf cgm class cmx cpio cr2 csv cur dat deb dex djvu dll dmg dng doc docm docx dot dotm dra DS_Store dsk dts dtshd dvb dwg dxf ecelp4800 ecelp7470 ecelp9600 egg eol eot epub exe f4v fbs fh fla flac fli flv fpx fst fvt g3 gif graffle gz gzip h261 h263 h264 icns ico ief img ipa iso jar jpeg jpg jpgv jpm jxr key ktx lha lvp lz lzh lzma lzo m3u m4a m4v mar mdi mht mid midi mj2 mka mkv mmr mng mobi mov movie mp3 mp4 mp4a mpeg mpg mpga mxu nef npx numbers o oga ogg ogv otf pages pbm pcx pdf pea pgm pic png pnm pot potm potx ppa ppam ppm pps ppsm ppsx ppt pptm pptx psd pya pyc pyo pyv qt rar ras raw rgb rip rlc rmf rmvb rtf rz s3m s7z scpt sgi shar sil sketch slk smv so sub swf tar tbz tbz2 tga tgz thmx tif tiff tlz ttc ttf txz udf uvh uvi uvm uvp uvs uvu viv vob war wav wax wbmp wdp weba webm webp whl wim wm wma wmv wmx woff woff2 wvx xbm xif xla xlam xls xlsb xlsm xlsx xlt xltm xltx xm xmind xpi xpm xwd xz z zip zipx".split(" ");
Jf.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof global&&"undefined"!==typeof Jf.process;Jf.upload=I;Jf.upload=I;var al=function(d,k){k=void 0===k?{}:k;d=Jf.Resource.call(this,d,k)||this;d.onLoad=k.onLoad||function(){};d.onProgress=k.onProgress||function(){};d.useProxy=k.hasOwnProperty("useProxy")?k.useProxy:!1;d.proxyDomain=k.proxyDomain||void 0;d.useCors=k.hasOwnProperty("useCors")?k.useCors:!1;d.headers=k.headers||{};d.binary=d.isFile()?Jf.binaryExtensions.includes(d.ext()):
!1;d.errorOnHTTPStatusCodes=k.hasOwnProperty("errorOnHTTPStatusCodes")?k.errorOnHTTPStatusCodes:!0;return d};$jscomp.inherits(al,Jf.Resource);al.prototype.join=function(d){return Object.assign(Jf.Resource.prototype.join.call(this,d),{headers:this.headers,useCors:this.useCors,useProxy:this.useProxy,proxyDomain:this.proxyDomain})};al.prototype.makeProxied=function(d){void 0!==d&&(this.proxyDomain=d);return this.useProxy?this:new this.constructor(this.url,{headers:this.headers,useCors:this.useCors,useProxy:!0,
proxyDomain:this.proxyDomain})};al.prototype.noErrorOnHTTPStatusCodes=function(){this.errorOnHTTPStatusCodes=!1;return this};al.prototype.read=function(){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(Jf.makeRequest(d),2);k=n.yieldResult;if(!k.ok&&d.errorOnHTTPStatusCodes)throw Error("Cannot read "+d.url+": "+k.statusText+" "+k.status);if(!d.binary)return n.return(k.text());if("blob"===d.binary)return n.return(k.blob());if("function"===
typeof k.arrayBuffer)return n.return(k.arrayBuffer());if("function"===typeof k.buffer)return n.return(k.buffer());throw Error("Don't now how to read binary resource "+d+"'");})};al.prototype.write=function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){if(!k.isFile())throw Error("Cannot write a non-file: "+k.url);return b.yield(Jf.upload(k,d),2)}n=b.yieldResult;if(!Jf.num.between(n.status,200,300)&&k.errorOnHTTPStatusCodes)throw Error("Cannot write "+
k.url+": "+n.statusText+" "+n.status);return b.return(k)})};al.prototype.mkdir=function(){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(d.isFile())throw Error("Cannot mkdir on a file: "+d.url);return n.yield(Jf.makeRequest(d,"MKCOL"),2)}k=n.yieldResult;if(!k.ok&&d.errorOnHTTPStatusCodes)throw Error("Cannot create directory "+d.url+": "+k.statusText+" "+k.status);return n.return(d)})};al.prototype.exists=function(){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==
n.nextAddress)return d.isRoot()?(k=!0,n.jumpTo(2)):n.yield(Jf.makeRequest(d,"HEAD"),3);2!=n.nextAddress&&(k=!!n.yieldResult.ok);return n.return(k)})};al.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(Jf.makeRequest(d,"DELETE"),2):k.return(d)})};al.prototype._propfind=function(){var d=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(Jf.makeRequest(d,"PROPFIND",
null,{"Content-Type":"text/xml"}),2);if(3!=e.nextAddress){k=e.yieldResult;if(!k.ok&&d.errorOnHTTPStatusCodes)throw Error("Error in dirList for "+d.url+": "+k.statusText);return e.yield(k.text(),3)}n=e.yieldResult;b=d.root();return e.return(Jf.readXMLPropfindResult(n).map(function(l){return b.join(l.url).assignProperties(l)}))})};al.prototype.dirList=function(d,k){d=void 0===d?1:d;k=void 0===k?{}:k;var n=this,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if("number"!==
typeof d&&"infinity"!==d)throw Error("dirList \u2013 invalid depth argument: "+d);b=k;e=b.exclude;0>=d&&(d=1);return 1===d?m.yield(n._propfind(),5):m.yield(n.dirList(1,k),4)}if(5!=m.nextAddress)return l=m.yieldResult,a=l.filter(function(q){return q.isDirectory()}),m.return(Promise.all(a.map(function(q){return q.dirList("number"===typeof d?d-1:d,k)})).then(function(q){return q.reduce(function(r,u){return r.concat(u)},l)}));f=m.yieldResult;f.shift();e&&(f=Jf.applyExclude(e,f));return m.return(f)})};
al.prototype.readProperties=function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k._propfind(),2);n=b.yieldResult[0];return b.return(k.assignProperties(n))})};al.prototype.post=function(d){d=void 0===d?null:d;var k=this,n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return"string"!==typeof d&&(d=JSON.stringify(d)),l.yield(Jf.makeRequest(k,"POST",d,{}),2);case 2:return n=l.yieldResult,
l.setCatchFinallyBlocks(3),l.yield(n.text(),5);case 5:b=l.yieldResult;l.leaveTryBlock(4);break;case 3:l.enterCatchBlock();case 4:if(b&&"application/json"===n.headers.get("content-type"))try{e=JSON.parse(b)}catch(a){}if(!n.ok&&k.errorOnHTTPStatusCodes)throw Error("Error in POST "+k.url+": "+(b||n.statusText));return l.return(e||b)}})};al.prototype.copyTo=function(d,k){k=void 0===k?!0:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(n.isFile()&&(b=d.isFile()?d:d.join(n.name()),
Jf.isNode)){if(b.isHTTPResource)return e.return(n._copyTo_file_nodejs_http(b,k));if(b.isNodeJSFileResource)return e.return(n._copyTo_file_nodejs_fs(b,k))}return e.return(Jf.Resource.prototype.copyTo.call(n,d,k))})};al.prototype._copyFrom_file_nodejs_fs=function(d,k){k=void 0===k?!0:k;var n=this,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return k?a.yield(n.parent().ensureExistance(),2):a.jumpTo(2);if(4!=a.nextAddress)return e=d._createReadStream(),e.on("error",
function(f){return b=f}),a.yield(Jf.makeRequest(n,"PUT",e),4);l=a.yieldResult;if(b)throw b;if(!l.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+l.statusText+" "+l.status);return a.return(n)})};al.prototype._copyTo_file_nodejs_fs=function(d,k){k=void 0===k?!0:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return k?l.yield(d.parent().ensureExistance(),2):l.jumpTo(2);if(4!=l.nextAddress)return l.yield(Jf.makeRequest(n,"GET"),4);b=
l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return l.return(new Promise(function(a,f){return b.body.pipe(d._createWriteStream()).on("error",function(m){return e=m}).on("finish",function(){return e?f(e):a(n)})}))})};al.prototype._copyTo_file_nodejs_http=function(d,k){k=void 0===k?!0:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(!k){l.jumpTo(2);break}return l.yield(d.parent().ensureExistance(),
2);case 2:return l.yield(Jf.makeRequest(n,"GET"),4);case 4:b=l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot GET: "+b.statusText+" "+b.status);return l.yield(Jf.makeRequest(d,"PUT",b.body),5);case 5:e=l.yieldResult;if(!b.ok&&n.errorOnHTTPStatusCodes)throw Error("copyTo: Cannot PUT: "+e.statusText+" "+e.status);l.jumpToEnd()}})};$jscomp.global.Object.defineProperties(al.prototype,{isHTTPResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});Jf.WebDAVResource=
al;var lK={name:"http-webdav-resource",matches:function(d){return d.startsWith("http:")||d.startsWith("https:")},resourceClass:Jf.WebDAVResource};Jf.resourceExtension=lK;Jf.resourceExtension=lK;Jf.resourceExtension=lK;Jf.default=al;var Cs=System.get("@system-env").node?require("fs"):{},lha=Cs.readFile,mha=Cs.writeFile,nha=Cs.exists,oha=Cs.readdir,pha=Cs.mkdir,qha=Cs.rmdir,rha=Cs.unlink,sha=Cs.lstat,tha=Cs.rename,uha=Cs.createWriteStream,vha=Cs.createReadStream,af=lively.FreezerRuntime.recorderFor("lively.resources/src/fs-resource.js");
af.wrapInPromise=function(d){return function(k){for(var n=[],b=0;b<arguments.length;++b)n[b-0]=arguments[b];return new Promise(function(e,l){return d.apply(null,n.concat(function(a,f){return a?l(a):e(f)}))})}};af.Resource=Nf;af.applyExclude=Hc;af.windowsURLPrefixRe=iK;af.windowsRootPathRe=kK;af.createWriteStream=uha;af.createReadStream=vha;af.readFile=lha;af.writeFile=mha;af.exists=nha;af.mkdir=pha;af.rmdir=qha;af.unlink=rha;af.readdir=oha;af.lstat=sha;af.rename=tha;af.readFileP=af.wrapInPromise(af.readFile);
af.writeFileP=af.wrapInPromise(af.writeFile);af.existsP=function(d){return new Promise(function(k,n){return af.exists(d,function(b){return k(!!b)})})};af.readdirP=af.wrapInPromise(af.readdir);af.mkdirP=af.wrapInPromise(af.mkdir);af.rmdirP=af.wrapInPromise(af.rmdir);af.unlinkP=af.wrapInPromise(af.unlink);af.lstatP=af.wrapInPromise(af.lstat);af.renameP=af.wrapInPromise(af.rename);var om=function(){return af.Resource.apply(this,arguments)||this};$jscomp.inherits(om,af.Resource);om.prototype.path=function(){return this.url.replace("file://",
"")};om.prototype.stat=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(af.lstatP(d.path()))})};om.prototype.read=function(){var d=this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){k=af.readFileP(d.path());return n.return(d.binary?k:k.then(String))})};om.prototype.write=function(d){var k=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if(k.isDirectory())throw Error("Cannot write into a directory: "+
k.path());return n.yield(af.writeFileP(k.path(),d),2)}return n.return(k)})};om.prototype.mkdir=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(d.isFile())throw Error("Cannot mkdir on a file: "+d.path());return k.yield(af.mkdirP(d.path()),2)}return k.return(d)})};om.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return(d.isRoot()?!0:af.existsP(d.path()))})};om.prototype.dirList=
function(d,k){d=void 0===d?1:d;k=void 0===k?{}:k;var n=this,b,e,l,a,f,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){switch(B.nextAddress){case 1:if("number"!==typeof d&&"infinity"!==d)throw Error("dirList \u2013 invalid depth argument: "+d);b=k;e=b.exclude;0>=d&&(d=1);if(1!==d){B.jumpTo(2);break}l=[];a=$jscomp;f=a.makeIterator;return B.yield(af.readdirP(n.path()),3);case 3:m=f.call(a,B.yieldResult),q=m.next();case 4:if(q.done){B.jumpTo(6);break}r=q.value;u=n.join(r);
return B.yield(u.stat(),7);case 7:v=B.yieldResult;u=v.isDirectory()?u.asDirectory():u;u._assignPropsFromStat(v);l.push(u);q=m.next();B.jumpTo(4);break;case 6:return e&&(l=af.applyExclude(e,l)),B.return(l);case 2:return B.yield(n.dirList(1,k),8);case 8:return y=B.yieldResult,z=y.filter(function(C){return C.isDirectory()}),B.return(Promise.all(z.map(function(C){return C.dirList("number"===typeof d?d-1:d,k)})).then(function(C){return C.reduce(function(G,F){return G.concat(F)},y)}))}})};om.prototype.isEmptyDirectory=
function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?k.yield(d.dirList(),2):k.return(0===k.yieldResult.length)})};om.prototype.rename=function(d){var k=this,n,b,e,l,a,f,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){switch(B.nextAddress){case 1:if(!(d instanceof k.constructor))return B.return(af.Resource.prototype.rename.call(k,d));if(k.isFile()){d=d.asFile();af.renameP(k.path(),d.path());B.jumpTo(2);break}d=d.asDirectory();
return B.yield(d.ensureExistance(),3);case 3:return n=[],b=[],e=$jscomp,l=e.makeIterator,B.yield(k.dirList("infinity"),4);case 4:a=l.call(e,B.yieldResult);for(f=a.next();!f.done;f=a.next())m=f.value,m.isDirectory()?b.push(m):n.push(m);q=$jscomp.makeIterator(b);r=q.next();case 5:if(r.done){B.jumpTo(7);break}u=r.value;return B.yield(d.join(u.relativePathFrom(k)).ensureExistance(),6);case 6:r=q.next();B.jumpTo(5);break;case 7:v=$jscomp.makeIterator(n),y=v.next();case 9:if(y.done)return B.yield(k.remove(),
2);z=y.value;return B.yield(z.rename(d.join(z.relativePathFrom(k))),10);case 10:y=v.next();B.jumpTo(9);break;case 2:return B.return(d)}})};om.prototype.remove=function(){var d=this,k,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return a.yield(d.exists(),2);case 2:if(!a.yieldResult){a.jumpTo(3);break}return d.isDirectory()?(k=$jscomp,n=k.makeIterator,a.yield(d.dirList(),7)):a.yield(af.unlinkP(d.path()),3);case 7:b=n.call(k,a.yieldResult),e=b.next();
case 8:if(e.done)return a.yield(af.rmdirP(d.path()),3);l=e.value;return a.yield(l.remove(),9);case 9:e=b.next();a.jumpTo(8);break;case 3:return a.return(d)}})};om.prototype.readProperties=function(){var d=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=d,n=k._assignPropsFromStat,b.yield(d.stat(),2)):b.return(n.call(k,b.yieldResult))})};om.prototype.copyTo=function(d,k){k=void 0===k?!0:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return n.isFile()&&
(b=d.isFile()?d:d.join(n.name()),b.isHTTPResource)?e.return(b._copyFrom_file_nodejs_fs(n,k=!0)):e.return(af.Resource.prototype.copyTo.call(n,d,k))})};om.prototype._assignPropsFromStat=function(d){return this.assignProperties({lastModified:d.mtime,created:d.ctime,size:d.size,type:d.isDirectory()?"directory":"file",isLink:d.isSymbolicLink()})};om.prototype._createWriteStream=function(){return af.createWriteStream(this.path())};om.prototype._createReadStream=function(){return af.createReadStream(this.path())};
$jscomp.global.Object.defineProperties(om.prototype,{isNodeJSFileResource:{configurable:!0,enumerable:!0,get:function(){return!0}}});af.NodeJSFileResource=om;var hF=function(d,k){"file:///"!==d.slice(0,8)&&"file://"===d.slice(0,7)&&(d="file:///"+d.slice(7));d.includes("\\")&&(d=d.replace(/\\/g,"/"));return af.NodeJSFileResource.call(this,d,k)||this};$jscomp.inherits(hF,af.NodeJSFileResource);hF.prototype.path=function(){return this.url.replace("file:///","")};hF.prototype.isRoot=function(){return!!this.path().match(af.windowsRootPathRe)};
hF.prototype.root=function(){if(this.isRoot())return this;console.log(this.url);var d=this.url.match(af.windowsURLPrefixRe);if(d)return this.newResource(d[0]);throw Error("Could not determine root path of windows file resource for url "+this.url);};af.NodeJSWindowsFileResource=hF;var mK={name:"nodejs-file-resource",matches:function(d){return d.startsWith("file:")},resourceClass:"undefined"!==typeof af.process&&"win32"===af.process.platform?af.NodeJSWindowsFileResource:af.NodeJSFileResource};af.resourceExtension=
mK;af.resourceExtension=mK;af.resourceExtension=mK;var Sj=lively.FreezerRuntime.recorderFor("lively.resources/src/local-resource.js");Sj.applyExclude=function(d,k){return k?"string"===typeof k?!d.url.includes(k):"function"===typeof k?!k(d):k instanceof RegExp?!k.test(d.url):!0:!0};Sj.Resource=Nf;Sj.createFiles=w;Sj.debug=!1;Sj.slashRe=/\//g;var mr=function(d,k){k=void 0===k?{}:k;if(!d||"string"!==typeof d)throw Error("LocalResourceInMemoryBackend needs name!");this.name=d;this._filespec=k};mr.removeHost=
function(d){delete this.hosts[d]};mr.ensure=function(d,k){var n=this;k=void 0===k?{}:k;var b=this.named(k.host);return Promise.resolve().then(function(){return d?Sj.createFiles("local://"+b.name,d):null}).then(function(){return n})};mr.named=function(d){d||(d="default");return this.hosts[d]||(this.hosts[d]=new this(d))};mr.prototype.get=function(d){return this._filespec[d]};mr.prototype.set=function(d,k){this._filespec[d]=k};mr.prototype.write=function(d,k){var n=this._filespec[d];n||(n=this._filespec[d]=
{created:new Date});n.content=k;n.isDirectory=!1;n.lastModified=new Date};mr.prototype.read=function(d){return(d=this._filespec[d])&&d.content?d.content:""};mr.prototype.mkdir=function(d){var k=this._filespec[d];k&&k.isDirectory||(k||(k=this._filespec[d]={created:new Date}),k.content&&delete k.content,k.isDirectory=!0,k.lastModified=new Date)};mr.prototype.partialFilespec=function(d,k){d=void 0===d?"/":d;k=void 0===k?Infinity:k;for(var n={},b=this.filespec,e=Object.keys(b),l=0;l<e.length;l++){var a=
e[l];if(a.startsWith(d)&&d!==a){var f=a.slice(d.length);(f.includes("/")?f.match(Sj.slashRe).length+1:1)>k||(n[a]=b[a])}}return n};$jscomp.global.Object.defineProperties(mr.prototype,{filespec:{configurable:!0,enumerable:!0,get:function(){return this._filespec},set:function(d){this._filespec=d}}});$jscomp.global.Object.defineProperties(mr,{hosts:{configurable:!0,enumerable:!0,get:function(){return this._hosts||(this._hosts={})}}});Sj.LocalResourceInMemoryBackend=mr;var Ds=function(){return Sj.Resource.apply(this,
arguments)||this};$jscomp.inherits(Ds,Sj.Resource);Ds.prototype.read=function(){return Promise.resolve(this.localBackend.read(this.path()))};Ds.prototype.write=function(d){Sj.debug&&console.log("["+this+"] write");if(this.isDirectory())throw Error("Cannot write into a directory! ("+this.url+")");var k=this.localBackend.get(this.path());if(k&&k.isDirectory)throw Error(this.url+" already exists and is a directory (cannot write into it!)");this.localBackend.write(this.path(),d);return Promise.resolve(this)};
Ds.prototype.mkdir=function(){Sj.debug&&console.log("["+this+"] mkdir");if(!this.isDirectory())throw Error("Cannot mkdir a file! ("+this.url+")");var d=this.localBackend.get(this.path());if(d&&d.isDirectory)return Promise.resolve(this);if(d&&!d.isDirectory)throw Error(this.url+" already exists and is a file (cannot mkdir it!)");this.localBackend.mkdir(this.path());return Promise.resolve(this)};Ds.prototype.exists=function(){Sj.debug&&console.log("["+this+"] exists");return Promise.resolve(this.isRoot()||
this.path()in this.localBackend.filespec)};Ds.prototype.remove=function(){var d=this;Sj.debug&&console.log("["+this+"] remove");var k=this.path();Object.keys(this.localBackend.filespec).forEach(function(n){return n.startsWith(k)&&delete d.localBackend.filespec[n]});return Promise.resolve(this)};Ds.prototype.readProperties=function(){Sj.debug&&console.log("["+this+"] readProperties");throw Error("not yet implemented");};Ds.prototype.dirList=function(d,k){d=void 0===d?1:d;k=void 0===k?{}:k;Sj.debug&&
console.log("["+this+"] dirList");if(!this.isDirectory())return this.asDirectory().dirList(d,k);k=k.exclude;var n=this.path(),b=[],e=Object.keys(this.localBackend.filespec);"infinity"===d&&(d=Infinity);for(var l={},a=0;a<e.length;l={$jscomp$loop$prop$dirToChild$2642:l.$jscomp$loop$prop$dirToChild$2642},a++){var f=e[a];f.startsWith(n)&&n!==f&&(f=f.slice(n.length),(f.includes("/")?f.match(Sj.slashRe).length+1:1)>d?(l.$jscomp$loop$prop$dirToChild$2642=this.join(f.split("/").slice(0,d).join("/")+"/"),
b.some(function(m){return function(q){return q.equals(m.$jscomp$loop$prop$dirToChild$2642)}}(l))||b.push(l.$jscomp$loop$prop$dirToChild$2642)):(f=this.join(f),k&&!Sj.applyExclude(f,k)||b.push(f)))}return Promise.resolve(b)};$jscomp.global.Object.defineProperties(Ds.prototype,{localBackend:{configurable:!0,enumerable:!0,get:function(){return Sj.LocalResourceInMemoryBackend.named(this.host())}}});Sj.LocalResource=Ds;var nK={name:"local-resource",matches:function(d){return d.startsWith("local:")},resourceClass:Sj.LocalResource};
Sj.resourceExtension=nK;Sj.resourceExtension=nK;Sj.resourceExtension=nK;Sj.default=Ds;var $g=lively.FreezerRuntime.recorderFor("lively.resources/index.js");$g.createFileSpec=Q;$g.importModuleViaNative=ca;$g.loadViaScript=W;$g.ensureFetch=va;$g.default=Nf;$g.Resource=Nf;$g.unregisterExtension=E;$g.registerExtension=A;$g.parseQuery=Ao;$g.extensions=Tz;$g.createFiles=w;$g.resource=x;$g.httpResourceExtension=lK;$g.fileResourceExtension=mK;$g.localResourceExtension=nK;$g.newUUID=ym;$g.waitFor=iq;$g.registerExtension($g.localResourceExtension);
$g.registerExtension($g.httpResourceExtension);$g.registerExtension($g.fileResourceExtension);$g.createFileSpec=Q;$g.createFileSpec=Q;$g.importModuleViaNative=ca;$g.importModuleViaNative=ca;$g.loadViaScript=W;$g.loadViaScript=W;$g.ensureFetch=va;$g.ensureFetch=va;$g.registerExtension=A;$g.registerExtension=A;$g.unregisterExtension=E;$g.unregisterExtension=E;$g.parseQuery=Ao;$g.parseQuery=Ao;$g.extensions=Tz;$g.extensions=Tz;$g.createFiles=w;$g.createFiles=w;$g.resource=x;$g.resource=x;var wha=Object.freeze({__proto__:null,
Resource:Nf,createFileSpec:Q,importModuleViaNative:ca,loadViaScript:W,ensureFetch:va,registerExtension:A,unregisterExtension:E,parseQuery:Ao,extensions:Tz,createFiles:w,resource:x}),rh=lively.FreezerRuntime.recorderFor("lively.morphic/helpers.js");rh.sanitizeFont=Na;rh.pathForBrowserHistory=fb;rh.addClassMappings=kb;rh.morph=sb;rh.newMorphId=bc;rh.lazyInspect=function(d){var k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(System.import("lively.ide/js/inspector.js"),
2);k=b.yieldResult;n=k.inspect;rh.inspect=n;return b.return(n(d))})};rh.locateClass=Eq;rh.string=Hg;rh.parseQuery=Ao;rh.stringifyQuery=Jt;rh.touchInput=rh.touchInput||void 0;try{document.createEvent("TouchEvent"),rh.touchInput=!0}catch(d){rh.touchInput=!1}var Mp=wa("a_",rh.touchInput);rh.touchInputDevice=Mp;rh.touchInputDevice=Mp;rh.touchInputDevice=Mp;rh.nameToClassMapping=rh.nameToClassMapping||{};rh.sanitizeFont=Na;rh.sanitizeFont=Na;rh.pathForBrowserHistory=fb;rh.pathForBrowserHistory=fb;rh.addClassMappings=
kb;rh.addClassMappings=kb;rh.morph=sb;rh.morph=sb;rh.newMorphId=bc;rh.newMorphId=bc;var Uz=wa("a9",rh.lazyInspect);rh.inspect=Uz;rh.inspect=Uz;rh.inspect=Uz;var nr=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js");nr.obj=lf;nr.morph=sb;var Wn=wa("aK",function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/text/icons.js"),n=k.hasOwnProperty("Icon")&&"function"===typeof k.Icon?k.Icon:k.Icon=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(n,d,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Icon"}},{key:"makeLabel",value:function(b,e){var l=e=void 0===e?{prefix:"",suffix:""}:e,a=l.prefix;l=l.suffix;var f=[];a&&f.push.apply(f,$jscomp.arrayFromIterable("string"===typeof a?[a||"",{}]:a));f.push.apply(f,$jscomp.arrayFromIterable(this.textAttribute(b,nr.obj.dissoc(e,["fontSize"]))));l&&f.push.apply(f,$jscomp.arrayFromIterable("string"===typeof l?[l||"",{}]:l));return nr.morph(Object.assign({type:"label",
value:f},nr.obj.dissoc(e,["prefix","suffix"])))}},{key:"textAttribute",value:function(b,e){e=void 0===e?{}:e;var l=e.textStyleClasses&&e.textStyleClasses.includes("far");return[nr.Icons[b].code||"icon "+b+" not found",Object.assign({fontFamily:'"Font Awesome 5 Free", "Font Awesome 5 Brands"',fontWeight:l?"400":"900",textStyleClasses:["fas"]},e)]}},{key:"setIcon",value:function(b,e){b.textAndAttributes=this.textAttribute(e)}}],k,{pathInPackage:function(){return"text/icons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:683,end:1811})}(void 0));nr.Icon=Wn;nr.Icon=Wn;nr.Icon=Wn;var oK=wa("aR",{"500px":{code:"\uf26e"},"accessible-icon":{code:"\uf368"},accusoft:{code:"\uf369"},"acquisitions-incorporated":{code:"\uf6af"},ad:{code:"\uf641"},"address-book":{code:"\uf2b9"},"address-card":{code:"\uf2bb"},adjust:{code:"\uf042"},adn:{code:"\uf170"},adobe:{code:"\uf778"},adversal:{code:"\uf36a"},
affiliatetheme:{code:"\uf36b"},"air-freshener":{code:"\uf5d0"},airbnb:{code:"\uf834"},algolia:{code:"\uf36c"},"align-center":{code:"\uf037"},"align-justify":{code:"\uf039"},"align-left":{code:"\uf036"},"align-right":{code:"\uf038"},alipay:{code:"\uf642"},allergies:{code:"\uf461"},amazon:{code:"\uf270"},"amazon-pay":{code:"\uf42c"},ambulance:{code:"\uf0f9"},"american-sign-language-interpreting":{code:"\uf2a3"},amilia:{code:"\uf36d"},anchor:{code:"\uf13d"},android:{code:"\uf17b"},angellist:{code:"\uf209"},
"angle-double-down":{code:"\uf103"},"angle-double-left":{code:"\uf100"},"angle-double-right":{code:"\uf101"},"angle-double-up":{code:"\uf102"},"angle-down":{code:"\uf107"},"angle-left":{code:"\uf104"},"angle-right":{code:"\uf105"},"angle-up":{code:"\uf106"},angry:{code:"\uf556"},angrycreative:{code:"\uf36e"},angular:{code:"\uf420"},ankh:{code:"\uf644"},"app-store":{code:"\uf36f"},"app-store-ios":{code:"\uf370"},apper:{code:"\uf371"},apple:{code:"\uf179"},"apple-alt":{code:"\uf5d1"},"apple-pay":{code:"\uf415"},
archive:{code:"\uf187"},archway:{code:"\uf557"},"arrow-alt-circle-down":{code:"\uf358"},"arrow-alt-circle-left":{code:"\uf359"},"arrow-alt-circle-right":{code:"\uf35a"},"arrow-alt-circle-up":{code:"\uf35b"},"arrow-circle-down":{code:"\uf0ab"},"arrow-circle-left":{code:"\uf0a8"},"arrow-circle-right":{code:"\uf0a9"},"arrow-circle-up":{code:"\uf0aa"},"arrow-down":{code:"\uf063"},"arrow-left":{code:"\uf060"},"arrow-right":{code:"\uf061"},"arrow-up":{code:"\uf062"},"arrows-alt":{code:"\uf0b2"},"arrows-alt-h":{code:"\uf337"},
"arrows-alt-v":{code:"\uf338"},artstation:{code:"\uf77a"},"assistive-listening-systems":{code:"\uf2a2"},asterisk:{code:"\uf069"},asymmetrik:{code:"\uf372"},at:{code:"\uf1fa"},atlas:{code:"\uf558"},atlassian:{code:"\uf77b"},atom:{code:"\uf5d2"},audible:{code:"\uf373"},"audio-description":{code:"\uf29e"},autoprefixer:{code:"\uf41c"},avianex:{code:"\uf374"},aviato:{code:"\uf421"},award:{code:"\uf559"},aws:{code:"\uf375"},baby:{code:"\uf77c"},"baby-carriage":{code:"\uf77d"},backspace:{code:"\uf55a"},
backward:{code:"\uf04a"},bacon:{code:"\uf7e5"},bahai:{code:"\uf666"},"balance-scale":{code:"\uf24e"},"balance-scale-left":{code:"\uf515"},"balance-scale-right":{code:"\uf516"},ban:{code:"\uf05e"},"band-aid":{code:"\uf462"},bandcamp:{code:"\uf2d5"},barcode:{code:"\uf02a"},bars:{code:"\uf0c9"},"baseball-ball":{code:"\uf433"},"basketball-ball":{code:"\uf434"},bath:{code:"\uf2cd"},"battery-empty":{code:"\uf244"},"battery-full":{code:"\uf240"},"battery-half":{code:"\uf242"},"battery-quarter":{code:"\uf243"},
"battery-three-quarters":{code:"\uf241"},"battle-net":{code:"\uf835"},bed:{code:"\uf236"},beer:{code:"\uf0fc"},behance:{code:"\uf1b4"},"behance-square":{code:"\uf1b5"},bell:{code:"\uf0f3"},"bell-slash":{code:"\uf1f6"},"bezier-curve":{code:"\uf55b"},bible:{code:"\uf647"},bicycle:{code:"\uf206"},biking:{code:"\uf84a"},bimobject:{code:"\uf378"},binoculars:{code:"\uf1e5"},biohazard:{code:"\uf780"},"birthday-cake":{code:"\uf1fd"},bitbucket:{code:"\uf171"},bitcoin:{code:"\uf379"},bity:{code:"\uf37a"},"black-tie":{code:"\uf27e"},
blackberry:{code:"\uf37b"},blender:{code:"\uf517"},"blender-phone":{code:"\uf6b6"},blind:{code:"\uf29d"},blog:{code:"\uf781"},blogger:{code:"\uf37c"},"blogger-b":{code:"\uf37d"},bluetooth:{code:"\uf293"},"bluetooth-b":{code:"\uf294"},bold:{code:"\uf032"},bolt:{code:"\uf0e7"},bomb:{code:"\uf1e2"},bone:{code:"\uf5d7"},bong:{code:"\uf55c"},book:{code:"\uf02d"},"book-dead":{code:"\uf6b7"},"book-medical":{code:"\uf7e6"},"book-open":{code:"\uf518"},"book-reader":{code:"\uf5da"},bookmark:{code:"\uf02e"},
bootstrap:{code:"\uf836"},"border-all":{code:"\uf84c"},"border-none":{code:"\uf850"},"border-style":{code:"\uf853"},"bowling-ball":{code:"\uf436"},box:{code:"\uf466"},"box-open":{code:"\uf49e"},boxes:{code:"\uf468"},braille:{code:"\uf2a1"},brain:{code:"\uf5dc"},"bread-slice":{code:"\uf7ec"},briefcase:{code:"\uf0b1"},"briefcase-medical":{code:"\uf469"},"broadcast-tower":{code:"\uf519"},broom:{code:"\uf51a"},brush:{code:"\uf55d"},btc:{code:"\uf15a"},buffer:{code:"\uf837"},bug:{code:"\uf188"},building:{code:"\uf1ad"},
bullhorn:{code:"\uf0a1"},bullseye:{code:"\uf140"},burn:{code:"\uf46a"},buromobelexperte:{code:"\uf37f"},bus:{code:"\uf207"},"bus-alt":{code:"\uf55e"},"business-time":{code:"\uf64a"},"buy-n-large":{code:"\uf8a6"},buysellads:{code:"\uf20d"},calculator:{code:"\uf1ec"},calendar:{code:"\uf133"},"calendar-alt":{code:"\uf073"},"calendar-check":{code:"\uf274"},"calendar-day":{code:"\uf783"},"calendar-minus":{code:"\uf272"},"calendar-plus":{code:"\uf271"},"calendar-times":{code:"\uf273"},"calendar-week":{code:"\uf784"},
camera:{code:"\uf030"},"camera-retro":{code:"\uf083"},campground:{code:"\uf6bb"},"canadian-maple-leaf":{code:"\uf785"},"candy-cane":{code:"\uf786"},cannabis:{code:"\uf55f"},capsules:{code:"\uf46b"},car:{code:"\uf1b9"},"car-alt":{code:"\uf5de"},"car-battery":{code:"\uf5df"},"car-crash":{code:"\uf5e1"},"car-side":{code:"\uf5e4"},caravan:{code:"\uf8ff"},"caret-down":{code:"\uf0d7"},"caret-left":{code:"\uf0d9"},"caret-right":{code:"\uf0da"},"caret-square-down":{code:"\uf150"},"caret-square-left":{code:"\uf191"},
"caret-square-right":{code:"\uf152"},"caret-square-up":{code:"\uf151"},"caret-up":{code:"\uf0d8"},carrot:{code:"\uf787"},"cart-arrow-down":{code:"\uf218"},"cart-plus":{code:"\uf217"},"cash-register":{code:"\uf788"},cat:{code:"\uf6be"},"cc-amazon-pay":{code:"\uf42d"},"cc-amex":{code:"\uf1f3"},"cc-apple-pay":{code:"\uf416"},"cc-diners-club":{code:"\uf24c"},"cc-discover":{code:"\uf1f2"},"cc-jcb":{code:"\uf24b"},"cc-mastercard":{code:"\uf1f1"},"cc-paypal":{code:"\uf1f4"},"cc-stripe":{code:"\uf1f5"},"cc-visa":{code:"\uf1f0"},
centercode:{code:"\uf380"},centos:{code:"\uf789"},certificate:{code:"\uf0a3"},chair:{code:"\uf6c0"},chalkboard:{code:"\uf51b"},"chalkboard-teacher":{code:"\uf51c"},"charging-station":{code:"\uf5e7"},"chart-area":{code:"\uf1fe"},"chart-bar":{code:"\uf080"},"chart-line":{code:"\uf201"},"chart-pie":{code:"\uf200"},check:{code:"\uf00c"},"check-circle":{code:"\uf058"},"check-double":{code:"\uf560"},"check-square":{code:"\uf14a"},cheese:{code:"\uf7ef"},chess:{code:"\uf439"},"chess-bishop":{code:"\uf43a"},
"chess-board":{code:"\uf43c"},"chess-king":{code:"\uf43f"},"chess-knight":{code:"\uf441"},"chess-pawn":{code:"\uf443"},"chess-queen":{code:"\uf445"},"chess-rook":{code:"\uf447"},"chevron-circle-down":{code:"\uf13a"},"chevron-circle-left":{code:"\uf137"},"chevron-circle-right":{code:"\uf138"},"chevron-circle-up":{code:"\uf139"},"chevron-down":{code:"\uf078"},"chevron-left":{code:"\uf053"},"chevron-right":{code:"\uf054"},"chevron-up":{code:"\uf077"},child:{code:"\uf1ae"},chrome:{code:"\uf268"},chromecast:{code:"\uf838"},
church:{code:"\uf51d"},circle:{code:"\uf111"},"circle-notch":{code:"\uf1ce"},city:{code:"\uf64f"},"clinic-medical":{code:"\uf7f2"},clipboard:{code:"\uf328"},"clipboard-check":{code:"\uf46c"},"clipboard-list":{code:"\uf46d"},clock:{code:"\uf017"},clone:{code:"\uf24d"},"closed-captioning":{code:"\uf20a"},cloud:{code:"\uf0c2"},"cloud-download-alt":{code:"\uf381"},"cloud-meatball":{code:"\uf73b"},"cloud-moon":{code:"\uf6c3"},"cloud-moon-rain":{code:"\uf73c"},"cloud-rain":{code:"\uf73d"},"cloud-showers-heavy":{code:"\uf740"},
"cloud-sun":{code:"\uf6c4"},"cloud-sun-rain":{code:"\uf743"},"cloud-upload-alt":{code:"\uf382"},cloudscale:{code:"\uf383"},cloudsmith:{code:"\uf384"},cloudversify:{code:"\uf385"},cocktail:{code:"\uf561"},code:{code:"\uf121"},"code-branch":{code:"\uf126"},codepen:{code:"\uf1cb"},codiepie:{code:"\uf284"},coffee:{code:"\uf0f4"},cog:{code:"\uf013"},cogs:{code:"\uf085"},coins:{code:"\uf51e"},columns:{code:"\uf0db"},comment:{code:"\uf075"},"comment-alt":{code:"\uf27a"},"comment-dollar":{code:"\uf651"},
"comment-dots":{code:"\uf4ad"},"comment-medical":{code:"\uf7f5"},"comment-slash":{code:"\uf4b3"},comments:{code:"\uf086"},"comments-dollar":{code:"\uf653"},"compact-disc":{code:"\uf51f"},compass:{code:"\uf14e"},compress:{code:"\uf066"},"compress-alt":{code:"\uf422"},"compress-arrows-alt":{code:"\uf78c"},"concierge-bell":{code:"\uf562"},confluence:{code:"\uf78d"},connectdevelop:{code:"\uf20e"},contao:{code:"\uf26d"},cookie:{code:"\uf563"},"cookie-bite":{code:"\uf564"},copy:{code:"\uf0c5"},copyright:{code:"\uf1f9"},
"cotton-bureau":{code:"\uf89e"},couch:{code:"\uf4b8"},cpanel:{code:"\uf388"},"creative-commons":{code:"\uf25e"},"creative-commons-by":{code:"\uf4e7"},"creative-commons-nc":{code:"\uf4e8"},"creative-commons-nc-eu":{code:"\uf4e9"},"creative-commons-nc-jp":{code:"\uf4ea"},"creative-commons-nd":{code:"\uf4eb"},"creative-commons-pd":{code:"\uf4ec"},"creative-commons-pd-alt":{code:"\uf4ed"},"creative-commons-remix":{code:"\uf4ee"},"creative-commons-sa":{code:"\uf4ef"},"creative-commons-sampling":{code:"\uf4f0"},
"creative-commons-sampling-plus":{code:"\uf4f1"},"creative-commons-share":{code:"\uf4f2"},"creative-commons-zero":{code:"\uf4f3"},"credit-card":{code:"\uf09d"},"critical-role":{code:"\uf6c9"},crop:{code:"\uf125"},"crop-alt":{code:"\uf565"},cross:{code:"\uf654"},crosshairs:{code:"\uf05b"},crow:{code:"\uf520"},crown:{code:"\uf521"},crutch:{code:"\uf7f7"},css3:{code:"\uf13c"},"css3-alt":{code:"\uf38b"},cube:{code:"\uf1b2"},cubes:{code:"\uf1b3"},cut:{code:"\uf0c4"},cuttlefish:{code:"\uf38c"},"d-and-d":{code:"\uf38d"},
"d-and-d-beyond":{code:"\uf6ca"},dailymotion:{code:"\uf952"},dashcube:{code:"\uf210"},database:{code:"\uf1c0"},deaf:{code:"\uf2a4"},delicious:{code:"\uf1a5"},democrat:{code:"\uf747"},deploydog:{code:"\uf38e"},deskpro:{code:"\uf38f"},desktop:{code:"\uf108"},dev:{code:"\uf6cc"},deviantart:{code:"\uf1bd"},dharmachakra:{code:"\uf655"},dhl:{code:"\uf790"},diagnoses:{code:"\uf470"},diaspora:{code:"\uf791"},dice:{code:"\uf522"},"dice-d20":{code:"\uf6cf"},"dice-d6":{code:"\uf6d1"},"dice-five":{code:"\uf523"},
"dice-four":{code:"\uf524"},"dice-one":{code:"\uf525"},"dice-six":{code:"\uf526"},"dice-three":{code:"\uf527"},"dice-two":{code:"\uf528"},digg:{code:"\uf1a6"},"digital-ocean":{code:"\uf391"},"digital-tachograph":{code:"\uf566"},directions:{code:"\uf5eb"},discord:{code:"\uf392"},discourse:{code:"\uf393"},divide:{code:"\uf529"},dizzy:{code:"\uf567"},dna:{code:"\uf471"},dochub:{code:"\uf394"},docker:{code:"\uf395"},dog:{code:"\uf6d3"},"dollar-sign":{code:"\uf155"},dolly:{code:"\uf472"},"dolly-flatbed":{code:"\uf474"},
donate:{code:"\uf4b9"},"door-closed":{code:"\uf52a"},"door-open":{code:"\uf52b"},"dot-circle":{code:"\uf192"},dove:{code:"\uf4ba"},download:{code:"\uf019"},draft2digital:{code:"\uf396"},"drafting-compass":{code:"\uf568"},dragon:{code:"\uf6d5"},"draw-polygon":{code:"\uf5ee"},dribbble:{code:"\uf17d"},"dribbble-square":{code:"\uf397"},dropbox:{code:"\uf16b"},drum:{code:"\uf569"},"drum-steelpan":{code:"\uf56a"},"drumstick-bite":{code:"\uf6d7"},drupal:{code:"\uf1a9"},dumbbell:{code:"\uf44b"},dumpster:{code:"\uf793"},
"dumpster-fire":{code:"\uf794"},dungeon:{code:"\uf6d9"},dyalog:{code:"\uf399"},earlybirds:{code:"\uf39a"},ebay:{code:"\uf4f4"},edge:{code:"\uf282"},edit:{code:"\uf044"},egg:{code:"\uf7fb"},eject:{code:"\uf052"},elementor:{code:"\uf430"},"ellipsis-h":{code:"\uf141"},"ellipsis-v":{code:"\uf142"},ello:{code:"\uf5f1"},ember:{code:"\uf423"},empire:{code:"\uf1d1"},envelope:{code:"\uf0e0"},"envelope-open":{code:"\uf2b6"},"envelope-open-text":{code:"\uf658"},"envelope-square":{code:"\uf199"},envira:{code:"\uf299"},
equals:{code:"\uf52c"},eraser:{code:"\uf12d"},erlang:{code:"\uf39d"},ethereum:{code:"\uf42e"},ethernet:{code:"\uf796"},etsy:{code:"\uf2d7"},"euro-sign":{code:"\uf153"},evernote:{code:"\uf839"},"exchange-alt":{code:"\uf362"},exclamation:{code:"\uf12a"},"exclamation-circle":{code:"\uf06a"},"exclamation-triangle":{code:"\uf071"},expand:{code:"\uf065"},"expand-alt":{code:"\uf424"},"expand-arrows-alt":{code:"\uf31e"},expeditedssl:{code:"\uf23e"},"external-link-alt":{code:"\uf35d"},"external-link-square-alt":{code:"\uf360"},
eye:{code:"\uf06e"},"eye-dropper":{code:"\uf1fb"},"eye-slash":{code:"\uf070"},facebook:{code:"\uf09a"},"facebook-f":{code:"\uf39e"},"facebook-messenger":{code:"\uf39f"},"facebook-square":{code:"\uf082"},fan:{code:"\uf863"},"fantasy-flight-games":{code:"\uf6dc"},"fast-backward":{code:"\uf049"},"fast-forward":{code:"\uf050"},fax:{code:"\uf1ac"},feather:{code:"\uf52d"},"feather-alt":{code:"\uf56b"},fedex:{code:"\uf797"},fedora:{code:"\uf798"},female:{code:"\uf182"},"fighter-jet":{code:"\uf0fb"},figma:{code:"\uf799"},
file:{code:"\uf15b"},"file-alt":{code:"\uf15c"},"file-archive":{code:"\uf1c6"},"file-audio":{code:"\uf1c7"},"file-code":{code:"\uf1c9"},"file-contract":{code:"\uf56c"},"file-csv":{code:"\uf6dd"},"file-download":{code:"\uf56d"},"file-excel":{code:"\uf1c3"},"file-export":{code:"\uf56e"},"file-image":{code:"\uf1c5"},"file-import":{code:"\uf56f"},"file-invoice":{code:"\uf570"},"file-invoice-dollar":{code:"\uf571"},"file-medical":{code:"\uf477"},"file-medical-alt":{code:"\uf478"},"file-pdf":{code:"\uf1c1"},
"file-powerpoint":{code:"\uf1c4"},"file-prescription":{code:"\uf572"},"file-signature":{code:"\uf573"},"file-upload":{code:"\uf574"},"file-video":{code:"\uf1c8"},"file-word":{code:"\uf1c2"},fill:{code:"\uf575"},"fill-drip":{code:"\uf576"},film:{code:"\uf008"},filter:{code:"\uf0b0"},fingerprint:{code:"\uf577"},fire:{code:"\uf06d"},"fire-alt":{code:"\uf7e4"},"fire-extinguisher":{code:"\uf134"},firefox:{code:"\uf269"},"firefox-browser":{code:"\uf907"},"first-aid":{code:"\uf479"},"first-order":{code:"\uf2b0"},
"first-order-alt":{code:"\uf50a"},firstdraft:{code:"\uf3a1"},fish:{code:"\uf578"},"fist-raised":{code:"\uf6de"},flag:{code:"\uf024"},"flag-checkered":{code:"\uf11e"},"flag-usa":{code:"\uf74d"},flask:{code:"\uf0c3"},flickr:{code:"\uf16e"},flipboard:{code:"\uf44d"},flushed:{code:"\uf579"},fly:{code:"\uf417"},folder:{code:"\uf07b"},"folder-minus":{code:"\uf65d"},"folder-open":{code:"\uf07c"},"folder-plus":{code:"\uf65e"},font:{code:"\uf031"},"font-awesome":{code:"\uf2b4"},"font-awesome-alt":{code:"\uf35c"},
"font-awesome-flag":{code:"\uf425"},"font-awesome-logo-full":{code:"\uf4e6"},fonticons:{code:"\uf280"},"fonticons-fi":{code:"\uf3a2"},"football-ball":{code:"\uf44e"},"fort-awesome":{code:"\uf286"},"fort-awesome-alt":{code:"\uf3a3"},forumbee:{code:"\uf211"},forward:{code:"\uf04e"},foursquare:{code:"\uf180"},"free-code-camp":{code:"\uf2c5"},freebsd:{code:"\uf3a4"},frog:{code:"\uf52e"},frown:{code:"\uf119"},"frown-open":{code:"\uf57a"},fulcrum:{code:"\uf50b"},"funnel-dollar":{code:"\uf662"},futbol:{code:"\uf1e3"},
"galactic-republic":{code:"\uf50c"},"galactic-senate":{code:"\uf50d"},gamepad:{code:"\uf11b"},"gas-pump":{code:"\uf52f"},gavel:{code:"\uf0e3"},gem:{code:"\uf3a5"},genderless:{code:"\uf22d"},"get-pocket":{code:"\uf265"},gg:{code:"\uf260"},"gg-circle":{code:"\uf261"},ghost:{code:"\uf6e2"},gift:{code:"\uf06b"},gifts:{code:"\uf79c"},git:{code:"\uf1d3"},"git-alt":{code:"\uf841"},"git-square":{code:"\uf1d2"},github:{code:"\uf09b"},"github-alt":{code:"\uf113"},"github-square":{code:"\uf092"},gitkraken:{code:"\uf3a6"},
gitlab:{code:"\uf296"},gitter:{code:"\uf426"},"glass-cheers":{code:"\uf79f"},"glass-martini":{code:"\uf000"},"glass-martini-alt":{code:"\uf57b"},"glass-whiskey":{code:"\uf7a0"},glasses:{code:"\uf530"},glide:{code:"\uf2a5"},"glide-g":{code:"\uf2a6"},globe:{code:"\uf0ac"},"globe-africa":{code:"\uf57c"},"globe-americas":{code:"\uf57d"},"globe-asia":{code:"\uf57e"},"globe-europe":{code:"\uf7a2"},gofore:{code:"\uf3a7"},"golf-ball":{code:"\uf450"},goodreads:{code:"\uf3a8"},"goodreads-g":{code:"\uf3a9"},
google:{code:"\uf1a0"},"google-drive":{code:"\uf3aa"},"google-play":{code:"\uf3ab"},"google-plus":{code:"\uf2b3"},"google-plus-g":{code:"\uf0d5"},"google-plus-square":{code:"\uf0d4"},"google-wallet":{code:"\uf1ee"},gopuram:{code:"\uf664"},"graduation-cap":{code:"\uf19d"},gratipay:{code:"\uf184"},grav:{code:"\uf2d6"},"greater-than":{code:"\uf531"},"greater-than-equal":{code:"\uf532"},grimace:{code:"\uf57f"},grin:{code:"\uf580"},"grin-alt":{code:"\uf581"},"grin-beam":{code:"\uf582"},"grin-beam-sweat":{code:"\uf583"},
"grin-hearts":{code:"\uf584"},"grin-squint":{code:"\uf585"},"grin-squint-tears":{code:"\uf586"},"grin-stars":{code:"\uf587"},"grin-tears":{code:"\uf588"},"grin-tongue":{code:"\uf589"},"grin-tongue-squint":{code:"\uf58a"},"grin-tongue-wink":{code:"\uf58b"},"grin-wink":{code:"\uf58c"},"grip-horizontal":{code:"\uf58d"},"grip-lines":{code:"\uf7a4"},"grip-lines-vertical":{code:"\uf7a5"},"grip-vertical":{code:"\uf58e"},gripfire:{code:"\uf3ac"},grunt:{code:"\uf3ad"},guitar:{code:"\uf7a6"},gulp:{code:"\uf3ae"},
"h-square":{code:"\uf0fd"},"hacker-news":{code:"\uf1d4"},"hacker-news-square":{code:"\uf3af"},hackerrank:{code:"\uf5f7"},hamburger:{code:"\uf805"},hammer:{code:"\uf6e3"},hamsa:{code:"\uf665"},"hand-holding":{code:"\uf4bd"},"hand-holding-heart":{code:"\uf4be"},"hand-holding-usd":{code:"\uf4c0"},"hand-lizard":{code:"\uf258"},"hand-middle-finger":{code:"\uf806"},"hand-paper":{code:"\uf256"},"hand-peace":{code:"\uf25b"},"hand-point-down":{code:"\uf0a7"},"hand-point-left":{code:"\uf0a5"},"hand-point-right":{code:"\uf0a4"},
"hand-point-up":{code:"\uf0a6"},"hand-pointer":{code:"\uf25a"},"hand-rock":{code:"\uf255"},"hand-scissors":{code:"\uf257"},"hand-spock":{code:"\uf259"},hands:{code:"\uf4c2"},"hands-helping":{code:"\uf4c4"},handshake:{code:"\uf2b5"},hanukiah:{code:"\uf6e6"},"hard-hat":{code:"\uf807"},hashtag:{code:"\uf292"},"hat-cowboy":{code:"\uf8c0"},"hat-cowboy-side":{code:"\uf8c1"},"hat-wizard":{code:"\uf6e8"},hdd:{code:"\uf0a0"},heading:{code:"\uf1dc"},headphones:{code:"\uf025"},"headphones-alt":{code:"\uf58f"},
headset:{code:"\uf590"},heart:{code:"\uf004"},"heart-broken":{code:"\uf7a9"},heartbeat:{code:"\uf21e"},helicopter:{code:"\uf533"},highlighter:{code:"\uf591"},hiking:{code:"\uf6ec"},hippo:{code:"\uf6ed"},hips:{code:"\uf452"},"hire-a-helper":{code:"\uf3b0"},history:{code:"\uf1da"},"hockey-puck":{code:"\uf453"},"holly-berry":{code:"\uf7aa"},home:{code:"\uf015"},hooli:{code:"\uf427"},hornbill:{code:"\uf592"},horse:{code:"\uf6f0"},"horse-head":{code:"\uf7ab"},hospital:{code:"\uf0f8"},"hospital-alt":{code:"\uf47d"},
"hospital-symbol":{code:"\uf47e"},"hot-tub":{code:"\uf593"},hotdog:{code:"\uf80f"},hotel:{code:"\uf594"},hotjar:{code:"\uf3b1"},hourglass:{code:"\uf254"},"hourglass-end":{code:"\uf253"},"hourglass-half":{code:"\uf252"},"hourglass-start":{code:"\uf251"},"house-damage":{code:"\uf6f1"},houzz:{code:"\uf27c"},hryvnia:{code:"\uf6f2"},html5:{code:"\uf13b"},hubspot:{code:"\uf3b2"},"i-cursor":{code:"\uf246"},"ice-cream":{code:"\uf810"},icicles:{code:"\uf7ad"},icons:{code:"\uf86d"},"id-badge":{code:"\uf2c1"},
"id-card":{code:"\uf2c2"},"id-card-alt":{code:"\uf47f"},ideal:{code:"\uf913"},igloo:{code:"\uf7ae"},image:{code:"\uf03e"},images:{code:"\uf302"},imdb:{code:"\uf2d8"},inbox:{code:"\uf01c"},indent:{code:"\uf03c"},industry:{code:"\uf275"},infinity:{code:"\uf534"},info:{code:"\uf129"},"info-circle":{code:"\uf05a"},instagram:{code:"\uf16d"},"instagram-square":{code:"\uf955"},intercom:{code:"\uf7af"},"internet-explorer":{code:"\uf26b"},invision:{code:"\uf7b0"},ioxhost:{code:"\uf208"},italic:{code:"\uf033"},
"itch-io":{code:"\uf83a"},itunes:{code:"\uf3b4"},"itunes-note":{code:"\uf3b5"},java:{code:"\uf4e4"},jedi:{code:"\uf669"},"jedi-order":{code:"\uf50e"},jenkins:{code:"\uf3b6"},jira:{code:"\uf7b1"},joget:{code:"\uf3b7"},joint:{code:"\uf595"},joomla:{code:"\uf1aa"},"journal-whills":{code:"\uf66a"},js:{code:"\uf3b8"},"js-square":{code:"\uf3b9"},jsfiddle:{code:"\uf1cc"},kaaba:{code:"\uf66b"},kaggle:{code:"\uf5fa"},key:{code:"\uf084"},keybase:{code:"\uf4f5"},keyboard:{code:"\uf11c"},keycdn:{code:"\uf3ba"},
khanda:{code:"\uf66d"},kickstarter:{code:"\uf3bb"},"kickstarter-k":{code:"\uf3bc"},kiss:{code:"\uf596"},"kiss-beam":{code:"\uf597"},"kiss-wink-heart":{code:"\uf598"},"kiwi-bird":{code:"\uf535"},korvue:{code:"\uf42f"},landmark:{code:"\uf66f"},language:{code:"\uf1ab"},laptop:{code:"\uf109"},"laptop-code":{code:"\uf5fc"},"laptop-medical":{code:"\uf812"},laravel:{code:"\uf3bd"},lastfm:{code:"\uf202"},"lastfm-square":{code:"\uf203"},laugh:{code:"\uf599"},"laugh-beam":{code:"\uf59a"},"laugh-squint":{code:"\uf59b"},
"laugh-wink":{code:"\uf59c"},"layer-group":{code:"\uf5fd"},leaf:{code:"\uf06c"},leanpub:{code:"\uf212"},lemon:{code:"\uf094"},less:{code:"\uf41d"},"less-than":{code:"\uf536"},"less-than-equal":{code:"\uf537"},"level-down-alt":{code:"\uf3be"},"level-up-alt":{code:"\uf3bf"},"life-ring":{code:"\uf1cd"},lightbulb:{code:"\uf0eb"},line:{code:"\uf3c0"},link:{code:"\uf0c1"},linkedin:{code:"\uf08c"},"linkedin-in":{code:"\uf0e1"},linode:{code:"\uf2b8"},linux:{code:"\uf17c"},"lira-sign":{code:"\uf195"},list:{code:"\uf03a"},
"list-alt":{code:"\uf022"},"list-ol":{code:"\uf0cb"},"list-ul":{code:"\uf0ca"},"location-arrow":{code:"\uf124"},lock:{code:"\uf023"},"lock-open":{code:"\uf3c1"},"long-arrow-alt-down":{code:"\uf309"},"long-arrow-alt-left":{code:"\uf30a"},"long-arrow-alt-right":{code:"\uf30b"},"long-arrow-alt-up":{code:"\uf30c"},"low-vision":{code:"\uf2a8"},"luggage-cart":{code:"\uf59d"},lyft:{code:"\uf3c3"},magento:{code:"\uf3c4"},magic:{code:"\uf0d0"},magnet:{code:"\uf076"},"mail-bulk":{code:"\uf674"},mailchimp:{code:"\uf59e"},
male:{code:"\uf183"},mandalorian:{code:"\uf50f"},map:{code:"\uf279"},"map-marked":{code:"\uf59f"},"map-marked-alt":{code:"\uf5a0"},"map-marker":{code:"\uf041"},"map-marker-alt":{code:"\uf3c5"},"map-pin":{code:"\uf276"},"map-signs":{code:"\uf277"},markdown:{code:"\uf60f"},marker:{code:"\uf5a1"},mars:{code:"\uf222"},"mars-double":{code:"\uf227"},"mars-stroke":{code:"\uf229"},"mars-stroke-h":{code:"\uf22b"},"mars-stroke-v":{code:"\uf22a"},mask:{code:"\uf6fa"},mastodon:{code:"\uf4f6"},maxcdn:{code:"\uf136"},
mdb:{code:"\uf8ca"},medal:{code:"\uf5a2"},medapps:{code:"\uf3c6"},medium:{code:"\uf23a"},"medium-m":{code:"\uf3c7"},medkit:{code:"\uf0fa"},medrt:{code:"\uf3c8"},meetup:{code:"\uf2e0"},megaport:{code:"\uf5a3"},meh:{code:"\uf11a"},"meh-blank":{code:"\uf5a4"},"meh-rolling-eyes":{code:"\uf5a5"},memory:{code:"\uf538"},mendeley:{code:"\uf7b3"},menorah:{code:"\uf676"},mercury:{code:"\uf223"},meteor:{code:"\uf753"},microblog:{code:"\uf91a"},microchip:{code:"\uf2db"},microphone:{code:"\uf130"},"microphone-alt":{code:"\uf3c9"},
"microphone-alt-slash":{code:"\uf539"},"microphone-slash":{code:"\uf131"},microscope:{code:"\uf610"},microsoft:{code:"\uf3ca"},minus:{code:"\uf068"},"minus-circle":{code:"\uf056"},"minus-square":{code:"\uf146"},mitten:{code:"\uf7b5"},mix:{code:"\uf3cb"},mixcloud:{code:"\uf289"},mixer:{code:"\uf956"},mizuni:{code:"\uf3cc"},mobile:{code:"\uf10b"},"mobile-alt":{code:"\uf3cd"},modx:{code:"\uf285"},monero:{code:"\uf3d0"},"money-bill":{code:"\uf0d6"},"money-bill-alt":{code:"\uf3d1"},"money-bill-wave":{code:"\uf53a"},
"money-bill-wave-alt":{code:"\uf53b"},"money-check":{code:"\uf53c"},"money-check-alt":{code:"\uf53d"},monument:{code:"\uf5a6"},moon:{code:"\uf186"},"mortar-pestle":{code:"\uf5a7"},mosque:{code:"\uf678"},motorcycle:{code:"\uf21c"},mountain:{code:"\uf6fc"},mouse:{code:"\uf8cc"},"mouse-pointer":{code:"\uf245"},"mug-hot":{code:"\uf7b6"},music:{code:"\uf001"},napster:{code:"\uf3d2"},neos:{code:"\uf612"},"network-wired":{code:"\uf6ff"},neuter:{code:"\uf22c"},newspaper:{code:"\uf1ea"},nimblr:{code:"\uf5a8"},
node:{code:"\uf419"},"node-js":{code:"\uf3d3"},"not-equal":{code:"\uf53e"},"notes-medical":{code:"\uf481"},npm:{code:"\uf3d4"},ns8:{code:"\uf3d5"},nutritionix:{code:"\uf3d6"},"object-group":{code:"\uf247"},"object-ungroup":{code:"\uf248"},odnoklassniki:{code:"\uf263"},"odnoklassniki-square":{code:"\uf264"},"oil-can":{code:"\uf613"},"old-republic":{code:"\uf510"},om:{code:"\uf679"},opencart:{code:"\uf23d"},openid:{code:"\uf19b"},opera:{code:"\uf26a"},"optin-monster":{code:"\uf23c"},orcid:{code:"\uf8d2"},
osi:{code:"\uf41a"},otter:{code:"\uf700"},outdent:{code:"\uf03b"},page4:{code:"\uf3d7"},pagelines:{code:"\uf18c"},pager:{code:"\uf815"},"paint-brush":{code:"\uf1fc"},"paint-roller":{code:"\uf5aa"},palette:{code:"\uf53f"},palfed:{code:"\uf3d8"},pallet:{code:"\uf482"},"paper-plane":{code:"\uf1d8"},paperclip:{code:"\uf0c6"},"parachute-box":{code:"\uf4cd"},paragraph:{code:"\uf1dd"},parking:{code:"\uf540"},passport:{code:"\uf5ab"},pastafarianism:{code:"\uf67b"},paste:{code:"\uf0ea"},patreon:{code:"\uf3d9"},
pause:{code:"\uf04c"},"pause-circle":{code:"\uf28b"},paw:{code:"\uf1b0"},paypal:{code:"\uf1ed"},peace:{code:"\uf67c"},pen:{code:"\uf304"},"pen-alt":{code:"\uf305"},"pen-fancy":{code:"\uf5ac"},"pen-nib":{code:"\uf5ad"},"pen-square":{code:"\uf14b"},"pencil-alt":{code:"\uf303"},"pencil-ruler":{code:"\uf5ae"},"penny-arcade":{code:"\uf704"},"people-carry":{code:"\uf4ce"},"pepper-hot":{code:"\uf816"},percent:{code:"\uf295"},percentage:{code:"\uf541"},periscope:{code:"\uf3da"},"person-booth":{code:"\uf756"},
phabricator:{code:"\uf3db"},"phoenix-framework":{code:"\uf3dc"},"phoenix-squadron":{code:"\uf511"},phone:{code:"\uf095"},"phone-alt":{code:"\uf879"},"phone-slash":{code:"\uf3dd"},"phone-square":{code:"\uf098"},"phone-square-alt":{code:"\uf87b"},"phone-volume":{code:"\uf2a0"},"photo-video":{code:"\uf87c"},php:{code:"\uf457"},"pied-piper":{code:"\uf2ae"},"pied-piper-alt":{code:"\uf1a8"},"pied-piper-hat":{code:"\uf4e5"},"pied-piper-pp":{code:"\uf1a7"},"pied-piper-square":{code:"\uf91e"},"piggy-bank":{code:"\uf4d3"},
pills:{code:"\uf484"},pinterest:{code:"\uf0d2"},"pinterest-p":{code:"\uf231"},"pinterest-square":{code:"\uf0d3"},"pizza-slice":{code:"\uf818"},"place-of-worship":{code:"\uf67f"},plane:{code:"\uf072"},"plane-arrival":{code:"\uf5af"},"plane-departure":{code:"\uf5b0"},play:{code:"\uf04b"},"play-circle":{code:"\uf144"},playstation:{code:"\uf3df"},plug:{code:"\uf1e6"},plus:{code:"\uf067"},"plus-circle":{code:"\uf055"},"plus-square":{code:"\uf0fe"},podcast:{code:"\uf2ce"},poll:{code:"\uf681"},"poll-h":{code:"\uf682"},
poo:{code:"\uf2fe"},"poo-storm":{code:"\uf75a"},poop:{code:"\uf619"},portrait:{code:"\uf3e0"},"pound-sign":{code:"\uf154"},"power-off":{code:"\uf011"},pray:{code:"\uf683"},"praying-hands":{code:"\uf684"},prescription:{code:"\uf5b1"},"prescription-bottle":{code:"\uf485"},"prescription-bottle-alt":{code:"\uf486"},print:{code:"\uf02f"},procedures:{code:"\uf487"},"product-hunt":{code:"\uf288"},"project-diagram":{code:"\uf542"},pushed:{code:"\uf3e1"},"puzzle-piece":{code:"\uf12e"},python:{code:"\uf3e2"},
qq:{code:"\uf1d6"},qrcode:{code:"\uf029"},question:{code:"\uf128"},"question-circle":{code:"\uf059"},quidditch:{code:"\uf458"},quinscape:{code:"\uf459"},quora:{code:"\uf2c4"},"quote-left":{code:"\uf10d"},"quote-right":{code:"\uf10e"},quran:{code:"\uf687"},"r-project":{code:"\uf4f7"},radiation:{code:"\uf7b9"},"radiation-alt":{code:"\uf7ba"},rainbow:{code:"\uf75b"},random:{code:"\uf074"},"raspberry-pi":{code:"\uf7bb"},ravelry:{code:"\uf2d9"},react:{code:"\uf41b"},reacteurope:{code:"\uf75d"},readme:{code:"\uf4d5"},
rebel:{code:"\uf1d0"},receipt:{code:"\uf543"},"record-vinyl":{code:"\uf8d9"},recycle:{code:"\uf1b8"},"red-river":{code:"\uf3e3"},reddit:{code:"\uf1a1"},"reddit-alien":{code:"\uf281"},"reddit-square":{code:"\uf1a2"},redhat:{code:"\uf7bc"},redo:{code:"\uf01e"},"redo-alt":{code:"\uf2f9"},registered:{code:"\uf25d"},"remove-format":{code:"\uf87d"},renren:{code:"\uf18b"},reply:{code:"\uf3e5"},"reply-all":{code:"\uf122"},replyd:{code:"\uf3e6"},republican:{code:"\uf75e"},researchgate:{code:"\uf4f8"},resolving:{code:"\uf3e7"},
restroom:{code:"\uf7bd"},retweet:{code:"\uf079"},rev:{code:"\uf5b2"},ribbon:{code:"\uf4d6"},ring:{code:"\uf70b"},road:{code:"\uf018"},robot:{code:"\uf544"},rocket:{code:"\uf135"},rocketchat:{code:"\uf3e8"},rockrms:{code:"\uf3e9"},route:{code:"\uf4d7"},rss:{code:"\uf09e"},"rss-square":{code:"\uf143"},"ruble-sign":{code:"\uf158"},ruler:{code:"\uf545"},"ruler-combined":{code:"\uf546"},"ruler-horizontal":{code:"\uf547"},"ruler-vertical":{code:"\uf548"},running:{code:"\uf70c"},"rupee-sign":{code:"\uf156"},
"sad-cry":{code:"\uf5b3"},"sad-tear":{code:"\uf5b4"},safari:{code:"\uf267"},salesforce:{code:"\uf83b"},sass:{code:"\uf41e"},satellite:{code:"\uf7bf"},"satellite-dish":{code:"\uf7c0"},save:{code:"\uf0c7"},schlix:{code:"\uf3ea"},school:{code:"\uf549"},screwdriver:{code:"\uf54a"},scribd:{code:"\uf28a"},scroll:{code:"\uf70e"},"sd-card":{code:"\uf7c2"},search:{code:"\uf002"},"search-dollar":{code:"\uf688"},"search-location":{code:"\uf689"},"search-minus":{code:"\uf010"},"search-plus":{code:"\uf00e"},searchengin:{code:"\uf3eb"},
seedling:{code:"\uf4d8"},sellcast:{code:"\uf2da"},sellsy:{code:"\uf213"},server:{code:"\uf233"},servicestack:{code:"\uf3ec"},shapes:{code:"\uf61f"},share:{code:"\uf064"},"share-alt":{code:"\uf1e0"},"share-alt-square":{code:"\uf1e1"},"share-square":{code:"\uf14d"},"shekel-sign":{code:"\uf20b"},"shield-alt":{code:"\uf3ed"},ship:{code:"\uf21a"},"shipping-fast":{code:"\uf48b"},shirtsinbulk:{code:"\uf214"},"shoe-prints":{code:"\uf54b"},shopify:{code:"\uf957"},"shopping-bag":{code:"\uf290"},"shopping-basket":{code:"\uf291"},
"shopping-cart":{code:"\uf07a"},shopware:{code:"\uf5b5"},shower:{code:"\uf2cc"},"shuttle-van":{code:"\uf5b6"},sign:{code:"\uf4d9"},"sign-in-alt":{code:"\uf2f6"},"sign-language":{code:"\uf2a7"},"sign-out-alt":{code:"\uf2f5"},signal:{code:"\uf012"},signature:{code:"\uf5b7"},"sim-card":{code:"\uf7c4"},simplybuilt:{code:"\uf215"},sistrix:{code:"\uf3ee"},sitemap:{code:"\uf0e8"},sith:{code:"\uf512"},skating:{code:"\uf7c5"},sketch:{code:"\uf7c6"},skiing:{code:"\uf7c9"},"skiing-nordic":{code:"\uf7ca"},skull:{code:"\uf54c"},
"skull-crossbones":{code:"\uf714"},skyatlas:{code:"\uf216"},skype:{code:"\uf17e"},slack:{code:"\uf198"},"slack-hash":{code:"\uf3ef"},slash:{code:"\uf715"},sleigh:{code:"\uf7cc"},"sliders-h":{code:"\uf1de"},slideshare:{code:"\uf1e7"},smile:{code:"\uf118"},"smile-beam":{code:"\uf5b8"},"smile-wink":{code:"\uf4da"},smog:{code:"\uf75f"},smoking:{code:"\uf48d"},"smoking-ban":{code:"\uf54d"},sms:{code:"\uf7cd"},snapchat:{code:"\uf2ab"},"snapchat-ghost":{code:"\uf2ac"},"snapchat-square":{code:"\uf2ad"},snowboarding:{code:"\uf7ce"},
snowflake:{code:"\uf2dc"},snowman:{code:"\uf7d0"},snowplow:{code:"\uf7d2"},socks:{code:"\uf696"},"solar-panel":{code:"\uf5ba"},sort:{code:"\uf0dc"},"sort-alpha-down":{code:"\uf15d"},"sort-alpha-down-alt":{code:"\uf881"},"sort-alpha-up":{code:"\uf15e"},"sort-alpha-up-alt":{code:"\uf882"},"sort-amount-down":{code:"\uf160"},"sort-amount-down-alt":{code:"\uf884"},"sort-amount-up":{code:"\uf161"},"sort-amount-up-alt":{code:"\uf885"},"sort-down":{code:"\uf0dd"},"sort-numeric-down":{code:"\uf162"},"sort-numeric-down-alt":{code:"\uf886"},
"sort-numeric-up":{code:"\uf163"},"sort-numeric-up-alt":{code:"\uf887"},"sort-up":{code:"\uf0de"},soundcloud:{code:"\uf1be"},sourcetree:{code:"\uf7d3"},spa:{code:"\uf5bb"},"space-shuttle":{code:"\uf197"},speakap:{code:"\uf3f3"},"speaker-deck":{code:"\uf83c"},"spell-check":{code:"\uf891"},spider:{code:"\uf717"},spinner:{code:"\uf110"},splotch:{code:"\uf5bc"},spotify:{code:"\uf1bc"},"spray-can":{code:"\uf5bd"},square:{code:"\uf0c8"},"square-full":{code:"\uf45c"},"square-root-alt":{code:"\uf698"},squarespace:{code:"\uf5be"},
"stack-exchange":{code:"\uf18d"},"stack-overflow":{code:"\uf16c"},stackpath:{code:"\uf842"},stamp:{code:"\uf5bf"},star:{code:"\uf005"},"star-and-crescent":{code:"\uf699"},"star-half":{code:"\uf089"},"star-half-alt":{code:"\uf5c0"},"star-of-david":{code:"\uf69a"},"star-of-life":{code:"\uf621"},staylinked:{code:"\uf3f5"},steam:{code:"\uf1b6"},"steam-square":{code:"\uf1b7"},"steam-symbol":{code:"\uf3f6"},"step-backward":{code:"\uf048"},"step-forward":{code:"\uf051"},stethoscope:{code:"\uf0f1"},"sticker-mule":{code:"\uf3f7"},
"sticky-note":{code:"\uf249"},stop:{code:"\uf04d"},"stop-circle":{code:"\uf28d"},stopwatch:{code:"\uf2f2"},store:{code:"\uf54e"},"store-alt":{code:"\uf54f"},strava:{code:"\uf428"},stream:{code:"\uf550"},"street-view":{code:"\uf21d"},strikethrough:{code:"\uf0cc"},stripe:{code:"\uf429"},"stripe-s":{code:"\uf42a"},stroopwafel:{code:"\uf551"},studiovinari:{code:"\uf3f8"},stumbleupon:{code:"\uf1a4"},"stumbleupon-circle":{code:"\uf1a3"},subscript:{code:"\uf12c"},subway:{code:"\uf239"},suitcase:{code:"\uf0f2"},
"suitcase-rolling":{code:"\uf5c1"},sun:{code:"\uf185"},superpowers:{code:"\uf2dd"},superscript:{code:"\uf12b"},supple:{code:"\uf3f9"},surprise:{code:"\uf5c2"},suse:{code:"\uf7d6"},swatchbook:{code:"\uf5c3"},swift:{code:"\uf8e1"},swimmer:{code:"\uf5c4"},"swimming-pool":{code:"\uf5c5"},symfony:{code:"\uf83d"},synagogue:{code:"\uf69b"},sync:{code:"\uf021"},"sync-alt":{code:"\uf2f1"},syringe:{code:"\uf48e"},table:{code:"\uf0ce"},"table-tennis":{code:"\uf45d"},tablet:{code:"\uf10a"},"tablet-alt":{code:"\uf3fa"},
tablets:{code:"\uf490"},"tachometer-alt":{code:"\uf3fd"},tag:{code:"\uf02b"},tags:{code:"\uf02c"},tape:{code:"\uf4db"},tasks:{code:"\uf0ae"},taxi:{code:"\uf1ba"},teamspeak:{code:"\uf4f9"},teeth:{code:"\uf62e"},"teeth-open":{code:"\uf62f"},telegram:{code:"\uf2c6"},"telegram-plane":{code:"\uf3fe"},"temperature-high":{code:"\uf769"},"temperature-low":{code:"\uf76b"},"tencent-weibo":{code:"\uf1d5"},tenge:{code:"\uf7d7"},terminal:{code:"\uf120"},"text-height":{code:"\uf034"},"text-width":{code:"\uf035"},
th:{code:"\uf00a"},"th-large":{code:"\uf009"},"th-list":{code:"\uf00b"},"the-red-yeti":{code:"\uf69d"},"theater-masks":{code:"\uf630"},themeco:{code:"\uf5c6"},themeisle:{code:"\uf2b2"},thermometer:{code:"\uf491"},"thermometer-empty":{code:"\uf2cb"},"thermometer-full":{code:"\uf2c7"},"thermometer-half":{code:"\uf2c9"},"thermometer-quarter":{code:"\uf2ca"},"thermometer-three-quarters":{code:"\uf2c8"},"think-peaks":{code:"\uf731"},"thumbs-down":{code:"\uf165"},"thumbs-up":{code:"\uf164"},thumbtack:{code:"\uf08d"},
"ticket-alt":{code:"\uf3ff"},times:{code:"\uf00d"},"times-circle":{code:"\uf057"},tint:{code:"\uf043"},"tint-slash":{code:"\uf5c7"},tired:{code:"\uf5c8"},"toggle-off":{code:"\uf204"},"toggle-on":{code:"\uf205"},toilet:{code:"\uf7d8"},"toilet-paper":{code:"\uf71e"},toolbox:{code:"\uf552"},tools:{code:"\uf7d9"},tooth:{code:"\uf5c9"},torah:{code:"\uf6a0"},"torii-gate":{code:"\uf6a1"},tractor:{code:"\uf722"},"trade-federation":{code:"\uf513"},trademark:{code:"\uf25c"},"traffic-light":{code:"\uf637"},
trailer:{code:"\uf941"},train:{code:"\uf238"},tram:{code:"\uf7da"},transgender:{code:"\uf224"},"transgender-alt":{code:"\uf225"},trash:{code:"\uf1f8"},"trash-alt":{code:"\uf2ed"},"trash-restore":{code:"\uf829"},"trash-restore-alt":{code:"\uf82a"},tree:{code:"\uf1bb"},trello:{code:"\uf181"},tripadvisor:{code:"\uf262"},trophy:{code:"\uf091"},truck:{code:"\uf0d1"},"truck-loading":{code:"\uf4de"},"truck-monster":{code:"\uf63b"},"truck-moving":{code:"\uf4df"},"truck-pickup":{code:"\uf63c"},tshirt:{code:"\uf553"},
tty:{code:"\uf1e4"},tumblr:{code:"\uf173"},"tumblr-square":{code:"\uf174"},tv:{code:"\uf26c"},twitch:{code:"\uf1e8"},twitter:{code:"\uf099"},"twitter-square":{code:"\uf081"},typo3:{code:"\uf42b"},uber:{code:"\uf402"},ubuntu:{code:"\uf7df"},uikit:{code:"\uf403"},umbraco:{code:"\uf8e8"},umbrella:{code:"\uf0e9"},"umbrella-beach":{code:"\uf5ca"},underline:{code:"\uf0cd"},undo:{code:"\uf0e2"},"undo-alt":{code:"\uf2ea"},uniregistry:{code:"\uf404"},unity:{code:"\uf949"},"universal-access":{code:"\uf29a"},
university:{code:"\uf19c"},unlink:{code:"\uf127"},unlock:{code:"\uf09c"},"unlock-alt":{code:"\uf13e"},untappd:{code:"\uf405"},upload:{code:"\uf093"},ups:{code:"\uf7e0"},usb:{code:"\uf287"},user:{code:"\uf007"},"user-alt":{code:"\uf406"},"user-alt-slash":{code:"\uf4fa"},"user-astronaut":{code:"\uf4fb"},"user-check":{code:"\uf4fc"},"user-circle":{code:"\uf2bd"},"user-clock":{code:"\uf4fd"},"user-cog":{code:"\uf4fe"},"user-edit":{code:"\uf4ff"},"user-friends":{code:"\uf500"},"user-graduate":{code:"\uf501"},
"user-injured":{code:"\uf728"},"user-lock":{code:"\uf502"},"user-md":{code:"\uf0f0"},"user-minus":{code:"\uf503"},"user-ninja":{code:"\uf504"},"user-nurse":{code:"\uf82f"},"user-plus":{code:"\uf234"},"user-secret":{code:"\uf21b"},"user-shield":{code:"\uf505"},"user-slash":{code:"\uf506"},"user-tag":{code:"\uf507"},"user-tie":{code:"\uf508"},"user-times":{code:"\uf235"},users:{code:"\uf0c0"},"users-cog":{code:"\uf509"},usps:{code:"\uf7e1"},ussunnah:{code:"\uf407"},"utensil-spoon":{code:"\uf2e5"},utensils:{code:"\uf2e7"},
vaadin:{code:"\uf408"},"vector-square":{code:"\uf5cb"},venus:{code:"\uf221"},"venus-double":{code:"\uf226"},"venus-mars":{code:"\uf228"},viacoin:{code:"\uf237"},viadeo:{code:"\uf2a9"},"viadeo-square":{code:"\uf2aa"},vial:{code:"\uf492"},vials:{code:"\uf493"},viber:{code:"\uf409"},video:{code:"\uf03d"},"video-slash":{code:"\uf4e2"},vihara:{code:"\uf6a7"},vimeo:{code:"\uf40a"},"vimeo-square":{code:"\uf194"},"vimeo-v":{code:"\uf27d"},vine:{code:"\uf1ca"},vk:{code:"\uf189"},vnv:{code:"\uf40b"},voicemail:{code:"\uf897"},
"volleyball-ball":{code:"\uf45f"},"volume-down":{code:"\uf027"},"volume-mute":{code:"\uf6a9"},"volume-off":{code:"\uf026"},"volume-up":{code:"\uf028"},"vote-yea":{code:"\uf772"},"vr-cardboard":{code:"\uf729"},vuejs:{code:"\uf41f"},walking:{code:"\uf554"},wallet:{code:"\uf555"},warehouse:{code:"\uf494"},water:{code:"\uf773"},"wave-square":{code:"\uf83e"},waze:{code:"\uf83f"},weebly:{code:"\uf5cc"},weibo:{code:"\uf18a"},weight:{code:"\uf496"},"weight-hanging":{code:"\uf5cd"},weixin:{code:"\uf1d7"},
whatsapp:{code:"\uf232"},"whatsapp-square":{code:"\uf40c"},wheelchair:{code:"\uf193"},whmcs:{code:"\uf40d"},wifi:{code:"\uf1eb"},"wikipedia-w":{code:"\uf266"},wind:{code:"\uf72e"},"window-close":{code:"\uf410"},"window-maximize":{code:"\uf2d0"},"window-minimize":{code:"\uf2d1"},"window-restore":{code:"\uf2d2"},windows:{code:"\uf17a"},"wine-bottle":{code:"\uf72f"},"wine-glass":{code:"\uf4e3"},"wine-glass-alt":{code:"\uf5ce"},wix:{code:"\uf5cf"},"wizards-of-the-coast":{code:"\uf730"},"wolf-pack-battalion":{code:"\uf514"},
"won-sign":{code:"\uf159"},wordpress:{code:"\uf19a"},"wordpress-simple":{code:"\uf411"},wpbeginner:{code:"\uf297"},wpexplorer:{code:"\uf2de"},wpforms:{code:"\uf298"},wpressr:{code:"\uf3e4"},wrench:{code:"\uf0ad"},"x-ray":{code:"\uf497"},xbox:{code:"\uf412"},xing:{code:"\uf168"},"xing-square":{code:"\uf169"},"y-combinator":{code:"\uf23b"},yahoo:{code:"\uf19e"},yammer:{code:"\uf840"},yandex:{code:"\uf413"},"yandex-international":{code:"\uf414"},yarn:{code:"\uf7e3"},yelp:{code:"\uf1e9"},"yen-sign":{code:"\uf157"},
"yin-yang":{code:"\uf6ad"},yoast:{code:"\uf2b1"},youtube:{code:"\uf167"},"youtube-square":{code:"\uf431"},zhihu:{code:"\uf63f"}});nr.Icons=oK;nr.Icons=oK;nr.Icons=oK;var Hd=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js");Hd.vdom=ZE;Hd.promise=oe;Hd.arr=Qe;Hd.tree=Yv;Hd.obj=lf;Hd.string=Hg;Hd.addOrChangeCSSDeclaration=oi;Hd.addOrChangeLinkedCSS=Iq;Hd.defaultStyle=nc;Hd.renderGradient=Xw;Hd.defaultAttributes=It;Hd.defaultCSS="\n\n/*-=- html fixes -=-*/\n\nhtml {\n  overflow: visible;\n}\n\ntextarea.lively-text-input.debug {\n  z-index: 20 !important;\n  opacity: 1 !important;\n  background: rgba(0,255,0,0.5) !important;\n}\n\n.no-html-select {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.hiddenScrollbar::-webkit-scrollbar {\n  /* This is the magic bit */\n  display: none;\n}\n\n\n/*-=- generic morphic -=-*/\n\n.Morph {\n  outline: none;\n  /*for aliasing issue in chrome: http://stackoverflow.com/questions/6492027/css-transform-jagged-edges-in-chrome*/\n  /* -webkit-backface-visibility: hidden; */\n\n  /*include border size in extent of element*/\n  box-sizing: border-box;\n\n  /*don't use dom selection on morphs*/\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.Morph img {\n  -moz-user-select: none;\n}\n\n.Tooltip {\n  z-index: 3;\n}\n\n.Hand {\n  z-index: 1;\n}\n\n/*-=- halos -=-*/\n\n.Halo {\n  z-index: 2;\n}\n\n.ProportionalLayoutHalo, .FlexLayoutHalo, .GridLayoutHalo, .TilingLayoutHalo {\n  z-index: auto;\n}\n\n.HaloItem:not(.NameHaloItem) {\n  /*FIXME: we shouldn't need to hardcode the size...*/\n  line-height: 24px !important;\n  text-align: center;\n  vertical-align: middle;\n}\n\n.halo-mesh {\n  background-color:transparent;\n  background-image: linear-gradient(rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 2px, transparent 2px),\n  linear-gradient(rgba(0,0,0,.1) 1px, transparent 1px),\n  linear-gradient(90deg, rgba(0,0,0,.1) 1px, transparent 1px);\n  background-size:100px 100px, 100px 100px, 10px 10px, 10px 10px;\n  background-position:-2px -2px, -2px -2px, -1px -1px, -1px -1px;\n}\n\n/*-=- text -=-*/\n\n.center-text {\n  text-align: center;\n}\n\n.v-center-text {\n  position: relative;\n  top: 50%;\n}\n\ndiv.text-layer span {\n  line-height: normal;\n}\n\n/*-=- text -=-*/\n\n.Label span {\n  white-space: pre;\n  float: left;\n  line-height: initial;\n  -moz-user-select: none;\n}\n\n.Text .annotation {\n  text-align: right;\n  position: absolute;\n  right: 0;\n}\n\n.Label .annotation {\n/*  vertical-align: middle;\n  height: 100%;*/\n  /*vertical align*/\n  float: right;\n  position: relative;\n  top: 50%;\n  text-align: right;\n}\n\n.truncated-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/*-=- input elements -=-*/\n\ninput::-webkit-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput::-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-ms-input-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:-moz-placeholder {\n  color: rgb(202, 202, 202);\n}\ninput:placeholder {\n  color: rgb(202, 202, 202);\n}\n\n/*-=- input elements -=-*/\n.Morph svg .path-point {\n  cursor: move; /* fallback if grab cursor is unsupported */\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  fill: red;\n}\n\n";
Hd.pathAttributes=Bv;Hd.svgAttributes=Ww;Hd.renderMorph=Yw;Hd.Transform=Aj;Hd.pt=nf;Hd.getSvgVertices=Dd;Hd.config=vk;var pK=Hd.vdom;Hd.h=pK.h;Hd.diff=pK.diff;Hd.patch=pK.patch;Hd.createNode=pK.create;Hd.svgNs="http://www.w3.org/2000/svg";Hd.CanvasHook=function(d){this.canvasMorph=d};Hd.CanvasHook.prototype.hook=function(d,k,n){this.canvasMorph.afterRender(d,this.canvasMorph._canvas!==d&&"CANVAS"==d.tagName)};Hd.InitStroke=function(d,k,n){this.path=d;this.renderer=k;this.reverse=n};Hd.InitStroke.prototype.hook=
function(d,k,n){k=this.path.drawnProportion||0;0!=k&&(d.setAttribute("stroke-width",this.path.borderWidth.valueOf()+1),d.setAttribute("stroke-dasharray",d.getTotalLength()),d.setAttribute("stroke-dashoffset",d.getTotalLength()*(this.reverse?1-k:-1+(1-k))))};var qK=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/renderer.js"),n=k.hasOwnProperty("Renderer")&&"function"===typeof k.Renderer?k.Renderer:k.Renderer=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){if(!b||!b.isMorph)throw Error("Trying to initialize renderer with an invalid world morph: "+b);if(!(e&&"nodeType"in e))throw Error("Trying to initialize renderer with an invalid root node: "+e);l||(l={window:System.global,document:e.ownerDocument});this.worldMorph=b;b._renderer=this;this.rootNode=e;this.domNode=null;this.domEnvironment=l;this.renderMap=new WeakMap;this.fixedMorphNodeMap=new Map;this.renderWorldLoopLater=
this.renderWorldLoopProcess=null;this.requestAnimationFrame=l.window.requestAnimationFrame.bind(l.window)}},{key:"clear",value:function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return e=b.domNode,a.setCatchFinallyBlocks(2),a.yield(b.stopRenderWorldLoop(),4);case 4:a.leaveTryBlock(3);break;case 2:a.enterCatchBlock();case 3:e&&(l=e.parentNode,l.removeChild(e),[].concat($jscomp.arrayFromIterable(b.fixedMorphNodeMap.values())).forEach(function(f){return l.removeChild(f)})),
b.domNode=null,b.renderMap=new WeakMap,a.jumpToEnd()}})}},{key:"ensureDefaultCSS",value:function(){var b=this;return Hd.promise.waitFor(3E3,function(){return b.domNode.ownerDocument}).then(function(e){return Promise.all([Hd.addOrChangeCSSDeclaration("lively-morphic-css",Hd.defaultCSS,e),Hd.addOrChangeLinkedCSS("lively-ibm-plex",Hd.config.css.ibmPlex),Hd.addOrChangeLinkedCSS("lively-font-awesome",Hd.config.css.fontAwesome,e,!1),Hd.addOrChangeLinkedCSS("lively-font-inconsolata",Hd.config.css.inconsolata,
e,!1)])})}},{key:"startRenderWorldLoop",value:function(){var b=this;this._stopped=!1;this._renderWorldLoopLater=null;this.renderWorldLoopProcess=this.requestAnimationFrame(function(){return b.startRenderWorldLoop()});return this.renderStep()}},{key:"stopRenderWorldLoop",value:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b._stopped=!0;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopProcess);b.renderWorldLoopProcess=null;b.domEnvironment.window.cancelAnimationFrame(b.renderWorldLoopLater);
b.renderWorldLoopLater=null;return e.yield(Hd.promise.waitFor(2E3,function(){return!b.worldMorph.needsRerender()}),0)})}},{key:"renderLater",value:function(b){var e=this;this.renderWorldLoopLaterCounter=void 0===b?10:b;this.renderWorldLoopLater||this._stopped||(this.renderWorldLoopLater=this.requestAnimationFrame(function(){e.renderWorldLoopLater=null;0<e.renderWorldLoopLaterCounter&&e.renderLater(e.renderWorldLoopLaterCounter-1);try{e.renderStep()}catch(l){console.error("Error rendering morphs:",
l)}}))}},{key:"renderStep",value:function(){this.worldMorph.renderAsRoot(this);return this}},{key:"getNodeForMorph",value:function(b){var e="#"+Hd.string.regExpEscape(b.id),l=this.domNode&&this.domNode.querySelector(e);this.domNode&&this.domNode.id==b.id&&(l=this.domNode);if(l)return l;b=$jscomp.makeIterator(this.fixedMorphNodeMap.values());for(l=b.next();!l.done;l=b.next())if(l=l.value.querySelector(e))return l;return null}},{key:"getMorphForNode",value:function(b){return this.worldMorph?this.worldMorph.withAllSubmorphsDetect(function(e){return e.id===
b.id}):null}},{key:"render",value:function(b){if(!b.needsRerender()){var e=this.renderMap.get(b);if(e)return e}b.aboutToRender(this);e=b.render(this);this.renderMap.set(b,e);return e}},{key:"renderAsFixed",value:function(b){var e=this.render(b);b.isHTMLMorph||(e.properties.style.position="fixed");if(this.worldMorph.isEmbedded){b=this.domNode.getBoundingClientRect();var l=e.properties.style,a=l.left;e.properties.style.top=Number.parseInt(l.top)+b.y+"px";e.properties.style.left=Number.parseInt(a)+b.x+
"px"}return e}},{key:"renderFixedMorphs",value:function(b,e){var l=this;e=this.domNode;var a=this.fixedMorphNodeMap;if((b.length||a.size)&&e&&e.parentNode){e=e.parentNode;for(var f=$jscomp.makeIterator(a),m=f.next();!m.done;m=f.next()){var q=$jscomp.makeIterator(m.value);m=q.next().value;q=q.next().value;b.includes(m)||(q.parentNode&&q.parentNode.removeChild(q),a.delete(m))}m=b.map(function(B){return a.get(B)});var r=b.map(function(B){return B.id});f=[].concat($jscomp.arrayFromIterable(e.children)).map(function(B){return B.id}).filter(function(B){return r.includes(B)});
f=!Hd.arr.equals(r,f);var u=new WeakMap;if(f){var v=new WeakMap;q=Hd.arr.compact(Hd.arr.flatten(b.map(function(B){return B.withAllSubmorphsDo(function(C){return l.getNodeForMorph(C)})})));q.forEach(function(B){return v.set(B,B.scrollTop)});m.map(function(B){return B&&B.parentNode&&B.parentNode.removeChild(B)});q.forEach(function(B){v.get(B)!=B.scrollTop&&u.set(B,v.get(B))})}b=$jscomp.makeIterator(b);for(m=b.next();!m.done;m=b.next()){m=m.value;q=this.renderMap.get(m)||this.renderAsFixed(m);var y=
this.renderAsFixed(m);y=Hd.diff(q,y);var z=a.get(m);z||(z=Hd.createNode(q,this.domEnvironment),a.set(m,z));z.parentNode||e.appendChild(z);f&&m.withAllSubmorphsDo(function(B){return l.getNodeForMorph(B)}).forEach(function(B){u.has(B)&&(B.scrollTop=u.get(B))});Hd.patch(z,y)}}}},{key:"renderMorph",value:function(b){var e=this.renderSubmorphs(b);return Hd.h("div",Object.assign({},Hd.defaultAttributes(b,this),{style:Hd.defaultStyle(b)}),e)}},{key:"renderSubmorphs",value:function(b){return this.renderSelectedSubmorphs(b,
b.submorphs)}},{key:"renderSelectedSubmorphs",value:function(b,e){var l=b.borderWidthLeft,a=b.borderWidthTop,f=b.origin,m=f.x;f=f.y;for(var q=e.length-1,r=Array(q+1);0<=q;q--)r[q]=this.render(e[q]);e={};return Hd.h("div",{style:Object.assign({position:"absolute",left:m-(b.isPath?0:l)+"px",top:f-(b.isPath?0:a)+"px"},b.isPolygon?Object.assign({height:"100%",width:"100%",overflow:b.clipMode},"visible"!==b.clipMode?(e[navigator.userAgent.includes("AppleWebKit")?"-webkit-clip-path":"clip-path"]="url(#clipPath"+
b.id+")",e):{}):{})},r)}},{key:"renderWorld",value:function(b){for(var e=b.submorphs,l=[],a=[],f=0;f<e.length;f++){var m=e[f];m.hasFixedPosition?a.push(m):l.push(m)}e=this.renderSelectedSubmorphs(b,l);b=Hd.h("div",Object.assign({},Hd.defaultAttributes(b,this),{style:Hd.defaultStyle(b)}),e);b.fixedMorphs=a;return b}},{key:"renderImage",value:function(b){var e=b.imageUrl;if(e.startsWith("data:")){var l=e.indexOf(","),a=e.substring(5,l),f=$jscomp.makeIterator(a.split(";"));a=f.next().value;f=f.next().value;
l=e.substring(l+1);"base64"!==f&&(e=Hd.string.createDataURI(l,a))}return Hd.h("div",Object.assign({},Hd.defaultAttributes(b,this),{style:Hd.defaultStyle(b)}),[Hd.h("img",{src:e,alt:b.tooltip||"",draggable:!1,style:{"pointer-events":"none",position:"absolute",left:0,width:"100%",height:"100%"}}),this.renderSubmorphs(b)])}},{key:"renderCanvas",value:function(b){return Hd.h("div",Object.assign({},Hd.defaultAttributes(b,this),{style:Hd.defaultStyle(b)}),[Hd.h("canvas",{width:b.width,height:b.height,style:{"pointer-events":"none",
position:"absolute"},canvasHook:new Hd.CanvasHook(b)}),this.renderSubmorphs(b)])}},{key:"renderCheckBox",value:function(b){return Hd.h("div",Object.assign({},Hd.defaultAttributes(b,this),{style:Hd.defaultStyle(b)}),[Hd.h("input",{type:"checkbox",checked:b.checked,disabled:!b.active,draggable:!1,style:{"pointer-events":"none",width:"15px",height:"15px",position:"absolute"}}),this.renderSubmorphs(b)])}},{key:"renderPath",value:function(b){var e=b.startMarker,l=b.endMarker,a=b.showControlPoints,f=Hd.getSvgVertices(b.vertices),
m=Hd.h("path",Object.assign({namespace:Hd.svgNs,id:"svg"+b.id},Hd.pathAttributes(b))),q=Hd.h("mask",{namespace:Hd.svgNs,id:"mask"+b.id},[Hd.h("rect",{namespace:Hd.svgNs,attributes:{fill:"white",x:0,y:0,width:b.width+20,height:b.height+20}}),Hd.h("path",{namespace:Hd.svgNs,initStroke:new Hd.InitStroke(b,this,!0),attributes:{d:f,stroke:"black",fill:"none"}}),Hd.h("path",{namespace:Hd.svgNs,initStroke:new Hd.InitStroke(b,this,!1),attributes:{d:f,stroke:"white",fill:"none"}})]);f=[Hd.h("clipPath",{namespace:Hd.svgNs,
id:"clipPath"+b.id},Hd.h("path",{namespace:Hd.svgNs,attributes:{d:f,fill:"white"}})),q];e&&(e.id||(e.id="start-marker"),m.properties.attributes["marker-start"]="url(#"+b.id+"-"+e.id+")",f=[],f.push(this._renderPath_Marker(b,e)));l&&(l.id||(l.id="end-marker"),m.properties.attributes["marker-end"]="url(#"+b.id+"-"+l.id+")",f||(f=[]),f.push(this._renderPath_Marker(b,l)));var r;a&&(r=Hd.h("g",{namespace:Hd.svgNs},this._renderPath_ControlPoints(b)));return this.renderSvgMorph(b,m,f,r)}},{key:"_renderPath_ControlPoints",
value:function(b,e){function l(N,L,S,ha,qa,D){var P=ha?12:Math.min(8,Math.max(3,m));S="path-point path-point-"+S;ha=ha?"orange":q;"string"===typeof qa&&(S+="-"+qa);D&&(P=Math.max(3,Math.ceil(P/2)));return D?Hd.h("circle",{namespace:Hd.svgNs,style:{fill:"white","stroke-width":2,stroke:ha},attributes:{class:S,cx:N,cy:L,r:P}}):Hd.h("circle",{namespace:Hd.svgNs,style:{fill:ha},attributes:{class:S,cx:N,cy:L,r:P}})}var a=b.vertices;e=b.borderWidth;var f=b.showControlPoints;b=b._controlPointDrag;var m=0==
e?6:e+2,q="red";e=[];if("object"===typeof f){var r=f.radius;(f=f.fill)&&(q=String(f));"number"===typeof r&&(m=r)}if(a.length){f=0;var u=a[0];r=u.x;var v=u.y;u=u.controlPoints.next;var y=b&&b.maybeMerge&&b.maybeMerge.includes(f);e.push(l(r,v,f,y));for(f=1;f<a.length-1;f++){var z=a[f];y=z.isSmooth;var B=z.x,C=z.y,G=z.controlPoints;z=G.previous;G=G.next;var F=b&&b.maybeMerge&&b.maybeMerge.includes(f);y?e.push(l(B,C,f,F),l(r+u.x,v+u.y,f-1,!1,"control-2",!0),l(B+z.x,C+z.y,f,!1,"control-1",!0)):e.push(l(B,
C,f,F));r=B;v=C;u=G}C=a[a.length-1];a=C.isSmooth;y=C.x;B=C.y;C=C.controlPoints.previous;b=b&&b.maybeMerge&&b.maybeMerge.includes(f);a?e.push(l(y,B,f,b),l(r+u.x,v+u.y,f-1,!1,"control-2",!0),l(y+C.x,B+C.y,f,!1,"control-1",!0)):e.push(l(y,B,f,b))}return e}},{key:"_renderPath_Marker",value:function(b,e){function l(a){var f=a.tagName,m=a.id,q=a.children,r=a.style;q=q?q.map(l):void 0;m&&(m=b.id+"-"+m);return Hd.h(f,{namespace:Hd.svgNs,id:m,style:r,attributes:Hd.obj.dissoc(a,["tagName","id","children","style"])},
q)}return l(e)}},{key:"renderSvgMorph",value:function(b,e,l,a){a=void 0===a?[]:a;var f=Hd.svgAttributes(b),m=b.innerBounds(),q=m.width;m=m.height;var r,u=[];b.fill&&b.fill.isGradient&&(r||(r=[]),r.push(Hd.renderGradient("fill"+b.id,b.extent,b.fill)));b.borderColor&&b.borderColor.valueOf().isGradient&&(r||(r=[]),r.push(Hd.renderGradient("borderColor"+b.id,b.extent,b.borderColor)));l&&l.length&&(r||(r=[]),r.push.apply(r,$jscomp.arrayFromIterable(l)));u.push(e);r&&u.push(Hd.h("defs",{namespace:Hd.svgNs},
r));e=Hd.obj.select(Hd.defaultStyle(b),"position filter display opacity transform top left transformOrigin cursor overflow".split(" "));return Hd.h("div",Object.assign({},Hd.defaultAttributes(b,this),{style:Object.assign({},e,{width:q+"px",height:m+"px","pointer-events":b.reactsToPointer?"auto":"none"})}),[Hd.h("svg",Object.assign({namespace:Hd.svgNs,version:"1.1",style:{position:"absolute","stroke-linejoin":b.cornerStyle||"mint","stroke-linecap":b.endStyle||"round",overflow:"visible"}},f),u),this.renderSubmorphs(b),
Hd.h("svg",Object.assign({namespace:Hd.svgNs,version:"1.1",style:{position:"absolute",overflow:"visible"}},f),a)])}},{key:"renderPreview",value:function(b,e){var l=void 0===e.center?!0:e.center,a=void 0===e.ignoreMorphs?[]:e.ignoreMorphs,f=void 0===e.asNode?!1:e.asNode,m=b.origin,q=b.rotation,r=void 0===e.width?100:e.width;e=void 0===e.height?100:e.height;var u=Math.max(.1,1/b.scale);u=(new Hd.Transform(b.position.negated(),0,Hd.pt(u,u))).transformRectToRect(b.bounds());var v=Math.max(.1,Math.min(r/
u.width,e/u.height));m=new Hd.Transform(u.topLeft().negated().scaleBy(v).subPt(m),q,Hd.pt(v,v));q=(q=this.getNodeForMorph(b))?q.cloneNode(!0):Hd.renderMorph(b);l&&(b=m.transformRectToRect(b.extent.extentAsRectangle()),m=m.preConcatenate(new Hd.Transform(Hd.pt(b.width<r?(r-b.width)/2:0,b.height<e?(e-b.height)/2:0))));q.style.transform=m.toCSSTransformString();q.style.pointerEvents="";Hd.tree.prewalk(q,function(y){if("string"===typeof y.className){var z=y.className.split(" ").map(function(B){return B.trim()}).filter(Boolean);
z.includes("Morph")&&(y.className=Hd.arr.withoutAll(z,["morph","Morph"]).join(" "),a.find(function(B){return B.id===y.id})&&y.remove(),y.id="")}},function(y){return Array.from(y.childNodes)});return f?q:q.outerHTML}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Renderer"}},{key:"default",value:function(){return this._default||new this}}],k,{pathInPackage:function(){return"rendering/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1406,end:21817})}(void 0);Hd.Renderer=qK;Hd.Renderer=qK;Hd.Renderer=qK;var Vz=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js");Vz.string=Hg;var t3=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-detector.js"),n=k.hasOwnProperty("FontDetector")&&"function"===typeof k.FontDetector?k.FontDetector:k.FontDetector=function(b){b&&b[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.document=b;this.prepared=!1;this.defaultWidth={};this.defaultHeight={};this.possibleFontWeights="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ");this.namedToNumeric=new Map("Thin;Extra Light;Light;Normal;Medium;Semi Bold;Bold;Extra Bold;Ultra Bold".split(";").map(function(e,l){return[e,String(100*(l+1))]}));this.baseFonts=
["monospace","sans-serif","serif","Comic Sans MS"];this.span=null}},{key:"prepare",value:function(){var b=this.defaultWidth,e=this.defaultHeight,l=this.possibleFontWeights,a=this.baseFonts,f=this.document.getElementsByTagName("body")[0],m=this.span||this.document.createElement("span");m.style.fontSize="72px";m.style.opacity=0;m.innerHTML="mmmmmmmmmmlli";if(!m.parentNode){var q=this.document.createElement("div");q.style.position="absolute";q.style.width="100%";q.style.overflow="hidden";q.style["pointer-events"]=
"none";q.style["-webkit-user-select"]="none";q.appendChild(m);f.appendChild(q)}for(var r in l)for(var u in a)m.style.fontFamily=a[u],m.style.fontWeight=l[r],b[a[u]+"@"+l[r]]=m.offsetWidth,e[a[u]+"@"+l[r]]=m.offsetHeight;this.span=m;this.prepared=!0}},{key:"isFontSupported",value:function(b,e){e=void 0===e?"normal":e;this.possibleFontWeights.includes(e)||(e=this.namedToNumeric.get(e)||"normal");this.prepared||this.prepare();var l=this.defaultWidth,a=this.defaultHeight,f=this.baseFonts,m=this.span,
q=this.document.body;m.parentNode||q.appendChild(m);for(var r in f)if(m.style.fontWeight=e,m.style.fontFamily=b+","+f[r],m.offsetWidth!=l[f[r]+"@"+e]||m.offsetHeight!=a[f[r]+"@"+e])return!0;return!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontDetector"}},{key:"fonts",get:function(){return Vz.fonts}}],k,{pathInPackage:function(){return"rendering/font-detector.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:53,end:4133})}(void 0),xha=t3=Vz.FontDetector,iR=[{name:"serif",type:"default"},{name:"sans-serif",type:"default"},{name:"monospace",type:"default"},{name:"Adobe Jenson",type:"serif"},{name:"Albertus",type:"serif"},{name:"Aldus",type:"serif"},{name:"Alexandria",type:"serif"},{name:"Algerian",type:"serif"},{name:"American Typewriter",type:"serif"},{name:"Antiqua",type:"serif"},{name:"Arno",type:"serif"},{name:"Aster",type:"serif"},
{name:"Aurora",type:"serif"},{name:"News 706",type:"serif"},{name:"Baskerville",type:"serif"},{name:"Bell",type:"serif"},{name:"Belwe Roman",type:"serif"},{name:"Bembo",type:"serif"},{name:"Berkeley Old Style",type:"serif"},{name:"Bernhard Modern",type:"serif"},{name:"Bodoni",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Bookman",type:"serif"},{name:"Bulmer",type:"serif"},{name:"Caledonia",type:"serif"},{name:"Californian FB",type:"serif"},{name:"Calisto MT",type:"serif"},{name:"Cambria",
type:"serif"},{name:"Capitals",type:"serif"},{name:"Cartier",type:"serif"},{name:"Caslon",type:"serif"},{name:"Wyld",type:"serif"},{name:"Caslon Antique / Fifteenth Century",type:"serif"},{name:"Catull",type:"serif"},{name:"Centaur",type:"serif"},{name:"Century Old Style",type:"serif"},{name:"Century Schoolbook",type:"serif"},{name:"New Century Schoolbook",type:"serif"},{name:"Century Schoolbook Infant",type:"serif"},{name:"Charis SIL",type:"serif"},{name:"Charter (typeface)",type:"serif"},{name:"Cheltenham",
type:"serif"},{name:"Clearface",type:"serif"},{name:"Cochin",type:"serif"},{name:"Colonna",type:"serif"},{name:"Computer Modern",type:"serif"},{name:"Concrete Roman",type:"serif"},{name:"Constantia",type:"serif"},{name:"Cooper Black",type:"serif"},{name:"Copperplate Gothic",type:"serif"},{name:"Corona",type:"serif"},{name:"News 705",type:"serif"},{name:"DejaVu Serif",type:"serif"},{name:"Didot",type:"serif"},{name:"Droid Serif",type:"serif"},{name:"Elephant",type:"serif"},{name:"Emerson",type:"serif"},
{name:"Excelsior",type:"serif"},{name:"News 702",type:"serif"},{name:"Fairfield",type:"serif"},{name:"FF Scala",type:"serif"},{name:"Footlight",type:"serif"},{name:"FreeSerif",type:"serif"},{name:"Friz Quadrata",type:"serif"},{name:"Garamond",type:"serif"},{name:"Gentium",type:"serif"},{name:"Georgia",type:"serif"},{name:"Gloucester",type:"serif"},{name:"Goudy",type:"serif"},{name:"Granjon",type:"serif"},{name:"High Tower Text",type:"serif"},{name:"Hoefler Text",type:"serif"},{name:"Imprint",type:"serif"},
{name:"Ionic No. 5",type:"serif"},{name:"News 701",type:"serif"},{name:"ITC Benguiat",type:"serif"},{name:"Janson",type:"serif"},{name:"Jokerman",type:"serif"},{name:"Joanna",type:"serif"},{name:"Korinna",type:"serif"},{name:"Lexicon",type:"serif"},{name:"Liberation Serif",type:"serif"},{name:"Linux Libertine",type:"serif"},{name:"Literaturnaya",type:"serif"},{name:"Lucida Bright",type:"serif"},{name:"Melior",type:"serif"},{name:"Memphis",type:"serif"},{name:"Miller",type:"serif"},{name:"Minion",
type:"serif"},{name:"Modern",type:"serif"},{name:"Mona Lisa",type:"serif"},{name:"Mrs Eaves",type:"serif"},{name:"MS Serif",type:"serif"},{name:"New York",type:"serif"},{name:"Nimbus Roman",type:"serif"},{name:"NPS Rawlinson Roadway",type:"serif"},{name:"OCR A Extended",type:"serif"},{name:"Palatino",type:"serif"},{name:"Book Antiqua",type:"serif"},{name:"Perpetua",type:"serif"},{name:"Plantin",type:"serif"},{name:"Playbill",type:"serif"},{name:"Primer",type:"serif"},{name:"Renault",type:"serif"},
{name:"Requiem",type:"serif"},{name:"Rotis Serif",type:"serif"},{name:"Sabon",type:"serif"},{name:"Sistina",type:"serif"},{name:"Souvenir",type:"serif"},{name:"XITS",type:"serif"},{name:"Sylfaen",type:"serif"},{name:"Times New Roman",type:"serif"},{name:"Times",type:"serif"},{name:"Torino",type:"serif"},{name:"Trajan",type:"serif"},{name:"Trinit\u00e9",type:"serif"},{name:"Trump Mediaeval",type:"serif"},{name:"Utopia",type:"serif"},{name:"Vera Serif",type:"serif"},{name:"Wide Latin",type:"serif"},
{name:"Windsor",type:"serif"},{name:"XITS",type:"serif"},{name:"Playfair Display",type:"serif",isGoogleFont:!0},{name:"Cormorant",type:"serif",isGoogleFont:!0},{name:"Eczar",type:"serif",isGoogleFont:!0},{name:"Alegreya",type:"serif",isGoogleFont:!0},{name:"Lora",type:"serif",isGoogleFont:!0},{name:"Source Serif Pro",type:"serif",isGoogleFont:!0},{name:"Roboto Slab",type:"serif",isGoogleFont:!0},{name:"BioRhyme",type:"serif",isGoogleFont:!0},{name:"Libre Baskerville",type:"serif",isGoogleFont:!0},
{name:"Crimson Text",type:"serif",isGoogleFont:!0},{name:"Old Standard TT",type:"serif",isGoogleFont:!0},{name:"Domine",type:"serif",isGoogleFont:!0},{name:"Bitter",type:"serif",isGoogleFont:!0},{name:"Gentium Basic",type:"serif",isGoogleFont:!0},{name:"PT Serif",type:"serif",isGoogleFont:!0},{name:"Cardo",type:"serif",isGoogleFont:!0},{name:"Neuton",type:"serif",isGoogleFont:!0},{name:"Arvo",type:"serif",isGoogleFont:!0},{name:"Merriweather",type:"serif",isGoogleFont:!0},{name:"Alexandria",type:"slab serif"},
{name:"American Typewriter",type:"slab serif"},{name:"Archer",type:"slab serif"},{name:"Athens",type:"slab serif"},{name:"Candida",type:"slab serif"},{name:"Cholla Slab",type:"slab serif"},{name:"City",type:"slab serif"},{name:"Clarendon",type:"slab serif"},{name:"Concrete Roman",type:"slab serif"},{name:"Courier",type:"slab serif"},{name:"Egyptienne",type:"slab serif"},{name:"Guardian Egyptian",type:"slab serif"},{name:"Ionic No. 5",type:"slab serif"},{name:"Lexia",type:"slab serif"},{name:"Memphis",
type:"slab serif"},{name:"Nilland",type:"slab serif"},{name:"Roboto Slab",type:"slab serif"},{name:"Rockwell",type:"slab serif"},{name:"Schadow",type:"slab serif"},{name:"Serifa",type:"slab serif"},{name:"Skeleton Antique",type:"slab serif"},{name:"Sreda",type:"slab serif"},{name:"Swift",type:"slab serif"},{name:"Tower",type:"slab serif"},{name:"Agency FB",type:"sans-serif"},{name:"Akzidenz-Grotesk",type:"sans-serif"},{name:"Andal\u00e9 Sans",type:"sans-serif"},{name:"Antique Olive",type:"sans-serif"},
{name:"Arial",type:"sans-serif"},{name:"Arial Unicode MS",type:"sans-serif"},{name:"Avant Garde Gothic",type:"sans-serif"},{name:"Avenir",type:"sans-serif"},{name:"Bank Gothic",type:"sans-serif"},{name:"Bauhaus",type:"sans-serif"},{name:"Bell Centennial",type:"sans-serif"},{name:"Bell Gothic",type:"sans-serif"},{name:"Benguiat Gothic",type:"sans-serif"},{name:"Berlin Sans",type:"sans-serif"},{name:"Brandon Grotesque",type:"sans-serif"},{name:"Calibri",type:"sans-serif"},{name:"Casey",type:"sans-serif"},
{name:"Century Gothic",type:"sans-serif"},{name:"Charcoal",type:"sans-serif"},{name:"Chicago",type:"sans-serif"},{name:"Clearview",type:"sans-serif"},{name:"Comic Sans",type:"sans-serif"},{name:"Compacta",type:"sans-serif"},{name:"Corbel",type:"sans-serif"},{name:"DejaVu Sans",type:"sans-serif"},{name:"DIN",type:"sans-serif"},{name:"Dotum",type:"sans-serif"},{name:"Droid Sans",type:"sans-serif"},{name:"Dyslexie",type:"sans-serif"},{name:"Ecofont",type:"sans-serif"},{name:"Eras",type:"sans-serif"},
{name:"Esseltub",type:"sans-serif"},{name:"Espy Sans",type:"sans-serif"},{name:"Eurocrat",type:"sans-serif"},{name:"Eurostile",type:"sans-serif"},{name:"Square 721",type:"sans-serif"},{name:"FF Dax",type:"sans-serif"},{name:"FF Meta",type:"sans-serif"},{name:"FF Scala Sans",type:"sans-serif"},{name:"Fira Sans",type:"sans-serif"},{name:"Folio",type:"sans-serif"},{name:"Franklin Gothic",type:"sans-serif"},{name:"FreeSans",type:"sans-serif"},{name:"Frutiger",type:"sans-serif"},{name:"Futura",type:"sans-serif"},
{name:"Geneva",type:"sans-serif"},{name:"Gill Sans",type:"sans-serif"},{name:"Gill Sans Schoolbook",type:"sans-serif"},{name:"Gotham",type:"sans-serif"},{name:"Haettenschweiler",type:"sans-serif"},{name:"Handel Gothic",type:"sans-serif"},{name:"Hei",type:"sans-serif"},{name:"Helvetica",type:"sans-serif"},{name:"Helvetica Neue",type:"sans-serif"},{name:"Swiss 721",type:"sans-serif"},{name:"Highway Gothic",type:"sans-serif"},{name:"Hobo",type:"sans-serif"},{name:"Impact",type:"sans-serif"},{name:"Industria",
type:"sans-serif"},{name:"Interstate",type:"sans-serif"},{name:"Johnston/New Johnston",type:"sans-serif"},{name:"Kabel",type:"sans-serif"},{name:"Klavika",type:"sans-serif"},{name:"Lexia Readable",type:"sans-serif"},{name:"Liberation Sans",type:"sans-serif"},{name:"Linux Biolinum",type:"sans-serif"},{name:"Lucida Sans",type:"sans-serif"},{name:"Lucida Grande",type:"sans-serif"},{name:"Lucida Sans Unicode",type:"sans-serif"},{name:"Lydian",type:"sans-serif"},{name:"Meiryo",type:"sans-serif"},{name:"Meta",
type:"sans-serif"},{name:"Microgramma",type:"sans-serif"},{name:"Modern",type:"sans-serif"},{name:"Motorway",type:"sans-serif"},{name:"Arial",type:"sans-serif"},{name:"Myriad",type:"sans-serif"},{name:"Neutraface",type:"sans-serif"},{name:"Neuzeit S",type:"sans-serif"},{name:"News Gothic",type:"sans-serif"},{name:"Nimbus Sans L",type:"sans-serif"},{name:"Open Sans",type:"sans-serif"},{name:"Optima",type:"sans-serif"},{name:"Paris",type:"sans-serif"},{name:"Product Sans",type:"sans-serif"},{name:"Proxima Nova",
type:"sans-serif"},{name:"Russian Federation",type:"sans-serif"},{name:"Rail Alphabet",type:"sans-serif"},{name:"Roboto",type:"sans-serif"},{name:"Rotis Sans",type:"sans-serif"},{name:"Segoe UI",type:"sans-serif"},{name:"Skia",type:"sans-serif"},{name:"Source Sans Pro",type:"sans-serif"},{name:"Sweden Sans",type:"sans-serif"},{name:"Syntax",type:"sans-serif"},{name:"Tahoma",type:"sans-serif"},{name:"Template Gothic",type:"sans-serif"},{name:"Thesis Sans",type:"sans-serif"},{name:"Tiresias",type:"sans-serif"},
{name:"Trade Gothic",type:"sans-serif"},{name:"Transport",type:"sans-serif"},{name:"Trebuchet MS",type:"sans-serif"},{name:"Twentieth Century (Tw Cen MT)",type:"sans-serif"},{name:"Ubuntu",type:"sans-serif"},{name:"Univers",type:"sans-serif"},{name:"Zurich",type:"sans-serif"},{name:"Vera Sans",type:"sans-serif"},{name:"Verdana",type:"sans-serif"},{name:"Work Sans",type:"sans-serif",isGoogleFont:!0},{name:"Rubik",type:"sans-serif",isGoogleFont:!0},{name:"Libre Franklin",type:"sans-serif",isGoogleFont:!0},
{name:"Fira Sans",type:"sans-serif",isGoogleFont:!0},{name:"Alegreya Sans",type:"sans-serif",isGoogleFont:!0},{name:"Chivo",type:"sans-serif",isGoogleFont:!0},{name:"Source Sans Pro",type:"sans-serif",isGoogleFont:!0},{name:"Roboto",type:"sans-serif",isGoogleFont:!0},{name:"Poppins",type:"sans-serif",isGoogleFont:!0},{name:"Archivo Narrow",type:"sans-serif",isGoogleFont:!0},{name:"Karla",type:"sans-serif",isGoogleFont:!0},{name:"Montserrat",type:"sans-serif",isGoogleFont:!0},{name:"Rajdhani",type:"sans-serif",
isGoogleFont:!0},{name:"PT Sans",type:"sans-serif",isGoogleFont:!0},{name:"Lato",type:"sans-serif",isGoogleFont:!0},{name:"Open Sans",type:"sans-serif",isGoogleFont:!0},{name:"Cabin",type:"sans-serif",isGoogleFont:!0},{name:"Raleway",type:"sans-serif",isGoogleFont:!0},{name:"Nyala",type:"semi-serif"},{name:"Rotis Semi Serif",type:"semi-serif"},{name:"Easyreading",type:"semi-serif"},{name:"Andal\u00e9 Mono",type:"monospace"},{name:"Arial",type:"monospace"},{name:"Bitstream Vera (Vera Sans Mono)",type:"monospace"},
{name:"Consolas",type:"monospace"},{name:"Courier",type:"monospace"},{name:"Courier New",type:"monospace"},{name:"DejaVu Sans Mono",type:"monospace"},{name:"Droid Sans Mono",type:"monospace"},{name:"Everson Mono",type:"monospace"},{name:"Fixed",type:"monospace"},{name:"Fixedsys",type:"monospace"},{name:"Fixedsys Excelsior",type:"monospace"},{name:"HyperFont",type:"monospace"},{name:"Inconsolata",type:"monospace"},{name:"Letter Gothic",type:"monospace"},{name:"Liberation Mono",type:"monospace"},{name:"Lucida Console",
type:"monospace"},{name:"Lucida Sans Typewriter",type:"monospace"},{name:"Lucida Typewriter",type:"monospace"},{name:"Menlo",type:"monospace"},{name:"MICR",type:"monospace"},{name:"Monaco",type:"monospace"},{name:"Monospace",type:"monospace"},{name:"MS Gothic",type:"monospace"},{name:"MS Mincho",type:"monospace"},{name:"Nimbus Mono L",type:"monospace"},{name:"OCR-A",type:"monospace"},{name:"OCR-B",type:"monospace"},{name:"PragmataPro",type:"monospace"},{name:"Prestige Elite",type:"monospace"},{name:"ProFont",
type:"monospace"},{name:"Proggy programming fonts",type:"monospace"},{name:"SimHei",type:"monospace"},{name:"SimSun",type:"monospace"},{name:"Source Code Pro",type:"monospace"},{name:"Terminal",type:"monospace"},{name:"Trixie",type:"monospace"},{name:"Ubuntu Mono",type:"monospace"},{name:"Vera Sans Mono (Bitstream Vera)",type:"monospace"},{name:"Space Mono",type:"monospace",isGoogleFont:!0},{name:"Inconsolata",type:"monospace",isGoogleFont:!0},{name:"Anonymous Pro",type:"monospace",isGoogleFont:!0},
{name:"Balloon",type:"script"},{name:"Brush Script",type:"script"},{name:"Choc",type:"script"},{name:"Dom Casual",type:"script"},{name:"Mistral",type:"script"},{name:"Papyrus",type:"script"},{name:"Segoe Script",type:"script"},{name:"Utopia",type:"script"},{name:"Coronet",type:"script"},{name:"Curlz",type:"script"},{name:"Gravura",type:"script"},{name:"Script",type:"script"},{name:"Wiesbaden Swing",type:"script"},{name:"American Scribe",type:"script"},{name:"AMS Euler",type:"script"},{name:"Apple Chancery",
type:"script"},{name:"Forte",type:"script"},{name:"French Script",type:"script"},{name:"ITC Zapf Chancery",type:"script"},{name:"Kuenstler Script",type:"script"},{name:"Monotype Corsiva",type:"script"},{name:"Old English Text MT",type:"script"},{name:"Zapfino",type:"script"},{name:"Andy",type:"handwriting"},{name:"Ashley Script",type:"handwriting"},{name:"C\u00e9zanne",type:"handwriting"},{name:"Chalkboard",type:"handwriting"},{name:"Comic Sans MS",type:"handwriting"},{name:"Dom Casual",type:"handwriting"},
{name:"Kristen",type:"handwriting"},{name:"Lucida Handwriting",type:"handwriting"},{name:"Bastard",type:"blackletter"},{name:"Breitkopf Fraktur",type:"blackletter"},{name:"Cloister Black",type:"blackletter"},{name:"Fette Fraktur",type:"blackletter"},{name:"Fletcher",type:"blackletter"},{name:"Fraktur",type:"blackletter"},{name:"Lucida Blackletter",type:"blackletter"},{name:"Old English Text",type:"blackletter"},{name:"Schwabacher",type:"blackletter"},{name:"Aharoni",type:"non-latin"},{name:"Aparajita",
type:"non-latin"},{name:"Arial",type:"non-latin"},{name:"Calibri",type:"non-latin"},{name:"Chandas",type:"non-latin"},{name:"Gadugi",type:"non-latin"},{name:"Grecs du roi",type:"non-latin"},{name:"Javanese script",type:"non-latin"},{name:"Japanese Gothic",type:"non-latin"},{name:"Jomolhari",type:"non-latin"},{name:"Kiran",type:"non-latin"},{name:"Kochi",type:"non-latin"},{name:"Koren",type:"non-latin"},{name:"Kruti Dev",type:"non-latin"},{name:"Malgun Gothic",type:"non-latin"},{name:"Meiryo",type:"non-latin"},
{name:"Microsoft JhengHei",type:"non-latin"},{name:"Microsoft YaHei",type:"non-latin"},{name:"Minch\u014d",type:"non-latin"},{name:"Ming",type:"non-latin"},{name:"Mona",type:"non-latin"},{name:"MS Gothic",type:"non-latin"},{name:"Nastaliq Navees",type:"non-latin"},{name:"Porson",type:"non-latin"},{name:"Segoe UI Symbol",type:"non-latin"},{name:"Shruti",type:"non-latin"},{name:"SimSun",type:"non-latin"},{name:"Sylfaen",type:"non-latin"},{name:"Tahoma",type:"non-latin"},{name:"Tengwar",type:"non-latin"},
{name:"Tibetan Machine Uni",type:"non-latin"},{name:"Wilson Greek",type:"non-latin"},{name:"SMP",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Bitstream Cyberbit",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"Charis SIL",type:"unicode"},{name:"BMP",type:"unicode"},{name:"SMP",type:"unicode"},{name:"Code2002",type:"unicode"},{name:"DejaVu fonts",type:"unicode"},{name:"IPA",type:"unicode"},{name:"Everson Mono",type:"unicode"},{name:"Windows",type:"unicode"},{name:"Fixedsys Excelsior",
type:"unicode"},{name:"FreeFont",type:"unicode"},{name:"Gentium",type:"unicode"},{name:"GNU Unifont",type:"unicode"},{name:"Georgia Ref",type:"unicode"},{name:"Microsoft Office",type:"unicode"},{name:"Junicode",type:"unicode"},{name:"Mac OS 8.5",type:"unicode"},{name:"macOS",type:"unicode"},{name:"ISO 8859-x",type:"unicode"},{name:"MS Gothic",type:"unicode"},{name:"MS Mincho",type:"unicode"},{name:"Nimbus Sans Global",type:"unicode"},{name:"Noto",type:"unicode"},{name:"Fabrizio Schiavi",type:"unicode"},
{name:"Squarish Sans CT",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Titus Cyberbit Basic",type:"unicode"},{name:"Verdana Ref",type:"unicode"},{name:"XITS",type:"unicode"},{name:"Apple Symbols",type:"symbol"},{name:"Asana-Math",type:"symbol"},{name:"Blackboard bold",type:"symbol"},{name:"Bookshelf Symbol 7",type:"symbol"},{name:"Cambria Math",type:"symbol"},{name:"Computer Modern",type:"symbol"},{name:"Lucida Math",type:"symbol"},{name:"Marlett",type:"symbol"},{name:"Symbol",type:"symbol"},
{name:"Webdings",type:"symbol"},{name:"Wingdings",type:"symbol"},{name:"Wingdings 2",type:"symbol"},{name:"Wingdings 3",type:"symbol"},{name:"Zapf Dingbats",type:"symbol"},{name:"Ad Lib",type:"decorative"},{name:"Allegro",type:"decorative"},{name:"Andreas",type:"decorative"},{name:"Arnold B\u00f6cklin",type:"decorative"},{name:"Astur",type:"decorative"},{name:"Banco",type:"decorative"},{name:"Bauhaus",type:"decorative"},{name:"Braggadocio",type:"decorative"},{name:"Broadway",type:"decorative"},{name:"Caslon Antique",
type:"decorative"},{name:"Cooper Black",type:"decorative"},{name:"Curlz",type:"decorative"},{name:"Ellington",type:"decorative"},{name:"Exocet",type:"decorative"},{name:"FIG Script",type:"decorative"},{name:"Forte",type:"decorative"},{name:"Gabriola",type:"decorative"},{name:"Horizon",type:"decorative"},{name:"Jim Crow",type:"decorative"},{name:"Lo-Type",type:"decorative"},{name:"Neuland",type:"decorative"},{name:"Peignot",type:"decorative"},{name:"San Francisco",type:"decorative"},{name:"Stencil",
type:"decorative"},{name:"Umbra",type:"decorative"},{name:"Westminster",type:"decorative"},{name:"Willow",type:"decorative"},{name:"Windsor",type:"decorative"},{name:"Lithos",type:"mimicry"},{name:"Skia",type:"mimicry"},{name:"3x3",type:"misc"},{name:"Compatil",type:"misc"},{name:"Generis",type:"misc"},{name:"Grasset",type:"misc"},{name:"LED",type:"misc"},{name:"Luxi",type:"misc"},{name:"System",type:"misc"}];Vz.fonts=iR;Vz.fonts=iR;Vz.fonts=iR;Vz.default=t3;var zh=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js");
zh.textlayerNodeForFontMeasure=function(d){var k=d.viewState,n=k.text_layer_node;k=k.fontmetric_text_layer_node;n&&!n.className.includes("newtext-text-layer")&&(d.viewState.text_layer_node=n=n.parentNode.querySelector(".newtext-text-layer.actual"));k&&!k.className.includes("newtext-text-layer")&&(d.viewState.fontmetric_text_layer_node=k=null);n&&!k&&n.parentNode&&(k=d.viewState.fontmetric_text_layer_node=n.parentNode.querySelector(".newtext-text-layer.font-measure"));return k};zh.isExtendingChar=
function(d){return 768<=d.charCodeAt(0)&&zh.extendingChars.test(d)};zh.skipExtendingChars=function(d,k,n){for(;(0>n?0<k:k<d.length)&&zh.isExtendingChar(d.charAt(k));)k+=n;return k};zh.charBoundsOfBigMonospacedLine=function(d,k,n,b,e,l,a,f){e=void 0===e?0:e;l=void 0===l?0:l;n=n.text.length;if(500>n||k.isProportional(zh.getComputedFontFamily(b)))return null;var m=Infinity,q=a.defaultTextStyle;a.lineWrapping&&(m=b.getBoundingClientRect().width);k=k._domMeasure.defaultCharExtent(d,{defaultTextStyle:q},
f);d=k.width;k=k.height;b=Array(n);for(a=0;a<n;a++)e+d>m&&(e=0,l+=k),b[a]={x:e,y:l,width:d,height:k},e+=d;return b};zh.charBoundsOfLine=function(d,k,n,b){n=void 0===n?0:n;b=void 0===b?0:b;d=k.ELEMENT_NODE;var e=k.TEXT_NODE,l=k.ownerDocument,a=[],f=0;if(k)if(k.className.includes("line")){n-=k.offsetLeft;b-=k.offsetTop;var m=k.childNodes[0]}else m=k.getElementsByClassName("line")[0].childNodes[0],n=n-k.offsetLeft+zh.getComputedMarginLeft(k),b-=k.offsetTop;else m=null;if(!m){var q=m=l.createElement("br");
k.appendChild(q)}for(;m&&!(Infinity<f);){var r="BR"!==m.tagName&&m.nodeType===d&&m.childNodes[0]||m;if(r.nodeType===e)for(var u=r.length,v=0;v<u;v++){var y=zh.measureCharInner(l,r,v,"right");var z=y.left;var B=y.top;k=y.width;y=y.height;z+=n;B+=b;a[f++]={x:z,y:B,width:k,height:y}}else if(m.nodeType===d)r=m.getBoundingClientRect(),z=r.left,B=r.top,k=r.width,y=r.height,z+=n,B+=b,a[f++]={x:z,y:B,width:k,height:y};else throw Error("Cannot deal with node "+m);m=m.nextSibling}q&&q.parentNode.removeChild(q);
return a};zh.measureCharInner=function(d,k,n,b){b=void 0===b?"left":b;var e=n;n+=1;if(3==k.nodeType)for(var l=0;4>l;l++){var a=zh.getUsefulRect(zh.range(d,k,e,n).getClientRects(),b);if(a.left||a.right||0==e)break;n=e;--e}return a};zh.range=function(d,k,n,b,e){d=d.createRange();d.setEnd(e||k,b);d.setStart(k,n);return d};zh.getUsefulRect=function(d,k){var n={left:0,right:0,top:0,bottom:0};if("left"==k)for(k=0;k<d.length&&(n=d[k]).left==n.right;k++);else for(k=d.length-1;0<=k&&(n=d[k]).left==n.right;k--);
return n};zh.string=Hg;zh.obj=lf;zh.FontDetector=xha;zh.cumulativeOffset=jd;zh.config=vk;zh.debug=!!zh.config.onloadURLQuery["debug-font-metric"];zh.checkTimeout=1E3;var u3=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=k.hasOwnProperty("FontMetric")&&"function"===typeof k.FontMetric?k.FontMetric:k.FontMetric=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,
d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.charMap={};this.cachedBoundsInfo={};this.supportedFontCache={};this.canvasElement=this.element=null;this.isProportionalCache={}}},{key:"reset",value:function(b){if(this.element){var e=this.element.parentNode;var l=this.element.ownerDocument}this.uninstall();this.charMap={};this.cachedBoundsInfo={};l&&e&&this.install(l,e,b)}},{key:"install",value:function(b,e,l){this.element=b.createElement("div");this.element.name="fontMetric";
this.setMeasureNodeStyles(this.element.style,!0);e.appendChild(this.element);this._domMeasure=(new zh.DOMTextMeasure).install(b,e,l)}},{key:"uninstall",value:function(){this.element&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this._domMeasure&&this._domMeasure.uninstall())}},{key:"setMeasureNodeStyles",value:function(b,e){b.width=b.height="auto";b.left=b.top="0px";b.visibility="hidden";b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=
e?"hidden":"visible"}},{key:"measure",value:function(b,e){var l=b.fontFamily,a=b.fontSize,f=b.fontWeight,m=b.fontStyle,q=b.textDecoration,r=b.textStyleClasses;b=b.transform;var u=this.element;b&&(b=b.inverse());u.textContent=e;Object.assign(u.style,{"-webkit-text-size-adjust":"none",fontFamily:l,fontWeight:f,fontStyle:m,textDecoration:q,transform:b,fontSize:a+"px"});u.className=r?r.join(" "):"";try{var v=u.getBoundingClientRect();var y=v.width;var z=v.height}catch(B){return{width:0,height:0}}return{height:z,
width:y}}},{key:"charBoundsFor",value:function(b,e){var l=e.length,a=Array(l),f=this.cachedBoundsInfo,m=f.bounds,q=f.str;f=f.style;if(this.isProportional(b.fontFamily)){f=m&&zh.obj.equals(f,b);for(var r=!b.fixedCharacterSpacing,u=0,v=0;u<l;u++){var y=e[u];if(r)if(f=f&&y===q[u]){var z=m[u];y=z.width;z=z.height}else y=e.substr(0,u+1),z=this.measure(b,y),y=z.width,z=z.height,y-=v;else z=this.sizeFor(b,y),y=z.width,z=z.height;a[u]={x:v,y:0,width:Math.ceil(y),height:Math.ceil(z)};v+=y}r&&(this.cachedBoundsInfo=
{bounds:a,str:e,style:b})}else for(e=this.sizeFor(b,"x",!0),b=this.sizeFor(b,"xx",!0).width-e.width,e=e.height,q=0;q<l;q++)m=b*q,a[q]={x:m,y:0,width:b,height:e};return a}},{key:"isProportional",value:function(b){if(this.isProportionalCache.hasOwnProperty(b))return this.isProportionalCache[b];var e={fontFamily:b,fontSize:12},l=this.sizeFor(e,"w").width;e=this.sizeFor(e,"i").width;return this.isProportionalCache[b]=l!==e}},{key:"sizeFor",value:function(b,e,l){e=void 0===e?"":e;var a=b.fontFamily,f=
b.fontSize,m=b.fontWeight,q=b.fontStyle,r=b.textDecoration,u=b.textStyleClasses;b={fontFamily:a,fontSize:f,fontWeight:m,fontStyle:q,textDecoration:r,textStyleClasses:u};if((void 0===l||!l)&&1<e.length)return this.measure(b,e);l=u?u.join(" "):"";a=[a,f,m,q,r,l].join("-");this.charMap[a]||(this.charMap[a]={});this.charMap[a][e]||(this.charMap[a][e]=this.measure(b,e));return this.charMap[a][e]}},{key:"defaultLineHeight",value:function(b){return this.sizeFor(b," ").height}},{key:"isFontSupported",value:function(b,
e){e=void 0===e?"normal":e;var l=this.fontDetector||(this.fontDetector=new zh.FontDetector(this.element.ownerDocument));if(this.supportedFontCache[b+"-"+e]){var a=this.supportedFontCache[b+"-"+e],f=a.ts;a=a.value;if(Date.now()-f<zh.checkTimeout)return a}l=l.isFontSupported(b,e);this.supportedFontCache[b+"-"+e]={ts:Date.now(),value:l};return l}},{key:"defaultCharExtent",value:function(b,e,l){return this._domMeasure.defaultCharExtent(b,e,l)}},{key:"manuallyComputeCharBoundsOfLine",value:function(b,
e,l,a,f,m,q){return this._domMeasure.computeCharBBoxes(b,e,0,0,f,m,q,this)}},{key:"manuallyComputeBoundsOfLines",value:function(b,e,l,a,f,m,q){return this._domMeasure.computeBBoxesOfLines(b,e,0,0,f,m,q)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FontMetric"}},{key:"default",value:function(){if(!this._fontMetric)throw Error("FontMetric has not yet been initialized!");return this._fontMetric}},{key:"initDefault",value:function(b){if(!this._fontMetric){if(!b&&"undefined"===typeof document)throw Error("Cannot initialize FontMetric without document");
b||(b={document:document});this._fontMetric=this.forDOMEnv(b)}return this._fontMetric}},{key:"removeDefault",value:function(){this._fontMetric&&(this._fontMetric.uninstall(),this._fontMetric=null)}},{key:"forDOMEnv",value:function(b){b=b.document;var e=new zh.FontMetric;e.install(b,b.body);return e}}],k,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:316,end:7623})}(void 0),yha=u3=zh.FontMetric;zh.extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
(function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/rendering/font-metric.js"),n=k.hasOwnProperty("DOMTextMeasure")&&"function"===typeof k.DOMTextMeasure?k.DOMTextMeasure:k.DOMTextMeasure=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:"reset",value:function(){if(this.element){var b=this.element.parentNode;var e=this.element.ownerDocument}this.uninstall();e&&b&&this.install(e,b);return this}},
{key:"install",value:function(b,e,l){this.maxLineBBoxCacheCount=(this.debug=l=void 0===l?!1:l)?1:3E3;this.lineBBoxCacheCount=0;this.lineBBoxCache={};this.maxTextlayerNodeCacheCount=l?1:30;this.textlayerNodeCacheCount=0;this.textlayerNodeCache={};this.defaultCharWidthHeightCache={};this.doc=b;b=this.element=b.createElement("div");b.className="dom-measure"+(l?" debug":"");this.setMeasureNodeStyles(b.style,!0);e.appendChild(b);return this}},{key:"uninstall",value:function(){var b=this.element;b&&(b.parentNode&&
b.parentNode.removeChild(b),this.element=null)}},{key:"setMeasureNodeStyles",value:function(b,e){b.width=b.height="auto";this.debug||(b.left=b.top="0px",b.visibility="hidden");b.position="absolute";b.whiteSpace="pre";b.font="inherit";b.overflow=e&&!this.debug?"hidden":"visible"}},{key:"generateStyleKey",value:function(b){var e=b.defaultTextStyle;return[e.fontFamily,e.fontSize,e.fontWeight,e.fontStyle,e.textDecoration,e.textStyleClasses,b.paddingLeft,b.paddingRight,b.paddingTop,b.paddingBottom,b.width,
b.height,b.clipMode,b.lineWrapping,b.textAlign].join("-")}},{key:"defaultCharExtent",value:function(b,e,l){var a=this,f=this.generateStyleKey(e),m=this.defaultCharWidthHeightCache[f];if("undefined"!==typeof m&&(0!==m.height||0!==m.width))return m;var q=this.doc;return this.withTextLayerNodeDo(b,l,e,f,function(r){var u=q.createElement("span");u.className="line";u.style.whiteSpace="pre";r.appendChild(u);u.textContent="abcdefghijklmnopqrstufwxyz ABCDEFGHIJKLMNOPQRSTUFWXYZ 1234567890 {}[];,./<>?'\"!@#$%^&*()-=_+";
var v=u.getBoundingClientRect().width,y=q.createElement("span");y.className="line";y.style.whiteSpace="pre";r.appendChild(y);y.textContent="H\ne\nll\no";var z=y.getBoundingClientRect().height;r.removeChild(u);r.removeChild(y);return a.defaultCharWidthHeightCache[f]={width:v/92,height:Math.ceil(z/4)}})}},{key:"computeBBoxesOfLines",value:function(b,e,l,a,f,m,q){var r=this;l=void 0===l?0:l;a=void 0===a?0:a;for(var u=this.generateStyleKey(f),v=Array(e.length),y=!0,z=0;z<e.length;z++){var B=!e[z].textAttributes.length&&
this.lineBBoxCache[u+"_"+e[z].text];B&&B.height&&B.width?v[z]=B:y=!1}return y?v:this.withTextLayerNodeDo(b,m,f,u,function(C,G,F){for(var N=Array(e.length),L=Array(e.length),S=0;S<e.length;S++)if(!L[S]){var ha=q(e[S]);ha.style.display="inline-block";C.appendChild(ha);N[S]=ha}for(S=0;S<N.length;S++)if(!L[S]){ha=N[S];var qa=ha.getBoundingClientRect();r.lineBBoxCache[u+"_"+e[S].text]=L[S]={x:qa.left-ha.offsetLeft+l-G,y:qa.top-ha.offsetTop+a-F,width:qa.width,height:qa.height}}for(G=0;G<N.length;G++)C.removeChild(N[G]);
return L})}},{key:"computeCharBBoxes",value:function(b,e,l,a,f,m,q,r){var u=this;l=void 0===l?0:l;a=void 0===a?0:a;return this.withTextLayerNodeDo(b,m,f,this.generateStyleKey(f),function(v,y,z){var B=q(e);v.appendChild(B);v=1E4<e.stringSize&&zh.charBoundsOfBigMonospacedLine(b,r,e,B,l,a,f,m)||zh.charBoundsOfLine(e,B,l-y,a-z);u.debug||B.parentNode.removeChild(B);return v})}},{key:"withTextLayerNodeDo",value:function(b,e,l,a,f){var m=this.doc,q=this.textlayerNodeCache,r=this.element,u=zh.textlayerNodeForFontMeasure(b);
u||(u=q[a]);if(!u){this.textlayerNodeCacheCount++;u=q[a]=e(l,[]);u.id=a;e=l.width;var v=l.clipMode;l.width||l.clipMode&&"visible"!==l.clipMode?(l=m.createElement("div"),l.style.position="absolute",v&&(l.style.overflow=v),e&&(l.style.width=e+"px"),l.id=a,l.appendChild(u),r.appendChild(l)):r.appendChild(u)}a=b.getGlobalTransform().inverse();b.env.renderer&&b.env.renderer.getNodeForMorph(b)&&(1!=a.getScale()||0!=a.getRotation())&&(a.e=a.f=0,u.style.transform=a.toString());a=u.getBoundingClientRect();
b=a.left;a=a.top;try{return f(u,b,a)}finally{if(u.style.transform="",!this.debug&&this.textlayerNodeCacheCount>this.maxTextlayerNodeCacheCount){f=Math.ceil(this.maxTextlayerNodeCacheCount/2);for(var y;f--&&(y=r.childNodes[0]);)q[y.id]=null,r.removeChild(y);this.textlayerNodeCacheCount-=f}}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DOMTextMeasure"}}],k,{pathInPackage:function(){return"rendering/font-metric.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:11292,end:19738})})(void 0);zh.GLOBAL="undefined"!==typeof System?System.global:window||global||self||void 0;zh.getComputedFontFamily="function"===typeof zh.GLOBAL.getComputedStyle?function(d){return zh.GLOBAL.getComputedStyle(d).fontFamily}:function(){return""};zh.getComputedMarginLeft="function"===typeof zh.GLOBAL.getComputedStyle?function(d){return parseInt(zh.GLOBAL.getComputedStyle(d).marginLeft)||
0}:function(){return 0};zh.default=u3;var Uh=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js");Uh.signalBindings=function(d,k,n){if(d=d.attributeConnections){d=d.slice();for(var b=0;b<d.length;b++)d[b].sourceAttrName===k&&d[b].update(n)}};Uh.informMorph=function(d,k,n){try{n.onChange(k);Uh.signalBindings(n,"change",k);for(var b=n.owner;b;)b.onSubmorphChange(k,n),b=b.owner}catch(e){console.error("Error in informMorph: "+e.stack)}};Uh.arr=Qe;Uh.string=Hg;Uh.obj=lf;Uh.connect=Oe;Uh.signal=
oj;Uh.disconnect=xo;(function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("Change")&&"function"===typeof k.Change?k.Change:k.Change=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.target=b;this.group=null}},{key:"type",get:function(){return"abstract change"}},{key:"apply",value:function(){throw Error("Not yet implemented");
}},{key:"reverseApply",value:function(){throw Error("Not yet implemented");}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Change"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:769,end:1025})})(void 0);var jR=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),
n=k.hasOwnProperty("GroupChange")&&"function"===typeof k.GroupChange?k.GroupChange:k.GroupChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.changes=[]}},{key:"consumesChanges",value:function(){return!0}},{key:"addChange",value:function(b){this.changes.push(b);
b.group=this}},{key:"apply",value:function(){this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GroupChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1034,end:1463})}(Uh.Change);Uh.GroupChange=jR;Uh.GroupChange=jR;Uh.GroupChange=jR;var kR=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("ValueChange")&&"function"===typeof k.ValueChange?k.ValueChange:k.ValueChange=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:"type",get:function(){return"setter"}},
{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a){zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.prop=e;this.value=l;this.prevValue=null;this.meta=a}},{key:"apply",value:function(){this.target[this.prop]=this.value}},{key:"reverseApply",value:function(){this.target[this.prop]=this.prevValue}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueChange"}}],k,{pathInPackage:function(){return"changes.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1472,end:1893})}(Uh.Change);Uh.ValueChange=kR;Uh.ValueChange=kR;Uh.ValueChange=kR;var lR=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("MethodCallChange")&&"function"===typeof k.MethodCallChange?k.MethodCallChange:k.MethodCallChange=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:"type",get:function(){return"method-call"}},{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a,f){zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b);this.selector=e;this.args=l;this.undo=a;this.meta=f}},{key:"apply",value:function(){var b=this.target;b[this.selector].apply(b,this.args)}},
{key:"reverseApply",value:function(){if(this.undo)if("function"===typeof this.undo)this.undo();else{var b=this.undo,e=b.target;e[b.selector].apply(e,b.args)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MethodCallChange"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:1902,end:2486})}(Uh.GroupChange);Uh.MethodCallChange=lR;Uh.MethodCallChange=lR;Uh.MethodCallChange=lR;var rK=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/changes.js"),n=k.hasOwnProperty("ChangeManager")&&"function"===typeof k.ChangeManager?k.ChangeManager:k.ChangeManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},
{key:"reset",value:function(){this.changes=[];this.changeRecordedListeners=[];this.revision=0;this.changeRecordersPerMorph=new WeakMap;this.changeRecorders={};this.changeGroupStack=[];this.defaultMeta={};this.metaStack=[]}},{key:"changesFor",value:function(b){return this.changes.filter(function(e){return e.target===b})}},{key:"apply",value:function(b,e){e.apply()}},{key:"doWithValueChangeMeta",value:function(b,e,l){this.defaultMeta=b;this.metaStack.push(b);try{var a=l(e)}finally{return this.metaStack.pop(),
this.defaultMeta=Uh.arr.last(this.metaStack)||{},a}}},{key:"addValueChange",value:function(b,e,l,a){e=new Uh.ValueChange(b,e,l,Object.assign({},this.defaultMeta,{},a));return this._record(b,e)}},{key:"addMethodCallChangeDoing",value:function(b,e,l){var a=b.target,f=b.selector,m=b.args;(b=b.undo)||(b=function(){return console.warn("No undo recorded for "+a+"."+f)});m=new Uh.MethodCallChange(a,f,m,b,this.defaultMeta);e.groupChangesWhile(m,l);return m}},{key:"_record",value:function(b,e){Uh.signal(this,
"changeRecorded",e);e.hasOwnProperty("value")&&(e.prevValue=b._morphicState[e.prop],b._morphicState[e.prop]=e.value);b.makeDirty(e);var l=Uh.arr.last(this.changeGroupStack);l&&l.consumesChanges()?l.addChange(e):(this.changes.push(e),b._rev=++this.revision,this.informChangeListeners(e));Uh.informMorph(this,e,b);return e}},{key:"groupChangesWhile",value:function(b,e,l,a){a=void 0===a?!0:a;e||(e=new Uh.GroupChange(b));this.changeGroupStack.push(e);try{return l(),Uh.arr.remove(this.changeGroupStack,e),
a?this._record(b,e):e}catch(f){throw Uh.arr.remove(this.changeGroupStack,e),f;}}},{key:"dontRecordChangesWhile",value:function(b,e){return this.groupChangesWhile(b,void 0,e,!1)}},{key:"recordChangesWhile",value:function(b,e){var l=this.changes.length;b();b=this.changes.slice(l,this.changes.length);return e?b.filter(e):b}},{key:"addChangeListener",value:function(b){Uh.arr.pushIfNotIncluded(this.changeRecordedListeners,b)}},{key:"removeChangeListener",value:function(b){Uh.arr.remove(this.changeRecordedListeners,
b)}},{key:"informChangeListeners",value:function(b){this.changeRecordedListeners.forEach(function(e){return e(b)})}},{key:"recordChangesStart",value:function(b,e){e=Uh.obj.newKeyIn(this.changeRecorders,(void 0===e?"":e)+"__change_recorder_"+Date.now());var l=b?function(f){return b(f)&&a.changes.push(f)}:function(f){return a.changes.push(f)},a=this.changeRecorders[e]={id:e,filter:b,changes:[],listener:l};this.addChangeListener(l);return a}},{key:"recordChangesStop",value:function(b){if(!(b in this.changeRecorders))return[];
var e=this.changeRecorders[b],l=e.changes;e=e.listener;delete this.changeRecorders[b];this.removeChangeListener(e);return l}},{key:"recordChangesStartForMorph",value:function(b,e){e=this.recordChangesStart(e,b.id);var l=this.changeRecordersPerMorph.get(b);l||(l=[],this.changeRecordersPerMorph.set(b,l));l.push(e.id);return e}},{key:"recordChangesStopForMorph",value:function(b,e){var l=this.changeRecordersPerMorph.get(b);if(!l||!l.length)return console.warn("Cannot endMorphChangeRecorder for morph "+
b+": recorder not found"),[];(b=e)?Uh.arr.remove(l,b):b=l.pop();return this.recordChangesStop(b)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ChangeManager"}}],k,{pathInPackage:function(){return"changes.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2495,end:7620})}(void 0);Uh.ChangeManager=rK;Uh.ChangeManager=
rK;Uh.ChangeManager=rK;var bl=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js");bl.printArg=function(d){return bl.obj.inspect(d,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};bl.obj=lf;bl.arr=Qe;bl.events=Gx;bl.fun=Zk;(function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=k.hasOwnProperty("Undo")&&"function"===typeof k.Undo?k.Undo:k.Undo=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){e=void 0===e?[]:e;this.name=b;this.targets=e;this.timestamp=this.changes=this.recorder=null;this.no=void 0===l?0:l}},{key:"recorded",value:function(){return!!this.changes}},{key:"isRecording",value:function(){return!!this.recorder}},{key:"startRecording",value:function(b){var e=this;if(this.recorded()||this.isRecording())throw Error("Undo already recorded / recording");if(!this.targets.length)throw Error("Undo has no target morphs");
this.timestamp=Date.now();this.recorder=this.targets[0].recordChangesStart(function(l){var a=l.target;return a.isUsedAsEpiMorph()||!e.targets.some(function(f){return f===a||f.isAncestorOf(a)})?!1:"function"===typeof b?b(l):!0});return this}},{key:"stopRecording",value:function(){var b=this.recorder.id;this.changes=$jscomp.makeIterator(this.targets).next().value.recordChangesStop(b);this.recorder=this.targets=null}},{key:"apply",value:function(){if(!this.recorded())throw Error("Cannot apply undo that has no changes recorded yet");
this.changes.slice().forEach(function(b){return b.apply()});return this}},{key:"reverseApply",value:function(){if(!this.recorded())throw Error("Cannot reverseApply undo that has no changes recorded yet");this.changes.slice().reverse().forEach(function(b){return b.reverseApply()});return this}},{key:"addTarget",value:function(b){bl.arr.pushIfNotIncluded(this.targets,b)}},{key:"addUndos",value:function(b){b=bl.arr.sortBy(b.concat(this).filter(function(e){return e.recorded()}),function(e){return e.no});
b.length&&(this.changes=bl.arr.flatmap(b,function(e){return e.changes}),this.timestamp=b[0].timestamp,this.no=b[0].no,this.name=b.map(function(e){return e.name}).join("-"))}},{key:"toString",value:function(){var b=this.name,e=this.changes,l=this.no,a=this.isRecording();e=e.length?"\n  "+e.map(function(f){var m=f.selector,q=f.args,r=f.prop,u=f.value;f=f.target;return m?f+"."+m+"("+q.map(bl.printArg)+")":f+"."+r+" = "+bl.printArg(u)}).join("\n  "):"no changes";return"Undo("+l+":"+b+" "+(a?"RECORDING ":
"")+e+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Undo"}}],k,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:54,end:2504})})(void 0);var iF=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/undo.js"),n=k.hasOwnProperty("UndoManager")&&"function"===
typeof k.UndoManager?k.UndoManager:k.UndoManager=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.reset();this.filter=b}},{key:"reset",value:function(){this.undos=[];this.redos=[];this.undoInProgress=null;this.counter=this.applyCount=0;this.grouping={current:[],debounce:null,debouncedCanceled:!1,debounceTime:31}}},{key:"group",value:function(b){b=
void 0===b?null:b;this.groupLaterCancel();b&&this.undos.includes(b)&&(this.grouping.current=bl.arr.uniq(this.undos.slice(this.undos.indexOf(b)).concat(this.grouping.current)));this.grouping.current.length&&(b=this.grouping.current.slice(1),this.grouping.current[0].addUndos(b),this.undos=bl.arr.withoutAll(this.undos,b),this.grouping.current=[])}},{key:"ensureNewGroup",value:function(b,e){e=void 0===e?"new undo group":e;this.group();this.undoStart(b,e);return this.undoStop()}},{key:"groupLaterCancel",
value:function(){var b=this.grouping;b.debounce&&(b.debouncedCanceled=!0,this.grouping=Object.assign({},b,{debounce:null,debouncedCanceled:!1}))}},{key:"groupLater",value:function(b){var e=this,l=this.grouping;(l.debounce||(l.debounce=bl.fun.debounce(b||l.debounceTime,function(){l.debounce=null;l.debouncedCanceled||e.group()})))()}},{key:"undoStart",value:function(b,e){if(!this.applyCount)if(this.undoInProgress)console.warn("There is already an undo recorded");else return this.undoInProgress=(new bl.Undo(e,
[b],this.counter++)).startRecording(this.filter)}},{key:"undoStop",value:function(){var b=this.undoInProgress;if(!b)return null;b.stopRecording();this.undoInProgress=null;this.undos.push(b);this.grouping.current.push(b);this.redos.length&&(this.redos.length=0);return b}},{key:"removeLatestUndo",value:function(){this.undoStop();var b=this.undos.pop();bl.arr.remove(this.grouping.current,b);return b}},{key:"undo",value:function(){var b=this.removeLatestUndo();if(b){bl.arr.remove(this.grouping.current,
b);this.redos.unshift(b);this.applyCount++;try{b.reverseApply()}finally{this.applyCount--}return b}}},{key:"redo",value:function(){this.undoStop();var b=this.redos.shift();if(b){this.undos.push(b);this.applyCount++;try{b.apply()}finally{this.applyCount--}return b}}},{key:"toString",value:function(){var b=0===this.undos.length?"":"\n  "+(20<this.undos.length?"...\n  ":"")+this.undos.slice(-20).join("\n  ");return"UndoManager("+this.undos.length+" undos, "+this.redos.length+" redos, "+(this.undoInProgress?
", UNDO IN PROGRESS":"")+b+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"UndoManager"}}],k,{pathInPackage:function(){return"undo.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2639,end:5829})}(void 0);bl.UndoManager=iF;bl.UndoManager=iF;bl.UndoManager=iF;var pm=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js");
pm.promise=oe;pm.bowser=ir;pm.touchInputDevice=Mp;pm.placeholderValue="\u0001\u0001";pm.placeholderRe=/\u0001/g;var v3=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/TextInput.js"),n=k.hasOwnProperty("TextInput")&&"function"===typeof k.TextInput?k.TextInput:k.TextInput=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.eventDispatcher=
b;this.domState={rootNode:null,textareaNode:null,eventHandlers:[],isInstalled:!1};this.inputState={composition:null,manualCopy:null,manualPaste:null,positionChangedTime:0,scrollLeftWhenChanged:0,scrollTopWhenChanged:0}}},{key:"install",value:function(b,e){var l=this,a=this.domState,f=a.isInstalled,m=a.rootNode;this.world=e;if(f){if(m===b)return;this.uninstall()}a.isInstalled=!0;a.rootNode=b;b.tabIndex=1;e=a.textareaNode=b.ownerDocument.createElement("textarea");e.setAttribute("style","\n      position: absolute;\n      /*extent cannot be 0, input won't work correctly in Chrome 52.0*/\n      width: 20px; height: 20px;\n      z-index: 0;\n      opacity: 1;\n      background: transparent;\n      -moz-appearance: none;\n      appearance: none;\n      border: none;\n      resize: none;\n      outline: none;\n      overflow: hidden;\n      font: inherit;\n      padding: 0 1px;\n      margin: 0 -1px;\n      text-indent: -1em;\n      -ms-user-select: text;\n      -moz-user-select: text;\n      -webkit-user-select: text;\n      user-select: text;\n      /*with pre-line chrome inserts &nbsp; instead of space*/\n      white-space: pre!important;");
pm.touchInputDevice&&e.setAttribute("x-palm-disable-auto-cap",!0);e.setAttribute("wrap","off");e.setAttribute("autocorrect","off");e.setAttribute("autocapitalize","off");e.setAttribute("spellcheck",!1);e.setAttribute("aria-label","Lively Textinput Node");e.className="lively-text-input";e.value="";b.insertBefore(e,b.firstChild);pm.touchInputDevice&&(e.setAttribute("disabled",!0),e.style.setProperty("transform","scale(0)"));a.eventHandlers=[{type:"focusin",node:b,fn:function(q){return l.onRootNodeFocus(q)},
capturing:!0},{type:"focusin",node:a.textareaNode,fn:function(q){return l.onTextAreaFocus(q)},capturing:!0},{type:"blur",node:a.textareaNode,fn:function(q){return l.onTextAreaBlur(q)},capturing:!0},{type:"keydown",node:a.textareaNode,fn:function(q){return l.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"keyup",node:a.textareaNode,fn:function(q){return l.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"cut",node:a.textareaNode,fn:function(q){return l.eventDispatcher.dispatchDOMEvent(q)},
capturing:!1},{type:"copy",node:a.textareaNode,fn:function(q){return l.inputState.manualCopy?l.inputState.manualCopy.onEvent(q):l.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"paste",node:a.textareaNode,fn:function(q){return l.inputState.manualPaste?l.inputState.manualPaste.onEvent(q):l.eventDispatcher.dispatchDOMEvent(q)},capturing:!1},{type:"compositionstart",node:a.textareaNode,fn:function(q){return l.onCompositionStart(q)},capturing:!1},{type:"compositionend",node:a.textareaNode,fn:function(q){return l.onCompositionEnd(q)},
capturing:!1},{type:"compositionupdate",node:a.textareaNode,fn:function(q){return l.onCompositionUpdate(q)},capturing:!1},{type:"input",node:a.textareaNode,fn:function(q){return l.onInput(q)},capturing:!1}];a.eventHandlers.forEach(function(q){return q.node.addEventListener(q.type,q.fn,q.capturing)});return this}},{key:"uninstall",value:function(){var b=this.domState;b.isInstalled=!1;b.eventHandlers.forEach(function(l){return l.node.removeEventListener(l.type,l.fn,l.capturing)});var e=b.textareaNode;
e&&e.parentNode&&e.parentNode.removeChild(e);b.rootNode=null;return this}},{key:"resetValue",value:function(){var b=this.domState.textareaNode;b&&(b.value=pm.placeholderValue)}},{key:"readValue",value:function(){var b=this.domState.textareaNode;return b?b.value.replace(pm.placeholderRe,""):""}},{key:"focus",value:function(b,e){var l=this.domState.textareaNode;l&&(pm.touchInputDevice&&b&&b.isText&&!b.readOnly&&l.removeAttribute("disabled"),b&&b.stealFocus||l.ownerDocument.activeElement!==l&&l.focus(),
pm.bowser.firefox&&Promise.resolve().then(function(){return l.ownerDocument.activeElement!==l&&l.focus()}),b&&b.isText&&b.focusable?(pm.touchInputDevice&&l.focus(),this.ensureBeingAtCursorOfText(b)):e&&this.ensureBeingInVisibleBoundsOfWorld(e))}},{key:"blur",value:function(){var b=this.domState.textareaNode;pm.touchInputDevice&&b.setAttribute("disabled",!0);b&&b.blur()}},{key:"doCopyWithMimeTypes",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var l=e.domState.textareaNode,
a=function(f){l.removeEventListener("copy",a);f.preventDefault();b.forEach(function(m){return f.clipboardData.setData(m.type,m.data)})};setTimeout(function(){return l.removeEventListener("copy",a)},300);l.addEventListener("copy",a);l.value="";l.select();l.ownerDocument.execCommand("copy")})}},{key:"doCopy",value:function(b){var e=this;return this.execCommand("manualCopy",function(){var l=e.domState.textareaNode;l.value=b;l.select();l.ownerDocument.execCommand("copy")})}},{key:"doPaste",value:function(){var b=
this;return this.execCommand("manualPaste",function(){var e=b.domState.textareaNode;e.value="";e.select();e.ownerDocument.execCommand("paste")})}},{key:"execCommand",value:function(b,e){var l=this,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:if(!l.domState.isInstalled)throw Error("Cannot copy to clipboard \u2013 input helper is not installed into DOM!");a=l.inputState;if(!a[b]){r.jumpTo(2);break}r.setCatchFinallyBlocks(3);return r.yield(a[b].promise,
5);case 5:r.leaveTryBlock(2);break;case 3:r.enterCatchBlock();case 2:return f=pm.promise.deferred(),m=!1,a[b]={onEvent:function(u){m||(a[b]=null,m=!0,f.resolve(u))},promise:f.promise},e(),r.setCatchFinallyBlocks(6),r.yield(pm.promise.waitFor(1E3,function(){return m}),8);case 8:r.leaveTryBlock(7);break;case 6:q=r.enterCatchBlock(),a[b]=null,m=!0,f.reject(q);case 7:return r.return(f.promise)}})}},{key:"onTextAreaBlur",value:function(b){var e=this;setTimeout(function(){var l=e.domState||{},a=l.textareaNode;
l=l.rootNode;!l||document.activeElement!==l||e.world.focusedMorph&&e.world.focusedMorph.stealFocus||pm.touchInputDevice||lively.FreezerRuntime||a&&a.focus()})}},{key:"onTextAreaFocus",value:function(b){}},{key:"onRootNodeFocus",value:function(b){var e=this.domState||{},l=e.rootNode;if(b.target===e.textareaNode||b.target===l)this.world.focusedMorph&&this.world.focusedMorph.stealFocus||this.focus();this.inputState.composition=null}},{key:"onInput",value:function(b){if(!this.inputState.composition){if(!b.data){var e=
this.readValue();b.__defineGetter__("data",function(){return e})}this.resetValue();this.eventDispatcher.dispatchDOMEvent(b)}}},{key:"onCompositionStart",value:function(b){this.inputState.composition={};this.eventDispatcher.dispatchDOMEvent(b)}},{key:"onCompositionUpdate",value:function(b){var e=this.inputState.composition,l=this.readValue();e.lastValue!==l&&(e.lastValue=l,this.eventDispatcher.dispatchDOMEvent(b))}},{key:"onCompositionEnd",value:function(b){this.inputState.composition=null;this.eventDispatcher.dispatchDOMEvent(b)}},
{key:"setPosition",value:function(b){var e=(this.domState||{}).textareaNode;e&&(e.style.left=b.x+"px",e.style.top=b.y+"px")}},{key:"ensureBeingInVisibleBoundsOfWorld",value:function(b){this.setPosition(b.visibleBounds().center())}},{key:"ensureBeingAtCursorOfText",value:function(b){var e=b.world();if(e){var l=b.whatsVisible,a=b.cursorPosition,f=a.row;a=a.column;f=Math.max(l.startRow,Math.min(f,l.endRow));l=b.charBoundsFromTextPosition({row:f,column:a}).topLeft();b=e.visibleBounds().insetBy(10).constrainPt(b.worldPoint(l.subPt(b.scroll)));
this.inputState.positionChangedTime=Date.now();this.inputState.scrollLeftWhenChanged=document.documentElement.scrollLeft;this.inputState.scrollTopWhenChanged=document.documentElement.scrollTop;this.setPosition(b)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextInput"}}],k,{pathInPackage:function(){return"events/TextInput.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:237,end:12306})}(void 0),zha=v3=pm.TextInput;pm.default=v3;var mR=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js");mR.arr=Qe;var w3=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/KillRing.js"),n=k.hasOwnProperty("KillRing")&&"function"===typeof k.KillRing?k.KillRing:k.KillRing=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),
value:function(b){this.size=void 0===b?0:b;this.buffer=[];this.pointer=-1}},{key:"isCycling",value:function(){return this.pointer!==this.buffer.length-1}},{key:"add",value:function(b){var e=this.buffer;e.push(b);this.size&&e.length>this.size&&e.splice(0,e.length-this.size);this.pointer=this.buffer.length-1;return b}},{key:"yank",value:function(){return this.buffer[this.pointer]||""}},{key:"back",value:function(){this.pointer=(0>=this.pointer?this.buffer.length:this.pointer)-1;return this.yank()}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KillRing"}}],k,{pathInPackage:function(){return"events/KillRing.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:51,end:621})}(void 0),Aha=w3=mR.KillRing;mR.default=w3;var gh=lively.FreezerRuntime.recorderFor("lively.morphic/events/Keys.js");gh.computeHashIdOfEvent=function(d){var k=
d.key;d=0|(d.ctrlKey?1:0)|(d.altKey?2:0)|(d.shiftKey?4:0)|(d.metaKey?8:0);0===d&&!gh.canonicalizeFunctionKey(k)&&k&&gh.letterRe.test(k)&&(d=-1);return d};gh.isModifier=function(d){if(gh.isNumber(d))return!1;d=d.replace(/-$/,"").toLowerCase();return gh.arr.withoutAll(Object.keys(gh.KEY_MODS),["","input-"]).includes(d)};gh.canonicalizeFunctionKey=function(d){d&&(d=d.toLowerCase());switch(d){case "space":d="space";break;case "esc":d="escape";break;case "return":d="enter";break;case "arrowleft":d="left";
break;case "arrowright":d="right";break;case "arrowup":d="up";break;case "arrowdown":d="down"}return gh.FUNCTION_KEYS.includes(d)?gh.string.capitalize(d):""};gh.decodeKeyIdentifier=function(d,k){var n=/u\+?([\d\w]{4})/gi,b=function(e,l){return String.fromCharCode(parseInt(l,16))};d=d&&d.replace(n,b);if("Command"===d||"Cmd"===d)d="Meta";" "===d&&(d="Space");8===k&&(d="Backspace");return d};gh.identifyKeyFromCode=function(d){d=d.code;if("string"!==typeof d)return null;if(d.startsWith("Key"))return d.slice(3);
if(d.startsWith("Numpad"))return d;if(d.startsWith("Digit")||d.startsWith("Arrow"))return d.slice(5);if(d.match(/^F[0-9]{1-2}$/))return d;switch(d){case "Insert":case "Home":case "PageUp":case "PageDown":return d;case "Period":return".";case "Comma":return",";case "Help":return"Insert";case "Equal":return"=";case "Backslash":case "IntlBackslash":return"\\";case "Equal":return"=";case "Minus":return"-";case "BracketRight":return"]";case "BracketLeft":return"[";case "Quote":return"'";case "Backquote":return"`";
case "Semicolon":return";"}return null};gh.dedasherize=function(d){for(var k=[];;){var n=d.indexOf("-");if(-1===n)return d&&k.push(d),k;0===n?(k.push(d[0]),d=d.slice(2)):(k.push(d.slice(0,n)),d=d.slice(n+1))}};gh.bowser=ir;gh.arr=Qe;gh.string=Hg;gh.letterRe=/[a-z]/i;gh.MODIFIER_KEYS={16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"};gh.KEY_MODS=function(){for(var d={control:1,ctrl:1,alt:2,option:2,shift:4,super:8,win:8,meta:8,command:8,cmd:8},k=["alt","ctrl","meta","shift"],n=Math.pow(2,k.length);n--;)d[n]=
k.filter(function(b){return n&d[b]}).join("-")+"-";d[0]="";d[-1]="input-";return d}();gh.isNumber=function(){var d=/^[0-9]+$/;return function(k){return d.test(k)}}();gh.FUNCTION_KEYS="backspace;tab;enter;pause;escape; ;pageup;pagedown;end;home;left;up;right;down;print;insert;delete;numpad0;numpad1;numpad2;numpad3;numpad4;numpad5;numpad6;numpad7;numpad8;numpad9;numpadenter;f1;f2;f3;f4;f5;f6;f7;f8;f9;f10;f11;f12;numlock;scrolllock".split(";");gh.Keys={computeHashIdOfEvent:gh.computeHashIdOfEvent,keyComboToEventSpec:function(d,
k){k=Object.assign({_isLivelyKeyEventSpec:!0,keyCombo:"",key:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,isFunctionKey:!1,isModified:!1,onlyModifiers:!1},k);var n=gh.dedasherize(d),b={shift:"shiftKey",control:"ctrlKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey",command:"metaKey",cmd:"metaKey"};if("input"===n[0]&&2===n.length)return k.keyCombo=d,k.key=n[1],k;for(var e=n.length-1;0<=e;e--){var l=b[n[e].toLowerCase()];l&&(n.splice(e,1),k.isModified=!0,k[l]=!0)}if(!n.length)return k.keyCombo=
gh.Keys.eventToKeyCombo(k),k.key=gh.arr.last(gh.dedasherize(k.keyCombo)),k.onlyModifiers=!0,k;1<n.length&&console.warn('Strange key "'+d+'" encountered in keyComboToEventSpec, parsing probably failed');d=gh.arr.last(n);(n=gh.canonicalizeFunctionKey(d))?(k.isFunctionKey=!0,k.key=n):k.key=k.isModified?gh.string.capitalize(d):d;k.keyCombo=gh.Keys.eventToKeyCombo(k);return k},eventToKeyCombo:function(d,k){Object.assign({ignoreModifiersIfNoCombo:!1,ignoreKeys:[]},k);k=d.key;var n=d.data,b=d.keyIdentifier;
if("string"===typeof n)return"input-"+n;if(!k&&b&&(k=gh.decodeKeyIdentifier(b,d.which||d.keyCode),d.key=k=k[d.shiftKey?"toUpperCase":"toLowerCase"](),gh.isModifier(k)))return gh.string.capitalize(k);n=gh.KEY_MODS[gh.computeHashIdOfEvent(d)];if("input-"===n)return n+k;d.code&&(k=gh.identifyKeyFromCode(d)||k);d=!k||gh.isModifier(k)?n.replace(/-$/,""):n+k;d.match(/\s$/)&&(d=d.replace(/\s$/,"Space"));return d.replace(/(^|-)([a-z])/g,function(e,l,a){return l+a.toUpperCase()})},canonicalizeKeyCombo:function(d){return gh.Keys.eventToKeyCombo(gh.Keys.keyComboToEventSpec(d))},
canonicalizeEvent:function(d){return d._isLivelyKeyEventSpec?d:gh.Keys.keyComboToEventSpec(gh.Keys.eventToKeyCombo(d))}};var nR=gh.Keys;gh.default=nR;var hh=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js");hh.bowser=ir;hh.obj=lf;hh.pt=nf;hh.Keys=nR;hh.cumulativeOffset=jd;var oR="pointerover pointerenter pointerout pointerleave pointerdown pointermove pointerup pointercancel gotpointercapture lostpointercapture".split(" ");hh.pointerEvents=oR;hh.pointerEvents=oR;hh.pointerEvents=
oR;var pR="mouseover mouseenter mousedown mousemove mouseup mouseout mouseleave click dblclick contextmenu mousewheel".split(" ");hh.mouseEvents=pR;hh.mouseEvents=pR;hh.mouseEvents=pR;var qR=["keydown","keyup","keypress"];hh.keyboardEvents=qR;hh.keyboardEvents=qR;hh.keyboardEvents=qR;var sK=hh.keyboardEvents.concat("input","compositionstart","compositionupdate","compositionend");hh.keyLikeEvents=sK;hh.keyLikeEvents=sK;hh.keyLikeEvents=sK;var tK=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),
n=k.hasOwnProperty("Event")&&"function"===typeof k.Event?k.Event:k.Event=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a,f,m,q){this.type=b;this.domEvt=e;this.dispatcher=l;this.targetMorphs=a;this.hand=f;this.halo=m;this.layoutHalo=q;this.stopped=!1;this._keyCombo=void 0;this.onDispatchCallbacks=[];this.onAfterDispatchCallbacks=[];this.onStopCallbacks=
[]}},{key:"onDispatch",value:function(b){this.onDispatchCallbacks.push(b);return this}},{key:"onAfterDispatch",value:function(b){this.onAfterDispatchCallbacks.push(b);return this}},{key:"onStop",value:function(b){this.onStopCallbacks.push(b);return this}},{key:"data",get:function(){return this.domEvt.data}},{key:"world",get:function(){return this.dispatcher.world}},{key:"state",get:function(){return this.dispatcher.eventState}},{key:"keyInputState",get:function(){return this.state.keyInputState}},
{key:"isMouseEvent",value:function(){return hh.pointerEvents.includes(this.type)||hh.mouseEvents.includes(this.type)}},{key:"isKeyboardEvent",value:function(){return!this.isMouseEvent()&&hh.keyboardEvents.includes(this.type)}},{key:"stop",value:function(){this.stopped=!0;this.domEvt&&"function"===typeof this.domEvt.stopPropagation&&this.domEvt.stopPropagation();this.domEvt&&"function"===typeof this.domEvt.preventDefault&&this.domEvt.preventDefault();this.onStopCallbacks.forEach(function(b){return b()})}},
{key:"targetMorph",get:function(){return this.targetMorphs[0]}},{key:"timestamp",get:function(){return this.domEvt.timeStamp}},{key:"position",get:function(){if(!this.domEvt)return hh.pt(0,0);for(var b=this.domEvt.target;b&&b.id!==this.world.id;)b=b.parentNode;b||(b=this.domEvt.target,b=(b.nodeType===b.DOCUMENT_NODE?b:b.ownerDocument).getElementById(this.world.id));if(!b)return console.error("event position: cannot find world node for determining the position!"),hh.pt(0,0);b=hh.cumulativeOffset(b);
var e=this.domEvt;b=hh.pt((e.pageX||0)-b.left,(e.pageY||0)-b.top);1!==this.world.scale&&(b=b.scaleBy(1/this.world.scale));return b}},{key:"startPosition",get:function(){return this.state.clickedOnPosition}},{key:"pressure",get:function(){return this.domEvt?this.domEvt.pressure:.5}},{key:"positionIn",value:function(b){return b.localize(this.position)}},{key:"isClickTarget",value:function(b){var e=this.state.clickedOnMorph;return e&&(b===e||b.isAncestorOf(e))}},{key:"leftMouseButtonPressed",value:function(){return this.domEvt?
1===this.domEvt.buttons:!1}},{key:"rightMouseButtonPressed",value:function(){return this.domEvt?2===this.domEvt.buttons:!1}},{key:"middleMouseButtonPressed",value:function(){return this.domEvt?4===this.domEvt.buttons:!1}},{key:"isCommandKey",value:function(){var b=this.domEvt;if(!b)return!1;var e=!1;hh.bowser.mac||(e=e||b.ctrlKey);if(hh.bowser.tablet||hh.bowser.tablet)e=e||!1;return e||b.metaKey||"Meta"===b.keyIdentifier}},{key:"isShiftDown",value:function(){return this.domEvt&&!!this.domEvt.shiftKey}},
{key:"isCtrlDown",value:function(){return this.domEvt&&!!this.domEvt.ctrlKey}},{key:"isAltDown",value:function(){return this.domEvt&&!!this.domEvt.altKey}},{key:"keyCombo",get:function(){return this._keyCombo||(this._keyCombo=hh.Keys.eventToKeyCombo(this.domEvt))}},{key:"keyCombo",set:function(b){return this._keyCombo=b}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Event"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:957,end:4837})}(void 0);hh.Event=tK;hh.Event=tK;hh.Event=tK;var uK=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("KeyEvent")&&"function"===typeof k.KeyEvent?k.KeyEvent:k.KeyEvent=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l,a,f,m,q){console.assert(hh.keyLikeEvents.includes(b),"not a keyboard event: "+b);zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this,b,e,l,a,f,m,q);Object.assign(this,hh.Keys.canonicalizeEvent(e))}},{key:"isKeyEvent",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyEvent"}}],k,{pathInPackage:function(){return"events/Event.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4846,end:5216})}(hh.Event);hh.KeyEvent=uK;hh.KeyEvent=uK;hh.KeyEvent=uK;var vK=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/Event.js"),n=k.hasOwnProperty("SimulatedDOMEvent")&&"function"===typeof k.SimulatedDOMEvent?k.SimulatedDOMEvent:k.SimulatedDOMEvent=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){b=void 0===b?{}:b;if(b.position){var e=b.position,l=e.x;e=e.y;b=hh.obj.dissoc(b,["position"]);b.pageX=l;b.pageY=e}!b.hasOwnProperty("pointerId")&&hh.mouseEvents.concat(hh.pointerEvents).includes(b.type)&&(b=Object.assign({},b,{pointerId:1}));Object.assign(this,Object.assign({type:void 0,target:void 0,
pageX:void 0,pageY:void 0,pointerId:void 0,pointerType:"mouse",buttons:0,keyCode:void 0,keyString:"",keyIdentifier:void 0,altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,stopped:!1},b))}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SimulatedDOMEvent"}}],k,{pathInPackage:function(){return"events/Event.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:5225,end:6130})}(void 0);hh.SimulatedDOMEvent=vK;hh.SimulatedDOMEvent=vK;hh.SimulatedDOMEvent=vK;var ye=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js");ye.dragStartEvent=function(d,k,n,b,e,l,a){var f=(new ye.Event("morphicdragstart",d,k,[n],e,l,a)).onDispatch(function(){b.draggedMorph=n;b.dragStartMorphPosition=n.position;b.dragStartPosition=
f.position;b.lastDragPosition=f.position;b.dragDelta=ye.pt(0,0);b.absDragDelta=ye.pt(0,0)}).onStop(function(){b.draggedMorph=null;k.schedule(ye.dragEndEvent(d,k,n,b,e,l,a))});return f};ye.dragEvent=function(d,k,n,b,e,l,a){var f=(new ye.Event("morphicdrag",d,k,[b.draggedMorph],e,l,a)).onDispatch(function(){b.dragDelta=(b.draggedMorph.owner||k.world).getInverseTransform().transformDirection(f.position.subPt(b.lastDragPosition));b.absDragDelta=f.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){return b.lastDragPosition=
f.position}).onStop(function(){b.draggedMorph=null;k.schedule(ye.dragEndEvent(d,k,n,b,e,l,a))});return f};ye.dragEndEvent=function(d,k,n,b,e,l,a){var f=b.draggedMorph||n,m=(new ye.Event("morphicdragend",d,k,[f],e,l,a)).onDispatch(function(){b.dragDelta=(f.owner||k.world).getInverseTransform().transformDirection(m.position.subPt(b.lastDragPosition));b.absDragDelta=m.position.subPt(b.clickedOnPosition)}).onAfterDispatch(function(){b.draggedMorph=null;b.lastDragPosition=null;b.dragDelta=ye.pt(0,0);b.absDragDelta=
ye.pt(0,0);b.dragStartMorphPosition=null;b.dragStartPosition=null});return m};ye.focusEvents=function(d,k){var n=d.eventState;if(n.focusedMorph===k)return[];d=[];n.focusedMorph&&d.push((new ye.Event("blur",null,this,[n.focusedMorph],null,null,null)).onDispatch(function(){return n.focusedMorph=null}));d.push((new ye.Event("focus",null,this,[k],null,null,null)).onDispatch(function(){return n.focusedMorph=k}));return d};ye.arr=Qe;ye.fun=Zk;ye.Path=Cg;ye.promise=oe;ye.pt=nf;ye.config=vk;ye.TextInput=
zha;ye.KillRing=Aha;ye.Event=tK;ye.KeyEvent=uK;ye.SimulatedDOMEvent=vK;ye.keyLikeEvents=sK;ye.cumulativeOffset=jd;ye.bowser=ir;ye.domEventsWeListenTo=[{type:"pointerdown",capturing:!1},{type:"pointerup",capturing:!1},{type:"pointermove",capturing:!1,passive:!1},{type:"pointerover",capturing:!1,passive:!1},{type:"pointerout",capturing:!1,passive:!1},{type:"contextmenu",capturing:!1},{type:"wheel",capturing:!1,passive:!1},{type:"scroll",capturing:!0,passive:!1},{type:"drag",capturing:!1},{type:"dragstart",
capturing:!1},{type:"dragend",capturing:!1},{type:"dragover",capturing:!1},{type:"dragenter",capturing:!1},{type:"dragleave",capturing:!1},{type:"drop",capturing:!1}];ye.eventsCausingImmediateRender=new Set(["pointerdown","pointerup","keydown","keyup","input"]);ye.globalDomEventsWeListenTo=[{type:"resize",capturing:!1,morphMethod:"onWindowResize"},{type:"orientationchange",capturing:!1,morphMethod:"onWindowResize"},{type:"scroll",capturing:!1,passive:!1,morphMethod:"onWindowScroll"},{type:"wheel",
capturing:!1,passive:!1,morphToMethod:"onMouseWheel"},{type:"beforeunload",capturing:!1,passive:!1,morphMethod:"onBeforeUnload"}];ye.typeToMethodMap={pointerdown:"onMouseDown",pointerup:"onMouseUp",pointermove:"onMouseMove",longclick:"onLongClick",hoverin:"onHoverIn",hoverout:"onHoverOut",morphicdrag:"onDrag",morphicdragstart:"onDragStart",morphicdragend:"onDragEnd",grab:"onGrab",morphicdrop:"onDrop",morphicdrophoverin:"onDropHoverIn",morphicdrophoverout:"onDropHoverOut",morphicdrophoverupdate:"onDropHoverUpdate",
keydown:"onKeyDown",keyup:"onKeyUp",input:"onTextInput",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd",blur:"onBlur",focus:"onFocus",contextmenu:"onContextMenu",cut:"onCut",copy:"onCopy",paste:"onPaste",scroll:"onScroll",wheel:"onMouseWheel",drag:"onNativeDrag",dragstart:"onNativeDragstart",dragend:"onNativeDragend",dragover:"onNativeDragover",dragenter:"onNativeDragenter",dragleave:"onNativeDragleave",drop:"onNativeDrop"};ye.focusTargetingEvents=
"keydown keyup keypress input compositionstart compositionupdate compositionend cut copy paste".split(" ");ye.textOnlyEvents=["input","compositionstart","compositionupdate","compositionend"];var x3=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/EventDispatcher.js"),n=k.hasOwnProperty("EventDispatcher")&&"function"===typeof k.EventDispatcher?k.EventDispatcher:k.EventDispatcher=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e){this.activations=0;this.emitter=b;this.keyInputHelper=null;this.world=e;this.installed=!1;this.handlerFunctions=[];this.killRing=new ye.KillRing(ye.config.text.clipboardBufferLength);this.nodeMorphMap=new WeakMap;this.timestampBase=ye.Path("performance.timing.navigationStart").get(b)||0;this.resetState()}},{key:"resetState",value:function(){this.eventState={timeOfLastActivity:0,focusedMorph:null,clickedOnPosition:null,
clickedOnMorph:null,clickCount:0,prevClick:{},draggedMorph:null,dragDelta:null,absDragDelta:null,lastDragPosition:null,dragStartMorphPosition:null,dragStartPosition:null,hover:{hoveredOverMorphs:[],unresolvedPointerOut:!1},scroll:{interactiveScrollInProgress:null},keyInputState:null,pressedKeys:{},html5Drag:{},dropHoverTarget:null};this.resetKeyInputState()}},{key:"resetKeyInputState",value:function(){this.eventState.keyInputState={keyChain:"",count:void 0}}},{key:"focusMorph",value:function(b){var e=
this;this.keyInputHelper&&this.keyInputHelper.focus(b,this.world);ye.focusEvents(this,b).forEach(function(l){return e.dispatchEvent(l)})}},{key:"isMorphFocused",value:function(b){return this.eventState.focusedMorph===b}},{key:"isMorphHovered",value:function(b){return this.eventState.hover.hoveredOverMorphs.includes(b)}},{key:"isMorphClicked",value:function(b){return this.eventState.clickedMorph==b}},{key:"isKeyPressed",value:function(b){return Object.keys(this.eventState.pressedKeys).map(function(e){return e.toLowerCase()}).includes(b.toLowerCase())}},
{key:"whenIdle",value:function(){var b=this;return ye.promise.waitFor(function(){return 0===b.activations})}},{key:"install",value:function(b){var e=this;if(this.installed)return this;this.installed=!0;var l=this.emitter,a=System.global;ye.domEventsWeListenTo.forEach(function(f){var m=f.type,q=f.capturing;f=f.passive;var r=function(u){return e.dispatchDOMEvent(u)};e.handlerFunctions.push({node:l,type:m,fn:r,capturing:q});l.addEventListener(m,r,{capture:q,passive:f})});a.addEventListener&&ye.globalDomEventsWeListenTo.forEach(function(f){var m=
f.type,q=f.capturing,r=f.morphMethod;f=f.passive;var u=function(v){return e.dispatchDOMEvent(v,e.world,r)};e.handlerFunctions.push({node:a,type:m,fn:u,capturing:q});a.addEventListener(m,u,{capture:q,passive:f})});this.keyInputHelper=(new ye.TextInput(this)).install(b,this.world);ye.bowser.ios&&b.setAttribute("touch-action","auto");return this}},{key:"uninstallHandler",value:function(b){var e=this.handlerFuntions.find(function(l){return l.type==b});e&&e.node.removeEventListener(e.node,e.fn,e.capturing)}},
{key:"uninstall",value:function(){this.installed=!1;var b=this.handlerFunctions;b.forEach(function(e){e.node.removeEventListener(e.type,e.fn,e.capturing)});b.length=0;this.keyInputHelper&&this.keyInputHelper.uninstall();this.keyInputHelper=null;return this}},{key:"processDOMEvent",value:function(b,e){var l=this,a=b.type,f=this.eventState,m=[e].concat(e.ownerChain()),q="touch"===b.pointerType,r=b.pointerId,u="number"===typeof r?this.world.handForPointerId(r,b.isPrimary):this.world.firstHand,v="number"!==
typeof r||q?null:this.world.haloForPointerId(r),y="number"!==typeof r||q?null:this.world.layoutHaloForPointerId(r),z=new (ye.keyLikeEvents.includes(a)?ye.KeyEvent:ye.Event)(a,b,this,m,u,v,y),B=[z],C=[];switch(a){case "keydown":f.pressedKeys[z.key]=!0;break;case "keyup":"Meta"===z.key?f.pressedKeys={}:delete f.pressedKeys[z.key];break;case "click":B=this.processDOMEvent(Object.assign({},b,{type:"pointerdown"}),e).events;a=this.processDOMEvent(Object.assign({},b,{type:"pointerup"}),e).events;B=B.concat(a);
break;case "pointerdown":z.onDispatch(function(){l.focusMorph(e);f.clickedOnMorph=e;f.clickedOnPosition=z.position;f.downTimeStamp=b.timeStamp;var G=!1,F=0;if(f.prevClick){F=f.prevClick;G=F.clickedOnMorph;var N=F.clickedAtTime;F=F.clickCount;N=Date.now()-N;G=G===e&&N<ye.config.repeatClickInterval}f.clickCount=G?F+1:1});break;case "pointerup":z.onAfterDispatch(function(){var G=f.clickedOnMorph,F=f.clickedOnPosition,N=f.clickCount,L=Date.now();f.prevClick={clickedOnMorph:G,clickedOnPosition:F,clickedAtTime:L,
clickCount:N};f.clickedOnMorph=null;f.clickCount=0;G=b.timeStamp-f.downTimeStamp;F=f.clickedOnPosition.dist(z.position);N=ye.config.longClick;L=N.minDur;var S=N.maxDur;F<N.maxDist&&G>=L&&G<=S&&(G=new ye.Event("longclick",b,l,m,u,v,y),l.schedule(G))});f.draggedMorph&&(B.push(ye.dragEndEvent(b,this,e,f,u,v,y)),z.targetMorphs=[this.world]);u.carriesMorphs()&&(f.dropHoverTarget?(B.push(new ye.Event("morphicdrophoverout",b,this,[f.dropHoverTarget],u,v,y)),e=f.dropHoverTarget,f.dropHoverTarget=null):e=
u.findDropTarget(z.position,u.grabbedMorphs),u.isAncestorOf(e)&&(e=this.world),B.push(new ye.Event("morphicdrop",b,this,[e],u,v,y)),z.targetMorphs=[this.world]);break;case "pointermove":u.carriesMorphs()?(z.targetMorphs=[this.world],a=u.findDropTarget(z.position,u.grabbedMorphs)||this.world,f.dropHoverTarget===a?B.push(new ye.Event("morphicdrophoverupdate",b,this,[a],u,v,y)):(f.dropHoverTarget&&B.push(new ye.Event("morphicdrophoverout",b,this,[f.dropHoverTarget],u,v,y)),f.dropHoverTarget=a,B.push(new ye.Event("morphicdrophoverin",
b,this,[a],u,v,y)))):f.draggedMorph?(z.targetMorphs=[this.world],B.push(ye.dragEvent(b,this,e,f,u,v,y))):f.clickedOnMorph&&f.clickedOnPosition&&f.clickedOnMorph.draggable&&!f.draggedMorph&&!u.carriesMorphs()&&(a=f.clickedOnPosition.dist(z.position),q=f.clickedOnMorph,a>q.dragTriggerDistance&&(q.grabbable?B.push(new ye.Event("grab",b,this,[q],u,v,y)):q.draggable&&B.push(ye.dragStartEvent(b,this,q,f,u,v,y)),z.targetMorphs=[this.world]));break;case "pointerover":f.hover.unresolvedPointerOut&&(f.hover.unresolvedPointerOut=
!1);a=[e].concat(e.ownerChain()).reverse();B=ye.arr.withoutAll(f.hover.hoveredOverMorphs,a).map(function(G){return(new ye.Event("hoverout",b,l,[G],u,v,y)).onDispatch(function(){return ye.arr.remove(f.hover.hoveredOverMorphs,G)})});a=ye.arr.withoutAll(a,f.hover.hoveredOverMorphs).map(function(G){return(new ye.Event("hoverin",b,l,[G],u,v,y)).onDispatch(function(){return ye.arr.pushIfNotIncluded(f.hover.hoveredOverMorphs,G)})});B=B.concat(a);break;case "pointerout":B=[];f.hover.unresolvedPointerOut=
!0;C.push(function(){if(f.hover.unresolvedPointerOut)return Promise.all(f.hover.hoveredOverMorphs.map(function(G){return l.schedule((new ye.Event("hoverout",b,l,[G],u,v,y)).onAfterDispatch(function(){return ye.arr.remove(f.hover.hoveredOverMorphs,G)}))}))});q&&this.world.removeHandForPointerId(r);break;case "blur":B=[(new ye.Event(a,b,this,[e],u,v,y)).onDispatch(function(){return f.focusedMorph=null})];break;case "focus":B=ye.focusEvents(this,e);break;case "scroll":B=[(new ye.Event(a,b,this,[e],u,
v,y)).onDispatch(function(){if(!f.scroll.interactiveScrollInProgress){var G=ye.promise.deferred(),F=G.promise,N=G.resolve;G="Firefox"==ye.bowser.name?500:250;"Safari"==ye.bowser.name&&(G=1E3);f.scroll.interactiveScrollInProgress=F;F.debounce=ye.fun.debounce(G,function(){f.scroll.interactiveScrollInProgress=null;N()})}f.scroll.interactiveScrollInProgress.debounce();F=b.target.documentElement||b.target;G=F.scrollLeft;var L=F.scrollTop,S=e.scroll,ha=S.x;S=S.y;if("hidden"!=F.style.overflow&&ha!==G||S!==
L)e.scroll=ye.pt(G,L)})];break;case "input":case "compositionstart":case "compositionupdate":case "compositionend":e.isText?z.targetMorphs=[e]:B=[];break;case "drag":case "dragstart":case "dragend":case "dragover":case "dragenter":case "dragleave":case "drop":"drop"!==a&&"dragover"!==a||b.preventDefault()}return{events:B,later:C}}},{key:"schedule",value:function(b){var e=this;this.activations++;return Promise.resolve().then(function(){return e.dispatchEvent(b)}).then(function(){return e.activations--},
function(l){e.activations--;throw l;})}},{key:"dispatchEvent",value:function(b,e){e=e||ye.typeToMethodMap[b.type];if(!e)throw Error("dispatchEvent: "+b.type+" not yet supported!");b.onDispatchCallbacks.forEach(function(f){return f()});this.activations++;for(var l,a=b.targetMorphs.length-1;0<=a;a--){try{b.targetMorphs[a][e](b)}catch(f){l=Error("Error in event handler "+b.targetMorphs[a]+"."+e+": "+(f.stack||f)),l.originalError=f,"undefined"!==typeof this.world?this.world.logError(l):console.error(l)}if(l||
b.stopped)break}this.activations--;b.onAfterDispatchCallbacks.forEach(function(f){return f()});if(l)throw l;}},{key:"dispatchDOMEvent",value:function(b,e,l){var a=this,f=this.world,m=this.eventState,q=this.nodeMorphMap,r=b.type;m.timeOfLastActivity=this.timestampBase+b.timeStamp;if(!e&&ye.focusTargetingEvents.includes(r))e=m.focusedMorph||f;else if(!e){for(m=b.target;;){e=m.className||"";"string"!==typeof e&&"baseVal"in e&&(e=e.baseVal);if(e&&e.includes("Morph"))break;if(!(m=m.parentNode))return}e=
q.get(m);if(!e){var u=m.id;(e=f.withAllSubmorphsDetect(function(v){return v.id===u}))&&q.set(m,e)}}e&&(b=this.processDOMEvent(b,e),q=b.events,b.later.map(function(v){a.activations++;return ye.promise.delay(0).then(v).then(function(){return a.activations--},function(y){a.activations--;throw y;})}),q.forEach(function(v){return a.dispatchEvent(v,l)}),f&&f.needsRerender()&&ye.eventsCausingImmediateRender.has(r)&&f.env.renderer.renderLater())}},{key:"simulateDOMEvents",value:function(b){for(var e=[],l=
0;l<arguments.length;++l)e[l-0]=arguments[l];l=this.emitter.document||this.emitter.ownerDocument;var a=[];e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next()){var m=f=f.value,q=m.target,r=m.position;m=m.type;if(ye.focusTargetingEvents.includes(m)){if(!this.keyInputHelper.domState.textareaNode)throw Error("Cannot simulate event of type "+m+", no keyInputHelper installed!");f=Object.assign({},f,{target:this.keyInputHelper.textareaNode})}q||(q=r?this.world.morphsContainingPoint(r)[0]:this.world);
q.isMorph&&(f=Object.assign({},f,{target:l.getElementById(q.id)}));f.position&&(q=ye.cumulativeOffset(l.getElementById(this.world.id)),f.position=f.position.addXY(q.left,q.top));"scroll"===m&&("scrollLeft"in f||"scrollTop"in f)&&(f.target.scrollLeft=f.scrollLeft||0,f.target.scrollTop=f.scrollTop||0);f=new ye.SimulatedDOMEvent(f);a.push(f);this.dispatchDOMEvent(f)}return a}},{key:"doCopy",value:function(b){return this.keyInputHelper.doCopy(b)}},{key:"doCopyWithMimeTypes",value:function(b){return this.keyInputHelper.doCopyWithMimeTypes(b)}},
{key:"doPaste",value:function(){return this.keyInputHelper.doPaste()}},{key:"cancelGrab",value:function(b,e){var l=this,a=[],f=this.eventState;f.clickedOnMorph=null;f.dropHoverTarget&&(a.push(new ye.Event("morphicdrophoverout",e.domEvt,this,[f.dropHoverTarget],b,null,null)),f.dropHoverTarget=null);a.forEach(function(m){return l.dispatchEvent(m)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EventDispatcher"}}],k,{pathInPackage:function(){return"events/EventDispatcher.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7120,end:29815})}(void 0),Bha=x3=ye.EventDispatcher;ye.default=x3;var wk=lively.FreezerRuntime.recorderFor("lively.morphic/env.js");wk.defaultDOMEnv=bx;wk.Renderer=qK;wk.FontMetric=yha;wk.ChangeManager=rK;wk.UndoManager=iF;wk.EventDispatcher=Bha;wk.subscribe=Hn;wk.unsubscribe=vo;var ar=wa("bg",function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/env.js"),
n=k.hasOwnProperty("MorphicEnv")&&"function"===typeof k.MorphicEnv?k.MorphicEnv:k.MorphicEnv=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){var e=this;b=void 0===b?wk.defaultDOMEnv():b;this.initialized=!1;this.synchronizer=this.objPool=this.systemChangeHandlers=this.world=this.eventDispatcher=this.renderer=this.fontMetric=null;this.changeManager=
new wk.ChangeManager;this.undoManager=new wk.UndoManager;this.installSystemChangeHandlers();this.whenRenderedRequesters=new Map;this.whenRenderedTickingProcess=null;"function"===typeof b.then?this._waitForDOMEnv=b.then(function(l){e._waitForDOMEnv=null;e.initWithDOMEnv(l);e.initialized=!0}).catch(function(l){return console.error("Error initializing MorphicEnv with dom env: "+l.stack)}):(this.initWithDOMEnv(b),this.initialized=!0)}},{key:"isDefault",value:function(){return this.constructor.default()===
this}},{key:"initWithDOMEnv",value:function(b){this.domEnv=b;this.fontMetric=wk.FontMetric.forDOMEnv(b)}},{key:"uninstallWorldRelated",value:function(){this.renderer&&this.renderer.clear();this.eventDispatcher&&this.eventDispatcher.uninstall();this.world&&this.world.suspendSteppingAll()}},{key:"uninstall",value:function(){var b=this;if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return b.uninstall()});this.deleteHistory();this.uninstallWorldRelated();this.fontMetric&&(this.fontMetric.uninstall(),
this.fontMetric=null);this.domEnv&&this.whenRenderedTickingProcess&&(this.domEnv.window.cancelAnimationFrame(this.whenRenderedTickingProcess),this.whenRenderedTickingProcess=null);this.whenRenderedRequesters=new Map;this.domEnv&&this.domEnv.destroy();this.initialized=!1;return Promise.resolve()}},{key:"setWorld",value:function(b,e){var l=this;e=void 0===e?this.renderer?this.renderer.rootNode:this.domEnv.document.body:e;return this._waitForDOMEnv?this._waitForDOMEnv.then(function(){return l.setWorld(b)}):
this.setWorldRenderedOn(b,e)}},{key:"setWorldRenderedOn",value:function(b,e,l){var a=this;l=void 0===l?null:l;if(!b||!b.isWorld)throw Error("world object does not look like a morphic world");if(this._waitForDOMEnv)return this._waitForDOMEnv.then(function(){return a.setWorldRenderedOn(b,e,l)});this.deleteHistory();this.uninstallWorldRelated();this.world=b;this.renderer=new wk.Renderer(b,e,this.domEnv);this.renderer.domNode=l;this.eventDispatcher=(new wk.EventDispatcher(this.domEnv.window,b)).install(e);
b.resumeSteppingAll();this.isDefault()&&(this.domEnv.window.$world=b);b.focus();b.makeDirty();this.renderer.renderLater();return b.whenRendered().then(function(){return a})}},{key:"installSystemChangeHandlers",value:function(){var b=this;if(!this.systemChangeHandlers){var e=this.systemChangeHandlers={};e["lively.modules/moduleloaded"]=[wk.subscribe("lively.modules/moduleloaded",function(l){return b.getTargetsFor("onModuleLoaded").forEach(function(a){return a.onModuleLoaded(l)})})];e["lively.modules/modulechanged"]=
[wk.subscribe("lively.modules/modulechanged",function(l){return b.getTargetsFor("onModuleChanged").forEach(function(a){return a.onModuleChanged(l)})})];e["lively.partsbin/partpublished"]=[wk.subscribe("lively.partsbin/partpublished",function(l){return b.getTargetsFor("onPartPublished").forEach(function(a){return a.onPartPublished(l)})})];e["lively.user/userchanged"]=[wk.subscribe("lively.user/userchanged",function(l){return b.getTargetsFor("onUserChanged").forEach(function(a){return a.onUserChanged(l)})})]}}},
{key:"uninstallSystemChangeHandlers",value:function(){var b=this.systemChangeHandlers;b&&(this.systemChangeHandlers=null,Object.keys(b).forEach(function(e){return b[e].forEach(function(l){return wk.unsubscribe(e,l)})}))}},{key:"getTargetsFor",value:function(b){var e=this.world,l=[];if(!e||!e.submorphs)return l;"function"===typeof e[b]&&l.push(e);e=$jscomp.makeIterator(e.submorphs);for(var a=e.next();!a.done;a=e.next())a=a.value,"function"===typeof a[b]&&l.push(a),a.isWindow&&a.targetMorph&&"function"===
typeof a.targetMorph[b]&&l.push(a.targetMorph);return l}},{key:"cleanupCaches",value:function(){this.world.withAllSubmorphsDo(function(b){return b._pathDependants=b._pathDependants.filter(function(e){return e.world()})})}},{key:"deleteHistory",value:function(){var b=this.changeManager,e=this.world,l=this.fontMetric;b&&(b.changes.length=0);e&&e.withAllSubmorphsDo(function(a){return a.undoManager&&a.undoManager.reset()});l&&l.reset()}},{key:"printStatus",value:function(){var b=this.changeManager,e=
this.world,l=0,a=0;e&&e.withAllSubmorphsDo(function(f){f.undoManager&&(l++,a+=f.undoManager.undos.length+f.undoManager.redos.length)});return b.changes.length+" changes recorded\n"+l+" morphs with undos\n"+a+" undo changes"}},{key:"updateWhenRenderedRequests",value:function(){for(var b=this,e=this.whenRenderedRequesters,l=0,a=$jscomp.makeIterator(e),f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value);f=m.next().value;var q=m=m.next().value,r=q.maxAttempts,u=q.resolve;q=q.reject;f._dirty||
f._rendering?++m.currentAttempt>r?(e.delete(f),q(Error("Failed to wait for whenRendered of "+f+" (tried "+r+"x)"))):l++:(e.delete(f),u(f))}this.whenRenderedTickingProcess=l?this.domEnv.window.requestAnimationFrame(function(){return b.updateWhenRenderedRequests()}):null}},{key:"whenRendered",value:function(b,e){var l=this;e=void 0===e?50:e;var a=this.whenRenderedRequesters,f=this.whenRenderedTickingProcess,m=a.get(b);if(!m){var q,r;m=new Promise(function(u,v){q=u;r=v});a.set(b,m={maxAttempts:e,currentAttempt:0,
resolve:q,reject:r,promise:m})}f||(this.whenRenderedTickingProcess=this.domEnv.window.requestAnimationFrame(function(){return l.updateWhenRenderedRequests()}));return m.promise}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicEnv"}},{key:"reset",value:function(){for(;;){var b=this.popDefault();if(!b)break;try{b.uninstall()}catch(e){console.error("Error uninstalling MorphicEnv: "+(e.stack||e))}}}},{key:"default",value:function(){var b=this.envs;b.length||this.pushDefault(new this);
return b[b.length-1]}},{key:"pushDefault",value:function(b){this.envs.push(b);return b}},{key:"popDefault",value:function(){return this.envs.pop()}},{key:"envs",get:function(){return this._envs||(this._envs=[])}}],k,{pathInPackage:function(){return"env.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:405,end:8336})}(void 0));wk.MorphicEnv=
ar;wk.MorphicEnv=ar;wk.MorphicEnv=ar;var Cha=Object.freeze({__proto__:null,MorphicEnv:ar}),fw=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js");fw.printArg=function(d){return fw.obj.inspect(d,{maxDepth:1}).replace(/\n/g,"").replace(/\s+/g," ")};fw.obj=lf;fw.arr=Qe;fw.promise=oe;var y3=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/CommandHandler.js"),n=k.hasOwnProperty("CommandHandler")&&"function"===typeof k.CommandHandler?k.CommandHandler:k.CommandHandler=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.history=[];this.maxHistorySize=1E3}},{key:"addToHistory",value:function(b){this.history.push(b);this.history.length>this.maxHistorySize&&this.history.splice(0,this.history.length-this.maxHistorySize)}},{key:"printHistory",value:function(){return this.history.map(this.printCommand).join("\n")}},
{key:"printCommand",value:function(b){var e=b.target.string,l=b.args,a=b.count,f=b.evt,m=b.keyCombo;return'"'+b.name+'" '+(f?f+" ":"")+(m?m+" ":"")+(l?fw.printArg(l):"")+("number"===typeof a?" x"+a:"")+" "+e}},{key:"lookupCommand",value:function(b,e){var l;if(!b)return{};"string"===typeof b&&(l=b);"string"===typeof b.command&&(l=b.command);if(b.exec){var a=b;l=a.name}a||(a=e.commands.find(function(f){return f.name===l}));return{name:l,command:a}}},{key:"exec",value:function(b,e,l,a,f){var m=this,
q=this.lookupCommand(b,e)||{},r=q.name,u=q.command;if(!u)return console.warn("Cannot find command "+(r||b)),null;if(r){if(f){var v=f.type;if(f.isKeyEvent)var y=f.keyCombo}this.addToHistory({name:r,target:{string:String(e),id:e.id},args:l,count:a,time:Date.now(),evt:v,keyCombo:y})}var z=e.world();"string"===typeof u.progressIndicator&&(this.progressIndicator=z.execCommand("open loading indicator",u.progressIndicator));if("function"===typeof u.exec)try{var B=u.exec(e,l,u.handlesCount?a:void 0,f)}catch(C){B=
C,b="Error in interactive command "+r+": "+(C.stack||C),z?z.logError(b):console.error(b)}else console.error("command "+r+" has no exec function!");this.progressIndicator&&this.progressIndicator.remove();B&&"function"===typeof B.catch?(B.catch(function(C){var G="Error in interactive command "+r+": "+C+"\n"+(C.stack||C);z?z.logError(G):console.error(G);throw C;}),this.progressIndicator&&fw.promise.finally(B,function(){return m.progressIndicator.remove()})):this.progressIndicator&&this.progressIndicator.remove();
B&&"number"===typeof a&&1<a&&!u.handlesCount&&(B="function"===typeof B.then?B.then(function(){return m.exec(u,e,l,a-1,f,null)}):this.exec(u,e,l,a-1,f,null));return B}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommandHandler"}}],k,{pathInPackage:function(){return"CommandHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},
{start:194,end:3656})}(void 0),Dha=y3=fw.CommandHandler;fw.default=y3;var Kf=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js");Kf.ensureSpaces=function(d){return d.length?d:" "};Kf.invokeKeyHandlers=function(d,k,n){n=void 0===n?!1:n;var b=k=Kf.Keys.canonicalizeEvent(k),e=b.key,l=b.data,a,f=!1,m=d.keyhandlers,q=k.keyInputState||{};b=b.keyCombo.startsWith("input-");var r=!1,u=q.count,v=q.keyChain||"",y=!1;if(!m||n&&b)return!1;for(n=m.length;n--;)if((a=m[n].eventCommandLookup(d,
k))&&a.command){y=a;a=y.command;var z=y.args,B=y.passEvent,C=y.count;r=y.keyChain;var G=y.onlyWhenFocused;y=!0;u=C;v=r;r="null"===a;if(G&&(G=d.world())&&G.focusedMorph&&G.focusedMorph!==d)continue;f=r?!1:d.execCommand(a,z,C,k);!f||b&&"insertstring"===a||B||"function"!==typeof k.stop||k.stop();if(f||r)break}f||r||!b||!d.onTextInput||v||(f=d.execCommand("insertstring",{string:l||e,undoGroup:Kf.config.text.undoGroupDelay},q.count,k));if(y)if("function"===typeof k.onAfterDispatch)k.onAfterDispatch(function(){q.count=
f?void 0:u;q.keyChain=f?"":v});else q.count=f?void 0:u,q.keyChain=f?"":v;return f&&!r};Kf.simulateKeys=function(d,k,n){n=void 0===n?{keyChain:void 0,count:void 0}:n;var b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){1==f.nextAddress&&(b=1===k.length?[k]:k.split(/ /g).map(Kf.ensureSpaces),e=$jscomp.makeIterator(b),l=e.next());if(3!=f.nextAddress){if(l.done)return f.jumpTo(0);a=l.value;return f.yield(Kf.simulateKey(d,a,n),3)}l=e.next();return f.jumpTo(2)})};Kf.simulateKey=function(d,
k,n){return Kf.invokeKeyHandlers(d,Object.assign({},Kf.Keys.keyComboToEventSpec(k),{keyInputState:n}))};Kf.bowserOS=function(){return Kf.bowser.mac?"mac":Kf.bowser.windows?"windows":Kf.bowser.windowsphone?"windowsphone":Kf.bowser.linux?"linux":Kf.bowser.chromeos?"chromeos":Kf.bowser.android?"android":Kf.bowser.ios?"ios":Kf.bowser.blackberry?"blackberry":Kf.bowser.firefoxos?"firefoxos":Kf.bowser.webos?"webos":Kf.bowser.bada?"bada":Kf.bowser.tizen?"tizen":Kf.bowser.sailfish?"sailfish":"unknown"};Kf.findKeysForPlatform=
Mb;Kf.Keys=nR;Kf.bowser=ir;Kf.config=vk;Kf.arr=Qe;Kf.findKeysForPlatform=Mb;Kf.findKeysForPlatform=Mb;Kf.regexps={meta:/Meta|Cmd|Command/gi,alt:/Alt/gi,ctrl:/Ctrl|Control/gi,tab:/Tab/gi,enter:/Enter|Return/gi,shift:/Shift/gi,backspace:/Backspace/gi,delete:/del(ete)?/gi,left:/left/gi,right:/right/gi,up:/up/gi,down:/down/gi,keySpacer:/([^-])-/g,seqSpacer:/([^\s])\s/g};var rR=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/events/KeyHandler.js"),n=k.hasOwnProperty("KeyHandler")&&
"function"===typeof k.KeyHandler?k.KeyHandler:k.KeyHandler=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){this.platform=b=void 0===b?Kf.bowserOS():b;this.keyBindings={}}},{key:"eventCommandLookup",value:function(b,e){return this.lookup(e.keyCombo,e.keyInputState)}},{key:"lookup",value:function(b,e){var l=this;e=void 0===e?{keyChain:void 0,
count:void 0}:e;b=Kf.Keys.canonicalizeKeyCombo(b);var a=e.keyChain||"";e=e.count;if(!a&&b.startsWith("Ctrl-")){var f=b.match(/^Ctrl-([0-9]+)/);if(f)return{command:"null",count:parseInt(("number"===typeof e?e:"")+f[1])};if("Ctrl-U"===b)return{command:"null",count:4,keyChain:"Ctrl-U"}}f=[b];if(!q&&b.startsWith("input-")){q=b.replace(/^(input-)(.*)$/,function(r,u,v){return u+v.toUpperCase()});var m=b.replace(/^(input-)(.*)$/,function(r,u,v){return u+v.toLowerCase()});f.push(q,m)}var q=f.map(function(r){return l.keyBindings[r]})[0];
a&&(f=f.find(function(r){return l.keyBindings[a+" "+r]}))&&(a+=" "+f,q=this.keyBindings[a]||q);if(q&&"chainKeys"===q)return a=a||b,b={command:"null",keyChain:a},void 0!==e&&(b.count=e),b;if(q)return b="object"===typeof q?Object.assign({},q):{command:q},void 0!==e&&(b.count=e),b}},{key:"bindKey",value:function(b,e){var l=this;"object"===typeof b&&b&&!Array.isArray(b)&&(b=Kf.findKeysForPlatform(b,this.platform));if(b){if("function"===typeof e)return this.addCommand({exec:e,bindKey:b,name:e.name||b});
(Array.isArray(b)?b:b.includes("|")?b.split("|"):[b]).forEach(function(a){var f="";if(-1!=a.indexOf(" ")){var m=a.split(/\s+/);a=m.pop();m.forEach(function(q){q=Kf.Keys.canonicalizeKeyCombo(q);f+=(f?" ":"")+q;l.addCommandToBinding(f,"chainKeys")});f+=" "}l.addCommandToBinding(f+Kf.Keys.canonicalizeKeyCombo(a),e)});this.cleanupUnusedKeyChains()}}},{key:"unbindKey",value:function(b){this.bindKey(b,null)}},{key:"cleanupUnusedKeyChains",value:function(){var b=this,e=Object.keys(this.keyBindings),l=e.filter(function(a){return"chainKeys"===
b.keyBindings[a]});l=Kf.arr.sortBy(l,function(a){return a.length}).reverse();l.forEach(function(a){e.some(function(f){return a!==f&&f.startsWith(a)})||(delete b.keyBindings[a],Kf.arr.remove(e,a),Kf.arr.remove(l,a))})}},{key:"addCommand",value:function(b){return b&&b.bindKey?this.addCommandToBinding(b.bindKey,b):void 0}},{key:"addCommandToBinding",value:function(b,e){var l=this;"chainKeys"===this.keyBindings[b]&&"chainKeys"!=e&&Object.keys(this.keyBindings).forEach(function(a){a.startsWith(b)&&delete l.keyBindings[a]});
e?this.keyBindings[b]=e:delete this.keyBindings[b];"chainKeys"!==e&&this.cleanupUnusedKeyChains()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"KeyHandler"}},{key:"invokeKeyHandlers",value:function(b,e,l){return Kf.invokeKeyHandlers(b,e,void 0===l?!1:l)}},{key:"simulateKeys",value:function(b,e,l){return Kf.simulateKeys(b,e,l)}},{key:"withBindings",value:function(b,e){var l=new this(e);b.forEach(function(a){return l.bindKey(a.keys,a.command)});return l}},{key:"prettyCombo",value:function(b){var e=
this._prettyCombos||(this._prettyCombos={});return this._prettyCombos[b]?e[b]:e[b]=b.replace(Kf.regexps.meta,"\u2318").replace(Kf.regexps.alt,"\u2325").replace(Kf.regexps.ctrl,"\u2303").replace(Kf.regexps.tab,"\u21e5").replace(Kf.regexps.enter,"\u23ce").replace(Kf.regexps.shift,"\u21e7").replace(Kf.regexps.backspace,"\u232b").replace(Kf.regexps.delete,"\u2326").replace(Kf.regexps.left,"\u2192").replace(Kf.regexps.right,"\u2190").replace(Kf.regexps.up,"\u2191").replace(Kf.regexps.down,"\u2193").replace(Kf.regexps.keySpacer,
"$1").replace(Kf.regexps.seqSpacer,"$1-")}},{key:"generateCommandToKeybindingMap",value:function(b,e,l){function a(r){if(q[r.id])return q[r.id];var u=m[r.id]||(m[r.id]=r.keyCommandMap);return q[r.id]=Kf.arr.groupBy(Object.keys(u),function(v){return u[v].name})}var f=this;l=void 0===l?!0:l;var m={},q={};return((void 0===e?0:e)?b.commandsIncludingOwners:b.commands.map(function(r){return{command:r,target:b}})).map(function(r){var u=r.target;r=r.command;var v=a(u)[r.name];return{keys:v,target:u,command:r,
prettyKeys:v&&l?v.map(function(y){return f.prettyCombo(y)}):null}})}}],k,{pathInPackage:function(){return"events/KeyHandler.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6052,end:12987})}(void 0);rR=Kf.KeyHandler;var sR=wa("ae",rR);Kf.default=rR;var Ux=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),z3=function(d){var k=
lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("Script")&&"function"===typeof k.Script?k.Script:k.Script=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.suspended=!1;this.stopped=!0;this.currentTimeout=this.type=this.tickTime=null}},{key:"__additionally_serialize__",value:function(b,e,l){b.props.suspended.value=
!0}},{key:"isScript",get:function(){return!0}},{key:"global",get:function(){return System.global}},{key:"execute",value:function(){throw Error("subclass responsibility");}},{key:"tick",value:function(){try{this.execute()}catch(b){console.error("Error executing script "+this+": "+b+"\n"+b.stack);return}this.stopped||this.startTicking(this.tickTime)}},{key:"startTicking",value:function(b){this.stopped=!1;this.tickTime=b;this.type="number"===typeof b?"setTimeout":"requestAnimationFrame";this.currentTimeout=
"setTimeout"===this.type?this.global.setTimeout(this.tick.bind(this),b):this.global.requestAnimationFrame(this.tick.bind(this))}},{key:"stop",value:function(){this.global["setTimeout"===this.type?"clearTimeout":"cancelAnimationFrame"](this.currentTimeout);this.stopped=!0}},{key:"resume",value:function(b){b=void 0===b?this.tickTime:b;this.suspended&&(this.suspended=!1,this.startTicking(this.tickTime=b))}},{key:"suspend",value:function(){this.stop();this.suspended=!0}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Script"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:21,end:1376})}(void 0),tR=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("TargetScript")&&"function"===typeof k.TargetScript?k.TargetScript:k.TargetScript=
function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b,e,l){zb._get(Object.getPrototypeOf(n.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.target=b;this.selector=e;this.args=l||[]}},{key:"execute",value:function(){this.target.isMorph&&!this.target.tickingScripts.includes(this)&&this.stop();"function"===typeof this.target[this.selector]&&
this.target[this.selector].apply(this.target,this.args)}},{key:"equals",value:function(b){return b.isScript&&this.target==b.target&&this.selector==b.selector}},{key:"toString",value:function(){return"Script("+this.target+">>"+this.selector+"("+this.args.join(",")+"))"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TargetScript"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1378,end:2013})}(Ux.Script),A3=function(d){var k=lively.FreezerRuntime.recorderFor("lively.morphic/ticking.js"),n=k.hasOwnProperty("FunctionScript")&&"function"===typeof k.FunctionScript?k.FunctionScript:k.FunctionScript=function(b){b&&b[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(n,d,[{key:Symbol.for("lively-instance-initialize"),value:function(b){zb._get(Object.getPrototypeOf(n.prototype),
Symbol.for("lively-instance-initialize"),this).call(this);this.callback=b}},{key:"execute",value:function(){this.callback()}},{key:"equals",value:function(b){return b.isScript&&this.callback==b.callback}},{key:"toString",value:function(){return"Script("+(this.callback.toString().replace(/\n/g,"").slice(0,40)+"...)")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FunctionScript"}}],k,{pathInPackage:function(){return"ticking.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2015,end:2354})}(Ux.Script);Ux.Script=z3;Ux.Script=z3;Ux.TargetScript=tR;Ux.TargetScript=tR;Ux.FunctionScript=A3;Ux.FunctionScript=A3;var Bo=lively.FreezerRuntime.recorderFor("lively.modules/src/hooks.js");Bo.install=ic;Bo.remove=rc;Bo.isInstalled=Nc;Bo.arr=Qe;Bo.fun=Zk;Bo.install=ic;Bo.install=ic;Bo.remove=rc;Bo.remove=rc;Bo.isInstalled=Nc;Bo.isInstalled=
Nc;var wK=lively.FreezerRuntime.recorderFor("lively.modules/src/cycle-breaker.js");wK.classHolder={};var gw=wK.classHolder;wK.classHolder=gw;wK.classHolder=gw;var Dv=lively.FreezerRuntime.recorderFor("lively.modules/src/dependencies.js");Dv.computeRequireMap=wc;Dv.graph=Xv;Dv.arr=Qe;Dv.obj=lf;Dv.loadedModules=NG;Dv.computeRequireMap=wc;Dv.computeRequireMap=wc;var jn=lively.FreezerRuntime.recorderFor("lively.modules/src/import-export.js");jn.scheduleModuleExportsChange=rd;jn.runScheduledExportChanges=
ce;jn.clearPendingModuleExportChanges=function(d,k){delete d.get("@lively-env").pendingExportChanges[k]};jn.updateModuleExports=function(d,k,n){var b=d.debug;jn.module(d,k).updateRecord(function(e){var l=[],a=[];Object.keys(n).forEach(function(y){var z=n[y];b&&console.log("[lively.vm es6 updateModuleExports] %s export %s = %s",k,y,String(z).slice(0,30).replace(/\n/g,"")+"...");var B=!(y in e.exports);B&&(e.__lively_modules__.evalOnlyExport[y]=!0);e.exports[y]=z;B?l.push(y):a.push(y)});if(l.length){var f=
d.get(k);Object.isFrozen(f)?(console.warn("[lively.vm es6 updateModuleExports] Since module %s is frozen a new module object was installed in the system. Note that only(!) exisiting module bindings are updated. New exports that were added will only be available in already loaded modules after those are reloaded!",k),d.set(k,d.newModule(e.exports))):(b&&console.log("[lively.vm es6 updateModuleExports] adding new exports to %s",k),l.forEach(function(y){Object.defineProperty(f,y,{configurable:!1,enumerable:!0,
get:function(){return e.exports[y]},set:function(){throw Error("exports cannot be changed from the outside");}})}))}if(a.length){b&&console.log("[lively.vm es6 updateModuleExports] updating %s dependents of %s",e.importers.length,k);for(var m=0,q=e.importers.length;m<q;m++){var r=e.importers[m];if(!r.locked){var u;if(r.dependencies.some(function(y,z){u=z;return y&&y.name===e.name})){if(b){var v=jn.module(d,r.name);console.log("[lively.vm es6 updateModuleExports] calling setters of "+v["package"]().name+
"/"+v.pathInPackage())}jn.module(d,r.name).evaluationStart();r.setters[u](e.exports);jn.module(d,r.name).evaluationEnd()}}}}})};jn.module=Co;jn.scheduleModuleExportsChange=rd;jn.scheduleModuleExportsChange=rd;jn.runScheduledExportChanges=ce;jn.runScheduledExportChanges=ce;var ej=lively.FreezerRuntime.recorderFor("lively.modules/src/change.js");ej.moduleSourceChange=qd;ej.moduleSourceChangeEsm=function(d,k,n,b){var e,l,a,f,m,q,r,u,v,y,z,B,C,G,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return e=
d.debug,l={status:"loading",source:n,name:k,address:k,linkSets:[],dependencies:[],metadata:{format:"esm"}},N.yield(ej.instrumentSourceOfEsmModuleLoad(d,l),2);case 2:a=N.yieldResult,f=function(L,S){return ej.scheduleModuleExportsChange(d,l.name,L,S,!0)},m=a.declare(f),e&&console.log("[lively.vm es6] sourceChange of %s with deps",l.name,a.localDeps),q=[],r=$jscomp.makeIterator(a.localDeps),u=r.next();case 3:if(u.done){N.jumpTo(5);break}v=u.value;return N.yield(d.normalize(v,l.name),6);case 6:return y=
N.yieldResult,z=ej.classHolder.module(d,y),N.yield(z.load(),7);case 7:B=N.yieldResult;q.push({name:v,fullname:y,module:z,exports:B});u=r.next();N.jumpTo(3);break;case 5:if(C=d.loads&&d.loads[l.name])C.deps=q.map(function(L){return L.name}),C.depMap=q.reduce(function(L,S){L[S.name]=S.fullname;return L},{}),C.metadata&&C.metadata.entry&&(C.metadata.entry.deps=C.deps,C.metadata.entry.normalizedDeps=q.map(function(L){return L.fullname}),C.metadata.entry.declare=a.declare);G=ej.classHolder.module(d,l.name);
F=G.record();q.forEach(function(L,S){return G.addDependencyToModuleRecord(L.module,m.setters[S])});F&&(F.execute=m.execute);q.forEach(function(L,S){return m.setters[S](L.exports)});return N.return(m.execute())}})};ej.moduleSourceChangeGlobal=function(d,k,n,b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return e={status:"loading",source:n,name:k,address:k,linkSets:[],dependencies:[],metadata:{format:"global"}},d.get(k)?f.jumpTo(2):f.yield(d["import"](k),
2);if(4!=f.nextAddress)return f.yield(ej.instrumentSourceOfGlobalModuleLoad(d,e),4);l=f.yieldResult;e.source=l.translated;a=ej.doInstantiateGlobalModule(d,e);d.delete(k);d.set(a.name,a.esModule);return f.return(a.module)})};ej.doInstantiateGlobalModule=function(d,k){var n=ej.__createEntry();n.name=k.name;n.esmExports=!0;k.metadata.entry=n;n.deps=[];for(var b in k.metadata.globals){var e=k.metadata.globals[b];e&&n.deps.push(e)}n.execute=function(l,a,f){(a=(a=ej.classHolder.module(d,f.id).metadata())&&
a.entry&&a.entry.module&&a.entry.module.exports)&&Object.keys(a).forEach(function(r){try{delete d.global[r]}catch(u){console.warn('[lively.modules] executeGlobalModule: Cannot delete global["'+r+'"]')}});if(k.metadata.globals){var m={};for(var q in k.metadata.globals)k.metadata.globals[q]&&(m[q]=l(k.metadata.globals[q]))}if(l=k.metadata.exports)k.source+='\nSystem.global["'+l+'"] = '+l+";";f=d.get("@@global-helpers").prepareGlobal(f.id,l,m);ej.__evaluateGlobalLoadSource(d,k);return f()};return ej.runExecuteOfGlobalModule(d,
n)};ej.__createEntry=function(){return{name:null,deps:null,originalIndices:null,declare:null,execute:null,executingRequire:!1,declarative:!1,normalizedDeps:null,groupIndex:null,evaluated:!1,module:null,esModule:null,esmExports:!1}};ej.__evaluateGlobalLoadSource=function(d,k){function n(){0==--e&&(l.System=l.SystemJS=b)}var b,e=0,l=d.global;return function(a){try{0==e++&&(b=l.System),l.System=l.SystemJS=this,(0,eval)(a.source),n()}catch(f){throw n(),Error("Error evaluating "+a.address+":\n"+f.stack);
}}.call(d,k)};ej.runExecuteOfGlobalModule=function(d,k){var n={},b=k.module={exports:n,id:k.name};k.evaluated=!0;if(n=k.execute.call(d.global,function(e){var l=k.deps.find(function(a){return a===e});if(l=l&&d.get(k.normalizedDeps[k.deps.indexOf(l)])||d.get(d.decanonicalize(e,k.name)))return l;throw Error("Module "+e+" not declared as a dependency of "+k.name);},n,b))b.exports=n;n=b.exports;b=d.get("@system-env").constructor;k.esModule=n&&(n.__esModule||n instanceof b)?n:k.esmExports&&n!==d.global?
d.newModule(n):{"default":n};return k};ej.arr=Qe;ej.emit=Jn;ej.instrumentSourceOfEsmModuleLoad=vi;ej.instrumentSourceOfGlobalModuleLoad=$l;ej.scheduleModuleExportsChange=rd;ej.classHolder=gw;ej.moduleSourceChange=qd;ej.moduleSourceChange=qd;var Zl=lively.FreezerRuntime.recorderFor("lively.modules/src/url-helpers.js");Zl.isJsFile=ad;Zl.asDir=je;Zl.isURL=Qd;Zl.urlResolve=Id;Zl.string=Hg;Zl.isJsFile=ad;Zl.isJsFile=ad;Zl.asDir=je;Zl.asDir=je;var jF=Zl.string.joinPath;Zl.join=jF;Zl.join=jF;Zl.join=jF;
Zl.isURL=Qd;Zl.isURL=Qd;Zl.urlResolve=Id;Zl.urlResolve=Id;var or=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/configuration.js");or.arr=Qe;or.obj=lf;or.isURL=Qd;or.installHook=ic;or.isHookInstalled=Nc;var qu=function(d){this.pkg=d};qu.prototype.applyConfig=function(d){var k=this.System,n=this.packageURL,b=this.pkg;d=or.obj.deepMerge(b.config,d);var e=d.name||n.split("/").slice(-1)[0],l=d.version,a=d.systemjs||{},f=d.lively,m=d.main||"index.js",q={},r={};k.config({map:(q[e]=n,q),
packages:(r[n]=Object.assign({},a,{meta:Object.assign({"package.json":{format:"json"}},a.meta),configured:!0}),r)});k.packages[n].configured=!0;k=k.getConfig().packages[n]||{};k.map||(k.map={});a&&(f&&f.main?m=f.main:a.main&&(m=a.main),this.applySystemJSConfig(a));m.match(/\.[^\/\.]+/)||(m+=".js");k.main=m;b.version=l;b.config=d;b._name=e;b.mergeWithConfig(k);return f?this.applyLivelyConfig(f):{subPackages:[]}};qu.prototype.applySystemJSConfig=function(d){var k=this.System;d.packageConfigPaths&&k.config({packageConfigPaths:or.arr.uniq(k.packageConfigPaths.concat(d.packageConfigPaths))});
d.packages&&k.config({packages:d.packages});d.globalmap&&k.config({map:d.globalmap});d.babelOptions&&k.config({babelOptions:d.babelOptions});d.meta&&k.config({meta:d.meta})};qu.prototype.applyLivelyConfig=function(d){this.applyLivelyConfigMeta(d);this.applyLivelyConfigHooks(d);this.applyLivelyConfigBundles(d)};qu.prototype.applyLivelyConfigHooks=function(d){var k=this;(d.hooks||[]).forEach(function(n){try{var b=eval("("+n.source+")");b.name&&or.isHookInstalled(k.System,n.target,b.name)||or.installHook(k.System,
n.target,b)}catch(e){console.error("Error installing hook for %s: %s",k.packageURL,e,n)}})};qu.prototype.applyLivelyConfigBundles=function(d){var k=this;if(!d.bundles)return Promise.resolve();var n=Object.keys(d.bundles).reduce(function(b,e){var l=k.packageURL+"/"+e;e=d.bundles[e].map(function(a){return k.System.decanonicalize(a,k.packageURL+"/")});b[l]=e;return b},{});this.System.config({bundles:n});return Promise.resolve()};qu.prototype.applyLivelyConfigMeta=function(d){if(d.meta){var k={},n=this.System.getConfig().packages[this.packageURL]||
{},b={meta:{},packages:(k[this.packageURL]=n,k)};Object.keys(d.meta).forEach(function(e){var l=d.meta[e];or.isURL(e)?b.meta[e]=l:(n.meta||(n.meta={}),n.meta[e]=l)});this.System.config(b)}};$jscomp.global.Object.defineProperties(qu.prototype,{System:{configurable:!0,enumerable:!0,get:function(){return this.pkg.System}},packageURL:{configurable:!0,enumerable:!0,get:function(){return this.pkg.url}}});or.PackageConfiguration=qu;or.default=qu;var ke=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package.js");
ke.normalizePackageURL=function(d,k,n){n=void 0===n?[]:n;if(n.some(function(b){return b===k}))return k;d=d.decanonicalize(k.replace(/[\/]+$/,"")+"/");if(!ke.isURL(d))throw Error("Strange package URL: "+d+" is not a valid URL");d.match(/\.js/)&&(d=-1<d.indexOf(d+".js")?d.replace(/\.js$/,""):d.split("/").slice(0,-1).join("/"));d.match(/\.js$/)&&console.warn("packageURL is expected to point to a directory but seems to be a .js file: "+d);return String(d).replace(/\/$/,"")};ke.lookupPackage=Zd;ke.ensurePackage=
se;ke.getPackage=xe;ke.applyConfig=$e;ke.importPackage=ug;ke.removePackage=Ji;ke.reloadPackage=Ci;ke.registerPackage=Rh;ke.getPackageSpecs=jg;ke.arr=Qe;ke.promise=oe;ke.obj=lf;ke.emit=Jn;ke.module=Co;ke.resource=x;ke.PackageConfiguration=qu;ke.isURL=Qd;ke.join=jF;ke.classHolder=gw;var li=function(d,k,n,b,e){e=void 0===e?{}:e;this.System=d;this.url=k;this.registerProcess=null;this.map={};this.setConfig(e)};li.allPackages=function(d){return ke.obj.values(ke.classHolder.PackageRegistry.ofSystem(d).byURL)};
li.allPackageURLs=function(d){return ke.classHolder.PackageRegistry.ofSystem(d).allPackageURLs()};li.forModule=function(d,k){return this.forModuleId(d,k.id)};li.forModuleId=function(d,k){return(k=ke.classHolder.ModulePackageMapping.forSystem(d).getPackageURLForModuleId(k))?ke.getPackage(d,k,!0):null};li.fromJSON=function(d,k){return(new ke.Package(d)).fromJSON(k)};li.prototype.setConfig=function(d){this._name=d.name;this.version=d.version;this.dependencies=d.dependencies||{};this.devDependencies=
d.devDependencies||{};this.main=d.main||"index.js";this.systemjs=d.systemjs;this.lively=d.lively};li.prototype.toJSON=function(){var d=this.System,k=ke.obj.select(this,"url _name version map dependencies devDependencies main systemjs lively".split(" "));k.url.startsWith(d.baseURL)&&(k.url=k.url.slice(d.baseURL.length).replace(/^\//,""));return k};li.prototype.fromJSON=function(d){var k=this.System;this.url=d.url;this._name=d._name;this.version=d.version;this.map=d.map||{};this.main=d.main;this.dependencies=
d.dependencies||{};this.devDependencies=d.devDependencies||{};this.systemjs=d.systemjs;this.lively=d.lively;ke.isURL(this.url)||(this.url=ke.join(k.baseURL,this.url));this.registerWithConfig();return this};li.prototype.asSpec=function(){return Object.assign({},ke.obj.select(this,"name main map meta url address version lively".split(" ")),{modules:this.modules().map(function(d){return{name:d.id,deps:d.directRequirements().map(function(k){return k.id})}})})};li.prototype.path=function(){var d=this.System.baseURL;
return 0===this.url.indexOf(d)?this.url.slice(d.length):this.url};li.prototype.modules=function(){var d=this.url,k=this.System;return ke.classHolder.ModulePackageMapping.forSystem(k).getModuleIdsForPackageURL(d).map(function(n){return ke.module(k,n)})};li.prototype.resources=function(d,k){k=void 0===k?[".git","node_modules",".module_cache","lively.next-node_modules"]:k;var n=this,b,e,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return b=n,e=b.System,
l=b.url,a=ke.Package.allPackageURLs(e),f=a.filter(function(v){return v!==l&&!l.startsWith(v)}),u.yield(ke.resource(l).dirList("infinity",{exclude:k}),2);m=u.yieldResult;q=m.filter(function(v){return!v.isDirectory()&&!f.some(function(y){return v.url.startsWith(y)})}).map(function(v){return v.url});r=ke.arr.pluck(n.modules(),"id");d&&(q=q.filter(d));return u.return(q.map(function(v){var y=v.replace(l,"").replace(/^\//,"");return{isLoaded:r.includes(v),url:v,nameInPackage:y,package:n}}))})};li.prototype.hasResource=
function(d){var k=this.url;return(d.startsWith(k)?ke.resource(d):ke.resource(k).join(d)).exists()};li.prototype.toString=function(){return"Package("+this.name+" - "+this.path()+"/)"};li.prototype.mergeWithConfig=function(d){var k=d=Object.assign({},d),n=k.name;k=k.map;n&&(delete d.name,this._name=n);k&&(delete d.map,Object.assign(this.map,k));Object.assign(this,d);return this};li.prototype.addMapping=function(d,k){this.map[d]=k;var n={},b={};this.System.config({packages:(b[this.url]={map:(n[d]=k,
n)},b)})};li.prototype.tryToLoadPackageConfig=function(){var d=this,k,n,b,e,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:k=d;n=k.System;b=k.url;e=b+"/package.json";l={};a={};n.config({meta:(l[e]={format:"json"},l),packages:(a[b]={meta:{"package.json":{format:"json"}}},a)});n.debug&&console.log("[lively.modules package reading config] %s",e);v.setCatchFinallyBlocks(2);if(f=n.get(e)){v.jumpTo(4);break}return v.yield(n.import(e),5);case 5:f=
v.yieldResult;case 4:return m=f,q=[].concat($jscomp.arrayFromIterable(n.packageConfigPaths)),ke.arr.pushIfNotIncluded(q,e),n.config({packageConfigPaths:q}),v.return(m);case 2:return r=v.enterCatchBlock(),console.log("[lively.modules package] Unable loading package config %s for package: ",e,r),delete n.meta[e],u=b.split("/").slice(-1)[0],v.return({name:u})}})};li.prototype.import=function(){var d=this,k,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.yield(d.register(),
2);case 2:return k=d,n=k.url,b=k.System,e=ke,l=e.module,a=b,q.yield(b.normalize(n),3);case 3:return f=l.call(e,a,q.yieldResult),q.yield(b.import(f.id),4);case 4:return m=q.yieldResult,q.yield(ke.promise.waitFor(1E3,function(){return f.isLoaded()}),5);case 5:return q.return(m)}})};li.prototype.isRegistering=function(){return!!this.registerProcess};li.prototype.register=function(d){var k=this,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(k.isRegistering())return q.return(k.registerProcess.promise);
n=k;b=n.System;e=n.url;k.registerProcess=ke.promise.deferred();l=k.registerProcess.promise;b.debug&&console.log("[lively.modules package register] %s",e);q.setCatchFinallyBlocks(2,3);if(a=d){q.jumpTo(5);break}return q.yield(k.tryToLoadPackageConfig(),6);case 6:a=q.yieldResult;case 5:f=a,k.registerWithConfig(f),k.registerProcess.resolve(f);case 3:q.enterFinallyBlock();delete k.registerProcess;q.leaveFinallyBlock(4);break;case 2:throw m=q.enterCatchBlock(),k.registerProcess.reject(m),m;case 4:return q.return(l)}})};
li.prototype.updateConfig=function(d){d=Object.assign({},this.runtimeConfig,{},d);var k=this.name,n=this.version,b=d,e=b.name;b=b.version;(new ke.PackageConfiguration(this)).applyConfig(d);if(k!==d.name||n!==d.version)console.log("[lively.modules] Updating registry "+k+"@"+n+" => "+e+"@"+b),ke.classHolder.PackageRegistry.ofSystem(this.System).updateNameAndVersionOf(this,k,n,e,b)};li.prototype.registerWithConfig=function(d){d=void 0===d?this.runtimeConfig:d;var k=this.System,n=this.url,b=(new ke.PackageConfiguration(this)).applyConfig(d),
e=ke.join(n,"package.json");k.get(e)||k.set(e,k.newModule(Object.assign({},d,{default:d})));ke.emit("lively.modules/packageregistered",{"package":n},Date.now(),k);return b};li.prototype.remove=function(d){d=Object.assign({forgetEnv:!0,forgetDeps:!1,unloadModules:!0},d);var k=this.System,n=this.url;n=n.replace(/\/$/,"");d.unloadModules&&this.modules().forEach(function(f){return f.unload(d)});ke.classHolder.PackageRegistry.ofSystem(k).removePackage(this);var b=k.getConfig(),e=n+"/package.json";k.delete(String(e));
ke.arr.remove(b.packageConfigPaths||[],e);var l={},a={};k.config({meta:(l[e]={},l),packages:(a[n]={},a),packageConfigPaths:b.packageConfigPaths});delete k.packages[n];ke.emit("lively.modules/packageremoved",{"package":this.url},Date.now(),k)};li.prototype.reload=function(d){var k=this.url,n=ke.classHolder.PackageRegistry.ofSystem(this.System),b=n.coversDirectory(k);this.remove(d);d={};n.addPackageAt(k,b||"devPackageDirs",(d[k]=this,d));return this.import()};li.prototype.fork=function(d,k){var n=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k||(k=ke.resource(n.url).join("../"+d).withRelativePartsResolved().url),b.yield(n.changeAddress(k,d,!1),2)):b.return(b.yieldResult)})};li.prototype.rename=function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(n=ke.resource(k.url).join("../"+d).withRelativePartsResolved().url,b.yield(k.changeAddress(n,d,!0),2)):b.return(b.yieldResult)})};li.prototype.changeAddress=
function(d,k,n){k=void 0===k?null:k;n=void 0===n?!0:n;var b=this,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:return d=d.replace(/\/?/,""),e=b,l=e.System,a=e.url,X.yield(b.runtimeConfig,2);case 2:return f=X.yieldResult,m=ke.resource(a).asDirectory(),q=new ke.Package(l,d),X.yield(ke.resource(d).asDirectory(),3);case 3:return r=X.yieldResult,f.name=k||b.name,u=ke.classHolder.PackageRegistry.ofSystem(l),
v=u.coversDirectory(a),ke.classHolder.ModulePackageMapping.forSystem(l).clearCache(),l.packages[a]&&(l.packages[d]=l.packages[a],n&&delete l.packages[a]),Object.assign(q,ke.obj.select(b,["_name","map","config"])),X.yield(r.ensureExistance(),4);case 4:return X.yield(b.resources(void 0,[]),5);case 5:y=X.yieldResult.map(function(T){return T.url}),z=b.modules(),B=$jscomp.makeIterator(z),C=B.next();case 6:if(C.done){X.jumpTo(8);break}G=C.value;F=r.join(G.pathInPackage()).url;return n?X.yield(G.renameTo(F),
10):X.yield(G.copyTo(F),10);case 10:N=y.indexOf(G.id);-1<N&&y.splice(N,1);C=B.next();X.jumpTo(6);break;case 8:L=$jscomp.makeIterator(y),S=L.next();case 13:if(S.done){if(!n){X.jumpTo(17);break}return X.yield(b.remove({forgetEnv:!0,forgetDeps:!1}),18)}ha=S.value;qa=ke.resource(ha);D=qa.relativePathFrom(m);return X.yield(qa.copyTo(r.join(D)),14);case 14:S=L.next();X.jumpTo(13);break;case 18:return X.yield(m.remove(),17);case 17:if(!k){X.jumpTo(20);break}q.name=k;q.config.name=k;P=ke.resource(d).join("package.json");
X.setCatchFinallyBlocks(21);return X.yield(P.exists(),23);case 23:if(!X.yieldResult){X.jumpTo(24);break}return X.yield(P.readJson(),25);case 25:J=X.yieldResult;if(J.name!==b.name){X.jumpTo(26);break}J.name=k;return X.yield(P.writeJson(J,!0),26);case 26:(M=l.get(P.url))&&l.set(P.url,l.newModule(Object.assign({},M,{name:k})));case 24:X.leaveTryBlock(20);break;case 21:X.enterCatchBlock();case 20:return v=v||"individualPackageDirs","individualPackageDirs"!==v&&"devPackageDirs"!==v||u._addPackageDir(d,
v,!0),u._addPackageWithConfig(q,f,d,v),u.resetByURL(),u._updateLatestPackages(),X.return(q)}})};li.prototype.search=function(d,k){k=void 0===k?{}:k;var n=this,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return k.includeUnloaded?l.yield(n.resources(function(a){return a.endsWith(".js")},[".git","node_modules","dist",".module_cache","lively.next-node_modules"]),3):(b=n.modules().filter(function(a){return a.isLoaded()}),l.jumpTo(2));2!=l.nextAddress&&(b=l.yieldResult.map(function(a){return ke.module(n.System,
a.url)}));e=b;return l.return(Promise.all(e.map(function(a){return a.search(d,k).catch(function(f){console.error("Error searching module "+a.name+":\n"+f.stack);return[]})})).then(function(a){return ke.arr.flatten(a,1)}))})};$jscomp.global.Object.defineProperties(li.prototype,{isPackage:{configurable:!0,enumerable:!0,get:function(){return!0}},name:{configurable:!0,enumerable:!0,get:function(){if(this._name)return this._name;var d=this.System.get(this.url+"/package.json");return d&&d.name?d.name:ke.arr.last(this.url.replace(/[\/]+$/,
"").split("/"))},set:function(d){return this._name=d}},nameAndVersion:{configurable:!0,enumerable:!0,get:function(){return this.name+"@"+this.version}},address:{configurable:!0,enumerable:!0,get:function(){return this.url},set:function(d){return this.url=d}},runtimeConfig:{configurable:!0,enumerable:!0,get:function(){var d=this.main,k=this.systemjs,n=this.lively,b={name:this.name,version:this.version,dependencies:this.dependencies||{},devDependencies:this.devDependencies||{}};d&&(b.main=d);k&&(b.systemjs=
k);n&&(b.lively=n);return b}}});ke.Package=li;ke.ensurePackage=se;ke.ensurePackage=se;ke.importPackage=ug;ke.importPackage=ug;ke.removePackage=Ji;ke.removePackage=Ji;ke.reloadPackage=Ci;ke.reloadPackage=Ci;ke.registerPackage=Rh;ke.registerPackage=Rh;ke.getPackage=xe;ke.getPackage=xe;ke.lookupPackage=Zd;ke.lookupPackage=Zd;ke.applyConfig=$e;ke.applyConfig=$e;ke.getPackageSpecs=jg;ke.getPackageSpecs=jg;ke.Package=li;ke.Package=li;var Dc=lively.FreezerRuntime.recorderFor("lively.classes/class-to-function-transform.js");
Dc.isFunctionNode=function(d){return"ArrowFunctionExpression"===d.type||"FunctionExpression"===d.type||"FunctionDeclaration"===d.type};Dc.ensureIdentifier=function(d){return d.replace(Dc.firstIdRe,"_").replace(Dc.trailingIdRe,"_")};Dc.constructorTemplate=function(d){return Dc.funcExpr({id:d?Dc.id(d):null},["__first_arg__"],Dc.ifStmt(Dc.binaryExpr(Dc.id("__first_arg__"),"&&",Dc.member("__first_arg__",Dc.funcCall(Dc.member("Symbol","for"),Dc.literal("lively-instance-restorer")),!0)),Dc.block(),Dc.block(Dc.exprStmt(Dc.funcCall(Dc.member(Dc.member("this",
Dc.funcCall(Dc.member("Symbol","for"),Dc.literal("lively-instance-initialize")),!0),"apply"),Dc.id("this"),Dc.id("arguments"))))))};Dc.replaceSuper=function(d,k,n,b){console.assert("Super"===d.type);(k=k.currentMethod)||console.warn("[lively.classes] Trying to transform es6 class but got super call outside a method! "+Dc.stringify(d)+" in "+n.join("."));b=$jscomp.makeIterator(n.slice(-2));n=b.next().value;b=b.next().value;return"callee"===n&&"object"===b||"callee"===b?d:k&&"static"===k[Dc.methodKindSymbol]?
Dc.funcCall(Dc.member("Object","getPrototypeOf"),Dc.id(Dc.tempLivelyClassVar)):Dc.funcCall(Dc.member("Object","getPrototypeOf"),Dc.member(Dc.id(Dc.tempLivelyClassVar),"prototype"))};Dc.replaceSuperMethodCall=function(d,k,n,b){console.assert("CallExpression"===d.type);console.assert("Super"===d.callee.object.type);return Dc.funcCall.apply(Dc,[Dc.member(Dc.funcCall(Dc.member(b.functionNode,"_get"),Dc.replaceSuper(d.callee.object,k,n.concat(["callee","object"]),b),Dc.literal(d.callee.property.value||
d.callee.property.name),Dc.id("this")),"call"),Dc.id("this")].concat($jscomp.arrayFromIterable(d.arguments)))};Dc.replaceDirectSuperCall=function(d,k,n,b){console.assert("CallExpression"===d.type);console.assert("Super"===d.callee.type);return Dc.funcCall.apply(Dc,[Dc.member(Dc.funcCall(Dc.member(b.functionNode,"_get"),Dc.replaceSuper(d.callee,k,n.concat(["callee"]),b),Dc.funcCall(Dc.member("Symbol","for"),Dc.literal("lively-instance-initialize")),Dc.id("this")),"call"),Dc.id("this")].concat($jscomp.arrayFromIterable(d.arguments)))};
Dc.replaceSuperGetter=function(d,k,n,b){console.assert("MemberExpression"===d.type);console.assert("Super"===d.object.type);return Dc.funcCall(Dc.member(b.functionNode,"_get"),Dc.replaceSuper(d.object,k,n.concat(["object"]),b),Dc.literal(d.property.value||d.property.name),Dc.id("this"))};Dc.replaceSuperSetter=function(d,k,n,b){console.assert("AssignmentExpression"===d.type);console.assert("Super"===d.left.object.type);return Dc.funcCall(Dc.member(b.functionNode,"_set"),Dc.replaceSuper(d.left.object,
k,n.concat(["left","object"]),b),Dc.literal(d.left.property.value||d.left.property.name),d.right,Dc.id("this"))};Dc.replaceClass=function(d,k,n,b){console.assert("ClassDeclaration"===d.type||"ClassExpression"===d.type);var e=d.body.body,l=d.superClass;n=d.id;var a=d.type,f=d.start,m=d.end,q=void 0===b.addClassNameGetter?!0:b.addClassNameGetter,r=Dc.id("undefined"),u=Dc.id("undefined"),v=n?n.name:"anonymous_class",y=b.evalId,z=b.sourceAccessorName;d=d["x-lively-object-meta"]||{start:f,end:m};e.length&&
(q=e.reduce(function(F,N){var L=N.key,S=N.kind,ha=N.value,qa=N.static;"Literal"!==L.type&&"Identifier"!==L.type&&console.warn("Unexpected key in classToFunctionTransform! "+JSON.stringify(L));if("method"===S){S={};N=Dc.id(v+"_"+Dc.ensureIdentifier(L.name||L.value||Dc.Path("property.name").get(L))+"_");ha=["key",Dc.literal(L.name||L.value||Dc.Path("property.name").get(L)),"value",Object.assign({},ha,(S.id=N,S[Dc.methodKindSymbol]=qa?"static":"proto",S))];var D=Dc.objectLiteral(ha)}else"get"===S||"set"===
S?(N={},D=Dc.objectLiteral(["key",Dc.literal(L.name||L.value||Dc.Path("property.name").get(L)),S,Object.assign({},ha,(N.id=Dc.id(S),N[Dc.methodKindSymbol]=qa?"static":"proto",N))])):"constructor"===S?(L={},ha=["key",Dc.funcCall(Dc.member("Symbol","for"),Dc.literal("lively-instance-initialize")),"value",Object.assign({},ha,(L.id=Dc.id(v+"_initialize_"),L[Dc.methodKindSymbol]="proto",L))],D=Dc.objectLiteral(ha)):console.warn("[lively.classes] classToFunctionTransform encountered unknown class property with kind "+
S+", ignoring it, "+JSON.stringify(N));(qa?F.clazz:F.inst).push(D);return F},{inst:[],clazz:q?[Dc.parse('({ key: Symbol.for("__LivelyClassName__"), get: function get() { return "'+v+'"; } })').body[0].expression]:[]}),e=q.inst,q=q.clazz,e.length&&(r={type:"ArrayExpression",elements:e}),q.length&&(u={type:"ArrayExpression",elements:q}));e=b.scope;if(l&&b.currentModuleAccessor)if(b.classHolder===l.object){var B=l;var C=l.property.name}else{var G=e&&e.resolvedRefMap&&e.resolvedRefMap.get(l);G&&G.decl&&
e.decls&&e.decls.find(function(F){return $jscomp.makeIterator(F).next().value===G.decl})&&(B=l,C=l.name)}C=B?Dc.objectLiteral(["referencedAs",Dc.literal(C),"value",B]):l||Dc.id("undefined");B=n&&"ClassDeclaration"===a;l=["start",Dc.literal(d.start),"end",Dc.literal(d.end)];"undefined"!==typeof y&&l.push("evalId",Dc.literal(y));z&&l.push("moduleSource",Dc.nodes.id(z));y=Dc.objectLiteral(l);r=Dc.funcCall(Dc.funcExpr({},["superclass"],Dc.varDecl(Dc.tempLivelyClassHolderVar,k.classHolder),Dc.varDecl(Dc.tempLivelyClassVar,
B?{type:"ConditionalExpression",test:Dc.binaryExpr(Dc.funcCall(Dc.member(Dc.tempLivelyClassHolderVar,"hasOwnProperty"),Dc.literal(n.name)),"&&",Dc.binaryExpr({argument:Dc.member(Dc.tempLivelyClassHolderVar,n),operator:"typeof",prefix:!0,type:"UnaryExpression"},"===",Dc.literal("function"))),consequent:Dc.member(Dc.tempLivelyClassHolderVar,n),alternate:Dc.assign(Dc.member(Dc.tempLivelyClassHolderVar,n),Dc.constructorTemplate(n.name))}:n?Dc.constructorTemplate(n.name):Dc.constructorTemplate(null)),
Dc.returnStmt(Dc.funcCall(b.functionNode,Dc.id(Dc.tempLivelyClassVar),Dc.id("superclass"),r,u,Dc.id(Dc.tempLivelyClassHolderVar),b.currentModuleAccessor||Dc.id("undefined"),y))),C);if("ClassExpression"===a)return r;a=r;b.declarationWrapper&&k.classHolder===b.classHolder&&(a=Dc.funcCall(b.declarationWrapper,Dc.literal(n.name),Dc.literal("class"),a,b.classHolder,y));a=Dc.varDecl(n,a,"var");a[Dc.isTransformedClassVarDeclSymbol]=!0;return a};Dc.splitExportDefaultWithClass=function(d,k,n,b){return d.declaration&&
d.declaration[Dc.isTransformedClassVarDeclSymbol]?[d.declaration,{declaration:d.declaration.declarations[0].id,type:"ExportDefaultDeclaration"}]:d};Dc.classToFunctionTransform=fi;Dc.arr=Qe;Dc.Path=Cg;Dc.parse=sg;Dc.stringify=rg;Dc.query=zs;Dc.nodes=aw;Dc.Visitor=Gd;var Np=Dc.nodes;Dc.assign=Np.assign;Dc.member=Np.member;Dc.id=Np.id;Dc.exprStmt=Np.exprStmt;Dc.funcCall=Np.funcCall;Dc.literal=Np.literal;Dc.objectLiteral=Np.objectLiteral;Dc.varDecl=Np.varDecl;Dc.funcExpr=Np.funcExpr;Dc.returnStmt=Np.returnStmt;
Dc.binaryExpr=Np.binaryExpr;Dc.ifStmt=Np.ifStmt;Dc.block=Np.block;Dc.firstIdRe=/^[^_a-z]/i;Dc.trailingIdRe=/[^_a-z0-9]/ig;Dc.isTransformedClassVarDeclSymbol=Symbol();Dc.methodKindSymbol=Symbol();Dc.tempLivelyClassVar="__lively_class__";Dc.tempLivelyClassHolderVar="__lively_classholder__";var xK=function(){return Dc.Visitor.apply(this,arguments)||this};$jscomp.inherits(xK,Dc.Visitor);xK.prototype.accept=function(d,k,n){Dc.isFunctionNode(d)&&(k=Object.assign({},k,{classHolder:Dc.objectLiteral([]),currentMethod:d[Dc.methodKindSymbol]?
d:k.currentMethod}));if("ClassExpression"===d.type||"ClassDeclaration"===d.type)d=Dc.replaceClass(d,k,n,k.options);"Super"===d.type&&(d=Dc.replaceSuper(d,k,n,k.options));"MemberExpression"===d.type&&d.object&&"Super"===d.object.type&&(d=Dc.replaceSuperGetter(d,k,n,k.options));"AssignmentExpression"===d.type&&"MemberExpression"===d.left.type&&"Super"===d.left.object.type&&(d=Dc.replaceSuperSetter(d,k,n,k.options));"CallExpression"===d.type&&"Super"===d.callee.type&&(d=Dc.replaceDirectSuperCall(d,k,
n,k.options));"CallExpression"===d.type&&d.callee.object&&"Super"===d.callee.object.type&&(d=Dc.replaceSuperMethodCall(d,k,n,k.options));d=Dc.Visitor.prototype.accept.call(this,d,k,n);return"ExportDefaultDeclaration"===d.type?Dc.splitExportDefaultWithClass(d,k,n,k.options):d};xK.run=function(d,k){var n=new this,b=k.classHolder||Dc.objectLiteral([]);return n.accept(d,{options:k,classHolder:b},[])};Dc.ClassReplaceVisitor=xK;Dc.classToFunctionTransform=fi;Dc.classToFunctionTransform=fi;var oC=lively.FreezerRuntime.recorderFor("lively.classes/index.js");
oC.runtime=iC;oC.classToFunctionTransform=fi;oC.runtime=iC;oC.runtime=iC;oC.classToFunctionTransform=fi;oC.classToFunctionTransform=fi;var Eha=Object.freeze({__proto__:null,runtime:iC,classToFunctionTransform:fi}),ri=lively.FreezerRuntime.recorderFor("lively.modules/src/import-modification.js");ri.arr=Qe;ri.Path=Cg;ri.fuzzyParse=en;ri.query=zs;ri.stringify=rg;ri.resource=x;var ru=function(d,k,n,b,e,l,a){this.System=d;this.intoModuleId=k;this.intoPackage=n;this.intoModuleSource=b;this.fromModuleId=
e.moduleId;this.importData=e;this.alias=l;this.parsed=a||ri.fuzzyParse(b)};ru.run=function(d,k,n,b,e,l,a){return(new this(d,k,n,b,e,l,a)).run()};ru.prototype.run=function(){var d=this.generateImportStatement(),k=d.standaloneImport,n=d.importedVarName,b=this.existingImportsOfFromModule(),e=b.imports,l=b.importsOfFromModule;b=b.importsOfVar;l=this.importsToBeReused(l,b,d);if(b.length)return{status:"not modified",newSource:this.intoModuleSource,generated:"",importedVarName:"",standaloneImport:k,from:b[0].start,
to:b[0].end};if(l.length&&(d=this.modifyExistingImport(l,k)))return d;e=ri.arr.last(e);return this.insertNewImport(l,k,n,e?e.end:0)};ru.prototype.importsToBeReused=function(d,k,n){n.isDefault&&(d=d.filter(function(b){return!b.specifiers.some(function(e){return"ImportDefaultSpecifier"==e.type})}));return d};ru.prototype.generateImportStatement=function(){var d=this.intoModuleId,k=this.fromModuleId,n=this.importData,b=this.intoPackage,e="default"===n.exported,l=this.alias||(e?n.local:n.exported),a=
!e&&n.exported!==l;b=b&&b.name;var f=k,m=n.packageName,q=n.pathInPackage;if(n.isMain)f=m;else if(b===m)try{f=ri.resource(k).relativePathFrom(ri.resource(d)),f.startsWith(".")||(f="./"+f)}catch(r){m&&"no group"!==m&&q&&(f=m+"/"+q)}else m&&"no group"!==m&&q&&(f=m+"/"+q);return{isDefault:e,standaloneImport:e?"import "+l+' from "'+f+'";':"import { "+n.exported+(a?" as "+l:"")+' } from "'+f+'";',importedVarName:l}};ru.prototype.existingImportsOfFromModule=function(){var d=this.System,k=this.fromModuleId,
n=this.intoModuleId,b=this.importData,e=b.exported,l=b.local,a=this.alias,f="default"===e;b=this.parsed.body.filter(function(q){return"ImportDeclaration"===q.type});var m=f?a||l:a||e;l=b.filter(function(q){if(!q.source||"string"!==typeof q.source.value)return null;q=d.decanonicalize(q.source.value,n);return k===q});a=l.filter(function(q){return(q.specifiers||[]).some(function(r){return f?"ImportDefaultSpecifier"===r.type&&r.local.name===m:ri.Path("imported.name").get(r)===e&&ri.Path("local.name").get(r)===
m})});return{imports:b,importsOfFromModule:l,importsOfVar:a}};ru.prototype.modifyExistingImport=function(d,k){d=ri.arr.flatmap(d,function(m){return m.specifiers||[]});if(!d.length)return null;d=$jscomp.makeIterator(ri.arr.partition(d,function(m){return"ImportDefaultSpecifier"===m.type}));var n=$jscomp.makeIterator(d.next().value).next().value,b=$jscomp.makeIterator(d.next().value).next().value;d=this.alias;var e=this.intoModuleSource,l=this.importData,a=l.exported;l=l.local;var f="default"===a;f?
console.assert(!!b,"no ImportSpecifier found"):console.assert(b||n,"at least one kine of specifier is expected");if(f){n=e.slice(0,b.start).lastIndexOf("{")-1;if(0>n)return null;b=(d||l)+",";a=e.slice(0,n);e=e.slice(n);a.endsWith(" ")&&a.endsWith("\n")||(b=" "+b);e.startsWith(" ")||(b+=" ");return{status:"modified",newSource:""+a+b+e,generated:b,standaloneImport:k,importedVarName:d||l,from:n,to:n+b.length}}n=b?b.end:n.end;f=(l=d&&d!==a)?a+" as "+d:a;b=b?", "+f:", { "+f+" }";return{status:"modified",
newSource:""+e.slice(0,n)+b+e.slice(n),generated:b,standaloneImport:k,importedVarName:l?d:a,from:n,to:n+b.length}};ru.prototype.insertNewImport=function(d,k,n,b){b=void 0===b?0:b;d&&d.length&&(b=ri.arr.last(d).end);var e=this.intoModuleSource;d=e.slice(0,b);e=e.slice(b);var l=k;d.length&&!d.endsWith("\n")&&(l="\n"+l);e.length&&!e.startsWith("\n")&&(l+="\n");return{status:"modified",newSource:d+l+e,generated:l,standaloneImport:k,importedVarName:n,from:b,to:b+l.length}};ri.ImportInjector=ru;var yK=
function(){};yK.getGlobals=function(d,k){d=k||ri.fuzzyParse(d,{withComments:!0});k=(k=d.comments?d.comments.find(function(b){return b.isBlock&&b.text.startsWith("global")}):null)?k.text.replace(/^global\s*/,"").split(",").map(function(b){return b.trim()}).filter(Boolean):[];var n=[].concat($jscomp.arrayFromIterable(k),$jscomp.arrayFromIterable(ri.query.knownGlobals));d=ri.query.findGlobalVarRefs(d,{jslintGlobalComment:!0}).filter(function(b){return!n.includes(b.name)}).map(function(b){return b.name});
return ri.arr.compact([].concat($jscomp.arrayFromIterable(k),$jscomp.arrayFromIterable(d)))};yK.run=function(d,k,n){n=n||ri.fuzzyParse(d,{withComments:!0});var b=(n=n.comments?n.comments.find(function(l){return l.isBlock&&l.text.startsWith("global")}):null)?n.text.replace(/^global\s*/,"").split(",").map(function(l){return l.trim()}).filter(Boolean):[],e=k.filter(function(l){return!b.includes(l)});if(!e.length)return{status:"not modified",newSource:d,generated:"",from:0,to:0};if(!n)return n="/*global "+
e.join(",")+"*/\n",{status:"modified",newSource:n+d,generated:n,from:0,to:n.length};k=n.start+2+n.text.length;e=e.join(",");b.length?e=","+e:n.text.startsWith("global ")||(e=" "+e);n=k+e.length;return{status:"modified",newSource:d.slice(0,k)+e+d.slice(k),generated:e,from:k,to:n}};ri.GlobalInjector=yK;var kF=function(){};kF.removeImports=function(d,k,n){n=n||ri.fuzzyParse(d);var b=ri.arr.flatmap(n.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,
importStmt:e}}):[]}).filter(function(e){return k.some(function(l){return l.local===e.local.name})});n=b.map(function(e){return{local:e.local.name,from:e.importStmt.source.value}});d=ri.arr.uniq(b.map(function(e){var l=e.importStmt.specifiers.find(function(a){return e.local===a.local});ri.arr.remove(e.importStmt.specifiers,l);return e.importStmt})).slice().reverse().reduce(function(e,l){var a=e.source;e=e.changes;var f=l.start,m=l.end,q=l.specifiers,r=a.slice(0,f),u=a.slice(m);a=a.slice(f,m);(l=q.length?
ri.stringify(l):"")&&l.includes("\n")&&!a.includes("\n")&&(l=l.replace(/\s+/g," "));a=r+l+u;e=e.concat({replacement:l,start:f,end:m});return{source:a,changes:e}},{source:d,changes:[]});return Object.assign({},d,{removedImports:n})};kF.findUnusedImports=function(d){var k="string"===typeof d?ri.fuzzyParse(d):d;d=ri.arr.flatmap(k.body,function(e){return"ImportDeclaration"===e.type&&e.specifiers.length?e.specifiers.map(function(l){return{local:l.local,from:e.source?e.source.value:"",importStmt:e}}):[]});
var n=d.map(function(e){return e.local});k=ri.query.resolveReferences(ri.query.scopes(k));k=Array.from(k.resolvedRefMap.keys()).filter(function(e){return!n.includes(e)});var b=ri.arr.uniq(k.map(function(e){return e.name}));return d.filter(function(e){return!b.includes(e.local.name)}).map(function(e){return Object.assign({},e,{local:e.local.name})})};kF.removeUnusedImports=function(d){var k=ri.fuzzyParse(d);return this.removeImports(d,this.findUnusedImports(k),k)};ri.ImportRemover=kF;var On=lively.FreezerRuntime.recorderFor("lively.modules/src/nodejs.js");
On.ensureParent=function(d,k,n){if(n)return n;n=d.id;var b=d.System;k=n.startsWith("file://")?n.replace("file://",""):n;if(n=b._nodeRequire("module").Module._cache[n])return n;n={id:k,filename:k,paths:[]};(d=d.package())&&n.paths.push(On.resource(d.url).join("node_modules/").path());return n};On.relative=function(d,k){return On.resource(d.id).parent().join(k).url.replace("file://","")};On._require=Nn;On._resolve=ui;On.resource=x;On._require=Nn;On._require=Nn;On._resolve=ui;On._resolve=ui;var he=lively.FreezerRuntime.recorderFor("lively.modules/src/module.js");
he.module=Co;he.isModuleLoaded=as;he.doesModuleExist=bs;he.arr=Qe;he.obj=lf;he.graph=Xv;he.parse=sg;he.query=zs;he.computeRequireMap=wc;he.moduleSourceChange=qd;he.scheduleModuleExportsChange=rd;he.runScheduledExportChanges=ce;he.livelySystemEnv=JG;he.Package=li;he.isURL=Qd;he.emit=Jn;he.subscribe=Hn;he.defaultClassToFunctionConverterName="initializeES6ClassForLively";he.classRuntime=iC;he.ImportInjector=ru;he.GlobalInjector=yK;he.ImportRemover=kF;he._require=Nn;he._resolve=ui;he.classHolder=gw;var zK=
function(){var d=/['"]format (esm|es6)['"];/,k=/['"]format cjs['"];/,n=/(^\s*|[}\);\n]\s*)(import\s+(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s+from\s+['"]|\{)|export\s+\*\s+from\s+["']|export\s+(\{|default|function|class|var|const|let|async\s+function))/;return function(b,e){return e&&e.format?("es6"==e.format&&"esm"==e.format,e.format):d.test(b.slice(0,5E3))||!k.test(b.slice(0,5E3))&&n.test(b)?"esm":k.test(b.slice(0,5E3))?"cjs":"global"}}();he.detectModuleFormat=zK;he.detectModuleFormat=zK;he.detectModuleFormat=
zK;he.classHolder.module=he.module;he.isModuleLoaded=as;he.isModuleLoaded=as;he.doesModuleExist=bs;he.doesModuleExist=bs;he.globalProps={initialized:!1,descriptors:{}};var Bf=function(d,k){var n=this;if(!he.isURL(k)&&!/^@/.test(k))throw Error("ModuleInterface constructor called with "+k+" that does not seem to be a fully normalized module id.");this.System=d;this.id=k;this.recorderName="__lvVarRecorder";this.sourceAccessorName="__lvOriginalCode";this._scope=this._ast=this._source=this._recorder=null;
this._observersOfTopLevelState=[];this._evaluationsInProgress=0;this._evalId=1;this.createdAt=this.lastModifiedAt=new Date;he.subscribe("lively.modules/modulechanged",function(b){b.module===n.id&&n.reset()})};Bf.prototype.fullName=function(){return this.id};Bf.prototype.shortName=function(){return this.package().name+"/"+this.pathInPackage()};Bf.prototype.source=function(){var d=this;return"@empty"===this.id?Promise.resolve(""):this._source?Promise.resolve(this._source):this.System.resource(this.id).read().then(function(k){return d._source=
k})};Bf.prototype.setSource=function(d){this.sourceAccessorName&&this.recorderName&&d.includes("var "+this.recorderName)&&d.includes("var "+this.sourceAccessorName)||this._source===d||(this.reset(),this._source=d)};Bf.prototype.ast=function(){var d=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(d._ast)return e.return(d._ast);k=d;n=he;b=n.parse;return e.yield(d.source(),2)}return e.return(k._ast=b.call(n,e.yieldResult))})};Bf.prototype.scope=function(){var d=
this,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return d._scope?n.return(d._scope):n.yield(d.ast(),2);k=n.yieldResult;return n.return(d._scope=he.query.topLevelDeclsAndRefs(k).scope)})};Bf.prototype.resolvedScope=function(){var d=this,k,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(k=d,n=he.query,b=n.resolveReferences,e.yield(d.scope(),2)):e.return(k._scope=b.call(n,e.yieldResult))})};Bf.prototype.metadata=function(){var d=
this.System.loads?this.System.loads[this.id]:null;return d?d.metadata:null};Bf.prototype.addMetadata=function(d){var k=this.System,n=this.id,b=this.metadata();d=b?Object.assign(b,d):d;b={};k.config({meta:(b[n]=d,b)});return k.meta[n]};Bf.prototype.format=function(){var d=this.metadata();return d&&d.format?d.format:this._source?he.detectModuleFormat(this._source):"global"};Bf.prototype.setFormat=function(d){return this.addMetadata({format:d})};Bf.prototype.reset=function(){this._scope=this._ast=this._source=
null};Bf.prototype.get=function(){return this.System.get(this.id)};Bf.prototype.load=function(d){var k=this,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return n=k,b=n.id,e=n.System,d&&k.addMetadata(d),(l=e.get(b))?a.jumpTo(2):a.yield(e.import(b),3);2!=a.nextAddress&&(l=a.yieldResult);return a.return(l)})};Bf.prototype.isLoaded=function(){return!!this.System.get(this.id)};Bf.prototype.unloadEnv=function(){this._recorder=null;this._observersOfTopLevelState=
[];delete he.livelySystemEnv(this.System).loadedModules[this.id]};Bf.prototype.unloadDeps=function(d){var k=this;d=he.obj.merge({forgetDeps:!0,forgetEnv:!0},d);this.dependents().forEach(function(n){k.System.delete(n.id);k.System.loads&&delete k.System.loads[n.id];d.forgetEnv&&n.unloadEnv()})};Bf.prototype.unload=function(d){var k=this,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return d=Object.assign({reset:!0,forgetDeps:!0,forgetEnv:!0},d),n=k,b=n.System,
e=n.id,d.reset&&k.reset(),d.forgetDeps&&k.unloadDeps(d),k.System.delete(e),b.loads&&delete b.loads[e],b.meta&&delete b.meta[e],d.forgetEnv&&k.unloadEnv(),(l=b._livelyModulesTranslationCache)?a.yield(l.deleteCachedData(e),2):a.jumpTo(2);he.emit("lively.modules/moduleunloaded",{module:k.id},Date.now(),k.System);a.jumpToEnd()})};Bf.prototype.reload=function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(d=he.obj.merge({reloadDeps:!0,resetEnv:!0},
d),n=[k],d.reloadDeps&&(n=k.dependents().concat(n)),b.yield(k.unload({forgetDeps:d.reloadDeps,forgetEnv:d.resetEnv}),2)):3!=b.nextAddress?b.yield(Promise.all(n.map(function(e){return e.id!==k.id&&e.load()})),3):b.yield(k.load(),0)})};Bf.prototype.copyTo=function(d){var k=this,n,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return n=k.System.resource(d),b=n.write,m.yield(k.source(),3);if(2!=m.nextAddress)return m.yield(b.call(n,m.yieldResult),2);e=k;l=
e.System;a=he.module(l,d);f=he.obj.select(k,"_observersOfTopLevelState _scope _ast _source _recorder sourceAccessorName recorderName".split(" "));Object.assign(a,f);l.set(d,l.newModule(l.get(k.id)));return m.return(a)})};Bf.prototype.renameTo=function(d,k){k=void 0===k?{}:k;var n=this,b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return b=k,e=void 0===b.unload?!0:b.unload,l=void 0===b.removeFile?!0:b.removeFile,f.yield(n.copyTo(d),2);case 2:a=
f.yieldResult;if(!e){f.jumpTo(3);break}return f.yield(n.unload({reset:!0,forgetDeps:!1,forgetEnv:!0}),3);case 3:if(!l){f.jumpTo(5);break}return f.yield(n.System.resource(n.id).remove(),5);case 5:return f.return(a)}})};Bf.prototype.whenLoaded=function(d){if(this.isLoaded())try{d(this)}catch(k){console.error(k)}else he.livelySystemEnv(this.System).onLoadCallbacks.push({moduleName:this.id,resolved:!0,callback:d})};Bf.prototype.changeSourceAction=function(d){var k=this;return Promise.resolve(this.source()).then(function(n){return d(n)}).then(function(n){return k.changeSource(n)})};
Bf.prototype.changeSource=function(d,k){k=Object.assign({doSave:!0,doEval:!0},k);var n=this.System,b=this.id,e=this.format(),l;this.reset();this.lastModifiedAt=new Date;return Promise.all([k.doSave&&this.System.resource(b).write(d),k.doEval&&he.moduleSourceChange(n,b,d,e,k).then(function(a){return l=a})]).then(function(){return l})};Bf.prototype.addDependencyToModuleRecord=function(d,k){var n=this;k=void 0===k?function(){}:k;var b=this.record(),e=d.record();if(b&&e){var l,a=b.dependencies.some(function(m,
q){if(m)return l=q,m&&m.name===d.id});a?e!==b.dependencies[l]&&b.dependencies.splice(l,1,e):b.dependencies.push(e);a&&b.setters[l]||(b.setters[a?l:b.dependencies.length-1]=k);var f;e.importers.some(function(m,q){if(m)return f=q,m&&m.name===n.id})?b!==e.importers[f]&&e.importers.splice(f,1,b):e.importers.push(b)}};Bf.prototype.dependents=function(){var d=this;return he.graph.hull(he.graph.invert(he.computeRequireMap(this.System)),this.id).map(function(k){return he.module(d.System,k)})};Bf.prototype.requirements=
function(){var d=this;return he.graph.hull(he.computeRequireMap(this.System),this.id).map(function(k){return he.module(d.System,k)})};Bf.prototype.directRequirements=function(){var d=this,k=(this.record()||{}).dependencies||[];return he.arr.pluck(k.filter(Boolean),"name").map(function(n){return he.module(d.System,n)})};Bf.prototype.isMochaTest=function(){if(!this._source)return!1;var d=this._scope||(this._scope=he.query.topLevelDeclsAndRefs(he.parse(this._source)).scope);return he.query.imports(d).map(function(k){return k.fromModule}).some(function(k){return k.endsWith("mocha-es6")||
k.endsWith("mocha-es6/index.js")})?!0:!1};Bf.prototype.define=function(d,k,n,b){n=void 0===n?!0:n;var e=this.System,l=this.id,a=this.recorder,f=Symbol.for("lively-object-meta"),m=Symbol.for("lively-module-meta");"function"!==typeof k||!b||"function"!==b.kind&&"class"!==b.kind||(k[f]=b);k&&k[f]&&!k[m]&&(b=this.pathInPackage(),f=this.package(),k[m]={package:f?{name:f.name,version:f.version}:{},pathInPackage:b});a[d]=k;he.scheduleModuleExportsChange(e,l,d,k,!1);this.notifyTopLevelObservers(d);(n=n||
!this.isEvalutionInProgress())&&he.runScheduledExportChanges(e,l);return k};Bf.prototype.undefine=function(d){delete this.recorder[d]};Bf.prototype.subscribeToToplevelDefinitionChanges=function(d){this._observersOfTopLevelState.push(d);return d};Bf.prototype.notifyTopLevelObservers=function(d){var k=this.recorder;he.arr.include(["createOrExtendES6ClassForLively","lively.capturing-declaration-wrapper"],d)||this._observersOfTopLevelState.forEach(function(n){return n(d,k[d])})};Bf.prototype.unsubscribeFromToplevelDefinitionChanges=
function(d){this._observersOfTopLevelState="string"===typeof d?this._observersOfTopLevelState.filter(function(k){return k.name!==d}):this._observersOfTopLevelState.filter(function(k){return k!==d})};Bf.prototype.evaluationStart=function(){this._evaluationsInProgress++};Bf.prototype.evaluationEnd=function(){this._evaluationsInProgress--;he.runScheduledExportChanges(this.System,this.id)};Bf.prototype.nextEvalId=function(){return this._evalId++};Bf.prototype.isEvalutionInProgress=function(){return 0<
this._evaluationsInProgress};Bf.prototype.env=function(){return this};Bf.prototype.package=function(){return he.Package.forModule(this.System,this)};Bf.prototype.pathInPackage=function(){var d=this.package();return d&&0===this.id.indexOf(d.address)?this.id.slice(d.address.length).replace(/^\//,""):this.id};Bf.prototype.imports=function(){var d=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=he.query,n=k.imports,b.yield(d.scope(),2)):b.return(n.call(k,
b.yieldResult))})};Bf.prototype.exports=function(){var d=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(k=he.query,n=k.exports,b.yield(d.scope(),2)):b.return(n.call(k,b.yieldResult))})};Bf.prototype.addImports=function(d){var k=this,n,b,e,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(k.source(),2);n=u.yieldResult;b=$jscomp.makeIterator(d);for(e=b.next();!e.done;e=b.next())l=e.value,a=
he.module(k.System,l.from||l.moduleId),f=a.package(),m={exported:l.exported||l.local,moduleId:a.id,packageName:f.name,packageURL:f.url,pathInPackage:a.pathInPackage()},q=l.local,r=he.ImportInjector.run(k.System,k.id,k.package(),n,m,q),n=r.newSource;return u.yield(k.changeSource(n),0)})};Bf.prototype.addGlobalDeclaration=function(d){var k=this,n,b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?f.yield(k.source(),2):3!=f.nextAddress?(n=f.yieldResult,b=he.GlobalInjector.run(n,
d),e=b.status,l=b.newSource,(a="modified"===e)?f.yield(k.changeSource(l),3):f.jumpTo(3)):f.return(a)})};Bf.prototype.removeImports=function(d){var k=this,n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:return d.length?a.yield(k.source(),2):a.return();case 2:return n=a.yieldResult,a.yield(he.ImportRemover.removeImports(n,d),3);case 3:return b=a.yieldResult,e=b.source,l=b.removedImports,a.yield(k.changeSource(e),4);case 4:l.forEach(function(f){return delete k.recorder[f.local]}),
a.jumpToEnd()}})};Bf.prototype._localDeclForRefAt=function(d){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(k.resolvedScope(),2);n=e.yieldResult;b=he.query.refWithDeclAt(d,n);return e.return(b&&{decl:b.decl,id:b.declId,declModule:k})})};Bf.prototype._localDeclForName=function(d){var k=this,n,b,e,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(k.resolvedScope(),2);n=r.yieldResult;
e=$jscomp.makeIterator(n.resolvedRefMap.values());for(l=e.next();!l.done;l=e.next())if(f=a=l.value,m=f.ref,q=m.name,d===q){b=a;break}return r.return(b&&{decl:b.decl,id:b.declId,declModule:k})})};Bf.prototype._importForNSRefAt=function(d){var k=this,n,b,e,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(k.resolvedScope(),2);n=u.yieldResult;b=n.node;e=he.query.nodesAtIndex(b,d);if(2>e.length)return u.return([null,null]);l=e[e.length-1];a=
e[e.length-2];if("Identifier"!=l.type||"MemberExpression"!=a.type||a.computed||"Identifier"!==a.object.type)return u.return([null,null]);f=n.resolvedRefMap.get(a.object)||{};m=f.decl;if(!m||"ImportDeclaration"!==m.type)return u.return([null,null]);q=a.object.name;r=m.specifiers.find(function(v){return v.local.name===q});return u.return("ImportNamespaceSpecifier"!==r.type?[null,null]:[m,r.local,l.name])})};Bf.prototype._resolveImportedDecl=function(d){var k=this,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(!d)return q.return([]);
n=d.id;b=n.name;return q.yield(k.imports(),2);case 2:e=q.yieldResult;l=e.find(function(r){return r.local==b});if(!l){q.jumpTo(3);break}a=he.module(k.System,l.fromModule,k.id);f=[d];m=f.concat;return q.yield(a.bindingPathForExport(l.imported),4);case 4:return q.return(m.call(f,q.yieldResult));case 3:return q.return([d])}})};Bf.prototype.bindingPathFor=function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(k._localDeclForName(d),2):4!=
b.nextAddress?(n=b.yieldResult)?b.yield(k._resolveImportedDecl(n),4):b.jumpTo(0):b.return(b.yieldResult)})};Bf.prototype.bindingPathForExport=function(d){var k=this,n,b,e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return m.yield(k.resolvedScope(),2);case 2:return m.yield(k.exports(),3);case 3:n=m.yieldResult;b=n.find(function(q){return q.exported===d});if(!b.fromModule)return m.return(k._resolveImportedDecl({decl:b.decl,id:b.declId,declModule:b&&
b.decl?k:null}));e=he.module(k.System,b.fromModule,k.id);l={decl:b.node,id:b.declId,declModule:k};a=[l];f=a.concat;return m.yield(e.bindingPathForExport(b.imported),5);case 5:return m.return(f.call(a,m.yieldResult))}})};Bf.prototype.bindingPathForRefAt=function(d){var k=this,n,b,e,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(k._localDeclForRefAt(d),2);case 2:n=v.yieldResult;if(!n){v.jumpTo(3);break}return v.yield(k._resolveImportedDecl(n),
4);case 4:return v.return(v.yieldResult);case 3:return b=$jscomp,e=b.makeIterator,v.yield(k._importForNSRefAt(d),5);case 5:l=e.call(b,v.yieldResult);a=l.next().value;f=l.next().value;m=l.next().value;if(!a)return v.return([]);q=he.module(k.System,a.source.value,k.id);r=[{decl:a,declModule:k,id:f}];u=r.concat;return v.yield(q.bindingPathForExport(m),6);case 6:return v.return(u.call(r,v.yieldResult))}})};Bf.prototype.definitionForRefAt=function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(k.bindingPathForRefAt(d),2);n=b.yieldResult;return b.return(1>n.length?null:n[n.length-1].decl)})};Bf.prototype.ensureRecord=function(){var d=this.System,k=d._loader.moduleRecords;return k[this.id]?k[this.id]:k[this.id]={name:this.id,exports:d.newModule({}),dependencies:[],importers:[],setters:[]}};Bf.prototype.record=function(){var d=this.System._loader.moduleRecords[this.id];if(!d)return null;d.hasOwnProperty("__lively_modules__")||(d.__lively_modules__={evalOnlyExport:{}});
return d};Bf.prototype.updateRecord=function(d){var k=this.record();if(!k)throw Error("es6 environment global of "+this.id+": module not loaded, cannot get export object!");k.locked=!0;try{return d(k)}finally{k.locked=!1}};Bf.prototype.search=function(d,k){var n=this,b,e,l,a,f,m,q,r,u,v,y,z,B,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return k=Object.assign({excludedModules:[]},k),k.excludedModules.some(function(F){return"string"===typeof F?F===n.id:F instanceof
RegExp?F.test(n.id):"function"===typeof F?F(n.id):!1})?G.return([]):G.yield(n.source(),2);b=G.yieldResult;d instanceof RegExp?(l="g",d.ignoreCase&&(l+="i"),d.multiline&&(l+="m"),e=RegExp(d.source,l)):e=RegExp(d,"g");for(f=[];null!==(a=e.exec(b));)f.push([a.index,a[0].length]);q=m=0;r=1;for(u=0;m<b.length&&q<f.length;m++)"\n"==b[m]&&(r++,u=m+1),v=$jscomp.makeIterator(f[q]),y=v.next().value,z=v.next().value,m===y&&(B=b.slice(u).indexOf("\n"),B=-1===B?b.length:B+u,C=n.package(),f[q]={moduleId:n.id,packageName:C?
C.name:void 0,pathInPackage:C?n.pathInPackage():n.id,isLoaded:n.isLoaded(),length:z,line:r,column:m-u,lineString:1E3<B-u?"..."+b.slice(m-10,m+100)+"...":b.slice(u,B)},q++);return G.return(f)})};Bf.prototype.toString=function(){return"module("+this.id+")"};$jscomp.global.Object.defineProperties(Bf.prototype,{dontTransform:{configurable:!0,enumerable:!0,get:function(){return[this.recorderName,this.sourceAccessorName,"global","self","_moduleExport","_moduleImport","localStorage","prompt","alert","fetch",
"getComputedStyle"].concat($jscomp.arrayFromIterable(this.isMochaTest()?[]:he.GlobalInjector.getGlobals(this._source))).concat(he.query.knownGlobals)}},recorder:{configurable:!0,enumerable:!0,set:function(d){return this._recorder=d},get:function(){if(this._recorder)return this._recorder;var d=this.System,k=this;if(!he.globalProps.initialized){he.globalProps.initialized=!0;for(var n in d.global)if(d.global.__lookupGetter__(n)||"closed"==n)he.globalProps.descriptors[n]={value:void 0,configurable:!0,
writable:!0}}n={};if(d.get("@system-env").node){var b=he._require.bind(null,this);b.resolve=he._resolve.bind(null,this);n.require={configurable:!0,writable:!0,value:b}}b={};return this._recorder=Object.create(d.global,Object.assign({},he.globalProps.descriptors,{},n,(b.event={configurable:!0,writable:!0,value:void 0},b.System={configurable:!0,writable:!0,value:d},b.__currentLivelyModule={value:k},b[he.defaultClassToFunctionConverterName]={configurable:!0,writable:!0,value:he.classRuntime.initializeClass},
b[this.varDefinitionCallbackName]={value:function(e,l,a,f,m){m=m||{};m.kind=l;return k.define(e,a,!1,m)}},b._moduleExport={value:function(e,l){he.scheduleModuleExportsChange(d,k.id,e,l,!0)}},b._moduleImport={value:function(e,l){var a=d.decanonicalize(e,k.id),f=d.get(a);if(f){k.addDependencyToModuleRecord(he.module(d,a),function(m){return Object.assign(k.recorder,m)});if(void 0==l)return f;f.hasOwnProperty(l)||console.warn("import from "+f+": Has no export "+l+"!");return f[l]}console.warn("import of "+
l+" failed: "+e+" (tried as "+k.id+") is not loaded!")}},b)))}},varDefinitionCallbackName:{configurable:!0,enumerable:!0,get:function(){return"defVar_"+this.id}}});he.ModuleInterface=Bf;he.default=Co;var Md=lively.FreezerRuntime.recorderFor("lively.modules/src/instrumentation.js");Md.canonicalURL=function(d){var k=d.match(/([^:]+:\/\/)(.*)/);if(k){var n=k[1];d=k[2]}d=d.replace(/([^:])\/[\/]+/g,"$1/");return(n||"")+d};Md.prepareNodejsCaching=function(){var d=System._nodeRequire("fs"),k=System._nodeRequire("path"),
n="win32"===Md.process.platform;k=n||"/"!==Md.process.cwd()?Md.process.cwd():k.join(Md.process.env.HOME,".lively.next");Md.nodejsCacheDirURL=n?"file:///"+k.replace(/\\/g,"/"):"file://"+k;d.existsSync(k)||d.mkdirSync(k)};Md.getExceptions=Kt;Md.setExceptions=cs;Md.prepareCodeForCustomCompile=Rg;Md.prepareTranslatedCodeForSetterCapture=fj;Md.getCachedNodejsModule=function(d,k){try{var n=d._nodeRequire("module").Module,b=n._resolveFilename(k.name.replace(/^file:\/\//,"").replace(/^\/([a-z]:\/)/i,"$1"));
return n._cache[b]}catch(e){d.debug&&console.log("[lively.modules getCachedNodejsModule] %s unknown to nodejs",k.name)}return null};Md.addNodejsWrapperSource=function(d,k){var n=Md.getCachedNodejsModule(d,k);if(n)return k.metadata.format="esm",k.source="var exports = System._nodeRequire('"+n.id+"'); export default exports;\n"+Md.properties.allOwnPropertiesOrFunctions(n.exports).map(function(b){return Md.isValidIdentifier(b)?"export var "+b+" = exports['"+b+"'];":'/*ignoring export "'+b+'" b/c it is not a valid identifier*/'}).join("\n"),
d.debug&&console.log("[lively.modules customTranslate] loading %s from nodejs module cache",k.name),!0;d.debug&&console.log("[lively.modules customTranslate] %s not yet in nodejs module cache",k.name);return!1};Md.customTranslate=function(d,k){var n=this,b,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){switch(ha.nextAddress){case 1:b=n;e=b.debug;if(a=(l=k.metadata)&&l.hasOwnProperty("instrument")&&!l.instrument||Md.exceptions.some(function(qa){return qa(k.name)}))return e&&
console.log("[lively.modules customTranslate ignoring] %s",k.name),ha.return(d(k));if(Md.isNode&&Md.addNodejsWrapperSource(b,k))return e&&console.log("[lively.modules] loaded %s from nodejs cache",k.name),ha.return(d(k));f=Date.now();m=Md.detectModuleFormat(k.source,l);q=Md.module(b,k.name);r=!1;u="esm"===m;q.setSource(k.source);ha.setCatchFinallyBlocks(2);v=b.useModuleTranslationCache;y=b.global.indexedDB;z=v&&String(Md.string.hashCode(k.source));if(v&&y&&u)return B=b._livelyModulesTranslationCache||
(b._livelyModulesTranslationCache=new Md.BrowserModuleTranslationCache),ha.yield(B.fetchStoredModuleSource(k.name),8);if(!(Md.isNode&&v&&u)){ha.jumpTo(5);break}B=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Md.NodeModuleTranslationCache);return ha.yield(B.fetchStoredModuleSource(k.name),7);case 7:if((C=ha.yieldResult)&&C.hash==z&&C.timestamp>=Md.NodeModuleTranslationCache.earliestDate&&C.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from filesystem cache after %sms",
k.name,Date.now()-f),ha.return(Promise.resolve(C.source));ha.jumpTo(5);break;case 8:if((C=ha.yieldResult)&&C.hash==z&&C.timestamp>=Md.BrowserModuleTranslationCache.earliestDate&&C.source)return l.format="register",l.deps=[],e&&console.log("[lively.modules customTranslate] loaded %s from browser cache after %sms",k.name,Date.now()-f),ha.return(Promise.resolve(C.source));case 5:ha.leaveTryBlock(3);break;case 2:G=ha.enterCatchBlock(),console.error("[lively.modules customTranslate] error reading module translation cache: "+
G.stack);case 3:return F={},u?(q.recorderName="__lvVarRecorder",q.recorder===b.global&&q.unloadEnv(),k.metadata.format="esm",N=Md.prepareCodeForCustomCompile(b,k.source,k.name,q,e),F=N.options,L=N.source,k.source=L,r=k.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as es6 module",k.name)):"global"===k.metadata.format&&(q.recorderName="System.global",q.recorder=b.global,k.metadata.format="global",S=Md.prepareCodeForCustomCompile(b,k.source,k.name,q,e),F=S.options,
L=S.source,k.source=L,r=k.metadata["lively.modules instrumented"]=!0,e&&console.log("[lively.modules] loaded %s as instrumented global module",k.name)),r||e&&console.log("[lively.modules] customTranslate ignoring %s b/c don't know how to handle format %s",k.name,k.metadata.format),ha.return(d(k).then(function(qa){var D,P,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:0===qa.indexOf("System.register(")&&(e&&console.log("[lively.modules customTranslate] Installing System.register setter captures for %s",
k.name),qa=Md.prepareTranslatedCodeForSetterCapture(b,qa,k.name,q,F,e));if(Md.isNode&&v&&u)return D=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Md.NodeModuleTranslationCache),M.setCatchFinallyBlocks(8),M.yield(D.cacheModuleSource(k.name,z,qa),10);if(!(v&&y&&u)){M.jumpTo(3);break}D=b._livelyModulesTranslationCache||(b._livelyModulesTranslationCache=new Md.BrowserModuleTranslationCache);M.setCatchFinallyBlocks(5);return M.yield(D.cacheModuleSource(k.name,z,qa),7);case 7:e&&
console.log("[lively.modules customTranslate] stored cached version for %s",k.name);M.leaveTryBlock(3);break;case 5:P=M.enterCatchBlock();console.error("[lively.modules customTranslate] failed storing module cache: "+P.stack);M.jumpTo(3);break;case 10:e&&console.log("[lively.modules customTranslate] stored cached version in filesystem for %s",k.name);M.leaveTryBlock(3);break;case 8:J=M.enterCatchBlock(),console.error("[lively.modules customTranslate] failed storing module cache: "+J.stack);case 3:return e&&
console.log("[lively.modules customTranslate] done %s after %sms",k.name,Date.now()-f),M.return(qa)}})}))}})};Md.instrumentSourceOfEsmModuleLoad=vi;Md.instrumentSourceOfGlobalModuleLoad=$l;Md.wrapModuleLoad=cx;Md.unwrapModuleLoad=dx;Md.parse=sg;Md.nodes=aw;Md.isValidIdentifier=ov;var uR=Md.nodes;Md.funcCall=uR.funcCall;Md.member=uR.member;Md.literal=uR.literal;Md.evalCodeTransform=nk;Md.evalCodeTransformOfSystemRegisterSetters=uo;Md.arr=Qe;Md.string=Hg;Md.properties=Gp;Md.module=Co;Md.detectModuleFormat=
zK;Md.resource=x;Md.installHook=ic;Md.removeHook=rc;Md.isHookInstalled=Nc;Md.classToFunctionTransform=fi;Md.isNode=System.get("@system-env").node;var lF=function(){};lF.prototype.cacheModuleSource=function(d,k,n){throw Error("not yet implemented");};lF.prototype.fetchStoredModuleSource=function(d){throw Error("not yet implemented");};lF.prototype.deleteCachedData=function(d){throw Error("not yet implemented");};$jscomp.global.Object.defineProperties(lF,{earliestDate:{configurable:!0,enumerable:!0,
get:function(){return+new Date("Sun Oct 18 2020 16:00:00 GMT-0800 (PST)")}}});Md.ModuleTranslationCache=lF;Md.nodejsCacheDirURL=null;var hw=function(){return Md.ModuleTranslationCache.apply(this,arguments)||this};$jscomp.inherits(hw,Md.ModuleTranslationCache);hw.prototype.ensurePath=function(d){var k=this,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.yield(k.moduleCacheDir.join(d).exists(),2);case 2:if(q.yieldResult)return q.return();
n="";l=$jscomp.makeIterator(d.split("/"));a=l.next();case 3:if(a.done){q.jumpTo(0);break}f=a.value;n+=f+"/";b=k.moduleCacheDir.join(n);return q.yield(b.exists(),6);case 6:if(q.yieldResult){q.jumpTo(7);break}q.setCatchFinallyBlocks(8);return q.yield(b.mkdir(),10);case 10:q.leaveTryBlock(7);break;case 8:if(m=q.enterCatchBlock(),"EEXIST"!=m.code)throw m;case 7:return b=Md.resource("file://"+n+"/package.json"),q.yield(b.exists(),11);case 11:if(!q.yieldResult){q.jumpTo(4);break}return q.yield(b.read(),
13);case 13:return e=q.yieldResult,q.yield(k.moduleCacheDir.join(n+"/package.json").write(e),4);case 4:a=l.next(),q.jumpTo(3)}})};hw.prototype.dumpModuleCache=function(){var d=this,k,n,b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:n=f.forIn(System._nodeRequire("module").Module._cache);case 2:if(null==(k=n.getNext())){f.jumpTo(0);break}b=Md.resource("file://"+k);return f.yield(b.exists(),5);case 5:if(!f.yieldResult){f.jumpTo(2);break}e=d;l=e.cacheModuleSource;
a=k;return f.yield(b.read(),8);case 8:return f.yield(l.call(e,a,"NO_HASH",f.yieldResult),2)}})};hw.prototype.getFileName=function(d){return d.match(/([^\/]*.)(\.js)?$/)[0]};hw.prototype.fetchStoredModuleSource=function(d){var k=this,n,b,e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return d=d.replace("file://",""),n=k.getFileName(d),b=d.replace(n,""),e=k.moduleCacheDir.join(d),q.yield(e.exists(),2);case 2:return q.yieldResult?q.yield(e.stat(),
3):q.return(null);case 3:return l=q.yieldResult,a=l.birthtime,q.yield(e.read(),4);case 4:return f=q.yieldResult,q.yield(k.moduleCacheDir.join(b+"/.hash_"+n).read(),5);case 5:return m=q.yieldResult,q.return({source:f,timestamp:a,hash:m})}})};hw.prototype.cacheModuleSource=function(d,k,n){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(d=d.replace("file://",""),e=b.getFileName(d),l=d.replace(e,""),a.yield(b.ensurePath(l),2)):3!=a.nextAddress?a.yield(b.moduleCacheDir.join(d).write(n),
3):a.yield(b.moduleCacheDir.join(l+"/.hash_"+e).write(k),0)})};hw.prototype.deleteCachedData=function(d){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(d=d.replace("file://",""),n=k.getFileName(d),d.replace(n,""),b=k.moduleCacheDir.join(d),e.yield(b.exists(),2)):3!=e.nextAddress?e.yieldResult?e.yield(b.remove(),3):e.return(!1):e.return(!0)})};$jscomp.global.Object.defineProperties(hw.prototype,{moduleCacheDir:{configurable:!0,enumerable:!0,get:function(){Md.nodejsCacheDirURL||
Md.prepareNodejsCaching();return Md.resource(Md.nodejsCacheDirURL+"/.module_cache/")}}});Md.NodeModuleTranslationCache=hw;var iw=function(d){d=void 0===d?"lively.modules-module-translation-cache":d;var k=Md.ModuleTranslationCache.call(this)||this;k.version=2;k.sourceCodeCacheStoreName="sourceCodeStore";k.dbName=d;k.db=k.openDb();return k};$jscomp.inherits(iw,Md.ModuleTranslationCache);iw.prototype.openDb=function(){var d=this,k=System.global.indexedDB.open(this.version);return new Promise(function(n,
b){k.onsuccess=function(e){n(this.result)};k.onerror=function(e){return b(e.target)};k.onupgradeneeded=function(e){return e.currentTarget.result.createObjectStore(d.sourceCodeCacheStoreName,{keyPath:"moduleId"})}})};iw.prototype.deleteDb=function(){var d=System.global.indexedDB.deleteDatabase(this.dbName);return new Promise(function(k,n){d.onerror=function(b){return n(b.target)};d.onsuccess=function(b){return k(b)}})};iw.prototype.closeDb=function(){var d=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==
b.nextAddress)return b.yield(d.db,2);k=b.yieldResult;n=k.close();return b.return(new Promise(function(e,l){n.onsuccess=function(a){e(this.result)};n.onerror=function(a){return l(a.target.errorCode)}}))})};iw.prototype.cacheModuleSource=function(d,k,n){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.db,2);e=l.yieldResult;return l.return(new Promise(function(a,f){var m=e.transaction([b.sourceCodeCacheStoreName],"readwrite"),q=m.objectStore(b.sourceCodeCacheStoreName),
r=Date.now();q.put({moduleId:d,hash:k,source:n,timestamp:r});m.oncomplete=a;m.onerror=f}))})};iw.prototype.fetchStoredModuleSource=function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.db,2);n=b.yieldResult;return b.return(new Promise(function(e,l){var a=n.transaction([k.sourceCodeCacheStoreName]).objectStore(k.sourceCodeCacheStoreName).get(d);a.onerror=l;a.onsuccess=function(f){return e(a.result)}}))})};iw.prototype.deleteCachedData=
function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.db,2);n=b.yieldResult;return b.return(new Promise(function(e,l){var a=n.transaction([k.sourceCodeCacheStoreName],"readwrite").objectStore(k.sourceCodeCacheStoreName).delete(d);a.onerror=l;a.onsuccess=function(f){return e(a.result)}}))})};wa("ai",iw);Md.BrowserModuleTranslationCache=iw;Md.node_modulesDir=System.decanonicalize("lively.modules/node_modules/");Md.exceptions=[function(d){return!d.endsWith(".js")&&
!d.endsWith(".jsx")&&!d.startsWith("https://jspm.dev")},function(d){return d.endsWith("dist/acorn.js")||d.endsWith("dist/escodegen.browser.js")||d.endsWith("bowser.js")||d.endsWith("TweenMax.min.js")},function(d){return d.endsWith("babel-core/browser.js")||d.endsWith("system.src.js")||d.includes("systemjs-plugin-babel")}];Md.pendingConfigs=[];Md.configInitialized=!1;Md.prepareCodeForCustomCompile=Rg;Md.prepareCodeForCustomCompile=Rg;Md.prepareTranslatedCodeForSetterCapture=fj;Md.prepareTranslatedCodeForSetterCapture=
fj;Md.wrapModuleLoad=cx;Md.wrapModuleLoad=cx;Md.unwrapModuleLoad=dx;Md.unwrapModuleLoad=dx;Md.getExceptions=Kt;Md.getExceptions=Kt;Md.setExceptions=cs;Md.setExceptions=cs;Md.instrumentSourceOfEsmModuleLoad=vi;Md.instrumentSourceOfEsmModuleLoad=vi;Md.instrumentSourceOfGlobalModuleLoad=$l;Md.instrumentSourceOfGlobalModuleLoad=$l;var kg=lively.FreezerRuntime.recorderFor("lively.modules/src/resource.js");kg.fetchResource=function(d,k){var n=this,b,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:b=
n;e=25E4;l=b.resource(k.name);a=b.get("@system-env").node&&!l.isNodeJSFileResource;if(!a){J.jumpTo(2);break}return J.yield(Fha(k.name),3);case 3:l=J.yieldResult;case 2:if(!l)return J.return(d(k));if(kg.jsFileHashMap||b.get("@system-env").node){J.jumpTo(4);break}q=kg;return J.yield(b.resource(b.baseURL).join("__JS_FILE_HASHES__").readJson(),5);case 5:q.jsFileHashMap=J.yieldResult;case 4:r=b.useModuleTranslationCache;u=b.global.indexedDB;v=b._livelyModulesTranslationCache;if(b.get("@system-env").node||
!r||!u||!v){J.jumpTo(6);break}return J.yield(v.fetchStoredModuleSource(k.name),7);case 7:if((y=J.yieldResult)&&(kg.jsFileHashMap[k.name.replace(b.baseURL,"/")]==y.hash||k.name.includes("jspm")))return k.metadata.instrument=!1,J.return(y.source);case 6:if(l.isResource&&l.ext()&&l.ext().startsWith("css"))return J.return("");J.setCatchFinallyBlocks(8);if(!l.isResource){z=l;J.jumpTo(10);break}return J.yield(l.read(),11);case 11:z=J.yieldResult;case 10:f=z;J.leaveTryBlock(9);break;case 8:m=B=J.enterCatchBlock();
case 9:if(!m||!b.get("@system-env").browser){J.jumpTo(12);break}C=l.url.startsWith("http");G=!l.url.startsWith(document.location.origin);if(!C||!G){J.jumpTo(12);break}J.setCatchFinallyBlocks(14);return J.yield(l.makeProxied(b.baseURL).read(),16);case 16:f=J.yieldResult;m=null;J.leaveTryBlock(12);break;case 14:J.enterCatchBlock();case 12:if(m)throw m;if(!a){J.jumpTo(17);break}F=f.headers||{};N=F._headers;L=$jscomp.makeIterator(N&&N["content-encoding"]||[]);S=L.next().value;return"br"==S?(ha=kg.Buffer,
qa=ha.from,D=kg.brotli,P=D.decompress,J.yield(f.buffer(),21)):J.yield(f.text(),20);case 20:f=J.yieldResult;J.jumpTo(17);break;case 21:f=qa.call(ha,P.call(D,J.yieldResult)).toString();case 17:if(!(f.length>e&&$world)||b._loadingIndicator){J.jumpTo(22);break}b._loadingIndicator=$world.execCommand("open loading indicator",{label:"loading module",status:k.name.replace(b.baseURL,"")});return J.yield(kg.promise.delay(500),23);case 23:if(!b._loadingIndicator){J.jumpTo(22);break}return J.yield(b._loadingIndicator.whenRendered(),
22);case 22:return J.return(f)}})};kg.livelyProtocol=function(d,k){var n=k.match(kg.livelyURLRe);if(!n)return d(k);d=$jscomp.makeIterator(n);d.next();d.next();var b=d.next().value;return{read:function(){var e="undefined"!==typeof $world&&$world.getMorphWithId(b);return Promise.resolve(e?e.textString:"/*Could not locate "+b+"*/")},write:function(e){var l="undefined"!==typeof $world&&$world.getMorphWithId(b);if(!l)return Promise.reject("Could not save morph "+b);l.textString=e;return Promise.resolve(this)}}};
kg.wrapResource=Mg;kg.unwrapResource=vl;kg.resource=x;kg.Resource=Nf;kg.installHook=ic;kg.removeHook=rc;kg.isHookInstalled=Nc;kg.brotli=kg.brotli||void 0;if(System.get("@system-env").node){var Fha=System._nodeRequire("node-fetch");kg.brotli=System._nodeRequire("brotli")}kg.jsFileHashMap=kg.jsFileHashMap||void 0;kg.livelyURLRe=/^lively:\/\/([^\/]+)\/(.*)$/;kg.wrapResource=Mg;kg.wrapResource=Mg;kg.unwrapResource=vl;kg.unwrapResource=vl;var Wz=function(){return kg.Resource.apply(this,arguments)||this};
$jscomp.inherits(Wz,kg.Resource);Wz.prototype.read=function(){var d=this,k,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){k=d.morphId;n="undefined"!==typeof $world&&$world.getMorphWithId(k);return b.return(Promise.resolve(n?n.textString:"/*Could not locate "+k+"*/"))})};Wz.prototype.write=function(d){var k=this,n,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){n=k.morphId;b="undefined"!==typeof $world&&$world.getMorphWithId(n);if(!b)return e.return(Promise.reject("Could not save morph "+
n));b.textString=d;return e.return(Promise.resolve(k))})};Wz.prototype.exists=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k.return("undefined"!==typeof $world&&$world.getMorphWithId(d.morphId))})};Wz.prototype.remove=function(){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){"undefined"!==typeof $world&&$world.getMorphWithId(d.morphId).remove();return k.return(!0)})};$jscomp.global.Object.defineProperties(Wz.prototype,{canDealWithJSON:{configurable:!0,
enumerable:!0,get:function(){return!1}},morphId:{configurable:!0,enumerable:!0,get:function(){var d=this.url.match(kg.livelyURLRe);d=$jscomp.makeIterator(d);d.next();d.next();return d.next().value}}});kg.LivelyResource=Wz;var vR={name:"lively.modules",matches:function(d){return d.match(kg.livelyURLRe)},resourceClass:kg.LivelyResource};kg.resourceExtension=vR;kg.resourceExtension=vR;kg.resourceExtension=vR;kg.registerExtension=A;kg.promise=oe;kg.registerExtension(kg.resourceExtension);var Xc=lively.FreezerRuntime.recorderFor("lively.modules/src/system.js");
Xc.wrapModuleResolution=Pn;Xc.unwrapModuleResolution=ex;Xc.livelySystemEnv=JG;Xc.systems=function(){System.constructor.systems||(System.constructor.systems={});return System.constructor.systems};Xc.nameOfSystem=function(d){return Object.keys(Xc.systems()).detect(function(k){return Xc.systems()[k]===d})};Xc.getSystem=Ty;Xc.removeSystem=Uy;Xc.makeSystem=function(d){return Xc.prepareSystem(new System.constructor,d)};Xc.prepareSystem=KG;Xc.urlQuery=function(){return"undefined"!==typeof document&&document.location?
(document.location.search||"").replace(/^\?/,"").split("&").reduce(function(d,k){var n=k.split("=");k=n[0];n=n[1];"true"===n||"false"===n?n=eval(n):isNaN(Number(n))||(n=Number(n));d[k]=n;return d},{}):{}};Xc.preNormalize=function(d,k,n){".."===k&&(k="../index.js");k=k.replace(Xc.doubleSlashRe,function(f){return":"===f[0]?f:f[0]+"/"});var b=d.get("@lively-env").packageRegistry;if(b){var e=n&&b.findPackageHavingURL(n);if(e){var l=e.map,a=e.url;if(l=l&&l[k]||d.map[k])"object"===typeof l&&(l=Xc.normalize_doMapWithObject(l,
e,d)),"string"===typeof l&&""!==l&&(k=l),k.startsWith(".")&&(k=Xc.urlResolve(Xc.join(a,k)))}}b&&(d=b.resolvePath(k,n))&&(d.endsWith("/")&&!k.endsWith("/")&&(d=d.slice(0,-1)),!d.endsWith("/")&&k.endsWith("/")&&(d+="/"),k=d);return k};Xc.postNormalize=function(d,k,n){n=k.replace(Xc.jsExtRe,"");if(k.endsWith("/"))return k;var b=d.get("@lively-env").packageRegistry;if(b){if(b=b.findPackageWithURL(n))return b=(b.main||"index.js").replace(Xc.dotSlashStartRe,""),d=n.replace(Xc.trailingSlashRe,"")+"/"+b}else if(n in
d.packages&&(b=d.packages[n].main))return d=n.replace(Xc.trailingSlashRe,"")+"/"+b.replace(Xc.dotSlashStartRe,"");n=k.match(Xc.jsonJsExtRe);d.debug&&console.log(">> [postNormalize] "+(n?n[1]:k));return n?n[1]:k};Xc.checkExistence=function(d,k){var n,b,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){switch(a.nextAddress){case 1:k._fileCheckMap=k._fileCheckMap||{};if(d in k._fileCheckMap)return a.return(k._fileCheckMap[d]);n=k._livelyModulesTranslationCache;if(!(b=n)){a.jumpTo(2);
break}return a.yield(n.fetchStoredModuleSource(d),3);case 3:b=a.yieldResult;case 2:if(b)return a.return(k._fileCheckMap[d]=!0);e=k._fileCheckMap;l=d;return a.yield(Xc.resource(d).exists(),4);case 4:return a.return(e[l]=a.yieldResult)}})};Xc.normalizeHook=function(d,k,n,b){var e=this,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(n&&"cjs"==k)return u.return("cjs");l=e;a=Xc.preNormalize(l,k,n);return u.yield(d(a,n,b),2);case 2:f=u.yieldResult;
m=Xc.postNormalize(l,f||a,!1);q=m.startsWith("file:");l.debug&&console.log("[normalize] "+k+" => "+m);if(Xc.jsExtRe.test(k)||Xc.jsxExtRe.test(k)||Xc.jsonExtRe.test(m)||Xc.nodeModRe.test(m)||Xc.nodeExtRe.test(m)||l.loads&&l.loads[m]){u.jumpTo(3);break}if(Xc.jsExtRe.test(m))return u.yield(Xc.checkExistence(m,l),9);if(m.includes("jspm.dev")||"@empty"==m){u.jumpTo(3);break}return u.yield(Xc.checkExistence(m+".js",l),7);case 7:return u.yieldResult?u.return(m+".js"):u.yield(Xc.checkExistence(m+"/index.js",
l),8);case 8:if(u.yieldResult)return u.return(m+"/index.js");u.jumpTo(3);break;case 9:if(u.yieldResult)return u.return(m);r=m.replace(".js","/index.js");return u.yield(Xc.checkExistence(r,l),10);case 10:return u.yieldResult||!q?u.return(r):u.return(m.replace(".js","/index.node"));case 3:return Xc.jsxJsExtRe.test(m)&&(m=m.replace(".jsx.js",".jsx")),u.return(m)}})};Xc.decanonicalizeHook=function(d,k,n,b){if(k&&k.endsWith("!cjs")){k=k.replace("!cjs","");var e="!cjs"}var l=Xc.preNormalize(this,k,n);d=
d(l,n,b);d=Xc.postNormalize(this,d,!0);e&&(d+=e);this.debug&&console.log("[normalizeSync] "+k+" => "+d);return d};Xc.locateHook=function(d,k){var n,b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return n=$jscomp.makeIterator(k.name.split("!")),b=n.next().value,n.next(),k.name=b,l.yield(d(k),2);e=l.yieldResult;return l.return(e)})};Xc.normalize_doMapWithObject=function(d,k,n){k=n.get(k.map["@env"]||"@system-env");var b;for(b in d){var e=(n="~"==b[0])?b.substr(1):
b,l=k;for(e=e.split(".");e.length;)l=l[e.shift()];if(!n&&l||n&&!l){var a=d[b];break}}if(a&&"string"!==typeof a)throw Error("Unable to map a package conditional to a package conditional.");return a};Xc.normalize_packageOfURL=function(d,k){var n=Object.keys(k.packages||{}).map(function(b){return 0===d.indexOf(b)?{url:b,penalty:d.slice(b.length).length}:null}).filter(function(b){return!!b});return(k=(n=n.length?n.reduce(function(b,e){return b.penalty>e.penalty?e:b}).url:null)&&k.packages[n])?{systemPackage:k,
packageURL:n}:null};Xc.newModule_volatile=function(d,k){var n=Object.freeze;Object.freeze=function(b){return b};d=d(k);Object.freeze=n;return d};Xc.printSystemConfig=LG;Xc.instantiate_triggerOnLoadCallbacks=function(d,k){var n=this;return d(k).then(function(b){var e={};Xc.promise.waitFor(6E4,function(){return n.get(k.name)},e).then(function(l){if(l===e)console.warn("[lively.modules] instantiate_triggerOnLoadCallbacks for "+k.name+" timed out");else{l=k.name;for(var a=Xc.classHolder.module(n,l),f=
n.get("@lively-env").onLoadCallbacks,m=f.length;m--;){var q=f[m],r=q.moduleName,u=q.callback;if((q.resolved?r:n.decanonicalize(r))===l){f.splice(m,1);try{u(a)}catch(v){console.error(v)}}}Xc.emit("lively.modules/moduleloaded",{module:k.name},Date.now(),n);n._loadingIndicator&&(n._loadingIndicator.remove(),n._loadingIndicator=null)}});return b})};Xc.whenLoaded=MG;Xc.loadedModules=NG;Xc.knownModuleNames=OG;Xc.searchLoadedModules=GM;Xc.arr=Qe;Xc.obj=lf;Xc.promise=oe;Xc.removeHook=rc;Xc.installHook=ic;
Xc.isHookInstalled=Nc;Xc.classHolder=gw;Xc.isNode=System.get("@system-env").node;Xc.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;Xc.defaultOptions={notificationLimit:null};Xc.wrapModuleResolution=Pn;Xc.wrapModuleResolution=Pn;Xc.unwrapModuleResolution=ex;Xc.unwrapModuleResolution=ex;Xc.wrapModuleLoad=cx;Xc.wrapResource=Mg;Xc.emit=Jn;Xc.join=jF;Xc.urlResolve=Id;Xc.resource=x;Xc.dotSlashStartRe=/^\.?\//;Xc.trailingSlashRe=/\/$/;Xc.jsExtRe=
/\.js$/;Xc.jsxExtRe=/\.jsx$/;Xc.nodeExtRe=/\.node$/;Xc.jsonExtRe=/\.json$/;Xc.jsonJsExtRe=/(.*\.json)\.js$/i;Xc.jsxJsExtRe=/(.*\.jsx)\.js$/i;Xc.doubleSlashRe=/.\/{2,}/g;Xc.nodeModRe=/@node.*/;Xc.whenLoaded=MG;Xc.whenLoaded=MG;Xc.getSystem=Ty;Xc.getSystem=Ty;Xc.removeSystem=Uy;Xc.removeSystem=Uy;Xc.prepareSystem=KG;Xc.prepareSystem=KG;Xc.printSystemConfig=LG;Xc.printSystemConfig=LG;Xc.livelySystemEnv=JG;Xc.livelySystemEnv=JG;Xc.loadedModules=NG;Xc.loadedModules=NG;Xc.knownModuleNames=OG;Xc.knownModuleNames=
OG;Xc.searchLoadedModules=GM;Xc.searchLoadedModules=GM;var Xf=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/package-registry.js");Xf.isAbsolute=function(d){return d.startsWith("/")||d.startsWith("http:")||d.startsWith("https:")||d.startsWith("file:")||d.match(Xf.urlStartRe)};Xf.ensureResource=function(d){return d.isResource?d:Xf.resource(d)};Xf.semver=UE;Xf.arr=Qe;Xf.obj=lf;Xf.promise=oe;Xf.getPackage=xe;Xf.Package=li;Xf.resource=x;Xf.isURL=Qd;Xf.classHolder=gw;Xf.urlStartRe=/^[a-z\.-_\+]+:/i;
var Oh=function(d,k){k=void 0===k?{}:k;this.System=d;this.packageBaseDirs=k.packageBaseDirs||[];this.devPackageDirs=k.devPackageDirs||[];this.individualPackageDirs=k.individualPackageDirs||[];this._readyPromise=null;this.packageMap={};this._byURL=null};Oh.ofSystem=function(d){var k=d.get("@lively-env").packageRegistry;k||(k=d["__lively.modules__packageRegistry"]=new this(d));return k};Oh.forDirectory=function(d,k){return new this(d,{packageBaseDirs:[Xf.ensureResource(k)]})};Oh.fromJSON=function(d,
k){return(new this(d)).fromJSON(k)};Oh.prototype.resetByURL=function(){this._byURL=null};Oh.prototype.allPackageURLs=function(){return Object.keys(this.byURL)};Oh.prototype.toJSON=function(){function d(r){r=r.url;return r.startsWith(k.baseURL)?r.slice(k.baseURL.length).replace(/^\//,""):r}var k=this.System,n=this.packageMap,b=this.individualPackageDirs,e=this.devPackageDirs,l=this.packageBaseDirs,a={},f;for(f in n){var m=n[f];a[f]={};a[f].latest=m.latest;a[f].versions={};for(var q in m.versions)a[f].versions[q]=
m.versions[q].toJSON()}return{packageMap:a,individualPackageDirs:b.map(d),devPackageDirs:e.map(d),packageBaseDirs:l.map(d)}};Oh.prototype.fromJSON=function(d){function k(r){return Xf.isURL(r)?Xf.resource(r):Xf.resource(b.baseURL).join(r)}var n={},b=this.System,e=Xf.resource(b.baseURL),l;for(l in d.packageMap){var a=d.packageMap[l];n[l]={};n[l].latest=a.latest;n[l].versions={};for(var f in a.versions){var m=a.versions[f],q=m.url;Xf.isAbsolute(q)||(q=e.join(q).url);m=Xf.Package.fromJSON(b,Object.assign({},
m,{url:q}));n[l].versions[f]=m}}this.packageMap=n;this.individualPackageDirs=d.individualPackageDirs.map(k);this.devPackageDirs=d.devPackageDirs.map(k);this.packageBaseDirs=d.packageBaseDirs.map(k);this.resetByURL();Xf.classHolder.ModulePackageMapping.forSystem(b).clearCache();return this};Oh.prototype.updateFromJSON=function(d){var k=this.packageMap,n;for(n in d.packageMap){var b=d.packageMap[n];k[n]||(k[n]={});k[n].latest?Xf.semver.gt(b.latest,k[n].latest)&&(k[n].latest=b.latest):k[n].latest;k[n].versions||
(k[n].versions={});var e=this.System,l=Xf.resource(e.baseURL),a;for(a in b.versions){var f=b.versions[a],m=f.url;Xf.isAbsolute(m)||(m=l.join(m).url);f=new Xf.Package.fromJSON(e,Object.assign({},f,{url:m}));k[n].versions[a]=f}}this.resetByURL();Xf.classHolder.ModulePackageMapping.forSystem(System).clearCache();return this};Oh.prototype.whenReady=function(){return this._readyPromise||Promise.resolve()};Oh.prototype.isReady=function(){return!this._readyPromise};Oh.prototype.withPackagesDo=function(d){for(var k in this.packageMap){var n=
this.packageMap[k].versions,b;for(b in n)d(n[b])}};Oh.prototype.findPackage=function(d){for(var k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n){var e=n[b];if(d(e))return e}}return null};Oh.prototype.filterPackages=function(d){var k=[];this.withPackagesDo(function(n){return d(n)&&k.push(n)});return k};Oh.prototype.allPackages=function(){var d=[],k;for(k in this.packageMap){var n=this.packageMap[k].versions,b;for(b in n)d.push(n[b])}return d};Oh.prototype.sortPackagesByVersion=
function(d){return d.sort(function(k,n){return Xf.semver.compare(k.version,n.version,!0)})};Oh.prototype.matches=function(d,k,n){var b=d.version;return d.name!==k?!1:!n||Xf.semver.validRange(b||"",!0)&&Xf.semver.satisfies(b,n,!0)?!0:!1};Oh.prototype.coversDirectory=function(d){d=Xf.ensureResource(d).asDirectory();var k=this.packageBaseDirs,n=this.devPackageDirs;if(this.individualPackageDirs.some(function(e){return e.equals(d)}))return"individualPackageDirs";if(n.some(function(e){return e.equals(d)}))return"devPackageDirs";
var b=d.parent().parent();return k.some(function(e){return e.equals(b)})?this.allPackages().find(function(e){return Xf.ensureResource(e.url).equals(d)})?"packageCollectionDirs":"maybe packageCollectionDirs":null};Oh.prototype.lookup=function(d,k){var n=this,b=this.packageMap[d];if(!b)return null;if(!k||"latest"===k)return b.versions[b.latest];if(!Xf.semver.validRange(k,!0))throw Error("PackageRegistry>>lookup of "+d+": Invalid version - "+k);b=Xf.obj.values(b.versions).filter(function(e){return n.matches(e,
d,k)});return 1>=b.length?b[0]:Xf.arr.last(this.sortPackagesByVersion(b))};Oh.prototype.findPackageDependency=function(d,k,n){n||(n=d.dependencies[k]||d.devDependencies[k]);Xf.semver.validRange(n,!0)||(n=null);return this.lookup(k,n)};Oh.prototype.findPackageWithURL=function(d){d.isResource&&(d=d.url);d.endsWith("/")&&(d=d.slice(0,-1));return this.byURL[d]};Oh.prototype.findPackageHavingURL=function(d){d.isResource&&(d=d.url);d.endsWith("/")&&(d=d.slice(0,-1));var k=Infinity,n=null,b=this.byURL,e;
for(e in b)if(0===d.indexOf(e)){var l=d.slice(e.length).length;l>=k||(k=l,n=b[e])}return n};Oh.prototype.findPackageForPath=function(d,k){if(Xf.isAbsolute(d))return this.findPackageHavingURL(d);if(d.startsWith("."))return null;d=$jscomp.makeIterator(d.split("/")).next().value;if(!d)return null;var n=d.indexOf("@");if(-1<n){var b=d.slice(n+1);d=d.slice(0,n)}return!b&&k?this.findPackageDependency(k,d):this.lookup(d,b)};Oh.prototype.resolvePath=function(d,k){if(Xf.isAbsolute(d))return d;var n=k&&k.isPackage||
null;if(!n&&k){if(d.startsWith("."))return k=Xf.resource(k),k.isDirectory()||(k=k.parent()),k.join(d).withRelativePartsResolved().url;n=this.findPackageHavingURL(k)}k=this.findPackageForPath(d,n);if(!k)return null;n=d.indexOf("/");return(d=-1===n||n===d.length-1?"":d.slice(n))?Xf.resource(k.url).join(d).url:k.url};Oh.prototype.update=function(){var d=this,k,n,b,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:if(!d.isReady())return J.return(d.whenReady().then(function(){return d.update()}));
k=Xf.promise.deferred();d._readyPromise=k.promise;d.packageBaseDirs=d.packageBaseDirs.map(function(M){return M.asDirectory()});d.individualPackageDirs=d.individualPackageDirs.map(function(M){return M.asDirectory()});d.devPackageDirs=d.devPackageDirs.map(function(M){return M.asDirectory()});n={};J.setCatchFinallyBlocks(2,3);b=$jscomp.makeIterator(d.packageBaseDirs);e=b.next();case 5:if(e.done){J.jumpTo(7);break}l=e.value;a=$jscomp;f=a.makeIterator;return J.yield(l.dirList(1),8);case 8:m=f.call(a,J.yieldResult),
q=m.next();case 9:if(q.done){e=b.next();J.jumpTo(5);break}r=q.value;u=$jscomp;v=u.makeIterator;return J.yield(r.dirList(1),12);case 12:y=v.call(u,J.yieldResult.filter(function(M){return M.isDirectory()})),z=y.next();case 13:if(z.done){q=m.next();J.jumpTo(9);break}B=z.value;return J.yield(d._discoverPackagesIn(B,n,"packageCollectionDirs"),16);case 16:n=J.yieldResult;z=y.next();J.jumpTo(13);break;case 7:C=$jscomp.makeIterator(d.individualPackageDirs),e=C.next();case 17:if(e.done){J.jumpTo(19);break}G=
e.value;return J.yield(d._discoverPackagesIn(G,n,"individualPackageDirs"),20);case 20:n=J.yieldResult;e=C.next();J.jumpTo(17);break;case 19:F=$jscomp.makeIterator(d.devPackageDirs),e=F.next();case 21:if(e.done){J.jumpTo(23);break}N=e.value;return J.yield(d._discoverPackagesIn(N,n,"devPackageDirs"),24);case 24:n=J.yieldResult;e=F.next();J.jumpTo(21);break;case 23:for(L in n)S=n[L],ha=S.pkg,qa=S.config,D=S.covered,d.System.debug&&console.log("[PackageRegistry] Adding discovered package "+L+" (from "+
D+")"),d._addPackageWithConfig(ha,qa,L+"/",D);d._updateLatestPackages();k.resolve();case 3:J.enterFinallyBlock();d._readyPromise=null;d.resetByURL();Xf.classHolder.ModulePackageMapping.forSystem(d.System).clearCache();J.leaveFinallyBlock(4);break;case 2:P=J.enterCatchBlock();k.reject(P);J.jumpTo(3);break;case 4:return J.return(d)}})};Oh.prototype.addPackageAt=function(d,k,n){k=void 0===k?"individualPackageDirs":k;var b=this,e,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress){e=d.isResource?d.url:d;e.endsWith("/")&&e.slice(0,-1);if(b.byURL[e])throw Error("package in "+e+" already added to registry");return u.yield(b._discoverPackagesIn(Xf.ensureResource(d).asDirectory(),{},void 0,n),2)}l=u.yieldResult;for(a in l)b.byURL[a]||(f=l[a],m=f.pkg,q=f.config,r=b._addPackageDir(a,k,!0),b._addPackageWithConfig(m,q,a+"/",r));b.resetByURL();Xf.classHolder.ModulePackageMapping.forSystem(b.System).clearCache();b._updateLatestPackages();return u.return(b.findPackageWithURL(d))})};
Oh.prototype.removePackage=function(d,k){k=void 0===k?!0:k;var n=d.name,b=d.version,e=Xf.ensureResource(d.url),l=this.coversDirectory(e);"devPackageDirs"===l?this.devPackageDirs=this.devPackageDirs.filter(function(a){return!a.equals(e)}):"individualPackageDirs"===l&&(this.individualPackageDirs=this.individualPackageDirs.filter(function(a){return!a.equals(e)}));l=this.packageMap;l[n]&&(delete l[n].versions[b],0===Object.keys(l[n].versions).length&&delete l[n]);this.resetByURL();Xf.classHolder.ModulePackageMapping.forSystem(this.System).clearCache();
k&&this._updateLatestPackages(d.name)};Oh.prototype.updateNameAndVersionOf=function(d,k,n,b,e){var l=this.packageMap;l[k]?l[k].versions[n]||console.warn("[PackageRegistry>>updateNameAndVersionOf] No version entry "+n+" of "+k+" found in registry ("+d.url+")"):console.warn("[PackageRegistry>>updateNameAndVersionOf] "+k+"@"+n+" not found in registry ("+d.url+")");this._addToPackageMap(d,b,e);l[k]&&l[k].versions[n]&&(delete l[k].versions[n],0===Object.keys(l[k].versions).length&&delete l[k]);this._updateLatestPackages(d.name)};
Oh.prototype._updateLatestPackages=function(d){var k=this.packageMap;if(d&&k[d])k[d].latest=Xf.arr.last(Xf.semver.sort(Object.keys(k[d].versions),!0));else for(var n in k)k[n].latest=Xf.arr.last(Xf.semver.sort(Object.keys(k[n].versions),!0))};Oh.prototype._discoverPackagesIn=function(d,k,n,b){b=void 0===b?null:b;var e=this,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!d.isDirectory())return u.return(k);l=d.asFile().url;if(k.hasOwnProperty(l))return u.return(k);
u.setCatchFinallyBlocks(2);a=b&&b[l]||new Xf.Package(e.System,l);return u.yield(a.tryToLoadPackageConfig(),4)}if(2!=u.nextAddress)return f=u.yieldResult,a.setConfig(f),k[l]={pkg:a,config:f,covered:n},e.System.debug&&(m=f,q=m.name,r=m.version,console.log("[lively.modules] package "+q+"@"+r+" discovered in "+d.url)),u.return(k);u.enterCatchBlock();return u.return(k)})};Oh.prototype._addToPackageMap=function(d,k,n,b){if(!k)throw Error("Cannot add package without name");n||(n="0.0.0");var e=this.packageMap;
k=e[k]||(e[k]={versions:{},latest:null});if(k.versions[n])if(e="Redefining version "+n+" of package "+d.url,void 0===b||b)console.warn(e);else throw Error(e+" not allowed");k.versions[n]=d};Oh.prototype._addPackageWithConfig=function(d,k,n,b){(void 0===b?0:b)||this._addPackageDir(n,"individualPackageDirs",!0);d.registerWithConfig(k);this._addToPackageMap(d,d.name,d.version);return d};Oh.prototype._addPackageDir=function(d,k,n){k=void 0===k?"individualPackageDirs":k;n=void 0===n?!0:n;d=Xf.ensureResource(d).asDirectory();
if(("packageCollectionDirs"===k||"maybe packageCollectionDirs"===k)&&(this.coversDirectory(d)||"").includes("packageCollectionDirs"))return"packageCollectionDirs";d=this[k].concat(d);this[k]=n?Xf.arr.uniqBy(d,function(b,e){return b.equals(e)}):d;return k};$jscomp.global.Object.defineProperties(Oh.prototype,{byURL:{configurable:!0,enumerable:!0,get:function(){if(!this._byURL){this._byURL={};for(var d=$jscomp.makeIterator(this.allPackages()),k=d.next();!k.done;k=d.next())k=k.value,this._byURL[k.url]=
k}return this._byURL}}});Xf.PackageRegistry=Oh;var qm=lively.FreezerRuntime.recorderFor("lively.modules/src/export-lookup.js");qm.arr=Qe;qm.obj=lf;qm.subscribe=Hn;qm.unsubscribe=vo;qm.module=Co;var Rm=function(d){this.System=d;this.subscribeToSystemChanges()};Rm.forSystem=function(d){this._forSystemMap||(this._forSystemMap=new WeakMap);var k=this._forSystemMap.get(d);if(k)return k;k=new this(d);this._forSystemMap.set(d,k);return k};Rm.run=function(d,k){d=void 0===d?System:d;return this.forSystem(d).systemExports(k)};
Rm.findExportOfValue=function(d,k){k=void 0===k?System:k;var n=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(n.run(k),2);b=e.yieldResult;return e.return(b.find(function(l){var a=l.local;l=qm.module(k,l.moduleId);l=l.recorder||k.get(l.id)||{};try{return l[a]===d}catch(f){return!1}}))})};Rm.prototype.subscribeToSystemChanges=function(){var d=this;if(!this._notificationHandlers){var k=this.System;this._notificationHandlers=[qm.subscribe("lively.modules/moduleloaded",
function(n){return d.clearCacheFor(n.module)},k),qm.subscribe("lively.modules/modulechanged",function(n){return d.clearCacheFor(n.module)},k),qm.subscribe("lively.vm/doitresult",function(n){return d.clearCacheFor(n.targetModule)},k)]}};Rm.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var d=this.System;qm.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],d);qm.unsubscribe("lively.modules/modulechanged",this._notificationHandlers[1],d);qm.unsubscribe("lively.vm/doitresult",
this._notificationHandlers[2],d);this._notificationHandlers=null}};Rm.prototype.clearCacheFor=function(d){this.exportByModuleCache[d]=null};Rm.prototype.systemExports=function(d){var k=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return b.yield(k.rawExportsByModule(d),2);n=b.yieldResult;Object.keys(n).forEach(function(e){return k.resolveExportsOfModule(e,n)});return b.return(qm.arr.flatmap(Object.keys(n),function(e){return n[e]?n[e].resolvedExports||n[e].rawExports:
[]}))})};Rm.prototype.rawExportsByModule=function(d){var k=this,n,b,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(d=d||{},n=k.System,b=n.get("@lively-env")||{},e=Object.keys(b.loadedModules||{}),l={},a=function(m){1>m%50&&d.progress.step&&d.progress.step("Scanning ...",m/e.length)},f.yield(Promise.all(e.map(function(m,q){d.progress&&a(q);return k.rawExportsOfModule(m,d,l).then(function(r){return r?l[m]=r:null})})),2)):f.return(l)})};Rm.prototype.rawExportsOfModule=
function(d,k){k=void 0===k?{}:k;var n=this,b,e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:b=n;e=b.System;l=b.exportByModuleCache;a=k.excludedPackages||[];f=k.excludedURLs||(k.excludedURLs=a.filter(function(J){return"string"===typeof J}));m=k.excludeFns||(k.excludeFns=a.filter(function(J){return"function"===typeof J}));q=k.excludedPackageURLs||(k.excludedPackageURLs=f.concat(f.map(function(J){return e.decanonicalize(J.replace(/\/?$/,
"/")).replace(/\/$/,"")})));r=k.livelyEnv||(k.livelyEnv=e.get("@lively-env")||{});k.modes||(k.modes=Object.keys(r.loadedModules||{}));if(l[d])return u=l[d].rawExports,P.return(q.includes(u.packageURL)||m.some(function(J){return J(u.packageURL)})?null:l[d]);v=qm.module(e,d);y=v.pathInPackage();B=(z=v.package())&&z.main&&y===z.main;C=z?z.url:"";G=z?z.name:"";F=z?z.version:"";N={moduleId:d,isMain:B,pathInPackage:y,packageName:G,packageURL:C,packageVersion:F,exports:[]};if(q.includes(C)||m.some(function(J){return J(C)}))return P.return(null);
P.setCatchFinallyBlocks(2);L=v.format();return["register","es6","esm"].includes(L)?(qa=N,P.yield(v.exports(),7)):P.yield(v.load(),6);case 6:S=P.yieldResult;N.exports=[];for(ha in S)"__useDefault"!==ha&&"default"!==ha&&N.exports.push({exported:ha,local:ha,type:"id"});P.jumpTo(5);break;case 7:qa.exports=P.yieldResult;case 5:P.leaveTryBlock(3);break;case 2:D=P.enterCatchBlock(),N.error=D;case 3:return P.return(l[d]={rawExports:N})}})};Rm.prototype.resolveExportsOfModule=function(d,k,n){var b=this;n=
void 0===n?{}:n;if(!n[d]){n[d]=!0;var e=k[d];if(e&&!e.resolvedExports){var l=this.System,a=qm.obj.select(e.rawExports,"moduleId isMain packageName packageURL packageVersion pathInPackage".split(" "));e.resolvedExports=qm.arr.flatmap(e.rawExports.exports,function(f){var m=f.type,q=f.exported,r=f.local,u=f.fromModule;if("all"!==m)return[Object.assign({},a,{type:m,exported:q,local:r,fromModule:u})];f=l.decanonicalize(u,d);b.resolveExportsOfModule(f,k,n);return(k[f]&&k[f].resolvedExports||[]).map(function(v){return Object.assign({},
a,{type:v.type,exported:v.exported,local:v.local,fromModule:v.fromModule||u})})});n[d]=!1}}};$jscomp.global.Object.defineProperties(Rm.prototype,{exportByModuleCache:{configurable:!0,enumerable:!0,get:function(){return this._exportByModuleCache||(this._exportByModuleCache={})}}});wa("bI",Rm);qm.ExportLookup=Rm;qm.default=Rm;var wl=lively.FreezerRuntime.recorderFor("lively.modules/cjs/dependencies.js");wl.buildPackageMap=nD;wl.resolvePackageDependencies=PG;wl.dependencyGraph=QG;wl.arr=Qe;wl.fun=Zk;
wl.promise=oe;wl.obj=lf;wl.resource=x;wl.buildPackageMap=nD;wl.buildPackageMap=nD;wl.resolvePackageDependencies=PG;wl.resolvePackageDependencies=PG;wl.dependencyGraph=QG;wl.dependencyGraph=QG;var AK=Object.freeze({__proto__:null,buildPackageMap:nD,resolvePackageDependencies:PG,dependencyGraph:QG}),rm=lively.FreezerRuntime.recorderFor("lively.modules/src/packages/module-package-mapping.js");rm.arr=Qe;rm.unsubscribe=vo;rm.subscribe=Hn;rm.knownModuleNames=OG;rm.classHolder=gw;var pr=function(d){this.System=
d;this._notificationHandlers=null;this.clearCache();this.subscribeToSystemChanges()};pr.forSystem=function(d){var k=d["__lively.modules__modulePackageMapCache"];if(k)return k;k=new this(d);return d["__lively.modules__modulePackageMapCache"]=k};pr.prototype.subscribeToSystemChanges=function(){var d=this;if(!this._notificationHandlers){var k=this.System;this._notificationHandlers=[rm.subscribe("lively.modules/moduleloaded",function(n){return d.addModuleIdToCache(n.module)},k),rm.subscribe("lively.modules/moduleunloaded",
function(n){return d.removeModuleFromCache(n.module)},k),rm.subscribe("lively.modules/packageregistered",function(n){return d.clearCache()},k),rm.subscribe("lively.modules/packageremoved",function(n){return d.clearCache()},k)]}};pr.prototype.unsubscribeFromSystemChanges=function(){if(this._notificationHandlers){var d=this.System;rm.unsubscribe("lively.modules/moduleloaded",this._notificationHandlers[0],d);rm.unsubscribe("lively.modules/moduleunloaded",this._notificationHandlers[1],d);rm.unsubscribe("lively.modules/packageregistered",
this._notificationHandlers[2],d);rm.unsubscribe("lively.modules/packageremoved",this._notificationHandlers[3],d);this._notificationHandlers=null}};pr.prototype.clearCache=function(){this._cacheInitialized=!1;this.packageToModule={};this.modulesToPackage={};this.modulesWithoutPackage={}};pr.prototype.ensureCache=function(){var d=this.System,k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(this._cacheInitialized)return this;for(var e=rm.classHolder.Package.allPackageURLs(d),
l=0;l<e.length;l++)k[e[l]]=[];d=rm.knownModuleNames(d);for(l=0;l<d.length;l++){for(var a=d[l],f=void 0,m=0;m<e.length;m++){var q=e[m];a.startsWith(q)&&(!f||f.length<q.length)&&(f=q)}f?(k[f].push(a),n[a]=f):b[a]={}}this._cacheInitialized=!0;return this};pr.prototype.addModuleIdToCache=function(d){this.ensureCache();var k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(n[d])return n[d];if(b[d])return null;for(var e=Object.keys(k),l,a=0;a<e.length;a++){var f=e[a];d.startsWith(f)&&
(!l||l.length<f.length)&&(l=f)}if(l)return(k[l]||(k[l]=[])).push(d),n[d]=l;b[d]={};return null};pr.prototype.removeModuleFromCache=function(d){if(this._cacheInitialized){var k=this.packageToModule,n=this.modulesToPackage,b=this.modulesWithoutPackage;if(b.hasOwnProperty(d))delete b[d];else if(b=n[d])delete n[d],k[b]&&rm.arr.remove(k[b],d)}};pr.prototype.getPackageURLForModuleId=function(d){return this.modulesToPackage[d]||this.addModuleIdToCache(d)};pr.prototype.getModuleIdsForPackageURL=function(d){this.ensureCache();
return this.packageToModule[d]||[]};rm.ModulePackageMapping=pr;rm.default=pr;var tc=lively.FreezerRuntime.recorderFor("lively.modules/index.js");tc.changeSystem=RG;tc.wrapModuleResolution=SG;tc.unwrapModuleResolution=TG;tc.loadedModules=UG;tc.module=oD;tc.isModuleLoaded=VG;tc.doesModuleExist=WG;tc.printSystemConfig=XG;tc.whenLoaded=YG;tc.importPackage=ZG;tc.registerPackage=$G;tc.removePackage=aH;tc.reloadPackage=bH;tc.getPackages=cH;tc.getPackage=dH;tc.getPackageOfModule=eH;tc.ensurePackage=fH;tc.applyPackageConfig=
gH;tc.lookupPackage=hH;tc.moduleSourceChange=iH;tc.requireMap=jH;tc.isHookInstalled=kH;tc.installHook=lH;tc.removeHook=mH;tc.wrapModuleLoad=nH;tc.unwrapModuleLoad=oH;tc.getSystem=Ty;tc.removeSystem=Uy;tc.prepareSystem=KG;tc._printSystemConfig=LG;tc._unwrapModuleResolution=ex;tc._wrapModuleResolution=Pn;tc._whenLoaded=MG;tc._module=Co;tc._doesModuleExist=bs;tc._isModuleLoaded=as;tc.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;tc.defaultSystem=
tc.defaultSystem||tc.prepareSystem(tc.GLOBAL.System);var wR=tc.defaultSystem;tc.System=wR;tc.defaultSystem=wR;tc.getSystem=Ty;tc.getSystem=Ty;tc.removeSystem=Uy;tc.removeSystem=Uy;tc.loadedModules=UG;tc.loadedModules=UG;tc.printSystemConfig=XG;tc.printSystemConfig=XG;tc.whenLoaded=YG;tc.whenLoaded=YG;tc.changeSystem=RG;tc.changeSystem=RG;tc.module=oD;tc.module=oD;tc.doesModuleExist=WG;tc.doesModuleExist=WG;tc.isModuleLoaded=VG;tc.isModuleLoaded=VG;tc.unwrapModuleResolution=TG;tc.unwrapModuleResolution=
TG;tc.wrapModuleResolution=SG;tc.wrapModuleResolution=SG;tc.Package=li;tc._getPackage=xe;tc._ensurePackage=se;tc.getPackageSpecs=jg;tc._applyPackageConfig=$e;tc._importPackage=ug;tc._removePackage=Ji;tc._reloadPackage=Ci;tc._registerPackage=Rh;tc._lookupPackage=Zd;tc.importPackage=ZG;tc.importPackage=ZG;tc.registerPackage=$G;tc.registerPackage=$G;tc.removePackage=aH;tc.removePackage=aH;tc.reloadPackage=bH;tc.reloadPackage=bH;tc.getPackages=cH;tc.getPackages=cH;tc.getPackage=dH;tc.getPackage=dH;tc.getPackageOfModule=
eH;tc.getPackageOfModule=eH;tc.ensurePackage=fH;tc.ensurePackage=fH;tc.applyPackageConfig=gH;tc.applyPackageConfig=gH;tc.lookupPackage=hH;tc.lookupPackage=hH;tc.PackageRegistry=Oh;tc.PackageRegistry=Oh;tc.PackageRegistry=Oh;tc._moduleSourceChange=qd;tc.moduleSourceChange=iH;tc.moduleSourceChange=iH;tc.computeRequireMap=wc;tc.requireMap=jH;tc.requireMap=jH;tc._isHookInstalled=Nc;tc._installHook=ic;tc._removeHook=rc;tc.isHookInstalled=kH;tc.isHookInstalled=kH;tc.installHook=lH;tc.installHook=lH;tc.removeHook=
mH;tc.removeHook=mH;tc._wrapModuleLoad=cx;tc._unwrapModuleLoad=dx;tc.wrapModuleLoad=nH;tc.wrapModuleLoad=nH;tc.unwrapModuleLoad=oH;tc.unwrapModuleLoad=oH;tc.default=Rm;tc.ExportLookup=Rm;tc.cjs=AK;tc.cjs=AK;tc.cjs=AK;tc.default=UE;tc.semver=UE;tc.ImportInjector=ru;tc.scripting=tc.defaultSystem._scripting={module:tc._module,ensurePackage:tc._ensurePackage,registerPackage:tc._registerPackage,importPackage:tc._importPackage,lookupPackage:tc._lookupPackage,ImportInjector:tc.ImportInjector};tc.defaultClassToFunctionConverterName=
"initializeES6ClassForLively";tc.classRuntime=iC;tc.defaultSystem.global[tc.defaultClassToFunctionConverterName]=tc.classRuntime.initializeClass;tc.classHolder=gw;tc.ModulePackageMapping=pr;tc.classHolder.ModulePackageMapping=tc.ModulePackageMapping;tc.classHolder.Package=tc.Package;tc.classHolder.PackageRegistry=tc.PackageRegistry;var xR=wa("bH",tc.scripting);tc.scripting=xR;tc.scripting=xR;var BK=Object.freeze({__proto__:null,System:wR,getSystem:Ty,removeSystem:Uy,loadedModules:UG,printSystemConfig:XG,
whenLoaded:YG,changeSystem:RG,module:oD,doesModuleExist:WG,isModuleLoaded:VG,unwrapModuleResolution:TG,wrapModuleResolution:SG,importPackage:ZG,registerPackage:$G,removePackage:aH,reloadPackage:bH,getPackages:cH,getPackage:dH,getPackageOfModule:eH,ensurePackage:fH,applyPackageConfig:gH,lookupPackage:hH,PackageRegistry:Oh,moduleSourceChange:iH,requireMap:jH,isHookInstalled:kH,installHook:lH,removeHook:mH,wrapModuleLoad:nH,unwrapModuleLoad:oH,ExportLookup:Rm,cjs:AK,semver:UE,scripting:xR});wa("T",BK);
var Jl=lively.FreezerRuntime.recorderFor("lively.morphic/object-migration.js");Jl.isReference=HM;Jl.removeUnreachableObjects=Yr;Jl.obj=lf;Jl.Path=Cg;Jl.connect=Oe;Jl.disconnectAll=jp;Jl.isReference=HM;Jl.isReference=HM;var CK=[{date:"2017-04-08",name:"Text and Label textAndAttributes format change",description:"\nChanging the format from\n  [[string1, attr1_1, attr1_2], [string2, attr2_1, attr2_2], ...]\nto\n  [string1, attr1, string2, attr2, ...].\n    ",snapshotConverter:function(d){var k=d.snapshot,
n;for(n in k){var b=k[n],e=b.props&&b.props.textAndAttributes;if(e){var l=e.value;if(!Array.isArray(l))console.warn("object migrator found textAndAttributes field but it is not an Array!");else if(l.length&&"string"!==typeof l[0]){l=[].concat.apply([],l);for(var a=0;a<l.length;a+=2){var f=l[a+1];f&&Array.isArray(f)&&(l[a+1]=Object.assign.apply(Object,[{}].concat($jscomp.arrayFromIterable(f))))}b.props.textAndAttributes=Object.assign({},e,{value:l})}}}return d}},{date:"2017-04-29",name:"Window button fix",
description:'\nA recent change in the structure of windows, that now adds a "button wrapper"\nmorph breaks old windows without it.\n',objectConverter:function(d,k){(k=k.refForId(d.id).realObj)&&k.isMorph&&k.withAllSubmorphsDo(function(n){n.isWindow&&(n.submorphs.some(function(b){return"button wrapper"===b.name})&&n.get("button wrapper").submorphs.some(function(b){return"window menu button"===b.name}),n.minimizedBounds=null,Jl.disconnectAll(n.get("minimize")),Jl.connect(n.get("minimize"),"onMouseDown",
n,"minimized",{updater:function(b){b(!this.targetObj.minimized)}}))});return d}},{date:"2017-05-03",name:"Style Sheet Status Fix",description:"\nState management of the style sheets has changes substantially, moving all of the style sheets that are being applied to the world.\n",snapshotConverter:function(d){var k=d.id,n=d.snapshot,b;for(b in n){var e=n[b].props;e&&e.styleSheets&&(e.styleSheets.value||(e.styleSheets.value=[]),e.styleSheets.value=e.styleSheets.value&&e.styleSheets.value.filter(function(l){l=
n[l.id];var a=n[l.props.rules.value.id];return!l.props.styledMorphs&&!("lively.serializer-class-info"in a)}))}Jl.removeUnreachableObjects([k],n);return d}},{date:"2017-05-22",name:"Removal of ChromeTheme and GithubTheme",description:"\nFor now only a simple default theme...\n",snapshotConverter:function(d){var k=d.snapshot,n;for(n in k){var b=k[n],e=b["lively.serializer-class-info"];e&&("ChromeTheme"===e.className||"GithubTheme"===e.className?(e.className="DefaultTheme",e.module.pathInPackage="ide/themes/default.js"):
"JavaScriptTokenizer"===e.className&&delete b["lively.serializer-class-info"])}return d}},{date:"2017-06-20",name:"Unwrapped Style Sheet Props",description:"Style Sheets now store foldable props in their nested format.",objectConverter:function(d,k){(k=k.refForId(d.id).realObj)&&k.isMorph&&k.withAllSubmorphsDo(function(n){n.styleSheets&&0<n.styleSheets.length&&n.styleSheets.forEach(function(b){for(var e in Jl.obj.dissoc(b.rules,["_rev"]))b.rules[e]=b.unwrapFoldedProps(b.rules[e])})});return d}},{date:"2017-07-13",
name:"Renamed style-rules.js to style-sheets.js",snapshotConverter:function(d){var k=d.snapshot,n;for(n in k){var b=k[n]["lively.serializer-class-info"];b&&"StyleSheet"===b.className&&(b.module.pathInPackage="style-sheets.js")}return d}},{date:"2017-07-26",name:"components, ide, and halo extraction",snapshotConverter:function(d){var k=d.snapshot,n=d.packages,b=n&&n["local://lively-object-modules/"]||{};n=[["lively.morphic/halo","lively.halos"],["lively.morphic/components/markers.js","lively.halos"],
["lively.morphic/components/icons.js","lively.morphic"],["lively.morphic/components/loading-indicator.js","lively.components",function(v){return"{"+v+"}"}],["lively.morphic/components","lively.components"],["lively.components/markers.js","lively.halos"],["lively.morphic/ide","lively.ide"],["lively.morphic/text/ui.js","lively.ide",null,"text/ui.js"]];for(var e in b){for(var l=b[e]["index.js"],a=$jscomp.makeIterator(n),f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value),q=m.next().value;
f=m.next().value;if(m=m.next().value){q=new RegExp('(import\\s)(.*)(\\sfrom \\"'+q+")","g");var r=q.exec(l);r&&(l=l.replace(q,"import "+m(r[2])+'from "'+f))}else l=l.replace(new RegExp(q,"g"),f)}b[e]["index.js"]=l}for(var u in k)if((e=k[u]["lively.serializer-class-info"])&&e.module)for(b=e.module.package.name+"/"+e.module.pathInPackage,l=$jscomp.makeIterator(n),a=l.next();!a.done;a=l.next())if(m=$jscomp.makeIterator(a.value),a=m.next().value,f=m.next().value,m.next(),m=m.next().value,b.includes(a)){e.module.package.name=
f;e.module.package.version="0.1.0";e.module.pathInPackage=m||b.substring(b.indexOf(a)+a.length+1)||"index.js";break}return d}},{date:"2017-10-16",name:"change scroll implementation of list items",objectConverter:function(d,k){k=$jscomp.makeIterator(k.objectRefs());for(var n=k.next();!n.done;n=k.next())n=n.value.realObj,n.isList&&"function"===typeof n.initializeSubmorphs&&n.initializeSubmorphs();return d}},{date:"2017-10-30",name:"change implementation of tree",snapshotConverter:function(d){var k=
d.snapshot,n;for(n in k){var b=k[n],e=b["lively.serializer-class-info"];e&&e.module&&("Tree"==e.className&&b.props.submorphs&&(b.props.submorphs.value=[]),"TreeNode"==e.className&&delete k[n],"InspectorTreeData"==e.className&&delete k[n],["PropertyNode","InspectionNode","MorphNode","FoldedNode"].includes(e.className)&&(e.module.pathInPackage="js/inspector/context.js"),"nodeItemContainer"==b.props.name&&delete k[n])}return d}},{date:"2019-02-17",name:"change storage of commit metadata",snapshotConverter:function(d){var k=
d.id,n=d.snapshot;Object.values(n).map(function(b){if(b.props.metadata&&Jl.isReference(b.props.metadata.value)&&(b=n[b.props.metadata.value.id],b.props.commit&&Jl.isReference(b.props.commit.value))){var e=n[b.props.commit.value.id].props,l=e.type,a=e.name;e=e._id;l&&a&&e&&(b.props.commit.value='__lv_expr__:({type: "'+l.value+'", name: "'+a.value+'", _id: "'+e.value+'"})')}});Jl.removeUnreachableObjects([k],n);return d}},{date:"2019-07-25",name:"world superclass extraction",snapshotConverter:function(d){var k=
d.packages,n,b=Jl.Path(["local://lively-object-modules/","EmptyWorld","index.js"]);if(n=b.get(k))n=n.replace('import { World, morph } from "lively.morphic";','import { morph } from "lively.morphic";\nimport { LivelyWorld as World } from "lively.ide/world.js"').replace('import { World } from "lively.morphic";','import { LivelyWorld as World } from "lively.ide/world.js"'),b.set(k,n);return d}},{date:"2019-08-05",name:"remove Camphor from system",snapshotConverter:function(d){Object.values(d.snapshot).map(function(k){k.props.fontFamily&&
"Camphor"==k.props.fontFamily.value&&(k.props.fontFamily.value="Nunito")});return d}},{date:"2020-10-09",name:"remove style guide",snapshotConverter:function(d){var k=d.snapshot;Object.values(k).map(function(n){n.props.master&&"string"===typeof n.props.master.value&&(n.props.master.value=n.props.master.value.split("styleguide://style guide").join("styleguide://System"));n.props.master&&n.props.master.value.id&&(n=k[n.props.master.value.id],n.props.auto.value=n.props.auto.value.split("styleguide://style guide").join("styleguide://System"))});
return d}}];Jl.migrations=CK;Jl.migrations=CK;Jl.migrations=CK;var su="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Gha={},B3=su.MutationObserver||su.WebKitMutationObserver;if(B3){var C3=0,Hha=new B3(pH),D3=su.document.createTextNode("");Hha.observe(D3,{characterData:!0});var yR=function(){D3.data=C3=++C3%2}}else if(su.setImmediate||"undefined"===typeof su.MessageChannel)yR="document"in su&&"onreadystatechange"in su.document.createElement("script")?function(){var d=
su.document.createElement("script");d.onreadystatechange=function(){pH();d.onreadystatechange=null;d.parentNode.removeChild(d);d=null};su.document.documentElement.appendChild(d)}:function(){setTimeout(pH,0)};else{var E3=new su.MessageChannel;E3.port1.onmessage=pH;yR=function(){E3.port2.postMessage(0)}}var IM,pD=[],Iha=Gha=function(d){1!==pD.push(d)||IM||yR()},zR={},F3="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==
typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(F3){var G3=new Uint8Array(16);zR=function(){F3(G3);return G3}}else{var H3=Array(16);zR=function(){for(var d=0,k;16>d;d++)0===(d&3)&&(k=4294967296*Math.random()),H3[d]=k>>>((d&3)<<3)&255;return H3}}for(var I3=zR,Jha={},Sm=[],DK=0;256>DK;++DK)Sm[DK]=(DK+256).toString(16).substr(1);var J3=Jha=function(d,k){k=k||0;return[Sm[d[k++]],Sm[d[k++]],Sm[d[k++]],Sm[d[k++]],"-",Sm[d[k++]],Sm[d[k++]],"-",Sm[d[k++]],Sm[d[k++]],"-",
Sm[d[k++]],Sm[d[k++]],"-",Sm[d[k++]],Sm[d[k++]],Sm[d[k++]],Sm[d[k++]],Sm[d[k++]],Sm[d[k++]]].join("")},Kha={},K3,AR,BR=0,CR=0,Lha=Kha=function(d,k,n){n=k&&n||0;var b=k||[];d=d||{};var e=d.node||K3,l=void 0!==d.clockseq?d.clockseq:AR;if(null==e||null==l){var a=I3();null==e&&(e=K3=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]);null==l&&(l=AR=(a[6]<<8|a[7])&16383)}a=void 0!==d.msecs?d.msecs:(new Date).getTime();var f=void 0!==d.nsecs?d.nsecs:CR+1,m=a-BR+(f-CR)/1E4;0>m&&void 0===d.clockseq&&(l=l+1&16383);(0>m||a>
BR)&&void 0===d.nsecs&&(f=0);if(1E4<=f)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");BR=a;CR=f;AR=l;a+=122192928E5;d=(1E4*(a&268435455)+f)%4294967296;b[n++]=d>>>24&255;b[n++]=d>>>16&255;b[n++]=d>>>8&255;b[n++]=d&255;d=a/4294967296*1E4&268435455;b[n++]=d>>>8&255;b[n++]=d&255;b[n++]=d>>>24&15|16;b[n++]=d>>>16&255;b[n++]=l>>>8|128;b[n++]=l&255;for(l=0;6>l;++l)b[n+l]=e[l];return k?k:J3(b)},L3={};L3=function(d,k,n){n=k&&n||0;"string"==typeof d&&(k="binary"===d?Array(16):null,d=null);d=
d||{};d=d.random||(d.rng||I3)();d[6]=d[6]&15|64;d[8]=d[8]&63|128;if(k)for(var b=0;16>b;++b)k[n+b]=d[b];return k||J3(d)};var Mha={},DR=L3;DR.v1=Lha;var Nha=Mha=DR.v4=DR,Vg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Oha={},Pha=Oha=function(d){function k(r,u){var v=r[0],y=r[1],z=r[2],B=r[3];v+=(y&z|~y&B)+u[0]-680876936|0;v=(v<<7|v>>>25)+y|0;B+=(v&y|~v&z)+u[1]-389564586|0;B=(B<<12|B>>>20)+v|0;z+=(B&v|~B&y)+u[2]+606105819|0;z=(z<<17|z>>>15)+B|0;y+=(z&B|~z&v)+u[3]-
1044525330|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&B)+u[4]-176418897|0;v=(v<<7|v>>>25)+y|0;B+=(v&y|~v&z)+u[5]+1200080426|0;B=(B<<12|B>>>20)+v|0;z+=(B&v|~B&y)+u[6]-1473231341|0;z=(z<<17|z>>>15)+B|0;y+=(z&B|~z&v)+u[7]-45705983|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&B)+u[8]+1770035416|0;v=(v<<7|v>>>25)+y|0;B+=(v&y|~v&z)+u[9]-1958414417|0;B=(B<<12|B>>>20)+v|0;z+=(B&v|~B&y)+u[10]-42063|0;z=(z<<17|z>>>15)+B|0;y+=(z&B|~z&v)+u[11]-1990404162|0;y=(y<<22|y>>>10)+z|0;v+=(y&z|~y&B)+u[12]+1804603682|0;v=(v<<7|v>>>25)+y|
0;B+=(v&y|~v&z)+u[13]-40341101|0;B=(B<<12|B>>>20)+v|0;z+=(B&v|~B&y)+u[14]-1502002290|0;z=(z<<17|z>>>15)+B|0;y+=(z&B|~z&v)+u[15]+1236535329|0;y=(y<<22|y>>>10)+z|0;v+=(y&B|z&~B)+u[1]-165796510|0;v=(v<<5|v>>>27)+y|0;B+=(v&z|y&~z)+u[6]-1069501632|0;B=(B<<9|B>>>23)+v|0;z+=(B&y|v&~y)+u[11]+643717713|0;z=(z<<14|z>>>18)+B|0;y+=(z&v|B&~v)+u[0]-373897302|0;y=(y<<20|y>>>12)+z|0;v+=(y&B|z&~B)+u[5]-701558691|0;v=(v<<5|v>>>27)+y|0;B+=(v&z|y&~z)+u[10]+38016083|0;B=(B<<9|B>>>23)+v|0;z+=(B&y|v&~y)+u[15]-660478335|
0;z=(z<<14|z>>>18)+B|0;y+=(z&v|B&~v)+u[4]-405537848|0;y=(y<<20|y>>>12)+z|0;v+=(y&B|z&~B)+u[9]+568446438|0;v=(v<<5|v>>>27)+y|0;B+=(v&z|y&~z)+u[14]-1019803690|0;B=(B<<9|B>>>23)+v|0;z+=(B&y|v&~y)+u[3]-187363961|0;z=(z<<14|z>>>18)+B|0;y+=(z&v|B&~v)+u[8]+1163531501|0;y=(y<<20|y>>>12)+z|0;v+=(y&B|z&~B)+u[13]-1444681467|0;v=(v<<5|v>>>27)+y|0;B+=(v&z|y&~z)+u[2]-51403784|0;B=(B<<9|B>>>23)+v|0;z+=(B&y|v&~y)+u[7]+1735328473|0;z=(z<<14|z>>>18)+B|0;y+=(z&v|B&~v)+u[12]-1926607734|0;y=(y<<20|y>>>12)+z|0;v+=(y^z^
B)+u[5]-378558|0;v=(v<<4|v>>>28)+y|0;B+=(v^y^z)+u[8]-2022574463|0;B=(B<<11|B>>>21)+v|0;z+=(B^v^y)+u[11]+1839030562|0;z=(z<<16|z>>>16)+B|0;y+=(z^B^v)+u[14]-35309556|0;y=(y<<23|y>>>9)+z|0;v+=(y^z^B)+u[1]-1530992060|0;v=(v<<4|v>>>28)+y|0;B+=(v^y^z)+u[4]+1272893353|0;B=(B<<11|B>>>21)+v|0;z+=(B^v^y)+u[7]-155497632|0;z=(z<<16|z>>>16)+B|0;y+=(z^B^v)+u[10]-1094730640|0;y=(y<<23|y>>>9)+z|0;v+=(y^z^B)+u[13]+681279174|0;v=(v<<4|v>>>28)+y|0;B+=(v^y^z)+u[0]-358537222|0;B=(B<<11|B>>>21)+v|0;z+=(B^v^y)+u[3]-722521979|
0;z=(z<<16|z>>>16)+B|0;y+=(z^B^v)+u[6]+76029189|0;y=(y<<23|y>>>9)+z|0;v+=(y^z^B)+u[9]-640364487|0;v=(v<<4|v>>>28)+y|0;B+=(v^y^z)+u[12]-421815835|0;B=(B<<11|B>>>21)+v|0;z+=(B^v^y)+u[15]+530742520|0;z=(z<<16|z>>>16)+B|0;y+=(z^B^v)+u[2]-995338651|0;y=(y<<23|y>>>9)+z|0;v+=(z^(y|~B))+u[0]-198630844|0;v=(v<<6|v>>>26)+y|0;B+=(y^(v|~z))+u[7]+1126891415|0;B=(B<<10|B>>>22)+v|0;z+=(v^(B|~y))+u[14]-1416354905|0;z=(z<<15|z>>>17)+B|0;y+=(B^(z|~v))+u[5]-57434055|0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~B))+u[12]+1700485571|
0;v=(v<<6|v>>>26)+y|0;B+=(y^(v|~z))+u[3]-1894986606|0;B=(B<<10|B>>>22)+v|0;z+=(v^(B|~y))+u[10]-1051523|0;z=(z<<15|z>>>17)+B|0;y+=(B^(z|~v))+u[1]-2054922799|0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~B))+u[8]+1873313359|0;v=(v<<6|v>>>26)+y|0;B+=(y^(v|~z))+u[15]-30611744|0;B=(B<<10|B>>>22)+v|0;z+=(v^(B|~y))+u[6]-1560198380|0;z=(z<<15|z>>>17)+B|0;y+=(B^(z|~v))+u[13]+1309151649|0;y=(y<<21|y>>>11)+z|0;v+=(z^(y|~B))+u[4]-145523070|0;v=(v<<6|v>>>26)+y|0;B+=(y^(v|~z))+u[11]-1120210379|0;B=(B<<10|B>>>22)+v|0;z+=(v^
(B|~y))+u[2]+718787259|0;z=(z<<15|z>>>17)+B|0;y+=(B^(z|~v))+u[9]-343485551|0;r[0]=v+r[0]|0;r[1]=((y<<21|y>>>11)+z|0)+r[1]|0;r[2]=z+r[2]|0;r[3]=B+r[3]|0}function n(r){var u=[],v;for(v=0;64>v;v+=4)u[v>>2]=r.charCodeAt(v)+(r.charCodeAt(v+1)<<8)+(r.charCodeAt(v+2)<<16)+(r.charCodeAt(v+3)<<24);return u}function b(r){var u=[],v;for(v=0;64>v;v+=4)u[v>>2]=r[v]+(r[v+1]<<8)+(r[v+2]<<16)+(r[v+3]<<24);return u}function e(r){var u=r.length,v=[1732584193,-271733879,-1732584194,271733878],y;for(y=64;y<=u;y+=64)k(v,
n(r.substring(y-64,y)));r=r.substring(y-64);var z=r.length;var B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<z;y+=1)B[y>>2]|=r.charCodeAt(y)<<(y%4<<3);B[y>>2]|=128<<(y%4<<3);if(55<y)for(k(v,B),y=0;16>y;y+=1)B[y]=0;u=(8*u).toString(16).match(/(.*?)(.{0,8})$/);r=parseInt(u[2],16);u=parseInt(u[1],16)||0;B[14]=r;B[15]=u;k(v,B);return v}function l(r){var u;for(u=0;u<r.length;u+=1){var v=u,y,z=r[u],B="";for(y=0;4>y;y+=1)B+=q[z>>8*y+4&15]+q[z>>8*y&15];r[v]=B}return r.join("")}function a(r){/[\u0080-\uFFFF]/.test(r)&&
(r=unescape(encodeURIComponent(r)));return r}function f(r){var u=[],v=r.length,y;for(y=0;y<v-1;y+=2)u.push(parseInt(r.substr(y,2),16));return String.fromCharCode.apply(String,u)}function m(){this.reset()}var q="0123456789abcdef".split("");l(e("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function r(u,v){u=u|0||0;return 0>u?Math.max(u+v,0):Math.min(u,v)}ArrayBuffer.prototype.slice=function(u,v){var y=(this||Vg).byteLength;u=r(u,y);var z=y;v!==d&&(z=r(v,y));if(u>
z)return new ArrayBuffer(0);z-=u;v=new ArrayBuffer(z);y=new Uint8Array(v);u=new Uint8Array(this||Vg,u,z);y.set(u);return v}}();m.prototype.append=function(r){this.appendBinary(a(r));return this||Vg};m.prototype.appendBinary=function(r){(this||Vg)._buff+=r;(this||Vg)._length+=r.length;r=(this||Vg)._buff.length;var u;for(u=64;u<=r;u+=64)k((this||Vg)._hash,n((this||Vg)._buff.substring(u-64,u)));(this||Vg)._buff=(this||Vg)._buff.substring(u-64);return this||Vg};m.prototype.end=function(r){var u=(this||
Vg)._buff,v=u.length,y,z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(y=0;y<v;y+=1)z[y>>2]|=u.charCodeAt(y)<<(y%4<<3);this._finish(z,v);u=l((this||Vg)._hash);r&&(u=f(u));this.reset();return u};m.prototype.reset=function(){(this||Vg)._buff="";(this||Vg)._length=0;(this||Vg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Vg};m.prototype.getState=function(){return{buff:(this||Vg)._buff,length:(this||Vg)._length,hash:(this||Vg)._hash}};m.prototype.setState=function(r){(this||Vg)._buff=r.buff;
(this||Vg)._length=r.length;(this||Vg)._hash=r.hash;return this||Vg};m.prototype.destroy=function(){delete (this||Vg)._hash;delete (this||Vg)._buff;delete (this||Vg)._length};m.prototype._finish=function(r,u){r[u>>2]|=128<<(u%4<<3);if(55<u)for(k((this||Vg)._hash,r),u=0;16>u;u+=1)r[u]=0;var v=8*(this||Vg)._length;v=v.toString(16).match(/(.*?)(.{0,8})$/);u=parseInt(v[2],16);v=parseInt(v[1],16)||0;r[14]=u;r[15]=v;k((this||Vg)._hash,r)};m.hash=function(r,u){return m.hashBinary(a(r),u)};m.hashBinary=function(r,
u){r=e(r);r=l(r);return u?f(r):r};m.ArrayBuffer=function(){this.reset()};m.ArrayBuffer.prototype.append=function(r){var u=(this||Vg)._buff.buffer,v=new Uint8Array(u.byteLength+r.byteLength);v.set(new Uint8Array(u));v.set(new Uint8Array(r),u.byteLength);u=v.length;(this||Vg)._length+=r.byteLength;for(r=64;r<=u;r+=64)k((this||Vg)._hash,b(v.subarray(r-64,r)));(this||Vg)._buff=r-64<u?new Uint8Array(v.buffer.slice(r-64)):new Uint8Array(0);return this||Vg};m.ArrayBuffer.prototype.end=function(r){var u=
(this||Vg)._buff,v=u.length,y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z;for(z=0;z<v;z+=1)y[z>>2]|=u[z]<<(z%4<<3);this._finish(y,v);u=l((this||Vg)._hash);r&&(u=f(u));this.reset();return u};m.ArrayBuffer.prototype.reset=function(){(this||Vg)._buff=new Uint8Array(0);(this||Vg)._length=0;(this||Vg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Vg};m.ArrayBuffer.prototype.getState=function(){var r=m.prototype.getState.call(this||Vg);r.buff=String.fromCharCode.apply(null,new Uint8Array(r.buff));
return r};m.ArrayBuffer.prototype.setState=function(r){var u=r.buff,v=u.length,y=new ArrayBuffer(v);y=new Uint8Array(y);var z;for(z=0;z<v;z+=1)y[z]=u.charCodeAt(z);r.buff=y;return m.prototype.setState.call(this||Vg,r)};m.ArrayBuffer.prototype.destroy=m.prototype.destroy;m.ArrayBuffer.prototype._finish=m.prototype._finish;m.ArrayBuffer.hash=function(r,u){var v=new Uint8Array(r),y=v.length;r=[1732584193,-271733879,-1732584194,271733878];var z;for(z=64;z<=y;z+=64)k(r,b(v.subarray(z-64,z)));v=z-64<y?
v.subarray(z-64):new Uint8Array(0);var B=v.length;var C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(z=0;z<B;z+=1)C[z>>2]|=v[z]<<(z%4<<3);C[z>>2]|=128<<(z%4<<3);if(55<z)for(k(r,C),z=0;16>z;z+=1)C[z]=0;y=(8*y).toString(16).match(/(.*?)(.{0,8})$/);v=parseInt(y[2],16);y=parseInt(y[1],16)||0;C[14]=v;C[15]=y;k(r,C);r=l(r);return u?f(r):r};return m}(),pC={stringify:function(d){var k=[];k.push({obj:d});d="";for(var n,b,e,l,a,f,m;n=k.pop();)if(b=n.obj,e=n.prefix||"",n=n.val||"",d+=e,n)d+=n;else if("object"!==typeof b)d+=
"undefined"===typeof b?null:JSON.stringify(b);else if(null===b)d+="null";else if(Array.isArray(b)){k.push({val:"]"});for(e=b.length-1;0<=e;e--)n=0===e?"":",",k.push({obj:b[e],prefix:n});k.push({val:"["})}else{n=[];for(l in b)b.hasOwnProperty(l)&&n.push(l);k.push({val:"}"});for(e=n.length-1;0<=e;e--)a=n[e],f=b[a],m=0<e?",":"",m+=JSON.stringify(a)+":",k.push({obj:f,prefix:m});k.push({val:"{"})}return d},parse:function(d){for(var k=[],n=[],b=0,e,l,a,f;;)if(e=d[b++],"}"===e||"]"===e||"undefined"===typeof e){if(1===
k.length)return k.pop();bB(k.pop(),k,n)}else switch(e){case " ":case "\t":case "\n":case ":":case ",":break;case "n":b+=3;bB(null,k,n);break;case "t":b+=3;bB(!0,k,n);break;case "f":b+=4;bB(!1,k,n);break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "-":e="";for(b--;;)if(l=d[b++],/[\d\.\-e\+]/.test(l))e+=l;else{b--;break}bB(parseFloat(e),k,n);break;case '"':e="";l=void 0;for(a=0;;)if(f=d[b++],'"'!==f||"\\"===l&&1===a%2)e+=f,l=f,"\\"===l?a++:a=0;else break;
bB(JSON.parse('"'+e+'"'),k,n);break;case "[":e={element:[],index:k.length};k.push(e.element);n.push(e);break;case "{":e={element:{},index:k.length};k.push(e.element);n.push(e);break;default:throw Error("unexpectedly reached end of input: "+e);}}},Qha={},ER=Qha=function(d){return function(){var k=arguments.length;if(k){for(var n=[],b=-1;++b<k;)n[b]=arguments[b];return d.call(this,n)}return d.call(this,[])}},Rha={},Rj=Rha="function"===typeof Object.create?function(d,k){k&&(d.super_=k,d.prototype=Object.create(k.prototype,
{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:function(d,k){if(k){d.super_=k;var n=function(){};n.prototype=k.prototype;d.prototype=new n;d.prototype.constructor=d}},qC="object"==typeof Reflect?Reflect:null,M3=qC&&"function"==typeof qC.apply?qC.apply:function(d,k,n){return Function.prototype.apply.call(d,k,n)};var Sha=qC&&"function"==typeof qC.ownKeys?qC.ownKeys:Object.getOwnPropertySymbols?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:
function(d){return Object.getOwnPropertyNames(d)};var N3=Number.isNaN||function(d){return d!=d};gj.EventEmitter=gj;gj.prototype._events=void 0;gj.prototype._eventsCount=0;gj.prototype._maxListeners=void 0;var O3=10;Object.defineProperty(gj,"defaultMaxListeners",{enumerable:!0,get:function(){return O3},set:function(d){if("number"!=typeof d||0>d||N3(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");O3=d}});gj.init=function(){void 0!==
this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};gj.prototype.setMaxListeners=function(d){if("number"!=typeof d||0>d||N3(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this};gj.prototype.getMaxListeners=function(){return void 0===this._maxListeners?gj.defaultMaxListeners:this._maxListeners};
gj.prototype.emit=function(d){for(var k=[],n=1;n<arguments.length;n++)k.push(arguments[n]);n="error"===d;var b=this._events;if(void 0!==b)n=n&&void 0===b.error;else if(!n)return!1;if(n){var e;if(0<k.length&&(e=k[0]),e instanceof Error)throw e;k=Error("Unhandled error."+(e?" ("+e.message+")":""));throw k.context=e,k;}n=b[d];if(void 0===n)return!1;if("function"==typeof n)M3(n,this,k);else for(e=n.length,b=AV(n,e),n=0;n<e;++n)M3(b[n],this,k);return!0};gj.prototype.addListener=function(d,k){return xV(this,
d,k,!1)};gj.prototype.on=gj.prototype.addListener;gj.prototype.prependListener=function(d,k){return xV(this,d,k,!0)};gj.prototype.once=function(d,k){return qH(k),this.on(d,yV(this,d,k)),this};gj.prototype.prependOnceListener=function(d,k){return qH(k),this.prependListener(d,yV(this,d,k)),this};gj.prototype.removeListener=function(d,k){var n,b,e;if((qH(k),void 0===(b=this._events))||void 0===(n=b[d]))return this;if(n===k||n.listener===k)0==--this._eventsCount?this._events=Object.create(null):(delete b[d],
b.removeListener&&this.emit("removeListener",d,n.listener||k));else if("function"!=typeof n){var l=-1;for(e=n.length-1;0<=e;e--)if(n[e]===k||n[e].listener===k){var a=n[e].listener;l=e;break}if(0>l)return this;if(0===l)n.shift();else{for(;l+1<n.length;l++)n[l]=n[l+1];n.pop();!0}1===n.length&&(b[d]=n[0]);void 0!==b.removeListener&&this.emit("removeListener",d,a||k)}return this};gj.prototype.off=gj.prototype.removeListener;gj.prototype.removeAllListeners=function(d){var k,n;if(void 0===(n=this._events))return this;
if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[d]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[d]),this;if(0===arguments.length){var b=Object.keys(n);for(n=0;n<b.length;++n)"removeListener"!==(k=b[n])&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(k=n[d]))this.removeListener(d,k);else if(void 0!==
k)for(n=k.length-1;0<=n;n--)this.removeListener(d,k[n]);return this};gj.prototype.listeners=function(d){return zV(this,d,!0)};gj.prototype.rawListeners=function(d){return zV(this,d,!1)};gj.listenerCount=function(d,k){return"function"==typeof d.listenerCount?d.listenerCount(k):BV.call(d,k)};gj.prototype.listenerCount=BV;gj.prototype.eventNames=function(){return 0<this._eventsCount?Sha(this._events):[]};var Qt=gj,P3="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Tha=
{},zH=Qh,Mt=cB(Iha),QV=cB(Nha),uH=cB(Pha),jW=cB(pC),dB=cB(ER),Es=cB(Rj),Do=Qt;fx.prototype.get=function(d){return this._store["$"+d]};fx.prototype.set=function(d,k){this._store["$"+d]=k;return!0};fx.prototype.has=function(d){return"$"+d in this._store};fx.prototype.delete=function(d){d="$"+d;var k=d in this._store;delete this._store[d];return k};fx.prototype.forEach=function(d){for(var k=Object.keys(this._store),n=0,b=k.length;n<b;n++){var e=k[n],l=this._store[e];e=e.substring(1);d(l,e)}};Object.defineProperty(fx.prototype,
"size",{get:function(){return Object.keys(this._store).length}});qD.prototype.add=function(d){return this._store.set(d,!0)};qD.prototype.has=function(d){return this._store.has(d)};qD.prototype.forEach=function(d){this._store.forEach(function(k,n){d(n)})};Object.defineProperty(qD.prototype,"size",{get:function(){return this._store.size}});if(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var d=Object.getOwnPropertyDescriptor(Map,Symbol.species);
return d&&"get"in d&&Map[Symbol.species]===Map}()){var yD=Set;var up=Map}else yD=qD,up=fx;var CV=Function.prototype.toString,m8=CV.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var sD=!!localStorage.getItem("_pouch_check_localstorage")}catch(d){sD=!1}Es(eB,Do.EventEmitter);eB.prototype.addListener=function(d,k,n,b){function e(){if(l._listeners[k])if(a)a="waiting";else{a=!0;var f=rD(b,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));
n.changes(f).on("change",function(m){m.seq>b.since&&!b.cancelled&&(b.since=m.seq,b.onChange(m))}).on("complete",function(){"waiting"===a&&Mt(e);a=!1}).on("error",function(){a=!1})}}if(!this._listeners[k]){var l=this,a=!1;this._listeners[k]=e;this.on(d,e)}};eB.prototype.removeListener=function(d,k){k in this._listeners&&(Do.EventEmitter.prototype.removeListener.call(this,d,this._listeners[k]),delete this._listeners[k])};eB.prototype.notifyLocalWindows=function(d){sD&&(localStorage[d]="a"===localStorage[d]?
"b":"a")};eB.prototype.notify=function(d){this.emit(d);this.notifyLocalWindows(d)};var iB="function"===typeof Object.assign?Object.assign:function(d){for(var k=Object(d),n=1;n<arguments.length;n++){var b=arguments[n];if(null!=b)for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(k[e]=b[e])}return k};Es(vj,Error);vj.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};new vj(401,"unauthorized","Name or password is incorrect.");
var Uha=new vj(400,"bad_request","Missing JSON list of 'docs'"),es=new vj(404,"not_found","missing"),hB=new vj(409,"conflict","Document update conflict"),JV=new vj(400,"bad_request","_id field must contain a string"),s8=new vj(412,"missing_id","_id is required for puts"),r8=new vj(400,"bad_request","Only reserved document ids may start with underscore.");new vj(412,"precondition_failed","Database not open");var HV=new vj(500,"unknown_error","Database encountered an unknown error"),iW=new vj(500,"badarg",
"Some query argument is invalid");new vj(400,"invalid_request","Request was invalid");var Vha=new vj(400,"query_parse_error","Some query parameter is invalid"),hW=new vj(500,"doc_validation","Bad special document member"),rH=new vj(400,"bad_request","Something wrong with the request"),FR=new vj(400,"bad_request","Document must be a JSON object");new vj(404,"not_found","Database not found");var XM=new vj(500,"indexed_db_went_bad","unknown");new vj(500,"web_sql_went_bad","unknown");new vj(500,"levelDB_went_went_bad",
"unknown");new vj(403,"forbidden","Forbidden by design doc validate_doc_update function");var fW=new vj(400,"bad_request","Invalid rev format");new vj(412,"file_exists","The database could not be created, the file already exists.");var i9=new vj(412,"missing_stub","A pre-existing attachment stub wasn't found");new vj(413,"invalid_url","Provided URL is invalid");var MV="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),u8=/(?:^|&)([^&=]*)=?([^&]*)/g,
t8=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,A8=P3.setImmediate||P3.setTimeout,vH=QV.v4;Es(tD,Do.EventEmitter);tD.prototype.cancel=function(){this.isCancelled=!0;this.db.taskqueue.isReady&&this.emit("cancel")};tD.prototype.validateChanges=function(d){var k=d.complete,n=this;yh._changesFilterPlugin?yh._changesFilterPlugin.validate(d,function(b){if(b)return k(b);
n.doChanges(d)}):n.doChanges(d)};tD.prototype.doChanges=function(d){var k=this,n=d.complete;d=xl(d);"live"in d&&!("continuous"in d)&&(d.continuous=d.live);d.processChange=I8;"latest"===d.since&&(d.since="now");d.since||(d.since=0);if("now"===d.since)this.db.info().then(function(l){k.isCancelled?n(null,{status:"cancelled"}):(d.since=l.update_seq,k.doChanges(d))},n);else{if(yh._changesFilterPlugin){if(yh._changesFilterPlugin.normalize(d),yh._changesFilterPlugin.shouldFilter(this,d))return yh._changesFilterPlugin.filter(this,
d)}else["doc_ids","filter","selector","view"].forEach(function(l){l in d&&Jq("warn",'The "'+l+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in d||(d.descending=!1);d.limit=0===d.limit?1:d.limit;d.complete=n;var b=this.db._changes(d);if(b&&"function"===typeof b.cancel){var e=k.cancel;k.cancel=dB(function(l){b.cancel();e.apply(this,l)})}}};Es(Pj,Do.EventEmitter);Pj.prototype.post=
Tk("post",function(d,k,n){"function"===typeof k&&(n=k,k={});if("object"!==typeof d||Array.isArray(d))return n(Dh(FR));this.bulkDocs({docs:[d]},k,UM(n,d._id))});Pj.prototype.put=Tk("put",function(d,k,n){function b(){var a=d._rev.split("-"),f=a[1];a=parseInt(a[0],10)+1;var m=PV();d._revisions={start:a,ids:[m,f]};d._rev=a+"-"+m;k.new_edits=!1}function e(a){"function"===typeof l._put&&!1!==k.new_edits?l._put(d,k,a):l.bulkDocs({docs:[d]},k,UM(a,d._id))}"function"===typeof k&&(n=k,k={});if("object"!==typeof d||
Array.isArray(d))return n(Dh(FR));IV(d._id);if(Xy(d._id)&&"function"===typeof this._putLocal)return d._deleted?this._removeLocal(d,n):this._putLocal(d,n);var l=this;k.force&&d._rev?(b(),e(function(a){n(a,a?null:{ok:!0,id:d._id,rev:d._rev})})):e(n)});Pj.prototype.putAttachment=Tk("putAttachment",function(d,k,n,b,e){function l(f){var m="_rev"in f?parseInt(f._rev,10):0;f._attachments=f._attachments||{};f._attachments[k]={content_type:e,data:b,revpos:++m};return a.put(f)}var a=this;"function"===typeof e&&
(e=b,b=n,n=null);"undefined"===typeof e&&(e=b,b=n,n=null);e||Jq("warn","Attachment",k,"on document",d,"is missing content_type");return a.get(d).then(function(f){if(f._rev!==n)throw Dh(hB);return l(f)},function(f){if(f.reason===es.message)return l({_id:d});throw f;})});Pj.prototype.removeAttachment=Tk("removeAttachment",function(d,k,n,b){var e=this;e.get(d,function(l,a){if(l)b(l);else if(a._rev!==n)b(Dh(hB));else{if(!a._attachments)return b();delete a._attachments[k];0===Object.keys(a._attachments).length&&
delete a._attachments;e.put(a,b)}})});Pj.prototype.remove=Tk("remove",function(d,k,n,b){"string"===typeof k?(d={_id:d,_rev:k},"function"===typeof n&&(b=n,n={})):"function"===typeof k?(b=k,n={}):(b=n,n=k);n=n||{};n.was_delete=!0;k={_id:d._id,_rev:d._rev||n.rev,_deleted:!0};if(Xy(k._id)&&"function"===typeof this._removeLocal)return this._removeLocal(d,b);this.bulkDocs({docs:[k]},n,UM(b,k._id))});Pj.prototype.revsDiff=Tk("revsDiff",function(d,k,n){function b(m,q){f.has(m)||f.set(m,{missing:[]});f.get(m).missing.push(q)}
function e(m,q){var r=d[m].slice(0);Wy(q,function(u,v,y,z,B){u=v+"-"+y;v=r.indexOf(u);-1!==v&&(r.splice(v,1),"available"!==B.status&&b(m,u))});r.forEach(function(u){b(m,u)})}"function"===typeof k&&(n=k,k={});var l=Object.keys(d);if(!l.length)return n(null,{});var a=0,f=new up;l.map(function(m){this._getRevisionTree(m,function(q,r){if(q&&404===q.status&&"missing"===q.message)f.set(m,{missing:d[m]});else{if(q)return n(q);e(m,r)}if(++a===l.length){var u={};f.forEach(function(v,y){u[y]=v});return n(null,
u)}})},this)});Pj.prototype.bulkGet=Tk("bulkGet",function(d,k){GV(this,d,k)});Pj.prototype.compactDocument=Tk("compactDocument",function(d,k,n){var b=this;this._getRevisionTree(d,function(e,l){if(e)return n(e);var a=L8(l),f=[],m=[];Object.keys(a).forEach(function(q){a[q]>k&&f.push(q)});Wy(l,function(q,r,u,v,y){q=r+"-"+u;"available"===y.status&&-1!==f.indexOf(q)&&m.push(q)});b._doCompaction(d,m,n)})});Pj.prototype.compact=Tk("compact",function(d,k){"function"===typeof d&&(k=d,d={});d=d||{};this._compactionQueue=
this._compactionQueue||[];this._compactionQueue.push({opts:d,callback:k});1===this._compactionQueue.length&&WV(this)});Pj.prototype._compact=function(d,k){var n=this,b=[];n.changes({return_docs:!1,last_seq:d.last_seq||0}).on("change",function(e){b.push(n.compactDocument(e.id,0))}).on("complete",function(e){var l=e.last_seq;Promise.all(b).then(function(){return tH(n,"_local/compaction",function(a){return!a.last_seq||a.last_seq<l?(a.last_seq=l,a):!1})}).then(function(){k(null,{ok:!0})}).catch(k)}).on("error",
k)};Pj.prototype.get=Tk("get",function(d,k,n){function b(){var m=[],q=e.length;if(!q)return n(null,m);e.forEach(function(r){l.get(d,{rev:r,revs:k.revs,latest:k.latest,attachments:k.attachments,binary:k.binary},function(u,v){if(u)m.push({missing:r});else{u=0;for(var y=m.length;u<y;u++)if(m[u].ok&&m[u].ok._rev===v._rev){var z=!0;break}z||m.push({ok:v})}q--;q||n(null,m)})})}"function"===typeof k&&(n=k,k={});if("string"!==typeof d)return n(Dh(JV));if(Xy(d)&&"function"===typeof this._getLocal)return this._getLocal(d,
n);var e=[],l=this;if(k.open_revs)if("all"===k.open_revs)this._getRevisionTree(d,function(m,q){if(m)return n(m);e=SM(q).map(function(r){return r.rev});b()});else if(Array.isArray(k.open_revs)){e=k.open_revs;for(var a=0;a<e.length;a++){var f=e[a];if("string"!==typeof f||!/^\d+-/.test(f))return n(Dh(fW))}b()}else return n(Dh(HV,"function_clause"));else return this._get(d,k,function(m,q){if(m)return m.docId=d,n(m);var r=q.doc,u=q.metadata,v=q.ctx;k.conflicts&&(q=TM(u),q.length&&(r._conflicts=q));Ev(u,
r._rev)&&(r._deleted=!0);if(k.revs||k.revs_info){m=r._rev.split("-");q=parseInt(m[0],10);m=m[1];var y=RV(u.rev_tree);u=null;for(var z=0;z<y.length;z++){var B=y[z],C=B.ids.map(function(S){return S.id}).indexOf(m);if(C===q-1||!u&&-1!==C)u=B}if(!u)return m=Error("invalid rev tree"),m.docId=d,n(m);q=u.ids.map(function(S){return S.id}).indexOf(r._rev.split("-")[1])+1;u.ids.splice(q,u.ids.length-q);u.ids.reverse();k.revs&&(r._revisions={start:u.pos+u.ids.length-1,ids:u.ids.map(function(S){return S.id})});
if(k.revs_info){var G=u.pos+u.ids.length;r._revs_info=u.ids.map(function(S){G--;return{rev:G+"-"+S.id,status:S.opts.status}})}}if(k.attachments&&r._attachments){var F=r._attachments,N=Object.keys(F).length;if(0===N)return n(null,r);Object.keys(F).forEach(function(S){this._getAttachment(r._id,S,F[S],{rev:r._rev,binary:k.binary,ctx:v},function(ha,qa){ha=r._attachments[S];ha.data=qa;delete ha.stub;delete ha.length;--N||n(null,r)})},l)}else{if(r._attachments)for(var L in r._attachments)r._attachments.hasOwnProperty(L)&&
(r._attachments[L].stub=!0);n(null,r)}})});Pj.prototype.getAttachment=Tk("getAttachment",function(d,k,n,b){var e=this;n instanceof Function&&(b=n,n={});this._get(d,n,function(l,a){if(l)return b(l);if(a.doc._attachments&&a.doc._attachments[k])n.ctx=a.ctx,n.binary=!0,e._getAttachment(d,k,a.doc._attachments[k],n,b);else return b(Dh(es))})});Pj.prototype.allDocs=Tk("allDocs",function(d,k){"function"===typeof d&&(k=d,d={});d.skip="undefined"!==typeof d.skip?d.skip:0;d.start_key&&(d.startkey=d.start_key);
d.end_key&&(d.endkey=d.end_key);if("keys"in d){if(!Array.isArray(d.keys))return k(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(b){return b in d})[0];if(n){k(Dh(Vha,"Query parameter `"+n+"` is not compatible with multi-get"));return}if(!Lt(this)&&(M8(d),0===d.keys.length))return this._allDocs({limit:0},k)}return this._allDocs(d,k)});Pj.prototype.changes=function(d,k){"function"===typeof d&&(k=d,d={});d=d||{};d.return_docs="return_docs"in d?d.return_docs:
!d.live;return new tD(this,d,k)};Pj.prototype.close=Tk("close",function(d){this._closed=!0;this.emit("closed");return this._close(d)});Pj.prototype.info=Tk("info",function(d){var k=this;this._info(function(n,b){if(n)return d(n);b.db_name=b.db_name||k.name;b.auto_compaction=!(!k.auto_compaction||Lt(k));b.adapter=k.adapter;d(null,b)})});Pj.prototype.id=Tk("id",function(d){return this._id(d)});Pj.prototype.type=function(){return"function"===typeof this._type?this._type():this.adapter};Pj.prototype.bulkDocs=
Tk("bulkDocs",function(d,k,n){"function"===typeof k&&(n=k,k={});k=k||{};Array.isArray(d)&&(d={docs:d});if(!d||!d.docs||!Array.isArray(d.docs))return n(Dh(Uha));for(var b=0;b<d.docs.length;++b)if("object"!==typeof d.docs[b]||Array.isArray(d.docs[b]))return n(Dh(FR));var e;d.docs.forEach(function(f){f._attachments&&Object.keys(f._attachments).forEach(function(m){var q;(q=e)||(q="_"===m.charAt(0)?m+" is not a valid attachment name, attachment names cannot start with '_'":!1);e=q;f._attachments[m].content_type||
Jq("warn","Attachment",m,"on document",f._id,"is missing content_type")})});if(e)return n(Dh(rH,e));"new_edits"in k||(k.new_edits="new_edits"in d?d.new_edits:!0);var l=this;k.new_edits||Lt(l)||d.docs.sort(K8);J8(d.docs);var a=d.docs.map(function(f){return f._id});return this._bulkDocs(d,k,function(f,m){if(f)return n(f);k.new_edits||(m=m.filter(function(r){return r.error}));if(!Lt(l)){f=0;for(var q=m.length;f<q;f++)m[f].id=m[f].id||a[f]}n(null,m)})});Pj.prototype.registerDependentDatabase=Tk("registerDependentDatabase",
function(d,k){var n=new this.constructor(d,this.__opts);tH(this,"_local/_pouch_dependentDbs",function(b){b.dependentDbs=b.dependentDbs||{};if(b.dependentDbs[d])return!1;b.dependentDbs[d]=!0;return b}).then(function(){k(null,{db:n})}).catch(k)});Pj.prototype.destroy=Tk("destroy",function(d,k){function n(){b._destroy(d,function(l,a){if(l)return k(l);b._destroyed=!0;b.emit("destroyed");k(null,a||{ok:!0})})}"function"===typeof d&&(k=d,d={});var b=this,e="use_prefix"in b?b.use_prefix:!0;if(Lt(b))return n();
b.get("_local/_pouch_dependentDbs",function(l,a){if(l)return 404!==l.status?k(l):n();var f=b.constructor;l=Object.keys(a.dependentDbs).map(function(m){m=e?m.replace(new RegExp("^"+f.prefix),""):m;return(new f(m,b.__opts)).destroy()});Promise.all(l).then(n,k)})});uD.prototype.execute=function(){var d;if(this.failed)for(;d=this.queue.shift();)d(this.failed);else for(;d=this.queue.shift();)d()};uD.prototype.fail=function(d){this.failed=d;this.execute()};uD.prototype.ready=function(d){this.isReady=!0;
this.db=d;this.execute()};uD.prototype.addTask=function(d){this.queue.push(d);this.failed&&this.execute()};Es(yh,Pj);var w9="undefined"!==typeof AbortController?AbortController:function(){return{abort:function(){}}},rW=fetch,kB=Headers;yh.adapters={};yh.preferredAdapters=[];yh.prefix="_pouch_";var Q3=new Do.EventEmitter;(function(d){Object.keys(Do.EventEmitter.prototype).forEach(function(n){"function"===typeof Do.EventEmitter.prototype[n]&&(d[n]=Q3[n].bind(Q3))});var k=d._destructionListeners=new up;
d.on("ref",function(n){k.has(n.name)||k.set(n.name,[]);k.get(n.name).push(n)});d.on("unref",function(n){if(k.has(n.name)){var b=k.get(n.name),e=b.indexOf(n);0>e||(b.splice(e,1),1<b.length?k.set(n.name,b):k.delete(n.name))}});d.on("destroyed",function(n){if(k.has(n)){var b=k.get(n);k.delete(n);b.forEach(function(e){e.emit("destroyed",!0)})}})})(yh);yh.adapter=function(d,k,n){k.valid()&&(yh.adapters[d]=k,n&&yh.preferredAdapters.push(d))};yh.plugin=function(d){if("function"===typeof d)d(yh);else{if("object"!==
typeof d||0===Object.keys(d).length)throw Error('Invalid plugin: got "'+d+'", expected an object or a function');Object.keys(d).forEach(function(k){yh.prototype[k]=d[k]})}this.__defaults&&(yh.__defaults=iB({},this.__defaults));return yh};yh.defaults=function(d){function k(n,b){if(!(this instanceof k))return new k(n,b);b=b||{};n&&"object"===typeof n&&(b=n,n=b.name,delete b.name);b=iB({},k.__defaults,b);yh.call(this,n,b)}Es(k,yh);k.preferredAdapters=yh.preferredAdapters.slice();Object.keys(yh).forEach(function(n){n in
k||(k[n]=yh[n])});k.__defaults=iB({},this.__defaults,d);return k};yh.fetch=function(d,k){return rW(d,k)};var ZV=["$or","$nor","$not"],bW={$elemMatch:function(d,k,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.some(function(e){return gB(e,k,Object.keys(k))}):b.some(function(e){return WM(k,d,n,e)}):!1},$allMatch:function(d,k,n,b){return Array.isArray(b)&&0!==b.length?"object"===typeof b[0]?b.every(function(e){return gB(e,k,Object.keys(k))}):b.every(function(e){return WM(k,d,n,e)}):
!1},$eq:function(d,k,n,b){return Zy(b)&&0===am(b,k)},$gte:function(d,k,n,b){return Zy(b)&&0<=am(b,k)},$gt:function(d,k,n,b){return Zy(b)&&0<am(b,k)},$lte:function(d,k,n,b){return Zy(b)&&0>=am(b,k)},$lt:function(d,k,n,b){return Zy(b)&&0>am(b,k)},$exists:function(d,k,n,b){return k?Zy(b):!Zy(b)},$mod:function(d,k,n,b){if(d=wD(b)){d=k[0];k=k[1];if(0===d)throw Error("Bad divisor, cannot divide by zero");if(parseInt(d,10)!==d)throw Error("Divisor is not an integer");if(parseInt(k,10)!==k)throw Error("Modulus is not an integer");
d=parseInt(b,10)!==b?!1:b%d===k}return d},$ne:function(d,k,n,b){return k.every(function(e){return 0!==am(b,e)})},$in:function(d,k,n,b){return wD(b)&&cW(b,k)},$nin:function(d,k,n,b){return wD(b)&&!cW(b,k)},$size:function(d,k,n,b){return wD(b)&&b.length===k},$all:function(d,k,n,b){return Array.isArray(b)&&V8(b,k)},$regex:function(d,k,n,b){if(d=wD(b))d=(new RegExp(k)).test(b);return d},$type:function(d,k,n,b){return W8(b,k)}};yh.plugin(function(d){d._changesFilterPlugin={validate:X8,normalize:Y8,shouldFilter:Z8,
filter:$8}});yh.version="7.2.1";var a9=dW("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),b9=dW("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" ")),xD=new eB,$M=!1,aN=[],jB=new up,cN,bN=new up;pW.valid=function(){return"undefined"!==typeof indexedDB&&
"undefined"!==typeof IDBKeyRange};var fN={};eN.valid=function(){return!0};Es(bz,Error);Es(AH,Error);Es(BH,Error);var z9=Jq.bind(null,"log"),A9=Array.isArray,B9=JSON.parse;zD.prototype.add=function(d){return this.promise=this.promise.catch(function(){}).then(function(){return d()})};zD.prototype.finish=function(){return this.promise};var R3={},S3=new zD,Wha=function(d,k){return iN(k)},Xha=function(d,k){return k.length},Yha=function(d,k){d=iN(k);for(var n=Math.min.apply(null,k),b=Math.max.apply(null,
k),e=k.length,l=0,a=0,f=k.length;a<f;a++){var m=k[a];l+=m*m}return{sum:d,min:n,max:b,count:e,sumsqr:l}},T3=function(d,k,n,b){function e(T,fa,Ra,gb,ea){try{return{output:fa(Ra,gb,ea)}}catch(aa){return yW(T,aa),{error:aa}}}function l(T,fa){var Ra=am(T.key,fa.key);return 0!==Ra?Ra:am(T.value,fa.value)}function a(T,fa,Ra){Ra=Ra||0;return"number"===typeof fa?T.slice(Ra,fa+Ra):0<Ra?T.slice(Ra):T}function f(T){var fa=T.value;return fa&&"object"===typeof fa&&fa._id||T.id}function m(T){T.rows.forEach(function(fa){var Ra=
fa.doc&&fa.doc._attachments;Ra&&Object.keys(Ra).forEach(function(gb){var ea=Ra[gb];Ra[gb].data=PM(ea.data,ea.content_type)})})}function q(T){return function(fa){T.include_docs&&T.attachments&&T.binary&&m(fa);return fa}}function r(T,fa,Ra,gb){fa=fa[T];"undefined"!==typeof fa&&(gb&&(fa=encodeURIComponent(JSON.stringify(fa))),Ra.push(T+"="+fa))}function u(T){if("undefined"!==typeof T){var fa=Number(T);return isNaN(fa)||fa!==parseInt(T,10)?T:fa}}function v(T){T.group_level=u(T.group_level);T.limit=u(T.limit);
T.skip=u(T.skip);return T}function y(T,fa){var Ra=T.descending?"endkey":"startkey",gb=T.descending?"startkey":"endkey";if("undefined"!==typeof T[Ra]&&"undefined"!==typeof T[gb]&&0<am(T[Ra],T[gb]))throw new bz("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(fa.reduce&&!1!==T.reduce){if(T.include_docs)throw new bz("{include_docs:true} is invalid for reduce");if(T.keys&&1<T.keys.length&&!T.group&&!T.group_level)throw new bz("Multi-key fetches for reduce views must use {group: true}");
}["group_level","limit","skip"].forEach(function(ea){a:{if(ea=T[ea]){if("number"!==typeof ea){ea=new bz('Invalid value for integer: "'+ea+'"');break a}if(0>ea){ea=new bz('Invalid value for positive integer: "'+ea+'"');break a}}ea=void 0}if(ea)throw ea;})}function z(T,fa,Ra){var gb=[],ea,aa="GET",ia,Aa;r("reduce",Ra,gb);r("include_docs",Ra,gb);r("attachments",Ra,gb);r("limit",Ra,gb);r("descending",Ra,gb);r("group",Ra,gb);r("group_level",Ra,gb);r("skip",Ra,gb);r("stale",Ra,gb);r("conflicts",Ra,gb);
r("startkey",Ra,gb,!0);r("start_key",Ra,gb,!0);r("endkey",Ra,gb,!0);r("end_key",Ra,gb,!0);r("inclusive_end",Ra,gb);r("key",Ra,gb,!0);r("update_seq",Ra,gb);gb=gb.join("&");gb=""===gb?"":"?"+gb;if("undefined"!==typeof Ra.keys){var ob="keys="+encodeURIComponent(JSON.stringify(Ra.keys));2E3>=ob.length+gb.length+1?gb+=("?"===gb[0]?"&":"?")+ob:(aa="POST","string"===typeof fa?ea={keys:Ra.keys}:fa.keys=Ra.keys)}if("string"===typeof fa)return ob=jN(fa),T.fetch("_design/"+ob[0]+"/_view/"+ob[1]+gb,{headers:new kB({"Content-Type":"application/json"}),
method:aa,body:JSON.stringify(ea)}).then(function(Nb){ia=Nb.ok;Aa=Nb.status;return Nb.json()}).then(function(Nb){if(!ia)throw Nb.status=Aa,fB(Nb);Nb.rows.forEach(function(Ab){if(Ab.value&&Ab.value.error&&"builtin_reduce_error"===Ab.value.error)throw Error(Ab.reason);});return Nb}).then(q(Ra));ea=ea||{};Object.keys(fa).forEach(function(Nb){Array.isArray(fa[Nb])?ea[Nb]=fa[Nb]:ea[Nb]=fa[Nb].toString()});return T.fetch("_temp_view"+gb,{headers:new kB({"Content-Type":"application/json"}),method:"POST",
body:JSON.stringify(ea)}).then(function(Nb){ia=Nb.ok;Aa=Nb.status;return Nb.json()}).then(function(Nb){if(!ia)throw Nb.status=Aa,fB(Nb);return Nb}).then(q(Ra))}function B(T,fa,Ra){return new Promise(function(gb,ea){T._query(fa,Ra,function(aa,ia){if(aa)return ea(aa);gb(ia)})})}function C(T){return new Promise(function(fa,Ra){T._viewCleanup(function(gb,ea){if(gb)return Ra(gb);fa(ea)})})}function G(T){return function(fa){if(404===fa.status)return T;throw fa;}}function F(T,fa,Ra){function gb(Aa,ob){for(var Nb=
[],Ab=new yD,Kb=0,jc=ob.rows.length;Kb<jc;Kb++){var ub=ob.rows[Kb].doc;if(ub&&(Nb.push(ub),Ab.add(ub._id),ub._deleted=!ia.has(ub._id),!ub._deleted)){var Gc=ia.get(ub._id);"value"in Gc&&(ub.value=Gc.value)}}ob=hN(ia);ob.forEach(function(Yc){if(!Ab.has(Yc)){var Z={_id:Yc};Yc=ia.get(Yc);"value"in Yc&&(Z.value=Yc.value);Nb.push(Z)}});Aa.keys=tW(ob.concat(Aa.keys));Nb.push(Aa);return Nb}var ea="_local/doc_"+T,aa={_id:ea,keys:[]};T=Ra.get(T);var ia=T[0];ea=D9(T[1])?Promise.resolve(aa):fa.db.get(ea).catch(G(aa));
return ea.then(function(Aa){return(Aa.keys.length?fa.db.allDocs({keys:Aa.keys,include_docs:!0}):Promise.resolve({rows:[]})).then(function(ob){return gb(Aa,ob)})})}function N(T,fa,Ra){return T.db.get("_local/lastSeq").catch(G({_id:"_local/lastSeq",seq:0})).then(function(gb){var ea=hN(fa);return Promise.all(ea.map(function(aa){return F(aa,T,fa)})).then(function(aa){aa=sH(aa);gb.seq=Ra;aa.push(gb);return T.db.bulkDocs({docs:aa})})})}function L(T){T="string"===typeof T?T:T.name;var fa=R3[T];fa||(fa=R3[T]=
new zD);return fa}function S(T){return gN(L(T),function(){return ha(T)})()}function ha(T){function fa(Nb,Ab){return function(){return N(T,Nb,Ab)}}function Ra(){return T.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Aa,limit:50}).then(gb)}function gb(Nb){Nb=Nb.results;if(Nb.length){for(var Ab=new up,Kb=0,jc=Nb.length;Kb<jc;Kb++){var ub=Nb[Kb];if("_"!==ub.doc._id[0]){ea=[];aa=ub.doc;if(!aa._deleted){var Gc=T.sourceDB;try{ia(aa)}catch(Pc){yW(Gc,Pc)}}ea.sort(l);
Gc=void 0;for(var Yc=ea,Z=new up,sa=0,ua=Yc.length;sa<ua;sa++){var db=Yc[sa],Cb=[db.key,db.id];0<sa&&0===am(db.key,Gc)&&Cb.push(sa);Z.set(ds(Cb),db);Gc=db.key}Ab.set(ub.doc._id,[Z,ub.changes])}Aa=ub.seq}ob.add(fa(Ab,Aa));if(!(50>Nb.length))return Ra()}}var ea,aa,ia=k(T.mapFun,function(Nb,Ab){Nb={id:aa._id,key:Yy(Nb)};"undefined"!==typeof Ab&&null!==Ab&&(Nb.value=Yy(Ab));ea.push(Nb)}),Aa=T.seq||0,ob=new zD;return Ra().then(function(){return ob.finish()}).then(function(){T.seq=Aa})}function qa(T,fa,
Ra){0===Ra.group_level&&delete Ra.group_level;var gb=Ra.group||Ra.group_level,ea=n(T.reduceFun),aa=[],ia=isNaN(Ra.group_level)?Number.POSITIVE_INFINITY:Ra.group_level;fa.forEach(function(Kb){var jc=aa[aa.length-1],ub=gb?Kb.key:null;gb&&Array.isArray(ub)&&(ub=ub.slice(0,ia));jc&&0===am(jc.groupKey,ub)?(jc.keys.push([Kb.key,Kb.id]),jc.values.push(Kb.value)):aa.push({keys:[[Kb.key,Kb.id]],values:[Kb.value],groupKey:ub})});fa=[];for(var Aa=0,ob=aa.length;Aa<ob;Aa++){var Nb=aa[Aa],Ab=e(T.sourceDB,ea,Nb.keys,
Nb.values,!1);if(Ab.error&&Ab.error instanceof BH)throw Ab.error;fa.push({value:Ab.error?null:Ab.output,key:Nb.groupKey})}return{rows:a(fa,Ra.limit,Ra.skip)}}function D(T,fa){return gN(L(T),function(){return P(T,fa)})()}function P(T,fa){function Ra(Ab){Ab.include_docs=!0;return T.db.allDocs(Ab).then(function(Kb){ea=Kb.total_rows;return Kb.rows.map(function(jc){if("value"in jc.doc&&"object"===typeof jc.doc.value&&null!==jc.doc.value){var ub=Object.keys(jc.doc.value).sort(),Gc=["id","key","value"];
if(!(ub<Gc||ub>Gc))return jc.doc.value}a:{ub=jc.doc._id;Gc=[];for(var Yc=[],Z=0;;){var sa=ub[Z++];if("\x00"===sa)if(1===Gc.length){ub=Gc.pop();break a}else{var ua=Gc;var db=Yc;sa=ua.pop();if(db.length){var Cb=db[db.length-1];sa===Cb.element&&(db.pop(),Cb=db[db.length-1]);db=Cb.element;Cb=Cb.index;Array.isArray(db)?db.push(sa):Cb===ua.length-2?(ua=ua.pop(),db[ua]=sa):ua.push(sa)}continue}switch(sa){case "1":Gc.push(null);break;case "2":Gc.push("1"===ub[Z]);Z++;break;case "3":Cb=ub;ua=sa=Z;if("1"===
Cb[sa])Cb=0,sa++;else{db="0"===Cb[sa];sa++;var Pc="",Oc=Cb.substring(sa,sa+3);Oc=parseInt(Oc,10)+-324;db&&(Oc=-Oc);for(sa+=3;;){var kc=Cb[sa];if("\x00"===kc)break;else Pc+=kc;sa++}Pc=Pc.split(".");Cb=1===Pc.length?parseInt(Pc,10):parseFloat(Pc[0]+"."+Pc[1]);db&&(Cb-=10);0!==Oc&&(Cb=parseFloat(Cb+"e"+Oc))}db=Cb;sa-=ua;Gc.push(db);Z+=sa;break;case "4":for(sa="";;){ua=ub[Z];if("\x00"===ua)break;sa+=ua;Z++}sa=sa.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"\u0001").replace(/\u0002\u0002/g,
"\u0002");Gc.push(sa);break;case "5":sa={element:[],index:Gc.length};Gc.push(sa.element);Yc.push(sa);break;case "6":sa={element:{},index:Gc.length};Gc.push(sa.element);Yc.push(sa);break;default:throw Error("bad collationIndex or unexpectedly reached end of input: "+sa);}}}return{key:ub[0],id:ub[1],value:"value"in jc.doc?jc.doc.value:null}})})}function gb(Ab){var Kb=aa?qa(T,Ab,fa):{total_rows:ea,offset:ia,rows:Ab};fa.update_seq&&(Kb.update_seq=T.seq);if(fa.include_docs){var jc=tW(Ab.map(f));return T.sourceDB.allDocs({keys:jc,
include_docs:!0,conflicts:fa.conflicts,attachments:fa.attachments,binary:fa.binary}).then(function(ub){var Gc=new up;ub.rows.forEach(function(Yc){Gc.set(Yc.id,Yc.doc)});Ab.forEach(function(Yc){var Z=f(Yc);if(Z=Gc.get(Z))Yc.doc=Z});return Kb})}return Kb}var ea,aa=T.reduceFun&&!1!==fa.reduce,ia=fa.skip||0;"undefined"===typeof fa.keys||fa.keys.length||(fa.limit=0,delete fa.keys);if("undefined"!==typeof fa.keys){var Aa=fa.keys.map(function(Ab){Ab={startkey:ds([Ab]),endkey:ds([Ab,{}])};fa.update_seq&&
(Ab.update_seq=!0);return Ra(Ab)});return Promise.all(Aa).then(sH).then(gb)}Aa={descending:fa.descending};fa.update_seq&&(Aa.update_seq=!0);if("start_key"in fa)var ob=fa.start_key;"startkey"in fa&&(ob=fa.startkey);if("end_key"in fa)var Nb=fa.end_key;"endkey"in fa&&(Nb=fa.endkey);"undefined"!==typeof ob&&(Aa.startkey=fa.descending?ds([ob,{}]):ds([ob]));"undefined"!==typeof Nb&&(ob=!1!==fa.inclusive_end,fa.descending&&(ob=!ob),Aa.endkey=ds(ob?[Nb,{}]:[Nb]));"undefined"!==typeof fa.key&&(Nb=ds([fa.key]),
ob=ds([fa.key,{}]),Aa.descending?(Aa.endkey=Nb,Aa.startkey=ob):(Aa.startkey=Nb,Aa.endkey=ob));aa||("number"===typeof fa.limit&&(Aa.limit=fa.limit),Aa.skip=ia);return Ra(Aa).then(gb)}function J(T){return T.fetch("_view_cleanup",{headers:new kB({"Content-Type":"application/json"}),method:"POST"}).then(function(fa){return fa.json()})}function M(T){return T.get("_local/"+d).then(function(fa){var Ra=new up;Object.keys(fa.views).forEach(function(ea){var aa=jN(ea);ea="_design/"+aa[0];aa=aa[1];var ia=Ra.get(ea);
ia||(ia=new yD,Ra.set(ea,ia));ia.add(aa)});var gb={keys:hN(Ra),include_docs:!0};return T.allDocs(gb).then(function(ea){var aa={};ea.rows.forEach(function(ia){var Aa=ia.key.substring(8);Ra.get(ia.key).forEach(function(ob){var Nb=Aa+"/"+ob;fa.views[Nb]||(Nb=ob);Nb=Object.keys(fa.views[Nb]);var Ab=ia.doc&&ia.doc.views&&ia.doc.views[ob];Nb.forEach(function(Kb){aa[Kb]=aa[Kb]||Ab})})});ea=Object.keys(aa).filter(function(ia){return!aa[ia]}).map(function(ia){return gN(L(ia),function(){return(new T.constructor(ia,
T.__opts)).destroy()})()});return Promise.all(ea).then(function(){return{ok:!0}})})},G({ok:!0}))}function X(T,fa,Ra){if("function"===typeof T._query)return B(T,fa,Ra);if(Lt(T))return z(T,fa,Ra);if("string"!==typeof fa)return y(Ra,fa),S3.add(function(){return xW(T,"temp_view/temp_view",fa.map,fa.reduce,!0,d).then(function(aa){return y9(S(aa).then(function(){return D(aa,Ra)}),function(){return aa.db.destroy()})})}),S3.finish();var gb=jN(fa),ea=gb[1];return T.get("_design/"+gb[0]).then(function(aa){var ia=
aa.views&&aa.views[ea];if(!ia)throw new AH("ddoc "+aa._id+" has no view named "+ea);b(aa,ea);y(Ra,ia);return xW(T,fa,ia.map,ia.reduce,!1,d).then(function(Aa){return"ok"===Ra.stale||"update_after"===Ra.stale?("update_after"===Ra.stale&&Mt(function(){S(Aa)}),D(Aa,Ra)):S(Aa).then(function(){return D(Aa,Ra)})})})}return{query:function(T,fa,Ra){var gb=this;"function"===typeof fa&&(Ra=fa,fa={});fa=fa?v(fa):{};"function"===typeof T&&(T={map:T});var ea=Promise.resolve().then(function(){return X(gb,T,fa)});
sW(ea,Ra);return ea},viewCleanup:x9(function(){return"function"===typeof this._viewCleanup?C(this):Lt(this)?J(this):M(this)})}}("mrviews",function(d,k){return"function"===typeof d&&2===d.length?function(n){return d(n,k)}:vW(d.toString(),k)},function(d){d=d.toString();if(/^_sum/.test(d))var k=Wha;else if(/^_count/.test(d))k=Xha;else if(/^_stats/.test(d))k=Yha;else{if(/^_/.test(d))throw Error(d+" is not a supported reduce function.");k=void 0}return k?k:vW(d)},function(d,k){var n=d.views&&d.views[k];
if("string"!==typeof n.map)throw new AH("ddoc "+d._id+" has no string view named "+k+", instead found object of type: "+typeof n.map);});AD.prototype.writeCheckpoint=function(d,k){var n=this;return this.updateTarget(d,k).then(function(){return n.updateSource(d,k)})};AD.prototype.updateTarget=function(d,k){return this.opts.writeTargetCheckpoint?kN(this.target,this.id,d,k,this.returnValue):Promise.resolve(!0)};AD.prototype.updateSource=function(d,k){if(this.opts.writeSourceCheckpoint){var n=this;return kN(this.src,
this.id,d,k,this.returnValue).catch(function(b){if(BW(b))return n.opts.writeSourceCheckpoint=!1,!0;throw b;})}return Promise.resolve(!0)};var U3={undefined:function(d,k){return 0===am(d.last_seq,k.last_seq)?k.last_seq:0},1:function(d,k){d=k.session_id===d.session_id?{last_seq:k.last_seq,history:k.history}:AW(k.history,d.history);return d.last_seq}};AD.prototype.getCheckpoint=function(){var d=this;return d.opts&&d.opts.writeSourceCheckpoint&&!d.opts.writeTargetCheckpoint?d.src.get(d.id).then(function(k){return k.last_seq||
0}).catch(function(k){if(404!==k.status)throw k;return 0}):d.target.get(d.id).then(function(k){return d.opts&&d.opts.writeTargetCheckpoint&&!d.opts.writeSourceCheckpoint?k.last_seq||0:d.src.get(d.id).then(function(n){if(k.version!==n.version)return 0;var b=k.version?k.version.toString():"undefined";return b in U3?U3[b](k,n):0},function(n){if(404===n.status&&k.last_seq)return d.src.put({_id:d.id,last_seq:0}).then(function(){return 0},function(b){return BW(b)?(d.opts.writeSourceCheckpoint=!1,k.last_seq):
0});throw n;})}).catch(function(k){if(404!==k.status)throw k;return 0})};Es(CH,Do.EventEmitter);CH.prototype.cancel=function(){this.cancelled=!0;this.state="cancelled";this.emit("cancel")};CH.prototype.ready=function(d,k){function n(){b.cancel()}var b=this;b._readyCalled||(b._readyCalled=!0,d.once("destroyed",n),k.once("destroyed",n),b.once("complete",function(){d.removeListener("destroyed",n);k.removeListener("destroyed",n)}))};Es(nN,Do.EventEmitter);nN.prototype.cancel=function(){this.canceled||
(this.canceled=!0,this.push.cancel(),this.pull.cancel())};yh.plugin(function(d){d.adapter("idb",pW,!0)}).plugin(function(d){d.adapter("http",eN,!1);d.adapter("https",eN,!1)}).plugin({query:function(d,k,n){return T3.query.call(this,d,k,n)},viewCleanup:function(d){return T3.viewCleanup.call(this,d)}}).plugin(function(d){d.replicate=mN;d.sync=K9;Object.defineProperty(d.prototype,"replicate",{get:function(){var k=this;"undefined"===typeof this.replicateMethods&&(this.replicateMethods={from:function(n,
b,e){return k.constructor.replicate(n,k,b,e)},to:function(n,b,e){return k.constructor.replicate(k,n,b,e)}});return this.replicateMethods}});d.prototype.sync=function(k,n,b){return this.constructor.sync(this,k,n,b)}});var Zha=Tha=yh,Vx={};Object.defineProperty(Vx,"__esModule",{value:!0});gx.prototype.get=function(d){return this._store["$"+d]};gx.prototype.set=function(d,k){this._store["$"+d]=k;return!0};gx.prototype.has=function(d){return"$"+d in this._store};gx.prototype.delete=function(d){d="$"+
d;var k=d in this._store;delete this._store[d];return k};gx.prototype.forEach=function(d){for(var k=Object.keys(this._store),n=0,b=k.length;n<b;n++){var e=k[n],l=this._store[e];e=e.substring(1);d(l,e)}};Object.defineProperty(gx.prototype,"size",{get:function(){return Object.keys(this._store).length}});BD.prototype.add=function(d){return this._store.set(d,!0)};BD.prototype.has=function(d){return this._store.has(d)};BD.prototype.forEach=function(d){this._store.forEach(function(k,n){d(n)})};Object.defineProperty(BD.prototype,
"size",{get:function(){return this._store.size}});(function(){if("undefined"===typeof Symbol||"undefined"===typeof Map||"undefined"===typeof Set)return!1;var d=Object.getOwnPropertyDescriptor(Map,Symbol.species);return d&&"get"in d&&Map[Symbol.species]===Map})()?(Vx.Set=Set,Vx.Map=Map):(Vx.Set=BD,Vx.Map=gx);var GR={},HR=Qh;GR.test=function(){return"undefined"!==typeof HR&&!HR.browser};GR.install=function(d){return function(){HR.nextTick(d)}};var V3="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,IR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,JR={},W3=IR.MutationObserver||IR.WebKitMutationObserver;JR.test=function(){return W3};JR.install=function(d){var k=0;d=new W3(d);var n=IR.document.createTextNode("");d.observe(n,{characterData:!0});return function(){n.data=k=++k%2}};var KR="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,EK="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,$ha={},mF=[GR,{test:function(){return"function"===typeof V3.queueMicrotask},install:function(d){return function(){V3.queueMicrotask(d)}}},JR,{test:function(){return KR.setImmediate?!1:"undefined"!==typeof KR.MessageChannel},install:function(d){var k=new KR.MessageChannel;k.port1.onmessage=d;return function(){k.port2.postMessage(0)}}},{test:function(){return"document"in EK&&"onreadystatechange"in EK.document.createElement("script")},install:function(d){return function(){var k=EK.document.createElement("script");
k.onreadystatechange=function(){d();k.onreadystatechange=null;k.parentNode.removeChild(k);k=null};EK.document.documentElement.appendChild(k);return d}}},{test:function(){return!0},install:function(d){return function(){setTimeout(d,0)}}}],lB,cz,CD=-1,hx=[],oN=!1,nF=-1,aia=mF.length;for(;++nF<aia;)if(mF[nF]&&mF[nF].test&&mF[nF].test()){var bia=mF[nF].install(DW);break}EW.prototype.run=function(){var d=this.fun,k=this.array;switch(k.length){case 0:return d();case 1:return d(k[0]);case 2:return d(k[0],
k[1]);case 3:return d(k[0],k[1],k[2]);default:return d.apply(null,k)}};var si=$ha=function(d){var k=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)k[n-1]=arguments[n];hx.push(new EW(d,k));oN||lB||(oN=!0,bia())},Of={};Object.defineProperty(Of,"__esModule",{value:!0});(Rj&&"object"===typeof Rj&&"default"in Rj?Rj["default"]:Rj)(wj,Error);wj.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};
var cia=new wj(401,"unauthorized","Name or password is incorrect."),dia=new wj(400,"bad_request","Missing JSON list of 'docs'"),eia=new wj(404,"not_found","missing"),fia=new wj(409,"conflict","Document update conflict"),gia=new wj(400,"bad_request","_id field must contain a string"),hia=new wj(412,"missing_id","_id is required for puts"),iia=new wj(400,"bad_request","Only reserved document ids may start with underscore."),jia=new wj(412,"precondition_failed","Database not open"),X3=new wj(500,"unknown_error",
"Database encountered an unknown error"),kia=new wj(500,"badarg","Some query argument is invalid"),lia=new wj(400,"invalid_request","Request was invalid"),mia=new wj(400,"query_parse_error","Some query parameter is invalid"),nia=new wj(500,"doc_validation","Bad special document member"),oia=new wj(400,"bad_request","Something wrong with the request"),pia=new wj(400,"bad_request","Document must be a JSON object"),qia=new wj(404,"not_found","Database not found"),ria=new wj(500,"indexed_db_went_bad",
"unknown"),sia=new wj(500,"web_sql_went_bad","unknown"),tia=new wj(500,"levelDB_went_went_bad","unknown"),uia=new wj(403,"forbidden","Forbidden by design doc validate_doc_update function"),via=new wj(400,"bad_request","Invalid rev format"),wia=new wj(412,"file_exists","The database could not be created, the file already exists."),xia=new wj(412,"missing_stub","A pre-existing attachment stub wasn't found"),yia=new wj(413,"invalid_url","Provided URL is invalid");Of.UNAUTHORIZED=cia;Of.MISSING_BULK_DOCS=
dia;Of.MISSING_DOC=eia;Of.REV_CONFLICT=fia;Of.INVALID_ID=gia;Of.MISSING_ID=hia;Of.RESERVED_ID=iia;Of.NOT_OPEN=jia;Of.UNKNOWN_ERROR=X3;Of.BAD_ARG=kia;Of.INVALID_REQUEST=lia;Of.QUERY_PARSE_ERROR=mia;Of.DOC_VALIDATION=nia;Of.BAD_REQUEST=oia;Of.NOT_AN_OBJECT=pia;Of.DB_MISSING=qia;Of.WSQ_ERROR=sia;Of.LDB_ERROR=tia;Of.FORBIDDEN=uia;Of.INVALID_REV=via;Of.FILE_EXISTS=wia;Of.MISSING_STUB=xia;Of.IDB_ERROR=ria;Of.INVALID_URL=yia;Of.createError=function(d,k){function n(b){for(var e=Object.getOwnPropertyNames(d),
l=0,a=e.length;l<a;l++)"function"!==typeof d[e[l]]&&(this[e[l]]=d[e[l]]);void 0!==b&&(this.reason=b)}n.prototype=wj.prototype;return new n(k)};Of.generateErrorFromResponse=function(d){if("object"!==typeof d){var k=d;d=X3;d.data=k}"error"in d&&"conflict"===d.error&&(d.name="conflict",d.status=409);"name"in d||(d.name=d.error||"unknown");"status"in d||(d.status=500);"message"in d||(d.message=d.message||d.reason);return d};var zia="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,LR=Object.prototype.toString,
FK=function(d){return!(zia&&d&&"object"==typeof d&&Symbol.toStringTag in d)&&"[object Arguments]"===LR.call(d)},Y3=function(d){return!!FK(d)||null!==d&&"object"==typeof d&&"number"==typeof d.length&&0<=d.length&&"[object Array]"!==LR.call(d)&&"[object Function]"===LR.call(d.callee)},Aia=function(){return FK(arguments)}();FK.isLegacyArguments=Y3;var Bia=Aia?FK:Y3,Cia=Object.prototype.toString,Dia=Function.prototype.toString,Eia=/^\s*(?:function)?\*/,Z3="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,
$3=Object.getPrototypeOf;a:if(Z3){try{var GK=Function("return function*() {}")();break a}catch(d){}GK=void 0}else GK=!1;var Fia=GK?$3(GK):{},oh="function"==typeof Object.create?function(d,k){k&&(d.super_=k,d.prototype=Object.create(k.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:function(d,k){if(k){d.super_=k;var n=function(){};n.prototype=k.prototype;d.prototype=new n;d.prototype.constructor=d}},a4=function(d){return d&&"object"==typeof d&&"function"==typeof d.copy&&
"function"==typeof d.fill&&"function"==typeof d.readUInt8},Vh={},M9=a4,YW="undefined"!=typeof BigInt,qN="undefined"!=typeof Symbol,vp=qN&&void 0!==Symbol.toStringTag,Eo="undefined"!=typeof Uint8Array,Gia="undefined"!=typeof ArrayBuffer;if(Eo&&vp)var Hia=Object.getPrototypeOf(Uint8Array.prototype),Kq=dz(Object.getOwnPropertyDescriptor(Hia,Symbol.toStringTag).get);var ek=dz(Object.prototype.toString),N9=dz(Number.prototype.valueOf),O9=dz(String.prototype.valueOf),P9=dz(Boolean.prototype.valueOf);if(YW)var Q9=
dz(BigInt.prototype.valueOf);if(qN)var R9=dz(Symbol.prototype.valueOf);Vh.isArgumentsObject=Bia;Vh.isGeneratorFunction=function(d){return"function"==typeof d&&(!!Eia.test(Dia.call(d))||(Z3?$3(d)===Fia:"[object GeneratorFunction]"===Cia.call(d)))};Vh.isPromise=function(d){return"undefined"!=typeof Promise&&d instanceof Promise||null!==d&&"object"==typeof d&&"function"==typeof d.then&&"function"==typeof d.catch};Vh.isArrayBufferView=function(d){return Gia&&ArrayBuffer.isView?ArrayBuffer.isView(d):FW(d)||
SW(d)};Vh.isTypedArray=FW;Vh.isUint8Array=GW;Vh.isUint8ClampedArray=HW;Vh.isUint16Array=IW;Vh.isUint32Array=JW;Vh.isInt8Array=KW;Vh.isInt16Array=LW;Vh.isInt32Array=MW;Vh.isFloat32Array=NW;Vh.isFloat64Array=OW;Vh.isBigInt64Array=PW;Vh.isBigUint64Array=QW;EH.working="undefined"!=typeof Map&&EH(new Map);Vh.isMap=function(d){return"undefined"!=typeof Map&&(EH.working?EH(d):d instanceof Map)};FH.working="undefined"!=typeof Set&&FH(new Set);Vh.isSet=function(d){return"undefined"!=typeof Set&&(FH.working?
FH(d):d instanceof Set)};GH.working="undefined"!=typeof WeakMap&&GH(new WeakMap);Vh.isWeakMap=function(d){return"undefined"!=typeof WeakMap&&(GH.working?GH(d):d instanceof WeakMap)};pN.working="undefined"!=typeof WeakSet&&pN(new WeakSet);Vh.isWeakSet=function(d){return pN(d)};HH.working="undefined"!=typeof ArrayBuffer&&HH(new ArrayBuffer);Vh.isArrayBuffer=RW;IH.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&IH(new DataView(new ArrayBuffer(1),0,1));Vh.isDataView=SW;JH.working=
"undefined"!=typeof SharedArrayBuffer&&JH(new SharedArrayBuffer);Vh.isSharedArrayBuffer=TW;Vh.isAsyncFunction=function(d){return"[object AsyncFunction]"===ek(d)};Vh.isMapIterator=function(d){return"[object Map Iterator]"===ek(d)};Vh.isSetIterator=function(d){return"[object Set Iterator]"===ek(d)};Vh.isGeneratorObject=function(d){return"[object Generator]"===ek(d)};Vh.isWebAssemblyCompiledModule=function(d){return"[object WebAssembly.Module]"===ek(d)};Vh.isNumberObject=UW;Vh.isStringObject=VW;Vh.isBooleanObject=
WW;Vh.isBigIntObject=XW;Vh.isSymbolObject=ZW;Vh.isBoxedPrimitive=function(d){return UW(d)||VW(d)||WW(d)||XW(d)||ZW(d)};Vh.isAnyArrayBuffer=function(d){return Eo&&(RW(d)||TW(d))};["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(d){Object.defineProperty(Vh,d,{enumerable:!1,value:function(){throw Error(d+" is not supported in userland");}})});var oF="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Sg={},tu=Qh,b4=Object.getOwnPropertyDescriptors||function(d){for(var k=
Object.keys(d),n={},b=0;b<k.length;b++)n[k[b]]=Object.getOwnPropertyDescriptor(d,k[b]);return n},Iia=/%[sdj%]/g;Sg.format=function(d){if(!MH(d)){for(var k=[],n=0;n<arguments.length;n++)k.push(ix(arguments[n]));return k.join(" ")}n=1;var b=arguments,e=b.length;k=String(d).replace(Iia,function(a){if("%%"===a)return"%";if(n>=e)return a;switch(a){case "%s":return String(b[n++]);case "%d":return Number(b[n++]);case "%j":try{return JSON.stringify(b[n++])}catch(f){return"[Circular]"}default:return a}});
for(var l=b[n];n<e;l=b[++n])null!==l&&mB(l)?k+=" "+ix(l):k+=" "+l;return k};Sg.deprecate=function(d,k){if(void 0!==tu&&!0===tu.noDeprecation)return d;if(void 0===tu)return function(){return Sg.deprecate(d,k).apply(this||oF,arguments)};var n=!1;return function(){if(!n){if(tu.throwDeprecation)throw Error(k);tu.traceDeprecation?console.trace(k):console.error(k);n=!0}return d.apply(this||oF,arguments)}};var HK={},c4=/^$/;if(tu.env.NODE_DEBUG){var MR=tu.env.NODE_DEBUG;MR=MR.replace(/[|\\{}()[\]^$+?.]/g,
"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();c4=new RegExp("^"+MR+"$","i")}Sg.debuglog=function(d){if(d=d.toUpperCase(),!HK[d])if(c4.test(d)){var k=tu.pid;HK[d]=function(){var n=Sg.format.apply(Sg,arguments);console.error("%s %d: %s",d,k,n)}}else HK[d]=function(){};return HK[d]};Sg.inspect=ix;ix.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};
ix.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};Sg.types=Vh;Sg.isArray=aX;Sg.isBoolean=rN;Sg.isNull=function(d){return null===d};Sg.isNullOrUndefined=function(d){return null==d};Sg.isNumber=$W;Sg.isString=MH;Sg.isSymbol=function(d){return"symbol"==typeof d};Sg.isUndefined=ez;Sg.isRegExp=FD;Sg.types.isRegExp=FD;Sg.isObject=mB;Sg.isDate=NH;Sg.types.isDate=NH;Sg.isError=ED;Sg.types.isNativeError=ED;Sg.isFunction=LH;Sg.isPrimitive=
function(d){return null===d||"boolean"==typeof d||"number"==typeof d||"string"==typeof d||"symbol"==typeof d||void 0===d};Sg.isBuffer=a4;var V9="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");Sg.log=function(){console.log("%s - %s",U9(),Sg.format.apply(Sg,arguments))};Sg.inherits=oh;Sg._extend=function(d,k){if(!k||!mB(k))return d;for(var n=Object.keys(k),b=n.length;b--;)d[n[b]]=k[n[b]];return d};var Xz="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Sg.promisify=function(d){function k(){for(var n,
b,e=new Promise(function(f,m){n=f;b=m}),l=[],a=0;a<arguments.length;a++)l.push(arguments[a]);l.push(function(f,m){f?b(f):n(m)});try{d.apply(this||oF,l)}catch(f){b(f)}return e}if("function"!=typeof d)throw new TypeError('The "original" argument must be of type Function');if(Xz&&d[Xz]){if("function"!=typeof(k=d[Xz]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(k,Xz,{value:k,enumerable:!1,writable:!1,configurable:!0}),k}return Object.setPrototypeOf(k,
Object.getPrototypeOf(d)),Xz&&Object.defineProperty(k,Xz,{value:k,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(k,b4(d))};Sg.promisify.custom=Xz;Sg.callbackify=function(d){function k(){for(var n=[],b=0;b<arguments.length;b++)n.push(arguments[b]);var e=n.pop();if("function"!=typeof e)throw new TypeError("The last argument must be of type Function");var l=this||oF,a=function(){return e.apply(l,arguments)};d.apply(this||oF,n).then(function(f){tu.nextTick(a.bind(null,null,f))},function(f){tu.nextTick(W9.bind(null,
f,a))})}if("function"!=typeof d)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(k,Object.getPrototypeOf(d)),Object.defineProperties(k,b4(d)),k};for(var Ot=[],qr=[],Jia="undefined"!=typeof Uint8Array?Uint8Array:Array,rC=0;64>rC;++rC)Ot[rC]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[rC],qr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(rC)]=rC;qr[45]=62;qr[95]=63;var eh={},zN={byteLength:function(d){d=
bX(d);var k=d[1];return 3*(d[0]+k)/4-k},toByteArray:function(d){var k=bX(d);var n=k[0];k=k[1];var b=new Jia(3*(n+k)/4-k),e=0,l=0<k?n-4:n;for(n=0;n<l;n+=4){var a=qr[d.charCodeAt(n)]<<18|qr[d.charCodeAt(n+1)]<<12|qr[d.charCodeAt(n+2)]<<6|qr[d.charCodeAt(n+3)];b[e++]=a>>16&255;b[e++]=a>>8&255;b[e++]=255&a}2===k&&(a=qr[d.charCodeAt(n)]<<2|qr[d.charCodeAt(n+1)]>>4,b[e++]=255&a);1===k&&(a=qr[d.charCodeAt(n)]<<10|qr[d.charCodeAt(n+1)]<<4|qr[d.charCodeAt(n+2)]>>2,b[e++]=a>>8&255,b[e++]=255&a);return b},fromByteArray:function(d){for(var k,
n=d.length,b=n%3,e=[],l=0,a=n-b;l<a;l+=16383)e.push(X9(d,l,l+16383>a?a:l+16383));1===b?(k=d[n-1],e.push(Ot[k>>2]+Ot[k<<4&63]+"==")):2===b&&(k=(d[n-2]<<8)+d[n-1],e.push(Ot[k>>10]+Ot[k>>4&63]+Ot[k<<2&63]+"="));return e.join("")}},nB={read:function(d,k,n,b,e){var l=8*e-b-1;var a=(1<<l)-1,f=a>>1,m=-7;e=n?e-1:0;var q=n?-1:1,r=d[k+e];e+=q;n=r&(1<<-m)-1;r>>=-m;for(m+=l;0<m;n=256*n+d[k+e],e+=q,m-=8);l=n&(1<<-m)-1;n>>=-m;for(m+=b;0<m;l=256*l+d[k+e],e+=q,m-=8);if(0===n)n=1-f;else{if(n===a)return l?NaN:1/0*
(r?-1:1);l+=Math.pow(2,b);n-=f}return(r?-1:1)*l*Math.pow(2,n-b)},write:function(d,k,n,b,e,l){var a,f,m,q=8*l-e-1,r=(1<<q)-1,u=r>>1,v=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;l=b?0:l-1;b=b?1:-1;var y=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);for(isNaN(k)||k===1/0?(f=isNaN(k)?1:0,a=r):(a=Math.floor(Math.log(k)/Math.LN2),1>k*(m=Math.pow(2,-a))&&(a--,m*=2),2<=(k+=1<=a+u?v/m:v*Math.pow(2,1-u))*m&&(a++,m/=2),a+u>=r?(f=0,a=r):1<=a+u?(f=(k*m-1)*Math.pow(2,e),a+=u):(f=k*Math.pow(2,u-1)*Math.pow(2,e),a=0));8<=e;d[n+
l]=255&f,l+=b,f/=256,e-=8);a=a<<e|f;for(q+=e;0<q;d[n+l]=255&a,l+=b,a/=256,q-=8);d[n+l-b]|=128*y}},d4="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;eh.Buffer=$d;eh.SlowBuffer=function(d){+d!=d&&(d=0);return $d.alloc(+d)};eh.INSPECT_MAX_BYTES=50;eh.kMaxLength=2147483647;$d.TYPED_ARRAY_SUPPORT=function(){try{var d=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(d,k),42===
d.foo()}catch(n){return!1}}();$d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty($d.prototype,"parent",{enumerable:!0,get:function(){if($d.isBuffer(this))return this.buffer}});Object.defineProperty($d.prototype,"offset",{enumerable:!0,get:function(){if($d.isBuffer(this))return this.byteOffset}});
$d.poolSize=8192;$d.from=function(d,k,n){return cX(d,k,n)};Object.setPrototypeOf($d.prototype,Uint8Array.prototype);Object.setPrototypeOf($d,Uint8Array);$d.alloc=function(d,k,n){return eX(d),0>=d?Fv(d):void 0!==k?"string"==typeof n?Fv(d).fill(k,n):Fv(d).fill(k):Fv(d)};$d.allocUnsafe=function(d){return vN(d)};$d.allocUnsafeSlow=function(d){return vN(d)};$d.isBuffer=function(d){return null!=d&&!0===d._isBuffer&&d!==$d.prototype};$d.compare=function(d,k){if(Gv(d,Uint8Array)&&(d=$d.from(d,d.offset,d.byteLength)),
Gv(k,Uint8Array)&&(k=$d.from(k,k.offset,k.byteLength)),!$d.isBuffer(d)||!$d.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===k)return 0;for(var n=d.length,b=k.length,e=0,l=Math.min(n,b);e<l;++e)if(d[e]!==k[e]){n=d[e];b=k[e];break}return n<b?-1:b<n?1:0};$d.isEncoding=function(d){switch(String(d).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};$d.concat=function(d,k){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(0===d.length)return $d.alloc(0);var n;if(void 0===k)for(n=k=0;n<d.length;++n)k+=d[n].length;k=$d.allocUnsafe(k);var b=0;for(n=0;n<d.length;++n){var e=d[n];if(Gv(e,Uint8Array)&&(e=$d.from(e)),!$d.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(k,b);b+=e.length}return k};$d.byteLength=dX;$d.prototype._isBuffer=!0;$d.prototype.swap16=
function(){var d=this.length;if(0!=d%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<d;k+=2)fz(this,k,k+1);return this};$d.prototype.swap32=function(){var d=this.length;if(0!=d%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<d;k+=4)fz(this,k,k+3),fz(this,k+1,k+2);return this};$d.prototype.swap64=function(){var d=this.length;if(0!=d%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<d;k+=8)fz(this,k,
k+7),fz(this,k+1,k+6),fz(this,k+2,k+5),fz(this,k+3,k+4);return this};$d.prototype.toString=function(){var d=this.length;return 0===d?"":0===arguments.length?gX(this,0,d):Z9.apply(this,arguments)};$d.prototype.toLocaleString=$d.prototype.toString;$d.prototype.equals=function(d){if(!$d.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d||0===$d.compare(this,d)};$d.prototype.inspect=function(){var d="",k=eh.INSPECT_MAX_BYTES;return d=this.toString("hex",0,k).replace(/(.{2})/g,
"$1 ").trim(),this.length>k&&(d+=" ... "),"<Buffer "+d+">"};d4&&($d.prototype[d4]=$d.prototype.inspect);$d.prototype.compare=function(d,k,n,b,e){if(Gv(d,Uint8Array)&&(d=$d.from(d,d.offset,d.byteLength)),!$d.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(void 0===k&&(k=0),void 0===n&&(n=d?d.length:0),void 0===b&&(b=0),void 0===e&&(e=this.length),0>k||n>d.length||0>b||e>this.length)throw new RangeError("out of range index");
if(b>=e&&k>=n)return 0;if(b>=e)return-1;if(k>=n)return 1;if(this===d)return 0;var l=(e>>>=0)-(b>>>=0),a=(n>>>=0)-(k>>>=0),f=Math.min(l,a);b=this.slice(b,e);d=d.slice(k,n);for(k=0;k<f;++k)if(b[k]!==d[k]){l=b[k];a=d[k];break}return l<a?-1:a<l?1:0};$d.prototype.includes=function(d,k,n){return-1!==this.indexOf(d,k,n)};$d.prototype.indexOf=function(d,k,n){return hX(this,d,k,n,!0)};$d.prototype.lastIndexOf=function(d,k,n){return hX(this,d,k,n,!1)};$d.prototype.write=function(d,k,n,b){if(void 0===k)b="utf8",
n=this.length,k=0;else if(void 0===n&&"string"==typeof k)b=k,n=this.length,k=0;else{if(!isFinite(k))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");k>>>=0;isFinite(n)?(n>>>=0,void 0===b&&(b="utf8")):(b=n,n=void 0)}var e=this.length-k;if((void 0===n||n>e)&&(n=e),0<d.length&&(0>n||0>k)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(e=!1;;)switch(b){case "hex":a:{k=Number(k)||0;b=this.length-k;n?(n=Number(n))>b&&
(n=b):n=b;b=d.length;n>b/2&&(n=b/2);for(b=0;b<n;++b){e=parseInt(d.substr(2*b,2),16);if(e!=e){n=b;break a}this[k+b]=e}n=b}return n;case "utf8":case "utf-8":return OH(yN(d,this.length-k),this,k,n);case "ascii":return jX(this,d,k,n);case "latin1":case "binary":return jX(this,d,k,n);case "base64":return OH(fX(d),this,k,n);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=n;e=this.length-k;for(var l=[],a=0;a<d.length&&!(0>(e-=2));++a){var f=d.charCodeAt(a);n=f>>8;f%=256;l.push(f);l.push(n)}return OH(l,
this,k,b);default:if(e)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase();e=!0}};$d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};$d.prototype.slice=function(d,k){var n=this.length;0>(d=~~d)?0>(d+=n)&&(d=0):d>n&&(d=n);0>(k=void 0===k?n:~~k)?0>(k+=n)&&(k=0):k>n&&(k=n);k<d&&(k=d);d=this.subarray(d,k);return Object.setPrototypeOf(d,$d.prototype),d};$d.prototype.readUIntLE=function(d,k,n){d>>>=0;k>>>=0;n||bm(d,k,this.length);n=this[d];
for(var b=1,e=0;++e<k&&(b*=256);)n+=this[d+e]*b;return n};$d.prototype.readUIntBE=function(d,k,n){d>>>=0;k>>>=0;n||bm(d,k,this.length);n=this[d+--k];for(var b=1;0<k&&(b*=256);)n+=this[d+--k]*b;return n};$d.prototype.readUInt8=function(d,k){return d>>>=0,k||bm(d,1,this.length),this[d]};$d.prototype.readUInt16LE=function(d,k){return d>>>=0,k||bm(d,2,this.length),this[d]|this[d+1]<<8};$d.prototype.readUInt16BE=function(d,k){return d>>>=0,k||bm(d,2,this.length),this[d]<<8|this[d+1]};$d.prototype.readUInt32LE=
function(d,k){return d>>>=0,k||bm(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+16777216*this[d+3]};$d.prototype.readUInt32BE=function(d,k){return d>>>=0,k||bm(d,4,this.length),16777216*this[d]+(this[d+1]<<16|this[d+2]<<8|this[d+3])};$d.prototype.readIntLE=function(d,k,n){d>>>=0;k>>>=0;n||bm(d,k,this.length);n=this[d];for(var b=1,e=0;++e<k&&(b*=256);)n+=this[d+e]*b;return n>=128*b&&(n-=Math.pow(2,8*k)),n};$d.prototype.readIntBE=function(d,k,n){d>>>=0;k>>>=0;n||bm(d,k,this.length);n=k;for(var b=
1,e=this[d+--n];0<n&&(b*=256);)e+=this[d+--n]*b;return e>=128*b&&(e-=Math.pow(2,8*k)),e};$d.prototype.readInt8=function(d,k){return d>>>=0,k||bm(d,1,this.length),128&this[d]?-1*(255-this[d]+1):this[d]};$d.prototype.readInt16LE=function(d,k){d>>>=0;k||bm(d,2,this.length);d=this[d]|this[d+1]<<8;return 32768&d?4294901760|d:d};$d.prototype.readInt16BE=function(d,k){d>>>=0;k||bm(d,2,this.length);d=this[d+1]|this[d]<<8;return 32768&d?4294901760|d:d};$d.prototype.readInt32LE=function(d,k){return d>>>=0,
k||bm(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24};$d.prototype.readInt32BE=function(d,k){return d>>>=0,k||bm(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]};$d.prototype.readFloatLE=function(d,k){return d>>>=0,k||bm(d,4,this.length),nB.read(this,d,!0,23,4)};$d.prototype.readFloatBE=function(d,k){return d>>>=0,k||bm(d,4,this.length),nB.read(this,d,!1,23,4)};$d.prototype.readDoubleLE=function(d,k){return d>>>=0,k||bm(d,8,this.length),nB.read(this,d,!0,52,8)};
$d.prototype.readDoubleBE=function(d,k){return d>>>=0,k||bm(d,8,this.length),nB.read(this,d,!1,52,8)};$d.prototype.writeUIntLE=function(d,k,n,b){(d=+d,k>>>=0,n>>>=0,b)||Fo(this,d,k,n,Math.pow(2,8*n)-1,0);b=1;var e=0;for(this[k]=255&d;++e<n&&(b*=256);)this[k+e]=d/b&255;return k+n};$d.prototype.writeUIntBE=function(d,k,n,b){(d=+d,k>>>=0,n>>>=0,b)||Fo(this,d,k,n,Math.pow(2,8*n)-1,0);b=n-1;var e=1;for(this[k+b]=255&d;0<=--b&&(e*=256);)this[k+b]=d/e&255;return k+n};$d.prototype.writeUInt8=function(d,k,
n){return d=+d,k>>>=0,n||Fo(this,d,k,1,255,0),this[k]=255&d,k+1};$d.prototype.writeUInt16LE=function(d,k,n){return d=+d,k>>>=0,n||Fo(this,d,k,2,65535,0),this[k]=255&d,this[k+1]=d>>>8,k+2};$d.prototype.writeUInt16BE=function(d,k,n){return d=+d,k>>>=0,n||Fo(this,d,k,2,65535,0),this[k]=d>>>8,this[k+1]=255&d,k+2};$d.prototype.writeUInt32LE=function(d,k,n){return d=+d,k>>>=0,n||Fo(this,d,k,4,4294967295,0),this[k+3]=d>>>24,this[k+2]=d>>>16,this[k+1]=d>>>8,this[k]=255&d,k+4};$d.prototype.writeUInt32BE=function(d,
k,n){return d=+d,k>>>=0,n||Fo(this,d,k,4,4294967295,0),this[k]=d>>>24,this[k+1]=d>>>16,this[k+2]=d>>>8,this[k+3]=255&d,k+4};$d.prototype.writeIntLE=function(d,k,n,b){(d=+d,k>>>=0,b)||(b=Math.pow(2,8*n-1),Fo(this,d,k,n,b-1,-b));b=0;var e=1,l=0;for(this[k]=255&d;++b<n&&(e*=256);)0>d&&0===l&&0!==this[k+b-1]&&(l=1),this[k+b]=(d/e>>0)-l&255;return k+n};$d.prototype.writeIntBE=function(d,k,n,b){(d=+d,k>>>=0,b)||(b=Math.pow(2,8*n-1),Fo(this,d,k,n,b-1,-b));b=n-1;var e=1,l=0;for(this[k+b]=255&d;0<=--b&&(e*=
256);)0>d&&0===l&&0!==this[k+b+1]&&(l=1),this[k+b]=(d/e>>0)-l&255;return k+n};$d.prototype.writeInt8=function(d,k,n){return d=+d,k>>>=0,n||Fo(this,d,k,1,127,-128),0>d&&(d=255+d+1),this[k]=255&d,k+1};$d.prototype.writeInt16LE=function(d,k,n){return d=+d,k>>>=0,n||Fo(this,d,k,2,32767,-32768),this[k]=255&d,this[k+1]=d>>>8,k+2};$d.prototype.writeInt16BE=function(d,k,n){return d=+d,k>>>=0,n||Fo(this,d,k,2,32767,-32768),this[k]=d>>>8,this[k+1]=255&d,k+2};$d.prototype.writeInt32LE=function(d,k,n){return d=
+d,k>>>=0,n||Fo(this,d,k,4,2147483647,-2147483648),this[k]=255&d,this[k+1]=d>>>8,this[k+2]=d>>>16,this[k+3]=d>>>24,k+4};$d.prototype.writeInt32BE=function(d,k,n){return d=+d,k>>>=0,n||Fo(this,d,k,4,2147483647,-2147483648),0>d&&(d=4294967295+d+1),this[k]=d>>>24,this[k+1]=d>>>16,this[k+2]=d>>>8,this[k+3]=255&d,k+4};$d.prototype.writeFloatLE=function(d,k,n){return lX(this,d,k,!0,n)};$d.prototype.writeFloatBE=function(d,k,n){return lX(this,d,k,!1,n)};$d.prototype.writeDoubleLE=function(d,k,n){return mX(this,
d,k,!0,n)};$d.prototype.writeDoubleBE=function(d,k,n){return mX(this,d,k,!1,n)};$d.prototype.copy=function(d,k,n,b){if(!$d.isBuffer(d))throw new TypeError("argument should be a Buffer");if((n||(n=0),b||0===b||(b=this.length),k>=d.length&&(k=d.length),k||(k=0),0<b&&b<n&&(b=n),b===n)||0===d.length||0===this.length)return 0;if(0>k)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>b)throw new RangeError("sourceEnd out of bounds");
b>this.length&&(b=this.length);d.length-k<b-n&&(b=d.length-k+n);var e=b-n;if(this===d&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(k,n,b);else if(this===d&&n<k&&k<b)for(b=e-1;0<=b;--b)d[b+k]=this[b+n];else Uint8Array.prototype.set.call(d,this.subarray(n,b),k);return e};$d.prototype.fill=function(d,k,n,b){if("string"==typeof d){if("string"==typeof k?(b=k,k=0,n=this.length):"string"==typeof n&&(b=n,n=this.length),void 0!==b&&"string"!=typeof b)throw new TypeError("encoding must be a string");
if("string"==typeof b&&!$d.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(1===d.length){var e=d.charCodeAt(0);("utf8"===b&&128>e||"latin1"===b)&&(d=e)}}else"number"==typeof d?d&=255:"boolean"==typeof d&&(d=Number(d));if(0>k||this.length<k||this.length<n)throw new RangeError("Out of range index");if(n<=k)return this;if(k>>>=0,n=void 0===n?this.length:n>>>0,d||(d=0),"number"==typeof d)for(b=k;b<n;++b)this[b]=d;else{e=$d.isBuffer(d)?d:$d.from(d,b);var l=e.length;if(0===l)throw new TypeError('The value "'+
d+'" is invalid for argument "value"');for(b=0;b<n-k;++b)this[b+k]=e[b%l]}return this};var a$=/[^+/0-9A-Za-z-_]/g,$9=function(){for(var d=Array(256),k=0;16>k;++k)for(var n=16*k,b=0;16>b;++b)d[n+b]="0123456789abcdef"[k]+"0123456789abcdef"[b];return d}(),IK={},JK=eh,Pt=JK.Buffer;Pt.from&&Pt.alloc&&Pt.allocUnsafe&&Pt.allocUnsafeSlow?IK=JK:(nX(JK,IK),IK.Buffer=gz);gz.prototype=Object.create(Pt.prototype);nX(Pt,gz);gz.from=function(d,k,n){if("number"==typeof d)throw new TypeError("Argument must not be a number");
return Pt(d,k,n)};gz.alloc=function(d,k,n){if("number"!=typeof d)throw new TypeError("Argument must be a number");d=Pt(d);return void 0!==k?"string"==typeof n?d.fill(k,n):d.fill(k):d.fill(0),d};gz.allocUnsafe=function(d){if("number"!=typeof d)throw new TypeError("Argument must be a number");return Pt(d)};gz.allocUnsafeSlow=function(d){if("number"!=typeof d)throw new TypeError("Argument must be a number");return JK.SlowBuffer(d)};var ci=IK,oB={},AN=ci.Buffer,oX=AN.isEncoding||function(d){switch((d=
""+d)&&d.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};oB.StringDecoder=GD;GD.prototype.write=function(d){if(0===d.length)return"";var k;if(this.lastNeed){if(void 0===(k=this.fillLast(d)))return"";var n=this.lastNeed;this.lastNeed=0}else n=0;return n<d.length?k?k+this.text(d,n):this.text(d,n):k||""};GD.prototype.end=function(d){d=d&&d.length?this.write(d):"";
return this.lastNeed?d+"\ufffd":d};GD.prototype.text=function(d,k){var n=d.length-1;if(n<k)n=0;else{var b=BN(d[n]);n=0<=b?(0<b&&(this.lastNeed=b-1),b):--n<k||-2===b?0:0<=(b=BN(d[n]))?(0<b&&(this.lastNeed=b-2),b):--n<k||-2===b?0:0<=(b=BN(d[n]))?(0<b&&(2===b?b=0:this.lastNeed=b-3),b):0}if(!this.lastNeed)return d.toString("utf8",k);this.lastTotal=n;b=d.length-(n-this.lastNeed);return d.copy(this.lastChar,0,b),d.toString("utf8",k,b)};GD.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length);this.lastNeed-=d.length};var QH=Qt.EventEmitter,gs={},pX={};Lq("ERR_INVALID_OPT_VALUE",function(d,k){return'The value "'+k+'" is invalid for option "'+d+'"'},TypeError);Lq("ERR_INVALID_ARG_TYPE",function(d,k,n){var b;d=("string"==typeof k&&"not "===k.substr(0,4)?(b="must not be",k=k.replace(/^not /,"")):b="must be",function(e,l,a){return(void 0===
a||a>e.length)&&(a=e.length),e.substring(a-l.length,a)===l}(d," argument"))?"The "+d+" "+b+" "+qX(k,"type"):'The "'+d+'" '+(function(e,l,a){return"number"!=typeof a&&(a=0),!(a+l.length>e.length)&&-1!==e.indexOf(l,a)}(d,".")?"property":"argument")+" "+b+" "+qX(k,"type");return d+=". Received type "+typeof n,d},TypeError);Lq("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Lq("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"});Lq("ERR_STREAM_PREMATURE_CLOSE",
"Premature close");Lq("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"});Lq("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Lq("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Lq("ERR_STREAM_WRITE_AFTER_END","write after end");Lq("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Lq("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError);Lq("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");
gs.codes=pX;var yX=function(){throw Error("Readable.from is not available in the browser");},DN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,AX=function(d,k){if(CN("noDeprecation"))return d;var n=!1;return function(){if(!n){if(CN("throwDeprecation"))throw Error(k);CN("traceDeprecation")?console.trace(k):console.warn(k);n=!0}return d.apply(this||DN,arguments)}},KK=eh.Buffer,NR=Sg.inspect,Kia=NR&&NR.custom||"inspect",n$=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
!0;this.tail=this.head=null;this.length=0}var k;return k=[{key:"push",value:function(n){n={data:n,next:null};0<this.length?this.tail.next=n:this.head=n;this.tail=n;++this.length}},{key:"unshift",value:function(n){n={data:n,next:this.head};0===this.length&&(this.tail=n);this.head=n;++this.length}},{key:"shift",value:function(){if(0!==this.length){var n=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=
this.tail=null;this.length=0}},{key:"join",value:function(n){if(0===this.length)return"";for(var b=this.head,e=""+b.data;b=b.next;)e+=n+b.data;return e}},{key:"concat",value:function(n){if(0===this.length)return KK.alloc(0);for(var b,e,l=KK.allocUnsafe(n>>>0),a=this.head,f=0;a;)n=a.data,b=l,e=f,void KK.prototype.copy.call(n,b,e),f+=a.data.length,a=a.next;return l}},{key:"consume",value:function(n,b){var e;return n<this.head.data.length?(e=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):
e=n===this.head.data.length?this.shift():b?this._getString(n):this._getBuffer(n),e}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var b=this.head,e=1,l=b.data;for(n-=l.length;b=b.next;){var a=b.data,f=n>a.length?a.length:n;if(f===a.length?l+=a:l+=a.slice(0,n),0==(n-=f)){f===a.length?(++e,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(f));break}++e}return this.length-=e,l}},{key:"_getBuffer",value:function(n){var b=KK.allocUnsafe(n),
e=this.head,l=1;e.data.copy(b);for(n-=e.data.length;e=e.next;){var a=e.data,f=n>a.length?a.length:n;if(a.copy(b,b.length-n,0,f),0==(n-=f)){f===a.length?(++l,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=a.slice(f));break}++l}return this.length-=l,b}},{key:Kia,value:function(n,b){return NR(this,function(e){for(var l=1;l<arguments.length;l++){var a=null!=arguments[l]?arguments[l]:{};l%2?rX(Object(a),!0).forEach(function(f){var m=a[f];f in e?Object.defineProperty(e,f,{value:m,
enumerable:!0,configurable:!0,writable:!0}):e[f]=m}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rX(Object(a)).forEach(function(f){Object.defineProperty(e,f,Object.getOwnPropertyDescriptor(a,f))})}return e}({},b,{depth:0,customInspect:!1}))}}],i$(d.prototype,k),d}(),Yz=Qh,wX={destroy:function(d,k){var n=this,b=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||b?(k?k(d):d&&(this._writableState?
this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Yz.nextTick(EN,this,d)):Yz.nextTick(EN,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(e){!k&&e?n._writableState?n._writableState.errorEmitted?Yz.nextTick(PH,n):(n._writableState.errorEmitted=!0,Yz.nextTick(sX,n,e)):Yz.nextTick(sX,n,e):k?(Yz.nextTick(PH,n),k(e)):Yz.nextTick(PH,n)}),this)},undestroy:function(){this._readableState&&
(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(d,k){var n=d._readableState,b=d._writableState;n&&n.autoDestroy||b&&b.autoDestroy?d.destroy(k):
d.emit("error",k)}},Lia=gs.codes.ERR_INVALID_OPT_VALUE,xX={getHighWaterMark:function(d,k,n,b){k=null!=k.highWaterMark?k.highWaterMark:b?k[n]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new Lia(b?n:"highWaterMark",k);return Math.floor(k)}return d.objectMode?16:16384}},e4=gs.codes.ERR_STREAM_PREMATURE_CLOSE,OR,tX=Qh,Mia=function e(k,n,b){if("function"==typeof n)return e(k,null,n);n||(n={});b=function(B){var C=!1;return function(){if(!C){C=!0;for(var G=arguments.length,F=Array(G),
N=0;N<G;N++)F[N]=arguments[N];B.apply(this,F)}}}(b||j$);var l=n.readable||!1!==n.readable&&k.readable,a=n.writable||!1!==n.writable&&k.writable,f=function(){k.writable||q()},m=k._writableState&&k._writableState.finished,q=function(){a=!1;m=!0;l||b.call(k)},r=k._readableState&&k._readableState.endEmitted,u=function(){l=!1;r=!0;a||b.call(k)},v=function(B){b.call(k,B)},y=function(){var B;return l&&!r?(k._readableState&&k._readableState.ended||(B=new e4),b.call(k,B)):a&&!m?(k._writableState&&k._writableState.ended||
(B=new e4),b.call(k,B)):void 0},z=function(){k.req.on("finish",q)};return k.setHeader&&"function"==typeof k.abort?(k.on("complete",q),k.on("abort",y),k.req?z():k.on("request",z)):a&&!k._writableState&&(k.on("end",f),k.on("close",f)),k.on("end",u),k.on("finish",q),!1!==n.error&&k.on("error",v),k.on("close",y),function(){k.removeListener("complete",q);k.removeListener("abort",y);k.removeListener("request",z);k.req&&k.req.removeListener("finish",q);k.removeListener("end",f);k.removeListener("close",
f);k.removeListener("finish",q);k.removeListener("end",u);k.removeListener("error",v);k.removeListener("close",y)}},lx=Symbol("lastResolve"),jz=Symbol("lastReject"),pF=Symbol("error"),LK=Symbol("ended"),iz=Symbol("lastPromise"),PR=Symbol("handlePromise"),hz=Symbol("stream"),Nia=Object.getPrototypeOf(function(){}),Oia=Object.setPrototypeOf((jx(OR={get stream(){return this[hz]},next:function(){var k=this,n=this[pF];if(null!==n)return Promise.reject(n);if(this[LK])return Promise.resolve(kx(void 0,!0));
if(this[hz].destroyed)return new Promise(function(b,e){tX.nextTick(function(){k[pF]?e(k[pF]):b(kx(void 0,!0))})});if(n=this[iz])n=new Promise(function(b,e){return function(l,a){b.then(function(){if(e[LK])return l(kx(void 0,!0)),void 0;e[PR](l,a)},a)}}(n,this));else{n=this[hz].read();if(null!==n)return Promise.resolve(kx(n,!1));n=new Promise(this[PR])}return this[iz]=n,n}},Symbol.asyncIterator,function(){return this}),jx(OR,"return",function(){var k=this;return new Promise(function(n,b){k[hz].destroy(null,
function(e){if(e)return b(e),void 0;n(kx(void 0,!0))})})}),OR),Nia),o$=function(k){var n,b=Object.create(Oia,(jx(n={},hz,{value:k,writable:!0}),jx(n,lx,{value:null,writable:!0}),jx(n,jz,{value:null,writable:!0}),jx(n,pF,{value:null,writable:!0}),jx(n,LK,{value:k._readableState.endEmitted,writable:!0}),jx(n,PR,{value:function(e,l){var a=b[hz].read();a?(b[iz]=null,b[lx]=null,b[jz]=null,e(kx(a,!1))):(b[lx]=e,b[jz]=l)},writable:!0}),n));return b[iz]=null,Mia(k,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==
e.code){var l=b[jz];return null!==l&&(b[iz]=null,b[lx]=null,b[jz]=null,l(e)),b[pF]=e,void 0}e=b[lx];null!==e&&(b[iz]=null,b[lx]=null,b[jz]=null,e(kx(void 0,!0)));b[LK]=!0}),k.on("readable",l$.bind(null,b)),b},FN={},vX=!1,m$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,GN={},zX=!1,q$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,HN={},BX=!1,Pia=uX(),f4=gs.codes.ERR_STREAM_PREMATURE_CLOSE,NN=function l(n,b,e){if("function"==typeof b)return l(n,
null,b);b||(b={});e=function(C){var G=!1;return function(){if(!G){G=!0;for(var F=arguments.length,N=Array(F),L=0;L<F;L++)N[L]=arguments[L];C.apply(this,N)}}}(e||r$);var a=b.readable||!1!==b.readable&&n.readable,f=b.writable||!1!==b.writable&&n.writable,m=function(){n.writable||r()},q=n._writableState&&n._writableState.finished,r=function(){f=!1;q=!0;a||e.call(n)},u=n._readableState&&n._readableState.endEmitted,v=function(){a=!1;u=!0;f||e.call(n)},y=function(C){e.call(n,C)},z=function(){var C;return a&&
!u?(n._readableState&&n._readableState.ended||(C=new f4),e.call(n,C)):f&&!q?(n._writableState&&n._writableState.ended||(C=new f4),e.call(n,C)):void 0},B=function(){n.req.on("finish",r)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",r),n.on("abort",z),n.req?B():n.on("request",B)):f&&!n._writableState&&(n.on("end",m),n.on("close",m)),n.on("end",v),n.on("finish",r),!1!==b.error&&n.on("error",y),n.on("close",z),function(){n.removeListener("complete",r);n.removeListener("abort",z);n.removeListener("request",
B);n.req&&n.req.removeListener("finish",r);n.removeListener("end",m);n.removeListener("close",m);n.removeListener("finish",r);n.removeListener("end",v);n.removeListener("error",y);n.removeListener("close",z)}},MK=eh.Buffer,QR=Sg.inspect,Qia=QR&&QR.custom||"inspect",x$=function(){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");!0;this.tail=this.head=null;this.length=0}var b;return b=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=
e:this.head=e;this.tail=e;++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e);this.head=e;++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var l=this.head,a=""+l.data;l=l.next;)a+=e+l.data;
return a}},{key:"concat",value:function(e){if(0===this.length)return MK.alloc(0);for(var l,a,f=MK.allocUnsafe(e>>>0),m=this.head,q=0;m;)e=m.data,l=f,a=q,void MK.prototype.copy.call(e,l,a),q+=m.data.length,m=m.next;return f}},{key:"consume",value:function(e,l){var a;return e<this.head.data.length?(a=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):a=e===this.head.data.length?this.shift():l?this._getString(e):this._getBuffer(e),a}},{key:"first",value:function(){return this.head.data}},
{key:"_getString",value:function(e){var l=this.head,a=1,f=l.data;for(e-=f.length;l=l.next;){var m=l.data,q=e>m.length?m.length:e;if(q===m.length?f+=m:f+=m.slice(0,e),0==(e-=q)){q===m.length?(++a,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=m.slice(q));break}++a}return this.length-=a,f}},{key:"_getBuffer",value:function(e){var l=MK.allocUnsafe(e),a=this.head,f=1;a.data.copy(l);for(e-=a.data.length;a=a.next;){var m=a.data,q=e>m.length?m.length:e;if(m.copy(l,l.length-e,0,q),
0==(e-=q)){q===m.length?(++f,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=m.slice(q));break}++f}return this.length-=f,l}},{key:Qia,value:function(e,l){return QR(this,function(a){for(var f=1;f<arguments.length;f++){var m=null!=arguments[f]?arguments[f]:{};f%2?CX(Object(m),!0).forEach(function(q){var r=m[q];q in a?Object.defineProperty(a,q,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[q]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(m)):
CX(Object(m)).forEach(function(q){Object.defineProperty(a,q,Object.getOwnPropertyDescriptor(m,q))})}return a}({},l,{depth:0,customInspect:!1}))}}],s$(n.prototype,b),n}(),Zz=Qh,GX={destroy:function(n,b){var e=this,l=this._writableState&&this._writableState.destroyed;return this._readableState&&this._readableState.destroyed||l?(b?b(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Zz.nextTick(IN,this,n)):Zz.nextTick(IN,this,n)),this):(this._readableState&&
(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!b&&a?e._writableState?e._writableState.errorEmitted?Zz.nextTick(RH,e):(e._writableState.errorEmitted=!0,Zz.nextTick(DX,e,a)):Zz.nextTick(DX,e,a):b?(Zz.nextTick(RH,e),b(a)):Zz.nextTick(RH,e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,b){var e=n._readableState,l=n._writableState;e&&e.autoDestroy||l&&l.autoDestroy?n.destroy(b):n.emit("error",b)}},Ria=gs.codes.ERR_INVALID_OPT_VALUE,RR,HX={getHighWaterMark:function(n,b,e,l){b=null!=b.highWaterMark?b.highWaterMark:l?b[e]:null;
if(null!=b){if(!isFinite(b)||Math.floor(b)!==b||0>b)throw new Ria(l?e:"highWaterMark",b);return Math.floor(b)}return n.objectMode?16:16384}},EX=Qh,Sia=NN,ox=Symbol("lastResolve"),mz=Symbol("lastReject"),qF=Symbol("error"),NK=Symbol("ended"),lz=Symbol("lastPromise"),SR=Symbol("handlePromise"),kz=Symbol("stream"),Tia=Object.getPrototypeOf(function(){}),Uia=Object.setPrototypeOf((mx(RR={get stream(){return this[kz]},next:function(){var n=this,b=this[qF];if(null!==b)return Promise.reject(b);if(this[NK])return Promise.resolve(nx(void 0,
!0));if(this[kz].destroyed)return new Promise(function(e,l){EX.nextTick(function(){n[qF]?l(n[qF]):e(nx(void 0,!0))})});if(b=this[lz])b=new Promise(function(e,l){return function(a,f){e.then(function(){if(l[NK])return a(nx(void 0,!0)),void 0;l[SR](a,f)},f)}}(b,this));else{b=this[kz].read();if(null!==b)return Promise.resolve(nx(b,!1));b=new Promise(this[SR])}return this[lz]=b,b}},Symbol.asyncIterator,function(){return this}),mx(RR,"return",function(){var n=this;return new Promise(function(b,e){n[kz].destroy(null,
function(l){if(l)return e(l),void 0;b(nx(void 0,!0))})})}),RR),Tia),y$=function(n){var b,e=Object.create(Uia,(mx(b={},kz,{value:n,writable:!0}),mx(b,ox,{value:null,writable:!0}),mx(b,mz,{value:null,writable:!0}),mx(b,qF,{value:null,writable:!0}),mx(b,NK,{value:n._readableState.endEmitted,writable:!0}),mx(b,SR,{value:function(l,a){var f=e[kz].read();f?(e[lz]=null,e[ox]=null,e[mz]=null,l(nx(f,!1))):(e[ox]=l,e[mz]=a)},writable:!0}),b));return e[lz]=null,Sia(n,function(l){if(l&&"ERR_STREAM_PREMATURE_CLOSE"!==
l.code){var a=e[mz];return null!==a&&(e[lz]=null,e[ox]=null,e[mz]=null,a(l)),e[qF]=l,void 0}l=e[ox];null!==l&&(e[lz]=null,e[ox]=null,e[mz]=null,l(nx(void 0,!0)));e[NK]=!0}),n.on("readable",u$.bind(null,e)),e},JN={},FX=!1,w$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,KN={},JX=!1,z$="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,LN={},KX=!1,Via=IX(),g4=HD(),OK=gs.codes,Wia=OK.ERR_METHOD_NOT_IMPLEMENTED,B$=OK.ERR_MULTIPLE_CALLBACK,E$=
OK.ERR_TRANSFORM_ALREADY_TRANSFORMING,D$=OK.ERR_TRANSFORM_WITH_LENGTH_0,TH=g4;oh(Rt,TH);Rt.prototype.push=function(n,b){return this._transformState.needTransform=!1,TH.prototype.push.call(this,n,b)};Rt.prototype._transform=function(n,b,e){e(new Wia("_transform()"))};Rt.prototype._write=function(n,b,e){var l=this._transformState;(l.writecb=e,l.writechunk=n,l.writeencoding=b,l.transforming)||(n=this._readableState,(l.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))};
Rt.prototype._read=function(n){n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))};Rt.prototype._destroy=function(n,b){TH.prototype._destroy.call(this,n,function(e){b(e)})};var MX=Rt;oh(ID,MX);ID.prototype._transform=function(n,b,e){e(null,n)};var MN,h4=gs.codes,Xia=h4.ERR_MISSING_ARGS,G$=h4.ERR_STREAM_DESTROYED,PN="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,
ON=Qt.EventEmitter;oh(Mq,ON);Mq.Readable=Pia;Mq.Writable=Via;Mq.Duplex=g4;Mq.Transform=Rt;Mq.PassThrough=ID;Mq.finished=NN;Mq.pipeline=function(){for(var n=arguments.length,b=Array(n),e=0;e<n;e++)b[e]=arguments[e];var l,a=b.length?"function"!=typeof b[b.length-1]?NX:b.pop():NX;if(Array.isArray(b[0])&&(b=b[0]),2>b.length)throw new Xia("streams");var f=b.map(function(m,q){var r=q<b.length-1;return F$(m,r,0<q,function(u){l||(l=u);u&&f.forEach(OX);r||(f.forEach(OX),a(l))})});return b.reduce(H$)};Mq.Stream=
Mq;Mq.prototype.pipe=function(n,b){function e(v){n.writable&&!1===n.write(v)&&r.pause&&r.pause()}function l(){r.readable&&r.resume&&r.resume()}function a(){u||(u=!0,n.end())}function f(){u||(u=!0,"function"==typeof n.destroy&&n.destroy())}function m(v){if(q(),0===ON.listenerCount(this||PN,"error"))throw v;}function q(){r.removeListener("data",e);n.removeListener("drain",l);r.removeListener("end",a);r.removeListener("close",f);r.removeListener("error",m);n.removeListener("error",m);r.removeListener("end",
q);r.removeListener("close",q);n.removeListener("close",q)}var r=this||PN;r.on("data",e);n.on("drain",l);n._isStdio||b&&!1===b.end||(r.on("end",a),r.on("close",f));var u=!1;return r.on("error",m),n.on("error",m),r.on("end",q),r.on("close",q),n.on("close",q),n.emit("pipe",r),n};var zz=Mq,PK="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,sz={},sC=function(n){if(Object.keys)return Object.keys(n);var b=[],e;for(e in n)b.push(e);return b},$z=function(n,b){if(n.forEach)return n.forEach(b);
for(var e=0;e<n.length;e++)b(n[e],e,n)},Yia=function(){try{return Object.defineProperty({},"_",{}),function(n,b,e){Object.defineProperty(n,b,{writable:!0,enumerable:!1,configurable:!0,value:e})}}catch(n){return function(b,e,l){b[e]=l}}}(),i4="Array Boolean Date Error EvalError Function Infinity JSON Math NaN Number Object RangeError ReferenceError RegExp String SyntaxError TypeError URIError decodeURI decodeURIComponent encodeURI encodeURIComponent escape eval isFinite isNaN parseFloat parseInt undefined unescape".split(" ");
UH.prototype={};var uu=sz.Script=function(n){if(!((this||PK)instanceof uu))return new uu(n);(this||PK).code=n};uu.prototype.runInContext=function(n){if(!(n instanceof UH))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={});b.style.display="none";document.body.appendChild(b);var e=b.contentWindow,l=e.eval,a=e.execScript;!l&&a&&(a.call(e,"null"),l=e.eval);$z(sC(n),function(m){e[m]=n[m]});$z(i4,function(m){n[m]&&(e[m]=n[m])});var f=sC(e);l=
l.call(e,(this||PK).code);return $z(sC(e),function(m){var q;if(!(q=m in n)){a:if(f.indexOf)q=f.indexOf(m);else{for(q=0;q<f.length;q++)if(f[q]===m)break a;q=-1}q=-1===q}q&&(n[m]=e[m])}),$z(i4,function(m){m in n||Yia(n,m,e[m])}),document.body.removeChild(b),l};uu.prototype.runInThisContext=function(){return eval((this||PK).code)};uu.prototype.runInNewContext=function(n){var b=uu.createContext(n),e=this.runInContext(b);return n&&$z(sC(b),function(l){n[l]=b[l]}),e};$z(sC(uu.prototype),function(n){sz[n]=
uu[n]=function(b){var e=uu(b);return e[n].apply(e,[].slice.call(arguments,1))}});sz.isContext=function(n){return n instanceof UH};sz.createScript=function(n){return sz.Script(n)};sz.createContext=uu.createContext=function(n){var b=new UH;return"object"==typeof n&&$z(sC(n),function(e){b[e]=n[e]}),b};var j4="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Zia=Qh,$ia=ci.Buffer,QK=j4.crypto||j4.msCrypto,Wx=QK&&QK.getRandomValues?function(n,b){if(4294967295<n)throw new RangeError("requested too many random bytes");
var e=$ia.allocUnsafe(n);if(0<n)if(65536<n)for(var l=0;l<n;l+=65536)QK.getRandomValues(e.slice(l,l+65536));else QK.getRandomValues(e);return"function"==typeof b?Zia.nextTick(function(){b(null,e)}):e}:function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");},VH=ci.Buffer,PX=zz.Transform;oh(Hv,PX);Hv.prototype._transform=function(n,b,e){var l=null;try{this.update(n,b)}catch(a){l=a}e(l)};Hv.prototype._flush=function(n){var b=
null;try{this.push(this.digest())}catch(e){b=e}n(b)};Hv.prototype.update=function(n,b){var e=n;if(!VH.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(!0,this._finalized)throw Error("Digest already called");VH.isBuffer(n)||(n=VH.from(n,b));b=this._block;for(e=0;this._blockOffset+n.length-e>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)b[l++]=n[e++];this._update();this._blockOffset=0}for(;e<n.length;)b[this._blockOffset++]=n[e++];b=0;for(n=
8*n.length;0<n;++b)this._length[b]+=n,0<(n=this._length[b]/4294967296|0)&&(this._length[b]-=4294967296*n);return this};Hv.prototype._update=function(){throw Error("_update is not implemented");};Hv.prototype.digest=function(n){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var b=this._digest();void 0!==n&&(b=b.toString(n));this._block.fill(0);for(n=this._blockOffset=0;4>n;++n)this._length[n]=0;return b};Hv.prototype._digest=function(){throw Error("_digest is not implemented");
};var QX=Hv,aja=ci.Buffer,pf=Array(16);oh(pB,QX);pB.prototype._update=function(){for(var n=0;16>n;++n)pf[n]=this._block.readInt32LE(4*n);n=this._a;var b=this._b,e=this._c,l=this._d;n=kn(n,b,e,l,pf[0],3614090360,7);l=kn(l,n,b,e,pf[1],3905402710,12);e=kn(e,l,n,b,pf[2],606105819,17);b=kn(b,e,l,n,pf[3],3250441966,22);n=kn(n,b,e,l,pf[4],4118548399,7);l=kn(l,n,b,e,pf[5],1200080426,12);e=kn(e,l,n,b,pf[6],2821735955,17);b=kn(b,e,l,n,pf[7],4249261313,22);n=kn(n,b,e,l,pf[8],1770035416,7);l=kn(l,n,b,e,pf[9],
2336552879,12);e=kn(e,l,n,b,pf[10],4294925233,17);b=kn(b,e,l,n,pf[11],2304563134,22);n=kn(n,b,e,l,pf[12],1804603682,7);l=kn(l,n,b,e,pf[13],4254626195,12);e=kn(e,l,n,b,pf[14],2792965006,17);n=ln(n,b=kn(b,e,l,n,pf[15],1236535329,22),e,l,pf[1],4129170786,5);l=ln(l,n,b,e,pf[6],3225465664,9);e=ln(e,l,n,b,pf[11],643717713,14);b=ln(b,e,l,n,pf[0],3921069994,20);n=ln(n,b,e,l,pf[5],3593408605,5);l=ln(l,n,b,e,pf[10],38016083,9);e=ln(e,l,n,b,pf[15],3634488961,14);b=ln(b,e,l,n,pf[4],3889429448,20);n=ln(n,b,e,
l,pf[9],568446438,5);l=ln(l,n,b,e,pf[14],3275163606,9);e=ln(e,l,n,b,pf[3],4107603335,14);b=ln(b,e,l,n,pf[8],1163531501,20);n=ln(n,b,e,l,pf[13],2850285829,5);l=ln(l,n,b,e,pf[2],4243563512,9);e=ln(e,l,n,b,pf[7],1735328473,14);n=mn(n,b=ln(b,e,l,n,pf[12],2368359562,20),e,l,pf[5],4294588738,4);l=mn(l,n,b,e,pf[8],2272392833,11);e=mn(e,l,n,b,pf[11],1839030562,16);b=mn(b,e,l,n,pf[14],4259657740,23);n=mn(n,b,e,l,pf[1],2763975236,4);l=mn(l,n,b,e,pf[4],1272893353,11);e=mn(e,l,n,b,pf[7],4139469664,16);b=mn(b,
e,l,n,pf[10],3200236656,23);n=mn(n,b,e,l,pf[13],681279174,4);l=mn(l,n,b,e,pf[0],3936430074,11);e=mn(e,l,n,b,pf[3],3572445317,16);b=mn(b,e,l,n,pf[6],76029189,23);n=mn(n,b,e,l,pf[9],3654602809,4);l=mn(l,n,b,e,pf[12],3873151461,11);e=mn(e,l,n,b,pf[15],530742520,16);n=nn(n,b=mn(b,e,l,n,pf[2],3299628645,23),e,l,pf[0],4096336452,6);l=nn(l,n,b,e,pf[7],1126891415,10);e=nn(e,l,n,b,pf[14],2878612391,15);b=nn(b,e,l,n,pf[5],4237533241,21);n=nn(n,b,e,l,pf[12],1700485571,6);l=nn(l,n,b,e,pf[3],2399980690,10);e=
nn(e,l,n,b,pf[10],4293915773,15);b=nn(b,e,l,n,pf[1],2240044497,21);n=nn(n,b,e,l,pf[8],1873313359,6);l=nn(l,n,b,e,pf[15],4264355552,10);e=nn(e,l,n,b,pf[6],2734768916,15);b=nn(b,e,l,n,pf[13],1309151649,21);n=nn(n,b,e,l,pf[4],4149444226,6);l=nn(l,n,b,e,pf[11],3174756917,10);e=nn(e,l,n,b,pf[2],718787259,15);b=nn(b,e,l,n,pf[9],3951481745,21);this._a=this._a+n|0;this._b=this._b+b|0;this._c=this._c+e|0;this._d=this._d+l|0};pB.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&
(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=aja.allocUnsafe(16);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n};var TR=eh.Buffer,RX=Hv,Fs=Array(16),rF=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,
2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],sF=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],tF=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],uF=[8,
9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],vF=[0,1518500249,1859775393,2400959708,2840853838],wF=[1352829926,1548603684,1836072691,2053994217,0];oh(qB,RX);qB.prototype._update=function(){for(var n=0;16>n;++n)Fs[n]=this._block.readInt32LE(4*n);var b=0|this._a;n=0|this._b;for(var e=0|this._c,l=0|this._d,a=0|this._e,f=0|this._a,m=0|this._b,q=0|this._c,
r=0|this._d,u=0|this._e,v=0;80>v;v+=1){if(16>v){var y=a;y=Nq(b+(n^e^l)+Fs[rF[v]]+vF[0]|0,tF[v])+y|0;b=u;var z=Nq(f+(m^(q|~r))+Fs[sF[v]]+wF[0]|0,uF[v])+b|0}else 32>v?(y=a,y=Nq(b+(n&e|~n&l)+Fs[rF[v]]+vF[1]|0,tF[v])+y|0,b=u,z=Nq(f+(m&r|q&~r)+Fs[sF[v]]+wF[1]|0,uF[v])+b|0):48>v?(y=a,y=Nq(b+((n|~e)^l)+Fs[rF[v]]+vF[2]|0,tF[v])+y|0,b=u,z=Nq(f+((m|~q)^r)+Fs[sF[v]]+wF[2]|0,uF[v])+b|0):64>v?(y=a,y=Nq(b+(n&l|e&~l)+Fs[rF[v]]+vF[3]|0,tF[v])+y|0,b=u,z=Nq(f+(m&q|~m&r)+Fs[sF[v]]+wF[3]|0,uF[v])+b|0):(y=a,y=Nq(b+(n^
(e|~l))+Fs[rF[v]]+vF[4]|0,tF[v])+y|0,b=u,z=Nq(f+(m^q^r)+Fs[sF[v]]+wF[4]|0,uF[v])+b|0);b=a;a=l;l=Nq(e,10);e=n;n=y;f=u;u=r;r=Nq(q,10);q=m;m=z}e=this._b+e+r|0;this._b=this._c+l+u|0;this._c=this._d+a+f|0;this._d=this._e+b+m|0;this._e=this._a+n+q|0;this._a=e};qB.prototype._digest=function(){this._block[this._blockOffset++]=128;56<this._blockOffset&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0);this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],
56);this._block.writeUInt32LE(this._length[1],60);this._update();var n=TR.alloc?TR.alloc(20):new TR(20);return n.writeInt32LE(this._a,0),n.writeInt32LE(this._b,4),n.writeInt32LE(this._c,8),n.writeInt32LE(this._d,12),n.writeInt32LE(this._e,16),n};var Qj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,SX=ci.Buffer;Iv.prototype.update=function(n,b){"string"==typeof n&&(b=b||"utf8",n=SX.from(n,b));b=(this||Qj)._block;for(var e=(this||Qj)._blockSize,l=n.length,a=(this||Qj)._len,
f=0;f<l;){for(var m=a%e,q=Math.min(l-f,e-m),r=0;r<q;r++)b[m+r]=n[f+r];f+=q;0==(a+=q)%e&&this._update(b)}return(this||Qj)._len+=l,this||Qj};Iv.prototype.digest=function(n){var b=(this||Qj)._len%(this||Qj)._blockSize;(this||Qj)._block[b]=128;(this||Qj)._block.fill(0,b+1);b>=(this||Qj)._finalSize&&(this._update((this||Qj)._block),(this||Qj)._block.fill(0));b=8*(this||Qj)._len;if(4294967295>=b)(this||Qj)._block.writeUInt32BE(b,(this||Qj)._blockSize-4);else{var e=(4294967295&b)>>>0;(this||Qj)._block.writeUInt32BE((b-
e)/4294967296,(this||Qj)._blockSize-8);(this||Qj)._block.writeUInt32BE(e,(this||Qj)._blockSize-4)}this._update((this||Qj)._block);b=this._hash();return n?b.toString(n):b};Iv.prototype._update=function(){throw Error("_update must be implemented by subclass");};var fh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,TX=Iv,bja=ci.Buffer,cja=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,
2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,
2428436474,2756734187,3204031479,3329325298],I$=Array(64);oh(rB,TX);rB.prototype.init=function(){return(this||fh)._a=1779033703,(this||fh)._b=3144134277,(this||fh)._c=1013904242,(this||fh)._d=2773480762,(this||fh)._e=1359893119,(this||fh)._f=2600822924,(this||fh)._g=528734635,(this||fh)._h=1541459225,this||fh};rB.prototype._update=function(n){for(var b,e=(this||fh)._w,l=0|(this||fh)._a,a=0|(this||fh)._b,f=0|(this||fh)._c,m=0|(this||fh)._d,q=0|(this||fh)._e,r=0|(this||fh)._f,u=0|(this||fh)._g,v=0|
(this||fh)._h,y=0;16>y;++y)e[y]=n.readInt32BE(4*y);for(;64>y;++y){n=y;var z=(((b=e[y-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)+e[y-7],B=e[y-15];e[n]=0|z+((B>>>7|B<<25)^(B>>>18|B<<14)^B>>>3)+e[y-16]}for(b=0;64>b;++b)y=v+((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(u^q&(r^u))+cja[b]+e[b]|0,n=((l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+(l&a|f&(l|a))|0,v=u,u=r,r=q,q=m+y|0,m=f,f=a,a=l,l=y+n|0;(this||fh)._a=l+(this||fh)._a|0;(this||fh)._b=a+(this||fh)._b|0;(this||fh)._c=f+(this||fh)._c|0;(this||fh)._d=
m+(this||fh)._d|0;(this||fh)._e=q+(this||fh)._e|0;(this||fh)._f=r+(this||fh)._f|0;(this||fh)._g=u+(this||fh)._g|0;(this||fh)._h=v+(this||fh)._h|0};rB.prototype._hash=function(){var n=bja.allocUnsafe(32);return n.writeInt32BE((this||fh)._a,0),n.writeInt32BE((this||fh)._b,4),n.writeInt32BE((this||fh)._c,8),n.writeInt32BE((this||fh)._d,12),n.writeInt32BE((this||fh)._e,16),n.writeInt32BE((this||fh)._f,20),n.writeInt32BE((this||fh)._g,24),n.writeInt32BE((this||fh)._h,28),n};var hj="undefined"!=typeof globalThis?
globalThis:"undefined"!=typeof self?self:global,UX=Iv,dja=ci.Buffer,eja=[1518500249,1859775393,-1894007588,-899497514],J$=Array(80);oh(JD,UX);JD.prototype.init=function(){return(this||hj)._a=1732584193,(this||hj)._b=4023233417,(this||hj)._c=2562383102,(this||hj)._d=271733878,(this||hj)._e=3285377520,this||hj};JD.prototype._update=function(n){for(var b,e=(this||hj)._w,l=0|(this||hj)._a,a=0|(this||hj)._b,f=0|(this||hj)._c,m=0|(this||hj)._d,q=0|(this||hj)._e,r=0;16>r;++r)e[r]=n.readInt32BE(4*r);for(;80>
r;++r)e[r]=e[r-3]^e[r-8]^e[r-14]^e[r-16];for(n=0;80>n;++n)r=~~(n/20),r=0|((b=l)<<5|b>>>27)+(0===r?a&f|~a&m:2===r?a&f|a&m|f&m:a^f^m)+q+e[n]+eja[r],q=m,m=f,f=a<<30|a>>>2,a=l,l=r;(this||hj)._a=l+(this||hj)._a|0;(this||hj)._b=a+(this||hj)._b|0;(this||hj)._c=f+(this||hj)._c|0;(this||hj)._d=m+(this||hj)._d|0;(this||hj)._e=q+(this||hj)._e|0};JD.prototype._hash=function(){var n=dja.allocUnsafe(20);return n.writeInt32BE(0|(this||hj)._a,0),n.writeInt32BE(0|(this||hj)._b,4),n.writeInt32BE(0|(this||hj)._c,8),
n.writeInt32BE(0|(this||hj)._d,12),n.writeInt32BE(0|(this||hj)._e,16),n};var ij="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,VX=Iv,fja=ci.Buffer,gja=[1518500249,1859775393,-1894007588,-899497514],K$=Array(80);oh(KD,VX);KD.prototype.init=function(){return(this||ij)._a=1732584193,(this||ij)._b=4023233417,(this||ij)._c=2562383102,(this||ij)._d=271733878,(this||ij)._e=3285377520,this||ij};KD.prototype._update=function(n){for(var b,e=(this||ij)._w,l=0|(this||ij)._a,a=
0|(this||ij)._b,f=0|(this||ij)._c,m=0|(this||ij)._d,q=0|(this||ij)._e,r=0;16>r;++r)e[r]=n.readInt32BE(4*r);for(;80>r;++r)e[r]=(b=e[r-3]^e[r-8]^e[r-14]^e[r-16])<<1|b>>>31;for(n=0;80>n;++n)b=~~(n/20),b=(l<<5|l>>>27)+(0===b?a&f|~a&m:2===b?a&f|a&m|f&m:a^f^m)+q+e[n]+gja[b]|0,q=m,m=f,f=a<<30|a>>>2,a=l,l=b;(this||ij)._a=l+(this||ij)._a|0;(this||ij)._b=a+(this||ij)._b|0;(this||ij)._c=f+(this||ij)._c|0;(this||ij)._d=m+(this||ij)._d|0;(this||ij)._e=q+(this||ij)._e|0};KD.prototype._hash=function(){var n=fja.allocUnsafe(20);
return n.writeInt32BE(0|(this||ij)._a,0),n.writeInt32BE(0|(this||ij)._b,4),n.writeInt32BE(0|(this||ij)._c,8),n.writeInt32BE(0|(this||ij)._d,12),n.writeInt32BE(0|(this||ij)._e,16),n};var cm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,M$=Iv,hja=ci.Buffer,L$=Array(64);oh(XH,rB);XH.prototype.init=function(){return(this||cm)._a=3238371032,(this||cm)._b=914150663,(this||cm)._c=812702999,(this||cm)._d=4144912697,(this||cm)._e=4290775857,(this||cm)._f=1750603025,(this||
cm)._g=1694076839,(this||cm)._h=3204075428,this||cm};XH.prototype._hash=function(){var n=hja.allocUnsafe(28);return n.writeInt32BE((this||cm)._a,0),n.writeInt32BE((this||cm)._b,4),n.writeInt32BE((this||cm)._c,8),n.writeInt32BE((this||cm)._d,12),n.writeInt32BE((this||cm)._e,16),n.writeInt32BE((this||cm)._f,20),n.writeInt32BE((this||cm)._g,24),n};var me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,WX=Iv,ija=ci.Buffer,k4=[1116352408,3609767458,1899447441,602891725,3049323471,
3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,
2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,
1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,
852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],N$=Array(160);oh(sB,WX);sB.prototype.init=function(){return(this||me)._ah=1779033703,(this||me)._bh=3144134277,(this||me)._ch=1013904242,(this||me)._dh=2773480762,(this||me)._eh=1359893119,(this||me)._fh=2600822924,(this||me)._gh=528734635,(this||me)._hh=1541459225,(this||me)._al=4089235720,(this||me)._bl=2227873595,(this||me)._cl=4271175723,(this||
me)._dl=1595750129,(this||me)._el=2917565137,(this||me)._fl=725511199,(this||me)._gl=4215389547,(this||me)._hl=327033209,this||me};sB.prototype._update=function(n){for(var b=(this||me)._w,e=0|(this||me)._ah,l=0|(this||me)._bh,a=0|(this||me)._ch,f=0|(this||me)._dh,m=0|(this||me)._eh,q=0|(this||me)._fh,r=0|(this||me)._gh,u=0|(this||me)._hh,v=0|(this||me)._al,y=0|(this||me)._bl,z=0|(this||me)._cl,B=0|(this||me)._dl,C=0|(this||me)._el,G=0|(this||me)._fl,F=0|(this||me)._gl,N=0|(this||me)._hl,L=0;32>L;L+=
2)b[L]=n.readInt32BE(4*L),b[L+1]=n.readInt32BE(4*L+4);for(;160>L;L+=2){n=b[L-30];var S=b[L-30+1],ha=(n>>>1|S<<31)^(n>>>8|S<<24)^n>>>7,qa=(S>>>1|n<<31)^(S>>>8|n<<24)^(S>>>7|n<<25);var D=n=b[L-4];var P=S=b[L-4+1];D=(D>>>19|P<<13)^(P>>>29|D<<3)^D>>>6;S=(S>>>19|n<<13)^(n>>>29|S<<3)^(S>>>6|n<<26);P=b[L-32];var J=b[L-32+1];n=qa+b[L-14+1]|0;ha=ha+b[L-14]+dm(n,qa)|0;ha=(ha=ha+D+dm(n=n+S|0,S)|0)+P+dm(n=n+J|0,J)|0;b[L]=ha;b[L+1]=n}for(L=0;160>L;L+=2){ha=b[L];n=b[L+1];S=e&l|a&(e|l);var M=v&y|z&(v|y);P=(e>>>
28|v<<4)^(v>>>2|e<<30)^(v>>>7|e<<25);J=(v>>>28|e<<4)^(e>>>2|v<<30)^(e>>>7|v<<25);var X=k4[L],T=k4[L+1],fa=r^m&(q^r),Ra=F^C&(G^F);qa=N+((C>>>14|m<<18)^(C>>>18|m<<14)^(m>>>9|C<<23))|0;D=u+((m>>>14|C<<18)^(m>>>18|C<<14)^(C>>>9|m<<23))+dm(qa,N)|0;D=(D=(D=D+fa+dm(qa=qa+Ra|0,Ra)|0)+X+dm(qa=qa+T|0,T)|0)+ha+dm(qa=qa+n|0,n)|0;n=J+M|0;ha=P+S+dm(n,J)|0;u=r;N=F;r=q;F=G;q=m;G=C;m=f+D+dm(C=B+qa|0,B)|0;f=a;B=z;a=l;z=y;l=e;y=v;e=D+ha+dm(v=qa+n|0,qa)|0}(this||me)._al=(this||me)._al+v|0;(this||me)._bl=(this||me)._bl+
y|0;(this||me)._cl=(this||me)._cl+z|0;(this||me)._dl=(this||me)._dl+B|0;(this||me)._el=(this||me)._el+C|0;(this||me)._fl=(this||me)._fl+G|0;(this||me)._gl=(this||me)._gl+F|0;(this||me)._hl=(this||me)._hl+N|0;(this||me)._ah=(this||me)._ah+e+dm((this||me)._al,v)|0;(this||me)._bh=(this||me)._bh+l+dm((this||me)._bl,y)|0;(this||me)._ch=(this||me)._ch+a+dm((this||me)._cl,z)|0;(this||me)._dh=(this||me)._dh+f+dm((this||me)._dl,B)|0;(this||me)._eh=(this||me)._eh+m+dm((this||me)._el,C)|0;(this||me)._fh=(this||
me)._fh+q+dm((this||me)._fl,G)|0;(this||me)._gh=(this||me)._gh+r+dm((this||me)._gl,F)|0;(this||me)._hh=(this||me)._hh+u+dm((this||me)._hl,N)|0};sB.prototype._hash=function(){function n(e,l,a){b.writeInt32BE(e,a);b.writeInt32BE(l,a+4)}var b=ija.allocUnsafe(64);return n((this||me)._ah,(this||me)._al,0),n((this||me)._bh,(this||me)._bl,8),n((this||me)._ch,(this||me)._cl,16),n((this||me)._dh,(this||me)._dl,24),n((this||me)._eh,(this||me)._el,32),n((this||me)._fh,(this||me)._fl,40),n((this||me)._gh,(this||
me)._gl,48),n((this||me)._hh,(this||me)._hl,56),b};var Ki="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,P$=Iv,jja=ci.Buffer,O$=Array(160);oh(YH,sB);YH.prototype.init=function(){return(this||Ki)._ah=3418070365,(this||Ki)._bh=1654270250,(this||Ki)._ch=2438529370,(this||Ki)._dh=355462360,(this||Ki)._eh=1731405415,(this||Ki)._fh=2394180231,(this||Ki)._gh=3675008525,(this||Ki)._hh=1203062813,(this||Ki)._al=3238371032,(this||Ki)._bl=914150663,(this||Ki)._cl=812702999,(this||
Ki)._dl=4144912697,(this||Ki)._el=4290775857,(this||Ki)._fl=1750603025,(this||Ki)._gl=1694076839,(this||Ki)._hl=3204075428,this||Ki};YH.prototype._hash=function(){function n(e,l,a){b.writeInt32BE(e,a);b.writeInt32BE(l,a+4)}var b=jja.allocUnsafe(48);return n((this||Ki)._ah,(this||Ki)._al,0),n((this||Ki)._bh,(this||Ki)._bl,8),n((this||Ki)._ch,(this||Ki)._cl,16),n((this||Ki)._dh,(this||Ki)._dl,24),n((this||Ki)._eh,(this||Ki)._el,32),n((this||Ki)._fh,(this||Ki)._fl,40),b};var Xx,l4=Xx={};(Xx=l4=function(n){n=
n.toLowerCase();var b=Xx[n];if(!b)throw Error(n+" is not supported (we accept pull requests)");return new b}).sha=JD;Xx.sha1=KD;Xx.sha224=XH;Xx.sha256=rB;Xx.sha384=YH;Xx.sha512=sB;var UR=l4,pk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,m4=ci.Buffer,XX=zz.Transform,kja=oB.StringDecoder;oh(em,XX);em.prototype.update=function(n,b,e){"string"==typeof n&&(n=m4.from(n,b));n=this._update(n);return(this||pk).hashMode?this||pk:(e&&(n=this._toString(n,e)),n)};em.prototype.setAutoPadding=
function(){};em.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state");};em.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state");};em.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state");};em.prototype._transform=function(n,b,e){try{(this||pk).hashMode?this._update(n):this.push(this._update(n))}catch(a){var l=a}finally{e(l)}};em.prototype._flush=function(n){try{this.push(this.__final())}catch(e){var b=
e}n(b)};em.prototype._finalOrDigest=function(n){var b=this.__final()||m4.alloc(0);return n&&(b=this._toString(b,n,!0)),b};em.prototype._toString=function(n,b,e){if((this||pk)._decoder||((this||pk)._decoder=new kja(b),(this||pk)._encoding=b),(this||pk)._encoding!==b)throw Error("can't switch encodings");n=(this||pk)._decoder.write(n);return e&&(n+=(this||pk)._decoder.end()),n};var YX=em;oh(ZH,YX);ZH.prototype._update=function(n){this._hash.update(n)};ZH.prototype._final=function(){return this._hash.digest()};
var xF=function(n){return"md5"===(n=n.toLowerCase())?new pB:"rmd160"===n||"ripemd160"===n?new qB:new ZH(UR(n))},n4=function(n){return(new pB).update(n).digest()},lja=oh,nz=ci.Buffer,ZX=em,Q$=nz.alloc(128);lja($H,ZX);$H.prototype._update=function(n){this._hash.push(n)};$H.prototype._final=function(){var n=this._alg(nz.concat(this._hash));return this._alg(nz.concat([this._opad,n]))};var mja=oh,$X=em,MD=ci.Buffer,QN=qB,RN=UR,R$=MD.alloc(128);mja(LD,$X);LD.prototype._update=function(n){this._hash.update(n)};
LD.prototype._final=function(){var n=this._hash.digest();return("rmd160"===this._alg?new QN:RN(this._alg)).update(this._opad).update(n).digest()};var o4=function(n,b){return"rmd160"===(n=n.toLowerCase())||"ripemd160"===n?new LD("rmd160",b):"md5"===n?new $H(n4,b):new LD(n,b)},p4={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",
hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},
"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},
"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",
hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},S$=eh.Buffer,nja=Math.pow(2,30)-1,VR,q4=function(n,b,e,l){if(aY(n,"Password"),aY(b,"Salt"),"number"!=typeof e)throw new TypeError("Iterations not a number");if(0>e)throw new TypeError("Bad iterations");if("number"!=typeof l)throw new TypeError("Key length not a number");if(0>l||l>nja||l!=l)throw new TypeError("Bad key length");},r4=Qh;r4.browser?VR="utf-8":VR=6<=parseInt(r4.version.split(".")[0].slice(1),
10)?"utf-8":"binary";var RK=VR,is="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,V$=n4,U$=qB,T$=UR,hs=ci.Buffer,W$=hs.alloc(128),aI={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};bY.prototype.run=function(n,b){return n.copy(b,(this||is).blocksize),this.hash(b).copy((this||is).opad,(this||is).blocksize),this.hash((this||is).opad)};var WR,YR=function(n,b,e,l,a){q4(n,b,e,l);hs.isBuffer(n)||(n=hs.from(n,RK));hs.isBuffer(b)||(b=hs.from(b,
RK));n=new bY(a=a||"sha1",n,b.length);var f=hs.allocUnsafe(l),m=hs.allocUnsafe(b.length+4);b.copy(m,0,0,b.length);var q=0;a=aI[a];l=Math.ceil(l/a);for(var r=1;r<=l;r++){m.writeUInt32BE(r,b.length);for(var u=n.run(m,n.ipad1),v=u,y=1;y<e;y++){v=n.run(v,n.ipad2);for(var z=0;z<a;z++)u[z]^=v[z]}u.copy(f,q);q+=a}return f},yF="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,ZR=Qh,tB=ci.Buffer,ND=yF.crypto&&yF.crypto.subtle,oja={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256",
"sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},$R=[],SK={pbkdf2:function(n,b,e,l,a,f){"function"==typeof a&&(f=a,a=void 0);var m=oja[(a=a||"sha1").toLowerCase()];if(!m||"function"!=typeof yF.Promise)return ZR.nextTick(function(){try{var q=YR(n,b,e,l,a)}catch(r){return f(r)}f(null,q)});if(q4(n,b,e,l),"function"!=typeof f)throw Error("No callback provided to pbkdf2");tB.isBuffer(n)||(n=tB.from(n,RK));tB.isBuffer(b)||(b=tB.from(b,RK));(function(q,r){q.then(function(u){ZR.nextTick(function(){r(null,
u)})},function(u){ZR.nextTick(function(){r(u)})})})(function(q){if(yF.process&&!yF.process.browser||!ND||!ND.importKey||!ND.deriveBits)return Promise.resolve(!1);if(void 0!==$R[q])return $R[q];var r=cY(WR=WR||tB.alloc(8),WR,10,128,q).then(function(){return!0}).catch(function(){return!1});return $R[q]=r,r}(m).then(function(q){return q?cY(n,b,e,l,m):YR(n,b,e,l,a)}),f)}};SK.pbkdf2Sync=YR;dY.equal=function(n,b,e){if(n!=b)throw Error(e||"Assertion failed: "+n+" != "+b);};var Xq=dY,bk={readUInt32BE:function(n,
b){return(n[0+b]<<24|n[1+b]<<16|n[2+b]<<8|n[3+b])>>>0},writeUInt32BE:function(n,b,e){n[0+e]=b>>>24;n[1+e]=b>>>16&255;n[2+e]=b>>>8&255;n[3+e]=255&b},ip:function(n,b,e,l){for(var a=0,f=0,m=6;0<=m;m-=2){for(var q=0;24>=q;q+=8)a<<=1,a|=b>>>q+m&1;for(q=0;24>=q;q+=8)a<<=1,a|=n>>>q+m&1}for(m=6;0<=m;m-=2){for(q=1;25>=q;q+=8)f<<=1,f|=b>>>q+m&1;for(q=1;25>=q;q+=8)f<<=1,f|=n>>>q+m&1}e[l+0]=a>>>0;e[l+1]=f>>>0},rip:function(n,b,e,l){for(var a=0,f=0,m=0;4>m;m++)for(var q=24;0<=q;q-=8)a<<=1,a|=b>>>q+m&1,a<<=1,a|=
n>>>q+m&1;for(m=4;8>m;m++)for(q=24;0<=q;q-=8)f<<=1,f|=b>>>q+m&1,f<<=1,f|=n>>>q+m&1;e[l+0]=a>>>0;e[l+1]=f>>>0},pc1:function(n,b,e,l){for(var a=0,f=0,m=7;5<=m;m--){for(var q=0;24>=q;q+=8)a<<=1,a|=b>>q+m&1;for(q=0;24>=q;q+=8)a<<=1,a|=n>>q+m&1}for(q=0;24>=q;q+=8)a<<=1,a|=b>>q+m&1;for(m=1;3>=m;m++){for(q=0;24>=q;q+=8)f<<=1,f|=b>>q+m&1;for(q=0;24>=q;q+=8)f<<=1,f|=n>>q+m&1}for(q=0;24>=q;q+=8)f<<=1,f|=n>>q+m&1;e[l+0]=a>>>0;e[l+1]=f>>>0},r28shl:function(n,b){return n<<b&268435455|n>>>28-b}},TK=[14,11,17,4,
27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];bk.pc2=function(n,b,e,l){for(var a=0,f=0,m=TK.length>>>1,q=0;q<m;q++)a<<=1,a|=n>>>TK[q]&1;for(q=m;q<TK.length;q++)f<<=1,f|=b>>>TK[q]&1;e[l+0]=a>>>0;e[l+1]=f>>>0};bk.expand=function(n,b,e){var l=0;var a=(1&n)<<5|n>>>27;for(var f=23;15<=f;f-=4)a<<=6,a|=n>>>f&63;for(f=11;3<=f;f-=4)l|=n>>>f&63,l<<=6;b[e+0]=a>>>0;b[e+1]=(l|(31&n)<<1|n>>>31)>>>0};var s4=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,
8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,
6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,
0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];bk.substitute=function(n,b){for(var e=0,l=0;4>l;l++)e<<=4,e|=s4[64*l+(n>>>18-6*l&63)];for(l=0;4>l;l++)e<<=4,e|=s4[256+64*l+(b>>>18-6*l&63)];return e>>>0};var t4=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];bk.permute=function(n){for(var b=0,e=0;e<t4.length;e++)b<<=1,b|=n>>>t4[e]&
1;return b>>>0};bk.padSplit=function(n,b,e){for(n=n.toString(2);n.length<b;)n="0"+n;for(var l=[],a=0;a<b;a+=e)l.push(n.slice(a,a+e));return l.join(" ")};var pja=Xq;wp.prototype._init=function(){};wp.prototype.update=function(n){return 0===n.length?[]:"decrypt"===this.type?this._updateDecrypt(n):this._updateEncrypt(n)};wp.prototype._buffer=function(n,b){for(var e=Math.min(this.buffer.length-this.bufferOff,n.length-b),l=0;l<e;l++)this.buffer[this.bufferOff+l]=n[b+l];return this.bufferOff+=e,e};wp.prototype._flushBuffer=
function(n,b){return this._update(this.buffer,0,n,b),this.bufferOff=0,this.blockSize};wp.prototype._updateEncrypt=function(n){var b=0,e=0,l=Array(((this.bufferOff+n.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(b+=this._buffer(n,b),this.bufferOff===this.buffer.length&&(e+=this._flushBuffer(l,e)));for(var a=n.length-(n.length-b)%this.blockSize;b<a;b+=this.blockSize)this._update(n,b,l,e),e+=this.blockSize;for(;b<n.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=n[b];return l};
wp.prototype._updateDecrypt=function(n){for(var b=0,e=0,l=Math.ceil((this.bufferOff+n.length)/this.blockSize)-1,a=Array(l*this.blockSize);0<l;l--)b+=this._buffer(n,b),e+=this._flushBuffer(a,e);return this._buffer(n,b),a};wp.prototype.final=function(n){var b,e;return n&&(b=this.update(n)),e="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),b?b.concat(e):e};wp.prototype._pad=function(n,b){if(0===b)return!1;for(;b<n.length;)n[b++]=0;return!0};wp.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,
this.bufferOff))return[];var n=Array(this.blockSize);return this._update(this.buffer,0,n,0),n};wp.prototype._unpad=function(n){return n};wp.prototype._finalDecrypt=function(){pja.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var n=Array(this.blockSize);return this._flushBuffer(n,0),this._unpad(n)};var u4=Xq,eY=wp;oh(Oq,eY);Oq.create=function(n){return new Oq(n)};var qja=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Oq.prototype.deriveKeys=function(n,b){n.keys=Array(32);u4.equal(b.length,this.blockSize,
"Invalid key length");var e=bk.readUInt32BE(b,0);b=bk.readUInt32BE(b,4);bk.pc1(e,b,n.tmp,0);e=n.tmp[0];b=n.tmp[1];for(var l=0;l<n.keys.length;l+=2){var a=qja[l>>>1];e=bk.r28shl(e,a);b=bk.r28shl(b,a);bk.pc2(e,b,n.keys,l)}};Oq.prototype._update=function(n,b,e,l){var a=this._desState,f=bk.readUInt32BE(n,b);n=bk.readUInt32BE(n,b+4);bk.ip(f,n,a.tmp,0);f=a.tmp[0];n=a.tmp[1];"encrypt"===this.type?this._encrypt(a,f,n,a.tmp,0):this._decrypt(a,f,n,a.tmp,0);f=a.tmp[0];n=a.tmp[1];bk.writeUInt32BE(e,f,l);bk.writeUInt32BE(e,
n,l+4)};Oq.prototype._pad=function(n,b){for(var e=n.length-b;b<n.length;b++)n[b]=e;return!0};Oq.prototype._unpad=function(n){for(var b=n[n.length-1],e=n.length-b;e<n.length;e++)u4.equal(n[e],b);return n.slice(0,n.length-b)};Oq.prototype._encrypt=function(n,b,e,l,a){for(var f=0;f<n.keys.length;f+=2){var m=n.keys[f],q=n.keys[f+1];bk.expand(e,n.tmp,0);m^=n.tmp[0];q^=n.tmp[1];m=bk.substitute(m,q);q=e;e=(b^bk.permute(m))>>>0;b=q}bk.rip(e,b,l,a)};Oq.prototype._decrypt=function(n,b,e,l,a){for(var f=n.keys.length-
2;0<=f;f-=2){var m=n.keys[f],q=n.keys[f+1];bk.expand(e,n.tmp,0);m^=n.tmp[0];q^=n.tmp[1];m=bk.substitute(m,q);q=e;e=(b^bk.permute(m))>>>0;b=q}bk.rip(e,b,l,a)};var UK={},Z$=Xq,rja=oh,VK={};UK.instantiate=function(n){function b(f){n.call(this,f);this._cbcInit()}rja(b,n);for(var e=Object.keys(VK),l=0;l<e.length;l++){var a=e[l];b.prototype[a]=VK[a]}return b.create=function(f){return new b(f)},b};VK._cbcInit=function(){this._cbcState=new Y$(this.options.iv)};VK._update=function(n,b,e,l){var a=this.constructor.super_.prototype,
f=this._cbcState.iv;if("encrypt"===this.type){for(var m=0;m<this.blockSize;m++)f[m]^=n[b+m];a._update.call(this,f,0,e,l);for(m=0;m<this.blockSize;m++)f[m]=e[l+m]}else{a._update.call(this,n,b,e,l);for(m=0;m<this.blockSize;m++)e[l+m]^=f[m];for(m=0;m<this.blockSize;m++)f[m]=n[b+m]}};var aaa=Xq,fY=wp,px=Oq;oh(St,fY);St.create=function(n){return new St(n)};St.prototype._update=function(n,b,e,l){var a=this._edeState;a.ciphers[0]._update(n,b,e,l);a.ciphers[1]._update(e,l,e,l);a.ciphers[2]._update(e,l,e,
l)};St.prototype._pad=px.prototype._pad;St.prototype._unpad=px.prototype._unpad;var cI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,gY=em,sja=oh,oz=ci.Buffer,OD={"des-ede3-cbc":UK.instantiate(St),"des-ede3":St,"des-ede-cbc":UK.instantiate(St),"des-ede":St,"des-cbc":UK.instantiate(Oq),"des-ecb":Oq};OD.des=OD["des-cbc"];OD.des3=OD["des-ede3-cbc"];sja(bI,gY);bI.prototype._update=function(n){return oz.from((this||cI)._des.update(n))};bI.prototype._final=function(){return oz.from((this||
cI)._des.final())};var tja=eh.Buffer,tC=function(n,b){for(var e=Math.min(n.length,b.length),l=new tja(e),a=0;a<e;++a)l[a]=n[a]^b[a];return l},v4=function(n){for(var b,e=n.length;e--;){if(255!==(b=n.readUInt8(e))){b++;n.writeUInt8(b,e);break}n.writeUInt8(0,e)}},w4={},PD=ci.Buffer,baa=tC;w4.encrypt=function(n,b,e){for(var l,a=PD.allocUnsafe(0);b.length;){if(0===n._cache.length&&(n._cache=n._cipher.encryptBlock(n._prev),n._prev=PD.allocUnsafe(0)),!(n._cache.length<=b.length)){a=PD.concat([a,hY(n,b,e)]);
break}l=n._cache.length;a=PD.concat([a,hY(n,b.slice(0,l),e)]);b=b.slice(l)}return a};var x4={},aS=ci.Buffer;x4.encrypt=function(n,b,e){for(var l=b.length,a=aS.allocUnsafe(l),f=-1;++f<l;){var m=f;var q=n;var r=b[f],u=e,v=q._cipher.encryptBlock(q._prev)[0]^r;q=(q._prev=aS.concat([q._prev.slice(1),aS.from([u?r:v])]),v);a[m]=q}return a};var y4={},WK=ci.Buffer;y4.encrypt=function(n,b,e){for(var l=b.length,a=WK.allocUnsafe(l),f=-1;++f<l;){for(var m=f,q,r,u=n,v=b[f],y=e,z=-1,B=0;8>++z;){r=v&1<<7-z?128:0;
B+=(128&(q=u._cipher.encryptBlock(u._prev)[0]^r))>>z%8;var C=u,G=u._prev;q=y?r:q;r=G.length;var F=-1,N=WK.allocUnsafe(G.length);for(G=WK.concat([G,WK.from([q])]);++F<r;)N[F]=G[F]<<1|G[F+1]>>7;C._prev=N}a[m]=B}return a};var z4={},uja=eh.Buffer;z4.encrypt=function(n,b){for(;n._cache.length<b.length;)n._cache=uja.concat([n._cache,caa(n)]);var e=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),tC(b,e)};var bS={},A4=ci.Buffer;bS.encrypt=function(n,b){var e=Math.ceil(b.length/16),l=n._cache.length;
n._cache=A4.concat([n._cache,A4.allocUnsafe(16*e)]);for(var a=0;a<e;a++){var f=n;var m=f._cipher.encryptBlockRaw(f._prev);f=(v4(f._prev),m);m=l+16*a;n._cache.writeUInt32BE(f[0],m+0);n._cache.writeUInt32BE(f[1],m+4);n._cache.writeUInt32BE(f[2],m+8);n._cache.writeUInt32BE(f[3],m+12)}e=n._cache.slice(0,b.length);return n._cache=n._cache.slice(b.length),tC(b,e)};var aA={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},
"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},
"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",
key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",
type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},vja={ECB:{encrypt:function(n,b){return n._cipher.encryptBlock(b)},decrypt:function(n,b){return n._cipher.decryptBlock(b)}},CBC:{encrypt:function(n,b){b=tC(b,n._prev);return n._prev=n._cipher.encryptBlock(b),n._prev},decrypt:function(n,b){var e=n._prev;n._prev=b;n=n._cipher.decryptBlock(b);return tC(n,e)}},CFB:w4,CFB8:x4,CFB1:y4,OFB:z4,CTR:bS,GCM:bS},cS;
for(cS in aA)aA[cS].module=vja[aA[cS].mode];var Qq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,zF={},dI=ci.Buffer,wja=[0,1,2,4,8,16,32,64,128,27,54],cl=function(){for(var n=Array(256),b=0;256>b;b++)n[b]=128>b?b<<1:b<<1^283;b=[];for(var e=[],l=[[],[],[],[]],a=[[],[],[],[]],f=0,m=0,q=0;256>q;++q){var r=m^m<<1^m<<2^m<<3^m<<4;r=r>>>8^255&r^99;b[f]=r;e[r]=f;var u=n[f],v=n[u],y=n[v],z=257*n[r]^16843008*r;l[0][f]=z<<24|z>>>8;l[1][f]=z<<16|z>>>16;l[2][f]=z<<8|z>>>24;l[3][f]=
z;z=16843009*y^65537*v^257*u^16843008*f;a[0][r]=z<<24|z>>>8;a[1][r]=z<<16|z>>>16;a[2][r]=z<<8|z>>>24;a[3][r]=z;0===f?f=m=1:(f=u^n[n[n[y^u]]],m^=n[n[m]])}return{SBOX:b,INV_SBOX:e,SUB_MIX:l,INV_SUB_MIX:a}}();Pq.blockSize=16;Pq.keySize=32;Pq.prototype.blockSize=Pq.blockSize;Pq.prototype.keySize=Pq.keySize;Pq.prototype._reset=function(){for(var n=(this||Qq)._key,b=n.length,e=b+6,l=4*(e+1),a=[],f=0;f<b;f++)a[f]=n[f];for(f=b;f<l;f++)n=a[f-1],0==f%b?(n=n<<8|n>>>24,n=cl.SBOX[n>>>24]<<24|cl.SBOX[n>>>16&255]<<
16|cl.SBOX[n>>>8&255]<<8|cl.SBOX[255&n],n^=wja[f/b|0]<<24):6<b&&4==f%b&&(n=cl.SBOX[n>>>24]<<24|cl.SBOX[n>>>16&255]<<16|cl.SBOX[n>>>8&255]<<8|cl.SBOX[255&n]),a[f]=a[f-b]^n;b=[];for(f=0;f<l;f++){n=l-f;var m=a[n-(f%4?0:4)];b[f]=4>f||4>=n?m:cl.INV_SUB_MIX[0][cl.SBOX[m>>>24]]^cl.INV_SUB_MIX[1][cl.SBOX[m>>>16&255]]^cl.INV_SUB_MIX[2][cl.SBOX[m>>>8&255]]^cl.INV_SUB_MIX[3][cl.SBOX[255&m]]}(this||Qq)._nRounds=e;(this||Qq)._keySchedule=a;(this||Qq)._invKeySchedule=b};Pq.prototype.encryptBlockRaw=function(n){return iY(SN(n),
(this||Qq)._keySchedule,cl.SUB_MIX,cl.SBOX,(this||Qq)._nRounds)};Pq.prototype.encryptBlock=function(n){n=this.encryptBlockRaw(n);var b=dI.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[1],4),b.writeUInt32BE(n[2],8),b.writeUInt32BE(n[3],12),b};Pq.prototype.decryptBlock=function(n){var b=(n=SN(n))[1];n[1]=n[3];n[3]=b;n=iY(n,(this||Qq)._invKeySchedule,cl.INV_SUB_MIX,cl.INV_SBOX,(this||Qq)._nRounds);b=dI.allocUnsafe(16);return b.writeUInt32BE(n[0],0),b.writeUInt32BE(n[3],4),b.writeUInt32BE(n[2],
8),b.writeUInt32BE(n[1],12),b};Pq.prototype.scrub=function(){TN((this||Qq)._keySchedule);TN((this||Qq)._invKeySchedule);TN((this||Qq)._key)};zF.AES=Pq;var Mm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,uB=ci.Buffer,xja=uB.alloc(16,0);QD.prototype.ghash=function(n){for(var b=-1;++b<n.length;)(this||Mm).state[b]^=n[b];this._multiply()};QD.prototype._multiply=function(){for(var n,b,e=[(n=(this||Mm).h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],
l=[0,0,0,0],a=-1;128>++a;){0!=((this||Mm).state[~~(a/8)]&1<<7-a%8)&&(l[0]^=e[0],l[1]^=e[1],l[2]^=e[2],l[3]^=e[3]);b=0!=(1&e[3]);for(n=3;0<n;n--)e[n]=e[n]>>>1|(1&e[n-1])<<31;e[0]>>>=1;b&&(e[0]^=-520093696)}(this||Mm).state=jY(l)};QD.prototype.update=function(n){for((this||Mm).cache=uB.concat([(this||Mm).cache,n]);16<=(this||Mm).cache.length;)n=(this||Mm).cache.slice(0,16),(this||Mm).cache=(this||Mm).cache.slice(16),this.ghash(n)};QD.prototype.final=function(n,b){return(this||Mm).cache.length&&this.ghash(uB.concat([(this||
Mm).cache,xja],16)),this.ghash(jY([0,n,0,b])),(this||Mm).state};var Tg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,daa=zF,Go=ci.Buffer,kY=em,lY=QD,eaa=v4;oh(qx,kY);qx.prototype._update=function(n){if(!(this||Tg)._called&&(this||Tg)._alen){var b=16-(this||Tg)._alen%16;16>b&&(b=Go.alloc(b,0),(this||Tg)._ghash.update(b))}(this||Tg)._called=!0;b=(this||Tg)._mode.encrypt(this||Tg,n);return(this||Tg)._decrypt?(this||Tg)._ghash.update(n):(this||Tg)._ghash.update(b),(this||
Tg)._len+=n.length,b};qx.prototype._final=function(){if((this||Tg)._decrypt&&!(this||Tg)._authTag)throw Error("Unsupported state or unable to authenticate data");var n=tC((this||Tg)._ghash.final(8*(this||Tg)._alen,8*(this||Tg)._len),(this||Tg)._cipher.encryptBlock((this||Tg)._finID)),b;if(b=(this||Tg)._decrypt){b=(this||Tg)._authTag;var e=0;n.length!==b.length&&e++;for(var l=Math.min(n.length,b.length),a=0;a<l;++a)e+=n[a]^b[a];b=e}if(b)throw Error("Unsupported state or unable to authenticate data");
(this||Tg)._authTag=n;(this||Tg)._cipher.scrub()};qx.prototype.getAuthTag=function(){if((this||Tg)._decrypt||!Go.isBuffer((this||Tg)._authTag))throw Error("Attempting to get auth tag in unsupported state");return(this||Tg)._authTag};qx.prototype.setAuthTag=function(n){if(!(this||Tg)._decrypt)throw Error("Attempting to set auth tag in unsupported state");(this||Tg)._authTag=n};qx.prototype.setAAD=function(n){if((this||Tg)._called)throw Error("Attempting to set AAD in unsupported state");(this||Tg)._ghash.update(n);
(this||Tg)._alen+=n.length};var js="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,faa=zF,UN=ci.Buffer,mY=em;oh(RD,mY);RD.prototype._update=function(n){return(this||js)._mode.encrypt(this||js,n,(this||js)._decrypt)};RD.prototype._final=function(){(this||js)._cipher.scrub()};var bA=ci.Buffer,WD=function(n,b,e,l){if(bA.isBuffer(n)||(n=bA.from(n,"binary")),b&&(bA.isBuffer(b)||(b=bA.from(b,"binary")),8!==b.length))throw new RangeError("salt should be Buffer with 8 byte length");
e/=8;for(var a=bA.alloc(e),f=bA.alloc(l||0),m=bA.alloc(0);0<e||0<l;){var q=new pB;q.update(m);q.update(n);b&&q.update(b);m=q.digest();q=0;if(0<e){var r=a.length-e;q=Math.min(e,m.length);m.copy(a,r,0,q);e-=q}q<m.length&&0<l&&(r=Math.min(l,m.length-q),m.copy(f,f.length-l,q,q+r),l-=r)}return m.fill(0),{key:a,iv:f}},Li="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,iaa=qx,vB=ci.Buffer,pY=aA,haa=RD,nY=em,gaa=zF;oh(SD,nY);SD.prototype._update=function(n){var b;(this||Li)._cache.add(n);
for(n=[];b=(this||Li)._cache.get((this||Li)._autopadding);)b=(this||Li)._mode.decrypt(this||Li,b),n.push(b);return vB.concat(n)};SD.prototype._final=function(){var n=(this||Li)._cache.flush();if((this||Li)._autopadding){n=(this||Li)._mode.decrypt(this||Li,n);var b=n[15];if(1>b||16<b)throw Error("unable to decrypt data");for(var e=-1;++e<b;)if(n[e+(16-b)]!==b)throw Error("unable to decrypt data");n=16===b?void 0:n.slice(0,16-b);return n}if(n)throw Error("data not multiple of block length");};SD.prototype.setAutoPadding=
function(n){return(this||Li)._autopadding=!!n,this||Li};eI.prototype.add=function(n){(this||Li).cache=vB.concat([(this||Li).cache,n])};eI.prototype.get=function(n){var b;if(n){if(16<(this||Li).cache.length)return b=(this||Li).cache.slice(0,16),(this||Li).cache=(this||Li).cache.slice(16),b}else if(16<=(this||Li).cache.length)return b=(this||Li).cache.slice(0,16),(this||Li).cache=(this||Li).cache.slice(16),b;return null};eI.prototype.flush=function(){if((this||Li).cache.length)return(this||Li).cache};
var xj="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,sY=aA,laa=qx,Jv=ci.Buffer,kaa=RD,qY=em,jaa=zF;oh(TD,qY);TD.prototype._update=function(n){var b;(this||xj)._cache.add(n);for(n=[];b=(this||xj)._cache.get();)b=(this||xj)._mode.encrypt(this||xj,b),n.push(b);return Jv.concat(n)};var yja=Jv.alloc(16,16);TD.prototype._final=function(){var n=(this||xj)._cache.flush();if((this||xj)._autopadding)return n=(this||xj)._mode.encrypt(this||xj,n),(this||xj)._cipher.scrub(),n;
if(!n.equals(yja))throw(this||xj)._cipher.scrub(),Error("data not multiple of block length");};TD.prototype.setAutoPadding=function(n){return(this||xj)._autopadding=!!n,this||xj};fI.prototype.add=function(n){(this||xj).cache=Jv.concat([(this||xj).cache,n])};fI.prototype.get=function(){if(15<(this||xj).cache.length){var n=(this||xj).cache.slice(0,16);return(this||xj).cache=(this||xj).cache.slice(16),n}return null};fI.prototype.flush=function(){for(var n=16-(this||xj).cache.length,b=Jv.allocUnsafe(n),
e=-1;++e<n;)b.writeUInt8(n,e);return Jv.concat([(this||xj).cache,b])};var yp={};yp.createCipher=yp.Cipher=function(n,b){var e=sY[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=WD(b,!1,e.key,e.iv);return rY(n,b.key,b.iv)};yp.createCipheriv=yp.Cipheriv=rY;yp.createDecipher=yp.Decipher=function(n,b){var e=pY[n.toLowerCase()];if(!e)throw new TypeError("invalid suite type");b=WD(b,!1,e.key,e.iv);return oY(n,b.key,b.iv)};yp.createDecipheriv=yp.Decipheriv=oY;yp.listCiphers=yp.getCiphers=
function(){return Object.keys(aA)};var Yx={"des-ecb":{key:8,iv:0}};Yx["des-cbc"]=Yx.des={key:8,iv:8};Yx["des-ede3-cbc"]=Yx.des3={key:24,iv:8};Yx["des-ede3"]={key:24,iv:0};Yx["des-ede-cbc"]={key:16,iv:8};Yx["des-ede"]={key:16,iv:0};var B4,C4,D4,tY=bI,WN=yp,rx=aA,Kv=Yx;var zja=B4=function(n,b){if(n=n.toLowerCase(),rx[n]){var e=rx[n].key;var l=rx[n].iv}else{if(!Kv[n])throw new TypeError("invalid suite type");e=8*Kv[n].key;l=Kv[n].iv}b=WD(b,!1,e,l);return VN(n,b.key,b.iv)};var Aja=C4=function(n,b){if(n=
n.toLowerCase(),rx[n]){var e=rx[n].key;var l=rx[n].iv}else{if(!Kv[n])throw new TypeError("invalid suite type");e=8*Kv[n].key;l=Kv[n].iv}b=WD(b,!1,e,l);return XN(n,b.key,b.iv)};var Bja=D4=function(){return Object.keys(Kv).concat(WN.getCiphers())};var Cja=Object.freeze({}),Pa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,E4={},F4={exports:E4};!function(n,b){function e(D,P){if(!D)throw Error(P||"Assertion failed");}function l(D,P){D.super_=P;var J=function(){};J.prototype=
P.prototype;D.prototype=new J;D.prototype.constructor=D}function a(D,P,J){if(a.isBN(D))return D;(this||Pa).negative=0;(this||Pa).words=null;(this||Pa).length=0;(this||Pa).red=null;null!==D&&("le"!==P&&"be"!==P||(J=P,P=10),this._init(D||0,P||10,J||"be"))}function f(D,P,J){var M=0;for(J=Math.min(D.length,J);P<J;P++){var X=D.charCodeAt(P)-48;M<<=4;M|=49<=X&&54>=X?X-49+10:17<=X&&22>=X?X-17+10:15&X}return M}function m(D,P,J,M){var X=0;for(J=Math.min(D.length,J);P<J;P++){var T=D.charCodeAt(P)-48;X*=M;X+=
49<=T?T-49+10:17<=T?T-17+10:T}return X}function q(D,P,J){J.negative=P.negative^D.negative;var M=D.length+P.length|0;J.length=M;M=M-1|0;var X=(0|D.words[0])*(0|P.words[0]),T=X/67108864|0;J.words[0]=67108863&X;for(var fa=1;fa<M;fa++){var Ra=T>>>26;X=67108863&T;T=Math.min(fa,P.length-1);for(var gb=Math.max(0,fa-D.length+1);gb<=T;gb++)Ra+=(X=(0|D.words[fa-gb|0])*(0|P.words[gb])+X)/67108864|0,X&=67108863;J.words[fa]=0|X;T=0|Ra}return 0!==T?J.words[fa]=0|T:J.length--,J.strip()}function r(D,P){(this||Pa).x=
D;(this||Pa).y=P}function u(D,P){(this||Pa).name=D;(this||Pa).p=new a(P,16);(this||Pa).n=(this||Pa).p.bitLength();(this||Pa).k=(new a(1)).iushln((this||Pa).n).isub((this||Pa).p);(this||Pa).tmp=this._tmp()}function v(){u.call(this||Pa,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){u.call(this||Pa,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function z(){u.call(this||Pa,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}
function B(){u.call(this||Pa,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(D){"string"==typeof D?(D=a._prime(D),(this||Pa).m=D.p,(this||Pa).prime=D):(e(D.gtn(1),"modulus must be greater than 1"),(this||Pa).m=D,(this||Pa).prime=null)}function G(D){C.call(this||Pa,D);(this||Pa).shift=(this||Pa).m.bitLength();0!=(this||Pa).shift%26&&((this||Pa).shift+=26-(this||Pa).shift%26);(this||Pa).r=(new a(1)).iushln((this||Pa).shift);(this||Pa).r2=this.imod((this||Pa).r.sqr());
(this||Pa).rinv=(this||Pa).r._invmp((this||Pa).m);(this||Pa).minv=(this||Pa).rinv.mul((this||Pa).r).isubn(1).div((this||Pa).m);(this||Pa).minv=(this||Pa).minv.umod((this||Pa).r);(this||Pa).minv=(this||Pa).r.sub((this||Pa).minv)}"object"==typeof n?n.exports=a:b.BN=a;a.BN=a;a.wordSize=26;try{var F=Cja.Buffer}catch(D){}a.isBN=function(D){return D instanceof a||null!==D&&"object"==typeof D&&D.constructor.wordSize===a.wordSize&&Array.isArray(D.words)};a.max=function(D,P){return 0<D.cmp(P)?D:P};a.min=function(D,
P){return 0>D.cmp(P)?D:P};a.prototype._init=function(D,P,J){if("number"==typeof D)return this._initNumber(D,P,J);if("object"==typeof D)return this._initArray(D,P,J);"hex"===P&&(P=16);e(P===(0|P)&&2<=P&&36>=P);var M=0;"-"===(D=D.toString().replace(/\s+/g,""))[0]&&M++;16===P?this._parseHex(D,M):this._parseBase(D,P,M);"-"===D[0]&&((this||Pa).negative=1);this.strip();"le"===J&&this._initArray(this.toArray(),P,J)};a.prototype._initNumber=function(D,P,J){0>D&&((this||Pa).negative=1,D=-D);67108864>D?((this||
Pa).words=[67108863&D],(this||Pa).length=1):4503599627370496>D?((this||Pa).words=[67108863&D,D/67108864&67108863],(this||Pa).length=2):(e(9007199254740992>D),(this||Pa).words=[67108863&D,D/67108864&67108863,1],(this||Pa).length=3);"le"===J&&this._initArray(this.toArray(),P,J)};a.prototype._initArray=function(D,P,J){if(e("number"==typeof D.length),0>=D.length)return(this||Pa).words=[0],(this||Pa).length=1,this||Pa;(this||Pa).length=Math.ceil(D.length/3);(this||Pa).words=Array((this||Pa).length);for(P=
0;P<(this||Pa).length;P++)(this||Pa).words[P]=0;var M=0;if("be"===J)for(P=D.length-1,J=0;0<=P;P-=3){var X=D[P]|D[P-1]<<8|D[P-2]<<16;(this||Pa).words[J]|=X<<M&67108863;(this||Pa).words[J+1]=X>>>26-M&67108863;26<=(M+=24)&&(M-=26,J++)}else if("le"===J)for(J=P=0;P<D.length;P+=3)X=D[P]|D[P+1]<<8|D[P+2]<<16,(this||Pa).words[J]|=X<<M&67108863,(this||Pa).words[J+1]=X>>>26-M&67108863,26<=(M+=24)&&(M-=26,J++);return this.strip()};a.prototype._parseHex=function(D,P){(this||Pa).length=Math.ceil((D.length-P)/
6);(this||Pa).words=Array((this||Pa).length);for(var J=0;J<(this||Pa).length;J++)(this||Pa).words[J]=0;var M,X=0;J=D.length-6;for(M=0;J>=P;J-=6){var T=f(D,J,J+6);(this||Pa).words[M]|=T<<X&67108863;(this||Pa).words[M+1]|=T>>>26-X&4194303;26<=(X+=24)&&(X-=26,M++)}J+6!==P&&(T=f(D,P,J+6),(this||Pa).words[M]|=T<<X&67108863,(this||Pa).words[M+1]|=T>>>26-X&4194303);this.strip()};a.prototype._parseBase=function(D,P,J){(this||Pa).words=[0];(this||Pa).length=1;for(var M=0,X=1;67108863>=X;X*=P)M++;M--;X=X/P|
0;var T=D.length-J,fa=T%M;T=Math.min(T,T-fa)+J;for(var Ra=J;Ra<T;Ra+=M)J=m(D,Ra,Ra+M,P),this.imuln(X),67108864>(this||Pa).words[0]+J?(this||Pa).words[0]+=J:this._iaddn(J);if(0!==fa){M=1;J=m(D,Ra,D.length,P);for(Ra=0;Ra<fa;Ra++)M*=P;this.imuln(M);67108864>(this||Pa).words[0]+J?(this||Pa).words[0]+=J:this._iaddn(J)}};a.prototype.copy=function(D){D.words=Array((this||Pa).length);for(var P=0;P<(this||Pa).length;P++)D.words[P]=(this||Pa).words[P];D.length=(this||Pa).length;D.negative=(this||Pa).negative;
D.red=(this||Pa).red};a.prototype.clone=function(){var D=new a(null);return this.copy(D),D};a.prototype._expand=function(D){for(;(this||Pa).length<D;)(this||Pa).words[(this||Pa).length++]=0;return this||Pa};a.prototype.strip=function(){for(;1<(this||Pa).length&&0===(this||Pa).words[(this||Pa).length-1];)(this||Pa).length--;return this._normSign()};a.prototype._normSign=function(){return 1===(this||Pa).length&&0===(this||Pa).words[0]&&((this||Pa).negative=0),this||Pa};a.prototype.inspect=function(){return((this||
Pa).red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var N=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],
S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(D,P){if(P=0|P||1,16===(D=D||10)||"hex"===D){var J="";for(var M=D=0,X=0;X<(this||Pa).length;X++){var T=(this||Pa).words[X],fa=(16777215&(T<<D|M)).toString(16);J=0!==(M=
T>>>24-D&16777215)||X!==(this||Pa).length-1?N[6-fa.length]+fa+J:fa+J;26<=(D+=2)&&(D-=26,X--)}for(0!==M&&(J=M.toString(16)+J);0!=J.length%P;)J="0"+J;return 0!==(this||Pa).negative&&(J="-"+J),J}if(D===(0|D)&&2<=D&&36>=D){M=L[D];X=S[D];J="";T=this.clone();for(T.negative=0;!T.isZero();)fa=T.modn(X).toString(D),J=(T=T.idivn(X)).isZero()?fa+J:N[M-fa.length]+fa+J;for(this.isZero()&&(J="0"+J);0!=J.length%P;)J="0"+J;return 0!==(this||Pa).negative&&(J="-"+J),J}e(!1,"Base should be between 2 and 36")};a.prototype.toNumber=
function(){var D=(this||Pa).words[0];return 2===(this||Pa).length?D+=67108864*(this||Pa).words[1]:3===(this||Pa).length&&1===(this||Pa).words[2]?D+=4503599627370496+67108864*(this||Pa).words[1]:2<(this||Pa).length&&e(!1,"Number can only safely store up to 53 bits"),0!==(this||Pa).negative?-D:D};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(D,P){return e(void 0!==F),this.toArrayLike(F,D,P)};a.prototype.toArray=function(D,P){return this.toArrayLike(Array,D,P)};
a.prototype.toArrayLike=function(D,P,J){var M=this.byteLength();J=J||Math.max(1,M);e(M<=J,"byte array longer than desired length");e(0<J,"Requested array length <= 0");this.strip();var X="le"===P;D=new D(J);P=this.clone();if(X){for(X=0;!P.isZero();X++)M=P.andln(255),P.iushrn(8),D[X]=M;for(;X<J;X++)D[X]=0}else{for(X=0;X<J-M;X++)D[X]=0;for(X=0;!P.isZero();X++)M=P.andln(255),P.iushrn(8),D[J-X-1]=M}return D};Math.clz32?a.prototype._countBits=function(D){return 32-Math.clz32(D)}:a.prototype._countBits=
function(D){var P=0;return 4096<=D&&(P+=13,D>>>=13),64<=D&&(P+=7,D>>>=7),8<=D&&(P+=4,D>>>=4),2<=D&&(P+=2,D>>>=2),P+D};a.prototype._zeroBits=function(D){if(0===D)return 26;var P=0;return 0==(8191&D)&&(P+=13,D>>>=13),0==(127&D)&&(P+=7,D>>>=7),0==(15&D)&&(P+=4,D>>>=4),0==(3&D)&&(P+=2,D>>>=2),0==(1&D)&&P++,P};a.prototype.bitLength=function(){var D=this._countBits((this||Pa).words[(this||Pa).length-1]);return 26*((this||Pa).length-1)+D};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=
0,P=0;P<(this||Pa).length;P++){var J=this._zeroBits((this||Pa).words[P]);if(D+=J,26!==J)break}return D};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(D){return 0!==(this||Pa).negative?this.abs().inotn(D).iaddn(1):this.clone()};a.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==(this||Pa).negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=
function(){return this.isZero()||((this||Pa).negative^=1),this||Pa};a.prototype.iuor=function(D){for(;(this||Pa).length<D.length;)(this||Pa).words[(this||Pa).length++]=0;for(var P=0;P<D.length;P++)(this||Pa).words[P]|=D.words[P];return this.strip()};a.prototype.ior=function(D){return e(0==((this||Pa).negative|D.negative)),this.iuor(D)};a.prototype.or=function(D){return(this||Pa).length>D.length?this.clone().ior(D):D.clone().ior(this||Pa)};a.prototype.uor=function(D){return(this||Pa).length>D.length?
this.clone().iuor(D):D.clone().iuor(this||Pa)};a.prototype.iuand=function(D){var P=(this||Pa).length>D.length?D:this||Pa;for(var J=0;J<P.length;J++)(this||Pa).words[J]&=D.words[J];return(this||Pa).length=P.length,this.strip()};a.prototype.iand=function(D){return e(0==((this||Pa).negative|D.negative)),this.iuand(D)};a.prototype.and=function(D){return(this||Pa).length>D.length?this.clone().iand(D):D.clone().iand(this||Pa)};a.prototype.uand=function(D){return(this||Pa).length>D.length?this.clone().iuand(D):
D.clone().iuand(this||Pa)};a.prototype.iuxor=function(D){var P,J;(this||Pa).length>D.length?(P=this||Pa,J=D):(P=D,J=this||Pa);for(D=0;D<J.length;D++)(this||Pa).words[D]=P.words[D]^J.words[D];if((this||Pa)!==P)for(;D<P.length;D++)(this||Pa).words[D]=P.words[D];return(this||Pa).length=P.length,this.strip()};a.prototype.ixor=function(D){return e(0==((this||Pa).negative|D.negative)),this.iuxor(D)};a.prototype.xor=function(D){return(this||Pa).length>D.length?this.clone().ixor(D):D.clone().ixor(this||Pa)};
a.prototype.uxor=function(D){return(this||Pa).length>D.length?this.clone().iuxor(D):D.clone().iuxor(this||Pa)};a.prototype.inotn=function(D){e("number"==typeof D&&0<=D);var P=0|Math.ceil(D/26);D%=26;this._expand(P);0<D&&P--;for(var J=0;J<P;J++)(this||Pa).words[J]=67108863&~(this||Pa).words[J];return 0<D&&((this||Pa).words[J]=~(this||Pa).words[J]&67108863>>26-D),this.strip()};a.prototype.notn=function(D){return this.clone().inotn(D)};a.prototype.setn=function(D,P){e("number"==typeof D&&0<=D);var J=
D/26|0;D%=26;return this._expand(J+1),(this||Pa).words[J]=P?(this||Pa).words[J]|1<<D:(this||Pa).words[J]&~(1<<D),this.strip()};a.prototype.iadd=function(D){var P,J,M;if(0!==(this||Pa).negative&&0===D.negative)return(this||Pa).negative=0,this.isub(D),(this||Pa).negative^=1,this._normSign();if(0===(this||Pa).negative&&0!==D.negative)return D.negative=0,P=this.isub(D),D.negative=1,P._normSign();(this||Pa).length>D.length?(J=this||Pa,M=D):(J=D,M=this||Pa);for(D=P=0;D<M.length;D++)P=(0|J.words[D])+(0|
M.words[D])+P,(this||Pa).words[D]=67108863&P,P>>>=26;for(;0!==P&&D<J.length;D++)P=(0|J.words[D])+P,(this||Pa).words[D]=67108863&P,P>>>=26;if((this||Pa).length=J.length,0!==P)(this||Pa).words[(this||Pa).length]=P,(this||Pa).length++;else if(J!==(this||Pa))for(;D<J.length;D++)(this||Pa).words[D]=J.words[D];return this||Pa};a.prototype.add=function(D){var P;return 0!==D.negative&&0===(this||Pa).negative?(D.negative=0,P=this.sub(D),D.negative^=1,P):0===D.negative&&0!==(this||Pa).negative?((this||Pa).negative=
0,P=D.sub(this||Pa),(this||Pa).negative=1,P):(this||Pa).length>D.length?this.clone().iadd(D):D.clone().iadd(this||Pa)};a.prototype.isub=function(D){if(0!==D.negative){D.negative=0;var P=this.iadd(D);return D.negative=1,P._normSign()}if(0!==(this||Pa).negative)return(this||Pa).negative=0,this.iadd(D),(this||Pa).negative=1,this._normSign();var J,M;P=this.cmp(D);if(0===P)return(this||Pa).negative=0,(this||Pa).length=1,(this||Pa).words[0]=0,this||Pa;0<P?(J=this||Pa,M=D):(J=D,M=this||Pa);for(var X=D=0;X<
M.length;X++)D=(P=(0|J.words[X])-(0|M.words[X])+D)>>26,(this||Pa).words[X]=67108863&P;for(;0!==D&&X<J.length;X++)D=(P=(0|J.words[X])+D)>>26,(this||Pa).words[X]=67108863&P;if(0===D&&X<J.length&&J!==(this||Pa))for(;X<J.length;X++)(this||Pa).words[X]=J.words[X];return(this||Pa).length=Math.max((this||Pa).length,X),J!==(this||Pa)&&((this||Pa).negative=1),this.strip()};a.prototype.sub=function(D){return this.clone().isub(D)};var ha=function(D,P,J){var M=D.words,X=P.words,T=J.words,fa=0|M[0],Ra=8191&fa;
fa>>>=13;var gb=0|M[1],ea=8191&gb;gb>>>=13;var aa=0|M[2],ia=8191&aa;aa>>>=13;var Aa=0|M[3],ob=8191&Aa;Aa>>>=13;var Nb=0|M[4],Ab=8191&Nb;Nb>>>=13;var Kb=0|M[5],jc=8191&Kb;Kb>>>=13;var ub=0|M[6],Gc=8191&ub;ub>>>=13;var Yc=0|M[7],Z=8191&Yc;Yc>>>=13;var sa=0|M[8],ua=8191&sa;sa>>>=13;var db=0|M[9];M=8191&db;db>>>=13;var Cb=0|X[0],Pc=8191&Cb,Oc=Cb>>>13,kc=0|X[1];Cb=8191&kc;var be=kc>>>13,Ud=0|X[2];kc=8191&Ud;var ah=Ud>>>13,vg=0|X[3];Ud=8191&vg;var ki=vg>>>13,bi=0|X[4];vg=8191&bi;var Wi=bi>>>13,pj=0|X[5];
bi=8191&pj;var Bj=pj>>>13,Cj=0|X[6];pj=8191&Cj;var Th=Cj>>>13,Xi=0|X[7];Cj=8191&Xi;var Dj=Xi>>>13,Yi=0|X[8];Xi=8191&Yi;Yi>>>=13;var Ej=0|X[9];X=8191&Ej;Ej>>>=13;J.negative=D.negative^P.negative;J.length=19;var nC=(0+Math.imul(Ra,Pc)|0)+((8191&(D=(D=Math.imul(Ra,Oc))+Math.imul(fa,Pc)|0))<<13)|0;P=(Math.imul(fa,Oc)+(D>>>13)|0)+(nC>>>26)|0;nC&=67108863;var Tc=Math.imul(ea,Pc);D=(D=Math.imul(ea,Oc))+Math.imul(gb,Pc)|0;var Uc=Math.imul(gb,Oc);var mC=(P+(Tc+Math.imul(Ra,Cb)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,
be)|0)+Math.imul(fa,Cb)|0))<<13)|0;P=((Uc+Math.imul(fa,be)|0)+(D>>>13)|0)+(mC>>>26)|0;mC&=67108863;Tc=Math.imul(ia,Pc);D=(D=Math.imul(ia,Oc))+Math.imul(aa,Pc)|0;Uc=Math.imul(aa,Oc);Tc=Tc+Math.imul(ea,Cb)|0;D=(D=D+Math.imul(ea,be)|0)+Math.imul(gb,Cb)|0;Uc=Uc+Math.imul(gb,be)|0;var Sz=(P+(Tc+Math.imul(Ra,kc)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,ah)|0)+Math.imul(fa,kc)|0))<<13)|0;P=((Uc+Math.imul(fa,ah)|0)+(D>>>13)|0)+(Sz>>>26)|0;Sz&=67108863;Tc=Math.imul(ob,Pc);D=(D=Math.imul(ob,Oc))+Math.imul(Aa,Pc)|
0;Uc=Math.imul(Aa,Oc);Tc=Tc+Math.imul(ia,Cb)|0;D=(D=D+Math.imul(ia,be)|0)+Math.imul(aa,Cb)|0;Uc=Uc+Math.imul(aa,be)|0;Tc=Tc+Math.imul(ea,kc)|0;D=(D=D+Math.imul(ea,ah)|0)+Math.imul(gb,kc)|0;Uc=Uc+Math.imul(gb,ah)|0;var Tx=(P+(Tc+Math.imul(Ra,Ud)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,ki)|0)+Math.imul(fa,Ud)|0))<<13)|0;P=((Uc+Math.imul(fa,ki)|0)+(D>>>13)|0)+(Tx>>>26)|0;Tx&=67108863;Tc=Math.imul(Ab,Pc);D=(D=Math.imul(Ab,Oc))+Math.imul(Nb,Pc)|0;Uc=Math.imul(Nb,Oc);Tc=Tc+Math.imul(ob,Cb)|0;D=(D=D+Math.imul(ob,
be)|0)+Math.imul(Aa,Cb)|0;Uc=Uc+Math.imul(Aa,be)|0;Tc=Tc+Math.imul(ia,kc)|0;D=(D=D+Math.imul(ia,ah)|0)+Math.imul(aa,kc)|0;Uc=Uc+Math.imul(aa,ah)|0;Tc=Tc+Math.imul(ea,Ud)|0;D=(D=D+Math.imul(ea,ki)|0)+Math.imul(gb,Ud)|0;Uc=Uc+Math.imul(gb,ki)|0;var $E=(P+(Tc+Math.imul(Ra,vg)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,Wi)|0)+Math.imul(fa,vg)|0))<<13)|0;P=((Uc+Math.imul(fa,Wi)|0)+(D>>>13)|0)+($E>>>26)|0;$E&=67108863;Tc=Math.imul(jc,Pc);D=(D=Math.imul(jc,Oc))+Math.imul(Kb,Pc)|0;Uc=Math.imul(Kb,Oc);Tc=Tc+Math.imul(Ab,
Cb)|0;D=(D=D+Math.imul(Ab,be)|0)+Math.imul(Nb,Cb)|0;Uc=Uc+Math.imul(Nb,be)|0;Tc=Tc+Math.imul(ob,kc)|0;D=(D=D+Math.imul(ob,ah)|0)+Math.imul(Aa,kc)|0;Uc=Uc+Math.imul(Aa,ah)|0;Tc=Tc+Math.imul(ia,Ud)|0;D=(D=D+Math.imul(ia,ki)|0)+Math.imul(aa,Ud)|0;Uc=Uc+Math.imul(aa,ki)|0;Tc=Tc+Math.imul(ea,vg)|0;D=(D=D+Math.imul(ea,Wi)|0)+Math.imul(gb,vg)|0;Uc=Uc+Math.imul(gb,Wi)|0;var cF=(P+(Tc+Math.imul(Ra,bi)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,Bj)|0)+Math.imul(fa,bi)|0))<<13)|0;P=((Uc+Math.imul(fa,Bj)|0)+(D>>>13)|
0)+(cF>>>26)|0;cF&=67108863;Tc=Math.imul(Gc,Pc);D=(D=Math.imul(Gc,Oc))+Math.imul(ub,Pc)|0;Uc=Math.imul(ub,Oc);Tc=Tc+Math.imul(jc,Cb)|0;D=(D=D+Math.imul(jc,be)|0)+Math.imul(Kb,Cb)|0;Uc=Uc+Math.imul(Kb,be)|0;Tc=Tc+Math.imul(Ab,kc)|0;D=(D=D+Math.imul(Ab,ah)|0)+Math.imul(Nb,kc)|0;Uc=Uc+Math.imul(Nb,ah)|0;Tc=Tc+Math.imul(ob,Ud)|0;D=(D=D+Math.imul(ob,ki)|0)+Math.imul(Aa,Ud)|0;Uc=Uc+Math.imul(Aa,ki)|0;Tc=Tc+Math.imul(ia,vg)|0;D=(D=D+Math.imul(ia,Wi)|0)+Math.imul(aa,vg)|0;Uc=Uc+Math.imul(aa,Wi)|0;Tc=Tc+Math.imul(ea,
bi)|0;D=(D=D+Math.imul(ea,Bj)|0)+Math.imul(gb,bi)|0;Uc=Uc+Math.imul(gb,Bj)|0;var dF=(P+(Tc+Math.imul(Ra,pj)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,Th)|0)+Math.imul(fa,pj)|0))<<13)|0;P=((Uc+Math.imul(fa,Th)|0)+(D>>>13)|0)+(dF>>>26)|0;dF&=67108863;Tc=Math.imul(Z,Pc);D=(D=Math.imul(Z,Oc))+Math.imul(Yc,Pc)|0;Uc=Math.imul(Yc,Oc);Tc=Tc+Math.imul(Gc,Cb)|0;D=(D=D+Math.imul(Gc,be)|0)+Math.imul(ub,Cb)|0;Uc=Uc+Math.imul(ub,be)|0;Tc=Tc+Math.imul(jc,kc)|0;D=(D=D+Math.imul(jc,ah)|0)+Math.imul(Kb,kc)|0;Uc=Uc+Math.imul(Kb,
ah)|0;Tc=Tc+Math.imul(Ab,Ud)|0;D=(D=D+Math.imul(Ab,ki)|0)+Math.imul(Nb,Ud)|0;Uc=Uc+Math.imul(Nb,ki)|0;Tc=Tc+Math.imul(ob,vg)|0;D=(D=D+Math.imul(ob,Wi)|0)+Math.imul(Aa,vg)|0;Uc=Uc+Math.imul(Aa,Wi)|0;Tc=Tc+Math.imul(ia,bi)|0;D=(D=D+Math.imul(ia,Bj)|0)+Math.imul(aa,bi)|0;Uc=Uc+Math.imul(aa,Bj)|0;Tc=Tc+Math.imul(ea,pj)|0;D=(D=D+Math.imul(ea,Th)|0)+Math.imul(gb,pj)|0;Uc=Uc+Math.imul(gb,Th)|0;var eF=(P+(Tc+Math.imul(Ra,Cj)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,Dj)|0)+Math.imul(fa,Cj)|0))<<13)|0;P=((Uc+Math.imul(fa,
Dj)|0)+(D>>>13)|0)+(eF>>>26)|0;eF&=67108863;Tc=Math.imul(ua,Pc);D=(D=Math.imul(ua,Oc))+Math.imul(sa,Pc)|0;Uc=Math.imul(sa,Oc);Tc=Tc+Math.imul(Z,Cb)|0;D=(D=D+Math.imul(Z,be)|0)+Math.imul(Yc,Cb)|0;Uc=Uc+Math.imul(Yc,be)|0;Tc=Tc+Math.imul(Gc,kc)|0;D=(D=D+Math.imul(Gc,ah)|0)+Math.imul(ub,kc)|0;Uc=Uc+Math.imul(ub,ah)|0;Tc=Tc+Math.imul(jc,Ud)|0;D=(D=D+Math.imul(jc,ki)|0)+Math.imul(Kb,Ud)|0;Uc=Uc+Math.imul(Kb,ki)|0;Tc=Tc+Math.imul(Ab,vg)|0;D=(D=D+Math.imul(Ab,Wi)|0)+Math.imul(Nb,vg)|0;Uc=Uc+Math.imul(Nb,
Wi)|0;Tc=Tc+Math.imul(ob,bi)|0;D=(D=D+Math.imul(ob,Bj)|0)+Math.imul(Aa,bi)|0;Uc=Uc+Math.imul(Aa,Bj)|0;Tc=Tc+Math.imul(ia,pj)|0;D=(D=D+Math.imul(ia,Th)|0)+Math.imul(aa,pj)|0;Uc=Uc+Math.imul(aa,Th)|0;Tc=Tc+Math.imul(ea,Cj)|0;D=(D=D+Math.imul(ea,Dj)|0)+Math.imul(gb,Cj)|0;Uc=Uc+Math.imul(gb,Dj)|0;var fF=(P+(Tc+Math.imul(Ra,Xi)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,Yi)|0)+Math.imul(fa,Xi)|0))<<13)|0;P=((Uc+Math.imul(fa,Yi)|0)+(D>>>13)|0)+(fF>>>26)|0;fF&=67108863;Tc=Math.imul(M,Pc);D=(D=Math.imul(M,Oc))+Math.imul(db,
Pc)|0;Uc=Math.imul(db,Oc);Tc=Tc+Math.imul(ua,Cb)|0;D=(D=D+Math.imul(ua,be)|0)+Math.imul(sa,Cb)|0;Uc=Uc+Math.imul(sa,be)|0;Tc=Tc+Math.imul(Z,kc)|0;D=(D=D+Math.imul(Z,ah)|0)+Math.imul(Yc,kc)|0;Uc=Uc+Math.imul(Yc,ah)|0;Tc=Tc+Math.imul(Gc,Ud)|0;D=(D=D+Math.imul(Gc,ki)|0)+Math.imul(ub,Ud)|0;Uc=Uc+Math.imul(ub,ki)|0;Tc=Tc+Math.imul(jc,vg)|0;D=(D=D+Math.imul(jc,Wi)|0)+Math.imul(Kb,vg)|0;Uc=Uc+Math.imul(Kb,Wi)|0;Tc=Tc+Math.imul(Ab,bi)|0;D=(D=D+Math.imul(Ab,Bj)|0)+Math.imul(Nb,bi)|0;Uc=Uc+Math.imul(Nb,Bj)|
0;Tc=Tc+Math.imul(ob,pj)|0;D=(D=D+Math.imul(ob,Th)|0)+Math.imul(Aa,pj)|0;Uc=Uc+Math.imul(Aa,Th)|0;Tc=Tc+Math.imul(ia,Cj)|0;D=(D=D+Math.imul(ia,Dj)|0)+Math.imul(aa,Cj)|0;Uc=Uc+Math.imul(aa,Dj)|0;Tc=Tc+Math.imul(ea,Xi)|0;D=(D=D+Math.imul(ea,Yi)|0)+Math.imul(gb,Xi)|0;Uc=Uc+Math.imul(gb,Yi)|0;Ra=(P+(Tc+Math.imul(Ra,X)|0)|0)+((8191&(D=(D=D+Math.imul(Ra,Ej)|0)+Math.imul(fa,X)|0))<<13)|0;P=((Uc+Math.imul(fa,Ej)|0)+(D>>>13)|0)+(Ra>>>26)|0;Ra&=67108863;Tc=Math.imul(M,Cb);D=(D=Math.imul(M,be))+Math.imul(db,
Cb)|0;Uc=Math.imul(db,be);Tc=Tc+Math.imul(ua,kc)|0;D=(D=D+Math.imul(ua,ah)|0)+Math.imul(sa,kc)|0;Uc=Uc+Math.imul(sa,ah)|0;Tc=Tc+Math.imul(Z,Ud)|0;D=(D=D+Math.imul(Z,ki)|0)+Math.imul(Yc,Ud)|0;Uc=Uc+Math.imul(Yc,ki)|0;Tc=Tc+Math.imul(Gc,vg)|0;D=(D=D+Math.imul(Gc,Wi)|0)+Math.imul(ub,vg)|0;Uc=Uc+Math.imul(ub,Wi)|0;Tc=Tc+Math.imul(jc,bi)|0;D=(D=D+Math.imul(jc,Bj)|0)+Math.imul(Kb,bi)|0;Uc=Uc+Math.imul(Kb,Bj)|0;Tc=Tc+Math.imul(Ab,pj)|0;D=(D=D+Math.imul(Ab,Th)|0)+Math.imul(Nb,pj)|0;Uc=Uc+Math.imul(Nb,Th)|
0;Tc=Tc+Math.imul(ob,Cj)|0;D=(D=D+Math.imul(ob,Dj)|0)+Math.imul(Aa,Cj)|0;Uc=Uc+Math.imul(Aa,Dj)|0;Tc=Tc+Math.imul(ia,Xi)|0;D=(D=D+Math.imul(ia,Yi)|0)+Math.imul(aa,Xi)|0;Uc=Uc+Math.imul(aa,Yi)|0;fa=(P+(Tc+Math.imul(ea,X)|0)|0)+((8191&(D=(D=D+Math.imul(ea,Ej)|0)+Math.imul(gb,X)|0))<<13)|0;P=((Uc+Math.imul(gb,Ej)|0)+(D>>>13)|0)+(fa>>>26)|0;fa&=67108863;Tc=Math.imul(M,kc);D=(D=Math.imul(M,ah))+Math.imul(db,kc)|0;Uc=Math.imul(db,ah);Tc=Tc+Math.imul(ua,Ud)|0;D=(D=D+Math.imul(ua,ki)|0)+Math.imul(sa,Ud)|
0;Uc=Uc+Math.imul(sa,ki)|0;Tc=Tc+Math.imul(Z,vg)|0;D=(D=D+Math.imul(Z,Wi)|0)+Math.imul(Yc,vg)|0;Uc=Uc+Math.imul(Yc,Wi)|0;Tc=Tc+Math.imul(Gc,bi)|0;D=(D=D+Math.imul(Gc,Bj)|0)+Math.imul(ub,bi)|0;Uc=Uc+Math.imul(ub,Bj)|0;Tc=Tc+Math.imul(jc,pj)|0;D=(D=D+Math.imul(jc,Th)|0)+Math.imul(Kb,pj)|0;Uc=Uc+Math.imul(Kb,Th)|0;Tc=Tc+Math.imul(Ab,Cj)|0;D=(D=D+Math.imul(Ab,Dj)|0)+Math.imul(Nb,Cj)|0;Uc=Uc+Math.imul(Nb,Dj)|0;Tc=Tc+Math.imul(ob,Xi)|0;D=(D=D+Math.imul(ob,Yi)|0)+Math.imul(Aa,Xi)|0;Uc=Uc+Math.imul(Aa,Yi)|
0;ea=(P+(Tc+Math.imul(ia,X)|0)|0)+((8191&(D=(D=D+Math.imul(ia,Ej)|0)+Math.imul(aa,X)|0))<<13)|0;P=((Uc+Math.imul(aa,Ej)|0)+(D>>>13)|0)+(ea>>>26)|0;ea&=67108863;Tc=Math.imul(M,Ud);D=(D=Math.imul(M,ki))+Math.imul(db,Ud)|0;Uc=Math.imul(db,ki);Tc=Tc+Math.imul(ua,vg)|0;D=(D=D+Math.imul(ua,Wi)|0)+Math.imul(sa,vg)|0;Uc=Uc+Math.imul(sa,Wi)|0;Tc=Tc+Math.imul(Z,bi)|0;D=(D=D+Math.imul(Z,Bj)|0)+Math.imul(Yc,bi)|0;Uc=Uc+Math.imul(Yc,Bj)|0;Tc=Tc+Math.imul(Gc,pj)|0;D=(D=D+Math.imul(Gc,Th)|0)+Math.imul(ub,pj)|0;
Uc=Uc+Math.imul(ub,Th)|0;Tc=Tc+Math.imul(jc,Cj)|0;D=(D=D+Math.imul(jc,Dj)|0)+Math.imul(Kb,Cj)|0;Uc=Uc+Math.imul(Kb,Dj)|0;Tc=Tc+Math.imul(Ab,Xi)|0;D=(D=D+Math.imul(Ab,Yi)|0)+Math.imul(Nb,Xi)|0;Uc=Uc+Math.imul(Nb,Yi)|0;gb=(P+(Tc+Math.imul(ob,X)|0)|0)+((8191&(D=(D=D+Math.imul(ob,Ej)|0)+Math.imul(Aa,X)|0))<<13)|0;P=((Uc+Math.imul(Aa,Ej)|0)+(D>>>13)|0)+(gb>>>26)|0;gb&=67108863;Tc=Math.imul(M,vg);D=(D=Math.imul(M,Wi))+Math.imul(db,vg)|0;Uc=Math.imul(db,Wi);Tc=Tc+Math.imul(ua,bi)|0;D=(D=D+Math.imul(ua,Bj)|
0)+Math.imul(sa,bi)|0;Uc=Uc+Math.imul(sa,Bj)|0;Tc=Tc+Math.imul(Z,pj)|0;D=(D=D+Math.imul(Z,Th)|0)+Math.imul(Yc,pj)|0;Uc=Uc+Math.imul(Yc,Th)|0;Tc=Tc+Math.imul(Gc,Cj)|0;D=(D=D+Math.imul(Gc,Dj)|0)+Math.imul(ub,Cj)|0;Uc=Uc+Math.imul(ub,Dj)|0;Tc=Tc+Math.imul(jc,Xi)|0;D=(D=D+Math.imul(jc,Yi)|0)+Math.imul(Kb,Xi)|0;Uc=Uc+Math.imul(Kb,Yi)|0;ia=(P+(Tc+Math.imul(Ab,X)|0)|0)+((8191&(D=(D=D+Math.imul(Ab,Ej)|0)+Math.imul(Nb,X)|0))<<13)|0;P=((Uc+Math.imul(Nb,Ej)|0)+(D>>>13)|0)+(ia>>>26)|0;ia&=67108863;Tc=Math.imul(M,
bi);D=(D=Math.imul(M,Bj))+Math.imul(db,bi)|0;Uc=Math.imul(db,Bj);Tc=Tc+Math.imul(ua,pj)|0;D=(D=D+Math.imul(ua,Th)|0)+Math.imul(sa,pj)|0;Uc=Uc+Math.imul(sa,Th)|0;Tc=Tc+Math.imul(Z,Cj)|0;D=(D=D+Math.imul(Z,Dj)|0)+Math.imul(Yc,Cj)|0;Uc=Uc+Math.imul(Yc,Dj)|0;Tc=Tc+Math.imul(Gc,Xi)|0;D=(D=D+Math.imul(Gc,Yi)|0)+Math.imul(ub,Xi)|0;Uc=Uc+Math.imul(ub,Yi)|0;aa=(P+(Tc+Math.imul(jc,X)|0)|0)+((8191&(D=(D=D+Math.imul(jc,Ej)|0)+Math.imul(Kb,X)|0))<<13)|0;P=((Uc+Math.imul(Kb,Ej)|0)+(D>>>13)|0)+(aa>>>26)|0;aa&=67108863;
Tc=Math.imul(M,pj);D=(D=Math.imul(M,Th))+Math.imul(db,pj)|0;Uc=Math.imul(db,Th);Tc=Tc+Math.imul(ua,Cj)|0;D=(D=D+Math.imul(ua,Dj)|0)+Math.imul(sa,Cj)|0;Uc=Uc+Math.imul(sa,Dj)|0;Tc=Tc+Math.imul(Z,Xi)|0;D=(D=D+Math.imul(Z,Yi)|0)+Math.imul(Yc,Xi)|0;Uc=Uc+Math.imul(Yc,Yi)|0;ob=(P+(Tc+Math.imul(Gc,X)|0)|0)+((8191&(D=(D=D+Math.imul(Gc,Ej)|0)+Math.imul(ub,X)|0))<<13)|0;P=((Uc+Math.imul(ub,Ej)|0)+(D>>>13)|0)+(ob>>>26)|0;ob&=67108863;Tc=Math.imul(M,Cj);D=(D=Math.imul(M,Dj))+Math.imul(db,Cj)|0;Uc=Math.imul(db,
Dj);Tc=Tc+Math.imul(ua,Xi)|0;D=(D=D+Math.imul(ua,Yi)|0)+Math.imul(sa,Xi)|0;Uc=Uc+Math.imul(sa,Yi)|0;Aa=(P+(Tc+Math.imul(Z,X)|0)|0)+((8191&(D=(D=D+Math.imul(Z,Ej)|0)+Math.imul(Yc,X)|0))<<13)|0;P=((Uc+Math.imul(Yc,Ej)|0)+(D>>>13)|0)+(Aa>>>26)|0;Aa&=67108863;Tc=Math.imul(M,Xi);D=(D=Math.imul(M,Yi))+Math.imul(db,Xi)|0;Uc=Math.imul(db,Yi);Ab=(P+(Tc+Math.imul(ua,X)|0)|0)+((8191&(D=(D=D+Math.imul(ua,Ej)|0)+Math.imul(sa,X)|0))<<13)|0;P=((Uc+Math.imul(sa,Ej)|0)+(D>>>13)|0)+(Ab>>>26)|0;Ab&=67108863;Nb=(P+Math.imul(M,
X)|0)+((8191&(D=(D=Math.imul(M,Ej))+Math.imul(db,X)|0))<<13)|0;return P=(Math.imul(db,Ej)+(D>>>13)|0)+(Nb>>>26)|0,Nb&=67108863,T[0]=nC,T[1]=mC,T[2]=Sz,T[3]=Tx,T[4]=$E,T[5]=cF,T[6]=dF,T[7]=eF,T[8]=fF,T[9]=Ra,T[10]=fa,T[11]=ea,T[12]=gb,T[13]=ia,T[14]=aa,T[15]=ob,T[16]=Aa,T[17]=Ab,T[18]=Nb,0!==P&&(T[19]=P,J.length++),J};Math.imul||(ha=q);a.prototype.mulTo=function(D,P){var J=(this||Pa).length+D.length;if(10===(this||Pa).length&&10===D.length)D=ha(this||Pa,D,P);else if(63>J)D=q(this||Pa,D,P);else if(1024>
J){J=this||Pa;P.negative=D.negative^J.negative;P.length=J.length+D.length;for(var M=0,X=0,T=0;T<P.length-1;T++){var fa=X;X=0;M&=67108863;for(var Ra=Math.min(T,D.length-1),gb=Math.max(0,T-J.length+1);gb<=Ra;gb++){var ea=(0|J.words[T-gb])*(0|D.words[gb]),aa=67108863&ea;M=67108863&(aa=aa+M|0);X+=(fa=(fa=fa+(ea/67108864|0)|0)+(aa>>>26)|0)>>>26;fa&=67108863}P.words[T]=M;M=fa}D=(0!==M?P.words[T]=M:P.length--,P.strip())}else J=this||Pa,D=(new r).mulp(J,D,P);return D};r.prototype.makeRBT=function(D){for(var P=
Array(D),J=a.prototype._countBits(D)-1,M=0;M<D;M++)P[M]=this.revBin(M,J,D);return P};r.prototype.revBin=function(D,P,J){if(0===D||D===J-1)return D;for(var M=J=0;M<P;M++)J|=(1&D)<<P-M-1,D>>=1;return J};r.prototype.permute=function(D,P,J,M,X,T){for(var fa=0;fa<T;fa++)M[fa]=P[D[fa]],X[fa]=J[D[fa]]};r.prototype.transform=function(D,P,J,M,X,T){this.permute(T,D,P,J,M,X);for(D=1;D<X;D<<=1){P=D<<1;T=Math.cos(2*Math.PI/P);for(var fa=Math.sin(2*Math.PI/P),Ra=0;Ra<X;Ra+=P)for(var gb=T,ea=fa,aa=0;aa<D;aa++){var ia=
J[Ra+aa],Aa=M[Ra+aa],ob=J[Ra+aa+D],Nb=M[Ra+aa+D],Ab=gb*ob-ea*Nb;Nb=gb*Nb+ea*ob;ob=Ab;J[Ra+aa]=ia+ob;M[Ra+aa]=Aa+Nb;J[Ra+aa+D]=ia-ob;M[Ra+aa+D]=Aa-Nb;aa!==P&&(Ab=T*gb-fa*ea,ea=T*ea+fa*gb,gb=Ab)}}};r.prototype.guessLen13b=function(D,P){D=1|Math.max(P,D);P=1&D;var J=0;for(D=D/2|0;D;D>>>=1)J++;return 1<<J+1+P};r.prototype.conjugate=function(D,P,J){if(!(1>=J))for(var M=0;M<J/2;M++){var X=D[M];D[M]=D[J-M-1];D[J-M-1]=X;X=P[M];P[M]=-P[J-M-1];P[J-M-1]=-X}};r.prototype.normalize13b=function(D,P){for(var J=
0,M=0;M<P/2;M++)J=8192*Math.round(D[2*M+1]/P)+Math.round(D[2*M]/P)+J,D[M]=67108863&J,J=67108864>J?0:J/67108864|0;return D};r.prototype.convert13b=function(D,P,J,M){for(var X=0,T=0;T<P;T++)X+=0|D[T],J[2*T]=8191&X,X>>>=13,J[2*T+1]=8191&X,X>>>=13;for(T=2*P;T<M;++T)J[T]=0;e(0===X);e(0==(-8192&X))};r.prototype.stub=function(D){for(var P=Array(D),J=0;J<D;J++)P[J]=0;return P};r.prototype.mulp=function(D,P,J){var M=2*this.guessLen13b(D.length,P.length),X=this.makeRBT(M),T=this.stub(M),fa=Array(M),Ra=Array(M),
gb=Array(M),ea=Array(M),aa=Array(M),ia=Array(M),Aa=J.words;Aa.length=M;this.convert13b(D.words,D.length,fa,M);this.convert13b(P.words,P.length,ea,M);this.transform(fa,T,Ra,gb,M,X);this.transform(ea,T,aa,ia,M,X);for(fa=0;fa<M;fa++)ea=Ra[fa]*aa[fa]-gb[fa]*ia[fa],gb[fa]=Ra[fa]*ia[fa]+gb[fa]*aa[fa],Ra[fa]=ea;return this.conjugate(Ra,gb,M),this.transform(Ra,gb,Aa,T,M,X),this.conjugate(Aa,T,M),this.normalize13b(Aa,M),J.negative=D.negative^P.negative,J.length=D.length+P.length,J.strip()};a.prototype.mul=
function(D){var P=new a(null);return P.words=Array((this||Pa).length+D.length),this.mulTo(D,P)};a.prototype.mulf=function(D){var P=new a(null);P.words=Array((this||Pa).length+D.length);var J=this||Pa;return(new r).mulp(J,D,P)};a.prototype.imul=function(D){return this.clone().mulTo(D,this||Pa)};a.prototype.imuln=function(D){e("number"==typeof D);e(67108864>D);for(var P=0,J=0;J<(this||Pa).length;J++){var M=(0|(this||Pa).words[J])*D,X=(67108863&M)+(67108863&P);P>>=26;P+=M/67108864|0;P+=X>>>26;(this||
Pa).words[J]=67108863&X}return 0!==P&&((this||Pa).words[J]=P,(this||Pa).length++),this||Pa};a.prototype.muln=function(D){return this.clone().imuln(D)};a.prototype.sqr=function(){return this.mul(this||Pa)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(D){for(var P=Array(D.bitLength()),J=0;J<P.length;J++){var M=J%26;P[J]=(D.words[J/26|0]&1<<M)>>>M}if(0===P.length)return new a(1);D=this||Pa;for(J=0;J<P.length&&0===P[J];J++,D=D.sqr());if(++J<P.length)for(M=D.sqr();J<
P.length;J++,M=M.sqr())0!==P[J]&&(D=D.mul(M));return D};a.prototype.iushln=function(D){e("number"==typeof D&&0<=D);var P=D%26,J=(D-P)/26,M=67108863>>>26-P<<26-P;if(0!==P){var X=0;for(D=0;D<(this||Pa).length;D++){var T=(this||Pa).words[D]&M;(this||Pa).words[D]=(0|(this||Pa).words[D])-T<<P|X;X=T>>>26-P}X&&((this||Pa).words[D]=X,(this||Pa).length++)}if(0!==J){for(D=(this||Pa).length-1;0<=D;D--)(this||Pa).words[D+J]=(this||Pa).words[D];for(D=0;D<J;D++)(this||Pa).words[D]=0;(this||Pa).length+=J}return this.strip()};
a.prototype.ishln=function(D){return e(0===(this||Pa).negative),this.iushln(D)};a.prototype.iushrn=function(D,P,J){e("number"==typeof D&&0<=D);P=P?(P-P%26)/26:0;var M=D%26,X=Math.min((D-M)/26,(this||Pa).length);D=67108863^67108863>>>M<<M;if(P-=X,P=Math.max(0,P),J){for(var T=0;T<X;T++)J.words[T]=(this||Pa).words[T];J.length=X}if(0!==X)if((this||Pa).length>X)for((this||Pa).length-=X,T=0;T<(this||Pa).length;T++)(this||Pa).words[T]=(this||Pa).words[T+X];else(this||Pa).words[0]=0,(this||Pa).length=1;X=
0;for(T=(this||Pa).length-1;0<=T&&(0!==X||T>=P);T--){var fa=0|(this||Pa).words[T];(this||Pa).words[T]=X<<26-M|fa>>>M;X=fa&D}return J&&0!==X&&(J.words[J.length++]=X),0===(this||Pa).length&&((this||Pa).words[0]=0,(this||Pa).length=1),this.strip()};a.prototype.ishrn=function(D,P,J){return e(0===(this||Pa).negative),this.iushrn(D,P,J)};a.prototype.shln=function(D){return this.clone().ishln(D)};a.prototype.ushln=function(D){return this.clone().iushln(D)};a.prototype.shrn=function(D){return this.clone().ishrn(D)};
a.prototype.ushrn=function(D){return this.clone().iushrn(D)};a.prototype.testn=function(D){e("number"==typeof D&&0<=D);var P=D%26;D=(D-P)/26;return!((this||Pa).length<=D)&&!!((this||Pa).words[D]&1<<P)};a.prototype.imaskn=function(D){e("number"==typeof D&&0<=D);var P=D%26;D=(D-P)/26;if(e(0===(this||Pa).negative,"imaskn works only with positive numbers"),(this||Pa).length<=D)return this||Pa;if(0!==P&&D++,(this||Pa).length=Math.min(D,(this||Pa).length),0!==P)(this||Pa).words[(this||Pa).length-1]&=67108863^
67108863>>>P<<P;return this.strip()};a.prototype.maskn=function(D){return this.clone().imaskn(D)};a.prototype.iaddn=function(D){return e("number"==typeof D),e(67108864>D),0>D?this.isubn(-D):0!==(this||Pa).negative?1===(this||Pa).length&&(0|(this||Pa).words[0])<D?((this||Pa).words[0]=D-(0|(this||Pa).words[0]),(this||Pa).negative=0,this||Pa):((this||Pa).negative=0,this.isubn(D),(this||Pa).negative=1,this||Pa):this._iaddn(D)};a.prototype._iaddn=function(D){(this||Pa).words[0]+=D;for(D=0;D<(this||Pa).length&&
67108864<=(this||Pa).words[D];D++)(this||Pa).words[D]-=67108864,D===(this||Pa).length-1?(this||Pa).words[D+1]=1:(this||Pa).words[D+1]++;return(this||Pa).length=Math.max((this||Pa).length,D+1),this||Pa};a.prototype.isubn=function(D){if(e("number"==typeof D),e(67108864>D),0>D)return this.iaddn(-D);if(0!==(this||Pa).negative)return(this||Pa).negative=0,this.iaddn(D),(this||Pa).negative=1,this||Pa;if((this||Pa).words[0]-=D,1===(this||Pa).length&&0>(this||Pa).words[0])(this||Pa).words[0]=-(this||Pa).words[0],
(this||Pa).negative=1;else for(D=0;D<(this||Pa).length&&0>(this||Pa).words[D];D++)(this||Pa).words[D]+=67108864,--(this||Pa).words[D+1];return this.strip()};a.prototype.addn=function(D){return this.clone().iaddn(D)};a.prototype.subn=function(D){return this.clone().isubn(D)};a.prototype.iabs=function(){return(this||Pa).negative=0,this||Pa};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(D,P,J){var M;this._expand(D.length+J);var X=0;for(M=0;M<D.length;M++){var T=
(0|(this||Pa).words[M+J])+X;X=(0|D.words[M])*P;X=((T-=67108863&X)>>26)-(X/67108864|0);(this||Pa).words[M+J]=67108863&T}for(;M<(this||Pa).length-J;M++)X=(T=(0|(this||Pa).words[M+J])+X)>>26,(this||Pa).words[M+J]=67108863&T;if(0===X)return this.strip();e(-1===X);for(M=X=0;M<(this||Pa).length;M++)X=(T=-(0|(this||Pa).words[M])+X)>>26,(this||Pa).words[M]=67108863&T;return(this||Pa).negative=1,this.strip()};a.prototype._wordDiv=function(D,P){var J=((this||Pa).length,D.length),M=this.clone(),X=0|D.words[D.length-
1];0!==(J=26-this._countBits(X))&&(D=D.ushln(J),M.iushln(J),X=0|D.words[D.length-1]);var T,fa=M.length-D.length;if("mod"!==P){(T=new a(null)).length=fa+1;T.words=Array(T.length);for(var Ra=0;Ra<T.length;Ra++)T.words[Ra]=0}Ra=M.clone()._ishlnsubmul(D,1,fa);0===Ra.negative&&(M=Ra,T&&(T.words[fa]=1));for(--fa;0<=fa;fa--){Ra=67108864*(0|M.words[D.length+fa])+(0|M.words[D.length+fa-1]);Ra=Math.min(Ra/X|0,67108863);for(M._ishlnsubmul(D,Ra,fa);0!==M.negative;)Ra--,M.negative=0,M._ishlnsubmul(D,1,fa),M.isZero()||
(M.negative^=1);T&&(T.words[fa]=Ra)}return T&&T.strip(),M.strip(),"div"!==P&&0!==J&&M.iushrn(J),{div:T||null,mod:M}};a.prototype.divmod=function(D,P,J){return e(!D.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==(this||Pa).negative&&0===D.negative?(T=this.neg().divmod(D,P),"mod"!==P&&(M=T.div.neg()),"div"!==P&&(X=T.mod.neg(),J&&0!==X.negative&&X.iadd(D)),{div:M,mod:X}):0===(this||Pa).negative&&0!==D.negative?(T=this.divmod(D.neg(),P),"mod"!==P&&(M=T.div.neg()),{div:M,mod:T.mod}):0!=((this||
Pa).negative&D.negative)?(T=this.neg().divmod(D.neg(),P),"div"!==P&&(X=T.mod.neg(),J&&0!==X.negative&&X.isub(D)),{div:T.div,mod:X}):D.length>(this||Pa).length||0>this.cmp(D)?{div:new a(0),mod:this||Pa}:1===D.length?"div"===P?{div:this.divn(D.words[0]),mod:null}:"mod"===P?{div:null,mod:new a(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new a(this.modn(D.words[0]))}:this._wordDiv(D,P);var M,X,T};a.prototype.div=function(D){return this.divmod(D,"div",!1).div};a.prototype.mod=function(D){return this.divmod(D,
"mod",!1).mod};a.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod};a.prototype.divRound=function(D){var P=this.divmod(D);if(P.mod.isZero())return P.div;var J=0!==P.div.negative?P.mod.isub(D):P.mod,M=D.ushrn(1);D=D.andln(1);J=J.cmp(M);return 0>J||1===D&&0===J?P.div:0!==P.div.negative?P.div.isubn(1):P.div.iaddn(1)};a.prototype.modn=function(D){e(67108863>=D);for(var P=67108864%D,J=0,M=(this||Pa).length-1;0<=M;M--)J=(P*J+(0|(this||Pa).words[M]))%D;return J};a.prototype.idivn=function(D){e(67108863>=
D);for(var P=0,J=(this||Pa).length-1;0<=J;J--)P=(0|(this||Pa).words[J])+67108864*P,(this||Pa).words[J]=P/D|0,P%=D;return this.strip()};a.prototype.divn=function(D){return this.clone().idivn(D)};a.prototype.egcd=function(D){e(0===D.negative);e(!D.isZero());var P=this||Pa,J=D.clone();P=0!==P.negative?P.umod(D):P.clone();D=new a(1);for(var M=new a(0),X=new a(0),T=new a(1),fa=0;P.isEven()&&J.isEven();)P.iushrn(1),J.iushrn(1),++fa;for(var Ra=J.clone(),gb=P.clone();!P.isZero();){for(var ea=0,aa=1;0==(P.words[0]&
aa)&&26>ea;++ea,aa<<=1);if(0<ea)for(P.iushrn(ea);0<ea--;)(D.isOdd()||M.isOdd())&&(D.iadd(Ra),M.isub(gb)),D.iushrn(1),M.iushrn(1);ea=0;for(aa=1;0==(J.words[0]&aa)&&26>ea;++ea,aa<<=1);if(0<ea)for(J.iushrn(ea);0<ea--;)(X.isOdd()||T.isOdd())&&(X.iadd(Ra),T.isub(gb)),X.iushrn(1),T.iushrn(1);0<=P.cmp(J)?(P.isub(J),D.isub(X),M.isub(T)):(J.isub(P),X.isub(D),T.isub(M))}return{a:X,b:T,gcd:J.iushln(fa)}};a.prototype._invmp=function(D){e(0===D.negative);e(!D.isZero());var P=this||Pa,J=D.clone();P=0!==P.negative?
P.umod(D):P.clone();for(var M,X=new a(1),T=new a(0),fa=J.clone();0<P.cmpn(1)&&0<J.cmpn(1);){for(var Ra=0,gb=1;0==(P.words[0]&gb)&&26>Ra;++Ra,gb<<=1);if(0<Ra)for(P.iushrn(Ra);0<Ra--;)X.isOdd()&&X.iadd(fa),X.iushrn(1);Ra=0;for(gb=1;0==(J.words[0]&gb)&&26>Ra;++Ra,gb<<=1);if(0<Ra)for(J.iushrn(Ra);0<Ra--;)T.isOdd()&&T.iadd(fa),T.iushrn(1);0<=P.cmp(J)?(P.isub(J),X.isub(T)):(J.isub(P),T.isub(X))}return 0>(M=0===P.cmpn(1)?X:T).cmpn(0)&&M.iadd(D),M};a.prototype.gcd=function(D){if(this.isZero())return D.abs();
if(D.isZero())return this.abs();var P=this.clone();D=D.clone();P.negative=0;for(var J=D.negative=0;P.isEven()&&D.isEven();J++)P.iushrn(1),D.iushrn(1);for(;;){for(;P.isEven();)P.iushrn(1);for(;D.isEven();)D.iushrn(1);var M=P.cmp(D);if(0>M)M=P,P=D,D=M;else if(0===M||0===D.cmpn(1))break;P.isub(D)}return D.iushln(J)};a.prototype.invm=function(D){return this.egcd(D).a.umod(D)};a.prototype.isEven=function(){return 0==(1&(this||Pa).words[0])};a.prototype.isOdd=function(){return 1==(1&(this||Pa).words[0])};
a.prototype.andln=function(D){return(this||Pa).words[0]&D};a.prototype.bincn=function(D){e("number"==typeof D);var P=D%26;D=(D-P)/26;P=1<<P;if((this||Pa).length<=D)return this._expand(D+1),(this||Pa).words[D]|=P,this||Pa;for(;0!==P&&D<(this||Pa).length;D++){var J=0|(this||Pa).words[D];P=(J+=P)>>>26;J&=67108863;(this||Pa).words[D]=J}return 0!==P&&((this||Pa).words[D]=P,(this||Pa).length++),this||Pa};a.prototype.isZero=function(){return 1===(this||Pa).length&&0===(this||Pa).words[0]};a.prototype.cmpn=
function(D){var P=0>D;if(0!==(this||Pa).negative&&!P)return-1;if(0===(this||Pa).negative&&P)return 1;(this.strip(),1<(this||Pa).length)?D=1:(P&&(D=-D),e(67108863>=D,"Number is too big"),P=0|(this||Pa).words[0],D=P===D?0:P<D?-1:1);return 0!==(this||Pa).negative?0|-D:D};a.prototype.cmp=function(D){if(0!==(this||Pa).negative&&0===D.negative)return-1;if(0===(this||Pa).negative&&0!==D.negative)return 1;D=this.ucmp(D);return 0!==(this||Pa).negative?0|-D:D};a.prototype.ucmp=function(D){if((this||Pa).length>
D.length)return 1;if((this||Pa).length<D.length)return-1;for(var P=0,J=(this||Pa).length-1;0<=J;J--){var M=0|(this||Pa).words[J],X=0|D.words[J];if(M!==X){M<X?P=-1:M>X&&(P=1);break}}return P};a.prototype.gtn=function(D){return 1===this.cmpn(D)};a.prototype.gt=function(D){return 1===this.cmp(D)};a.prototype.gten=function(D){return 0<=this.cmpn(D)};a.prototype.gte=function(D){return 0<=this.cmp(D)};a.prototype.ltn=function(D){return-1===this.cmpn(D)};a.prototype.lt=function(D){return-1===this.cmp(D)};
a.prototype.lten=function(D){return 0>=this.cmpn(D)};a.prototype.lte=function(D){return 0>=this.cmp(D)};a.prototype.eqn=function(D){return 0===this.cmpn(D)};a.prototype.eq=function(D){return 0===this.cmp(D)};a.red=function(D){return new C(D)};a.prototype.toRed=function(D){return e(!(this||Pa).red,"Already a number in reduction context"),e(0===(this||Pa).negative,"red works only with positives"),D.convertTo(this||Pa)._forceRed(D)};a.prototype.fromRed=function(){return e((this||Pa).red,"fromRed works only with numbers in reduction context"),
(this||Pa).red.convertFrom(this||Pa)};a.prototype._forceRed=function(D){return(this||Pa).red=D,this||Pa};a.prototype.forceRed=function(D){return e(!(this||Pa).red,"Already a number in reduction context"),this._forceRed(D)};a.prototype.redAdd=function(D){return e((this||Pa).red,"redAdd works only with red numbers"),(this||Pa).red.add(this||Pa,D)};a.prototype.redIAdd=function(D){return e((this||Pa).red,"redIAdd works only with red numbers"),(this||Pa).red.iadd(this||Pa,D)};a.prototype.redSub=function(D){return e((this||
Pa).red,"redSub works only with red numbers"),(this||Pa).red.sub(this||Pa,D)};a.prototype.redISub=function(D){return e((this||Pa).red,"redISub works only with red numbers"),(this||Pa).red.isub(this||Pa,D)};a.prototype.redShl=function(D){return e((this||Pa).red,"redShl works only with red numbers"),(this||Pa).red.shl(this||Pa,D)};a.prototype.redMul=function(D){return e((this||Pa).red,"redMul works only with red numbers"),(this||Pa).red._verify2(this||Pa,D),(this||Pa).red.mul(this||Pa,D)};a.prototype.redIMul=
function(D){return e((this||Pa).red,"redMul works only with red numbers"),(this||Pa).red._verify2(this||Pa,D),(this||Pa).red.imul(this||Pa,D)};a.prototype.redSqr=function(){return e((this||Pa).red,"redSqr works only with red numbers"),(this||Pa).red._verify1(this||Pa),(this||Pa).red.sqr(this||Pa)};a.prototype.redISqr=function(){return e((this||Pa).red,"redISqr works only with red numbers"),(this||Pa).red._verify1(this||Pa),(this||Pa).red.isqr(this||Pa)};a.prototype.redSqrt=function(){return e((this||
Pa).red,"redSqrt works only with red numbers"),(this||Pa).red._verify1(this||Pa),(this||Pa).red.sqrt(this||Pa)};a.prototype.redInvm=function(){return e((this||Pa).red,"redInvm works only with red numbers"),(this||Pa).red._verify1(this||Pa),(this||Pa).red.invm(this||Pa)};a.prototype.redNeg=function(){return e((this||Pa).red,"redNeg works only with red numbers"),(this||Pa).red._verify1(this||Pa),(this||Pa).red.neg(this||Pa)};a.prototype.redPow=function(D){return e((this||Pa).red&&!D.red,"redPow(normalNum)"),
(this||Pa).red._verify1(this||Pa),(this||Pa).red.pow(this||Pa,D)};var qa={k256:null,p224:null,p192:null,p25519:null};u.prototype._tmp=function(){var D=new a(null);return D.words=Array(Math.ceil((this||Pa).n/13)),D};u.prototype.ireduce=function(D){do{this.split(D,(this||Pa).tmp);var P=(D=(D=this.imulK(D)).iadd((this||Pa).tmp)).bitLength()}while(P>(this||Pa).n);P=P<(this||Pa).n?-1:D.ucmp((this||Pa).p);return 0===P?(D.words[0]=0,D.length=1):0<P?D.isub((this||Pa).p):D.strip(),D};u.prototype.split=function(D,
P){D.iushrn((this||Pa).n,0,P)};u.prototype.imulK=function(D){return D.imul((this||Pa).k)};l(v,u);v.prototype.split=function(D,P){for(var J=Math.min(D.length,9),M=0;M<J;M++)P.words[M]=D.words[M];if(P.length=J,9>=D.length)return D.words[0]=0,D.length=1,void 0;J=D.words[9];P.words[P.length++]=4194303&J;for(M=10;M<D.length;M++)P=0|D.words[M],D.words[M-10]=(4194303&P)<<4|J>>>22,J=P;J>>>=22;D.words[M-10]=J;0===J&&10<D.length?D.length-=10:D.length-=9};v.prototype.imulK=function(D){D.words[D.length]=0;D.words[D.length+
1]=0;D.length+=2;for(var P=0,J=0;J<D.length;J++){var M=0|D.words[J];P+=977*M;D.words[J]=67108863&P;P=64*M+(P/67108864|0)}return 0===D.words[D.length-1]&&(D.length--,0===D.words[D.length-1]&&D.length--),D};l(y,u);l(z,u);l(B,u);B.prototype.imulK=function(D){for(var P=0,J=0;J<D.length;J++){P=19*(0|D.words[J])+P;var M=67108863&P;P>>>=26;D.words[J]=M}return 0!==P&&(D.words[D.length++]=P),D};a._prime=function(D){if(qa[D])return qa[D];if("k256"===D)var P=new v;else if("p224"===D)P=new y;else if("p192"===
D)P=new z;else{if("p25519"!==D)throw Error("Unknown prime "+D);P=new B}return qa[D]=P,P};C.prototype._verify1=function(D){e(0===D.negative,"red works only with positives");e(D.red,"red works only with red numbers")};C.prototype._verify2=function(D,P){e(0==(D.negative|P.negative),"red works only with positives");e(D.red&&D.red===P.red,"red works only with red numbers")};C.prototype.imod=function(D){return(this||Pa).prime?(this||Pa).prime.ireduce(D)._forceRed(this||Pa):D.umod((this||Pa).m)._forceRed(this||
Pa)};C.prototype.neg=function(D){return D.isZero()?D.clone():(this||Pa).m.sub(D)._forceRed(this||Pa)};C.prototype.add=function(D,P){this._verify2(D,P);D=D.add(P);return 0<=D.cmp((this||Pa).m)&&D.isub((this||Pa).m),D._forceRed(this||Pa)};C.prototype.iadd=function(D,P){this._verify2(D,P);D=D.iadd(P);return 0<=D.cmp((this||Pa).m)&&D.isub((this||Pa).m),D};C.prototype.sub=function(D,P){this._verify2(D,P);D=D.sub(P);return 0>D.cmpn(0)&&D.iadd((this||Pa).m),D._forceRed(this||Pa)};C.prototype.isub=function(D,
P){this._verify2(D,P);D=D.isub(P);return 0>D.cmpn(0)&&D.iadd((this||Pa).m),D};C.prototype.shl=function(D,P){return this._verify1(D),this.imod(D.ushln(P))};C.prototype.imul=function(D,P){return this._verify2(D,P),this.imod(D.imul(P))};C.prototype.mul=function(D,P){return this._verify2(D,P),this.imod(D.mul(P))};C.prototype.isqr=function(D){return this.imul(D,D.clone())};C.prototype.sqr=function(D){return this.mul(D,D)};C.prototype.sqrt=function(D){if(D.isZero())return D.clone();var P=(this||Pa).m.andln(3);
if(e(1==P%2),3===P)return P=(this||Pa).m.add(new a(1)).iushrn(2),this.pow(D,P);for(var J=(this||Pa).m.subn(1),M=0;!J.isZero()&&0===J.andln(1);)M++,J.iushrn(1);e(!J.isZero());P=(new a(1)).toRed(this||Pa);var X=P.redNeg(),T=(this||Pa).m.subn(1).iushrn(1),fa=(this||Pa).m.bitLength();for(fa=(new a(2*fa*fa)).toRed(this||Pa);0!==this.pow(fa,T).cmp(X);)fa.redIAdd(X);T=this.pow(fa,J);X=this.pow(D,J.addn(1).iushrn(1));D=this.pow(D,J);for(J=M;0!==D.cmp(P);){fa=D;for(M=0;0!==fa.cmp(P);M++)fa=fa.redSqr();e(M<
J);T=this.pow(T,(new a(1)).iushln(J-M-1));X=X.redMul(T);T=T.redSqr();D=D.redMul(T);J=M}return X};C.prototype.invm=function(D){D=D._invmp((this||Pa).m);return 0!==D.negative?(D.negative=0,this.imod(D).redNeg()):this.imod(D)};C.prototype.pow=function(D,P){if(P.isZero())return(new a(1)).toRed(this||Pa);if(0===P.cmpn(1))return D.clone();var J=Array(16);J[0]=(new a(1)).toRed(this||Pa);J[1]=D;for(var M=2;M<J.length;M++)J[M]=this.mul(J[M-1],D);D=J[0];var X=0,T=0,fa=P.bitLength()%26;0===fa&&(fa=26);for(M=
P.length-1;0<=M;M--){var Ra=P.words[M];for(--fa;0<=fa;fa--){var gb=Ra>>fa&1;D!==J[0]&&(D=this.sqr(D));0!==gb||0!==X?(X<<=1,X|=gb,(4===++T||0===M&&0===fa)&&(D=this.mul(D,J[X]),T=0,X=0)):T=0}fa=26}return D};C.prototype.convertTo=function(D){var P=D.umod((this||Pa).m);return P===D?P.clone():P};C.prototype.convertFrom=function(D){D=D.clone();return D.red=null,D};a.mont=function(D){return new G(D)};l(G,C);G.prototype.convertTo=function(D){return this.imod(D.ushln((this||Pa).shift))};G.prototype.convertFrom=
function(D){D=this.imod(D.mul((this||Pa).rinv));return D.red=null,D};G.prototype.imul=function(D,P){if(D.isZero()||P.isZero())return D.words[0]=0,D.length=1,D;D=D.imul(P);P=D.maskn((this||Pa).shift).mul((this||Pa).minv).imaskn((this||Pa).shift).mul((this||Pa).m);P=D=D.isub(P).iushrn((this||Pa).shift);return 0<=D.cmp((this||Pa).m)?P=D.isub((this||Pa).m):0>D.cmpn(0)&&(P=D.iadd((this||Pa).m)),P._forceRed(this||Pa)};G.prototype.mul=function(D,P){if(D.isZero()||P.isZero())return(new a(0))._forceRed(this||
Pa);D=D.mul(P);P=D.maskn((this||Pa).shift).mul((this||Pa).minv).imaskn((this||Pa).shift).mul((this||Pa).m);P=D=D.isub(P).iushrn((this||Pa).shift);return 0<=D.cmp((this||Pa).m)?P=D.isub((this||Pa).m):0>D.cmpn(0)&&(P=D.iadd((this||Pa).m)),P._forceRed(this||Pa)};G.prototype.invm=function(D){return this.imod(D._invmp((this||Pa).m).mul((this||Pa).r2))._forceRed(this||Pa)}}(F4,E4);var Uk=F4.exports,XK,dS,G4=Object.freeze({}),gI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global;
if((XK=function(n){return dS||(dS=new sx(null)),dS.generate(n)}).Rand=sx,sx.prototype.generate=function(n){return this._rand(n)},sx.prototype._rand=function(n){if((this||gI).rand.getBytes)return(this||gI).rand.getBytes(n);n=new Uint8Array(n);for(var b=0;b<n.length;b++)n[b]=(this||gI).rand.getByte();return n},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?sx.prototype._rand=function(n){n=new Uint8Array(n);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?
sx.prototype._rand=function(n){n=new Uint8Array(n);return self.msCrypto.getRandomValues(n),n}:"object"==typeof window&&(sx.prototype._rand=function(){throw Error("Not implemented yet");});else try{if("function"!=typeof G4.randomBytes)throw Error("Not supported");sx.prototype._rand=function(n){return G4.randomBytes(n)}}catch(n){}var uY="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,cA=Uk,maa=XK;tx.create=function(n){return new tx(n)};tx.prototype._randbelow=function(n){var b=
n.bitLength();b=Math.ceil(b/8);do var e=new cA((this||uY).rand.generate(b));while(0<=e.cmp(n));return e};tx.prototype._randrange=function(n,b){b=b.sub(n);return n.add(this._randbelow(b))};tx.prototype.test=function(n,b,e){var l=n.bitLength(),a=cA.mont(n),f=(new cA(1)).toRed(a);b||(b=Math.max(1,l/48|0));l=n.subn(1);for(var m=0;!l.testn(m);m++);n=n.shrn(m);for(var q=l.toRed(a);0<b;b--){var r=this._randrange(new cA(2),l);e&&e(r);r=r.toRed(a).redPow(n);if(0!==r.cmp(f)&&0!==r.cmp(q)){for(var u=1;u<m;u++){if(0===
(r=r.redSqr()).cmp(f))return!1;if(0===r.cmp(q))break}if(u===m)return!1}}return!0};tx.prototype.getDivisor=function(n,b){var e=n.bitLength(),l=cA.mont(n),a=(new cA(1)).toRed(l);b||(b=Math.max(1,e/48|0));e=n.subn(1);for(var f=0;!e.testn(f);f++);for(var m=n.shrn(f),q=e.toRed(l);0<b;b--){var r=this._randrange(new cA(2),e),u=n.gcd(r);if(0!==u.cmpn(1))return u;r=r.toRed(l).redPow(m);if(0!==r.cmp(a)&&0!==r.cmp(q)){for(u=1;u<f;u++){if(0===(r=r.redSqr()).cmp(a))return r.fromRed().subn(1).gcd(n);if(0===r.cmp(q))break}if(u===
f)return r.redSqr().fromRed().subn(1).gcd(n)}}return!1};var naa=Wx;UD.simpleSieve=YN;UD.fermatTest=$N;var on=Uk,saa=new on(24),wY=new tx,oaa=new on(1),aO=new on(2),paa=new on(5),qaa=(new on(16),new on(8),new on(10)),raa=new on(3),taa=(new on(7),new on(11)),vY=new on(4),ZN=(new on(12),null),gi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Tt=eh.Buffer,Rq=Uk,H4=new tx,Dja=new Rq(24),Eja=new Rq(11),Fja=new Rq(10),Gja=new Rq(3),Hja=new Rq(7),YK={};Object.defineProperty(ks.prototype,
"verifyError",{enumerable:!0,get:function(){if("number"!=typeof(this||gi)._primeCode){var n=(this||gi).__prime;var b=(this||gi).__gen.toString("hex"),e=[b,n.toString(16)].join("_");if(e in YK)n=YK[e];else{var l,a=0;if(!n.isEven()&&UD.simpleSieve&&UD.fermatTest(n)&&H4.test(n)){switch(H4.test(n.shrn(1))||(a+=2),b){case "02":n.mod(Dja).cmp(Eja)&&(a+=8);break;case "05":(l=n.mod(Fja)).cmp(Gja)&&l.cmp(Hja)&&(a+=8);break;default:a+=4}n=(YK[e]=a,a)}else n=(a+=1,a+="02"===b||"05"===b?8:4,YK[e]=a,a)}(this||
gi)._primeCode=n}return(this||gi)._primeCode}});ks.prototype.generateKeys=function(){return(this||gi)._priv||((this||gi)._priv=new Rq(Wx((this||gi)._primeLen))),(this||gi)._pub=(this||gi)._gen.toRed((this||gi)._prime).redPow((this||gi)._priv).fromRed(),this.getPublicKey()};ks.prototype.computeSecret=function(n){n=(new Rq(n)).toRed((this||gi)._prime).redPow((this||gi)._priv).fromRed();n=new Tt(n.toArray());var b=this.getPrime();n.length<b.length&&(b=new Tt(b.length-n.length),b.fill(0),n=Tt.concat([b,
n]));return n};ks.prototype.getPublicKey=function(n){return hI((this||gi)._pub,n)};ks.prototype.getPrivateKey=function(n){return hI((this||gi)._priv,n)};ks.prototype.getPrime=function(n){return hI((this||gi).__prime,n)};ks.prototype.getGenerator=function(n){return hI((this||gi)._gen,n)};ks.prototype.setGenerator=function(n,b){return b=b||"utf8",Tt.isBuffer(n)||(n=new Tt(n,b)),(this||gi).__gen=n,(this||gi)._gen=new Rq(n),this||gi};var I4,J4,K4,Zx=eh.Buffer,L4={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},
modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},
modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},
modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},
modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},
modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},
modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},
Ija={binary:!0,hex:!0,base64:!0};var Jja=I4=J4=function(n){var b=new Zx(L4[n].prime,"hex");n=new Zx(L4[n].gen,"hex");return new ks(b,n)};var Kja=K4=function f(b,e,l,a){return Zx.isBuffer(e)||void 0===Ija[e]?f(b,"binary",e,l):(e=e||"binary",a=a||"binary",l=l||new Zx([2]),Zx.isBuffer(l)||(l=new Zx(l,a)),"number"==typeof b?new ks(UD(b,l),l,!0):(Zx.isBuffer(b)||(b=new Zx(b,e)),new ks(b,l,!0)))};var waa=eh.Buffer,ux=Uk,yY=Wx;iI.getr=xY;var $x={toArray:function(b,e){if(Array.isArray(b))return b.slice();
if(!b)return[];var l=[];if("string"!=typeof b){for(e=0;e<b.length;e++)l[e]=0|b[e];return l}if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),e=0;e<b.length;e+=2)l.push(parseInt(b[e]+b[e+1],16));else for(e=0;e<b.length;e++){var a=b.charCodeAt(e),f=a>>8;a&=255;f?l.push(f,a):l.push(a)}return l}};$x.zero2=zY;$x.toHex=AY;$x.encode=function(b,e){return"hex"===e?AY(b):b};var Ah={},Lja=Uk;Ah.assert=Xq;Ah.toArray=$x.toArray;Ah.zero2=$x.zero2;Ah.toHex=$x.toHex;Ah.encode=$x.encode;Ah.getNAF=
function(b,e,l){l=Array(Math.max(b.bitLength(),l)+1);l.fill(0);e=1<<e+1;b=b.clone();for(var a=0;a<l.length;a++){var f,m=b.andln(e-1);b.isOdd()?(f=m>(e>>1)-1?(e>>1)-m:m,b.isubn(f)):f=0;l[a]=f;b.iushrn(1)}return l};Ah.getJSF=function(b,e){var l=[[],[]];b=b.clone();e=e.clone();for(var a=0,f=0;0<b.cmpn(-a)||0<e.cmpn(-f);){var m;var q=b.andln(3)+a&3;var r=e.andln(3)+f&3;var u=(3===q&&(q=-1),3===r&&(r=-1),0==(1&q))?0:3!==(m=b.andln(7)+a&7)&&5!==m||2!==r?q:-q;q=(l[0].push(u),0==(1&r))?0:3!==(m=e.andln(7)+
f&7)&&5!==m||2!==q?r:-r;l[1].push(q);2*a===u+1&&(a=1-a);2*f===q+1&&(f=1-f);b.iushrn(1);e.iushrn(1)}return l};Ah.cachedProperty=function(b,e,l){var a="_"+e;b.prototype[e]=function(){return void 0!==this[a]?this[a]:this[a]=l.call(this)}};Ah.parseBytes=function(b){return"string"==typeof b?Ah.toArray(b,"hex"):b};Ah.intFromLE=function(b){return new Lja(b,"hex","le")};var jI=Uk,xaa=Ah.assert;pz.prototype._importDER=function(b,e){b=Ah.toArray(b,e);var l=new yaa;if(48!==b[l.place++]||bO(b,l)+l.place!==b.length||
2!==b[l.place++])return!1;var a=bO(b,l);e=b.slice(l.place,a+l.place);if(l.place+=a,2!==b[l.place++])return!1;a=bO(b,l);if(b.length!==a+l.place)return!1;b=b.slice(l.place,a+l.place);return 0===e[0]&&128&e[1]&&(e=e.slice(1)),0===b[0]&&128&b[1]&&(b=b.slice(1)),this.r=new jI(e),this.s=new jI(b),this.recoveryParam=null,!0};pz.prototype.toDER=function(b){var e=this.r.toArray(),l=this.s.toArray();128&e[0]&&(e=[0].concat(e));128&l[0]&&(l=[0].concat(l));e=BY(e);for(l=BY(l);!(l[0]||128&l[1]);)l=l.slice(1);
var a=[2];cO(a,e.length);(a=a.concat(e)).push(2);cO(a,l.length);e=a.concat(l);l=[48];return cO(l,e.length),l=l.concat(e),Ah.encode(l,b)};var df={},Mja=Xq;df.inherits=oh;df.toArray=function(b,e){if(Array.isArray(b))return b.slice();if(!b)return[];var l=[];if("string"==typeof b)if(e){if("hex"===e)for(0!=(b=b.replace(/[^a-z0-9]+/gi,"")).length%2&&(b="0"+b),a=0;a<b.length;a+=2)l.push(parseInt(b[a]+b[a+1],16))}else for(var a=e=0;a<b.length;a++){var f=b.charCodeAt(a);if(128>f)l[e++]=f;else if(2048>f)l[e++]=
f>>6|192,l[e++]=63&f|128;else{var m=b,q=a;55296!=(64512&m.charCodeAt(q))||0>q||q+1>=m.length||56320!=(64512&m.charCodeAt(q+1))?(l[e++]=f>>12|224,l[e++]=f>>6&63|128,l[e++]=63&f|128):(f=65536+((1023&f)<<10)+(1023&b.charCodeAt(++a)),l[e++]=f>>18|240,l[e++]=f>>12&63|128,l[e++]=f>>6&63|128,l[e++]=63&f|128)}}else for(a=0;a<b.length;a++)l[a]=0|b[a];return l};df.toHex=function(b){for(var e="",l=0;l<b.length;l++)e+=DY(b[l].toString(16));return e};df.htonl=CY;df.toHex32=function(b,e){for(var l="",a=0;a<b.length;a++){var f=
b[a];"little"===e&&(f=CY(f));l+=EY(f.toString(16))}return l};df.zero2=DY;df.zero8=EY;df.join32=function(b,e,l,a){l-=e;Mja(0==l%4);l=Array(l/4);for(var f=0;f<l.length;f++,e+=4)l[f]=("big"===a?b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3]:b[e+3]<<24|b[e+2]<<16|b[e+1]<<8|b[e])>>>0;return l};df.split32=function(b,e){for(var l=Array(4*b.length),a=0,f=0;a<b.length;a++,f+=4){var m=b[a];"big"===e?(l[f]=m>>>24,l[f+1]=m>>>16&255,l[f+2]=m>>>8&255,l[f+3]=255&m):(l[f+3]=m>>>24,l[f+2]=m>>>16&255,l[f+1]=m>>>8&255,l[f]=255&
m)}return l};df.rotr32=function(b,e){return b>>>e|b<<32-e};df.rotl32=function(b,e){return b<<e|b>>>32-e};df.sum32=function(b,e){return b+e>>>0};df.sum32_3=function(b,e,l){return b+e+l>>>0};df.sum32_4=function(b,e,l,a){return b+e+l+a>>>0};df.sum32_5=function(b,e,l,a,f){return b+e+l+a+f>>>0};df.sum64=function(b,e,l,a){var f=a+b[e+1]>>>0;b[e]=(f<a?1:0)+l+b[e]>>>0;b[e+1]=f};df.sum64_hi=function(b,e,l,a){return(e+a>>>0<e?1:0)+b+l>>>0};df.sum64_lo=function(b,e,l,a){return e+a>>>0};df.sum64_4_hi=function(b,
e,l,a,f,m,q,r){var u=0,v=e;return u+=(v=v+a>>>0)<e?1:0,u+=(v=v+m>>>0)<m?1:0,b+l+f+q+(u+(v+r>>>0<r?1:0))>>>0};df.sum64_4_lo=function(b,e,l,a,f,m,q,r){return e+a+m+r>>>0};df.sum64_5_hi=function(b,e,l,a,f,m,q,r,u,v){var y=0,z=e;return y+=(z=z+a>>>0)<e?1:0,y+=(z=z+m>>>0)<m?1:0,y+=(z=z+r>>>0)<r?1:0,b+l+f+q+u+(y+(z+v>>>0<v?1:0))>>>0};df.sum64_5_lo=function(b,e,l,a,f,m,q,r,u,v){return e+a+m+r+v>>>0};df.rotr64_hi=function(b,e,l){return(e<<32-l|b>>>l)>>>0};df.rotr64_lo=function(b,e,l){return(b<<32-l|e>>>l)>>>
0};df.shr64_hi=function(b,e,l){return b>>>l};df.shr64_lo=function(b,e,l){return(b<<32-l|e>>>l)>>>0};var uC={},Nja=Xq;uC.BlockHash=kI;kI.prototype.update=function(b,e){if(b=df.toArray(b,e),this.pending?this.pending=this.pending.concat(b):this.pending=b,this.pendingTotal+=b.length,this.pending.length>=this._delta8)for(e=(b=this.pending).length%this._delta8,this.pending=b.slice(b.length-e,b.length),0===this.pending.length&&(this.pending=null),b=df.join32(b,0,b.length-e,this.endian),e=0;e<b.length;e+=
this._delta32)this._update(b,e,e+this._delta32);return this};kI.prototype.digest=function(b){return this.update(this._pad()),Nja(null===this.pending),this._digest(b)};kI.prototype._pad=function(){var b=this.pendingTotal,e=this._delta8,l=e-(b+this.padLength)%e;e=Array(l+this.padLength);e[0]=128;for(var a=1;a<l;a++)e[a]=0;if(b<<=3,"big"===this.endian){for(l=8;l<this.padLength;l++)e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=0;e[a++]=b>>>24&255;e[a++]=b>>>16&255;e[a++]=b>>>8&255;e[a++]=255&b}else for(e[a++]=
255&b,e[a++]=b>>>8&255,e[a++]=b>>>16&255,e[a++]=b>>>24&255,e[a++]=0,e[a++]=0,e[a++]=0,e[a++]=0,l=8;l<this.padLength;l++)e[a++]=0;return e};var Oja=Xq,vu=df.rotr64_hi,wu=df.rotr64_lo,M4=df.shr64_hi,N4=df.shr64_lo,ay=df.sum64,eS=df.sum64_hi,fS=df.sum64_lo,Pja=df.sum64_4_hi,Qja=df.sum64_4_lo,Rja=df.sum64_5_hi,Sja=df.sum64_5_lo,FY=uC.BlockHash,zaa=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,
3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,
338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,
2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,
1607167915,987167468,1816402316,1246189591];df.inherits(Sq,FY);Sq.blockSize=1024;Sq.outSize=512;Sq.hmacStrength=192;Sq.padLength=128;Sq.prototype._prepareBlock=function(b,e){for(var l=this.W,a=0;32>a;a++)l[a]=b[e+a];for(;a<l.length;a+=2){b=l[a-4];e=l[a-3];e=vu(b,e,19)^vu(e,b,29)^M4(b,e,6);b=(0>e&&(e+=4294967296),e);e=l[a-4];var f=l[a-3];f=wu(e,f,19)^wu(f,e,29)^N4(e,f,6);e=(0>f&&(f+=4294967296),f);f=l[a-14];var m=l[a-13];var q=l[a-30];var r=l[a-29];r=vu(q,r,1)^vu(q,r,8)^M4(q,r,7);q=(0>r&&(r+=4294967296),
r);r=l[a-30];var u=l[a-29];u=wu(r,u,1)^wu(r,u,8)^N4(r,u,7);r=(0>u&&(u+=4294967296),u);u=l[a-32];var v=l[a-31];l[a]=Pja(b,e,f,m,q,r,u,v);l[a+1]=Qja(b,e,f,m,q,r,u,v)}};Sq.prototype._update=function(b,e){this._prepareBlock(b,e);b=this.W;e=this.h[0];var l=this.h[1],a=this.h[2],f=this.h[3],m=this.h[4],q=this.h[5],r=this.h[6],u=this.h[7],v=this.h[8],y=this.h[9],z=this.h[10],B=this.h[11],C=this.h[12],G=this.h[13],F=this.h[14],N=this.h[15];Oja(this.k.length===b.length);for(var L=0;L<b.length;L+=2){var S=
v;var ha=y;S=vu(S,ha,14)^vu(S,ha,18)^vu(ha,S,9);ha=(0>S&&(S+=4294967296),S);S=v;var qa=y;S=wu(S,qa,14)^wu(S,qa,18)^wu(qa,S,9);var D=(0>S&&(S+=4294967296),S);S=v&z^~v&C;qa=(0>S&&(S+=4294967296),S);S=y&B^~y&G;var P=(0>S&&(S+=4294967296),S);var J=this.k[L],M=this.k[L+1],X=b[L],T=b[L+1];S=Rja(F,N,ha,D,qa,P,J,M,X,T);qa=Sja(F,N,ha,D,qa,P,J,M,X,T);F=e;N=l;N=vu(F,N,28)^vu(N,F,2)^vu(N,F,7);F=(0>N&&(N+=4294967296),N);N=e;ha=l;ha=wu(N,ha,28)^wu(ha,N,2)^wu(ha,N,7);N=(0>ha&&(ha+=4294967296),ha);D=e&a^e&m^a&m;
ha=(0>D&&(D+=4294967296),D);P=l&f^l&q^f&q;D=(0>P&&(P+=4294967296),P);P=eS(F,N,ha,D);ha=fS(F,N,ha,D);F=C;N=G;C=z;G=B;z=v;B=y;v=eS(r,u,S,qa);y=fS(u,u,S,qa);r=m;u=q;m=a;q=f;a=e;f=l;e=eS(S,qa,P,ha);l=fS(S,qa,P,ha)}ay(this.h,0,e,l);ay(this.h,2,a,f);ay(this.h,4,m,q);ay(this.h,6,r,u);ay(this.h,8,v,y);ay(this.h,10,z,B);ay(this.h,12,C,G);ay(this.h,14,F,N)};Sq.prototype._digest=function(b){return"hex"===b?df.toHex32(this.h,"big"):df.split32(this.h,"big")};var xu=df.rotr32,Tja=Xq,Gs=df.sum32,Uja=df.sum32_4,
Vja=df.sum32_5,GY=uC.BlockHash,Aaa=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,
3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];df.inherits(ls,GY);ls.blockSize=512;ls.outSize=256;ls.hmacStrength=192;ls.padLength=64;ls.prototype._update=function(b,e){for(var l=this.W,a=0;16>a;a++)l[a]=b[e+a];for(;a<l.length;a++){b=a;e=l[a-2];e=xu(e,17)^xu(e,19)^e>>>10;var f=l[a-7];var m=l[a-15];m=xu(m,7)^xu(m,18)^m>>>3;l[b]=Uja(e,
f,m,l[a-16])}b=this.h[0];e=this.h[1];f=this.h[2];m=this.h[3];var q=this.h[4],r=this.h[5],u=this.h[6],v=this.h[7];Tja(this.k.length===l.length);for(a=0;a<l.length;a++){var y=v;v=q;v=xu(v,6)^xu(v,11)^xu(v,25);y=Vja(y,v,q&r^~q&u,this.k[a],l[a]);v=b;v=xu(v,2)^xu(v,13)^xu(v,22);var z=Gs(v,b&e^b&f^e&f);v=u;u=r;r=q;q=Gs(m,y);m=f;f=e;e=b;b=Gs(y,z)}this.h[0]=Gs(this.h[0],b);this.h[1]=Gs(this.h[1],e);this.h[2]=Gs(this.h[2],f);this.h[3]=Gs(this.h[3],m);this.h[4]=Gs(this.h[4],q);this.h[5]=Gs(this.h[5],r);this.h[6]=
Gs(this.h[6],u);this.h[7]=Gs(this.h[7],v)};ls.prototype._digest=function(b){return"hex"===b?df.toHex32(this.h,"big"):df.split32(this.h,"big")};var gS=df.rotl32,AF=df.sum32,Wja=df.sum32_5,HY=uC.BlockHash,Xja=[1518500249,1859775393,2400959708,3395469782];df.inherits(Ut,HY);Ut.blockSize=512;Ut.outSize=160;Ut.hmacStrength=80;Ut.padLength=64;Ut.prototype._update=function(b,e){for(var l=this.W,a=0;16>a;a++)l[a]=b[e+a];for(;a<l.length;a++)l[a]=gS(l[a-3]^l[a-8]^l[a-14]^l[a-16],1);b=this.h[0];e=this.h[1];
var f=this.h[2],m=this.h[3],q=this.h[4];for(a=0;a<l.length;a++){var r=~~(a/20);r=Wja(gS(b,5),0===r?e&f^~e&m:1===r||3===r?e^f^m:2===r?e&f^e&m^f&m:void 0,q,l[a],Xja[r]);q=m;m=f;f=gS(e,30);e=b;b=r}this.h[0]=AF(this.h[0],b);this.h[1]=AF(this.h[1],e);this.h[2]=AF(this.h[2],f);this.h[3]=AF(this.h[3],m);this.h[4]=AF(this.h[4],q)};Ut.prototype._digest=function(b){return"hex"===b?df.toHex32(this.h,"big"):df.split32(this.h,"big")};var IY=ls;df.inherits(Lv,IY);Lv.blockSize=512;Lv.outSize=224;Lv.hmacStrength=
192;Lv.padLength=64;Lv.prototype._digest=function(b){return"hex"===b?df.toHex32(this.h.slice(0,7),"big"):df.split32(this.h.slice(0,7),"big")};var JY=Sq;df.inherits(Mv,JY);Mv.blockSize=1024;Mv.outSize=384;Mv.hmacStrength=192;Mv.padLength=128;Mv.prototype._digest=function(b){return"hex"===b?df.toHex32(this.h.slice(0,12),"big"):df.split32(this.h.slice(0,12),"big")};var vC={};vC.sha1=Ut;vC.sha224=Lv;vC.sha256=ls;vC.sha384=Mv;vC.sha512=Sq;var O4={},ZK=df.rotl32,P4=df.sum32,BF=df.sum32_3,Q4=df.sum32_4,
KY=uC.BlockHash;df.inherits(Vt,KY);O4.ripemd160=Vt;Vt.blockSize=512;Vt.outSize=160;Vt.hmacStrength=192;Vt.padLength=64;Vt.prototype._update=function(b,e){for(var l=this.h[0],a=this.h[1],f=this.h[2],m=this.h[3],q=this.h[4],r=l,u=a,v=f,y=m,z=q,B=0;80>B;B++){var C=P4(ZK(Q4(l,LY(B,a,f,m),b[Yja[B]+e],15>=B?0:31>=B?1518500249:47>=B?1859775393:63>=B?2400959708:2840853838),Zja[B]),q);l=q;q=m;m=ZK(f,10);f=a;a=C;C=P4(ZK(Q4(r,LY(79-B,u,v,y),b[$ja[B]+e],15>=B?1352829926:31>=B?1548603684:47>=B?1836072691:63>=
B?2053994217:0),aka[B]),z);r=z;z=y;y=ZK(v,10);v=u;u=C}C=BF(this.h[1],f,y);this.h[1]=BF(this.h[2],m,z);this.h[2]=BF(this.h[3],q,r);this.h[3]=BF(this.h[4],l,u);this.h[4]=BF(this.h[0],a,v);this.h[0]=C};Vt.prototype._digest=function(b){return"hex"===b?df.toHex32(this.h,"little"):df.split32(this.h,"little")};var Yja=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,
13],$ja=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Zja=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],aka=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,
8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Baa=df,bka=Xq;wB.prototype._init=function(b){b.length>this.blockSize&&(b=(new this.Hash).update(b).digest());bka(b.length<=this.blockSize);for(var e=b.length;e<this.blockSize;e++)b.push(0);for(e=0;e<b.length;e++)b[e]^=54;this.inner=(new this.Hash).update(b);for(e=0;e<b.length;e++)b[e]^=106;this.outer=(new this.Hash).update(b)};wB.prototype.update=function(b,e){return this.inner.update(b,
e),this};wB.prototype.digest=function(b){return this.outer.update(this.inner.digest()),this.outer.digest(b)};var Fj={};Fj.utils=df;Fj.common=uC;Fj.sha=vC;Fj.ripemd=O4;Fj.hmac=wB;Fj.sha1=Fj.sha.sha1;Fj.sha256=Fj.sha.sha256;Fj.sha224=Fj.sha.sha224;Fj.sha384=Fj.sha.sha384;Fj.sha512=Fj.sha.sha512;Fj.ripemd160=Fj.ripemd.ripemd160;var qz=$x,MY=Xq;Nv.prototype._init=function(b,e,l){b=b.concat(e).concat(l);this.K=Array(this.outLen/8);this.V=Array(this.outLen/8);for(e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=
1;this._update(b);this._reseed=1;this.reseedInterval=281474976710656};Nv.prototype._hmac=function(){return new Fj.hmac(this.hash,this.K)};Nv.prototype._update=function(b){var e=this._hmac().update(this.V).update([0]);b&&(e=e.update(b));this.K=e.digest();this.V=this._hmac().update(this.V).digest();b&&(this.K=this._hmac().update(this.V).update([1]).update(b).digest(),this.V=this._hmac().update(this.V).digest())};Nv.prototype.reseed=function(b,e,l,a){"string"!=typeof e&&(a=l,l=e,e=null);b=qz.toArray(b,
e);l=qz.toArray(l,a);MY(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(b.concat(l||[]));this._reseed=1};Nv.prototype.generate=function(b,e,l,a){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof e&&(a=l,l=e,e=null);l&&(l=qz.toArray(l,a||"hex"),this._update(l));for(a=[];a.length<b;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);b=a.slice(0,b);return this._update(l),this._reseed++,qz.encode(b,e)};
var rz=Uk,$K=Ah.getNAF,cka=Ah.getJSF,aL=Ah.assert;ms.prototype.point=function(){throw Error("Not implemented");};ms.prototype.validate=function(){throw Error("Not implemented");};ms.prototype._fixedNafMul=function(b,e){aL(b.precomputed);b=b._getDoubles();var l=$K(e,1,this._bitLength),a=(1<<b.step+1)-(0==b.step%2?2:1);a/=3;for(var f=[],m=0;m<l.length;m+=b.step){var q=0;for(e=m+b.step-1;e>=m;e--)q=(q<<1)+l[e];f.push(q)}e=this.jpoint(null,null,null);for(l=this.jpoint(null,null,null);0<a;a--){for(m=0;m<
f.length;m++)(q=f[m])===a?l=l.mixedAdd(b.points[m]):q===-a&&(l=l.mixedAdd(b.points[m].neg()));e=e.add(l)}return e.toP()};ms.prototype._wnafMul=function(b,e){var l=b._getNAFPoints(4),a=l.points;l=$K(e,l.wnd,this._bitLength);for(var f=this.jpoint(null,null,null),m=l.length-1;0<=m;m--){for(e=0;0<=m&&0===l[m];m--)e++;if(0<=m&&e++,f=f.dblp(e),0>m)break;e=l[m];aL(0!==e);f="affine"===b.type?0<e?f.mixedAdd(a[e-1>>1]):f.mixedAdd(a[-e-1>>1].neg()):0<e?f.add(a[e-1>>1]):f.add(a[-e-1>>1].neg())}return"affine"===
b.type?f.toP():f};ms.prototype._wnafMulAdd=function(b,e,l,a,f){for(var m=this._wnafT1,q=this._wnafT2,r=this._wnafT3,u=0,v=0;v<a;v++){var y=(F=e[v])._getNAFPoints(b);m[v]=y.wnd;q[v]=y.points}for(v=a-1;1<=v;v-=2){y=v-1;var z=v;if(1===m[y]&&1===m[z]){var B=[e[y],null,null,e[z]];0===e[y].y.cmp(e[z].y)?(B[1]=e[y].add(e[z]),B[2]=e[y].toJ().mixedAdd(e[z].neg())):0===e[y].y.cmp(e[z].y.redNeg())?(B[1]=e[y].toJ().mixedAdd(e[z]),B[2]=e[y].add(e[z].neg())):(B[1]=e[y].toJ().mixedAdd(e[z]),B[2]=e[y].toJ().mixedAdd(e[z].neg()));
var C=[-3,-1,-5,-7,0,7,5,1,3],G=cka(l[y],l[z]);u=Math.max(G[0].length,u);r[y]=Array(u);r[z]=Array(u);for(b=0;b<u;b++)r[y][b]=C[3*((0|G[0][b])+1)+((0|G[1][b])+1)],r[z][b]=0,q[y]=B}else r[y]=$K(l[y],m[y],this._bitLength),r[z]=$K(l[z],m[z],this._bitLength),u=Math.max(r[y].length,u),u=Math.max(r[z].length,u)}e=this.jpoint(null,null,null);l=this._wnafT4;for(v=u;0<=v;v--){for(u=0;0<=v;){m=!0;for(b=0;b<a;b++)l[b]=0|r[b][v],0!==l[b]&&(m=!1);if(!m)break;u++;v--}if(0<=v&&u++,e=e.dblp(u),0>v)break;for(b=0;b<
a;b++){var F;u=l[b];0!==u&&(0<u?F=q[b][u-1>>1]:0>u&&(F=q[b][-u-1>>1].neg()),e="affine"===F.type?e.mixedAdd(F):e.add(F))}}for(v=0;v<a;v++)q[v]=null;return f?e:e.toP()};ms.BasePoint=Tq;Tq.prototype.eq=function(){throw Error("Not implemented");};Tq.prototype.validate=function(){return this.curve.validate(this)};ms.prototype.decodePoint=function(b,e){b=Ah.toArray(b,e);e=this.p.byteLength();if((4===b[0]||6===b[0]||7===b[0])&&b.length-1==2*e)return 6===b[0]?aL(0==b[b.length-1]%2):7===b[0]&&aL(1==b[b.length-
1]%2),this.point(b.slice(1,1+e),b.slice(1+e,1+2*e));if((2===b[0]||3===b[0])&&b.length-1===e)return this.pointFromX(b.slice(1,1+e),3===b[0]);throw Error("Unknown point format");};Tq.prototype.encodeCompressed=function(b){return this.encode(b,!0)};Tq.prototype._encode=function(b){var e=this.curve.p.byteLength(),l=this.getX().toArray("be",e);return b?[this.getY().isEven()?2:3].concat(l):[4].concat(l,this.getY().toArray("be",e))};Tq.prototype.encode=function(b,e){return Ah.encode(this._encode(e),b)};
Tq.prototype.precompute=function(b){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,b),e.beta=this._getBeta(),this.precomputed=e,this};Tq.prototype._hasDoubles=function(b){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((b.bitLength()+1)/e.step)};Tq.prototype._getDoubles=function(b,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;
for(var l=[this],a=this,f=0;f<e;f+=b){for(var m=0;m<b;m++)a=a.dbl();l.push(a)}return{step:b,points:l}};Tq.prototype._getNAFPoints=function(b){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],l=(1<<b)-1,a=1===l?null:this.dbl(),f=1;f<l;f++)e[f]=e[f-1].add(a);return{wnd:b,points:e}};Tq.prototype._getBeta=function(){return null};Tq.prototype.dblp=function(b){for(var e=this,l=0;l<b;l++)e=e.dbl();return e};var qk=Uk,hS=oh,xB=ms,dka=Ah.assert;hS(Uq,xB);Uq.prototype._getEndomorphism=
function(b){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(b.beta)var e=(new qk(b.beta,16)).toRed(this.red);else e=this._getEndoRoots(this.p),e=(e=0>e[0].cmp(e[1])?e[0]:e[1]).toRed(this.red);if(b.lambda)var l=new qk(b.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(e))?l=a[0]:(l=a[1],dka(0===this.g.mul(l).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:l,basis:b.basis?b.basis.map(function(f){return{a:new qk(f.a,16),b:new qk(f.b,16)}}):this._getEndoBasis(l)}}};
Uq.prototype._getEndoRoots=function(b){var e=b===this.p?this.red:qk.mont(b),l=(new qk(2)).toRed(e).redInvm();b=l.redNeg();e=(new qk(3)).toRed(e).redNeg().redSqrt().redMul(l);return[b.redAdd(e).fromRed(),b.redSub(e).fromRed()]};Uq.prototype._getEndoBasis=function(b){for(var e,l,a,f,m,q,r,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),v=this.n.clone(),y=new qk(1),z=new qk(0),B=new qk(0),C=new qk(1),G=0;0!==b.cmpn(0);){var F=v.div(b);r=v.sub(F.mul(b));q=B.sub(F.mul(y));F=C.sub(F.mul(z));if(!a&&0>r.cmp(u))e=
m.neg(),l=y,a=r.neg(),f=q;else if(a&&2==++G)break;m=r;v=b;b=r;B=y;y=q;C=z;z=F}m=r.neg();r=a.sqr().add(f.sqr());return 0<=m.sqr().add(q.sqr()).cmp(r)&&(m=e,q=l),a.negative&&(a=a.neg(),f=f.neg()),m.negative&&(m=m.neg(),q=q.neg()),[{a:a,b:f},{a:m,b:q}]};Uq.prototype._endoSplit=function(b){var e=this.endo.basis,l=e[0],a=e[1],f=a.b.mul(b).divRound(this.n),m=l.b.neg().mul(b).divRound(this.n);e=f.mul(l.a);var q=m.mul(a.a);l=f.mul(l.b);a=m.mul(a.b);return{k1:b.sub(e).sub(q),k2:l.add(a).neg()}};Uq.prototype.pointFromX=
function(b,e){(b=new qk(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),a=l.redSqrt();if(0!==a.redSqr().redSub(l).cmp(this.zero))throw Error("invalid point");l=a.fromRed().isOdd();return(e&&!l||!e&&l)&&(a=a.redNeg()),this.point(b,a)};Uq.prototype.validate=function(b){if(b.inf)return!0;var e=b.x;b=b.y;var l=this.a.redMul(e);e=e.redSqr().redMul(e).redIAdd(l).redIAdd(this.b);return 0===b.redSqr().redISub(e).cmpn(0)};Uq.prototype._endoWnafMulAdd=
function(b,e,l){for(var a=this._endoWnafT1,f=this._endoWnafT2,m=0;m<b.length;m++){var q=this._endoSplit(e[m]),r=b[m],u=r._getBeta();q.k1.negative&&(q.k1.ineg(),r=r.neg(!0));q.k2.negative&&(q.k2.ineg(),u=u.neg(!0));a[2*m]=r;a[2*m+1]=u;f[2*m]=q.k1;f[2*m+1]=q.k2}b=this._wnafMulAdd(1,a,f,2*m,l);for(e=0;e<2*m;e++)a[e]=null,f[e]=null;return b};hS(fm,xB.BasePoint);Uq.prototype.point=function(b,e,l){return new fm(this,b,e,l)};Uq.prototype.pointFromJSON=function(b,e){return fm.fromJSON(this,b,e)};fm.prototype._getBeta=
function(){if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var l=this.curve,a=function(f){return l.point(f.x.redMul(l.endo.beta),f.y)};b.beta=e;e.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return e}};fm.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&
{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};fm.fromJSON=function(b,e,l){function a(m){return b.point(m[0],m[1],l)}"string"==typeof e&&(e=JSON.parse(e));var f=b.point(e[0],e[1],l);if(!e[2])return f;e=e[2];return f.precomputed={beta:null,doubles:e.doubles&&{step:e.doubles.step,points:[f].concat(e.doubles.points.map(a))},naf:e.naf&&{wnd:e.naf.wnd,
points:[f].concat(e.naf.points.map(a))}},f};fm.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};fm.prototype.isInfinity=function(){return this.inf};fm.prototype.add=function(b){if(this.inf)return b;if(b.inf)return this;if(this.eq(b))return this.dbl();if(this.neg().eq(b)||0===this.x.cmp(b.x))return this.curve.point(null,null);var e=this.y.redSub(b.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(b.x).redInvm()));
b=e.redSqr().redISub(this.x).redISub(b.x);e=e.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,e)};fm.prototype.dbl=function(){if(this.inf)return this;var b=this.y.redAdd(this.y);if(0===b.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,l=this.x.redSqr();b=b.redInvm();l=l.redAdd(l).redIAdd(l).redIAdd(e).redMul(b);e=l.redSqr().redISub(this.x.redAdd(this.x));l=l.redMul(this.x.redSub(e)).redISub(this.y);return this.curve.point(e,l)};fm.prototype.getX=function(){return this.x.fromRed()};
fm.prototype.getY=function(){return this.y.fromRed()};fm.prototype.mul=function(b){return b=new qk(b,16),this.isInfinity()?this:this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve.endo?this.curve._endoWnafMulAdd([this],[b]):this.curve._wnafMul(this,b)};fm.prototype.mulAdd=function(b,e,l){e=[this,e];b=[b,l];return this.curve.endo?this.curve._endoWnafMulAdd(e,b):this.curve._wnafMulAdd(1,e,b,2)};fm.prototype.jmulAdd=function(b,e,l){e=[this,e];b=[b,l];return this.curve.endo?this.curve._endoWnafMulAdd(e,
b,!0):this.curve._wnafMulAdd(1,e,b,2,!0)};fm.prototype.eq=function(b){return this===b||this.inf===b.inf&&(this.inf||0===this.x.cmp(b.x)&&0===this.y.cmp(b.y))};fm.prototype.neg=function(b){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(b&&this.precomputed){b=this.precomputed;var l=function(a){return a.neg()};e.precomputed={naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(l)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(l)}}}return e};fm.prototype.toJ=
function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)};hS(Nm,xB.BasePoint);Uq.prototype.jpoint=function(b,e,l){return new Nm(this,b,e,l)};Nm.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var b=this.z.redInvm(),e=b.redSqr(),l=this.x.redMul(e);b=this.y.redMul(e).redMul(b);return this.curve.point(l,b)};Nm.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Nm.prototype.add=function(b){if(this.isInfinity())return b;
if(b.isInfinity())return this;var e=b.z.redSqr(),l=this.z.redSqr(),a=this.x.redMul(e),f=b.x.redMul(l);e=this.y.redMul(e.redMul(b.z));l=b.y.redMul(l.redMul(this.z));f=a.redSub(f);l=e.redSub(l);if(0===f.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var m=f.redSqr(),q=m.redMul(f);m=a.redMul(m);a=l.redSqr().redIAdd(q).redISub(m).redISub(m);e=l.redMul(m.redISub(a)).redISub(e.redMul(q));b=this.z.redMul(b.z).redMul(f);return this.curve.jpoint(a,e,b)};Nm.prototype.mixedAdd=function(b){if(this.isInfinity())return b.toJ();
if(b.isInfinity())return this;var e=this.z.redSqr(),l=this.x,a=b.x.redMul(e),f=this.y;b=b.y.redMul(e).redMul(this.z);a=l.redSub(a);b=f.redSub(b);if(0===a.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var m=a.redSqr();e=m.redMul(a);m=l.redMul(m);l=b.redSqr().redIAdd(e).redISub(m).redISub(m);f=b.redMul(m.redISub(l)).redISub(f.redMul(e));a=this.z.redMul(a);return this.curve.jpoint(l,f,a)};Nm.prototype.dblp=function(b){if(0===b||this.isInfinity())return this;if(!b)return this.dbl();
if(this.curve.zeroA||this.curve.threeA){for(var e=this,l=0;l<b;l++)e=e.dbl();return e}e=this.curve.a;var a=this.curve.tinv,f=this.x;l=this.y;var m=this.z,q=m.redSqr().redSqr(),r=l.redAdd(l);for(l=0;l<b;l++){var u=f.redSqr(),v=r.redSqr(),y=v.redSqr();u=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(q));v=f.redMul(v);f=u.redSqr().redISub(v.redAdd(v));v=v.redISub(f);u=u.redMul(v);u=u.redIAdd(u).redISub(y);m=r.redMul(m);l+1<b&&(q=q.redMul(y));r=u}return this.curve.jpoint(f,r.redMul(a),m)};Nm.prototype.dbl=function(){return this.isInfinity()?
this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Nm.prototype._zeroDbl=function(){if(this.zOne){var b=this.x.redSqr();var e=this.y.redSqr();var l=e.redSqr();e=this.x.redAdd(e).redSqr().redISub(b).redISub(l);e=e.redIAdd(e);b=b.redAdd(b).redIAdd(b);var a=b.redSqr().redISub(e).redISub(e),f=l.redIAdd(l);f=(f=f.redIAdd(f)).redIAdd(f);l=a;b=b.redMul(e.redISub(a)).redISub(f);e=this.y.redAdd(this.y)}else{a=this.x.redSqr();b=this.y.redSqr();l=b.redSqr();b=this.x.redAdd(b).redSqr().redISub(a).redISub(l);
b=b.redIAdd(b);a=a.redAdd(a).redIAdd(a);f=a.redSqr();var m=l.redIAdd(l);m=(m=m.redIAdd(m)).redIAdd(m);l=f.redISub(b).redISub(b);b=a.redMul(b.redISub(l)).redISub(m);e=(e=this.y.redMul(this.z)).redIAdd(e)}return this.curve.jpoint(l,b,e)};Nm.prototype._threeDbl=function(){var b;if(this.zOne){var e=this.x.redSqr();var l=this.y.redSqr();var a=l.redSqr();l=this.x.redAdd(l).redSqr().redISub(e).redISub(a);l=l.redIAdd(l);var f=e.redAdd(e).redIAdd(e).redIAdd(this.curve.a);e=b=f.redSqr().redISub(l).redISub(l);
a=a.redIAdd(a);a=(a=a.redIAdd(a)).redIAdd(a);a=f.redMul(l.redISub(b)).redISub(a);b=this.y.redAdd(this.y)}else b=this.z.redSqr(),l=this.y.redSqr(),e=this.x.redMul(l),a=this.x.redSub(b).redMul(this.x.redAdd(b)),a=a.redAdd(a).redIAdd(a),f=e.redIAdd(e),e=(f=f.redIAdd(f)).redAdd(f),e=a.redSqr().redISub(e),b=this.y.redAdd(this.z).redSqr().redISub(l).redISub(b),l=l.redSqr(),l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l),a=a.redMul(f.redISub(e)).redISub(l);return this.curve.jpoint(e,a,b)};Nm.prototype._dbl=
function(){var b=this.curve.a,e=this.x,l=this.y,a=this.z,f=a.redSqr().redSqr(),m=e.redSqr(),q=l.redSqr();b=m.redAdd(m).redIAdd(m).redIAdd(b.redMul(f));e=e.redAdd(e);f=e.redIAdd(e).redMul(q);e=b.redSqr().redISub(f.redAdd(f));f=f.redISub(e);q=q.redSqr();q=(q=(q=q.redIAdd(q)).redIAdd(q)).redIAdd(q);q=b.redMul(f).redISub(q);l=l.redAdd(l).redMul(a);return this.curve.jpoint(e,q,l)};Nm.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var b=this.x.redSqr(),e=this.y.redSqr(),l=this.z.redSqr(),
a=e.redSqr(),f=b.redAdd(b).redIAdd(b),m=f.redSqr();b=this.x.redAdd(e).redSqr().redISub(b).redISub(a);var q=(b=(b=(b=b.redIAdd(b)).redAdd(b).redIAdd(b)).redISub(m)).redSqr();a=a.redIAdd(a);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);f=f.redIAdd(b).redSqr().redISub(m).redISub(q).redISub(a);e=e.redMul(f);e=(e=e.redIAdd(e)).redIAdd(e);e=this.x.redMul(q).redISub(e);e=(e=e.redIAdd(e)).redIAdd(e);a=this.y.redMul(f.redMul(a.redISub(f)).redISub(b.redMul(q)));a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);l=
this.z.redAdd(b).redSqr().redISub(l).redISub(q);return this.curve.jpoint(e,a,l)};Nm.prototype.mul=function(b,e){return b=new qk(b,e),this.curve._wnafMul(this,b)};Nm.prototype.eq=function(b){if("affine"===b.type)return this.eq(b.toJ());if(this===b)return!0;var e=this.z.redSqr(),l=b.z.redSqr();if(0!==this.x.redMul(l).redISub(b.x.redMul(e)).cmpn(0))return!1;e=e.redMul(this.z);l=l.redMul(b.z);return 0===this.y.redMul(l).redISub(b.y.redMul(e)).cmpn(0)};Nm.prototype.eqXToP=function(b){var e=this.z.redSqr(),
l=b.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(l))return!0;b=b.clone();for(e=this.curve.redN.redMul(e);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(l.redIAdd(e),0===this.x.cmp(l))return!0}};Nm.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Nm.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var zB=Uk,R4=oh,lI=ms;R4(yB,lI);yB.prototype.validate=
function(b){b=b.normalize().x;var e=b.redSqr();b=e.redMul(b).redAdd(e.redMul(this.a)).redAdd(b);return 0===b.redSqrt().redSqr().cmp(b)};R4(gm,lI.BasePoint);yB.prototype.decodePoint=function(b,e){return this.point(Ah.toArray(b,e),1)};yB.prototype.point=function(b,e){return new gm(this,b,e)};yB.prototype.pointFromJSON=function(b){return gm.fromJSON(this,b)};gm.prototype.precompute=function(){};gm.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};gm.fromJSON=function(b,
e){return new gm(b,e[0],e[1]||b.one)};gm.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};gm.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};gm.prototype.dbl=function(){var b=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),l=b.redSub(e);b=b.redMul(e);e=l.redMul(e.redAdd(this.curve.a24.redMul(l)));return this.curve.point(b,e)};gm.prototype.add=function(){throw Error("Not supported on Montgomery curve");
};gm.prototype.diffAdd=function(b,e){var l=this.x.redAdd(this.z),a=this.x.redSub(this.z),f=b.x.redAdd(b.z);b=b.x.redSub(b.z).redMul(l);f=f.redMul(a);a=e.z.redMul(b.redAdd(f).redSqr());e=e.x.redMul(b.redISub(f).redSqr());return this.curve.point(a,e)};gm.prototype.mul=function(b){var e=b.clone();b=this;for(var l=this.curve.point(null,null),a=[];0!==e.cmpn(0);e.iushrn(1))a.push(e.andln(1));for(e=a.length-1;0<=e;e--)0===a[e]?(b=b.diffAdd(l,this),l=l.dbl()):(l=b.diffAdd(l,this),b=b.dbl());return l};gm.prototype.mulAdd=
function(){throw Error("Not supported on Montgomery curve");};gm.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve");};gm.prototype.eq=function(b){return 0===this.getX().cmp(b.getX())};gm.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};gm.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Ov=Uk,S4=oh,mI=ms,Caa=Ah.assert;S4(Wt,mI);Wt.prototype._mulA=function(b){return this.mOneA?b.redNeg():this.a.redMul(b)};
Wt.prototype._mulC=function(b){return this.oneC?b:this.c.redMul(b)};Wt.prototype.jpoint=function(b,e,l,a){return this.point(b,e,l,a)};Wt.prototype.pointFromX=function(b,e){(b=new Ov(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr(),a=this.c2.redSub(this.a.redMul(l));l=this.one.redSub(this.c2.redMul(this.d).redMul(l));l=a.redMul(l.redInvm());a=l.redSqrt();if(0!==a.redSqr().redSub(l).cmp(this.zero))throw Error("invalid point");l=a.fromRed().isOdd();return(e&&!l||!e&&l)&&(a=a.redNeg()),this.point(b,
a)};Wt.prototype.pointFromY=function(b,e){(b=new Ov(b,16)).red||(b=b.toRed(this.red));var l=b.redSqr(),a=l.redSub(this.c2);l=l.redMul(this.d).redMul(this.c2).redSub(this.a);a=a.redMul(l.redInvm());if(0===a.cmp(this.zero)){if(e)throw Error("invalid point");return this.point(this.zero,b)}l=a.redSqrt();if(0!==l.redSqr().redSub(a).cmp(this.zero))throw Error("invalid point");return l.fromRed().isOdd()!==e&&(l=l.redNeg()),this.point(l,b)};Wt.prototype.validate=function(b){if(b.isInfinity())return!0;b.normalize();
var e=b.x.redSqr(),l=b.y.redSqr();b=e.redMul(this.a).redAdd(l);e=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(l)));return 0===b.cmp(e)};S4(Kj,mI.BasePoint);Wt.prototype.pointFromJSON=function(b){return Kj.fromJSON(this,b)};Wt.prototype.point=function(b,e,l,a){return new Kj(this,b,e,l,a)};Kj.fromJSON=function(b,e){return new Kj(b,e[0],e[1],e[2])};Kj.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,
2)+" z: "+this.z.fromRed().toString(16,2)+">"};Kj.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))};Kj.prototype._extDbl=function(){var b=this.x.redSqr(),e=this.y.redSqr(),l=this.z.redSqr();l=l.redIAdd(l);var a=this.curve._mulA(b),f=this.x.redAdd(this.y).redSqr().redISub(b).redISub(e);b=a.redAdd(e);l=b.redSub(l);var m=a.redSub(e);e=f.redMul(l);a=b.redMul(m);f=f.redMul(m);b=l.redMul(b);return this.curve.point(e,a,b,f)};Kj.prototype._projDbl=
function(){var b=this.x.redAdd(this.y).redSqr();var e=this.x.redSqr();var l=this.y.redSqr();if(this.curve.twisted){var a=(m=this.curve._mulA(e)).redAdd(l);if(this.zOne)b=b.redSub(e).redSub(l).redMul(a.redSub(this.curve.two)),e=a.redMul(m.redSub(l)),a=a.redSqr().redSub(a).redSub(a);else{var f=this.z.redSqr();f=a.redSub(f).redISub(f);b=b.redSub(e).redISub(l).redMul(f);e=a.redMul(m.redSub(l));a=a.redMul(f)}}else{var m=e.redAdd(l);f=this.curve._mulC(this.z).redSqr();f=m.redSub(f).redSub(f);b=this.curve._mulC(b.redISub(m)).redMul(f);
e=this.curve._mulC(m).redMul(e.redISub(l));a=m.redMul(f)}return this.curve.point(b,e,a)};Kj.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Kj.prototype._extAdd=function(b){var e=this.y.redSub(this.x).redMul(b.y.redSub(b.x)),l=this.y.redAdd(this.x).redMul(b.y.redAdd(b.x)),a=this.t.redMul(this.curve.dd).redMul(b.t),f=this.z.redMul(b.z.redAdd(b.z)),m=l.redSub(e);b=f.redSub(a);a=f.redAdd(a);f=l.redAdd(e);e=m.redMul(b);l=a.redMul(f);m=m.redMul(f);
b=b.redMul(a);return this.curve.point(e,l,b,m)};Kj.prototype._projAdd=function(b){var e,l,a=this.z.redMul(b.z),f=a.redSqr(),m=this.x.redMul(b.x),q=this.y.redMul(b.y),r=this.curve.d.redMul(m).redMul(q),u=f.redSub(r);f=f.redAdd(r);b=this.x.redAdd(this.y).redMul(b.x.redAdd(b.y)).redISub(m).redISub(q);b=a.redMul(u).redMul(b);return this.curve.twisted?(e=a.redMul(f).redMul(q.redSub(this.curve._mulA(m))),l=u.redMul(f)):(e=a.redMul(f).redMul(q.redSub(m)),l=this.curve._mulC(u).redMul(f)),this.curve.point(b,
e,l)};Kj.prototype.add=function(b){return this.isInfinity()?b:b.isInfinity()?this:this.curve.extended?this._extAdd(b):this._projAdd(b)};Kj.prototype.mul=function(b){return this._hasDoubles(b)?this.curve._fixedNafMul(this,b):this.curve._wnafMul(this,b)};Kj.prototype.mulAdd=function(b,e,l){return this.curve._wnafMulAdd(1,[this,e],[b,l],2,!1)};Kj.prototype.jmulAdd=function(b,e,l){return this.curve._wnafMulAdd(1,[this,e],[b,l],2,!0)};Kj.prototype.normalize=function(){if(this.zOne)return this;var b=this.z.redInvm();
return this.x=this.x.redMul(b),this.y=this.y.redMul(b),this.t&&(this.t=this.t.redMul(b)),this.z=this.curve.one,this.zOne=!0,this};Kj.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Kj.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Kj.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Kj.prototype.eq=function(b){return this===b||0===this.getX().cmp(b.getX())&&0===this.getY().cmp(b.getY())};Kj.prototype.eqXToP=
function(b){var e=b.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;b=b.clone();for(var l=this.curve.redN.redMul(this.z);;){if(b.iadd(this.curve.n),0<=b.cmp(this.curve.p))return!1;if(e.redIAdd(l),0===this.x.cmp(e))return!0}};Kj.prototype.toP=Kj.prototype.normalize;Kj.prototype.mixedAdd=Kj.prototype.add;var wC={};wC.base=ms;wC.short=Uq;wC.mont=yB;wC.edwards=Wt;var eka={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],
["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],
["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],
["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],
["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],
["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],
["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],
["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],
["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],
["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],
["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],
["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],
["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],
["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],
["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],
["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],
["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},
naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],
["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],
["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],
["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],
["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],
["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],
["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],
["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],
["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],
["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],
["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],
["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],
["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],
["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],
["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],
["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],
["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],
["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],
["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],
["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],
["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],
["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],
["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],
["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],
["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],
["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],
["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],
["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],
["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],
["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],
["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],
["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}},bL={},eO=bL,dO=wC,OY=Ah.assert;eO.PresetCurve=NY;vx("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Fj.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});vx("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Fj.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});vx("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
hash:Fj.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});vx("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Fj.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});vx("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Fj.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
"00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});vx("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Fj.sha256,gRed:!1,g:["9"]});vx("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Fj.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{var T4=eka}catch(b){T4=void 0}vx("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
h:"1",hash:Fj.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",T4]});var fka=Uk,U4=Ah.assert;
hm.fromPublic=function(b,e,l){return e instanceof hm?e:new hm(b,{pub:e,pubEnc:l})};hm.fromPrivate=function(b,e,l){return e instanceof hm?e:new hm(b,{priv:e,privEnc:l})};hm.prototype.validate=function(){var b=this.getPublic();return b.isInfinity()?{result:!1,reason:"Invalid public key"}:b.validate()?b.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};hm.prototype.getPublic=function(b,e){return"string"==
typeof b&&(e=b,b=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,b):this.pub};hm.prototype.getPrivate=function(b){return"hex"===b?this.priv.toString(16,2):this.priv};hm.prototype._importPrivate=function(b,e){this.priv=new fka(b,e||16);this.priv=this.priv.umod(this.ec.curve.n)};hm.prototype._importPublic=function(b,e){if(b.x||b.y)return"mont"===this.ec.curve.type?U4(b.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||U4(b.x&&b.y,"Need both x and y coordinate"),
this.pub=this.ec.curve.point(b.x,b.y),void 0;this.pub=this.ec.curve.decodePoint(b,e)};hm.prototype.derive=function(b){return b.mul(this.priv).getX()};hm.prototype.sign=function(b,e,l){return this.ec.sign(b,this,e,l)};hm.prototype.verify=function(b,e){return this.ec.verify(b,e,this)};hm.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var dA=Uk,fO=bL,PY=Ah.assert;Vq.prototype.keyPair=function(b){return new hm(this,
b)};Vq.prototype.keyFromPrivate=function(b,e){return hm.fromPrivate(this,b,e)};Vq.prototype.keyFromPublic=function(b,e){return hm.fromPublic(this,b,e)};Vq.prototype.genKeyPair=function(b){b||(b={});b=new Nv({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||XK(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()});for(var e=this.n.byteLength(),l=this.n.sub(new dA(2));;){var a=new dA(b.generate(e));if(!(0<a.cmp(l)))return a.iaddn(1),this.keyFromPrivate(a)}};
Vq.prototype._truncateToN=function(b,e){var l=8*b.byteLength()-this.n.bitLength();return 0<l&&(b=b.ushrn(l)),!e&&0<=b.cmp(this.n)?b.sub(this.n):b};Vq.prototype.sign=function(b,e,l,a){"object"==typeof l&&(a=l,l=null);a||(a={});e=this.keyFromPrivate(e,l);b=this._truncateToN(new dA(b,16));var f=this.n.byteLength();l=e.getPrivate().toArray("be",f);f=b.toArray("be",f);f=new Nv({hash:this.hash,entropy:l,nonce:f,pers:a.pers,persEnc:a.persEnc||"utf8"});for(var m=this.n.sub(new dA(1)),q=0;;q++){var r=a.k?
a.k(q):new dA(f.generate(this.n.byteLength()));if(!(0>=(r=this._truncateToN(r,!0)).cmpn(1)||0<=r.cmp(m))){var u=this.g.mul(r);if(!u.isInfinity()){var v=u.getX();l=v.umod(this.n);if(0!==l.cmpn(0)&&(r=r.invm(this.n).mul(l.mul(e.getPrivate()).iadd(b)),0!==(r=r.umod(this.n)).cmpn(0)))return b=(u.getY().isOdd()?1:0)|(0!==v.cmp(l)?2:0),a.canonical&&0<r.cmp(this.nh)&&(r=this.n.sub(r),b^=1),new pz({r:l,s:r,recoveryParam:b})}}}};Vq.prototype.verify=function(b,e,l,a){b=this._truncateToN(new dA(b,16));l=this.keyFromPublic(l,
a);a=(e=new pz(e,"hex")).r;e=e.s;if(0>a.cmpn(1)||0<=a.cmp(this.n)||0>e.cmpn(1)||0<=e.cmp(this.n))return!1;var f;e=e.invm(this.n);b=e.mul(b).umod(this.n);e=e.mul(a).umod(this.n);return this.curve._maxwellTrick?!(f=this.g.jmulAdd(b,l.getPublic(),e)).isInfinity()&&f.eqXToP(a):!(f=this.g.mulAdd(b,l.getPublic(),e)).isInfinity()&&0===f.getX().umod(this.n).cmp(a)};Vq.prototype.recoverPubKey=function(b,e,l,a){PY((3&l)===l,"The recovery param is more than two bits");e=new pz(e,a);a=this.n;var f=new dA(b);
b=e.r;var m=e.s,q=1&l;l>>=1;if(0<=b.cmp(this.curve.p.umod(this.curve.n))&&l)throw Error("Unable to find sencond key candinate");b=l?this.curve.pointFromX(b.add(this.curve.n),q):this.curve.pointFromX(b,q);e=e.r.invm(a);l=a.sub(f).mul(e).umod(a);a=m.mul(e).umod(a);return this.g.mulAdd(l,b,a)};Vq.prototype.getKeyRecoveryParam=function(b,e,l,a){if(null!==(e=new pz(e,a)).recoveryParam)return e.recoveryParam;for(a=0;4>a;a++){try{var f=this.recoverPubKey(b,e,a)}catch(m){continue}if(f.eq(l))return a}throw Error("Unable to find valid recovery factor");
};var V4=Ah.assert,QY=Ah.parseBytes,xC=Ah.cachedProperty;zl.fromPublic=function(b,e){return e instanceof zl?e:new zl(b,{pub:e})};zl.fromSecret=function(b,e){return e instanceof zl?e:new zl(b,{secret:e})};zl.prototype.secret=function(){return this._secret};xC(zl,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});xC(zl,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});xC(zl,"privBytes",function(){var b=this.eddsa,e=this.hash(),
l=b.encodingLength-1;b=e.slice(0,b.encodingLength);return b[0]&=248,b[l]&=127,b[l]|=64,b});xC(zl,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});xC(zl,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});xC(zl,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});zl.prototype.sign=function(b){return V4(this._secret,"KeyPair can only verify"),this.eddsa.sign(b,this)};zl.prototype.verify=function(b,e){return this.eddsa.verify(b,e,this)};
zl.prototype.getSecret=function(b){return V4(this._secret,"KeyPair is public only"),Ah.encode(this.secret(),b)};zl.prototype.getPublic=function(b){return Ah.encode(this.pubBytes(),b)};var Faa=Uk,Eaa=Ah.assert,cL=Ah.cachedProperty,Daa=Ah.parseBytes;cL(wx,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});cL(wx,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});cL(wx,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});cL(wx,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});
wx.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};wx.prototype.toHex=function(){return Ah.encode(this.toBytes(),"hex").toUpperCase()};var Iaa=Fj,Haa=bL,Gaa=Ah.assert,W4=Ah.parseBytes;Ho.prototype.sign=function(b,e){b=W4(b);var l=this.keyFromSecret(e),a=this.hashInt(l.messagePrefix(),b);e=this.g.mul(a);var f=this.encodePoint(e);b=this.hashInt(f,l.pubBytes(),b).mul(l.priv());b=a.add(b).umod(this.curve.n);return this.makeSignature({R:e,S:b,Rencoded:f})};Ho.prototype.verify=
function(b,e,l){b=W4(b);e=this.makeSignature(e);l=this.keyFromPublic(l);b=this.hashInt(e.Rencoded(),l.pubBytes(),b);var a=this.g.mul(e.S());return e.R().add(l.pub().mul(b)).eq(a)};Ho.prototype.hashInt=function(){for(var b=this.hash(),e=0;e<arguments.length;e++)b.update(arguments[e]);return Ah.intFromLE(b.digest()).umod(this.curve.n)};Ho.prototype.keyFromPublic=function(b){return zl.fromPublic(this,b)};Ho.prototype.keyFromSecret=function(b){return zl.fromSecret(this,b)};Ho.prototype.makeSignature=
function(b){return b instanceof wx?b:new wx(this,b)};Ho.prototype.encodePoint=function(b){var e=b.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=b.getX().isOdd()?128:0,e};Ho.prototype.decodePoint=function(b){var e=(b=Ah.parseBytes(b)).length-1,l=b.slice(0,e).concat(-129&b[e]);b=0!=(128&b[e]);l=Ah.intFromLE(l);return this.curve.pointFromY(l,b)};Ho.prototype.encodeInt=function(b){return b.toArray("le",this.encodingLength)};Ho.prototype.decodeInt=function(b){return Ah.intFromLE(b)};
Ho.prototype.isPoint=function(b){return b instanceof this.pointClass};var jw={version:"6.5.2"};jw.utils=Ah;jw.rand=XK;jw.curve=wC;jw.curves=bL;jw.ec=Vq;jw.eddsa=Ho;var sO={},hZ=!1,xp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Al="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,UY={},gka=oh;UY.Reporter=Wq;Wq.prototype.isError=function(b){return b instanceof AB};Wq.prototype.save=function(){var b=(this||Al)._reporterState;return{obj:b.obj,
pathLen:b.path.length}};Wq.prototype.restore=function(b){var e=(this||Al)._reporterState;e.obj=b.obj;e.path=e.path.slice(0,b.pathLen)};Wq.prototype.enterKey=function(b){return(this||Al)._reporterState.path.push(b)};Wq.prototype.exitKey=function(b){var e=(this||Al)._reporterState;e.path=e.path.slice(0,b-1)};Wq.prototype.leaveKey=function(b,e,l){var a=(this||Al)._reporterState;this.exitKey(b);null!==a.obj&&(a.obj[e]=l)};Wq.prototype.path=function(){return(this||Al)._reporterState.path.join("/")};Wq.prototype.enterObject=
function(){var b=(this||Al)._reporterState,e=b.obj;return b.obj={},e};Wq.prototype.leaveObject=function(b){var e=(this||Al)._reporterState,l=e.obj;return e.obj=b,l};Wq.prototype.error=function(b){var e=(this||Al)._reporterState,l=b instanceof AB;if(b=l?b:new AB(e.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),b.message||b,b.stack),!e.options.partial)throw b;return l||e.errors.push(b),b};Wq.prototype.wrapResult=function(b){var e=(this||Al)._reporterState;return e.options.partial?{result:this.isError(b)?
null:b,errors:e.errors}:b};gka(AB,Error);AB.prototype.rethrow=function(b){if((this||Al).message=b+" at: "+((this||Al).path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this||Al,AB),!(this||Al).stack)try{throw Error((this||Al).message);}catch(e){(this||Al).stack=e.stack}return this||Al};var nI={},SY=!1,zg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,hO={},VY=!1,Uf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,gO={},
TY=!1,xx={},YY=!1,iO={},XY=!1,jO={},$Y=!1,yx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,mO={},bZ=!1,lO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,kO={},aZ=!1,nO={},dZ=!1,Bl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,qO={},fZ=!1,pO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,oO={},eZ=!1,rO={},gZ=!1,xk=oI(),X4=xk.define("Time",function(){this.choice({utcTime:this.utctime(),
generalTime:this.gentime()})}),hka=xk.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),iS=xk.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),ika=xk.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(iS),this.key("subjectPublicKey").bitstr())}),jka=xk.define("RelativeDistinguishedName",function(){this.setof(hka)}),
kka=xk.define("RDNSequence",function(){this.seqof(jka)}),Y4=xk.define("Name",function(){this.choice({rdnSequence:this.use(kka)})}),lka=xk.define("Validity",function(){this.seq().obj(this.key("notBefore").use(X4),this.key("notAfter").use(X4))}),mka=xk.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),nka=xk.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),
this.key("signature").use(iS),this.key("issuer").use(Y4),this.key("validity").use(lka),this.key("subject").use(Y4),this.key("subjectPublicKeyInfo").use(ika),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(mka).optional())}),oka=xk.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(nka),this.key("signatureAlgorithm").use(iS),this.key("signatureValue").bitstr())}),
Hs={};Hs.certificate=oka;var pka=xk.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});Hs.RSAPrivateKey=pka;var qka=xk.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});Hs.RSAPublicKey=
qka;var rka=xk.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Z4),this.key("subjectPublicKey").bitstr())});Hs.PublicKey=rka;var Z4=xk.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),ska=xk.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),
this.key("algorithm").use(Z4),this.key("subjectPrivateKey").octstr())});Hs.PrivateKey=ska;var tka=xk.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});
Hs.EncryptedPrivateKey=tka;var uka=xk.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});Hs.DSAPrivateKey=uka;Hs.DSAparam=xk.define("DSAparam",function(){this.int()});var wka=xk.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(vka),this.key("publicKey").optional().explicit(1).bitstr())});
Hs.ECPrivateKey=wka;var vka=xk.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});Hs.signature=xk.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});var Laa=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/=]+)[\n\r]+/m,Naa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,Maa=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/=]+)-----END \1-----$/m,pI=ci.Buffer,Io=Hs,Oaa={"2.16.840.1.101.3.4.1.1":"aes-128-ecb",
"2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},Qaa=yp,Paa=SK,tO=ci.Buffer;BB.signature=Io.signature;var $4={"1.3.132.0.10":"secp256k1",
"1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},jS={},pn=eh.Buffer,tz=o4,xka=jw.ec,qI=Uk;(jS=function(b,e,l,a,f){e=BB(e);if(e.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong private key type");return function(m,q){var r=$4[q.curve.join(".")];if(!r)throw Error("unknown curve "+q.curve.join("."));m=(new xka(r)).keyFromPrivate(q.privateKey).sign(m);return new pn(m.toDER())}(b,e)}if("dsa"===e.type){if("dsa"!==a)throw Error("wrong private key type");
return function(m,q,r){var u=q.params.priv_key,v=q.params.p,y=q.params.q;q=q.params.g;var z=new qI(0),B=uO(m,y).mod(y);var C=!1;for(m=iZ(u,y,m,r);!1===C;){z=C=jZ(y,m,r);var G=y;z=q.toRed(qI.mont(v)).redPow(z).fromRed().mod(G);0===(C=C.invm(y).imul(B.add(u.mul(z))).mod(y)).cmpn(0)&&(C=!1,z=new qI(0))}r=C;u=z.toArray();r=r.toArray();128&u[0]&&(u=[0].concat(u));128&r[0]&&(r=[0].concat(r));v=[48,u.length+r.length+4,2,u.length];return v=v.concat(u,[2,r.length],r),new pn(v)}(b,e,l)}if("rsa"!==a&&"ecdsa/rsa"!==
a)throw Error("wrong private key type");b=pn.concat([f,b]);a=e.modulus.byteLength();for(l=[0,1];b.length+l.length+1<a;)l.push(255);l.push(0);for(a=-1;++a<b.length;)l.push(b[a]);return iI(l,e)}).getKey=iZ;jS.makeKey=jZ;var kS=eh.Buffer,CF=Uk,yka=jw.ec,rk="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,dL=eh.Buffer,lZ=xF,rI=zz,a5=oh,zka=jS,Aka=function(b,e,l,a,f){l=BB(l);if("ec"===l.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return function(r,
u,v){var y=$4[v.data.algorithm.curve.join(".")];if(!y)throw Error("unknown curve "+v.data.algorithm.curve.join("."));return(new yka(y)).verify(u,r,v.data.subjectPrivateKey.data)}(b,e,l)}if("dsa"===l.type){if("dsa"!==a)throw Error("wrong public key type");return function(r,u,v){var y=v.data.p,z=v.data.q,B=v.data.g;v=v.data.pub_key;var C=BB.signature.decode(r,"der");r=C.s;C=C.r;kZ(r,z);kZ(C,z);var G=CF.mont(y);r=r.invm(z);return 0===B.toRed(G).redPow((new CF(u)).mul(r).mod(z)).fromRed().mul(v.toRed(G).redPow(C.mul(r).mod(z)).fromRed()).mod(y).mod(z).cmp(C)}(b,
e,l)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");e=kS.concat([f,e]);f=l.modulus.byteLength();a=[1];for(var m=0;e.length+a.length+2<f;)a.push(255),m++;a.push(0);for(var q=-1;++q<e.length;)a.push(e[q]);a=new kS(a);e=CF.mont(l.modulus);b=(b=(new CF(b)).toRed(e)).redPow(new CF(l.publicExponent));b=new kS(b.fromRed().toArray());e=8>m?1:0;f=Math.min(b.length,a.length);b.length!==a.length&&(e=1);for(q=-1;++q<f;)e|=b[q]^a[q];return 0===e},uz=p4;Object.keys(uz).forEach(function(b){uz[b].id=
new dL(uz[b].id,"hex");uz[b.toLowerCase()]=uz[b]});a5(XD,rI.Writable);XD.prototype._write=function(b,e,l){(this||rk)._hash.update(b);l()};XD.prototype.update=function(b,e){return"string"==typeof b&&(b=new dL(b,e)),(this||rk)._hash.update(b),this||rk};XD.prototype.sign=function(b,e){this.end();var l=(this||rk)._hash.digest();b=zka(l,b,(this||rk)._hashType,(this||rk)._signType,(this||rk)._tag);return e?b.toString(e):b};a5(YD,rI.Writable);YD.prototype._write=function(b,e,l){(this||rk)._hash.update(b);
l()};YD.prototype.update=function(b,e){return"string"==typeof b&&(b=new dL(b,e)),(this||rk)._hash.update(b),this||rk};YD.prototype.verify=function(b,e,l){"string"==typeof e&&(e=new dL(e,l));this.end();l=(this||rk)._hash.digest();return Aka(e,l,b,(this||rk)._signType,(this||rk)._tag)};var Cl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,Pv=eh.Buffer,Raa=jw,Bka=Uk,zp={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",
byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};zp.p224=zp.secp224r1;zp.p256=zp.secp256r1=zp.prime256v1;zp.p192=zp.secp192r1=zp.prime192v1;zp.p384=zp.secp384r1;zp.p521=zp.secp521r1;vz.prototype.generateKeys=function(b,e){return(this||Cl).keys=(this||Cl).curve.genKeyPair(),this.getPublicKey(b,e)};vz.prototype.computeSecret=function(b,e,l){return e=e||"utf8",Pv.isBuffer(b)||(b=new Pv(b,
e)),vO((this||Cl).curve.keyFromPublic(b).getPublic().mul((this||Cl).keys.getPrivate()).getX(),l,(this||Cl).curveType.byteLength)};vz.prototype.getPublicKey=function(b,e){var l=(this||Cl).keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(l[l.length-1]%2?l[0]=7:l[0]=6),vO(l,b)};vz.prototype.getPrivateKey=function(b){return vO((this||Cl).keys.getPrivate(),b)};vz.prototype.setPublicKey=function(b,e){return e=e||"utf8",Pv.isBuffer(b)||(b=new Pv(b,e)),(this||Cl).keys._importPublic(b),this||Cl};vz.prototype.setPrivateKey=
function(b,e){e=e||"utf8";Pv.isBuffer(b)||(b=new Pv(b,e));b=new Bka(b);return b=b.toString(16),(this||Cl).keys=(this||Cl).curve.genKeyPair(),(this||Cl).keys._importPrivate(b),this||Cl};var lS=ci.Buffer,eL=function(b,e){for(var l,a=lS.alloc(0),f=0;a.length<e;){l=f++;var m=lS.allocUnsafe(4);l=(m.writeUInt32BE(l,0),m);a=lS.concat([a,xF("sha1").update(b).update(l).digest()])}return a.slice(0,e)},fL=function(b,e){for(var l=b.length,a=-1;++a<l;)b[a]^=e[a];return b},b5=Uk,Cka=ci.Buffer,c5=function(b,e){return Cka.from(b.toRed(b5.mont(e.modulus)).redPow(new b5(e.publicExponent)).fromRed().toArray())},
mS=Uk,Is=ci.Buffer,d5=Uk,DF=ci.Buffer,yC={publicEncrypt:function(b,e,l){var a=b.padding?b.padding:l?1:4;b=BB(b);if(4===a)e=function(f,m){f=f.modulus.byteLength();var q=m.length,r=xF("sha1").update(Is.alloc(0)).digest(),u=r.length,v=2*u;if(q>f-v-2)throw Error("message too long");v=Is.alloc(f-q-v-2);var y=f-u-1;q=Wx(u);m=fL(Is.concat([r,v,Is.alloc(1,1),m],y),eL(q,y));u=fL(q,eL(m,u));return new mS(Is.concat([Is.alloc(1),u,m],f))}(b,e);else if(1===a)e=function(f,m,q){var r=m.length;f=f.modulus.byteLength();
if(r>f-11)throw Error("message too long");if(q)var u=Is.alloc(f-r-3,255);else{r=f-r-3;for(var v=Is.allocUnsafe(r),y=0,z=Wx(2*r),B=0;y<r;)B===z.length&&(z=Wx(2*r),B=0),(u=z[B++])&&(v[y++]=u);u=v}return new mS(Is.concat([Is.from([0,q?1:2]),u,Is.alloc(1),m],f))}(b,e,l);else{if(3!==a)throw Error("unknown padding");if(0<=(e=new mS(e)).cmp(b.modulus))throw Error("data too long for modulus");}return l?iI(e,b):c5(e,b)},privateDecrypt:function(b,e,l){var a=b.padding?b.padding:l?1:4;b=BB(b);var f=b.modulus.byteLength();
if(e.length>f||0<=(new d5(e)).cmp(b.modulus))throw Error("decryption error");e=l?c5(new d5(e),b):iI(e,b);var m=DF.alloc(f-e.length);if(e=DF.concat([m,e],f),4===a)return function(q,r){var u=q.modulus.byteLength(),v=xF("sha1").update(DF.alloc(0)).digest();q=v.length;if(0!==r[0])throw Error("decryption error");var y=r.slice(1,q+1);r=r.slice(q+1);y=fL(y,eL(r,q));u=fL(r,eL(y,u-q-1));r=u.slice(0,q);v=DF.from(v);r=DF.from(r);y=0;var z=v.length;v.length!==r.length&&(y++,z=Math.min(v.length,r.length));for(var B=
-1;++B<z;)y+=v[B]^r[B];if(y)throw Error("decryption error");for(;0===u[q];)q++;if(1!==u[q++])throw Error("decryption error");return u.slice(q)}(b,e);if(1===a)return function(q,r,u){q=r.slice(0,2);for(var v=2,y=0;0!==r[v++];)if(v>=r.length){y++;break}var z=r.slice(2,v-1);("0002"!==q.toString("hex")&&!u||"0001"!==q.toString("hex")&&u)&&y++;8>z.length&&y++;if(y)throw Error("decryption error");return r.slice(v)}(0,e,l);if(3===a)return e;throw Error("unknown padding");},privateEncrypt:function(b,e){return yC.publicEncrypt(b,
e,!0)},publicDecrypt:function(b,e){return yC.privateDecrypt(b,e,!0)}},gL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global,nS,oS,wO=Qh,uZ=Wx,e5=ci.Buffer,rZ=ci.kMaxLength,xO=gL.crypto||gL.msCrypto,qZ=Math.pow(2,32)-1;xO&&xO.getRandomValues||!wO.browser?(nS=function(b,e,l,a){if(!(e5.isBuffer(b)||b instanceof gL.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)a=e,e=0,l=b.length;else if("function"==typeof l)a=l,l=b.length-
e;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return pZ(e,b.length),sZ(l,e,b.length),tZ(b,e,l,a)},oS=function(b,e,l){void 0===e&&(e=0);if(!(e5.isBuffer(b)||b instanceof gL.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');pZ(e,b.length);void 0===l&&(l=b.length-e);return sZ(l,e,b.length),tZ(b,e,l)}):(nS=oZ,oS=oZ);var mg={};mg.randomBytes=mg.rng=mg.pseudoRandomBytes=mg.prng=Wx;mg.createHash=mg.Hash=xF;mg.createHmac=mg.Hmac=o4;var Dka=
Object.keys(p4),Eka="sha1 sha224 sha256 sha384 sha512 md5 rmd160".split(" ").concat(Dka);mg.getHashes=function(){return Eka};mg.pbkdf2=SK.pbkdf2;mg.pbkdf2Sync=SK.pbkdf2Sync;mg.Cipher=B4;mg.createCipher=zja;mg.Cipheriv=VN;mg.createCipheriv=VN;mg.Decipher=C4;mg.createDecipher=Aja;mg.Decipheriv=XN;mg.createDecipheriv=XN;mg.getCiphers=D4;mg.listCiphers=Bja;mg.DiffieHellmanGroup=Jja;mg.createDiffieHellmanGroup=I4;mg.getDiffieHellman=J4;mg.createDiffieHellman=Kja;mg.DiffieHellman=K4;mg.createSign=mZ;mg.Sign=
mZ;mg.createVerify=nZ;mg.Verify=nZ;mg.createECDH=function(b){return new vz(b)};mg.publicEncrypt=yC.publicEncrypt;mg.privateEncrypt=yC.privateEncrypt;mg.publicDecrypt=yC.publicDecrypt;mg.privateDecrypt=yC.privateDecrypt;mg.randomFill=nS;mg.randomFillSync=oS;mg.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify");};mg.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,
DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.default=function(){return Fka.default.randomFillSync(Gka)};var Fka=mg&&mg.__esModule?mg:{default:mg},Gka=new Uint8Array(16),Xn={};Object.defineProperty(Xn,"__esModule",
{value:!0});Xn.default=void 0;for(var Tm=[],pS=0;256>pS;++pS)Tm.push((pS+256).toString(16).substr(1));Xn.default=function(b,e){e=e||0;return(Tm[b[e+0]]+Tm[b[e+1]]+Tm[b[e+2]]+Tm[b[e+3]]+"-"+Tm[b[e+4]]+Tm[b[e+5]]+"-"+Tm[b[e+6]]+Tm[b[e+7]]+"-"+Tm[b[e+8]]+Tm[b[e+9]]+"-"+Tm[b[e+10]]+Tm[b[e+11]]+Tm[b[e+12]]+Tm[b[e+13]]+Tm[b[e+14]]+Tm[b[e+15]]).toLowerCase()};var hL={};Object.defineProperty(hL,"__esModule",{value:!0});hL.default=void 0;var Hka=yu&&yu.__esModule?yu:{default:yu},Ika=Xn&&Xn.__esModule?Xn:{default:Xn},
f5,qS,rS=0,sS=0;hL.default=function(b,e,l){l=e&&l||0;var a=e||[];b=b||{};var f=b.node||f5,m=void 0!==b.clockseq?b.clockseq:qS;if(null==f||null==m){var q=b.random||(b.rng||Hka.default)();null==f&&(f=f5=[q[0]|1,q[1],q[2],q[3],q[4],q[5]]);null==m&&(m=qS=(q[6]<<8|q[7])&16383)}q=void 0!==b.msecs?b.msecs:Date.now();var r=void 0!==b.nsecs?b.nsecs:sS+1,u=q-rS+(r-sS)/1E4;0>u&&void 0===b.clockseq&&(m=m+1&16383);(0>u||q>rS)&&void 0===b.nsecs&&(r=0);if(1E4<=r)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
rS=q;sS=r;qS=m;q+=122192928E5;b=(1E4*(q&268435455)+r)%4294967296;a[l++]=b>>>24&255;a[l++]=b>>>16&255;a[l++]=b>>>8&255;a[l++]=b&255;b=q/4294967296*1E4&268435455;a[l++]=b>>>8&255;a[l++]=b&255;a[l++]=b>>>24&15|16;a[l++]=b>>>16&255;a[l++]=m>>>8|128;a[l++]=m&255;for(m=0;6>m;++m)a[l+m]=f[m];return e||(0,Ika.default)(a)};var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.default=function(b,e,l){function a(f,m,q,r){r=q&&r||0;if("string"===typeof f){f=unescape(encodeURIComponent(f));for(var u=
[],v=0;v<f.length;++v)u.push(f.charCodeAt(v));f=u}"string"===typeof m&&(m=Saa(m));if(!Array.isArray(f))throw TypeError("value must be an array of bytes");if(!Array.isArray(m)||16!==m.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");m=l(m.concat(f));m[6]=m[6]&15|e;m[8]=m[8]&63|128;if(q)for(f=0;16>f;++f)q[r+f]=m[f];return q||(0,Jka.default)(m)}try{a.name=b}catch(f){}a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return a};
Oo.URL=Oo.DNS=void 0;var Jka=Xn&&Xn.__esModule?Xn:{default:Xn};Oo.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Oo.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var eA={},g5=eh.Buffer;Object.defineProperty(eA,"__esModule",{value:!0});eA.default=void 0;var Kka=mg&&mg.__esModule?mg:{default:mg};eA.default=function(b){Array.isArray(b)?b=g5.from(b):"string"===typeof b&&(b=g5.from(b,"utf8"));return Kka.default.createHash("md5").update(b).digest()};var iL={};Object.defineProperty(iL,"__esModule",{value:!0});
iL.default=void 0;var Lka=Oo&&Oo.__esModule?Oo:{default:Oo},Mka=eA&&eA.__esModule?eA:{default:eA},Nka=(0,Lka.default)("v3",48,Mka.default);iL.default=Nka;var jL={};Object.defineProperty(jL,"__esModule",{value:!0});jL.default=void 0;var Oka=yu&&yu.__esModule?yu:{default:yu},Pka=Xn&&Xn.__esModule?Xn:{default:Xn};jL.default=function(b,e,l){"string"===typeof b&&(e="binary"===b?new Uint8Array(16):null,b=null);b=b||{};b=b.random||(b.rng||Oka.default)();b[6]=b[6]&15|64;b[8]=b[8]&63|128;if(e){l=l||0;for(var a=
0;16>a;++a)e[l+a]=b[a];return e}return(0,Pka.default)(b)};var fA={},h5=eh.Buffer;Object.defineProperty(fA,"__esModule",{value:!0});fA.default=void 0;var Qka=mg&&mg.__esModule?mg:{default:mg};fA.default=function(b){Array.isArray(b)?b=h5.from(b):"string"===typeof b&&(b=h5.from(b,"utf8"));return Qka.default.createHash("sha1").update(b).digest()};var kL={};Object.defineProperty(kL,"__esModule",{value:!0});kL.default=void 0;var Rka=Oo&&Oo.__esModule?Oo:{default:Oo},Ska=fA&&fA.__esModule?fA:{default:fA},
Tka=(0,Rka.default)("v5",80,Ska.default);kL.default=Tka;var gA={};Object.defineProperty(gA,"__esModule",{value:!0});Object.defineProperty(gA,"v1",{enumerable:!0,get:function(){return Uka.default}});Object.defineProperty(gA,"v3",{enumerable:!0,get:function(){return Vka.default}});Object.defineProperty(gA,"v4",{enumerable:!0,get:function(){return Wka.default}});Object.defineProperty(gA,"v5",{enumerable:!0,get:function(){return Xka.default}});var Uka=sI(hL),Vka=sI(iL),Wka=sI(jL),Xka=sI(kL),Um={};Object.defineProperty(Um,
"__esModule",{value:!0});Um.atob=function(b){return i5(b)};Um.btoa=function(b){return j5(b)};Um.base64StringToBlobOrBuffer=function(b,e){return xZ(i5(b),e)};Um.binaryStringToArrayBuffer=wZ;Um.binaryStringToBlobOrBuffer=xZ;Um.blob=vZ;Um.blobOrBufferToBase64=function(b,e){zZ(b,function(l){e(j5(l))})};Um.blobOrBufferToBinaryString=zZ;Um.readAsArrayBuffer=function(b,e){var l=new FileReader;l.onloadend=function(a){a=a.target.result||new ArrayBuffer(0);e(a)};l.readAsArrayBuffer(b)};Um.readAsBinaryString=
yZ;Um.typedBuffer=function(){};var i5=Um.atob,j5=Um.btoa,Wg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Yka={},EF=Yka=function(b){function e(y,z){var B=y[0],C=y[1],G=y[2],F=y[3];B+=(C&G|~C&F)+z[0]-680876936|0;B=(B<<7|B>>>25)+C|0;F+=(B&C|~B&G)+z[1]-389564586|0;F=(F<<12|F>>>20)+B|0;G+=(F&B|~F&C)+z[2]+606105819|0;G=(G<<17|G>>>15)+F|0;C+=(G&F|~G&B)+z[3]-1044525330|0;C=(C<<22|C>>>10)+G|0;B+=(C&G|~C&F)+z[4]-176418897|0;B=(B<<7|B>>>25)+C|0;F+=(B&C|~B&G)+z[5]+1200080426|
0;F=(F<<12|F>>>20)+B|0;G+=(F&B|~F&C)+z[6]-1473231341|0;G=(G<<17|G>>>15)+F|0;C+=(G&F|~G&B)+z[7]-45705983|0;C=(C<<22|C>>>10)+G|0;B+=(C&G|~C&F)+z[8]+1770035416|0;B=(B<<7|B>>>25)+C|0;F+=(B&C|~B&G)+z[9]-1958414417|0;F=(F<<12|F>>>20)+B|0;G+=(F&B|~F&C)+z[10]-42063|0;G=(G<<17|G>>>15)+F|0;C+=(G&F|~G&B)+z[11]-1990404162|0;C=(C<<22|C>>>10)+G|0;B+=(C&G|~C&F)+z[12]+1804603682|0;B=(B<<7|B>>>25)+C|0;F+=(B&C|~B&G)+z[13]-40341101|0;F=(F<<12|F>>>20)+B|0;G+=(F&B|~F&C)+z[14]-1502002290|0;G=(G<<17|G>>>15)+F|0;C+=(G&F|
~G&B)+z[15]+1236535329|0;C=(C<<22|C>>>10)+G|0;B+=(C&F|G&~F)+z[1]-165796510|0;B=(B<<5|B>>>27)+C|0;F+=(B&G|C&~G)+z[6]-1069501632|0;F=(F<<9|F>>>23)+B|0;G+=(F&C|B&~C)+z[11]+643717713|0;G=(G<<14|G>>>18)+F|0;C+=(G&B|F&~B)+z[0]-373897302|0;C=(C<<20|C>>>12)+G|0;B+=(C&F|G&~F)+z[5]-701558691|0;B=(B<<5|B>>>27)+C|0;F+=(B&G|C&~G)+z[10]+38016083|0;F=(F<<9|F>>>23)+B|0;G+=(F&C|B&~C)+z[15]-660478335|0;G=(G<<14|G>>>18)+F|0;C+=(G&B|F&~B)+z[4]-405537848|0;C=(C<<20|C>>>12)+G|0;B+=(C&F|G&~F)+z[9]+568446438|0;B=(B<<5|B>>>
27)+C|0;F+=(B&G|C&~G)+z[14]-1019803690|0;F=(F<<9|F>>>23)+B|0;G+=(F&C|B&~C)+z[3]-187363961|0;G=(G<<14|G>>>18)+F|0;C+=(G&B|F&~B)+z[8]+1163531501|0;C=(C<<20|C>>>12)+G|0;B+=(C&F|G&~F)+z[13]-1444681467|0;B=(B<<5|B>>>27)+C|0;F+=(B&G|C&~G)+z[2]-51403784|0;F=(F<<9|F>>>23)+B|0;G+=(F&C|B&~C)+z[7]+1735328473|0;G=(G<<14|G>>>18)+F|0;C+=(G&B|F&~B)+z[12]-1926607734|0;C=(C<<20|C>>>12)+G|0;B+=(C^G^F)+z[5]-378558|0;B=(B<<4|B>>>28)+C|0;F+=(B^C^G)+z[8]-2022574463|0;F=(F<<11|F>>>21)+B|0;G+=(F^B^C)+z[11]+1839030562|0;
G=(G<<16|G>>>16)+F|0;C+=(G^F^B)+z[14]-35309556|0;C=(C<<23|C>>>9)+G|0;B+=(C^G^F)+z[1]-1530992060|0;B=(B<<4|B>>>28)+C|0;F+=(B^C^G)+z[4]+1272893353|0;F=(F<<11|F>>>21)+B|0;G+=(F^B^C)+z[7]-155497632|0;G=(G<<16|G>>>16)+F|0;C+=(G^F^B)+z[10]-1094730640|0;C=(C<<23|C>>>9)+G|0;B+=(C^G^F)+z[13]+681279174|0;B=(B<<4|B>>>28)+C|0;F+=(B^C^G)+z[0]-358537222|0;F=(F<<11|F>>>21)+B|0;G+=(F^B^C)+z[3]-722521979|0;G=(G<<16|G>>>16)+F|0;C+=(G^F^B)+z[6]+76029189|0;C=(C<<23|C>>>9)+G|0;B+=(C^G^F)+z[9]-640364487|0;B=(B<<4|B>>>
28)+C|0;F+=(B^C^G)+z[12]-421815835|0;F=(F<<11|F>>>21)+B|0;G+=(F^B^C)+z[15]+530742520|0;G=(G<<16|G>>>16)+F|0;C+=(G^F^B)+z[2]-995338651|0;C=(C<<23|C>>>9)+G|0;B+=(G^(C|~F))+z[0]-198630844|0;B=(B<<6|B>>>26)+C|0;F+=(C^(B|~G))+z[7]+1126891415|0;F=(F<<10|F>>>22)+B|0;G+=(B^(F|~C))+z[14]-1416354905|0;G=(G<<15|G>>>17)+F|0;C+=(F^(G|~B))+z[5]-57434055|0;C=(C<<21|C>>>11)+G|0;B+=(G^(C|~F))+z[12]+1700485571|0;B=(B<<6|B>>>26)+C|0;F+=(C^(B|~G))+z[3]-1894986606|0;F=(F<<10|F>>>22)+B|0;G+=(B^(F|~C))+z[10]-1051523|0;
G=(G<<15|G>>>17)+F|0;C+=(F^(G|~B))+z[1]-2054922799|0;C=(C<<21|C>>>11)+G|0;B+=(G^(C|~F))+z[8]+1873313359|0;B=(B<<6|B>>>26)+C|0;F+=(C^(B|~G))+z[15]-30611744|0;F=(F<<10|F>>>22)+B|0;G+=(B^(F|~C))+z[6]-1560198380|0;G=(G<<15|G>>>17)+F|0;C+=(F^(G|~B))+z[13]+1309151649|0;C=(C<<21|C>>>11)+G|0;B+=(G^(C|~F))+z[4]-145523070|0;B=(B<<6|B>>>26)+C|0;F+=(C^(B|~G))+z[11]-1120210379|0;F=(F<<10|F>>>22)+B|0;G+=(B^(F|~C))+z[2]+718787259|0;G=(G<<15|G>>>17)+F|0;C+=(F^(G|~B))+z[9]-343485551|0;y[0]=B+y[0]|0;y[1]=((C<<21|C>>>
11)+G|0)+y[1]|0;y[2]=G+y[2]|0;y[3]=F+y[3]|0}function l(y){var z=[],B;for(B=0;64>B;B+=4)z[B>>2]=y.charCodeAt(B)+(y.charCodeAt(B+1)<<8)+(y.charCodeAt(B+2)<<16)+(y.charCodeAt(B+3)<<24);return z}function a(y){var z=[],B;for(B=0;64>B;B+=4)z[B>>2]=y[B]+(y[B+1]<<8)+(y[B+2]<<16)+(y[B+3]<<24);return z}function f(y){var z=y.length,B=[1732584193,-271733879,-1732584194,271733878],C;for(C=64;C<=z;C+=64)e(B,l(y.substring(C-64,C)));y=y.substring(C-64);var G=y.length;var F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(C=
0;C<G;C+=1)F[C>>2]|=y.charCodeAt(C)<<(C%4<<3);F[C>>2]|=128<<(C%4<<3);if(55<C)for(e(B,F),C=0;16>C;C+=1)F[C]=0;z=(8*z).toString(16).match(/(.*?)(.{0,8})$/);y=parseInt(z[2],16);z=parseInt(z[1],16)||0;F[14]=y;F[15]=z;e(B,F);return B}function m(y){var z;for(z=0;z<y.length;z+=1){var B=z,C,G=y[z],F="";for(C=0;4>C;C+=1)F+=v[G>>8*C+4&15]+v[G>>8*C&15];y[B]=F}return y.join("")}function q(y){/[\u0080-\uFFFF]/.test(y)&&(y=unescape(encodeURIComponent(y)));return y}function r(y){var z=[],B=y.length,C;for(C=0;C<
B-1;C+=2)z.push(parseInt(y.substr(C,2),16));return String.fromCharCode.apply(String,z)}function u(){this.reset()}var v="0123456789abcdef".split("");m(f("hello"));"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function y(z,B){z=z|0||0;return 0>z?Math.max(z+B,0):Math.min(z,B)}ArrayBuffer.prototype.slice=function(z,B){var C=(this||Wg).byteLength;z=y(z,C);var G=C;B!==b&&(G=y(B,C));if(z>G)return new ArrayBuffer(0);G-=z;B=new ArrayBuffer(G);C=new Uint8Array(B);z=new Uint8Array(this||
Wg,z,G);C.set(z);return B}}();u.prototype.append=function(y){this.appendBinary(q(y));return this||Wg};u.prototype.appendBinary=function(y){(this||Wg)._buff+=y;(this||Wg)._length+=y.length;y=(this||Wg)._buff.length;var z;for(z=64;z<=y;z+=64)e((this||Wg)._hash,l((this||Wg)._buff.substring(z-64,z)));(this||Wg)._buff=(this||Wg)._buff.substring(z-64);return this||Wg};u.prototype.end=function(y){var z=(this||Wg)._buff,B=z.length,C,G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(C=0;C<B;C+=1)G[C>>2]|=z.charCodeAt(C)<<
(C%4<<3);this._finish(G,B);z=m((this||Wg)._hash);y&&(z=r(z));this.reset();return z};u.prototype.reset=function(){(this||Wg)._buff="";(this||Wg)._length=0;(this||Wg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Wg};u.prototype.getState=function(){return{buff:(this||Wg)._buff,length:(this||Wg)._length,hash:(this||Wg)._hash.slice()}};u.prototype.setState=function(y){(this||Wg)._buff=y.buff;(this||Wg)._length=y.length;(this||Wg)._hash=y.hash;return this||Wg};u.prototype.destroy=function(){delete (this||
Wg)._hash;delete (this||Wg)._buff;delete (this||Wg)._length};u.prototype._finish=function(y,z){y[z>>2]|=128<<(z%4<<3);if(55<z)for(e((this||Wg)._hash,y),z=0;16>z;z+=1)y[z]=0;var B=8*(this||Wg)._length;B=B.toString(16).match(/(.*?)(.{0,8})$/);z=parseInt(B[2],16);B=parseInt(B[1],16)||0;y[14]=z;y[15]=B;e((this||Wg)._hash,y)};u.hash=function(y,z){return u.hashBinary(q(y),z)};u.hashBinary=function(y,z){y=f(y);y=m(y);return z?r(y):y};u.ArrayBuffer=function(){this.reset()};u.ArrayBuffer.prototype.append=
function(y){var z=(this||Wg)._buff.buffer,B=new Uint8Array(z.byteLength+y.byteLength);B.set(new Uint8Array(z));B.set(new Uint8Array(y),z.byteLength);z=B.length;(this||Wg)._length+=y.byteLength;for(y=64;y<=z;y+=64)e((this||Wg)._hash,a(B.subarray(y-64,y)));(this||Wg)._buff=y-64<z?new Uint8Array(B.buffer.slice(y-64)):new Uint8Array(0);return this||Wg};u.ArrayBuffer.prototype.end=function(y){var z=(this||Wg)._buff,B=z.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G;for(G=0;G<B;G+=1)C[G>>2]|=z[G]<<(G%4<<
3);this._finish(C,B);z=m((this||Wg)._hash);y&&(z=r(z));this.reset();return z};u.ArrayBuffer.prototype.reset=function(){(this||Wg)._buff=new Uint8Array(0);(this||Wg)._length=0;(this||Wg)._hash=[1732584193,-271733879,-1732584194,271733878];return this||Wg};u.ArrayBuffer.prototype.getState=function(){var y=u.prototype.getState.call(this||Wg);y.buff=String.fromCharCode.apply(null,new Uint8Array(y.buff));return y};u.ArrayBuffer.prototype.setState=function(y){var z=y.buff,B=z.length,C=new ArrayBuffer(B);
C=new Uint8Array(C);var G;for(G=0;G<B;G+=1)C[G]=z.charCodeAt(G);y.buff=C;return u.prototype.setState.call(this||Wg,y)};u.ArrayBuffer.prototype.destroy=u.prototype.destroy;u.ArrayBuffer.prototype._finish=u.prototype._finish;u.ArrayBuffer.hash=function(y,z){var B=new Uint8Array(y),C=B.length;y=[1732584193,-271733879,-1732584194,271733878];var G;for(G=64;G<=C;G+=64)e(y,a(B.subarray(G-64,G)));B=G-64<C?B.subarray(G-64):new Uint8Array(0);var F=B.length;var N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(G=0;G<
F;G+=1)N[G>>2]|=B[G]<<(G%4<<3);N[G>>2]|=128<<(G%4<<3);if(55<G)for(e(y,N),G=0;16>G;G+=1)N[G]=0;C=(8*C).toString(16).match(/(.*?)(.{0,8})$/);B=parseInt(C[2],16);C=parseInt(C[1],16)||0;N[14]=B;N[15]=C;e(y,N);y=m(y);return z?r(y):y};return u}(),zC={};Object.defineProperty(zC,"__esModule",{value:!0});var AZ=Um,tS=EF&&"object"===typeof EF&&"default"in EF?EF["default"]:EF,Zka=self.setImmediate||self.setTimeout;zC.binaryMd5=function(b,e){function l(){Zka(f)}function a(){var B=y.end(!0);B=AZ.btoa(B);e(B);
y.destroy()}function f(){var B=v*r,C=B+r;v++;v<u?z(y,b,B,C,l):z(y,b,B,C,a)}var m="string"===typeof b,q=m?b.length:b.size,r=Math.min(32768,q),u=Math.ceil(q/r),v=0,y=m?new tS:new tS.ArrayBuffer,z=m?Vaa:Uaa;f()};zC.stringMd5=function(b){return tS.hash(b)};var wg={};Object.defineProperty(wg,"__esModule",{value:!0});var yO=tI(ER),$ka=tI(Rj),k5=tI(si),vI=tI(Qt),BZ=Function.prototype.toString,Waa=BZ.call(Object);try{localStorage.setItem("_pouch_check_localstorage",1);var uI=!!localStorage.getItem("_pouch_check_localstorage")}catch(b){uI=
!1}$ka(CB,vI);CB.prototype.addListener=function(b,e,l,a){function f(){if(m._listeners[e])if(q)q="waiting";else{q=!0;var r=zO(a,"style include_docs attachments conflicts filter doc_ids view since query_params binary return_docs".split(" "));l.changes(r).on("change",function(u){u.seq>a.since&&!a.cancelled&&(a.since=u.seq,a.onChange(u))}).on("complete",function(){"waiting"===q&&k5(f);q=!1}).on("error",function(){q=!1})}}if(!this._listeners[e]){var m=this,q=!1;this._listeners[e]=f;this.on(b,f)}};CB.prototype.removeListener=
function(b,e){e in this._listeners&&(vI.prototype.removeListener.call(this,b,this._listeners[e]),delete this._listeners[e])};CB.prototype.notifyLocalWindows=function(b){uI&&(localStorage[b]="a"===localStorage[b]?"b":"a")};CB.prototype.notify=function(b){this.emit(b);this.notifyLocalWindows(b)};var ala="function"===typeof Object.assign?Object.assign:function(b){for(var e=Object(b),l=1;l<arguments.length;l++){var a=arguments[l];if(null!=a)for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(e[f]=
a[f])}return e},bla=function(){}.name?function(b){return b.name}:function(b){return(b=b.toString().match(/^\s*function\s*(?:(\S+)\s*)?\(/))&&b[1]?b[1]:""},l5="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),cla=/(?:^|&)([^&=]*)=?([^&]*)/g,dla=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
ela=gA.v4;wg.adapterFun=function(b,e){return DZ(yO(function(l){if(this._closed)return Promise.reject(Error("database is closed"));if(this._destroyed)return Promise.reject(Error("database is destroyed"));var a=this;Xaa(a,b,l);return this.taskqueue.isReady?e.apply(this,l):new Promise(function(f,m){a.taskqueue.addTask(function(q){q?m(q):f(a[b].apply(a,l))})})}))};wg.assign=ala;wg.bulkGetShim=function(b,e,l){function a(){var C=[];y.forEach(function(G){G.docs.forEach(function(F){C.push({id:G.id,docs:[F]})})});
l(null,{results:C})}function f(){if(!(B>=z.length)){var C=z.slice(B,Math.min(B+6,z.length));m(C,B);B+=C.length}}function m(C,G){C.forEach(function(F,N){var L=G+N;N=r.get(F);var S=zO(N[0],["atts_since","attachments"]);S.open_revs=N.map(function(qa){return qa.rev});S.open_revs=S.open_revs.filter(EZ);var ha=EZ;0===S.open_revs.length&&(delete S.open_revs,ha=Yaa);["revs","attachments","binary","ajax","latest"].forEach(function(qa){qa in e&&(S[qa]=e[qa])});b.get(F,S,function(qa,D){qa=qa?[{error:qa}]:ha(D);
y[L]={id:F,docs:qa};++v===u&&a();f()})})}var q=e.docs,r=new Vx.Map;q.forEach(function(C){r.has(C.id)?r.get(C.id).push(C):r.set(C.id,[C])});var u=r.size,v=0,y=Array(u),z=[];r.forEach(function(C,G){z.push(G)});var B=0;f()};wg.changesHandler=CB;wg.clone=ZD;wg.defaultBackOff=function(b){var e=0;b||(e=2E3);b=parseInt(b,10)||0;e=parseInt(e,10);e=e!==e||e<=b?(b||1)<<1:e+1;6E5<e&&(b=3E5,e=6E5);return~~((e-b)*Math.random()+b)};wg.explainError=function(b,e){AO("info","The above "+b+" is totally normal. "+e)};
wg.filterChange=function(b){var e={},l=b.filter&&"function"===typeof b.filter;e.query=b.query_params;return function(a){a.doc||(a.doc={});var f;if(f=l)try{f=!(0,b.filter)(a.doc,e)}catch(q){f=Of.createError(Of.BAD_REQUEST,"Filter function threw: "+q.toString())}if("object"===typeof f)return f;if(f)return!1;if(!b.include_docs)delete a.doc;else if(!b.attachments)for(var m in a.doc._attachments)a.doc._attachments.hasOwnProperty(m)&&(a.doc._attachments[m].stub=!0);return!0}};wg.flatten=function(b){for(var e=
[],l=0,a=b.length;l<a;l++)e=e.concat(b[l]);return e};wg.functionName=bla;wg.guardedConsole=AO;wg.hasLocalStorage=function(){return uI};wg.invalidIdError=function(b){var e;b?"string"!==typeof b?e=Of.createError(Of.INVALID_ID):/^_/.test(b)&&!/^_(design|local)/.test(b)&&(e=Of.createError(Of.RESERVED_ID)):e=Of.createError(Of.MISSING_ID);if(e)throw e;};wg.isRemote=function(b){return"boolean"===typeof b._remote?b._remote:"function"===typeof b.type?(AO("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),
"http"===b.type()):!1};wg.listenerCount=function(b,e){return"listenerCount"in b?b.listenerCount(e):vI.listenerCount(b,e)};wg.nextTick=k5;wg.normalizeDdocFunctionName=function(b){return(b=FZ(b))?b.join("/"):null};wg.once=CZ;wg.parseDdocFunctionName=FZ;wg.parseUri=function(b){b=dla.exec(b);for(var e={},l=14;l--;){var a=l5[l],f=b[l]||"",m=-1!==["user","password"].indexOf(a);e[a]=m?decodeURIComponent(f):f}e.queryKey={};e[l5[12]].replace(cla,function(q,r,u){r&&(e.queryKey[r]=u)});return e};wg.pick=zO;
wg.rev=function(b,e){b=ZD(b);if(!e)return gA.v4().replace(/-/g,"").toLowerCase();delete b._rev_tree;return zC.stringMd5(JSON.stringify(b))};wg.scopeEval=function(b,e){var l=[],a=[],f;for(f in e)e.hasOwnProperty(f)&&(l.push(f),a.push(e[f]));l.push(b);return Function.apply(null,l).apply(null,a)};wg.toPromise=DZ;wg.upsert=GZ;wg.uuid=ela;var m5={};m5=function(){for(var b={},e=0;e<arguments.length;e++){var l=arguments[e],a;for(a in l)fla.call(l,a)&&(b[a]=l[a])}return b};var fla=Object.prototype.hasOwnProperty,
by=m5,n5={};n5=function(b){for(var e=1;e<arguments.length;e++){var l=arguments[e],a;for(a in l)gla.call(l,a)&&(b[a]=l[a])}return b};for(var gla=Object.prototype.hasOwnProperty,hla={},ila=n5,o5=hla=function(){var b=by.apply(null,arguments);return ila(b,{bufferKeys:b.bufferKeys||!1,snapshots:b.snapshots||!1,permanence:b.permanence||!1,seek:b.seek||!1,clear:b.clear||!1,status:b.status||!1,createIfMissing:b.createIfMissing||!1,errorIfExists:b.errorIfExists||!1,deferredOpen:b.deferredOpen||!1,openCallback:b.openCallback||
!1,promises:b.promises||!1,streams:b.streams||!1,encodings:b.encodings||!1,additionalMethods:by(b.additionalMethods)})},Xt=[],rr=[],jla="undefined"!==typeof Uint8Array?Uint8Array:Array,AC=0;64>AC;++AC)Xt[AC]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[AC],rr["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(AC)]=AC;rr[45]=62;rr[95]=63;var wI={byteLength:function(b){b=HZ(b);var e=b[1];return 3*(b[0]+e)/4-e},toByteArray:function(b){var e=HZ(b);var l=
e[0];e=e[1];var a=new jla(3*(l+e)/4-e),f=0,m=0<e?l-4:l,q;for(q=0;q<m;q+=4)l=rr[b.charCodeAt(q)]<<18|rr[b.charCodeAt(q+1)]<<12|rr[b.charCodeAt(q+2)]<<6|rr[b.charCodeAt(q+3)],a[f++]=l>>16&255,a[f++]=l>>8&255,a[f++]=l&255;2===e&&(l=rr[b.charCodeAt(q)]<<2|rr[b.charCodeAt(q+1)]>>4,a[f++]=l&255);1===e&&(l=rr[b.charCodeAt(q)]<<10|rr[b.charCodeAt(q+1)]<<4|rr[b.charCodeAt(q+2)]>>2,a[f++]=l>>8&255,a[f++]=l&255);return a},fromByteArray:function(b){for(var e=b.length,l=e%3,a=[],f=0,m=e-l;f<m;f+=16383)a.push(aba(b,
f,f+16383>m?m:f+16383));1===l?(b=b[e-1],a.push(Xt[b>>2]+Xt[b<<4&63]+"==")):2===l&&(b=(b[e-2]<<8)+b[e-1],a.push(Xt[b>>10]+Xt[b>>4&63]+Xt[b<<2&63]+"="));return a.join("")}},DB={read:function(b,e,l,a,f){var m=8*f-a-1;var q=(1<<m)-1,r=q>>1,u=-7;f=l?f-1:0;var v=l?-1:1,y=b[e+f];f+=v;l=y&(1<<-u)-1;y>>=-u;for(u+=m;0<u;l=256*l+b[e+f],f+=v,u-=8);m=l&(1<<-u)-1;l>>=-u;for(u+=a;0<u;m=256*m+b[e+f],f+=v,u-=8);if(0===l)l=1-r;else{if(l===q)return m?NaN:Infinity*(y?-1:1);m+=Math.pow(2,a);l-=r}return(y?-1:1)*m*Math.pow(2,
l-a)},write:function(b,e,l,a,f,m){var q,r=8*m-f-1,u=(1<<r)-1,v=u>>1,y=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;m=a?0:m-1;var z=a?1:-1,B=0>e||0===e&&0>1/e?1:0;e=Math.abs(e);isNaN(e)||Infinity===e?(e=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),1>e*(q=Math.pow(2,-a))&&(a--,q*=2),e=1<=a+v?e+y/q:e+y*Math.pow(2,1-v),2<=e*q&&(a++,q/=2),a+v>=u?(e=0,a=u):1<=a+v?(e=(e*q-1)*Math.pow(2,f),a+=v):(e=e*Math.pow(2,v-1)*Math.pow(2,f),a=0));for(;8<=f;b[l+m]=e&255,m+=z,e/=256,f-=8);a=a<<f|e;for(r+=f;0<r;b[l+
m]=a&255,m+=z,a/=256,r-=8);b[l+m-z]|=128*B}},p5="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;var q5=Nd;var BO=2147483647;Nd.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),e={foo:function(){return 42}};Object.setPrototypeOf(e,Uint8Array.prototype);Object.setPrototypeOf(b,e);return 42===b.foo()}catch(l){return!1}}();Nd.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(Nd.prototype,"parent",{enumerable:!0,get:function(){if(Nd.isBuffer(this))return this.buffer}});Object.defineProperty(Nd.prototype,"offset",{enumerable:!0,get:function(){if(Nd.isBuffer(this))return this.byteOffset}});Nd.poolSize=8192;Nd.from=function(b,e,l){return IZ(b,e,l)};Object.setPrototypeOf(Nd.prototype,Uint8Array.prototype);Object.setPrototypeOf(Nd,Uint8Array);Nd.alloc=function(b,e,l){LZ(b);b=0>=b?Qv(b):void 0!==e?"string"===typeof l?Qv(b).fill(e,l):Qv(b).fill(e):Qv(b);
return b};Nd.allocUnsafe=function(b){return CO(b)};Nd.allocUnsafeSlow=function(b){return CO(b)};Nd.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==Nd.prototype};Nd.compare=function(b,e){Yt(b,Uint8Array)&&(b=Nd.from(b,b.offset,b.byteLength));Yt(e,Uint8Array)&&(e=Nd.from(e,e.offset,e.byteLength));if(!Nd.isBuffer(b)||!Nd.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===e)return 0;for(var l=b.length,a=e.length,f=0,m=Math.min(l,
a);f<m;++f)if(b[f]!==e[f]){l=b[f];a=e[f];break}return l<a?-1:a<l?1:0};Nd.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};Nd.concat=function(b,e){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return Nd.alloc(0);var l;if(void 0===e)for(l=e=0;l<b.length;++l)e+=b[l].length;
e=Nd.allocUnsafe(e);var a=0;for(l=0;l<b.length;++l){var f=b[l];if(Yt(f,Uint8Array))a+f.length>e.length?Nd.from(f).copy(e,a):Uint8Array.prototype.set.call(e,f,a);else if(Nd.isBuffer(f))f.copy(e,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=f.length}return e};Nd.byteLength=JZ;Nd.prototype._isBuffer=!0;Nd.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<b;e+=2)wz(this,e,e+1);return this};
Nd.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<b;e+=4)wz(this,e,e+3),wz(this,e+1,e+2);return this};Nd.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<b;e+=8)wz(this,e,e+7),wz(this,e+1,e+6),wz(this,e+2,e+5),wz(this,e+3,e+4);return this};Nd.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?
NZ(this,0,b):cba.apply(this,arguments)};Nd.prototype.toLocaleString=Nd.prototype.toString;Nd.prototype.equals=function(b){if(!Nd.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===Nd.compare(this,b)};Nd.prototype.inspect=function(){var b=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim();50<this.length&&(b+=" ... ");return"<Buffer "+b+">"};p5&&(Nd.prototype[p5]=Nd.prototype.inspect);Nd.prototype.compare=function(b,e,l,a,f){Yt(b,Uint8Array)&&(b=Nd.from(b,b.offset,
b.byteLength));if(!Nd.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===e&&(e=0);void 0===l&&(l=b?b.length:0);void 0===a&&(a=0);void 0===f&&(f=this.length);if(0>e||l>b.length||0>a||f>this.length)throw new RangeError("out of range index");if(a>=f&&e>=l)return 0;if(a>=f)return-1;if(e>=l)return 1;e>>>=0;l>>>=0;a>>>=0;f>>>=0;if(this===b)return 0;var m=f-a,q=l-e,r=Math.min(m,q);a=this.slice(a,f);b=b.slice(e,l);for(e=0;e<
r;++e)if(a[e]!==b[e]){m=a[e];q=b[e];break}return m<q?-1:q<m?1:0};Nd.prototype.includes=function(b,e,l){return-1!==this.indexOf(b,e,l)};Nd.prototype.indexOf=function(b,e,l){return OZ(this,b,e,l,!0)};Nd.prototype.lastIndexOf=function(b,e,l){return OZ(this,b,e,l,!1)};Nd.prototype.write=function(b,e,l,a){if(void 0===e)a="utf8",l=this.length,e=0;else if(void 0===l&&"string"===typeof e)a=e,l=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(l)?(l>>>=0,void 0===a&&(a="utf8")):(a=l,l=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var f=this.length-e;if(void 0===l||l>f)l=f;if(0<b.length&&(0>l||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(f=!1;;)switch(a){case "hex":a:{e=Number(e)||0;a=this.length-e;l?(l=Number(l),l>a&&(l=a)):l=a;a=b.length;l>a/2&&(l=a/2);for(a=0;a<l;++a){f=parseInt(b.substr(2*a,2),16);if(f!==f){b=a;break a}this[e+a]=f}b=a}return b;case "utf8":case "utf-8":return xI(FO(b,this.length-e),this,e,l);case "ascii":case "latin1":case "binary":a=[];for(f=0;f<b.length;++f)a.push(b.charCodeAt(f)&
255);return xI(a,this,e,l);case "base64":return xI(wI.toByteArray(MZ(b)),this,e,l);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=b;f=this.length-e;for(var m=[],q=0;q<a.length&&!(0>(f-=2));++q){var r=a.charCodeAt(q);b=r>>8;r%=256;m.push(r);m.push(b)}return xI(m,this,e,l);default:if(f)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();f=!0}};Nd.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var QZ=4096;Nd.prototype.slice=
function(b,e){var l=this.length;b=~~b;e=void 0===e?l:~~e;0>b?(b+=l,0>b&&(b=0)):b>l&&(b=l);0>e?(e+=l,0>e&&(e=0)):e>l&&(e=l);e<b&&(e=b);b=this.subarray(b,e);Object.setPrototypeOf(b,Nd.prototype);return b};Nd.prototype.readUintLE=Nd.prototype.readUIntLE=function(b,e,l){b>>>=0;e>>>=0;l||im(b,e,this.length);l=this[b];for(var a=1,f=0;++f<e&&(a*=256);)l+=this[b+f]*a;return l};Nd.prototype.readUintBE=Nd.prototype.readUIntBE=function(b,e,l){b>>>=0;e>>>=0;l||im(b,e,this.length);l=this[b+--e];for(var a=1;0<
e&&(a*=256);)l+=this[b+--e]*a;return l};Nd.prototype.readUint8=Nd.prototype.readUInt8=function(b,e){b>>>=0;e||im(b,1,this.length);return this[b]};Nd.prototype.readUint16LE=Nd.prototype.readUInt16LE=function(b,e){b>>>=0;e||im(b,2,this.length);return this[b]|this[b+1]<<8};Nd.prototype.readUint16BE=Nd.prototype.readUInt16BE=function(b,e){b>>>=0;e||im(b,2,this.length);return this[b]<<8|this[b+1]};Nd.prototype.readUint32LE=Nd.prototype.readUInt32LE=function(b,e){b>>>=0;e||im(b,4,this.length);return(this[b]|
this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};Nd.prototype.readUint32BE=Nd.prototype.readUInt32BE=function(b,e){b>>>=0;e||im(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};Nd.prototype.readIntLE=function(b,e,l){b>>>=0;e>>>=0;l||im(b,e,this.length);l=this[b];for(var a=1,f=0;++f<e&&(a*=256);)l+=this[b+f]*a;l>=128*a&&(l-=Math.pow(2,8*e));return l};Nd.prototype.readIntBE=function(b,e,l){b>>>=0;e>>>=0;l||im(b,e,this.length);l=e;for(var a=1,f=this[b+--l];0<l&&(a*=256);)f+=
this[b+--l]*a;f>=128*a&&(f-=Math.pow(2,8*e));return f};Nd.prototype.readInt8=function(b,e){b>>>=0;e||im(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};Nd.prototype.readInt16LE=function(b,e){b>>>=0;e||im(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};Nd.prototype.readInt16BE=function(b,e){b>>>=0;e||im(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};Nd.prototype.readInt32LE=function(b,e){b>>>=0;e||im(b,4,this.length);return this[b]|this[b+
1]<<8|this[b+2]<<16|this[b+3]<<24};Nd.prototype.readInt32BE=function(b,e){b>>>=0;e||im(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};Nd.prototype.readFloatLE=function(b,e){b>>>=0;e||im(b,4,this.length);return DB.read(this,b,!0,23,4)};Nd.prototype.readFloatBE=function(b,e){b>>>=0;e||im(b,4,this.length);return DB.read(this,b,!1,23,4)};Nd.prototype.readDoubleLE=function(b,e){b>>>=0;e||im(b,8,this.length);return DB.read(this,b,!0,52,8)};Nd.prototype.readDoubleBE=function(b,
e){b>>>=0;e||im(b,8,this.length);return DB.read(this,b,!1,52,8)};Nd.prototype.writeUintLE=Nd.prototype.writeUIntLE=function(b,e,l,a){b=+b;e>>>=0;l>>>=0;a||Jo(this,b,e,l,Math.pow(2,8*l)-1,0);a=1;var f=0;for(this[e]=b&255;++f<l&&(a*=256);)this[e+f]=b/a&255;return e+l};Nd.prototype.writeUintBE=Nd.prototype.writeUIntBE=function(b,e,l,a){b=+b;e>>>=0;l>>>=0;a||Jo(this,b,e,l,Math.pow(2,8*l)-1,0);a=l-1;var f=1;for(this[e+a]=b&255;0<=--a&&(f*=256);)this[e+a]=b/f&255;return e+l};Nd.prototype.writeUint8=Nd.prototype.writeUInt8=
function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,1,255,0);this[e]=b&255;return e+1};Nd.prototype.writeUint16LE=Nd.prototype.writeUInt16LE=function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,2,65535,0);this[e]=b&255;this[e+1]=b>>>8;return e+2};Nd.prototype.writeUint16BE=Nd.prototype.writeUInt16BE=function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,2,65535,0);this[e]=b>>>8;this[e+1]=b&255;return e+2};Nd.prototype.writeUint32LE=Nd.prototype.writeUInt32LE=function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,4,4294967295,0);this[e+3]=
b>>>24;this[e+2]=b>>>16;this[e+1]=b>>>8;this[e]=b&255;return e+4};Nd.prototype.writeUint32BE=Nd.prototype.writeUInt32BE=function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,4,4294967295,0);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};Nd.prototype.writeIntLE=function(b,e,l,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*l-1),Jo(this,b,e,l,a-1,-a));a=0;var f=1,m=0;for(this[e]=b&255;++a<l&&(f*=256);)0>b&&0===m&&0!==this[e+a-1]&&(m=1),this[e+a]=(b/f>>0)-m&255;return e+l};Nd.prototype.writeIntBE=
function(b,e,l,a){b=+b;e>>>=0;a||(a=Math.pow(2,8*l-1),Jo(this,b,e,l,a-1,-a));a=l-1;var f=1,m=0;for(this[e+a]=b&255;0<=--a&&(f*=256);)0>b&&0===m&&0!==this[e+a+1]&&(m=1),this[e+a]=(b/f>>0)-m&255;return e+l};Nd.prototype.writeInt8=function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,1,127,-128);0>b&&(b=255+b+1);this[e]=b&255;return e+1};Nd.prototype.writeInt16LE=function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,2,32767,-32768);this[e]=b&255;this[e+1]=b>>>8;return e+2};Nd.prototype.writeInt16BE=function(b,e,l){b=+b;e>>>=
0;l||Jo(this,b,e,2,32767,-32768);this[e]=b>>>8;this[e+1]=b&255;return e+2};Nd.prototype.writeInt32LE=function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,4,2147483647,-2147483648);this[e]=b&255;this[e+1]=b>>>8;this[e+2]=b>>>16;this[e+3]=b>>>24;return e+4};Nd.prototype.writeInt32BE=function(b,e,l){b=+b;e>>>=0;l||Jo(this,b,e,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[e]=b>>>24;this[e+1]=b>>>16;this[e+2]=b>>>8;this[e+3]=b&255;return e+4};Nd.prototype.writeFloatLE=function(b,e,l){return SZ(this,b,e,
!0,l)};Nd.prototype.writeFloatBE=function(b,e,l){return SZ(this,b,e,!1,l)};Nd.prototype.writeDoubleLE=function(b,e,l){return TZ(this,b,e,!0,l)};Nd.prototype.writeDoubleBE=function(b,e,l){return TZ(this,b,e,!1,l)};Nd.prototype.copy=function(b,e,l,a){if(!Nd.isBuffer(b))throw new TypeError("argument should be a Buffer");l||(l=0);a||0===a||(a=this.length);e>=b.length&&(e=b.length);e||(e=0);0<a&&a<l&&(a=l);if(a===l||0===b.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");
if(0>l||l>=this.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length);b.length-e<a-l&&(a=b.length-e+l);var f=a-l;this===b&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,l,a):Uint8Array.prototype.set.call(b,this.subarray(l,a),e);return f};Nd.prototype.fill=function(b,e,l,a){if("string"===typeof b){"string"===typeof e?(a=e,e=0,l=this.length):"string"===typeof l&&(a=l,l=this.length);if(void 0!==
a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!Nd.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===b.length){var f=b.charCodeAt(0);if("utf8"===a&&128>f||"latin1"===a)b=f}}else"number"===typeof b?b&=255:"boolean"===typeof b&&(b=Number(b));if(0>e||this.length<e||this.length<l)throw new RangeError("Out of range index");if(l<=e)return this;e>>>=0;l=void 0===l?this.length:l>>>0;b||(b=0);if("number"===typeof b)for(a=e;a<l;++a)this[a]=b;else{f=
Nd.isBuffer(b)?b:Nd.from(b,a);var m=f.length;if(0===m)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(a=0;a<l-e;++a)this[a+e]=f[a%m]}return this};var eba=/[^+/0-9A-Za-z-_]/g,dba=function(){for(var b=Array(256),e=0;16>e;++e)for(var l=16*e,a=0;16>a;++a)b[l+a]="0123456789abcdef"[e]+"0123456789abcdef"[a];return b}(),Rv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,kla={};zx.prototype.next=function(b){var e=this||Rv;if("function"!==typeof b)throw Error("next() requires a callback argument");
if(e._ended)return si(b,Error("cannot call next() after end()")),e;if(e._nexting)return si(b,Error("cannot call next() before previous next() has completed")),e;e._nexting=!0;e._next(function(){e._nexting=!1;b.apply(null,arguments)});return e};zx.prototype._next=function(b){si(b)};zx.prototype.seek=function(b){if((this||Rv)._ended)throw Error("cannot call seek() after end()");if((this||Rv)._nexting)throw Error("cannot call seek() before next() has completed");b=(this||Rv).db._serializeKey(b);this._seek(b)};
zx.prototype._seek=function(b){};zx.prototype.end=function(b){if("function"!==typeof b)throw Error("end() requires a callback argument");if((this||Rv)._ended)return si(b,Error("end() already called on iterator"));(this||Rv)._ended=!0;this._end(b)};zx.prototype._end=function(b){si(b)};zx.prototype._nextTick=si;var r5=kla=zx,Dl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,lla={};ns.prototype._checkWritten=function(){if((this||Dl)._written)throw Error("write() already called on this batch");
};ns.prototype.put=function(b,e){this._checkWritten();var l=(this||Dl).db._checkKey(b)||(this||Dl).db._checkValue(e);if(l)throw l;b=(this||Dl).db._serializeKey(b);e=(this||Dl).db._serializeValue(e);this._put(b,e);return this||Dl};ns.prototype._put=function(b,e){(this||Dl)._operations.push({type:"put",key:b,value:e})};ns.prototype.del=function(b){this._checkWritten();var e=(this||Dl).db._checkKey(b);if(e)throw e;b=(this||Dl).db._serializeKey(b);this._del(b);return this||Dl};ns.prototype._del=function(b){(this||
Dl)._operations.push({type:"del",key:b})};ns.prototype.clear=function(){this._checkWritten();this._clear();return this||Dl};ns.prototype._clear=function(){(this||Dl)._operations=[]};ns.prototype.write=function(b,e){this._checkWritten();"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("write() requires a callback argument");if("object"!==typeof b||null===b)b={};(this||Dl)._written=!0;this._write(b,e)};ns.prototype._write=function(b,e){(this||Dl).db._batch((this||Dl)._operations,b,
e)};ns.prototype._nextTick=si;var mla=lla=ns,Ap="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,s5={},fba=o5,gba=Object.prototype.hasOwnProperty,hba="start end gt gte lt lte".split(" ");Yj.prototype.open=function(b,e){var l=this||Ap,a=(this||Ap).status;"function"===typeof b&&(e=b);if("function"!==typeof e)throw Error("open() requires a callback argument");if("object"!==typeof b||null===b)b={};b.createIfMissing=!1!==b.createIfMissing;b.errorIfExists=!!b.errorIfExists;
(this||Ap).status="opening";this._open(b,function(f){if(f)return l.status=a,e(f);l.status="open";e()})};Yj.prototype._open=function(b,e){si(e)};Yj.prototype.close=function(b){var e=this||Ap,l=(this||Ap).status;if("function"!==typeof b)throw Error("close() requires a callback argument");(this||Ap).status="closing";this._close(function(a){if(a)return e.status=l,b(a);e.status="closed";b()})};Yj.prototype._close=function(b){si(b)};Yj.prototype.get=function(b,e,l){"function"===typeof e&&(l=e);if("function"!==
typeof l)throw Error("get() requires a callback argument");var a=this._checkKey(b);if(a)return si(l,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};e.asBuffer=!1!==e.asBuffer;this._get(b,e,l)};Yj.prototype._get=function(b,e,l){si(function(){l(Error("NotFound"))})};Yj.prototype.put=function(b,e,l,a){"function"===typeof l&&(a=l);if("function"!==typeof a)throw Error("put() requires a callback argument");var f=this._checkKey(b)||this._checkValue(e);if(f)return si(a,f);b=this._serializeKey(b);
e=this._serializeValue(e);if("object"!==typeof l||null===l)l={};this._put(b,e,l,a)};Yj.prototype._put=function(b,e,l,a){si(a)};Yj.prototype.del=function(b,e,l){"function"===typeof e&&(l=e);if("function"!==typeof l)throw Error("del() requires a callback argument");var a=this._checkKey(b);if(a)return si(l,a);b=this._serializeKey(b);if("object"!==typeof e||null===e)e={};this._del(b,e,l)};Yj.prototype._del=function(b,e,l){si(l)};Yj.prototype.batch=function(b,e,l){if(!arguments.length)return this._chainedBatch();
"function"===typeof e&&(l=e);"function"===typeof b&&(l=b);if("function"!==typeof l)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return si(l,Error("batch(array) requires an array argument"));if(0===b.length)return si(l);if("object"!==typeof e||null===e)e={};for(var a=Array(b.length),f=0;f<b.length;f++){if("object"!==typeof b[f]||null===b[f])return si(l,Error("batch(array) element must be an object and not `null`"));var m=by(b[f]);if("put"!==m.type&&"del"!==m.type)return si(l,
Error("`type` must be 'put' or 'del'"));var q=this._checkKey(m.key);if(q)return si(l,q);m.key=this._serializeKey(m.key);if("put"===m.type){if(q=this._checkValue(m.value))return si(l,q);m.value=this._serializeValue(m.value)}a[f]=m}this._batch(a,e,l)};Yj.prototype._batch=function(b,e,l){si(l)};Yj.prototype.clear=function(b,e){if("function"===typeof b)e=b;else if("function"!==typeof e)throw Error("clear() requires a callback argument");b=UZ(this||Ap,b);b.reverse=!!b.reverse;b.limit="limit"in b?b.limit:
-1;this._clear(b,e)};Yj.prototype._clear=function(b,e){b.keys=!0;b.values=!1;b.keyAsBuffer=!0;b.valueAsBuffer=!0;var l=this._iterator(b),a={},f=this||Ap,m=function(q){if(q)return l.end(function(){e(q)});l.next(function(r,u){if(r)return m(r);if(void 0===u)return l.end(e);f._del(u,a,m)})};m()};Yj.prototype._setupIteratorOptions=function(b){b=UZ(this||Ap,b);b.reverse=!!b.reverse;b.keys=!1!==b.keys;b.values=!1!==b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=!1!==b.keyAsBuffer;b.valueAsBuffer=
!1!==b.valueAsBuffer;return b};Yj.prototype.iterator=function(b){if("object"!==typeof b||null===b)b={};b=this._setupIteratorOptions(b);return this._iterator(b)};Yj.prototype._iterator=function(b){return new r5(this||Ap)};Yj.prototype._chainedBatch=function(){return new mla(this||Ap)};Yj.prototype._serializeKey=function(b){return b};Yj.prototype._serializeValue=function(b){return b};Yj.prototype._checkKey=function(b){if(null===b||void 0===b)return Error("key cannot be `null` or `undefined`");if(q5.isBuffer(b)&&
0===b.length)return Error("key cannot be an empty Buffer");if(""===b)return Error("key cannot be an empty String");if(Array.isArray(b)&&0===b.length)return Error("key cannot be an empty Array")};Yj.prototype._checkValue=function(b){if(null===b||void 0===b)return Error("value cannot be `null` or `undefined`")};Yj.prototype._nextTick=si;s5=Yj;var nla=s5;var os="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,t5={},VZ=r5;Rj(EB,VZ);EB.prototype.setDb=function(b){var e=
(this||os)._iterator=b.iterator((this||os)._options);(this||os)._operations.forEach(function(l){e[l.method].apply(e,l.args)})};EB.prototype._operation=function(b,e){if((this||os)._iterator)return(this||os)._iterator[b].apply((this||os)._iterator,e);(this||os)._operations.push({method:b,args:e})};["next","end"].forEach(function(b){EB.prototype["_"+b]=function(){this._operation(b,arguments)}});EB.prototype.seek=function(){this._operation("seek",arguments)};t5=EB;var jm="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,uS={},WZ=nla,ZZ=t5,YZ=["put","get","del","batch","clear"],iba=["approximateSize","compactRange"];Rj(xz,WZ);xz.prototype.type="deferred-leveldown";xz.prototype._open=function(b,e){var l=this||jm;(this||jm)._db.open(b,function(a){if(a)return e(a);l._operations.forEach(function(f){f.iterator?f.iterator.setDb(l._db):l._db[f.method].apply(l._db,f.args)});l._operations=[];jba(l);e()})};xz.prototype._close=function(b){var e=this||jm;(this||jm)._db.close(function(l){if(l)return b(l);
XZ(e);b()})};xz.prototype._serializeKey=function(b){return b};xz.prototype._serializeValue=function(b){return b};uS=xz;uS.DeferredIterator=ZZ;var ola=uS,b_={},a_=!1,GO={},c_=!1,IO="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pla={},vba=pla=function(b,e){if(HO("noDeprecation"))return b;var l=!1;return function(){if(!l){if(HO("throwDeprecation"))throw Error(e);HO("traceDeprecation")?console.trace(e):console.warn(e);l=!0}return b.apply(this||IO,arguments)}},lL={},
mL=eh,Zt=mL.Buffer;Zt.from&&Zt.alloc&&Zt.allocUnsafe&&Zt.allocUnsafeSlow?lL=mL:(d_(mL,lL),lL.Buffer=yz);yz.prototype=Object.create(Zt.prototype);d_(Zt,yz);yz.from=function(b,e,l){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Zt(b,e,l)};yz.alloc=function(b,e,l){if("number"!==typeof b)throw new TypeError("Argument must be a number");b=Zt(b);void 0!==e?"string"===typeof l?b.fill(e,l):b.fill(e):b.fill(0);return b};yz.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");
return Zt(b)};yz.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return mL.SlowBuffer(b)};var OO={},JO=lL.Buffer,e_=JO.isEncoding||function(b){b=""+b;switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};OO.StringDecoder=$D;$D.prototype.write=function(b){if(0===b.length)return"";if(this.lastNeed){var e=
this.fillLast(b);if(void 0===e)return"";var l=this.lastNeed;this.lastNeed=0}else l=0;return l<b.length?e?e+this.text(b,l):this.text(b,l):e||""};$D.prototype.end=function(b){b=b&&b.length?this.write(b):"";return this.lastNeed?b+"\ufffd":b};$D.prototype.text=function(b,e){var l=sba(this,b,e);if(!this.lastNeed)return b.toString("utf8",e);this.lastTotal=l;l=b.length-(l-this.lastNeed);b.copy(this.lastChar,0,l);return b.toString("utf8",e,l)};$D.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,
this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length);this.lastNeed-=b.length};var g_={},f_=!1,i_={},h_=!1,l_=Object.freeze({}),k_={},j_=!1,o_={},n_=!1,r_={},q_=!1,MO={},t_=!1,wba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,NO={},u_=!1,x_={},w_=!1,PO={},y_=!1,yba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,QO={},A_=!1,
vS={},u5=!1,v5={},w5=!1,Op={},x5=!1;x5||(x5=!0,Op=Op=v_(),Op.Stream=Op,Op.Readable=Op,Op.Writable=s_(),Op.Duplex=GB(),Op.Transform=z_(),Op.PassThrough=function(){function b(l){if(!(this instanceof b))return new b(l);e.call(this,l)}if(u5)return vS;u5=!0;vS=b;var e=z_();Rj(b,e);b.prototype._transform=function(l,a,f){f(null,l)};return vS}(),Op.finished=LO(),Op.pipeline=function(){function b(v){var y=!1;return function(){y||(y=!0,v.apply(void 0,arguments))}}function e(v){if(v)throw v;}function l(v,y,
z,B){B=b(B);var C=!1;v.on("close",function(){C=!0});void 0===m&&(m=LO());m(v,{readable:y,writable:z},function(F){if(F)return B(F);C=!0;B()});var G=!1;return function(F){if(!C&&!G){G=!0;if(v.setHeader&&"function"===typeof v.abort)return v.abort();if("function"===typeof v.destroy)return v.destroy();B(F||new u("pipe"))}}}function a(v){v()}function f(v,y){return v.pipe(y)}if(w5)return v5;w5=!0;var m,q=FB().codes,r=q.ERR_MISSING_ARGS,u=q.ERR_STREAM_DESTROYED;return v5=function(){for(var v=arguments.length,
y=Array(v),z=0;z<v;z++)y[z]=arguments[z];var B=y.length?"function"!==typeof y[y.length-1]?e:y.pop():e;Array.isArray(y[0])&&(y=y[0]);if(2>y.length)throw new r("streams");var C,G=y.map(function(F,N){var L=N<y.length-1;return l(F,L,0<N,function(S){C||(C=S);S&&G.forEach(a);L||(G.forEach(a),B(C))})});return y.reduce(f)}}());var y5=Op;var ps="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,z5={},qla=Rj,B_=y5.Readable,zba=by;z5=HB;qla(HB,B_);HB.prototype._read=function(){var b=
this||ps,e=(this||ps)._options;(this||ps).destroyed||(this||ps)._iterator.next(function(l,a,f){if(!b.destroyed){if(l)return b.destroy(l);void 0===a&&void 0===f?b.push(null):!1!==e.keys&&!1===e.values?b.push(a):!1===e.keys&&!1!==e.values?b.push(f):b.push({key:a,value:f})}})};HB.prototype._destroy=function(b,e){(this||ps)._iterator.end(function(l){e(b||l)})};var rla=z5,nL={};(function(b,e,l){nL?nL=l():e[b]=l()})("prr",nL,function(){var b="function"==typeof Object.defineProperty?function(l,a,f){Object.defineProperty(l,
a,f);return l}:function(l,a,f){l[a]=f.value;return l},e=function(l,a){var f="object"==typeof a,m=!f&&"string"==typeof a,q=function(r){return f?!!a[r]:m?-1<a.indexOf(r[0]):!1};return{enumerable:q("enumerable"),configurable:q("configurable"),writable:q("writable"),value:l}};return function(l,a,f,m){var q;m=e(f,m);if("object"==typeof a){for(q in a)Object.hasOwnProperty.call(a,q)&&(m.value=a[q],b(l,q,m));return l}return b(l,a,m)}});var Vk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,sla={},Aba=nL;RO.prototype=Error();var tla=sla=function(b){var e=function(l,a){return Bba(b,l,a)};return{CustomError:RO,FilesystemError:e("FilesystemError"),createError:e}},zu={},ula=zu.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},
{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},
{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},
{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",
description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},
{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},
{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},
{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];zu.errno={};zu.code={};ula.forEach(function(b){zu.errno[b.errno]=b;zu.code[b.code]=b});zu.custom=tla(zu);
zu.create=zu.custom.createError;var vla={},hA=zu.create,iA=hA("LevelUPError"),wS=hA("NotFoundError",iA);wS.prototype.notFound=!0;wS.prototype.status=404;var jA=vla={LevelUPError:iA,InitializationError:hA("InitializationError",iA),OpenError:hA("OpenError",iA),ReadError:hA("ReadError",iA),WriteError:hA("WriteError",iA),NotFoundError:wS,EncodingError:hA("EncodingError",iA)},wla={},cy=wla=function(){var b,e=new Promise(function(l,a){b=function(f,m){f?a(f):l(m)}});b.promise=e;return b};var BC=function(b,
e){return"function"===typeof b?b:e};var A5=function(b){return"object"===typeof b&&null!==b?b:{}};var Wk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,xla={},FF=jA.WriteError;aE.prototype.put=function(b,e){try{(this||Wk).batch.put(b,e)}catch(l){throw new FF(l);}(this||Wk).ops.push({type:"put",key:b,value:e});(this||Wk).length++;return this||Wk};aE.prototype.del=function(b){try{(this||Wk).batch.del(b)}catch(e){throw new FF(e);}(this||Wk).ops.push({type:"del",key:b});
(this||Wk).length++;return this||Wk};aE.prototype.clear=function(){try{(this||Wk).batch.clear()}catch(b){throw new FF(b);}(this||Wk).ops=[];(this||Wk).length=0;return this||Wk};aE.prototype.write=function(b,e){var l=(this||Wk)._levelup,a=(this||Wk).ops;e=BC(b,e);if(!e){e=cy();var f=e.promise}b=A5(b);try{(this||Wk).batch.write(b,function(m){if(m)return e(new FF(m));l.emit("batch",a);e()})}catch(m){throw new FF(m);}return f};var yla=xla=aE,Nba={assign:D_,polyfill:function(){Object.assign||Object.defineProperty(Object,
"assign",{enumerable:!1,configurable:!0,writable:!0,value:D_})}},B5=Object.prototype.toString,C5=function(b){var e=B5.call(b),l="[object Arguments]"===e;return l||(l="[object Array]"!==e&&null!==b&&"object"==typeof b&&"number"==typeof b.length&&0<=b.length&&"[object Function]"===B5.call(b.callee)),l};if(!Object.keys){var oL=Object.prototype.hasOwnProperty,D5=Object.prototype.toString,E5=Object.prototype.propertyIsEnumerable,zla=!E5.call({toString:null},"toString"),Ala=E5.call(function(){},"prototype"),
pL="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),xS=function(b){var e=b.constructor;return e&&e.prototype===b},Bla={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,
$window:!0},Cla=function(){if("undefined"==typeof window)return!1;for(var b in window)try{if(!Bla["$"+b]&&oL.call(window,b)&&null!==window[b]&&"object"==typeof window[b])try{xS(window[b])}catch(e){return!0}}catch(e){return!0}return!1}();var Dla=function(b){var e=null!==b&&"object"==typeof b,l="[object Function]"===D5.call(b),a=C5(b),f=e&&"[object String]"===D5.call(b),m=[];if(!e&&!l&&!a)throw new TypeError("Object.keys called on a non-object");e=Ala&&l;if(f&&0<b.length&&!oL.call(b,0))for(f=0;f<b.length;++f)m.push(String(f));
if(a&&0<b.length)for(a=0;a<b.length;++a)m.push(String(a));else for(var q in b)e&&"prototype"===q||!oL.call(b,q)||m.push(String(q));if(zla){if("undefined"!=typeof window&&Cla)try{var r=xS(b)}catch(u){r=!1}else r=xS(b);for(a=0;a<pL.length;++a)r&&"constructor"===pL[a]||!oL.call(b,pL[a])||m.push(pL[a])}return m}}var Ela=Dla,Fla=Array.prototype.slice,F5=Object.keys,qL=F5?function(b){return F5(b)}:Ela,G5=Object.keys;qL.shim=function(){Object.keys?function(){var b=Object.keys(arguments);return b&&b.length===
arguments.length}(1,2)||(Object.keys=function(b){return C5(b)?G5(Fla.call(b)):G5(b)}):Object.keys=qL;return Object.keys||qL};var Gla="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Hla=Object.prototype.toString,Ila=Array.prototype.concat,yS=Object.defineProperty,H5=yS&&function(){var b={};try{for(var e in yS(b,"x",{enumerable:!1,value:b}),b)return!1;return b.x===b}catch(l){return!1}}(),GF=function(b,e){var l=2<arguments.length?arguments[2]:{},a=qL(e);Gla&&(a=Ila.call(a,Object.getOwnPropertySymbols(e)));
for(var f=0;f<a.length;f+=1){var m=void 0,q=b,r=a[f],u=e[a[f]],v=l[a[f]];(!(r in q)||"function"==typeof(m=v)&&"[object Function]"===Hla.call(m)&&v())&&(H5?yS(q,r,{configurable:!0,enumerable:!1,value:u,writable:!0}):q[r]=u)}};GF.supportsDescriptors=!!H5;var I5=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:global).Symbol,Jla=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var b=
{},e=Symbol("test"),l=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(l))return!1;for(e in b[e]=42,b)return!1;if("function"==typeof Object.keys&&0!==Object.keys(b).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(b).length)return!1;l=Object.getOwnPropertySymbols(b);return 1!==l.length||l[0]!==e||!Object.prototype.propertyIsEnumerable.call(b,e)||"function"==typeof Object.getOwnPropertyDescriptor&&
(b=Object.getOwnPropertyDescriptor(b,e),42!==b.value||!0!==b.enumerable)?!1:!0},zS=Array.prototype.slice,Kla=Object.prototype.toString,Lla=function(b){var e=this;if("function"!=typeof e||"[object Function]"!==Kla.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var l,a=zS.call(arguments,1),f=Math.max(0,e.length-a.length),m=[],q=0;q<f;q++)m.push("$"+q);if(l=Function("binder","return function ("+m.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof
l){var r=e.apply(this,a.concat(zS.call(arguments)));return Object(r)===r?r:this}return e.apply(b,a.concat(zS.call(arguments)))}),e.prototype)f=function(){},f.prototype=e.prototype,l.prototype=new f,f.prototype=null;return l},AS=Function.prototype.bind||Lla,HF=TypeError,kA=Object.getOwnPropertyDescriptor;if(kA)try{kA({},"")}catch(b){kA=null}var BS=function(){throw new HF;},Mla=kA?function(){try{return arguments.callee,BS}catch(b){try{return kA(arguments,"callee").get}catch(e){return BS}}}():BS,lA=
"function"==typeof I5&&"function"==typeof Symbol&&"symbol"==typeof I5("foo")&&"symbol"==typeof Symbol("bar")&&Jla(),mA=Object.getPrototypeOf||function(b){return b.__proto__},CS="undefined"==typeof Uint8Array?void 0:mA(Uint8Array),DS={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":lA?mA([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,
"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,
"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:
Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==
typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":lA?mA(mA([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==
typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&lA?mA((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==
typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,
"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&lA?mA((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==
typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":lA?mA(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":lA?Symbol:void 0,"%SymbolPrototype%":lA?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":Mla,"%TypedArray%":CS,"%TypedArrayPrototype%":CS?CS.prototype:void 0,"%TypeError%":HF,"%TypeErrorPrototype%":HF.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?
void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,
"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},J5=AS.call(Function.call,String.prototype.replace),Nla=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,
Ola=/\\(\\)?/g,Pla=function(b){var e=[];return J5(b,Nla,function(l,a,f,m){e[e.length]=f?J5(m,Ola,"$1"):a||l}),e},K5,L5=function(b,e){if("string"!=typeof b||0===b.length)throw new TypeError("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var l=Pla(b);var a="%"+(0<l.length?l[0]:"")+"%";if(!(a in DS))throw new SyntaxError("intrinsic "+a+" does not exist!");if(void 0===DS[a]&&!e)throw new HF("intrinsic "+
a+" exists, but is not available. Please file an issue!");a=DS[a];for(var f=1;f<l.length;f+=1)if(null!=a)if(kA&&f+1>=l.length){var m=kA(a,l[f]);if(!(e||l[f]in a))throw new HF("base intrinsic for "+b+" exists, but the property is not available.");a=m?m.get||m.value:a[l[f]]}else a=a[l[f]];return a}("%Function%"),Qla=L5.apply,Rla=L5.call;(K5=function(){return AS.apply(Rla,arguments)}).apply=function(){return AS.apply(Qla,arguments)};var ES,rL,Sla=(ES=function(b,e){return 0===b&&0===e?1/b==1/e:b===e||
!(b==b||e==e)},ES),Tla=(rL=function(){return"function"==typeof Object.is?Object.is:Sla},rL),M5=K5(rL(),Object);GF(M5,{getPolyfill:rL,implementation:ES,shim:function(){var b=Tla();return GF(Object,{is:b},{is:function(){return Object.is!==b}}),b}});var Z_=M5;var N5=function(b){return b!=b};var sL,Ula=N5,Vla=(sL=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:Ula},GF),Wla=N5,O5=sL();GF(O5,{getPolyfill:sL,implementation:Wla,shim:function(){var b=sL();return Vla(Number,
{isNaN:b},{isNaN:function(){return Number.isNaN!==b}}),b}});var SO={},F_=!1,H_={},G_=!1,Eba=void 0!==/a/g.flags,DI=function(b){var e=[];return b.forEach(function(l){return e.push(l)}),e},W_=function(b){var e=[];return b.forEach(function(l,a){return e.push([a,l])}),e},K_=Object.is?Object.is:Z_,zI=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},VO=Number.isNaN?Number.isNaN:O5,cE=UO(Object.prototype.hasOwnProperty),CI=UO(Object.prototype.propertyIsEnumerable),L_=UO(Object.prototype.toString),
Yn=Sg.types,Jba=Yn.isAnyArrayBuffer,Gba=Yn.isArrayBufferView,M_=Yn.isDate,AI=Yn.isMap,N_=Yn.isRegExp,BI=Yn.isSet,Fba=Yn.isNativeError,Kba=Yn.isBoxedPrimitive,O_=Yn.isNumberObject,P_=Yn.isStringObject,Q_=Yn.isBooleanObject,R_=Yn.isBigIntObject,Lba=Yn.isSymbolObject,Hba=Yn.isFloat32Array,Iba=Yn.isFloat64Array,X_={isDeepEqual:function(b,e){return Yq(b,e,!1)},isDeepStrictEqual:function(b,e){return Yq(b,e,!0)}},WO={},Y_=!1,Xla=TO(),sh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?
self:global,Yla={},FI=Qh,EI=Qt.EventEmitter,Zla=Sg.inherits,$_=ola,Qba=o5,Pba=Xla,IB=A5,tL=jA.WriteError,a0=jA.ReadError,$la=jA.NotFoundError,ama=jA.OpenError,Oba=jA.InitializationError;yj.prototype.emit=EI.prototype.emit;yj.prototype.once=EI.prototype.once;Zla(yj,EI);yj.prototype.open=function(b,e){var l=this||sh;"function"===typeof b&&(e=b,b=null);if(!e){e=cy();var a=e.promise}b||(b=(this||sh).options);if(this.isOpen())return FI.nextTick(e,null,l),a;if(this._isOpening())return this.once("open",
function(){e(null,l)}),a;this.emit("opening");(this||sh).db.open(b,function(f){if(f)return e(new ama(f));l.db=l._db;e(null,l);l.emit("open");l.emit("ready")});return a};yj.prototype.close=function(b){var e=this||sh;if(!b){b=cy();var l=b.promise}if(this.isOpen())(this||sh).db.close(function(){e.emit("closed");b.apply(null,arguments)}),this.emit("closing"),(this||sh).db=new $_((this||sh)._db);else if(this.isClosed())FI.nextTick(b);else if("closing"===(this||sh).db.status)this.once("closed",b);else if(this._isOpening())this.once("open",
function(){e.close(b)});return l};yj.prototype.isOpen=function(){return"open"===(this||sh).db.status};yj.prototype._isOpening=function(){return"opening"===(this||sh).db.status};yj.prototype.isClosed=function(){return/^clos|new/.test((this||sh).db.status)};yj.prototype.get=function(b,e,l){l=BC(e,l);if(!l){l=cy();var a=l.promise}if(dE(this||sh,l))return a;e=IB(e);(this||sh).db.get(b,e,function(f,m){if(f)return f=/notfound/i.test(f)||f.notFound?new $la("Key not found in database ["+b+"]",f):new a0(f),
l(f);l(null,m)});return a};yj.prototype.put=function(b,e,l,a){var f=this||sh;a=BC(l,a);if(!a){a=cy();var m=a.promise}if(dE(this||sh,a))return m;l=IB(l);(this||sh).db.put(b,e,l,function(q){if(q)return a(new tL(q));f.emit("put",b,e);a()});return m};yj.prototype.del=function(b,e,l){var a=this||sh;l=BC(e,l);if(!l){l=cy();var f=l.promise}if(dE(this||sh,l))return f;e=IB(e);(this||sh).db.del(b,e,function(m){if(m)return l(new tL(m));a.emit("del",b);l()});return f};yj.prototype.batch=function(b,e,l){if(!arguments.length)return new yla(this||
sh);var a=this||sh;l="function"===typeof b?b:BC(e,l);if(!l){l=cy();var f=l.promise}if(dE(this||sh,l))return f;e=IB(e);(this||sh).db.batch(b,e,function(m){if(m)return l(new tL(m));a.emit("batch",b);l()});return f};yj.prototype.iterator=function(b){return(this||sh).db.iterator(b)};yj.prototype.clear=function(b,e){var l=this||sh;e=BC(b,e);b=IB(b);if(!e){e=cy();var a=e.promise}if(dE(this||sh,e))return a;(this||sh).db.clear(b,function(f){if(f)return e(new tL(f));l.emit("clear",b);e()});return a};yj.prototype.readStream=
yj.prototype.createReadStream=function(b){b=by({keys:!0,values:!0},b);"number"!==typeof b.limit&&(b.limit=-1);return new rla((this||sh).db.iterator(b),b)};yj.prototype.keyStream=yj.prototype.createKeyStream=function(b){return this.createReadStream(by(b,{keys:!0,values:!1}))};yj.prototype.valueStream=yj.prototype.createValueStream=function(b){return this.createReadStream(by(b,{keys:!1,values:!0}))};yj.prototype.toString=function(){return"LevelUP"};yj.prototype.type="levelup";yj.errors=jA;var bma=Yla=
yj.default=yj,yk={},cma=eh.Buffer;yk.compare=function(b,e){if(cma.isBuffer(b)){for(var l=Math.min(b.length,e.length),a=0;a<l;a++){var f=b[a]-e[a];if(f)return f}return b.length-e.length}return b<e?-1:b>e?1:0};var dma=yk.lowerBoundKey=function(b){return $t(b,"gt")||$t(b,"gte")||$t(b,"min")||(b.reverse?$t(b,"end"):$t(b,"start"))||void 0},FS=yk.lowerBound=function(b,e){var l=dma(b);return l?b[l]:e},GS=yk.lowerBoundInclusive=function(b){return Object.hasOwnProperty.call(b,"gt")?!1:!0},HS=yk.upperBoundInclusive=
function(b){return Object.hasOwnProperty.call(b,"lt")?!1:!0},ema=yk.lowerBoundExclusive=function(b){return!GS(b)},fma=yk.upperBoundExclusive=function(b){return!HS(b)},gma=yk.upperBoundKey=function(b){return $t(b,"lt")||$t(b,"lte")||$t(b,"max")||(b.reverse?$t(b,"start"):$t(b,"end"))||void 0},IS=yk.upperBound=function(b,e){var l=gma(b);return l?b[l]:e};yk.start=function(b,e){return b.reverse?IS(b,e):FS(b,e)};yk.end=function(b,e){return b.reverse?FS(b,e):IS(b,e)};yk.startInclusive=function(b){return b.reverse?
HS(b):GS(b)};yk.endInclusive=function(b){return b.reverse?GS(b):HS(b)};yk.toLtgt=function(b,e,l,a,f){e=e||{};l=l||Rba;var m=3<arguments.length,q=yk.lowerBoundKey(b),r=yk.upperBoundKey(b);q?"gt"===q?e.gt=l(b.gt,!1):e.gte=l(b[q],!1):m&&(e.gte=l(a,!1));r?"lt"===r?e.lt=l(b.lt,!0):e.lte=l(b[r],!0):m&&(e.lte=l(f,!0));null!=b.reverse&&(e.reverse=!!b.reverse);Object.hasOwnProperty.call(e,"max")&&delete e.max;Object.hasOwnProperty.call(e,"min")&&delete e.min;Object.hasOwnProperty.call(e,"start")&&delete e.start;
Object.hasOwnProperty.call(e,"end")&&delete e.end;return e};yk.contains=function(b,e,l){l=l||yk.compare;var a=FS(b);if(void 0!==a&&""!==a&&(a=l(e,a),0>a||0===a&&ema(b)))return!1;a=IS(b);return void 0!==a&&""!==a&&(a=l(e,a),0<a||0===a&&fma(b))?!1:!0};yk.filter=function(b,e){return function(l){return yk.contains(b,l,e)}};var kw={},YO=q5;kw.utf8=kw["utf-8"]={encode:function(b){return XO(b)?b:String(b)},decode:GI,buffer:!1,type:"utf8"};kw.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};
kw.binary={encode:function(b){return XO(b)?b:YO.from(b)},decode:GI,buffer:!0,type:"binary"};kw.none={encode:GI,decode:GI,buffer:!1,type:"id"};kw.id=kw.none;"hex ascii base64 ucs2 ucs-2 utf16le utf-16le".split(" ").forEach(function(b){kw[b]={encode:function(e){return XO(e)?e:YO.from(e,b)},decode:function(e){return e.toString(b)},buffer:!0,type:b}});var Sv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,P5={},ZO=kw;P5=Qn;Qn.prototype._encoding=function(b){"string"===
typeof b&&(b=ZO[b]);b||(b=ZO.id);return b};Qn.prototype._keyEncoding=function(b,e){return this._encoding(e&&e.keyEncoding||b&&b.keyEncoding||(this||Sv).opts.keyEncoding)};Qn.prototype._valueEncoding=function(b,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||b&&(b.valueEncoding||b.encoding)||(this||Sv).opts.valueEncoding||(this||Sv).opts.encoding)};Qn.prototype.encodeKey=function(b,e,l){return this._keyEncoding(e,l).encode(b)};Qn.prototype.encodeValue=function(b,e,l){return this._valueEncoding(e,
l).encode(b)};Qn.prototype.decodeKey=function(b,e){return this._keyEncoding(e).decode(b)};Qn.prototype.decodeValue=function(b,e){return this._valueEncoding(e).decode(b)};Qn.prototype.encodeBatch=function(b,e){var l=this||Sv;return b.map(function(a){var f={type:a.type,key:l.encodeKey(a.key,e,a)};l.keyAsBuffer(e,a)&&(f.keyEncoding="binary");a.prefix&&(f.prefix=a.prefix);"value"in a&&(f.value=l.encodeValue(a.value,e,a),l.valueAsBuffer(e,a)&&(f.valueEncoding="binary"));return f})};var hma="lt gt lte gte start end".split(" ");
Qn.prototype.encodeLtgt=function(b){var e=this||Sv,l={};Object.keys(b).forEach(function(a){l[a]=-1<hma.indexOf(a)?e.encodeKey(b[a],b):b[a]});return l};Qn.prototype.createStreamDecoder=function(b){var e=this||Sv;return b.keys&&b.values?function(l,a){return{key:e.decodeKey(l,b),value:e.decodeValue(a,b)}}:b.keys?function(l){return e.decodeKey(l,b)}:b.values?function(l,a){return e.decodeValue(a,b)}:function(){}};Qn.prototype.keyAsBuffer=function(b){return this._keyEncoding(b).buffer};Qn.prototype.valueAsBuffer=
function(b){return this._valueEncoding(b).buffer};var ima=P5,jma={},Vba=jma=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},Xk={},kma=eh.Buffer;Xk.isArray=function(b){return Array.isArray?Array.isArray(b):"[object Array]"===Object.prototype.toString.call(b)};Xk.isBoolean=function(b){return"boolean"===typeof b};Xk.isNull=function(b){return null===b};Xk.isNullOrUndefined=function(b){return null==b};Xk.isNumber=function(b){return"number"===typeof b};Xk.isString=
function(b){return"string"===typeof b};Xk.isSymbol=function(b){return"symbol"===typeof b};Xk.isUndefined=function(b){return void 0===b};Xk.isRegExp=function(b){return"[object RegExp]"===Object.prototype.toString.call(b)};Xk.isObject=function(b){return"object"===typeof b&&null!==b};Xk.isDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)};Xk.isError=function(b){return"[object Error]"===Object.prototype.toString.call(b)||b instanceof Error};Xk.isFunction=function(b){return"function"===
typeof b};Xk.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};Xk.isBuffer=kma.isBuffer;var Mf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,bP={},Q5=eh.Buffer,lma=Q5.isEncoding||function(b){switch(b&&b.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}},JS=bP.StringDecoder=function(b){(this||Mf).encoding=(b||"utf8").toLowerCase().replace(/[-_]/,"");if(b&&!lma(b))throw Error("Unknown encoding: "+b);switch((this||Mf).encoding){case "utf8":(this||Mf).surrogateSize=3;break;case "ucs2":case "utf16le":(this||Mf).surrogateSize=2;(this||Mf).detectIncompleteChar=Tba;break;case "base64":(this||Mf).surrogateSize=3;(this||Mf).detectIncompleteChar=Uba;break;default:(this||Mf).write=Sba;return}(this||Mf).charBuffer=new Q5(6);(this||Mf).charReceived=
0;(this||Mf).charLength=0};JS.prototype.write=function(b){for(var e="";(this||Mf).charLength;){e=b.length>=(this||Mf).charLength-(this||Mf).charReceived?(this||Mf).charLength-(this||Mf).charReceived:b.length;b.copy((this||Mf).charBuffer,(this||Mf).charReceived,0,e);(this||Mf).charReceived+=e;if((this||Mf).charReceived<(this||Mf).charLength)return"";b=b.slice(e,b.length);e=(this||Mf).charBuffer.slice(0,(this||Mf).charLength).toString((this||Mf).encoding);var l=e.charCodeAt(e.length-1);if(55296<=l&&
56319>=l)(this||Mf).charLength+=(this||Mf).surrogateSize,e="";else{(this||Mf).charReceived=(this||Mf).charLength=0;if(0===b.length)return e;break}}this.detectIncompleteChar(b);var a=b.length;(this||Mf).charLength&&(b.copy((this||Mf).charBuffer,0,b.length-(this||Mf).charReceived,a),a-=(this||Mf).charReceived);e+=b.toString((this||Mf).encoding,0,a);a=e.length-1;l=e.charCodeAt(a);return 55296<=l&&56319>=l?(l=(this||Mf).surrogateSize,(this||Mf).charLength+=l,(this||Mf).charReceived+=l,(this||Mf).charBuffer.copy((this||
Mf).charBuffer,l,0,l),b.copy((this||Mf).charBuffer,0,0,l),e.substring(0,a)):e};JS.prototype.detectIncompleteChar=function(b){for(var e=3<=b.length?3:b.length;0<e;e--){var l=b[b.length-e];if(1==e&&6==l>>5){(this||Mf).charLength=2;break}if(2>=e&&14==l>>4){(this||Mf).charLength=3;break}if(3>=e&&30==l>>3){(this||Mf).charLength=4;break}}(this||Mf).charReceived=e};JS.prototype.end=function(b){var e="";b&&b.length&&(e=this.write(b));(this||Mf).charReceived&&(b=(this||Mf).encoding,e+=(this||Mf).charBuffer.slice(0,
(this||Mf).charReceived).toString(b));return e};var Wba=Object.freeze({}),$O={},c0=!1,th="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,aP={},d0=!1,rs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,cP={},f0=!1,Xe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,dP={},h0=!1,km="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,eP={},j0=!1,i0="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof self?self:global,sr={},R5=!1,mma=function(){if(R5)return sr;R5=!0;var b=Qh;sr=sr=e0();sr.Stream=zz;sr.Readable=sr;sr.Writable=b0();sr.Duplex=JB();sr.Transform=g0();sr.PassThrough=Xba();b.browser||"disable"!==b.env.READABLE_STREAM||(sr=zz);return sr}(),nma={},$ba=eE(yk),oma=eE(Qt),pma=eE(ima),qma=eE(mma),S5=eE(Rj);S5(fP,Error);fP.prototype.name="NotFoundError";var rma=oma.EventEmitter,sma=new fP,T5=function(b,e,l,a){function f(q){var r={},u;if(a)for(u in a)"undefined"!==
typeof a[u]&&(r[u]=a[u]);if(q)for(u in q)"undefined"!==typeof q[u]&&(r[u]=q[u]);return r}var m=new rma;m.sublevels={};m.options=a;m.version="6.5.4";m.methods={};e=e||[];m.put=function(q,r,u,v){"function"===typeof u&&(v=u,u={});b.apply([{key:q,value:r,prefix:e.slice(),type:"put"}],f(u),function(y){if(y)return v(y);m.emit("put",q,r);v(null)})};m.prefix=function(){return e.slice()};m.batch=function(q,r,u){"function"===typeof r&&(u=r,r={});q=q.map(function(v){return{key:v.key,value:v.value,prefix:v.prefix||
e,keyEncoding:v.keyEncoding,valueEncoding:v.valueEncoding,type:v.type}});b.apply(q,f(r),function(v){if(v)return u(v);m.emit("batch",q);u(null)})};m.get=function(q,r,u){"function"===typeof r&&(u=r,r={});b.get(q,e,f(r),function(v,y){v?u(sma):u(null,y)})};m.sublevel=function(q,r){return m.sublevels[q]=m.sublevels[q]||T5(b,e.concat(q),l,f(r))};m.readStream=m.createReadStream=function(q){q=f(q);q.prefix=e;var r=b.iterator(q);q=l(q,b.createDecoder(q));q.setIterator(r);return q};m.close=function(q){b.close(q)};
m.isOpen=b.isOpen;m.isClosed=b.isClosed;return m},k0=qma.Readable;S5(Ax,k0);Ax.prototype.setIterator=function(b){this._iterator=b;return this._destroyed?b.end(function(){}):this._waiting?(this._waiting=!1,this._read()):this};Ax.prototype._read=function(){var b=this;if(!b._destroyed){if(!b._iterator)return this._waiting=!0;b._iterator.next(function(e,l,a){if(e||void 0===l&&void 0===a)return e||b._destroyed||b.push(null),b._cleanup(e);a=b._makeData(l,a);b._destroyed||b.push(a)})}};Ax.prototype._cleanup=
function(b){if(!this._destroyed){this._destroyed=!0;var e=this;b&&"iterator has ended"!==b.message&&e.emit("error",b);e._iterator?e._iterator.end(function(){e._iterator=null;e.emit("close")}):e.emit("close")}};Ax.prototype.destroy=function(){this._cleanup()};var tma={encode:function(b){return"\u00ff"+b[0]+"\u00ff"+b[1]},decode:function(b){b=b.toString();var e=b.indexOf("\u00ff",1);return[b.substring(1,e),b.substring(e+1)]},lowerBound:"\x00",upperBound:"\u00ff"},uma=new pma,vma=nma=function(b){return T5(Zba(b,
tma,uma),[],Ax,b.options)},Tv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,uL={},wma=Qh,l0=y5.Transform,U5=Rj;U5(KB,l0);KB.prototype.destroy=function(b){if(!(this||Tv)._destroyed){(this||Tv)._destroyed=!0;var e=this||Tv;wma.nextTick(function(){b&&e.emit("error",b);e.emit("close")})}};uL=gP(function(b,e,l){b=new KB(b);b._transform=e;l&&(b._flush=l);return b});uL.ctor=gP(function(b,e,l){function a(f){if(!((this||Tv)instanceof a))return new a(f);(this||Tv).options=
Object.assign({},b,f);KB.call(this||Tv,(this||Tv).options)}U5(a,KB);a.prototype._transform=e;l&&(a.prototype._flush=l);return a});uL.obj=gP(function(b,e,l){b=new KB(Object.assign({objectMode:!0,highWaterMark:16},b));b._transform=e;l&&(b._flush=l);return b});var V5=uL,xma={};Mi.prototype.toArray=function(){for(var b=this._length,e=Array(b),l=this._front,a=this._capacity,f=0;f<b;++f)e[f]=this[l+f&a-1];return e};Mi.prototype.push=function(b){var e=arguments.length,l=this._length;if(1<e){var a=this._capacity;
if(l+e>a){for(var f=0;f<e;++f){this._checkCapacity(l+1);var m=this._front+l&this._capacity-1;this[m]=arguments[f];l++;this._length=l}return l}m=this._front;for(f=0;f<e;++f)this[m+l&a-1]=arguments[f],m++;this._length=l+e;return l+e}if(0===e)return l;this._checkCapacity(l+1);f=this._front+l&this._capacity-1;this[f]=b;this._length=l+1;return l+1};Mi.prototype.pop=function(){var b=this._length;if(0!==b){var e=this._front+b-1&this._capacity-1,l=this[e];this[e]=void 0;this._length=b-1;return l}};Mi.prototype.shift=
function(){var b=this._length;if(0!==b){var e=this._front,l=this[e];this[e]=void 0;this._front=e+1&this._capacity-1;this._length=b-1;return l}};Mi.prototype.unshift=function(b){var e=this._length,l=arguments.length;if(1<l){var a=this._capacity;if(e+l>a){for(var f=l-1;0<=f;f--){this._checkCapacity(e+1);a=this._capacity;var m=(this._front-1&a-1^a)-a;this[m]=arguments[f];e++;this._length=e;this._front=m}return e}m=this._front;for(f=l-1;0<=f;f--)m=(m-1&a-1^a)-a,this[m]=arguments[f];this._front=m;this._length=
e+l;return e+l}if(0===l)return e;this._checkCapacity(e+1);a=this._capacity;f=(this._front-1&a-1^a)-a;this[f]=b;this._length=e+1;this._front=f;return e+1};Mi.prototype.peekBack=function(){var b=this._length;if(0!==b)return this[this._front+b-1&this._capacity-1]};Mi.prototype.peekFront=function(){if(0!==this._length)return this[this._front]};Mi.prototype.get=function(b){if(b===(b|0)){var e=this._length;0>b&&(b+=e);if(!(0>b||b>=e))return this[this._front+b&this._capacity-1]}};Mi.prototype.isEmpty=function(){return 0===
this._length};Mi.prototype.clear=function(){for(var b=this._length,e=this._front,l=this._capacity,a=0;a<b;++a)this[e+a&l-1]=void 0;this._front=this._length=0};Mi.prototype.toString=function(){return this.toArray().toString()};Mi.prototype.valueOf=Mi.prototype.toString;Mi.prototype.removeFront=Mi.prototype.shift;Mi.prototype.removeBack=Mi.prototype.pop;Mi.prototype.insertFront=Mi.prototype.unshift;Mi.prototype.insertBack=Mi.prototype.push;Mi.prototype.enqueue=Mi.prototype.push;Mi.prototype.dequeue=
Mi.prototype.shift;Mi.prototype.toJSON=Mi.prototype.toArray;Object.defineProperty(Mi.prototype,"length",{get:function(){return this._length},set:function(){throw new RangeError("");}});Mi.prototype._checkCapacity=function(b){this._capacity<b&&this._resizeTo(m0(1.5*this._capacity+16))};Mi.prototype._resizeTo=function(b){var e=this._capacity;this._capacity=b;b=this._front;var l=this._length;if(b+l>e)for(b=b+l&e-1,l=0;l<b;++l)this[l+e]=this[l+0],this[l+0]=void 0};var n0=Array.isArray,yma=xma=Mi,zma=
{},Au=eh.Buffer,Ama=Object.prototype.toString,KS="function"===typeof Au.alloc&&"function"===typeof Au.allocUnsafe&&"function"===typeof Au.from,Bma=zma=function(b,e,l){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("ArrayBuffer"===Ama.call(b).slice(8,-1)){e>>>=0;var a=b.byteLength-e;if(0>a)throw new RangeError("'offset' is out of bounds");if(void 0===l)l=a;else if(l>>>=0,l>a)throw new RangeError("'length' is out of bounds");return KS?Au.from(b.slice(e,e+l)):
new Au(new Uint8Array(b.slice(e,e+l)))}if("string"===typeof b){l=e;if("string"!==typeof l||""===l)l="utf8";if(!Au.isEncoding(l))throw new TypeError('"encoding" must be a valid string encoding');return KS?Au.from(b,l):new Au(b,l)}return KS?Au.from(b):new Au(b)},Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.collectConflicts=function(b){var e=hP(b);b=o0(b.rev_tree);for(var l=[],a=0,f=b.length;a<f;a++){var m=b[a];m.rev===e||m.opts.deleted||l.push(m.rev)}return l};Po.collectLeaves=o0;Po.compactTree=
function(b){var e=[];HI(b.rev_tree,function(l,a,f,m,q){"available"!==q.status||l||(e.push(a+"-"+f),q.status="missing")});return e};Po.isDeleted=function(b,e){e||(e=hP(b));e=e.substring(e.indexOf("-")+1);b=b.rev_tree.map(fca);for(var l;l=b.pop();){if(l[0]===e)return!!l[1].deleted;b=b.concat(l[2])}};Po.isLocalId=function(b){return/^_local/.test(b)};Po.merge=function(b,e,l){b=s0(b,e);l=eca(b.tree,l);return{tree:l.tree,stemmedRevs:l.revs,conflicts:b.conflicts}};Po.revExists=function(b,e){b=b.slice();
var l=e.split("-");e=parseInt(l[0],10);l=l[1];for(var a;a=b.pop();){if(a.pos===e&&a.ids[0]===l)return!0;for(var f=a.ids[2],m=0,q=f.length;m<q;m++)b.push({pos:a.pos+1,ids:f[m]})}return!1};Po.rootToLeaf=p0;Po.traverseRevTree=HI;Po.winningRev=hP;Po.latest=function(b,e){for(var l=e.rev_tree.slice(),a;a=l.pop();){var f=a.pos,m=a.ids,q=m[0],r=m[1];m=m[2];var u=0===m.length;a=a.history?a.history.slice():[];a.push({id:q,pos:f,opts:r});if(u)for(r=0,u=a.length;r<u;r++){var v=a[r];if(v.pos+"-"+v.id===b)return f+
"-"+q}q=0;for(r=m.length;q<r;q++)l.push({pos:f+1,ids:m[q],history:a})}throw Error("Unable to resolve latest revision for id "+e.id+", rev "+b);};var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});var Az=wg,fE=Um,w0=zC,Bp=Of,Ko=Po,gca=t0("_id _rev _attachments _deleted _revisions _revs_info _conflicts _deleted_conflicts _local_seq _rev_tree _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats _removed".split(" ")),hca=t0("_attachments _replication_id _replication_state _replication_state_time _replication_state_reason _replication_stats".split(" "));
Kl.invalidIdError=Az.invalidIdError;Kl.normalizeDdocFunctionName=Az.normalizeDdocFunctionName;Kl.parseDdocFunctionName=Az.parseDdocFunctionName;Kl.isDeleted=Ko.isDeleted;Kl.isLocalId=Ko.isLocalId;Kl.allDocsKeysQuery=function(b,e){var l={offset:e.skip};return Promise.all(e.keys.map(function(a){var f=Az.assign({key:a,deleted:"ok"},e);["limit","skip","keys"].forEach(function(m){delete f[m]});return new Promise(function(m,q){b._allDocs(f,function(r,u){if(r)return q(r);e.update_seq&&void 0!==u.update_seq&&
(l.update_seq=u.update_seq);l.total_rows=u.total_rows;m(u.rows[0]||{key:a,error:"not_found"})})})})).then(function(a){l.rows=a;return l})};Kl.parseDoc=v0;Kl.preprocessAttachments=function(b,e,l){function a(){f++;b.length===f&&(m?l(m):l())}if(!b.length)return l();var f=0,m;b.forEach(function(q){function r(z){m=z;v++;v===u.length&&a()}var u=q.data&&q.data._attachments?Object.keys(q.data._attachments):[],v=0;if(!u.length)return a();for(var y in q.data._attachments)q.data._attachments.hasOwnProperty(y)&&
kca(q.data._attachments[y],e,r)})};Kl.processDocs=function(b,e,l,a,f,m,q,r,u){b=b||1E3;var v=r.new_edits,y=new Vx.Map,z=0,B=e.length;e.forEach(function(C,G){if(C._id&&Ko.isLocalId(C._id))l[C._deleted?"_removeLocal":"_putLocal"](C,{ctx:f},function(N,L){m[G]=N||L;++z===B&&u&&u()});else{var F=C.metadata.id;y.has(F)?(B--,y.get(F).push([C,G])):y.set(F,[[C,G]])}});y.forEach(function(C,G){function F(){++L<C.length?N():++z===B&&u&&u()}function N(){var S=C[L],ha=S[0];S=S[1];if(a.has(G))x0(b,a.get(G),ha,m,
S,F,q,v);else{var qa=Ko.merge([],ha.metadata.rev_tree[0],b);ha.metadata.rev_tree=qa.tree;ha.stemmedRevs=qa.stemmedRevs||[];qa=Ko.winningRev(ha.metadata);var D=Ko.isDeleted(ha.metadata,qa);"was_delete"in r&&D?(m[S]=Bp.createError(Bp.MISSING_DOC,"deleted"),F()):v&&"missing"===ha.metadata.rev_tree[0].ids[1].status?(ha=Bp.createError(Bp.REV_CONFLICT),m[S]=ha,F()):q(ha,qa,D,D,!1,D?0:1,S,F)}}var L=0;N()})};Kl.updateDoc=x0;var IF={};Object.defineProperty(IF,"__esModule",{value:!0});var W5=pC&&"object"===
typeof pC&&"default"in pC?pC["default"]:pC;IF.safeJsonParse=function(b){try{return JSON.parse(b)}catch(e){return W5.parse(b)}};IF.safeJsonStringify=function(b){try{return JSON.stringify(b)}catch(e){return W5.stringify(b)}};var Cma={},Dma=gE(bma),Ema=gE(vma),vL=gE(ER),Fma=gE(yma),Gma=gE(Bma),iE=Po,hE=Um,ss=Vx;Bz.prototype.get=function(b,e,l){var a=z0(this,b),f=a.get(e);if(f)return wg.nextTick(function(){l(null,f)});if(null===f)return wg.nextTick(function(){l({name:"NotFoundError"})});b.get(e,function(m,
q){if(m)return"NotFoundError"===m.name&&a.set(e,null),l(m);a.set(e,q);l(null,q)})};Bz.prototype.batch=function(b){for(var e=0,l=b.length;e<l;e++){var a=b[e],f=z0(this,a.prefix);"put"===a.type?f.set(a.key,a.value):f.set(a.key,null)}this._batch=this._batch.concat(b)};Bz.prototype.execute=function(b,e){for(var l=new ss.Set,a=[],f=this._batch.length-1;0<=f;f--){var m=this._batch[f],q=m.prefix.prefix()[0]+"\u00ff"+m.key;l.has(q)||(l.add(q),a.push(m))}b.batch(a,e)};var JF=new ss.Map,Hma={encode:IF.safeJsonStringify,
decode:IF.safeJsonParse,buffer:!1,type:"cheap-json"},KF=new wg.changesHandler,Ima=Cma=function(b,e){function l(){F.docStore=D.sublevel("document-store",{valueEncoding:Hma});F.bySeqStore=D.sublevel("by-sequence",{valueEncoding:"json"});F.attachmentStore=D.sublevel("attach-store",{valueEncoding:"json"});F.binaryStore=D.sublevel("attach-binary-store",{valueEncoding:"binary"});F.localStore=D.sublevel("local-store",{valueEncoding:"json"});F.metaStore=D.sublevel("meta-store",{valueEncoding:"json"});"object"===
typeof b.migrate?b.migrate.doMigrationTwo(D,F,a):a()}function a(){F.metaStore.get("_local_last_update_seq",function(P,J){"undefined"===typeof D._updateSeq&&(D._updateSeq=J||0);F.metaStore.get("_local_doc_count",function(M,X){D._docCount=M?0:X;F.metaStore.get("_local_uuid",function(T,fa){G=T?wg.uuid():fa;F.metaStore.put("_local_uuid",G,function(){wg.nextTick(function(){e(null,C)})})})})})}function f(P){return D.isClosed()?P(Error("database is closed")):P(null,D._docCount)}function m(P,J){try{P.apply(null,
J)}catch(M){J[J.length-1](M)}}function q(){var P=D._queue.peekFront();"read"===P.type?r(P):u(P)}function r(P){var J=[P];P=1;for(var M=D._queue.get(P);"undefined"!==typeof M&&"read"===M.type;)J.push(M),P++,M=D._queue.get(P);var X=0;J.forEach(function(T){var fa=T.args,Ra=fa[fa.length-1];fa[fa.length-1]=vL(function(gb){Ra.apply(null,gb);++X===J.length&&wg.nextTick(function(){J.forEach(function(){D._queue.shift()});D._queue.length&&q()})});m(T.fun,fa)})}function u(P){var J=P.args,M=J[J.length-1];J[J.length-
1]=vL(function(X){M.apply(null,X);wg.nextTick(function(){D._queue.shift();D._queue.length&&q()})});m(P.fun,J)}function v(P){return vL(function(J){D._queue.push({fun:P,args:J,type:"write"});1===D._queue.length&&wg.nextTick(q)})}function y(P){return vL(function(J){D._queue.push({fun:P,args:J,type:"read"});1===D._queue.length&&wg.nextTick(q)})}function z(P){return("0000000000000000"+P).slice(-16)}function B(P,J){"destroy"in S?S.destroy(P,J):J(null)}b=wg.clone(b);var C=this,G,F={},N=b.revs_limit,L=b.name;
"undefined"===typeof b.createIfMissing&&(b.createIfMissing=!0);var S=b.db,ha=wg.functionName(S);if(JF.has(ha))var qa=JF.get(ha);else qa=new ss.Map,JF.set(ha,qa);if(qa.has(L)){var D=qa.get(L);l()}else qa.set(L,Ema(Dma(S(L),b,function(P){if(P)return qa.delete(L),e(P);D=qa.get(L);D._docCount=-1;D._queue=new Fma;"object"===typeof b.migrate?b.migrate.doMigrationOne(L,D,l):l()})));C._remote=!1;C.type=function(){return"leveldb"};C._id=function(P){P(null,G)};C._info=function(P){var J={doc_count:D._docCount,
update_seq:D._updateSeq,backend_adapter:wg.functionName(S)};return wg.nextTick(function(){P(null,J)})};C._get=y(function(P,J,M){J=wg.clone(J);F.docStore.get(P,function(X,T){if(X||!T)return M(Of.createError(Of.MISSING_DOC,"missing"));if(J.rev)var fa=J.latest?iE.latest(J.rev,T):J.rev;else if(fa=iP(T),"deleted"in T?T.deleted:Kl.isDeleted(T,fa))return M(Of.createError(Of.MISSING_DOC,"deleted"));F.bySeqStore.get(z(T.rev_map[fa]),function(Ra,gb){if(!gb)return M(Of.createError(Of.MISSING_DOC));if("_id"in
gb&&gb._id!==T.id)return M(Error("wrong doc returned"));gb._id=T.id;if("_rev"in gb){if(gb._rev!==fa)return M(Error("wrong doc returned"))}else gb._rev=fa;return M(null,{doc:gb,metadata:T})})})});C._getAttachment=function(P,J,M,X,T){var fa=M.content_type;F.binaryStore.get(M.digest,function(Ra,gb){if(Ra)return"NotFoundError"!==Ra.name?T(Ra):T(null,X.binary?hE.blob([""],{type:fa}):"");X.binary?T(null,y0(gb,fa)):T(null,gb.toString("base64"))})};C._bulkDocs=v(function(P,J,M){function X(ua,db){jc.get(F.attachmentStore,
ua,function(Cb){Cb?(Cb=Of.createError(Of.MISSING_STUB,"unknown stub attachment with digest "+ua),db(Cb)):db()})}function T(ua){function db(){if(++Cb===Yc.length)return ua(Pc)}var Cb=0,Pc;Yc.forEach(function(Oc){if(Oc._id&&Kl.isLocalId(Oc._id))return db();jc.get(F.docStore,Oc._id,function(kc,be){kc?"NotFoundError"!==kc.name&&(Pc=kc):Ab.set(Oc._id,be);db()})})}function fa(ua,db){var Cb=Promise.resolve();ua.forEach(function(Pc,Oc){Cb=Cb.then(function(){return new Promise(function(kc,be){C._doCompactionNoLock(Oc,
Pc,{ctx:jc},function(Ud){if(Ud)return be(Ud);kc()})})})});Cb.then(function(){db()},db)}function Ra(ua){var db=new ss.Map;Ab.forEach(function(Cb,Pc){db.set(Pc,iE.compactTree(Cb))});fa(db,ua)}function gb(){fa(Kb,function(ua){ua&&Aa(ua);if(C.auto_compaction)return Ra(Aa);Aa()})}function ea(ua,db,Cb,Pc,Oc,kc,be,Ud){function ah(Th){pj++;Wi||(Th?(Wi=Th,Ud(Wi)):pj===Bj.length&&bi())}function vg(Th,Xi,Dj,Yi){return function(Ej){ia(Th,"md5-"+Ej,Xi,Dj,Yi)}}function ki(Th,Xi,Dj){return function(Yi){zC.binaryMd5(Yi,
vg(Th,Xi,Yi,Dj))}}function bi(){var Th=ua.metadata.rev_map[ua.metadata.rev];if(Th)return Ud();Th=++Gc;ua.metadata.rev_map[ua.metadata.rev]=ua.metadata.seq=Th;Th=[{key:z(Th),value:ua.data,prefix:F.bySeqStore,type:"put"},{key:ua.metadata.id,value:ua.metadata,prefix:F.docStore,type:"put"}];jc.batch(Th);Nb[be]={ok:!0,id:ua.metadata.id,rev:ua.metadata.rev};Ab.set(ua.metadata.id,ua.metadata);Ud()}ub+=kc;var Wi=null,pj=0;ua.metadata.winningRev=db;ua.metadata.deleted=Cb;ua.data._id=ua.metadata.id;ua.data._rev=
ua.metadata.rev;Pc&&(ua.data._deleted=!0);ua.stemmedRevs.length&&Kb.set(ua.metadata.id,ua.stemmedRevs);var Bj=ua.data._attachments?Object.keys(ua.data._attachments):[];for(db=0;db<Bj.length;db++)if(Cb=Bj[db],Pc=ua.data._attachments[Cb],Pc.stub)aa(ua.data._id,ua.data._rev,Pc.digest,ah);else if("string"===typeof Pc.data){try{var Cj=hE.atob(Pc.data)}catch(Th){M(Of.createError(Of.BAD_ARG,"Attachment is not a valid base64 string"));return}ki(ua,Cb,ah)(Cj)}else lca(Pc.data,ki(ua,Cb,ah));Bj.length||bi()}
function aa(ua,db,Cb,Pc){function Oc(){return new Promise(function(Ud,ah){jc.get(F.attachmentStore,Cb,function(vg,ki){if(vg&&"NotFoundError"!==vg.name)return ah(vg);Ud(ki)})})}function kc(Ud){var ah=[ua,db].join("@"),vg={};Ud?Ud.refs&&(vg.refs=Ud.refs,vg.refs[ah]=!0):(vg.refs={},vg.refs[ah]=!0);return new Promise(function(ki){jc.batch([{type:"put",prefix:F.attachmentStore,key:Cb,value:vg}]);ki(!Ud)})}var be=sa[Cb]||Promise.resolve();sa[Cb]=be.then(function(){return Oc().then(kc).then(function(Ud){Pc(null,
Ud)},Pc)})}function ia(ua,db,Cb,Pc,Oc){Cb=ua.data._attachments[Cb];delete Cb.data;Cb.digest=db;Cb.length=Pc.length;var kc=ua.metadata.id;ua=ua.metadata.rev;Cb.revpos=parseInt(ua,10);aa(kc,ua,db,function(be,Ud){if(be||0===Pc.length||!Ud)return Oc(be);jc.batch([{type:"put",prefix:F.binaryStore,key:db,value:Gma(Pc,"binary")}]);Oc()})}function Aa(ua){if(ua)return wg.nextTick(function(){M(ua)});jc.batch([{prefix:F.metaStore,type:"put",key:"_local_last_update_seq",value:Gc},{prefix:F.metaStore,type:"put",
key:"_local_doc_count",value:D._docCount+ub}]);jc.execute(D,function(db){if(db)return M(db);D._docCount+=ub;D._updateSeq=Gc;KF.notify(L);wg.nextTick(function(){M(null,Nb)})})}var ob=J.new_edits,Nb=Array(P.docs.length),Ab=new ss.Map,Kb=new ss.Map,jc=new Bz,ub=0,Gc=D._updateSeq,Yc=P.docs,Z=Yc.map(function(ua){if(ua._id&&Kl.isLocalId(ua._id))return ua;ua=Kl.parseDoc(ua,ob,C.__opts);ua.metadata&&!ua.metadata.rev_map&&(ua.metadata.rev_map={});return ua});P=Z.filter(function(ua){return ua.error});if(P.length)return M(P[0]);
var sa={};if(!Z.length)return M(null,[]);(function(ua){var db=[];Yc.forEach(function(Oc){Oc&&Oc._attachments&&Object.keys(Oc._attachments).forEach(function(kc){kc=Oc._attachments[kc];kc.stub&&db.push(kc.digest)})});if(!db.length)return ua();var Cb=0,Pc;db.forEach(function(Oc){X(Oc,function(kc){kc&&!Pc&&(Pc=kc);++Cb===db.length&&ua(Pc)})})})(function(ua){if(ua)return M(ua);T(function(db){if(db)return M(db);Kl.processDocs(N,Z,C,Ab,jc,Nb,ea,J,gb)})})});C._allDocs=function(P,J){return"keys"in P?Kl.allDocsKeysQuery(this,
P):y(function(M,X){M=wg.clone(M);f(function(T,fa){if(T)return X(T);T={};var Ra=M.skip||0;M.startkey&&(T.gte=M.startkey);M.endkey&&(T.lte=M.endkey);M.key&&(T.gte=T.lte=M.key);if(M.descending){T.reverse=!0;var gb=T.lte;T.lte=T.gte;T.gte=gb}if("number"===typeof M.limit)var ea=M.limit;if(0===ea||"gte"in T&&"lte"in T&&T.gte>T.lte)return T={total_rows:fa,offset:M.skip,rows:[]},M.update_seq&&(T.update_seq=D._updateSeq),X(null,T);var aa=[],ia=F.docStore.readStream(T),Aa=V5.obj(function(ob,Nb,Ab){function Kb(Yc){var Z=
{id:jc.id,key:jc.id,value:{rev:ub}};if(M.include_docs){Z.doc=Yc;Z.doc._rev=Z.value.rev;M.conflicts&&(Yc=iE.collectConflicts(jc),Yc.length&&(Z.doc._conflicts=Yc));for(var sa in Z.doc._attachments)Z.doc._attachments.hasOwnProperty(sa)&&(Z.doc._attachments[sa].stub=!0)}if(!1===M.inclusive_end&&jc.id===M.endkey)return Ab();if(Gc)if("ok"===M.deleted)Z.value.deleted=!0,Z.doc=null;else return Ab();aa.push(Z);Ab()}var jc=ob.value,ub=iP(jc),Gc="deleted"in jc?jc.deleted:Kl.isDeleted(jc,ub);if(!Gc){if(0<Ra--){Ab();
return}if("number"===typeof ea&&0>=ea--){ia.unpipe();ia.destroy();Ab();return}}else if("ok"!==M.deleted){Ab();return}M.include_docs?F.bySeqStore.get(z(jc.rev_map[ub]),function(Yc,Z){Kb(Z)}):Kb()},function(ob){Promise.resolve().then(function(){if(M.include_docs&&M.attachments)return jP(aa,F,M)}).then(function(){var Nb={total_rows:fa,offset:M.skip,rows:aa};M.update_seq&&(Nb.update_seq=D._updateSeq);X(null,Nb)},X);ob()}).on("unpipe",function(){Aa.end()});ia.on("error",X);ia.pipe(Aa)})})(P,J)};C._changes=
function(P){function J(){P.done=!0;P.return_docs&&P.limit&&P.limit<T.length&&(T.length=P.limit);ob.unpipe(Nb);ob.destroy();P.continuous||P.cancelled||(P.include_docs&&P.attachments&&P.return_docs?jP(T,F,P).then(function(){P.complete(null,{results:T,last_seq:fa})}):P.complete(null,{results:T,last_seq:fa}))}P=wg.clone(P);if(P.continuous){var M=L+":"+wg.uuid();KF.addListener(L,M,C,P);KF.notify(L);return{cancel:function(){KF.removeListener(L,M)}}}var X=P.descending,T=[],fa=P.since||0,Ra=0,gb={reverse:X};
if("limit"in P&&0<P.limit)var ea=P.limit;gb.reverse||(gb.start=z(P.since||0));var aa=P.doc_ids&&new ss.Set(P.doc_ids),ia=wg.filterChange(P),Aa=new ss.Map,ob=F.bySeqStore.readStream(gb),Nb=V5.obj(function(Ab,Kb,jc){function ub(Z){function sa(db){var Cb=P.processChange(db,Z,P);Cb.seq=Z.seq;db=ia(Cb);if("object"===typeof db)return P.complete(db);if(db){Ra++;if(P.attachments&&P.include_docs)jP([Cb],F,P).then(function(){P.onChange(Cb)});else P.onChange(Cb);P.return_docs&&T.push(Cb)}jc()}var ua=iP(Z);if(Z.seq!==
Gc)return jc();fa=Gc;if(ua===Yc._rev)return sa(Yc);F.bySeqStore.get(z(Z.rev_map[ua]),function(db,Cb){sa(Cb)})}if(ea&&Ra>=ea)return J(),jc();if(P.cancelled||P.done)return jc();var Gc=parseInt(Ab.key,10),Yc=Ab.value;if(Gc===P.since&&!X||aa&&!aa.has(Yc._id))return jc();if(Ab=Aa.get(Yc._id))return ub(Ab);F.docStore.get(Yc._id,function(Z,sa){if(P.cancelled||P.done||D.isClosed()||Kl.isLocalId(sa.id))return jc();Aa.set(Yc._id,sa);ub(sa)})},function(Ab){if(P.cancelled)return Ab();P.return_docs&&P.limit&&
P.limit<T.length&&(T.length=P.limit);Ab()}).on("unpipe",function(){Nb.end();J()});ob.pipe(Nb);return{cancel:function(){P.cancelled=!0;J()}}};C._close=function(P){if(D.isClosed())return P(Of.createError(Of.NOT_OPEN));D.close(function(J){J?P(J):(qa.delete(L),P())})};C._getRevisionTree=function(P,J){F.docStore.get(P,function(M,X){M?J(Of.createError(Of.MISSING_DOC)):J(null,X.rev_tree)})};C._doCompaction=v(function(P,J,M,X){C._doCompactionNoLock(P,J,M,X)});C._doCompactionNoLock=function(P,J,M,X){"function"===
typeof M&&(X=M,M={});if(!J.length)return X();var T=M.ctx||new Bz;T.get(F.docStore,P,function(fa,Ra){function gb(Ab){Ab&&(Nb=Ab);if(++ob===J.length){if(Nb)return X(Nb);aa()}}function ea(Ab){if(Ab)return X(Ab);T.batch(ia);if(M.ctx)return X();T.execute(D,X)}function aa(){function Ab(Yc){Yc&&(ub=Yc);++jc===Kb.length&&ea(ub)}var Kb=Object.keys(Aa);if(!Kb.length)return ea();var jc=0,ub,Gc=new ss.Map;J.forEach(function(Yc){Gc.set(P+"@"+Yc,!0)});Kb.forEach(function(Yc){T.get(F.attachmentStore,Yc,function(Z,
sa){if(Z)return"NotFoundError"===Z.name?Ab():Ab(Z);Z=Object.keys(sa.refs||{}).filter(function(db){return!Gc.has(db)});var ua={};Z.forEach(function(db){ua[db]=!0});Z.length?ia.push({key:Yc,type:"put",value:{refs:ua},prefix:F.attachmentStore}):ia=ia.concat([{key:Yc,type:"del",prefix:F.attachmentStore},{key:Yc,type:"del",prefix:F.binaryStore}]);Ab()})})}if(fa)return X(fa);fa=J.map(function(Ab){var Kb=Ra.rev_map[Ab];delete Ra.rev_map[Ab];return Kb});iE.traverseRevTree(Ra.rev_tree,function(Ab,Kb,jc,ub,
Gc){-1!==J.indexOf(Kb+"-"+jc)&&(Gc.status="missing")});var ia=[];ia.push({key:Ra.id,value:Ra,type:"put",prefix:F.docStore});var Aa={},ob=0,Nb;fa.forEach(function(Ab){ia.push({key:z(Ab),type:"del",prefix:F.bySeqStore});T.get(F.bySeqStore,z(Ab),function(Kb,jc){if(Kb)return"NotFoundError"===Kb.name?gb():gb(Kb);Object.keys(jc._attachments||{}).forEach(function(ub){Aa[jc._attachments[ub].digest]=!0});gb()})})})};C._getLocal=function(P,J){F.localStore.get(P,function(M,X){M?J(Of.createError(Of.MISSING_DOC)):
J(null,X)})};C._putLocal=function(P,J,M){"function"===typeof J&&(M=J,J={});J.ctx?C._putLocalNoLock(P,J,M):C._putLocalWithLock(P,J,M)};C._putLocalWithLock=v(function(P,J,M){C._putLocalNoLock(P,J,M)});C._putLocalNoLock=function(P,J,M){delete P._revisions;var X=P._rev,T=P._id,fa=J.ctx||new Bz;fa.get(F.localStore,T,function(Ra,gb){if(Ra&&X||gb&&gb._rev!==X)return M(Of.createError(Of.REV_CONFLICT));P._rev=X?"0-"+(parseInt(X.split("-")[1],10)+1):"0-1";fa.batch([{type:"put",prefix:F.localStore,key:T,value:P}]);
var ea={ok:!0,id:P._id,rev:P._rev};if(J.ctx)return M(null,ea);fa.execute(D,function(aa){if(aa)return M(aa);M(null,ea)})})};C._removeLocal=function(P,J,M){"function"===typeof J&&(M=J,J={});J.ctx?C._removeLocalNoLock(P,J,M):C._removeLocalWithLock(P,J,M)};C._removeLocalWithLock=v(function(P,J,M){C._removeLocalNoLock(P,J,M)});C._removeLocalNoLock=function(P,J,M){var X=J.ctx||new Bz;X.get(F.localStore,P._id,function(T,fa){if(T)return"NotFoundError"!==T.name?M(T):M(Of.createError(Of.MISSING_DOC));if(fa._rev!==
P._rev)return M(Of.createError(Of.REV_CONFLICT));X.batch([{prefix:F.localStore,type:"del",key:P._id}]);var Ra={ok:!0,id:P._id,rev:"0-0"};if(J.ctx)return M(null,Ra);X.execute(D,function(gb){if(gb)return M(gb);M(null,Ra)})})};C._destroy=function(P,J){P=wg.functionName(S);if(JF.has(P))var M=JF.get(P);else return B(L,J);M.has(L)?(KF.removeAllListeners(L),M.get(L).close(function(){M.delete(L);B(L,J)})):B(L,J)}},Cz="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Jma={},
X5=Qh;kP.prototype.next=function(b){var e=this||Cz;if("function"!=typeof b)throw Error("next() requires a callback argument");if(e._ended)return b(Error("cannot call next() after end()"));if(e._nexting)return b(Error("cannot call next() before previous next() has completed"));e._nexting=!0;if("function"==typeof e._next)return e._next(function(){e._nexting=!1;b.apply(null,arguments)});X5.nextTick(function(){e._nexting=!1;b()})};kP.prototype.end=function(b){if("function"!=typeof b)throw Error("end() requires a callback argument");
if((this||Cz)._ended)return b(Error("end() already called on iterator"));(this||Cz)._ended=!0;if("function"==typeof(this||Cz)._end)return this._end(b);X5.nextTick(b)};var Y5=Jma=kP,Zj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Kma={},Lma=Qh;Bx.prototype._serializeKey=function(b){return(this||Zj)._db._serializeKey(b)};Bx.prototype._serializeValue=function(b){return(this||Zj)._db._serializeValue(b)};Bx.prototype._checkWritten=function(){if((this||Zj)._written)throw Error("write() already called on this batch");
};Bx.prototype.put=function(b,e){this._checkWritten();var l=(this||Zj)._db._checkKey(b,"key",(this||Zj)._db._isBuffer);if(l)throw l;b=this._serializeKey(b);e=this._serializeValue(e);"function"==typeof(this||Zj)._put?this._put(b,e):(this||Zj)._operations.push({type:"put",key:b,value:e});return this||Zj};Bx.prototype.del=function(b){this._checkWritten();var e=(this||Zj)._db._checkKey(b,"key",(this||Zj)._db._isBuffer);if(e)throw e;b=this._serializeKey(b);"function"==typeof(this||Zj)._del?this._del(b):
(this||Zj)._operations.push({type:"del",key:b});return this||Zj};Bx.prototype.clear=function(){this._checkWritten();(this||Zj)._operations=[];"function"==typeof(this||Zj)._clear&&this._clear();return this||Zj};Bx.prototype.write=function(b,e){this._checkWritten();"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("write() requires a callback argument");"object"!=typeof b&&(b={});(this||Zj)._written=!0;if("function"==typeof(this||Zj)._write)return this._write(e);if("function"==typeof(this||
Zj)._db._batch)return(this||Zj)._db._batch((this||Zj)._operations,b,e);Lma.nextTick(e)};var Mma=Kma=Bx,Fk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Z5={},Nma=eh.Buffer,dy=Qh;Rn.prototype.open=function(b,e){var l=this||Fk,a=(this||Fk).status;"function"==typeof b&&(e=b);if("function"!=typeof e)throw Error("open() requires a callback argument");"object"!=typeof b&&(b={});b.createIfMissing=0!=b.createIfMissing;b.errorIfExists=!!b.errorIfExists;"function"==typeof(this||
Fk)._open?((this||Fk).status="opening",this._open(b,function(f){if(f)return l.status=a,e(f);l.status="open";e()})):((this||Fk).status="open",dy.nextTick(e))};Rn.prototype.close=function(b){var e=this||Fk,l=(this||Fk).status;if("function"!=typeof b)throw Error("close() requires a callback argument");"function"==typeof(this||Fk)._close?((this||Fk).status="closing",this._close(function(a){if(a)return e.status=l,b(a);e.status="closed";b()})):((this||Fk).status="closed",dy.nextTick(b))};Rn.prototype.get=
function(b,e,l){var a;"function"==typeof e&&(l=e);if("function"!=typeof l)throw Error("get() requires a callback argument");if(a=this._checkKey(b,"key"))return l(a);b=this._serializeKey(b);"object"!=typeof e&&(e={});e.asBuffer=0!=e.asBuffer;if("function"==typeof(this||Fk)._get)return this._get(b,e,l);dy.nextTick(function(){l(Error("NotFound"))})};Rn.prototype.put=function(b,e,l,a){var f;"function"==typeof l&&(a=l);if("function"!=typeof a)throw Error("put() requires a callback argument");if(f=this._checkKey(b,
"key"))return a(f);b=this._serializeKey(b);e=this._serializeValue(e);"object"!=typeof l&&(l={});if("function"==typeof(this||Fk)._put)return this._put(b,e,l,a);dy.nextTick(a)};Rn.prototype.del=function(b,e,l){var a;"function"==typeof e&&(l=e);if("function"!=typeof l)throw Error("del() requires a callback argument");if(a=this._checkKey(b,"key"))return l(a);b=this._serializeKey(b);"object"!=typeof e&&(e={});if("function"==typeof(this||Fk)._del)return this._del(b,e,l);dy.nextTick(l)};Rn.prototype.batch=
function(b,e,l){if(!arguments.length)return this._chainedBatch();"function"==typeof e&&(l=e);"function"==typeof b&&(l=b);if("function"!=typeof l)throw Error("batch(array) requires a callback argument");if(!Array.isArray(b))return l(Error("batch(array) requires an array argument"));e&&"object"==typeof e||(e={});for(var a=0,f=b.length,m,q;a<f;a++)if(m=b[a],"object"==typeof m&&((q=this._checkKey(m.type,"type"))||(q=this._checkKey(m.key,"key"))))return l(q);if("function"==typeof(this||Fk)._batch)return this._batch(b,
e,l);dy.nextTick(l)};Rn.prototype.approximateSize=function(b,e,l){if(null==b||null==e||"function"==typeof b||"function"==typeof e)throw Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof l)throw Error("approximateSize() requires a callback argument");b=this._serializeKey(b);e=this._serializeKey(e);if("function"==typeof(this||Fk)._approximateSize)return this._approximateSize(b,e,l);dy.nextTick(function(){l(null,0)})};Rn.prototype._setupIteratorOptions=
function(b){var e=this||Fk;b=by(b);"start end gt gte lt lte".split(" ").forEach(function(l){b[l]&&e._isBuffer(b[l])&&0===b[l].length&&delete b[l]});b.reverse=!!b.reverse;b.keys=0!=b.keys;b.values=0!=b.values;b.limit="limit"in b?b.limit:-1;b.keyAsBuffer=0!=b.keyAsBuffer;b.valueAsBuffer=0!=b.valueAsBuffer;return b};Rn.prototype.iterator=function(b){"object"!=typeof b&&(b={});b=this._setupIteratorOptions(b);return"function"==typeof(this||Fk)._iterator?this._iterator(b):new Y5(this||Fk)};Rn.prototype._chainedBatch=
function(){return new Mma(this||Fk)};Rn.prototype._isBuffer=function(b){return Nma.isBuffer(b)};Rn.prototype._serializeKey=function(b){return this._isBuffer(b)?b:String(b)};Rn.prototype._serializeValue=function(b){return null==b?"":this._isBuffer(b)||dy.browser?b:String(b)};Rn.prototype._checkKey=function(b,e){if(null===b||void 0===b)return Error(e+" cannot be `null` or `undefined`");if(this._isBuffer(b)&&0===b.length)return Error(e+" cannot be an empty Buffer");if(""===String(b))return Error(e+" cannot be an empty String")};
Z5=Rn;var Oma=Z5;var $5={};$5=function(b){return new LB(b||nca,null)};var Zn=LB.prototype;Object.defineProperty(Zn,"keys",{get:function(){var b=[];this.forEach(function(e,l){b.push(e)});return b}});Object.defineProperty(Zn,"values",{get:function(){var b=[];this.forEach(function(e,l){b.push(l)});return b}});Object.defineProperty(Zn,"length",{get:function(){return this.root?this.root._count:0}});Zn.insert=function(b,e){for(var l=this._compare,a=this.root,f=[],m=[];a;){var q=l(b,a.key);f.push(a);m.push(q);
a=0>=q?a.left:a.right}f.push(new Cp(0,b,e,null,null,1));for(b=f.length-2;0<=b;--b)a=f[b],f[b]=0>=m[b]?new Cp(a._color,a.key,a.value,f[b+1],a.right,a._count+1):new Cp(a._color,a.key,a.value,a.left,f[b+1],a._count+1);for(b=f.length-1;1<b;--b){m=f[b-1];a=f[b];if(1===m._color||1===a._color)break;e=f[b-2];if(e.left===m)if(m.left===a)if((q=e.right)&&0===q._color)m._color=1,e.right=Cx(1,q),e._color=0,--b;else{e._color=0;e.left=m.right;m._color=1;m.right=e;f[b-2]=m;f[b-1]=a;ak(e);ak(m);3<=b&&(b=f[b-3],b.left===
e?b.left=m:b.right=m);break}else if((q=e.right)&&0===q._color)m._color=1,e.right=Cx(1,q),e._color=0,--b;else{m.right=a.left;e._color=0;e.left=a.right;a._color=1;a.left=m;a.right=e;f[b-2]=a;f[b-1]=m;ak(e);ak(m);ak(a);3<=b&&(b=f[b-3],b.left===e?b.left=a:b.right=a);break}else if(m.right===a)if((q=e.left)&&0===q._color)m._color=1,e.left=Cx(1,q),e._color=0,--b;else{e._color=0;e.right=m.left;m._color=1;m.left=e;f[b-2]=m;f[b-1]=a;ak(e);ak(m);3<=b&&(b=f[b-3],b.right===e?b.right=m:b.left=m);break}else if((q=
e.left)&&0===q._color)m._color=1,e.left=Cx(1,q),e._color=0,--b;else{m.left=a.right;e._color=0;e.right=a.left;a._color=1;a.right=m;a.left=e;f[b-2]=a;f[b-1]=m;ak(e);ak(m);ak(a);3<=b&&(b=f[b-3],b.right===e?b.right=a:b.left=a);break}}f[0]._color=1;return new LB(l,f[0])};Zn.forEach=function(b,e,l){if(this.root)switch(arguments.length){case 1:return lP(b,this.root);case 2:return mP(e,this._compare,b,this.root);case 3:if(!(0<=this._compare(e,l)))return nP(e,l,this._compare,b,this.root)}};Object.defineProperty(Zn,
"begin",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.left;return new Dp(this,b)}});Object.defineProperty(Zn,"end",{get:function(){for(var b=[],e=this.root;e;)b.push(e),e=e.right;return new Dp(this,b)}});Zn.at=function(b){if(0>b)return new Dp(this,[]);for(var e=this.root,l=[];;){l.push(e);if(e.left){if(b<e.left._count){e=e.left;continue}b-=e.left._count}if(!b)return new Dp(this,l);--b;if(e.right){if(b>=e.right._count)break;e=e.right}else break}return new Dp(this,[])};Zn.ge=function(b){for(var e=
this._compare,l=this.root,a=[],f=0;l;){var m=e(b,l.key);a.push(l);0>=m&&(f=a.length);l=0>=m?l.left:l.right}a.length=f;return new Dp(this,a)};Zn.gt=function(b){for(var e=this._compare,l=this.root,a=[],f=0;l;){var m=e(b,l.key);a.push(l);0>m&&(f=a.length);l=0>m?l.left:l.right}a.length=f;return new Dp(this,a)};Zn.lt=function(b){for(var e=this._compare,l=this.root,a=[],f=0;l;){var m=e(b,l.key);a.push(l);0<m&&(f=a.length);l=0>=m?l.left:l.right}a.length=f;return new Dp(this,a)};Zn.le=function(b){for(var e=
this._compare,l=this.root,a=[],f=0;l;){var m=e(b,l.key);a.push(l);0<=m&&(f=a.length);l=0>m?l.left:l.right}a.length=f;return new Dp(this,a)};Zn.find=function(b){for(var e=this._compare,l=this.root,a=[];l;){var f=e(b,l.key);a.push(l);if(0===f)return new Dp(this,a);l=0>=f?l.left:l.right}return new Dp(this,[])};Zn.remove=function(b){return(b=this.find(b))?b.remove():this};Zn.get=function(b){for(var e=this._compare,l=this.root;l;){var a=e(b,l.key);if(0===a)return l.value;l=0>=a?l.left:l.right}};var tr=
Dp.prototype;Object.defineProperty(tr,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(tr,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});tr.clone=function(){return new Dp(this.tree,this._stack.slice())};tr.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var e=Array(b.length),l=b[b.length-1];e[e.length-1]=new Cp(l._color,l.key,l.value,l.left,l.right,l._count);for(var a=b.length-2;0<=a;--a)l=
b[a],e[a]=l.left===b[a+1]?new Cp(l._color,l.key,l.value,e[a+1],l.right,l._count):new Cp(l._color,l.key,l.value,l.left,e[a+1],l._count);l=e[e.length-1];if(l.left&&l.right){b=e.length;for(l=l.left;l.right;)e.push(l),l=l.right;a=e[b-1];e.push(new Cp(l._color,a.key,a.value,l.left,l.right,l._count));e[b-1].key=l.key;e[b-1].value=l.value;for(a=e.length-2;a>=b;--a)l=e[a],e[a]=new Cp(l._color,l.key,l.value,l.left,e[a+1],l._count);e[b-1].left=e[b]}l=e[e.length-1];if(0===l._color)for(a=e[e.length-2],a.left===
l?a.left=null:a.right===l&&(a.right=null),e.pop(),a=0;a<e.length;++a)e[a]._count--;else if(l.left||l.right)for(l.left?A0(l,l.left):l.right&&A0(l,l.right),l._color=1,a=0;a<e.length-1;++a)e[a]._count--;else{if(1===e.length)return new LB(this.tree._compare,null);for(a=0;a<e.length;++a)e[a]._count--;a=e[e.length-2];for(var f,m,q,r=e.length-1;0<=r;--r){b=e[r];if(0===r){b._color=1;break}f=e[r-1];if(f.left===b){m=f.right;if(m.right&&0===m.right._color){m=f.right=au(m);q=m.right=au(m.right);f.right=m.left;
m.left=f;m.right=q;m._color=f._color;b._color=1;f._color=1;q._color=1;ak(f);ak(m);if(1<r){var u=e[r-2];u.left===f?u.left=m:u.right=m}e[r-1]=m;break}else if(m.left&&0===m.left._color){m=f.right=au(m);q=m.left=au(m.left);f.right=q.left;m.left=q.right;q.left=f;q.right=m;q._color=f._color;f._color=1;m._color=1;b._color=1;ak(f);ak(m);ak(q);1<r&&(u=e[r-2],u.left===f?u.left=q:u.right=q);e[r-1]=q;break}if(1===m._color)if(0===f._color){f._color=1;f.right=Cx(0,m);break}else f.right=Cx(0,m);else m=au(m),f.right=
m.left,m.left=f,m._color=f._color,f._color=0,ak(f),ak(m),1<r&&(u=e[r-2],u.left===f?u.left=m:u.right=m),e[r-1]=m,e[r]=f,r+1<e.length?e[r+1]=b:e.push(b),r+=2}else{m=f.left;if(m.left&&0===m.left._color){m=f.left=au(m);q=m.left=au(m.left);f.left=m.right;m.right=f;m.left=q;m._color=f._color;b._color=1;f._color=1;q._color=1;ak(f);ak(m);1<r&&(u=e[r-2],u.right===f?u.right=m:u.left=m);e[r-1]=m;break}else if(m.right&&0===m.right._color){m=f.left=au(m);q=m.right=au(m.right);f.left=q.right;m.right=q.left;q.right=
f;q.left=m;q._color=f._color;f._color=1;m._color=1;b._color=1;ak(f);ak(m);ak(q);1<r&&(u=e[r-2],u.right===f?u.right=q:u.left=q);e[r-1]=q;break}if(1===m._color)if(0===f._color){f._color=1;f.left=Cx(0,m);break}else f.left=Cx(0,m);else m=au(m),f.left=m.right,m.right=f,m._color=f._color,f._color=0,ak(f),ak(m),1<r&&(u=e[r-2],u.right===f?u.right=m:u.left=m),e[r-1]=m,e[r]=f,r+1<e.length?e[r+1]=b:e.push(b),r+=2}}a.left===l?a.left=null:a.right=null}return new LB(this.tree._compare,e[0])};Object.defineProperty(tr,
"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(tr,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(tr,"index",{get:function(){var b=0,e=this._stack;if(0===e.length)return(b=this.tree.root)?b._count:0;e[e.length-1].left&&(b=e[e.length-1].left._count);for(var l=e.length-2;0<=l;--l)e[l+1]===e[l].right&&(++b,e[l].left&&(b+=e[l].left._count));
return b},enumerable:!0});tr.next=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.right)for(e=e.right;e;)b.push(e),e=e.left;else for(b.pop();0<b.length&&b[b.length-1].right===e;)e=b[b.length-1],b.pop()}};Object.defineProperty(tr,"hasNext",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].left===b[e])return!0;return!1}});tr.update=function(b){var e=this._stack;if(0===e.length)throw Error("Can't update empty node!");
var l=Array(e.length),a=e[e.length-1];l[l.length-1]=new Cp(a._color,a.key,b,a.left,a.right,a._count);for(b=e.length-2;0<=b;--b)a=e[b],l[b]=a.left===e[b+1]?new Cp(a._color,a.key,a.value,l[b+1],a.right,a._count):new Cp(a._color,a.key,a.value,a.left,l[b+1],a._count);return new LB(this.tree._compare,l[0])};tr.prev=function(){var b=this._stack;if(0!==b.length){var e=b[b.length-1];if(e.left)for(e=e.left;e;)b.push(e),e=e.right;else for(b.pop();0<b.length&&b[b.length-1].left===e;)e=b[b.length-1],b.pop()}};
Object.defineProperty(tr,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var e=b.length-1;0<e;--e)if(b[e-1].right===b[e])return!0;return!1}});var Pma=$5,wL={},xL=eh,Uv=xL.Buffer;Uv.from&&Uv.alloc&&Uv.allocUnsafe&&Uv.allocUnsafeSlow?wL=xL:(B0(xL,wL),wL.Buffer=MB);B0(Uv,MB);MB.from=function(b,e,l){if("number"===typeof b)throw new TypeError("Argument must not be a number");return Uv(b,e,l)};MB.alloc=function(b,e,l){if("number"!==typeof b)throw new TypeError("Argument must be a number");
b=Uv(b);void 0!==e?"string"===typeof l?b.fill(e,l):b.fill(e):b.fill(0);return b};MB.allocUnsafe=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return Uv(b)};MB.allocUnsafeSlow=function(b){if("number"!==typeof b)throw new TypeError("Argument must be a number");return xL.SlowBuffer(b)};var Pe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Qma={},a6=Rj,D0=Oma,C0=Y5,Ep=yk,sca=Pma,yL=wL.Buffer,NB={};a6(II,C0);II.prototype._next=function(b){if((this||
Pe)._done++>=(this||Pe)._limit||!(this||Pe)._tree.valid)return si(b);var e=(this||Pe)._tree.key;var l=(this||Pe)._tree.value;if(!this._test(e))return si(b);(this||Pe).keyAsBuffer&&(e=yL.from(e));(this||Pe).valueAsBuffer&&(l=yL.from(l));(this||Pe)._tree[(this||Pe)._incr]();si(function(){b(null,e,l)})};II.prototype._test=function(){return!0};Lo.clearGlobalStore=function(b){b?Object.keys(NB).forEach(function(e){delete NB[e]}):NB={}};a6(Lo,D0);Lo.prototype._open=function(b,e){var l=this||Pe;si(function(){e(null,
l)})};Lo.prototype._put=function(b,e,l,a){if("undefined"===typeof e||null===e)e="";l=(this||Pe)._store[(this||Pe)._location].find(b);(this||Pe)._store[(this||Pe)._location]=l.valid?l.update(e):(this||Pe)._store[(this||Pe)._location].insert(b,e);si(a)};Lo.prototype._get=function(b,e,l){var a=(this||Pe)._store[(this||Pe)._location].get(b);if("undefined"===typeof a)return si(function(){l(Error("NotFound"))});!1===e.asBuffer||this._isBuffer(a)||(a=yL.from(String(a)));si(function(){l(null,a)})};Lo.prototype._del=
function(b,e,l){(this||Pe)._store[(this||Pe)._location]=(this||Pe)._store[(this||Pe)._location].remove(b);si(l)};Lo.prototype._batch=function(b,e,l){e=-1;for(var a,f,m,q=b.length,r=(this||Pe)._store[(this||Pe)._location];++e<q;)b[e]&&(a=this._isBuffer(b[e].key)?b[e].key:String(b[e].key),m=r.find(a),"put"===b[e].type?(f=this._isBuffer(b[e].value)?b[e].value:String(b[e].value),r=m.valid?m.update(f):r.insert(a,f)):r=m.remove());(this||Pe)._store[(this||Pe)._location]=r;si(l)};Lo.prototype._iterator=
function(b){return new II(this||Pe,b)};Lo.prototype._isBuffer=function(b){return yL.isBuffer(b)};Lo.destroy=function(b,e){b="$"+b;b in NB&&delete NB[b];si(e)};var Rma=Qma=Lo.default=Lo,Sma={},tca=wg,vca=E0(Ima),uca=E0(Rma);oP.valid=function(){return!0};oP.use_prefix=!1;var Tma=Sma=function(b){b.adapter("memory",oP,!0)},bh=lively.FreezerRuntime.recorderFor("lively.storage/database.js");bh.nodejsRequire=function(b){if(!bh.isNode)throw Error("nodejsRequire can only be used in nodejs!");return"undefined"!==
typeof System?System._nodeRequire(b):require("module")._load(b)};bh.nodejs_leveldbPath=function(b){if(b.startsWith("/"))return b;if(b.match(/[^\/]+:\/\//))return b.startsWith("file:")&&(b=b.replace(/^file:\/\//,"")),b;if(!bh.isNode)throw Error("nodejs_leveldbPath called under non-nodejs environment");var e="undefined"!==typeof System&&System.baseURL.startsWith("file://")?System.baseURL.replace("file://",""):bh.GLOBAL.process.cwd(),l=bh.nodejsRequire("path").join,a=bh.nodejsRequire("fs"),f=a.mkdirSync,
m=a.existsSync;a=a.readFileSync;if(b.includes("/"))return l(e,b);try{var q=a(l(e,"../package.json")),r=JSON.parse(q);if("lively.web"===r.name||"lively.next"===r.name){var u=l(e,"../.livelydbs");m(u)||f(u);return l(u,b)}}catch(v){}e=l(e,".livelydbs");m(e)||f(e);return l(e,b)};bh.nodejs_attemptToLoadProperPouchDB=function(){if(!bh.isNode)throw Error("nodejs_attemptToLoadProperPouchDB called under non-nodejs environment");if("undefined"!==typeof System){var b=System._nodeRequire("path").join,e=System.normalizeSync("lively.storage/index.js");
e=System.normalizeSync("pouchdb",e).replace(/file:\/\//,"");b=b(e,"../../lib/index.js");try{return bh.PouchDB=System._nodeRequire(b),bh.PouchDB.plugin(bh.pouchdbAdapterMem),!0}catch(l){return!1}}try{return bh.PouchDB=require("pouchdb"),bh.PouchDB.plugin(bh.pouchdbAdapterMem),!0}catch(l){return!1}};bh._PouchDB=Zha;bh.pouchdbAdapterMem=Tma;bh.Path=Cg;bh.GLOBAL="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:void 0;bh.isNode="undefined"!==typeof global&&
"undefined"!==typeof process;bh.PouchDB=bh._PouchDB;bh.PouchDB.plugin&&bh.pouchdbAdapterMem&&bh.PouchDB.plugin(bh.pouchdbAdapterMem);bh.createPouchDB=bh.isNode?function(){var b=!1,e=!1;return function(l,a){a=void 0===a?{}:a;b||(b=!0,e=bh.nodejs_attemptToLoadProperPouchDB());a.adapter||(a.adapter=l.startsWith("http")?"http":e?"leveldb":"memory");"leveldb"==a.adapter&&(l=bh.nodejs_leveldbPath(l));a=Object.assign({},a,{name:l});return new bh.PouchDB(a)}}():function(b,e){return new bh.PouchDB(Object.assign({name:b},
e))};var ng=function(b,e){e=void 0===e?{}:e;this.name=b;this.options=e;this._pouchdb=null};ng.findDB=function(b){return this.databases.get(b)};ng.ensureDB=function(b,e){var l=this.findDB(b);if(l)return l;l=new this(b,e);this.databases.set(b,l);b.endsWith("lively.storage-meta")||this.createMetaEntryForDB(b,e);return l};ng.knownDBs=function(b,e){return bh.Database.ensureDB("lively.storage-meta").getAll().then(function(l){return l.map(function(a){return a._id})})};ng.createMetaEntryForDB=function(b,
e){var l=bh.Database.ensureDB("lively.storage-meta");l.has(b).then(function(a){return!a&&l.set(b,{created:Date.now(),options:e})})};ng.knowsDB=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(l=e.ensureDB(b),f.yield(l.docCount(),2)):3!=f.nextAddress?(a=f.yieldResult,0<a?f.return(!0):f.yield(l.destroy(),3)):f.return(!1)})};ng.prototype.close=function(){this._pouchdb&&(this._pouchdb.close(),delete this._pouchdb)};ng.prototype.isDestroyed=
function(){return!!this.pouchdb._destroyed};ng.prototype.destroy=function(b){this.constructor.databases.delete(this.name);return this.isDestroyed()?{ok:!0}:this.pouchdb.destroy(b)};ng.prototype.update=function(b,e,l,a){a=void 0===a?0:a;var f=this,m,q,r,u,v,y,z,B,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:return m=l=l||{},q=void 0===m.ensure?!0:m.ensure,r=void 0===m.retryOnConflict?!0:m.retryOnConflict,u=void 0===m.maxUpdateAttempts?10:m.maxUpdateAttempts,
v={latest:!0},y=f,z=y.pouchdb,S.setCatchFinallyBlocks(2),S.yield(z.get(b,v),4);case 4:B=S.yieldResult;S.leaveTryBlock(3);break;case 2:if(G=S.enterCatchBlock(),"not_found"!==G.name||!q)throw G;case 3:return S.yield(e(B),5);case 5:C=S.yieldResult;if(!C||"object"!==typeof C)return S.return(null);C._id!==b&&(C._id=b);B&&C._rev!==B._rev&&(C._rev=B._rev);S.setCatchFinallyBlocks(6);return S.yield(z.put(C),8);case 8:return F=S.yieldResult,N=F.rev,S.return(Object.assign(C,{_rev:N}));case 6:L=S.enterCatchBlock();
if("conflict"===L.name&&r&&a<u)return S.return(f.update(b,e,l,a+1));throw L;}})};ng.prototype.mixin=function(b,e,l){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(a.update(b,function(m){return Object.assign(m||{_id:b},e)},l))})};ng.prototype.set=function(b,e,l){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(a.update(b,function(m){return e},l))})};ng.prototype.get=function(b,e){e=void 0===e?{}:e;var l=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return f.setCatchFinallyBlocks(2),f.yield(l.pouchdb.get(b,e),4);if(2!=f.nextAddress)return f.return(f.yieldResult);a=f.enterCatchBlock();if("not_found"===a.name)return f.return(void 0);throw a;})};ng.prototype.has=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?l.yield(e.get(b),2):l.return(!!l.yieldResult)})};ng.prototype.add=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e.pouchdb.post(b))})};
ng.prototype.docList=function(b){b=void 0===b?{}:b;var e=this,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.yield(e.pouchdb.allDocs(b),2);l=y.yieldResult;a=l.rows;f=[];for(m=0;m<a.length;m++)q=a[m],r=q.id,u=q.value,v=u.rev,f.push({id:r,rev:v});return y.return(f)})};ng.prototype.docCount=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.pouchdb.allDocs(),2);e=l.yieldResult;
return l.return(e.rows.length)})};ng.prototype.revList=function(b){var e=this,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(e.pouchdb.get(b,{revs:!0}),2);l=q.yieldResult;a=l._revisions;f=a.start;m=a.ids;return q.return(m.map(function(r){return f--+"-"+r}))})};ng.prototype.getAllRevisions=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(a=e,f=void 0===
a.skip?0:a.skip,m=void 0===a.limit?0:a.limit,u.yield(l.revList(b),2)):3!=u.nextAddress?(q=u.yieldResult,0<f&&(q=q.slice(f)),0<m&&(q=q.slice(0,m)),r=q.map(function(v){return{rev:v,id:b}}),u.yield(l.getDocuments(r),3)):u.return(u.yieldResult)})};ng.prototype.getAll=function(b){b=void 0===b?{}:b;var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(e.pouchdb.allDocs(Object.assign({},b,{include_docs:!0})),2);l=f.yieldResult;a=l.rows;return f.return(a.map(function(m){return m.doc}))})};
ng.prototype.setDocuments=function(b,e){var l=this,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(l.pouchdb.bulkDocs(b,e),2);case 2:a=y.yieldResult,f=0;case 3:if(!(f<a.length)){y.jumpTo(5);break}m=b[f];q=a[f];if(q.ok||"conflict"!==q.name||m._rev){y.jumpTo(4);break}return y.yield(l.set(m._id,m),7);case 7:r=y.yieldResult,u=r._id,v=r._rev,a[f]={ok:!0,id:u,rev:v};case 4:f++;y.jumpTo(3);break;case 5:return y.return(a)}})};ng.prototype.updateDocuments=
function(b,e,l){var a=this,f,m,q,r,u,v,y,z,B,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:return F.yield(a.pouchdb.bulkDocs(b,l),2);case 2:f=F.yieldResult,m=[],q={},r=0;case 3:if(!(r<f.length)){if(!m.length){F.jumpTo(8);break}B=Object;C=B.assign;G=q;return F.yield(a.updateDocuments(m,e,l),9)}u=b[r];v=f[r];q[v._id||u._id]=v;if(v.ok||"conflict"!==v.name){F.jumpTo(4);break}return F.yield(a.get(u._id),7);case 7:if(y=F.yieldResult,z=e(y,u))z._id||(z._id=
u._id),z._rev||(z._rev=y._rev),m.push(z);case 4:r++;F.jumpTo(3);break;case 9:q=C.call(B,{},G,{},F.yieldResult);case 8:return F.return(q)}})};ng.prototype.getDocuments=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,q,r,u,v,y,z,B,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return a=e,f=void 0===a.ignoreErrors?!0:a.ignoreErrors,G.yield(l.pouchdb.bulkGet({docs:b}),2);m=G.yieldResult;q=m.results;r=[];for(u=0;u<q.length;u++)for(v=q[u],y=v.docs,z=v.id,console.assert(1===
y.length,"getDocuments: expected only one doc for "+z),B=0;B<y.length;B++)C=y[B],f&&!C.ok||r.push(C.ok||C.error||C);return G.return(r)})};ng.prototype.query=function(b,e){return this.pouchdb.query(b,e)};ng.prototype.remove=function(b,e,l){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return"undefined"!==typeof e?(f={_id:b,_rev:e},q.jumpTo(2)):q.yield(a.get(b),3);2!=q.nextAddress&&(f=q.yieldResult);m=f;return q.return(m?a.pouchdb.remove(m):void 0)})};
ng.prototype.removeAll=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?(e=b.pouchdb,a.yield(e.allDocs(),2)):3!=a.nextAddress?(l=a.yieldResult,a.yield(Promise.all(l.rows.map(function(f){return e.remove(f.id,f.value.rev)})),3)):a.return(a.yieldResult)})};ng.prototype.replicateTo=function(b,e){b instanceof bh.Database&&(b=b.pouchdb);return this.pouchdb.replicate.to(b,e)};ng.prototype.replicateFrom=function(b,e){b instanceof bh.Database&&
(b=b.pouchdb);return this.pouchdb.replicate.from(b,e)};ng.prototype.sync=function(b,e){b instanceof bh.Database&&(b=b.pouchdb);return this.pouchdb.sync(b,e)};ng.prototype.getConflicts=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(e.pouchdb.query("conflict_index/conflict_index",Object.assign({reduce:!1,include_docs:!0,conflicts:!0},b)),2);l=f.yieldResult;a=l.rows;return f.return(a.map(function(m){var q={id:m.id,rev:m.doc._rev,
doc:m.doc};m.doc._conflicts&&(q.conflicts=m.doc._conflicts,delete m.doc._conflicts);return q}))})};ng.prototype.resolveConflicts=function(b,e){var l=this,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(l.pouchdb.get(b,{conflicts:!0}),2);case 2:return a=y.yieldResult,f=a._conflicts.map(function(z){return{id:b,rev:z}}),y.yield(l.getDocuments(f),3);case 3:m=y.yieldResult,q=a,r=$jscomp.makeIterator(m),u=r.next();case 4:if(u.done){y.jumpTo(6);
break}v=u.value;return y.yield(e(q,v),7);case 7:return(q=y.yieldResult)?y.yield(l.set(b,q),8):y.return(null);case 8:return q=y.yieldResult,y.yield(l.pouchdb.remove(v),5);case 5:u=r.next();y.jumpTo(4);break;case 6:return y.return(q)}})};ng.prototype.diffWith=function(b){var e=this,l,a,f,m,q,r,u,v,y,z,B,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.yield(b.docList(),2);if(3!=F.nextAddress)return l=F.yieldResult,F.yield(e.docList(),3);a=F.yieldResult;
f=l.reduce(function(N,L){var S={};return Object.assign(N,(S[L.id]=L.rev,S))},{});m=a.reduce(function(N,L){var S={};return Object.assign(N,(S[L.id]=L.rev,S))},{});q=[];r=[];u=[];for(v in f)y=f[v],(z=m[v])?y!=z&&u.push({right:{id:v,rev:y},left:{id:v,rev:z}}):r.push({id:v,rev:y});for(B in m)C=m[B],(G=f[B])||q.push({id:B,rev:C});return F.return({inLeft:q,inRight:r,changed:u})})};ng.loadDump=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==
u.nextAddress?(a=b,f=a.header,m=a.docs,q=e.name||f.name,r=l.ensureDB(q),u.yield(r.setDocuments(m,{new_edits:!1}),2)):u.return(r)})};ng.prototype.dump=function(b){b=void 0===b?{}:b;var e=this,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){if(1==S.nextAddress)return l=b,a=l.filterFn,f=l.name,m=l.type,q=l.dbInfo,r=e,u=r.name,v=r.pouchdb,z=y=f||u,B=m||v.type(),C=(new Date).toJSON(),G=Object,F=G.assign,S.yield(v.info(),2);if(3!=S.nextAddress)return N={name:z,
db_type:B,start_time:C,db_info:F.call(G,{},S.yieldResult,{db_name:y},q)},S.yield(e.getAll({attachments:!0}),3);L=S.yieldResult;"function"===typeof a&&(L=a(L,N));return S.return({header:N,docs:L})})};ng.prototype.backup=function(b){b=void 0===b?1:b;var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(l=e.name+"_backup_"+b,a=e.constructor.ensureDB(l),f.yield(e.replicateTo(a),2)):f.return(a)})};ng.prototype.migrate=function(b){var e=this,l,a,f,m,q,r;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(e.getAll(),2);if(3!=u.nextAddress){l=u.yieldResult;a=[];f=[];for(m=0;m<l.length;m++)q=l[m],(r=b(q,m))?(r.hasOwnProperty("_id")||(r._id=q._id),r.hasOwnProperty("_rev")&&delete r._rev,a.push(r)):f.push(q);return u.yield(e.setDocuments(a),3)}return u.return({migrated:a.length,unchanged:f.length})})};ng.prototype.createDesignDocs=function(b){return b.map(this.createDesignDoc)};ng.prototype.createDesignDoc=
function(b){var e=b.name,l=b.mapFn,a=b.reduceFn,f=b.filterFn;b={_id:"_design/"+e,version:void 0===b.version?1:b.version};f&&bh.Path("filters."+e).set(b,f.toString(),!0);l&&bh.Path("views."+e+".map").set(b,l.toString(),!0);a&&bh.Path("views."+e+".reduce").set(b,a.toString(),!0);return b};ng.prototype.addDesignDocs=function(b,e){e=void 0===e?!1:e;var l=this,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?(a=l.createDesignDocs(b),m.yield(l.updateDocuments(a,
function(q,r){return!q.hasOwnProperty("version")||r.hasOwnProperty("version")&&r.version>q.version?r:null}),2)):3!=m.nextAddress?(f=m.yieldResult,e?m.yield(Promise.all(a.map(function(q){return l.designDocDoQueryStale(q._id)})),3):m.jumpTo(3)):m.return(f)})};ng.prototype.addDesignDoc=function(b,e){var l=b.name,a=b.mapFn,f=b.reduceFn,m=b.version;e=void 0===e?!1:e;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return 1==v.nextAddress?(r=q.createDesignDoc({name:l,mapFn:a,
reduceFn:f,version:m}),v.yield(q.set(r._id,r),2)):3!=v.nextAddress?(u=v.yieldResult,e?v.yield(q.designDocDoQueryStale(r._id),3):v.jumpTo(3)):v.return(u)})};ng.prototype.removeDesignDoc=function(b){return this.remove("_design/"+b)};ng.prototype.designDocDoQueryStale=function(b){b=$jscomp.makeIterator(b.split("/"));b.next();b=b.next().value;return this.query(b,{stale:"update_after"})};$jscomp.global.Object.defineProperties(ng.prototype,{pouchdb:{configurable:!0,enumerable:!0,get:function(){return this._pouchdb?
this._pouchdb:this._pouchdb=bh.createPouchDB(this.name,this.options)}}});$jscomp.global.Object.defineProperties(ng,{PouchDB:{configurable:!0,enumerable:!0,get:function(){return bh.PouchDB},set:function(b){bh.PouchDB=b}},databases:{configurable:!0,enumerable:!0,get:function(){return this._databases||(this._databases=new Map)}}});bh.Database=ng;bh.default=ng;var Jd=lively.FreezerRuntime.recorderFor("lively.storage/objectdb.js");Jd.isHash=function(b){return"string"===typeof b&&40===b.length&&b.match(Jd.hashRe)};
Jd.checkArg=function(b,e,l){if("undefined"===typeof e&&"string"===typeof l&&!l.includes("undefined"))throw Error("parameter "+b+" is undefined");if(null===e&&"string"===typeof l&&!l.includes("null"))throw Error("parameter "+b+" is null");if("string"===typeof l){var a=typeof e,f=e?e.constructor.name:"";if(!l.split("|").some(function(m){return a===m||f===m}))throw Error('parameter "'+b+'" expected to be of type '+l+" but is "+(f||a));}if("function"===typeof l&&(e=l(e))&&e.error)throw Error('check of parameter "'+
b+'" failed: '+e.error);};Jd.checkArgs=function(b,e,l){for(var a in e)Jd.checkArg(a,b[a],e[a]);if("function"===typeof l&&(e=l(b))&&e.error)throw Error(e.error);return b};Jd.Database=ng;Jd.resource=x;Jd.obj=lf;Jd.promise=oe;Jd.arr=Qe;Jd.string=Hg;Jd.Path=Cg;Jd.parse=sg;Jd.categorizer=IE;Jd.sha1=function(){function b(){var m=f.createHash("sha1");return{update:function(q){return m.update(q)},digest:function(){return m.digest("hex")}}}function e(m){function q(S){v[F]|=(255&S)<<N;N?N-=8:(F++,N=24);16===
F&&r()}function r(){for(var S=16;80>S;S++){var ha=v[S-3]^v[S-8]^v[S-14]^v[S-16];v[S]=ha<<1|ha>>>31}var qa,D;ha=y;var P=z,J=B,M=C,X=G;for(S=0;80>S;S++){20>S?(qa=M^P&(J^M),D=1518500249):40>S?(qa=P^J^M,D=1859775393):60>S?(qa=P&J|M&(P|J),D=2400959708):(qa=P^J^M,D=3395469782);var T=(ha<<5|ha>>>27)+qa+X+D+(0|v[S]);X=M;M=J;J=P<<30|P>>>2;P=ha;ha=T}y=y+ha|0;z=z+P|0;B=B+J|0;C=C+M|0;G=G+X|0;for(S=F=0;16>S;S++)v[S]=0}function u(S){for(var ha="",qa=28;0<=qa;qa-=4)ha+=(S>>qa&15).toString(16);return ha}var v,y=
1732584193,z=4023233417,B=2562383102,C=271733878,G=3285377520,F=0,N=24,L=0;return v=m?l:new Uint32Array(80),{update:function(S){if("string"==typeof S){var ha=S.length;L+=8*ha;for(var qa=0;qa<ha;qa++)q(S.charCodeAt(qa))}else for(ha=S.length,L+=8*ha,qa=0;qa<ha;qa++)q(S[qa])},digest:function(){q(128);(14<F||14===F&&24>N)&&r();F=14;N=24;q(0);q(0);q(0xffffffffff<L?L/1099511627776:0);q(4294967295<L?L/4294967296:0);for(var S=24;0<=S;S-=8)q(L>>S);return u(y)+u(z)+u(B)+u(C)+u(G)}}}var l,a,f;return"object"==
typeof process&&"object"==typeof process.versions&&process.versions.node&&"renderer"!==process.__atom_type?(f="undefined"!=typeof System?System._nodeRequire("crypto"):require("crypto"),a=b):(l=new Uint32Array(80),a=e),function(m){if(void 0===m)return a(!1);var q=a(!0);return q.update(m),q.digest()}}();Jd.hashRe=/^[0-9a-f]+$/i;Jd.objectDBs=Jd.objectDBs||new Map;var Xg=function(b,e){this.name=b;if(!e.snapshotLocation||!e.snapshotLocation.isResource)throw Error("ObjectDB needs snapshotLocation!");this.snapshotLocation=
e.snapshotLocation;this.__versionDB=this.__commitDB=null};Xg.dbList=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(b=Jd.Database.ensureDB("internal__objectdb-meta"),e.yield(b.getAll(),2)):e.return(e.yieldResult.map(function(l){return l._id}))})};Xg.find=function(b){var e=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(l=Jd.objectDBs.get(b))return m.return(l);a=Jd.Database.ensureDB("internal__objectdb-meta");
return m.yield(a.get(b),2)}return(f=m.yieldResult)?m.return(e.named(b,f)):m.return()})};Xg.named=function(b,e){e=void 0===e?{}:e;var l=Jd.objectDBs.get(b);if(l)return l;if(!e||!e.snapshotLocation)throw Error("need snapshotLocation");if("string"===typeof e.snapshotLocation)try{e.snapshotLocation=Jd.resource(e.snapshotLocation)}catch(a){e.snapshotLocation=Jd.resource(System.baseURL).join(e.snapshotLocation)}l=new this(b,e);Jd.objectDBs.set(b,l);Jd.Database.ensureDB("internal__objectdb-meta").set(b,
Object.assign({},e,{snapshotLocation:e.snapshotLocation.url})).catch(function(a){return console.error("error writing objectdb meta:",a)});return l};Xg.prototype.destroy=function(){var b=this,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return(e=Jd.Database.findDB(b.name+"-commits"))?f.yield(e.destroy(),2):f.jumpTo(2);if(4!=f.nextAddress)return(l=Jd.Database.findDB(b.name+"-version-graph"))?f.yield(l.destroy(),4):f.jumpTo(4);Jd.objectDBs.delete(b.name);a=
Jd.Database.ensureDB("internal__objectdb-meta");return f.yield(a.remove(b.name),0)})};Xg.prototype.snapshotResourceFor=function(b){var e=b.content.slice(0,2);b=b.content.slice(2);return this.snapshotLocation.join(e+"/"+b+".json")};Xg.prototype.snapshotObject=function(b,e,l,a,f,m,q,r){var u=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return v=function(B){return B},z.yield(v(l),2);y=z.yieldResult;return z.return(u.commit(b,e,y,f,m,q,r))})};Xg.prototype.loadObject=
function(b,e,l,a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(m.loadSnapshot(b,e,a,f),2);q=u.yieldResult;r=function(v){return v};return u.return(r(q))})};Xg.prototype.has=function(b,e){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield(l.objectStats(b,e),2):a.return(!!a.yieldResult)})};Xg.prototype.objects=function(b){var e=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(e.objectStats(b),2);l=m.yieldResult;if(b)return m.return(Object.keys(l||{}));a={};for(f in l)a[f]=Object.keys(l[f]);return m.return(a)})};Xg.prototype.objectStats=function(b,e){var l=this,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:a={};if(f=l.__commitDB){J.jumpTo(2);break}return J.yield(l._commitDB(),3);case 3:f=J.yieldResult;case 2:return m=f,q={reduce:!0,group:!0},b&&e?q.key=b+
"\x00"+e:b&&(q.startkey=b+"\x00",q.endkey=b+"\ufff0"),J.setCatchFinallyBlocks(4),J.yield(m.pouchdb.query("nameWithMaxMinTimestamp_index",q),6);case 6:r=J.yieldResult;u=r.rows;v=$jscomp.makeIterator(u);for(y=v.next();!y.done;y=v.next())B=z=y.value,C=B.key,G=B.value,F=G.count,N=G.max,L=G.min,S=$jscomp.makeIterator(C.split("\x00")),ha=S.next().value,qa=S.next().value,D=a[ha]||(a[ha]={}),D[qa]={count:F,newest:N,oldest:L};J.leaveTryBlock(5);break;case 4:return P=J.enterCatchBlock(),console.error(P),J.return(a);
case 5:return b&&e?J.return((a[b]||{})[e]):b?J.return(a[b]):J.return(a)}})};Xg.prototype.getCommits=function(b,e,l,a){l=void 0===l?"HEAD":l;a=void 0===a?Infinity:a;var f=this,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(f._log(b,e,l,a),2);case 2:m=v.yieldResult;if(!m.length)return v.return([]);if(q=f.__commitDB){v.jumpTo(3);break}return v.yield(f._commitDB(),4);case 4:q=v.yieldResult;case 3:return r=q,v.yield(r.getDocuments(m.map(function(y){return{id:y}})),
5);case 5:return u=v.yieldResult,v.return(u)}})};Xg.prototype.getCommit=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return(l=e.__commitDB)?f.jumpTo(2):f.yield(e._commitDB(),3);2!=f.nextAddress&&(l=f.yieldResult);a=l;return f.return(a.get(b))})};Xg.prototype.getCommitsWithIds=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return b.length?(l=e.__commitDB)?f.jumpTo(2):f.yield(e._commitDB(),
3):f.return([]);2!=f.nextAddress&&(l=f.yieldResult);a=l;return f.return(a.getDocuments(b.map(function(m){return{id:m}})))})};Xg.prototype.getLatestCommit=function(b,e,l,a){l=void 0===l?"HEAD":l;a=void 0===a?!1:a;var f=this,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){switch(B.nextAddress){case 1:return m=$jscomp,q=m.makeIterator,B.yield(f._log(b,e,l,1),2);case 2:r=q.call(m,B.yieldResult);u=r.next().value;if(!u)return B.return(null);if(v=f.__commitDB){B.jumpTo(3);break}return B.yield(f._commitDB(),
4);case 4:v=B.yieldResult;case 3:return y=v,B.yield(y.get(u),5);case 5:return(z=B.yieldResult)&&z.deleted&&!a?B.return(null):B.return(z)}})};Xg.prototype.commit=function(b,e,l,a,f,m,q){m=void 0===m?"HEAD":m;var r=this,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T;return $jscomp.asyncExecutePromiseGeneratorProgram(function(fa){switch(fa.nextAddress){case 1:u=a;v=u.author;y=void 0===u.description?"no description":u.description;z=void 0===u.tags?[]:u.tags;B=u.timestamp;C=void 0===u.message?"":u.message;G=
u.metadata;F=u.preview;if(!b)throw Error("object needs a type");if(!e)throw Error("object needs a name");if(!v)throw Error("Cannot commit "+b+"/"+e+" without user");if(N=r.__versionDB){fa.jumpTo(2);break}return fa.yield(r._versionDB(),3);case 3:N=fa.yieldResult;case 2:return L=N,fa.yield(r.versionGraph(b,e),4);case 4:qa=(ha=(S=fa.yieldResult)?S.refs[m]:null)?[ha]:[];if(q){if(!S)throw Error('Trying to store "'+b+"/"+e+'" on top of expected version '+q+" but no version entry exists!");if(ha!==q)throw Error('Trying to store "'+
b+"/"+e+'" on top of expected version '+q+" but ref "+m+" is of version "+ha+"!");}P=(D=Jd.isHash(l))?null:l?JSON.stringify(l):null;J=r._createCommit(b,e,y,z,G,v,B,C,qa,D?null:l,P,f||F,D?l:null);if(!l||D){fa.jumpTo(5);break}M=r.snapshotResourceFor(J);return fa.yield(M.parent().ensureExistance(),6);case 6:return M.canDealWithJSON?fa.yield(M.writeJson(l),5):fa.yield(M.write(P),5);case 5:if(X=r.__commitDB){fa.jumpTo(11);break}return fa.yield(r._commitDB(),12);case 12:X=fa.yieldResult;case 11:return T=
X,fa.yield(T.set(J._id,J),13);case 13:return J=fa.yieldResult,S||(S={refs:{},history:{}}),S.refs[m]=J._id,S.history[J._id]=qa,fa.yield(L.set(b+"/"+e,S),14);case 14:return fa.return(J)}})};Xg.prototype.loadSnapshot=function(b,e,l,a){a=void 0===a?"HEAD":a;var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(l&&"string"!==typeof l){m=l;u.jumpTo(2);break}if(l){if(q=f.__commitDB){u.jumpTo(6);break}return u.yield(f._commitDB(),7)}return u.yield(f.getLatestCommit(b,
e,a),5);case 5:m=u.yieldResult;u.jumpTo(2);break;case 7:q=u.yieldResult;case 6:return r=q,u.yield(r.get(l),8);case 8:m=u.yieldResult;case 2:if(!m)throw Error("Cannot find commit to loadSnapshot for "+b+"/"+e+" (using "+l+")");return u.return(f.snapshotResourceFor(m).readJson())}})};Xg.prototype.revert=function(b,e,l,a){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:if(m=f.__versionDB){u.jumpTo(2);break}return u.yield(f._versionDB(),3);
case 3:m=u.yieldResult;case 2:return q=m,u.yield(q.get(b+"/"+e),4);case 4:return r=u.yieldResult,r.refs[l||"HEAD"]=a,delete r.deleted,u.yield(q.set(b+"/"+e,r),5);case 5:return u.return(r)}})};Xg.prototype._createCommit=function(b,e,l,a,f,m,q,r,u,v,y,z,B){r=void 0===r?"":r;u=void 0===u?[]:u;!z&&v&&v.preview&&(z=v.preview);return this._createCommitFromSpec({name:e,type:b,timestamp:q||Date.now(),author:{name:m.name,email:m.email,realm:m.realm},tags:a,description:l,preview:z,message:r,content:B||y&&Jd.sha1(y)||
null,deleted:!B&&!v,metadata:f,ancestors:u},!0)};Xg.prototype._createCommitFromSpec=function(b,e){e=void 0===e?!1:e;if(!b.name)throw Error("commit needs name");if(!b.type)throw Error("commit needs type");if(!b.author)throw Error("commit needs author");if(!b.author.name)throw Error("commit needs author.name");b.timestamp||(b.timestamp=Date.now());b.tags||(b.tags=[]);!e&&b.content&&(e=Jd.isHash(b.content),e||(b.content=Jd.sha1(b.content)));e=Jd.obj.dissoc(b,["preview"]);e=Jd.sha1(JSON.stringify(e));
return Object.assign(b,{_id:e})};Xg.prototype._commitDB=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__commitDB)return a.return(b.__commitDB);e=b.name+"-commits";if(l=Jd.Database.findDB(e))return a.return(b.__commitDB=l);l=Jd.Database.ensureDB(e);return a.yield(l.addDesignDocs(b._commitdb_indexes),2)}return a.return(b.__commitDB=l)})};Xg.prototype.close=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:if(!b.__commitDB){e.jumpTo(2);
break}return e.yield(b.__commitDB.close(),3);case 3:b.__commitDB=null;case 2:if(!b.__versionDB){e.jumpTo(0);break}return e.yield(b.__versionDB.close(),5);case 5:b.__versionDB=null,e.jumpToEnd()}})};Xg.prototype.versionGraph=function(b,e){var l=this,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:if(a=l.__versionDB){q.jumpTo(2);break}return q.yield(l._versionDB(),3);case 3:a=q.yieldResult;case 2:return f=a,q.yield(f.get(b+"/"+e),4);case 4:return m=
q.yieldResult,q.return(!m||m.deleted||m._deleted?null:m)}})};Xg.prototype._log=function(b,e,l,a){a=void 0===a?Infinity:a;var f=this,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(f.versionGraph(b,e),2);m=v.yieldResult;if(!m||m.deleted||m._deleted)return v.return([]);q=m.refs.HEAD;for(r=[];;){if(r.includes(q))throw Error("cyclic version graph???");r.push(q);u=$jscomp.makeIterator(m.history[q]||[]);q=u.next().value;if(!q||r.length>=a)break}return v.return(r)})};
Xg.prototype._findTimestampedVersionsOfObjectNamed=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,q,r,u,v,y,z,B,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:a=e;f=void 0===a.include_docs?!0:a.include_docs;m=void 0===a.descending?!0:a.descending;q=void 0===a.startTime?"0".repeat(13):a.startTime;r=void 0===a.endTime?"9".repeat(13):a.endTime;u=b+"\x00"+(m?r:q);v=b+"\x00"+(m?q:r);if(y=l.__commitDB){G.jumpTo(2);break}return G.yield(l._commitDB(),3);case 3:y=
G.yieldResult;case 2:return z=y,G.yield(z.pouchdb.query("nameAndTimestamp_index",Object.assign({},e,{descending:m,include_docs:f,startkey:u,endkey:v})),4);case 4:return B=G.yieldResult,C=B.rows,G.return(f?C.map(function(F){return F.doc}):C.map(function(F){return F.id}))}})};Xg.prototype._versionDB=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){if(b.__versionDB)return a.return(b.__versionDB);e=b.name+"-version-graph";if(l=Jd.Database.findDB(e))return a.return(b.__versionDB=
l);l=Jd.Database.ensureDB(e);return a.yield(l.addDesignDocs(b._versiondb_indexes),2)}return a.return(b.__versionDB=l)})};Xg.prototype.exportToDir=function(b,e,l,a){l=void 0===l?!1:l;a=void 0===a?!1:a;var f=this,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra,gb,ea,aa,ia,Aa,ob,Nb,Ab,Kb,jc,ub,Gc,Yc,Z,sa,ua,db,Cb,Pc,Oc,kc,be;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ud){switch(Ud.nextAddress){case 1:"string"===typeof b&&(b=Jd.resource(b));if(f.__commitDB){Ud.jumpTo(2);break}return Ud.yield(f._commitDB(),
3);case 3:case 2:if(m=f.__versionDB){Ud.jumpTo(4);break}return Ud.yield(f._versionDB(),5);case 5:m=Ud.yieldResult;case 4:q=m;r=[];if(!e)return Ud.yield(q.getAll(),13);u=$jscomp.makeIterator(e);v=u.next();case 8:if(v.done){Ud.jumpTo(7);break}z=y=v.value;B=z.name;C=z.type;G=b.join(C).join(B).asDirectory();return Ud.yield(f.versionGraph(C,B),11);case 11:return F=Ud.yieldResult,N=F.refs,L=F.history,S=Object.keys(L),Ud.yield(f.getCommitsWithIds(S),12);case 12:ha=Ud.yieldResult;r.push({refs:N,history:L,
currentExportDir:G,commits:ha,name:B,type:C});v=u.next();Ud.jumpTo(8);break;case 13:qa=Ud.yieldResult,D=$jscomp.makeIterator(qa),P=D.next();case 14:if(P.done){Ud.jumpTo(7);break}M=J=P.value;X=M.refs;T=M.history;fa=M._id;if(fa.startsWith("_")){Ud.jumpTo(15);break}return Ud.yield(f.getCommit(X.HEAD||Object.keys(T)[0]),17);case 17:return Ra=Ud.yieldResult,gb=Ra.type,ea=Ra.name,aa=b.join(gb).join(ea).asDirectory(),ia=Object.keys(T),Ud.yield(f.getCommitsWithIds(ia),18);case 18:Aa=Ud.yieldResult,r.push({refs:X,
history:T,currentExportDir:aa,commits:Aa,name:ea,type:gb});case 15:P=D.next();Ud.jumpTo(14);break;case 7:ob={},Nb=$jscomp.makeIterator(r),Ab=Nb.next();case 19:if(Ab.done){Ud.jumpTo(0);break}jc=Kb=Ab.value;ub=jc.refs;Gc=jc.history;ob.$jscomp$loop$prop$currentExportDir$1313$2644=jc.currentExportDir;Yc=jc.commits;Z=jc.name;sa=jc.type;a||(Yc=Yc.filter(function(ah){return!ah.deleted}));ua=l?Yc.map(function(ah){return function(vg){if(vg.deleted||vg._deleted||!vg.content)return null;delete vg._rev;vg=f.snapshotResourceFor(vg);
var ki=ah.$jscomp$loop$prop$currentExportDir$1313$2644.join(vg.parent().name()+"/"+vg.name());return{from:vg,to:ki}}}(ob)).filter(Boolean):[];l||Yc.forEach(function(ah){delete ah._rev});return Ud.yield(ob.$jscomp$loop$prop$currentExportDir$1313$2644.ensureExistance(),22);case 22:return Ud.yield(ob.$jscomp$loop$prop$currentExportDir$1313$2644.join("index.json").writeJson({name:Z,type:sa}),23);case 23:return Ud.yield(ob.$jscomp$loop$prop$currentExportDir$1313$2644.join("commits.json").writeJson(Yc),
24);case 24:return Ud.yield(ob.$jscomp$loop$prop$currentExportDir$1313$2644.join("history.json").writeJson({refs:ub,history:Gc}),25);case 25:db=$jscomp.makeIterator(ua),Cb=db.next();case 26:if(Cb.done){ob={$jscomp$loop$prop$currentExportDir$1313$2644:ob.$jscomp$loop$prop$currentExportDir$1313$2644};Ab=Nb.next();Ud.jumpTo(19);break}Oc=Pc=Cb.value;kc=Oc.from;be=Oc.to;return Ud.yield(kc.copyTo(be),27);case 27:Cb=db.next(),Ud.jumpTo(26)}})};Xg.prototype.exportToSpecs=function(b,e){e=void 0===e?!1:e;var l=
this,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){switch(S.nextAddress){case 1:a=[];if(b){S.jumpTo(2);break}b=[];return S.yield(l.objectStats(),3);case 3:for(m in f=S.yieldResult||{},f)for(q in f[m])b.push({type:m,name:q});case 2:r=$jscomp.makeIterator(b),u=r.next();case 4:if(u.done){S.jumpTo(6);break}y=v=u.value;z=y.name;B=y.type;return S.yield(l.versionGraph(B,z),7);case 7:return C=S.yieldResult,G=C.refs,F=C.history,N=Object.keys(F),S.yield(l.getCommitsWithIds(N),
8);case 8:L=S.yieldResult;e||(L=L.filter(function(ha){return!ha.deleted}));L.forEach(function(ha){delete ha._rev});a.push({type:B,name:z,commits:L,history:{refs:G,history:F}});u=r.next();S.jumpTo(4);break;case 6:return S.return(a)}})};Xg.prototype.importFromDir=function(b,e,l){function a(C){var G,F,N,L,S,ha,qa,D,P,J;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:return G=$jscomp,F=G.makeIterator,M.yield(Promise.all([C.join("index.json").readJson(),C.join("commits.json").readJson(),
C.join("history.json").readJson()]),2);case 2:N=F.call(G,M.yieldResult);L=N.next().value;S=L.type;ha=L.name;qa=N.next().value;D=N.next().value;if(!l){P=[];M.jumpTo(3);break}return M.yield(C.dirList(1,{exclude:function(X){return!X.isDirectory()}}),4);case 4:P=M.yieldResult;case 3:return J=P,M.return({dir:C,type:S,name:ha,commits:qa,history:D,snapshotDirs:J})}})}e=void 0===e?!1:e;l=void 0===l?!1:l;var f=this,m,q,r,u,v,y,z,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:return C.yield(b.dirList(3,
{exclude:function(G){return!G.isDirectory()&&"index.json"!==G.name()}}),2);case 2:m=C.yieldResult,m=m.filter(function(G){return"index.json"===G.name()}),q=m.map(function(G){return G.parent()}),r=[],u=$jscomp.makeIterator(q),v=u.next();case 3:if(v.done){C.jumpTo(5);break}y=v.value;z=r;B=z.push;return C.yield(a(y),6);case 6:B.call(z,C.yieldResult);v=u.next();C.jumpTo(3);break;case 5:return C.return(f.importFromSpecs(r,e,l))}})};Xg.prototype.importFromSpecs=function(b,e,l){e=void 0===e?!1:e;l=void 0===
l?!1:l;var a=this,f,m,q,r,u,v,y,z,B,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:if(e){F.jumpTo(2);break}if(f=a.__versionDB){F.jumpTo(3);break}return F.yield(a._versionDB(),4);case 4:f=F.yieldResult;case 3:m=f,q=$jscomp.makeIterator(b),r=q.next();case 5:if(r.done){F.jumpTo(2);break}v=u=r.value;y=v.type;z=v.name;return F.yield(m.get(y+"/"+z),8);case 8:if(F.yieldResult)throw Error("Import failed: object "+y+"/"+z+" already exists and overwrite is not allowed");
r=q.next();F.jumpTo(5);break;case 2:B=$jscomp.makeIterator(b),C=B.next();case 9:if(C.done){F.jumpTo(11);break}G=C.value;return F.yield(a.importFromSpec(G,!0,l),10);case 10:C=B.next();F.jumpTo(9);break;case 11:return F.return(b)}})};Xg.prototype.importFromSpec=function(b,e,l){e=void 0===e?!1:e;l=void 0===l?!1:l;var a=this,f,m,q,r,u,v,y,z,B,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:if(f=a.__versionDB){L.jumpTo(2);break}return L.yield(a._versionDB(),
3);case 3:f=L.yieldResult;case 2:m=f;if(q=a.__commitDB){L.jumpTo(4);break}return L.yield(a._commitDB(),5);case 5:q=L.yieldResult;case 4:r=q;u=a;v=u.snapshotLocation;y=b;z=y.type;B=y.name;C=y.commits;G=y.history;F=y.snapshotDirs;if(!(N=!e)){L.jumpTo(6);break}return L.yield(m.get(z+"/"+B),7);case 7:N=L.yieldResult;case 6:if(N)throw Error("Import failed: object "+z+"/"+B+" already exists and overwrite is not allowed");return L.yield(Promise.all([r.setDocuments(C),m.set(z+"/"+B,G)].concat($jscomp.arrayFromIterable(F&&
l?F.map(function(S){return S.copyTo(v.join(S.name()).asDirectory())}):[]))),8);case 8:return L.return(b)}})};Xg.prototype.importFromResource=function(b,e,l,a,f){f=void 0===f?!1:f;var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return u.yield(l.readJson(),2);case 2:q=u.yieldResult;if(!(r=f)){u.jumpTo(3);break}return u.yield(m.has(b,e),4);case 4:r=u.yieldResult;case 3:if(!r){u.jumpTo(5);break}return u.yield(m.delete(b,e,!1),5);case 5:return u.return(m.commit(b,
e,q,a))}})};Xg.prototype.replicateTo=function(b,e,l,a){return(new Jd.Synchronization(this,b,e,l,Object.assign({method:"replicateTo"},a))).start()};Xg.prototype.replicateFrom=function(b,e,l,a){return(new Jd.Synchronization(this,b,e,l,Object.assign({method:"replicateFrom"},a))).start()};Xg.prototype.sync=function(b,e,l,a){return(new Jd.Synchronization(this,b,e,l,Object.assign({method:"sync"},a))).start()};Xg.prototype.getConflicts=function(b,e){function l(v,y){var z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){return 1==
B.nextAddress?B.yield(v.getConflicts({include_docs:!0}),2):3!=B.nextAddress?(z=B.yieldResult,B.yield(Promise.all(z.map(function(C){var G,F,N,L,S,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){if(1==qa.nextAddress){G=C;F=G.id;N=G.rev;L=G.conflicts;S=G.doc;if(e&&e[y]&&!e[y][F])return qa.return(null);if(!b)return qa.jumpTo(2);ha=L.map(function(D){return{id:F,rev:D}});return qa.yield(v.getDocuments(ha),3)}2!=qa.nextAddress&&(L=qa.yieldResult);b?Jd.obj.dissoc(S,["_conflicts"]):S=null;
return qa.return({id:F,rev:N,conflicts:L,kind:y,doc:S})})})),3)):B.return(B.yieldResult.filter(Boolean))})}var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(f=a.__commitDB){v.jumpTo(2);break}return v.yield(a._commitDB(),3);case 3:f=v.yieldResult;case 2:m=f;if(q=a.__versionDB){v.jumpTo(4);break}return v.yield(a._versionDB(),5);case 5:q=v.yieldResult;case 4:return r=q,v.yield(l(r,"versions"),6);case 6:return u=v.yieldResult,v.yield(l(m,
"commits"),8);case 8:return v.yield(v.yieldResult,7);case 7:return v.return({versionConflicts:u,commitConflicts:v.yieldResult})}})};Xg.prototype.resolveConflict=function(b){var e=this,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:l=b;a=l.resolved;f=l.delete;m=l.kind;q=l.id;if("versions"===m){if(v=e.__versionDB){y.jumpTo(7);break}return y.yield(e._versionDB(),8)}if("commits"!==m)throw Error("Unknown conflict kind: "+m);if(u=e.__commitDB){y.jumpTo(5);
break}return y.yield(e._commitDB(),6);case 6:u=y.yieldResult;case 5:r=u;y.jumpTo(3);break;case 8:v=y.yieldResult;case 7:r=v;case 3:return y.yield(r.set(q,a),9);case 9:return y.yield(Promise.all(f.map(function(z){return r.pouchdb.remove(q,z)})),0)}})};Xg.prototype.getDiff=function(b,e){var l=this,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra,gb,ea,aa,ia,Aa,ob,Nb,Ab,Kb,jc,ub;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Gc){switch(Gc.nextAddress){case 1:a=b;"string"===typeof b&&
(a=Jd.Database.ensureDB(b+"-commits"),e=Jd.Database.ensureDB(b+"-version-graph"));if(f=l.__commitDB){Gc.jumpTo(2);break}return Gc.yield(l._commitDB(),3);case 3:f=Gc.yieldResult;case 2:m=f;if(q=l.__versionDB){Gc.jumpTo(4);break}return Gc.yield(l._versionDB(),5);case 5:q=Gc.yieldResult;case 4:return r=q,Gc.yield(m.diffWith(a),6);case 6:return u=Gc.yieldResult,Gc.yield(r.diffWith(e),7);case 7:return v=Gc.yieldResult,Gc.yield(Promise.all(v.inLeft.map(function(Yc){var Z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(sa){return 1==
sa.nextAddress?(Z=Yc.id,sa.yield(r.get(Yc.id),2)):sa.return({id:Z,doc:sa.yieldResult})})})),8);case 8:return y=Gc.yieldResult,z=Jd.arr,B=z.groupBy,Gc.yield(e.getAll(),9);case 9:return C=B.call(z,Gc.yieldResult,function(Yc){return Yc._id}),Gc.yield(Promise.all(v.inRight.map(function(Yc){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Z){return Z.return({id:Yc.id,doc:C[Yc.id]})})})),10);case 10:return G=Gc.yieldResult,Gc.yield(Promise.all(v.changed.map(function(Yc){var Z,sa,ua,db;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cb){return 1==
Cb.nextAddress?(Z=Object,sa=Z.assign,ua=Yc.left,Cb.yield(r.get(Yc.left.id),2)):3!=Cb.nextAddress?(db=Cb.yieldResult,Cb.yield(e.get(Yc.right.id),3)):Cb.return(sa.call(Z,{},ua,{docA:db,docB:Cb.yieldResult}))})})),11);case 11:return F=Gc.yieldResult,N=Jd.arr,L=N.groupBy,Gc.yield(a.getAll(),12);case 12:S=L.call(N,Gc.yieldResult,function(Yc){return Yc._id}),ha=[],qa=[],D=[],P=$jscomp.makeIterator(u.inLeft),J=P.next();case 13:if(J.done){Gc.jumpTo(15);break}M=J.value;X=ha;T=X.push;return Gc.yield(m.get(M.id),
16);case 16:T.call(X,Gc.yieldResult);J=P.next();Gc.jumpTo(13);break;case 15:fa=$jscomp.makeIterator(u.inRight),J=fa.next();case 17:if(J.done){Gc.jumpTo(19);break}Ra=J.value;gb=qa;ea=gb.push;return Gc.yield(S[Ra.id],20);case 20:ea.call(gb,Gc.yieldResult);J=fa.next();Gc.jumpTo(17);break;case 19:aa=$jscomp.makeIterator(u.changed),J=aa.next();case 21:if(J.done){Gc.jumpTo(23);break}ia=J.value;Aa=D;ob=Aa.push;return Gc.yield(m.get(ia.left.id),24);case 24:return ob.call(Aa,Gc.yieldResult),Nb=D,Ab=Nb.push,
Gc.yield(a.get(ia.right.id),25);case 25:Ab.call(Nb,Gc.yieldResult);J=aa.next();Gc.jumpTo(21);break;case 23:return Kb=ha.map(function(Yc){return Jd.obj.select(Yc,["_id","name","type"])}),jc=qa.map(function(Yc){return Jd.obj.select(Yc,["_id","name","type"])}),ub=D.map(function(Yc){return Jd.obj.select(Yc,["_id","name","type"])}),Gc.return({changed:F,remote:G,local:y,changedCommitTypeAndNames:ub,remoteCommitTypeAndNames:jc,localCommitTypeAndNames:Kb})}})};Xg.prototype.delete=function(b,e,l){l=void 0===
l?!0:l;var a=this,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:f=[];m=[];if(q=a.__commitDB){P.jumpTo(2);break}return P.yield(a._commitDB(),3);case 3:q=P.yieldResult;case 2:return r=q,u={include_docs:!0,startkey:b+"\x00"+e+"\x00",endkey:b+"\x00"+e+"\uffff"},P.yield(r.query("nameAndTimestamp_index",u),4);case 4:v=P.yieldResult;y=v.rows;z=$jscomp.makeIterator(y);for(B=z.next();!B.done;B=z.next())G=C=B.value,F=G.doc,
F.deleted||F._deleted||!F.content||f.push(a.snapshotResourceFor(F)),m.push(Object.assign({},F,{_deleted:!0}));if(N=a.__versionDB){P.jumpTo(5);break}return P.yield(a._versionDB(),6);case 6:N=P.yieldResult;case 5:return L=N,P.yield(L.get(b+"/"+e),7);case 7:S=P.yieldResult;ha=S._id;qa=S._rev;D={_id:ha,_rev:qa,_deleted:!0};if(l){P.jumpTo(8);break}return P.yield(r.setDocuments(m),9);case 9:return P.yield(L.setDocuments([D]),10);case 10:Promise.all(f.map(function(J){return J.remove()}));case 8:return P.return({commits:m,
history:D,resources:f})}})};Xg.prototype.deleteCommit=function(b,e,l){e=void 0===e?!0:e;l=void 0===l?"HEAD":l;var a=this,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){switch(ha.nextAddress){case 1:if(b&&"string"!==typeof b){f=b;ha.jumpTo(2);break}if(!b){ha.jumpTo(2);break}if(m=a.__commitDB){ha.jumpTo(4);break}return ha.yield(a._commitDB(),5);case 5:m=ha.yieldResult;case 4:return q=m,ha.yield(q.get(b),6);case 6:f=ha.yieldResult;case 2:if(!f)throw Error("commit needed!");
if(r=a.__versionDB){ha.jumpTo(7);break}return ha.yield(a._versionDB(),8);case 8:r=ha.yieldResult;case 7:u=r;if(v=a.__commitDB){ha.jumpTo(9);break}return ha.yield(a._commitDB(),10);case 10:v=ha.yieldResult;case 9:return y=v,z=f,B=z.name,C=z.type,G=f.deleted||f._deleted||!f.content?[]:[a.snapshotResourceFor(f)],F=[Object.assign({},f,{_deleted:!0})],ha.yield(u.get(C+"/"+B),11);case 11:N=ha.yieldResult;if(!N)throw Error("No history for "+C+"/"+B+"@"+f._id);if(!N.refs[l])throw Error("Cannot delete commit "+
C+"/"+B+"@"+f._id+" b/c it is not where ref "+l+" is pointing!");L=$jscomp.makeIterator(N.history[f._id]||[]);S=L.next().value;if(!S&&1>=Object.keys(N.history).length)N._deleted=!0;else if(S)delete N.history[f._id],N.refs[l]=S;else throw Error("Cannot delete commit "+C+"/"+B+"@"+f._id+" b/c it has no ancestor but there are still other commits!");if(e){ha.jumpTo(12);break}return ha.yield(u.set(C+"/"+B,N),13);case 13:return ha.yield(y.setDocuments(F),14);case 14:return ha.yield(Promise.all(G.map(function(qa){return qa.remove()})),
12);case 12:return ha.return({commits:F,history:N,resources:G})}})};$jscomp.global.Object.defineProperties(Xg.prototype,{_commitdb_indexes:{configurable:!0,enumerable:!0,get:function(){return[{name:"name_index",version:4,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name); }'},{name:"nameAndTimestamp_index",version:3,mapFn:'function (doc) { emit(doc.type + "\x00" + doc.name + "\x00" + doc.timestamp + "\x00" + doc._id); }'},{name:"nameWithMaxMinTimestamp_index",version:3,mapFn:'function(doc) { emit(doc.type + "\x00" + doc.name, doc.timestamp); }',
reduceFn:"_stats"},{name:"nameTypeFilter",version:9,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames)\n            return !!req.query.onlyTypesAndNames[doc.type + "/" + doc.name];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}},_versiondb_indexes:{configurable:!0,
enumerable:!0,get:function(){return[{name:"nameTypeFilter",version:3,filterFn:'function(doc, req) {\n          if (doc._id[0] === "_" || !req || !req.query) return true;\n          if (req.query.onlyIds) return !!req.query.onlyIds[doc._id];\n          if (req.query.onlyTypesAndNames) return !!req.query.onlyTypesAndNames[doc._id];\n          return true;\n        }'},{name:"conflict_index",version:4,mapFn:"function(doc) { if (doc._conflicts) emit(doc._id); }"}]}}});Jd.ObjectDB=Xg;var lw=function(b,
e,l,a,f){f=void 0===f?{}:f;this.options=Object.assign({debug:!1,live:!1,method:"sync",replicationFilter:void 0},f);this.state="not started";this.method="";this.fromObjectDB=b;this.remoteCommitDB=e;this.remoteVersionDB=l;this.remoteLocation=a;this.deferred=Jd.promise.deferred();this.conflicts=[];this.changes=[];this.errors=[]};lw.prototype.whenPaused=function(){var b=this;return Promise.resolve().then(function(){return Jd.promise.waitFor(function(){return b.isPaused||b.isComplete})}).then(function(){return b})};
lw.prototype.waitForIt=function(){return this.deferred.promise};lw.prototype.start=function(){this.isSynchonizing||this._startReplicationAndCopy().catch(function(b){return console.error("Error starting synchronization: ",b)});return this};lw.prototype._startReplicationAndCopy=function(){function b(Ab){return"paused"===Nb&&"paused"===ob&&0>=Aa.copyCalls&&0>=Aa.copyCallsWaiting?Ab.state="paused":"complete"===Nb&&"complete"===ob&&Aa.isComplete()?Ab.state="complete":Ab.state="running"}function e(Ab,Kb){if(Kb.length||
"complete"===ob&&"complete"===Nb&&Aa.isComplete()){M.cancel();if(Kb.length){Ab.state="complete";Ab.errors=Kb;aa.cancel();ia.cancel();var jc=Error("Synchronization error:\n  "+Kb.join("\n  "));jc.errors=Kb;console.log(Ab+" errored")}else console.log(Ab+" completed");jc?Ab.deferred.reject(jc):Ab.deferred.resolve(Ab)}}function l(Ab){if(!Ab.content)return null;var Kb=Ab.content.slice(0,2);Ab=Ab.content.slice(2);return Kb+"/"+Ab+".json"}var a=this,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra,
gb,ea,aa,ia,Aa,ob,Nb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ab){switch(Ab.nextAddress){case 1:f=a;m=f.fromObjectDB;q=f.remoteCommitDB;r=f.remoteVersionDB;u=f.remoteLocation;v=f.options;y=v.debug;z=void 0===v.live?!1:v.live;B=void 0===v.retry?!1:v.retry;C=v.method;G=v.replicationFilter;F=void 0===v.pushDesignDocToRemote?!1:v.pushDesignDocToRemote;if(N=m.__versionDB){Ab.jumpTo(2);break}return Ab.yield(m._versionDB(),3);case 3:N=Ab.yieldResult;case 2:L=N;if(S=m.__commitDB){Ab.jumpTo(4);
break}return Ab.yield(m._commitDB(),5);case 5:S=Ab.yieldResult;case 4:ha=S;qa=m;D=qa._commitdb_indexes;P=qa._versiondb_indexes;J=qa.snapshotLocation;a.method=C;T=D.find(function(Kb){return"nameTypeFilter"===Kb.name});fa=P.find(function(Kb){return"nameTypeFilter"===Kb.name});if(!F){Ab.jumpTo(6);break}console.log("adding commitNameTypeFilter");return Ab.yield(q.addDesignDoc(T),7);case 7:return console.log("adding versionNameTypeFilter"),Ab.yield(r.addDesignDoc(fa),6);case 6:return Ra={live:z,retry:B},
gb=Object.assign({},Ra),ea=Object.assign({},Ra),G&&(gb.filter=eval("("+T.filterFn+")"),gb.query_params=G,ea.filter=eval("("+fa.filterFn+")"),ea.query_params=G),aa=ha[C](q,gb),ia=L[C](r,ea),Aa={copyCalls:0,copyCallsWaiting:0,nFilesToCopy:0,nFilesCopied:0,stopped:!1,isComplete:function(){return this.stopped||0>=this.copyCalls&&0>=this.copyCallsWaiting}},Nb=ob="not started",a.versionReplication=ia,a.commitReplication=aa,a.snapshotReplication=Aa,X=q.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),
M=r.pouchdb.changes({include_docs:!0,live:!0,conflicts:!0}),X.on("change",function(Kb){var jc=Kb.id,ub=Kb.changes;Kb=Kb.doc._conflicts;y&&console.log("commit changes "+jc+":",ub,Kb);Kb&&(console.log("commit conflict "+jc+":",ub,Kb),a.conflicts.push({db:"commits",id:jc,changes:ub,conflicts:Kb}))}),M.on("change",function(Kb){var jc=Kb.id,ub=Kb.changes;Kb=Kb.doc._conflicts;y&&console.log("version changes "+jc+":",ub,Kb);Kb&&(console.log("version conflict "+jc+":",ub,Kb),a.conflicts.push({db:"versions",
id:jc,changes:ub,conflicts:Kb}))}),aa.on("change",function(Kb){var jc,ub,Gc,Yc,Z,sa,ua,db,Cb,Pc,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kc){switch(kc.nextAddress){case 1:"replicateTo"===C?Kb={direction:"push",change:Kb}:"replicateFrom"===C&&(Kb={direction:"pull",change:Kb});jc=Kb;ub=jc.direction;Gc=jc.change;Yc=Gc.docs;console.log(a+" "+("push"===ub?"send":"received")+" "+Yc.length+" commits");kc.setCatchFinallyBlocks(2,3);sa=[];ua=$jscomp.makeIterator(Yc);for(db=ua.next();!db.done;db=
ua.next())Cb=db.value,Cb._id.startsWith("_")||(a.changes.push({direction:ub,kind:"commits",id:Cb._id,type:Cb.type,name:Cb.name}),(Pc=l(Cb))&&sa.push(Pc));Aa.nFilesToCopy+=sa.length;if(!(0<Aa.copyCalls)){kc.jumpTo(5);break}Aa.copyCallsWaiting++;return kc.yield(Jd.promise.waitFor(function(){return 0>=Aa.copyCalls}),6);case 6:Aa.copyCallsWaiting--;case 5:return Aa.copyCalls++,b(a),console.log(a+" copying "+sa.length+" snapshots..."),kc.yield(Jd.promise.parallel(sa.map(function(be){return function(){var Ud=
("push"===ub?J:u).join(be),ah=("push"===ub?u:J).join(be);return Aa.stopped?(console.warn(a+" Stopping copying resources b/c synchronization ended ("+Aa.copyCalls+", "+Ud.url+" => "+ah.url+")"),Promise.resolve()):ah.exists().then(function(vg){function ki(bi){bi=void 0===bi?0:bi;return Ud.copyTo(ah).catch(function(Wi){if(5<=bi)throw Wi;return ki(bi+1)})}return vg?(y&&console.log("Skip copying to "+ah.url+", already exist"),Promise.resolve()):Ud.exists().then(function(bi){if(!bi)return console.warn("Skip copying "+
Ud.url+", does not exist"),Promise.resolve();y&&console.log(a+" Copying "+Ud.url+" => "+ah.url);return ki(0).then(function(Wi){Aa.nFilesCopied++;Aa.stopped||0!==Aa.nFilesCopied%10||console.log(a+" copied "+Aa.nFilesCopied+" of "+Aa.nFilesToCopy+" snapshots");return Wi})})})}}),5),7);case 7:console.log(a+" sending files done");case 3:kc.enterFinallyBlock();Aa.copyCalls--;b(a);e(a,Z?[Z]:[]);kc.leaveFinallyBlock(0);break;case 2:throw Oc=kc.enterCatchBlock(),console.error("error in commitReplication onChange",
Oc),Z=Oc,Oc;}})}).on("paused",function(){ob="paused";b(a);y&&console.log(a+" commit replication paused")}).on("active",function(){ob="active";b(a);y&&console.log(a+" commit replication active")}).on("error",function(Kb){ob="complete";b(a);console.error(a+" commit replication error",Kb);e(a,[Kb])}).on("complete",function(Kb){ob="complete";b(a);Kb="sync"===C?Kb.push.errors.concat(Kb.pull.errors):Kb.errors;e(a,Kb)}),ia.on("change",function(Kb){"replicateTo"===C?Kb={direction:"push",change:Kb}:"replicateFrom"===
C&&(Kb={direction:"pull",change:Kb});var jc=Kb.direction;Kb=Kb.change.docs;y&&console.log(a+" "+("push"===jc?"send":"received")+" "+Kb.length+" histories");Kb.forEach(function(ub){ub._id.startsWith("_")||a.changes.push({direction:jc,kind:"versions",id:ub._id})})}).on("paused",function(){Nb="paused";b(a);y&&console.log(a+" version replication paused")}).on("active",function(Kb){Nb="active";b(a);y&&console.log(a+" version replication active",Kb)}).on("error",function(Kb){Nb="complete";b(a);console.error(a+
" version replication error",Kb);e(a,[Kb])}).on("complete",function(Kb){Nb="complete";b(a);Kb="sync"===C?Kb.push.errors.concat(Kb.pull.errors):Kb.errors;e(a,Kb)}),a.state="running",Ab.return(a)}})};lw.prototype.safeStop=function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?"not started"!==b.state&&b.isSynchonizing?e.yield(b.whenPaused(),2):e.return(b):e.return(b.stop())})};lw.prototype.stop=function(){if("not started"===this.state||!this.isSynchonizing)return this;
this.commitReplication.cancel();this.versionReplication.cancel();this.snapshotReplication.stopped=!0;return this};lw.prototype.toString=function(){var b=this.method;return"Synchronization("+this.state+": "+this.fromObjectDB.name+" "+("sync"===b?"<=>":"replicateTo"===b?"=>":"replicateFrom"===b?"<=":"??")+")"};$jscomp.global.Object.defineProperties(lw.prototype,{isSynchonizing:{configurable:!0,enumerable:!0,get:function(){return this.isPaused||this.isRunning}},isComplete:{configurable:!0,enumerable:!0,
get:function(){return"complete"===this.state}},isRunning:{configurable:!0,enumerable:!0,get:function(){return"running"===this.state}},isPaused:{configurable:!0,enumerable:!0,get:function(){return"paused"===this.state}},changesByTypeAndName:{configurable:!0,enumerable:!0,get:function(){var b={push:{},pull:{}};this.changes.forEach(function(e){var l=e.direction,a=e.id,f=e.kind;if("_"!==a[0]){if("versions"===f)var m=b[l][a]||(b[l][a]=[]);else"commits"===f&&(a=e.type+"/"+e.name,m=b[l][a]||(b[l][a]=[]));
m.push(e)}});return b}}});Jd.Synchronization=lw;var nA={describe:function(b){function e(r,u){r=r.find(function(B){return B.name===u}).node.value.body;var v=r.body||[],y=(r.comments||[]).find(function(B){return B.end<v[0].start});r={name:u,parameters:[],sideEffect:!1,returns:null,description:""};if(y&&y.text.trim()){y=Jd.string.changeIndent(y.text," ",0).split("\n");y=$jscomp.makeIterator(y);for(var z=y.next();!z.done;z=y.next()){z=z.value;if(z.startsWith("ignore-in-doc")){r.description="";break}z.startsWith("side effect:")?
r.sideEffect=JSON.parse(z.split(":")[1]):z.startsWith("returns:")?r.returns=z.split(":")[1].trim():r.description+=z+"\n"}}y=$jscomp.makeIterator(v);for(z=y.next();!z.done;z=y.next())if(z=z.value,"checkArgs"===Jd.Path("declarations.0.init.callee.name").get(z)&&(z=Jd.Path("declarations.0.id.properties").get(z)))r.parameters=z.map(function(B){return B.key.name});return r}var l=this,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:r.setCatchFinallyBlocks(2);
if(l._methodSpecs){r.jumpTo(4);break}return r.yield(lively.modules.module("lively.storage/objectdb.js").source(),5);case 5:a=r.yieldResult,f=Jd.parse(a,{withComments:!0}),m=Jd.categorizer.findDecls(f),l._methodSpecs=m.filter(function(u){return u.parent&&"ObjectDBInterface"===u.parent.name});case 4:return r.return(b?e(l._methodSpecs,b):l._methodSpecs.map(function(u){return e(l._methodSpecs,u.name)}).filter(Boolean));case 2:return q=r.enterCatchBlock(),r.return("Error in describe "+q)}})},ensureDB:function(b){var e,
l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return e=Jd.checkArgs(b,{db:"string",snapshotLocation:"string|Resource"}),l=e.db,a=e.snapshotLocation,m.yield(Jd.ObjectDB.find(l),2);if(f=m.yieldResult)return m.return(!1);Jd.ObjectDB.named(l,{snapshotLocation:a});return m.return(!0)})},destroyDB:function(b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(e=Jd.checkArgs(b,{db:"string"}),l=e.db,f.yield(Jd.ObjectDB.find(l),
2)):3!=f.nextAddress?(a=f.yieldResult)?f.yield(a.destroy(),3):f.return(!1):f.return(!0)})},fetchCommits:function(b){var e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra,gb,ea,aa,ia,Aa;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ob){switch(ob.nextAddress){case 1:return e=Jd.checkArgs(b,{db:"string",ref:"string|undefined",type:"string|undefined",typesAndNames:"Array|undefined",knownCommitIds:"object|undefined",includeDeleted:"boolean|undefined",filterFn:"string|undefined"}),
l=e.db,a=e.ref,f=e.type,m=e.typesAndNames,q=e.knownCommitIds,r=e.includeDeleted,u=e.filterFn,ob.yield(Jd.ObjectDB.find(l),2);case 2:v=ob.yieldResult;a||(a="HEAD");if(!v)throw Error("db "+l+" does not exist");if(v.__commitDB){ob.jumpTo(3);break}return ob.yield(v._commitDB(),4);case 4:case 3:if(y=v.__versionDB){ob.jumpTo(5);break}return ob.yield(v._versionDB(),6);case 6:y=ob.yieldResult;case 5:z=y;B={};C={};if(m)for(G=B.keys=[],F=$jscomp.makeIterator(m),N=F.next();!N.done;N=F.next())S=L=N.value,ha=
S.type,qa=S.name,D=S.ref,G.push(ha+"/"+qa),D&&(C[ha+"/"+qa]=D);else f&&(B.startkey=f+'/\x00"',B.endkey=f+'/\uffff"');return ob.yield(z.getAll(B),7);case 7:P=ob.yieldResult;J=[];M=$jscomp.makeIterator(P);for(X=M.next();!X.done;X=M.next())!(T=X.value)||T.deleted||T._deleted||(fa=T,Ra=fa._id,gb=fa.refs,Ra.startsWith("_")||(ea=gb[C[Ra]||a]||a,!ea||q&&q.hasOwnProperty(ea)||J.push(ea)));return ob.yield(v.getCommitsWithIds(J),8);case 8:aa=ob.yieldResult;r||(aa=aa.filter(function(Nb){return Nb&&!Nb.deleted}));
if(u)try{ia=eval("("+u+")");if("function"!==typeof ia)throw Error(u+" does not eval to a function!");Aa=aa.filter(ia);if(Array.isArray(Aa))aa=Aa;else throw Error(u+" does not return an array!");}catch(Nb){console.error("fetchCommits filterFn failed:",Nb)}return ob.return(aa)}})},fetchVersionGraph:function(b){var e,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Jd.checkArgs(b,{db:"string",type:"string",name:"string"}),l=e.db,a=e.type,f=e.name,
v.yield(Jd.ObjectDB.find(l),2);if(3!=v.nextAddress){m=v.yieldResult;if(!m)throw Error("db "+l+" does not exist");return v.yield(m.versionGraph(a,f),3)}q=v.yieldResult;r=q.refs;u=q.history;return v.return({refs:r,history:u})})},exists:function(b){var e,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Jd.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined"}),l=e.db,a=e.type,f=e.name,m=e.ref,v.yield(Jd.ObjectDB.find(l),2);
if(3!=v.nextAddress)return q=v.yieldResult,v.yield(q.versionGraph(a,f),3);r=v.yieldResult;if(!r)return v.return({exists:!1,commitId:void 0});m=m||"HEAD";return(u=r.refs[m])?v.return({exists:!0,commitId:u}):v.return({exists:!1,commitId:void 0})})},fetchLog:function(b){var e,l,a,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:return e=Jd.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",
commit:"string|undefined",limit:"number|undefined",includeCommits:"boolean|undefined",knownCommitIds:"object|undefined"},function(M){return M.type&&M.name||M.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),l=e.db,a=e.type,f=e.name,m=e.ref,q=e.commit,r=e.limit,u=e.includeCommits,v=e.knownCommitIds,J.yield(Jd.ObjectDB.find(l),2);case 2:y=J.yieldResult;z=m||"HEAD";if(!y)throw Error("db "+l+" does not exist");r||(r=Infinity);q||m||(m=z);if(!q){J.jumpTo(3);break}B=q;if(a&&f){J.jumpTo(3);
break}return J.yield(y.getCommit(q),5);case 5:C=J.yieldResult;if(!C)throw Error("fetchLog: specified commit "+q+" but no commit with this id is in the database!");G=C;a=G.type;f=G.name;case 3:return J.yield(y.versionGraph(a,f),6);case 6:F=J.yieldResult;if(!F)throw Error("Unknown object "+a+"/"+f);N=F;L=N.refs;S=N.history;B||(B=L[m]);ha=B;for(qa=[];qa.length<r&&!qa.includes(ha);){qa.push(ha);D=S[ha];if(!D||!D.length)break;P=$jscomp.makeIterator(D);ha=P.next().value}if(!u){J.jumpTo(7);break}v&&(qa=
qa.filter(function(M){return!v.hasOwnProperty(M)}));return J.yield(y.getCommitsWithIds(qa),8);case 8:qa=J.yieldResult;case 7:return J.return(qa)}})},fetchSnapshot:function(b){var e,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return e=Jd.checkArgs(b,{db:"string",type:"string|undefined",name:"string|undefined",ref:"string|undefined",commit:"string|undefined"},function(z){return z.type&&z.name||z.commit?null:{error:"Eiter .type + .name or .commit needed!"}}),
l=e.db,a=e.type,f=e.name,m=e.ref,q=e.commit,y.yield(Jd.ObjectDB.find(l),2);case 2:r=y.yieldResult;m=m||"HEAD";if(!r)throw Error("db "+l+" does not exist");if(q){y.jumpTo(3);break}return y.yield(r.versionGraph(a,f),4);case 4:u=y.yieldResult;if(!u)throw Error("Unknown object "+a+"/"+f);q=u.refs[m];if(!q)throw Error("Cannot find commit for ref "+m+" of "+a+"/"+f);case 3:return y.yield(r.getCommit(q),5);case 5:v=y.yieldResult;if(!v)throw Error("Cannot find commit "+q);return y.return(r.loadSnapshot(void 0,
void 0,v))}})},revert:function(b){var e,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=Jd.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",toCommitId:"string"}),l=e.db,a=e.type,f=e.name,m=e.ref,q=e.toCommitId,u.yield(Jd.ObjectDB.find(l),2);r=u.yieldResult;m||(m="HEAD");return u.return(r.revert(a,f,m,q))})},commit:function(b){var e,l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress)return e=Jd.checkArgs(b,{db:"string",type:"string",name:"string",ref:"string|undefined",snapshot:"object|string|undefined",preview:"string|undefined",commitSpec:"object",expectedParentCommit:"string|undefined"}),l=e.db,a=e.type,f=e.name,m=e.ref,q=e.expectedParentCommit,r=e.commitSpec,u=e.snapshot,v=e.preview,z.yield(Jd.ObjectDB.find(l),2);y=z.yieldResult;m||(m="HEAD");return z.return(y.commit(a,f,u,r,v,m,q))})},exportToSpecs:function(b){var e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return e=Jd.checkArgs(b,{db:"string",nameAndTypes:"Array|undefined",includeDeleted:"boolean|undefined"}),l=e.db,a=e.nameAndTypes,m.yield(Jd.ObjectDB.find(l),2);f=m.yieldResult;if(!f)throw Error("db "+l+" does not exist");return m.return(f.exportToSpecs(a))})},exportToDir:function(b){var e,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return e=Jd.checkArgs(b,{db:"string",url:"string",nameAndTypes:"Array|undefined",copyResources:"boolean|undefined",
includeDeleted:"boolean|undefined"}),l=e.db,a=e.url,f=e.nameAndTypes,m=e.copyResources,q=e.includeDeleted,v.yield(Jd.ObjectDB.find(l),2);r=v.yieldResult;if(!r)throw Error("db "+l+" does not exist");try{u=Jd.resource(a)}catch(y){u=Jd.resource(System.baseURL).join(a)}return v.return(r.exportToDir(u,f,m,q))})},importFromDir:function(b){var e,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=Jd.checkArgs(b,{db:"string",url:"string",overwrite:"boolean|undefined",
copyResources:"boolean|undefined"}),l=e.db,a=e.url,f=e.overwrite,m=e.copyResources,u.yield(Jd.ObjectDB.find(l),2);q=u.yieldResult;if(!q)throw Error("db "+l+" does not exist");try{r=Jd.resource(a)}catch(v){r=Jd.resource(System.baseURL).join(a)}return u.return(q.importFromDir(r,f,m))})},importFromSpecs:function(b){var e,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=Jd.checkArgs(b,{db:"string",specs:"object",overwrite:"boolean|undefined",copyResources:"boolean|undefined"}),
l=e.db,a=e.specs,f=e.overwrite,m=e.copyResources,r.yield(Jd.ObjectDB.find(l),2);q=r.yieldResult;if(!q)throw Error("db "+l+" does not exist");return r.return(q.importFromSpecs(a,f,m))})},importFromResource:function(b){var e,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=Jd.checkArgs(b,{db:"string",type:"string",name:"string",url:"string",commitSpec:"object",purgeHistory:"boolean|undefined"}),l=e.db,a=e.type,f=e.name,m=e.url,q=e.commitSpec,
r=e.purgeHistory,y.yield(Jd.ObjectDB.find(l),2);u=y.yieldResult;if(!u)throw Error("db "+l+" does not exist");try{v=Jd.resource(m)}catch(z){v=Jd.resource(System.baseURL).join(m)}return y.return(u.importFromResource(a,f,v,q,r))})},delete:function(b){var e,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=Jd.checkArgs(b,{db:"string",type:"string",name:"string",dryRun:"boolean|undefined"}),l=e.db,a=e.type,f=e.name,m=e.dryRun,r.yield(Jd.ObjectDB.find(l),
2);q=r.yieldResult;return r.return(q.delete(a,f,"undefined"===typeof m||m))})},deleteCommit:function(b){var e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return e=Jd.checkArgs(b,{db:"string",commit:"string",dryRun:"boolean|undefined"}),l=e.db,a=e.commit,f=e.dryRun,q.yield(Jd.ObjectDB.find(l),2);m=q.yieldResult;return q.return(m.deleteCommit(a,"undefined"===typeof f||f))})},fetchConflicts:function(b){var e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return e=Jd.checkArgs(b,{db:"string",includeDocs:"boolean|undefined",only:"object|undefined"}),l=e.db,a=e.includeDocs,f=e.only,q.yield(Jd.ObjectDB.find(l),2);m=q.yieldResult;return q.return(m.getConflicts(a,f))})},resolveConflict:function(b){var e,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return e=Jd.checkArgs(b,{db:"string",id:"string",kind:"string",delete:"Array",resolved:"object"}),l=e.db,a=e.resolved,f=e.delete,m=e.kind,q=e.id,
u.yield(Jd.ObjectDB.find(l),2);r=u.yieldResult;return u.return(r.resolveConflict({resolved:a,delete:f,kind:m,id:q}))})},fetchDiff:function(b){var e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return e=Jd.checkArgs(b,{db:"string",otherDB:"string"}),l=e.db,a=e.otherDB,m.yield(Jd.ObjectDB.find(l),2);f=m.yieldResult;return m.return(f.getDiff(a))})},synchronize:function(b){var e,l,a,f,m,q,r,u,v,y,z,B,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:return e=
Jd.checkArgs(b,{db:"string",otherDB:"string",otherDBSnapshotLocation:"string|undefined",onlyTypesAndNames:"object|undefined",method:"string|undefined"}),l=e.db,a=e.otherDB,f=e.otherDBSnapshotLocation,m=e.onlyTypesAndNames,q=e.method,G.yield(Jd.ObjectDB.find(l),2);case 2:return f||(f=a.replace(/\/$/,"")+"/snapshots"),q||(q="replicateTo"),G.yield(Jd.ObjectDB.find(l),3);case 3:return r=G.yieldResult,G.yield(Jd.ObjectDB.named(a,{snapshotLocation:f}),4);case 4:return u=G.yieldResult,G.yield(u._commitDB(),
5);case 5:return v=G.yieldResult,G.yield(u._versionDB(),6);case 6:return y=G.yieldResult,z=u.snapshotLocation,B={replicationFilter:m?{onlyTypesAndNames:m}:void 0,retry:!0,live:!0},C=r[q](v,y,z,B),G.yield(C.whenPaused(),7);case 7:return G.yield(C.safeStop(),8);case 8:return G.yield(C.waitForIt(),9);case 9:return G.return(Jd.obj.select(C,["state","method","conflicts","errors","changesByTypeAndName"]))}})}};Jd.ObjectDBInterface=nA;Jd.ObjectDBInterface=nA;Jd.ObjectDBInterface=nA;var Zi=function(b){this.serverURL=
b=void 0===b?document.location.origin+"/objectdb/":b};Zi.prototype._processResponse=function(b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return e=b.headers.get("content-type"),f.yield(b.text(),2);l=f.yieldResult;if("application/json"===e)try{a=JSON.parse(l)}catch(m){}if(!b.ok||a&&a.error)throw Error(a&&a.error||l||b.statusText);return f.return(a||l)})};Zi.prototype._GET=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==
r.nextAddress?(a=Object.keys(e).map(function(u){var v=e[u];"object"===typeof v&&(v=JSON.stringify(v));return u+"="+encodeURIComponent(v)}).join("&"),f=l.serverURL+b+"?"+a,m=l,q=m._processResponse,r.yield(fetch(f),2)):r.return(q.call(m,r.yieldResult))})};Zi.prototype._POST=function(b,e){e=void 0===e?{}:e;var l=this,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(a=l.serverURL+b,f=l,m=f._processResponse,q.yield(fetch(a,{method:"POST",body:JSON.stringify(e),
headers:{"content-type":"application/json"}}),2)):q.return(m.call(f,q.yieldResult))})};Zi.prototype.describe=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("describe",b))})};Zi.prototype.ensureDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("ensureDB",b))})};Zi.prototype.destroyDB=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("destroyDB",
b))})};Zi.prototype.fetchCommits=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchCommits",b))})};Zi.prototype.fetchVersionGraph=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchVersionGraph",b))})};Zi.prototype.exists=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("exists",b))})};Zi.prototype.fetchLog=function(b){var e=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchLog",b))})};Zi.prototype.fetchSnapshot=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchSnapshot",b))})};Zi.prototype.revert=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("revert",b))})};Zi.prototype.commit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("commit",
b))})};Zi.prototype.exportToSpecs=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("exportToSpecs",b))})};Zi.prototype.exportToDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("exportToDir",b))})};Zi.prototype.importFromDir=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("importFromDir",b))})};Zi.prototype.importFromSpecs=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("importFromSpecs",b))})};Zi.prototype.importFromResource=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("importFromResource",b))})};Zi.prototype.delete=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("delete",b))})};Zi.prototype.deleteCommit=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("deleteCommit",
b))})};Zi.prototype.fetchConflicts=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchConflicts",b))})};Zi.prototype.resolveConflict=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("resolveConflict",b))})};Zi.prototype.fetchDiff=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._GET("fetchDiff",b))})};Zi.prototype.synchronize=
function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return l.return(e._POST("synchronize",b))})};Jd.ObjectDBHTTPInterface=Zi;Jd.default=Xg;var $i=lively.FreezerRuntime.recorderFor("lively.storage/storage-resource.js");$i.applyExclude=function(b,e){return e?"string"===typeof e?!b.url.includes(e):"function"===typeof e?!e(b):e instanceof RegExp?!e.test(b.url):!0:!0};$i.Resource=Nf;$i.Database=ng;$i.debug=!1;$i.slashRe=/\//g;var LS=function(){return $i.Database.apply(this,
arguments)||this};$jscomp.inherits(LS,$i.Database);LS.ensureDB=function(b,e){return $i.Database.ensureDB.call(this,"lively.storage-"+b,e)};$i.StorageDatabase=LS;var Pp=function(){return $i.Resource.apply(this,arguments)||this};$jscomp.inherits(Pp,$i.Resource);Pp.prototype.read=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return $i.debug&&console.log("["+b+"] read"),a.yield(b.db.get(b.pathWithoutQuery()),2);l=(e=a.yieldResult)&&e.content;
return a.return(l?"string"===typeof l?l:JSON.stringify(l):"")})};Pp.prototype.readJson=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(b.read(),2);e=l.yieldResult;return l.return("string"===typeof e?JSON.parse(e):e)})};Pp.prototype.write=function(b){var e=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){$i.debug&&console.log("["+e+"] write");b||(b="");if(e.isDirectory())throw Error("Cannot write into a directory! ("+
e.url+")");return l.yield(e.db.update(e.pathWithoutQuery(),function(a){if(a&&a.isDirectory)throw Error(e.url+" already exists and is a directory (cannot write into it!)");var f=Date.now();return a?Object.assign({},a,{lastModified:f,size:b.length,content:b}):{etag:void 0,type:void 0,contentType:void 0,user:void 0,group:void 0,mode:void 0,lastModified:f,created:f,size:"string"===typeof b?b.length:0,content:b}}),2)}return l.return(e)})};Pp.prototype.writeJson=function(b){return this.write(b)};Pp.prototype.mkdir=
function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){$i.debug&&console.log("["+b+"] mkdir");if(!b.isDirectory())throw Error("Cannot mkdir a file! ("+b.url+")");return a.yield(b.db.get(b.pathWithoutQuery()),2)}if(3!=a.nextAddress){if(e=a.yieldResult){if(!e.isDirectory)throw Error(b.url+" already exists and is a file (cannot mkdir it!)");return a.return(b)}l=Date.now();return a.yield(b.db.set(b.pathWithoutQuery(),{etag:void 0,type:void 0,contentType:void 0,
user:void 0,group:void 0,mode:void 0,lastModified:l,created:l,isDirectory:!0}),3)}return a.return(b)})};Pp.prototype.exists=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return $i.debug&&console.log("["+b+"] exists"),(e=b.isRoot())?l.jumpTo(2):l.yield(b.db.get(b.pathWithoutQuery()),3);2!=l.nextAddress&&(e=!!l.yieldResult);return l.return(e)})};Pp.prototype.remove=function(){var b=this,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==
f.nextAddress?($i.debug&&console.log("["+b+"] remove"),e=b.pathWithoutQuery(),l=b.db,f.yield(l.docList({startkey:e,endkey:e+"\uffff"}),2)):3!=f.nextAddress?(a=f.yieldResult,f.yield(l.setDocuments(a.map(function(m){return{_id:m.id,_rev:m.rev,_deleted:!0}})),3)):f.return(b)})};Pp.prototype.readProperties=function(){$i.debug&&console.log("["+this+"] readProperties");return this.db.get(this.pathWithoutQuery())};Pp.prototype.dirList=function(b,e){b=void 0===b?1:b;e=void 0===e?{}:e;var l=this,a,f,m,q,r,
u,v,y,z,B,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){if(1==S.nextAddress){$i.debug&&console.log("["+l+"] dirList");if(!l.isDirectory())return S.return(l.asDirectory().dirList(b,e));a=e;f=a.exclude;m=l.pathWithoutQuery();q=[];return S.yield(l.db.getAll({startkey:m,endkey:m+"\uffff"}),2)}r=S.yieldResult;"infinity"===b&&(b=Infinity);u={};for(v=0;v<r.length;u={$jscomp$loop$prop$dirToChild$2646:u.$jscomp$loop$prop$dirToChild$2646},v++)if(z=y=r[v],B=z._id,B.startsWith(m)&&
m!==B)if(C=B.slice(m.length),G=C.includes("/")?C.match($i.slashRe).length+1:1,G>b)u.$jscomp$loop$prop$dirToChild$2646=l.join(C.split("/").slice(0,b).join("/")+"/"),q.some(function(ha){return function(qa){return qa.equals(ha.$jscomp$loop$prop$dirToChild$2646)}}(u))||q.push(u.$jscomp$loop$prop$dirToChild$2646);else if(F=l.join(C),!f||$i.applyExclude(F,f))for(q.push(F),N="created lastModified mode group user contentType type etag size".split(" "),L=0;L<N.length;L++)F[N[L]]=y[N[L]];return S.return(q)})};
$jscomp.global.Object.defineProperties(Pp.prototype,{canDealWithJSON:{configurable:!0,enumerable:!0,get:function(){return!0}},db:{configurable:!0,enumerable:!0,get:function(){return this._db||(this._db=$i.StorageDatabase.ensureDB(this.host()))}}});$i.LivelyStorageResource=Pp;var MS={name:"lively.storage",matches:function(b){return b.startsWith("lively.storage:")},resourceClass:$i.LivelyStorageResource};$i.resourceExtension=MS;$i.resourceExtension=MS;$i.resourceExtension=MS;$i.registerExtension=A;
$i.registerExtension($i.resourceExtension);$i.default=Pp;var Js=lively.FreezerRuntime.recorderFor("lively.storage/index.js");Js.default=ng;Js.Database=ng;Js.ObjectDB=Xg;Js.ObjectDBInterface=nA;Js.ObjectDBHTTPInterface=Zi;Js.ObjectDB=Xg;Js.ObjectDB=Xg;Js.ObjectDBInterface=nA;Js.ObjectDBInterface=nA;Js.ObjectDBHTTPInterface=Zi;Js.ObjectDBHTTPInterface=Zi;var Uma=Object.freeze({__proto__:null,Database:ng,ObjectDB:Xg,ObjectDBInterface:nA,ObjectDBHTTPInterface:Zi}),cg=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js");
cg.convertToSerializableCommit=pP;cg.ensureCommitInfo=jE;cg.ObjectDBHTTPInterface=Zi;cg.Database=ng;cg.loadMorphFromSnapshot=bu;cg.createMorphSnapshot=Dz;cg.resource=x;cg.obj=lf;cg.Path=Cg;cg.arr=Qe;cg.string=Hg;cg.morphicDBs=cg.morphicDBs||(cg.morphicDBs=new Map);cg.getDefaultServerUrl=function(){return cg.resource("undefined"!==typeof document?window.SERVER_URL||System.baseURL:"http://localhost:9001").join("objectdb/").url};cg.convertToSerializableCommit=pP;cg.convertToSerializableCommit=pP;cg.ensureCommitInfo=
jE;cg.ensureCommitInfo=jE;var NS=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),l=e.hasOwnProperty("MorphicDB")&&"function"===typeof e.MorphicDB?e.MorphicDB:e.MorphicDB=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){var m=f.snapshotLocation;f=f.serverURL;this.name=a;this.serverURL=f;this.snapshotLocation=
m||a+"/snapshots/";this.httpDB=new cg.ObjectDBHTTPInterface(f);this._initialized=!1}},{key:"__serialize__",value:function(){return{__expr__:'MorphicDB.named("'+this.name+'", {snapshotLocation: "'+this.snapshotLocation+'", serverURL: "'+this.serverURL+'"})',bindings:{"lively.morphic/morphicdb/index.js":["MorphicDB"]}}}},{key:"initializeIfNecessary",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return a._initialized?f.return():f.yield(a.ensureDB(),
2);a._initialized=!0;f.jumpToEnd()})}},{key:"snapshotResourceFor",value:function(a){var f=a.content.slice(0,2);a=a.content.slice(2);return cg.resource(System.decanonicalize(this.snapshotLocation)).join(f+"/"+a+".json")}},{key:"ensureDB",value:function(){return this.httpDB.ensureDB({db:this.name,snapshotLocation:this.snapshotLocation})}},{key:"destroyDB",value:function(){this._initialized=!1;return this.httpDB.destroyDB({db:this.name})}},{key:"latestCommits",value:function(a,f){a=void 0===a?"world":
a;f=void 0===f?!1:f;var m=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(m.initializeIfNecessary(),2);q=m;r=q.name;u={};return v.return(m.httpDB.fetchCommits({db:r,type:a,ref:"HEAD",knownCommitIds:u,includeDeleted:f}))})}},{key:"fetchCommit",value:function(a,f,m){var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(q.initializeIfNecessary(),2);if(3!=v.nextAddress)return r=[{type:a,
name:f,ref:m}],v.yield(q.httpDB.fetchCommits({db:q.name,ref:m,type:a,typesAndNames:r,knownCommitIds:{}}),3);u=v.yieldResult;return v.return(cg.convertToSerializableCommit(u[0]))})}},{key:"fetchSnapshot",value:function(a,f,m,q){var r=this,u=arguments,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress)return v=a,1===u.length&&v.type&&v.name&&(a=v.type,f=v.name,m=v._id),B.yield(r.initializeIfNecessary(),2);y=r;z=y.name;return B.return(r.httpDB.fetchSnapshot({db:z,
type:a,name:f,ref:q,commit:m}))})}},{key:"exists",value:function(a,f,m){var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(q.initializeIfNecessary(),2);r=q;u=r.name;return v.return(q.httpDB.exists({db:u,type:a,name:f,ref:m}))})}},{key:"history",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(m.initializeIfNecessary(),2);q=m;r=q.name;return u.return(m.httpDB.fetchVersionGraph({db:r,
type:a,name:f}))})}},{key:"log",value:function(a,f,m,q){m=void 0===m?!1:m;var r=this,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){return 1==y.nextAddress?y.yield(r.initializeIfNecessary(),2):3!=y.nextAddress?(u=r,v=u.name,y.yield(r.httpDB.fetchLog({db:v,commit:a,limit:f,includeCommits:m,knownCommitIds:q}),3)):y.return(y.yieldResult.map(cg.convertToSerializableCommit))})}},{key:"revert",value:function(a,f,m,q){q=void 0===q?"HEAD":q;var r=this,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==
y.nextAddress)return y.yield(r.initializeIfNecessary(),2);u=r;v=u.name;return y.return(r.httpDB.revert({db:v,type:a,name:f,toCommitId:m,ref:q}))})}},{key:"snapshotAndCommit",value:function(a,f,m,q,r,u,v){var y=this,z,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(cg.createMorphSnapshot(m,q),2);if(3!=C.nextAddress)return z=C.yieldResult,C.yield(y.commit(a,f,z,r,u,v),3);B=C.yieldResult;B=cg.convertToSerializableCommit(B);m.changeMetaData("commit",
cg.obj.dissoc(B,["preview"]),!0,!1);return C.return(B)})}},{key:"commit",value:function(a,f,m,q,r,u){var v=this,y=arguments,z,B,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){if(1==G.nextAddress)return z=a,1===y.length&&z.type&&z.name&&(a=z.type,f=z.name,m=z.snapshot||z.content,q=cg.obj.dissoc(z,["snapshot","_rev","_id","ancestors","deleted"]),u=z._id),G.yield(v.initializeIfNecessary(),2);B=v;C=B.name;return G.return(v.httpDB.commit({db:C,type:a,name:f,ref:r,expectedParentCommit:u,
commitSpec:q,snapshot:m}))})}},{key:"load",value:function(a,f,m,q,r){var u=this,v,y,z,B,C,G,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:"object"===typeof a?q=a:v=a;y=q;if(!y)return N.yield(u.fetchCommit(v,f,r),6);if("string"!==typeof y){N.jumpTo(3);break}z=$jscomp;B=z.makeIterator;return N.yield(u.log(y,1,!0),5);case 5:C=B.call(z,N.yieldResult);y=C.next().value;N.jumpTo(3);break;case 6:y=N.yieldResult;case 3:return N.yield(u.fetchSnapshot(void 0,void 0,
y._id),7);case 7:return G=N.yieldResult,N.yield(cg.loadMorphFromSnapshot(G,m),8);case 8:return F=N.yieldResult,y=cg.convertToSerializableCommit(y),F.changeMetaData("commit",cg.obj.dissoc(y,["preview"]),!0,!1),N.return(F)}})}},{key:"fetchDiff",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(f.initializeIfNecessary(),2);m=f;q=m.name;return r.return(f.httpDB.fetchDiff({db:q,otherDB:a}))})}},{key:"fetchConflicts",value:function(a,
f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(m.initializeIfNecessary(),2);q=m;r=q.name;return u.return(m.httpDB.fetchConflicts({db:r,includeDocs:a,only:f}))})}},{key:"resolveConflict",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(f.initializeIfNecessary(),2);m=f;q=m.name;return r.return(f.httpDB.resolveConflict(Object.assign({db:q},a)))})}},{key:"synchronize",
value:function(a){var f=a.method,m=a.otherDB,q=a.otherDBSnapshotLocation,r=a.onlyTypesAndNames,u=this,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return z.yield(u.initializeIfNecessary(),2);v=u;y=v.name;return z.return(u.httpDB.synchronize({db:y,method:f,otherDB:m,otherDBSnapshotLocation:q,onlyTypesAndNames:r}))})}},{key:"softDelete",value:function(a,f,m,q,r){var u=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){return v.return(u.commit(a,
f,void 0,m,q,r))})}},{key:"delete",value:function(a,f,m){m=void 0===m?!0:m;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(q.initializeIfNecessary(),2);r=q;u=r.name;return v.return(q.httpDB.delete({db:u,type:a,name:f,dryRun:m}))})}},{key:"deleteCommit",value:function(a,f){f=void 0===f?!0:f;var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(m.initializeIfNecessary(),2);q=m;
r=q.name;return u.return(m.httpDB.deleteCommit({db:r,commit:a,dryRun:f}))})}},{key:"codeSearchInPackages",value:function(a,f,m,q){f=void 0===f?"part":f;var r=this,u,v,y,z,B,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:return F.yield(r.latestCommits(f),2);case 2:u=F.yieldResult,v=[],y=0,"function"===typeof q&&(u=u.filter(q)),z=$jscomp.makeIterator(u),B=z.next();case 3:if(B.done){F.jumpTo(5);break}C=B.value;"function"===typeof m&&m(C.name,y++,u.length);
return F.yield(r._textSearchInSnapshotOfCommit(a,C),6);case 6:G=F.yieldResult;G.length&&v.push.apply(v,$jscomp.arrayFromIterable(G));B=z.next();F.jumpTo(3);break;case 5:return F.return(v)}})}},{key:"_textSearchInSnapshotOfCommit",value:function(a,f,m){var q=this,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return r=f,u=r._id,(v=m)?z.jumpTo(2):z.yield(q.fetchSnapshot(void 0,void 0,u),3);2!=z.nextAddress&&(v=z.yieldResult);y=v;return z.return((new cg.SnapshotPackageHelper(y)).textSearch(a,
f))})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphicDB"}},{key:"default",get:function(){return this.named("lively.morphic/objectdb/morphicdb",{serverURL:cg.getDefaultServerUrl()})}},{key:"named",value:function(a,f){var m=cg.morphicDBs.get(a);if(m)return m;if(!f.serverURL)throw Error("Needs serverURL!");f=new this(a,f);cg.morphicDBs.set(a,f);return f}},{key:"wellKnownMorphicDBs",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress)return f=cg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs"),r.yield(f.getAll(),2);m=r.yieldResult;q=m.reduce(function(u,v){var y={};return Object.assign(u,(y[v._id]=a.named(v.name,{serverURL:v.serverURL,snapshotLocation:v.snapshotLocation}),y))},{});q.default||(q.default=a.default);return r.return(q)})}},{key:"addWellKnownMorphicDB",value:function(a,f){var m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){m=f;q=m.name;r=m.snapshotLocation;
u=m.serverURL;v=cg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return y.yield(v.set(a,{name:q,snapshotLocation:r,serverURL:u}),0)})}},{key:"removeWellKnownMorphicDB",value:function(a){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f=cg.Database.ensureDB("lively.morphic/morphicdb/well-known-morphic-dbs");return m.yield(f.remove(a),0)})}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1570,end:10352})}(void 0);NS=cg.MorphicDB;var Bu=wa("Y",NS),zL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/db.js"),l=e.hasOwnProperty("SnapshotPackageHelper")&&"function"===typeof e.SnapshotPackageHelper?e.SnapshotPackageHelper:e.SnapshotPackageHelper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.snapshot=a}},{key:"textSearch",value:function(a,f){var m=a&&a instanceof RegExp,q=[];if(!a)return q;for(var r={},u=$jscomp.makeIterator(this.filesInPackages()),v=u.next();!v.done;r={$jscomp$loop$prop$file$2648:r.$jscomp$loop$prop$file$2648},v=u.next()){r.$jscomp$loop$prop$file$2648=v.value;v=r.$jscomp$loop$prop$file$2648.get(this.snapshot);var y=cg.string.lineIndexComputer(v),z=cg.string.lineRanges(v);
if(m)v=cg.string.reMatches(v,a),v.length&&q.push.apply(q,$jscomp.arrayFromIterable(v.map(function(S){return function(ha){return Object.assign(ha,{commit:f,file:S.$jscomp$loop$prop$file$2648})}}(r))));else for(var B=0,C=0;0<=(B=v.indexOf(a));){var G=B+C,F=G+a.length,N=y(G),L=v.slice.apply(v,$jscomp.arrayFromIterable(z[N]));q.push({match:a,start:G,end:F,length:a.length,line:N,lineString:L,commit:f,file:r.$jscomp$loop$prop$file$2648});C+=B+a.length;v=v.slice(B+a.length)}}return q}},{key:"filesInPackages",
value:function(){function a(q,r,u,v,y){y=void 0===y?[]:y;if(q["package.json"]&&"string"===typeof q["package.json"])try{var z=JSON.parse(q["package.json"]);v={url:u,path:r,name:z.name||cg.arr.last(r)}}catch(C){}z=[];for(var B in q)"string"===typeof q[B]?y.push({path:r.concat(B),url:cg.string.joinPath(u,B),package:v,get:function(C){return cg.Path(this.path).get(C.packages)},set:function(C,G){cg.Path(this.path).set(C.packages,G)}}):z.push(B);z.forEach(function(C){return a(q[C],r.concat(C),cg.string.joinPath(u,
C),v,y)});return y}var f=[],m;for(m in this.snapshot.packages)a(this.snapshot.packages[m],[m],m,null,f);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotPackageHelper"}}],e,{pathInPackage:function(){return"morphicdb/db.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10361,end:13434})}(void 0);cg.SnapshotPackageHelper=
zL;cg.SnapshotPackageHelper=zL;cg.SnapshotPackageHelper=zL;cg.default=NS;var hd=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js");hd.ensureAbsoluteComponentRefs=function(b){var e=b.snapshotAndPackages,l=void 0===b.localComponents?kE(snapshot):b.localComponents,a=void 0===b.localWorldName?Cg("metadata.commit.name").get($world):b.localWorldName;Object.values(e.packages["local://lively-object-modules/"]||{}).forEach(function(f){Object.entries(f).forEach(function(m){var q=$jscomp.makeIterator(m);
m=q.next().value;q=q.next().value;if(!m.endsWith(".json")){var r=hd.ast.parse(q),u=[];hd.ast.AllNodesVisitor.run(r,function(v,y){"Literal"===v.type&&"string"===typeof v.value&&(v.value.match(/^styleguide:\/\/\$world\/.+/)&&!l.includes(v.value.replace("styleguide://$world/",""))&&u.push({target:v,replacementFunc:function(){return JSON.stringify(v.value.replace("$world",a))}}),v.value.match(/^part:\/\/\$world\/.+/)&&!l.includes(v.value.replace("part://$world/",""))&&u.push({target:v,replacementFunc:function(){return JSON.stringify(v.value.replace("$world",
a))}}))});f[m]=hd.ast.transform.replaceNodes(u,q).source}})})};hd.findLocalComponents=kE;hd.prefetchCoreStyleguides=JI;hd.getProjectName=function(b){return hd.Path("metadata.commit.name").get(b)||b.name};hd.clearSnapshot=qP;hd.arr=Qe;hd.properties=Gp;hd.Path=Cg;hd.promise=oe;hd.obj=lf;hd.registerExtension=A;hd.Resource=Nf;hd.resource=x;hd.pt=nf;hd.MorphicDB=Bu;hd.ObjectPool=xi;hd.allPlugins=pu;hd.normalizeOptions=zv;hd.deserializeMorph=mE;hd.loadPackagesAndModulesOfSnapshot=nE;hd.subscribeOnce=In;
hd.once=kp;hd.ast=IJ;hd.findLocalComponents=kE;hd.findLocalComponents=kE;var AL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=e.hasOwnProperty("StyleguidePlugin")&&"function"===typeof e.StyleguidePlugin?e.StyleguidePlugin:e.StyleguidePlugin=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"afterSerialization",value:function(a,f,m){var q={},r="styleguide://"+hd.getProjectName($world);
hd.findLocalComponents(f).forEach(function(u){return q[r+"/"+u]="styleguide://$world/"+u});Object.values(f).forEach(function(u){if((u=u.props.master)&&u.value){for(var v in q)u.value.includes(v)&&(u.value=u.value.split(v).join(q[v]));u.value=u.value.split(r).join("styleguide://$world")}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleguidePlugin"}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3123,end:4008})}(void 0);hd.StyleguidePlugin=AL;hd.StyleguidePlugin=AL;hd.StyleguidePlugin=AL;hd.prefetchCoreStyleguides=JI;hd.prefetchCoreStyleguides=JI;var BL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=e.hasOwnProperty("ComponentPolicy")&&"function"===typeof e.ComponentPolicy?e.ComponentPolicy:e.ComponentPolicy=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.derivedMorph=a;this._overriddenProps=new WeakMap;if(f.isMorph||"string"===typeof f)this.auto=f,f.isMorph&&(this.auto.isComponent=!0),"string"===typeof f&&this.resolveMasterComponents();else{a=f.click;var m=f.auto,q=f.hover,r=void 0===f.light?{}:f.light;f=void 0===f.dark?{}:f.dark;r&&(this.light=
r);f&&(this.dark=f);a&&(this.click=a);m&&(this.auto=m);q&&(this.hover=q);this.resolveMasterComponents()}}},{key:"uses",value:function(a){return[this.auto,this.click,this.hover].includes(a)}},{key:"spec",value:function(){return hd.obj.select(this,["auto","click","hover","light","dark"])}},{key:"equals",value:function(a){if(!a)return!1;if("string"===typeof a)return lively.FreezerRuntime||(a=a.replace("styleguide://$world","styleguide://"+hd.getProjectName($world))),this.getResourceUrlFor(this.auto)==
a;for(var f=$jscomp.makeIterator(["auto","click","hover"]),m=f.next();!m.done;m=f.next())if(m=m.value,"string"===typeof a[m]){if(this.getResourceUrlFor(this[m])!=a[m])return!1}else if((this[m]||null)!=(a[m]||null))return!1;return!0}},{key:"getManagedMorphs",value:function(){var a=this,f=[];this.derivedMorph.withAllSubmorphsDo(function(m){a.managesMorph(m)&&0<Object.keys(a._overriddenProps.get(m)).filter(function(q){return"_rev"!=q}).length&&f.push([m,Object.keys(a._overriddenProps.get(m))])});return f}},
{key:"__dont_serialize__",get:function(){var a=["_overriddenProps","_applying","_appliedMaster","_hasUnresolvedMaster"];hd.obj.isEmpty(this.dark)&&a.push("dark");hd.obj.isEmpty(this.light)&&a.push("light");return a}},{key:"__serialize__",value:function(){var a={};this.auto&&(a.auto=this.getResourceUrlFor(this.auto));this.click&&(a.click=this.getResourceUrlFor(this.click));this.hover&&(a.hover=this.getResourceUrlFor(this.hover));return{__expr__:"("+JSON.stringify(a)+")"}}},{key:"__after_deserialize__",
value:function(a,f){this._overriddenProps=new WeakMap;delete this.managedMorphs;this.resolveMasterComponents()}},{key:"whenApplied",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(f=hd.promise.deferred(),m=f.promise,q=f.resolve,hd.once(a,"_appliedMaster",q),r.yield(a._hasUnresolvedMaster,2)):3!=r.nextAddress?a._appliedMaster?r.jumpTo(3):r.yield(m,3):r.return(!0)})}},{key:"whenReady",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.yield(a._hasUnresolvedMaster,
0)})}},{key:"getResourceUrlFor",value:function(a){return a?a._resourceHandle?a._resourceHandle.url.replace("$world",hd.getProjectName($world)):void 0==a.name?null:"styleguide://"+hd.getProjectName($world)+"/"+a.name:null}},{key:"getWorldUrlFor",value:function(a){a=hd.resource("string "===typeof a?a:this.getResourceUrlFor(a)).worldName;return a==hd.getProjectName($world)?document.location.href:hd.worldToUrl[a]}},{key:"resolveMasterComponents",value:function(){var a=this,f,m,q,r,u,v,y,z,B,C,G,F,N,L,
S,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:f=hd.promise.deferred(),a._hasUnresolvedMaster=f.promise,m=a,q=void 0===m.light?{}:m.light,r=void 0===m.dark?{}:m.dark,u=["auto","click","hover"],v=[],qa.setCatchFinallyBlocks(2),y=$jscomp.makeIterator(u),z=y.next();case 4:if(z.done){qa.leaveTryBlock(3);break}B=z.value;if("string"!==typeof a[B]){qa.jumpTo(7);break}C=a;G=B;return qa.yield(hd.resource(a[B]).read(),8);case 8:C[G]=qa.yieldResult;case 7:if("string"!==
typeof q[B]){qa.jumpTo(9);break}F=q;N=B;return qa.yield(hd.resource(q[B]).read(),10);case 10:F[N]=qa.yieldResult;case 9:if("string"!==typeof r[B]){qa.jumpTo(11);break}L=r;S=B;return qa.yield(hd.resource(r[B]).read(),12);case 12:L[S]=qa.yieldResult;case 11:v.push(a[B],q[B],r[B]);z=y.next();qa.jumpTo(4);break;case 2:throw ha=qa.enterCatchBlock(),Error("Encountered invalid master component reference: "+ha.message);case 3:hd.arr.compact(v).forEach(function(D){D.isComponent||(D.isComponent=!0)}),f.resolve(),
a._hasUnresolvedMaster=!1,qa.jumpToEnd()}})}},{key:"applyAnimated",value:function(a){a=void 0===a?{duration:1E3}:a;var f=hd.promise.deferred(),m=f.promise;f=f.resolve;this.applyIfNeeded(!0,a);hd.once(this,"_animationConfig",f);return m}},{key:"applyIfNeeded",value:function(a,f){var m=this;a=void 0===a?!1:a;if(f=void 0===f?!1:f)this._animationConfig=f;var q=this.derivedMorph;if(q.env.world)if(q.env.eventDispatcher){if(this._hasUnresolvedMaster)return this._originalOpacity=q.opacity,q.withMetaDo({metaInteraction:!0},
function(){f||[q].concat($jscomp.arrayFromIterable(q.ownerChain())).find(function(u){return u.isComponent})||(q.opacity=0)}),this._hasUnresolvedMaster.then(function(){m.applyIfNeeded(a);q.withMetaDo({metaInteraction:!0},function(){q.opacity=m._originalOpacity});delete m._originalOpacity;delete m._capturedExtents});var r=this.determineMaster(q);r&&this._appliedMaster!=r&&(a=!0);r&&a&&(this.apply(q,r),this._appliedMaster=r)}else hd.once(q.env,"eventDispatcher",function(){m.applyIfNeeded(a,f)});else hd.once(q.env,
"world",function(){m.applyIfNeeded(a,f)})}},{key:"getStyleProperties",value:function(a){var f=a.propertiesAndPropertySettings();a=f.properties;var m=[];f=$jscomp.makeIterator(f.order);for(var q=f.next();!q.done;q=f.next())q=q.value,a[q].isStyleProp&&m.push(q);return m}},{key:"apply",value:function(a,f,m){var q=this;m=void 0===m?this._animationConfig:m;if(!this._applying){this._applying=!0;try{var r=function(){return a.withMetaDo({metaInteraction:!0},function(){var u=q.prepareSubmorphsToBeManaged(a,
f);f.withAllSubmorphsDoExcluding(function(v){var y=v==f,z=y?a:u[v.name];if(z)if(hd.obj.isArray(z)&&(z=z.pop()),!v.master||y||v.master.equals(z.master)||q._overriddenProps.get(z).master||(z.master=v.master.spec(),z.requestMasterStyling()),z.master&&!y)y=z.master._overriddenProps.get(z)||{},y.position||(z.position=v.position),y.extent||(z.extent=v.extent);else{y=$jscomp.makeIterator(q.getStyleProperties(v));for(var B=y.next();!B.done;B=y.next())if(B=B.value,!q._overriddenProps.get(z)[B])if("layout"==
B)z.layout&&v.layout&&z.layout.name()==v.layout.name()&&z.layout.equals(v.layout)||(z.layout=v.layout?v.layout.copy():void 0);else{if(v==f){if("extent"==B&&!z.extent.equals(hd.pt(10,10))&&(!z.owner||z.owner.isWorld||z.ownerChain().find(function(C){return C.master&&C.master.managesMorph(z)})))continue;if("position"==B)continue}z.isLabel&&"extent"==B||["border","borderTop","borderBottom","borderRight","borderLeft"].includes(B)||(hd.obj.equals(z[B],v[B])||(z[B]=v[B]),["fixedHeight","fixedWidth"].includes(B)&&
z._parametrizedProps&&z._parametrizedProps.extent&&(z.extent=z._parametrizedProps.extent))}z._parametrizedProps&&delete z._parametrizedProps}},function(v){return f!=v&&v.master})})};m?a.withAnimationDo(r,m).then(function(){q._animationConfig=!1;q._applying=!1}):a.dontRecordChangesWhile(r)}finally{m||(this._applying=!1),delete a._parametrizedProps}}}},{key:"clearOverriddenPropertiesFor",value:function(a,f){var m=this._overriddenProps.get(a);this._overriddenProps.set(a,hd.obj.dissoc(m,f))}},{key:"prepareSubmorphsToBeManaged",
value:function(a,f){var m=this,q={};a.withAllSubmorphsDoExcluding(function(r){q[r.name]&&(hd.obj.isArray(q[r.name])?q[r.name].push(r):q[r.name]=[q[r.name],r]);q[r.name]=r},function(r){return r!=a&&r.master});f.withAllSubmorphsDoExcluding(function(r){if(r=r==f?a:q[r.name])hd.obj.isArray(r)&&(r=r.pop()),m.prepareMorphToBeManaged(r)},function(r){return r!=f&&r.master});return q}},{key:"managedMorphs",get:function(){var a=this,f=hd.arr.groupBy(this.derivedMorph.withAllSubmorphsSelect(function(q){return a.managesMorph(q)}),
function(q){return q.name}),m;for(m in f)f[m]=f[m][0];return f}},{key:"reconcileSubmorphs",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(a.whenReady(),2);f=a.managedMorphs;m=[];q=a._appliedMaster||a.auto;f[q.name]=a.derivedMorph;if(!q)return r.return();q.withAllSubmorphsDo(function(u){if(q&&u==q)m.push(u,a.derivedMorph);else{var v;if(v=f[u.name])if(v.owner.name==u.owner.name)m.push(v);else{var y;if(y=f[u.owner.name])u=
u.owner.submorphs.indexOf(u),m.push(y.addMorphAt(v,u));else throw Error("Missing a owner that had to be added previously....");}else v=f[u.name]=u.copy(),y=f[u.owner.name],u=u.owner.submorphs.indexOf(u),v.master||(v.submorphs=[]),m.push(y.addMorphAt(v,u))}});m=hd.arr.compact(m);Object.values(hd.obj.dissoc(f,m.map(function(u){return u.name}))).forEach(function(u){console.log(f,m.map(function(v){return v.name}));u.remove()});r.jumpToEnd()})}},{key:"managesMorph",value:function(a){return this._overriddenProps.has(a)}},
{key:"propsToSerializeForMorph",value:function(a,f){if(!this.managesMorph(a))return f;for(var m=[],q=$jscomp.makeIterator(this.getStyleProperties(a)),r=q.next();!r.done;r=q.next())r=r.value,this._overriddenProps.get(a)[r]||!("position"==r&&a==this.derivedMorph||"extent"==r&&a==this.derivedMorph)&&m.push(r);return hd.arr.withoutAll(f,m)}},{key:"prepareMorphToBeManaged",value:function(a){if(!this._overriddenProps.has(a)){var f={},m;for(m in a._parametrizedProps)"__takenFromSnapshot__"!=m&&(f[m]=!0);
this._overriddenProps.set(a,f)}}},{key:"determineMaster",value:function(a){var f=a.env.world.colorScheme,m=a.env.eventDispatcher.isMorphHovered(a);a=a.env.eventDispatcher.isMorphClicked(a);var q=this.getMasterForState(this,{isHovered:m,isClicked:a});this.light&&"light"==f&&(q=this.getMasterForState(this.light,{isHovered:m,isClicked:a})||q);this.dark&&"dark"==f&&(q=this.getMasterForState(this.light,{isHovered:m,isClicked:a})||q);return q}},{key:"getMasterForState",value:function(a,f){var m=a.auto,
q=a.hover,r=a.click,u=f.isClicked;a=m;if(f.isHovered)if(q)a=q;else for(f=a&&a.master,q=[];f;){if(f.hover){a=f.hover;break}f=hd.Path("auto.master").get(f);if(q.includes(f))break;q.push(f)}if(u)if(a=m,r)a=r;else for(m=a&&a.master;m;){if(m.click){a=m.click;break}m=hd.Path("auto.master").get(m)}return a}},{key:"onMorphChange",value:function(a,f){if(!this._applying&&!hd.Path("meta.metaInteraction").get(f)&&!["_rev","name"].includes(f.prop)&&("opacity"==f.prop&&delete this._originalOpacity,"master"==f.prop&&
this.managesMorph(a)&&(this._overriddenProps.get(a).master=!0),a.styleProperties.includes(f.prop)))if(this.managesMorph(a)){if(!a.master||a.master==this||["extent","position"].includes(f.prop))this._overriddenProps.get(a)[f.prop]=!0}else if(a._parametrizedProps)a._parametrizedProps[f.prop]=f.value;else{var m={};a._parametrizedProps=(m[f.prop]=f.value,m)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ComponentPolicy"}},{key:"for",value:function(a,f){f=f.constructor===hd.ComponentPolicy?
f:new this(a,f);a.master&&(f._overriddenProps=a.master._overriddenProps);return f}}],e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4902,end:26959})}(void 0);hd.ComponentPolicy=BL;hd.ComponentPolicy=BL;hd.ComponentPolicy=BL;hd.styleGuideURLRe=/^styleguide:\/\/([^\/]+)\/(.*)$/;hd.fetchedSnapshots=
hd.fetchedSnapshots||{};hd.resolvedMasters=hd.resolvedMasters||{};hd.modulesToLoad=hd.modulesToLoad||{};hd.li=hd.li||void 0;hd.localNamePromise=hd.localNamePromise||void 0;hd.masterComponentFetches=hd.masterComponentFetches||{};hd.worldToUrl=hd.worldToUrl||{};var b6=wa("bU",hd.resolvedMasters);hd.resolvedMasters=b6;hd.resolvedMasters=b6;hd.clearSnapshot=qP;hd.clearSnapshot=qP;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=e.hasOwnProperty("StyleGuideResource")&&
"function"===typeof e.StyleGuideResource?e.StyleGuideResource:e.StyleGuideResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"canDealWithJSON",get:function(){return!1}},{key:"componentName",get:function(){var a=this.url.match(hd.styleGuideURLRe);a=$jscomp.makeIterator(a);a.next();a.next();return a.next().value}},{key:"worldName",get:function(){var a=this.url.match(hd.styleGuideURLRe);a=$jscomp.makeIterator(a);
a.next();var f=a.next().value;a.next();lively.FreezerRuntime||"$world"!=f||(f=this.localWorldName());return f}},{key:"dirList",value:function(a,f){var m=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return m.worldName==hd.getProjectName($world)?r.return($world.withAllSubmorphsSelect(function(u){return u.isComponent})):(q=hd.resolvedMasters[m.worldName])?r.return(Object.values(q)):r.return([])})}},{key:"localWorldName",value:function(){var a;if(a=hd.getProjectName($world))return a;
if(hd.localNamePromise)return hd.localNamePromise;a=hd.promise.deferred();var f=a.resolve;hd.localNamePromise=a.promise;if("__newWorld__"==hd.resource(document.location.href).query().name)return f("__newWorld__"),hd.localNamePromise;hd.subscribeOnce("world/loaded",function(){f(hd.getProjectName($world))},System);return hd.localNamePromise}},{key:"fetchFromMasterDir",value:function(a,f){var m=a.join(this.worldName).join(f+".json");if(hd.masterComponentFetches[m.url])return hd.masterComponentFetches[m.url];
hd.masterComponentFetches[m.url]=function(){var q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(q=hd,r=q.deserializeMorph,u.yield(m.readJson(),2)):u.return(r.call(q,u.yieldResult))})}();return hd.masterComponentFetches[m.url]}},{key:"read",value:function(){var a=this,f,m,q,r,u,v,y,z,B,C,G,F,N,L,S,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){switch(qa.nextAddress){case 1:f=a.componentName;if(m=hd.Path([a.worldName,a.componentName]).get(hd.resolvedMasters))return qa.return(m);
if(!lively.FreezerRuntime){qa.jumpTo(2);break}q=hd.resource(System.baseURL);q.isFile()&&(q=q.parent());r=q.join("masters/");return qa.yield(a.fetchFromMasterDir(r,f),3);case 3:m=qa.yieldResult;case 2:if(lively.FreezerRuntime){qa.jumpTo(4);break}hd.fetchedSnapshots[a.worldName]||(console.log("scheduling fetch of",a.worldName),v=hd.promise.deferred(),u=v.resolve,hd.fetchedSnapshots[a.worldName]=v.promise);return qa.yield(a.localWorldName(),5);case 5:if(qa.yieldResult==a.worldName){m="undefined"!==typeof $world&&
($world.getSubmorphNamed(f)||$world.localComponents.find(function(D){return D.name==f}));if(!m)throw Error('Master component "'+f+'" can not be found in "'+a.worldName+'"');return qa.return(m)}return u?(z=hd.MorphicDB.default,qa.yield(z.fetchCommit("world",a.worldName),9)):qa.yield(hd.fetchedSnapshots[a.worldName],8);case 8:y=qa.yieldResult;qa.jumpTo(7);break;case 9:if(qa.yieldResult)return qa.yield(z.fetchSnapshot("world",a.worldName),15);B=hd.resource(System.baseURL).join("lively.morphic/styleguides").join(a.worldName+
".json");return qa.yield(B.exists(),12);case 12:if(!qa.yieldResult){u(null);qa.jumpTo(11);break}return qa.yield(B.readJson(),14);case 14:y=qa.yieldResult;hd.worldToUrl[a.worldName]=hd.resource(System.baseURL).join("worlds/load").withQuery({file:"lively.morphic/styleguides/"+a.worldName+".json"}).url;qa.jumpTo(11);break;case 15:y=qa.yieldResult,hd.worldToUrl[a.worldName]=hd.resource(System.baseURL).join("worlds/load").withQuery({name:a.worldName}).url;case 11:return hd.ensureAbsoluteComponentRefs({snapshotAndPackages:y,
localComponents:[],localWorldName:a.worldName}),qa.yield(hd.loadPackagesAndModulesOfSnapshot(y),16);case 16:Object.values(y.snapshot).filter(function(D){return D.props.master}).forEach(function(D){var P=D.props.master.value;hd.obj.isString(P)&&(D.props.master.value=P.split("$world").join(a.worldName))}),u(y);case 7:C=new hd.ObjectPool(hd.normalizeOptions({plugins:[new hd.StyleguidePlugin].concat($jscomp.arrayFromIterable(hd.allPlugins))}));G=$jscomp.makeIterator(Object.entries(y.snapshot).find(function(D){D=
$jscomp.makeIterator(D);D.next();D=D.next().value;return hd.Path("props.isComponent.value").get(D)&&hd.Path("props.name.value").get(D)==f})||[]);F=G.next().value;if(!F)throw Error('Master component "'+f+'" can not be found in "'+a.worldName+'"');m=C.resolveFromSnapshotAndId(Object.assign({},y,{id:F}));case 4:hd.resolvedMasters[a.worldName]?hd.resolvedMasters[a.worldName][f]=m:(N={},hd.resolvedMasters[a.worldName]=(N[f]=m,N));m._resourceHandle=a;if(!m._pool.mastersInSubHierarchy){qa.jumpTo(17);break}L=
$jscomp.makeIterator(m._pool.mastersInSubHierarchy);S=L.next();case 18:if(S.done){qa.jumpTo(20);break}ha=S.value;return qa.yield(ha.applyIfNeeded(!0),21);case 21:ha.derivedMorph.ownerChain().includes(m)||ha.derivedMorph.requestMasterStyling();S=L.next();qa.jumpTo(18);break;case 20:delete m._pool;case 17:return qa.return(Promise.resolve(m))}})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Master Components can not be written to!");})}},
{key:"exists",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName);return m.return(f&&f.isComponent)})}},{key:"remove",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(f="undefined"!==typeof $world&&$world.getSubmorphNamed(a.morphName))f.isComponent=!1;return m.return(!0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleGuideResource"}}],
e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:30633,end:36940})})(hd.Resource);var OS={name:"styleguide",matches:function(b){return b.match(hd.styleGuideURLRe)},resourceClass:hd.StyleGuideResource};hd.resourceExtension=OS;hd.resourceExtension=OS;hd.resourceExtension=OS;hd.registerExtension(hd.resourceExtension);
(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-guide.js"),l=e.hasOwnProperty("StyleGuide")&&"function"===typeof e.StyleGuide?e.StyleGuide:e.StyleGuide=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,void 0,void 0,e,{pathInPackage:function(){return"style-guide.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37126,end:37610})})(void 0);var Td=lively.FreezerRuntime.recorderFor("lively.morphic/serialization.js");Td.normalizeOptions=function(b){b=Object.assign({reinitializeIds:!1,plugins:[].concat($jscomp.arrayFromIterable(Td.allPlugins),[new Td.StyleguidePlugin])},b);b.reinitializeIds&&(b.reinitializeIds="function"===typeof b.reinitializeIds?b.reinitializeIds:function(e,l){return l.realObj.isMorph?Td.newMorphId(l.realObj.constructor):
null});return b};Td.serializeMorph=lE;Td.deserializeMorph=mE;Td.loadWorldFromResource=rP;Td.saveWorldToResource=sP;Td.copyMorph=KI;Td.createMorphSnapshot=Dz;Td.loadMorphFromSnapshot=bu;Td.resourceToJSON=F0;Td.findPackagesInFileSpec=G0;Td.packagesOfSnapshot=tP;Td.loadPackagesAndModulesOfSnapshot=nE;Td.findRequiredPackagesOfSnapshot=LI;Td.requiredModulesOfSnapshot=np;Td.deserializeWithMigrations=Py;Td.serialize=Hq;Td.allPlugins=pu;Td.MorphicEnv=ar;Td.resource=x;Td.newMorphId=bc;Td.morph=sb;Td.pathForBrowserHistory=
fb;Td.ast=IJ;Td.serializeMorph=lE;Td.serializeMorph=lE;Td.deserializeMorph=mE;Td.deserializeMorph=mE;Td.loadWorldFromResource=rP;Td.loadWorldFromResource=rP;Td.saveWorldToResource=sP;Td.saveWorldToResource=sP;Td.copyMorph=KI;Td.copyMorph=KI;Td.modules=BK;Td.createFiles=w;Td.promise=oe;Td.Path=Cg;Td.graph=Xv;Td.arr=Qe;Td.migrations=CK;Td.StyleguidePlugin=AL;Td.findLocalComponents=kE;var CC=Td.modules;Td.registerPackage=CC.registerPackage;Td.module=CC.module;Td.getPackage=CC.getPackage;Td.ensurePackage=
CC.ensurePackage;Td.lookupPackage=CC.lookupPackage;Td.semver=CC.semver;Td.objectScriptingEnabled=!1;Td.createMorphSnapshot=Dz;Td.createMorphSnapshot=Dz;Td.loadMorphFromSnapshot=bu;Td.loadMorphFromSnapshot=bu;Td.packagesOfSnapshot=tP;Td.packagesOfSnapshot=tP;Td.loadPackagesAndModulesOfSnapshot=nE;Td.loadPackagesAndModulesOfSnapshot=nE;Td.findRequiredPackagesOfSnapshot=LI;Td.findRequiredPackagesOfSnapshot=LI;var Pb=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js");Pb.generateUnfolded=function(b,
e,l){e=void 0===e?["top","left","right","bottom"]:e;l=void 0===l?"core":l;var a={},f={};e=$jscomp.makeIterator(e);for(var m=e.next();!m.done;f={$jscomp$loop$prop$m$1368$2653:f.$jscomp$loop$prop$m$1368$2653},m=e.next())f.$jscomp$loop$prop$m$1368$2653=m.value,a[b+Pb.string.capitalize(f.$jscomp$loop$prop$m$1368$2653)]={group:l,derived:!0,generated:!0,after:[b],get:function(q){return function(){return this.getProperty(b)[q.$jscomp$loop$prop$m$1368$2653]}}(f),set:function(q){return function(r){var u={};
this[b]=Object.assign({},this.getProperty(b),(u[q.$jscomp$loop$prop$m$1368$2653]=r,u))}}(f)};return a};Pb.Color=xf;Pb.Line=Fl;Pb.Point=Gf;Pb.pt=nf;Pb.rect=Ff;Pb.Rectangle=Pd;Pb.Transform=Aj;Pb.string=Hg;Pb.properties=Gp;Pb.obj=lf;Pb.arr=Qe;Pb.num=Gk;Pb.promise=oe;Pb.tree=Yv;Pb.PropertyPath=Cg;Pb.signal=oj;Pb.copy=Qy;Pb.deserializeSpec=lp;Pb.ExpressionSerializer=mm;Pb.serializeSpec=Ln;Pb.getClassName=yo;Pb.renderRootMorph=$w;Pb.ShadowObject=kr;Pb.AnimationQueue=gK;Pb.easings=lr;Pb.addOrChangeCSSDeclaration=
oi;Pb.Icon=Wn;Pb.morph=sb;Pb.newMorphId=bc;Pb.sanitizeFont=Na;Pb.MorphicEnv=ar;Pb.config=vk;Pb.CommandHandler=Dha;Pb.KeyHandler=sR;Pb.findKeysForPlatform=Mb;Pb.TargetScript=tR;Pb.copyMorph=KI;Pb.ComponentPolicy=BL;Pb.Comment=ib;Pb.CommentBrowser=Qb;Pb.defaultCommandHandler=new Pb.CommandHandler;var Mj=wa("av",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Morph")&&"function"===typeof e.Morph?e.Morph:e.Morph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a||(a={});var f=a.env||Pb.MorphicEnv.default();this._env=f;this._rev=f.changeManager.revision;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=Pb.newMorphId(Pb.getClassName(this));this._animationQueue=new Pb.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=
Pb.obj.select(a,Pb.arr.intersect(Object.keys(a),this.styleProperties));this.initializeProperties(a);a.bounds&&(this.setBounds(a.bounds),this._parametrizedProps.extent=this.extent,this._parametrizedProps.position=this.position);if(void 0!=a.height||void 0!=a.width)this._parametrizedProps.extent=this.extent;a.layout&&(this.layout=a.layout);if("function"===typeof this.onLoad&&!this.isComponent)this.onLoad()}},{key:"__serialization_id_property__",get:function(){return"_id"}},{key:"__deserialize__",value:function(a,
f,m,q){this._env=Pb.MorphicEnv.default();this._rev=a.rev;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=f.id;this._animationQueue=new Pb.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this._parametrizedProps=Pb.obj.select(a.props,Pb.arr.intersect(Object.keys(a.props),this.styleProperties));this._parametrizedProps.__takenFromSnapshot__=!0;a=q.expressionSerializer;for(var r in this._parametrizedProps)(f=this._parametrizedProps[r].value)&&
Pb.obj.isString(f)&&a.isSerializedExpression(f)&&(this._parametrizedProps[r]=a.deserializeExpr(f));this.initializeProperties();this._pool=q}},{key:"__after_deserialize__",value:function(a,f,m){this.resumeStepping();if("function"===typeof this.onLoad)try{this.onLoad()}catch(q){console.error("[lively.morphic] "+this+".onLoad() error: "+q.stack)}this.isComponent&&!this.owner||delete this._pool;this.master&&(m.mastersInSubHierarchy?m.mastersInSubHierarchy.push(this.master):m.mastersInSubHierarchy=[this.master])}},
{key:"__only_serialize__",get:function(){var a=this.defaultProperties,f=this.propertiesAndPropertySettings().properties,m=[];0<this._tickingScripts.length&&m.push("_tickingScripts");this.attributeConnections&&m.push("attributeConnections");var q=[this].concat($jscomp.arrayFromIterable(this.ownerChain())).map(function(v){return v.__isBeingSerialized__&&v.master}).find(Boolean),r;for(r in f){var u=f[r];q&&q.managesMorph(this)&&void 0!=q._overriddenProps.get(this)[r]?m.push(r):u.readOnly||u.derived||
Pb.obj.equals(this[r],a[r])||u.hasOwnProperty("serialize")&&!u.serialize||m.push(r)}return q&&!this.isComponent?q.propsToSerializeForMorph(this,m):m}},{key:"__additionally_serialize__",value:function(a,f,m,q){if((f=a.props.submorphs)&&!this.isEpiMorph)for(f=f.value,q=f.length;q--;)m.refForId(f[q].id).realObj.isEpiMorph&&Pb.arr.removeAt(f,q);m=$jscomp.makeIterator(Pb.arr.intersect(this.__only_serialize__,["borderColor","borderWidth","borderStyle","borderRadius"]));for(f=m.next();!f.done;f=m.next())f=
f.value,a.props[f]={key:f,verbatim:!0,value:Pb.obj.extract(this[f],["top","right","bottom","left"],function(r,u){return u&&u.isColor?u.toTuple():u})}}},{key:"isMorph",get:function(){return!0}},{key:"id",get:function(){return this._id}},{key:"env",get:function(){return this._env}},{key:"spec",value:function(a,f){a=void 0===a?!0:a;f=void 0===f?new WeakMap:f;var m=this.defaultProperties,q=this.propertiesAndPropertySettings().properties,r={submorphs:!0},u={};if(f.has(this))return f.get(this);f.set(this,
u);for(var v in q){var y=q[v];y&&(y.readOnly||y.derived||y.hasOwnProperty("serialize")&&!y.serialize||v in r||a&&(Pb.obj.equals(this[v],m[v])||this[v]&&m[v]&&this[v].valueOf&&m[v].valueOf&&Pb.obj.equals(this[v].valueOf(),m[v].valueOf()))||(u[v]=this[v]&&this[v].isMorph?this[v].spec(a,f):this[v]&&"layout"===v?this[v].copy():this[v]))}u.submorphs=this.submorphs.map(function(z){return z.spec(a,f)});u.type=this.constructor;return u}},{key:"printSpec",value:function(a,f){f=void 0===f?0:f;a=(void 0===a?
null:a)||this.spec();var m={name:!0,type:!0,submorphs:!0},q="  ".repeat(f+1),r="  ".repeat(f)+"{\n"+(q+'name: "'+a.name+'",\n')+(q+'type: "'+a.type+'",\n'),u;for(u in a)m[u]||(r+=""+q+u+": "+Pb.string.print(a[u])+",\n");if(a.submorphs){r+=q+"submorphs: [\n";a=$jscomp.makeIterator(a.submorphs);for(m=a.next();!m.done;m=a.next())r+=this.printSpec(m.value,f+1);r+="]\n"}return r+="  ".repeat(f)+"}\n"}},{key:"defaultProperties",get:function(){var a=this.constructor,f=a[Symbol.for("lively-instance-superclass")];
if(!a._morphicDefaultPropertyValues||a._morphicDefaultPropertyValues==(f&&f._morphicDefaultPropertyValues)){a=this.constructor._morphicDefaultPropertyValues={};f=this.propertiesAndPropertySettings().properties;for(var m in f){var q=f[m];q.hasOwnProperty("defaultValue")&&(q=q.defaultValue,Array.isArray(q)&&(q=q.slice()),a[m]=q)}}return this.constructor._morphicDefaultPropertyValues}},{key:"defaultProperty",value:function(a){return this.defaultProperties[a]}},{key:"getProperty",value:function(a){return this._morphicState[a]}},
{key:"setProperty",value:function(a,f,m){return this.addValueChange(a,f,m)}},{key:"changeMetaData",value:function(a,f,m,q){m=void 0===m?!0:m;q=void 0===q?!0:q;var r=this.metadata;r||(r={});(new Pb.PropertyPath(a)).withParentAndKeyDo(r,!0,function(u,v){u[v]=q?Object.assign({},u[v],{},f):f;var y=u.__dont_serialize__;m?y&&y.includes(v)&&(Pb.arr.remove(y,v),0===y.length&&delete u.__dont_serialize__):(y||(y=u.__dont_serialize__=[]),Pb.arr.pushIfNotIncluded(y,v))});this.metadata=r}},{key:"installFont",
value:function(a,f){var m={};this.installedFonts=Object.assign({},this.installedFonts,(m[a]=f,m));this.insertFontCSS(a,f)}},{key:"uninstallFont",value:function(a){delete this.installedFonts[a];(a=document.getElementById(this.id+"-"+a))&&a.remove()}},{key:"ensureInstalledFonts",value:function(a,f){a=$jscomp.makeIterator(a);for(var m=a.next();!m.done;m=a.next())(m=document.getElementById(this.id+"-"+m.value))&&m.remove();f=$jscomp.makeIterator(f);for(m=f.next();!m.done;m=f.next())a=m.value,this.env.fontMetric.isFontSupported(Pb.sanitizeFont(a))||
this.insertFontCSS(a,this.installedFonts[a])}},{key:"insertFontCSS",value:function(a,f){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(m.whenRendered(),2);f.endsWith(".otf")?Pb.addOrChangeCSSDeclaration(m.id+"-"+a,"@font-face {\n             font-family: "+a+';\n             src: url("'+m.installedFonts[a]+'") format("opentype");\n         }'):Pb.addOrChangeCSSDeclaration(m.id+"-"+a,'@import url("'+m.installedFonts[a]+'");');q.jumpToEnd()})}},
{key:"toString",value:function(){return"<"+Pb.getClassName(this)+" - "+(this.name?this.name:this.id)+">"}},{key:"edit",value:function(a){return this.env.world.execCommand("open object editor",Object.assign({className:Pb.getClassName(this)},a,{target:this}))}},{key:"inspect",value:function(a){return this.env.world.execCommand("open object inspector",Object.assign({},a,{target:this}))}},{key:"livelyCustomInspect",value:function(){var a={_id:!0,_owner:!0},f={},m=this.propertiesAndPropertySettings().properties,
q=[],r;for(r in m)a[r]||m[r].derived&&!m[r].showInInspector||(f[r]=!0,q.push({key:r,value:this[r]}));q.push({key:"id",value:this.id});q.push({key:"owner",value:this.owner});q=q.sort(function(v,y){v=v.key.toLowerCase();y=y.key.toLowerCase();return v<y?-1:v===y?0:1});if(this.attributeConnections)for(m=$jscomp.makeIterator(this.attributeConnections),r=m.next();!r.done;r=m.next())r=r.value,a["$$"+r.sourceAttrName,""+r.sourceAttrName]=!0;Object.assign(f,a);a=$jscomp.makeIterator("attributeConnections _animationQueue _morphicState _dirty doNotCopyProperties doNotSerialize _env _cachedPaths _pathDependants _rendering _rev _submorphOrderChanged _tickingScripts _transform _invTransform _styleSheetProps _renderer _tooltipViewer layout".split(" "));
for(m=a.next();!m.done;m=a.next())m=m.value,m in this&&(f[m]=!0,q.push({key:m,value:this[m],keyString:"[internal] "+m}));for(var u in this)!f[u]&&this.hasOwnProperty(u)&&q.unshift({key:u,value:this[u],keyString:"[UNKNOWN PROPERTY] "+u});return{sort:!1,includeDefault:!1,properties:q}}},{key:"show",value:function(a){return $world.execCommand("show morph",{morph:this,loop:a})}},{key:"setStatusMessage",value:function(a,f,m,q){var r=this.world();q=Object.assign({maxLines:7},q);return r?r.setStatusMessageFor(this,
a,f,m,q):console.log(a)}},{key:"showError",value:function(a){var f=this.world();return f?f.showErrorFor(this,a):console.error(a)}},{key:"onChange",value:function(a){var f=this,m=a.meta&&a.meta.animation,q=a.prop,r=a.value;if("position"===q||"rotation"===q||"scale"===q||"origin"===q||"reactsToPointer"===q)this.onBoundsChanged(this.bounds()),m={},this.updateTransform((m[q]=r,m));else if("extent"==q)this.onBoundsChanged(this.bounds());else"layout"==q&&(m?r&&r.attachAnimated(m.duration,this,m.easing):
r&&r.attach());this.layout&&this.layout.onChange(a);this.isComponent&&!Pb.PropertyPath("meta.metaInteraction").get(a)&&(q=this.world(),delete this._preview,(q?q.withAllSubmorphsSelect(function(u){return u.master&&u.master.uses(f)}):[]).forEach(function(u){u.requestMasterStyling()}));if(this.master)this.master.onMorphChange(this,a)}},{key:"onBoundsChanged",value:function(a){var f=this;Pb.signal(this,"bounds",a);[].concat($jscomp.arrayFromIterable(a.corners),$jscomp.arrayFromIterable(a.sides)).forEach(function(m){Pb.signal(f,
m,a.partNamed(m))})}},{key:"onSubmorphChange",value:function(a,f){var m=this;if(this.isComponent&&!Pb.PropertyPath("meta.metaInteraction").get(a)&&!Pb.PropertyPath("meta.layoutAction").get(a)){var q=this.world();q&&q.withAllSubmorphsDo(function(r){r.master&&r.master.uses(m)&&r.requestMasterStyling()})}if(this.master)this.master.onMorphChange(f,a);this.layout&&this.layout.onSubmorphChange(f,a)}},{key:"changes",get:function(){return this.env.changeManager.changesFor(this)}},{key:"applyChange",value:function(a){this.env.changeManager.apply(this,
a)}},{key:"addValueChange",value:function(a,f,m){return this.env.changeManager.addValueChange(this,a,f,m)}},{key:"addMethodCallChangeDoing",value:function(a,f){return this.env.changeManager.addMethodCallChangeDoing(a,this,f)}},{key:"groupChangesWhile",value:function(a,f){return this.env.changeManager.groupChangesWhile(this,a,f)}},{key:"dontRecordChangesWhile",value:function(a){return this.env.changeManager.dontRecordChangesWhile(this,a)}},{key:"recordChangesWhile",value:function(a,f){return this.env.changeManager.recordChangesWhile(a,
f)}},{key:"recordChangesStart",value:function(a){return this.env.changeManager.recordChangesStartForMorph(this,a)}},{key:"recordChangesStop",value:function(a){return this.env.changeManager.recordChangesStopForMorph(this,a)}},{key:"withMetaDo",value:function(a,f){return this.env.changeManager.doWithValueChangeMeta(a,this,f)}},{key:"undoStart",value:function(a){return this.env.undoManager.undoStart(this,a)}},{key:"undoStop",value:function(a){return this.env.undoManager.undoStop(this,a)}},{key:"undoInProgress",
get:function(){return this.env.undoManager.undoInProgress}},{key:"animate",value:function(a){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(m=f._animationQueue.registerAnimation(a),f._animationQueue.animationsActive?m?q.yield(m.asPromise(),3):q.jumpTo(2):(m&&m.finish(),q.return(Promise.resolve(f)))):2!=q.nextAddress?q.return(q.yieldResult):q.return(Promise.resolve(f))})}},{key:"withAnimationDo",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){q=
m.groupChangesWhile(!1,a);r=q.changes;return u.yield(Promise.all(Object.values(Pb.arr.groupBy(r,function(v){return v.target.id})).map(function(v){var y=Object.assign({},f),z;v.forEach(function(B){z=B.target;B.reverseApply();y[B.prop]=B.value});return z&&z.animate(y)})),0)})}},{key:"isClip",value:function(){return"visible"!==this.clipMode}},{key:"scrollExtent",get:function(){return(this.submorphs.length?this.innerBounds().union(this.submorphBounds()):this.innerBounds()).extent().addPt(this.scrollbarOffset)}},
{key:"scrollBounds",value:function(){var a=this.scroll,f=this.scrollExtent;return new Pb.Rectangle(a.x,a.y,f.x,f.y)}},{key:"scrollDown",value:function(a){this.scroll=this.scroll.addXY(0,a)}},{key:"scrollUp",value:function(a){this.scrollDown(50*-a)}},{key:"scrollLeft",value:function(a){this.scroll=this.scroll.addXY(a,0)}},{key:"scrollRight",value:function(a){this.scrollLeft(-a)}},{key:"scrollPageDown",value:function(){this.scrollDown(this.height)}},{key:"scrollPageUp",value:function(){this.scrollUp(this.height)}},
{key:"addStyleClass",value:function(a){this.styleClasses=Pb.arr.uniq(this.styleClasses.concat(a))}},{key:"removeStyleClass",value:function(a){this.styleClasses=this.styleClasses.filter(function(f){return f!=a})}},{key:"adjustOrigin",value:function(a){var f=this.origin,m=this.globalBounds().topLeft();this.origin=a;this.submorphs.forEach(function(r){return r.position=r.position.subPt(a.subPt(f))});var q=this.globalBounds().topLeft();m=m.subPt(q);this.globalPosition=this.globalPosition.addPt(m)}},{key:"setBounds",
value:function(a){this.extent=a.extent();this.position=a.topLeft().addPt(this.origin)}},{key:"innerBounds",value:function(){var a=this.extent;return Pb.rect(0,0,a.x,a.y)}},{key:"relativeBounds",value:function(a){a=a||this.world();var f=this.origin.negated().extent(this.extent);f=a?this.transformRectToMorph(a,f):this.getGlobalTransform().transformRectToRect(f);this.isClip()||this.submorphs.forEach(function(m){f=f.union(m.relativeBounds(a))});return f}},{key:"bounds",value:function(){return this.relativeBounds(this.owner)}},
{key:"relativeSubmorphBounds",value:function(){var a=this.innerBounds();return this.submorphs.map(function(f){f=f.bounds();return Pb.rect(f.x/a.width,f.y/a.height,f.width/a.width,f.height/a.height)})}},{key:"globalBounds",value:function(){return this.relativeBounds(this.world())}},{key:"submorphBounds",value:function(a){a=Pb.arr.filter(this.submorphs,void 0===a?function(){return!0}:a);return 1>a.length?this.innerBounds():a.map(function(f){return f.bounds()}).reduce(function(f,m){return f.union(m)})}},
{key:"fitToSubmorphs",value:function(a){a=void 0===a?Pb.Rectangle.inset(0):a;var f=this.submorphs;if(f.length){f=f.reduce(function(r,u){return r.union(u.bounds())},f[0].bounds());var m=f.top()-a.top(),q=f.left()-a.left();this.moveBy(Pb.pt(q,m));Pb.arr.invoke(this.submorphs,"moveBy",Pb.pt(-q,-m));this.extent=Pb.pt(f.width+a.left()+a.right(),f.height+a.top()+a.bottom())}}},{key:"align",value:function(a,f){return this.moveBy(f.subPt(a))}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);
return this}},{key:"rotateBy",value:function(a){this.rotation+=a}},{key:"resizeBy",value:function(a){this.extent=this.extent.addPt(a)}},{key:"snap",value:function(a){this.position=this.position.roundTo(a||1)}},{key:"isEpiMorph",get:function(){return this.getProperty("epiMorph")&&!this.isComponent}},{key:"isUsedAsEpiMorph",value:function(){for(var a=this;a;){if(a.isEpiMorph)return!0;a=a.owner}return!1}},{key:"replaceWith",value:function(a,f,m){m=void 0===m?!0:m;if(this===a||!a)return a;if(this===a.owner)return a.replaceWith(this),
a;var q=this.owner,r=this.submorphs,u=this.getTransform().copy();f="number"===typeof f?f:q?q.submorphs.indexOf(this):-1;var v=a.owner,y=Pb.arr.without(a.submorphs,this),z=a.getTransform().copy(),B=v?v.submorphs.indexOf(a):-1;q&&this.remove();v&&a.remove();m&&(this.submorphs=[],a.submorphs=[]);q===a?(v&&v.addMorphAt(this,B),m&&(this.submorphs=y.slice(0,f).concat(a).concat(y.slice(f)),a.submorphs=r)):(q&&q.addMorphAt(a,f),v&&v.addMorphAt(this,B),m&&(a.submorphs=r,this.submorphs=y));a.setTransform(u);
this.setTransform(z);return a}},{key:"addMorphAt",value:function(a,f){var m=this;if(!a||"object"!==typeof a)throw Error(a+" cannot be added as a submorph to "+this);if(a.isMorph){if(a.isAncestorOf(this))return this.env.world.logError(Error("addMorph: Circular relationships between morphs not allowed\ntried to add "+a+" to "+this)),null;if(a===this)return this.env.world.logError(Error("addMorph: Trying to add itself as a submorph: "+this)),null}a.isMorph||(a=Pb.morph(a));var q=this.submorphs.indexOf(a);
if(!(-1<q&&q===f))return this.addMethodCallChangeDoing({target:this,selector:"addMorphAt",args:[a,f],undo:{target:this,selector:"removeMorph",args:[a]}},function(){var r=a.owner,u=m.submorphs;if(r&&r!==m){var v=a.transformForNewOwner(m);a.remove()}a._env!==m._env&&(a._env=m._env);f=Math.min(u.length,Math.max(0,f));-1<q&&(u.splice(q,1),q<f&&f--);u.splice(f,0,a);a._owner=m;a._cachedPaths={};v&&a.setTransform(v);a.requestStyling();m._morphicState.submorphs=u;m._submorphOrderChanged=!0;m.makeDirty();
a.resumeSteppingAll();a.withAllSubmorphsDo(function(y){return y.onOwnerChanged(m)});m.world()&&a._requestMasterStyling&&(a.master&&a.master.applyIfNeeded(!0),a._requestMasterStyling=!1)}),a}},{key:"addMorph",value:function(a,f){var m=this.submorphs;f=f?m.indexOf(f):-1;return this.addMorphAt(a,-1===f?m.length:f)}},{key:"addMorphBack",value:function(a){return this.addMorph(a,a===this.submorphs[0]?this.submorphs[1]:this.submorphs[0])}},{key:"removeMorph",value:function(a){var f=this.submorphs.indexOf(a);
-1!==f&&((this.getProperty("submorphs")||[]).splice(f,1),this.addMethodCallChangeDoing({target:this,selector:"removeMorph",args:[a],undo:{target:this,selector:"addMorphAt",args:[a,f]}},function(){a.suspendSteppingAll();a._owner=null}),this._pathDependants=Pb.arr.withoutAll(this._pathDependants,a._pathDependants))}},{key:"remove",value:function(){var a=this;this.ownerChain().forEach(function(f){f._stylingVisitor&&f._stylingVisitor.deleteFromCache(a)});this.owner&&this.owner.removeMorph(this);this._cachedPaths=
{};this._pathDependants.forEach(function(f){return f._cachedPaths={}});this._pathDependants=[];this.withAllSubmorphsDo(function(f){return f.onOwnerChanged(null)});return this}},{key:"abandon",value:function(){this.emptyComments();this.remove();this.submorphs.forEach(function(a){return a.abandon()})}},{key:"onOwnerChanged",value:function(a){a&&this.master&&this.requestMasterStyling()}},{key:"fadeOut",value:function(a){a=void 0===a?1E3:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(f.animate({opacity:0,duration:a,easing:Pb.easings.outQuad}),2);f.remove();f.opacity=1;m.jumpToEnd()})}},{key:"fadeIn",value:function(a){a=void 0===a?1E3:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f.opacity=0;f.animate({opacity:1,duration:a});return m.return(f)})}},{key:"fadeIntoWorld",value:function(a,f){a=void 0===a?$world.visibleBounds().center():a;f=void 0===f?200:f;var m=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return q=new Pb.Morph({opacity:0,scale:0,epiMorph:!0,hasFixedPosition:!0,fill:Pb.Color.transparent}),r=m.env.world,q.openInWorld(),q.addMorph(m),m.position=q.extent.scaleBy(.5),q.center=a,q.scale=.8,v.yield(q.animate({opacity:1,scale:1,duration:f}),2);u=m.globalBounds();r.addMorph(m);m.top=u.top();m.left=u.left();q.remove();return v.return(m)})}},{key:"removeAllMorphs",value:function(){this.submorphs=[]}},{key:"bringToFront",value:function(){this.owner&&Pb.arr.last(this.owner.submorphs)!==
this&&this.owner.addMorph(this);return this}},{key:"owner",get:function(){return this._owner}},{key:"withAllSubmorphsDetect",value:function(a){if(a(this))return this;for(var f=$jscomp.makeIterator(this.submorphs),m=f.next();!m.done;m=f.next())if(m=m.value.withAllSubmorphsDetect(a))return m}},{key:"withAllSubmorphsDoExcluding",value:function(a,f){var m=[a(this)];if(f(this))return m;for(var q=$jscomp.makeIterator(this.submorphs),r=q.next();!r.done;r=q.next())Pb.arr.pushAll(m,r.value.withAllSubmorphsDoExcluding(a,
f));return m}},{key:"withAllSubmorphsDo",value:function(a){for(var f=[a(this)],m=$jscomp.makeIterator(this.submorphs),q=m.next();!q.done;q=m.next())Pb.arr.pushAll(f,q.value.withAllSubmorphsDo(a));return f}},{key:"withAllSubmorphsSelect",value:function(a){var f=[];this.withAllSubmorphsDo(function(m){return a(m)&&f.push(m)});return f}},{key:"ownerChain",value:function(){return this.owner?[this.owner].concat(this.owner.ownerChain()):[]}},{key:"world",value:function(){return this.owner?this.owner.world():
null}},{key:"getWindow",value:function(){return this.isWindow?this:this.ownerChain().find(function(a){return a.isWindow})}},{key:"openInWorldNear",value:function(a,f){var m=this;f=f||this.world()||this.env.world;if(!f)return this;this.master&&(this.opacity=0,this.master.whenApplied().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(m.whenRendered(),2);m.opacity=1;q.jumpToEnd()})}));this.center=a;this.setBounds(f.visibleBoundsExcludingTopBar().translateForInclusion(this.bounds()));
return this.openInWorld(this.position)}},{key:"openInWorldNearHand",value:function(a){a=a||this.world()||this.env.world;var f=a.firstHand?a.firstHand.position.addPt(this.hasFixedPosition?Pb.pt(0,0):a.scroll):Pb.pt(0,0);return a?this.openInWorldNear(f):void 0}},{key:"openInWorld",value:function(a,f){f=f||this.world()||this.env.world;if(!f)return console.warn("Cannot open morph "+this+", world morph not found;"),this;a?this.position=a:(this.center=this.hasFixedPosition?f.visibleBounds().extent().scaleBy(.5,
.5):f.visibleBounds().center(),this.snap());f.addMorph(this);return this}},{key:"openInHand",value:function(a){a||(a=(this.world()||this.env.world).firstHand);a.grab(this);this.center=Pb.pt(0,0)}},{key:"openInWindow",value:function(a){a=void 0===a?{title:this.name,name:"window for "+this.name,world:null}:a;return(a.world||this.world()||this.env.world).openInWindow(this,Pb.obj.dissoc(a,["world"]))}},{key:"isAncestorOf",value:function(a){for(a=a.owner;a;){if(a===this)return!0;a=a.owner}return!1}},{key:"morphsContainingPoint",
value:function(a,f){f||(f=[]);if(!this.fullContainsWorldPoint(a))return f;for(var m=this.submorphs.length-1;0<=m;m--)this.submorphs[m].morphsContainingPoint(a,f);this.innerBoundsContainsWorldPoint(a)&&f.push(this);return f}},{key:"morphBeneath",value:function(a){var f=this.world()||this.owner;if(!f)return null;a=f.morphsContainingPoint(a);f=a.indexOf(this);return a[f+1]}},{key:"transformTillMorph",value:function(a,f){if("down"==(void 0===f?"up":f))return a.transformTillMorph(this,"up").inverse();
f=new Pb.Transform;for(var m=this;m&&m!=a;m=m.owner){var q=m,r=q.origin;q=q.scroll;0===r.x&&0===r.y||f.preConcatenate(new Pb.Transform(m.origin));f.preConcatenate(m.getTransform());m!=this&&(0===q.x&&0===q.y||!m.owner||f.preConcatenate(new Pb.Transform(q.negated())));m.hasFixedPosition&&m.owner&&f.preConcatenate(new Pb.Transform(m.owner.scroll))}return f}},{key:"localize",value:function(a){var f=this.world(),m=a.x,q=a.y;return f?f.transformPointToMorph(this,Pb.pt(m,q)):a}},{key:"worldPoint",value:function(a){var f=
this.world(),m=a.x,q=a.y;return f?this.transformPointToMorph(f,Pb.pt(m,q)):a.addPt(this.position)}},{key:"transformToMorph",value:function(a){var f=this.getGlobalTransform(),m=a.getGlobalTransform().inverse();f.preConcatenate(m);m=a.scroll;0===m.x&&0===m.y||!a.owner||f.preConcatenate(new Pb.Transform(m));return f}},{key:"transformPointToMorph",value:function(a,f){for(var m=this.hasFixedPosition,q=$jscomp.makeIterator(this.pathToMorph(a)),r=q.next();!r.done;r=q.next()){var u=$jscomp.makeIterator(r.value);
r=u.next().value;u=u.next().value;this!=u&&"up"==r&&(f.x-=u.scroll.x,f.y-=u.scroll.y,u.hasFixedPosition&&(m=u.owner&&u.owner.isWorld),u.hasFixedPosition&&u.owner&&u.owner.owner&&(f.x+=u.owner.scroll.x,f.y+=u.owner.scroll.y));this.applyTransform(r,u,f);this!=u&&"down"==r&&(f.x+=u.scroll.x,f.y+=u.scroll.y,u.hasFixedPosition&&(m=u.owner&&u.owner.isWorld),u.hasFixedPosition&&u.owner&&u.owner.owner&&(f.x-=u.owner.scroll.x,f.y-=u.owner.scroll.y))}m&&a.isWorld&&(f.x=f.x-a.position.x+a.scroll.x,f.y=f.y-a.position.y+
a.scroll.y);m&&this.isWorld&&(f.x=f.x+this.position.x-this.scroll.x,f.y=f.y+this.position.y-this.scroll.y);return f}},{key:"transformRectToMorph",value:function(a,f){var m=this,q,r,u;[q=f.topLeft(),r=f.topRight(),u=f.bottomRight(),f=f.bottomLeft()].forEach(function(v){return m.transformPointToMorph(a,v)});return Pb.Rectangle.unionPts([q,r,u,f])}},{key:"applyTransform",value:function(a,f,m){"up"==a?(m.x+=f.origin.x,m.y+=f.origin.y,m.matrixTransform(f.getTransform(),m)):(m.matrixTransform(f.getInverseTransform(),
m),m.x-=f.origin.x,m.y-=f.origin.y)}},{key:"_addPathDependant",value:function(a){this._pathDependants.includes(a)||this._pathDependants.push(a)}},{key:"pathToMorph",value:function(a){var f;if(f=this._cachedPaths[a.id])return f;f=this.closestCommonAncestor(a)||this;var m=this,q=[],r=[];for(f._addPathDependant(this);m&&m!=f;)r.push(["up",m]),m._addPathDependant(this),m=m.owner;for(m=a;m&&m!=f;)q.push(["down",m]),m._addPathDependant(this),m=m.owner;return this._cachedPaths[a.id]=f=[].concat($jscomp.arrayFromIterable(r),
$jscomp.arrayFromIterable(q.reverse()))}},{key:"closestCommonAncestor",value:function(a){return Pb.arr.intersect([this].concat($jscomp.arrayFromIterable(this.ownerChain())),[a].concat($jscomp.arrayFromIterable(a.ownerChain())))[0]}},{key:"transformForNewOwner",value:function(a){return new Pb.Transform(this.transformToMorph(a))}},{key:"localizePointFrom",value:function(a,f){var m=a.x;a=a.y;try{return f.transformPointToMorph(this,Pb.pt(m,a))}catch(q){return console.warn("problem "+q+" in localizePointFrom"),
Pb.pt}}},{key:"getGlobalTransform",value:function(){return this.transformTillMorph(this.world())}},{key:"globalPosition",get:function(){return this.worldPoint(Pb.pt(0,0))}},{key:"globalPosition",set:function(a){return this.position=this.owner?this.owner.localize(a):a}},{key:"ensureToBeInWorldBounds",value:function(){var a=this.world();if(a){var f=this.globalBounds();a=a.innerBounds().translateForInclusion(f).topLeft().subPt(f.topLeft());this.moveBy(a)}}},{key:"getTransform",value:function(){this._transform||
this.updateTransform();return this._transform}},{key:"getInverseTransform",value:function(){this._invTransform||this.updateTransform();return this._invTransform}},{key:"updateTransform",value:function(a){a=void 0===a?{}:a;var f=a.position,m=a.scale,q=a.origin,r=a.rotation;a=this._transform||new Pb.Transform;var u=this._invTransform||new Pb.Transform;f=f||this.position;q=q||this.origin;m=m||this.scale;r=r||this.rotation;a.a=m*Math.cos(r);a.b=m*Math.sin(r);a.c=m*-Math.sin(r);a.d=m*Math.cos(r);a.e=a.a*
-q.x+a.c*-q.y+f.x;a.f=a.b*-q.x+a.d*-q.y+f.y;f=a.a;m=a.b;q=a.c;r=a.d;var v=a.e,y=a.f,z=1/(f*r-q*m);u.a=r*z;u.b=-m*z;u.c=-q*z;u.d=f*z;u.e=(q*y-v*r)*z;u.f=-(f*y-m*v)*z;this._transform=a;this._invTransform=u}},{key:"setTransform",value:function(a){this.position=a.getTranslation();this.rotation=Pb.num.toRadians(a.getRotation());this.scale=a.getScalePoint().x;this.updateTransform(this)}},{key:"fullContainsWorldPoint",value:function(a){return this.fullContainsPoint(null==this.owner?a:this.owner.localize(a))}},
{key:"fullContainsPoint",value:function(a){return this.bounds().containsPoint(a)}},{key:"innerBoundsContainsWorldPoint",value:function(a){return this.innerBoundsContainsPoint(this.localize(a))}},{key:"innerBoundsContainsPoint",value:function(a){return this.innerBounds().containsPoint(a.addPt(this.origin).subPt(this.scroll))}},{key:"get",value:function(a){if(!a)return null;try{return this.getSubmorphNamed(a)||this.getNameTest(this,a)&&this||this.getOwnerOrOwnerSubmorphNamed(a)}catch(f){if(f.constructor==
RangeError&&"Maximum call stack size exceeded"==f.message)throw Error("'get' failed due to a stack overflow. The most\nlikely source of the problem is using 'get' as part of\ntoString, because 'get' calls 'getOwnerOrOwnerSubmorphNamed', which\ncalls 'toString' on this. Try using 'getSubmorphNamed' instead,\nwhich only searches in this' children.\nOriginal error:\n"+f.stack);throw f;}}},{key:"getNameTest",value:function(a,f){if(Pb.obj.isRegExp(f)){if(f.test(a.name)||f.test(String(a)))return!0}else if(a.name===
f||String(a)===f)return!0;return!1}},{key:"getAllNamed",value:function(a,f){f=void 0===f?[]:f;if(!this._morphicState||!this.submorphs.length)return f;for(var m=0;m<this.submorphs.length;m++){var q=this.submorphs[m];this.getNameTest(q,a)&&f.push(q)}for(m=0;m<this.submorphs.length;m++)this.submorphs[m].getAllNamed(a,f);return f}},{key:"getSubmorphNamed",value:function(a){if(!this._morphicState||!this.submorphs.length)return null;for(var f=0;f<this.submorphs.length;f++){var m=this.submorphs[f];if(this.getNameTest(m,
a))return m}for(f=0;f<this.submorphs.length;f++)if(m=this.submorphs[f].getSubmorphNamed(a))return m;return null}},{key:"getSubmorphsByStyleClassName",value:function(a){return this.withAllSubmorphsSelect(function(f){return f.styleClasses.includes(a)})}},{key:"getOwnerNamed",value:function(a){return this.ownerChain().find(function(f){return f.name===a})}},{key:"getOwnerOrOwnerSubmorphNamed",value:function(a){var f=this.owner;if(!f)return null;if(f.name===a)return f;for(var m=0;m<f.submorphs.length;m++){var q=
f.submorphs[m];if(q!==this&&(this.getNameTest(q,a)||(q=q.getSubmorphNamed(a))))return q}return this.owner.getOwnerOrOwnerSubmorphNamed(a)}},{key:"getMorphWithId",value:function(a){return this.withAllSubmorphsDetect(function(f){return a===f.id})}},{key:"setMirrored",value:function(a){a?this.removeStyleClass("hidden-in-mirror"):this.addStyleClass("hidden-in-mirror")}},{key:"isMirrored",value:function(){return 0<=this.styleClasses.indexOf("hidden-in-mirror")?!0:!1}},{key:"dragTriggerDistance",get:function(){return 0}},
{key:"onMouseDown",value:function(a){if(this===a.targetMorph&&(a.state.clickedMorph=this,1==a.state.prevClick.clickCount&&200>=Date.now()-a.state.prevClick.clickedAtTime)){this.onDoubleMouseDown(a);return}this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onDoubleMouseDown",value:function(a){}},{key:"onMouseUp",value:function(a){a.state.clickedMorph=null;this===a.targetMorph&&this.master&&this.requestMasterStyling()}},{key:"onMouseMove",value:function(a){}},{key:"onLongClick",
value:function(a){}},{key:"addKeyBindings",value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"addKeyBindings",args:[a],undo:null},function(){f._keybindings||(f._keybindings=[]);f._cachedKeyhandlers=null;f._keybindings.unshift.apply(f._keybindings,$jscomp.arrayFromIterable(a))})}},{key:"keybindings",get:function(){return this._keybindings||[]}},{key:"keybindings",set:function(a){this._cachedKeyhandlers=null;return this._keybindings=a}},{key:"keyhandlers",get:function(){return this._cachedKeyhandlers||
(this._cachedKeyhandlers=[Pb.KeyHandler.withBindings(this.keybindings)])}},{key:"keyCommandMap",get:function(){var a=this.keyhandlers[0].platform;return this.keybindings.reduce(function(f,m){var q=Pb.findKeysForPlatform(m.keys,a),r=m.command,u="string"===typeof r?r:r.command||r.name;return"string"!==typeof q?f:q.split("|").reduce(function(v,y){var z={};return Object.assign(v,(z[y]={name:u,command:r,prettyKeys:Pb.KeyHandler.prettyCombo(y)},z))},f)},{})}},{key:"keysForCommand",value:function(a,f){f=
void 0===f?!0:f;var m=this.keyCommandMap,q=Object.keys(m).find(function(r){return m[r].name===a});return q&&f?m[q].prettyKeys:q}},{key:"simulateKeys",value:function(a){return Pb.KeyHandler.simulateKeys(this,a)}},{key:"onKeyDown",value:function(a){Pb.KeyHandler.invokeKeyHandlers(this,a,!1)&&a.stop()}},{key:"onKeyUp",value:function(a){}},{key:"onContextMenu",value:function(a){var f=this;a.targetMorph===this&&(lively.FreezerRuntime||a.stop(),Promise.resolve(this.menuItems(a)).then(function(m){return f.openMenu(m,
a)}).catch(function(m){return $world.logError(m)}))}},{key:"openMenu",value:function(a,f){var m=this.world();return a&&a.length&&m?m.openWorldMenu(f,a):null}},{key:"menuItems",value:function(a){return $world.defaultMenuItems(this,a)}},{key:"onCut",value:function(a){}},{key:"onCopy",value:function(a){}},{key:"onPaste",value:function(a){}},{key:"onDragStart",value:function(a){this.undoStart("drag-move");a=a.state;this.position=a.dragStartMorphPosition.addPt(a.absDragDelta)}},{key:"onDragEnd",value:function(a){this.undoStop("drag-move");
$world.execCommand("remove snap to guides",this)}},{key:"onDrag",value:function(a){var f=a.state;this.position=f.dragStartMorphPosition.addPt(f.absDragDelta);$world.execCommand("show and snap to guides",{target:this,showGuides:a.isCtrlDown(),snap:a.isCtrlDown()})}},{key:"onGrab",value:function(a){if(a.isShiftDown()){var f=this.copy();f.position=this.transformPointToMorph(a.hand,Pb.pt(0,0));a.hand.grab(f)}else a.hand.grab(this)}},{key:"onDrop",value:function(a){a.hand.dropMorphsOn(this)}},{key:"doNotAcceptDropsForThisAndSubmorphs",
value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!1})}},{key:"acceptDropsForThisAndSubmorphs",value:function(){this.withAllSubmorphsDo(function(a){return a.acceptsDrops=!0})}},{key:"wantsToBeDroppedOn",value:function(a){return!0}},{key:"onDropHoverIn",value:function(a){}},{key:"onDropHoverUpdate",value:function(a){}},{key:"onDropHoverOut",value:function(a){}},{key:"onBeingDroppedOn",value:function(a,f){f.addMorph(this)}},{key:"onHoverIn",value:function(a){this.master&&this.requestMasterStyling()}},
{key:"onHoverOut",value:function(a){this.master&&this.requestMasterStyling()}},{key:"onScroll",value:function(a){}},{key:"onMouseWheel",value:function(a){}},{key:"onNativeDrop",value:function(a){}},{key:"onNativeDragleave",value:function(a){}},{key:"onNativeDragenter",value:function(a){}},{key:"onNativeDragover",value:function(a){}},{key:"onNativeDragend",value:function(a){}},{key:"onNativeDragstart",value:function(a){}},{key:"onNativeDrag",value:function(a){}},{key:"focus",value:function(){var a=
this.env.eventDispatcher;a&&a.focusMorph(this)}},{key:"onFocus",value:function(a){}},{key:"onBlur",value:function(a){}},{key:"isFocused",value:function(){var a=this.env.eventDispatcher;return a&&a.isMorphFocused(this)}},{key:"exportToJSON",value:function(a){return Pb.serializeSpec(this,a)}},{key:"initFromJSON",value:function(a){var f=this;this._env=a.env||a._env||Pb.MorphicEnv.default();this._rev=0;this._owner=null;this._dirty=!0;this._submorphOrderChanged=this._rendering=!1;this._id=a._id||Pb.newMorphId(Pb.getClassName(this));
this._animationQueue=new Pb.AnimationQueue(this);this._cachedPaths={};this._pathDependants=[];this._tickingScripts=[];this.dontRecordChangesWhile(function(){f.initializeProperties();Pb.deserializeSpec(a,function(m){return Pb.morph(m)},f)});return this}},{key:"copyViaJSON",value:function(){var a=this.exportToJSON();Pb.tree.prewalk(a,function(f){return f._id=Pb.newMorphId(f.type)},function(f){return f.submorphs});a.name=a.name.replace(/copy( [0-9]+)?$/,function(f,m){return"copy "+(m&&m.trim()?Number(m)+
1:"1")});return Pb.morph({type:a.type}).initFromJSON(a)}},{key:"canBeCopied",value:function(){return!0}},{key:"copy",value:function(a){return Pb.copyMorph(this,void 0===a?!1:a)}},{key:"interactivelyPublish",value:function(){var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return f=a.world()||a.env.world,v.setCatchFinallyBlocks(2),v.yield(System.import("lively.morphic/partsbin.js"),4);case 4:return m=v.yieldResult,q=m.interactivelySavePart,
v.yield(q(a,{notifications:!1,loadingIndicator:!0}),5);case 5:r=v.yieldResult;f.setStatusMessage(r?"Published "+a+" as "+r.name:"Failed to publish part "+a,r?Pb.Color.green:Pb.Color.red);v.leaveTryBlock(0);break;case 2:u=v.enterCatchBlock(),"canceled"!=u&&f.showError(u),v.jumpToEnd()}})}},{key:"makeDirty",value:function(a){this._dirty=!0;this.owner&&this.owner.makeDirty()}},{key:"needsRerender",value:function(){return this._dirty}},{key:"aboutToRender",value:function(a){this._dirty=!1;this._rendering=
!0}},{key:"onAfterRender",value:function(a){}},{key:"whenRendered",value:function(a){return this.env.whenRendered(this,void 0===a?50:a).then(function(){return!0}).catch(function(){return!1})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return a.renderMorph(this)}},{key:"applyLayoutIfNeeded",value:function(){if(this._dirty){for(var a=0;a<this.submorphs.length;a++)this.submorphs[a].applyLayoutIfNeeded();this.layout&&
!this.layout.manualUpdate&&this.layout.forceLayout()}}},{key:"requestMasterStyling",value:function(){var a=this;this._rendering||(this.master&&this.master._hasUnresolvedMaster&&(this.master._capturedExtents=new WeakMap,this.withAllSubmorphsDo(function(f){return a.master._capturedExtents.set(f,f.extent)})),this.master&&(this._requestMasterStyling=!0,this.makeDirty()))}},{key:"requestStyling",value:function(){this.withAllSubmorphsDo(function(a){a._wantsStyling=!0;a.makeDirty()})}},{key:"renderAsRoot",
value:function(a){var f=this;this.dontRecordChangesWhile(function(){f.applyLayoutIfNeeded()});return Pb.renderRootMorph(this,a)}},{key:"renderPreview",value:function(a,f){a=void 0===a?{}:a;f=void 0===f?this.env.renderer:f;return f.renderPreview(this,a)}},{key:"startStepping",value:function(){var a=Array.from(arguments),f="number"===typeof a[0]?a.shift():null,m=a.shift();a=new Pb.TargetScript(this,m,a);this.removeEqualScripts(a);this._tickingScripts.push(a);a.startTicking(f);return a}},{key:"tickingScripts",
get:function(){return this._tickingScripts}},{key:"stopStepping",value:function(){Pb.arr.invoke(this._tickingScripts,"stop");this._tickingScripts.length=[]}},{key:"stopSteppingScriptNamed",value:function(a){var f=this._tickingScripts.filter(function(m){return m.selector===a});this.stopScripts(f)}},{key:"stopScripts",value:function(a){Pb.arr.invoke(a,"stop");this._tickingScripts=Pb.arr.withoutAll(this._tickingScripts,a)}},{key:"suspendStepping",value:function(){this._tickingScripts&&Pb.arr.invoke(this._tickingScripts,
"suspend")}},{key:"suspendSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return a.suspendStepping()})}},{key:"resumeStepping",value:function(){Pb.arr.invoke(this._tickingScripts,"resume")}},{key:"resumeSteppingAll",value:function(){this.withAllSubmorphsDo(function(a){return Pb.arr.invoke(a._tickingScripts,"resume")})}},{key:"removeEqualScripts",value:function(a){this.stopScripts(this._tickingScripts.filter(function(f){return f.equals(a)}))}},{key:"addComment",value:function(a,f){f=
void 0===f?Pb.pt(0,0):f;var m=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(q=new Pb.Comment(a,f),m.comments.push(q),r.yield(Pb.CommentBrowser.addCommentForMorph(q,m),2)):r.return(q)})}},{key:"removeComment",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){f.comments=f.comments.filter(function(q){return!a.equals(q)});Pb.CommentBrowser.removeCommentForMorph(a,f);m.jumpToEnd()})}},{key:"emptyComments",value:function(){var a=
this;this.comments.forEach(function(f){return Pb.CommentBrowser.removeCommentForMorph(f,a)});this.comments=[]}},{key:"commands",get:function(){return this._commands||[]}},{key:"commands",set:function(a){this._commands&&this.removeCommands(this._commands);this.addCommands(a)}},{key:"commandsIncludingOwners",get:function(){return Pb.arr.flatmap([this].concat(this.ownerChain()),function(a){return Pb.arr.sortByKey(a.commands,"name").map(function(f){return{target:a,command:f}})})}},{key:"addCommands",
value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"addCommands",args:[a],undo:{target:this,selector:"removeCommands",args:[a]}},function(){f.removeCommands(a);f._commands=(f._commands||[]).concat(a)})}},{key:"removeCommands",value:function(a){var f=this;this.addMethodCallChangeDoing({target:this,selector:"removeCommands",args:[a],undo:{target:this,selector:"addCommands",args:[a]}},function(){var m=a.map(function(r){return"string"===typeof r?r:r.name}),q=(f._commands||
[]).filter(function(r){return!m.includes(r.name)});q.length?f._commands=q:delete f._commands})}},{key:"commandHandler",get:function(){return this._commandHandler||Pb.defaultCommandHandler}},{key:"lookupCommand",value:function(a){return(a=this.commandHandler.lookupCommand(a,this))&&a.command?a:null}},{key:"execCommand",value:function(a,f,m,q){return this.commandHandler.exec(a,this,f,m,q)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Morph"}},{key:"propertySettings",get:function(){return{defaultGetter:function(a){return this.getProperty(a)},
defaultSetter:function(a,f){this.setProperty(a,f)},valueStoreProperty:"_morphicState"}}},{key:"properties",get:function(){return Object.assign({name:{group:"core",initialize:function(a){a||(a=Pb.getClassName(this),a=Pb.string.findArticle(a)+a);this.name=a}},isComponent:{group:"core",defaultValue:!1,after:["master"],set:function(a){this.setProperty("isComponent",a);a&&(this.master||delete this._parametrizedProps)}},master:{before:["metadata"],group:"core",set:function(a){this.master&&this.master.equals(a)||
(this.setProperty("master",a?Pb.ComponentPolicy.for(this,a):0==a?!1:null),a&&this.requestMasterStyling())}},renderOnGPU:{group:"core",defaultValue:!1},draggable:{group:"interaction",isStyleProp:!0,defaultValue:!1},grabbable:{group:"interaction",isStyleProp:!0,defaultValue:!1,set:function(a){a&&!this.draggable&&(this.draggable=!0);this.setProperty("grabbable",a)}},acceptsDrops:{group:"interaction",isStyleProp:!0,defaultValue:!0},grayscale:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,
min:0,max:1,isFloat:!0},blur:{group:"styling",type:"Number",isStyleProp:!0,defaultValue:0,min:0,isFloat:!0},dropShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null,set:function(a){a&&!a.isShadowObject&&(a=new Pb.ShadowObject(a),a.morph=this);this.setProperty("dropShadow",a)}},tooltip:{group:"core",defaultValue:null},focusable:{group:"interaction",defaultValue:!0},nativeCursor:{group:"interaction",type:"Enum",values:"auto default none context-menu help pointer progress wait cell crosshair text vertical-text alias copy move no-drop not-allowed e-resize n-resize ne-resize nw-resize s-resize se-resize sw-resize w-resize ew-resize ns-resize nesw-resize nwse-resize col-resize row-resize all-scroll zoom-in zoom-out grab grabbing".split(" "),
isStyleProp:!0,defaultValue:"auto"},halosEnabled:{group:"interaction",isStyleProp:!0,defaultValue:!!Pb.config.halosEnabled},reactsToPointer:{group:"interaction",isStyleProp:!0,defaultValue:!0},position:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Pb.pt(0,0)},origin:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Pb.pt(0,0)},extent:{group:"geometry",type:"Point",isStyleProp:!0,defaultValue:Pb.pt(10,10),set:function(a){var f=this.extent;this.setProperty("extent",a);this.origin.equals(Pb.pt(0,
0))||(a=Pb.pt(a.x/f.x,a.y/f.y),this.adjustOrigin(this.origin.scaleByPt(a)))}},width:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.x},set:function(a){return this.extent=Pb.pt(a,this.extent.y)}},height:{group:"geometry",derived:!0,after:["extent"],before:["submorphs"],get:function(){return this.extent.y},set:function(a){return this.extent=Pb.pt(this.extent.x,a)}},left:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().left()},
set:function(a){return this.moveBy(Pb.pt(a-this.left),0)}},right:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().right()},set:function(a){return this.moveBy(Pb.pt(a-this.right),0)}},top:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().top()},set:function(a){return this.moveBy(Pb.pt(0,a-this.top))}},bottom:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottom()},
set:function(a){return this.moveBy(Pb.pt(0,a-this.bottom))}},center:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().center()},set:function(a){return this.align(this.center,a)}},topLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topLeft()},set:function(a){return this.align(this.topLeft,a)}},topRight:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topRight()},
set:function(a){return this.align(this.topRight,a)}},bottomRight:{group:"geometry",derived:!0,after:["extent","layout"],get:function(){return this.bounds().bottomRight()},set:function(a){return this.align(this.bottomRight,a)}},bottomLeft:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomLeft()},set:function(a){return this.align(this.bottomLeft,a)}},bottomCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().bottomCenter()},
set:function(a){return this.align(this.bottomCenter,a)}},topCenter:{group:"geometry",derived:!0,after:["extent","submorphs","layout"],get:function(){return this.bounds().topCenter()},set:function(a){return this.align(this.topCenter,a)}},leftCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().leftCenter()},set:function(a){return this.align(this.leftCenter,a)}},rightCenter:{group:"geometry",derived:!0,after:["extent","submorphs"],get:function(){return this.bounds().rightCenter()},
set:function(a){return this.align(this.rightCenter,a)}},rotation:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0},flipped:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},tilted:{group:"geometry",type:"Number",isFloat:!0,isStyleProp:!0,defaultValue:0,min:0,max:1},perspective:{group:"geometry",type:"Number",isStyleProp:!0,defaultValue:0,min:0},scale:{group:"geometry",type:"Number",min:0,isFloat:!0,isStyleProp:!0,defaultValue:1},hasFixedPosition:{group:"geometry",
doc:"When morph is submorph of world hasFixedPosition == true will keep the morph at the same position relative to top left of the browser window. This means, when the world is scrolled, the morph keeps its place.",defaultValue:!1},opacity:{group:"styling",type:"Number",isFloat:!0,min:0,max:1,isStyleProp:!0,defaultValue:1},fill:{group:"styling",type:"ColorGradient",isStyleProp:!0,defaultValue:Pb.Color.white},visible:{group:"styling",isStyleProp:!0,defaultValue:!0,set:function(a){a||this.makeDirty();
this.setProperty("visible",a)}},submorphs:{group:"core",defaultValue:[],after:["isLayoutable","origin","position","rotation","scale"],get:function(){return(this.getProperty("submorphs")||[]).concat()},set:function(a){var f=this,m=this.layout,q=m&&m.isEnabled();q&&m.disable();this.submorphs.forEach(function(r){return a.includes(r)||r.remove()});a.forEach(function(r,u){return f.submorphs[u]!==r&&f.addMorph(r,f.submorphs[u])});q&&m.enable()}},clipMode:{group:"styling",type:"Enum",values:["visible","hidden",
"scroll","auto"],isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.isClip()||(this.scroll=Pb.pt(0,0))}},scroll:{group:"geometry",defaultValue:Pb.pt(0,0),after:["clipMode","submorphs"],type:"Point",set:function(a){var f=a.x;a=a.y;if(this.isClip()){var m=this.scrollExtent.subPt(this.extent),q=m.y;f=Math.max(0,Math.min(m.x,f));a=Math.max(0,Math.min(q,a));this.setProperty("scroll",Pb.pt(f,a));this.makeDirty()}}},scrollbarOffset:{group:"styling",defaultValue:Pb.pt(15,
15)},styleClasses:{group:"styling",isStyleProp:!0,defaultValue:["morph"],get:function(){return this._cachedStyleClasses||(this._cachedStyleClasses=this.constructor.styleClasses.concat(this.getProperty("styleClasses")))},set:function(a){this._cachedStyleClasses=null;this.setProperty("styleClasses",Pb.arr.withoutAll(a,this.constructor.styleClasses));this.requestStyling()}},layout:{group:"layouting",isStyleProp:!0,type:"Layout",after:["submorphs","extent","origin","position","isLayoutable"],set:function(a){a&&
(a.container=this);this.setProperty("layout",a)}},isLayoutable:{group:"layouting",isStyleProp:!0,defaultValue:!0},borderLeft:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleLeft","borderWidthLeft","borderColorLeft"],get:function(){return{style:this.borderStyleLeft,width:this.borderWidthLeft,color:this.borderColorLeft}},set:function(a){"style"in a&&(this.borderStyleLeft=a.style);"width"in a&&(this.borderWidthLeft=a.width);"color"in a&&(this.borderColorLeft=a.color);"radius"in a&&(this.borderRadiusLeft=
a.radius)}},borderRight:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleRight","borderWidthRight","borderColorRight"],get:function(){return{style:this.borderStyleRight,width:this.borderWidthRight,color:this.borderColorRight}},set:function(a){"style"in a&&(this.borderStyleRight=a.style);"width"in a&&(this.borderWidthRight=a.width);"color"in a&&(this.borderColorRight=a.color);"radius"in a&&(this.borderRadiusRight=a.radius)}},borderBottom:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleBottom",
"borderWidthBottom","borderColorBottom"],get:function(){return{style:this.borderStyleBottom,width:this.borderWidthBottom,color:this.borderColorBottom}},set:function(a){"style"in a&&(this.borderStyleBottom=a.style);"width"in a&&(this.borderWidthBottom=a.width);"color"in a&&(this.borderColorBottom=a.color);"radius"in a&&(this.borderRadiusBottom=a.radius)}},borderTop:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyleTop","borderWidthTop","borderColorTop"],get:function(){return{style:this.borderStyleTop,
width:this.borderWidthTop,color:this.borderColorTop}},set:function(a){"style"in a&&(this.borderStyleTop=a.style);"width"in a&&(this.borderWidthTop=a.width);"color"in a&&(this.borderColorTop=a.color);"radius"in a&&(this.borderRadiusTop=a.radius)}},borderWidth:{group:"styling",isStyleProp:!0,type:"Number",foldable:["top","left","right","bottom"],min:0,defaultValue:{top:0,bottom:0,left:0,right:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderWidth");return Object.assign({},
a,{valueOf:function(){return a.left}})},set:function(a){Pb.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderWidth",a)}}},Pb.generateUnfolded("borderWidth",void 0,"styling"),{borderRadius:{group:"styling",isStyleProp:!0,type:"Number",min:0,foldable:["top","left","right","bottom"],defaultValue:{top:0,bottom:0,right:0,left:0,valueOf:function(){return 0}},get:function(){var a=this.getProperty("borderRadius");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||
(a=0);Pb.obj.isNumber(a)&&(a={left:a,right:a,top:a,bottom:a});a.isRectangle&&(a={left:a.left(),right:a.right(),top:a.top(),bottom:a.bottom()});this.setProperty("borderRadius",a)}}},Pb.generateUnfolded("borderRadius",void 0,"styling"),{borderStyle:{group:"styling",isStyleProp:!0,type:"Enum",foldable:["top","left","right","bottom"],values:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),defaultValue:{top:"solid",left:"solid",bottom:"solid",right:"solid",valueOf:function(){return"solid"}},
get:function(){var a=this.getProperty("borderStyle");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){Pb.obj.isString(a)&&(a={left:a,right:a,top:a,bottom:a});this.setProperty("borderStyle",a)}}},Pb.generateUnfolded("borderStyle",void 0,"styling"),{borderColor:{group:"styling",isStyleProp:!0,type:"Color",foldable:["top","left","right","bottom"],defaultValue:{top:Pb.Color.white,left:Pb.Color.white,bottom:Pb.Color.white,right:Pb.Color.white,valueOf:function(){return Pb.Color.white}},
get:function(){var a=this.getProperty("borderColor");return Object.assign({},a,{valueOf:function(){return a.left}})},set:function(a){a||(a=Pb.Color.white);a.isColor&&(a={top:a,left:a,right:a,bottom:a});this.setProperty("borderColor",a?Pb.obj.extract(a,["top","left","right","bottom"],function(f,m){return Pb.obj.isArray(m)?Pb.Color.fromTuple(m):m}):a)}}},Pb.generateUnfolded("borderColor",void 0,"styling"),{border:{group:"styling",isStyleProp:!0,derived:!0,after:["borderStyle","borderWidth","borderColor"],
get:function(){var a=this;return{get style(){return a.borderStyle},set style(f){a.borderStyle=f},get width(){return a.borderWidth},set width(f){a.borderWidth=f},get color(){return a.borderColor},set color(f){a.borderColor=f},get borderRadius(){return a.borderRadius},set borderRadius(f){a.borderRadius=f}}},set:function(a){"style"in a&&(this.borderStyle=a.style);"width"in a&&(this.borderWidth=a.width);"color"in a&&(this.borderColor=a.color);"radius"in a&&(this.borderRadius=a.radius)}},styleProperties:{group:"styling",
derived:!0,readOnly:!0,get:function(){var a=this.propertiesAndPropertySettings(),f=a.properties,m=[];a=$jscomp.makeIterator(a.order);for(var q=a.next();!q.done;q=a.next())q=q.value,f[q].isStyleProp&&m.push(q);return m}},style:{group:"styling",derived:!0,readOnly:!0,get:function(){for(var a=this.styleProperties,f={},m=0;m<a.length;m++){var q=a[m];f[q]=this[q]}return f}},epiMorph:{group:"core",doc:"epi morphs are 'transient' morphs, i.e. meta objects that should not be serialized like halo items, menus, etc.",
defaultValue:!1},respondsToVisibleWindow:{group:"interaction",doc:"Morphs will respond to changes to the visible browser window and a call will be made to the morph's relayout function, supplying the event generated",defaultValue:!1},installedFonts:{doc:"custom fonts can be installed from a respective morph, and are then kept as part of this morph's state in order to be loaded again the next time the it is cold loaded. (i.e. deserialization of a part)",defaultValue:{},set:function(a){var f=Pb.arr.without(Pb.obj.keys(this.installedFonts||
{}),"_rev"),m=Pb.arr.without(Pb.obj.keys(a||{}),"_rev");this.setProperty("installedFonts",a);this.ensureInstalledFonts(f,m)},get:function(){return this.getProperty("installedFonts")||{}}},comments:{doc:"Holds all comments belonging to this Morph.",type:"list",defaultValue:[]},metadata:{group:"core"}})}},{key:"styleClasses",get:function(){if(this.hasOwnProperty("_styclassNames"))return this._styleClasses;for(var a=this,f=[];a&&a!==Object;)f.push(a[Symbol.for("__LivelyClassName__")]),a=a[Symbol.for("lively-instance-superclass")];
return this._styleClasses=f}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1725,end:82199})}(void 0));Pb.Morph=Mj;Pb.Morph=Mj;Pb.Morph=Mj;var oA=wa("aA",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Ellipse")&&"function"===typeof e.Ellipse?
e.Ellipse:e.Ellipse=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Ellipse"}},{key:"properties",get:function(){return{borderRadius:{derived:!0,get:function(){var a=this;return{top:this.borderRadiusTop,right:this.borderRadiusRight,left:this.borderRadiusLeft,bottom:this.borderRadiusBottom,valueOf:function(){return a.borderRadiusLeft}}}},
borderRadiusLeft:{get:function(){return this.height},set:function(){}},borderRadiusRight:{get:function(){return this.height},set:function(){}},borderRadiusTop:{get:function(){return this.width},set:function(){}},borderRadiusBottom:{get:function(){return this.width},set:function(){}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82208,end:82965})}(Pb.Morph));Pb.Ellipse=oA;Pb.Ellipse=oA;Pb.Ellipse=oA;var DC=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Triangle")&&"function"===typeof e.Triangle?e.Triangle:e.Triangle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.update()}},{key:"onChange",value:function(a){("extent"==a.prop||"direction"==a.prop||"fill"==a.prop&&a.value)&&this.update();zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"update",value:function(){var a=this.extent,f=a.x;a=a.y;f!=a&&(this.extent=Pb.pt(Math.max(f,a),Math.max(f,a)));this.origin=Pb.pt(f/2,a/2);var m=this.triangleFill=this.fill||this.triangleFill;this.fill=null;f={width:f/2,style:"solid",
color:m};a={width:a/2,style:"solid",color:Pb.Color.transparent};switch(this.direction){case "down":var q="borderLeft";var r="borderRight";var u="borderTop";break;case "up":q="borderLeft";r="borderRight";u="borderBottom";break;case "left":q="borderBottom";r="borderTop";u="borderRight";break;case "right":q="borderBottom",r="borderTop",u="borderLeft"}m={};Object.assign(this,(m[q]=a,m[r]=a,m[u]=f,m))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Triangle"}},{key:"properties",get:function(){return{direction:{defaultValue:"up"},
triangleFill:{after:["fill"],initialize:function(){this.triangleFill=this.fill}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:82974,end:84432})}(Pb.Morph);Pb.Triangle=DC;Pb.Triangle=DC;Pb.Triangle=DC;var pA=wa("I",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),
l=e.hasOwnProperty("Image")&&"function"===typeof e.Image?e.Image:e.Image=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"__deserialize__",value:function(a,f,m,q){this._isDeserializing=!0;zb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,q)}},{key:"__after_deserialize__",value:function(a,f,m){delete this._isDeserializing;zb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",
this).call(this,a,f,m)}},{key:"isImage",get:function(){return!0}},{key:"ratio",get:function(){var a=this.naturalExtent;return a.x/a.y}},{key:"setWidthKeepingRatio",value:function(a){this.width=a;this.height=a/this.ratio}},{key:"setHeightKeepingRatio",value:function(a){this.width=this.ratio*a;this.height=a}},{key:"loadUrl",value:function(a,f){var m=this;f=void 0===f?this.autoResize:f;var q=this.autoResize;this.autoResize=f;this.imageUrl=a;return Pb.promise.finally(this.whenLoaded(),function(){return m.autoResize=
q})}},{key:"whenLoaded",value:function(){var a=this;return this.isLoaded?Promise.resolve(this):new Promise(function(f,m){var q=a.imageUrl;a.imageElement(function(r){a.imageUrl!==q&&m(Error("url changed ("+q+" => "+a.imageUrl+")"));a.naturalExtent=Pb.pt(r.width,r.height);a.isLoaded=!0;f(a)})})}},{key:"determineNaturalExtent",value:function(){var a=this;return this.whenLoaded().then(function(){return a.naturalExtent})}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),
this._requestMasterStyling=!1);return a.renderImage(this)}},{key:"clear",value:function(){return this.loadUrl("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",!1)}},{key:"imageElement",value:function(a){var f=this;return new Promise(function(m,q){var r=f.env.domEnv.document.createElement("img");r.onload=function(){m(r);"function"===typeof a&&a(r)};r.src=f.imageUrl})}},{key:"canvasElementAndContext",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==
u.nextAddress)return f=a.env.domEnv.document,u.yield(a.imageElement(),2);m=u.yieldResult;q=f.createElement("canvas");r=q.getContext("2d");q.width=m.width;q.height=m.height;r.drawImage(m,0,0,m.width,m.height);return u.return({canvas:q,ctx:r,image:m})})}},{key:"imageData",value:function(a){var f=this,m,q,r,u,v,y,z,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(f.canvasElementAndContext(),2);m=C.yieldResult;q=m.ctx;r=m.image;a||(a=Pb.rect(0,0,r.width,
r.height));u=a;v=u.x;y=u.y;z=u.width;B=u.height;console.log(v,y);return C.return(q.getImageData(v,y,z,B))})}},{key:"pixelAt",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(f.imageData(a.extent(Pb.pt(1,1))),2):m.return(m.yieldResult.data)})}},{key:"colorAt",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==r.nextAddress?(m=Pb.Color,q=m.fromTuple8Bit,r.yield(f.pixelAt(a),
2)):r.return(q.call(m,r.yieldResult))})}},{key:"loadArrayBuffer",value:function(a,f){a=new Uint8Array(a);a=new Blob([a],{type:"image/jpeg"});this.imageUrl=(window.URL||window.webkitURL).createObjectURL(a);this.makeDirty()}},{key:"convertToBase64",value:function(){var a=this,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return f=a.imageUrl,m=f.slice(f.lastIndexOf(".")+1,f.length).toLowerCase(),"jpg"===m?m="jpeg":"svg"===m&&(m="svg+xml"),["gif","jpeg",
"png","tiff","svg+xml"].includes(m)||(m="gif"),f.startsWith("http")||(f=Pb.location.origin+"/"+f),z.yield(System.import("lively.ide/shell/shell-interface"),2);if(3!=z.nextAddress)return q=z.yieldResult,r=q.runCommand,u='curl --silent "'+f+'" | openssl base64',z.yield(r(u).whenDone(),3);v=z.yieldResult;y=v.stdout;return z.return(a.loadUrl("data:image/"+m+";base64,"+y,!1))})}},{key:"downloadImage",value:function(){var a=this.imageUrl;if(a.match(/^data:image/)){var f=this.name||"image-from-lively";var m=
a.match(/image\/([^;]+)/);m&&m[1]&&(f+="."+m[1])}else f||(f=Pb.arr.last(a.split("/")));m=document.createElement("a");m.download=f;m.href=a;m.click()}},{key:"convertTo",value:function(a,f){f||(f=1);var m=this.canvasElementAndContext(),q=m.ctx,r=m.canvas;m=m.image;var u=this.width,v=this.height;r.width=m.width;r.height=m.height;q.drawImage(m,0,0,u,v);return this.loadUrl(r.toDataURL(a,f),!1)}},{key:"resampleImageToFitBounds",value:function(){var a=this,f,m,q,r,u,v,y,z,B,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==
F.nextAddress)return F.yield(a.canvasElementAndContext(),2);f=F.yieldResult;m=f.ctx;q=f.canvas;r=f.image;u=a;v=u.width;y=u.height;z=r;B=z.width;C=z.height;q.width=B;q.height=C;m.drawImage(r,0,0,v,y);G=m.getImageData(0,0,B,C);q.width=v;q.height=y;m.putImageData(G,0,0);return F.return(a.loadUrl(q.toDataURL(),!1))})}},{key:"crop",value:function(a){var f=this.canvasElementAndContext(),m=f.ctx,q=f.canvas;f=f.image;var r=this.innerBounds(),u=f.width,v=f.height;a=r.intersection(a);a=new Pb.Rectangle(a.x/
r.width,a.y/r.height,a.width/r.width,a.height/r.height);a=$jscomp.makeIterator((new Pb.Rectangle(0,0,u,v)).divide([a])).next().value;q.width=u;q.height=v;m.drawImage(f,0,0,u,v);f=m.getImageData(a.x,a.y,a.width,a.height);q.width=a.width;q.height=a.height;m.putImageData(f,0,0);return this.loadUrl(q.toDataURL(),!1)}},{key:"interactivelyChangeImageURL",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("Enter image url",
{historyId:"lively.morphic-image-url-inputs",input:a.imageUrl.startsWith("data:")?"":a.imageUrl,requester:a}),2);f=m.yieldResult;"string"===typeof f&&(a.imageUrl=f);m.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=zb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift(["change image url...",function(){return a.interactivelyChangeImageURL()}],["resize image to to fit world",function(){var m=Math.min(a.world().visibleBounds().width/a.naturalExtent.x,a.world().visibleBounds().height/
a.naturalExtent.y);a.extent=a.naturalExtent.scaleBy(m)}],["resize image to its real image size",function(){var m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(m=a,q.yield(a.determineNaturalExtent(),2)):q.return(m.extent=q.yieldResult)})}],["resample image to fit current bounds",function(){return a.resampleImageToFitBounds()}],{isDivider:!0});return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Image"}},{key:"properties",get:function(){return{imageUrl:{isStyleProp:!0,
copyAssetOnFreeze:!0,after:["extent","autoResize"],defaultValue:System.decanonicalize("lively.morphic/lively-web-logo-small.svg"),set:function(a){var f=this;this.isLoaded=!1;this.setProperty("imageUrl",a);this.setProperty("naturalExtent",null);var m=this.autoResize&&!this._isDeserializing;this.whenLoaded().then(function(){f.imageUrl===a&&(f.isLoaded=!0,m&&(f.extent=f.naturalExtent))})}},fill:{defaultValue:Pb.Color.transparent},naturalExtent:{defaultValue:null},isLoaded:{defaultValue:!1,serialize:!1},
autoResize:{isStyleProp:!0,defaultValue:!1}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:84441,end:93803})}(Pb.Morph));Pb.Image=pA;Pb.Image=pA;Pb.Image=pA;var LF=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("PathPoint")&&"function"===
typeof e.PathPoint?e.PathPoint:e.PathPoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){f=void 0===f?{}:f;this.path=a;this._isSmooth=f.isSmooth||!1;this.x=f.position?f.position.x:f.x||0;this.y=f.position?f.position.y:f.y||0;this._controlPoints=f.controlPoints}},{key:"__dont_serialize__",get:function(){return["attributeConnections","$$controlPoints",
"$$position","doNotCopyProperties","doNotSerialize"]}},{key:"isPathPoint",get:function(){return!0}},{key:"isSmooth",get:function(){return this._isSmooth||!1}},{key:"isSmooth",set:function(a){this._isSmooth!==a&&(this._isSmooth=a,this.adaptControlPoints(a))}},{key:"position",get:function(){return Pb.pt(this.x,this.y)}},{key:"position",set:function(a){var f=a.y;this.x=a.x;this.y=f;this.path.makeDirty()}},{key:"moveBy",value:function(a){this.position=this.position.addPt(a);this.path.onVertexChanged(this);
return this}},{key:"copy",value:function(){var a=new Pb.ExpressionSerializer;return new Pb.PathPoint(this.path,a.deserializeExprObj(this.__serialize__()))}},{key:"__serialize__",value:function(){return{__expr__:("({\n         position: "+this.position.toString(!1)+",\n         isSmooth: "+this.isSmooth+",\n         controlPoints: {\n           next: "+this.controlPoints.next.toString(!1)+",\n           previous: "+this.controlPoints.previous.toString(!1)+"\n         }\n      })").replace(/[\n|\s]/g,
""),bindings:{"lively.graphics/geometry-2d.js":["pt"]}}}},{key:"controlPoints",get:function(){return this._controlPoints||{next:Pb.pt(0,0),previous:Pb.pt(0,0)}}},{key:"controlPoints",set:function(a){var f=a=void 0===a?{}:a;a=f.next;f=f.previous;this._controlPoints={next:a?Pb.Point.fromLiteral(a):Pb.pt(0,0),previous:f?Pb.Point.fromLiteral(f):Pb.pt(0,0)};this.path.makeDirty()}},{key:"moveNextControlPoint",value:function(a){this.moveControlPoint("next",a)}},{key:"movePreviousControlPoint",value:function(a){this.moveControlPoint("previous",
a)}},{key:"moveControlPoint",value:function(a,f){var m=this.controlPoints[a];m=m?m.addPt(f):f;f="next"==a?"previous":"next";var q=this.controlPoints[f];this.isSmooth&&(q=m.negated().normalized().scaleBy(q.r()));var r={};this.controlPoints=(r[a]=m,r[f]=q,r);this.path.onVertexChanged(this)}},{key:"pointOnLine",value:function(a,f,m,q){a=Pb.pt(a.x,a.y);f=Pb.pt(f.x,f.y);a=f.subPt(a);var r=a.scaleBy(1/a.r());m=f.subPt(m).dotProduct(r);return f.subPt(r.scaleBy(Math.max(1,Math.min(m,a.r())))).addXY(q,q)}},
{key:"nextVertex",get:function(){return this.path.vertexAfter(this)}},{key:"previousVertex",get:function(){return this.path.vertexBefore(this)}},{key:"interpolate",value:function(a,f){var m=this.copy();m.position=m.position.interpolate(a,f);return m}},{key:"adaptControlPoints",value:function(a){var f=this.nextVertex,m=this.previousVertex,q=this.position,r=this.path,u=r.vertices,v=u.indexOf(this),y=0===v;u=v===u.length-1;m=m?m.position:q;f=f?f.position:q;a?(a=this.pointOnLine(m,f,q,r.borderWidth),
this.controlPoints={previous:y?Pb.pt(0,0):a.subPt(f),next:a.subPt(m)}):this.controlPoints={previous:y?Pb.pt(0,0):m.subPt(q).scaleBy(.5),next:u?Pb.pt(0,0):f.subPt(q).scaleBy(.5)};r.onVertexChanged(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PathPoint"}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:93812,end:97777})}(void 0);Pb.PathPoint=LF;Pb.PathPoint=LF;Pb.PathPoint=LF;var qA=wa("aY",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Path")&&"function"===typeof e.Path?e.Path:e.Path=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Object.assign({},Pb.obj.dissoc(a,"origin")));this.adjustOrigin(a.origin||this.origin);this.position=a.position||this.position;this.updateBounds(this.vertices)}},{key:"__after_deserialize__",value:function(a,f,m){zb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m);this.updateBounds(this.vertices)}},{key:"__additionally_serialize__",value:function(a,f,m,q){zb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,q);f=this.getProperty("draggable");f!=this.propertiesAndPropertySettings().properties.draggable.defaultValue&&(a.props.draggable={value:f});if(f=this.borderColor.valueOf())a.props.borderColor={key:"borderColor",value:m.expressionSerializer.exprStringEncode({__expr__:f.toJSExpr(),bindings:{"lively.graphics/geometry-2d.js":["pt","rect"],"lively.graphics/color.js":["Color",Pb.getClassName(f)]}})}}},{key:"isPath",get:function(){return!0}},{key:"isSvgMorph",get:function(){return!0}},
{key:"onVertexChanged",value:function(a){this.makeDirty();this.updateBounds(this.vertices)}},{key:"copyVertices",value:function(){return this.vertices.map(function(a){return a.copy()})}},{key:"updateBounds",value:function(a){a=void 0===a?this.vertices:a;if(a.length&&!this._adjustingVertices){this._adjustingVertices=!0;var f=this.origin,m=this.extent,q=f.x/m.x;m=f.y/m.y;var r=[];a.forEach(function(v,y){var z=v.isSmooth,B=v.position,C=v.controlPoints||{};v=C.next;C=C.previous;r.push(B);z&&0<y&&y<a.length-
1&&r.push(B.addPt(v),B.addPt(C))});f=Pb.Rectangle.unionPts(r);q=Pb.pt(f.width*q,f.height*m);var u=f.topLeft();a.forEach(function(v){return v.moveBy(u.negated())});this.moveBy(this.getTransform().transformDirection(u));this.extent=f.extent().maxPt(Pb.pt(this.borderWidth,this.borderWidth));this.origin=q;this._adjustingVertices=!1}}},{key:"onChange",value:function(a){var f=a.prop,m=a.value,q=a.prevValue,r=this._adjustingVertices,u=this._adjustingOrigin;"extent"==f&&m&&q&&!r&&this.adjustVertices(m.scaleByPt(q.inverted()));
(!u&&"vertices"===f||"borderWidthLeft"===f)&&this.updateBounds("vertices"==f?m:this.vertices);r||"origin"!==f||this.updateBounds(this.vertices);zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"vertexBefore",value:function(a){a=this.vertices.indexOf(a)-1;return this.vertices[0<=a?a:this.vertices.length-1]}},{key:"vertexAfter",value:function(a){a=this.vertices.indexOf(a)+1;return this.vertices[a>this.vertices.length-1?0:a]}},{key:"adjustVertices",value:function(a){var f=
this,m=this.vertices;m&&m.forEach(function(q){var r=q.controlPoints,u=r.next;r=r.previous;u=u.scaleByPt(a);r=r.scaleByPt(a);q.position=q.position.addPt(f.origin).scaleByPt(a).subPt(f.origin);q.controlPoints={next:u,previous:r}})}},{key:"adjustOrigin",value:function(a){this._adjustingOrigin=!0;var f=this.origin;this.vertices.forEach(function(m){return m.position=f.subPt(a).addXY(m.x,m.y)});zb._get(Object.getPrototypeOf(l.prototype),"adjustOrigin",this).call(this,a);this._adjustingOrigin=!1}},{key:"addVertex",
value:function(a,f){f=void 0===f?null:f;var m=this.vertices;f="number"===typeof f?f:f&&f.isPathPoint?m.indexOf(f):void 0;"number"===typeof f&&-1<f?m.splice(f,0,a):m.push(a);this.vertices=m}},{key:"addVertexCloseTo",value:function(a){var f=this.verticesCloseTo(a),m=f.closest,q=m.length;m=m.vertex;f=f.next;a=this.findClosestPointOnPath(a,10,3);return this.addVertex(a.point,a.length<=q?m:f?f.vertex:null)}},{key:"render",value:function(a){return a.renderPath(this)}},{key:"_pathNode",get:function(){var a=
Pb.PropertyPath("env.renderer").get(this);return(a=a&&a.getNodeForMorph(this))&&a.querySelector("#svg"+Pb.string.regExpEscape(this.id))}},{key:"verticesCloseTo",value:function(a,f){f=void 0===f?!0:f;for(var m=this.vertices,q=Infinity,r=-1,u=0;u<m.length;u++){var v=m[u].position.dist(a);v>=q||(q=v,r=u)}a=0===r?null:{index:r-1,vertex:m[r-1]};q=r===m.length-1?null:{index:r+1,vertex:m[r+1]};m={index:r,vertex:m[r]};f&&(f=this._pathNode,a&&(r=this.findClosestPointOnPath(a.vertex.position,6,3,f).length,
a.length=r),q&&(r=this.findClosestPointOnPath(q.vertex.position,6,3,f).length,q.length=r),f=this.findClosestPointOnPath(m.vertex.position,20,3,f).length,m.length=f);return{previous:a,next:q,closest:m}}},{key:"findClosestPointOnPath",value:function(a,f,m,q){function r(u,v,y,z,B,C,G){y=void 0===y?10:y;z=void 0===z?3:z;B=void 0===B?0:B;C=void 0===C?u.getTotalLength():C;G=void 0===G?0:G;var F=C,N=y;C=[];var L=(B-F)/(N-1),S=0;C.push([Pb.Point.ensure(u.getPointAtLength(F)),F,S]);for(S=1;S<N-1;S++){var ha=
F+S*L;C.push([Pb.Point.ensure(u.getPointAtLength(ha)),ha,S])}C.push([Pb.Point.ensure(u.getPointAtLength(B)),B,S]);B=Infinity;F=-1;N=$jscomp.makeIterator(C);for(L=N.next();!L.done;L=N.next())S=$jscomp.makeIterator(L.value),L=S.next().value,S.next(),S=S.next().value,L=v.dist(L),L>=B||(B=L,F=S);if(G>=z)return v=$jscomp.makeIterator(C[F]),u=v.next().value,v=v.next().value,{point:u,length:v};B=C[Math.max(0,F-1)][1];C=C[Math.min(C.length-1,F+1)][1];return r(u,v,y,z,B,C,G+1)}q||(q=(q=this.env.renderer.getNodeForMorph(this))&&
q.querySelector("#svg"+Pb.string.regExpEscape(this.id)));return q?r(q,a,f,m):{length:0,point:a}}},{key:"onDragStart",value:function(a){var f=a.domEvt.target,m=(new Pb.PropertyPath("attributes.class.value")).get(f);if(m&&m.includes("path-point"))m=$jscomp.makeIterator(m.match(/path-point-([0-9]+)(?:-control-([0-9]+))?$/)),m.next(),a=m.next().value,m=m.next().value,this._controlPointDrag={marker:f,n:Number(a)},void 0!==m&&(this._controlPointDrag.ctrlN=Number(m));else return zb._get(Object.getPrototypeOf(l.prototype),
"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){if(!this._controlPointDrag)return zb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,a);var f=this._controlPointDrag,m=f.n,q=f.ctrlN,r=this.vertices;if(f=r[m])a=this.getInverseTransform().transformDirection(a.state.dragDelta),void 0===q?(f.moveBy(a),a=r[m-1],r=r[m+1],a&&10>a.position.dist(f.position)?this._controlPointDrag.maybeMerge=[m-1,m]:r&&10>r.position.dist(f.position)?this._controlPointDrag.maybeMerge=[m,m+
1]:this._controlPointDrag.maybeMerge=void 0):1===q?f.movePreviousControlPoint(a):2===q&&f.moveNextControlPoint(a)}},{key:"onDragEnd",value:function(a){a=this.vertices;var f=this._controlPointDrag;if(f&&(f=f.maybeMerge,delete this._controlPointDrag,f)){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;a[f].controlPoints.next=a[m].controlPoints.next;a.splice(m,1);this.vertices=a}}},{key:"onMouseDown",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,
a);2===a.state.clickCount&&this.addVertexCloseTo(this.localize(a.position))}},{key:"menuItems",value:function(){var a=this,f=Pb.Icon.textAttribute("check-square",{textStyleClasses:["far"]}),m=Pb.Icon.textAttribute("square",{textStyleClasses:["far"]});m[1].paddingRight="7px";f[1].paddingRight="5px";return[[[].concat($jscomp.arrayFromIterable(this.showControlPoints?f:m),[" control points"]),function(){return a.showControlPoints=!a.showControlPoints}],[[].concat($jscomp.arrayFromIterable(this.isSmooth?
f:m),[" smooth"]),function(){return a.isSmooth=!a.isSmooth}],{isDivider:!0}].concat($jscomp.arrayFromIterable(zb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this)))}},{key:"getPointOnPath",value:function(a){if(!this._pathNode)return Pb.pt(0,0);a=this._pathNode.getPointAtLength(this._pathNode.getTotalLength()*a)||Pb.pt(0,0);return Pb.pt(a.x,a.y)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Path"}},{key:"properties",get:function(){return{borderColor:{isStyleProp:!0,
type:"ColorGradient",foldable:["top","left","right","bottom"],set:function(a){a||(a=Pb.Color.white);if(a.isColor||a.isGradient)a={top:a,left:a,right:a,bottom:a};this.setProperty("borderColor",Pb.obj.extract(a,["top","left","right","bottom"],function(f,m){return Pb.obj.isArray(m)?Pb.Color.fromTuple(m):m}))}},showControlPoints:{defaultValue:!1},vertices:{defaultValue:[],isStyleProp:!0,after:["isSmooth","borderWidth"],before:["extent","origin"],type:"Vertices",set:function(a){var f=this,m=this.isSmooth;
this._adjustingVertices=!0;a=a.map(function(q){return q.isPathPoint?Object.assign(q,{path:f}):new Pb.PathPoint(f,Object.assign({isSmooth:m},q))});this.setProperty("vertices",a);this._adjustingVertices=!1;this.updateBounds(a)}},startMarker:{defaultValue:null,type:"Object"},endMarker:{defaultValue:null,type:"Object"},endStyle:{isStyleProp:!0,type:"Enum",values:["butt","round","square"],defaultValue:"butt"},drawnProportion:{type:"Number",isStyleProp:!0,isFloat:!0,min:-1,max:1,defaultValue:0},cornerStyle:{type:"Enum",
isStyleProp:!0,values:["arcs","bevel","miter","miter-clip","round"],defaultValue:"miter"},draggable:{get:function(){return this.getProperty("draggable")||this.showControlPoints}},isSmooth:{defaultValue:!1,before:["vertices"],type:"Boolean",set:function(a){this.setProperty("isSmooth",a);this.vertices&&(this._adjustingVertices=!0,this.vertices.forEach(function(f){return f.isSmooth=a}),this._adjustingVertices=!1,this.updateBounds(this.vertices))}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:97786,end:111483})}(Pb.Morph));Pb.Path=qA;Pb.Path=qA;Pb.Path=qA;var EC=wa("aZ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("Polygon")&&"function"===typeof e.Polygon?e.Polygon:e.Polygon=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){if(a.vertices&&2<a.vertices.length)zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);else throw Error("A polygon requires 3 or more vertices!");}},{key:"isPolygon",get:function(){return!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Polygon"}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:111492,end:111746})}(Pb.Path));Pb.Polygon=EC;Pb.Polygon=EC;Pb.Polygon=EC;var FC=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/morph.js"),l=e.hasOwnProperty("LineMorph")&&"function"===typeof e.LineMorph?e.LineMorph:e.LineMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:"isPolygon",get:function(){return!0}},{key:"update",value:function(){if(!this._isUpdating){this._isUpdating=!0;var a=this.line,f=this.height,m=a.toVector();this.setProperty("position",this.position.addPt(a.perpendicularLine(0,f,"cc").toVector()));this.width=m.fastR();this.rotation=m.theta();this.vec=m;this._isUpdating=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LineMorph"}},{key:"properties",get:function(){return{borderWidth:{defaultValue:0},
fill:{defaultValue:Pb.Color.black},height:{defaultValue:1},line:{defaultValue:Pb.Line.fromCoords(0,0,0,0),set:function(a){this.setProperty("line",a);this.update(a)}},start:{derived:!0,after:["line"],get:function(a){return this.line.start},set:function(a){this.line=this.line.withStart(a)}},end:{derived:!0,after:["line"],get:function(a){return this.line.end},set:function(a){this.line=this.line.withEnd(a)}},position:{derived:!0,after:["line"],get:function(a){return this.start},set:function(a){var f=
a.subPt(this.start),m=this.rotation;this.line=new Pb.Line(a,this.end.addPt(f));this.rotation=m}}}}}],e,{pathInPackage:function(){return"morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:111755,end:113247})}(Pb.Morph);Pb.LineMorph=FC;Pb.LineMorph=FC;Pb.LineMorph=FC;var Vma=Object.freeze({__proto__:null,Morph:Mj,Ellipse:oA,Triangle:DC,
Image:pA,PathPoint:LF,Path:qA,Polygon:EC,LineMorph:FC}),sn=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js");sn.pt=nf;sn.Morph=Mj;sn.morph=sb;sn.config=vk;sn.fun=Zk;var GC=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),l=e.hasOwnProperty("TooltipViewer")&&"function"===typeof e.TooltipViewer?e.TooltipViewer:e.TooltipViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.currentMorph=a}},{key:"__dont_serialize__",get:function(){return["currentTooltip","currentMorph"]}},{key:"notPartOfCurrentTooltip",value:function(a){return!a.ownerChain().includes(this.currentMorph)}},{key:"invalidatesCurrentTooltip",value:function(a){return a.tooltip||this.notPartOfCurrentTooltip(a)}},{key:"mouseMove",value:function(a){var f=this,m=a.hand,q=$world.morphsContainingPoint(a.positionIn($world)).filter(function(y){return y.reactsToPointer||
y.tooltip});q=$jscomp.makeIterator(q.slice(q.indexOf(m)+1));for(var r=q.next();!r.done;r=q.next()){r=r.value;if(v&&!v.ownerChain().includes(r))break;if(r.tooltip){var u=r;break}var v=r}for(;u&&!u.visible;)u=u.morphBeneath(a.positionIn($world));u?this.currentMorph!==u&&this.invalidatesCurrentTooltip(u)&&(this.hoverOutOfMorph(this.currentMorph),this.hoverIntoMorph(u,m),this.currentMorph=u):this.currentTooltip?this.currentTooltip.softRemove().then(function(){f.currentTooltip&&!f.currentTooltip.owner&&
(f.currentTooltip=null)}):this.currentMorph=null}},{key:"mouseDown",value:function(a){this.currentTooltip&&this.currentTooltip.remove();this.currentTooltip=null}},{key:"hoverIntoMorph",value:function(a,f){this.clearScheduledTooltip();this.currentTooltip?this.showTooltipFor(a,f):this.scheduleTooltipFor(a,f)}},{key:"hoverOutOfMorph",value:function(a){var f=this;this.currentTooltip&&this.currentTooltip.softRemove(function(m){return f.currentTooltip==m&&(f.currentTooltip=null)})}},{key:"scheduleTooltipFor",
value:function(a,f){var m=this;this.timer=setTimeout(function(){m.currentMorph&&m.showTooltipFor(a,f)},1E3*sn.config.showTooltipsAfter)}},{key:"clearScheduledTooltip",value:function(){clearTimeout(this.timer)}},{key:"clearCurrentTooltip",value:function(){var a=this.currentTooltip;a&&a.remove()}},{key:"showTooltipFor",value:function(a,f){a.tooltip&&a.world()&&(this.clearCurrentTooltip(),f=f?f.position.addXY(10,7):a.globalBounds().bottomRight(),this.currentTooltip=new sn.Tooltip({position:f,description:a.tooltip}),
$world.addMorph(this.currentTooltip),this.currentTooltip.update(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TooltipViewer"}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:189,end:3045})}(void 0);sn.TooltipViewer=GC;sn.TooltipViewer=GC;sn.TooltipViewer=GC;var rA=
wa("aV",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/tooltips.js"),l=e.hasOwnProperty("Tooltip")&&"function"===typeof e.Tooltip?e.Tooltip:e.Tooltip=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"update",value:function(a){this.position=a.globalBounds().bottomCenter().subPt(a.world().scroll).addPt(sn.pt(0,7))}},{key:"softRemove",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return m.yield(f.animate({opacity:0,duration:300}),2);a&&a(f);f.remove();m.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tooltip"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},reactsToPointer:{defaultValue:!1},isEpiMorph:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://System/tooltip"}}},description:{after:["submorphs"],derived:!0,get:function(){return $jscomp.makeIterator(this.submorphs).next().value.value},
set:function(a){var f=$jscomp.makeIterator(this.submorphs).next().value;f.value=a;f.fit()}},submorphs:{initialize:function(){this.submorphs=[new sn.morph({reactsToPointer:!1,type:"label",width:200})]}}}}}],e,{pathInPackage:function(){return"tooltips.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3054,end:4249})}(sn.Morph));sn.Tooltip=
rA;sn.Tooltip=rA;sn.Tooltip=rA;var Wma=Object.freeze({__proto__:null,TooltipViewer:GC,Tooltip:rA}),c6=lively.FreezerRuntime.recorderFor("lively.morphic/morphicdb/index.js");c6.default=Bu;c6.MorphicDB=Bu;var Xma=Object.freeze({__proto__:null,MorphicDB:Bu}),dl=lively.FreezerRuntime.recorderFor("lively.2lively/interface.js");dl.nyi=function(b){throw Error("Not yet implemented: "+b);};dl.string=Hg;dl.promise=oe;dl.debugMessageOrder=!1;var qj=function(b){this.id=dl.string.newUUID();this.actions={};this.options=
{ackTimeout:3500,debug:!1};this._incomingOrderNumberingBySenders=new Map;this._outgoingOrderNumberingByTargets=new Map;this._outOfOrderCacheBySenders=new Map};qj.prototype.isOnline=function(){dl.nyi("isOnline")};qj.prototype.open=function(){dl.nyi("open")};qj.prototype.close=function(){dl.nyi("close")};qj.prototype.remove=function(){dl.nyi("remove")};qj.prototype.whenOnline=function(b){var e=this;return dl.promise.waitFor(b,function(){return e.isOnline()}).then(function(){return e}).catch(function(l){return Promise.reject(/timeout/i.test(String(l))?
Error("Timeout in "+e+".whenOnline"):l)})};qj.prototype.onError=function(b){this.debug&&console.log("["+this+"] error: "+b)};qj.prototype.removeService=function(b){delete this.actions[b]};qj.prototype.removeServices=function(b){var e=this;b.forEach(function(l){return e.removeService(l)})};qj.prototype.addService=function(b,e){this.actions[b]=e};qj.prototype.addServices=function(b){var e=this;Object.keys(b).forEach(function(l){return e.addService(l,b[l])})};qj.prototype.ping=function(b){var e=this,
l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return l=Date.now(),r.yield(e.sendToAndWait(b,"l2l-ping",{timestamp:l}),2);a=r.yieldResult;f=a.data;m=f.timestamp;q=Date.now();return r.return({to:m-l,from:q-m,roundtrip:q-l})})};qj.prototype.send=function(b,e){dl.nyi("send")};qj.prototype.sendAndWait=function(b){var e=this,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return l=new Promise(function(r,u){return e.send(b,
r)}),a={},f=e.options.ackTimeout+400,"ackTimeout"in b&&(f=!b.ackTimeout||0>b.ackTimeout?null:b.ackTimeout+400),f?q.yield(Promise.race([dl.promise.delay(f,a),l]),5):q.yield(l,4);case 4:m=q.yieldResult;q.jumpTo(3);break;case 5:m=q.yieldResult;case 3:if(m===a)throw Error("Timeout sending "+b.action);return q.return(m)}})};qj.prototype.sendTo=function(b,e,l,a){return this.send({target:b,action:e,data:l},a)};qj.prototype.sendToAndWait=function(b,e,l,a){return this.sendAndWait(Object.assign({target:b,action:e,
data:l},a))};qj.prototype.prepareSend=function(b,e){var l=b.target,a=b.action,f=b.messageId,m=b.sender;if(!a)throw Error("Trying to send a message without specifying action!");if(!l)throw Error("Trying to send message "+a+" without specifying target!");f||(b.messageId=dl.string.newUUID());m||(b.sender=this.id);a=b.n=this._outgoingOrderNumberingByTargets.get(l)||0;this._outgoingOrderNumberingByTargets.set(l,a+1);if("function"===typeof e){m=this;var q=e;e=function(r){var u=m._incomingOrderNumberingBySenders.get(r.sender)||
0;m.debug&&dl.debugMessageOrder&&console.log("[MSG ORDER] "+m+" received ack for "+r.action+" as msg "+u);try{q.apply(null,arguments)}catch(v){console.error("Error in ack fn of "+m+": "+v.stack)}m._incomingOrderNumberingBySenders.set(r.sender,u+1);setTimeout(function(){return m.invokeOutOfOrderMessages(r.sender)},0)}}this.debug&&dl.debugMessageOrder&&console.log("[MSG ORDER] "+this+" sending "+a+" ("+b.action+") to "+l);return[b,e]};qj.prototype.prepareAnswerMessage=function(b,e){return{action:b.action+
"-response",inResponseTo:b.messageId,target:b.sender,data:e,sender:this.id}};qj.prototype.installEventToMessageTranslator=function(b){var e=this,l=b.onevent;b.onevent=function(a){var f=a.data||[];l.call(this,a);a.data=["*"].concat(f);l.call(this,a)};b.on("*",function(a,f){a&&"object"===typeof a&&a.action&&(f=a,a=f.action);var m=arguments[arguments.length-1];m="function"===typeof m?m:null;(f=f===m?null:f)&&f.data&&("number"===typeof f.n||f.broadcast)&&f.sender?e.receive(f,b,m):(console.warn(e+" received non-conformant message "+
a+":",arguments),"function"===typeof m&&m({data:{error:"invalid l2l message"}}))})};qj.prototype.receive=function(b,e,l){this.dispatchL2LMessageToSelf(b,e,l)};qj.prototype.dispatchL2LMessageToSelf=function(b,e,l){var a=this,f=b.action;if(b.broadcast)this.safeInvokeServiceHandler(f,b,l,e);else try{var m=this._incomingOrderNumberingBySenders.get(b.sender)||0,q="register"===f||"unregister";if(!q&&b.n<m)console.error("[MSG ORDER] ["+this+"] received message no. "+b.n+" but expected >= "+m+", dropping "+
f);else if(!q&&b.n>m){this.debug&&dl.debugMessageOrder&&console.log("[MSG ORDER] ["+this+"] storing out of order message "+f+" ("+b.n+") for later invocation");var r=this._outOfOrderCacheBySenders.get(b.sender);r||(r=[],this._outOfOrderCacheBySenders.set(b.sender,r));r.push([f,b,l,e])}else this.safeInvokeServiceHandler(f,b,l,e),setTimeout(function(){return a.invokeOutOfOrderMessages(b.sender)},0)}catch(u){console.error("Error message ordering when handling "+f+": "+(u.stack||u)),"function"===typeof l&&
l(this.prepareAnswerMessage(b,{isError:!0,error:String(u.stack||u)}))}};qj.prototype.invokeOutOfOrderMessages=function(b){var e=this._outOfOrderCacheBySenders.get(b);if(e&&e.length){var l=this._incomingOrderNumberingBySenders.get(b)||0;b=e.findIndex(function(a){a=$jscomp.makeIterator(a);a.next();return a.next().value.n===l});-1!==b&&(e.splice(b,1),this.invokeServiceHandler.apply(this,e[b]))}};qj.prototype.renameTarget=function(b,e){if(b!==e){var l=this._outgoingOrderNumberingByTargets.get(b);this._outgoingOrderNumberingByTargets.delete(b);
this._outgoingOrderNumberingByTargets.set(e,l)}};qj.prototype.safeInvokeServiceHandler=function(b,e,l,a){try{"function"===typeof this.actions[b]?this.invokeServiceHandler(b,e,l,a):a._events&&Object.keys(a._events).includes(b)||(console.warn("WARNING ["+this+"] Unhandled message: "+b),"function"===typeof l&&l(this.prepareAnswerMessage(e,{isError:!0,error:"message not understood: "+b})))}catch(f){console.error("Error when handling "+b+": "+(f.stack||f)),"function"===typeof l&&l(this.prepareAnswerMessage(e,
{isError:!0,error:String(f.stack||f)}))}};qj.prototype.invokeServiceHandler=function(b,e,l,a){var f=this;this.debug&&dl.debugMessageOrder&&console.log("[MSG ORDER] "+this+" received "+e.n+" ("+e.action+") from "+e.sender);this._incomingOrderNumberingBySenders.set(e.sender,e.n+1);if("function"===typeof l){var m=!1,q=!1,r="ackTimeout"in e?e.ackTimeout:this.options.ackTimeout,u=this._outgoingOrderNumberingByTargets.get(e.sender)||0;this._outgoingOrderNumberingByTargets.set(e.sender,u+1);var v=function(y){q?
console.warn("["+f+"] ackFn for "+e.action+" called after it timed out, dropping answer!"):m?console.warn("["+f+"] ack function called repeatedly when handling "+e.action):(m=!0,l(f.prepareAnswerMessage(e,y)),f.debug&&dl.debugMessageOrder&&console.log("[MSG ORDER] "+f+" sending "+u+" (ack for "+e.action+")"))};r&&setTimeout(function(){m||(v({isError:!0,error:"Timeout error: "+f+" did not send answer for "+e.action+" after "+r+"ms"}),q=!0)},r)}try{this.actions[b].call(this,this,e,v,a)}catch(y){console.error("["+
this+"] Error handling "+b+": "+(y.stack||y)),v&&v({error:y.stack})}};$jscomp.global.Object.defineProperties(qj.prototype,{debug:{configurable:!0,enumerable:!0,get:function(){return this.options.debug},set:function(b){this.options.debug=b}}});dl.L2LConnection=qj;dl.default=qj;var mw=lively.FreezerRuntime.recorderFor("lively.2lively/default-actions.js"),CL={"l2l-ping":function(b,e,l,a){a=e.sender;e=e.data.timestamp;var f=Date.now();"function"===typeof l&&l({timestamp:f});b.debug&&console.log("[undefined] got ping from "+
a+", time: "+(f-e)+"ms")},"remote-eval":function(b,e,l,a){var f=e.data.source;Promise.resolve().then(function(){return eval(f)}).then(function(m){return l({value:m})}).catch(function(m){m.originalErr&&(m=m.originalErr);console.error("eval error: "+m);"function"===typeof l&&l({isError:!0,value:String(m.stack||m)})})},"remote-eval-2":function(b,e,l,a){var f=e.data.source;Promise.resolve().then(function(){var m=eval(f);if(!(m instanceof Promise))throw console.error("unexpected eval result:"+m),Error("unexpected eval result:"+
m);return m}).then(function(m){return l(m)}).catch(function(m){console.error("eval error: "+m);m.originalErr&&(m=m.originalErr);"function"===typeof l&&l({isError:!0,value:String(m.stack||m)})})}};mw.defaultActions=CL;mw.defaultActions=CL;mw.defaultActions=CL;var ey={},PS=(ey["[broadcast] send"]=function(b,e,l,a){var f=e.sender,m=e.data,q,r,u,v,y,z,B,C,G,F,N,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(S){q=m;r=q.action;u=q.broadcast;v=q.room;y=q.namespace;z=q.isSystemBroadcast;B=
q.isMultiServerBroadcast;C=[];B?(console.log(".......isMultiServerBroadcast"),G=b,F=G.id,N=b.getTrackerList(),console.log(N),C=N.map(function(ha){return ha.id!=F?ha.io.nsps["/"+ha.namespace]:a.broadcast})):(z&&(y=b.namespace),C.push(y?b.io.nsps["/"+y]:a.broadcast));C.forEach(function(ha){console.log(r,{action:r,sender:f,broadcast:!0,data:u});ha.to(v).emit(r,{action:r,sender:f,broadcast:!0,data:u})});l&&"function"===typeof l&&(L="message broadcasted to "+v,y&&(L+=" in namespace "+y),1<C.length&&(L+=
" "+C.length+" trackers"),console.log(L),l({status:L}));S.jumpToEnd()})},ey["[broadcast] join room"]=function(b,e,l,a){var f=e.sender,m=e.data.room,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r=!1,u=b.io.nsps["/"+b.namespace].adapter.rooms,(v=u[m]&&u[m].sockets&&u[m].sockets[a.id])?(q=f+" already in "+m,y.jumpTo(2)):y.yield(new Promise(function(z,B){return a.join(m,function(C){return C?B(C):z()})}),3);2!=y.nextAddress&&(q=f+" joined "+m,r=!0);
l&&"function"===typeof l&&l({status:q,joined:r});y.jumpToEnd()})},ey["[broadcast] leave room"]=function(b,e,l,a){var f=e.sender,m=e.data.room,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return r=!1,u=b.io.nsps["/"+b.namespace].adapter.rooms,v=u[m]&&u[m].sockets&&u[m].sockets[a.id],v?y.yield(new Promise(function(z,B){return a.leave(m,function(C){return C?B(C):z()})}),3):(q=f+" not in "+m,y.jumpTo(2));2!=y.nextAddress&&(q=f+" left room "+m,r=!0);console.log(q);
l&&"function"===typeof l&&l({left:r,status:q});y.jumpToEnd()})},ey["[broadcast] my rooms"]=function(b,e,l,a){l(a.rooms)},ey["[broadcast] all rooms"]=function(b,e,l,a){l(b.io.nsps["/"+b.namespace].adapter.rooms)},ey["[broadcast] list room members"]=function(b,e,l,a){e=e.data.room;a=b.io;e?(b=a.nsps["/"+b.namespace].adapter.rooms[e],l({room:e,sockets:b?b.sockets:{},length:b?b.length:0})):l({isError:!0,error:"`room` paramerter missing!"})},ey.getClients=function(b,e,l){b.removeDisconnectedClients();
l(Array.from(b.clients))},ey);mw.defaultTrackerActions=PS;mw.defaultTrackerActions=PS;mw.defaultTrackerActions=PS;var MF={},DL=(MF.getRoomList=function(b){var e=b.client,l=b.ackFn,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a=e._socketioClient.rooms;l(a);f.jumpToEnd()})},MF["ask for"]=function(b,e,l,a){var f=e.sender,m=e.data.query,q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return r=m.match(/password|sudo/i)?"passwordPrompt":
"prompt",v.yield($world[r](m),2);u=v.yieldResult;"function"===typeof l&&l({answer:u});b.debug&&console.log("["+q+"] message 'ask for' from "+f+", query: "+m);v.jumpToEnd()})},MF["open editor"]=function(b,e,l,a){var f=e.data.args,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return f.length?q.yield($world.execCommand("open file for EDITOR",{url:f[0]}),2):(l({error:"no file specified"}),q.return());m=q.yieldResult;"function"===typeof l&&l("aborted"===m?{error:String(m)}:
{status:m});q.jumpToEnd()})},MF.changeWorkingDirectory=function(b,e,l,a){var f=e.data.args,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){m=$jscomp.makeIterator(f||[]);q=m.next().value;r=m.next().value;u="OK";try{if(q)if(r){if(v=$world.getMorphWithId(r))if(v.__lookupSetter__("cwd"))v.cwd=q;else if("function"===typeof v.changeWorkingDirectory)v.changeWorkingDirectory(q);else if("function"===typeof v.pluginFind){if(y=v.pluginFind(function(B){return B.isShellEditorPlugin}))y.cwd=
q}else u="[changeWorkingDirectory] cannot figure pout how to set dir"}else u="[changeWorkingDirectory] No command morph";else u="[changeWorkingDirectory] No directory received"}catch(B){u=String(B)}"OK"!==u&&console.warn(u);"function"===typeof l&&l(u);z.jumpToEnd()})},MF);mw.defaultClientActions=DL;mw.defaultClientActions=DL;mw.defaultClientActions=DL;var Yma={},Zma=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
$ma="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),d6=Yma=function(b){var e=b,l=b.indexOf("["),a=b.indexOf("]");-1!=l&&-1!=a&&(b=b.substring(0,l)+b.substring(l,a).replace(/:/g,";")+b.substring(a,b.length));var f=Zma.exec(b||"");b={};for(var m=14;m--;)b[$ma[m]]=f[m]||"";-1!=l&&-1!=a&&(b.source=e,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=
!0);e=b.path;l=e.replace(/\/{2,9}/g,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||l.splice(0,1);"/"==e.substr(e.length-1,1)&&l.splice(l.length-1,1);b.pathNames=l;b.queryKey=wca(b,b.query);return b},ana={},oE=864E5,yca=365.25*oE,bna=ana=function(b,e){e=e||{};var l=typeof b;if("string"===l&&0<b.length)return xca(b);if("number"===l&&!1===isNaN(b))return e.long?MI(b,oE,"day")||MI(b,36E5,"hour")||MI(b,6E4,"minute")||MI(b,1E3,"second")||b+" ms":b>=oE?Math.round(b/oE)+"d":36E5<=b?Math.round(b/36E5)+
"h":6E4<=b?Math.round(b/6E4)+"m":1E3<=b?Math.round(b/1E3)+"s":b+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b));},Bca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,Mh={};Mh=Mh=uP.debug=uP["default"]=uP;Mh.coerce=function(b){return b instanceof Error?b.stack||b.message:b};Mh.disable=function(){Mh.enable("")};Mh.enable=function(b){Mh.save(b);Mh.names=[];Mh.skips=[];var e,l=("string"===typeof b?b:"").split(/[\s,]+/),a=l.length;
for(e=0;e<a;e++)l[e]&&(b=l[e].replace(/\*/g,".*?"),"-"===b[0]?Mh.skips.push(new RegExp("^"+b.substr(1)+"$")):Mh.names.push(new RegExp("^"+b+"$")));for(e=0;e<Mh.instances.length;e++)b=Mh.instances[e],b.enabled=Mh.enabled(b.namespace)};Mh.enabled=function(b){if("*"===b[b.length-1])return!0;var e;var l=0;for(e=Mh.skips.length;l<e;l++)if(Mh.skips[l].test(b))return!1;l=0;for(e=Mh.names.length;l<e;l++)if(Mh.names[l].test(b))return!0;return!1};Mh.humanize=bna;Mh.instances=[];Mh.names=[];Mh.skips=[];Mh.formatters=
{};var EL="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,qn={},vP=Qh;qn=qn=Mh;qn.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};qn.formatArgs=function(b){var e=(this||EL).useColors;b[0]=(e?"%c":"")+(this||EL).namespace+(e?" %c":" ")+b[0]+(e?"%c ":" ")+"+"+qn.humanize((this||EL).diff);if(e){e="color: "+(this||EL).color;b.splice(1,0,e,"color: inherit");var l=0,a=0;b[0].replace(/%[a-zA-Z%]/g,
function(f){"%%"!==f&&(l++,"%c"===f&&(a=l))});b.splice(a,0,e)}};qn.save=function(b){try{null==b?qn.storage.removeItem("debug"):qn.storage.debug=b}catch(e){}};qn.load=H0;qn.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||
"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var cna=qn;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var QS=chrome.storage.local;else a:{try{QS=window.localStorage;
break a}catch(b){}QS=void 0}cna.storage=QS;qn.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" ");
qn.formatters.j=function(b){try{return JSON.stringify(b)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};qn.enable(H0());var nw=qn,Tj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,e6={};e6=Fp;Fp.prototype.on=Fp.prototype.addEventListener=function(b,e){(this||Tj)._callbacks=(this||Tj)._callbacks||{};((this||Tj)._callbacks["$"+b]=(this||Tj)._callbacks["$"+b]||[]).push(e);return this||Tj};Fp.prototype.once=function(b,e){function l(){this.off(b,l);e.apply(this||
Tj,arguments)}l.fn=e;this.on(b,l);return this||Tj};Fp.prototype.off=Fp.prototype.removeListener=Fp.prototype.removeAllListeners=Fp.prototype.removeEventListener=function(b,e){(this||Tj)._callbacks=(this||Tj)._callbacks||{};if(0==arguments.length)return(this||Tj)._callbacks={},this||Tj;var l=(this||Tj)._callbacks["$"+b];if(!l)return this||Tj;if(1==arguments.length)return delete (this||Tj)._callbacks["$"+b],this||Tj;for(var a,f=0;f<l.length;f++)if(a=l[f],a===e||a.fn===e){l.splice(f,1);break}0===l.length&&
delete (this||Tj)._callbacks["$"+b];return this||Tj};Fp.prototype.emit=function(b){(this||Tj)._callbacks=(this||Tj)._callbacks||{};for(var e=Array(arguments.length-1),l=(this||Tj)._callbacks["$"+b],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(l){l=l.slice(0);a=0;for(var f=l.length;a<f;++a)l[a].apply(this||Tj,e)}return this||Tj};Fp.prototype.listeners=function(b){(this||Tj)._callbacks=(this||Tj)._callbacks||{};return(this||Tj)._callbacks["$"+b]||[]};Fp.prototype.hasListeners=function(b){return!!this.listeners(b).length};
var sA=e6,dna={},ena={}.toString,RS=dna=Array.isArray||function(b){return"[object Array]"==ena.call(b)},f6={},SS=eh.Buffer;f6=function(b){var e;!(e=fna&&SS.isBuffer(b))&&(e=gna)&&((e=b instanceof ArrayBuffer)||(e="function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(b):b.buffer instanceof ArrayBuffer));return e};var fna="function"===typeof SS&&"function"===typeof SS.isBuffer,gna="function"===typeof ArrayBuffer,g6=f6,h6="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:
global,FL={},xP=RS,I0=g6,i6=Object.prototype.toString,hna="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===i6.call(Blob),ina="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===i6.call(File);FL.deconstructPacket=function(b){var e=[];b.data=wP(b.data,e);b.attachments=e.length;return{packet:b,buffers:e}};FL.reconstructPacket=function(b,e){b.data=yP(b.data,e);b.attachments=void 0;return b};FL.removeBlobs=function(b,e){function l(m,q,r){if(!m)return m;
if(hna&&m instanceof Blob||ina&&m instanceof File){a++;var u=new FileReader;u.onload=function(){r?r[q]=(this||h6).result:f=(this||h6).result;--a||e(f)};u.readAsArrayBuffer(m)}else if(xP(m))for(u=0;u<m.length;u++)l(m[u],u,m);else if("object"===typeof m&&!I0(m))for(u in m)l(m[u],u,m)}var a=0,f=b;l(f);a||e(f)};var Om="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,zj={},zP=nw("socket.io-parser"),AP=FL;zj.protocol=4;zj.types="CONNECT DISCONNECT EVENT ACK ERROR BINARY_EVENT BINARY_ACK".split(" ");
zj.CONNECT=0;zj.DISCONNECT=1;zj.EVENT=2;zj.ACK=3;zj.ERROR=4;zj.BINARY_EVENT=5;zj.BINARY_ACK=6;zj.Encoder=J0;zj.Decoder=NI;var Cca=zj.ERROR+'"encode error"';J0.prototype.encode=function(b,e){zP("encoding packet %j",b);zj.BINARY_EVENT===b.type||zj.BINARY_ACK===b.type?Dca(b,e):(b=K0(b),e([b]))};sA(NI.prototype);NI.prototype.add=function(b){if("string"===typeof b){a:{var e=0,l={type:Number(b.charAt(0))};if(null==zj.types[l.type])b={type:zj.ERROR,data:"parser error: unknown packet type "+l.type};else{if(zj.BINARY_EVENT===
l.type||zj.BINARY_ACK===l.type){for(var a=e+1;"-"!==b.charAt(++e)&&e!=b.length;);a=b.substring(a,e);if(a!=Number(a)||"-"!==b.charAt(e))throw Error("Illegal attachments");l.attachments=Number(a)}if("/"===b.charAt(e+1)){for(a=e+1;++e;){var f=b.charAt(e);if(","===f)break;if(e===b.length)break}l.nsp=b.substring(a,e)}else l.nsp="/";a=b.charAt(e+1);if(""!==a&&Number(a)==a){for(a=e+1;++e;){f=b.charAt(e);if(null==f||Number(f)!=f){--e;break}if(e===b.length)break}l.id=Number(b.substring(a,e+1))}if(b.charAt(++e)){e=
b.substr(e);try{var m=JSON.parse(e)}catch(q){m=!1}if(!1===m||l.type!==zj.ERROR&&!RS(m)){b={type:zj.ERROR,data:"parser error: invalid payload"};break a}else l.data=m}zP("decoded %s as %j",b,l);b=l}}zj.BINARY_EVENT===b.type||zj.BINARY_ACK===b.type?((this||Om).reconstructor=new BP(b),0===(this||Om).reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b)}else if(g6(b)||b.base64)if((this||Om).reconstructor){if(b=(this||Om).reconstructor.takeBinaryData(b))(this||Om).reconstructor=
null,this.emit("decoded",b)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+b);};NI.prototype.destroy=function(){(this||Om).reconstructor&&(this||Om).reconstructor.finishedReconstruction()};BP.prototype.takeBinaryData=function(b){(this||Om).buffers.push(b);return(this||Om).buffers.length===(this||Om).reconPack.attachments?(b=AP.reconstructPacket((this||Om).reconPack,(this||Om).buffers),this.finishedReconstruction(),b):null};BP.prototype.finishedReconstruction=
function(){(this||Om).reconPack=null;(this||Om).buffers=[]};var TS={};try{TS="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(b){TS=!1}var jna=TS,kna={},US=kna="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")(),lna={},VS=lna=function(b){var e=b.xdomain,l=b.xscheme;b=b.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!e||jna))return new XMLHttpRequest}catch(a){}try{if("undefined"!==typeof XDomainRequest&&!l&&b)return new XDomainRequest}catch(a){}if(!e)try{return new (US[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}},
mna={},CP=eh.Buffer,Eca=RS,j6=Object.prototype.toString,Fca="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===j6.call(Blob),Gca="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===j6.call(File),WS=mna=OI,nna={},GL=nna=function(b,e,l){var a=b.byteLength;e=e||0;l=l||a;if(b.slice)return b.slice(e,l);0>e&&(e+=a);0>l&&(l+=a);l>a&&(l=a);if(e>=a||e>=l||0===a)return new ArrayBuffer(0);b=new Uint8Array(b);a=new Uint8Array(l-e);for(var f=0;e<l;e++,
f++)a[f]=b[e];return a.buffer},ona={},pna=ona=function(b,e,l){function a(m,q){if(0>=a.count)throw Error("after called too many times");--a.count;m?(f=!0,e(m),e=l):0!==a.count||f||e(null,q)}var f=!1;l=l||Hca;a.count=b;return 0===b?e():a},XS={};(function(b){XS.encode=function(e){e=new Uint8Array(e);var l,a=e.length,f="";for(l=0;l<a;l+=3)f+=b[e[l]>>2],f+=b[(e[l]&3)<<4|e[l+1]>>4],f+=b[(e[l+1]&15)<<2|e[l+2]>>6],f+=b[e[l+2]&63];2===a%3?f=f.substring(0,f.length-1)+"=":1===a%3&&(f=f.substring(0,f.length-
2)+"==");return f};XS.decode=function(e){var l=.75*e.length,a=e.length,f=0;"="===e[e.length-1]&&(l--,"="===e[e.length-2]&&l--);var m=new ArrayBuffer(l),q=new Uint8Array(m);for(l=0;l<a;l+=4){var r=b.indexOf(e[l]);var u=b.indexOf(e[l+1]);var v=b.indexOf(e[l+2]);var y=b.indexOf(e[l+3]);q[f++]=r<<2|u>>4;q[f++]=(u&15)<<4|v>>2;q[f++]=(v&3)<<6|y&63}return m}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");var k6={},OB="undefined"!==typeof OB?OB:"undefined"!==typeof WebKitBlobBuilder?
WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:!1;try{var YS=2===(new Blob(["hi"])).size}catch(b){YS=!1}var HL;if(HL=YS)try{HL=2===(new Blob([new Uint8Array([1,2])])).size}catch(b){HL=!1}var qna=HL,rna=OB&&OB.prototype.append&&OB.prototype.getBlob;"undefined"!==typeof Blob&&(M0.prototype=Blob.prototype,N0.prototype=Blob.prototype);k6=YS?qna?Blob:N0:rna?M0:void 0;var Qp=k6,sna={},tna=sna=Object.keys||function(b){var e=[],l=Object.prototype.hasOwnProperty,
a;for(a in b)l.call(b,a)&&e.push(a);return e},l6={},Cu=String.fromCharCode,QI,PI,Dx;l6={version:"2.1.2",encode:function(b,e){e=e||{};e=!1!==e.strict;b=O0(b);for(var l=b.length,a=-1,f,m="";++a<l;){f=b[a];var q=e;if(0==(f&4294967168))f=Cu(f);else{var r="";0==(f&4294965248)?r=Cu(f>>6&31|192):0==(f&4294901760)?(P0(f,q)||(f=65533),r=Cu(f>>12&15|224),r+=Cu(f>>6&63|128)):0==(f&4292870144)&&(r=Cu(f>>18&7|240),r+=Cu(f>>12&63|128),r+=Cu(f>>6&63|128));f=r+=Cu(f&63|128)}m+=f}return m},decode:function(b,e){e=
e||{};e=!1!==e.strict;QI=O0(b);PI=QI.length;Dx=0;b=[];for(var l;!1!==(l=Ica(e));)b.push(l);e=b.length;l=-1;for(var a,f="";++l<e;)a=b[l],65535<a&&(a-=65536,f+=Cu(a>>>10&1023|55296),a=56320|a&1023),f+=Cu(a);return f}};var Di={},Kca=pna,m6=l6,ZS;"undefined"!==typeof ArrayBuffer&&(ZS=XS);var una="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),vna="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),n6=una||vna;Di.protocol=3;var IL=Di.packets={open:0,close:1,ping:2,
pong:3,message:4,upgrade:5,noop:6},NF=tna(IL),Ks={type:"error",data:"parser error"};Di.encodePacket=function(b,e,l,a){"function"===typeof e&&(a=e,e=!1);"function"===typeof l&&(a=l,l=null);var f=void 0===b.data?void 0:b.data.buffer||b.data;if("undefined"!==typeof ArrayBuffer&&f instanceof ArrayBuffer){if(e){l=b.data;e=new Uint8Array(l);l=new Uint8Array(1+l.byteLength);l[0]=IL[b.type];for(b=0;b<e.length;b++)l[b+1]=e[b];b=a(l.buffer)}else b=Di.encodeBase64Packet(b,a);return b}if("undefined"!==typeof Qp&&
f instanceof Qp)return e?n6?b=Jca(b,e,a):(e=new Uint8Array(1),e[0]=IL[b.type],b=new Qp([e.buffer,b.data]),b=a(b)):b=Di.encodeBase64Packet(b,a),b;if(f&&f.base64)return a("b"+Di.packets[b.type]+b.data.data);e=IL[b.type];void 0!==b.data&&(e+=l?m6.encode(String(b.data),{strict:!1}):String(b.data));return a(""+e)};Di.encodeBase64Packet=function(b,e){var l="b"+Di.packets[b.type];if("undefined"!==typeof Qp&&b.data instanceof Qp){var a=new FileReader;a.onload=function(){var q=a.result.split(",")[1];e(l+q)};
return a.readAsDataURL(b.data)}try{var f=String.fromCharCode.apply(null,new Uint8Array(b.data))}catch(q){b=new Uint8Array(b.data);f=Array(b.length);for(var m=0;m<b.length;m++)f[m]=b[m];f=String.fromCharCode.apply(null,f)}l+=btoa(f);return e(l)};Di.decodePacket=function(b,e,l){if(void 0===b)return Ks;if("string"===typeof b){if("b"===b.charAt(0))return Di.decodeBase64Packet(b.substr(1),e);if(l){a:{e=b;try{e=m6.decode(e,{strict:!1})}catch(a){b=!1;break a}b=e}if(!1===b)return Ks}l=b.charAt(0);return Number(l)==
l&&NF[l]?1<b.length?{type:NF[l],data:b.substring(1)}:{type:NF[l]}:Ks}l=(new Uint8Array(b))[0];b=GL(b,1);Qp&&"blob"===e&&(b=new Qp([b]));return{type:NF[l],data:b}};Di.decodeBase64Packet=function(b,e){var l=NF[b.charAt(0)];if(!ZS)return{type:l,data:{base64:!0,data:b.substr(1)}};b=ZS.decode(b.substr(1));"blob"===e&&Qp&&(b=new Qp([b]));return{type:l,data:b}};Di.encodePayload=function(b,e,l){"function"===typeof e&&(l=e,e=null);var a=WS(b);if(e&&a)return Qp&&!n6?Di.encodePayloadAsBlob(b,l):Di.encodePayloadAsArrayBuffer(b,
l);if(!b.length)return l("0:");DP(b,function(f,m){Di.encodePacket(f,a?e:!1,!1,function(q){m(null,q.length+":"+q)})},function(f,m){return l(m.join(""))})};Di.decodePayload=function(b,e,l){if("string"!==typeof b)return Di.decodePayloadAsBinary(b,e,l);"function"===typeof e&&(l=e,e=null);if(""===b)return l(Ks,0,1);var a="";for(var f,m,q=0,r=b.length;q<r;q++)if(m=b.charAt(q),":"!==m)a+=m;else{if(""===a||a!=(f=Number(a)))return l(Ks,0,1);m=b.substr(q+1,f);if(a!=m.length)return l(Ks,0,1);if(m.length){a=
Di.decodePacket(m,e,!1);if(Ks.type===a.type&&Ks.data===a.data)return l(Ks,0,1);if(!1===l(a,q+f,r))return}q+=f;a=""}if(""!==a)return l(Ks,0,1)};Di.encodePayloadAsArrayBuffer=function(b,e){if(!b.length)return e(new ArrayBuffer(0));DP(b,function(l,a){Di.encodePacket(l,!0,!0,function(f){return a(null,f)})},function(l,a){l=a.reduce(function(q,r){r="string"===typeof r?r.length:r.byteLength;return q+r.toString().length+r+2},0);var f=new Uint8Array(l),m=0;a.forEach(function(q){var r="string"===typeof q,u=
q;if(r){u=new Uint8Array(q.length);for(var v=0;v<q.length;v++)u[v]=q.charCodeAt(v);u=u.buffer}r?f[m++]=0:f[m++]=1;q=u.byteLength.toString();for(v=0;v<q.length;v++)f[m++]=parseInt(q[v]);f[m++]=255;u=new Uint8Array(u);for(v=0;v<u.length;v++)f[m++]=u[v]});return e(f.buffer)})};Di.encodePayloadAsBlob=function(b,e){DP(b,function(l,a){Di.encodePacket(l,!0,!0,function(f){var m=new Uint8Array(1);m[0]=1;if("string"===typeof f){for(var q=new Uint8Array(f.length),r=0;r<f.length;r++)q[r]=f.charCodeAt(r);f=q.buffer;
m[0]=0}q=(f instanceof ArrayBuffer?f.byteLength:f.size).toString();var u=new Uint8Array(q.length+1);for(r=0;r<q.length;r++)u[r]=parseInt(q[r]);u[q.length]=255;Qp&&(f=new Qp([m.buffer,u.buffer,f]),a(null,f))})},function(l,a){return e(new Qp(a))})};Di.decodePayloadAsBinary=function(b,e,l){"function"===typeof e&&(l=e,e=null);for(var a=[];0<b.byteLength;){for(var f=new Uint8Array(b),m=0===f[0],q="",r=1;255!==f[r];r++){if(310<q.length)return l(Ks,0,1);q+=f[r]}b=GL(b,2+q.length);q=parseInt(q);f=GL(b,0,
q);if(m)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(v){for(m=new Uint8Array(f),f="",r=0;r<m.length;r++)f+=String.fromCharCode(m[r])}a.push(f);b=GL(b,q)}var u=a.length;a.forEach(function(v,y){l(Di.decodePacket(v,e,!0),y,u)})};for(var JL={encode:function(b){var e="",l;for(l in b)b.hasOwnProperty(l)&&(e.length&&(e+="&"),e+=encodeURIComponent(l)+"="+encodeURIComponent(b[l]));return e},decode:function(b){var e={};b=b.split("&");for(var l=0,a=b.length;l<a;l++){var f=b[l].split("=");e[decodeURIComponent(f[0])]=
decodeURIComponent(f[1])}return e}},wna={},KL=wna=function(b,e){var l=function(){};l.prototype=e.prototype;b.prototype=new l;b.prototype.constructor=b},xna={},Q0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o6={},S0=0,fy=0,R0;64>fy;fy++)o6[Q0[fy]]=fy;FP.encode=EP;FP.decode=function(b){var e=0;for(fy=0;fy<b.length;fy++)e=64*e+o6[b.charAt(fy)];return e};var p6=xna=FP,Zh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,q6={},yna=Di;q6=cu;
sA(cu.prototype);cu.prototype.onError=function(b,e){b=Error(b);b.type="TransportError";b.description=e;this.emit("error",b);return this||Zh};cu.prototype.open=function(){if("closed"===(this||Zh).readyState||""===(this||Zh).readyState)(this||Zh).readyState="opening",this.doOpen();return this||Zh};cu.prototype.close=function(){if("opening"===(this||Zh).readyState||"open"===(this||Zh).readyState)this.doClose(),this.onClose();return this||Zh};cu.prototype.send=function(b){if("open"===(this||Zh).readyState)this.write(b);
else throw Error("Transport not open");};cu.prototype.onOpen=function(){(this||Zh).readyState="open";(this||Zh).writable=!0;this.emit("open")};cu.prototype.onData=function(b){b=yna.decodePacket(b,(this||Zh).socket.binaryType);this.onPacket(b)};cu.prototype.onPacket=function(b){this.emit("packet",b)};cu.prototype.onClose=function(){(this||Zh).readyState="closed";this.emit("close")};var $S=q6,wi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,r6={},T0=$S,s6=Di,Ls=nw("engine.io-client:polling");
r6=du;var Lca=null!=(new VS({xdomain:!1})).responseType;KL(du,T0);du.prototype.name="polling";du.prototype.doOpen=function(){this.poll()};du.prototype.pause=function(b){function e(){Ls("paused");l.readyState="paused";b()}var l=this||wi;(this||wi).readyState="pausing";if((this||wi).polling||!(this||wi).writable){var a=0;(this||wi).polling&&(Ls("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){Ls("pre-pause polling complete");--a||e()}));(this||wi).writable||(Ls("we are currently writing - waiting to pause"),
a++,this.once("drain",function(){Ls("pre-pause writing complete");--a||e()}))}else e()};du.prototype.poll=function(){Ls("polling");(this||wi).polling=!0;this.doPoll();this.emit("poll")};du.prototype.onData=function(b){var e=this||wi;Ls("polling got data %s",b);s6.decodePayload(b,(this||wi).socket.binaryType,function(l,a,f){if("opening"===e.readyState)e.onOpen();if("close"===l.type)return e.onClose(),!1;e.onPacket(l)});"closed"!==(this||wi).readyState&&((this||wi).polling=!1,this.emit("pollComplete"),
"open"===(this||wi).readyState?this.poll():Ls('ignoring poll - transport state "%s"',(this||wi).readyState))};du.prototype.doClose=function(){function b(){Ls("writing close packet");e.write([{type:"close"}])}var e=this||wi;"open"===(this||wi).readyState?(Ls("transport open - closing"),b()):(Ls("transport not open - deferring close"),this.once("open",b))};du.prototype.write=function(b){var e=this||wi;(this||wi).writable=!1;var l=function(){e.writable=!0;e.emit("drain")};s6.encodePayload(b,(this||wi).supportsBinary,
function(a){e.doWrite(a,l)})};du.prototype.uri=function(){var b=(this||wi).query||{},e=(this||wi).secure?"https":"http",l="";!1!==(this||wi).timestampRequests&&(b[(this||wi).timestampParam]=p6());(this||wi).supportsBinary||b.sid||(b.b64=1);b=JL.encode(b);(this||wi).port&&("https"===e&&443!==Number((this||wi).port)||"http"===e&&80!==Number((this||wi).port))&&(l=":"+(this||wi).port);b.length&&(b="?"+b);var a=-1!==(this||wi).hostname.indexOf(":");return e+"://"+(a?"["+(this||wi).hostname+"]":(this||
wi).hostname)+l+(this||wi).path+b};var t6=r6,qe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,aT={},V0=t6,bT=nw("engine.io-client:polling-xhr");aT=QB;aT.Request=El;KL(QB,V0);QB.prototype.supportsBinary=!0;QB.prototype.request=function(b){b=b||{};b.uri=this.uri();b.xd=(this||qe).xd;b.xs=(this||qe).xs;b.agent=(this||qe).agent||!1;b.supportsBinary=(this||qe).supportsBinary;b.enablesXDR=(this||qe).enablesXDR;b.withCredentials=(this||qe).withCredentials;b.pfx=(this||
qe).pfx;b.key=(this||qe).key;b.passphrase=(this||qe).passphrase;b.cert=(this||qe).cert;b.ca=(this||qe).ca;b.ciphers=(this||qe).ciphers;b.rejectUnauthorized=(this||qe).rejectUnauthorized;b.requestTimeout=(this||qe).requestTimeout;b.extraHeaders=(this||qe).extraHeaders;return new El(b)};QB.prototype.doWrite=function(b,e){b=this.request({method:"POST",data:b,isBinary:"string"!==typeof b&&void 0!==b});var l=this||qe;b.on("success",e);b.on("error",function(a){l.onError("xhr post error",a)});(this||qe).sendXhr=
b};QB.prototype.doPoll=function(){bT("xhr poll");var b=this.request(),e=this||qe;b.on("data",function(l){e.onData(l)});b.on("error",function(l){e.onError("xhr poll error",l)});(this||qe).pollXhr=b};sA(El.prototype);El.prototype.create=function(){var b={agent:(this||qe).agent,xdomain:(this||qe).xd,xscheme:(this||qe).xs,enablesXDR:(this||qe).enablesXDR};b.pfx=(this||qe).pfx;b.key=(this||qe).key;b.passphrase=(this||qe).passphrase;b.cert=(this||qe).cert;b.ca=(this||qe).ca;b.ciphers=(this||qe).ciphers;
b.rejectUnauthorized=(this||qe).rejectUnauthorized;var e=(this||qe).xhr=new VS(b),l=this||qe;try{bT("xhr open %s: %s",(this||qe).method,(this||qe).uri);e.open((this||qe).method,(this||qe).uri,(this||qe).async);try{if((this||qe).extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var a in(this||qe).extraHeaders)(this||qe).extraHeaders.hasOwnProperty(a)&&e.setRequestHeader(a,(this||qe).extraHeaders[a])}}catch(f){}if("POST"===(this||qe).method)try{(this||qe).isBinary?e.setRequestHeader("Content-type",
"application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(f){}try{e.setRequestHeader("Accept","*/*")}catch(f){}"withCredentials"in e&&(e.withCredentials=(this||qe).withCredentials);(this||qe).requestTimeout&&(e.timeout=(this||qe).requestTimeout);this.hasXDR()?(e.onload=function(){l.onLoad()},e.onerror=function(){l.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var f=e.getResponseHeader("Content-Type");if(l.supportsBinary&&"application/octet-stream"===
f||"application/octet-stream; charset=UTF-8"===f)e.responseType="arraybuffer"}catch(m){}if(4===e.readyState)if(200===e.status||1223===e.status)l.onLoad();else setTimeout(function(){l.onError("number"===typeof e.status?e.status:0)},0)};bT("xhr data %s",(this||qe).data);e.send((this||qe).data)}catch(f){setTimeout(function(){l.onError(f)},0);return}"undefined"!==typeof document&&((this||qe).index=El.requestsCount++,El.requests[(this||qe).index]=this||qe)};El.prototype.onSuccess=function(){this.emit("success");
this.cleanup()};El.prototype.onData=function(b){this.emit("data",b);this.onSuccess()};El.prototype.onError=function(b){this.emit("error",b);this.cleanup(!0)};El.prototype.cleanup=function(b){if("undefined"!==typeof(this||qe).xhr&&null!==(this||qe).xhr){this.hasXDR()?(this||qe).xhr.onload=(this||qe).xhr.onerror=U0:(this||qe).xhr.onreadystatechange=U0;if(b)try{(this||qe).xhr.abort()}catch(e){}"undefined"!==typeof document&&delete El.requests[(this||qe).index];(this||qe).xhr=null}};El.prototype.onLoad=
function(){try{try{var b=(this||qe).xhr.getResponseHeader("Content-Type")}catch(l){}var e="application/octet-stream"===b||"application/octet-stream; charset=UTF-8"===b?(this||qe).xhr.response||(this||qe).xhr.responseText:(this||qe).xhr.responseText}catch(l){this.onError(l)}if(null!=e)this.onData(e)};El.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!(this||qe).xs&&(this||qe).enablesXDR};El.prototype.abort=function(){this.cleanup()};El.requestsCount=0;El.requests={};"undefined"!==
typeof document&&("function"===typeof attachEvent?attachEvent("onunload",W0):"function"===typeof addEventListener&&addEventListener("onpagehide"in US?"pagehide":"unload",W0,!1));var zna=aT,Ana={},Bna=[].indexOf,cT=Ana=function(b,e){if(Bna)return b.indexOf(e);for(var l=0;l<b.length;++l)if(b[l]===e)return l;return-1},hi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,u6={},GP=t6,X0=US;u6=RB;var Cna=/\n/g,Dna=/\\n/g,RI;KL(RB,GP);RB.prototype.supportsBinary=!1;RB.prototype.doClose=
function(){(this||hi).script&&((this||hi).script.parentNode.removeChild((this||hi).script),(this||hi).script=null);(this||hi).form&&((this||hi).form.parentNode.removeChild((this||hi).form),(this||hi).form=null,(this||hi).iframe=null);GP.prototype.doClose.call(this||hi)};RB.prototype.doPoll=function(){var b=this||hi,e=document.createElement("script");(this||hi).script&&((this||hi).script.parentNode.removeChild((this||hi).script),(this||hi).script=null);e.async=!0;e.src=this.uri();e.onerror=function(a){b.onError("jsonp poll error",
a)};var l=document.getElementsByTagName("script")[0];l?l.parentNode.insertBefore(e,l):(document.head||document.body).appendChild(e);(this||hi).script=e;"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};RB.prototype.doWrite=function(b,e){function l(){a();e()}function a(){if(f.iframe)try{f.form.removeChild(f.iframe)}catch(v){f.onError("jsonp polling iframe removal error",
v)}try{u=document.createElement('<iframe src="javascript:0" name="'+f.iframeId+'">')}catch(v){u=document.createElement("iframe"),u.name=f.iframeId,u.src="javascript:0"}u.id=f.iframeId;f.form.appendChild(u);f.iframe=u}var f=this||hi;if(!(this||hi).form){var m=document.createElement("form"),q=document.createElement("textarea"),r=(this||hi).iframeId="eio_iframe_"+(this||hi).index,u;m.className="socketio";m.style.position="absolute";m.style.top="-1000px";m.style.left="-1000px";m.target=r;m.method="POST";
m.setAttribute("accept-charset","utf-8");q.name="d";m.appendChild(q);document.body.appendChild(m);(this||hi).form=m;(this||hi).area=q}(this||hi).form.action=this.uri();a();b=b.replace(Dna,"\\\n");(this||hi).area.value=b.replace(Cna,"\\n");try{(this||hi).form.submit()}catch(v){}(this||hi).iframe.attachEvent?(this||hi).iframe.onreadystatechange=function(){"complete"===f.iframe.readyState&&l()}:(this||hi).iframe.onload=l};var Ena=u6,Fna=Object.freeze({}),Vf="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof self?self:global,v6={},Gna=eh.Buffer,HP=$S,Hna=Di,Ina=nw("engine.io-client:websocket"),SI;"undefined"!==typeof WebSocket?SI=WebSocket:"undefined"!==typeof self&&(SI=self.WebSocket||self.MozWebSocket);if("undefined"===typeof window)try{var Y0=Fna}catch(b){}var SB=SI||Y0;v6=Zq;KL(Zq,HP);Zq.prototype.name="websocket";Zq.prototype.supportsBinary=!0;Zq.prototype.doOpen=function(){if(this.check()){var b=this.uri(),e=(this||Vf).protocols,l={};(this||Vf).isReactNative||(l.agent=(this||
Vf).agent,l.perMessageDeflate=(this||Vf).perMessageDeflate,l.pfx=(this||Vf).pfx,l.key=(this||Vf).key,l.passphrase=(this||Vf).passphrase,l.cert=(this||Vf).cert,l.ca=(this||Vf).ca,l.ciphers=(this||Vf).ciphers,l.rejectUnauthorized=(this||Vf).rejectUnauthorized);(this||Vf).extraHeaders&&(l.headers=(this||Vf).extraHeaders);(this||Vf).localAddress&&(l.localAddress=(this||Vf).localAddress);try{(this||Vf).ws=(this||Vf).usingBrowserWebSocket&&!(this||Vf).isReactNative?e?new SB(b,e):new SB(b):new SB(b,e,l)}catch(a){return this.emit("error",
a)}void 0===(this||Vf).ws.binaryType&&((this||Vf).supportsBinary=!1);(this||Vf).ws.supports&&(this||Vf).ws.supports.binary?((this||Vf).supportsBinary=!0,(this||Vf).ws.binaryType="nodebuffer"):(this||Vf).ws.binaryType="arraybuffer";this.addEventListeners()}};Zq.prototype.addEventListeners=function(){var b=this||Vf;(this||Vf).ws.onopen=function(){b.onOpen()};(this||Vf).ws.onclose=function(){b.onClose()};(this||Vf).ws.onmessage=function(e){b.onData(e.data)};(this||Vf).ws.onerror=function(e){b.onError("websocket error",
e)}};Zq.prototype.write=function(b){function e(){l.emit("flush");setTimeout(function(){l.writable=!0;l.emit("drain")},0)}var l=this||Vf;(this||Vf).writable=!1;for(var a=b.length,f=0,m=a;f<m;f++)(function(q){Hna.encodePacket(q,l.supportsBinary,function(r){if(!l.usingBrowserWebSocket){var u={};q.options&&(u.compress=q.options.compress);l.perMessageDeflate&&("string"===typeof r?Gna.byteLength(r):r.length)<l.perMessageDeflate.threshold&&(u.compress=!1)}try{l.usingBrowserWebSocket?l.ws.send(r):l.ws.send(r,
u)}catch(v){Ina("websocket closed before onclose event")}--a||e()})})(b[f])};Zq.prototype.onClose=function(){HP.prototype.onClose.call(this||Vf)};Zq.prototype.doClose=function(){"undefined"!==typeof(this||Vf).ws&&(this||Vf).ws.close()};Zq.prototype.uri=function(){var b=(this||Vf).query||{},e=(this||Vf).secure?"wss":"ws",l="";(this||Vf).port&&("wss"===e&&443!==Number((this||Vf).port)||"ws"===e&&80!==Number((this||Vf).port))&&(l=":"+(this||Vf).port);(this||Vf).timestampRequests&&(b[(this||Vf).timestampParam]=
p6());(this||Vf).supportsBinary||(b.b64=1);b=JL.encode(b);b.length&&(b="?"+b);var a=-1!==(this||Vf).hostname.indexOf(":");return e+"://"+(a?"["+(this||Vf).hostname+"]":(this||Vf).hostname)+l+(this||Vf).path+b};Zq.prototype.check=function(){return!!SB&&!("__initialize"in SB&&(this||Vf).name===Zq.prototype.name)};var LL={},Jna=v6;LL.polling=function(b){var e=!1,l=!1,a=!1!==b.jsonp;"undefined"!==typeof location&&(l="https:"===location.protocol,(e=location.port)||(e=l?443:80),e=b.hostname!==location.hostname||
e!==b.port,l=b.secure!==l);b.xdomain=e;b.xscheme=l;if("open"in new VS(b)&&!b.forceJSONP)return new zna(b);if(!a)throw Error("JSONP disabled");return new Ena(b)};LL.websocket=Jna;var bd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,w6={},el=nw("engine.io-client:socket"),x6=Di,Z0=d6,Nca=JL;w6=ii;ii.priorWebsocketSuccess=!1;sA(ii.prototype);ii.protocol=x6.protocol;ii.Socket=ii;ii.Transport=$S;ii.transports=LL;ii.parser=Di;ii.prototype.createTransport=function(b){el('creating transport "%s"',
b);var e=(this||bd).query,l={},a;for(a in e)e.hasOwnProperty(a)&&(l[a]=e[a]);l.EIO=x6.protocol;l.transport=b;e=(this||bd).transportOptions[b]||{};(this||bd).id&&(l.sid=(this||bd).id);return new LL[b]({query:l,socket:this||bd,agent:e.agent||(this||bd).agent,hostname:e.hostname||(this||bd).hostname,port:e.port||(this||bd).port,secure:e.secure||(this||bd).secure,path:e.path||(this||bd).path,forceJSONP:e.forceJSONP||(this||bd).forceJSONP,jsonp:e.jsonp||(this||bd).jsonp,forceBase64:e.forceBase64||(this||
bd).forceBase64,enablesXDR:e.enablesXDR||(this||bd).enablesXDR,withCredentials:e.withCredentials||(this||bd).withCredentials,timestampRequests:e.timestampRequests||(this||bd).timestampRequests,timestampParam:e.timestampParam||(this||bd).timestampParam,policyPort:e.policyPort||(this||bd).policyPort,pfx:e.pfx||(this||bd).pfx,key:e.key||(this||bd).key,passphrase:e.passphrase||(this||bd).passphrase,cert:e.cert||(this||bd).cert,ca:e.ca||(this||bd).ca,ciphers:e.ciphers||(this||bd).ciphers,rejectUnauthorized:e.rejectUnauthorized||
(this||bd).rejectUnauthorized,perMessageDeflate:e.perMessageDeflate||(this||bd).perMessageDeflate,extraHeaders:e.extraHeaders||(this||bd).extraHeaders,forceNode:e.forceNode||(this||bd).forceNode,localAddress:e.localAddress||(this||bd).localAddress,requestTimeout:e.requestTimeout||(this||bd).requestTimeout,protocols:e.protocols||void 0,isReactNative:(this||bd).isReactNative})};ii.prototype.open=function(){if((this||bd).rememberUpgrade&&ii.priorWebsocketSuccess&&-1!==(this||bd).transports.indexOf("websocket"))var b=
"websocket";else{if(0===(this||bd).transports.length){var e=this||bd;setTimeout(function(){e.emit("error","No transports available")},0);return}b=(this||bd).transports[0]}(this||bd).readyState="opening";try{b=this.createTransport(b)}catch(l){(this||bd).transports.shift();this.open();return}b.open();this.setTransport(b)};ii.prototype.setTransport=function(b){el("setting transport %s",b.name);var e=this||bd;(this||bd).transport&&(el("clearing existing transport %s",(this||bd).transport.name),(this||
bd).transport.removeAllListeners());(this||bd).transport=b;b.on("drain",function(){e.onDrain()}).on("packet",function(l){e.onPacket(l)}).on("error",function(l){e.onError(l)}).on("close",function(){e.onClose("transport close")})};ii.prototype.probe=function(b){function e(){if(y.onlyBinaryUpgrades){var z=!(this||bd).supportsBinary&&y.transport.supportsBinary;v=v||z}v||(el('probe transport "%s" opened',b),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(B){v||("pong"===B.type&&"probe"===
B.data?(el('probe transport "%s" pong',b),y.upgrading=!0,y.emit("upgrading",u),u&&(ii.priorWebsocketSuccess="websocket"===u.name,el('pausing current transport "%s"',y.transport.name),y.transport.pause(function(){v||"closed"===y.readyState||(el("changing transport and sending upgrade packet"),r(),y.setTransport(u),u.send([{type:"upgrade"}]),y.emit("upgrade",u),u=null,y.upgrading=!1,y.flush())}))):(el('probe transport "%s" failed',b),B=Error("probe error"),B.transport=u.name,y.emit("upgradeError",B)))}))}
function l(){v||(v=!0,r(),u.close(),u=null)}function a(z){var B=Error("probe error: "+z);B.transport=u.name;l();el('probe transport "%s" failed because of error: %s',b,z);y.emit("upgradeError",B)}function f(){a("transport closed")}function m(){a("socket closed")}function q(z){u&&z.name!==u.name&&(el('"%s" works - aborting "%s"',z.name,u.name),l())}function r(){u.removeListener("open",e);u.removeListener("error",a);u.removeListener("close",f);y.removeListener("close",m);y.removeListener("upgrading",
q)}el('probing transport "%s"',b);var u=this.createTransport(b,{probe:1}),v=!1,y=this||bd;ii.priorWebsocketSuccess=!1;u.once("open",e);u.once("error",a);u.once("close",f);this.once("close",m);this.once("upgrading",q);u.open()};ii.prototype.onOpen=function(){el("socket open");(this||bd).readyState="open";ii.priorWebsocketSuccess="websocket"===(this||bd).transport.name;this.emit("open");this.flush();if("open"===(this||bd).readyState&&(this||bd).upgrade&&(this||bd).transport.pause){el("starting upgrade probes");
for(var b=0,e=(this||bd).upgrades.length;b<e;b++)this.probe((this||bd).upgrades[b])}};ii.prototype.onPacket=function(b){if("opening"===(this||bd).readyState||"open"===(this||bd).readyState||"closing"===(this||bd).readyState)switch(el('socket receive: type "%s", data "%s"',b.type,b.data),this.emit("packet",b),this.emit("heartbeat"),b.type){case "open":this.onHandshake(JSON.parse(b.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var e=Error("server error");e.code=b.data;
this.onError(e);break;case "message":this.emit("data",b.data),this.emit("message",b.data)}else el('packet received with socket readyState "%s"',(this||bd).readyState)};ii.prototype.onHandshake=function(b){this.emit("handshake",b);(this||bd).id=b.sid;(this||bd).transport.query.sid=b.sid;(this||bd).upgrades=this.filterUpgrades(b.upgrades);(this||bd).pingInterval=b.pingInterval;(this||bd).pingTimeout=b.pingTimeout;this.onOpen();"closed"!==(this||bd).readyState&&(this.setPing(),this.removeListener("heartbeat",
(this||bd).onHeartbeat),this.on("heartbeat",(this||bd).onHeartbeat))};ii.prototype.onHeartbeat=function(b){clearTimeout((this||bd).pingTimeoutTimer);var e=this||bd;e.pingTimeoutTimer=setTimeout(function(){if("closed"!==e.readyState)e.onClose("ping timeout")},b||e.pingInterval+e.pingTimeout)};ii.prototype.setPing=function(){var b=this||bd;clearTimeout(b.pingIntervalTimer);b.pingIntervalTimer=setTimeout(function(){el("writing ping packet - expecting pong within %sms",b.pingTimeout);b.ping();b.onHeartbeat(b.pingTimeout)},
b.pingInterval)};ii.prototype.ping=function(){var b=this||bd;this.sendPacket("ping",function(){b.emit("ping")})};ii.prototype.onDrain=function(){(this||bd).writeBuffer.splice(0,(this||bd).prevBufferLen);(this||bd).prevBufferLen=0;0===(this||bd).writeBuffer.length?this.emit("drain"):this.flush()};ii.prototype.flush=function(){"closed"!==(this||bd).readyState&&(this||bd).transport.writable&&!(this||bd).upgrading&&(this||bd).writeBuffer.length&&(el("flushing %d packets in socket",(this||bd).writeBuffer.length),
(this||bd).transport.send((this||bd).writeBuffer),(this||bd).prevBufferLen=(this||bd).writeBuffer.length,this.emit("flush"))};ii.prototype.write=ii.prototype.send=function(b,e,l){this.sendPacket("message",b,e,l);return this||bd};ii.prototype.sendPacket=function(b,e,l,a){"function"===typeof e&&(a=e,e=void 0);"function"===typeof l&&(a=l,l=null);if("closing"!==(this||bd).readyState&&"closed"!==(this||bd).readyState){l=l||{};l.compress=!1!==l.compress;b={type:b,data:e,options:l};this.emit("packetCreate",
b);(this||bd).writeBuffer.push(b);if(a)this.once("flush",a);this.flush()}};ii.prototype.close=function(){function b(){a.onClose("forced close");el("socket closing - telling transport to close");a.transport.close()}function e(){a.removeListener("upgrade",e);a.removeListener("upgradeError",e);b()}function l(){a.once("upgrade",e);a.once("upgradeError",e)}if("opening"===(this||bd).readyState||"open"===(this||bd).readyState){(this||bd).readyState="closing";var a=this||bd;if((this||bd).writeBuffer.length)this.once("drain",
function(){(this||bd).upgrading?l():b()});else(this||bd).upgrading?l():b()}return this||bd};ii.prototype.onError=function(b){el("socket error %j",b);ii.priorWebsocketSuccess=!1;this.emit("error",b);this.onClose("transport error",b)};ii.prototype.onClose=function(b,e){if("opening"===(this||bd).readyState||"open"===(this||bd).readyState||"closing"===(this||bd).readyState){el('socket close with reason: "%s"',b);var l=this||bd;clearTimeout((this||bd).pingIntervalTimer);clearTimeout((this||bd).pingTimeoutTimer);
(this||bd).transport.removeAllListeners("close");(this||bd).transport.close();(this||bd).transport.removeAllListeners();(this||bd).readyState="closed";(this||bd).id=null;this.emit("close",b,e);l.writeBuffer=[];l.prevBufferLen=0}};ii.prototype.filterUpgrades=function(b){for(var e=[],l=0,a=b.length;l<a;l++)~cT((this||bd).transports,b[l])&&e.push(b[l]);return e};var dT={};dT=w6;dT.parser=Di;var Kna=dT,Lna={},eT=Lna=function(b,e){for(var l=[],a=(e=e||0)||0;a<b.length;a++)l[a-e]=b[a];return l},Mna={},
y6=[].slice,ow=Mna=function(b,e){"string"==typeof e&&(e=b[e]);if("function"!=typeof e)throw Error("bind() requires a function");var l=y6.call(arguments,2);return function(){return e.apply(b,l.concat(y6.call(arguments)))}},Nna={},Ms=Nna=function(b,e,l){b.on(e,l);return{destroy:function(){b.removeListener(e,l)}}},Ae="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,fT={},$n=zj,Ns=nw("socket.io-client:socket");fT=fT=sk;var Ona={connect:1,connect_error:1,connect_timeout:1,
connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},gT=sA.prototype.emit;sA(sk.prototype);sk.prototype.subEvents=function(){if(!(this||Ae).subs){var b=(this||Ae).io;(this||Ae).subs=[Ms(b,"open",ow(this||Ae,"onopen")),Ms(b,"packet",ow(this||Ae,"onpacket")),Ms(b,"close",ow(this||Ae,"onclose"))]}};sk.prototype.open=sk.prototype.connect=function(){if((this||Ae).connected)return this||Ae;this.subEvents();(this||Ae).io.reconnecting||
(this||Ae).io.open();if("open"===(this||Ae).io.readyState)this.onopen();this.emit("connecting");return this||Ae};sk.prototype.send=function(){var b=eT(arguments);b.unshift("message");(this||Ae).emit.apply(this||Ae,b);return this||Ae};sk.prototype.emit=function(b){if(Ona.hasOwnProperty(b))return gT.apply(this||Ae,arguments),this||Ae;var e=eT(arguments),l={type:(void 0!==(this||Ae).flags.binary?(this||Ae).flags.binary:WS(e))?$n.BINARY_EVENT:$n.EVENT,data:e,options:{}};l.options.compress=!(this||Ae).flags||
!1!==(this||Ae).flags.compress;"function"===typeof e[e.length-1]&&(Ns("emitting packet with ack id %d",(this||Ae).ids),(this||Ae).acks[(this||Ae).ids]=e.pop(),l.id=(this||Ae).ids++);(this||Ae).connected?this.packet(l):(this||Ae).sendBuffer.push(l);(this||Ae).flags={};return this||Ae};sk.prototype.packet=function(b){b.nsp=(this||Ae).nsp;(this||Ae).io.packet(b)};sk.prototype.onopen=function(){Ns("transport is open - connecting");if("/"!==(this||Ae).nsp)if((this||Ae).query){var b="object"===typeof(this||
Ae).query?JL.encode((this||Ae).query):(this||Ae).query;Ns("sending connect packet with query %s",b);this.packet({type:$n.CONNECT,query:b})}else this.packet({type:$n.CONNECT})};sk.prototype.onclose=function(b){Ns("close (%s)",b);(this||Ae).connected=!1;(this||Ae).disconnected=!0;delete (this||Ae).id;this.emit("disconnect",b)};sk.prototype.onpacket=function(b){var e=b.type===$n.ERROR&&"/"===b.nsp;if(b.nsp===(this||Ae).nsp||e)switch(b.type){case $n.CONNECT:this.onconnect();break;case $n.EVENT:this.onevent(b);
break;case $n.BINARY_EVENT:this.onevent(b);break;case $n.ACK:this.onack(b);break;case $n.BINARY_ACK:this.onack(b);break;case $n.DISCONNECT:this.ondisconnect();break;case $n.ERROR:this.emit("error",b.data)}};sk.prototype.onevent=function(b){var e=b.data||[];Ns("emitting event %j",e);null!=b.id&&(Ns("attaching ack callback to event"),e.push(this.ack(b.id)));(this||Ae).connected?gT.apply(this||Ae,e):(this||Ae).receiveBuffer.push(e)};sk.prototype.ack=function(b){var e=this||Ae,l=!1;return function(){if(!l){l=
!0;var a=eT(arguments);Ns("sending ack %j",a);e.packet({type:WS(a)?$n.BINARY_ACK:$n.ACK,id:b,data:a})}}};sk.prototype.onack=function(b){var e=(this||Ae).acks[b.id];"function"===typeof e?(Ns("calling ack %s with %j",b.id,b.data),e.apply(this||Ae,b.data),delete (this||Ae).acks[b.id]):Ns("bad ack %s",b.id)};sk.prototype.onconnect=function(){(this||Ae).connected=!0;(this||Ae).disconnected=!1;this.emit("connect");this.emitBuffered()};sk.prototype.emitBuffered=function(){var b;for(b=0;b<(this||Ae).receiveBuffer.length;b++)gT.apply(this||
Ae,(this||Ae).receiveBuffer[b]);(this||Ae).receiveBuffer=[];for(b=0;b<(this||Ae).sendBuffer.length;b++)this.packet((this||Ae).sendBuffer[b]);(this||Ae).sendBuffer=[]};sk.prototype.ondisconnect=function(){Ns("server disconnect (%s)",(this||Ae).nsp);this.destroy();this.onclose("io server disconnect")};sk.prototype.destroy=function(){if((this||Ae).subs){for(var b=0;b<(this||Ae).subs.length;b++)(this||Ae).subs[b].destroy();(this||Ae).subs=null}(this||Ae).io.destroy(this||Ae)};sk.prototype.close=sk.prototype.disconnect=
function(){(this||Ae).connected&&(Ns("performing disconnect (%s)",(this||Ae).nsp),this.packet({type:$n.DISCONNECT}));this.destroy();if((this||Ae).connected)this.onclose("io client disconnect");return this||Ae};sk.prototype.compress=function(b){(this||Ae).flags.compress=b;return this||Ae};sk.prototype.binary=function(b){(this||Ae).flags.binary=b;return this||Ae};var z6=fT,Sn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,A6={};A6=TB;TB.prototype.duration=function(){var b=
(this||Sn).ms*Math.pow((this||Sn).factor,(this||Sn).attempts++);if((this||Sn).jitter){var e=Math.random(),l=Math.floor(e*(this||Sn).jitter*b);b=0==(Math.floor(10*e)&1)?b-l:b+l}return Math.min(b,(this||Sn).max)|0};TB.prototype.reset=function(){(this||Sn).attempts=0};TB.prototype.setMin=function(b){(this||Sn).ms=b};TB.prototype.setMax=function(b){(this||Sn).max=b};TB.prototype.setJitter=function(b){(this||Sn).jitter=b};var Pna=A6,Qna={},B6=nw("socket.io-client:url"),Rna=Qna=function(b,e){var l=b;e=
e||"undefined"!==typeof location&&location;null==b&&(b=e.protocol+"//"+e.host);"string"===typeof b&&("/"===b.charAt(0)&&(b="/"===b.charAt(1)?e.protocol+b:e.host+b),/^(https?|wss?):\/\//.test(b)||(B6("protocol-less url %s",b),b="undefined"!==typeof e?e.protocol+"//"+b:"https://"+b),B6("parse %s",b),l=d6(b));l.port||(/^(http|ws)$/.test(l.protocol)?l.port="80":/^(http|ws)s$/.test(l.protocol)&&(l.port="443"));l.path=l.path||"/";b=-1!==l.host.indexOf(":")?"["+l.host+"]":l.host;l.id=l.protocol+"://"+b+
":"+l.port;l.href=l.protocol+"://"+b+(e&&e.port===l.port?"":":"+l.port);return l},wd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,C6={},Pca=zj,tn=nw("socket.io-client:manager"),Oca=Pna,D6=Object.prototype.hasOwnProperty;C6=Ei;Ei.prototype.emitAll=function(){(this||wd).emit.apply(this||wd,arguments);for(var b in(this||wd).nsps)D6.call((this||wd).nsps,b)&&(this||wd).nsps[b].emit.apply((this||wd).nsps[b],arguments)};Ei.prototype.updateSocketIds=function(){for(var b in(this||
wd).nsps)D6.call((this||wd).nsps,b)&&((this||wd).nsps[b].id=this.generateId(b))};Ei.prototype.generateId=function(b){return("/"===b?"":b+"#")+(this||wd).engine.id};sA(Ei.prototype);Ei.prototype.reconnection=function(b){if(!arguments.length)return(this||wd)._reconnection;(this||wd)._reconnection=!!b;return this||wd};Ei.prototype.reconnectionAttempts=function(b){if(!arguments.length)return(this||wd)._reconnectionAttempts;(this||wd)._reconnectionAttempts=b;return this||wd};Ei.prototype.reconnectionDelay=
function(b){if(!arguments.length)return(this||wd)._reconnectionDelay;(this||wd)._reconnectionDelay=b;(this||wd).backoff&&(this||wd).backoff.setMin(b);return this||wd};Ei.prototype.randomizationFactor=function(b){if(!arguments.length)return(this||wd)._randomizationFactor;(this||wd)._randomizationFactor=b;(this||wd).backoff&&(this||wd).backoff.setJitter(b);return this||wd};Ei.prototype.reconnectionDelayMax=function(b){if(!arguments.length)return(this||wd)._reconnectionDelayMax;(this||wd)._reconnectionDelayMax=
b;(this||wd).backoff&&(this||wd).backoff.setMax(b);return this||wd};Ei.prototype.timeout=function(b){if(!arguments.length)return(this||wd)._timeout;(this||wd)._timeout=b;return this||wd};Ei.prototype.maybeReconnectOnOpen=function(){!(this||wd).reconnecting&&(this||wd)._reconnection&&0===(this||wd).backoff.attempts&&this.reconnect()};Ei.prototype.open=Ei.prototype.connect=function(b,e){tn("readyState %s",(this||wd).readyState);if(~(this||wd).readyState.indexOf("open"))return this||wd;tn("opening %s",
(this||wd).uri);(this||wd).engine=Kna((this||wd).uri,(this||wd).opts);var l=(this||wd).engine,a=this||wd;(this||wd).readyState="opening";(this||wd).skipReconnect=!1;var f=Ms(l,"open",function(){a.onopen();b&&b()});e=Ms(l,"error",function(r){tn("connect_error");a.cleanup();a.readyState="closed";a.emitAll("connect_error",r);if(b){var u=Error("Connection error");u.data=r;b(u)}else a.maybeReconnectOnOpen()});if(!1!==(this||wd)._timeout){var m=(this||wd)._timeout;tn("connect attempt will timeout after %d",
m);0===m&&f.destroy();var q=setTimeout(function(){tn("connect attempt timed out after %d",m);f.destroy();l.close();l.emit("error","timeout");a.emitAll("connect_timeout",m)},m);(this||wd).subs.push({destroy:function(){clearTimeout(q)}})}(this||wd).subs.push(f);(this||wd).subs.push(e);return this||wd};Ei.prototype.onopen=function(){tn("open");this.cleanup();(this||wd).readyState="open";this.emit("open");var b=(this||wd).engine;(this||wd).subs.push(Ms(b,"data",ow(this||wd,"ondata")));(this||wd).subs.push(Ms(b,
"ping",ow(this||wd,"onping")));(this||wd).subs.push(Ms(b,"pong",ow(this||wd,"onpong")));(this||wd).subs.push(Ms(b,"error",ow(this||wd,"onerror")));(this||wd).subs.push(Ms(b,"close",ow(this||wd,"onclose")));(this||wd).subs.push(Ms((this||wd).decoder,"decoded",ow(this||wd,"ondecoded")))};Ei.prototype.onping=function(){(this||wd).lastPing=new Date;this.emitAll("ping")};Ei.prototype.onpong=function(){this.emitAll("pong",new Date-(this||wd).lastPing)};Ei.prototype.ondata=function(b){(this||wd).decoder.add(b)};
Ei.prototype.ondecoded=function(b){this.emit("packet",b)};Ei.prototype.onerror=function(b){tn("error",b);this.emitAll("error",b)};Ei.prototype.socket=function(b,e){function l(){~cT(f.connecting,a)||f.connecting.push(a)}var a=(this||wd).nsps[b];if(!a){a=new z6(this||wd,b,e);(this||wd).nsps[b]=a;var f=this||wd;a.on("connecting",l);a.on("connect",function(){a.id=f.generateId(b)});(this||wd).autoConnect&&l()}return a};Ei.prototype.destroy=function(b){b=cT((this||wd).connecting,b);~b&&(this||wd).connecting.splice(b,
1);(this||wd).connecting.length||this.close()};Ei.prototype.packet=function(b){tn("writing packet %j",b);var e=this||wd;b.query&&0===b.type&&(b.nsp+="?"+b.query);e.encoding?e.packetBuffer.push(b):(e.encoding=!0,(this||wd).encoder.encode(b,function(l){for(var a=0;a<l.length;a++)e.engine.write(l[a],b.options);e.encoding=!1;e.processPacketQueue()}))};Ei.prototype.processPacketQueue=function(){if(0<(this||wd).packetBuffer.length&&!(this||wd).encoding){var b=(this||wd).packetBuffer.shift();this.packet(b)}};
Ei.prototype.cleanup=function(){tn("cleanup");for(var b=(this||wd).subs.length,e=0;e<b;e++)(this||wd).subs.shift().destroy();(this||wd).packetBuffer=[];(this||wd).encoding=!1;(this||wd).lastPing=null;(this||wd).decoder.destroy()};Ei.prototype.close=Ei.prototype.disconnect=function(){tn("disconnect");(this||wd).skipReconnect=!0;(this||wd).reconnecting=!1;"opening"===(this||wd).readyState&&this.cleanup();(this||wd).backoff.reset();(this||wd).readyState="closed";(this||wd).engine&&(this||wd).engine.close()};
Ei.prototype.onclose=function(b){tn("onclose");this.cleanup();(this||wd).backoff.reset();(this||wd).readyState="closed";this.emit("close",b);(this||wd)._reconnection&&!(this||wd).skipReconnect&&this.reconnect()};Ei.prototype.reconnect=function(){if((this||wd).reconnecting||(this||wd).skipReconnect)return this||wd;var b=this||wd;if((this||wd).backoff.attempts>=(this||wd)._reconnectionAttempts)tn("reconnect failed"),(this||wd).backoff.reset(),this.emitAll("reconnect_failed"),(this||wd).reconnecting=
!1;else{var e=(this||wd).backoff.duration();tn("will wait %dms before reconnect attempt",e);(this||wd).reconnecting=!0;var l=setTimeout(function(){b.skipReconnect||(tn("attempting reconnect"),b.emitAll("reconnect_attempt",b.backoff.attempts),b.emitAll("reconnecting",b.backoff.attempts),b.skipReconnect||b.open(function(a){a?(tn("reconnect attempt error"),b.reconnecting=!1,b.reconnect(),b.emitAll("reconnect_error",a.data)):(tn("reconnect success"),b.onreconnect())}))},e);(this||wd).subs.push({destroy:function(){clearTimeout(l)}})}};
Ei.prototype.onreconnect=function(){var b=(this||wd).backoff.attempts;(this||wd).reconnecting=!1;(this||wd).backoff.reset();this.updateSocketIds();this.emitAll("reconnect",b)};var E6=C6,gy={},Qca=Rna,Sna=zj,b1=E6,a1=nw("socket.io-client");gy=gy=$0;var pE=gy.managers={};gy.protocol=Sna.protocol;gy.connect=$0;gy.Manager=E6;gy.Socket=z6;var Tna=gy,Yf=lively.FreezerRuntime.recorderFor("lively.2lively/client.js");Yf.determineLocation=function(){return"undefined"!==typeof document&&document.location?System.baseURL||
document.location.origin:Yf.isNode?System._nodeRequire("os").hostname():System.baseURL};Yf.promise=oe;Yf.fun=Zk;Yf.obj=lf;Yf.events=Gx;Yf.num=Gk;Yf.L2LConnection=qj;Yf.defaultActions=CL;Yf.defaultClientActions=DL;Yf.isNode="undefined"!==typeof System?System.get("@system-env").node:"undefined"!==typeof Yf.process&&Yf.process.env;Yf._ioClient=Tna;Yf.resource=x;Yf.ioClient=Yf.ioClient||void 0;Yf.isNode?(Yf.require=System._nodeRequire("module")._load,Yf.ioClient=Yf.require("socket.io-client")):Yf.ioClient=
Yf._ioClient;Yf.urlHelper={isRoot:function(b){return"/"===Yf.urlHelper.path(b)},root:function(b){return Yf.urlHelper.isRoot(b)?b:b.slice(0,-Yf.urlHelper.path(b).length)+"/"},path:function(){var b=/^[a-z0-9-_\.]+:/,e=/^\/\/[^\/]+/;return function(l){l=l.replace(b,"").replace(e,"");return""===l?"/":l}}(),join:function(b,e){b.endsWith("/")&&(b=b.slice(0,-1));e.startsWith("/")&&(e=e.slice(1));return b+"/"+e}};var aj=function(b,e,l,a){var f=Yf.L2LConnection.call(this)||this;Yf.events.makeEmitter(f);f.info=
a;f.origin=b;f.path=e;f.namespace=l.replace(/^\/?/,"/");f.trackerId=null;f._socketioClient=null;f._reconnectState={closed:!1,autoReconnect:!0,isReconnecting:!1,isReconnectingViaSocketio:!1,registerAttempt:0,registerProcess:null,isOpening:!1};Object.keys(Yf.defaultActions).forEach(function(m){return f.addService(m,Yf.defaultActions[m])});Object.keys(Yf.defaultClientActions).forEach(function(m){return f.addService(m,Yf.defaultClientActions[m])});return f};$jscomp.inherits(aj,Yf.L2LConnection);aj.clientKey=
function(b,e,l){b=b.replace(/\/$/,"");e=e.replace(/^\//,"");l=l.replace(/^\//,"");return b+"-"+e+"-"+l};aj.forLivelyInBrowser=function(b){var e=!!b;b=Object.assign({type:"lively.morphic browser"},b);var l=this.default();if(!l)return Yf.L2LClient.ensure({url:Yf.resource(Yf.determineLocation()).join("/lively-socket.io").url,namespace:"l2l",info:b});e&&!Yf.obj.equals(l.info,b)&&l.isRegistered()&&(l.info=b,l.unregister().then(function(){return l.register()}).catch(function(a){return console.error("l2l re-register on info change errored: "+
a)}));return l};aj.default=function(){var b=Yf.L2LClient.clients.keys().next().value;return Yf.L2LClient.clients.get(b)};aj.create=function(b){var e=b=void 0===b?{}:b;b=void 0===e.debug?!1:e.debug;var l=e.url,a=e.namespace,f=void 0===e.autoOpen?!0:e.autoOpen;e=void 0===e.info?{}:e.info;if(!l)throw Error("L2LClient needs server url!");var m=Yf.urlHelper.root(l).replace(/\/+$/,"");l=Yf.urlHelper.path(l);a=new this(m,l,a||"",e);f&&a.register();a.debug=b;return a};aj.ensure=function(b){var e=b=void 0===
b?{}:b,l=e.url;e=e.namespace;if(!l)throw Error("L2LClient needs server url!");var a=Yf.urlHelper.root(l).replace(/\/+$/,""),f=Yf.urlHelper.path(l);a=this.clientKey(a,f,e||"");(f=this.clients.get(a))||this.clients.set(a,f=this.create(Object.assign({},b,{url:l,namespace:e})));return f};aj.prototype.isOnline=function(){return this.socket&&this.socket.connected};aj.prototype.isRegistered=function(){return this.isOnline()&&!!this.trackerId};aj.prototype.open=function(){var b=this,e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return b.isOnline()||b._reconnectState.isOpening?f.return(b):f.yield(b.close(),2);b._reconnectState.closed=!1;e=Yf.urlHelper.join(b.origin,b.namespace);l={path:b.path,transports:["websocket","polling"]};a=b._socketioClient=Yf.ioClient(e,l);b.debug&&console.log("["+b+"] connecting");a.on("error",function(m){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] errored: "+m)});a.on("close",function(m){return b.debug&&console.log("["+b+"] closed: "+m)});a.on("reconnect_failed",function(){return b.debug&&
console.log("["+b+"] could not reconnect")});a.on("reconnect_error",function(m){return b.debug&&console.log("["+b+"] reconnect error "+m)});a.on("connect",function(){b.debug&&console.log("["+b+"] connected");b.emit("connected",b);b._reconnectState.isOpening=!1;b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=!1});a.on("disconnect",function(){b._reconnectState.isOpening=!1;b.debug&&console.log("["+b+"] disconnected");b.emit("disconnected",b);b.trackerId?("tracker"!==
b.trackerId&&(b.renameTarget(b.trackerId,"tracker"),b.trackerId=null),b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed"):b._reconnectState.autoReconnect?(b._reconnectState.isReconnecting=!0,setTimeout(function(){b._reconnectState.closed?b.debug&&console.log("["+b+"] won't reconnect b/c client is marked as closed 2"):b._reconnectState.isReconnectingViaSocketio?b.debug&&console.log("["+b+"] won't reconnect again, client already reconnecting"):(b.debug&&
console.log("["+b+"] initiating reconnection to tracker"),b.register())},20)):b.debug&&console.log("["+b+"] won't reconnect b/c client has reconnection disabled")):(b.debug&&console.log("["+b+"] disconnect: don't have a tracker id, won't try reconnect"),b.trackerId="tracker")});a.on("reconnecting",function(){b.debug&&console.log("["+b+"] reconnecting",b._reconnectState);b.emit("reconnecting",b);b._reconnectState.closed?(b._reconnectState.isReconnecting=!1,b._reconnectState.isReconnectingViaSocketio=
!1,a.close(),b.close()):(b._reconnectState.isReconnecting=!0,b._reconnectState.isReconnectingViaSocketio=!0)});a.on("reconnect",function(){b.debug&&console.log("["+b+"] reconnected");b._reconnectState.isReconnecting=!1;b._reconnectState.isReconnectingViaSocketio=!1;b.register();if(b.onReconnect&&"function"===typeof b.onReconnect)b.onReconnect()});b.installEventToMessageTranslator(a);b._reconnectState.isOpening=!0;return f.return((new Promise(function(m,q){a.once("error",q);a.once("connect",m)})).then(function(){return b}))})};
aj.prototype.onReconnect=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=(new Date).toLocaleDateString();console.log("Reconnected at "+b);e.jumpToEnd()})};aj.prototype.close=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress){b._reconnectState.closed=!0;if(e=b.socket)e.removeAllListeners("reconnect"),e.removeAllListeners("reconnecting"),e.removeAllListeners("disconnect"),e.removeAllListeners("connect"),e.removeAllListeners("reconnect_error"),
e.removeAllListeners("reconnect_failed"),e.removeAllListeners("close"),e.removeAllListeners("error"),e.close();b.debug&&console.log("["+b+"] closing...");return b.isRegistered()?a.yield(b.unregister(),2):a.jumpTo(2)}return b.isOnline()||b.socket?e&&!e.connected?(b.debug&&console.log("["+b+"] socket not connected, considering client closed"),a.return(b)):a.return(Promise.race([Yf.promise.delay(2E3).then(function(){return e.removeAllListeners("disconnect")}),new Promise(function(f){return e.once("disconnect",
f)})]).then(function(){b.debug&&console.log("["+b+"] closed");return b})):(b.debug&&(l=b.isOnline()?"no socket":"not online",b.debug&&console.log("["+b+"] cannot close: "+l)),a.return(b))})};aj.prototype.remove=function(){var b=this.constructor.clientKey(this.origin,this.path,this.namespace);this.constructor.clients.delete(b);return this.close()};aj.prototype.register=function(){var b=this,e,l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:if(b.isRegistered())return z.return();
if(b._reconnectState.closed)return b.debug&&console.log("["+b+"] not registering this b/c closed"),b._reconnectState.registerAttempt=0,z.return();if(b._reconnectState.registerProcess)return b.debug&&console.log("["+b+"] not registering this b/c register process exists"),z.return();z.setCatchFinallyBlocks(2);if(b.isOnline()){z.jumpTo(4);break}return z.yield(b.open(),4);case 4:return b.debug&&console.log("["+b+"] register"),z.yield(b.sendToAndWait("tracker","register",Object.assign({userName:"unknown",
type:"l2l "+(Yf.isNode?"node":"browser"),location:Yf.determineLocation()},b.info)),6);case 6:e=z.yieldResult;if(!e.data)throw l=Error("Register answer is empty!"),b.emit("error",l),l;if(e.data.isError)throw a=Error(e.data.error),b.emit("error",a),a;b._reconnectState.registerAttempt=0;f=e;m=f.data;q=m.trackerId;r=m.messageNumber;b.trackerId=q;b._incomingOrderNumberingBySenders.set(q,r||0);b.emit("registered",{trackerId:q});z.leaveTryBlock(0);break;case 2:u=z.enterCatchBlock(),console.error("Error in register request of "+
b+": "+u),v=b._reconnectState.registerAttempt++,y=Yf.num.backoff(v,4,3E5),b._reconnectState.registerProcess=setTimeout(function(){b._reconnectState.registerProcess=null;b.register()},y),z.jumpToEnd()}})};aj.prototype.unregister=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:if(!b.isRegistered())return l.return();b.debug&&console.log("["+b+"] unregister");e=b.trackerId;l.setCatchFinallyBlocks(2);return l.yield(b.sendToAndWait(b.trackerId,
"unregister",{}),4);case 4:l.leaveTryBlock(3);break;case 2:l.enterCatchBlock();case 3:b.renameTarget(e,"tracker"),b.trackerId=null,b.emit("unregistered",b),l.jumpToEnd()}})};aj.prototype.whenRegistered=function(b){var e=this;return Yf.promise.waitFor(b,function(){return e.isRegistered()}).catch(function(l){return Promise.reject(/timeout/i.test(String(l))?Error("Timeout in "+e+".whenRegistered"):l)})};aj.prototype.send=function(b,e){var l=this,a=$jscomp.makeIterator(this.prepareSend(b,e));b=a.next().value;
e=a.next().value;this.whenOnline().then(function(){var f=l.socket,m=b,q=m.action;m=m.target;if(!f)throw Error("Trying to send message "+q+" to "+m+" but cannot find a connection to it!");"function"===typeof e?f.emit(q,b,e):f.emit(q,b)})};aj.prototype.joinRoom=function(b){var e=this;return this.whenOnline().then(function(){return e.sendToAndWait(e.trackerId,"[broadcast] join room",{room:b})})};aj.prototype.leaveRoom=function(b){var e=this;return this.whenOnline().then(function(){return e.sendToAndWait(e.trackerId,
"[broadcast] leave room",{room:b})})};aj.prototype.broadcast=function(b,e,l,a,f){var m=this,q={action:e,room:b,broadcast:l};if(void 0===a?0:a)q.isSystemBroadcast=!0;if(void 0===f?0:f)q.isMultiServerBroadcast=!0;return this.whenOnline().then(function(){return m.sendToAndWait(m.trackerId,"[broadcast] send",q)})};aj.prototype.listRoomMembers=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(e.sendToAndWait(e.trackerId,"[broadcast] list room members",
{room:b}),2);l=f.yieldResult;a=l.data;return f.return(a)})};aj.prototype.joinedRooms=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,"[broadcast] my rooms",{}),2);e=a.yieldResult;l=e.data;return a.return(l)})};aj.prototype.listRooms=function(){var b=this,e,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==a.nextAddress)return a.yield(b.sendToAndWait(b.trackerId,"[broadcast] all rooms",
{}),2);e=a.yieldResult;l=e.data;return a.return(l)})};aj.prototype.listPeers=function(b){b=void 0===b?!1:b;var e=this,l,a,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return l=e,a=l._peersCached,f=Date.now(),!b&&a&&1E3>f-a.timestamp?u.return(e._peersCached.sessions):e.isOnline()?u.yield(e.sendToAndWait(e.trackerId,"getClients",{}),2):u.return([]);m=u.yieldResult;q=m.data;r=q.map(function(v){var y=$jscomp.makeIterator(v);v=y.next().value;var z=y.next().value,
B=z.info||{};y=B.userRealm;var C=B.userToken,G=B.l2lUserToken,F=B.location,N=B.type;B=B.world;v=Object.assign({},Yf.obj.dissoc(z,["info"]),{id:v,world:B,location:F,type:N});(C=C||G)&&"null"!==C&&(lively.user?v.user=lively.user.ClientUser.fromToken(C,y):(v.userToken=C,v.userRealm=y));return v});e._peersCached={timestamp:f,sessions:r};return u.return(r)})};aj.prototype.toString=function(){var b=this.origin,e=this.path,l=this.namespace,a=this.id,f=this.isOnline()?this.isRegistered()?"registered":"unregistered":
"disconnected";return"L2LClient("+(a||"").slice(0,5)+" "+b+e+" - "+l+" "+f+")"};$jscomp.global.Object.defineProperties(aj.prototype,{socket:{configurable:!0,enumerable:!0,get:function(){return this._socketioClient}},socketId:{configurable:!0,enumerable:!0,get:function(){return this.socket?this.socket.id:null}}});$jscomp.global.Object.defineProperties(aj,{clients:{configurable:!0,enumerable:!0,get:function(){return this._clients||(this._clients=new Map)}}});Yf.L2LClient=aj;Yf.default=aj;var F6=Object.freeze({__proto__:null,
"default":aj});wa("bW",F6);var tA=lively.FreezerRuntime.recorderFor("lively.shell/command-interface.js");tA.promise=oe;tA.events=Gx;var Rp=function(){this._stderr=this._stdout="";this.exitCode=void 0;this.commandString="";this.process=null;this._whenDone=tA.promise.deferred();this._whenStarted=tA.promise.deferred();this.startTime=0;this.lastSignal=null;tA.events.makeEmitter(this)};Rp.findCommand=function(b){return this.commands.find(function(e){return e.pid===b})};Rp.prototype.isRunning=function(){return this.process&&
void 0===this.exitCode};Rp.prototype.isDone=function(){return void 0!=this.exitCode};Rp.prototype.whenStarted=function(){return this._whenStarted.promise};Rp.prototype.whenDone=function(){return this._whenDone.promise};Rp.prototype.spawn=function(b){throw Error("not yet implemented");};Rp.prototype.kill=function(b){this.lastSignal=void 0===b?"KILL":b};Rp.prototype.toString=function(){return this.constructor.name+"("+this.commandString+", "+this.status+")"};$jscomp.global.Object.defineProperties(Rp.prototype,
{isShellCommand:{configurable:!0,enumerable:!0,get:function(){return!0}},status:{configurable:!0,enumerable:!0,get:function(){return this.process?void 0===this.exitCode?"running, pid "+this.pid:"exited "+this.exitCode+", pid "+this.pid:"not started"}},pid:{configurable:!0,enumerable:!0,get:function(){return this.process?this.process.pid:null}},output:{configurable:!0,enumerable:!0,get:function(){return this.stdout+(this.stderr?"\n"+this.stderr:"")}},stdout:{configurable:!0,enumerable:!0,get:function(){return this._stdout}},
stderr:{configurable:!0,enumerable:!0,get:function(){return this._stderr}}});$jscomp.global.Object.defineProperties(Rp,{commands:{configurable:!0,enumerable:!0,get:function(){return this._commands||(this._commands=[])}}});tA.CommandInterface=Rp;tA.default=Rp;var Qf=lively.FreezerRuntime.recorderFor("lively.shell/client-command.js");Qf.runCommand=Ez;Qf.defaultDirectory=qE;Qf.env=rE;Qf.readFile=TI;Qf.writeFile=UI;Qf.CommandInterface=Rp;Qf.promise=oe;Qf.arr=Qe;Qf.obj=lf;Qf.signal=oj;Qf.debug=!1;Qf.runCommand=
Ez;Qf.runCommand=Ez;Qf.dirCache={};Qf.defaultDirectory=qE;Qf.defaultDirectory=qE;Qf.env=rE;Qf.env=rE;Qf.readFile=TI;Qf.readFile=TI;Qf.writeFile=UI;Qf.writeFile=UI;var ur=function(b){var e=Qf.CommandInterface.call(this)||this;e.debug=Qf.debug;e.l2lClient=b;return e};$jscomp.inherits(ur,Qf.CommandInterface);ur.installLively2LivelyServices=function(b){Object.keys(Qf.L2LServices).forEach(function(e){return b.addService(e,function(l,a,f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(Qf.L2LServices[e](l,
a,f))})})})};ur.prototype.envForCommand=function(b){var e=this.l2lClient,l=e.id,a=e.origin,f=e.path;e=e.namespace;var m=b||{};b=m.env;m=m.owner;b=b||{};m&&(b.LIVELY_COMMAND_OWNER=m);return Object.assign({ASKPASS_SESSIONID:l,L2L_EDITOR_SESSIONID:l,L2L_SESSIONTRACKER_SERVER:a,L2L_SESSIONTRACKER_PATH:f,L2L_SESSIONTRACKER_NS:e},b)};ur.prototype.spawn=function(b){b=void 0===b?{command:null,env:{},cwd:null,stdin:null}:b;var e=this,l,a,f,m,q,r,u,v,y,z,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==
C.nextAddress)return l=e,a=l.l2lClient,f=b,m=f.command,q=f.env,r=f.cwd,u=f.stdin,e.startTime=new Date,q=e.envForCommand(b),e.debug&&console.log(e+" spawning "+m),e.debug&&e.whenStarted().then(function(){return console.log(e+" started")}),e.debug&&e.whenDone().then(function(){return console.log(e+" exited")}),Qf.arr.pushIfNotIncluded(e.constructor.commands,e),e.commandString=Array.isArray(m)?m.join(""):m,C.yield(a.sendToAndWait(a.trackerId,"lively.shell.spawn",{command:m,env:q,cwd:r,stdin:u},{ackTimeout:3E4}),
2);v=C.yieldResult;y=v.data;z=y.error;B=y.pid;if(z)throw Qf.debug&&console.error("["+e+"] error at start: "+z),e.process={error:z},e.exitCode=1,Qf.signal(e,"error",z),Error(z);e.process={pid:B};Qf.debug&&console.log("["+e+"] got pid "+B);Qf.signal(e,"pid",B);e._whenStarted.resolve();return C.return(e)})};ur.prototype.writeToStdin=function(b){var e=this,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(!e.isRunning())return m.return();l=e;a=l.l2lClient;f=l.pid;return m.yield(a.sendToAndWait(a.trackerId,
"lively.shell.writeToStdin",{pid:f,stdin:String(b)}),0)})};ur.prototype.kill=function(b){b=void 0===b?"KILL":b;var e=this,l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!e.isRunning())return v.return();Qf.debug&&console.log(e+" signaling "+b);e.lastSignal=b;l=e;a=l.pid;f=l.l2lClient;return v.yield(f.sendToAndWait(f.trackerId,"lively.shell.kill",{pid:a}),2)}m=v.yieldResult;q=m.data;r=q.status;u=q.error;Qf.debug&&console.log(e+" kill send: "+(u||
r));if(u)throw Error(u);return v.return(e.whenDone())})};ur.prototype.onOutput=function(b){var e=b.stdout;b=b.stderr;e&&(this._stdout+=e,Qf.signal(this,"stdout",e),this.emit("stdout",e));b&&(this._stderr+=b,Qf.signal(this,"stderr",b),this.emit("stderr",b))};ur.prototype.onClose=function(b){Qf.arr.remove(this.constructor.commands,this);this.exitCode=b;this.emit("close",b);Qf.signal(this,"close",b);this._whenDone.resolve(this)};ur.prototype.onError=function(b){Qf.arr.remove(this.constructor.commands,
this);this._stderr+=b.stack;this.exitCode=1;this.emit("error",b.stack);Qf.signal(this,"error",b.stack);this._whenDone.reject(b)};Qf.ClientCommand=ur;Qf.L2LServices={"lively.shell.onOutput":function(b,e,l,a){b=e.data;var f=b.pid,m=b.stdout,q=b.stderr,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return Qf.debug&&console.log("[lively.shell] client received lively.shell.onOutput for command "+f),u.setCatchFinallyBlocks(2),u.yield(Qf.promise.waitFor(1E3,
function(){return Qf.ClientCommand.findCommand(f)}),4);case 4:r=u.yieldResult;u.leaveTryBlock(3);break;case 2:return u.enterCatchBlock(),console.warn("[lively.shell] received output for command "+f+" but it isn't registered!'"),u.return();case 3:r.onOutput({stdout:m,stderr:q}),u.jumpToEnd()}})},"lively.shell.onExit":function(b,e,l,a){b=e.data;var f=b.pid,m=b.code,q=b.error,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return Qf.debug&&console.log("[lively.shell] client received lively.shell.onExit for command "+
f),u.setCatchFinallyBlocks(2),u.yield(Qf.promise.waitFor(1E3,function(){return Qf.ClientCommand.findCommand(f)}),4);case 4:r=u.yieldResult;u.leaveTryBlock(3);break;case 2:return u.enterCatchBlock(),console.warn("[lively.shell] received exit message for command "+f+" but it isn't registered!'"),u.return();case 3:if(q)"string"===typeof q&&(q=Error(q)),r.onError(q);else r.onClose(m);u.jumpToEnd()}})}};Qf.default=ur;var Una=Object.freeze({__proto__:null,runCommand:Ez,defaultDirectory:qE,env:rE,readFile:TI,
writeFile:UI,"default":ur}),Sh=lively.FreezerRuntime.recorderFor("lively.ide/shell/shell-interface.js");Sh.runCommand=VI;Sh.defaultDirectory=WI;Sh.env=IP;Sh.readFile=function(b,e){e=(e=void 0===e?{}:e)||{};var l=Sh.runCommand('cat "'+b+'"',e);return l.whenDone().then(function(){return l.output})};Sh.writeFile=function(b,e,l){"string"===typeof e&&(e={content:e});e=e||{};e.content=e.content||"";"win32"!==this.PLATFORM&&(b='"'+b+'"');b=this.run("tee "+b,{stdin:e.content,cwd:e.cwd});e.onEnd&&lively.bindings.connect(b,
"end",e,"onEnd");l&&lively.bindings.connect(b,"end",{thenDo:l},"thenDo");return b};Sh.parseCommand=JP;Sh.doGrep=KP;Sh.L2LClient=aj;Sh._runCommand=Ez;Sh._env=rE;Sh._defaultDirectory=qE;Sh.string=Hg;Sh.defaultConnection={url:document.location.origin+"/lively-socket.io",namespace:"l2l"};Sh.runCommand=VI;Sh.runCommand=VI;Sh.defaultDirectory=WI;Sh.defaultDirectory=WI;Sh.env=IP;Sh.env=IP;Sh.parseCommand=JP;Sh.parseCommand=JP;Sh.defaultGrepExclusions=".svn .git node_modules dist .module_cache lively.next-node_modules".split(" ");
Sh.doGrep=KP;Sh.doGrep=KP;var Eh=lively.FreezerRuntime.recorderFor("lively.shell/client-fs-helper.js");Eh.fileInfo=XI;Eh.fileInfoCommandString=function(b,e){var l=e=void 0===e?{}:e;e=l.rootDirectory;l=l.platform;e=e||".";var a="win32"===l?"\\":"/";"win32"===l||e.endsWith(a)||(e+=a);return"win32"===l?"cd "+e+' && ls -lLd --time-style=locale "'+b+'"':'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && env TZ=GMT LANG=en_US.UTF-8 cd '+
(e+' && ls -lLd "$timeformat" "'+b+'"')};Eh.parseDirectoryListFromLs=LP;Eh.findFiles=YI;Eh.findFilesCommandString=function(b,e){var l=e=void 0===e?{}:e,a=l.rootDirectory,f=l.exclude,m=l.depth;l=l.platform;a=a||".";f=f||"-iname "+Eh.defaultExcludes.map(Eh.string.print).join(" -o -iname ");var q="win32"===l?"\\":"/";"win32"===l||a.endsWith(q)||(a+=q);b=Eh.string.format('%s "%s"',e.re?"-iregex":e.matchPath?"-ipath":"-iname",b);m="number"===typeof m?" -maxdepth "+m:"";return"win32"===l?Eh.string.format("find %s %s ( %s ) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd --time-style=locale {}",
a,e.re?"-E ":"",f.replace(/"/g,""),b.replace(/"/g,""),m):'if [ "$(uname)" = "Darwin" ];\n      then timeformat=\'-T\'; else\n      timeformat="--time-style=+%b %d %T %Y";\n    fi && '+Eh.string.format('env TZ=GMT LANG=en_US.UTF-8 find %s %s \\( %s \\) -prune -o %s %s -print0 | xargs -0 -I{} ls -lLd "$timeformat" "{}"',a,e.re?"-E ":"",f,b,m)};Eh.convertDirectoryUploadEntriesToFileInfos=MP;Eh.runCommand=Ez;Eh.string=Hg;Eh.promise=oe;Eh.arr=Qe;Eh.fileInfo=XI;Eh.fileInfo=XI;Eh.parseDirectoryListFromLs=
LP;Eh.parseDirectoryListFromLs=LP;var ML=function(b){this.rootDirectory=b;this.fileName=this.path="";this.isDirectory=!1;this.lastModified=null;this.mode="";this.isLink=!1;this.linkCount=0;this.group=this.user="";this.size=0;this.rootDirectory=null};ML.prototype.readFromDirectoryListLine=function(b){var e=this;if(!b.trim().length)return null;var l=b;this.reader.forEach(function(a){return l=a(l,e)});return this};ML.prototype.toString=function(){return this.path};$jscomp.global.Object.defineProperties(ML.prototype,
{reader:{configurable:!0,enumerable:!0,get:function(){return[function(b,e){var l=b.indexOf(" ");e.mode=b.slice(0,l);e.isDirectory="d"===e.mode[0];return b.slice(l+1).trim()},function(b,e){var l=b.indexOf(" ");e.linkCount=Number(b.slice(0,l));return b.slice(l+1).trim()},function(b,e){var l=b.indexOf(" ");e.user=b.slice(0,l);return b.slice(l+1).trim()},function(b,e){var l=Eh.string.peekRight(b,0,/\s+[0-9]/);e.group=b.slice(0,l).trim();return b.slice(l).trim()},function(b,e){var l=b.indexOf(" ");e.size=
Number(b.slice(0,l));return b.slice(l+1).trim()},function(b,e){var l=Eh.string.reMatches(b,/[^s]+\s+[0-9:\s]+/);if(!l||!l[0])return b;e.lastModified=new Date(l[0].match+" GMT");return b.slice(l[0].end).trim()},function(b,e){var l=(b=b.replace(/^\.\/+/g,"").replace(/\/\//g,"/"))&&b.split(" -> "),a=""===b?!1:b&&2===l.length,f=(l=a?l[0]:b)&&0===l.indexOf(e.rootDirectory)?l.slice(e.rootDirectory.length):l;e.fileName=""===b?".":f;e.path=l;e.isLink=a;return f}]}}});Eh.FileInfo=ML;Eh.findFilesProcesses=
{};Eh.findFiles=YI;Eh.findFiles=YI;Eh.defaultExcludes=[".svn",".git","node_modules",".module_cache"];Eh.convertDirectoryUploadEntriesToFileInfos=MP;Eh.convertDirectoryUploadEntriesToFileInfos=MP;var yi=lively.FreezerRuntime.recorderFor("lively.shell/client-resource.js");yi.Resource=Nf;yi.runCommand=Ez;yi.fileInfo=XI;yi.findFiles=YI;yi.string=Hg;yi.promise=oe;yi.arr=Qe;yi.obj=lf;var un=function(b,e,l){l=void 0===l?{}:l;b=yi.Resource.call(this,b)||this;b.options=Object.assign({},l,{l2lClient:e||b.constructor.defaultL2lClient});
return b};$jscomp.inherits(un,yi.Resource);un.prototype.newResource=function(b){return new this.constructor(b,this.options.l2lClient,this.options)};un.prototype.read=function(){var b=this,e=yi.runCommand('cat "'+this.url+'"',this.options);return e.whenDone().then(function(){if(e.exitCode)throw Error("Read "+b.url+" failed: "+e.stderr);return e.output})};un.prototype.write=function(b){var e=this,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return b?
f.yield(yi.runCommand('touch "'+e.url+'" && tee "'+e.url+'"',Object.assign({stdin:String(b)},e.options)).whenDone(),4):f.yield(yi.runCommand('echo -n > "'+e.url+'"',Object.assign({},e.options)).whenDone(),5);case 4:l=f.yieldResult;f.jumpTo(3);break;case 5:l=f.yieldResult;case 3:a=l;if(a.exitCode)throw Error("Write "+e.url+" failed: "+a.stderr);return f.return(e)}})};un.prototype.mkdir=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(yi.runCommand('mkdir -p "'+
b.url+'"',b.options).whenDone(),2);e=l.yieldResult;if(e.exitCode)throw Error(b+" cannot create directory: "+e.stderr);return l.return(b)})};un.prototype.exists=function(){var b=yi.runCommand('test -d "'+this.url+'" || test -f "'+this.url+'"',this.options);return b.whenDone().then(function(){return 0===b.exitCode})};un.prototype.remove=function(){var b=this,e=yi.runCommand('rm -rf "'+this.url+'"',this.options);return e.whenDone().then(function(){if(e.exitCode)throw Error("Remove of "+b.url+" failed: "+
e.stderr);return b})};un.prototype.gzip=function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){l=yi.runCommand('gzip > "'+e.url+'"',Object.assign({stdin:String(b)},e.options));return a.return(l.whenDone().then(function(){if(l.exitCode)throw Error("Gzip compression of "+e.url+" failed: "+l.stderr);return e}))})};un.prototype.brotli=function(b){var e=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){l=yi.runCommand('brotli > "'+e.url+'"',Object.assign({stdin:String(b)},
e.options));return a.return(l.whenDone().then(function(){if(l.exitCode)throw Error("Brotli compression of "+e.url+" failed: "+l.stderr);return e}))})};un.prototype.readProperties=function(){var b=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return l.yield(yi.fileInfo(b.url,b.options),2);e=l.yieldResult;b.assignProperties(yi.obj.dissoc(e,["fileName","path","rootDirectory"]));return l.return(b)})};un.prototype.dirList=function(b,e){b=void 0===b?1:b;e=void 0===
e?{}:e;var l=this,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return a=e,f=a.exclude,Array.isArray(f)&&(f="-iname "+f.map(yi.string.print).join(" -o -iname ")),m=l,q=m.url,r=m.options,u=r.l2lClient,y.yield(yi.findFiles("*",{exclude:f,depth:b,rootDirectory:q,l2lClient:u}),2);v=y.yieldResult;v[0].path.replace(/\/$/,"")===l.url.replace(/\/$/,"")&&v.shift();return y.return(v.map(function(z){var B=z.path;z.isDirectory&&(B=B.replace(/\/?$/,"/"));B=new l.constructor(B,
u,l.options);B.assignProperties(yi.obj.dissoc(z,["fileName","path","rootDirectory"]));return B}))})};$jscomp.global.Object.defineProperties(un,{defaultL2lClient:{configurable:!0,enumerable:!0,get:function(){return this._defaultL2lClient||yi._defaultL2LClient},set:function(b){this._defaultL2lClient=yi._defaultL2LClient=b}}});yi.ShellClientResource=un;yi._defaultL2LClient=yi._defaultL2LClient||void 0;var NL={name:"shell-client",matches:function(b){return b.startsWith("/")||b.match(/[a-z]:\\/i)},resourceClass:yi.ShellClientResource};
yi.resourceExtension=NL;yi.resourceExtension=NL;yi.resourceExtension=NL;yi.default=un;var Vna=Object.freeze({__proto__:null,"default":un,resourceExtension:NL}),nd=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js");nd.pt=nf;nd.Rectangle=Pd;nd.rect=Ff;nd.arr=Qe;nd.Closure=Fi;nd.num=Gk;nd.grid=$B;nd.obj=lf;nd.once=kp;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("Layout")&&"function"===typeof e.Layout?e.Layout:e.Layout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{}:a;a=f.spacing;var m=f.padding,q=f.border,r=f.container,u=f.manualUpdate,v=f.autoResize,y=f.ignore,z=f.onScheduleApply,B=f.layoutOrder;f=f.reactToSubmorphAnimations;this.applyRequests=!1;this.border=Object.assign({top:0,left:0,right:0,bottom:0},q);this.ignore=y||[];this.lastBoundsExtent=this.container&&this.container.bounds().extent();
this.active=!1;this.container=r;this.manualUpdate=u;this.reactToSubmorphAnimations=f||!1;this.autoResize=void 0!=v?v:!0;this.onScheduleApply=z||function(C,G,F){};B&&(this.layoutOrder=B,this.layoutOrderSource=JSON.stringify(String(B)));this.spacing=a||0;this._padding=m?"number"===typeof m?nd.Rectangle.inset(m):m:null}},{key:"attach",value:function(){this.apply();this.refreshBoundsCache()}},{key:"copy",value:function(){return new this.constructor(this)}},{key:"description",value:function(){return"Describe the layout behavior here."}},
{key:"name",value:function(){return"Name presented to the user."}},{key:"isEnabled",value:function(){return!this.active}},{key:"disable",value:function(){this.active=!0}},{key:"enable",value:function(a){this.active=!1;this.scheduleApply(null,a)}},{key:"padding",get:function(){return this._padding}},{key:"padding",set:function(a){"number"===typeof a&&(a=nd.Rectangle.inset(a));this._padding=a;this.apply()}},{key:"boundsChanged",value:function(a){return!(this.lastBoundsExtent&&a.bounds().extent().equals(this.lastBoundsExtent))}},
{key:"extentChanged",value:function(a){return!(this.lastExtent&&a.extent.equals(this.lastExtent))}},{key:"equals",value:function(a){return a.name()==this.name()}},{key:"layoutableSubmorphs",get:function(){var a=this;this.layoutOrder||(this.layoutOrder=nd.Closure.fromSource(JSON.parse(this.layoutOrderSource)).recreateFunc());return nd.arr.sortBy(this.container.submorphs.filter(function(f){return f.isLayoutable&&!a.ignore.includes(f.name)}),function(f){return a.layoutOrder(f)})}},{key:"layoutOrder",
value:function(a){return this.container.submorphs.indexOf(a)}},{key:"submorphBoundsChanged",get:function(){var a=this.layoutableSubmorphs,f=this.layoutableSubmorphBounds;if(!f||a.length!=f.length)return!0;for(var m=0;m<a.length;m++)if(!f[m].equals(a[m].bounds()))return!0;return!1}},{key:"refreshBoundsCache",value:function(){this.lastExtent=this.container.extent;this.layoutableSubmorphBounds=this.layoutableSubmorphs.map(function(a){return a.bounds()})}},{key:"onContainerRender",value:function(){this.forceLayout()}},
{key:"noLayoutActionNeeded",get:function(){return!this.submorphBoundsChanged&&!this.boundsChanged(this.container)&&!this.extentChanged(this.container)&&!this.submorphsChanged}},{key:"__dont_serialize__",get:function(){return["lastAnim","animationPromise"]}},{key:"forceLayout",value:function(){var a=this;this.applyRequests&&(this.applyRequests=!1,this.noLayoutActionNeeded||(this.refreshBoundsCache(),this.container.withMetaDo({isLayoutAction:!0,animation:this.lastAnim},function(){return a.apply(a.lastAnim)}),
this.lastAnim=!1))}},{key:"forceLayoutsOfMorph",value:function(a){var f=this;a.layout?a.layout.forceLayout():a.submorphs.forEach(function(m){return f.forceLayoutsOfMorph(m)})}},{key:"forceLayoutsInNextLevel",value:function(){var a=this;this.layoutableSubmorphs.forEach(function(f){return a.forceLayoutsOfMorph(f)})}},{key:"scheduleApply",value:function(a,f,m){m=void 0===m?{}:m;if("function"===typeof this.onScheduleApply)this.onScheduleApply(a,f,m);this.active||(f&&(this.lastAnim=f),this.applyRequests=
!0)}},{key:"onSubmorphResized",value:function(a,f){this.scheduleApply(a,this.reactToSubmorphAnimations&&f.meta.animation,f)}},{key:"onSubmorphAdded",value:function(a,f){this.submorphsChanged=!0;this.scheduleApply(a,f)}},{key:"onSubmorphRemoved",value:function(a,f){this.submorphsChanged=!0;this.scheduleApply(a,f)}},{key:"onChange",value:function(a){var f=a.args,m=a.prop,q=a.value,r=a.prevValue,u=a.meta;u=this.reactToSubmorphAnimations&&u&&u.animation;f=f&&f[0];switch(a.selector){case "removeMorph":this.onSubmorphRemoved(f,
u);break;case "addMorphAt":this.onSubmorphAdded(f,u)}"extent"===m&&q&&r&&(r.x!==q.x||r.y!==q.y)&&this.scheduleApply(f,u)}},{key:"affectsLayout",value:function(a,f){a=f.value;var m=f.prevValue;return["position","scale","rotation","isLayoutable","extent"].includes(f.prop)&&!nd.obj.equals(a,m)}},{key:"onSubmorphChange",value:function(a,f){if(f.meta&&f.meta.isLayoutAction)return this.scheduleApply(a,this.reactToSubmorphAnimation&&f.meta.animation);if(this.affectsLayout(a,f))this.onSubmorphResized(a,f)}},
{key:"changePropertyAnimated",value:function(a,f,m,q){if(q){var r=q.duration;q=q.easing;var u={};this.animationPromise=a.animate((u[f]=m,u.duration=r,u.easing=q,u))}else a[f]=m}},{key:"attachAnimated",value:function(a,f,m){this.active||(this.container=f,this.active=!0,f.layout=this,this.active=!1,this.lastAnim={duration:void 0===a?0:a,easing:m})}},{key:"apply",value:function(a){this.active||(this.active=!0,this.submorphsChanged=!1,this.lastBoundsExtent=this.container&&this.container.bounds().extent(),
this.active=!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Layout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:156,end:6611})})(void 0);var OF=wa("aw",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("CustomLayout")&&
"function"===typeof e.CustomLayout?e.CustomLayout:e.CustomLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;this.relayout=a.relayout;this.layouterString=JSON.stringify(String(a.relayout));this.varMapping=a.varMapping||{};zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a)}},{key:"name",value:function(){return"Custom Layout"}},{key:"apply",value:function(a){if(!this.active&&this.container){zb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);this.active=!0;this.relayout||(this.relayout=nd.Closure.fromSource(JSON.parse(this.layouterString),this.varMapping).recreateFunc());try{this.relayout(this.container,a)}catch(f){console.error("Error in relayout() of a custom layout:",f)}this.lastBoundsExtent=this.container&&this.container.bounds().extent();this.active=
!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:6620,end:7548})}(nd.Layout));nd.CustomLayout=OF;nd.CustomLayout=OF;nd.CustomLayout=OF;var PF=wa("aI",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
l=e.hasOwnProperty("SnapLayout")&&"function"===typeof e.SnapLayout?e.SnapLayout:e.SnapLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._spacing=a.spacing}},{key:"name",value:function(){return"Snap"}},{key:"description",
value:function(){return"Fits the parent morph to the combined bounds of all its submorphs."}},{key:"apply",value:function(a){var f=this;a=void 0===a?!1:a;if(!this.active&&this.container){zb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);var m=this.container.submorphBounds().insetBy(-this.spacing),q=nd.pt(this.spacing,this.spacing).subPt(m.topLeft());q.r()&&this.container.submorphs.forEach(function(r){return f.changePropertyAnimated(r,"position",r.position.addPt(q),a)});this.changePropertyAnimated(this.container,
"extent",m.extent(),a)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7557,end:8354})}(nd.Layout));nd.SnapLayout=PF;nd.SnapLayout=PF;nd.SnapLayout=PF;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),
l=e.hasOwnProperty("FloatLayout")&&"function"===typeof e.FloatLayout?e.FloatLayout:e.FloatLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._orderByIndex=a.orderByIndex||!1;this._resizeSubmorphs="undefined"!==typeof a.resizeSubmorphs?
a.resizeSubmorphs:!1}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.left}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"direction",get:function(){return this._direction}},{key:"direction",set:function(a){this._direction=a;this.apply()}},{key:"align",get:function(){return this._align}},
{key:"align",set:function(a){this._align=a;this.apply()}},{key:"autoResize",get:function(){return this._autoResize}},{key:"autoResize",set:function(a){this._autoResize=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"resizeSubmorphs",get:function(){return this._resizeSubmorphs}},{key:"resizeSubmorphs",set:function(a){this._resizeSubmorphs=a;this.apply()}},{key:"equals",value:function(a){return this.spacing!=a.spacing||
this.align!=a.align||this.direction!=a.direction?!1:!0}},{key:"getSpec",value:function(){return{spacing:this.spacing,resizeSubmorphs:this.resizeSubmorphs,autoResize:this.autoResize,align:this.align,direction:this.direction,padding:this.padding,reactToSubmorphAnimations:this.reactToSubmorphAnimations,orderByIndex:this.orderByIndex}}},{key:"inspect",value:function(a){}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(f.active||
!f.container||!f.container.submorphs.length||!f.layoutableSubmorphs.length)return q.return();f.layoutableSubmorphBounds||f.refreshBoundsCache();zb._get(Object.getPrototypeOf(l.prototype),"apply",f).call(f,a);f.active=!0;try{m=f.computeMinContainerExtent(),f.layoutSubmorphs(m,a),m=f.computeMinContainerExtent(),f.resizeContainer(m,a),f.lastBoundsExtent=f.container.bounds().extent()}finally{f.active=!1,f.layoutRequests=!1}return q.return(f.animationPromise)})}},{key:"resizeContainer",value:function(){}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FloatLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:8356,end:10764})})(nd.Layout);var hy=wa("ax",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("VerticalLayout")&&
"function"===typeof e.VerticalLayout?e.VerticalLayout:e.VerticalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._align=a.align||"left";this._direction=a.direction||"topToBottom"}},{key:"name",value:function(){return"Vertical"}},
{key:"description",value:function(){return"Assemble the submorphs in a vertically growing list."}},{key:"equals",value:function(a){return zb._get(Object.getPrototypeOf(l.prototype),"equals",this).call(this,a)&&a.name&&"Vertical"==a.name()?!0:!1}},{key:"possibleDirectionValues",get:function(){return["topToBottom","bottomToTop","centered"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"__serialize__",value:function(){return{__expr__:"new VerticalLayout("+nd.obj.inspect(this.getSpec())+
")",bindings:{"lively.morphic":["VerticalLayout"]}}}},{key:"layoutSubmorphs",value:function(a,f){var m=this,q=this.container,r=this.layoutableSubmorphs,u=this.spacing,v=this.autoResize,y=this.align,z=this.resizeSubmorphs,B=this.getStartY(a),C=[];a=z?q.width:a.x;v=v&&!z;var G=function(F,N){r.reduce(function(L,S){z&&m.changePropertyAnimated(S,"width",q.width-2*u,f);m.forceLayoutsOfMorph(S);m.changePropertyAnimated(S,F,L,f);L=S.bounds();C.push(L);return L[F]().addXY(0,L.height+u)},N)};this.layoutableSubmorphBounds=
C;"left"===y?G("topLeft",nd.pt(u,B)):"right"===y?G("topRight",nd.pt(a+(v?u:-u),B)):G("topCenter",nd.pt((a+(v?2*u:0))/2,B))}},{key:"resizeContainer",value:function(a,f){var m=this.direction,q=this.layoutableSubmorphs,r=this.resizeSubmorphs,u=this.spacing,v=this.container;this.autoResize&&("centered"===m?(m=q[0].top,q=nd.arr.last(q).bottom+m):q=nd.arr.last(q).bottom+u,a=nd.pt(r?v.width:a.x+2*u,Math.max(q,a.y)),this.changePropertyAnimated(v,"extent",a,f))}},{key:"getStartY",value:function(a){var f=this.layoutableSubmorphBounds,
m=this.spacing,q=this.direction;var r=(f.length-1)*m;f=$jscomp.makeIterator(f);for(var u=f.next();!u.done;u=f.next())r+=u.value.height;return Math.max(0,"bottomToTop"===q?a.y-r-2*m:"centered"===q?a.y/2-r/2-m:0)+m}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,f=this.layoutableSubmorphs,m=this.autoResize,q=(f.length+1)*this.spacing,r=0,u=0,v=0;v<f.length;v++){var y=f[v].bounds(),z=y.width;u+=y.height;r=Math.max(z,r)}f=nd.pt(r,u+q);m||(f=f.maxPt(a.extent));return f}},{key:"layoutOrder",
value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:10773,end:14741})}(nd.FloatLayout));nd.VerticalLayout=hy;nd.VerticalLayout=
hy;nd.VerticalLayout=hy;var Os=wa("ay",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("HorizontalLayout")&&"function"===typeof e.HorizontalLayout?e.HorizontalLayout:e.HorizontalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this._direction=a.direction||"leftToRight";this._align=a.align||"top"}},{key:"name",value:function(){return"Horizontal"}},{key:"description",value:function(){return"Assemble the submorphs in a horizontally growing list."}},{key:"possibleDirectionValues",get:function(){return["leftToRight","rightToLeft","centered"]}},{key:"possibleAlignValues",get:function(){return["top","center","bottom"]}},{key:"__serialize__",value:function(){return{__expr__:"new HorizontalLayout("+
nd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["HorizontalLayout"]}}}},{key:"equals",value:function(a){return zb._get(Object.getPrototypeOf(l.prototype),"equals",this).call(this,a)&&a.name&&"Horizontal"==a.name()?!0:!1}},{key:"layoutSubmorphs",value:function(a,f){var m=this,q=this.container,r=this.layoutableSubmorphs,u=this.resizeSubmorphs,v=this.spacing,y=this.autoResize,z=this.align,B=this.getStartX(a),C=[];a=u?q.height:a.y;y=y&&!u;var G=function(F,N){r.reduce(function(L,S){u&&m.changePropertyAnimated(S,
"height",q.height-2*v,f);m.forceLayoutsOfMorph(S);m.changePropertyAnimated(S,F,L,f);L=S.bounds();C.push(L);return L[F]().addXY(L.width+v,0)},N)};this.layoutableSubmorphBounds=C;"top"===z?G("topLeft",nd.pt(B,v)):"bottom"===z?G("bottomLeft",nd.pt(B,a+(y?v:-v))):G("leftCenter",nd.pt(B,(a+(y?2*v:0))/2))}},{key:"resizeContainer",value:function(a,f){var m=this.direction,q=this.layoutableSubmorphBounds,r=this.resizeSubmorphs,u=this.spacing,v=this.container;this.autoResize&&("centered"===m?(m=q[0].left(),
q=nd.arr.last(q).right()+m):q=nd.arr.last(q).right()+u,a=nd.pt(Math.max(a.x,q),r?v.height:a.y+2*u),this.changePropertyAnimated(v,"extent",a,f))}},{key:"getStartX",value:function(a){var f=this.layoutableSubmorphBounds,m=this.spacing,q=this.direction;var r=(f.length-1)*m;f=$jscomp.makeIterator(f);for(var u=f.next();!u.done;u=f.next())r+=u.value.width;return Math.max(0,"rightToLeft"===q?a.x-r-2*m:"centered"===q?a.x/2-r/2-m:0)+m}},{key:"computeMinContainerExtent",value:function(){for(var a=this.container,
f=this.layoutableSubmorphBounds,m=this.autoResize,q=(f.length+1)*this.spacing,r=0,u=0,v=0;v<f.length;v++){var y=f[v],z=y.height;r+=y.width;u=Math.max(z,u)}f=nd.pt(r+q,u);m||(f=f.maxPt(a.extent));return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:14750,end:18667})}(nd.FloatLayout));nd.HorizontalLayout=Os;nd.HorizontalLayout=Os;nd.HorizontalLayout=Os;var QF=wa("aL",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("ProportionalLayout")&&"function"===typeof e.ProportionalLayout?e.ProportionalLayout:e.ProportionalLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"name",
value:function(){return"Proportional"}},{key:"description",value:function(){return"Resizes, scales, and moves morphs according to their original position."}},{key:"inspect",value:function(a){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.extentDelta=nd.pt(0,0);this.proportionalLayoutSettingsForMorphs=new WeakMap;this.submorphSettings=a&&a.submorphSettings||[];this.lastExtent=
a.lastExtent;delete this.spacing;delete this.autoResize}},{key:"getSpec",value:function(){return{submorphSettings:this.submorphSettings,reactToSubmorphAnimations:this.reactToSubmorphAnimations,lastExtent:this.lastExtent}}},{key:"__serialize__",value:function(){return{__expr__:"new ProportionalLayout("+nd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["ProportionalLayout"]}}}},{key:"__dont_serialize__",get:function(){return[].concat($jscomp.arrayFromIterable(zb._get(Object.getPrototypeOf(l.prototype),
"__dont_serialize__",this)),["extentDelta","lastExtent"])}},{key:"__after_deserialize__",value:function(a,f){var m=this._submorphSettings;a=this.container;f=this.proportionalLayoutSettingsForMorphs||new WeakMap;this.extentDelta=nd.pt(0,0);if(m&&a){m=$jscomp.makeIterator(m);for(var q=m.next();!q.done;q=m.next()){var r=$jscomp.makeIterator(q.value);q=r.next().value;r=r.next().value;(q=$jscomp.makeIterator(this._morphsMatchingSelector(a,q)).next().value)&&f.set(q,r)}this.proportionalLayoutSettingsForMorphs=
f}}},{key:"onSubmorphChange",value:function(a,f,m,q){"name"===f.prop&&(m=this.proportionalLayoutSettingsForMorphs.get(a))&&this.changeSettingsFor(a,m,!0);return zb._get(Object.getPrototypeOf(l.prototype),"onSubmorphChange",this).call(this,a,f)}},{key:"settingsFor",value:function(a){return this.proportionalLayoutSettingsForMorphs.get(a)||{x:"scale",y:"scale"}}},{key:"changeSettingsFor",value:function(a,f,m){m=void 0===m?!1:m;"string"===typeof f&&(f={x:f,y:f});this.proportionalLayoutSettingsForMorphs.set(a,
Object.assign({},this.settingsFor(a),{},f));m&&(f=this.submorphSettings.filter(function(q){return q[0]!==a.name}),f.push([a.name,this.settingsFor(a)]),this._submorphSettings=f)}},{key:"submorphSettings",get:function(){return this._submorphSettings}},{key:"submorphSettings",set:function(a){if(this.container)this._submorphSettings=a,this.changeSubmorphSettings(a);else nd.once(this,"container",this,"submorphSettings",{converter:"function () { return submorphSettings }",varMapping:{submorphSettings:a}})}},
{key:"changeSubmorphSettings",value:function(a){var f=this,m={};a=$jscomp.makeIterator(a);for(var q=a.next();!q.done;m={$jscomp$loop$prop$setting$2655:m.$jscomp$loop$prop$setting$2655},q=a.next()){q=$jscomp.makeIterator(q.value);var r=q.next().value;m.$jscomp$loop$prop$setting$2655=q.next().value;this._morphsMatchingSelector(this.container,r).forEach(function(u){return function(v){return f.changeSettingsFor(v,u.$jscomp$loop$prop$setting$2655)}}(m))}}},{key:"_morphsMatchingSelector",value:function(a,
f){var m=this,q=[];if(!f)return q;f.isMorph?q=[f]:f instanceof RegExp?q=a.submorphs.filter(function(r){return r.name.match(f)}):"string"===typeof f?q=a.submorphs.filter(function(r){return r.name===f}):Array.isArray(f)&&(q=nd.arr.flatmap(f,function(r){return m._morphsMatchingSelector(a,r)}));return q}},{key:"refreshBoundsCache",value:function(){var a=this.container.extent,f=this.lastExtent;f&&!a.eqPt(f)&&(this.extentDelta=this.extentDelta.addPt(a.subPt(f)));this.lastExtent=a;this.layoutableSubmorphBounds=
this.layoutableSubmorphs.map(function(m){return m.bounds()})}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this.container,m=this.extentDelta,q=m.x;m=m.y;var r=(f||{}).extent;if(!this.active&&f&&(0!=q||0!=m)){this.extentDelta=nd.pt(0,0);this.active=!0;zb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);var u=this.layoutableSubmorphs;f=r.scaleByPt(r.addXY(-q,-m).invertedSafely());r=$jscomp.makeIterator(u);for(u=r.next();!u.done;u=r.next()){u=u.value;var v=this.settingsFor(u),
y=v.x,z=v.y,B=v=0,C=0,G=0;"move"===y&&(v=q);"move"===z&&(B=m);"resize"===y&&(C=q);"resize"===z&&(G=m);if("scale"===y||"scale"===z)y=nd.pt("scale"===y?f.x:1,"scale"===z?f.y:1),this.changePropertyAnimated(u,"position",u.position.scaleByPt(y),a),this.changePropertyAnimated(u,"extent",u.extent.scaleByPt(y),a);(v||B)&&this.changePropertyAnimated(u,"position",u.position.addXY(v,B),a);(C||G)&&this.changePropertyAnimated(u,"extent",u.extent.addXY(C,G),a)}this.forceLayoutsInNextLevel();this.active=!1}}},{key:"copy",
value:function(){return new this.constructor(this.getSpec())}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProportionalLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:18676,end:24220})}(nd.Layout));nd.ProportionalLayout=QF;nd.ProportionalLayout=QF;nd.ProportionalLayout=
QF;var RF=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("CenteredTilingLayout")&&"function"===typeof e.CenteredTilingLayout?e.CenteredTilingLayout:e.CenteredTilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"name",value:function(){return"CenteredTiling"}},{key:"description",value:function(){return"Similar to TilingLayout but center the rows."}},
{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;zb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);a=this.getOptimalWidth(this.container);var f=this.spacing,m=this.layoutableSubmorphs,q=f+this.border.top;m=m.slice();for(var r={};m.length;){r.$jscomp$loop$prop$remainingWidth$2657=a;var u=nd.arr.takeWhile(m,function(z){return function(B){B=z.$jscomp$loop$prop$remainingWidth$2657-(B.width+2*f);if(0>B)return!1;z.$jscomp$loop$prop$remainingWidth$2657=
B;return!0}}(r));u.length?m=nd.arr.withoutAll(m,u):(u=[m.shift()],r.$jscomp$loop$prop$remainingWidth$2657=0);var v=nd.pt(r.$jscomp$loop$prop$remainingWidth$2657/2+f+this.border.left,q);u=$jscomp.makeIterator(u);for(var y=u.next();!y.done;y=u.next())y=y.value,y.position=v,v=v.addXY(2*f+y.width,0),q=Math.max(q,y.bottom);q+=2*f;r={$jscomp$loop$prop$remainingWidth$2657:r.$jscomp$loop$prop$remainingWidth$2657}}this.active=!1}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CenteredTilingLayout"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:24229,end:25525})}(nd.TilingLayout);nd.CenteredTilingLayout=RF;nd.CenteredTilingLayout=RF;nd.CenteredTilingLayout=RF;var SF=wa("az",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("TilingLayout")&&
"function"===typeof e.TilingLayout?e.TilingLayout:e.TilingLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._axis=a.axis||"row";this._align=a.align||"left";this._verticalAlign=a.verticalAlign||"top";this._orderByIndex=
a.orderByIndex||!1;delete this.autoResize}},{key:"name",value:function(){return"Tiling"}},{key:"description",value:function(){return"Make the submorphs fill their owner, inserting breaks to defer intersecting the bounds as much as possible."}},{key:"inspect",value:function(a){}},{key:"__serialize__",value:function(){return{__expr__:"new TilingLayout("+nd.obj.inspect(this.getSpec())+")",bindings:{"lively.morphic":["TilingLayout"]}}}},{key:"copy",value:function(){return new this.constructor(this.getSpec())}},
{key:"getSpec",value:function(){return{axis:this.axis,align:this.align,spacing:this.spacing,orderByIndex:this.orderByIndex,reactToSubmorphAnimations:this.reactToSubmorphAnimations}}},{key:"possibleAxisValues",get:function(){return["row","columns"]}},{key:"possibleAlignValues",get:function(){return["left","center","right"]}},{key:"orderByIndex",get:function(){return this._orderByIndex}},{key:"orderByIndex",set:function(a){this._orderByIndex=a;this.apply()}},{key:"axis",get:function(){return this._axis}},
{key:"axis",set:function(a){this._axis=a;this.apply()}},{key:"align",get:function(){return this._align}},{key:"align",set:function(a){this._align=a;this.apply()}},{key:"spacing",get:function(){return this._spacing}},{key:"spacing",set:function(a){this._spacing=a;this.apply()}},{key:"apply",value:function(a){a=void 0===a?!1:a;if(!this.active&&this.container){this.active=!0;zb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a);var f=this.axis,m=this.align,q=this.border,r=this.spacing,
u=this.layoutableSubmorphs,v=this.getOptimalWidth(this.container),y=(f="row"==f)?"left":"top",z=f?"x":"y",B=f?"y":"x",C=0,G=r+q[f?"top":"left"],F="topLeft";switch(this._verticalAlign){case "top":F="topLeft";break;case "center":F="leftCenter";break;case "bottom":F="bottomLeft"}for(;u.length;){var N=v-r,L=nd.arr.takeWhile(u,function(qa){qa=qa.bounds().extent();qa=N-(qa[z]+r);if(0>qa)return!1;N=qa;return!0});L.length?u.splice(0,L.length):(L=[u.shift()],N=0);C=nd.arr.max(L.map(function(qa){return qa.bounds().extent()[B]}));
if(f)switch(m){case "left":var S=nd.pt(r,G);break;case "center":S=nd.pt(N/2+r+q[y],G);break;case "right":S=nd.pt(N-r,G)}else switch(m){case "left":S=nd.pt(G,r);break;case "center":S=nd.pt(G,N/2+r+q[y]);break;case "right":S=nd.pt(G,N-r)}"bottomLeft"==F&&(S=S.addXY(0,C));L=$jscomp.makeIterator(L);for(var ha=L.next();!ha.done;ha=L.next())ha=ha.value,this.changePropertyAnimated(ha,F,S,a),ha=ha.bounds().extent(),S=f?S.addXY(r+ha[z],0):S.addXY(0,r+ha[z]);G+=r+C;C=0}this.active=!1}}},{key:"getMinWidth",
value:function(){var a=this.border,f=a.left;a=a.right;return this.layoutableSubmorphs.reduce(function(m,q){return q.bounds().width>m?q.bounds().width:m},0)+f+a}},{key:"getMinHeight",value:function(){var a=this.border,f=a.top;a=a.bottom;return this.layoutableSubmorphs.reduce(function(m,q){return q.bounds().height>m?q.bounds().height:m},0)+f+a}},{key:"getOptimalWidth",value:function(a){var f=this.axis,m=this.border,q=m.left,r=m.top,u=m.right;m=m.bottom;a="row"==f?a.width-q-u:a.height-r-m;f="row"==f?
this.getMinWidth():this.getMinHeight();return Math.max(a,f)}},{key:"layoutOrder",value:function(a){return this.orderByIndex?this.container.submorphs.indexOf(a):"row"===this.axis?1E6*(a.top-a.top%15)+a.left:1E6*(a.left-a.left%15)+a.top}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TilingLayout"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:25534,end:31071})}(nd.Layout));nd.TilingLayout=SF;nd.TilingLayout=SF;nd.TilingLayout=SF;var TF=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("CellGroup")&&"function"===typeof e.CellGroup?e.CellGroup:e.CellGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){var f=a.morph,m=a.layout;this.state={cells:[a.cell],layout:m,align:a.align,resize:m.fitToCell};m&&m.addGroup(this);this.morph=f}},{key:"morph",get:function(){var a=this.state,f=a.morph;a=a.layout;return f?f.isMorph?f:a.layoutableSubmorphs.find(function(m){return m.name==f}):null}},{key:"compensateOrigin",get:function(){return this.layout.compensateOrigin}},{key:"resize",get:function(){return this.state.resize}},{key:"resize",set:function(a){this.state.resize=a;this.layout.apply()}},
{key:"align",get:function(){return this.state.align||"topLeft"}},{key:"align",set:function(a){this.state.align=a;this.layout.apply()}},{key:"morph",set:function(a){var f=a&&this.layout.getCellGroupFor(a);f&&(f.morph=null);this.state.morph=a;this.layout.apply()}},{key:"manages",value:function(a){return this.morph&&(this.morph==a||this.morph.name==a)}},{key:"apply",value:function(a){a=void 0===a?!1:a;var f=this.morph;if(f){var m=this.bounds(),q=this.compensateOrigin?this.layout.container.origin.negated():
nd.pt(0,0);if(a){var r=this.resize?m.extent():f.extent,u=a;a=u.duration;u=u.easing;var v={};f.animate((v[this.alignedProperty||this.align]=m[this.align]().addPt(q),v.extent=r,v.duration=a,v.easing=u,v))}else this.resize&&(f.extent=m.extent()),f[this.alignedProperty||this.align]=m[this.align]().addPt(q);this.layout.forceLayoutsInNextLevel()}}},{key:"cells",get:function(){return this.state.cells}},{key:"layout",get:function(){return this.state.layout}},{key:"bounds",value:function(){return 0<this.cells.length?
this.cells.map(function(a){return a.bounds()}).reduce(function(a,f){return a.union(f)}):nd.rect(0,0,0,0)}},{key:"includes",value:function(a){return this.cells.find(function(f){return f==a})}},{key:"connect",value:function(a){void 0==this.morph&&(this.morph=a.group.morph);a.group?a.group.disconnect(a,this):a.group=this;this.cells.push(a)}},{key:"disconnect",value:function(a,f){a.group=(void 0===f?null:f)||new nd.CellGroup({morph:null,layout:this.layout,cell:a});nd.arr.remove(this.cells,a);1>this.cells.length&&
this.layout&&this.layout.removeGroup(this)}},{key:"merge",value:function(a){var f=this;a.cells.forEach(function(m){f.connect(m)})}},{key:"topLeft",get:function(){var a=this;return this.cells.find(function(f){return(null==f.left||f.left.group!=a)&&(null==f.top||f.top.group!=a)})}},{key:"bottomRight",get:function(){var a=this;return this.cells.find(function(f){return(null==f.right||f.right.group!=a)&&(null==f.bottom||f.bottom.group!=a)})}},{key:"position",get:function(){return this.topLeft.position}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CellGroup"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:31080,end:34312})}(void 0);nd.CellGroup=TF;nd.CellGroup=TF;nd.CellGroup=TF;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("LayoutAxis")&&
"function"===typeof e.LayoutAxis?e.LayoutAxis:e.LayoutAxis=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.origin=a}},{key:"otherAxis",get:function(){return[].concat($jscomp.arrayFromIterable(this.axisBefore),$jscomp.arrayFromIterable(this.axisAfter))}},{key:"axisBefore",get:function(){for(var a=this,f=[];a=a.before;)f=[a].concat($jscomp.arrayFromIterable(f));
return f}},{key:"axisAfter",get:function(){for(var a=this,f=[];a=a.after;)f=[].concat($jscomp.arrayFromIterable(f),[a]);return f}},{key:"before",get:function(){throw Error("before() not implemented!");}},{key:"after",get:function(){throw Error("after() not implemented!");}},{key:"containerLength",get:function(){return this.container[this.dimension]}},{key:"containerLength",set:function(a){this.container[this.dimension]=a}},{key:"getRoot",value:function(){return(this.axisBefore[0]||this).items[0]}},
{key:"container",get:function(){return this.origin.container}},{key:"layout",get:function(){return this.origin.layout}},{key:"frozen",get:function(){return this.origin.frozen[this.dimension]}},{key:"frozen",set:function(a){this.origin.frozen[this.dimension]=a}},{key:"align",set:function(a){this.items.forEach(function(f){return f.group.state.align=a})}},{key:"fixed",get:function(){return this.origin.fixed[this.dimension]}},{key:"fixed",set:function(a){var f=this;if(nd.obj.isNumber(a)){var m=a;a=!0}this.items.forEach(function(r){r.fixed[f.dimension]=
a});var q=this.containerLength;void 0!=m&&(this[this.dimension]=m);this.adjustOtherProportions(a);this.containerLength=q}},{key:"length",get:function(){return this.origin[this.dimension]}},{key:"length",set:function(a){var f=this;this.items.forEach(function(m){m[f.dimension]=nd.num.roundTo(a,1)})}},{key:"proportion",get:function(){return this.origin.proportion[this.dimension]}},{key:"proportion",set:function(a){var f=this;this.items.forEach(function(m){m.proportion[f.dimension]=a})}},{key:"min",get:function(){return this.origin.min[this.dimension]}},
{key:"min",set:function(a){this.adjustMin(a-this.min)}},{key:"adjustMin",value:function(a){var f=this;this.items.forEach(function(m){m.min[f.dimension]=0>m.min[f.dimension]+a?0:m.min[f.dimension]+a});this.layout.apply()}},{key:"adjustProportion",value:function(){this.fixed||(this.proportion=0<this.dynamicLength?this.length/this.dynamicLength:0)}},{key:"adjustOtherProportions",value:function(a){var f=this,m=this.axisBefore,q=this.axisAfter,r=nd.arr.sum([].concat($jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(q)).filter(function(y){return!y.fixed}).map(function(y){return y.proportion})),
u=function(y){return y.proportion/=r},v=function(y){return y.proportion*=f.origin.removedDynamicProportions};a&&(this.origin.removedDynamicProportions=r);m.forEach(a?u:v);q.forEach(a?u:v)}},{key:"prepareForResize",value:function(a){a=this.proportion*Math.max(0,a-this.staticLength);this.frozen&&a>=this.min?(this.fixed=this.frozen=!1,this.length=a):!this.frozen&&this.min>a&&(this.fixed=this.frozen=!0,this.length=this.min);return this}},{key:"adjustLength",value:function(a){var f;0>this.length+a&&(a=
-this.length);(f=this.axisAfter.find(function(m){return!m.fixed}))?(a=Math.min(a,f.length),this.length+=a,f.length-=a,this.adjustProportion(),f.adjustProportion()):(f=this.axisBefore.reverse().find(function(m){return!m.fixed}))?(f.length-=a,this.length+=a,this.adjustProportion(),f.adjustProportion()):(this.length+=a,this.adjustProportion(),this.otherAxis.forEach(function(m){return m.adjustProportion()}),this.containerLength+=a)}},{key:"equalizeDynamicAxis",value:function(){var a=[].concat($jscomp.arrayFromIterable(this.otherAxis.filter(function(m){return!m.fixed})),
$jscomp.arrayFromIterable(this.fixed?[]:[this])),f=(this.containerLength-this.staticLength)/a.length;a.map(function(m){m.fixed||(m.length=f);return m}).forEach(function(m){return m.adjustProportion()})}},{key:"addBefore",value:function(){var a=this.emptyAxis();this.before&&this.before.attachTo(a);a.attachTo(this);this.equalizeDynamicAxis();this.layout.grid=this.getRoot()}},{key:"addAfter",value:function(){var a=this.emptyAxis();this.after&&a.attachTo(this.after);this.attachTo(a);this.equalizeDynamicAxis();
this.layout.grid=this.getRoot()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutAxis"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:34952,end:40669})})(void 0);var UF=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("LayoutColumn")&&
"function"===typeof e.LayoutColumn?e.LayoutColumn:e.LayoutColumn=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.above),[a],$jscomp.arrayFromIterable(a.below))}},{key:"dimension",get:function(){return"width"}},
{key:"before",get:function(){return this._before||(this._before=this.origin.left&&new nd.LayoutColumn(this.origin.left))}},{key:"after",get:function(){return this._after||(this._after=this.origin.right&&new nd.LayoutColumn(this.origin.right))}},{key:"row",value:function(a){return this.items[a]}},{key:"dynamicLength",get:function(){return this.origin.dynamicWidth}},{key:"staticLength",get:function(){return this.origin.totalStaticWidth}},{key:"width",get:function(){return this.length}},{key:"width",
set:function(a){a-=this.width;this.fixed?(this.length+=a,this.container.width+=a):this.adjustLength(a);!this.layout.manualUpdate&&this.layout.apply()}},{key:"paddingLeft",set:function(a){this.items.forEach(function(f){f.padding.x=a});this.layout.apply()}},{key:"paddingLeft",get:function(){return this.items[0].padding.x}},{key:"paddingRight",set:function(a){this.items.forEach(function(f){f.padding.width=a});this.layout.apply()}},{key:"paddingRight",get:function(){return this.items[0].padding.width}},
{key:"emptyAxis",value:function(){var a=new nd.LayoutColumn(new nd.LayoutCell({column:nd.arr.withN(this.items.length,null),layout:this.layout}));nd.arr.zip(a.items,this.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.height=m.height;f.fixed.height=m.fixed.height;f.frozen.height=m.frozen.height;f.proportion.height=m.proportion.height;f.min.height=m.min.height});return a}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=
null;nd.arr.zip(this.items,a.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.right=m;m.left=f});this.equalizeDynamicAxis();return a}},{key:"remove",value:function(){var a=this,f=this.before||this.after;this.items.forEach(function(m){m.left&&(m.left.right=m.right);m.right&&(m.right.left=m.left);m.group.disconnect(m);a.layout.removeGroup(m.group)});this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=
this.after.getRoot());f.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutColumn"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:40678,end:43052})}(nd.LayoutAxis);nd.LayoutColumn=UF;nd.LayoutColumn=UF;nd.LayoutColumn=UF;var VF=function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("LayoutRow")&&"function"===typeof e.LayoutRow?e.LayoutRow:e.LayoutRow=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.items=[].concat($jscomp.arrayFromIterable(a.before),
[a],$jscomp.arrayFromIterable(a.after))}},{key:"dimension",get:function(){return"height"}},{key:"emptyAxis",value:function(){var a=new nd.LayoutRow(new nd.LayoutCell({row:nd.arr.withN(this.items.length,null),layout:this.layout}));nd.arr.zip(a.items,this.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.width=m.width;f.fixed.width=m.fixed.width;f.frozen.width=m.frozen.width;f.proportion.width=m.proportion.width;f.min.width=m.min.width});return a}},{key:"paddingTop",
set:function(a){this.items.forEach(function(f){f.padding.y=a});this.layout.apply()}},{key:"paddingTop",get:function(){return this.items[0].padding.y}},{key:"paddingBottom",set:function(a){this.items.forEach(function(f){f.padding.height=a});this.layout.apply()}},{key:"paddingBottom",get:function(){return this.items[0].padding.height}},{key:"before",get:function(){return this._before||(this._before=this.origin.top&&new nd.LayoutRow(this.origin.top))}},{key:"after",get:function(){return this._after||
(this._after=this.origin.bottom&&new nd.LayoutRow(this.origin.bottom))}},{key:"dynamicLength",get:function(){return this.origin.dynamicHeight}},{key:"staticLength",get:function(){return this.origin.totalStaticHeight}},{key:"attachTo",value:function(a){this.after&&(this.after._before=null);this._after=null;nd.arr.zip(this.items,a.items).forEach(function(f){var m=$jscomp.makeIterator(f);f=m.next().value;m=m.next().value;f.bottom=m;m.top=f});this.equalizeDynamicAxis();return a}},{key:"col",value:function(a){return this.items[a]}},
{key:"height",get:function(){return this.length}},{key:"height",set:function(a){a-=this.height;this.fixed?(this.length+=a,this.container.height+=a):(this.adjustLength(a),this.proportion=0<this.origin.dynamicHeight?this.height/this.origin.dynamicHeight:0);!this.layout.manualUpdate&&this.layout.apply()}},{key:"remove",value:function(){var a=this,f=this.before||this.after;this.items.forEach(function(m){m.top&&(m.top.bottom=m.bottom);m.bottom&&(m.bottom.top=m.top);m.group.disconnect(m);a.layout.removeGroup(m.group)});
this.before&&(this.before._after=null);this.after&&(this.after._before=null);this.before||(this.layout.grid=this.after.getRoot());f.equalizeDynamicAxis()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutRow"}}],e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:43061,
end:45522})}(nd.LayoutAxis);nd.LayoutRow=VF;nd.LayoutRow=VF;nd.LayoutRow=VF;var WF=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("LayoutCell")&&"function"===typeof e.LayoutCell?e.LayoutCell:e.LayoutCell=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a.row,m=a.column,q=a.top,r=a.left,
u=a.right,v=a.bottom;a=a.layout;var y;f=$jscomp.makeIterator(f||[]);var z=f.next().value;f=$jscomp.arrayFromIterator(f);m=$jscomp.makeIterator(m||[]);var B=m.next().value;m=$jscomp.arrayFromIterator(m);this.layout=a;this.fixed={width:!1,height:!1};this.frozen={width:!1,height:!1};this.min={width:0,height:0};this.top=q;this.left=r;this.bottom=v;this.right=u;this.padding=nd.rect(0,0,0,0);0<f.length?this.right=new nd.LayoutCell({row:f,left:this,layout:a}):0<m.length&&(this.bottom=new nd.LayoutCell({column:m,
top:this,layout:a}));this.proportion={width:1/(1+this.before.length+this.after.length),height:1/(1+this.above.length+this.below.length)};this.height=this.container.height*this.proportion.height;this.width=this.container.width*this.proportion.width;(y=a&&a.getCellGroupFor(z||B))?y.connect(this):this.group=new nd.CellGroup({cell:this,morph:z||B,layout:a})}},{key:"container",get:function(){return this.layout.container}},{key:"above",get:function(){return this.collect({neighbor:"top",prepend:!0})}},{key:"below",
get:function(){return this.collect({neighbor:"bottom",append:!0})}},{key:"before",get:function(){return this.collect({neighbor:"left",prepend:!0})}},{key:"after",get:function(){return this.collect({neighbor:"right",append:!0})}},{key:"collect",value:function(a){var f=a.neighbor,m=a.prepend;a=a.append;for(var q=[],r=this;r=r[f];)m&&(q=[r].concat($jscomp.arrayFromIterable(q))),a&&(q=[].concat($jscomp.arrayFromIterable(q),[r]));return q}},{key:"col",value:function(a){for(var f=this,m=a;0<m&&f;)f=f.right,
m--;if(!f)throw Error(a+" out of bounds! Last column was "+(a-m-1));return new nd.LayoutColumn(f)}},{key:"row",value:function(a){for(var f=this,m=a;0<m&&f;)f=f.bottom,m--;if(!f)throw Error(a+" out of bounds! Last row was "+(a-m-1));return new nd.LayoutRow(f)}},{key:"extent",get:function(){return nd.pt(this.width,this.height)}},{key:"staticWidth",get:function(){return this.fixed.width||this.min.width==this.width}},{key:"staticHeight",get:function(){return this.fixed.height||this.min.height==this.height}},
{key:"totalStaticWidth",get:function(){return nd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),$jscomp.arrayFromIterable(this.after)).filter(function(a){return a.staticWidth}).map(function(a){return a.width}))}},{key:"totalStaticHeight",get:function(){return nd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return a.staticHeight}).map(function(a){return a.height}))}},{key:"dynamicWidth",get:function(){return nd.arr.sum([this].concat($jscomp.arrayFromIterable(this.before),
$jscomp.arrayFromIterable(this.after)).filter(function(a){return!a.staticWidth}).map(function(a){return a.width}))}},{key:"dynamicHeight",get:function(){return nd.arr.sum([this].concat($jscomp.arrayFromIterable(this.above),$jscomp.arrayFromIterable(this.below)).filter(function(a){return!a.staticHeight}).map(function(a){return a.height}))}},{key:"height",get:function(){return Math.max(this.min.height,this._height||0)}},{key:"height",set:function(a){this._height=a}},{key:"width",get:function(){return Math.max(this.min.width,
this._width||0)}},{key:"width",set:function(a){this._width=a}},{key:"position",get:function(){return nd.pt(nd.arr.sum(this.before.map(function(a){return a.width})),nd.arr.sum(this.above.map(function(a){return a.height})))}},{key:"bounds",value:function(){return this.position.addPt(this.padding.topLeft()).extent(this.extent.subPt(this.padding.extent()).subPt(this.padding.topLeft()))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LayoutCell"}}],e,{pathInPackage:function(){return"layout.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:45531,end:49183})}(void 0);nd.LayoutCell=WF;nd.LayoutCell=WF;nd.LayoutCell=WF;var iy=wa("aN",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/layout.js"),l=e.hasOwnProperty("GridLayout")&&"function"===typeof e.GridLayout?e.GridLayout:e.GridLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=Object.assign({autoAssign:!0,fitToCell:!0},a);this.cellGroups=[];this.config=a}},{key:"name",value:function(){return"Grid"}},{key:"description",value:function(){return"Aligns the submorphs alongside a configurable grid. Columns and rows and be configured to have different proportional, minimal or fixed sizes. Cells can further be grouped such that submorphs fill up multiple slots of the grid."}},
{key:"copy",value:function(){return new this.constructor(this.getSpec())}},{key:"getSpec",value:function(){for(var a=[],f=[],m=[],q={},r=$jscomp.makeIterator(nd.arr.range(0,this.rowCount-1)),u=r.next();!u.done;u=r.next())a.push(this.grid.row(u.value).items.map(function(y){return y.group.state.morph?y.group.state.morph.name||y.group.state.morph:null}));r=$jscomp.makeIterator(nd.arr.range(0,this.rowCount-1));for(u=r.next();!u.done;u=r.next()){u=u.value;var v=this.grid.row(u);f.push(u,Object.assign({},
v.fixed?{fixed:v.length}:{height:v.height},{paddingTop:v.paddingTop,paddingBottom:v.paddingBottom}))}r=$jscomp.makeIterator(nd.arr.range(0,this.columnCount-1));for(u=r.next();!u.done;u=r.next())u=u.value,v=this.grid.col(u),m.push(u,Object.assign({},v.fixed?{fixed:v.length}:{},{paddingLeft:v.paddingLeft,paddingRight:v.paddingRight}));r=$jscomp.makeIterator(this.cellGroups);for(u=r.next();!u.done;u=r.next())u=u.value,u.state.morph&&(q["string"===typeof u.state.morph?u.state.morph:u.morph.name]=nd.obj.select(u,
["align","resize"]));return{autoAssign:!1,grid:a,rows:f,columns:m,groups:q}}},{key:"__serialize__",value:function(){return{__expr__:"new GridLayout("+nd.obj.inspect(this.getSpec(),{escapeKeys:!0})+")",bindings:{"lively.morphic":["GridLayout"]}}}},{key:"initGrid",value:function(){var a=this,f=this.ensureGrid(this.config).map(function(m){return new nd.LayoutRow(new nd.LayoutCell({row:m,layout:a}))});f.reduce(function(m,q){return m.attachTo(q)});this.config.autoAssign&&this.autoAssign(this.notInLayout);
this.grid=f[0].col(0);this.col(0).equalizeDynamicAxis();this.row(0).equalizeDynamicAxis();this.initRowsAndColumns();this.initGroups()}},{key:"initGroups",value:function(){var a=this.config.groups;if(a)for(var f in a){var m=this.getCellGroupFor(this.container.getSubmorphNamed(f)),q=a[f],r=q.resize,u=void 0===q.align?"topLeft":q.align;q=void 0===q.alignedProperty?"topLeft":q.alignedProperty;m&&(void 0!=r&&(m.resize=r),m.align=u,m.alignedProperty=q)}}},{key:"initRowsAndColumns",value:function(){var a=
this.config,f=void 0===a.columns?[]:a.columns,m=$jscomp.makeIterator(nd.arr.toTuples(void 0===a.rows?[]:a.rows,2));for(a=m.next();!a.done;a=m.next()){var q=$jscomp.makeIterator(a.value);a=q.next().value;q=q.next().value;Object.assign(this.row(a),q)}f=$jscomp.makeIterator(nd.arr.toTuples(f,2));for(a=f.next();!a.done;a=f.next())m=$jscomp.makeIterator(a.value),a=m.next().value,q=m.next().value,Object.assign(this.col(a),q)}},{key:"compensateOrigin",get:function(){return this.config.compensateOrigin}},
{key:"compensateOrigin",set:function(a){this.config.compensateOrigin=a;this.apply()}},{key:"fitToCell",get:function(){return this.config.fitToCell}},{key:"fitToCell",set:function(a){this.config.fitToCell=a;this.cellGroups.forEach(function(f){return f.resize=a});this.apply()}},{key:"notInLayout",get:function(){return nd.arr.withoutAll(this.layoutableSubmorphs,this.cellGroups.map(function(a){return a.morph}))}},{key:"col",value:function(a){return this.grid.col(a)}},{key:"row",value:function(a){return this.grid.row(a)}},
{key:"rowCount",get:function(){return this.grid.col(0).items.length}},{key:"columnCount",get:function(){return this.grid.row(0).items.length}},{key:"addGroup",value:function(a){this.cellGroups.push(a)}},{key:"removeGroup",value:function(a){nd.arr.remove(this.cellGroups,a)}},{key:"fitAxis",value:function(){var a=this,f,m;[this.grid.row(0)].concat($jscomp.arrayFromIterable(this.grid.row(0).axisAfter)).map(function(q){q.prepareForResize(a.container.height);f=a.grid.totalStaticHeight;return q}).forEach(function(q){q.fixed||
(q.length=q.proportion*Math.max(0,a.container.height-f))});[this.grid.col(0)].concat($jscomp.arrayFromIterable(this.grid.col(0).axisAfter)).map(function(q){q.prepareForResize(a.container.width);m=a.grid.totalStaticWidth;return q}).forEach(function(q){q.fixed||(q.length=q.proportion*Math.max(0,a.container.width-m))})}},{key:"apply",value:function(a){a=void 0===a?!1:a;this.active||(this.active=!0,zb._get(Object.getPrototypeOf(l.prototype),"apply",this).call(this,a),this.grid||this.initGrid(),this.fitAxis(),
this.container.extent=nd.pt(Math.max(this.grid.totalStaticWidth,this.container.width),Math.max(this.grid.totalStaticHeight,this.container.height)),this.fitAxis(),this.cellGroups.forEach(function(f){f&&f.apply(a)}),this.lastBoundsExtent=this.container.bounds().extent(),this.active=!1)}},{key:"submorphBoundsChanged",get:function(){for(var a=$jscomp.makeIterator(this.cellGroups),f=a.next();!f.done;f=a.next())if(f=f.value,f.morph&&!f.bounds().equals(f.morph.bounds()))return!0;return!1}},{key:"getCellGroupFor",
value:function(a){return a&&this.cellGroups.find(function(f){return f.morph==a})}},{key:"onSubmorphRemoved",value:function(a){var f=this.getCellGroupFor(a);f&&(f.morph=null);zb._get(Object.getPrototypeOf(l.prototype),"onSubmorphRemoved",this).call(this,a)}},{key:"inspect",value:function(a){}},{key:"ensureGrid",value:function(a){var f=this,m=a.grid,q=a.rowCount,r=a.columnCount;m=m||[[]];q=q||m.length;r=r||nd.arr.max(m.map(function(u){return u.length}));m.length<q&&(m=m.concat(nd.arr.withN(q-m.length,
[])));return m=m.map(function(u){u.length<r&&(u=u.concat(nd.arr.withN(r-u.length,null)));return u.map(function(v){return v&&v.isMorph?(v.owner!=f.container&&f.container.addMorph(v),v):v?f.container.getSubmorphNamed(v)||v:v})})}},{key:"autoAssign",value:function(a){var f=this;a.forEach(function(m){var q,r=Infinity;f.cellGroups.forEach(function(u){u.morph||u.cells.forEach(function(v){v=v.position.dist(m.position);v<r&&(q=u,r=v)})});q&&(q.morph=m)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GridLayout"}}],
e,{pathInPackage:function(){return"layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:49192,end:56229})}(nd.Layout));nd.GridLayout=iy;nd.GridLayout=iy;nd.GridLayout=iy;var G6=Object.freeze({__proto__:null,CustomLayout:OF,SnapLayout:PF,VerticalLayout:hy,HorizontalLayout:Os,ProportionalLayout:QF,CenteredTilingLayout:RF,TilingLayout:SF,
CellGroup:TF,LayoutColumn:UF,LayoutRow:VF,LayoutCell:WF,GridLayout:iy});wa("bS",G6);var de=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js");de.getAllPartResources=NP;de.loadPart=ZI;de.savePart=OP;de.interactivelySavePart=sE;de.interactivelyLoadObjectFromPartsBinFolder=PP;de.interactivelySaveObjectToPartsBinFolder=QP;de.saveObjectToPartsbinFolder=RP;de.loadObjectFromPartsbinFolder=$I;de.buildCommitEditor=SP;de.resource=x;de.Resource=Nf;de.registerExtension=A;de.Path=Cg;de.obj=lf;de.date=
iu;de.promise=oe;de.HorizontalLayout=Os;de.VerticalLayout=hy;de.morph=sb;de.Morph=Mj;de.pt=nf;de.Color=xf;de.Rectangle=Pd;de.connect=Oe;de.emit=Jn;de.SnapshotPackageHelper=zL;de.ensureCommitInfo=jE;de.MorphicDB=Bu;de.createMorphSnapshot=Dz;de.getClassName=yo;de.getAllPartResources=NP;de.getAllPartResources=NP;de.loadPart=ZI;de.loadPart=ZI;de.savePart=OP;de.savePart=OP;de.interactivelySavePart=sE;de.interactivelySavePart=sE;de.interactivelyLoadObjectFromPartsBinFolder=PP;de.interactivelyLoadObjectFromPartsBinFolder=
PP;de.interactivelySaveObjectToPartsBinFolder=QP;de.interactivelySaveObjectToPartsBinFolder=QP;de.saveObjectToPartsbinFolder=RP;de.saveObjectToPartsbinFolder=RP;de.loadObjectFromPartsbinFolder=$I;de.loadObjectFromPartsbinFolder=$I;var hT=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),l=e.hasOwnProperty("SnapshotEditor")&&"function"===typeof e.SnapshotEditor?e.SnapshotEditor:e.SnapshotEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f,m){this.commit=a;this.snapshot=f;this._db=m}},{key:"db",get:function(){return this._db||de.MorphicDB.default}},{key:"saveModifiedSnapshot",value:function(a,f){var m=this,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){q=a;r=q._id;u=q.name;v=q.type;if(!r)throw Error("No id of commit, cannot save!");return y.yield(m.db.commit(v,u,f,a,void 0,r),2)}a=y.yieldResult;m.commit=
a;m.snapshot=f;return y.return(a)})}},{key:"interactivelySaveModifiedSnapshot",value:function(a,f){var m=this,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){q=de.promise.deferred();r=q.promise;u=q.resolve;v=q.reject;y=m;Object.assign(de.buildCommitEditor(),{commit:Object.assign({},m.commit,{},a),cancel:function(){(this.getWindow()||this).remove();v("canceled")},accept:function(){var B=this,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return F.setCatchFinallyBlocks(2),
F.yield(y.saveModifiedSnapshot(B.commit,f),4);if(2!=F.nextAddress)return C=F.yieldResult,(B.getWindow()||B).remove(),u(B.commit=C),F.leaveTryBlock(0);G=F.enterCatchBlock();B.showError(G);v(G);F.jumpToEnd()})}}).openInWindow({title:"commit"});return z.return(r)})}},{key:"interactivelyEditMetadata",value:function(a){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(f.interactivelySaveModifiedSnapshot(f.commit,f.snapshot),2);m=q.yieldResult;
"function"===typeof a&&a({commit:m,snapshot:f.snapshot});return q.return(m)})}},{key:"interactivelyEditSnapshotJSON",value:function(a){var f=this,m,q,r,u,v,y,z,B,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return m=f,q=m.commit,r=m.snapshot,u=q,v=u._id,y=u.name,z=u.type,F.yield(System.import("lively.ide/text-editor.js"),2);C=F.yieldResult;G=C.default;G.openURL("<"+z+"/"+y+">",{historyId:"object-serialization-debugger-editor",customSaveAction:function(N){var L,
S,ha,qa,D,P;return $jscomp.asyncExecutePromiseGeneratorProgram(function(J){switch(J.nextAddress){case 1:if(L=r){J.jumpTo(2);break}return J.yield(f.db.fetchSnapshot(void 0,void 0,v),3);case 3:L=J.yieldResult;case 2:S=L;ha=JSON.stringify(S,null,2);if(ha===B){J.jumpTo(4);break}return J.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),5);case 5:if(qa=J.yieldResult,!qa)return J.return({saved:!1,
message:"canceled"});case 4:return D=JSON.parse(N.ui.contentText.textString),J.yield(f.interactivelySaveModifiedSnapshot(f.commit,D),6);case 6:return q=J.yieldResult,r=D,B=N.ui.contentText.textString,P={saved:!0,snapshot:D,commit:q},"function"===typeof a&&a(P),J.return(P)}})},customLoadContentAction:function(N,L){var S,ha;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qa){if(1==qa.nextAddress)return(S=r)?qa.jumpTo(2):qa.yield(f.db.fetchSnapshot(void 0,void 0,v),3);2!=qa.nextAddress&&
(S=qa.yieldResult);ha=S;return qa.return({content:B=JSON.stringify(ha,null,2),url:z+"/"+y+".json"})})}});F.jumpToEnd()})}},{key:"interactivelyEditPackageCode",value:function(a){var f=this,m,q,r,u,v,y,z,B,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){switch(L.nextAddress){case 1:m=f;q=m.commit;r=m.snapshot;u=q;v=u._id;if(y=r){L.jumpTo(2);break}return L.yield(f.db.fetchSnapshot(void 0,void 0,v),3);case 3:y=L.yieldResult;case 2:return z=y,B=(new de.SnapshotPackageHelper(z)).filesInPackages(),
C=B.map(function(S){return{isListItem:!0,string:S.url,value:S}}),L.yield($world.filterableListPrompt("Select file to edit",C,{historyId:"object-serialization-debugger-hist"}),4);case 4:return G=L.yieldResult,F=$jscomp.makeIterator(G.selected),(N=F.next().value)?L.return(f.interactivelyEditFileInSnapshotPackage(N,a)):L.return()}})}},{key:"interactivelyEditFileInSnapshotPackage",value:function(a,f,m){var q=this,r,u,v,y,z,B,C,G,F,N,L,S;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ha){switch(ha.nextAddress){case 1:r=
q;u=r.snapshot;v=r.commit;y=v._id;z=v.name;B=v.type;if(C=u){ha.jumpTo(2);break}return ha.yield(q.db.fetchSnapshot(void 0,void 0,y),3);case 3:C=ha.yieldResult;case 2:return G=C,F=a.get(G),ha.yield(System.import("lively.ide/text-editor.js"),4);case 4:return N=ha.yieldResult,L=N.default,S=L.openURL("<"+B+"/"+z+" - "+a.path.slice(1).join("/")+">",{historyId:"interactivelyEditFileInSnapshotPackage-hist",customSaveAction:function(qa){var D,P,J,M;return $jscomp.asyncExecutePromiseGeneratorProgram(function(X){switch(X.nextAddress){case 1:D=
a.get(G);if(D===F){X.jumpTo(2);break}return X.yield($world.confirm(["The content you are editing was changed in the mean time.\nDo you want to save anyway and overwrite those changes?",{fontWeight:"normal"}]),3);case 3:if(P=X.yieldResult,!P)return X.return({saved:!1,message:"canceled"});case 2:return a.set(G,qa.ui.contentText.textString),J=q,X.yield(q.interactivelySaveModifiedSnapshot(q.commit,G),4);case 4:return J.commit=X.yieldResult,M={commit:q.commit,snapshot:G,saved:!0},"function"===typeof f&&
f(M),X.return(M)}})},customLoadContentAction:function(qa,D){return{content:a.get(G),url:a.url}}}),m&&S.whenRendered().then(function(){return S.lineNumber=m.row}),ha.return(S)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SnapshotEditor"}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:9614,end:14833})}(void 0);de.SnapshotEditor=hT;de.SnapshotEditor=hT;de.SnapshotEditor=hT;de.partURLRe=/^part:\/\/([^\/]+)\/(.*)$/;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),l=e.hasOwnProperty("PartResource")&&"function"===typeof e.PartResource?e.PartResource:e.PartResource=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"canDealWithJSON",
get:function(){return!1}},{key:"dirList",value:function(a,f){var m=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?q.yield(de.resource(m.url.replace("part://","styleguide://")).dirList(a,f),2):q.return(q.yieldResult)})}},{key:"write",value:function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){throw Error("Part urls are ready only! Please go to the world they are defined in and change the exported component directly.");})}},{key:"read",
value:function(){var a=this,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(de.resource(a.url.replace("part://","styleguide://")).read(),2);case 2:f=y.yieldResult;if(!f.master){y.jumpTo(3);break}return y.yield(f.master.whenReady(),3);case 3:m=f.copy();m.isComponent=!1;m.name="a"+de.getClassName(m);m.withAllSubmorphsDoExcluding(function(z){z!=m&&z.master||delete z._parametrizedProps},function(z){return z.master&&z!=m});q=m.master;
m.master=f;if(!m._pool.mastersInSubHierarchy){y.jumpTo(5);break}r=$jscomp.makeIterator(m._pool.mastersInSubHierarchy);u=r.next();case 6:if(u.done){y.jumpTo(5);break}v=u.value;if(q==v){y.jumpTo(7);break}return y.yield(v.applyIfNeeded(!0),9);case 9:v.derivedMorph.ownerChain().includes(m)||v.derivedMorph.requestMasterStyling();case 7:u=r.next();y.jumpTo(6);break;case 5:return m.master.applyIfNeeded(!0),delete m._pool,m.withAllSubmorphsDo(function(z){if("function"===typeof z.onLoad)z.onLoad()}),y.return(m)}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PartResource"}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14883,end:16657})})(de.Resource);var iT={name:"part",matches:function(b){return b.match(de.partURLRe)},resourceClass:de.PartResource};de.resourceExtension=iT;
de.resourceExtension=iT;de.resourceExtension=iT;de.registerExtension(de.resourceExtension);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/partsbin.js"),l=e.hasOwnProperty("CommitEditor")&&"function"===typeof e.CommitEditor?e.CommitEditor:e.CommitEditor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onLoad",value:function(){de.connect(this.ui.okButton,"fire",this,"accept");de.connect(this.ui.cancelButton,
"fire",this,"cancel")}},{key:"accept",value:function(){}},{key:"cancel",value:function(){}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CommitEditor"}},{key:"properties",get:function(){return{name:{defaultValue:"commit editor"},extent:{defaultValue:de.pt(420,24)},layout:{initialize:function(){this.layout=new de.VerticalLayout({resizeSubmorphs:!0,spacing:3})}},commit:{set:function(a){this._commit=a;var f=a.type,m=a.timestamp,q=a.author,r=a.tags,u=a.description,v=a.metadata,y=this.ui,
z=y.typeInput,B=y.timestampInput,C=y.authorNameInput,G=y.authorEmailInput,F=y.authorRealmInput,N=y.tagsInput,L=y.descriptionInput,S=y.messageInput,ha=y.metadataInput;y.nameInput.input=a.name;z.input=f;B.input=String(new Date(m));C.input=q.name;G.input=q.email;F.input=q.realm;N.input=r.join(" ");L.textString=u;S.textString="";ha.textString=v?JSON.stringify(v,null,2):""},get:function(){var a=this._commit;if(!a)throw Error("commit editor does not have a _commit object");var f=this.ui,m=f.authorNameInput,
q=f.authorEmailInput,r=f.authorRealmInput,u=f.tagsInput,v=f.descriptionInput,y=f.messageInput,z=f.metadataInput,B=f.nameInput.input;f=f.typeInput.input;if(a.name!==B)throw Error("name does not match _commit.name: "+B+" vs "+a.name);if(a.type!==f)throw Error("type does not match _commit.type: "+f+" vs "+a.type);a.author.name=m.input;a.author.email=q.input;a.author.realm=r.input;a.tags=u.input.split(" ").map(function(C){return C.trim()}).filter(Boolean);a.description=v.textString;a.message=y.textString;
a.metadata=z.textString?JSON.parse(z.textString):null;return a}},ui:{get:function(){return{metadataInput:this.get("metadata input"),messageInput:this.get("message input"),descriptionInput:this.get("description input"),tagsInput:this.get("tags input"),authorRealmInput:this.get("author.realm input"),authorEmailInput:this.get("author.email input"),authorNameInput:this.get("author.name input"),timestampInput:this.get("timestamp input"),typeInput:this.get("type input"),nameInput:this.get("name input"),
cancelButton:this.get("cancel button"),okButton:this.get("ok button")}}},submorphs:{initialize:function(){var a={type:"input",extent:de.pt(420,24),fixedWidth:!0,fixedHeight:!0,padding:de.Rectangle.inset(4,4),border:{color:de.Color.gray,width:1}};this.submorphs=[Object.assign({},a,{name:"name input",placeholder:"name"}),Object.assign({},a,{name:"type input",placeholder:"type"}),Object.assign({},a,{name:"timestamp input",placeholder:"timestamp"}),{layout:new de.VerticalLayout({resizeSubmorphs:!0,spacing:3}),
submorphs:[Object.assign({},a,{name:"author.name input",placeholder:"author name"}),Object.assign({},a,{name:"author.email input",placeholder:"author email"}),Object.assign({},a,{name:"author.realm input",placeholder:"author realm"})]},Object.assign({},a,{name:"tags input",placeholder:"tags"}),Object.assign({},a,{height:70,name:"description input",type:"text"}),Object.assign({},a,{height:70,name:"message input",type:"text"}),Object.assign({},a,{height:70,name:"metadata input",type:"text"}),{layout:new de.HorizontalLayout({spacing:3,
direction:"centered"}),submorphs:[{type:"button",name:"ok button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}]}}}}}],e,{pathInPackage:function(){return"partsbin.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:16843,end:21937})})(de.Morph);de.buildCommitEditor=SP;de.buildCommitEditor=SP;var jf=lively.FreezerRuntime.recorderFor("lively.morphic/world-loading.js");
jf.loadWorldFromURL=aJ;jf.loadWorldFromCommit=bJ;jf.loadWorldFromDB=cJ;jf.loadWorld=dJ;jf.loadLocalConfig=function(){var b,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){switch(l.nextAddress){case 1:return b=lively.modules.module("localconfig.js"),l.setCatchFinallyBlocks(2),l.yield(jf.resource(b.id).exists(),4);case 4:if(!l.yieldResult){l.jumpTo(5);break}return l.yield(b.reload({resetEnv:!1,reloadDeps:!1}),5);case 5:l.leaveTryBlock(0);break;case 2:e=l.enterCatchBlock(),console.error("Error loading localconfig:",
e),"undefined"!==typeof $world&&$world.showError("Error loading localconfig.js: "+e),l.jumpToEnd()}})};jf.setupLivelyShell=function(b){var e,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return r.yield(lively.modules.importPackage("lively.shell"),2);case 2:return r.yield(System.import("lively.shell/client-command.js"),3);case 3:return e=r.yieldResult,l=e.default,r.yield(System.import("lively.shell/client-resource.js"),4);case 4:a=r.yieldResult,
f=a.resourceExtension,m=b,q=m.l2lClient,l.installLively2LivelyServices(q),f.resourceClass.defaultL2lClient=q,jf.registerResourceExension(f),console.log("[lively] lively.shell setup"),r.jumpToEnd()}})};jf.setupLively2Lively=function(b){var e,l,a,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return e=b.getCurrentUser(),l={world:b.name},e&&(l.userToken=e.token,l.userRealm=e.realm),q.yield(lively.modules.importPackage("lively.2lively"),2);case 2:return q.yield(System.import("lively.2lively/client.js"),
3);case 3:return a=q.yieldResult,f=a.default,q.yield(f.forLivelyInBrowser(l),4);case 4:return m=q.yieldResult,console.log("[lively] lively2lively client created "+m),m._onUserChange?jf.reportWorldLoad(b,e):(m._onUserChange=function(r){m.isOnline()&&r.user&&(r=r.user,m.info=Object.assign({},m.info,{userToken:r.token,userRealm:r.realm}),m.unregister().then(function(){return m.register()}).then(function(){return console.log("re-registered after user change")}))},jf.subscribe("lively.user/userchanged",
m._onUserChange,System),m.once("registered",function(){jf.reportWorldLoad(b,e)}),m.on("registered",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(m)}),m.on("connected",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(m)}),m.on("reconnecting",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(m)}),m.on("disconnected",function(){var r=b.get("user flap");r&&r.updateNetworkIndicator(m)})),q.return(m)}})};jf.interactivelySaveWorld=UB;jf.reportWorldLoad=function(b,
e){e=e?e.name+" ("+(e.token||"").slice(0,5)+")":"---";fetch("/report-world-load",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e+" logged in at "+b.name+" ["+window._livelyLoadId+"]"})}).catch(function(l){return console.warn("report-world-load failed: "+l)})};jf.resource=x;jf.registerResourceExension=A;jf.Color=xf;jf.Path=Cg;jf.obj=lf;jf.date=iu;jf.promise=oe;jf.MorphicEnv=ar;jf.createMorphSnapshot=Dz;jf.MorphicDB=Bu;jf.ensureCommitInfo=jE;jf.pathForBrowserHistory=
fb;jf.subscribe=Hn;jf.emit=Jn;jf.defaultDirectory=WI;jf.ShellClientResource=un;jf.loadWorldFromURL=aJ;jf.loadWorldFromURL=aJ;jf.loadWorldFromCommit=bJ;jf.loadWorldFromCommit=bJ;jf.loadWorldFromDB=cJ;jf.loadWorldFromDB=cJ;jf.loadWorld=dJ;jf.loadWorld=dJ;jf.interactivelySaveWorld=UB;jf.interactivelySaveWorld=UB;var lj=lively.FreezerRuntime.recorderFor("lively.user/client/user.js");lj.jwtTokenDecode=function(b){b=$jscomp.makeIterator(b.split("."));b.next();var e=b.next().value;b.next();return JSON.parse(atob(e))};
lj.guid=function(){var b=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};lj.makeRequest=function(b,e,l,a){a=void 0===a?{}:a;e={method:void 0===e?"GET":e,mode:"cors"};l&&(e.body=l);e.redirect="follow";e.headers=Object.assign({},a);return fetch(b,e)};lj.POST=function(b,e){var l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return"string"!==typeof e&&(e=JSON.stringify(e)),
m.yield(lj.makeRequest(b,"POST",e,{}),2);case 2:return l=m.yieldResult,m.setCatchFinallyBlocks(3),m.yield(l.text(),5);case 5:a=m.yieldResult;m.leaveTryBlock(4);break;case 3:m.enterCatchBlock();case 4:if(a&&"application/json"===l.headers.get("content-type"))try{f=JSON.parse(a)}catch(q){}if(!f)throw Error("Unexpected response: "+a);return m.return(f)}})};var uA=wa("bN",function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),l=e.hasOwnProperty("User")&&"function"===typeof e.User?
e.User:e.User=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.realm=f;this.name=a;this.roles={};this.createdAt=0;this.token=this.email=null}},{key:"isLoggedIn",value:function(){return!!this.token}},{key:"loginOrRegister",value:function(a,f,m){var q=this,r,u,v,y,z,B,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==
L.nextAddress)return r=q,u=r.email,v=r.createdAt,y=r.roles,z=r.name,B="register"===a?{password:f,email:u,createdAt:v,roles:y,name:z}:{password:f,name:z},L.yield(lj.POST(m+"/"+a,B),2);C=L.yieldResult;if(C.error)return L.return(C);G=C;F=G.token;N=lj.jwtTokenDecode(F);y=N.roles;v=N.createdAt;u=N.email;Object.assign(q,{roles:y,createdAt:v,email:u,token:F});return L.return({status:C.status})})}},{key:"verify",value:function(){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==
q.nextAddress)return q.yield(lj.POST(a.realm+"/verify",{token:a.token}),2);f=q.yieldResult;m=f.error;return q.return(m?!1:!0)})}},{key:"login",value:function(a){return this.loginOrRegister("login",a,this.realm)}},{key:"register",value:function(a){return this.loginOrRegister("register",a,this.realm)}},{key:"checkPassword",value:function(a){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!f.isLoggedIn)throw Error("To check password, user needs to login.");
return u.yield(lj.POST(f.realm+"/check-password",{token:f.token,password:a}),2)}m=u.yieldResult;q=m.error;r=m.status;if(q)throw Error(q);return u.return(r)})}},{key:"modify",value:function(a){var f=this,m,q,r,u,v,y,z,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(lj.POST(f.realm+"/modify",{token:f.token,changes:a}),2);m=C.yieldResult;q=m.error;r=m.status;u=m.token;if(q)return C.return({error:q});u&&(v=lj.jwtTokenDecode(u),y=v.roles,z=v.createdAt,
B=v.email,Object.assign(f,{roles:y,createdAt:z,email:B,token:u}));return C.return({status:r})})}},{key:"toString",value:function(){return"<"+this.constructor.name+" "+this.name+" "+(this.isLoggedIn()?"":"not ")+"logged in>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"User"}},{key:"guest",get:function(){return lj.guestUser}},{key:"named",value:function(a,f){var m=a+"-"+f,q=lj.userMap.get(m);q||(q=new this(a,f),lj.userMap.set(m,q));return q}},{key:"fromToken",value:function(a,f){var m=
lj.jwtTokenDecode(a),q=m.roles,r=m.createdAt,u=m.email;return Object.assign(this.named(m.name,f),{roles:q,createdAt:r,email:u,token:a})}},{key:"clearCache",value:function(){lj.userMap=new Map}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:1032,end:3466})}(void 0));lj.User=uA;lj.User=
uA;lj.User=uA;var vA=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user.js"),l=e.hasOwnProperty("GuestUser")&&"function"===typeof e.GuestUser?e.GuestUser:e.GuestUser=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"isGuestUser",get:function(){return!0}},{key:"isLoggedIn",value:function(){return!1}},{key:"loginOrRegister",value:function(a,f,m){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){throw Error("Guest user cannot "+
a+"!");})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GuestUser"}}],e,{pathInPackage:function(){return"client/user.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:3476,end:3702})}(lj.User);lj.GuestUser=vA;lj.GuestUser=vA;lj.GuestUser=vA;lj.userMap=lj.userMap||new Map;lj.guestUser=lj.guestUser||lj.GuestUser.named("guest-"+
lj.guid(),null);var Ps=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js");Ps.User=uA;Ps.GuestUser=vA;Ps.emit=Jn;var jT=function(b){var e=lively.FreezerRuntime.recorderFor("lively.user/client/user-registry.js"),l=e.hasOwnProperty("UserRegistry")&&"function"===typeof e.UserRegistry?e.UserRegistry:e.UserRegistry=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"isTrackingGuestUsers",
get:function(){return!1}},{key:"hasUserStored",value:function(){try{return!!localStorage["lively.user"]||!!sessionStorage["lively.user"]}catch(a){return!1}}},{key:"login",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return a.isGuestUser?u.jumpTo(2):u.yield(a.login(f),3);if(2!=u.nextAddress&&(q=u.yieldResult,r=q.error))throw Error(r);m.saveUserToLocalStorage(a);return u.return(a)})}},{key:"logout",value:function(a){var f=this;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){try{f.isTrackingGuestUsers||(delete localStorage["lively.user"],delete sessionStorage["lively.user"])}catch(q){}a=a&&a.isGuestUser?a:Ps.User.guest;Ps.emit("lively.user/userchanged",{user:a},Date.now(),System);return m.return(a)})}},{key:"register",value:function(a,f){var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){if(!a||a.isGuestUser)throw Error("guest users cannot register");return u.yield(a.register(f),
2)}q=u.yieldResult;if(r=q.error)throw Error(r);m.saveUserToLocalStorage(a);return u.return(a)})}},{key:"loadUserFromLocalStorage",value:function(a){try{var f=localStorage["lively.user"]||sessionStorage["lively.user"];if(f)return f=JSON.parse(f),f.isGuest?Ps.GuestUser.named(f.name,null):Ps.User.fromToken(f.token,a)}catch(m){console.warn("Could not read user from localStorage: "+m)}return this.isTrackingGuestUsers?!1:Ps.GuestUser.guest}},{key:"saveUserToLocalStorage",value:function(a){if(!a||!a.isGuestUser&&
!a.token)return!1;Ps.emit("lively.user/userchanged",{user:a},Date.now(),System);try{return a.isGuestUser&&!this.isTrackingGuestUsers?(sessionStorage["lively.user"]=JSON.stringify({isGuest:!0,name:a.name}),delete localStorage["lively.user"]):localStorage["lively.user"]=a.isGuestUser&&this.isTrackingGuestUsers?JSON.stringify({isGuest:!0,name:a.name}):JSON.stringify({token:a.token}),!0}catch(f){return console.warn("Could not save user into local/sessionStorage: "+f),!1}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"UserRegistry"}},{key:"current",get:function(){return this._current||(this._current=new this)}}],e,{pathInPackage:function(){return"client/user-registry.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.user",version:"0.2.0"}}},{start:135,end:2531})}(void 0);jT=Ps.UserRegistry;var OL=wa("bM",jT);Ps.default=jT;var HC=lively.FreezerRuntime.recorderFor("lively.user/index.js");
HC.User=uA;HC.ClientUser=uA;HC.GuestUser=vA;HC.GuestUser=vA;HC.default=OL;HC.UserRegistry=OL;var Wna=Object.freeze({__proto__:null,ClientUser:uA,GuestUser:vA,UserRegistry:OL});lively.FreezerRuntime.recorderFor("lively.collab/comments/commentMorph.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentIndicator.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/commentBrowser.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/comment.js");lively.FreezerRuntime.recorderFor("lively.collab/comments/badge.js");
var vr=lively.FreezerRuntime.recorderFor("lively.collab/index.js");vr.CommentGroupMorph=void 0;vr.CommentGroupMorph=void 0;vr.CommentMorph=void 0;vr.CommentMorph=void 0;vr.CommentIndicator=void 0;vr.CommentIndicator=void 0;vr.CommentBrowser=void 0;vr.CommentBrowser=void 0;vr.Comment=void 0;vr.Comment=void 0;vr.Badge=void 0;vr.Badge=void 0;var mf=lively.FreezerRuntime.recorderFor("lively.morphic/world.js");mf.bowser=ir;mf.Rectangle=Pd;mf.Color=xf;mf.pt=nf;mf.arr=Qe;mf.promise=oe;mf.Path=Cg;mf.obj=
lf;mf.signal=oj;mf.config=vk;mf.MorphicEnv=ar;mf.Morph=Mj;mf.TooltipViewer=GC;mf.Tooltip=rA;mf.loadWorldFromURL=aJ;mf.loadWorldFromDB=cJ;mf.loadWorldFromCommit=bJ;mf.loadWorld=dJ;mf.touchInputDevice=Mp;mf.UserRegistry=OL;mf.emit=Jn;mf.resource=x;mf.loadMorphFromSnapshot=bu;mf.CommentBrowser=void 0;var Wv=wa("a$",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),l=e.hasOwnProperty("World")&&"function"===typeof e.World?e.World:e.World=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this._renderer=null;this._tooltipViewer=new mf.TooltipViewer(this)}},{key:"__deserialize__",value:function(a,f,m,q){zb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,q);this._renderer=null;this._tooltipViewer=new mf.TooltipViewer(this)}},
{key:"__additionally_serialize__",value:function(a,f,m,q){zb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,q);if(a.props.submorphs)for(a=a.props.submorphs.value,f=a.length;f--;)m.refForId(a[f].id).realObj.isHand&&mf.arr.removeAt(a,f)}},{key:"commands",get:function(){return[].concat($jscomp.arrayFromIterable(zb._get(Object.getPrototypeOf(l.prototype),"commands",this)),[{name:"resize to fit window",exec:function(a){var f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:f=
function(){a.extent=lively.FreezerRuntime?a.windowBounds().extent():a.windowBounds().union(a.submorphBounds(function(v){return!v.isEpiMorph&&!v.hasFixedPosition})).extent()},m=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(a.whenRendered(),2);delete a._cachedWindowBounds;return v.return(!a.windowBounds().extent().equals(a.extent))})},q=0;case 2:if(!(r=5>q)){u.jumpTo(4);break}return u.yield(m(),5);case 5:r=u.yieldResult;case 4:if(!r){u.jumpTo(3);
break}q++;f();u.jumpTo(2);break;case 3:return a.relayout(),u.return(!0)}})}}])}},{key:"isWorld",get:function(){return!0}},{key:"whenReady",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.return(!0)})}},{key:"render",value:function(a){return a.renderWorld(this)}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"existingHandForPointerId",value:function(a){return this.submorphs.find(function(f){return f instanceof mf.Hand&&
f.pointerId===a})}},{key:"layoutHaloForPointerId",value:function(a){}},{key:"haloForPointerId",value:function(a){}},{key:"handForPointerId",value:function(a,f){f=void 0===f?!1:f;var m=this.existingHandForPointerId(a);return m?m:!m&&this.firstHand&&f?(this.firstHand.pointerId=a,this.firstHand):this.addMorph(new mf.Hand(a),this.submorphs[0])}},{key:"removeHandForPointerId",value:function(a){(a=this.existingHandForPointerId(a))&&1<this.hands.length&&a.remove()}},{key:"world",value:function(){return this}},
{key:"makeDirty",value:function(){if(!this._dirty){this._dirty=!0;var a=this.env.renderer;a&&a.renderLater()}}},{key:"hands",get:function(){return mf.arr.sortBy(this.submorphs.filter(function(a){return a.isHand}),function(a){return a.pointerId})}},{key:"firstHand",get:function(){return this.hands[0]}},{key:"getCurrentUser",value:function(){return mf.UserRegistry.current.loadUserFromLocalStorage(window.AUTH_SERVER_URL||mf.config.users.authServerURL)}},{key:"focusedMorph",get:function(){var a=this.env.eventDispatcher;
return(a=a&&a.eventState.focusedMorph)&&a.world()===this?a:this}},{key:"onMouseMove",value:function(a){a.hand&&a.hand.update(a);this._tooltipViewer.mouseMove(a)}},{key:"onMouseDown",value:function(a){a.state.menu&&a.state.menu.remove();this.onWindowScroll();this._tooltipViewer.mouseDown(a)}},{key:"onMouseUp",value:function(a){a.isCommandKey()&&a.stop();if(a.isAltDown()&&mf.config.altClickDefinesThat){var f=this.morphsContainingPoint(a.position)[0];setTimeout(function(){return System.global.that=f},
100);f.show();a.stop();console.log('Set global "that" to '+f)}}},{key:"onMouseWheel",value:function(a){a.isShiftDown()&&(window.scrollBy(-a.domEvt.wheelDeltaX,-a.domEvt.wheelDeltaY),a.stop())}},{key:"onBeforeUnload",value:function(a){return this.onUnload(a)}},{key:"onUnload",value:function(a){this.submorphs.forEach(function(f){if("function"===typeof f.onWorldUnload)f.onWorldUnload(a)})}},{key:"updateVisibleWindowMorphs",value:function(){this.withAllSubmorphsDo(function(a){if(a.respondsToVisibleWindow){if("function"!==
typeof a.relayout)return a.showError(Error(a+" listed as responding to visible window change, but has no relayout instruction"));a.relayout()}})}},{key:"onWindowScroll",value:function(){var a=this.env.eventDispatcher.keyInputHelper.inputState,f=a.positionChangedTime,m=a.scrollLeftWhenChanged;a=a.scrollTopWhenChanged;var q=document.documentElement;500>Date.now()-f&&!mf.bowser.firefox?(q.scrollLeft=m,q.scrollTop=a):(this.setProperty("scroll",mf.pt(q.scrollLeft,q.scrollTop)),this._cachedWindowBounds=
null,this.updateVisibleWindowMorphs())}},{key:"onWindowResize",value:function(a){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(f.whenRendered(),2);if(3!=u.nextAddress)return f._cachedWindowBounds=null,"elastic"!==f.resizePolicy?u.jumpTo(3):u.yield(f.execCommand("resize to fit window"),3);f.updateVisibleWindowMorphs();m=$jscomp.makeIterator(f.submorphs);for(q=m.next();!q.done;q=m.next())if(r=q.value,"function"===typeof r.onWorldResize)r.onWorldResize(a);
u.jumpToEnd()})}},{key:"relayCommandExecutionToFocusedMorph",value:function(a){if(!a)return null;var f=this.focusedMorph,m=mf.arr.findAndGet(mf.arr.without([f].concat($jscomp.arrayFromIterable(f.ownerChain())),this),function(q){return mf.arr.findAndGet(q.keyhandlers,function(r){return(r=r.eventCommandLookup(q,a))?{command:r,morph:q}:null})})||{};f=m.command;m=m.morph;return f?m.execCommand(f):null}},{key:"visibleBounds",value:function(){return this.env.renderer?this.windowBounds().intersection(this.innerBounds()):
this.innerBounds()}},{key:"visibleBoundsExcludingTopBar",value:function(){return this.visibleBounds()}},{key:"windowBounds",value:function(a){if(this._cachedWindowBounds)return this._cachedWindowBounds;a=this.env.domEnv.window;var f=1/this.scale;return this._cachedWindowBounds=new mf.Rectangle(a.scrollX*f,a.scrollY*f,(a.innerWidth||this.width)*f,(a.innerHeight||this.height)*f)}},{key:"logError",value:function(a){console.log(a)}},{key:"relayout",value:function(){}},{key:"defaultMenuItems",value:function(a){return[]}},
{key:"serveFileAsDownload",value:function(a,f){var m=void 0===f?{}:f;f=void 0===m.fileName?"file.txt":m.fileName;m=void 0===m.type?"text/plain":m.type;var q=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i,r=a instanceof Blob,u=window.document.createElement("a");u.href=mf.obj.isString(a)&&a.match(q)?a:window.URL.createObjectURL(r?a:new Blob([a],{type:m}));u.download=f;document.body.appendChild(u);u.click();document.body.removeChild(u)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"World"}},{key:"properties",get:function(){return{resizePolicy:{doc:"how the world behaves on window size changes 'elastic': resizes to window extent, 'static': leaves its extent unchanged",defaultValue:"elastic",after:["clipMode"],type:"Enum",values:["static","elastic"],set:function(a){this.setProperty("resizePolicy",a);this.clipMode="static"===a?"visible":"hidden";"elastic"==a&&this.execCommand("resize to fit window")}},colorScheme:{derived:!0,get:function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?
"dark":"light"}},showsUserFlap:{defaultValue:!0,set:function(a){var f=this,m=mf.resource(document.location.href).query().showsUserFlap;"undefined"!==typeof m&&(a=m);this.setProperty("showsUserFlap",a);System.import("lively.user/morphic/user-ui.js").then(function(q){return q.UserUI[a?"showUserFlap":"hideUserFlap"](f).then(function(){a&&(f.enableComments=!0)})})}},enableComments:{defaultValue:!0,set:function(a){this.setProperty("enableComments",a);a&&mf.CommentBrowser.initializeCommentBrowser()}}}}},
{key:"defaultWorld",value:function(){return mf.MorphicEnv.default().world}},{key:"loadWorldFromURL",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return mf.loadWorldFromURL(a,f,m)}},{key:"loadWorld",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return mf.loadWorld(a,f,m)}},{key:"loadFromCommit",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;return mf.loadWorldFromCommit(a,f,m)}},{key:"loadFromDB",value:function(a,
f,m,q){m=void 0===m?this.defaultWorld():m;q=void 0===q?{}:q;return mf.loadWorldFromDB(a,f,m,q)}},{key:"loadFromResource",value:function(a,f,m){f=void 0===f?this.defaultWorld():f;m=void 0===m?{}:m;var q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return q=mf,r=q.loadWorld,u=mf,v=u.loadMorphFromSnapshot,y.yield(a.readJson(),4);case 4:return y.yield(v.call(u,y.yieldResult),3);case 3:return y.yield(r.call(q,y.yieldResult,f,m),2);case 2:return y.return(y.yieldResult)}})}}],
e,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:823,end:12344})}(mf.Morph));mf.World=Wv;mf.World=Wv;mf.World=Wv;var IC=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/world.js"),l=e.hasOwnProperty("Hand")&&"function"===typeof e.Hand?e.Hand:e.Hand=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,{pointerId:a})}},{key:"__deserialize__",value:function(a,f,m,q){zb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,q);this.reset()}},{key:"reset",value:function(){this._grabbedMorphProperties=new WeakMap}},{key:"isHand",
get:function(){return!0}},{key:"pointerId",get:function(){return this.getProperty("pointerId")}},{key:"pointerId",set:function(a){this.setProperty("pointerId",a)}},{key:"draggable",get:function(){return!1}},{key:"draggable",set:function(a){}},{key:"grabbable",get:function(){return!1}},{key:"grabbable",set:function(a){}},{key:"grabbedMorphs",get:function(){return this.submorphs}},{key:"carriesMorphs",value:function(){return!!this.grabbedMorphs.length}},{key:"morphsContainingPoint",value:function(a,
f){return f}},{key:"update",value:function(a){this.position=a.position.subXY(window.scrollX,window.scrollY)}},{key:"cancelGrab",value:function(a,f){a=void 0===a?!0:a;var m=this,q,r,u,v,y,z,B,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(!m.grabbedMorphs.length)return F.return();m.env.eventDispatcher.cancelGrab(m,f);q=[];r=$jscomp.makeIterator(m.grabbedMorphs);for(u=r.next();!u.done;u=r.next())v=u.value,y=m._grabbedMorphProperties.get(v)||{},z=y.prevOwner,B=y.prevIndex,C=y.prevPosition,
G=y.pointerAndShadow,Object.assign(v,G),z?(z.addMorphAt(v,B),a?q.push(v.animate({position:C})):v.position=C):v.remove();return F.return(q.length?Promise.all(q):null)})}},{key:"grab",value:function(a){var f=this;if(mf.obj.isArray(a))return a.forEach(function(m){return f.grab(m)});this.withMetaDo({metaInteraction:!0},function(){f._grabbedMorphProperties.set(a,{prevOwner:a.owner,prevPosition:a.position,prevIndex:a.owner?a.owner.submorphs.indexOf(a):-1,pointerAndShadow:mf.obj.select(a,["dropShadow","reactsToPointer"])});
a.reactsToPointer=!1;a.dropShadow=!0;f.addMorph(a)});mf.signal(this,"grab",a)}},{key:"dropMorphsOn",value:function(a){var f=this;this.withMetaDo({metaInteraction:!0},function(){f.grabbedMorphs.forEach(function(m){try{var q=(f._grabbedMorphProperties.get(m)||{}).pointerAndShadow;Object.assign(m,q);mf.signal(f,"drop",m);m.onBeingDroppedOn(f,a)}catch(r){console.error(r),f.world().showError("Error dropping "+m+" onto "+a+":\n"+r.stack),m.owner!==a&&f.world().addMorph(a)}})})}},{key:"findDropTarget",value:function(a,
f,m){var q=this;a=void 0===a?this.globalPosition:a;f=void 0===f?this.grabbedMorphs:f;a=this.world().morphsContainingPoint(a);return mf.arr.sortBy(a,function(r){return[r].concat($jscomp.arrayFromIterable(r.ownerChain())).find(function(u){return mf.Path("owner.isWorld").get(u)&&u.hasFixedPosition})?0:1}).find("function"===typeof m?function(r,u){return!q.isAncestorOf(r)&&r.acceptsDrops&&!f.includes(r)&&f.every(function(v){return v.wantsToBeDroppedOn(r)})&&m(r,u)}:function(r){return!q.isAncestorOf(r)&&
r.acceptsDrops&&r.ownerChain().every(function(u){return u.visible})&&f.every(function(u){return u.wantsToBeDroppedOn(r)})})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Hand"}},{key:"properties",get:function(){return{hasFixedPosition:{defaultValue:!0},fill:{defaultValue:mf.touchInputDevice?mf.Color.transparent:mf.Color.orange},extent:{defaultValue:mf.pt(1,1)},reactsToPointer:{defaultValue:!1},_grabbedMorphProperties:{serialize:!1,initialize:function(){this._grabbedMorphProperties=
new WeakMap}}}}}],e,{pathInPackage:function(){return"world.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:12353,end:16399})}(mf.Morph);mf.Hand=IC;mf.Hand=IC;mf.Hand=IC;var Xna=Object.freeze({__proto__:null,World:Wv,Hand:IC}),fk=lively.FreezerRuntime.recorderFor("lively.morphic/text/position.js");fk.comparePosition=TP;fk.lessPosition=
eu;fk.lessEqPosition=VB;fk.eqPosition=fu;fk.minPosition=WB;fk.maxPosition=XB;fk.comparePosition=TP;fk.comparePosition=TP;fk.lessPosition=eu;fk.lessPosition=eu;fk.lessEqPosition=VB;fk.lessEqPosition=VB;fk.eqPosition=fu;fk.eqPosition=fu;fk.minPosition=WB;fk.minPosition=WB;fk.maxPosition=XB;fk.maxPosition=XB;var fg=lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js");fg.lessPosition=eu;fg.lessEqPosition=VB;fg.eqPosition=fu;fg.minPosition=WB;fg.maxPosition=XB;var jy=wa("bu",function(b){var e=
lively.FreezerRuntime.recorderFor("lively.morphic/text/range.js"),l=e.hasOwnProperty("Range")&&"function"===typeof e.Range?e.Range:e.Range=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=a=void 0===a?{start:{row:0,column:0},end:{row:0,column:0}}:a,m=f.start;a=m.row;m=m.column;var q=f.end;f=q.row;q=q.column;if(f<a||f===a&&q<m)m=$jscomp.makeIterator([a,
m,f,q]),f=m.next().value,q=m.next().value,a=m.next().value,m=m.next().value;this.start={row:a,column:m};this.end={row:f,column:q}}},{key:"isRange",get:function(){return!0}},{key:"isEmpty",value:function(){return this.start.row===this.end.row&&this.start.column===this.end.column}},{key:"equals",value:function(a){return a&&a.start&&a.end?fg.eqPosition(this.start,a.start)&&fg.eqPosition(this.end,a.end):!1}},{key:"copy",value:function(){return new fg.Range(this)}},{key:"toLiteral",value:function(){return{start:this.start,
end:this.end}}},{key:"merge",value:function(a){a.isRange||(a=new fg.Range(a));return fg.lessPosition(this.end,a.start)||fg.lessPosition(a.end,this.start)?this:fg.Range.fromPositions(fg.minPosition(this.start,a.start),fg.maxPosition(this.end,a.end))}},{key:"without",value:function(a){a.isRange||(a=new fg.Range(a));var f=fg.Range.compare(this,a);return 0===f?fg.Range.fromPositions(this.start,this.start):5<=Math.abs(f)?this:0>f?fg.Range.fromPositions(this.start,a.start):fg.Range.fromPositions(a.end,
this.end)}},{key:"intersect",value:function(a){a.isRange||(a=new fg.Range(a));var f=fg.Range.compare(this,a),m=0>f?this:a;a=0>f?a:this;switch(Math.abs(f)){case 0:case 1:return new fg.Range(m);case 2:case 3:return new fg.Range(a);case 4:return fg.Range.fromPositions(a.start,m.end);case 5:return fg.Range.at(a.start);case 6:return fg.Range.at(m.end)}}},{key:"subtract",value:function(a){a.isRange||(a=new fg.Range(a));switch(fg.Range.compare(this,a)){case -6:case -5:case 5:case 6:return[new fg.Range(this)];
case -1:case 0:case 2:case 3:return[fg.Range.at(this.start)];case 1:case 4:return[fg.Range.fromPositions(a.end,this.end)];case -4:case -3:return[fg.Range.fromPositions(this.start,a.start)];case -2:return[fg.Range.fromPositions(this.start,a.start),fg.Range.fromPositions(a.end,this.end)]}}},{key:"containsPosition",value:function(a){return fg.lessEqPosition(this.start,a)&&fg.lessEqPosition(a,this.end)}},{key:"toString",value:function(){var a=this.start,f=this.end;return"Range("+a.row+"/"+a.column+" -> "+
f.row+"/"+f.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Range"}},{key:"sort",value:function(a){return a.sort(fg.Range.compare)}},{key:"compare",value:function(a,f){var m=a.start,q=a.end,r=f.start,u=f.end;return fg.lessPosition(m,r)?fg.lessPosition(q,r)?-6:fg.eqPosition(q,r)?-5:fg.lessPosition(q,u)?-4:fg.eqPosition(q,u)?-3:-2:fg.eqPosition(m,r)?fg.eqPosition(q,u)?0:fg.lessPosition(q,u)?-1:1:-1*fg.Range.compare(f,a)}},{key:"at",value:function(a){return new this({start:a,
end:a})}},{key:"fromPositions",value:function(a,f){return new this({start:a,end:f})}},{key:"create",value:function(a,f,m,q){return new this({start:{row:a,column:f},end:{row:m,column:q}})}},{key:"isValidLiteral",value:function(a){return a?a.isRange?!0:a.start&&a.end&&"number"===typeof a.start.row&&"number"===typeof a.start.column&&"number"===typeof a.end.row&&"number"===typeof a.end.column:!1}}],e,{pathInPackage:function(){return"text/range.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:108,end:5369})}(void 0));fg.Range=jy;fg.Range=jy;fg.Range=jy;var PL=new fg.Range;fg.defaultRange=PL;fg.defaultRange=PL;fg.defaultRange=PL;var bj=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js");bj.lessPosition=eu;bj.Range=jy;bj.defaultRange=PL;bj.config=vk;bj.string=Hg;bj.arr=Qe;bj.signal=oj;var QL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),
l=e.hasOwnProperty("Selection")&&"function"===typeof e.Selection?e.Selection:e.Selection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.textMorph=a;this.initialize(f)}},{key:"isSelection",get:function(){return!0}},{key:"initialize",value:function(a){this._goalX=this._goalColumn=void 0;this._isReverse=!1;var f=bj.string.newUUID();this.startAnchor=
this.textMorph.addAnchor("selection-start-"+f);this.endAnchor=this.textMorph.addAnchor("selection-end-"+f);this.range=bj.Range.isValidLiteral(a)?a:bj.defaultRange;this._cursorVisible=!0;this.cursorBlinkProcess=null}},{key:"isSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.cursorBlinkStop();this.textMorph.removeAnchor(this.startAnchor);this.textMorph.removeAnchor(this.endAnchor)}},{key:"compareRangesForMerge",value:function(a,f){var m=a.start,q=m.row;m=m.column;var r=a.end,
u=r.row;r=r.column;var v=f.start,y=v.row;v=v.column;var z=f.end,B=z.row;z=z.column;return q<y||q===y&&m<v?u<y||u===y&&r<v?"separate":u===y&&r===v?y===B&&v===z?"overlapping":"bordering":"overlapping":q===y&&m===v?u===B&&r===z?"equal":"overlapping":this.compareRangesForMerge(f,a)}},{key:"mergeWith",value:function(a){if(!a||!a.isSelection)return!1;var f=this.compareRangesForMerge(this.range,a.range);if("separate"===f||"bordering"===f)return!1;this.range=this.range.merge(a.range);a.isReverse()!=this.isReverse()&&
this.reverse();return!0}},{key:"range",get:function(){return this._range}},{key:"range",set:function(a){if(a){var f=a,m=f.start;f=f.end;if(void 0!==m&&void 0!==f){var q=this.textMorph.document;"number"===typeof m&&(a.start=m=q.indexToPosition(m));"number"===typeof f&&(a.end=f=q.indexToPosition(f));if(bj.Range.isValidLiteral(a)){m=q.clipPositionToLines(m);f=q.clipPositionToLines(f);if(this._isReverse=bj.lessPosition(f,m))f=$jscomp.makeIterator([f,m]),m=f.next().value,f=f.next().value;a.start=m;a.end=
f;a.isRange||(a=new bj.Range(a));a.equals(this._range)||(this._range=a,this._goalColumn=this.textMorph.lineWrapping?this.textMorph.columnInWrappedLine(this.lead):this.lead.column,this._goalX=this.textMorph.charBoundsFromTextPosition(this.lead).x,this.startAnchor.position=a.start,this.endAnchor.position=a.end,this.textMorph.makeDirty(),bj.signal(this.textMorph,"selectionChange",this))}}}}},{key:"directedRange",get:function(){return{end:this.lead,start:this.anchor}}},{key:"updateFromAnchors",value:function(){this.range=
{start:this.startAnchor.position,end:this.endAnchor.position}}},{key:"start",get:function(){return this.range.start}},{key:"start",set:function(a){this.range=bj.Range.fromPositions(a,this.end)}},{key:"end",get:function(){return this.range.end}},{key:"end",set:function(a){this.range=bj.Range.fromPositions(this.start,a)}},{key:"selectionColor",get:function(){return this.textMorph.selectionColor||"#bed8f7"}},{key:"anchor",get:function(){return this.isReverse()?this.range.end:this.range.start}},{key:"anchor",
set:function(a){this.range={start:a,end:this.lead}}},{key:"lead",get:function(){return this.isReverse()?this.range.start:this.range.end}},{key:"lead",set:function(a){this.range={start:this.anchor,end:a}}},{key:"text",get:function(){return this.textMorph.document.textInRange(this.range)}},{key:"text",set:function(a){this.replace(a)}},{key:"replace",value:function(a,f,m,q){var r=this.range,u=this.textMorph,v=this.isReverse();this.range=u.replace(r,a,f,m,q);v&&this.reverse();return this.range}},{key:"selectedRows",
get:function(){return{first:this.start.row,last:this.end.row}}},{key:"reverse",value:function(){this._isReverse=!this.isEmpty()&&!this._isReverse;return this}},{key:"isReverse",value:function(){return this._isReverse&&!this.isEmpty()}},{key:"isEmpty",value:function(){return this.range.isEmpty()}},{key:"collapse",value:function(a){a=void 0===a?this.start:a;this.range={start:a,end:a};return this}},{key:"collapseToEnd",value:function(){this.collapse(this.end);return this}},{key:"growLeft",value:function(a){var f=
this.textMorph.document,m=f.positionToIndex(this.end);a=Math.min(m,f.positionToIndex(this.start)-a);m=this.isReverse();this.start=f.indexToPosition(a);this._isReverse=m;return this}},{key:"growRight",value:function(a){var f=this.textMorph.document,m=f.positionToIndex(this.start);a=Math.max(m,f.positionToIndex(this.end)+a);m=this.isReverse();this.end=f.indexToPosition(a);this._isReverse=m;return this}},{key:"selectAll",value:function(){this.range={start:{row:0,column:0},end:this.textMorph.document.endPosition};
return this}},{key:"selectLine",value:function(a,f){a=void 0===a?this.lead.row:a;this.includingLineEnd=void 0===f?!1:f;this.range={start:{row:a,column:0},end:{row:a,column:this.textMorph.getLine(a).length}};return this}},{key:"gotoLineEnd",value:function(a){a=void 0===a?this.lead.row:a;a={row:a,column:this.textMorph.getLine(a).length};this.range={start:a,end:a}}},{key:"selectLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()?(this.growLeft(a),this.reverse()):this.isReverse()?this.growLeft(a):
this.growRight(-a);return this}},{key:"selectRight",value:function(a){a=void 0===a?1:a;this.isReverse()?this.growLeft(-a):this.growRight(a);return this}},{key:"selectUp",value:function(a,f){return this.goUp(void 0===a?1:a,f,!0)}},{key:"selectDown",value:function(a,f){return this.selectUp(-(void 0===a?1:a),f)}},{key:"goUp",value:function(a,f,m){a=void 0===a?1:a;m=void 0===m?!1:m;if(0===a)return this;var q=this._goalColumn,r=this._goalX;this.lead=this.textMorph.getPositionAboveOrBelow(a,this.lead,void 0===
f?!1:f,q,r);m||(this.anchor=this.lead);this._goalColumn=q;this._goalX=r;return this}},{key:"goDown",value:function(a,f){return this.goUp(-(void 0===a?1:a),f)}},{key:"goLeft",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growLeft(a);this.collapse();return this}},{key:"goRight",value:function(a){a=void 0===a?1:a;this.isEmpty()&&this.growRight(a);this.collapseToEnd();return this}},{key:"cursorVisible",get:function(){return this._cursorVisible&&this.textMorph.isFocused()&&!this.textMorph.rejectsInput()}},
{key:"cursorBlinkStart",value:function(){var a=this;this.cursorBlinkStop();var f=bj.config.text.cursorBlinkPeriod;if(f){var m=this.textMorph,q=m.env.renderer.getNodeForMorph(m);this.cursorBlinkProcess=setInterval(function(){q||(q=m.env.renderer.getNodeForMorph(m));if(q){a._cursorVisible=!a._cursorVisible;var r=q.className.split(" "),u=r.indexOf("hidden-cursor");a._cursorVisible&&-1<u&&(r.splice(u,1),q.className=r.join(" "));a._cursorVisible||-1!==u||(q.className=[].concat($jscomp.arrayFromIterable(r),
["hidden-cursor"]).join(" "))}},1E3*f)}}},{key:"cursorBlinkStop",value:function(){this.cursorBlinkProcess&&clearInterval(this.cursorBlinkProcess);this.cursorBlinkProcess=null;this._cursorVisible=!0;var a=this.textMorph;if(a=a.env.renderer.getNodeForMorph(a)){var f=a.className.split(" "),m=f.indexOf("hidden-cursor");-1<m&&(f.splice(m,1),a.className=f.join(" "))}}},{key:"toString",value:function(){var a=this.anchor,f=this.lead;return"Selection("+a.row+"/"+a.column+" -> "+f.row+"/"+f.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"Selection"}}],e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:224,end:9243})}(void 0);bj.Selection=QL;bj.Selection=QL;bj.Selection=QL;var RL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/selection.js"),l=e.hasOwnProperty("MultiSelection")&&
"function"===typeof e.MultiSelection?e.MultiSelection:e.MultiSelection=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"initialize",value:function(a){this._selections=[new bj.Selection(this.textMorph,a)]}},{key:"__deserialize__",value:function(a,f){this._selections=[]}},{key:"selections",get:function(){return this._selections}},{key:"selections",set:function(a){var f=this._selections?this._selections.filter(function(m){return!a.includes(m)}):
[];this._selections=a;f.forEach(function(m){return m.uninstall()})}},{key:"isMultiSelection",get:function(){return!0}},{key:"uninstall",value:function(){this.selections.forEach(function(a){return a.uninstall()})}},{key:"defaultSelection",get:function(){return bj.arr.last(this.selections)}},{key:"removeSelections",value:function(a){a=this.selections.slice(void 0===a?1:a);a.forEach(function(f){return f.uninstall()});this.selections=bj.arr.withoutAll(this.selections,a)}},{key:"disableMultiSelect",value:function(){bj.arr.without(this.selections,
this.defaultSelection).forEach(function(a){return a.uninstall()});this.selections=[this.defaultSelection]}},{key:"range",get:function(){return this.defaultSelection.range}},{key:"range",set:function(a){this.disableMultiSelect();this.defaultSelection.range=a}},{key:"updateFromAnchors",value:function(){this.selections.forEach(function(a){return a.updateFromAnchors()})}},{key:"start",get:function(){return this.defaultSelection.start}},{key:"start",set:function(a){this.defaultSelection.start=a}},{key:"end",
get:function(){return this.defaultSelection.end}},{key:"end",set:function(a){this.defaultSelection.end=a}},{key:"anchor",get:function(){return this.defaultSelection.anchor}},{key:"anchor",set:function(a){this.defaultSelection.anchor=a}},{key:"lead",get:function(){return this.defaultSelection.lead}},{key:"lead",set:function(a){this.defaultSelection.lead=a}},{key:"text",get:function(){return this.selections.map(function(a){return a.text}).join("\n")}},{key:"text",set:function(a){this.selections.forEach(function(f){return f.text=
a})}},{key:"selectedRows",get:function(){return this.defaultSelection.selectedRows}},{key:"reverse",value:function(){this.defaultSelection.reverse()}},{key:"isReverse",value:function(){return this.defaultSelection.isReverse()}},{key:"isEmpty",value:function(){return this.defaultSelection.isEmpty()}},{key:"collapse",value:function(a){this.defaultSelection.collapse(a);return this}},{key:"collapseToEnd",value:function(){this.defaultSelection.collapseToEnd();return this}},{key:"growLeft",value:function(a){this.defaultSelection.growLeft(a);
return this}},{key:"growRight",value:function(a){this.defaultSelection.growRight(a);return this}},{key:"selectAll",value:function(){this.disableMultiSelect();this.defaultSelection.selectAll();return this}},{key:"selectLine",value:function(a,f){this.includingLineEnd=f;this.defaultSelection.selectLine(a,f);return this}},{key:"gotoLineEnd",value:function(a){this.defaultSelection.gotoLineEnd(a)}},{key:"selectLeft",value:function(a){this.defaultSelection.selectLeft(a);return this}},{key:"selectRight",
value:function(a){this.defaultSelection.selectRight(a);return this}},{key:"selectUp",value:function(a,f){this.defaultSelection.selectUp(a,f);return this}},{key:"selectDown",value:function(a,f){this.defaultSelection.selectDown(a,f);return this}},{key:"goUp",value:function(a,f){return this.defaultSelection.goUp(a,f)}},{key:"goDown",value:function(a,f){return this.defaultSelection.goDown(a,f)}},{key:"goLeft",value:function(a){return this.defaultSelection.goLeft(a)}},{key:"goRight",value:function(a){return this.defaultSelection.goRight(a)}},
{key:"cursorVisible",get:function(){return this.defaultSelection.cursorVisible}},{key:"style",set:function(a){this.defaultSelection.style=a}},{key:"getTextAttributes",value:function(){return this.defaultSelection.getTextAttributes()}},{key:"toString",value:function(){return"MultiSelection("+this.selections.join(", ")+")"}},{key:"mergeSelections",value:function(){for(var a=this.selections.slice(),f=a.length-1;0<=f;f--)for(var m=a.length-1;0<=m;m--)if(f!==m&&a[m].mergeWith(a[f])){a.splice(f,1);break}this.selections=
a}},{key:"ranges",get:function(){return this.selections.map(function(a){return a.range})}},{key:"ranges",set:function(a){for(var f=0;f<a.length;f++){var m=this.selections[f];m?m.range=a[f]:this.addRange(a[f],!1)}this.removeSelections(f);this.mergeSelections()}},{key:"addRange",value:function(a,f){f=void 0===f?!0:f;this.selections.push(new bj.Selection(this.textMorph,a));f&&this.mergeSelections();return bj.arr.last(this.selections).range}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MultiSelection"}}],
e,{pathInPackage:function(){return"text/selection.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9252,end:13920})}(bj.Selection);bj.MultiSelection=RL;bj.MultiSelection=RL;bj.MultiSelection=RL;var Gg=lively.FreezerRuntime.recorderFor("lively.morphic/text/attributes.js");Gg.shallowEquals=UP;Gg.concatAttributePair=eJ;Gg.joinTextAttributes=
fJ;Gg.splitTextAndAttributesAt=gJ;Gg.splitTextAndAttributesAtColumns=hJ;Gg.concatTextAndAttributes=iJ;Gg.modifyAttributesInRange=jJ;Gg.textAndAttributesWithSubRanges=kJ;Gg.textAndAttributesDo=function(b,e){for(var l=0;l<b.length;l+=2)e(b[l],b[l+1])};Gg.splitTextAndAttributesIntoLines=tE;Gg.eqPosition=fu;Gg.lessPosition=eu;Gg.shallowEquals=UP;Gg.shallowEquals=UP;Gg.concatAttributePair=eJ;Gg.concatAttributePair=eJ;Gg.joinTextAttributes=fJ;Gg.joinTextAttributes=fJ;Gg.splitTextAndAttributesAt=gJ;Gg.splitTextAndAttributesAt=
gJ;Gg.splitTextAndAttributesAtColumns=hJ;Gg.splitTextAndAttributesAtColumns=hJ;Gg.concatTextAndAttributes=iJ;Gg.concatTextAndAttributes=iJ;Gg.modifyAttributesInRange=jJ;Gg.modifyAttributesInRange=jJ;Gg.textAndAttributesWithSubRanges=kJ;Gg.textAndAttributesWithSubRanges=kJ;Gg.splitTextAndAttributesIntoLines=tE;Gg.splitTextAndAttributesIntoLines=tE;var ud=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js");ud.arr=Qe;ud.num=Gk;ud.string=Hg;ud.lessEqPosition=VB;ud.minPosition=WB;ud.maxPosition=
XB;ud.lessPosition=eu;ud.eqPosition=fu;ud.concatTextAndAttributes=iJ;ud.splitTextAndAttributesAtColumns=hJ;ud.splitTextAndAttributesIntoLines=tE;ud.joinTextAttributes=fJ;ud.modifyAttributesInRange=jJ;ud.concatAttributePair=eJ;ud.splitTextAndAttributesAt=gJ;ud.objectReplacementChar="\ufffd";ud.objectReplacementChar="\ufffd";ud.objectReplacementChar="\ufffd";ud.defaultOptions={maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5};(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),
l=e.hasOwnProperty("TreeNode")&&"function"===typeof e.TreeNode?e.TreeNode:e.TreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.parent=a}},{key:"root",get:function(){return this.parent?this.parent.root:this}},{key:"isRoot",get:function(){return!this.parent}},{key:"withParents",value:function(){for(var a=this,f=[];a;)f.push(a),a=a.parent;
return f}},{key:"traverse",value:function(a){var f=[a.call(null,this)];if(this.isLeaf)return f;for(var m=0;m<this.children.length;m++)f.push.apply(f,$jscomp.arrayFromIterable(this.children[m].traverse(a)));return f}},{key:"consistencyCheck",value:function(){var a=[],f=this.isRoot,m=this.isLeaf,q=this.children,r=this.size,u=this.stringSize,v=this.height,y=this.width,z=this.options,B=z.maxLeafSize,C=z.maxNodeSize,G=z.minLeafSize;z=z.minNodeSize;f||0!==r||a.push({error:"size of "+this+" expected to be > 0!"});
if(!Array.isArray(q))return a.push({error:this+".children is not an array but "+q}),a;var F=ud.arr.sum(ud.arr.pluck(q,"size"));F!=r&&a.push({error:"Sum of child sizes is not size of "+this+": "+F+" != "+r});r=ud.arr.sum(ud.arr.pluck(q,"stringSize"));r!=u&&a.push({error:"Sum of child stringSize is not stringSIze of "+this+": "+r+" != "+u});u=ud.arr.sum(ud.arr.pluck(q,"height"));Number.parseInt(u)!=Number.parseInt(v)&&a.push({error:"Sum of child Height is not Height of "+this+": "+u+" != "+v});v=q.length?
Math.max.apply(null,ud.arr.pluck(q,"width")):0;(q.find(function(N){return N.isLine&&N.hasEstimatedExtent})?Number.parseInt(v)>Number.parseInt(y):Number.parseInt(v)!=Number.parseInt(y))&&a.push({error:"max width of children of "+this+" is not node width: "+v+" != "+y});y=m?B:C;!f&&q.length>y&&a.push({error:"children count of "+this+" expected to be between "+(m?G:z)+" and "+y+" but is "+q.length});for(f=0;f<q.length;f++)(G=q[f])?(m&&!G.isLine?a.push({error:"child "+f+" of leaf "+this+" is not a line!"}):
!m&&G.isLine&&a.push({error:"child of non-leaf "+this+" is a line!"}),this!==G.parent&&a.push({error:"child.parent is "+G.parent+" but should be "+this})):a.push({error:"child "+f+" of "+this+" is nullish!"});a.push.apply(a,$jscomp.arrayFromIterable(ud.arr.flatmap(q,function(N){return N.consistencyCheck()})));return a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1422,end:4636})})(void 0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),l=e.hasOwnProperty("InnerTreeNode")&&"function"===typeof e.InnerTreeNode?e.InnerTreeNode:e.InnerTreeNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,
b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.options=a.options;this.children=a.children;this.size=a.size;this.stringSize=a.stringSize;this.height=a.height;this.width=a.width;this.isLeaf=!0}},{key:"isNode",get:function(){return!0}},{key:"resize",value:function(a,f,m){this.size+=a;this.height+=f;this.stringSize+=m;for(var q=0,r=0;r<this.children.length;r++){var u=
this.children[r].width;u>q&&(q=u)}this.width=q;this.parent&&this.parent.resize(a,f,m)}},{key:"lines",value:function(a){a=void 0===a?[]:a;if(this.isLeaf)return a.push.apply(a,$jscomp.arrayFromIterable(this.children)),a;for(var f=0;f<this.children.length;f++)this.children[f].lines(a);return a}},{key:"findRow",value:function(a){if(0>a||a>=this.size)return null;if(this.isLeaf)return this.children[a];for(var f=0;f<this.children.length;f++){var m=this.children[f],q=m.size;if(a<q)return m.findRow(a);a-=
q}return null}},{key:"findLineByVerticalOffset",value:function(a,f,m){f=void 0===f?0:f;m=void 0===m?0:m;if(0>a||a>this.height)return null;for(var q=0;q<this.children.length;q++){var r=this.children[q],u=r.height;if(a<=u)return this.isLeaf?{line:r,offset:a,y:f,row:m}:r.findLineByVerticalOffset(a,f,m);a-=u;f+=u;m+=r.size}return null}},{key:"computeVerticalOffsetOf",value:function(a,f){f=void 0===f?0:f;if(0>a||a>=this.size)return console.warn("strange row in computeVerticalOffsetOf: "+a),f;if(this.isLeaf){for(var m=
0;m<Math.min(a,this.children.length);m++)f+=this.children[m].height;return f}for(m=0;m<this.children.length;m++){var q=this.children[m],r=q.size;if(a<r)return q.computeVerticalOffsetOf(a,f);a-=r;f+=q.height}return f}},{key:"ensureLine",value:function(a){a||(a="");var f="string"===typeof a;return!f&&a.isLine?(a.parent=this,a):new ud.Line({parent:this,width:f?0:a.width||0,height:f?0:a.height||0,textAndAttributes:f?[a,null]:a.textAndAttributes||[a.text||"",null]})}},{key:"insert",value:function(a,f){f=
void 0===f?this.size:f;var m=this.children,q=this.options;if(this.isLeaf){var r=[],u=0,v=0;for(q=0;q<a.length;q++){var y=this.ensureLine(a[q]);r.push(y);u+=y.height;v+=y.stringSize;m.splice(f++,0,y)}this.resize(r.length,u,v);this.balanceAfterGrowth();return r}0===m.length&&m.push(new ud.InnerTreeNode({parent:this,children:[],size:0,stringSize:0,width:0,height:0,options:q}));for(q=0;q<m.length;q++){r=m[q];u=r.size;if(f<=u)return r.insert(a,f);f-=u}f=m[q-1];return f.insert(a,f.size)}},{key:"withParentChainsUpToCommonParentDo",
value:function(a,f,m){for(var q=this.withParents(),r,u=0;a;){if(q.includes(a)){r=a;break}f(a,u++);a=a.parent}f=q.indexOf(r);0>f&&(f=q.length);q=q.slice(0,f);for(f=0;f<q.length;f++)m(q[f],f)}},{key:"findLineWithTextIndex",value:function(a,f){f=void 0===f?0:f;if(this.isLeaf){for(var m=0;m<this.children.length;m++){var q=this.children[m],r=q.stringSize;if(a<r)return{line:q,column:a,row:f};a-=r;f++}a=ud.arr.last(this.children);return{line:a,row:f-1,column:a.stringSize-1}}for(q=m=0;q<this.children.length;q++){r=
this.children[q];var u=r.stringSize;if(a<m+u)return r.findLineWithTextIndex(a-m,f);f+=r.size;m+=u}return ud.arr.last(this.children).findLineWithTextIndex(a-m)}},{key:"findLeafs",value:function(a,f,m){m=void 0===m?0:m;if(a>m+this.size||f<m)return[];if(this.isLeaf){a=Math.max(0,a-m);var q=this.children.length-1;f=Math.min(q,f-m);m=!1;0===a&&f===q&&(m=!0,f=q);return[{node:this,firstLine:a,lastLine:f,full:m}]}q=[];for(var r=0;r<this.children.length;r++){var u=this.children[r];q.push.apply(q,$jscomp.arrayFromIterable(u.findLeafs(a,
f,m)));m+=u.size}return q}},{key:"removeFromToInRoot",value:function(a,f,m){var q=this;if(!this.isRoot)throw Error("removeFromTo() should be called on the root node");a>f&&(f=$jscomp.makeIterator([f,a]),a=f.next().value,f=f.next().value);var r=this.size,u=this.options.minLeafSize,v=this.findLeafs(a,f),y=v.shift();f=v.pop();var z=[],B=!1,C=!1;if(!(a>=r)){f&&y.node===f.node&&(f=null);y.full?(m&&m.log("Removing complete first line "+y),v.push(y)):B=y.node.children.length-(y.lastLine-y.firstLine+1)<u;
f&&(f.full?(m&&m.log("Removing complete last line "+f),v.push(f)):(C=f,C=C.node.children.length-(C.lastLine-C.firstLine+1)<u));if(B||C){var G=(G=y.node.children[0].prevLine())?G.parent:null;var F=(F=ud.arr.last(f?f.node.children:y.node.children).nextLine())?F.parent:null}for(a=0;a<v.length;a++){u=v[a].node;r=u.children.length;for(var N=0,L=0,S=0;S<r;S++){var ha=u.children[S];N+=ha.height;L+=ha.stringSize;ha.parent=null}u.children.length=0;u.resize(-r,-N,-L);if(r=u.parent)u.parent=null,r.children.splice(r.children.indexOf(u),
1),z.includes(r)||z.push(r)}if(!y.full){u=y.firstLine;v=y.node;a=y.lastLine-u+1;u=v.children.splice(u,a);for(L=N=r=0;L<u.length;L++)S=u[L],r+=S.height,N+=S.stringSize,S.parent=null;v.resize(-a,-r,-N)}if(f&&!f.full){a=f;u=a.firstLine;v=a.node;a=a.lastLine-u+1;u=v.children.splice(u,a);for(L=N=r=0;L<u.length;L++)S=u[L],r+=S.height,N+=S.stringSize,S.parent=null;v.resize(-a,-r,-N)}m&&m.dump(""+this.print(!1));B&&y.node.balanceByMergeOrTheft(G,!f||f.full?F:f.node,m);f&&C&&f.node.root===this&&(C=!0,G=y.full||
!y.node.parent?G:y.node,B&&(f.node.root!==this&&(C=!1),G&&G.root!==this&&(G=null),F&&F.root!==this&&(F=null)),C&&f.node.balanceByMergeOrTheft(G,F,m));z.forEach(function(qa){return qa.root===q&&qa.balanceAfterShrink(m)})}}},{key:"balanceByMergeOrTheft",value:function(a,f,m){var q=this,r=this.children,u=this.options,v=this.isLeaf,y=v?u.maxLeafSize:u.maxNodeSize;u=v?u.minLeafSize:u.minNodeSize;v=a&&a.children.length+r.length<=y;y=!v&&f&&f.children.length+r.length<=y;var z=v?a:y?f:null;if(z){m&&m.log("[balanceByMergeOrTheft] merging "+
this+" "+(v?"left":"right")+" into "+z);var B=this.size,C=this.width,G=this.height,F=this.stringSize;r.forEach(function(J){return J.parent=z});v?z.children.push.apply(z.children,$jscomp.arrayFromIterable(r)):z.children.unshift.apply(z.children,$jscomp.arrayFromIterable(r));this.width=r.length=0;this.withParentChainsUpToCommonParentDo(z,function(J){C>J.width&&(J.width=C);J.height+=G;J.size+=B;J.stringSize+=F},function(J){if(C===J.width)for(var M=0;M<J.children.length;M++){var X=J.children[M];X.width>
J.width&&(J.width=X.width)}J.height-=G;J.size-=B;J.stringSize-=F})}else{v=a?Math.ceil((a.children.length-u)/2):0;var N=f?Math.ceil((f.children.length-u)/2):0;if((y=0<v&&v>=N)||!y&&0<N){u=y?a.children.splice(a.children.length-v,v):f.children.splice(0,N);var L=y?a:f,S=y?v:N,ha=0,qa=0,D=0,P=0;m&&m.log("[balanceByMergeOrTheft] "+this+" steals from "+(y?"left":"right")+" node "+L+" "+S+" nodes");for(a=0;a<u.length;a++)ha+=u[a].height,qa+=u[a].stringSize,D=Math.max(D,u[a].width);for(a=0;a<L.children.length;a++)P=
Math.max(P,L.children[a].width);this.withParentChainsUpToCommonParentDo(L,function(J){if(P<D&&P<J.width){if(J===L)J.width=P;else{for(var M=!1,X=0;X<J.children.length;X++)if(J.children[X].width>P){M=!0;break}M||(J.width=P)}J.width=D}J.height-=ha;J.size-=S;J.stringSize-=qa},function(J){J.width<D&&(J.width=D);J.height+=ha;J.size+=S;J.stringSize+=qa});u.forEach(function(J){return J.parent=q});y?this.children.unshift.apply(this.children,$jscomp.arrayFromIterable(u)):this.children.push.apply(this.children,
$jscomp.arrayFromIterable(u))}}a=this.parent;0===r.length&&(this.parent=null,a&&a.children.splice(a.children.indexOf(this),1));a&&a.balanceAfterShrink(m)}},{key:"balanceAfterGrowth",value:function(){var a=this.isLeaf,f=this.size,m=this.stringSize,q=this.parent,r=this.children,u=this.width,v=this.height,y=this.options,z=a?y.maxLeafSize:y.maxNodeSize;if(r.length>z){q||(q=this.parent=new ud.InnerTreeNode({parent:null,children:[this],size:f,width:u,height:v,stringSize:m,options:y}),q.isLeaf=!1);var B=
Math.floor(r.length/2),C=0,G=0,F=f=0,N=m=0,L=u=0;for(v=0;C<B;C++)G+=r[C].size,F=Math.max(F,r[C].width),N+=r[C].height,L+=r[C].stringSize;for(;C<r.length;C++)f+=r[C].size,m=Math.max(m,r[C].width),u+=r[C].height,v+=r[C].stringSize;this.children=r.slice(0,B);this.size=G;this.width=F;this.height=N;this.stringSize=L;C=q.children.indexOf(this);r=r.slice(B);var S=new ud.InnerTreeNode({parent:q,children:r,size:f,height:u,width:m,stringSize:v,options:y});S.isLeaf=a;r.forEach(function(ha){return ha.parent=
S});q.children.splice(C+1,0,S);S.children.length>z&&S.balanceAfterGrowth();this.children.length>z&&this.balanceAfterGrowth();this.parent.balanceAfterGrowth()}}},{key:"balanceAfterShrink",value:function(a){var f=this,m=this.isLeaf,q=this.parent,r=this.children,u=this.options,v=u.maxLeafSize,y=u.maxNodeSize,z=u.minLeafSize,B=u.minNodeSize;u=m?v:y;z=m?z:B;B=!1;for(var C=r.length;C--;)0===r[C].size&&(r.splice(C,1),B=!0,a&&a.log("[balanceAfterShrink] "+this+" removes node "+C+" b/c it is empty, remaining children: "+
r.length+" (min: "+z+", max: "+u+")"));B&&a&&a.dump(""+this.root.print(!1));if(r.length>=z)q&&q.balanceAfterShrink(a);else if(0===r.length)q&&q.balanceAfterShrink(a);else if(m)q&&(1===q.children.length?(a&&a.log("[balanceAfterShrink] "+this+" is the only child - will remove it's parent and take its position"),a&&a.dump(""+this.root.print(!1)),this.parent=null,q.children.length=0,q.children.push.apply(q.children,$jscomp.arrayFromIterable(r)),r.forEach(function(F){return F.parent=q}),q.isLeaf=!0):(v=
(v=r[0].prevLine())&&v.parent,r=ud.arr.last(r).nextLine(),this.balanceByMergeOrTheft(v,r&&r.parent,a))),this.parent&&this.parent.balanceAfterShrink(a);else{m=[];u=B=z=!1;for(C=0;C<r.length;C++){var G=r[C];!z&&G.isLeaf&&(z=!0);B||G.isLeaf||(B=!0);if(z&&B){u=!0;break}m.push.apply(m,$jscomp.arrayFromIterable(G.children))}!u&&m.length<=(z?v:y)&&(a&&a.log("[balanceAfterShrink] "+this+" grandChildren.length is "+m.length+" and <= max size so it is removing all its children and adopting their children"),
r.forEach(function(F){return F.parent=null}),m.forEach(function(F){return F.parent=f}),r.length=0,r.push.apply(r,$jscomp.arrayFromIterable(m)),this.isLeaf=z,a&&a.log("[balanceAfterShrink] "+r.join("\n")),a&&a.dump(""+this.root.print(!1)));q&&q.balanceAfterShrink(a)}}},{key:"print",value:function(a,f,m,q){a=void 0===a?!0:a;f=void 0===f?0:f;m=void 0===m?0:m;var r=this.isLeaf,u=this.size,v=this.stringSize,y=this.width,z=this.height,B=this.children;q=q||(r?"leaf":"node");v=""+" ".repeat(m)+q+" (size: "+
u+" width: "+Math.round(y)+" height: "+Math.round(z)+" text length: "+v+")";if(B.length){y="";f+=u;for(u=B.length;u--;)z=B[u],f-=z.size,y="\n"+z.print(a,f,m+1)+y;v+=y}return v}},{key:"toString",value:function(){var a=this.isLeaf,f=this.size,m=this.width,q=this.height,r=this.children;return"node ("+(a?"leaf, ":"")+(a&&r.length?"rows: "+r[0].row+"-"+ud.arr.last(r).row+" ":"")+("size: "+f+" "+m+"x"+q+")")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InnerTreeNode"}}],e,{pathInPackage:function(){return"text/document.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4638,end:29081})})(ud.TreeNode);var kT=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),l=e.hasOwnProperty("Line")&&"function"===typeof e.Line?e.Line:e.Line=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a.parent);this.textAndAttributes=ud.joinTextAttributes(a.textAndAttributes||[]);this._text="";this._textAttributes=null;this.width=a.width;this.height=a.height;this.hasEstimatedExtent=!1;this.modeState=null;this.textAlign="left";this.lineHeight=null;this.marginBottom=this.marginTop=0}},{key:"isLine",get:function(){return!0}},
{key:"size",get:function(){return 1}},{key:"stringSize",get:function(){return this.text.length+1}},{key:"text",get:function(){if(this._text)return this._text;for(var a="",f=this.textAndAttributes,m=0;m<f.length;m+=2)a+="string"===typeof f[m]?f[m]:ud.objectReplacementChar;return this._text=a}},{key:"textAttributes",get:function(){if(this._textAttributes)return this._textAttributes;for(var a=[],f=this.textAndAttributes,m=0;m<f.length;m+=2){var q=f[m+1];q&&!a.includes(q)&&a.push(q)}return this._textAttributes=
a}},{key:"row",get:function(){if(!this.parent)return 0;var a=this.withParents();if(1===a.length)return a.children.indexOf(this);for(var f=0,m=a.length-1;1<=m;m--)for(var q=a[m],r=q.children.indexOf(a[m-1]),u=0;u<r;u++)f+=q.children[u].size;return f}},{key:"nextLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)+1])?a:this.root.findRow(this.row+1):null}},{key:"prevLine",value:function(){var a=this.parent;return a?(a=a.children[a.children.indexOf(this)-1])?a:this.root.findRow(this.row-
1):null}},{key:"changeExtent",value:function(a,f,m){var q=this.height,r=this.width,u=this.parent;this.width=a;this.height=f;this.hasEstimatedExtent=void 0===m?!1:m;if(r!==a||q!==f)for(f-=q;u;){u.height+=f;if(a>=u.width)u.width=a;else if(r===u.width){for(q=m=0;q<u.children.length;q++){var v=u.children[q].width;v>m&&(m=v)}u.width=m}u=u.parent}return this}},{key:"changeText",value:function(a,f){f=void 0===f?null:f;var m=this.parent,q=this.height,r=a.length+1-(this.text.length+1),u=0;this.modeState&&
this.modeState._string!==a&&(this.modeState=null);this.height||this.width?this.hasEstimatedExtent=!0:(this.width=this.height=0,this.hasEstimatedExtent=!1,u=-q);this._text=a;this._textAttributes=null;this.textAndAttributes=f||(f=[a,null]);if(0!==f.length%2)throw Error("textAndAttributes list is strange, expected flat pairs of text/attr");for(a=0;a<f.length;a+=2)if((q=f[a+1])&&Array.isArray(q))throw Error("invalid attr part of text/attr pair, its an array: "+q);for(;m;){m.stringSize+=r;m.height+=u;
for(a=f=0;a<m.children.length;a++)q=m.children[a].width,q>f&&(f=q);m.width=f;m=m.parent}return this}},{key:"changeTextAndAttributes",value:function(a){a=ud.joinTextAttributes(a);for(var f="",m=0;m<a.length;m+=2)f+="string"===typeof a[m]?a[m]:ud.objectReplacementChar;return this.changeText(f,a)}},{key:"print",value:function(a,f,m){a=void 0===a?!0:a;f=void 0===f?0:f;f=" ".repeat(void 0===m?0:m)+"line "+f+" (size: 1 width: "+Math.round(this.width)+" height: "+Math.round(this.height)+" text length: "+
this.stringSize;m=ud.arr.toTuples(this.textAndAttributes,2).map(function(q){var r=$jscomp.makeIterator(q);q=r.next().value;r=r.next().value;return("string"===typeof q?'"'+q+'"':String(q))+(","+JSON.stringify(r))}).join(",");return f+(a?")":" content: ["+m+"])")}},{key:"toString",value:function(){var a=this.width,f=this.height;return'line ("'+ud.string.truncate(this._text,30)+'", '+a+"x"+f+")"}},{key:"consistencyCheck",value:function(){var a=[];if(!this.parent)return a.push("line "+this+" has no parent!"),
a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Line"}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:29090,end:35532})}(ud.TreeNode);ud.Line=kT;ud.Line=kT;ud.Line=kT;ud.documentFuzzier={makeString:function(b,e){b=void 0===b?5:b;e=void 0===e?50:e;var l=ud.arr.range(65,
90).map(function(a){return String.fromCharCode(a)}).join("");l+=l.toLowerCase()+" \n";b=ud.num.random(b,e);return ud.arr.shuffle(Array.from(l.repeat(Math.ceil(b/l.length)))).slice(0,b).join("")},randomDocPosition:function(b){var e=0===b.rowCount?0:ud.num.random(0,b.rowCount-1);b=ud.num.random(0,b.getLineString(e).length-1);return{row:e,column:b}},insertRandom:function(b,e,l,a){l=[this.makeString(l,a),null];a=this.randomDocPosition(b);e.push(["insertTextAndAttributes",l,a]);b.insertTextAndAttributes(l,
a)},deleteRandom:function(b,e,l,a){l={start:this.randomDocPosition(b),end:this.randomDocPosition(b)};e.push(["remove",l]);b.remove(l)},maybe:function(){return.5>Math.random()},replay:function(b,e,l,a){l=void 0===l?!1:l;a=void 0===a?!1:a;l&&(b.debug=l,l=b.debugHelper(),l.reset());var f=new ud.Document([""]);e.forEach(function(m,q){var r=$jscomp.makeIterator(m);m=r.next().value;r=$jscomp.arrayFromIterator(r);if(a&&q==e.length-1)debugger;f[m].apply(f,[].concat($jscomp.arrayFromIterable(r),[l]))});b.changeDocument(f)},
run:function(){var b=Date.now(),e=0,l=new ud.Document([],{maxLeafSize:3,minLeafSize:2,leafSplit:.5,maxNodeSize:10,minNodeSize:5,nodeSplit:.5}),a=[];try{for(;1E4>l.stringSize&&1E4>e++;)this.maybe()?this.deleteRandom(l,a):this.insertRandom(l,a),l.consistencyCheck()}catch(m){var f=m}b=Date.now()-b;return{error:f,doc:l,actions:a,time:b}}};ud.newline="\n";ud.newlineLength=1;var H6=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/document.js"),l=e.hasOwnProperty("Document")&&"function"===
typeof e.Document?e.Document:e.Document=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.options=Object.assign({},ud.defaultOptions,{},f);this.lines=a}},{key:"balance",value:function(){this.root.balanceAfterGrowth();this.fixRoot()}},{key:"fixRoot",value:function(){var a=this.root.root;this.root!==a&&(this.root=a)}},{key:"height",get:function(){return this.root.height}},
{key:"width",get:function(){return this.root.width}},{key:"rowCount",get:function(){return this.root.size}},{key:"stringSize",get:function(){return 0===this.rowCount?0:this.root.stringSize-1}},{key:"lineStrings",get:function(){return this.lines.map(function(a){return a.text})}},{key:"lines",get:function(){return this.root.lines()}},{key:"lines",set:function(a){a=void 0===a?[]:a;this.root=new ud.InnerTreeNode({parent:null,children:[],size:0,width:0,height:0,stringSize:0,options:this.options});this.insertLines(a)}},
{key:"clipRow",value:function(a){return Math.max(0,Math.min(a,this.rowCount-1))}},{key:"clipPositionToLines",value:function(a){var f=a.row;a=a.column;var m=this.rowCount;if(0===m)return{row:0,column:0};0>f?f=0:f>=m&&(f=m-1,a=Infinity);0>a?a=0:(m=this.getLineString(f).length,a>m&&(a=m));return{row:f,column:a}}},{key:"findLineByVerticalOffset",value:function(a){return this.root.findLineByVerticalOffset(a)}},{key:"computeVerticalOffsetOf",value:function(a){return this.root.computeVerticalOffsetOf(a)}},
{key:"getLine",value:function(a){return this.root.findRow(this.clipRow(a))}},{key:"getLineString",value:function(a){return(a=this.getLine(a))?a.text:""}},{key:"insertLine",value:function(a,f){f=void 0===f?this.root.rowCount:f;return this.insertLines([a],f)[0]}},{key:"removeLine",value:function(a){this.root.removeFromToInRoot(a,a)}},{key:"removeLines",value:function(a,f,m){this.root.removeFromToInRoot(a,f,m)}},{key:"insertLines",value:function(a,f){a=this.root.insert(a,f);this.fixRoot();return a}},
{key:"textString",get:function(){var a="",f=this.lines;if(!f.length)return a;for(var m=0;m<f.length-1;m++)a=a+f[m].text+ud.newline;return a+=f[m].text}},{key:"textString",set:function(a){this.lines=a.split(ud.newline)}},{key:"endPosition",get:function(){var a=this.rowCount;if(0===a)return{row:0,column:0};--a;var f=this.getLine(a);return{row:a,column:f.stringSize-1}}},{key:"textAndAttributes",get:function(){var a=this.lines;if(!a.length)return[];for(var f=ud.newline,m=a.length-1,q=a[0].textAndAttributes.slice(),
r=1;r<=m;r++){var u=a[r],v=q.pop()||null,y=q.pop()||"";u=u.textAndAttributes;q.push.apply(q,$jscomp.arrayFromIterable(ud.concatAttributePair(y,v,u[0]||"",u[1]||null,f)));for(v=2;v<u.length;v+=2)q.push(u[v],u[v+1])}return q}},{key:"textAndAttributes",set:function(a){this.lines=ud.splitTextAndAttributesIntoLines(a,ud.newline).map(function(f){return new ud.Line({parent:null,width:0,height:0,textAndAttributes:f})})}},{key:"getTextAndAttributesOfLine",value:function(a){return this.getLine(a).textAndAttributes}},
{key:"setTextAndAttributesOfLine",value:function(a,f){this.getLine(a).changeTextAndAttributes(f);return f}},{key:"mixinTextAttribute",value:function(a,f){ud.modifyAttributesInRange(this,f,function(m,q){m._textAttributes=null;return Object.assign({},q,a)})}},{key:"setTextAttribute",value:function(a,f){ud.modifyAttributesInRange(this,f,function(m,q){m._textAttributes=null;return a})}},{key:"mixoutTextAttribute",value:function(a,f){f=void 0===f?{start:{row:0,column:0},end:this.endPosition}:f;if(a){var m=
Object.keys(a);ud.modifyAttributesInRange(this,f,function(q,r){if(!r)return r;q._textAttributes=null;q=0;var u={},v;for(v in r)m.includes(v)||(u[v]=r[v],q++);return 0===q?null:u})}}},{key:"setTextAttributesWithSortedRanges",value:function(a){function f(C,G,F,N){N=void 0===N?0:N;var L=0,S=G.length;if(0>=F.length-N)return{attributes:[G,null],index:N};for(var ha=[];N<F.length&&!(L>=S);N+=2){var qa=F[N],D=qa.start;qa=qa.end;var P=F[N+1];if(qa.row<C)L=0;else{D.row===C&&L<D.column&&(ha.push(G.slice(L,D.column),
null),L=D.column);if(qa.row>C){ha.push(P.embeddedMorph||G.slice(L,S),P);L=S;break}L<qa.column&&ha.push(P.embeddedMorph||G.slice(L,qa.column),P);L=qa.column}}L<S&&ha.push(G.slice(L,S),null);return{attributes:ha,index:N}}if(!(2>a.length)){var m=a[0].start,q=a.slice(-2)[0].end,r=this.getLine(m.row);if(m.row===q.row){if(!(m.column>=q.column)){var u=f(m.row,r.text,a,0).attributes,v=$jscomp.makeIterator(ud.splitTextAndAttributesAtColumns(r.textAndAttributes,[m.column,q.column]));a=v.next().value;v.next();
v=v.next().value;q=$jscomp.makeIterator(ud.splitTextAndAttributesAtColumns(u,[m.column,q.column]));q.next();m=q.next().value;q.next();r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(m),$jscomp.arrayFromIterable(v)))}}else{v=m.row;var y=m.column;m=f(v,r.text,a,0);var z=m.attributes;m=m.index;var B=$jscomp.makeIterator(ud.splitTextAndAttributesAt(r.textAndAttributes,y));u=B.next().value;B.next();y=$jscomp.makeIterator(ud.splitTextAndAttributesAt(z,y));y.next();
y=y.next().value;for(r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(u),$jscomp.arrayFromIterable(y)));r=r.nextLine();){v++;if(v===q.row)break;m=f(v,r.text,a,m);u=m.attributes;m=m.index;r.changeTextAndAttributes(u)}r&&(q=q.column,a=f(v,r.text,a,m).attributes,v=$jscomp.makeIterator(ud.splitTextAndAttributesAt(r.textAndAttributes,q)),v.next(),v=v.next().value,q=$jscomp.makeIterator(ud.splitTextAndAttributesAt(a,q)).next().value,r.changeTextAndAttributes([].concat($jscomp.arrayFromIterable(q),
$jscomp.arrayFromIterable(v))))}}}},{key:"resetTextAttributes",value:function(){this.lines.forEach(function(a){return a.changeText(a.text)})}},{key:"textAttributeAt",value:function(a){var f=a.row;a=a.column;a=Math.max(0,a);var m=this.getLine(f);if(!m)return null;f=0;m=m.textAndAttributes;for(var q=0;q<m.length;q+=2){var r=m[q],u=m[q+1];f+="string"===typeof r?r.length:1;if(a<f)return u}return m[m.length-1]}},{key:"textAndAttributesInRange",value:function(a){var f=a.start,m=a.end;if(ud.eqPosition(f,
m))return["",null];ud.lessPosition(m,f)&&(a=$jscomp.makeIterator([m,f]),f=a.next().value,m=a.next().value);f=ud.maxPosition(f,{column:0,row:0});m=ud.minPosition(m,this.endPosition);var q=this.getLine(f.row),r=q;if(m.row===f.row)return a=f.column,m=m.column,a===m&&m++,a=$jscomp.makeIterator(ud.splitTextAndAttributesAtColumns(r.textAndAttributes,[a,m])),a.next(),a.next().value;a=[q];for(var u=0;u<m.row-f.row;u++)a.push(q=q.nextLine());q=a[a.length-1];f=$jscomp.makeIterator(ud.splitTextAndAttributesAt(r.textAndAttributes,
f.column));f.next();f=f.next().value;m=$jscomp.makeIterator(ud.splitTextAndAttributesAt(q.textAndAttributes,m.column)).next().value;0===f.length&&(f=["",null]);if(1===a.length)return ud.concatTextAndAttributes(f,m,!0);for(r=1;r<a.length-1;r++)"string"===typeof f[f.length-2]&&(f[f.length-2]+=ud.newline),ud.concatTextAndAttributes(f,a[r].textAndAttributes,!0);"string"===typeof f[f.length-2]&&(f[f.length-2]+=ud.newline);ud.concatTextAndAttributes(f,m,!0);return ud.joinTextAttributes(f,"")}},{key:"textInRange",
value:function(a){var f=a.start,m=a.end;f=this.clipPositionToLines(f);m=this.clipPositionToLines(m);ud.lessPosition(m,f)&&(a=$jscomp.makeIterator([m,f]),f=a.next().value,m=a.next().value);a=f;f=a.row;a=a.column;var q=m;m=q.row;q=q.column;if(f===m)return a===q?"":this.getLineString(f).slice(a,q);var r=this.getLine(f);for(a=r.text.slice(a);(r=r.nextLine())&&++f<m;)a+=ud.newline+r.text;return a+ud.newline+this.getLineString(m).slice(0,q)}},{key:"setTextInRange",value:function(a,f){this.remove(f);return this.insertText(a,
f.start,!1)}},{key:"indexToPosition",value:function(a){0>a&&(a=0);a=this.root.findLineWithTextIndex(a,0);return{row:a.row,column:a.column}}},{key:"positionToIndex",value:function(a){var f=a.column,m=this.getLine(a.row);f=Math.max(0,Math.min(f,m.stringSize-1));for(a=m.parent;a;){m=a.children.indexOf(m);m=a.children.slice(0,m);for(var q=0;q<m.length;q++)f+=m[q].stringSize;m=a;a=a.parent}return f}},{key:"insertTextAndAttributes",value:function(a,f,m){m=void 0===m?!1:m;if(!a||!a.length||2===a.length&&
!a[0])return{start:f,end:f};m&&!m.debugDocumentUpdate&&(m=!1);m&&!m.log&&(m=console);var q=f.row;f=f.column;0>q&&(q=0);0>f&&(f=0);var r=this.getLine(q);a=ud.splitTextAndAttributesIntoLines(a,ud.newline);m&&(m.log||(m={log:console.log.bind(console),dump:console.log.bind(console)}));if(!r)return q=this.insertLines(a.map(function(N){return new ud.Line({parent:null,width:0,height:0,textAndAttributes:N})})),m&&m.log("insert "+q.length+" lines into empty text"),{start:{row:0,column:0},end:{row:q.length,
column:ud.arr.last(q).text.length}};if(q>=this.rowCount){var u=this.endPosition;m&&m.log("insertion after doc end, "+q+"/"+f+", inserting "+(q-u.row)+" rows");for(f=0;f<q-u.row;f++)a.unshift(["",null]);q=u.row;f=u.column}if(1===a.length&&""===a[0][0])return m&&m.log("insert just newline at "+q+"/"+f),q=this.splitLineAt({row:q,column:f}),m&&m.dump(""+this.root.print(!1)),q;var v=a.shift(),y=a.length;u={row:q,column:f};var z=r.stringSize-1;f>z&&(m&&m.log("filling up insertion column at "+q+"/"+f+": "+
(f-z)),z=" ".repeat(f-z),v.length?"string"===typeof v[0]?v[0]=z+v[0]:v.unshift(z,null):v.push(z,null));z=$jscomp.makeIterator(ud.splitTextAndAttributesAt(r.textAndAttributes,f));var B=z.next().value;z=z.next().value;""===B[0]&&(B=[]);B=ud.concatTextAndAttributes(B,v,!0);if(0===y){for(var C=0,G=0;G<v.length;G+=2){var F=v[G];C+="string"===typeof F?F.length:1}u.column=f+C;ud.concatTextAndAttributes(B,z,!0)}r.changeTextAndAttributes(B);if(0===y)return m&&(m.log("single line inserted at "+q+"/"+f),m&&
m.dump(""+this.root.print(!1))),{start:{row:q,column:f},end:u};r=a[y-1];for(B=v=0;B<r.length;B+=2)C=r[B],v+="string"===typeof C?C.length:1;u.row+=y;u.column=v;a=this.insertLines(a.map(function(N){return new ud.Line({parent:null,width:0,height:0,textAndAttributes:N})}),q+1);y=ud.arr.last(a);y.changeTextAndAttributes(ud.concatTextAndAttributes(y.textAndAttributes,z,!0));m&&(m.log(a.length+" inserted at "+q+"/"+f),m&&m.dump(""+this.root.print(!1)));return{start:{row:q,column:f},end:u}}},{key:"insertText",
value:function(a,f,m){m=void 0===m?!1:m;if(!a)return{start:f,end:f};var q=f.row;f=f.column;0>q&&(q=0);0>f&&(f=0);var r=this.getLine(q);if(!r)return q=this.insertLines(a.split(ud.newline)),{start:{row:0,column:0},end:{row:q.length,column:ud.arr.last(q).text.length}};q>=this.rowCount&&(f=this.endPosition,a="\n".repeat(q-f.row)+a,q=f.row,f=f.column);var u=a.split(ud.newline),v=u.shift(),y=u.length;a={row:q,column:f};var z=r.stringSize-1;f>z&&(v=" ".repeat(f-z)+v);z=$jscomp.makeIterator(ud.splitTextAndAttributesAt(r.textAndAttributes,
f));var B=z.next().value;z=z.next().value;""===B[0]&&(B=[]);m=ud.concatTextAndAttributes(B,[v,m&&B.length?B[B.length-1]:null],!0);0===y&&(a.column=f+v.length,ud.concatTextAndAttributes(m,z,!0));r.changeTextAndAttributes(m);if(0===y)return{start:{row:q,column:f},end:a};a.row+=y;a.column=u[y-1].length;m=this.insertLines(u,q+1);m=ud.arr.last(m);m.changeTextAndAttributes(ud.concatTextAndAttributes(m.textAndAttributes,z,!0));return{start:{row:q,column:f},end:a}}},{key:"remove",value:function(a,f){f=void 0===
f?!1:f;if(0!==this.rowCount){var m=a.start,q=a.end;if(m.row!==q.row||m.column!==q.column){ud.lessPosition(q,m)&&(q=$jscomp.makeIterator([q,m]),m=q.next().value,q=q.next().value);var r=this.endPosition;if(!ud.lessEqPosition(r,m)){var u=ud.maxPosition(m,{column:0,row:0});m=u.row;u=u.column;r=ud.minPosition(q,r);q=r.row;var v=r.column;0>u&&(u=0);0>v&&(v=0);f&&!f.debugDocumentUpdate&&(f=!1);f&&(f.log||(f={log:console.log.bind(console),dump:console.log.bind(console),group:console.group.bind(console),groupEnd:console.groupEnd.bind(console)}),
f.group("document.remove "+JSON.stringify(a)),f.log("[text doc] removing "+m+"/"+u+" => "+q+"/"+v));var y=this.getLine(m);a=y;r=[y];for(var z=0;z<q-m;z++)r.push(y=y.nextLine());y=r[r.length-1];u=$jscomp.makeIterator(ud.splitTextAndAttributesAt(a.textAndAttributes,u)).next().value;v=$jscomp.makeIterator(ud.splitTextAndAttributesAt(y.textAndAttributes,v));v.next();v=v.next().value;a.changeTextAndAttributes(ud.concatTextAndAttributes(u,v,!0));f&&f.log('[text doc removal] what remains of start/end line: "'+
a.textAndAttributes+'"');1<r.length&&this.removeLines(m+1,q,f);f&&f.groupEnd("[text doc removal]")}}}}},{key:"splitLineAt",value:function(a){var f=a.row;a=a.column;var m=this.getLine(f),q=$jscomp.makeIterator(ud.splitTextAndAttributesAt(m.textAndAttributes,a)),r=q.next().value;q=q.next().value;m.changeTextAndAttributes(r);m=new ud.Line({parent:null,width:0,height:0,textAndAttributes:q});this.insertLines([m],f+1);return{start:{row:f,column:a},end:{row:f+1,column:0}}}},{key:"replace",value:function(a,
f,m){var q=a.start;a=a.end;if(!f.length)return this.remove({start:q,end:a},m),{removed:{start:q,end:a},inserted:{start:q,end:q}};var r=this.clipPositionToLines(q),u=this.clipPositionToLines(a);r.row===u.row&&this.remove({start:r,end:u},m);if(r.row===u.row||ud.lessEqPosition(this.endPosition,q)){var v;"string"===typeof f?f.length&&(v=f.length&&this.insertText(f,q)):f.length&&(2!==f.length||f[0])&&(v=this.insertTextAndAttributes(f,q,m));v||(v={start:r,end:r});return{removed:{start:q,end:a},inserted:v}}q=
r;a=u;m=q;v=m.row;u=m.column;r=a.row;if("string"===typeof f){m=[];f=f.split(ud.newline);for(var y=0;y<f.length;y++)m.push([f[y],null])}else m=ud.splitTextAndAttributesIntoLines(f,ud.newline);var z=!m.length||1===m.length&&(!m[0].length||!m[0][0].length);z&&(m=[]);var B=f=this.getLine(v);y=this.getLine(r);u=$jscomp.makeIterator(ud.splitTextAndAttributesAt(B.textAndAttributes,u));var C=u.next().value;u.next();for(B.changeTextAndAttributes(z?C:ud.concatTextAndAttributes(C,m.shift(),!0));m.length;){f=
f.nextLine();v++;if(f===y)break;f.changeTextAndAttributes(m.shift())}if(!m.length)return m=f.stringSize-1,this.remove({start:{row:v,column:f.stringSize},end:a}),{removed:{start:q,end:a},inserted:{start:q,end:{row:v,column:m}}};console.assert(v==r,"not end row");console.assert(f.row==v,"row != last line.row");this.remove({start:{row:v,column:0},end:a});r=[];f=m.length;for(u=0;u<f-1;u++)y=m[u],y.length||(y=["",null]),"string"===typeof y[y.length-2]?y[y.length-2]+=ud.newline:y.push(ud.newline,null),
r.push.apply(r,$jscomp.arrayFromIterable(y));r.push.apply(r,$jscomp.arrayFromIterable(m[f-1]));m=this.insertTextAndAttributes(r,{row:v,column:0}).end;return{removed:{start:q,end:a},inserted:{start:q,end:m}}}},{key:"wordsOfLine",value:function(a){for(var f=this.getLineString(a),m=[],q,r=0;r<f.length;r++)/[^a-z0-9_]/i.test(f[r])?q&&(q.range.end.column=r,m.push(q),q=null):(q=q||{index:m.length,string:"",range:{start:{row:a,column:r},end:{row:a,column:r}}},q.string+=f[r]);q&&(q.range.end.column=r,m.push(q));
return m}},{key:"wordAt",value:function(a,f){var m=a.row,q=a.column;f=void 0===f?this.wordsOfLine(m):f;return f.find(function(r){r=r.range;var u=r.end.column;return r.start.column<=q&&q<=u})||{range:{start:{column:q,row:m},end:{column:q,row:m}},string:""}}},{key:"wordLeft",value:function(a){var f=a.row,m=a.column,q=this.wordsOfLine(f);if(!q.length||ud.lessEqPosition(a,q[0].range.start)){for(;0<=--f;)if(q=this.wordsOfLine(f),q.length)return ud.arr.last(q);return{range:{start:a,end:a},string:""}}f=
this.wordAt(a);return f.string?ud.eqPosition(f.range.start,a)?q[f.index-1]:f:q.slice().reverse().find(function(r){return r.range.end.column<=m})||{range:{start:a,end:a},string:""}}},{key:"wordRight",value:function(a){var f=a.column,m=a.row,q=this.wordsOfLine(a.row);if(!q.length||ud.lessEqPosition(ud.arr.last(q).range.end,a)){for(;++m<this.lines.length;)if(q=this.wordsOfLine(m),q.length)return q[0];return{range:{start:a,end:a},string:""}}m=this.wordAt(a);return m.string?ud.eqPosition(m.range.end,a)?
q[m.index+1]:m:q.find(function(r){return r.range.start.column>=f})||{range:{start:a,end:a},string:""}}},{key:"scanForward",value:function(a,f){var m=a.row,q=a.column;a=this.getLine(m);for(var r=a.text;q<a.stringSize-1;q++){var u=f(r[q],{row:m,column:q});if(u)return u}for(;a=a.nextLine();)for(m++,r=a.text,q=0;q<a.stringSize-1;q++)if(u=f(r[q],{row:m,column:q}))return u;return null}},{key:"scanBackward",value:function(a,f){var m=a.row,q=a.column;a=this.getLine(m);var r=a.text;for(--q;0<=q;q--){var u=
f(r[q],{row:m,column:q});if(u)return u}for(;a=a.prevLine();)for(m--,r=a.text,q=a.stringSize-2;0<=q;q--)if(u=f(r[q],{row:m,column:q}))return u;return null}},{key:"copy",value:function(){return new this.constructor(this.lines.slice(),this.options)}},{key:"toString",value:function(){return"Document("+this.rowCount+" lines)"}},{key:"consistencyCheck",value:function(){var a=[],f=this.rowCount,m=this.stringSize,q=this.lines,r=this.textString,u=this.root;f!==q.length&&a.push({error:"document "+this+" row count: "+
f+" !== "+q.length});r.length!==m&&a.push({error:"document "+this+" textString.length vs stringSize: "+r.length+" !== "+m});a.push.apply(a,$jscomp.arrayFromIterable(u.consistencyCheck()));f=0;for(m=q[0];m;)m!=q[f]&&a.push({error:"line iteration at "+f+" is broken: nextLine() of "+q[f-1]+" is not "+q[f]+"!"}),f++,m=m.nextLine();q[f]&&a.push({error:"nextLine() of\n  "+q[f-1]+"\nis nullish but \n  "+q[f]+"\nexists in tree!"});if(a.length)throw Error("Consistency check of document revealed "+a.length+
" error"+(1<a.length?"s":"")+":\n"+a.map(function(v){return v.error}).filter(Boolean).join("\n"));}},{key:"print",value:function(){return this.root.print(!1,0,0,"root")}},{key:"print2",value:function(){var a=System.decanonicalize("lively.lang/text-graphics.js"),f=(System.get(a)||{}).printTree;return f?f(this.root,function(m){return m.toString()},function(m){return m.children},{padding:[2,1,2,1]}):(lively.module.module(a).load().then(function(){return console.log("lively.lang/text-graphics.js loaded")}).catch(function(m){return console.error(m)}),
"Loading lively.lang/text-graphics.js lib, please try again later :P")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Document"}},{key:"fuzzyTest",value:function(){return ud.documentFuzzier.run()}},{key:"newline",get:function(){return ud.newline}},{key:"fromString",value:function(a,f){return new this(a.split(ud.newline),f)}}],e,{pathInPackage:function(){return"text/document.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:37798,end:71716})}(void 0),Yna=H6=ud.Document;ud.default=H6;var Sp=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js");Sp.lessPosition=eu;Sp.lessEqPosition=VB;Sp.eqPosition=fu;var JC=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/anchors.js"),l=e.hasOwnProperty("Anchor")&&"function"===typeof e.Anchor?e.Anchor:e.Anchor=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f,m){f=void 0===f?{column:0,row:0}:f;this.id=a||""+(this.constructor._id=(this.constructor._id||0)+1);this.position=f;this.insertBehavior=void 0===m?"move":m}},{key:"isAnchor",get:function(){return!0}},{key:"onDelete",value:function(a){if(Sp.lessEqPosition(this.position,a.start))return!1;if(Sp.lessEqPosition(a.start,this.position)&&Sp.lessEqPosition(this.position,a.end))return this.position=a.start,!0;var f=
this.position,m=f.column,q=a.start,r=q.column,u=a.end;a=u.row;u=u.column;this.position={column:a!==this.position.row?m:r===u?m-(u-r):r+(m-u),row:f.row-(a-q.row)};return!0}},{key:"onInsert",value:function(a){if(Sp.lessPosition(this.position,a.start)||Sp.eqPosition(this.position,a.start)&&"stay"===this.insertBehavior)return!1;var f=this.position,m=a.start,q=m.row;m=m.column;a=a.end;var r=a.column;this.position={column:f.column+(q!==this.position.row?0:r-m),row:f.row+(a.row-q)};return!0}},{key:"equalsPosition",
value:function(a){return a?a.isAnchor?Sp.eqPosition(this.position,a.position):Sp.eqPosition(this.position,a):!1}},{key:"toString",value:function(){var a=this.position;return"Anchor("+this.id+" "+a.row+"/"+a.column+")"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Anchor"}}],e,{pathInPackage:function(){return"text/anchors.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:82,end:3025})}(void 0);Sp.Anchor=JC;Sp.Anchor=JC;Sp.Anchor=JC;var Zna=Object.freeze({__proto__:null,Anchor:JC}),qf=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js");qf.pt=nf;qf.Color=xf;qf.connect=Oe;qf.once=kp;qf.disconnect=xo;qf.Path=Cg;qf.morph=sb;qf.GridLayout=iy;qf.config=vk;qf.Morph=Mj;qf.lessPosition=eu;qf.minPosition=WB;qf.maxPosition=XB;qf.Icon=Wn;var SL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),l=e.hasOwnProperty("TextSearcher")&&
"function"===typeof e.TextSearcher?e.TextSearcher:e.TextSearcher=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.morph=a;this.STOP={}}},{key:"doc",get:function(){return this.morph.document}},{key:"processFind",value:function(a,f){var m=this.doc.positionToIndex(a);m=this.doc.indexToPosition(m+f.length);return{range:{start:a,end:m},match:f}}},
{key:"stringSearch",value:function(a,f,m,q,r,u,v){if(r&&(qf.lessPosition(v,r.start)||qf.lessPosition(r.end,v)))return this.STOP;m||(u=u.toLowerCase());if(u!==f[0])return null;r=v.row;v=v.column;u=a[r];a=1>=q?"":"\n"+a.slice(r+1,r+1+(q-1)).join("\n");a=u.slice(v)+a;return 0!==(m?a:a.toLowerCase()).indexOf(f)?null:this.processFind({row:r,column:v},a.slice(0,f.length))}},{key:"reSearch",value:function(a,f,m,q,r,u){if(q&&(qf.lessPosition(u,q.start)||qf.lessPosition(q.end,u)))return this.STOP;q=u.row;
u=u.column;return(a=(a[q].slice(u)+(m?"\n"+a.slice(q+1).join("\n"):"")).match(f))?this.processFind({row:q,column:u},a[0]):null}},{key:"search",value:function(a){var f=Object.assign({start:this.morph.cursorPosition,needle:"",backwards:!1,caseSensitive:!1,inRange:null},a);a=f.start;var m=f.needle,q=f.backwards,r=f.caseSensitive;f=f.inRange;if(!m)return null;f&&(a=q?qf.minPosition(f.end,a):qf.maxPosition(f.start,a));if(m instanceof RegExp){var u=(m.flags||"").split(""),v=!!m.multiline;u.splice(u.indexOf("m"),
1);r||u.includes("i")||u.push("i");m=new RegExp("^"+m.source.replace(/^\^+/,""),u.join(""));m=this.reSearch.bind(this,this.doc.lineStrings,m,v,f)}else m=String(m),r||(m=m.toLowerCase()),u=m.split(this.doc.constructor.newline).length,m=this.stringSearch.bind(this,this.doc.lineStrings,m,r,u,f);a=this.doc[q?"scanBackward":"scanForward"](a,m);return a===this.STOP?null:a}},{key:"searchForAll",value:function(a){for(var f=[],m=0;;){if(1E4<m++)throw Error("endless loop");var q=this.search(a);if(!q)return f;
f.push(q);a=Object.assign({},a,{start:a.backwards?q.range.start:q.range.end})}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextSearcher"}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:538,end:3748})}(void 0);qf.TextSearcher=SL;qf.TextSearcher=SL;qf.TextSearcher=
SL;var lT=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/search.js"),l=e.hasOwnProperty("SearchWidget")&&"function"===typeof e.SearchWidget?e.SearchWidget:e.SearchWidget=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=this;a=void 0===a?{}:a;a.targetText&&(a.target=a.targetText);if(!a.target)throw Error("SearchWidget needs a target text morph!");
zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);a=this.getSubmorphNamed("replaceButton");var m=this.getSubmorphNamed("replaceAllButton");this.getSubmorphNamed("replaceInput");var q=this.getSubmorphNamed("searchInput"),r=this.getSubmorphNamed("prevButton"),u=this.getSubmorphNamed("nextButton"),v=this.getSubmorphNamed("cancelButton"),y=this.getSubmorphNamed("acceptButton");qf.connect(y,"fire",this,"execCommand",{converter:function(){return"accept search"}});
qf.connect(v,"fire",this,"execCommand",{converter:function(){return"cancel search and reset cursor in text"}});qf.connect(u,"fire",this,"execCommand",{converter:function(){return"search next"}});qf.connect(r,"fire",this,"execCommand",{converter:function(){return"search prev"}});qf.connect(q,"inputChanged",this,"search");qf.connect(a,"fire",this,"execCommand",{converter:function(){return"replace and go to next"}});qf.connect(m,"fire",this,"execCommand",{converter:function(){return"replace all"}});
this.state={backwards:!1,before:null,position:null,inProgress:null,last:null};q.addCommands([{name:"realign top-bottom-center",exec:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){f.target.execCommand("realign top-bottom-center");f.addSearchMarkersForPreview(f.state.inProgress&&f.state.inProgress.found,!1);return z.return(!0)})}}])}},{key:"focus",value:function(){var a=this;this.get("searchInput").focus();this.whenRendered().then(function(){return a.get("searchInput").invalidateTextLayout(!0,
!0)})}},{key:"onBlur",value:function(a){var f=this,m=this.world();m&&setTimeout(function(){var q=m.focusedMorph;f.withAllSubmorphsDetect(function(r){return r.isFocused()})?f.get("searchInput")!=q&&f.get("replaceInput")!=q&&f.get("searchInput").focus():f.cancelSearch(!1)})}},{key:"cleanup",value:function(){this.removeSearchMarkers();this.state.inProgress=null;this.textMap&&this.textMap.update()}},{key:"cancelSearch",value:function(a){this.state.inProgress&&(this.state.last=this.state.inProgress);this.cleanup();
this.removeTextMap();if(this.state.before&&a){a=this.state.before;var f=a.scroll;this.target.selection=a.selectionRange;this.target.scroll=f;this.state.before=null}this.remove();this.target.focus()}},{key:"acceptSearch",value:function(){this.state.inProgress&&(this.state.last=this.state.inProgress);this.applySearchResult(this.state.inProgress)&&this.state.before&&this.target.saveMark(this.state.before.position);this.get("searchInput").acceptInput();this.cleanup();this.removeTextMap();this.state.before=
null;this.remove();this.target.focus()}},{key:"applySearchResult",value:function(a){if(!a||!a.found)return null;var f=this.target,m=f.selection,q=!!f.activeMark||!m.isEmpty(),r=a.found.range,u=r.start;r=r.end;u=a.backwards?u:r;q?m.lead=u:f.cursorPosition=u;f.isLineFullyVisible(u.row)||f.centerRow();return a}},{key:"removeSearchMarkers",value:function(){var a=this;(this.target.markers||[]).forEach(function(f){f=f.id;return f.startsWith("search-highlight")&&a.target.removeMarker(f)})}},{key:"addSearchMarkers",
value:function(a,f,m){m=void 0===m?!1:m;this.removeSearchMarkers();f=this.target;var q=this.textMap,r=f.whatsVisible,u=r.startRow;r=r.endRow;var v=f.document.lineStrings,y=0,z=qf.config.codeEditor.search,B=z.maxCharsPerLine;z=z.fastHighlightLineCount;q&&3<=a.match.length&&v.length<z&&(u=0,r=v.length-1);z=!1;for(var C=window.performance.now();u<=r&&!z;u++)for(var G=v[u]||"",F=0;F<Math.min(G.length,B);F++){if(300<window.performance.now()-C){z=!0;break}if(m?0===G.slice(F).indexOf(a.match):0===G.slice(F).toLowerCase().indexOf(a.match.toLowerCase()))f.addMarker({id:"search-highlight-"+
y++,range:{start:{row:u,column:F},end:{row:u,column:F+a.match.length}},style:{"border-radius":"4px","background-color":"rgba(255, 200, 0, 0.3)","box-shadow":"0 0 4px rgba(255, 200, 0, 0.3)","pointer-events":"none"}}),F+=a.match.length}this.state.backwards?(m=a.range.start,a=m.row,m=m.column,a={start:{row:a,column:m},end:{row:a,column:m+1}}):(m=a.range.end,a=m.row,m=m.column,a={start:{row:a,column:m-1},end:{row:a,column:m}});m={};f.addMarker({id:"search-highlight-cursor",range:a,style:(m["pointer-events"]=
"none",m["box-sizing"]="border-box",m[this.state.backwards?"border-left":"border-right"]="3px red solid",m)});q&&q.update()}},{key:"addSearchMarkersForPreview",value:function(a,f){f=void 0===f?!0:f;a&&(this.addSearchMarkers(a),f&&this.target.removeMarker("search-highlight-cursor"))}},{key:"prepareForNewSearch",value:function(){var a=this.target,f=this.state,m=a.world();if(m){this.openInWorld(m.visibleBounds().center(),m);this.topRight=a.globalBounds().insetBy(5).topRight();if(a.getWindow())qf.once(a.getWindow(),
"remove",this,"remove");m=this.get("searchInput");var q=a.scroll;a=a.selection;f.position=a.lead;f.before={scroll:q,position:a.lead,selectionRange:a.range,selectionReverse:a.isReverse()};f.last&&f.last.found&&(qf.disconnect(m,"inputChanged",this,"search"),this.input=f.last.needle,qf.connect(m,"inputChanged",this,"search"),this.addSearchMarkersForPreview(f.last.found));this.focus();m.selectAll()}}},{key:"advance",value:function(a){var f=this.state.inProgress;if(f&&f.found){var m=f.found.range;f=m.start;
m=m.end;this.state.position=a!==this.state.backwards?a?m:f:a?f:m}this.state.backwards=a;return this.search()}},{key:"searchNext",value:function(){return this.advance(!1)}},{key:"searchPrev",value:function(){return this.advance(!0)}},{key:"search",value:function(){if(!this.input)return this.cleanup(),null;var a=this.state,f=a.backwards,m={backwards:f,start:a.position};a=this.target.search(this.input,m);m=this.state.inProgress=Object.assign({},m,{needle:this.input,found:a});this.applySearchResult(m);
a?this.addSearchMarkers(a,f):this.cleanup();return m}},{key:"showTextMap",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(System.import("lively.morphic/text/map.js"),2);f=a.textMap=qf.morph({type:"textmap"});f.attachTo(a.target);f.isLayoutable=!1;a.addMorph(f);f.topRight=a.innerBounds().bottomRight().addXY(0,5);f.height=a.target.height-a.height-15;f.update();a.renderOnGPU=!0;return m.return(f)})}},{key:"removeTextMap",
value:function(){this.textMap&&(this.textMap.remove(),this.textMap.detachFromCurrentTextMorph(),this.textMap=null)}},{key:"keybindings",get:function(){return[{keys:"Enter",command:"search next or replace and go to next"},{keys:"Alt-Enter",command:"only search prev"},{keys:"Tab",command:"change focus"},{keys:"Ctrl-O",command:"occur with search term"},{keys:"Ctrl-W",command:"yank next word from text"},{keys:"Escape",command:"cancel search"},{keys:{win:"Ctrl-F|Ctrl-S|Ctrl-G",mac:"Meta-F|Ctrl-S|Meta-G"},
command:"search next"},{keys:{win:"Ctrl-Shift-F|Ctrl-R|Ctrl-Shift-G",mac:"Meta-Shift-F|Ctrl-R|Meta-Shift-G"},command:"search prev"}]}},{key:"commands",get:function(){var a=this;return[{name:"occur with search term",exec:function(){var f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(System.import("lively.morphic/text/occur.js"),2);f=q.yieldResult;m=f.occurStartCommand;a.target.addCommands([m]);a.execCommand("accept search");return q.return(a.target.execCommand("occur",
{needle:a.input}))})}},{name:"accept search",exec:function(){a.acceptSearch();return!0}},{name:"cancel search and reset cursor in text",exec:function(){a.cancelSearch(!0);return!0}},{name:"cancel search",exec:function(){a.cancelSearch(!1);return!0}},{name:"search next",exec:function(){a.searchNext();return!0}},{name:"search prev",exec:function(){a.searchPrev();return!0}},{name:"only search prev",exec:function(){if(a.get("searchInput").isFocused())return a.searchPrev(),!0}},{name:"search next or replace and go to next",
exec:function(f,m,q){a.get("searchInput").acceptInput();return a.execCommand(a.get("replaceInput").isFocused()?"replace and go to next":"search next",m,q)}},{name:"replace current search location with replace input",exec:function(){var f=qf.Path("state.inProgress").get(a);if(f.found){var m=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();f.needle instanceof RegExp&&(m=f.found.match.replace(f.needle,m));a.target.replace(f.found.range,m)}return!0}},{name:"replace and go to next",
exec:function(){a.execCommand("replace current search location with replace input");a.execCommand(a.state.backwards?"search prev":"search next");return!0}},{name:"replace all",exec:function(){var f=qf.Path("state.inProgress").get(a);if(f.found){f=Object.assign({},f,{start:{row:0,column:0}});var m=a.get("replaceInput").textString;a.get("replaceInput").get("replaceInput").acceptInput();var q=(new qf.TextSearcher(a.target)).searchForAll(f);a.target.undoManager.group();q.forEach(function(r){var u=r.range;
r=r.match;f.needle instanceof RegExp&&(m=r.replace(f.needle,m));a.target.replace(u,m,!0,!0,!1)});a.target.undoManager.group();a.acceptSearch()}return!0}},{name:"change focus",exec:function(){a.get("searchInput").isFocused()?a.get("replaceInput").focus():a.get("searchInput").focus();return!0}},{name:"yank next word from text",exec:function(){var f=a.target,m=f.wordRight(),q=a.get("searchInput");q.selection.isEmpty()||(q.selection.text="");f=f.textInRange({start:f.cursorPosition,end:m.range.end});q.textString+=
f;return!0}}]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchWidget"}},{key:"properties",get:function(){return{name:{defaultValue:"search widget"},borderWidth:{defaultValue:1},borderColor:{defaultValue:qf.Color.gray},borderRadius:{defaultValue:3},fill:{defaultValue:qf.Color.black.withA(.6)},epiMorph:{defaultValue:!0},target:{},state:{},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search widget"}}},input:{after:["submorphs"],get:function(){var a=
this.get("searchInput").textString,f=a.match(/^\/(.*)\/([a-z]*)$/);return f?new RegExp(f[1],f[2]):a},set:function(a){this.get("searchInput").textString=String(a)}},fontSize:{after:["submorphs"],get:function(){return this.get("searchInput").fontSize},set:function(a){this.get("replaceInput").fontSize=a}},fontFamily:{after:["submorphs"],get:function(){return this.get("searchInput").fontFamily},set:function(a){this.get("searchInput").fontFamily=a;this.get("replaceInput").fontFamily=a}},layout:{initialize:function(){this.layout=
new qf.GridLayout({groups:{nextButton:{resize:!1},prevButton:{resize:!1},acceptButton:{resize:!1},cancelButton:{resize:!1}},rows:[0,{fixed:28,paddingTop:5,paddingBottom:2.5},1,{fixed:28,paddingTop:2.5,paddingBottom:5}],columns:[0,{paddingLeft:5,paddingRight:5},1,{fixed:25},2,{fixed:25},3,{fixed:5},4,{fixed:25},5,{fixed:25},6,{fixed:10}],grid:[["searchInput","nextButton","prevButton",null,"acceptButton","cancelButton",null],["replaceInput","replaceButton","replaceButton",null,"replaceAllButton","replaceAllButton",
null]]})}},submorphs:{after:["extent"],initialize:function(){this.submorphs=[qf.morph({type:"button",name:"acceptButton",label:qf.Icon.textAttribute("check-circle")}).fit(),qf.morph({type:"button",name:"cancelButton",label:qf.Icon.textAttribute("times-circle")}).fit(),qf.morph({type:"button",name:"nextButton",label:qf.Icon.textAttribute("arrow-alt-circle-down",{textStyleClasses:["far"]})}).fit(),qf.morph({type:"button",name:"prevButton",label:qf.Icon.textAttribute("arrow-alt-circle-up",{textStyleClasses:["far"]})}).fit(),
qf.morph({type:"input",name:"searchInput",placeholder:"search input",historyId:"lively.morphic-text search"}),qf.morph({type:"input",name:"replaceInput",placeholder:"replace input",historyId:"lively.morphic-text replace"}),qf.morph({type:"button",styleClasses:["replace"],name:"replaceButton",label:"replace"}),qf.morph({type:"button",styleClasses:["replace"],name:"replaceAllButton",label:"replace all"})];qf.connect(this.get("searchInput"),"onBlur",this,"onBlur");qf.connect(this.get("replaceInput"),
"onBlur",this,"onBlur")}},textMap:{after:["submorphs"]}}}}],e,{pathInPackage:function(){return"text/search.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:3867,end:21654})}(qf.Morph);qf.SearchWidget=lT;qf.SearchWidget=lT;qf.SearchWidget=lT;var TL=[{name:"search in text",exec:function(b,e){e=void 0===e?{backwards:!1}:e;b=b._searchWidget||
(b._searchWidget=new qf.SearchWidget({target:b,extent:qf.pt(300,20)}));b.state.backwards=e.backwards;b.prepareForNewSearch();qf.config.codeEditor.search.showTextMap&&b.showTextMap();return!0}}];qf.searchCommands=TL;qf.searchCommands=TL;qf.searchCommands=TL;var Ik=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js");Ik.todo=function(b){throw Error("not yet implemented "+b);};Ik.Rectangle=Pd;Ik.rect=Ff;Ik.pt=nf;Ik.arr=Qe;Ik.Range=jy;var I6=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/layout.js"),
l=e.hasOwnProperty("TextLayout")&&"function"===typeof e.TextLayout?e.TextLayout:e.TextLayout=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(){this.reset()}},{key:"reset",value:function(){this.resetLineCharBoundsCache()}},{key:"restore",value:function(a,f){var m=function(u){var v=0;return Ik.arr.flatten(Ik.arr.histogram(u,u.length/3).map(function(y){var z=
$jscomp.makeIterator(y);y=z.next().value;var B=z.next().value;z=z.next().value;for(var C=[],G=0;G<y;G++)C.push(Ik.rect(v,0,B,z)),v+=B;return C}))};a=$jscomp.makeIterator(a);for(var q=a.next();!q.done;q=a.next()){var r=$jscomp.makeIterator(q.value);q=r.next().value;r=r.next().value;r=m(r);this.lineCharBoundsCache.set(f.document.getLine(q),r)}}},{key:"resetLineCharBoundsCache",value:function(a){this.lineCharBoundsCache=new WeakMap;a&&!a._isDeserializing&&(this.estimateLineHeights(a),a.makeDirty())}},
{key:"resetLineCharBoundsCacheOfLine",value:function(a){a&&this.lineCharBoundsCache.set(a,null)}},{key:"resetLineCharBoundsCacheOfRow",value:function(a,f){var m=a.document;a._isDeserializing&&a._initializedByCachedBounds||m&&this.resetLineCharBoundsCacheOfLine(m.getLine(f))}},{key:"resetLineCharBoundsCacheOfRange",value:function(a,f){for(var m=f.start.row;m<=f.end.row;m++)this.resetLineCharBoundsCacheOfRow(a,m)}},{key:"estimateLineHeightsInRange",value:function(a,f){for(var m=a.document,q=a.getGlobalTransform(),
r=f.start.row;r<=f.end.row;r++)this.resetLineCharBoundsCacheOfRow(a,m.getLine(r),q)}},{key:"estimateExtentOfLine",value:function(a,f,m){m=void 0===m?a.getGlobalTransform():m;var q=a.fontMetric,r=a.lineWrapping,u=a.padding,v=a.textRenderer,y=a.debug,z=a.defaultTextStyle,B=a.getProperty("extent").x,C=u.left(),G=u.right(),F=u.top();u=u.bottom();v=v.directRenderTextLayerFn(a);var N=f.textAndAttributes,L=[],S;B=B-C-G;if(N&&N.length)for(var ha=0,qa=0;ha<N.length;ha+=2)(S=N[ha])&&S.isMorph?(S.position=this.pixelPositionFor(a,
{row:f.row,column:qa}).subPt(a.origin),qa++):S&&(qa+=S.length),L.push(Object.assign({},z,{},N[ha+1]));else L.push(z);N=L.length;for(ha=z=S=0;ha<N;ha++){qa=q.defaultCharExtent(a,{defaultTextStyle:L[ha],width:1E3,transform:m,paddingBottom:u,paddingTop:F,paddingRight:G,paddingLeft:C},v);var D=qa.width;z=Math.max(qa.height,z);S+=D}a=z;m=f.text.length||1;q=Math.round(S/N);C=m*q;C=r?Math.min(C,B):C;r&&(a=Math.round((Math.ceil(m/Math.max(3,B/q))||1)*z));y&&console.log(f.row+": "+f.height+" => "+a);f.changeExtent(C,
a,!0)}},{key:"estimateLineHeights",value:function(a,f){var m=a.fontMetric,q=a.textRenderer,r=a.document,u=a.defaultTextStyle,v=a.clipMode,y=a.textAlign,z=a.padding,B=a.lineWrapping,C=a.debug,G=a.getProperty("extent"),F=G.x,N=G.y;G=a.getGlobalTransform();var L=z.left(),S=z.right(),ha=z.top();z=z.bottom();r=r.lines;var qa=q.directRenderTextLayerFn(a);C&&(C=a.debugHelper(C),C.debugTextLayout||(C=!1));if(!C&&10>a.lineCount()&&3E3>a.document.stringSize&&!Ik.arr.any(a.textAndAttributes,function(D){return D&&
void 0!=D.fontFamily}))for(f=q.directRenderLineFn(a),f=m.manuallyComputeBoundsOfLines(a,r,0,0,{defaultTextStyle:u,width:F,height:N,clipMode:v,lineWrapping:B,textAlign:y,transform:G,paddingLeft:L,paddingRight:S,paddingTop:ha,paddingBottom:z},qa,f),u=0;u<r.length;u++)C=f[u],r[u].changeExtent(C.width,C.height,!m.isFontSupported(a.fontFamily,a.fontWeight));else{for(u=m=0;u<r.length;u++)v=r[u],!f&&0<v.height||(m++,this.estimateExtentOfLine(a,v,G));a.viewState._textLayoutStale=!1;C&&C.log("estimateLineHeights, "+
m+"/"+r.length+" updated, force: "+f)}}},{key:"defaultCharExtent",value:function(a){var f=a.textRenderer,m=a.fontMetric,q=a.defaultTextStyle,r=a.getGlobalTransform();f=f.directRenderTextLayerFn(a);return m.defaultCharExtent(a,{transform:r,defaultTextStyle:q,width:1E3},f)}},{key:"textBounds",value:function(a){var f=a.document,m=a.padding,q=a.borderWidthLeft,r=a.borderWidthRight,u=a.borderWidthTop;a=a.borderWidthBottom;return new Ik.Rectangle(m.left(),m.top(),Math.round(f.width+q+r),Math.round(f.height+
u+a))}},{key:"isFirstLineVisible",value:function(a){return 0>=a.viewState.firstVisibleRow}},{key:"isLastLineVisible",value:function(a){return a.viewState.lastVisibleRow>=a.lineCount()-1}},{key:"isLineVisible",value:function(a,f){return f>=a.viewState.firstVisibleRow&&f<=a.viewState.lastVisibleRow}},{key:"isLineFullyVisible",value:function(a,f){return f>=a.viewState.firstFullyVisibleRow&&f<=a.viewState.lastFullyVisibleRow}},{key:"whatsVisible",value:function(a){var f=a.viewState.firstVisibleRow,m=
a.viewState.lastVisibleRow;return{lines:a.document.lines.slice(f,m),startRow:f,endRow:m}}},{key:"firstFullVisibleLine",value:function(a){return a.viewState.firstFullyVisibleRow}},{key:"lastFullVisibleLine",value:function(a){return a.viewState.lastFullyVisibleRow}},{key:"screenLineRange",value:function(a,f,m){var q=f.row,r=f.column;r=Math.max(0,r);q=Math.min(a.lineCount()-1,Math.max(0,q));var u=this.charBoundsOfRow(a,q);r>u.length-1&&(r=u.length-1);for(var v=u[r],y=f=r,z=r+1;z<u.length&&!(u[z].y>v.y+
v.height);z++)y=z;y===u.length-1&&y++;for(z=r-1;0<=z&&!(u[z].y<v.y+v.height);z--)f=z;m&&(a=a.getLine(q).slice(f,y).match(/^\s*/)[0].length,f+=a);return new Ik.Range({start:{row:q,column:f},end:{row:q,column:y}})}},{key:"rangesOfWrappedLine",value:function(a,f){for(var m=a.getLine(f).length,q=0,r=[];;){var u=this.screenLineRange(a,{row:f,column:q},!1);r.push(u);if(u.end.column>=m)break;var v=u.end.column+1;if(v>=m)break;if(v<=q){if(!a.env.renderer.getNodeForMorph(a))break;throw Error("should not happen "+
u.end.column+" vs "+q);}q=v}return r}},{key:"chunkAtPos",value:function(a,f){Ik.todo("chunkAtPos")}},{key:"charBoundsOfRow",value:function(a,f){f=a.document.getLine(f);a._initializedByCachedBounds&&!this._restored&&(this.restore(a._initializedByCachedBounds,a),this._restored=!0);var m=this.lineCharBoundsCache.get(f);if(m)return m;var q=a.getProperty("extent");m=q.x;q=q.y;var r=a.fontMetric,u=a.textRenderer,v=a.defaultTextStyle,y=a.clipMode,z=a.textAlign,B=a.padding,C=a.lineWrapping,G=a.getGlobalTransform(),
F=B.left(),N=B.right(),L=B.top();B=B.bottom();var S=u.directRenderLineFn(a);u=u.directRenderTextLayerFn(a);a=r.manuallyComputeCharBoundsOfLine(a,f,0,0,{defaultTextStyle:v,width:m,height:q,clipMode:y,lineWrapping:C,textAlign:z,paddingLeft:F,paddingRight:N,paddingTop:L,paddingBottom:B,transform:G},u,S);if(a.find(function(ha){return void 0==ha.width&&void 0==ha.height}))return a;this.lineCharBoundsCache.set(f,a);return a}},{key:"computeMaxBoundsForLineSelection",value:function(a,f){var m=f.start,q=f.end,
r=a.textLayout,u=r.rangesOfWrappedLine(a,m.row).find(function(v){return v.containsPosition(m)});q=a.lineWrapping&&u?u.intersect(f).end:q;q=q.row==m.row?q:{row:q.row,column:-1};f=r.charBoundsOfRow(a,m.row);f=0>q.column?f.slice(m.column):f.slice(m.column,q.column+1);q=m.column+(f?f.indexOf(Ik.arr.max(f,function(v){return v.height})):0);return r.boundsFor(a,{row:m.row,column:q})}},{key:"boundsFor",value:function(a,f){var m=f.row;f=f.column;f=Math.max(0,f);m=Math.min(a.lineCount()-1,Math.max(0,m));var q=
this.charBoundsOfRow(a,m);if(0<q.length)if(f>=q.length){var r=q[q.length-1];r=new Ik.Rectangle(r.x+r.width,r.y,0,r.height)}else r=Ik.Rectangle.fromLiteral(q[f]);r||(console.warn("Cannot compute bounds for line "+m+"/"+f),r=new Ik.Rectangle(0,0,0,0));f=a.document;a=a.padding;r.x+=a.left();r.y=r.y+f.computeVerticalOffsetOf(m)+a.top();return r}},{key:"pixelPositionFor",value:function(a,f){return this.boundsFor(a,f).topLeft()}},{key:"textPositionFromPoint",value:function(a,f){var m=f.addPt(a.origin),
q=m.x,r=m.y,u=a.document;m=a.padding;var v=m.left(),y=m.top();if(r>u.height+y)return u.endPosition;if(r<y)return{row:0,column:0};m=u.findLineByVerticalOffset(r-y);if(!m)return{row:0,column:0};var z=m.line.row;a=this.charBoundsOfRow(a,z);var B=a.length,C=a[0],G=a[B-1];m={row:z,column:0};q-=v;r-=y+u.computeVerticalOffsetOf(z);if(0===B||q<=C.x+Math.round(C.width/2)&&r>=C.y&&r<=C.y+C.height)return m;if(q>G.x+Math.round(G.width/2)&&r>=G.y&&r<=G.y+G.height)return m.column=B,m;v=[];for(u=B-1;0<=u;u--)if(G=
y=a[u],z=G.x,B=G.width,C=G.y,G=G.height,!(r<C||r>C+G)&&(v.push(y),q>=z+Math.round(B/2)))return m.column=1===v.length?u:u+1,m;if(v.length)return m.column=a.indexOf(Ik.arr.last(v)),m;q=Infinity;r=-1;for(u=0;u<a.length;u++)v=a[u],v=f.distSquared(Ik.pt(v.x+v.width/2,v.y+v.height/2)),v>=q||(q=v,r=u);m.column=r;return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextLayout"}}],e,{pathInPackage:function(){return"text/layout.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:244,end:17181})}(void 0),$na=I6=Ik.TextLayout;Ik.default=I6;var Ee=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js");Ee.printViewState=function(b){var e=b.viewState,l=e.scrollTop,a=e.scrollHeight,f=e.textHeight,m=e.firstVisibleRow;e=e.lastVisibleRow;var q=b.document.lines;console.log(b+" #"+b.id.slice(0,12)+"\nscroll: "+l+" + "+a+"\nlines: "+
m+" - "+e+"\nvisible lines: "+(e-m)+"\nheight: "+f+", "+q.length+" lines")};Ee.installCSS=function(b){Ee.cssInstalled=!0;Ee.addOrChangeCSSDeclaration("new-text-css","\n\n    /* markers */\n\n    .newtext-marker-layer {\n      position: absolute;\n    }\n\n    /* selection / cursor */\n\n    .newtext-cursor {\n      z-index: 5;\n      pointer-events: none;\n      position: absolute;\n      background-color: black;\n    }\n\n    .hidden-cursor .newtext-cursor {\n      background-color: transparent !important;\n    }\n\n    .newtext-cursor.diminished {\n      background-color: gray;\n    }\n\n    .newtext-selection-layer {\n      position: absolute;\n    }\n\n    /*-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* text layer / content */\n\n    .newtext-text-layer {\n      box-sizing: border-box;\n      position: absolute;\n      white-space: pre;\n      z-index: 0;\n      min-width: 100%;\n      pointer-events: none;\n    }\n\n    .newtext-before-filler {}\n\n    .newtext-text-layer.wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-word;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.only-wrap-by-words {\n      white-space: pre-wrap;\n      overflow-wrap: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.wrap-by-chars {\n      white-space: pre-wrap;\n      word-break: break-all;\n      max-width: 100%;\n    }\n\n    .newtext-text-layer.no-wrapping {\n    }\n\n    .newtext-text-layer a {\n       pointer-events: auto;\n    }\n\n    .newtext-text-layer.auto-width .line {\n      width: fit-content;\n    }\n\n    .newtext-text-layer .line {\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      border-radius: 0;\n      border-width: 0;\n      background: transparent;\n      font-family: inherit;\n      font-size: inherit;\n      margin: 0;\n      word-wrap: normal;\n      line-height: inherit;\n      color: inherit;\n      position: relative;\n      overflow: visible;\n      -webkit-tap-highlight-color: transparent;\n      -webkit-font-variant-ligatures: contextual;\n      font-variant-ligatures: contextual;\n    }\n\n    .line > .Morph {\n      display: inline-block !important;\n      vertical-align: top !important;\n    }\n\n    blockquote {\n      margin: 0;\n      -webkit-margin-start: 0;\n      -webkit-margin-end: 0;\n    }\n\n    .newtext-text-layer blockquote {\n      margin-left: 2em;\n      margin-right: 2em;\n      border-left: 2px lightgray solid;\n      padding-left: 2%;\n    }\n\n    /* -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*/\n    /* debug styling */\n\n    .debug-info {\n      position: absolute;\n      outline: 1px solid green;\n      pointer-events: none;\n      z-index: 4;\n      text-align: center;\n      font-family: monospace;\n      color: green;\n      background-color: white;\n      font-size: small;\n      vertical-align: baseline;\n    }\n\n    .debug-line {\n      position: absolute;\n      outline: 1px solid red;\n      pointer-events: none;\n      z-index: 4,\n      text-align: right;\n      font-family: monospace;\n      font-size: small;\n      vertical-align: baseline;\n      color: red;\n    }\n\n    .debug-char {\n      position: absolute;\n      outline: 1px solid orange;\n      pointer-events: none;\n      z-index: 3\n    }\n\n  ",
b.document)};Ee.extractHTMLFromTextMorph=lJ;Ee.obj=lf;Ee.arr=Qe;Ee.num=Gk;Ee.pt=nf;Ee.Rectangle=Pd;Ee.vdom=ZE;Ee.defaultAttributes=It;Ee.defaultStyle=nc;Ee.addOrChangeCSSDeclaration=oi;Ee.hyperscriptFnForDocument=hK;Ee.objectReplacementChar="\ufffd";Ee.config=vk;Ee.getSvgVertices=Dd;var UL=Ee.vdom;Ee.h=UL.h;Ee.create=UL.create;Ee.patch=UL.patch;Ee.diff=UL.diff;Ee.cssInstalled=!1;Ee.debug=!!Ee.config.onloadURLQuery["debug-text"];Ee.nextTick=function(b,e,l,a,f,m){for(;!f&&l<e.length;)f=b[e[l++]+"equestAnimationFrame"];
return f&&f.bind(b)||b.setImmediate||function(q){b.setTimeout(q,0)}}("undefined"!==typeof window?window:global,["r","webkitR","mozR","msR","oR"],0);(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),l=e.hasOwnProperty("AfterTextRenderHook")&&"function"===typeof e.AfterTextRenderHook?e.AfterTextRenderHook:e.AfterTextRenderHook=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,
b,[{key:"reset",value:function(a){this.morph=a;this.needsRerender=this.called=!1}},{key:"updateLineHeightOfNode",value:function(a,f,m){if(0===f.height||f.hasEstimatedExtent){var q=a.getGlobalTransform().inverse();q.e=q.f=0;var r=1!=q.getScale()||0!=q.getRotation();r&&(m.style.transform=q.toString());var u=m.getBoundingClientRect();q=u.height;u=u.width;r&&(m.style.transform="");q&&u&&(f.height!==q||f.width!==u)&&a.fontMetric.isFontSupported(a.fontFamily,a.fontWeight)&&(f.changeExtent(u,q,!1),a.textLayout.resetLineCharBoundsCacheOfLine(f),
this.needsRerender=!0,a.viewState._needsFit=!0);if(f.textAndAttributes&&f.textAndAttributes.length)for(u=r=0;r<f.textAndAttributes.length;r+=2)(m=f.textAndAttributes[r])&&m.isMorph?(a._positioningSubmorph=m,m.position=a.textLayout.pixelPositionFor(a,{row:f.row,column:u}).subPt(a.origin),m._dirty=!1,a._positioningSubmorph=null,u++):m&&(u+=m.length);return q}return f.height}},{key:"updateExtentsOfLines",value:function(a){var f=this.morph,m=f.viewState,q=f.fontMetric;m.dom_nodes=[];m.dom_nodeFirstRow=
0;m.textWidth=a.scrollWidth;a=a.children;for(var r=0,u;r<a.length&&"line"!=a[r].className;)r++;if(r<a.length){u=a[r];var v=u.dataset;v=Number(v?v.row:u.getAttribute("data-row"));if("number"===typeof v&&!isNaN(v)){m.dom_nodeFirstRow=v;u=0;v=f.document.getLine(v);for(var y;r<a.length;r++){var z=a[r];m.dom_nodes.push(z);v&&(y||(y=v.hasEstimatedExtent),v.hasEstimatedExtent=y,u+=this.updateLineHeightOfNode(f,v,z),v.hasEstimatedExtent=!q.isFontSupported(f.fontFamily,f.fontWeight),v=v.nextLine())}this.needsRerender?
(f.fitIfNeeded(),f.makeDirty()):f._dirty=!!f.submorphs.find(function(B){return B.needsRerender()})}}}},{key:"hook",value:function(a,f,m){a&&a.parentNode&&(f=this.morph.viewState,f.text_layer_node=a,f.fontmetric_text_layer_node=null,this.called=!0,this.updateExtentsOfLines(a))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AfterTextRenderHook"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:4957,end:9032})})(void 0);var J6=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/renderer.js"),l=e.hasOwnProperty("TextRenderer")&&"function"===typeof e.TextRenderer?e.TextRenderer:e.TextRenderer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a?
Ee.cssInstalled||Ee.installCSS(a):console.warn("Text renderer initialized without domEnv. Depending on what you want to do you might have bad luck...!");this.domEnv=a}},{key:"directRenderLineFn",value:function(a){var f=this,m=a.viewState._renderLineFn;if(!m){var q=Ee.hyperscriptFnForDocument(this.domEnv.document);m=a.viewState._renderLineFn=function(r){return f.renderLine(q,null,a,r)}}return m}},{key:"directRenderTextLayerFn",value:function(a){var f=this,m=a.viewState._renderTextLayerFn;if(!m){var q=
Ee.hyperscriptFnForDocument(this.domEnv.document);m=a.viewState._renderTextLayerFn=function(r){return f.renderJustTextLayerNode(q,a,r,[])}}return m}},{key:"renderMorph",value:function(a,f){var m=a.cursorWidth||1,q=[],r=a.selection;if(a.inMultiSelectMode()){m=r.selections;for(r=0;r<m.length-1;r++)q.push.apply(q,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,m[r],!0,2)));q.push.apply(q,$jscomp.arrayFromIterable(this.renderSelectionLayer(a,m[r],!1,4)))}else q=this.renderSelectionLayer(a,r,!1,
m);m=this.renderTextLayer(a,f);r=this.renderJustTextLayerNode(Ee.h,a,null,[]);var u=this.renderMarkerLayer(a,f),v=a.document.width>a.width?a.scrollbarOffset:Ee.pt(0,0);v=Ee.h("div",{className:"scrollLayer",style:Object.assign({position:"absolute",top:"0px"},a.viewState.fastScroll?{overflow:a.scrollActive?a.clipMode:"hidden"}:{},{width:a.width+"px",height:a.height+"px"})},[Ee.h("div",{style:{width:Math.max(a.document.width,a.width)+"px",height:Math.max(a.document.height,a.height)-v.y+"px"}})]);m.properties.className+=
" actual";m.properties.style.overflow="visible"===a.clipMode?"visible":"hidden";r.properties.className+=" font-measure";var y=a.embeddedMorphMap,z=y?a.submorphs.filter(function(B){return!y.has(B)}):a.submorphs;q=[].concat($jscomp.arrayFromIterable(q),[u,r,m,f.renderSelectedSubmorphs(a,z)]);return Ee.h("div",Object.assign({},Ee.defaultAttributes(a,f),{style:Object.assign({},Ee.defaultStyle(a),{},a.viewState.fastScroll?{overflow:"visible"==a.clipMode?"visible":"hidden"}:{},{"-moz-user-select":"none",
cursor:"auto"===a.nativeCursor?a.readOnly?"default":"text":a.nativeCursor})}),[v].concat($jscomp.arrayFromIterable(a.viewState.fastScroll?[Ee.h("div",{className:"scrollWrapper",style:{"pointer-events":"none",position:"absolute",width:"100%",height:"100%",transform:"translate(-"+a.scroll.x+"px, -"+a.scroll.y+"px)"}},q)]:q)))}},{key:"renderTextLayer",value:function(a,f){var m=this,q=a.debug?[].concat($jscomp.arrayFromIterable(this.renderDebugLayer(a)),$jscomp.arrayFromIterable(this.renderLines(Ee.h,
f,a))):this.renderLines(Ee.h,f,a);q=this.renderJustTextLayerNode(Ee.h,a,null,q);q.properties.style.position="absolute";var r=a.viewState.afterTextRenderHook||(a.viewState.afterTextRenderHook=new Ee.AfterTextRenderHook);r.reset(a);q.properties["after-text-render-hook"]=r;Ee.nextTick(function(){m.manuallyTriggerTextRenderHook(a,f)});return q}},{key:"manuallyTriggerTextRenderHook",value:function(a,f){var m=a.viewState.afterTextRenderHook;m&&!m.called&&((f=(f=f.getNodeForMorph(a))&&f.querySelector(".actual.newtext-text-layer"))&&
m.hook(f),a.ownerChain().every(function(q){return q.visible})&&a.fit())}},{key:"renderJustTextLayerNode",value:function(a,f,m,q){var r=f.padding,u=r.x,v=r.y,y=f.fixedWidth,z=f.fixedHeight,B=f.backgroundColor,C=f.fontColor,G=f.textAlign,F=f.fontSize,N=f.textDecoration,L=f.fontStyle,S=f.fontWeight,ha=f.fontFamily,qa=f.lineHeight,D=f.wordSpacing,P=f.letterSpacing,J=f.tabWidth,M=u+r.width;r=v+r.height;var X=Math.max(f.document.height,f.height),T="newtext-text-layer";switch(f.lineWrapping){case !0:case "by-words":T+=
" wrap-by-words";break;case "only-by-words":T+=" only-wrap-by-words";break;case "by-chars":T+=" wrap-by-chars";break;case !1:T+=" no-wrapping"}y||(T+=" auto-width");z||(T+=" auto-height");f={height:X+"px"};0<u&&(f.paddingLeft=u+"px");0<M&&(f.paddingRight=M+"px");0<v&&(f.paddingTop=v+"px");0<r&&(f.paddingBottom=r+"px");P&&(f.letterSpacing=P);D&&(f.wordSpacing=D);qa&&(f.lineHeight=qa);ha&&(f.fontFamily=ha);S&&(f.fontWeight=S);L&&(f.fontStyle=L);N&&(f.textDecoration=N);F&&(f.fontSize=F+"px");G&&(f.textAlign=
G);C&&(f.color=String(C));B&&(f.backgroundColor=B);8!==J&&(f.tabSize=J);u={className:T,style:f};f.overflow="hidden";m&&(v=m.clipMode,B=m.height,m=m.width,"number"===typeof m&&(f.width=m+"px"),"number"===typeof B&&(f.height=B+"px"),v&&(f.overflow=v));return a("div",u,q)}},{key:"renderLines",value:function(a,f,m){var q=m.height,r=m.scroll,u=m.padding.y,v=m.document,y=m.clipMode;f.getNodeForMorph(m);r=r.y;var z=v.rowCount-1,B=v.height,C="visible"!==y,G=v.findLineByVerticalOffset(C?Math.max(0,C?r-u:0):
0)||{row:0,y:0,offset:0,line:v.getLine(0)},F=G.line,N=G.offset;y=G.y;G=G.row;u=v.findLineByVerticalOffset(C?Math.min(B,r-u+q):B)||{row:z,offset:0,y:0,line:v.getLine(z)};v=u.line;var L=u.offset,S=u.row;u=C?G:0;N=0===N?G:G+1;z=C?S+1:z;C=v&&L!==v.height?S-1:S;this.maxVisibleLines=Math.max(this.maxVisibleLines||1,z-u+1);G=[];v=[];v.push(a("div.newtext-before-filler",{key:"filler",style:{height:y+"px"}}));for(L=0;L<this.maxVisibleLines&&(G.push(F),S=this.renderLine(a,f,m,F),v.push(S),S.key=F.row%this.maxVisibleLines,
L++,F=F.nextLine(),F););Object.assign(m.viewState,{scrollTop:r,scrollHeight:q,scrollBottom:r+q,heightBefore:y,textHeight:B,firstVisibleRow:u,lastVisibleRow:z,firstFullyVisibleRow:N,lastFullyVisibleRow:C,visibleLines:G});m.debug&&Ee.printViewState(m);return v}},{key:"renderLine",value:function(a,f,m,q){var r=q.textAndAttributes,u=[],v=r.length,y=m.fontSize;if(0<v)for(var z=0;z<v;z+=2){var B=r[z]||"\u00a0";var C=r[z+1];if("string"!==typeof B)u.push(B.isMorph?this.renderEmbeddedSubmorph(a,f,B,C):Ee.objectReplacementChar);
else if(C){var G=C.fontSize&&(Ee.obj.isString(C.fontSize)?C.fontSize:C.fontSize+"px");var F=C.fontFamily;var N=C.fontWeight;var L=C.fontStyle;var S=C.textDecoration;var ha=C.fontColor;var qa=C.backgroundColor;var D=C.nativeCursor;var P=C.textStyleClasses;var J=C.link;var M=C.lineHeight||M;var X=C.textAlign||X;var T=C.wordSpacing||T;var fa=C.letterSpacing||fa;var Ra=C.paddingRight;var gb=C.paddingLeft;var ea=C.paddingTop;var aa=C.paddingBottom;var ia=C.verticalAlign;var Aa=C.textStroke;var ob=C.quote||
ob;var Nb="span";var Ab={};var Kb={style:Ab};G&&C.fontSize<y&&(y=C.fontSize);J&&(Nb="a",(Kb.href=J)&&J.startsWith("http")&&(Kb.target="_blank"));if(J||D)Ab.pointerEvents="auto";G&&(Ab.fontSize=G);F&&(Ab.fontFamily=F);N&&(Ab.fontWeight=N);L&&(Ab.fontStyle=L);S&&(Ab.textDecoration=S);ha&&(Ab.color=String(ha));qa&&(Ab.backgroundColor=String(qa));D&&(Ab.cursor=D);Ra&&(Ab.paddingRight=Ra);gb&&(Ab.paddingLeft=gb);ea&&(Ab.paddingTop=ea);aa&&(Ab.paddingBottom=aa);ia&&(Ab.verticalAlign=ia);Aa&&(Ab["-webkit-text-stroke"]=
Aa);C.doit&&(Ab.pointerEvents="auto",Ab.cursor="pointer");P&&P.length&&(Kb.className=P.join(" "));u.push(a(Nb,Kb,B))}else u.push(B)}else u.push(a("br"));f={};m.fontSize>y&&(f.fontSize=y+"px");M&&(f.lineHeight=M);X&&(f.textAlign=X);fa&&(f.letterSpacing=fa);T&&(f.wordSpacing=T);m=a("div",{className:"line",style:f,dataset:{row:q.row}},u);if(ob)for("number"!==typeof ob&&(ob=1);ob--;)m=a("blockquote",{},m);return m}},{key:"renderEmbeddedSubmorph",value:function(a,f,m,q){q=q||{};if(f)return a=f.render(m),
a.properties.style.position="relative",a.properties.style.transform="",a.properties.style.textAlign="initial",q.paddingTop&&(a.properties.style.marginTop=q.paddingTop),q.paddingLeft&&(a.properties.style.marginLeft=q.paddingLeft),q.paddingRight&&(a.properties.style.marginRight=q.paddingRight),q.paddingBottom&&(a.properties.style.marginBottom=q.paddingBottom),a;f=m.extent;q=f.x+"px";f=f.y+"px";return a("div",{className:m.styleClasses.join(" "),style:{width:q,height:f}},[])}},{key:"renderSelectionLayer",
value:function(a,f,m,q){m=void 0===m?!1:m;q=void 0===q?2:q;if(!f)return[];var r=a.textLayout,u=f.start,v=f.end,y=f.cursorVisible,z=f.selectionColor,B=a.document,C=a.cursorColor,G=f.isReverse();u=r.boundsFor(a,u);var F=r.computeMaxBoundsForLineSelection(a,f),N=r.boundsFor(a,v);Ee.pt(u.x,F.y);F=Ee.pt(N.x,N.y);v=u.height;N=N.height;u=G?Ee.pt(u.x,u.y):F;m=this.cursor(u,G?v:N,y,m,q,C);if(f.isEmpty())return[m];q=[];y=f.start.row;C=B.computeVerticalOffsetOf(y)+a.padding.top();G=a.padding.left();for(var L,
S,ha;y<=f.end.row;){v=B.getLine(y);if(!(y<a.viewState.firstVisibleRow-50)){if(y>a.viewState.lastVisibleRow+50)break;u=r.charBoundsOfRow(a,y).map(Ee.Rectangle.fromLiteral);N=y==f.start.row;if(ha=u[0].bottom()<Ee.arr.last(u).top()){F=r.rangesOfWrappedLine(a,y).map(function(J){return J.intersect(f)});S=N;var qa=0,D=L=void 0,P=$jscomp.makeIterator(F);for(F=P.next();!F.done;F=P.next())F=F.value,F.isEmpty()||(L=u.slice(F.start.column,F.end.column),qa=S?Ee.arr.min(L.map(function(J){return J.top()})):qa,
D=Ee.arr.max(L.map(function(J){return J.bottom()})),S=L[0],F=Ee.pt(G+S.left(),C+qa),S=Ee.arr.last(L),L=Ee.pt(G+S.right(),C+D),qa=D,S=!1,q.push(Ee.Rectangle.fromAny(F,L)))}ha||(ha=y==f.end.row,F=N?f.start.column:0,qa=ha?f.end.column:u.length-1,N=N&&Ee.arr.min(u.slice(F,qa+1).map(function(J){return J.top()}))||0,P=F>=qa?5:0,S=u[F],F=Ee.pt(G+(S?S.left():Ee.arr.last(u).right()),C+N),S=u[qa],f.includingLineEnd?L=Ee.pt(a.width-a.padding.right(),C+N+v.height):(ha=ha&&f.end.column<=u.length-1,L=Ee.pt(G+(S?
ha?S.left():S.right():Ee.arr.last(u).right())+P,C+N+v.height)),q.push(Ee.Rectangle.fromAny(F,L)))}C+=v.height;y++}a=this.selectionLayerRounded(q,z,a);a.push(m);return a}},{key:"selectionLayerRounded",value:function(a,f,m){var q=[m={left:[],right:[]}];a=$jscomp.makeIterator(a);for(var r=a.next();!r.done;r=a.next()){r=r.value;u&&(u.left()>r.right()||u.right()<r.left())&&q.push(m={left:[],right:[]});m.left.push(r.topLeft(),r.bottomLeft());m.right.push(r.topRight(),r.bottomRight());var u=r}u=[];m={};
q=$jscomp.makeIterator(q);for(a=q.next();!a.done;m={$jscomp$loop$prop$pos$2661:m.$jscomp$loop$prop$pos$2661},a=q.next())if(a=a.value,a.left.length){m.$jscomp$loop$prop$pos$2661=a.left.reduce(function(G,F){return G.minPt(F)});r=a.left.concat(a.right.reverse());a=[];for(var v=0;v<r.length;v++){var y=r[v-1]||Ee.arr.last(r),z=r[v],B=r[v+1]||Ee.arr.first(r),C=y.subPt(z).normalized().scaleBy(6);y=z.addPt(C);y._next=C.scaleBy(-1);B=B.subPt(z).normalized().scaleBy(6);z=z.addPt(B);z._prev=B.scaleBy(-1);a.push(y,
z)}a=a.map(function(G){return function(F){return{position:F.subPt(G.$jscomp$loop$prop$pos$2661),isSmooth:!0,controlPoints:{next:F._next||Ee.pt(0),previous:F._prev||Ee.pt(0)}}}}(m));r=Ee.getSvgVertices(a);z=a.map(function(G){return G.position}).reduce(function(G,F){return G.minPt(F)});v=z.y;z=z.x;a=a.map(function(G){return G.position}).reduce(function(G,F){return G.maxPt(F)});u.push(Ee.h("svg",{namespace:"http://www.w3.org/2000/svg",version:"1.1",style:{position:"absolute",left:m.$jscomp$loop$prop$pos$2661.x+
"px",top:m.$jscomp$loop$prop$pos$2661.y+"px",width:a.x-z,height:a.y-v}},Ee.h("path",{namespace:"http://www.w3.org/2000/svg",attributes:{d:r,fill:f.toString()}})))}return u}},{key:"cursor",value:function(a,f,m,q,r,u){return Ee.h("div",{className:"newtext-cursor"+(q?" diminished":""),style:{left:a.x-Math.ceil(r/2)+"px",top:a.y+"px",width:r+"px",height:f+"px",display:m?"":"none",background:u||"black"}})}},{key:"renderMarkerLayer",value:function(a){var f=a.markers,m=a.textLayout,q=a.viewState,r=q.firstVisibleRow;
q=q.lastVisibleRow;var u=[];if(!f)return u;f=$jscomp.makeIterator(f);for(var v=f.next();!v.done;v=f.next()){var y=v.value;v=y.style;y=y.range;var z=y.start;y=y.end;if(!(y.row<r||z.row>q))if(z.row===y.row)u.push(this.renderMarkerPart(m,a,z,y,v));else{u.push(this.renderMarkerPart(m,a,z,a.lineRange(z.row).end,v));for(z=z.row+1;z<=y.row-1;z++){var B=a.lineRange(z);u.push(this.renderMarkerPart(m,a,B.start,B.end,v,!0))}u.push(this.renderMarkerPart(m,a,{row:y.row,column:0},y,v))}}return u}},{key:"renderMarkerPart",
value:function(a,f,m,q,r,u){u=void 0===u?!1:u;var v=f.document;var y=v.getLine(m.row);u?(a=f.padding,u=a.left(),m=a.top()+v.computeVerticalOffsetOf(m.row),a=u+y.width,y=y.height):(y=a.boundsFor(f,m),u=y.x,m=y.y,y=a.boundsFor(f,q),a=y.x,y=y.height);y=Math.ceil(y);return Ee.h("div.newtext-marker-layer",{style:Object.assign({},r,{left:u+"px",top:m+"px",height:y+"px",width:a-u+"px"})})}},{key:"renderDebugLayer",value:function(a){var f=[],m=a.viewState,q=m.heightBefore,r=m.firstVisibleRow,u=m.lastVisibleRow;
m=m.visibleLines;var v=a.padding,y=a.scroll,z=y.x,B=y.y;y=v.left();var C=v.right(),G=v.top();v.bottom();f.push(Ee.h("div.debug-info",{style:{left:z+y+"px",top:B+"px",width:a.width-C+"px"}},Ee.h("span","visible rows: "+r+" - "+u)));for(v=0;r<u;v++,r++){var F=m[v];B=a.textLayout.lineCharBoundsCache.get(F);F=F.height;f.push(Ee.h("div.debug-line",{style:{left:z+y+"px",top:G+q+"px",width:a.width-C+"px",height:F+"px"}},Ee.h("span",String(r))));if(B)for(var N=0;N<B.length;N++){var L=B[N];f.push(Ee.h("div.debug-char",
{style:{left:y+L.x+"px",top:G+q+L.y+"px",width:L.width+"px",height:L.height+"px"}}))}q+=F}return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextRenderer"}}],e,{pathInPackage:function(){return"text/renderer.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:9049,end:36001})}(void 0),aoa=J6=Ee.TextRenderer;Ee.extractHTMLFromTextMorph=
lJ;Ee.extractHTMLFromTextMorph=lJ;Ee.default=J6;var Tp=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js");Tp.arr=Qe;Tp.eqPosition=fu;Tp.KeyHandler=sR;Tp.commands={activate:{name:"[IyGotoChar] activate",exec:function(b,e){e=void 0===e?{backwards:!1}:e;Tp.IyGotoCharKeyHandler.installInto(b,e.backwards);return!0}},moveTo:{name:"[IyGotoChar] move to",exec:function(b,e){b.saveMark();var l=b.selection,a=l.lead,f=a.row,m=a.column;a=!!b.activeMark||!l.isEmpty();var q={row:f,column:m-
1};b=b.document[e.backwards?"scanBackward":"scanForward"](q,function(r,u){return r!==e.needle||Tp.eqPosition(q,u)?null:u});if(!b)return!0;b.column++;l.lead=b;a||(l.anchor=b);return!0},multiSelectAction:"forEach",readOnly:!0}};var VL=Tp.commands.activate;Tp.activate=VL;Tp.activate=VL;Tp.activate=VL;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/iy-goto-char.js"),l=e.hasOwnProperty("IyGotoCharKeyHandler")&&"function"===typeof e.IyGotoCharKeyHandler?e.IyGotoCharKeyHandler:
e.IyGotoCharKeyHandler=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?!1:a;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this);this.charToFind=void 0;this.backwards=a}},{key:"isIyGoToChar",get:function(){return!0}},{key:"uninstallFrom",value:function(a){a._cachedKeyhandlers=null;
Tp.arr.remove(a._keyhandlers||[],this)}},{key:"eventCommandLookup",value:function(a,f){var m=f.keyCombo,q=m.startsWith("input-");if(f.onlyModifiers||m.startsWith("Shift-")||!q&&!f.isModified&&!f.isFunctionKey)return{command:"null",passEvent:!0};f=q&&m.slice(6);if(!this.charToFind)if(q)this.charToFind=f;else return this.uninstallFrom(a),null;return f!==this.charToFind?(this.uninstallFrom(a),null):{command:Tp.commands.moveTo,args:{backwards:this.backwards,needle:f}}}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"IyGotoCharKeyHandler"}},{key:"installInto",value:function(a,f){f=void 0===f?!1:f;a.keyhandlers.filter(function(m){return m.isIyGoToChar}).forEach(function(m){return m.uninstallFrom(a)});a._cachedKeyhandlers=null;a._keyhandlers=(a._keyhandlers||[]).concat(new this(f))}}],e,{pathInPackage:function(){return"text/iy-goto-char.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:1063,end:3067})})(Tp.KeyHandler);var wh=lively.FreezerRuntime.recorderFor("lively.morphic/text/commands.js");wh.chain=Ri;wh.arr=Qe;wh.string=Hg;wh.date=iu;wh.pt=nf;wh.Range=jy;wh.eqPosition=fu;wh.commands=[{name:"clipboard copy",doc:"placeholder for native copy",scrollCursorIntoView:!1,exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row);return!0}},{name:"manual clipboard copy",doc:"attempts to copy selection via browser interface",scrollCursorIntoView:!1,
multiSelectAction:"single",exec:function(b,e){e=void 0===e?{collapseSelection:!0,delete:!1,dontTryNativeClipboard:!1}:e;var l=b.selection,a=l.text,f=e.hasOwnProperty("collapseSelection")?e.collapseSelection:!0;b.saveMark(l.anchor);b.activeMark=null;(l.isMultiSelection?l.selections.slice():[l]).forEach(function(m){var q=m.isEmpty()?b.lineRange():m.range,r=b.textInRange(q);b.env.eventDispatcher.killRing.add(r);e.delete?b.deleteText(q):!m.isEmpty()&&f&&m.collapse(m.lead)});e.dontTryNativeClipboard||
b.env.eventDispatcher.doCopy(a);return!0}},{name:"clipboard cut",doc:"placeholder for native cut",exec:function(b){b.selection.isEmpty()&&b.selectLine(b.cursorPosition.row,!0);return!0}},{name:"clipboard paste",doc:"placeholder for native paste",exec:function(){return!0}},{name:"manual clipboard paste",doc:"attempts to paste from the clipboard to lively \u2013 currently requires browser extension!",multiSelectAction:"single",exec:function(b,e){e=void 0===e?{killRingCycleBack:!1}:e;var l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a=
b.env.eventDispatcher.killRing;e.killRingCycleBack&&(wh.arr.last(wh.arr.pluck(b.commandHandler.history,"name"))||"").includes("clipboard paste")&&(l=a.back());!l&&a.isCycling()&&(l=a.yank());l||(l=a.yank());b.selection.isMultiSelection?(b.undoManager.group(),b.selection.selections.slice(0,-1).reverse().map(function(m,q){q=a.pointer-1-q;0>q&&(q=a.buffer.length-1);return{selection:m,pasted:a.buffer[q]||""}}).concat({selection:b.selection.defaultSelection,pasted:l}).forEach(function(m){return m.selection.text=
m.pasted}),b.undoManager.group()):l&&(b.undoManager.group(),b.selection.text=l,b.undoManager.group());return f.return(!0)})}},{name:"browse clipboard",exec:function(b){var e,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=b.env.eventDispatcher.killRing,l=e.pointer,a=e.buffer,f=a.map(function(u){return{isListItem:!0,string:wh.string.truncate(u,80).replace(/\n/g,""),value:u}}),r.yield(b.world().filterableListPrompt("select items to paste",f,{preselect:l,
multiSelect:!0}),2);m=r.yieldResult;q=m.selected;q.length&&(b.undoManager.group(),b.insertTextAndSelect(q.join("\n")),b.undoManager.group());return r.return(!0)})}},{name:"text undo",doc:"undo text changes",multiSelectAction:"single",exec:function(b){b.textUndo();return!0}},{name:"text redo",doc:"redo text changes",multiSelectAction:"single",exec:function(b){b.textRedo();return!0}},{name:"select all",doc:"Selects entire text contents.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.saveMark();
b.selectAll();return!0}},{name:"delete backwards",doc:"Delete the character in front of the cursor or the selection.",exec:function(b){if(b.rejectsInput())return!1;if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&b.editorPlugin.cmd_delete_backwards())return!0;var e=b.selection;e.isEmpty()&&e.growLeft(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"delete",doc:"Delete the character following the cursor or the selection.",exec:function(b){var e=b.selection;
if(b.rejectsInput())return!1;e.isEmpty()&&e.growRight(1);e.text="";e.collapse();b.activeMark&&(b.activeMark=null);return!0}},{name:"indent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,l){return b.insertText(b.tab,l.start)});b.undoManager.group();return!0}},{name:"outdent",scrollCursorIntoView:!1,exec:function(b){b.undoManager.group();b.withSelectedLinesDo(function(e,l){return e.startsWith(b.tab)&&b.deleteText({start:l.start,end:{row:l.start.row,
column:b.tab.length}})});b.undoManager.group();return!0}},{name:"indent according to mode",exec:function(b,e){e=void 0===e?{}:e;var l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){l=b.editorPlugin&&b.editorPlugin.mode;if(!l)return y.return(!0);m=e.hasOwnProperty("undo")?e.undo:!0;e.hasOwnProperty("firstRow")&&e.hasOwnProperty("lastRow")?(q=e,a=q.firstRow,f=q.lastRow):b.selection.isEmpty()?a=f=b.cursorPosition.row:(r=b.selection.selectedRows,a=r.first,
f=r.last);return y.yield(System.import("lively.ide/editor-modes.js"),2)}u=y.yieldResult;v=u.indentLines;m&&b.undoManager.group();v(b,l,a,f,"smart",!0,e);m&&b.undoManager.group();return y.return(!0)})}},{name:"tab - snippet expand or indent",scrollCursorIntoView:!0,exec:function(b){var e=b.snippets.find(function(l){return l.canExpand(b)});return e?(e.expandAtCursor(b),!0):b.selection.isEmpty()?b.execCommand("insertstring",{string:b.tab}):b.execCommand("indent according to mode")}},{name:"browse snippets",
scrollCursorIntoView:!0,exec:function(b){var e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return e=b.snippets.map(function(q){return{isListItem:!0,string:q.trigger+" - "+q.expansion,value:q}}),m.yield(b.world().filterableListPrompt("select snippet",e,{requester:b}),2);l=m.yieldResult;a=$jscomp.makeIterator(l.selected);(f=a.next().value)&&f.expandAtCursor(b);return m.return(!0)})}},{name:"transpose chars",exec:function(b){if(b.selection.isEmpty()){var e=
b.cursorPosition,l=e.row,a=e.column;e=wh.Range.create(l,a-1,l,a+1);var f=b.getLine(l);l=f[a-1];a=f[a];l&&a&&b.replace(e,a+l,!0)}return!0}},{name:"cycle selection contents",documentation:"If there are multiple selections, will take the text of the first one and replace the second one with it, the text of the second will replace the third, the last selection contents will replace the contents of the first.",multiSelectAction:"single",exec:function(b){var e=b.selection.selections;b.undoManager.group();
e.reduce(function(l,a){var f=a.text;a.text=l;return f},wh.arr.last(e).text);b.undoManager.group();return!0}},{name:"go left",doc:"Move the cursor 1 character left. At the beginning of a line move the cursor up. If a selection is active, collapse the selection left.",exec:function(b){b.activeMark?b.selection.selectLeft(1):b.selection.goLeft(1);return!0}},{name:"go right",doc:"Move the cursor 1 character right. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",
exec:function(b){b.activeMark?b.selection.selectRight(1):b.selection.goRight(1);return!0}},{name:"go up",doc:"Move the cursor 1 line. At the end of a line move the cursor down. If a selection is active, collapse the selection right.",scrollCursorIntoView:!0,exec:function(b){b.activeMark?b.selection.selectUp(1):b.selection.goUp(1,!0);return!0}},{name:"go down",exec:function(b){b.activeMark?b.selection.selectDown(1):b.selection.goDown(1,!0);return!0}},{name:"select left",exec:function(b){b.selection.selectLeft(1);
return!0}},{name:"select right",exec:function(b){b.selection.selectRight(1);return!0}},{name:"select up",exec:function(b){b.selection.selectUp(1,!0);return!0}},{name:"select down",exec:function(b){b.selection.selectDown(1,!0);return!0}},{name:"select line",exec:function(b){var e=b.selection,l=e.lead.row,a=b.lineRange(l,!1);e.range=e.range.equals(a)?b.lineRange(l,!0):a;return!0}},{name:"goto line start",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var l=b.selection,a=l.lead;
b=b.screenLineRange(a,!0);l.lead=wh.eqPosition(a,b.start)?{column:0,row:a.row}:b.start;!e&&(l.anchor=l.lead);return!0}},{name:"goto line end",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var l=b.selection;b=b.screenLineRange(l.lead,!0);l.lead=b.end;!e&&(l.anchor=l.lead);return!0}},{name:"goto page up",exec:function(b){b.pageUpOrDown({direction:"up",select:!!b.activeMark});return!0}},{name:"goto page down",exec:function(b){b.pageUpOrDown({direction:"down",select:!!b.activeMark});
return!0}},{name:"goto page up and select",exec:function(b){b.pageUpOrDown({direction:"up",select:!0});return!0}},{name:"goto page down and select",exec:function(b){b.pageUpOrDown({direction:"down",select:!0});return!0}},{name:"goto start",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentStart(Object.assign({},e));return!0}},{name:"goto end",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;b.gotoDocumentEnd(Object.assign({},e));return!0}},{name:"goto paragraph above",
exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var l=b.paragraphRangeAbove(b.cursorPosition.row);l.start.row--;b.selection.lead=l.start;e.select||b.collapseSelection();return!0}},{name:"goto paragraph below",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var l=b.paragraphRangeBelow(b.cursorPosition.row);l.end.row++;b.selection.lead=l.end;e.select||b.collapseSelection();return!0}},{name:"move cursor to screen bottom in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,
l=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),f=b.textLayout.lastFullVisibleLine(b),m=a+Math.floor((f-a)/2);if(l.row<a)l.row=a;else if(l.row<m)l.row=m;else if(l.row<f)l.row=f;else return!0;b.selection.lead=l;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"move cursor to screen top in 1/3 steps",readOnly:!0,exec:function(b){var e=!!b.activeMark,l=b.cursorPosition,a=b.textLayout.firstFullVisibleLine(b),f=b.textLayout.lastFullVisibleLine(b),m=a+Math.floor((f-a)/2);if(l.row<=a)return!0;
l.row=l.row<=m?a:l.row<=f?m:f;b.selection.lead=l;e||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto line",exec:function(b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return e=!!b.activeMark,l=Number,f.yield(b.world().prompt("Enter line number"),2);a=l(f.yieldResult);isNaN(a)||(e?b.selection.lead={row:a,column:0}:b.cursorPosition={row:a,column:0},b.scrollCursorIntoView(),b.focus());return f.return(!0)})}},{name:"join line",exec:function(b,
e){e=void 0===e?{withLine:"before"}:e;var l=b.selection,a=l.start,f=l.end;l=l.lead;if(!b.selection.isEmpty()){if(a.row===f.row)return!0;e=b.undoManager.ensureNewGroup(b,"join line");f=wh.arr.range(0,f.row-1-a.row).map(function(m){return b.joinLine(a.row)});b.undoManager.group(e);b.selection.isMultiSelection&&(b.cursorPosition=f[0],f.slice(1).forEach(function(m){return b.selection.addRange({start:m,end:m})}));return!0}f=l.row;if("before"===e.withLine&&0>=f||"after"===e.withLine&&f>=b.document.endPosition.row)return!0;
b.undoManager.group();b.cursorPosition=b.joinLine("before"===e.withLine?f-1:f);b.undoManager.group();return!0}},{name:"split line",exec:function(b){var e=b.cursorPosition,l=b.getLine(e.row).match(/^\s*/)[0].length;b.insertText("\n"+" ".repeat(l),e);b.cursorPosition=e;return!0}},{name:"insert line",exec:function(b,e){e=void 0===e?{where:"above"}:e;var l=b.cursorPosition.row,a=b.getLine(l).match(/^\s*/)[0].length;"below"===e.where&&l++;b.insertText(" ".repeat(a)+"\n",{column:0,row:l});b.cursorPosition=
{column:a,row:l};return!0}},{name:"duplicate line or selection",exec:function(b){b.undoManager.group();var e=b.selection.end;if(b.selection.isEmpty())b.insertText(b.getLine(e.row)+"\n",{column:0,row:e.row+1});else{var l=b.selection.range;b.insertText(b.selection.text,e);b.selection=l}b.undoManager.group();return!0}},{name:"delete emtpy line or until end of line",exec:function(b){var e=b.cursorPosition,l=b.getLine(e.row);if(wh.eqPosition(b.document.endPosition,e))return!0;e=l.trim()?{start:e,end:{row:e.row,
column:l.length}}:{start:{row:e.row,column:0},end:{row:e.row+1,column:0}};b.env.eventDispatcher.doCopy(b.textInRange(e));b.undoManager.group();b.deleteText(e);b.undoManager.group();return!0}},{name:"delete left until beginning of line",exec:function(b){b.activeMark&&(b.activeMark=null);if(!b.selection.isEmpty())return b.selection.text="",!0;var e=b.lineRange(),l=b.cursorPosition;if(wh.eqPosition({row:l.row,column:0},l))return!0;e={start:wh.eqPosition(e.start,l)?{row:l.row,column:0}:e.start,end:l};
b.deleteText(e);return!0}},{name:"move lines up",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var l=e.selections.map(function(m){return m.range});l.slice().sort(wh.Range.compare).forEach(function(m){b.selection=m;b.execCommand("move lines up")});l.forEach(function(m){m.start.row--;m.end.row--});b.selection.ranges=l;return!0}e.isEmpty()||0!==e.end.column||e.growRight(-1);l=e.start;e=e.end;var a=b.getLine(l.row-1),f=b.undoManager.ensureNewGroup(b);b.insertText(a+
"\n",{row:e.row+1,column:0});b.deleteText({start:{row:l.row-1,column:0},end:{row:l.row,column:0}});b.undoManager.group(f);return!0}},{name:"move lines down",multiSelectAction:"single",exec:function(b){var e=b.selection;if(b.inMultiSelectMode()){var l=e.selections.map(function(m){return m.range});l.slice().sort(wh.Range.compare).reverse().forEach(function(m){b.selection=m;b.execCommand("move lines down")});l.forEach(function(m){m.start.row++;m.end.row++});b.selection.ranges=l;return!0}e.isEmpty()||
0!==e.end.column||e.growRight(-1);var a=e.range,f=a;l=f.start;f=f.end;e.isEmpty()?a={start:{row:l.row,column:0},end:{row:l.row+1,column:0}}:0!==f.column&&(a={start:l,end:{row:f.row+1,column:0}});e=b.undoManager.ensureNewGroup(b);a=b.deleteText(a);b.insertText(a,{row:l.row+1,column:0});b.undoManager.group(e);b.selection={start:Object.assign({},l,{row:l.row+1}),end:Object.assign({},f,{row:f.row+1})};return!0}},{name:"old select word",exec:function(b){var e=b.selection;e.range=b.wordAt(e.lead).range;
return!0}},{name:"select word",exec:function(b){var e=b.selection;if(b=b.selectMatchingBrackets(b.textString,b.positionToIndex(e.lead)))e.range={start:b[0],end:b[1]+1};return!0}},{name:"select word right",exec:function(b){var e=b.selection;e.anchor=b.wordRight(e.end).range.end;return!0}},{name:"goto word left",exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var l=b.wordLeft().range;b.selection.lead=l.start;e||(b.selection.anchor=l.start);return!0}},{name:"goto word right",
exec:function(b,e){e=void 0===e?{select:!1}:e;e=e.select||!!b.activeMark;var l=b.wordRight().range;b.selection.lead=l.end;e||(b.selection.anchor=l.end);return!0}},{name:"delete word right",exec:function(b){b.undoManager.group();var e=b.wordRight().range.end;e={start:b.cursorPosition,end:e};b.env.eventDispatcher.doCopy(b.textInRange(e));b.deleteText(e);b.undoManager.group();return!0}},{name:"delete word left",exec:function(b){b.undoManager.group();var e={start:b.wordLeft().range.start,end:b.cursorPosition};
b.deleteText(e);b.undoManager.group();return!0}},{name:"goto matching right",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var l=e.pairs||{"{":"}","[":"]","(":")","<":">"};if(l=b.findMatchingForward(b.cursorPosition,"right",l)||b.findMatchingForward(b.cursorPosition,"left",l))b.selection.lead=l,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"goto matching left",exec:function(b,e){e=void 0===e?{select:!!b.activeMark}:e;var l=e.pairs||{"}":"{","]":"[",")":"(",">":"<"};
if(l=b.findMatchingBackward(b.cursorPosition,"left",l)||b.findMatchingBackward(b.cursorPosition,"right",l))b.selection.lead=l,e.select||(b.selection.anchor=b.selection.lead);return!0}},{name:"realign top-bottom-center",doc:"Cycles through centering the cursor position, aligning it at the top, aligning it at the bottom.",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){var e=b.charBoundsFromTextPosition(b.cursorPosition),l=e.topLeft();e=b.height-e.height;var a=b.scroll,f=a.x;a=a.y;
a=2>Math.abs(l.y-a)?l.y-e:2>Math.abs(l.y-a-.5*e)?l.y:l.y-.5*e;b.scroll=wh.pt(f,a);return!0}},{name:"reverse selection",doc:"switches the selection lead and anchor",exec:function(b){var e=b.selection;if(e.isEmpty()){var l=b.popSavedMark();l&&(b.saveMark(b.cursorPosition),e.lead=l.position)}else e.reverse();return!0}},{name:"toggle active mark",doc:"....",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,l){var a=b.activeMark;e=b.selection;var f=!e.isEmpty();if(4===l){if(b=b.popSavedMark())e.lead=
b.position,f||(e.anchor=e.lead);return!0}if(!a&&!f)return b.activeMark=e.lead,!0;b.saveMark(a||e.anchor);b.activeMark=null;f&&(b.inMultiSelectMode()?e.selections:[e]).forEach(function(m){return m.anchor=m.lead});return!0}},{name:"fit text to column",handlesCount:!0,multiSelectAction:"forEach",exec:function(b,e,l){function a(u,v,y){if(u.length<=f)return[v+u.trim()];y=u.slice(0,f);var z=wh.arr.last(wh.string.reMatches(y,q)),B=z&&0<z.start?z.start:f;z=y.slice(0,B);u=v+(y.slice(B)+u.slice(f)).trimLeft();
return[z].concat(a(u,v))}if(4===l)return b.execCommand("join line");b.selection.isEmpty()&&b.selectLine();e=b.selection;var f=l||80,m=e.selectedRows;l=e.range;var q=/[ ]+/g,r=/^[\s\t]+/;e=wh.string.paragraphs(wh.arr.range(m.first,m.last).map(function(u){return b.getLine(u)}).join("\n"),{keepEmptyLines:!0});e=wh.chain(e.map(function(u){if(!/^\s*$/.test(u)){u=u.split("\n").join(" ");if(""===u.trim())u=[""];else{var v=u.match(r);v=v?v[0]:"";u=a(v+u.trim(),v)}u=u.join("\n")+"\n"}return u})).flatten().value().join("\n");
b.undoManager.group();b.replace(l,e);b.undoManager.group();return!0}},{name:"lowercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toLowerCase();b.undoManager.group();return!0}},{name:"remove trailing whitespace",exec:function(b){b.undoManager.group();var e=0;b.withLinesDo(0,b.documentEndPosition.row,function(l,a){return l.match(/\s+$/)&&++e&&b.replace(a,l.trimRight())});b.world().setStatusMessage(e+" lines cleaned up");
b.undoManager.group();return!0}},{name:"uppercase",exec:function(b){b.undoManager.group();b.selection.isEmpty()&&(b.selection=b.wordAt().range);b.selection.text=b.selection.text.toUpperCase();b.undoManager.group();return!0}},{name:"newline",exec:function(b){var e=b.cursorPosition,l=b.getLine(e.row),a=l.match(/^\s*/)[0].length;b.undoManager.group();!l.trim()&&a&&(b.deleteText({start:{row:e.row,column:0},end:{row:e.row,column:a}}),e.column=0);if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_newline&&
b.editorPlugin.cmd_newline(e,l,a))return!0;b.selection.text="\n"+" ".repeat(a);b.selection.collapseToEnd();b.undoManager.group();return!0}},{name:"insertstring",exec:function(b,e){var l=e=void 0===e?{string:null,undoGroup:!1}:e;e=l.string;l=l.undoGroup;var a="string"===typeof e&&e.length;a||console.warn("command insertstring called with not string value");if(b.rejectsInput()||!a)return!1;b.saveActiveMarkAndDeactivate();if(b.editorPlugin&&"function"===typeof b.editorPlugin.cmd_insertstring&&b.editorPlugin.cmd_insertstring(e))return!0;
a=b.selection;var f=!a.isEmpty();f&&b.undoManager.group();var m=a.lead;a.replace(e,!0,!0,!0,!(1===e.length&&"\n"!==e&&0<m.column));a.collapseToEnd();f&&b.undoManager.group();l&&(/^[\s\.,\?\+=]+$/.test(e)||"number"!==typeof l?b.undoManager.group():b.undoManager.groupLater(l));return!0}},{name:"toggle line wrapping",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b){b.keepPosAtSameScrollOffsetWhile(function(){return b.lineWrapping=b.lineWrapping?!1:b.fontMetric.isProportional(b.fontFamily)?
!0:"by-chars"});return!0}},{name:"cancel input",scrollCursorIntoView:!1,multiSelectAction:"single",exec:function(b,e,l,a){b.env.eventDispatcher.resetKeyInputState();b.selection.disableMultiSelect&&b.selection.disableMultiSelect();b.selection.isEmpty()||(b.selection.anchor=b.selection.lead);b.activeMark&&(b.activeMark=null);return!0}}];wh.usefulEditorCommands=[{name:"insert date",handlesCount:!0,exec:function(b,e,l){e=wh.date.format(new Date,l?"mediumDate":"isoDate");b.undoManager.group();b.insertText(e);
b.undoManager.group();return!0}},{name:"[todo] toggle todo marker",exec:function(b){var e=b.selection;e.isEmpty()&&b.selectLine();b=/\[\s*\]/g;var l=/\[X\]/g,a=e.text;a=b.test(a)?a.replace(b,"[X]"):l.test(a)?a.replace(l,"[ ]"):"[ ] "+a.trimLeft();e.text=a;return!0}},{name:"selected lines: sort",exec:function(b){var e=b.selection,l=e.start.row;e=e.end.row;var a=[];b.withLinesDo(l,e,function(f){var m=a.findIndex(function(q){return q>f});-1<m?a.splice(m,0,f):a.push(f)});b.undoManager.group();b.replace({start:{row:l,
column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: reverse",exec:function(b){var e=b.selection,l=e.start.row;e=e.end.row;var a=[];b.withLinesDo(l,e,function(f){return a.push(f)});b.undoManager.group();b.replace({start:{row:l,column:0},end:{row:e+1,column:0}},a.reverse().join("\n")+"\n");b.undoManager.group();return!0}},{name:"selected lines: remove duplicates (uniq)",exec:function(b){var e=b.selection,l=e.start.row;e=e.end.row;var a=[];b.withLinesDo(l,
e,function(f){return wh.arr.pushIfNotIncluded(a,f)});b.undoManager.group();b.replace({start:{row:l,column:0},end:{row:e+1,column:0}},a.join("\n")+"\n");b.undoManager.group();return!0}},{name:"change string inflection",handlesCount:!0,multiSelectAction:"single",exec:function(b,e,l){function a(B,C){var G,F,N=f(B).trim();"uppercased"===N?G=/\s*[A-Z0-9]+/g:"dashed"===N?G=/-\w/g:"spaced"===N&&(G=/\s+.?/g);"uppercased"===C?F=function(L){return L.trim().replace(/^-/,"").toUpperCase()}:"dashed"===C?F=function(L){return"-"+
L.trim().replace(/^-/,"").toLowerCase()}:"spaced"===C&&(F=function(L){return" "+L.trim().replace(/^-/,"").toLowerCase()});return B.replace(G,F)}function f(B){return B.match(/[A-Z]/)?"uppercased":B.match(/-/)?"dashed":B.match(/\s/)?"spaced":"unknown"}var m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress){b.selection.isEmpty()&&(b.selection=b.wordAt().range);m=b.selection.ranges;q=b.textInRange(m[0]);if(!q)return b.setStatusMessage("Please select some text"),
B.return(!0);r=f(q);u=wh.arr.without(["uppercased","dashed","spaced"],r);return B.yield(b.world().listPrompt("Convert "+r+" into?",u,{}),2)}v=B.yieldResult;y=$jscomp.makeIterator(v.selected);z=y.next().value;if(!z)return B.return(!0);b.undoManager.group();m.forEach(function(C,G){G=b.textInRange(C);G=a(G,z);b.replace(C,G)});b.undoManager.group();b.focus();return B.return(!0)})}},{name:"spell check word",exec:function(b,e){var l,a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return l=
b.wordAt(),l.string?v.yield(System.import("lively.ide/shell/spell-checker.js"),2):(b.setStatusMessage("no word for spellcheck!"),v.return(!0));case 2:return a=v.yieldResult,f=a.spellCheckWord,v.yield(f(l.string),3);case 3:return m=v.yieldResult,m.length?v.yield(b.world().filterableListPrompt("Choose replacement for "+l.string,m),4):(b.setStatusMessage("no suggestions for word "+l.string),v.return(!0));case 4:q=v.yieldResult;r=$jscomp.makeIterator(q.selected);if(u=r.next().value)b.undoManager.group(),
b.replace(l.range,u),b.undoManager.group();return v.return(!0)}})}},{name:"[shell] run shell command on region",multiSelectAction:"single",exec:function(b,e){var l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return a=(l=b.textInRange(b.selection))&&0!==l.length?{stdin:l}:{},y.yield(b.world().prompt("Enter shell command to run on region.",{historyId:"lively.ide.execShellCommand"}),2);case 2:return f=y.yieldResult,y.yield(System.import("lively.ide/shell/shell-interface.js"),
3);case 3:m=y.yieldResult;q=m.runCommand;if(!f)return y.return(b.setStatusMessage("No command entered, aborting...!"));r=q(f,a);y.setCatchFinallyBlocks(4);return y.yield(r.whenDone(),6);case 6:u=r.output.trim();b.undoManager.group();b.selection.selections.forEach(function(z){return z.text=u});b.undoManager.group();y.leaveTryBlock(5);break;case 4:v=y.enterCatchBlock(),b.showError(v);case 5:return y.return(!0)}})}},{name:"open file at cursor",exec:function(b,e){var l,a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress)return b.getLine(),l=b.cursorPosition.row,a=b.document.scanBackward(b.cursorPosition,function(B,C){return(0>=C.column||B.match(/\s/))&&C})||{row:0,column:0},f=b.document.scanForward(b.cursorPosition,function(B,C){return(C.row!=l||B.match(/\s/))&&C})||b.documentEndPosition,m=b.textInRange({start:a,end:f}).replace(/\s/g,""),q=m.split(":"),r=q[0].match(/^file|http/)?q.shift()+":"+q.shift():q.shift(),q[0].match(/^[0-9]+$/)&&(r+=":"+q.shift()),z.yield(System.import("lively.ide/text-editor.js"),
2);u=z.yieldResult;v=u.default;y=v.openInWindow();y.location=r;return z.return(y)})}},{name:"run code on text morph",doc:"...",exec:function(b,e){var l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:return l={targetModule:"lively://code-on-text-morph",context:b},r.yield(b.world().editPrompt("Run code on selection. Use this.selection.text to access it",{requester:b,mode:"js",evalEnvironment:l,historyId:"run-code-on-text-morph-hist"}),2);case 2:return a=
r.yieldResult,r.setCatchFinallyBlocks(3),b.undoManager.group(),r.yield(lively.vm.runEval(a,l),5);case 5:m=r.yieldResult;b.undoManager.group();f=m.isError?m.value:null;r.leaveTryBlock(4);break;case 3:f=q=r.enterCatchBlock();case 4:return f&&b.showError(f),r.return(void 0)}})}},{name:"change editor mode",exec:function(b){var e,l,a,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return e=function(z){return!z.endsWith("ide/editor-plugin.js")&&z.endsWith("editor-plugin.js")},
y.yield(lively.modules.getPackage("lively.ide").resources(e),2);case 2:return l=y.yieldResult,a=b.editorPlugin||{},f=a.shortName,m=0,q=["<no mode>"].concat(l.map(function(z,B){var C=z.url.match(/([^\/]+)\/editor-plugin.js/)[1];C===f&&(m=B);return{isListItem:!0,string:C,value:z}})),y.yield(b.world().filterableListPrompt("choose mode",q,{requester:b,preselect:m,historyId:"lively.morphic/text-change-editor-mode-hist",fuzzy:!0}),3);case 3:r=y.yieldResult;u=$jscomp.makeIterator(r.selected);v=u.next().value;
if(!v)return y.return();if("<no mode>"!==v){y.jumpTo(4);break}return y.yield(b.changeEditorMode(null),5);case 5:return b.resetTextAttributes(),y.return();case 4:if(v.isLoaded){y.jumpTo(6);break}return y.yield(lively.modules.module(v.url).load(),6);case 6:return y.yield(b.changeEditorMode(v.url),0)}})}},{name:"report token at cursor",exec:function(b){var e,l,a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){e=b.tokenAt(b.cursorPosition)||{};l=e.token;a=e.start;f=e.end;b.setStatusMessage(l?
l+" "+a.column+" => "+f.column:"no token");return m.return(!0)})}}];wh.commands.push.apply(wh.commands,$jscomp.arrayFromIterable(wh.usefulEditorCommands));wh.iyGotoCharActivate=VL;wh.commands.push(wh.iyGotoCharActivate);wh.searchCommands=TL;wh.commands.push.apply(wh.commands,$jscomp.arrayFromIterable(wh.searchCommands));var K6=wh.commands;wh.default=K6;var Ec=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js");Ec.Rectangle=Pd;Ec.Point=Gf;Ec.rect=Ff;Ec.Color=xf;Ec.pt=nf;Ec.string=Hg;
Ec.num=Gk;Ec.obj=lf;Ec.fun=Zk;Ec.promise=oe;Ec.arr=Qe;Ec.signal=oj;Ec.noUpdate=Ct;Ec.connect=Oe;Ec.disconnect=xo;Ec.bowser=ir;Ec.morph=sb;Ec.touchInputDevice=Mp;Ec.sanitizeFont=Na;Ec.config=vk;Ec.Morph=Mj;Ec.Selection=QL;Ec.MultiSelection=RL;Ec.Document=Yna;Ec.objectReplacementChar="\ufffd";Ec.Anchor=JC;Ec.Range=jy;Ec.eqPosition=fu;Ec.lessPosition=eu;Ec.KeyHandler=sR;Ec.UndoManager=iF;Ec.TextSearcher=SL;Ec.TextLayout=$na;Ec.Renderer=aoa;Ec.extractHTMLFromTextMorph=lJ;Ec.commands=K6;Ec.textAndAttributesWithSubRanges=
kJ;Ec.serializeMorph=lE;Ec.deserializeMorph=mE;Ec.getSvgVertices=Dd;Ec.renderSubTree=Zw;Ec.ShadowObject=kr;Ec.getClassName=yo;var Qs=wa("ac",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/morph.js"),l=e.hasOwnProperty("Text")&&"function"===typeof e.Text?e.Text:e.Text=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){var f=
a=void 0===a?{}:a,m=f.position,q=f.rightCenter,r=f.leftCenter,u=f.topCenter,v=f.bottom,y=f.top,z=f.right,B=f.left,C=f.bottomCenter,G=f.bottomLeft,F=f.bottomRight,N=f.topRight,L=f.topLeft;f=f.center;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.undoManager.reset();this.fit();void 0!==m&&(this.position=m);void 0!==q&&(this.rightCenter=q);void 0!==r&&(this.leftCenter=r);void 0!==u&&(this.topCenter=u);void 0!==v&&(this.bottom=v);void 0!==y&&
(this.top=y);void 0!==z&&(this.right=z);void 0!==B&&(this.left=B);void 0!==C&&(this.bottomCenter=C);void 0!==G&&(this.bottomLeft=G);void 0!==F&&(this.bottomRight=F);void 0!==N&&(this.topRight=N);void 0!==L&&(this.topLeft=L);void 0!==f&&(this.center=f)}},{key:"__deserialize__",value:function(a,f,m,q){zb._get(Object.getPrototypeOf(l.prototype),"__deserialize__",this).call(this,a,f,m,q);this.viewState=this.defaultViewState;this.markers=[];this.textRenderer=new Ec.Renderer(this.env.domEnv);this.textLayout=
new Ec.TextLayout(this);this.changeDocument(Ec.Document.fromString(""));this.ensureUndoManager();a.cachedLineBounds&&(this._initializedByCachedBounds=a.cachedLineBounds);this._isDeserializing=!0}},{key:"__after_deserialize__",value:function(a,f,m){var q=this;zb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m);this._isDeserializing=!1;this.whenRendered().then(function(){q.embeddedMorphs.forEach(function(r){return r.top=0})})}},{key:"__only_serialize__",get:function(){return Ec.arr.withoutAll(zb._get(Object.getPrototypeOf(l.prototype),
"__only_serialize__",this),["document","textRenderer","viewState","undoManager","markers","textLayout","embeddedMorphMap",this.displacingMorphMap.size?"":"displacingMorphMap"])}},{key:"__additionally_serialize__",value:function(a,f,m,q){zb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,q);a.props.selections={key:"selections",verbatim:!0,value:(this.selection.isMultiSelection?this.selection.ranges:[this.selection.range]).map(function(C){return Ec.obj.select(C,
["start","end"])})};a.props.anchors&&this.selection.isEmpty()&&(a.props.anchors.value=a.props.anchors.value.filter(function(C){return!C.id.includes("selection-")}));a.props.textAndAttributes={key:"textAndAttributes",value:this.textAndAttributes.map(function(C){if(!C)return C;if(C.isMorph)return m.ref(C).asRefForSerializedObjMap();if(Ec.obj.isObject(C)){var G={};C=JSON.stringify(C,function(F,N){return N&&N.__serialize__?(N=N.__serialize__(),Object.assign(G,N.bindings),"->["+(N.__expr__+"]")):N});C=
C.replace(/"->\[.*\]"/g,function(F){return F.slice(4,-2)});return m.expressionSerializer.exprStringEncode({__expr__:"("+C+")",bindings:G})}return C})};f=[];q=$jscomp.makeIterator(this.document.lines);for(var r=q.next();!r.done;r=q.next()){r=r.value;var u=this.textLayout.lineCharBoundsCache.get(r);if(u){var v=[],y=void 0,z=0;if(u){u=$jscomp.makeIterator(u);for(var B=u.next();!B.done;B=u.next()){B=B.value;if(y){if(Ec.num.roundTo(y.width,.001)==Ec.num.roundTo(B.width||0,.001)&&B.height==y.height){z++;
continue}v.push([z,Ec.num.roundTo(y.width||0,.001),y.height||0])}z=1;y=B}}y&&v.push([z,Ec.num.roundTo(y.width||0,.001),y.height||0]);f.push([r.row,Ec.arr.flatten(v)])}}a.cachedLineBounds=f}},{key:"spec",value:function(){var a=zb._get(Object.getPrototypeOf(l.prototype),"spec",this).call(this);a.textString=this.textString;return Ec.obj.dissoc(a,"anchors embeddedMorphMap plugins savedMarks textLayout textRenderer viewState undoManager metadata document displacingMorphMap".split(" "))}},{key:"isText",
get:function(){return!0}},{key:"makeDirty",value:function(){this._positioningSubmorph||zb._get(Object.getPrototypeOf(l.prototype),"makeDirty",this).call(this)}},{key:"onChange",value:function(a){var f=this,m=a.prop,q=a.selector,r=a.meta,u=this.lineWrapping,v=!1,y=!1,z=!1,B=!1,C=!1,G=!1;if(q)v="replace"===q,B="addTextAttribute"===q,this._displacementChange=!this._displacing&&v;else switch(m){case "scroll":C=y=!0;break;case "extent":y=!0;m=a.prevValue.subPt(a.value);G=(z=this.fixedWidth&&!!this.lineWrapping&&
!!m.x)&&(!this.fixedWidth||!this.fixedHeight);break;case "wordSpacing":case "letterSpacing":case "tabWidth":u&&(B=!0);break;case "fontFamily":case "fontSize":case "lineHeight":case "textAlign":case "fontWeight":case "fontStyle":case "textStyleClasses":case "fixedWidth":B=a.prevValue!=a.value;break;case "lineWrapping":B=!0;break;case "borderWidth":case "fixedHeight":z=a.prevValue!=a.value;break;case "padding":z=!0}zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);m=function(){f._textChange=
!0;C&&(f.viewState.wasScrolled=!0);(B||G||z&&!r.styleSheetChange)&&f.invalidateTextLayout(B,B);(z||B)&&f.document&&f.world()&&f.document.lines.forEach(function(F){return F.hasEstimatedExtent=!0});f._displacementChange&&(f._displacementChange=!1);v&&Ec.signal(f,"textChange",a);y&&Ec.signal(f,"viewChange",a);f._textChange=!1};r.animation?Ec.promise.delay(r.animation.duration).then(m):this.ownerChain().every(function(F){return F.visible})&&m()}},{key:"onSubmorphChange",value:function(a,f){var m=this,
q,r,u,v,y,z,B,C,G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress){if(a.meta&&a.meta.styleSheetChange)return F.return();zb._get(Object.getPrototypeOf(l.prototype),"onSubmorphChange",m).call(m,a,f);return a.meta.animation?F.yield(a.meta.animation.asPromise(),2):F.jumpTo(2)}if(m._textChange||m._positioningSubmorph===f)return F.return();q=a;r=q.prop;u="position"==r||"extent"==r||"scale"==r||"rotation"==r;m.displacingMorphMap.get(f)&&u&&[].concat($jscomp.arrayFromIterable(m.displacingMorphMap.keys())).filter(function(N){return N.top>=
f.top}).forEach(function(N){m._intersectionShapeCache&&m._intersectionShapeCache.delete(N);m.updateTextDisplacementFor(N)});v=m.embeddedMorphMap.get(f)||{};if((y=v.anchor)&&u){if("position"==r)return m._positioningSubmorph=f,f.position=a.prevValue,m._positioningSubmorph=null,F.return();z=f.bounds();B=f._lastBounds;C=y.position.row;G=m.document.getLine(C);B&&B.height==z.height&&B.bottom()==z.bottom()||(G.hasEstimatedExtent=!0,f._lastBounds=z)}F.jumpToEnd()})}},{key:"removeMorph",value:function(a,f){f=
void 0===f?!0:f;var m=this.embeddedMorphMap,q=this.displacingMorphMap;q&&q.has(a)&&this.toggleTextWrappingAround(a,!1);if(m&&m.has(a)){if(q=m.get(a).anchor){var r=q.position;q=r.row;r=r.column;this.replace({start:{row:q,column:r},end:{row:q,column:r+1}},[],!0,f);this.replace}m.delete(a)}return zb._get(Object.getPrototypeOf(l.prototype),"removeMorph",this).call(this,a)}},{key:"toggleTextWrappingAround",value:function(a,f){var m=this;if(f)this.displacingMorphMap.has(a)||(this.embeddedMorphMap.has(a)&&
this.addMorph(a.remove()),this.displacingMorphMap.set(a,[]),this.updateTextDisplacementFor(a));else if(f=this.displacingMorphMap.get(a))this._displacing=!0,f.forEach(function(q){return m.removeMorph(q)}),this._displacing=!1,this.displacingMorphMap.delete(a)}},{key:"updateTextDisplacementFor",value:function(a){var f=this;if(!this._displacing){this._displacing=!0;var m=this.displacingMorphMap.get(a),q=this.computeDisplacementRectsFor(a).values(),r=[];m.forEach(function(B){return f.removeMorph(B,!1)});
this.textLayout.resetLineCharBoundsCacheOfRange(this,a._displacementRange);q=$jscomp.makeIterator(q);for(var u=q.next();!u.done;u=q.next()){u=u.value;var v=m.shift()||Ec.morph({visible:!0,reactsToPointer:!1,isDisplacementMorph:!0}),y=this.textLayout.textPositionFromPoint(this,u.leftCenter());v.setBounds(u);this.insertText([v,{}],y);this.viewState._needsFit=!1;if(z==v.top)v.remove();else{var z=v.top;r.push(v)}}m.forEach(function(B){return f.removeMorph(B,!1)});this.displacingMorphMap.set(a,r);this._displacing=
!1}}},{key:"computeDisplacementRectsFor",value:function(a){var f=this.textLayout,m=f.textPositionFromPoint(this,a.topLeft),q=f.textPositionFromPoint(this,a.bottomLeft),r=[];a._displacementRange=Ec.Range.fromPositions(m,q);for(m=m.row;m<q.row+1;m++)r.push.apply(r,$jscomp.arrayFromIterable(f.rangesOfWrappedLine(this,m)));this._intersectionShapeCache||(this._intersectionShapeCache=new Map);(q=this._intersectionShapeCache.get(a))||(q=a.isPath?Ec.Shapes.path(Ec.getSvgVertices(a.vertices)):"Ellipse"==Ec.getClassName(a)?
Ec.Shapes.ellipse(a.center.x,a.center.y,a.width/2,a.height/2):Ec.Shapes.rectangle(a.left,a.top,a.width,a.height));this._intersectionShapeCache.set(a,q);a=this.width;m=new Map;r=$jscomp.makeIterator(r);for(var u=r.next();!u.done;u=r.next()){u=u.value;var v=f.computeMaxBoundsForLineSelection(this,u),y=v.height;v=v.y;var z=Ec.Shapes.rectangle(a,y,0,v);z=Ec.Intersection.intersect(z,q);1>z.points.length||(z=Ec.Rectangle.unionPts(z.points.map(Ec.Point.fromLiteral)),z.y=v,z.height=y,z.x-=15,z.width+=30,
m.set(u,z))}return m}},{key:"rejectsInput",value:function(){return this.readOnly}},{key:"addAnchor",value:function(a){if(a){"string"===typeof a&&(a={id:a,row:0,column:0});if(!a.isAnchor){var f=a,m=f.column,q=f.row;a=new Ec.Anchor(f.id,"number"===typeof q&&"number"===typeof m?{row:q,column:m}:void 0,f.insertBehavior||"move")}if(f=a.id&&this.anchors.find(function(r){return r.id===a.id}))return Object.assign(f,a);this.anchors.push(a);return a}}},{key:"removeAnchor",value:function(a){for(var f=this.anchors,
m,q=f.length;q--;){var r=f[q];if(r.id==a||r===a)m=r,f.splice(q,1)}return m}},{key:"addMarker",value:function(a){this.removeMarker(a.id);this.markers.push(a);this.makeDirty();return a}},{key:"removeMarker",value:function(a){var f="string"===typeof a?a:a.id;this.markers=this.markers.filter(function(m){return m.id!==f});this.makeDirty()}},{key:"saveMark",value:function(a,f){a=void 0===a?this.cursorPosition:a;var m=this.activeMark;m&&m!==a&&!m.equalsPosition(a)&&(this.savedMarks=this.savedMarks.concat(m));
f?this.activeMark=a:this.savedMarks=this.savedMarks.concat(a)}},{key:"saveActiveMarkAndDeactivate",value:function(){var a=this.activeMark;a&&(this.saveMark(a),this.activeMark=null)}},{key:"popSavedMark",value:function(){var a=this.activeMark;if(a)return this.activeMark=null,a;a=Ec.arr.last(this.savedMarks);this.savedMarks=this.savedMarks.slice(0,-1);return a}},{key:"lastSavedMark",get:function(){return this.activeMark||Ec.arr.last(this.savedMarks)}},{key:"savedMarkForSelection",value:function(a){var f=
this.selection,m=this.savedMarks,q=this.multiSelect?this.multiSelect.getAllRanges().length:1;q=m.length-(q-(f.index||0));f=m[q]||f.anchor;a&&"row"in a&&"column"in a&&(this.savedMarks=m.slice(0,q).concat(a).concat(m.slice(q+1)));return f}},{key:"addPlugin",value:function(a){this.plugins.includes(a)||(this.plugins.push(a),this._cachedKeyhandlers=null,"function"===typeof a.attach&&a.attach(this));return a}},{key:"removePlugin",value:function(a){if(!this.plugins.includes(a))return!1;this._cachedKeyhandlers=
null;Ec.arr.remove(this.plugins,a);"function"===typeof a.detach&&a.detach(this);return!0}},{key:"pluginCollect",value:function(a,f){f=void 0===f?[]:f;this.plugins.forEach(function(m){return"function"===typeof m[a]&&(f=m[a](f))});return f}},{key:"pluginInvokeFirst",value:function(a,f){for(var m=[],q=1;q<arguments.length;++q)m[q-1]=arguments[q];return(q=this.pluginFind(function(r){return"function"===typeof r[a]}))?q[a].apply(q,$jscomp.arrayFromIterable(m)):void 0}},{key:"pluginFind",value:function(a){return this.plugins.slice().reverse().find(a)}},
{key:"editorPlugin",get:function(){return this.pluginFind(function(a){return a.isEditorPlugin})}},{key:"lookupEditorPluginNamed",value:function(a){var f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return a=Ec.config.ide.modes.aliases[a]||a,m=(f=/^[^:\\]+:\/\//.test(a))?a:"lively.ide/"+a+"/editor-plugin.js",u.yield(lively.modules.doesModuleExist(m),2);if(3!=u.nextAddress)return u.yieldResult?u.yield(lively.modules.module(m).load(),3):u.return(null);q=u.yieldResult;
r=q.default;return u.return(r)})}},{key:"changeEditorMode",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return m=f.plugins.filter(function(u){return!u.isEditorPlugin}),a?"string"!==typeof a?r.jumpTo(2):r.yield(f.lookupEditorPluginNamed(a),3):(f.plugins=m,r.return(null));if(2!=r.nextAddress){q=r.yieldResult;if(!q)throw Error("Cannot find editor mode "+a);a=new q(Ec.config.codeEditor.defaultTheme);f.evalEnvironment&&(a.evalEnvironment=
f.evalEnvironment)}f.plugins=m.concat(a);return r.return(a)})}},{key:"invalidateTextLayout",value:function(a,f){f=void 0===f?!1:f;if(!this._isDeserializing){var m=this.viewState;m&&(this.fixedWidth&&this.fixedHeight||(m._needsFit=!0),m=this.textLayout)&&((void 0===a?0:a)&&m.resetLineCharBoundsCache(this),m.estimateLineHeights(this,f))}}},{key:"textBounds",value:function(){return this.textLayout.textBounds(this)}},{key:"defaultCharExtent",value:function(){return this.textLayout.defaultCharExtent(this)}},
{key:"scrollExtent",get:function(){return this.textBounds().extent().addPt(this.padding.topLeft()).addPt(this.padding.bottomRight()).addPt(this.scrollbarOffset).maxPt(zb._get(Object.getPrototypeOf(l.prototype),"scrollExtent",this))}},{key:"commands",get:function(){return this.pluginCollect("getCommands",(this._commands||[]).concat(Ec.commands))}},{key:"execCommand",value:function(a,f,m,q){function r(L){(v.hasOwnProperty("scrollCursorIntoView")?v.scrollCursorIntoView:1)&&Ec.fun.debounceNamed("execCommand-scrollCursorIntoView-"+
L.id,100,function(){return L.scrollCursorIntoView()})()}var u=this,v=(this.lookupCommand(a)||{}).command;if(v){var y=this.inMultiSelectMode(),z=v.hasOwnProperty("multiSelectAction")?v.multiSelectAction:"forEach";if(y&&"forEach"===z){var B=this.selection;y=this.selection.selections.slice().reverse();this.selection=y[0];this._multiSelection=B;try{var C=this.execCommand(a,f,m,q)}catch(L){throw this.selection=B,this._multiSelection=null,this.selection.mergeSelections(),L;}if(!C)return C;var G=[C];if("function"===
typeof C.then&&"function"===typeof C.catch)return Ec.promise.finally(Ec.promise.chain([function(){return C}].concat(y.slice(1).map(function(L){return function(){u.selection=L;return Promise.resolve(u.execCommand(a,f,m,q)).then(function(S){return G.push(S)})}}))).then(function(){return G}),function(){u.selection=B;u._multiSelection=null;u.selection.mergeSelections()});try{for(var F=$jscomp.makeIterator(y.slice(1)),N=F.next();!N.done;N=F.next())this.selection=N.value,G.push(this.execCommand(a,f,m,q))}finally{this.selection=
B,this._multiSelection=null,this.selection.mergeSelections()}return G}(C=this.commandHandler.exec(a,this,f,m,q))&&("function"===typeof C.then&&"function"===typeof C.catch?C.then(function(){return r(u)}):r(this));return C}}},{key:"changeDocument",value:function(a,f){f=void 0===f?!1:f;if(this.document)var m=this.defaultTextStyle;else f=!1;this.document=a;this.textLayout.reset();f&&(this.defaultTextStyle=m);this.makeDirty();this.consistencyCheck()}},{key:"textInRange",value:function(a){return this.document.textInRange(a)}},
{key:"charRight",value:function(a){a=void 0===a?this.cursorPosition:a;var f=a.column;return this.getLine(a.row).slice(f,f+1)}},{key:"charLeft",value:function(a){a=void 0===a?this.cursorPosition:a;var f=a.column;return this.getLine(a.row).slice(f-1,f)}},{key:"indexToPosition",value:function(a){return this.document.indexToPosition(a)}},{key:"positionToIndex",value:function(a){return this.document.positionToIndex(a)}},{key:"getVisibleLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.wrappedLines(this)[a].text}},
{key:"isLineVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineVisible(this,a)}},{key:"isLineFullyVisible",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.textLayout.isLineFullyVisible(this,a)}},{key:"getLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.getLineString(a)}},{key:"lineCount",value:function(){return this.document.rowCount}},{key:"isLineEmpty",value:function(a){return!this.getLine(a).trim()}},
{key:"isAtLineEnd",value:function(a){a=void 0===a?this.cursorPosition:a;var f=this.getLine(a.row);return a.column===f.length}},{key:"wordsOfLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;return this.document.wordsOfLine(a)}},{key:"wordAt",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordAt(a)}},{key:"wordLeft",value:function(a){a=void 0===a?this.cursorPosition:a;return this.document.wordLeft(a)}},{key:"wordRight",value:function(a){a=void 0===a?this.cursorPosition:
a;return this.document.wordRight(a)}},{key:"lineRange",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?!0:f;"number"!==typeof a&&this.cursorPosition.row;var m=this.getLine(a);a={start:{column:0,row:a},end:{column:m.length,row:a}};m=m.match(/^\s*/);m[0].length&&f&&(a.start.column+=m[0].length);return new Ec.Range(a)}},{key:"screenLineRange",value:function(a,f){a=void 0===a?this.cursorPosition:a;return this.textLayout.screenLineRange(this,a,void 0===f?!0:f)}},{key:"insertTextAndSelect",
value:function(a,f){f=void 0===f?null:f;a=String(a);f?this.selection.range=this.insertText(a,f):this.selection.text=a}},{key:"append",value:function(a){var f=this;return this.saveExcursion(function(){return f.insertText(a,f.documentEndPosition)})}},{key:"insertText",value:function(a,f,m,q){f=void 0===f?this.cursorPosition:f;return this.replace({start:f,end:f},a,void 0===m?!0:m,void 0===q?!0:q)}},{key:"deleteText",value:function(a,f){f=void 0===f?!0:f;var m=this.textAndAttributesInRange(a);this.replace(a,
[],!1,f);return m}},{key:"replace",value:function(a,f,m,q,r,u){var v=this;m=void 0===m?!0:m;q=void 0===q?!0:q;r=void 0===r?!0:r;u=void 0===u?!0:u;a=a.isRange?a:new Ec.Range(a);var y="string"===typeof f?[f,null]:Array.isArray(f)?f:[String(f||""),null];f=!y.length||2==y.length&&!y[0];var z=a.isEmpty();if(f&&z)return a;var B;m&&(B=this.textAttributeAt({row:a.start.row,column:a.start.column-(0<a.start.column?1:0)}));var C=[];for(m=0;m<y.length;m+=2)f=y[m],z=y[m+1],f.isMorph&&C.push(f),B&&(y[m+1]=Object.assign({},
B,{},z));r&&this.undoManager.undoStart(this,"replace");var G=this.textAndAttributesInRange(a),F=this.document.replace(a,y,this.debug&&this.debugHelper(this.debug)).inserted;this.addMethodCallChangeDoing({target:this,selector:"replace",args:[a,y],undo:{target:this,selector:"replace",args:[F,G,!1]}},function(){q&&(v.invalidateTextLayout(!1,!1),v.textLayout.resetLineCharBoundsCacheOfRange(v,F));if(!Ec.eqPosition(a.end,F.end)){if(Ec.lessPosition(F.end,a.end)){var N=$jscomp.makeIterator((new Ec.Range(a)).subtract(F)).next().value;
v.anchors.forEach(function(S){return S.onDelete(N)})}else{var L=$jscomp.makeIterator((new Ec.Range(F)).subtract(a)).next().value;v.anchors.forEach(function(S){return S.onInsert(L)})}v._multiSelection?v._multiSelection.updateFromAnchors():v.selection.updateFromAnchors()}v._updateEmbeddedMorphsDuringReplace(C,F,y,G);v._isDeserializing&&v._initializedByCachedBounds||v.textLayout.estimateLineHeights(v,!1);u&&v.consistencyCheck()});r&&this.undoManager.undoStop();return F}},{key:"_updateEmbeddedMorphsDuringReplace",
value:function(a,f,m,q){for(var r=this.embeddedMorphMap,u=0;u<q.length;u+=2){var v=q[u];if(v.isMorph&&!a.includes(v)){if(r){var y=r.get(v);y&&y.anchor&&(this.removeAnchor(y.anchor),Ec.disconnect(y.anchor,"position",v,"position"));r.set(v,Object.assign({},y,{anchor:null}))}v.remove()}}if(a.length)for(m=Ec.textAndAttributesWithSubRanges(f.start,m),f=m.ranges,m=m.textAndAttributes,q=0;q<f.length;q++)u=m[2*q],u.isMorph&&(console.assert(a.includes(u),"????"),v=f[q].start,u.owner!==this&&this.addMorph(u),
r&&(r.has(u)?r.get(u).anchor.position=v:(v=this.addAnchor(Object.assign({id:"embedded-"+u.id},v)),Ec.connect(v,"position",u,"position",{updater:function(z,B){var C=this.targetObj.owner,G=this.targetObj;B=C&&C.isText?C.charBoundsFromTextPosition(B).topLeft().subPt(C.origin):G.position;C&&(C._positioningSubmorph=G);z(B);C&&(C._positioningSubmorph=!1)}}).update(v.position),r.set(u,{anchor:v}))))}},{key:"applyJsDiffPatch",value:function(a){function f(z,B,C,G){var F=q.indexToPosition(z+C),N=q.indexToPosition(B+
C);G.push(q.deleteText({start:F,end:N}));return C-(B-z)}function m(z,B,C,G){G.push(q.insertText(B,q.indexToPosition(z+C)));return C}var q=this,r=[],u=0,v=0;a=$jscomp.makeIterator(a);for(var y=a.next();!y.done;y=a.next())y=y.value,y.removed?v=f(u,u+y.count,v,r):y.added&&(v=m(u,y.value,v,r)),u+=y.count;return r}},{key:"applyTextChanges",value:function(a,f,m,q){f=void 0===f?0:f;m=void 0===m?!0:m;var r=[];a=$jscomp.makeIterator(a);for(var u=a.next();!u.done;u=a.next()){var v=$jscomp.makeIterator(u.value);
u=v.next().value;var y=v.next().value;v=v.next().value;f&&(y="number"===typeof y?y:this.positionToIndex(y),v&&"string"!==typeof v&&!Array.isArray(v)&&(v=("number"===typeof v?v:this.positionToIndex(v))+f),y+=f);y="number"===typeof y?this.indexToPosition(y):y;switch(u){case "delete":case "remove":u="number"===typeof v?this.indexToPosition(v):v;r.push(this.deleteText({start:y,end:u},q));break;case "insert":r.push(this.insertText(v,y,m,q));break;default:console.warn("[applyTextChanges] unknown type: "+
u)}}return r}},{key:"modifyLines",value:function(a,f,m){var q=this;m=Ec.arr.range(a,f).map(function(r){return q.getLine(r)}).map(m).join("\n")+"\n";this.deleteText({start:{row:a,column:0},end:{row:f+1,column:0}},!1);this.insertText(m,{row:a,column:0})}},{key:"modifySelectedLines",value:function(a){var f=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range;return this.modifyLines(f.start.row,f.end.row,a)}},{key:"withLinesDo",value:function(a,f,m){var q=this;return Ec.arr.range(a,
f).map(function(r){var u=q.getLine(r);r=Ec.Range.create(r,0,r,u.length);return m(u,r)})}},{key:"withSelectedLinesDo",value:function(a){var f=this.selection.isEmpty()?this.lineRange(void 0,!1):this.selection.range,m=f.start.row;f=f.end;var q=f.row;return this.withLinesDo(m,0===f.column&&q>m?q-1:q,a)}},{key:"joinLine",value:function(a){a=void 0===a?this.cursorPosition.row:a;var f=this.getLine(a),m=this.getLine(a+1);m=f+m.replace(/^\s+/,"")+this.document.constructor.newline;this.replace({start:{column:0,
row:a},end:{column:0,row:a+2}},m,!0);return{row:a,column:f.length}}},{key:"whatsVisible",get:function(){return this.textLayout.whatsVisible(this)}},{key:"flash",value:function(a,f){var m=this;a=void 0===a?this.selection.range:a;f=Object.assign({time:1E3,fill:Ec.Color.orange},f);var q=f.id||"flash"+Ec.string.newUUID();this.addMarker({id:q,range:a,style:{"background-color":f.fill.toCSSString(),"pointer-events":"none"}});Ec.fun.debounceNamed("flash-"+q,f.time,function(){return m.removeMarker(q)})()}},
{key:"addTextAttribute",value:function(a,f){var m=this;f=void 0===f?this.selection:f;var q={start:f.start,end:f.end};this.undoManager.undoStart(this,"addTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"addTextAttribute",args:[a,q],undo:{target:this,selector:"removeTextAttribute",args:[a,q]}},function(){m.document.mixinTextAttribute(a,q);m.onAttributesChanged(q);m.consistencyCheck()});this.undoManager.undoStop();return a}},{key:"removeTextAttribute",value:function(a,f){var m=this;
f=void 0===f?this.selection:f;var q={start:f.start,end:f.end};this.undoManager.undoStart(this,"removeTextAttribute");this.addMethodCallChangeDoing({target:this,selector:"removeTextAttribute",args:[a,q],undo:{target:this,selector:"addTextAttribute",args:[a,q]}},function(){m.document.mixoutTextAttribute(a,q);m.onAttributesChanged(q);m.consistencyCheck()});this.undoManager.undoStop()}},{key:"setTextAttributesWithSortedRanges",value:function(a){this.document.setTextAttributesWithSortedRanges(a);this.consistencyCheck();
for(var f=0;f<a.length;)this.onAttributesChanged(a[f]),f+=2}},{key:"textAttributeAt",value:function(a){return this.document.textAttributeAt(a)}},{key:"textAttributeAtPoint",value:function(a){return this.textAttributeAt(this.textLayout.textPositionFromPoint(this,a))}},{key:"textAndAttributesInRange",value:function(a){a=void 0===a?this.selection.range:a;return this.document.textAndAttributesInRange(a)}},{key:"resetTextAttributes",value:function(){this.document.resetTextAttributes();this.onAttributesChanged(this.documentRange);
this.consistencyCheck()}},{key:"onAttributesChanged",value:function(a){this.invalidateTextLayout(!1,!1);var f=this.textLayout;f&&f.resetLineCharBoundsCacheOfRange(this,a);this.makeDirty()}},{key:"styleAt",value:function(a){return(a=this.textLayout.chunkAtPos(this,a))?a.style:Object.assign({},this.defaultTextStyle)}},{key:"getStyleInRange",value:function(a){a=void 0===a?this.selection:a;return this.textAndAttributesInRange(a).filter(function(f,m){return 0!=m%2}).reduce(function(f,m){for(var q in m){var r=
m[q];if(!f.hasOwnProperty(q)||void 0!==r&&null!==r)f[q]=r}return f},{})}},{key:"setStyleInRange",value:function(a,f){var m=this;f=void 0===f?this.selection:f;for(var q=this.textAndAttributesInRange(f),r={start:Object.assign({},f.start),end:Object.assign({},f.start)},u=[],v=0;v<q.length;v+=2){var y=q[v],z=q[v+1],B=-1;"string"!==typeof y&&(y=Ec.objectReplacementChar);for(;-1<(B=y.indexOf("\n"));)0<B&&(r.end.column+=B,u.push(r,z)),r={row:r.end.row+1,column:0},r={start:r,end:Object.assign({},r)},y=y.slice(B+
1);r.end.column+=y.length;u.push(r,z);r={start:Object.assign({},r.end),end:Object.assign({},r.end)}}this.undoManager.undoStart(this,"setStyleInRange");this.addMethodCallChangeDoing({target:this,selector:"setStyleInRange",args:[a,f],undo:{target:this,selector:"setTextAttributesWithSortedRanges",args:[u]}},function(){m.document.setTextAttribute(a,f);m.consistencyCheck();m.onAttributesChanged(f)});this.undoManager.undoStop()}},{key:"resetStyleInRange",value:function(a){a=void 0===a?this.selection:a;
for(var f=this.document.textAndAttributesInRange(a),m={},q=0;q<f.length;q+=2)Object.assign(m,f[q+1]);this.removeTextAttribute(m,a)}},{key:"changeStyleProperty",value:function(a,f,m){var q=this;m=void 0===m?this.selection:m;m=this.getStyleInRange(m)[a];var r=f(m);this.selections.forEach(function(u){var v={};return q.addTextAttribute((v[a]=r,v),u)})}},{key:"inMultiSelectMode",value:function(){return this.selection.selections&&1<this.selection.selections.length}},{key:"selectionBounds",value:function(){var a=
this;return this.selections.map(function(f){var m=a.charBoundsFromTextPosition(f.start),q=a.charBoundsFromTextPosition(f.end);return f.start.row===f.end.row?m.union(q):Ec.rect(Ec.pt(a.padding.left(),m.top()),Ec.pt(a.width-a.padding.left(),q.bottom()))}).reduce(function(f,m){return m.union(f)})}},{key:"documentEndPosition",get:function(){return this.document?this.document.endPosition:{row:0,column:0}}},{key:"isAtDocumentEnd",value:function(){return Ec.eqPosition(this.cursorPosition,this.documentEndPosition)}},
{key:"documentRange",get:function(){return{start:{row:0,column:0},end:this.documentEndPosition}}},{key:"cursorUp",value:function(a){return this.selection.goUp(void 0===a?1:a)}},{key:"cursorDown",value:function(a){return this.selection.goDown(void 0===a?1:a)}},{key:"cursorLeft",value:function(a){return this.selection.goLeft(void 0===a?1:a)}},{key:"cursorRight",value:function(a){return this.selection.goRight(void 0===a?1:a)}},{key:"getPositionAboveOrBelow",value:function(a,f,m,q,r){function u(B,C){B=
B.slice();B.push({x:Ec.arr.last(B).x+Ec.arr.last(B).width});for(var G=0,F=Infinity,N=0;N<B.length;N++){var L=Math.abs(B[N].x-C);L<F&&(F=L,G=N)}return G}a=void 0===a?1:a;f=void 0===f?this.cursorPosition:f;m=void 0===m?!1:m;if(0===a)return f;"number"===typeof r&&(r-=this.padding.left());var v=f.row,y=f.column;if(m&&this.lineWrapping){v=this.textLayout.rangesOfWrappedLine(this,f.row);if(!v.length)return f;y=v.length-1-v.slice().reverse().findIndex(function(B){return B.start.column<=f.column});if(1<=
a){var z=0===y?0>=f.row?null:Ec.arr.last(this.textLayout.rangesOfWrappedLine(this,f.row-1)):v[y-1];if(!z)return f}else if(-1>=a&&(z=(v.length-1===y?f.row>=this.lineCount()-1?[]:this.textLayout.rangesOfWrappedLine(this,f.row+1):v.slice(y+1))[0],!z))return f;v=z.start.row;y=this.textLayout.charBoundsOfRow(this,v).slice(z.start.column,z.end.column+1);y=z.start.column+u(y,r)}else v=Math.min(Math.max(0,f.row-a),this.lineCount()-1),"number"===typeof r&&(z=this.textLayout.charBoundsOfRow(this,v),y=u(z,r));
z={row:v,column:y};return 1<Math.abs(a)?this.getPositionAboveOrBelow(a+(1<a?-1:1),z,m,q,r):z}},{key:"collapseSelection",value:function(){this.selection.collapse(this.selection.lead);return this.selection}},{key:"selectAll",value:function(){this.selection.selectAll();return this.selection}},{key:"selectLine",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;this.selection.selectLine(a,void 0===f?!1:f);return this.selection}},{key:"selectionOrLineString",value:function(){var a=this.selection,
f=a.start;return a.text||this.getLine(f.row)}},{key:"scrollCursorIntoView",value:function(){this.scrollPositionIntoView(this.cursorPosition)}},{key:"centerRange",value:function(a,f,m){a=void 0===a?this.selection.range:a;f=void 0===f?Ec.pt(0,0):f;m=void 0===m?!0:m;var q=this.charBoundsFromTextPosition(a.start).top();a=this.charBoundsFromTextPosition(a.end).bottom()-q;this.scroll=a<this.height||!1===m?this.scroll.withY(q+a/2-this.height/2).addPt(f):this.scroll.withY(q).addPt(f)}},{key:"centerRow",value:function(a,
f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?Ec.pt(0,0):f;return this.alignRowAtTop(a,f.addXY(0,-this.height/2))}},{key:"alignRowAtTop",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?Ec.pt(0,0):f;this.scroll=this.charBoundsFromTextPosition({row:a,column:0}).topLeft().addXY(-this.padding.left(),0).addPt(f)}},{key:"alignRowAtBottom",value:function(a,f){a=void 0===a?this.cursorPosition.row:a;f=void 0===f?Ec.pt(0,0):f;var m=this.charBoundsFromTextPosition({row:a,column:0}).height;
this.alignRowAtTop(a,f.addXY(0,-this.textPageHeight()+m))}},{key:"scrollPositionIntoView",value:function(a,f){f=void 0===f?Ec.pt(0,0):f;if(this.isClip()){var m=this.scroll;m=this.innerBounds().translatedBy(m).insetByRect(this.padding).insetBy(this.borderWidth);a=this.charBoundsFromTextPosition(a);this.lineWrapping||(a=a.insetByPt(Ec.pt(-20,0)));var q=20<m.bottom()-a.bottom()?"bottomLeft":"topLeft";m=a[q]().subPt(m.translateForInclusion(a)[q]()).addPt(f);if(0!=m.x||0!=m.y)this.scroll=this.scroll.addPt(m).addPt(f),
this.isFocused()&&this.ensureKeyInputHelperAtCursor()}}},{key:"keepPosAtSameScrollOffsetWhile",value:function(a,f){var m=this;f=void 0===f?this.cursorPosition:f;var q=this.scroll;f=this.selection.lead;var r=this.charBoundsFromTextPosition(f).y-q.y;q=!1;var u=function(){return m.scroll=m.scroll.withY(m.charBoundsFromTextPosition(f).y-r)};try{var v=a();q=v&&v instanceof Promise}finally{!q&&u()}q&&Ec.promise.finally(v,u);return v}},{key:"saveExcursion",value:function(a,f){var m=this;f=Object.assign({useAnchors:!1},
f);var q=this.selection.isMultiSelection?this.selection.selections.map(function(y){return y.directedRange}):[this.selection],r=f.useAnchors?q.map(function(y){var z=y.end;return[m.addAnchor(Object.assign({},y.start,{id:"save-excursion-"+Ec.string.newUUID()})),m.addAnchor(Object.assign({},z,{id:"save-excursion-"+Ec.string.newUUID()}))]}):null,u=!1;f=f.useAnchors?function(){var y=r.map(function(z){var B=$jscomp.makeIterator(z);z=B.next().value.position;B=B.next().value.position;return{start:z,end:B}});
m.selections=y;r.forEach(function(z){var B=$jscomp.makeIterator(z);z=B.next().value;B=B.next().value;m.removeAnchor(z);m.removeAnchor(B)})}:function(){return m.selections=q};try{var v=this.keepPosAtSameScrollOffsetWhile(a);u=v&&v instanceof Promise}finally{!u&&f()}u&&Ec.promise.finally(v,f);return v}},{key:"alignRow",value:function(a,f){f=void 0===f?"center":f;if(this.isClip()){var m=this.scroll,q=this.padding;m=this.innerBounds().insetByRect(q).translatedBy(m);a=this.charBoundsFromTextPosition({row:a,
column:0});if(f="top"===f||"bottom"===f?m[f]()-a[f]():"center"===f?m[f]().y-a[f]().y:0)this.scroll=this.scroll.addXY(0,-f)}}},{key:"fit",value:function(){var a=this,f=this.viewState,m=this.fixedWidth,q=this.fixedHeight;f._needsFit=!1;if(q&&m||!this.textLayout||this.master&&!this.master._appliedMaster)return this;var r=this.textBounds().outsetByRect(this.padding),u=function(){q||a.height==r.height||(a.height=r.height);m||a.width==r.width||(a.width=r.width);a.embeddedMorphs.forEach(function(v){v=a.embeddedMorphMap.get(v).anchor;
v.position=v.position})};f._needsFit=!1;this.document.lines.find(function(v){return v.hasEstimatedExtent})?this.whenRendered().then(u):u();return this}},{key:"fitIfNeeded",value:function(){this.viewState._needsFit&&this.fit()}},{key:"defaultLineHeight",get:function(){var a=this.padding;return a.top()+a.bottom()+this.fontMetric.defaultLineHeight({fontSize:this.fontSize,fontFamily:this.fontFamily})}},{key:"columnInWrappedLine",value:function(a){if(!this.lineWrapping)return a.column;var f=this.screenLineRange(a,
!0).start.column;return a.column-f}},{key:"textPositionFromPoint",value:function(a){return this.textLayout.textPositionFromPoint(this,a)}},{key:"charBoundsFromTextPosition",value:function(a){return this.textLayout.boundsFor(this,a)}},{key:"forceRerender",value:function(){this.textLayout.reset();this.makeDirty()}},{key:"aboutToRender",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"aboutToRender",this).call(this,a)}},{key:"applyLayoutIfNeeded",value:function(){this._requestMasterStyling&&
(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);this.fitIfNeeded();zb._get(Object.getPrototypeOf(l.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){return this.textRenderer.renderMorph(this,a)}},{key:"directRender",value:function(){var a=this.env.renderer,f=this.textRenderer;a&&f&&!a._stopped&&(Ec.renderSubTree(this,a),f.manuallyTriggerTextRenderHook(this,a))}},{key:"onMouseDown",value:function(a){if(!a.rightMouseButtonPressed()){this.activeMark&&
(this.activeMark=null);var f=a.state;if(f.clickedOnMorph===this){f=(f.clickCount-1)%3+1;var m=this.localize(a.position),q=this.textPositionFromPoint(m);a.leftMouseButtonPressed()&&!a.isShiftDown()&&!a.isAltDown()&&this.callTextAttributeDoitFromMouseEvent(a,m);this.selectable&&(a.isShiftDown()?this.selection.lead=q:a.isAltDown()?this.selection.addRange(Ec.Range.at(q)):(this.selection.disableMultiSelect(),1===f?a.isShiftDown()?this.selection.lead=q:this.selection={start:q,end:q}:2===f?this.execCommand("select word",
null,1,a):3===f&&this.execCommand("select line",null,1,a)),this.isFocused()&&this.ensureKeyInputHelperAtCursor())}}}},{key:"evalEnvForDoit",value:function(a){var f="lively://text-doit/"+this.id;lively.modules.module(f);return{context:a.context||this,format:"esm",targetModule:f}}},{key:"callTextAttributeDoitFromMouseEvent",value:function(a,f){var m=this;f=(f=this.textAttributeAtPoint(f)||[],f.doit);if(!f||!f.code)return!1;var q=this.evalEnvForDoit(f),r=lively.modules.module(q.targetModule);r.recorder.evt=
a;lively.vm.runEval(f.code,q).catch(function(u){return m.world().logError(Error("Error in text doit: "+u.stack))}).then(function(){return r.recorder.evt=null});return!0}},{key:"onMouseMove",value:function(a){a.leftMouseButtonPressed()&&this.selectable&&a.state.clickedOnMorph===this&&(this.selection.lead=this.textPositionFromPoint(this.localize(a.position)))}},{key:"selectMatchingBrackets",value:function(a,f){function m(z){return"\t"===z||" "===z}function q(z,B,C,G,F){for(var N=1;(0>F?0<=G-1:G+1<z.length)&&
(G+=F,z[G]==B&&B!=C&&N++,z[G]==C&&N--,0!=N););return G}function r(z,B,C,G){for(var F=B;0>C?0<=F-1:F+1<z.length;)if(F+=C,z[F]==G)return 0<C?[B,F]:[F+1,B];return 0<C?[B+1,z.length-1]:[0,B]}if(!a)return f;if(0==f||f==a.length)return[0,a.length-1];var u=f-1;if(0<f){if("\n"==a[f-1]||"\r"==a[f-1])return r(a,f,1,a[f-1]);var v="*({[<'\"`".indexOf(a[f-1]);"*"==a[f-1]&&(0>f-2||"/"!=a[f-2])&&(v=-1);if(0<=v)return u=q(a,"*({[<'\"`"[v],"*)}]>'\"`"[v],f-1,1),[f,u-1]}if(f<a.length){if("\n"==a[f]||"\r"==a[f])return r(a,
f,-1,a[f]);v="*)}]>'\"`".indexOf(a[f]);"*"==a[f]&&(f+1>=a.length||"/"!=a[f+1])&&(v=-1);if(0<=v)return f=q(a,"*)}]>'\"`"[v],"*({[<'\"`"[v],f,-1),[f+1,u]}if("/"===a[f-1]&&"/"===a[f-2]){for(;u+1<a.length&&"\n"!==a[u+1]&&"\r"!==a[u+1];)u++;return[f,u]}v=f;for(var y=u;0<=v-1&&m(a[v-1]);)v--;for(;y<a.length&&m(a[y+1]);)y++;if(1<=y-v)return[v,y];for(v=f<a.length?a[f]:"";0<=f-1&&((a[f-1]||"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[f-1]?0:0<="0123456789".indexOf(v)));)v=a[f-1],f--;for(;u+1<a.length&&((a[u+1]||
"").match(/^[a-zA-Z0-9\-]+$/)||("."!=a[u+1]?0:0<="0123456789".indexOf(v)));)v=a[u+1],u++;return[f,u]}},{key:"onContextMenu",value:function(a){var f=this;if(a.targetMorph===this){a.stop();var m=this.textPositionFromPoint(this.localize(a.position)),q=this.selection.selections||[this.selection];if(this.selection.isEmpty()||q.every(function(r){return!r.range.containsPosition(m)}))this.cursorPosition=m;Promise.resolve(this.menuItemsForContextMenu()).then(function(r){return f.openMenu(r,a)}).catch(function(r){return $world.logError(r)})}}},
{key:"onDrop",value:function(a){var f=a.hand.grabbedMorphs.filter(function(q){return q.isLayoutable});zb._get(Object.getPrototypeOf(l.prototype),"onDrop",this).call(this,a);if(f[0]){var m=this.textPositionFromPoint(this.localize(a.hand.globalPosition));this.insertText([f[0],null],m);f[0].opacity=a.state.originalOpacity||1}}},{key:"buildDropHoverGrid",value:function(a){var f=this;if(a.simpleDrop)return null;var m=this.whatsVisible,q=m.startRow;m=Math.min(this.documentEndPosition.row,m.endRow);var r=
this.document,u=this.padding.left(),v=this.padding.top();q=Ec.arr.range(q,m).reduce(function(y,z){var B=f.textLayout.charBoundsOfRow(f,z).slice();1<=B.length&&0==Ec.arr.last(B).width&&(Ec.arr.last(B).width=12);if(1<B.length){var C=Ec.arr.last(B);B.push({x:C.x+C.width,y:C.y,height:C.height,width:C.width||12})}B=B.map(function(G,F){G=Ec.Rectangle.fromLiteral(G).translatedBy(Ec.pt(u,v+r.computeVerticalOffsetOf(z)));var N=f.getGlobalTransform().transformRectToRect(G);return{textPos:{row:z,column:F},bounds:G,
globalBounds:N,morph:a.showDropGrid?Ec.morph({reactsToPointer:!1,acceptsDrops:!1,bounds:G,border:{width:1,color:Ec.Color.green},fill:null}):null}});return y.concat(B)},[]);q.forEach(function(y){return y.morph&&f.addMorph(y.morph)});return q}},{key:"onDropHoverIn",value:function(a){var f={simpleDrop:window.hasOwnProperty("simpleDrop")?window.simpleDrop:!0,showDropGrid:window.hasOwnProperty("showDropGrid")?window.showDropGrid:!1,useTextFlowPlaceholder:window.hasOwnProperty("useTextFlowPlaceholder")?
window.useTextFlowPlaceholder:!1},m=a.hand.grabbedMorphs[0];m&&(a.state.originalOpacity=m.opacity,m.opacity=.3);m=this.buildDropHoverGrid(f);a=a.state.dropHover||(a.state.dropHover=new WeakMap);var q=a.get(this);q||(q={},a.set(this,q));q.config=f;q.dropGrid=m}},{key:"onDropHoverUpdate",value:function(a){var f=a.hand.grabbedMorphs[0];if(f){var m=a.state.dropHover;if(m&&(m=m.get(this)))if(m.dropGrid){var q=m.config;a=a.positionIn(this);for(var r,u,v=Infinity,y=$jscomp.makeIterator(m.dropGrid),z=y.next();!z.done;z=
y.next()){z=z.value;if(z.bounds.containsPoint(a)){r=z;break}var B=z.bounds.closestPointToPt(a).dist(a);B<v&&(v=B,u=z)}r||(r=u);r&&(u=m.placeholder,u||(m.placeholder=u=Ec.morph({fill:f.fill,extent:f.extent,reactsToPointer:!1,acceptsDrops:!1})),Ec.obj.equals(u._textPos||{},r.textPos)||(this!==u.owner&&this.addMorph(u),u.position=r.bounds.topLeft(),q&&q.useTextFlowPlaceholder&&(u.remove(),u._textPos=r.textPos,this.insertText([u,null],r.textPos))))}else f=this.textPositionFromPoint(a.positionIn(this)),
this.focus(),this.cursorPosition=f}}},{key:"onDropHoverOut",value:function(a){var f=a.hand.grabbedMorphs[0];f&&(f.opacity=a.state.originalOpacity||1);if(a=a.state.dropHover)if(f=a.get(this))a.delete(this),f.dropGrid&&(f.dropGrid.forEach(function(m){return m.morph&&m.morph.remove()}),f.dropGrid=null),f.placeholder&&(f.placeholder.remove(),f.placeholder=null)}},{key:"menuItems",value:function(){var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return f=
$jscomp,m=f.makeIterator,v.yield(Promise.all([zb._get(Object.getPrototypeOf(l.prototype),"menuItems",a).call(a),a.menuItemsForContextMenu()]),2);q=m.call(f,v.yieldResult);r=q.next().value;u=q.next().value;return v.return(r.concat({isDivider:!0}).concat(u))})}},{key:"menuItemsForContextMenu",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:f=[{command:"text undo",alias:"undo",target:a,showKeyShortcuts:!0},{command:"text redo",
alias:"redo",target:a,showKeyShortcuts:!0},{command:"manual clipboard copy",alias:"copy",target:a,showKeyShortcuts:a.keysForCommand("clipboard copy"),args:{collapseSelection:!1,delete:!1}},{command:"manual clipboard paste",alias:"paste",target:a,showKeyShortcuts:a.keysForCommand("clipboard paste")},{command:"open text attribute controls",alias:"edit text attributes",target:a},{isDivider:!0},{command:"toggle line wrapping",alias:(a.lineWrapping?"disable":"enable")+" line wrapping",target:a,showKeyShortcuts:!0},
["run command",function(){a.focus();a.world().execCommand("run command")}]],m=$jscomp.makeIterator(a.plugins),q=m.next();case 2:if(q.done){u.jumpTo(4);break}r=q.value;if("function"!==typeof r.getMenuItems){u.jumpTo(3);break}return u.yield(r.getMenuItems(f),6);case 6:f=u.yieldResult;case 3:q=m.next();u.jumpTo(2);break;case 4:return u.return(f)}})}},{key:"keybindings",get:function(){var a=this.world();a=a&&a.getCurrentUser()&&a.getCurrentUser().config&&a.getCurrentUser().config.textKeyBindings||[];
a=zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat(a).concat(Ec.config.text.defaultKeyBindings);return this.pluginCollect("getKeyBindings",a)}},{key:"keybindings",set:function(a){zb._set(Object.getPrototypeOf(l.prototype),"keybindings",a,this)}},{key:"keyhandlers",get:function(){if(this._cachedKeyhandlers)return this._cachedKeyhandlers;var a=zb._get(Object.getPrototypeOf(l.prototype),"keyhandlers",this).concat(this._keyhandlers||[]);return this._cachedKeyhandlers=a=this.pluginCollect("getKeyHandlers",
a)}},{key:"snippets",get:function(){return this.pluginCollect("getSnippets",[])}},{key:"onHoverIn",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,a);this.scrollActive=!0;this.makeDirty()}},{key:"onHoverOut",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",this).call(this,a);Ec.touchInputDevice||(this.scrollActive=!1,this.makeDirty())}},{key:"onKeyDown",value:function(a){this.compositionRange||a.targetMorph!=this||(this.selection.cursorBlinkStart(),
Ec.KeyHandler.invokeKeyHandlers(this,a,!0))}},{key:"onTextInput",value:function(a){Ec.KeyHandler.invokeKeyHandlers(this,a,!1)}},{key:"onCompositionStart",value:function(a){this.insertTextAndSelect(a.data);this.compositionRange=this.selection.range}},{key:"onCompositionUpdate",value:function(a){this.selection.range=this.compositionRange;this.selection.text=[a.data,{textDecoration:"underline"}];this.compositionRange=this.selection.range}},{key:"onCompositionEnd",value:function(a){this.selection.range=
this.compositionRange;this.selection.text=a.data;this.cursorPosition=this.compositionRange.end;this.compositionRange=null}},{key:"onCut",value:function(a){if(!this.rejectsInput()&&this.isFocused()&&!Ec.config.emacs)this.onCopy(a,!this.rejectsInput())}},{key:"onCopy",value:function(a,f){f=void 0===f?!1:f;if(this.isFocused()){a.stop();var m=this.selection;try{for(var q=this.textAndAttributesInRange(this.selection.range),r=this.defaultTextStyle,u={},v=0;v<q.length;v+=2){var y=q[v];if(y.isMorph)if(y.isDisplacementMorph)q[v]=
"";else{var z=u[v]=Ec.serializeMorph(q[v]);q[v]=Ec.deserializeMorph(z,{reinitializeIds:!0})}}var B=Ec.extractHTMLFromTextMorph(this,q);a.domEvt.clipboardData.setData("text/html",B);for(var C in u)q[C]=u[C];var G=JSON.stringify({textAndAttributes:q,defaultTextStyle:r});a.domEvt.clipboardData.setData("application/x-lively-text",G)}catch(F){$world.logError(F)}a.domEvt.clipboardData.setData("text/plain",m.text);this.execCommand("manual clipboard copy",{collapseSelection:Ec.config.codeEditor.collapseSelection||
!1,delete:f,dontTryNativeClipboard:!0})}}},{key:"onPaste",value:function(a){var f=this;if(!this.rejectsInput()){a.stop();var m="";try{m=a.domEvt.clipboardData.getData("text")}catch(v){console.warn(v)}if(!this.editorPlugin)try{var q=a.domEvt.clipboardData.getData("application/x-lively-text");var r=q&&JSON.parse(q);var u=r.textAndAttributes;for(a=0;a<u.length;a+=2)"string"!==typeof u[a]&&(u[a]=Ec.deserializeMorph(u[a],{reinitializeIds:!0}))}catch(v){console.warn(v)}u=this.selection;u=u.isMultiSelection?
u.selections:[u];r&&this.undoManager.group();u.forEach(function(v){r?f.replace(v.range,r.textAndAttributes,!1,!0,!0):v.text=m;f.saveMark(v.start);v.collapseToEnd()});r&&this.undoManager.group()}}},{key:"onFocus",value:function(a){var f=this;zb._get(Object.getPrototypeOf(l.prototype),"onFocus",this).call(this,a);this.makeDirty();this.selection.cursorBlinkStart();if(!this._originalShadow){var m=this.haloShadow||this.propertiesAndPropertySettings().properties.haloShadow.defaultValue;m&&!m.equals&&(m=
new Ec.ShadowObject(m));m&&!m.equals(this.dropShadow)&&(this._originalShadow=this.dropShadow);this.withMetaDo({metaInteraction:!0},function(){f.highlightWhenFocused&&f.animate({dropShadow:m,duration:200})})}}},{key:"onBlur",value:function(a){this.makeDirty();this.selection.cursorBlinkStop();this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null;zb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a)}},{key:"onScroll",
value:function(a){this.isFocused()&&this.ensureKeyInputHelperAtCursor();(a=this.env.renderer.getNodeForMorph(this))&&Ec.signal(this,"viewChanged",{prop:"scroll",value:Ec.pt(a.scrollLeft,a.scrollTop)})}},{key:"ensureKeyInputHelperAtCursor",value:function(){this.env.eventDispatcher.keyInputHelper&&this.env.eventDispatcher.keyInputHelper.ensureBeingAtCursorOfText(this)}},{key:"textPageHeight",value:function(){var a=this.padding,f=this.borderWidthBottom,m=this.borderWidthTop;return this.height-a.top()-
a.bottom()-f-m}},{key:"scrollPageDown",value:function(){this.scrollDown(this.textPageHeight())}},{key:"scrollPageUp",value:function(){this.scrollUp(this.textPageHeight())}},{key:"pageUpOrDown",value:function(a){var f=a=void 0===a?{direction:"up",select:!1}:a;a=f.direction;f=f.select;var m=this.textLayout["down"===a?"lastFullVisibleLine":"firstFullVisibleLine"](this),q=this.cursorPosition.column,r=this.padding;f?this.selection.lead={row:m,column:q}:this.cursorPosition={row:m,column:q};"down"===a?this.alignRowAtTop(m,
Ec.pt(0,-r.top()-r.bottom())):(this.alignRowAtBottom(m,Ec.pt(0,0)),this.alignRowAtBottom(m,Ec.pt(0,r.top()+r.bottom())))}},{key:"gotoDocumentStart",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead={row:0,column:0};a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"gotoDocumentEnd",value:function(a){a=void 0===a?{select:!1}:a;this.selection.lead=this.documentEndPosition;a&&a.select||(this.selection.anchor=this.selection.lead)}},{key:"paragraphRangeAbove",value:function(a){if(this.isLineEmpty(a)){for(var f=
a-1;0<=f;f--)if(!this.isLineEmpty(f)){var m=f;break}if(void 0===m)return{start:{row:a,column:0},end:{row:a,column:0}}}else m=a;return this.paragraphRange(m)}},{key:"paragraphRangeBelow",value:function(a){var f=this.isLineEmpty(a),m=this.documentEndPosition;if(f){for(f=a+1;f<=m.row;f++)if(!this.isLineEmpty(f)){var q=f;break}if(void 0===q)return{start:{row:a,column:0},end:{row:a,column:0}}}else q=a;return this.paragraphRange(q)}},{key:"paragraphRange",value:function(a){if(this.isLineEmpty(a))return{start:{row:a,
column:0},end:{row:a,column:0}};var f=this.documentEndPosition;for(a+=1;a<=f.row;a++)if(this.isLineEmpty(a)){var m={row:a-1,column:this.getLine(a-1).length};break}m||(m=f);for(a=m.row-1;0<=a;a--)if(this.isLineEmpty(a)){var q={row:a+1,column:0};break}q||(q={row:0,column:0});return{start:q,end:m}}},{key:"astNodeRange",value:function(a){return{start:this.document.indexToPosition(a.start),end:this.document.indexToPosition(a.end)}}},{key:"parseIntoLines",value:function(a){return a.split("\n")}},{key:"computeTextRangeForChanges",
value:function(a){function f(v,y){for(var z="",B=0;B<v.length;B+=2)z+="string"===typeof v[B]?v[B]:Ec.objectReplacementChar;v=q.parseIntoLines(z);return 1===v.length?Ec.Range.fromPositions(y,{row:y.row,column:y.column+v[0].length}):1<v.length?Ec.Range.fromPositions(y,{row:y.row+v.length-1,column:Ec.arr.last(v).length}):Ec.Range.at(y)}var m=Ec.Range.at(this.cursorPosition);if(!a.length)return m;var q=this,r=a[0];m="replace"===r.selector?f(r.args[1],r.args[0].start):m;for(r=1;r<a.length;r++){var u=a[r];
m="replace"===u.selector?m.merge(f(u.args[1],u.args[0].start)):m}return m}},{key:"ensureUndoManager",value:function(){if(this.undoManager)return this.undoManager;var a=["addTextAttribute","removeTextAttribute","setStyleInRange","replace"];return this.undoManager=new Ec.UndoManager(function(f){return a.includes(f.selector)})}},{key:"textUndo",value:function(){var a=this.undoManager.undo();a&&(a=a.changes.slice().reverse().map(function(f){return f.undo}),this.selection=this.computeTextRangeForChanges(a))}},
{key:"textRedo",value:function(){var a=this.undoManager.redo();a&&(a=a.changes.slice(),this.selection=this.computeTextRangeForChanges(a))}},{key:"findMatchingForward",value:function(a,f,m){f=void 0===f?"right":f;m=void 0===m?{}:m;var q=this["right"===f?"charRight":"charLeft"](a),r=m[q];if(!r)return null;var u="right"===f?-1:0;return this.document.scanForward(a,function(v,y){if(v===r){if(0===u)return"right"===f?{row:y.row,column:y.column+1}:y;u--}else v===q&&u++;return null})}},{key:"findMatchingBackward",
value:function(a,f,m){f=void 0===f?"right":f;m=void 0===m?{}:m;var q=this["right"===f?"charRight":"charLeft"](a),r=m[q];if(!r)return null;var u="left"===f?-1:0;return this.document.scanBackward(a,function(v,y){if(v===r){if(0===u)return"right"===f?{row:y.row,column:y.column+1}:y;u--}else v===q&&u++;return null})}},{key:"search",value:function(a,f){f=void 0===f?{start:this.cursorPosition,backwards:!1,caseSensitive:!1}:f;return(new Ec.TextSearcher(this)).search(Object.assign({needle:a},f))}},{key:"searchForAll",
value:function(a,f){f=void 0===f?{caseSensitive:!1}:f;return(new Ec.TextSearcher(this)).searchForAll(Object.assign({needle:a},f))}},{key:"tokenAt",value:function(a){return this.pluginInvokeFirst("tokenAt",a)}},{key:"astAt",value:function(a){return this.pluginInvokeFirst("astAt",a)}},{key:"evalEnvironment",get:function(){var a=this.editorPlugin;return a&&a.evalEnvironment}},{key:"evalEnvironment",set:function(a){var f=this.editorPlugin;f&&(f.evalEnvironment=a)}},{key:"doitContext",get:function(){return(this.evalEnvironment||
{}).context}},{key:"doitContext",set:function(a){(this.evalEnvironment||{}).context=a}},{key:"logDoit",value:function(a,f){f=void 0===f?{}:f;f=void 0===f.time?Date.now():f.time;if(!(12E4<a.length)){try{var m=JSON.parse(localStorage["lively.next-js-ide-doitlog"])}catch(q){}m||(m=[]);if(!m.some(function(q){return"string"===typeof q?q===a:q.source===a})){m.push({source:a,time:f});50<m.length&&(m=m.slice(-50));try{localStorage["lively.next-js-ide-doitlog"]=JSON.stringify(m)}catch(q){}}}}},{key:"doEval",
value:function(a,f,m){a=void 0===a?this.selection.isEmpty()?this.lineRange():this.selection.range:a;m=void 0===m?this.textInRange(a):m;a=this.pluginFind(function(q){return q.isEditorPlugin&&"function"===typeof q.runEval});if(!a)throw Error("doit not possible: cannot find js editor plugin of !"+this);f&&f.logDoit&&this.logDoit(m,f);return a.runEval(m,f)}},{key:"maybeSelectCommentOrLine",value:function(){var a=this.selection,f=a.lead,m=f.row;f=f.column;var q=this.selectionOrLineString();if(a.isEmpty()){var r=
q.indexOf("//");-1===r||f<r||0<r&&0<=":\"'".indexOf(q[r-1])?this.selectLine(m):a.range={start:{row:m,column:r+2},end:{row:m,column:q.length}}}}},{key:"debugHelper",value:function(a){a=Object.assign({debugDocumentUpdate:!0,debugTextLayout:!0},a);return this._debugHelper?Object.assign(this._debugHelper,a):this._debugHelper=Object.assign({},a,{logged:[],groups:[],reset:function(){this.groups=[[]];this.logged=this.groups[0]},log:function(f){for(var m=[],q=0;q<arguments.length;++q)m[q-0]=arguments[q];
console.log.apply(console,$jscomp.arrayFromIterable(m));this.logged.push({args:m})},dump:function(f){console.log(f.split("\n").map(function(m){return m.slice(0,100)}).join("\n"));this.logged.push({dump:f})},group:function(f){this.groups.push([]);this.logged=Ec.arr.last(this.groups);console.group(f)},groupEnd:function(f){console.groupEnd(f)},steps:function(f){for(var m=[];f.length;){var q=Ec.arr.takeWhile(f,function(u){return!u.dump});f=f.slice(q.length);var r=(f.shift()||{}).dump;m.push({actions:q,
dump:r})}return m},printToConsole:function(){var f=this;console.clear();this.groups.forEach(function(m){var q=f.steps(m);console.group(q.length);f.steps(m).forEach(function(r,u){r=r.actions;console.group("step "+(u+1));r.forEach(function(v){return console.log.apply(console,$jscomp.arrayFromIterable(v.args))});console.groupEnd("step "+(u+1))});console.groupEnd(q.length)})},report:function(){var f=this,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress)return B.yield(System.import("jsdiff",
System.decanonicalize("lively.morphic")),2);if(3!=B.nextAddress)return m=B.yieldResult,B.yield(System.import("lively.ide/diff/editor-plugin.js"),3);q=B.yieldResult;r=q.default;u=0;v="";y=[];z=0;f.groups.forEach(function(C,G){v+=">>> group "+(G+1)+"\n";z++;u++;var F=f.steps(C);F.forEach(function(N,L){var S=N.actions;N=N.dump;v+=Ec.string.indent(">>> step "+(L+1)," ",u)+"\n";z++;u++;S.forEach(function(ha){ha=Ec.string.indent(Ec.string.formatFromArray(ha.args.slice()).trim()," ",u);z+=ha.split("\n").length;
v+=ha+"\n"});1<=L&&N&&F[L-1].dump&&(S=new r,N=m.createPatch(String(L),F[L-1].dump,N),S.tokenize(N),y.push.apply(y,$jscomp.arrayFromIterable(S.styledRanges(z,u))),v+=N,z+=N.split("\n").length-1);v+=Ec.string.indent("<< step "+(L+1)," ",u)+"\n";z++;u--});v+="<<< group "+(G+1)+"\n";z++;u--});return B.return({report:v,reportStyles:y})})},openReport:function(){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return u.yield(f.report(),2);m=u.yieldResult;
q=m.reportStyles;r=m.report;return u.return($world.execCommand("open text window",{title:"text debug",fontFamily:"monospace",content:r,rangesAndStyles:q}))})}})}},{key:"consistencyCheck",value:function(){if(this.debug)return this.document.consistencyCheck();try{return this.document.consistencyCheck()}catch(q){var a=this.document;this.brokenDocument||(this.brokenDocument=a);var f=this.world()||$world;try{var m=new Ec.Document([]);m.textAndAttributes=a.textAndAttributes;this.changeDocument(m)}catch(r){f?
f.logError("Broken document could not be fixed"):console.error("Broken document could not be fixed")}f?f.logError(q):console.error(q)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Text"}},{key:"makeLabel",value:function(a,f){return new Ec.morph(Object.assign({type:"label",value:a,fontFamily:"IBM Plex, Helvetica Neue, Arial, sans-serif",fontColor:Ec.Color.almostBlack,fontSize:11},f))}},{key:"makeInputLine",value:function(a){return new (System.get(System.decanonicalize("lively.morphic")).InputLine)(a)}},
{key:"defaultTextStyle",get:function(){if(this._defaultTextStyle)return this._defaultTextStyle;for(var a=this.prototype.propertiesAndPropertySettings().properties,f=this.defaultTextStyleProps,m={},q=0;q<f.length;q++){var r=f[q];m[r]=a[r].defaultValue}return this._defaultTextStyle=m}},{key:"defaultTextStyleProps",get:function(){if(this._defaultTextStyleProps)return this._defaultTextStyleProps;var a=this.prototype.propertiesAndPropertySettings().properties,f=[],m;for(m in a)a[m].isDefaultTextStyleProp&&
f.push(m);return this._defaultTextStyleProps=f}},{key:"properties",get:function(){return{clipMode:{isStyleProp:!0,defaultValue:"visible",set:function(a){this.setProperty("clipMode",a);this.fixedWidth=this.fixedHeight=this.isClip()}},fontMetric:{group:"_rendering",serialize:!1,get:function(){return this.getProperty("fontMetric")||this.env.fontMetric}},undoManager:{group:"core",before:["document"],initialize:function(){this.ensureUndoManager()}},textRenderer:{group:"_rendering",after:["viewState"],
initialize:function(){this.textRenderer=new Ec.Renderer(this.env.domEnv)}},debug:{group:"_debugging",isStyleProp:!0,after:["textRenderer","textLayout"],defaultValue:!1,doc:"For visualizing and debugging text layout and rendering"},defaultViewState:{group:"_rendering",derived:!0,readOnly:!0,get:function(){return{_needsFit:!0,text_layer_node:null,fontmetric_text_layer_node:null,dom_nodes:[],dom_nodeFirstRow:[],scrollTop:0,scrollHeight:0,scrollBottom:0,textHeight:0,textWidth:0,firstVisibleRow:0,lastVisibleRow:0,
heightBefore:0,wasScrolled:!1,afterTextRenderHook:null,fastScroll:!0}}},viewState:{group:"_rendering",initialize:function(){this.viewState=this.defaultViewState}},displacingMorphMap:{group:"_rendering",initialize:function(){this.displacingMorphMap=new Map}},embeddedMorphMap:{group:"_rendering",initialize:function(){this.embeddedMorphMap=new Map}},embeddedMorphs:{group:"text",derived:!0,readOnly:!0,after:["embeddedMorphMap"],get:function(){return this.embeddedMorphMap?Array.from(this.embeddedMorphMap.keys()):
[]}},textLayout:{group:"_rendering",after:["textRenderer"],initialize:function(){this.textLayout=new Ec.TextLayout(this)}},document:{group:"text",initialize:function(){this.document=Ec.Document.fromString("",{maxLeafSize:50,minLeafSize:25,maxNodeSize:35,minNodeSize:7});this.consistencyCheck()}},draggable:{defaultValue:!1},useSoftTabs:{group:"text",isStyleProp:!0,defaultValue:void 0!==Ec.config.text.useSoftTabs?Ec.config.text.useSoftTabs:!0},tabWidth:{group:"text",isStyleProp:!0,defaultValue:Ec.config.text.tabWidth||
2},tab:{group:"text",after:["useSoftTabs","tabWidth"],readOnly:!0,derived:!0,get:function(){return this.useSoftTabs?" ".repeat(this.tabWidth):"\t"}},autoInsertPairs:{group:"text",defaultValue:!0},extent:{get:function(){var a=this,f=this.getProperty("extent");!this._textChange&&this.viewState&&this.viewState._needsFit&&!this._rendering&&!this._measuringTextBox&&f&&this.owner&&(this._measuringTextBox=!0,Ec.noUpdate(function(){a.directRender()}),this._measuringTextBox=!1);return this.getProperty("extent")}},
fixedWidth:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},fixedHeight:{group:"text",isStyleProp:!0,after:["clipMode","viewState"],defaultValue:!1},readOnly:{group:"text",isStyleProp:!0,defaultValue:!1,set:function(a){this.nativeCursor=a?"default":"auto";this.setProperty("readOnly",a)}},selectable:{group:"selection",isStyleProp:!0,after:["selection"],defaultValue:!0,set:function(a){this.setProperty("selectable",a);a||this.selection.collapse()}},padding:{group:"styling",
type:"Rectangle",isStyleProp:!0,after:["textLayout","viewState"],defaultValue:Ec.Rectangle.inset(0),set:function(a){this.setProperty("padding","number"===typeof a?Ec.Rectangle.inset(a):a)}},haloShadow:{group:"styling",type:"Shadow",isStyleProp:!0,defaultValue:null},highlightWhenFocused:{group:"styling",defaultValue:!1,after:["haloShadow"],set:function(a){this.setProperty("highlightWhenFocused",a);a&&!this.haloShadow&&(this.haloShadow={blur:6,color:Ec.Color.rgb(52,152,219),distance:0,rotation:45})}},
cursorPosition:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.lead},set:function(a){this.selection.range={start:a,end:a}}},selection:{group:"selection",derived:!0,after:["document","anchors"],get:function(){var a=this.getProperty("selection");if(a)return a;a=new (Ec.config.text.useMultiSelect?Ec.MultiSelection:Ec.Selection)(this);this.setProperty("selection",a);return a},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,
this);a?a.isSelection?this.setProperty("selection",a):this.selection.range=a:(this.selection.isMultiSelection&&this.selection.disableMultiSelect(),this.selection.collapse())}},selections:{group:"selection",derived:!0,after:["selection"],get:function(){return this.selection.isMultiSelection?this.selection.selections:[this.selection]},set:function(a){var f=this;this.selection=a[0];this.selection.isMultiSelection&&a.slice(1).forEach(function(m){return f.selection.addRange(m)})}},textString:{group:"text",
after:["document"],derived:!0,get:function(){return this.document?this.document.textString:""},set:function(a){a=null!=a?String(a):"";this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.deleteText({start:{column:0,row:0},end:this.document.endPosition});this.insertText(a,{column:0,row:0})}},value:{group:"text",after:["document","embeddedMorphMap"],derived:!0,get:function(){var a=this.textAndAttributes;if(1===a.length){var f=$jscomp.makeIterator(a[0]),
m=f.next().value;f=f.next().value;if(!Object.keys(f||{}).length)return m}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textAndAttributes:{group:"text",derived:!0,after:["document"],get:function(){return this.document.textAndAttributes},set:function(a){this._isDeserializing&&this._initializedByCachedBounds&&this.textLayout.restore(this._initializedByCachedBounds,this);this.replace({start:{row:0,column:0},end:this.documentEndPosition},a)}},defaultTextStyleProps:{group:"_internal",
readOnly:!0,derived:!0,get:function(){return this.constructor.defaultTextStyleProps}},defaultTextStyle:{group:"styling",after:["viewState"],derived:!0,get:function(){return Ec.obj.select(this,this.defaultTextStyleProps)},set:function(a){Object.assign(this,a)}},customizedTextStyle:{group:"styling",readOnly:!0,derived:!0,get:function(){for(var a={},f=this.defaultTextStyleProps,m=this.constructor.defaultTextStyle,q=0;q<f.length;q++){var r=f[q],u=this[r];u!==m[r]&&(a[r]=u)}return a}},nativeCursor:{defaultValue:"",
isDefaultTextStyleProp:!0},fontFamily:{group:"text styling",type:"Enum",values:Ec.config.text.basicFontItems,defaultValue:"IBM Plex Sans, Sans-Serif",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"],set:function(a){this.setProperty("fontFamily",Ec.sanitizeFont(a))}},fontSize:{group:"text styling",type:"Number",min:1,unit:"pt",defaultValue:12,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},selectionColor:{group:"text styling",type:"Color",defaultValue:Ec.Color.rgba(212,
230,241,.8),isStyleProp:!0,after:["defaultTextStyle"]},cursorColor:{group:"text styling",type:"Color",isStyleProp:!0,after:["defaultTextStyle"],defaultValue:Ec.Color.black},fontColor:{group:"text styling",type:"Color",defaultValue:Ec.Color.black,isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},fontWeight:{group:"text styling",type:"Enum",values:["bold","bolder","light","lighter","normal"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},
fontStyle:{group:"text styling",type:"Enum",values:["normal","italic","oblique"],defaultValue:"normal",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textDecoration:{group:"text styling",type:"Enum",values:["none","underline"],defaultValue:"none",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textStyleClasses:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},backgroundColor:{group:"text styling",type:"Color",isStyleProp:!0,
isDefaultTextStyleProp:!0,after:["defaultTextStyle"]},textAlign:{group:"text styling",type:"Enum",values:["center","justify","left","right"],isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineHeight:{group:"text styling",type:"Number",min:1,isFloat:!0,isStyleProp:!0,isDefaultTextStyleProp:!0,defaultValue:1.4,after:["document","defaultTextStyle","viewState"]},letterSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document",
"defaultTextStyle","viewState"]},wordSpacing:{group:"text styling",isStyleProp:!0,isDefaultTextStyleProp:!0,after:["document","defaultTextStyle","viewState"]},lineWrapping:{group:"text",type:"Enum",values:[!1,!0,"by-words","anywhere","only-by-words","wider","by-chars"],isStyleProp:!0,defaultValue:!1,after:["document","viewState"]},anchors:{group:"core",defaultValue:[],set:function(a){var f=this,m=Ec.arr.withoutAll(a,this.anchors);Ec.arr.withoutAll(this.anchors,a).forEach(function(q){return f.removeAnchor(q)});
m.forEach(function(q){return f.addAnchor(q)})}},markers:{group:"core",defaultValue:[]},savedMarks:{group:"core",defaultValue:[],after:["anchors"],set:function(a){var f=this;a=a.map(function(q){return q.isAnchor?q:f.addAnchor(Object.assign({},q,{id:"saved-mark-"+Ec.string.newUUID()}))});var m=this.savedMarks.filter(function(q){return!a.includes(q)});a>Ec.config.text.markStackSize&&m.push.apply(m,$jscomp.arrayFromIterable(a.splice(0,a.length-Ec.config.text.markStackSize)));m.map(function(q){return f.removeAnchor(q)});
return this.setProperty("savedMarks",a)}},activeMarkPosition:{group:"_internal",after:["activeMark"],derived:!0,get:function(){var a=this.activeMark;return a?a.position:null}},activeMark:{group:"core",after:["anchors"],set:function(a){if(a)a=this.addAnchor(a.isAnchor?a:Object.assign({},a,{id:"saved-mark-"+Ec.string.newUUID()}));else{var f=this.activeMark;this.savedMarks.includes(f)||this.removeAnchor(f)}this.setProperty("activeMark",a)}},plugins:{group:"plugins",defaultValue:[],after:["value"],set:function(a){var f=
this,m=this.getProperty("plugins");Ec.arr.withoutAll(m,a).forEach(function(q){return q&&f.removePlugin(q)});a.forEach(function(q){return q&&f.addPlugin(q)})}},editorModeName:{group:"plugins",derived:!0,after:["plugins"],get:function(){var a=this.editorPlugin;return a?a.shortName:null},set:function(a){this.changeEditorMode(a)}}}}}],e,{pathInPackage:function(){return"text/morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:1319,end:113566})}(Ec.Morph));Ec.Text=Qs;Ec.Text=Qs;Ec.Text=Qs;var boa=Object.freeze({__proto__:null,Text:Qs}),Ag=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js");Ag.obj=lf;Ag.promise=oe;Ag.arr=Qe;Ag.string=Hg;Ag.properties=Gp;Ag.Rectangle=Pd;Ag.Color=xf;Ag.signal=oj;Ag.connect=Oe;Ag.vdom=ZE;Ag.Morph=Mj;Ag.config=vk;Ag.defaultStyle=nc;Ag.defaultAttributes=It;Ag.Icon=Wn;Ag.Icons=oK;Ag.splitTextAndAttributesIntoLines=
tE;Ag.h=Ag.vdom.h;var Rs=wa("aX",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/label.js"),l=e.hasOwnProperty("Label")&&"function"===typeof e.Label?e.Label:e.Label=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onChange",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);a.prop&&a.prop.includes("borderWidth")&&this.fit()}},{key:Symbol.for("lively-instance-initialize"),
value:function(a){var f=a=void 0===a?{}:a,m=f.fontMetric,q=f.position,r=f.rightCenter,u=f.leftCenter,v=f.topCenter,y=f.bottom,z=f.top,B=f.right,C=f.left,G=f.bottomCenter,F=f.bottomLeft,N=f.bottomRight,L=f.topRight,S=f.topLeft,ha=f.center;f=f.extent;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,Ag.obj.dissoc(a,["fontMetric"]));m&&(this._fontMetric=m);this._cachedTextBounds=null;this.fit();void 0!==f&&(this.extent=f);void 0!==q&&(this.position=q);
void 0!==r&&(this.rightCenter=r);void 0!==u&&(this.leftCenter=u);void 0!==v&&(this.topCenter=v);void 0!==y&&(this.bottom=y);void 0!==z&&(this.top=z);void 0!==B&&(this.right=B);void 0!==C&&(this.left=C);void 0!==G&&(this.bottomCenter=G);void 0!==F&&(this.bottomLeft=F);void 0!==N&&(this.bottomRight=N);void 0!==L&&(this.topRight=L);void 0!==S&&(this.topLeft=S);void 0!==ha&&(this.center=ha)}},{key:"__additionally_serialize__",value:function(a,f,m,q){zb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,q);this.autofit&&this.fitIfNeeded();a._cachedTextBounds=this._cachedTextBounds&&this._cachedTextBounds.toTuple()}},{key:"__after_deserialize__",value:function(a,f,m){zb._get(Object.getPrototypeOf(l.prototype),"__after_deserialize__",this).call(this,a,f,m);a._cachedTextBounds&&(this.changeMetaData("deserializeInfo",{recoveredTextBounds:!0}),this._cachedTextBounds=Ag.Rectangle.fromTuple(a._cachedTextBounds))}},{key:"isLabel",get:function(){return!0}},{key:"textStyle",get:function(){return Ag.obj.select(this,
"textStyleClasses textDecoration fontStyle fontWeight textShadow fontColor fontSize fontFamily".split(" "))}},{key:"fit",value:function(){this.extent=this.textBounds().extent().addXY(this.borderWidthLeft+this.borderWidthRight,this.borderWidthTop+this.borderWidthBottom);this.visible?this._needsFit=!1:this._cachedTextBounds=null;return this}},{key:"fitIfNeeded",value:function(){this._needsFit&&this.allFontsLoaded()&&this.fit()}},{key:"textAndAttributesOfLines",get:function(){return Ag.splitTextAndAttributesIntoLines(this.textAndAttributes,
"\n")}},{key:"allFontsLoaded",value:function(){var a=this,f=this.env.fontMetric;return[this].concat($jscomp.arrayFromIterable(this.textAndAttributes.map(function(m,q){if(q%2)return{fontFamily:m&&m.fontFamily||a.fontFamily,fontWeight:m&&m.fontWeight||a.fontWeight}}).filter(Boolean))).every(function(m){return f.isFontSupported(m.fontFamily,m.fontWeight)})}},{key:"whenFontLoaded",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.return(Ag.promise.waitFor(5E3,
function(){return a.allFontsLoaded()}))})}},{key:"textBoundsSingleChunk",value:function(){var a=this._fontMetric||this.env.fontMetric,f=$jscomp.makeIterator(this.textAndAttributes),m=f.next().value;f=f.next().value;var q=Object.assign({},this.textStyle,{},f);f=this.padding;a.isProportional(q.fontFamily)?(a=a.sizeFor(q,m),m=a.width,a=a.height):(q=a.sizeFor(q,"x"),a=q.height,m=m.length*q.width);return new Ag.Rectangle(0,0,Math.ceil(f.left()+f.right()+m),Math.ceil(f.top()+f.bottom()+a))}},{key:"textBoundsAllChunks",
value:function(){for(var a=this._fontMetric||this.env.fontMetric,f=this.padding,m=this.textStyle,q=this.textAndAttributesOfLines,r=!a.isProportional(m.fontFamily),u=a.sizeFor(m,"x").height,v=0,y=0,z=0;z<q.length;z++){var B=q[z];if(B.length){for(var C=0,G=0,F=0;F<B.length;F+=2){var N=B[F],L=B[F+1]||{},S=Object.assign({},m,{},L);r&&!L.fontFamily||!a.isProportional(S.fontFamily)?(S=a.sizeFor(S,"x"),L=S.height,G+=N.length*S.width,C=Math.max(C,L)):(N=a.sizeFor(S,N),L=N.height,G+=N.width,S.paddingRight&&
(G+=Number.parseInt(S.paddingRight)),S.paddingLeft&&(G+=Number.parseInt(S.paddingLeft)),C=Math.max(C,L))}v+=C;y=Math.max(y,G)}else v+=u}return new Ag.Rectangle(0,0,Math.ceil(f.left()+f.right()+y),Math.ceil(f.top()+f.bottom()+v))}},{key:"invalidateTextLayout",value:function(){this._cachedTextBounds=null;this.autofit&&(this._needsFit=!0);this.makeDirty()}},{key:"textBounds",value:function(){var a=this.textAndAttributes;return this._cachedTextBounds||(this._cachedTextBounds=2>=a.length?this.textBoundsSingleChunk():
this.textBoundsAllChunks())}},{key:"forceRerender",value:function(){this._cachedTextBounds=null;this.makeDirty()}},{key:"applyLayoutIfNeeded",value:function(){this.fitIfNeeded();zb._get(Object.getPrototypeOf(l.prototype),"applyLayoutIfNeeded",this).call(this)}},{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);for(var f=[],m=this.textAndAttributesOfLines.length,q=0;q<m;q++){for(var r=this.textAndAttributesOfLines[q],
u=0;u<r.length;u+=2){var v=r[u+1];f.push(this.renderChunk(r[u],v))}q<m-1&&f.push(Ag.h("br"))}v=this.textStyle;var y=v.fontColor,z=v.fontSize;m=v.fontStyle;q=v.fontWeight;r=v.textShadow;u=v.textDecoration;var B=v.textStyleClasses,C=this.padding;v={fontFamily:v.fontFamily,fontSize:"number"===typeof z?z+"px":z,color:y?String(y):"transparent",position:"absolute",cursor:this.nativeCursor};y=Ag.defaultAttributes(this,a);r&&(v.textShadow=r);"normal"!==q&&(v.fontWeight=q);"normal"!==m&&(v.fontStyle=m);"none"!==
u&&(v.textDecoration=u);B&&B.length&&(y.className=(y.className||"")+" "+B.join(" "));y.style=Object.assign({},Ag.defaultStyle(this),{},v);return Ag.h("div",y,[Ag.h("div",{style:{pointerEvents:"none",position:"absolute",paddingLeft:C.left()+"px",paddingRight:C.right()+"px",paddingTop:C.top()+"px",paddingBottom:C.bottom()+"px",width:"calc(100% - "+C.left()+"px - "+C.right()+"px)"}},f),a.renderSubmorphs(this)])}},{key:"renderChunk",value:function(a,f){var m=f=f||{},q=m.backgroundColor,r=m.fontColor,
u=m.fontFamily,v=m.fontStyle,y=m.fontWeight,z=m.textShadow,B=m.textDecoration,C=m.textStyleClasses,G=m.textAlign,F=m.float,N=m.display,L=m.lineHeight,S=m.opacity;m={};var ha={style:m};F&&(m.float=F);N&&(m.display=N);q&&(m.backgroundColor=String(q));u&&(m.fontFamily=u);r&&(m.color=String(r));z&&(m.textShadow=z);"normal"!==y&&(m.fontWeight=y);"normal"!==v&&(m.fontStyle=v);"none"!==B&&(m.textDecoration=B);G&&(m.textAlign=G);L&&(m.lineHeight=L);S&&(m.opacity=S);C&&C.length&&(ha.className=C.join(" "));
q="fontSize width height maxWidth maxHeight top left padding paddingLeft paddingRight paddingBottom paddingTop marginTop marginRight marginLeft marginBottom".split(" ");for(r=0;r<q.length;r++)u=q[r],f.hasOwnProperty(u)&&(v=f[u],m[u]="number"===typeof v?v+"px":v);return Ag.h("span",ha,a)}},{key:"interactivelyChangeLabel",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("edit label",{input:a.textString,historyId:"lively.morphic-label-edit-hist"}),
2);f=m.yieldResult;"string"===typeof f&&(a.textString=f);m.jumpToEnd()})}},{key:"interactivelySetIcon",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(a.world().filterableListPrompt("Select Icon",Object.keys(Ag.Icons).map(function(u){return{isListItem:!0,label:[].concat($jscomp.arrayFromIterable(Ag.Icon.textAttribute(u,{paddingRight:"10px"})),[u,{}]),value:u}})),2);f=r.yieldResult;m=$jscomp.makeIterator(f.selected);
if(q=m.next().value)a.value=Ag.Icon.textAttribute(q);r.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=zb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift({isDivider:!0});f.unshift(["edit label as rich text",function(){var m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield($world.editPrompt("rich text",{input:a.value,resolveTextAttributes:!0}),2);if(m=q.yieldResult)a.value=m;q.jumpToEnd()})}]);f.unshift(["change label",
function(){return a.interactivelyChangeLabel()}]);f.unshift(["set Icon",function(){return a.interactivelySetIcon()}]);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Label"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fill:{defaultValue:Ag.Color.transparent},draggable:{defaultValue:!1},nativeCursor:{defaultValue:"default"},isIcon:{derived:!0,get:function(){return Ag.properties.values(Ag.Icons).map(function(a){return a.code}).includes(this.textString)}},
value:{derived:!0,after:["textAndAttributes","textString"],get:function(){var a=this.textAndAttributes;if(2>=a.length){var f=$jscomp.makeIterator(a),m=f.next().value;f=f.next().value;if(!Object.keys(f||{}).length)return m||""}return a},set:function(a){"string"===typeof a?this.textString=a:this.textAndAttributes=a}},textString:{derived:!0,after:["textAndAttributes"],get:function(){return this.textAndAttributes.map(function(a,f){return 0==f%2?a:""}).join("")},set:function(a){this.textAndAttributes=
[a,null]}},textAndAttributes:{after:["autofit"],get:function(){var a=this.getProperty("textAndAttributes");if(!a||1>a.length)a=["",null];return a},set:function(a){Array.isArray(a)||(a=[String(a),{}]);0===a.length&&(a=["",{}]);this.setProperty("textAndAttributes",a);this.autofit&&this.invalidateTextLayout();Ag.signal(this,"value",a)}},valueAndAnnotation:{derived:!0,after:["textAndAttributes"],get:function(){var a=this.textAndAttributes,f=null;if(2<a.length){var m=$jscomp.makeIterator(a.slice(-2)),
q=m.next().value;(m=m.next().value)&&m.textStyleClasses&&m.textStyleClasses.includes("annotation")&&(a=a.slice(0,-2),f=[q,m])}return{value:a,annotation:f}},set:function(a){var f=a.value;a=a.annotation;f||(f="");"string"===typeof f&&(f=[f,null]);Array.isArray(f)||(f=[String(f),null]);f=f.slice();if(a){"string"===typeof a&&(a=[a,null]);var m=a[1];m||(m=a[1]={});f.push.apply(f,$jscomp.arrayFromIterable(a));m.textStyleClasses=(m.textStyleClasses||[]).concat("annotation");m.textStyleClasses.includes("annotation")||
m.textStyleClasses.push("annotation")}this.textAndAttributes=f}},autofit:{defaultValue:!0,set:function(a){this.setProperty("autofit",a);a&&(this._needsFit=!0)}},padding:{type:"Rectangle",isStyleProp:!0,defaultValue:Ag.Rectangle.inset(0),after:["autofit"],initialize:function(a){this.padding=a},set:function(a){a||(a=Ag.Rectangle.inset(0));var f=this.padding;this.setProperty("padding","number"===typeof a?Ag.Rectangle.inset(a):a);this.autofit&&!f.equals(a)&&this.invalidateTextLayout()}},fontFamily:{isStyleProp:!0,
type:"Enum",values:Ag.config.text.basicFontItems,after:["autofit"],defaultValue:"IBM Plex Sans, Sans-Serif",set:function(a){var f=this.fontFamily;this.setProperty("fontFamily",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},fontSize:{type:"Number",min:1,isStyleProp:!0,defaultValue:12,after:["autofit"],set:function(a){var f=this.fontSize;this.setProperty("fontSize",a);this.autofit&&a!=f&&this.invalidateTextLayout()}},fontColor:{type:"Color",isStyleProp:!0,defaultValue:Ag.Color.black},fontWeight:{type:"Enum",
values:["bold","bolder","light","lighter"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var f=this.fontWeight;this.setProperty("fontWeight",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},fontStyle:{type:"Enum",values:["normal","italic","oblique"],isStyleProp:!0,defaultValue:"normal",after:["autofit"],set:function(a){var f=this.fontStyle;this.setProperty("fontStyle",a);this.autofit&&f!=a&&this.invalidateTextLayout()}},textShadow:{type:"String",isStyleProp:!0,defaultValue:""},
textDecoration:{defaultValue:"none"},textStyleClasses:{defaultValue:void 0,after:["autofit"],set:function(a){this.setProperty("textStyleClasses",a);this.autofit&&this.invalidateTextLayout()}}}}},{key:"icon",value:function(a,f){f=void 0===f?{prefix:"",suffix:""}:f;return Ag.Icon.makeLabel(a,f)}}],e,{pathInPackage:function(){return"text/label.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",
version:"0.1.2"}}},{start:499,end:18882})}(Ag.Morph));Ag.Label=Rs;Ag.Label=Rs;Ag.Label=Rs;var coa=Object.freeze({__proto__:null,Label:Rs}),mT="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,doa={},L6=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,eoa=doa=function(b,e){function l(T){var fa=T.match(/\n/g);fa&&(qa+=fa.length);fa=T.lastIndexOf("\n");D=~fa?T.length-fa:D+T.length}function a(){var T={line:qa,column:D};return function(fa){fa.position=new f(T);v(/^\s*/);return fa}}function f(T){(this||
mT).start=T;(this||mT).end={line:qa,column:D};(this||mT).source=e.source}function m(T){var fa=Error(e.source+":"+qa+":"+D+": "+T);fa.reason=T;fa.filename=e.source;fa.line=qa;fa.column=D;fa.source=b;if(e.silent)P.push(fa);else throw fa;}function q(){return v(/^{\s*/)}function r(){return v(/^}/)}function u(){var T,fa=[];v(/^\s*/);for(y(fa);b.length&&"}"!=b.charAt(0)&&(T=S()||ha());)!1!==T&&(fa.push(T),y(fa));return fa}function v(T){if(T=T.exec(b)){var fa=T[0];l(fa);b=b.slice(fa.length);return T}}function y(T){var fa;
for(T=T||[];fa=z();)!1!==fa&&T.push(fa);return T}function z(){var T=a();if("/"==b.charAt(0)&&"*"==b.charAt(1)){for(var fa=2;""!=b.charAt(fa)&&("*"!=b.charAt(fa)||"/"!=b.charAt(fa+1));)++fa;fa+=2;if(""===b.charAt(fa-1))return m("End of comment missing");var Ra=b.slice(2,fa-2);D+=2;l(Ra);b=b.slice(fa);D+=2;return T({type:"comment",comment:Ra})}}function B(){var T=v(/^([^{]+)/);if(T)return Vv(T[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,
function(fa){return fa.replace(/,/g,"\u200c")}).split(/\s*(?![^(]*\)),\s*/).map(function(fa){return fa.replace(/\u200C/g,",")})}function C(){var T=a(),fa=v(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(fa){fa=Vv(fa[0]);if(!v(/^:\s*/))return m("property missing ':'");var Ra=v(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);T=T({type:"declaration",property:fa.replace(L6,""),value:Ra?Vv(Ra[0]).replace(L6,""):""});v(/^[;\s]*/);return T}}function G(){var T=[];if(!q())return m("missing '{'");
y(T);for(var fa;fa=C();)!1!==fa&&(T.push(fa),y(T));return r()?T:m("missing '}'")}function F(){for(var T,fa=[],Ra=a();T=v(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)fa.push(T[1]),v(/^,\s*/);if(fa.length)return Ra({type:"keyframe",values:fa,declarations:G()})}function N(){var T=a(),fa=v(/^@([-\w]+)?keyframes\s*/);if(fa){var Ra=fa[1];fa=v(/^([-\w]+)\s*/);if(!fa)return m("@keyframes missing name");fa=fa[1];if(!q())return m("@keyframes missing '{'");for(var gb,ea=y();gb=F();)ea.push(gb),ea=ea.concat(y());
return r()?T({type:"keyframes",name:fa,vendor:Ra,keyframes:ea}):m("@keyframes missing '}'")}}function L(T){var fa=new RegExp("^@"+T+"\\s*([^;]+);");return function(){var Ra=a(),gb=v(fa);if(gb){var ea={type:T};ea[T]=gb[1].trim();return Ra(ea)}}}function S(){if("@"==b[0]){var T;if(!(T=N())){T=a();var fa=v(/^@media *([^{]+)/);if(fa)if(fa=Vv(fa[1]),q()){var Ra=y().concat(u());T=r()?T({type:"media",media:fa,rules:Ra}):m("@media missing '}'")}else T=m("@media missing '{'");else T=void 0}T||(T=a(),T=(fa=
v(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/))?T({type:"custom-media",name:Vv(fa[1]),media:Vv(fa[2])}):void 0);T||(T=a(),(fa=v(/^@supports *([^{]+)/))?(fa=Vv(fa[1]),q()?(Ra=y().concat(u()),T=r()?T({type:"supports",supports:fa,rules:Ra}):m("@supports missing '}'")):T=m("@supports missing '{'")):T=void 0);if(!(T=T||J()||M()||X()))if(T=a(),Ra=v(/^@([-\w]+)?document *([^{]+)/))if(fa=Vv(Ra[1]),Ra=Vv(Ra[2]),q()){var gb=y().concat(u());T=r()?T({type:"document",document:Ra,vendor:fa,rules:gb}):m("@document missing '}'")}else T=
m("@document missing '{'");else T=void 0;if(!T)if(T=a(),v(/^@page */))if(fa=B()||[],q()){for(Ra=y();gb=C();)Ra.push(gb),Ra=Ra.concat(y());T=r()?T({type:"page",selectors:fa,declarations:Ra}):m("@page missing '}'")}else T=m("@page missing '{'");else T=void 0;T||(T=a(),v(/^@host\s*/)?q()?(fa=y().concat(u()),T=r()?T({type:"host",rules:fa}):m("@host missing '}'")):T=m("@host missing '{'"):T=void 0);if(!T)if(T=a(),v(/^@font-face\s*/))if(q()){for(fa=y();Ra=C();)fa.push(Ra),fa=fa.concat(y());T=r()?T({type:"font-face",
declarations:fa}):m("@font-face missing '}'")}else T=m("@font-face missing '{'");else T=void 0;return T}}function ha(){var T=a(),fa=B();if(!fa)return m("selector missing");y();return T({type:"rule",selectors:fa,declarations:G()})}e=e||{};var qa=1,D=1;f.prototype.content=b;var P=[],J=L("import"),M=L("charset"),X=L("namespace");return VP(function(){var T=u();return{type:"stylesheet",stylesheet:{source:e.source,rules:T,parsingErrors:P}}}())},Rca="undefined"!==typeof globalThis?globalThis:"undefined"!==
typeof self?self:global,M6={};M6=mJ;mJ.prototype.emit=function(b){return b};mJ.prototype.visit=function(b){return this[b.type](b)};mJ.prototype.mapVisit=function(b,e){var l="";e=e||"";for(var a=0,f=b.length;a<f;a++)l+=this.visit(b[a]),e&&a<f-1&&(l+=this.emit(e));return l};var N6=M6,Ex="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,O6={},c1=N6,foa=Rj;O6=Yk;foa(Yk,c1);Yk.prototype.compile=function(b){return this.stylesheet(b)};Yk.prototype.stylesheet=function(b){return this.mapVisit(b.stylesheet.rules,
"\n\n")};Yk.prototype.comment=function(b){return this.emit(this.indent()+"/*"+b.comment+"*/",b.position)};Yk.prototype.import=function(b){return this.emit("@import "+b.import+";",b.position)};Yk.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Yk.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("  {\n"+this.indent(1))+
this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Yk.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};Yk.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};Yk.prototype.supports=function(b){return this.emit("@supports "+b.supports,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Yk.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+
"keyframes "+b.name,b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.keyframes,"\n")+this.emit(this.indent(-1)+"}")};Yk.prototype.keyframe=function(b){var e=b.declarations;return this.emit(this.indent())+this.emit(b.values.join(", "),b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(e,"\n")+this.emit(this.indent(-1)+"\n"+this.indent()+"}\n")};Yk.prototype.page=function(b){var e=b.selectors.length?b.selectors.join(", ")+" ":"";return this.emit("@page "+e,b.position)+this.emit("{\n")+
this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Yk.prototype["font-face"]=function(b){return this.emit("@font-face ",b.position)+this.emit("{\n")+this.emit(this.indent(1))+this.mapVisit(b.declarations,"\n")+this.emit(this.indent(-1))+this.emit("\n}")};Yk.prototype.host=function(b){return this.emit("@host",b.position)+this.emit(" {\n"+this.indent(1))+this.mapVisit(b.rules,"\n\n")+this.emit(this.indent(-1)+"\n}")};Yk.prototype["custom-media"]=
function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};Yk.prototype.rule=function(b){var e=this.indent(),l=b.declarations;return l.length?this.emit(b.selectors.map(function(a){return e+a}).join(",\n"),b.position)+this.emit(" {\n")+this.emit(this.indent(1))+this.mapVisit(l,"\n")+this.emit(this.indent(-1))+this.emit("\n"+this.indent()+"}"):""};Yk.prototype.declaration=function(b){return this.emit(this.indent())+this.emit(b.property+": "+b.value,b.position)+this.emit(";")};
Yk.prototype.indent=function(b){(this||Ex).level=(this||Ex).level||1;return null!=b?((this||Ex).level+=b,""):Array((this||Ex).level).join((this||Ex).indentation||"  ")};var goa=O6,nT={},P6=eh.Buffer;(function(b){var e=function(l){return"function"===typeof l?l:"function"===typeof P6?function(a){return(new P6(a,"base64")).toString("binary")}:"object"===typeof b.base64js?function(a){a=b.base64js.b64ToByteArray(a);return Array.prototype.map.call(a,function(f){return String.fromCharCode(f)}).join("")}:
function(){throw Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.");}}(b.atob);b.atob=e;nT&&(nT=e)})(window);var hoa=nT,ioa=/^xn--/,joa=/[^\0-\x7E]/,Tca=/[\x2E\u3002\uFF0E\uFF61]/g,Sca={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Du=Math.floor,oT=String.fromCharCode,Q6=function(b,e){return b+22+75*(26>b)-((0!=e)<<5)},R6=function(b,
e,l){var a=0;b=l?Du(b/700):b>>1;for(b+=Du(b/e);455<b;a+=36)b=Du(b/35);return Du(a+36*b/(b+38))},S6=function(b){var e=[],l=b.length,a=0,f=128,m=72,q=b.lastIndexOf("-");0>q&&(q=0);for(var r=0;r<q;++r)128<=b.charCodeAt(r)&&Fz("not-basic"),e.push(b.charCodeAt(r));for(q=0<q?q+1:0;q<l;){r=a;for(var u=1,v=36;;v+=36){q>=l&&Fz("invalid-input");var y=10>(B=b.charCodeAt(q++))-48?B-22:26>B-65?B-65:26>B-97?B-97:36;(36<=y||y>Du((2147483647-a)/u))&&Fz("overflow");a+=y*u;var z=v<=m?1:v>=m+26?26:v-m;if(y<z)break;
y=36-z;u>Du(2147483647/y)&&Fz("overflow");u*=y}u=e.length+1;m=R6(a-r,u,0==r);Du(a/u)>2147483647-f&&Fz("overflow");f+=Du(a/u);a%=u;e.splice(a++,0,f)}var B;return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(e))},T6=function(b){for(var e=[],l=(b=e1(b)).length,a=128,f=0,m=72,q=$jscomp.makeIterator(b),r=q.next();!r.done;r=q.next()){var u=r.value;128>u&&e.push(oT(u))}for((u=q=e.length)&&e.push("-");u<l;){var v=2147483647,y=$jscomp.makeIterator(b);for(r=y.next();!r.done;r=y.next())r=r.value,
r>=a&&r<v&&(v=r);r=u+1;v-a>Du((2147483647-f)/r)&&Fz("overflow");f+=(v-a)*r;a=v;v=$jscomp.makeIterator(b);for(y=v.next();!y.done;y=v.next())if(y=y.value,y<a&&2147483647<++f&&Fz("overflow"),y==a){var z=f;for(y=36;;y+=36){var B=y<=m?1:y>=m+26?26:y-m;if(z<B)break;z-=B;var C=36-B;e.push(oT(Q6(B+z%C,0)));z=Du(z/C)}e.push(oT(Q6(z,0)));m=R6(f,r,u==q);f=0;++u}++f;++a}return e.join("")},koa={version:"2.1.0",ucs2:{decode:e1,encode:function(b){return String.fromCodePoint.apply(String,$jscomp.arrayFromIterable(b))}},
decode:S6,encode:T6,toASCII:function(b){return d1(b,function(e){return joa.test(e)?"xn--"+T6(e):e})},toUnicode:function(b){return d1(b,function(e){return ioa.test(e)?S6(e.slice(4).toLowerCase()):e})}},XF=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}},wA={};wA.decode=wA.parse=function(b,e,l,a){l=l||"=";var f={};if("string"!=typeof b||0===b.length)return f;var m=/\+/g;b=b.split(e||"&");e=1E3;a&&"number"==
typeof a.maxKeys&&(e=a.maxKeys);a=b.length;0<e&&a>e&&(a=e);for(e=0;e<a;++e){var q,r;var u=b[e].replace(m,"%20");var v=u.indexOf(l);0<=v?(q=u.substr(0,v),r=u.substr(v+1)):(q=u,r="");u=decodeURIComponent(q);v=decodeURIComponent(r);Object.prototype.hasOwnProperty.call(f,u)?Array.isArray(f[u])?f[u].push(v):f[u]=[f[u],v]:f[u]=v}return f};wA.encode=wA.stringify=function(b,e,l,a){return e=e||"&",l=l||"=",null===b&&(b=void 0),"object"==typeof b?Object.keys(b).map(function(f){var m=encodeURIComponent(XF(f))+
l;return Array.isArray(b[f])?b[f].map(function(q){return m+encodeURIComponent(XF(q))}).join(e):m+encodeURIComponent(XF(b[f]))}).join(e):a?encodeURIComponent(XF(a))+l+encodeURIComponent(XF(b)):""};var KC={},gu={isString:function(b){return"string"==typeof b},isObject:function(b){return"object"==typeof b&&null!==b},isNull:function(b){return null===b},isNullOrUndefined:function(b){return null==b}};KC.parse=uE;KC.resolve=function(b,e){return uE(b,!1,!0).resolve(e)};KC.resolveObject=function(b,e){return b?
uE(b,!1,!0).resolveObject(e):e};KC.format=function(b){gu.isString(b)&&(b=uE(b));return b instanceof $q?b.format():$q.prototype.format.call(b)};KC.Url=$q;var loa=/^([a-z0-9.+-]+:)/i,moa=/:[0-9]*$/,noa=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ooa="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),pT=["'"].concat(ooa),U6=["%","/","?",";","#"].concat(pT),V6=["/","?","#"],W6=/^[+a-z0-9A-Z_-]{0,63}$/,poa=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,qoa={javascript:!0,"javascript:":!0},qT={javascript:!0,"javascript:":!0},
LC={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};$q.prototype.parse=function(b,e,l){if(!gu.isString(b))throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var a=b.indexOf("?");a=-1!==a&&a<b.indexOf("#")?"?":"#";b=b.split(a);b[0]=b[0].replace(/\\/g,"/");a=b=b.join(a);if(a=a.trim(),!l&&1===b.split("#").length)if(b=noa.exec(a))return this.path=a,this.href=a,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?wA.parse(this.search.substr(1)):
this.search.substr(1)):e&&(this.search="",this.query={}),this;if(b=loa.exec(a)){var f=(b=b[0]).toLowerCase();this.protocol=f;a=a.substr(b.length)}if(l||b||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);!m||b&&qT[b]||(a=a.substr(2),this.slashes=!0)}if(!qT[b]&&(m||b&&!LC[b])){var q,r;m=-1;for(l=0;l<V6.length;l++)-1!==(u=a.indexOf(V6[l]))&&(-1===m||u<m)&&(m=u);-1!==(r=-1===m?a.lastIndexOf("@"):a.lastIndexOf("@",m))&&(q=a.slice(0,r),a=a.slice(r+1),this.auth=decodeURIComponent(q));m=-1;for(l=
0;l<U6.length;l++){var u;-1!==(u=a.indexOf(U6[l]))&&(-1===m||u<m)&&(m=u)}-1===m&&(m=a.length);this.host=a.slice(0,m);a=a.slice(m);this.parseHost();this.hostname=this.hostname||"";q="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!q)for(m=this.hostname.split(/\./),r=(l=0,m.length);l<r;l++)if((u=m[l])&&!u.match(W6)){b="";for(var v=0,y=u.length;v<y;v++)127<u.charCodeAt(v)?b+="x":b+=u[v];if(!b.match(W6)){r=m.slice(0,l);l=m.slice(l+1);(u=u.match(poa))&&(r.push(u[1]),l.unshift(u[2]));
l.length&&(a="/"+l.join(".")+a);this.hostname=r.join(".");break}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase();q||(this.hostname=koa.toASCII(this.hostname));l=this.port?":"+this.port:"";this.host=(this.hostname||"")+l;this.href+=this.host;q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!qoa[f])for(l=0,r=pT.length;l<r;l++)q=pT[l],-1!==a.indexOf(q)&&(u=encodeURIComponent(q),u===q&&(u=escape(q)),a=a.split(q).join(u));l=
a.indexOf("#");-1!==l&&(this.hash=a.substr(l),a=a.slice(0,l));l=a.indexOf("?");if(-1!==l?(this.search=a.substr(l),this.query=a.substr(l+1),e&&(this.query=wA.parse(this.query)),a=a.slice(0,l)):e&&(this.search="",this.query={}),a&&(this.pathname=a),LC[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search)l=this.pathname||"",this.path=l+(this.search||"");return this.href=this.format(),this};$q.prototype.format=function(){var b=this.auth||"";b&&(b=(b=encodeURIComponent(b)).replace(/%3A/i,
":"),b+="@");var e=this.protocol||"",l=this.pathname||"",a=this.hash||"",f=!1,m="";this.host?f=b+this.host:this.hostname&&(f=b+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(f+=":"+this.port));this.query&&gu.isObject(this.query)&&Object.keys(this.query).length&&(m=wA.stringify(this.query));b=this.search||m&&"?"+m||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||LC[e])&&!1!==f?(f="//"+(f||""),l&&"/"!==l.charAt(0)&&(l="/"+l)):f||(f=""),a&&"#"!==a.charAt(0)&&
(a="#"+a),b&&"?"!==b.charAt(0)&&(b="?"+b),e+f+(l=l.replace(/[?#]/g,function(q){return encodeURIComponent(q)}))+(b=b.replace("#","%23"))+a};$q.prototype.resolve=function(b){return this.resolveObject(uE(b,!1,!0)).format()};$q.prototype.resolveObject=function(b){if(gu.isString(b)){var e=new $q;e.parse(b,!1,!0);b=e}e=new $q;for(var l=Object.keys(this),a=0;a<l.length;a++){var f=l[a];e[f]=this[f]}if(e.hash=b.hash,""===b.href)return e.href=e.format(),e;if(b.slashes&&!b.protocol){var m=Object.keys(b);for(l=
0;l<m.length;l++)a=m[l],"protocol"!==a&&(e[a]=b[a]);return LC[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(b.protocol&&b.protocol!==e.protocol){if(!LC[b.protocol]){m=Object.keys(b);for(l=0;l<m.length;l++)a=m[l],e[a]=b[a];return e.href=e.format(),e}if(e.protocol=b.protocol,b.host||qT[b.protocol])e.pathname=b.pathname;else{for(var q=(b.pathname||"").split("/");q.length&&!(b.host=q.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==q[0]&&q.unshift("");
2>q.length&&q.unshift("");e.pathname=q.join("/")}if(e.search=b.search,e.query=b.query,e.host=b.host||"",e.auth=b.auth,e.hostname=b.hostname||b.host,e.port=b.port,e.pathname||e.search)e.path=(e.pathname||"")+(e.search||"");return e.slashes=e.slashes||b.slashes,e.href=e.format(),e}l=e.pathname&&"/"===e.pathname.charAt(0);var r=b.host||b.pathname&&"/"===b.pathname.charAt(0),u=l=r||l||e.host&&b.pathname;a=e.pathname&&e.pathname.split("/")||[];f=(q=b.pathname&&b.pathname.split("/")||[],e.protocol&&!LC[e.protocol]);
if(f&&(e.hostname="",e.port=null,e.host&&(""===a[0]?a[0]=e.host:a.unshift(e.host)),e.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(""===q[0]?q[0]=b.host:q.unshift(b.host)),b.host=null),l=l&&(""===q[0]||""===a[0])),r)e.host=b.host||""===b.host?b.host:e.host,e.hostname=b.hostname||""===b.hostname?b.hostname:e.hostname,e.search=b.search,e.query=b.query,a=q;else if(q.length)a||(a=[]),a.pop(),a=a.concat(q),e.search=b.search,e.query=b.query;else if(!gu.isNullOrUndefined(b.search))return f&&
(e.hostname=e.host=a.shift(),(m=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=m.shift(),e.host=e.hostname=m.shift())),e.search=b.search,e.query=b.query,gu.isNull(e.pathname)&&gu.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!a.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;r=a.slice(-1)[0];q=(e.host||b.host||1<a.length)&&("."===r||".."===r)||""===r;for(var v=0,y=a.length;0<=y;y--)"."===
(r=a[y])?a.splice(y,1):".."===r?(a.splice(y,1),v++):v&&(a.splice(y,1),v--);if(!l&&!u)for(;v--;v)a.unshift("..");!l||""===a[0]||a[0]&&"/"===a[0].charAt(0)||a.unshift("");q&&"/"!==a.join("/").substr(-1)&&a.push("");u=""===a[0]||a[0]&&"/"===a[0].charAt(0);f&&(e.hostname=e.host=u?"":a.length?a.shift():"",(m=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=m.shift(),e.host=e.hostname=m.shift()));return(l||e.host&&a.length)&&!u&&a.unshift(""),a.length?e.pathname=a.join("/"):(e.pathname=null,
e.path=null),gu.isNull(e.pathname)&&gu.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=b.auth||e.auth,e.slashes=e.slashes||b.slashes,e.href=e.format(),e};$q.prototype.parseHost=function(){var b=this.host,e=moa.exec(b);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),b=b.substr(0,b.length-e.length));b&&(this.hostname=b)};var roa=Qh,YF={resolve:function(){for(var b,e="",l=!1,a=arguments.length-1;-1<=a&&!l;a--){var f;0<=a?f=arguments[a]:(void 0===b&&(b=roa.cwd()),f=b);
hu(f);0!==f.length&&(e=f+"/"+e,l=47===f.charCodeAt(0))}return e=f1(e,!l),l?0<e.length?"/"+e:"/":0<e.length?e:"."},normalize:function(b){if(hu(b),0===b.length)return".";var e=47===b.charCodeAt(0),l=47===b.charCodeAt(b.length-1);return 0!==(b=f1(b,!e)).length||e||(b="."),0<b.length&&l&&(b+="/"),e?"/"+b:b},isAbsolute:function(b){return hu(b),0<b.length&&47===b.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var b,e=0;e<arguments.length;++e){var l=arguments[e];hu(l);0<l.length&&(void 0===
b?b=l:b+="/"+l)}return void 0===b?".":YF.normalize(b)},relative:function(b,e){if((hu(b),hu(e),b===e)||(b=YF.resolve(b))===(e=YF.resolve(e)))return"";for(var l=1;l<b.length&&47===b.charCodeAt(l);++l);for(var a=b.length,f=a-l,m=1;m<e.length&&47===e.charCodeAt(m);++m);for(var q=e.length-m,r=f<q?f:q,u=-1,v=0;v<=r;++v){if(v===r){if(q>r){if(47===e.charCodeAt(m+v))return e.slice(m+v+1);if(0===v)return e.slice(m+v)}else f>r&&(47===b.charCodeAt(l+v)?u=v:0===v&&(u=0));break}var y=b.charCodeAt(l+v);if(y!==e.charCodeAt(m+
v))break;47===y&&(u=v)}f="";for(v=l+u+1;v<=a;++v)v!==a&&47!==b.charCodeAt(v)||(0===f.length?f+="..":f+="/..");return 0<f.length?f+e.slice(m+u):(m+=u,47===e.charCodeAt(m)&&++m,e.slice(m))},_makeLong:function(b){return b},dirname:function(b){if(hu(b),0===b.length)return".";for(var e=47===b.charCodeAt(0),l=-1,a=!0,f=b.length-1;1<=f;--f)if(47===b.charCodeAt(f)){if(!a){l=f;break}}else a=!1;return-1===l?e?"/":".":e&&1===l?"//":b.slice(0,l)},basename:function(b,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');
hu(b);var l,a=0,f=-1,m=!0;if(void 0!==e&&0<e.length&&e.length<=b.length){if(e.length===b.length&&e===b)return"";var q=e.length-1,r=-1;for(l=b.length-1;0<=l;--l){var u=b.charCodeAt(l);if(47===u){if(!m){a=l+1;break}}else-1===r&&(m=!1,r=l+1),0<=q&&(u===e.charCodeAt(q)?-1==--q&&(f=l):(q=-1,f=r))}return a===f?f=r:-1===f&&(f=b.length),b.slice(a,f)}for(l=b.length-1;0<=l;--l)if(47===b.charCodeAt(l)){if(!m){a=l+1;break}}else-1===f&&(m=!1,f=l+1);return-1===f?"":b.slice(a,f)},extname:function(b){hu(b);for(var e=
-1,l=0,a=-1,f=!0,m=0,q=b.length-1;0<=q;--q){var r=b.charCodeAt(q);if(47!==r)-1===a&&(f=!1,a=q+1),46===r?-1===e?e=q:1!==m&&(m=1):-1!==e&&(m=-1);else if(!f){l=q+1;break}}return-1===e||-1===a||0===m||1===m&&e===a-1&&e===l+1?"":b.slice(e,a)},format:function(b){if(null===b||"object"!=typeof b)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof b);var e=b.dir||b.root,l=b.base||(b.name||"")+(b.ext||"");return e?e===b.root?e+l:e+"/"+l:l},parse:function(b){hu(b);var e=
{root:"",dir:"",base:"",ext:"",name:""};if(0===b.length)return e;var l,a=b.charCodeAt(0),f=47===a;f?(e.root="/",l=1):l=0;for(var m=-1,q=0,r=-1,u=!0,v=b.length-1,y=0;v>=l;--v)if(47!==(a=b.charCodeAt(v)))-1===r&&(u=!1,r=v+1),46===a?-1===m?m=v:1!==y&&(y=1):-1!==m&&(y=-1);else if(!u){q=v+1;break}return-1===m||-1===r||0===y||1===y&&m===r-1&&m===q+1?-1!==r&&(e.base=e.name=0===q&&f?b.slice(1,r):b.slice(q,r)):(0===q&&f?(e.name=b.slice(1,m),e.base=b.slice(1,r)):(e.name=b.slice(q,m),e.base=b.slice(q,r)),e.ext=
b.slice(m,r)),0<q?e.dir=b.slice(0,q-1):f&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null},rT=YF.posix=YF,X6={},Y6=/%[a-f0-9]{2}/gi,Z6=/(%[a-f0-9]{2})+/gi;X6=function(b){if("string"!==typeof b)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof b+"`");try{return b=b.replace(/\+/g," "),decodeURIComponent(b)}catch(q){for(var e={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},l=Z6.exec(b);l;){try{e[l[0]]=decodeURIComponent(l[0])}catch(r){var a=l[0];try{var f=
decodeURIComponent(a)}catch(u){f=a.match(Y6);for(var m=1;m<f.length;m++)a=WP(f,m).join(""),f=a.match(Y6);f=a}f!==l[0]&&(e[l[0]]=f)}l=Z6.exec(b)}e["%C2"]="\ufffd";l=Object.keys(e);for(a=0;a<l.length;a++)f=l[a],b=b.replace(new RegExp(f,"g"),e[f]);return b}};var soa={},Xca=Qh,l1=hoa,Uca=KC,Vca=rT,Wca=X6,$6=/[#@] sourceMappingURL=([^\s'"]*)/,Yca=RegExp("(?:/\\*(?:\\s*\r?\n(?://)?)?(?:"+$6.source+")\\s*\\*/|//(?:"+$6.source+"))\\s*"),Zca=/^data:([^,;]*)(;[^,;]*)*(?:,(.*))?$/,$ca=/^(?:application|text)\/json$/,
ada="utf-8",bda=/\/?$/,toa=soa={resolveSourceMap:i1,resolveSourceMapSync:k1,resolveSources:m1,resolveSourcesSync:o1,resolve:function(b,e,l,a,f){function m(r){m1(r.map,r.sourcesRelativeTo,l,a,function(u,v){if(u)return f(u);r.sourcesResolved=v.sourcesResolved;r.sourcesContent=v.sourcesContent;f(null,r)})}"function"===typeof a&&(f=a,a={});if(null===b){var q={sourceMappingURL:null,url:e,sourcesRelativeTo:e,map:null};b=vE(e);l(b,function(r,u){if(r)return r.sourceMapData=q,f(r);q.map=String(u);try{q.map=
YB(q.map,q)}catch(v){return f(v)}m(q)})}else i1(b,e,l,function(r,u){if(r)return f(r);if(!u)return f(null,null);m(u)})},resolveSync:function(b,e,l,a){if(null===b)b={sourceMappingURL:null,url:e,sourcesRelativeTo:e,map:null},b.map=h1(l,e,b),b.map=YB(b.map,b);else if(b=k1(b,e,l),!b)return null;e=o1(b.map,b.sourcesRelativeTo,l,a);b.sourcesResolved=e.sourcesResolved;b.sourcesContent=e.sourcesContent;return b},parseMapToJSON:YB},uoa=function(){throw Error("Node.js fs module is not supported by jspm core"+
("undefined"!=typeof Deno?". Deno support here is tracking in https://github.com/jspm/jspm-core/issues/4, +1's are appreciated!":" in the browser"));},YP="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,a7={},p1=N6,voa=Rj;a7=lm;voa(lm,p1);lm.prototype.compile=function(b){return b.stylesheet.rules.map((this||YP).visit,this||YP).join("")};lm.prototype.comment=function(b){return this.emit("",b.position)};lm.prototype.import=function(b){return this.emit("@import "+b.import+
";",b.position)};lm.prototype.media=function(b){return this.emit("@media "+b.media,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};lm.prototype.document=function(b){return this.emit("@"+(b.vendor||"")+"document "+b.document,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};lm.prototype.charset=function(b){return this.emit("@charset "+b.charset+";",b.position)};lm.prototype.namespace=function(b){return this.emit("@namespace "+b.namespace+";",b.position)};lm.prototype.supports=
function(b){return this.emit("@supports "+b.supports,b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};lm.prototype.keyframes=function(b){return this.emit("@"+(b.vendor||"")+"keyframes "+b.name,b.position)+this.emit("{")+this.mapVisit(b.keyframes)+this.emit("}")};lm.prototype.keyframe=function(b){var e=b.declarations;return this.emit(b.values.join(","),b.position)+this.emit("{")+this.mapVisit(e)+this.emit("}")};lm.prototype.page=function(b){var e=b.selectors.length?b.selectors.join(", "):
"";return this.emit("@page "+e,b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};lm.prototype["font-face"]=function(b){return this.emit("@font-face",b.position)+this.emit("{")+this.mapVisit(b.declarations)+this.emit("}")};lm.prototype.host=function(b){return this.emit("@host",b.position)+this.emit("{")+this.mapVisit(b.rules)+this.emit("}")};lm.prototype["custom-media"]=function(b){return this.emit("@custom-media "+b.name+" "+b.media+";",b.position)};lm.prototype.rule=function(b){var e=
b.declarations;return e.length?this.emit(b.selectors.join(","),b.position)+this.emit("{")+this.mapVisit(e)+this.emit("}"):""};lm.prototype.declaration=function(b){return this.emit(b.property+":"+b.value,b.position)+this.emit(";")};var woa=a7,ao="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,pw={};pw=function(b){b._comment=b.comment;b.map=new ab;b.position={line:1,column:1};b.files={};for(var e in pw)b[e]=pw[e]};var b7=function(b){return"\\"===rT.sep?b.replace(/\\/g,
"/").replace(/^[a-z]:\/?/i,"/"):b};pw.updatePosition=function(b){var e=b.match(/\n/g);e&&((this||ao).position.line+=e.length);e=b.lastIndexOf("\n");(this||ao).position.column=~e?b.length-e:(this||ao).position.column+b.length};pw.emit=function(b,e){if(e){var l=b7(e.source||"source.css");(this||ao).map.addMapping({source:l,generated:{line:(this||ao).position.line,column:Math.max((this||ao).position.column-1,0)},original:{line:e.start.line,column:e.start.column-1}});this.addFile(l,e)}this.updatePosition(b);
return b};pw.addFile=function(b,e){"string"!==typeof e.content||Object.prototype.hasOwnProperty.call((this||ao).files,b)||((this||ao).files[b]=e.content)};pw.applySourceMaps=function(){Object.keys((this||ao).files).forEach(function(b){var e=(this||ao).files[b];(this||ao).map.setSourceContent(b,e);if(!1!==(this||ao).options.inputSourcemaps&&(e=toa.resolveSync(e,b,uoa))){var l=new Cd(e.map);(this||ao).map.applySourceMap(l,b,b7(rT.dirname(e.sourcesRelativeTo)))}},this||ao)};pw.comment=function(b){return/^# sourceMappingURL=/.test(b.comment)?
this.emit("",b.position):this._comment(b)};var xoa=pw,yoa={},zoa=yoa=function(b,e){e=e||{};var l=e.compress?new woa(e):new goa(e);return e.sourcemap?(xoa(l),b=l.compile(b),l.applySourceMaps(),e="generator"===e.sourcemap?l.map:l.map.toJSON(),{code:b,map:e}):b=l.compile(b)},sT={};sT.parse=eoa;sT.stringify=zoa;var Wh=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js");Wh.obj=lf;Wh.promise=oe;Wh.string=Hg;Wh.pt=nf;Wh.Morph=Mj;Wh.vdom=ZE;Wh.addOrChangeCSSDeclaration=oi;Wh.css=sT;var WL=Wh.vdom;
Wh.diff=WL.diff;Wh.patch=WL.patch;Wh.h=WL.h;Wh.createElement=WL.create;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),l=e.hasOwnProperty("CustomVNode")&&"function"===typeof e.CustomVNode?e.CustomVNode:e.CustomVNode=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){this.morph=a;this.renderer=f;this.morphVtree=
null;this.key="custom-"+a.id}},{key:"type",get:function(){return"Widget"}},{key:"renderMorph",value:function(){var a=this.morph,f=this.morphVtree=this.renderer.renderMorph(a),m="customNode-key-"+a.id;f.children[0]&&f.children[0].key===m||f.children.unshift(Wh.h(a.domNodeTagName||"div",{key:m},[]));a._updateCSSDeclaration&&(a.ensureCSSDeclaration(),a._updateCSSDeclaration=!1);return f}},{key:"init",value:function(){var a=Wh.createElement(this.renderMorph(),this.renderer.domEnvironment);a.childNodes[0].appendChild(this.morph.domNode);
this.morph.cssDeclaration&&this.morph.ensureCSSDeclaration();return a}},{key:"update",value:function(a,f){a=a.morphVtree||this.renderMorph();var m=this.renderMorph();a=Wh.diff(a,m);Wh.patch(f,a);return null}},{key:"destroy",value:function(a){(a=this.renderer.domEnvironment.document.getElementById("css-for-"+this.morph.id))&&a.remove();console.log("[HTMLMorph] node of "+this.morph.name+" gets removed from DOM")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CustomVNode"}}],e,{pathInPackage:function(){return"html-morph.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:426,end:2427})})(void 0);var ky=wa("aW",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),l=e.hasOwnProperty("HTMLMorph")&&"function"===typeof e.HTMLMorph?e.HTMLMorph:e.HTMLMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:"isHTMLMorph",get:function(){return!0}},{key:"ensureCSSDeclaration",value:function(){var a=this;try{var f=Wh.css.parse(this.cssDeclaration);this.whenRendered().then(function(){f.stylesheet.rules.forEach(function(m){m.selectors&&(m.selectors=m.selectors.map(function(q){return"#"+a.id+" "+q}))});Wh.addOrChangeCSSDeclaration("css-for-"+a.id,Wh.css.stringify(f))})}catch(m){console.error("Error setting cssDeclaration of "+this+": "+m)}}},{key:"defaultHTML",get:function(){return'\n<div style="display: flex;\n            align-items: center;\n            justify-content: center;\n            height: 100%;\n            background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n  <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;HTML&#x2F;&gt;</p>\n</div>'}},
{key:"render",value:function(a){this._requestMasterStyling&&(this.master&&this.master.applyIfNeeded(!0),this._requestMasterStyling=!1);return new Wh.CustomVNode(this,a)}},{key:"menuItems",value:function(){var a=this,f=zb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift(["edit CSS...",function(){return a.world().execCommand("open workspace",{language:"css",content:a.cssDeclaration,target:a})}],["edit html...",function(){return a.world().execCommand("open workspace",{language:"html",
content:a.html,target:a})}],{isDivider:!0});return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HTMLMorph"}},{key:"properties",get:function(){return{extent:{defaultValue:Wh.pt(420,330)},html:{after:["cssDeclaration"],isStyleProp:!0,initialize:function(){this.html=this.defaultHTML},get:function(){return this.domNode.innerHTML},set:function(a){this.domNode.innerHTML=a;if(this.master)this.master.onMorphChange(this,{prop:"html",value:a});if(a.includes("<script")){a=this.domNode.querySelectorAll("script");
a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next()){var m=f.value;f=m.parentNode;m.remove();for(var q=document.createElement("script"),r=$jscomp.makeIterator(m.attributes),u=r.next();!u.done;u=r.next())u=u.value,q.setAttribute(u.name,u.value);m=$jscomp.makeIterator(m.childNodes);for(r=m.next();!r.done;r=m.next())q.appendChild(r.value);f.appendChild(q)}}}},domNodeTagName:{readOnly:!0,get:function(){return"div"}},domNodeStyle:{readOnly:!0,get:function(){return"position: absolute; width: 100%; height: 100%;"}},
domNode:{derived:!0,get:function(){this._domNode||(this._domNode=this.document.createElement(this.domNodeTagName),this._domNode.setAttribute("style",this.domNodeStyle));return this._domNode},set:function(a){this.domNode.parentNode&&this.domNode.parentNode.replaceChild(a,this.domNode);return this._domNode=a}},document:{readOnly:!0,get:function(){return this.env.domEnv.document}},scrollExtent:{readOnly:!0,get:function(){return Wh.pt(this.domNode.scrollWidth,this.domNode.scrollHeight)}},cssDeclaration:{isStyleProp:!0,
set:function(a){this.setProperty("cssDeclaration",a);a?(this.makeDirty(),this._updateCSSDeclaration=!0):(a=this.env.domEnv.document.getElementById("css-for-"+this.id))&&a.remove()}}}}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:2752,end:7055})}(Wh.Morph));Wh.HTMLMorph=ky;Wh.HTMLMorph=
ky;Wh.HTMLMorph=ky;var ZF=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/html-morph.js"),l=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"updateDocument",value:function(){this.srcDoc="<head><style>"+this.cssDeclaration+"</style></head><body>"+this.body+"</body>"}},{key:"isIFrameMorph",
get:function(){return!0}},{key:"reload",value:function(){return this.src?this.loadURL(this.src):this.srcDoc?this.displayHTML(this.srcDoc):null}},{key:"whenLoaded",value:function(){return this._whenLoaded||Promise.resolve()}},{key:"displayHTML",value:function(a,f){f=void 0===f?{}:f;var m=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){q=f;if(r=void 0===q.keepScroll?!0:q.keepScroll)u=m.iframeScroll;m.srcDoc=a;return v.yield(m.whenLoaded(),2)}r&&u&&(m.iframeScroll=
u);return v.return(m)})}},{key:"loadURL",value:function(a,f){f=void 0===f?{}:f;var m=this,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){q=f;if(r=void 0===q.keepScroll?!0:q.keepScroll)u=m.iframeScroll;m.src=a;return v.yield(m.whenLoaded(),2)}r&&u&&(m.iframeScroll=u);return v.return(m)})}},{key:"defaultSrcDoc",get:function(){return'\n    <div style="display: flex;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                background: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(0%, rgba(242,243,244,1)),color-stop(100%, rgba(229,231,233,1)))">\n      <p style="font: bold 40pt Inconsolata, monospace; color: lightgray;">&lt;iFrame&#x2F;&gt;</p>\n    </div>'}},
{key:"defaultHTML",get:function(){return'<iframe width="100%" height="100%" frameBorder="false" srcdoc=""></iframe>'}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"example",value:function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return a=(new Wh.IFrameMorph).openInWindow({title:"iframe"}).targetMorph,a.srcDoc="",a.src="http://localhost:9011/worlds/html%20export",f.yield(a.loadURL("https://google.com"),2);a.iframe.src;
a.iframe.srcDoc;a.src="";a.srcDoc="fooo";return f.yield(a.reload(),0)})}},{key:"properties",get:function(){return{html:{initialize:function(){this.html=this.defaultHTML;this.srcDoc=this.defaultSrcDoc}},body:{set:function(a){this.setProperty("body",a);this.updateDocument()}},cssDeclaration:{isStyleProp:!0,set:function(a){this.setProperty("cssDeclaration",a);this.updateDocument()}},iframe:{derived:!0,readOnly:!0,after:["domNode"],get:function(){return this.domNode.querySelector("iframe")}},src:{derived:!0,
after:["iframe"],get:function(){return this.iframe.src},set:function(a){this.iframe.removeAttribute("srcDoc");this.iframe.src=a;var f=Wh.promise.deferred().resolve;this._whenLoaded=Wh.promise;this.iframe.onload=function(m){return f(m)}}},srcDoc:{derived:!0,after:["iframe"],get:function(){return this.iframe.srcdoc},set:function(a){this.iframe.removeAttribute("src");this.iframe.srcdoc=a;this._whenLoaded=this.whenRendered().then(function(){return Wh.promise.delay(20)})}},iframeScroll:{derived:!0,after:["iframe"],
get:function(){try{var a=this.iframe.contentWindow;return Wh.pt(a.scrollX,a.scrollY)}catch(f){return Wh.pt(0,0)}},set:function(a){try{this.iframe.contentWindow.scrollTo(a.x,a.y)}catch(f){}}}}}}],e,{pathInPackage:function(){return"html-morph.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:7066,end:10790})}(Wh.HTMLMorph);Wh.IFrameMorph=
ZF;Wh.IFrameMorph=ZF;Wh.IFrameMorph=ZF;var Aoa=Object.freeze({__proto__:null,HTMLMorph:ky,IFrameMorph:ZF}),hk=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js");hk.arr=Qe;hk.obj=lf;hk.rect=Ff;hk.ShadowObject=kr;hk.morph=sb;var Eu=wa("aB",function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/style-sheets.js"),l=e.hasOwnProperty("StyleSheet")&&"function"===typeof e.StyleSheet?e.StyleSheet:e.StyleSheet=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a,f){hk.obj.isObject(a)&&!f&&(f=a,a=null);this.rules=f;for(var m in f)f[m]=this.unwrapFoldedProps(f[m]);this.name=a}},{key:"copy",value:function(){var a={},f;for(f in this.rules)a[f]=Object.assign({},this.rules[f]);return new hk.StyleSheet(this.name,a)}},{key:"__only_serialize__",get:function(){return["rules","context"]}},{key:"context",set:function(a){this._context=a}},{key:"context",get:function(){return this._context}},
{key:"unwrapFoldedProps",value:function(a){["borderRadius","borderWidth","borderColor","borderStyle"].forEach(function(f){if(f in a){var m=a[f];m||(m=0);a[f]=4==hk.arr.intersect(hk.obj.keys(m),["top","left","bottom","right"]).length?m:{top:m,bottom:m,right:m,left:m,valueOf:function(){return m}}}});return a}},{key:"removeRule",value:function(a){delete this.rules[a];this.context.requestStyling()}},{key:"setRule",value:function(a,f){this.rules[a]=this.unwrapFoldedProps(f);this.context.requestStyling()}},
{key:"toggleRule",value:function(a,f){this.rules[a]._deactivated=!f;this.context.requestStyling()}},{key:"applicableRules",value:function(){var a={},f;for(f in this.rules)a[f]={styleSheet:this,rule:f};return a}},{key:"toJSExpr",value:function(){return"new StyleSheet("+hk.obj.inspect(this.rules,{customPrinter:function(a,f,m){return a&&a.isColor||a&&a.isGradient?a.toJSExpr():a&&a.isPoint?a.toString():a&&hk.arr.all([a.top,a.left,a.right,a.bottom],function(q){return q&&hk.obj.equals(q,a.top)})?m(a.top):
a&&hk.obj.keys(a).includes("_rev")?m(hk.obj.dissoc(a,["_rev","_deactivated"])):f},escapeKeys:!0})+")"}},{key:"applyRule",value:function(a,f,m){var q=this.rules[a];if(q._deactivated)return{};q=hk.obj.dissoc(q,["_deactivated"]);return f.withMetaDo({styleSheetChange:!0},function(){if("layout"in q){var r=q.layout.copy();r.container=f;q.layout=r}"dropShadow"in q&&(q.dropShadow=new hk.ShadowObject(q.dropShadow),q.dropShadow.morph=f);"padding"in q&&(q.padding=q.padding.isRect?q.padding:hk.rect(q.padding,
q.padding));r=hk.obj.keys(q).filter(function(z){return!hk.obj.equals(f[z],q[z])});r=hk.obj.select(q,r);var u=f.propertiesAndPropertySettings().properties,v={},y;for(y in q)v[y]=u[y]&&u[y].defaultValue||f[y];m?f.animate(Object.assign({},r,{duration:m.duration,easing:m.easing})):Object.assign(f,r);return v})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StyleSheet"}}],e,{pathInPackage:function(){return"style-sheets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:203,end:3712})}(void 0));hk.StyleSheet=Eu;hk.StyleSheet=Eu;hk.StyleSheet=Eu;var Sf=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js");Sf.obj=lf;Sf.arr=Qe;Sf.num=Gk;Sf.Rectangle=Pd;Sf.rect=Ff;Sf.Color=xf;Sf.pt=nf;Sf.connect=Oe;Sf.noUpdate=Ct;Sf.signal=oj;Sf.disconnect=xo;Sf.Text=Qs;Sf.Range=jy;Sf.HTMLMorph=ky;Sf.Icon=Wn;Sf.morph=sb;var tT=
function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),l=e.hasOwnProperty("InputLine")&&"function"===typeof e.InputLine?e.InputLine:e.InputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,
a);Sf.connect(this,"textChange",this,"onInputChanged");Sf.connect(this,"selectionChange",this,"fixCursor")}},{key:"menuItems",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return 1==u.nextAddress?(f=[{command:"change placeholder",target:a},{isDivider:!0}],m=f.concat,q=$jscomp,r=q.arrayFromIterable,u.yield(zb._get(Object.getPrototypeOf(l.prototype),"menuItems",a).call(a),2)):u.return(m.call(f,r.call(q,u.yieldResult)))})}},{key:"onChange",value:function(a){"extent fontSize padding fontFamily position selection".split(" ").includes(a.prop)&&
this.updatePlaceholder();return zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"isInputLine",get:function(){return!0}},{key:"allowDuplicatesInHistory",get:function(){return!1}},{key:"resetHistory",value:function(){this.inputHistory={items:[],max:50,index:0}}},{key:"inputHistory",get:function(){return this._inputHistory?this._inputHistory:this._inputHistory=this.historyId?this.constructor.getHistory(this.historyId):{items:[],max:30,index:0}}},{key:"inputHistory",set:function(a){this._inputHistory=
a;this.historyId&&this.constructor.setHistory(this.historyId,this._inputHistory)}},{key:"clear",value:function(){this.input=""}},{key:"focus",value:function(){this.fixCursor();zb._get(Object.getPrototypeOf(l.prototype),"focus",this).call(this)}},{key:"onBlur",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.updatePlaceholder()}},{key:"fitToLineHeight",value:function(){this.height=this.defaultLineHeight+this.padding.top()+this.padding.bottom()}},{key:"indicateError",
value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return f.borderWidth=3,f.borderColor=Sf.Color.red,f._errorIcon=f.addMorph(f._errorIcon||Sf.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Sf.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Sf.Color.red,opacity:0,reactsToPointer:!1,fill:Sf.Color.white.withA(.9)})),m.yield(f.whenRendered(),2);f._errorIcon.opacity=
1;f._errorIcon.rightCenter=f.innerBounds().insetBy(10).rightCenter();m.jumpToEnd()})}},{key:"clearError",value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Sf.Color.transparent)}},{key:"updatePlaceholder",value:function(){var a=this.getSubmorphNamed("placeholder");if(a)if(this.input.length)a.visible=!1;else{var f=this.innerBounds();a.fontSize=this.fontSize;a.visible=!0;a.height=this.height;a.padding=this.padding;a.defaultTextStyle=this.defaultTextStyle;
a.lineHeight=this.height+"px";a.fit();a.leftCenter=this.label.length?f.rightCenter().addXY(0,this.borderWidth):f.leftCenter().withX(0)}}},{key:"fixCursor",value:function(){this.label&&(this.positionToIndex(this.selection.lead)<this.label.length&&(this.selection.lead=this.indexToPosition(this.label.length)),this.positionToIndex(this.selection.anchor)<this.label.length&&(this.selection.anchor=this.indexToPosition(this.label.length)))}},{key:"acceptInput",value:function(){var a=this.input;this.onInput(a);
return a}},{key:"onInput",value:function(a){0<this.input.length&&this.addInputToHistory(this.input);this.clearOnInput&&this.clear();Sf.signal(this,"inputAccepted",a)}},{key:"onInputChanged",value:function(a){Sf.signal(this,"inputChanged",a);this.clearError();this.updatePlaceholder()}},{key:"onMouseDown",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"deleteText",value:function(a){a=a.isRange?a:new Sf.Range(a);
if(!a.isEmpty())return a=a.subtract({start:{row:0,column:0},end:{row:0,column:this.label.length}})[0],zb._get(Object.getPrototypeOf(l.prototype),"deleteText",this).call(this,a)}},{key:"addInputToHistory",value:function(a){var f=this.inputHistory,m=f.items;if(Sf.arr.last(m)!==a){m.push(a);m.length>f.max&&(f.items=m=m.slice(-f.max));f.index=m.length-1;if(!this.allowDuplicatesInHistory)for(m=f.items.length-1;m--;)f.items[m]===a&&(f.items.splice(m,1),f.index--);this.historyId&&this.constructor.addHistoryToLocalStorage(this.historyId,
f)}}},{key:"browseHistory",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return f=a.inputHistory.items.map(function(v,y){return{isListItem:!0,string:v,value:y}}).reverse(),u.yield(a.world().filterableListPrompt("Choose item:",f,{commands:[a.histEditCommandForHistBrowse()]}),2);m=u.yieldResult;q=$jscomp.makeIterator(m.selected);r=q.next().value;"number"===typeof r&&a.setAndShowHistItem(r);a.focus();u.jumpToEnd()})}},{key:"histEditCommandForHistBrowse",
value:function(){var a=this;return{name:"edit history "+this.historyId,exec:function(f){var m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return m=a.inputHistory.items.slice().reverse(),v.yield(f.world().editListPrompt("edit history "+a.historyId,m),2);q=v.yieldResult;r=q.status;u=q.list;if("canceled"===r)return v.return(!0);m=m.filter(function(y){return y.isListItem?u.includes(y.value):u.includes(y)});a.inputHistory=Object.assign({},a.inputHistory,{items:m});
f.get("list").items=m.map(function(y,z){return{isListItem:!0,string:y,value:z}}).reverse();return v.return(!0)})}}}},{key:"setAndShowHistItem",value:function(a){var f=this.inputHistory,m=f.items,q=m.length-1;Sf.num.between(a,0,q+1)?f.index=a:f.index=a=q;this.input!==m[a]&&"undefined"!==typeof m[a]&&(this.input=m[a])}},{key:"showHistItem",value:function(a){a=a||"next";var f=this.inputHistory,m=f.items,q=m.length-1,r=f.index;Sf.num.between(r,0,q+1)||(f.index=r=q);if(this.input!==m[r]&&"undefined"!==
typeof m[r])this.input=m[r];else{if("next"===a){if(r>q)return;r=++f.index}else{if(0>=r)return;r=--f.index}this.input=m[r]||""}}},{key:"commands",get:function(){var a=this;return[{name:"change placeholder",exec:function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("Enter Placeholder:",{input:a.placeholder}),2);if(f=m.yieldResult)a.placeholder=f;m.jumpToEnd()})}},{name:"accept input",exec:function(){a.acceptInput();return!0}},
{name:"show previous input from history",exec:function(){a.showHistItem("prev");return!0}},{name:"show next input from history",exec:function(){a.showHistItem("next");return!0}},{name:"browse history",exec:function(){a.browseHistory();return!0}},{name:"remove items from history",exec:function(f){var m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return m=f.inputHistory,q=m.items.map(function(y,z){return{isListItem:!0,string:y,value:z}}).reverse(),v.yield(f.world().filterableListPrompt("Choose items to delete:",
q,{multiSelect:!0}),2);r=v.yieldResult;u=r.selected;Sf.arr.sort(u).reverse().forEach(function(y){y<m.index&&m.index--;m.items.splice(y,1)});f.inputHistory=m;return v.return(!0)})}}].concat(zb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"},{keys:"Up|Ctrl-Up|Alt-P",command:"show previous input from history"},
{keys:"Down|Ctrl-Down|Alt-N",command:"show next input from history"},{keys:"Alt-H",command:"browse history"},{keys:"Alt-Shift-H",command:"remove items from history"}])}},{key:"htmlExport_transformNode",value:function(a){var f=a.ownerDocument.createElement("input"),m=a.querySelector(".newtext-text-layer.actual");f.id=a.id;f.className=a.className;f.style=a.style.cssText;Object.assign(f.style,Sf.obj.select(m.style,"padding font-family font-weight font-style text-decoration font-size color".split(" ")));
f.placeholder=this.placeholder;f.type="text";f.autocomplete=f.name=this.name.replace(/[\s"]/g,"-");return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InputLine"}},{key:"getHistoryFromLocalSorage",value:function(a){if("undefined"===typeof localStorage)return null;try{var f=localStorage.getItem("lively.morphic-inputline-"+a);return f?JSON.parse(f):null}catch(m){return null}}},{key:"addHistoryToLocalStorage",value:function(a,f){if("undefined"!==typeof localStorage)try{localStorage.setItem("lively.morphic-inputline-"+
a,JSON.stringify(f))}catch(m){console.error(m)}}},{key:"histories",get:function(){this._histories||(this._histories=new Map);return this._histories}},{key:"getHistory",value:function(a){var f=this.histories.get(a);if(f)return f;f=this.getHistoryFromLocalSorage(a)||{items:[],max:50,index:0};this.histories.set(a,f);return f}},{key:"setHistory",value:function(a,f){f=void 0===f?{items:[],max:50,index:0}:f;this.histories.set(a,f);this.addHistoryToLocalStorage(a,f);return f}},{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},
fixedHeight:{defaultValue:!0},extent:{defaultValue:Sf.pt(100,20)},padding:{defaultValue:Sf.Rectangle.inset(2,4)},clipMode:{defaultValue:"hidden"},lineWrapping:{defaultValue:!1},historyId:{defaultValue:null},clearOnInput:{defaultValue:!1},label:{after:["textAndAttributes","extent","padding","submorphs"],defaultValue:"",set:function(a){var f=this;this.setProperty("label",a);this.textString.startsWith(a)||Sf.noUpdate(function(){f.textString=a+f.input})}},input:{after:["label"],derived:!0,get:function(){return this.textString.slice(this.label.length)},
set:function(a){this.textString=this.label+(a?String(a):"");this.updatePlaceholder()}},placeholder:{after:["submorphs","label","defaultTextStyle"],dervied:!0,get:function(){var a=this.getSubmorphNamed("placeholder");return a?a.value:null},set:function(a){var f=this.getSubmorphNamed("placeholder");a?f?(f.defaultTextStyle=Object.assign({},this.defaultTextStyle,{fontColor:Sf.Color.gray}),f.value=a):this.addMorph(Sf.Text.makeLabel(a,Object.assign({},this.defaultTextStyle,{name:"placeholder",reactsToPointer:!1,
fontColor:Sf.Color.gray}))):f&&f.remove();this.updatePlaceholder()}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:466,end:14853})}(Sf.Text);tT=Sf.InputLine;var $F=wa("bk",tT),ly=function(b){var e=lively.FreezerRuntime.recorderFor("lively.morphic/text/input-line.js"),l=e.hasOwnProperty("PasswordInputLine")&&
"function"===typeof e.PasswordInputLine?e.PasswordInputLine:e.PasswordInputLine=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onChange",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);"borderRadius"==a.prop&&this.updateHtml(this.input)}},{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,a);this.onLoad()}},{key:"onChange",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);["fill","borderRadius"].includes(a.prop)&&this.updateHtml(this.input)}},{key:"onLoad",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.whenRendered(),2);a.ensureInputNode().then(function(m){a.updateHtml(a.input);m.onkeydown=function(q){return a.env.eventDispatcher.dispatchDOMEvent(q,
a,"onKeyDown")};m.onkeyup=function(q){return a.env.eventDispatcher.dispatchDOMEvent(q,a,"onKeyUp")}});f.jumpToEnd()})}},{key:"onMouseDown",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this._errorIcon&&this._errorIcon.remove()}},{key:"onAfterRender",value:function(a){this.ensureInputNode()}},{key:"ensureInputNode",value:function(){var a=this;return this.whenRendered().then(function(){var f=a.domNode;f.parentNode&&"INPUT"==f.parentNode.tagName&&(f.parentNode.remove(),
f=a.env.renderer.getNodeForMorph(a),f.insertBefore(a.domNode,f.firstChild));return a.domNode})}},{key:"onKeyDown",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a);if(this.input!=this.lastInput)this.onInputChanged(this.input);this.lastInput=this.input}},{key:"focus",value:function(){zb._get(Object.getPrototypeOf(l.prototype),"focus",this).call(this);this.domNode&&this.domNode.focus()}},{key:"onFocus",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),
"onFocus",this).call(this,a);this._originalShadow||(this._originalShadow=this.dropShadow,this.highlightWhenFocused&&this.animate({dropShadow:this.haloShadow,duration:200}))}},{key:"onBlur",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.highlightWhenFocused&&this.animate({dropShadow:this._originalShadow||null,duration:200});this._originalShadow=null}},{key:"indicateError",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==
m.nextAddress)return f.borderWidth=3,f.borderColor=Sf.Color.red,f._errorIcon=f.addMorph(f._errorIcon||Sf.morph({type:"label",value:[" "+a,{fontSize:18}," ",{}].concat($jscomp.arrayFromIterable(Sf.Icon.textAttribute("exclamation-circle",{paddingTop:"2px"}))),fontSize:20,fontColor:Sf.Color.red,opacity:0,reactsToPointer:!1,fill:Sf.Color.white.withA(.9)})),m.yield(f.whenRendered(),2);f._errorIcon.opacity=1;f._errorIcon.rightCenter=f.innerBounds().insetBy(10).rightCenter();m.jumpToEnd()})}},{key:"clearError",
value:function(){this._errorIcon&&(this._errorIcon&&this._errorIcon.remove(),this._errorIcon=null,this.borderColor=Sf.Color.transparent)}},{key:"acceptInput",value:function(){var a=this.input;Sf.signal(this,"inputAccepted",a);return a}},{key:"onInputChanged",value:function(a){this.clearError();Sf.signal(this,"inputChanged",a)}},{key:"updateHtml",value:function(a){var f=this,m,q,r,u,v,y,z,B,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return m=f,q=m.fontSize,
r=m.fontFamily,u=m.padding,v=m.placeholder,y=void 0===m.fill?xf.white:m.fill,z=m.borderRadius,B=u.top(),C=u.right(),G=u.bottom(),F=u.left(),L.yield(f.ensureInputNode(),2);N=L.yieldResult;N.setAttribute("type","password");N.setAttribute("placeholder",v);N.setAttribute("value",a);Object.assign(N.style,{position:"absolute",width:"calc(100% - "+F+"px - "+C+"px)","border-width":0,outline:"none","border-radius":z.valueOf()+"px",background:y.toString(),padding:B+"px "+C+"px "+G+"px "+F+"px","font-size":q+
"px","font-family":""+r});L.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept input",exec:function(){a.acceptInput();return!0}}].concat(zb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept input"},{keys:{mac:"Meta-S",win:"Ctrl-S"},command:"accept input"}])}},{key:"htmlExport_transformNode",value:function(a){var f=a.ownerDocument,
m=f.createElement("div"),q=a.querySelector("input");f=f.createElement("input");q.childNodes[0]&&"INPUT"===q.childNodes[0].tagName&&(q=q.childNodes[0]);f.id=a.id;f.className=a.className;m.style=a.style.cssText;Object.assign(f.style,Sf.obj.select(q.style,"padding font-family font-weight font-style text-decoration font-size border-radius color".split(" ")));f.style.position="absolute";f.style.width=a.style.width;f.style.height=a.style.height;f.style["border-width"]=a.style["border-width"];f.placeholder=
this.placeholder;f.type="password";f.autocomplete=f.name=this.name.replace(/[\s"]/g,"-");m.appendChild(f);m.appendChild(a.childNodes[1]);return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordInputLine"}},{key:"properties",get:function(){return{extent:{defaultValue:Sf.pt(100,20)},html:{derived:!0,initialize:function(){},get:function(){return""},set:function(a){}},highlightWhenFocused:{defaultValue:!0},haloShadow:{type:"Shadow"},domNodeTagName:{readOnly:!0,get:function(){return"input"}},
domNodeStyle:{readOnly:!0,get:function(){return"background: grey"}},input:{derived:!0,after:["domNode"],get:function(){return this.domNode&&this.domNode.value||""},set:function(a){this.domNode.value=a;this.updateHtml(this.input)}},placeholder:{after:["domNode"],set:function(a){this.setProperty("placeholder",a);this.updateHtml(this.input)}},fontSize:{defaultValue:12,after:["input"],set:function(a){this.setProperty("fontSize",a);this.updateHtml(this.input)}},fontFamily:{defaultValue:"sans-serif",after:["input"],
set:function(a){this.setProperty("fontFamily",a);this.updateHtml(this.input)}},padding:{defaultValue:Sf.Rectangle.inset(2),after:["input"],set:function(a){this.setProperty("padding",a);this.updateHtml(this.input)}}}}}],e,{pathInPackage:function(){return"text/input-line.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.morphic",version:"0.1.2"}}},{start:14929,end:21857})}(Sf.HTMLMorph);
Sf.PasswordInputLine=ly;Sf.PasswordInputLine=ly;Sf.PasswordInputLine=ly;Sf.default=tT;var bf=lively.FreezerRuntime.recorderFor("lively.morphic/index.js");bf.default=vk;bf.config=vk;Object.assign(bf,Vma);Object.assign(bf,Xna);Object.assign(bf,boa);Object.assign(bf,coa);Object.assign(bf,Zna);Object.assign(bf,Aoa);Object.assign(bf,Cha);Object.assign(bf,G6);bf.StyleSheet=Eu;bf.StyleSheet=Eu;bf.ShadowObject=kr;bf.ShadowObject=kr;bf.addOrChangeCSSDeclaration=oi;bf.addOrChangeCSSDeclaration=oi;bf.addOrChangeLinkedCSS=
Iq;bf.addOrChangeLinkedCSS=Iq;bf.easings=lr;bf.easings=lr;bf.stringToEasing=tp;bf.stringToEasing=tp;Object.assign(bf,Wma);bf.Icon=Wn;bf.Icon=Wn;bf.loadMorphFromSnapshot=bu;bf.loadMorphFromSnapshot=bu;Object.assign(bf,Xma);bf.World=Wv;bf.Hand=IC;bf.Morph=Mj;bf.Image=pA;bf.Ellipse=oA;bf.Triangle=DC;bf.Path=qA;bf.Polygon=EC;bf.LineMorph=FC;bf.Text=Qs;bf.Label=Rs;bf.HTMLMorph=ky;bf.InputLine=$F;bf.PasswordInputLine=ly;bf.InputLine=$F;bf.InputLine=$F;bf.PasswordInputLine=ly;bf.PasswordInputLine=ly;bf.locateClass=
Eq;bf.morph=sb;bf.addClassMappings=kb;bf.inspect=Uz;bf.touchInputDevice=Mp;bf.addClassMappings({default:bf.Morph,world:bf.World,hand:bf.Hand,image:bf.Image,ellipse:bf.Ellipse,triangle:bf.Triangle,path:bf.Path,text:bf.Text,input:bf.InputLine,label:bf.Label,polygon:bf.Polygon,line:bf.LineMorph,html:bf.HTMLMorph});bf.morph=sb;bf.morph=sb;bf.inspect=Uz;bf.inspect=Uz;bf.touchInputDevice=Mp;bf.touchInputDevice=Mp;var Boa=Object.freeze({__proto__:null,config:vk,StyleSheet:Eu,ShadowObject:kr,addOrChangeCSSDeclaration:oi,
addOrChangeLinkedCSS:Iq,easings:lr,stringToEasing:tp,Icon:Wn,loadMorphFromSnapshot:bu,InputLine:$F,PasswordInputLine:ly,morph:sb,inspect:Uz,touchInputDevice:Mp,Morph:Mj,Ellipse:oA,Triangle:DC,Image:pA,PathPoint:LF,Path:qA,Polygon:EC,LineMorph:FC,World:Wv,Hand:IC,Text:Qs,Label:Rs,Anchor:JC,HTMLMorph:ky,IFrameMorph:ZF,MorphicEnv:ar,CustomLayout:OF,SnapLayout:PF,VerticalLayout:hy,HorizontalLayout:Os,ProportionalLayout:QF,CenteredTilingLayout:RF,TilingLayout:SF,CellGroup:TF,LayoutColumn:UF,LayoutRow:VF,
LayoutCell:WF,GridLayout:iy,TooltipViewer:GC,Tooltip:rA,MorphicDB:Bu}),Ll=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js");Ll.Morph=Mj;Ll.stringToEasing=tp;Ll.easings=lr;Ll.pt=nf;Ll.num=Gk;Ll.Path=Cg;Ll.promise=oe;Ll.fun=Zk;var c7=function(b){var e=lively.FreezerRuntime.recorderFor("ModuleProgress/index.js"),l=e.hasOwnProperty("ModuleProgress")&&"function"===typeof e.ModuleProgress?e.ModuleProgress:e.ModuleProgress=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:"fadeIntoBack",value:function(){this.animate({blur:5})}},{key:"relayout",value:function(){!this.isComponent&&Ll.Path("owner.isWorld").get(this)&&(this.bottomCenter=$world.visibleBounds().center().subXY(0,100))}},{key:"reset",value:function(){var a=this.getAllNamed(/stage/);this.blur=0;this.stages=new Map(a.map(function(f){return[f,"not loaded"]}));this.updateProgressVisualization();this.getAllNamed(/label/).map(function(f){f._cachedTextBounds=null;f.fit()})}},{key:"updateProgressBar",
value:function(){if(this._lastWidth){this.relayout();var a=this.get("progress path"),f=Ll.stringToEasing(Ll.easings.inOutExpo)(Ll.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3);a.width=Ll.num.interpolate(f,this._lastWidth,this._currentProgress)}}},{key:"fastLoadTest",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){1==u.nextAddress&&(a.reset(),f="lively.lang lively.ast lively.source-transform lively.classes lively.vm lively.modules lively.user lively.storage lively.morphic".split(" "),
m=$jscomp.makeIterator(f),q=m.next());if(3!=u.nextAddress){if(q.done)return u.jumpTo(0);r=q.value;a.finishPackage({packageName:r,loaded:!0});return u.yield(Ll.promise.delay(200),3)}q=m.next();return u.jumpTo(2)})}},{key:"finishPackage",value:function(a){var f=this,m=a.frozen,q=a.loaded;a="stage "+a.packageName.replace("lively.","");a=this.get(a);m&&this.stages.set(a,"frozen");q&&this.stages.set(a,"loaded");Ll.fun.debounceNamed("update progress",200,function(){f.updateProgressVisualization()})()}},
{key:"updateProgressVisualization",value:function(){var a=this,f=this.getSubmorphNamed("progress path"),m=this.getAllNamed(/stage/),q=m[0];m.forEach(function(r){var u=r.get("checkmark"),v=r.get("frozen indicator"),y=r.get("icon");r=a.stages.get(r);if("not loaded"!=r){q=u;if("loaded"==r){if(u.visible)return;u.animate({duration:300,visible:!0})}if("frozen"==r){if(v.visible)return;v.animate({duration:300,visible:!0})}y.opacity=1}else u.visible=!1,v.visible=!1,y.opacity=.2});m=this.localizePointFrom(Ll.pt(-20,
0),q).x;m=Math.max(20,m-f.left);f.visible=20==m?!1:!0;this._lastWidth=f.width;this._timeStamp=Date.now();this._currentProgress=m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModuleProgress"}},{key:"properties",get:function(){return{stages:{serialize:!1,after:["submorphs"],initialize:function(){var a=this;this.whenRendered().then(function(){a.reset()})}}}}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ModuleProgress",version:"0.1.1-109"}}},{start:192,end:3586})}(Ll.Morph);c7=Ll.ModuleProgress;Ll.default=c7;var og=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js");og.promise=oe;og.fun=Zk;og.num=Gk;og.Icon=Wn;og.stringToEasing=tp;og.easings=lr;og.VerticalLayout=hy;og.ShadowObject=kr;og.HorizontalLayout=Os;og.morph=sb;og.Morph=Mj;og.StyleSheet=Eu;og.Image=pA;og.pt=nf;og.RadialGradient=Vn;og.rect=Ff;og.Rectangle=Pd;og.Color=xf;og.connect=Oe;
(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),l=e.hasOwnProperty("ProgressBar")&&"function"===typeof e.ProgressBar?e.ProgressBar:e.ProgressBar=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"test",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){1==f.nextAddress&&(a.progress=0);if(!(1>a.progress))return f.jumpTo(0);
a.progress+=.1;return f.yield(og.promise.delay(1E3),2)})}},{key:"update",value:function(){var a=this;setTimeout(function(){a.world()||a.stopStepping()},1E3);if(this._lastWidth){var f=this.get("progress path"),m=og.stringToEasing(og.easings.inOutExpo)(og.num.clamp(Date.now()-this._timeStamp,0,1E3)/1E3),q=this._targetWidth;f.topLeft=og.pt(0,0);f.height=this.height;f.width=this._lastWidth>q?q:og.num.interpolate(m,this._lastWidth,q)}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ProgressBar"}},
{key:"properties",get:function(){return{progress:{after:["submorphs"],initialize:function(){this.progress=0;this.startStepping("update")},set:function(a){var f=this.get("progress path");this._lastWidth=Math.max(f.width,this._targetWidth,1);this._targetWidth=this.width*a;this._timeStamp=Date.now();this.setProperty("progress",a)}},fill:{defaultValue:og.Color.darkGray},borderRadius:{defaultValue:5},clipMode:{defaultValue:"hidden"},submorphs:{initialize:function(){this.submorphs=[{name:"progress path",
fill:og.Color.orange,width:1}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:336,end:1943})})(og.Morph);var uT=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/loading-indicator.js"),l=e.hasOwnProperty("LoadingIndicator")&&"function"===typeof e.LoadingIndicator?
e.LoadingIndicator:e.LoadingIndicator=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);var f=this.ui;a=f.label;var m=f.closeButton;if(f=f.progressBar)f.opacity=0,f.isLayoutable=!1;og.connect(this,"extent",this,"relayout");
og.connect(a,"extent",this,"relayout");og.connect(a,"value",this,"updateLabel");og.connect(a,"fontSize",this,"updateLabel");og.connect(a,"fontFamily",this,"updateLabel");og.connect(m,"fire",this,"remove");m.fit();this.relayout()}},{key:"animateProgress",value:function(a){var f=this,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return m=f.ui,(q=m.progressBar)||(q=f.addMorph(new og.ProgressBar({name:"progress bar"}))),r=f.center,0==a?(q.isLayoutable=!1,q.opacity=
0):(q.isLayoutable=!0,q.opacity=1),q.progress=a,u.yield(f.whenRendered(),2);f.center=r;u.jumpToEnd()})}},{key:"hideSpinner",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(!a.ui.spinner)return f.return();a.ui.spinner.visible=!1;a.ui.spinner.width=50;a.ui.spinner.remove();return f.yield(a.whenRendered(),0)})}},{key:"isEpiMorph",get:function(){return!0}},{key:"updateLabel",value:function(){var a=this.center;this.relayout();this.center=a}},{key:"relayout",
value:function(){og.Rectangle.inset(20,12);var a=this.ui,f=a.label,m=a.progressBar,q=a.status;a.closeButton.topRight=this.innerBounds().insetBy(2).topRight();m.extent=og.pt(f.owner.bounds().width,5);q[q.visible?"top":"bottom"]=f.height}},{key:"onHoverIn",value:function(a){this.ui.closeButton.visible=!0}},{key:"onHoverOut",value:function(a){this.ui.closeButton.visible=!1}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LoadingIndicator"}},{key:"open",value:function(a,f){var m=og.morph(Object.assign({type:og.LoadingIndicator},
f,{label:a}));if(f&&f.animated)return og.promise.delay(f.delay||0).then(function(){m.openInWorld();m.opacity=0;m.whenRendered().then(function(){m.ui.spinner&&(m.ui.spinner.visible=!0);m.top+=25;m.animate({top:m.top-25,easing:og.easings.outExpo});m.animate({opacity:1,easing:og.easings.outExpo})})}),m;m.openInWorld();m.ui.label.whenRendered().then(function(){m.ui.spinner&&(m.ui.spinner.visible=!0);m.ui.label.fit()});return m}},{key:"forPromise",value:function(a,f,m){var q=this.open(f,m);og.promise.finally(Promise.resolve(a),
function(){return q.remove()});return q}},{key:"runFn",value:function(a,f,m){var q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return r=q.open(f,m),u.yield(r.whenRendered(),2);case 2:return u.setFinallyBlock(3),u.yield(a(r),5);case 5:return u.return(u.yieldResult);case 3:u.enterFinallyBlock(),r.remove(),u.leaveFinallyBlock(0)}})}},{key:"properties",get:function(){return{name:{defaultValue:"LoadingIndicator"},styleClasses:{defaultValue:["Halo"]},
hasFixedPosition:{defaultValue:!0},ui:{derived:!0,get:function(){return{progressBar:this.getSubmorphNamed("progress bar"),closeButton:this.getSubmorphNamed("closeButton"),spinner:this.getSubmorphNamed("spinner"),label:this.getSubmorphNamed("ld label"),status:this.getSubmorphNamed("status")}}},progress:{derived:!0,set:function(a){this.animateProgress(og.num.clamp(a,0,1))}},label:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.value},set:function(a){this.ui.label.value=a}},status:{derived:!0,
after:["submorphs"],defaultValue:!1,get:function(){return this.getSubmorphNamed("status").value},set:function(a){var f=this.ui.status;a?(f.visible=!0,f.value=a):(f.visible=!1,f.value="");this.relayout()}},fontFamily:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontFamily},set:function(a){this.ui.label.fontFamily=a}},fontSize:{derived:!0,after:["submorphs"],get:function(){return this.ui.label.fontSize},set:function(a){this.ui.label.fontSize=a}},loadingImage:{defaultValue:System.decanonicalize("lively.morphic/")+
"lively-web-logo-small-animate.svg"},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/loading indicator"}}},submorphs:{initialize:function(){this.submorphs=[{name:"wrapper",submorphs:[{type:"html",name:"spinner",extent:og.pt(86.2,70.2)},{type:"label",name:"ld label",extent:og.pt(20,100),submorphs:[{type:"label",name:"status"}]}]},{type:"button",name:"closeButton",label:og.Icon.textAttribute("times")},{type:og.ProgressBar,name:"progress bar"}]}}}}}],e,{pathInPackage:function(){return"loading-indicator.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2099,end:8211})}(og.Morph);uT=og.LoadingIndicator;var MC=wa("L",uT);og.default=uT;var Kh=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js");Kh.Morph=Mj;Kh.World=Wv;Kh.HorizontalLayout=Os;Kh.morph=sb;Kh.MorphicDB=Bu;Kh.graph=Xv;Kh.promise=oe;Kh.date=iu;Kh.string=Hg;Kh.arr=
Qe;Kh.Color=xf;Kh.pt=nf;Kh.LoadingIndicator=MC;Kh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Kh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
Kh.missingSVG='data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
(function(b){var e=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),l=e.hasOwnProperty("WorldVersion")&&"function"===typeof e.WorldVersion?e.WorldVersion:e.WorldVersion=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"update",value:function(){var a=$jscomp.makeIterator(this.submorphs),f=a.next().value;a=a.next().value;f.imageUrl=this.commit.preview||Kh.missingSVG;a.textAndAttributes=
this.info;a.fontColor=this.selected?Kh.Color.white:Kh.Color.darkGray}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersion"}},{key:"properties",get:function(){return{commit:{},fill:{defaultValue:Kh.Color.transparent},info:{derived:!0,get:function(){var a=this.commit,f=a.message,m=a.name,q=a.timestamp;return[a._id.slice(0,6)+" ",{fontWeight:"bold"},Kh.string.truncate(f.split("\n")[0],40)+" ",{}," ("+m+" ",{},""+Kh.date.format(new Date(q),"yyyy-mm-dd HH:MM Z"),{}]}},selected:{set:function(a){this.setProperty("selected",
a);this.update()}},layout:{initialize:function(){this.layout=new Kh.HorizontalLayout({align:"center",spacing:5})}},submorphs:{initialize:function(){this.submorphs=[{type:"image",extent:Kh.pt(30,30),name:"preview",reactsToPointer:!1},{reactsToPointer:!1,type:"label",fill:null,name:"commit info",fontFamily:"Nunito",fontColor:Kh.Color.gray}]}}}}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:1327,end:2884})})(Kh.Morph);var d7=function(b){var e=lively.FreezerRuntime.recorderFor("WorldVersionViewer/index.js"),l=e.hasOwnProperty("WorldVersionViewer")&&"function"===typeof e.WorldVersionViewer?e.WorldVersionViewer:e.WorldVersionViewer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"reset",value:function(){this.getSubmorphNamed("version list").items=
[];this.getSubmorphNamed("version list spinner").visible=!1}},{key:"onMouseDown",value:function(a){switch(a.targetMorph.name){case "visit button":this.visitSelectedCommit();break;case "revert button":this.revertToSelectedCommit()}}},{key:"visitSelectedCommit",value:function(){var a=this,f,m,q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){switch(B.nextAddress){case 1:return f=a.get("version list").selection,m=Kh.LoadingIndicator.open("Loading "+f.name+"..."),q=$world,r=a.db||
Kh.MorphicDB.default,u=f._id,B.setCatchFinallyBlocks(2,3),u?B.yield(Kh.World.loadFromCommit(u,void 0,{morphicDB:r}),8):B.yield(Kh.World.loadFromDB(f.name,f.ref,void 0,{morphicDB:r}),7);case 7:v=B.yieldResult;B.jumpTo(6);break;case 8:v=B.yieldResult;case 6:return y=v,B.return(y);case 3:B.enterFinallyBlock();m.remove();B.leaveFinallyBlock(0);break;case 2:z=B.enterCatchBlock(),console.error(z),q.showError("Error loading world:"+z),B.jumpTo(3)}})}},{key:"revertToSelectedCommit",value:function(){var a=
this,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){f=a.get("version list").selection;if(!f)return y.return();m=a.db||Kh.MorphicDB.default;q=f;r=q._id;u=q.name;v=q.type;return y.yield(m.revert(v,u,r,"HEAD"),2)}return y.return(a.initializeFromStartCommit(f,m,{showRevertButton:!0}))})}},{key:"initializeFromStartCommit",value:function(a,f,m){f=void 0===f?Kh.MorphicDB.default:f;m=void 0===m?{}:m;var q=this,r,u,v,y,z,B,C,G,F,N,L,S,ha,qa,D,P,J,M,X,T,fa,Ra,
gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ea){switch(ea.nextAddress){case 1:return r=m,u=void 0===r.showRefs?!0:r.showRefs,v=q.startCommit=a,y=v._id,z=v.type,B=v.name,C=q.getSubmorphNamed("version list spinner"),C.visible=!0,C.center=q.get("version list").center,q.db=f,ea.yield(f.history(z,B),2);case 2:G=ea.yieldResult,F=G.refs,N=G.history,L=y,S=Kh.graph.invert(N),ha=Kh.graph.hull(S,y),qa={_id:!0},D=[a],P=$jscomp.makeIterator(ha),J=P.next();case 3:if(J.done)return T=Kh.arr.max(D,
function(aa){return aa.timestamp}),L=T._id,ea.yield(f.log(L,void 0,!0),7);M=J.value;return ea.yield(f.log(M,void 0,!0,qa),6);case 6:X=ea.yieldResult;D.push.apply(D,$jscomp.arrayFromIterable(X));X.forEach(function(aa){return qa[aa._id]=!0});J=P.next();ea.jumpTo(3);break;case 7:fa=ea.yieldResult;if(u)for(Ra in F);gb=fa.map(function(aa){var ia=new Kh.WorldVersion({reactsToPointer:!1,commit:aa});ia.update();return{isListItem:!0,morph:ia,value:aa}});q.get("version list").items=gb;C.visible=!1;ea.jumpToEnd()}})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldVersionViewer"}}],e,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"WorldVersionViewer",version:"0.1.1-34"}}},{start:2901,end:6778})}(Kh.Morph);d7=Kh.WorldVersionViewer;Kh.default=d7;var ih=lively.FreezerRuntime.recorderFor("lively.components/buttons.js");ih.Morph=
Mj;ih.morph=sb;ih.Icon=Wn;ih.touchInputDevice=Mp;ih.Rectangle=Pd;ih.LinearGradient=Il;ih.Color=xf;ih.pt=nf;ih.signal=oj;ih.connect=Oe;ih.arr=Qe;ih.obj=lf;ih.Closure=Fi;var NC=wa("bn",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=e.hasOwnProperty("Button")&&"function"===typeof e.Button?e.Button:e.Button=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),
value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"__additionally_serialize__",value:function(a,f,m,q){zb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",this).call(this,a,f,m,q);q("fontSize",this.fontSize);this.label!=this.labelMorph.value&&q("label",this.labelMorph.value)}},{key:"isButton",get:function(){return!0}},{key:"enable",value:function(){this.deactivated=!1}},{key:"disable",value:function(){this.deactivated=
!0}},{key:"onChange",value:function(a){var f=a.prop;if(this.label)switch(f){case "extent":case "fontSize":case "fontFamily":this.relayout();break;case "padding":this.fit()}return zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"onSubmorphChange",value:function(a,f){f===this.labelMorph&&"extent"===a.prop&&this.relayout();return zb._get(Object.getPrototypeOf(l.prototype),"onSubmorphChange",this).call(this,a,f)}},{key:"fitLabelMorph",value:function(){var a=this;this.labelMorph.whenFontLoaded().then(function(){a.labelMorph.invalidateTextLayout();
a.labelMorph.fit()})}},{key:"relayout",value:function(){var a=this.labelMorph;if(a&&!this._relayouting){this._relayouting=!0;try{var f=this.padding,m=f.top(),q=f.bottom(),r=f.left(),u=f.right(),v=a.height+m+q,y=a.width+r+u;v>this.height&&(this.height=v);y>this.width&&(this.width=y);var z=this.innerBounds().insetByRect(f);a.center=z.center().subPt(this.origin)}finally{this._relayouting=!1}}}},{key:"fit",value:function(){var a=this.padding,f=this.labelMorph;f.fit();this.extent=a.bottomLeft().addPt(a.bottomRight()).addPt(f.extent);
this.relayout();return this}},{key:"trigger",value:function(){try{ih.signal(this,"fire"),"function"===typeof this.action&&this.action()}catch(f){var a=this.world();a?a.logError(f):console.error(f)}}},{key:"considerPress",value:function(a){return ih.touchInputDevice?!0:this.innerBoundsContainsPoint(a.positionIn(this))}},{key:"onMouseDown",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);a.isAltDown()||this.deactivated||!this.considerPress(a)||(this.pressed=
{originalFill:this.fill})}},{key:"onMouseUp",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onMouseUp",this).call(this,a);a.isClickTarget(this)&&this.pressed&&(this.trigger(),this.pressed=null)}},{key:"onDragStart",value:function(a){ih.touchInputDevice?(this.draggable=!0,this.pressed=null):zb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a)}},{key:"onDrag",value:function(a){}},{key:"onHoverOut",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",
this).call(this,a);!ih.touchInputDevice&&this.pressed&&a.isClickTarget(this)&&(this.pressed=null)}},{key:"onHoverIn",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,a);ih.touchInputDevice||this.deactivated||!a.isClickTarget(this)||(this.pressed={originalFill:this.fill})}},{key:"interactivelyChangeLabel",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.world().prompt("edit button label",
{input:a.labelMorph.textString,historyId:"lively.morphic-button-edit-label-hist"}),2);f=m.yieldResult;"string"===typeof f&&(a.label=f);m.jumpToEnd()})}},{key:"menuItems",value:function(){var a=this,f=zb._get(Object.getPrototypeOf(l.prototype),"menuItems",this).call(this);f.unshift({isDivider:!0});f.unshift(["change label",function(){return a.interactivelyChangeLabel()}]);return f}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Button"}},{key:"properties",get:function(){return{padding:{isStyleProp:!0,
defaultValue:ih.Rectangle.inset(5,2)},draggable:{defaultValue:!1},extent:{defaultValue:ih.pt(100,20)},borderColor:{defaultValue:ih.Color.gray},borderWidth:{defaultValue:1},borderRadius:{defaultValue:5},nativeCursor:{defaultValue:"pointer"},fill:{defaultValue:new ih.LinearGradient({stops:[{offset:0,color:ih.Color.white},{offset:1,color:ih.Color.rgb(236,240,241)}],vector:0})},deactivated:{group:"button",defaultValue:!1,after:["labelMorph"],set:function(a){this.setProperty("deactivated",a);this.nativeCursor=
a?"not-allowed":"pointer";this.labelMorph.opacity=a?.3:1}},pressed:{group:"_internal",defaultValue:null,set:function(a){this.getProperty("pressed");this.setProperty("pressed",a)}},fontSize:{group:"button styling",derived:!0,type:"Number",min:4,isStyleProp:!0,after:["label"],set:function(a){this.labelMorph.fontSize=a},get:function(){return this.labelMorph.fontSize}},fontColor:{group:"button styling",derived:!0,isStyleProp:!0,after:["labelMorph"],set:function(a){this.labelMorph.fontColor=a},get:function(){return this.labelMorph.fontColor}},
labelMorph:{group:"_internal",after:["submorphs"],serialize:!1,initialize:function(){this.labelMorph=this.getSubmorphNamed("label")||this.addMorph({type:"label",name:"label",value:"no label yet"})},get:function(){return this.getSubmorphNamed("label")},set:function(a){var f=this.labelMorph;f&&f.remove();a.name="label";a.reactsToPointer=!1;this.addMorphAt(a,0)}},labelWithTextAttributes:{group:"_internal",after:["labelMorph"],derived:!0,get:function(){return this.labelMorph.textAndAttributes},set:function(a){this.labelMorph.textAndAttributes=
a}},label:{group:"button",after:["labelMorph"],isStyleProp:!0,type:"RichText",set:function(a){a.isMorph?(this.setProperty("label",a.value),this.labelMorph=a):(this.setProperty("label",a),this.labelMorph.value=a,this.labelMorph._parametrizedProps&&(this.labelMorph._parametrizedProps.value=a));this.fitLabelMorph()}},fire:{group:"button",derived:!0,readOnly:!0,isSignal:!0},action:{serialize:!1}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:251,end:8293})}(ih.Morph));ih.Button=NC;ih.Button=NC;ih.Button=NC;var aG=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=e.hasOwnProperty("RadioButton")&&"function"===typeof e.RadioButton?e.RadioButton:e.RadioButton=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:"getMaster",value:function(a){return a?"styleguide://SystemPrompts/prompts/buttons/selection/selected":"styleguide://SystemPrompts/prompts/buttons/selection/unselected"}},{key:"reset",value:function(){var a=this.indicator;a.borderWidth=1;a.borderColor=ih.Color.gray;this.selected=!1;ih.connect(a,"onMouseUp",this,"select")}},{key:"morph",get:function(){var a=this.indicator;return this.submorphs.find(function(f){return f!==a})}},{key:"morph",set:function(a){var f=this.indicator;
this.submorphs.forEach(function(m){m!==f&&m.remove()});a.position=ih.pt(50,0);this.addMorph(a)}},{key:"value",get:function(){if(!this.valueFn){try{var a=JSON.parse(this.valueFunctionString)}catch(f){a=this.valueFunctionString}this.valueFn=ih.Closure.fromSource(a).recreateFunc()}return this.morph?this.valueFn(this.morph):void 0}},{key:"onMouseDown",value:function(a){this.select()}},{key:"select",value:function(){this.selected=!0;this.owner.setSelection(this)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"RadioButton"}},{key:"properties",get:function(){return{indicator:{get:function(){return this.getSubmorphNamed("indicator")}},master:{after:["selected"],initialize:function(){this.master={auto:this.getMaster(this.selected)}}},selectionColor:{},selectionStyle:{},selected:{after:["indicator"],defaultValue:!1,set:function(a){var f=this;this.whenRendered().then(function(m){f.master={auto:f.getMaster(a)}});this.setProperty("selected",!!a)}},valueFunctionString:{defaultValue:'"function (morph) { return morph.value; }"',
set:function(a){this.setProperty("valueFunctionString",a.toString());this.valueFn=void 0}},submorphs:{initialize:function(){this.submorphs=[{type:"ellipse",name:"indicator"}]}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8304,end:10681})}(ih.Morph);ih.RadioButton=aG;ih.RadioButton=
aG;ih.RadioButton=aG;var bG=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/buttons.js"),l=e.hasOwnProperty("RadioButtonGroup")&&"function"===typeof e.RadioButtonGroup?e.RadioButtonGroup:e.RadioButtonGroup=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"reset",value:function(){this.submorphs.forEach(function(a){return a.reset()});this.layout.layoutableSubmorphs[0].selected=!0}},
{key:"removeAllButtons",value:function(){this.removeAllMorphs();this.height=10}},{key:"addButton",value:function(a,f){var m=new ih.RadioButton;m.reset();m.morph=a;void 0!=f&&(m.internalValue=f,m.valueFunctionString="function (morph) { return morph.owner.internalValue; }");this.addMorph(m);return m}},{key:"setSelection",value:function(a){this.submorphs.forEach(function(f){f!==a&&(f.selected=!1)});a.selected=!0}},{key:"selectedButton",get:function(){return this.submorphs.find(function(a){return a.selected})}},
{key:"value",get:function(){var a=this.selectedButton;return a?a.value:null}},{key:"value",set:function(a){var f=this.submorphs.find(function(m){try{return m.value===a}catch(q){return!1}});f?f.select():this.setSelection(null)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RadioButtonGroup"}},{key:"properties",get:function(){return{choices:{derived:!0,defaultValue:[],get:function(){return this.submorphs.map(function(a){return a.value})},set:function(a){var f=this;this.removeAllButtons();
if(ih.obj.isArray(a)){if(0==a.length)return;a.forEach(function(m){f.addButton(ih.morph({name:"label",type:"label",value:m,reactsToPointer:!1}))})}else{a=[].concat($jscomp.arrayFromIterable(a.entries()));if(0==a.length)return;a.forEach(function(m){var q=$jscomp.makeIterator(m);m=q.next().value;q=q.next().value;f.addButton(ih.morph({name:"label",type:"label",value:m,reactsToPointer:!1}),q)})}this.submorphs[0].master.whenApplied().then(function(){return f.setSelection(f.submorphs[0])})},value:{derived:!0,
after:["submorphs"],get:function(){var a=this.selectedButton;return a?a.value:null},set:function(a){var f=this.submorphs.find(function(m){try{return m.value===a}catch(q){return!1}});f?f.select():this.setSelection(null)}}}}}}],e,{pathInPackage:function(){return"buttons.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10690,end:13604})}(ih.Morph);
ih.RadioButtonGroup=bG;ih.RadioButtonGroup=bG;ih.RadioButtonGroup=bG;var Coa=Object.freeze({__proto__:null,Button:NC,RadioButton:aG,RadioButtonGroup:bG}),Qc=lively.FreezerRuntime.recorderFor("lively.components/list.js");Qc.asItem=oJ;Qc.Morph=Mj;Qc.Text=Qs;Qc.StyleSheet=Eu;Qc.Label=Rs;Qc.Icon=Wn;Qc.morph=sb;Qc.touchInputDevice=Mp;Qc.pt=nf;Qc.LinearGradient=Il;Qc.Color=xf;Qc.Rectangle=Pd;Qc.rect=Ff;Qc.arr=Qe;Qc.Path=Cg;Qc.string=Hg;Qc.signal=oj;Qc.noUpdate=Ct;Qc.once=kp;Qc.Button=NC;Qc.bowser=ir;Qc.asItem=
oJ;Qc.asItem=oJ;var XL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("ListItemMorph")&&"function"===typeof e.ListItemMorph?e.ListItemMorph:e.ListItemMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"displayItem",value:function(a,f,m,q,r,u,v){u=void 0===u?!1:u;var y=a.morph,z=y?"":a.label||a.string||"no item.string";a.annotation?this.valueAndAnnotation=
{value:z,annotation:a.annotation}:"string"===typeof z?this.textString=z:this.value=z;this.tooltip=a.tooltip||this.tooltip||this.textString;this.itemIndex=f;this.position=r;if(v){f=v.fontFamily;r=v.selectionColor;z=v.selectionFontColor;var B=v.nonSelectionFontColor,C=v.borderRadius,G=v.fontSize;v=v.padding;z&&this.selectionFontColor!==z&&(this.selectionFontColor=z);B&&this.nonSelectionFontColor!==B&&(this.nonSelectionFontColor=B);r&&this.selectionColor!==r&&(this.selectionColor=r);C&&C!=this.borderRadius&&
(this.borderRadius=C);G&&this.fontSize!==G&&(this.fontSize=G);f&&this.fontFamily!==f&&(this.fontFamily=f);v&&!this.padding.equals(v)&&(this.padding=v)}a.autoFit&&(y.width=m);this.extent=Qc.pt(y?Math.max(y.width,m):m,q);y?(a=y.getTransform().copy(),this.submorphs=[y],y.setTransform(a),y.position=Qc.pt(0,0)):this.submorphs.length&&(this.submorphs=[]);this.isSelected=u}},{key:"onDragStart",value:function(a){var f=this.owner.owner;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};
if(!f.multiSelect||!f.multiSelectViaDrag)f.onItemMorphDragged(a,this)}},{key:"onMouseDown",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this.owner.owner.clickOnItem(a)}},{key:"onDrag",value:function(a){var f=this.owner.owner;if(f.multiSelect&&f.multiSelectViaDrag){a=a.hand.morphBeneath(a.position);var m=f.selectedIndexes,q=f.itemMorphs;a!==this&&q.includes(a)&&(this._dragState.sourceIsSelected&&!a.isSelected?(Qc.arr.pushIfNotIncluded(m,a.itemIndex),
f.selectedIndexes=m):!this._dragState.sourceIsSelected&&a.isSelected&&(Qc.arr.remove(m,a.itemIndex),f.selectedIndexes=m))}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},isSelected:{defaultValue:!1},draggable:{defaultValue:!Qc.touchInputDevice},fill:{derived:!0,get:function(){return Qc.touchInputDevice&&this.pressed?Qc.Color.gray.withA(.5):this.isSelected?this.selectionColor:
Qc.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Qc.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Qc.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Qc.Color.rgbHex("333")},fontColor:{derived:!0,get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:924,end:5139})}(Qc.Label);Qc.ListItemMorph=XL;Qc.ListItemMorph=XL;Qc.ListItemMorph=XL;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("ListScroller")&&"function"===typeof e.ListScroller?e.ListScroller:e.ListScroller=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:"onScroll",value:function(a){return this.owner.update()}},{key:"onMouseDown",value:function(a){var f=this,m=this.scroll.y;if(Qc.touchInputDevice){var q=this.owner.itemForClick(a);q&&(q.pressed=!0,q.makeDirty(),setTimeout(function(){q.pressed=!1;if(0==m-f.scroll.y)return f.owner.clickOnItem(a)},300))}else return this.owner.clickOnItem(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},
fill:{defaultValue:Qc.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=[{name:"scrollbar"}]}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5141,
end:6103})})(Qc.Morph);Qc.listCommands=[{name:"page up",exec:function(b){b.gotoIndex(Math.max(0,b.selectedIndex-Math.round(b.height/b.itemHeight)));return!0}},{name:"page down",exec:function(b){b.gotoIndex(Math.min(b.items.length-1,b.selectedIndex+Math.round(b.height/b.itemHeight)));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(0);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.items.length-1);return!0}},{name:"arrow up",exec:function(b){b.gotoIndex(b.indexUp());
return!0}},{name:"arrow down",exec:function(b){b.gotoIndex(b.indexDown());return!0}},{name:"select up",exec:function(b){var e=b.selectedIndexes;if(!b.multiSelect||!e.length)return b.execCommand("arrow up");var l=e[0];if("number"!==typeof l)b.selectedIndexes=[l];else{var a=b.indexUp(l);e.includes(l)&&e.includes(a)?b.selectedIndexes=e.filter(function(f){return f!==l}):b.selectedIndexes=[a].concat(e.filter(function(f){return f!==a}))}return!0}},{name:"select down",exec:function(b){var e=b.selectedIndexes;
if(!b.multiSelect||!e.length)return b.execCommand("arrow down");var l=e[0],a=b.indexDown(l);e.includes(l)&&e.includes(a)?b.selectedIndexes=e.filter(function(f){return f!==l}):b.selectedIndexes=[a].concat(e.filter(function(f){return f!==a}));return!0}},{name:"select all",exec:function(b){b.selectedIndexes=Qc.arr.range(b.items.length-1,0);b.scrollIndexIntoView(b.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(b){var e,l,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return e=b.selectedIndex||0,f.yield(b.world().filterableListPrompt("Select item",b.items,{preselect:e,requester:b.getWindow()||b,itemPadding:Qc.Rectangle.inset(0,2),multiSelect:!0}),2);l=f.yieldResult;a=l.selected;a.length&&(b.multiSelect?b.selections=a:b.selection=a[0],b.scrollSelectionIntoView(),b.update());return f.return(!0)})}},{name:"realign top-bottom-center",exec:function(b){if(b.selection){var e=b.padding,l=b.itemHeight,a=b.scroll,f=a.x;a=a.y;var m=Qc.pt(0,b.selectedIndex*l);
e=b.height-l-e.top()-e.bottom();a=2>Math.abs(m.y-a)?m.y-e:2>Math.abs(m.y-a-.5*e)?m.y:m.y-.5*e;b.scroll=Qc.pt(f,a);return!0}}},{name:"print contents in text window",exec:function(b){var e="items of "+b.name,l=b.items.map(function(a){if("string"===typeof a)return a;var f=a.string,m=a.label;a=a.annotation;var q="";m?q="string"===typeof m?q+m:q+m.map(function(r,u){return 0==u%2?r:""}).join(""):f&&(q+=f);a&&(q+=" ",q="string"===typeof a?q+a:q+a[0]);return q}).join("\n");return b.world().execCommand("open text window",
{title:e,content:l,name:e,fontFamily:"Monaco, monospace"})}}];var OC=wa("b9",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("List")&&"function"===typeof e.List?e.List:e.List=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"__additionally_serialize__",value:function(a,f,m,q){var r=this;zb._get(Object.getPrototypeOf(l.prototype),"__additionally_serialize__",
this).call(this,a,f,m,q);this.whenRendered().then(function(){return r.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Qc.touchInputDevice}},{key:"initializeSubmorphs",value:function(a){this.submorphs=a=a||this.submorphs||[];for(var f=0;f<a.length;f++)switch(a[f].name){case "listItemContainer":var m=a[f];continue;case "scroller":var q=a[f]}q||(q=this.addMorph(new Qc.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));m||this.addMorph({name:"listItemContainer",
fill:Qc.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(m||q)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(a){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(a.prop)&&this.update();return zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"itemForClick",value:function(a){a=a.positionIn(this.world()).subPt(this.scroll);
a=this.listItemContainer.morphsContainingPoint(a);return a.find(function(f){return f.isListItem})||a[0]}},{key:"clickOnItem",value:function(a){var f=this.itemForClick(a),m=a.state.clickCount;if(!(a.positionIn(this).x>this.width-this.scrollbarOffset.x))this[2===m?"onItemMorphDoubleClicked":"onItemMorphClicked"](a,f)}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",
value:function(a){return this.items.find(function(f){return f===a||f.value===a})}},{key:"findIndex",value:function(a){return this.items.findIndex(function(f){return f===a||f.value===a})}},{key:"addItem",value:function(a){return this.addItemAt(a)}},{key:"addItemAt",value:function(a,f){var m=this;f=void 0===f?this.items.length:f;var q=this.items;f=Math.min(q.length,Math.max(0,f));q.splice(f,0,Qc.asItem(a));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[a,f],undo:{target:this,
selector:"removeItem",args:[a]}},function(){return m.update()})}},{key:"removeItem",value:function(a){var f=this;a=this.find(a);var m=this.items,q=m.indexOf(a);-1!==q&&(m.splice(q,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[a],undo:{target:this,selector:"addItemAt",args:[a,q]}},function(){return f.update()}))}},{key:"selectItemMorph",value:function(a){this.selectedIndexes=[a.itemIndex]}},{key:"gotoIndex",value:function(a){this.scrollIndexIntoView(this.selectedIndex=a)}},
{key:"indexUp",value:function(a){a="number"===typeof a?a:this.selectedIndex;return(a||this.items.length)-1}},{key:"indexDown",value:function(a){a=void 0===a?this.selectedIndex:a;return(("number"===typeof a?a:-1)+1)%this.items.length}},{key:"update",value:function(){var a=this,f=this.items;f&&this.scroller&&this.dontRecordChangesWhile(function(){var m=a.itemHeight,q=a.itemMorphs,r=a.listItemContainer,u=a.selectedIndexes,v=a.extent.y,y=a.fontSize,z=a.fontFamily,B=a.fontColor,C=a.padding,G=a.itemPadding,
F=a.selectionColor,N=a.selectionFontColor,L=a.nonSelectionFontColor,S=a.itemBorderRadius,ha=a.scrollBar,qa=a.scroller,D=a.scrollable,P=qa.scroll.y;C=C||Qc.Rectangle.inset(0);var J=C.top(),M=C.left(),X=C.bottom();C=C.right();var T=Math.max(0,Math.floor(P/m)),fa=Math.min(f.length,T+v/m+2);v=0;C=a.width-(M+C);q=Qc.arr.sortBy(q,function(Aa){return Aa.itemIndex});var Ra=$jscomp.makeIterator(Qc.arr.partition(q,function(Aa){return Aa.itemIndex<T}));q=Ra.next().value;var gb=Ra.next().value;gb=$jscomp.makeIterator(Qc.arr.partition(gb,
function(Aa){return Aa.itemIndex>fa-1}));Ra=gb.next().value;gb=gb.next().value;q=[].concat($jscomp.arrayFromIterable(Ra),$jscomp.arrayFromIterable(gb),$jscomp.arrayFromIterable(q));for(Ra=0;Ra<fa-T;Ra++){gb=T+Ra;var ea=f[gb];if(!ea){q.slice(Ra).forEach(function(Aa){Aa.remove()});break}var aa={fontSize:y,fontFamily:z,fontColor:L||B,padding:G,borderRadius:S||0,selectionFontColor:N,nonSelectionFontColor:L,selectionColor:F},ia=q[Ra];ia||(ia=q[Ra]=r.addMorph(new Qc.ListItemMorph(aa)));ia.reactsToPointer=
!D;ia.displayItem(ea,gb,C,m,Qc.pt(0,m*gb),u.includes(gb),aa);v=Math.max(v,ia.width)}q.slice(fa-T).forEach(function(Aa){return Aa.remove()});m=Math.max(J+X+m*f.length,a.height);r.setBounds(Qc.pt(M,J).subXY(0,P).extent(Qc.pt(a.width,m)));qa.extent=a.extent.subXY(a.borderWidthRight,a.borderWidthBottom);ha.left=v/2;qa.position=Qc.pt(0,0);ha.extent=Qc.pt(1,m)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){var f=
this.itemHeight,m=this.itemScroll;a=new Qc.Rectangle(0,a*f,this.width,f);f=this.innerBounds().insetByRect(this.padding).translatedBy(m);var q=0;a.bottom()>f.bottom()&&(q=a.bottom()-f.bottom());a.top()<f.top()&&(q=a.top()-f.top());this.itemScroll=m.addXY(0,q);this.update()}},{key:"onItemMorphDoubleClicked",value:function(a,f){}},{key:"onItemMorphClicked",value:function(a,f){var m=f.itemIndex;f=this.selectedIndexes;var q=f.includes(m),r=[];if(this.multiSelect)if(a.isShiftDown())if(q)r=f.filter(function(v){return v!=
m});else{a=f[0];var u="number"===typeof a?Qc.arr.range(m,a):[m];r=u.concat(f.filter(function(v){return!u.includes(v)}))}else r=this.multiSelectWithSimpleClick||a.isCommandKey()?q?f.filter(function(v){return v!=m}):[m].concat(f.filter(function(v){return v!=m})):[m];else r=[m];this.selectedIndexes=r}},{key:"onItemMorphDragged",value:function(a,f){}},{key:"onHoverIn",value:function(a){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(a){Qc.touchInputDevice||(this.scroller.visible=
!1)}},{key:"onDragStart",value:function(a){}},{key:"onDrag",value:function(a){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},
{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this))}},{key:"commands",get:function(){return Qc.listCommands}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Qc.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:Qc.Color.white},selectionColor:{type:"ColorGradient",
isStyleProp:!0,defaultValue:Qc.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Qc.Color.rgbHex("333")},fontColor:{isStyleProp:!0,defaultValue:Qc.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Qc.pt(0,0)},set:function(a){this.scroller&&(this.scroller.scroll=a)}},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/list/light"}}},extent:{defaultValue:Qc.pt(400,
360),set:function(a){a.eqPt(this.extent)||(this.setProperty("extent",a),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(a){this.setProperty("fontFamily",a);this.invalidateCache()}},fontSize:{isStyleProp:!0,defaultValue:12,set:function(a){this.setProperty("fontSize",a);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Qc.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(a){this.setProperty("itemBorderRadius",
a);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Qc.Rectangle.inset(1),set:function(a){this.setProperty("itemPadding",a);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Qc.asItem));this.itemScroll=Qc.pt(0,0);this.update();this.attributeConnections&&Qc.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",
defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(a){return a.value})}},selectedIndex:{group:"list",defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(a){return this.selectedIndexes="number"===typeof a?[a]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(a){var f=
this.items.length;this.setProperty("selectedIndexes",(a||[]).filter(function(m){return 0<=m&&m<f}));this.update();Qc.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},set:function(a){this.selections=[a]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var a=this;return this.selectedIndexes.map(function(f){return a.items[f]&&a.items[f].value})},set:function(a){var f=this;this.selectedIndexes=a.map(function(m){return f.findIndex(m)})}},
selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var a=this;return this.selectedIndexes.map(function(f){return a.items[f]})}},submorphs:{initialize:function(a){this.initializeSubmorphs(a)}},listItemContainer:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},
scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},itemHeight:{isStyleProp:!0,after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(a){this.setProperty("itemHeight",a);this.manualItemHeight="number"===typeof a;this.update()},get:function(){var a=this.getProperty("itemHeight");if(a)return a;
a=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var f=this.itemPadding;f&&(a+=f.top()+f.bottom());this.setProperty("itemHeight",a);return a}},theme:{after:["styleClasses"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.addStyleClass(a);this.setProperty("theme",a)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:10507,end:27122})}(Qc.Morph));Qc.List=OC;Qc.List=OC;Qc.List=OC;Qc.connect=Oe;var cG=wa("ba",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("FilterableList")&&"function"===typeof e.FilterableList?e.FilterableList:e.FilterableList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,
[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;a.bounds||a.extent||(a.extent=Qc.pt(400,360));zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Qc.connect(this.inputMorph,"inputChanged",this,"updateFilter");Qc.connect(this.listMorph,"selection",this,"selectionChanged");Qc.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Qc.connect(this,"extent",this,"relayout")}},{key:"resetConnections",
value:function(){var a=this,f=this.attributeConnections;if(f){var m=["accepted","canceled","remove"];f.filter(function(q){return m.includes(q.sourceAttrName)&&q.targetObj!==a}).forEach(function(q){return q.disconnect()})}}},{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var a=this.listMorph,f=this.inputMorph,m=this.paddingMorph,q=this.borderWidth;f.topLeft=Qc.pt(q,q);f.width=a.width=this.width-2*q;m&&(m.topLeft=f.bottomLeft);a.position=m?m.bottomLeft:f.bottomLeft;a.height=
this.height-a.top-q}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(a){Qc.signal(this,"selection",a)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var a=this.get("input").textString,f=Array.from(a).reduce(function(q,r){if("\\"===r&&!q.escaped)return q.escaped=!0,q;" "!==r||q.escaped?(q.spaceSeen=!1,q.current+=r):(!q.spaceSeen&&q.current&&(q.tokens.push(q.current),
q.current=""),q.spaceSeen=!0);q.escaped=!1;return q},{tokens:[],current:"",escaped:!1,spaceSeen:!1});f.current&&f.tokens.push(f.current);var m=f.tokens.map(function(q){return q.toLowerCase()});return{tokens:f.tokens,lowercasedTokens:m,input:a}}},{key:"updateFilter",value:function(){var a=this,f=this.parseInput(),m=this.filterFunction,q=this.sortFunction,r=this.items.filter(function(y){return m.call(a,f,y)});q&&(r=Qc.arr.sortBy(r,function(y){return q.call(a,f,y)}));var u=this.listMorph,v=this.updateSelectionsAfterFilter?
u.selectedIndexes.map(function(y){return r.indexOf(u.items[y])}).filter(function(y){return-1!==y}):u.selectedIndexes;u.items=r;u.selectedIndexes=v.length?v:r.length?[0]:[];this.scrollSelectionIntoView();Qc.signal(this,"filterChanged",{parsedInput:f,items:u.items})}},{key:"acceptInput",value:function(){var a=this.listMorph;this.get("input").acceptInput();a={filtered:this.items,selected:a.selections,action:this.selectedAction,status:"accepted"};Qc.signal(this,"accepted",a);return a}},{key:"keybindings",
get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat($jscomp.arrayFromIterable(Qc.arr.range(0,
8).map(function(a){return{keys:"Alt-"+(a+1),command:{command:"choose action and accept input",args:{actionNo:a}}}}))).concat(zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this))}},{key:"commands",get:function(){var a=this;return zb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"accept input",exec:function(f){a.acceptInput();return!0}},{name:"cancel",exec:function(f){Qc.signal(f,"canceled");return!0}},{name:"choose action and accept input",exec:function(f,m){m=void 0===
m?{}:m;f.selectedAction=(f.actions||[])[void 0===m.actionNo?0:m.actionNo];return f.execCommand("accept input")}},{name:"choose action",exec:function(f){var m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(!f.actions)return u.return(!0);m=Object.assign({},f.style,{extent:f.extent});q=new Qc.FilterableList(m);q.openInWorld(f.globalPosition);q.items=f.actions;r=f.actions.indexOf(f.selectedAction);-1===r&&(r=0);q.selectedIndex=r;Qc.connect(q,"accepted",f,"selectedAction",{converter:function(v){this.targetObj.focus();
this.disconnect();this.sourceObj.remove();return v.selected[0]}});Qc.connect(q,"canceled",f,"selectedAction",{converter:function(v){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}});q.focus();return u.return(!0)})}}].concat($jscomp.arrayFromIterable(Qc.listCommands.map(function(f){return Object.assign({},f,{exec:function(m,q,r){return f.exec(a.listMorph,q,r)}})}))))}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"FilterableList"}},
{key:"properties",get:function(){return{fill:{defaultValue:Qc.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(a){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(a);this.listMorph.addStyleClass(a);this.setProperty("theme",a)}},submorphs:{initialize:function(){var a=this;this.submorphs=[Qc.Text.makeInputLine({name:"input",highlightWhenFocused:!1,
fixedHeight:!1,autofit:!1}),new Qc.morph({name:"padding",fill:Qc.Color.transparent}),new Qc.List({name:"list",items:[],clipMode:"auto"})];this.get("list").whenRendered().then(function(){return a.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},
fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(a){this.listMorph.fontFamily=a;this.inputMorph.fontFamily=a}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(a){this.listMorph.padding=a;this.inputMorph.padding=a}},fontSize:{isStyleProp:!0,group:"styling",derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(a){this.listMorph.fontSize=
a}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(a){this.listMorph.itemPadding=a}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(a){this.inputMorph.padding=a}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},set:function(a){this.inputMorph.input=a}},historyId:{derived:!0,after:["submorphs"],
defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(a){this.inputMorph.historyId=a}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(a){this.listMorph.multiSelect=a}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(a){this.setProperty("items",a.map(Qc.asItem));this.updateFilter()}},visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},
selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(a){this.listMorph.selection=a}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(a){this.listMorph.selectedIndex=a}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(a){this.listMorph.selectedIndexes=a}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},
set:function(a){this.listMorph.selectedItems=a}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(a){this.listMorph.selections=a}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=
null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,f){return a.lowercasedTokens.every(function(m){return f.string.toLowerCase().includes(m)})})}},
fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(f,m){var q=String(Qc.Path("string"===typeof a.fuzzy?a.fuzzy:"string").get(m)).toLowerCase(),r=0;f.lowercasedTokens.forEach(function(u){q.startsWith(u)?r-=10:q.includes(u)&&(r-=5)});return Qc.arr.sum(f.lowercasedTokens.map(function(u){return Qc.string.levenshtein(q.toLowerCase(),u)}))+r})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=
function(f,m){var q="string"===typeof a.fuzzy?a.fuzzy:"string";if(f.lowercasedTokens.every(function(u){return m.string.toLowerCase().includes(u)}))return!0;var r=String(Qc.Path(q).get(m)).toLowerCase();return 3>=Qc.arr.sum(f.lowercasedTokens.map(function(u){return Qc.string.levenshtein(r,u)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||"default"}},actions:{}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:27235,end:41577})}(Qc.Morph));Qc.FilterableList=cG;Qc.FilterableList=cG;Qc.FilterableList=cG;var dG=wa("bz",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("DropDownList")&&"function"===typeof e.DropDownList?e.DropDownList:e.DropDownList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:"fitLabelMorph",value:function(){}},{key:Symbol.for("lively-instance-initialize"),value:function(a){zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);Qc.connect(this,"fire",this,"toggleList")}},{key:"onLoad",value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(a){var f=
this;setTimeout(function(){var m=f.listMorph,q=f.world()&&f.world().focusedMorph;q!==m&&q!==f&&m.world()&&!m.withAllSubmorphsDetect(function(r){return r==q})?m.fadeOut(200):m.world()&&(m=Qc.touchInputDevice?m.scroller:m,Qc.once(m,"onBlur",f,"removeWhenFocusLost"),m.focus())},100)}},{key:"adjustLableFor",value:function(a){a=a.label||[a.string,null];a=[].concat($jscomp.arrayFromIterable(a),[" ",null],$jscomp.arrayFromIterable(Qc.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"))));
a[5]&&(a[5].paddingRight="0px",a[5].textStyleClasses=["fa","annotation"]);this.label=a;this.relayout()}},{key:"toggleList",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){f=a.listMorph;if(a.isListVisible())return Qc.signal(a,"deactivated"),a.selection=f.selection,f.epiMorph=!1,f.remove(),r.jumpTo(0);Qc.signal(a,"activated");a.openListInWorld?(f.openInWorld(),f.epiMorph=!0,f.hasFixedPosition=!0,f.setTransform(a.getGlobalTransform()),
m=a.globalBounds()):(m=a.innerBounds(),a.addMorph(f));q=f.items.length*f.itemHeight+f.padding.top()+f.padding.bottom();f.extent=Qc.pt(a.width,Math.min(a.listHeight,q));"top"===a.listAlign?f.bottomLeft=m.topLeft():f.topLeft=m.bottomLeft();f.moveBy(a.listOffset||Qc.pt(0,0));Qc.once(f,"onItemMorphClicked",a,"toggleList");Qc.once(Qc.touchInputDevice?f.scroller:f,"onBlur",a,"removeWhenFocusLost");return r.yield(f.whenRendered(),3)}if(4!=r.nextAddress)return r.yield(f.whenRendered(),4);Qc.touchInputDevice?
f.scroller.focus():f.focus();f.scrollSelectionIntoView();r.jumpToEnd()})}},{key:"commands",get:function(){var a=this;return[{name:"accept",exec:function(){a.isListVisible()&&a.toggleList();return!0}},{name:"cancel",exec:function(){a.isListVisible()&&a.listMorph.remove();return!0}}].concat(zb._get(Object.getPrototypeOf(l.prototype),"commands",this))}},{key:"keybindings",get:function(){return zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",
command:"cancel"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownList"}},{key:"properties",get:function(){return{padding:{defaultValue:Qc.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},listOffset:{isStyleProp:!0,defaultValue:Qc.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var a=this.getProperty("listMorph");if(a)return a;a=new Qc.List({name:"dropDownList"});
this.setProperty("listMorph",a);return a}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},set:function(a){var f=this,m=this.items.find(function(q){return q.value==f.selection});this.listMorph.items=a;m&&Qc.noUpdate(function(){f.selection=f.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(a){var f=this.listMorph;if(a){var m=f.items,q=f.find(a);q||"string"!==typeof a||(q=m.find(function(r){return r.string===
a}));if(!q)return;this.adjustLableFor(q);f.selectedIndex=m.indexOf(q)}else f.selection=null,this.label="";Qc.signal(this,"selection",f.selection)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:41587,end:46669})}(Qc.Button));Qc.DropDownList=dG;Qc.DropDownList=dG;Qc.DropDownList=
dG;var YL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("InteractiveItem")&&"function"===typeof e.InteractiveItem?e.InteractiveItem:e.InteractiveItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(a){this.list.showDropPreviewFor(this,a)}},{key:"onDrop",value:function(a){var f=this,m;
return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(!f.item.isPreview)return q.jumpTo(0);m=a.hand.grabbedMorphs[0];zb._get(Object.getPrototypeOf(l.prototype),"onDrop",f).call(f,a);return q.yield(f.list.whenRendered(),3)}f.list.addItemAt({morph:m,isListItem:!0},f.itemIndex);f.list.clearPreviews();q.jumpToEnd()})}},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",value:function(a){Qc.touchInputDevice?
this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(a){Qc.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(a,f,m,q,r,u,v){u=void 0===u?!1:u;zb._get(Object.getPrototypeOf(l.prototype),"displayItem",this).call(this,a,f,m,q,r,u,v);a.morph&&(a.morph.selected=u)}},{key:"onGrab",value:function(a){var f=this.list,m=a.halo&&a.halo.target===this;m&&a.halo.detachFromTarget();var q=this.submorphs.length?this.submorphs[0]:Qc.morph({type:"label",
value:this.value});a.hand.grab(q);q.position=a.hand.localize(this.globalPosition);m&&a.halo.refocus(q);f.removeItem(this.list.items[this.itemIndex]);f.itemMorphs.forEach(function(r){return r.remove()});f.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!Qc.touchInputDevice},item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},
isListItem:{get:function(){return!0}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:46678,end:48927})}(Qc.ListItemMorph);Qc.InteractiveItem=YL;Qc.InteractiveItem=YL;Qc.InteractiveItem=YL;var ZL=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/list.js"),l=e.hasOwnProperty("MorphList")&&
"function"===typeof e.MorphList?e.MorphList:e.MorphList=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onLoad",value:function(){zb._get(Object.getPrototypeOf(l.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":"hidden"}},{key:"showDropPreviewFor",value:function(a,f){a=a.itemIndex;this.items[a].isPreview&&f||(this.clearPreviews(),f&&this.addItemAt({isListItem:!0,isPreview:!0,
morph:Qc.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Qc.Color.orange.withA(.5)})},a))}},{key:"clearPreviews",value:function(){var a=this;this.items.filter(function(f){return f.morph&&f.morph.owner&&!Qc.Path("morph.owner.isListItem").get(f)}).map(function(f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return m.return(a.removeItem(f))})});this.items.filter(function(f){return f.isPreview}).map(function(f){return a.removeItem(f)})}},{key:"update",
value:function(){var a=this,f=this.items;f&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var m=a.itemHeight,q=a.itemMorphs,r=a.listItemContainer,u=a.selectedIndexes,v=a.extent.y,y=a.fontSize,z=a.fontFamily,B=a.fontColor,C=a.padding,G=a.itemPadding,F=a.selectionColor,N=a.selectionFontColor,L=a.nonSelectionFontColor,S=a.itemBorderRadius,ha=a.scrollBar,qa=a.scroll.y;C=C||Qc.Rectangle.inset(0);var D=C.top(),P=C.left(),J=C.bottom();C=C.right();
var M=Math.max(0,Math.floor(qa/m)),X=Math.min(f.length,Math.ceil((qa+v)/m));v=0;qa=a.width-(P+C);q=Qc.arr.sortBy(q,function(Ra){return Ra.itemIndex});var T=$jscomp.makeIterator(Qc.arr.partition(q,function(Ra){return Ra.itemIndex<M}));q=T.next().value;var fa=T.next().value;fa=$jscomp.makeIterator(Qc.arr.partition(fa,function(Ra){return Ra.itemIndex>X}));T=fa.next().value;fa=fa.next().value;q=[].concat($jscomp.arrayFromIterable(T),$jscomp.arrayFromIterable(fa),$jscomp.arrayFromIterable(q));y={fontSize:y,
fontFamily:z,fontColor:L||B,padding:G,borderRadius:S||0,selectionFontColor:N,nonSelectionFontColor:L,selectionColor:F};q.length&&X-M>q.length&&(M!=q[0].itemIndex?Qc.arr.pushAt(q,r.addMorph(new Qc.InteractiveItem(y)),0):X!=Qc.arr.last(q).itemIndex&&q.push(r.addMorph(new Qc.InteractiveItem(y))));for(z=0;z<X-M;z++){B=M+z;G=f[B];if(!G){q.slice(z).forEach(function(Ra){return Ra.remove()});break}F=q[z];F||(F=q[z]=r.addMorph(new Qc.InteractiveItem(y)),F.clipMode="visible");F.displayItem(G,B,qa,m,Qc.pt(0,
m*B),u.includes(B),y);v=Math.max(v,F.width)}m=Math.max(D+J+m*f.length,a.height);u=Qc.pt(a.width,m).subPt(Qc.pt(P+C,0));r.setBounds(Qc.pt(P,D).extent(u));ha.left=v-10;ha.fill=null;ha.top=0;ha.extent=Qc.pt(1,m)}))}},{key:"onHoverIn",value:function(a){this.clipMode="auto"}},{key:"onHoverOut",value:function(a){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(a){this.update()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return Qc.touchInputDevice}},
items:{group:"list",defaultValue:[],after:["submorphs"],set:function(a){this.setProperty("items",a.map(Qc.asItem));this.itemMorphs.forEach(function(f){return f.remove()});this.update();this.attributeConnections&&Qc.signal(this,"values",this.values)}}}}}],e,{pathInPackage:function(){return"list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:48936,end:54168})}(Qc.List);Qc.MorphList=ZL;Qc.MorphList=ZL;Qc.MorphList=ZL;var Doa=Object.freeze({__proto__:null,asItem:oJ,ListItemMorph:XL,List:OC,FilterableList:cG,DropDownList:dG,InteractiveItem:YL,MorphList:ZL}),gg=lively.FreezerRuntime.recorderFor("lively.components/menus.js");gg.Label=Rs;gg.config=vk;gg.Morph=Mj;gg.obj=lf;gg.promise=oe;gg.fun=Zk;gg.pt=nf;gg.Color=xf;gg.Rectangle=Pd;var $L=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),l=e.hasOwnProperty("MenuDivider")&&
"function"===typeof e.MenuDivider?e.MenuDivider:e.MenuDivider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,void 0,[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},fill:{defaultValue:gg.Color.gray.lighter()},extent:{defaultValue:gg.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],e,{pathInPackage:function(){return"menus.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:168,end:444})}(gg.Morph);gg.MenuDivider=$L;gg.MenuDivider=$L;gg.MenuDivider=$L;var aM=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),l=e.hasOwnProperty("MenuItem")&&"function"===typeof e.MenuItem?e.MenuItem:e.MenuItem=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onHoverIn",value:function(a){var f=this;this.owner.itemMorphs.forEach(function(m){return m!==f&&(m.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(a,this,this.submenu)}},{key:"onHoverOut",value:function(a){var f=this,m=a.hand;setTimeout(function(){(f.owner?f.owner.submenus:[]).some(function(q){return q.fullContainsWorldPoint(m.globalPosition)})||(f.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},
{key:"onMouseDown",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(f.submenu)return r.return();r.setCatchFinallyBlocks(2);f.owner.startFinish();if("function"!==typeof f.action)throw Error("Menu item "+f.textString+" has no executable action!");return r.yield(f.action(),4)}if(2!=r.nextAddress)return f.owner.completeFinish(),r.leaveTryBlock(0);m=r.enterCatchBlock();(q=f.world())?q.logError(m):console.error(m);r.jumpToEnd()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:gg.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(a){this.selected!==a&&(this.addValueChange("selected",a),a?(this.fontColor=gg.Color.white,this.fill=
gg.Color.rgb(21,101,192)):(this.fill=gg.Color.transparent,this.fontColor=gg.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},label:{get:function(){return this.valueAndAnnotation.value.map(function(a,f){return 0===f%2?a:""}).join("\n")},set:function(a){this.valueAndAnnotation={value:a,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(a){this.valueAndAnnotation={value:this.value,annotation:a}}},action:{},submenu:{}}}}],
e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:453,end:2976})}(gg.Label);gg.MenuItem=aM;gg.MenuItem=aM;gg.MenuItem=aM;gg.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var bM=wa("bb",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
l=e.hasOwnProperty("Menu")&&"function"===typeof e.Menu?e.Menu:e.Menu=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},{key:"whenFinished",value:function(){return this.finishedPromise.promise}},
{key:"onChange",value:function(a){switch(a.prop){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a)}},{key:"remove",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.animate({opacity:0,duration:300}),2);a._waitingForFinish||a.completeFinish();zb._get(Object.getPrototypeOf(l.prototype),"remove",a).call(a);f.jumpToEnd()})}},{key:"ensureItem",
value:function(a){if(!a)return gg.invalidItem;if(a.title)return this.title=a.title,null;if(a.isDivider)return a;if(a.hasOwnProperty("string")&&a.hasOwnProperty("action"))return gg.obj.select(a,["string","action","annotation"]);if(Array.isArray(a)){var f=$jscomp.makeIterator(a),m=f.next().value;f=f.next().value;return"string"===typeof m||Array.isArray(m)?f&&"function"!==typeof f?"object"===typeof f&&f.getItems?{label:m,submenu:f.getItems,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:
Array.isArray(f)?{label:m,submenu:f,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:gg.invalidItem:{label:m,action:f||function(){return $world.setStatusMessage(m)}}:gg.invalidItem}if(a.command){var q=a.command,r=a.showKeyShortcuts,u=a.target;f=a.alias;var v=a.args;a=a.tooltip;if(!q||!u)return gg.invalidItem;void 0===r&&(r=!0);r=r?"string"===typeof r?r:u.keysForCommand(q):null;return{tooltip:a,string:f||q,annotation:r?["\t"+r,{fontSize:"70%"}]:["",{}],action:function(){return u.execCommand(q,
v)}}}return gg.invalidItem}},{key:"updateMorphs",value:function(){var a=this;this.submorphs=[];var f=this.padding.left(),m=this.padding.right(),q=this.padding.top(),r=this.padding.bottom(),u=0,v=gg.pt(f,q),y={};this.fontFamily&&(y.fontFamily=this.fontFamily);this.fontSize&&(y.fontSize=this.fontSize);this.itemPadding&&(y.padding=this.itemPadding);this.title&&(q=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:v,fontWeight:"bold"},y)),v=q.bottomLeft,u=Math.max(q.width,
u));this.items.forEach(function(z){var B=z.label,C=z.string,G=z.annotation,F=z.action,N=z.submenu,L=z.tooltip;z=a.addMorph(z.isDivider?new gg.MenuDivider({position:v}):new gg.MenuItem(Object.assign({label:B||C,annotation:G,action:F,submenu:N,tooltip:L,position:v},y)));v=z.bottomLeft;u=Math.max(z.width,u)});this.submorphs.forEach(function(z){z.isLabel&&(z.fit(),z.autofit=!1,z.fixedWidth=!0,z.fixedHeight=!0);z.width=u});this.extent=gg.pt(u+m+f,v.y+r)}},{key:"openSubMenuDelayed",value:function(a,f,m){var q=
this;this.openingSubMenuProcess&&clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{q.openSubMenu(a,f,m)}catch(u){var r=q.world();r?r.logError(u):console.error(u)}},200)}},{key:"openSubMenu",value:function(a,f,m){if(f.selected){var q=this.submenu;if(q){if(q.ownerItemMorph===f||this.morphsContainingPoint(a.position).includes(q))return;this.removeSubMenu()}"function"===typeof m&&(m=m());a=this.submenu=this.addMorph(new gg.Menu({items:m,ownerItemMorph:f,ownerMenu:this}));
a.updateMorphs();a.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var a=this;gg.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var f=a.world();if(f){var m=a.submenu,q=a.selectedItemMorph;f=f&&m&&m.fullContainsWorldPoint(f.firstHand.position);m&&m.ownerItemMorph!==q&&!m.ownerItemMorph.selected&&(f?(q&&(q.selected=!1),m.ownerItemMorph.selected=!0):a.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var a=this.submenu;
this.submenu=a.ownerMenu=null;a.remove()}}},{key:"moveBoundsForVisibility",value:function(a,f){var m=0,q=0;a.right()>f.right()&&(m=-1*(a.right()-f.right()));var r=a.left()+m;0>r&&(m+=-r);a.bottom()>f.bottom()&&(q=-1*(a.bottom()-f.bottom()),m+=1);f=a.top()+q;0>f&&(q+=-f);return a.translatedBy(gg.pt(m,q))}},{key:"moveSubMenuBoundsForVisibility",value:function(a,f,m,q){q||(q=f.right()+a.width>m.right()?"left":"right");a=a.extent();a="left"===q?f.topLeft().addXY(-a.x,0).extent(a):f.topRight().extent(a);
a.bottom()>m.bottom()&&(f=-1*(a.bottom()-m.bottom()),a=a.translatedBy(gg.pt(0,f)));a.top()<m.top()&&(m=m.top()-a.top(),a=a.translatedBy(gg.pt(0,m)));return a}},{key:"offsetForOwnerMenu",value:function(){var a=this.ownerMenu,f=this.world().visibleBounds(),m=a.getGlobalTransform().inverse().transformRectToRect(f);a=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),a.selectedItemMorph?a.selectedItemMorph.bounds():a.innerBounds(),m),f);this.setBounds(a)}},{key:"clipForVisibility",
value:function(a,f){a=void 0===a?this.bounds():a;f=void 0===f?this.world().visibleBounds():f;var m=this.transformRectToMorph(this.world(),a.withX(0).withY(0));f.containsRect(m.insetBy(10))||(a=a.withExtent(gg.pt(5+a.width,Math.min(m.height,f.height))));return a}},{key:"offsetForWorld",value:function(a){a=this.innerBounds().translatedBy(a);if(this.owner.visibleBounds){var f=this.owner.visibleBounds();a=this.clipForVisibility(this.moveBoundsForVisibility(a,f),f)}this.setBounds(a)}},{key:"onHoverOut",
value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(a,f){f=void 0===f?{title:""}:f;return new this(Object.assign({},f,{items:a}))}},{key:"openAt",value:function(a,f,m){m=void 0===m?{title:""}:m;f=this.forItems(f,m).openInWorldNear(a);f.offsetForWorld(a);return f}},{key:"openAtHand",value:function(a,f){f=void 0===f?{title:""}:f;var m=f.hand;a=this.forItems(a,gg.obj.dissoc(f,["hand"]));m=m?m.position:
gg.pt(0,0);a.titleMorph&&(m=m.addXY(0,-a.titleMorph.height));a.openInWorld(m);a.offsetForWorld(m);return a}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(gg.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:gg.Rectangle.inset(0,2)},itemPadding:{defaultValue:gg.Rectangle.inset(8,
4)},borderWidth:{defaultValue:1},fill:{defaultValue:gg.Color.white},borderColor:{defaultValue:gg.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},fontFamily:{defaultValue:"Helvetica Neue, Arial, sans-serif"},title:{get:function(){return this.getProperty("title")},set:function(a){this.addValueChange("title",a)}},finishedPromise:{initialize:function(){this.finishedPromise=gg.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},
submenus:{readOnly:!0,get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(a){a=a.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",a)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(a){return a.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(a){return a.isMenuItem})}}}}}],
e,{pathInPackage:function(){return"menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3089,end:16079})}(gg.Morph));gg.Menu=bM;gg.Menu=bM;gg.Menu=bM;var Eoa=Object.freeze({__proto__:null,MenuDivider:$L,MenuItem:aM,Menu:bM}),rj=lively.FreezerRuntime.recorderFor("lively.components/resizers.js");rj.arr=Qe;rj.pt=nf;rj.Color=xf;
rj.Morph=Mj;var cM=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),l=e.hasOwnProperty("VerticalResizer")&&"function"===typeof e.VerticalResizer?e.VerticalResizer:e.VerticalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onDrag",value:function(a){this.movedHorizontallyBy(a.position.x-a.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||
"number"!==typeof a||0>a||1<a)){var f=this.owner.extent.x-this.extent.x;if(!(0>f)){var m=this.getRelativeDivide();this.movedHorizontallyBy(f*(a-m))}}}},{key:"getRelativeDivide",value:function(a){var f=this.bounds();a=f.left();f=this.owner.extent.x-f.width;return 0>f?NaN:a/f}},{key:"movedHorizontallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingRight).forEach(function(f){var m=f.position;f.position=rj.pt(m.x+a,m.y)}),this.scalingLeft.forEach(function(f){var m=f.extent;
f.extent=rj.pt(m.x+a,m.y)}),this.scalingRight.forEach(function(f){var m=f.extent;f.extent=rj.pt(m.x-a,m.y)}),this.position=this.position.addPt(rj.pt(a,0)))}},{key:"resizeIsSave",value:function(a){var f=this;return this.scalingLeft.every(function(m){return m.extent.x+a>=f.minWidth})&&this.scalingRight.every(function(m){return m.extent.x-a>=f.minWidth})}},{key:"addFixed",value:function(a){rj.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingLeft",value:function(a){rj.arr.pushIfNotIncluded(this.scalingLeft,
a)}},{key:"addScalingRight",value:function(a){rj.arr.pushIfNotIncluded(this.scalingRight,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:rj.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:128,end:2703})}(rj.Morph);rj.VerticalResizer=cM;rj.VerticalResizer=cM;rj.VerticalResizer=cM;var dM=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),l=e.hasOwnProperty("HorizontalResizer")&&"function"===typeof e.HorizontalResizer?e.HorizontalResizer:e.HorizontalResizer=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onDrag",value:function(a){this.movedVerticallyBy(a.position.y-a.state.lastDragPosition.y)}},{key:"divideRelativeToParent",value:function(a){if(!(!this.owner||"number"!==typeof a||0>a||1<a)){var f=this.owner.extent.y-this.extent.y;if(!(0>f)){var m=this.getRelativeDivide();this.movedVerticallyBy(f*(a-m))}}}},{key:"getRelativeDivide",value:function(a){var f=this.bounds();a=f.top();f=this.owner.extent.y-f.height;
return 0>f?NaN:a/f}},{key:"movedVerticallyBy",value:function(a){this.resizeIsSave(a)&&(this.fixed.concat(this.scalingBelow).forEach(function(f){var m=f.position;f.position=rj.pt(m.x,m.y+a)}),this.scalingAbove.forEach(function(f){var m=f.extent;f.extent=rj.pt(m.x,m.y+a)}),this.scalingBelow.forEach(function(f){var m=f.extent;f.extent=rj.pt(m.x,m.y-a)}),this.position=this.position.addPt(rj.pt(0,a)))}},{key:"resizeIsSave",value:function(a){var f=this;return this.scalingAbove.every(function(m){return m.extent.y+
a>=f.minHeight})&&this.scalingBelow.every(function(m){return m.extent.y-a>=f.minHeight})}},{key:"addFixed",value:function(a){rj.arr.pushIfNotIncluded(this.fixed,a)}},{key:"addScalingAbove",value:function(a){rj.arr.pushIfNotIncluded(this.scalingAbove,a)}},{key:"addScalingBelow",value:function(a){rj.arr.pushIfNotIncluded(this.scalingBelow,a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:rj.Color.gray.lighter()},
nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:2713,end:5319})}(rj.Morph);rj.HorizontalResizer=
dM;rj.HorizontalResizer=dM;rj.HorizontalResizer=dM;var Foa=Object.freeze({__proto__:null,VerticalResizer:cM,HorizontalResizer:dM}),uf=lively.FreezerRuntime.recorderFor("lively.components/tree.js");uf.arr=Qe;uf.fun=Zk;uf.obj=lf;uf.tree=Yv;uf.string=Hg;uf.promise=oe;uf.pt=nf;uf.Rectangle=Pd;uf.Color=xf;uf.Morph=Mj;uf.Text=Qs;uf.config=vk;uf.touchInputDevice=Mp;uf.Label=Rs;uf.connect=Oe;uf.signal=oj;uf.bowser=ir;var eM=wa("by",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),
l=e.hasOwnProperty("Tree")&&"function"===typeof e.Tree?e.Tree:e.Tree=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;if(!a.treeData)throw Error("Cannot create tree without TreeData!");zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a);this.resetCache();this.update()}},{key:"onChange",
value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(a.prop)&&this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(a){var f=
this.textLayout.charBoundsOfRow(this,a);a=uf.Rectangle.fromLiteral(uf.arr.first(f)).topLeft();f=uf.Rectangle.fromLiteral(uf.arr.last(f)).bottomRight();return uf.Rectangle.fromAny(a,f)}},{key:"recoverOriginalLine",value:function(a){for(var f=this.document.getTextAndAttributesOfLine(a),m=0;m<f.length;m++){var q=this._originalColor[m];q&&!uf.obj.isString(f[m])&&(f[m]?f[m].fontColor=q:f[m]={fontColor:q})}this.document.setTextAndAttributesOfLine(a,f)}},{key:"renderSelectedLine",value:function(a){var f=
this.document.getTextAndAttributesOfLine(a);this._originalColor=Array(f.length);for(var m=0;m<f.length;m++)0===m%2?f[m]&&f[m].isMorph&&(this._originalColor[m]=f[m]?f[m].fontColor||this.nonSelectionFontColor:null,f[m].fontColor=this.selectionFontColor,f[m].isSelected=!0):(this._originalColor[m]=(f[m]?f[m].fontColor:null)||this.nonSelectionFontColor,f[m]?f[m].fontColor=this.selectionFontColor:f[m]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(a,f);this.selectLine(a,!0);
this._lastSelectedIndex=this.selectedIndex}},{key:"computeTreeAttributes",value:function(a){if(!a.length)return[];for(var f=uf.arr.genN(8*(a.length-1),function(){return null}),m=1,q,r,u=this.disableIndent?0:1.3*this.fontSize;m<a.length;m++){q=8*(m-1);r=this.selectedIndex==m;a[m].node.isSelected=r;f[q]=" ";f[q+1]={fontSize:u,fontColor:uf.Color.transparent,textStyleClasses:["fas"],paddingRight:u*(a[m].depth-1)+"px"};f[q+3]={fontColor:uf.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/
10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(a[m].node)?f[q+2]=this.disableIndent?"":"    ":(f[q+2]=this.treeData.isCollapsed(a[m].node)?" \uf0da ":" \uf0d7 ",Object.assign(f[q+3],{paddingRight:this.treeData.isCollapsed(a[m].node)?this.fontSize/4+"px":"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var v=this.treeData.safeDisplay(a[m].node);v.isMorph&&(v._capturedProps&&Object.assign(v,v._capturedProps),r&&(v._capturedProps=uf.obj.select(v,["fontColor"])),
v.fontColor=this.nonSelectionFontColor);f[q+4]=v;uf.arr.isArray(v)?f[q+5]=[]:f[q+5]={fontColor:this.fontColor};f[q+6]="\n";f[q+7]={}}f.push(" ",{fontSize:1.3*this.fontSize,textStyleClasses:["far"]});return 1<a.length?uf.arr.flatten(f):[]}},{key:"update",value:function(a){var f=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var m=f.treeData.asListWithIndexAndDepth();f.treeData!==f.lastTreeData||f.lastNumberOfNodes!==
m.length||a?(f.replace({start:{row:0,column:0},end:f.documentEndPosition},f.computeTreeAttributes(m),!1,!1),f.invalidateTextLayout(!0,!1),f.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){f.makeDirty();q.jumpToEnd()})})):f._lastSelectedIndex&&f.recoverOriginalLine(f._lastSelectedIndex-1);f.lastTreeData=f.treeData;f.lastNumberOfNodes=m.length;f.cursorPosition={row:0,column:0};0<f.selectedIndex&&f.renderSelectedLine(f.selectedIndex-1)})}finally{this._updating=
!1}}}},{key:"buildViewState",value:function(a){var f=this;"function"!==typeof a&&(a=function(r){return r});var m=this.selectedNode?a(this.selectedNode):null,q=new Map;uf.tree.prewalk(this.treeData.root,function(r){return q.set(a(r),f.treeData.isCollapsed(r))},function(r){return f.treeData.getChildrenIfUncollapsed(r)});return{selectionId:m,collapsedMap:q,scroll:this.scroll}}},{key:"applyViewState",value:function(a,f){var m=this,q,r,u,v,y,z,B,C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:"function"!==
typeof f&&(f=function(F){return F}),q=a,r=q.selectionId,u=q.collapsedMap,v=q.scroll,y=0,z=-1;case 2:B=m.nodes;if(y>=B.length){G.jumpTo(3);break}C=f(B[y]);r===C&&(z=y);if(!u.has(C)||u.get(C)){G.jumpTo(4);break}return G.yield(m.treeData.collapse(B[y],!1),4);case 4:y++;G.jumpTo(2);break;case 3:return m.selectedIndex=z,m.update(),m.scroll=v,m.scrollSelectionIntoView(),G.yield(uf.promise.delay(0),0)}})}},{key:"maintainViewStateWhile",value:function(a,f){var m=this,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){return 1==
r.nextAddress?(q=m.buildViewState(f),r.yield(a(),2)):r.yield(m.applyViewState(q,f),0)})}},{key:"onNodeCollapseChanged",value:function(a){var f=a.node,m=a.isCollapsed,q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return q.resetCache(),u.setCatchFinallyBlocks(2),u.yield(q.treeData.collapse(f,m),4);if(2!=u.nextAddress)return uf.signal(q,"nodeCollapseChanged",{node:f,isCollapsed:m}),q.update(),u.leaveTryBlock(0);r=u.enterCatchBlock();q.showError(r);u.jumpToEnd()})}},
{key:"uncollapse",value:function(a){a=void 0===a?this.selectedNode:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?a&&f.treeData.isCollapsed(a)?m.yield(f.onNodeCollapseChanged({node:a,isCollapsed:!1}),2):m.return():m.return(a)})}},{key:"collapse",value:function(a){a=void 0===a?this.selectedNode:a;var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?!a||f.treeData.isCollapsed(a)?m.return():m.yield(f.onNodeCollapseChanged({node:a,
isCollapsed:!0}),2):m.return(a)})}},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(a){var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){return 1==q.nextAddress?(m=f,q.yield(f.treeData.followPath(a),2)):q.return(m.selectedNode=q.yieldResult)})}},{key:"gotoIndex",value:function(a){this.selectedNode=this.nodes[a];this.scrollIndexIntoView(a)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&
this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(a){this.scrollToIndex(a,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,"center")}},{key:"scrollToIndex",value:function(a){this.scrollPositionIntoView({row:a-1,column:0})}},{key:"contextMenuForNode",value:function(a,f){uf.signal(this,"contextMenuRequested",{node:a,evt:f})}},{key:"onKeyDown",value:function(a){var f=this.world().focusedMorph;if(!f.isText||
f.readOnly)return zb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a)}},{key:"onDragStart",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a);var f=this.textAttributeAtPoint(a.positionIn(this))||{},m=f.onDragStart,q=f.onDrag;f=f.onDragEnd;q&&(this._onDragHandler=q);f&&(this._onDragEndHandler=f);m&&m(a)}},{key:"onDrag",value:function(a){this._onDragHandler?this._onDragHandler(a):zb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,
a)}},{key:"onDragEnd",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onDragEnd",this).call(this,a);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(a);delete this._onDragEndHandler}},{key:"onMouseDown",value:function(a){var f=this,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress)return m=f.textPositionFromPoint(a.positionIn(f)),q=m.row,r=m.column,u=f.nodes[q+1],u?!f.treeData.isLeaf(u)&&4>r?z.yield(u.isCollapsed,
3):(f.selectedIndex!=q+1&&(f.selectedIndex=q+1),z.jumpTo(2)):z.return();2!=z.nextAddress&&(z.yieldResult?f.uncollapse(u):f.collapse(u));v=f.textAttributeAt({row:q,column:r})||{};(y=v.onMouseDown)&&y(a);z.jumpToEnd()})}},{key:"onMouseUp",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onMouseUp",this).call(this,a);var f=(this.textAttributeAtPoint(a.positionIn(this))||{}).onMouseUp;f&&f(a)}},{key:"onHoverIn",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,
a);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",this).call(this,a);!uf.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(a){if(a.targetMorph===this){a.stop();var f=this.textPositionFromPoint(a.positionIn(this));(f=this.nodes[f.row+1])&&this.contextMenuForNode(f,a)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"select node above"},
{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return uf.treeCommands}},{key:"highlightChangedNodes",value:function(a){this.treeData.diff(a).forEach(function(f){f=$jscomp.makeIterator(f);var m=f.next().value;f.next();return m.renderedNode&&m.renderedNode.highlight()})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:uf.Color.rgb(21,101,192)},fontFamily:{defaultValue:uf.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},readOnly:{defaultValue:!0},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},
lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},padding:{defaultValue:uf.Rectangle.inset(3)},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/tree/light"}}},resizeNodes:{defaultValue:!1,set:function(a){this.setProperty("resizeNodes",a);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(a){this.setProperty("treeData",a);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?
this.nodes.indexOf(this.selectedNode):-1},set:function(a){this.selectedNode=this.nodes[a]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},defaultViewState:{get:function(){return Object.assign({},zb._get(Object.getPrototypeOf(l),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(a){this.setProperty("selectedNode",a);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?
this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:uf.Color.white,set:function(a){this.setProperty("selectionFontColor",a)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:uf.Color.rgbHex("333"),set:function(a){this.setProperty("nonSelectionFontColor",a)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],
e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:1470,end:17455})}(uf.Text));uf.Tree=eM;uf.Tree=eM;uf.Tree=eM;var fM=wa("bw",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/tree.js"),l=e.hasOwnProperty("TreeData")&&"function"===typeof e.TreeData?e.TreeData:e.TreeData=
function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){this.root=a;this.parentMap=new WeakMap}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(a){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(a){throw Error("Not yet implemented");
}},{key:"collapse",value:function(a,f){throw Error("Not yet implemented");}},{key:"getChildren",value:function(a){throw Error("Not yet implemented");}},{key:"isLeaf",value:function(a){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(a){return this.isCollapsed(a)?[]:this.getChildren(a)}},{key:"safeDisplay",value:function(a){try{return this.display(a)}catch(f){return"[TreeData] Error when trying to display node: "+f}}},{key:"nodeToString",value:function(a){a=this.safeDisplay(a);
return"string"===typeof a?a:a&&Array.isArray(a)?a.map(function(f,m){return 0===m%2?f:""}).join(""):String(a)}},{key:"parentNode",value:function(a){var f=this;return this.parentMap.get(a)||uf.tree.detect(this.root,function(m){return!f.isLeaf(m)&&f.getChildrenIfUncollapsed(m).includes(a)},function(m){return f.getChildrenIfUncollapsed(m)})}},{key:"nodeWithSiblings",value:function(a){return(a=this.parentNode(a))?this.getChildrenIfUncollapsed(a):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(a){return a.node})}},
{key:"asListWithIndexAndDepth",value:function(a){var f=this;a=void 0===a?!1:a;var m=[];uf.tree.prewalk(this.root,function(q,r,u){return m.push({node:q,depth:u,i:r})},function(q){return f.getChildrenIfUncollapsed(q)});return a?uf.arr.filter(m,a):m}},{key:"pathOf",value:function(a){for(var f=[];a;)f.unshift(a),a=this.parentNode(a);return f}},{key:"followPath",value:function(a,f,m){m=void 0===m?this.root:m;var q=this,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:f||
(f=function(B,C){return B===C});r=a.findIndex(function(B){return f(B,m)});a=a.slice(r+1);if(!a.length)return z.return(null);u=m;case 2:if(!a.length){z.jumpTo(3);break}if(!q.isCollapsed(u)){z.jumpTo(4);break}return z.yield(q.collapse(u,!1),4);case 4:v=a.shift();y=q.getChildrenIfUncollapsed(u).find(function(B){return f(v,B)});if(!y)throw Error("Cannot descend into tree, next node of "+a.join(".")+" not found at "+q.safeDisplay(u));u=y;z.jumpTo(2);break;case 3:return z.return(u)}})}},{key:"diff",value:function(a){var f=
[],m=this.asListWithIndexAndDepth();a=a.asListWithIndexAndDepth();if(m.length!=a.length)return[];m=$jscomp.makeIterator(uf.arr.zip(m,a));for(a=m.next();!a.done;a=m.next()){var q=$jscomp.makeIterator(a.value);a=q.next().value;q=q.next().value;uf.obj.equals(a.node.value,q&&q.node.value)||f.push([a.node,q.node])}return f}},{key:"patch",value:function(a){var f=this.diff(a);if(0<f.length){a=$jscomp.makeIterator(f);for(f=a.next();!f.done;f=a.next()){var m=$jscomp.makeIterator(f.value);f=m.next().value;
m=m.next().value;f.value=m.value}return this}return a}},{key:"uncollapseAll",value:function(a,f,m){f=void 0===f?0:f;var q=this,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:if(m){v.jumpTo(2);break}return v.yield(q.uncollapseAll(a,f,q.root),3);case 3:return v.return(v.yieldResult);case 2:if(!a(m,f)){v.jumpTo(0);break}if(!m.isCollapsed){v.jumpTo(5);break}return v.yield(q.collapse(m,!1),6);case 6:case 5:u=v.forIn(m.children);case 7:if(null==(r=u.getNext()))v.jumpTo(0);
else return v.yield(q.uncollapseAll(a,f+1,m.children[r]),7)}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TreeData"}}],e,{pathInPackage:function(){return"tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17465,end:22466})}(void 0));uf.TreeData=fM;uf.TreeData=fM;uf.TreeData=fM;uf.treeCommands=[{name:"select via filter",
exec:function(b){var e,l,a,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return e=b.treeData,e.asListWithIndexAndDepth(),e.asListWithIndexAndDepth().map(function(u){return Object.assign(u,{string:e.nodeToString(u.node)})}),l=uf.string.lines(uf.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e))),a=e.asList().map(function(u,v){return{isListItem:!0,string:l[v],value:u}}),r.yield(b.world().filterableListPrompt("Select item",a),
2);f=r.yieldResult;m=$jscomp.makeIterator(f.selected);if(q=m.next().value)b.selectedNode=q,b.scrollSelectionIntoView();return r.return(!0)})}},{name:"page up",exec:function(b){b.scrollPageUp(1);var e=b.scroll,l=b.padding.top(),a=e.y;e=b.lineHeightCache.findIndex(function(f){return a<=(l+=f)});e--;b.gotoIndex(Math.max(1,e));return!0}},{name:"page down",exec:function(b){b.scrollPageDown(1);var e=b.scroll,l=b.padding.top(),a=e.y+b.height;e=b.lineHeightCache.findIndex(function(f){return a<=(l+=f)});e--;
b.gotoIndex(Math.min(e,b.nodes.length-1));return!0}},{name:"goto first item",exec:function(b){b.gotoIndex(1);return!0}},{name:"goto last item",exec:function(b){b.gotoIndex(b.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)+1])b.selectedNode=e,b.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(b){var e=b.selectedNodeAndSiblings;if(e=e[e.indexOf(b.selectedNode)-1])b.selectedNode=e,b.scrollSelectionIntoView();
return!0}},{name:"goto parent",exec:function(b){b.selectedNode&&(b.selectedNode=b.treeData.parentNode(b.selectedNode),b.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(b){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){return 1==l.nextAddress?(e=b.selectedNode,e?b.treeData.isCollapsed(e)?(b.selectedNode=b.treeData.parentNode(e),b.scrollSelectionIntoView(),l.jumpTo(2)):l.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!0}),2):l.return(!0)):
l.return(!0)})}},{name:"uncollapse selected node",exec:function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?b.selectedNode?e.yield(b.onNodeCollapseChanged({node:b.selectedNode,isCollapsed:!1}),2):e.jumpTo(2):e.return(!0)})}},{name:"collapse or uncollapse all siblings",exec:function(b,e){function l(z){return uf.arr.filter(m.getChildrenIfUncollapsed(z),function(B){return!m.isLeaf(B)})}function a(z,B){return Promise.all(z.map(function(C){return b.onNodeCollapseChanged({node:C,
isCollapsed:B})}))}e=void 0===e?{what:"collapse"}:e;var f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==z.nextAddress){f="collapse"===e.what;m=b.treeData;if(f){if(m.isCollapsed(b.selectedNode))return z.return(!0);r=m.parentNode(b.selectedNode);u=-1;uf.tree.prewalk(r,function(B,C,G){G<u||(G>u&&(u=G,q=[]),G===u&&uf.arr.pushIfNotIncluded(q,m.parentNode(B)))},m.getChildrenIfUncollapsed.bind(m))}else for(v=uf.arr.compact([m.parentNode(b.selectedNode)]);v.length;){q=uf.arr.flatmap(v,
function(B){return l(B)});y=q.every(function(B){return m.isCollapsed(B)===f});if(!y)break;v=q}return z.yield(a(q,f),2)}b.scrollSelectionIntoView();return z.return(!0)})}},{name:"select node above",exec:function(b){var e=b.nodes,l=b.selectedIndex;1>=l&&(l=e.length);b.selectedNode=e[l-1];b.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(b){var e=b.nodes,l=b.selectedIndex;if(-1>=l||l>=e.length-1)l=0;b.selectedNode=e[l+1];b.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",
exec:function(b){if(b.selectedNode){var e=b.scroll,l=e.x;e=e.y;var a=b.lineBounds(b.selectedIndex),f=a.topLeft();a=b.height-a.height;e=2>Math.abs(f.y-e)?f.y-a:2>Math.abs(f.y-e-.5*a)?f.y:f.y-.5*a;b.scroll=uf.pt(l,e);return!0}}},{name:"print contents in text window",exec:function(b){var e=b.treeData;e=uf.string.printTree(e.root,e.nodeToString.bind(e),e.getChildrenIfUncollapsed.bind(e));var l=b.getWindow()?"printed "+b.getWindow().title:b.name;return b.world().execCommand("open text window",{title:l,
content:e,name:l,fontFamily:uf.config.codeEditor.defaultStyle.fontFamily})}}];var Goa=Object.freeze({__proto__:null,Tree:eM,TreeData:fM}),my=lively.FreezerRuntime.recorderFor("lively.components/iframe.js");my.promise=oe;my.HTMLMorph=ky;var gM=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),l=e.hasOwnProperty("IFrameMorph")&&"function"===typeof e.IFrameMorph?e.IFrameMorph:e.IFrameMorph=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a.src||a.srcdoc||(a.srcdoc="<p>Empty iframe</p>");zb._get(Object.getPrototypeOf(l.prototype),Symbol.for("lively-instance-initialize"),this).call(this,a)}},{key:"changeSrc",value:function(a,f){var m=this,q=this.iframe,r=this._loadPromise;r&&!r.loaded&&r.reject();this._loadPromise=my.promise.deferred();this._loadPromise.loaded=!1;q.onload=function(u){m._loadPromise.loaded=!0;m._loadPromise.resolve(u)};f=a||f;
r=a?"src":"srcdoc";a=a?"srcdoc":"src";this.addValueChange(a,null);this.addValueChange(r,f);q.removeAttribute(a);q.setAttribute(r,f);this._loadPromise[r]=f}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",value:function(a){return this.innerWindow.eval("("+a+")();")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(a){var f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==
v.nextAddress)return v.yield(a.whenRendered(),2);if(3!=v.nextAddress)return f=a.env.renderer.getNodeForMorph(a),m=my.IFrameMorph.open({srcdoc:f.outerHTML}),v.yield(m.whenLoaded(),3);q=m.innerWindow.document;q.body.style.whiteSpace="normal";q.body.style.margin="0.5cm";q.querySelector(".Text").style.width="100%";q.querySelector(".Text").style.overflow="visible";q.querySelectorAll(".marker-layer-part").forEach(function(y){return y.parentNode.removeChild(y)});r=q.querySelector(".text-layer");r.style.whiteSpace=
"pre-wrap";u=Array.from(r.querySelectorAll("div"));u.forEach(function(y){y.childNodes[0]&&(Array.from(y.childNodes).forEach(function(z){return r.insertBefore(z,y)}),r.insertBefore(q.createElement("br"),y),r.removeChild(y))});m.innerWindow.print();m.getWindow().remove();v.jumpToEnd()})}},{key:"open",value:function(a){a=void 0===a?{}:a;return(new this(a)).openInWindow({title:a.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},
innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(a){this.changeSrc(a,null)}},srcdoc:{after:["domNode"],set:function(a){this.changeSrc(null,a)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",
!0));return this._domNode},set:function(a){return this._domNode=a}}}}}],e,{pathInPackage:function(){return"iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:622,end:6160})}(my.HTMLMorph);my.IFrameMorph=gM;my.IFrameMorph=gM;my.IFrameMorph=gM;var Hoa=Object.freeze({__proto__:null,IFrameMorph:gM}),we=lively.FreezerRuntime.recorderFor("lively.components/window.js");
we.arr=Qe;we.promise=oe;we.pt=nf;we.LinearGradient=Il;we.Color=xf;we.Rectangle=Pd;we.Label=Rs;we.morph=sb;we.Morph=Mj;we.HorizontalLayout=Os;we.StyleSheet=Eu;we.connect=Oe;we.signal=oj;we.easings=lr;var vT=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/window.js"),l=e.hasOwnProperty("Window")&&"function"===typeof e.Window?e.Window:e.Window=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,
b,[{key:"build",value:function(){this.submorphs=[this.buildHeader(),this.buildResizer()]}},{key:"openWindowMenu",value:function(){var a=this,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){return 1==z.nextAddress?(f=a.world()||a.env.world,m=a.targetMorph.world(),q=m.openMenu,r=[["Change Window Title",function(){var B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return C.yield(f.prompt("Enter New Name",{input:a.title}),2);if(B=C.yieldResult)a.title=
B;C.jumpToEnd()})}],["Align and resize",[{alias:"full",target:f,command:"resize active window",args:{window:a,how:"full"}},{alias:"left",target:f,command:"resize active window",args:{window:a,how:"left"}},{alias:"center",target:f,command:"resize active window",args:{window:a,how:"center"}},{alias:"right",target:f,command:"resize active window",args:{window:a,how:"right"}},{alias:"top",target:f,command:"resize active window",args:{window:a,how:"top"}},{alias:"bottom",target:f,command:"resize active window",
args:{window:a,how:"bottom"}},{alias:"reset",target:f,command:"resize active window",args:{window:a,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:f,command:"toggle minimize all except active window"},{alias:"close all except this",target:f,command:"close all except active window"},{isDivider:!0},{alias:"minimize all",target:f,command:"toggle minimize all windows"},{alias:"close all",target:f,command:"close all windows"}]],{isDivider:!0}],u=r.concat,v=$jscomp,y=v.arrayFromIterable,
z.yield(a.targetMorph.menuItems(),2)):z.return(q.call(m,u.call(r,y.call(v,z.yieldResult))))})}},{key:"toggleFader",value:function(a){var f=this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:m=f.getSubmorphNamed("fader")||f.addMorph({name:"fader",fill:we.Color.black.withA(.5),opacity:0,extent:f.extent});if(a){q=f.world().visibleBoundsExcludingTopBar().translateForInclusion(f.bounds());f._originalBounds=f.bounds();f.animate({bounds:q,duration:300});
f.borderColor=we.Color.gray.darker();f._faderTriggered=!0;m.opacity=1;r.jumpTo(0);break}f._originalBounds&&(f.animate({bounds:f._originalBounds,duration:300}),f._originalBounds=null);f._faderTriggered=!1;return r.yield(f.whenRendered(),3);case 3:return r.yield(we.promise.delay(100),4);case 4:return f.borderColor=we.Color.gray,f._faderTriggered?r.return():r.yield(m.animate({opacity:0,duration:300}),5);case 5:m.remove(),r.jumpToEnd()}})}},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",
value:function(){return new we.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){try{var a=this.innerBounds(),f=this.ui.windowTitle,m=this.ui.resizer,q=a.withHeight(25),r=this.ui.header,u=this.ui.windowControls.bounds().right()+3,v=q.withLeftCenter(we.pt(u,q.height/2));m.bottomRight=a.bottomRight();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());f.textBounds().width<q.width-2*u?f.center=
q.center():f.leftCenter=v.leftCenter();r.width=this.width}catch(y){}}},{key:"ensureNotOverTheTop",value:function(){var a=this,f=this.world();if(f){var m=this.globalBounds();f.withTopBarDo(function(q){m.top()<q.height&&a.moveBy(we.pt(0,q.height-m.top()))})}}},{key:"buildHeader",value:function(){return we.morph({name:"header",extent:we.pt(this.width,50),submorphs:[we.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",
value:function(){var a=this.getSubmorphNamed("close")||we.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[we.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});we.connect(a,"onMouseDown",this,"close");var f=this.getSubmorphNamed("minimize")||we.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[we.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle",
"default"]})]});we.connect(f,"onMouseDown",this,"minimized",{updater:function(q){q(!this.targetObj.minimized)}});if(this.resizable){var m=this.getSubmorphNamed("menu")||we.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[we.Label.icon("chevron-down",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});we.connect(m,"onMouseDown",this,"openWindowMenu")}return we.arr.compact([a,f,m])}},{key:"buildTitleLabel",value:function(){var a=we.morph({padding:we.Rectangle.inset(0,
2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});we.connect(a,"onDoubleMouseDown",this,"toggleMaximize");return this.addMorph(a)}},{key:"resizeBy",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"resizeBy",this).call(this,a);this.relayoutWindowControls()}},{key:"resizeAt",value:function(a){a=$jscomp.makeIterator(a);var f=a.next().value;a=a.next().value;var m=this.bounds();switch(f){case "right":this.resizeBy(a.withY(0));
break;case "bottom right":this.resizeBy(a);break;case "bottom":this.resizeBy(a.withX(0));break;case "left":f=this.right;this.resizeBy(a.withY(0).negated());this.right=f;break;case "bottom left":f=this.right;this.resizeBy(a.scaleByPt(we.pt(-1,1)));this.right=f;break;case "top":f=m.x;var q=m.y+a.y;var r=m.width;a=m.height-a.y;this.setBounds(new we.Rectangle(f,q,r,a));break;case "top left":f=m.x+a.x;q=m.y+a.y;r=m.width-a.x;a=m.height-a.y;this.setBounds(new we.Rectangle(f,q,r,a));break;case "top right":f=
m.x,q=m.y+a.y,r=m.width+a.x,a=m.height-a.y,this.setBounds(new we.Rectangle(f,q,r,a))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){var a=this.getSubmorphNamed("resizer"),f=$jscomp.makeIterator(a.submorphs),m=f.next().value,q=f.next().value,r=f.next().value,u=f.next().value,v=f.next().value,y=f.next().value,z=f.next().value;f=f.next().value;m.height=this.height-10;m.bottomRight=this.extent.subXY(0,10);q.bottomRight=this.extent;r.height=this.height-10;r.bottomLeft=we.pt(0,this.height-
10);u.bottomLeft=we.pt(0,this.height);v.width=this.width-20;v.bottomLeft=we.pt(10,this.height);y.width=this.width-20;y.bottomLeft=we.pt(10,2.5);z.topLeft=we.pt(0,0);f.topRight=we.pt(this.width,0);a.position=we.pt(0,0)}},{key:"buildResizer",value:function(){var a,f,m,q,r,u,v;var y=we.Color.transparent;var z=we.morph({name:"resizer",fill:we.Color.transparent,position:we.pt(0,0),submorphs:[a=we.morph({name:"right resizer",fill:y,width:10,draggable:!0,nativeCursor:"ew-resize"}),f=we.morph({name:"bottom right resizer",
fill:y,extent:we.pt(10,10),draggable:!0,nativeCursor:"nwse-resize"}),m=we.morph({name:"left resizer",fill:y,width:10,draggable:!0,nativeCursor:"ew-resize"}),q=we.morph({name:"bottom left resizer",draggable:!0,fill:y,extent:we.pt(10,10),nativeCursor:"nesw-resize"}),r=we.morph({name:"bottom resizer",draggable:!0,fill:y,height:10,nativeCursor:"ns-resize"}),u=we.morph({name:"top resizer",draggable:!0,fill:y,height:2.5,nativeCursor:"ns-resize"}),v=we.morph({name:"top left resizer",draggable:!0,fill:y,
extent:we.pt(10,10),nativeCursor:"nwse-resize"}),y=we.morph({name:"top rigth resizer",draggable:!0,fill:y,extent:we.pt(10,10),nativeCursor:"nesw-resize"})]});we.connect(u,"onDrag",this,"resizeAt",{converter:function(B){return["top",B.state.dragDelta]}});we.connect(y,"onDrag",this,"resizeAt",{converter:function(B){return["top right",B.state.dragDelta]}});we.connect(v,"onDrag",this,"resizeAt",{converter:function(B){return["top left",B.state.dragDelta]}});we.connect(f,"onDrag",this,"resizeAt",{converter:function(B){return["bottom right",
B.state.dragDelta]}});we.connect(a,"onDrag",this,"resizeAt",{converter:function(B){return["right",B.state.dragDelta]}});we.connect(r,"onDrag",this,"resizeAt",{converter:function(B){return["bottom",B.state.dragDelta]}});we.connect(m,"onDrag",this,"resizeAt",{converter:function(B){return["left",B.state.dragDelta]}});we.connect(q,"onDrag",this,"resizeAt",{converter:function(B){return["bottom left",B.state.dragDelta]}});this.addMorph(z);this.relayoutResizer();return z}},{key:"toggleMaximize",value:function(){this.minized||
(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a.minimized=!a.minimized;f.jumpToEnd()})}},{key:"applyMinimize",value:function(){var a=this,f,m,q,r,u,v,y,z,B,C,G,F,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==
L.nextAddress){if(!a.targetMorph)return L.return();f=a;m=f.nonMinizedBounds;q=f.minimized;r=f.width;u=a.ui;v=u.windowTitle;y=u.resizer;z=a.bounds();B=a.getSubmorphNamed("minimize");C=we.easings.outQuad;if(!q)return a.minimizedBounds=z,a.withMetaDo({metaInteraction:!0},function(){a.targetMorph&&(a.targetMorph.visible=!0)}),m=a.world().visibleBoundsExcludingTopBar().translateForInclusion(m||z),a.animate({bounds:m,styleClasses:["neutral","active"].concat($jscomp.arrayFromIterable(we.arr.without(a.styleClasses,
"minimzed"))),duration:100,easing:C}),B.tooltip="collapse window",L.jumpTo(2);a.nonMinizedBounds=z;G=(a.minimizedBounds||z).withExtent(we.pt(r,28));F=v.textBounds();N=a.get("window controls").bounds().right()+3;F.width+2*N<G.width&&(G=G.withWidth(F.width+N+5));a.minimizedBounds=G;B.tooltip="uncollapse window";return L.yield(a.animate({styleClasses:["minimized","active"].concat($jscomp.arrayFromIterable(we.arr.without(a.styleClasses,"neutral"))),bounds:G,duration:100,easing:C}),3)}2!=L.nextAddress&&
a.targetMorph&&(a.targetMorph.isComponent?a.targetMorph.top=a.height:a.targetMorph.visible=!1);v.reactsToPointer=!a.minimized;y.visible=!a.minimized;a.relayoutWindowControls();L.jumpToEnd()})}},{key:"setBounds",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},{key:"setBounds",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"setBounds",this).call(this,a);this.relayoutResizer();this.relayoutWindowControls()}},
{key:"close",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return a.targetMorph&&"function"===typeof a.targetMorph.onWindowClose?r.yield(a.targetMorph.onWindowClose(),3):r.jumpTo(2);2!=r.nextAddress&&(f=r.yieldResult);if(!1===f)return r.return();m=a.world();a.deactivate();a.remove();(q=m.activeWindow()||we.arr.last(m.getWindows()))&&q.activate();we.signal(a,"windowClosed",a);r.jumpToEnd()})}},{key:"onMouseUp",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),
"onMouseUp",this).call(this,a);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onMouseDown",this).call(this,a);this.activate(a);this.minimized||this.ui.resizer.submorphs.includes(a.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",value:function(a){var f=this;zb._get(Object.getPrototypeOf(l.prototype),"onDragStart",this).call(this,a);this.targetMorph&&(a.state.origReactsToPointer=this.targetMorph.reactsToPointer,
this.withMetaDo({metaInteraction:!0},function(){f.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(a){var f=this;zb._get(Object.getPrototypeOf(l.prototype),"onDragEnd",this).call(this,a);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){f.targetMorph.reactsToPointer=a.state.origReactsToPointer});this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onDrag",this).call(this,a);this.ensureNotOverTheTop()}},
{key:"focus",value:function(){var a=this.world(),f=this.targetMorph;a&&f&&(!a.focusedMorph||a.focusedMorph!==f&&!f.isAncestorOf(a.focusedMorph))&&f.focus()}},{key:"isActive",value:function(){var a=this.world();return a&&"bold"==this.ui.windowTitle.fontWeight?we.arr.last(a.getWindows())===this:!1}},{key:"activate",value:function(a){var f=this;if(this.isActive())return this.bringToFront(),this.focus(a),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){f.master=
{auto:"styleguide://System/window/light/active"}});this.world()?this.bringToFront():this.openInWorldNearHand();var m=this.world()||this.env.world;we.arr.without(m.getWindows(),this).forEach(function(q){return q.deactivate()});this.focus(a);we.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return f.relayoutWindowControls()});return this}},{key:"deactivate",value:function(){var a=this;this.master&&"styleguide://System/window/light/inactive"==this.master.auto||
(this.master.whenApplied().then(function(){a.master={auto:"styleguide://System/window/light/inactive"}}),this.relayoutWindowControls(),this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return zb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"[window] change title",
exec:function(a,f){f=void 0===f?{}:f;var m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return(m=f.title)?r.jumpTo(2):r.yield(a.world().prompt("Enter new title",{input:a.title,historyId:"lively.morphic-window-title-hist"}),3);2!=r.nextAddress&&(m=r.yieldResult);if(q=m)a.title=q;return r.return(!0)})}}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},
ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title")}}},master:{initialize:function(){this.master={auto:"styleguide://System/window/light/active"}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"hidden"},resizable:{defaultValue:!0},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(a){var f=this,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){if(1==
z.nextAddress){m="string"===typeof a?[a,{}]:a;q=[];for(r=0;r<m.length;r+=2)u=m[r],v=m[r+1],u=u.replace(/\n/g,""),y=u.length+0-100,0<y&&(u=u.slice(0,-y)),q.push(u,v||{});f.ui.windowTitle.value=q;return z.yield(f.whenRendered(),2)}f.relayoutWindowControls();z.jumpToEnd()})}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return we.arr.withoutAll(this.submorphs,[this.get("header"),this.get("resizer")])[0]},set:function(a){var f=[this.get("header"),this.get("resizer")];we.arr.withoutAll(this.submorphs,
f).forEach(function(m){return m.remove()});a&&this.addMorph(a,this.resizable?this.get("resizer"):!1);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(a){this.setProperty("minimized",a);this.applyMinimize()}},maximized:{set:function(a){this.setProperty("maximized",a);this.applyMaximize()}}}}}],e,{pathInPackage:function(){return"window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:343,end:20831})}(we.Morph);vT=we.Window;var wT=wa("aT",vT);we.default=vT;var Wd=lively.FreezerRuntime.recorderFor("lively.components/prompts.js");Wd.Rectangle=Pd;Wd.rect=Ff;Wd.Color=xf;Wd.pt=nf;Wd.morph=sb;Wd.VerticalLayout=hy;Wd.Morph=Mj;Wd.StyleSheet=Eu;Wd.Text=Qs;Wd.GridLayout=iy;Wd.Icon=Wn;Wd.HorizontalLayout=Os;Wd.InputLine=$F;Wd.PasswordInputLine=ly;Wd.arr=Qe;Wd.obj=lf;Wd.promise=oe;Wd.connect=Oe;Wd.List=OC;Wd.FilterableList=
cG;Wd.RadioButtonGroup=bG;Wd.RadioButton=aG;var hM=function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("AbstractPrompt")&&"function"===typeof e.AbstractPrompt?e.AbstractPrompt:e.AbstractPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:Symbol.for("lively-instance-initialize"),value:function(a){a=void 0===a?{}:a;zb._get(Object.getPrototypeOf(l.prototype),
Symbol.for("lively-instance-initialize"),this).call(this,Wd.obj.dissoc(a,["label","commands","keybindings"]));this.build(a);a.commands&&this.addCommands(a.commands);a.keybindings&&this.addKeyBindings(a.keybindings)}},{key:"isPrompt",get:function(){return!0}},{key:"resolve",value:function(a){return this.answer.resolve(a)}},{key:"reject",value:function(a){return this.answer.resolve(a)}},{key:"activate",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){a.focus();
a.answer=Wd.promise.deferred();a._isActive=!0;Wd.promise.finally(a.answer.promise,function(){return a._isActive=!1});a.autoRemove&&Wd.promise.finally(a.answer.promise,function(){return a.fadeOut(200)});return f.return(a.answer.promise)})}},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"build",value:function(){throw Error("Not yet implemented");}},{key:"applyLayout",value:function(){throw Error("Not yet implemented");}},{key:"keybindings",get:function(){return zb._get(Object.getPrototypeOf(l.prototype),
"keybindings",this).concat([{keys:"Enter",command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}])}},{key:"commands",get:function(){var a=this;return zb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"resolve",exec:function(f,m){a.resolve(m);return!0}},{name:"reject",exec:function(f,m){a.reject(m);return!0}}])}},{key:"transitionTo",value:function(a,f){f=void 0===f?300:f;var m=this,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){q=
Wd.morph({fill:m.fill,borderRadius:m.borderRadius});r=Wd.morph({fill:null,origin:Wd.pt(5,5)});a.opacity=0;a.fill=Wd.Color.transparent;a.openInWorld();m.fill=Wd.Color.transparent;$world.addMorph(q,m);q.setBounds(m.bounds());r.openInWorld();r.addMorph(a);a.center=r.origin;r.center=q.center=m.center;r.scale=a.width/m.width;q.whenRendered().then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return m.animate({scale:m.width/a.width,opacity:0,duration:f}),
a.animate({opacity:1,duration:f}),r.animate({scale:1,duration:f}),v.yield(q.animate({bounds:r.bounds(),duration:f}),2);a.fill=q.fill;$world.addMorph(a);q.remove();m.remove();r.remove();v.jumpToEnd()})});u.jumpToEnd()})}},{key:"addNamed",value:function(a,f){var m=this.getSubmorphNamed(a)||this.addMorph(f.isMorph?f:Wd.morph(Object.assign({},f,{name:a})));f.label&&(m.label=f.label);f.isMorph&&(m.name=a);return m}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"AbstractPrompt"}},{key:"properties",
get:function(){return{fill:{defaultValue:Wd.Color.black.withA(.6)},extent:{defaultValue:Wd.pt(300,80)},borderRadius:{defaultValue:5},dropShadow:{initialize:function(){this.dopShadow=!0}},clipMode:{defaultValue:"hidden"},_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},epiMorph:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{derived:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("promptTitle").value},set:function(a){this.getSubmorphNamed("promptTitle").value=
a}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:446,end:3935})}(Wd.Morph);Wd.AbstractPrompt=hM;Wd.AbstractPrompt=hM;Wd.AbstractPrompt=hM;var iM=wa("b1",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("InformPrompt")&&"function"===
typeof e.InformPrompt?e.InformPrompt:e.InformPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"build",value:function(a){var f=this,m=a=void 0===a?{}:a,q=m.label,r=this.addNamed("promptTitle",{type:"text",lineWrapping:m.lineWrapping});m=this.addNamed("ok button",{type:"button",label:"OK",width:100});this.addNamed("button wrapper",{submorphs:[m]});r.textString=q;Wd.connect(m,"fire",this,"resolve");
a.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){if(r.document){var u=f.center;f.width=Math.max(f.width,r.document.width+100);f.align(f.center,u)}f.opacity=1}))}},{key:"keybindings",get:function(){return zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"InformPrompt"}},{key:"example",value:function(){$world.inform("Computer says no.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},
master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/inform"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:3944,end:5259})}(Wd.AbstractPrompt));Wd.InformPrompt=iM;Wd.InformPrompt=iM;Wd.InformPrompt=iM;var jM=wa("b2",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),
l=e.hasOwnProperty("ConfirmPrompt")&&"function"===typeof e.ConfirmPrompt?e.ConfirmPrompt:e.ConfirmPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"build",value:function(a){var f=this,m=this.addNamed("promptTitle",{type:"text"});m.value=a.label;a=this.addNamed("ok button",{type:"button",label:this.confirmLabel});var q=this.addNamed("cancel button",{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",
{submorphs:[a,q]});Wd.connect(a,"fire",this,"resolve");Wd.connect(q,"fire",this,"reject");m.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){m.lineWrapping=f.lineWrapping;var r=f.center;f.width=Math.max(f.width,m.document.width+100);f.center=r;f.opacity=1}))}},{key:"resolve",value:function(){zb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){zb._get(Object.getPrototypeOf(l.prototype),"resolve",
this).call(this,!1)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ConfirmPrompt"}},{key:"example",value:function(){$world.confirm("Isn't this a nice prompt.")}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/confirm"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:5306,end:6757})}(Wd.AbstractPrompt));Wd.ConfirmPrompt=jM;Wd.ConfirmPrompt=jM;Wd.ConfirmPrompt=jM;var kM=wa("b3",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("MultipleChoicePrompt")&&"function"===typeof e.MultipleChoicePrompt?e.MultipleChoicePrompt:e.MultipleChoicePrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"resolve",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,a||this.getSubmorphNamed("choices").value)}},{key:"build",value:function(a){var f=a=void 0===a?{choices:["No choice"]}:a;a=f.label;var m=f.choices;f=this.addNamed("ok button",{type:"button"});var q=this.addNamed("cancel button",{type:"button"});a&&(this.addNamed("promptTitle",{type:"text"}).value=a);var r=this.addNamed("choices",
{name:"choices",type:Wd.RadioButtonGroup});this.addNamed("button wrapper",{submorphs:[f,q]});f&&Wd.connect(f,"fire",this,"resolve");q&&Wd.connect(q,"fire",this,"reject");this.whenRendered().then(function(){r.choices=m})}},{key:"onKeyDown",value:function(a){if(/^[0-9]$/.test(a.keyCombo)){var f=this.getSubmorphNamed("button "+(Number(a.keyCombo)-1));if(f)return f.trigger(),a.stop()}return zb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a)}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"MultipleChoicePrompt"}},{key:"example",value:function(){$world.multipleChoicePrompt("Choose wisely:",{choices:[1,2,3]})}},{key:"properties",get:function(){return{title:{derived:!0,after:["submorphs"],set:function(a){this.getSubmorphNamed("title").value=a}},choices:{after:["submorphs"],derived:!0,set:function(a){var f;if(f=this.getSubmorphNamed("choices"))f.choices=a}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/multiple choice"}}}}}}],
e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:6846,end:8787})}(Wd.AbstractPrompt));Wd.MultipleChoicePrompt=kM;Wd.MultipleChoicePrompt=kM;Wd.MultipleChoicePrompt=kM;var lM=wa("b4",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("TextPrompt")&&
"function"===typeof e.TextPrompt?e.TextPrompt:e.TextPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"maxWidth",get:function(){return this.env.world.visibleBounds().width-20}},{key:"resolve",value:function(){var a=this.getSubmorphNamed("input");this.validate(a.input)?zb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,a.acceptInput()):a.indicateError(this.errorMessage)}},{key:"build",
value:function(a){var f=this,m=a.label,q=a.input,r=a.historyId;a=a.useLastInput;var u=this.addNamed("promptTitle",{type:"text"});u.value=m;m=this.addNamed("input",Wd.Text.makeInputLine({historyId:r,highlightWhenFocused:!1}));m.viewState.fastScroll=!1;m.textString=q||"";r&&a&&(q=Wd.arr.last(m.inputHistory.items))&&(m.textString=q);this.lineWrapping||(this.width=Math.max(this.width,u.textBounds().width+50));q=this.addNamed("ok button",{type:"button",label:this.confirmLabel});r=this.addNamed("cancel button",
{type:"button",label:this.rejectLabel});this.addNamed("button wrapper",{submorphs:[q,r]});Wd.connect(q,"fire",this,"resolve");Wd.connect(r,"fire",this,"reject");u.lineWrapping=this.lineWrapping;this.lineWrapping||(this.opacity=0,this.whenRendered().then(function(){var v=f.center;f.width=Math.max(350,u.document.width+100);f.opacity=1;f.center=v}));m.gotoDocumentEnd();m.scrollCursorIntoView()}},{key:"initLayout",value:function(){var a=this;if(!this.layout){var f=this.getSubmorphNamed("promptTitle"),
m=this.getSubmorphNamed("input");f.fit();this.whenRendered().then(function(){var q=Math.max(m.textBounds().width,f.textBounds().width)+20;a.width=Math.min(a.maxWidth,q);a.opacity=1});this.layout=new Wd.GridLayout({columns:[0,{paddingLeft:5},1,{paddingLeft:5,paddingRight:2.5,fixed:100},2,{paddingRight:5,paddingLeft:2.5,fixed:100},3,{paddingRight:5}],rows:[0,{fixed:f.textBounds().height+5,paddingBottom:5},1,{fixed:m.height},2,{fixed:35,paddingTop:5,paddingBottom:5}],grid:[["promptTitle","promptTitle",
"promptTitle","promptTitle"],["input","input","input","input"],[null,"ok button","cancel button",null]]})}}},{key:"focus",value:function(){this.getSubmorphNamed("input").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TextPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return 1==a.nextAddress?a.yield($world.prompt("enter",{input:"a little longer text"}),2):a.yield($world.prompt("enter\nsomething",{input:"???"}),0)})}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/text"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8796,end:12333})}(Wd.AbstractPrompt));Wd.TextPrompt=lM;Wd.TextPrompt=lM;Wd.TextPrompt=lM;var mM=wa("b5",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("EditPrompt")&&"function"===typeof e.EditPrompt?e.EditPrompt:e.EditPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"maxWidth",
get:function(){return this.env.world.visibleBounds().width-20}},{key:"build",value:function(a){var f=a.input,m=a.mode,q=a.textStyle,r=a.evalEnvironment,u=void 0===a.resolveTextAttributes?!1:a.resolveTextAttributes;this.addNamed("promptTitle",{type:"text",value:a.label});this.resolveTextAttributes=u;q||(q={});m&&!q.fontFamily&&(q.fontFamily="Monaco, monospace");var v=this.addNamed("editor",{type:"text"});v.value=f||"";Object.assign(v,q);v.changeEditorMode(m).then(function(){r&&v.editorPlugin&&Object.assign(v.editorPlugin.evalEnvironment,
r)});a=v.textBounds().width+50;a>this.width-25&&(this.width=Math.min(this.maxWidth,a+125));a=this.addNamed("ok button",{type:"button"});f=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,f]});Wd.connect(a,"fire",this,"resolve");Wd.connect(f,"fire",this,"reject");v.gotoDocumentEnd();v.scrollCursorIntoView()}},{key:"resolve",value:function(a){if(this.resolveTextAttributes)return zb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,this.getSubmorphNamed("editor").textAndAttributes);
var f=this.getSubmorphNamed("editor").textString.trim();if(this.historyId){a=Wd.InputLine.getHistory(this.historyId);a.items=a.items.filter(function(m){return m!==f});for(a.items.push(f);a.items.length>a.items.max;)a.items.shift();a.index=a.items.length;Wd.InputLine.setHistory(this.historyId,a)}return zb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,f)}},{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",
command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var a=this;return zb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"history back",exec:function(f,m){if(a.historyId){f=Wd.InputLine.getHistory(a.historyId);m=f.items;var q=f.index;f.index=--q;0>q&&(f.index=q=m.length-1);a.get("editor").undoManager.group();a.get("editor").textString=m[q];a.get("editor").undoManager.group()}return!0}},
{name:"browse history",exec:function(f,m){var q,r,u,v,y,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress){if(!a.historyId)return B.jumpTo(2);q=Wd.InputLine.getHistory(a.historyId);return B.yield(a.world().editListPrompt("input history "+a.historyId,q.items,{requester:a}),3)}2!=B.nextAddress&&(r=B.yieldResult,u=r.status,v=r.list,y=$jscomp.makeIterator(r.selections),z=y.next().value,"canceled"!==u&&(q.items=v,Wd.InputLine.setHistory(a.historyId,q),z&&(q.index=q.items.indexOf(z),
a.get("editor").textString=z)));return B.return(!0)})}},{name:"history forward",exec:function(f,m){if(a.historyId){f=Wd.InputLine.getHistory(a.historyId);m=f.items;var q=f.index;f.index=++q;q>=m.length&&(f.index=q=0);a.get("editor").undoManager.group();a.get("editor").textString=m[q];a.get("editor").undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.getSubmorphNamed("editor").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditPrompt"}},{key:"example",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield($world.editPrompt("enter",{input:"$world.show()",mode:"js",evalEnvironment:{context:23}}),2);a.editorPlugin.evalEnvironment;f.jumpToEnd()})}},{key:"properties",get:function(){return{extent:{defaultValue:Wd.pt(500,300)},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12342,end:17054})}(Wd.AbstractPrompt));Wd.EditPrompt=mM;Wd.EditPrompt=mM;Wd.EditPrompt=mM;var nM=wa("b6",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("PasswordPrompt")&&"function"===typeof e.PasswordPrompt?e.PasswordPrompt:e.PasswordPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||
this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"build",value:function(a){var f=a.placeholder;this.addNamed("promptTitle",{type:"text",value:a.label,fixedHeight:!0});this.addNamed("input",{type:Wd.PasswordInputLine,name:"input",placeholder:f||""});a=this.addNamed("ok button",{type:"button",label:"OK"});f=this.addNamed("cancel button",{type:"button",label:"CANCEL"});Wd.connect(a,"fire",this,"resolve");Wd.connect(f,"fire",this,"reject");this.addNamed("button wrapper",
{submorphs:[a,f]})}},{key:"resolve",value:function(){zb._get(Object.getPrototypeOf(l.prototype),"resolve",this).call(this,this.get("input").acceptInput())}},{key:"focus",value:function(){var a=this.get("input");a.whenRendered().then(function(){return a.focus()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"PasswordPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.passwordPrompt("Enter your secret password:"),
0)})}},{key:"properties",get:function(){return{maxWidth:{readOnly:!0,get:function(){return 800}},master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/password"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:17063,end:18408})}(Wd.AbstractPrompt));
Wd.PasswordPrompt=nM;Wd.PasswordPrompt=nM;Wd.PasswordPrompt=nM;var oM=wa("b7",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("ListPrompt")&&"function"===typeof e.ListPrompt?e.ListPrompt:e.ListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onChange",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,
a);"extent"==a.prop&&this.layout&&!this.layout.active&&(a=a.value.subPt(a.prevValue),this.getSubmorphNamed("prompt list").height+=a.y)}},{key:"getMaster",value:function(){return this.filterable?"styleguide://SystemPrompts/prompts/list":"styleguide://SystemPrompts/prompts/edit list"}},{key:"reset",value:function(){this.items=[]}},{key:"build",value:function(a){var f=a.label,m=a.filterable,q=a.multiSelect,r=a.historyId,u=a.useLastInput,v=a.fuzzy,y=a.filterFunction,z=a.sortFunction,B=a.actions,C=a.selectedAction,
G=a.items,F=a.onSelection,N=a.onFilter;this.extent=a.extent||Wd.pt(500,400);this.addNamed("promptTitle",{type:"text"}).value=f;var L=this.addNamed("prompt list",{type:m?Wd.FilterableList:Wd.List,multiSelect:q,historyId:r,useLastInput:u});m?this.get("list").master=!1:this.get("prompt list").master=!1;L.items=G;m&&v&&(L.fuzzy=v);m&&"function"===typeof y&&(L.filterFunction=y);m&&"function"===typeof z&&(L.sortFunction=z);F&&"function"===typeof F&&(this.onSelection=F);m&&B&&(L.actions=B);m&&C&&(L.selectedAction=
C);a=this.addNamed("ok button",{type:"button"});f=this.addNamed("cancel button",{type:"button"});this.addNamed("button wrapper",{submorphs:[a,f]});Wd.connect(a,"fire",this,"resolve");Wd.connect(f,"fire",this,"reject");m&&(Wd.connect(L,"accepted",this,"resolve"),Wd.connect(L,"canceled",this,"reject"),N&&Wd.connect(L,"updateFilter",function(){return N(L)}),L.whenRendered().then(function(){return L.relayout()}))}},{key:"resolve",value:function(a){var f=this.getSubmorphNamed("prompt list");a=a||f instanceof
Wd.FilterableList?f.acceptInput():{selected:f.selections,status:"accepted",actions:"default"};return this.answer.resolve(a)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}},{key:"focus",value:function(){this.getSubmorphNamed("prompt list").focus()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.listPrompt("hello",
[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{items:{derived:!0,after:["submorphs"],set:function(a){0<this.submorphs.length&&(this.getSubmorphNamed("prompt list").items=a||[])}},filterable:{},master:{after:["filterable"],initialize:function(){this.master={auto:this.getMaster()}}},preselect:{derived:!0,after:["items"],set:function(a){var f=this.getSubmorphNamed("prompt list");f&&(f.selectedIndex=a,f.scrollSelectionIntoView)}},onSelection:{derived:!0,after:["preselect",
"submorphs"],set:function(a){var f=this,m=this.getSubmorphNamed("prompt list");m&&Wd.connect(m,"selection",function(q){return a(q,f)})}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:18506,end:22715})}(Wd.AbstractPrompt));Wd.ListPrompt=oM;Wd.ListPrompt=oM;Wd.ListPrompt=oM;var pM=
wa("b8",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/prompts.js"),l=e.hasOwnProperty("EditListPrompt")&&"function"===typeof e.EditListPrompt?e.EditListPrompt:e.EditListPrompt=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"build",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"build",this).call(this,a);this.getSubmorphNamed("prompt list").items=a.items;a=this.addNamed("add item button",
{type:"button",label:Wd.Icon.makeLabel("plus")});var f=this.addNamed("remove item button",{type:"button",label:Wd.Icon.makeLabel("minus")});this.getSubmorphNamed("button wrapper").addMorph(a);this.getSubmorphNamed("button wrapper").addMorph(f);Wd.connect(a,"fire",this,"addItemToList");Wd.connect(f,"fire",this,"removeSelectedItemsFromList")}},{key:"removeSelectedItemsFromList",value:function(){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){f=a.get("prompt list");m=1!=
f.selectedItems.length?-1:0===f.selectedIndex?0:f.selectedIndex-1;f.items=Wd.arr.withoutAll(f.items,f.selectedItems);0>m?f.selection=null:f.selectedIndex=m;f.focus();q.jumpToEnd()})}},{key:"addItemToList",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return f=a.get("prompt list"),m=f.selection?f.items[f.selectedIndex].string:"",u.yield(a.world().prompt("Input to add to the list",{historyId:a.historyId||"EditListPrompt-input-history",
input:m}),2);q=u.yieldResult;if(!q)return u.return();f=a.get("list");r=f.selection?f.selectedIndex+1:f.items.length;f.addItemAt(q,r);f.focus();f.selectedIndex=r;u.jumpToEnd()})}},{key:"keybindings",get:function(){return zb._get(Object.getPrototypeOf(l.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",
get:function(){var a=this;return zb._get(Object.getPrototypeOf(l.prototype),"commands",this).concat([{name:"deselect",exec:function(){a.get("list").selection=null;return!0}},{name:"add item to list",exec:function(){a.addItemToList();return!0}},{name:"remove item from list",exec:function(){a.removeSelectedItemsFromList();return!0}}])}},{key:"resolve",value:function(){var a=this.get("prompt list");return this.answer.resolve({list:a.values,selections:a.selections})}},{key:"reject",value:function(){return this.answer.resolve({list:[],
selections:[],status:"canceled"})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"EditListPrompt"}},{key:"example",value:function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){return a.yield($world.editListPrompt("hello",[1,2,3,4],{multiSelect:!0}),0)})}},{key:"properties",get:function(){return{master:{initialize:function(){this.master={auto:"styleguide://SystemPrompts/prompts/edit list"}}}}}}],e,{pathInPackage:function(){return"prompts.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22724,end:25612})}(Wd.ListPrompt));Wd.EditListPrompt=pM;Wd.EditListPrompt=pM;Wd.EditListPrompt=pM;var xT=Object.freeze({__proto__:null,AbstractPrompt:hM,InformPrompt:iM,ConfirmPrompt:jM,MultipleChoicePrompt:kM,TextPrompt:lM,EditPrompt:mM,PasswordPrompt:nM,ListPrompt:oM,EditListPrompt:pM}),Ic=lively.FreezerRuntime.recorderFor("lively.components/widgets.js");
Ic.obj=lf;Ic.PropertyPath=Cg;Ic.string=Hg;Ic.num=Gk;Ic.arr=Qe;Ic.properties=Gp;Ic.pt=nf;Ic.Color=xf;Ic.Rectangle=Pd;Ic.rect=Ff;Ic.signal=oj;Ic.connect=Oe;Ic.disconnect=xo;Ic.Morph=Mj;Ic.ShadowObject=kr;Ic.morph=sb;Ic.Text=Qs;Ic.GridLayout=iy;Ic.HorizontalLayout=Os;Ic.Path=qA;Ic.Ellipse=oA;Ic.Label=Rs;Ic.Tooltip=rA;Ic.Icon=Wn;Ic.kld=Ib;var e7=Ic.kld;Ic.Shapes=e7.Shapes;Ic.Intersection=e7.Intersection;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("LeashEndpoint")&&
"function"===typeof e.LeashEndpoint?e.LeashEndpoint:e.LeashEndpoint=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?20:0}},{key:"onDragStart",value:function(a){var f=a.state;a.state.dragDelta=f.lastDragPosition.subPt(f.clickedOnPosition);a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"canConnectTo",value:function(a){return!a.isWorld&&
!a.isHaloItem&&this.leash.canConnectTo(a)&&!a.isHighlighter&&!a.ownerChain().some(function(f){return f.isHaloItem})}},{key:"onDrag",value:function(a){var f=this;if(this.connectedMorph)this.clearConnection();else{var m=a.hand.findDropTarget(a.hand.globalPosition,[this.leash,this.leash.endPoint,this.leash.startPoint],function(q){return f.canConnectTo(q)});this.possibleTarget!=m&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=m)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(Ic.obj.keys(Ic.Leash.connectionPoints),
this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}a.state.endpoint=this;this.leash.onEndpointDrag(a)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var a=this.connectedMorph,f=a.isPath,
m=a.isPolygon,q=a.vertices,r=a.origin;a=this.connectedMorph.globalBounds();if((f||m)&&"center"!=this.attachedSide){f=q.map(function(v){return Ic.pt(v.x,v.y).addPt(r)});m=Ic.Rectangle.unionPts(f);var u=m[this.attachedSide]();m=m.center().addPt(m.center().subPt(u));m=Ic.Shapes.line(u.x,u.y,m.x,m.y);f=Ic.Shapes.polyline(Ic.arr.flatten(f.map(function(v){return[v.x,v.y]})));f=Ic.arr.min(Ic.Intersection.intersect(f,m).points,function(v){return Ic.pt(v.x,v.y).dist(u)});return Ic.pt(f.x,f.y).addPt(a.topLeft())}return a[this.attachedSide]()}},
{key:"update",value:function(a){a&&!["position","extent","rotation","scale"].includes(a.prop)&&a.target!=this.connectedMorph||!this.connectedMorph||(a=this.getConnectionPoint(),a=this.leash.localize(a),this.vertex.position=a,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(Ic.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(a){var f=this.vertex.position,m=f.x;f=f.y;var q=this.leash.borderWidth;a&&a.meta&&
a.meta.animation?this.animate({center:Ic.pt(m+q,f+q),duration:a.duration}):this.center=Ic.pt(m+q,f+q)}},{key:"attachTo",value:function(a,f){this.clearConnection();this.leash.world()||this.leash.openInWorld(a.globalPosition);this.connectedMorph=a;this.attachedSide=f;this.vertex.controlPoints=this.leash.controlPointsFor(f,this);this.update();Ic.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},
leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},set:function(a){this.leash.vertices[this.index]=a;this.leash.vertices=this.leash.vertices}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:444,end:4551})})(Ic.Ellipse);var qM=wa("bP",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("Leash")&&"function"===typeof e.Leash?e.Leash:e.Leash=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onMouseDown",value:function(a){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,
this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){zb._get(Object.getPrototypeOf(l.prototype),"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(a){a.state.endpoint.vertex.position=a.state.endpoint.vertex.position.addPt(a.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(a){return Object.assign({},this.endpointStyle,{},
0==a?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(a){var f=this.vertices[a];return new Ic.LeashEndpoint({index:a,leash:this,position:Ic.pt(f.x,f.y)})}},{key:"controlPointsFor",value:function(a,f){a=Ic.Leash.connectionPoints[a];a=f==this.startPoint?a.negated():a;return{previous:a.scaleBy(100),next:a.negated().scaleBy(100)}}},{key:"relayout",value:function(a){if(!a||["vertices","position"].includes(a.prop))this.startPoint.relayout(a),this.endPoint.relayout(a)}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:Ic.pt(0,-1),topLeft:Ic.pt(-1,-1),rightCenter:Ic.pt(1,0),bottomRight:Ic.pt(1,1),bottomCenter:Ic.pt(0,1),bottomLeft:Ic.pt(-1,1),leftCenter:Ic.pt(-1,0),topRight:Ic.pt(1,-1),center:Ic.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:Ic.pt(0,0)},end:{defaultValue:Ic.pt(0,0)},canConnectTo:{defaultValue:function(a){return!0}},getLabelFor:{defaultValue:function(a){return a.name}},
reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},endpointStyle:{isStyleProp:!0,defaultValue:{fill:Ic.Color.black,origin:Ic.pt(3.5,3.5),extent:Ic.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:Ic.Color.black},fill:{defaultValue:Ic.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=
[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];Ic.connect(this,"onChange",this,"relayout");this.updateEndpointStyles()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:4560,end:7399})}(Ic.Path));
Ic.Leash=qM;Ic.Leash=qM;Ic.Leash=qM;var rM=wa("aE",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("Slider")&&"function"===typeof e.Slider?e.Slider:e.Slider=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"normalize",value:function(a){return Math.abs(a/(this.max-this.min))}},{key:"update",value:function(a){a=void 0===a?this.value:a;a=(this.width-
15)*this.normalize(a);this.getSubmorphNamed("slideHandle").center=Ic.pt(a+7.5,10)}},{key:"onSlide",value:function(a,f){a=Ic.num.roundTo(this.value+f.x/this.width,.01);this.value=a=Math.max(this.min,Math.min(this.max,a));this.update(a)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:Ic.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],
initialize:function(){var a=new Ic.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new Ic.Path({borderColor:Ic.Color.gray.darker(),borderWidth:2,vertices:[Ic.pt(0,0),Ic.pt(this.width,0)],position:Ic.pt(0,this.height/2)}),a];Ic.connect(this,"extent",this,"update");this.update()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",
version:"0.1.0"}}},{start:7408,end:8693})}(Ic.Morph));Ic.Slider=rM;Ic.Slider=rM;Ic.Slider=rM;(function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("SliderHandle")&&"function"===typeof e.SliderHandle?e.SliderHandle:e.SliderHandle=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"onDragStart",value:function(a){this.valueView=(new Ic.Tooltip({description:""})).openInWorld(a.hand.position.addXY(10,
10))}},{key:"onDrag",value:function(a){this.slider.onSlide(this,a.state.dragDelta);this.valueView.description=this.slider.value;this.valueView.position=a.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(a){this.valueView.remove()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:Ic.Color.gray},borderColor:{defaultValue:Ic.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new Ic.ShadowObject({blur:5})},
extent:{defaultValue:Ic.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},draggable:{defaultValue:!0}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:8695,end:9551})})(Ic.Ellipse);var sM=wa("bl",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
l=e.hasOwnProperty("ValueScrubber")&&"function"===typeof e.ValueScrubber?e.ValueScrubber:e.ValueScrubber=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"relayout",value:function(){this.scaleToBounds&&(this.scale=Math.min(1,this.width/(this.textBounds().width+0)))}},{key:"onKeyDown",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onKeyDown",this).call(this,a);if("Enter"==a.keyCombo){var f=
$jscomp.makeIterator(this.textString.replace("\n","").split(" ")),m=f.next().value;f.next();"string"===typeof m&&(this.value=parseFloat(m),this.scrub(this.scrubbedValue));a.stop()}}},{key:"scrub",value:function(a){this.field.update(a)}},{key:"onDragStart",value:function(a){this.execCommand("toggle active mark");this.initPos=a.position;this.factorLabel=(new Ic.Tooltip({description:"1x"})).openInWorld(a.hand.position.addXY(10,10));a.hand.extent=Ic.pt(30,30);a.hand.nativeCursor="ew-resize";a.hand.fill=
Ic.Color.transparent;a.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(a){var f=a.position.subPt(this.initPos);a=f.x;f=Ic.num.roundTo(Math.exp(-f.y/$world.height*4),.01)*this.baseFactor;return{offset:a,scale:f}}},{key:"onDrag",value:function(a){var f=this.getScaleAndOffset(a),m=f.scale;f=this.getCurrentValue(f.offset,m);this.scrub(f);f=this.floatingPoint?f.toFixed(3):Ic.obj.safeToString(f);this.unit&&(f+=" "+this.unit);this.replace(this.documentRange,f,!1,this.scaleToBounds,!1,!1);
this.factorLabel.description=m.toFixed(3)+"x";this.factorLabel.position=a.hand.position.addXY(10,10);a.hand.moveBy(Ic.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(a,f){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?a*f:Math.round(a*f))))}},{key:"onDragEnd",value:function(a){var f=this.getScaleAndOffset(a);this.value=this.getCurrentValue(f.offset,f.scale);this.factorLabel.softRemove();a.hand.extent=Ic.pt(1,1);a.hand.fill=Ic.Color.orange;a.hand.reactsToPointer=
!1}},{key:"value",set:function(a){this.scrubbedValue=a=Math.max(this.min,Math.min(this.max,a));a=this.floatingPoint?a.toFixed(3):Ic.obj.safeToString(a);a=this.unit?a+(" "+this.unit):a+"";this.replace(this.documentRange,a,!1,!0);this.relayout()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(a){this.fixedWidth=!0;this.setProperty("scaleToBounds",a)}},field:{derived:!0,get:function(){return this.owner}},
value:{defaultValue:0},fill:{defaultValue:Ic.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:9560,end:12723})}(Ic.Text));
Ic.ValueScrubber=sM;Ic.ValueScrubber=sM;Ic.ValueScrubber=sM;var eG=wa("aQ",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("CheckBox")&&"function"===typeof e.CheckBox?e.CheckBox:e.CheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"trigger",value:function(){try{this.checked=!this.checked,Ic.signal(this,"toggle",this.checked)}catch(f){var a=
this.world();a?a.logError(f):console.error(f)}}},{key:"onMouseDown",value:function(a){this.active&&this.trigger()}},{key:"render",value:function(a){return a.renderCheckBox(this)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Ic.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Ic.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],
e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:12733,end:13459})}(Ic.Morph));Ic.CheckBox=eG;Ic.CheckBox=eG;Ic.CheckBox=eG;var tM=wa("bm",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("LabeledCheckBox")&&"function"===typeof e.LabeledCheckBox?
e.LabeledCheckBox:e.LabeledCheckBox=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(a){this.active&&this.trigger();a.stop()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new Ic.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(a){this.layout=new Ic.HorizontalLayout({direction:"left"==a?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",a)}},layout:{initialize:function(){this.layout=new Ic.HorizontalLayout({direction:"left"==
this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(a){this.labelMorph.value=a}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},set:function(a){this.checkboxMorph.checked=a;Ic.signal(this,"checked",a)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(a){this.checkboxMorph.active=a}},labelMorph:{derived:!0,
readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new Ic.CheckBox({name:"checkbox"}),new Ic.Label({nativeCursor:"pointer",name:"label",padding:Ic.Rectangle.inset(5,3)})];Ic.connect(this,"alignCheckBox",this,"extent");Ic.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:13468,end:16001})}(Ic.Morph));Ic.LabeledCheckBox=tM;Ic.LabeledCheckBox=tM;Ic.LabeledCheckBox=tM;var uM=wa("aD",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("ModeSelector")&&"function"===typeof e.ModeSelector?e.ModeSelector:e.ModeSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:"createLabels",value:function(a,f,m){var q=this;m=void 0===m?{}:m;return Ic.arr.zip(a,f).map(function(r){r=$jscomp.makeIterator(r);var u=r.next().value,v=r.next().value;r=m[u];r=Ic.morph(Object.assign({name:u+"Label",master:"styleguide://SystemWidgets/mode label",type:"label",value:u},r&&{tooltip:r}));Ic.connect(r,"onMouseDown",q,"update",{updater:function(y){y(u,v)},varMapping:{name:u,value:v}});return r})}},{key:"relayout",value:function(a){a=void 0===a?!0:a;var f=
this,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return f.layout.forceLayout(),m=f.get("typeMarker"),q=f.currentLabel.bounds(),a?r.yield(m.animate({bounds:q,duration:200}),3):(m.setBounds(q),r.jumpTo(2));r.jumpToEnd()})}},{key:"animateFontColor",value:function(a,f,m){var q=a.fontColor;a.animate({customTween:function(r){return a.fontColor=q.interpolate(r,f)},duration:m})}},{key:"update",value:function(a,f,m){m=void 0===m?!1:m;var q=this,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){r=
q.get(a+"Label");if(r==q.currentLabel)return u.return();q.getSubmorphsByStyleClassName("Label").forEach(function(v){v!=r&&q.animateFontColor(v,q.fontColor,200)});q.currentLabel=r;!m&&Ic.signal(q,a,f);!m&&Ic.signal(q,"switchLabel",f);q.relayout(!m);return u.yield(q.animateFontColor(r,q.selectionFontColor,200),0)})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ModeSelector"}},{key:"example",value:function(){(new Ic.ModeSelector({items:{foo:{},trottel:{},babbel:{}}})).openInWorld()}},
{key:"properties",get:function(){return{items:{derived:!0,set:function(a){Ic.obj.isArray(a)?this.keys=this.values=a:(this.keys=Ic.obj.keys(a),this.values=Ic.obj.values(a))}},height:{defaultValue:30},init:{},keys:{before:["layout"]},values:{before:["layout"]},tooltips:{},fontColor:{defaultValue:Ic.Color.black},selectionFontColor:{defaultValue:Ic.Color.white},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/mode selector"}}},layout:{after:["items","keys","values"],initialize:function(){this.keys&&
(this.layout=new Ic.GridLayout({rows:[0,{paddingBottom:10}],columns:[0,{fixed:5},this.keys.length+2,{fixed:5}],grid:[[null].concat($jscomp.arrayFromIterable(Ic.arr.interpose(this.keys.map(function(a){return a+"Label"}),null)),[null])],autoAssign:!1,fitToCell:!1}))}},submorphs:{after:["items","keys","values","fontColor"],initialize:function(){this.keys&&(this.submorphs=[{name:"typeMarker",isLayoutable:!1}].concat($jscomp.arrayFromIterable(this.createLabels(this.keys,this.values,this.tooltips))),Ic.connect(this,
"extent",this,"relayout"),this.update(this.init?this.init:this.keys[0],this.values[this.keys.includes(this.init)?this.keys.indexOf(this.init):0],!0))}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:16010,end:19527})}(Ic.Morph));Ic.ModeSelector=uM;Ic.ModeSelector=uM;Ic.ModeSelector=
uM;var vM=wa("aC",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("DropDownSelector")&&"function"===typeof e.DropDownSelector?e.DropDownSelector:e.DropDownSelector=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"build",value:function(){this.dropDownLabel=Ic.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",
name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var a=this,f=this.getNameFor(this.selectedValue);return[].concat($jscomp.arrayFromIterable(void 0!=this.selectedValue?[{command:f,target:this}]:[]),$jscomp.arrayFromIterable(Ic.arr.compact(this.commands.map(function(m){return m.name!=f&&{command:m.name,target:a}}))))}},{key:"commands",get:function(){var a=this;return Ic.obj.isArray(this.values)?this.values.map(function(f){return{name:String(f),exec:function(){Ic.signal(a,
"update",f);a.selectedValue=f}}}):Ic.properties.forEachOwn(this.values,function(f,m){return{name:f,exec:function(){Ic.signal(a,"update",m);a.selectedValue=m}}})}},{key:"getNameFor",value:function(a){return this.getCurrentValue?this.getCurrentValue():Ic.obj.isArray(this.values)?Ic.obj.safeToString(a):Ic.obj.safeToString(Ic.properties.nameFor(this.values,a))}},{key:"relayout",value:function(){var a=this.getNameFor(this.selectedValue),f=this.get("currentValue");"undefined"==a?(f.value="Not set",f.fontColor=
Ic.Color.gray):(f.value=a,f.fontColor=Ic.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(a){this.menu=this.world().openWorldMenu(a,this.getMenuEntries());this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",
get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs","values","getCurrentValue"],set:function(a){this.setProperty("selectedValue",a);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:Ic.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:Ic.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",
set:function(a){this.setProperty("isSelected",a);this.fontColor=a?Ic.Color.white:Ic.Color.black}},layout:{initialize:function(){this.layout=new Ic.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],e,{pathInPackage:function(){return"widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},
{start:19537,end:22774})}(Ic.Morph));Ic.DropDownSelector=vM;Ic.DropDownSelector=vM;Ic.DropDownSelector=vM;var wM=wa("aP",function(b){var e=lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),l=e.hasOwnProperty("SearchField")&&"function"===typeof e.SearchField?e.SearchField:e.SearchField=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"parseInput",value:function(){var a=Array.from(this.textString).reduce(function(m,
q){if("\\"===q&&!m.escaped)return m.escaped=!0,m;" "!==q||m.escaped?(m.spaceSeen=!1,m.current+=q):(!m.spaceSeen&&m.current&&(m.tokens.push(m.current),m.current=""),m.spaceSeen=!0);m.escaped=!1;return m},{tokens:[],current:"",escaped:!1,spaceSeen:!1});a.current&&a.tokens.push(a.current);var f=a.tokens.map(function(m){return m.toLowerCase()});return{tokens:a.tokens,lowercasedTokens:f}}},{key:"clearInput",value:function(){this.textString="";Ic.signal(this,"searchInput",this.parseInput());this.onBlur()}},
{key:"matches",value:function(a){return this.textString?this.filterFunction.call(this,this.parseInput(),{string:a}):!0}},{key:"onChange",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onChange",this).call(this,a);a="replace"===a.selector;this.isFocused();this.get("placeholder icon")&&(this.get("placeholder icon").visible=!!this.textString);this.textString.includes("\n")&&(this.textString=this.textString.replace("\n",""),this.owner.focus());this.active&&a&&Ic.signal(this,"searchInput",
this.parseInput())}},{key:"onBlur",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onBlur",this).call(this,a);this.active=!1;this.get("placeholder").visible=!this.textString;this.animate({styleClasses:["idle"],duration:300})}},{key:"onFocus",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onFocus",this).call(this,a);this.animate({styleClasses:["selected"],duration:300});this.get("placeholder").visible=!1;this.active=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SearchField"}},
{key:"properties",get:function(){return{fixedWidth:{defaultValue:!0},master:{initialize:function(){this.master={auto:"styleguide://SystemWidgets/search field"}}},selectedFontColor:{isStyleProp:!0,defaultValue:Ic.Color.black},idleFontColor:{isStyleProp:!0,defaultValue:Ic.Color.gray},borderColor:{defaultValue:Ic.Color.gray},layout:{initialize:function(){this.layout=new Ic.HorizontalLayout({autoResize:!1,direction:"rightToLeft"})}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(a){this.setProperty("fuzzy",
a);a?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var a=this.getProperty("filterFunction");if(!a)return this.defaultFilterFunction;"string"===typeof a&&(a=eval("("+a+")"));return a}},sortFunction:{},
defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(a,f){return a.lowercasedTokens.every(function(m){return f.string.toLowerCase().includes(m)})})}},fuzzySortFunction:{get:function(){var a=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(f,m){var q=String(Ic.PropertyPath("string"===typeof a.fuzzy?a.fuzzy:"string").get(m)).toLowerCase(),r=0;f.lowercasedTokens.forEach(function(u){q.startsWith(u)?r-=10:q.includes(u)&&
(r-=5)});return Ic.arr.sum(f.lowercasedTokens.map(function(u){return Ic.string.levenshtein(q.toLowerCase(),u)}))+r})}},fuzzyFilterFunction:{get:function(){var a=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(f,m){var q="string"===typeof a.fuzzy?a.fuzzy:"string";if(f.lowercasedTokens.every(function(u){return m.string.toLowerCase().includes(u)}))return!0;var r=String(Ic.PropertyPath(q).get(m)).toLowerCase();return 3>=Ic.arr.sum(f.lowercasedTokens.map(function(u){return Ic.string.levenshtein(r,
u)}))})}},placeHolder:{defaultValue:"Search"},submorphs:{after:["placeHolder"],initialize:function(){this.submorphs=[{type:"label",name:"placeholder",isLayoutable:!1,value:this.placeHolder,reactsToPointer:!1},Ic.Icon.makeLabel("times-circle",{padding:Ic.rect(2,4,3,0),fontSize:14,visible:!1,fixedHeight:!0,autofit:!1,extent:Ic.pt(20,22),name:"placeholder icon",fontColor:Ic.Color.gray,nativeCursor:"pointer"})];Ic.connect(this.get("placeholder icon"),"onMouseDown",this,"clearInput")}}}}}],e,{pathInPackage:function(){return"widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.components",version:"0.1.0"}}},{start:22817,end:29404})}(Ic.Text));Ic.SearchField=wM;Ic.SearchField=wM;Ic.SearchField=wM;var yT=Object.freeze({__proto__:null,Leash:qM,Slider:rM,ValueScrubber:sM,CheckBox:eG,LabeledCheckBox:tM,ModeSelector:uM,DropDownSelector:vM,SearchField:wM}),mj=lively.FreezerRuntime.recorderFor("lively.components/index.js");
Object.assign(mj,Doa);Object.assign(mj,Coa);Object.assign(mj,Eoa);Object.assign(mj,Foa);Object.assign(mj,Goa);Object.assign(mj,Hoa);mj.Window=wT;mj.prompts=xT;mj.widgets=yT;mj.LoadingIndicator=MC;mj.addClassMappings=kb;mj.List=OC;mj.DropDownList=dG;mj.Button=NC;mj.CheckBox=eG;mj.addClassMappings({list:mj.List,dropdownlist:mj.DropDownList,button:mj.Button,checkbox:mj.CheckBox,labeledcheckbox:mj.widgets.LabeledCheckBox});mj.Window=wT;mj.Window=wT;mj.LoadingIndicator=MC;mj.LoadingIndicator=MC;mj.prompts=
xT;mj.prompts=xT;mj.widgets=yT;mj.widgets=yT;var bo=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js");bo.Morph=Mj;bo.MorphicDB=Bu;bo.LoadingIndicator=MC;bo.resource=x;var PC=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/loading-page.js"),l=e.hasOwnProperty("WorldLoadingScreen")&&"function"===typeof e.WorldLoadingScreen?e.WorldLoadingScreen:e.WorldLoadingScreen=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,
arguments)};return zb(l,b,[{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;a.setBounds($world.windowBounds());a.get("json target indicator").topRight=a.innerBounds().insetBy(25).topRight()}}]}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<style type="text/css">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"onLoad",value:function(){var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){if(!lively.FreezerRuntime)return v.jumpTo(0);f=a.get("package loading indicator");m=a.get("css loading screen");q=a.getWorldName();r=a.getFilePath();(u=a.getSnapshot())?(f.isLayoutable=f.visible=!1,m.isLayoutable=m.visible=!0):(f.startStepping("updateProgressBar"),document.body.style.backgroundColor="black");r&&a.get("json target indicator").animate({opacity:1,duration:300});
return v.yield(a.transitionToLivelyWorld({worldName:q,filePath:r,snapshot:u},f),3)}f.stopStepping();v.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,f){var m=a.worldName,q=a.filePath,r=a.snapshot,u=this,v,y,z,B,C,G,F;return $jscomp.asyncExecutePromiseGeneratorProgram(function(N){switch(N.nextAddress){case 1:return v=bo.resource(window.SYSTEM_BASE_URL||document.location.origin).join("objectdb/").url,y=u.get("package loading indicator"),N.yield(Promise.resolve().then(function(){return f7}),
2);case 2:z=N.yieldResult;B=z.bootstrap;if(!(C=m&&"__newWorld__"!=m)){N.jumpTo(3);break}return N.yield(bo.MorphicDB.named("lively.morphic/objectdb/morphicdb",{serverURL:v}).exists("world",m),4);case 4:C=!N.yieldResult.exists;case 3:if(C)return N.return(u.indicateMissingWorld(!0));if(!(G=q)){N.jumpTo(5);break}return N.yield(bo.resource(document.location.origin).join(q).exists(),6);case 6:G=!N.yieldResult;case 5:if(G)return N.return(u.indicateMissingWorld(!0));F=bo.LoadingIndicator.open("...starting bootstrap process...",
{animated:!0,delay:1E3});r&&(F.visible=!1);f.opacity=1;return N.yield(B({worldName:m,filePath:q,loadingIndicator:F,progress:y,snapshot:r}),0)}})}},{key:"getWorldName",value:function(){return document.location.href.endsWith("worlds/new")?"__newWorld__":bo.resource(document.location.href).query().name||window.WORLD_NAME||!1}},{key:"getFilePath",value:function(){return bo.resource(document.location.href).query().file||!1}},{key:"getSnapshot",value:function(){return bo.resource(document.location.href).query().snapshot||
window.SNAPSHOT_PATH||!1}},{key:"indicateMissingWorld",value:function(a){this.get("package loading indicator").visible=!a;this.get("broken heart").visible=this.get("broken heart").isLayoutable=a}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldLoadingScreen"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}}}}}],e,{pathInPackage:function(){return"loading-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:158,end:3675})}(bo.Morph);bo.WorldLoadingScreen=PC;bo.WorldLoadingScreen=PC;bo.WorldLoadingScreen=PC;var Zf=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js");Zf.Morph=Mj;Zf.MorphicDB=Bu;Zf.World=Wv;Zf.easings=lr;Zf.morph=sb;Zf.promise=oe;Zf.string=Hg;Zf.date=iu;Zf.Color=xf;Zf.pt=nf;Zf.LoadingIndicator=MC;Zf.resource=x;Zf.missingSVG=
'data:image/svg+xml;utf8,\n<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="question-circle" class="svg-inline--fa fa-question-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="lightgray" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"></path></svg>\n';
var zT=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),l=e.hasOwnProperty("TitleWrapper")&&"function"===typeof e.TitleWrapper?e.TitleWrapper:e.TitleWrapper=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"startMovingRight",value:function(){var a=this;this.animate({customTween:function(f){a._hoverDelta=f}})}},{key:"stopMovingRight",value:function(){var a=this;this.animate({customTween:function(f){a._hoverDelta=
1-f}})}},{key:"startMovingLeft",value:function(){var a=this;this.animate({customTween:function(f){a._hoverDelta=-f}})}},{key:"stopMovingLeft",value:function(){var a=this;this.animate({customTween:function(f){a._hoverDelta=-1+f}})}},{key:"startOnce",value:function(a){var f=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){if(f._fn)return m.return();f._fn=a;return m.yield(a(),2)}f._fn=null;m.jumpToEnd()})}},{key:"updateTitle",value:function(){var a=this;if(this.title){var f=
$jscomp.makeIterator(this.submorphs).next().value;f.left+=this._hoverDelta;f.right<this.width-20&&-1==this._hoverDelta?this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(a.stopMovingLeft(),2):m.yield(a.startMovingRight(),0)})}):20<f.left&&1==this._hoverDelta&&this.startOnce(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){return 1==m.nextAddress?m.yield(a.stopMovingRight(),2):m.yield(a.startMovingLeft(),
0)})})}}},{key:"startShowingFullTitle",value:function(){var a=this,f,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){if(!a.title)return q.return();f=$jscomp.makeIterator(a.submorphs);m=f.next().value;m.textString=a.title;return q.yield(m.whenRendered(),2)}a._hoverDelta=0;a.startStepping("updateTitle");m.right>a.width&&a.startMovingLeft();q.jumpToEnd()})}},{key:"stopShowingFullTitle",value:function(){if(this.title){var a=this.submorphs[0];a.textString=Zf.string.truncate(this.title,
18,"...");this.stopStepping("updateTitle");this._hoverDelta=0;a.left=0}}},{key:"onHoverIn",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onHoverIn",this).call(this,a);this.startShowingFullTitle()}},{key:"onHoverOut",value:function(a){zb._get(Object.getPrototypeOf(l.prototype),"onHoverOut",this).call(this,a);this.stopShowingFullTitle()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"TitleWrapper"}},{key:"properties",get:function(){return{title:{derived:!0,set:function(a){this.setProperty("title",
a);a&&(this.submorphs[0].textString=Zf.string.truncate(a,18,"..."))}}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:350,end:2487})}(Zf.Morph);Zf.TitleWrapper=zT;Zf.TitleWrapper=zT;Zf.TitleWrapper=zT;var QC=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),
l=e.hasOwnProperty("WorldPreview")&&"function"===typeof e.WorldPreview?e.WorldPreview:e.WorldPreview=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return zb(l,b,[{key:"relayout",value:function(){this.setBounds(this.world().visibleBounds())}},{key:"onLoad",value:function(){this.ui.spinner.visible=!1}},{key:"displayPreview",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return f.yield(a.initWithCommit(a._commit),
0)})}},{key:"initWithCommit",value:function(a){var f=this,m,q,r,u,v,y,z,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){if(1==C.nextAddress)return m=f.ui,q=m.preview,r=m.timestamp,u=m.title,v=m.description,y=m.previewContainer,f.opacity=.5,y.opacity=0,C.yield(f.whenRendered(),2);if(3!=C.nextAddress)return f._commit=a,q.imageUrl=a.preview||Zf.missingSVG,z=a.author,B=z.name,B=B.startsWith("guest-")?"guest":B,r.value=[B,{fontSize:13,fontWeight:"bold",paddingTop:"1px"},Zf.date.format(a.timestamp,
" - d.m.yy HH:MM"),{fontWeight:"bold",fontSize:12,paddingTop:"2px"}],u.title=a.name,v.value=a.description,C.yield(f.whenRendered(),3);y.opacity=1;f.animate({opacity:1,duration:300});C.jumpToEnd()})}},{key:"openAnimated",value:function(a){a=void 0===a?$world.visibleBounds():a;var f=this,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return m=Zf.morph(Object.assign({},f.spec(),{reactsToPointer:!1,renderOnGPU:!0,submorphs:[f.ui.spinner.spec()]})).openInWorld(),
m.hasFixedPosition=!0,m.globalPosition=f.globalPosition,m.opacity=0,q.yield(m.whenRendered(),2);case 2:return q.yield(m.animate({opacity:1,duration:300}),3);case 3:return m.dropShadow=!1,m.animate({bounds:a,borderRadius:0,duration:500,easing:Zf.easings.inOutQuint}),m.respondsToVisibleWindow=!0,q.yield(m.ui.spinner.animate({center:m.innerBounds().center(),duration:500,easing:Zf.easings.inOutQuint}),4);case 4:return q.yield(Zf.promise.delay(1E3),5);case 5:return q.return(m)}})}},{key:"openWorld",value:function(){var a=
this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(a.openAnimated(),2);a.loadWorld();f.jumpToEnd()})}},{key:"loadWorld",value:function(){var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){f=a._commit;m=f._id;q=f.name;if(lively.FreezerRuntime)return r=Zf.LoadingIndicator.open("...starting bootstrap process...",{animated:!0,delay:1E3}),a.transitionToLivelyWorld(document.location.origin,a._commit,
r),v.jumpTo(0);u=Zf.LoadingIndicator.open("loading "+q);return v.yield(Zf.World.loadFromCommit(m,void 0,{morphicDB:Zf.MorphicDB.default}),3)}u.remove();v.jumpToEnd()})}},{key:"transitionToLivelyWorld",value:function(a,f,m){var q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return y.yield(bb.import("./package loading progress indicator-afb4fb97.js"),3);case 3:if(!(q=y.yieldResult)){y.jumpTo(4);break}return y.yield(Zf.resource("part://partial freezing/package loading progress indicator"),
5);case 5:q=y.yieldResult;case 4:return y.yield(q.read(),2);case 2:return r=y.yieldResult,y.yield(Promise.resolve().then(function(){return f7}),6);case 6:return u=y.yieldResult,v=u.bootstrap,y.yield(v({commit:f,loadingIndicator:m,progress:r}),0)}})}},{key:"showVersions",value:function(){var a=this,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:return f=200,m=Zf.easings.inOutExpo,q=a.ui,r=q.previewContainer,y.yield(bb.import("./version container-324be69a.js"),
3);case 3:if(!(u=y.yieldResult)){y.jumpTo(4);break}return y.yield(Zf.resource("part://partial freezing/version container"),5);case 5:u=y.yieldResult;case 4:return y.yield(u.read(),2);case 2:return v=y.yieldResult,v.name="version container",v.position=Zf.pt(0,0),a.addMorph(v),v.reactsToPointer=v.visible=!0,v.initializeFromStartCommit(a._commit),a.animate({width:515,duration:f,easing:m}),r.animate({opacity:0,duration:f}),y.yield(v.animate({opacity:1,duration:f}),6);case 6:r.reactsToPointer=r.visible=
!1,y.jumpToEnd()}})}},{key:"hideVersions",value:function(){var a=this,f,m,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return f=Zf.easings.inOutExpo,m=a.ui,q=m.previewContainer,r=m.versionContainer,q.reactsToPointer=q.visible=!0,a.animate({width:245,duration:200,easing:f}),q.animate({opacity:1,duration:200}),u.yield(r.animate({opacity:0,duration:200}),2);r.reset();r.remove();u.jumpToEnd()})}},{key:"toggleDeleteButton",value:function(a){this.ui.deleteButton.visible=
a}},{key:"onHoverIn",value:function(a){this.toggleDeleteButton(!0)}},{key:"onHoverOut",value:function(a){this.toggleDeleteButton(!1)}},{key:"tryToDelete",value:function(){var a=this,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return f=300,m=a.ui,q=m.previewContainer,v.yield(bb.import("./delete world prompt-4655588a.js"),3);case 3:if(!(r=v.yieldResult)){v.jumpTo(4);break}return v.yield(Zf.resource("part://partial freezing/delete world prompt"),
5);case 5:r=v.yieldResult;case 4:return v.yield(r.read(),2);case 2:return u=v.yieldResult,Object.assign(u,{name:"delete world prompt",position:Zf.pt(0,0),opacity:0}),a.addMorph(u),u.visible=!0,v.yield(a.withAnimationDo(function(){u.opacity=1;a.dropShadow=a.dropShadow.with({color:Zf.Color.black.withA(.5),blur:50});q.opacity=.3;q.blur=1},{duration:f}),0)}})}},{key:"confirmDelete",value:function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.yield(Zf.MorphicDB.default.commit(Object.assign({},
a._commit,{content:void 0,snapshot:null})),2);a.isComponent||a.owner.isWorld||a.owner.remove();f.jumpToEnd()})}},{key:"cancelDelete",value:function(){var a=this,f,m,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return f=a.ui,m=f.previewContainer,q=f.deleteWorldPrompt,r.yield(a.withAnimationDo(function(){Object.assign(m,{opacity:1,blur:0});a.dropShadow=a.dropShadow.with({color:Zf.Color.rgba(0,0,0,.11)});q.opacity=0},{duration:300}),2);q.remove();r.jumpToEnd()})}},
{key:"onMouseUp",value:function(a){var f=this.ui,m=f.openButton,q=f.versionButton,r=f.deleteButton,u=f.closeVersionsButton,v=f.cancelDeleteButton;f=f.confirmDeleteButton;switch(a.targetMorph){case m:this.openWorld();break;case q:this.showVersions();break;case r:this.tryToDelete();break;case u:this.hideVersions();break;case f:this.confirmDelete();break;case v:this.cancelDelete()}}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"WorldPreview"}},{key:"properties",get:function(){return{ui:{readOnly:!0,
get:function(){return{previewContainer:this.getSubmorphNamed("preview container"),versionContainer:this.getSubmorphNamed("version container"),preview:this.getSubmorphNamed("preview"),timestamp:this.getSubmorphNamed("timestamp"),title:this.getSubmorphNamed("title wrapper"),description:this.getSubmorphNamed("description"),openButton:this.getSubmorphNamed("open button"),versionButton:this.getSubmorphNamed("version button"),spinner:this.getSubmorphNamed("spinner"),deleteButton:this.getSubmorphNamed("delete button"),
closeVersionsButton:this.getSubmorphNamed("close versions button"),versionList:this.getSubmorphNamed("version list"),deleteWorldPrompt:this.getSubmorphNamed("delete world prompt"),cancelDeleteButton:this.getSubmorphNamed("cancel delete button"),confirmDeleteButton:this.getSubmorphNamed("confirm delete button")}}}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:2500,end:10462})}(Zf.Morph);Zf.WorldPreview=QC;Zf.WorldPreview=QC;Zf.WorldPreview=QC;var RC=function(b){var e=lively.FreezerRuntime.recorderFor("PartialFreezing/landing-page.js"),l=e.hasOwnProperty("WorldLandingPage")&&"function"===typeof e.WorldLandingPage?e.WorldLandingPage:e.WorldLandingPage=function(a){a&&a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return zb(l,b,[{key:"__loading_html__",get:function(){return"\n      <style>\n        "+this.loadingScreen.cssDeclaration+"\n      </style>\n      "+this.loadingScreen.html+"\n    "}},{key:"__head_html__",get:function(){return'\n<script> window.AUTH_SERVER_URL; \x3c/script>\n<link type="text/css" rel="stylesheet" id="lively-font-awesome" href="/lively.morphic/assets/font-awesome/css/font-awesome.css">\n<link type="text/css" rel="stylesheet" id="lively-font-inconsolata" href="/lively.morphic/assets/inconsolata/inconsolata.css">\n<style type="text/css" id="WorldLandingPage_7068CDA9_749E_4EC1_9BC4_50DF06EAA2BA-Nunito">@import url("https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&display=swap");</style>'}},
{key:"commands",get:function(){var a=this;return[{name:"resize on client",exec:function(){$world._cachedWindowBounds=null;document.body.style.overflowY="hidden";a.setBounds($world.windowBounds());a.getSubmorphNamed("globe").extent=a.extent;a.ensureUserFlap();var f=a.getSubmorphNamed("a project browser");f&&(f.center=a.extent.scaleBy(.5))}}]}},{key:"ensureUserFlap",value:function(){var a,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:return $world.get("user flap")?
m.return():m.yield(bb.import("./dark-d217dbaf.js"),3);case 3:if(!(a=m.yieldResult)){m.jumpTo(4);break}return m.yield(Zf.resource("part://SystemIDE/user flap master/dark"),5);case 5:a=m.yieldResult;case 4:return m.yield(a.read(),2);case 2:return f=m.yieldResult,f.name="user flap",f.showMorphControls=!1,f.hasFixedPosition=!0,f.openInWorld(),f.opacity=0,f.alignInWorld(),f.get("fast load toggler").refresh(),m.yield(Zf.promise.delay(1E3),6);case 6:f.animate({opacity:1}),m.jumpToEnd()}})}},{key:"beforePublish",
value:function(){var a=this.getSubmorphNamed("a project browser");a&&a.remove()}},{key:"onLoad",value:function(){var a=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return m.yield(a.whenRendered(),2);if(!lively.FreezerRuntime)return m.return();$world.fill=Zf.Color.black;document.documentElement.style.background=Zf.Color.black;a.showWorldList().then(function(){return document.getElementById("loading-screen").remove()});a.getSubmorphNamed("globe").fullyLoaded();
(f=document.getElementById("loading screen"))&&f.remove();m.jumpToEnd()})}},{key:"showWorldList",value:function(){var a=this,f,m,q,r,u,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){switch(y.nextAddress){case 1:if(f=a.getSubmorphNamed("a poject browser")){y.jumpTo(2);break}m=a;q=m.addMorph;r=m;return y.yield(bb.import("./project browser-e80ec1bc.js"),4);case 4:if(!(u=y.yieldResult)){y.jumpTo(5);break}return y.yield(Zf.resource("part://partial freezing/project browser"),6);case 6:u=
y.yieldResult;case 5:return y.yield(u.read(),3);case 3:f=q.call(r,y.yieldResult);case 2:v=f,v.name="a project browser",a.reset(),v.showCloseButton=!1,v.extent=Zf.pt(1110,800).minPt(a.extent.subPt(Zf.pt(50,150))),v.center=a.innerBounds().center(),v.animate({opacity:1,duration:300}),v.displayWorlds(),v.hasFixedPosition=!1,y.jumpToEnd()}})}},{key:"reset",value:function(){var a=this.getSubmorphNamed("a project browser");a.opacity=0;a.center=this.innerBounds().center()}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"WorldLandingPage"}},{key:"properties",get:function(){return{title:{derived:!0,get:function(){return"lively.next ("+document.location.hostname+")"}},loadingScreen:{}}}}],e,{pathInPackage:function(){return"landing-page.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"PartialFreezing",version:"0.1.1-119"}}},{start:10473,end:13850})}(Zf.Morph);Zf.WorldLandingPage=
RC;Zf.WorldLandingPage=RC;Zf.WorldLandingPage=RC;var qw=lively.FreezerRuntime.recorderFor("PartialFreezing/index.js");qw.WorldLoadingScreen=PC;qw.WorldLandingPage=RC;qw.WorldPreview=QC;qw.WorldLoadingScreen=PC;qw.WorldLoadingScreen=PC;qw.WorldLandingPage=RC;qw.WorldLandingPage=RC;qw.WorldPreview=QC;qw.WorldPreview=QC;var Od=lively.FreezerRuntime.recorderFor("PartialFreezing/bootstrap.js");Od.bootstrap=pJ;Od.fastPrepLivelySystem=function(b){return Promise.resolve().then(function(){b.status="starting fast system preparation..."}).then(function(){return Od.resource(System.baseURL).join("package-registry.json").readJson()}).then(function(e){System["__lively.modules__packageRegistry"]=
lively.modules.PackageRegistry.fromJSON(System,e);return System}).then(function(){return Od.loadViaScript(Od.resource(System.baseURL).join("/lively.user/dist/lively.user-client.js").url)})};Od.installFetchHook=function(b){function e(l,a){Od.loads++;b.status="loading "+Od.string.truncateLeft(a.name.replace(window.System.baseURL,""),25,"...");b.progress=Od.loads/(800-4*Object.keys(Od.extractedModules).length);b.center=$world.innerBounds().center();return l(a)}window.__logFetch=e;lively.modules.installHook("fetch",
e)};Od.extractModules=function(b){Object.keys(lively.FreezerRuntime.registry).filter(function(e){return e.startsWith(b)}).forEach(function(e){Od.extractedModules[Od.resource(System.baseURL).join(e).url]=Object.assign({},lively.FreezerRuntime.registry[e].exports)})};Od.loadComponents=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return b.yield(bb.import("./world-e64fbe56.js").then(function(e){return e.w}),2);case 2:return b.yield(bb.import("./editor-plugin-d1aa29fa.js").then(function(e){return e.e}),
3);case 3:return b.yield(bb.import("./editor-plugin-d2520117.js"),4);case 4:return b.yield(bb.import("./index-a98bf65c.js"),5);case 5:return b.yield(Promise.resolve().then(function(){return Una}),6);case 6:return b.yield(Promise.resolve().then(function(){return Vna}),7);case 7:return b.yield(Promise.resolve().then(function(){return $fa}),8);case 8:Od.extractModules("lively.bindings"),Od.extractModules("lively.shell"),Od.extractModules("lively.ide"),Od.extractModules("lively.components"),b.jumpToEnd()}})};
Od.bootstrapLivelySystem=function(b,e,l){return Promise.resolve().then(function(){b.status="starting bootstrap process..."}).then(function(){var a,f,m,q,r,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.yield(e.whenRendered(),2);case 2:if("frozen"!=l["lively.lang"]&&!Od.fastLoad){v.jumpTo(3);break}return v.yield(Promise.resolve().then(function(){return r1}),4);case 4:a=v.yieldResult,Od.extractModules("lively.lang"),e.finishPackage({packageName:"lively.lang",
frozen:!0}),delete a._prevLivelyGlobal;case 3:if("frozen"!=l["lively.ast"]&&!Od.fastLoad){v.jumpTo(5);break}f=lively;return v.yield(Promise.resolve().then(function(){return IJ}),6);case 6:f.ast=v.yieldResult,Od.extractModules("lively.ast"),e.finishPackage({packageName:"lively.ast",frozen:!0});case 5:if("frozen"!=l["lively.source-transform"]&&!Od.fastLoad){v.jumpTo(7);break}m=lively;return v.yield(Promise.resolve().then(function(){return Ufa}),8);case 8:m.sourceTransform=v.yieldResult,Od.extractModules("lively.source-transform"),
e.finishPackage({packageName:"lively.source-transform",frozen:!0});case 7:if("frozen"!=l["lively.classes"]&&!Od.fastLoad){v.jumpTo(9);break}return v.yield(bb.import("./object-classes-abf364aa.js"),10);case 10:return q=lively,v.yield(Promise.resolve().then(function(){return Eha}),11);case 11:q.classes=v.yieldResult,Od.extractModules("lively.class"),e.finishPackage({packageName:"lively.classes",frozen:!0});case 9:if("frozen"!=l["lively.vm"]&&!Od.fastLoad){v.jumpTo(12);break}r=lively;return v.yield(Promise.resolve().then(function(){return C2}),
13);case 13:r.vm=v.yieldResult,Od.extractModules("lively.vm"),e.finishPackage({packageName:"lively.vm",frozen:!0});case 12:if("frozen"!=l["lively.modules"]&&!Od.fastLoad){v.jumpTo(14);break}return v.yield(Promise.resolve().then(function(){return BK}),15);case 15:Od.extractModules("lively.modules"),e.finishPackage({packageName:"lively.modules",frozen:!0});case 14:if("frozen"!=l["lively.user"]&&!Od.fastLoad){v.jumpTo(16);break}return v.yield(Promise.resolve().then(function(){return Wna}),17);case 17:return v.yield(bb.import("./user-ui-dc70b427.js"),
18);case 18:Od.extractModules("lively.user"),e.finishPackage({packageName:"lively.user",frozen:!0});case 16:if("frozen"!=l["lively.storage"]&&!Od.fastLoad){v.jumpTo(19);break}return v.yield(Promise.resolve().then(function(){return Uma}),20);case 20:Od.extractModules("lively.storage"),e.finishPackage({packageName:"lively.storage",frozen:!0});case 19:if("frozen"!=l["lively.morphic"]&&!Od.fastLoad){v.jumpTo(0);break}return v.yield(Promise.resolve().then(function(){return wha}),22);case 22:return Od.extractModules("lively.resources"),
v.yield(Promise.resolve().then(function(){return F6}),23);case 23:return v.yield(bb.import("./index-792c91c7.js"),24);case 24:return Od.extractModules("lively.2lively"),v.yield(Promise.resolve().then(function(){return fga}),25);case 25:return Od.extractModules("lively.serializer2"),v.yield(Od.loadComponents(),26);case 26:return v.yield(bb.import("./index-d74109c7.js").then(function(y){return y.i}),27);case 27:return Od.extractModules("lively.halos"),v.yield(bb.import("./index-a1a5f79d.js"),28);case 28:return Od.extractModules("lively-system-interface"),
v.yield(Promise.resolve().then(function(){return Yfa}),29);case 29:return Od.extractModules("lively.graphics"),u=lively,v.yield(Promise.resolve().then(function(){return Boa}),30);case 30:u.morphic=v.yieldResult,Od.extractModules("lively.morphic"),e.finishPackage({packageName:"lively.morphic",frozen:!0}),v.jumpToEnd()}})}).then(function(){var a,f,m,q,r,u,v,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return a=window.SYSTEM_BASE_URL||document.location.origin,
f=window.System,m=f.baseURL,m.endsWith("/")&&(m=m.slice(0,-1)),z.yield(Od.resource(a).join("package-registry.json").readJson(),2);case 2:return q=z.yieldResult,z.yield(Od.loadViaScript(Od.resource(a).join("/lively.next-node_modules/babel-standalone/babel.js").url),3);case 3:return z.yield(Od.loadViaScript(Od.resource(a).join("/lively.next-node_modules/systemjs/dist/system.src.js").url),4);case 4:return z.yield(Od.loadViaScript(Od.resource(a).join("/lively.modules/systemjs-init.js").url),5);case 5:r=
lively.modules.getSystem("bootstrapped",{baseURL:a});lively.modules.changeSystem(r,!0);r["__lively.modules__packageRegistry"]=lively.modules.PackageRegistry.fromJSON(r,q);for(u in Od.extractedModules)v=u.replace(m,a),r.set(v,r.newModule(Od.extractedModules[u])),y=lively.modules.module(v),y._recorder=Od.extractedModules[u],y._frozenModule=!0;f.config({baseURL:a});Od.installFetchHook(b);z.jumpToEnd()}})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.lang"]&&
!Od.fastLoad)return a.return(Od.importPackageAndDo("lively.lang",function(f){e.finishPackage({packageName:"lively.lang",loaded:!0});delete f._prevLivelyGlobal},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){e.animate({opacity:1,easing:Od.easings.outExpo,duration:300});if("dynamic"==l["lively.ast"]&&!Od.fastLoad)return a.return(Od.importPackageAndDo("lively.ast",function(f){e.finishPackage({packageName:"lively.ast",loaded:!0});lively.ast=f},b));
a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.source-transform"]&&!Od.fastLoad)return a.return(Od.importPackageAndDo("lively.source-transform",function(f){e.finishPackage({packageName:"lively.source-transform",loaded:!0});lively.sourceTransform=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.classes"]&&!Od.fastLoad)return a.return(Od.importPackageAndDo("lively.classes",
function(f){e.finishPackage({packageName:"lively.classes",loaded:!0});lively.classes=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.vm"]&&!Od.fastLoad)return a.return(Od.importPackageAndDo("lively.vm",function(f){e.finishPackage({packageName:"lively.vm",loaded:!0});lively.vm=f},b));a.jumpToEnd()})}).then(function(){function a(f){lively.modules=f;lively.modules.unwrapModuleLoad();lively.modules.unwrapModuleResolution();
lively.modules.wrapModuleLoad();lively.modules.wrapModuleResolution();Od.installFetchHook(b);var m=System["__lively.modules__packageRegistry"];delete System["__lively.modules__packageRegistry"];f=System["__lively.modules__packageRegistry"]=f.PackageRegistry.ofSystem(System);Object.assign(f,Od.obj.select(m,["packageMap","individualPackageDirs","devPackageDirs","packageBaseDirs"]));f.resetByURL();m=f.allPackages();var q=lively.modules.module("lively.modules/src/packages/package.js").recorder.Package;
m.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){Od.adoptObject(u,q)});m=Object.values(System["__lively.modules__loadedModules"]);var r=lively.modules.module("lively.modules/src/module.js").recorder.ModuleInterface;m.filter(function(u){return!u.constructor[Symbol.for("lively-module-meta")]}).forEach(function(u){Od.adoptObject(u,r)})}return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return"frozen"==l["lively.modules"]||
Od.fastLoad?(System._scripting=lively.modules.scripting,f.jumpTo(2)):f.yield(Od.importPackageAndDo("lively.modules",a,b),2);e.finishPackage({packageName:"lively.modules",loaded:!0});f.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==l["lively.user"]&&!Od.fastLoad)return a.return(Od.importPackageAndDo("lively.user",function(f){e.finishPackage({packageName:"lively.user",loaded:!0});lively.user=f},b));a.jumpToEnd()})}).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if("dynamic"==
l["lively.storage"]&&!Od.fastLoad)return a.return(Od.importPackageAndDo("lively.storage",function(f){e.finishPackage({packageName:"lively.storage",loaded:!0});lively.storage=f},b));a.jumpToEnd()})})};Od.importPackageAndDo=function(b,e,l){var a=b.split("/").slice(-1)[0];l.label="loading "+a;return lively.modules.importPackage(b).then(e||function(){})};Od.polyfills=function(){var b=[];"PointerEvent"in window||b.push(Od.loadViaScript(Od.resource(System.baseURL).join("/lively.next-node_modules/pepjs/dist/pep.js").url));
"fetch"in window||b.push(Od.loadViaScript("//cdnjs.cloudflare.com/ajax/libs/fetch/1.0.0/fetch.js"));return Promise.all(b)};Od.resource=x;Od.loadViaScript=W;Od.promise=oe;Od.string=Hg;Od.obj=lf;Od.modulePackage=BK;Od.easings=lr;Od.adoptObject=Vj;Od.Color=xf;lively.modules=Od.modulePackage;Od.loginDone=!0;Od.doBootstrap=!0;Od.askBeforeQuit=!0;Od.worldLoaded=!1;Od.loc=document.location;Od.query=Od.resource(Od.loc.href).query();Od.fastLoad=1==Od.query.fastLoad||window.FORCE_FAST_LOAD;Od.bootstrap=pJ;
Od.bootstrap=pJ;Od.loads=0;Od.extractedModules={};var f7=Object.freeze({__proto__:null,bootstrap:pJ});vk.users.authServerURL="https://auth.typeshift.io";vk.css.fontAwesome="https://admin.typeshift.io/lively.morphic/assets/fontawesome-free-5.12.1/css/all.css";vk.css.inconsolata="https://admin.typeshift.io/lively.morphic/assets/inconsolata/inconsolata.css";var q1=JSON.parse('{"id":"WorldLoadingScreen_803F0F92_E5F1_4170_A1C7_CEA82037730E","snapshot":{"WorldLoadingScreen_803F0F92_E5F1_4170_A1C7_CEA82037730E":{"rev":1438968,"props":{"name":{"value":"world loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(67.99453124999991,685.8828125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1012.7413741929706,539.71484375)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_49B8D3EE_7709_4303_8BF0_8EFE80A4B525","rev":2729},{"__ref__":true,"id":"Label_8F94BB1A_316E_4D88_9CBC_D3F25B6939A7","rev":1246931},{"__ref__":true,"id":"ModuleProgress_C06A7F0E_ECED_4338_A754_5E1B455F7190","rev":4565},{"__ref__":true,"id":"HTMLMorph_9D156F59_A32E_4A30_991E_86B283591AA8","rev":3792}]},"styleClasses":{"value":["WorldLoadingScreen","Morph","WorldLandingPage","morph"]},"layout":{"value":"__lv_expr__:{VerticalLayout}:lively.morphic:new VerticalLayout({\\n  align: \\"center\\",\\n  autoResize: false,\\n  direction: \\"centered\\",\\n  orderByIndex: false,\\n  padding: null,\\n  reactToSubmorphAnimations: false,\\n  resizeSubmorphs: false,\\n  spacing: 0\\n})"},"metadata":{"value":{"__ref__":true,"id":"05289C6F-0734-4CDF-BB52-90F0F46A13FF","rev":0}}},"lively.serializer-class-info":{"className":"WorldLoadingScreen","module":{"package":{"name":"PartialFreezing","version":"0.1.1-118"},"pathInPackage":"loading-page.js"}}},"Label_49B8D3EE_7709_4303_8BF0_8EFE80A4B525":{"rev":2729,"props":{"name":{"value":"json target indicator"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(919.7413741929706,25)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(72,35)"},"opacity":{"value":0},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":2,"right":2,"bottom":2,"left":2}},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":6,"right":6,"bottom":6,"left":6}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0,0,0,1],"right":[0,0,0,1],"bottom":[0,0,0,1],"left":[0,0,0,1]}},"metadata":{"value":{"__ref__":true,"id":"397D70DD-EDD6-44C1-8D83-25E20C69CCFE","rev":0}},"textAndAttributes":{"value":["JSON",null]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(5,2,5,2)"},"fontSize":{"value":20},"fontWeight":{"value":"bold"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,68,31]},"397D70DD-EDD6-44C1-8D83-25E20C69CCFE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"F694A49F-7002-4B8A-972C-3794B2CDAF36","rev":0}}}},"F694A49F-7002-4B8A-972C-3794B2CDAF36":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Label_8F94BB1A_316E_4D88_9CBC_D3F25B6939A7":{"rev":1246931,"props":{"name":{"value":"broken heart"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(400.37068709648537,111.970703125)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(212,211)"},"visible":{"value":false},"submorphs":{"value":[{"__ref__":true,"id":"Text_50BCB697_A33D_440C_A491_E316D30128D8","rev":2778}]},"styleClasses":{"value":["Label","Morph","morph"]},"isLayoutable":{"value":false},"textAndAttributes":{"value":["\uf7a9",{"__ref__":true,"id":"338413AE-0EAD-4267-8D15-B66BFE96C13B","rev":0}]},"fontSize":{"value":211.064},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(231,76,60)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"Text_50BCB697_A33D_440C_A491_E316D30128D8":{"rev":2778,"props":{"name":{"value":"error text"},"nativeCursor":{"value":"default"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(-66.55859375,211)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(345.1171875,104.7734375)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(0,0,0,0)"},"styleClasses":{"value":["Text","Morph","morph"]},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"right":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"bottom":[0.09019607843137255,0.6274509803921569,0.984313725490196,1],"left":[0.09019607843137255,0.6274509803921569,0.984313725490196,1]}},"fixedWidth":{"value":true},"fixedHeight":{"value":true},"readOnly":{"value":true},"fontSize":{"value":22},"fontWeight":{"value":"bold"},"textAlign":{"value":"center"},"lineWrapping":{"value":true},"anchors":{"value":[]},"selections":{"key":"selections","verbatim":true,"value":[{"start":{"row":0,"column":62},"end":{"row":0,"column":62}}]},"textAndAttributes":{"key":"textAndAttributes","value":["Sorry, the world you requested can not be found on the server.",null]}},"lively.serializer-class-info":{"className":"Text","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/morph.js"}},"cachedLineBounds":[[0,[1,13.734,29,1,12.422,29,1,8.906,29,1,9.063,29,1,10.766,29,1,6.844,29,1,5.203,29,1,8.438,29,1,13.125,29,1,12.391,29,1,5.203,29,1,18.297,29,1,12.422,29,1,8.906,29,1,6.688,29,1,13.391,29,1,5.203,29,1,11.594,29,1,12.422,29,1,13.125,29,1,5.203,29,1,8.797,29,1,12.375,29,1,13.391,29,1,13.125,29,1,12.391,29,1,10.922,29,1,8.359,29,1,12.375,29,1,13.391,29,1,5.203,29,1,11.375,29,1,12.547,29,1,13.125,29,1,5.203,29,1,13.125,29,1,12.297,29,1,8.438,29,1,5.203,29,1,13.391,29,1,12.391,29,1,5.203,29,1,7.875,29,1,12.422,29,2,13.125,29,1,13.391,29,1,5.219,29,1,12.422,29,1,13.125,29,1,5.203,29,1,8.438,29,1,13.141,29,1,12.375,29,1,5.203,29,1,11.109,29,1,12.375,29,1,9.063,29,1,11.672,29,1,12.375,29,1,7.141,29,1,6.844,29]]]},"338413AE-0EAD-4267-8D15-B66BFE96C13B":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"heart-broken"}}},"ModuleProgress_C06A7F0E_ECED_4338_A754_5E1B455F7190":{"rev":4565,"props":{"_tickingScripts":{"value":[{"__ref__":true,"id":"33C70516-3DB7-44CD-9F56-7DB56E83F6CC","rev":0}]},"name":{"value":"package loading indicator"},"master":{"value":"__lv_expr__:({\\"auto\\":\\"styleguide://$world/package loading progress indicator\\"})"},"blur":{"value":0},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(2.940511315235426,188.92724609375)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(1006.8603515624998,161.8603515625)"},"opacity":{},"submorphs":{"value":[{"__ref__":true,"id":"Path_677780BC_9C21_4BEC_BB34_5C762456FD57","rev":1438990},{"__ref__":true,"id":"Morph_9333F220_C19A_4269_AF6A_CF42DBB6E362","rev":2908},{"__ref__":true,"id":"Morph_56C05D8A_80F8_45A3_8DF9_5A400902C6C3","rev":3006},{"__ref__":true,"id":"Morph_FFB43142_AB78_46BD_B388_FF56DF829324","rev":3104},{"__ref__":true,"id":"Morph_E05EACA8_A003_4495_941C_D86A65E3BEC5","rev":3202},{"__ref__":true,"id":"Morph_79004C35_83CE_467A_BC17_689657447865","rev":3300},{"__ref__":true,"id":"Morph_88CEEBA0_7327_47F9_9EE3_33A1DD0C2F90","rev":3398},{"__ref__":true,"id":"Morph_BF5E1758_852E_401C_85F3_0F5301F5ABFC","rev":3496},{"__ref__":true,"id":"Morph_439807F2_787C_4D73_8F8C_BBD42CAD55C8","rev":3594},{"__ref__":true,"id":"Morph_33AAC0E4_4241_461B_AC28_242A1E48F075","rev":3692},{"__ref__":true,"id":"Morph_B20D8740_B745_4182_8279_C2015FFD0CAB","rev":3768}]},"metadata":{"value":{"__ref__":true,"id":"5DCDAAC7-B355-4FC1-BE11-14AAA203AB9F","rev":0}}},"lively.serializer-class-info":{"className":"ModuleProgress","module":{"package":{"name":"ModuleProgress","version":"0.1.1-109"},"pathInPackage":"index.js"}}},"33C70516-3DB7-44CD-9F56-7DB56E83F6CC":{"rev":0,"props":{"_rev":{"value":0},"suspended":{"value":true},"stopped":{"value":false},"tickTime":{"value":null},"type":{"value":"requestAnimationFrame"},"currentTimeout":{"value":2379992},"target":{"value":{"__ref__":true,"id":"ModuleProgress_C06A7F0E_ECED_4338_A754_5E1B455F7190","rev":4565}},"selector":{"value":"updateProgressBar"},"args":{"value":[]}},"lively.serializer-class-info":{"className":"TargetScript","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"ticking.js"}}},"Path_677780BC_9C21_4BEC_BB34_5C762456FD57":{"rev":1438990,"props":{"name":{"value":"progress path"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(20,0)"},"visible":{"value":false},"borderColor":{"key":"borderColor","value":"__lv_expr__:{Color,Color}:lively.graphics/color.js:{pt,rect}:lively.graphics/geometry-2d.js:Color.rgb(127,140,141)"},"metadata":{"value":{"__ref__":true,"id":"DF0B7626-676D-46C4-9BD4-7C6170F4A526","rev":0}},"vertices":{"value":["__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(0,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})","__lv_expr__:{pt}:lively.graphics/geometry-2d.js:({position:pt(20,0),isSmooth:false,controlPoints:{next:pt(0,0),previous:pt(0,0)}})"]},"endMarker":{"value":{"__ref__":true,"id":"end-marker","rev":0}}},"lively.serializer-class-info":{"className":"Path","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"DF0B7626-676D-46C4-9BD4-7C6170F4A526":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"arrow\\", _id: \\"f5486b4a5f64aed6413e16fdb4e4def6b7648b7f\\"})"}}},"end-marker":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"marker"},"id":{"value":"end-marker"},"viewBox":{"value":"0 0 10 10"},"refX":{"value":"5"},"refY":{"value":"5"},"markerWidth":{"value":"5"},"markerHeight":{"value":"5"},"orient":{"value":"auto"},"children":{"value":[{"__ref__":true,"id":"92844305-597B-4537-9E73-B7730148642C","rev":0}]},"fill":{"value":"rgba(127,140,141,1)"}}},"92844305-597B-4537-9E73-B7730148642C":{"rev":0,"props":{"_rev":{"value":0},"tagName":{"value":"path"},"d":{"value":"M0,0 L10,5 L0,10 z"}}},"Morph_9333F220_C19A_4269_AF6A_CF42DBB6E362":{"rev":2908,"props":{"name":{"value":"stage lang"},"tooltip":{"value":""},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_EA2031EF_5DF9_4BB8_8AEC_20EDCA53965F","rev":3928},{"__ref__":true,"id":"Label_6E6D291F_0198_4168_965B_F80209F13529","rev":3957},{"__ref__":true,"id":"Ellipse_25FCD2A0_67EF_402B_8936_2FE12D315B03","rev":2905}]},"metadata":{"value":{"__ref__":true,"id":"87DD5B62-037E-4B43-8DFC-CDBA259B54DD","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_EA2031EF_5DF9_4BB8_8AEC_20EDCA53965F":{"rev":3928,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"394F414E-5F34-4D02-826A-F9ABC807C92C","rev":0}},"textAndAttributes":{"value":["\uf1ab",{"__ref__":true,"id":"B428A924-EFEA-48D9-BCA1-2E06C2AFCC12","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"394F414E-5F34-4D02-826A-F9ABC807C92C":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"E876FB7D-B050-4271-903F-07557A4AB984","rev":0}}}},"E876FB7D-B050-4271-903F-07557A4AB984":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"B428A924-EFEA-48D9-BCA1-2E06C2AFCC12":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"language"}}},"Label_6E6D291F_0198_4168_965B_F80209F13529":{"rev":3957,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(33,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A5622636-5CB0-4128-884E-7F05338BC2B0","rev":0}},"textAndAttributes":{"value":["lang",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,33,18]},"A5622636-5CB0-4128-884E-7F05338BC2B0":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"F215E0B3-8E31-41CB-AC8B-EA95B296A500","rev":0}}}},"F215E0B3-8E31-41CB-AC8B-EA95B296A500":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_25FCD2A0_67EF_402B_8936_2FE12D315B03":{"rev":2905,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_48A47018_2D17_4CB6_AB1E_224D9BE45C18","rev":1246934},{"__ref__":true,"id":"Label_7D0D02BF_01F1_4785_8215_97E9D5CA3FDF","rev":1246935}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"8BE7CF10-AA8A-4640-97D0-60A2D36DB531","rev":0}},"metadata":{"value":{"__ref__":true,"id":"0454BB33-3AC1-4AD2-8C45-88186E532490","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_48A47018_2D17_4CB6_AB1E_224D9BE45C18":{"rev":1246934,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D618BD66-A9B0-4BCE-994F-238CE367B42E","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"022CA024-5147-46BA-A9DA-56B94DAD0244","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"D618BD66-A9B0-4BCE-994F-238CE367B42E":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"1B21916A-6EF2-4D51-AAE0-69CB7A6D01BB","rev":0}}}},"1B21916A-6EF2-4D51-AAE0-69CB7A6D01BB":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"022CA024-5147-46BA-A9DA-56B94DAD0244":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_7D0D02BF_01F1_4785_8215_97E9D5CA3FDF":{"rev":1246935,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"F9C2D2FD-A9A3-4471-9B11-18937A2C982B","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"CDD88D29-F00D-4E0C-B0CF-F7E8FE27A2CD","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"F9C2D2FD-A9A3-4471-9B11-18937A2C982B":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"3291AA9E-9FC3-4104-A312-09C2CFF2E346","rev":0}}}},"3291AA9E-9FC3-4104-A312-09C2CFF2E346":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"CDD88D29-F00D-4E0C-B0CF-F7E8FE27A2CD":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"8BE7CF10-AA8A-4640-97D0-60A2D36DB531":{"rev":0,"props":{"_rev":{"value":0}}},"0454BB33-3AC1-4AD2-8C45-88186E532490":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"87DD5B62-037E-4B43-8DFC-CDBA259B54DD":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_56C05D8A_80F8_45A3_8DF9_5A400902C6C3":{"rev":3006,"props":{"name":{"value":"stage ast"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(104,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(46.86035156249977,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Ellipse_EA9C6FF4_CBFE_4CD9_B6EC_63209179170C","rev":2968},{"__ref__":true,"id":"Label_AE6C82BF_1C6D_40D7_8E8A_FBC6A937F707","rev":3931},{"__ref__":true,"id":"Label_0BB7C7A0_193B_4316_AE50_604C25A6796A","rev":3958}]},"metadata":{"value":{"__ref__":true,"id":"D1409649-7C4E-4078-927E-71F086E780E0","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Ellipse_EA9C6FF4_CBFE_4CD9_B6EC_63209179170C":{"rev":2968,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10.860351562499773,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_ED840BDC_2083_4396_A232_A11F04B90AF0","rev":1246938},{"__ref__":true,"id":"Label_8A21678C_3E4F_406A_827E_4BAC49FD7974","rev":1246939}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"AE6297A1-49FF-4F88-BD84-A63530979BB2","rev":0}},"metadata":{"value":{"__ref__":true,"id":"D5405D3D-CB55-44B9-B58B-9A5ED6BBB182","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_ED840BDC_2083_4396_A232_A11F04B90AF0":{"rev":1246938,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500227,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3233F486-26F7-475A-B1A2-7933E4F52A0B","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"D370AEAD-3B69-4933-B911-6DDC4429545E","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"3233F486-26F7-475A-B1A2-7933E4F52A0B":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"10E47A8C-2222-427F-8A2D-424D9B227872","rev":0}}}},"10E47A8C-2222-427F-8A2D-424D9B227872":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D370AEAD-3B69-4933-B911-6DDC4429545E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_8A21678C_3E4F_406A_827E_4BAC49FD7974":{"rev":1246939,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"E7EE284E-E4A7-4788-A3E8-D0E76B8F6BD5","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"845B0DB1-F961-4F14-9873-BFE73286A4DC","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E7EE284E-E4A7-4788-A3E8-D0E76B8F6BD5":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"8AA03487-C0D8-4C71-818A-A4D4306D77D4","rev":0}}}},"8AA03487-C0D8-4C71-818A-A4D4306D77D4":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"845B0DB1-F961-4F14-9873-BFE73286A4DC":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"AE6297A1-49FF-4F88-BD84-A63530979BB2":{"rev":0,"props":{"_rev":{"value":0}}},"D5405D3D-CB55-44B9-B58B-9A5ED6BBB182":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_AE6C82BF_1C6D_40D7_8E8A_FBC6A937F707":{"rev":3931,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(23,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"9E2BBB4D-DF8A-4722-9095-19838B8BA299","rev":0}},"textAndAttributes":{"value":["\uf1bb",{"__ref__":true,"id":"85491A2D-2FD2-474E-87E9-947943593106","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,23,30]},"9E2BBB4D-DF8A-4722-9095-19838B8BA299":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"84D2BCA5-E4B7-4DCA-B6F0-66428326A9D7","rev":0}}}},"84D2BCA5-E4B7-4DCA-B6F0-66428326A9D7":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"85491A2D-2FD2-474E-87E9-947943593106":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"tree"}}},"Label_0BB7C7A0_193B_4316_AE50_604C25A6796A":{"rev":3958,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"F7287F9F-27BD-4B3D-8195-BBFC88E45BA2","rev":0}},"textAndAttributes":{"value":["ast",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,24,18]},"F7287F9F-27BD-4B3D-8195-BBFC88E45BA2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"29C800CA-C931-40DF-B429-B355B9E3A575","rev":0}}}},"29C800CA-C931-40DF-B429-B355B9E3A575":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D1409649-7C4E-4078-927E-71F086E780E0":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_FFB43142_AB78_46BD_B388_FF56DF829324":{"rev":3104,"props":{"name":{"value":"stage source-transform"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(173.86035156249977,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(152,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_E4165114_0F31_446B_85CA_53A308EDC052","rev":3959},{"__ref__":true,"id":"Ellipse_8942E237_8AF4_462C_89F3_740D5FCE6940","rev":3085},{"__ref__":true,"id":"Label_1687CCDB_6942_4F23_B893_26A8251AFA06","rev":3934}]},"metadata":{"value":{"__ref__":true,"id":"DCB46258-4715-443E-9609-49EFD184A29E","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_E4165114_0F31_446B_85CA_53A308EDC052":{"rev":3959,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(132,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D53048E8-47D2-419A-B282-F92C31ADBE7A","rev":0}},"textAndAttributes":{"value":["source transform",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,132,18]},"D53048E8-47D2-419A-B282-F92C31ADBE7A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"5DB2D184-7119-418B-81B4-42BD724ED021","rev":0}}}},"5DB2D184-7119-418B-81B4-42BD724ED021":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_8942E237_8AF4_462C_89F3_740D5FCE6940":{"rev":3085,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(63.43017578124979,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_C7B55B39_B3AD_4039_8564_7A0A67464795","rev":1246942},{"__ref__":true,"id":"Label_98D1E531_5580_4ACE_8B57_3BBB793E447A","rev":1246943}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"67200CE5-5B67-4009-AEE7-C6E15641598F","rev":0}},"metadata":{"value":{"__ref__":true,"id":"12078B68-3380-47C7-99CA-905A359982D2","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_C7B55B39_B3AD_4039_8564_7A0A67464795":{"rev":1246942,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.13964843750044,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3615D7B4-D340-4E37-B05A-682A9D88EF39","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"F3EC220D-2452-4A2A-A0C3-B297263BBCBC","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"3615D7B4-D340-4E37-B05A-682A9D88EF39":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"5BF9DCD7-EF8B-4FAE-9892-017CB76427DD","rev":0}}}},"5BF9DCD7-EF8B-4FAE-9892-017CB76427DD":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"F3EC220D-2452-4A2A-A0C3-B297263BBCBC":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_98D1E531_5580_4ACE_8B57_3BBB793E447A":{"rev":1246943,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"E1FD8C00-4C1E-4DB8-B154-3A7B9B94F02C","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"D38AC5C6-B237-4682-B5D4-68A978B61A6E","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"E1FD8C00-4C1E-4DB8-B154-3A7B9B94F02C":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"8197A6A8-A1E8-489A-AFDC-11CD8BCC94F3","rev":0}}}},"8197A6A8-A1E8-489A-AFDC-11CD8BCC94F3":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D38AC5C6-B237-4682-B5D4-68A978B61A6E":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"67200CE5-5B67-4009-AEE7-C6E15641598F":{"rev":0,"props":{"_rev":{"value":0}}},"12078B68-3380-47C7-99CA-905A359982D2":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_1687CCDB_6942_4F23_B893_26A8251AFA06":{"rev":3934,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(57,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"815F9A6E-B806-439E-913A-8C59848A5DC4","rev":0}},"textAndAttributes":{"value":["\uf079",{"__ref__":true,"id":"D19C88D0-D130-496B-ADFF-A346BB1A7E04","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"815F9A6E-B806-439E-913A-8C59848A5DC4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"0945BAB3-B654-448E-8982-901E583F6233","rev":0}}}},"0945BAB3-B654-448E-8982-901E583F6233":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D19C88D0-D130-496B-ADFF-A346BB1A7E04":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"retweet"}}},"DCB46258-4715-443E-9609-49EFD184A29E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_E05EACA8_A003_4495_941C_D86A65E3BEC5":{"rev":3202,"props":{"name":{"value":"stage classes"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(348.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(78,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_79522EE0_E3E2_441E_97F0_958AA35B54AF","rev":3960},{"__ref__":true,"id":"Ellipse_94992EA2_9E6B_4CB5_BCD1_53522CD3177D","rev":3183},{"__ref__":true,"id":"Label_7A670F11_832D_47F6_A154_4F04E085354C","rev":3937}]},"metadata":{"value":{"__ref__":true,"id":"B4DD2CFD-C7CC-4CF9-8FA7-A6F315819E8F","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_79522EE0_E3E2_441E_97F0_958AA35B54AF":{"rev":3960,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"61241DB8-170C-48AF-9BE6-352886AE2E09","rev":0}},"textAndAttributes":{"value":["classes",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,58,18]},"61241DB8-170C-48AF-9BE6-352886AE2E09":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"9BDCBAAC-49F5-42FF-B4FB-7E7FEC7509CA","rev":0}}}},"9BDCBAAC-49F5-42FF-B4FB-7E7FEC7509CA":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_94992EA2_9E6B_4CB5_BCD1_53522CD3177D":{"rev":3183,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26.43017578124978,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_2592271D_0029_4901_9069_379C34208E06","rev":1246946},{"__ref__":true,"id":"Label_DC7D9AA2_19EB_4B2B_B565_FA9A676370E1","rev":1246947}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"22F57AFA-8738-4D1C-86A8-9C5582848510","rev":0}},"metadata":{"value":{"__ref__":true,"id":"3F1DE69C-9148-4B77-B534-1007FC94D576","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_2592271D_0029_4901_9069_379C34208E06":{"rev":1246946,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"CC536F1C-F784-4CF1-AC54-8E013E8FBE71","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"09606D88-18F7-4FC8-AA6A-C0E5F1B6B939","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"CC536F1C-F784-4CF1-AC54-8E013E8FBE71":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"76FA8DC5-81F6-4062-9AC0-FC6D9EFB22F4","rev":0}}}},"76FA8DC5-81F6-4062-9AC0-FC6D9EFB22F4":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"09606D88-18F7-4FC8-AA6A-C0E5F1B6B939":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_DC7D9AA2_19EB_4B2B_B565_FA9A676370E1":{"rev":1246947,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"7169B4BB-3BB1-4C3E-8A51-68926C449093","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"625ECCE0-0E41-46D9-8F05-B00556A2D15F","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"7169B4BB-3BB1-4C3E-8A51-68926C449093":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"20C2506F-8E8B-4F20-918C-17A0D5D33833","rev":0}}}},"20C2506F-8E8B-4F20-918C-17A0D5D33833":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"625ECCE0-0E41-46D9-8F05-B00556A2D15F":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"22F57AFA-8738-4D1C-86A8-9C5582848510":{"rev":0,"props":{"_rev":{"value":0}}},"3F1DE69C-9148-4B77-B534-1007FC94D576":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_7A670F11_832D_47F6_A154_4F04E085354C":{"rev":3937,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(20,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"892E6DB1-EED2-40BF-985C-65B01CB435E5","rev":0}},"textAndAttributes":{"value":["\uf0e8",{"__ref__":true,"id":"3FC7B64A-7D4C-4699-A045-C2F49AFEE25F","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"892E6DB1-EED2-40BF-985C-65B01CB435E5":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"5FE33C87-9E1E-40B4-9DE5-4B4735A7043C","rev":0}}}},"5FE33C87-9E1E-40B4-9DE5-4B4735A7043C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"3FC7B64A-7D4C-4699-A045-C2F49AFEE25F":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"sitemap"}}},"B4DD2CFD-C7CC-4CF9-8FA7-A6F315819E8F":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_79004C35_83CE_467A_BC17_689657447865":{"rev":3300,"props":{"name":{"value":"stage vm"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(449.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_AFD2D60B_F9D2_44D0_8F01_5221A4F6CD78","rev":3961},{"__ref__":true,"id":"Ellipse_28FEEFAA_B8BB_4BA4_B869_A6C639FADBEC","rev":3281},{"__ref__":true,"id":"Label_06E88EF0_2985_4327_ABA3_A77A90C0CACC","rev":3940}]},"metadata":{"value":{"__ref__":true,"id":"B205AEC9-C4CA-48F6-8BEE-5FCF0B98FF1E","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_AFD2D60B_F9D2_44D0_8F01_5221A4F6CD78":{"rev":3961,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(17,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D95CA05A-CD93-481E-97FA-27E53B0AEEBB","rev":0}},"textAndAttributes":{"value":["VM",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,24,18]},"D95CA05A-CD93-481E-97FA-27E53B0AEEBB":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"656C7364-B7C5-4E76-9526-83868EEE949B","rev":0}}}},"656C7364-B7C5-4E76-9526-83868EEE949B":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_28FEEFAA_B8BB_4BA4_B869_A6C639FADBEC":{"rev":3281,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16.430175781249776,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_EC466CB9_56C0_4159_96DF_05AB5DD40FA0","rev":1246950},{"__ref__":true,"id":"Label_C1B44C6B_F066_4A13_9537_8AE8F36704E7","rev":1246951}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"97E0F205-09CE-4A9D-9F20-7CD63590E75D","rev":0}},"metadata":{"value":{"__ref__":true,"id":"2691FD97-900F-4235-A2E2-E64810493DCF","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_EC466CB9_56C0_4159_96DF_05AB5DD40FA0":{"rev":1246950,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"669DE4C9-A7E3-497A-949E-F820A34DDA69","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"37B691A2-D67B-4256-8CF6-F4E5B54A4910","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"669DE4C9-A7E3-497A-949E-F820A34DDA69":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"D6604061-BC05-4F54-AE4E-F2816C625DF6","rev":0}}}},"D6604061-BC05-4F54-AE4E-F2816C625DF6":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"37B691A2-D67B-4256-8CF6-F4E5B54A4910":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_C1B44C6B_F066_4A13_9537_8AE8F36704E7":{"rev":1246951,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"CB4BF5F3-E1B6-469F-ADBF-770D471263C4","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"9F5E3D6F-48A7-4A9A-A7B0-3A0D4A8563C0","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"CB4BF5F3-E1B6-469F-ADBF-770D471263C4":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"9D8BD973-995C-4C40-AE89-1354DDE903CF","rev":0}}}},"9D8BD973-995C-4C40-AE89-1354DDE903CF":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"9F5E3D6F-48A7-4A9A-A7B0-3A0D4A8563C0":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"97E0F205-09CE-4A9D-9F20-7CD63590E75D":{"rev":0,"props":{"_rev":{"value":0}}},"2691FD97-900F-4235-A2E2-E64810493DCF":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_06E88EF0_2985_4327_ABA3_A77A90C0CACC":{"rev":3940,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"C053CFF2-4D38-47EC-A5AE-33E51066585C","rev":0}},"textAndAttributes":{"value":["\uf085",{"__ref__":true,"id":"0DDBB89A-553C-4B63-B6C2-BC57AB34F4AC","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"C053CFF2-4D38-47EC-A5AE-33E51066585C":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C4CCE94F-3C30-4476-A907-266E0E19451C","rev":0}}}},"C4CCE94F-3C30-4476-A907-266E0E19451C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"0DDBB89A-553C-4B63-B6C2-BC57AB34F4AC":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"B205AEC9-C4CA-48F6-8BEE-5FCF0B98FF1E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_88CEEBA0_7327_47F9_9EE3_33A1DD0C2F90":{"rev":3398,"props":{"name":{"value":"stage modules"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(530.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(86,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_70ABE747_274B_469B_9324_10CA384CD22F","rev":3962},{"__ref__":true,"id":"Ellipse_F85D5BC2_491C_4CB5_B7D4_EC8A616F0C3F","rev":3379},{"__ref__":true,"id":"Label_21F19F4B_A8B8_4217_A8D9_46BCB4B96836","rev":3943}]},"metadata":{"value":{"__ref__":true,"id":"63D1273B-F7A4-4E4D-99B1-78790B129F75","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_70ABE747_274B_469B_9324_10CA384CD22F":{"rev":3962,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(66,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"3A97743C-284C-42B9-9026-F2F89B4B1D56","rev":0}},"textAndAttributes":{"value":["modules",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,66,18]},"3A97743C-284C-42B9-9026-F2F89B4B1D56":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"A3DFE7CD-9C6A-4643-9790-9C5502948B3B","rev":0}}}},"A3DFE7CD-9C6A-4643-9790-9C5502948B3B":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_F85D5BC2_491C_4CB5_B7D4_EC8A616F0C3F":{"rev":3379,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30.43017578124978,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_A987416A_26AF_48F0_A93D_8C4BB437845E","rev":1246954},{"__ref__":true,"id":"Label_5ECDD37A_034A_4D88_AE78_FC4A42B37B30","rev":1246955}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"BBC88A6C-297F-4354-8E3C-25713BD1D98D","rev":0}},"metadata":{"value":{"__ref__":true,"id":"891AD7CA-5EE2-4ABE-9774-D32E9A4676CD","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_A987416A_26AF_48F0_A93D_8C4BB437845E":{"rev":1246954,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"66CE9571-2A74-4B91-8D4F-E4C15CACC4E7","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"71736415-974D-4BF9-A21F-C3A3267A7ACB","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"66CE9571-2A74-4B91-8D4F-E4C15CACC4E7":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"C984AAE3-F095-4547-8869-5800553EEECC","rev":0}}}},"C984AAE3-F095-4547-8869-5800553EEECC":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"71736415-974D-4BF9-A21F-C3A3267A7ACB":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_5ECDD37A_034A_4D88_AE78_FC4A42B37B30":{"rev":1246955,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"92787A54-1E00-40AC-B970-1B9EE397D382","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"7CAACBBA-D68B-48F5-91C8-3560D5BEF4D8","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"92787A54-1E00-40AC-B970-1B9EE397D382":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"115A9E74-8FA5-4836-AA99-19639FB9730F","rev":0}}}},"115A9E74-8FA5-4836-AA99-19639FB9730F":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"7CAACBBA-D68B-48F5-91C8-3560D5BEF4D8":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"BBC88A6C-297F-4354-8E3C-25713BD1D98D":{"rev":0,"props":{"_rev":{"value":0}}},"891AD7CA-5EE2-4ABE-9774-D32E9A4676CD":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_21F19F4B_A8B8_4217_A8D9_46BCB4B96836":{"rev":3943,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(38,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"995566CA-2C80-426E-8B64-AB329E6FDF2A","rev":0}},"textAndAttributes":{"value":["\uf49e",{"__ref__":true,"id":"8D1B7B8D-F670-4BE3-90C6-3278D51F33CE","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,38,30]},"995566CA-2C80-426E-8B64-AB329E6FDF2A":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"56DA7603-96AB-44D9-ADE6-87B8B9B94537","rev":0}}}},"56DA7603-96AB-44D9-ADE6-87B8B9B94537":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"8D1B7B8D-F670-4BE3-90C6-3278D51F33CE":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cogs"}}},"63D1273B-F7A4-4E4D-99B1-78790B129F75":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_BF5E1758_852E_401C_85F3_0F5301F5ABFC":{"rev":3496,"props":{"name":{"value":"stage user"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(639.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(54,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_18B3E78D_A8D2_443F_9045_5262C53EBB78","rev":3963},{"__ref__":true,"id":"Ellipse_A80B35ED_B181_417B_A03E_B37F1F64FA3D","rev":3477},{"__ref__":true,"id":"Label_112131C8_2F29_4630_A0A8_A1198C20DB52","rev":3946}]},"metadata":{"value":{"__ref__":true,"id":"1A4FAB87-0FFF-4244-A870-ADE45ED33C07","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_18B3E78D_A8D2_443F_9045_5262C53EBB78":{"rev":3963,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(34,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A7F3A594-47BB-428E-BB2E-8FB713DD053A","rev":0}},"textAndAttributes":{"value":["user",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,34,18]},"A7F3A594-47BB-428E-BB2E-8FB713DD053A":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"A30B6443-58B4-4979-93F5-6FD57AB79366","rev":0}}}},"A30B6443-58B4-4979-93F5-6FD57AB79366":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_A80B35ED_B181_417B_A03E_B37F1F64FA3D":{"rev":3477,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(14.430175781249776,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_281F1322_54E8_41FD_AA2D_BEEC0F73A10E","rev":1246958},{"__ref__":true,"id":"Label_1E02AE5F_20B6_4189_B8DE_606043DA5FD7","rev":1246959}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"49DCFAE9-DBF5-4C13-BFBA-50D69FDEE3D5","rev":0}},"metadata":{"value":{"__ref__":true,"id":"56F33A07-2453-4B7A-B876-F2A7B8B04B03","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_281F1322_54E8_41FD_AA2D_BEEC0F73A10E":{"rev":1246958,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500451,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"51250085-1097-4D61-A9F8-3A69678A9109","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"CEE11D6A-4A91-416F-A656-451E53B5F7B8","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"51250085-1097-4D61-A9F8-3A69678A9109":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"14A719C4-C659-4005-85A7-19EDA22AB460","rev":0}}}},"14A719C4-C659-4005-85A7-19EDA22AB460":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"CEE11D6A-4A91-416F-A656-451E53B5F7B8":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_1E02AE5F_20B6_4189_B8DE_606043DA5FD7":{"rev":1246959,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"2D47A4D2-8EB7-465B-9AB2-0F584E76F473","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"B69F67C7-B893-469B-86DC-BD12C71EE99A","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"2D47A4D2-8EB7-465B-9AB2-0F584E76F473":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"35FC4D71-C670-45F6-BD5F-075069F794BB","rev":0}}}},"35FC4D71-C670-45F6-BD5F-075069F794BB":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"B69F67C7-B893-469B-86DC-BD12C71EE99A":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"49DCFAE9-DBF5-4C13-BFBA-50D69FDEE3D5":{"rev":0,"props":{"_rev":{"value":0}}},"56F33A07-2453-4B7A-B876-F2A7B8B04B03":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_112131C8_2F29_4630_A0A8_A1198C20DB52":{"rev":3946,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"0D9D8FC3-8334-4C74-840B-1FF82EF3C7C2","rev":0}},"textAndAttributes":{"value":["\uf2bd",{"__ref__":true,"id":"BFD383CA-8632-4A0A-A393-B06B2D487BF2","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,30,30]},"0D9D8FC3-8334-4C74-840B-1FF82EF3C7C2":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"87A8A933-C7CD-4612-8316-600E483C0153","rev":0}}}},"87A8A933-C7CD-4612-8316-600E483C0153":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"BFD383CA-8632-4A0A-A393-B06B2D487BF2":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"user-circle"}}},"1A4FAB87-0FFF-4244-A870-ADE45ED33C07":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_439807F2_787C_4D73_8F8C_BBD42CAD55C8":{"rev":3594,"props":{"name":{"value":"stage storage"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(716.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(78,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_E0943BD0_5807_4359_B602_33D722D21DFF","rev":3964},{"__ref__":true,"id":"Ellipse_8E6D1A40_10E9_4E4B_A411_3A8882A6D4A2","rev":3575},{"__ref__":true,"id":"Label_70EEB7A3_5529_4C7C_BCF8_DFDE81C12C98","rev":3949}]},"metadata":{"value":{"__ref__":true,"id":"DCB42D62-E9E0-409F-AA2E-5700F13BEC5C","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_E0943BD0_5807_4359_B602_33D722D21DFF":{"rev":3964,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(58,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"D5865D7C-1D66-4488-810F-71CE2D855D69","rev":0}},"textAndAttributes":{"value":["storage",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,58,18]},"D5865D7C-1D66-4488-810F-71CE2D855D69":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"1F67EC4A-CF20-43DE-95CB-038A32E2AB5E","rev":0}}}},"1F67EC4A-CF20-43DE-95CB-038A32E2AB5E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_8E6D1A40_10E9_4E4B_A411_3A8882A6D4A2":{"rev":3575,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26.43017578124978,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_1161A7CA_E992_4A9A_B6B7_AFA29D0AE123","rev":1246962},{"__ref__":true,"id":"Label_13DBE884_9EC9_41E9_B8F2_03A0F5315B35","rev":1246963}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"522D4C58-C9FE-45DC-8D4E-36EEA3FC33AD","rev":0}},"metadata":{"value":{"__ref__":true,"id":"4122CB64-2D1D-4BD2-BFF4-9AEE29FBA3CC","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_1161A7CA_E992_4A9A_B6B7_AFA29D0AE123":{"rev":1246962,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"2AB96BE0-3E99-41A6-A937-ECBD2207DAFD","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"72DB6F32-0E00-4126-BFB0-92C43855DBB9","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"2AB96BE0-3E99-41A6-A937-ECBD2207DAFD":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"7904BC76-F657-4BCA-A925-C6DEF33DB15E","rev":0}}}},"7904BC76-F657-4BCA-A925-C6DEF33DB15E":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"72DB6F32-0E00-4126-BFB0-92C43855DBB9":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_13DBE884_9EC9_41E9_B8F2_03A0F5315B35":{"rev":1246963,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"1513C835-A8C4-4F97-BACA-10C11921D100","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"92D524D7-8D0E-4B00-B503-1680504597F0","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"1513C835-A8C4-4F97-BACA-10C11921D100":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"3B153E46-D8E2-45A5-911A-293252A195E4","rev":0}}}},"3B153E46-D8E2-45A5-911A-293252A195E4":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"92D524D7-8D0E-4B00-B503-1680504597F0":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"522D4C58-C9FE-45DC-8D4E-36EEA3FC33AD":{"rev":0,"props":{"_rev":{"value":0}}},"4122CB64-2D1D-4BD2-BFF4-9AEE29FBA3CC":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_70EEB7A3_5529_4C7C_BCF8_DFDE81C12C98":{"rev":3949,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(25.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(27,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"DE167E92-3FCF-4A33-A10C-DEFDB066128E","rev":0}},"textAndAttributes":{"value":["\uf1c0",{"__ref__":true,"id":"33E7E409-86F9-4D17-9192-F9B9F67F8FF1","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,27,30]},"DE167E92-3FCF-4A33-A10C-DEFDB066128E":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"3AC37391-F66A-42BA-A083-AF66DF22BD9C","rev":0}}}},"3AC37391-F66A-42BA-A083-AF66DF22BD9C":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"33E7E409-86F9-4D17-9192-F9B9F67F8FF1":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"database"}}},"DCB42D62-E9E0-409F-AA2E-5700F13BEC5C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_33AAC0E4_4241_461B_AC28_242A1E48F075":{"rev":3692,"props":{"name":{"value":"stage morphic"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(817.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(84,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_C3602A34_2573_482D_AE11_24585712EAC7","rev":3965},{"__ref__":true,"id":"Ellipse_66B555AB_3D5C_4258_986A_8F038B9656B9","rev":3673},{"__ref__":true,"id":"Label_047E056E_EEAB_4639_96BD_04BD82AB5F83","rev":3952}]},"metadata":{"value":{"__ref__":true,"id":"A8E85B93-CBF9-47B7-B0BB-7B1A6B01C782","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_C3602A34_2573_482D_AE11_24585712EAC7":{"rev":3965,"props":{"name":{"value":"label"},"nativeCursor":{"value":"pointer"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(64,18)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgba(255,255,255,0)"},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"A11EF747-A695-4A79-BD02-C7EB6ACEC58D","rev":0}},"textAndAttributes":{"value":["morphic",null]},"fontSize":{"value":16},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(64,64,64)"},"fontWeight":{"value":"Medium"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,64,18]},"A11EF747-A695-4A79-BD02-C7EB6ACEC58D":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"B1A8A7F0-FF31-48F5-A33F-5DE1FA1D9C94","rev":0}}}},"B1A8A7F0-FF31-48F5-A33F-5DE1FA1D9C94":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_66B555AB_3D5C_4258_986A_8F038B9656B9":{"rev":3673,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(29.43017578124978,78.8603515625)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(24.279296875,24.279296875)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(253,254,254)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_BAC8014C_324B_4630_9886_3D0DFA26F547","rev":1246966},{"__ref__":true,"id":"Label_A926EDC1_3F8A_4929_B7B3_486D226E1BC0","rev":1246967}]},"styleClasses":{"value":["Ellipse","Morph","morph"]},"borderWidth":{"key":"borderWidth","verbatim":true,"value":{"top":4,"right":4,"bottom":4,"left":4}},"borderColor":{"key":"borderColor","verbatim":true,"value":{"top":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"right":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"bottom":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1],"left":[0.4980392156862745,0.5490196078431373,0.5529411764705883,1]}},"installedFonts":{"value":{"__ref__":true,"id":"8E4C0B76-3AB0-41EC-A928-D14ECC6E12EC","rev":0}},"metadata":{"value":{"__ref__":true,"id":"CCA00E0B-5477-4287-AEA8-B0AAF864EE5E","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_BAC8014C_324B_4630_9886_3D0DFA26F547":{"rev":1246966,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500448,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"B6ADFB35-10A0-4B4C-8147-476FBAD31F8A","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"4970AB70-6EE5-4CCC-A799-DED2FB590855","rev":0}]},"fontSize":{"value":26},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(100,221,23)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"B6ADFB35-10A0-4B4C-8147-476FBAD31F8A":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"692405EF-0DAB-4B16-9556-DE8E0C7C8225","rev":0}}}},"692405EF-0DAB-4B16-9556-DE8E0C7C8225":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"4970AB70-6EE5-4CCC-A799-DED2FB590855":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_A926EDC1_3F8A_4929_B7B3_486D226E1BC0":{"rev":1246967,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"fill":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(0,176,255)"},"visible":{"value":false},"styleClasses":{"value":["Label","Morph","morph"]},"borderRadius":{"key":"borderRadius","verbatim":true,"value":{"top":30,"right":30,"bottom":30,"left":30}},"metadata":{"value":{"__ref__":true,"id":"93556B31-4804-4064-A175-8AEFF78155A5","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"55BDEC9B-6FA2-41B4-BB9D-9F27E426EE5C","rev":0}]},"padding":{"value":"__lv_expr__:{rect}:lively.graphics/geometry-2d.js:rect(4,3,0,0)"},"fontSize":{"value":20},"fontColor":{"value":"__lv_expr__:{Color}:lively.graphics/color.js:Color.rgb(255,255,255)"}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"93556B31-4804-4064-A175-8AEFF78155A5":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"16936B79-8EE1-4BAF-BC18-09BF588BFA5B","rev":0}}}},"16936B79-8EE1-4BAF-BC18-09BF588BFA5B":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"55BDEC9B-6FA2-41B4-BB9D-9F27E426EE5C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"8E4C0B76-3AB0-41EC-A928-D14ECC6E12EC":{"rev":0,"props":{"_rev":{"value":0}}},"CCA00E0B-5477-4287-AEA8-B0AAF864EE5E":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_047E056E_EEAB_4639_96BD_04BD82AB5F83":{"rev":3952,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(31,30)"},"opacity":{"value":0.2},"styleClasses":{"value":["Label","Morph","morph"]},"metadata":{"value":{"__ref__":true,"id":"EC6FDB6D-2FE2-4266-A282-720BDBF01DD8","rev":0}},"textAndAttributes":{"value":["\uf1b2",{"__ref__":true,"id":"C2E23900-606E-4D50-8C2A-8D3EED333790","rev":0}]},"fontSize":{"value":30.108}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,31,30]},"EC6FDB6D-2FE2-4266-A282-720BDBF01DD8":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"9F3823CE-B7B1-48C4-9230-CE293FF2C3C6","rev":0}}}},"9F3823CE-B7B1-48C4-9230-CE293FF2C3C6":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"C2E23900-606E-4D50-8C2A-8D3EED333790":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"A8E85B93-CBF9-47B7-B0BB-7B1A6B01C782":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"Morph_B20D8740_B745_4182_8279_C2015FFD0CAB":{"rev":3768,"props":{"name":{"value":"stage world"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(924.8603515624998,23)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(59,115.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_B7EF9083_A71F_4D8B_AF91_3305E53AB57B","rev":3966},{"__ref__":true,"id":"Ellipse_D0DF79D5_C22F_4228_8782_8E975A1FAE71","rev":3751},{"__ref__":true,"id":"Label_7C1B29FD_90AE_44BE_82D6_E3F5C468150F","rev":3955}]},"metadata":{"value":{"__ref__":true,"id":"517BD2F7-7F33-4DCD-8161-606AF1C7CC99","rev":0}}},"lively.serializer-class-info":{"className":"Morph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_B7EF9083_A71F_4D8B_AF91_3305E53AB57B":{"rev":3966,"props":{"name":{"value":"label"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(10,50)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(39,18)"},"metadata":{"value":{"__ref__":true,"id":"D6C3C1CC-7707-4969-B9FC-F688FA3057EB","rev":0}},"textAndAttributes":{"value":["world",null]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,39,18]},"D6C3C1CC-7707-4969-B9FC-F688FA3057EB":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"label\\", _id: \\"3a7b83b9f99672332eeae106353d6f3d8d0e617f\\"})"},"deserializeInfo":{"value":{"__ref__":true,"id":"65257401-2A93-41F5-B8BF-C9D61D5EA38A","rev":0}}}},"65257401-2A93-41F5-B8BF-C9D61D5EA38A":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"Ellipse_D0DF79D5_C22F_4228_8782_8E975A1FAE71":{"rev":3751,"props":{"name":{"value":"stop"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(16.930175781249996,78.8603515625)"},"submorphs":{"value":[{"__ref__":true,"id":"Label_95012A2B_611F_4CB3_90C1_6F8A46950C0C","rev":1246970},{"__ref__":true,"id":"Label_E90E5640_D133_4925_9D4E_DA9E5DD56C7F","rev":1246971}]},"installedFonts":{"value":{"__ref__":true,"id":"32EDB653-A1E1-4B55-895D-F24FF7E2851E","rev":0}},"metadata":{"value":{"__ref__":true,"id":"5045A776-502C-4191-89BB-C3D39A31DFDE","rev":0}}},"lively.serializer-class-info":{"className":"Ellipse","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"morph.js"}}},"Label_95012A2B_611F_4CB3_90C1_6F8A46950C0C":{"rev":1246970,"props":{"name":{"value":"checkmark"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(12.139648437500004,12.1396484375)"},"origin":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(13,13)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,26)"},"visible":{"value":false},"metadata":{"value":{"__ref__":true,"id":"B1457752-71BC-4C94-B56D-3840734C42CE","rev":0}},"textAndAttributes":{"value":["\uf058",{"__ref__":true,"id":"85B071DD-CB94-4383-B0E8-356815CA0B5B","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"B1457752-71BC-4C94-B56D-3840734C42CE":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"6B4108C2-10BE-4AE3-96A9-0B77ABC9A753","rev":0}}}},"6B4108C2-10BE-4AE3-96A9-0B77ABC9A753":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"85B071DD-CB94-4383-B0E8-356815CA0B5B":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"name":{"value":"check-circle"}}},"Label_E90E5640_D133_4925_9D4E_DA9E5DD56C7F":{"rev":1246971,"props":{"name":{"value":"frozen indicator"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(26,27)"},"visible":{"value":false},"metadata":{"value":{"__ref__":true,"id":"CB4CEDB1-023E-47E3-910B-B55648B10DD3","rev":0}},"textAndAttributes":{"value":["\uf2dc",{"__ref__":true,"id":"D57CC0BA-4B28-484F-9CFF-9E265DD8D1FD","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":null},"CB4CEDB1-023E-47E3-910B-B55648B10DD3":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"E343B641-B1BD-4D12-8744-DCAED5A5233F","rev":0}}}},"E343B641-B1BD-4D12-8744-DCAED5A5233F":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"D57CC0BA-4B28-484F-9CFF-9E265DD8D1FD":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":400},"textStyleClasses":{"value":["fas"]},"name":{"value":"snowflake-o"}}},"32EDB653-A1E1-4B55-895D-F24FF7E2851E":{"rev":0,"props":{"_rev":{"value":0}}},"5045A776-502C-4191-89BB-C3D39A31DFDE":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"ellipse\\", _id: \\"2ca7d38e0db9ca1cedb63cb8a2c7184cc7ff5b10\\"})"}}},"Label_7C1B29FD_90AE_44BE_82D6_E3F5C468150F":{"rev":3955,"props":{"name":{"value":"icon"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(14.5,10)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(30,30)"},"opacity":{"value":0.2},"metadata":{"value":{"__ref__":true,"id":"2E113C1E-3223-421F-B41B-939B5D30A83F","rev":0}},"textAndAttributes":{"value":["\uf7a2",{"__ref__":true,"id":"459EDF1E-50AB-44BF-B449-B4AF36BDC50C","rev":0}]}},"lively.serializer-class-info":{"className":"Label","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"text/label.js"}},"_cachedTextBounds":[0,0,30,30]},"2E113C1E-3223-421F-B41B-939B5D30A83F":{"rev":0,"props":{"_rev":{"value":0},"deserializeInfo":{"value":{"__ref__":true,"id":"B9C79853-86E2-459E-A9A7-6E49557D39C6","rev":0}}}},"B9C79853-86E2-459E-A9A7-6E49557D39C6":{"rev":0,"props":{"_rev":{"value":0},"recoveredTextBounds":{"value":true}}},"459EDF1E-50AB-44BF-B449-B4AF36BDC50C":{"rev":0,"props":{"_rev":{"value":0},"fontFamily":{"value":"\\"Font Awesome 5 Free\\", \\"Font Awesome 5 Brands\\""},"fontWeight":{"value":"900"},"textStyleClasses":{"value":["fas"]},"fontSize":{"value":30.108},"name":{"value":"cube"}}},"517BD2F7-7F33-4DCD-8161-606AF1C7CC99":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"}}},"5DCDAAC7-B355-4FC1-BE11-14AAA203AB9F":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"package loading progress indicator\\", _id: \\"f64ec4ab4ac2da6a67007e4f1ef82de8a479a583\\"})"}}},"HTMLMorph_9D156F59_A32E_4A30_991E_86B283591AA8":{"rev":3792,"props":{"name":{"value":"css loading screen"},"position":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(36.38826522148531,50.78076171875)"},"extent":{"value":"__lv_expr__:{pt}:lively.graphics/geometry-2d.js:pt(939.96484375,274.29296875)"},"visible":{"value":false},"styleClasses":{"value":["HTMLMorph","Morph","morph"]},"isLayoutable":{"value":false},"metadata":{"value":{"__ref__":true,"id":"C6326B8C-643E-4F65-B171-44541B1CA82C","rev":0}},"html":{"value":"<div style=\\"position: fixed; z-index: 1; height: 100%; width: 100%; background-color: transparent\\">\\n  <div id=\\"loading-bar\\">\\n     <div id=\\"progress\\" style=\\"width: 100%;\\">\\n  </div>\\n</div></div>"},"cssDeclaration":{"value":"#loading-bar {\\n  height: 20px;\\n  width: 400px;\\n  color: gray;\\n  border-style: solid;\\n  border-color: gray;\\n  border-width: 2px;\\n  border-radius: 10px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  overflow: hidden;\\n  margin: 0px 0 0 -202px;\\n}\\n\\n#progress {\\n  background-color: gray;\\n  height: 100%;\\n  animation: load 5s;\\n}\\n\\n@keyframes load {\\n  from { width: 0% }\\n  to { width: 100% }\\n}"}},"lively.serializer-class-info":{"className":"HTMLMorph","module":{"package":{"name":"lively.morphic","version":"0.1.2"},"pathInPackage":"html-morph.js"}}},"C6326B8C-643E-4F65-B171-44541B1CA82C":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"html-morph\\", _id: \\"3695da8ba64dd32d8645b4c1937b5d361e002bbc\\"})"}}},"05289C6F-0734-4CDF-BB52-90F0F46A13FF":{"rev":0,"props":{"_rev":{"value":0},"commit":{"value":"__lv_expr__:({type: \\"part\\", name: \\"rectangle\\", _id: \\"aab07b2053fb8603cfdef2a97aa1436487eabc93\\"})"},"publishedAlias":{"value":"world-loading-screen"},"excludedPackages":{"value":["kld-intersections","lively.collab"]},"publishedLocation":{"value":"/lively.freezer/loading-screen/"}}}},"requiredVersion":">=0.1","packagesToRegister":[],"packageDepMap":{"local://lively-object-modules/PartialFreezing":["local://lively-object-modules/WorldVersionViewer"],"local://lively-object-modules/WorldVersionViewer":[],"local://lively-object-modules/ModuleProgress":[]}}');
lively.resources={resource:x,loadViaScript:W};lively.morphic={loadMorphFromSnapshot:bu};wa({aj:void 0,bT:void 0})}}});