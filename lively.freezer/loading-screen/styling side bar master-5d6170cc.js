System.register("./__root_module__-7d3cbdeb.js kld-intersections ./index-f2f18556.js ./color-picker-8d65425e.js ./index-c8d23f92.js ./index-950339af.js ./index-03442661.js".split(" "),function(){var Ka,wb,Ab,gc,Kb,Zc,Kc,md,Fc,Bc,Nc,Uc,ce,Zd,pe,Mc,Kd,Jb,Dc,nd,Hc,wd,Qd,Eb,ic,jd,jc,kd,vb,db,ec,Mb,Hb,pc;return{setters:[function(Ma){Ka=Ma.f;wb=Ma.s;Ab=Ma.Y;gc=Ma.aw;Kb=Ma.a;Zc=Ma.K;Kc=Ma.g;md=Ma.af;Fc=Ma.aa;Bc=Ma.m;Nc=Ma.M;Uc=Ma.I;ce=Ma.b;Zd=Ma.R;pe=Ma.C;Mc=Ma.c;Kd=Ma._;Jb=Ma.o;Dc=Ma.bF;nd=Ma.bC;Hc=
Ma.a4;wd=Ma.i;Qd=Ma.t;Eb=Ma.e;ic=Ma.bz;jd=Ma.d;jc=Ma.bM;kd=Ma.r;vb=Ma.P;db=Ma.bN;ec=Ma.bO},function(){},function(Ma){Mb=Ma.I},function(Ma){Hb=Ma.a;pc=Ma.S},function(){},function(){},function(){}],execute:function(){var Ma=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js");Ma.fun=Ka;Ma.string=wb;Ma.obj=Ab;Ma.properties=gc;Ma.arr=Kb;Ma.Text=Zc;Ma.config=Kc;Ma.HorizontalLayout=md;Ma.VerticalLayout=Fc;Ma.morph=Bc;Ma.Morph=Nc;Ma.Icon=Uc;Ma.pt=ce;Ma.Rectangle=Zd;Ma.Color=pe;Ma.connect=Mc;Ma.disconnect=
Kd;Ma.once=Jb;Ma.noUpdate=Dc;Ma.ColorPicker=Hb;Ma.DropDownList=nd;Ma.loadObjectFromPartsbinFolder=Hc;Ma.cachedControls=new WeakMap;var Ib=function(Fb){var sb=lively.FreezerRuntime.recorderFor("lively.ide/text/ui.js"),Ea=sb.hasOwnProperty("RichTextControl")&&"function"===typeof sb.RichTextControl?sb.RichTextControl:sb.RichTextControl=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(Ea,Fb,[{key:"toggleButton",
value:function(ua,V){ua.master=V?{auto:this.selectedButtonMaster}:{auto:this.buttonMaster}}},{key:"onLoad",value:function(){this.reset()}},{key:"reset",value:function(){var ua=this.ui.fontSelection;ua.items=Ma.arr.uniq([].concat($jscomp.arrayFromIterable(this.env.fontMetric.supportedFonts),$jscomp.arrayFromIterable(Ma.config.text.basicFontItems)));this.target&&(ua.selection=this.target.fontFamily||ua.items[0].value,Ma.connect(this.target,"selectionChange",this,"update",{garbageCollect:!0}))}},{key:"alignAtTarget",
value:function(ua){ua=void 0===ua?!!this.world():ua;var V=this.target,ra=V.world()||$world,ja=this.globalBounds();V=(V.selection.isEmpty()?V.globalBounds():V.getGlobalTransform().transformRectToRect(V.selectionBounds().translatedBy(V.scroll.negated()))).bottomCenter().subPt(ja.topCenter());ra=ra.visibleBounds().translateForInclusion(ja.translatedBy(V)).topLeft().subPt(ja.topLeft());ra=this.position.addPt(ra);ua?this.animate({duration:300,position:ra}):this.position=ra}},{key:"removeFocus",value:function(){var ua=
this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(V){return V.targetObj===ua&&V.disconnect()});this.autoRemove&&this.target&&(this.remove(),this.target=null)}},{key:"focusOn",value:function(ua,V){V=void 0===V?!0:V;var ra=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){if(1==ja.nextAddress)return ra.target&&Ma.disconnect(ra.target,"selectionChange",ra,"update"),ra.target=ua,ra.reset(),ra.update(),ja.yield(ra.whenRendered(),2);
ra.ui.fontSizeField.relayout();V&&ra.alignAtTarget();ja.jumpToEnd()})}},{key:"setupConnections",value:function(){Ma.connect(this.ui.paddingField,"number",this,"setPadding");Ma.connect(this.ui.paddingFieldTop,"number",this,"setPaddingTop");Ma.connect(this.ui.paddingFieldBottom,"number",this,"setPaddingBottom");Ma.connect(this.ui.paddingFieldLeft,"number",this,"setPaddingLeft");Ma.connect(this.ui.paddingFieldRight,"number",this,"setPaddingRight")}},{key:"update",value:function(){var ua=this,V=this.target,
ra=this.updateSpec,ja=V.selection;ja=!V.readOnly&&ja?ja.isEmpty()?V.textAttributeAt(ja.start):V.getStyleInRange(ja):{};var Ca=this.managedProps,va=Ma.obj.select(V,Ca);V=$jscomp.makeIterator(Object.entries(Ma.obj.select(ja||{},Ca)));for(ja=V.next();!ja.done;ja=V.next())Ca=$jscomp.makeIterator(ja.value),ja=Ca.next().value,Ca=Ca.next().value,"undefined"!==typeof Ca&&(va[ja]=Ca);Ma.noUpdate(function(){for(var cb=$jscomp.makeIterator(Object.entries(ua.ui)),hc=cb.next();!hc.done;hc=cb.next()){var gb=$jscomp.makeIterator(hc.value);
hc=gb.next().value;gb=gb.next().value;if(ra[hc])ra[hc](va,gb)}})}},{key:"relayout",value:function(){}},{key:"changeAttributeInSelectionOrMorph",value:function(ua,V){var ra=this.target,ja=ra.selection;ra.isLabel||ja&&ja.isEmpty()?ra[ua]="function"===typeof V?V(ra[ua]):V:(ra.undoManager.group(),ra.changeStyleProperty(ua,function(Ca){return"function"===typeof V?V(Ca):V}),ra.undoManager.group())}},{key:"changeFont",value:function(ua){var V=this,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){if(1==
ja.nextAddress)return V._last=ua,(ra="custom..."===ua)?ja.yield($world.prompt("Enter font family name",{requester:V.target,historyId:"lively.morphic-rich-text-font-names",useLastInput:!0}),3):ja.jumpTo(2);if(2!=ja.nextAddress&&(ua=ja.yieldResult,!ua))return ja.return();V.changeAttributeInSelectionOrMorph("fontFamily",ua);ja.jumpToEnd()})}},{key:"setPadding",value:function(ua){this.target.padding=Ma.Rectangle.inset(ua)}},{key:"setPaddingTop",value:function(ua){var V=this.target.padding;this.target.padding=
Ma.Rectangle.inset(V.left(),ua,V.right(),V.bottom())}},{key:"setPaddingLeft",value:function(ua){var V=this.target.padding;this.target.padding=Ma.Rectangle.inset(ua,V.top(),V.right(),V.bottom())}},{key:"setPaddingRight",value:function(ua){var V=this.target.padding;this.target.padding=Ma.Rectangle.inset(V.left(),V.top(),ua,V.bottom())}},{key:"setPaddingBottom",value:function(ua){var V=this.target.padding;this.target.padding=Ma.Rectangle.inset(V.left(),V.top(),V.right(),ua)}},{key:"setLineWrapping",
value:function(ua){this.target.lineWrapping=ua}},{key:"changeFontWeight",value:function(ua){this.changeAttributeInSelectionOrMorph("fontWeight",ua)}},{key:"changeTextAlign",value:function(ua){this.changeAttributeInSelectionOrMorph("textAlign",ua)}},{key:"changeFontColor",value:function(ua){this.changeAttributeInSelectionOrMorph("fontColor",ua)}},{key:"changeFontSize",value:function(ua){this.changeAttributeInSelectionOrMorph("fontSize",ua)}},{key:"changeFixedWidth",value:function(ua){this.target.fixedWidth=
ua}},{key:"changeFixedHeight",value:function(ua){this.target.fixedHeight=ua}},{key:"changeLink",value:function(){var ua=this,V,ra,ja,Ca,va;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cb){if(1==cb.nextAddress)return V=ua.target,ra=V.selection,ja=V.getStyleInRange(ra),Ca=ja.link,cb.yield(ua.world().prompt("Set link",{input:Ca||"https://"}),2);va=cb.yieldResult;V.undoManager.group();V.setStyleInRange({link:va||void 0},ra);V.undoManager.group();ua.autoRemove&&ua.remove();cb.jumpToEnd()})}},
{key:"toggleUnderline",value:function(){this.changeAttributeInSelectionOrMorph("textDecoration",function(ua){return"underline"===ua?"none":"underline"})}},{key:"toggleItalic",value:function(){this.changeAttributeInSelectionOrMorph("fontStyle",function(ua){return"italic"===ua?"normal":"italic"})}},{key:"toggleBold",value:function(){this.changeAttributeInSelectionOrMorph("fontWeight",function(ua){return"bold"===ua||"700"===ua?"normal":"bold"})}},{key:"copyStyle",value:function(){var ua=this,V=this.target,
ra=this.ui.applyStyleButton;V=V.selection.isEmpty()?V.defaultTextStyle:V.getStyleInRange(V.selection);var ja=JSON.stringify(V,null,2);this.constructor.copiedStyle=V;ra.tooltip="paste style\n"+ja;this.env.eventDispatcher.doCopyWithMimeTypes([{type:"text/plain",data:ja},{type:"application/morphic-text-style",styleString:ja}]).then(function(){return ua.setStatusMessage("Copied style\n"+ja)}).catch(function(Ca){return ua.showError(Ca)})}},{key:"pasteStyle",value:function(){var ua=this,V=this.target,ra=
this.constructor.copiedStyle;V.selection.isEmpty()?Object.assign(V,ra):V.selections.forEach(function(ja){return V.addTextAttribute(ua.constructor.copiedStyle,ja)});this.update()}},{key:"clearStyle",value:function(){var ua=this.target;ua.selections.forEach(function(V){return ua.resetStyleInRange(V)});this.update()}},{key:"configureRichTextOptions",value:function(){this.getSubmorphNamed("config panel")&&this.getSubmorphNamed("config panel").remove();var ua=this.defaultSpec,V=this.uiSpec;ua=this.addMorph({name:"config panel",
layout:new Ma.VerticalLayout({spacing:5}),epiMorph:!0,submorphs:[].concat($jscomp.arrayFromIterable(Object.keys(ua).map(function(ra){var ja=V.rows.some(function(Ca){return Ca.some(function(va){return va===ra})});return{type:"labeledcheckbox",label:ra,name:ra,checked:ja}})),[{layout:new Ma.HorizontalLayout({spacing:3}),submorphs:[{type:"button",name:"OK button",label:"OK"},{type:"button",name:"cancel button",label:"Cancel"}]}])});ua.center=this.innerBounds().center();Ma.connect(ua.getSubmorphNamed("OK button"),
"fire",this,"configureAccepted");Ma.connect(ua.getSubmorphNamed("cancel button"),"fire",this,"configureCanceled")}},{key:"configureAccepted",value:function(){var ua=this.getSubmorphNamed("config panel");ua&&(ua.remove(),ua.submorphs.filter(function(V){return"LabeledCheckBox"===V.constructor.name}))}},{key:"configureCanceled",value:function(){var ua=this.getSubmorphNamed("config panel");ua&&ua.remove()}},{key:"close",value:function(){var ua=this;this.target&&this.target.attributeConnections&&this.target.attributeConnections.forEach(function(V){return V.targetObj===
ua&&V.disconnect()});this.remove()}},{key:"alwaysTargetFocusedMorph",value:function(){this.startStepping(1500,"updateTarget")}},{key:"updateTarget",value:function(){var ua=this.world();ua&&(ua=ua.focusedMorph)&&(ua.isLabel||ua.isText)&&!this.isAncestorOf(ua)&&this.target!==ua&&this.focusOn(ua,!1)}},{key:"onMouseUp",value:function(ua){var V=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return ra.yield(V.whenRendered(),2);V.update();ra.jumpToEnd()})}},{key:"attachToWorld",
value:function(){Ma.connect($world,"onMouseDown",this,"updateTarget",{garbageCollect:!0})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"RichTextControl"}},{key:"properties",get:function(){return{autoRemove:{defaultValue:!1},target:{},toggleColor:{},buttonMaster:{defaultValue:"styleguide://System/dark button"},selectedButtonMaster:{defaultValue:"styleguide://SystemIDE/selected button"},managedProps:{readOnly:!0,get:function(){return"fontFamily fontWeight fontSize fontStyle isText fontColor textAlign link textDecoration fixedWidth fixedHeight lineWrapping padding".split(" ")}},
updateSpec:{get:function(){var ua=this;return Object.assign({fontSelection:function(V,ra){var ja=V.fontFamily;(V=ja&&ra.items.find(function(Ca){return Ca.value.toLowerCase()===ja.toLowerCase()}))?ra.selection=V.value:ja&&(ra.items=ra.items.concat({isListItem:!0,label:[ja,{fontFamily:ja}],value:ja}),ra.selection=Ma.arr.last(ra.items))},fontWeightSelection:function(V,ra){ra.selection="normal"==V.fontWeight?"Medium":V.fontWeight?Ma.string.capitalize(V.fontWeight):"Medium"},boldButton:function(V,ra){ua.toggleButton(ra,
"bold"===V.fontWeight)},italicButton:function(V,ra){ua.toggleButton(ra,"italic"===V.fontStyle)},underlineButton:function(V,ra){ua.toggleButton(ra,"underline"===V.textDecoration)},linkButton:function(V,ra){ua.toggleButton(ra,!!V.link)},colorPicker:function(V,ra){ra.colorValue=V.fontColor},fontSizeField:function(V,ra){ra.number=V.fontSize},fixedWidthControl:function(V,ra){V.isText?ra.enable():ra.disable();ra.checked=V.fixedWidth},fixedHeightControl:function(V,ra){V.isText?ra.enable():ra.disable();ra.checked=
V.fixedHeight},lineWrappingControl:function(V,ra){var ja=$jscomp.makeIterator(ra.submorphs);ra=ja.next().value;ja=ja.next().value;ra.checked=!!V.lineWrapping;V.isText?ra.enable():ra.disable();ja.deactivated=!V.lineWrapping;ja.deactivated?ja.opacity=.5:(ja.opacity=1,ja.selection=V.lineWrapping)},paddingControl:function(V,ra){var ja=V.padding,Ca=ja.left();V=ja.top();var va=ja.right();ja=ja.bottom();var cb=!Ma.arr.every([Ca,V,va,ja],function(hc){return hc==Ca});ra.get("multi value indicator").visible=
cb;Ma.connect(ra.get("multi value indicator"),"onMouseDown",ra.get("padding field"),"number",{converter:"() => left",varMapping:{left:Ca}});ra.get("padding field").number=Ca;ra.get("padding field").visible=!cb;try{ra.get("padding field top").number=V,ra.get("padding field left").number=Ca,ra.get("padding field right").number=va,ra.get("padding field bottom").number=ja}catch(hc){}}},["left","center","right","block"].reduce(function(V,ra){V[ra+"Align"]=function(ja,Ca){Ca.deactivated=!ja.isText;ua.toggleButton(Ca,
ja.textAlign==ra)};return V},{}))}},ui:{get:function(){var ua=this,V={fontSelection:"font selection",fontWeightSelection:"font weight selection",boldButton:"bold button",italicButton:"italic button",underlineButton:"underline button",linkButton:"link button",leftAlign:"left align",centerAlign:"center align",rightAlign:"right align",blockAlign:"block align",fontSizeField:"font size field",colorPicker:"color picker",copyStyleButton:"copy style",applyStyleButton:"apply style",removeStyleButton:"remove style",
fixedHeightControl:"fixed height control",fixedWidthControl:"fixed width control",lineWrappingControl:"line wrapping control",paddingControl:"padding control",paddingField:"padding field",paddingFieldTop:"padding field top",paddingFieldLeft:"padding field left",paddingFieldRight:"padding field right",paddingFieldBottom:"padding field bottom"};return Ma.obj.extract(V,Ma.obj.keys(V),function(ra,ja){return ua.getSubmorphNamed(ja)})}}}}},{key:"openDebouncedFor",value:function(ua){var V=ua.selection;if(V.isEmpty()){var ra=
Ma.cachedControls.get(ua);ra&&(ra.update(),ra.alignAtTarget(),ra.world()||ua.world().addMorph(ra))}else Ma.fun.debounceNamed(ua.id+"openRichTextControl",600,function(){var ja=Ma.cachedControls.get(ua);V.isEmpty()?ja&&ja.removeFocus():(ja&&ja.world()||(ja=new Ma.RichTextControl,Ma.cachedControls.set(ua,ja)),ua.world().addMorph(ja),ja.focusOn(ua,!0),ja.alwaysTargetFocusedMorph())})()}},{key:"openFor",value:function(ua){var V=Ma.cachedControls.get(ua);V?V.update():(V=new Ma.RichTextControl,Ma.cachedControls.set(ua,
V),V.focusOn(ua,!0),V.alwaysTargetFocusedMorph());V.alignAtTarget();V.world()||ua.world().addMorph(V);return V}}],sb,{pathInPackage:function(){return"text/ui.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"lively.ide",version:"0.1.0"}}},{start:636,end:17713})}(Ma.Morph);Ma.RichTextControl=Ib;Ma.RichTextControl=Ib;Ma.RichTextControl=Ib;var pb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js");
pb.Morph=Nc;pb.touchInputDevice=Qd;pb.morph=Bc;pb.Icon=Uc;pb.easings=Eb;pb.pt=ce;pb.Color=pe;pb.fun=Ka;pb.connect=Mc;pb.TreeData=ic;Ib=function(Fb){var sb=lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Ea=sb.hasOwnProperty("SettingsTree")&&"function"===typeof sb.SettingsTree?sb.SettingsTree:sb.SettingsTree=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(Ea,Fb,[{key:"display",value:function(ua){return ua.panel?
[ua.panel,{}]:ua.name}},{key:"collapse",value:function(ua,V){ua.isCollapsed=V}},{key:"isCollapsed",value:function(ua){return ua.isCollapsed}},{key:"isLeaf",value:function(ua){return!ua.children}},{key:"getChildren",value:function(ua){var V=this;return ua===this.root?ua.children.filter(function(ra){return V.target&&ra.applicabilityCheck?eval(ra.applicabilityCheck)(V.target):!0}):ua.children}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"SettingsTree"}},{key:"default",value:function(){return new this({isCollapsed:!1,
children:[{isCollapsed:!0,name:[" ",{}].concat($jscomp.arrayFromIterable(pb.Icon.textAttribute("font")),[" Rich Text",{fontWeight:"bold"}]),children:[{panel:pb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(pb.Icon.textAttribute("image")),[" Shape",{fontWeight:"bold"}]),children:[{panel:pb.morph({})}]},{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(pb.Icon.textAttribute("border-style")),[" Border",{paddingLeft:"2px",fontWeight:"bold"}]),children:[{panel:pb.morph({})}]},
{isCollapsed:!1,name:[" ",{}].concat($jscomp.arrayFromIterable(pb.Icon.textAttribute("grip-vertical")),[" Layout",{paddingLeft:"4px",fontWeight:"bold"}]),children:[{panel:pb.morph({})}]}]})}},{key:"border",value:function(){return new this({isCollapsed:!1,children:[{isCollapsed:!0,name:[" Type    ",{},pb.morph({height:20}),{}],children:[{panel:pb.morph({})}]},{isCollapsed:!1,name:[" Color   ",{},pb.morph({height:20}),{}],children:[{panel:pb.morph({})}]},{isCollapsed:!1,name:[" Width  ",{},pb.morph({height:20}),
{}],children:[{panel:pb.morph({})}]},{isCollapsed:!1,name:[" Radius ",{},pb.morph({height:20}),{}],children:[{panel:pb.morph({})}]}]})}}],sb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:284,end:2663})}(pb.TreeData);pb.SettingsTree=Ib;pb.SettingsTree=Ib;pb.SettingsTree=Ib;Ib=function(Fb){var sb=
lively.FreezerRuntime.recorderFor("StylingSideBar/index.js"),Ea=sb.hasOwnProperty("StylingSideBar")&&"function"===typeof sb.StylingSideBar?sb.StylingSideBar:sb.StylingSideBar=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(Ea,Fb,[{key:"relayout",value:function(){this.onWorldResize()}},{key:"collapseAll",value:function(){this.getSubmorphsByStyleClassName("Tree").forEach(function(ua){ua.nodes.forEach(function(V){return ua.treeData.root==
V?ua.uncollapse(V):ua.collapse(V)})})}},{key:"onWorldResize",value:function(ua){ua=void 0===ua?!0:ua;if(this.respondsToVisibleWindow){var V=$world.visibleBounds(),ra=navigator.standalone&&pb.touchInputDevice?25:0,ja=this.getSubmorphNamed("horizontal resizer");this.height=V.height-ra;this.top=ra+V.top();ja.height=this.height;ja.left=0;ja.top=0;ua&&(this.visible?this.topRight=V.topRight():this.topLeft=V.topRight())}}},{key:"toggle",value:function(ua){var V=this,ra,ja;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ca){switch(Ca.nextAddress){case 1:ra=
$world.visibleBounds();ja=navigator.standalone&&pb.touchInputDevice?25:0;V.height=ra.height-ja;V.top=ja+ra.top();if(ua)return $world.addMorph(V,$world.get("lively top bar")),V.topLeft=ra.topRight(),V.visible=!0,Ca.yield(V.whenRendered(),5);V.detachFromWorld($world);return Ca.yield(V.animate({opacity:0,topLeft:ra.topRight(),duration:300}),4);case 4:V.visible=!1;V.remove();Ca.jumpTo(0);break;case 5:return V.onWorldResize(!1),Ca.yield(V.animate({opacity:1,easing:pb.easings.outCirc,topRight:ra.topRight(),
duration:300}),6);case 6:V.attachToWorld($world),Ca.jumpToEnd()}})}},{key:"cleanupAnchors",value:function(){for(var ua=this.withAllSubmorphsSelect(function(Ca){return Ca.anchors&&Ca.anchors.filter(function(va){return!va.id}).length}),V={},ra=$jscomp.makeIterator(ua),ja=ra.next();!ja.done;V={$jscomp$loop$prop$m$2830:V.$jscomp$loop$prop$m$2830},ja=ra.next())V.$jscomp$loop$prop$m$2830=ja.value,V.$jscomp$loop$prop$m$2830.anchors.forEach(function(Ca){return function(va){return!va.id&&Ca.$jscomp$loop$prop$m$2830.removeAnchor(va)}}(V));
return ua.length}},{key:"attachToWorld",value:function(ua){pb.connect(ua,"showHaloFor",this,"focusMorph",{garbageCollect:!0})}},{key:"detachFromWorld",value:function(ua){var V=this;ua.attributeConnections.forEach(function(ra){ra.targetObj===V&&ra.disconnect()})}},{key:"focusMorph",value:function(ua){if(!ua.isMorph||!ua.ownerChain().includes(this)){(ua.isLabel||ua.isText||ua.isButton)&&this.richTextControl.focusOn(ua,!1);var V=this.getSubmorphNamed("style settings tree");V.treeData.target=ua;V.update(!0);
Object.values(this.controls).forEach(function(ra){return ra&&ra.focusOn(ua)})}}},{key:"onHierarchyChange",value:function(){Object.values(this.controls).forEach(function(ua){return ua&&ua.update()})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"StylingSideBar"}},{key:"properties",get:function(){return{controls:{},richTextControl:{},isHaloItem:{get:function(){return!0}}}}}],sb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"StylingSideBar",version:"0.1.1-70"}}},{start:2682,end:5727})}(pb.Morph);Ib=pb.StylingSideBar;pb.default=Ib;var Ub=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js");Ub.Morph=Nc;Ub.obj=Ab;Ub.string=wb;Ub.connect=Mc;Ub.noUpdate=Dc;Ub.once=Jb;Ib=function(Fb){var sb=lively.FreezerRuntime.recorderFor("ShapeFormatStyler/index.js"),Ea=sb.hasOwnProperty("ShapeFormatStyler")&&"function"===typeof sb.ShapeFormatStyler?
sb.ShapeFormatStyler:sb.ShapeFormatStyler=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(Ea,Fb,[{key:Symbol.for("lively-instance-initialize"),value:function(ua){wd._get(Object.getPrototypeOf(Ea.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ua);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var ua=this.ui,V={},ra=$jscomp.makeIterator(Object.entries(this.uiSpec)),
ja=ra.next();!ja.done;V={$jscomp$loop$prop$control$2832:V.$jscomp$loop$prop$control$2832,$jscomp$loop$prop$prop$2833:V.$jscomp$loop$prop$prop$2833},ja=ra.next()){var Ca=$jscomp.makeIterator(ja.value);ja=Ca.next().value;Ca=$jscomp.makeIterator(Ca.next().value);Ca.next();var va=Ca.next().value;V.$jscomp$loop$prop$prop$2833=Ca.next().value;V.$jscomp$loop$prop$control$2832=ua[ja];Ub.connect(V.$jscomp$loop$prop$control$2832,va,this,"updateTarget",{updater:function(cb){return function(hc,gb){cb.$jscomp$loop$prop$control$2832._updating=
!0;hc(cb.$jscomp$loop$prop$prop$2833,gb);cb.$jscomp$loop$prop$control$2832._updating=!1}}(V),varMapping:{prop:V.$jscomp$loop$prop$prop$2833,control:V.$jscomp$loop$prop$control$2832}})}}},{key:"update",value:function(){var ua=this,V=this.target,ra=V.top,ja=V.left,Ca=V.isImage,va=V.isLabel,cb=V.imageUrl,hc=V.textString,gb=V.clipMode,Oc=V.fill,Cb=V.dropShadow,Gd=V.opacity,Ec=V.height,oc=V.width;V=this.ui;var rb=V.clipModeSelector,Md=V.fillPicker,yb=V.opacityField,qb=V.shadowPicker,Ia=V.heightField,Q=
V.widthField,za=V.posXField,Ta=V.posYField,xb=V.imageUrlInput,Yb=V.labelContentInput;Ub.noUpdate(function(){ua.updateControl(qb,"shadowValue",Cb);ua.updateControl(rb,"selection",gb);ua.updateControl(Md,"colorValue",Oc);ua.updateControl(yb,"number",Gd);ua.updateControl(Ia,"number",Ec);ua.updateControl(Q,"number",oc);ua.updateControl(za,"number",ja);ua.updateControl(Ta,"number",ra);Md.context=ua.target;Ca&&ua.updateControl(xb,"input",cb);xb.owner.isLayoutable=xb.owner.visible=!!Ca;va&&ua.updateControl(Yb,
"input",hc);Yb.owner.isLayoutable=Yb.owner.visible=!!va;var Ac=ua.getSubmorphNamed("special controls");(Ac.visible=!!va||!!Ca)?ua.height=Ac.bottom:ua.height=Ac.top})}},{key:"updateTarget",value:function(ua,V){this.target[ua]=V;this.update()}},{key:"updateControl",value:function(ua,V,ra){ua._updating||Ub.obj.equals(ua[V],ra)||(ua[V]=ra)}},{key:"updateMultiValue",value:function(ua,V,ra){var ja=this.ui,Ca=ja[this.join(ua)],va=Ca.get("multi value indicator"),cb=Ub.obj.values(V).some(function(hc){return!Ub.obj.isFunction(hc)&&
!Ub.obj.equals(hc,V.valueOf())});va.left=0;Ca.visible=Ca.isLayoutable=!cb;if(cb&&va.visible!=cb)Ub.once(va,"onMouseDown",Ca,ra,{converter:function(){return V.valueOf()},varMapping:{value:V}});va.visible=va.isLayoutable=cb;va.left=cb?200:0;this.updateControl(Ca,ra,V.valueOf());Ca=$jscomp.makeIterator(["top","left","bottom","right"]);for(va=Ca.next();!va.done;va=Ca.next())va=va.value,cb=ja[this.join(ua,va)],this.updateControl(cb,ra,V[va])}},{key:"lower",value:function(ua){return ua.charAt(0).toLowerCase()+
ua.slice(1)}},{key:"join",value:function(ua,V){return this.lower(Ub.string.camelCaseString(ua+(V?" "+V:"")))}},{key:"unwrap",value:function(ua,V,ra){var ja={};ja=(ja[this.lower(Ub.string.camelCaseString(ua))]=[ua,V,ra],ja);for(var Ca=$jscomp.makeIterator(["top","left","bottom","right"]),va=Ca.next();!va.done;va=Ca.next()){va=va.value;var cb=ua+" "+va;ja[this.lower(Ub.string.camelCaseString(cb))]=[cb,V,this.join(ra,va)]}return ja}},{key:"focusOn",value:function(ua){var V=this,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){if(1==
ja.nextAddress)return!ua||V.isAncestorOf(ua)||V.target===ua||Ub.obj.isArray(ua)||(V.target=ua),ra=V.visible,V.visible=!0,ja.yield(V.whenRendered(),2);if(3!=ja.nextAddress)return V.update(),ja.yield(V.whenRendered(),3);V.getSubmorphsByStyleClassName("NumberWidget").map(function(Ca){return Ca.relayout()});V.visible=ra;ja.jumpToEnd()})}},{key:"removeFocus",value:function(){this.target=null}},{key:"onHoverIn",value:function(ua){this.watchForTarget=!1}},{key:"onHoverOut",value:function(ua){this.watchForTarget=
!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ShapeFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{get:function(){return this._uiSpec||(this._uiSpec={clipModeSelector:["clip mode selector","selection","clipMode"],fillPicker:["fill picker","colorValue","fill"],shadowPicker:["shadow picker","shadowValue","dropShadow"],opacityField:["opacity field","number","opacity"],heightField:["height field","number","height"],widthField:["width field","number","width"],posXField:["pos x field",
"number","left"],posYField:["pos y field","number","top"],imageUrlInput:["image url input","inputAccepted","imageUrl"],labelContentInput:["label content input","inputAccepted","textString"]})}},ui:{readOnly:!0,get:function(){var ua=this,V=this.uiSpec;return this._ui||(this._ui=Ub.obj.extract(V,Ub.obj.keys(V),function(ra,ja){ra=$jscomp.makeIterator(ja).next().value;return ua.getSubmorphNamed(ra)}))}}}}}],sb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeFormatStyler",version:"0.1.1-158"}}},{start:176,end:5822})}(Ub.Morph);Ib=Ub.ShapeFormatStyler;Ub.default=Ib;var dc=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js");dc.Morph=Nc;dc.ShadowPopover=pc;dc.connect=Mc;dc.signal=jd;Ib=function(Fb){var sb=lively.FreezerRuntime.recorderFor("ShadowWidget/index.js"),Ea=sb.hasOwnProperty("ShadowWidget")&&"function"===typeof sb.ShadowWidget?sb.ShadowWidget:
sb.ShadowWidget=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(Ea,Fb,[{key:"onHoverIn",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:1,duration:200})}},{key:"onHoverOut",value:function(){this.getSubmorphNamed("drop down indicator").animate({opacity:0,duration:200})}},{key:"onMouseDown",value:function(ua){this.openPopover()}},{key:"update",value:function(ua){var V=this.submorphs[0];
V&&(V.dropShadow=ua)}},{key:"openPopover",value:function(){var ua=this,V;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){if(1==ra.nextAddress)return V=new dc.ShadowPopover({hasFixedPosition:!!ua.ownerChain().find(function(ja){return ja.hasFixedPosition}),shadowValue:ua.shadowValue}),ra.yield(V.fadeIntoWorld(ua.globalBounds().center()),2);dc.connect(V,"shadowValue",ua,"shadowValue");dc.connect(ua,"shadowValue",ua,"update");dc.signal(ua,"openWidget",V);ra.jumpToEnd()})}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShadowWidget"}},{key:"properties",get:function(){return{shadowValue:{set:function(ua){this.setProperty("shadowValue",ua);this.update(ua)}}}}}],sb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShadowWidget",version:"0.1.1-7"}}},{start:194,end:1231})}(dc.Morph);Ib=dc.ShadowWidget;dc.default=Ib;var vc=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js");
vc.Morph=Nc;vc.obj=Ab;vc.string=wb;vc.connect=Mc;vc.noUpdate=Dc;vc.once=Jb;Ib=function(Fb){var sb=lively.FreezerRuntime.recorderFor("BorderFormatStyler/index.js"),Ea=sb.hasOwnProperty("BorderFormatStyler")&&"function"===typeof sb.BorderFormatStyler?sb.BorderFormatStyler:sb.BorderFormatStyler=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(Ea,Fb,[{key:"setupUI",value:function(){var ua=this;this.getSubmorphsByStyleClassName("NumberWidget").map(function(V){var ra=
vc.string.camelCaseString(V.name);ra=ra[0].toLowerCase()+ra.slice(1);ua.ui[ra]=V})}},{key:"cleanupAnchors",value:function(){var ua=this.withAllSubmorphsSelect(function(ja){return ja.anchors&&ja.anchors.filter(function(Ca){return!Ca.id})}),V={};ua=$jscomp.makeIterator(ua);for(var ra=ua.next();!ra.done;V={$jscomp$loop$prop$m$2835:V.$jscomp$loop$prop$m$2835},ra=ua.next())V.$jscomp$loop$prop$m$2835=ra.value,V.$jscomp$loop$prop$m$2835.anchors.forEach(function(ja){return function(Ca){return!Ca.id&&ja.$jscomp$loop$prop$m$2835.removeAnchor(Ca)}}(V))}},
{key:Symbol.for("lively-instance-initialize"),value:function(ua){wd._get(Object.getPrototypeOf(Ea.prototype),Symbol.for("lively-instance-initialize"),this).call(this,ua);0<this.submorphs.length&&this.setupConnections()}},{key:"setupConnections",value:function(){for(var ua=this.ui,V={},ra=$jscomp.makeIterator(Object.entries(this.uiSpec)),ja=ra.next();!ja.done;V={$jscomp$loop$prop$control$2837:V.$jscomp$loop$prop$control$2837,$jscomp$loop$prop$prop$2838:V.$jscomp$loop$prop$prop$2838},ja=ra.next()){var Ca=
$jscomp.makeIterator(ja.value);ja=Ca.next().value;Ca=$jscomp.makeIterator(Ca.next().value);Ca.next();var va=Ca.next().value;V.$jscomp$loop$prop$prop$2838=Ca.next().value;V.$jscomp$loop$prop$control$2837=ua[ja];vc.connect(V.$jscomp$loop$prop$control$2837,va,this,"updateTarget",{updater:function(cb){return function(hc,gb){cb.$jscomp$loop$prop$control$2837._updating=!0;hc(cb.$jscomp$loop$prop$prop$2838,gb);cb.$jscomp$loop$prop$control$2837._updating=!1}}(V),varMapping:{prop:V.$jscomp$loop$prop$prop$2838,
control:V.$jscomp$loop$prop$control$2837}})}}},{key:"update",value:function(){var ua=this,V=this.target,ra=V.borderStyle,ja=V.borderColor,Ca=V.borderRadius,va=V.borderWidth;vc.noUpdate(function(){ua.updateMultiValue("border style selector",ra,"selection");ua.updateMultiValue("border color picker",ja,"colorValue");ua.updateMultiValue("border radius field",Ca,"number");ua.updateMultiValue("border width field",va,"number")})}},{key:"updateTarget",value:function(ua,V){this.target[ua]=V;this.update()}},
{key:"updateControl",value:function(ua,V,ra){ua._updating||vc.obj.equals(ua[V],ra)||(ua[V]=ra)}},{key:"updateMultiValue",value:function(ua,V,ra){var ja=this.ui,Ca=ja[this.join(ua)],va=Ca.get("multi value indicator"),cb=vc.obj.values(V).some(function(hc){return!vc.obj.isFunction(hc)&&!vc.obj.equals(hc,V.valueOf())});Ca.visible=Ca.isLayoutable=!cb;if(cb&&va.visible!=cb)vc.once(va,"onMouseDown",Ca,ra,{converter:function(){return V.valueOf()},varMapping:{value:V}});va.visible=va.isLayoutable=cb;this.updateControl(Ca,
ra,V.valueOf());Ca=$jscomp.makeIterator(["top","left","bottom","right"]);for(va=Ca.next();!va.done;va=Ca.next())va=va.value,cb=ja[this.join(ua,va)],this.updateControl(cb,ra,V[va])}},{key:"lower",value:function(ua){return ua.charAt(0).toLowerCase()+ua.slice(1)}},{key:"join",value:function(ua,V){return this.lower(vc.string.camelCaseString(ua+(V?" "+V:"")))}},{key:"unwrap",value:function(ua,V,ra){var ja={};ja=(ja[this.lower(vc.string.camelCaseString(ua))]=[ua,V,ra],ja);for(var Ca=$jscomp.makeIterator(["top",
"left","bottom","right"]),va=Ca.next();!va.done;va=Ca.next()){va=va.value;var cb=ua+" "+va;ja[this.lower(vc.string.camelCaseString(cb))]=[cb,V,this.join(ra,va)]}return ja}},{key:"attachToWorld",value:function(){vc.connect($world,"showHaloFor",this,"focusOn",{garbageCollect:!0})}},{key:"focusOn",value:function(ua){var V=this,ra;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ja){if(1==ja.nextAddress)return!ua||V.isAncestorOf(ua)||V.target===ua||vc.obj.isArray(ua)||(V.target=ua),ra=V.visible,
V.visible=!0,ja.yield(V.whenRendered(),2);if(3!=ja.nextAddress)return V.update(),ja.yield(V.whenRendered(),3);V.getSubmorphsByStyleClassName("NumberWidget").map(function(Ca){return Ca.relayout()});V.visible=ra;ja.jumpToEnd()})}},{key:"onHoverIn",value:function(ua){this.watchForTarget=!1}},{key:"onHoverOut",value:function(ua){this.watchForTarget=!0}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"BorderFormatStyler"}},{key:"properties",get:function(){return{uiSpec:{derived:!0,serialize:!1,
get:function(){return this._uiSpec||(this._uiSpec=Object.assign({},this.unwrap("border style selector","selection","borderStyle"),{},this.unwrap("border color picker","colorValue","borderColor"),{},this.unwrap("border radius field","number","borderRadius"),{},this.unwrap("border width field","number","borderWidth")))}},ui:{initialize:function(){this.setupUI()}}}}}],sb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"BorderFormatStyler",version:"0.1.1-16"}}},{start:185,end:5003})}(vc.Morph);Ib=vc.BorderFormatStyler;vc.default=Ib;var gd=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js");gd.Morph=Nc;gd.morph=Bc;gd.layouts=jc;gd.string=wb;gd.connect=Mc;gd.noUpdate=Dc;gd.InteractiveMorphSelector=Mb;gd.Color=pe;gd.pt=ce;Ib=function(Fb){var sb=lively.FreezerRuntime.recorderFor("ShapeLayoutControl/index.js"),Ea=sb.hasOwnProperty("ShapeLayoutControl")&&"function"===typeof sb.ShapeLayoutControl?
sb.ShapeLayoutControl:sb.ShapeLayoutControl=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(Ea,Fb,[{key:"focusOn",value:function(ua){this.target=ua;this.update(!1)}},{key:"setupConnections",value:function(){var ua=this.ui;gd.connect(ua.submorphSettingsControl,"fire",this,"chooseSubmorphToChangeLayoutSettings");gd.connect(ua.dragmeControl,"onDragStart",this,"onSubmorphSettingsDragStart");gd.connect(ua.xAxisPolicyControl,
"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "x",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});gd.connect(ua.yAxisPolicyControl,"selection",this,"updateSubmorphProportionalLayoutSettings",{converter:'policy => ({\n        policy,\n        axis: "y",\n        submorph: self.selectedSubmorph,\n      })',varMapping:{self:this}});for(var V={},ra=$jscomp.makeIterator(this.managedProps),ja=ra.next();!ja.done;V=
{$jscomp$loop$prop$prop$2840:V.$jscomp$loop$prop$prop$2840},ja=ra.next()){var Ca=$jscomp.makeIterator(ja.value),va=Ca.next().value;ja=Ca.next().value;Ca.next().value||(V.$jscomp$loop$prop$prop$2840=this.join(va),Ca=ua[this.join(va,"control")],gd.connect(Ca,ja,this,"updateLayout",{updater:function(cb){return function(hc,gb){hc(cb.$jscomp$loop$prop$prop$2840,gb)}}(V),varMapping:{prop:V.$jscomp$loop$prop$prop$2840}}))}}},{key:"lower",value:function(ua){return ua.charAt(0).toLowerCase()+ua.slice(1)}},
{key:"join",value:function(ua,V){return this.lower(gd.string.camelCaseString(ua+(V?" "+V:"")))}},{key:"updateLayoutOfTarget",value:function(ua){ua=gd.layouts[gd.string.camelCaseString(ua)];this.target.layout=ua?new ua({autoResize:!1}):null;this.update()}},{key:"updateLayout",value:function(ua,V){this.target.layout[ua]=V}},{key:"update",value:function(ua){var V=this;this.target&&gd.noUpdate(function(){for(var ra=V.ui,ja=V.target.layout||{name:function(){return"No"}},Ca=$jscomp.makeIterator(V.managedProps),
va=Ca.next();!va.done;va=Ca.next()){var cb=$jscomp.makeIterator(va.value);va=cb.next().value;var hc=cb.next().value;cb.next();cb=ra[V.join(va,"control")];var gb=ra[V.join(va,"label")];if(hc)if("type"===va)cb.selection=ja.name()+" Layout";else{var Oc=ja[V.join(va)],Cb="undefined"!==typeof Oc;if(Cb){switch(va){case "align":cb.items=ja.possibleAlignValues;break;case "direction":cb.items=ja.possibleDirectionValues;break;case "axis":cb.items=ja.possibleAxisValues}cb[hc]=Oc}gb.isLayoutable=gb.visible=Cb}}V.showGridLayoutControl("Grid"===
ja.name());V.showProportionalControl("Proportional"===ja.name())})}},{key:"updateSubmorphProportionalLayoutSettings",value:function(ua){var V={};this.target.layout.changeSettingsFor(ua.submorph,(V[ua.axis]=ua.policy,V),!0)}},{key:"onSubmorphSettingsDragStart",value:function(ua){var V=this;ua.stop();var ra=this.target.layout,ja=ra.settingsFor(this.selectedSubmorph),Ca=[],va;for(va in ja)Ca=[].concat($jscomp.arrayFromIterable(Ca),[va+": ",{fontWeight:"bold"},ja[va]+" ",{}]);var cb=gd.morph({type:"label",
fontColor:gd.Color.white,value:Ca,fill:gd.Color.black.withA(.7),padding:5,borderRadius:10,isLayoutable:!1});cb.wantsToBeDroppedOn=function(hc){return ra.layoutableSubmorphs.includes(hc)};cb.onBeingDroppedOn=function(hc,gb){cb.remove();if(hc=ra.layoutableSubmorphs.includes(gb)?gb:ua.world.morphsContainingPoint(ua.hand.position).find(function(Oc){return ra.layoutableSubmorphs.includes(Oc)}))V.updateSubmorphProportionalLayoutSettings({policy:ja.x,axis:"x",submorph:hc}),V.updateSubmorphProportionalLayoutSettings({policy:ja.y,
axis:"y",submorph:hc}),hc.show(),$world.setStatusMessage("layout settings applied")};ua.hand.grab(cb);cb.moveBy(gd.pt(10,10))}},{key:"chooseSubmorphToChangeLayoutSettings",value:function(){var ua=this,V,ra,ja,Ca,va,cb,hc,gb,Oc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Cb){switch(Cb.nextAddress){case 1:return V=ua.target.layout.layoutableSubmorphs,ua.manageFocus=!0,ua.env.eventDispatcher.isKeyPressed("Shift")?(ja=V.map(function(Gd){return{isListItem:!0,string:String(Gd),value:Gd}}),
Cb.yield($world.listPrompt("Select morph",ja,{onSelection:function(Gd){return Gd.show()}}),5)):Cb.yield(gd.InteractiveMorphSelector.selectMorph(ua.world(),ua,function(Gd){return V.includes(Gd)}),4);case 4:ra=Cb.yieldResult;Cb.jumpTo(3);break;case 5:Ca=Cb.yieldResult,va=$jscomp.makeIterator(Ca.selected),ra=va.next().value;case 3:ua.manageFocus=!1;ua.selectedSubmorph=ra;if(!ra)return Cb.return();cb=ua.ui;hc=cb.xAxisPolicyControl;gb=cb.yAxisPolicyControl;Oc=ua.target.layout.settingsFor(ra);gd.noUpdate(function(){hc.selection=
Oc.x;gb.selection=Oc.y});Cb.jumpToEnd()}})}},{key:"showProportionalControl",value:function(ua){var V=this.ui;[V.submorphSettingsControl,V.dragmeControl,V.xAxisPolicyControl,V.xAxisPolicyLabel,V.yAxisPolicyControl,V.yAxisPolicyLabel].forEach(function(ra){ra.isLayoutable=ua;ra.visible=ua})}},{key:"showGridLayoutHalo",value:function(){$world.showLayoutHaloFor(this.target)}},{key:"showGridLayoutControl",value:function(ua){var V=this.ui.configureGridLayoutControl;V.visible=V.isLayoutable=ua}}],[{key:Symbol.for("__LivelyClassName__"),
get:function(){return"ShapeLayoutControl"}},{key:"properties",get:function(){return{managedProps:{get:function(){return[["type","selection",!0],["align","selection"],["direction","selection"],["axis","selection"],["spacing","number"],["auto resize","checked"],["resize submorphs","checked"],["x axis policy","selection",!0],["y axis policy","selection",!0],["react to submorph animations","checked"],["submorph settings",!1,!0],["order by index","checked"],["dragme",!1,!0],["configure grid layout",!1,
!0]]}},ui:{readOnly:!0,get:function(){for(var ua={labelContainer:this.getSubmorphNamed("label container"),controlContainer:this.getSubmorphNamed("control container")},V=$jscomp.makeIterator(this.managedProps),ra=V.next();!ra.done;ra=V.next()){var ja=$jscomp.makeIterator(ra.value).next().value;ra=ja+" label";ja+=" control";ua[this.join(ra)]=this.getSubmorphNamed(ra);ua[this.join(ja)]=this.getSubmorphNamed(ja)}return ua}}}}}],sb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ShapeLayoutControl",version:"0.1.1-166"}}},{start:345,end:7771})}(gd.Morph);Ib=gd.ShapeLayoutControl;gd.default=Ib;var Nb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js");Nb.Morph=Nc;Nb.resource=kd;Nb.arr=Kb;Nb.obj=Ab;Nb.string=wb;Nb.Path=vb;Nb.connect=Mc;Nb.getMastersMenu=db;Nb.resolvedMasters=ec;Ib=function(Fb){var sb=lively.FreezerRuntime.recorderFor("MasterComponentControl/index.js"),
Ea=sb.hasOwnProperty("MasterComponentControl")&&"function"===typeof sb.MasterComponentControl?sb.MasterComponentControl:sb.MasterComponentControl=function(ua){ua&&ua[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return wd(Ea,Fb,[{key:"focusOn",value:function(ua){this.target=ua;this.update()}},{key:"onMouseUp",value:function(ua){var V=this,ra,ja,Ca,va,cb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==gb.nextAddress){"auto master selection"==
ua.targetMorph.name&&(ra="auto");"hover master selection"==ua.targetMorph.name&&(ra="hover");"click master selection"==ua.targetMorph.name&&(ra="click");V.refreshButtons();if(!V.target)return gb.return();ja=$jscomp.makeIterator(["auto","hover","click"]);for(Ca=ja.next();!Ca.done;Ca=ja.next())va=Ca.value,V.target.master&&V.target.master[va]&&!V.get(va+" master checkbox").checked&&V.adjustMasterComponent(va,null);if(!ra)return gb.jumpTo(0);cb=V;hc=cb.openMenu;return gb.yield(V.getMastersMenu(ra),3)}hc.call(cb,
gb.yieldResult,ua);gb.jumpToEnd()})}},{key:"getMastersMenu",value:function(ua){var V=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ra){return 1==ra.nextAddress?ra.yield(Promise.all([].concat($jscomp.arrayFromIterable(Object.keys(Nb.resolvedMasters)),[V.world().name]).map(function(ja){var Ca,va,cb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){return 1==gb.nextAddress?(va=(Ca=ja==V.world().name)?"This World":ja,cb=V,hc=cb.componentsToMenu,gb.yield(Nb.resource("styleguide://"+
ja+"/").dirList(),2)):gb.return([va,hc.call(cb,gb.yieldResult,ua)])})})),2):ra.return(ra.yieldResult)})}},{key:"componentsToMenu",value:function(ua,V,ra,ja){var Ca=this;ra=void 0===ra?null:ra;ja=void 0===ja?1:ja;ra||(ra=ua.map(function(cb){return{name:Nb.arr.last(cb.name.split("/")),path:cb.name.split("/"),value:cb}}));if(0==ra.length||100<ja)return[];var va=this;return Nb.arr.flatten(Object.entries(Nb.arr.groupBy(ra,function(cb){return cb.path[ja-1]})).map(function(cb){var hc=$jscomp.makeIterator(cb);
cb=hc.next().value;hc=hc.next().value;var gb=$jscomp.makeIterator(Nb.arr.partition(hc,function(Oc){return Oc.path.length<=ja}));hc=gb.next().value;gb=gb.next().value;cb=[cb,Ca.componentsToMenu(null,V,gb,ja+1)];return[].concat($jscomp.arrayFromIterable(hc.map(function(Oc){return[Oc.name,function(){va.adjustMasterComponent(V,Oc.value)}]})),$jscomp.arrayFromIterable(cb[1].length?[cb]:[]))}),1)}},{key:"getComponentSelectionMenu",value:function(ua){var V=this,ra,ja,Ca,va,cb,hc;return $jscomp.asyncExecutePromiseGeneratorProgram(function(gb){if(1==
gb.nextAddress)return ra=V.world().metadata.commit.name,ja=Nb.resource("styleguide://"+ra+"/"),gb.yield(ja.dirList(),2);if(3!=gb.nextAddress)return Ca=gb.yieldResult,gb.yield(Nb.resource("styleguide://System/").dirList(),3);va=gb.yieldResult;cb=V.componentsToMenu(Ca,ua);hc=V.componentsToMenu(va,ua);return gb.return([].concat($jscomp.arrayFromIterable(0<cb.length?[].concat($jscomp.arrayFromIterable(cb),[{isDivider:!0}]):[]),$jscomp.arrayFromIterable(hc)))})}},{key:"adjustMasterComponent",value:function(ua,
V){if(this.target.master)this.target.master[ua]=V;else if(V){var ra={};this.target.master=(ra[ua]=V,ra)}ua=this.target.master;V=ua.hover;ra=ua.click;ua.auto||V||ra||(this.target.master=null);this.update();this.target.withAllSubmorphsDo(function(ja){return delete ja._parametrizedProps});this.target.requestMasterStyling()}},{key:"componentsToMenu",value:function(ua,V,ra,ja){var Ca=this;ra=void 0===ra?null:ra;ja=void 0===ja?1:ja;ra||(ra=ua.map(function(cb){return{name:Nb.arr.last(cb.name.split("/")),
path:cb.name.split("/"),value:cb}}));if(0==ra.length||100<ja)return[];var va=this;return Nb.arr.flatten(Object.entries(Nb.arr.groupBy(ra,function(cb){return cb.path[ja-1]})).map(function(cb){var hc=$jscomp.makeIterator(cb);cb=hc.next().value;hc=hc.next().value;var gb=$jscomp.makeIterator(Nb.arr.partition(hc,function(Oc){return Oc.path.length<=ja}));hc=gb.next().value;gb=gb.next().value;cb=[cb,Ca.componentsToMenu(null,V,gb,ja+1)];return[].concat($jscomp.arrayFromIterable(hc.map(function(Oc){return[Oc.name,
function(){va.adjustMasterComponent(V,Oc.value)}]})),$jscomp.arrayFromIterable(cb[1].length?[cb]:[]))}),1)}},{key:"update",value:function(){if(this.target){for(var ua=$jscomp.makeIterator(["auto","hover","click"]),V=ua.next();!V.done;V=ua.next()){V=V.value;var ra=this.getSubmorphNamed(V+" master selection"),ja=this.getSubmorphNamed(V+" master checkbox");Nb.Path(["master",V]).get(this.target)?ja.checked=!0:ja.checked=!1;ra.label=Nb.string.truncateLeft(Nb.Path(["master",V,"name"]).get(this.target)||
"select master",15,"...")}this.refreshButtons()}}},{key:"refreshButtons",value:function(){for(var ua=$jscomp.makeIterator(["auto","hover","click"]),V=ua.next();!V.done;V=ua.next()){V=V.value;var ra=this.getSubmorphNamed(V+" master selection"),ja=this.getSubmorphNamed(V+" master checkbox");ra=ra.deactivated=!ja.checked;this.getSubmorphNamed(V+" master selection").opacity=ra?.5:1}ua=this.getSubmorphNamed("overridden props list");ua.items=this.getOverriddenProps();this.getSubmorphNamed("clear overridden prop button").deactivated=
!ua.selection}},{key:"getMasterForTarget",value:function(){if(this.target.isMorph)return[this.target].concat($jscomp.arrayFromIterable(this.target.ownerChain())).map(function(ua){return ua.master}).find(Boolean)}},{key:"clearSelectedProperty",value:function(){var ua=this.getSubmorphNamed("overridden props list").selection;this.getMasterForTarget().clearOverriddenPropertiesFor(this.target,[ua]);this.refreshButtons()}},{key:"getOverriddenProps",value:function(){var ua=this.getMasterForTarget();return ua&&
ua._overriddenProps?(ua=ua._overriddenProps.get(this.target))?Object.keys(ua):[]:[]}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"MasterComponentControl"}}],sb,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"MasterComponentControl",version:"0.1.1-110"}}},{start:315,end:6250})}(Nb.Morph);Ib=Nb.MasterComponentControl;
Nb.default=Ib}}});