System.register(["./__rootModule___commonjs-entry-71573ff5.js","./loading-indicator.cp-b18e3b89.js","./tooltips.cp-6a2406c0.js"],function(Lc){var pd,Nd,Tc,Jc,$d,Bb,rd,Id,Ac,Pc,gd,nd,Fd,ic,vd,sb,Xb,Nb,bc,hb,cb,Hb,ec,ub,yb,ba,wb,Xa,Za,Sb,Cb,Da,zb,db,ib,Ea,W,T,ia,ka,K,ya,pb,La,eb,jb,E,Wb,R,xb,Ja,Ga,sa,Ub,vc,Oc;return{setters:[function(aa){pd=aa.M;Nd=aa.V;Tc=aa.b;Jc=aa.C;$d=aa.h;Bb=aa.j;rd=aa.k;Id=aa.l;Ac=aa.i;Pc=aa.m;gd=aa.o;nd=aa.I;Fd=aa.S;ic=aa.L;vd=aa.H;sb=aa.c;Xb=aa.r;Nb=aa.q;bc=aa.t;hb=aa.p;cb=
aa.R;Hb=aa.u;ec=aa.v;ub=aa.w;yb=aa.x;ba=aa.y;wb=aa.z;Xa=aa._;Za=aa.A;Sb=aa.B;Cb=aa.d;Da=aa.f;zb=aa.D;db=aa.F;ib=aa.G;Ea=aa.J;W=aa.K;T=aa.e;ia=aa.T;ka=aa.N;K=aa.E;ya=aa.O;pb=aa.Q;La=aa.n;eb=aa.U;jb=aa.X;E=aa.P;Wb=aa.Y;R=aa.Z},function(aa){xb=aa.B;Ja=aa.a;Ga=aa.R;sa=aa.b;Ub=aa._;vc=aa.L},function(aa){Oc=aa.SystemTooltip}],execute:function(){function aa(wa){if(wa&&wa.isListItem&&"string"===typeof wa.string)return wa;if(!wa||!wa.isListItem)return{isListItem:!0,string:String(wa),value:wa};var ca=wa.string||
wa.label||"no item.string";wa.string=ca&&"string"!==typeof ca?Array.isArray(ca)?ca.map(function(ma,u){return 0===u%2?String(ma):""}).join(""):String(ca):String(ca);return wa}var Ma=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.js");Ma.Morph=pd;Ma.ViewModel=Nd;Ma.pt=Tc;Ma.Color=Jc;Ma.signal=$d;Ma.arr=Bb;Ma.string=rd;Ma.PropertyPath=Id;var qb=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.js"),ma=ca.hasOwnProperty("LabeledCheckBoxModel")&&
"function"===typeof ca.LabeledCheckBoxModel?ca.LabeledCheckBoxModel:ca.LabeledCheckBoxModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"onRefresh",value:function(){var u=this;this.view&&this.view.withMetaDo({metaInteraction:!0},function(){u.labelMorph.value=u.label;u.checkboxMorph.checked=u.checked})}},{key:"onTrigger",value:function(u){this.setProperty("checked",u);Ma.signal(this,
"checked",u)}},{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onClick",value:function(u){this.active&&this.trigger();u.stop()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LabeledCheckBoxModel"}},{key:"properties",get:function(){return{alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"]},
label:{defaultValue:"a label"},checked:{type:"Boolean"},active:{type:"Boolean",defaultValue:!0},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.ui.label}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.ui.checkbox}},expose:{get:function(){return["checked","active","label"]}},bindings:{get:function(){return[{signal:"onMouseDown",handler:"onClick"},{target:"checkbox",signal:"checked",handler:"onTrigger"}]}}}}}],ca,{pathInPackage:function(){return"./inputs.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:236,end:1908})}(Ma.ViewModel);Ma.LabeledCheckBoxModel=qb;Ma.LabeledCheckBoxModel=qb;var Vb=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.js"),ma=ca.hasOwnProperty("SearchFieldModel")&&"function"===typeof ca.SearchFieldModel?ca.SearchFieldModel:ca.SearchFieldModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:"parseInput",value:function(){var u=Array.from(this.input).reduce(function(P,fa){if("\\"===fa&&!P.escaped)return P.escaped=!0,P;" "!==fa||P.escaped?(P.spaceSeen=!1,P.current+=fa):(!P.spaceSeen&&P.current&&(P.tokens.push(P.current),P.current=""),P.spaceSeen=!0);P.escaped=!1;return P},{tokens:[],current:"",escaped:!1,spaceSeen:!1});u.current&&u.tokens.push(u.current);var O=u.tokens.map(function(P){return P.toLowerCase()});return{tokens:u.tokens,lowercasedTokens:O}}},
{key:"clearInput",value:function(){this.input="";Ma.signal(this,"searchInput",this.parseInput());this.onBlur()}},{key:"matches",value:function(u){return this.input?this.filterFunction.call(this,this.parseInput(),{string:u}):!0}},{key:"onInputChange",value:function(u){u="replace"===u.selector;this.view.isFocused()&&this.input;this.ui.placeholderIcon&&(this.ui.placeholderIcon.visible=!!this.input);this.input.includes("\n")&&(this.input=this.input.replace("\n",""),this.owner.focus());this.active&&u&&
Ma.signal(this,"searchInput",this.parseInput())}},{key:"onInputBlur",value:function(u){this.active=!1;this.ui.placeholder.visible=!this.input}},{key:"onInputFocus",value:function(u){this.ui.placeholder.visible=!1;this.active=!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SearchFieldModel"}},{key:"properties",get:function(){return{input:{derived:!0,set:function(u){this.view.textString=u},get:function(){return this.view.textString}},fuzzy:{after:["filterFunction","sortFunction"],
set:function(u){this.setProperty("fuzzy",u);u?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction==this.defaultFilterFunction&&(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var u=this.getProperty("filterFunction");if(!u)return this.defaultFilterFunction;"string"===typeof u&&
(u=eval("(".concat(u,")")));return u}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=function(u,O){return u.lowercasedTokens.every(function(P){return O.string.toLowerCase().includes(P)})})}},fuzzySortFunction:{readOnly:!0,get:function(){var u=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(O,P){var fa=String(Ma.PropertyPath("string"===typeof u.fuzzy?u.fuzzy:"string").get(P)).toLowerCase(),Qa=
0;O.lowercasedTokens.forEach(function(Ua){fa.startsWith(Ua)?Qa-=10:fa.includes(Ua)&&(Qa-=5)});return Ma.arr.sum(O.lowercasedTokens.map(function(Ua){return Ma.string.levenshtein(fa.toLowerCase(),Ua)}))+Qa})}},fuzzyFilterFunction:{get:function(){var u=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(O,P){var fa="string"===typeof u.fuzzy?u.fuzzy:"string";if(O.lowercasedTokens.every(function(Ua){return P.string.toLowerCase().includes(Ua)}))return!0;var Qa=String(Ma.PropertyPath(fa).get(P)).toLowerCase();
return 3>=Ma.arr.sum(O.lowercasedTokens.map(function(Ua){return Ma.string.levenshtein(Qa,Ua)}))})}},placeHolder:{defaultValue:"Search"},expose:{get:function(){return["matches"]}},bindings:{get:function(){return[{target:"placeholder icon",signal:"onMouseDown",handler:"clearInput"},{signal:"onChange",handler:"onInputChange"},{signal:"onBlur",handler:"onInputBlur"},{signal:"onFocus",handler:"onInputFocus"}]}}}}}],ca,{pathInPackage:function(){return"./inputs.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:1916,end:7491})}(Ma.ViewModel);Ma.SearchFieldModel=Vb;Ma.SearchFieldModel=Vb;var Lb=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.js"),ma=ca.hasOwnProperty("CheckBoxMorph")&&"function"===typeof ca.CheckBoxMorph?ca.CheckBoxMorph:ca.CheckBoxMorph=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:"trigger",value:function(){try{this.checked=!this.checked,Ma.signal(this,"toggle",this.checked)}catch(O){var u=this.world();u?u.logError(O):console.error(O)}}},{key:"onMouseDown",value:function(u){this.active&&this.trigger()}},{key:"render",value:function(u){return u.renderCheckBox(this)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CheckBoxMorph"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:Ma.pt(15,
15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:Ma.Color.transparent},nativeCursor:{defaultValue:"pointer"}}}}],ca,{pathInPackage:function(){return"./inputs.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:7569,end:8408})}(Ma.Morph);Ma.CheckBoxMorph=Lb;Ma.CheckBoxMorph=
Lb;var Kb=window.lively.FreezerRuntime.recorderFor("lively.components/inputs.cp.js");Kb.Text=Pc;Kb.InputLine=gd;Kb.Icon=nd;Kb.ShadowObject=Fd;Kb.Label=ic;Kb.HorizontalLayout=vd;Kb.component=sb;Kb.pt=Tc;Kb.rect=Xb;Kb.Color=Jc;Kb.LabeledCheckBoxModel=qb;Kb.CheckBoxMorph=Lb;Kb.SearchFieldModel=Vb;Kb.InputLineDefault=Kb.component["for"](function(){return Kb.component({type:Kb.InputLine,name:"input line light",highlightWhenFocused:!0,borderColor:Kb.Color.rgb(204,204,204),borderRadius:4,dropShadow:new Kb.ShadowObject({distance:3,
rotation:75,color:Kb.Color.rgba(0,0,0,.2)}),haloShadow:new Kb.ShadowObject({distance:4,color:Kb.Color.rgba(0,0,0,.26),blur:10}),extent:Kb.pt(318.1,34.3),fontFamily:"IBM Plex Sans",fontSize:20,padding:Kb.rect(10,3,0,0),placeholder:"Name",submorphs:[{type:Kb.Label,name:"placeholder",fontColor:Kb.Color.rgb(204,204,204),fontFamily:"IBM Plex Sans",fontSize:20,padding:Kb.rect(10,3,0,0),reactsToPointer:!1,textAndAttributes:["Name",null]}]})},{module:"lively.components/inputs.cp.js","export":"InputLineDefault",
range:{start:283,end:1050}},Kb.InputLineDefault);Kb.InputLineDark=Kb.component["for"](function(){return Kb.component(Kb.InputLineDefault,{name:"input line dark",fill:Kb.Color.rgb(229,231,233)})},{module:"lively.components/inputs.cp.js","export":"InputLineDark",range:{start:1090,end:1198}},Kb.InputLineDark);Kb.LabeledCheckBox=Kb.component["for"](function(){return Kb.component({defaultViewModel:Kb.LabeledCheckBoxModel,name:"labeled check box",extent:Kb.pt(66,21),fill:Kb.Color.rgba(0,0,0,0),layout:new Kb.HorizontalLayout({align:"top",
autoResize:!0,direction:"leftToRight",resizeSubmorphs:!1}),submorphs:[{type:Kb.CheckBoxMorph,name:"checkbox"},{type:Kb.Label,name:"label",extent:Kb.pt(51,21),nativeCursor:"pointer",padding:Kb.rect(10,3,-5,0),value:"a label"}]})},{module:"lively.components/inputs.cp.js","export":"LabeledCheckBox",range:{start:1206,end:1716}},Kb.LabeledCheckBox);Kb.SearchField=Kb.component["for"](function(){return Kb.component({defaultViewModel:Kb.SearchFieldModel,type:Kb.Text,name:"search field",fontFamily:"IBM Plex Sans",
styleClasses:["idle"],borderRadius:15,borderWidth:1,clipMode:"hidden",dropShadow:new Kb.ShadowObject({distance:0,color:Kb.Color.rgb(52,152,219),blur:0}),extent:Kb.pt(188,21),fixedHeight:!0,fontColor:Kb.Color.rgb(204,204,204),layout:new Kb.HorizontalLayout({align:"top",autoResize:!1,direction:"rightToLeft",orderByIndex:!0,reactToSubmorphAnimations:!1,resizeSubmorphs:!1}),padding:Kb.rect(6,3,0,0),submorphs:[{type:Kb.Label,name:"placeholder",visible:!0,isLayoutable:!1,opacity:.3,padding:Kb.rect(6,4,
0,0),reactsToPointer:!1,textAndAttributes:["Search",null]},{type:Kb.Label,name:"placeholder icon",autofit:!1,fontColor:Kb.Color.rgb(204,204,204),fontSize:14,nativeCursor:"pointer",padding:Kb.rect(2,4,3,0),textAndAttributes:Kb.Icon.textAttribute("times-circle"),visible:!1}]})},{module:"lively.components/inputs.cp.js","export":"SearchField",range:{start:1760,end:2891}},Kb.SearchField);qb=Lc("c",Kb.LabeledCheckBox);Vb=Lc("S",Kb.SearchField);var Db=Lc("I",Kb.InputLineDefault);Lb=Lc("g",Kb.InputLineDark);
Kb.LabeledCheckBox=qb;Kb.SearchField=Vb;Kb.InputLineDefault=Db;Kb.InputLineDark=Lb;var Ra=window.lively.FreezerRuntime.recorderFor("lively.components/list.js");Ra.asItem=aa;Ra.Morph=pd;Ra.Text=Pc;Ra.Label=ic;Ra.Icon=nd;Ra.morph=Nb;Ra.touchInputDevice=bc;Ra.part=hb;Ra.pt=Tc;Ra.Color=Jc;Ra.Rectangle=cb;Ra.arr=Bb;Ra.Path=Id;Ra.string=rd;Ra.signal=$d;Ra.noUpdate=Hb;Ra.once=ec;Ra.connect=ub;Ra.Button=xb;Ra.ButtonModel=Ja;Ra.asItem=aa;Lb=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),
ma=ca.hasOwnProperty("ListItemMorph")&&"function"===typeof ca.ListItemMorph?ca.ListItemMorph:ca.ListItemMorph=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"displayItem",value:function(u,O,P,fa,Qa){var Ua=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1,Gb=6<arguments.length?arguments[6]:void 0;if(this.itemIndex!==O||Ua!==this.isSelected||u.fontFamily!==this.fontFamily){var ta=
u.morph,mc=ta?"":u.label||u.string||"no item.string";u.annotation?this.valueAndAnnotation={value:mc,annotation:u.annotation}:"string"===typeof mc?this.textString=mc:this.value=mc;this.tooltip=u.tooltip||this.tooltip||this.textString;!1===u.tooltip&&(this.tooltip=!1);this.itemIndex=O;this.position=Qa;if(Gb){mc=Gb.fontFamily;var pc=Gb.selectionColor,zd=Gb.selectionFontColor,Pd=Gb.nonSelectionFontColor,bd=Gb.borderRadius,Yd=Gb.fontSize;Gb=Gb.padding;zd&&this.selectionFontColor!==zd&&(this.selectionFontColor=
zd);Pd&&this.nonSelectionFontColor!==Pd&&(this.nonSelectionFontColor=Pd);pc&&this.selectionColor!==pc&&(this.selectionColor=pc);bd&&bd!==this.borderRadius&&(this.borderRadius=bd);Yd&&this.fontSize!==Yd&&(this.fontSize=Yd);mc&&this.fontFamily!==mc&&(this.fontFamily=mc);Gb&&!this.padding.equals(Gb)&&(this.padding=Gb)}u.autoFit&&(ta.width=P);this.extent=Ra.pt(ta?Math.max(ta.width,P):P,fa);ta?(Gb=ta.getTransform().copy(),this.submorphs=[ta],ta.setTransform(Gb),ta.position=Ra.pt(0,0)):this.submorphs.length&&
(this.submorphs=[]);this.isSelected=Ua}}},{key:"onDragStart",value:function(u){var O=this.list;this._dragState={sourceIsSelected:this.isSelected,source:this,itemsTouched:[]};if(!O.multiSelect||!O.multiSelectViaDrag)O.onItemMorphDragged(u,this)}},{key:"onMouseDown",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onMouseDown",this).call(this,u);this.list.clickOnItem(u)}},{key:"onDrag",value:function(u){var O=this.list;if(O.multiSelect&&O.multiSelectViaDrag){u=u.hand.morphBeneath(u.position);
var P=O.selectedIndexes,fa=O.itemMorphs;u!==this&&fa.includes(u)&&(this._dragState.sourceIsSelected&&!u.isSelected?(Ra.arr.pushIfNotIncluded(P,u.itemIndex),O.selectedIndexes=P):!this._dragState.sourceIsSelected&&u.isSelected&&(Ra.arr.remove(P,u.itemIndex),O.selectedIndexes=P))}}},{key:"isListItemMorph",get:function(){return!0}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ListItemMorph"}},{key:"properties",get:function(){return{clipMode:{defaultValue:"hidden"},autofit:{defaultValue:!1},
isSelected:{defaultValue:!1},draggable:{defaultValue:!Ra.touchInputDevice},fill:{derived:!0,get:function(){return Ra.touchInputDevice&&this.pressed?Ra.Color.gray.withA(.5):this.isSelected?this.selectionColor:Ra.Color.transparent}},itemIndex:{defaultValue:void 0},selectionFontColor:{isStyleProp:!0,defaultValue:Ra.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Ra.Color.blue},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Ra.Color.rgbHex("333")},fontColor:{derived:!0,
get:function(){return this.isSelected?this.selectionFontColor:this.nonSelectionFontColor}},list:{drived:!0,get:function(){return this.owner.owner}}}}}],ca,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:881,end:5656})}(Ra.Label);Ra.ListItemMorph=Lb;Ra.ListItemMorph=Lb;var N=function(wa){var ca=
window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),ma=ca.hasOwnProperty("ListScroller")&&"function"===typeof ca.ListScroller?ca.ListScroller:ca.ListScroller=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"onScroll",value:function(u){return this.owner.update()}},{key:"onMouseDown",value:function(u){var O=this,P=this.scroll.y;if(Ra.touchInputDevice){var fa=this.owner.itemForClick(u);
fa&&(fa.pressed=!0,fa.makeDirty(),setTimeout(function(){fa.pressed=!1;if(0===P-O.scroll.y)return O.owner.clickOnItem(u)},300))}else return this.owner.clickOnItem(u)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ListScroller"}},{key:"properties",get:function(){return{name:{defaultValue:"scroller"},fill:{defaultValue:Ra.Color.transparent},clipMode:{defaultValue:"auto"},scrollbar:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.submorphs[0]}},submorphs:{initialize:function(){this.submorphs=
[{name:"scrollbar",fill:Ra.Color.transparent}]}}}}}],ca,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:5664,end:6765})}(Ra.Morph);Ra.ListScroller=N;Ra.ListScroller=N;Ra.listCommands=[{name:"page up",exec:function(wa){return wa.gotoIndex(Math.max(0,wa.selectedIndex-Math.round(wa.height/
wa.itemHeight)))}},{name:"page down",exec:function(wa){return wa.gotoIndex(Math.min(wa.items.length-1,wa.selectedIndex+Math.round(wa.height/wa.itemHeight)))}},{name:"goto first item",exec:function(wa){return wa.gotoIndex(0)}},{name:"goto last item",exec:function(wa){return wa.gotoIndex(wa.items.length-1)}},{name:"arrow up",exec:function(wa){return wa.gotoIndex(wa.indexUp())}},{name:"arrow down",exec:function(wa){return wa.gotoIndex(wa.indexDown())}},{name:"select up",exec:function(wa){var ca=wa.selectedIndexes;
if(!wa.multiSelect||!ca.length)return wa.execCommand("arrow up");var ma=ca[0];if("number"!==typeof ma)wa.selectedIndexes=[ma];else{var u=wa.indexUp(ma);ca.includes(ma)&&ca.includes(u)?wa.selectedIndexes=ca.filter(function(O){return O!==ma}):wa.selectedIndexes=[u].concat(ca.filter(function(O){return O!==u}))}return!0}},{name:"select down",exec:function(wa){var ca=wa.selectedIndexes;if(!wa.multiSelect||!ca.length)return wa.execCommand("arrow down");var ma=ca[0],u=wa.indexDown(ma);ca.includes(ma)&&ca.includes(u)?
wa.selectedIndexes=ca.filter(function(O){return O!==ma}):wa.selectedIndexes=[u].concat(ca.filter(function(O){return O!==u}));return!0}},{name:"select all",exec:function(wa){wa.selectedIndexes=Ra.arr.range(wa.items.length-1,0);wa.scrollIndexIntoView(wa.selectedIndexes[0]);return!0}},{name:"select via filter",exec:function(){var wa=Xa(regeneratorRuntime.mark(function u(ma){var O,P,fa;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return O=ma.selectedIndex||0,Qa.next=
3,ma.world().filterableListPrompt("Select item",ma.items,{preselect:O,requester:ma.getWindow()||ma,itemPadding:Ra.Rectangle.inset(0,2),multiSelect:!0});case 3:return P=Qa.sent,fa=P.selected,fa.length&&(ma.multiSelect?ma.selections=fa:ma.selection=fa[0],ma.scrollSelectionIntoView(),ma.update()),Qa.abrupt("return",!0);case 7:case "end":return Qa.stop()}},u)}));return function(ma){return wa.apply(this,arguments)}}()},{name:"realign top-bottom-center",exec:function(wa){if(wa.selection){var ca=wa.padding,
ma=wa.itemHeight,u=wa.scroll,O=u.x;u=u.y;var P=Ra.pt(0,wa.selectedIndex*ma);ca=wa.height-ma-ca.top()-ca.bottom();u=2>Math.abs(P.y-u)?P.y-ca:2>Math.abs(P.y-u-.5*ca)?P.y:P.y-.5*ca;wa.scroll=Ra.pt(O,u);return!0}}},{name:"print contents in text window",exec:function(wa){var ca="items of "+wa.name,ma=wa.items.map(function(u){if("string"===typeof u)return u;var O=u.string,P=u.label;u=u.annotation;var fa="";P?fa="string"===typeof P?fa+P:fa+P.map(function(Qa,Ua){return 0===Ua%2?Qa:""}).join(""):O&&(fa+=O);
u&&(fa+=" ",fa="string"===typeof u?fa+u:fa+u[0]);return fa}).join("\n");return wa.world().execCommand("open text window",{title:ca,content:ma,name:ca,fontFamily:"Monaco, monospace"})}}];qb=Lc("L",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),ma=ca.hasOwnProperty("List")&&"function"===typeof ca.List?ca.List:ca.List=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};
return Ac(ma,wa,[{key:"__additionally_serialize__",value:function(u,O,P,fa){var Qa=this;Ac._get(Object.getPrototypeOf(ma.prototype),"__additionally_serialize__",this).call(this,u,O,P,fa);this.whenRendered().then(function(){return Qa.update()})}},{key:"onLoad",value:function(){this.scroller.visible=Ra.touchInputDevice}},{key:"initializeSubmorphs",value:function(u){this.submorphs=u=u||this.submorphs||[];for(var O=0;O<u.length;O++)switch(u[O].name){case "listItemContainer":var P=u[O];continue;case "scroller":var fa=
u[O]}fa||(fa=this.addMorph(new Ra.ListScroller({draggable:!1,grabbable:!1,acceptsDrops:!1,halosEnabled:!1,name:"scroller"})));P||this.addMorph({name:"listItemContainer",fill:Ra.Color.transparent,halosEnabled:!1,reactsToPointer:!1,acceptsDrops:!1,draggable:!1});(P||fa)&&this.update()}},{key:"isList",get:function(){return!0}},{key:"onChange",value:function(u){"fontFamily fontColor fontSize padding selectionFontColor selectionColor nonSelectionFontColor itemPadding items".split(" ").includes(u.prop)&&
this.update();return Ac._get(Object.getPrototypeOf(ma.prototype),"onChange",this).call(this,u)}},{key:"itemForClick",value:function(u){u=u.positionIn(this.world()).subPt(this.scroll);u=this.listItemContainer.morphsContainingPoint(u);return u.find(function(O){return O.isListItem})||u[0]}},{key:"clickOnItem",value:function(u){var O=this.itemForClick(u);if(O){var P=u.state.clickCount;if(!(u.positionIn(this).x>this.width-this.scrollbarOffset.x))this[2===P?"onItemMorphDoubleClicked":"onItemMorphClicked"](u,
O)}}},{key:"connections",get:function(){return{selection:{signalOnAssignment:!1}}}},{key:"invalidateCache",value:function(){this.manualItemHeight||this.setProperty("itemHeight",null)}},{key:"find",value:function(u){return this.items.find(function(O){return O===u||O.value===u})}},{key:"findIndex",value:function(u){return this.items.findIndex(function(O){return O===u||O.value===u})}},{key:"addItem",value:function(u){return this.addItemAt(u)}},{key:"addItemAt",value:function(u){var O=this,P=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:this.items.length,fa=this.items;P=Math.min(fa.length,Math.max(0,P));fa.splice(P,0,Ra.asItem(u));this.addMethodCallChangeDoing({target:this,selector:"addItemAt",args:[u,P],undo:{target:this,selector:"removeItem",args:[u]}},function(){return O.update()})}},{key:"removeItem",value:function(u){var O=this;u=this.find(u);var P=this.items,fa=P.indexOf(u);-1!==fa&&(P.splice(fa,1),this.addMethodCallChangeDoing({target:this,selector:"removeItem",args:[u],undo:{target:this,
selector:"addItemAt",args:[u,fa]}},function(){return O.update()}))}},{key:"selectItemMorph",value:function(u){this.selectedIndexes=[u.itemIndex]}},{key:"gotoIndex",value:function(u){if(this.arrowNavigationProhibited)return!1;this.scrollIndexIntoView(this.selectedIndex=u);return!0}},{key:"indexUp",value:function(u){u="number"===typeof u?u:this.selectedIndex;return(u||this.items.length)-1}},{key:"indexDown",value:function(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selectedIndex;
return(("number"===typeof u?u:-1)+1)%this.items.length}},{key:"update",value:function(){var u=this,O=this.items;O&&this.scroller&&this.dontRecordChangesWhile(function(){var P=u.itemHeight,fa=u.itemMorphs,Qa=u.listItemContainer,Ua=u.selectedIndexes,Gb=u.extent,ta=Gb.x,mc=Gb.y,pc=u.fontSize,zd=u.fontFamily,Pd=u.fontColor;Gb=u.padding;var bd=void 0===Gb?cb.inset(0):Gb,Yd=u.itemPadding,le=u.selectionColor,Be=u.selectionFontColor,Ne=u.nonSelectionFontColor,Re=u.itemBorderRadius;Gb=u.scrollBar;var nf=u.scroller,
af=u.scrollable,yf=nf.scroll.y,Ig=bd.top(),re=bd.left(),Ld=bd.bottom();bd=bd.right();var fc=Math.max(0,Math.floor(yf/P)),wd=Math.min(O.length,fc+mc/P+2),Ie=0,ff=ta-(re+bd);fa=Ra.arr.sortBy(fa,function(Pe){return Pe.itemIndex});ta=Ra.arr.partition(fa,function(Pe){return Pe.itemIndex<fc});mc=yb(ta,2);ta=mc[0];bd=mc[1];mc=Ra.arr.partition(bd,function(Pe){return Pe.itemIndex>wd-1});bd=yb(mc,2);mc=bd[0];bd=bd[1];fa=[].concat(ba(mc),ba(bd),ba(ta));ta=function(Pe){var Gf=fc+Pe,Vf=O[Gf];if(!Vf)return fa.slice(Pe).forEach(function(Ba){Ba.remove()}),
"break";var cd={fontSize:pc,fontFamily:zd,fontColor:Ne||Pd,padding:Yd,borderRadius:Re||0,selectionFontColor:Be,nonSelectionFontColor:Ne,selectionColor:le},Y=fa[Pe];Y||u.withMetaDo({skipReconciliation:!0},function(){Y=fa[Pe]=Qa.addMorph(new Ra.ListItemMorph(cd))});Y.reactsToPointer=!af;Y.displayItem(Vf,Gf,ff,P,Ra.pt(0,P*Gf),Ua.includes(Gf),cd);Ie=Math.max(Ie,Y.width)};for(mc=0;mc<wd-fc&&"break"!==ta(mc);mc++);fa.slice(wd-fc).forEach(function(Pe){return Pe.remove()});Ld=Math.max(Ig+Ld+P*O.length,u.height);
Qa.setBounds(Ra.pt(re,Ig).subXY(0,yf).extent(Ra.pt(u.width,Ld)));nf.extent=u.extent.subXY(u.borderWidthRight,u.borderWidthBottom);Gb.left=Ie/2;nf.position=Ra.pt(0,0);Gb.extent=Ra.pt(1,Ld)})}},{key:"scrollSelectionIntoView",value:function(){this.selection&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(u){var O=this.itemHeight,P=this.itemScroll;u=new Ra.Rectangle(0,u*O,this.width,O);O=this.innerBounds().insetByRect(this.padding).translatedBy(P);var fa=0;u.bottom()>
O.bottom()&&(fa=u.bottom()-O.bottom());u.top()<O.top()&&(fa=u.top()-O.top());this.itemScroll=P.addXY(0,fa);this.update()}},{key:"onItemMorphDoubleClicked",value:function(u,O){}},{key:"onItemMorphClicked",value:function(u,O){if(void 0!==O.itemIndex){var P=O.itemIndex;O=this.selectedIndexes;var fa=O.includes(P),Qa=[];if(this.multiSelect)if(u.isShiftDown())if(fa)Qa=O.filter(function(Gb){return Gb!==P});else{u=O[0];var Ua="number"===typeof u?Ra.arr.range(P,u):[P];Qa=Ua.concat(O.filter(function(Gb){return!Ua.includes(Gb)}))}else Qa=
this.multiSelectWithSimpleClick||u.isCommandKey()?fa?O.filter(function(Gb){return Gb!==P}):[P].concat(O.filter(function(Gb){return Gb!==P})):[P];else Qa=[P];this.selectedIndexes=Qa}}},{key:"onItemMorphDragged",value:function(u,O){}},{key:"onHoverIn",value:function(u){this.scrollable&&(this.scroller.visible=!0)}},{key:"onHoverOut",value:function(u){Ra.touchInputDevice||(this.scroller.visible=!1)}},{key:"onDragStart",value:function(u){}},{key:"onDrag",value:function(u){}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",
command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:{win:"Ctrl-A",mac:"Meta-A"},command:"select all"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"}].concat(Ac._get(Object.getPrototypeOf(ma.prototype),
"keybindings",this))}},{key:"commands",get:function(){return Ra.listCommands}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"List"}},{key:"properties",get:function(){return{fill:{defaultValue:Ra.Color.white},clipMode:{defaultValue:"hidden"},selectionFontColor:{isStyleProp:!0,defaultValue:Ra.Color.white},selectionColor:{type:"ColorGradient",isStyleProp:!0,defaultValue:Ra.Color.rgb(21,101,192)},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Ra.Color.rgbHex("333")},fontColor:{isStyleProp:!0,
defaultValue:Ra.Color.rgbHex("333")},styleClasses:{defaultValue:["default"]},itemScroll:{derived:!0,after:["submorphs"],get:function(){return this.scroller?this.scroller.scroll:Ra.pt(0,0)},set:function(u){this.scroller&&(this.scroller.scroll=u)}},extent:{defaultValue:Ra.pt(400,360),set:function(u){u.eqPt(this.extent)||(this.setProperty("extent",u),this.update())}},fontFamily:{isStyleProp:!0,defaultValue:"Helvetica Neue, Arial, sans-serif",set:function(u){this.setProperty("fontFamily",u);this.invalidateCache()}},
fontSize:{isStyleProp:!0,defaultValue:12,set:function(u){this.setProperty("fontSize",u);this.invalidateCache()}},padding:{isStyleProp:!0,defaultValue:Ra.Rectangle.inset(3)},itemBorderRadius:{isStyleProp:!0,defaultValue:0,set:function(u){this.setProperty("itemBorderRadius",u);this.invalidateCache()}},itemPadding:{isStyleProp:!0,defaultValue:Ra.Rectangle.inset(1),set:function(u){this.setProperty("itemPadding",u);this.invalidateCache()}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(u){this.setProperty("items",
u.map(Ra.asItem));this.itemScroll=Ra.pt(0,0);this.update();this.attributeConnections&&Ra.signal(this,"values",this.values)}},multiSelect:{defaultValue:!1},multiSelectWithSimpleClick:{description:"Does a simple click toggle selections without deselecting?",defaultValue:!1},multiSelectViaDrag:{description:"Does dragging extend selection?",defaultValue:!0},values:{group:"list",after:["items"],readOnly:!0,get:function(){return this.items.map(function(u){return u.value})}},selectedIndex:{group:"list",
defaultValue:[],after:["selectedIndexes"],get:function(){return this.selectedIndexes[0]},set:function(u){return this.selectedIndexes="number"===typeof u?[u]:[]}},selectedIndexes:{get:function(){return this.getProperty("selectedIndexes")||[]},set:function(u){var O=this.items.length;this.setProperty("selectedIndexes",(u||[]).filter(function(P){return 0<=P&&P<O}));this.update();Ra.signal(this,"selection",this.selection)}},selection:{group:"list",after:["selections"],get:function(){return this.selections[0]},
set:function(u){this.selections=[u]}},selections:{group:"list",after:["selectedIndexes"],get:function(){var u=this;return this.selectedIndexes.map(function(O){return u.items[O]&&u.items[O].value})},set:function(u){var O=this;this.selectedIndexes=u.map(function(P){return O.findIndex(P)})}},selectedItems:{after:["selectedIndexes"],readOnly:!0,get:function(){var u=this;return this.selectedIndexes.map(function(O){return u.items[O]})}},submorphs:{initialize:function(u){this.initializeSubmorphs(u)}},listItemContainer:{after:["submorphs"],
readOnly:!0,get:function(){return this.getSubmorphNamed("listItemContainer")}},itemMorphs:{after:["submorphs"],readOnly:!0,get:function(){return this.listItemContainer.submorphs}},scrollBar:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scrollbar")}},scroller:{after:["submorphs"],readOnly:!0,get:function(){return this.getSubmorphNamed("scroller")}},scrollable:{derived:!0,get:function(){return this.padding.top()+this.items.length*this.itemHeight>this.height}},manualItemHeight:{type:"Boolean"},
itemHeight:{isStyleProp:!0,after:["fontFamily","fontSize","itemPadding"],defaultValue:10,set:function(u){this.setProperty("itemHeight",u);this.manualItemHeight="number"===typeof u;this.update()},get:function(){var u=this.getProperty("itemHeight");if(u)return u;u=this.env.fontMetric.defaultLineHeight({fontFamily:this.fontFamily,fontSize:this.fontSize});var O=this.itemPadding;O&&(u+=O.top()+O.bottom());this.setProperty("itemHeight",u);return u}},theme:{after:["styleClasses"],defaultValue:"default",
set:function(u){this.removeStyleClass(this.theme);this.addStyleClass(u);this.setProperty("theme",u)}}}}}],ca,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:10917,end:28286})}(Ra.Morph));Ra.List=qb;Ra.List=qb;var va=Lc("F",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),
ma=ca.hasOwnProperty("FilterableList")&&"function"===typeof ca.FilterableList?ca.FilterableList:ca.FilterableList=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};u.bounds||u.extent||(u.extent=Ra.pt(400,360));Ac._get(Object.getPrototypeOf(ma.prototype),Symbol["for"]("lively-instance-initialize"),
this).call(this,u);Ra.connect(this.inputMorph,"inputChanged",this,"updateFilter");Ra.connect(this.listMorph,"selection",this,"selectionChanged");Ra.connect(this.listMorph,"onItemMorphDoubleClicked",this,"acceptInput");this.updateFilter();Ra.connect(this,"extent",this,"relayout")}},{key:"resetConnections",value:function(){var u=this,O=this.attributeConnections;if(O){var P=["accepted","canceled","remove"];O.filter(function(fa){return P.includes(fa.sourceAttrName)&&fa.targetObj!==u}).forEach(function(fa){return fa.disconnect()})}}},
{key:"isList",get:function(){return!0}},{key:"relayout",value:function(){var u=this,O=this.listMorph,P=this.inputMorph,fa=this.paddingMorph,Qa=this.borderWidth;this.withMetaDo({metaInteraction:!0},function(){P.topLeft=Ra.pt(Qa,Qa);P.width=O.width=u.width-2*Qa;fa&&(fa.topLeft=P.bottomLeft);O.position=fa?fa.bottomLeft:P.bottomLeft;O.height=Math.floor(u.height-O.top-Qa)})}},{key:"focus",value:function(){this.get("input").focus()}},{key:"selectionChanged",value:function(u){Ra.signal(this,"selection",
u)}},{key:"scrollSelectionIntoView",value:function(){return this.listMorph.scrollSelectionIntoView()}},{key:"parseInput",value:function(){var u=this.get("input").textString,O=Array.from(u).reduce(function(fa,Qa){if("\\"===Qa&&!fa.escaped)return fa.escaped=!0,fa;" "!==Qa||fa.escaped?(fa.spaceSeen=!1,fa.current+=Qa):(!fa.spaceSeen&&fa.current&&(fa.tokens.push(fa.current),fa.current=""),fa.spaceSeen=!0);fa.escaped=!1;return fa},{tokens:[],current:"",escaped:!1,spaceSeen:!1});O.current&&O.tokens.push(O.current);
var P=O.tokens.map(function(fa){return fa.toLowerCase()});return{tokens:O.tokens,lowercasedTokens:P,input:u}}},{key:"updateFilter",value:function(){var u=this,O=this.parseInput(),P=this.filterFunction,fa=this.sortFunction,Qa=this.items.filter(function(ta){return P.call(u,O,ta)});fa&&(Qa=Ra.arr.sortBy(Qa,function(ta){return fa.call(u,O,ta)}));var Ua=this.listMorph,Gb=this.updateSelectionsAfterFilter?Ua.selectedIndexes.map(function(ta){return Qa.indexOf(Ua.items[ta])}).filter(function(ta){return-1!==
ta}):Ua.selectedIndexes;Ua.items=Qa;Ua.selectedIndexes=Gb.length?Gb:Qa.length?[0]:[];this.scrollSelectionIntoView();Ra.signal(this,"filterChanged",{parsedInput:O,items:Ua.items})}},{key:"acceptInput",value:function(){var u=this.listMorph;this.get("input").acceptInput();u={filtered:this.items,selected:u.selections,action:this.selectedAction,status:"accepted"};Ra.signal(this,"accepted",u);return u}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",command:"arrow up"},{keys:"Down|Ctrl-N",command:"arrow down"},
{keys:"Shift-Up",command:"select up"},{keys:"Shift-Down",command:"select down"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Enter",command:"accept input"},{keys:"Escape|Ctrl-G",command:"cancel"},{keys:"Tab",command:"choose action"}].concat(ba(Ra.arr.range(0,8).map(function(u){return{keys:"Alt-"+(u+1),command:{command:"choose action and accept input",args:{actionNo:u}}}}))).concat(Ac._get(Object.getPrototypeOf(ma.prototype),
"keybindings",this))}},{key:"commands",get:function(){var u=this;return Ac._get(Object.getPrototypeOf(ma.prototype),"commands",this).concat([{name:"accept input",exec:function(O){u.acceptInput();return!0}},{name:"cancel",exec:function(O){Ra.signal(O,"canceled");return!0}},{name:"choose action and accept input",exec:function(O){var P=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).actionNo;O.selectedAction=(O.actions||[])[void 0===P?0:P];return O.execCommand("accept input")}},{name:"choose action",
exec:function(){var O=Xa(regeneratorRuntime.mark(function Qa(fa){var Ua,Gb,ta;return regeneratorRuntime.wrap(function(mc){for(;;)switch(mc.prev=mc.next){case 0:if(fa.actions){mc.next=2;break}return mc.abrupt("return",!0);case 2:return Ua=Object.assign({},fa.style,{extent:fa.extent}),Gb=new Ra.FilterableList(Ua),Gb.openInWorld(fa.globalPosition),Gb.items=fa.actions,ta=fa.actions.indexOf(fa.selectedAction),-1===ta&&(ta=0),Gb.selectedIndex=ta,Ra.connect(Gb,"accepted",fa,"selectedAction",{converter:function(pc){this.targetObj.focus();
this.disconnect();this.sourceObj.remove();return pc.selected[0]}}),Ra.connect(Gb,"canceled",fa,"selectedAction",{converter:function(pc){this.targetObj.focus();this.disconnect();this.sourceObj.remove();return this.targetObj.selectedAction}}),Gb.focus(),mc.abrupt("return",!0);case 13:case "end":return mc.stop()}},Qa)}));return function(fa){return O.apply(this,arguments)}}()}].concat(ba(Ra.listCommands.map(function(O){return Object.assign({},O,{exec:function(P,fa,Qa){return O.exec(u.listMorph,fa,Qa)}})}))))}}],
[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"FilterableList"}},{key:"properties",get:function(){return{fill:{defaultValue:Ra.Color.transparent},borderWidth:{defaultValue:1},updateSelectionsAfterFilter:{defaultValue:!1},theme:{after:["styleClasses","listMorph"],defaultValue:"default",set:function(u){this.removeStyleClass(this.theme);this.listMorph.removeStyleClass(this.theme);this.addStyleClass(u);this.listMorph.addStyleClass(u);this.setProperty("theme",u)}},submorphs:{initialize:function(){var u=
this;this.submorphs=[Ra.Text.makeInputLine({name:"input",highlightWhenFocused:!1,fixedHeight:!1,autofit:!1}),new Ra.morph({name:"padding",fill:Ra.Color.transparent}),new Ra.List({name:"list",items:[]})];this.get("list").whenRendered().then(function(){return u.get("list").update()})}},paddingMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("padding")}},listMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("list")}},
inputMorph:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.getSubmorphNamed("input")}},fontFamily:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontFamily},set:function(u){this.listMorph.fontFamily=u;this.inputMorph.fontFamily=u}},padding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.padding},set:function(u){this.listMorph.padding=u;this.inputMorph.padding=u}},fontSize:{isStyleProp:!0,group:"styling",
derived:!0,after:["submorphs"],get:function(){return this.listMorph.fontSize},set:function(u){this.listMorph.fontSize=u}},itemPadding:{isStyleProp:!0,derived:!0,after:["submorphs"],get:function(){return this.listMorph.itemPadding},set:function(u){this.listMorph.itemPadding=u}},inputPadding:{isStyleProp:!0,derived:!0,after:["submorphs","padding"],get:function(){return this.inputMorph.padding},set:function(u){this.inputMorph.padding=u}},input:{derived:!0,after:["submorphs"],defaultValue:"",get:function(){return this.inputMorph.input},
set:function(u){this.inputMorph.input=u}},historyId:{derived:!0,after:["submorphs"],defaultValue:null,get:function(){return this.inputMorph.historyId},set:function(u){this.inputMorph.historyId=u}},multiSelect:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.multiSelect},set:function(u){this.listMorph.multiSelect=u}},items:{after:["submorphs","fuzzy","fuzzySortFunction","fuzzyFilterFunction"],defaultValue:[],set:function(u){this.setProperty("items",u.map(Ra.asItem));this.updateFilter()}},
visibleItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.items}},selection:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selection},set:function(u){this.listMorph.selection=u}},selectedIndex:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndex},set:function(u){this.listMorph.selectedIndex=u}},selectedIndexes:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedIndexes},set:function(u){this.listMorph.selectedIndexes=
u}},selectedItems:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selectedItems},set:function(u){this.listMorph.selectedItems=u}},selections:{derived:!0,after:["submorphs"],get:function(){return this.listMorph.selections},set:function(u){this.listMorph.selections=u}},fuzzy:{derived:!0,after:["filterFunction","sortFunction"],set:function(u){this.setProperty("fuzzy",u);u?(this.sortFunction||(this.sortFunction=this.fuzzySortFunction),this.filterFunction===this.defaultFilterFunction&&
(this.filterFunction=this.fuzzyFilterFunction)):(this.sortFunction===this.fuzzySortFunction&&(this.sortFunction=null),this.filterFunction===this.fuzzyFilterFunction&&(this.filterFunction=this.defaultFilterFunction))}},filterFunction:{get:function(){var u=this.getProperty("filterFunction");if(!u)return this.defaultFilterFunction;"string"===typeof u&&(u=eval("(".concat(u,")")));return u}},sortFunction:{},defaultFilterFunction:{readOnly:!0,get:function(){return this._defaultFilterFunction||(this._defaultFilterFunction=
function(u,O){return u.lowercasedTokens.every(function(P){return O.string.toLowerCase().includes(P)})})}},fuzzySortFunction:{get:function(){var u=this;return this._fuzzySortFunction||(this._fuzzySortFunction=function(O,P){var fa=String(Ra.Path("string"===typeof u.fuzzy?u.fuzzy:"string").get(P)).toLowerCase(),Qa=0;O.lowercasedTokens.forEach(function(Ua){fa.startsWith(Ua)?Qa-=10:fa.includes(Ua)&&(Qa-=5)});return Ra.arr.sum(O.lowercasedTokens.map(function(Ua){return Ra.string.levenshtein(fa.toLowerCase(),
Ua)}))+Qa})}},fuzzyFilterFunction:{get:function(){var u=this;return this._fuzzyFilterFunction||(this._fuzzyFilterFunction=function(O,P){var fa="string"===typeof u.fuzzy?u.fuzzy:"string";if(O.lowercasedTokens.every(function(Ua){return P.string.toLowerCase().includes(Ua)}))return!0;var Qa=String(Ra.Path(fa).get(P)).toLowerCase();return 3>=Ra.arr.sum(O.lowercasedTokens.map(function(Ua){return Ra.string.levenshtein(Qa,Ua)}))})}},selectedAction:{get:function(){return this.getProperty("selectedAction")||
"default"}},actions:{}}}}],ca,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:28354,end:43510})}(Ra.Morph));Ra.FilterableList=va;Ra.FilterableList=va;Vb=Lc("j",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),ma=ca.hasOwnProperty("DropDownList")&&
"function"===typeof ca.DropDownList?ca.DropDownList:ca.DropDownList=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"fitLabelMorph",value:function(){}},{key:Symbol["for"]("lively-instance-initialize"),value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,u);Ra.connect(this,"fire",this,"toggleList")}},{key:"onLoad",
value:function(){this.listMorph.selection||(this.listMorph.selection=this.labelMorph.value[0])}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},{key:"removeWhenFocusLost",value:function(u){var O=this;setTimeout(function(){var P=O.listMorph,fa=O.world()&&O.world().focusedMorph;fa!==P&&fa!==O&&P.world()&&!P.withAllSubmorphsDetect(function(Qa){return Qa===fa})?P.fadeOut(200):P.world()&&(P=Ra.touchInputDevice?P.scroller:P,Ra.once(P,"onBlur",O,"removeWhenFocusLost"),P.focus())},
100)}},{key:"adjustLableFor",value:function(u){u=u.label||[u.string,null];u=[].concat(ba(u),[" ",null],ba(Ra.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"))));u[5]&&(u[5].paddingRight="0px",u[5].textStyleClasses=["fa","annotation"]);this.label=u;this.relayout()}},{key:"toggleList",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa,Qa,Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:fa=this.listMorph;if(!this.isListVisible()){Gb.next=
8;break}Ra.signal(this,"deactivated");this.selection=fa.selection;fa.epiMorph=!1;fa.remove();Gb.next=22;break;case 8:return Ra.signal(this,"activated"),this.openListInWorld?(fa.openInWorld(),fa.epiMorph=!0,fa.hasFixedPosition=!0,fa.setTransform(this.getGlobalTransform()),Qa=this.globalBounds()):(Qa=this.innerBounds(),this.addMorph(fa)),Ua=fa.items.length*fa.itemHeight+fa.padding.top()+fa.padding.bottom(),fa.extent=Ra.pt(this.width,Math.min(this.listHeight,Ua)),"top"===this.listAlign?fa.bottomLeft=
Qa.topLeft():fa.topLeft=Qa.bottomLeft(),fa.moveBy(this.listOffset||Ra.pt(0,0)),Ra.once(fa,"onItemMorphClicked",this,"toggleList"),Ra.once(Ra.touchInputDevice?fa.scroller:fa,"onBlur",this,"removeWhenFocusLost"),Gb.next=18,fa.whenRendered();case 18:return Gb.next=20,fa.whenRendered();case 20:Ra.touchInputDevice?fa.scroller.focus():fa.focus(),fa.scrollSelectionIntoView();case 22:case "end":return Gb.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"commands",get:function(){var u=
this;return[{name:"accept",exec:function(){u.isListVisible()&&u.toggleList();return!0}},{name:"cancel",exec:function(){u.isListVisible()&&u.listMorph.remove();return!0}}].concat(Ac._get(Object.getPrototypeOf(ma.prototype),"commands",this))}},{key:"keybindings",get:function(){return Ac._get(Object.getPrototypeOf(ma.prototype),"keybindings",this).concat([{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",command:"cancel"}])}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DropDownList"}},
{key:"properties",get:function(){return{padding:{defaultValue:Ra.Rectangle.inset(3,2)},listHeight:{defaultValue:100},listAlign:{type:"Enum",values:["bottom","top"],defaultValue:"bottom"},listOffset:{isStyleProp:!0,defaultValue:Ra.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["labelMorph"],get:function(){var u=this.getProperty("listMorph");if(u)return u;u=new Ra.List({name:"dropDownList"});this.setProperty("listMorph",u);return u}},items:{derived:!0,after:["listMorph"],get:function(){return this.listMorph.items},
set:function(u){var O=this,P=this.items.find(function(fa){return fa.value===O.selection});this.listMorph.items=u;P&&Ra.noUpdate(function(){O.selection=O.items[0].value})}},selection:{after:["listMorph","items"],derived:!0,get:function(){return this.listMorph.selection},set:function(u){var O=this.listMorph;if(u){var P=O.items,fa=O.find(u);fa||"string"!==typeof u||(fa=P.find(function(Qa){return Qa.string===u}));if(!fa)return;this.adjustLableFor(fa);O.selectedIndex=P.indexOf(fa)}else O.selection=null,
this.label="";Ra.signal(this,"selection",O.selection)}}}}}],ca,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:43518,end:48636})}(Ra.Button));Ra.DropDownList=Vb;Ra.DropDownList=Vb;var Wa=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),ma=ca.hasOwnProperty("InteractiveItem")&&
"function"===typeof ca.InteractiveItem?ca.InteractiveItem:ca.InteractiveItem=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"fit",value:function(){}},{key:"onHaloGrabover",value:function(u){this.list.showDropPreviewFor(this,u)}},{key:"onDrop",value:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){var Qa;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=
Ua.next){case 0:if(!this.item.isPreview){Ua.next=7;break}Qa=P.hand.grabbedMorphs[0];Ac._get(Object.getPrototypeOf(ma.prototype),"onDrop",this).call(this,P);Ua.next=5;return this.list.whenRendered();case 5:this.list.addItemAt({morph:Qa,isListItem:!0},this.itemIndex),this.list.clearPreviews();case 7:case "end":return Ua.stop()}},fa,this)}));return function(P){return u.apply(this,arguments)}}()},{key:"select",value:function(){this.list.selectedIndex=this.itemIndex;this.item.morph.focus()}},{key:"onMouseDown",
value:function(u){Ra.touchInputDevice?this._touchDown=Date.now():this.select()}},{key:"onMouseUp",value:function(u){Ra.touchInputDevice&&500>Date.now()-this._touchDown&&this.select()}},{key:"displayItem",value:function(u,O,P,fa,Qa){var Ua=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1,Gb=6<arguments.length?arguments[6]:void 0;Ac._get(Object.getPrototypeOf(ma.prototype),"displayItem",this).call(this,u,O,P,fa,Qa,Ua,Gb);u.morph&&(u.morph.selected=Ua)}},{key:"onGrab",value:function(u){var O=
this.list,P=u.halo&&u.halo.target===this;P&&u.halo.detachFromTarget();var fa=this.submorphs.length?this.submorphs[0]:Ra.morph({type:"label",value:this.value});u.hand.grab(fa);fa.position=u.hand.localize(this.globalPosition);P&&u.halo.refocus(fa);O.removeItem(this.list.items[this.itemIndex]);O.itemMorphs.forEach(function(Qa){return Qa.remove()});O.update()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InteractiveItem"}},{key:"properties",get:function(){return{draggable:{defaultValue:!Ra.touchInputDevice},
item:{derived:!0,get:function(){return this.list.items[this.itemIndex]}},list:{drived:!0,get:function(){return this.owner.owner}},isListItem:{get:function(){return!0}}}}}],ca,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:48644,end:50906})}(Ra.ListItemMorph);Ra.InteractiveItem=Wa;Ra.InteractiveItem=
Wa;var pa=Lc("e",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),ma=ca.hasOwnProperty("MorphList")&&"function"===typeof ca.MorphList?ca.MorphList:ca.MorphList=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"onLoad",value:function(){Ac._get(Object.getPrototypeOf(ma.prototype),"onLoad",this).call(this);this.clipMode=this.touchInput?"auto":
"hidden"}},{key:"showDropPreviewFor",value:function(u,O){u=u.itemIndex;this.items[u].isPreview&&O||(this.clearPreviews(),O&&this.addItemAt({isListItem:!0,isPreview:!0,morph:Ra.morph({reactsToPointer:!1,acceptsDrops:!1,width:this.width-5,height:this.itemHeight,fill:Ra.Color.orange.withA(.5)})},u))}},{key:"clearPreviews",value:function(){var u=this;this.items.filter(function(O){return O.morph&&O.morph.owner&&!Ra.Path("morph.owner.isListItem").get(O)}).map(function(){var O=Xa(regeneratorRuntime.mark(function Qa(fa){return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=
Ua.next){case 0:return Ua.abrupt("return",u.removeItem(fa));case 1:case "end":return Ua.stop()}},Qa)}));return function(fa){return O.apply(this,arguments)}}());this.items.filter(function(O){return O.isPreview}).map(function(O){return u.removeItem(O)})}},{key:"update",value:function(){var u=this,O=this.items;O&&this.listItemContainer&&(this.scroller&&(this.scroller.visible=!1),this.dontRecordChangesWhile(function(){var P=u.itemHeight,fa=u.itemMorphs,Qa=u.listItemContainer,Ua=u.selectedIndexes,Gb=u.extent,
ta=Gb.x,mc=Gb.y,pc=u.fontSize,zd=u.fontFamily,Pd=u.fontColor;Gb=u.padding;var bd=void 0===Gb?cb.inset(0):Gb,Yd=u.itemPadding,le=u.selectionColor,Be=u.selectionFontColor,Ne=u.nonSelectionFontColor,Re=u.itemBorderRadius;Gb=u.scrollBar;var nf=u.scroll.y,af=bd.top(),yf=bd.left(),Ig=bd.bottom();bd=bd.right();var re=Math.max(0,Math.floor(nf/P)),Ld=Math.min(O.length,Math.ceil((nf+mc)/P));mc=0;ta-=yf+bd;fa=Ra.arr.sortBy(fa,function(wd){return wd.itemIndex});fa=Ra.arr.partition(fa,function(wd){return wd.itemIndex<
re});nf=yb(fa,2);fa=nf[0];var fc=nf[1];nf=Ra.arr.partition(fc,function(wd){return wd.itemIndex>Ld});fc=yb(nf,2);nf=fc[0];fc=fc[1];fa=[].concat(ba(nf),ba(fc),ba(fa));pc={fontSize:pc,fontFamily:zd,fontColor:Ne||Pd,padding:Yd,borderRadius:Re||0,selectionFontColor:Be,nonSelectionFontColor:Ne,selectionColor:le};fa.length&&Ld-re>fa.length&&(re!==fa[0].itemIndex?Ra.arr.pushAt(fa,Qa.addMorph(new Ra.InteractiveItem(pc)),0):Ld===Ra.arr.last(fa).itemIndex&&fa.push(Qa.addMorph(new Ra.InteractiveItem(pc))));for(zd=
0;zd<Ld-re;zd++){Pd=re+zd;Yd=O[Pd];if(!Yd){fa.slice(zd).forEach(function(wd){return wd.remove()});break}le=fa[zd];le||(le=fa[zd]=Qa.addMorph(new Ra.InteractiveItem(pc)),le.clipMode="visible");le.displayItem(Yd,Pd,ta,P,Ra.pt(0,P*Pd),Ua.includes(Pd),pc);mc=Math.max(mc,le.width)}P=Math.max(af+Ig+P*O.length,u.height);Ua=Ra.pt(u.width,P).subPt(Ra.pt(yf+bd,0));Qa.setBounds(Ra.pt(yf,af).extent(Ua));Gb.left=mc-10;Gb.fill=null;Gb.top=0;Gb.extent=Ra.pt(1,P)}))}},{key:"onHoverIn",value:function(u){this.clipMode=
"auto"}},{key:"onHoverOut",value:function(u){this.touchInput||(this.clipMode="hidden")}},{key:"onScroll",value:function(u){this.update()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MorphList"}},{key:"properties",get:function(){return{touchInput:{get:function(){return Ra.touchInputDevice}},items:{group:"list",defaultValue:[],after:["submorphs"],set:function(u){this.setProperty("items",u.map(Ra.asItem));this.itemMorphs.forEach(function(O){return O.remove()});this.update();this.attributeConnections&&
Ra.signal(this,"values",this.values)}}}}}],ca,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:50914,end:56189})}(Ra.List));Ra.MorphList=pa;Ra.MorphList=pa;var tb=Lc("d",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/list.js"),ma=ca.hasOwnProperty("DropDownListModel")&&
"function"===typeof ca.DropDownListModel?ca.DropDownListModel:ca.DropDownListModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"initListMorph",value:function(){this.listMorph=this.listMaster?Ra.part(this.listMaster,{isLayoutable:!1,name:"dropDownList",viewModel:{items:[]}}):new Ra.List({items:[]})}},{key:"__additionally_serialize__",value:function(u,O,P,fa){(u=this.listMaster&&
this.listMaster[Symbol["for"]("lively-module-meta")])&&fa("listMaster",P.expressionSerializer.exprStringEncode({__expr__:u["export"],bindings:wb({},u.module,u["export"])}))}},{key:"viewDidLoad",value:function(){this.onRefresh("selection")}},{key:"onRefresh",value:function(u){var O=this.listMorph,P=this.selection;if(!O)return Ac._get(Object.getPrototypeOf(ma.prototype),"onRefresh",this).call(this,u);O.items=this.items;if(P){var fa=O.items,Qa=O.find(P);Qa||"string"!==typeof P||(Qa=fa.find(function(Ua){return Ua.string===
P}));if(!Qa)return Ac._get(Object.getPrototypeOf(ma.prototype),"onRefresh",this).call(this,u);"selection"===u&&this.adjustLableFor(Qa);O.selectedIndex=fa.indexOf(Qa)}else O.selection=null,this.label={value:""};Ac._get(Object.getPrototypeOf(ma.prototype),"onRefresh",this).call(this,u)}},{key:"attach",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"attach",this).call(this,u);!this.selection&&0<this.items.length&&(this.selection=this.items[0].value)}},{key:"isListVisible",value:function(){return!!this.listMorph.world()}},
{key:"removeWhenFocusLost",value:function(u){var O=this;setTimeout(function(){var P=O.listMorph,fa=O.world()&&O.world().focusedMorph;fa!==P&&fa!==O.view&&P.world()&&!P.withAllSubmorphsDetect(function(Qa){return Qa===fa})?P.fadeOut(200):P.world()&&(P=Ra.touchInputDevice?P.scroller:P,Ra.once(P,"onBlur",O,"removeWhenFocusLost"),P.focus())},100)}},{key:"adjustLableFor",value:function(u){u=u.label||[u.string,null];var O=Ra.Icon.textAttribute("angle-down",{paddingTop:"2px"});"selection"!==this.listAlign&&
(O=Ra.Icon.textAttribute("caret-"+("bottom"===this.listAlign?"down":"up"),{paddingTop:"bottom"===this.listAlign?"0px":"2px"}));u=[].concat(ba(u),[" ",null],ba(O));u[5]&&(u[5].paddingRight="0px",u[5].textStyleClasses=["fa","annotation"]);this.label={value:u}}},{key:"setMixed",value:function(){this.label={value:["Mix",null]}}},{key:"toggleList",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa,Qa,Ua,Gb;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:fa=
this.listMorph;Ua=this.view;fa.isHaloItem=!0;if(!this.isListVisible()){ta.next=10;break}Ra.signal(this,"deactivated");this.selection=fa.selection;fa.epiMorph=!1;fa.remove();ta.next=23;break;case 10:return Ra.signal(this,"activated"),this.openListInWorld?(fa.openInWorld(),fa.epiMorph=!0,fa.hasFixedPosition=!0,fa.setTransform(Ua.getGlobalTransform()),Qa=Ua.globalBounds()):(Qa=Ua.innerBounds(),Ua.addMorph(fa)),Gb=fa.items.length*fa.itemHeight+fa.padding.top()+fa.padding.bottom(),fa.extent=Ra.pt(Ua.width,
Math.min(this.listHeight,Gb)),"top"===this.listAlign?fa.bottomLeft=Qa.topLeft().addPt(this.listOffset||Ra.pt(0,0)):fa.topLeft="bottom"===this.listAlign?Qa.bottomLeft().addPt(this.listOffset||Ra.pt(0,0)):Qa.topLeft().subXY(0,fa.itemHeight*(fa.selectedIndex||0)),Ra.once(fa,"onItemMorphClicked",this,"toggleList"),Ra.once(Ra.touchInputDevice?fa.scroller:fa,"onBlur",this,"removeWhenFocusLost"),ta.next=19,fa.whenRendered();case 19:return ta.next=21,fa.whenRendered();case 21:Ra.touchInputDevice?fa.scroller.focus():
fa.focus(),fa.scrollSelectionIntoView();case 23:case "end":return ta.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DropDownListModel"}},{key:"properties",get:function(){return{listHeight:{defaultValue:100},listMaster:{isComponent:!0,set:function(u){this.setProperty("listMaster",u);this.listMorph&&this.listMorph.remove();this.initListMorph()}},listAlign:{type:"Enum",values:["bottom","top","selection"],defaultValue:"bottom"},
action:{get:function(){var u=this;return function(){u.toggleList()}}},listOffset:{isStyleProp:!0,defaultValue:Ra.pt(0,0)},openListInWorld:{defaultValue:!1},listMorph:{after:["listMaster"],serialize:!1,initialize:function(){this.initListMorph()}},items:{initialize:function(){this.items=[]},set:function(u){u=u.map(Ra.asItem);this.setProperty("items",u);!this.selection&&0<u.length&&(this.selection=u[0].value)}},selection:{},expose:{get:function(){return["keybindings","commands","items","selection","setMixed"]}},
commands:{get:function(){var u=this;return[{name:"accept",exec:function(){u.isListVisible()&&u.toggleList();return!0}},{name:"cancel",exec:function(){u.isListVisible()&&u.listMorph.remove();return!0}}]}},keybindings:{get:function(){return[{keys:"Enter",command:"accept"},{keys:"Escape|Ctrl-G",command:"cancel"}]}}}}}],ca,{pathInPackage:function(){return"./list.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:56213,end:62650})}(Ra.ButtonModel));Ra.DropDownListModel=tb;Ra.DropDownListModel=tb;Lb=Object.freeze({__proto__:null,asItem:aa,ListItemMorph:Lb,ListScroller:N,List:qb,FilterableList:va,DropDownList:Vb,InteractiveItem:Wa,MorphList:pa,DropDownListModel:tb});var ab=window.lively.FreezerRuntime.recorderFor("lively.components/menus.js");ab.Label=ic;ab.config=Za;ab.Morph=pd;ab.obj=Sb;ab.promise=Cb;ab.fun=Da;ab.pt=Tc;ab.Color=
Jc;ab.Rectangle=cb;N=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/menus.js"),ma=ca.hasOwnProperty("MenuDivider")&&"function"===typeof ca.MenuDivider?ca.MenuDivider:ca.MenuDivider=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,void 0,[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MenuDivider"}},{key:"properties",get:function(){return{isMenuDevider:{defaultValue:!0},
fill:{defaultValue:ab.Color.gray.lighter()},extent:{defaultValue:ab.pt(100,5)},reactsToPointer:{defaultValue:!1}}}}],ca,{pathInPackage:function(){return"./menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:167,end:499})}(ab.Morph);ab.MenuDivider=N;ab.MenuDivider=N;Wa=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/menus.js"),
ma=ca.hasOwnProperty("MenuItem")&&"function"===typeof ca.MenuItem?ca.MenuItem:ca.MenuItem=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"onHoverIn",value:function(u){var O=this;this.owner.itemMorphs.forEach(function(P){return P!==O&&(P.selected=!1)});this.selected=!0;this.submenu&&this.owner.openSubMenuDelayed(u,this,this.submenu)}},{key:"onHoverOut",value:function(u){var O=this,
P=u.hand;setTimeout(function(){(O.owner?O.owner.submenus:[]).some(function(fa){return fa.fullContainsWorldPoint(P.globalPosition)})||(O.selected=!1)},20);this.owner.maybeRemoveSubmenu()}},{key:"onMouseDown",value:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){var Qa;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:if(!this.submenu){Ua.next=2;break}return Ua.abrupt("return");case 2:Ua.prev=2;this.owner.startFinish();if("function"===typeof this.action){Ua.next=
6;break}throw Error("Menu item ".concat(this.textString," has no executable action!"));case 6:return Ua.next=8,this.action();case 8:this.owner.completeFinish();Ua.next=15;break;case 11:Ua.prev=11,Ua.t0=Ua["catch"](2),(Qa=this.world())?Qa.logError(Ua.t0):console.error(Ua.t0);case 15:case "end":return Ua.stop()}},fa,this,[[2,11]])}));return function(P){return u.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MenuItem"}},{key:"properties",get:function(){return{acceptsDrops:{defaultValue:!1},
fixedWidth:{defaultValue:!1},fixedHeight:{defaultValue:!1},fill:{defaultValue:ab.Color.transparent},fontSize:{defaultValue:14},draggable:{defaultValue:!1},readOnly:{defaultValue:!0},nativeCursor:{defaultValue:"pointer"},selected:{defaultValue:!1,set:function(u){this.selected!==u&&(this.addValueChange("selected",u),u?(this.fontColor=ab.Color.white,this.fill=ab.Color.rgb(21,101,192)):(this.fill=ab.Color.transparent,this.fontColor=ab.Color.black))}},isMenuItem:{derived:!0,readOnly:!0,get:function(){return!0}},
label:{get:function(){return this.valueAndAnnotation.value.map(function(u,O){return 0===O%2?u:""}).join("\n")},set:function(u){this.valueAndAnnotation={value:u,annotation:this.annotation}}},annotation:{get:function(){return this.valueAndAnnotation.annotation},set:function(u){this.valueAndAnnotation={value:this.value,annotation:u}}},action:{},submenu:{}}}}],ca,{pathInPackage:function(){return"./menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:507,end:3276})}(ab.Label);ab.MenuItem=Wa;ab.MenuItem=Wa;ab.invalidItem={string:"invalid item",action:function(){return $world.setStatusMessage("invalid item")}};var Ob=Lc("M",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/menus.js"),ma=ca.hasOwnProperty("Menu")&&"function"===typeof ca.Menu?ca.Menu:ca.Menu=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:"startFinish",value:function(){this.ownerMenu&&this.ownerMenu.startFinish();this._waitingForFinish=!0}},{key:"completeFinish",value:function(){this.ownerMenu&&this.ownerMenu.completeFinish();this.finishedPromise.resolve(!0)}},{key:"whenFinished",value:function(){return this.finishedPromise.promise}},{key:"onChange",value:function(u){var O=u.prop;u.selector;switch(O){case "itemPadding":case "fontSize":case "fontFamily":this.updateMorphs()}Ac._get(Object.getPrototypeOf(ma.prototype),
"onChange",this).call(this,u)}},{key:"remove",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:return fa.next=2,this.animate({opacity:0,duration:300});case 2:this._waitingForFinish||this.completeFinish(),Ac._get(Object.getPrototypeOf(ma.prototype),"remove",this).call(this);case 4:case "end":return fa.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"ensureItem",value:function(u){if(!u)return ab.invalidItem;
if(u.title)return this.title=u.title,null;if(u.isDivider)return u;if(u.hasOwnProperty("string")&&u.hasOwnProperty("action"))return ab.obj.select(u,["string","action","annotation"]);if(Array.isArray(u)){u=yb(u,2);var O=u[0];u=u[1];return"string"===typeof O||Array.isArray(O)?u&&"function"!==typeof u?"object"===zb(u)&&u.getItems?{label:O,submenu:u.getItems,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:Array.isArray(u)?{label:O,submenu:u,annotation:[" ",{textStyleClasses:["fa","fa-caret-right"]}]}:
ab.invalidItem:{label:O,action:u||function(){return $world.setStatusMessage(O)}}:ab.invalidItem}if(u.command){var P=u.command,fa=u.showKeyShortcuts,Qa=u.target,Ua=u.alias,Gb=u.args;u=u.tooltip;if(!P||!Qa)return ab.invalidItem;void 0===fa&&(fa=!0);fa=fa?"string"===typeof fa?fa:Qa.keysForCommand(P):null;Ua=Ua||P;fa=fa?["\t".concat(fa),{fontSize:"70%"}]:["",{}];return{tooltip:u,string:Ua,annotation:fa,action:function(){return Qa.execCommand(P,Gb)}}}return ab.invalidItem}},{key:"updateMorphs",value:function(){var u=
this;this.submorphs=[];var O=this.padding.left(),P=this.padding.right(),fa=this.padding.top(),Qa=this.padding.bottom(),Ua=0,Gb=ab.pt(O,fa),ta={};this.fontFamily&&(ta.fontFamily=this.fontFamily);this.fontSize&&(ta.fontSize=this.fontSize);this.itemPadding&&(ta.padding=this.itemPadding);this.title&&(fa=this.addMorph(Object.assign({type:"label",value:this.title,name:"title",position:Gb,fontWeight:"bold"},ta)),Gb=fa.bottomLeft,Ua=Math.max(fa.width,Ua));this.items.forEach(function(mc){var pc=mc.label,zd=
mc.string,Pd=mc.annotation,bd=mc.action,Yd=mc.submenu,le=mc.tooltip;mc=u.addMorph(mc.isDivider?new ab.MenuDivider({position:Gb}):new ab.MenuItem(Object.assign({label:pc||zd,annotation:Pd,action:bd,submenu:Yd,tooltip:le,position:Gb},ta)));Gb=mc.bottomLeft;Ua=Math.max(mc.width,Ua)});this.submorphs.forEach(function(mc){mc.isLabel&&(mc.fit(),mc.autofit=!1,mc.fixedWidth=!0,mc.fixedHeight=!0);mc.width=Ua});this.extent=ab.pt(Ua+P+O,Gb.y+Qa)}},{key:"openSubMenuDelayed",value:function(u,O,P){var fa=this;this.openingSubMenuProcess&&
clearTimeout(this.openingSubMenuProcess);this.openingSubMenuProcess=setTimeout(function(){try{fa.openSubMenu(u,O,P)}catch(Ua){var Qa=fa.world();Qa?Qa.logError(Ua):console.error(Ua)}},200)}},{key:"openSubMenu",value:function(u,O,P){if(O.selected){var fa=this.submenu;if(fa){if(fa.ownerItemMorph===O||this.morphsContainingPoint(u.position).includes(fa))return;this.removeSubMenu()}"function"===typeof P&&(P=P());u=this.submenu=this.addMorph(new ab.Menu({items:P,ownerItemMorph:O,ownerMenu:this}));u.updateMorphs();
u.offsetForOwnerMenu()}}},{key:"maybeRemoveSubmenu",value:function(){var u=this;ab.fun.debounceNamed(this.id+"-maybeRemoveSubmenu",300,function(){var O=u.world();if(O){var P=u.submenu,fa=u.selectedItemMorph;O=O&&P&&P.fullContainsWorldPoint(O.firstHand.position);P&&P.ownerItemMorph!==fa&&!P.ownerItemMorph.selected&&(O?(fa&&(fa.selected=!1),P.ownerItemMorph.selected=!0):u.removeSubMenu())}})();return this.removeOnMouseOut}},{key:"removeSubMenu",value:function(){if(this.submenu){var u=this.submenu;this.submenu=
u.ownerMenu=null;u.remove()}}},{key:"moveBoundsForVisibility",value:function(u,O){var P=0,fa=0;u.right()>O.right()&&(P=-1*(u.right()-O.right()));var Qa=u.left()+P;0>Qa&&(P+=-Qa);u.bottom()>O.bottom()&&(fa=-1*(u.bottom()-O.bottom()),P+=1);O=u.top()+fa;0>O&&(fa+=-O);return u.translatedBy(ab.pt(P,fa))}},{key:"moveSubMenuBoundsForVisibility",value:function(u,O,P,fa){fa||(fa=O.right()+u.width>P.right()?"left":"right");u=u.extent();u="left"===fa?O.topLeft().addXY(-u.x,0).extent(u):O.topRight().extent(u);
u.bottom()>P.bottom()&&(O=-1*(u.bottom()-P.bottom()),u=u.translatedBy(ab.pt(0,O)));u.top()<P.top()&&(P=P.top()-u.top(),u=u.translatedBy(ab.pt(0,P)));return u}},{key:"offsetForOwnerMenu",value:function(){var u=this.ownerMenu,O=this.world().visibleBounds(),P=u.getGlobalTransform().inverse().transformRectToRect(O);u=this.clipForVisibility(this.moveSubMenuBoundsForVisibility(this.innerBounds(),u.selectedItemMorph?u.selectedItemMorph.bounds():u.innerBounds(),P),O);this.setBounds(u)}},{key:"clipForVisibility",
value:function(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.bounds(),O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.world().visibleBounds(),P=this.transformRectToMorph(this.world(),u.withX(0).withY(0));O.containsRect(P.insetBy(10))||(u=u.withExtent(ab.pt(5+u.width,Math.min(P.height,O.height))));return u}},{key:"offsetForWorld",value:function(u){u=this.innerBounds().translatedBy(u);if(this.owner.visibleBounds){var O=this.owner.visibleBounds();u=this.clipForVisibility(this.moveBoundsForVisibility(u,
O),O)}this.setBounds(u)}},{key:"onHoverOut",value:function(){this.removeOnMouseOut&&this.remove()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Menu"}},{key:"forItems",value:function(u){return new this(Object.assign({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{title:""},{items:u}))}},{key:"openAt",value:function(u,O){var P=this.forItems(O,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{title:""}).openInWorldNear(u);P.offsetForWorld(u);return P}},{key:"openAtHand",
value:function(u){var O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{title:""},P=O.hand;O=this.forItems(u,ab.obj.dissoc(O,["hand"]));P=P?P.position:ab.pt(0,0);O.titleMorph&&(P=P.addXY(0,-O.titleMorph.height));O.openInWorld(P);O.offsetForWorld(P);return O}},{key:"properties",get:function(){return{dropShadow:{initialize:function(){if(ab.config.fastShadows||!this.ownerMenu)this.dropShadow=!0,this.dropShadow.fast=!1}},submorphs:{initialize:function(){this.updateMorphs()}},epiMorph:{defaultValue:!0},
acceptsDrops:{defaultValue:!1},hasFixedPosition:{defaultValue:!0},padding:{defaultValue:ab.Rectangle.inset(0,2)},itemPadding:{defaultValue:ab.Rectangle.inset(8,4)},borderWidth:{defaultValue:1},fill:{defaultValue:ab.Color.white},borderColor:{defaultValue:ab.Color.gray.lighter()},borderRadius:{defaultValue:4},opacity:{defaultValue:.95},fontSize:{defaultValue:16},title:{get:function(){return this.getProperty("title")},set:function(u){this.addValueChange("title",u)}},finishedPromise:{initialize:function(){this.finishedPromise=
ab.promise.deferred()}},ownerMenu:{},submenu:{},styleClasses:{defaultValue:["Halo"]},submenus:{readOnly:!0,get:function(){return this.submenu?[this.submenu].concat(this.submenu.submenus):[]}},ownerItemMorph:{},removeOnMouseOut:{},items:{set:function(u){u=u.map(this.ensureItem.bind(this)).filter(Boolean);this.setProperty("items",u)}},selectedItemMorph:{derived:!0,readOnly:!0,get:function(){return this.itemMorphs.find(function(u){return u.selected})}},titleMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("title")}},
itemMorphs:{derived:!0,readOnly:!0,get:function(){return this.submorphs.filter(function(u){return u.isMenuItem})}}}}}],ca,{pathInPackage:function(){return"./menus.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:3391,end:16642})}(ab.Morph));ab.Menu=Ob;ab.Menu=Ob;N=Object.freeze({__proto__:null,MenuDivider:N,MenuItem:Wa,Menu:Ob});
var yc=window.lively.FreezerRuntime.recorderFor("lively.components/resizers.js");yc.arr=Bb;yc.obj=Sb;yc.pt=Tc;yc.Color=Jc;yc.Morph=pd;Wa=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),ma=ca.hasOwnProperty("VerticalResizer")&&"function"===typeof ca.VerticalResizer?ca.VerticalResizer:ca.VerticalResizer=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,
wa,[{key:"onDrag",value:function(u){this.movedHorizontallyBy(u.position.x-u.state.lastDragPosition.x)}},{key:"divideRelativeToParent",value:function(u){if(!(!this.owner||"number"!==typeof u||0>u||1<u)){var O=this.owner.extent.x-this.extent.x;if(!(0>O)){var P=this.getRelativeDivide();this.movedHorizontallyBy(O*(u-P))}}}},{key:"getRelativeDivide",value:function(u){var O=this.bounds();u=O.left();O=this.owner.extent.x-O.width;return 0>O?NaN:u/O}},{key:"movedHorizontallyBy",value:function(u){this.resizeIsSave(u)&&
(this.fixed.concat(this.scalingRight).forEach(function(O){var P=O.position;O.position=yc.pt(P.x+u,P.y)}),this.scalingLeft.forEach(function(O){var P=O.extent;O.extent=yc.pt(P.x+u,P.y)}),this.scalingRight.forEach(function(O){var P=O.extent;O.extent=yc.pt(P.x-u,P.y)}),this.position=this.position.addPt(yc.pt(u,0)))}},{key:"resizeIsSave",value:function(u){var O=this;return this.scalingLeft.every(function(P){return P.extent.x+u>=O.minWidth})&&this.scalingRight.every(function(P){return P.extent.x-u>=O.minWidth})}},
{key:"addFixed",value:function(u){yc.arr.pushIfNotIncluded(this.fixed,u)}},{key:"addScalingLeft",value:function(u){yc.arr.pushIfNotIncluded(this.scalingLeft,u)}},{key:"addScalingRight",value:function(u){yc.arr.pushIfNotIncluded(this.scalingRight,u)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"VerticalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:yc.Color.gray.lighter()},nativeCursor:{defaultValue:"ew-resize"},fixed:{defaultValue:[]},scalingLeft:{defaultValue:[]},
scalingRight:{defualtValue:[]},minWidth:{defaultValue:20},draggable:{defaultValue:!0}}}}],ca,{pathInPackage:function(){return"./resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:132,end:2821})}(yc.Morph);yc.VerticalResizer=Wa;yc.VerticalResizer=Wa;pa=Lc("H",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/resizers.js"),
ma=ca.hasOwnProperty("HorizontalResizer")&&"function"===typeof ca.HorizontalResizer?ca.HorizontalResizer:ca.HorizontalResizer=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"getRefs",value:function(u){var O=this;return yc.arr.uniq(u.map(function(P){return yc.obj.isString(P)?O.get(P):P}))}},{key:"onDrag",value:function(u){this.movedVerticallyBy(u.position.y-u.state.lastDragPosition.y)}},
{key:"divideRelativeToParent",value:function(u){if(!(!this.owner||"number"!==typeof u||0>u||1<u)){var O=this.owner.extent.y-this.extent.y;if(!(0>O)){var P=this.getRelativeDivide();this.movedVerticallyBy(O*(u-P))}}}},{key:"getRelativeDivide",value:function(u){var O=this.bounds();u=O.top();O=this.owner.extent.y-O.height;return 0>O?NaN:u/O}},{key:"movedVerticallyBy",value:function(u){this.resizeIsSave(u)&&(this.getRefs(this.fixed.concat(this.scalingBelow)).forEach(function(O){var P=O.position;O.position=
yc.pt(P.x,P.y+u)}),this.getRefs(this.scalingAbove).forEach(function(O){var P=O.extent;O.extent=yc.pt(P.x,P.y+u)}),this.getRefs(this.scalingBelow).forEach(function(O){var P=O.extent;O.extent=yc.pt(P.x,P.y-u)}),this.position=this.position.addPt(yc.pt(0,u)))}},{key:"resizeIsSave",value:function(u){var O=this;return this.getRefs(this.scalingAbove).every(function(P){return P.extent.y+u>=O.minHeight})&&this.getRefs(this.scalingBelow).every(function(P){return P.extent.y-u>=O.minHeight})}},{key:"addFixed",
value:function(u){yc.arr.pushIfNotIncluded(this.fixed,u)}},{key:"addScalingAbove",value:function(u){yc.arr.pushIfNotIncluded(this.scalingAbove,u)}},{key:"addScalingBelow",value:function(u){yc.arr.pushIfNotIncluded(this.scalingBelow,u)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"HorizontalResizer"}},{key:"properties",get:function(){return{fill:{defaultValue:yc.Color.gray.lighter()},nativeCursor:{defaultValue:"ns-resize"},fixed:{defaultValue:[]},scalingBelow:{defaultValue:[]},
scalingAbove:{defaultValue:[]},minHeight:{defaultValue:20},draggable:{defaultValue:!0}}}}],ca,{pathInPackage:function(){return"./resizers.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:2829,end:5736})}(yc.Morph));yc.HorizontalResizer=pa;yc.HorizontalResizer=pa;Wa=Object.freeze({__proto__:null,VerticalResizer:Wa,HorizontalResizer:pa});
var Ta=window.lively.FreezerRuntime.recorderFor("lively.components/tree.js");Ta.arr=Bb;Ta.obj=Sb;Ta.tree=db;Ta.string=rd;Ta.promise=Cb;Ta.pt=Tc;Ta.Rectangle=cb;Ta.Color=Jc;Ta.Text=Pc;Ta.config=Za;Ta.touchInputDevice=bc;Ta.signal=$d;pa=Lc("b",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/tree.js"),ma=ca.hasOwnProperty("Tree")&&"function"===typeof ca.Tree?ca.Tree:ca.Tree=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:Symbol["for"]("lively-instance-initialize"),value:function(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!u.treeData)throw Error("Cannot create tree without TreeData!");Ac._get(Object.getPrototypeOf(ma.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,u);this.resetCache();this.update()}},{key:"onChange",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onChange",this).call(this,u);"fontSize fontColor selectionColor disableIndent nonSelectionFontColor selectionFontColor".split(" ").includes(u.prop)&&
this.update(!0)}},{key:"resetCache",value:function(){this._lineHeightCache=null}},{key:"isTree",get:function(){return!0}},{key:"nodeStyle",get:function(){return{fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,autofit:!this.resizeNodes}}},{key:"lineBounds",value:function(u){var O=this.textLayout.charBoundsOfRow(this,u);u=Ta.Rectangle.fromLiteral(Ta.arr.first(O)).topLeft();O=Ta.Rectangle.fromLiteral(Ta.arr.last(O)).bottomRight();return Ta.Rectangle.fromAny(u,O)}},{key:"recoverOriginalLine",
value:function(u){for(var O=this.document.getTextAndAttributesOfLine(u),P=0;P<O.length;P++){var fa=this._originalColor[P];fa&&!Ta.obj.isString(O[P])&&(O[P]?O[P].fontColor=fa:O[P]={fontColor:fa})}this.document.setTextAndAttributesOfLine(u,O)}},{key:"renderSelectedLine",value:function(u){var O=this.document.getTextAndAttributesOfLine(u);this._originalColor=Array(O.length);for(var P=0;P<O.length;P++)0===P%2?O[P]&&O[P].isMorph&&(this._originalColor[P]=O[P]?O[P].fontColor||this.nonSelectionFontColor:null,
O[P].fontColor=this.selectionFontColor,O[P].isSelected=!0):(this._originalColor[P]=(O[P]?O[P].fontColor:null)||this.nonSelectionFontColor,O[P]?O[P].fontColor=this.selectionFontColor:O[P]={fontColor:this.selectionFontColor});this.document.setTextAndAttributesOfLine(u,O);this.selectLine(u,!0);this._lastSelectedIndex=u+1}},{key:"computeTreeAttributes",value:function(u){if(!u.length)return[];for(var O=Ta.arr.genN(8*(u.length-1),function(){}),P=1,fa,Qa,Ua=this.disableIndent?0:1.3*this.fontSize,Gb=0,ta=
this.selectedIndex;P<u.length;P++){fa=8*(P-1)+Gb;Qa=ta==P;u[P].node.isSelected=Qa;O[fa]=" ";O[fa+1]={fontSize:Ua,fontColor:Ta.Color.transparent,textStyleClasses:["fas"],paddingRight:Ua*(u[P].depth-1)+"px"};O[fa+3]={fontColor:Ta.Color.transparent,textStyleClasses:["fas"],paddingTop:this.fontSize/10+"px",paddingRight:this.fontSize/8+"px"};this.treeData.isLeaf(u[P].node)?O[fa+2]=this.disableIndent?"":"    ":(O[fa+2]=this.treeData.isCollapsed(u[P].node)?" \uf0da ":" \uf0d7 ",Object.assign(O[fa+3],{paddingRight:this.treeData.isCollapsed(u[P].node)?
"".concat(this.fontSize/4,"px"):"0px",paddingTop:"0px",nativeCursor:"pointer",fontColor:this.fontColor}));var mc=this.treeData.safeDisplay(u[P].node);mc.isMorph&&(mc._capturedProps&&Object.assign(mc,mc._capturedProps),Qa&&(mc._capturedProps=Ta.obj.select(mc,["fontColor"])),mc.fontColor=this.nonSelectionFontColor);Array.isArray(mc)?(mc=mc.flat(),Ta.arr.pushAllAt(O,mc,fa+4),Qa=Math.max(0,mc.length-2),fa+=Qa,Gb+=Qa):(O[fa+4]=mc,O[fa+5]={fontColor:this.fontColor});O[fa+6]="\n";O[fa+7]={}}O.push(" ",{fontSize:1.3*
this.fontSize,textStyleClasses:["far"]});O=O.filter(function(pc){return"undefined"!==typeof pc});return 1<u.length?O:[]}},{key:"update",value:function(u){var O=this;if(!this._updating&&this.treeData&&this.nodeItemContainer){this._updating=!0;try{this.withMetaDo({isLayoutAction:!0},function(){var P=O.treeData;P.isTreeData&&(P=P.asListWithIndexAndDepth(),O.treeData!==O.lastTreeData||O.lastNumberOfNodes!==P.length||u?(O.replace({start:{row:0,column:0},end:O.documentEndPosition},O.computeTreeAttributes(P),
!1,!1),O.invalidateTextLayout(!0,!1),O.whenRendered().then(Xa(regeneratorRuntime.mark(function Qa(){return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:O.makeDirty();case 1:case "end":return Ua.stop()}},Qa)})))):O._lastSelectedIndex&&O.recoverOriginalLine(O._lastSelectedIndex-1),O.lastTreeData=O.treeData,O.lastNumberOfNodes=P.length,O.cursorPosition={row:0,column:0},0<O.selectedIndex?O.renderSelectedLine(O.selectedIndex-1):(P=O.getProperty("selection"))&&!P.isEmpty()&&
P.collapse(P.lead))})}finally{this._updating=!1}}}},{key:"buildViewState",value:function(u){var O=this;"function"!==typeof u&&(u=function(Qa){return Qa});var P=this.selectedNode?u(this.selectedNode):null,fa=new Map;Ta.tree.prewalk(this.treeData.root,function(Qa){return fa.set(u(Qa),O.treeData.isCollapsed(Qa))},function(Qa){return O.treeData.getChildrenIfUncollapsed(Qa)});return{selectionId:P,collapsedMap:fa,scroll:this.scroll}}},{key:"applyViewState",value:function(){var u=Xa(regeneratorRuntime.mark(function Qa(P,
fa){var Ua,Gb,ta,mc,pc,zd,Pd;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:"function"!==typeof fa&&(fa=function(Yd){return Yd}),Ua=P.selectionId,Gb=P.collapsedMap,ta=P.scroll,mc=0,pc=-1;case 4:zd=this.nodes;if(!(mc>=zd.length)){bd.next=8;break}return bd.abrupt("break",16);case 8:Pd=fa(zd[mc]);Ua===Pd&&(pc=mc);if(!Gb.has(Pd)||Gb.get(Pd)){bd.next=13;break}bd.next=13;return this.treeData.collapse(zd[mc],!1);case 13:mc++;bd.next=4;break;case 16:return this.selectedIndex=
pc,this.update(),this.scroll=ta,this.scrollSelectionIntoView(),bd.next=22,Ta.promise.delay(0);case 22:case "end":return bd.stop()}},Qa,this)}));return function(P,fa){return u.apply(this,arguments)}}()},{key:"maintainViewStateWhile",value:function(){var u=Xa(regeneratorRuntime.mark(function Qa(P,fa){var Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:return Ua=this.buildViewState(fa),Gb.next=3,P();case 3:return Gb.next=5,this.applyViewState(Ua,fa);case 5:case "end":return Gb.stop()}},
Qa,this)}));return function(P,fa){return u.apply(this,arguments)}}()},{key:"onNodeCollapseChanged",value:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){var Qa,Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:return Qa=P.node,Ua=P.isCollapsed,this.resetCache(),Gb.prev=2,Gb.next=5,this.treeData.collapse(Qa,Ua);case 5:Ta.signal(this,"nodeCollapseChanged",{node:Qa,isCollapsed:Ua});this.update();Gb.next=12;break;case 9:Gb.prev=9,Gb.t0=Gb["catch"](2),this.showError(Gb.t0);
case 12:case "end":return Gb.stop()}},fa,this,[[2,9]])}));return function(P){return u.apply(this,arguments)}}()},{key:"uncollapse",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa,Qa=arguments;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:if((fa=0<Qa.length&&void 0!==Qa[0]?Qa[0]:this.selectedNode)&&this.treeData.isCollapsed(fa)){Ua.next=3;break}return Ua.abrupt("return");case 3:return Ua.next=5,this.onNodeCollapseChanged({node:fa,isCollapsed:!1});
case 5:return Ua.abrupt("return",fa);case 6:case "end":return Ua.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"collapse",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa,Qa=arguments;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:if((fa=0<Qa.length&&void 0!==Qa[0]?Qa[0]:this.selectedNode)&&!this.treeData.isCollapsed(fa)){Ua.next=3;break}return Ua.abrupt("return");case 3:return Ua.next=5,this.onNodeCollapseChanged({node:fa,
isCollapsed:!0});case 5:return Ua.abrupt("return",fa);case 6:case "end":return Ua.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"selectedPath",value:function(){return this.treeData.pathOf(this.selectedNode)}},{key:"selectPath",value:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:return Qa.next=2,this.treeData.followPath(P);case 2:return Qa.abrupt("return",this.selectedNode=
Qa.sent);case 3:case "end":return Qa.stop()}},fa,this)}));return function(P){return u.apply(this,arguments)}}()},{key:"gotoIndex",value:function(u){this.selectedNode=this.nodes[u];this.scrollIndexIntoView(u)}},{key:"scrollSelectionIntoView",value:function(){this.selectedNode&&this.scrollIndexIntoView(this.selectedIndex)}},{key:"scrollIndexIntoView",value:function(u){this.scrollToIndex(u,"into view")}},{key:"centerSelection",value:function(){this.selectedNode&&this.scrollToIndex(this.selectedIndex,
"center")}},{key:"scrollToIndex",value:function(u){this.scrollPositionIntoView({row:u-1,column:0})}},{key:"contextMenuForNode",value:function(u,O){Ta.signal(this,"contextMenuRequested",{node:u,evt:O})}},{key:"onKeyDown",value:function(u){var O=this.world().focusedMorph;if(!O.isText||O.readOnly)return Ac._get(Object.getPrototypeOf(ma.prototype),"onKeyDown",this).call(this,u)}},{key:"onDragStart",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onDragStart",this).call(this,u);var O=this.textAttributeAtPoint(u.positionIn(this))||
{},P=O.onDragStart,fa=O.onDrag;O=O.onDragEnd;fa&&(this._onDragHandler=fa);O&&(this._onDragEndHandler=O);P&&P(u)}},{key:"onDrag",value:function(u){this._onDragHandler?this._onDragHandler(u):Ac._get(Object.getPrototypeOf(ma.prototype),"onDrag",this).call(this,u)}},{key:"onDragEnd",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onDragEnd",this).call(this,u);delete this._onDragHandler;this._onDragEndHandler&&this._onDragEndHandler(u);delete this._onDragEndHandler}},{key:"onMouseDown",
value:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){var Qa,Ua,Gb,ta,mc,pc;return regeneratorRuntime.wrap(function(zd){for(;;)switch(zd.prev=zd.next){case 0:Qa=this.textPositionFromPoint(P.positionIn(this));Ua=Qa.row;Gb=Qa.column;if(ta=this.nodes[Ua+1]){zd.next=4;break}return zd.abrupt("return");case 4:if(this.treeData.isLeaf(ta)||!(4>Gb)){zd.next=14;break}zd.next=7;return ta.isCollapsed;case 7:if(!zd.sent){zd.next=11;break}this.uncollapse(ta);zd.next=12;break;case 11:this.collapse(ta);
case 12:zd.next=15;break;case 14:this.selectedIndex!=Ua+1&&(this.selectedIndex=Ua+1);case 15:mc=this.textAttributeAt({row:Ua,column:Gb})||{},(pc=mc.onMouseDown)&&pc(P);case 17:case "end":return zd.stop()}},fa,this)}));return function(P){return u.apply(this,arguments)}}()},{key:"onMouseUp",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onMouseUp",this).call(this,u);var O=(this.textAttributeAtPoint(u.positionIn(this))||{}).onMouseUp;O&&O(u)}},{key:"onHoverIn",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),
"onHoverIn",this).call(this,u);this.activateOnHover&&(this.clipMode="auto")}},{key:"onHoverOut",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onHoverOut",this).call(this,u);!Ta.touchInputDevice&&this.activateOnHover&&(this.clipMode="hidden")}},{key:"onContextMenu",value:function(u){if(u.targetMorph===this){u.stop();var O=this.textPositionFromPoint(u.positionIn(this)),P=O.row;O.column;(O=this.nodes[P+1])&&this.contextMenuForNode(O,u)}}},{key:"keybindings",get:function(){return[{keys:"Up|Ctrl-P",
command:"select node above"},{keys:"Down|Ctrl-N",command:"select node below"},{keys:"Left",command:"collapse selected node"},{keys:"Right",command:"uncollapse selected node"},{keys:"Alt-V|PageUp",command:"page up"},{keys:"Ctrl-V|PageDown",command:"page down"},{keys:"Alt-Shift-,",command:"goto first item"},{keys:"Alt-Shift-.",command:"goto last item"},{keys:"Alt-Space",command:"select via filter"},{keys:"Ctrl-L",command:"realign top-bottom-center"},{keys:{mac:"Meta-[",win:"Ctrl-["},command:{command:"collapse or uncollapse all siblings",
args:{what:"collapse"}}},{keys:{mac:"Meta-]",win:"Ctrl-]"},command:{command:"collapse or uncollapse all siblings",args:{what:"uncollapse"}}},{keys:"Alt-N",command:"goto next sibling"},{keys:"Alt-P",command:"goto prev sibling"},{keys:"Alt-U",command:"goto parent"}]}},{key:"commands",get:function(){return Ta.treeCommands}},{key:"highlightChangedNodes",value:function(u){this.treeData.diff(u).forEach(function(O){O=yb(O,2);var P=O[0];O[1];return P.renderedNode&&P.renderedNode.highlight()})}}],[{key:Symbol["for"]("__LivelyClassName__"),
get:function(){return"Tree"}},{key:"properties",get:function(){return{selectionColor:{type:"ColorGradient",defaultValue:Ta.Color.rgb(21,101,192)},fontFamily:{defaultValue:Ta.config.codeEditor.defaultStyle.fontFamily},nativeCursor:{defaultValue:"auto"},selectable:{defaultValue:!1},acceptsDrops:{defaultValue:!1},fixedWidth:{defaultValue:!0},fixedHeight:{defaultValue:!0},disableIndent:{defaultValue:!1},activateOnHover:{defaultValue:!0},readOnly:{defaultValue:!0},lineHeight:{defaultValue:1.5},clipMode:{defaultValue:"auto"},
padding:{defaultValue:Ta.Rectangle.inset(3)},resizeNodes:{defaultValue:!1,set:function(u){this.setProperty("resizeNodes",u);this.resetCache();this.update()}},treeData:{after:["selection"],set:function(u){this.setProperty("treeData",u);this.resetCache();this.update()}},selectedIndex:{derived:!0,after:["selectedNode","nodes"],get:function(){return this.selectedNode?this.nodes.indexOf(this.selectedNode):-1},set:function(u){this.selectedNode=this.nodes[u]}},nodes:{derived:!0,after:["treeData"],get:function(){return this.treeData.asList()}},
defaultViewState:{get:function(){return Object.assign({},Ac._get(Object.getPrototypeOf(ma),"prototype",this).defaultViewState,{fastScroll:!1})}},selectedNode:{set:function(u){this.setProperty("selectedNode",u);this.update()}},selectedNodeAndSiblings:{readOnly:!0,derived:!0,after:["selectedNode","treeData"],get:function(){return this.selectedNode?this.treeData.nodeWithSiblings(this.selectedNode):[]}},selectionFontColor:{isStyleProp:!0,defaultValue:Ta.Color.white,set:function(u){this.setProperty("selectionFontColor",
u)}},nonSelectionFontColor:{isStyleProp:!0,defaultValue:Ta.Color.rgbHex("333"),set:function(u){this.setProperty("nonSelectionFontColor",u)}},nodeItemContainer:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this}},nodeMorphs:{derived:!0,readOnly:!0,after:["submorphs"],get:function(){return this.nodeItemContainer.submorphs.slice()}}}}}],ca,{pathInPackage:function(){return"./tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:1414,end:18849})}(Ta.Text));Ta.Tree=pa;Ta.Tree=pa;tb=Lc("T",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/tree.js"),ma=ca.hasOwnProperty("TreeData")&&"function"===typeof ca.TreeData?ca.TreeData:ca.TreeData=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:Symbol["for"]("lively-instance-initialize"),
value:function(u){this.root=u;this.parentMap=new WeakMap}},{key:"isTreeData",get:function(){return!0}},{key:"__dont_serialize__",get:function(){return["parentMap"]}},{key:"__deserialize__",value:function(){this.parentMap=new WeakMap}},{key:"display",value:function(u){throw Error("Not yet implemented");}},{key:"isCollapsed",value:function(u){throw Error("Not yet implemented");}},{key:"collapse",value:function(u,O){throw Error("Not yet implemented");}},{key:"getChildren",value:function(u){throw Error("Not yet implemented");
}},{key:"isLeaf",value:function(u){throw Error("Not yet implemented");}},{key:"getChildrenIfUncollapsed",value:function(u){return this.isCollapsed(u)?[]:this.getChildren(u)}},{key:"safeDisplay",value:function(u){try{return this.display(u)}catch(O){return"[TreeData] Error when trying to display node: ".concat(O)}}},{key:"nodeToString",value:function(u){u=this.safeDisplay(u);return"string"===typeof u?u:u&&Array.isArray(u)?u.map(function(O,P){return 0===P%2?O:""}).join(""):String(u)}},{key:"parentNode",
value:function(u){var O=this;return this.parentMap.get(u)||Ta.tree.detect(this.root,function(P){return!O.isLeaf(P)&&O.getChildrenIfUncollapsed(P).includes(u)},function(P){return O.getChildrenIfUncollapsed(P)})}},{key:"nodeWithSiblings",value:function(u){return(u=this.parentNode(u))?this.getChildrenIfUncollapsed(u):[]}},{key:"asList",value:function(){return this.asListWithIndexAndDepth().map(function(u){return u.node})}},{key:"asListWithIndexAndDepth",value:function(){var u=this,O=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:!1,P=[];Ta.tree.prewalk(this.root,function(fa,Qa,Ua){return P.push({node:fa,depth:Ua,i:Qa})},function(fa){return u.getChildrenIfUncollapsed(fa)});return O?P.filter(O):P}},{key:"pathOf",value:function(u){for(var O=[];u;)O.unshift(u),u=this.parentNode(u);return O}},{key:"followPath",value:function(){var u=Xa(regeneratorRuntime.mark(function Qa(P,fa){var Ua,Gb,ta,mc,pc,zd=arguments;return regeneratorRuntime.wrap(function(Pd){for(;;)switch(Pd.prev=Pd.next){case 0:Ua=
2<zd.length&&void 0!==zd[2]?zd[2]:this.root;fa||(fa=function(bd,Yd){return bd===Yd});Gb=P.findIndex(function(bd){return fa(bd,Ua)});P=P.slice(Gb+1);if(P.length){Pd.next=6;break}return Pd.abrupt("return",null);case 6:ta=Ua;case 7:if(P.length){Pd.next=10;break}return Pd.abrupt("break",20);case 10:if(!this.isCollapsed(ta)){Pd.next=13;break}Pd.next=13;return this.collapse(ta,!1);case 13:mc=P.shift();if(pc=this.getChildrenIfUncollapsed(ta).find(function(bd){return fa(mc,bd)})){Pd.next=17;break}throw Error("Cannot descend into tree, next node of ".concat(P.join("."),
" not found at ").concat(this.safeDisplay(ta)));case 17:ta=pc;Pd.next=7;break;case 20:return Pd.abrupt("return",ta);case 21:case "end":return Pd.stop()}},Qa,this)}));return function(P,fa){return u.apply(this,arguments)}}()},{key:"diff",value:function(u){var O=[],P=this.asListWithIndexAndDepth();u=u.asListWithIndexAndDepth();if(P.length!=u.length)return[];P=ib(Ta.arr.zip(P,u));var fa;try{for(P.s();!(fa=P.n()).done;){var Qa=yb(fa.value,2),Ua=Qa[0],Gb=Qa[1];Ta.obj.equals(Ua.node.value,Gb&&Gb.node.value)||
O.push([Ua.node,Gb.node])}}catch(ta){P.e(ta)}finally{P.f()}return O}},{key:"patch",value:function(u){var O=this.diff(u);if(0<O.length){u=ib(O);var P;try{for(u.s();!(P=u.n()).done;){var fa=yb(P.value,2);fa[0].value=fa[1].value}}catch(Qa){u.e(Qa)}finally{u.f()}return this}return u}},{key:"uncollapseAll",value:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){var Qa,Ua,Gb,ta,mc=arguments;return regeneratorRuntime.wrap(function(pc){for(;;)switch(pc.prev=pc.next){case 0:Qa=1<mc.length&&void 0!==
mc[1]?mc[1]:0;if(Ua=2<mc.length?mc[2]:void 0){pc.next=6;break}pc.next=5;return this.uncollapseAll(P,Qa,this.root);case 5:return pc.abrupt("return",pc.sent);case 6:if(!P(Ua,Qa)){pc.next=19;break}pc.t0=Ua.isCollapsed;if(!pc.t0){pc.next=11;break}pc.next=11;return this.collapse(Ua,!1);case 11:Gb=this.getChildren(Ua),pc.t1=regeneratorRuntime.keys(Gb);case 13:if((pc.t2=pc.t1()).done){pc.next=19;break}ta=pc.t2.value;pc.next=17;return this.uncollapseAll(P,Qa+1,Gb[ta]);case 17:pc.next=13;break;case 19:case "end":return pc.stop()}},
fa,this)}));return function(P){return u.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TreeData"}}],ca,{pathInPackage:function(){return"./tree.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:18857,end:24048})}(void 0));Ta.TreeData=tb;Ta.TreeData=tb;Ta.treeCommands=[{name:"select via filter",
exec:function(){var wa=Xa(regeneratorRuntime.mark(function u(ma){var O,P,fa,Qa,Ua,Gb;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return O=ma.treeData,O.asListWithIndexAndDepth(),O.asListWithIndexAndDepth().map(function(mc){return Object.assign(mc,{string:O.nodeToString(mc.node)})}),P=Ta.string.lines(Ta.string.printTree(O.root,O.nodeToString.bind(O),O.getChildrenIfUncollapsed.bind(O))),fa=O.asList().map(function(mc,pc){return{isListItem:!0,string:P[pc],value:mc}}),
ta.next=7,ma.world().filterableListPrompt("Select item",fa);case 7:Qa=ta.sent;Ua=yb(Qa.selected,1);if(Gb=Ua[0])ma.selectedNode=Gb,ma.scrollSelectionIntoView();return ta.abrupt("return",!0);case 12:case "end":return ta.stop()}},u)}));return function(ma){return wa.apply(this,arguments)}}()},{name:"page up",exec:function(wa){wa.scrollPageUp(1);var ca=wa.scroll,ma=wa.padding.top(),u=ca.y;ca=wa.lineHeightCache.findIndex(function(O){return u<=(ma+=O)});ca--;wa.gotoIndex(Math.max(1,ca));return!0}},{name:"page down",
exec:function(wa){wa.scrollPageDown(1);var ca=wa.scroll,ma=wa.padding.top(),u=ca.y+wa.height;ca=wa.lineHeightCache.findIndex(function(O){return u<=(ma+=O)});ca--;wa.gotoIndex(Math.min(ca,wa.nodes.length-1));return!0}},{name:"goto first item",exec:function(wa){wa.gotoIndex(1);return!0}},{name:"goto last item",exec:function(wa){wa.gotoIndex(wa.nodes.length-1);return!0}},{name:"goto next sibling",exec:function(wa){var ca=wa.selectedNodeAndSiblings;if(ca=ca[ca.indexOf(wa.selectedNode)+1])wa.selectedNode=
ca,wa.scrollSelectionIntoView();return!0}},{name:"goto prev sibling",exec:function(wa){var ca=wa.selectedNodeAndSiblings;if(ca=ca[ca.indexOf(wa.selectedNode)-1])wa.selectedNode=ca,wa.scrollSelectionIntoView();return!0}},{name:"goto parent",exec:function(wa){wa.selectedNode&&(wa.selectedNode=wa.treeData.parentNode(wa.selectedNode),wa.scrollSelectionIntoView());return!0}},{name:"collapse selected node",exec:function(){var wa=Xa(regeneratorRuntime.mark(function u(ma){var O;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=
P.next){case 0:if(O=ma.selectedNode){P.next=3;break}return P.abrupt("return",!0);case 3:if(ma.treeData.isCollapsed(O)){P.next=8;break}P.next=6;return ma.onNodeCollapseChanged({node:ma.selectedNode,isCollapsed:!0});case 6:P.next=10;break;case 8:ma.selectedNode=ma.treeData.parentNode(O),ma.scrollSelectionIntoView();case 10:return P.abrupt("return",!0);case 11:case "end":return P.stop()}},u)}));return function(ma){return wa.apply(this,arguments)}}()},{name:"uncollapse selected node",exec:function(){var wa=
Xa(regeneratorRuntime.mark(function u(ma){return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!ma.selectedNode){O.next=3;break}O.next=3;return ma.onNodeCollapseChanged({node:ma.selectedNode,isCollapsed:!1});case 3:return O.abrupt("return",!0);case 4:case "end":return O.stop()}},u)}));return function(ma){return wa.apply(this,arguments)}}()},{name:"collapse or uncollapse all siblings",exec:function(){var wa=Xa(regeneratorRuntime.mark(function u(ma){var O,P,fa,Qa,Ua,Gb,
ta,mc,pc,zd,Pd=arguments;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:zd=function(Yd,le){return Promise.all(Yd.map(function(Be){return ma.onNodeCollapseChanged({node:Be,isCollapsed:le})}))};pc=function(Yd){return fa.getChildrenIfUncollapsed(Yd).filter(function(le){return!fa.isLeaf(le)})};O=1<Pd.length&&void 0!==Pd[1]?Pd[1]:{what:"collapse"};P="collapse"===O.what;fa=ma.treeData;if(!P){bd.next=13;break}if(!fa.isCollapsed(ma.selectedNode)){bd.next=8;break}return bd.abrupt("return",
!0);case 8:Ua=fa.parentNode(ma.selectedNode);Gb=-1;Ta.tree.prewalk(Ua,function(Yd,le,Be){Be<Gb||(Be>Gb&&(Gb=Be,Qa=[]),Be===Gb&&Ta.arr.pushIfNotIncluded(Qa,fa.parentNode(Yd)))},fa.getChildrenIfUncollapsed.bind(fa));bd.next=24;break;case 13:ta=Ta.arr.compact([fa.parentNode(ma.selectedNode)]);case 14:if(ta.length){bd.next=17;break}return bd.abrupt("break",24);case 17:Qa=ta.flatMap(function(Yd){return pc(Yd)});if(mc=Qa.every(function(Yd){return fa.isCollapsed(Yd)===P})){bd.next=21;break}return bd.abrupt("break",
24);case 21:ta=Qa;bd.next=14;break;case 24:return bd.next=26,zd(Qa,P);case 26:return ma.scrollSelectionIntoView(),bd.abrupt("return",!0);case 28:case "end":return bd.stop()}},u)}));return function(ma){return wa.apply(this,arguments)}}()},{name:"select node above",exec:function(wa){var ca=wa.nodes,ma=wa.selectedIndex;1>=ma&&(ma=ca.length);wa.selectedNode=ca[ma-1];wa.scrollSelectionIntoView();return!0}},{name:"select node below",exec:function(wa){var ca=wa.nodes,ma=wa.selectedIndex;if(-1>=ma||ma>=ca.length-
1)ma=0;wa.selectedNode=ca[ma+1];wa.scrollSelectionIntoView();return!0}},{name:"realign top-bottom-center",exec:function(wa){if(wa.selectedNode){wa.padding;var ca=wa.scroll,ma=ca.x;ca=ca.y;var u=wa.lineBounds(wa.selectedIndex),O=u.topLeft();u=wa.height-u.height;ca=2>Math.abs(O.y-ca)?O.y-u:2>Math.abs(O.y-ca-.5*u)?O.y:O.y-.5*u;wa.scroll=Ta.pt(ma,ca);return!0}}},{name:"print contents in text window",exec:function(wa){var ca=wa.treeData;ca=Ta.string.printTree(ca.root,ca.nodeToString.bind(ca),ca.getChildrenIfUncollapsed.bind(ca));
var ma=wa.getWindow()?"printed "+wa.getWindow().title:wa.name;return wa.world().execCommand("open text window",{title:ma,content:ca,name:ma,fontFamily:Ta.config.codeEditor.defaultStyle.fontFamily})}}];pa=Object.freeze({__proto__:null,Tree:pa,TreeData:tb});var Bd=window.lively.FreezerRuntime.recorderFor("lively.components/iframe.js");Bd.promise=Cb;Bd.HTMLMorph=Ea;tb=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/iframe.js"),ma=ca.hasOwnProperty("IFrameMorph")&&"function"===
typeof ca.IFrameMorph?ca.IFrameMorph:ca.IFrameMorph=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:Symbol["for"]("lively-instance-initialize"),value:function(u){u.src||u.srcdoc||(u.srcdoc="<p>Empty iframe</p>");Ac._get(Object.getPrototypeOf(ma.prototype),Symbol["for"]("lively-instance-initialize"),this).call(this,u)}},{key:"changeSrc",value:function(u,O){var P=this,fa=this.iframe,
Qa=this._loadPromise;Qa&&!Qa.loaded&&Qa.reject();this._loadPromise=Bd.promise.deferred();this._loadPromise.loaded=!1;fa.onload=function(Ua){P._loadPromise.loaded=!0;P._loadPromise.resolve(Ua)};O=u||O;Qa=u?"src":"srcdoc";u=u?"srcdoc":"src";this.addValueChange(u,null);this.addValueChange(Qa,O);fa.removeAttribute(u);fa.setAttribute(Qa,O);this._loadPromise[Qa]=O}},{key:"whenLoaded",value:function(){return this._loadPromise.promise}},{key:"reload",value:function(){return this.iframe.src=this.src}},{key:"run",
value:function(u){return this.innerWindow.eval("("+u+")();")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"IFrameMorph"}},{key:"printTextMorph",value:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){var Qa,Ua,Gb,ta,mc;return regeneratorRuntime.wrap(function(pc){for(;;)switch(pc.prev=pc.next){case 0:return pc.next=2,P.whenRendered();case 2:return Qa=P.env.renderer.getNodeForMorph(P),Ua=Bd.IFrameMorph.open({srcdoc:Qa.outerHTML}),pc.next=6,Ua.whenLoaded();case 6:Gb=Ua.innerWindow.document,
Gb.body.style.whiteSpace="normal",Gb.body.style.margin="0.5cm",Gb.querySelector(".Text").style.width="100%",Gb.querySelector(".Text").style.overflow="visible",Gb.querySelectorAll(".marker-layer-part").forEach(function(zd){return zd.parentNode.removeChild(zd)}),ta=Gb.querySelector(".text-layer"),ta.style.whiteSpace="pre-wrap",mc=Array.from(ta.querySelectorAll("div")),mc.forEach(function(zd){zd.childNodes[0]&&(Array.from(zd.childNodes).forEach(function(Pd){return ta.insertBefore(Pd,zd)}),ta.insertBefore(Gb.createElement("br"),
zd),ta.removeChild(zd))}),Ua.innerWindow.print(),Ua.getWindow().remove();case 18:case "end":return pc.stop()}},fa)}));return function(P){return u.apply(this,arguments)}}()},{key:"open",value:function(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(new this(u)).openInWindow({title:u.title||"iframe"}).targetMorph}},{key:"properties",get:function(){return{iframe:{after:["domNode"],readOnly:!0,get:function(){return this.domNode}},innerWindow:{after:["iframe"],readOnly:!0,get:function(){return this.iframe.contentWindow}},
innerWorld:{after:["innerWindow"],readOnly:!0,get:function(){return this.innerWindow.$world}},src:{after:["domNode"],set:function(u){this.changeSrc(u,null)}},srcdoc:{after:["domNode"],set:function(u){this.changeSrc(null,u)}},domNode:{get:function(){this._domNode||(this._domNode=this.document.createElement("iframe"),this._domNode.setAttribute("style","position: absolute; width: 100%; height: 100%;"),this._domNode.setAttribute("allowfullscreen",!0));return this._domNode},set:function(u){return this._domNode=
u}}}}}],ca,{pathInPackage:function(){return"./iframe.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:619,end:6343})}(Bd.HTMLMorph);Bd.IFrameMorph=tb;Bd.IFrameMorph=tb;tb=Object.freeze({__proto__:null,IFrameMorph:tb});var Eb=window.lively.FreezerRuntime.recorderFor("lively.components/window.cp.js");Eb.Color=Jc;Eb.rect=Xb;Eb.LinearGradient=
W;Eb.pt=Tc;Eb.ShadowObject=Fd;Eb.Icon=nd;Eb.Label=ic;Eb.HorizontalLayout=vd;Eb.component=sb;Eb.part=hb;Eb.WindowButtonClose=Eb.component["for"](function(){return Eb.component({name:"window button close",borderRadius:14,extent:Eb.pt(15,13),fill:Eb.Color.rgba(0,0,0,0),position:Eb.pt(6,6),nativeCursor:"pointer",submorphs:[{type:Eb.Label,name:"label",fontColor:Eb.Color.rgb(255,96,82),fontSize:14,position:Eb.pt(2,1),reactsToPointer:!1,textAndAttributes:Eb.Icon.textAttribute("times")}],tooltip:"Close window"})},
{module:"lively.components/window.cp.js","export":"WindowButtonClose",range:{start:168,end:600}},Eb.WindowButtonClose);Eb.WindowButtonCloseHovered=Eb.component["for"](function(){return Eb.component(Eb.WindowButtonClose,{name:"window button close hovered",submorphs:[{name:"label",fontColor:Eb.Color.rgb(176,58,46)}]})},{module:"lively.components/window.cp.js","export":"WindowButtonCloseHovered",range:{start:608,end:785}},Eb.WindowButtonCloseHovered);Eb.WindowButtonInactive=Eb.component["for"](function(){return Eb.component(Eb.WindowButtonClose,
{name:"window button inactive",submorphs:[{name:"label",fontColor:Eb.Color.rgbHex("7F8C8D")}]})},{module:"lively.components/window.cp.js","export":"WindowButtonInactive",range:{start:793,end:961}},Eb.WindowButtonInactive);Eb.WindowButtonInactiveDark=Eb.component["for"](function(){return Eb.component(Eb.WindowButtonClose,{name:"window button inactive",submorphs:[{name:"label",fontColor:Eb.Color.rgbHex("ECF0F1")}]})},{module:"lively.components/window.cp.js","export":"WindowButtonInactiveDark",range:{start:969,
end:1141}},Eb.WindowButtonInactiveDark);Eb.WindowButtonMenu=Eb.component["for"](function(){return Eb.component({name:"window button menu",borderRadius:14,extent:Eb.pt(15,13),fill:Eb.Color.rgba(0,0,0,0),nativeCursor:"pointer",position:Eb.pt(48,6),submorphs:[{type:Eb.Label,name:"label",fontColor:Eb.Color.rgb(52,152,219),fontSize:14,position:Eb.pt(2,1),reactsToPointer:!1,textAndAttributes:Eb.Icon.textAttribute("angle-down")}],tooltip:"Open Window Menu"})},{module:"lively.components/window.cp.js","export":"WindowButtonMenu",
range:{start:1149,end:1590}},Eb.WindowButtonMenu);Eb.WindowButtonMenuHovered=Eb.component["for"](function(){return Eb.component(Eb.WindowButtonMenu,{name:"window button menu hovered",submorphs:[{name:"label",fontColor:Eb.Color.rgb(40,116,166)}]})},{module:"lively.components/window.cp.js","export":"WindowButtonMenuHovered",range:{start:1598,end:1773}},Eb.WindowButtonMenuHovered);Eb.WindowButtonMinimize=Eb.component["for"](function(){return Eb.component({name:"window button minimize",borderRadius:14,
extent:Eb.pt(15,13),fill:Eb.Color.rgba(0,0,0,0),nativeCursor:"pointer",position:Eb.pt(27,6),submorphs:[{type:Eb.Label,name:"label",fontColor:Eb.Color.rgb(243,156,18),fontSize:14,position:Eb.pt(2,1),reactsToPointer:!1,textAndAttributes:Eb.Icon.textAttribute("minus")}],tooltip:"collapse window"})},{module:"lively.components/window.cp.js","export":"WindowButtonMinimize",range:{start:1781,end:2224}},Eb.WindowButtonMinimize);Eb.WindowButtonMinimizeHovered=Eb.component["for"](function(){return Eb.component(Eb.WindowButtonMinimize,
{name:"window button minimize hovered",submorphs:[{name:"label",fontColor:Eb.Color.rgb(175,96,26)}]})},{module:"lively.components/window.cp.js","export":"WindowButtonMinimizeHovered",range:{start:2232,end:2418}},Eb.WindowButtonMinimizeHovered);Eb.DefaultWindow=Eb.component["for"](function(){return Eb.component({name:"default window",draggable:!0,fill:Eb.Color.transparent,dropShadow:new Eb.ShadowObject({distance:8,rotation:90,color:Eb.Color.rgba(0,0,0,.3),blur:35,spread:5}),extent:Eb.pt(345.1,152.1),
borderRadius:6,submorphs:[{name:"contents wrapper",extent:Eb.pt(345.1,152.1),fill:Eb.Color.rgb(179,182,183),borderRadius:6,reactsToPointer:!1,clipMode:"hidden",submorphs:[{name:"header",borderColor:Eb.Color.rgba(0,0,0,0),extent:Eb.pt(345.3,72),fill:new Eb.LinearGradient({stops:[{offset:0,color:Eb.Color.rgb(208,211,212)},{offset:1,color:Eb.Color.rgb(179,182,183)}],vector:Eb.rect(0,0,0,1)}),position:Eb.pt(-.2,-.4),reactsToPointer:!1,isLayoutable:!1,submorphs:[{name:"window controls",extent:Eb.pt(69,
27),fill:Eb.Color.rgba(0,0,0,0),layout:new Eb.HorizontalLayout({align:"top",autoResize:!0,direction:"leftToRight",orderByIndex:!0,padding:{height:0,width:0,x:6,y:6},spacing:6}),position:Eb.pt(-.6,-.3),submorphs:[Eb.part(Eb.WindowButtonClose,{name:"close",master:{auto:Eb.WindowButtonClose,hover:Eb.WindowButtonCloseHovered}}),Eb.part(Eb.WindowButtonMinimize,{name:"minimize",master:{auto:Eb.WindowButtonMinimize,hover:Eb.WindowButtonMinimizeHovered}}),Eb.part(Eb.WindowButtonMenu,{name:"menu",master:{auto:Eb.WindowButtonMenu,
hover:Eb.WindowButtonMenuHovered}})]},{type:Eb.Label,name:"window title",fontColor:Eb.Color.rgb(102,102,102),fontWeight:"bold",isLayoutable:!1,nativeCursor:"pointer",padding:Eb.rect(0,2,0,-2),position:Eb.pt(135.2,6),textAndAttributes:["Window Title",null]}]}]}]})},{module:"lively.components/window.cp.js","export":"DefaultWindow",range:{start:2458,end:4726}},Eb.DefaultWindow);Eb.DefaultWindowInactive=Eb.component["for"](function(){return Eb.component(Eb.DefaultWindow,{name:"default window inactive",
dropShadow:new Eb.ShadowObject({distance:8,rotation:90,color:Eb.Color.rgba(0,0,0,.1),blur:10}),submorphs:[{name:"contents wrapper",fill:Eb.Color.rgb(208,211,212),submorphs:[{name:"header",fill:new Eb.LinearGradient({stops:[{offset:0,color:Eb.Color.rgb(244,246,247)},{offset:1,color:Eb.Color.rgb(208,211,212)}],vector:Eb.rect(0,0,0,1)}),submorphs:[{name:"window controls",submorphs:[{name:"close",master:Eb.WindowButtonInactive},{name:"minimize",master:Eb.WindowButtonInactive},{name:"menu",master:Eb.WindowButtonInactive}]},
{name:"window title",fontWeight:400}]}]}]})},{module:"lively.components/window.cp.js","export":"DefaultWindowInactive",range:{start:4774,end:5745}},Eb.DefaultWindowInactive);Eb.DarkWindow=Eb.component["for"](function(){return Eb.component(Eb.DefaultWindow,{name:"dark window",dropShadow:new Eb.ShadowObject({distance:8,rotation:90,color:Eb.Color.rgba(0,0,0,.1),blur:10}),submorphs:[{name:"contents wrapper",fill:Eb.Color.rgb(38,50,56),submorphs:[{name:"header",fill:new Eb.LinearGradient({stops:[{offset:0,
color:Eb.Color.rgb(55,71,79)},{offset:1,color:Eb.Color.rgb(38,50,56)}],vector:Eb.rect(0,0,0,1)}),submorphs:[{name:"window title",fontColor:Eb.Color.rgb(144,148,151)}]}]}]})},{module:"lively.components/window.cp.js","export":"DarkWindow",range:{start:5782,end:6444}},Eb.DarkWindow);Eb.DarkWindowInactive=Eb.component["for"](function(){return Eb.component(Eb.DefaultWindowInactive,{name:"dark window inactive",dropShadow:new Eb.ShadowObject({distance:8,rotation:90,color:Eb.Color.rgba(0,0,0,.1),blur:10}),
submorphs:[{name:"contents wrapper",fill:Eb.Color.rgb(128,139,150),submorphs:[{name:"header",fill:new Eb.LinearGradient({stops:[{offset:0,color:Eb.Color.rgb(171,178,185)},{offset:1,color:Eb.Color.rgb(128,139,150)}],vector:Eb.rect(0,0,0,1)}),submorphs:[{name:"window controls",submorphs:[{name:"close",master:Eb.WindowButtonInactiveDark},{name:"minimize",master:Eb.WindowButtonInactiveDark},{name:"menu",master:Eb.WindowButtonInactiveDark}]},{name:"window title",fontColor:Eb.Color.rgb(102,102,102)}]}]}]})},
{module:"lively.components/window.cp.js","export":"DarkWindowInactive",range:{start:6489,end:7494}},Eb.DarkWindowInactive);var fe=Eb.DefaultWindow,Od=Eb.DarkWindow,Hd=Eb.DefaultWindowInactive,Qc=Eb.DarkWindowInactive;Eb.DefaultWindow=fe;Eb.DarkWindow=Od;Eb.DefaultWindowInactive=Hd;Eb.DarkWindowInactive=Qc;var Xd=window.lively.FreezerRuntime.recorderFor("lively.components/window.js");Xd.arr=Bb;Xd.promise=Cb;Xd.pt=Tc;Xd.Color=Jc;Xd.Rectangle=cb;Xd.Label=ic;Xd.morph=Nb;Xd.Morph=pd;Xd.connect=ub;Xd.signal=
$d;Xd.easings=T;Xd.DefaultWindow=fe;Xd.DefaultWindowInactive=Hd;fe=Lc("W",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/window.js"),ma=ca.hasOwnProperty("Window")&&"function"===typeof ca.Window?ca.Window:ca.Window=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"build",value:function(){this.submorphs=[{name:"contents wrapper",submorphs:[this.buildHeader()]},
this.buildResizer()]}},{key:"openWindowMenu",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa=this,Qa;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:return Qa=this.world()||this.env.world,Ua.t0=this.targetMorph.world(),Ua.t1=[["Change Window Title",Xa(regeneratorRuntime.mark(function ta(){var mc;return regeneratorRuntime.wrap(function(pc){for(;;)switch(pc.prev=pc.next){case 0:return pc.next=2,Qa.prompt("Enter New Name",{input:fa.title});case 2:if(mc=
pc.sent)fa.title=mc;case 4:case "end":return pc.stop()}},ta)}))],["Align and resize",[{alias:"full",target:Qa,command:"resize active window",args:{window:this,how:"full"}},{alias:"left",target:Qa,command:"resize active window",args:{window:this,how:"left"}},{alias:"center",target:Qa,command:"resize active window",args:{window:this,how:"center"}},{alias:"right",target:Qa,command:"resize active window",args:{window:this,how:"right"}},{alias:"top",target:Qa,command:"resize active window",args:{window:this,
how:"top"}},{alias:"bottom",target:Qa,command:"resize active window",args:{window:this,how:"bottom"}},{alias:"reset",target:Qa,command:"resize active window",args:{window:this,how:"reset"}}]],["Window Management",[{alias:"minimize all except this",target:Qa,command:"toggle minimize all except active window"},{alias:"close all except this",target:Qa,command:"close all except active window"},{alias:"close all like this",target:Qa,command:"close all like this window"},{isDivider:!0},{alias:"minimize all",
target:Qa,command:"toggle minimize all windows"},{alias:"close all",target:Qa,command:"close all windows"}]],{isDivider:!0}],Ua.t2=ba,Ua.next=6,this.targetMorph.menuItems();case 6:return Ua.t3=Ua.sent,Ua.t4=(0,Ua.t2)(Ua.t3),Ua.t5=Ua.t1.concat.call(Ua.t1,Ua.t4),Ua.abrupt("return",Ua.t0.openMenu.call(Ua.t0,Ua.t5));case 10:case "end":return Ua.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"isFaderActive",value:function(){return!!this.getSubmorphNamed("fader")}},{key:"toggleFader",
value:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){var Qa,Ua,Gb;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:Qa=this.getSubmorphNamed("fader")||this.ui.contentsWrapper.addMorph({position:Xd.pt(0,0),name:"fader",fill:Xd.Color.black.withA(.5),opacity:0,extent:this.extent});Ua=this.position.extent(this.extent);if(!P){ta.next=11;break}Gb=this.world().visibleBoundsExcludingTopBar().translateForInclusion(Ua);this._originalBounds=Ua;this.animate({bounds:Gb,
duration:300});this.borderColor=Xd.Color.gray.darker();this._faderTriggered=!0;Qa.opacity=1;ta.next=23;break;case 11:return this._originalBounds&&(this.animate({bounds:this._originalBounds,duration:300}),this._originalBounds=null),this._faderTriggered=!1,ta.next=15,this.whenRendered();case 15:return ta.next=17,Xd.promise.delay(100);case 17:this.borderColor=Xd.Color.gray;if(!this._faderTriggered){ta.next=20;break}return ta.abrupt("return");case 20:return ta.next=22,Qa.animate({opacity:0,duration:300});
case 22:Qa.remove();case 23:case "end":return ta.stop()}},fa,this)}));return function(P){return u.apply(this,arguments)}}()},{key:"isWindow",get:function(){return!0}},{key:"targetMorphBounds",value:function(){return new Xd.Rectangle(0,25,this.width,this.height-25)}},{key:"relayoutWindowControls",value:function(){var u=this.innerBounds(),O=this.ui.windowTitle,P=this.ui.resizer;u=u.withHeight(25);var fa=this.ui.header,Qa=this.ui.contentsWrapper,Ua=this.ui.windowControls.bounds().right()+3,Gb=u.withLeftCenter(Xd.pt(Ua,
u.height/2));P.position=Xd.pt(0,0);O.textBounds().width<u.width-2*Ua?O.center=u.center():O.leftCenter=Gb.leftCenter();!this.minimized&&this.targetMorph&&this.targetMorph.isLayoutable&&this.targetMorph.setBounds(this.targetMorphBounds());fa.width=this.width;Qa.extent=this.extent}},{key:"ensureNotOverTheTop",value:function(){var u=this,O=this.world();if(O){var P=this.globalBounds();O.withTopBarDo(function(fa){P.top()<fa.height&&u.moveBy(Xd.pt(0,fa.height-P.top()))})}}},{key:"buildHeader",value:function(){return Xd.morph({name:"header",
extent:Xd.pt(this.width,50),submorphs:[Xd.morph({name:"window controls",styleClasses:["buttonGroup"],submorphs:this.buildButtons()}),this.buildTitleLabel()]})}},{key:"buildButtons",value:function(){var u=this.getSubmorphNamed("close")||Xd.morph({name:"close",styleClasses:["windowButton","closeButton"],tooltip:"close window",submorphs:[Xd.Label.icon("times",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Xd.connect(u,"onMouseDown",this,"close");var O=this.getSubmorphNamed("minimize")||
Xd.morph({name:"minimize",styleClasses:["windowButton","minimizeButton"],tooltip:"collapse window",submorphs:[Xd.Label.icon("minus",{name:"label",styleClasses:["defaultLabelStyle","default"]})]});Xd.connect(O,"onMouseDown",this,"minimized",{updater:function(fa){fa(!this.targetObj.minimized)}});if(this.resizable){var P=this.getSubmorphNamed("menu")||Xd.morph({name:"menu",styleClasses:["windowButton","windowMenuButton"],tooltip:"Open Window Menu",submorphs:[Xd.Label.icon("chevron-down",{name:"label",
styleClasses:["defaultLabelStyle","default"]})]});Xd.connect(P,"onMouseDown",this,"openWindowMenu")}return Xd.arr.compact([u,O,P])}},{key:"buildTitleLabel",value:function(){var u=Xd.morph({padding:Xd.Rectangle.inset(0,2,0,0),styleClasses:["windowTitleLabel"],type:"label",name:"window title",tooltip:"double click to maximize/reset",reactsToPointer:!0,value:""});Xd.connect(this,"onDoubleMouseDown",this,"toggleMaximize",{updater:"($upd, evt) => {\n        if (source.fullContainsWorldPoint(evt.position)) {\n          $upd();\n        }\n      }"});
return this.addMorph(u)}},{key:"resizeBy",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"resizeBy",this).call(this,u);this.relayoutWindowControls()}},{key:"resizeAt",value:function(u){u=yb(u,2);var O=u[0];u=u[1];var P=this.position.extent(this.extent);switch(O){case "right":this.resizeBy(u.withY(0));break;case "bottom right":this.resizeBy(u);break;case "bottom":this.resizeBy(u.withX(0));break;case "left":this.resizeBy(u.withY(0).negated());this.position=Xd.pt(P.x+u.x,P.y);break;case "bottom left":u=
u.scaleByPt(Xd.pt(-1,1));this.resizeBy(u);this.position=Xd.pt(P.x-u.x,P.y);break;case "top":O=P.x;var fa=P.y+u.y;var Qa=P.width;u=P.height-u.y;this.setBounds(new Xd.Rectangle(O,fa,Qa,u));break;case "top left":O=P.x+u.x;fa=P.y+u.y;Qa=P.width-u.x;u=P.height-u.y;this.setBounds(new Xd.Rectangle(O,fa,Qa,u));break;case "top right":O=P.x,fa=P.y+u.y,Qa=P.width+u.x,u=P.height-u.y,this.setBounds(new Xd.Rectangle(O,fa,Qa,u))}this.relayoutResizer()}},{key:"relayoutResizer",value:function(){try{var u=this.getSubmorphNamed("resizer"),
O=this.resizerInset,P=this.resizerOutset,fa=yb(u.submorphs,8),Qa=fa[0],Ua=fa[1],Gb=fa[2],ta=fa[3],mc=fa[4],pc=fa[5],zd=fa[6],Pd=fa[7];Qa.height=this.height+P;Qa.bottomRight=this.extent.subXY(P,O+P);pc.bottomRight=this.extent.subXY(P,P);Ua.height=this.height+P;Ua.bottomLeft=Xd.pt(P,this.height-(O+P));mc.bottomLeft=Xd.pt(P,this.height-P);Gb.width=this.width+P;Gb.bottomLeft=Xd.pt(O+P,this.height-P);ta.width=this.width+P;ta.height=O;ta.bottomLeft=Xd.pt(O+P,O+P);zd.topLeft=Xd.pt(P,P);Pd.topRight=Xd.pt(this.width-
P,P);u.position=Xd.pt(0,0)}catch(bd){}}},{key:"buildResizer",value:function(){var u,O,P,fa,Qa,Ua,Gb;var ta=Xd.Color.transparent;var mc=this.resizerInset;mc=Xd.morph({name:"resizer",fill:ta,position:Xd.pt(0,0),submorphs:[u=Xd.morph({name:"right resizer",fill:ta,width:mc,draggable:!0,nativeCursor:"ew-resize"}),P=Xd.morph({name:"left resizer",fill:ta,width:mc,draggable:!0,nativeCursor:"ew-resize"}),Qa=Xd.morph({name:"bottom resizer",draggable:!0,fill:ta,height:mc,nativeCursor:"ns-resize"}),Ua=Xd.morph({name:"top resizer",
draggable:!0,fill:ta,height:mc/4,nativeCursor:"ns-resize"}),fa=Xd.morph({name:"bottom left resizer",draggable:!0,fill:ta,extent:Xd.pt(mc,mc),nativeCursor:"nesw-resize"}),O=Xd.morph({name:"bottom right resizer",fill:ta,extent:Xd.pt(mc,mc),draggable:!0,nativeCursor:"nwse-resize"}),Gb=Xd.morph({name:"top left resizer",draggable:!0,fill:ta,extent:Xd.pt(mc,mc),nativeCursor:"nwse-resize"}),ta=Xd.morph({name:"top rigth resizer",draggable:!0,fill:ta,extent:Xd.pt(mc,mc),nativeCursor:"nesw-resize"})]});Xd.connect(Ua,
"onDrag",this,"resizeAt",{converter:function(pc){return["top",pc.state.dragDelta]}});Xd.connect(ta,"onDrag",this,"resizeAt",{converter:function(pc){return["top right",pc.state.dragDelta]}});Xd.connect(Gb,"onDrag",this,"resizeAt",{converter:function(pc){return["top left",pc.state.dragDelta]}});Xd.connect(O,"onDrag",this,"resizeAt",{converter:function(pc){return["bottom right",pc.state.dragDelta]}});Xd.connect(u,"onDrag",this,"resizeAt",{converter:function(pc){return["right",pc.state.dragDelta]}});
Xd.connect(Qa,"onDrag",this,"resizeAt",{converter:function(pc){return["bottom",pc.state.dragDelta]}});Xd.connect(P,"onDrag",this,"resizeAt",{converter:function(pc){return["left",pc.state.dragDelta]}});Xd.connect(fa,"onDrag",this,"resizeAt",{converter:function(pc){return["bottom left",pc.state.dragDelta]}});this.addMorph(mc);this.relayoutResizer();return mc}},{key:"toggleMaximize",value:function(){this.minized||(this.maximized=!this.maximized)}},{key:"applyMaximize",value:function(){this.maximized?
$world.execCommand("resize active window",{window:this,how:"full"}):$world.execCommand("resize active window",{window:this,how:"reset"})}},{key:"toggleMinimize",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){return regeneratorRuntime.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:this.minimized=!this.minimized;case 1:case "end":return fa.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"applyMinimize",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa=
this,Qa,Ua,Gb,ta,mc,pc,zd,Pd,bd,Yd,le,Be;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(this.targetMorph){Ne.next=2;break}return Ne.abrupt("return");case 2:Qa=this.nonMinizedBounds,Ua=this.minimized,Gb=this.width,ta=this.ui,mc=ta.windowTitle,pc=ta.resizer,zd=this.bounds(),Pd=this.getSubmorphNamed("minimize"),bd=Xd.easings.outQuad,Ua?(this.clipMode="hidden",this.nonMinizedBounds=zd,Yd=(this.minimizedBounds||zd).withExtent(Xd.pt(Gb,28)),le=mc.textBounds(),Be=this.get("window controls").bounds().right()+
3,le.width+2*Be<Yd.width&&(Yd=Yd.withWidth(le.width+Be+5)),this.minimizedBounds=Yd,Pd.tooltip="uncollapse window",this.animate({styleClasses:["minimized","active"].concat(ba(Xd.arr.without(this.styleClasses,"neutral"))),bounds:Yd,duration:100,easing:bd}).then(function(){fa.targetMorph&&(fa.targetMorph.isComponent?fa.targetMorph.top=fa.height:fa.targetMorph.visible=!1)})):(this.minimizedBounds=zd,this.withMetaDo({metaInteraction:!0},function(){fa.targetMorph&&(fa.targetMorph.visible=!0)}),Qa=this.world().visibleBoundsExcludingTopBar().translateForInclusion(Qa||
zd),this.animate({bounds:Qa,styleClasses:["neutral","active"].concat(ba(Xd.arr.without(this.styleClasses,"minimzed"))),duration:100,easing:bd}).then(function(){return fa.clipMode="visible"}),Pd.tooltip="collapse window"),mc.reactsToPointer=!this.minimized,pc.visible=!this.minimized,this.withAnimationDo(function(){fa.relayoutWindowControls();fa.relayoutResizer()},{duration:100,easing:bd});case 12:case "end":return Ne.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"setBounds",
value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"setBounds",this).call(this,u);this.relayoutResizer();this.relayoutWindowControls()}},{key:"close",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa,Qa,Ua;return regeneratorRuntime.wrap(function(Gb){for(;;)switch(Gb.prev=Gb.next){case 0:if(!this.targetMorph||"function"!==typeof this.targetMorph.onWindowClose){Gb.next=4;break}Gb.next=3;return this.targetMorph.onWindowClose();case 3:fa=Gb.sent;case 4:if(!1!==fa){Gb.next=
6;break}return Gb.abrupt("return");case 6:Qa=this.world(),this.deactivate(),this.remove(),(Ua=Qa.activeWindow()||Xd.arr.last(Qa.getWindows()))&&Ua.activate(),Xd.signal(this,"windowClosed",this);case 12:case "end":return Gb.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"onMouseUp",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onMouseUp",this).call(this,u);this.minimized||(this.ui.resizer.visible=!0)}},{key:"onMouseDown",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),
"onMouseDown",this).call(this,u);this.activate(u);this.minimized||this.ui.resizer.submorphs.includes(u.targetMorph)||(this.ui.resizer.visible=!1)}},{key:"onDragStart",value:function(u){var O=this;Ac._get(Object.getPrototypeOf(ma.prototype),"onDragStart",this).call(this,u);this.targetMorph&&(u.state.origReactsToPointer=this.targetMorph.reactsToPointer,this.withMetaDo({metaInteraction:!0},function(){O.targetMorph.reactsToPointer=!1}))}},{key:"onDragEnd",value:function(u){var O=this;Ac._get(Object.getPrototypeOf(ma.prototype),
"onDragEnd",this).call(this,u);this.targetMorph&&this.withMetaDo({metaInteraction:!0},function(){O.targetMorph.reactsToPointer=u.state.origReactsToPointer});this.minimized||(this.ui.resizer.visible=!0)}},{key:"onDrag",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onDrag",this).call(this,u);this.ensureNotOverTheTop()}},{key:"focus",value:function(){var u=this.world(),O=this.targetMorph;u&&O&&(!u.focusedMorph||u.focusedMorph!==O&&!O.isAncestorOf(u.focusedMorph))&&O.focus()}},{key:"isActive",
value:function(){var u=this.world();return u&&"bold"===this.ui.windowTitle.fontWeight?Xd.arr.last(u.getWindows())===this:!1}},{key:"activate",value:function(){var u=this;if(!this.isFaderActive()){this.targetMorph.onWindowActivated();if(this.isActive())return this.bringToFront(),this.focus(),this.renderOnGPU=!0,this.relayoutWindowControls(),this;this.master.whenApplied().then(function(){u.master={auto:Xd.DefaultWindow}});this.world()?this.bringToFront():this.openInWorldNearHand();var O=this.world()||
this.env.world;Xd.arr.without(O.getWindows(),this).forEach(function(P){return P.deactivate()});this.focus();Xd.signal(this,"windowActivated",this);Promise.resolve(this.master.applyIfNeeded(!0)).then(function(){return u.relayoutWindowControls()});return this}}},{key:"deactivate",value:function(){var u=this;this.targetMorph.onWindowDeactivated();this.master&&this.master.auto===Xd.DefaultWindowInactive||(this.master.whenApplied().then(function(){u.master={auto:Xd.DefaultWindowInactive}}),this.relayoutWindowControls(),
this.renderOnGPU=!1)}},{key:"keybindings",get:function(){return Ac._get(Object.getPrototypeOf(ma.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Shift-L R E N",win:"Ctrl-Shift-L R E N"},command:"[window] change title"}])}},{key:"commands",get:function(){return Ac._get(Object.getPrototypeOf(ma.prototype),"commands",this).concat([{name:"[window] change title",exec:function(){var u=Xa(regeneratorRuntime.mark(function fa(P){var Qa,Ua,Gb=arguments;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=
ta.next){case 0:Qa=1<Gb.length&&void 0!==Gb[1]?Gb[1]:{};ta.t0=Qa.title;if(ta.t0){ta.next=6;break}ta.next=5;return P.world().prompt("Enter new title",{input:P.title,historyId:"lively.morphic-window-title-hist"});case 5:ta.t0=ta.sent;case 6:if(Ua=ta.t0)P.title=Ua;return ta.abrupt("return",!0);case 9:case "end":return ta.stop()}},fa)}));return function(P){return u.apply(this,arguments)}}()}])}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Window"}},{key:"properties",get:function(){return{submorphs:{initialize:function(){this.build()}},
position:{set:function(u){this.setProperty("position",u.roundTo(1))}},ui:{derived:!0,get:function(){return{header:this.get("header"),resizer:this.get("resizer"),windowControls:this.get("window controls"),windowTitle:this.get("window title"),contentsWrapper:this.get("contents wrapper")}}},master:{before:["extent"],initialize:function(){this.master={auto:Xd.DefaultWindow}}},styleClasses:{defaultValue:["active"]},clipMode:{defaultValue:"visible"},resizable:{defaultValue:!0},resizerInset:{readOnly:!0,
get:function(){return 10}},resizerOutset:{readOnly:!0,get:function(){return.75*-this.resizerInset}},title:{after:["submorphs"],derived:!0,get:function(){return this.ui.windowTitle.textString},set:function(u){var O=this;return Xa(regeneratorRuntime.mark(function fa(){var Qa,Ua,Gb,ta,mc,pc,zd,Pd;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:Qa="string"===typeof u?[u,{}]:u,Ua=100,Gb=0,ta=[],mc=0;case 5:if(!(mc<Qa.length)){bd.next=17;break}pc=Qa[mc];zd=Qa[mc+1];pc=
pc.replace(/\n/g,"");Pd=pc.length+Gb-Ua;0<Pd&&(pc=pc.slice(0,-Pd));ta.push(pc,zd||{});if(!(Gb>=Ua)){bd.next=14;break}return bd.abrupt("break",17);case 14:mc+=2;bd.next=5;break;case 17:return O.ui.windowTitle.value=ta,bd.next=20,O.whenRendered();case 20:O.ui.windowTitle.reactsToPointer=!1,O.relayoutWindowControls();case 22:case "end":return bd.stop()}},fa)}))()}},targetMorph:{after:["submorphs"],derived:!0,get:function(){return Xd.arr.withoutAll(this.ui.contentsWrapper.submorphs,[this.get("header")])[0]},
set:function(u){var O=this.ui.contentsWrapper,P=[this.get("header")];Xd.arr.withoutAll(O.submorphs,P).forEach(function(fa){return fa.remove()});u&&O.addMorph(u);this.relayoutWindowControls()}},minimizedBounds:{serialize:!1},nonMinizedBounds:{},nonMaximizedBounds:{},minimized:{set:function(u){this.setProperty("minimized",u);this.applyMinimize()}},maximized:{set:function(u){this.setProperty("maximized",u);this.applyMaximize()}}}}}],ca,{pathInPackage:function(){return"./window.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:357,end:22571})}(Xd.Morph));Xd["default"]=fe;var oc=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js");oc.List=qb;oc.FilterableList=va;oc.RadioButtonGroup=Ga;oc.ShadowObject=Fd;oc.TilingLayout=ia;oc.InputLine=gd;oc.PasswordInputLine=ka;oc.Ellipse=K;oc.HorizontalLayout=vd;oc.Text=Pc;oc.VerticalLayout=ya;oc.Icon=nd;oc.Label=ic;oc.component=
sb;oc.ViewModel=Nd;oc.add=pb;oc.part=hb;oc.Color=Jc;oc.rect=Xb;oc.pt=Tc;oc.ButtonDefault=sa;oc.InputLineDefault=Db;oc.arr=Bb;oc.promise=Cb;Db=Lc("A",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("AbstractPromptModel")&&"function"===typeof ca.AbstractPromptModel?ca.AbstractPromptModel:ca.AbstractPromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:"viewDidLoad",value:function(){this.view.hasFixedPosition=!0}},{key:"focus",value:function(){this.view.focus()}},{key:"resolve",value:function(u){return this.answer.resolve(u)}},{key:"reject",value:function(){return this.answer.resolve(0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0)}},{key:"activate",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa=this;return regeneratorRuntime.wrap(function(Qa){for(;;)switch(Qa.prev=Qa.next){case 0:this.focus();
this.answer=oc.promise.deferred();this._isActive=!0;oc.promise["finally"](this.answer.promise,function(){return fa._isActive=!1});if(this.autoRemove)oc.promise["finally"](this.answer.promise,function(){return fa.view.fadeOut(200)});return Qa.abrupt("return",this.answer.promise);case 6:case "end":return Qa.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"isActive",value:function(){return!!this.world()&&this._isActive}},{key:"keybindings",get:function(){return[{keys:"Enter",
command:"resolve"},{keys:"Escape",command:"reject"},{keys:{mac:"Meta-."},command:"reject"}]}},{key:"commands",get:function(){var u=this;return[{name:"resolve",exec:function(O,P){u.resolve(P);return!0}},{name:"reject",exec:function(O,P){u.reject(P);return!0}}]}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"AbstractPromptModel"}},{key:"properties",get:function(){return{_isActive:{defaultValue:!1},autoRemove:{defaultValue:!0},answer:{defaultValue:null,derived:!0},label:{defaultValue:"A prompt title",
set:function(u){this.setProperty("label",u);this.view&&(this.ui.promptTitle.value=u)}},isPrompt:{get:function(){return!0}},expose:{get:function(){return["keybindings","commands","activate","isActive","isPrompt"]}}}}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:464,end:2304})}(oc.ViewModel));
oc.AbstractPromptModel=Db;oc.AbstractPromptModel=Db;va=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("InformPromptModel")&&"function"===typeof ca.InformPromptModel?ca.InformPromptModel:ca.InformPromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"viewDidLoad",value:function(){Ac._get(Object.getPrototypeOf(ma.prototype),
"viewDidLoad",this).call(this);var u=this.view,O=this.ui.promptTitle;O.lineWrapping=this.lineWrapping;O.textString=this.label;this.lineWrapping||(u.opacity=0,u.whenRendered().then(function(){if(O.document){var P=u.center;u.width=Math.max(u.width,O.document.width+100);u.align(u.center,P)}u.opacity=1}))}},{key:"keybindings",get:function(){return Ac._get(Object.getPrototypeOf(ma.prototype),"keybindings",this).concat([{keys:"Escape",command:"resolve"}])}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"InformPromptModel"}},
{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},bindings:{get:function(){return[{model:"ok button",signal:"fire",handler:"resolve"}]}}}}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:2312,end:3352})}(oc.AbstractPromptModel);oc.InformPromptModel=va;
oc.InformPromptModel=va;Od=Lc("C",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("ConfirmPromptModel")&&"function"===typeof ca.ConfirmPromptModel?ca.ConfirmPromptModel:ca.ConfirmPromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"expose",get:function(){return["label"].concat(ba(Ac._get(Object.getPrototypeOf(ma.prototype),
"expose",this)))}},{key:"viewDidLoad",value:function(){var u=this;Ac._get(Object.getPrototypeOf(ma.prototype),"viewDidLoad",this).call(this);var O=this.ui,P=O.promptTitle,fa=O.okButton;O=O.cancelButton;var Qa=this.view;P.value=this.label;fa.label=this.confirmLabel;O.label=this.rejectLabel;this.forceConfirm&&O.disable();P.lineWrapping=this.lineWrapping;this.lineWrapping||(Qa.opacity=0,Qa.whenRendered().then(function(){P.lineWrapping=u.lineWrapping;var Ua=Qa.center;P.invalidateTextLayout(!0,!0);Qa.width=
Math.max(Qa.width,P.document.width+100);Qa.center=Ua;Qa.opacity=1}))}},{key:"resolve",value:function(){Ac._get(Object.getPrototypeOf(ma.prototype),"resolve",this).call(this,!0)}},{key:"reject",value:function(){Ac._get(Object.getPrototypeOf(ma.prototype),"resolve",this).call(this,!1)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ConfirmPromptModel"}},{key:"properties",get:function(){return{label:{defaultValue:["Confirm\n",{fontWeight:"bold"},"An appropriate message for the user that helps them to understand the situation!",
{fontSize:17,fontWeight:"normal"}]},forceConfirm:{defaultValue:!1},lineWrapping:{defaultValue:!0},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},bindings:{get:function(){return[{model:"ok button",signal:"fire",handler:"resolve"},{model:"cancel button",signal:"fire",handler:"reject"}]}}}}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:3360,end:5147})}(oc.AbstractPromptModel));oc.ConfirmPromptModel=Od;oc.ConfirmPromptModel=Od;Hd=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("MultipleChoicePromptModel")&&"function"===typeof ca.MultipleChoicePromptModel?ca.MultipleChoicePromptModel:ca.MultipleChoicePromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:"resolve",value:function(u){return this.answer.resolve(u||this.ui.choices.value)}},{key:"viewDidLoad",value:function(){Ac._get(Object.getPrototypeOf(ma.prototype),"viewDidLoad",this).call(this);this.ui.choices.choices=this.choices}},{key:"onKeyDown",value:function(u,O){if(/^[0-9]$/.test(O.keyCombo)){var P=this.view.getSubmorphNamed("button "+Number(O.keyCombo));if(P)return P.select(),O.stop()}return u(O)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"MultipleChoicePromptModel"}},
{key:"properties",get:function(){return{choices:{defaultValue:[],set:function(u){this.setProperty("choices",u);var O=this.ui.choices;O&&(O.choices=u)}},bindings:{get:function(){return[{model:"ok button",signal:"fire",handler:"resolve"},{model:"cancel button",signal:"fire",handler:"reject"},{signal:"onKeyDown",handler:"onKeyDown",override:!0}]}}}}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:5155,end:6437})}(oc.ConfirmPromptModel);oc.MultipleChoicePromptModel=Hd;oc.MultipleChoicePromptModel=Hd;Qc=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("TextPromptModel")&&"function"===typeof ca.TextPromptModel?ca.TextPromptModel:ca.TextPromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:"focus",value:function(){this.ui.input.focus()}},{key:"resolve",value:function(){var u=this.ui.input;if(this.validate(u.input))return this.answer.resolve(u.acceptInput());u.indicateError(this.errorMessage)}},{key:"viewDidLoad",value:function(){var u=this.ui,O=u.input,P=this.historyId,fa=this.input,Qa=this.useLastInput,Ua=this.selectInput;u.promptTitle.value=this.label;O&&(O.viewState&&(O.viewState.fastScroll=!1),O.textString=fa||"",P&&Qa&&(u=oc.arr.last(O.inputHistory.items)))&&
(O.textString=u);Ac._get(Object.getPrototypeOf(ma.prototype),"viewDidLoad",this).call(this);O.isPasswordInput||(O.gotoDocumentEnd(),O.scrollCursorIntoView());Ua&&O.selectAll()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"TextPromptModel"}},{key:"properties",get:function(){return{lineWrapping:{defaultValue:!0},errorMessage:{defaultValue:"Invalid Input"},confirmLabel:{defaultValue:"OK"},rejectLabel:{defaultValue:"CANCEL"},historyId:{defaultValue:"text prompt"},input:{defaultValue:""},
selectInput:{defaultValue:!1},useLastInput:{defaultValue:!1},maxWidth:{initialize:function(){this.maxWidth=$world.width-20}},validate:{serialize:!1,initialize:function(){this.validate=function(){return!0}}},bindings:{get:function(){return[{model:"ok button",signal:"fire",handler:"resolve"},{model:"cancel button",signal:"fire",handler:"reject"}]}}}}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:6445,end:8567})}(oc.ConfirmPromptModel);oc.TextPromptModel=Qc;oc.TextPromptModel=Qc;var rf=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("EditPromptModel")&&"function"===typeof ca.EditPromptModel?ca.EditPromptModel:ca.EditPromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:"keybindings",get:function(){return[{keys:{mac:"Meta-Enter|Meta-S",win:"Ctrl-Enter|Ctrl-S"},command:"resolve"},{keys:"Escape",command:"reject"},{keys:"Alt-P|Alt-Up",command:"history back"},{keys:"Alt-N|Alt-Down",command:"history forward"},{keys:"Alt-H",command:"browse history"}]}},{key:"commands",get:function(){var u=this;return Ac._get(Object.getPrototypeOf(ma.prototype),"commands",this).concat([{name:"history back",exec:function(O,P){if(u.historyId){O=u.ui.editor;
P=oc.InputLine.getHistory(u.historyId);var fa=P.items,Qa=P.index;P.index=--Qa;0>Qa&&(P.index=Qa=fa.length-1);O.undoManager.group();O.textString=fa[Qa];O.undoManager.group()}return!0}},{name:"browse history",exec:function(){var O=Xa(regeneratorRuntime.mark(function Ua(fa,Qa){var Gb,ta,mc,pc,zd,Pd;return regeneratorRuntime.wrap(function(bd){for(;;)switch(bd.prev=bd.next){case 0:if(!u.historyId){bd.next=10;break}Gb=oc.InputLine.getHistory(u.historyId);bd.next=4;return u.world().editListPrompt("input history "+
u.historyId,Gb.items,{requester:u.view});case 4:ta=bd.sent,mc=ta.status,pc=ta.list,zd=yb(ta.selections,1),Pd=zd[0],"canceled"!==mc&&(Gb.items=pc,oc.InputLine.setHistory(u.historyId,Gb),Pd&&(Gb.index=Gb.items.indexOf(Pd),u.ui.editor.textString=Pd));case 10:return bd.abrupt("return",!0);case 11:case "end":return bd.stop()}},Ua)}));return function(fa,Qa){return O.apply(this,arguments)}}()},{name:"history forward",exec:function(O,P){if(u.historyId){O=u.ui.editor;P=oc.InputLine.getHistory(u.historyId);
var fa=P.items,Qa=P.index;P.index=++Qa;Qa>=fa.length&&(P.index=Qa=0);O.undoManager.group();O.textString=fa[Qa];O.undoManager.group()}return!0}}])}},{key:"focus",value:function(){this.ui.editor.focus()}},{key:"viewDidLoad",value:function(){var u=this.textStyle,O=this.input,P=this.mode,fa=this.evalEnvironment,Qa=this.view,Ua=this.ui.editor;Qa.hasFixedPosition=!0;P&&!u.fontFamily&&(u.fontFamily="Monaco, monospace");Ua.value=O||"";Object.assign(Ua,u);Ua.changeEditorMode(P).then(function(){fa&&Ua.editorPlugin&&
Object.assign(Ua.editorPlugin.evalEnvironment,fa)});u=Ua.textBounds().width+50;u>Qa.width-25&&(Qa.width=Math.min(Qa.maxWidth,u+125));Ua.gotoDocumentEnd();Ua.scrollCursorIntoView()}},{key:"resolve",value:function(u){if(this.resolveTextAttributes)return Ac._get(Object.getPrototypeOf(ma.prototype),"resolve",this).call(this,this.ui.editor.textAndAttributes);var O=this.ui.editor.textString.trim();if(this.historyId){u=oc.InputLine.getHistory(this.historyId);u.items=u.items.filter(function(P){return P!==
O});for(u.items.push(O);u.items.length>u.items.max;)u.items.shift();u.index=u.items.length;oc.InputLine.setHistory(this.historyId,u)}return Ac._get(Object.getPrototypeOf(ma.prototype),"resolve",this).call(this,O)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"EditPromptModel"}},{key:"properties",get:function(){return{textStyle:{defaultValue:{}},historyId:{defaultValue:"edit prompt"},maxWidth:{initialize:function(){this.maxWidth=$world.visibleBounds().width-20}},bindings:{get:function(){return[{model:"ok button",
signal:"fire",handler:"resolve"},{model:"cancel button",signal:"fire",handler:"reject"},{signal:"focus",handler:"focus",override:!0}]}}}}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:8575,end:13035})}(oc.TextPromptModel);oc.EditPromptModel=rf;oc.EditPromptModel=rf;var Dd=
function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("PasswordPromptModel")&&"function"===typeof ca.PasswordPromptModel?ca.PasswordPromptModel:ca.PasswordPromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"resolve",value:function(){return Ac._get(Object.getPrototypeOf(ma.prototype),"resolve",this).call(this,
this.ui.input.acceptInput())}},{key:"focus",value:function(){var u=this.ui.input;u.whenRendered().then(function(){return u.focus()})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"PasswordPromptModel"}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:13043,
end:13339})}(oc.TextPromptModel);oc.PasswordPromptModel=Dd;oc.PasswordPromptModel=Dd;var ld=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("ListPromptModel")&&"function"===typeof ca.ListPromptModel?ca.ListPromptModel:ca.ListPromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"bindings",get:function(){return[].concat(ba(Ac._get(Object.getPrototypeOf(ma.prototype),
"bindings",this)),[{target:"prompt list",signal:"selection",handler:"onSelection"},{target:"prompt list",signal:"accepted",handler:"resolve"},{target:"prompt list",signal:"reject",handler:"reject"},{target:"prompt list",signal:"updateFilter",handler:"onFilter"}])}},{key:"focus",value:function(){this.ui.promptList.focus()}},{key:"reset",value:function(){this.items=[]}},{key:"viewDidLoad",value:function(){Ac._get(Object.getPrototypeOf(ma.prototype),"viewDidLoad",this).call(this);var u=this.multiSelect,
O=this.historyId,P=this.useLastInput,fa=this.filterable,Qa=this.items,Ua=this.fuzzy,Gb=this.filterFunction,ta=this.sortFunction,mc=this.actions,pc=this.selectedAction,zd=this.ui,Pd=zd.promptList,bd=zd.input;zd.promptTitle.value=this.label;Object.assign(Pd,{multiSelect:u,historyId:O,useLastInput:P});Pd.whenRendered().then(function(){Pd.items=Qa});bd.visible=!!fa;fa&&Ua&&(Pd.fuzzy=Ua);fa&&"function"===typeof Gb&&(Pd.filterFunction=Gb);fa&&"function"===typeof ta&&(Pd.sortFunction=ta);fa&&mc&&(Pd.actions=
mc);fa&&pc&&(Pd.selectedAction=pc)}},{key:"onRefresh",value:function(u){"items"===u&&(this.ui.promptList.items=this.items)}},{key:"resolve",value:function(u){var O=this.ui.promptList;u=u||O instanceof oc.FilterableList?O.acceptInput():{selected:O.selections,status:"accepted",actions:"default"};return this.answer.resolve(u)}},{key:"reject",value:function(){return this.answer.resolve({prompt:this,selected:[],filtered:[],status:"canceled"})}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ListPromptModel"}},
{key:"properties",get:function(){return{items:{defaultValue:[]},multiSelect:{defaultValue:!1},filterable:{defaultValue:!1},padding:{defaultValue:oc.rect(0,0,0,0)},preselect:{defaultValue:0},onSelection:{defaultValue:function(){}},actions:{defaultValue:[]},selectedAction:{},fuzzy:{defaultValue:!1},filterFunction:{},sortFunction:{},onFilter:{defaultValue:function(){}}}}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:13347,end:16123})}(oc.TextPromptModel);oc.ListPromptModel=ld;oc.ListPromptModel=ld;var Td=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/prompts.cp.js"),ma=ca.hasOwnProperty("EditListPromptModel")&&"function"===typeof ca.EditListPromptModel?ca.EditListPromptModel:ca.EditListPromptModel=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,
arguments)};return Ac(ma,wa,[{key:"resolve",value:function(){var u=this.ui.promptList,O=u.selections;return this.answer.resolve({list:u.items.map(function(P){return P.value}),selections:O})}},{key:"reject",value:function(){return this.answer.resolve({list:[],selections:[],status:"canceled"})}},{key:"bindings",get:function(){return[].concat(ba(Ac._get(Object.getPrototypeOf(ma.prototype),"bindings",this)),[{model:"add item button",signal:"fire",handler:"addItemToList"},{model:"remove item button",signal:"fire",
handler:"removeSelectedItemsFromList"}])}},{key:"keybindings",get:function(){return Ac._get(Object.getPrototypeOf(ma.prototype),"keybindings",this).concat([{keys:{mac:"Meta-Enter",win:"Ctrl-Enter"},command:"resolve"},{keys:"Ctrl-G",command:"deselect"},{keys:"Shift-=|+",command:"add item to list"},{keys:"Delete|-|Backspace",command:"remove item from list"}])}},{key:"commands",get:function(){var u=this;return Ac._get(Object.getPrototypeOf(ma.prototype),"commands",this).concat([{name:"deselect",exec:function(){u.ui.list.selection=
null;return!0}},{name:"add item to list",exec:function(){u.addItemToList();return!0}},{name:"remove item from list",exec:function(){u.removeSelectedItemsFromList();return!0}}])}},{key:"removeSelectedItemsFromList",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa,Qa;return regeneratorRuntime.wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:fa=this.ui.promptList,Qa=1!==fa.selectedItems.length?-1:0===fa.selectedIndex?0:fa.selectedIndex-1,fa.items=oc.arr.withoutAll(fa.items,
fa.selectedItems),0>Qa?fa.selection=null:fa.selectedIndex=Qa,fa.focus();case 5:case "end":return Ua.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()},{key:"addItemToList",value:function(){var u=Xa(regeneratorRuntime.mark(function P(){var fa,Qa,Ua,Gb;return regeneratorRuntime.wrap(function(ta){for(;;)switch(ta.prev=ta.next){case 0:return fa=this.ui.promptList,Qa=fa.selection?fa.items[fa.selectedIndex].string:"",ta.next=4,this.world().prompt("Input to add to the list",{historyId:this.historyId||
"EditListPrompt-input-history",requester:this.view,input:Qa});case 4:if(Ua=ta.sent){ta.next=7;break}return ta.abrupt("return");case 7:fa=this.ui.list,Gb=fa.selection?fa.selectedIndex+1:fa.items.length,fa.addItemAt(Ua,Gb),fa.focus(),fa.selectedIndex=Gb;case 12:case "end":return ta.stop()}},P,this)}));return function(){return u.apply(this,arguments)}}()}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"EditListPromptModel"}}],ca,{pathInPackage:function(){return"./prompts.cp.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},
subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:16131,end:18559})}(oc.ListPromptModel);oc.EditListPromptModel=Td;oc.EditListPromptModel=Td;oc.RedButton=oc.component["for"](function(){return oc.component(oc.ButtonDefault,{name:"red button",borderWidth:0,dropShadow:new oc.ShadowObject({distance:3,color:oc.Color.rgba(0,0,0,.26),blur:10}),extent:oc.pt(94,38),fill:oc.Color.rgb(231,76,60),submorphs:[{type:oc.Label,
name:"label",fontColor:oc.Color.rgb(253,254,254),fontFamily:"IBM Plex Sans",fontSize:14,fontWeight:"bold",position:oc.pt(20,10),reactsToPointer:!1,textAndAttributes:["CANCEL",null]}]})},{module:"lively.components/prompts.cp.js","export":"RedButton",range:{start:18594,end:19103}},oc.RedButton);oc.RedButtonClicked=oc.component["for"](function(){return oc.component(oc.RedButton,{name:"red button clicked",fill:oc.Color.rgb(177,57,44)})},{module:"lively.components/prompts.cp.js","export":"RedButtonClicked",
range:{start:19111,end:19216}},oc.RedButtonClicked);oc.GreenButton=oc.component["for"](function(){return oc.component(oc.ButtonDefault,{name:"green button",borderWidth:0,dropShadow:new oc.ShadowObject({distance:3,color:oc.Color.rgba(0,0,0,.26),blur:10}),extent:oc.pt(90,38),fill:oc.Color.rgb(62,207,142),submorphs:[{type:oc.Label,name:"label",fontColor:oc.Color.rgb(253,254,254),fontFamily:"IBM Plex Sans",fontSize:14,fontWeight:"bold",position:oc.pt(35,10),reactsToPointer:!1,textAndAttributes:["OK",
null]}]})},{module:"lively.components/prompts.cp.js","export":"GreenButton",range:{start:19254,end:19764}},oc.GreenButton);oc.GreenButtonClicked=oc.component["for"](function(){return oc.component(oc.GreenButton,{name:"green button clicked",fill:oc.Color.rgb(40,155,104)})},{module:"lively.components/prompts.cp.js","export":"GreenButtonClicked",range:{start:19772,end:19884}},oc.GreenButtonClicked);oc.PlainButton=oc.component["for"](function(){return oc.component(oc.ButtonDefault,{name:"plain button",
borderWidth:0,dropShadow:new oc.ShadowObject({distance:1,color:oc.Color.rgba(0,0,0,.26)}),extent:oc.pt(40,37),fill:oc.Color.rgb(202,207,210),submorphs:[{type:oc.Label,name:"label",fontColor:oc.Color.rgb(253,254,254),fontFamily:"IBM Plex Sans",fontSize:14,fontWeight:"bold",position:oc.pt(13.5,11.5),reactsToPointer:!1,textAndAttributes:oc.Icon.textAttribute("plus")}]})},{module:"lively.components/prompts.cp.js","export":"PlainButton",range:{start:19928,end:20443}},oc.PlainButton);oc.PlainButtonClicked=
oc.component["for"](function(){return oc.component(oc.PlainButton,{name:"plain button clicked",fill:oc.Color.rgb(127,140,141)})},{module:"lively.components/prompts.cp.js","export":"PlainButtonClicked",range:{start:20451,end:20564}},oc.PlainButtonClicked);oc.ChoiceButtonSelected=oc.component["for"](function(){return oc.component({name:"choice button Selected",acceptsDrops:!1,borderColor:oc.Color.rgb(204,204,204),borderRadius:4,dropShadow:new oc.ShadowObject({distance:3,rotation:75,color:oc.Color.rgba(0,
0,0,.2)}),extent:oc.pt(371.5,47),layout:new oc.HorizontalLayout({align:"center",autoResize:!1,direction:"leftToRight",orderByIndex:!0,padding:{height:0,width:0,x:12,y:12},reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:12}),nativeCursor:"pointer",selected:!0,selectionColor:oc.Color.rgb(52,152,219),submorphs:[{type:oc.Ellipse,name:"indicator",borderColor:oc.Color.rgb(204,204,204),borderWidth:1,dropShadow:new oc.ShadowObject({distance:3,rotation:75,color:oc.Color.rgba(0,0,0,
.2)}),extent:oc.pt(12,12),fill:oc.Color.rgb(52,152,219),isEllipse:!0,nativeCursor:"pointer",origin:oc.pt(6,6)},{type:oc.Label,name:"label",fontSize:15,reactsToPointer:!1,textAndAttributes:[].concat(ba(oc.Icon.textAttribute("external-link-alt")),["  Import existing package"])}]})},{module:"lively.components/prompts.cp.js","export":"ChoiceButtonSelected",range:{start:20617,end:21903}},oc.ChoiceButtonSelected);oc.ChoiceButtonUnselected=oc.component["for"](function(){return oc.component(oc.ChoiceButtonSelected,
{name:"choice button unselected",opacity:.5,submorphs:[{name:"indicator",fill:oc.Color.rgb(255,255,255)},{name:"label",textAndAttributes:[].concat(ba(oc.Icon.textAttribute("cube")),["  Add Package"])}]})},{module:"lively.components/prompts.cp.js","export":"ChoiceButtonUnselected",range:{start:21952,end:22242}},oc.ChoiceButtonUnselected);oc.LightPrompt=oc.component["for"](function(){return oc.component({name:"light prompt",borderRadius:8,epiMorph:!0,dropShadow:new oc.ShadowObject({distance:5,rotation:75,
color:oc.Color.rgba(0,0,0,.37),blur:60,fast:!1}),extent:oc.pt(387,60),fill:oc.Color.rgb(251,252,252),layout:new oc.VerticalLayout({align:"center",autoResize:!0,direction:"topToBottom",orderByIndex:!0,resizeSubmorphs:!0,spacing:16}),submorphs:[{type:oc.Text,name:"prompt title",extent:oc.pt(355,28),fill:oc.Color.rgba(255,255,255,0),fixedWidth:!0,fontColor:oc.Color.rgb(102,102,102),fontFamily:'"IBM Plex Sans"',fontSize:20,fontWeight:"bold",nativeCursor:"default",padding:oc.rect(20,0,0,0),readOnly:!0,
textAlign:"center",textString:"Hello World!"}]})},{module:"lively.components/prompts.cp.js","export":"LightPrompt",range:{start:22280,end:23150}},oc.LightPrompt);oc.DarkPrompt=oc.component["for"](function(){return oc.component(oc.LightPrompt,{name:"dark prompt",dropShadow:new oc.ShadowObject({distance:5,rotation:75.00000000000001,color:oc.Color.rgba(0,0,0,.5),blur:60,fast:!1}),fill:oc.Color.rgba(0,0,0,.65),submorphs:[{name:"prompt title",fontColor:oc.Color.rgb(253,254,254)}]})},{module:"lively.components/prompts.cp.js",
"export":"DarkPrompt",range:{start:23187,end:23528}},oc.DarkPrompt);oc.InformPrompt=oc.component["for"](function(){return oc.component(oc.LightPrompt,{defaultViewModel:oc.InformPromptModel,name:"inform prompt",extent:oc.pt(249.3,114),submorphs:[{name:"prompt title",lineWrapping:!0,textAndAttributes:["Inform message",null]},oc.add({name:"button wrapper",fill:oc.Color.rgba(0,0,0,0),layout:new oc.HorizontalLayout({align:"center",autoResize:!1,direction:"centered",orderByIndex:!0,reactToSubmorphAnimations:!1,
renderViaCSS:!0,resizeSubmorphs:!1}),submorphs:[oc.part(oc.GreenButton,{name:"ok button",extent:oc.pt(90,38),submorphs:[{name:"label",textString:"OK"}]})]})]})},{module:"lively.components/prompts.cp.js","export":"InformPrompt",range:{start:23567,end:24305}},oc.InformPrompt);oc.ConfirmPrompt=oc.component["for"](function(){return oc.component(oc.LightPrompt,{defaultViewModel:oc.ConfirmPromptModel,name:"confirm prompt",submorphs:[{name:"prompt title",lineWrapping:"by-words",textAndAttributes:["Confirm\n",
{fontWeight:"bold"},"An appropriate message for the user that helps them to understand the situation!",{fontSize:17,fontWeight:"normal"}]},oc.add({name:"button wrapper",extent:oc.pt(331,48.9),fill:oc.Color.rgba(0,0,0,0),layout:new oc.HorizontalLayout({align:"center",autoResize:!1,direction:"centered",orderByIndex:!0,reactToSubmorphAnimations:!1,renderViaCSS:!0,resizeSubmorphs:!1,spacing:20}),submorphs:[oc.part(oc.GreenButton,{name:"ok button",submorphs:[{name:"label",textString:"OK"}]}),oc.part(oc.RedButton,
{name:"cancel button",submorphs:[{name:"label",textString:"CANCEL"}]})]})]})},{module:"lively.components/prompts.cp.js","export":"ConfirmPrompt",range:{start:24345,end:25387}},oc.ConfirmPrompt);oc.MultipleChoicePrompt=oc.component["for"](function(){return oc.component(oc.ConfirmPrompt,{defaultViewModel:oc.MultipleChoicePromptModel,name:"multiple choice prompt",submorphs:[oc.add({type:oc.RadioButtonGroup,name:"choices",extent:oc.pt(387,118),fill:oc.Color.rgba(0,0,0,0),layout:new oc.VerticalLayout({autoResize:!0,
direction:"topToBottom",orderByIndex:!0,resizeSubmorphs:!0,spacing:8}),submorphs:[oc.part(oc.ChoiceButtonUnselected),oc.part(oc.ChoiceButtonSelected)]},"button wrapper")]})},{module:"lively.components/prompts.cp.js","export":"MultipleChoicePrompt",range:{start:25434,end:25963}},oc.MultipleChoicePrompt);oc.TextPrompt=oc.component["for"](function(){return oc.component(oc.ConfirmPrompt,{defaultViewModel:oc.TextPromptModel,name:"text prompt",submorphs:[oc.add(oc.part(oc.InputLineDefault,{name:"input"}),
"button wrapper")]})},{module:"lively.components/prompts.cp.js","export":"TextPrompt",range:{start:26E3,end:26188}},oc.TextPrompt);oc.EditPrompt=oc.component["for"](function(){return oc.component(oc.ConfirmPrompt,{defaultViewModel:oc.EditPromptModel,name:"edit prompt",submorphs:[oc.add({name:"editor",type:oc.Text,master:oc.InputLineDefault,height:300},"button wrapper")]})},{module:"lively.components/prompts.cp.js","export":"EditPrompt",range:{start:26225,end:26453}},oc.EditPrompt);oc.PasswordPrompt=
oc.component["for"](function(){return oc.component(oc.ConfirmPrompt,{defaultViewModel:oc.PasswordPromptModel,name:"password prompt",master:oc.DarkPrompt,submorphs:[{name:"prompt title",lineWrapping:"by-words"},oc.add({name:"input",type:oc.PasswordInputLine,placeholder:"Password",dropShadow:new oc.ShadowObject({distance:4,color:oc.Color.rgba(0,0,0,.26),blur:10}),master:oc.InputLineDefault},"button wrapper")]})},{module:"lively.components/prompts.cp.js","export":"PasswordPrompt",range:{start:26494,
end:26959}},oc.PasswordPrompt);oc.ListPrompt=oc.component["for"](function(){return oc.component(oc.ConfirmPrompt,{defaultViewModel:oc.ListPromptModel,name:"list prompt",extent:oc.pt(441.8,537.2),master:oc.DarkPrompt,submorphs:[{name:"promptTitle",lineWrapping:"by-words"},oc.add({type:oc.FilterableList,name:"prompt list",layout:new oc.TilingLayout({axis:"column",orderByIndex:!0,resizePolicies:[["input",{height:"fixed",width:"fill"}],["list",{height:"fill",width:"fill"}]],spacing:5,wrapSubmorphs:!1}),
borderColor:oc.Color.rgb(204,204,204),borderWidth:0,extent:oc.pt(442,385),selectedAction:"default",submorphs:[{type:oc.InputLine,name:"input",borderRadius:5,dropShadow:new oc.ShadowObject({distance:3,rotation:75,color:oc.Color.rgba(0,0,0,.2)}),extent:oc.pt(355,26),fill:oc.Color.rgba(204,204,204,.8),fixedHeight:!1,fontColor:oc.Color.rgb(102,102,102),fontFamily:'"IBM Plex Sans"',fontSize:16,padding:oc.rect(10,2,0,0)},{type:oc.List,name:"list",borderColor:oc.Color.rgb(149,165,166),borderRadius:4,dropShadow:new oc.ShadowObject({distance:3,
rotation:75,color:oc.Color.rgba(0,0,0,.2)}),extent:oc.pt(410,354),fill:oc.Color.rgba(66,73,73,.85),fontFamily:"Monaco, monospace",itemHeight:16,itemPadding:void 0,manualItemHeight:!0,master:!1,multiSelect:!0,nonSelectionFontColor:oc.Color.rgb(204,204,204),padding:oc.rect(7,6,-4,-3),position:oc.pt(0,31),scroll:oc.pt(2,0),selectedIndex:void 0,selectedIndexes:[],selectionColor:oc.Color.rgb(230,230,230),selectionFontColor:oc.Color.rgb(0,0,0),selections:[]}],theme:"dark"},"button wrapper")]})},{module:"lively.components/prompts.cp.js",
"export":"ListPrompt",range:{start:26996,end:28984}},oc.ListPrompt);oc.EditListPrompt=oc.component["for"](function(){return oc.component(oc.ListPrompt,{defaultViewModel:oc.EditListPromptModel,name:"edit list prompt",submorphs:[{name:"button wrapper",submorphs:[oc.add(oc.part(oc.PlainButton,{name:"add item button"})),oc.add(oc.part(oc.PlainButton,{name:"remove item button",submorphs:[{name:"label",textAndAttributes:oc.Icon.textAttribute("minus")}]}))]}]})},{module:"lively.components/prompts.cp.js",
"export":"EditListPrompt",range:{start:29025,end:29439}},oc.EditListPrompt);var gb=Lc("G",oc.GreenButton),Vc=Lc("R",oc.RedButton),vb=oc.GreenButtonClicked,cc=oc.RedButtonClicked,ob=Lc("P",oc.PlainButton),ac=oc.PlainButtonClicked,ae=Lc("h",oc.LightPrompt),qe=Lc("f",oc.DarkPrompt),lc=oc.InformPrompt,nc=oc.ConfirmPrompt,Yc=oc.ChoiceButtonSelected,fd=oc.ChoiceButtonUnselected,ua=oc.MultipleChoicePrompt,Ab=oc.TextPrompt,Fa=oc.EditPrompt,za=oc.PasswordPrompt,Ka=oc.ListPrompt,Ib=oc.EditListPrompt;oc.GreenButton=
gb;oc.RedButton=Vc;oc.GreenButtonClicked=vb;oc.RedButtonClicked=cc;oc.PlainButton=ob;oc.PlainButtonClicked=ac;oc.LightPrompt=ae;oc.DarkPrompt=qe;oc.InformPrompt=lc;oc.ConfirmPrompt=nc;oc.ChoiceButtonSelected=Yc;oc.ChoiceButtonUnselected=fd;oc.MultipleChoicePrompt=ua;oc.TextPrompt=Ab;oc.EditPrompt=Fa;oc.PasswordPrompt=za;oc.ListPrompt=Ka;oc.EditListPrompt=Ib;Db=Object.freeze({__proto__:null,AbstractPromptModel:Db,InformPromptModel:va,ConfirmPromptModel:Od,MultipleChoicePromptModel:Hd,TextPromptModel:Qc,
EditPromptModel:rf,PasswordPromptModel:Dd,ListPromptModel:ld,EditListPromptModel:Td,GreenButton:gb,RedButton:Vc,GreenButtonClicked:vb,RedButtonClicked:cc,PlainButton:ob,PlainButtonClicked:ac,LightPrompt:ae,DarkPrompt:qe,InformPrompt:lc,ConfirmPrompt:nc,ChoiceButtonSelected:Yc,ChoiceButtonUnselected:fd,MultipleChoicePrompt:ua,TextPrompt:Ab,EditPrompt:Fa,PasswordPrompt:za,ListPrompt:Ka,EditListPrompt:Ib});Lc("p",Db);var C="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global,
Pb={};(function(wa,ca){ca(Pb)})(Pb,function(wa){function ca(cd){"@babel/helpers - typeof";ca="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(Y){return typeof Y}:function(Y){return Y&&"function"===typeof Symbol&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};return ca(cd)}function ma(cd,Y){if(!(cd instanceof Y))throw new TypeError("Cannot call a class as a function");}function u(cd,Y){for(var Ba=0;Ba<Y.length;Ba++){var mb=Y[Ba];mb.enumerable=mb.enumerable||!1;
mb.configurable=!0;"value"in mb&&(mb.writable=!0);Object.defineProperty(cd,mb.key,mb)}}function O(cd,Y,Ba){Y&&u(cd.prototype,Y);Ba&&u(cd,Ba);return cd}function P(cd,Y){var Ba=Array.isArray(cd)?cd:void 0;if(!Ba)if("undefined"!==typeof Symbol&&Symbol.iterator in Object(cd)){Ba=[];var mb=!0,Ca=!1,Cc=void 0;try{for(var Fc=cd[Symbol.iterator](),ud;!(mb=(ud=Fc.next()).done)&&(Ba.push(ud.value),!Y||Ba.length!==Y);mb=!0);}catch(ke){Ca=!0,Cc=ke}finally{try{if(!mb&&null!=Fc["return"])Fc["return"]()}finally{if(Ca)throw Cc;
}}}else Ba=void 0;if(!(cd=Ba||Qa(cd,Y)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return cd}function fa(cd){var Y=Array.isArray(cd)?Ua(cd):void 0;Y||(Y="undefined"!==typeof Symbol&&Symbol.iterator in Object(cd)?Array.from(cd):void 0);if(!(cd=Y||Qa(cd)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return cd}function Qa(cd,Y){if(cd){if("string"===typeof cd)return Ua(cd,Y);var Ba=Object.prototype.toString.call(cd).slice(8,-1);"Object"===Ba&&cd.constructor&&(Ba=cd.constructor.name);if("Map"===Ba||"Set"===Ba)return Array.from(cd);if("Arguments"===Ba||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ba))return Ua(cd,Y)}}function Ua(cd,Y){if(null==Y||Y>cd.length)Y=cd.length;for(var Ba=0,mb=Array(Y);Ba<Y;Ba++)mb[Ba]=cd[Ba];return mb}function Gb(cd){if("undefined"===typeof Symbol||null==cd[Symbol.iterator]){if(Array.isArray(cd)||
(cd=Qa(cd))){var Y=0,Ba=function(){};return{s:Ba,n:function(){return Y>=cd.length?{done:!0}:{done:!1,value:cd[Y++]}},e:function(ud){throw ud;},f:Ba}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var mb,Ca=!0,Cc=!1,Fc;return{s:function(){mb=cd[Symbol.iterator]()},n:function(){var ud=mb.next();Ca=ud.done;return ud},e:function(ud){Cc=!0;Fc=ud},f:function(){try{Ca||null==mb.return||mb.return()}finally{if(Cc)throw Fc;
}}}}function ta(cd){return"number"===typeof cd?cd?0>cd?-1:1:cd===cd?cd:NaN:NaN}function mc(cd,Y,Ba,mb,Ca,Cc,Fc){Ca=Ca*Math.PI/180;var ud=Math.cos(Ca);Ca=Math.sin(Ca);var ke=cd.subtract(Y).multiply(.5),ze=ke.x*ud+ke.y*Ca;ke=ke.x*-Ca+ke.y*ud;Ba=Math.abs(Ba);mb=Math.abs(mb);var xe=ze*ze,qd=ke*ke,We=xe/(Ba*Ba)+qd/(mb*mb);1<We&&(We=Math.sqrt(We),Ba*=We,mb*=We);We=Ba*Ba;var of=mb*mb;qd*=We;xe*=of;xe=(We*of-qd-xe)/(qd+xe);1E-6>Math.abs(xe)&&(xe=0);xe=Math.sqrt(xe);Cc===Fc&&(xe=-xe);cd=cd.add(Y).multiply(.5);
Y=xe*Ba*ke/mb;Cc=xe*-mb*ze/Ba;xe=(ze-Y)/Ba;ze=(ze+Y)/Ba;qd=(ke-Cc)/mb;We=(ke+Cc)/mb;ke=(new le(1,0)).angleBetween(new le(xe,qd));ze=(new le(xe,qd)).angleBetween(new le(-ze,-We));!1===Fc&&(ze-=yf);return[Y*ud-Cc*Ca+cd.x,Y*Ca+Cc*ud+cd.y,Ba,mb,ke,ke+ze]}function pc(cd,Y){var Ba=[];cd=Gb(cd);var mb;try{for(cd.s();!(mb=cd.n()).done;){var Ca=P(mb.value,2),Cc=Ca[0],Fc=Ca[1],ud=null;if("Point2D"===Fc)ud=Pd(Cc,Y);else if("Number"===Fc)ud=zd(Cc,Y);else if("Array<Point2D>"===Fc||"Point2D[]"===Fc){for(var ke=
[];0<Y.length;)ke.push(Pd(Cc,Y));0<ke.length&&(ud=ke)}else if("Optional<Number>"===Fc||"Number?"===Fc)ud=zd(Cc,Y),null===ud&&(ud=void 0);else throw new TypeError("Unrecognized value type: ".concat(Fc));if(null!==ud)Ba.push(ud);else throw new TypeError("Unable to extract value for ".concat(Cc));}}catch(ze){cd.e(ze)}finally{cd.f()}return Ba}function zd(cd,Y){var Ba=null;if(0<Y.length){var mb=Y[0],Ca=ca(mb);if("number"===Ca)return Y.shift();if("object"===Ca){cd=Gb(cd);var Cc;try{for(cd.s();!(Cc=cd.n()).done;){var Fc=
Cc.value;if(Fc in mb&&"number"===typeof mb[Fc]){Ba=mb[Fc];break}}}catch(ud){cd.e(ud)}finally{cd.f()}}}return Ba}function Pd(cd,Y){var Ba=null;0<Y.length&&function(){var mb=Y[0],Ca=ca(mb);if("number"===Ca){if(1<Y.length){var Cc=Y.shift(),Fc=Y.shift();Ba=new Yd(Cc,Fc)}}else if(Array.isArray(mb)&&1<mb.length)if(2===mb.length)Cc=Y.shift(),Cc=P(Cc,2),Ba=new Yd(Cc[0],Cc[1]);else throw new TypeError("Unhandled array of length ".concat(mb.length));else if("object"===Ca)if("x"in mb&&"y"in mb)Ba=new Yd(mb.x,
mb.y),Y.shift();else{Ca=Gb(cd);try{for(Ca.s();!(Cc=Ca.n()).done;)if(Fc=Cc.value,Array.isArray(Fc)){if(Fc.every(function(ud){return ud in mb})){Ba=new Yd(mb[Fc[0]],mb[Fc[1]]);break}}else if(Fc in mb){Ba=Pd([],[mb[Fc]]);break}}catch(ud){Ca.e(ud)}finally{Ca.f()}}}();return Ba}function bd(cd){var Y=cd.slice();Y.push(cd[0]);return Y}var Yd=function(){function cd(){var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Ba=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;ma(this||C,cd);(this||
C).x=Y;(this||C).y=Ba}O(cd,[{key:"clone",value:function(){return new (this||C).constructor((this||C).x,(this||C).y)}},{key:"add",value:function(Y){return new (this||C).constructor((this||C).x+Y.x,(this||C).y+Y.y)}},{key:"subtract",value:function(Y){return new (this||C).constructor((this||C).x-Y.x,(this||C).y-Y.y)}},{key:"multiply",value:function(Y){return new (this||C).constructor((this||C).x*Y,(this||C).y*Y)}},{key:"divide",value:function(Y){return new (this||C).constructor((this||C).x/Y,(this||
C).y/Y)}},{key:"equals",value:function(Y){return(this||C).x===Y.x&&(this||C).y===Y.y}},{key:"precisionEquals",value:function(Y,Ba){return Math.abs((this||C).x-Y.x)<Ba&&Math.abs((this||C).y-Y.y)<Ba}},{key:"lerp",value:function(Y,Ba){var mb=1-Ba;return new (this||C).constructor((this||C).x*mb+Y.x*Ba,(this||C).y*mb+Y.y*Ba)}},{key:"distanceFrom",value:function(Y){var Ba=(this||C).x-Y.x;Y=(this||C).y-Y.y;return Math.sqrt(Ba*Ba+Y*Y)}},{key:"min",value:function(Y){return new (this||C).constructor(Math.min((this||
C).x,Y.x),Math.min((this||C).y,Y.y))}},{key:"max",value:function(Y){return new (this||C).constructor(Math.max((this||C).x,Y.x),Math.max((this||C).y,Y.y))}},{key:"transform",value:function(Y){return new (this||C).constructor(Y.a*(this||C).x+Y.c*(this||C).y+Y.e,Y.b*(this||C).x+Y.d*(this||C).y+Y.f)}},{key:"toString",value:function(){return"point(".concat((this||C).x,",").concat((this||C).y,")")}}]);return cd}(),le=function(){function cd(){var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
0,Ba=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;ma(this||C,cd);(this||C).x=Y;(this||C).y=Ba}O(cd,[{key:"length",value:function(){return Math.sqrt((this||C).x*(this||C).x+(this||C).y*(this||C).y)}},{key:"magnitude",value:function(){return(this||C).x*(this||C).x+(this||C).y*(this||C).y}},{key:"dot",value:function(Y){return(this||C).x*Y.x+(this||C).y*Y.y}},{key:"cross",value:function(Y){return(this||C).x*Y.y-(this||C).y*Y.x}},{key:"determinant",value:function(Y){return(this||C).x*Y.y-(this||
C).y*Y.x}},{key:"unit",value:function(){return this.divide(this.length())}},{key:"add",value:function(Y){return new (this||C).constructor((this||C).x+Y.x,(this||C).y+Y.y)}},{key:"subtract",value:function(Y){return new (this||C).constructor((this||C).x-Y.x,(this||C).y-Y.y)}},{key:"multiply",value:function(Y){return new (this||C).constructor((this||C).x*Y,(this||C).y*Y)}},{key:"divide",value:function(Y){return new (this||C).constructor((this||C).x/Y,(this||C).y/Y)}},{key:"angleBetween",value:function(Y){var Ba=
this.dot(Y)/(this.length()*Y.length());Ba=Math.max(-1,Math.min(Ba,1));Ba=Math.acos(Ba);return 0>this.cross(Y)?-Ba:Ba}},{key:"perp",value:function(){return new (this||C).constructor(-(this||C).y,(this||C).x)}},{key:"perpendicular",value:function(Y){return this.subtract(this.project(Y))}},{key:"project",value:function(Y){var Ba=this.dot(Y)/Y.dot(Y);return Y.multiply(Ba)}},{key:"transform",value:function(Y){return new (this||C).constructor(Y.a*(this||C).x+Y.c*(this||C).y,Y.b*(this||C).x+Y.d*(this||C).y)}},
{key:"equals",value:function(Y){return(this||C).x===Y.x&&(this||C).y===Y.y}},{key:"precisionEquals",value:function(Y,Ba){return Math.abs((this||C).x-Y.x)<Ba&&Math.abs((this||C).y-Y.y)<Ba}},{key:"toString",value:function(){return"vector(".concat((this||C).x,",").concat((this||C).y,")")}}],[{key:"fromPoints",value:function(Y,Ba){return new cd(Ba.x-Y.x,Ba.y-Y.y)}}]);return cd}(),Be=function(){function cd(){var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,Ba=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:0,mb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Ca=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,Cc=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,Fc=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;ma(this||C,cd);(this||C).a=Y;(this||C).b=Ba;(this||C).c=mb;(this||C).d=Ca;(this||C).e=Cc;(this||C).f=Fc}O(cd,[{key:"multiply",value:function(Y){return this.isIdentity()?Y:Y.isIdentity()?this||C:new (this||C).constructor((this||C).a*Y.a+
(this||C).c*Y.b,(this||C).b*Y.a+(this||C).d*Y.b,(this||C).a*Y.c+(this||C).c*Y.d,(this||C).b*Y.c+(this||C).d*Y.d,(this||C).a*Y.e+(this||C).c*Y.f+(this||C).e,(this||C).b*Y.e+(this||C).d*Y.f+(this||C).f)}},{key:"inverse",value:function(){if(this.isIdentity())return this||C;var Y=(this||C).a*(this||C).d-(this||C).b*(this||C).c;if(0===Y)throw Error("Matrix is not invertible");Y=1/Y;return new (this||C).constructor((this||C).d*Y,-(this||C).b*Y,-(this||C).c*Y,(this||C).a*Y,((this||C).f*(this||C).c-(this||
C).e*(this||C).d)*Y,((this||C).e*(this||C).b-(this||C).f*(this||C).a)*Y)}},{key:"translate",value:function(Y,Ba){return new (this||C).constructor((this||C).a,(this||C).b,(this||C).c,(this||C).d,(this||C).a*Y+(this||C).c*Ba+(this||C).e,(this||C).b*Y+(this||C).d*Ba+(this||C).f)}},{key:"scale",value:function(Y){return new (this||C).constructor((this||C).a*Y,(this||C).b*Y,(this||C).c*Y,(this||C).d*Y,(this||C).e,(this||C).f)}},{key:"scaleAt",value:function(Y,Ba){var mb=Ba.x-Y*Ba.x;Ba=Ba.y-Y*Ba.y;return new (this||
C).constructor((this||C).a*Y,(this||C).b*Y,(this||C).c*Y,(this||C).d*Y,(this||C).a*mb+(this||C).c*Ba+(this||C).e,(this||C).b*mb+(this||C).d*Ba+(this||C).f)}},{key:"scaleNonUniform",value:function(Y,Ba){return new (this||C).constructor((this||C).a*Y,(this||C).b*Y,(this||C).c*Ba,(this||C).d*Ba,(this||C).e,(this||C).f)}},{key:"scaleNonUniformAt",value:function(Y,Ba,mb){var Ca=mb.x-Y*mb.x;mb=mb.y-Ba*mb.y;return new (this||C).constructor((this||C).a*Y,(this||C).b*Y,(this||C).c*Ba,(this||C).d*Ba,(this||
C).a*Ca+(this||C).c*mb+(this||C).e,(this||C).b*Ca+(this||C).d*mb+(this||C).f)}},{key:"rotate",value:function(Y){var Ba=Math.cos(Y);Y=Math.sin(Y);return new (this||C).constructor((this||C).a*Ba+(this||C).c*Y,(this||C).b*Ba+(this||C).d*Y,(this||C).a*-Y+(this||C).c*Ba,(this||C).b*-Y+(this||C).d*Ba,(this||C).e,(this||C).f)}},{key:"rotateAt",value:function(Y,Ba){var mb=Math.cos(Y),Ca=Math.sin(Y);Y=Ba.x;Ba=Ba.y;var Cc=(this||C).a*mb+(this||C).c*Ca,Fc=(this||C).b*mb+(this||C).d*Ca,ud=(this||C).c*mb-(this||
C).a*Ca;mb=(this||C).d*mb-(this||C).b*Ca;return new (this||C).constructor(Cc,Fc,ud,mb,((this||C).a-Cc)*Y+((this||C).c-ud)*Ba+(this||C).e,((this||C).b-Fc)*Y+((this||C).d-mb)*Ba+(this||C).f)}},{key:"rotateFromVector",value:function(Y){var Ba=Y.unit();Y=Ba.x;Ba=Ba.y;return new (this||C).constructor((this||C).a*Y+(this||C).c*Ba,(this||C).b*Y+(this||C).d*Ba,(this||C).a*-Ba+(this||C).c*Y,(this||C).b*-Ba+(this||C).d*Y,(this||C).e,(this||C).f)}},{key:"flipX",value:function(){return new (this||C).constructor(-(this||
C).a,-(this||C).b,(this||C).c,(this||C).d,(this||C).e,(this||C).f)}},{key:"flipY",value:function(){return new (this||C).constructor((this||C).a,(this||C).b,-(this||C).c,-(this||C).d,(this||C).e,(this||C).f)}},{key:"skewX",value:function(Y){Y=Math.tan(Y);return new (this||C).constructor((this||C).a,(this||C).b,(this||C).c+(this||C).a*Y,(this||C).d+(this||C).b*Y,(this||C).e,(this||C).f)}},{key:"skewY",value:function(Y){Y=Math.tan(Y);return new (this||C).constructor((this||C).a+(this||C).c*Y,(this||
C).b+(this||C).d*Y,(this||C).c,(this||C).d,(this||C).e,(this||C).f)}},{key:"isIdentity",value:function(){return 1===(this||C).a&&0===(this||C).b&&0===(this||C).c&&1===(this||C).d&&0===(this||C).e&&0===(this||C).f}},{key:"isInvertible",value:function(){return 0!==(this||C).a*(this||C).d-(this||C).b*(this||C).c}},{key:"getScale",value:function(){return{scaleX:Math.sqrt((this||C).a*(this||C).a+(this||C).c*(this||C).c),scaleY:Math.sqrt((this||C).b*(this||C).b+(this||C).d*(this||C).d)}}},{key:"getDecomposition",
value:function(){var Y=.5*((this||C).a+(this||C).d),Ba=.5*((this||C).a-(this||C).d),mb=.5*((this||C).b+(this||C).c),Ca=.5*((this||C).b-(this||C).c),Cc=Math.sqrt(Y*Y+Ca*Ca),Fc=Math.sqrt(Ba*Ba+mb*mb),ud=Cc+Fc;Cc-=Fc;Ba=Math.atan2(mb,Ba);Ca=Math.atan2(Ca,Y);Y=.5*(Ca-Ba);Ca=.5*(Ca+Ba);return{translation:(this||C).constructor.translation((this||C).e,(this||C).f),rotation:(this||C).constructor.rotation(Ca),scale:(this||C).constructor.nonUniformScaling(ud,Cc),rotation0:(this||C).constructor.rotation(Y)}}},
{key:"equals",value:function(Y){return(this||C).a===Y.a&&(this||C).b===Y.b&&(this||C).c===Y.c&&(this||C).d===Y.d&&(this||C).e===Y.e&&(this||C).f===Y.f}},{key:"precisionEquals",value:function(Y,Ba){return Math.abs((this||C).a-Y.a)<Ba&&Math.abs((this||C).b-Y.b)<Ba&&Math.abs((this||C).c-Y.c)<Ba&&Math.abs((this||C).d-Y.d)<Ba&&Math.abs((this||C).e-Y.e)<Ba&&Math.abs((this||C).f-Y.f)<Ba}},{key:"toString",value:function(){return"matrix(".concat((this||C).a,",").concat((this||C).b,",").concat((this||C).c,
",").concat((this||C).d,",").concat((this||C).e,",").concat((this||C).f,")")}}],[{key:"translation",value:function(Y,Ba){return new cd(1,0,0,1,Y,Ba)}},{key:"scaling",value:function(Y){return new cd(Y,0,0,Y,0,0)}},{key:"scalingAt",value:function(Y,Ba){return new cd(Y,0,0,Y,Ba.x-Ba.x*Y,Ba.y-Ba.y*Y)}},{key:"nonUniformScaling",value:function(Y,Ba){return new cd(Y,0,0,Ba,0,0)}},{key:"nonUniformScalingAt",value:function(Y,Ba,mb){return new cd(Y,0,0,Ba,mb.x-mb.x*Y,mb.y-mb.y*Ba)}},{key:"rotation",value:function(Y){var Ba=
Math.cos(Y);Y=Math.sin(Y);return new cd(Ba,Y,-Y,Ba,0,0)}},{key:"rotationAt",value:function(Y,Ba){var mb=Math.cos(Y);Y=Math.sin(Y);return new cd(mb,Y,-Y,mb,Ba.x-Ba.x*mb+Ba.y*Y,Ba.y-Ba.y*mb-Ba.x*Y)}},{key:"rotationFromVector",value:function(Y){var Ba=Y.unit();Y=Ba.x;Ba=Ba.y;return new cd(Y,Ba,-Ba,Y,0,0)}},{key:"xFlip",value:function(){return new cd(-1,0,0,1,0,0)}},{key:"yFlip",value:function(){return new cd(1,0,0,-1,0,0)}},{key:"xSkew",value:function(Y){return new cd(1,0,Math.tan(Y),1,0,0)}},{key:"ySkew",
value:function(Y){return new cd(1,Math.tan(Y),0,1,0,0)}}]);return cd}();Be.IDENTITY=new Be;Be.IDENTITY.isIdentity=function(){return!0};var Ne=function(){function cd(){ma(this||C,cd);(this||C).coefs=[];for(var Y=arguments.length-1;0<=Y;Y--)(this||C).coefs.push(0>Y||arguments.length<=Y?void 0:arguments[Y]);(this||C)._variable="t";(this||C)._s=0}O(cd,[{key:"clone",value:function(){var Y=new cd;Y.coefs=(this||C).coefs.slice();return Y}},{key:"eval",value:function(Y){if(isNaN(Y))throw new TypeError("Parameter must be a number. Found '".concat(Y,
"'"));for(var Ba=0,mb=(this||C).coefs.length-1;0<=mb;mb--)Ba=Ba*Y+(this||C).coefs[mb];return Ba}},{key:"add",value:function(Y){for(var Ba=new cd,mb=this.getDegree(),Ca=Y.getDegree(),Cc=Math.max(mb,Ca),Fc=0;Fc<=Cc;Fc++)Ba.coefs[Fc]=(Fc<=mb?(this||C).coefs[Fc]:0)+(Fc<=Ca?Y.coefs[Fc]:0);return Ba}},{key:"multiply",value:function(Y){for(var Ba=new cd,mb=0;mb<=this.getDegree()+Y.getDegree();mb++)Ba.coefs.push(0);for(mb=0;mb<=this.getDegree();mb++)for(var Ca=0;Ca<=Y.getDegree();Ca++)Ba.coefs[mb+Ca]+=(this||
C).coefs[mb]*Y.coefs[Ca];return Ba}},{key:"divideEqualsScalar",value:function(Y){for(var Ba=0;Ba<(this||C).coefs.length;Ba++)(this||C).coefs[Ba]/=Y}},{key:"simplifyEquals",value:function(){for(var Y=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1E-12,Ba=this.getDegree();0<=Ba;Ba--)if(Math.abs((this||C).coefs[Ba])<=Y)(this||C).coefs.pop();else break}},{key:"removeZerosEquals",value:function(){for(var Y=(this||C).coefs,Ba=10*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1E-15)*Math.abs(Y.reduce(function(Ca,
Cc){return Math.abs(Cc)>Math.abs(Ca)?Cc:Ca})),mb=0;mb<Y.length-1;mb++)Math.abs(Y[mb])<Ba&&(Y[mb]=0);return this||C}},{key:"monicEquals",value:function(){var Y=(this||C).coefs;1!==Y[Y.length-1]&&this.divideEqualsScalar(Y[Y.length-1]);return this||C}},{key:"toString",value:function(){for(var Y=[],Ba=[],mb=(this||C).coefs.length-1;0<=mb;mb--){var Ca=Math.round(1E3*(this||C).coefs[mb])/1E3;if(0!==Ca){var Cc=0>Ca?" - ":" + ";Ca=Math.abs(Ca);0<mb&&(Ca=1===Ca?(this||C)._variable:Ca+(this||C)._variable);
1<mb&&(Ca+="^"+mb);Ba.push(Cc);Y.push(Ca)}}Ba[0]=" + "===Ba[0]?"":"-";mb="";for(Ca=0;Ca<Y.length;Ca++)mb+=Ba[Ca]+Y[Ca];return mb}},{key:"bisection",value:function(Y,Ba){var mb=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1E-6,Ca=3<arguments.length&&void 0!==arguments[3]?arguments[3]:15,Cc=this.eval(Y),Fc=this.eval(Ba);if(Math.abs(Cc)<=mb)var ud=Y;else if(Math.abs(Fc)<=mb)ud=Ba;else if(0>=Cc*Fc)for(Ca=Math.ceil((Math.log(Ba-Y)+Math.LN10*Ca)/Math.LN2),Fc=0;Fc<Ca;Fc++){ud=.5*(Y+Ba);var ke=
this.eval(ud);if(Math.abs(ke)<=mb)break;0>ke*Cc?Ba=ud:(Y=ud,Cc=ke)}return ud}},{key:"trapezoid",value:function(Y,Ba,mb){if(isNaN(Y)||isNaN(Ba)||isNaN(mb))throw new TypeError("Parameters must be numbers");var Ca=Ba-Y;if(1===mb)mb=this.eval(Y),Ba=this.eval(Ba),(this||C)._s=.5*Ca*(mb+Ba);else{Ba=1<<mb-2;mb=Ca/Ba;Y+=.5*mb;for(var Cc=0,Fc=0;Fc<Ba;Fc++)Cc+=this.eval(Y),Y+=mb;(this||C)._s=.5*((this||C)._s+Ca*Cc/Ba)}if(isNaN((this||C)._s))throw new TypeError("this._s is NaN");return(this||C)._s}},{key:"simpson",
value:function(Y,Ba){if(isNaN(Y)||isNaN(Ba))throw new TypeError("Parameters must be numbers");var mb=Ba-Y,Ca=.5*mb*(this.eval(Y)+this.eval(Ba));Ba=Ca;for(var Cc=4*Ca/3,Fc=Cc,ud=Ca,ke=1,ze=2;20>=ze;ze++){Ca=mb/ke;Cc=Y+.5*Ca;for(var xe=0,qd=1;qd<=ke;qd++)xe+=this.eval(Cc),Cc+=Ca;Ca=Ba=.5*(Ba+mb*xe/ke);Cc=(4*Ca-ud)/3;if(Math.abs(Cc-Fc)<1E-7*Math.abs(Fc))break;Fc=Cc;ud=Ca;ke<<=1}return Cc}},{key:"romberg",value:function(Y,Ba){if(isNaN(Y)||isNaN(Ba))throw new TypeError("Parameters must be numbers");for(var mb=
Array(21),Ca=Array(21),Cc={y:0,dy:0},Fc=Ca[0]=1;20>=Fc;Fc++){mb[Fc-1]=this.trapezoid(Y,Ba,Fc);if(3<=Fc&&(Cc=cd.interpolate(Ca,mb,3,Fc-3,0),Math.abs(Cc.dy)<=1E-6*Cc.y))break;mb[Fc]=mb[Fc-1];Ca[Fc]=.25*Ca[Fc-1]}return Cc.y}},{key:"zeroErrorEstimate",value:function(Y){var Ba=this||C;if("undefined"===typeof Y){var mb=Ba.bounds();Y=Math.max(Math.abs(mb.minX),Math.abs(mb.maxX))}if(.001>Y)return 2*Math.abs(Ba.eval(1E-15));var Ca=Ba.coefs[Ba.coefs.length-1];return 10*1E-15*Ba.coefs.reduce(function(Cc,Fc,
ud){Fc=Fc/Ca*Math.pow(Y,ud);return Fc>Cc?Fc:Cc},0)}},{key:"boundsUpperRealFujiwara",value:function(){var Y=(this||C).coefs,Ba=Y.length-1,mb=Y[Ba];1!==mb&&(Y=(this||C).coefs.map(function(ke){return ke/mb}));var Ca=Y.map(function(ke,ze){return ze<Ba?Math.pow(Math.abs(0===ze?ke/2:ke),1/(Ba-ze)):ke}),Cc=function(ke,ze,xe){Fc(xe)&&(ke.max<ze?(ke.nearmax=ke.max,ke.max=ze):ke.nearmax<ze&&(ke.nearmax=ze));return ke};var Fc=function(ke){return ke<Ba&&0>Y[ke]};var ud=Ca.reduce(Cc,{max:0,nearmax:0});Fc=function(ke){return ke<
Ba&&(Ba%2===ke%2?0>Y[ke]:0<Y[ke])};return{negX:-2*Ca.reduce(Cc,{max:0,nearmax:0}).max,posX:2*ud.max}}},{key:"boundsLowerRealFujiwara",value:function(){var Y=new cd;Y.coefs=(this||C).coefs.slice().reverse();Y=Y.boundsUpperRealFujiwara();Y.negX=1/Y.negX;Y.posX=1/Y.posX;return Y}},{key:"bounds",value:function(){var Y=this.boundsUpperRealFujiwara(),Ba={minX:Y.negX,maxX:Y.posX};if(0===Y.negX&&0===Y.posX)return Ba;0===Y.negX?Ba.minX=this.boundsLowerRealFujiwara().posX:0===Y.posX&&(Ba.maxX=this.boundsLowerRealFujiwara().negX);
Ba.minX>Ba.maxX&&(Ba.minX=Ba.maxX=0);return Ba}},{key:"boundUpperAbsRouche",value:function(){var Y=(this||C).coefs,Ba=Y.length-1;return 1+Y.reduce(function(mb,Ca,Cc){return Cc!==Ba?(Ca=Math.abs(Ca),mb<Ca?Ca:mb):mb},0)/Math.abs(Y[Ba])}},{key:"boundLowerAbsRouche",value:function(){var Y=(this||C).coefs,Ba=Y.reduce(function(mb,Ca,Cc){return 0!==Cc?(Ca=Math.abs(Ca),mb<Ca?Ca:mb):mb},0);return Math.abs(Y[0])/(Math.abs(Y[0])+Ba)}},{key:"boundsRealLaguerre",value:function(){var Y=(this||C).coefs,Ba=Y.length-
1,mb=-Y[Ba-1]/(Ba*Y[Ba]);Y=(Ba-1)/(Ba*Y[Ba])*Math.sqrt(Y[Ba-1]*Y[Ba-1]-2*Ba/(Ba-1)*Y[Ba]*Y[Ba-2]);0>Y&&(Y=-Y);return{minX:mb-Y,maxX:mb+Y}}},{key:"countRootsDescartes",value:function(){var Y=(this||C).coefs,Ba=Y.length-1;Y=Y.reduce(function(mb,Ca,Cc){0!==mb.prev_a&&0!==Ca&&(0>mb.prev_a===0<Ca&&mb.pos++,0===Cc%2!==0>mb.prev_a===(1===Cc%2!==0<Ca)&&mb.neg++);mb.prev_a=Ca;return mb},{pos:0,neg:0,prev_a:0});return{maxRealPos:Y.pos,maxRealNeg:Y.neg,minComplex:Ba-(Y.pos+Y.neg)}}},{key:"getDegree",value:function(){return(this||
C).coefs.length-1}},{key:"getDerivative",value:function(){for(var Y=new cd,Ba=1;Ba<(this||C).coefs.length;Ba++)Y.coefs.push(Ba*(this||C).coefs[Ba]);return Y}},{key:"getRoots",value:function(){this.simplifyEquals();switch(this.getDegree()){case 0:var Y=[];break;case 1:Y=this.getLinearRoot();break;case 2:Y=this.getQuadraticRoots();break;case 3:Y=this.getCubicRoots();break;case 4:Y=this.getQuarticRoots();break;default:Y=[]}return Y}},{key:"getRootsInInterval",value:function(Y,Ba){function mb(Fc){"number"===
typeof Fc&&Ca.push(Fc)}var Ca=[];if(0===this.getDegree())throw new RangeError("Unexpected empty polynomial");if(1===this.getDegree())mb(this.bisection(Y,Ba));else{var Cc=this.getDerivative().getRootsInInterval(Y,Ba);if(0<Cc.length){mb(this.bisection(Y,Cc[0]));for(Y=0;Y<=Cc.length-2;Y++)mb(this.bisection(Cc[Y],Cc[Y+1]));mb(this.bisection(Cc[Cc.length-1],Ba))}else mb(this.bisection(Y,Ba))}return Ca}},{key:"getLinearRoot",value:function(){var Y=[],Ba=(this||C).coefs[1];0!==Ba&&Y.push(-(this||C).coefs[0]/
Ba);return Y}},{key:"getQuadraticRoots",value:function(){var Y=[];if(2===this.getDegree()){var Ba=(this||C).coefs[2],mb=(this||C).coefs[1]/Ba;Ba=mb*mb-(this||C).coefs[0]/Ba*4;0<Ba?(Ba=Math.sqrt(Ba),Y.push(.5*(-mb+Ba)),Y.push(.5*(-mb-Ba))):0===Ba&&Y.push(.5*-mb)}return Y}},{key:"getCubicRoots",value:function(){var Y=[];if(3===this.getDegree()){var Ba=(this||C).coefs[3],mb=(this||C).coefs[2]/Ba,Ca=(this||C).coefs[1]/Ba,Cc=(3*Ca-mb*mb)/3;Ba=(2*mb*mb*mb-9*Ca*mb+(this||C).coefs[0]/Ba*27)/27;mb/=3;Ca=Ba*
Ba/4+Cc*Cc*Cc/27;Ba/=2;var Fc=this.zeroErrorEstimate();Math.abs(Ca)<=Fc&&(Ca=0);0<Ca?(Cc=Math.sqrt(Ca),Fc=-Ba+Cc,Ca=0<=Fc?Math.pow(Fc,1/3):-Math.pow(-Fc,1/3),Fc=-Ba-Cc,Ca=0<=Fc?Ca+Math.pow(Fc,1/3):Ca-Math.pow(-Fc,1/3),Y.push(Ca-mb)):0>Ca?(Cc=Math.sqrt(-Cc/3),Ca=Math.atan2(Math.sqrt(-Ca),-Ba)/3,Ba=Math.cos(Ca),Ca=Math.sin(Ca),Fc=Math.sqrt(3),Y.push(2*Cc*Ba-mb),Y.push(-Cc*(Ba+Fc*Ca)-mb),Y.push(-Cc*(Ba-Fc*Ca)-mb)):(Cc=0<=Ba?-Math.pow(Ba,1/3):Math.pow(-Ba,1/3),Y.push(2*Cc-mb),Y.push(-Cc-mb))}return Y}},
{key:"getQuarticRoots",value:function(){var Y=[],Ba=this.getDegree();if(4===Ba){var mb=new cd;mb.coefs=(this||C).coefs.slice();mb.divideEqualsScalar(mb.coefs[Ba]);Math.abs(mb.coefs[0])<10*1E-15*Math.abs(mb.coefs[3])&&(mb.coefs[0]=0);for(var Ca=mb.getDerivative(),Cc=Ca.getRoots().sort(function(We,of){return We-of}),Fc=[],ud=Cc.length-1,ke=this.bounds(),ze=this.zeroErrorEstimate(Math.max(Math.abs(ke.minX),Math.abs(ke.maxX))),xe=0;xe<=ud;xe++)Fc.push(mb.eval(Cc[xe]));for(xe=0;xe<=ud;xe++)Math.abs(Fc[xe])<
ze&&(Fc[xe]=0);ze=0;var qd=Math.max(.1*(ke.maxX-ke.minX)/Ba,1E-15);Ba=[];xe=[];if(-1<ud){0!==Fc[0]?ta(Fc[0])!==ta(mb.eval(Cc[0]-qd)-Fc[0])&&(Ba.push(Cc[0]-qd),xe.push([ke.minX,Cc[0]])):(Y.push(Cc[0],Cc[0]),ze++);for(;ze<ud;ze++)0===Fc[ze+1]?(Y.push(Cc[ze+1],Cc[ze+1]),ze++):ta(Fc[ze])!==ta(Fc[ze+1])&&(Ba.push((Cc[ze]+Cc[ze+1])/2),xe.push([Cc[ze],Cc[ze+1]]));0!==Fc[ud]&&ta(Fc[ud])!==ta(mb.eval(Cc[ud]+qd)-Fc[ud])&&(Ba.push(Cc[ud]+qd),xe.push([Cc[ud],ke.maxX]))}Cc=function(We){return mb.eval(We)};Fc=
function(We){return Ca.eval(We)};if(0<Ba.length)for(ze=0;ze<Ba.length;ze++)Ba[ze]=cd.newtonSecantBisection(Ba[ze],Cc,Fc,32,xe[ze][0],xe[ze][1]);Y=Y.concat(Ba)}return Y}}],[{key:"interpolate",value:function(Y,Ba,mb,Ca,Cc){if(Y.constructor!==Array||Ba.constructor!==Array)throw new TypeError("xs and ys must be arrays");if(isNaN(mb)||isNaN(Ca)||isNaN(Cc))throw new TypeError("n, offset, and x must be numbers");var Fc,ud=0,ke=Array(mb),ze=Array(mb),xe=0,qd=Math.abs(Cc-Y[Ca]);for(Fc=0;Fc<mb;Fc++){var We=
Math.abs(Cc-Y[Ca+Fc]);We<qd&&(xe=Fc,qd=We);ke[Fc]=ze[Fc]=Ba[Ca+Fc]}Ba=Ba[Ca+xe];xe--;for(qd=1;qd<mb;qd++){for(Fc=0;Fc<mb-qd;Fc++){ud=Y[Ca+Fc]-Cc;We=Y[Ca+Fc+qd]-Cc;var of=ke[Fc+1]-ze[Fc],Ef=ud-We;if(0===Ef)throw new RangeError("Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)");Ef=of/Ef;ze[Fc]=We*Ef;ke[Fc]=ud*Ef}ud=2*(xe+1)<mb-qd?ke[xe+1]:ze[xe--];Ba+=ud}return{y:Ba,dy:ud}}},{key:"newtonSecantBisection",value:function(Y,Ba,mb,Ca,Cc,Fc){var ud=0,ke=0;var ze=Y;var xe=
Math.pow(10,-14);if(Y="number"===typeof Cc&&"number"===typeof Fc){if(Cc>Fc)throw new RangeError("Min must be greater than max");var qd=Ba(Cc);var We=Ba(Fc);if(ta(qd)===ta(We))throw new RangeError("Y values of bounds must be of opposite sign");}for(var of=function(){return Math.abs(Hc)<=xe*Math.abs(ze)||ke===ze-Hc-ze},Ef=0;Ef<Ca;Ef++){var v=mb(ze);if(0===v){if(0===ud)throw new RangeError("df(x) is zero");v=ud}ud=v;var na=Ba(ze);var Hc=na/v;v=ze-Hc;if(of())break;if(Y){if(ta(na)===ta(We))Fc=ze,We=na;
else if(ta(na)===ta(qd))Cc=ze,qd=na;else{ze=v;break}if(v<Cc||v>Fc){if(ta(qd)===ta(We))break;na=We-qd;v=Fc-Cc;Hc=0===na?ze-(Cc+.5*v):50<Math.abs(na/Math.min(qd,We))?ze-(Cc+v*(.5+(Math.abs(qd)<Math.abs(We)?-.25:.25))):ze-(Cc-qd/na*v);v=ze-Hc;if(of())break}}ke=ze-v;ze=v}return ze}}]);return cd}(),Re=function(){function cd(Y,Ba){ma(this||C,cd);(this||C).type=Y;(this||C).text=Ba}O(cd,[{key:"typeis",value:function(Y){return(this||C).type===Y}}]);return cd}();Re.UNDEFINED=0;Re.COMMAND=1;Re.NUMBER=2;Re.EOD=
3;var nf=function(){function cd(Y){ma(this||C,cd);if(null===Y||void 0===Y)Y="";this.setPathData(Y)}O(cd,[{key:"setPathData",value:function(Y){if("string"!==typeof Y)throw new TypeError("The first parameter must be a string");(this||C)._pathData=Y}},{key:"getNextToken",value:function(){for(var Y=null,Ba=(this||C)._pathData;null===Y;)if(null===Ba||""===Ba)Y=new Re(Re.EOD,"");else if(Ba.match(/^([ \t\r\n,]+)/))Ba=Ba.substr(RegExp.$1.length);else if(Ba.match(/^([AaCcHhLlMmQqSsTtVvZz])/))Y=new Re(Re.COMMAND,
RegExp.$1),Ba=Ba.substr(RegExp.$1.length);else if(Ba.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))Y=new Re(Re.NUMBER,RegExp.$1),Ba=Ba.substr(RegExp.$1.length);else throw new SyntaxError("Unrecognized path data: ".concat(Ba));(this||C)._pathData=Ba;return Y}}]);return cd}(),af=function(){function cd(){ma(this||C,cd);(this||C)._lexer=new nf;(this||C)._handler=null}O(cd,[{key:"parseData",value:function(Y){if("string"!==typeof Y)throw new TypeError("The first parameter must be a string: ".concat(Y));
null!==(this||C)._handler&&"function"===typeof(this||C)._handler.beginParse&&(this||C)._handler.beginParse();var Ba=(this||C)._lexer;Ba.setPathData(Y);Y="BOP";for(var mb=null,Ca=Ba.getNextToken();!1===Ca.typeis(Re.EOD);){var Cc=[];switch(Ca.type){case Re.COMMAND:if("BOP"===Y&&"M"!==Ca.text&&"m"!==Ca.text)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(Ca.text,"'"));Y=Ca.text;var Fc=cd.PARAMCOUNT[Ca.text.toUpperCase()];Ca=Ba.getNextToken();break;case Re.NUMBER:if("BOP"===
Y)throw new SyntaxError("New paths must begin with a moveto command. Found '".concat(Ca.text,"'"));Fc=cd.PARAMCOUNT[Y.toUpperCase()];break;default:throw new SyntaxError("Unrecognized command type: ".concat(Ca.type));}for(var ud=0;ud<Fc;ud++){switch(Ca.type){case Re.COMMAND:throw new SyntaxError("Parameter must be a number. Found '".concat(Ca.text,"'"));case Re.NUMBER:Cc[ud]=parseFloat(Ca.text);break;case Re.EOD:throw new SyntaxError("Unexpected end of string");default:throw new SyntaxError("Unrecognized parameter type. Found type '".concat(Ca.type,
"'"));}Ca=Ba.getNextToken()}if(null!==(this||C)._handler){Fc=(this||C)._handler;ud=cd.METHODNAME[Y];if("a"===Y||"A"===Y)Cc[3]=0!==Cc[3],Cc[4]=0!==Cc[4];null!==Fc&&"function"===typeof Fc[ud]&&Fc[ud].apply(Fc,Cc)}switch(Y){case "M":Y="L";break;case "m":Y="l";break;case "Z":case "z":Y="BOP"}if(Ca===mb)throw new SyntaxError("Parser stalled on '".concat(Ca.text,"'"));mb=Ca}null!==(this||C)._handler&&"function"===typeof(this||C)._handler.endParse&&(this||C)._handler.endParse()}},{key:"setHandler",value:function(Y){(this||
C)._handler=Y}}]);return cd}();af.PARAMCOUNT={A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0};af.METHODNAME={A:"arcAbs",a:"arcRel",C:"curvetoCubicAbs",c:"curvetoCubicRel",H:"linetoHorizontalAbs",h:"linetoHorizontalRel",L:"linetoAbs",l:"linetoRel",M:"movetoAbs",m:"movetoRel",Q:"curvetoQuadraticAbs",q:"curvetoQuadraticRel",S:"curvetoCubicSmoothAbs",s:"curvetoCubicSmoothRel",T:"curvetoQuadraticSmoothAbs",t:"curvetoQuadraticSmoothRel",V:"linetoVerticalAbs",v:"linetoVerticalRel",Z:"closePath",z:"closePath"};
var yf=2*Math.PI,Ig=function(){function cd(Y){ma(this||C,cd);(this||C).shapeCreator=Y;(this||C).shapes=[];(this||C).firstX=null;(this||C).firstY=null;(this||C).lastX=null;(this||C).lastY=null;(this||C).lastCommand=null}O(cd,[{key:"beginParse",value:function(){(this||C).shapes=[];(this||C).firstX=null;(this||C).firstY=null;(this||C).lastX=null;(this||C).lastY=null;(this||C).lastCommand=null}},{key:"addShape",value:function(Y){(this||C).shapes.push(Y)}},{key:"arcAbs",value:function(Y,Ba,mb,Ca,Cc,Fc,
ud){if(0===Y||0===Ba)this.addShape((this||C).shapeCreator.line((this||C).lastX,(this||C).lastY,Fc,ud));else{var ke;Y=mc(new Yd((this||C).lastX,(this||C).lastY),new Yd(Fc,ud),Y,Ba,mb,Ca,Cc);this.addShape((ke=(this||C).shapeCreator).arc.apply(ke,fa(Y)))}(this||C).lastCommand="A";(this||C).lastX=Fc;(this||C).lastY=ud}},{key:"arcRel",value:function(Y,Ba,mb,Ca,Cc,Fc,ud){if(0===Y||0===Ba)this.addShape((this||C).shapeCreator.line((this||C).lastX,(this||C).lastY,(this||C).lastX+Fc,(this||C).lastY+ud));else{var ke;
Y=mc(new Yd((this||C).lastX,(this||C).lastY),new Yd((this||C).lastX+Fc,(this||C).lastY+ud),Y,Ba,mb,Ca,Cc);this.addShape((ke=(this||C).shapeCreator).arc.apply(ke,fa(Y)))}(this||C).lastCommand="a";(this||C).lastX+=Fc;(this||C).lastY+=ud}},{key:"curvetoCubicAbs",value:function(Y,Ba,mb,Ca,Cc,Fc){this.addShape((this||C).shapeCreator.cubicBezier((this||C).lastX,(this||C).lastY,Y,Ba,mb,Ca,Cc,Fc));(this||C).lastX=Cc;(this||C).lastY=Fc;(this||C).lastCommand="C"}},{key:"curvetoCubicRel",value:function(Y,Ba,
mb,Ca,Cc,Fc){this.addShape((this||C).shapeCreator.cubicBezier((this||C).lastX,(this||C).lastY,(this||C).lastX+Y,(this||C).lastY+Ba,(this||C).lastX+mb,(this||C).lastY+Ca,(this||C).lastX+Cc,(this||C).lastY+Fc));(this||C).lastX+=Cc;(this||C).lastY+=Fc;(this||C).lastCommand="c"}},{key:"linetoHorizontalAbs",value:function(Y){this.addShape((this||C).shapeCreator.line((this||C).lastX,(this||C).lastY,Y,(this||C).lastY));(this||C).lastX=Y;(this||C).lastCommand="H"}},{key:"linetoHorizontalRel",value:function(Y){this.addShape((this||
C).shapeCreator.line((this||C).lastX,(this||C).lastY,(this||C).lastX+Y,(this||C).lastY));(this||C).lastX+=Y;(this||C).lastCommand="h"}},{key:"linetoAbs",value:function(Y,Ba){this.addShape((this||C).shapeCreator.line((this||C).lastX,(this||C).lastY,Y,Ba));(this||C).lastX=Y;(this||C).lastY=Ba;(this||C).lastCommand="L"}},{key:"linetoRel",value:function(Y,Ba){this.addShape((this||C).shapeCreator.line((this||C).lastX,(this||C).lastY,(this||C).lastX+Y,(this||C).lastY+Ba));(this||C).lastX+=Y;(this||C).lastY+=
Ba;(this||C).lastCommand="l"}},{key:"movetoAbs",value:function(Y,Ba){(this||C).firstX=Y;(this||C).firstY=Ba;(this||C).lastX=Y;(this||C).lastY=Ba;(this||C).lastCommand="M"}},{key:"movetoRel",value:function(Y,Ba){(this||C).firstX+=Y;(this||C).firstY+=Ba;(this||C).lastX+=Y;(this||C).lastY+=Ba;(this||C).lastCommand="m"}},{key:"curvetoQuadraticAbs",value:function(Y,Ba,mb,Ca){this.addShape((this||C).shapeCreator.quadraticBezier((this||C).lastX,(this||C).lastY,Y,Ba,mb,Ca));(this||C).lastX=mb;(this||C).lastY=
Ca;(this||C).lastCommand="Q"}},{key:"curvetoQuadraticRel",value:function(Y,Ba,mb,Ca){this.addShape((this||C).shapeCreator.quadraticBezier((this||C).lastX,(this||C).lastY,(this||C).lastX+Y,(this||C).lastY+Ba,(this||C).lastX+mb,(this||C).lastY+Ca));(this||C).lastX+=mb;(this||C).lastY+=Ca;(this||C).lastCommand="q"}},{key:"curvetoCubicSmoothAbs",value:function(Y,Ba,mb,Ca){if((this||C).lastCommand.match(/^[SsCc]$/)){var Cc=(this||C).shapes[(this||C).shapes.length-1].args[2];var Fc=2*(this||C).lastX-Cc.x;
Cc=2*(this||C).lastY-Cc.y}else Fc=(this||C).lastX,Cc=(this||C).lastY;this.addShape((this||C).shapeCreator.cubicBezier((this||C).lastX,(this||C).lastY,Fc,Cc,Y,Ba,mb,Ca));(this||C).lastX=mb;(this||C).lastY=Ca;(this||C).lastCommand="S"}},{key:"curvetoCubicSmoothRel",value:function(Y,Ba,mb,Ca){if((this||C).lastCommand.match(/^[SsCc]$/)){var Cc=(this||C).shapes[(this||C).shapes.length-1].args[2];var Fc=2*(this||C).lastX-Cc.x;Cc=2*(this||C).lastY-Cc.y}else Fc=(this||C).lastX,Cc=(this||C).lastY;this.addShape((this||
C).shapeCreator.cubicBezier((this||C).lastX,(this||C).lastY,Fc,Cc,(this||C).lastX+Y,(this||C).lastY+Ba,(this||C).lastX+mb,(this||C).lastY+Ca));(this||C).lastX+=mb;(this||C).lastY+=Ca;(this||C).lastCommand="s"}},{key:"curvetoQuadraticSmoothAbs",value:function(Y,Ba){if((this||C).lastCommand.match(/^[QqTt]$/)){var mb=(this||C).shapes[(this||C).shapes.length-1].args[1];var Ca=2*(this||C).lastX-mb.x;mb=2*(this||C).lastY-mb.y}else Ca=(this||C).lastX,mb=(this||C).lastY;this.addShape((this||C).shapeCreator.quadraticBezier((this||
C).lastX,(this||C).lastY,Ca,mb,Y,Ba));(this||C).lastX=Y;(this||C).lastY=Ba;(this||C).lastCommand="T"}},{key:"curvetoQuadraticSmoothRel",value:function(Y,Ba){if((this||C).lastCommand.match(/^[QqTt]$/)){var mb=(this||C).shapes[(this||C).shapes.length-1].args[1];var Ca=2*(this||C).lastX-mb.x;mb=2*(this||C).lastY-mb.y}else Ca=(this||C).lastX,mb=(this||C).lastY;this.addShape((this||C).shapeCreator.quadraticBezier((this||C).lastX,(this||C).lastY,Ca,mb,(this||C).lastX+Y,(this||C).lastY+Ba));(this||C).lastX+=
Y;(this||C).lastY+=Ba;(this||C).lastCommand="t"}},{key:"linetoVerticalAbs",value:function(Y){this.addShape((this||C).shapeCreator.line((this||C).lastX,(this||C).lastY,(this||C).lastX,Y));(this||C).lastY=Y;(this||C).lastCommand="V"}},{key:"linetoVerticalRel",value:function(Y){this.addShape((this||C).shapeCreator.line((this||C).lastX,(this||C).lastY,(this||C).lastX,(this||C).lastY+Y));(this||C).lastY+=Y;(this||C).lastCommand="v"}},{key:"closePath",value:function(){this.addShape((this||C).shapeCreator.line((this||
C).lastX,(this||C).lastY,(this||C).firstX,(this||C).firstY));(this||C).lastX=(this||C).firstX;(this||C).lastY=(this||C).firstY;(this||C).lastCommand="z"}}]);return cd}(),re=.5*Math.PI,Ld=new af,fc=function(){function cd(Y,Ba){ma(this||C,cd);(this||C).name=Y;(this||C).args=Ba}O(cd,null,[{key:"arc",value:function(){for(var Y=arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"],
[["startRadians"],"Number"],[["endRadians"],"Number"]],Ba);return new cd(cd.ARC,Y)}},{key:"quadraticBezier",value:function(){for(var Y=arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[["p1",["p1x","p1y"]],"Point2D"],[["p2",["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"]],Ba);return new cd(cd.QUADRATIC_BEZIER,Y)}},{key:"cubicBezier",value:function(){for(var Y=arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[["p1",["p1x","p1y"]],"Point2D"],[["p2",
["p2x","p2y"]],"Point2D"],[["p3",["p3x","p3y"]],"Point2D"],[["p4",["p4x","p4y"]],"Point2D"]],Ba);return new cd(cd.CUBIC_BEZIER,Y)}},{key:"circle",value:function(){for(var Y=arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[["center",["centerX","centerY"],["cx","cy"]],"Point2D"],[["radius","r"],"Number"]],Ba);return new cd(cd.CIRCLE,Y)}},{key:"ellipse",value:function(){for(var Y=arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[["center",["centerX","centerY"],
["cx","cy"]],"Point2D"],[["radiusX","rx"],"Number"],[["radiusY","ry"],"Number"]],Ba);return new cd(cd.ELLIPSE,Y)}},{key:"line",value:function(){for(var Y=arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[["p1",["p1x","p1y"],["x1","y1"]],"Point2D"],[["p2",["p2x","p2y"],["x2","y2"]],"Point2D"]],Ba);return new cd(cd.LINE,Y)}},{key:"path",value:function(){Ld.parseData(0>=arguments.length?void 0:arguments[0]);return new cd(cd.PATH,wd.shapes)}},{key:"polygon",value:function(){for(var Y=
arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[[],"Array<Point2D>"]],1===Ba.length&&Array.isArray(Ba[0])?Ba[0]:Ba);return new cd(cd.POLYGON,Y)}},{key:"polyline",value:function(){for(var Y=arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[[],"Array<Point2D>"]],1===Ba.length&&Array.isArray(Ba[0])?Ba[0]:Ba);return new cd(cd.POLYLINE,Y)}},{key:"rectangle",value:function(){for(var Y=arguments.length,Ba=Array(Y),mb=0;mb<Y;mb++)Ba[mb]=arguments[mb];Y=pc([[["topLeft",
["x","y"],["left","top"]],"Point2D"],[["size",["width","height"],["w","h"]],"Point2D"],[["radiusX","rx"],"Optional<Number>"],[["radiusY","ry"],"Optional<Number>"]],Ba);Ba=Y[0];mb=Y[1];Y[1]=new Yd(Ba.x+mb.x,Ba.y+mb.y);var Ca=new cd(cd.RECTANGLE,Y);Y=Ca.args.pop();Ba=Ca.args.pop();Ba=void 0===Ba?0:Ba;Y=void 0===Y?0:Y;if(0===Ba&&0===Y)return Ca;var Cc=Ca.args[0];mb=Cc.x;Cc=Cc.y;var Fc=Ca.args[1];Ca=Fc.x;Fc=Fc.y;var ud=Ca-mb,ke=Fc-Cc;0===Ba&&(Ba=Y);0===Y&&(Y=Ba);Ba>.5*ud&&(Ba=.5*ud);Y>.5*ke&&(Y=.5*ke);
ud=mb+Ba;ke=Cc+Y;var ze=Ca-Ba,xe=Fc-Y;Y=[cd.arc(ud,ke,Ba,Y,2*re,3*re),cd.line(ud,Cc,ze,Cc),cd.arc(ze,ke,Ba,Y,3*re,4*re),cd.line(Ca,ke,Ca,xe),cd.arc(ze,xe,Ba,Y,0,re),cd.line(ze,Fc,ud,Fc),cd.arc(ud,xe,Ba,Y,re,2*re),cd.line(mb,xe,mb,ke)];return new cd(cd.PATH,Y)}}]);return cd}();fc.ARC="Arc";fc.QUADRATIC_BEZIER="Bezier2";fc.CUBIC_BEZIER="Bezier3";fc.CIRCLE="Circle";fc.ELLIPSE="Ellipse";fc.LINE="Line";fc.PATH="Path";fc.POLYGON="Polygon";fc.POLYLINE="Polyline";fc.RECTANGLE="Rectangle";var wd=new Ig(fc);
Ld.setHandler(wd);var Ie=2*Math.PI,ff=new le(1,0),Pe=function(){function cd(Y){ma(this||C,cd);this.init(Y)}O(cd,[{key:"init",value:function(Y){(this||C).status=Y;(this||C).points=[]}},{key:"appendPoint",value:function(Y){(this||C).points.push(Y)}},{key:"appendPoints",value:function(Y){(this||C).points=(this||C).points.concat(Y)}}],[{key:"intersect",value:function(Y,Ba){if(null!==Y&&void 0!==Y&&null!==Ba&&void 0!==Ba)if("Path"===Y.name)var mb=cd.intersectPathShape(Y,Ba);else if("Path"===Ba.name)mb=
cd.intersectPathShape(Ba,Y);else if("Arc"===Y.name)mb=cd.intersectArcShape(Y,Ba);else if("Arc"===Ba.name)mb=cd.intersectArcShape(Ba,Y);else{Y.name<Ba.name?(mb="intersect"+Y.name+Ba.name,Y=Y.args.concat(Ba.args)):(mb="intersect"+Ba.name+Y.name,Y=Ba.args.concat(Y.args));if(!(mb in cd))throw new TypeError("Intersection not available: "+mb);mb=cd[mb].apply(null,Y)}else mb=new cd("No Intersection");return mb}},{key:"intersectPathShape",value:function(Y,Ba){var mb=new cd("No Intersection");Y=Gb(Y.args);
var Ca;try{for(Y.s();!(Ca=Y.n()).done;){var Cc=cd.intersect(Ca.value,Ba);mb.appendPoints(Cc.points)}}catch(Fc){Y.e(Fc)}finally{Y.f()}0<mb.points.length&&(mb.status="Intersection");return mb}},{key:"intersectArcShape",value:function(Y,Ba){var mb=P(Y.args,5);Y=mb[0];var Ca=mb[3],Cc=mb[4];mb=new fc(fc.ELLIPSE,[Y,mb[1],mb[2]]);Ba=cd.intersect(mb,Ba);mb=Cc;if(0===Ba.points.length)var Fc=Ba;else{Cc=new Pe("No Intersection");mb<Ca&&(mb=[mb,Ca],Ca=mb[0],mb=mb[1]);if(0>Ca||0>mb)Ca+=Ie,mb+=Ie;Ba=Gb(Ba.points);
try{for(Ba.s();!(Fc=Ba.n()).done;){var ud=Fc.value,ke=ff.angleBetween(le.fromPoints(Y,ud))%Ie;var ze=0>ke?ke+Ie:ke;ze<Ca&&(ze+=Ie);Ca<=ze&&ze<=mb&&Cc.appendPoint(ud)}}catch(xe){Ba.e(xe)}finally{Ba.f()}0<Cc.points.length&&(Cc.status="Intersection");Fc=Cc}return Fc}},{key:"intersectBezier2Bezier2",value:function(Y,Ba,mb,Ca,Cc,Fc){var ud=new cd("No Intersection");var ke=Ba.multiply(-2);mb=Y.add(ke.add(mb));ke=Y.multiply(-2);var ze=Ba.multiply(2);Ba=ke.add(ze);Y=new Yd(Y.x,Y.y);ke=Cc.multiply(-2);Fc=
Ca.add(ke.add(Fc));ke=Ca.multiply(-2);ze=Cc.multiply(2);Cc=ke.add(ze);Ca=new Yd(Ca.x,Ca.y);ke=mb.x*Ba.y-Ba.x*mb.y;ze=Fc.x*Ba.y-Ba.x*Fc.y;var xe=Fc.x*mb.y-mb.x*Fc.y,qd=Cc.x*mb.y-mb.x*Cc.y,We=mb.x*(Y.y-Ca.y)+mb.y*(-Y.x+Ca.x);ke=(new Ne(-xe*xe,-2*xe*qd,ke*ze-qd*qd-2*xe*We,ke*(Cc.x*Ba.y-Ba.x*Cc.y)-2*qd*We,ke*(Ba.x*(Y.y-Ca.y)+Ba.y*(-Y.x+Ca.x))-We*We)).getRoots();ke=Gb(ke);var of;try{for(ke.s();!(of=ke.n()).done;){var Ef=of.value;if(0<=Ef&&1>=Ef){var v=new Ne(mb.x,Ba.x,Y.x-Ca.x-Ef*Cc.x-Ef*Ef*Fc.x);v.simplifyEquals();
var na=v.getRoots(),Hc=new Ne(mb.y,Ba.y,Y.y-Ca.y-Ef*Cc.y-Ef*Ef*Fc.y);Hc.simplifyEquals();var Nc=Hc.getRoots();if(0<na.length&&0<Nc.length){var Ud=Gb(na),ue;try{a:for(Ud.s();!(ue=Ud.n()).done;){var bf=ue.value;if(0<=bf&&1>=bf)for(ze=0;ze<Nc.length;ze++)if(1E-4>Math.abs(bf-Nc[ze])){ud.points.push(Fc.multiply(Ef*Ef).add(Cc.multiply(Ef).add(Ca)));break a}}}catch(pf){Ud.e(pf)}finally{Ud.f()}}}}}catch(pf){ke.e(pf)}finally{ke.f()}0<ud.points.length&&(ud.status="Intersection");return ud}},{key:"intersectBezier2Bezier3",
value:function(Y,Ba,mb,Ca,Cc,Fc,ud){var ke=new cd("No Intersection");var ze=Ba.multiply(-2);mb=Y.add(ze.add(mb));ze=Y.multiply(-2);var xe=Ba.multiply(2);Ba=ze.add(xe);Y=new Yd(Y.x,Y.y);ze=Ca.multiply(-1);xe=Cc.multiply(3);var qd=Fc.multiply(-3);ze=ze.add(xe.add(qd.add(ud)));ud=new Yd(ze.x,ze.y);ze=Ca.multiply(3);xe=Cc.multiply(-6);qd=Fc.multiply(3);ze=ze.add(xe.add(qd));Fc=new Yd(ze.x,ze.y);ze=Ca.multiply(-3);xe=Cc.multiply(3);qd=ze.add(xe);Cc=new Yd(qd.x,qd.y);Ca=new Yd(Ca.x,Ca.y);ze=Ba.x*Ba.x;xe=
Ba.y*Ba.y;qd=mb.x*mb.x;var We=mb.y*mb.y;ze=(new Ne(-2*mb.x*mb.y*ud.x*ud.y+qd*ud.y*ud.y+We*ud.x*ud.x,-2*mb.x*mb.y*Fc.x*ud.y-2*mb.x*mb.y*Fc.y*ud.x+2*We*Fc.x*ud.x+2*qd*Fc.y*ud.y,-2*mb.x*Cc.x*mb.y*ud.y-2*mb.x*mb.y*Cc.y*ud.x-2*mb.x*mb.y*Fc.x*Fc.y+2*Cc.x*We*ud.x+We*Fc.x*Fc.x+qd*(2*Cc.y*ud.y+Fc.y*Fc.y),2*Y.x*mb.x*mb.y*ud.y+2*Y.y*mb.x*mb.y*ud.x+Ba.x*Ba.y*mb.x*ud.y+Ba.x*Ba.y*mb.y*ud.x-2*Ca.x*mb.x*mb.y*ud.y-2*mb.x*Ca.y*mb.y*ud.x-2*mb.x*Cc.x*mb.y*Fc.y-2*mb.x*mb.y*Cc.y*Fc.x-2*Y.x*We*ud.x-2*Y.y*qd*ud.y+2*Ca.x*
We*ud.x+2*Cc.x*We*Fc.x-xe*mb.x*ud.x-ze*mb.y*ud.y+qd*(2*Ca.y*ud.y+2*Cc.y*Fc.y),2*Y.x*mb.x*mb.y*Fc.y+2*Y.y*mb.x*mb.y*Fc.x+Ba.x*Ba.y*mb.x*Fc.y+Ba.x*Ba.y*mb.y*Fc.x-2*Ca.x*mb.x*mb.y*Fc.y-2*mb.x*Ca.y*mb.y*Fc.x-2*mb.x*Cc.x*mb.y*Cc.y-2*Y.x*We*Fc.x-2*Y.y*qd*Fc.y+2*Ca.x*We*Fc.x-xe*mb.x*Fc.x-ze*mb.y*Fc.y+Cc.x*Cc.x*We+qd*(2*Ca.y*Fc.y+Cc.y*Cc.y),2*Y.x*mb.x*mb.y*Cc.y+2*Y.y*mb.x*Cc.x*mb.y+Ba.x*Ba.y*mb.x*Cc.y+Ba.x*Ba.y*Cc.x*mb.y-2*Ca.x*mb.x*mb.y*Cc.y-2*mb.x*Ca.y*Cc.x*mb.y-2*Y.x*Cc.x*We-2*Y.y*qd*Cc.y+2*Ca.x*Cc.x*
We-xe*mb.x*Cc.x-ze*mb.y*Cc.y+2*qd*Ca.y*Cc.y,-2*Y.x*Y.y*mb.x*mb.y-Y.x*Ba.x*Ba.y*mb.y-Y.y*Ba.x*Ba.y*mb.x+2*Y.x*mb.x*Ca.y*mb.y+2*Y.y*Ca.x*mb.x*mb.y+Ba.x*Ca.x*Ba.y*mb.y+Ba.x*Ba.y*mb.x*Ca.y-2*Ca.x*mb.x*Ca.y*mb.y-2*Y.x*Ca.x*We+Y.x*xe*mb.x+Y.y*ze*mb.y-2*Y.y*qd*Ca.y-Ca.x*xe*mb.x-ze*Ca.y*mb.y+Y.x*Y.x*We+Y.y*Y.y*qd+Ca.x*Ca.x*We+qd*Ca.y*Ca.y)).getRootsInInterval(0,1);ze=Gb(ze);var of;try{for(ze.s();!(of=ze.n()).done;){var Ef=of.value,v=(new Ne(mb.x,Ba.x,Y.x-Ca.x-Ef*Cc.x-Ef*Ef*Fc.x-Ef*Ef*Ef*ud.x)).getRoots(),
na=(new Ne(mb.y,Ba.y,Y.y-Ca.y-Ef*Cc.y-Ef*Ef*Fc.y-Ef*Ef*Ef*ud.y)).getRoots();if(0<v.length&&0<na.length){var Hc=Gb(v),Nc;try{a:for(Hc.s();!(Nc=Hc.n()).done;){var Ud=Nc.value;if(0<=Ud&&1>=Ud)for(xe=0;xe<na.length;xe++)if(1E-4>Math.abs(Ud-na[xe])){ke.points.push(ud.multiply(Ef*Ef*Ef).add(Fc.multiply(Ef*Ef).add(Cc.multiply(Ef).add(Ca))));break a}}}catch(ue){Hc.e(ue)}finally{Hc.f()}}}}catch(ue){ze.e(ue)}finally{ze.f()}0<ke.points.length&&(ke.status="Intersection");return ke}},{key:"intersectBezier2Circle",
value:function(Y,Ba,mb,Ca,Cc){return cd.intersectBezier2Ellipse(Y,Ba,mb,Ca,Cc,Cc)}},{key:"intersectBezier2Ellipse",value:function(Y,Ba,mb,Ca,Cc,Fc){var ud=new cd("No Intersection");var ke=Ba.multiply(-2);mb=Y.add(ke.add(mb));ke=Y.multiply(-2);Ba=Ba.multiply(2);ke=ke.add(Ba);Y=new Yd(Y.x,Y.y);Cc*=Cc;Fc*=Fc;Ca=(new Ne(Fc*mb.x*mb.x+Cc*mb.y*mb.y,2*(Fc*mb.x*ke.x+Cc*mb.y*ke.y),Fc*(2*mb.x*Y.x+ke.x*ke.x)+Cc*(2*mb.y*Y.y+ke.y*ke.y)-2*(Fc*Ca.x*mb.x+Cc*Ca.y*mb.y),2*(Fc*ke.x*(Y.x-Ca.x)+Cc*ke.y*(Y.y-Ca.y)),Fc*
(Y.x*Y.x+Ca.x*Ca.x)+Cc*(Y.y*Y.y+Ca.y*Ca.y)-2*(Fc*Ca.x*Y.x+Cc*Ca.y*Y.y)-Cc*Fc)).getRoots();Ca=Gb(Ca);var ze;try{for(Ca.s();!(ze=Ca.n()).done;){var xe=ze.value;0<=xe&&1>=xe&&ud.points.push(mb.multiply(xe*xe).add(ke.multiply(xe).add(Y)))}}catch(qd){Ca.e(qd)}finally{Ca.f()}0<ud.points.length&&(ud.status="Intersection");return ud}},{key:"intersectBezier2Line",value:function(Y,Ba,mb,Ca,Cc){var Fc=Ca.min(Cc),ud=Ca.max(Cc),ke=new cd("No Intersection");var ze=Ba.multiply(-2);var xe=Y.add(ze.add(mb));ze=Y.multiply(-2);
var qd=Ba.multiply(2);ze=ze.add(qd);qd=new Yd(Y.x,Y.y);var We=new le(Ca.y-Cc.y,Cc.x-Ca.x),of=Ca.x*Cc.y-Cc.x*Ca.y;xe=(new Ne(We.dot(xe),We.dot(ze),We.dot(qd)+of)).getRoots();xe=Gb(xe);var Ef;try{for(xe.s();!(Ef=xe.n()).done;){var v=Ef.value;if(0<=v&&1>=v){var na=Y.lerp(Ba,v),Hc=Ba.lerp(mb,v),Nc=na.lerp(Hc,v);Ca.x===Cc.x?Fc.y<=Nc.y&&Nc.y<=ud.y&&(ke.status="Intersection",ke.appendPoint(Nc)):Ca.y===Cc.y?Fc.x<=Nc.x&&Nc.x<=ud.x&&(ke.status="Intersection",ke.appendPoint(Nc)):Fc.x<=Nc.x&&Nc.x<=ud.x&&Fc.y<=
Nc.y&&Nc.y<=ud.y&&(ke.status="Intersection",ke.appendPoint(Nc))}}}catch(Ud){xe.e(Ud)}finally{xe.f()}return ke}},{key:"intersectBezier2Polygon",value:function(Y,Ba,mb,Ca){return cd.intersectBezier2Polyline(Y,Ba,mb,bd(Ca))}},{key:"intersectBezier2Polyline",value:function(Y,Ba,mb,Ca){for(var Cc=new cd("No Intersection"),Fc=Ca.length,ud=0;ud<Fc-1;ud++){var ke=cd.intersectBezier2Line(Y,Ba,mb,Ca[ud],Ca[ud+1]);Cc.appendPoints(ke.points)}0<Cc.points.length&&(Cc.status="Intersection");return Cc}},{key:"intersectBezier2Rectangle",
value:function(Y,Ba,mb,Ca,Cc){var Fc=Ca.min(Cc),ud=Ca.max(Cc);Cc=new Yd(ud.x,Fc.y);var ke=new Yd(Fc.x,ud.y);Ca=cd.intersectBezier2Line(Y,Ba,mb,Fc,Cc);Cc=cd.intersectBezier2Line(Y,Ba,mb,Cc,ud);ud=cd.intersectBezier2Line(Y,Ba,mb,ud,ke);Y=cd.intersectBezier2Line(Y,Ba,mb,ke,Fc);Ba=new cd("No Intersection");Ba.appendPoints(Ca.points);Ba.appendPoints(Cc.points);Ba.appendPoints(ud.points);Ba.appendPoints(Y.points);0<Ba.points.length&&(Ba.status="Intersection");return Ba}},{key:"intersectBezier3Bezier3",
value:function(Y,Ba,mb,Ca,Cc,Fc,ud,ke){var ze=new cd("No Intersection");var xe=Y.multiply(-1);var qd=Ba.multiply(3);var We=mb.multiply(-3);We=xe.add(qd.add(We.add(Ca)));Ca=new Yd(We.x,We.y);xe=Y.multiply(3);qd=Ba.multiply(-6);We=mb.multiply(3);We=xe.add(qd.add(We));mb=new Yd(We.x,We.y);xe=Y.multiply(-3);qd=Ba.multiply(3);We=xe.add(qd);Ba=new Yd(We.x,We.y);Y=new Yd(Y.x,Y.y);xe=Cc.multiply(-1);qd=Fc.multiply(3);We=ud.multiply(-3);We=xe.add(qd.add(We.add(ke)));ke=new Yd(We.x,We.y);xe=Cc.multiply(3);
qd=Fc.multiply(-6);We=ud.multiply(3);We=xe.add(qd.add(We));ud=new Yd(We.x,We.y);xe=Cc.multiply(-3);qd=Fc.multiply(3);We=xe.add(qd);Fc=new Yd(We.x,We.y);Cc=new Yd(Cc.x,Cc.y);xe=Ca.x*mb.y-mb.x*Ca.y;qd=Ca.x*Ba.y-Ba.x*Ca.y;var of=Ca.x*Y.y-Y.x*Ca.y+Cc.x*Ca.y-Ca.x*Cc.y,Ef=Fc.x*Ca.y-Ca.x*Fc.y,v=ud.x*Ca.y-Ca.x*ud.y,na=ke.x*Ca.y-Ca.x*ke.y;We=Ca.x*Ba.y-Ba.x*Ca.y;var Hc=Ca.x*Y.y+mb.x*Ba.y-Ba.x*mb.y-Y.x*Ca.y+Cc.x*Ca.y-Ca.x*Cc.y,Nc=Fc.x*Ca.y-Ca.x*Fc.y,Ud=ud.x*Ca.y-Ca.x*ud.y,ue=ke.x*Ca.y-Ca.x*ke.y,bf=mb.x*Y.y-
Y.x*mb.y+Cc.x*mb.y-mb.x*Cc.y,pf=Fc.x*mb.y-mb.x*Fc.y,mg=ud.x*mb.y-mb.x*ud.y,Zd=ke.x*mb.y-mb.x*ke.y,tg=Ca.x*Y.y-Y.x*Ca.y+Cc.x*Ca.y-Ca.x*Cc.y,Sg=Fc.x*Ca.y-Ca.x*Fc.y,oh=ud.x*Ca.y-Ca.x*ud.y,Hf=ke.x*Ca.y-Ca.x*ke.y,Bh=mb.x*Y.y-Y.x*mb.y+Cc.x*mb.y-mb.x*Cc.y,ah=Fc.x*mb.y-mb.x*Fc.y,th=ud.x*mb.y-mb.x*ud.y,Xg=ke.x*mb.y-mb.x*ke.y,ti=Ba.x*Y.y-Y.x*Ba.y+Cc.x*Ba.y-Ba.x*Cc.y,Af=Fc.x*Ba.y-Ba.x*Fc.y,vh=ud.x*Ba.y-Ba.x*ud.y,Md=ke.x*Ba.y-Ba.x*ke.y;xe=new Ne(-na*ue*Hf,-na*ue*oh-na*Ud*Hf-v*ue*Hf,-na*ue*Sg-na*Ud*oh-v*ue*oh-
na*Nc*Hf-v*Ud*Hf-Ef*ue*Hf,-na*ue*tg-na*Ud*Sg-v*ue*Sg-na*Nc*oh-v*Ud*oh-Ef*ue*oh-na*Hc*Hf-v*Nc*Hf-Ef*Ud*Hf-of*ue*Hf+qd*Zd*Hf+na*We*Xg-xe*Zd*Xg+xe*ue*Md,-na*Ud*tg-v*ue*tg-na*Nc*Sg-v*Ud*Sg-Ef*ue*Sg-na*Hc*oh-v*Nc*oh-Ef*Ud*oh-of*ue*oh+qd*Zd*oh-v*Hc*Hf-Ef*Nc*Hf-of*Ud*Hf+qd*mg*Hf+na*We*th-xe*Zd*th+v*We*Xg-xe*mg*Xg+xe*ue*vh+xe*Ud*Md,-na*Nc*tg-v*Ud*tg-Ef*ue*tg-na*Hc*Sg-v*Nc*Sg-Ef*Ud*Sg-of*ue*Sg+qd*Zd*Sg-v*Hc*oh-Ef*Nc*oh-of*Ud*oh+qd*mg*oh-Ef*Hc*Hf-of*Nc*Hf+qd*pf*Hf+na*We*ah-xe*Zd*ah+v*We*th-xe*mg*th+Ef*We*Xg-
xe*pf*Xg+xe*ue*Af+xe*Ud*vh+xe*Nc*Md,-na*Hc*tg-v*Nc*tg-Ef*Ud*tg-of*ue*tg+qd*Zd*tg-v*Hc*Sg-Ef*Nc*Sg-of*Ud*Sg+qd*mg*Sg-Ef*Hc*oh-of*Nc*oh+qd*pf*oh-of*Hc*Hf+qd*bf*Hf+na*We*Bh-xe*Zd*Bh+v*We*ah-xe*mg*ah+Ef*We*th-xe*pf*th+of*We*Xg-xe*bf*Xg+xe*ue*ti+xe*Ud*Af+xe*Nc*vh-qd*We*Md+xe*Hc*Md,-v*Hc*tg-Ef*Nc*tg-of*Ud*tg+qd*mg*tg-Ef*Hc*Sg-of*Nc*Sg+qd*pf*Sg-of*Hc*oh+qd*bf*oh+v*We*Bh-xe*mg*Bh+Ef*We*ah-xe*pf*ah+of*We*th-xe*bf*th+xe*Ud*ti+xe*Nc*Af-qd*We*vh+xe*Hc*vh,-Ef*Hc*tg-of*Nc*tg+qd*pf*tg-of*Hc*Sg+qd*bf*Sg+Ef*We*Bh-
xe*pf*Bh+of*We*ah-xe*bf*ah+xe*Nc*ti-qd*We*Af+xe*Hc*Af,-of*Hc*tg+qd*bf*tg+of*We*Bh-xe*bf*Bh-qd*We*ti+xe*Hc*ti);xe.simplifyEquals();xe=xe.getRootsInInterval(0,1);xe=Gb(xe);var Bf;try{for(xe.s();!(Bf=xe.n()).done;){var xg=Bf.value,df=new Ne(Ca.x,mb.x,Ba.x,Y.x-Cc.x-xg*Fc.x-xg*xg*ud.x-xg*xg*xg*ke.x);df.simplifyEquals();var y=df.getRoots(),A=new Ne(Ca.y,mb.y,Ba.y,Y.y-Cc.y-xg*Fc.y-xg*xg*ud.y-xg*xg*xg*ke.y);A.simplifyEquals();var H=A.getRoots();if(0<y.length&&0<H.length){var Z=Gb(y),M;try{a:for(Z.s();!(M=
Z.n()).done;){var qa=M.value;if(0<=qa&&1>=qa)for(qd=0;qd<H.length;qd++)if(1E-4>Math.abs(qa-H[qd])){ze.points.push(ke.multiply(xg*xg*xg).add(ud.multiply(xg*xg).add(Fc.multiply(xg).add(Cc))));break a}}}catch(Pa){Z.e(Pa)}finally{Z.f()}}}}catch(Pa){xe.e(Pa)}finally{xe.f()}0<ze.points.length&&(ze.status="Intersection");return ze}},{key:"intersectBezier3Circle",value:function(Y,Ba,mb,Ca,Cc,Fc){return cd.intersectBezier3Ellipse(Y,Ba,mb,Ca,Cc,Fc,Fc)}},{key:"intersectBezier3Ellipse",value:function(Y,Ba,mb,
Ca,Cc,Fc,ud){var ke=new cd("No Intersection");var ze=Y.multiply(-1);var xe=Ba.multiply(3);var qd=mb.multiply(-3);ze=ze.add(xe.add(qd.add(Ca)));Ca=new Yd(ze.x,ze.y);ze=Y.multiply(3);xe=Ba.multiply(-6);qd=mb.multiply(3);ze=ze.add(xe.add(qd));mb=new Yd(ze.x,ze.y);ze=Y.multiply(-3);xe=Ba.multiply(3);qd=ze.add(xe);Ba=new Yd(qd.x,qd.y);Y=new Yd(Y.x,Y.y);Fc*=Fc;ud*=ud;Cc=(new Ne(Ca.x*Ca.x*ud+Ca.y*Ca.y*Fc,2*(Ca.x*mb.x*ud+Ca.y*mb.y*Fc),2*(Ca.x*Ba.x*ud+Ca.y*Ba.y*Fc)+mb.x*mb.x*ud+mb.y*mb.y*Fc,2*Ca.x*ud*(Y.x-
Cc.x)+2*Ca.y*Fc*(Y.y-Cc.y)+2*(mb.x*Ba.x*ud+mb.y*Ba.y*Fc),2*mb.x*ud*(Y.x-Cc.x)+2*mb.y*Fc*(Y.y-Cc.y)+Ba.x*Ba.x*ud+Ba.y*Ba.y*Fc,2*Ba.x*ud*(Y.x-Cc.x)+2*Ba.y*Fc*(Y.y-Cc.y),Y.x*Y.x*ud-2*Y.y*Cc.y*Fc-2*Y.x*Cc.x*ud+Y.y*Y.y*Fc+Cc.x*Cc.x*ud+Cc.y*Cc.y*Fc-Fc*ud)).getRootsInInterval(0,1);Cc=Gb(Cc);var We;try{for(Cc.s();!(We=Cc.n()).done;){var of=We.value;ke.points.push(Ca.multiply(of*of*of).add(mb.multiply(of*of).add(Ba.multiply(of).add(Y))))}}catch(Ef){Cc.e(Ef)}finally{Cc.f()}0<ke.points.length&&(ke.status="Intersection");
return ke}},{key:"intersectBezier3Line",value:function(Y,Ba,mb,Ca,Cc,Fc){var ud=Cc.min(Fc),ke=Cc.max(Fc),ze=new cd("No Intersection");var xe=Y.multiply(-1);var qd=Ba.multiply(3);var We=mb.multiply(-3);var of=xe.add(qd.add(We.add(Ca)));var Ef=new le(of.x,of.y);xe=Y.multiply(3);qd=Ba.multiply(-6);We=mb.multiply(3);of=xe.add(qd.add(We));of=new le(of.x,of.y);xe=Y.multiply(-3);qd=Ba.multiply(3);We=xe.add(qd);xe=new le(We.x,We.y);qd=new le(Y.x,Y.y);We=new le(Cc.y-Fc.y,Fc.x-Cc.x);var v=Cc.x*Fc.y-Fc.x*Cc.y;
Ef=(new Ne(We.dot(Ef),We.dot(of),We.dot(xe),We.dot(qd)+v)).getRoots();Ef=Gb(Ef);var na;try{for(Ef.s();!(na=Ef.n()).done;){var Hc=na.value;if(0<=Hc&&1>=Hc){var Nc=Y.lerp(Ba,Hc),Ud=Ba.lerp(mb,Hc),ue=mb.lerp(Ca,Hc),bf=Nc.lerp(Ud,Hc),pf=Ud.lerp(ue,Hc),mg=bf.lerp(pf,Hc);Cc.x===Fc.x?ud.y<=mg.y&&mg.y<=ke.y&&(ze.status="Intersection",ze.appendPoint(mg)):Cc.y===Fc.y?ud.x<=mg.x&&mg.x<=ke.x&&(ze.status="Intersection",ze.appendPoint(mg)):ud.x<=mg.x&&mg.x<=ke.x&&ud.y<=mg.y&&mg.y<=ke.y&&(ze.status="Intersection",
ze.appendPoint(mg))}}}catch(Zd){Ef.e(Zd)}finally{Ef.f()}return ze}},{key:"intersectBezier3Polygon",value:function(Y,Ba,mb,Ca,Cc){return cd.intersectBezier3Polyline(Y,Ba,mb,Ca,bd(Cc))}},{key:"intersectBezier3Polyline",value:function(Y,Ba,mb,Ca,Cc){for(var Fc=new cd("No Intersection"),ud=Cc.length,ke=0;ke<ud-1;ke++){var ze=cd.intersectBezier3Line(Y,Ba,mb,Ca,Cc[ke],Cc[ke+1]);Fc.appendPoints(ze.points)}0<Fc.points.length&&(Fc.status="Intersection");return Fc}},{key:"intersectBezier3Rectangle",value:function(Y,
Ba,mb,Ca,Cc,Fc){var ud=Cc.min(Fc),ke=Cc.max(Fc);Fc=new Yd(ke.x,ud.y);var ze=new Yd(ud.x,ke.y);Cc=cd.intersectBezier3Line(Y,Ba,mb,Ca,ud,Fc);Fc=cd.intersectBezier3Line(Y,Ba,mb,Ca,Fc,ke);ke=cd.intersectBezier3Line(Y,Ba,mb,Ca,ke,ze);Y=cd.intersectBezier3Line(Y,Ba,mb,Ca,ze,ud);Ba=new cd("No Intersection");Ba.appendPoints(Cc.points);Ba.appendPoints(Fc.points);Ba.appendPoints(ke.points);Ba.appendPoints(Y.points);0<Ba.points.length&&(Ba.status="Intersection");return Ba}},{key:"intersectCircleCircle",value:function(Y,
Ba,mb,Ca){var Cc=Ba+Ca;var Fc=Math.abs(Ba-Ca),ud=Y.distanceFrom(mb);ud>Cc?Cc=new cd("Outside"):ud<Fc?Cc=new cd("Inside"):(Cc=new cd("Intersection"),Ca=(Ba*Ba-Ca*Ca+ud*ud)/(2*ud),Ba=Math.sqrt(Ba*Ba-Ca*Ca),Ca=Y.lerp(mb,Ca/ud),ud=Ba/ud,Cc.points.push(new Yd(Ca.x-ud*(mb.y-Y.y),Ca.y+ud*(mb.x-Y.x))),Cc.points.push(new Yd(Ca.x+ud*(mb.y-Y.y),Ca.y-ud*(mb.x-Y.x))));return Cc}},{key:"intersectCircleEllipse",value:function(Y,Ba,mb,Ca,Cc){return cd.intersectEllipseEllipse(Y,Ba,Ba,mb,Ca,Cc)}},{key:"intersectCircleLine",
value:function(Y,Ba,mb,Ca){var Cc=(Ca.x-mb.x)*(Ca.x-mb.x)+(Ca.y-mb.y)*(Ca.y-mb.y);var Fc=2*((Ca.x-mb.x)*(mb.x-Y.x)+(Ca.y-mb.y)*(mb.y-Y.y));Y=Fc*Fc-4*Cc*(Y.x*Y.x+Y.y*Y.y+mb.x*mb.x+mb.y*mb.y-2*(Y.x*mb.x+Y.y*mb.y)-Ba*Ba);0>Y?Cc=new cd("Outside"):0===Y?Cc=new cd("Tangent"):(Ba=Math.sqrt(Y),Y=(-Fc+Ba)/(2*Cc),Fc=(-Fc-Ba)/(2*Cc),(0>Y||1<Y)&&(0>Fc||1<Fc)?Cc=0>Y&&0>Fc||1<Y&&1<Fc?new cd("Outside"):new cd("Inside"):(Cc=new cd("Intersection"),0<=Y&&1>=Y&&Cc.points.push(mb.lerp(Ca,Y)),0<=Fc&&1>=Fc&&Cc.points.push(mb.lerp(Ca,
Fc))));return Cc}},{key:"intersectCirclePolygon",value:function(Y,Ba,mb){return cd.intersectCirclePolyline(Y,Ba,bd(mb))}},{key:"intersectCirclePolyline",value:function(Y,Ba,mb){for(var Ca=new cd("No Intersection"),Cc=mb.length,Fc,ud=0;ud<Cc-1;ud++)Fc=cd.intersectCircleLine(Y,Ba,mb[ud],mb[ud+1]),Ca.appendPoints(Fc.points);Ca.status=0<Ca.points.length?"Intersection":Fc.status;return Ca}},{key:"intersectCircleRectangle",value:function(Y,Ba,mb,Ca){var Cc=mb.min(Ca),Fc=mb.max(Ca);Ca=new Yd(Fc.x,Cc.y);
var ud=new Yd(Cc.x,Fc.y);mb=cd.intersectCircleLine(Y,Ba,Cc,Ca);Ca=cd.intersectCircleLine(Y,Ba,Ca,Fc);Fc=cd.intersectCircleLine(Y,Ba,Fc,ud);Y=cd.intersectCircleLine(Y,Ba,ud,Cc);Ba=new cd("No Intersection");Ba.appendPoints(mb.points);Ba.appendPoints(Ca.points);Ba.appendPoints(Fc.points);Ba.appendPoints(Y.points);Ba.status=0<Ba.points.length?"Intersection":mb.status;return Ba}},{key:"intersectEllipseEllipse",value:function(Y,Ba,mb,Ca,Cc,Fc){Y=[mb*mb,0,Ba*Ba,-2*mb*mb*Y.x,-2*Ba*Ba*Y.y,mb*mb*Y.x*Y.x+Ba*
Ba*Y.y*Y.y-Ba*Ba*mb*mb];Ca=[Fc*Fc,0,Cc*Cc,-2*Fc*Fc*Ca.x,-2*Cc*Cc*Ca.y,Fc*Fc*Ca.x*Ca.x+Cc*Cc*Ca.y*Ca.y-Cc*Cc*Fc*Fc];Cc=Y[0]*Ca[1]-Ca[0]*Y[1];Fc=Y[0]*Ca[2]-Ca[0]*Y[2];Ba=Y[0]*Ca[3]-Ca[0]*Y[3];mb=Y[0]*Ca[4]-Ca[0]*Y[4];var ud=Y[0]*Ca[5]-Ca[0]*Y[5],ke=Y[1]*Ca[2]-Ca[1]*Y[2],ze=Y[3]*Ca[5]-Ca[3]*Y[5],xe=Y[1]*Ca[5]-Ca[1]*Y[5]+(Y[3]*Ca[4]-Ca[3]*Y[4]),qd=Y[1]*Ca[4]-Ca[1]*Y[4]-(Y[2]*Ca[3]-Ca[2]*Y[3]);Cc=(new Ne(Cc*ke-Fc*Fc,Cc*qd+Ba*ke-2*Fc*mb,Cc*xe+Ba*qd-mb*mb-2*Fc*ud,Cc*ze+Ba*xe-2*mb*ud,Ba*ze-ud*ud)).getRoots();
Fc=.001*(Y[0]*Y[0]+2*Y[1]*Y[1]+Y[2]*Y[2]);Ba=.001*(Ca[0]*Ca[0]+2*Ca[1]*Ca[1]+Ca[2]*Ca[2]);mb=new cd("No Intersection");for(ud=0;ud<Cc.length;ud++)for(ke=(new Ne(Y[0],Y[3]+Cc[ud]*Y[1],Y[5]+Cc[ud]*(Y[4]+Cc[ud]*Y[2]))).getRoots(),ze=0;ze<ke.length;ze++)xe=(Y[0]*ke[ze]+Y[1]*Cc[ud]+Y[3])*ke[ze]+(Y[2]*Cc[ud]+Y[4])*Cc[ud]+Y[5],Math.abs(xe)<Fc&&(xe=(Ca[0]*ke[ze]+Ca[1]*Cc[ud]+Ca[3])*ke[ze]+(Ca[2]*Cc[ud]+Ca[4])*Cc[ud]+Ca[5],Math.abs(xe)<Ba&&mb.appendPoint(new Yd(ke[ze],Cc[ud])));0<mb.points.length&&(mb.status=
"Intersection");return mb}},{key:"intersectEllipseLine",value:function(Y,Ba,mb,Ca,Cc){var Fc=new le(Ca.x,Ca.y);var ud=le.fromPoints(Ca,Cc);Y=new le(Y.x,Y.y);Y=Fc.subtract(Y);Fc=new le(ud.x/(Ba*Ba),ud.y/(mb*mb));mb=new le(Y.x/(Ba*Ba),Y.y/(mb*mb));Ba=ud.dot(Fc);ud=ud.dot(mb);Y=Y.dot(mb)-1;mb=ud*ud-Ba*Y;0>mb?ud=new cd("Outside"):0<mb?(Y=Math.sqrt(mb),mb=(-ud-Y)/Ba,Ba=(-ud+Y)/Ba,(0>mb||1<mb)&&(0>Ba||1<Ba)?ud=0>mb&&0>Ba||1<mb&&1<Ba?new cd("Outside"):new cd("Inside"):(ud=new cd("Intersection"),0<=mb&&1>=
mb&&ud.appendPoint(Ca.lerp(Cc,mb)),0<=Ba&&1>=Ba&&ud.appendPoint(Ca.lerp(Cc,Ba)))):(Ba=-ud/Ba,0<=Ba&&1>=Ba?(ud=new cd("Intersection"),ud.appendPoint(Ca.lerp(Cc,Ba))):ud=new cd("Outside"));return ud}},{key:"intersectEllipsePolygon",value:function(Y,Ba,mb,Ca){return cd.intersectEllipsePolyline(Y,Ba,mb,bd(Ca))}},{key:"intersectEllipsePolyline",value:function(Y,Ba,mb,Ca){for(var Cc=new cd("No Intersection"),Fc=Ca.length,ud=0;ud<Fc-1;ud++){var ke=cd.intersectEllipseLine(Y,Ba,mb,Ca[ud],Ca[ud+1]);Cc.appendPoints(ke.points)}0<
Cc.points.length&&(Cc.status="Intersection");return Cc}},{key:"intersectEllipseRectangle",value:function(Y,Ba,mb,Ca,Cc){var Fc=Ca.min(Cc),ud=Ca.max(Cc);Cc=new Yd(ud.x,Fc.y);var ke=new Yd(Fc.x,ud.y);Ca=cd.intersectEllipseLine(Y,Ba,mb,Fc,Cc);Cc=cd.intersectEllipseLine(Y,Ba,mb,Cc,ud);ud=cd.intersectEllipseLine(Y,Ba,mb,ud,ke);Y=cd.intersectEllipseLine(Y,Ba,mb,ke,Fc);Ba=new cd("No Intersection");Ba.appendPoints(Ca.points);Ba.appendPoints(Cc.points);Ba.appendPoints(ud.points);Ba.appendPoints(Y.points);
0<Ba.points.length&&(Ba.status="Intersection");return Ba}},{key:"intersectLineLine",value:function(Y,Ba,mb,Ca){var Cc=(Ca.x-mb.x)*(Y.y-mb.y)-(Ca.y-mb.y)*(Y.x-mb.x);var Fc=(Ba.x-Y.x)*(Y.y-mb.y)-(Ba.y-Y.y)*(Y.x-mb.x);mb=(Ca.y-mb.y)*(Ba.x-Y.x)-(Ca.x-mb.x)*(Ba.y-Y.y);0!==mb?(Cc/=mb,Fc/=mb,0<=Cc&&1>=Cc&&0<=Fc&&1>=Fc?(Fc=new cd("Intersection"),Fc.points.push(new Yd(Y.x+Cc*(Ba.x-Y.x),Y.y+Cc*(Ba.y-Y.y)))):Fc=new cd("No Intersection")):Fc=0===Cc||0===Fc?new cd("Coincident"):new cd("Parallel");return Fc}},
{key:"intersectLinePolygon",value:function(Y,Ba,mb){return cd.intersectLinePolyline(Y,Ba,bd(mb))}},{key:"intersectLinePolyline",value:function(Y,Ba,mb){for(var Ca=new cd("No Intersection"),Cc=mb.length,Fc=0;Fc<Cc-1;Fc++){var ud=cd.intersectLineLine(Y,Ba,mb[Fc],mb[Fc+1]);Ca.appendPoints(ud.points)}0<Ca.points.length&&(Ca.status="Intersection");return Ca}},{key:"intersectLineRectangle",value:function(Y,Ba,mb,Ca){var Cc=mb.min(Ca),Fc=mb.max(Ca);Ca=new Yd(Fc.x,Cc.y);var ud=new Yd(Cc.x,Fc.y);mb=cd.intersectLineLine(Cc,
Ca,Y,Ba);Ca=cd.intersectLineLine(Ca,Fc,Y,Ba);Fc=cd.intersectLineLine(Fc,ud,Y,Ba);Y=cd.intersectLineLine(ud,Cc,Y,Ba);Ba=new cd("No Intersection");Ba.appendPoints(mb.points);Ba.appendPoints(Ca.points);Ba.appendPoints(Fc.points);Ba.appendPoints(Y.points);0<Ba.points.length&&(Ba.status="Intersection");return Ba}},{key:"intersectPolygonPolygon",value:function(Y,Ba){return cd.intersectPolylinePolyline(bd(Y),bd(Ba))}},{key:"intersectPolygonPolyline",value:function(Y,Ba){return cd.intersectPolylinePolyline(bd(Y),
Ba)}},{key:"intersectPolygonRectangle",value:function(Y,Ba,mb){return cd.intersectPolylineRectangle(bd(Y),Ba,mb)}},{key:"intersectPolylinePolyline",value:function(Y,Ba){for(var mb=new cd("No Intersection"),Ca=Y.length,Cc=0;Cc<Ca-1;Cc++){var Fc=cd.intersectLinePolyline(Y[Cc],Y[Cc+1],Ba);mb.appendPoints(Fc.points)}0<mb.points.length&&(mb.status="Intersection");return mb}},{key:"intersectPolylineRectangle",value:function(Y,Ba,mb){var Ca=Ba.min(mb),Cc=Ba.max(mb);mb=new Yd(Cc.x,Ca.y);var Fc=new Yd(Ca.x,
Cc.y);Ba=cd.intersectLinePolyline(Ca,mb,Y);mb=cd.intersectLinePolyline(mb,Cc,Y);Cc=cd.intersectLinePolyline(Cc,Fc,Y);Y=cd.intersectLinePolyline(Fc,Ca,Y);Ca=new cd("No Intersection");Ca.appendPoints(Ba.points);Ca.appendPoints(mb.points);Ca.appendPoints(Cc.points);Ca.appendPoints(Y.points);0<Ca.points.length&&(Ca.status="Intersection");return Ca}},{key:"intersectRectangleRectangle",value:function(Y,Ba,mb,Ca){var Cc=Y.min(Ba),Fc=Y.max(Ba);Ba=new Yd(Fc.x,Cc.y);var ud=new Yd(Cc.x,Fc.y);Y=cd.intersectLineRectangle(Cc,
Ba,mb,Ca);Ba=cd.intersectLineRectangle(Ba,Fc,mb,Ca);Fc=cd.intersectLineRectangle(Fc,ud,mb,Ca);mb=cd.intersectLineRectangle(ud,Cc,mb,Ca);Ca=new cd("No Intersection");Ca.appendPoints(Y.points);Ca.appendPoints(Ba.points);Ca.appendPoints(Fc.points);Ca.appendPoints(mb.points);0<Ca.points.length&&(Ca.status="Intersection");return Ca}},{key:"intersectRayRay",value:function(Y,Ba,mb,Ca){var Cc=(Ca.x-mb.x)*(Y.y-mb.y)-(Ca.y-mb.y)*(Y.x-mb.x);var Fc=(Ba.x-Y.x)*(Y.y-mb.y)-(Ba.y-Y.y)*(Y.x-mb.x);mb=(Ca.y-mb.y)*(Ba.x-
Y.x)-(Ca.x-mb.x)*(Ba.y-Y.y);0!==mb?(Fc=Cc/mb,Cc=new cd("Intersection"),Cc.points.push(new Yd(Y.x+Fc*(Ba.x-Y.x),Y.y+Fc*(Ba.y-Y.y)))):Cc=0===Cc||0===Fc?new cd("Coincident"):new cd("Parallel");return Cc}}]);return cd}();af=function(){function cd(){ma(this||C,cd)}O(cd,null,[{key:"arc",value:function(Y,Ba,mb,Ca,Cc,Fc){return fc.arc.apply(fc,arguments)}},{key:"quadraticBezier",value:function(Y,Ba,mb,Ca,Cc,Fc){return fc.quadraticBezier.apply(fc,arguments)}},{key:"cubicBezier",value:function(Y,Ba,mb,Ca,Cc,
Fc,ud,ke){return fc.cubicBezier.apply(fc,arguments)}},{key:"circle",value:function(Y,Ba,mb){return fc.circle.apply(fc,arguments)}},{key:"ellipse",value:function(Y,Ba,mb,Ca){return fc.ellipse.apply(fc,arguments)}},{key:"line",value:function(Y,Ba,mb,Ca){return fc.line.apply(fc,arguments)}},{key:"path",value:function(Y){return fc.path.apply(fc,arguments)}},{key:"polygon",value:function(Y){return fc.polygon.apply(fc,arguments)}},{key:"polyline",value:function(Y){return fc.polyline.apply(fc,arguments)}},
{key:"rectangle",value:function(Y,Ba,mb,Ca){return fc.rectangle.apply(fc,arguments)}}]);return cd}();Ig=function(){function cd(){ma(this||C,cd)}O(cd,null,[{key:"arc",value:function(Y,Ba,mb,Ca,Cc){return fc.arc.apply(fc,arguments)}},{key:"quadraticBezier",value:function(Y,Ba,mb){return fc.quadraticBezier.apply(fc,arguments)}},{key:"cubicBezier",value:function(Y,Ba,mb,Ca){return fc.cubicBezier.apply(fc,arguments)}},{key:"circle",value:function(Y,Ba){return fc.circle.apply(fc,arguments)}},{key:"ellipse",
value:function(Y,Ba,mb){return fc.ellipse.apply(fc,arguments)}},{key:"line",value:function(Y,Ba){return fc.line.apply(fc,arguments)}},{key:"path",value:function(Y){return fc.path.apply(fc,arguments)}},{key:"polygon",value:function(Y){return fc.polygon.apply(fc,arguments)}},{key:"polyline",value:function(Y){return fc.polyline.apply(fc,arguments)}},{key:"rectangle",value:function(Y,Ba){return fc.rectangle.apply(fc,arguments)}}]);return cd}();var Gf=function(){function cd(){ma(this||C,cd)}O(cd,null,
[{key:"circle",value:function(Y){if(!1===Y instanceof SVGCircleElement)throw new TypeError("Expected SVGCircleElement, but found ".concat(Y));var Ba=new Yd(Y.cx.baseVal.value,Y.cy.baseVal.value);return fc.circle(Ba,Y.r.baseVal.value)}},{key:"ellipse",value:function(Y){if(!1===Y instanceof SVGEllipseElement)throw new TypeError("Expected SVGEllipseElement, but found ".concat(Y));var Ba=new Yd(Y.cx.baseVal.value,Y.cy.baseVal.value);return fc.ellipse(Ba,Y.rx.baseVal.value,Y.ry.baseVal.value)}},{key:"line",
value:function(Y){if(!1===Y instanceof SVGLineElement)throw new TypeError("Expected SVGLineElement, but found ".concat(Y));var Ba=new Yd(Y.x1.baseVal.value,Y.y1.baseVal.value);Y=new Yd(Y.x2.baseVal.value,Y.y2.baseVal.value);return fc.line(Ba,Y)}},{key:"path",value:function(Y){if(!1===Y instanceof SVGPathElement)throw new TypeError("Expected SVGPathElement, but found ".concat(Y));Y=Y.getAttributeNS(null,"d");return fc.path(Y)}},{key:"polygon",value:function(Y){if(!1===Y instanceof SVGPolygonElement)throw new TypeError("Expected SVGPolygonElement, but found ".concat(Y));
for(var Ba=[],mb=0;mb<Y.points.numberOfItems;mb++){var Ca=Y.points.getItem(mb);Ba.push(new Yd(Ca.x,Ca.y))}return fc.polygon(Ba)}},{key:"polyline",value:function(Y){if(!1===Y instanceof SVGPolylineElement)throw new TypeError("Expected SVGPolylineElement, but found ".concat(Y));for(var Ba=[],mb=0;mb<Y.points.numberOfItems;mb++){var Ca=Y.points.getItem(mb);Ba.push(new Yd(Ca.x,Ca.y))}return fc.polyline(Ba)}},{key:"rect",value:function(Y){if(!1===Y instanceof SVGRectElement)throw new TypeError("Expected SVGRectElement, but found ".concat(Y));
return fc.rectangle(Y.x.baseVal.value,Y.y.baseVal.value,Y.width.baseVal.value,Y.height.baseVal.value,Y.rx.baseVal.value,Y.ry.baseVal.value)}},{key:"element",value:function(Y){if(!1===Y instanceof SVGElement)throw new TypeError("Expected SVGElement, but found ".concat(Y));var Ba=Y.tagName;switch(Ba){case "circle":return cd.circle(Y);case "ellipse":return cd.ellipse(Y);case "line":return cd.line(Y);case "path":return cd.path(Y);case "polygon":return cd.polygon(Y);case "polyline":return cd.polyline(Y);
case "rect":return cd.rect(Y);default:throw new TypeError("Unrecognized element type: '".concat(Ba,"'"));}}}]);return cd}(),Vf={pointInCircle:function(cd,Y,Ba){return le.fromPoints(Y,cd).length()<=Ba},pointInEllipse:function(cd,Y,Ba,mb){cd=cd.subtract(Y);return 1>=cd.x*cd.x/(Ba*Ba)+cd.y*cd.y/(mb*mb)},pointInPolyline:function(cd,Y){for(var Ba=Y.length,mb=0,Ca,Cc=Y[0],Fc=1;Fc<=Ba;Fc++){var ud=Y[Fc%Ba];Ca=Math.min(Cc.y,ud.y);var ke=Math.max(Cc.y,ud.y),ze=Math.max(Cc.x,ud.x);Cc.y!==ud.y&&Ca<cd.y&&cd.y<=
ke&&cd.x<=ze&&(Ca=(cd.y-Cc.y)*(ud.x-Cc.x)/(ud.y-Cc.y)+Cc.x,(Cc.x===ud.x||cd.x<=Ca)&&mb++);Cc=ud}return 1===mb%2}};Vf.pointInPolygon=Vf.pointInPolyline;Vf.pointInRectangle=function(cd,Y,Ba){return Y.x<=cd.x&&cd.x<Ba.x&&Y.y<=cd.y&&cd.y<Ba.y};wa.AffineShapes=Ig;wa.Intersection=Pe;wa.IntersectionArgs=fc;wa.IntersectionQuery=Vf;wa.Matrix2D=Be;wa.Point2D=Yd;wa.ShapeInfo=fc;wa.Shapes=af;wa.SvgShapes=Gf;wa.Vector2D=le;Object.defineProperty(wa,"__esModule",{value:!0})});Pb.AffineShapes;Pb.Intersection;Pb.IntersectionArgs;
Pb.IntersectionQuery;Pb.Matrix2D;Pb.Point2D;Pb.ShapeInfo;Pb.Shapes;Pb.SvgShapes;Pb.Vector2D;Pb.__esModule;var da=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js");da.obj=Sb;da.PropertyPath=Id;da.string=rd;da.num=La;da.arr=Bb;da.properties=eb;da.pt=Tc;da.Color=Jc;da.Rectangle=cb;da.rect=Xb;da.signal=$d;da.connect=ub;da.disconnect=jb;da.Morph=pd;da.ShadowObject=Fd;da.morph=Nb;da.Text=Pc;da.HorizontalLayout=vd;da.Path=E;da.Ellipse=K;da.Label=ic;da.Tooltip=Wb;da.Icon=nd;da.kld=
Pb;da.Menu=Ob;da.SystemTooltip=Oc;Ob=da.kld;da.Shapes=Ob.Shapes;da.Intersection=Ob.Intersection;(function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),ma=ca.hasOwnProperty("LeashEndpoint")&&"function"===typeof ca.LeashEndpoint?ca.LeashEndpoint:ca.LeashEndpoint=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"dragTriggerDistance",get:function(){return this.connectedMorph?
20:0}},{key:"onDragStart",value:function(u){var O=u.state;u.state.dragDelta=O.lastDragPosition.subPt(O.clickedOnPosition);u.state.endpoint=this;this.leash.onEndpointDrag(u)}},{key:"canConnectTo",value:function(u){return!u.isWorld&&!u.isHaloItem&&this.leash.canConnectTo(u)&&!u.isHighlighter&&!u.ownerChain().some(function(O){return O.isHaloItem})}},{key:"onDrag",value:function(u){var O=this;if(this.connectedMorph)this.clearConnection();else{var P=u.hand.findDropTarget(u.hand.globalPosition,[this.leash,
this.leash.endPoint,this.leash.startPoint],function(fa){return O.canConnectTo(fa)});this.possibleTarget!=P&&this.highlighter&&this.highlighter.deactivate();if(this.possibleTarget=P)this.closestSide=this.possibleTarget.globalBounds().partNameNearest(da.obj.keys(da.Leash.connectionPoints),this.globalPosition),this.highlighter=$world.highlightMorph($world,this.possibleTarget,!1,[this.closestSide]),this.highlighter.show(),this.highlighter.get("name tag").value=this.leash.getLabelFor(this.possibleTarget)}u.state.endpoint=
this;this.leash.onEndpointDrag(u)}},{key:"onDragEnd",value:function(){$world.removeHighlighters();this.possibleTarget&&this.closestSide&&this.attachTo(this.possibleTarget,this.closestSide)}},{key:"getConnectionPoint",value:function(){var u=this.connectedMorph,O=u.isPath,P=u.isPolygon,fa=u.vertices,Qa=u.origin;u=this.connectedMorph.globalBounds();if((O||P)&&"center"!=this.attachedSide){O=fa.map(function(Gb){return da.pt(Gb.x,Gb.y).addPt(Qa)});P=da.Rectangle.unionPts(O);var Ua=P[this.attachedSide]();
P=P.center().addPt(P.center().subPt(Ua));P=da.Shapes.line(Ua.x,Ua.y,P.x,P.y);O=da.Shapes.polyline(O.map(function(Gb){return[Gb.x,Gb.y]}).flat());O=da.arr.min(da.Intersection.intersect(O,P).points,function(Gb){return da.pt(Gb.x,Gb.y).dist(Ua)});return da.pt(O.x,O.y).addPt(u.topLeft())}return u[this.attachedSide]()}},{key:"update",value:function(u){u&&!["position","extent","rotation","scale"].includes(u.prop)&&u.target!=this.connectedMorph||!this.connectedMorph||(u=this.getConnectionPoint(),u=this.leash.localize(u),
this.vertex.position=u,this.relayout())}},{key:"clearConnection",value:function(){this.connectedMorph&&(da.disconnect(this.connectedMorph,"onChange",this,"update"),this.connectedMorph=null)}},{key:"relayout",value:function(u){var O=this.vertex.position,P=O.x;O=O.y;var fa=this.leash.borderWidth;u&&u.meta&&u.meta.animation?this.animate({center:da.pt(P+fa,O+fa),duration:u.duration}):this.center=da.pt(P+fa,O+fa)}},{key:"attachTo",value:function(u,O){this.clearConnection();this.leash.world()||this.leash.openInWorld(u.globalPosition);
this.connectedMorph=u;this.attachedSide=O;this.vertex.controlPoints=this.leash.controlPointsFor(O,this);this.update();da.connect(this.connectedMorph,"onChange",this,"update")}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LeashEndpoint"}},{key:"properties",get:function(){return{index:{},leash:{},nativeCursor:{defaultValue:"-webkit-grab"},attachedSide:{},connectedMorph:{},draggable:{defaultValue:!0},vertex:{after:["leash"],get:function(){return this.leash.vertices[this.index]},
set:function(u){this.leash.vertices[this.index]=u;this.leash.vertices=this.leash.vertices}}}}}],ca,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:519,end:4785})})(da.Ellipse);va=Lc("i",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),ma=
ca.hasOwnProperty("Leash")&&"function"===typeof ca.Leash?ca.Leash:ca.Leash=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"onMouseDown",value:function(u){this.updateEndpointStyles()}},{key:"updateEndpointStyles",value:function(){Object.assign(this.startPoint,this.getEndpointStyle(0));Object.assign(this.endPoint,this.getEndpointStyle(1));this.relayout()}},{key:"remove",value:function(){Ac._get(Object.getPrototypeOf(ma.prototype),
"remove",this).call(this);this.startPoint.clearConnection();this.endPoint.clearConnection()}},{key:"onEndpointDrag",value:function(u){u.state.endpoint.vertex.position=u.state.endpoint.vertex.position.addPt(u.state.dragDelta);this.relayout()}},{key:"getEndpointStyle",value:function(u){return Object.assign({},this.endpointStyle,{},0==u?this.endpointStyle.start:this.endpointStyle.end)}},{key:"endpoint",value:function(u){var O=this.vertices[u];return new da.LeashEndpoint({index:u,leash:this,position:da.pt(O.x,
O.y)})}},{key:"controlPointsFor",value:function(u,O){u=da.Leash.connectionPoints[u];u=O==this.startPoint?u.negated():u;return{previous:u.scaleBy(100),next:u.negated().scaleBy(100)}}},{key:"relayout",value:function(u){if(!u||["vertices","position"].includes(u.prop))this.startPoint.relayout(u),this.endPoint.relayout(u)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Leash"}},{key:"connectionPoints",get:function(){return{topCenter:da.pt(0,-1),topLeft:da.pt(-1,-1),rightCenter:da.pt(1,
0),bottomRight:da.pt(1,1),bottomCenter:da.pt(0,1),bottomLeft:da.pt(-1,1),leftCenter:da.pt(-1,0),topRight:da.pt(1,-1),center:da.pt(0,0)}}},{key:"properties",get:function(){return{start:{defaultValue:da.pt(0,0)},end:{defaultValue:da.pt(0,0)},canConnectTo:{defaultValue:function(u){return!0}},getLabelFor:{defaultValue:function(u){return u.name}},reactsToPointer:{defaultValue:!1},acceptsDroppedMorphs:{defaultValue:!1},direction:{type:"Enum",values:["unidirectional","outward","inward"],defaultValue:"unidirectional"},
endpointStyle:{isStyleProp:!0,defaultValue:{fill:da.Color.black,origin:da.pt(3.5,3.5),extent:da.pt(10,10),nativeCursor:"-webkit-grab"}},borderWidth:{defaultValue:2},borderColor:{defaultValue:da.Color.black},fill:{defaultValue:da.Color.transparent},vertices:{after:["start","end","borderWidth"],initialize:function(){this.vertices=[this.start,this.end]}},submorphs:{initialize:function(){this.submorphs=[this.startPoint=this.endpoint(0),this.endPoint=this.endpoint(1)];da.connect(this,"onChange",this,"relayout");
this.updateEndpointStyles()}}}}}],ca,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:4794,end:7809})}(da.Path));da.Leash=va;da.Leash=va;Od=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),ma=ca.hasOwnProperty("Slider")&&"function"===typeof ca.Slider?
ca.Slider:ca.Slider=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"normalize",value:function(u){return Math.abs(u/(this.max-this.min))}},{key:"update",value:function(){var u=(this.width-15)*this.normalize(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.value);this.getSubmorphNamed("slideHandle").center=da.pt(u+7.5,10)}},{key:"onSlide",value:function(u,O){u=da.num.roundTo(this.value+
O.x/this.width,.01);this.value=u=Math.max(this.min,Math.min(this.max,u));this.update(u)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"Slider"}},{key:"properties",get:function(){return{value:{},min:{},max:{},height:{defaultValue:20},fill:{defaultValue:da.Color.transparent},draggable:{defaultValue:!1},submorphs:{after:["value","max","min"],initialize:function(){var u=new da.SliderHandle({slider:this,name:"slideHandle"});this.submorphs=[new da.Path({borderColor:da.Color.gray.darker(),
borderWidth:2,vertices:[da.pt(0,0),da.pt(this.width,0)],position:da.pt(0,this.height/2)}),u];da.connect(this,"extent",this,"update");this.update()}}}}}],ca,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:7817,end:9143})}(da.Morph);da.Slider=Od;da.Slider=Od;(function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),
ma=ca.hasOwnProperty("SliderHandle")&&"function"===typeof ca.SliderHandle?ca.SliderHandle:ca.SliderHandle=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"onDragStart",value:function(u){this.valueView=(new da.Tooltip({description:""})).openInWorld(u.hand.position.addXY(10,10))}},{key:"onDrag",value:function(u){this.slider.onSlide(this,u.state.dragDelta);this.valueView.description=
this.slider.value;this.valueView.position=u.hand.position.addXY(10,10)}},{key:"onDragEnd",value:function(u){this.valueView.remove()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"SliderHandle"}},{key:"properties",get:function(){return{slider:{},fill:{defaultValue:da.Color.gray},borderColor:{defaultValue:da.Color.gray.darker()},borderWidth:{defaultValue:1},dropShadow:{defaultValue:new da.ShadowObject({blur:5})},extent:{defaultValue:da.pt(15,15)},nativeCursor:{defaultValue:"-webkit-grab"},
draggable:{defaultValue:!0}}}}],ca,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:9145,end:10092})})(da.Ellipse);Hd=Lc("V",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),ma=ca.hasOwnProperty("ValueScrubber")&&"function"===typeof ca.ValueScrubber?
ca.ValueScrubber:ca.ValueScrubber=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"relayout",value:function(){var u=this;this.withMetaDo({metaInteraction:!0},function(){u.scaleToBounds&&(u.scale=Math.min(1,u.width/(u.textBounds().width+0)))})}},{key:"onKeyDown",value:function(u){Ac._get(Object.getPrototypeOf(ma.prototype),"onKeyDown",this).call(this,u);if("Enter"==u.keyCombo){var O=
this.textString.replace("\n","").split(" ");O=yb(O,2);var P=O[0];O[1];"string"===typeof P&&(this.value=parseFloat(P),this.scrub(this.scrubbedValue));u.stop()}}},{key:"scrub",value:function(u){this.field.update(u)}},{key:"onDragStart",value:function(u){this.execCommand("toggle active mark");this.initPos=u.position;this.factorLabel=(new da.Tooltip({master:da.SystemTooltip,description:"1x"})).openInWorld(u.hand.position.addXY(10,10));u.hand.extent=da.pt(30,30);u.hand.nativeCursor="ew-resize";u.hand.fill=
da.Color.transparent;u.hand.reactsToPointer=!0}},{key:"getScaleAndOffset",value:function(u){var O=u.position.subPt(this.initPos);u=O.x;O=da.num.roundTo(Math.exp(-O.y/$world.height*4),.01)*this.baseFactor;return{offset:u,scale:O}}},{key:"onDrag",value:function(u){var O=this.getScaleAndOffset(u),P=O.scale;O=this.getCurrentValue(O.offset,P);this.scrub(O);O=this.floatingPoint?O.toFixed(this.precision):da.obj.safeToString(O);this.unit&&(O+=" "+this.unit);this.replace(this.documentRange,O,!1,this.scaleToBounds,
!1,!1);this.factorLabel.description=P.toFixed(this.precision)+"x";this.factorLabel.position=u.hand.position.addXY(10,10);u.hand.moveBy(da.pt(-5,-5));this.relayout()}},{key:"getCurrentValue",value:function(u,O){return Math.max(this.min,Math.min(this.max,this.scrubbedValue+(this.floatingPoint?u*O:Math.round(u*O))))}},{key:"onDragEnd",value:function(u){var O=this.getScaleAndOffset(u);this.value=this.getCurrentValue(O.offset,O.scale);this.factorLabel.softRemove();u.hand.extent=da.pt(1,1);u.hand.fill=
da.Color.orange;u.hand.reactsToPointer=!1}},{key:"value",set:function(u){this.scrubbedValue=u=Math.max(this.min,Math.min(this.max,u));u=this.floatingPoint?u.toFixed(this.precision):da.obj.safeToString(u);u=this.unit?u+(" "+this.unit):u+"";this.replace(this.documentRange,u,!1,!0);this.relayout()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"ValueScrubber"}},{key:"properties",get:function(){return{scaleToBounds:{defaultValue:!1,set:function(u){this.fixedWidth=!0;this.setProperty("scaleToBounds",
u)}},field:{derived:!0,get:function(){return this.owner}},value:{defaultValue:0},fill:{defaultValue:da.Color.transparent},draggable:{defaultValue:!0},min:{defaultValue:-Infinity},max:{defaultValue:Infinity},baseFactor:{defaultValue:1},floatingPoint:{defaultValue:!1},precision:{defaultValue:3}}}}],ca,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",
version:"0.1.0"}}},{start:10101,end:13614})}(da.Text));da.ValueScrubber=Hd;da.ValueScrubber=Hd;Ob=function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),ma=ca.hasOwnProperty("CheckBox")&&"function"===typeof ca.CheckBox?ca.CheckBox:ca.CheckBox=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"trigger",value:function(){try{this.checked=!this.checked,
da.signal(this,"toggle",this.checked)}catch(O){var u=this.world();u?u.logError(O):console.error(O)}}},{key:"onMouseDown",value:function(u){this.active&&this.trigger()}},{key:"render",value:function(u){return u.renderCheckBox(this)}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"CheckBox"}},{key:"properties",get:function(){return{draggable:{defaultValue:!1},extent:{defaultValue:da.pt(15,15)},borderWidth:{defaultValue:0},active:{defaultValue:!0},checked:{defaultValue:!1},fill:{defaultValue:da.Color.transparent},
nativeCursor:{defaultValue:"pointer"}}}}],ca,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:13622,end:14456})}(da.Morph);da.CheckBox=Ob;da.CheckBox=Ob;Qc=Lc("a",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),ma=ca.hasOwnProperty("LabeledCheckBox")&&
"function"===typeof ca.LabeledCheckBox?ca.LabeledCheckBox:ca.LabeledCheckBox=function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"disable",value:function(){this.active=!1;this.labelMorph.opacity=.5}},{key:"enable",value:function(){this.active=!0;this.labelMorph.opacity=1}},{key:"trigger",value:function(){this.checkboxMorph.trigger()}},{key:"onMouseDown",value:function(u){this.active&&
this.trigger();u.stop()}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"LabeledCheckBox"}},{key:"example",value:function(){(new da.LabeledCheckBox({label:"foo"})).openInWorld()}},{key:"properties",get:function(){return{name:{defaultValue:"LabeledCheckBox"},alignCheckBox:{defaultValue:"left",type:"Enum",values:["left","right"],set:function(u){this.layout=new da.HorizontalLayout({direction:"left"==u?"leftToRight":"rightToLeft"});this.setProperty("alignCheckBox",u)}},layout:{initialize:function(){this.layout=
new da.HorizontalLayout({direction:"left"==this.alignCheckBox?"leftToRight":"rightToLeft"})}},label:{defaultValue:"label",after:["submorphs"],derived:!0,get:function(){return this.labelMorph.value},set:function(u){this.labelMorph.value=u}},checked:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.checked},set:function(u){this.checkboxMorph.checked=u;da.signal(this,"checked",u)}},active:{after:["submorphs"],derived:!0,get:function(){return this.checkboxMorph.active},set:function(u){this.checkboxMorph.active=
u}},labelMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("label")}},checkboxMorph:{derived:!0,readOnly:!0,get:function(){return this.getSubmorphNamed("checkbox")}},submorphs:{initialize:function(){this.submorphs=[new da.CheckBox({name:"checkbox"}),new da.Label({nativeCursor:"pointer",name:"label",padding:da.Rectangle.inset(5,3)})];da.connect(this,"alignCheckBox",this,"extent");da.connect(this.checkboxMorph,"checked",this,"checked")}}}}}],ca,{pathInPackage:function(){return"./widgets.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:14464,end:17021})}(da.Morph));da.LabeledCheckBox=Qc;da.LabeledCheckBox=Qc;rf=Lc("D",function(wa){var ca=window.lively.FreezerRuntime.recorderFor("lively.components/widgets.js"),ma=ca.hasOwnProperty("DropDownSelector")&&"function"===typeof ca.DropDownSelector?ca.DropDownSelector:ca.DropDownSelector=
function(u){if(!u||!u[Symbol["for"]("lively-instance-restorer")])return this[Symbol["for"]("lively-instance-initialize")].apply(this,arguments)};return Ac(ma,wa,[{key:"build",value:function(){this.dropDownLabel=da.Icon.makeLabel("chevron-circle-down",{opacity:0,name:"dropDownIcon"});this.submorphs=[{type:"label",name:"currentValue"},this.dropDownLabel]}},{key:"getMenuEntries",value:function(){var u=this,O=this.getNameFor(this.selectedValue);return[].concat(ba(void 0!=this.selectedValue?[{command:O,
target:this}]:[]),ba(da.arr.compact(this.commands.map(function(P){return P.name!=O&&{command:P.name,target:u}}))))}},{key:"commands",get:function(){var u=this;return da.obj.isArray(this.values)?this.values.map(function(O){return{name:String(O),exec:function(){da.signal(u,"update",O);u.selectedValue=O}}}):da.properties.forEachOwn(this.values,function(O,P){return{name:O,exec:function(){da.signal(u,"update",P);u.selectedValue=P}}})}},{key:"getNameFor",value:function(u){return this.getCurrentValue?this.getCurrentValue():
da.obj.isArray(this.values)?da.obj.safeToString(u):da.obj.safeToString(da.properties.nameFor(this.values,u))}},{key:"relayout",value:function(){var u=this.getNameFor(this.selectedValue),O=this.get("currentValue");"undefined"==u?(O.value="Not set",O.fontColor=da.Color.gray):(O.value=u,O.fontColor=da.Color.black)}},{key:"onHoverIn",value:function(){this.dropDownLabel.animate({opacity:1,duration:300})}},{key:"onHoverOut",value:function(){this.dropDownLabel.animate({opacity:0,duration:200})}},{key:"onMouseDown",
value:function(u){var O=this.env.eventDispatcher.eventState;O.menu&&O.menu.remove();O.menu=this.getMenuEntries()&&this.getMenuEntries().length?da.Menu.openAtHand(this.getMenuEntries(),{hand:u&&u.hand}):null;this.menu=O.menu;this.menu.hasFixedPosition=!0;this.menu.topLeft=this.globalPosition}}],[{key:Symbol["for"]("__LivelyClassName__"),get:function(){return"DropDownSelector"}},{key:"properties",get:function(){return{values:{defaultValue:[]},getCurrentValue:{defaultValue:void 0},selectedValue:{after:["submorphs",
"values","getCurrentValue"],set:function(u){this.setProperty("selectedValue",u);this.relayout()}},fontColor:{isStyleProp:!0,defaultValue:da.Color.black},fontSize:{isStyleProp:!0,defaultValue:12},fontFamily:{isStyleProp:!0,defaultValue:"Sans-Serif"},border:{defaultValue:{radius:3,color:da.Color.gray.darker(),style:"solid"}},padding:{defaultValue:1},isSelected:{defaultValue:"false",set:function(u){this.setProperty("isSelected",u);this.fontColor=u?da.Color.white:da.Color.black}},layout:{initialize:function(){this.layout=
new da.HorizontalLayout({spacing:this.padding})}},submorphs:{initialize:function(){this.build()}}}}}],ca,{pathInPackage:function(){return"./widgets.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},"package":function(){return{name:"lively.components",version:"0.1.0"}}},{start:17029,end:20723})}(da.Morph));da.DropDownSelector=rf;da.DropDownSelector=rf;va=Object.freeze({__proto__:null,Leash:va,Slider:Od,
ValueScrubber:Hd,CheckBox:Ob,LabeledCheckBox:Qc,DropDownSelector:rf,SearchField:void 0});Od=window.lively.FreezerRuntime.recorderFor("lively.components/index.js");Object.assign(Od,Lb);Object.assign(Od,Ub);Object.assign(Od,N);Object.assign(Od,Wa);Object.assign(Od,pa);Object.assign(Od,tb);Od.Window=fe;Od.prompts=Db;Od.widgets=va;Od.LoadingIndicator=vc;Od.addClassMappings=R;Od.List=qb;Od.DropDownList=Vb;Od.Button=xb;Od.CheckBox=Ob;Od.addClassMappings({list:Od.List,dropdownlist:Od.DropDownList,button:Od.Button,
checkbox:Od.CheckBox,labeledcheckbox:Od.widgets.LabeledCheckBox});Od.Window=fe;Od.LoadingIndicator=vc;Od.prompts=Db;Od.widgets=va;Lc("_",void 0)}}});