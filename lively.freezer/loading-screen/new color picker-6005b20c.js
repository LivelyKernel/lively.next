System.register("./__root_module__-884b54f8.js kld-intersections ./index-9ec474a0.js ./color-picker-efbd7363.js ./index-4d2f3cd3.js ./index-ef56f8ef.js".split(" "),function(){var za,cb,mb,Pb,tb,Fc,vc,Qc,mc,ic,zc,Dc,Gd,Hd,Zd,xc,od,qb;return{setters:[function(kc){za=kc.M;cb=kc.a;mb=kc.C;Pb=kc.d;tb=kc.i;Fc=kc.a9;vc=kc.a7;Qc=kc.$;mc=kc.r;ic=kc.c;zc=kc.bH;Dc=kc.ac;Gd=kc.b;Hd=kc.a8;Zd=kc.V;xc=kc.bm;od=kc.bn;qb=kc.bl},function(){},function(){},function(){},function(){},function(){}],execute:function(){var kc=
lively.FreezerRuntime.recorderFor("ColorPicker/index.js");kc.Morph=za;kc.arr=cb;kc.Color=mb;kc.signal=Pb;var Uc=function(wc){var dc=lively.FreezerRuntime.recorderFor("ColorPicker/index.js"),Nc=dc.hasOwnProperty("ColorPicker")&&"function"===typeof dc.ColorPicker?dc.ColorPicker:dc.ColorPicker=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return tb(Nc,wc,[{key:"toggleHalos",value:function($a){this.withAllSubmorphsDo(function(Xa){return Xa.halosEnabled=
$a});this.ui.gradientControl.gradientHalo.withAllSubmorphsDo(function(Xa){return Xa.halosEnabled=$a})}},{key:"focusOnMorph",value:function($a,Xa){var Gb=$a&&$a.world();Gb&&(Gb.halos().forEach(function(ub){return ub.remove()}),Gb.withTopBarDo(function(ub){return ub.setEditMode("Hand",!0)}));this._target=$a;Xa.isGradient?(this.ui.gradientControl.setGradient(Xa,this),this.ui.colorTypeSelector.selection=Xa.type):(this.color=Xa,this.ui.colorTypeSelector.selection="Solid");this.update()}},{key:"close",
value:function(){this.remove();var $a=this._target&&this._target.world();$a&&$a.withTopBarDo(function(Xa){return Xa.setEditMode("Halo",!0)});this.ui.gradientControl.toggle(!1,this)}},{key:"confirm",value:function(){switch(this.colorMode){case "linearGradient":case "radialGradient":kc.signal(this,"value",this.gradientValue);break;case "Solid":kc.signal(this,"value",this.color)}}},{key:"switchMode",value:function($a){var Xa=["linearGradient","radialGradient"].includes($a);this.ui.gradientControl.toggle(Xa,
this);this.colorMode=$a;this.update();this.confirm()}},{key:"enterColor",value:function($a){this.color=$a;this.update(this.ui.colorEncoder);this.confirm()}},{key:"adjustColor",value:function($a){this.color=$a;this.update();this.confirm()}},{key:"adjustOpacity",value:function($a){this.hsb=[].concat($jscomp.arrayFromIterable(this.hsb.slice(0,3)),[$a]);this.update(this.ui.opacityPicker);this.confirm()}},{key:"adjustHue",value:function($a){this.hsb=[$a].concat($jscomp.arrayFromIterable(this.hsb.slice(1)));
this.update(this.ui.huePicker);this.confirm()}},{key:"adjustShade",value:function($a){var Xa=$jscomp.makeIterator($a);$a=Xa.next().value;Xa=Xa.next().value;this.hsb=[this.hsb[0],Xa,$a,this.hsb[3]];this.update(this.ui.shadePicker);this.confirm()}},{key:"adjustGradient",value:function($a){this.confirm()}},{key:"update",value:function($a){for(var Xa=[],Gb=0;Gb<arguments.length;++Gb)Xa[Gb-0]=arguments[Gb];var ub=this;kc.arr.withoutAll(Object.values(this.ui),[].concat($jscomp.arrayFromIterable(Xa),[this.ui.colorTypeSelector])).forEach(function(db){return db.update(ub)})}}],
[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPicker"}},{key:"properties",get:function(){return{colorMode:{},hsb:{initialize:function(){this.hsb=[].concat($jscomp.arrayFromIterable(kc.Color.red.toHSB()),[1])}},gradientValue:{derived:!0,get:function(){return this.ui.gradientControl.gradientValue},set:function($a){this.ui.gradientControl.gradientValue=$a}},color:{derived:!0,get:function(){return kc.Color.hsb.apply(kc.Color,$jscomp.arrayFromIterable(this.hsb.slice(0,3))).withA(this.hsb[3])},
set:function($a){this.hsb=[].concat($jscomp.arrayFromIterable($a.toHSB()),[$a.a])}},solidOnly:{derived:!0,set:function($a){var Xa=this.ui.colorTypeSelector;$a&&(Xa.selection="Solid");Xa.visible=!$a}},ui:{derived:!0,get:function(){return{colorTypeSelector:this.getSubmorphNamed("color type selector"),colorEncoder:this.getSubmorphNamed("color encoder"),opacityPicker:this.getSubmorphNamed("opacity slider"),shadePicker:this.getSubmorphNamed("field picker"),huePicker:this.getSubmorphNamed("hue picker"),
gradientControl:this.getSubmorphNamed("gradient control")}}}}}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPicker",version:"0.1.1-66"}}},{start:219,end:4117})}(kc.Morph);Uc=kc.ColorPicker;kc.default=Uc;var tc=lively.FreezerRuntime.recorderFor("GradientControl/index.js");tc.Morph=za;tc.LinearGradient=Fc;tc.RadialGradient=
vc;tc.Color=mb;tc.rect=Qc;tc.resource=mc;tc.connect=ic;tc.noUpdate=zc;tc.signal=Pb;tc.num=Dc;tc.arr=cb;Uc=function(wc){var dc=lively.FreezerRuntime.recorderFor("GradientControl/index.js"),Nc=dc.hasOwnProperty("GradientControl")&&"function"===typeof dc.GradientControl?dc.GradientControl:dc.GradientControl=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return tb(Nc,wc,[{key:"onKeyDown",value:function($a){tb._get(Object.getPrototypeOf(Nc.prototype),
"onKeyDown",this).call(this,$a);"Delete"==$a.keyCombo&&this.removeStop(this.selectedStopControl)}},{key:"onMouseDown",value:function($a){tb._get(Object.getPrototypeOf(Nc.prototype),"onMouseDown",this).call(this,$a);"gradient preview"==$a.targetMorph.name&&($a=$a.positionIn($a.targetMorph).x/$a.targetMorph.width,this.addStopAt($a))}},{key:"removeStop",value:function($a){3>this.gradientValue.stops.length||(tc.arr.remove(this.gradientValue.stops,$a.stop),this.refresh(),this.confirm())}},{key:"addStopAt",
value:function($a){var Xa=[].concat($jscomp.arrayFromIterable(this.gradientValue.stops)),Gb=$jscomp.makeIterator(tc.arr.sortBy(tc.arr.sortBy(Xa,function(db){return Math.abs(db.offset-$a)}).slice(0,2),function(db){return db.offset})),ub=Gb.next().value;Gb=Gb.next().value;Xa.push({color:ub.color.interpolate(($a-ub.offset)/(Gb.offset-ub.offset),Gb.color),offset:$a});this.gradientValue.stops=tc.arr.sortBy(Xa,function(db){return db.offset});this.refresh();this.confirm()}},{key:"toggle",value:function($a,
Xa){(this.isLayoutable=this.visible=$a)?this.gradientHalo.openInWorld():this.gradientHalo.remove();$a||this.reset()}},{key:"reset",value:function(){this.gradientValue=null;this.getSubmorphsByStyleClassName("ColorStop").forEach(function($a){return $a.remove()});this.gradientHalo.reset()}},{key:"initLinearGradient",value:function($a){this.gradientValue=$a.isGradient?new tc.LinearGradient({stops:$a.stops}):new tc.LinearGradient({stops:[{color:$a,offset:0},{color:tc.Color.transparent,offset:1}]})}},{key:"initRadialGradient",
value:function($a,Xa){Xa=Xa.innerBounds();this.gradientValue=$a.isGradient?new tc.RadialGradient({bounds:Xa,stops:$a.stops}):new tc.RadialGradient({bounds:Xa,stops:[{color:$a,offset:0},{color:tc.Color.transparent,offset:1}]})}},{key:"setGradient",value:function($a,Xa){this.gradientValue=$a;this.gradientHalo.initFromPicker(Xa)}},{key:"update",value:function($a){if(!this.isDisabled){var Xa=this.selectedStopControl;this.gradientValue&&this.gradientValue.type==$a.colorMode||("linearGradient"==$a.colorMode&&
this.initLinearGradient(this.gradientValue||$a.color),"radialGradient"==$a.colorMode&&this.initRadialGradient(this.gradientValue||$a.color,$a._target),this.gradientHalo.initFromPicker($a),this.gradientHalo.confirm());if(Xa){var Gb=this.gradientValue.stops.find(function(ub){return Xa.stop==ub});Gb&&(Gb.color=$a.color);this.confirm()}this.refresh()}}},{key:"getPositionFor",value:function($a){var Xa=this.getSubmorphNamed("gradient preview").bounds().topEdge();return Xa.start.interpolate($a.offset,Xa.end).subXY(0,
5)}},{key:"confirm",value:function(){tc.signal(this,"gradientChanged",this.gradientValue)}},{key:"refresh",value:function(){if(this.gradientValue){var $a=this.getSubmorphNamed("gradient"),Xa=this.gradientValue.stops.map(function(Gb){return Object.assign({},Gb)});$a.fill=new tc.LinearGradient({vector:tc.rect(0),stops:Xa});this.updateStopControls(this.gradientValue.stops);this.gradientHalo.refresh(this)}}},{key:"moveStop",value:function($a){var Xa=$jscomp.makeIterator($a);$a=Xa.next().value;Xa=Xa.next().value/
this.getSubmorphNamed("gradient preview").width;this.adjustStop($a,Xa)}},{key:"adjustStop",value:function($a,Xa){$a.offset=tc.num.clamp($a.offset+Xa,0,1);this.refresh();this.confirm()}},{key:"placeStop",value:function($a){this.addMorph($a)}},{key:"getControlFor",value:function($a,Xa){Xa=void 0===Xa?this:Xa;var Gb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ub){if(1==ub.nextAddress)return ub.yield(tc.resource("part://SystemWidgets/gradient editor/color stop").read(),2);Gb=ub.yieldResult;
Gb.withAllSubmorphsDo(function(db){return db.halosEnabled=!1});Xa.placeStop(Gb);tc.connect(Gb,"select",Xa,"selectStop");tc.connect(Gb,"moveColorStop",Xa,"moveStop");return ub.return(Gb.forStop($a))})}},{key:"selectStop",value:function($a){this.deselectAllStopsExcept($a,this);this.deselectAllStopsExcept($a,this.gradientHalo);tc.signal(this,"switchColor",$a.stop.color)}},{key:"deselectAllStopsExcept",value:function($a,Xa){tc.noUpdate(function(){Xa.getSubmorphsByStyleClassName("ColorStop").forEach(function(Gb){Gb.stop!=
$a.stop?Gb.deselect():Gb.select()})})}},{key:"updateStopControls",value:function($a,Xa){Xa=void 0===Xa?this:Xa;var Gb=this,ub,db,Xb,Fa,sb;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ya){switch(Ya.nextAddress){case 1:if(Xa._active)return Ya.return();Xa._active=!0;ub=Xa.getSubmorphsByStyleClassName("ColorStop");db=$jscomp.makeIterator($a);Xb=db.next();case 2:if(Xb.done){Ya.jumpTo(4);break}Fa=Xb.value;if(sb=ub.shift()){sb.forStop(Fa);Ya.jumpTo(3);break}return Ya.yield(Gb.getControlFor(Fa,
Xa),3);case 3:Xb=db.next();Ya.jumpTo(2);break;case 4:tc.arr.invoke(ub,"remove"),Xa.getSubmorphsByStyleClassName("ColorStop").forEach(function(pb){pb.positionIn(Xa)}),Xa._active=!1,Ya.jumpToEnd()}})}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientControl"}},{key:"properties",get:function(){return{gradientValue:{},gradientHalo:{},isDisabled:{get:function(){return!this.visible}},stopControls:{derived:!0,get:function(){return this.getSubmorphsByStyleClassName("ColorStop")}},selectedStopControl:{derived:!0,
get:function(){return this.stopControls.find(function($a){return $a.isSelected})}}}}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientControl",version:"0.1.1-93"}}},{start:317,end:6735})}(tc.Morph);Uc=tc.GradientControl;tc.default=Uc;var cd=lively.FreezerRuntime.recorderFor("GradientHalo/index.js");cd.Morph=za;cd.arr=
cb;cd.resource=mc;cd.connect=ic;cd.signal=Pb;cd.pt=Gd;cd.RadialGradient=vc;cd.LinearGradient=Fc;cd.Point=Hd;Uc=function(wc){var dc=lively.FreezerRuntime.recorderFor("GradientHalo/index.js"),Nc=dc.hasOwnProperty("GradientHalo")&&"function"===typeof dc.GradientHalo?dc.GradientHalo:dc.GradientHalo=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return tb(Nc,wc,[{key:"reset",value:function(){this.getSubmorphsByStyleClassName("ColorStop").forEach(function($a){return $a.remove()})}},
{key:"initFromPicker",value:function($a){var Xa=$a.gradientValue;this.picker=$a;"linearGradient"==Xa.type&&this.initFromLinearGradient(this.targetMorph,Xa);"radialGradient"==Xa.type&&this.initFromRadialGradient(this.targetMorph,Xa);this.alignWithTarget()}},{key:"initFromLinearGradient",value:function($a,Xa){$a=$a.innerBounds();Xa=Xa.vectorAsAngle();var Gb=$a.center(),ub=Math.max($a.height,$a.width),db=Gb.addPt(cd.Point.polar(ub,Xa));Xa=Gb.subPt(cd.Point.polar(ub,Xa));Gb=$jscomp.makeIterator($a.lineIntersection(Xa.lineTo(db)));
Xa=Gb.next().value;var Xb=Gb.next().value;Gb=cd.arr.min([Xa,Xb],function(Fa){return Fa.dist(db)});this.originPoint=Gb==Xa?Xb:Xa;this.directionPoint=Gb;this.orthogonalDist=cd.arr.min($a.edges(),function(Fa){return Fa.distanceFromLine(Xb)}).length()/2;this.alignWithTarget()}},{key:"initFromRadialGradient",value:function($a,Xa){$a=$a.innerBounds().relativeToAbsPoint(Xa.focus);var Gb=Xa.bounds;Xa=Gb.height;Gb=Gb.width;this.originPoint=$a;this.directionPoint=$a.addXY(0,Xa/2);this.orthogonalDist=Gb/2;this.alignWithTarget()}},
{key:"alignWithTarget",value:function(){var $a=this.ui,Xa=$a.directionHandle,Gb=$a.orthogonalHandle,ub=$a.colorStopWrapper;$a.originHandle.center=cd.pt(0);Xa.center=cd.pt(this.width,0);this.width=this.originPoint.dist(this.directionPoint);ub.width=this.width;Xa.center=cd.pt(this.width,0);Gb.center=cd.pt(0,this.orthogonalDist);0<this.orthogonalDist?(ub.tilted=1,ub.position=cd.pt(this.width/2,this.height/4-1)):(ub.tilted=0,ub.position=cd.pt(this.width/2,-this.height/4+1));this.position=this.targetMorph.worldPoint(this.originPoint);
this.rotation=this.angle}},{key:"confirm",value:function(){var $a=this.picker.ui.gradientControl;"linearGradient"==$a.gradientValue.type&&($a.gradientValue.vector=this.angle);if("radialGradient"==$a.gradientValue.type){var Xa=$a.gradientValue,Gb=2*Math.abs(this.orthogonalDist),ub=2*this.originPoint.dist(this.directionPoint);Xa.focus=this.originPoint.scaleByPt(this.targetMorph.extent.inverted());Xa.bounds=cd.pt(0,0).extent(cd.pt(Gb,ub));Xa.angle=this.angle}$a.confirm();this.refresh($a,this.targetMorph);
this.alignWithTarget()}},{key:"normalize",value:function($a){return this.getGlobalTransform().transformDirection($a)}},{key:"moveOriginHandle",value:function($a){$a=this.normalize($a.state.dragDelta);this.originPoint=this.originPoint.addPt($a);this.confirm()}},{key:"moveDirectionHandle",value:function($a){$a=this.normalize($a.state.dragDelta);this.directionPoint=this.directionPoint.addPt($a);this.confirm()}},{key:"moveOrthogonalHandle",value:function($a){$a=this.normalize($a.state.dragDelta);this.orthogonalDist-=
$a.dotProduct(cd.Point.polar(1,this.angle-Math.PI/2));this.confirm()}},{key:"moveStop",value:function($a){var Xa=$jscomp.makeIterator($a);$a=Xa.next().value;Xa=Xa.next().value;this.picker.ui.gradientControl.adjustStop($a,Xa/this.getSubmorphNamed("color stop wrapper").width)}},{key:"refresh",value:function($a,Xa){Xa=$a.gradientValue;this.alignWithTarget();$a.updateStopControls(Xa.stops,this)}},{key:"placeStop",value:function($a){this.get("color stop wrapper").addMorph($a)}},{key:"selectStop",value:function($a){this.picker.ui.gradientControl.selectStop($a)}},
{key:"getPositionFor",value:function($a){var Xa=this.getSubmorphNamed("color stop wrapper"),Gb=Xa.innerBounds().bottomEdge();return Gb.start.interpolate($a.offset,Gb.end).subXY(0,5).subPt(Xa.origin)}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"GradientHalo"}},{key:"properties",get:function(){return{picker:{},targetMorph:{derived:!0,get:function(){return this.picker._target}},ui:{derived:!0,get:function(){return{originHandle:this.getSubmorphNamed("origin handle"),directionHandle:this.getSubmorphNamed("direction handle"),
orthogonalHandle:this.getSubmorphNamed("orthogonal handle"),colorStopWrapper:this.getSubmorphNamed("color stop wrapper")}}},angle:{derived:!0,get:function(){return this.directionPoint.subPt(this.originPoint).theta()}}}}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"GradientHalo",version:"0.1.1-141"}}},{start:300,end:5821})}(cd.Morph);
Uc=cd.GradientHalo;cd.default=Uc;var td=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js");td.Morph=za;td.pt=Gd;td.Color=mb;td.LinearGradient=Fc;td.signal=Pb;td.num=Dc;Uc=function(wc){var dc=lively.FreezerRuntime.recorderFor("OpacityPicker/index.js"),Nc=dc.hasOwnProperty("OpacityPicker")&&"function"===typeof dc.OpacityPicker?dc.OpacityPicker:dc.OpacityPicker=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};
return tb(Nc,wc,[{key:"confirm",value:function(){td.signal(this,"opacityChanged",this.alpha)}},{key:"onMouseDown",value:function($a){var Xa=this.get("slider").width;this.sliderPosition=td.pt(0,$a.positionIn(this).y-Xa/2);this.confirm()}},{key:"onDrag",value:function($a){var Xa=this.get("slider").width;this.sliderPosition=td.pt(0,$a.positionIn(this).y-Xa/2);this.confirm()}},{key:"update",value:function($a){this.alpha=$a.color.a;this.getSubmorphNamed("opacity gradient").fill=new td.LinearGradient({stops:[{offset:0,
color:$a.color.withA(0)},{offset:1,color:$a.color.withA(1)}]});this.refresh()}},{key:"refresh",value:function(){this.get("slider").center=this.sliderPosition}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"OpacityPicker"}},{key:"properties",get:function(){return{sliderPosition:{derived:!0,after:["submorphs"],get:function(){return td.pt(this.width/2,5+(this.height-10)*this.alpha)},set:function($a){this.alpha=td.num.clamp($a.y/(this.height-10),0,1);this.refresh()}}}}}],dc,{pathInPackage:function(){return"index.js"},
unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"OpacityPicker",version:"0.1.1-26"}}},{start:221,end:1464})}(td.Morph);Uc=td.OpacityPicker;td.default=Uc;var nb=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js");nb.Morph=za;nb.Color=mb;nb.signal=Pb;nb.noUpdate=zc;nb.num=Dc;Uc=function(wc){var dc=lively.FreezerRuntime.recorderFor("ColorEncoder/index.js"),Nc=dc.hasOwnProperty("ColorEncoder")&&
"function"===typeof dc.ColorEncoder?dc.ColorEncoder:dc.ColorEncoder=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return tb(Nc,wc,[{key:"update",value:function($a){this.currentColor=$a.hsb;this.refresh()}},{key:"refresh",value:function(){var $a=this,Xa=this.currentColor;nb.noUpdate(function(){({Hex:function(){return $a.updateHex(Xa)},RGB:function(){return $a.updateRGB(Xa)},HSL:function(){return $a.updateHSL(Xa)},
HSB:function(){return $a.updateHSB(Xa)},CSS:function(){return $a.updateCSS(Xa)}})[$a.encodingMode]()})}},{key:"updateHex",value:function($a){$a=nb.Color.hsb.apply(nb.Color,$jscomp.arrayFromIterable($a)).withA(nb.num.roundTo($a[3],.01));var Xa=this.getSubmorphNamed("hex input"),Gb=this.getSubmorphNamed("hex opacity control");Xa.input=$a.toHexString().toUpperCase();Gb.number=$a.a}},{key:"updateRGB",value:function($a){var Xa=this.getSubmorphNamed("first value"),Gb=this.getSubmorphNamed("second value"),
ub=this.getSubmorphNamed("third value"),db=this.getSubmorphNamed("opacity control"),Xb=$jscomp.makeIterator(nb.Color.hsb.apply(nb.Color,$jscomp.arrayFromIterable($a)).toTuple()),Fa=Xb.next().value,sb=Xb.next().value;Xb=Xb.next().value;$a=$a[3];Xa.number=255*Fa;Gb.number=255*sb;ub.number=255*Xb;db.number=$a}},{key:"updateHSL",value:function($a,Xa){Xa=void 0===Xa?!0:Xa;var Gb=this.getSubmorphNamed("first value"),ub=this.getSubmorphNamed("second value"),db=this.getSubmorphNamed("third value"),Xb=this.getSubmorphNamed("opacity control"),
Fa=$jscomp.makeIterator($a),sb=Fa.next().value,Ya=Fa.next().value;Fa=Fa.next().value;db.number=Xa?1-Fa:Fa;Gb.number=sb;ub.number=Ya;Xb.number=$a[3]}},{key:"updateHSB",value:function($a){this.updateHSL($a,!1)}},{key:"updateCSS",value:function($a){var Xa=this.getSubmorphNamed("css input");$a=nb.Color.hsb.apply(nb.Color,$jscomp.arrayFromIterable($a)).withA(nb.num.roundTo($a[3],.01));Xa.input=$a.toCSSString()}},{key:"confirm",value:function(){var $a=this;({Hex:function(){return $a.confirmHex()},RGB:function(){return $a.confirmRGB()},
HSL:function(){return $a.confirmHSL()},HSB:function(){return $a.confirmHSB()},CSS:function(){return $a.confirmCSS()}})[this.encodingMode]()}},{key:"confirmHex",value:function(){var $a=this.getSubmorphNamed("hex input"),Xa=this.getSubmorphNamed("hex opacity control");$a=nb.Color.rgbHex($a.input).withA(Xa.number);nb.signal(this,"colorEntered",$a)}},{key:"confirmRGB",value:function(){var $a=this.getSubmorphNamed("first value"),Xa=this.getSubmorphNamed("second value"),Gb=this.getSubmorphNamed("third value"),
ub=this.getSubmorphNamed("opacity control");$a=nb.Color.rgba($a.number,Xa.number,Gb.number,ub.number);nb.signal(this,"colorEntered",$a)}},{key:"confirmHSL",value:function(){var $a=this.getSubmorphNamed("first value"),Xa=this.getSubmorphNamed("second value"),Gb=this.getSubmorphNamed("third value"),ub=this.getSubmorphNamed("opacity control");$a=nb.Color.hsb($a.number,Xa.number,1-Gb.number).withA(ub.number);nb.signal(this,"colorEntered",$a)}},{key:"confirmHSB",value:function(){var $a=this.getSubmorphNamed("first value"),
Xa=this.getSubmorphNamed("second value"),Gb=this.getSubmorphNamed("third value"),ub=this.getSubmorphNamed("opacity control");$a=nb.Color.hsb($a.number,Xa.number,Gb.number).withA(ub.number);nb.signal(this,"colorEntered",$a)}},{key:"confirmCSS",value:function(){var $a=this.getSubmorphNamed("css input");$a=nb.Color.fromString($a.input);nb.signal(this,"colorEntered",$a)}},{key:"selectEncoding",value:function($a){this.encodingMode=$a;this.submorphs.map(function(Gb){return Gb.visible=Gb.isLayoutable=!1});
var Xa=this.getSubmorphNamed({Hex:"hex encoding",RGB:"3 val encoding",HSL:"3 val encoding",HSB:"3 val encoding",CSS:"css encoding"}[$a]);Xa.visible=Xa.isLayoutable=!0;"RGB"==$a&&[Xa.getSubmorphNamed("first value"),Xa.getSubmorphNamed("second value"),Xa.getSubmorphNamed("third value")].forEach(function(Gb){Object.assign(Gb,{min:0,max:255,scaleFactor:1})});["HSL","HSB"].includes($a)&&(Object.assign(Xa.getSubmorphNamed("first value"),{min:0,max:360,scaleFactor:1}),[Xa.getSubmorphNamed("second value"),
Xa.getSubmorphNamed("third value")].forEach(function(Gb){Object.assign(Gb,{min:0,max:1,scaleFactor:100})}));this.refresh()}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorEncoder"}},{key:"properties",get:function(){return{encodingMode:{type:"Enum",values:["Hex","RGB","HSL","HSB","CSS"]},currentColor:{defaultValue:nb.Color.white}}}}],dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},
package:function(){return{name:"ColorEncoder",version:"0.1.1-41"}}},{start:211,end:5347})}(nb.Morph);Uc=nb.ColorEncoder;nb.default=Uc;var cc=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js");cc.HTMLMorph=Zd;cc.arr=cb;cc.materialDesignColors=xc;cc.webSafeColors=od;cc.flatDesignColors=qb;cc.Color=mb;cc.signal=Pb;Uc=function(wc){var dc=lively.FreezerRuntime.recorderFor("ColorPaletteView/index.js"),Nc=dc.hasOwnProperty("ColorPaletteView")&&"function"===typeof dc.ColorPaletteView?dc.ColorPaletteView:
dc.ColorPaletteView=function($a){$a&&$a[Symbol.for("lively-instance-restorer")]||this[Symbol.for("lively-instance-initialize")].apply(this,arguments)};return tb(Nc,wc,[{key:"test",value:function(){this.showPalette(cc.materialDesignColors.map(function($a){return cc.Color.rgbHex($a)}))}},{key:"selectPalette",value:function($a){var Xa={"Flat Design":cc.flatDesignColors,Material:cc.materialDesignColors,"Web Safe":cc.webSafeColors};Xa[$a]&&this.showPalette(Xa[$a].map(function(Gb){return cc.Color.rgbHex(Gb)}))}},
{key:"onMouseDown",value:function($a){tb._get(Object.getPrototypeOf(Nc.prototype),"onMouseDown",this).call(this,$a);($a=$a.domEvt.target.dataset.color)&&cc.signal(this,"colorSelected",cc.Color.fromString($a))}},{key:"showPalette",value:function($a){this.html='<div class="palette-container">\n      '+$a.map(function(Xa){return'<div class="color-cell" data-color="'+Xa+'" style="background: '+Xa+'"></div>'}).join("\n")+"\n    </div>"}}],[{key:Symbol.for("__LivelyClassName__"),get:function(){return"ColorPaletteView"}}],
dc,{pathInPackage:function(){return"index.js"},unsubscribeFromToplevelDefinitionChanges:function(){return function(){}},subscribeToToplevelDefinitionChanges:function(){return function(){}},package:function(){return{name:"ColorPaletteView",version:"0.1.1-14"}}},{start:260,end:1164})}(cc.HTMLMorph);Uc=cc.ColorPaletteView;cc.default=Uc}}});